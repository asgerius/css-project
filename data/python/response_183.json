[{"tags": ["python", "python-requests", "etcd"], "answers": [{"tags": [], "owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "is_accepted": true, "score": 1, "last_activity_date": 1531358501, "creation_date": 1531358501, "answer_id": 51296116, "question_id": 51295586, "link": "https://stackoverflow.com/questions/51295586/using-requests-to-put-key-value-into-etcd-results-in-empty-value/51296116#51296116", "title": "Using requests to PUT &lt;key,value&gt; into etcd results in empty value", "body": "<p>First, you can get the sent request from <code>r</code> by <code>r.request</code>. And then you can see what's wrong with it:</p>\n\n<pre><code>&gt;&gt;&gt; r = requests.put(\"http://www.example.com\", data=\"value=\\\"Test Message\\\"\")\n&gt;&gt;&gt; r.request\n&lt;PreparedRequest [PUT]&gt;\n&gt;&gt;&gt; r.request.url\n'http://www.example.com/'\n&gt;&gt;&gt; r.request.body\n'value=\"Test Message\"'\n&gt;&gt;&gt; r.request.headers\n{'User-Agent': 'python-requests/2.18.4', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '20'}\n</code></pre>\n\n<p>Second, I think you should use <code>r = requests.put('http://127.0.0.1:2379/v2/keys/message', data={\"value\": \"Test Message\"})</code></p>\n"}], "owner": {"reputation": 3466, "user_id": 369710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e7b58abe2b8d8faa4b380d48bf85979d?s=128&d=identicon&r=PG", "display_name": "Everaldo Aguiar", "link": "https://stackoverflow.com/users/369710/everaldo-aguiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 51296116, "answer_count": 1, "score": 0, "last_activity_date": 1531358501, "creation_date": 1531353157, "question_id": 51295586, "link": "https://stackoverflow.com/questions/51295586/using-requests-to-put-key-value-into-etcd-results-in-empty-value", "title": "Using requests to PUT &lt;key,value&gt; into etcd results in empty value", "body": "<p>I'm trying to use requests to run a simple PUT and add a new  pair to etcd (which I have running locally). I am able to do this just fine by directly calling etcd like so:</p>\n\n<pre><code>curl -X PUT http://127.0.0.1:2379/v2/keys/message -d value=\"Test Message\"\n</code></pre>\n\n<p>However, the code below, which I thought would be equivalent to that, doesn't seem to work:</p>\n\n<pre><code>import requests\nr = requests.put('http://127.0.0.1:2379/v2/keys/message', data = 'value=\\\"Test Message\\\"')\nprint(r.content)\n</code></pre>\n\n<p>The print statement above shows me this:</p>\n\n<pre><code>b'{\"action\":\"create\",\"node\":{\"key\":\"/message/35\",\"value\":\"\",\"modifiedIndex\":35,\"createdIndex\":35}}\\n'\n</code></pre>\n\n<p>So it appears that the value of <em>value</em> is empty for some reason. I've tried various formats for the <em>data</em> parameter but didn't have any luck.</p>\n"}, {"tags": ["python", "opencv", "flask"], "owner": {"reputation": 73, "user_id": 9847329, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9MlrPgB7u6c/AAAAAAAAAAI/AAAAAAAAF88/38aKFeci3ws/photo.jpg?sz=128", "display_name": "Iyad Boustany", "link": "https://stackoverflow.com/users/9847329/iyad-boustany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 639, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1531354739, "creation_date": 1531352836, "last_edit_date": 1531354739, "question_id": 51295557, "link": "https://stackoverflow.com/questions/51295557/unable-to-stop-the-stream-device-or-resource-busy-when-using-opencv-with-flas", "title": "&quot;Unable to stop the stream: Device or resource busy&quot; when using Opencv with flask. Works well when flask isn&#39;t imported", "body": "<p>I've been trying to stream video from a webcam to a flask website. But whenever I call cv2.VideoCapture(id) I get the following error (once for each of my 8 cameras):</p>\n\n<pre><code>VIDEOIO ERROR: V4L2: Pixel format of incoming image is unsupported by OpenCV. Unable to stop the stream: Device or resource busy\n</code></pre>\n\n<p>But whenever I request the video feed outside the context of flask everything works as it should.</p>\n\n<p>Here is my code:</p>\n\n<p><strong>web_server.py</strong></p>\n\n<pre><code>import cameras\nfrom flask import Flask, request, render_template, Response\nfrom flask import jsonify\nimport sensors\nimport gps\nimport system_monitor\nimport cv2\n\n\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/_livedata', methods= ['GET'])\ndef livedata():\n    accel_value, distance_object, heading, gyroscope_object, speed = sensors.get_sensor_reading()\n    current_coordinates = gps.get_gps_coordinates()\n    cpu_usage, ram_uage, gpu_usage, vram_usage = system_monitor.get_system_info()\n    return jsonify(speed=round(speed, 2),\n                    acceleration = accel_value,\n                    cpu=cpu_usage,\n                    ram=ram_uage,\n                    gpu=gpu_usage,\n                    vram=vram_usage,\n                    distance1=round(distance_object[0]/100,2),\n                    distance2=round(distance_object[1]/100,2),\n                    distance3=round(distance_object[2]/100,2),\n                    distance4=round(distance_object[3]/100,2),\n                    distance5=round(distance_object[4]/100,2),\n                    distance6=round(distance_object[5]/100,2),\n                    distance7=round(distance_object[6]/100,2),\n                    distance8=round(distance_object[7]/100,2))\n\ndef gen(id):\n    \"\"\"Video streaming generator function.\"\"\"\n    while True:\n        frame = cameras.get_video_feed(id)\n        cv2.imwrite('t.jpg', frame)\n        print(frame)\n        yield (b'--frame\\r\\n'\n               b'Content-Type: image/jpeg\\r\\n\\r\\n' + open('t.jpg', 'rb').read() + b'\\r\\n')\n\n@app.route('/video_feed/&lt;id&gt;')\ndef video_feed(id):\n    id = int(id)\n    \"\"\"Video streaming route. Put this in the src attribute of an img tag.\"\"\"\n    return Response(gen(id),\n                    mimetype='multipart/x-mixed-replace; boundary=frame')\n\n\ndef start(host, port ,debug):\n    app.run(host, port, debug)\n</code></pre>\n\n<p><strong>cameras.py</strong></p>\n\n<pre><code>import cv2\nimport numpy as np\n\n\ncap = cv2.VideoCapture(3)\ncap.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\ncap1 = cv2.VideoCapture(2)\ncap1.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap1.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\ncap2 = cv2.VideoCapture(6)\ncap2.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap2.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\ncap3 = cv2.VideoCapture(7)\ncap3.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap3.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\ncap4 = cv2.VideoCapture(5)\ncap4.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap4.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\ncap5 = cv2.VideoCapture(0)\ncap5.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap5.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\ncap6 = cv2.VideoCapture(1)\ncap6.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap6.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\ncap7 = cv2.VideoCapture(4)\ncap7.set(cv2.CAP_PROP_FRAME_WIDTH,1280);\ncap7.set(cv2.CAP_PROP_FRAME_HEIGHT,720);\n\nprint(\"Cameras Started!\")\n\n\n\ndef get_all_video_feeds():\n    ret, img = cap.read()\n    ret1, img1 = cap1.read()\n    ret2, img2 = cap2.read()\n    ret3, img3 = cap3.read()\n    ret4, img4 = cap4.read()\n    ret5, img5 = cap5.read()\n    ret6, img6 = cap6.read()\n    ret7, img7 = cap7.read()\n\n    #output = np.concatenate((img[0:720 , 0:1240], img1[0:720 , 0:1240], img2[0:720 , 0:1240], img3[0:720 , 0:1240], img4[0:720 , 0:1240], img5[0:720 , 0:1240], img6[0:720 , 0:1240], img7[0:720 , 0:1240]), axis=1)\n\n    #output = cv2.resize(output,(6832,480))\n    #cv2.imshow('image', output)\n    return (img, img1, img2, img3, img4, img5, img6, img7)\n\ndef get_video_feed(id):\n    if id == 0:\n        ret, img = cap.read()\n        return img\n    elif id == 1:\n        ret1, img1 = cap1.read()\n        return img1\n    elif id == 2:\n        ret2, img2 = cap2.read()\n        return img2\n    elif id == 3:\n        ret3, img3 = cap3.read()\n        return img3\n    elif id == 4:\n        ret4, img4 = cap4.read()\n        return img4\n    elif id == 5:\n        ret5, img5 = cap5.read()\n        return img5\n    elif id == 6:\n        ret6, img6 = cap6.read()\n        return img6\n    elif id == 7:\n        ret7, img7 = cap7.read()\n        return img7\n</code></pre>\n\n<p><strong>[Note]</strong></p>\n\n<ul>\n<li>I'm calling the .start() method of web_server.py from another file\n(currently this file only calls this method).</li>\n<li>I am not using those cameras in any other script.</li>\n<li>Running cameras.py without web_server.py gives the wanted results\nwhen calling the functions in it.</li>\n<li>Operating System: Ubuntu 16.04</li>\n</ul>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "multithreading", "signals", "dockerfile", "luigi"], "comments": [{"owner": {"reputation": 558, "user_id": 2309498, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/09f874c3ae489932e8b3a3e5f7f906d1?s=128&d=identicon&r=PG", "display_name": "Nikhil Shinday", "link": "https://stackoverflow.com/users/2309498/nikhil-shinday"}, "edited": false, "score": 1, "creation_date": 1543018458, "post_id": 51295521, "comment_id": 93780791, "body": "hey Justin, did you ever figure this out? I&#39;m trying to run a flask server and I&#39;m running into a similar problem - Flask dispatches threads to handle requests and I&#39;m trying to <code>build</code> my pipeline within the response generating method"}], "answers": [{"tags": [], "owner": {"reputation": 589, "user_id": 6476427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a3b4be6058eb0b0801349fcdbc1d81?s=128&d=identicon&r=PG&f=1", "display_name": "Oren", "link": "https://stackoverflow.com/users/6476427/oren"}, "is_accepted": false, "score": 0, "last_activity_date": 1549420724, "creation_date": 1549420724, "answer_id": 54545891, "question_id": 51295521, "link": "https://stackoverflow.com/questions/51295521/python-luigi-with-docker-threading-signal-issue/54545891#54545891", "title": "Python Luigi with Docker - Threading/Signal issue", "body": "<p>This happens because <code>subscriber.subscribe</code> starts a background thread. When that thread invokes <code>luigi.build</code> the exception is thrown.</p>\n\n<p>The best solution here is to read pub-sub messages from the main thread using <code>subscriber.pull</code>. See example <a href=\"https://cloud.google.com/pubsub/docs/pull#synchronous-pull\" rel=\"nofollow noreferrer\">in the docs</a>.</p>\n"}], "owner": {"reputation": 31, "user_id": 7632468, "user_type": "registered", "profile_image": "https://graph.facebook.com/1423929711258627/picture?type=large", "display_name": "Justin J Medina", "link": "https://stackoverflow.com/users/7632468/justin-j-medina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1115, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1549420724, "creation_date": 1531352433, "question_id": 51295521, "link": "https://stackoverflow.com/questions/51295521/python-luigi-with-docker-threading-signal-issue", "title": "Python Luigi with Docker - Threading/Signal issue", "body": "<h2>Overview</h2>\n\n<p>We're building a pipeline inside a Docker container using <a href=\"https://github.com/spotify/luigi/blob/master/luigi/worker.py\" rel=\"nofollow noreferrer\" title=\"Luigi\">Luigi</a>. This \nis my first time using Luigi and I'm trying to get it running but I'm stuck on a Python threading/signal error.</p>\n\n<p><strong>What we're building</strong><br>\nWe have a container that runs a setup.py script as an entrypoint. This script imports my Luigi tasks but it's main function is to open up a PubSub channel to Google Cloud Services. When it receives a message on that channel, it kicks off a run of tasks.</p>\n\n<p><strong>The Error</strong> .<br>\nI am calling Luigi directly from Python, experimenting with variations of this command:  </p>\n\n<p><code>luigi.build([GetImageSet()], workers=2, local_scheduler=True, no_lock=True)</code></p>\n\n<p>And recieving this error:    </p>\n\n<p><code>ValueError: signal only works in main thread</code></p>\n\n<hr>\n\n<h2>Background on Signal &amp; Luigi</h2>\n\n<p><strong>From the Python Signal module docs:</strong><br>\nsignal.signal: <em>this function can only be called from the main thread; attempting to call it from other threads will cause a ValueError exception to be raised.</em></p>\n\n<p><strong>From the Luigi worker.py script <a href=\"https://github.com/spotify/luigi/blob/64d6b831f/luigi/worker.py#L336-L338\" rel=\"nofollow noreferrer\" title=\"here\">here</a></strong><br>\nLuigi provides the no_install_shutdown_handler flag (defaults to false). 'If true, the SIGUSR1 shutdown handler will NOT be installed on the worker'. This is also where the error is occuring (on line 538). The script checks that a configuration flag for the no_install_shutdown_handler is (the default) false before running signal.signal(). I have failed so far to get Luigi to read my client.cfg file with that flag set to true, and Docker may be to blame.</p>\n\n<p><strong>From the Luigi interface.py script <a href=\"https://github.com/spotify/luigi/blob/master/luigi/interface.py\" rel=\"nofollow noreferrer\">here</a></strong><br>\nIf you don't want to run luigi from the command line. You may use the methods defined in this module to programmatically run luigi. In this script, I could provide a custom worker schedule factory but I haven't been able to wrap my head around that yet.</p>\n\n<p><strong>Local vs. global Luigi scheduler</strong><br>\nLuigi provides two scheduler options for running tasks. The local </p>\n\n<p><strong>Dockerfile woes</strong>: In my Dockerfile for this container, I am installing Luigi through pip but not doing much else. After reviewing <a href=\"https://github.com/pysysops/docker-luigi-taskrunner/blob/master/Dockerfile\" rel=\"nofollow noreferrer\" title=\"this\">this</a> and <a href=\"https://github.com/spiside/docker-luigi/blob/master/docker/base/Dockerfile\" rel=\"nofollow noreferrer\" title=\"this\">this</a> docker/luigi implementations on github, I'm starting to worry that I'm not doing enough in my Dockerfile.</p>\n\n<hr>\n\n<h2>Possible reasons I think the error is happening</h2>\n\n<ol>\n<li>The pub-sub channel subscriber is non-blocking, so I'm doing something that might be terrible to keep the main thread from exiting while we wait for messages in the background. This seems a likely source of my thread woes.</li>\n<li>The no_install_shutdown_handler flag is not being successfully set to True, which would hopefully circumvent the Error but not necessarily be what I want</li>\n<li>The local task scheduler. I should be using the global scheduler instead of the local scheduler. I'm eventually going to have to get this working for production anyways... </li>\n<li>Running the script from Python instead of the command line </li>\n<li>using <code>luigi.build</code>. Instead I should be using <code>luigi.run</code>, but based on the documentation page for <a href=\"https://luigi.readthedocs.io/en/latest/running_luigi.html#running-from-python-code\" rel=\"nofollow noreferrer\">Running from Python</a> build is \"useful if you want to get some dynamic parameters from another source, such as database, or provide additional logic before you start tasks.\" And that sounds like it fits my use case (triggering tasks after recieving a message from a pub-sub channel that passes a variable needed to run the first task)</li>\n</ol>\n\n<p><strong>Am I doing this all wrong anyway?</strong>\nIf you have any suggestions for implementing the system I've described, please let me know. I will also post my Dockerfile and setup.py attempts upon request.</p>\n\n<hr>\n\n<h3>Some code examples</h3>\n\n<p>Here's the Dockerfile  </p>\n\n<pre><code># ./Dockerfile\n# sfm-base:test is the container with tensorflow &amp; our python sfm-library. It installs Ubuntu, Python, pip etc.\nFROM sfm-base:test\nLABEL maintainer \"---@---.io\"\n\n# Install luigi, google-cloud w/ pip in module mode\nRUN python -m pip install luigi &amp;&amp; \\\npython -m pip install --upgrade google-cloud\n\n# for now at least, start.sh just calls setup.py and sets google credentials. Ignore that chmod bit if it's bad I don't know.\nCOPY start.sh /usr/local/bin\nRUN chmod -R 755 \"/usr/local/bin/start.sh\"\nENTRYPOINT [ \"start.sh\" ]\n\nWORKDIR /src\nCOPY . .\n\n# this was my attempt at setting the Luigi client.cfg in the container\n# all I'm having the config do for now is set [core] no_install_shutdown_handler: true\nENV LUIGI_CONFIG_PATH /src/client.cfg\n</code></pre>\n\n<p>And here's the setup.py (edited down for SO)</p>\n\n<pre><code># setup.py\nfrom google.cloud import pubsub_v1\nfrom time import sleep\nimport luigitasks\nimport luigi\nimport logging\nimport json\n\nsubscriber = pubsub_v1.SubscriberClient()\nsubscription_path = subscriber.subscription_path(\n'servicename', 'pubsubcommand')\n\n# Example task. These are actually in luigitasks.py\nclass GetImageSet(luigi.Task):\n     uri = luigi.Parameter(default='')\n\n     def requires(self):\n          return []\n\n     def output(self):\n          # write zip to local\n          return\n\n     def run(self):\n          # use the URI to retrieve the ImageSet.zip from the bucket\n          logging.info('Running getImageSet')\n\n# Pubsub message came in\ndef onMessageReceived(message):\n     print('Received message: {}'.format(message))\n\n     if message.attributes:\n          for key in message.attributes:\n               if key == 'ImageSetUri':\n                    value = message.attributes.get(key)\n                    # Kick off the pipeline starting with the GetImageSet Task\n                    # I've tried setting no_lock, take_lock, local_scheduler...\n                    # General flags to try and prevent the thread issues\n                    luigi.build([GetImageSet()], workers=3, local_scheduler=True, no_lock=False)\n                    message.ack()\n\nsubscriber.subscribe(subscription_path, callback=onMessageReceived)\n\n# The subscriber is non-blocking, so I keep the main thread from\n# exiting to allow it to process messages in the background. Is this\n# the cause of my woes?\nprint('Listening for messages on {}'.format(subscription_path))\nwhile True:\n    sleep(60)\n</code></pre>\n"}, {"tags": ["python", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 2805700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RDIEq.jpg?s=128&g=1", "display_name": "Ryan Collingwood", "link": "https://stackoverflow.com/users/2805700/ryan-collingwood"}, "is_accepted": false, "score": 2, "last_activity_date": 1531363525, "last_edit_date": 1531363525, "creation_date": 1531355594, "answer_id": 51295834, "question_id": 51295454, "link": "https://stackoverflow.com/questions/51295454/compare-and-equalize-two-data-frames-in-python/51295834#51295834", "title": "Compare and equalize two data frames in Python", "body": "<p>This is a great use case for DataFrame.merge: <a href=\"https://pandas.pydata.org/pandas-docs/version/0.23/generated/pandas.DataFrame.merge.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/version/0.23/generated/pandas.DataFrame.merge.html</a></p>\n\n<p>What is awesome about merge that the manner of the join will be familiar if you've spent any time in a relational database (left, right, inner, outer).</p>\n\n<p>The <code>indicator</code> parameter is of particular interest to you in this case:</p>\n\n<pre><code>result_df1 = df1.merge(\n    df2,\n    how = \"outer\",\n    on = \"C1\",\n    indicator = True,\n    suffixes = (\"\", \"_df2\")\n)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8Ptu9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Ptu9.png\" alt=\"Merge Result\"></a></p>\n\n<p>So the results with <code>np.nan</code> in column <code>C2</code> in this specific join you'll want to fill with <code>0</code> and then drop the extra columns we've introduced.</p>\n"}], "owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531363525, "creation_date": 1531351844, "question_id": 51295454, "link": "https://stackoverflow.com/questions/51295454/compare-and-equalize-two-data-frames-in-python", "title": "Compare and equalize two data frames in Python", "body": "<p>I have the following dataframes:\ndf1</p>\n\n<pre><code>C1    C2\nF56   345\nG45   65\nH13   56\nH67   578\nY78   64\n</code></pre>\n\n<p>df2</p>\n\n<pre><code>C1    C2\nA34   10\nF56   345\nH13   56\nY78   64\n</code></pre>\n\n<p>I want to compare the above two dataframes and if df1 contains a value in C1 which is not present in df2 or vise-versa I want to add a new row with the missing value with corresponding C2 value = 0.\nSo the resulting dataframes will look like the following.</p>\n\n<p>df1</p>\n\n<pre><code>C1    C2\nA34   0\nF56   345\nG45   65\nH13   56\nH67   578\nY78   64\n</code></pre>\n\n<p>df2</p>\n\n<pre><code>C1    C2\nA34   10\nF56   345\nG45   0\nH13   56\nH67   0\nY78   64\n</code></pre>\n\n<p>Appreciate any recommendations. </p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 14194, "user_id": 230561, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fkc6G.jpg?s=128&g=1", "display_name": "JeremyFromEarth", "link": "https://stackoverflow.com/users/230561/jeremyfromearth"}, "edited": false, "score": 0, "creation_date": 1531352015, "post_id": 51295444, "comment_id": 89568470, "body": "Can you post an example row of the data from the csv file?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 4, "creation_date": 1531352029, "post_id": 51295444, "comment_id": 89568474, "body": "It&#39;s unrelated to your main question, but rather than using a <code>try</code>/<code>finally</code> pair to make sure your files get closed, use <a href=\"https://www.python.org/dev/peps/pep-0343/\" rel=\"nofollow noreferrer\">a <code>with</code> statement</a>. It does exactly the same thing in a much more concise way."}, {"owner": {"reputation": 5878, "user_id": 8172933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c23be88780bfccade78eb5ffb64ba9?s=128&d=identicon&r=PG", "display_name": "figbeam", "link": "https://stackoverflow.com/users/8172933/figbeam"}, "edited": false, "score": 1, "creation_date": 1531352421, "post_id": 51295444, "comment_id": 89568545, "body": "In my experience Excel is not good at importing data of different types from csv. Especially not date formats. You&#39;d probably have better luck with creating an XML file that is excel readable and in it specify the type for every cell."}, {"owner": {"reputation": 730, "user_id": 8240959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11513a67f5ce87c84cd40ac943ffe69b?s=128&d=identicon&r=PG&f=1", "display_name": "jlaur", "link": "https://stackoverflow.com/users/8240959/jlaur"}, "edited": false, "score": 0, "creation_date": 1531378646, "post_id": 51295444, "comment_id": 89575038, "body": "From what you describe I&#39;d say you have new line characters surrounding you int in you csv-file. You probably haven&#39;t sanitized these before writing the file. You inspect this in excel e.g by doing a LENGTH() on your fields and see if that matches your ints. Or do a CODE(LEFT(excelField,1)). If I&#39;m right you&#39;ll probably see 10 or 13 (new line characters depending on your OS)."}], "owner": {"reputation": 29, "user_id": 8600164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d063bab936fb3b34e2ee22237722ecf?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/8600164/noname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531375806, "creation_date": 1531351743, "last_edit_date": 1531375806, "question_id": 51295444, "link": "https://stackoverflow.com/questions/51295444/int-being-read-as-text-python", "title": "Int being read as text? Python", "body": "<p>I have scraped a website, and had the information saved into a CSV file. However parts of the information scraped are numbers, which when opened in excel, the cells first appear to be empty, and then require me to double click each cell before the data appears. Once the data is visible, it is not read as numbers, and instead seems to be read as text (or perhaps it's not even being read as text) as I also tried implementing text to int conversion on excel, and when I attempted to convert the text it simply deleted all information within the cells. \nAny help appreciated. </p>\n\n<pre><code>import math\nimport sys\nfrom bs4 import BeautifulSoup\nimport csv\nimport requests\nimport re \nsource = requests.get('https://www.example.com').text\nsoup = BeautifulSoup(source, 'lxml')\n\ncsvfile = open('example.csv', 'wt', newline='')\ntry:\n    writer = csv.writer(csvfile)\n    writer.writerow('')\n    for teams in soup.find_all('span', class_=\"name ib\"):\n        writer.writerow(team)\nfinally:\n     csvfile.close()\n\n## Also if instead of saving the 2nd portion of the program starting from the \n## second csv open, and I  \n## instead change the code to directly display the information in the \n## console, the entire html tag is displayed, not just the information inside \n## of the tag \n\n\n\ncsvfile = open('example2.csv', 'wt', newline='')\ntry:\n    writer = csv.writer(csvfile)\n    writer.writerow('')\n    for odds in soup.find_all('span', class_=re.compile(r\"price-val_.\")):\n       writer.writerow(value)\n\n\nfinally:\n    csvfile.close()\n</code></pre>\n\n<h2>Excel screenshot</h2>\n\n<p><a href=\"https://i.stack.imgur.com/G6nUA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G6nUA.jpg\" alt=\"[excel screenshot](https://imgur.com/a/L0KHGvW)\"></a></p>\n"}, {"tags": ["python", "python-2.7", "tkinter"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9874845"}, "edited": false, "score": 0, "creation_date": 1531527175, "post_id": 51295472, "comment_id": 89643627, "body": "I have been trying to fix the code for click function but nothing is working. I have tried puting a root.after(100, click) after pyautogui.hotkey(&quot;ctrlleft&quot;), I don&#39;t get any error but code in general doesn&#39;t execute. Any more suggestion?"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 0, "last_activity_date": 1531351962, "creation_date": 1531351962, "answer_id": 51295472, "question_id": 51295411, "link": "https://stackoverflow.com/questions/51295411/tkinter-window-stops-responding/51295472#51295472", "title": "tkinter window stops responding", "body": "<p>You can't do a <code>while True:</code> loop that just runs forever\u2014or anything at all that runs for a long time\u2014in an event handler.</p>\n\n<p>If you do, you never return control to the tkinter event loop. But the event loop is how your program processes things like mouse moves and key presses and important messages from the OS. So, if you don't let it run, your GUI hangs, and eventually you get a beachball or hourglass or pocket watch or whatever Windows uses to mean \"unresponsive\".</p>\n\n<hr>\n\n<p>So, you need to do something like this:</p>\n\n<pre><code>def rocket():\n    pyautogui.hotkey(\"2\")\n    root.after(500, rocket2)\n\ndef rocket2():\n    pyautogui.hotkey(\"7\")\n    root.after(20000, rocket)\n</code></pre>\n\n<p>Now, instead of looping forever, blocking the whole program while it waits half a second and then again while it waits 20 seconds, it just does something quick, asks tkinter to run the rest of the code in 0.5 seconds, then returns.</p>\n\n<p>And you need to do something similar in <code>click</code>, of course.</p>\n\n<hr>\n\n<p>A different option, that doesn't require turning your loops inside-out like this, is to use threads. (You've already imported <code>threading</code>, but you're not doing anything with it.)</p>\n\n<p>Threads aren't always a good solution. For example, you're not allowed to access any tkinter widgets from a background thread, and in most programs, you need to do things like get the value from an <code>Entry</code> and update the text in a <code>Label</code> and so on. But here, you're not doing that. <code>pyautogui</code> seems like the kind of library that also might not be usable from a background thread, but I haven't checked; if it's thread-safe, your function can be changed easily.</p>\n\n<p>Instead of calling <code>rocket</code> directly, you want to call a function that starts <code>rocket</code> in a background thread:</p>\n\n<pre><code>def rocket():\n    rocket = True\n    while rocket:\n        pyautogui.hotkey(\"2\")\n        time.sleep(0.5)\n        pyautogui.hotkey(\"7\")\n        time.sleep(20)\n\ndef start_rocket():\n    th = threading.Thread(target=rocket)\n    th.start()\n\n# \u2026\n\nroot = Tkinter.Button(root, text = \"Click me\", command = start_rocket)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9874845"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 51295472, "answer_count": 1, "score": 0, "last_activity_date": 1531351962, "creation_date": 1531351433, "question_id": 51295411, "link": "https://stackoverflow.com/questions/51295411/tkinter-window-stops-responding", "title": "tkinter window stops responding", "body": "<p>I have this code:</p>\n\n<pre><code>#python 2.7.15\n\nimport pyautogui\nimport time\nimport msvcrt\nfrom threading import Thread\nimport win32api\nimport battle\nimport Tkinter\nfrom Tkinter import *\n\n#launcher pos x:868 y:975\n#rocket pos x:829 y:936\n\ndef click():\n        left = win32api.GetKeyState(0x01)\n        while True:\n                click = win32api.GetKeyState(0x01)\n                if click != left:\n                        left = click\n                        #print(a)\n                        if click &lt; 0:\n                                pyautogui.hotkey(\"ctrlleft\")\n                                time.sleep(1)\n\ndef rocket():\n        rocket = True\n        while rocket:\n            pyautogui.hotkey(\"2\")\n            time.sleep(0.5)\n            pyautogui.hotkey(\"7\")\n            time.sleep(20)\n\nroot = Tk()\nroot.geometry(\"300x200\")\nroot.title(\"Bot options\")\nroot = Tkinter.Button(root, text = \"Click me\", command = rocket)\nroot.pack()\nroot.mainloop()\n\n\n\"\"\"key = msvcrt.getche()\nif key == 'z':\n        click()\nelif key == 'x':\n    if __name__ == '__main__':\n            Thread(target = click).start()\n            Thread(target = battle.battle).start()\n            Thread(target = rocket).start()\"\"\"\n</code></pre>\n\n<p>The problem is that when running and I click the Click me button inside the window that is created, the window stops responding. I have tried changing <code>command = rocket</code> to <code>command = rocket()</code> but no window pops up and function starts working </p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "one-hot-encoding"], "answers": [{"tags": [], "owner": {"reputation": 3874, "user_id": 2423116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8047e96df3264a4cabc812b4da38577e?s=128&d=identicon&r=PG", "display_name": "ADJ", "link": "https://stackoverflow.com/users/2423116/adj"}, "is_accepted": false, "score": 0, "last_activity_date": 1531415848, "creation_date": 1531415848, "answer_id": 51311254, "question_id": 51295392, "link": "https://stackoverflow.com/questions/51295392/custom-scikit-encoder-throws-conversion-error/51311254#51311254", "title": "Custom scikit encoder throws conversion error", "body": "<p>I figured out the error.\nThe whole section </p>\n\n<pre><code>ohe_trans = pd.DataFrame.from_records(data=ohe.transform(X[cols]),\n                                                columns = col_order)\n\n            ohe_trans.index=X.index\n\n            if drops:\n                ohe_trans = ohe_trans.drop(drops, axis=1)\n\n            X = X.drop(cols, axis=1)\n</code></pre>\n\n<p>was inside the columns loop. Need to be run after the previous loop completes.</p>\n"}], "owner": {"reputation": 3874, "user_id": 2423116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8047e96df3264a4cabc812b4da38577e?s=128&d=identicon&r=PG", "display_name": "ADJ", "link": "https://stackoverflow.com/users/2423116/adj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531415848, "creation_date": 1531351270, "question_id": 51295392, "link": "https://stackoverflow.com/questions/51295392/custom-scikit-encoder-throws-conversion-error", "title": "Custom scikit encoder throws conversion error", "body": "<p>I'm adapting some online code to create my own version of a scikit-learn One Hot Encoder. The custom class does a few things for me, mostly it allows to set a threshold below which rare levels of a categorical variable get dumped into an 'other' class.\nI can fit correctly but when I try to transform, I get a conversion error, as if the embedded LabelEncoder that gets run before OHE isn't working properly.</p>\n\n<pre><code>from sklearn.preprocessing import LabelEncoder, OneHotEncoder\nfrom sklearn.base import BaseEstimator, TransformerMixin\nfrom sklearn.utils.validation import check_is_fitted\nimport pandas as pd\nimport numpy as np\n\n#my custom OHE-er\nclass CustomPandasTransformer(BaseEstimator, TransformerMixin):\n    def _validate_input(self, X):\n        if not isinstance(X, pd.DataFrame):\n            raise TypeError('X must be a DataFrame, but gor type=%s' % type(x))\n        return X\n\n    @staticmethod\n    def _validate_columns(X, cols):\n        scols = set(X.columns)\n        if not all(c in scols for c in cols):\n            raise ValueError(\"all columns must be present in X\")\n\nclass DummyEncoder(CustomPandasTransformer):\n    def __init__(self, columns, sep='_', drop_one_level=True, tmp_nan_rep='MISSING',other_treshold=20):\n        self.columns=columns\n        self.sep = sep\n        self.drop_one_level = drop_one_level\n        self.tmp_nan_rep = tmp_nan_rep\n        self.other_treshold = other_treshold\n\n\n    def fit(self, X, y=None):\n        X = self._validate_input(X).copy()\n\n        tmp_nan = self.tmp_nan_rep\n        oth_thr = self.other_treshold\n\n        cols = self.columns\n        self._validate_columns(X, cols)\n\n        lab_encoders = {}\n        for col in cols:\n            #group low freq levels into a 'OTHER' level\n            tmp_vc = X[col].value_counts()\n            high_volume_levels = list(tmp_vc[tmp_vc&gt;oth_thr].index)\n            vec = [v if v in high_volume_levels else 'OTHER' for v in X[col].tolist()]\n\n            vec = [tmp_nan if pd.isnull(v) else v for v in vec]\n            svec = list(set(vec))\n            if tmp_nan not in svec:\n                svec.append(tmp_nan)\n\n            le = LabelEncoder()\n            lab_encoders[col] = le.fit(svec)\n\n            X[col] = le.transform(vec)\n\n        ohe_set = X[cols]\n        ohe_nan_row = {c: lab_encoders[c].transform([tmp_nan])[0] for c in cols}\n        ohe_set = ohe_set.append(ohe_nan_row, ignore_index=True)\n        ohe = OneHotEncoder(sparse=False).fit(ohe_set)\n\n        self.ohe_ = ohe\n        self.le_ = lab_encoders\n        self.cols_ = cols\n\n        return self\n\n    def transform(self, X):\n        check_is_fitted(self, 'ohe_')\n        X = self._validate_input(X).copy()\n\n        ohe = self.ohe_\n        lenc = self.le_\n        cols = self.cols_\n        tmp_nan = self.tmp_nan_rep\n        sep = self.sep\n        drop = self.drop_one_level\n\n        self._validate_columns(X, cols)\n        col_order = []\n        drops = []\n\n        for col in cols:\n            le = lenc[col]\n\n            vec = [v if v in list(le.classes_) else 'OTHER' for v in X[col].tolist()]\n            vec = [tmp_nan if pd.isnull(v) else v for v in vec]\n\n            vec_trans = le.transform(vec)\n            X[col] = vec_trans\n\n            le_clz = le.classes_.tolist()\n            classes = ['%s%s%s' % (col,sep,clz) for clz in le_clz]\n            col_order.extend(classes)\n\n            if drop and len(le_clz)&gt;1:\n                drops.append(classes[-1])\n\n            ohe_trans = pd.DataFrame.from_records(data=ohe.transform(X[cols]),\n                                                columns = col_order)\n\n            ohe_trans.index=X.index\n\n            if drops:\n                ohe_trans = ohe_trans.drop(drops, axis=1)\n\n            X = X.drop(cols, axis=1)\n\n            X = pd.concat([X, ohe_trans], axis=1)\n            return X\n\n#the data\ndicpd = {\n u'BILL_CLASS': {0: np.nan, 1: np.nan},\n u'CL_SUB_TYPE': {0: 'M', 1: 'M'},\n u'COB_TYPE': {0: np.nan, 1: np.nan},\n u'DUP_BILL_CLASS': {0: np.nan, 1: np.nan},\n u'DUP_CL_SUB_TYPE': {0: 'M', 1: 'M'},\n u'DUP_COB_TYPE': {0: np.nan, 1: np.nan},\n u'DUP_DX_CD': {0: 'M9901', 1: 'Z0100'},\n u'DUP_FAC_TYPE': {0: np.nan, 1: np.nan},\n u'DUP_FREQUENCY': {0: np.nan, 1: np.nan},\n u'DUP_LOB_ID': {0: 'PBC1', 1: 'PBC1'},\n u'DUP_MOD1': {0: np.nan, 1: np.nan},\n u'DUP_MOD2': {0: np.nan, 1: np.nan},\n u'DUP_MOD3': {0: np.nan, 1: np.nan},\n u'DUP_MOD4': {0: np.nan, 1: np.nan},\n u'DUP_POS_CD': {0: '11', 1: '11'},\n u'DUP_PROC_CD': {0: '98941', 1: 'V2020'},\n u'DUP_REV_CD': {0: np.nan, 1: np.nan},\n u'DX_CD': {0: 'M9901', 1: 'Z0100'},\n u'FAC_TYPE': {0: np.nan, 1: np.nan},\n u'FREQUENCY': {0: np.nan, 1: np.nan},\n u'MBR_AGE': {0: 48, 1: 56},\n u'MOD1': {0: '59', 1: np.nan},\n u'MOD2': {0: np.nan, 1: np.nan},\n u'MOD3': {0: np.nan, 1: np.nan},\n u'MOD4': {0: np.nan, 1: np.nan},\n u'POS_CD': {0: '11', 1: '11'},\n u'PROC_CD': {0: '97140', 1: 'V2781'},\n u'REV_CD': {0: np.nan, 1: np.nan},\n u'RULE_1': {0: 0, 1: 0},\n u'RULE_3': {0: 1, 1: 1},\n u'RULE_4': {0: 1, 1: 1},\n u'RULE_5': {0: 0, 1: 0},\n u'RULE_6': {0: 1, 1: 1},\n 'SAME_DX': {0: 1, 1: 1},\n 'SAME_POS_CD': {0: 1, 1: 1},\n 'SAME_PROC': {0: 0, 1: 0},\n 'SAME_PROV': {0: 1, 1: 1},\n 'SAME_REV': {0: 0, 1: 0},\n 'SAME_TOT': {0: 3, 1: 3},\n u'SYSTEM_GEN_DRG': {0: np.nan, 1: np.nan}}\n\n#read into pandas\ndf1 = pd.DataFrame(dicpd)\n\n#get object types\ncategorical_features = list(df1.select_dtypes(include=['object']).columns)\n\nde = DummyEncoder(columns = categorical_features,other_treshold=10,drop_one_level=False)\n\nde.fit(df1)\n\nde.transform(df1)\n\n\nValueErrorTraceback (most recent call last)\n&lt;ipython-input-5-3a72a3fa8104&gt; in &lt;module&gt;()\n    161 de.fit(df1)\n    162 \n--&gt; 163 de.transform(df1)\n\n&lt;ipython-input-5-3a72a3fa8104&gt; in transform(self, X)\n     95                 drops.append(classes[-1])\n     96 \n---&gt; 97             ohe_trans = pd.DataFrame.from_records(data=ohe.transform(X[cols]),\n     98                                                 columns = col_order)\n     99 \n\n/data/dataiku-dss-4.2.3/python.packages/sklearn/preprocessing/data.pyc in transform(self, X)\n   2073         \"\"\"\n   2074         return _transform_selected(X, self._transform,\n-&gt; 2075                                    self.categorical_features, copy=True)\n   2076 \n   2077 \n\n/data/dataiku-dss-4.2.3/python.packages/sklearn/preprocessing/data.pyc in _transform_selected(X, transform, selected, copy)\n   1807     X : array or sparse matrix, shape=(n_samples, n_features_new)\n   1808     \"\"\"\n-&gt; 1809     X = check_array(X, accept_sparse='csc', copy=copy, dtype=FLOAT_DTYPES)\n   1810 \n   1811     if isinstance(selected, six.string_types) and selected == \"all\":\n\n/data/dataiku-dss-4.2.3/python.packages/sklearn/utils/validation.pyc in check_array(array, accept_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, ensure_min_samples, ensure_min_features, warn_on_dtype, estimator)\n    431                                       force_all_finite)\n    432     else:\n--&gt; 433         array = np.array(array, dtype=dtype, order=order, copy=copy)\n    434 \n    435         if ensure_2d:\n\nValueError: could not convert string to float: V2781\n</code></pre>\n"}, {"tags": ["python", "import"], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531353737, "post_id": 51295465, "comment_id": 89568777, "body": "That is two levels above, and doesn&#39;t work, and I can&#39;t load pyscript3 from the parent module, also if I use ..Folder1, that gives: ValueError: attempted relative import beyond top-level package"}], "tags": [], "owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "is_accepted": false, "score": -1, "last_activity_date": 1531351914, "creation_date": 1531351914, "answer_id": 51295465, "question_id": 51295385, "link": "https://stackoverflow.com/questions/51295385/importing-from-subfolder-in-python/51295465#51295465", "title": "Importing from subfolder in Python", "body": "<p>You could use\n<code>from ..Folder1 import pyscript1</code>\nIn pyscript3.py\nBut you would have to load pyscript3 from the parent module or in your case MainProject.</p>\n"}, {"comments": [{"owner": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 1, "creation_date": 1531404791, "post_id": 51295698, "comment_id": 89592430, "body": "That&#39;s the issue I commented, I Get ModuleNotFoundError: No module named &#39;Folder1&#39;"}, {"owner": {"reputation": 364, "user_id": 2551008, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c95576ebecf22c3554e1011bb761edbd?s=128&d=identicon&r=PG", "display_name": "skepticscript", "link": "https://stackoverflow.com/users/2551008/skepticscript"}, "reply_to_user": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531434868, "post_id": 51295698, "comment_id": 89607234, "body": "You can&#39;t import Folder1, but you can import a script from Folder1.  Can you maybe expand on your MainProject folder? Where is the entry-point?"}, {"owner": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531439138, "post_id": 51295698, "comment_id": 89608167, "body": "I&#39;m trying to get from pyscript3 to pyscript1, the entry point would be pyscript3."}, {"owner": {"reputation": 364, "user_id": 2551008, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c95576ebecf22c3554e1011bb761edbd?s=128&d=identicon&r=PG", "display_name": "skepticscript", "link": "https://stackoverflow.com/users/2551008/skepticscript"}, "reply_to_user": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531482225, "post_id": 51295698, "comment_id": 89623637, "body": "Could you show your main.py or equivalent file?  Presumably it&#39;s in the MainProject folder?"}, {"owner": {"reputation": 364, "user_id": 2551008, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c95576ebecf22c3554e1011bb761edbd?s=128&d=identicon&r=PG", "display_name": "skepticscript", "link": "https://stackoverflow.com/users/2551008/skepticscript"}, "reply_to_user": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531482482, "post_id": 51295698, "comment_id": 89623785, "body": "Also, how are you running your program?  Simply <code>python main.py</code>?"}, {"owner": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531498811, "post_id": 51295698, "comment_id": 89634042, "body": "python pyscript3.py"}, {"owner": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531796562, "post_id": 51295698, "comment_id": 89717068, "body": "Thanks for the response man. It seems like there is no workaround this, only create a script from the base project"}, {"owner": {"reputation": 364, "user_id": 2551008, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c95576ebecf22c3554e1011bb761edbd?s=128&d=identicon&r=PG", "display_name": "skepticscript", "link": "https://stackoverflow.com/users/2551008/skepticscript"}, "reply_to_user": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "edited": false, "score": 0, "creation_date": 1531832949, "post_id": 51295698, "comment_id": 89736198, "body": "No problem dude.  Yeah that is the recommended way of structuring your project and executing your program."}], "tags": [], "owner": {"reputation": 364, "user_id": 2551008, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c95576ebecf22c3554e1011bb761edbd?s=128&d=identicon&r=PG", "display_name": "skepticscript", "link": "https://stackoverflow.com/users/2551008/skepticscript"}, "is_accepted": true, "score": 6, "last_activity_date": 1531514726, "last_edit_date": 1531514726, "creation_date": 1531354296, "answer_id": 51295698, "question_id": 51295385, "link": "https://stackoverflow.com/questions/51295385/importing-from-subfolder-in-python/51295698#51295698", "title": "Importing from subfolder in Python", "body": "<p>Note that <code>Folder1</code> is a directory, the <code>.py</code> scripts are your modules.</p>\n\n<p>In <code>pyscript3</code> you should be able to go:</p>\n\n<pre><code>from Folder1 import pyscript1\n</code></pre>\n\n<p>Then you can access a method with name <code>methodname</code> like:</p>\n\n<pre><code>pyscript1.methodname()\n</code></pre>\n\n<p>Otherwise you can import the method directly like:</p>\n\n<pre><code>from Folder1.pyscript1 import methodname\n</code></pre>\n\n<p>and use it like:</p>\n\n<pre><code>methodname()\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>For your program to see <code>Folder1</code> and <code>Folder2</code>, you need to run your program from the <code>MainProject</code> folder.</p>\n\n<p>Either move <code>pyscript3</code> to your <code>MainFolder</code> or write another script, let's call it <code>main.py</code>, and call the necessary code to instantiate the class/call the function you want in <code>pyscript3.py</code>.</p>\n\n<p>To summarize, you always want to run the entry module from the base folder of your project.</p>\n"}], "owner": {"reputation": 209, "user_id": 1544617, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4205e10fc93fce95ddf27ea980c85651?s=128&d=identicon&r=PG", "display_name": "Chema Sarmiento", "link": "https://stackoverflow.com/users/1544617/chema-sarmiento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7650, "favorite_count": 0, "accepted_answer_id": 51295698, "answer_count": 2, "score": 4, "last_activity_date": 1531514726, "creation_date": 1531351159, "last_edit_date": 1531439105, "question_id": 51295385, "link": "https://stackoverflow.com/questions/51295385/importing-from-subfolder-in-python", "title": "Importing from subfolder in Python", "body": "<p>This is the situation. I'm using Python 3.6</p>\n\n<p>I currently have the next folder organization:</p>\n\n<pre><code>/MainProject\n  __init__.py\n    /Folder1\n      pyscript1.py\n      pyscript2.py\n      __init__.py\n    /Folder2\n      pyscript3.py\n      __init__.py\n</code></pre>\n\n<p>So, I'm trying to get a function that exists in pyscript1.py from pyscript3. I've also added a <strong>init</strong>.py at every level. Inside pyscript3.py I tried the following:</p>\n\n<pre><code>from . import Folder1\n</code></pre>\n\n<p>Giving the error:</p>\n\n<pre><code>ImportError: cannot import name 'Folder1'\n</code></pre>\n\n<p>Also I tried:</p>\n\n<pre><code>from .Utils import script1\n</code></pre>\n\n<p>Giving the error:</p>\n\n<pre><code>ModuleNotFoundError: No module named '__main__.Utils'; '__main__' is not a \npackage\n</code></pre>\n\n<p>I know that I can solve it using sys and os in the following manner:</p>\n\n<pre><code>sys.path.append(os.path.realpath('../..'))\n</code></pre>\n\n<p>But I wanted to know if this is possible without using sys.</p>\n"}, {"tags": ["python", "python-2.7", "server"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1531351166, "post_id": 51295378, "comment_id": 89568278, "body": "How are you running this script?  What is displayed in the browser --  do you get a positive error response from the server (i.e. 404 Not Found), or do you get a timeout, or some other error?"}, {"owner": {"reputation": 241, "user_id": 4181439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3ea238921f87fedd93efa540313fa6?s=128&d=identicon&r=PG&f=1", "display_name": "fadelm0", "link": "https://stackoverflow.com/users/4181439/fadelm0"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1531351311, "post_id": 51295378, "comment_id": 89568315, "body": "saved as a file and calling through file.py on cmd on windows. it looks like it runs through the script and then opens the browser, which says the site can&#39;t be reached."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1531351382, "post_id": 51295378, "comment_id": 89568332, "body": "Do you mean you&#39;re running it with <code>python file.py</code>?"}, {"owner": {"reputation": 241, "user_id": 4181439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3ea238921f87fedd93efa540313fa6?s=128&d=identicon&r=PG&f=1", "display_name": "fadelm0", "link": "https://stackoverflow.com/users/4181439/fadelm0"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1531351442, "post_id": 51295378, "comment_id": 89568342, "body": "yeah, python file.py. i omitted that in my previous comment."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 4181439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3ea238921f87fedd93efa540313fa6?s=128&d=identicon&r=PG&f=1", "display_name": "fadelm0", "link": "https://stackoverflow.com/users/4181439/fadelm0"}, "edited": false, "score": 0, "creation_date": 1531351891, "post_id": 51295415, "comment_id": 89568451, "body": "that&#39;s what I was looking for, thanks! where can I read more about this method of blocking?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 241, "user_id": 4181439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3ea238921f87fedd93efa540313fa6?s=128&d=identicon&r=PG&f=1", "display_name": "fadelm0", "link": "https://stackoverflow.com/users/4181439/fadelm0"}, "edited": false, "score": 0, "creation_date": 1531352031, "post_id": 51295415, "comment_id": 89568476, "body": "@fadelm0 That is basic theory in concurrent programming. Think the script is sequential, if it finishes executing it will eliminate all its resources as the created threads. If my answer helps you, do not forget to mark it as correct :)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 5, "last_activity_date": 1531351456, "creation_date": 1531351456, "answer_id": 51295415, "question_id": 51295378, "link": "https://stackoverflow.com/questions/51295378/start-http-web-server-then-open-browser/51295415#51295415", "title": "Start http web server then open browser", "body": "<p>A thread continues to exist as long as the application continues to run, in the case <code>webbrowser.open_new()</code> is not blocking so the browser will hardly finish running the application, what you should do is make a blocker to prevent the application finish of execute:</p>\n\n<pre><code>import sys\nimport thread\nimport webbrowser\nimport time\n\nimport BaseHTTPServer, SimpleHTTPServer\n\ndef start_server():\n    httpd = BaseHTTPServer.HTTPServer(('127.0.0.1', 3600), SimpleHTTPServer.SimpleHTTPRequestHandler)\n    httpd.serve_forever()\n\nthread.start_new_thread(start_server,())\nurl = 'http://127.0.0.1:3600'\nwebbrowser.open_new(url)\n\nwhile True:\n    try:\n        time.sleep(1)\n    except KeyboardInterrupt:\n        sys.exit(0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2333, "user_id": 249597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3379b07091198e7e03cac45b9826bc9b?s=128&d=identicon&r=PG", "display_name": "Dylan Hogg", "link": "https://stackoverflow.com/users/249597/dylan-hogg"}, "is_accepted": false, "score": 0, "last_activity_date": 1601022186, "creation_date": 1601022186, "answer_id": 64060484, "question_id": 51295378, "link": "https://stackoverflow.com/questions/51295378/start-http-web-server-then-open-browser/64060484#64060484", "title": "Start http web server then open browser", "body": "<p>Here is a Python 3 version of the answer by @eyllanesc using the newer <a href=\"https://docs.python.org/3/library/http.server.html\" rel=\"nofollow noreferrer\">http.server</a> and the <a href=\"https://docs.python.org/3/library/threading.html\" rel=\"nofollow noreferrer\">threading</a> module</p>\n<pre><code>import sys\nimport time\nimport threading\nimport webbrowser\nfrom http.server import HTTPServer, SimpleHTTPRequestHandler\n\nip = &quot;127.0.0.1&quot;\nport = 3600\nurl = f&quot;http://{ip}:{port}&quot;\n\n\ndef start_server():\n    server_address = (ip, port)\n    httpd = HTTPServer(server_address, SimpleHTTPRequestHandler)\n    httpd.serve_forever()\n\n\nthreading.Thread(target=start_server).start()\nwebbrowser.open_new(url)\n\nwhile True:\n    try:\n        time.sleep(1)\n    except KeyboardInterrupt:\n        sys.exit(0)\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 4181439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3ea238921f87fedd93efa540313fa6?s=128&d=identicon&r=PG&f=1", "display_name": "fadelm0", "link": "https://stackoverflow.com/users/4181439/fadelm0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 0, "accepted_answer_id": 51295415, "answer_count": 2, "score": 3, "last_activity_date": 1601022186, "creation_date": 1531351005, "question_id": 51295378, "link": "https://stackoverflow.com/questions/51295378/start-http-web-server-then-open-browser", "title": "Start http web server then open browser", "body": "<p>I'm trying to start a simple HTTP server then open it in the default browser. I don't know what I'm doing wrong, it's either not starting the server at all, or it's stopping as soon as it gets to the end of the script (isn't it supposed to run forever?).</p>\n\n<pre><code>import BaseHTTPServer, SimpleHTTPServer, webbrowser, thread\ndef start_server():\n  httpd = BaseHTTPServer.HTTPServer(('127.0.0.1', 3600), SimpleHTTPServer.SimpleHTTPRequestHandler)\n  httpd.serve_forever()\nthread.start_new_thread(start_server,())\nurl = 'http://127.0.0.1:3600'\nwebbrowser.open_new(url)\n</code></pre>\n"}, {"tags": ["python", "jupyter-notebook"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1531351192, "post_id": 51295377, "comment_id": 89568284, "body": "You think you&#39;re using Python 3, but that error says you&#39;re not."}, {"owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1531351226, "post_id": 51295377, "comment_id": 89568295, "body": "@user2357112 is right, you are using python2"}, {"owner": {"reputation": 1558, "user_id": 5192123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ckLj6.png?s=128&g=1", "display_name": "MoneyBall", "link": "https://stackoverflow.com/users/5192123/moneyball"}, "edited": false, "score": 0, "creation_date": 1531351349, "post_id": 51295377, "comment_id": 89568323, "body": "hmm jupyter kernel says python3 on the top right corner... How can I check if it is using python3 kernel?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1531351683, "post_id": 51295377, "comment_id": 89568403, "body": "<code>print(sys.version)</code>"}, {"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 1, "creation_date": 1531359141, "post_id": 51295377, "comment_id": 89569751, "body": "You are using a Python2 kernel named &quot;Python 3&quot;."}, {"owner": {"reputation": 1558, "user_id": 5192123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ckLj6.png?s=128&g=1", "display_name": "MoneyBall", "link": "https://stackoverflow.com/users/5192123/moneyball"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531362114, "post_id": 51295377, "comment_id": 89570316, "body": "@user2357112 yep you guys are correct. This was due to anaconda2. Deleting anaconda2 made it work. It&#39;s very confusing since jupyter notebook calls it python3 kernel"}], "owner": {"reputation": 1558, "user_id": 5192123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ckLj6.png?s=128&g=1", "display_name": "MoneyBall", "link": "https://stackoverflow.com/users/5192123/moneyball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 645, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1531351452, "creation_date": 1531351000, "last_edit_date": 1531351452, "question_id": 51295377, "link": "https://stackoverflow.com/questions/51295377/invalid-syntax-for-print-in-python3-on-jupyter-notebook", "title": "invalid syntax for print in python3 on jupyter-notebook", "body": "<p>I'm using python3 kernel on jupyter notebook and I keep getting this error:</p>\n\n<pre><code>for line in process.stdout:\n    print(\"\\r\" + line.strip(), end='', flush=True)\n</code></pre>\n\n<p>And the error message is </p>\n\n<pre><code>print(line.strip(), end='', flush=True)\n                      ^   \nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I tried updating jupyter notebook by\n<code>sudo -H pip3 install --upgrade --force-reinstall jupyter</code>\nbut didn't do anything.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PKdQQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PKdQQ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10064428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5563f5f0d802ecbcbfb39b61b59e6997?s=128&d=identicon&r=PG&f=1", "display_name": "HenrySeagroatt", "link": "https://stackoverflow.com/users/10064428/henryseagroatt"}, "edited": false, "score": 1, "creation_date": 1531387494, "post_id": 51295555, "comment_id": 89580525, "body": "Thank you so much! If its not obvious I&#39;m new to programming, so this really helped!"}, {"owner": {"reputation": 5878, "user_id": 8172933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c23be88780bfccade78eb5ffb64ba9?s=128&d=identicon&r=PG", "display_name": "figbeam", "link": "https://stackoverflow.com/users/8172933/figbeam"}, "reply_to_user": {"reputation": 45, "user_id": 10064428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5563f5f0d802ecbcbfb39b61b59e6997?s=128&d=identicon&r=PG&f=1", "display_name": "HenrySeagroatt", "link": "https://stackoverflow.com/users/10064428/henryseagroatt"}, "edited": false, "score": 0, "creation_date": 1531390364, "post_id": 51295555, "comment_id": 89582442, "body": "Please accept my answer if you think it was of use to you."}], "tags": [], "owner": {"reputation": 5878, "user_id": 8172933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c23be88780bfccade78eb5ffb64ba9?s=128&d=identicon&r=PG", "display_name": "figbeam", "link": "https://stackoverflow.com/users/8172933/figbeam"}, "is_accepted": true, "score": 2, "last_activity_date": 1531353288, "last_edit_date": 1531353288, "creation_date": 1531352834, "answer_id": 51295555, "question_id": 51295348, "link": "https://stackoverflow.com/questions/51295348/creating-a-frame-inside-a-canvas/51295555#51295555", "title": "Creating a Frame inside a Canvas?", "body": "<p>You are placing the winow at 450, 450 in the canvas coordinate system. As the default anchor is the middle of the window you'll se the top left quarter of the frame. Try instead to place it somewhere else:</p>\n\n<pre><code>MainWindow = canvas.create_window(10,10,window=frame1, anchor='nw')\n</code></pre>\n\n<p>Now its top left corner is at 10,10. And you don't need to <code>pack()</code> the frame. <code>create_window()</code> is the canvas way of packing. (But you do need to pack the entry in frame1.)</p>\n"}], "owner": {"reputation": 45, "user_id": 10064428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5563f5f0d802ecbcbfb39b61b59e6997?s=128&d=identicon&r=PG&f=1", "display_name": "HenrySeagroatt", "link": "https://stackoverflow.com/users/10064428/henryseagroatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2017, "favorite_count": 0, "accepted_answer_id": 51295555, "answer_count": 1, "score": 0, "last_activity_date": 1531358396, "creation_date": 1531350782, "last_edit_date": 1531358396, "question_id": 51295348, "link": "https://stackoverflow.com/questions/51295348/creating-a-frame-inside-a-canvas", "title": "Creating a Frame inside a Canvas?", "body": "<p>I have created a <code>Canvas</code>, inside that I have created a <code>Window</code> which I have packed a <code>Frame</code> into. But when I try to pack an <code>Entry</code> widget into that <code>Frame</code>, the widget is appearing on the bottom right hand corner of the frame or canvas, part of it is on the screen and part of it is off the screen.</p>\n\n<p>What have I done and how do I pack <code>tkinter</code> widgets into my <code>Frame</code>?</p>\n\n<p><strong>Edit:</strong> The reason for using a <code>Canvas</code> was so I can make it scrollable later.</p>\n\n<pre><code>try:\n    import tkinter as t\n    from tkinter import *\nexcept ImportError:\n    import Tkinter as t\n    from Tkinter import *\n\nclass Window:\n    def __init__(self, master):\n\n        canvas = Canvas(master, height=450, width=450, bg=\"white\")\n        canvas.pack()\n\n        frame1 = Frame(master)\n        frame1.pack()\n        MainWindow = canvas.create_window(450,450,window=frame1)\n\n        e1 = Entry(frame1)\n        e1.pack()\n\n\nroot = Tk()\nroot.resizable(0,0)\nroot.geometry(\"450x450\")\nroot.title(\"Test\")\nroot.configure(background=\"#212F3C\")\nwindow = Window(root)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531351183, "post_id": 51295329, "comment_id": 89568281, "body": "Why <code>get_day(mylist, &#39;Activity C&#39;)</code> should yield <code>Day 1</code> ?"}, {"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531351712, "post_id": 51295329, "comment_id": 89568414, "body": "@RafaelC Day 1 has no activity of type C. Since the function first needs to sort by a group by of that activity type, then by count of total activities."}, {"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 0, "creation_date": 1531391621, "post_id": 51295329, "comment_id": 89583342, "body": "what should we do in case when there are equal target activity &amp; overall activities counts?"}, {"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "reply_to_user": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 0, "creation_date": 1531404029, "post_id": 51295329, "comment_id": 89591923, "body": "@AzatIbrakov in that case it doesn&#39;t matter, so one of the two can be arbitrarily picked"}], "answers": [{"comments": [{"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1531405525, "post_id": 51300855, "comment_id": 89592948, "body": "this is a very nice clean approach, but unfortunately a bit slow. Using timeit with the data provided, this method is about twice as slow (even precompiled)."}, {"owner": {"reputation": 46, "user_id": 5611494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b5e73a6d2b1bc21143bbb7695148a63?s=128&d=identicon&r=PG", "display_name": "Zach Zeleznick", "link": "https://stackoverflow.com/users/5611494/zach-zeleznick"}, "reply_to_user": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1531541791, "post_id": 51300855, "comment_id": 89645542, "body": "If speed is what you&#39;re after, I&#39;d suggest precomputing an underlying activity count data structure and then making the query. Updated my answer to include an approach that is 4x faster than my original answer provided on the example."}], "tags": [], "owner": {"reputation": 46, "user_id": 5611494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b5e73a6d2b1bc21143bbb7695148a63?s=128&d=identicon&r=PG", "display_name": "Zach Zeleznick", "link": "https://stackoverflow.com/users/5611494/zach-zeleznick"}, "is_accepted": true, "score": 2, "last_activity_date": 1531541517, "last_edit_date": 1531541517, "creation_date": 1531384492, "answer_id": 51300855, "question_id": 51295329, "link": "https://stackoverflow.com/questions/51295329/sort-list-of-lists-with-groupby-and-count/51300855#51300855", "title": "Sort list of lists with groupby and count", "body": "<p>Can't guarantee speed here without knowing more about the expected input dimensions and use case, but I think this code is more pythonic.</p>\n\n<pre><code>from collections import defaultdict, Counter\n\ndef get_day_pythonic(lst, activity):\n    if not lst:\n        return\n    # Count of activities by day\n    day_act_counts = Counter([d for (d, a) in lst])\n    # Activity counts per day\n    act_counter = defaultdict(Counter)\n    for (d, a) in lst:\n        act_counter[a][d] += 1\n    # NOTE: if planning to call this multiple times, should precompute day_act_counts and act_counter.\n    # Here we sort first by lowest count of activity, then total activity counts, and then day name.\n    return sorted([(act_counter[activity][d], day_act_counts[d], d) for d in day_act_counts])[0][-1]\n</code></pre>\n\n<p>EDIT: Faster implementation</p>\n\n<pre><code>def get_day(lst, activity):\n     if not lst:\n         return\n     # Count of all activities by day\n     day_act_counts = {}\n     # Count of interested activity by day\n     act_counter = {}\n     for (d, a) in lst:\n         day_act_counts[d] = day_act_counts.get(d, 0) + 1\n         if a != activity:  # don't need exact count for other activities\n             continue\n         act_counter[d] = act_counter.get(d, 0) + 1\n     # Here we take the min first by lowest count of activity, then total activity counts, and then day name.\n     return min((act_counter.get(d, 0), day_act_counts[d], d) for d in day_act_counts)[-1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1531391472, "creation_date": 1531391472, "answer_id": 51303334, "question_id": 51295329, "link": "https://stackoverflow.com/questions/51295329/sort-list-of-lists-with-groupby-and-count/51303334#51303334", "title": "Sort list of lists with groupby and count", "body": "<p>First we can write utility for collecting pairs by first coordinate:</p>\n\n<pre><code>from collections import defaultdict\n\n\ndef collect(items):\n    result = defaultdict(list)\n    for key, value in items:\n        result[key].append(value)\n    return result\n</code></pre>\n\n<p>After that our <code>get_day</code> function can be written like</p>\n\n<pre><code>from collections import Counter\nfrom itertools import imap\n\n\ndef get_day(days_activities, target_activity):\n    activities_by_days = collect(days_activities)\n    days_by_activities = collect(imap(reversed, days_activities))\n    days_target_activity_counter = Counter(days_by_activities[target_activity])\n\n    def to_target_and_overall_activities_counts(day):\n        return (days_target_activity_counter[day],\n                #  if there is a tie\n                len(activities_by_days[day]))\n\n    return min(activities_by_days,\n               key=to_target_and_overall_activities_counts)\n</code></pre>\n\n<h1>Test</h1>\n\n<pre><code># 'Day 1' has fewest overall activities (3 &lt; 4)\n&gt;&gt;&gt; mylist = [['Day 1', 'Activity A'],\n              ['Day 1', 'Activity A'],\n              ['Day 2', 'Activity A'],\n              ['Day 2', 'Activity C'],\n              ['Day 1', 'Activity D'],\n              ['Day 2', 'Activity D'],\n              ['Day 2', 'Activity E']]\n&gt;&gt;&gt; get_day(mylist, 'Activity C')\n'Day 1'\n&gt;&gt;&gt; get_day(mylist, 'Activity A')\n'Day 2'\n&gt;&gt;&gt; get_day(mylist, 'Activity D')\n'Day 1'\n</code></pre>\n"}], "owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "protected_date": 1531541533, "accepted_answer_id": 51300855, "answer_count": 2, "score": 0, "last_activity_date": 1531541517, "creation_date": 1531350589, "last_edit_date": 1531351118, "question_id": 51295329, "link": "https://stackoverflow.com/questions/51295329/sort-list-of-lists-with-groupby-and-count", "title": "Sort list of lists with groupby and count", "body": "<p>I am looking to do a sort of a list of lists. My function needs to return the day that that fewest activity of a certain type and if there is a tie, return the day with the fewest overall activities. Below is a working solution but I feel like it's fairly unpythonic as it needs to convert to a dictionary and back to a list and am looking for a faster way to write this.</p>\n\n<p><code>print get_day(mylist, 'Activity C')</code> should yield <code>Day 1</code></p>\n\n<p><code>print get_day(mylist, 'Activity A')</code> should yield <code>Day 2</code></p>\n\n<pre><code>def get_day(l, activity):\n    d = {}\n\n    for x in l:\n        if x[0] not in d.keys():\n            d[x[0]] = []\n        d[x[0]].append(x[1])\n\n    d = {k: [v.count(activity), len(v)] for k, v in d.items()}\n\n    l = [[k, v[0], v[1]] for k, v in d.items()]\n\n    l = sorted(l, key=lambda x: (x[1], x[2]))\n    return l[0][0]\n\n\nmylist = [['Day 1', 'Activity A'], ['Day 2', 'Activity A'], ['Day 1', 'Activity A'], ['Day 2', 'Activity C'],\n          ['Day 2', 'Activity D']]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "maya"], "comments": [{"owner": {"reputation": 2302, "user_id": 2742418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbieZ.png?s=128&g=1", "display_name": "DrWeeny", "link": "https://stackoverflow.com/users/2742418/drweeny"}, "edited": false, "score": 1, "creation_date": 1531408688, "post_id": 51295327, "comment_id": 89595039, "body": "you can use expressions or change the rotation with cmds.rotate, cmds.xform, cmds.setAttr in combinaison of simple math and maybe keyframing : cmds.setKeyframe"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9335777"}, "edited": false, "score": 0, "creation_date": 1531746089, "post_id": 51295531, "comment_id": 89697045, "body": "This is perfect, thanks so much.  I&#39;m just starting on Maya, so this really helps."}, {"owner": {"reputation": 11342, "user_id": 1936075, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/keYz5.jpg?s=128&g=1", "display_name": "theodox", "link": "https://stackoverflow.com/users/1936075/theodox"}, "edited": false, "score": 0, "creation_date": 1531772875, "post_id": 51295531, "comment_id": 89711485, "body": "This is the right way to do it in a tool , ie, if you want to do this using a button or a menu item or a small script.  You don&#39;t want to do this &#39;live&#39; during an animation."}], "tags": [], "owner": {"reputation": 3582, "user_id": 615397, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/tcKp2.jpg?s=128&g=1", "display_name": "Lex", "link": "https://stackoverflow.com/users/615397/lex"}, "is_accepted": true, "score": 1, "last_activity_date": 1531352599, "creation_date": 1531352599, "answer_id": 51295531, "question_id": 51295327, "link": "https://stackoverflow.com/questions/51295327/python-with-maya-selecting-object-and-rotating-it/51295531#51295531", "title": "Python With Maya Selecting Object and Rotating It", "body": "<p>Try the <code>rotate</code> function?...</p>\n\n<pre><code>from maya import cmds   \ncmds.select(object1)\ncmds.rotate(0, 0, 10, relative=True, componentSpace=True)\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/48268390/maya-2018-python-move-and-rotate-extracted-face\">Maya 2018, python, move and rotate extracted face</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/29446321/maya-python-modules-complete-documentation\">Maya Python modules complete documentation?</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9335777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 51295531, "answer_count": 1, "score": 0, "last_activity_date": 1531352599, "creation_date": 1531350564, "question_id": 51295327, "link": "https://stackoverflow.com/questions/51295327/python-with-maya-selecting-object-and-rotating-it", "title": "Python With Maya Selecting Object and Rotating It", "body": "<p>So I am working on a very small project, and I need to have an object rotated one or two times per minute, and I need to do it using Python.  Does anyone have any suggestions? Thanks so much.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1420, "user_id": 4103025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RhTH9.jpg?s=128&g=1", "display_name": "bytesized", "link": "https://stackoverflow.com/users/4103025/bytesized"}, "edited": false, "score": 0, "creation_date": 1531350667, "post_id": 51295280, "comment_id": 89568138, "body": "Are the pipe characters ( | ) part of the file? Every line starts and ends with one?"}, {"owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "edited": false, "score": 0, "creation_date": 1531350745, "post_id": 51295280, "comment_id": 89568166, "body": "&quot;I cannot guide myself by line index, title, words or numbers to delete this part because they are not the same all the time.&quot; -- we also do not know what IS the same all the time, so it is hard to help. Where did the input come from? What IS the same in the data that can be discarded? (maybe the indentation?, maybe the number of columns?)"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1531350745, "post_id": 51295280, "comment_id": 89568167, "body": "How often does the pattern repeat? ... Are there many groups of <code>|   6.50000   6.50000  6.50000                 | | This is some other title.                    | | 3                                            |</code> lines that need to be skipped/deleted?"}, {"owner": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "edited": false, "score": 0, "creation_date": 1531350746, "post_id": 51295280, "comment_id": 89568168, "body": "nope. It is just how I set it. All lines end with \\n immediately after the last word or number"}, {"owner": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "edited": false, "score": 0, "creation_date": 1531351232, "post_id": 51295280, "comment_id": 89568296, "body": "I fixed it to try to give you a better &quot;real&quot; look of the document. I was thinking something like this:  I know that all the lines have data up until line[:44] (combining whitespace, numbers and letter) and the once that I need to delete never reach that"}, {"owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "edited": false, "score": 0, "creation_date": 1531351493, "post_id": 51295280, "comment_id": 89568360, "body": "@ananvodo the line &#39;3\\n&#39; seems to be one you do not want to delete, but it does not have information up to position 44"}, {"owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "edited": false, "score": 0, "creation_date": 1531351591, "post_id": 51295280, "comment_id": 89568382, "body": "From your description, it seems like you want this: exactly 1 free text line (title), exactly 1 single-integer line, then keep all exactly 6 column lines."}, {"owner": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "reply_to_user": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "edited": false, "score": 0, "creation_date": 1531351618, "post_id": 51295280, "comment_id": 89568391, "body": "@Evan Benn I must delete that one too. If you are talking about the first &quot;3\\n&quot;, no worries if in your code get deleted. I have a way to manage that"}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "edited": false, "score": 0, "creation_date": 1531351739, "post_id": 51295421, "comment_id": 89568419, "body": "is there a way to say: if line[:44] has info then keep else delete?"}, {"owner": {"reputation": 509, "user_id": 8814328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h2bcf.png?s=128&g=1", "display_name": "Scott Anderson", "link": "https://stackoverflow.com/users/8814328/scott-anderson"}, "reply_to_user": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "edited": false, "score": 0, "creation_date": 1531351932, "post_id": 51295421, "comment_id": 89568454, "body": "I am not sure what you mean: 1st of all do you mean line number 44 (and not the 44th match of the regex pattern)?"}, {"owner": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "edited": false, "score": 0, "creation_date": 1531352582, "post_id": 51295421, "comment_id": 89568578, "body": "when you read a file you do while open(&quot;my.txt&quot;, &quot;r&quot;) as fin: myfile = fin.readlines().  Then you reference myfile[line number][position in line]. The lines I need to keep are myfile[line][:44]."}, {"owner": {"reputation": 509, "user_id": 8814328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h2bcf.png?s=128&g=1", "display_name": "Scott Anderson", "link": "https://stackoverflow.com/users/8814328/scott-anderson"}, "reply_to_user": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "edited": false, "score": 0, "creation_date": 1531353314, "post_id": 51295421, "comment_id": 89568702, "body": "That is a slightly different topic, but you should be able to do it just by looping through range(44) for each iteration using &lt;file_object&gt;.readline() and appending it to a string variable which accumulates all lines, e.g: <code>txt_file = open(&quot;Joke1.txt&quot;, &quot;r&quot;); line_list = []; for i in range(2);      line_list.append(txt_file.readline())</code>. This works because of file pointers, which is a longer discussion"}], "tags": [], "owner": {"reputation": 509, "user_id": 8814328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h2bcf.png?s=128&g=1", "display_name": "Scott Anderson", "link": "https://stackoverflow.com/users/8814328/scott-anderson"}, "is_accepted": false, "score": 2, "last_activity_date": 1531352156, "last_edit_date": 1531352156, "creation_date": 1531351557, "answer_id": 51295421, "question_id": 51295280, "link": "https://stackoverflow.com/questions/51295280/how-to-delete-lines-with-different-style-in-a-file-everything-is-str-format/51295421#51295421", "title": "How to delete lines with different style in a file (everything is str format)?", "body": "<p>Perhaps I use regex as a go-to too much, but the <code>re</code> module seems perfect here given you want to identify a line string pattern: lines identified by the data within. If you don't know it already the <code>re</code> module uses 'perl' syntax string-matching patterns, see the docs <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>You can test a regex you build online using a tool such as <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex 101</a></p>\n\n<p>If you are trying to identify a line such as <code>|     1HEE     JJ    1   3.904   5.512   1.259 |</code> I would write a regex as something like: <code>^\\| +\\w{4} +\\w+ +\\d +\\d.\\d{3} +\\d.\\d{3} +\\d.\\d{3} +\\|</code> (try it in Regex 101.\n<strong>Please note that this pattern makes some assumptions about the actual string pattern</strong> based upon what is given in the example.</p>\n\n<p>Using a method from the <code>re</code> module such as .findall and this pattern you should be able to gather all lines which follow your desired format. <strong>To clarify</strong> when pattern matching using the .findall method you would end up with all lines matching the desired format as a <strong>list</strong> of <strong>strings</strong> in your program that you could manipulate as you please (including making a new text file with that only has harvested data).</p>\n"}, {"tags": [], "owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "is_accepted": true, "score": 4, "last_activity_date": 1531361770, "last_edit_date": 1531361770, "creation_date": 1531353112, "answer_id": 51295581, "question_id": 51295280, "link": "https://stackoverflow.com/questions/51295280/how-to-delete-lines-with-different-style-in-a-file-everything-is-str-format/51295581#51295581", "title": "How to delete lines with different style in a file (everything is str format)?", "body": "<p>If the lines that have to be dropped always have less than 44 characters, and the valid ones always have at least 44 (like you say), you can just do:</p>\n\n<pre><code>with open('input.txt', 'r') as infile:\n    with open('output.txt', 'w') as outfile:\n        for line in infile:\n            if len(line) &gt;= 44:\n                outfile.write(line)\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 51295581, "answer_count": 2, "score": 1, "last_activity_date": 1531361770, "creation_date": 1531350203, "last_edit_date": 1531353096, "question_id": 51295280, "link": "https://stackoverflow.com/questions/51295280/how-to-delete-lines-with-different-style-in-a-file-everything-is-str-format", "title": "How to delete lines with different style in a file (everything is str format)?", "body": "<p>I have a document that I opened using python:</p>\n\n<pre><code>with open('my_file.txt', 'r') as fin:\n    myfile = fin.readlines()\n</code></pre>\n\n<p>Inside myfile I have lines like this:</p>\n\n<pre>\n\n     1HEE     JJ    1   3.904   5.512   1.259\\n\n     2HEE    CJJ    2   4.199   5.292   1.353\\n\n     2LLO    SJJ    3   4.367   5.234   1.445\\n\n     3LLO     JJ    4   4.041   4.969   1.220\\n\n   6.50000   6.50000  6.50000\\n\n This is some other title.\\n\n 3\\n\n     1GOO    HSC    1   4.088   4.816   1.041\\n\n     1DDD      H    2   9.018   0.828   7.094\\n\n     2DDD      H    3  19.018   0.828   7.094\\n\n\n</pre>\n\n<p>The ONLY lines that I need to keep are these ones:</p>\n\n<pre>\n\n     1HEE     JJ    1   3.904   5.512   1.259\\n\n     2HEE    CJJ    2   4.199   5.292   1.353\\n\n     2LLO    SJJ    3   4.367   5.234   1.445\\n\n     3LLO     JJ    4   4.041   4.969   1.220\\n\n     1GOO    HSC    1   4.088   4.816   1.041\\n\n     1DDD      H    2   9.018   0.828   7.094\\n\n     2DDD      H    3  19.018   0.828   7.094\\n\n\n</pre>\n\n<p>In other words, the lines that have information from information in: </p>\n\n<p><code>myfile[line][:44]</code> I MUST keep. </p>\n\n<p>The other lines (the shorter lines) I must DELETE.</p>\n\n<p>Any ideas on how to do this?</p>\n"}, {"tags": ["python", "python-3.x", "mongodb", "pymongo"], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 10031638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38517344d46ec3e736085e3a7de9b2fd?s=128&d=identicon&r=PG&f=1", "display_name": "MB141", "link": "https://stackoverflow.com/users/10031638/mb141"}, "is_accepted": true, "score": 0, "last_activity_date": 1531396277, "creation_date": 1531396277, "answer_id": 51304945, "question_id": 51295266, "link": "https://stackoverflow.com/questions/51295266/how-to-correctly-query-a-mongodb-nested-document-with-python/51304945#51304945", "title": "How to correctly query a MongoDB nested document with python?", "body": "<p>For \"<em>The 1st thing I need to do is to obtain all the documents whose ProductUId matches \"A90\" or \"B90\".</em>\"</p>\n\n<pre><code>.find({\"OrderItems.ProductUId\": {\"$in\":[\"A90\",\"B90\"]}})\n</code></pre>\n\n<p>Will work. Not sure why you're using $elemMatch, it doesn't seem necessary?</p>\n"}], "owner": {"reputation": 111, "user_id": 10067381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372a5e601404bc3db750b1d8932b0b18?s=128&d=identicon&r=PG&f=1", "display_name": "Garo San", "link": "https://stackoverflow.com/users/10067381/garo-san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 51304945, "answer_count": 1, "score": 1, "last_activity_date": 1531396277, "creation_date": 1531350103, "last_edit_date": 1531352801, "question_id": 51295266, "link": "https://stackoverflow.com/questions/51295266/how-to-correctly-query-a-mongodb-nested-document-with-python", "title": "How to correctly query a MongoDB nested document with python?", "body": "<p>Background: I just learned the basics of databases and mongo this week.</p>\n\n<p>I have a collection named 'orderstest' of 10K documents with the following basic form:</p>\n\n<pre><code>{\n    \"_id\": {\n        \"$oid\": \"2309823082039482\"\n    },\n    \"Order\": \"12345678920000\",\n    \"Client\": \"Client Name Inc.\",\n    \"OrderUId\": \"3452-2342-9393-0100\",\n    \"OrderItems\": [\n        {\n            \"Client\": \"Client Name Inc.\",\n            \"Details\": [\n                {\n                    \"Key\": \"EnterpriseCode\",\n                    \"Value\": \"XYZ1000\"\n                },\n                {\n                    \"Key\": \"AWSRegion\",\n                    \"Value\": \"Frankfurt\"\n                },\n\n            ],\n            \"ProductUId\": \"A90\",\n            \"OrderItemUId\": \"ABC1000\",\n        }\n    ],\n    \"__v\": 0\n}\n</code></pre>\n\n<p>I have to create a python3 script to compare these entries with some AWS info.\nThe 1st thing I need to do is to obtain all the documents whose ProductUId matches\n\"A90\" or \"B90\".</p>\n\n<p>I ran this query in the mongo shell and it worked:</p>\n\n<pre><code>db.orderstest.find({\n  OrderItems:{$elemMatch:\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ProductUId:\"A90\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0} \n\n}\n})\n</code></pre>\n\n<p>But when I try to put this inside my script, it throws this error:</p>\n\n<pre><code>    'OrderItems':{'$elemMatch':\u00a0{\n                               ^\nSyntaxError: invalid character in identifier\n</code></pre>\n\n<p>Also, I need to create the condition of all \"A90\" or \"B90\" which from reading the\ndocumentation and trying out tweaking a few things I was never able to implement. I should also state that I have gone through the MongoDB docs for several hours but it makes absolutely no sense to me, I guess due to my null experience with DBs in general.</p>\n"}, {"tags": ["python", "tix"], "answers": [{"tags": [], "owner": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "is_accepted": true, "score": 0, "last_activity_date": 1533708705, "creation_date": 1533708705, "answer_id": 51739678, "question_id": 51295256, "link": "https://stackoverflow.com/questions/51295256/programatically-collapse-branches-in-a-tix-hlist-checklist/51739678#51739678", "title": "Programatically collapse branches in a Tix hlist checklist?", "body": "<p>I have figured out a way to get this working at last.  I gave up on <code>setmode</code> completely as it doesn't seem to be available to my Python environment; then since I've already got <code>autosetmode</code> in there, I can use the <code>close</code> command AFTER the <code>autosetmode</code> has run.</p>\n\n<p>It means I have to run through the loop twice, which feels a bit wasteful, but it's not a big deal, and at least I can now get the results I require.</p>\n\n<p>Here is what finally worked for me (below).  In this case, I'm setting the branch to closed for each item that has a parent (ie, the top-level items are open, and all others are closed).</p>\n\n<pre><code>checkList = Tix.CheckList(win)\ncheckList.pack(in_=frameTop, side=Tix.LEFT, fill=Tix.BOTH, expand=Tix.YES)\ncheckList.hlist.config(bg='white', selectbackground='white', selectforeground='black', header=True, browsecmd=itemEvent)\ncheckList.hlist.header_create(0, itemtype=Tix.TEXT, text='Select layers to add to the map', relief='flat')\ncheckList.hlist.bind(\"&lt;ButtonRelease-1&gt;\", checkListClicked)\n\nfor i in items:\n    try:\n        checkList.hlist.add(i[\"id\"], text=i[\"text\"])\n    except:\n        print \"WARNING:  Failed to add item to checklist:  {} - {}\".format(i[\"id\"], text=i[\"text\"])\n    # Delete this next line\n    #checkList.close(i[\"id\"])\n    checkList.setstatus(i[\"id\"], \"off\")\n\ncheckList.autosetmode()\n#  Add these following lines (include whatever condition you like in the 'if')\nfor i in items:\n    if checkList.hlist.info_parent(i[\"id\"]):\n        checkList.close(i[\"id\"])\n</code></pre>\n"}], "owner": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 51739678, "answer_count": 1, "score": 0, "last_activity_date": 1533708705, "creation_date": 1531350043, "last_edit_date": 1533708251, "question_id": 51295256, "link": "https://stackoverflow.com/questions/51295256/programatically-collapse-branches-in-a-tix-hlist-checklist", "title": "Programatically collapse branches in a Tix hlist checklist?", "body": "<p>For my first GUI in Python, I'm using <a href=\"https://docs.python.org/2/library/tix.html\" rel=\"nofollow noreferrer\">Tix</a> for its built-in 'checklist' and 'hlist' widgets to construct a tree view with checkboxes against each branch and leaf of the tree.  It is mostly working well.  But the one thing that I have not been able to figure out is how to programmatically collapse branches of the tree.</p>\n\n<p>I would like to have some branches collapsed when the checklist is first displayed and to be able to have a button to \"Collapse All\" and a button to \"Expand All\".</p>\n\n<p>Below is the checklist portion of my code.  I was hoping that the <code>checkList.close(i[\"id\"])</code> line might close the branch, but it does not. </p>\n\n<p>Can anybody educate me on the correct way to programmatically collapse a branch in a Tix checklist/hlist tree ?</p>\n\n<pre><code>checkList = Tix.CheckList(win)\ncheckList.pack(in_=frameTop, side=Tix.LEFT, fill=Tix.BOTH, expand=Tix.YES)\ncheckList.hlist.config(bg='white', selectbackground='white', selectforeground='black', header=True, browsecmd=itemEvent)\ncheckList.hlist.header_create(0, itemtype=Tix.TEXT, text='Select layers to add to the map', relief='flat')\ncheckList.hlist.bind(\"&lt;ButtonRelease-1&gt;\", checkListClicked)\n\nfor i in items:\n    try:\n        checkList.hlist.add(i[\"id\"], text=i[\"text\"])\n    except:\n        print \"WARNING:  Failed to add item to checklist:  {} - {}\".format(i[\"id\"], text=i[\"text\"])\n    checkList.close(i[\"id\"])\n    checkList.setstatus(i[\"id\"], \"off\")\n\ncheckList.autosetmode()\n</code></pre>\n\n<p>I would have expected the following to work (eg, within the above for loop):</p>\n\n<pre><code>checkList.setmode(i[\"id\"], \"close\")\ncheckList.close(i[\"id\"])\n</code></pre>\n\n<p>But it gives me the error, <code>AttributeError: setmode</code>.  Which is odd, because as far as I can tell, <code>setmode</code> should be available, right?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10067484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25de989051066e1d88a3a0a97e79383c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Rod", "link": "https://stackoverflow.com/users/10067484/a-rod"}, "edited": false, "score": 0, "creation_date": 1531350726, "post_id": 51295311, "comment_id": 89568161, "body": "Thanks for pointing me in the right direction. The plots need to come out looking something like this <a href=\"https://blogs.sas.com/content/iml/2015/07/29/or-plots-log-scale.html\" rel=\"nofollow noreferrer\">blogs.sas.com/content/iml/2015/07/29/or-plots-log-scale.html</a>&zwnj;&#8203;. I&#39;ve been looking for example of these kinds of plots created using Python and to my surprise I haven&#39;t been able to find any. Most people seem to use R, SAS, or excel. I would imagine there some package for this in Python."}, {"owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "reply_to_user": {"reputation": 19, "user_id": 10067484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25de989051066e1d88a3a0a97e79383c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Rod", "link": "https://stackoverflow.com/users/10067484/a-rod"}, "edited": false, "score": 0, "creation_date": 1531350841, "post_id": 51295311, "comment_id": 89568195, "body": "Those look like box and whisker plots: <a href=\"https://matplotlib.org/gallery/pyplots/boxplot_demo_pyplot.html?highlight=boxplot\" rel=\"nofollow noreferrer\">matplotlib.org/gallery/pyplots/&hellip;</a>"}, {"owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "reply_to_user": {"reputation": 19, "user_id": 10067484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25de989051066e1d88a3a0a97e79383c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Rod", "link": "https://stackoverflow.com/users/10067484/a-rod"}, "edited": false, "score": 0, "creation_date": 1531350937, "post_id": 51295311, "comment_id": 89568219, "body": "@A.Rod the python packages that do the things R and excel do are: scipy, numpy, pandas, matplotlib, and many others, as your needs get more complex."}], "tags": [], "owner": {"reputation": 1101, "user_id": 3936601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b55dba01070e7c3a4ee30b401d084d8?s=128&d=identicon&r=PG", "display_name": "Evan Benn", "link": "https://stackoverflow.com/users/3936601/evan-benn"}, "is_accepted": false, "score": 0, "last_activity_date": 1531350389, "creation_date": 1531350389, "answer_id": 51295311, "question_id": 51295236, "link": "https://stackoverflow.com/questions/51295236/how-to-plot-odds-ratios-on-log-scale-in-python/51295311#51295311", "title": "How to plot odds ratios on log scale in Python", "body": "<p>matplotlib is the goto plotting option in python. Many other frameworks exist for more complicated plotting, but matplotlib is the place to start.</p>\n\n<p><a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.semilogx.html#matplotlib.pyplot.semilogx\" rel=\"nofollow noreferrer\">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.semilogx.html#matplotlib.pyplot.semilogx</a></p>\n\n<p>You don't give much information, but this should get you started:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nx = [1, 2, 3]\ny = [4, 5, 6]\nplt.semilogx(x,y)\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10067484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25de989051066e1d88a3a0a97e79383c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Rod", "link": "https://stackoverflow.com/users/10067484/a-rod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 890, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531350860, "creation_date": 1531349897, "last_edit_date": 1531350860, "question_id": 51295236, "link": "https://stackoverflow.com/questions/51295236/how-to-plot-odds-ratios-on-log-scale-in-python", "title": "How to plot odds ratios on log scale in Python", "body": "<p>Very new to Python and I want to know if its possible to plot odds ratios in python using a log scale on the x-axis. Any useful links or example code would be fantastic. The plots should come out looking something like this (SAS code) <a href=\"https://blogs.sas.com/content/iml/2015/07/29/or-plots-log-scale.html\" rel=\"nofollow noreferrer\">https://blogs.sas.com/content/iml/2015/07/29/or-plots-log-scale.html</a>. There has to be some way to do this in Python. Thanks!</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1531503588, "post_id": 51295229, "comment_id": 89636295, "body": "It is hard to tell what your issue is, since your example does not run as it is written. But what is the value of <code>procs</code>? Maybe this value is set to the number of cores?"}, {"owner": {"reputation": 418, "user_id": 5739004, "user_type": "registered", "profile_image": "https://graph.facebook.com/838592919583287/picture?type=large", "display_name": "Lorran Sutter", "link": "https://stackoverflow.com/users/5739004/lorran-sutter"}, "edited": false, "score": 0, "creation_date": 1531542049, "post_id": 51295229, "comment_id": 89645576, "body": "I&#39;m not an expert in multiprocessing, but I think you are setting only one file to each core. So if you have 24 cores, you only compute 24 files. You should set a range of files to each core, like 4 or 5 files per core."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3012486, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000393484299/picture?type=large", "display_name": "user3012486", "link": "https://stackoverflow.com/users/3012486/user3012486"}, "edited": false, "score": 0, "creation_date": 1532460150, "post_id": 51371460, "comment_id": 89981209, "body": "thanks normanius for your answer, i rewrote my code as you suggested and it seems to run besides I am not able to collect the results of ret with resultQueue.get. For clarification I would like to mention my purpose in the next post"}], "tags": [], "owner": {"reputation": 4661, "user_id": 3388962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6b4104f3002cae8e8aa88e8c34780e5?s=128&d=identicon&r=PG", "display_name": "normanius", "link": "https://stackoverflow.com/users/3388962/normanius"}, "is_accepted": true, "score": 1, "last_activity_date": 1532515744, "last_edit_date": 1532515744, "creation_date": 1531785313, "answer_id": 51371460, "question_id": 51295229, "link": "https://stackoverflow.com/questions/51295229/python-multiprocessing-loop-stops-always-for-certain-threads/51371460#51371460", "title": "Python multiprocessing loop stops always for certain threads", "body": "<p>In your code, <code>procs</code> processes are created, which call <code>dataoperator</code> exactly once with arguments <code>(N, i, vtkArray,field)</code>. Index <code>i</code> never will be larger equal <code>procs</code>.</p>\n\n<p>Rewrite your code such that it makes use of queues: (I assume here that the <code>vtkArray</code> contains the 100 different cases). </p>\n\n<pre><code>#\u00a0Assuming python3.    \nfrom queue import Empty as EmptyException\n\nresultQueue = multiprocessing.Queue() # to return data from your workers\ntaskQueue = multiprocessing.Queue()\nprocesses = []\n\ndef _worker(taskQueue, resultQueue, N, vtkArray, field):\n    while True:\n        try:\n            # Block maximally 0.1s before EmptyException is thrown.\n            i = taskQueue.get(timeout=0.1)\n            ret = dataoperator(N, i, vtkArray, field)\n            resultQueue.put(ret)\n        except EmptyException:\n            #\u00a0Stop the loop.\n            break\n\nfor i in range(len(vtkArray)):\n    taskQueue.put(i)\n\nfor i in range(procs):\n    process = multiprocessing.Process(target=_worker,\n                                      args=(taskQueue, resultQueue, N, vtkArray, field),\n                                      name=\"process%03d\" % i)\n    process.start()\n    processes.append(process)\n\nfor p in processes:\n    p.join()\n\ntry:\n    rets = []\n    while True:\n        rets.append(resultQueue.get(block=False))\nexcept EmptyException:\n    pass\n</code></pre>\n\n<p>I haven't tested this code, just use it as a starting point. I highly recommend to read the documentation of the <a href=\"https://docs.python.org/3.4/library/multiprocessing.html\" rel=\"nofollow noreferrer\"><code>multiprocessing</code></a> module. (I also recommend to use contexts, but this is another story.)</p>\n"}, {"comments": [{"owner": {"reputation": 4661, "user_id": 3388962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6b4104f3002cae8e8aa88e8c34780e5?s=128&d=identicon&r=PG", "display_name": "normanius", "link": "https://stackoverflow.com/users/3388962/normanius"}, "edited": false, "score": 0, "creation_date": 1532516229, "post_id": 51506245, "comment_id": 90002738, "body": "Is this a debugging request? Can I forward my bank account for the salary? :)"}, {"owner": {"reputation": 4661, "user_id": 3388962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6b4104f3002cae8e8aa88e8c34780e5?s=128&d=identicon&r=PG", "display_name": "normanius", "link": "https://stackoverflow.com/users/3388962/normanius"}, "edited": false, "score": 0, "creation_date": 1532516408, "post_id": 51506245, "comment_id": 90002857, "body": "Note that I updated my answer because the <code>_worker</code> was not looping over the taskQueue until all tasks are consumed. Doubt that this will have an effect on your problem that you cannot send the results to the main process."}, {"owner": {"reputation": 4661, "user_id": 3388962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6b4104f3002cae8e8aa88e8c34780e5?s=128&d=identicon&r=PG", "display_name": "normanius", "link": "https://stackoverflow.com/users/3388962/normanius"}, "edited": false, "score": 0, "creation_date": 1532516828, "post_id": 51506245, "comment_id": 90003119, "body": "IIRC there are certain requirements regarding the type objects that can be sent through a queue (the object needs to picklable). Have you tried to send simple objects like strings? For me, the code works."}], "tags": [], "owner": {"reputation": 19, "user_id": 3012486, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000393484299/picture?type=large", "display_name": "user3012486", "link": "https://stackoverflow.com/users/3012486/user3012486"}, "is_accepted": false, "score": 0, "last_activity_date": 1532503183, "last_edit_date": 1532503183, "creation_date": 1532460632, "answer_id": 51506245, "question_id": 51295229, "link": "https://stackoverflow.com/questions/51295229/python-multiprocessing-loop-stops-always-for-certain-threads/51506245#51506245", "title": "Python multiprocessing loop stops always for certain threads", "body": "<p>Due to the help of normanius I was able to setup loading and interpolating multiple files properly, besides I am still not able to collect the data with resultQueue.get(). The list is always empty, allthough a print statement in the _workers function of ret give results:</p>\n\n<p>For clarification again my purpose:</p>\n\n<p>1) Setting up a multidimensional array (gobally defined) <code>field=np.zeros([N,nx,ny,nz]) where</code>N=len(vtkArray) and vtkArray just a list of files (up to 100) to work on, nx,ny,nz number of nodes for interpolating</p>\n\n<p>2) dataoperator() is function which loads and interpolate the data, now with multiprocessing, where index i corresponds to the index of processor and at which line to put the loaded data for multidimensional array field.</p>\n\n<p>3) Code suggested from normanius seems to work fine, since a print statement of ret in the _workers function shows the correct results, processwise for each </p>\n\n<p>4) Anyway, it is still not possible for me to receive the completely \"filled\" multidimensional array with the resultQueue.get() function. Is it also possible to return again, a multidimensional array or do I habe to use rets=[] as a list.</p>\n\n<p>Thanks in advance for any help,</p>\n\n<pre><code>    ###################################################\n     #Loading all vtk files and saving to multidim array\n    ###################################################\n    def dataoperator(i,vtkArray,nx,ny,nz,x0,x1,y0,y1,z0,z1,scalar):\n        xi = np.linspace(x0,x1,nx,endpoint=True)\n        yi = np.linspace(y0,y1,ny,endpoint=True)\n        zi = np.linspace(z0,z1,nz,endpoint=True)\n        yy,xx,zz=np.meshgrid(yi,xi,zi)\n\n        #Generate MultiDimensional array\n        vtkArrayString=[str(x) for x in vtkArray[:,1]]\n        print (\"Loading data \" +str(prefix) + str(vtkArrayString[i])+' with index ' + str(i))\n        points, cells, point_data, cell_data, field_data = meshio.read('./VTK/' +str(vtkArrayString[i]))\n        #points, point_data=loaddata(vtkArrayString,i)\n\n        x,y,z=np.transpose(points)\n        print (\"\\t Interpolating data \" +str(vtkArrayString[i]))\n        from scipy.interpolate import griddata\n        if (scalar=='p'):\n            p = np.transpose(point_data['p'])\n            pi= griddata((x, y, z), p, (xx, yy, zz), method='nearest')\n            field[i,:,:,:]= pi\n        else:\n            u,v,w = np.transpose(point_data['subtract(U,U_bf)'])\n            if (scalar=='u'):\n                ui= griddata((x, y, z), u, (xx, yy, zz), method='nearest')\n                field[i,:,:,:]= ui\n            elif (scalar=='v'):\n                vi= griddata((x, y, z), v, (xx, yy, zz), method='nearest')\n                field[i,:,:,:]= vi\n            else:\n                wi = griddata((x, y, z), w, (xx, yy, zz), method='nearest')\n                field[i,:,:,:]= wi\n        #return field, vtkArray\n        print (\"\\t Finished Interpolating data \" +str(vtkArrayString[i]))\n        return field \n\n    import multiprocessing\n    from queue import Empty as EmptyException\n\n\n    resultQueue = multiprocessing.Queue() # to return data from your workers\n    taskQueue = multiprocessing.Queue()\n    processes = []\n\n    def _worker(taskQueue, resultQueue, i, vtkArray):\n        try:\n            # Block maximally 0.1s before EmptyException is thrown.\n            i = taskQueue.get(timeout=0.1)\n            ret  = dataoperator(i,vtkArray,nx,ny,nz,x0,x1,y0,y1,z0,z1,scalar)\n            print (ret)\n            resultQueue.put(ret)\n        except EmptyException:\n            # Idle action, if needed.\n            pass\n\n    for i in range(steps):\n        taskQueue.put(i)\n\n    for i in range(procs):\n        process = multiprocessing.Process(target=_worker,\n                                          args=(taskQueue, resultQueue, i, vtkArray),\n                                          name=\"process%03d\" % i)\n        process.start()\n        processes.append(process)\n\n    #ret2=np.zeros([N,nx,ny,nz])\n    for p in processes:\n        p.join()\n\n    try:\n        rets = []\n        while True:\n            rets.append(resultQueue.get(block=False))\n            print (rets)\n    except EmptyException:\n        pass\n    print(rets)\n    field=np.array(rets)\n    print(field)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3012486, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000393484299/picture?type=large", "display_name": "user3012486", "link": "https://stackoverflow.com/users/3012486/user3012486"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 51371460, "answer_count": 2, "score": 0, "last_activity_date": 1532515744, "creation_date": 1531349780, "question_id": 51295229, "link": "https://stackoverflow.com/questions/51295229/python-multiprocessing-loop-stops-always-for-certain-threads", "title": "Python multiprocessing loop stops always for certain threads", "body": "<p>I want to accelarte data loading and interpolation by using multithreading. So far my code seems to work. The only problem is that it always runs up to the given number of procs.\nSay my files are 100. If I run the script with 24 cores only 24 files are being loaded, but I need to keep going on up to 100. What am I missing here?</p>\n\n<pre><code>        print ('Number of overall VTK Files: ' + str(len(vtkArray)))\n    def dataoperator(N,i,vtkArray,field):\n        #for i in range(N-100,N):\n        print (\"Loading data \" +str(vtkArray[i,1] + ' index :' + str(i)))\n        points, cells, point_data, cell_data, field_data = meshio.read(ID +str(vtkArray[i,1]))\n        x,y,z=np.transpose(points)\n        print (\"\\t Interpolating data \" +str(vtkArray[i,1] + ' index :' + str(i)))\n        from scipy.interpolate import griddata\n        if (scalar=='p'):\n            p = np.transpose(point_data['p'])\n            pi= griddata((x, y, z), p, (xx, yy, zz), method='nearest')\n            field[i,:,:,:]= pi\n        else:\n            u,v,w = np.transpose(point_data['subtract(U,U_bf)'])\n            if (scalar=='u'):\n                ui= griddata((x, y, z), u, (xx, yy, zz), method='nearest')\n                field[i,:,:,:]= ui\n            elif (scalar=='v'):\n                vi= griddata((x, y, z), v, (xx, yy, zz), method='nearest')\n                field[i,:,:,:]= vi\n            else:\n                wi = griddata((x, y, z), w, (xx, yy, zz), method='nearest')\n                field[i,:,:,:]= wi\n        del points, cells, point_data, cell_data, field_data\n\n\n    import multiprocessing\n    jobs = []\n    for i in range(0, procs):\n        process = multiprocessing.Process(target=dataoperator,args=(N, i, vtkArray,field))\n        jobs.append(process)\n\n        # Start the processes \n    for j in jobs:\n        j.start()\n\n        # Ensure all of the processes have finished\n    for j in jobs:\n        j.join()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531350028, "post_id": 51295220, "comment_id": 89568003, "body": "Is there a reason you&#39;re using class attributes for all of your values, and not using <code>self</code> anywhere? The way this is written, your classes aren&#39;t really doing anything useful\u2014and that will make solving your problem harder."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531350338, "post_id": 51295220, "comment_id": 89568062, "body": "In fact, if you wrote this on a more normal OO style, and took advantage of those classes, your problem would solve itself. You would, e.g., construct a new <code>team = Team()</code> and <code>game = Game(team)</code> each time through the loop, so <code>objdata.append(team)</code> would be building up a list of 200 different objects, instead of a list of the same object 200 times."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 8383850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d164ea04180377780d9d255f57810b?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasRa", "link": "https://stackoverflow.com/users/8383850/mathiasra"}, "edited": false, "score": 0, "creation_date": 1531355067, "post_id": 51295396, "comment_id": 89569024, "body": "Good answer. The self.team = team solves a lot of issues."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 0, "last_activity_date": 1531351328, "creation_date": 1531351328, "answer_id": 51295396, "question_id": 51295220, "link": "https://stackoverflow.com/questions/51295220/python-access-past-values-in-classes/51295396#51295396", "title": "python: access past values in classes", "body": "<p>Your root problem here is that you aren't creating any instances. The only objects in your program (besides a few numbers) are the classes themselves. So you don't have anything to store in your list but the <code>Test</code> class object, which you append over and over, so you end up with a list of the same class object (which you keep on mutating) 200 times in a row.</p>\n\n<p>What you want to do is create 200 <em>instances</em> <code>Team</code> instances, and store the attributes on those instances, and then you can have 200 <em>separate</em> objects in the list.</p>\n\n<p>First, you have to make <code>Team</code> into a class that stores values on its instances:</p>\n\n<pre><code>class Team(object):\n    def __init__(self):\n        self.scoreA = 0\n        self.scoreB = 0\n</code></pre>\n\n<p>Now you have to do the same to <code>Game</code>. And, because each <code>Game</code> has to work with a <code>Team</code>, you need to give it one:</p>\n\n<pre><code>class Game(object):\n    def __init__(self, team):\n        self.team = team\n\n    def add_values(self):\n        if random.random() &gt; 0.6:\n            self.team.scoreA += 1\n        else:\n            self.team.scoreB += 1\n\n    def check_if_end(self):\n        end = 0\n        if max(self.team.scoreA, self.team.scoreB) == 3: end = 1\n        return end\n</code></pre>\n\n<p>And now, your loop can create the separate instances. And then you can call methods on those instances, instead of calling them on the class and passing <code>1</code> as a fake <code>self</code>:</p>\n\n<pre><code>objdata = []\nantsim = 200\nfor a in range(antsim):\n    team = Team()   \n\n    for i in range(5):\n        game = Game(team)\n        game.add_values()\n        end = game.check_if_end()\n        if end == 1:\n            objdata.append(team)\n            break\n</code></pre>\n\n<p>And now, instead of a list of 200 references to the <code>Team</code> class object, you have a list of 200 different <code>team</code> instances:</p>\n\n<pre><code>for team in objdata:\n    print(team.scoreA, team.scoreB)\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 8383850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d164ea04180377780d9d255f57810b?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasRa", "link": "https://stackoverflow.com/users/8383850/mathiasra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 51295396, "answer_count": 1, "score": -1, "last_activity_date": 1531351328, "creation_date": 1531349660, "question_id": 51295220, "link": "https://stackoverflow.com/questions/51295220/python-access-past-values-in-classes", "title": "python: access past values in classes", "body": "<p>I am trying to create a simple game that is played best of five and where team B has a 60% chance of winning each round. Further, I want to simulate each game played X amount of times.</p>\n\n<p>Ideally I would - after I have ran all the simulations - be able to access what happened in each simulation. E.g. who won the first round, who won the second etc in the most efficient way possible. </p>\n\n<p>My idea was that I could append all of the data from the classes in a list and then access each one afterward. However, it doesn't work unless you append an actual value.</p>\n\n<p>Below is a somewhat simplified example of the code:    </p>\n\n<pre><code>class Game(object):\n\n    def add_values(self):\n        if random.random() &gt; 0.6:\n            Team.scoreA+=1\n        else:\n            Team.scoreB+=1\n\n    def check_if_end(self):\n        end = 0\n        if max(Team.scoreA,Team.scoreB) == 3: end = 1\n        return end\n\nimport random\n\nclass Team(object):\n\n    def oriscore(self):\n        Team.scoreA = 0\n        Team.scoreB = 0\n\nobjdata = []\nantsim = 200\nfor a in range(antsim):\n    Team.oriscore(1)\n\n    for i in range(5):\n        Game.add_values(1)\n        end = Game.check_if_end(1)\n        if end == 1:\n            objdata.append(Team)\n            break\n\nfor i in objdata:\n    print(i.scoreA,i.scoreB)\n</code></pre>\n\n<p>Printing out the below values will simply just show the result from the last simulation only. Whereas I want the result from each simulation.</p>\n\n<p>In this specific game I could ofc just change it so that I append both scoreA and scoreB, however that doesn't seem so scaleable. So I wonder if there is a more efficient way.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 976, "user_id": 5352025, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5e471d4c27e99d76320c6cccf4905511?s=128&d=identicon&r=PG&f=1", "display_name": "JSolomonCulp", "link": "https://stackoverflow.com/users/5352025/jsolomonculp"}, "edited": false, "score": 0, "creation_date": 1531349848, "post_id": 51295178, "comment_id": 89567961, "body": "Could you post some actual code so we can see what the data looks like and what you&#39;ve tried so far?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1531350584, "post_id": 51295178, "comment_id": 89568117, "body": "What does your output datafame look like?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "edited": false, "score": 0, "creation_date": 1531350770, "post_id": 51295178, "comment_id": 89568177, "body": "The DataFrame is the same as what is shown above (with indeces as first col in pandas). I want to add every 4 values (15min) to get a rainfall time series of 1 hr resolution along with their corresponding years in col0."}, {"owner": {"reputation": 389, "user_id": 9248018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hloRx.png?s=128&g=1", "display_name": "Nicola", "link": "https://stackoverflow.com/users/9248018/nicola"}, "edited": false, "score": 0, "creation_date": 1531351630, "post_id": 51295178, "comment_id": 89568394, "body": "Just for me to understand, each value represents the rainfall over 15 minutes but the time specification is years for each value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "edited": false, "score": 0, "creation_date": 1531357348, "post_id": 51295178, "comment_id": 89569442, "body": "yes thats right ... and I need the years since I am going to get Annual maximum series for each one of them."}], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 0, "last_activity_date": 1531357482, "creation_date": 1531357482, "answer_id": 51296019, "question_id": 51295178, "link": "https://stackoverflow.com/questions/51295178/aggregating-finer-resolutions-to-lower-ones-using-pandas-or-numpy/51296019#51296019", "title": "aggregating finer resolutions to lower ones using Pandas or numpy", "body": "<p>Seems like you want to <code>groupby</code> every 4 values and <code>sum()</code></p>\n\n<pre><code>z=io.StringIO(\"\"\"year    rainfall\n2006    1\n2006    1.2\n2006    1.3\n2006    0\n2006    1\n2006    1.2\n2006    1.3\n2006    0\"\"\")\n\ndf = pd.read_table(z,delim_whitespace=True)\n</code></pre>\n\n<p>Just</p>\n\n<pre><code>df.groupby([df.index // 4 * 4, 'year']).sum()\n\n            rainfall\nyear    \n0   2006    3.5\n4   2006    3.5\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 51296019, "answer_count": 1, "score": 2, "last_activity_date": 1531357482, "creation_date": 1531349360, "last_edit_date": 1531350531, "question_id": 51295178, "link": "https://stackoverflow.com/questions/51295178/aggregating-finer-resolutions-to-lower-ones-using-pandas-or-numpy", "title": "aggregating finer resolutions to lower ones using Pandas or numpy", "body": "<p>I have a data with 15 minute resolution as below: </p>\n\n<pre><code>year    rainfall(per 15 min)\n2006    1\n2006    1.2\n2006    1.3\n2006    0\n</code></pre>\n\n<p>Where I need to aggregate the second column as 30 min, 60 min, 1 hr, 2 hr, 6 hr, 12 hr, and 24 hr. I also want the corresponding years to be translated to the new aggregated matrices. </p>\n\n<p>I was wondering if somebody could help me to do this using numPy or Pandas? </p>\n"}, {"tags": ["python", "python-3.x", "f-string"], "answers": [{"tags": [], "owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 3, "last_activity_date": 1531349371, "creation_date": 1531349371, "answer_id": 51295180, "question_id": 51295158, "link": "https://stackoverflow.com/questions/51295158/avoiding-none-in-f-string/51295180#51295180", "title": "Avoiding None in f-string", "body": "<p>Of course it's a syntax error; you broke your string.</p>\n\n<pre><code>f'{first_name} {prefix or \"\"} {last_name}'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1531349529, "post_id": 51295181, "comment_id": 89567893, "body": "The one with the backslashes doesn&#39;t work - backslashes aren&#39;t allowed in the expression, unless they changed it in 3.7."}, {"owner": {"reputation": 6142, "user_id": 482899, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/786c83f5b363c46914d0b8cbc88e4753?s=128&d=identicon&r=PG", "display_name": "northtree", "link": "https://stackoverflow.com/users/482899/northtree"}, "edited": false, "score": 0, "creation_date": 1560733006, "post_id": 51295181, "comment_id": 99820036, "body": "I prefer the last option <code>&#39; &#39;.join(filter(None, (first_name, prefix, last_name)))</code>"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 22, "last_activity_date": 1531349558, "last_edit_date": 1531349558, "creation_date": 1531349392, "answer_id": 51295181, "question_id": 51295158, "link": "https://stackoverflow.com/questions/51295158/avoiding-none-in-f-string/51295181#51295181", "title": "Avoiding None in f-string", "body": "<blockquote>\n  <p>I tried f'{first_name} {prefix or ''} {last_name}' but that's a syntax error.</p>\n</blockquote>\n\n<p>The only reason it's a syntax error is that you tried to put single quotes inside single quotes. All of the usual ways of fixing it will work:</p>\n\n<pre><code>f'{first_name} {prefix or \"\"} {last_name}'\nf\"{first_name} {prefix or ''} {last_name}\"\nf\"\"\"{first_name} {prefix or ''} {last_name}\"\"\"\n</code></pre>\n\n<p>However, notice that this doesn't quite do what you want. You won't get <code>Arnold Weber</code>, but <code>Arnold  Weber</code>, because the spaces on either end aren't conditional. You could do something like this:</p>\n\n<pre><code>f'{first_name} {prefix+\" \" if prefix else \"\"}{last_name}'\nf'{first_name} {prefix or \"\"}{\" \" if prefix else \"\"}{last_name}'\n</code></pre>\n\n<p>\u2026 but at that point, I don't think you're getting the conciseness and readability benefits of f-strings anymore. Maybe consider something different, like:</p>\n\n<pre><code>' '.join(part for part in (first_name, prefix, last_name) if part)\n' '.join(filter(None, (first_name, prefix, last_name)))\n</code></pre>\n\n<p>Not that this is <em>shorter</em>\u2014but the logic is a lot clearer.</p>\n"}], "owner": {"reputation": 1743, "user_id": 384925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95a2851272319e1b9b3568041a658159?s=128&d=identicon&r=PG", "display_name": "voodoo-burger", "link": "https://stackoverflow.com/users/384925/voodoo-burger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3593, "favorite_count": 0, "accepted_answer_id": 51295181, "answer_count": 2, "score": 11, "last_activity_date": 1576627037, "creation_date": 1531349211, "last_edit_date": 1576627037, "question_id": 51295158, "link": "https://stackoverflow.com/questions/51295158/avoiding-none-in-f-string", "title": "Avoiding None in f-string", "body": "<p>If I have an f-string where one of the parameters may be <code>None</code>, is there a way to automatically omit it from the string?</p>\n\n<p><code>f'{first_name} {prefix} {last_name}'</code></p>\n\n<p>If <code>prefix</code> is <code>None</code> then this string will render as <code>Arnold None Weber</code>.</p>\n\n<p>I tried <code>f'{first_name} {prefix or ''} {last_name}'</code> but that's a syntax error.</p>\n"}, {"tags": ["python", "command-line", "nlp"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 7993510, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P3Ibpjz4CIU/AAAAAAAAAAI/AAAAAAAATsc/AzgkkGWuWvg/photo.jpg?sz=128", "display_name": "S&#246;ren Etler", "link": "https://stackoverflow.com/users/7993510/s%c3%b6ren-etler"}, "is_accepted": true, "score": 0, "last_activity_date": 1531573694, "creation_date": 1531573694, "answer_id": 51338815, "question_id": 51295141, "link": "https://stackoverflow.com/questions/51295141/run-rftagger-in-python/51338815#51338815", "title": "Run RFTagger in Python", "body": "<p>It is a lot faster if you run it like this:</p>\n\n<pre><code>from subprocess import check_output, run\nfrom nltk.tokenize import sent_tokenize, word_tokenize\n\n#run this once\nrun([\"make\"], cwd=\"RFTagger/src\")\n\n#run this for every text (text is a string)\nfile = open(\"RFTagger/temp.txt\", \"w\")\nfile.write(\"\\n\\n\".join(\"\\n\".join(word_tokenize(sentence, language='german')) for sentence in sent_tokenize(text, language='german')))\nfile.close()\ntest_tagged = check_output([\"src/rft-annotate\", \"lib/german.par\", \"temp.txt\"], cwd=\"RFTagger\").decode(\"utf-8\").split(\"\\n\")\n</code></pre>\n\n<p>I could reduce runtime from around 40 seconds per text to 1.5 seconds.</p>\n"}], "owner": {"reputation": 133, "user_id": 7993510, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P3Ibpjz4CIU/AAAAAAAAAAI/AAAAAAAATsc/AzgkkGWuWvg/photo.jpg?sz=128", "display_name": "S&#246;ren Etler", "link": "https://stackoverflow.com/users/7993510/s%c3%b6ren-etler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 51338815, "answer_count": 1, "score": 0, "last_activity_date": 1531573694, "creation_date": 1531349077, "question_id": 51295141, "link": "https://stackoverflow.com/questions/51295141/run-rftagger-in-python", "title": "Run RFTagger in Python", "body": "<p>I want to use RFTagger (<a href=\"http://www.cis.uni-muenchen.de/~schmid/tools/RFTagger/\" rel=\"nofollow noreferrer\">http://www.cis.uni-muenchen.de/~schmid/tools/RFTagger/</a>) in my Pyhton code. The only way that I got it to work is like this:</p>\n\n<pre><code>file = open(\"RFTagger/temp.txt\", \"w\")\nfile.write(text)\nfile.close()\ntest_tagged = check_output([\"cmd/rftagger-german\", \"temp.txt\"], cwd=\"RFTagger\").decode(\"utf-8\")\n</code></pre>\n\n<p>Is there an easier / faster way? Or is there a similar library that can give the same output? I especially need it for German.\nThank you for your help :)</p>\n"}, {"tags": ["python", "pandas", "numpy", "data-structures"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1531349231, "post_id": 51295136, "comment_id": 89567828, "body": "How do you define &quot;unidentified&quot; characters? Both &#39;33&#39; and &#39;XX&#39; are two-character strings."}, {"owner": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1531349358, "post_id": 51295136, "comment_id": 89567859, "body": "Hmm it seems I will need to convert the dtype of the column first and the convert it. Let me alter the question @DyZ"}, {"owner": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1531349414, "post_id": 51295136, "comment_id": 89567869, "body": "Or could you help me give it a go by helping me to answer it? @DyZ"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1531349427, "post_id": 51295136, "comment_id": 89567870, "body": "If you want to replace a <i>specific</i> value, use <code>df.numbers[df.numbers==&#39;XX&#39;]=np.nan</code>."}, {"owner": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1531349493, "post_id": 51295136, "comment_id": 89567884, "body": "Ahh yes. So replace the &#39;XX&#39; first and then convert the column?"}, {"owner": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1531349746, "post_id": 51295136, "comment_id": 89567945, "body": "@DyZ How can I change the data type from object to float or int?"}], "answers": [{"comments": [{"owner": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "edited": false, "score": 0, "creation_date": 1531349614, "post_id": 51295195, "comment_id": 89567916, "body": "This seems to work. Thanks ! I want to convert the column to another data type how can I do that? Will this affect it?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "edited": false, "score": 0, "creation_date": 1531349940, "post_id": 51295195, "comment_id": 89567988, "body": "@DeepakM df.number = pd.to_numeric(df.number)"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1531349482, "creation_date": 1531349482, "answer_id": 51295195, "question_id": 51295136, "link": "https://stackoverflow.com/questions/51295136/using-the-fillna-method-from-pandas-to-replace-a-particular-string-value-in-a/51295195#51295195", "title": "Using the fillna() method from Pandas to replace a particular string value in a column", "body": "<p>I think you just forget to assign it back </p>\n\n<pre><code>df.numbers=df.numbers.replace('XX',np.NaN)\n</code></pre>\n"}], "owner": {"reputation": 772, "user_id": 5941778, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/71db03dc71a827b53bc696cb2f4d1536?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak M", "link": "https://stackoverflow.com/users/5941778/deepak-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 51295195, "answer_count": 1, "score": 0, "last_activity_date": 1531349482, "creation_date": 1531349000, "last_edit_date": 1531349081, "question_id": 51295136, "link": "https://stackoverflow.com/questions/51295136/using-the-fillna-method-from-pandas-to-replace-a-particular-string-value-in-a", "title": "Using the fillna() method from Pandas to replace a particular string value in a column", "body": "<p>I have a particular column(the column is called 'numbers') which outputs unique values like this:</p>\n\n<pre><code>df.numbers.unique()\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>([nan, '50', '22', '11', '46', '58', '22', '14', '18', '15', '33', 'XX'], dtype=object)\n</code></pre>\n\n<p>As seen above there are unidentified characters such as 'XX'. I wish to convert them to 'NaN' values instead.  I tried replacing these with using this code:</p>\n\n<pre><code> df.numbers.replace('XX',np.NaN)\n</code></pre>\n\n<p>However, when I print the unique values in the column again. The 'XX' is still there. I wish to get rid of the 'XX' and replace them with 'NaN' instead. \nI am just curious to know why it is not working. \nAssistance would be appreciated. Thanks in advance!  </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 4, "creation_date": 1531348901, "post_id": 51295101, "comment_id": 89567753, "body": "Sounds like you are trying to divide by 100."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1531348940, "post_id": 51295101, "comment_id": 89567761, "body": "Do you <i>really</i> want an input of 5 to become 0.5?"}, {"owner": {"reputation": 35, "user_id": 7110904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rLOZc3eG1Tk/AAAAAAAAAAI/AAAAAAAAAZI/vgy9ykIiFdw/photo.jpg?sz=128", "display_name": "Zreddx", "link": "https://stackoverflow.com/users/7110904/zreddx"}, "edited": false, "score": 0, "creation_date": 1531349033, "post_id": 51295101, "comment_id": 89567778, "body": "Yes I do, but i&#39;ll try fuglede&#39;s answer"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531349288, "post_id": 51295101, "comment_id": 89567843, "body": "5 percent is 0.05, not 0.5. If you think you want 0.5, it&#39;d probably be a good idea to brush up on how percentages work before continuing with your program."}, {"owner": {"reputation": 35, "user_id": 7110904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rLOZc3eG1Tk/AAAAAAAAAAI/AAAAAAAAAZI/vgy9ykIiFdw/photo.jpg?sz=128", "display_name": "Zreddx", "link": "https://stackoverflow.com/users/7110904/zreddx"}, "edited": false, "score": 0, "creation_date": 1531349340, "post_id": 51295101, "comment_id": 89567854, "body": "Yee... That makes sense"}], "answers": [{"tags": [], "owner": {"reputation": 1937, "user_id": 6797302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xQZE.png?s=128&g=1", "display_name": "Ollin Boer Bohan", "link": "https://stackoverflow.com/users/6797302/ollin-boer-bohan"}, "is_accepted": false, "score": 1, "last_activity_date": 1531349462, "creation_date": 1531349462, "answer_id": 51295188, "question_id": 51295101, "link": "https://stackoverflow.com/questions/51295101/how-can-i-add-a-0-before-an-variable-in-python/51295188#51295188", "title": "How can I add a 0. before an variable in python", "body": "<p>There are two changes needed to make this work.</p>\n\n<p><strong>Converting <code>input()</code> result to numbers:</strong></p>\n\n<p><code>input()</code> retrieves input from the user as text (a \"string\"), not as a number. To use the inputs as numbers, you'll want to convert them into integers using the builtin conversion function <code>int()</code>:</p>\n\n<pre><code>percent = int(input(\"Enter percent:\"))\nofNumber = int(input(\"Enter number:\"))\n</code></pre>\n\n<p>(In practice, you would also want to use <code>try</code>/<code>catch</code> to handle the case where the user typed something that wasn't a valid number, but we'll ignore that for now)</p>\n\n<p><strong>Converting a Percentage Into a Decimal:</strong></p>\n\n<p>This is the part you asked about. You can do this by dividing by 100, as stated in the comment above:</p>\n\n<pre><code>percent2 = percent / 100\n</code></pre>\n\n<hr>\n\n<p><strong>Final Code:</strong></p>\n\n<p>With both of those changes:</p>\n\n<pre><code>percent = int(input(\"Enter percent:\"))\nofNumber = int(input(\"Enter number:\"))\n\npercent2 = percent / 100\n\nanswer = percent2 * ofNumber\n\nprint(answer)\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>&gt; Enter percent:20\n&gt; Enter number:100\n&gt; 20.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531349947, "post_id": 51295223, "comment_id": 89567989, "body": "If that worked, you&#39;re on Python 2. You should really get Python 3. Also, your code will report that 5 percent of 10 is 0, due to Python 2-specific division behavior."}], "tags": [], "owner": {"reputation": 35, "user_id": 7110904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rLOZc3eG1Tk/AAAAAAAAAAI/AAAAAAAAAZI/vgy9ykIiFdw/photo.jpg?sz=128", "display_name": "Zreddx", "link": "https://stackoverflow.com/users/7110904/zreddx"}, "is_accepted": false, "score": 0, "last_activity_date": 1531349682, "creation_date": 1531349682, "answer_id": 51295223, "question_id": 51295101, "link": "https://stackoverflow.com/questions/51295101/how-can-i-add-a-0-before-an-variable-in-python/51295223#51295223", "title": "How can I add a 0. before an variable in python", "body": "<p>I have found an alternative solotion!</p>\n\n<p>It works by multiplying the percent by the percentOf and then dividing that by 100.\nThe code is this:</p>\n\n<pre><code>import sys\n\npercent = input(\"Enter percent (%):\")\nofNumber = input(\"Enter number:\")\n\nvar1 = ofNumber * percent\n\nanswer = var1 / 100\n\nprint(answer)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7110904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rLOZc3eG1Tk/AAAAAAAAAAI/AAAAAAAAAZI/vgy9ykIiFdw/photo.jpg?sz=128", "display_name": "Zreddx", "link": "https://stackoverflow.com/users/7110904/zreddx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1531349682, "creation_date": 1531348777, "question_id": 51295101, "link": "https://stackoverflow.com/questions/51295101/how-can-i-add-a-0-before-an-variable-in-python", "title": "How can I add a 0. before an variable in python", "body": "<p>Im making an python application to calculate percentages and I wanted to know how I can add an \"0.\" in front of a variable to multiply it by the \"percentOf\" variable (would output the answer, but doesn't).</p>\n\n<p>I've tried this:\n    import sys</p>\n\n<pre><code>percent = input(\"Enter percent:\")\nofNumber = input(\"Enter number:\")\n\npercent2 = percent++0.\n\nanswer = percent2 * ofNumber\n\nprint(answer)\n</code></pre>\n\n<p>but it won't work :(</p>\n"}, {"tags": ["python", "networking"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 6028998, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZgnUa5IfG8I/AAAAAAAAAAI/AAAAAAAAAA8/gMJ1wERTY2U/photo.jpg?sz=128", "display_name": "Ron Wellman", "link": "https://stackoverflow.com/users/6028998/ron-wellman"}, "is_accepted": true, "score": 2, "last_activity_date": 1531407787, "last_edit_date": 1531407787, "creation_date": 1531357533, "answer_id": 51296026, "question_id": 51295099, "link": "https://stackoverflow.com/questions/51295099/using-python-to-collect-all-inbound-tcp-traffic/51296026#51296026", "title": "Using python to collect all inbound TCP traffic", "body": "<p>This is only one option for capturing packets with python.  While this example is short, it does demonstrate that you can capture packets destined for your system and save it to a PCAP.  You could do much more to further filter/manipulate those packets but for demonstration purposes, it should be enough to get you started. Also, I'm installing this into a virtual environment instead of installing to my main system.  This causes some complications with permissions but for demonstration purposes, I'll be executing my script as <em>sudo</em>.  I would not do this in production.</p>\n\n<p>Lets start by creating a virtual environment for our project:</p>\n\n<pre><code>python -m venv venv\n</code></pre>\n\n<p>Now lets activate it:</p>\n\n<pre><code>source venv/bin/activate\n</code></pre>\n\n<p>Now lets install scapy:</p>\n\n<pre><code>pip install scapy\n</code></pre>\n\n<p>Now that scapy is installed, lets write a sample script to capture a few packets destined for my computer at 10.1.10.127:</p>\n\n<pre><code>#! ./venv/bin/python\nfrom scapy.all import sniff, PcapWriter\n\npkts = sniff(filter=\"dst 10.1.10.127\", count=10)\nmy_pcap = PcapWriter('capture.pcap')\nmy_pcap.write(pkts)\nmy_pcap.close()\n</code></pre>\n\n<p>We'll save this in a file called <em>sniff_it.py</em>.  The <code>sniff</code> function will capture the first 10 packets destined for my IP address on any interface.  It will take those packets and write them to a PCAP file called <em>capture.pcap</em>.  Again, you could easily add extra filtering/manipulation of the packets.  You could also build a loop to put every 1000 packets in a different PCAP.  Lets test it out.</p>\n\n<pre><code>chmod u+x sniff_it.py\nsudo ./sniff_it.py\n</code></pre>\n\n<p>Once 10 packets have been captured, they should be written to <em>capture.pcap</em>. </p>\n\n<pre><code>tshark -r capture.pcap | head -n 5\n1   0.000000 XXX.XXX.XXX.XXX \u2192 10.1.10.127  QUIC 83 Payload (Encrypted), PKN: 38913\n2   1.020419 XXX.XXX.XXX.XXX \u2192 10.1.10.127  TCP 68 5228 \u2192 46064 [ACK] Seq=1 Ack=1 Win=248 Len=0 TSval=1894173688 TSecr=2911532757\n3   1.634172 XXX.XXX.XXX.XXX \u2192 10.1.10.127  TCP 68 443 \u2192 45268 [ACK] Seq=1 Ack=1 Win=36 Len=0 TSval=145613895 TSecr=3189134159\n4   4.921444 XXX.XXX.XXX.XXX \u2192 10.1.10.127  TCP 68 443 \u2192 55626 [ACK] Seq=1 Ack=1 Win=325 Len=0 TSval=751056060 TSecr=3131256344\n5   4.921498 XXX.XXX.XXX.XXX \u2192 10.1.10.127  TCP 68 443 \u2192 55626 [ACK] Seq=1 Ack=1397 Win=331 Len=0 TSval=751056060 TSecr=3131256349\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 7974599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c25f42dde1b3961653ff5561b55ad1ec?s=128&d=identicon&r=PG&f=1", "display_name": "a2mky", "link": "https://stackoverflow.com/users/7974599/a2mky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 51296026, "answer_count": 1, "score": -1, "last_activity_date": 1531407787, "creation_date": 1531348747, "question_id": 51295099, "link": "https://stackoverflow.com/questions/51295099/using-python-to-collect-all-inbound-tcp-traffic", "title": "Using python to collect all inbound TCP traffic", "body": "<p>I am trying to create a python linux script that listens for all inbound traffic. I do not want to listen to all traffic on one port. Any instructions or a pointer in the right direction would be highly appreciated. Thanks a ton!</p>\n"}, {"tags": ["python", "juniper", "pyez"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6755466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWcqE.jpg?s=128&g=1", "display_name": "Diogo Montagner", "link": "https://stackoverflow.com/users/6755466/diogo-montagner"}, "is_accepted": false, "score": 0, "last_activity_date": 1531350460, "creation_date": 1531350460, "answer_id": 51295318, "question_id": 51295067, "link": "https://stackoverflow.com/questions/51295067/load-configuration-file-with-juniper-pyez/51295318#51295318", "title": "Load Configuration File with Juniper PyEZ", "body": "<p>Your cu.load() is wrong.</p>\n\n<p>Here is an example: </p>\n\n<p><a href=\"https://github.com/Juniper/junosautomation/blob/master/pyez/pyez_building_blocks/bb4.provisioning.with.pyez.py\" rel=\"nofollow noreferrer\">https://github.com/Juniper/junosautomation/blob/master/pyez/pyez_building_blocks/bb4.provisioning.with.pyez.py</a></p>\n"}, {"comments": [{"owner": {"reputation": 312, "user_id": 4479864, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4bfe23a77ca589f90eb197341949d508?s=128&d=identicon&r=PG&f=1", "display_name": "gh0st", "link": "https://stackoverflow.com/users/4479864/gh0st"}, "edited": false, "score": 0, "creation_date": 1531407063, "post_id": 51297252, "comment_id": 89594012, "body": "Thanks Nitin Kr this is what I was looking for!"}], "tags": [], "owner": {"reputation": 466, "user_id": 5723106, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ROQ9Q.jpg?s=128&g=1", "display_name": "Nitin Kr", "link": "https://stackoverflow.com/users/5723106/nitin-kr"}, "is_accepted": true, "score": 1, "last_activity_date": 1531369182, "creation_date": 1531369182, "answer_id": 51297252, "question_id": 51295067, "link": "https://stackoverflow.com/questions/51295067/load-configuration-file-with-juniper-pyez/51297252#51297252", "title": "Load Configuration File with Juniper PyEZ", "body": "<p>If you are trying to load config from a local file (on junos device), you should use <code>url</code> option</p>\n\n<p>Check for url in:</p>\n\n<p><a href=\"http://junos-http://junos-pyez.readthedocs.io/en/2.1.8/jnpr.junos.utils.html#jnpr.junos.utils.config.Config.load\" rel=\"nofollow noreferrer\">http://junos-http://junos-pyez.readthedocs.io/en/2.1.8/jnpr.junos.utils.html#jnpr.junos.utils.config.Config.load</a></p>\n"}], "owner": {"reputation": 312, "user_id": 4479864, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4bfe23a77ca589f90eb197341949d508?s=128&d=identicon&r=PG&f=1", "display_name": "gh0st", "link": "https://stackoverflow.com/users/4479864/gh0st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 51297252, "answer_count": 2, "score": 0, "last_activity_date": 1531369182, "creation_date": 1531348493, "question_id": 51295067, "link": "https://stackoverflow.com/questions/51295067/load-configuration-file-with-juniper-pyez", "title": "Load Configuration File with Juniper PyEZ", "body": "<p>I am trying to load override a config stored on the juniper device (vSRX) with PyEZ. The code looks like this</p>\n\n<pre><code>from jnpr.junos import Device\nfrom jnpr.junos.utils.config import Config\n\ndev = Device(host=\"x.x.x.x\", user='user', password='pass').open()\nwith Config(dev, mode='private') as cu:  \n    cu.load('load override minimal.conf', format='set')\n    cu.pdiff()\n    if cu.commit_check():\n      cu.commit()\n</code></pre>\n\n<p>When I run the script I get below error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/dist-packages/jnpr/junos/utils/config.py\", line 534, in load\n    ignore_warning=ignore_warning)\n  File \"/usr/local/lib/python2.7/dist-packages/jnpr/junos/utils/config.py\", line 455, in try_load\n    raise ConfigLoadError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)\njnpr.junos.exception.ConfigLoadError: ConfigLoadError(severity: error, bad_element: load, message: error: unknown command)\n</code></pre>\n\n<p>Can't find a solution to my problem. Any help is greatly appreciated! </p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 24142, "user_id": 3955830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f57e29619783576502a620f47ad2e3b?s=128&d=identicon&r=PG", "display_name": "solarissmoke", "link": "https://stackoverflow.com/users/3955830/solarissmoke"}, "is_accepted": true, "score": 1, "last_activity_date": 1531368445, "creation_date": 1531368445, "answer_id": 51297147, "question_id": 51295029, "link": "https://stackoverflow.com/questions/51295029/return-non-null-field-in-many-to-many-intermediary-class-model-django/51297147#51297147", "title": "Return non null field in Many To Many intermediary class/model Django", "body": "<p>One approach that is sometimes used in similar \"entity-attribute-value\" models is to add an additional field which <code>OneToOneField</code> is populated. Something like this:</p>\n\n<pre><code>class VehicleFeatures(models.Model):\n    personal_equipment = models.OneToOneField(PersonalEquipment, null=True, blank=True, )\n    commercial_equipment = models.OneToOneField(CommercialEquipment, null=True, blank=True, )\n    personal_vehicle = models.OneToOneField(PersonalVehicle, null=True, blank=True, )\n    commercial_truck = models.OneToOneField(CommercialTruck, null=True, blank=True, )\n    commercial_tractor = models.OneToOneField(CommercialTractor, null=True, blank=True, )\n\n    # Add a field to store the type of relation that is set for this instance\n    relation_type = models.CharField(max_length=50)\n</code></pre>\n\n<p>When the object is saved, you do the <code>for x in list</code> thing and determine which field is not null, and set <code>relation_type</code> to the name of that field, e.g.:</p>\n\n<pre><code>def save(self):\n    for k in ['personal_equipment', 'commercial_equipment', 'personal_vehicle' ...]:\n        if getattr(self, k) is not None:\n            self.relation_type = k\n    return super(VehicleFeatures, self).save()\n</code></pre>\n\n<p>This is significantly more efficient than doing the same loop every time you query the object.</p>\n\n<p>Then your <code>__unicode__</code> method would be:</p>\n\n<pre><code>def __unicode__(self):\n    return '{}'.format(getattr(self, self.relation_type))\n</code></pre>\n\n<p>This is for the case when only one field is ever set, but you could extend it quite easily to support multiple fields - e.g., by making <code>relation_type</code> a comma-separated string, or if your database supports it, an <code>ArrayField</code>.</p>\n"}], "owner": {"reputation": 17571, "user_id": 1234721, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cd7d518406352d89d5b5b5326daf7fdd?s=128&d=identicon&r=PG", "display_name": "chris Frisina", "link": "https://stackoverflow.com/users/1234721/chris-frisina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 51297147, "answer_count": 1, "score": 1, "last_activity_date": 1531368445, "creation_date": 1531348187, "last_edit_date": 1531349245, "question_id": 51295029, "link": "https://stackoverflow.com/questions/51295029/return-non-null-field-in-many-to-many-intermediary-class-model-django", "title": "Return non null field in Many To Many intermediary class/model Django", "body": "<p>I think this is a python question (maybe <code>for x in list</code>), but might have a django framework \u00bfquery/or-the-like?</p>\n\n<p>I have an intermediary class/model:</p>\n\n<pre><code>class VehicleFeatures(models.Model):\n    personal_equipment = models.OneToOneField(PersonalEquipment, null=True, blank=True, )\n    commercial_equipment = models.OneToOneField(CommercialEquipment, null=True, blank=True, )\n    personal_vehicle = models.OneToOneField(PersonalVehicle, null=True, blank=True, )\n    commercial_truck = models.OneToOneField(CommercialTruck, null=True, blank=True, )\n    commercial_tractor = models.OneToOneField(CommercialTractor, null=True, blank=True, )\n    \u2026\n\n    def __unicode__(self):\n        # assume one and only one is allowed\n        return '{}'.format(self.whichever_of_the_fields_exists)\n        # Extra Credit :)\n        # assume any number is allowed\n</code></pre>\n\n<p><strong>How do I return the Model.field that has a reference</strong> (ultimately to get that model's name, to pass back to the other side of this many-to-many)?</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>trying to follow option 2 and 3 <a href=\"https://lukeplant.me.uk/blog/posts/avoid-django-genericforeignkey/\" rel=\"nofollow noreferrer\">in this article</a></li>\n<li>I am not worried about performance (yet) but if you are aware of a low cost option, then please teach us why one is better than another</li>\n<li>Visual of models\n\n<ul>\n<li>121-Referent: Vehicle (abstract model) with concrete models [listed above]</li>\n<li>M2M: VehicleFeatures (to connect to concrete models)</li>\n<li>12M: Features (fields for many vehicle features)</li>\n</ul></li>\n</ul>\n"}, {"tags": ["python", "tensorflow", "openai-gym"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10068117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fg8eobL9qfk/AAAAAAAAAAI/AAAAAAAAAAw/HHVPK194PGo/photo.jpg?sz=128", "display_name": "Aurelian Tactics", "link": "https://stackoverflow.com/users/10068117/aurelian-tactics"}, "is_accepted": false, "score": 1, "last_activity_date": 1531366054, "creation_date": 1531366054, "answer_id": 51296886, "question_id": 51295015, "link": "https://stackoverflow.com/questions/51295015/machine-learning-reward-artificially-capping/51296886#51296886", "title": "Machine Learning reward artificially capping", "body": "<p>Episodes for Cartpole terminate when the pole falls and at <a href=\"https://github.com/openai/gym/blob/c8f81495441864e380967d8735e7ca6d09c52f7b/gym/envs/__init__.py\" rel=\"nofollow noreferrer\">200 successful steps</a>. See the max_episode_steps in the linked file if you want to change this. The reason there is a 200 step max is to make evaluating trials easier (ie you always get episode ends so you can evaluate episode stats) and so that the environment doesn't get stuck in a never ending trial.</p>\n\n<pre><code>register(\nid='CartPole-v0',\nentry_point='gym.envs.classic_control:CartPoleEnv',\nmax_episode_steps=200,\nreward_threshold=195.0,)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9553863"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531366054, "creation_date": 1531348120, "question_id": 51295015, "link": "https://stackoverflow.com/questions/51295015/machine-learning-reward-artificially-capping", "title": "Machine Learning reward artificially capping", "body": "<p>So when I run this, it works perfectly, however, for some reason the reward caps at 200. I'm not sure what could be causing this. I'm new to machine learning and this is my first project, so sorry if I am missing something stupid.I hypothesize that <code>done</code> is triggering before I want it too, but playing with that hasn't led to anything. Thanks so much.</p>\n\n<pre><code>import gym\nimport tensorflow as tf\nimport numpy as np\nimport os\nimport sys\n\nenv = gym.make('CartPole-v0')\ndiscount_rate=.95\n\n# TODO Build the policy gradient neural network\nclass Agent:\n     def __init__(self, num_actions, state_size):\n\n        initializer = tf.contrib.layers.xavier_initializer()\n\n        self.input_layer = tf.placeholder(dtype=tf.float32, shape=[None, state_size])\n\n        # Neural net starts here\n\n        hidden_layer = tf.layers.dense(self.input_layer, 8, activation=tf.nn.relu, kernel_initializer=initializer)\n        hidden_layer_2 = tf.layers.dense(hidden_layer, 8, activation=tf.nn.relu, kernel_initializer=initializer)\n\n        # Output of neural net\n        out = tf.layers.dense(hidden_layer_2, num_actions, activation=None)\n\n        self.outputs = tf.nn.softmax(out)\n        self.choice = tf.argmax(self.outputs, axis=1)\n\n        # Training Procedure\n        self.rewards = tf.placeholder(shape=[None, ], dtype=tf.float32)\n        self.actions = tf.placeholder(shape=[None, ], dtype=tf.int32)\n\n        one_hot_actions = tf.one_hot(self.actions, num_actions)\n\n        cross_entropy = tf.nn.softmax_cross_entropy_with_logits(logits=out, labels=one_hot_actions)\n\n        self.loss = tf.reduce_mean(cross_entropy * self.rewards)\n\n        self.gradients = tf.gradients(self.loss, tf.trainable_variables())\n\n        # Create a placeholder list for gradients\n        self.gradients_to_apply = []\n        for index, variable in enumerate(tf.trainable_variables()):\n            gradient_placeholder = tf.placeholder(tf.float32)\n            self.gradients_to_apply.append(gradient_placeholder)\n\n        # Create the operation to update gradients with the gradients placeholder.\n        optimizer = tf.train.AdamOptimizer(learning_rate=1e-2)\n        self.update_gradients = \noptimizer.apply_gradients(zip(self.gradients_to_apply, tf.trainable_variables()))\n\n\n\ndef discount_normalize_rewards(rewards):\n    discounted_rewards = np.zeros_like(rewards)\n    total_rewards = 0\n\n    for i in reversed(range(len(rewards))):\n        total_rewards = total_rewards * discount_rate + rewards[i]\n        discounted_rewards[i] = total_rewards\n\n    discounted_rewards -= np.mean(discounted_rewards)\n    discounted_rewards /= np.std(discounted_rewards)\n\n    return discounted_rewards\n\n\n#initialize the training loop\ntf.reset_default_graph()\n\n# Modify these to match shape of actions and states in your environment\nnum_actions = 2\nstate_size = 4\n\npath = \"./cartpole-pg/\"\n\ntraining_episodes = 1000\nmax_steps_per_episode = 20000\nepisode_batch_size = 5\n\nagent = Agent(num_actions, state_size)\n\ninit = tf.global_variables_initializer()\n\nsaver = tf.train.Saver(max_to_keep=2)\n\nif not os.path.exists(path):\n   os.makedirs(path)\n\nwith tf.Session() as sess:\n    sess.run(init)\n\ntotal_episode_rewards = []\n\n# Create a buffer of 0'd gradients\ngradient_buffer = sess.run(tf.trainable_variables())\nfor index, gradient in enumerate(gradient_buffer):\n    gradient_buffer[index] = gradient * 0\n\nfor episode in range(training_episodes):\n\n    state = env.reset()\n\n    episode_history = []\n    episode_rewards = 0\n\n    for step in range(max_steps_per_episode):\n\n        if episode % 100 == 0:\n            env.render()\n\n        # Get weights for each action\n        action_probabilities = sess.run(agent.outputs, feed_dict={agent.input_layer: [state]})\n        action_choice = np.random.choice(range(num_actions), p=action_probabilities[0])\n\n        state_next, reward, done, _ = env.step(action_choice)\n        episode_history.append([state, action_choice, reward, state_next])\n        state = state_next\n\n        episode_rewards += reward\n\n        if done:\n            total_episode_rewards.append(episode_rewards)\n            episode_history = np.array(episode_history)\n            episode_history[:,2] = discount_normalize_rewards(episode_history[:,2])\n\n            ep_gradients = sess.run(agent.gradients, feed_dict={agent.input_layer: np.vstack(episode_history[:, 0]),\n                                                                agent.actions: episode_history[:, 1],\n                                                                agent.rewards: episode_history[:, 2]})\n            # add the gradients to the grad buffer:\n            for index, gradient in enumerate(ep_gradients):\n                gradient_buffer[index] += gradient\n\n            break\n\n    if episode % episode_batch_size == 0:\n\n        feed_dict_gradients = dict(zip(agent.gradients_to_apply, gradient_buffer))\n\n        sess.run(agent.update_gradients, feed_dict=feed_dict_gradients)\n\n        for index, gradient in enumerate(gradient_buffer):\n            gradient_buffer[index] = gradient * 0\n\n    if episode % 1 == 0:\n        saver.save(sess, path + \"pg-checkpoint\", episode)\n        print(\"Reward: \" + str(total_episode_rewards[-1:]))\n\n\nenv.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "kivy"], "comments": [{"owner": {"reputation": 74, "user_id": 8260976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4f175e69224cb1857341673d957d85?s=128&d=identicon&r=PG&f=1", "display_name": "ASingh", "link": "https://stackoverflow.com/users/8260976/asingh"}, "edited": false, "score": 1, "creation_date": 1531349407, "post_id": 51294999, "comment_id": 89567867, "body": "Thanks for asking this, I have the same question! Hopefully we get a solution."}], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531444001, "post_id": 51316040, "comment_id": 89609022, "body": "Thanks for help, but this does not seem to work for me."}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531444260, "post_id": 51316040, "comment_id": 89609076, "body": "It shows as <a href=\"https://drive.google.com/file/d/1tzMZcYtgjdbM8UIgzGnUDIamrLUY2_uI/view?usp=sharing\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "reply_to_user": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531445209, "post_id": 51316040, "comment_id": 89609286, "body": "Sorry, didn&#39;t think I needed to mention, but click on &#39;Select Files&#39;."}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531450872, "post_id": 51316040, "comment_id": 89610180, "body": "When I do click on &#39;Select Files&#39; I recieve <a href=\"https://drive.google.com/file/d/1nQvVQsZ9Y_ASbcDyzPOWqI-HekfeL0eQ/view?usp=sharing\" rel=\"nofollow noreferrer\">this error</a>"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "reply_to_user": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 1, "creation_date": 1531451276, "post_id": 51316040, "comment_id": 89610244, "body": "What os are you running? The code should work for Linux, Windows, or Android, but not MacOS. Try deleting the <code>, path=homeDir</code> on the continuation line for <code>self.fbrowser=</code>."}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531459772, "post_id": 51316040, "comment_id": 89612202, "body": "Thank you very much, will I be able to deploy this app to ios?"}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531459872, "post_id": 51316040, "comment_id": 89612237, "body": "Also, I have a method called stitch() that takes a array of images, where would I put this method for this code?"}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531459998, "post_id": 51316040, "comment_id": 89612276, "body": "Also, how would I make another screeen that displays the resulting image of the stitch() method?"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "reply_to_user": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1531483831, "post_id": 51316040, "comment_id": 89624545, "body": "Technically, I should tell you to open a new <code>StackOverflow</code> question for each of those question. But briefly, you can put the <code>stitch()</code> method anywhere you like (maybe in a new class that handles your images). You can display your image result many different ways, <code>ScreenManager</code>, <code>ModalView</code>, and <code>Popup</code> are the ones that occur to me first. As far as IOS goes, have a look at <a href=\"https://kivy.org/docs/guide/packaging-ios.html\" rel=\"nofollow noreferrer\">Create a package for IOS</a>. I personally have no experience with IOS."}], "tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1531440555, "creation_date": 1531440555, "answer_id": 51316040, "question_id": 51294999, "link": "https://stackoverflow.com/questions/51294999/how-to-select-multiple-files-with-filechooser-with-kivy/51316040#51316040", "title": "How to select multiple files with FileChooser with Kivy?", "body": "<p>Here is an example that does what I think you want:</p>\n\n<pre><code>import os\n\nimport kivy\nfrom kivy import platform\nfrom kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.uix.floatlayout import FloatLayout\nimport kivy.garden.filebrowser\n\n\nclass FileBrowserApp(App):\n\n    def build(self):\n        self.root = FloatLayout()\n        button = Button(text='Select Files', pos_hint={'x':0, 'y': 0}, size_hint=(0.2, 0.1))\n        button.bind(on_press=self.do_select)\n        self.root.add_widget(button)\n        return self.root\n\n    def do_select(self, *args):\n        homeDir = None\n        if platform == 'win':\n            homeDir = os.environ[\"HOMEPATH\"]\n        elif platform == 'android':\n            homeDir = os.path.dirname(os.path.abspath(__file__))\n        elif platform == 'linux':\n            homeDir = os.environ[\"HOME\"]\n        self.fbrowser = kivy.garden.filebrowser.FileBrowser(select_string='Select',\n            multiselect=True, filters=['*.png'], path=homeDir)\n        self.root.add_widget(self.fbrowser)\n        self.fbrowser.bind(\n            on_success=self._fbrowser_success,\n            on_canceled=self._fbrowser_canceled,\n            on_submit=self._fbrowser_success)\n\n    def _fbrowser_success(self, fbInstance):\n        if len(fbInstance.selection) == 0:\n            return\n        selected = []\n        for file in fbInstance.selection:\n            selected.append(os.path.join(fbInstance.path, file))\n        print('selected: ' + str(selected))\n        self.root.remove_widget(self.fbrowser)\n        self.fbrowser = None\n\n    def _fbrowser_canceled(self, instance):\n        self.root.remove_widget(self.fbrowser)\n        self.fbrowser = None\n\nif __name__==\"__main__\":\n    app = FileBrowserApp()\n    app.run()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 10395671, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Y_Q24QBZ38/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVeAWRwewajxDnKSnFEKeGRtxF7lw/mo/photo.jpg?sz=128", "display_name": "Halil Ozdemir", "link": "https://stackoverflow.com/users/10395671/halil-ozdemir"}, "is_accepted": false, "score": 3, "last_activity_date": 1574276736, "creation_date": 1574276736, "answer_id": 58961635, "question_id": 51294999, "link": "https://stackoverflow.com/questions/51294999/how-to-select-multiple-files-with-filechooser-with-kivy/58961635#58961635", "title": "How to select multiple files with FileChooser with Kivy?", "body": "<p>In your Test.kv file, after FileChooserIconView:  add multiselect: True</p>\n\n<pre><code>FileChooserIconView:\n    multiselect: True\n</code></pre>\n\n<p>This will allow the selection of multiple files. </p>\n\n<p>If you use FileChooserListView instead of FileChooserIconView, the file chooser window will not discriminate selected/not selected files visually. You can still select multiple files, but you need to remember the selected files. The first click selects and the second click deselects. I hope the developers of this widget will correct this issue soon.</p>\n"}], "owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1299, "favorite_count": 2, "accepted_answer_id": 51316040, "answer_count": 2, "score": 1, "last_activity_date": 1574276736, "creation_date": 1531347958, "last_edit_date": 1531348380, "question_id": 51294999, "link": "https://stackoverflow.com/questions/51294999/how-to-select-multiple-files-with-filechooser-with-kivy", "title": "How to select multiple files with FileChooser with Kivy?", "body": "<p>I am using kivy and python to build an application. </p>\n\n<p>I am trying to build an application in which I can select several images, add them to an array, and then pass this array of images through another method which stitches the images (using the stitcher class). The output image will display on one of the three screens (also I want to remove the middle screen).</p>\n\n<p>So essentially what I would like help with is how to be able to select multiple files with filechooser in kivy and then add these files to array that I can later pass through a different method.</p>\n\n<p>With the help of @ikolim in <a href=\"https://stackoverflow.com/questions/51279247/how-to-resolve-invalid-property-name-error-to-make-file-chooser-with-kivy/51291149#51291149\">this post</a>, I have been able to create the application.</p>\n\n<p><strong>main.py</strong></p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.tabbedpanel import TabbedPanel\nfrom kivy.properties import ObjectProperty\nfrom PIL import Image\n\n\nclass RootWidget(TabbedPanel):\n    manager = ObjectProperty(None)\n    img = ObjectProperty(None)\n    img3 = ObjectProperty(None)\n    img4 = ObjectProperty(None)\n    lab = ObjectProperty(None)\n\n    def on_touch_up(self, touch):\n        if not self.img3.collide_point(*touch.pos):\n            return True\n        else:\n            self.lab.text = 'Pos: (%d,%d)' % (touch.x, touch.y)\n            return True\n\n    def switch_to(self, header):\n        # set the Screen manager to load  the appropriate screen\n        # linked to the tab head instead of loading content\n        self.manager.current = header.screen\n\n        # we have to replace the functionality of the original switch_to\n        self.current_tab.state = \"normal\"\n        header.state = 'down'\n        self._current_tab = header\n\n    def select_to(self, *args):\n        try:\n            print(args[1][0])\n            iw = Image.open(args[1][0])\n            iw.save('./phase.jpg')\n            gray = iw.convert('1')\n            gray.save('./gray_im.jpg')\n            self.img3.source = './gray_im.jpg'\n            self.img4.source = './gray_im.jpg'\n            self.img.source = './phase.jpg'\n            self.img.reload()\n            self.img3.reload()\n            self.img4.reload()\n        except:\n            pass\n\n    def update_touch_label(self, label, touch):\n        label.text = 'Pos:(%d, %d)' % (touch.x, touch.y)\n        label.texture_update()\n        label.pos = touch.pos\n        label.size = label.texture_size[0] + 20, label.texture_size[1] + 20\n\n\nclass TestApp(App):\n    title = 'Screen Widget'\n\n    def build(self):\n        return RootWidget()\n\n    def on_pause(self):\n        return True\n\n\nif __name__ == '__main__':\n    TestApp().run()\n</code></pre>\n\n<p><strong>Test.kv</strong></p>\n\n<pre><code>#:kivy 1.10.1\n\n&lt;RootWidget&gt;:\n    manager: manager\n    img: img\n    img3: img3\n    img4: img4\n    lab: lab\n    do_default_tab: False\n\n    ScreenManager:\n        id: manager\n\n        Screen:\n            id: sc1\n            name:'Load img'\n\n            FileChooserIconView:\n                canvas.before:\n                    Color:\n                        rgb: 0.5, 0.4, 0.5\n                    Rectangle:\n                        pos: self.pos\n                        size: self.size\n                on_selection:\n                    root.select_to(*args)\n\n        Screen:\n            id: sc2\n            name: 'Image'\n\n            FloatLayout:\n                Button:\n                    id: lab\n                    pos_hint: {\"right\": 0.55, 'top': 1}\n                    size_hint: .15,0.1\n\n            RelativeLayout:\n                Image:\n                    id: img\n                    on_touch_down:\n                        str('Relative:{}'.format(args[1].pos))\n                    pos_hint: {\"left\": 1, 'bottom': 1}\n                    size_hint: 0.5, 1\n                    allow_stretch: True\n\n            RelativeLayout:\n                Image:\n                    id: img3\n                    pos_hint: {\"right\": 1, 'bottom': 1}\n                    size_hint: 0.5, 1\n                    allow_stretch: True\n\n        Screen:\n            id: sc3\n            name: 'Image_'\n\n            FloatLayout:\n                Image:\n                    id: img4\n                    keep_data: True\n                    post: self.pos\n                    size: self.size\n\n    TabbedPanelHeader:\n        text: sc1.name\n        background_color: 1, 0, 0, 1\n        screen: sc1.name\n\n    TabbedPanelHeader:\n        text: sc2.name\n        background_color: 1, 1, 0, 1\n        screen: sc2.name\n\n    TabbedPanelHeader:\n        text: sc3.name\n        background_color: 1, 0, 1, 1\n        screen: sc3.name\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pyqt4"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531348746, "post_id": 51294979, "comment_id": 89567700, "body": "That depends on how you want to show, how do you want to show it ?, there is no correct way. Your possible answers will be based on opinions, doing off-topic in SO."}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531407676, "post_id": 51294979, "comment_id": 89594409, "body": "@eyllanesc I guess what I was hoping was to learn a method of displaying the object&#39;s information directly in the QMainWindow."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531407905, "post_id": 51294979, "comment_id": 89594542, "body": "There are multiple ways, for example using QMessageBox: <code>QtGui.QMessageBox.information(None, &quot;user title&quot;, &quot;some_information&quot;)</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531407974, "post_id": 51294979, "comment_id": 89594589, "body": "change <code>return print(&quot;Employee ID:&quot;, self.id, &quot;\\nFull name:&quot;, self.full_name, &quot;\\nSalary:&quot;, self.salary)</code> to <code>return &quot;Employee ID:&quot;, self.id, &quot;\\nFull name:&quot;, self.full_name, &quot;\\nSalary:&quot;, self.salary</code>"}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531408466, "post_id": 51294979, "comment_id": 89594896, "body": "@eyllanesc I can get a QmessageBox to display object information? I tried: QtGui.QMessageBox.information(None, &quot;user title&quot;, str(emp1.info)) and it displays: (&#39;Employee ID:&#39;, 2, &#39;\\nFull name:&#39;, &#39;jake&#39;, &#39;\\nSalary:&#39;, 30000). What would be the correct way to call info()?"}], "answers": [{"comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531409592, "post_id": 51309397, "comment_id": 89595626, "body": "@Rob  If my answer helps you do not forget to mark it as correct, if you do not know how to do it, review the <a href=\"https://stackoverflow.com/tour\">tour</a>, that is the best way to thank."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1531409084, "creation_date": 1531409084, "answer_id": 51309397, "question_id": 51294979, "link": "https://stackoverflow.com/questions/51294979/how-to-display-object-information-in-qmainwindow/51309397#51309397", "title": "How to display Object information in QMainWindow", "body": "<p>There are many ways to show a result, for example we can use a <code>QMessageBox</code>.</p>\n\n<pre><code>import sys\nfrom PyQt4 import QtGui\n\n\nclass Employee:\n    def __init__(self, full_name, _id, salary):\n        self.full_name = full_name\n        self.id = _id\n        self.salary = salary\n\n    @property\n    def info(self):\n        return \"Employee ID: {}\\nFull name:{}\\nSalary:{}\".format(self.id, self.full_name, self.salary)\n\n\nclass Window(QtGui.QMainWindow, Employee):\n    def __init__(self):\n        super(Window, self).__init__()  #Returns the parrent object or the QMainWindow object\n        self.setGeometry(50, 50, 500, 300)\n        self.setWindowTitle(\"Employee builder\")\n\n        extractAction = QtGui.QAction(\"&amp;Add Employee\", self)\n        extractAction.triggered.connect(self.create_employee)\n\n        mainMenu = self.menuBar()\n        fileMenu = mainMenu.addMenu('&amp;File')\n        fileMenu.addAction(extractAction)\n\n    def create_employee(self):\n        text, ok = QtGui.QInputDialog.getText(self, 'Input Dialog','Enter employees name:')\n        ID, ok = QtGui.QInputDialog.getInt(self, \"integer input dualog\", \"Enter employees id number:\")\n        pay, ok = QtGui.QInputDialog.getInt(self, \"integer input dualog\", \"Enter employees salary:\")\n        emp1 = Employee(text, ID, pay)\n        QtGui.QMessageBox.information(self, \"New Employee\", emp1.info)\n\n\ndef run():\n    app = QtGui.QApplication(sys.argv)\n    w = Window()\n    w.show()\n    sys.exit(app.exec_())\n\nif __name__ == '__main__':\n    run()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "is_accepted": false, "score": 0, "last_activity_date": 1531435976, "last_edit_date": 1531435976, "creation_date": 1531426664, "answer_id": 51313795, "question_id": 51294979, "link": "https://stackoverflow.com/questions/51294979/how-to-display-object-information-in-qmainwindow/51313795#51313795", "title": "How to display Object information in QMainWindow", "body": "<p>A QMainWindow has a built in QStatusBar at the bottom of the window that you can use for short messages.</p>\n\n<p>If you were to go this route, you would probably change your Employee.info to return a string, e.g.</p>\n\n<pre><code>return \"Employee ID: \" + self.id + \",  Full name: \" + self.full_name + \",  Salary: \" + self.salary\n</code></pre>\n\n<p>and to display the message in the status bar</p>\n\n<pre><code>self.statusbar.showMessage(emp.id)\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 51309397, "answer_count": 2, "score": 1, "last_activity_date": 1531435976, "creation_date": 1531347831, "question_id": 51294979, "link": "https://stackoverflow.com/questions/51294979/how-to-display-object-information-in-qmainwindow", "title": "How to display Object information in QMainWindow", "body": "<p>I am attempting to create a GUI with PyQt4 which allows me to create a new Employee and call the Employee's info() method. Here is the Employee class:</p>\n\n<pre><code>class Employee:\n\n  def __init__(self, full_name, id, salary):\n    self.full_name = full_name\n    self.id = id\n    self.salary = salary\n\n  @property\n  def info(self):\n    return print(\"Employee ID:\", self.id, \"\\nFull name:\", self.full_name, \"\\nSalary:\", self.salary)\n</code></pre>\n\n<p>Here is the code that integrates PyQt4:</p>\n\n<pre><code>import sys\nfrom PyQt4 import QtGui\nfrom PyQt4.QtGui import QInputDialog\n\n\nclass Employee:\n\n  def __init__(self, full_name, id, salary):\n    self.full_name = full_name\n    self.id = id\n    self.salary = salary\n\n  @property\n  def info(self):\n    return print(\"Employee ID:\", self.id, \"\\nFull name:\", self.full_name, \"\\nSalary:\", self.salary)\n\n\nclass Window(QtGui.QMainWindow, Employee):\n\n  def __init__(self):\n    super(Window, self).__init__()  #Returns the parrent object or the QMainWindow object\n    self.setGeometry(50, 50, 500, 300)\n    self.setWindowTitle(\"Employee builder\")\n\n    extractAction = QtGui.QAction(\"&amp;Add Employee\", self)\n    extractAction.triggered.connect(self.create_employee)\n\n    mainMenu = self.menuBar()\n    fileMenu = mainMenu.addMenu('&amp;File')\n    fileMenu.addAction(extractAction)\n\n    self.home()\n\n  def home(self):\n    self.show()\n\n  def create_employee(self):\n    text, ok = QtGui.QInputDialog.getText(self, 'Input Dialog',\n                                          'Enter employees name:')\n\n    ID, ok = QInputDialog.getInt(self, \"integer input dualog\", \"Enter employees id number:\")\n\n    pay, ok = QInputDialog.getInt(self, \"integer input dualog\", \"Enter employees salary:\")\n\n    emp1 = Employee(text, ID, pay)\n    emp1.info\n\n\ndef run():\n  app = QtGui.QApplication(sys.argv)\n  GUI = Window()\n  sys.exit(app.exec_())\n</code></pre>\n\n<p>This code works to display the information from info() in the run window. However, what I would like to do is display the information in the QMainWindow but I am not sure how to do that.</p>\n\n<p>On a side note, I don't know that the way I am going about this is the correct convention so feel free to show me the correct way if I am wrong.</p>\n"}, {"tags": ["python", "slack", "slack-api", "errbot"], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 6773878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/556347854557492/picture?type=large", "display_name": "Trevor Jordy", "link": "https://stackoverflow.com/users/6773878/trevor-jordy"}, "edited": false, "score": 0, "creation_date": 1531417195, "post_id": 51298205, "comment_id": 89599779, "body": "Seems like that may be the only solution. If  bot accounts just limit your functionality,  why is it recommended over a regular user account? Does using a user account have other downsides I am not aware of?"}, {"owner": {"reputation": 9576, "user_id": 866021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jYLJl.jpg?s=128&g=1", "display_name": "Adil B", "link": "https://stackoverflow.com/users/866021/adil-b"}, "reply_to_user": {"reputation": 438, "user_id": 6773878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/556347854557492/picture?type=large", "display_name": "Trevor Jordy", "link": "https://stackoverflow.com/users/6773878/trevor-jordy"}, "edited": false, "score": 0, "creation_date": 1531418180, "post_id": 51298205, "comment_id": 89600291, "body": "Purely a guess, but I imagine you wouldn&#39;t want to share <code>errbot</code> access with anyone else if you&#39;ve granted it a token to represent an actual Slack user rather than a bot. A bot account seems to be able to perform many tasks in Slack but has some interesting limitations."}], "tags": [], "owner": {"reputation": 9576, "user_id": 866021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jYLJl.jpg?s=128&g=1", "display_name": "Adil B", "link": "https://stackoverflow.com/users/866021/adil-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1531374892, "creation_date": 1531374892, "answer_id": 51298205, "question_id": 51294976, "link": "https://stackoverflow.com/questions/51294976/unable-to-create-a-chatroom-using-errbot-commands-resulting-in-not-allowed-toke/51298205#51298205", "title": "Unable to create a chatroom using errbot commands, resulting in not_allowed_token_type error", "body": "<p>It sounds like you'll need to configure errbot to use a <a href=\"http://errbot.io/en/latest/user_guide/configuration/slack.html\" rel=\"nofollow noreferrer\">regular Slack user account, and not a Bot account</a>:</p>\n\n<blockquote>\n  <p>You will need to have an account at Slack for the bot to use, either a bot account (recommended) or a regular user account.</p>\n</blockquote>\n\n<p>See if that approach works, as Bots are indeed not allowed to create channels.</p>\n"}], "owner": {"reputation": 438, "user_id": 6773878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/556347854557492/picture?type=large", "display_name": "Trevor Jordy", "link": "https://stackoverflow.com/users/6773878/trevor-jordy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531374892, "creation_date": 1531347826, "question_id": 51294976, "link": "https://stackoverflow.com/questions/51294976/unable-to-create-a-chatroom-using-errbot-commands-resulting-in-not-allowed-toke", "title": "Unable to create a chatroom using errbot commands, resulting in not_allowed_token_type error", "body": "<p>When I call</p>\n\n<pre><code>!room create #example-room\n</code></pre>\n\n<p>in slack, i get a response: </p>\n\n<pre><code>Computer says nooo. See logs for details:\nSlack API call to channels.create failed: not_allowed_token_type\n</code></pre>\n\n<p>The Slack API (here: <a href=\"https://api.slack.com/methods/channels.create\" rel=\"nofollow noreferrer\">https://api.slack.com/methods/channels.create</a>) makes it sound as if bots are not allowed to call Chatroom methods , though I assume that because of the existence of the !room create command that there must be a way. \nCould someone help me with creating a chatroom in slack?</p>\n"}, {"tags": ["python", "opengl", "ctypes", "access-violation"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 1, "creation_date": 1531348493, "post_id": 51294951, "comment_id": 89567650, "body": "You proably did nmot have a GL context when you queried for the function pointer, so you got NULL instead."}], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "edited": false, "score": 0, "creation_date": 1531384458, "post_id": 51300396, "comment_id": 89578542, "body": "Thanks for your answer, PyOpenGl getting me opengl version 1.1 which doesn&#39;t have glCreateProgram, my machine supports 2.1 so that&#39;s why i&#39;m trying to load them myself"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "edited": false, "score": 0, "creation_date": 1531397714, "post_id": 51300396, "comment_id": 89587403, "body": "@rizo: If PyOpenGL does give you only OpenGL-1.1 then there&#39;s something wrong with your machine. Up to, including OpenGL-2.1 you&#39;d always get the highest OpenGL profile supported. And to load the function pointers manually you have to create a OpenGL context in the first place\u2026 and also check that it&#39;s actually the version you want."}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "reply_to_user": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "edited": false, "score": 0, "creation_date": 1531440476, "post_id": 51300396, "comment_id": 89608366, "body": "@rizo Have you tried updating the drivers for your graphics card? Also, if you really want to do it by hand, you might want to take a look at wrapping glew. However, PyOpenGL already uses ctypes to wrap OpenGL, so you might want to take a look at that. ModernGL is another option for another wrapper."}, {"owner": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "edited": false, "score": 0, "creation_date": 1531837600, "post_id": 51300396, "comment_id": 89739696, "body": "@detenwolf: I tried using sdl2 it gave me Opengl-2.1 but running in the same file glGetString(GL_VERSION) returns 1.1 and i cant use gl-functions higher than version 1.1."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "edited": false, "score": 0, "creation_date": 1531852565, "post_id": 51300396, "comment_id": 89748237, "body": "@rizo: Can you post the source code of your SDL experiment? I wonder how you deduced, that SDL got you a OpenGL-2.1 context. Because in the end what matters is, what the GL_VERSION string tells you."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "edited": false, "score": 0, "creation_date": 1531868947, "post_id": 51300396, "comment_id": 89754779, "body": "@rizo: I think you misunderstood the SDL2 API. The call <code>sdl2.SDL_GL_GetAttribute(sdl2.SDL_GL_CONTEXT_\u2026_VERSION, \u2026)</code> does <i>not</i> tell you, which OpenGL version SDL2 got. <i>It tells you, which OpenGL version SDL2 will <b>ask</b> the operating system for, when creating the next new OpenGL context.</i> What you actually get maybe a very different version."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "edited": false, "score": 0, "creation_date": 1531869132, "post_id": 51300396, "comment_id": 89754829, "body": "@rizo: To me it looks like, as if you simply don&#39;t have properly installed any OpenGL driver at all, and are dropped to the fallback software OpenGL implementation that&#39;s been shipping with all Windows versions ever since Windows-NT 4 and Windows-95b. I strongly suggest you head over to the website of your graphics card&#39;s GPU vendor, download the latest driver release matching your GPU and install that. <i>The Windows automatic driver updater is known to skimp OpenGL.</i>"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 0, "last_activity_date": 1531382870, "creation_date": 1531382870, "answer_id": 51300396, "question_id": 51294951, "link": "https://stackoverflow.com/questions/51294951/python-ctypes-opengl-functions-loading-error-oserror-exception-access-viola/51300396#51300396", "title": "python - ctypes opengl functions loading error (OSError: exception: access violation writing 0x0000000000000000)", "body": "<p>You're never creating an OpenGL context. Also if <code>glCreateShader</code> is available at all depends on the OpenGL version the context is created for. Why are you using <code>ctypes</code> in the first place anyway? There are perfectly fine OpenGL Python bindings that abstract away all of the tedious bookkeeping code for you.</p>\n\n<p><a href=\"http://pyopengl.sourceforge.net/\" rel=\"nofollow noreferrer\">http://pyopengl.sourceforge.net/</a></p>\n\n<pre><code>pip install PyOpenGL\n</code></pre>\n"}], "owner": {"reputation": 620, "user_id": 10067135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a7bb9f13f0fd440a80f66a34a5fcde?s=128&d=identicon&r=PG&f=1", "display_name": "scicyb", "link": "https://stackoverflow.com/users/10067135/scicyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 51300396, "answer_count": 1, "score": 0, "last_activity_date": 1617278914, "creation_date": 1531347657, "last_edit_date": 1617278914, "question_id": 51294951, "link": "https://stackoverflow.com/questions/51294951/python-ctypes-opengl-functions-loading-error-oserror-exception-access-viola", "title": "python - ctypes opengl functions loading error (OSError: exception: access violation writing 0x0000000000000000)", "body": "<p>Im getting an error:</p>\n<pre><code>OSError: exception: access violation writing 0x0000000000000000\n</code></pre>\n<p>While trying to load an opengl function with python <code>ctypes</code>,</p>\n<pre><code>from ctypes import *\ngl = windll.opengl32\nget_proc_addr_prototype = WINFUNCTYPE(WINFUNCTYPE(c_uint), c_char_p)\nget_proc_addr_paramflags = (1, &quot;Arg1&quot;),\nget_proc_addr = get_proc_addr_prototype((&quot;wglGetProcAddress&quot;, gl), get_proc_addr_paramflags)\nglCreateProgram = get_proc_addr(c_char_p(b&quot;glCreateProgram&quot;))\nglCreateProgram()\n</code></pre>\n<p>I thought it's because i haven't created an opengl context, so i ran this code:</p>\n<pre><code>from ctypes import *\ngl = windll.opengl32\ngl.glClear(0x00004000)    #    GL_COLOR_BUFFER_BIT = 0x00004000\n</code></pre>\n<p>which worked, but trying this way:</p>\n<pre><code>from ctypes import *\ngl = windll.opengl32\nget_proc_addr_prototype = WINFUNCTYPE(WINFUNCTYPE(None, c_uint), c_char_p)\nget_proc_addr_paramflags = (1, &quot;Arg1&quot;),\nget_proc_addr = get_proc_addr_prototype((&quot;wglGetProcAddress&quot;, gl), get_proc_addr_paramflags)\nglClear = wgl_get_proc_addr(c_char_p(b&quot;glClear&quot;))\nglClear(0x00004000)    #    GL_COLOR_BUFFER_BIT = 0x00004000\n</code></pre>\n<p>causes the same error.</p>\n"}, {"tags": ["python", "tensorflow", "neural-network"], "comments": [{"owner": {"reputation": 1770, "user_id": 6470853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234c3864089d31c88536efafde43905?s=128&d=identicon&r=PG&f=1", "display_name": "syltruong", "link": "https://stackoverflow.com/users/6470853/syltruong"}, "edited": false, "score": 0, "creation_date": 1531447569, "post_id": 51294885, "comment_id": 89609698, "body": "Hi Lucas, welcome to SO! If any of the replies below answered your question, according to the way this site works, you would upvote/mark as answer one or several replies below. If your question was not answered, please provide more details by either commenting or editing your question."}], "answers": [{"tags": [], "owner": {"reputation": 1770, "user_id": 6470853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234c3864089d31c88536efafde43905?s=128&d=identicon&r=PG&f=1", "display_name": "syltruong", "link": "https://stackoverflow.com/users/6470853/syltruong"}, "is_accepted": false, "score": 0, "last_activity_date": 1531348148, "last_edit_date": 1592644375, "creation_date": 1531348148, "answer_id": 51295023, "question_id": 51294885, "link": "https://stackoverflow.com/questions/51294885/modifying-neural-network-weights-using-estimators-in-tensorflow/51295023#51295023", "title": "Modifying Neural Network weights using estimators in tensorflow", "body": "<p>My best guess is that you are looking for <code>tf.assign</code> (from <a href=\"https://www.tensorflow.org/api_docs/python/tf/assign\" rel=\"nofollow noreferrer\">here</a>) to assign values to your <code>Variable</code> tensors.</p>\n<p>According to the docs:</p>\n<blockquote>\n<p>Update 'ref' by assigning 'value' to it.</p>\n<p>This operation outputs a Tensor that holds the new value of 'ref' after the value has been assigned. This makes it easier to chain operations that need to use the reset value.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 10067283, "user_type": "registered", "profile_image": "https://graph.facebook.com/1073552502796258/picture?type=large", "display_name": "Lucas Klein Draghetti", "link": "https://stackoverflow.com/users/10067283/lucas-klein-draghetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531348148, "creation_date": 1531347241, "question_id": 51294885, "link": "https://stackoverflow.com/questions/51294885/modifying-neural-network-weights-using-estimators-in-tensorflow", "title": "Modifying Neural Network weights using estimators in tensorflow", "body": "<p>I need to modify the weight values during the execution, more specifically between the compute_gradients() and apply_gradients() functions. I was able to modify the gradients themselves, but i could not change the weights.</p>\n\n<p>I'm using the tutorial for the Iris NN in tensorflow:\n<a href=\"https://github.com/tensorflow/models/blob/master/samples/core/get_started/custom_estimator.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/models/blob/master/samples/core/get_started/custom_estimator.py</a> , the only difference being that i changed the minimize() function for the compute_gradients() and the apply_gradients() function.</p>\n\n<pre><code>grads_and_vars = optimizer.compute_gradients(loss)\n// some way to change the weights\ntrain_op = optimizer.apply_gradients(grads_and_vars, global_step=tf.train.get_global_step())\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "arrays", "scheme", "racket"], "answers": [{"comments": [{"owner": {"reputation": 15758, "user_id": 90559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9ca8274294ea39ea6d92617be7cb9bb?s=128&d=identicon&r=PG", "display_name": "John Clements", "link": "https://stackoverflow.com/users/90559/john-clements"}, "edited": false, "score": 0, "creation_date": 1531352438, "post_id": 51294980, "comment_id": 89568549, "body": "OP asked about constant-time array reference--list-tail is not helpful in this regard."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9588242"}, "reply_to_user": {"reputation": 15758, "user_id": 90559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9ca8274294ea39ea6d92617be7cb9bb?s=128&d=identicon&r=PG", "display_name": "John Clements", "link": "https://stackoverflow.com/users/90559/john-clements"}, "edited": false, "score": 0, "creation_date": 1531354186, "post_id": 51294980, "comment_id": 89568868, "body": "Ah, I didn&#39;t know.  Makes sense, however"}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "edited": false, "score": 1, "creation_date": 1531426851, "post_id": 51294980, "comment_id": 89604304, "body": "You can delete your own answer. No shame in it at all."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9588242"}, "is_accepted": false, "score": 0, "last_activity_date": 1531354203, "last_edit_date": 1531354203, "creation_date": 1531347835, "answer_id": 51294980, "question_id": 51294880, "link": "https://stackoverflow.com/questions/51294880/racket-o1-array-indexing-like-pythons-numpy/51294980#51294980", "title": "racket: O(1) array indexing like python&#39;s numpy?", "body": "<h1>EDIT: see accepted answer</h1>\n\n<p>For vanilla lists, you can do</p>\n\n<pre><code>(list-tail lst pos)\n</code></pre>\n\n<p>see also: <a href=\"https://docs.racket-lang.org/reference/pairs.html\" rel=\"nofollow noreferrer\">https://docs.racket-lang.org/reference/pairs.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 646, "user_id": 6565511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOn0U.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6565511/nathan"}, "edited": false, "score": 0, "creation_date": 1531348309, "post_id": 51294989, "comment_id": 89567598, "body": "@frank Ha, didn&#39;t even notice that. IIRC, somewhere else the docs talk about how the difference between typed and untyped arrays (or arrays in untyped Racket, which are of course always untyped) is comparable to the difference between NumPy arrays and lists-of-lists in Python."}, {"owner": {"reputation": 646, "user_id": 6565511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOn0U.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6565511/nathan"}, "edited": false, "score": 0, "creation_date": 1531348473, "post_id": 51294989, "comment_id": 89567643, "body": "It also says &quot;For now, if you need speed, use the typed/racket language.&quot;  Does this apply to many operations, or just ones in the &quot;array&quot; library?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 646, "user_id": 6565511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOn0U.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6565511/nathan"}, "edited": false, "score": 1, "creation_date": 1531348643, "post_id": 51294989, "comment_id": 89567681, "body": "@frank I&#39;m not that current on Racket, but (based on an educated guess plus faulty memories of out-of-date information\u2026) <i>many</i> things are optimized pretty nicely in untyped racket, but <i>some</i> things are not, and some of those are pretty hard, so that may well be true for a long time. (And arrays are probably one of the harder ones\u2014there&#39;s a reason NumPy is one of the few places in Python where you&#39;re expected to declare value types in advance\u2026)"}, {"owner": {"reputation": 15758, "user_id": 90559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9ca8274294ea39ea6d92617be7cb9bb?s=128&d=identicon&r=PG", "display_name": "John Clements", "link": "https://stackoverflow.com/users/90559/john-clements"}, "reply_to_user": {"reputation": 646, "user_id": 6565511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOn0U.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6565511/nathan"}, "edited": false, "score": 1, "creation_date": 1531352607, "post_id": 51294989, "comment_id": 89568584, "body": "@frank there are specific elements of the Array library that can perform very badly when not using Typed Racket. This would not likely be the case for the more basic &#39;vector&#39;, which provides constant-time access to a linear array, and should perform just fine in standard Racket. Since vectors are not designed as multi-dimensional arrays, you&#39;d have to do row/column arithmetic as e.g. in C."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1531348038, "last_edit_date": 1531348038, "creation_date": 1531347887, "answer_id": 51294989, "question_id": 51294880, "link": "https://stackoverflow.com/questions/51294880/racket-o1-array-indexing-like-pythons-numpy/51294989#51294989", "title": "racket: O(1) array indexing like python&#39;s numpy?", "body": "<p>The whole point of using <a href=\"https://docs.racket-lang.org/math/array.html\" rel=\"nofollow noreferrer\">Arrays</a> instead of (linked) lists is that you can random-access index them in constant time. But Racket Arrays provide a lot more than that, including Python-ish slicing, and NumPy-ish array-wide operations. The syntax isn't quite as concise or (at least in my opinion) as nice as in Python, but the ideas are the same.</p>\n\n<p>You really need to read the whole chapter to understand the best way to write your code, or you're going to end up doing the same kind of thing as if you wrote Python code that used NumPy but then looped over <code>range(len(arr))</code> all the time.</p>\n\n<p>But to answer your direct question, the Python/NumPy expression:</p>\n\n<pre><code>arr[2, 3]\n</code></pre>\n\n<p>\u2026 is written in Racket as:</p>\n\n<pre><code>(array-ref arr #(2, 3))\n</code></pre>\n\n<p>The Python expression:</p>\n\n<pre><code>arr[2][3]\n</code></pre>\n\n<p>\u2026 is written as two nested <code>array-ref</code> calls. But then if <code>arr</code> is an actual 2D array (e.g., from NumPy), you shouldn't have been writing it as two indexing expressions in Python any more than you should in Racket, so the fact that it's more verbose isn't really a bad thing.</p>\n\n<p>Either way, it has the same constant-time lookup.</p>\n"}], "owner": {"reputation": 646, "user_id": 6565511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOn0U.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6565511/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 51294989, "answer_count": 2, "score": 0, "last_activity_date": 1531354203, "creation_date": 1531347210, "last_edit_date": 1531347347, "question_id": 51294880, "link": "https://stackoverflow.com/questions/51294880/racket-o1-array-indexing-like-pythons-numpy", "title": "racket: O(1) array indexing like python&#39;s numpy?", "body": "<p>I'm using arrays of picture (2-D array) and model (3-D array) data in python for an application where I'm modeling the human body in 3 dimensions.  I would like to rewrite the code in Lisp, specifically Racket,</p>\n\n<p>but I'm wondering how succinct expressions in numpy indexing, ie. <code>arr[2][3]</code> will be expressed in Lisp.  I could write a recursive function that expands to <code>(car (car ... (car list))))</code> or <code>(cdr (cdr ... (cdr list))))</code>, but this seems inefficient.  Is there a way to get <code>O(1)</code> access time in a Lisp list, vector, or array?</p>\n\n<p>ie.</p>\n\n<pre><code>arr[1,2] = 1\n</code></pre>\n\n<p>should be done in racket how?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1531347073, "post_id": 51294775, "comment_id": 89567239, "body": "Why store minutes, hours, etc. at all? Just store the seconds, and calculate minutes, hours etc. when needed, using simple division by 60, 3600, etc."}, {"owner": {"reputation": 1, "user_id": 10067332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OK_sp_58PzE/AAAAAAAAAAI/AAAAAAAAAbY/DXlx_X4iNOk/photo.jpg?sz=128", "display_name": "Mac", "link": "https://stackoverflow.com/users/10067332/mac"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1531348087, "post_id": 51294775, "comment_id": 89567554, "body": "so that i can later add days, months and years, even moon phases. I am in essence creating a calendar initiated from epoch but running about 25x faster, and would need to do check on the current time, day, month etc."}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531348616, "post_id": 51294775, "comment_id": 89567676, "body": "Sorry, I never done anything like this but is there a reason you aren&#39;t using datetime? For instance, current_time = (datetime.datetime.now() - start_time)?"}, {"owner": {"reputation": 1, "user_id": 10067332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OK_sp_58PzE/AAAAAAAAAAI/AAAAAAAAAbY/DXlx_X4iNOk/photo.jpg?sz=128", "display_name": "Mac", "link": "https://stackoverflow.com/users/10067332/mac"}, "edited": false, "score": 0, "creation_date": 1531350620, "post_id": 51294775, "comment_id": 89568123, "body": "I used seconds = int(time.time()) as its the amount of seconds that passed since 1st jan 1970 (i think) and gives a reference point for the other calculations"}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1531382290, "post_id": 51294775, "comment_id": 89577207, "body": "But even then you can calculate those when needed. Just have some methods <code>get_day</code> that calculates the current day from the elapsed seconds, etc. Much simpler this way."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10028504"}, "is_accepted": false, "score": 1, "last_activity_date": 1531348262, "creation_date": 1531348262, "answer_id": 51295040, "question_id": 51294775, "link": "https://stackoverflow.com/questions/51294775/how-to-increment-data-and-time-in-a-for-loop/51295040#51295040", "title": "How to increment data and time in a for loop", "body": "<p>Just use every second to increment the proper time value:</p>\n\n<pre><code>for var in range (gseconds):\n    count += 1\n    if count &gt;= 60:\n            gmins += 1\n    if gmins &gt;= 3600:\n            ghours += 1\n    if ghours &gt;= (24 * 3600):\n            gdays += 1\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10067332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OK_sp_58PzE/AAAAAAAAAAI/AAAAAAAAAbY/DXlx_X4iNOk/photo.jpg?sz=128", "display_name": "Mac", "link": "https://stackoverflow.com/users/10067332/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531370394, "creation_date": 1531346521, "last_edit_date": 1531370394, "question_id": 51294775, "link": "https://stackoverflow.com/questions/51294775/how-to-increment-data-and-time-in-a-for-loop", "title": "How to increment data and time in a for loop", "body": "<p>I am trying to create a game time that would keep counting on even if you werent activly in-game, this game world also runs faster and a bit differently.</p>\n\n<p>so i'm setting up an epoch as the refernce to do all the calculations.</p>\n\n<p>I will have to, say increment game minutes for every 60 game seconds, and game hours for every 60 game mins and so on, I'm just a lil stuck on the increment part, can any one help?</p>\n\n<pre><code>import time\n\n#Earth Time\nseconds = int(time.time())\nmins = seconds / 60\nhours = mins/ 60\ndays = hours / 24\nyears = days / 365\n\nprint(\"Seconds:\",seconds)\nprint(\"Mins:\",mins)\nprint(\"Hours:\",hours)\nprint(\"Days:\",days)\nprint(\"Years:\",years)\n\n#Game Time\ngseconds = seconds * 25\ngmins = 0\nghours = 0\ngdays = 0\ngyears = 0\n\nprint(\"GSeconds:\",gseconds)\nprint(\"GMins:\",gmins)\nprint(\"GHours:\",ghours)\nprint(\"GDays:\",gdays)\nprint(\"GYears:\",gyears)\n\ncount = 0\n\nfor var in gseconds: #stuck here\n        count = count +1\n\nprint(count)\n</code></pre>\n\n<p>something like:</p>\n\n<pre><code>for var in range (gseconds): #stuck here\n        count = count +1\n        if count &gt;=60:\n                gmins= gmins +1\n                count = 0\n        if gmins &gt;= 60:\n                ghours = ghours +1\n                gmins = 0\n        if ghours &gt;= 24:\n                gdays = gdays +1\n</code></pre>\n"}, {"tags": ["python", "for-loop", "iterator", "generator"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1531346579, "post_id": 51294769, "comment_id": 89567106, "body": "iterators <i>are iterables</i>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7517467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5429ff1b47c55fe8a4be5d2650c1457?s=128&d=identicon&r=PG&f=1", "display_name": "ODScience", "link": "https://stackoverflow.com/users/7517467/odscience"}, "edited": false, "score": 0, "creation_date": 1531347153, "post_id": 51294794, "comment_id": 89567262, "body": "then why bother using iter(range(10)) in the generator example in the hyperlink?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 33, "user_id": 7517467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5429ff1b47c55fe8a4be5d2650c1457?s=128&d=identicon&r=PG&f=1", "display_name": "ODScience", "link": "https://stackoverflow.com/users/7517467/odscience"}, "edited": false, "score": 0, "creation_date": 1531347533, "post_id": 51294794, "comment_id": 89567390, "body": "@OpticalDataScience: because the PEP documents that the internal workings of the generator expression implementation will create an iterator <i>before</i> calling the generator function object. The actual implementation doesn&#39;t use a <code>for</code> loop, it generates bytecode that is roughly equivalent."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 33, "user_id": 7517467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5429ff1b47c55fe8a4be5d2650c1457?s=128&d=identicon&r=PG&f=1", "display_name": "ODScience", "link": "https://stackoverflow.com/users/7517467/odscience"}, "edited": false, "score": 0, "creation_date": 1531347607, "post_id": 51294794, "comment_id": 89567418, "body": "@OpticalDataScience: this matters when you use that generator expression at a later point in your code. If the <code>iter()</code> call fails, it&#39;ll fail at the point where the generator expression is defined, not where you eventually iterate over it."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 6, "last_activity_date": 1531347788, "last_edit_date": 1531347788, "creation_date": 1531346647, "answer_id": 51294794, "question_id": 51294769, "link": "https://stackoverflow.com/questions/51294769/iter-range-in-for-loop-python/51294794#51294794", "title": "iter ,range in for loop python", "body": "<p>Iterators <em>are iterables too</em>. <code>for</code> calls <code>iter()</code> on the object it iterates over, and if you already have an iterator, then that produces a reference to the same object. This is by design.</p>\n\n<p>From the <a href=\"https://docs.python.org/3/glossary.html#term-iterator\" rel=\"noreferrer\"><code>iterator</code> entry in the Python glossary</a>:</p>\n\n<blockquote>\n  <p>Iterators are required to have an <code>__iter__()</code> method that returns the iterator object itself <strong>so every iterator is also iterable</strong> and may be used in most places where other iterables are accepted.</p>\n</blockquote>\n\n<p><em>Bold emphasis mine</em>.</p>\n\n<p>From the same document, on the term <a href=\"https://docs.python.org/3/glossary.html#term-iterable\" rel=\"noreferrer\"><code>iterable</code></a>:</p>\n\n<blockquote>\n  <p>When using iterables, it is usually not necessary to call <code>iter()</code> or deal with iterator objects yourself. The <code>for</code> statement does that automatically for you, creating a temporary unnamed variable to hold the iterator for the duration of the loop.</p>\n</blockquote>\n\n<p>and from the <a href=\"https://docs.python.org/3/library/stdtypes.html#typeiter\" rel=\"noreferrer\"><em>Iterator types</em> section of the standard types document</a>:</p>\n\n<blockquote>\n  <p>The iterator objects themselves are required to support the following two methods, which together form the <em>iterator protocol</em>:</p>\n\n<pre><code>iterator.__iter__()\n</code></pre>\n  \n  <p>Return the iterator object itself. <strong>This is required to allow both containers and iterators to be used with the <code>for</code> and <code>in</code> statements.</strong> </p>\n</blockquote>\n\n<p><em>Bold emphasis mine</em>.</p>\n\n<p>So when you use <code>for ... in iter(range(...))</code> instead of <code>for ... in range()</code>, you make an extra call to <code>iter()</code> that's basically redundant, as <code>for</code> already makes that call itself.</p>\n\n<p>But you <em>can</em> use <code>iter()</code> <em>before</em> you use a <code>for</code> loop to keep a reference to the iterator; so you could use it to advance to the next value <em>elsewhere</em>, in coordination with the <code>for</code> loop:</p>\n\n<pre><code>&gt;&gt;&gt; range_iter = iter(range(10))\n&gt;&gt;&gt; for i in range_iter:\n...     print('for loop produced', i)\n...     if i % 4 == 0:\n...         j = next(range_iter)\n...         print('But we can advance the iterator manually, too:', j)\n...\nfor loop produced 0\nBut we can advance the iterator manually, too: 1\nfor loop produced 2\nfor loop produced 3\nfor loop produced 4\nBut we can advance the iterator manually, too: 5\nfor loop produced 6\nfor loop produced 7\nfor loop produced 8\nBut we can advance the iterator manually, too: 9\n</code></pre>\n\n<p>In the PEP, in the <a href=\"https://www.python.org/dev/peps/pep-0289/#the-details\" rel=\"noreferrer\">detail section</a>, the code example there uses an <code>iter()</code> call <em>before</em> calling the generator function, because that <code>iter()</code> call could potentially raise an exception. You'd want that exception to be raised when defining the generator expression, not later on when you try to iterate over the generator expression.</p>\n\n<p>Or put concretely, the following code fails on the first line, not during looping:</p>\n\n<pre><code>gen = (x ** 2 for x in 1)  # 1 is not an iterable\nfor i in gen: print(i)\n</code></pre>\n\n<p>If the implementation did not call <code>iter()</code> <em>first</em>, then only when the <code>for</code> loop executes would there be an exception, and that would be confusing because the <code>gen</code> reference could have been created in any number of places in the code, really.</p>\n"}], "owner": {"reputation": 33, "user_id": 7517467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5429ff1b47c55fe8a4be5d2650c1457?s=128&d=identicon&r=PG&f=1", "display_name": "ODScience", "link": "https://stackoverflow.com/users/7517467/odscience"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3912, "favorite_count": 0, "accepted_answer_id": 51294794, "answer_count": 1, "score": 0, "last_activity_date": 1531347788, "creation_date": 1531346496, "last_edit_date": 1531346582, "question_id": 51294769, "link": "https://stackoverflow.com/questions/51294769/iter-range-in-for-loop-python", "title": "iter ,range in for loop python", "body": "<p>I thought the \"for in\" statement takes in iterables not iterators, but somehow the following codes works fine. I am confused. Actually, I was looking at the generator example at :\n<a href=\"https://www.python.org/dev/peps/pep-0289/\" rel=\"nofollow noreferrer\">https://www.python.org/dev/peps/pep-0289/</a></p>\n\n<pre><code>&gt;&gt;&gt; for i in range(10):\n    print(i)\n\n\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n&gt;&gt;&gt; for i in iter(range(10)):\n    print(i)\n\n\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Anyone can explain what happened when using iter(range(10)) in the for loop?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1128, "user_id": 1952282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/857b0ee320c8b9a9f6043e58fdef55d5?s=128&d=identicon&r=PG", "display_name": "Bayko", "link": "https://stackoverflow.com/users/1952282/bayko"}, "edited": false, "score": 0, "creation_date": 1531347161, "post_id": 51294765, "comment_id": 89567266, "body": "<a href=\"https://stackoverflow.com/questions/48548878/psycopg2-dataerror-invalid-input-syntax-for-integer-test-getting-error-when\" title=\"psycopg2 dataerror invalid input syntax for integer test getting error when\">stackoverflow.com/questions/48548878/&hellip;</a>"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1531350240, "post_id": 51294765, "comment_id": 89568043, "body": "If <code>null</code> is acceptable, why not add a new <code>fk</code> field instead of modifying the existing one?"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531346470, "creation_date": 1531346470, "question_id": 51294765, "link": "https://stackoverflow.com/questions/51294765/how-to-change-django-model-with-content-in-the-database", "title": "How to change Django model with content in the database", "body": "<p>I have a model with a <code>CharField</code> that has a choices set, but I need to change the field to a <code>ForeignKey</code> field. I have made the changes but, when I make the migration, I got an error saying <code>django.db.utils.DataError: invalid input syntax for integer: \"GRAND_TOURISM\"</code>, that I realize means that the current content of the field doesn't match the new foreign reference constraint.</p>\n\n<p>Is there any way I can instruct Django to change current values to Null when migrating?</p>\n"}, {"tags": ["python", "sockets", "subprocess", "stdout", "popen"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531346648, "post_id": 51294742, "comment_id": 89567129, "body": "Can you remove all the irrelevant stuff and give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can run and debug your code?"}, {"owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531346950, "post_id": 51294742, "comment_id": 89567206, "body": "righto - done as asked"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347083, "post_id": 51294742, "comment_id": 89567241, "body": "OK, I assume you&#39;ve got the obvious imports at the top, plus <code>import os as oss</code> (as well as <code>import os</code>) and <code>import subprocess as sb</code>?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347147, "post_id": 51294742, "comment_id": 89567260, "body": "If so, when I run this code, in Python 2.7, 3.6, or 3.7, on macOS and Ubuntu, it works."}, {"owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347170, "post_id": 51294742, "comment_id": 89567270, "body": "yes - have sorry forgot to add them, I will add now. don&#39;t forget sys"}, {"owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347267, "post_id": 51294742, "comment_id": 89567293, "body": "Thats.... Weird.. Windows it does not work, Ubuntu 14.04 and 16.04 and nothing. Centos neither."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347482, "post_id": 51294742, "comment_id": 89567374, "body": "I suspect your problem is with buffering. You&#39;re using the default <code>buffering</code> for the pipes, and also piping the output to a default-buffered binary file, and there&#39;s nobody flushing any of that anywhere. So there&#39;s no guarantee that it&#39;ll show up at any particular time until close, not even if you wait 20 seconds instead of 0.5. You could fix this by removing all the buffering everywhere\u2026 but why are you even writing to a file to read from it? Why not just read off the pipe?"}, {"owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347503, "post_id": 51294742, "comment_id": 89567383, "body": "Right, Ah, forgot to add, the python file I need to run is a socket server, so the script has a While loop, I tied it without, and and it works."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347556, "post_id": 51294742, "comment_id": 89567404, "body": "I don&#39;t know what you mean by that last comment. But if there&#39;s something you can add to your example code to make it reproduce the error you&#39;re looking to debug, please do that."}, {"owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531347687, "post_id": 51294742, "comment_id": 89567447, "body": "Right, Sorry I did not refresh, The code has a While Loop in it, so your above comment makes scene, it only does it on exit. I tried adding sys.stdout.flush() but that does not work could, you add an example on how to fix it?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531348456, "post_id": 51294742, "comment_id": 89567639, "body": "<code>sys.stdout.flush</code> isn&#39;t going to help, because the relevant buffer isn&#39;t on <code>sys.stdout</code>, it&#39;s either on <code>writer</code>, or on Python&#39;s side of the pipe, or on the pipe itself. You really need to make both the <code>Popen</code> and <code>writer</code> unbuffered. Or, as I said, just stop using a file in the first place, and the problem will not exist to be solved."}, {"owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531398822, "post_id": 51294742, "comment_id": 89588148, "body": "Right @abarnert I&#39;ve done, that I&#39;ve moved from file to the pipe stdout, however, i&#39;ve come back to the error, that made me move to a file in the first place, it just blocks it."}], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "is_accepted": true, "score": 1, "last_activity_date": 1531401763, "creation_date": 1531401763, "answer_id": 51306846, "question_id": 51294742, "link": "https://stackoverflow.com/questions/51294742/python-popen-stdout-not-returning-back-when-running-python/51306846#51306846", "title": "Python POpen Stdout not returning back when running python", "body": "<p>Fixing only took an all nigher and some reading</p>\n\n<p>I would like to thank sarge. A great module!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import sarge\nimport time\nimport sys\n\ncmd = sarge.run(\"python3 test.py\",async_=True,stdout=sarge.Capture(buffer_size=1))\nprint(\"Hello World\")\nwhile True:\n  time.sleep(0.5)\n  sys.stdout.write(\".\" + str(cmd.stdout.read()))\n  sys.stdout.flush()\n</code></pre>\n\n<p>The code can be modifed to get rid of the <code>b''</code> and the <code>.</code> </p>\n\n<p>Sam</p>\n\n<hr>\n\n<p>Oh thanks for the question down-vote, you have made my already struggling rep go down back to 1. Thanks.</p>\n"}, {"tags": [], "owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "is_accepted": false, "score": 0, "last_activity_date": 1531402529, "creation_date": 1531402529, "answer_id": 51307109, "question_id": 51294742, "link": "https://stackoverflow.com/questions/51294742/python-popen-stdout-not-returning-back-when-running-python/51307109#51307109", "title": "Python POpen Stdout not returning back when running python", "body": "<p><code>process.poll()</code> returns something other than None as soon as the subprocess finishes executing.  That says <em>absolutely nothing</em> about whether or not you've read all of the subprocess's output!  You need to keep calling <code>process.stdout.readline()</code> in a loop until it returns an empty string - in fact that's the only loop you need in this case, since <code>process.poll()</code> isn't giving you any information that you're actually using.</p>\n"}], "owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 1, "accepted_answer_id": 51306846, "answer_count": 2, "score": -1, "last_activity_date": 1531402529, "creation_date": 1531346347, "last_edit_date": 1531350685, "question_id": 51294742, "link": "https://stackoverflow.com/questions/51294742/python-popen-stdout-not-returning-back-when-running-python", "title": "Python POpen Stdout not returning back when running python", "body": "<p><strong>READ UPDATE!!!</strong></p>\n\n<p>I'm having an issue getting output from a Python POpen from the subproccess module.</p>\n\n<p>It works fine on commands such as 'ls' , 'node' , and 'python3 -m pip install requests'.</p>\n\n<p>However When I run a simple python file, such as 'python3 test.py' that contains:</p>\n\n<pre><code>print(\"Hello World!\")\n</code></pre>\n\n<p>It does not output. Nor does it work with:</p>\n\n<pre><code>sys.stdout.write()\n</code></pre>\n\n<p>It runs the code, this can be proven by this code being put in test.py</p>\n\n<pre><code>f = open(\"text.txt\",\"w\")\nf.write(\"Hello :P\")\nf.close()\n</code></pre>\n\n<p>And it Writing to the file just fine.</p>\n\n<p>Here is the code extracted from the main file:</p>\n\n<pre><code>def executeCmd(cmd):\n    filename = \"cmdlog_{}.txt\".format(cmd.replace(\" \",\"-\").replace(\".\",\"-\").replace(\"/\",\"-\"))\n    with io.open(filename, 'wb') as writer, io.open(filename, 'rb', 1) as reader:\n        process = sb.Popen(cmd, stdout=writer,stderr=writer, cwd=oss.getcwd(),shell=True)\n        while process.poll() is None:\n            rd = reader.read()\n            sys.stdout.write(rd.decode(\"UTF-8\"))\n            time.sleep(0.1)\n        time.sleep(0.5)\n        rd = reader.read().decode(\"UTF-8\")\n        sys.stdout.write(rd)\n        time.sleep(0.5)\n        oss.remove(filename)\n</code></pre>\n\n<p>As Extra Info, That function is called as a thread, from another thread that revives data from a socket. Hence the the dictionary 'data' bellow and the send function above. </p>\n\n<pre><code>threading.Thread(target=proccessListen,args=([data[\"cmd\"],data[\"name\"]]),daemon=True).start()\n</code></pre>\n\n<p>I'm at my wits end here, with this issue occurring on multiple os's and machines.\nWith no fix yet found, and not related article a few hours worth of googling could not find, I request your help</p>\n\n<p>Thank in advance, Sam.</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong>\nAfter 1/2 hour of playing with code, and searching online to fix the new issue, I've hit a block again. </p>\n\n<p>Here is my new code:</p>\n\n<pre><code>import io\nimport sys\nimport os\nimport subprocess\nimport time\n\ndef executeCmd(cmd):\n    process = subprocess.Popen(cmd,stdout=subprocess.PIPE,stderr=subprocess.STDOUT,cwd=os.getcwd(),shell=True)\n    print(\"Started\")\n    while process.poll() is None:\n      line = process.stdout.readline()\n      sys.stdout.write(line)\n      #process.stdout.flush()\n      time.sleep(0.5)\n    print(\"Ended\")\n\nexecuteCmd(\"python3 test.py\")\n</code></pre>\n\n<p>And in test.py</p>\n\n<pre><code>print(\"Hello\")\ncount = 0\nimport time\nwhile True:\n  time.sleep(2)\n  count = count + 1\n  print(\"Output: {}\".format(count))\n</code></pre>\n\n<p>The Problem is that process.stdout.readline() blocks the code, meaning it can never read the output, but why. This is taken from a <a href=\"https://www.endpoint.com/blog/2015/01/28/getting-realtime-output-using-python\" rel=\"nofollow noreferrer\">forum page</a> and modified. Neither Worked, Both with the same issue, I've searched and gone through many other stack overflow questions, and none of the solutions worked.I also tried something with an non-blocking flag (I'm not sure of what I was doing). It worked for others, but I got a OSERROR. Although that looks like a difficult route to take.</p>\n\n<p>Any help would be appreciated. </p>\n\n<p>Thanks Sam</p>\n"}, {"tags": ["python", "sql", "postgresql", "dataframe"], "comments": [{"owner": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "edited": false, "score": 0, "creation_date": 1531378658, "post_id": 51294721, "comment_id": 89575044, "body": "what part of your code doesn&#39;t work?"}, {"owner": {"reputation": 1, "user_id": 10067317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc718acd1970496571f85bbf09eed15?s=128&d=identicon&r=PG&f=1", "display_name": "Nisan Ku", "link": "https://stackoverflow.com/users/10067317/nisan-ku"}, "reply_to_user": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "edited": false, "score": 0, "creation_date": 1531392227, "post_id": 51294721, "comment_id": 89583746, "body": "I dindt get any Results by reading --&gt;data = pd.read_sql_table(&#39;table&#39;,conn)"}], "answers": [{"tags": [], "owner": {"reputation": 965, "user_id": 5973377, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--LmmMQqGfQQ/AAAAAAAAAAI/AAAAAAAADlA/RLmvq8IYjV8/photo.jpg?sz=128", "display_name": "Nishant Patel", "link": "https://stackoverflow.com/users/5973377/nishant-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1531831808, "creation_date": 1531831808, "answer_id": 51381843, "question_id": 51294721, "link": "https://stackoverflow.com/questions/51294721/dataframe-to-postgresql/51381843#51381843", "title": "DataFrame to PostgreSQL", "body": "<p>I am not sure why you used context manager here for sqlalchemy engine connect, as pandas sql read can be done inline like:</p>\n\n<pre><code>engine = create_engine(conn_str, echo='debug')\ndata = pd.read_sql_table('table', engine)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10067317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc718acd1970496571f85bbf09eed15?s=128&d=identicon&r=PG&f=1", "display_name": "Nisan Ku", "link": "https://stackoverflow.com/users/10067317/nisan-ku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531879708, "creation_date": 1531346258, "last_edit_date": 1531879708, "question_id": 51294721, "link": "https://stackoverflow.com/questions/51294721/dataframe-to-postgresql", "title": "DataFrame to PostgreSQL", "body": "<pre><code>with open('configLocalDS3.json') as f:\n    conf = json.load(f)\n\n    conn_str ='postgresql://%s:%s@localhost:5432/%s'%(conf[\"user\"], \n    conf[\"passw\"],conf[\"database\"])\n    engine = create_engine(conn_str, echo='debug')\n\n    if not engine.has_table(\"table\"):\n        df_crimes.to_sql(name='table',index=True, \n        index_label='index',con=engine,if_exists='replace')\n    else:\n        print(\"table already exists\")\n\n    #Daten aus der Datenbank ausgeben\n\n    with engine.connect() as conn, conn.begin():\n        data = pd.read_sql_table('table',conn) \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zr2gG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zr2gG.png\" alt=\"enter image description here\"></a></p>\n\n<p>It does not work to write the data from the DataFrame to SQL; I don't get results by reading the SQL table.</p>\n"}, {"tags": ["python", "unicode", "python-2.x"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1531346214, "post_id": 51294678, "comment_id": 89566973, "body": "What version of Python are you using, and what platform are you on? And what encoding is that file <code>test</code> stored in?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531346366, "post_id": 51294678, "comment_id": 89567036, "body": "If you don&#39;t know how to answer the last part, if you&#39;re on Python 3, try this: <code>with open(filename,&#39;rb&#39;) as f: print(f.read())</code> and then show us the <code>b&#39;\u2026whatever\u2026&#39;</code> that gets printed out."}, {"owner": {"reputation": 1229, "user_id": 3916223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae66ded0b6a3f8ec8522661af9d964f0?s=128&d=identicon&r=PG&f=1", "display_name": "csunday95", "link": "https://stackoverflow.com/users/3916223/csunday95"}, "edited": false, "score": 0, "creation_date": 1531348256, "post_id": 51294678, "comment_id": 89567586, "body": "once you have the encoding, if it is non-standard you should open the file as binary (<code>open(filename, &#39;rb&#39;)</code>) and then use <code>.decode([encoding name])</code> on the read string"}, {"owner": {"reputation": 123, "user_id": 6794661, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21feaf40c3e314daa36821c52bd9b6c0?s=128&d=identicon&r=PG&f=1", "display_name": "connoraw", "link": "https://stackoverflow.com/users/6794661/connoraw"}, "edited": false, "score": 0, "creation_date": 1531348487, "post_id": 51294678, "comment_id": 89567648, "body": "Python 2.7.5, running Scientific Linux 7 (similar to red hat and centos). The encoding is: text/plain; charset=utf-8."}, {"owner": {"reputation": 123, "user_id": 6794661, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21feaf40c3e314daa36821c52bd9b6c0?s=128&d=identicon&r=PG&f=1", "display_name": "connoraw", "link": "https://stackoverflow.com/users/6794661/connoraw"}, "edited": false, "score": 0, "creation_date": 1531348523, "post_id": 51294678, "comment_id": 89567656, "body": "Also, when I do &quot;print(string)&quot; it prints properly: &quot;&#225;&#233;&#237;&#243;&#250;abcdefg&#231;&#235;&quot;. Only when I print char by char do I get the bad output."}, {"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "reply_to_user": {"reputation": 1229, "user_id": 3916223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae66ded0b6a3f8ec8522661af9d964f0?s=128&d=identicon&r=PG&f=1", "display_name": "csunday95", "link": "https://stackoverflow.com/users/3916223/csunday95"}, "edited": false, "score": 1, "creation_date": 1531377697, "post_id": 51294678, "comment_id": 89574580, "body": "@csunday95 what is the advantage of your proposed method over <code>open(filename, encoding=[encoding_name])</code>?"}, {"owner": {"reputation": 1229, "user_id": 3916223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae66ded0b6a3f8ec8522661af9d964f0?s=128&d=identicon&r=PG&f=1", "display_name": "csunday95", "link": "https://stackoverflow.com/users/3916223/csunday95"}, "reply_to_user": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1531379223, "post_id": 51294678, "comment_id": 89575358, "body": "@lenz Using the open() interface directly would also be appropriate in most cases, but with the binary mode one could inspect a file header that indicates encoding if it&#39;s unknown at the time of opening e.g. python source files that indicates the encoding at the top"}], "answers": [{"comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1531347180, "post_id": 51294821, "comment_id": 89567273, "body": "The question is about reading Unicode from a file. Your answer is about including Unicode characters in your source code. Two totally different things."}, {"owner": {"reputation": 301, "user_id": 9110764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d1fd62ac9868d6a97fc870b347dc7d?s=128&d=identicon&r=PG", "display_name": "Tuxpilgrim", "link": "https://stackoverflow.com/users/9110764/tuxpilgrim"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1531484048, "post_id": 51294821, "comment_id": 89624669, "body": "I&#39;m sorry, i mistook the question and answered it in a misguided way."}], "tags": [], "owner": {"reputation": 301, "user_id": 9110764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d1fd62ac9868d6a97fc870b347dc7d?s=128&d=identicon&r=PG", "display_name": "Tuxpilgrim", "link": "https://stackoverflow.com/users/9110764/tuxpilgrim"}, "is_accepted": false, "score": -2, "last_activity_date": 1531346786, "last_edit_date": 1592644375, "creation_date": 1531346786, "answer_id": 51294821, "question_id": 51294678, "link": "https://stackoverflow.com/questions/51294678/python-working-with-unicode-characters/51294821#51294821", "title": "Python: working with unicode characters", "body": "<p>This depends on the version of Python you are using:</p>\n<p><strong>1.</strong> For the python 2, there was no native support for Unicode characters, so it was necessary to leave explicit, with a header such as:</p>\n<pre><code># -*-coding:utf-8-*-\n</code></pre>\n<p><strong>2.</strong> For python 3 The support is native, as it says <a href=\"https://docs.python.org/3/howto/unicode.html#python-s-unicode-support\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>So the <code>UTF-8</code> encoding already has native support.</p>\n"}, {"tags": [], "owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "is_accepted": true, "score": 1, "last_activity_date": 1531372982, "creation_date": 1531372982, "answer_id": 51297865, "question_id": 51294678, "link": "https://stackoverflow.com/questions/51294678/python-working-with-unicode-characters/51297865#51297865", "title": "Python: working with unicode characters", "body": "<p>Your data is encoded, most likely as utf-8.  Utf-8 uses more than one byte to encode non-ascii characters, such as <code>\u00e1\u00e9\u00ed\u00f3\u00fa</code>.  Iterating over a string encoded as utf-8 yields the individual <em>bytes</em> that make up the string, rather than the <em>characters</em> that you are expecting.</p>\n\n<pre><code>&gt;&gt;&gt; s = '\u00e1\u00e9\u00ed\u00f3\u00faabcdefg\u00e7\u00eb'\n# There are 14 characters in s, but it contains 21 bytes\n&gt;&gt;&gt; len(s)\n21\n&gt;&gt;&gt; s\n'\\xc3\\xa1\\xc3\\xa9\\xc3\\xad\\xc3\\xb3\\xc3\\xbaabcdefg\\xc3\\xa7\\xc3\\xab'\n\n# The first \"character\" (actually, byte) is unprintable.\n&gt;&gt;&gt; print s[0]\n\ufffd\n# So is the second.\n&gt;&gt;&gt; print s[1]\n\ufffd\n# But together they make up a character.\n&gt;&gt;&gt; print s[0:2]\n\u00e1\n</code></pre>\n\n<p>So printing individual bytes doesn't work as expected.</p>\n\n<pre><code>&gt;&gt;&gt; for c in s:print c,\n... \n\ufffd \ufffd \ufffd \ufffd \ufffd \ufffd \ufffd \ufffd \ufffd \ufffd a b c d e f g \ufffd \ufffd \ufffd \ufffd\n</code></pre>\n\n<p>But decoding the string to unicode, then printing does.</p>\n\n<pre><code>&gt;&gt;&gt; for c in s.decode('utf-8'):print c,\n... \n\u00e1 \u00e9 \u00ed \u00f3 \u00fa a b c d e f g \u00e7 \u00eb\n</code></pre>\n\n<p>To make your code work as you expect, you need to decode the string you read from the file.  Change </p>\n\n<pre><code>string = fp.read().replace('\\n', '')\n</code></pre>\n\n<p>to</p>\n\n<pre><code>string = fp.read().replace('\\n', '').decode('utf-8')\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6794661, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21feaf40c3e314daa36821c52bd9b6c0?s=128&d=identicon&r=PG&f=1", "display_name": "connoraw", "link": "https://stackoverflow.com/users/6794661/connoraw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 51297865, "answer_count": 2, "score": 1, "last_activity_date": 1531373043, "creation_date": 1531345998, "last_edit_date": 1531373043, "question_id": 51294678, "link": "https://stackoverflow.com/questions/51294678/python-working-with-unicode-characters", "title": "Python: working with unicode characters", "body": "<p>I'm trying to learn how to work with Unicode in python.</p>\n\n<p>Let's say I have a file <code>test</code> containing Unicode characters:\n<code>\u00e1\u00e9\u00ed\u00f3\u00faabcdefg\u00e7\u00eb</code>\nI want to make a python script that prints out all the unique characters in the file. This is what I have:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport sys\n\ndef main():\n    if len(sys.argv) &lt; 2:\n        print(\"Argument required.\")\n        exit()\n    else:\n        filename = sys.argv[1]\n        with open(filename, \"r\") as fp:\n            string = fp.read().replace('\\n', '')\n        chars = set()\n        for char in string:\n            chars.add(char)\n        for char in chars:\n            sys.stdout.write(char)\n        print(\"\")\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>This doesn't print the Unicode characters properly:</p>\n\n<pre><code>$ ./unicode.py test\n\u2592a\u2592bedgf\u2592\u2592\u2592\u2592c\u2592\u2592\n</code></pre>\n\n<p>What is the correct way to do this, so that the characters print properly?</p>\n"}, {"tags": ["python", "django", "docker", "rabbitmq", "celery"], "comments": [{"owner": {"reputation": 1, "user_id": 8684712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9f3e3e9918589d95780c85ec5f614d4?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8684712/mark"}, "edited": false, "score": 0, "creation_date": 1531347101, "post_id": 51294661, "comment_id": 89567253, "body": "FYI I am using celery (4.1.0), amqp (2.2.1), Django (1.11), django-celery (3.2.1) and kombu (4.1.0)"}, {"owner": {"reputation": 1, "user_id": 8684712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9f3e3e9918589d95780c85ec5f614d4?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8684712/mark"}, "edited": false, "score": 0, "creation_date": 1531349225, "post_id": 51294661, "comment_id": 89567824, "body": "Another observation I had. Any tasks called from that celery.py file have the correct host as well. But if they are called from the autodiscover_tasks from a task.py in the web site with decorators, it doesn&#39;t appear to pull the config settings for the broker."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8684712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9f3e3e9918589d95780c85ec5f614d4?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8684712/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1531411277, "creation_date": 1531411277, "answer_id": 51310111, "question_id": 51294661, "link": "https://stackoverflow.com/questions/51294661/using-celery-how-do-i-post-rabbitmq-messages-to-another-docker-container/51310111#51310111", "title": "Using Celery, how do I post rabbitmq messages to another docker container?", "body": "<p>It appears I needed to instantiate app in my tasks.py file as well.</p>\n\n<p>Before</p>\n\n<pre><code>@task(name='func_name', bind=True)\ndef func_name(self, id)\n</code></pre>\n\n<p>After</p>\n\n<pre><code>app = Celery('celery', backend='amqp',\n             broker='amqp://user@mymachine.domain.com:5672//')\n@app.task(name='func_name', bind=True)\ndef func_name(self, id)\n</code></pre>\n\n<p>When these were imported into celery.py from the function autodiscover_tasks it loaded the app config. But when loaded from the web there was no reference to config until I added it, so it was using the default localhost.</p>\n"}], "owner": {"reputation": 1, "user_id": 8684712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9f3e3e9918589d95780c85ec5f614d4?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8684712/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531411277, "creation_date": 1531345893, "last_edit_date": 1531347926, "question_id": 51294661, "link": "https://stackoverflow.com/questions/51294661/using-celery-how-do-i-post-rabbitmq-messages-to-another-docker-container", "title": "Using Celery, how do I post rabbitmq messages to another docker container?", "body": "<p>It appears my celery workers launch and connect properly on the mymachine.domain.com:port where the rabbit mq resides in a separate docker container.</p>\n\n<p>However when I call the function apply_async from my web application it tries to connect on localhost:port even though it should be using the same django src/settings.py file which would also be mymachine.domain.com:port again.</p>\n\n<p>The only way I can get this to work is by setting the docker network_mode to 'host'. This is not an acceptable mode though for security reasons.</p>\n\n<p>Here is my celery.py file:</p>\n\n<pre><code>from celery import Celery\nfrom celery.schedules import crontab\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE','src.settings')\n\nimport django\ndjango.setup()\n\nfrom src.apps.main.tasks import cleanup, syncldap \n\napp = Celery('myappcelery', backend='amqp',\n# Expected  next line isn't even used because line with 'django.conf:settings' will override it with the config settings.\n\nbroker='amqp://user@mymachine.domain.com:5672//',                          include=['src.apps.appname.tasks'])\napp.config_from_object('django.conf:settings', \napp.autodiscover_tasks()\n</code></pre>\n\n<p>Here is my src.settings.py file settings:</p>\n\n<pre><code>CELERY_BROKER_URL = 'amqp://user:password@mymachine.domain.com:5672//'\nCELERY_RESULT_BACKEND = 'django-db'\n\nCELERY_ACCEPT_CONTENT = ['json']\nCELERY_TASK_SERIALIZER = 'json'\nCELERY_RESULT_SERIALIZER = 'json'\n\nCELERY_DEFAULT_QUEUE = 'celery'\n</code></pre>\n\n<p>I added a print statement to the following installed file file:\nsite-packages/kombu/connection.py</p>\n\n<p>In the function:</p>\n\n<pre><code>def default_channel(self):\n</code></pre>\n\n<p>I added this print statement:</p>\n\n<pre><code>print \"Connection %s\" % self.connect\n</code></pre>\n\n<p>From my celery workers I see this in the logs:</p>\n\n<pre><code>Connection &lt;bound method Connection.connect of &lt;Connection: amqp://&lt;user&gt;:**@mymachine.domain.com:5672// at 0x7fd1e3700450&gt;&gt;\n</code></pre>\n\n<p>But when I try to call apply_async I see the following message and it just hangs:</p>\n\n<pre><code>Connection &lt;bound method Connection.connect of &lt;Connection: amqp://&lt;user&gt;:**@localhost:5672// at 0x7fc01371bc50&gt;&gt;\n</code></pre>\n\n<p>Where localhost is the web application's docker container and will not properly connect to rabbit mq located on the host machine.  This explains why in host mode it works because then localhost:5672 is the same for rabbitmq and the web container. But in bridge mode, you cannot get to the host using localhost, that is why I specify the hostname in the configs. I am not sure why this is getting overwritten back to localhost.</p>\n\n<p>Also FYI when I ran the celery workers it was from the same machine with the same config files, and yet the print statement I added showed the correct host.</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1531345985, "post_id": 51294659, "comment_id": 89566889, "body": "is <code>roles</code> a dictionary here?"}, {"owner": {"reputation": 581, "user_id": 6431344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/962cd739d5933c6383141e9ccfecae9d?s=128&d=identicon&r=PG&f=1", "display_name": "bullybear17", "link": "https://stackoverflow.com/users/6431344/bullybear17"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1531346317, "post_id": 51294659, "comment_id": 89567013, "body": "roles is a dictionary yup"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1531346364, "post_id": 51294659, "comment_id": 89567035, "body": "So what are your dictionary values? According to your error message, they&#39;re integers."}, {"owner": {"reputation": 581, "user_id": 6431344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/962cd739d5933c6383141e9ccfecae9d?s=128&d=identicon&r=PG&f=1", "display_name": "bullybear17", "link": "https://stackoverflow.com/users/6431344/bullybear17"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1531346647, "post_id": 51294659, "comment_id": 89567128, "body": "i added the dictionary values to my original comment to help clarify"}, {"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1531348947, "post_id": 51294659, "comment_id": 89567764, "body": "<code>roles[&#39;User&#39;]</code> is an <code>int</code>, seemingly. Did you forget the second boolean element in the tuple for it?"}], "answers": [{"tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": false, "score": 0, "last_activity_date": 1531349171, "creation_date": 1531349171, "answer_id": 51295150, "question_id": 51294659, "link": "https://stackoverflow.com/questions/51294659/trouble-with-subscriptable-object-typeerror/51295150#51295150", "title": "Trouble with subscriptable object - TypeError:", "body": "<p>(Converting my comment to an answer)</p>\n\n<p>In your code, <code>roles['User']</code> is an <code>int</code>, seemingly. Did you forget the second boolean element in the tuple for it?</p>\n\n<p><code>(Permission.FOLLOW | Permission.COMMENT)</code>  is an  <code>int</code> -- not even a tuple with one element. You might want to change that to:</p>\n\n<pre><code>(Permission.FOLLOW | Permission.COMMENT, True) # Or False, however your case maybe.\n</code></pre>\n"}], "owner": {"reputation": 581, "user_id": 6431344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/962cd739d5933c6383141e9ccfecae9d?s=128&d=identicon&r=PG&f=1", "display_name": "bullybear17", "link": "https://stackoverflow.com/users/6431344/bullybear17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531349171, "creation_date": 1531345874, "last_edit_date": 1531346627, "question_id": 51294659, "link": "https://stackoverflow.com/questions/51294659/trouble-with-subscriptable-object-typeerror", "title": "Trouble with subscriptable object - TypeError:", "body": "<p>I'm trying to get the following block of code to work:</p>\n\n<pre><code>for r in roles:\n        role = Role.query.filter_by(name=r).first()\n        if role is None:\n            role = Role(name=r)\n        role.permissions = roles[r][0]\n        role.default = roles[r][1] \n        db.session.add(role)\n    db.session.commit()\n</code></pre>\n\n<p>However I'm getting the following:</p>\n\n<pre><code>role.permissions = roles[r][0]\nTypeError: 'int' object is not subscriptable\n</code></pre>\n\n<p>I tried to do str(roles[r][0] but that didn't work either... any ideas?</p>\n\n<p>Edit: Here is the Dictionary Code:</p>\n\n<pre><code>def insert_roles():\n    roles = {\n\n    'User': (Permission.FOLLOW |\n        Permission.COMMENT),\n\n    'Moderator': (Permission.FOLLOW |\n        Permission.COMMENT |\n        Permission.MODERATE_COMMENTS, True),\n\n    'Administrator': (0xff, False)\n    }\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "datetime", "dataframe"], "comments": [{"owner": {"reputation": 1350, "user_id": 4413370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWSa5.jpg?s=128&g=1", "display_name": "Jorge Torres", "link": "https://stackoverflow.com/users/4413370/jorge-torres"}, "edited": false, "score": 0, "creation_date": 1531345947, "post_id": 51294657, "comment_id": 89566881, "body": "Have you tried some code so far?"}, {"owner": {"reputation": 73, "user_id": 9418650, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MWQaqi9BYVE/AAAAAAAAAAI/AAAAAAAAAAU/7jvVexxRnxM/photo.jpg?sz=128", "display_name": "Naveen Raj B", "link": "https://stackoverflow.com/users/9418650/naveen-raj-b"}, "reply_to_user": {"reputation": 1350, "user_id": 4413370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWSa5.jpg?s=128&g=1", "display_name": "Jorge Torres", "link": "https://stackoverflow.com/users/4413370/jorge-torres"}, "edited": false, "score": 0, "creation_date": 1531346225, "post_id": 51294657, "comment_id": 89566982, "body": "yes i have tried by making the date variable as index and did the concatenation but it didnt give the output which i expected...."}, {"owner": {"reputation": 1350, "user_id": 4413370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWSa5.jpg?s=128&g=1", "display_name": "Jorge Torres", "link": "https://stackoverflow.com/users/4413370/jorge-torres"}, "edited": false, "score": 0, "creation_date": 1531346566, "post_id": 51294657, "comment_id": 89567102, "body": "Maybe you can post some code so we can help better?"}, {"owner": {"reputation": 73, "user_id": 9418650, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MWQaqi9BYVE/AAAAAAAAAAI/AAAAAAAAAAU/7jvVexxRnxM/photo.jpg?sz=128", "display_name": "Naveen Raj B", "link": "https://stackoverflow.com/users/9418650/naveen-raj-b"}, "reply_to_user": {"reputation": 1350, "user_id": 4413370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWSa5.jpg?s=128&g=1", "display_name": "Jorge Torres", "link": "https://stackoverflow.com/users/4413370/jorge-torres"}, "edited": false, "score": 0, "creation_date": 1531346723, "post_id": 51294657, "comment_id": 89567144, "body": "df.set_index(&#39;date&#39;,drop=True,inplace=True) ; df2 = pd.DataFrame(); df2[&#39;Count&#39;] = [50]; dat = pd.concat((df,df2),axis=0)"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531348170, "post_id": 51294657, "comment_id": 89567569, "body": "Can you post an expected input/output?"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9418650, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MWQaqi9BYVE/AAAAAAAAAAI/AAAAAAAAAAU/7jvVexxRnxM/photo.jpg?sz=128", "display_name": "Naveen Raj B", "link": "https://stackoverflow.com/users/9418650/naveen-raj-b"}, "edited": false, "score": 0, "creation_date": 1531376794, "post_id": 51295989, "comment_id": 89574186, "body": "its working...but i need to add multiple values in count variable"}, {"owner": {"reputation": 73, "user_id": 9418650, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MWQaqi9BYVE/AAAAAAAAAAI/AAAAAAAAAAU/7jvVexxRnxM/photo.jpg?sz=128", "display_name": "Naveen Raj B", "link": "https://stackoverflow.com/users/9418650/naveen-raj-b"}, "edited": false, "score": 0, "creation_date": 1533365132, "post_id": 51295989, "comment_id": 90328986, "body": "i had a issue wen i had a data with month level. Ex: im having the last value i.e nthindex in date format as 2018-07-01 and n-1th index as 2018-06-01 so the difference is 30 days and as per code im getting date as 2018-07-31. but i need the value as 2018-08-01. can u please sort out this issue"}, {"owner": {"reputation": 287, "user_id": 6711789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36862fc9d9408a094fd5924d93caadad?s=128&d=identicon&r=PG&f=1", "display_name": "Ravinder Karra", "link": "https://stackoverflow.com/users/6711789/ravinder-karra"}, "reply_to_user": {"reputation": 73, "user_id": 9418650, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MWQaqi9BYVE/AAAAAAAAAAI/AAAAAAAAAAU/7jvVexxRnxM/photo.jpg?sz=128", "display_name": "Naveen Raj B", "link": "https://stackoverflow.com/users/9418650/naveen-raj-b"}, "edited": false, "score": 0, "creation_date": 1533449210, "post_id": 51295989, "comment_id": 90345231, "body": "The logic here is looking previous data as 7 days, If data range changes then you need to write accordingly.   if weeks use following      df2[&#39;date&#39;] = pd.to_datetime(df.index.values[len(df)-1]) + pd.DateOffset(weeks=1)   if months use following      df2[&#39;date&#39;] = pd.to_datetime(df.index.values[len(df)-1]) + pd.DateOffset(months=1)"}], "tags": [], "owner": {"reputation": 287, "user_id": 6711789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36862fc9d9408a094fd5924d93caadad?s=128&d=identicon&r=PG&f=1", "display_name": "Ravinder Karra", "link": "https://stackoverflow.com/users/6711789/ravinder-karra"}, "is_accepted": true, "score": 1, "last_activity_date": 1531357240, "creation_date": 1531357240, "answer_id": 51295989, "question_id": 51294657, "link": "https://stackoverflow.com/questions/51294657/i-need-to-get-only-the-next-sequence-of-variable-in-timestamp-format/51295989#51295989", "title": "I need to get only the next sequence of variable in timestamp format", "body": "<pre><code>import pandas as pd\nimport datetime\n\ndf = pd.read_csv(\"ex1.csv\",\n                names=['count', 'date'],\n                index_col='date')\n\ndf2 = pd.DataFrame(); \ndf2['count'] = [50]; \ndf2['date'] = pd.to_datetime(df.index.values[len(df)-1]) + (     datetime.datetime.strptime(df.index.values[len(df)-1], \"%Y-%m-%d\") - datetime.datetime.strptime(df.index.values[len(df)-2], \"%Y-%m-%d\"))\ndf2.set_index('date',inplace=True) \ndat = pd.concat((df,df2))\nprint(dat)\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 9418650, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MWQaqi9BYVE/AAAAAAAAAAI/AAAAAAAAAAU/7jvVexxRnxM/photo.jpg?sz=128", "display_name": "Naveen Raj B", "link": "https://stackoverflow.com/users/9418650/naveen-raj-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 51295989, "answer_count": 1, "score": 0, "last_activity_date": 1531357240, "creation_date": 1531345857, "last_edit_date": 1531355690, "question_id": 51294657, "link": "https://stackoverflow.com/questions/51294657/i-need-to-get-only-the-next-sequence-of-variable-in-timestamp-format", "title": "I need to get only the next sequence of variable in timestamp format", "body": "<pre><code>#count    ,date\n98.000000, 2014-03-16\n\n267.000000, 2014-03-23\n\n298.000000, 2014-03-30\n\n313.000000, 2014-04-06\n\n225.000000, 2014-04-13\n\n226.000000 2014-04-20\n</code></pre>\n\n<p>I have two variables: one is count and other is date time with week sequence in it.</p>\n\n<p>When I concatenate the first variable with some values, I need to fill the date time variable by their sequence in the DataFrame.</p>\n"}, {"tags": ["python", "blender"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531346313, "post_id": 51294646, "comment_id": 89567009, "body": "Is there a reason you&#39;re doing all this with python?"}, {"owner": {"reputation": 552, "user_id": 8742938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0wAGc6bOPyg/AAAAAAAAAAI/AAAAAAAAtYg/vH4HV7oLdws/photo.jpg?sz=128", "display_name": "nerk", "link": "https://stackoverflow.com/users/8742938/nerk"}, "reply_to_user": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531363669, "post_id": 51294646, "comment_id": 89570606, "body": "@SuperStew I suppose the reason for us starting/attempting to do this using python is because that is a potential solution that we found. Do you have an alternative? I am certainly open to it!"}, {"owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "edited": false, "score": 1, "creation_date": 1531364125, "post_id": 51294646, "comment_id": 89570698, "body": "<a href=\"https://stackoverflow.com/a/50500803/2684771\">This answer</a> should do what you want."}, {"owner": {"reputation": 552, "user_id": 8742938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0wAGc6bOPyg/AAAAAAAAAAI/AAAAAAAAtYg/vH4HV7oLdws/photo.jpg?sz=128", "display_name": "nerk", "link": "https://stackoverflow.com/users/8742938/nerk"}, "reply_to_user": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "edited": false, "score": 0, "creation_date": 1531394968, "post_id": 51294646, "comment_id": 89585499, "body": "@sambler yes! I saw that and thought the same and pushed it along to the developers. Thanks much for your addition :)"}, {"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531406238, "post_id": 51294646, "comment_id": 89593439, "body": "@nerk looks like you found a solution, i guess i was just wondering why you weren&#39;t just positioning the camera in blender through the UI"}, {"owner": {"reputation": 552, "user_id": 8742938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0wAGc6bOPyg/AAAAAAAAAAI/AAAAAAAAtYg/vH4HV7oLdws/photo.jpg?sz=128", "display_name": "nerk", "link": "https://stackoverflow.com/users/8742938/nerk"}, "reply_to_user": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531420255, "post_id": 51294646, "comment_id": 89601279, "body": "@SuperStew because this python script will run on a web server and provide images for an application."}], "owner": {"reputation": 552, "user_id": 8742938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0wAGc6bOPyg/AAAAAAAAAAI/AAAAAAAAtYg/vH4HV7oLdws/photo.jpg?sz=128", "display_name": "nerk", "link": "https://stackoverflow.com/users/8742938/nerk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531345752, "creation_date": 1531345752, "question_id": 51294646, "link": "https://stackoverflow.com/questions/51294646/taking-an-image-of-an-entire-model-with-the-blender-python-api", "title": "Taking an image of an entire model with the Blender Python API", "body": "<p>We are trying to take an image of an entire model (not very large models) with the Blender Python API. The problem we're having seems to be re positioning the camera in the right spot. Now we get an image from inside the object (like this - <a href=\"http://prntscr.com/k4sekc\" rel=\"nofollow noreferrer\">http://prntscr.com/k4sekc</a>). And when we try to move a camera further away we just get a black image. </p>\n\n<p>I think the solution may involve finding the \"bounding box\" of the object, and moving away a little bit from it at a certain angle, and taking the picture that way. Does that make sense? </p>\n\n<p>My apologies for not posting code, I can maybe add some later if someone has ideas, but I am not the developer dealing with this issue directly so I don't have that code right now. I'm searching around the API docs for a solution and figured some of the folks here could probably help.</p>\n"}, {"tags": ["python", "scikit-learn", "keras", "roc", "auc"], "comments": [{"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 4, "creation_date": 1531345520, "post_id": 51294587, "comment_id": 89566719, "body": "Show us how you are calling <code>roc_auc_score</code> please."}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1531350597, "post_id": 51294587, "comment_id": 89568119, "body": "Apologies for the insufficient details, I added the whole code here. Please see. Thank you for the edit and response."}], "answers": [{"comments": [{"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "edited": false, "score": 0, "creation_date": 1531355033, "post_id": 51295451, "comment_id": 89569019, "body": "Thank you for the answer. It makes sense now why is it like this. Also, do you think this is the alternative way to do what you suggested here? <code>fpr, tpr, thresholds = metrics.roc_curve(te_y, y_pred,pos_label=0) roc_auc = metrics.auc(fpr, tpr) print(roc_auc) </code> this results to .99 as well. Please let me know what do you think? Thank you for your time :)"}], "tags": [], "owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "is_accepted": true, "score": 1, "last_activity_date": 1531351819, "creation_date": 1531351819, "answer_id": 51295451, "question_id": 51294587, "link": "https://stackoverflow.com/questions/51294587/roc-auc-score-is-coming-as-0-test-accuracy-97-possible/51295451#51295451", "title": "roc_auc_score is coming as 0 test accuracy 97% possible?", "body": "<p>A ROC curve is obtained by thresholding the scores, and this is usually done with the greater than operator ( > ), but the distances produced by the model have the other ordering, where closer to zero means two samples are similar, and larger distances mean dissimilar samples. This means these scores (your distances) have to be thresholded using the &lt; operator.</p>\n\n<p>A simple solution is to flip your model's predictions:</p>\n\n<pre><code>&gt;&gt;&gt; metrics.roc_auc_score(tr_y, 1.0 - y_pred)\n0.9954217433041488\n</code></pre>\n\n<p>Substracting one from your model predictions means that they can now be thresholded using the > operator, making the AUC now make sense.</p>\n"}], "owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 0, "accepted_answer_id": 51295451, "answer_count": 1, "score": 0, "last_activity_date": 1531404469, "creation_date": 1531345386, "last_edit_date": 1531404469, "question_id": 51294587, "link": "https://stackoverflow.com/questions/51294587/roc-auc-score-is-coming-as-0-test-accuracy-97-possible", "title": "roc_auc_score is coming as 0 test accuracy 97% possible?", "body": "<p>Edit (apologies, should have posted more details indeed):</p>\n\n<p>Following is the whole code example.</p>\n\n<pre><code>from __future__ import absolute_import\nfrom __future__ import print_function\nimport numpy as np\nimport random\nfrom keras.datasets import mnist\nfrom keras.models import Model\nfrom keras.layers import Input, Flatten, Dense, Dropout, Lambda\nfrom keras.optimizers import RMSprop\nfrom keras import backend as K\nfrom sklearn import metrics\n\nnum_classes = 10\nepochs = 2\n\n\ndef euclidean_distance(vects):\n    x, y = vects\n    return K.sqrt(K.maximum(K.sum(K.square(x - y), axis=1, keepdims=True), K.epsilon()))\n\n\ndef eucl_dist_output_shape(shapes):\n    shape1, shape2 = shapes\n    return (shape1[0], 1)\n\n\ndef contrastive_loss(y_true, y_pred):\n    '''Contrastive loss from Hadsell-et-al.'06\n    http://yann.lecun.com/exdb/publis/pdf/hadsell-chopra-lecun-06.pdf\n    '''\n    margin = 1\n    return K.mean(y_true * K.square(y_pred) +\n                  (1 - y_true) * K.square(K.maximum(margin - y_pred, 0)))\n\n\ndef create_pairs(x, digit_indices):\n    '''Positive and negative pair creation.\n    Alternates between positive and negative pairs.\n    '''\n    pairs = []\n    labels = []\n    n = min([len(digit_indices[d]) for d in range(num_classes)]) - 1\n    for d in range(num_classes):\n        for i in range(n):\n            z1, z2 = digit_indices[d][i], digit_indices[d][i + 1]\n            pairs += [[x[z1], x[z2]]]\n            inc = random.randrange(1, num_classes)\n            dn = (d + inc) % num_classes\n            z1, z2 = digit_indices[d][i], digit_indices[dn][i]\n            pairs += [[x[z1], x[z2]]]\n            labels += [1, 0]\n    return np.array(pairs), np.array(labels)\n\n\ndef create_base_network(input_shape):\n    '''Base network to be shared (eq. to feature extraction).\n    '''\n    input = Input(shape=input_shape)\n    x = Flatten()(input)\n    x = Dense(128, activation='relu')(x)\n    x = Dropout(0.1)(x)\n    x = Dense(128, activation='relu')(x)\n    x = Dropout(0.1)(x)\n    x = Dense(128, activation='relu')(x)\n    return Model(input, x)\n\n\ndef compute_accuracy(y_true, y_pred):\n    '''Compute classification accuracy with a fixed threshold on distances.\n    '''\n    pred = y_pred.ravel() &lt; 0.5\n    return np.mean(pred == y_true)\n\n\ndef accuracy(y_true, y_pred):\n    '''Compute classification accuracy with a fixed threshold on distances.\n    '''\n    return K.mean(K.equal(y_true, K.cast(y_pred &lt; 0.5, y_true.dtype)))\n\n\n# the data, split between train and test sets\n(x_train, y_train), (x_test, y_test) = mnist.load_data()\nx_train = x_train.astype('float32')\nx_test = x_test.astype('float32')\nx_train /= 255\nx_test /= 255\ninput_shape = x_train.shape[1:]\n\n# create training+test positive and negative pairs\ndigit_indices = [np.where(y_train == i)[0] for i in range(num_classes)]\ntr_pairs, tr_y = create_pairs(x_train, digit_indices)\n\ndigit_indices = [np.where(y_test == i)[0] for i in range(num_classes)]\nte_pairs, te_y = create_pairs(x_test, digit_indices)\n\n# network definition\nbase_network = create_base_network(input_shape)\n\ninput_a = Input(shape=input_shape)\ninput_b = Input(shape=input_shape)\n\n# because we re-use the same instance `base_network`,\n# the weights of the network\n# will be shared across the two branches\nprocessed_a = base_network(input_a)\nprocessed_b = base_network(input_b)\n\ndistance = Lambda(euclidean_distance,\n                  output_shape=eucl_dist_output_shape)([processed_a, processed_b])\n\nmodel = Model([input_a, input_b], distance)\n\n# train\nrms = RMSprop()\nmodel.compile(loss=contrastive_loss, optimizer=rms, metrics=[accuracy])\nmodel.fit([tr_pairs[:, 0], tr_pairs[:, 1]], tr_y,\n          batch_size=128,\n          epochs=epochs,\n          validation_data=([te_pairs[:, 0], te_pairs[:, 1]], te_y))\n\n# compute final accuracy on training and test sets\n    y_pred = model.predict([tr_pairs[:, 0], tr_pairs[:, 1]])\ntr_acc = compute_accuracy(tr_y, y_pred)\ny_pred = model.predict([te_pairs[:, 0], te_pairs[:, 1]])\nte_acc = compute_accuracy(te_y, y_pred)\n\nprint('* Accuracy on training set: %0.2f%%' % (100 * tr_acc))\nprint('* Accuracy on test set: %0.2f%%' % (100 * te_acc))\n\nroc_auc_score = metrics.roc_auc_score(te_y, 1-y_pred)\nprint(\"roc_auc_score:  %0.2f\" % roc_auc_score)\n</code></pre>\n\n<p>I am trying to learn the <strong>contrastive loss</strong> function usage with <strong>Siamese network</strong>. I started with <a href=\"https://github.com/keras-team/keras/blob/master/examples/mnist_siamese.py\" rel=\"nofollow noreferrer\">the Keras example here</a>. I am trying to plot the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html\" rel=\"nofollow noreferrer\"><code>roc_auc_score</code> from the scikit-learn</a> and it gives me 0.00</p>\n\n<pre><code>Train on 108400 samples, validate on 17820 samples\nEpoch 1/2\n108400/108400 [==============================] - 6s 52us/step - loss: 0.0930 - accuracy: 0.8910 - val_loss: 0.0420 - val_accuracy: 0.9582\nEpoch 2/2\n108400/108400 [==============================] - 5s 49us/step - loss: 0.0390 - accuracy: 0.9615 - val_loss: 0.0295 - val_accuracy: 0.9710\n* Accuracy on training set: 97.80%\n* Accuracy on test set: 96.82%\nroc_auc_score:  0.01\n</code></pre>\n\n<p>I feel like something is definitely wrong here. Like positive label and the negative label might not get passed to the <code>roc_auc_score</code> in correct way. </p>\n\n<p>Is there anybody who has some idea why is this happening and how can I solve the issue without manually setting the <code>pos_label</code>. Please let me know. Thank you for your time.</p>\n"}, {"tags": ["python", "image-processing", "imagej", "roi"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531345445, "post_id": 51294548, "comment_id": 89566690, "body": "Sounds like a pure math question to me."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1531345450, "post_id": 51294548, "comment_id": 89566691, "body": "This is a pure geometry question"}, {"owner": {"reputation": 3, "user_id": 9905290, "user_type": "registered", "profile_image": "https://graph.facebook.com/1449044228737350/picture?type=large", "display_name": "Mohamed Ayman", "link": "https://stackoverflow.com/users/9905290/mohamed-ayman"}, "edited": false, "score": 0, "creation_date": 1531347263, "post_id": 51294548, "comment_id": 89567292, "body": "I agree it is, I want to translate the geometric answer to a piece of code."}], "owner": {"reputation": 3, "user_id": 9905290, "user_type": "registered", "profile_image": "https://graph.facebook.com/1449044228737350/picture?type=large", "display_name": "Mohamed Ayman", "link": "https://stackoverflow.com/users/9905290/mohamed-ayman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531345221, "creation_date": 1531345221, "question_id": 51294548, "link": "https://stackoverflow.com/questions/51294548/measuring-the-length-of-a-fraction-of-a-pixel", "title": "Measuring the length of a fraction of a pixel", "body": "<p>I have a disk that I want to cut it in wedges, just like a pizza, I did this with ImageJ,</p>\n\n<p><a href=\"https://i.stack.imgur.com/FdQon.png\" rel=\"nofollow noreferrer\">Disk</a></p>\n\n<p>but as you can see in the picture, there are some pixels that has a fraction inside a ROI and the other fraction inside the other ROI.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BfmSD.png\" rel=\"nofollow noreferrer\">Fractioned Pixels</a></p>\n\n<p>Is there a way to find how much fraction of the area of the pixel lies in either ROIs? Ideally, I wouldn't want to do any kind of Interpolation, and write a python code for automating that. </p>\n\n<p>Eventually, I'd want to measure the raw intensity of each ROI in each time frame and generate a kymograph of the resulting array. </p>\n\n<p>Any kind of help would be much appreciated, even if it doesn't answer my question directly. </p>\n"}, {"tags": ["python", "nginx", "centos", "uwsgi", "wsgi"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1531345372, "post_id": 51294534, "comment_id": 89566670, "body": "There is no way for us to help you without your code."}, {"owner": {"reputation": 1515, "user_id": 6697030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W3sf0.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6697030/mike"}, "edited": false, "score": 0, "creation_date": 1531345545, "post_id": 51294534, "comment_id": 89566729, "body": "Have you tried adding the <code>--py-autoreload=1</code> option when you run the uWSGI server, e.g. <code>uwsgi --socket 0.0.0.0:8000 --protocol=http -w wsgi --py-autoreload=1</code>"}, {"owner": {"reputation": 827, "user_id": 1462729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3e330d64116f513a47a29dec3755410d?s=128&d=identicon&r=PG", "display_name": "brunston", "link": "https://stackoverflow.com/users/1462729/brunston"}, "edited": false, "score": 0, "creation_date": 1531350098, "post_id": 51294534, "comment_id": 89568013, "body": "Did you reload Flask before visiting the page again? If so, perhaps your browser is caching the page. Try using Ctrl-R to reload or open a &quot;private window&quot; to make sure no cached version of your page is loaded."}, {"owner": {"reputation": 2228, "user_id": 4902099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhSjG.jpg?s=128&g=1", "display_name": "hcheung", "link": "https://stackoverflow.com/users/4902099/hcheung"}, "edited": false, "score": 0, "creation_date": 1531410073, "post_id": 51294534, "comment_id": 89595932, "body": "You have a typo in <code>&lt;h</code>, should be <code>&lt;h1</code>. BTW, you have two server directives defined, both for listening to port 80. You should delete the second one."}], "answers": [{"tags": [], "owner": {"reputation": 1128, "user_id": 1952282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/857b0ee320c8b9a9f6043e58fdef55d5?s=128&d=identicon&r=PG", "display_name": "Bayko", "link": "https://stackoverflow.com/users/1952282/bayko"}, "is_accepted": false, "score": 0, "last_activity_date": 1531347651, "creation_date": 1531347651, "answer_id": 51294950, "question_id": 51294534, "link": "https://stackoverflow.com/questions/51294534/flask-uwsgi-centos-updates-do-not-work/51294950#51294950", "title": "Flask / uWSGI / CentOS - updates do not work", "body": "<p>If you are sure your code is right and are using Google chrome try clearing your cache </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13066893, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBdDkNBX7NmZ0q_T5g7Fs1NKlJGevz19JLA774UHQ=k-s128", "display_name": "Anderson Soares", "link": "https://stackoverflow.com/users/13066893/anderson-soares"}, "is_accepted": false, "score": 0, "last_activity_date": 1592820630, "creation_date": 1592820630, "answer_id": 62512031, "question_id": 51294534, "link": "https://stackoverflow.com/questions/51294534/flask-uwsgi-centos-updates-do-not-work/62512031#62512031", "title": "Flask / uWSGI / CentOS - updates do not work", "body": "<p>I had the same problem, try to use a new browser and it will make the trick for you.\nMe - I had problem it Chrome, it worked after clear the cache, but the same doesn't happen with FireFox, over FireFox works like a charm.\nYou can try others browsers as well just in case.</p>\n"}], "owner": {"reputation": 65, "user_id": 7524553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00453e238e55dae2e40f345a5afca8c4?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan M&#252;ller", "link": "https://stackoverflow.com/users/7524553/stefan-m%c3%bcller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1592820630, "creation_date": 1531345156, "last_edit_date": 1531377817, "question_id": 51294534, "link": "https://stackoverflow.com/questions/51294534/flask-uwsgi-centos-updates-do-not-work", "title": "Flask / uWSGI / CentOS - updates do not work", "body": "<p>to be honest i am a Noob if it comes to servers &amp; maintenance.</p>\n\n<p>I followed exactly the following guide to create my first \"Hello There\" page which worked out so far.</p>\n\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-centos-7\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-centos-7</a></p>\n\n<p>But after trying to update my homepage by inserting more code into my Application and saving the script the server output in my Browser still remains the same old \"hello there\".</p>\n\n<p>I am better with functional programming (mathematics) and database handling, but since I have to supply my team colleagues with some tools i thought about a quick homepage. Unfortunatley it is harder than expected to set up a python hp.</p>\n\n<p>Thank you in advanced \nStefan</p>\n\n<p>EDIT:\nI really followed the link above 1 to 1. Ht here are my codes:</p>\n\n<p><strong>TAOWeb.py</strong></p>\n\n<pre><code>from flask import Flask, render_template\n\napplication = Flask(__name__)\n\n@application.route(\"/\")\ndef hello():\nreturn \"&lt;h style='color:green'&gt; HELLO ASDF! &lt;/h1&gt;\"\n\n\nif __name__ == \"__main__\":\napplication.run(host='0.0.0.0')\n</code></pre>\n\n<p><strong>TAOWeb.ini</strong></p>\n\n<pre><code>[uwsgi]\nmodule = wsgi\n\nmaster = true\nprocesses = 5\n\nsocket = TAOWeb.sock\nchmod-socket = 660\nvacuum = true\n\ndie-on-term = true\n</code></pre>\n\n<p><strong>wsgi.py</strong></p>\n\n<pre><code>from TAOWeb import application\n\nif __name__ == \"__main__\":\n    application.run()\n</code></pre>\n\n<p>and the <code>/etc/systemd/system/TAOWeb.service</code></p>\n\n<pre><code>[Unit]\nDescription=uWSGI instance to serve TAOWeb\nAfter=network.target\n\n[Service]\nUser=tao\nGroup=nginx\nWorkingDirectory=/home/tao/TAOWeb\nEnvironment=\"PATH=/home/tao/TAOWeb/env/bin\"\nExecStart=/home/tao/TAOWeb/env/bin/uwsgi --ini TAOWeb.ini\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>Last but not least the nginx Config:</p>\n\n<pre><code># For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nuser nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /run/nginx.pid;\n\n# Load dynamic modules. See /usr/share/nginx/README.dynamic.\ninclude /usr/share/nginx/modules/*.conf;\n\nevents {\nworker_connections 1024;\n}\n\nhttp {\nlog_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                  '$status $body_bytes_sent \"$http_referer\" '\n                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\naccess_log  /var/log/nginx/access.log  main;\n\nsendfile            on;\ntcp_nopush          on;\ntcp_nodelay         on;\nkeepalive_timeout   65;\ntypes_hash_max_size 2048;\n\ninclude             /etc/nginx/mime.types;\ndefault_type        application/octet-stream;\n\n# Load modular configuration files from the /etc/nginx/conf.d directory.\n# See http://nginx.org/en/docs/ngx_core_module.html#include\n# for more information.\n    include /etc/nginx/conf.d/*.conf;\n\n    server {\n    listen 80;\n    server_name 185.164.5.211;\n\nlocation / {\n    include uwsgi_params;\n    uwsgi_pass unix:/home/tao/TAOWeb/TAOWeb.sock;\n    }\n\n}\n\nserver {\n    listen       80 default_server;\n    listen       [::]:80 default_server;\n    server_name  _;\n    root         /usr/share/nginx/html;\n\n    # Load configuration files for the default server block.\n    include /etc/nginx/default.d/*.conf;\n\n    location / {\n   }\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n\n# Settings for a TLS enabled server.\n#\n#    server {\n#        listen       443 ssl http2 default_server;\n#        listen       [::]:443 ssl http2 default_server;\n#        server_name  _;\n#        root         /usr/share/nginx/html;\n#\n#        ssl_certificate \"/etc/pki/nginx/server.crt\";\n#        ssl_certificate_key \"/etc/pki/nginx/private/server.key\";\n#        ssl_session_cache shared:SSL:1m;\n#        ssl_session_timeout  10m;\n#        ssl_ciphers HIGH:!aNULL:!MD5;\n#        ssl_prefer_server_ciphers on;\n#\n#        # Load configuration files for the default server block.\n#        include /etc/nginx/default.d/*.conf;\n#\n#        location / {\n#        }\n#\n#        error_page 404 /404.html;\n#            location = /40x.html {\n#        }\n#\n#        error_page 500 502 503 504 /50x.html;\n#            location = /50x.html {\n#        }\n#    }\n\n}\n</code></pre>\n\n<p>It is the standard config with only included the 1st Server part.</p>\n\n<p>Does this help?</p>\n\n<p>Best\nStefan</p>\n"}, {"tags": ["python", "anaconda", "spyder"], "comments": [{"owner": {"reputation": 27032, "user_id": 438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aceace9b2049723617a2f59f698df0ff?s=128&d=identicon&r=PG", "display_name": "Carlos Cordoba", "link": "https://stackoverflow.com/users/438386/carlos-cordoba"}, "edited": false, "score": 0, "creation_date": 1531346484, "post_id": 51294499, "comment_id": 89567072, "body": "What happens if you open a system terminal (xterm, konsole), run there <code>conda install pyopengl</code> and try again?"}, {"owner": {"reputation": 137, "user_id": 9916514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ba8752a17fae751f16a8f32221bbf2?s=128&d=identicon&r=PG&f=1", "display_name": "Arsalan", "link": "https://stackoverflow.com/users/9916514/arsalan"}, "reply_to_user": {"reputation": 27032, "user_id": 438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aceace9b2049723617a2f59f698df0ff?s=128&d=identicon&r=PG", "display_name": "Carlos Cordoba", "link": "https://stackoverflow.com/users/438386/carlos-cordoba"}, "edited": false, "score": 0, "creation_date": 1531346731, "post_id": 51294499, "comment_id": 89567145, "body": "It worked Carlos, Thanks!"}, {"owner": {"reputation": 27032, "user_id": 438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aceace9b2049723617a2f59f698df0ff?s=128&d=identicon&r=PG", "display_name": "Carlos Cordoba", "link": "https://stackoverflow.com/users/438386/carlos-cordoba"}, "edited": false, "score": 0, "creation_date": 1531346977, "post_id": 51294499, "comment_id": 89567213, "body": "Great, I&#39;ll add it as an answer below then."}, {"owner": {"reputation": 1, "user_id": 5212961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd72d1249da7a6d3f4800da2f0e3dfa?s=128&d=identicon&r=PG&f=1", "display_name": "CammyDoo", "link": "https://stackoverflow.com/users/5212961/cammydoo"}, "edited": false, "score": 0, "creation_date": 1534873529, "post_id": 51294499, "comment_id": 90866263, "body": "Switching to TkAgg backend for matplotlib solved something similar for me. It wasn&#39;t sypder, it was ipython but is suspect the same underlying problem."}], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 1944049, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04ac203b9b398e308d1d935bd8c36eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Naique", "link": "https://stackoverflow.com/users/1944049/aditya-naique"}, "edited": false, "score": 3, "creation_date": 1536476351, "post_id": 51306671, "comment_id": 91432709, "body": "Thank you. This worked for me on Anaconda3-5.2.0-Linux-x86_64 installed on Ubuntu 18.04.1 LTS. First I updated spyder with <code>conda update spyder</code>. Then installed PyOpenGL with <code>conda install pyopengl</code>. Then opened <code>anaconda-navigator</code>, and manually updated all the applications by clicking on the gear icon."}], "tags": [], "owner": {"reputation": 27032, "user_id": 438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aceace9b2049723617a2f59f698df0ff?s=128&d=identicon&r=PG", "display_name": "Carlos Cordoba", "link": "https://stackoverflow.com/users/438386/carlos-cordoba"}, "is_accepted": true, "score": 11, "last_activity_date": 1531401216, "creation_date": 1531401216, "answer_id": 51306671, "question_id": 51294499, "link": "https://stackoverflow.com/questions/51294499/spyder-anaconda-crashes-on-linux-with-segmentation-fault/51306671#51306671", "title": "Spyder anaconda crashes on Linux with segmentation fault", "body": "<p>(<em>Spyder maintainer here</em>) This problem is caused by faulty graphical card drivers and there are two ways to fix it:</p>\n\n<ol>\n<li>Update to Spyder 3.3 or higher.</li>\n<li>Install <code>pyopengl</code> with conda.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 8165929, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2mPag1V-Sh0/AAAAAAAAAAI/AAAAAAAAAUs/ojfGUTjk_EY/photo.jpg?sz=128", "display_name": "Behzad Sezari", "link": "https://stackoverflow.com/users/8165929/behzad-sezari"}, "is_accepted": false, "score": 5, "last_activity_date": 1535067344, "creation_date": 1535067344, "answer_id": 51995619, "question_id": 51294499, "link": "https://stackoverflow.com/questions/51294499/spyder-anaconda-crashes-on-linux-with-segmentation-fault/51995619#51995619", "title": "Spyder anaconda crashes on Linux with segmentation fault", "body": "<p>Based on my experiences, if you have ubuntu 18.04, anaconda 4.5 or higher, and spyder 3.3 or higher, installing <code>pyopengl</code> <strong>does not</strong> work, since spyder 3.3 should handle it. As recommended above, before start fixing it try to update spyder first:</p>\n\n<pre><code>conda update spyder\n</code></pre>\n\n<p>then <strong>downgrade Qt</strong>:</p>\n\n<pre><code>conda install pyqt=5.6\n</code></pre>\n\n<p>It should probably fix your problem. Other solutions could be found here:</p>\n\n<p><a href=\"https://github.com/spyder-ide/spyder/wiki/Troubleshooting-Guide-and-FAQ\" rel=\"noreferrer\">Spyder Troubleshooting-Guide-and-FAQ</a></p>\n\n<p>as well as : </p>\n\n<p><a href=\"https://github.com/spyder-ide/spyder/wiki/Troubleshooting-Guide-and-FAQ#basic-first-aid-general-troubleshooting\" rel=\"noreferrer\">Basic Troubleshooting</a> and <a href=\"https://github.com/spyder-ide/spyder/wiki/Troubleshooting-Guide-and-FAQ#emergency-cpr-spyder-wont-launch\" rel=\"noreferrer\">Emergency CPR</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9894909, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D1NqlrqjX7Q/AAAAAAAAAAI/AAAAAAAAAFI/R75I-PU2ybU/photo.jpg?sz=128", "display_name": "Thomas Kramer Reutler", "link": "https://stackoverflow.com/users/9894909/thomas-kramer-reutler"}, "is_accepted": false, "score": 0, "last_activity_date": 1535342402, "last_edit_date": 1535342402, "creation_date": 1535328216, "answer_id": 52031135, "question_id": 51294499, "link": "https://stackoverflow.com/questions/51294499/spyder-anaconda-crashes-on-linux-with-segmentation-fault/52031135#52031135", "title": "Spyder anaconda crashes on Linux with segmentation fault", "body": "<p>I saw issue on brand new Fedora with new anaconda installation. Just updating the spyder to latest version (in my case 3.3.1) fixed it, without anything else. </p>\n\n<p>(BTW: You can do this even from anaconda navigator itself, just look after the wheel within each application panel in the right corner).</p>\n\n<p>Would recommend to fix anything stepwise, start with upgrading to the latest spyder and if this doesn't work, try the other stuff.</p>\n"}, {"tags": [], "owner": {"reputation": 1140, "user_id": 5459638, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/y93bL.png?s=128&g=1", "display_name": "XavierStuvw", "link": "https://stackoverflow.com/users/5459638/xavierstuvw"}, "is_accepted": false, "score": 0, "last_activity_date": 1539505994, "last_edit_date": 1539505994, "creation_date": 1539505563, "answer_id": 52800838, "question_id": 51294499, "link": "https://stackoverflow.com/questions/51294499/spyder-anaconda-crashes-on-linux-with-segmentation-fault/52800838#52800838", "title": "Spyder anaconda crashes on Linux with segmentation fault", "body": "<p>The solutions around here did not work for me. I have uninstalled Anaconda <a href=\"https://docs.anaconda.com/anaconda/install/uninstall/\" rel=\"nofollow noreferrer\">https://docs.anaconda.com/anaconda/install/uninstall/</a> and reinstalled it <a href=\"https://docs.anaconda.com/anaconda/install/linux/\" rel=\"nofollow noreferrer\">https://docs.anaconda.com/anaconda/install/linux/</a> </p>\n\n<p>Only then did the segmentation fault disappear. </p>\n\n<p>Note that this has worked with Ubuntu 14.04 LTS (a old release at the time of this writing) and Anaconda3 5.3.0 with Spyder 3.3.1 (the very latest); versions checked with <code>conda list &lt;package&gt;</code>. The Spyder version supported by Ubuntu 14 is still 2.5.5, so this arrangement lets me have on board a new Spyder without upgrading the distro. Not to mention that reportedly the developers prefer to maintain Spyder in the Anaconda environment rather than elsewhere.</p>\n"}], "owner": {"reputation": 137, "user_id": 9916514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ba8752a17fae751f16a8f32221bbf2?s=128&d=identicon&r=PG&f=1", "display_name": "Arsalan", "link": "https://stackoverflow.com/users/9916514/arsalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6427, "favorite_count": 2, "accepted_answer_id": 51306671, "answer_count": 4, "score": 3, "last_activity_date": 1539505994, "creation_date": 1531344948, "last_edit_date": 1531364340, "question_id": 51294499, "link": "https://stackoverflow.com/questions/51294499/spyder-anaconda-crashes-on-linux-with-segmentation-fault", "title": "Spyder anaconda crashes on Linux with segmentation fault", "body": "<p>I just installed Anaconda on Linux. When trying to open spyder (either from navigator or terminal), it does not work. I get the following error when I try to open it in terminal: </p>\n\n<p>Segmentation fault (core dumped) </p>\n\n<p>I updated Conda completely but can't solve the problem. I am using Conda version 4.5.5 and Ubuntu 18.04. Any idea?</p>\n"}, {"tags": ["python", "numpy", "average"], "comments": [{"owner": {"reputation": 492, "user_id": 5457552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21ad7986d0024996dba12115b488f588?s=128&d=identicon&r=PG&f=1", "display_name": "MaVCArt", "link": "https://stackoverflow.com/users/5457552/mavcart"}, "edited": false, "score": 0, "creation_date": 1531345644, "post_id": 51294486, "comment_id": 89566763, "body": "Your idea to use a loop to make a loop to compute an average is correct - but you should do it for each x value, not every 2 neighbor points, at least if I understand correctly what it is you want."}, {"owner": {"reputation": 8750, "user_id": 8505817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53eb392d7acc9829ca94ef2bb495ab7f?s=128&d=identicon&r=PG&f=1", "display_name": "igrinis", "link": "https://stackoverflow.com/users/8505817/igrinis"}, "edited": false, "score": 0, "creation_date": 1531345744, "post_id": 51294486, "comment_id": 89566795, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/18517722/weighted-moving-average-in-python\" title=\"weighted moving average in python\">stackoverflow.com/questions/18517722/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1350, "user_id": 4413370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWSa5.jpg?s=128&g=1", "display_name": "Jorge Torres", "link": "https://stackoverflow.com/users/4413370/jorge-torres"}, "is_accepted": false, "score": 0, "last_activity_date": 1531408285, "last_edit_date": 1531408285, "creation_date": 1531347093, "answer_id": 51294863, "question_id": 51294486, "link": "https://stackoverflow.com/questions/51294486/plot-average-of-an-array-in-python/51294863#51294863", "title": "Plot average of an array in python", "body": "<p>If I undestrand correclty, what you are trying to plot is a trend line. You could do it by using the numpy function 'polyfit'. If that's what you are looking for, try this small modification to your code</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\ndata=np.genfromtxt(\"data.csv\")\nplt.figure()\nplt.subplot(111)\nplt.scatter(data[0],data[1])\n\npfit = np.polyfit(data[0], data[1], 1)\ntrend_line_model = np.poly1d(pfit)\n\nplt.plot(data[0], trend_line_model(data[0]), \"m--\") \nplt.show()\n</code></pre>\n\n<p>This will plot the trend line in dashed magenta</p>\n"}], "owner": {"reputation": 21, "user_id": 8910155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c508685d48d18a84b59bde1706cf1930?s=128&d=identicon&r=PG&f=1", "display_name": "Sing Sing", "link": "https://stackoverflow.com/users/8910155/sing-sing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6141, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531408285, "creation_date": 1531344892, "last_edit_date": 1531345123, "question_id": 51294486, "link": "https://stackoverflow.com/questions/51294486/plot-average-of-an-array-in-python", "title": "Plot average of an array in python", "body": "<p>I have a 2D array of temperature over time data. There are about 7500 x-values and as much corresponding y-values (so one y for every x).</p>\n\n<p>It looks like this:\n<img src=\"https://i.stack.imgur.com/9Md7K.png\" alt=\"plot\"></p>\n\n<p>The blue line in the middle is the result of my unsuccessful attempt to draw a plot line, which would represent the average of my data. Code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\ndata=np.genfromtxt(\"data.csv\")\ntemp_av=[np.mean(data[1])]*len(data[0])\nplt.figure()\nplt.subplot(111)\nplt.scatter(data[0],data[1])\nplt.plot(data[0],temp_av)\nplt.show()\n</code></pre>\n\n<p>However what I need is a curve, which will follow the rise in the temperature. Basically a line which will be somewhere in the middle of data points.</p>\n\n<p>I googled for some solutions, but all I found were suggestions how to compute an average in cases where you have multiple y-values for one x. I understand how to do that, but it doesn't help in this case.</p>\n\n<p>My next idea would be to use a loop to compute an average for every 2 neighbor points. But I am not sure how to do that best and if there aren't better solutions.</p>\n\n<p>Also, I understand that what I need is to compute an other array. Plotting is only for representation.</p>\n"}, {"tags": ["python", "process", "signals", "signal-handling"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10067222, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_9qNAPyDpwY/AAAAAAAAAAI/AAAAAAAAAAs/2R7KQSplrKM/photo.jpg?sz=128", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/10067222/xskyripper"}, "edited": false, "score": 0, "creation_date": 1531379907, "post_id": 51294845, "comment_id": 89575754, "body": "The code I&#39;ve shown you is a dummy version of the real code. The <code>while not self.done</code>  must be there, the generator actually doing a lot more under its scope. So the generator requirement sounds like this: loop infinitely, do something as you loop and only end when <code>self.done</code> is True. As you can see, the <code>stop</code> method of the <code>Daemon</code> class is the signal handler for the parent process but it is never called."}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1531346901, "creation_date": 1531346901, "answer_id": 51294845, "question_id": 51294461, "link": "https://stackoverflow.com/questions/51294461/python-custom-signal-handling-in-processes-pool/51294845#51294845", "title": "Python custom signal handling in processes pool", "body": "<p>Your problem is logic in function <code>_generate_ids()</code>. The function never ends so <code>pool.imap_unordered()</code> never finishes by itself, only needs to be interrupted by CTRL-C.</p>\n\n<p>Change it for something like this:</p>\n\n<pre><code>def _generate_ids(self):\n    \"\"\" Generator function of the IDs for the Processes Pool \"\"\"\n\n    for i in range(self.max_count):\n        time.sleep(3)\n        my_id = \"ID-{}\".format(self.count)\n        logger.info('[Daemon] Generated ID %s', my_id)\n        if self.done:\n            break\n        self.count += 1\n        yield my_id\n</code></pre>\n\n<p>And the processes end by themselves normally.</p>\n"}], "owner": {"reputation": 1, "user_id": 10067222, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_9qNAPyDpwY/AAAAAAAAAAI/AAAAAAAAAAs/2R7KQSplrKM/photo.jpg?sz=128", "display_name": "xSkyripper", "link": "https://stackoverflow.com/users/10067222/xskyripper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531346901, "creation_date": 1531344743, "question_id": 51294461, "link": "https://stackoverflow.com/questions/51294461/python-custom-signal-handling-in-processes-pool", "title": "Python custom signal handling in processes pool", "body": "<p>I am dealing with the following problem:</p>\n\n<p>I've implemented a dummy 'Thing' class that sleeps for 10 seconds and logs a message ('foo'). This class is instantiated in a worker function for a Processes Pool and the 'foo' method that implements the above mentioned logic is called.</p>\n\n<p>What I want to achieve is a custom signal handling: as long as the processes haven't terminated, if CTRL+C (SIGINT) is sent, each process will log the signal and they will immediately terminate.</p>\n\n<p>Half of the logic is working: while each process is sleeping, on SIGINT, they'll be interrupted and the Pool will be closed.</p>\n\n<p>Problem: if ALL the process end successfully and SIGINT is sent, the message will be logged but the Pool won't be closed.</p>\n\n<p>Code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import logging\nimport signal\nimport os\nimport time\n\nfrom multiprocessing import Pool, current_process\n\n\nlogger = logging.getLogger('test')\n\nSIGNAL_NAMES = dict((k, v) for v, k in reversed(sorted(signal.__dict__.items()))\n                    if v.startswith('SIG') and not v.startswith('SIG_'))\n\n\nclass Thing(object):\n    def __init__(self, my_id):\n        self.my_id = my_id\n        self.logger = logging.getLogger(str(my_id))\n\n    def foo(self):\n        time.sleep(10)\n        self.logger.info('[%s] Foo after 10 secs!', self.my_id)\n\n\nclass Daemon(object):\n    def __init__(self, no_processes, max_count):\n        signal.signal(signal.SIGINT, self.stop)\n\n        self.done = False\n        self.count = 0\n        self.max_count = max_count\n        self.pool = Pool(no_processes, initializer=self.pool_initializer)\n\n    def stop(self, signum, _):\n        \"\"\" Stop function for Daemon \"\"\"\n        sig = SIGNAL_NAMES.get(signum) or signum\n        logger.info('[Daemon] Stopping (received signal %s', sig)\n        self.done = True\n\n    def _generate_ids(self):\n        \"\"\" Generator function of the IDs for the Processes Pool \"\"\"\n        while not self.done:\n            if self.count &lt; self.max_count:\n                my_id = \"ID-{}\".format(self.count)\n                logger.info('[Daemon] Generated ID %s', my_id)\n                time.sleep(3)\n                yield my_id\n                self.count += 1\n        time.sleep(1)\n\n    def run(self):\n        \"\"\" Main daemon run function \"\"\"\n        pid = os.getpid()\n        logger.info('[Daemon] Started running on PID %s', str(pid))\n        my_ids = self._generate_ids()\n\n        for res in self.pool.imap_unordered(run_thing, my_ids):\n            logger.info(\"[Daemon] Finished %s\", res or '')\n\n        logger.info('[Daemon] Closing &amp; waiting processes to terminate')\n        self.pool.close()\n        self.pool.join()\n\n    def pool_initializer(self):\n        \"\"\" Pool initializer function \"\"\"\n        signal.signal(signal.SIGINT, self.worker_signal_handler)\n\n    @staticmethod\n    def worker_signal_handler(signum, _):\n        \"\"\" Signal handler for the Process worker \"\"\"\n        sig = SIGNAL_NAMES.get(signum) or signum\n        cp = current_process()\n        logger.info(\"[%s] Received in worker %s signal %s\", WORKER_THING_ID or '', str(cp), sig)\n\n        global WORKER_EXITING\n        WORKER_EXITING = True\n\n\nWORKER_EXITING = False\nWORKER_THING_ID = None\n\n\ndef run_thing(arg):\n    \"\"\" Worker function for processes \"\"\"\n    if WORKER_EXITING:\n        return\n\n    global WORKER_THING_ID\n    WORKER_THING_ID = arg\n    run_exception = None\n\n    logger.info('[%s] START Thing foo-ing', arg)\n    logging.getLogger('Thing-{}'.format(arg)).setLevel(logging.INFO)\n    try:\n        thing = Thing(arg)\n        thing.foo()\n    except Exception as e:\n        run_exception = e\n    finally:\n        WORKER_THING_ID = None\n    logger.info('[%s] STOP Thing foo-ing', arg)\n\n    if run_exception:\n        logger.error('[%s] EXCEPTION on Thing foo-ing: %s', arg, run_exception)\n\n    return arg\n\n\nif __name__ == '__main__':\n    logging.basicConfig()\n    logger.setLevel(logging.INFO)\n    daemon = Daemon(4, 3)\n    daemon.run()\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 403, "user_id": 5689638, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a56b3776c6255f540b407eebdcc5c7e?s=128&d=identicon&r=PG&f=1", "display_name": "kdba", "link": "https://stackoverflow.com/users/5689638/kdba"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1531344870, "post_id": 51294426, "comment_id": 89566481, "body": "yes, you are right. Edited the question accordingly"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1531345241, "post_id": 51294426, "comment_id": 89566618, "body": "not sure if it helps,but from this dict the highest scoring window would be <code>AACB</code> or <code>ABCB</code> - you could construct all possible combinations for this example and check if either is in your string -but I guess ou cant do for your real world problem. that way you have to create a dict with 4-char combinations and the sum and can simply check top down value vise if its in there - lookup is bound to be cheaper then sliding a window and recomputing"}], "answers": [{"tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": true, "score": 0, "last_activity_date": 1531345485, "creation_date": 1531345485, "answer_id": 51294605, "question_id": 51294426, "link": "https://stackoverflow.com/questions/51294426/scoring-a-string-based-on-a-dictionary-set-of-values/51294605#51294605", "title": "scoring a string based on a dictionary set of values", "body": "<pre><code>&gt;&gt;&gt; from functools import reduce\n&gt;&gt;&gt; strA='ABCCBAAABBCCABABC'\n&gt;&gt;&gt; d = {\"A\":[0.4, 0.5, 0.1, 0.2], \"B\": [0.3, 0.5, 0.3, 0.6], \"C\":[0.3, 0.0, 0.6, 0.2]}\n&gt;&gt;&gt; n = 4\n&gt;&gt;&gt;\n&gt;&gt;&gt; f = lambda t: reduce(lambda a,b: a*b, [d[c][i] for i,c in enumerate(t)])\n&gt;&gt;&gt; plist = map(f, zip(*[strA[i:] for i in range(n)]))\n&gt;&gt;&gt; plist\n[0.024, 0.0, 0.0, 0.003, 0.003, 0.012000000000000002, 0.036, 0.012, 0.018, 0.0, 0.0, 0.009, 0.012000000000000002, 0.009]\n&gt;&gt;&gt; \n&gt;&gt;&gt; max(plist)\n0.036\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1229, "user_id": 3916223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae66ded0b6a3f8ec8522661af9d964f0?s=128&d=identicon&r=PG&f=1", "display_name": "csunday95", "link": "https://stackoverflow.com/users/3916223/csunday95"}, "is_accepted": false, "score": 1, "last_activity_date": 1531347331, "creation_date": 1531347331, "answer_id": 51294899, "question_id": 51294426, "link": "https://stackoverflow.com/questions/51294426/scoring-a-string-based-on-a-dictionary-set-of-values/51294899#51294899", "title": "scoring a string based on a dictionary set of values", "body": "<p>Here's what I came up with:</p>\n\n<pre><code>def compute_best_score(test_string, prob_dict, window_size):\n    # assertion to check for uniform lengths\n    assert(all([len(prob_list) == window_size for prob_list in prob_dict.values()]))\n    best_window_index = -1\n    best_window_score = 0\n    for index, letter in enumerate(test_string):\n        # ignore last region of test_string as a window cannot be computed\n        if index &gt; len(test_string) - window_size:\n            break\n        current_window_score = 1.0\n        for score_index in range(window_size):\n            current_char = test_string[index + score_index]\n            letter_scores = pdict[current_char]\n            current_window_score *= letter_scores[score_index]\n        if current_window_score &gt; best_window_score:\n            best_window_score = current_window_score\n            best_window_index = index\n    return best_window_score, best_window_index\n</code></pre>\n\n<p>This one seems to perform better in profiling under the python I'm using than the reduce based answer (which surprised me). Here's a link to a simple profiling run I did: </p>\n\n<p><a href=\"http://tpcg.io/S05WeL\" rel=\"nofollow noreferrer\">http://tpcg.io/S05WeL</a> </p>\n"}], "owner": {"reputation": 403, "user_id": 5689638, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a56b3776c6255f540b407eebdcc5c7e?s=128&d=identicon&r=PG&f=1", "display_name": "kdba", "link": "https://stackoverflow.com/users/5689638/kdba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 51294605, "answer_count": 2, "score": 2, "last_activity_date": 1531347331, "creation_date": 1531344566, "last_edit_date": 1531344852, "question_id": 51294426, "link": "https://stackoverflow.com/questions/51294426/scoring-a-string-based-on-a-dictionary-set-of-values", "title": "scoring a string based on a dictionary set of values", "body": "<p>I have a string </p>\n\n<pre><code>strA='ABCCBAAABBCCABABC'\n</code></pre>\n\n<p>and a dictionary(list of lists) of length less than that of strA (say length 4) which has the probability of occurrence of of each character at a given position:</p>\n\n<pre><code>{\"A\":[0.4, 0.5, 0.1, 0.2], \"B\": [0.3, 0.5, 0.3, 0.6], \"C\":[0.3, 0.0, 0.6, 0.2]}\n</code></pre>\n\n<p>I would now like to have a sliding window of length 4 and score my entire strA based on this dictionary.\nSo the first 4 characters from srtA are ABCC and based on the dictionary, the score would be:</p>\n\n<pre><code>(p(A) at pos0)*(p(B) at pos1)*(p(C)at pos2)*(p(C) at pos(3))\n</code></pre>\n\n<p>=0.4*0.5*0.6*0.2\n=0.024</p>\n\n<p>Now I would like to slide this window in increments of 1 and find the highest score possible along the entire string for this window length.</p>\n\n<p>right now the way I am doing is:</p>\n\n<pre><code>    score_new=0\n    window_len=4\n    for a in range(0,(len(strA)-window_len):\n            slide=strA[a:a+window_len]\n\n            score=1\n            for b in range(0,len(silde)):\n                score=score*(dict[slide[b]][b])\n\n            if score&gt;score_new:\n                score_new=score\n\n        return score_new\n</code></pre>\n\n<p>which works but is time consuming. I have to do this scoring for 10000 strings with 1000 different windows of variable lengths each having a different probability dictionary.</p>\n\n<p>Is there a quicker way to score the string based on a dictionary of probabilities and only return the highest score?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "resources", "out-of-memory"], "owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531344493, "creation_date": 1531344493, "question_id": 51294410, "link": "https://stackoverflow.com/questions/51294410/how-to-clean-reinitialize-keras-resources-network-how-to-restart-training-from", "title": "How to clean/reinitialize Keras resources/network? How to restart training from scratch?", "body": "<p>I am training the same network against the same sizes of data but with different augmentation in order to find better augmentation policies.</p>\n\n<p>Unfortunately, after a lot of iterations, I am getting out of memory error.</p>\n\n<p>It looks like resorces are not freed on cycles.</p>\n\n<p>I tried to assign <code>None</code> to model then call <code>gc.collect()</code> -- this didn't helped.</p>\n\n<p>Also I tried to call <code>backend.clearsession()</code> -- this also didn't helped.</p>\n\n<p>Is there any conventional method to restart training from scratch in Keras?</p>\n"}, {"tags": ["python", "arrays", "regex", "python-2.7", "pyspark"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531344484, "post_id": 51294386, "comment_id": 89566331, "body": "i&#39;d break it all the way down into each element you will need and then build the lists back up again. if that makes sense."}, {"owner": {"reputation": 336, "user_id": 5855649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-54SuNufc5bQ/AAAAAAAAAAI/AAAAAAAAAOg/1swLi6tCTA4/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5855649/aditya"}, "edited": false, "score": 0, "creation_date": 1531376703, "post_id": 51294386, "comment_id": 89574158, "body": "I think you can convert this into numpy array and then use <code>numpy.squeeze</code>. This might give you expected result. Haven&#39;t tried but that should work I guess."}, {"owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "edited": false, "score": 0, "creation_date": 1531382842, "post_id": 51294386, "comment_id": 89577519, "body": "Your solution works for me when I use <code>&quot;\\],\\s*\\[&quot;</code>."}, {"owner": {"reputation": 600, "user_id": 4408877, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ze9JszoZToM/AAAAAAAAAAI/AAAAAAAAAo0/vmU-RnMz7_4/photo.jpg?sz=128", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4408877/jeff"}, "edited": false, "score": 0, "creation_date": 1531616389, "post_id": 51294386, "comment_id": 89662245, "body": "I apologize but I do not do python so I can only guess here, but I think you should use regex match, it that exists, rather than split.  Split will divide the string but it will remove the matching parts and you want to keep a portion of the matching parts and a proper pattern match will do this."}], "answers": [{"tags": [], "owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1531757288, "creation_date": 1531757288, "answer_id": 51366008, "question_id": 51294386, "link": "https://stackoverflow.com/questions/51294386/convert-string-to-nested-array-pyspark/51366008#51366008", "title": "Convert String to Nested Array - PySpark", "body": "<p>@pansen fixed this. It was a regex fix, super clean. The corrected code is:</p>\n\n<pre><code>hours = hours.withColumn(\n\"hoursArray\",\nsplit(col(\"hours\"), \"\\],\\s*\\[\").cast(ArrayType(StringType())).alias(\"ev\"))\n</code></pre>\n"}], "owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531757288, "creation_date": 1531344385, "question_id": 51294386, "link": "https://stackoverflow.com/questions/51294386/convert-string-to-nested-array-pyspark", "title": "Convert String to Nested Array - PySpark", "body": "<p>I have a PySpark DataFrame column with string data that looks like this:</p>\n\n<pre><code>[[Closed], [10:30am-11:30am, 12:30pm-1:30pm, 7:00pm-8:00pm], [12:30pm-1:30pm, 6:00pm-7:00pm, 7:30pm-8:30pm], [10:30am-11:30am, 12:30pm-1:30pm, 7:00pm-8:00pm], [12:30pm-1:30pm, 6:00pm-7:00pm], [12:30pm-1:30pm, 7:00pm-8:00pm], [10:00am-11:00am, 12:00pm-1:00pm]]\n</code></pre>\n\n<p>It is a string, but should ideally be an array with 7 elements (Sunday-Saturday). </p>\n\n<p>I wanted to convert this column to an array, so I could access the 0th element: </p>\n\n<pre><code>[Closed]\n</code></pre>\n\n<p>1st element:</p>\n\n<pre><code>[10:30am-11:30am, 12:30pm-1:30pm, 7:00pm-8:00pm]\n</code></pre>\n\n<p>2nd element:</p>\n\n<pre><code>[12:30pm-1:30pm, 6:00pm-7:00pm, 7:30pm-8:30pm]\n</code></pre>\n\n<p>etc. </p>\n\n<p>I tried to cast the column to array using this code:</p>\n\n<pre><code>hours = hours.withColumn(\n\"hoursArray\",\nsplit(col(\"hours\"), \",\\s*\").cast(ArrayType(StringType())).alias(\"ev\"))\n</code></pre>\n\n<p>However, when I try and access the 1st element of the resulting array, I get:</p>\n\n<pre><code>[10:30am-11:30am\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>[10:30am-11:30am, 12:30pm-1:30pm, 7:00pm-8:00pm]\n</code></pre>\n\n<p>What gives? I'm assuming I'm splitting on commas instead of splitting on closing brackets, but I've tried changing that to no results. Is there something simple I'm doing wrong? Thank you</p>\n"}, {"tags": ["python", "numpy", "information-theory"], "comments": [{"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 0, "creation_date": 1531346112, "post_id": 51294382, "comment_id": 89566933, "body": "Other than Cython, you might also want to consider Numba (<a href=\"https://numba.pydata.org/\" rel=\"nofollow noreferrer\">numba.pydata.org</a>) -- which one does the job better will vary, but Numba can be a bit easier to get up and running."}], "answers": [{"comments": [{"owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "edited": false, "score": 1, "creation_date": 1531361747, "post_id": 51294568, "comment_id": 89570243, "body": "Very nicely done - this was an order of magnitude better.      <code>np.bincount(bins * x + y).reshape((bins, bins))</code>      Just as an added note, it needed a bit of a change to deal with 0s in the table:    <code>np.bincount(bins * x + y, minlength=bins ** 2).reshape((bins, bins))</code>   This worked perfectly, passed testing and was quite a bit faster."}], "tags": [], "owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "is_accepted": true, "score": 3, "last_activity_date": 1531347667, "last_edit_date": 1531347667, "creation_date": 1531345303, "answer_id": 51294568, "question_id": 51294382, "link": "https://stackoverflow.com/questions/51294382/python-contingency-table/51294568#51294568", "title": "Python Contingency Table", "body": "<p>The clever trick for representing the elements of <code>np.stack((x, y))</code> as integers can be made faster:</p>\n\n<pre><code>In [92]: %timeit np.dot(np.stack((x, y)).transpose(), np.array([bins, 1]))\n109 \u00b5s \u00b1 6.55 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n\nIn [94]: %timeit bins*x + y\n12.1 \u00b5s \u00b1 260 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n\n<p>Moreover, the last part of your second solution can be simplified somewhat, by simply considering</p>\n\n<pre><code>np.unique(bins * x + y, return_counts=True)[1].reshape((bins, bins))\n</code></pre>\n\n<p>What is more, since we are dealing with equally spaced non-negative integers, <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html\" rel=\"nofollow noreferrer\"><code>np.bincount</code></a> will outperform <code>np.unique</code>; with that, the above boils down to</p>\n\n<pre><code>np.bincount(bins * x + y).reshape((bins, bins))\n</code></pre>\n\n<p>All in all, this provides quite some performance over what you are currently doing:</p>\n\n<pre><code>In [78]: %timeit make_table(x, y, bins)  # Your first solution\n3.86 ms \u00b1 159 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n\nIn [79]: %timeit make_table2(x, y, bins)  # Your second solution\n443 \u00b5s \u00b1 23.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n\nIn [101]: %timeit np.unique(bins * x + y, return_counts=True)[1].reshape((bins, bins))\n307 \u00b5s \u00b1 25 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n\nIn [118]: %timeit np.bincount(bins * x + y).reshape((10, 10))\n30.3 \u00b5s \u00b1 3.44 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n</code></pre>\n\n<p>You may also want to be aware of <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.histogramdd.html#numpy.histogramdd\" rel=\"nofollow noreferrer\"><code>np.histogramdd</code></a> which takes care of both rounding and binning at once, although it's likely going to be slower than rounding and using <code>np.bincount</code>.</p>\n"}], "owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 2, "accepted_answer_id": 51294568, "answer_count": 1, "score": 3, "last_activity_date": 1531347667, "creation_date": 1531344361, "question_id": 51294382, "link": "https://stackoverflow.com/questions/51294382/python-contingency-table", "title": "Python Contingency Table", "body": "<p>I am generating many, many contingency tables as part of a project that I'm writing.</p>\n\n<p>The workflow is:</p>\n\n<ul>\n<li>Take a large data array with continuous (float) rows and convert those to discrete integer values by binning (so that the resulting row has values 0-9, for example)</li>\n<li>Slice two rows into vectors X &amp; Y and generate a <a href=\"https://en.wikipedia.org/wiki/Contingency_table\" rel=\"nofollow noreferrer\">contingency table</a> from them, so that I have the 2-dimensional frequency distribution </li>\n<li>For example, I'd have a 10 x 10 array, counting the number of (xi, yi) that occur</li>\n<li>Use the contingency table to do some information theory math</li>\n</ul>\n\n<p>Initially, I wrote this as:</p>\n\n<pre><code>def make_table(x, y, num_bins):\n    ctable = np.zeros((num_bins, num_bins), dtype=np.dtype(int))\n    for xn, yn in zip(x, y):\n        ctable[xn, yn] += 1\n    return ctable\n</code></pre>\n\n<p>This works fine, but is so slow that it's eating up like 90% of the runtime of the entire project.</p>\n\n<p>The fastest python-only optimization I've been able to come up with is this:</p>\n\n<pre><code>def make_table(x, y, num_bins):\n    ctable = np.zeros(num_bins ** 2, dtype=np.dtype(int))\n    reindex = np.dot(np.stack((x, y)).transpose(), \n                     np.array([num_bins, 1]))\n    idx, count = np.unique(reindex, return_counts=True)\n    for i, c in zip(idx, count):\n        ctable[i] = c\n    return ctable.reshape((num_bins, num_bins))\n</code></pre>\n\n<p>That's (somehow) a lot faster, but it's still pretty expensive for something that doesn't seem like it should be a bottleneck. Are there any efficient ways to do this that I'm just not seeing, or should I just give up and do this in cython?</p>\n\n<p>Also, here's a benchmarking function.</p>\n\n<pre><code>def timetable(func):\n    size = 5000\n    bins = 10\n    repeat = 1000\n    start = time.time()\n    for i in range(repeat):\n        x = np.random.randint(0, bins, size=size)\n        y = np.random.randint(0, bins, size=size)\n        func(x, y, bins)\n    end = time.time()\n    print(\"Func {na}: {ti} Ms\".format(na=func.__name__, ti=(end - start)))\n</code></pre>\n"}, {"tags": ["python", "pycharm", "data-science"], "answers": [{"tags": [], "owner": {"reputation": 1251, "user_id": 10056034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Hy07.jpg?s=128&g=1", "display_name": "Ben Botvinick", "link": "https://stackoverflow.com/users/10056034/ben-botvinick"}, "is_accepted": false, "score": 0, "last_activity_date": 1531344520, "creation_date": 1531344520, "answer_id": 51294415, "question_id": 51294349, "link": "https://stackoverflow.com/questions/51294349/how-to-import-cluster-and-pylab-into-pycharm/51294415#51294415", "title": "How to import &#39;cluster&#39; and &#39;pylab&#39; into Pycharm", "body": "<p>Try using the built-in <a href=\"https://www.jetbrains.com/help/pycharm/matplotlib-support.html\" rel=\"nofollow noreferrer\">Scientific Mode</a> feature in Pycharm. You can activate it by selecting <code>View &gt; Scientific Mode</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "edited": false, "score": 0, "creation_date": 1531434413, "post_id": 51294446, "comment_id": 89607142, "body": "I could find cluter and pylab in PyCharm interpreter. Not sure why. It shows &#39;nothing to show&#39;. @YungGun"}], "tags": [], "owner": {"reputation": 2001, "user_id": 5394786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OtPRA.jpg?s=128&g=1", "display_name": "Isaac C Way", "link": "https://stackoverflow.com/users/5394786/isaac-c-way"}, "is_accepted": false, "score": 1, "last_activity_date": 1531344700, "creation_date": 1531344700, "answer_id": 51294446, "question_id": 51294349, "link": "https://stackoverflow.com/questions/51294349/how-to-import-cluster-and-pylab-into-pycharm/51294446#51294446", "title": "How to import &#39;cluster&#39; and &#39;pylab&#39; into Pycharm", "body": "<p>Go to the Preferences Tab -> Project Interpreter, there's a + symbol that allows you to view and download packages. From there you should be able to find cluster and pylab and install them to PyCharm's interpreter. After that you can import them and run them in your scripts.</p>\n\n<p>Alternatively, you may switch the project's interpreter to an interpreter that has the packages installed already. This can be done from that same menu.</p>\n"}, {"tags": [], "owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "is_accepted": true, "score": 2, "last_activity_date": 1531346204, "creation_date": 1531346204, "answer_id": 51294710, "question_id": 51294349, "link": "https://stackoverflow.com/questions/51294349/how-to-import-cluster-and-pylab-into-pycharm/51294710#51294710", "title": "How to import &#39;cluster&#39; and &#39;pylab&#39; into Pycharm", "body": "<p>executing </p>\n\n<pre><code> pip install cluster\n</code></pre>\n\n<p>for cluster and </p>\n\n<pre><code>pip install matplotlib\n</code></pre>\n\n<p>for pylab in the pycharm terminal which is located at the bottom of the screen is another method for installing those two packages. (if you want to import pylab, use <strong>from matplotlib import pylab</strong>). </p>\n\n<p><a href=\"https://i.stack.imgur.com/qq3ku.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qq3ku.png\" alt=\"enter image description here\"></a></p>\n\n<p>Additionally you can install any package in PyPI into pycharm virtual environment using this.</p>\n"}], "owner": {"reputation": 302, "user_id": 9297798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1961677680762861/picture?type=large", "display_name": "Sue-May Xu", "link": "https://stackoverflow.com/users/9297798/sue-may-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3227, "favorite_count": 0, "accepted_answer_id": 51294710, "answer_count": 3, "score": 1, "last_activity_date": 1531346204, "creation_date": 1531344160, "question_id": 51294349, "link": "https://stackoverflow.com/questions/51294349/how-to-import-cluster-and-pylab-into-pycharm", "title": "How to import &#39;cluster&#39; and &#39;pylab&#39; into Pycharm", "body": "<p>I would like to use Pycharm to write some data science code and I am using Visual Studio Code and run it from terminal. But I would like to know if I could do it on Pycharm? I could not find some modules such as cluster and pylab on Pycharm? Anyone knows how I could import these modules into Pycharm?</p>\n"}, {"tags": ["python", "flask", "mod-wsgi"], "comments": [{"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1531344733, "post_id": 51294340, "comment_id": 89566431, "body": "We need more details about the Apache server config and mod_wsgi, the example is not enough to reproduce the issue. (and how do you test GET or POST ? )"}, {"owner": {"reputation": 13, "user_id": 8881665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46347f119c05fa26996b2b8b415ff1f?s=128&d=identicon&r=PG&f=1", "display_name": "GeoGeek", "link": "https://stackoverflow.com/users/8881665/geogeek"}, "reply_to_user": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1531346407, "post_id": 51294340, "comment_id": 89567048, "body": "For sending post requests, I&#39;m using python requests module, for get requests I usually use browser. What configuration would be helpful to you?"}, {"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1531350512, "post_id": 51294340, "comment_id": 89568102, "body": "What response do you get? 404, 500? Is that from Apache, or your Python application? Have you tried a WSGI hello world without Flask to see if your server configuration is correct?"}, {"owner": {"reputation": 13, "user_id": 8881665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46347f119c05fa26996b2b8b415ff1f?s=128&d=identicon&r=PG&f=1", "display_name": "GeoGeek", "link": "https://stackoverflow.com/users/8881665/geogeek"}, "edited": false, "score": 0, "creation_date": 1531404381, "post_id": 51294340, "comment_id": 89592173, "body": "I&#39;m getting 200. Yes, I have a flask app working with mod_wsgi normally for GET requests... However, POST requests to Apache seems to reach Flask as GET."}, {"owner": {"reputation": 13, "user_id": 8881665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46347f119c05fa26996b2b8b415ff1f?s=128&d=identicon&r=PG&f=1", "display_name": "GeoGeek", "link": "https://stackoverflow.com/users/8881665/geogeek"}, "edited": false, "score": 0, "creation_date": 1531489566, "post_id": 51294340, "comment_id": 89628302, "body": "I figured it out. The endpoint for post via mod_wsgi requires a trailing slash! For running the web app on dev flask server that&#39;s not required however, going through Apache and mod_wsgi it is."}], "answers": [{"tags": [], "owner": {"reputation": 1128, "user_id": 1952282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/857b0ee320c8b9a9f6043e58fdef55d5?s=128&d=identicon&r=PG", "display_name": "Bayko", "link": "https://stackoverflow.com/users/1952282/bayko"}, "is_accepted": false, "score": 0, "last_activity_date": 1531346605, "creation_date": 1531346605, "answer_id": 51294788, "question_id": 51294340, "link": "https://stackoverflow.com/questions/51294340/flask-mod-wsgi-post-request-executing-get-function/51294788#51294788", "title": "Flask &amp; mod_wsgi post request executing get function", "body": "<p>You trying to do something like this? </p>\n\n<pre><code>@app.route('/', methods=['GET', 'POST'])\ndef behavior():\n    if flask.request.method == 'POST':\n        function2()\n    elif flask.request.method == 'GET':\n        function1()\n    else:\n        pass \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8881665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46347f119c05fa26996b2b8b415ff1f?s=128&d=identicon&r=PG&f=1", "display_name": "GeoGeek", "link": "https://stackoverflow.com/users/8881665/geogeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531346605, "creation_date": 1531344103, "question_id": 51294340, "link": "https://stackoverflow.com/questions/51294340/flask-mod-wsgi-post-request-executing-get-function", "title": "Flask &amp; mod_wsgi post request executing get function", "body": "<p>I have a Flask web app with two functions for handling POST and GET requests, separately, like:</p>\n\n<pre><code>@app.route(\"/\", methods=[\"POST\"])\ndef function1():\n    ...\n</code></pre>\n\n<p>and another function that handles get requests, like:</p>\n\n<pre><code>@app.route(\"/\", methods=[\"GET\"])\ndef function2():\n    ...\n</code></pre>\n\n<p>On Apache, I have a virtualhost configured to forward requests to mod_wsgi.\nHowever, for either POST or GET request to Apache, function2 gets executed.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "mysql", "sql", "pip"], "comments": [{"owner": {"reputation": 10175, "user_id": 196032, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b75136316e93a66545dd346297fad09e?s=128&d=identicon&r=PG", "display_name": "Alex R", "link": "https://stackoverflow.com/users/196032/alex-r"}, "edited": false, "score": 0, "creation_date": 1538009692, "post_id": 51294268, "comment_id": 91995442, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/37092125/cant-install-mysql-python-newer-versions-in-windows\">Can&#39;t install mysql-python (newer versions) in Windows</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1131, "user_id": 5014656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/966ed74b42196ef0b1c3055f1c12be0a?s=128&d=identicon&r=PG&f=1", "display_name": "Soumendra", "link": "https://stackoverflow.com/users/5014656/soumendra"}, "edited": false, "score": 0, "creation_date": 1543209838, "post_id": 51294860, "comment_id": 93820583, "body": "Thanks a lot @NipunSampath"}, {"owner": {"reputation": 4659, "user_id": 5142170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38674d32931f1241606b7b38f22baaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Labeo", "link": "https://stackoverflow.com/users/5142170/labeo"}, "edited": false, "score": 0, "creation_date": 1554606375, "post_id": 51294860, "comment_id": 97811603, "body": "I tried this solution but it didnt work. Do i need to restart computer?"}, {"owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "reply_to_user": {"reputation": 4659, "user_id": 5142170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38674d32931f1241606b7b38f22baaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Labeo", "link": "https://stackoverflow.com/users/5142170/labeo"}, "edited": false, "score": 0, "creation_date": 1554635075, "post_id": 51294860, "comment_id": 97816817, "body": "@Labeo what happens when you try this? And no you don&#39;t need to restart in order to get this working"}, {"owner": {"reputation": 4659, "user_id": 5142170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38674d32931f1241606b7b38f22baaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Labeo", "link": "https://stackoverflow.com/users/5142170/labeo"}, "edited": false, "score": 0, "creation_date": 1554655515, "post_id": 51294860, "comment_id": 97822544, "body": "I am still facing the same issue"}, {"owner": {"reputation": 4659, "user_id": 5142170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38674d32931f1241606b7b38f22baaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Labeo", "link": "https://stackoverflow.com/users/5142170/labeo"}, "edited": false, "score": 0, "creation_date": 1554655754, "post_id": 51294860, "comment_id": 97822612, "body": "You can see the log here  <a href=\"https://stackoverflow.com/questions/55542089/unable-to-install-mysql-client-1-3-12-getting-fatal-error-c1083-cannot-open-inc\" title=\"unable to install mysql client 1 3 12 getting fatal error c1083 cannot open inc\">stackoverflow.com/questions/55542089/&hellip;</a>"}, {"owner": {"reputation": 4659, "user_id": 5142170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38674d32931f1241606b7b38f22baaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Labeo", "link": "https://stackoverflow.com/users/5142170/labeo"}, "edited": false, "score": 0, "creation_date": 1554655778, "post_id": 51294860, "comment_id": 97822615, "body": "After installing mysqlclient-1.4.2-cp37-cp37m-win32.whl  i am facing this log"}, {"owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "edited": false, "score": 0, "creation_date": 1554735647, "post_id": 51294860, "comment_id": 97851525, "body": "are you using python 3.7 32bit or 64bit?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "edited": false, "score": 3, "creation_date": 1565524184, "post_id": 51294860, "comment_id": 101374628, "body": "... which btw doesn&#39;t work (python 3.7 on win7 x64): ERROR: mysqlclient-1.4.3-cp37-cp37m-win_amd64.whl is not a supported wheel on this platform."}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "edited": false, "score": 0, "creation_date": 1565524533, "post_id": 51294860, "comment_id": 101374678, "body": "oh I see, it&#39;s because python by default installs the 32bit version of itself instead of the 64bit version and doesn&#39;t even say that on or near the download button."}, {"owner": {"reputation": 1682, "user_id": 1812565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/0bbb1761953f4308f8c65697482295b4?s=128&d=identicon&r=PG", "display_name": "niran", "link": "https://stackoverflow.com/users/1812565/niran"}, "edited": false, "score": 0, "creation_date": 1579321202, "post_id": 51294860, "comment_id": 105736503, "body": "this is good answer for windows based machine, if you are using VC9"}, {"owner": {"reputation": 127, "user_id": 13504510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb379c8a37b86dfbc77121f70984300f?s=128&d=identicon&r=PG&f=1", "display_name": "Nitish Prajapati", "link": "https://stackoverflow.com/users/13504510/nitish-prajapati"}, "edited": false, "score": 0, "creation_date": 1594219061, "post_id": 51294860, "comment_id": 111050909, "body": "can you please help me? How to decide which binary to download? <b>python version: 3.8.3</b> ,   <b>python is 32 bit</b>,      <b>windows is 64 bit</b>"}, {"owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "edited": false, "score": 0, "creation_date": 1594240119, "post_id": 51294860, "comment_id": 111060893, "body": "try mysqlclient\u20111.4.6\u2011cp38\u2011cp38\u2011win32.whl"}, {"owner": {"reputation": 302, "user_id": 4000266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kVus1.jpg?s=128&g=1", "display_name": "heySushil", "link": "https://stackoverflow.com/users/4000266/heysushil"}, "edited": false, "score": 0, "creation_date": 1594895471, "post_id": 51294860, "comment_id": 111289772, "body": "yes right i was used this one but just forget so that i am here but thanks for help"}, {"owner": {"reputation": 93, "user_id": 3604009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d997689fec800770f5ce92f0f51e473?s=128&d=identicon&r=PG", "display_name": "Vinh", "link": "https://stackoverflow.com/users/3604009/vinh"}, "edited": false, "score": 2, "creation_date": 1612804731, "post_id": 51294860, "comment_id": 116875597, "body": "Make sure that you download the right wheel. So consider the following basic:  (1) use cp38 if you have python 3.8  (2) if your python shell is in 64 bit, use the wheel ending with 64 and vice versa (3) Having Windows in 64bit does not mean your python is in 64 bit, which was my case  (4) By starting the Python interpreter in the terminal, you can see your Python bit. My case: Python 3.8.5 (tags/v3.8.5:580fbb0, Jul 20 2020, 15:43:08) [MSC v.1926 32 bit (Intel)] on win32"}], "tags": [], "owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "is_accepted": true, "score": 67, "last_activity_date": 1565452112, "last_edit_date": 1565452112, "creation_date": 1531347059, "answer_id": 51294860, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/51294860#51294860", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>You can download unofficial windows binaries for your python version using <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient\" rel=\"noreferrer\">https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient</a>. Then install it using pip. This way you'll be able to avoid the hassle of dealing with visual studio build tools.</p>\n\n<p>Just download the mysqlclient.whl file most applicable to you. I think in your case it'll be </p>\n\n<blockquote>\n  <p>mysqlclient\u20111.3.13\u2011cp36\u2011cp36m\u2011win_amd64.whl</p>\n</blockquote>\n\n<p>and run </p>\n\n<pre><code>pip install \"path to the downloaded .whl file\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2908, "user_id": 804575, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7b68f43b0bb8a099d2fc6810a9f4a15b?s=128&d=identicon&r=PG", "display_name": "Ralph Ritoch", "link": "https://stackoverflow.com/users/804575/ralph-ritoch"}, "is_accepted": false, "score": 2, "last_activity_date": 1570995116, "last_edit_date": 1570995116, "creation_date": 1540485334, "answer_id": 52994181, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/52994181#52994181", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>This is a problem with the 64 bit version of python on Windows 10. The following repaired the problem for me.</p>\n\n<ol>\n<li>Install the 32 bit version of python for windows (currently version 3.7.1)</li>\n<li>Install visual studio build tools\n<a href=\"https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2017\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2017</a>\nfor C++</li>\n<li>Install the 32 bit mysql connector version 6.1.11 from <a href=\"https://downloads.mysql.com/archives/c-c/\" rel=\"nofollow noreferrer\">https://downloads.mysql.com/archives/c-c/</a></li>\n</ol>\n\n<p>After this I was able to install mysqlclient with <code>pip install mysqlclient</code>. </p>\n\n<p><em>Hopefully someone will come up with a better solution that doesn't require downgrading to 32 bit because this is not a good solution, it just works. I found a way to work around the mysql issue but ran into the problem again while trying to install channels. It seems python 64 bit is looking for 32 bit libraries instead of 64 bit libraries on windows. So far this solution has solved all of my python build problems on windows.</em></p>\n"}, {"comments": [{"owner": {"reputation": 489, "user_id": 1655410, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4ae8b4c10d2ea2ebed6776eda5dfab0a?s=128&d=identicon&r=PG", "display_name": "user1655410", "link": "https://stackoverflow.com/users/1655410/user1655410"}, "edited": false, "score": 0, "creation_date": 1549977388, "post_id": 53471224, "comment_id": 96093150, "body": "yes i tries many of the solutions above, but nothing worked for me, so i tried what u said in the comment and it worked for me perfectly. Thank u."}, {"owner": {"reputation": 2589, "user_id": 3917465, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/PnDnV.jpg?s=128&g=1", "display_name": "Code_Worm", "link": "https://stackoverflow.com/users/3917465/code-worm"}, "reply_to_user": {"reputation": 489, "user_id": 1655410, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4ae8b4c10d2ea2ebed6776eda5dfab0a?s=128&d=identicon&r=PG", "display_name": "user1655410", "link": "https://stackoverflow.com/users/1655410/user1655410"}, "edited": false, "score": 1, "creation_date": 1550040618, "post_id": 53471224, "comment_id": 96118754, "body": "@user1655410 happy coding :)"}], "tags": [], "owner": {"reputation": 2589, "user_id": 3917465, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/PnDnV.jpg?s=128&g=1", "display_name": "Code_Worm", "link": "https://stackoverflow.com/users/3917465/code-worm"}, "is_accepted": false, "score": 6, "last_activity_date": 1543175741, "last_edit_date": 1543175741, "creation_date": 1543175173, "answer_id": 53471224, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/53471224#53471224", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>I had this issue (exactly same error) and tried all the solutions mentioned above, and neither of them worked (at least for me), actually I was about to pull my hairs over this issue till I found the solution in a very weird, simple and stupid way!! .</p>\n\n<p>I did the following steps so that the problem solved and life got sweet again.</p>\n\n<p>First I installed <strong><code>MySQL Connector/C</code></strong> from <a href=\"https://downloads.mysql.com/archives/c-c/\" rel=\"noreferrer\">here</a></p>\n\n<p>Second (after installation finished) I copied <strong><code>MySQL Connector C 6.1</code></strong> folder <strong>from</strong> <strong><code>Program files/MySQL</code> into <code>Program files (x86)/MySQL</code></strong></p>\n\n<p>note that you might have to create <code>MySQL</code> folder if it doesn't exist in <code>Program files (x86)</code> (it didn't exist for me)</p>\n\n<p>As simple as that, it worked for me, it seems for some (or all) 64-bit windows, pip or more probably <code>mysqlclient</code> setup script only searches <code>Program files (x86)</code> folder for some MySQL files (such as 'mysql.h') and doesn't search <code>Program files</code> and since doesn't find anything in <code>Program files (x86)</code> raises the error very dumb!!! isn't it </p>\n"}, {"comments": [{"owner": {"reputation": 4779, "user_id": 8105437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CURix.jpg?s=128&g=1", "display_name": "dmcgrandle", "link": "https://stackoverflow.com/users/8105437/dmcgrandle"}, "edited": false, "score": 0, "creation_date": 1544857311, "post_id": 53790200, "comment_id": 94431711, "body": "This would have been better as a comment than an answer.  :)"}, {"owner": {"reputation": 2467, "user_id": 4602214, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-AZ58YO9UAAA/AAAAAAAAAAI/AAAAAAAAACU/irvaBG9P40w/photo.jpg?sz=128", "display_name": "Garth", "link": "https://stackoverflow.com/users/4602214/garth"}, "edited": false, "score": 16, "creation_date": 1547120855, "post_id": 53790200, "comment_id": 95087269, "body": "Not really, he has answered the question by explaining the error."}, {"owner": {"reputation": 145, "user_id": 842746, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c21c0e74b9e590fd8e2f78e5873afdf2?s=128&d=identicon&r=PG", "display_name": "syd", "link": "https://stackoverflow.com/users/842746/syd"}, "edited": false, "score": 0, "creation_date": 1603965382, "post_id": 53790200, "comment_id": 114204647, "body": "I am using 64 bit version of python 3.9.0. Still facing the same issue while installing mysql."}], "tags": [], "owner": {"reputation": 339, "user_id": 10175257, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204769583236132/picture?type=large", "display_name": "\u03a3\u03c9\u03c4\u03ae\u03c1\u03b7\u03c2 \u03a4\u03c3\u03b1\u03ba\u03b9\u03c1\u03af\u03b4\u03b7\u03c2", "link": "https://stackoverflow.com/users/10175257/%ce%a3%cf%89%cf%84%ce%ae%cf%81%ce%b7%cf%82-%ce%a4%cf%83%ce%b1%ce%ba%ce%b9%cf%81%ce%af%ce%b4%ce%b7%cf%82"}, "is_accepted": false, "score": 32, "last_activity_date": 1544856130, "creation_date": 1544856130, "answer_id": 53790200, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/53790200#53790200", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>This error occurs when trying to install mysqlclient for python32 in 64 bit environments.\nUninstall python and re-install 64 bit version. Then pip install mysqlclient will run with no errors.</p>\n"}, {"tags": [], "owner": {"reputation": 302, "user_id": 9023714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95259690c75c87ca8df27c4eaaa9ed8d?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmedakhtar11", "link": "https://stackoverflow.com/users/9023714/ahmedakhtar11"}, "is_accepted": false, "score": -2, "last_activity_date": 1553228999, "last_edit_date": 1553228999, "creation_date": 1553228929, "answer_id": 55292931, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/55292931#55292931", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>In Command Line, Just type:</p>\n\n<pre><code>python --\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>python --version\n</code></pre>\n\n<p>(This should show more details about the version including whether it is 32 or 64 bit)</p>\n"}, {"tags": [], "owner": {"reputation": 1721, "user_id": 7300865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35T6i.jpg?s=128&g=1", "display_name": "Muhammad Faizan Fareed", "link": "https://stackoverflow.com/users/7300865/muhammad-faizan-fareed"}, "is_accepted": false, "score": 0, "last_activity_date": 1558683694, "creation_date": 1558683694, "answer_id": 56287966, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/56287966#56287966", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>Wasted a lot of time to solve this error i found the solution that worked for me at least.</p>\n\n<p><strong>When i tried to install MYSQL Client</strong> </p>\n\n<pre><code>pip install mysqlclient\n</code></pre>\n\n<p><strong>1st error</strong> </p>\n\n<blockquote>\n  <p>MySQLdb/_mysql.c(29): fatal error C1083: Cannot open include file: 'mysql.h': No such file or directory</p>\n</blockquote>\n\n<hr>\n\n<p>And also tried to install Django Channels </p>\n\n<pre><code>pip install -U channels\n</code></pre>\n\n<p><strong>2nd error</strong></p>\n\n<blockquote>\n  <p>error: Microsoft Visual C++ 14.0 is required. Get it with \"Microsoft Visual C++ Build Tools\": <a href=\"https://visualstudio.microsoft.com/downloads/\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/downloads/</a></p>\n</blockquote>\n\n<p>Download Build tools : \n<a href=\"https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2017\" rel=\"nofollow noreferrer\">Microsoft Build Tools</a></p>\n\n<p>Stack overflow : \n<a href=\"https://stackoverflow.com/questions/29846087/microsoft-visual-c-14-0-is-required-unable-to-find-vcvarsall-bat\">How to install/select required Build Tools</a></p>\n\n<p>Installed build tools. (Happy Coding)</p>\n\n<hr>\n\n<p><strong>@Ralph Ritoch</strong> solution worked for me and as well others those getting Mysql Client error. </p>\n\n<p>But i also installed Django Channels so i followed these steps mentioned below   </p>\n\n<p><strong>Follow these steps</strong> </p>\n\n<ol>\n<li>Windows 10 64 bit  </li>\n<li><a href=\"https://www.python.org/ftp/python/3.7.3/python-3.7.3-amd64.exe\" rel=\"nofollow noreferrer\">Python 64 bit 3.7.3</a></li>\n<li><a href=\"https://cdn.mysql.com/archives/mysql-connector-c/mysql-connector-c-6.1.11-winx64.msi\" rel=\"nofollow noreferrer\">mysql-connector-c-6.1.11-winx64</a></li>\n<li><a href=\"https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2017\" rel=\"nofollow noreferrer\">Build tools </a></li>\n</ol>\n\n<p>I also installed  <a href=\"https://channels.readthedocs.io/en/latest/installation.html\" rel=\"nofollow noreferrer\">Django Channels 2.2.0</a> and not getting any kind of error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/POD64.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/POD64.png\" alt=\"Successfully installed mysqlclient \"></a></p>\n\n<hr>\n\n<p>(Note)</p>\n\n<p><strong>MySQL connector already installed into x86 directory</strong>  </p>\n\n<blockquote>\n  <p>Copy c:\\Program Files\\MySQL\\MySQL Connector C 6.0.2\\ directory to c:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\</p>\n</blockquote>\n\n<p>So i did not changed the directory of MySQL Connector. (You can also check this)</p>\n\n<p>Maybe work for you!</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1972259/cannot-open-include-file-config-win-h-no-such-file-or-directory-while-inst\">Other Stack solution to change dirctory</a></p>\n\n<hr>\n\n<p><strong>Possible Reasons</strong> </p>\n\n<p>Why we getting errors.</p>\n\n<ol>\n<li>Python 32/64 bit Version  </li>\n<li>MySQL Connector 32/64 bit version</li>\n<li>Directory issue</li>\n<li>Window 32/64 bit version</li>\n<li>Build Tools not installed (If getting Microsoft Visual C++ 14.0 is required)</li>\n</ol>\n\n<hr>\n\n<p>Thanks to all who posted their solution.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 9166052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IulBr.jpg?s=128&g=1", "display_name": "Anthony Rolfe", "link": "https://stackoverflow.com/users/9166052/anthony-rolfe"}, "edited": false, "score": 0, "creation_date": 1588298158, "post_id": 57161428, "comment_id": 108851592, "body": "All this does for me is create 64 unresolved link errors. Nice catch though. I think I&#39;m just going to install the 32 bit version and be done with it"}, {"owner": {"reputation": 1023, "user_id": 833263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3e6d053fe527806316901227678f308?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/833263/benjamin"}, "edited": false, "score": 0, "creation_date": 1591104615, "post_id": 57161428, "comment_id": 109924281, "body": "Oh jeez, after struggling with the installation of mysqlclient this finally helped me out."}, {"owner": {"reputation": 66, "user_id": 2319788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ead8aacde9e8d2568f6359f64c5d4ae?s=128&d=identicon&r=PG", "display_name": "bp89", "link": "https://stackoverflow.com/users/2319788/bp89"}, "edited": false, "score": 0, "creation_date": 1591887919, "post_id": 57161428, "comment_id": 110231953, "body": "Thanks John. It really helped me out."}, {"owner": {"reputation": 61, "user_id": 8503795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3O01w.jpg?s=128&g=1", "display_name": "Jason.Jan", "link": "https://stackoverflow.com/users/8503795/jason-jan"}, "edited": false, "score": 0, "creation_date": 1607308192, "post_id": 57161428, "comment_id": 115223040, "body": "Thank you John.  It&#39;s work by install MariaDB Connector/C 3.0.10 Stable. \u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002 <code>Installing collected packages: mysqlclient\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002           \u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002     Running setup.py install for mysqlclient ... done\u2002\u2002\u2002\u2002\u2002\u2002\u2002        \u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002 Successfully installed mysqlclient-2.0.1</code>"}], "tags": [], "owner": {"reputation": 868, "user_id": 1321707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e64dedac8fa02cae04b5c29e520925d?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1321707/john"}, "is_accepted": false, "score": 15, "last_activity_date": 1563875655, "creation_date": 1563875655, "answer_id": 57161428, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/57161428#57161428", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>Well probably,this is one of the stupidest errors i have ever witnessed.<br>\nI have Python 3.7.3 32bit along with latest pip3 and i was installing wheels to my Python....and i stumbled on this STUPID error....<br>\nProbably my situation is a bit different but you can resolve it just by looking carefully at the error.... at first it seems something is missing and you start blaming you, Windows ,32/64bit and the list goes on and on..<br>\nTake a step back...<em>just take a step back and just read the nasty red error message</em>....  <strong>read it really well</strong>.<br>\nIn my case it was</p>\n\n<pre><code>ERROR: Command errored out with exit status 1:\n     command: 'c:\\users\\myUserName\\appdata\\local\\programs\\python\\python37-32\\python.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\MASTER~1\\\\AppData\\\\Local\\\\Temp\\\\pip-install-z7x81g2q\\\\mysqlclient\\\\setup.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\MASTER~1\\\\AppData\\\\Local\\\\Temp\\\\pip-install-z7x81g2q\\\\mysqlclient\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\MASTER~1\\AppData\\Local\\Temp\\pip-record-z1mvci5v\\install-record.txt' --single-version-externally-managed --compile\n         cwd: C:\\Users\\MASTER~1\\AppData\\Local\\Temp\\pip-install-z7x81g2q\\mysqlclient\\\n    Complete output (30 lines):\n    running install\n    running build\n    running build_py\n    creating build\n    creating build\\lib.win32-3.7\n    creating build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\__init__.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\_exceptions.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\compat.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\connections.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\converters.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\cursors.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\release.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\times.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    creating build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\__init__.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\CLIENT.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\CR.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\ER.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\FIELD_TYPE.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\FLAG.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    running build_ext\n    building 'MySQLdb._mysql' extension\n    creating build\\temp.win32-3.7\n    creating build\\temp.win32-3.7\\Release\n    creating build\\temp.win32-3.7\\Release\\MySQLdb\n    C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.21.27702\\bin\\HostX86\\x86\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MT -Dversion_info=(1,4,2,'post',1) -D__version__=1.4.2.post1 \"-IC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\\mariadb\" -Ic:\\users\\MyUserName\\appdata\\local\\programs\\python\\python37-32\\include -Ic:\\users\\MyUserName\\appdata\\local\\programs\\python\\python37-32\\include \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.21.27702\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\cppwinrt\" /TcMySQLdb/_mysql.c /Fobuild\\temp.win32-3.7\\Release\\MySQLdb/_mysql.obj /Zl /D_CRT_SECURE_NO_WARNINGS\n    _mysql.c\n    MySQLdb/_mysql.c(29): fatal error C1083: Cannot open include file: 'mysql.h': No such file or directory\n    error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2019\\\\BuildTools\\\\VC\\\\Tools\\\\MSVC\\\\14.21.27702\\\\bin\\\\HostX86\\\\x86\\\\cl.exe' failed with exit status 2\n    ----------------------------------------\nERROR: Command errored out with exit status 1: 'c:\\users\\MyUserName\\appdata\\local\\programs\\python\\python37-32\\python.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\MASTER~1\\\\AppData\\\\Local\\\\Temp\\\\pip-install-z7x81g2q\\\\mysqlclient\\\\setup.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\MASTER~1\\\\AppData\\\\Local\\\\Temp\\\\pip-install-z7x81g2q\\\\mysqlclient\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\MASTER~1\\AppData\\Local\\Temp\\pip-record-z1mvci5v\\install-record.txt' --single-version-externally-managed --compile Check the logs for full command output.\n</code></pre>\n\n<p>Have you read it well ?...i assume that you have everything ... the Build tools, the MySQL Connector C 6.1...you even moved it to Program Files (x86)...so what it wrong...?? ...<br>\nNow take a closer look  </p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.21.27702\\bin\\HostX86\\x86\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MT -Dversion_info=(1,4,2,'post',1) -D__version__=1.4.2.post1 \"-IC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\\mariadb\" -\n</code></pre>\n\n<p>I am pretty sure you saw it...STILL NO ?.... let me bold it for you  </p>\n\n<pre><code>\"-IC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\\mariadb\" -\n</code></pre>\n\n<p><strong>mariadb</strong><br>\nWell it can't be any stupidest than this ...the installer looks for mariadb <strong>includes</strong> and later <strong>libs</strong> \nJust go to the mariadb site and download the MariaDB C/C++ connector and install it...<br>\nWell its not over.. \nGoto to C:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\nand create folder mariadb...and copy paste the contents from the mariaDb connector installation <strong>include</strong> folder<br>\n<em>again</em> don't go way...go to \nC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\lib and do again the same drill for the <strong>lib</strong> folder<br>\nso you should have</p>\n\n<pre><code>C:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\\mariadb  \n\nC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\lib\\mariadb  \n</code></pre>\n\n<p>Now hit the <code>pip3 install mysqlclient</code><br>\nand enjoy installing without a nag...the end</p>\n\n<pre><code>Successfully installed mysqlclient-1.4.2.post1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8414903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d8aaeb31e48f8c513714c305319d77?s=128&d=identicon&r=PG&f=1", "display_name": "Amal Matty Antony", "link": "https://stackoverflow.com/users/8414903/amal-matty-antony"}, "is_accepted": false, "score": 1, "last_activity_date": 1603438686, "last_edit_date": 1603438686, "creation_date": 1566287944, "answer_id": 57569084, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/57569084#57569084", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>I was trying the same for a Django project.\nI tried using:<br>\n<code>pip install mysql-python </code><br>\nwhich gave me the following error:\n<code>'mysql.h': No such file or directory</code>.\n<br> After fiddling with requirements.txt which gave me yet another error<br></p>\n<pre><code>  Downloading https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip (108kB) \n    Complete output from command python setup.py egg_info: \n    Traceback (most recent call last): \n      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt; \n      File &quot;/tmp/pip-install-43_6cfva/MySQL-python/setup.py&quot;, line 13, in &lt;module&gt; \n        from setup_posix import get_config \n      File &quot;/tmp/pip-install-43_6cfva/MySQL-python/setup_posix.py&quot;, line 2, in &lt;module&gt; \n        from ConfigParser import SafeConfigParser \n    ModuleNotFoundError: No module named 'ConfigParser' \n</code></pre>\n<p><strong>Finally using this worked for me</strong>:\n<code>pip install mysql-connector</code><br>\n<code>import mysql.connector</code></p>\n"}, {"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": false, "score": 2, "last_activity_date": 1568885858, "creation_date": 1568885858, "answer_id": 58008058, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/58008058#58008058", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>None of the solutions above worked for me. Apparently I had to downgrade my Python from <code>3.7.x</code> to <code>3.6.4</code> and that solved the problem for me. <a href=\"https://www.python.org/ftp/python/3.6.4/python-3.6.4.exe\" rel=\"nofollow noreferrer\">Downloadlink</a> for <code>python=3.6.4</code>.</p>\n\n<p>I would recommend to create a new virtual environment for this and not to uninstall your main python. Find extensive documentation on how to create a <code>venv</code> <a href=\"https://docs.python-guide.org/dev/virtualenvs/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 2202357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409181452afb419d1ed8a22427ef640e?s=128&d=identicon&r=PG", "display_name": "gnumaru", "link": "https://stackoverflow.com/users/2202357/gnumaru"}, "is_accepted": false, "score": 0, "last_activity_date": 1573380273, "last_edit_date": 1573380273, "creation_date": 1572260611, "answer_id": 58589777, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/58589777#58589777", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>I wanted to comment on John's answer but my comment was too long so I had to make another answer. Sorry for that.</p>\n\n<p>John, this helped me a lot, thanks. Not properly reading the logs is a bad habit for many people, myself included.</p>\n\n<p>But instead of downloading the mariadb connector (or searching the net for a prebuilt wheel), I managed to do it with oracle's mysql connector. And I prefer to do symbolic links instead of copying files. Here's what I did using windows 10 x64, python 3.8 x64 and oracle's mysql connector x64:</p>\n\n<pre><code># run this on an elevated command prompt if your user does not have permission to make symbolic links\n# download and install https://downloads.mysql.com/archives/c-c/\nmklink /d \"C:\\Program Files\\MySQL\\MySQL Connector C 6.1\\include\\mariadb\" \"C:\\Program Files\\MySQL\\MySQL Connector C 6.1\\include\\mysql\"\nmklink /d \"C:\\Program Files (x86)\\MySQL\" \"C:\\Program Files\\MySQL\"\nmklink /d \"C:\\Program Files\\MySQL\\MySQL Connector C 6.1\\lib\\mariadb\" \"C:\\Program Files\\MySQL\\MySQL Connector C 6.1\\lib\\vs14\"\nmklink \"C:\\Program Files\\MySQL\\MySQL Connector C 6.1\\lib\\vs14\\mariadbclient.lib\" \"C:\\Program Files\\MySQL\\MySQL Connector C 6.1\\lib\\vs14\\mysqlclient.lib\"\nSET INCLUDE=C:\\Program Files\\MySQL\\MySQL Connector C 6.1\\include;%INCLUDE%\npython3 -m pip install mysqlclient\n</code></pre>\n\n<p>And that's it.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 2504434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1Y1lZ.jpg?s=128&g=1", "display_name": "Razvi", "link": "https://stackoverflow.com/users/2504434/razvi"}, "is_accepted": false, "score": 2, "last_activity_date": 1576928248, "creation_date": 1576928248, "answer_id": 59435837, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/59435837#59435837", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>This is what solved my issue</p>\n\n<ul>\n<li>Install MySQL Connector/C (Archived Versions) from <a href=\"https://downloads.mysql.com/archives/c-c/\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n\n<p>It is probably installed in the following location\n     <code>C:\\Program Files\\MySQL\\MySQL Connector C 6.1</code></p>\n\n<hr>\n\n<ul>\n<li>Copy the entire folder <code>MySQL Connector C 6.1</code> to <code>C:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1</code></li>\n</ul>\n\n<hr>\n\n<ul>\n<li>Try executing the command <code>pip3 install mysqlclient</code>.</li>\n</ul>\n\n<p>Successful. Good Job!</p>\n\n<hr>\n\n<p>Unsuccessful?</p>\n\n<hr>\n\n<ul>\n<li>Install MariaDB connector from <a href=\"https://downloads.mariadb.com/Connectors/c/connector-c-3.0.4/\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n\n<p>Probably installed in the location </p>\n\n<pre><code>C:\\Program Files\\MariaDB\\MariaDB Connector C 64-bit\n</code></pre>\n\n<hr>\n\n<ul>\n<li>Copy the contents from </li>\n</ul>\n\n<p><code>C:\\Program Files\\MariaDB\\MariaDB Connector C 64-bit\\include</code></p>\n\n<p>and Paste into a folder name it as <code>mariadb</code> and paste it to the location</p>\n\n<p><code>C:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\\</code></p>\n\n<hr>\n\n<ul>\n<li><p>Copy the contents from </p>\n\n<p><code>C:\\Program Files\\MariaDB\\MariaDB Connector C 64-bit\\lib</code></p></li>\n</ul>\n\n<p>and Paste into a folder name it as <code>mariadb</code> and paste it to the location</p>\n\n<pre><code>`C:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\lib`\n</code></pre>\n\n<hr>\n\n<ul>\n<li>Try executing the command <code>pip3 install mysqlclient</code>.</li>\n</ul>\n\n<p>This worked for me</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13014035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cec0f43a2a2be9627b0f4534e3c8796b?s=128&d=identicon&r=PG&f=1", "display_name": "nerd01", "link": "https://stackoverflow.com/users/13014035/nerd01"}, "is_accepted": false, "score": 0, "last_activity_date": 1583428227, "creation_date": 1583428227, "answer_id": 60550691, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/60550691#60550691", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>Thanks for all the answers, but it was not sufficient to solve my problem. However it put me on the right path :). \nTo solve the error of the missing sys/types.h I had to copy this types.h file from \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17763.0\\ucrt\\sys\\\" to \"c:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\\mariadb\\sys\\\". Then I could finally install mysqlclient.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10533436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ddc63de367a503265fc06b9c6b11a6?s=128&d=identicon&r=PG&f=1", "display_name": "mrivas", "link": "https://stackoverflow.com/users/10533436/mrivas"}, "is_accepted": false, "score": 0, "last_activity_date": 1585859032, "last_edit_date": 1585859032, "creation_date": 1585847099, "answer_id": 60997101, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/60997101#60997101", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>for me, <code>pip install mysqlclient</code> was throwing error... </p>\n\n<pre><code>MySQLdb/_mysql.c(29): fatal error C1083: Cannot open include file: 'mysql.h': No such file or directory\n</code></pre>\n\n<pre><code>error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2019\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.20.27508\\\\bin\\\\HostX86\\\\x86\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<p>It seems mysqlclient is 64 bit. \nSo I Forced both Python and pip to execute from the 64 bit directory. </p>\n\n<p>Explicitly...</p>\n\n<p>don't <code>run python -m venv myvemv and pip install -r requirements.txt</code>, </p>\n\n<p>run the following...</p>\n\n<pre><code>C:\\Users\\mr\\AppData\\Local\\Programs\\Python\\Python37\\python -m venv [path to your virtual env goes here]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>C:\\Users\\mr\\AppData\\Local\\Programs\\Python\\Python37\\Scripts\\pip install -r requirements.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8946, "user_id": 5675325, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rM1RC.png?s=128&g=1", "display_name": "Tiago Martins Peres \u674e\u5927\u4ec1", "link": "https://stackoverflow.com/users/5675325/tiago-martins-peres-%e6%9d%8e%e5%a4%a7%e4%bb%81"}, "is_accepted": false, "score": 1, "last_activity_date": 1604646031, "last_edit_date": 1604646031, "creation_date": 1604093886, "answer_id": 64616104, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h/64616104#64616104", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>In order to solve it, I've gone to <a href=\"https://www.lfd.uci.edu/%7Egohlke/pythonlibs/#mysqlclient\" rel=\"nofollow noreferrer\">this page</a></p>\n<p><a href=\"https://i.stack.imgur.com/zdnss.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zdnss.png\" alt=\"enter image description here\" /></a></p>\n<p>and downloaded <strong>mysqlclient\u20111.4.6\u2011pp373\u2011pypy36_pp73\u2011win32.whl</strong>.</p>\n<p>Then, placed it in a particular folder, opened the terminal in it, activated the virtual environment <em>venv</em> and ran</p>\n<pre><code>pip install mysqlclient-1.4.6-cp39-cp39-win_amd64.whl\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OOJV9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OOJV9.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 495, "user_id": 10066749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c2ee25102a8c35e5af2678a4f81bb3?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron McCommon", "link": "https://stackoverflow.com/users/10066749/aaron-mccommon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54633, "favorite_count": 15, "accepted_answer_id": 51294860, "answer_count": 14, "score": 49, "last_activity_date": 1604646031, "creation_date": 1531343781, "last_edit_date": 1590248677, "question_id": 51294268, "link": "https://stackoverflow.com/questions/51294268/pip-install-mysqlclient-returns-fatal-error-c1083-cannot-open-file-mysql-h", "title": "pip install mysqlclient returns &quot;fatal error C1083: Cannot open file: &#39;mysql.h&#39;: No such file or directory", "body": "<p>Here is this issue:\nI attempt to install mysqlclient like so</p>\n\n<pre><code>C:\\Users\\amccommon349&gt;pip install mysqlclient\nCollecting mysqlclient\n  Using cached https://files.pythonhosted.org/packages/ec/fd/83329b9d3e14f7344d1\ncb31f128e6dbba70c5975c9e57896815dbb1988ad/mysqlclient-1.3.13.tar.gz\nInstalling collected packages: mysqlclient\n  Running setup.py install for mysqlclient ... error\n    Complete output from command c:\\users\\amccommon349\\appdata\\local\\programs\\python\\python36\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\AMCCOM~1\\\\AppData\\\\Local\\\\Temp\\\\pip-install-qcgo48hf\\\\mysqlclient\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\AMCCOM~1\\AppData\\Local\\Temp\\pip-record-q4yoftj8\\install-record.txt --single-version-externally-managed --compile:\n\nc:\\users\\amccommon349\\appdata\\local\\programs\\python\\python36\\lib\\distutils\\dist.py:261: UserWarning: Unknown distribution option: 'long_description_content_type'\nwarnings.warn(msg)\nrunning install\nrunning build\nrunning build_py\ncreating build\ncreating build\\lib.win-amd64-3.6\ncopying _mysql_exceptions.py -&gt; build\\lib.win-amd64-3.6\ncreating build\\lib.win-amd64-3.6\\MySQLdb\ncopying MySQLdb\\__init__.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\ncopying MySQLdb\\compat.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\ncopying MySQLdb\\connections.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\ncopying MySQLdb\\converters.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\ncopying MySQLdb\\cursors.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\ncopying MySQLdb\\release.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\ncopying MySQLdb\\times.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\ncreating build\\lib.win-amd64-3.6\\MySQLdb\\constants\ncopying MySQLdb\\constants\\__init__.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\\constants\ncopying MySQLdb\\constants\\CLIENT.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\\constants\ncopying MySQLdb\\constants\\CR.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\\constants\ncopying MySQLdb\\constants\\ER.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\\constants\ncopying MySQLdb\\constants\\FIELD_TYPE.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\\constants\ncopying MySQLdb\\constants\\FLAG.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\\constants\ncopying MySQLdb\\constants\\REFRESH.py -&gt; build\\lib.win-amd64-3.6\\MySQLdb\\constants\nrunning build_ext\nbuilding '_mysql' extension\ncreating build\\temp.win-amd64-3.6\ncreating build\\temp.win-amd64-3.6\\Release\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.14.26428\\bin\\HostX86\\x64\\cl.exe /c/nologo/Ox /W3 /GL /DNDEBUG /MD -Dversion_info=(1,3,13,'final',0) -D__version__=1.3.13 \"-IC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\" -Ic:\\users\\amccommon349\\appdata\\local\\programs\\python\\python36\\include -Ic:\\users\\amccommon349\\appdata\\local\\programs\\python\\python36\\include \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.14.26428\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\" \"-IC:\\ProgramFiles (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\cppwinrt\" /Tc_mysql.c /Fobuild\\temp.win-amd64-3.6\\Release\\_mysql.obj /Zl _mysql.c\n_mysql.c(29): fatal error C1083: Cannot open include file: 'mysql.h': No such file or directory\n  error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\BuildTools\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<p>I made sure I had all of the files needed from visual studios build tools, I downloaded the mysql-python connector, and updated my pip and setup tools. I am a complete beginner to this and would appreciate any input as to how to go about fixing this error.</p>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1531343899, "post_id": 51294248, "comment_id": 89566111, "body": "You can choose which level you want to see logs at, but you can&#39;t choose which level a third party library decides to log a particular message at without changing their source code. Could you give some context: why do you <i>want</i> to?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1531344249, "post_id": 51294248, "comment_id": 89566242, "body": "Are you aware you can call setLevel on individual modules&#39; loggers instead of just the root logger?"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1531344378, "post_id": 51294248, "comment_id": 89566293, "body": "What are you trying to accomplish? Maybe you can accomplish what you want with a custom handler/formatter."}], "owner": {"reputation": 3788, "user_id": 562117, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1be9664f3396c5d43e70aba56683a7d6?s=128&d=identicon&r=PG", "display_name": "Landon", "link": "https://stackoverflow.com/users/562117/landon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1531343906, "creation_date": 1531343666, "last_edit_date": 1531343906, "question_id": 51294248, "link": "https://stackoverflow.com/questions/51294248/python-logger-change-log-level-of-third-party-module", "title": "Python Logger change log level of third party module", "body": "<p>I import many third party modules that have various levels of logging (ERROR, WARNING, INFO, DEBUG) within them.  I would like to change the log level of a given log statement.</p>\n\n<p>For example, I can do something like this:</p>\n\n<pre><code>import logging\nimport requests\nlogging.basicConfig()\nlogging.getLogger().setLevel(logging.NOTSET)\nrequests.get('http://www.google.com')\n</code></pre>\n\n<p>This will output something like this:</p>\n\n<pre><code>DEBUG:requests.packages.urllib3.connectionpool:Starting new HTTP connection (1): www.google.com\nDEBUG:requests.packages.urllib3.connectionpool:http://www.google.com:80 \"GET / \nHTTP/1.1\" 200 4674\n&lt;Response [200]&gt;\n</code></pre>\n\n<p>You can see that this comes from this <a href=\"https://github.com/urllib3/urllib3/blob/master/src/urllib3/connectionpool.py#L204\" rel=\"nofollow noreferrer\">source code</a>.  You can clearly see it's calling a <code>log.debug</code> which corresponds to the DEBUG message above.  How could I change this to <code>log.info</code> if I wanted to?</p>\n\n<p>Note that I'm aware of <code>setLevel</code>, which would suppress messages below a certain level. That is not what I'm looking for.</p>\n\n<p><strong>Suboptimal solution #1</strong> I could extend the <code>requests</code> module, and overwrite that specific function.  I don't want to maintain</p>\n\n<p><strong>Suboptimal solution #2</strong> I could overwrite the constant for DEBUG within that module CRITICAL:</p>\n\n<pre><code>requests.packages.urllib3.logging.DEBUG = requests.packages.urllib3.logging.CRITICAL\nrequests.get('http://www.google.com')\nCRITICAL:requests.packages.urllib3.connectionpool:Starting new HTTP connection (1): www.google.com\nCRITICAL:requests.packages.urllib3.connectionpool:http://www.google.com:80 \"GET / HTTP/1.1\" 200 4683\n&lt;Response [200]&gt;\n</code></pre>\n\n<p>What is the best way to accomplish this?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1531343664, "post_id": 51294237, "comment_id": 89566005, "body": "Use <code>csv</code> library if you work with CSV."}, {"owner": {"reputation": 1555, "user_id": 8358881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uhm8s.jpg?s=128&g=1", "display_name": "lwileczek", "link": "https://stackoverflow.com/users/8358881/lwileczek"}, "edited": false, "score": 0, "creation_date": 1531345583, "post_id": 51294237, "comment_id": 89566745, "body": "you could do something simple like <a href=\"https://regex101.com/r/n9nELi/1\" rel=\"nofollow noreferrer\">this</a>.  Add more commas before and after to select your column. If you have a big file you may want to just use the <code>csv</code> module."}, {"owner": {"reputation": 2939, "user_id": 8334261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f9cdd180c34b49d28655f0e4b80e22?s=128&d=identicon&r=PG&f=1", "display_name": "DocDriven", "link": "https://stackoverflow.com/users/8334261/docdriven"}, "edited": false, "score": 0, "creation_date": 1531350663, "post_id": 51294237, "comment_id": 89568136, "body": "For csv, you can also use pandas&#39; <code>csv_read</code> and <code>loc</code> functions."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7458433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/57da8681c1643a908a51512f37da7761?s=128&d=identicon&r=PG&f=1", "display_name": "tptptpfg", "link": "https://stackoverflow.com/users/7458433/tptptpfg"}, "edited": false, "score": 0, "creation_date": 1531350937, "post_id": 51295064, "comment_id": 89568218, "body": "Isn&#39;t this less efficient for large files though?"}, {"owner": {"reputation": 1420, "user_id": 4103025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RhTH9.jpg?s=128&g=1", "display_name": "bytesized", "link": "https://stackoverflow.com/users/4103025/bytesized"}, "reply_to_user": {"reputation": 41, "user_id": 7458433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/57da8681c1643a908a51512f37da7761?s=128&d=identicon&r=PG&f=1", "display_name": "tptptpfg", "link": "https://stackoverflow.com/users/7458433/tptptpfg"}, "edited": false, "score": 0, "creation_date": 1531362690, "post_id": 51295064, "comment_id": 89570408, "body": "It is true that reading the whole file at once is a bad idea if you might operate on large files. I interpreted your question as being about how to extract a column, not how to optimally read from a file, so that is what my example code is meant to show. If I were writing a full-fledged program, I would also not hardcode the column index or the data file path."}], "tags": [], "owner": {"reputation": 1420, "user_id": 4103025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RhTH9.jpg?s=128&g=1", "display_name": "bytesized", "link": "https://stackoverflow.com/users/4103025/bytesized"}, "is_accepted": false, "score": 0, "last_activity_date": 1531348469, "creation_date": 1531348469, "answer_id": 51295064, "question_id": 51294237, "link": "https://stackoverflow.com/questions/51294237/python-use-regex-to-extract-a-column-of-a-file/51295064#51295064", "title": "Python: Use regex to extract a column of a file", "body": "<p>Depending on what your data delimiters are, regex is probably overkill for this. If the delimiters are simple (whitespace or a specific character/string), you can separate columns simply by using the <a href=\"https://docs.python.org/3.7/library/stdtypes.html#str.split\" rel=\"nofollow noreferrer\"><code>string.split</code> method</a>.</p>\n\n<p>Here is an example program to explain how this might work:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>column = 0  # First column\nwith open(\"data.txt\") as file:\n  data = file.readlines()\ncolumns = list(map(lambda x: x.strip().split()[column], data))\n</code></pre>\n\n<p>To break this down:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>column = 0\n# Read a file named \"data.txt\" into an array of lines\nwith open(\"data.txt\") as file:\n  data = file.readlines()\n# This is where we will store the columns as we extract them\ncolumns = []\n# Iterate over each line in the file\nfor line in data:\n  # Strip the whitespace (including the trailing newline character) from the\n  # start and end of the string\n  line = line.strip()\n  # Split the line, using the standard delimiter (arbitrary number of\n  # whitespace characters)\n  line = line.split()\n  # Extract the column data from the desired index and store it in our list\n  columns.append(line[column])\n# columns now holds a list of strings extracted from that column\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7458433, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/57da8681c1643a908a51512f37da7761?s=128&d=identicon&r=PG&f=1", "display_name": "tptptpfg", "link": "https://stackoverflow.com/users/7458433/tptptpfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531367274, "creation_date": 1531343620, "last_edit_date": 1531367274, "question_id": 51294237, "link": "https://stackoverflow.com/questions/51294237/python-use-regex-to-extract-a-column-of-a-file", "title": "Python: Use regex to extract a column of a file", "body": "<p>I am currently extracting columns in a file by using awk in os.system():</p>\n\n<pre><code>os.system(\"awk '{print $'%i'}' &lt; infile &gt; outfile\"%some_column)\nnp.loadtxt('outfile')\n</code></pre>\n\n<p>Is there an equivalent way to accomplish this using regex? </p>\n\n<p>Thanks.</p>\n\n<p>Edit: I want to clarify that I am looking for the most optimal way to extract specific columns of large files. </p>\n"}, {"tags": ["python", "search", "text", "full-text-search"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531343455, "post_id": 51294195, "comment_id": 89565914, "body": "check out <code>os.walk</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1531343882, "post_id": 51294195, "comment_id": 89566102, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/on-topic\">On topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here. StackOverflow is not a design, coding, research, or tutorial service. Research first; then post.  Both of these issues are handled in many places on Stack Overflow and elsewhere."}, {"owner": {"reputation": 11, "user_id": 10067154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gtzRZ2zWxSA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qG2Ojghnm-ZmlbYTVFuSuxYlH2gw/mo/photo.jpg?sz=128", "display_name": "Frazer Robbo", "link": "https://stackoverflow.com/users/10067154/frazer-robbo"}, "edited": false, "score": 0, "creation_date": 1531387779, "post_id": 51294195, "comment_id": 89580746, "body": "Thanks for comments folks, I&#39;ll tak a look into incorporating os.walk into the script."}], "owner": {"reputation": 11, "user_id": 10067154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gtzRZ2zWxSA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qG2Ojghnm-ZmlbYTVFuSuxYlH2gw/mo/photo.jpg?sz=128", "display_name": "Frazer Robbo", "link": "https://stackoverflow.com/users/10067154/frazer-robbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531343385, "creation_date": 1531343385, "question_id": 51294195, "link": "https://stackoverflow.com/questions/51294195/how-can-i-modify-my-script-to-allow-python-to-search-recursively-thought-my-fold", "title": "How can I modify my script to allow Python to search recursively thought my folder structure?", "body": "<p>Hello fellow Pythonistas,</p>\n\n<p>I have a script which searches through all files contained within a single directory for a 'string' keyword. If it finds the 'string' keyword within any of the files, it will print the name of this file to the IDLE command screen. It seems to work quite well. The inputs are gathered by the program using user prompts.Typically I am searching for a single word within a large series of text files.</p>\n\n<p>HOWEVER - Now I want to build on this in two ways\n1) I want to modify the code to that it can also search through all the files contained within sub-folders within the specified directory.\n2) I would also like to specify that the searches are limited to a certain type of file extension such as .txt.</p>\n\n<p>Can anyone provide some guidance on either of these two enhancements ???</p>\n\n<p>I am using Python 3 and am VERY new to Python (Just started playing with it 2 weeks ago in an attempt to automate some boring searches through my employers folder structures)</p>\n\n<p>Much appreciated to anyone who can provide some help.\nCheers,\nFraz</p>\n\n<pre><code># This script will search through all files within a single directory for a single key word\n# If the script finds the word within any of the files it will print the name of this file to the command line\n\nimport os\n\nprint ('When answering questions, do not add a space and use forward slash separators on file paths')\nprint ('')\n\n# Variables to be defined by user input\nuser_input = input('Paste the directory you want to search?')\ndirectory = os.listdir(user_input)\nsearchstring = input('What word are you trying to find within these files?')\n\n\nfor fname in directory:\n    if os.path.isfile(user_input + os.sep + fname):\n        # Full path\n        f = open(user_input + os.sep + fname, 'r')\n\n        if searchstring in f.read():\n            print('found string in file \"%s\"' % fname)\n        f.close()enter code here\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "indices"], "comments": [{"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 2, "creation_date": 1531343658, "post_id": 51294185, "comment_id": 89566003, "body": "Your first array has shape <code>(3, 1)</code>, and the second one shape <code>(3, 2, 2)</code>. How do you go from <code>(3,)</code> to <code>(3, 1)</code> and from <code>(3, 2)</code> to <code>(3, 2, 2)</code>? Moreover, what determines the contents of the resulting arrays?"}, {"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 1, "creation_date": 1531344557, "post_id": 51294185, "comment_id": 89566361, "body": "What would you expect if the inputs were, say, <code>(4, 1)</code>, or <code>(4, 3, 2)</code>?"}, {"owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "reply_to_user": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 0, "creation_date": 1531391268, "post_id": 51294185, "comment_id": 89583100, "body": "@fuglede Thank you for your comment. I tried to clarify the question a little bit further. Regarding your question in the comment: <code>(3,)</code> results in <code>(3, 1)</code> since there are 3 cells which can be accessed by 1 index - <code>(3, 2)</code> results in <code>(3, 2, 2)</code> since there are 6 cells shaped 3 rows and 2 columns with each 2 indices to uniquely access them. So at first the generated array has the same shape as the input array - plus one additional dimension for the number of indices. <code>(4, 1)</code> would therefore result in <code>(4, 1, 2)</code> and <code>(4, 3, 2)</code> would result in <code>(4, 3, 2, 3)</code>. I hope this helps? :-)"}, {"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 1, "creation_date": 1531392988, "post_id": 51294185, "comment_id": 89584235, "body": "Yep, that&#39;s clearer, thanks. In that case, it would seem that the provided answer is what you&#39;re looking for?"}, {"owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "reply_to_user": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 0, "creation_date": 1531393121, "post_id": 51294185, "comment_id": 89584317, "body": "@fuglede Yes, I think so, too. Just wanted to clear that up in case you&#39;d have another idea or answer. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 4, "last_activity_date": 1531345633, "last_edit_date": 1531345633, "creation_date": 1531344825, "answer_id": 51294476, "question_id": 51294185, "link": "https://stackoverflow.com/questions/51294185/generate-numpy-array-containing-the-indices-of-another-numpy-array/51294476#51294476", "title": "Generate NumPy array containing the indices of another NumPy array", "body": "<p>One way to do it with <code>np.indices</code> and <code>np.stack</code>:</p>\n\n<pre><code>np.stack(np.indices((3,)), -1)\n\n#array([[0],\n#       [1],\n#       [2]])\n\nnp.stack(np.indices((3,2)), -1)\n\n#array([[[0, 0],\n#        [0, 1]],\n#       [[1, 0],\n#        [1, 1]],\n#       [[2, 0],\n#        [2, 1]]])\n</code></pre>\n\n<p><code>np.indices</code> returns an array of index grid where each subarray represents an axis:</p>\n\n<pre><code>np.indices((3, 2))\n\n#array([[[0, 0],\n#        [1, 1],\n#        [2, 2]],        \n#       [[0, 1],\n#        [0, 1],\n#        [0, 1]]])\n</code></pre>\n\n<p>Then transpose the array with <code>np.stack</code>, stacking index for each element from different axis:</p>\n\n<pre><code>np.stack(np.indices((3,2)), -1)\n\n#array([[[0, 0],\n#        [0, 1]],\n#       [[1, 0],\n#        [1, 1]],\n#       [[2, 0],\n#        [2, 1]]])\n</code></pre>\n"}], "owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 51294476, "answer_count": 1, "score": 1, "last_activity_date": 1531390852, "creation_date": 1531343341, "last_edit_date": 1531390852, "question_id": 51294185, "link": "https://stackoverflow.com/questions/51294185/generate-numpy-array-containing-the-indices-of-another-numpy-array", "title": "Generate NumPy array containing the indices of another NumPy array", "body": "<p>I'd like to generate a <code>np.ndarray</code> NumPy array for a given shape of another NumPy array. The former array should contain the corresponding indices for each cell of the latter array.</p>\n\n<p><strong>Example 1</strong></p>\n\n<p>Let's say we have <code>a = np.ones((3,))</code> which has a shape of <code>(3,)</code>. I'd expect</p>\n\n<pre><code>[[0]\n [1]\n [2]]\n</code></pre>\n\n<p>since there is <code>a[0]</code>, <code>a[1]</code> and <code>a[2]</code> in <code>a</code> which can be accessed by their indices <code>0</code>, <code>1</code> and <code>2</code>.</p>\n\n<p><strong>Example 2</strong></p>\n\n<p>For a shape of <code>(3, 2)</code> like <code>b = np.ones((3, 2))</code> there is already very much to write. I'd expect</p>\n\n<pre><code>[[[0 0]\n  [0 1]]\n\n [[1 0]\n  [1 1]]\n\n [[2 0]\n  [2 1]]]\n</code></pre>\n\n<p>since there are 6 cells in <code>b</code> which can be accessed by the corresponding indices <code>b[0][0]</code>, <code>b[0][1]</code> for the first row, <code>b[1][0]</code>, <code>b[1][1]</code> for the second row and <code>b[2][0]</code>, <code>b[2][1]</code> for the third row. Therefore we get <code>[0 0]</code>, <code>[0 1]</code>, <code>[1 0]</code>, <code>[1 1]</code>, <code>[2 0]</code> and <code>[2 1]</code> at the matching positions in the generated array.</p>\n\n<p>Thank you very much for taking the time. Let me know if I can clarify the question in any way.</p>\n"}, {"tags": ["python", "sockets", "file-transfer"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1531367814, "post_id": 51294154, "comment_id": 89571352, "body": "Most likely the exception is raised because you called <code>s.close()</code> on the socket, and then tried to call <code>s.sendall()</code> on the now-closed socket in the next iteration of your while-loop."}, {"owner": {"reputation": 593, "user_id": 7491982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1", "display_name": "helen", "link": "https://stackoverflow.com/users/7491982/helen"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1531378866, "post_id": 51294154, "comment_id": 89575141, "body": "@JeremyFriesner Which s.close() you mean? the one that is in the else condition? I removed it. Although the error disappeared, I have an infinite loop in receiver.py which prints .adobe.com ..."}], "answers": [{"comments": [{"owner": {"reputation": 593, "user_id": 7491982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1", "display_name": "helen", "link": "https://stackoverflow.com/users/7491982/helen"}, "edited": false, "score": 0, "creation_date": 1531384344, "post_id": 51300492, "comment_id": 89578470, "body": "Ok, I replaced <code>s.close()</code> with <code>break</code>. But there is still problem and my photo is not transferred correctly. Only when I change <code>s.sendall()</code> to <code>s.send()</code>, this photo transfer seems to be correct. However, in my previous question (<a href=\"https://stackoverflow.com/questions/51274595/python-socket-programming-for-transferring-a-photo\" title=\"python socket programming for transferring a photo\">stackoverflow.com/questions/51274595/&hellip;</a>), In order for my transfer to take place correctly and completely, I should use <code>sendall()</code> instead of <code>send()</code>... But as you see when I do this, I encounter an error or infinite loop"}, {"owner": {"reputation": 151, "user_id": 4234243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j8NfHtsAh1k/AAAAAAAAAAI/AAAAAAAAABM/7EMLfwe4nf0/photo.jpg?sz=128", "display_name": "dao leno", "link": "https://stackoverflow.com/users/4234243/dao-leno"}, "reply_to_user": {"reputation": 593, "user_id": 7491982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1", "display_name": "helen", "link": "https://stackoverflow.com/users/7491982/helen"}, "edited": false, "score": 0, "creation_date": 1531388997, "post_id": 51300492, "comment_id": 89581586, "body": "@helen Try the new one.That works for me in fedora os."}, {"owner": {"reputation": 593, "user_id": 7491982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1", "display_name": "helen", "link": "https://stackoverflow.com/users/7491982/helen"}, "edited": false, "score": 0, "creation_date": 1531431668, "post_id": 51300492, "comment_id": 89606355, "body": "Thanks. This solved the <code>s.sendall()</code> problem. But when I run these 2 codes, a 144 appears in output of sender.py (As it was there in my first error too) . What is it and why is it happening?"}, {"owner": {"reputation": 151, "user_id": 4234243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j8NfHtsAh1k/AAAAAAAAAAI/AAAAAAAAABM/7EMLfwe4nf0/photo.jpg?sz=128", "display_name": "dao leno", "link": "https://stackoverflow.com/users/4234243/dao-leno"}, "reply_to_user": {"reputation": 593, "user_id": 7491982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1", "display_name": "helen", "link": "https://stackoverflow.com/users/7491982/helen"}, "edited": false, "score": 1, "creation_date": 1531447096, "post_id": 51300492, "comment_id": 89609599, "body": "144 is length of file. <code>print sys.getsizeof(f)</code>"}], "tags": [], "owner": {"reputation": 151, "user_id": 4234243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j8NfHtsAh1k/AAAAAAAAAAI/AAAAAAAAABM/7EMLfwe4nf0/photo.jpg?sz=128", "display_name": "dao leno", "link": "https://stackoverflow.com/users/4234243/dao-leno"}, "is_accepted": true, "score": 1, "last_activity_date": 1531388877, "last_edit_date": 1531388877, "creation_date": 1531383252, "answer_id": 51300492, "question_id": 51294154, "link": "https://stackoverflow.com/questions/51294154/socket-programming-for-transferring-a-photo-in-python/51300492#51300492", "title": "socket programming for transferring a photo in python", "body": "<p>After send all data, you closed socket.And use closed socket again, that cause error.You can write sender like this.</p>\n\n<pre><code>import socket\nimport sys\n\nf=open (\"1.jpg\", \"rb\")\nprint sys.getsizeof(f)\nbuf = 1024\ndata = f.read(buf)\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.connect(('10.0.0.1',12345))\n\nwhile 1:\n    if not data:\n        break\n    s.sendall(data)\n    data = f.read(buf)\ns.close()\n</code></pre>\n"}], "owner": {"reputation": 593, "user_id": 7491982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1", "display_name": "helen", "link": "https://stackoverflow.com/users/7491982/helen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 51300492, "answer_count": 1, "score": 0, "last_activity_date": 1531388877, "creation_date": 1531343154, "last_edit_date": 1531382444, "question_id": 51294154, "link": "https://stackoverflow.com/questions/51294154/socket-programming-for-transferring-a-photo-in-python", "title": "socket programming for transferring a photo in python", "body": "<p>I'm new to socket programming in python. Here is an example of opening a TCP socket in a Mininet host and sending a photo from one host to another. In fact I have changed the code which I used to send a simple message to another host (<a href=\"https://stackoverflow.com/questions/51265502/writing-the-received-data-to-a-text-file\">writing the received data to a text file</a>) in order to meet my requirements. \nBut when I run this code, I encounter this error at sender side:</p>\n\n<pre><code>144\nTraceback (most recent call last):\n  File mmyClient2,pym, line 13, in &lt;module&gt; \n    if(s.sendall(data)):\n  File m/usr/lib/python2.7/socket.pym, line 228, in meth\n    return yetattr[self,_sockename](*args) \n  File m/usr/lib/python2.7/socket.pym, line 174, in _dummy \n    raise error(EBADF, 'Bad file descriptor') \nsocket,error: [Errno 9] Bad file descriptor  \n</code></pre>\n\n<p>So what's wrong?</p>\n\n<p>Receiver.py</p>\n\n<pre><code>import socket\nimport sys\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\ns.bind(('10.0.0.1', 12345))\n\nbuf = 1024\nf = open(\"2.jpg\",'wb')\n\ns.listen(1)\nconn , addr = s.accept()\nwhile 1:\n    data = conn.recv(buf)\n    print(data[:10])\n    #print \"PACKAGE RECEIVED...\"\n    f.write(data)   \n    if not data: break\n    #conn.send(data)\nconn.close()\ns.close()\n</code></pre>\n\n<p>Sender.py:</p>\n\n<pre><code>import socket\nimport sys\n\nf=open (\"1.jpg\", \"rb\")\nprint sys.getsizeof(f)\nbuf = 1024\ndata = f.read(buf)\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.connect(('10.0.0.1',12345))\n\nwhile (data):\n    if(s.sendall(data)):\n        #print \"sending ...\"\n        data = f.read(buf)\n        #print(f.tell(), data[:10])\ns.close()\n</code></pre>\n\n<p>There seems to be a problem with s.sendall(), because when I change it to s.send(), there is no error and photo transfer is successful. So my question is: Although I was suggested to use s.sendall() instead of s.send() in my previous question on this site, Is it wrong not to do this?</p>\n"}, {"tags": ["python", "google-api", "google-oauth", "google-api-python-client", "oauth2client"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531343180, "post_id": 51294143, "comment_id": 89565823, "body": "I&#39;m a little confused, but if you want to keep your creds in the script, you can probably just make a dict with them in there."}, {"owner": {"reputation": 8677, "user_id": 9337071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52afdb783a619060eb2b0c0cb5766d3?s=128&d=identicon&r=PG&f=1", "display_name": "tehhowch", "link": "https://stackoverflow.com/users/9337071/tehhowch"}, "edited": false, "score": 0, "creation_date": 1531344343, "post_id": 51294143, "comment_id": 89566283, "body": "If you switch away from the <a href=\"https://google-auth.readthedocs.io/en/latest/oauth2client-deprecation.html\" rel=\"nofollow noreferrer\">deprecated <code>oauth2client</code></a> package and move to the <a href=\"https://google-auth.readthedocs.io/en/latest/index.html\" rel=\"nofollow noreferrer\"><code>google-auth</code></a> / <a href=\"https://google-auth-oauthlib.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\"><code>google-auth-oauth</code></a> packages, you can use the <a href=\"https://google-auth-oauthlib.readthedocs.io/en/latest/reference/google_auth_oauthlib.flow.html\" rel=\"nofollow noreferrer\"><code>Flow.from_client_config</code></a> method with your dict of the information from the <code>client_secrets</code> file."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7812593"}, "reply_to_user": {"reputation": 8677, "user_id": 9337071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52afdb783a619060eb2b0c0cb5766d3?s=128&d=identicon&r=PG&f=1", "display_name": "tehhowch", "link": "https://stackoverflow.com/users/9337071/tehhowch"}, "edited": false, "score": 1, "creation_date": 1531419617, "post_id": 51308280, "comment_id": 89601001, "body": "Thanks for the tip, I&#39;ll update my post definitely new to this site."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7812593"}, "is_accepted": false, "score": 0, "last_activity_date": 1531419713, "last_edit_date": 1531419713, "creation_date": 1531405846, "answer_id": 51308280, "question_id": 51294143, "link": "https://stackoverflow.com/questions/51294143/how-to-use-json-string-as-credentials-instead-of-filepath-for-python-with-google/51308280#51308280", "title": "How to use JSON string as credentials instead of filepath for Python with Google API", "body": "<p>Changed my code to this:</p>\n\n<pre><code>SCOPES = 'https://www.googleapis.com/auth/spreadsheets'\nstore = file.Storage('credentials.json')\n\nflow = client.OAuth2WebServerFlow(client_id='619103408544-qbpfk38g9jk4tkc5gshvds9hs8g5ur9o.apps.googleusercontent.com',\n                                    client_secret='faJQr2Wd3x25_yKYIWslxR4s',\n                                    scope=SCOPES)\ncreds = tools.run_flow(flow, store)\nservice = build('sheets', 'v4', http=creds.authorize(Http()))\n</code></pre>\n\n<p>Used a different function to create the flow, turns out you don't need to actually use the store to make the credentials so I just deleted the store.get() line.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7812593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1026, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531419713, "creation_date": 1531343083, "last_edit_date": 1531343602, "question_id": 51294143, "link": "https://stackoverflow.com/questions/51294143/how-to-use-json-string-as-credentials-instead-of-filepath-for-python-with-google", "title": "How to use JSON string as credentials instead of filepath for Python with Google API", "body": "<p>I'm looking for a way to build a <code>Google Credentials</code> object and access my Google Sheets spreadsheet without having to reference another file containing my <code>client_secret.json</code> data. This feels like it should be quite easy to do, I just want to be able to copy the JSON into my python script and access it that way, but I haven't been able to find a way to do it. </p>\n\n<p>According to <a href=\"https://oauth2client.readthedocs.io/en/latest/source/oauth2client.file.html\" rel=\"nofollow noreferrer\">https://oauth2client.readthedocs.io/en/latest/source/oauth2client.file.html</a> it seems like the only way to use the current method is with a filepath, but again if the file literally only contains JSON, it seems like there should be a way of just putting the JSON in my python script and using it from there.</p>\n\n<p>Listed below is how I currently get the values from my json file.</p>\n\n<pre><code>SCOPES = 'https://www.googleapis.com/auth/spreadsheets.readonly'\nstore = file.Storage('credentials.json')\ncreds = store.get()\nif not creds or creds.invalid:\n    flow = client.flow_from_clientsecrets('client_secret.json', SCOPES)\n    creds = tools.run_flow(flow, store)\nservice = build('sheets', 'v4', http=creds.authorize(Http()))\n\nSPREADSHEET_ID = ID\nRANGE_NAME = sheetName + '!A2:D'\nresult = service.spreadsheets().values().get(spreadsheetId=SPREADSHEET_ID,\n                                             range=RANGE_NAME).execute()\n</code></pre>\n"}, {"tags": ["python", "curl", "urllib2", "artifactory", "python-2.6"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1531343884, "post_id": 51294105, "comment_id": 89566103, "body": "Why not use requests package?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531346061, "post_id": 51294105, "comment_id": 89566911, "body": "What part are you confused about here? If you don&#39;t know exactly what <code>curl</code> sends for this, set up a server (or just <code>nc -kl 8081</code>) and look at the output. It should be something like <a href=\"https://gist.github.com/abarnert/0eb457064bf39797b242e071f21c2d1a\" rel=\"nofollow noreferrer\">this</a> followed by the contents of <code>test.txt</code>."}, {"owner": {"reputation": 1605, "user_id": 2473110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/57Iv0.jpg?s=128&g=1", "display_name": "Sudheej", "link": "https://stackoverflow.com/users/2473110/sudheej"}, "edited": false, "score": 0, "creation_date": 1531346124, "post_id": 51294105, "comment_id": 89566940, "body": "My org has restrictions to pip request ,. urllib2 is available with python2"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531346127, "post_id": 51294105, "comment_id": 89566943, "body": "Meanwhile, if you know how to use <code>urllib2</code> in general, show what you&#39;ve got so far, and tell us which part you&#39;re stuck on. Do you not know how to make a PUT request? How to add auth? Or\u2026?"}], "owner": {"reputation": 1605, "user_id": 2473110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/57Iv0.jpg?s=128&g=1", "display_name": "Sudheej", "link": "https://stackoverflow.com/users/2473110/sudheej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531342878, "creation_date": 1531342878, "question_id": 51294105, "link": "https://stackoverflow.com/questions/51294105/convert-curl-request-to-python2-urllib2-request", "title": "Convert cURL request to Python2 urllib2 request", "body": "<p>I am trying to convert the below code in curl to python2 urllib2 request call for performing a \"PUT\" operation, it works fine with cURL but i am clueless on getting this converted to python2 code.</p>\n\n<blockquote>\n  <p>cURL</p>\n</blockquote>\n\n<pre><code>curl -X PUT -u myUser:myPassword -T test.txt \u201chttp://localhost:8081/artifactory/libs-release-local/test/test.txt\u201d\n</code></pre>\n\n<p>The problem i face is with the \"-T\" flag i am not sure how set this in urllib2 call. I tried using Postman for help by adding file to Body->form-data->file</p>\n\n<p>But the code is converted as below which i suspect is not the transfer file call.</p>\n\n<pre><code>curl -X PUT \\\n  http://localhost:8081/artifactory/my-repository/my/new/artifact/directory/file.txt \\\n  -H 'Cache-Control: no-cache' \\\n  -H 'Postman-Token: 4ffbfca4-a4be-09de-c8ab-0731a2d67009' \\\n  -H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \\\n  -F '=@C:\\Devops\\file.txt'\n</code></pre>\n\n<p>I tried looking at documentations specified here under -T/--upload-file it does not help. Any suggestions.</p>\n\n<p><a href=\"https://www.computerhope.com/unix/curl.html\" rel=\"nofollow noreferrer\">https://www.computerhope.com/unix/curl.html</a></p>\n\n<p><a href=\"https://curl.haxx.se/libcurl/c/options-in-examples.html\" rel=\"nofollow noreferrer\">https://curl.haxx.se/libcurl/c/options-in-examples.html</a></p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 3, "creation_date": 1531342435, "post_id": 51293999, "comment_id": 89565537, "body": "what is <code>stocks</code>?"}, {"owner": {"reputation": 161, "user_id": 1853412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq79c.png?s=128&g=1", "display_name": "Eduardo EPF", "link": "https://stackoverflow.com/users/1853412/eduardo-epf"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531342938, "post_id": 51293999, "comment_id": 89565746, "body": "print(stocks) will give [&#39;AMZN&#39; &#39;AAPL&#39; &#39;FB&#39; &#39;GOOGL&#39;]"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1531343004, "post_id": 51293999, "comment_id": 89565767, "body": "There you go. It is not a <code>dict</code>. So just instantiate a dict and change it.. e.g. <code>stocks_dict = {}</code> and <code>stocks_dict[key] = ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1531343190, "post_id": 51294138, "comment_id": 89565825, "body": "You are wrong. You <i>can</i> access a dict with a string. The thing is: you have a numpy array, and thus you are changing the values in the indexes <code>enumerate</code> yielded"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531346566, "post_id": 51294138, "comment_id": 89567101, "body": "The statement &quot;Surprisingly you cant call a dictionary by a string=key as a dataframe column for instance. The key needs to be casted as an integer&quot; is false. The key of a dictionary can be a string for sure"}], "tags": [], "owner": {"reputation": 161, "user_id": 1853412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq79c.png?s=128&g=1", "display_name": "Eduardo EPF", "link": "https://stackoverflow.com/users/1853412/eduardo-epf"}, "is_accepted": false, "score": -1, "last_activity_date": 1531343068, "creation_date": 1531343068, "answer_id": 51294138, "question_id": 51293999, "link": "https://stackoverflow.com/questions/51293999/create-a-dictionary-of-dataframes-with-string-keys/51294138#51294138", "title": "Create a dictionary of dataframes with string keys", "body": "<p>I solved my problem. Surprisingly you cant call a dictionary by a string=key as a dataframe column for instance. The key needs to be casted as an integer.</p>\n\n<p>So what I did was the following\n    for i,key in enumerate(stocks):\n    stocks[i]=aux_matrix</p>\n"}], "owner": {"reputation": 161, "user_id": 1853412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq79c.png?s=128&g=1", "display_name": "Eduardo EPF", "link": "https://stackoverflow.com/users/1853412/eduardo-epf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1531375791, "creation_date": 1531342314, "last_edit_date": 1531375791, "question_id": 51293999, "link": "https://stackoverflow.com/questions/51293999/create-a-dictionary-of-dataframes-with-string-keys", "title": "Create a dictionary of dataframes with string keys", "body": "<p>I am trying to create a dictionary of dataframes looping through the keys. It seems there is a problem with the keys being strings so that I am getting the following error:</p>\n\n<pre><code>stocks[key]=pd.DataFrame()\nIndexError: only integers, slices (`:`), ellipsis (`...`), \nnumpy.newaxis \n(`None`) and integer or boolean arrays are valid indices\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>for key in stocks: \nn+=1\nstocks[key]=pd.DataFrame()\n</code></pre>\n\n<p>where keys are APPL, AMZN</p>\n\n<p>As simple as that :S What could be happening?</p>\n"}, {"tags": ["python", "visual-studio", "conda"], "comments": [{"owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "edited": false, "score": 0, "creation_date": 1531343260, "post_id": 51293963, "comment_id": 89565851, "body": "which is the error exactly?"}, {"owner": {"reputation": 319, "user_id": 9918056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac617a5e8b8078c67e53b07871a76419?s=128&d=identicon&r=PG&f=1", "display_name": "GusG", "link": "https://stackoverflow.com/users/9918056/gusg"}, "reply_to_user": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "edited": false, "score": 0, "creation_date": 1531344309, "post_id": 51293963, "comment_id": 89566268, "body": "The error message is basically how I described it; it needs MS Visual Studio Build Tools. Strange thing is that in my Windows run prompt, it cannot find cl.exe or MSbuild.exe. Let me reinstall this and then I give you a more accurate error message, that is if does happen again."}, {"owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "edited": false, "score": 0, "creation_date": 1531345159, "post_id": 51293963, "comment_id": 89566582, "body": "is there a vcvarsall.bat in your VS Build tools?"}, {"owner": {"reputation": 319, "user_id": 9918056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac617a5e8b8078c67e53b07871a76419?s=128&d=identicon&r=PG&f=1", "display_name": "GusG", "link": "https://stackoverflow.com/users/9918056/gusg"}, "reply_to_user": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "edited": false, "score": 1, "creation_date": 1531347120, "post_id": 51293963, "comment_id": 89567255, "body": "After installing MS Visual Studio Build Tools, I was able to find msbuild.exe. Cl.exe does not get install, and I did not find vcvarsall.bat using the Windows run command prompt. Frustrating having to reinstall it a second time. I was able to successfully finish the build.  Thanks for helping out."}], "owner": {"reputation": 319, "user_id": 9918056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac617a5e8b8078c67e53b07871a76419?s=128&d=identicon&r=PG&f=1", "display_name": "GusG", "link": "https://stackoverflow.com/users/9918056/gusg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531342568, "creation_date": 1531342148, "last_edit_date": 1531342568, "question_id": 51293963, "link": "https://stackoverflow.com/questions/51293963/error-building-flask-twisted-even-after-installing-ms-visual-c-build-studio-14", "title": "Error building flask-twisted even after installing MS Visual C++ Build Studio 14.0 in Conda", "body": "<p>Using conda, I ran 'pip install flask-twisted'. It then reported that it could not build as it needed MS Visual C++ 14.0 which can be obtained with VS C++ Build Tools. Well even after installing MS Visual Studio 2015 Build Tools, add the MS Visual Studio bin path to my environment variables and rebooting the PC, it still reports the same build error ... that it needs MS Visual Studio C++ 14.0.</p>\n\n<p>Any suggestions as how to fix this build error?</p>\n"}, {"tags": ["python", "excel", "vba", "xlwings", "chdir"], "comments": [{"owner": {"reputation": 3311, "user_id": 6147374, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d05b5955de351d18e1c8d715f97f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Ibo", "link": "https://stackoverflow.com/users/6147374/ibo"}, "edited": false, "score": 0, "creation_date": 1531343171, "post_id": 51293948, "comment_id": 89565822, "body": "why don&#39;t you use a complete path? or you can use a browser to select the file if it cannot find the python file in the previously selected directory"}, {"owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1531378239, "post_id": 51293948, "comment_id": 89574828, "body": "You need to set the PYTHONPATH (either in your addin or config file) in order for RunPython to find the file, see: <a href=\"http://docs.xlwings.org/en/stable/addin.html#global-settings\" rel=\"nofollow noreferrer\">docs.xlwings.org/en/stable/addin.html#global-settings</a>"}], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 8677466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f95c71bde0d7867be0d6b3966e62448c?s=128&d=identicon&r=PG&f=1", "display_name": "WLC", "link": "https://stackoverflow.com/users/8677466/wlc"}, "is_accepted": false, "score": 0, "last_activity_date": 1583160738, "creation_date": 1583160738, "answer_id": 60491357, "question_id": 51293948, "link": "https://stackoverflow.com/questions/51293948/changing-working-directory-for-runpython-import/60491357#60491357", "title": "Changing working directory for RunPython import", "body": "<p>Had the same problem. Turns out that you need to change the xlwings default path. In VB Editor go to xlwings.xlam ( if password is required it is \"xlwings\"), open the modules folder and select module \"main\". Add in Wsh.currentdirectory = \"C:\\\" in Sub ExecuteWindows as highlighted in the picture below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/l5xnv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l5xnv.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 39, "user_id": 10032708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f214aa45fa54e416f971a57962450a96?s=128&d=identicon&r=PG&f=1", "display_name": "MMac11", "link": "https://stackoverflow.com/users/10032708/mmac11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1583160738, "creation_date": 1531342062, "question_id": 51293948, "link": "https://stackoverflow.com/questions/51293948/changing-working-directory-for-runpython-import", "title": "Changing working directory for RunPython import", "body": "<p>I am trying to run my Python script from an Excel VBA macro. Originally I did not have an issue because the .py file was in the same directory as the excel file. Now we would like to store the .py file in a different directory and the macro produces an error.</p>\n\n<p>Original Macro:</p>\n\n<pre><code>RunPython (\"import pythonefile; pythonfile.get_data()\")\n</code></pre>\n\n<p>I would like to do something like the following, but am not sure how to change the directory that the macro imports the .py file from.</p>\n\n<pre><code>ChDir \"C:\\\"\nRunPython (\"import pythonfile; pythonfile.get_data()\"\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "flake8"], "comments": [{"owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "edited": false, "score": 2, "creation_date": 1531342157, "post_id": 51293937, "comment_id": 89565413, "body": "you can&#39;t return a print, so either print or return the formatted string that you print"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1531342184, "post_id": 51293937, "comment_id": 89565427, "body": "You may be running your linter in Python 2 mode. Also, <code>return print</code> is a really weird thing to do, and strongly suggests that you need to get a firmer understanding of how <code>return</code> and <code>print</code> work."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "edited": false, "score": 2, "creation_date": 1531342223, "post_id": 51293937, "comment_id": 89565442, "body": "@hootnot: It&#39;s technically valid syntax in Python 3, but it&#39;s a bizarre thing to do."}, {"owner": {"reputation": 16051, "user_id": 573034, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nHYpZ.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/573034/paolo"}, "edited": false, "score": 0, "creation_date": 1531342282, "post_id": 51293937, "comment_id": 89565469, "body": "it&#39;s valid in py3 because print is a (builtin) <i>function</i>"}, {"owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "edited": false, "score": 0, "creation_date": 1531342352, "post_id": 51293937, "comment_id": 89565499, "body": "indeed valid in python3"}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531342657, "post_id": 51293937, "comment_id": 89565626, "body": "Ah right, okay I see now; thanks guys!"}], "owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531342016, "creation_date": 1531342016, "question_id": 51293937, "link": "https://stackoverflow.com/questions/51293937/flake8-syntax-error-that-i-do-not-understand", "title": "flake8 syntax error that I do not understand", "body": "<p>I ran flake8 on my Employee program in order to check for PEP8 compliance and the only issue I have is a syntax error in the following line of code:</p>\n\n<pre><code>return print(\"Manager's ID:\", self.id, \"\\nSalary:\", self.salary,\n</code></pre>\n\n<p>can someone please tell me what the syntax error is in the line above?</p>\n\n<p>For context, the line comes from a method called info() which displays some basic Employee object information:</p>\n\n<pre><code>def info(self):\n    if isinstance(self, Manager):\n      return print(\"Manager's ID:\", self.id, \"\\nSalary:\", self.salary,\n                   \"\\nEmployee's under supervision:\", self.print_supervisees(),\n                   \"\\nManager started here on:\", self.start_time)\n    if isinstance(self, Supervisor):\n      return print(\"Supervisor's ID:\", self.id, \"\\nSalary:\", self.salary,\n                   \"\\nEmployee's under supervision:\", self.print_supervisees(),\n                   \"\\nSupervisor started here on:\", self.start_time)\n    elif isinstance(self, Developer):\n      return print(\"Developer's ID:\", self.id, \"\\nSalary:\", self.salary,\n                   \"\\nPrograming Language:\", self.programming_language,\n                   \"\\nDeveloper stated here on:\", self.start_time)\n    else:\n      return print(\"Employee ID:\", self.id, \"\\nSalary:\", self.salary,\n                   \"\\nEmployee stated here on:\", self.start_time)\n</code></pre>\n\n<p>This syntax error is not thrown by my IDE and the info() method works fine for all Employees as far as I know.</p>\n"}, {"tags": ["python", "scipy", "curve-fitting"], "comments": [{"owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "edited": false, "score": 1, "creation_date": 1531362211, "post_id": 51293922, "comment_id": 89570328, "body": "3 comments: a) post a complete, minimal example,  including output, b) plot your data and initial model to see if the model and starting parameter values are even close to reasonable, and c) avoid having to scale params and data by many orders of magnitude in the fit -- rescale the variables and data if necessary."}], "answers": [{"tags": [], "owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "is_accepted": false, "score": 1, "last_activity_date": 1531352562, "creation_date": 1531352562, "answer_id": 51295526, "question_id": 51293922, "link": "https://stackoverflow.com/questions/51293922/fitting-data-to-a-custom-model-in-python/51295526#51295526", "title": "fitting data to a custom model in python", "body": "<p>Here is code to restrict scipy's curve_fit parameters to within specified bounds. In this example, the first parameter's bounds are +/- infinity (unbounded), the second parameter's bounds are +/- 100 but the fitted parameter is within the bounds and fitted normally, and the third parameter is restricted by its bounds.</p>\n\n<pre><code>import numpy\nimport matplotlib\nimport matplotlib.pyplot as plt\nfrom scipy.optimize import curve_fit\n\nxData = numpy.array([5.0, 6.1, 7.2, 8.3, 9.4])\nyData = numpy.array([ 10.0,  18.4,  20.8,  23.2,  35.0])\n\n\ndef standardFunc(data, a, b, c):\n    return a * data + b * data**2 + c\n\n\n# some initial parameter values - must be within bounds\ninitialParameters = numpy.array([1.0, 1.0, 1.0])\n\n# bounds on parameters - initial parameters must be within these\nlowerBounds = (-numpy.Inf, -100.0, -5.0)\nupperBounds = (numpy.Inf, 100.0, 5.0)\nparameterBounds = [lowerBounds, upperBounds]\n\nfittedParameters, pcov = curve_fit(standardFunc, xData, yData, initialParameters, bounds = parameterBounds)\n\n# values for display of fitted function\na, b, c = fittedParameters\n\n# for plotting the fitting results\nxPlotData = numpy.linspace(min(xData), max(xData), 50)\ny_plot = standardFunc(xPlotData, a, b, c)\n\nplt.plot(xData, yData, 'D') # plot the raw data as a scatterplot\nplt.plot(xPlotData, y_plot) # plot the equation using the fitted parameters\nplt.show()\n\nprint('fitted parameters:', fittedParameters)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10039839, "user_type": "registered", "profile_image": "https://graph.facebook.com/2069320949776809/picture?type=large", "display_name": "Hemang Mehta", "link": "https://stackoverflow.com/users/10039839/hemang-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531352562, "creation_date": 1531341941, "last_edit_date": 1531342058, "question_id": 51293922, "link": "https://stackoverflow.com/questions/51293922/fitting-data-to-a-custom-model-in-python", "title": "fitting data to a custom model in python", "body": "<p>Hi So I am fairly used to python but this is the first time I am using python for data analysis and I was wondering if you could shed some light on an issue I am having. </p>\n\n<p>I need to fit about 4000 different plots to the following function :\n<code>b+e*A*(1.19104*(10**-16))*((x*(10**-9))**-5)*((-1+np.exp(0.0143878/(T*x*(10**-9))))**-1)</code>\nin this function I want to restrict b, e and A to certain values for each plot and the value of the variable T to shift according to the data.</p>\n\n<p>I tried using scipy optimize but I couldn't figure out how to hold parameters with that one.</p>\n\n<p>I tried using pyAstronomy funcfit but for one it is extremely inefficient (or maybe my code is idk) and I wasn't getting data that looked what I had approximated the data should look like.</p>\n\n<p>Finally I am currently trying to use lmfit but my code here seems to have all of the parameters stay the same as the guess and not vary at all. I am confused on how to proceed.\nmy current code looks like this...</p>\n\n<pre><code>def bbnm(x,b,e,T,A):\n   y = b+e*A*(1.19104*(10**-16))*((x*(10**-9))**-5)*((-1+np.exp(0.0143878/(T*x*(10**-9))))**-1)\n   return y     \n\nparams = bbmodel.make_params(b=0,e=.99,T=5100,A=wgeometry)\nparams['b'].vary = False\nparams['e'].vary = False\nparams['A'].vary = False\nparams['T'].vary = True\nbb = bbmodel.fit(power[1465:2510],params,x=wavelength[1465:2510])\n</code></pre>\n"}, {"tags": ["python", "arrays", "python-3.x", "list", "append"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1531342007, "post_id": 51293905, "comment_id": 89565347, "body": "It looks like your desired output can be expressed as <code>list(itertools.product(range(26), repeat=4))</code>"}, {"owner": {"reputation": 46, "user_id": 10067075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8c48SWTlzfs/AAAAAAAAAAI/AAAAAAAAABg/pH5hzfO0ffo/photo.jpg?sz=128", "display_name": "Samuel Wang", "link": "https://stackoverflow.com/users/10067075/samuel-wang"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1531391355, "post_id": 51293905, "comment_id": 89583162, "body": "@PatrickHaugh Thank you for your help so much. I really appreciate it!"}], "owner": {"reputation": 46, "user_id": 10067075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8c48SWTlzfs/AAAAAAAAAAI/AAAAAAAAABg/pH5hzfO0ffo/photo.jpg?sz=128", "display_name": "Samuel Wang", "link": "https://stackoverflow.com/users/10067075/samuel-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1531341880, "answer_count": 0, "score": 1, "last_activity_date": 1531341845, "creation_date": 1531341820, "last_edit_date": 1531341845, "question_id": 51293905, "link": "https://stackoverflow.com/questions/51293905/python-3-6-lists-becoming-the-last-element-appended-to-the-list", "closed_reason": "Duplicate", "title": "Python 3.6 lists becoming the last element appended to the list", "body": "<p>Using Python 3.6.4, I am using the following code to create a list of 4 element long lists, each of which contain integers. However, rather than creating a list of all the different 4 element lists, the list simply consists of the last 4 word list to be appended to the list. Are there any bugs in this code, or is there a problem with using the append function in my code at this scale? Any help is appreciated.</p>\n\n<hr>\n\n<pre><code>attemptList = []\ndataCardList = []\ncurrentAttempt = \"\"\nalphabet = \"abcdefghijklmnopqrstuvwxyz\"\nletter = 0\ndigit = 0\ndataCard = [-1,-1,-1,-1]\nwhile dataCard[0] &lt;= 25:\n    dataCard[0] += 1\n    dataCard[1] = 0\n    dataCard[2] = 0\n    dataCard[3] = 0\n    dataCardList.append(dataCard)\n    print(\"17576 Cards Made\")\n    while dataCard[1] &lt;= 25:\n        dataCard[1] += 1\n        dataCard[2] = 0\n        dataCard[3] = 0\n        dataCardList.append(dataCard)\n        while dataCard[2] &lt;= 25:\n            dataCard[2] += 1\n            dataCard[3] = 0\n            dataCardList.append(dataCard)\n            while dataCard[3] &lt;= 25:\n                dataCard[3] += 1\n                dataCardList.append(dataCard)\n                print(dataCard)\n                print(dataCardList)\n</code></pre>\n"}, {"tags": ["python", "image", "image-processing", "scikit-image"], "answers": [{"tags": [], "owner": {"reputation": 3747, "user_id": 224254, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3574772b96b3708ab652c69914bbcce0?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/224254/juan"}, "is_accepted": true, "score": 1, "last_activity_date": 1531372398, "creation_date": 1531372398, "answer_id": 51297722, "question_id": 51293876, "link": "https://stackoverflow.com/questions/51293876/how-to-access-properties-of-skimage-rag/51297722#51297722", "title": "How to access properties of skimage RAG", "body": "<p>Yes you can! Have a look at the <a href=\"https://github.com/scikit-image/scikit-image/blob/75f74d567a5b65db5b0c1906f9ce88c127ba042a/skimage/future/graph/rag.py#L295-L383\" rel=\"nofollow noreferrer\">code</a> for the <code>rag_mean_color</code> function. A RAG is a <a href=\"https://networkx.github.io/documentation/latest/reference/introduction.html#graphs\" rel=\"nofollow noreferrer\">NetworkX graph</a>, so you can use that API to access the data. Specifically, <code>graph.node[idx]['mean color']</code> contains the mean color for node <code>idx</code>. You can also find the size in <code>graph.node[idx]['pixel count']</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8622543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f09f5a770c62badb87771213e7ff3755?s=128&d=identicon&r=PG&f=1", "display_name": "cvik1", "link": "https://stackoverflow.com/users/8622543/cvik1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 1, "accepted_answer_id": 51297722, "answer_count": 1, "score": 0, "last_activity_date": 1531372398, "creation_date": 1531341703, "last_edit_date": 1531342206, "question_id": 51293876, "link": "https://stackoverflow.com/questions/51293876/how-to-access-properties-of-skimage-rag", "title": "How to access properties of skimage RAG", "body": "<p>I am doing image processing in python and am using the skimage rag_mean_color and segmentation methods to first segment the image. I then use graph.cut_threshold to merge adjacent regions with similar colors. At the end I have a very large region of a single color I want to extract. I have been using another method to try and get the most common color in the picture (kmeans) but am not getting the results I want. </p>\n\n<p>I was wondering if there is a way to get the color of the region directly from the graph. Thanks! </p>\n\n<p>RAG code:</p>\n\n<pre><code>img = cv2.imread(path)\n# convert the image to HSV \nimg = cv2.cvtColor(img, cv2.COLOR_RGB2HSV)\n# apply the RAG thresholding on the image\nlabels1 = segmentation.slic(img, compactness=10, n_segments=600)\nout1 = color.label2rgb(labels1, img, kind='avg')\n# create the region adjacency graph from the labels and image\ng = graph.rag_mean_color(img, labels1)\n# merge similar regions in the image/graph\nlabels2 = graph.cut_threshold(labels1, g, 20)\nout2 = color.label2rgb(labels2, img, kind='avg')\n# construct an updated graph for the image from the merged labels \ng2 = graph.rag_mean_color(out2, labels2)\n# merge similar regions a second time to ensure like regions are merged \nlabels3 = graph.cut_threshold(labels2, g2, 30)\nout3 = color.label2rgb(labels3, out2, kind='avg')\n</code></pre>\n\n<p>This is the image I get:<a href=\"https://i.stack.imgur.com/Hlj97.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hlj97.png\" alt=\"Image after RAG\"></a></p>\n\n<p>Dominant Color Code:</p>\n\n<pre><code># get the dominant (most common) color in an image using kmeans\n# convert the image into HSV color space\nimg = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)\n# reshape the photo to be rows of colors \ndata = img.copy().reshape((img.shape[0]*img.shape[1], 3)).astype(float)\n# apply kmeans to the data\ncentroids, codes = kmeans2(data, 5)\n# get the most common centroid\ncentroid = np.argmax(np.bincount(codes))\nd_color = centroids[centroid].astype(np.uint8)\n</code></pre>\n\n<p>This is the color I get: <a href=\"https://i.stack.imgur.com/TeCTD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TeCTD.png\" alt=\"Dominant Color\"></a></p>\n"}, {"tags": ["python", "command-line"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1531342040, "post_id": 51293852, "comment_id": 89565360, "body": "Most likely you&#39;re running the script with <i>Python3</i>, and the 1st line generates an error (and the interpreter and its <i>cmd</i> window closes before you have the chance to see it). Change it to: <code>print(&#39;Hello, world!&#39;)</code> and try again."}, {"owner": {"reputation": 389, "user_id": 4660406, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fNN5s.jpg?s=128&g=1", "display_name": "Zannith", "link": "https://stackoverflow.com/users/4660406/zannith"}, "edited": false, "score": 0, "creation_date": 1531342046, "post_id": 51293852, "comment_id": 89565364, "body": "What is your default application to open .py files, are you running it from command prompt?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9962623"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1531342279, "post_id": 51293852, "comment_id": 89565467, "body": "@CristiFati It does not output any type of error. It just opens and Closes repeatedly."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9962623"}, "reply_to_user": {"reputation": 389, "user_id": 4660406, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fNN5s.jpg?s=128&g=1", "display_name": "Zannith", "link": "https://stackoverflow.com/users/4660406/zannith"}, "edited": false, "score": 0, "creation_date": 1531342292, "post_id": 51293852, "comment_id": 89565474, "body": "@Zannith It defaults to using windows powershell."}, {"owner": {"reputation": 389, "user_id": 4660406, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fNN5s.jpg?s=128&g=1", "display_name": "Zannith", "link": "https://stackoverflow.com/users/4660406/zannith"}, "edited": false, "score": 0, "creation_date": 1531342500, "post_id": 51293852, "comment_id": 89565561, "body": "@Blake ah, its probably not running it through python. open a command prompt and type <code>python pathToFile&#47;yourFile.py</code> (Also make the change CristiFati suggested or it will give you an error). Also if you are wanting to run <code>.py</code> files by default i suggest making python your default for opening files with <code>.py</code> extension"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9962623"}, "reply_to_user": {"reputation": 389, "user_id": 4660406, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fNN5s.jpg?s=128&g=1", "display_name": "Zannith", "link": "https://stackoverflow.com/users/4660406/zannith"}, "edited": false, "score": 0, "creation_date": 1531342892, "post_id": 51293852, "comment_id": 89565724, "body": "@Zannith That Worked! Is there a way to make it so that I do not have to type python Path/Filename everytime. And So that I can just open the file that I saved as a .py?"}, {"owner": {"reputation": 389, "user_id": 4660406, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fNN5s.jpg?s=128&g=1", "display_name": "Zannith", "link": "https://stackoverflow.com/users/4660406/zannith"}, "edited": false, "score": 0, "creation_date": 1531342999, "post_id": 51293852, "comment_id": 89565763, "body": "@Blake yes by making the python executable your default application for opening files with .py extensions. If you are just getting into python however I would suggest getting an IDE. Then you will have syntax highlighting and you can just run it from within that environment"}, {"owner": {"reputation": 303, "user_id": 4820012, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N_oT-55XkKE/AAAAAAAAAAI/AAAAAAAAGD8/p82YDrN7nZo/photo.jpg?sz=128", "display_name": "Justin Malinchak", "link": "https://stackoverflow.com/users/4820012/justin-malinchak"}, "edited": false, "score": 0, "creation_date": 1531343019, "post_id": 51293852, "comment_id": 89565771, "body": "You can wrap it in a batch file: c:\\ProgramData\\Anaconda2\\python.exe C:\\automation\\CompareHoldings\\openguiformarketvalues.py"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1531343614, "post_id": 51293852, "comment_id": 89565980, "body": "How do you run the python script? Are you using the command line? Or are you double clicking its icon on the desktop?"}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 4660406, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fNN5s.jpg?s=128&g=1", "display_name": "Zannith", "link": "https://stackoverflow.com/users/4660406/zannith"}, "reply_to_user": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 1, "creation_date": 1531343530, "post_id": 51294169, "comment_id": 89565951, "body": "@SuperStew very true, clarified in answer. I assume if OP is just starting into python they would be using python 3, but thank you for pointing that out"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9962623"}, "edited": false, "score": 0, "creation_date": 1531400821, "post_id": 51294169, "comment_id": 89589576, "body": "@Zannith Hi, Sorry for taking so long to mark this as correct answer. But thanks for your time!"}], "tags": [], "owner": {"reputation": 389, "user_id": 4660406, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fNN5s.jpg?s=128&g=1", "display_name": "Zannith", "link": "https://stackoverflow.com/users/4660406/zannith"}, "is_accepted": true, "score": 0, "last_activity_date": 1531343481, "last_edit_date": 1531343481, "creation_date": 1531343258, "answer_id": 51294169, "question_id": 51293852, "link": "https://stackoverflow.com/questions/51293852/command-prompt-opens-and-closes-when-running-python-script/51294169#51294169", "title": "Command Prompt Opens and Closes When Running Python Script", "body": "<p>The first issue (if you are using Python3) is that the first line <code>print 'Hello, world!'</code> should be <code>print('Hello, world!')</code> </p>\n\n<p>As far as running it, it needs to be run using python. so in command prompt or powershell you will need to run the command like <code>python pathToFile/yourFile.py</code>  </p>\n\n<p>Or you can make python your default application for running files with <code>.py</code> extensions.  </p>\n\n<p>What I would suggest is downloading one of the many free IDE's for python if you are looking at learning the language</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9962623"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 51294169, "answer_count": 1, "score": 0, "last_activity_date": 1531343481, "creation_date": 1531341578, "last_edit_date": 1531341921, "question_id": 51293852, "link": "https://stackoverflow.com/questions/51293852/command-prompt-opens-and-closes-when-running-python-script", "title": "Command Prompt Opens and Closes When Running Python Script", "body": "<p>I just recently installed Python and when I write a simple script such as;</p>\n\n<pre><code>print 'Hello, world!'\ninput('Press ENTER to exit')\n</code></pre>\n\n<ul>\n<li><p>I save the script to my Desktop as a .Py</p></li>\n<li><p>I Run the Script and the Command Prompt opens and closes and repeats, until I go into task manager and kill the process to make it stop opening and closing.</p></li>\n</ul>\n\n<p>Any ideas on what's going on here and how to fix the issue?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 2, "creation_date": 1531341587, "post_id": 51293820, "comment_id": 89565200, "body": "<a href=\"https://docs.python.org/3/library/stdtypes.html#dict\" rel=\"nofollow noreferrer\"><b><code>dict</code></b></a> with <a href=\"https://docs.python.org/3/library/stdtypes.html#dict.setdefault\" rel=\"nofollow noreferrer\"><b><code>setdefault</code></b></a> and <code>list</code>, <code>set</code>, etc."}, {"owner": {"reputation": 165, "user_id": 9886515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "konsama", "link": "https://stackoverflow.com/users/9886515/konsama"}, "edited": false, "score": 0, "creation_date": 1531458651, "post_id": 51293820, "comment_id": 89611861, "body": "Yes, i completely agree, I am using this to learn. I wanted to know what I would need to know and some of the approaches to pursue that. This is merely for educational purposes. I used the context for insight. I could have not included it but wanted to be clear and honest."}, {"owner": {"reputation": 165, "user_id": 9886515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "konsama", "link": "https://stackoverflow.com/users/9886515/konsama"}, "edited": false, "score": 0, "creation_date": 1531458960, "post_id": 51293820, "comment_id": 89611966, "body": "This is definitely and exchange of knowledge and that is how I have treated this, in no way was this knowledge misused or utilised for personal gain. This is how exchanges for educational and knowledge purposes are used. You should broaden your scope for understanding and seeking and providing help. You may not have found this to be useful for your purposes but how can you possibly decide that it is not applicable to anyone else? -jonsharpe"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 9886515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "konsama", "link": "https://stackoverflow.com/users/9886515/konsama"}, "edited": false, "score": 0, "creation_date": 1531458736, "post_id": 51294000, "comment_id": 89611883, "body": "Thank you for the in-depth response! this was greatly helpful. i know I lack in some basic knowledge for python but this greatly helps me for material that I need to cover. Thank you very much!"}], "tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1531462957, "last_edit_date": 1531462957, "creation_date": 1531342324, "answer_id": 51294000, "question_id": 51293820, "link": "https://stackoverflow.com/questions/51293820/using-only-python-to-examine-and-process-a-flatfile-without-any-packages-or-libr/51294000#51294000", "title": "Using only python to examine and process a flatfile without any packages or libraries", "body": "<p><em>Edit:</em></p>\n\n<p>Seems I misread your description of the file format, this solution works if you get two rows with column-separated values in them - not for lots of rows with two comma sepparated values each. </p>\n\n<p>Leaving it in as its a mvca for the file format I thought you faced.</p>\n\n<hr>\n\n<p>You could do this:</p>\n\n<pre><code>data = \"\"\"Course: Science, Math, Science, History, Science, Math\nStudent_id: 101, 103, 102, 101, 103, 101\"\"\"\n\nfn = \"data.txt\"\n# write file\nwith open(fn,\"w\") as f:\n    f.write(data)\n</code></pre>\n\n<p>With that file you:</p>\n\n<pre><code># read file \nd = {}\nwith open(fn,\"r\") as f:\n    for line in f:\n        c,cc = line.split(\":\")\n        d[c] = [x.strip() for x in cc.split(\",\")]\n\n# create a (course,student)-tuple list          \ntups = list(zip( d[\"Course\"],d[\"Student_id\"]))\n\n# create a dict of course : student_list\n# you can streamline this using defaultdict from collections but that needs an import\ncourses = {}\nfor course,student in tups: # iterate, create course:pupillist dict\n\n    if course in courses:\n        courses[course].append(student)\n    else:\n        courses[course] = [student]\n\n# print all (including Science) with amount of pupils\nfor k in courses:\n    print(k, len(courses[k]))\n\n# print Math + StudentIds\nprint(\"Math: \", courses[\"Math\"])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Science 3\nMath 2\nHistory 1\nMath:  ['103', '101']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 9886515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "konsama", "link": "https://stackoverflow.com/users/9886515/konsama"}, "edited": false, "score": 0, "creation_date": 1531458681, "post_id": 51294041, "comment_id": 89611870, "body": "Thank you. I appreciate the response. Great help."}], "tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": false, "score": 3, "last_activity_date": 1531471044, "last_edit_date": 1531471044, "creation_date": 1531342568, "answer_id": 51294041, "question_id": 51293820, "link": "https://stackoverflow.com/questions/51293820/using-only-python-to-examine-and-process-a-flatfile-without-any-packages-or-libr/51294041#51294041", "title": "Using only python to examine and process a flatfile without any packages or libraries", "body": "<p>You can build a dictionary with courses as keys and keep <code>sets</code> of student ids. </p>\n\n<p>(You could keep <code>lists</code> of student ids but then you might end up with duplicates which would skew your numbers, although maybe that's something you should check and warn about or stop with an error.)</p>\n\n<p><code>dict</code> has a function <a href=\"https://docs.python.org/3/library/stdtypes.html#dict.setdefault\" rel=\"nofollow noreferrer\"><strong><code>setdefault</code></strong></a> which creates a value for a key only if it doesn't already exist, and returns the value. If you set a <code>set</code> it will return it and you can add the latest student id:</p>\n\n<pre><code>course_students = {}\n\nwith open(input) as flatfile:\n    for line in flatfile:\n        course, student_id = line.split(',')\n        course_students.setdefault(course, set()).add(student_id)\n\nprint(len(course_students['Science']))\nprint(course_students['Math'])\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 9886515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "konsama", "link": "https://stackoverflow.com/users/9886515/konsama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1531471044, "creation_date": 1531341405, "question_id": 51293820, "link": "https://stackoverflow.com/questions/51293820/using-only-python-to-examine-and-process-a-flatfile-without-any-packages-or-libr", "title": "Using only python to examine and process a flatfile without any packages or libraries", "body": "<p>I'm more of a SQL guy but I was asked a question that stumped me during an interview. I'll put the gist of it here:\nthere is a flatfile with two columns: 'Course' and 'Student_id' with several rows\nCourse: Science, Math, Science, History, Science, Math\nStudent_id: 101, 103, 102, 101, 103, 101</p>\n\n<p>How would you go about using only base python with no packages or libraries, grouping the students by courses, returning counts of students in each course, returning 'Science' with number of students enrolled, returning 'Math' with each student_id enrolled</p>\n\n<p>I knew how I would go about this in SQL and with pandas but did not know how to go about this in base python without packages or libraries. Please help. </p>\n"}, {"tags": ["python", "object", "syntax"], "comments": [{"owner": {"reputation": 8363, "user_id": 986793, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qfKe6.jpg?s=128&g=1", "display_name": "Neal Fultz", "link": "https://stackoverflow.com/users/986793/neal-fultz"}, "edited": false, "score": 2, "creation_date": 1531341310, "post_id": 51293796, "comment_id": 89565094, "body": "See also <a href=\"https://stackoverflow.com/questions/6892616/python-multiplication-override\" title=\"python multiplication override\">stackoverflow.com/questions/6892616/&hellip;</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1531341349, "post_id": 51293796, "comment_id": 89565112, "body": "Classes and instances of classes are completely different concepts. The terms are not interchangeable."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1531341734, "post_id": 51293796, "comment_id": 89565242, "body": "It&#39;s up to the class itself to determine what it means to multiply instances, by defining the <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__mul__\" rel=\"nofollow noreferrer\"><code>__mul__</code></a> method."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1531342139, "post_id": 51293796, "comment_id": 89565407, "body": "It&#39;s just convenient syntax for a binary operation taking two operands. You can make it mean whatever you like. It&#39;s good to make it make sense though and can improve the readability of code. If it isn&#39;t a good abstraction it can make code more difficult to understand as well, so use wisely."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 3, "last_activity_date": 1531342159, "creation_date": 1531342159, "answer_id": 51293967, "question_id": 51293796, "link": "https://stackoverflow.com/questions/51293796/python-what-does-it-mean-when-two-objects-are-multiplied-together-using-an-as/51293967#51293967", "title": "Python: What does it mean when two objects are &quot;multiplied&quot; together using an asterisk (*)?", "body": "<p>The <code>*</code> operator just means \"multiply\".</p>\n\n<p>But what it means for two objects to be multiplied is up to those objects' types to decide.</p>\n\n<p>For all of the builtin and stdlib types, it means multiplication if that makes sense, or it's a <code>TypeError</code> if that doesn't make sense. For example:</p>\n\n<pre><code>&gt;&gt;&gt; 2 * 3\n6\n&gt;&gt;&gt; (1, 2, 3) * 3\n(1, 2, 3, 1, 2, 3, 1, 2, 3)\n&gt;&gt;&gt; \"abc\" * \"def\"\nTypeError: can't multiply sequence by non-int of type 'str'\n</code></pre>\n\n<p>Since multiplication doesn't make sense for class objects, they're one of the kinds of things where it's a <code>TypeError</code>:</p>\n\n<pre><code>&gt;&gt;&gt; class C: pass\n&gt;&gt;&gt; C * 2\nTypeError: unsupported operand type(s) for *: 'type' and 'int'\n</code></pre>\n\n<hr>\n\n<p>If you (or a third-party library author) create a new type, you can decide what multiplication means. The way you do this is covered under <a href=\"https://docs.python.org/3/reference/datamodel.html#emulating-numeric-types\" rel=\"nofollow noreferrer\">Emulating numeric types</a> in the documentation, but the short version is that you define a <code>__mul__</code> method:</p>\n\n<pre><code>class MyNumberyThing:\n    def __init__(self, n):\n        self.n = n\n    def __repr__(self):\n        return f'MyNumberyType({self.n})'\n    def __mul__(self, other):\n        if isinstance(other, MyNumberyThing):\n            return MyNumberyThing(self.n * other.n)\n        elif isinstance(other, int):\n            return MyNumberyThing(self.n * other)\n        elif isinstance(other, float):\n            raise TypeError(\"sorry, can't multiply by float because of precision issues\")\n        else:\n            raise TypeError(f\"sorry, don't know how to multiply by {type(other).__name__}\")\n</code></pre>\n\n<p>Notice that this makes <em>instances of</em> <code>MyNumberyThing</code> multiplicable. It doesn't make <code>MyNumberyThing</code> itself multiplicable (<code>MyNumberyThing</code> isn't a <code>MyNumberyThing</code>, it's a <code>type</code>):</p>\n\n<pre><code>&gt;&gt;&gt; n = MyNumberyThing(2)\n&gt;&gt;&gt; n * 3\nMyNumberyType(6)\n&gt;&gt;&gt; MyNumberyThing * 3\nTypeError: unsupported operand type(s) for *: 'type' and 'int'\n</code></pre>\n\n<hr>\n\n<p>Of course nothing's stopping you from defining something ridiculous:</p>\n\n<pre><code>class MySillyThing:\n    def __mul__(self, other):\n        self.storage = -other\n        print(f'I took your {other}')\n\n&gt;&gt;&gt; silly = MySillyThing()\n&gt;&gt;&gt; silly * 3\nI took your 3\n&gt;&gt;&gt; silly.storage\n-3\n</code></pre>\n\n<p>\u2026 except, of course, for the fact that nobody would understand your code. (And that \"nobody\" includes you, 6 months later trying to debug something you thought you were done with\u2026)</p>\n\n<hr>\n\n<p>As a side note, Python actually has two ways to spell \"multiply\": <code>*</code> and <code>@</code>.</p>\n\n<p>The builtin types all ignore <code>@</code>, so you'll just get a <code>TypeError</code> if you try to use it. What it's there for is, basically, so NumPy can use <code>*</code> for elementwise multiplication, and <code>@</code> for matrix multiplication. (The <code>@</code> operator's magic method is even called <code>__matmul__</code>.) But of course other third-party libraries that similarly needed to do two different kinds of multiplication could use <code>@</code> for the second kind.</p>\n"}], "owner": {"reputation": 579, "user_id": 1985211, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eb5ac36b7bf3e0ac1d494423b48ae907?s=128&d=identicon&r=PG", "display_name": "Darcy", "link": "https://stackoverflow.com/users/1985211/darcy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 51293967, "answer_count": 1, "score": -1, "last_activity_date": 1531354114, "creation_date": 1531341249, "last_edit_date": 1531354114, "question_id": 51293796, "link": "https://stackoverflow.com/questions/51293796/python-what-does-it-mean-when-two-objects-are-multiplied-together-using-an-as", "title": "Python: What does it mean when two objects are &quot;multiplied&quot; together using an asterisk (*)?", "body": "<p>I am a bit of a Python newbie regarding classes. I have seen that some scripts include lines which appear to \"multiply\" instances of classes together. For example:</p>\n\n<pre><code>Z = X * Y\n</code></pre>\n\n<p>where X and Y are instances of two different classes. </p>\n\n<p>What does the * symbol mean and how is it applied to classes (or instances of classes) in Python?</p>\n\n<p>In most cases * pertains to multiplication, but I don't understand what it means to \"multiply\" classes.</p>\n\n<p>Any info is appreciated.</p>\n"}, {"tags": ["python", "arrays", "list", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 8228895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d0ac7818c2bc5a2ca9553b4732e194?s=128&d=identicon&r=PG&f=1", "display_name": "Cynthia", "link": "https://stackoverflow.com/users/8228895/cynthia"}, "edited": false, "score": 0, "creation_date": 1531341617, "post_id": 51293815, "comment_id": 89565209, "body": "Thanks for the response. How would I initialize it so that the 1st dimension is fixed? For example, if I wanted to initialize it as length 13 so I can access a certain index later."}, {"owner": {"reputation": 187, "user_id": 8228895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d0ac7818c2bc5a2ca9553b4732e194?s=128&d=identicon&r=PG&f=1", "display_name": "Cynthia", "link": "https://stackoverflow.com/users/8228895/cynthia"}, "edited": false, "score": 0, "creation_date": 1531341778, "post_id": 51293815, "comment_id": 89565257, "body": "Never mind, I found the answer here: <a href=\"https://stackoverflow.com/questions/10712002/create-an-empty-list-in-python-with-certain-size\" title=\"create an empty list in python with certain size\">stackoverflow.com/questions/10712002/&hellip;</a>. Thanks for your help!"}], "tags": [], "owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "is_accepted": true, "score": 2, "last_activity_date": 1531341370, "creation_date": 1531341370, "answer_id": 51293815, "question_id": 51293795, "link": "https://stackoverflow.com/questions/51293795/how-to-create-an-array-of-lists-in-python/51293815#51293815", "title": "How to create an array of lists in python?", "body": "<p>It's just called a list of lists</p>\n\n<pre><code>x=[[5, 4, 3, 2, 1],[6, 5, 4, 3, 2, 1],[4, 3, 2, 1]]\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 8228895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d0ac7818c2bc5a2ca9553b4732e194?s=128&d=identicon&r=PG&f=1", "display_name": "Cynthia", "link": "https://stackoverflow.com/users/8228895/cynthia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6134, "favorite_count": 0, "accepted_answer_id": 51293815, "answer_count": 1, "score": 0, "last_activity_date": 1531341370, "creation_date": 1531341234, "question_id": 51293795, "link": "https://stackoverflow.com/questions/51293795/how-to-create-an-array-of-lists-in-python", "title": "How to create an array of lists in python?", "body": "<p>Does anyone know how to create an array of lists in python?</p>\n\n<p>For example, if I want the final structure to contain data where the 1st dimension is fixed but the 2nd dimension varies:</p>\n\n<p>index 0: [5, 4, 3, 2, 1]</p>\n\n<p>index 1: [6, 5, 4, 3, 2, 1]</p>\n\n<p>index 2: [4, 3, 2, 1]</p>\n"}, {"tags": ["python", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1531343206, "post_id": 51293794, "comment_id": 89565832, "body": "What are you asking? This code is Pythonic. Putting it in a list-comprehension would make it <i>not pythonic</i>, unless you aren&#39;t trying to create a list, but AFAIKT you are just trying to print stuff (which you shouldn&#39;t do in a list comprehension, because list comprehensions are for creating lists, not for side-effects). Speaking of unecessary list comprehensions, <code>compr = [x for x in doc]</code> -&gt; <code>compr = list(doc)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": false, "score": 1, "last_activity_date": 1531343583, "creation_date": 1531343583, "answer_id": 51294229, "question_id": 51293794, "link": "https://stackoverflow.com/questions/51293794/dictionary-in-a-list-comprehension/51294229#51294229", "title": "dictionary in a list comprehension", "body": "<p>May be you can try unpacking values in <code>print</code> but you may need to import <code>print_function</code> for python2 as described in other <a href=\"https://stackoverflow.com/a/41047137/5916727\">answer</a>:</p>\n\n<pre><code>from __future__ import print_function\ndoc = [{'UK': {'City': [1, 2, 3]}}, {'France': {'City': [1, 2]}}, {'US': {'City': [1, 2, 3]}}]\n\nfor element in doc:\n    for k1, v1 in element.items():\n        print(k1)\n        print(*v1, ' '.join(map(str,*v1.values())), sep=' ')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1531362401, "creation_date": 1531362401, "answer_id": 51296505, "question_id": 51293794, "link": "https://stackoverflow.com/questions/51293794/dictionary-in-a-list-comprehension/51296505#51296505", "title": "dictionary in a list comprehension", "body": "<p>You could try this:</p>\n\n<pre><code>doc = [{'UK': {'City': [1, 2, 3]}}, {'France': {'City': [1, 2]}}, {'US': {'City': [1, 2, 3]}}]\n\nfor dic in doc:\n    for country, data in dic.items():\n        print(country)\n        for city, numbers in data.items():\n            print(' '.join([city] + list(map(str, numbers))))\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>UK\nCity 1 2 3\nFrance\nCity 1 2\nUS\nCity 1 2 3\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8200800, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e662676f27ce125af9e1b6b924b18486?s=128&d=identicon&r=PG&f=1", "display_name": "sergey", "link": "https://stackoverflow.com/users/8200800/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1531362401, "creation_date": 1531341233, "last_edit_date": 1531341498, "question_id": 51293794, "link": "https://stackoverflow.com/questions/51293794/dictionary-in-a-list-comprehension", "title": "dictionary in a list comprehension", "body": "<p>I trying to compress the below code as much as possible and as pythonic as possible, appreciate suggestion.</p>\n\n<pre><code>#!/Library/Frameworks/Python.framework/Versions/2.7/bin/python\nimport yaml\n\nFILE='t'\n\nwith open(FILE, 'r') as F:\n    doc = yaml.load(F)\n\ncompr = [x for x in doc]\n\nfor x in doc:\n    for k,v in x.items():\n        print \"\\n\"\n        print k\n        for k2,v2 in v.items():\n            print k2,\n            for b in v2:\n                print b,\n</code></pre>\n\n<p>the output of doc looks like this:</p>\n\n<pre><code>[{'UK': {'City': [1, 2, 3]}}, {'France': {'City': [1, 2]}}, {'US': {'City': [1, 2, 3]}}]\n</code></pre>\n\n<p>My expected output is below:</p>\n\n<pre><code>UK\nCity 1 2 3\nFrance\nCity 1 2\nUS\nCity 1 2 3\n</code></pre>\n"}, {"tags": ["python", "opencv", "imutils"], "answers": [{"comments": [{"owner": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531343493, "post_id": 51294121, "comment_id": 89565932, "body": "Thank you Luke! still doesn&#39;t do the trick and the camera doesn&#39;t close. the green light is still open."}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "reply_to_user": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531343832, "post_id": 51294121, "comment_id": 89566082, "body": "@Cohen silly me I made a mistake. You are supposed to add <code>vs = VideoStream</code> before starting the stream. Check the update"}, {"owner": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531344041, "post_id": 51294121, "comment_id": 89566162, "body": "i did, i did! i got it, but still, it doesn&#39;t close...dunno what to do."}, {"owner": {"reputation": 10371, "user_id": 3322400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l3BGk.jpg?s=128&g=1", "display_name": "Lo&#239;c", "link": "https://stackoverflow.com/users/3322400/lo%c3%afc"}, "edited": false, "score": 0, "creation_date": 1531344051, "post_id": 51294121, "comment_id": 89566166, "body": "this wouldn&#39;t change anything, you are copying the class, and using it later, forgetting affecting the instantiation."}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "reply_to_user": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531344304, "post_id": 51294121, "comment_id": 89566264, "body": "@Cohen You are doing it wrong. Please look closely it is <code>vs = VideoStream</code> not <code>vs = VideoStream(src=0)</code>. I tried it and it works, that is why I am suggesting it."}, {"owner": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531345935, "post_id": 51294121, "comment_id": 89566876, "body": "I&#39;ve changed it because i get this error odule&gt;     frame = vs.read() TypeError: read() missing 1 required positional argument: &#39;self&#39;"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "reply_to_user": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531346120, "post_id": 51294121, "comment_id": 89566939, "body": "@Cohen I&#39;m sorry but it works fine for me. Can you share the updated code again?"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "reply_to_user": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531376175, "post_id": 51294121, "comment_id": 89573959, "body": "@Cohen I tried the same on another system and the camera actually turns off. I still don&#39;t understand why it doesn&#39;t work for you :("}, {"owner": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531376220, "post_id": 51294121, "comment_id": 89573972, "body": "Me neither. I am on a mac."}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "reply_to_user": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531376336, "post_id": 51294121, "comment_id": 89574019, "body": "@Cohen The two systems that I tried on are Windows 8 and 10"}, {"owner": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531378748, "post_id": 51294121, "comment_id": 89575091, "body": "am on Mac so Unix environment. 10x"}, {"owner": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 1, "creation_date": 1531462630, "post_id": 51294121, "comment_id": 89613252, "body": "Yes. I changed the code. Somehow there was a loop that didnt want to break so i had to use raise Syserror or something like this. Thanks for help tough!"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "reply_to_user": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "edited": false, "score": 0, "creation_date": 1531718734, "post_id": 51294121, "comment_id": 89682474, "body": "@Cohen You can accept this answer if it helped you or an upvote would be uplifting!"}], "tags": [], "owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "is_accepted": true, "score": 0, "last_activity_date": 1531343794, "last_edit_date": 1531343794, "creation_date": 1531342959, "answer_id": 51294121, "question_id": 51293754, "link": "https://stackoverflow.com/questions/51293754/python-opencv-mac-webcam-doesnt-close/51294121#51294121", "title": "Python OpenCV--MAC WebCam doesn&#39;t close", "body": "<p><code>VideoStream</code> from <code>imutils</code> library is a class object, so when you assign it to <code>vs</code> you ought to treat it like one.</p>\n\n<p>Here is the fix:</p>\n\n<pre><code>#--- import libraries ---\nfrom imutils.video import VideoStream\n\nvs = VideoStream\n#--- start the video stream ---\nvs(src=0).start()\n\n#--\n# rest of your program \n#--\n\n#--- stop the video stream ---\nvs(src=0).stop()\n</code></pre>\n"}], "owner": {"reputation": 804, "user_id": 8127394, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/226887584491743/picture?type=large", "display_name": "Cohen", "link": "https://stackoverflow.com/users/8127394/cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 51294121, "answer_count": 1, "score": 2, "last_activity_date": 1531346183, "creation_date": 1531341045, "last_edit_date": 1531346183, "question_id": 51293754, "link": "https://stackoverflow.com/questions/51293754/python-opencv-mac-webcam-doesnt-close", "title": "Python OpenCV--MAC WebCam doesn&#39;t close", "body": "<p>I am running a face recognition code and my issue is that after running the code, my webcam doesn't close. The green light is still activated and in order to close it, i have to close my computer in order to have the cam ok.\nWhat do you suggest, why is like that?</p>\n\n<pre><code>from imutils.video import VideoStream\nimport argparse, imutils, time, cv2, os, sys\nimport time\nimport smtplib, os\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\nfrom email.mime.base import MIMEBase\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.image import MIMEImage\nfrom email.message import Message\nfrom email.mime.audio import MIMEAudio\nfrom email import encoders\n\n\n   detector = cv2.CascadeClassifier(\"haarcascade_frontalface_default.xml\")\n# vs = VideoStream(src=0).start()\nvs = VideoStream\nvs(src=0).start()\n# time.sleep(2.0)\ntotal = 0\n\nwhile True:\n    frame = vs.read()\n    orig = frame.copy()\n    frame = imutils.resize(frame, width=600)\n    rects = detector.detectMultiScale(\n        cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY), scaleFactor=1.1, \n        minNeighbors=5, minSize=(30, 30))\n    for (x, y, w, h) in rects:\n        cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 2)\n        if rects is not None and total &lt;5:\n            p=\"/Users/Desktop/atentie/mail/\"+str(total)+\".png\"\n            cv2.imwrite(p, orig)\n            total+=1\n\n    break   \n\ncv2.destroyAllWindows()\nvs(src=0).stop()\ntime.sleep(5)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 481, "user_id": 9179063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672b6c3912a337a3ff98e993747c8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "jbch", "link": "https://stackoverflow.com/users/9179063/jbch"}, "edited": false, "score": 0, "creation_date": 1531341058, "post_id": 51293725, "comment_id": 89564996, "body": "<code>break</code> is what you are looking for"}, {"owner": {"reputation": 13, "user_id": 10067044, "user_type": "registered", "profile_image": "https://graph.facebook.com/2245238335706181/picture?type=large", "display_name": "ANK", "link": "https://stackoverflow.com/users/10067044/ank"}, "reply_to_user": {"reputation": 481, "user_id": 9179063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672b6c3912a337a3ff98e993747c8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "jbch", "link": "https://stackoverflow.com/users/9179063/jbch"}, "edited": false, "score": 0, "creation_date": 1531341110, "post_id": 51293725, "comment_id": 89565015, "body": "How would I implement it, I honestly don&#39;t have much knowledge in coding. Sorry for the inconvenience."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10067044, "user_type": "registered", "profile_image": "https://graph.facebook.com/2245238335706181/picture?type=large", "display_name": "ANK", "link": "https://stackoverflow.com/users/10067044/ank"}, "edited": false, "score": 0, "creation_date": 1531341248, "post_id": 51293786, "comment_id": 89565068, "body": "Alright, I&#39;ll try it out right now and come back if it works out for me."}], "tags": [], "owner": {"reputation": 95, "user_id": 9680370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "sher222", "link": "https://stackoverflow.com/users/9680370/sher222"}, "is_accepted": true, "score": 1, "last_activity_date": 1531341202, "creation_date": 1531341202, "answer_id": 51293786, "question_id": 51293725, "link": "https://stackoverflow.com/questions/51293725/search-through-file-and-only-returning-the-first-x-results-in-python/51293786#51293786", "title": "Search through file and only returning the first x results in Python", "body": "<p>Maybe add a counter to keep track of how many you have already found and if you have found more than 20, stop. For example:</p>\n\n<pre><code>    with open(\"DIRECTORY/\"+arg2, 'r') as inF:\n    numFound = 0\n    for line in inF:\n\n        if arg1 in line:\n\n            await client.say(\"```\"+line+\"```\")\n            numFound += 1\n            if numFound == 20:\n                break\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10067044, "user_type": "registered", "profile_image": "https://graph.facebook.com/2245238335706181/picture?type=large", "display_name": "ANK", "link": "https://stackoverflow.com/users/10067044/ank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 51293786, "answer_count": 1, "score": 0, "last_activity_date": 1531341202, "creation_date": 1531340870, "question_id": 51293725, "link": "https://stackoverflow.com/questions/51293725/search-through-file-and-only-returning-the-first-x-results-in-python", "title": "Search through file and only returning the first x results in Python", "body": "<p>Alright, so I'm trying to code a bot for Discord that searches through a defined file for a defined string, right now it's working but it's returning every instance of the string, so like if someone was to look for  in file \"b\" it would literally print every single line containing that letter until the end, which in the bots case, causes a denial of service due to overuse of memory and CPU.</p>\n\n<p>What I want it to do is only return the first like 10 or 20 results from the file, then stop searching. It's coded for discord.py</p>\n\n<p>Here's the code:</p>\n\n<pre><code>@client.command()\nasync def search(arg1, arg2):\n    await client.say(\"Searching for \"+arg1+\" in \"+arg2+\"...\")\n    with open(\"DIRECTORY/\"+arg2, 'r') as inF:\n        for line in inF:\n            if arg1 in line:\n                await client.say(\"```\"+line+\"```\")\n</code></pre>\n\n<p>What do I need to change or add?</p>\n"}, {"tags": ["python", "python-3.x", "datetime"], "comments": [{"owner": {"reputation": 787, "user_id": 5478400, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7C23jsNeFro/AAAAAAAAAAI/AAAAAAAAABA/AIqV_26iJ2Q/photo.jpg?sz=128", "display_name": "ZhouQuan", "link": "https://stackoverflow.com/users/5478400/zhouquan"}, "edited": false, "score": 0, "creation_date": 1531340521, "post_id": 51293632, "comment_id": 89564794, "body": "there is similar question like this <a href=\"https://stackoverflow.com/questions/993358/creating-a-range-of-dates-in-python\" title=\"creating a range of dates in python\">stackoverflow.com/questions/993358/&hellip;</a>"}, {"owner": {"reputation": 365, "user_id": 8098467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iOQeK.jpg?s=128&g=1", "display_name": "Harley", "link": "https://stackoverflow.com/users/8098467/harley"}, "edited": false, "score": 0, "creation_date": 1531340576, "post_id": 51293632, "comment_id": 89564821, "body": "Possible duplicate of: <a href=\"https://stackoverflow.com/questions/29721228/given-a-date-range-how-can-we-break-it-up-into-n-contiguous-sub-intervals\" title=\"given a date range how can we break it up into n contiguous sub intervals\">stackoverflow.com/questions/29721228/&hellip;</a>"}, {"owner": {"reputation": 365, "user_id": 8098467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iOQeK.jpg?s=128&g=1", "display_name": "Harley", "link": "https://stackoverflow.com/users/8098467/harley"}, "edited": false, "score": 1, "creation_date": 1531340586, "post_id": 51293632, "comment_id": 89564828, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29721228/given-a-date-range-how-can-we-break-it-up-into-n-contiguous-sub-intervals\">Given a date range how can we break it up into N contiguous sub-intervals?</a>"}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 1, "creation_date": 1531340621, "post_id": 51293632, "comment_id": 89564839, "body": "What have you tried already? What did it produce and how does that fall short of what you are looking for?"}, {"owner": {"reputation": 2775, "user_id": 6104077, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64cafb3f689f97da3bb17aa97b97318f?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/6104077/sushant"}, "edited": false, "score": 0, "creation_date": 1531340743, "post_id": 51293632, "comment_id": 89564892, "body": "What&#39;s the difference with which you want to split the dates? Like your first date is 15, then it&#39;s 28, then it&#39;s 1, so it pretty much seem random"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 2775, "user_id": 6104077, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64cafb3f689f97da3bb17aa97b97318f?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/6104077/sushant"}, "edited": false, "score": 0, "creation_date": 1531340871, "post_id": 51293632, "comment_id": 89564938, "body": "@ThatBird: each section stops and starts at the next whole month. Februari had only 28 days in 2018."}, {"owner": {"reputation": 2775, "user_id": 6104077, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64cafb3f689f97da3bb17aa97b97318f?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/6104077/sushant"}, "edited": false, "score": 0, "creation_date": 1531340986, "post_id": 51293632, "comment_id": 89564973, "body": "What about April?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 2775, "user_id": 6104077, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64cafb3f689f97da3bb17aa97b97318f?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/6104077/sushant"}, "edited": false, "score": 0, "creation_date": 1531341096, "post_id": 51293632, "comment_id": 89565009, "body": "@ThatBird: it starts at the 1st but ends at the 23rd because that is the end of the original range."}, {"owner": {"reputation": 102, "user_id": 9062613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42da67b223a520a83dd195f57517c55a?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Chetty", "link": "https://stackoverflow.com/users/9062613/brandon-chetty"}, "reply_to_user": {"reputation": 365, "user_id": 8098467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iOQeK.jpg?s=128&g=1", "display_name": "Harley", "link": "https://stackoverflow.com/users/8098467/harley"}, "edited": false, "score": 1, "creation_date": 1531341149, "post_id": 51293632, "comment_id": 89565035, "body": "@Harley Thanks for the suggestion. I have looked at the top answer, but I&#39;m unsure of how to adapt it to my needs. The answer splits the date range into a specified interval. I do not know how many days there could be in a specific month, hence, using the answer and splitting by an interval of 30 may not always be correct"}, {"owner": {"reputation": 323, "user_id": 348142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41cedaabd6321ba0f386299ec53092e2?s=128&d=identicon&r=PG", "display_name": "Kiran Subbaraman", "link": "https://stackoverflow.com/users/348142/kiran-subbaraman"}, "edited": false, "score": 0, "creation_date": 1584639599, "post_id": 51293632, "comment_id": 107505181, "body": "Had a similar need. Ended up using <a href=\"https://arrow.readthedocs.io/en/latest/#ranges-spans\" rel=\"nofollow noreferrer\">arrow</a>. <code>arrow.Arrow.span_range(&#39;month&#39;, start, end)</code> does the trick."}], "answers": [{"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531344590, "post_id": 51294302, "comment_id": 89566374, "body": "Upvote for mentioning crossing the year as a problem! I added a quick fix to my function, just for that."}, {"owner": {"reputation": 1400, "user_id": 3861965, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/t09dC.jpg?s=128&g=1", "display_name": "mcansado", "link": "https://stackoverflow.com/users/3861965/mcansado"}, "edited": false, "score": 0, "creation_date": 1551440579, "post_id": 51294302, "comment_id": 96650474, "body": "I believe this is incorrect for the case when the start and end coincide with the first and last days of the month?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 1400, "user_id": 3861965, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/t09dC.jpg?s=128&g=1", "display_name": "mcansado", "link": "https://stackoverflow.com/users/3861965/mcansado"}, "edited": false, "score": 0, "creation_date": 1551458610, "post_id": 51294302, "comment_id": 96660622, "body": "@mcansado, I haven&#39;t tested it yet but what error do you <i>see</i>? an extra start date at the end? I did not think of that <i>situation</i> when I wrote it. Do you think it could be fixed with some extra logic?  Is usr2564301 &#39;s answer better?"}, {"owner": {"reputation": 1400, "user_id": 3861965, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/t09dC.jpg?s=128&g=1", "display_name": "mcansado", "link": "https://stackoverflow.com/users/3861965/mcansado"}, "edited": false, "score": 0, "creation_date": 1551953500, "post_id": 51294302, "comment_id": 96833193, "body": "The error seems to be that, when the dates match exactly the start and end of a month, another pair is added where the start date is the first day of the following month and the last day is the last day of the previous month. There are ways of solving it for sure, I haven&#39;t written the code for it but just thought I&#39;d mention it here for whoever ends up here :)"}], "tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": true, "score": 7, "last_activity_date": 1531350208, "last_edit_date": 1531350208, "creation_date": 1531343931, "answer_id": 51294302, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python/51294302#51294302", "title": "How do I divide a date range into months in Python?", "body": "<p>In a loop; starting at the first day continually add one day till you get to the end date; whenever the month changes save the dates.</p>\n\n<pre><code>import datetime\nbegin = '2018-02-15'\nend = '2018-04-23'\n\ndt_start = datetime.datetime.strptime(begin, '%Y-%m-%d')\ndt_end = datetime.datetime.strptime(end, '%Y-%m-%d')\none_day = datetime.timedelta(1)\nstart_dates = [dt_start]\nend_dates = []\ntoday = dt_start\nwhile today &lt;= dt_end:\n    #print(today)\n    tomorrow = today + one_day\n    if tomorrow.month != today.month:\n        start_dates.append(tomorrow)\n        end_dates.append(today)\n    today = tomorrow\n\nend_dates.append(dt_end)\n\n\nout_fmt = '%d %B %Y'\nfor start, end in zip(start_dates,end_dates):\n    print('{} to {}'.format(start.strftime(out_fmt), end.strftime(out_fmt)))\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>&gt;&gt;&gt;\n15 February 2018 to 28 February 2018\n01 March 2018 to 31 March 2018\n01 April 2018 to 23 April 2018\n&gt;&gt;&gt;\n</code></pre>\n\n<hr>\n\n<p>You could probably figure out a way to get a range of months between the start and end dates; create a datetime object for the first day of each of those months store them and the days just prior to them.  Dates spanning a change of year might be problematic though.</p>\n"}, {"comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1551459080, "post_id": 51294307, "comment_id": 96660855, "body": "I like this, not sure why OP picked mine.!"}], "tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": false, "score": 4, "last_activity_date": 1531344551, "last_edit_date": 1531344551, "creation_date": 1531343950, "answer_id": 51294307, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python/51294307#51294307", "title": "How do I divide a date range into months in Python?", "body": "<p>To work with convenient date <em>objects</em>, always use the standard module <a href=\"https://docs.python.org/3/library/datetime.html\" rel=\"nofollow noreferrer\"><code>datetime</code></a>. This wraps your string formatted dates, and allows easier calculations as well as tailored output formatting.</p>\n\n<p>Unfortunately, it seems to miss one important piece of information: the <em>last</em> day of each month, given a year (which is necessary for Februari). There is an additional module <code>calendar</code> which returns <a href=\"https://stackoverflow.com/q/42950\">the last day for a month</a>, but since this is all you need of it and there is a simple <code>datetime</code> based function that does the same thing, I chose the latter.</p>\n\n<p>With that, you can set any <code>begin</code> date and append it to your list, together with its last day of that month, then set <code>begin</code> to the <em>next</em> month's 1st and continue until you pass <code>end</code>.</p>\n\n<p>A caveat/finetuning: I realized it would not work if both <code>begin</code> and <code>end</code> fall inside the <em>same</em> month. That needs an interim check, so I changed my initial <code>while begin &lt; end</code> to <code>while True</code> and moved the check for crossing the end date into a separate line.</p>\n\n<p>Also, to cross a <em>year</em> needs a separate test again, because else the statement <code>month+1</code> will fail on December.</p>\n\n<pre><code>import datetime\n\n# borrowed from https://stackoverflow.com/a/13565185\n# as noted there, the calendar module has a function of its own\ndef last_day_of_month(any_day):\n    next_month = any_day.replace(day=28) + datetime.timedelta(days=4)  # this will never fail\n    return next_month - datetime.timedelta(days=next_month.day)\n\nbegin = \"2018-02-15\"\nend = \"2018-04-23\"\n\ndef monthlist(begin,end):\n    begin = datetime.datetime.strptime(begin, \"%Y-%m-%d\")\n    end = datetime.datetime.strptime(end, \"%Y-%m-%d\")\n\n    result = []\n    while True:\n        if begin.month == 12:\n            next_month = begin.replace(year=begin.year+1,month=1, day=1)\n        else:\n            next_month = begin.replace(month=begin.month+1, day=1)\n        if next_month &gt; end:\n            break\n        result.append ([begin.strftime(\"%Y-%m-%d\"),last_day_of_month(begin).strftime(\"%Y-%m-%d\")])\n        begin = next_month\n    result.append ([begin.strftime(\"%Y-%m-%d\"),end.strftime(\"%Y-%m-%d\")])\n    return result\n\n\ndate_list = monthlist(begin,end)\nprint (date_list)\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>[ ['2018-02-15', '2018-02-28'],\n  ['2018-03-01', '2018-03-31'],\n  ['2018-04-01', '2018-04-23'] ]\n</code></pre>\n\n<p>(slightly formatted for readability only)</p>\n"}, {"tags": [], "owner": {"reputation": 2775, "user_id": 6104077, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64cafb3f689f97da3bb17aa97b97318f?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/6104077/sushant"}, "is_accepted": false, "score": 0, "last_activity_date": 1531375181, "last_edit_date": 1531375181, "creation_date": 1531347705, "answer_id": 51294957, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python/51294957#51294957", "title": "How do I divide a date range into months in Python?", "body": "<p>Using python calendar and accounting for change of the year</p>\n\n<pre><code>import calendar\nfrom datetime import datetime\nbegin = '2018-02-15'\nend= '2018-04-23'\n\nbegin_year, begin_month, begin_date = [int(i) for i in begin.split(\"-\")]\nend_year, end_month, end_date = [int(i) for i in end.split(\"-\")]\n\nyears = end_year - begin_year\n# if date range contains more than single year, we calculate total months\nif years:\n    months = (12 - begin_month) + end_month + (12 * (years - 1))\nelse:\n    months = end_month - begin_month\ndates = []\nmonth = begin_month\nyear = begin_year\n\ndef create_datetime_object(y, m, d):\n    return datetime.strptime('{}-{}-{}'.format(y, m, d), '%Y-%m-%d')\n# append the first date\ndates.append(create_datetime_object(begin_year, begin_month, begin_date))\n\nfor i in range(months+1):\n    days_in_month = calendar.monthrange(year, month)[-1]\n    if month == begin_month and year == begin_year:\n        dates.append(create_datetime_object(begin_year, begin_month, days_in_month))\n    elif month == end_month and year == end_year:\n        dates.append(create_datetime_object(end_year, end_month, 1))\n    else:\n        dates.append(create_datetime_object(year, month, 1))\n        dates.append(create_datetime_object(year, month, days_in_month))\n    if month == 12:\n        month = 0\n        year += 1\n    month += 1\n# append the last date\ndates.append(create_datetime_object(end_year, end_month, end_date))\n</code></pre>\n\n<p>And to get a list in the question, we could do something like -</p>\n\n<p><code>dates = [datetime.strftime(dt, '%Y-%m-%d') for dt in dates]</code></p>\n"}, {"tags": [], "owner": {"reputation": 550, "user_id": 4463793, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de8b40388abdd390764991faae45f3ca?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/4463793/richard"}, "is_accepted": false, "score": 1, "last_activity_date": 1585234881, "creation_date": 1585234881, "answer_id": 60870172, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python/60870172#60870172", "title": "How do I divide a date range into months in Python?", "body": "<p>If you don't mind using <code>pandas</code>, there's a nice helper <code>date_range</code> that will achieve what you want:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nstart = pd.Timestamp('20180215')\nend = pd.Timestamp('20180423')\n\nparts = list(pd.date_range(start, end, freq='M')) \n# parts = [Timestamp('2018-02-28 00:00:00', freq='M'), Timestamp('2018-03-31 00:00:00', freq='M')]\n\nif start != parts[0]:\n  parts.insert(0, start)\nif end != parts[-1]:\n  parts.append(end)\nparts[0] -= pd.Timedelta('1d')  # we add back one day later\n\npairs = zip(map(lambda d: d + pd.Timedelta('1d'), parts[:-1]), parts[1:])\n\npairs_str = list(map(lambda t: t[0].strftime('%Y-%m-%d') + ' - ' + t[1].strftime('%Y-%m-%d'), pairs))\n\n# pairs_str = ['2018-02-15 - 2018-02-28', '2018-03-01 - 2018-03-31', '2018-04-01 - 2018-04-23']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1559, "user_id": 2354162, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/07Dq3.jpg?s=128&g=1", "display_name": "Standaa - Monica side", "link": "https://stackoverflow.com/users/2354162/standaa-monica-side"}, "is_accepted": false, "score": -1, "last_activity_date": 1601996559, "creation_date": 1601996559, "answer_id": 64228528, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python/64228528#64228528", "title": "How do I divide a date range into months in Python?", "body": "<p>For people using <a href=\"https://pendulum.eustace.io/docs/\" rel=\"nofollow noreferrer\">Pendulum</a> :</p>\n<pre><code>start = pendulum.now().subtract(months=NUMBER_OF_MONTHS_BACK)\nend = pendulum.today()\nperiod = pendulum.period(start, end)\n\nfor dt in period.range(&quot;months&quot;):\n    print(dt)\n</code></pre>\n<p><a href=\"https://pendulum.eustace.io/docs/#period\" rel=\"nofollow noreferrer\">More about period here</a></p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 10650877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BxdNp.jpg?s=128&g=1", "display_name": "HLeb", "link": "https://stackoverflow.com/users/10650877/hleb"}, "is_accepted": false, "score": 0, "last_activity_date": 1613691783, "last_edit_date": 1613691783, "creation_date": 1613691341, "answer_id": 66269717, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python/66269717#66269717", "title": "How do I divide a date range into months in Python?", "body": "<p>I had to do a similar manipulation and ended up building this function. I tested it on different use cases (different years, same month...) and it's working well.</p>\n<blockquote>\n<p>It is inspired from S.Lott answer here\n<a href=\"https://stackoverflow.com/questions/993358/creating-a-range-of-dates-in-python\">Creating a range of dates in Python</a></p>\n</blockquote>\n<pre><code>import datetime\n\ndef get_segments(start_date, end_date):\n    &quot;&quot;&quot;\n    Divides input date range into associated months periods\n\n    Example:\n        Input: start_date = 2018-02-15\n               end_date   = 2018-04-23\n        Output:\n            [&quot;2018-02-15 - 2018-02-28&quot;, \n             &quot;2018-03-01 - 2018-03-31&quot;, \n             &quot;2018-04-01 - 2018-04-23&quot;]\n    &quot;&quot;&quot;\n    curr_date = start_date\n    curr_month = start_date.strftime(&quot;%m&quot;)\n    segments = []\n\n    loop = (curr_date!=end_date) \n    days_increment = 1\n\n    while loop:\n        # Get incremented date with 1 day\n        curr_date = start_date + datetime.timedelta(days=days_increment)\n        # Get associated month\n        prev_month = curr_month\n        curr_month = curr_date.strftime(&quot;%m&quot;)\n        # Add to segments if new month\n        if prev_month!=curr_month:\n            # get start of segment\n            if not segments:\n                start_segment = start_date\n            else:\n                start_segment = segments[-1][1] + datetime.timedelta(days=1)\n            # get end of segment\n            end_segment = curr_date - datetime.timedelta(days=1)\n            # define and add segment\n            segment = [start_segment, end_segment]\n            segments.append(segment)\n        # stop if last day reached\n        loop = (curr_date!=end_date) \n        # increment added days\n        days_increment += 1\n\n    if not segments or segments[-1][1]!=end_date:\n        if not segments:\n            start_last_segment = start_date\n        else:\n            start_last_segment = segments[-1][1] + datetime.timedelta(days=1)\n        last_segment = [start_last_segment, end_date]\n        segments.append(last_segment)\n\n    for i in range(len(segments)):\n        segments[i][0] = segments[i][0].strftime(&quot;%Y-%m-%d&quot;)\n        segments[i][1] = segments[i][1].strftime(&quot;%Y-%m-%d&quot;)\n\n    return segments\n</code></pre>\n<p><strong>Here is an example:</strong></p>\n<pre><code>start_date = datetime.datetime(2020, 5, 27)\nend_date = datetime.datetime(2021, 3, 1)\n\nsegments = get_segments(start_date, end_date)\n\nfor seg in segments:\n    print(seg)\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>['2020-05-27', '2020-05-31']\n['2020-06-01', '2020-06-30']\n['2020-07-01', '2020-07-31']\n['2020-08-01', '2020-08-31']\n['2020-09-01', '2020-09-30']\n['2020-10-01', '2020-10-31']\n['2020-11-01', '2020-11-30']\n['2020-12-01', '2020-12-31']\n['2021-01-01', '2021-01-31']\n['2021-02-01', '2021-02-28']\n['2021-03-01', '2021-03-01']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9628876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3gaU4n096bc/AAAAAAAAAAI/AAAAAAAAANo/6xdNAd-cZsA/photo.jpg?sz=128", "display_name": "Fernando Calatayud Zepeda", "link": "https://stackoverflow.com/users/9628876/fernando-calatayud-zepeda"}, "is_accepted": false, "score": 0, "last_activity_date": 1614278106, "creation_date": 1614278106, "answer_id": 66374481, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python/66374481#66374481", "title": "How do I divide a date range into months in Python?", "body": "<p>I extend the solution by @wwii</p>\n<p>Now you will not have duplicate start and/or end dates</p>\n<pre><code>def date_range_split_monthly(begin, end):\n\n    dt_start = datetime.strptime(begin, '%Y-%m-%d')\n    dt_end = datetime.strptime(end, '%Y-%m-%d')\n    one_day = timedelta(1)\n    start_dates = [dt_start]\n    end_dates = []\n    today = dt_start\n    while today &lt;= dt_end:\n        # print(today)\n        tomorrow = today + one_day\n        if tomorrow.month != today.month:\n            if tomorrow &lt;= dt_end:\n                start_dates.append(tomorrow)\n                end_dates.append(today)\n        today = tomorrow\n\n    end_dates.append(dt_end)\n\n    return start_dates, end_dates\n</code></pre>\n"}], "owner": {"reputation": 102, "user_id": 9062613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42da67b223a520a83dd195f57517c55a?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Chetty", "link": "https://stackoverflow.com/users/9062613/brandon-chetty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7175, "favorite_count": 0, "accepted_answer_id": 51294302, "answer_count": 7, "score": 3, "last_activity_date": 1614278106, "creation_date": 1531340427, "last_edit_date": 1531341468, "question_id": 51293632, "link": "https://stackoverflow.com/questions/51293632/how-do-i-divide-a-date-range-into-months-in-python", "title": "How do I divide a date range into months in Python?", "body": "<p>I have the following date range:</p>\n\n<pre><code>begin: 2018-02-15\nend: 2018-04-23\n</code></pre>\n\n<p>I want to achieve the following:</p>\n\n<pre><code>[\"2018-02-15 - 2018-02-28\", \"2018-03-01 - 2018-03-31\", \"2018-04-01 - 2018-04-23\"]\n</code></pre>\n\n<p>Essentially, I want to divide a given date range into months. I can't think of a way to accomplish this in Python.</p>\n\n<p>I have considered the solution <a href=\"https://stackoverflow.com/questions/29721228/given-a-date-range-how-can-we-break-it-up-into-n-contiguous-sub-intervals\">here</a>, however, this splits the date range based on a specified interval. I want to be able to split a date range dynamically. </p>\n\n<p>Hence, given a date range from 15 February 2018 to 23 April 2018, I want to be able to get the individual months in the range, like so:</p>\n\n<ul>\n<li>15 February 2018 to 28 February 2018</li>\n<li>01 March 2018 to 31 March 2018</li>\n<li>01 April 2018 to 23 April 2018</li>\n</ul>\n"}, {"tags": ["python", "image", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 1, "last_activity_date": 1531345167, "creation_date": 1531345167, "answer_id": 51294538, "question_id": 51293585, "link": "https://stackoverflow.com/questions/51293585/saving-grayscale-image-using-matplotlib-and-when-loading-it-has-multiple-channel/51294538#51294538", "title": "Saving grayscale image using matplotlib and when loading it has multiple channels", "body": "<p>You cannot preserve a bit depth of 16 bit when saving images with matplotlib with any of the default colormaps which only have 256 colors (=8 bit).</p>\n\n<p>And in addition, matplotlib converts the pixel values to floats, which may be a source for rounding errors. </p>\n\n<p>In total, matplotlib does not seem to be the optimal tool in case you need to get perfect accuracy. </p>\n\n<p>That being said, even <code>PIL</code> does not seem to allow for 16 bit single channel pngs. There is a possible solution in <a href=\"https://stackoverflow.com/questions/25696615/can-i-save-a-numpy-array-as-a-16-bit-image-using-normal-enthought-python\">this question</a>, but I haven't tested it.</p>\n\n<p>In any case a bulletproof way to save your array without accuracy loss is to save it with numpy, <code>np.save(\"arr.npy\", im_arr)</code>. </p>\n"}], "owner": {"reputation": 63, "user_id": 9859731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ian Benlolo", "link": "https://stackoverflow.com/users/9859731/ian-benlolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2132, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1531345167, "creation_date": 1531340184, "question_id": 51293585, "link": "https://stackoverflow.com/questions/51293585/saving-grayscale-image-using-matplotlib-and-when-loading-it-has-multiple-channel", "title": "Saving grayscale image using matplotlib and when loading it has multiple channels", "body": "<p>I am saving images using </p>\n\n<pre><code>import matplotlib.pyplot as plt\nplt.imsave(img_path,img_arr,cmap = 'gray') #shape (512,512)\n...\nimg = plt.imread(img_path)\n</code></pre>\n\n<p>and the img.shape returns a (512,512,4) whereas i expect it to only be (512,512).\nI thought maybe all the channels would be the same so I could just pick one but <code>np.allclose(img[:,:,0],img_arr)</code>\nreturns false no matter which index I choose. Printing the images, they are indeed the correct ones I am comparing as they do look almost identical(by eye), but are obviously not exactly identical.</p>\n\n<p>I also tried saving the images with cv2 but that seems to save a black box for some reason. loading them with <code>cv2.imread(img_path,0)</code> does return a (512,512) array but something seems to be lost because again, <code>np.allclose()</code> tells me they're different. </p>\n\n<p>I wanted to know if there is a good way to save grayscale images? Every method I try seems to convert it to RBG or RGBA which is really annoying. Also, I would like to preserve the dtype (int16) of the image as downsampling it loses important information.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "pandas", "web-scraping"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1531341226, "post_id": 51293574, "comment_id": 89565062, "body": "Use the <code>attrs={&#39;id&#39;: &#39;82502690936618670&#39;}</code> to the <code>pd.read_html()</code> call - there are nested tables in that page, so use <code>pd.read_html(..., attrs={&#39;id&#39;: &#39;82502690936618670&#39;})[0][3]</code>"}, {"owner": {"reputation": 125, "user_id": 8816168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1592830817447917/picture?type=large", "display_name": "Cristian Favaro Carri&#231;o", "link": "https://stackoverflow.com/users/8816168/cristian-favaro-carri%c3%a7o"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1531342113, "post_id": 51293574, "comment_id": 89565395, "body": "I still got Download text instead of the link address. I tried  something like this (pd.read_html(&#39;<a href=\"http://sisweb.tesouro.gov.br/apex/f?p=2501:2::::2\" rel=\"nofollow noreferrer\">sisweb.tesouro.gov.br/apex/f?p=2501:2::::2</a>::&#39;&zwnj;&#8203;, attrs={&#39;id&#39;: &#39;82502690936618670&#39;})[0]) --- and this (pd.read_html(&#39;<a href=\"http://sisweb.tesouro.gov.br/apex/f?p=2501:2::::2\" rel=\"nofollow noreferrer\">sisweb.tesouro.gov.br/apex/f?p=2501:2::::2</a>::&#39;&zwnj;&#8203;, attrs={&#39;id&#39;: &#39;82502690936618670&#39;})[0][3])"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1531345637, "post_id": 51293574, "comment_id": 89566760, "body": "you need the scheme <code>http:&#47;&#47;...</code>, it was in your original post, not sure why you would remove it."}], "owner": {"reputation": 125, "user_id": 8816168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1592830817447917/picture?type=large", "display_name": "Cristian Favaro Carri&#231;o", "link": "https://stackoverflow.com/users/8816168/cristian-favaro-carri%c3%a7o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 908, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531340120, "creation_date": 1531340120, "question_id": 51293574, "link": "https://stackoverflow.com/questions/51293574/pandas-read-html-to-get-href-not-text-just-for-one-column", "title": "Pandas read_html to get href not text just for one column", "body": "<p>I'm trying to work with a table at a website. The fourth table in the website when I import with pandas read_html. </p>\n\n<p>Using pandas.read_html I can get the data in a really easy and pretty way. </p>\n\n<p>My issue is that I don't need the 'Download' text in the last column ('Arquivo'), but the href link to download instead. </p>\n\n<p>Could someone help me to implement this exception? </p>\n\n<p>I've seen some answers (like this one: <a href=\"https://stackoverflow.com/questions/31771619/html-table-to-pandas-table-info-inside-html-tags\">HTML table to pandas table: Info inside html tags</a>), but I wasn't able to implement in my case.</p>\n\n<p>here is my code:</p>\n\n<pre><code>import pandas as pd\ndata = (pd.read_html('http://sisweb.tesouro.gov.br/apex/f?p=2501:2::::2::')[3])\nprint(df) #this way I print the table with 'Download' text.\n</code></pre>\n\n<p>And the second try:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\noptions = Options() #I pretend to use headless, but I did not activate in this example. \noptions.add_argument('--headless')\noptions.add_argument('--disable-gpu') \n\ndriver = webdriver.Chrome()\ndriver.get('http://sisweb.tesouro.gov.br/apex/f?p=2501:2::::2::')\n\nbsobj = bs(driver.page_source, 'lxml')\n\ntabela_geral = bsobj.findAll('table', {'class':'table table-striped'})\n\n#this returns to me all the tables I want to work with. is this case, the table in the first (0)\n\nimport lxml.html as LH\n\ntable = LH.fromstring(str(tabela_geral[0])) #getting just the first return from selenium.\n\nfor df in pd.read_html(str(tabela_geral[0])):\n    df['Arquivo'] = table.xpath('//tr/td/a/@href')\n    print(df) #this returns me an error.\n</code></pre>\n\n<p>Tranks.</p>\n\n<p>ps: MacOS High Sierra / Python 3.6</p>\n"}, {"tags": ["python", "parsing", "pyparsing", "logfile"], "comments": [{"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 1, "creation_date": 1531358780, "post_id": 51293558, "comment_id": 89569681, "body": "Tip #1 - use <code>pyparsing_common.integer</code> to parse <code>func_time</code> and <code>thread</code> so that they will be auto-converted to ints. #2 - are the timestamps in 24 hour time? If so you&#39;ll be able to do sorting lexically, so no need to covert to <code>datetime.time</code>s, but you may want to anyway - easy parse action. Otherwise, this looks like a lot of complexity in a parse action, especially if you might need to match output blocks from one log with input blocks from another (if logs rollover, for instance), better choice is a post-parsing func to build the desired structure from stitching blocks fm parsed results."}, {"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 1, "creation_date": 1531358962, "post_id": 51293558, "comment_id": 89569714, "body": "Maybe use a <code>defaultdict(list)</code> to collect input/output blocks (mark them so you can easily tell them apart, or just infer from presence of <code>timestamp_in</code> if input or output) keyed by func name and thread, sort the blocks by timestamp, then walk the list gathering input, output, input, output, input, input (ha! no output for that last one), etc."}, {"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 1, "creation_date": 1531392805, "post_id": 51293558, "comment_id": 89584102, "body": "<code>pop()</code> defaults to removing the last item (same as for Python lists). To pop a specific item, reference its numeric index, as in <code>pop(3)</code>."}, {"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 1, "creation_date": 1531403605, "post_id": 51293558, "comment_id": 89591606, "body": "Also note that one should not pop() items from a sequence while iterating over said sequence."}, {"owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "reply_to_user": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1531434847, "post_id": 51293558, "comment_id": 89607225, "body": "@PaulMcG thanks for your input. I have edited my post and added another example and a solution which kind of works but has some room for improvement. Could you please have a look at that?"}, {"owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "reply_to_user": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1531435008, "post_id": 51293558, "comment_id": 89607264, "body": "The logs luckily don&#39;t rollover, so I don&#39;t have to match output blocks from one log with input blocks from another log. Thanks for the defaultdict(list) idea, that does work, however there is a major problem with that approach:"}, {"owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "reply_to_user": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1531435020, "post_id": 51293558, "comment_id": 89607268, "body": "The log monitor allows you to modify its logging behavior. You can set it up in a way that it logs the input_blocks of a particular function, but never their output_blocks because they aren\u2019t interesting. So there are some logs where you have thousands of spare input_blocks without matching output_blocks. So it\u2019s more efficient (memory-wise and coding-wise) to just look for matching blocks inside the log_parse_results, move them together in a function_block, and leave the spare input_blocks and output_blocks where they are. With the defaultdict approach you&#39;d have to copy the spare blocks ."}, {"owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "reply_to_user": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1531435112, "post_id": 51293558, "comment_id": 89607292, "body": "Also, I really like the <code>ParseResults.dump</code> method which I would lose using the defaultdict approach."}], "answers": [{"comments": [{"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 1, "creation_date": 1531548681, "post_id": 51335710, "comment_id": 89646540, "body": "This puts all the unmatched input blocks at the end. Before calling <code>sum()</code>, you could sort the blocks in your original problem using  <code>function_blocks.sort(key=lambda fnblk: fnblk.input.timestamp_in)</code>"}], "tags": [], "owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "is_accepted": true, "score": 1, "last_activity_date": 1531548154, "last_edit_date": 1531548154, "creation_date": 1531547773, "answer_id": 51335710, "question_id": 51293558, "link": "https://stackoverflow.com/questions/51293558/editing-pyparsing-parse-results/51335710#51335710", "title": "Editing pyparsing parse results", "body": "<p>This version of <code>rearrange</code> addresses most of the issues I see in your example:</p>\n\n<pre><code>def rearrange(log_token):\n    function_blocks = list()\n\n    for input_block in log_token.input_blocks:\n        # look for match among output blocks that have not been cleared\n        for output_block in filter(None, log_token.output_blocks):\n\n            if input_block.func_name == output_block.func_name:\n                # found two matching blocks! now put them in a function_block\n                # and clear them from in their original positions in log_token\n\n                # create rearranged block, first with a list of the two blocks\n                # instead of append()'ing, just initialize with a list containing\n                # the two block copies\n                tmp_function_block = ParseResults([input_block.copy(), output_block.copy()])\n\n                # now assign the blocks by name\n                # x.__setitem__(key, value) is the same as x[key] = value\n                tmp_function_block['input'] = tmp_function_block[0]\n                tmp_function_block['output'] = tmp_function_block[1]\n\n                # wrap that all in another ParseResults, as if we had matched a Group\n                function_block = ParseResults(name='function_blocks', toklist=tmp_function_block, asList=True,\n                                              modal=False)  # I have no idea what modal and asList do, this was trial-and-error until I got acceptable output\n\n                del function_block['input'], function_block['output']  # remove duplicate name references\n\n                function_blocks.append(function_block)\n                # clear blocks in their original positions in log_token, so they won't be matched any more\n                input_block.clear()\n                output_block.clear()\n\n                # match found, no need to keep going looking for a matching output block \n                break\n\n    # find all input blocks that weren't cleared (had matching output blocks) and append as input-only blocks\n    for input_block in filter(None, log_token.input_blocks):\n        # no matching output for this input\n        tmp_function_block = ParseResults([input_block.copy()])\n        tmp_function_block['input'] = tmp_function_block[0]\n        function_block = ParseResults(name='function_blocks', toklist=tmp_function_block, asList=True,\n                                      modal=False)  # I have no idea what modal and asList do, this was trial-and-error until I got acceptable output\n        del function_block['input']  # remove duplicate data\n        function_blocks.append(function_block)\n        input_block.clear()\n\n    # clean out log_token, and reload with rearranged function blocks\n    log_token.clear()\n    log_token.extend(function_blocks)\n    log_token['function_blocks'] =  sum(function_blocks)\n\n    return log_token\n</code></pre>\n\n<p>And since this takes the input token and returns the rearranged tokens, you <em>can</em> make it a parse action as-is:</p>\n\n<pre><code>    # trailing '*' on the results name is equivalent to listAllMatches=True\n    input_block = Group(Word(alphanums)('func_name') + '_in')('input_blocks*')\n    output_block = Group(Word(alphanums)('func_name') +'_out')('output_blocks*')\n    log = OneOrMore(input_block | output_block)\n    log.addParseAction(rearrange)\n</code></pre>\n\n<p>Since <code>rearrange</code> updated <code>log_token</code> in place, if you make it a parse action, the ending <code>return</code> statement would be unnecessary.</p>\n\n<p>It is interesting how you were able to update the list in-place by clearing those blocks that you had found matches for - very clever.</p>\n\n<p>Generally, the assembly of tokens into <code>ParseResults</code> is an internal function, so the docs are light on this topic. I was just looking through the module docs and I don't really see a good home for this topic.</p>\n"}], "owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 1, "accepted_answer_id": 51335710, "answer_count": 1, "score": 2, "last_activity_date": 1531548154, "creation_date": 1531340052, "last_edit_date": 1531434334, "question_id": 51293558, "link": "https://stackoverflow.com/questions/51293558/editing-pyparsing-parse-results", "title": "Editing pyparsing parse results", "body": "<p>This is similar to a <a href=\"https://stackoverflow.com/questions/50958427/restructuring-pyparsing-parse-results-of-multithreaded-log-file\">question I've asked before</a>.</p>\n\n<p>I have written a pyparsing grammar <code>logparser</code> for a text file which contains multiple logs. A log documents every function call and every function completion. The underlying process is multithreaded, so it is possible that a slow function <code>A</code> is called, then a fast function <code>B</code> is called and finishes almost immediately, and after that function <code>A</code> finishes and gives us its return value. Due to this, the log file is very difficult to read by hand because the call information and return value information of one function can be thousands of lines apart.</p>\n\n<p>My parser is able to parse the function calls (from now on called <code>input_blocks</code>) and their return values (from now on called <code>output_blocks</code>). My parse results (<code>logparser.searchString(logfile)</code>) look like this:</p>\n\n<pre><code>[0]:                            # first log\n  - input_blocks:\n    [0]:\n      - func_name: 'Foo'\n      - parameters: ...\n      - thread: '123'\n      - timestamp_in: '12:01'\n    [1]:\n      - func_name: 'Bar'\n      - parameters: ...\n      - thread: '456'\n      - timestamp_in: '12:02'\n  - output_blocks:\n    [0]:\n      - func_name: 'Bar'\n      - func_time: '1'\n      - parameters: ...\n      - thread: '456'\n      - timestamp_out: '12:03'\n    [1]:\n      - func_name: 'Foo'\n      - func_time: '3'\n      - parameters: ...\n      - thread: '123'\n      - timestamp_out: '12:04'\n[1]:                            # second log\n    - input_blocks:\n    ...\n\n    - output_blocks:\n    ...\n...                             # n-th log\n</code></pre>\n\n<p>I want to solve the problem that input and output information of one function call are separated. So I want to put an <code>input_block</code> and the corresponding <code>output_block</code> into a <code>function_block</code>. My final parse results should look like this:</p>\n\n<pre><code>[0]:                            # first log\n  - function_blocks:\n    [0]:\n        - input_block:\n            - func_name: 'Foo'\n            - parameters: ...\n            - thread: '123'\n            - timestamp_in: '12:01'\n        - output_block:\n            - func_name: 'Foo'\n            - func_time: '3'\n            - parameters: ...\n            - thread: '123'\n            - timestamp_out: '12:04'\n    [1]:\n        - input_block:\n            - func_name: 'Bar'\n            - parameters: ...\n            - thread: '456'\n            - timestamp_in: '12:02'\n        - output_block:\n            - func_name: 'Bar'\n            - func_time: '1'\n            - parameters: ...\n            - thread: '456'\n            - timestamp_out: '12:03'\n[1]:                            # second log\n    - function_blocks:\n    [0]: ...\n    [1]: ...\n...                             # n-th log\n</code></pre>\n\n<p>To achieve this, I define a function <code>rearrange</code> which iterates through <code>input_blocks</code> and <code>output_blocks</code> and checks whether <code>func_name</code>, <code>thread</code>, and the timestamps match. However, moving the matching blocks into one <code>function_block</code> is the part I am missing. I then set this function as parse action for the log grammar: <code>logparser.setParseAction(rearrange)</code></p>\n\n<pre><code>def rearrange(log_token):\n    for input_block in log_token.input_blocks:\n        for output_block in log_token.output_blocks:\n            if (output_block.func_name == input_block.func_name\n                and output_block.thread == input_block.thread\n                and check_timestamp(output_block.timestamp_out,\n                                    output_block.func_time,\n                                    input_block.timestamp_in):\n                # output_block and input_block match -&gt; put them in a function_block\n                # modify log_token\n    return log_token\n</code></pre>\n\n<p><strong>My question is:</strong> How do I put the matching <code>output_block</code> and <code>input_block</code> in a <code>function_block</code> in a way that I still enjoy the easy access methods of <code>pyparsing.ParseResults</code>?</p>\n\n<p>My idea looks like this:</p>\n\n<pre><code>def rearrange(log_token):\n    # define a new ParseResults object in which I store matching input &amp; output blocks\n    function_blocks = pp.ParseResults(name='function_blocks')\n\n    # find matching blocks\n    for input_block in log_token.input_blocks:\n        for output_block in log_token.output_blocks:\n            if (output_block.func_name == input_block.func_name\n                and output_block.thread == input_block.thread\n                and check_timestamp(output_block.timestamp_out,\n                                    output_block.func_time,\n                                    input_block.timestamp_in):\n                # output_block and input_block match -&gt; put them in a function_block\n                function_blocks.append(input_block.pop() + output_block.pop())  # this addition causes a maximum recursion error?\n    log_token.append(function_blocks)\n    return log_token\n</code></pre>\n\n<p>This doesn't work though. The addition causes a maximum recursion error and the <code>.pop()</code> doesn't work as expected. It doesn't pop the whole block, it just pops the last entry in that block. Also, it doesn't actually remove that entry either, it justs removes it from the list, but it's still accessible by its results name.</p>\n\n<p>It's also possible that some of the<code>input_blocks</code> don't have a corresponding <code>output_block</code> (for example if the process crashes before all functions can finish). So my parse results should have the attributes <code>input_blocks</code>, <code>output_blocks</code> (for the spare blocks), and <code>function_blocks</code> (for the matching blocks).</p>\n\n<p>Thanks for your help!</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I made a simpler example to show my problem. Also, I experimented around and have a solution which kind of works but is a bit messy. I must admit there was a lot of trial-and-error included because I neither found documentation on nor can make sense of the inner workings of <code>ParseResults</code> and how to properly create my own nested <code>ParseResults</code>-structure.</p>\n\n<pre><code>from pyparsing import *\n\ndef main():\n    log_data = '''\\\n    Func1_in\n    Func2_in\n    Func2_out\n    Func1_out\n    Func3_in'''\n\n    ParserElement.inlineLiteralsUsing(Suppress)\n    input_block = Group(Word(alphanums)('func_name') + '_in').setResultsName('input_blocks', listAllMatches=True)\n    output_block = Group(Word(alphanums)('func_name') +'_out').setResultsName('output_blocks', listAllMatches=True)\n    log = OneOrMore(input_block | output_block)\n\n    parse_results = log.parseString(log_data)\n    print('***** before rearranging *****')\n    print(parse_results.dump())\n\n    parse_results = rearrange(parse_results)\n    print('***** after rearranging *****')\n    print(parse_results.dump())\n\ndef rearrange(log_token):\n    function_blocks = list()\n\n    for input_block in log_token.input_blocks:\n        for output_block in log_token.output_blocks:\n            if input_block.func_name == output_block.func_name:\n              # found two matching blocks! now put them in a function_block\n              # and delete them from their original positions in log_token\n                # I have to do both __setitem__ and .append so it shows up in the dict and in the list\n                # and .copy() is necessary because I delete the original objects later\n                tmp_function_block = ParseResults()\n                tmp_function_block.__setitem__('input', input_block.copy())\n                tmp_function_block.append(input_block.copy())\n                tmp_function_block.__setitem__('output', output_block.copy())\n                tmp_function_block.append(output_block.copy())\n                function_block = ParseResults(name='function_blocks', toklist=tmp_function_block, asList=True,\n                                              modal=False)  # I have no idea what modal and asList do, this was trial-and-error until I got acceptable output\n                del function_block['input'], function_block['output']  # remove duplicate data\n\n                function_blocks.append(function_block)\n                # delete from original position in log_token\n                input_block.clear()\n                output_block.clear()\n    log_token.__setitem__('function_blocks', sum(function_blocks))\n    return log_token\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>***** before rearranging *****\n[['Func1'], ['Func2'], ['Func2'], ['Func1'], ['Func3']]\n- input_blocks: [['Func1'], ['Func2'], ['Func3']]\n  [0]:\n    ['Func1']\n    - func_name: 'Func1'\n  [1]:\n    ['Func2']\n    - func_name: 'Func2'\n  [2]:\n    ['Func3']\n    - func_name: 'Func3'\n- output_blocks: [['Func2'], ['Func1']]\n  [0]:\n    ['Func2']\n    - func_name: 'Func2'\n  [1]:\n    ['Func1']\n    - func_name: 'Func1'\n***** after rearranging *****\n[[], [], [], [], ['Func3']]\n- function_blocks: [['Func1'], ['Func1'], ['Func2'], ['Func2'], [], []]   # why is this duplicated? I just want the inner function_blocks!\n  - function_blocks: [[['Func1'], ['Func1']], [['Func2'], ['Func2']], [[], []]]\n    [0]:\n      [['Func1'], ['Func1']]\n      - input: ['Func1']\n        - func_name: 'Func1'\n      - output: ['Func1']\n        - func_name: 'Func1'\n    [1]:\n      [['Func2'], ['Func2']]\n      - input: ['Func2']\n        - func_name: 'Func2'\n      - output: ['Func2']\n        - func_name: 'Func2'\n    [2]:                              # where does this come from?\n      [[], []]\n      - input: []\n      - output: []\n- input_blocks: [[], [], ['Func3']]\n  [0]:                                # how do I delete these indexes?\n    []                                #  I think I only cleared their contents\n  [1]:\n    []\n  [2]:\n    ['Func3']\n    - func_name: 'Func3'\n- output_blocks: [[], []]\n  [0]:\n    []\n  [1]:\n    []\n</code></pre>\n"}, {"tags": ["python", "numpy", "h5py"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1531343744, "post_id": 51293554, "comment_id": 89566046, "body": "If axis 1 is resized to 1000, you need to use a slice to write a size 500 array to it.  dset[-10000:, :500] = np.ones((10000,500))."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 7436981, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/405e76e1dab51d56ec94cfb9d011ea13?s=128&d=identicon&r=PG&f=1", "display_name": "Fence", "link": "https://stackoverflow.com/users/7436981/fence"}, "edited": false, "score": 0, "creation_date": 1531410564, "post_id": 51294965, "comment_id": 89596251, "body": "so, what I was trying makes no sense?. I didn&#39;t realize about the difference between expanding and filling. You would suggest change what I did?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 171, "user_id": 7436981, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/405e76e1dab51d56ec94cfb9d011ea13?s=128&d=identicon&r=PG&f=1", "display_name": "Fence", "link": "https://stackoverflow.com/users/7436981/fence"}, "edited": false, "score": 0, "creation_date": 1531416484, "post_id": 51294965, "comment_id": 89599396, "body": "I don&#39;t know what you are trying to do with <code>resize</code>.  As I demonstrate, it just makes the array (on the file) larger.  The initial fill is with the <code>fillvalue</code> (default 0).  The rest is your responsibility, and ordinary <code>numpy</code> array assignment rules apply."}, {"owner": {"reputation": 171, "user_id": 7436981, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/405e76e1dab51d56ec94cfb9d011ea13?s=128&d=identicon&r=PG&f=1", "display_name": "Fence", "link": "https://stackoverflow.com/users/7436981/fence"}, "edited": false, "score": 0, "creation_date": 1531416766, "post_id": 51294965, "comment_id": 89599546, "body": "I see, thanks. I am trying to expand the array with random 0,1 values just to get an initial idea of resize function. I though that using resize was a good alternative to create a file and expand it later in order not to load all into memory."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1531347750, "creation_date": 1531347750, "answer_id": 51294965, "question_id": 51293554, "link": "https://stackoverflow.com/questions/51293554/resize-two-axes-at-once-h5py/51294965#51294965", "title": "Resize two axes at once h5py", "body": "<p>Writing to a resizable <code>dataset</code> is just like writing to a numpy array - you have to specify the correct size of a slice - in all dimensions.</p>\n\n<p>When expanding in 2 dimensions, it requires some care to fill in all the blocks correctly.  Not only are you adding rows, but also columns:</p>\n\n<pre><code>dset = f.create_dataset(str(name),...\n    maxshape = (None, None, shape[2]))\ndset[...] = np.ones(shape)     # initial fill\nprint(dset.shape)\nfor i in range(2,4):\n    dset.resize(dset.shape[0]+shape[0], axis=0)\n    dset[-shape[0]:, :, :] = np.ones((shape[0], dset.shape[1], shape[2]))*i\n    # add an axis 0 block and fill that\n    print(dset.shape)\n    for j in range(2):\n        dset.resize(dset.shape[1]+shape[1], axis = 1)\n        dset[-shape[0]:, -shape[1]:, : ] = np.ones(shape)*(i+j)\n        # add an axis 1 block and fill that\n        print(dset.shape)\n</code></pre>\n\n<p>resulting print:</p>\n\n<pre><code>(1000, 500, 2)\n(2000, 500, 2)\n(2000, 1000, 2)\n(2000, 1500, 2)\n(3000, 1500, 2)\n(3000, 2000, 2)\n(3000, 2500, 2)\nFinal dataset size: (3000, 2500, 2)\n</code></pre>\n\n<p>But I didn't fill in all expanded space.</p>\n\n<p>With <code>shape = (3,2,1)</code></p>\n\n<pre><code>(3, 2, 1)\n(6, 2, 1)\n(6, 4, 1)\n(6, 6, 1)\n(9, 6, 1)\n(9, 8, 1)\n(9, 10, 1)\nFinal dataset size: (9, 10, 1)\nChunks size: (3, 2, 1)\n</code></pre>\n\n<p>And the actual data  <code>print(np.squeeze(dset[...]))</code>:</p>\n\n<pre><code>[[1 1 0 0 0 0 0 0 0 0]\n [1 1 0 0 0 0 0 0 0 0]\n [1 1 0 0 0 0 0 0 0 0]\n [2 2 2 2 3 3 0 0 0 0]\n [2 2 2 2 3 3 0 0 0 0]\n [2 2 2 2 3 3 0 0 0 0]\n [3 3 3 3 3 3 3 3 4 4]\n [3 3 3 3 3 3 3 3 4 4]\n [3 3 3 3 3 3 3 3 4 4]]\n</code></pre>\n\n<p>with 0's filling chunks that I resized but didn't explicitly fill.</p>\n"}], "owner": {"reputation": 171, "user_id": 7436981, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/405e76e1dab51d56ec94cfb9d011ea13?s=128&d=identicon&r=PG&f=1", "display_name": "Fence", "link": "https://stackoverflow.com/users/7436981/fence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531347750, "creation_date": 1531340018, "question_id": 51293554, "link": "https://stackoverflow.com/questions/51293554/resize-two-axes-at-once-h5py", "title": "Resize two axes at once h5py", "body": "<p>Is there a way to <code>resize</code> two axes by appending new data?. I was able to append new data to one axis using <code>resize</code> and <code>maxshape</code> following Docs in <a href=\"http://docs.h5py.org/en/latest/high/dataset.html#Dataset.maxshape\" rel=\"nofollow noreferrer\">h5py Docs</a>. \nBut what I am trying now is append data to two axes at once by using the same logic as appending to one axis. But what I am getting is a <code>TypeError: Can't broadcast (10000, 500, 2) -&gt; (10000, 1000, 2)</code>. This might be due to the chunks sizes but can't figure it out.\nAny suggestion\nThis is what I tried so far:</p>\n\n<pre><code>def create_hdf5_file(name, path, shape, chunks = None):\n    \"\"\"create a hdf5 file given a path, shape and chunks.\n    If chunks is not given file will be created without\n    any chunk. Default chunks  is equal to False. The file \n    will be compressed as gzip with a level of compression equals\n    to 4. This function will append data to the hdf5 file\"\"\"\n\n    with h5py.File(str(path+'/'+name+'.hdf5'), 'w') as f:\n        dset = f.create_dataset(str(name), compression = 'gzip', shape= (shape), chunks= (chunks), \\\n            maxshape = (None, None, shape[2]))\n        n = 10**5 # size for axis 0\n        #m = 5*10**3 size for axis 1\n        while dset.shape[0] &lt; n: # and dset.shape[1] &lt; m:\n            dset.resize(dset.shape[0]+10**4, axis=0)\n            #dset.resize(dset.shape[1]+5*10**2, axis = 1)\n            dset[-10**4:] = np.random.randint(2, size=(10**4, shape[1], shape[2]))\n            #dset[-5*10**2:] = np.random.randint(2, size =(shape[0], 5*10**2, shape[2]))\n            print(dset.shape)\n        print('Final dataset size: {}'.format(dset.shape))\n        print('Chunks size: {}'.format(dset.chunks))\n    print('HDF5 file created as: {}'.format(str(name)+'.hdf5'))\n\nif __name__ == \"__main__\":\n    create_hdf5_file(name='test',path='/home/neither/Desktop', \\\n    shape = (10000, 500,2), chunks= (1000,5000,2)) \n</code></pre>\n\n<p>I commented what I was trying while appending data into a new axis. But I get the previous error. Appending data into axis 0 works as expected but when trying to do the same with both axes fails.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531344598, "post_id": 51293520, "comment_id": 89566377, "body": "Can you show us the group that the problematic row gets sorted into in the groupby statement? <code>for name, group in tp3.groupby(&#39;user_id&#39;):; print(name, group)</code>"}, {"owner": {"reputation": 844, "user_id": 5910812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSqqn.jpg?s=128&g=1", "display_name": "Silenced Temporarily", "link": "https://stackoverflow.com/users/5910812/silenced-temporarily"}, "reply_to_user": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531400609, "post_id": 51293520, "comment_id": 89589440, "body": "Edited question to include this"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531406994, "post_id": 51293520, "comment_id": 89593962, "body": "As you mentioned, this is a bit of a tough problem to debug but let&#39;s give it a shot. The only thing I can see stand out about that row is that it is the only row in a group with only one row. Is that true for the entire DataFrame as well? What happens if you add another row with the same user_id to that DataFrame and repeat the groupby and diff on the entire DataFrame - does it work?"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531407297, "post_id": 51293520, "comment_id": 89594155, "body": "Are there other groups in your entire DataFrame groupby that only contain one row? You should be able to check this by using <code>tp2.groupby(&#39;user_id&#39;).filter(lambda x: x.shape[0]==1)</code>."}, {"owner": {"reputation": 844, "user_id": 5910812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSqqn.jpg?s=128&g=1", "display_name": "Silenced Temporarily", "link": "https://stackoverflow.com/users/5910812/silenced-temporarily"}, "reply_to_user": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531407299, "post_id": 51293520, "comment_id": 89594159, "body": "As I remarked in the question, it is not the only case where there&#39;s only one row for a user_id (or a group), and I&#39;m able to group over that row in a smaller dataframe.   (Indeed, if I chunk up the dataframe and group over the pieces separately, I can work around the issue entirely)."}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531407492, "post_id": 51293520, "comment_id": 89594289, "body": "Do the other rows in groups with only one row also contain a NaN value?"}, {"owner": {"reputation": 844, "user_id": 5910812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSqqn.jpg?s=128&g=1", "display_name": "Silenced Temporarily", "link": "https://stackoverflow.com/users/5910812/silenced-temporarily"}, "reply_to_user": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531408900, "post_id": 51293520, "comment_id": 89595184, "body": "The NaN is in the diff column and is due to the only-one-row per group, since what is shown is from the ten-row extract around the problematic row, after successfully doing the diff."}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "reply_to_user": {"reputation": 844, "user_id": 5910812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSqqn.jpg?s=128&g=1", "display_name": "Silenced Temporarily", "link": "https://stackoverflow.com/users/5910812/silenced-temporarily"}, "edited": false, "score": 0, "creation_date": 1531409601, "post_id": 51293520, "comment_id": 89595631, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/174898/discussion-between-tobsecret-and-a-leistra\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531410712, "post_id": 51293520, "comment_id": 89596367, "body": "Possible duplicate of:   <a href=\"https://stackoverflow.com/questions/41610667/valueerror-in-rank-method-in-pandas-without-more-explanation\" title=\"valueerror in rank method in pandas without more explanation\">stackoverflow.com/questions/41610667/&hellip;</a>  What pandas version and what python version are you using? I take it you are using python 2.x, since your path points to anaconda2?"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1531410812, "post_id": 51293520, "comment_id": 89596450, "body": "This might be a python 2 related bug, so if you can, I would try with a fresh conda environment with python 3 and the latest version of pandas"}], "owner": {"reputation": 844, "user_id": 5910812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSqqn.jpg?s=128&g=1", "display_name": "Silenced Temporarily", "link": "https://stackoverflow.com/users/5910812/silenced-temporarily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1531400597, "creation_date": 1531339857, "last_edit_date": 1531400597, "question_id": 51293520, "link": "https://stackoverflow.com/questions/51293520/cryptic-valueerror-in-groupby-diff", "title": "Cryptic ValueError in groupby.diff", "body": "<p>I'm encountering an unhelpful <code>ValueError</code> when attempting to do a simple <code>diff</code> on a moderately sized dataframe.  I've tracked it down to occuring at a particular line but there's nothing unusual about that line.  (It does correspond to a value where there's only one instance for the <code>group_by</code> key, but it's not the only such instance in the data).</p>\n\n<pre><code>tp1 = to_predict[['user_id', 'time_period', 'view_count']].head(74105).copy()\ntp2 = to_predict[['user_id', 'time_period', 'view_count']].head(74106).copy()\n\ntp1['date_diff'] = tp1.groupby('user_id')['view_count'].diff(1)\ntp2['date_diff'] = tp2.groupby('user_id')['view_count'].diff(1)\n</code></pre>\n\n<p>For this snippet, on the last quoted line I get:</p>\n\n<pre><code>ValueErrorTraceback (most recent call last)\n&lt;ipython-input-109-5d39d01dba69&gt; in &lt;module&gt;()\n  3 \n  4 tp1['date_diff'] = tp1.groupby('user_id')['dates_viewed'].diff(1)\n----&gt; 5 tp2['date_diff'] = tp2.groupby('user_id')['dates_viewed'].diff(1)\n\nC:\\Users\\aleistra-admin\\AppData\\Local\\Continuum\\anaconda2\\lib\\site-packages\\pandas\\core\\groupby\\groupby.pyc in diff(self, periods)\nC:\\Users\\aleistra-admin\\AppData\\Local\\Continuum\\anaconda2\\lib\\site-packages\\pandas\\core\\groupby\\groupby.pyc in wrapper(*args, **kwargs)\n849                                                             *args, **kwargs)\n850                     except (AttributeError):\n--&gt; 851                         raise ValueError\n852 \n853         return wrapper\n\nValueError: \n</code></pre>\n\n<p>(That's the total error message; nothing further about the ValueError). </p>\n\n<p>If I extract just the few rows around the problematic row and repeat the groupby, it runs without error: </p>\n\n<pre><code>tp3 = to_predict[['user_id', 'time_period', 'view_count']][74100:74110].copy()\ntp3['date_diff'] =tp3.groupby('user_id')['view_count'].diff(1)\n</code></pre>\n\n<p>Since the problem occurs only in the context of a largish dataframe, I can't provide a meaningful small dataset that reproduces it; as noted, an extract of a few rows does not exhibit the issue.  What's the actual error here, and how do I address it? </p>\n\n<p>Edit: Both 'view_count' and 'time_period' are integers, ranging from 0-30 or so.</p>\n\n<p>As requested in comments:</p>\n\n<pre><code>('248560ea75',          user_id  time_period  view_count  date_diff\n7261  248560ea75                1             0        NaN\n697   248560ea75                0             1        1.0)\n('30db47b0e9',          user_id  time_period  view_count  date_diff\n7260  30db47b0e9                2             0        NaN\n7259  30db47b0e9                1             0        0.0\n696   30db47b0e9                0             1        1.0)\n('6df3af5d31',          user_id  time_period  view_count date_diff\n7258  6df3af5d31                2             0        NaN)\n('8434123132',          user_id  time_period  view_count  date_diff\n7257  8434123132               11             0        NaN\n7256  8434123132               10             0        0.0\n7255  8434123132                9             0        0.0\n7254  8434123132                2             0        0.0)\n</code></pre>\n\n<p>The problematic row here is the one with user_id 6df3af5d31.  For readability I have truncated the user_id here, they're actually much longer. Again, the row does not cause a problem <em>in this subsample</em>, only in the context of the full ~80K row dataframe.</p>\n"}, {"tags": ["python", "node.js", "python-3.x", "electron"], "comments": [{"owner": {"reputation": 78904, "user_id": 46914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d47d0397605e4b9cab9fd8fce027e3b5?s=128&d=identicon&r=PG", "display_name": "Soviut", "link": "https://stackoverflow.com/users/46914/soviut"}, "edited": false, "score": 0, "creation_date": 1531470958, "post_id": 51293498, "comment_id": 89617371, "body": "What have you tried so far? Please show your work."}, {"owner": {"reputation": 78904, "user_id": 46914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d47d0397605e4b9cab9fd8fce027e3b5?s=128&d=identicon&r=PG", "display_name": "Soviut", "link": "https://stackoverflow.com/users/46914/soviut"}, "edited": false, "score": 0, "creation_date": 1531471058, "post_id": 51293498, "comment_id": 89617420, "body": "Also, when you say &quot;post installation&quot; do you mean each time your app runs, or once after the installer is finished. If it&#39;s the latter, couldn&#39;t you just put a post-install task in your installer bundle? This would be totally unrelated to Electron."}, {"owner": {"reputation": 12410, "user_id": 865220, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7d3b1b447b8ec429be00d231c2360e9e?s=128&d=identicon&r=PG", "display_name": "ishandutta2007", "link": "https://stackoverflow.com/users/865220/ishandutta2007"}, "reply_to_user": {"reputation": 78904, "user_id": 46914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d47d0397605e4b9cab9fd8fce027e3b5?s=128&d=identicon&r=PG", "display_name": "Soviut", "link": "https://stackoverflow.com/users/46914/soviut"}, "edited": false, "score": 0, "creation_date": 1531476980, "post_id": 51293498, "comment_id": 89620859, "body": "I have done what&#39;s mentioned here <a href=\"https://stackoverflow.com/a/41209644/865220\">stackoverflow.com/a/41209644/865220</a>, Now I can trigger python script from electron app inside <code>&#47;Applications&#47;z.app&#47;Contents&#47;Resources&#47;app.asar.unpacked&#47;</code> but there is neither guarantee of python nor python modules with appropriate version to be present there, that&#39;s why I am looking to setup <code>virtualenv</code> there post installation. If you can even suggest other means like deploying docker, vagrant etc I am okay to adopt those as well"}, {"owner": {"reputation": 12410, "user_id": 865220, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7d3b1b447b8ec429be00d231c2360e9e?s=128&d=identicon&r=PG", "display_name": "ishandutta2007", "link": "https://stackoverflow.com/users/865220/ishandutta2007"}, "reply_to_user": {"reputation": 78904, "user_id": 46914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d47d0397605e4b9cab9fd8fce027e3b5?s=128&d=identicon&r=PG", "display_name": "Soviut", "link": "https://stackoverflow.com/users/46914/soviut"}, "edited": false, "score": 0, "creation_date": 1531504409, "post_id": 51293498, "comment_id": 89636674, "body": "only once and that should happen before user tries to open the app for the first time. sorry for inconvenience I ignored these details thinking that mentioning setting up python environment on client makes these obvious."}], "answers": [{"tags": [], "owner": {"reputation": 12410, "user_id": 865220, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7d3b1b447b8ec429be00d231c2360e9e?s=128&d=identicon&r=PG", "display_name": "ishandutta2007", "link": "https://stackoverflow.com/users/865220/ishandutta2007"}, "is_accepted": false, "score": 0, "last_activity_date": 1531997961, "last_edit_date": 1531997961, "creation_date": 1531925208, "answer_id": 51404992, "question_id": 51293498, "link": "https://stackoverflow.com/questions/51293498/how-can-we-run-one-time-scripts-after-installation-in-electron/51404992#51404992", "title": "How can we run one time scripts after installation in electron?", "body": "<p><strong>Step one:</strong></p>\n\n<p>The approach I took is to create a a python native app using <code>py2app</code> alongside an electron app\nBut in that too faced few issues as I was using anaconda.\nFollowing this helped <code>https://github.com/stuarteberg/helloworld</code></p>\n\n<p><strong>Step two:</strong></p>\n\n<p><strong>2(a)</strong></p>\n\n<p>You will encounter pyqt not found error</p>\n\n<blockquote>\n  <p>ImportError: No module named PyQt4.QtGui</p>\n</blockquote>\n\n<p>then do</p>\n\n<ol>\n<li><code>conda install pyqt=4</code></li>\n<li>Restart terminal</li>\n</ol>\n\n<p><strong>2(b)(optional)</strong></p>\n\n<p>Above repo is in pyqt4, If you need pyqt5:</p>\n\n<p>To install <code>pyqt5</code> on Mac first install <code>macports</code>(<a href=\"https://guide.macports.org/#installing.macports\" rel=\"nofollow noreferrer\">https://guide.macports.org/#installing.macports</a>), then do </p>\n\n<pre><code>unset PYTHONPATH\nbrew install sip --with-python3\nbrew install pyqt --with-python3\n</code></pre>\n"}], "owner": {"reputation": 12410, "user_id": 865220, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7d3b1b447b8ec429be00d231c2360e9e?s=128&d=identicon&r=PG", "display_name": "ishandutta2007", "link": "https://stackoverflow.com/users/865220/ishandutta2007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531998029, "creation_date": 1531339722, "last_edit_date": 1531998029, "question_id": 51293498, "link": "https://stackoverflow.com/questions/51293498/how-can-we-run-one-time-scripts-after-installation-in-electron", "title": "How can we run one time scripts after installation in electron?", "body": "<p>I need to run python scripts from my Electron app. I have to set up a python virtual env post installation. Something like the following (but hopefully platform agnostic).</p>\n\n<pre><code>cd /Applications/z.app/Contents/Resources/app.asar.unpacked\nbrew reinstall python\nbrew upgrade python\npip3 install --upgrade pip\npip3 install virtualenv\npython3 -m venv env\nsource env/bin/activate\npip install -r requirements.txt\n</code></pre>\n"}, {"tags": ["python", "sorting", "subprocess"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1531340008, "post_id": 51293480, "comment_id": 89564596, "body": "See also <a href=\"https://stackoverflow.com/questions/2231227/python-subprocess-popen-with-a-modified-environment\" title=\"python subprocess popen with a modified environment\">stackoverflow.com/questions/2231227/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 3, "last_activity_date": 1531341219, "last_edit_date": 1531341219, "creation_date": 1531339882, "answer_id": 51293525, "question_id": 51293480, "link": "https://stackoverflow.com/questions/51293480/how-to-call-lc-all-c-sort-from-python-subprocess/51293525#51293525", "title": "How to call LC_ALL=C sort from python subprocess", "body": "<h3>Assignments are <em>shell syntax</em>.</h3>\n\n<p>When you don't set <code>shell=True</code>, there is no shell, so there's nothing available to parse and honor the assignment.</p>\n\n<hr>\n\n<h3>Just setting <code>shell=True</code> would cause security bugs.</h3>\n\n<p>If your filename contains <code>$(rm -rf ~)</code>, using <code>''.format()</code> to inject it is dangerous.</p>\n\n<hr>\n\n<h3>So generate an environment that has <code>LC_ALL</code> added to it, with a value of <code>C</code>:</h3>\n\n<pre><code>sort_env = os.environ.copy()\nsort_env['LC_ALL'] = 'C'\n\nsubprocess.check_call(['sort', '-k1', file, '-o', file], env=sort_env)\n</code></pre>\n\n<hr>\n\n<h3>Or use <code>shell=True</code>, but pass arguments out-of-band:</h3>\n\n<p>When a list is passed to <code>shell=True</code>, the first element is treated as the script to interpret; the second as <code>$0</code> in the context of that script; the third as <code>$1</code>, etc. Thus:</p>\n\n<pre><code>subprocess.check_call(['LC_ALL=C sort -k1 \"$1\" -o \"$2\"', '_', file, file])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1531340213, "post_id": 51293545, "comment_id": 89564680, "body": "Thanks for pointing this out; edited now to copy os.environ"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1531340229, "post_id": 51293545, "comment_id": 89564692, "body": "That&#39;s a cleaner approach than the one I used; might adopt it. :)"}], "tags": [], "owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 4, "last_activity_date": 1531340268, "last_edit_date": 1531340268, "creation_date": 1531339966, "answer_id": 51293545, "question_id": 51293480, "link": "https://stackoverflow.com/questions/51293480/how-to-call-lc-all-c-sort-from-python-subprocess/51293545#51293545", "title": "How to call LC_ALL=C sort from python subprocess", "body": "<p>The syntax <code>var=value command</code> is shell syntax to set an environment variable and run a command. <code>subprocess</code> by default does not offer a shell (and though you can get one with <code>shell=True</code> you should generally try to avoid this if you can). The way to do this in Python is to pass in a dictionary of variables with <code>env</code>.</p>\n\n<pre><code>myenv = os.environ.copy()\nmyenv['LC_ALL'] = 'C'\nsubprocess.check_call(['sort', '-k1', file, '-o', file], env=myenv)\n</code></pre>\n\n<p>Python is perfectly capable of sorting a sequence of lines internally; avoiding the external process entirely is an even better solution.</p>\n"}, {"tags": [], "owner": {"reputation": 1017, "user_id": 1740227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3eecffed17b5aa87b187705e2ce6984c?s=128&d=identicon&r=PG", "display_name": "mateor", "link": "https://stackoverflow.com/users/1740227/mateor"}, "is_accepted": false, "score": 0, "last_activity_date": 1531340191, "creation_date": 1531340191, "answer_id": 51293587, "question_id": 51293480, "link": "https://stackoverflow.com/questions/51293480/how-to-call-lc-all-c-sort-from-python-subprocess/51293587#51293587", "title": "How to call LC_ALL=C sort from python subprocess", "body": "<p>Pass a dict of the environmental variables as the <code>env</code> kwarg to <a href=\"https://docs.python.org/2/library/subprocess.html\" rel=\"nofollow noreferrer\">the subprocess invocation</a>.</p>\n\n<pre><code>    Python 2.7.14 (default, Mar 22 2018, 14:43:05)\n\n    In [1]: import subprocess\n\n    In [2]: subprocess.check_call([\"env\"], env={'LC_ALL': 'C'})\n    LC_ALL=C\n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 3548972, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/lo5ti.jpg?s=128&g=1", "display_name": "Leopoldo", "link": "https://stackoverflow.com/users/3548972/leopoldo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "closed_date": 1531340233, "answer_count": 3, "score": 1, "last_activity_date": 1531341219, "creation_date": 1531339650, "question_id": 51293480, "link": "https://stackoverflow.com/questions/51293480/how-to-call-lc-all-c-sort-from-python-subprocess", "closed_reason": "Duplicate", "title": "How to call LC_ALL=C sort from python subprocess", "body": "<p>How to call <code>LC_ALL=C sort -k1 file -o file</code> with python <code>subprocess</code>? </p>\n\n<p>When I try:\n<code>subprocess.check_call([\"LC_ALL=C sort -k1 {} -o {}\".format(file,file)])</code> </p>\n\n<p>Following error occurs:\n<code>FileNotFoundError: [Errno 2] No such file or directory: 'LC_ALL=C sort -k1 file.txt -o file.txt'</code></p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531339798, "post_id": 51293478, "comment_id": 89564512, "body": "Post <i>exactly</i> what you want with a reproducible example (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). This can be done in many ways <i>including</i> the way you just posted"}], "answers": [{"tags": [], "owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "is_accepted": true, "score": 0, "last_activity_date": 1531342717, "creation_date": 1531342717, "answer_id": 51294081, "question_id": 51293478, "link": "https://stackoverflow.com/questions/51293478/4-level-hierarchical-pandas-dataframe-of-different-lengths/51294081#51294081", "title": "4 level hierarchical Pandas DataFrame of different lengths", "body": "<p>It's really a matter of how you represent your data.\nIn essence, this is not a Series, it is a DataFrame with 5 columns:</p>\n\n<p>for example:</p>\n\n<pre><code>df = pd.DataFrame({\"level_0\":{\"0\":\"bar\",\"1\":\"bar\",\"2\":\"baz\",\"3\":\"baz\",\"4\":\"foo\",\"5\":\"foo\",\"6\":\"qux\",\"7\":\"qux\"},\"level_1\":{\"0\":\"one\",\"1\":\"two\",\"2\":\"one\",\"3\":\"two\",\"4\":\"one\",\"5\":\"two\",\"6\":\"one\",\"7\":\"two\"},\"level_2\":{\"0\":\"a\",\"1\":\"b\",\"2\":\"c\",\"3\":\"d\",\"4\":\"e\",\"5\":\"f\",\"6\":\"g\",\"7\":\"h\"},\"level_3\":{\"0\":\"1\",\"1\":\"2\",\"2\":\"3\",\"3\":\"4\",\"4\":\"5\",\"5\":\"6\",\"6\":\"7\",\"7\":\"8\"},\"0\":{\"0\":1.7686082254,\"1\":-1.2237523116,\"2\":-1.3066335651,\"3\":-1.3800965009,\"4\":-0.5995811728,\"5\":-1.4717242393,\"6\":-1.0613097567,\"7\":-0.3232780637}})\n</code></pre>\n\n<p>You get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8If0r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8If0r.png\" alt=\"enter image description here\"></a></p>\n\n<p>and then you can set the index as a 4 level index</p>\n\n<pre><code>df = df.set_index(['level_0', 'level_1', 'level_2', 'level_3'])\n</code></pre>\n\n<p>and your get your 4 level indexed Series</p>\n\n<p><a href=\"https://i.stack.imgur.com/RJ6Yh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RJ6Yh.png\" alt=\"enter image description here\"></a></p>\n\n<p>The original DataFrame could be missing values (i.e. your index array would originally be 'of different length') and that gives you what you are looking for.</p>\n"}], "owner": {"reputation": 123, "user_id": 3758578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0ceee64ece6f20fd9f7048d1b2017c94?s=128&d=identicon&r=PG", "display_name": "b3dog", "link": "https://stackoverflow.com/users/3758578/b3dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 51294081, "answer_count": 1, "score": -1, "last_activity_date": 1531364898, "creation_date": 1531339645, "last_edit_date": 1531364898, "question_id": 51293478, "link": "https://stackoverflow.com/questions/51293478/4-level-hierarchical-pandas-dataframe-of-different-lengths", "title": "4 level hierarchical Pandas DataFrame of different lengths", "body": "<p>I want to create a four dimensional hierarchically indexed Pandas dataframe. I found the documentation for multi-indexing</p>\n\n<pre><code>arrays = [np.array(['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux']),\n           np.array(['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two'])]\n\ns = pd.Series(np.random.randn(8), index=arrays)\n</code></pre>\n\n<p>Instead of this I want four arrays for my indices and I want them of different lengths. How would I go about doing this?</p>\n"}, {"tags": ["python", "python-3.x", "python-unicode"], "comments": [{"owner": {"reputation": 566, "user_id": 4048652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2355a0ef485c1c0158d7979c2001f8e3?s=128&d=identicon&r=PG&f=1", "display_name": "lhay86", "link": "https://stackoverflow.com/users/4048652/lhay86"}, "edited": false, "score": 0, "creation_date": 1531339680, "post_id": 51293444, "comment_id": 89564461, "body": "Regarding your last point, <code>str_bytes = str_bytes.replace(b&#39;\\\\\\\\&#39;, b&#39;\\\\&#39;)</code> should fix that issue - you probably weren&#39;t assigning it back to a variable."}, {"owner": {"reputation": 87, "user_id": 9734054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9810e7e8d760acf90ddfc831e17e28f?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/9734054/daniel"}, "reply_to_user": {"reputation": 566, "user_id": 4048652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2355a0ef485c1c0158d7979c2001f8e3?s=128&d=identicon&r=PG&f=1", "display_name": "lhay86", "link": "https://stackoverflow.com/users/4048652/lhay86"}, "edited": false, "score": 0, "creation_date": 1531340915, "post_id": 51293444, "comment_id": 89564950, "body": "@Ihay86 Unfortunately it doesn&#39;t work. It returns the same list of bytes."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1531341076, "post_id": 51293444, "comment_id": 89565004, "body": "BTW, don&#39;t use <code>str</code> as a variable name, since that shadows the built-in <code>str</code> type."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1531341263, "post_id": 51293444, "comment_id": 89565078, "body": "The <i>real</i> question is: Why do you have strings encoded like that? Ideally, they should be fixed upstream. You shouldn&#39;t have UTF-8 bytes encoded into a text string like that! Matias&#39;s answer works, another way to deal with this sort of mojibake is <code>s.encode(&#39;latin1&#39;).decode(&#39;utf8&#39;)</code>."}, {"owner": {"reputation": 87, "user_id": 9734054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9810e7e8d760acf90ddfc831e17e28f?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/9734054/daniel"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1531341793, "post_id": 51293444, "comment_id": 89565264, "body": "@PM2Ring This is what you get if you download a copy of your Facebook information in .json format."}, {"owner": {"reputation": 87, "user_id": 9734054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9810e7e8d760acf90ddfc831e17e28f?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/9734054/daniel"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1531342689, "post_id": 51293444, "comment_id": 89565641, "body": "@PM2Ring By using Facebook interface: <a href=\"https://www.facebook.com/help/1701730696756992\" rel=\"nofollow noreferrer\">Accessing &amp; Downloading Your Information</a>"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1531405609, "post_id": 51293444, "comment_id": 89593013, "body": "Ok. This is a known issue, see <a href=\"https://stackoverflow.com/q/50008296/4014959\">Facebook JSON badly encoded</a>. Martijn Pieters\u2666, who works at Facebook, has filed an internal bug report."}], "answers": [{"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1531414319, "post_id": 51293557, "comment_id": 89598404, "body": "This is JSON data, they should be decoding it as JSON. It is also a mojibake, of course, but <code>raw_unicode_escape</code> is not the right tool here and can cause issues if there are literal backslashes in the input followed by known Python escape sequences (but which JSON would have ignored)."}], "tags": [], "owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "is_accepted": true, "score": 5, "last_activity_date": 1531340043, "creation_date": 1531340043, "answer_id": 51293557, "question_id": 51293444, "link": "https://stackoverflow.com/questions/51293444/printing-strings-with-utf-8-encoded-characters-e-g-u00c5-u009b/51293557#51293557", "title": "Printing strings with UTF-8 encoded characters, e.g.: &quot;\\u00c5\\u009b\\&quot;", "body": "<p>Use <code>raw_unicode_escape</code>:</p>\n\n<pre><code>text = 'Cze\\u00c5\\u009b\\u00c4\\u0087'\ntext_bytes = text.encode('raw_unicode_escape')\nprint(text_bytes.decode('utf8')) # outputs Cze\u015b\u0107\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 9734054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9810e7e8d760acf90ddfc831e17e28f?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/9734054/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 51293557, "answer_count": 1, "score": 2, "last_activity_date": 1531340043, "creation_date": 1531339485, "last_edit_date": 1531339627, "question_id": 51293444, "link": "https://stackoverflow.com/questions/51293444/printing-strings-with-utf-8-encoded-characters-e-g-u00c5-u009b", "title": "Printing strings with UTF-8 encoded characters, e.g.: &quot;\\u00c5\\u009b\\&quot;", "body": "<p>I would like to print strings encoded like this one: <code>\"Cze\\u00c5\\u009b\\u00c4\\u0087\"</code> but I have no idea how. The example string should be printed as: \"Cze\u015b\u0107\".</p>\n\n<p>What I have tried is:</p>\n\n<pre><code>str = \"Cze\\u00c5\\u009b\\u00c4\\u0087\"\nprint(str) \n#gives: Cze\u00c5\u00c4\n\nstr_bytes = str.encode(\"unicode_escape\")\nprint(str_bytes) \n#gives: b'Cze\\\\xc5\\\\x9b\\\\xc4\\\\x87'\n\nstr = str_bytes.decode(\"utf8\")\nprint(str) \n#gives: Cze\\xc5\\x9b\\xc4\\x87\n</code></pre>\n\n<p>Where</p>\n\n<pre><code>print(b\"Cze\\xc5\\x9b\\xc4\\x87\".decode(\"utf8\"))\n</code></pre>\n\n<p>gives \"Cze\u015b\u0107\", but I don't know how to transform the <code>\"Cze\\xc5\\x9b\\xc4\\x87\"</code> string to the <code>b\"Cze\\xc5\\x9b\\xc4\\x87\"</code> bytes. </p>\n\n<p>I also know that the problem are additional backslashes in the byte representation after encoding the basis string with <code>\"unicode_escape\"</code> parameter, but I don't know how to get rid of them - <code>str_bytes.replace(b'\\\\\\\\', b'\\\\')</code> doesn't work.</p>\n"}, {"tags": ["python", "time-series", "statsmodels", "arima"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531339716, "post_id": 51293378, "comment_id": 89564475, "body": "Hi DummieCoder - i&#39;ll try to help you later, but i&#39;d recommend also posting on quant stackexchange: <a href=\"https://quant.stackexchange.com/\">quant.stackexchange.com</a>"}, {"owner": {"reputation": 41, "user_id": 10066099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c807d3a97c55fd29060f4ca4e4625b2?s=128&d=identicon&r=PG&f=1", "display_name": "DummieCoder", "link": "https://stackoverflow.com/users/10066099/dummiecoder"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531429342, "post_id": 51293378, "comment_id": 89605452, "body": "Thanks Rafael! I assume you&#39;re recommending to post on quant.stackexchange since the question is about time series, which is an important part of financial forecasting? I just want to make sure it&#39;s an acceptable practice to post the same question on multiple forums. How will it work if someone answer the question on one site and not the other?"}], "owner": {"reputation": 41, "user_id": 10066099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c807d3a97c55fd29060f4ca4e4625b2?s=128&d=identicon&r=PG&f=1", "display_name": "DummieCoder", "link": "https://stackoverflow.com/users/10066099/dummiecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 998, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1570552125, "creation_date": 1531339211, "question_id": 51293378, "link": "https://stackoverflow.com/questions/51293378/issue-with-augmented-dickey-fuller-test-in-python-with-small-number-of-observati", "title": "Issue with Augmented Dickey-Fuller test in Python with small number of observations", "body": "<p>I want to test for stationarity on a time series (nobs = 23) and implemented the adfuller test from statsmodels.tsa.stattools.   </p>\n\n<p>Here are the original data:  </p>\n\n<pre><code>1995-01-01      3126.0\n1996-01-01      3321.0\n1997-01-01      3514.0\n1998-01-01      3690.0\n1999-01-01      3906.0\n2000-01-01      4065.0\n2001-01-01      4287.0\n2002-01-01      4409.0\n2003-01-01      4641.0\n2004-01-01      4812.0\n2005-01-01      4901.0\n2006-01-01      5028.0\n2007-01-01      5035.0\n2008-01-01      5083.0\n2009-01-01      5183.0\n2010-01-01      5377.0\n2011-01-01      5428.0\n2012-01-01      5601.0\n2013-01-01      5705.0\n2014-01-01      5895.0\n2015-01-01      6234.0\n2016-01-01      6542.0\n2017-01-01      6839.0  \n</code></pre>\n\n<p>Here\u2019s is the custom ADF function I\u2019m using (credit goes to this <a href=\"https://www.analyticsvidhya.com/blog/2016/02/time-series-forecasting-codes-python/\" rel=\"nofollow noreferrer\">blog</a>):  </p>\n\n<pre><code>def test_stationarity(timeseries):\n    print('Results of Dickey-Fuller Test:')\n    dftest = adfuller(timeseries, autolag='AIC', maxlag = None)\n    dfoutput = pd.Series(dftest[0:4], index=['ADF Statistic', 'p-value', '#Lags Used', 'Number of Obs Used'])\n    for key, value in dftest[4].items():\n        dfoutput['Critical Value (%s)' % key] = value\n    print(dfoutput)\n</code></pre>\n\n<p>Here are the results of the ADF test on the original data:  </p>\n\n<pre><code>ADF Statistic           -0.126550\np-value                  0.946729\n#Lags Used               8.000000\nNumber of Obs Used      14.000000\nCritical Value (1%)     -4.012034\nCritical Value (5%)     -3.104184\nCritical Value (10%)    -2.690987\n</code></pre>\n\n<p>The ADF statistic is larger than all of the critical values and the p-value > alpha 0.05 indicating the series is not stationary so I perform a first differencing of the data. Here\u2019s the differencing function and the results of the ADF test:  </p>\n\n<pre><code>def difference(dataset):\n    diff = list()\n    for i in range(1, len(dataset)):\n        value = dataset[i] - dataset[i - 1]\n        #print(value)\n        diff.append(value)\n    return pd.Series(diff)\n\n\nADF Statistic           -1.169799\np-value                  0.686451\n#Lags Used               9.000000\nNumber of Obs Used      12.000000\nCritical Value (1%)     -4.137829\nCritical Value (5%)     -3.154972\nCritical Value (10%)    -2.714477\n</code></pre>\n\n<p>The ADF statistic and p-value both improve but the series still isn\u2019t stationary so I perform a second differencing, again here are the results:  </p>\n\n<pre><code>ADF Statistic           -0.000000\np-value                  0.958532\n#Lags Used               9.000000\nNumber of Obs Used      11.000000\nCritical Value (1%)     -4.223238\nCritical Value (5%)     -3.189369\nCritical Value (10%)    -2.729839\n</code></pre>\n\n<p>After a second differencing of the data, ADF test statistic becomes -0.0000 (which is puzzling given that a print() of the unrounded value returns -0.0  but either way implies that there\u2019s some significant digit other than zero somewhere) and the p-value is now worse than it was in the beginning. I also receive this warning:</p>\n\n<pre><code>RuntimeWarning: divide by zero encountered in double_scalars\n  return np.dot(wresid, wresid) / self.df_resid.  \n</code></pre>\n\n<p>A grid search of the p, d, q values returns an ARIMA(1, 1, 0) model but I assumed that a second differencing would still be necessary since first differencing did not achieve it.  </p>\n\n<p>I suspect the strange test statistic and p-value are due to the small sample size and high # of lags used by the ADF test\u2019s default setting (maxlag = None).  I understand that when maxlag is set to None it uses the formula int(np.ceil(12. * np.power(nobs/100., 1/4.))).   </p>\n\n<p>Is this appropriate? If not, is there any workaround for data sets with small numbers of observations or a rule of thumb for manually setting the maxlag value in the ADF function to avoid what appears to be an erroneous test statistic. I searched <a href=\"https://stackoverflow.com/questions/11265518/adf-test-in-statsmodels-in-python\">here</a>, <a href=\"https://github.com/statsmodels/statsmodels/issues/347\" rel=\"nofollow noreferrer\">here</a>, and <a href=\"https://stackoverflow.com/questions/33464294/how-exactly-bic-in-augmented-dickey-fuller-test-work-in-python\">here</a> but couldn\u2019t find a solution.</p>\n\n<p>I\u2019m using statsmodels version 0.8.0.</p>\n"}, {"tags": ["python", "elasticsearch", "elasticsearch-dsl"], "comments": [{"owner": {"reputation": 1558, "user_id": 4059524, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/WJqbr.jpg?s=128&g=1", "display_name": "Nikita Sivukhin", "link": "https://stackoverflow.com/users/4059524/nikita-sivukhin"}, "edited": false, "score": 0, "creation_date": 1531340826, "post_id": 51293352, "comment_id": 89564922, "body": "Can you provide an example of <b>bad</b> matching (such document, that shouldn&#39;t match your query, but that returned by Elastic)? Also, it will be helpful if you provide your Elasticsearch schema (mapping/analyzers)"}, {"owner": {"reputation": 1149, "user_id": 3708175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/17131040/picture?type=large", "display_name": "sramalingam24", "link": "https://stackoverflow.com/users/3708175/sramalingam24"}, "edited": false, "score": 0, "creation_date": 1531358696, "post_id": 51293352, "comment_id": 89569660, "body": "Assuming every file name follows this exact pattern you should use a tokenizer that will split this into tokens that you want to match on first. Checkout the pattern tokenizer in ES and either use it in your field analyzer(if FileName is text type) or search analyzer (if FileName is a keyword type)."}], "owner": {"reputation": 11, "user_id": 9987412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3P1EjQpQnbc/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3YbOoZu4Bu5oKSCjpqkcekWiUWhA/mo/photo.jpg?sz=128", "display_name": "karlanthonyhsiao", "link": "https://stackoverflow.com/users/9987412/karlanthonyhsiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531339092, "creation_date": 1531339092, "question_id": 51293352, "link": "https://stackoverflow.com/questions/51293352/how-to-return-only-exact-matches-in-elasticsearch-python-api", "title": "How to return only exact matches in Elasticsearch Python API", "body": "<pre><code>s = Search(using = client, index = . \nset_index).source(['metadata.Filename'])\\\n.query('match', Filename=(date))\n\ntotal = s.count()\n\nreturn total\n</code></pre>\n\n<p>I want to find the total number of instances where '20180511' appears in metadata.Filename in a particular index.</p>\n\n<p>This query is returning a higher number of hits than I would have expected. The data format in metadata.Filename is GEOSCATCAT20180507_12+20180511_0900.V01.nc4. My date variable is in the format '20180511'.</p>\n\n<p>I think the problem is match queries do the thing with scores, where they might return a hit even if it's not an exact match. I was wondering if you had any insight regarding this issue.</p>\n"}, {"tags": ["python", "operating-system"], "comments": [{"owner": {"reputation": 566, "user_id": 4048652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2355a0ef485c1c0158d7979c2001f8e3?s=128&d=identicon&r=PG&f=1", "display_name": "lhay86", "link": "https://stackoverflow.com/users/4048652/lhay86"}, "edited": false, "score": 1, "creation_date": 1531339312, "post_id": 51293346, "comment_id": 89564321, "body": "Your code doesn&#39;t check that the file exists, it iterates through the directory (to the variable <code>file</code>) but you are passing in <code>filename</code> when you try and read the csv, when there is no guarantee that <code>filename</code> exists."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1531339379, "post_id": 51293346, "comment_id": 89564344, "body": "you need to join the source directory, you&#39;re opening the <i>filename</i> only. Like this <code>read_file(os.path.join(self.unmappedDir,file_match))</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "edited": false, "score": 0, "creation_date": 1531339956, "post_id": 51293469, "comment_id": 89564576, "body": "Gotcha, makes sense now. I was trying to open a filename without its source. Hmm.. thinking about this now, it might be a bit redundant to iterate again in my <code>read_file</code> method right? That should simply read/create a table from a filename."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1531340058, "post_id": 51293469, "comment_id": 89564612, "body": "yes, I didn&#39;t notice that you posted the code for read_file, and that it included <i>another</i> directory scan"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1531340168, "last_edit_date": 1531340168, "creation_date": 1531339607, "answer_id": 51293469, "question_id": 51293346, "link": "https://stackoverflow.com/questions/51293346/how-to-read-a-file-from-a-directory-and-convert-it-to-a-table/51293469#51293469", "title": "How to read a file from a directory and convert it to a table?", "body": "<p>with this:</p>\n\n<pre><code>files = os.listdir(self.unmappedDir)\n</code></pre>\n\n<p>you're getting the file <em>names</em> of <code>self.unmappedDir</code></p>\n\n<p>So when you get a match on the name (when generating your name), you have to read the file <em>by passing the full path</em> (else the routine probably checks for the file in the <em>current directory</em>):</p>\n\n<pre><code>return self.read_file(os.path.join(self.unmappedDir,file_match))\n</code></pre>\n\n<p>Aside: use a <code>set</code> here:</p>\n\n<pre><code>files = set(os.listdir(self.unmappedDir))\n</code></pre>\n\n<p>so the filename lookup will be much faster than with a <code>list</code></p>\n\n<p>And your <code>read_file</code> method (which I didn't see earlier) should just open the file, instead of scanning the directory again (and returning at first iteration anyway, so it doesn't make sense):</p>\n\n<pre><code>def read_file(self, filepath):\n    print('*' *40)\n    Logger.info(\"Found a file : {}\".format(filepath))\n    print(filepath)\n    unmapped_positions_table = etl.fromcsv(filepath)\n    print(unmapped_positions_table)\n    print('*' * 40)\n    return unmapped_positions_table\n</code></pre>\n\n<p>Alternately, don't change your main code (except for the <code>set</code> part), and prepend the directory name in <code>read_file</code> since it's an instance method so you have it handy.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "edited": false, "score": 0, "creation_date": 1531341929, "post_id": 51293578, "comment_id": 89565315, "body": "I guess <code>pathlib</code> objects make more sense. I&#39;m looking at the documentation, but having a little trouble wrapping my head around how to write that. Thanks anyway. I&#39;ll try re-writing it with path objects eventually."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531342425, "post_id": 51293578, "comment_id": 89565533, "body": "@user7496931 The only reason I brought it up is that you&#39;re already using <code>pathlib</code> objects in your <code>read_file</code> method, and you&#39;re getting that part right (even if you&#39;re not actually doing anything with the resulting paths)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "edited": false, "score": 0, "creation_date": 1531342559, "post_id": 51293578, "comment_id": 89565595, "body": "Noted. Thanks. I understood the issue. I&#39;m currently an intern, and there&#39;s so much code that I feel could be written in much better ways. I&#39;ve noticed that I&#39;m copy pasting a lot of code from the codebase and I really need to understand how a lot of these libraries work before implementing them."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531343222, "post_id": 51293578, "comment_id": 89565842, "body": "@user7496931 Reading the docs (and searching for a tutorial if you don&#39;t understand them) whenever you first encounter a new module will help you pick up that kind of information very quickly, if you&#39;ve got the time to do it. By the way, in any large project, 80% of the code sucks. You can often refactor little bits, but the really hard part in software is learning which of the big bits should be refactored and which shouldn&#39;t, given that they almost all suck and you can&#39;t just keep rewriting everything or version N+1 has no new functionality (or, more likely, never comes out, like Mozilla 5)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "edited": false, "score": 0, "creation_date": 1531344919, "post_id": 51293578, "comment_id": 89566495, "body": "Awesome, bless your soul."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1531340139, "creation_date": 1531340139, "answer_id": 51293578, "question_id": 51293346, "link": "https://stackoverflow.com/questions/51293346/how-to-read-a-file-from-a-directory-and-convert-it-to-a-table/51293578#51293578", "title": "How to read a file from a directory and convert it to a table?", "body": "<p>The proximate problem is that you need a full pathname.</p>\n\n<p>The <code>filename</code> that you're trying to call <code>fromcsv</code> on is passed into the function, and ultimately came from <code>listdir(self.unmappedDir)</code>. This means it's a path relative to <code>self.unmappedDir</code>. </p>\n\n<p>Unless that happens to also be your current working directory, it's not going to be a valid path relative to the current working directory.</p>\n\n<p>To fix that, you'd want to use <code>os.path.join(self.unmappedDir, filename)</code> instead of just <code>filename</code>. Like this:</p>\n\n<pre><code>return self.read_file(os.path.join(self.unmappedDir), file_match)\n</code></pre>\n\n<p>Or, alternatively, you'd want to use <a href=\"https://docs.python.org/3/library/pathlib.html\" rel=\"nofollow noreferrer\"><code>pathlib</code></a> objects instead of strings, as you do with the <code>for file in loadDir.iterdir():</code> loop. If <code>file_match</code> is a <code>Path</code> instead of a dumb string, then you can just pass it to <code>read_file</code> and it'll work.</p>\n\n<hr>\n\n<p>But, if that's what you actually want, you've got a lot of useless code. In fact, the entire <code>read_file</code> function should just be one line:</p>\n\n<pre><code>def read_file(self, path):\n    return etl.fromcsv(path)\n</code></pre>\n\n<p>What you're doing instead is looping over every file in the directory, then ignoring that file and reading <code>filename</code>, and then returning early after the first one. So, if there's 1 file there, or 20 of them, this is equivalent to the one-liner; if there are no files, it returns <code>None</code>. Either way, it doesn't do anything useful except to add complexity, wasted performance, and multiple potential bugs.</p>\n\n<p>If, on the other hand, the loop <em>is</em> supposed to do something meaningful, then you should be using <code>file</code> rather than <code>filename</code> inside the loop, and you almost certainly shouldn't be doing an unconditional <code>return</code> inside the loop.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531340168, "creation_date": 1531339057, "question_id": 51293346, "link": "https://stackoverflow.com/questions/51293346/how-to-read-a-file-from-a-directory-and-convert-it-to-a-table", "title": "How to read a file from a directory and convert it to a table?", "body": "<p>I have a class that takes in positional arguments (<code>startDate</code>, <code>endDate</code>, <code>unmappedDir</code>, and <code>fundCodes</code>), I have the following methods:</p>\n\n<p>The method below is supposed to take in a an array of <code>fundCodes</code> and look in a directory and see if it finds files matching a certain format</p>\n\n<pre><code>def file_match(self, fundCodes):\n    # Get a list of the files in the unmapped directory\n    files = os.listdir(self.unmappedDir)\n\n    # loop through all the files and search for matching fund code\n    for check_fund in fundCodes:\n\n        # set a file pattern\n        file_match = 'unmapped_positions_{fund}_{start}_{end}.csv'.format(fund=check_fund, start=self.startDate, end=self.endDate)\n        # look in the unmappeddir and see if there's a file with that name\n        if file_match in files:\n            # if there's a match, load unmapped positions as etl\n            return self.read_file(file_match)\n        else:\n            Logger.error('No file found with those dates/funds')\n</code></pre>\n\n<p>The other method is simply supposed to create an etl table from that file. </p>\n\n<pre><code>def read_file(self, filename):\n    loadDir = Path(self.unmappedDir)\n    for file in loadDir.iterdir():\n        print('*' *40)\n        Logger.info(\"Found a file : {}\".format(filename))\n        print(filename)\n        unmapped_positions_table = etl.fromcsv(filename)\n        print(unmapped_positions_table)\n        print('*' * 40)\n        return unmapped_positions_table\n</code></pre>\n\n<p>When running it, I'm able to retrieve the filename:</p>\n\n<p><code>Found a file : unmapped_positions_PUPSFF_2018-07-01_2018-07-11.csv\nunmapped_positions_PUPSFF_2018-07-01_2018-07-11.csv</code></p>\n\n<p>But when trying to create the table, I get this error:</p>\n\n<p><code>FileNotFoundError: [Errno 2] No such file or directory: 'unmapped_positions_PUPSFF_2018-07-01_2018-07-11.csv'</code></p>\n\n<p>Is it expecting a full path to the filename or something?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": true, "score": 1, "last_activity_date": 1531340912, "creation_date": 1531340912, "answer_id": 51293736, "question_id": 51293345, "link": "https://stackoverflow.com/questions/51293345/unique-data-for-each-day-using-python-pandas-dataframe/51293736#51293736", "title": "Unique data for each day using Python/Pandas Dataframe", "body": "<p>You can access a NumPy array of unique dates with:</p>\n\n<pre><code>&gt;&gt;&gt; df.date.dt.date.unique()\narray([datetime.date(2014, 5, 1), datetime.date(2014, 5, 2),\n       datetime.date(2014, 5, 3), datetime.date(2014, 5, 4)], dtype=object)\n</code></pre>\n\n<p><code>dt</code> is an <em>accessor method</em> of the pandas Series <code>df.date</code>.  Basically, it's a class that acts as a property-like interface to a bunch of date-time-related methods.  The benefit is that it is vectorized (see <a href=\"https://stackoverflow.com/a/24871316/7954504\">here</a> for a comparison to <code>.iterrows()</code> from a Pandas developer), and that accessor methods also use a \"cached property\" design:</p>\n\n<ul>\n<li><a href=\"https://github.com/pandas-dev/pandas/blob/5d0daa0522730a6f999ceaf328f63f03dd62d0b4/pandas/core/accessor.py#L113\" rel=\"nofollow noreferrer\">Link to source</a></li>\n<li><a href=\"https://www.pydanny.com/cached-property.html\" rel=\"nofollow noreferrer\">Link to an explanation</a></li>\n</ul>\n"}], "owner": {"reputation": 269, "user_id": 2371563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e8e94793e9d022adbb88a873f38ed9?s=128&d=identicon&r=PG", "display_name": "user2371563", "link": "https://stackoverflow.com/users/2371563/user2371563"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 51293736, "answer_count": 1, "score": 0, "last_activity_date": 1531340912, "creation_date": 1531339053, "question_id": 51293345, "link": "https://stackoverflow.com/questions/51293345/unique-data-for-each-day-using-python-pandas-dataframe", "title": "Unique data for each day using Python/Pandas Dataframe", "body": "<p>I'm trying to process each day's data using pandas. Below is my code, data and current output. However, function getUniqueDates() has to traverse full df to get the unique dates in the list as shown below. Is there any simple and efficient way to get each day's data which can be passed to function processDataForEachDate() . Traversing big list is time consuming.I have stripped down columns in this example to keep it simple.</p>\n\n<pre><code>  data = {'date': ['2014-05-01 18:47:05.069722', '2014-05-01 18:47:05.119994', '2014-05-02 18:47:05.178768', '2014-05-02 18:47:05.230071', '2014-05-02 18:47:05.230071', '2014-05-02 18:47:05.280592', '2014-05-03 18:47:05.332662', '2014-05-03 18:47:05.385109', '2014-05-04 18:47:05.436523', '2014-05-04 18:47:05.486877'], \n            'noOfJobs': [34, 25, 26, 15, 15, 14, 26, 25, 62, 41]}\n    df = pd.DataFrame(data, columns = ['date', 'noOfJobs'])\n    df = df.astype(dtype= {\"date\":'datetime64[ns]'})\n    print(df)\n\n    #Ouput====================================\n                            date  noOfJobs\n    0 2014-05-01 18:47:05.069722        34\n    1 2014-05-01 18:47:05.119994        25\n    2 2014-05-02 18:47:05.178768        26\n    3 2014-05-02 18:47:05.230071        15\n    4 2014-05-02 18:47:05.230071        15\n    5 2014-05-02 18:47:05.280592        14\n    6 2014-05-03 18:47:05.332662        26\n    7 2014-05-03 18:47:05.385109        25\n    8 2014-05-04 18:47:05.436523        62\n    9 2014-05-04 18:47:05.486877        41\n\n\n    def getUniqueDates():\n        todaysDate = datetime.datetime.today().strftime('%Y-%m-%d')\n        listOfDates=[]\n        for c,r in df.iterrows():\n            if r.date.date() != todaysDate:        \n                todaysDate=r.date.date()\n                listOfDates.append(todaysDate)\n        return listOfDates\n\n    listOfDates = getUniqueDates()\n    print(listOfDates)\n\n   # Output====================================\n    [datetime.date(2014, 5, 1),\n     datetime.date(2014, 5, 2),\n     datetime.date(2014, 5, 3),\n     datetime.date(2014, 5, 4)]\n\n\n\n for eachDate in listOfDates:\n            processDataForEachDate(eachDate)\n</code></pre>\n"}, {"tags": ["python", "string", "list", "sorting", "alphabetical-sort"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531339211, "post_id": 51293341, "comment_id": 89564271, "body": "Do you mean reversed alphabetical, as in z-&gt;a, or reversed, alphabetical, as in alphabetical on a reversed string?"}, {"owner": {"reputation": 61, "user_id": 9953292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04dc7edd208dee35218a5609bd585a49?s=128&d=identicon&r=PG&f=1", "display_name": "Sova", "link": "https://stackoverflow.com/users/9953292/sova"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531339311, "post_id": 51293341, "comment_id": 89564320, "body": "@user3483203 z-&gt;a yeah. I added some example"}], "answers": [{"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 4, "last_activity_date": 1531341248, "last_edit_date": 1531341248, "creation_date": 1531339495, "answer_id": 51293446, "question_id": 51293341, "link": "https://stackoverflow.com/questions/51293341/how-to-sort-array-of-string-and-int-values-multiple-attributes-with-alphabetica/51293446#51293446", "title": "How to sort array of string and int values, multiple attributes with alphabetical and &quot;reversed&quot;-alphabetical order", "body": "<p>You could create a class with an implementation for <code>&lt;</code> (<code>&lt;</code> is all CPythons <code>sorted</code> requires - if you're using another Python implementation you might need additional comparison operators). That allows full control over the \"ordering\". For example:</p>\n\n<pre><code>class Sorter(object):\n    def __init__(self, tup):\n        self.name, self.surname, self.int1, self.int2 = tup\n    def __lt__(self, other):\n        # Just to make the logic clearer, in practise you could do nest the ifs\n        # to avoid computing self.int1 == other.int1 twice\n        if self.int1 == other.int1 and self.name == other.name:\n            return self.surname &lt; other.surname\n        elif self.int1 == other.int1:\n            return self.name &gt; other.name\n        else:\n            return self.int1 &gt; other.int1\n</code></pre>\n\n<p>Then use that as <code>key</code> for <code>sorted</code>:</p>\n\n<pre><code>&gt;&gt;&gt; sorted(a, key=Sorter)\n[('Yana', 'Anja', 10, 0),\n ('Kolia', 'Alexey', 10, 0),\n ('Vasia', 'Katia', 3, 0),\n ('Petia', 'Anja', 3, 0),\n ('Petia', 'Katia', 3, 0)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1531344525, "creation_date": 1531344525, "answer_id": 51294417, "question_id": 51293341, "link": "https://stackoverflow.com/questions/51293341/how-to-sort-array-of-string-and-int-values-multiple-attributes-with-alphabetica/51294417#51294417", "title": "How to sort array of string and int values, multiple attributes with alphabetical and &quot;reversed&quot;-alphabetical order", "body": "<pre><code>&gt;&gt;&gt; intab='abcdefghijklmnopqrstuvwxyz'\n&gt;&gt;&gt; tab = string.maketrans(intab+intab.upper(), intab[::-1]+intab.upper()[::-1])\n&gt;&gt;&gt; \n&gt;&gt;&gt; slst = sorted(lst, key = lambda x: [-int(x[2]), x[0].translate(tab), x[1]])\n&gt;&gt;&gt; pprint(slst)\n[('Yana', 'Anja', 10, 0),\n ('Kolia', 'Alexey', 10, 0),\n ('Vasia', 'Katia', 3, 0),\n ('Petia', 'Anja', 3, 0),\n ('Petia', 'Katia', 3, 0)]\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9953292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04dc7edd208dee35218a5609bd585a49?s=128&d=identicon&r=PG&f=1", "display_name": "Sova", "link": "https://stackoverflow.com/users/9953292/sova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 51293446, "answer_count": 2, "score": 3, "last_activity_date": 1531379442, "creation_date": 1531339033, "last_edit_date": 1531379442, "question_id": 51293341, "link": "https://stackoverflow.com/questions/51293341/how-to-sort-array-of-string-and-int-values-multiple-attributes-with-alphabetica", "title": "How to sort array of string and int values, multiple attributes with alphabetical and &quot;reversed&quot;-alphabetical order", "body": "<p>I have an array containing <code>[name, surname, int1, int2]</code> elements and I need to sort it by this order:</p>\n\n<ul>\n<li><p>By <code>int1</code> (decreasing).</p></li>\n<li><p>If <code>int1</code> is the same, sort by <code>name</code> in \"reversed\"-alphabetical order.</p></li>\n<li><p>If <code>name</code> is the same, order by <code>surname</code> in alphabetical order.</p></li>\n</ul>\n\n<p>So I have this: </p>\n\n<pre><code>print(sorted(a, key = lambda x: [-int(x[2]), x[0], x[1]]))\n</code></pre>\n\n<p>And I have no idea how to sort <code>x[0]</code> in reverse-alphabetical order\n<code>-x[0], x[0][::-1]</code> doesn't work for me.</p>\n\n<p>Example:</p>\n\n<pre><code>[('Petia', 'Anja', 3, 0),\n ('Vasia', 'Katia', 3, 0),\n ('Petia', 'Katia', 3, 0),\n ('Kolia', 'Alexey', 10, 0),\n ('Yana', 'Anja', 10, 0)]\n</code></pre>\n\n<p>to</p>\n\n<pre><code>[('Yana', 'Anja', 10, 0),\n ('Kolia', 'Alexey', 10, 0),\n ('Vasia', 'Katia', 3, 0),\n ('Petia', 'Anja', 3, 0),\n ('Petia', 'Katia', 3, 0)]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 3, "creation_date": 1531339087, "post_id": 51293326, "comment_id": 89564224, "body": "You could wrap the <code>zipped</code> predicate in a function that wraps <code>gzip.open</code> or <code>open</code> invoked on the function&#39;s file name argument."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1531340617, "post_id": 51293326, "comment_id": 89564835, "body": "@dfri: thus making the file type transparent to the <code>open</code> (well, at least if the data, zipped or not, is exactly the same). I&#39;d sure like to see that as a full how-to answer!"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531341311, "post_id": 51293326, "comment_id": 89565095, "body": "Where does <code>zipped</code> come from? If it&#39;s dependent on the filename of <code>file1</code>, or the magic header, or something like that, then you probably do want a wrapper function that transparently figures it out\u2014but, given that <code>zipped</code> seems to be always either true for both <code>file1</code> and <code>file2</code>, or for neither, I&#39;m not sure that makes sense here."}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531341324, "post_id": 51293326, "comment_id": 89565101, "body": "@usr2564301 abarnerts solution of using the predicate to store a callable and invoke as part of the <code>with</code> expression is better."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 1, "creation_date": 1531341468, "post_id": 51293326, "comment_id": 89565153, "body": "@dfri I think the major difference between using a wrapper or just store the function in a variable is whether the <code>zipped</code> flag is some external information (which we&#39;d have to pass into the wrapper function, making it more verbose without being any more readable) or something we can figure out from <code>file1</code> and <code>file2</code> (and know they&#39;ll always be consistent) (in which case the wrapper could be transparent, which I think is nicer)."}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531341831, "post_id": 51293326, "comment_id": 89565277, "body": "@abarnert good point; if the logic of the predicate is e.g. simply checking the extensions of the file names, this would be neater to put in a wrapper rather than into e.g. a local <code>zipped</code> variable at the call site."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1531342370, "post_id": 51293326, "comment_id": 89565508, "body": "@dfri Yeah, that&#39;s a better way to put what I was trying to say."}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 4509213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a0b8a77c2ee7bfa18899b7a987fc36?s=128&d=identicon&r=PG", "display_name": "Psyche", "link": "https://stackoverflow.com/users/4509213/psyche"}, "is_accepted": false, "score": 2, "last_activity_date": 1531340207, "creation_date": 1531340207, "answer_id": 51293589, "question_id": 51293326, "link": "https://stackoverflow.com/questions/51293326/breaking-up-a-with-statement/51293589#51293589", "title": "Breaking up a with statement", "body": "<p>The second code does work like the first, as long as <code>zipped</code> is <code>False</code>.</p>\n\n<p>One important thing to note, though, is that you don't have to nest your with statements. Instead you can do something like:</p>\n\n<pre><code>with open(file1) as R1, open(file2) as R2:\n    ###code\n</code></pre>\n\n<p>(Also, the function <code>open</code> has the <code>'r'</code> parameter by default, so you don't have to include it.)</p>\n"}, {"tags": [], "owner": {"reputation": 2790, "user_id": 1830793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E88mv.jpg?s=128&g=1", "display_name": "Zev", "link": "https://stackoverflow.com/users/1830793/zev"}, "is_accepted": false, "score": 3, "last_activity_date": 1531340667, "creation_date": 1531340667, "answer_id": 51293691, "question_id": 51293326, "link": "https://stackoverflow.com/questions/51293326/breaking-up-a-with-statement/51293691#51293691", "title": "Breaking up a with statement", "body": "<p>You can do it your original way by creating a function that checks what kind of file it is.</p>\n\n<pre><code>def open_or_gzip_open(file_name, permissions='r'):\n    if file_name.endswith('gz'):\n        R1 = gzip.open(file_name, 'r')\n    else:\n        R1 = open(file_name, 'r')\n    return R1\n</code></pre>\n\n<p>You can open both files on one line:    </p>\n\n<pre><code>with open_or_gzip_open('text.txt') as p1, open_or_gzip_open('text2.txt') as p2:\n    print(p1, p2)\n</code></pre>\n\n<p>~                                  </p>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 5, "last_activity_date": 1531340983, "creation_date": 1531340983, "answer_id": 51293748, "question_id": 51293326, "link": "https://stackoverflow.com/questions/51293326/breaking-up-a-with-statement/51293748#51293748", "title": "Breaking up a with statement", "body": "<p>What you're doing <em>mostly</em> makes sense, but it has one problem.</p>\n\n<hr>\n\n<p>File objects are context managers that <code>close</code> themselves on <code>__exit__</code>. As the <a href=\"https://docs.python.org/3/library/gzip.html#gzip.GzipFile\" rel=\"noreferrer\"><code>gzip</code></a> docs make clear, that includes the <code>GzipFile</code> objects returned by <code>gzip.open</code>:</p>\n\n<blockquote>\n  <p><code>GzipFile</code> supports the <a href=\"https://docs.python.org/3/library/io.html#io.BufferedIOBase\" rel=\"noreferrer\"><code>io.BufferedIOBase</code></a> interface, including iteration and the <code>with</code> statement. </p>\n</blockquote>\n\n<p>So, if you write <code>with f:</code> on an opened regular file or <code>GzipFile</code>, that guarantees that <code>close</code> will be called after the <code>with</code> statement.</p>\n\n<p>In Python 2.7, the details are slightly different, but it works the same way. In Python 2.6, a <code>GzipFile</code> was <em>not</em> a context manager. But there's a very easy solution (that's worth knowing about for other types, even if you don't care about Python 2.6): you can wrap anything with a <code>close</code> method in <a href=\"https://docs.python.org/3/library/contextlib.html#contextlib.closing\" rel=\"noreferrer\"><code>closing</code></a> to get a context manager that calls that <code>close</code> on <code>__exit__</code>. So, you could write:</p>\n\n<pre><code>with contextlib.closing(R1):\n</code></pre>\n\n<p>\u2026 and it would work on <code>R1</code> whether it's a file object, or some other kind of thing (like a 2.6 <code>GzipFile</code>) that doesn't know how to be a context manager.</p>\n\n<hr>\n\n<p>However, what happens if <code>R1</code> opens successfully, but <code>R2</code> fails? Then you haven't even gotten into the <code>with R1:</code> when the exception is raised, so you never close <code>R1</code>.</p>\n\n<p>You could fix this by doing the <code>with R1</code> before opening <code>R2</code>:</p>\n\n<pre><code>if zipped:\n    R1 = gzip.open(file1, 'r')\nelse:\n    R1 = open(file1, 'r')\nwith R1:\n    if zipped:\n        R2 = gzip.open(file2, 'r')\n    else:\n        R2 = open(file2, 'r')\n    with R2:\n</code></pre>\n\n<p>Or you could use an <a href=\"https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack\" rel=\"noreferrer\"><code>ExitStack</code></a>.</p>\n\n<p>But there's a much simpler solution here: Both <code>gzip.open</code> and <code>open</code> are callable objects, so you can store them in a variable, and call it later. Since they have the same signature, and you want to call them with the exact same arguments, using that variable is trivial:</p>\n\n<pre><code>if zipped:\n    zopen = gzip.open\nelse:\n    zopen = open\nwith zopen(file1, 'r') as R1:\n    with zopen(file2, 'r') as R2:\n</code></pre>\n\n<p>And notice that you can make this a lot more concise without making it any less readable:</p>\n\n<pre><code>zopen = gzip.open if zipped else open\nwith zopen(file1, 'r') as R1, zopen(file2, 'r') as R2:\n</code></pre>\n"}], "owner": {"reputation": 4989, "user_id": 3633487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/pVoco.jpg?s=128&g=1", "display_name": "The Nightman", "link": "https://stackoverflow.com/users/3633487/the-nightman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 51293748, "answer_count": 3, "score": 4, "last_activity_date": 1531340983, "creation_date": 1531338935, "question_id": 51293326, "link": "https://stackoverflow.com/questions/51293326/breaking-up-a-with-statement", "title": "Breaking up a with statement", "body": "<p>Originally, I have been opening and simultaneously reading through two files with something like this:</p>\n\n<pre><code>with open(file1, 'r') as R1:\n    with open(file2, 'r') as R2:\n        ### my code\n</code></pre>\n\n<p>But now the input file names may sometimes be gzipped. So, I thought to split up the <code>with</code> statement and use an <code>if</code> statement to handle the two scenarios with something like this:</p>\n\n<pre><code>if zipped:\n    R1 = gzip.open(file1, 'r')\n    R2 = gzip.open(file2, 'r')\nelse:\n    R1 = open(file1, 'r')\n    R2 = open(file2, 'r')\n\nwith R1:\n    with R2:\n        ### my code\n</code></pre>\n\n<p>Does the second code function like the first? Or is there even a better way to do this?</p>\n"}, {"tags": ["java", "python", "types", "dart"], "comments": [{"owner": {"reputation": 454, "user_id": 3488757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9nxGD.jpg?s=128&g=1", "display_name": "jiping-s", "link": "https://stackoverflow.com/users/3488757/jiping-s"}, "edited": false, "score": 0, "creation_date": 1531389145, "post_id": 51293294, "comment_id": 89581685, "body": "performance? You have may noticed many of the &quot;everything is an object&quot; languages are not actually efficient, CPU and memory wise. The only reason they appear okay is that many of the functions are hidden, implemented in other languages such as C - while Java does everything by itself, e.g. math, encoding conversion, string and collection operations, etc. However, it&#39;s actually possible with the bytecode form to support &quot;everything is an object&quot;, by examining the use of certain variables/fields and transforming/JIT the code accordingly (primitive or object)."}], "owner": {"reputation": 2192, "user_id": 5942579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/o6P12.jpg?s=128&g=1", "display_name": "Emmanuel Mtali", "link": "https://stackoverflow.com/users/5942579/emmanuel-mtali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1531379197, "creation_date": 1531338735, "last_edit_date": 1531379197, "question_id": 51293294, "link": "https://stackoverflow.com/questions/51293294/performance-and-design-difference-between-an-object-and-a-primitive", "title": "Performance and design difference between an object and a primitive", "body": "<p>I feel like most of languages tends to justify that they are object oriented with statement like \"Everything is an object\" like ruby and dart.</p>\n\n<p>On the other hand statement like this (Java Complete Reference)</p>\n\n<blockquote>\n  <p>The primitive types represent single values\u2014not complex objects.\n  Although Java is otherwise completely object-oriented, the primitive\n  types are not. They are analogous to the simple types found in most\n  other non\u2013object-oriented languages. The reason for this is\n  efficiency. Making the primitive types into objects would have\n  degraded performance too much.</p>\n</blockquote>\n\n<p>So why does other languages implement primitives as objects?</p>\n"}, {"tags": ["python", "python-3.x", "csv"], "comments": [{"owner": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 0, "creation_date": 1531338839, "post_id": 51293239, "comment_id": 89564105, "body": "This doesn&#39;t particularly answer your question but, in general, using a library like <code>pandas</code> for .csv processing will lead to speed-ups."}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1531338926, "post_id": 51293239, "comment_id": 89564145, "body": "Maybe you can try first make a list of processed songs and at the end write it at once. Not making lots of small read-write operations."}], "answers": [{"comments": [{"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1531339576, "post_id": 51293355, "comment_id": 89564416, "body": "@Jean-Fran&#231;oisFabre That is a possibility, although I used <code>append</code> to retain the values associated with each song publisher, which may or may not (based on the OPs example) contain varying data values, such as RoleType, Name,Shares, etc."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1531339298, "last_edit_date": 1531339298, "creation_date": 1531339106, "answer_id": 51293355, "question_id": 51293239, "link": "https://stackoverflow.com/questions/51293239/iterating-through-csv-file-in-python-to-find-titles-with-leading-spaces/51293355#51293355", "title": "Iterating through CSV file in python to find titles with leading spaces", "body": "<p>You can use a dictionary to find each song and group all of its associated values:</p>\n\n<pre><code>from collections import defaultdict\nimport csv, re\nd = defaultdict(list)\ncount = 0 #count needed to remove the header, without loading the full data into memory\nwith open('filename.csv') as f:\n  for a, *b in csv.reader(f):\n    if count:\n      if re.findall('^\\s', a):\n        d[a].append(b)\n    count += 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 0, "last_activity_date": 1531339210, "last_edit_date": 1531339210, "creation_date": 1531339113, "answer_id": 51293358, "question_id": 51293239, "link": "https://stackoverflow.com/questions/51293239/iterating-through-csv-file-in-python-to-find-titles-with-leading-spaces/51293358#51293358", "title": "Iterating through CSV file in python to find titles with leading spaces", "body": "<p><code>list(ascap)</code> isn't doing you nay favors.  <code>reader</code> objects are iterators over their contents, but they don't load it all into memory until ti's needed. Just iterate over the <code>reader</code> object directly.  </p>\n\n<p>For each row, just check <code>row[0][0].isspace()</code>.  That checks the first character of the first entry, which is all you need to determine whether something begins with whitespace.</p>\n\n<pre><code>with open('output/sws.txt', 'w', newline=\"\") as sws:\n    with open('data/ascap_catalog1.csv', 'r', newline=\"\") as ac:\n        ascap = csv.reader(ac, delimiter=',')\n        for row in ascap:\n            if row and row[0] and row[0][0].isspace():\n                print(row, file=sws)\n</code></pre>\n\n<p>You could also play with your output, like saving all the rows you want to keep in a list before writing them at the end.  It sounds like your input might be sorted, if all the leading whitespace names come first.  If that's the case, you can just add <code>else: break</code> to skip the rest of the file.</p>\n"}, {"tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 0, "last_activity_date": 1531380118, "last_edit_date": 1531380118, "creation_date": 1531339286, "answer_id": 51293398, "question_id": 51293239, "link": "https://stackoverflow.com/questions/51293239/iterating-through-csv-file-in-python-to-find-titles-with-leading-spaces/51293398#51293398", "title": "Iterating through CSV file in python to find titles with leading spaces", "body": "<p>Here are some things you can improve:</p>\n\n<ul>\n<li><p>Use the <a href=\"https://docs.python.org/3/library/csv.html#csv.reader\" rel=\"nofollow noreferrer\"><code>reader</code></a> object as an iterator directly without creating an intermediate list. This will save you both computation time and memory.</p></li>\n<li><p>Check only the first value in a row (which is a title), not all.</p></li>\n<li><p>Remove an unnecessary <code>else</code> clause.</p></li>\n</ul>\n\n<p>Combining all of this and applying some best practices you can do:</p>\n\n<p>   </p>\n\n<pre><code>import csv\nimport re\n\nwith open('data/ascap_catalog1.csv') as ac, open('output/sws.txt', 'w') as sws: \n    reader = csv.reader(ac)\n    for row in reader:\n        if re.search(r'\\A\\s+', row[0]):\n            print(row, file=sws)\n</code></pre>\n\n<blockquote>\n  <p>It appears the song titles with leading spaces are all clustered at\n  the beginning of the file.</p>\n</blockquote>\n\n<p>In this case you can use <a href=\"https://docs.python.org/3/library/itertools.html#itertools.takewhile\" rel=\"nofollow noreferrer\"><code>itertools.takewhile</code></a> to only iterate the file as long the titles have leading spaces:</p>\n\n<pre><code>import csv\nimport re\nfrom itertools import takewhile\n\nwith open('data/ascap_catalog1.csv') as ac, open('output/sws.txt', 'w') as sws:\n    reader = csv.reader(ac)\n    next(reader)  # skip the header\n    for row in takewhile(lambda x: re.search(r'\\A\\s+', x[0]), reader):\n        print(row, file=sws)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 10061410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5536017b763ce901bcadfbcf3b0611be?s=128&d=identicon&r=PG&f=1", "display_name": "DanB", "link": "https://stackoverflow.com/users/10061410/danb"}, "is_accepted": false, "score": 0, "last_activity_date": 1531340117, "creation_date": 1531340117, "answer_id": 51293573, "question_id": 51293239, "link": "https://stackoverflow.com/questions/51293239/iterating-through-csv-file-in-python-to-find-titles-with-leading-spaces/51293573#51293573", "title": "Iterating through CSV file in python to find titles with leading spaces", "body": "<p>this one worked well for me and seems to be simple enough.</p>\n\n<pre><code>import csv\nimport re\n\nwith open('C:\\\\results.csv', 'w') as sws:\n    with open('C:\\\\ascap.csv', 'r') as ac:\n        ascap = csv.reader(ac, delimiter=',')\n        for row in ascap:\n            if re.match('\\s+', row[0]):\n                sws.write(str(row)+ '\\n')\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10051144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AetZJ.jpg?s=128&g=1", "display_name": "Jon-Johnson", "link": "https://stackoverflow.com/users/10051144/jon-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 51293358, "answer_count": 4, "score": 0, "last_activity_date": 1531380118, "creation_date": 1531338534, "question_id": 51293239, "link": "https://stackoverflow.com/questions/51293239/iterating-through-csv-file-in-python-to-find-titles-with-leading-spaces", "title": "Iterating through CSV file in python to find titles with leading spaces", "body": "<p>I'm working with a large csv file that contains songs and their ownershp properties. Each song record is written top-down, with associated writer and publisher names below each title. So a given song may comprise of say, 4-6 rows, depending on how many writers/publishers control it (example with header row below):</p>\n\n<pre><code>Title,RoleType,Name,Shares,Note\nBOOGIE BREAK 2,ASCAP,Total Current ASCAP Share,100,\nBOOGIE BREAK 2,W,MERCADO JOSEPH M,,\nBOOGIE BREAK 2,P,CRAFTIN MUSIC,,\nBOOGIE BREAK 2,P,NEXT DIMENSION MUSIC,,\n</code></pre>\n\n<p>I'm currently trying to loop through the entire file to extract all of the song titles that contain leading spaces (e.g.,'   song title'). Here's the code that I'm currently using:</p>\n\n<pre><code>import csv\nimport re\n\nwith open('output/sws.txt', 'w') as sws:\n    with open('data/ascap_catalog1.csv', 'r') as ac:\n        ascap = csv.reader(ac, delimiter=',')\n        ascap = list(ascap)\n        for row in ascap:\n            for strings in row:\n                if re.search('\\A\\s+', strings):\n                    row = str(row)\n                    sws.write(row) \n                    sws.write('\\n')\n                else:\n                    continue\n</code></pre>\n\n<p>Due to the size of this file csv file that I'm working with (~2GB), it takes quite a bit of time to iterate through and produce a result file. However, based on the results that I've gotten, it appears the song titles with leading spaces are all clustered at the beginning of the file. Once those songs have all been listed, then normal songs w/o leading spaces appear.</p>\n\n<p>Is there a way to make this code a bit more efficient, time-wise? I tried using a few <code>break</code>s after every for and if statement, but depending on the amount that I used, it either didn't effect the statement at all, or broke too quickly, not capturing any rows.</p>\n\n<p>I also tried wrapping it in a function and implementing <code>return</code>, however, for some reason the code only seemed to iterate through the first row (not counting the header row, which I would skip).</p>\n\n<p>Thanks so much for your time,</p>\n"}, {"tags": ["python", "pandas", "delete-row", "attributeerror"], "comments": [{"owner": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 0, "creation_date": 1531338454, "post_id": 51293196, "comment_id": 89563938, "body": "Try <code>df = df.iloc[24:]</code>"}, {"owner": {"reputation": 357, "user_id": 4794247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43ea7318d308e90846522cd2b65f1ceb?s=128&d=identicon&r=PG&f=1", "display_name": "RockAndaHardPlace", "link": "https://stackoverflow.com/users/4794247/rockandahardplace"}, "reply_to_user": {"reputation": 1193, "user_id": 8157074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fa17382a7adb38de2f60ce71d4e7344?s=128&d=identicon&r=PG&f=1", "display_name": "Arda Arslan", "link": "https://stackoverflow.com/users/8157074/arda-arslan"}, "edited": false, "score": 0, "creation_date": 1531338578, "post_id": 51293196, "comment_id": 89563987, "body": "@ArdaArslan When I tried that, I got the AttributeError: &#39;numpy.ndarray&#39; object has no attribute &#39;iloc&#39;"}, {"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 1, "creation_date": 1531338675, "post_id": 51293196, "comment_id": 89564028, "body": "<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler.fit_transform\" rel=\"nofollow noreferrer\">fit_transaform()</a> returns a numpy array. You are treating it as a dataframe. Try <code>df = pd.DataFrame(StandardScaler().fit_transform(df))</code> ."}, {"owner": {"reputation": 566, "user_id": 4048652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2355a0ef485c1c0158d7979c2001f8e3?s=128&d=identicon&r=PG&f=1", "display_name": "lhay86", "link": "https://stackoverflow.com/users/4048652/lhay86"}, "edited": false, "score": 1, "creation_date": 1531338885, "post_id": 51293196, "comment_id": 89564124, "body": "A few comments: your image shows that you should probably be passing in column names when you read the csv - it looks like your column names are taken from the first row of data. Try passing in the <code>name</code> parameter in <code>pd.read_csv</code>.  Also <code>df.mean()</code> returns a series, so I don&#39;t think <code>df.fillna(df.mean())</code> does what you expect. Also it&#39;s a bit dangerous to do <code>df.dropna()</code> after doing <code>df.fillna()</code> - you shouldn&#39;t be expecting to lose rows. Lastly, without <code>inplace=True</code>, you aren&#39;t actually changing df with any of those commands."}, {"owner": {"reputation": 357, "user_id": 4794247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43ea7318d308e90846522cd2b65f1ceb?s=128&d=identicon&r=PG&f=1", "display_name": "RockAndaHardPlace", "link": "https://stackoverflow.com/users/4794247/rockandahardplace"}, "edited": false, "score": 0, "creation_date": 1531339868, "post_id": 51293196, "comment_id": 89564541, "body": "@Ihay86 Very helpful insights, I&#39;ll look into them, thanks much!"}], "answers": [{"tags": [], "owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "is_accepted": true, "score": 14, "last_activity_date": 1531338671, "creation_date": 1531338671, "answer_id": 51293275, "question_id": 51293196, "link": "https://stackoverflow.com/questions/51293196/attributeerror-numpy-ndarray-object-has-no-attribute-drop/51293275#51293275", "title": "AttributeError: &#39;numpy.ndarray&#39; object has no attribute &#39;drop&#39;", "body": "<p>The problem lies in the following line:</p>\n\n<pre><code>df = StandardScaler().fit_transform(df) \n</code></pre>\n\n<p>It returns a numpy array (<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler.fit_transform\" rel=\"noreferrer\">see docs</a>), which does not have a drop function. \nYou would have to convert it into a <code>pd.DataFrame</code> first!</p>\n\n<pre><code>new_df = pd.DataFrame(StandardScaler().fit_transform(df), columns=df.columns, index=df.index)\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 4794247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43ea7318d308e90846522cd2b65f1ceb?s=128&d=identicon&r=PG&f=1", "display_name": "RockAndaHardPlace", "link": "https://stackoverflow.com/users/4794247/rockandahardplace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27399, "favorite_count": 0, "accepted_answer_id": 51293275, "answer_count": 1, "score": 8, "last_activity_date": 1531338671, "creation_date": 1531338354, "question_id": 51293196, "link": "https://stackoverflow.com/questions/51293196/attributeerror-numpy-ndarray-object-has-no-attribute-drop", "title": "AttributeError: &#39;numpy.ndarray&#39; object has no attribute &#39;drop&#39;", "body": "<p>I'm trying to delete the first 24 rows of my pandas dataframe.</p>\n\n<p>Searching on the web has led me to believe that the best way to do this is by using the pandas 'drop' function. </p>\n\n<p>However, whenever I try to use it, I get the error: </p>\n\n<pre><code>AttributeError: 'numpy.ndarray' object has no attribute 'drop'\n</code></pre>\n\n<p>This is how I created my pandas dataframe:</p>\n\n<pre><code>import pandas as pd \nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom sklearn.decomposition import PCA\nfrom sklearn.preprocessing import StandardScaler\n%matplotlib inline\nimport os\ncwd = os.getcwd()\n\ndf = pd.read_csv('C:/Users/.../Datasets/Weather/temperature4.csv')\n</code></pre>\n\n<p>Then: </p>\n\n<pre><code>df.fillna(df.mean())\ndf.dropna()\n</code></pre>\n\n<p>The head of my dataframe looks like this: \n<a href=\"https://i.stack.imgur.com/Xvbaa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xvbaa.png\" alt=\"enter image description here\"></a></p>\n\n<p>And then: </p>\n\n<pre><code>df = StandardScaler().fit_transform(df)\ndf.drop(df.index[0, 23], inplace=True)\n</code></pre>\n\n<p>This is where I get the attributeerror. </p>\n\n<p>Not sure what I should do to delete the first 24 rows of my dataframe. </p>\n\n<p>(This was all done using Python 3 on a Jupyter notebook on my local machine) </p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "edited": false, "score": 0, "creation_date": 1531338821, "post_id": 51293154, "comment_id": 89564092, "body": "Is the keyword always at the beginning of the sentences?"}, {"owner": {"reputation": 39, "user_id": 10066878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e30b81f0bfbeb8f8557add86509b00?s=128&d=identicon&r=PG&f=1", "display_name": "user92654", "link": "https://stackoverflow.com/users/10066878/user92654"}, "reply_to_user": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "edited": false, "score": 0, "creation_date": 1531339021, "post_id": 51293154, "comment_id": 89564193, "body": "not necessary. In this case, it just happens at the beginning. So I want to a more generalized script to be able to extract sentence when keyword is at the beginning."}], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1531338958, "creation_date": 1531338958, "answer_id": 51293331, "question_id": 51293154, "link": "https://stackoverflow.com/questions/51293154/python-regex-extracting-multiple-sentences-containing-same-keyword/51293331#51293331", "title": "Python Regex - extracting multiple sentences containing same keyword", "body": "<p>Consider using <a href=\"https://www.nltk.org/\" rel=\"nofollow noreferrer\"><strong><code>nltk</code></strong></a> instead, imo it is really better suited here:</p>\n\n<pre><code>from nltk import sent_tokenize\n\ntest_str = \"pfs alert conf . it is unlikely that we will sign it - pfs of $ 950 filed to driver - we are gathering information. some junky words thereafter\"\nsentences = [sent for sent in sent_tokenize(test_str) if \"pfs\" in sent]\nprint(sentences)\n</code></pre>\n\n<p>This yields (mind the missing last sentence without <code>pfs</code>):</p>\n\n<pre><code>['pfs alert conf .', \n 'it is unlikely that we will sign it - pfs of $ 950 filed to driver - we are gathering information.']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 0, "last_activity_date": 1531338970, "creation_date": 1531338970, "answer_id": 51293332, "question_id": 51293154, "link": "https://stackoverflow.com/questions/51293154/python-regex-extracting-multiple-sentences-containing-same-keyword/51293332#51293332", "title": "Python Regex - extracting multiple sentences containing same keyword", "body": "<p>The first <code>pfs</code> is at the start of the line but in your positive lookbehind you are matching 1 character with <code>(?&lt;=[.?\\s!-])</code> You might use an alternation to assert either the start of the line <code>^</code> or <code>[^.?!-]*(?&lt;=[.?\\s!-])</code></p>\n\n<p><code>(?:^|[^.?!-]*(?&lt;=[.?\\s!-]))\\bpfs\\b(?=[\\s.?!-])[^.?!-]*[.?!-]</code></p>\n\n<p><a href=\"https://regex101.com/r/aVhye4/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p><a href=\"http://rextester.com/PALNN13383\" rel=\"nofollow noreferrer\">Demo python</a></p>\n"}], "owner": {"reputation": 39, "user_id": 10066878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e30b81f0bfbeb8f8557add86509b00?s=128&d=identicon&r=PG&f=1", "display_name": "user92654", "link": "https://stackoverflow.com/users/10066878/user92654"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 51293332, "answer_count": 2, "score": 0, "last_activity_date": 1531338970, "creation_date": 1531338194, "last_edit_date": 1531338258, "question_id": 51293154, "link": "https://stackoverflow.com/questions/51293154/python-regex-extracting-multiple-sentences-containing-same-keyword", "title": "Python Regex - extracting multiple sentences containing same keyword", "body": "<pre><code>import re\n\nregex = r\"[^.?!-]*(?&lt;=[.?\\s!-])\\b(pfs)\\b(?=[\\s.?!-])[^.?!-]*[.?!-]\"\n\ntest_str = \"pfs alert conf . it is unlikely that we will sign it - pfs of $ 950 filed to driver - we are gathering information\"\n\nsubst = \"\"\n\nresult = re.sub(regex, subst, test_str, 0, re.IGNORECASE | re.MULTILINE)\n\nif result:\n    print (result)\n</code></pre>\n\n<p>As we see, test_str has two sentences having keyword 'pfs'. However, the above python code can only extract second sentence ' pfs of $ 950 filed to driver', how to modify it to extract 'pfs alert conf' as well?</p>\n"}, {"tags": ["python", "flask", "get"], "comments": [{"owner": {"reputation": 760, "user_id": 3761534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c1506c8ad5c241734d815b0204025d84?s=128&d=identicon&r=PG", "display_name": "plumSemPy", "link": "https://stackoverflow.com/users/3761534/plumsempy"}, "edited": false, "score": 1, "creation_date": 1531338641, "post_id": 51293118, "comment_id": 89564010, "body": "It will be hard to say with the given information. Try two things. First, open up your network tab on chrome dev tools and inspect your request to make sure it looks as you expect it. Second, on the server, make sure the jsonified result looks as expected."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 7175088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VinrW.png?s=128&g=1", "display_name": "Ryan Brady", "link": "https://stackoverflow.com/users/7175088/ryan-brady"}, "is_accepted": false, "score": 0, "last_activity_date": 1531340528, "creation_date": 1531340528, "answer_id": 51293656, "question_id": 51293118, "link": "https://stackoverflow.com/questions/51293118/uploaded-spreadsheet-is-empty-flask/51293656#51293656", "title": "uploaded spreadsheet is empty - Flask", "body": "<p>I was using the improper method. This is the updated code</p>\n\n<pre><code>@app.route('/upload', methods=['GET','POST])\ndef upload_file():\n    if request.method == 'POST':\n        return jsonify({'result': request.get_array(field_name='file')})\n    return '''\n    &lt;etc...&gt;\n    &lt;form action=\"\" method=post enctype=\"multipart/form-data\"&gt;\n    &lt;input type=file name=file&gt;&lt;input type=submit value=Upload&gt;\n    &lt;/form&gt;\n    '''\n</code></pre>\n\n<p>Some simple errors I had made were not initializing flask_excel and setting my flask app twice, which cause an AttributeError on the request.get_array method. </p>\n"}], "owner": {"reputation": 151, "user_id": 7175088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VinrW.png?s=128&g=1", "display_name": "Ryan Brady", "link": "https://stackoverflow.com/users/7175088/ryan-brady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1531342618, "answer_count": 1, "score": 0, "last_activity_date": 1531342610, "creation_date": 1531338058, "last_edit_date": 1531342610, "question_id": 51293118, "link": "https://stackoverflow.com/questions/51293118/uploaded-spreadsheet-is-empty-flask", "closed_reason": "Duplicate", "title": "uploaded spreadsheet is empty - Flask", "body": "<p>When I upload my excel spreadsheet, it is null. </p>\n\n<pre><code>@app.route('/upload', methods=['GET','POST'])\ndef upload_file():\n    if request.method == 'POST':\n        return jsonify({'result': request.args.get('file')})\n    return '''\n    &lt;etc...&gt;\n    &lt;form action=\"\" method=post enctype=\"multipart/form-data\"&gt;\n    &lt;input type=file name=file&gt;&lt;input type=submit value=Upload&gt;\n    &lt;/form&gt;\n    '''\n</code></pre>\n\n<p>The filenames are matching however. Anyone have any insight?</p>\n"}, {"tags": ["python", "web-crawler", "scapy"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8938338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KqxJs.png?s=128&g=1", "display_name": "Sadot Benzauto", "link": "https://stackoverflow.com/users/8938338/sadot-benzauto"}, "edited": false, "score": 0, "creation_date": 1531373009, "post_id": 51293234, "comment_id": 89572713, "body": "thanks great idea, but isn&#39;t the <code>MEDIA_ALLOW_REDIRECTS = True</code> in the settings taking care of any redirection?"}], "tags": [], "owner": {"reputation": 190, "user_id": 4509213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a0b8a77c2ee7bfa18899b7a987fc36?s=128&d=identicon&r=PG", "display_name": "Psyche", "link": "https://stackoverflow.com/users/4509213/psyche"}, "is_accepted": false, "score": 0, "last_activity_date": 1531338527, "creation_date": 1531338527, "answer_id": 51293234, "question_id": 51293030, "link": "https://stackoverflow.com/questions/51293030/scrapy-wont-download-files-with-the-standard-files-pipeline/51293234#51293234", "title": "Scrapy won&#39;t download files with the standard Files Pipeline", "body": "<p>It really hard to say without a lot more information, which I wouldn't be able to get without my own moogle account, but if the problem <em>is</em> that scrapy isn't automatically resolving the redirect, you probably want to add an extra step to your scraping pipeline where it structures a request to the <em>true</em> location of your file after requesting the <a href=\"https://moodle.some.ac.il/course/view.php?id=1032#section-0\" rel=\"nofollow noreferrer\">https://moodle.some.ac.il/course/view.php?id=1032#section-0</a>. </p>\n\n<p>To sum up, the idea is write a function that takes in the response to requesting links like <a href=\"https://moodle.some.ac.il/course/view.php?id=1032#section-0\" rel=\"nofollow noreferrer\">https://moodle.some.ac.il/course/view.php?id=1032#section-0</a> and uses the constent of this response to structure a request for links like <a href=\"https://moodle.some.ac.il/pluginfile.php/44033/mod_resource/content/1/my_file.docx\" rel=\"nofollow noreferrer\">https://moodle.some.ac.il/pluginfile.php/44033/mod_resource/content/1/my_file.docx</a>, whose response is then handled by your function <code>parse_files</code>.</p>\n\n<p>To figure out what this intermediate function must do in order to submit a request for your desired file url, I advise inspecting the body of the response that would be passed to your intermediate function and locating the xpath to where your file's url is. </p>\n"}], "owner": {"reputation": 1, "user_id": 8938338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KqxJs.png?s=128&g=1", "display_name": "Sadot Benzauto", "link": "https://stackoverflow.com/users/8938338/sadot-benzauto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531338527, "creation_date": 1531337678, "question_id": 51293030, "link": "https://stackoverflow.com/questions/51293030/scrapy-wont-download-files-with-the-standard-files-pipeline", "title": "Scrapy won&#39;t download files with the standard Files Pipeline", "body": "<p>I'm trying to download all the files from a college <a href=\"https://github.com/moodle/moodle\" rel=\"nofollow noreferrer\">Moodle</a>,  which are organized by course. I have managed to successfully login  and locate all links of the files in the correct order; when i pass the links to the <code>parse_files</code> function, nothing gets downloaded and i got this output:</p>\n\n<pre><code>    2018-07-11 21:56:41 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET     https://moodle.some.ac.il/course/view.php?id=1032&gt; (referer: https://moodle.some.ac.il/my/)\n        2018-07-11 21:56:41 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://moodle.some.ac.il/course/view.php?id=1032&gt;\n        {'files_urls': ['https://moodle.some.ac.il/course/view.php?id=1032#section-0']}2018-07-11 21:56:44 [scrapy.core.engine] INFO: Closing spider (finished)\n2018-07-11 21:56:44 [scrapy.statscollectors] INFO: Dumping Scrapy stats:\n{'downloader/request_bytes': 5944,\n 'downloader/request_count': 18,\n 'downloader/request_method_count/GET': 17,\n 'downloader/request_method_count/POST': 1,\n 'downloader/response_bytes': 220875,\n 'downloader/response_count': 18,\n 'downloader/response_status_count/200': 16,\n 'downloader/response_status_count/303': 2,\n 'finish_reason': 'finished',\n 'finish_time': datetime.datetime(2018, 7, 11, 18, 56, 44, 591156),\n 'item_scraped_count': 13,\n 'log_count/DEBUG': 32,\n 'log_count/INFO': 7,\n 'memusage/max': 53354496,\n 'memusage/startup': 53354496,\n 'request_depth_max': 2,\n 'response_received_count': 16,\n 'scheduler/dequeued': 17,\n 'scheduler/dequeued/memory': 17,\n 'scheduler/enqueued': 17,\n 'scheduler/enqueued/memory': 17,\n 'start_time': datetime.datetime(2018, 7, 11, 18, 56, 37, 753571)}\n2018-07-11 21:56:44 [scrapy.core.engine] INFO: Spider closed (finished)\n</code></pre>\n\n<p>Im using the builtin files pipeline after enable it and set <code>FILES_STORE = 'files'</code>in my settings. i might be missing something or maybe is relate to the fact that each file link <code>https://moodle.some.ac.il/course/view.php?id=1032#section-0</code> points to <code>https://moodle.some.ac.il/pluginfile.php/44033/mod_resource/content/1/my_file.docx</code> and the spider doesn't manage to resolve the redirection link? perhaps is there any better approach? Thanks a lot. here is my spider:</p>\n\n<pre><code>import scrapy\nimport os\nimport college_files.items as my_item\n\n\nclass CollegeSpider(scrapy.Spider):\n\nname = 'college_spider'\n\nstart_urls = ['https://moodle.somecollege.com']\n\n\nif not os.path.exists('files'):\n    os.makedirs(\"files\")\n\n\n\ndef parse(self, response):\n\n    return scrapy.FormRequest.from_response(\n            response,\n            formdata={'username': 'my_username', 'password': 'my_password'},\n            callback=self.after_login\n    )\n\ndef after_login(self, response):\n    user_name = response.xpath('//div/header/div/div/h1/text()').extract()\n\n    cursos_first = response.css('div.well')\n    if not os.path.exists(myFilesDir):\n        os.makedirs(myFilesDir)\n\n    for my_course in cursos_first.css('a'):\n        my_course_dir = os.path.join(myFilesDir, my_course.css('a::text').extract_first())\n\n        if not os.path.exists(my_course_dir):\n            os.makedirs(my_course_dir)\n        yield response.follow(my_course.css('a::attr(href)').extract_first(), callback=self.parse_files)\n        print(\"Despues1 {0}\".format(my_course))\n\n\ndef parse_files(self, response):\n    topics = response.css('ul.topics')\n    sections = topics.css('li.section')\n    my_i = my_item.FileToDown()\n    my_i['files_urls'] = [sections.css('a::attr(href)').extract_first()]\n    yield my_i\n</code></pre>\n"}]