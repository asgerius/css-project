[{"tags": ["python", "numpy", "image-processing", "contour", "opencv-contour"], "comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1528934706, "post_id": 50847827, "comment_id": 88699114, "body": "If your pixels are floating point then there are theoretically an infinite amount of pixels that fall within the contour due to the locations now being continuous. What constraints do you want to impose to limit the length of this list of pixels? Also remember that the list of contour pixels is such that each element needs to be a 3d array with a singleton second dimension (i.e. A N x 1 x 2 array as noted in the other post)."}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1528934815, "post_id": 50847827, "comment_id": 88699134, "body": "@rayryeng My pixels are not continuous. They are integers. It is the contours that are floats. I am guessing this is caused by the fact that these contours were drawn manually by a human who zoomed in on the image while drawing the contours."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1528935032, "post_id": 50847827, "comment_id": 88699160, "body": "Ah I see. However it doesn&#39;t look like your contour list is constructed properly. See my note earlier about them being 3d arrays."}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1528935307, "post_id": 50847827, "comment_id": 88699216, "body": "@rayryeng I edited the question (line 3 in code) so that it now has the correct contour list construction which is what I ran on my computer. It now constructs a list of 3D array of Nx1x2"}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1528936548, "post_id": 50847827, "comment_id": 88699427, "body": "@rayryeng Please let me know if you still think that <code>contour_array_list</code> is constructed improperly. It should be correct as I designed it as you recommended in the other question."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1528936809, "post_id": 50847827, "comment_id": 88699485, "body": "Interesting. I need to experiment. I&#39;m not at a computer right now so I won&#39;t be able to try until later tonight. Do you happen to have the contour data available somewhere?"}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1528944968, "post_id": 50847827, "comment_id": 88700959, "body": "@rayryeng I put the x and y coordinates of the contours into a gist here: <a href=\"https://gist.github.com/sdoken/173fae1f9d8673ffff5b481b3872a69d\" rel=\"nofollow noreferrer\">gist.github.com/sdoken/173fae1f9d8673ffff5b481b3872a69d</a> Referring to a 512 by 512 numpy array, these coordinates tell you the location of the contour points."}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1528945148, "post_id": 50847827, "comment_id": 88700993, "body": "@CrisLuengo Does it matter that my contours are pretty irregular and do not make up what most people would identify as a polygon? Or can any set of contour points be considered to make up a polygon? This has not been trivial in my experience."}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1528946278, "post_id": 50847827, "comment_id": 88701166, "body": "@CrisLuengo I am not concerned with computational efficiency at this point. I would appreciate if you could show me the code that would accomplish this."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1528956043, "post_id": 50847827, "comment_id": 88703798, "body": "@itsnotme: There exist algorithms that work only for convex polygons, but many of them support even self-intersecting polygons (with <a href=\"https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule\" rel=\"nofollow noreferrer\">one</a> or <a href=\"https://en.wikipedia.org/wiki/Nonzero-rule\" rel=\"nofollow noreferrer\">another</a> winding rule to define the interior)."}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1529103913, "post_id": 50847827, "comment_id": 88769283, "body": "@rayryeng Actually I think that <code>contour_array_list</code> was constructed properly as a list of Nx1x2 numpy arrays in the way that I originally published the code. Can you double-check if you still think it was not constructed properly or explain what you mean?"}], "answers": [{"comments": [{"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "edited": false, "score": 0, "creation_date": 1529610693, "post_id": 50849881, "comment_id": 88949002, "body": "I am very grateful for your help here. This code, which I tried on multiple images, enabled me to find pixels within the &#39;contours&#39;. (I am not picky about code style and just care about a working solution) A few questions that remain for me: a) I would love to know the thinking that went into using <code>hstack</code> and <code>meshgrid</code> here as I was not able to decipher how you ended up coming up with using those functions and how this differs from their normal use. b) Given a set of contour points (or vertices), does <code>matplotlib.path.Path</code> always find a convex polygon? What if the shape we need is concave?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "edited": false, "score": 1, "creation_date": 1529611900, "post_id": 50849881, "comment_id": 88949483, "body": "@itsnotme: The polygon does not need to be convex, there are no such assumptions in this code. <code>Path</code> can encode any polygon (actually, I&#39;m not sure about self-intersections, but you don&#39;t have those). <code>meshgrid</code> and <code>hstack</code> I used in the way I&#39;m used to in MATLAB. Basically, <code>meshgrid</code> generates in <code>xv</code> and <code>yv</code> 2D arrays that together contain the (x,y) coordinates at each point within a rectangular area, described by the vectors <code>x</code> and <code>y</code>. I reshaped these two to 1D arrays and concatenated them (<code>hstack</code>) to form a 2xN array of coordinates, as expected by <code>contains_points</code>."}, {"owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "edited": false, "score": 0, "creation_date": 1529635106, "post_id": 50849881, "comment_id": 88955570, "body": "Here I plotted the contours and the pixels that came out of your code. <a href=\"https://github.com/sdoken/pydicom_rtstruct_contour_mapping/blob/master/Screen%20Shot%202018-06-21%20at%2018.22.12.png\" rel=\"nofollow noreferrer\">github.com/sdoken/pydicom_rtstruct_contour_mapping/blob/mast&zwnj;&#8203;er/&hellip;</a>  If you look closely at the bottom of the colored regions, you will see that the green area is missing the concaveness that the red boundary in the bottom image has. I am not sure if this is an actual problem (the algorithm selected some points to be within when they are without) or an artifact of the visualization process, and not a problem"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "edited": false, "score": 0, "creation_date": 1529642089, "post_id": 50849881, "comment_id": 88956924, "body": "@itsnotme: see the plots I just attached to the answer. There is no reason to believe the functions called create a convex hull. I&#39;m not sure what happened in the image you posted. Does that polygon have any self-intersections?"}], "tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": true, "score": 2, "last_activity_date": 1529641864, "last_edit_date": 1529641864, "creation_date": 1528952304, "answer_id": 50849881, "question_id": 50847827, "link": "https://stackoverflow.com/questions/50847827/how-can-i-select-the-pixels-that-fall-within-a-contour-in-an-image-represented-b/50849881#50849881", "title": "How can I select the pixels that fall within a contour in an image represented by a numpy array?", "body": "<p>I think that the simplest way of finding all pixels that fall within the contour is as follows.</p>\n\n<p>The contour is described by a set of non-integer points. We can think of these points as vertices of a polygon, the contour is a polygon.</p>\n\n<p>We first find the bounding box of the polygon. Any pixel outside of this bounding box is not inside the polygon, and doesn't need to be considered.</p>\n\n<p>For the pixels inside the bounding box, we test if they are inside the polygon using the classical test: Trace a line from some point at infinity to the point, and count the number of polygon edges (line segments) crossed. If this number is odd, the point is inside the polygon. It turns out that <a href=\"https://matplotlib.org/api/path_api.html#matplotlib.path.Path.contains_points\" rel=\"nofollow noreferrer\">Matplotlib</a> contains <a href=\"https://stackoverflow.com/questions/36399381/whats-the-fastest-way-of-checking-if-a-point-is-inside-a-polygon-in-python\">a very efficient implementation of this algorithm</a>.</p>\n\n<p>I'm still getting used to Python and Numpy, this might be a bit awkward code if you're a Python expert. But it is straight-forward what it does, I think. First it computes the bounding box of the polygon, then it creates an array <code>points</code> with the coordinates of all pixels that fall within this bounding box (I'm assuming the pixel centroid is what counts). It applies the <code>matplotlib.path.contains_points</code> method to this array, yielding a boolean array <code>mask</code>. Finally, it reshapes this array to match the bounding box.</p>\n\n<pre><code>import math\nimport matplotlib.path\nimport numpy as np\n\nx_pixel_nos = [...]\ny_pixel_nos = [...] # Data from https://gist.github.com/sdoken/173fae1f9d8673ffff5b481b3872a69d\n\ntemp_list = []\nfor a, b in zip(x_pixel_nos, y_pixel_nos):\n   temp_list.append([a, b])\n\npolygon = np.array(temp_list)\nleft = np.min(polygon, axis=0)\nright = np.max(polygon, axis=0)\nx = np.arange(math.ceil(left[0]), math.floor(right[0])+1)\ny = np.arange(math.ceil(left[1]), math.floor(right[1])+1)\nxv, yv = np.meshgrid(x, y, indexing='xy')\npoints = np.hstack((xv.reshape((-1,1)), yv.reshape((-1,1))))\n\npath = matplotlib.path.Path(polygon)\nmask = path.contains_points(points)\nmask.shape = xv.shape\n</code></pre>\n\n<p>After this code, what is necessary is to locate the bounding box within the image, and color the pixels. <code>left</code> contains the pixel in the image corresponding to the top-left pixel of <code>mask</code>.</p>\n\n<hr>\n\n<p>It is possible to improve the performance of this algorithm. If the ray traced to test a pixel is horizontal, you can imagine that all the pixels along a horizontal line can benefit from the work done for the pixels to the left. That is, it is possible to compute the in/out status for all pixels on an image line with a little bit more effort than the cost for a single pixel.</p>\n\n<p>The <code>matplotlib.path.contains_points</code> algorithm is much more efficient than performing a single-point test for all points, since sorting the polygon edges and vertices appropriately make each test much cheaper, and that sorting only needs to be done once when testing many points at once. But this algorithm doesn't take into account that we want to test many points on the same line.</p>\n\n<hr>\n\n<p>These are what I see when I do</p>\n\n<pre><code>pp.plot(x_pixel_nos, y_pixel_nos)\npp.imshow(mask)\n</code></pre>\n\n<p>after running the code above with your data. Note that the y axis is inverted with <code>imshow</code>, hence the vertically mirrored shapes.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IMuPY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IMuPY.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/idHJQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/idHJQ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 3020085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sz87D.jpg?s=128&g=1", "display_name": "sandeepsign", "link": "https://stackoverflow.com/users/3020085/sandeepsign"}, "is_accepted": false, "score": 1, "last_activity_date": 1570839420, "creation_date": 1570839420, "answer_id": 58349794, "question_id": 50847827, "link": "https://stackoverflow.com/questions/50847827/how-can-i-select-the-pixels-that-fall-within-a-contour-in-an-image-represented-b/58349794#58349794", "title": "How can I select the pixels that fall within a contour in an image represented by a numpy array?", "body": "<p>With Help of Shapely library in python, it can easily be done as:</p>\n\n<p>from shapely.geometry import Point, Polygon</p>\n\n<p>Convert all the x,y coords to shapely Polygons as:</p>\n\n<pre><code>coords = [(0, 0), (0, 2), (1, 1), (2, 2), (2, 0), (1, 1), (0, 0)]\npl = Polygon(coords)\n</code></pre>\n\n<h1>Now find pixels in each of polygon as:</h1>\n\n<pre><code>minx, miny, maxx, maxy = pl.bounds\nminx, miny, maxx, maxy = int(minx), int(miny), int(maxx), int(maxy)\nbox_patch = [[x,y] for x in range(minx,maxx+1) for y in range(miny,maxy+1)]\npixels = []\nfor pb in box_patch: \n  pt = Point(pb[0],pb[1])\n  if(pl.contains(pt)):\n    pixels.append([int(pb[0]), int(pb[1])])\nreturn pixels\n</code></pre>\n\n<p>Put this loop for each set of coords and then for each polygons. </p>\n\n<p>good to go :)</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6826902, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-edLfEhpQ7Qg/AAAAAAAAAAI/AAAAAAAABfk/9aa1GCQ34r8/photo.jpg?sz=128", "display_name": "Hung-Yi Wu", "link": "https://stackoverflow.com/users/6826902/hung-yi-wu"}, "is_accepted": false, "score": 1, "last_activity_date": 1586877010, "creation_date": 1586877010, "answer_id": 61211038, "question_id": 50847827, "link": "https://stackoverflow.com/questions/50847827/how-can-i-select-the-pixels-that-fall-within-a-contour-in-an-image-represented-b/61211038#61211038", "title": "How can I select the pixels that fall within a contour in an image represented by a numpy array?", "body": "<p><code>skimage.draw.polygon</code> can handle this <a href=\"https://scikit-image.org/docs/dev/api/skimage.draw.html#polygon\" rel=\"nofollow noreferrer\">1</a>, see the example code of this function on that page. </p>\n\n<p>If you want just the contour, you can do <code>skimage.segmentation.find_boundaries</code> <a href=\"https://scikit-image.org/docs/dev/api/skimage.segmentation.html#skimage.segmentation.find_boundaries\" rel=\"nofollow noreferrer\">2</a>.</p>\n"}], "owner": {"reputation": 574, "user_id": 2079111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727d7951fa3fba66630b3323e83197a1?s=128&d=identicon&r=PG", "display_name": "Semihcan Doken", "link": "https://stackoverflow.com/users/2079111/semihcan-doken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6088, "favorite_count": 0, "accepted_answer_id": 50849881, "answer_count": 3, "score": 2, "last_activity_date": 1586877010, "creation_date": 1528934214, "last_edit_date": 1529104081, "question_id": 50847827, "link": "https://stackoverflow.com/questions/50847827/how-can-i-select-the-pixels-that-fall-within-a-contour-in-an-image-represented-b", "title": "How can I select the pixels that fall within a contour in an image represented by a numpy array?", "body": "<p>I have a set of contour points drawn on an image which is stored as a 2D numpy array. The contours are represented by 2 numpy arrays of float values for x and y coordinates each. <a href=\"https://gist.github.com/sdoken/173fae1f9d8673ffff5b481b3872a69d\" rel=\"nofollow noreferrer\">These coordinates</a> are not integers and do not align perfectly with pixels but they do tell you the location of the contour points with respect to pixels. </p>\n\n<p>I would like to be able to select the pixels that fall within the contours. I wrote some code that is pretty much the same as answer given here: <a href=\"https://stackoverflow.com/questions/33234363/access-pixel-values-within-a-contour-boundary-using-opencv-in-python/33251950?noredirect=1#comment88697613_33251950\">Access pixel values within a contour boundary using OpenCV in Python</a> </p>\n\n<pre><code>temp_list = []\nfor a, b in zip(x_pixel_nos, y_pixel_nos):\n    temp_list.append([[a, b]]) # 2D array of shape 1x2\ntemp_array = np.array(temp_list)\ncontour_array_list = []\ncontour_array_list.append(temp_array)\n\n\n\nlst_intensities = []\n\n# For each list of contour points...\nfor i in range(len(contour_array_list)):\n    # Create a mask image that contains the contour filled in\n    cimg = np.zeros_like(pixel_array)\n    cv2.drawContours(cimg, contour_array_list, i, color=255, thickness=-1)\n\n# Access the image pixels and create a 1D numpy array then add to list\npts = np.where(cimg == 255)\nlst_intensities.append(pixel_array[pts[0], pts[1]])\n</code></pre>\n\n<p>When I run this, I get an error <code>error: OpenCV(3.4.1) /opt/conda/conda-bld/opencv-suite_1527005509093/work/modules/imgproc/src/drawing.cpp:2515: error: (-215) npoints &gt; 0 in function drawContours</code></p>\n\n<p>I am guessing that at this point openCV will not work for me because my contours are floats, not integers, which openCV does not handle with <code>drawContours</code>. If I convert the coordinates of the contours to integers, I lose a lot of precision.</p>\n\n<p>So how can I get at the pixels that fall within the contours?</p>\n\n<p><a href=\"https://i.stack.imgur.com/mxgwI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mxgwI.png\" alt=\"enter image description here\"></a></p>\n\n<p>This should be a trivial task but so far I was not able to find an easy way to do it.</p>\n"}, {"tags": ["python", "user-interface", "checkbox", "submit", "wget"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "edited": false, "score": 0, "creation_date": 1528937366, "post_id": 50847803, "comment_id": 88699587, "body": "I&#39;m sure there are many, but I&#39;m yet to find an example for what I need. most of the tutorials are for tkinter, but all of them are with checkboxes with imediate acction."}, {"owner": {"reputation": 1880, "user_id": 3126085, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3d1b5320d5edffe38958e8ca1129ab32?s=128&d=identicon&r=PG&f=1", "display_name": "crookedleaf", "link": "https://stackoverflow.com/users/3126085/crookedleaf"}, "reply_to_user": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "edited": false, "score": 0, "creation_date": 1528937547, "post_id": 50847803, "comment_id": 88699632, "body": "@apoklyps3 You just map the button being clicked to a function. That function checks if the checkbox is ticked. The checkbox only will perform an action if the checkbox being clicked is mapped to a function."}], "tags": [], "owner": {"reputation": 1880, "user_id": 3126085, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3d1b5320d5edffe38958e8ca1129ab32?s=128&d=identicon&r=PG&f=1", "display_name": "crookedleaf", "link": "https://stackoverflow.com/users/3126085/crookedleaf"}, "is_accepted": true, "score": 2, "last_activity_date": 1528933843, "creation_date": 1528933843, "answer_id": 50847803, "question_id": 50847749, "link": "https://stackoverflow.com/questions/50847749/pythong-gui-with-checkboxes/50847803#50847803", "title": "Pythong gui with checkboxes", "body": "<p>there are plenty of python GUI options... tkinter, pyqt, wxpython, kivy, etc. </p>\n\n<p>please refer to the <a href=\"https://wiki.python.org/moin/GuiProgramming\" rel=\"nofollow noreferrer\">GuiProgramming</a> python wiki article</p>\n"}], "owner": {"reputation": 39, "user_id": 9614834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jie83RcF7mQ/AAAAAAAAAAI/AAAAAAAAABQ/ghT9VH1eDsY/photo.jpg?sz=128", "display_name": "apoklyps3", "link": "https://stackoverflow.com/users/9614834/apoklyps3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1528955250, "accepted_answer_id": 50847803, "answer_count": 1, "score": -4, "last_activity_date": 1528933843, "creation_date": 1528933283, "question_id": 50847749, "link": "https://stackoverflow.com/questions/50847749/pythong-gui-with-checkboxes", "closed_reason": "Needs more focus", "title": "Pythong gui with checkboxes", "body": "<p>Is it possible to create a gui in Python that has checkboxes for software I'd like to download and that has a submit button to download all checked ones rather than automatically downloading them everytime one of them is checked?\nFound alot of tutorials that use wget to accomplish the download when a box is checked, but none to what I need : checkboxes with a \"submit\" button.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "performance", "for-loop", "yahoo-finance"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1528933341, "post_id": 50847740, "comment_id": 88698852, "body": "If the code is complete and works but just needs improvement, it should be on Code Review. Note though, they require complete, runnable code."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 2, "creation_date": 1528933748, "post_id": 50847740, "comment_id": 88698926, "body": "I would profile your code using <code>cProfile</code> and identify your bottleneck. If it&#39;s download speed (i.e. <code>get_data</code>) , there&#39;s little you will be able to do from Python side."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528935110, "post_id": 50847740, "comment_id": 88699182, "body": "store your dataset locally, and make your computations reproducible, add some tests"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528935250, "post_id": 50847740, "comment_id": 88699209, "body": "If the problem really is waiting on downloads, you <i>may</i> be able to speed this up by just using threads. See the example in <code>concurrent.futures</code> in the docs for doing something similar with code that spends most of its time waiting on <code>urllib.request</code>. Even if your bottleneck is your network bandwidth or throttling by Yahoo, being able to work on some data while waiting on other data may still get you a modest but significant speedup."}], "answers": [{"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528933980, "post_id": 50847807, "comment_id": 88698980, "body": "This seems to be a comment, rather than a solid answer."}, {"owner": {"reputation": 2171, "user_id": 4930850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZwrOR.jpg?s=128&g=1", "display_name": "Chad Van De Hey", "link": "https://stackoverflow.com/users/4930850/chad-van-de-hey"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528934037, "post_id": 50847807, "comment_id": 88698988, "body": "Fair. The answer more directly is &quot;get rid of the for loop and batch your web requests&quot;."}, {"owner": {"reputation": 279, "user_id": 6069211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daadc4328bdd29cc856394a8ab0c6ccb?s=128&d=identicon&r=PG&f=1", "display_name": "atreadw", "link": "https://stackoverflow.com/users/6069211/atreadw"}, "edited": false, "score": 0, "creation_date": 1531970899, "post_id": 50847807, "comment_id": 89799173, "body": "The yahoo_fin package is separate from the yahoo_finance package (see <a href=\"http://theautomatic.net/yahoo_fin-documentation/#get_data\" rel=\"nofollow noreferrer\">theautomatic.net/yahoo_fin-documentation/#get_data</a>), but I agree with the comments above.   Going through thousands of tickers takes time, so you&#39;ll have to use threading or multiprocessing to speed the process up significantly."}], "tags": [], "owner": {"reputation": 2171, "user_id": 4930850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZwrOR.jpg?s=128&g=1", "display_name": "Chad Van De Hey", "link": "https://stackoverflow.com/users/4930850/chad-van-de-hey"}, "is_accepted": false, "score": 1, "last_activity_date": 1528933982, "last_edit_date": 1528933982, "creation_date": 1528933897, "answer_id": 50847807, "question_id": 50847740, "link": "https://stackoverflow.com/questions/50847740/beginner-python-code-running-slow-yahoo-finance-stock-screener/50847807#50847807", "title": "**Beginner Python Code Running Slow (Yahoo Finance Stock Screener)", "body": "<p>I would argue that \"thousands\" of calls to the Yahoo Finance Module is likely why it takes so long (thus the answer would be how you would like to batch these calls -- with that said, I don't entirely understand how this library works or even if they support a feature like that). In summary, a for loop surrounding a web api call screams performance issues.</p>\n\n<p>I am a bit confused on what your code is actually referencing to begin with. Would you mind linking where you got the library <code>yahoo_fin</code>? I see the <a href=\"https://pypi.org/project/yahoo-finance/\" rel=\"nofollow noreferrer\">yahoo-finance</a> library, but it doesn't seem to have a method called <code>get_data</code>. </p>\n"}], "owner": {"reputation": 77, "user_id": 9526494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7852131fe07edb339703c4dd9a714e5?s=128&d=identicon&r=PG&f=1", "display_name": "DrainBramage", "link": "https://stackoverflow.com/users/9526494/drainbramage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 0, "closed_date": 1528959487, "answer_count": 1, "score": -1, "last_activity_date": 1528933982, "creation_date": 1528933216, "question_id": 50847740, "link": "https://stackoverflow.com/questions/50847740/beginner-python-code-running-slow-yahoo-finance-stock-screener", "closed_reason": "Needs more focus", "title": "**Beginner Python Code Running Slow (Yahoo Finance Stock Screener)", "body": "<p>First question on stack. I'm a novice coder looking to write a stock screener in Python. I'm using a Yahoo! Finance Module <a href=\"https://github.com/lukaszbanasiak/yahoo-finance\" rel=\"nofollow noreferrer\">https://github.com/lukaszbanasiak/yahoo-finance</a>. My entire program takes 20+ minutes to execute. See below: it is composed of a massive list of nearly every tradable US equity. For each stock in the list, the program looks up it's history, computes some values, and prints if the stock's stats fall within my parameters. Is there a way to speed it up?  Thanks!</p>\n\n<pre><code>from yahoo_fin.stock_info import get_data\nList=[\"AA\",\"AAC\",\"AAMC\",]\n#list continues for 7000 more elements\n\nLimit=90\nfor stock in List:\n    try: \n        df=get_data(stock,start_date='03/28/2018')\n        Results,Averages,AvgHighs,AvgLows,=[],[],[],[]\n        AverageVolume=(df['volume'].mean())\n        AvgHigh=(df['high'].mean())\n        AvgLow=(df['low'].mean())\n        Average=(AvgHigh+AvgLow)/2\n        SUM=sum(i&gt;Average for i in (df['high']))\n        if ((SUM/(len(df['high'])))&gt;(Limit/100)) and (AverageVolume&gt;80000) and \n(200&gt;Average&gt;5.99):\n            Results.append(stock)\n            Averages.append(round(Average,2))\n            AvgHighs.append(round(AvgHigh,2))\n            AvgLows.append(round(AvgLow,2))\n            print(Results,AvgLows,Averages,AvgHighs)\n    except (ValueError,KeyError,RuntimeError,TypeError,KeyboardInterrupt):\n        continue \n</code></pre>\n"}, {"tags": ["python", "pip", "anaconda"], "comments": [{"owner": {"reputation": 1138, "user_id": 8082942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39e453fc810fab5a6d369713d1d60ce8?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/8082942/anon"}, "edited": false, "score": 0, "creation_date": 1528934604, "post_id": 50847721, "comment_id": 88699097, "body": "What happened when you write <code>which pip</code>?"}, {"owner": {"reputation": 21, "user_id": 9048181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f170fead398ec7e035fb78b13afd33a?s=128&d=identicon&r=PG&f=1", "display_name": "Jenn", "link": "https://stackoverflow.com/users/9048181/jenn"}, "reply_to_user": {"reputation": 1138, "user_id": 8082942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39e453fc810fab5a6d369713d1d60ce8?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/8082942/anon"}, "edited": false, "score": 0, "creation_date": 1528995717, "post_id": 50847721, "comment_id": 88727525, "body": "/usr/local/bin/pip"}], "answers": [{"tags": [], "owner": {"reputation": 463, "user_id": 9938850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43yVF.png?s=128&g=1", "display_name": "Stephen Fong", "link": "https://stackoverflow.com/users/9938850/stephen-fong"}, "is_accepted": false, "score": 3, "last_activity_date": 1528935151, "creation_date": 1528935151, "answer_id": 50847936, "question_id": 50847721, "link": "https://stackoverflow.com/questions/50847721/anaconda3-bin-python-no-module-named-pip/50847936#50847936", "title": "/anaconda3/bin/python: No module named pip", "body": "<p>Actually, pip should be installed by default. In case something special happens, try to download get-pip.py\nThen run the following (which may require administrator access):\npython get-pip.py in terminal\n(To have administrator access rights, simply type sudo su in terminal, and enter your password)</p>\n\n<p>Please reference:\n<a href=\"https://askubuntu.com/questions/597906/how-to-install-pip-and-a-python-package-for-self-installed-python\">https://askubuntu.com/questions/597906/how-to-install-pip-and-a-python-package-for-self-installed-python</a></p>\n"}], "owner": {"reputation": 21, "user_id": 9048181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f170fead398ec7e035fb78b13afd33a?s=128&d=identicon&r=PG&f=1", "display_name": "Jenn", "link": "https://stackoverflow.com/users/9048181/jenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2079, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528996435, "creation_date": 1528933067, "last_edit_date": 1528996435, "question_id": 50847721, "link": "https://stackoverflow.com/questions/50847721/anaconda3-bin-python-no-module-named-pip", "title": "/anaconda3/bin/python: No module named pip", "body": "<p>I tried to run 'python -m pip install \"package\"' command but it gives me this error:</p>\n\n<pre><code>/anaconda3/bin/python: No module named pip\n</code></pre>\n\n<p>I have python2 and python3 installed. Looks like that's messing up everything. \nAnd why it is using python in anaconda rather than the default one in /usr/bin/python?</p>\n"}, {"tags": ["python", "scikit-learn", "linear-regression", "cross-validation"], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 5787282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692a867e439036f8f67362129dd0b905?s=128&d=identicon&r=PG&f=1", "display_name": "DatenBergwerker", "link": "https://stackoverflow.com/users/5787282/datenbergwerker"}, "is_accepted": true, "score": 1, "last_activity_date": 1528935612, "creation_date": 1528935612, "answer_id": 50847984, "question_id": 50847637, "link": "https://stackoverflow.com/questions/50847637/sklearn-linear-regression-with-cross-validate-returns-na-accuracy-scores/50847984#50847984", "title": "Sklearn Linear Regression with Cross Validate Returns NA Accuracy Scores", "body": "<p>You seem to be taking the sqrt of a negative number, resulting in an nan. What measure are you trying to compute? Accuracy is usually used in classification problems. It is defined as the proportion of the correctly predicted classes out of the total number of observations. Since you are using a linear regression model and also compute the Root Mean Squared Error your area of application seems to be regression (working with continous values). The R2 measure which you try to take the sqrt of is the fraction of variance which your current model is able to explain (speaking in general terms). It should need no further processing.</p>\n"}], "owner": {"reputation": 661, "user_id": 4123749, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9b1c84914176fbdf0a0a835ca7420c9?s=128&d=identicon&r=PG&f=1", "display_name": "Odisseo", "link": "https://stackoverflow.com/users/4123749/odisseo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 50847984, "answer_count": 1, "score": -1, "last_activity_date": 1528935612, "creation_date": 1528932257, "question_id": 50847637, "link": "https://stackoverflow.com/questions/50847637/sklearn-linear-regression-with-cross-validate-returns-na-accuracy-scores", "title": "Sklearn Linear Regression with Cross Validate Returns NA Accuracy Scores", "body": "<p>I am running a very simple initial Linear Regression model with basic inputs. I have a small dataset and have removed all nulls. I use cross validate and pass the scoring methods in order to be able to retrieve the scores to judge under/overfitting.</p>\n\n<p>However, I get a Null Accuracy: does anyone know why this would happen?</p>\n\n<pre><code>X_train, X_test, y_train, y_test = train_test_split(X,y, random_state=42)\n\n#Linear Regression\n\nlr = linear_model.LinearRegression(fit_intercept=True)\n\nscores_lr = cross_validate(lr, X_train, y_train, return_train_score = True, scoring = ('r2', 'neg_mean_squared_error'), cv=10)\n\nprint 'Training Accuracy: ', np.sqrt(-scores_lr['train_r2'].mean())\nprint 'Training RMSE: ', np.sqrt(-scores_lr['train_neg_mean_squared_error'].mean())\nprint 'Validation Accuracy: ', np.sqrt(-scores_lr['test_r2'].mean())\nprint 'Validation RMSE: ', np.sqrt(-scores_lr['test_neg_mean_squared_error'].mean()) \n\nTraining Accuracy:  nan\nTraining RMSE:  1.0170113520623867\nValidation Accuracy:  nan\nValidation RMSE:  1.0230034705533613\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter", "time", "freeze"], "comments": [{"owner": {"reputation": 83, "user_id": 8519025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239a294cd103ca3e942d002f5ce8eb5d?s=128&d=identicon&r=PG&f=1", "display_name": "sapiron", "link": "https://stackoverflow.com/users/8519025/sapiron"}, "edited": false, "score": 0, "creation_date": 1528936055, "post_id": 50847585, "comment_id": 88699343, "body": "i have try with after but i dont know how i can place"}], "owner": {"reputation": 83, "user_id": 8519025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239a294cd103ca3e942d002f5ce8eb5d?s=128&d=identicon&r=PG&f=1", "display_name": "sapiron", "link": "https://stackoverflow.com/users/8519025/sapiron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1528947078, "creation_date": 1528931732, "last_edit_date": 1528947078, "question_id": 50847585, "link": "https://stackoverflow.com/questions/50847585/freeze-with-tkinter-and-other-script", "title": "Freeze with tkinter and other script", "body": "<p>I have this code ,i have made a calcule script for test but time.sleep froze textfield</p>\n\n<pre><code>import subprocess\nimport tkinter as tk\nfrom threading import Thread\nimport os\nospath = os.path.dirname(os.path.abspath(__file__))\npath = (ospath +\"\\\\calcule.py\")\nmaster = tk.Tk()\nmaster.geometry('930x450+400+400')\ndef sudo(cmd, terminal):\n\n    p = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, bufsize=1, universal_newlines=True, shell = True)\n    p.poll()\n    print(\"2\")\n    while True:\n        line = p.stdout.readline()\n        terminal.insert(tk.END, line)\n        terminal.see(tk.END)\n        if not line and p.poll is not None: break\n\n    while True:\n        print(\"3\")\n        err = p.stderr.readline()\n        terminal.insert(tk.END, err)\n        terminal.see(tk.END)\n        if not err and p.poll is not None: break\n    terminal.insert(tk.END, '\\n Finished download')\n\ntextfield = tk.Text(master, font = \"Arial 10\", bg = \"#000000\", fg = \"yellow\")\ntextfield.place(x=5, y=5, width=400, height=250)\n\nt = Thread(target = lambda: sudo(path, textfield))\nt.start()\n\ntk.mainloop()\n</code></pre>\n\n<p>and i have made an other script for test </p>\n\n<pre><code>import time\na = 0\nb = 1\nwhile a &lt; 1:\n    print(b)\n    b += 1\n    time.sleep(1)\n    if b == 1000:\n        a +=1\n</code></pre>\n\n<p>time.sleep freeze the code and i dont know how to debug this code.</p>\n"}, {"tags": ["python", "matplotlib", "polar-coordinates"], "comments": [{"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1528995030, "post_id": 50847566, "comment_id": 88727235, "body": "Is using a pure polar projection a must? Have you checked this examples: <a href=\"https://matplotlib.org/gallery/subplots_axes_and_figures/geo_demo.html\" rel=\"nofollow noreferrer\">matplotlib.org/gallery/subplots_axes_and_figures/geo_demo.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 77, "user_id": 4798057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5478be398685ab8bd97b09d4b1664c?s=128&d=identicon&r=PG&f=1", "display_name": "milky_whey", "link": "https://stackoverflow.com/users/4798057/milky-whey"}, "reply_to_user": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1529009504, "post_id": 50847566, "comment_id": 88733918, "body": "Yes, I would like to display it with a polar plot. Thank you."}, {"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1529011161, "post_id": 50847566, "comment_id": 88734560, "body": "Like it is done here? <a href=\"https://stackoverflow.com/questions/43082637/reverse-radial-axes-of-matplotlib-polar-plot\" title=\"reverse radial axes of matplotlib polar plot\">stackoverflow.com/questions/43082637/&hellip;</a>"}], "owner": {"reputation": 77, "user_id": 4798057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5478be398685ab8bd97b09d4b1664c?s=128&d=identicon&r=PG&f=1", "display_name": "milky_whey", "link": "https://stackoverflow.com/users/4798057/milky-whey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1528931597, "creation_date": 1528931597, "question_id": 50847566, "link": "https://stackoverflow.com/questions/50847566/how-to-invert-r-to-match-astronomy-altitude-with-a-polar-plot", "title": "How to invert r to match astronomy altitude with a polar plot", "body": "<p>I have a file with azimuth, altitude, and measurements at those positions.</p>\n\n<p>Example: Az Alt Value</p>\n\n<p>0 10 5</p>\n\n<p>0 45 7</p>\n\n<p>0 80 10</p>\n\n<p>10 10 4</p>\n\n<p>10 45 7</p>\n\n<p>10 80 11</p>\n\n<p>... ... ...</p>\n\n<p>These points do not map the entire sky, and the plot is very empty. I used scipy griddata to interpolate between the points to fill the plot. I convert to Cartesian coordinates to use griddata with.</p>\n\n<pre><code>#x = azimuth\n#y = altitude\nx,y = alt * np.cos(az), alt*np.sin(az)\nxi = np.linspace(0, 90, 100)\nyi = np.linspace(np.radians(10.), np.radians(350.), 100)\nzi = griddata((x, y), value, (xi[None,:], yi[:,None]), method='cubic')\n\nax = plt.subplot(111, projection='polar')\ncm = plt.cm.get_cmap('jet_r')\nlevels = np.linspace(min(value),max(value), 100)\ncf = plt.contourf(yi,90-xi,zi.T,levels=levels,cmap=cm)\ncbar = plt.colorbar()\ncbar.set_ticks(np.arange(15.5,22, .5))\ncbar.set_label(r'mag/arcsec$^2$')\nax.set_theta_zero_location('N')\nax.set_theta_direction(-1)\nax.yaxis.grid(False)\n#ax.set_rticks([])\nax.scatter(az,90-alt, marker='.', edgecolors='k', facecolors='none')\nax.xaxis.grid(False)\nplt.ylim(0,90)\n\nplt.show()\n</code></pre>\n\n<p>Which gives me\n<a href=\"https://i.stack.imgur.com/EThLQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EThLQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the plot above, you see that r is 0 in the center with 90 on the edges. I thought I could solve the issue by subtracting my altitudes from 90, however, the data does not seem to match what it should be on the plot. </p>\n\n<p>How can I go around by inverting the r axis to have 0 on the outside and 90 in the center, like with astronomy? </p>\n\n<p>Second, I have 0 at the top, to be like North at the top and invert the rotation to match N,E,S,W azimuth. </p>\n\n<p>However, the plot does not make sense, because at azimuth 225 degrees, the value at 15 degree altitude is 16.5. The plot shows the point measures 18.5. This makes me believe some scaling is being applied incorrectly by myself, or matplotlib.</p>\n\n<p>Any help fixing this is greatly appreciated.  </p>\n"}, {"tags": ["python", "libraries", "raspbian"], "comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528931937, "post_id": 50847535, "comment_id": 88698558, "body": "please mark the answer below as accepted"}], "answers": [{"comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528931895, "post_id": 50847558, "comment_id": 88698546, "body": "additionally you can get that file with <code>git clone ...</code> command"}, {"owner": {"reputation": 347, "user_id": 4206183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896dd7976b1309d64c083c238d8fb710?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa", "link": "https://stackoverflow.com/users/4206183/melissa"}, "edited": false, "score": 0, "creation_date": 1528931898, "post_id": 50847558, "comment_id": 88698547, "body": "@user9849588 Hm, then should I just copy the dht11.py file to the same place where sensorRead.py is?"}, {"owner": {"reputation": 587, "user_id": 9849588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a867a818473c7c433268331e590c5c?s=128&d=identicon&r=PG&f=1", "display_name": "user9849588", "link": "https://stackoverflow.com/users/9849588/user9849588"}, "reply_to_user": {"reputation": 347, "user_id": 4206183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896dd7976b1309d64c083c238d8fb710?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa", "link": "https://stackoverflow.com/users/4206183/melissa"}, "edited": false, "score": 0, "creation_date": 1528970451, "post_id": 50847558, "comment_id": 88712171, "body": "@Melissa yes, that&#39;s the easiest way."}], "tags": [], "owner": {"reputation": 587, "user_id": 9849588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a867a818473c7c433268331e590c5c?s=128&d=identicon&r=PG&f=1", "display_name": "user9849588", "link": "https://stackoverflow.com/users/9849588/user9849588"}, "is_accepted": true, "score": 2, "last_activity_date": 1528931539, "creation_date": 1528931539, "answer_id": 50847558, "question_id": 50847535, "link": "https://stackoverflow.com/questions/50847535/installing-python-libraries-manually-on-raspbian/50847558#50847558", "title": "Installing Python libraries manually on Raspbian", "body": "<p>You just need to have your sensorRead.py file in the same folder as dht11.py</p>\n"}], "owner": {"reputation": 347, "user_id": 4206183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896dd7976b1309d64c083c238d8fb710?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa", "link": "https://stackoverflow.com/users/4206183/melissa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 50847558, "answer_count": 1, "score": 0, "last_activity_date": 1528931791, "creation_date": 1528931388, "last_edit_date": 1528931791, "question_id": 50847535, "link": "https://stackoverflow.com/questions/50847535/installing-python-libraries-manually-on-raspbian", "title": "Installing Python libraries manually on Raspbian", "body": "<p>I'm working with reading sensor values through a Raspberry Pi 3 using Python, and I'm currently using this library: <a href=\"https://github.com/szazo/DHT11_Python\" rel=\"nofollow noreferrer\">https://github.com/szazo/DHT11_Python</a>. I am fairly new to the language and since there are no instructions in the README on how to install this library, I was wondering if anyone knows how to do it manually? I would just like to get rid of this error: </p>\n\n<pre><code>Traceback (most recent call last): \n   File \"sensorRead.py\", line 4, in &lt;module&gt;\n     import dht11\nImportError: No module name 'dht11'\n</code></pre>\n\n<p>So far, I ran these commands: </p>\n\n<pre><code>sudo git clone https://github.com/szazo/DHT11_Python.git\ncd DHT11_Python\nsudo apt-get update\nsudo apt-get install build-essential python-dev python-openssl\n</code></pre>\n\n<p>Then, I moved the library from <code>/home/pi</code> to <code>/usr/lib</code> but I'm still getting the same error. I must be missing something.</p>\n\n<p>If anyone knows how to properly install this library, then please help! Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 2, "creation_date": 1528931444, "post_id": 50847527, "comment_id": 88698445, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48727120/confusion-in-size-of-a-numpy-array\">Confusion in size of a numpy array</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1528931934, "post_id": 50847527, "comment_id": 88698557, "body": "I don&#39;t know what you mean by <code>a list insert into an array</code>."}, {"owner": {"reputation": 125, "user_id": 9594515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2055487b836e4c29c0c308e4424cf5?s=128&d=identicon&r=PG&f=1", "display_name": "Zealot91", "link": "https://stackoverflow.com/users/9594515/zealot91"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1528932111, "post_id": 50847527, "comment_id": 88698599, "body": "@jpp saw that question, but i am asking how to make a many rows one column matrix, I will edit my question to add that I am using numpy.dot(matrix1, matrix)"}, {"owner": {"reputation": 125, "user_id": 9594515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2055487b836e4c29c0c308e4424cf5?s=128&d=identicon&r=PG&f=1", "display_name": "Zealot91", "link": "https://stackoverflow.com/users/9594515/zealot91"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1528932471, "post_id": 50847527, "comment_id": 88698669, "body": "@hpaulj I have not read that in particular, will do a quick google search on list insert into an array and see if i get my desired result."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1528934162, "post_id": 50847527, "comment_id": 88699011, "body": "You have 3 elements. Beyond the mistake of thinking a 1D array has rows and columns, where did you get the idea it had <i>4</i> columns?"}, {"owner": {"reputation": 125, "user_id": 9594515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2055487b836e4c29c0c308e4424cf5?s=128&d=identicon&r=PG&f=1", "display_name": "Zealot91", "link": "https://stackoverflow.com/users/9594515/zealot91"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1528947294, "post_id": 50847527, "comment_id": 88701363, "body": "@user2357112 Are you serius? you did not think i made a mistake and pressed 4 instead of 3?"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 9594515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2055487b836e4c29c0c308e4424cf5?s=128&d=identicon&r=PG&f=1", "display_name": "Zealot91", "link": "https://stackoverflow.com/users/9594515/zealot91"}, "edited": false, "score": 0, "creation_date": 1528932035, "post_id": 50847581, "comment_id": 88698582, "body": "but if I am multiplying two matrix as in z = numpy.dot(x*y) will x be considered a 3x1 matrix or not? i take it for your answer that I will just get an ugly error message, and i am doing a linear regression and for it i need to turn a list into a matrix of as many rows as items in the list, i just dont know how."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1528932799, "last_edit_date": 1528932799, "creation_date": 1528931696, "answer_id": 50847581, "question_id": 50847527, "link": "https://stackoverflow.com/questions/50847527/python-array-rows1column-numpy-for-numpy-dotmatrix-matrix2/50847581#50847581", "title": "Python array rows*1column numpy for numpy.dot(matrix,matrix2)", "body": "<p>It is a 1 dimensional array:</p>\n\n<pre><code>In [653]: x = np.array([1,2,3])\nIn [654]: x\nOut[654]: array([1, 2, 3])\nIn [655]: x.shape\nOut[655]: (3,)\nIn [656]: x.ndim\nOut[656]: 1\n</code></pre>\n\n<p>The other is 2 dimensional:</p>\n\n<pre><code>In [657]: y = np.array([[1,2,3]])\nIn [658]: y\nOut[658]: array([[1, 2, 3]])\nIn [659]: y.shape\nOut[659]: (1, 3)\nIn [660]: y.ndim\nOut[660]: 2\n</code></pre>\n\n<p>the transpose of <code>y</code></p>\n\n<pre><code>In [661]: z = y.T\nIn [662]: z\nOut[662]: \narray([[1],\n       [2],\n       [3]])\nIn [663]: z.shape\nOut[663]: (3, 1)\n</code></pre>\n\n<p>The transpose of <code>x</code> is the same as <code>x</code></p>\n\n<hr>\n\n<p>Some multiply options:</p>\n\n<pre><code>In [664]: np.dot(x,y)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-664-6849a5f7ad6c&gt; in &lt;module&gt;()\n----&gt; 1 np.dot(x,y)\n\nValueError: shapes (3,) and (1,3) not aligned: 3 (dim 0) != 1 (dim 0)\n</code></pre>\n\n<p>Read <code>np.dot</code> for rules about the interaction of shapes. The key phrase is 'last dimension of x pairs the 2nd to the last of y'.</p>\n\n<pre><code>In [665]: np.dot(y,x)\nOut[665]: array([14])\n</code></pre>\n\n<p>Here the (1,3) pairs with (3,) t- produce a (1,).</p>\n\n<p>Element wise multiplication.  Here broadcasting rules apply</p>\n\n<pre><code>In [666]: x*y   \nOut[666]: array([[1, 4, 9]])\n</code></pre>\n\n<p>(3,) with (1,3) -> (1,3)(1,3) -> (1,3)</p>\n\n<pre><code>In [667]: x*z\nOut[667]: \narray([[1, 2, 3],\n       [2, 4, 6],\n       [3, 6, 9]])\n</code></pre>\n\n<p>(3,) with (3,1) -> (1,3)(3,1) -> (3,3)</p>\n\n<hr>\n\n<p>A handy way of changing the (3,) array into a (3,1) is with <code>None</code> (<code>np.newaxis</code>):</p>\n\n<pre><code>In [671]: x[:,None]\nOut[671]: \narray([[1],\n       [2],\n       [3]])\n\nIn [672]: np.dot(x[:,None],y)\nOut[672]: \narray([[1, 2, 3],\n       [2, 4, 6],\n       [3, 6, 9]])\n</code></pre>\n\n<p>(3,1) dot with (1,3) -> (3,3) </p>\n"}], "owner": {"reputation": 125, "user_id": 9594515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2055487b836e4c29c0c308e4424cf5?s=128&d=identicon&r=PG&f=1", "display_name": "Zealot91", "link": "https://stackoverflow.com/users/9594515/zealot91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 50847581, "answer_count": 1, "score": -2, "last_activity_date": 1528947326, "creation_date": 1528931305, "last_edit_date": 1528947326, "question_id": 50847527, "link": "https://stackoverflow.com/questions/50847527/python-array-rows1column-numpy-for-numpy-dotmatrix-matrix2", "title": "Python array rows*1column numpy for numpy.dot(matrix,matrix2)", "body": "<p>Is\n <code>a = [1, 2, 3]\n x = numpy.array(a)\n</code>\n a matrix of 3 cols and 1 row? I know that <code>x = numpy.array([a])</code> is a 1x4 matrix but i need the opossite.\nI need to multiply two matrix but the first one is a list inserted into a <code>numpy.array(a)</code></p>\n\n<p>have not found the doc for a way to do a for and cicle throught a to add it to x. \nEdit: I am working on linear regression so i need a nrows x 1 col, my original data is in a list and am using numpy dot() funtion to multiply and i need to transform my list int a matrix nrowsx 1 column.\nFixed the solution was to transpose x = numpy.array([a]) with x = x.transpose() and that gives me a nx1 matrix.</p>\n\n<p>Thanks for the help given you helped me think.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1528931260, "creation_date": 1528931260, "answer_id": 50847521, "question_id": 50847436, "link": "https://stackoverflow.com/questions/50847436/adding-new-column-to-dataframe-based-on-column-with-blank-rows/50847521#50847521", "title": "Adding new column to dataframe based on column with blank rows", "body": "<p>There will, no doubt, be a smart Pandas solution. But here's a solution using <code>itertools.groupby</code>. I assume that your blank rows consist of <code>NaN</code> items, and leverage the fact that <code>np.nan == np.nan</code> returns <code>False</code>.</p>\n\n<pre><code>from itertools import groupby, chain\n\n# group by items being NaN\ngrouper = groupby(df['date'], key=lambda x: x==x)\n\n# extract first item, multiply and chain\nchainer = chain.from_iterable([next(j)]*(len(list(j))+1) for _, j in grouper)\n\n# assign to new series\ndf['newDate'] = list(chainer)\n\nprint(df)\n\n         date   hour  Temp   newDate\n0         NaN    NaN   NaN       NaN\n1    6/1/2017   0:00  64.0  6/1/2017\n2    6/7/2017  22:00  63.0  6/1/2017\n3    6/7/2017  23:00  62.0  6/1/2017\n4         NaN    NaN   NaN       NaN\n5    6/2/2017   0:00  62.0  6/2/2017\n6    6/2/2017   1:00  60.0  6/2/2017\n7    6/8/2017  23:00  65.0  6/2/2017\n8         NaN    NaN   NaN       NaN\n9    6/6/2017   0:00  64.0  6/6/2017\n10   6/6/2017   1:00  64.0  6/6/2017\n11  6/12/2017  22:00  78.0  6/6/2017\n12  6/12/2017  23:00  76.0  6/6/2017\n</code></pre>\n"}], "owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 50847521, "answer_count": 1, "score": 1, "last_activity_date": 1528933509, "creation_date": 1528930605, "last_edit_date": 1528933509, "question_id": 50847436, "link": "https://stackoverflow.com/questions/50847436/adding-new-column-to-dataframe-based-on-column-with-blank-rows", "title": "Adding new column to dataframe based on column with blank rows", "body": "<p>I have a dataframe which looks as following with multiple blank rows:</p>\n\n<pre><code> date   hour     Temp\n\n6/1/2017    0:00    64\n6/7/2017    22:00   63\n6/7/2017    23:00   62\n\n6/2/2017    0:00    62\n6/2/2017    1:00    60\n6/8/2017    23:00   65\n\n6/6/2017    0:00    64\n6/6/2017    1:00    64\n6/12/2017   22:00   78\n6/12/2017   23:00   76\n</code></pre>\n\n<p>I want to create the following:</p>\n\n<pre><code> date   hour     Temp   newDate\n\n6/1/2017    0:00    64  6/1/2017\n6/7/2017    22:00   63  6/1/2017\n6/7/2017    23:00   62  6/1/2017\n\n6/2/2017    0:00    62  6/2/2017\n6/2/2017    1:00    60  6/2/2017\n6/8/2017    23:00   65  6/2/2017\n\n6/6/2017    0:00    64  6/6/2017\n6/6/2017    1:00    64  6/6/2017\n6/12/2017   22:00   78  6/6/2017\n6/12/2017   23:00   76  6/6/2017\n</code></pre>\n\n<p>Where a new column has been created with first date from <code>date</code> column right after the blank rows. </p>\n\n<p>I am trying to create for loop but is there a better way?</p>\n"}, {"tags": ["python", "numpy", "scikit-learn", "neural-network", "prediction"], "comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528935763, "post_id": 50847386, "comment_id": 88699286, "body": "this task probably fits well using a linear regression, what makes you do a neural network?"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528945355, "post_id": 50847386, "comment_id": 88701030, "body": "It seemed like a good opportunity to learn them. Also, I assumed this wouldnt be linear but it has been 2 years since my stats class, maybe I am misunderstanding it"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1528967073, "post_id": 50847386, "comment_id": 88709982, "body": "@ChrisM can you add the <code>python_excel_read.xlsx</code> data. then I could provide an answer how to increase the prediction performance."}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1528997600, "post_id": 50847386, "comment_id": 88728447, "body": "@seralouk I added more data to the question and uploaded my most recent code/results. Im not sure how to upload the file since SO doesnt have a file hosting service. I suppose I could use one and give the link if needed"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1528999426, "post_id": 50847386, "comment_id": 88729297, "body": "perfect. Your goal is to predict the output. Have you tried to use anything else expect MLPRegressor ?"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1529000382, "post_id": 50847386, "comment_id": 88729701, "body": "@seralouk I have tried excels forecast sheet, which did a decent job, but I can only figure out how to use that with a single predictor like date. I also (accidentally) tried MLPClassifier (I think thats what it was), which didnt work. Besides the MLPRegressor and Linear regression I havent tried anything else. Oh I also tried creating my own Neural net (see my other question)"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1529001543, "post_id": 50847386, "comment_id": 88730251, "body": "Have you tried to normalize/scale the data before the model fitting? If not, try MinMaxScaler or StandardScaler and check if the mse is decreased"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1529002294, "post_id": 50847386, "comment_id": 88730612, "body": "@seralouk just tried using MinMax, using <code>scaler = MinMaxScaler() X_train = scaler.fit_transform(X_train) X_test = scaler.transform(X_test)</code> but the mse didnt decrease much if at all (183770) and the fit seems about the same"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529081165, "post_id": 50866516, "comment_id": 88761528, "body": "I tried this out, and following your cheat sheet (very useful btw) I also tried rigidregression,ensembleregression, and lasso. All give MSE around -120k. Is MSE  a bad measure for what I am trying to do? What other models do you think I should attempt?"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529081260, "post_id": 50866516, "comment_id": 88761565, "body": "I would also calculate RMSE and if this is bad too for these models, then I would move to more complex models (neural nets, non-linear models, PCA as preprocessing). I will try to play with your data and let you know"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529100781, "post_id": 50866516, "comment_id": 88768636, "body": "Thank you. From my testing, Lasso gives me the (marginally) best results with an mse with abs value of 125k. I will try some of the others you suggested now"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529103789, "post_id": 50866516, "comment_id": 88769262, "body": "I should probably mention my ultimate goal is to predict within 10% of actual attendance. Whether or not this is possible/will happen I dont know, but as close as I can get will be great. I actually added another feature to my data and got something with a pretty good shape using MLPRegression from before, but the predictions are still off by too much"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529136559, "post_id": 50866516, "comment_id": 88773901, "body": "To achieve so high performance, I strongly believe that you need more features (and hopefully, informative features)."}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529294474, "post_id": 50866516, "comment_id": 88804819, "body": "Just to be clear, features are inputs that affect the output right? So in my case a feature is things like temperature, weather, etc? Also, would it be possible/easier/more accurate if I formed this as a classification problem where it just predicts weather attendence will be above or below certain amounts?"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529304412, "post_id": 50866516, "comment_id": 88807594, "body": "Hello. Yes, features are the parameters/variables like day, rain etc. If you turn the problem in classification it is possible to boost the performance. can you split attendance column based on a threshold ?"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529337888, "post_id": 50866516, "comment_id": 88827038, "body": "I should be able to, is it possible to split it into, say 3 categories? I will check it out and post my results"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529338133, "post_id": 50866516, "comment_id": 88827169, "body": "Yes of course. If it makes sense, you can split the column &quot;attendance&quot; into 2 or 3 groups let&#39;s say group 0,1 and 2 and then you can classify. I believe that the classification performance can be very high. Let me know if you want me to modify my answer and turn it into a classification problem"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529339176, "post_id": 50866516, "comment_id": 88827658, "body": "Would you be able to add it to your answer? I split the column up in 0-3 by &lt;500 being 0, 500-1000 being 1, 1000-1200 being 2 and 1200+ being 3. Im using mlpclassifier now, but I still have to look up how to tune it properly, so any help would be appreciated"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529395689, "post_id": 50866516, "comment_id": 88846213, "body": "Yes I am going to provide an updated answer within the day."}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529532139, "post_id": 50866516, "comment_id": 88912753, "body": "I believe you updated your code. In testing, Im getting 50% accuracy. It seems that it guesses mostly 2. there was a slight typo in your code, <code>y[np.logical_and(y &gt;= 500, y &lt;= 1000)] = 2 y[np.logical_and(y &gt;= 1000, y &lt;= 1200)] = 1</code> is what it should be, but using this actually gives me 28% accuracy. I am working on adding features now, I will update the question when i do... any thoughts so far? Thank you for all the help so far"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529588437, "post_id": 50866516, "comment_id": 88936317, "body": "Hello. I updated again my code. This time I normalized the data (see pipeline) but again the results are not good. I suggest adding more features. These features are not informative(enough) for higher classification accuracy."}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529597217, "post_id": 50866516, "comment_id": 88942399, "body": "do you think it would be better to add as many features as possible, or combine some of the new ones into one feature if they are related and similar? or does it depend?"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529599465, "post_id": 50866516, "comment_id": 88943615, "body": "I believe that adding new features could result in better results. Now, if you want to create combinations of the existing (or the new) features, you could use PCA. I can provide an example of this if needed. Also, I used leave-one-out cross validation in my last edit."}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529602357, "post_id": 50866516, "comment_id": 88945137, "body": "I am finishing up gathering/organizing the new features and will post them when I can to see what you think is the better option...Ive got about 15 more features"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529711902, "post_id": 50866516, "comment_id": 88987957, "body": "I have edited the original post with the most recent code (yours, mostly) and the updated data... over 200 features"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529750902, "post_id": 50866516, "comment_id": 88994666, "body": "Hello. I updated my answer showing 1) how to load the data much easier 2) how to apply PCA if you want to reduce the dimensions before the classification. Still the performance is not very good but think that you get 0.60 accuracy and the change level is 0.25 since you have 4 classes in <code>y</code>. To improve this, you need to play with different preprocessing functions and different classifiers. cheers"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529906461, "post_id": 50866516, "comment_id": 89026701, "body": "Do you mind explaining what you mean by 4 levels in y? And do you have any recommendations for preprocessing? Thanks for all your help thus far"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529914719, "post_id": 50866516, "comment_id": 89030470, "body": "You are trying to classify some data into 4 classes (y has 0,1,2,3 values representing the classes). Thus the chance level of the classification is 100/4 = 25. If you had only two classes (e.g. y 0 and 1) then the chance level would be 50%. For the preprocessing, I suggest trying <code>MinMaxScaler</code> and <code>StandardScaler</code>. The features that you have are very different from each other and I strongly recommend to preprocess them before any model is applied."}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1529942827, "post_id": 50866516, "comment_id": 89047734, "body": "Should I scale only the data that is numeric and not categorical? or just all data in one?"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1530088200, "post_id": 50866516, "comment_id": 89106315, "body": "The numerical in my opinion. Make sure that you fit the preprocessing function using the training data and then apply it on the testing data before the classification. This is done automatically in my code using <code>cross_val_score </code> and the <code>Pipeline</code>. See also my answer here: <a href=\"https://stackoverflow.com/a/50567308/5025009\">stackoverflow.com/a/50567308/5025009</a>"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1530115996, "post_id": 50866516, "comment_id": 89124378, "body": "Funny that you give that link, I actually referenced that exact post (and your answer to it) when I first tried using minmaxscaler! Do you mind explaining what pipeline does? Also, do you think it would be better to train on one year then test on another (days 1-365) to see that pattern? or can the model pick it out using cross val anyway? Also, are ML models able to pick up on a pattern like this: an ad goes out on tuesday which brings in people on the weekend. The way I have current data is that there is a 1 when the event happens, and im trying to take into account more data such as ads"}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1530116070, "post_id": 50866516, "comment_id": 89124418, "body": "Finally, what are some other good preprocessing steps? I am trying PCA in addition, and some of the new features I added have missing data (almost 1/3). Any recommendations on those?"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1530128697, "post_id": 50866516, "comment_id": 89130510, "body": "1) For missing data, you can replace the NaN with the mean or median of the variable or finally exclude them. 2) Pipeline is a pipeline that defines the order of the events. Then you feed the pipeline to the cross_val_score. Inside, the data are split based on the <code>cv</code> that you pass and the preprocessing is first estimated and applied on the training data and then applied to the testing data. More details (step by step) can be found in the link that I provided."}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1530128699, "post_id": 50866516, "comment_id": 89130514, "body": "3) I tried PCA when I played with your data and using only 1 Component we can explain 90% of the variance. However, the predictive ability is limited again. I sugged to play with some preprocessing steps and different classifiers but you data seem to be complex."}, {"owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "edited": false, "score": 0, "creation_date": 1530133745, "post_id": 50866516, "comment_id": 89132664, "body": "Does 1 component explaining 90% of the variance suggest many of the features are correlated? If so, would there be a benefit to combining these features BEFORE any preprocessing (aka manually)? would this combined with adding more features, hopefully uncorrelated, help reduce the complexity of this, or does PCA/other methods handle it anyway and thus manually removing any features is near useless? Thanks again for all of the help so far, what started as a somewhat simple task has turned into a complex challenge. Ive already learned so much, and the problem is not solved yet"}], "tags": [], "owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "is_accepted": false, "score": 1, "last_activity_date": 1529750786, "last_edit_date": 1529750786, "creation_date": 1529013532, "answer_id": 50866516, "question_id": 50847386, "link": "https://stackoverflow.com/questions/50847386/sklearn-nn-regression-attendance-prediction/50866516#50866516", "title": "Sklearn NN regression Attendance prediction", "body": "<p>Your question is really general, however I have some suggestions. You could use <code>cross-validation</code> and try different models. Personnaly, I would try <code>SVR</code>,<code>RandomForests</code> and as last choice I would use a <code>MLPR</code>.</p>\n\n<p>I modified a bit your code to show a simple example:</p>\n\n<pre><code>import numpy as np\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.metrics import classification_report,confusion_matrix\nimport matplotlib.pyplot as plt\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import KFold\nfrom sklearn.model_selection import cross_val_predict\nfrom sklearn import svm\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.model_selection import LeaveOneOut\nimport pandas as pd\nfrom sklearn.decomposition import PCA\n\n# read the data\ndf = pd.read_excel('python_excel_read.xlsx', header = None)\nrows, cols = df.shape\n\nX = df.iloc[: , 0:(cols - 1)]\ny = df.iloc[: , cols - 1 ]\nprint(X.shape)\nprint(y.shape)\n\ny[y &lt; 500] = 0\ny[np.logical_and(y &gt;= 500, y &lt;= 1000)] = 1\ny[np.logical_and(y &gt; 1000, y &lt;= 1200)] = 2\ny[y &gt; 1200] = 3\nprint(np.unique(y))\n\n# We can apply PCA to reduce the dimensions of the data\n# pca = PCA(n_components=2)\n# pca.fit(X)\n# X = pca.fit_transform(X)\n\n# Use cross-validation\n#kf = KFold(n_splits = 10, random_state=0)\nloo = LeaveOneOut()\n# Try different models\nclf = svm.SVC(kernel = 'linear')\nscaler = StandardScaler()\npipe = Pipeline([('scaler', scaler), ('svc', clf)])\n\naccuracy = cross_val_score(pipe, X, y.ravel(), cv = loo, scoring = \"accuracy\")\nprint(accuracy.mean())\n\n#y_pred = cross_val_predict(clf, X, y.ravel(), cv = kf)\n#cm = confusion_matrix(y, y_pred)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cMKQg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cMKQg.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 115, "user_id": 7102736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/566d45b77980ad05a55d29e277db5b90?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/7102736/chrism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529750786, "creation_date": 1528930276, "last_edit_date": 1529746319, "question_id": 50847386, "link": "https://stackoverflow.com/questions/50847386/sklearn-nn-regression-attendance-prediction", "title": "Sklearn NN regression Attendance prediction", "body": "<p>I asked a question about the same problem earlier, but because my approach has changed I now have different questions.</p>\n\n<p>My current code:</p>\n\n<pre><code>from sklearn import preprocessing\nfrom openpyxl import load_workbook\nimport numpy as np\nfrom numpy import exp, array, random, dot\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.neural_network import MLPRegressor\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.metrics import classification_report,confusion_matrix\nimport matplotlib.pyplot as plt\nfrom sklearn.linear_model import LinearRegression\n#Set sizes\nrowSize = 200\nnumColumns = 4\n\n# read  from excel file\nwb = load_workbook('python_excel_read.xlsx')\nsheet_1 = wb[\"Sheet1\"]\n\ndate = np.zeros(rowSize)\nday = np.zeros(rowSize)\nrain = np.zeros(rowSize)\ntemp = np.zeros(rowSize)\nout = np.zeros(rowSize)\n\nfor i in range(0, rowSize):\n    date[i] = sheet_1.cell(row=i + 1, column=1).value\n    day[i] = sheet_1.cell(row=i + 1, column=2).value\n    rain[i] = sheet_1.cell(row=i + 1, column=3).value\n    temp[i] = sheet_1.cell(row=i + 1, column=4).value\n    out[i] = sheet_1.cell(row=i + 1, column=5).value\n\ntrain = np.zeros(shape=(rowSize,numColumns))\nt_o = np.zeros(shape=(rowSize,1))\n\nfor i in range(0, rowSize):\n    train[i] = [date[i], day[i], rain[i], temp[i]]\n    t_o[i] = [out[i]]\n\n\nX = train\n# Output\ny = t_o\n\nX_train, X_test, y_train, y_test = train_test_split(X, y)\n\n####Neural Net\nnn = MLPRegressor(\n    hidden_layer_sizes=(3,),  activation='relu', solver='adam', alpha=0.001, batch_size='auto',\n    learning_rate='constant', learning_rate_init=0.01, power_t=0.5, max_iter=10000, shuffle=True,\n    random_state=9, tol=0.0001, verbose=False, warm_start=False, momentum=0.9, nesterovs_momentum=True,\n    early_stopping=False, validation_fraction=0.1, beta_1=0.9, beta_2=0.999, epsilon=1e-08)\nnn.fit(X_train, y_train.ravel())\n\n\ny_pred = nn.predict(X_test)\n\n###Linear Regression\n# lm = LinearRegression()\n# lm.fit(X_train,y_train)\n# y_pred = lm.predict(X_test)\n\nfig = plt.figure()\nax1 = fig.add_subplot(111)\nax1.scatter(X_test[:,0], y_pred, s=1, c='b', marker=\"s\", label='real')\nax1.scatter(X_test[:,0], y_test, s=10, c='r', marker=\"o\", label='NN Prediction')\nplt.show()\n\n#Calc MSE\nmse = np.square(y_test-y_pred).mean()\n\nprint(mse)\n</code></pre>\n\n<p>The results from this show a pretty bad prediction of the test data. Because I am new to this, I am not sure if it is my data, the model, or my coding. Based on the plot, I believe the model is wrong for the data (the model seems to predict something near linear or squared, while the actual data seems much more spread out)</p>\n\n<p>Here are some of the data points: \nformatted as Day of year(2 is jan 2nd), weekday(1)/weekend(0), rain(1)/no rain(0), Temp in F, attendance (this is output)</p>\n\n<pre><code>2   0   0   51  1366\n4   0   0   62  538\n5   1   0   71  317\n6   1   0   76  174\n7   1   0   78  176\n8   1   0   68  220\n12  1   1   64  256\n13  1   1   60  379\n14  1   0   64  316\n18  0   0   72  758\n19  1   0   72  1038\n20  1   0   72  405\n21  1   0   71  326\n24  0   0   74  867\n26  1   1   68  521\n27  1   0   71  381\n28  1   0   72  343\n29  1   1   68  266\n30  0   1   57  479\n31  0   1   57  717\n33  1   0   70  542\n34  1   0   73  220\n35  1   0   74  360\n36  1   0   79  444\n42  1   0   78  534\n45  0   0   80  1572\n52  0   0   76  1236\n55  1   1   64  689\n56  1   0   69  726\n59  0   0   67  1188\n60  0   0   74  1140\n61  1   1   63  979\n62  1   1   62  657\n63  1   0   67  687\n64  1   0   72  615\n67  0   0   80  1074\n68  1   0   81  1261\n71  1   0   83  1332\n73  0   0   85  1259\n74  0   0   86  1142\n76  1   0   88  1207\n77  1   1   78  1438\n82  1   0   85  1251\n83  1   0   83  1019\n85  1   0   86  1178\n86  0   0   92  1306\n87  0   0   92  1273\n89  1   0   93  1101\n90  1   0   92  1274\n93  0   0   83  1548\n94  0   0   86  1318\n96  1   0   83  1395\n97  1   0   81  1338\n98  1   0   75  1240\n100 0   0   84  1335\n102 0   0   83  931\n103 1   0   87  746\n104 1   0   91  746\n105 1   0   81  600\n106 1   0   72  852\n108 0   1   87  1204\n109 0   0   89  1191\n110 1   0   90  769\n111 1   0   88  642\n112 1   0   86  743\n114 0   1   75  1085\n115 0   1   78  1109\n117 1   0   84  871\n120 1   0   96  599\n123 0   0   93  651\n129 0   0   74  1325\n133 1   0   88  637\n134 1   0   84  470\n135 0   1   73  980\n136 0   0   72  1096\n137 0   0   83  792\n138 1   0   87  565\n139 1   0   84  501\n141 1   0   88  615\n142 0   0   79  722\n143 0   0   80  1363\n144 0   0   82  1506\n146 1   0   93  626\n147 1   0   94  415\n148 1   0   95  596\n149 0   0   100 532\n150 0   0   102 784\n154 1   0   99  514\n155 1   0   94  495\n156 0   1   87  689\n157 0   1   94  931\n158 0   0   97  618\n161 1   0   92  451\n162 1   0   97  574\n164 0   0   102 898\n165 0   0   104 746\n166 1   0   109 587\n167 1   0   109 465\n174 1   0   108 514\n175 1   0   109 572\n179 0   0   107 811\n181 1   0   104 423\n182 1   0   103 526\n184 0   1   97  849\n185 0   0   103 852\n189 1   0   106 728\n191 0   0   101 577\n194 1   0   105 511\n198 0   1   101 616\n199 0   1   97  1056\n200 0   0   94  740\n202 1   0   103 498\n205 0   0   101 610\n206 0   0   106 944\n207 0   0   105 769\n208 1   0   103 551\n209 1   0   103 624\n210 1   0   97  513\n212 0   1   107 561\n213 0   0   100 905\n214 0   0   105 767\n215 1   0   107 510\n216 1   0   108 406\n217 1   0   109 439\n218 1   0   103 427\n219 0   1   104 460\n224 1   0   105 213\n227 0   0   112 834\n228 0   0   109 615\n229 1   0   105 216\n230 1   0   104 213\n231 1   0   104 256\n232 1   0   104 282\n235 0   0   104 569\n238 1   0   103 165\n239 1   1   105 176\n241 0   1   108 727\n242 0   1   105 652\n243 1   1   103 231\n244 1   0   96  117\n245 1   1   98  168\n246 1   1   97  113\n247 0   0   95  227\n248 0   0   92  1050\n249 0   0   101 1274\n250 1   1   95  1148\n254 0   0   99  180\n255 0   0   104 557\n258 1   0   94  228\n260 1   0   95  133\n263 0   0   100 511\n264 1   1   89  249\n265 1   1   90  245\n267 1   0   101 390\n272 1   0   100 223\n273 1   0   103 194\n274 1   0   103 150\n275 0   0   95  224\n276 0   0   92  705\n277 0   1   92  504\n279 1   1   77  331\n281 1   0   89  268\n284 0   0   95  566\n285 1   0   94  579\n286 1   0   95  420\n288 1   0   93  392\n289 0   1   94  525\n290 0   1   86  670\n291 0   1   89  488\n294 1   1   74  295\n296 0   0   81  314\n299 1   0   88  211\n301 1   0   84  246\n303 0   1   76  433\n304 0   0   80  216\n307 1   1   80  275\n308 1   1   66  319\n312 0   0   80  413\n313 1   0   78  278\n316 1   0   74  305\n320 1   1   57  323\n324 0   0   76  220\n326 0   0   77  461\n327 1   0   78  510\n331 0   0   60  1701\n334 1   0   58  237\n335 1   0   62  355\n336 1   0   68  266\n338 0   0   70  246\n342 1   0   72  109\n343 1   0   70  103\n347 0   0   58  486\n349 1   0   52  144\n350 1   0   53  209\n351 1   0   55  289\n354 0   0   62  707\n355 1   0   59  903\n359 0   0   58  481\n360 0   0   53  1342\n364 1   0   57  1624\n</code></pre>\n\n<p>I have over a thousand data points in total, but Im not using them all for training/testing. One thought is I need more, another is that I need more factors because temp/rain/day of week does not affect attendance enough.</p>\n\n<p>Here is the plot:\n<a href=\"https://i.stack.imgur.com/LFdVY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LFdVY.png\" alt=\"Test Data\"></a></p>\n\n<p>What can I do to make my model more accurate and give better predictions?</p>\n\n<p>Thanks</p>\n\n<p>EDIT: I added more data points and another factor. I cant seem to upload the excel file so I put the data on here with a better explanation of how it is formatted</p>\n\n<p>EDIT:\nHere is the most recent code:</p>\n\n<pre><code>from sklearn import preprocessing\nfrom openpyxl import load_workbook\nimport numpy as np\nfrom numpy import exp, array, random, dot\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.neural_network import MLPRegressor\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.metrics import classification_report,confusion_matrix\nimport matplotlib.pyplot as plt\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import KFold\nfrom sklearn.model_selection import cross_val_predict\nfrom sklearn import svm\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.model_selection import LeaveOneOut\n#Set sizes\nrowSize = 500\nnumColumns = 254\n\n# read  from excel file\nwb = load_workbook('python_excel_read.xlsx')\nsheet_1 = wb[\"Sheet1\"]\n\ninput = np.zeros(shape=(rowSize,numColumns))\nout = np.zeros(rowSize)\nfor i in range(0, rowSize):\n    for j in range(0,numColumns):\n        input[i,j] = sheet_1.cell(row=i + 1, column=j+1).value\n    out[i] = sheet_1.cell(row=i + 1, column=numColumns+1).value\n\noutput = np.zeros(shape=(rowSize,1))\n\nfor i in range(0, rowSize):\n    output[i] = [out[i]]\n\n\nX = input\n# Output\ny = output\n\nprint(X)\nprint(y)\ny[y &lt; 500] = 0\ny[np.logical_and(y &gt;= 500, y &lt;= 1000)] = 1\ny[np.logical_and(y &gt; 1000, y &lt;= 1200)] = 2\ny[y &gt; 1200] = 3\n\n# Use cross-validation\n#kf = KFold(n_splits = 10, random_state=0)\nloo = LeaveOneOut()\n# Try different models\nclf = svm.SVC()\nscaler = StandardScaler()\npipe = Pipeline([('scaler', scaler), ('svc', clf)])\n\naccuracy = cross_val_score(pipe, X, y.ravel(), cv = loo, scoring = \"accuracy\")\nprint(accuracy.mean())\n\n#y_pred = cross_val_predict(clf, X, y.ravel(), cv = kf)\n#cm = confusion_matrix(y, y_pred)\n</code></pre>\n\n<p>and here is the up to date data with as many features as I could add. note this is a random sample from the full data:</p>\n\n<p><a href=\"https://drive.google.com/open?id=1b0PdY769bKAm7hQOIx8iou3qKKX45e_o\" rel=\"nofollow noreferrer\">Link to sample data</a></p>\n\n<p>Current output: \n0.6230954290296712</p>\n\n<p>My ultimate goal is to achieve 90% or higher accuracy... I dont believe I can find more features, but will continue to gather as many as possible if helpful</p>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 6, "creation_date": 1528932027, "post_id": 50847580, "comment_id": 88698580, "body": "For all columns, how about <code>df = df.astype(str)</code> ?"}, {"owner": {"reputation": 2884, "user_id": 6060083, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10153430563728202/picture?type=large", "display_name": "sudonym", "link": "https://stackoverflow.com/users/6060083/sudonym"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1528932100, "post_id": 50847580, "comment_id": 88698598, "body": "Yes, also works, absolutely - I just posted this solution to stick with the concept of lists"}, {"owner": {"reputation": 374, "user_id": 9938682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204840077717533/picture?type=large", "display_name": "Sayonti ", "link": "https://stackoverflow.com/users/9938682/sayonti"}, "edited": false, "score": 1, "creation_date": 1528934880, "post_id": 50847580, "comment_id": 88699144, "body": "Thanks sudonym... I was actually looking for something like a function that would take columns in a data frame and convert them to string. I should be able to change the column names as required though the first solution works perfectly and I did implement it."}, {"owner": {"reputation": 573, "user_id": 1511274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V8pnG.jpg?s=128&g=1", "display_name": "Long", "link": "https://stackoverflow.com/users/1511274/long"}, "edited": false, "score": 0, "creation_date": 1564713566, "post_id": 50847580, "comment_id": 101129472, "body": "Is there any performance difference between the two? I tried <code>df = df.astype(str)</code> shape (50000, 23000) and it crashed (in interactive mode). Thank you"}], "tags": [], "owner": {"reputation": 2884, "user_id": 6060083, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10153430563728202/picture?type=large", "display_name": "sudonym", "link": "https://stackoverflow.com/users/6060083/sudonym"}, "is_accepted": true, "score": 36, "last_activity_date": 1528932037, "last_edit_date": 1528932037, "creation_date": 1528931694, "answer_id": 50847580, "question_id": 50847374, "link": "https://stackoverflow.com/questions/50847374/convert-multiple-columns-to-string-in-pandas-dataframe/50847580#50847580", "title": "Convert multiple columns to string in pandas dataframe", "body": "<p>To convert <a href=\"https://stackoverflow.com/q/15891038/6060083\">multiple</a> columns to string, include a <em>list</em> of columns to your above-mentioned command:</p>\n\n<pre><code>df[['one', 'two', 'three']] = df[['one', 'two', 'three']].astype(str)\n# add as many column names as you like.\n</code></pre>\n\n<p>That means that <em>one</em> way to convert <a href=\"https://stackoverflow.com/q/19482970/6060083\">all</a> columns is to construct the list of columns like this:</p>\n\n<pre><code>all_columns = list(df) # Creates list of all column headers\ndf[all_columns] = df[all_columns].astype(str)\n</code></pre>\n\n<p>Note that the latter can also be done directly (see comments).</p>\n"}, {"tags": [], "owner": {"reputation": 1633, "user_id": 7396430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a891433e7a6c9f5bee8be21c8972a0?s=128&d=identicon&r=PG&f=1", "display_name": "Amir F", "link": "https://stackoverflow.com/users/7396430/amir-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1596489185, "last_edit_date": 1596489185, "creation_date": 1590567154, "answer_id": 62038408, "question_id": 50847374, "link": "https://stackoverflow.com/questions/50847374/convert-multiple-columns-to-string-in-pandas-dataframe/62038408#62038408", "title": "Convert multiple columns to string in pandas dataframe", "body": "<p>You can also use list comprehension:</p>\n<pre><code>df = [df[col_name].astype(str) for col_name in df.columns]\n</code></pre>\n<p>You can also insert a condition to test if the columns should be converted - for example:</p>\n<pre><code>df = [df[col_name].astype(str) for col_name in df.columns if 'to_str' in col_name]\n</code></pre>\n"}], "owner": {"reputation": 374, "user_id": 9938682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204840077717533/picture?type=large", "display_name": "Sayonti ", "link": "https://stackoverflow.com/users/9938682/sayonti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25474, "favorite_count": 3, "accepted_answer_id": 50847580, "answer_count": 2, "score": 13, "last_activity_date": 1596489185, "creation_date": 1528930151, "last_edit_date": 1528932004, "question_id": 50847374, "link": "https://stackoverflow.com/questions/50847374/convert-multiple-columns-to-string-in-pandas-dataframe", "title": "Convert multiple columns to string in pandas dataframe", "body": "<p>I have a pandas data frame with different data types. I want to convert more than one column in the data frame to string type. I have individually done for each column but want to know if there is an efficient way?</p>\n\n<p>So at present I am doing something like this:</p>\n\n<pre><code>repair['SCENARIO']=repair['SCENARIO'].astype(str)\n\nrepair['SERVICE_TYPE']= repair['SERVICE_TYPE'].astype(str)\n</code></pre>\n\n<p>I want a function that would help me pass multiple columns and convert them to strings.</p>\n"}, {"tags": ["python", "c", "python-3.x", "python-c-api"], "answers": [{"comments": [{"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1528932017, "post_id": 50847555, "comment_id": 88698576, "body": "You were correct, it builds the code, but the Interpreter still crashes.  I will edit my post to make it  a little more reproducible."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1528932064, "post_id": 50847555, "comment_id": 88698589, "body": "By &quot;<i>crashes</i>&quot; you mean <code>NameError</code>?"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1528932167, "post_id": 50847555, "comment_id": 88698616, "body": "No.   I mean the interpreter opens momentarily and closes (I added an <code>input()</code> so I know something is wrong).  If I run it from the IDLE <code>Shell</code> comes up.  There are no errors unfortunately."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1528932482, "post_id": 50847555, "comment_id": 88698672, "body": "And only when you access <code>DEFINED</code> ? Try other members (<code>restart</code>) as well. Anyway <code>PyModule_New</code>  and <code>PyModule_Create</code> doesn;t seem right to me. Try <code>return value;</code> (and initialize it <code>value = PyModule_Create(&amp;func);</code>)."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1528932668, "post_id": 50847555, "comment_id": 88698706, "body": "Yep exactly the same I&#39;m afraid,  it closes when I import the module."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1528932750, "post_id": 50847555, "comment_id": 88698723, "body": "I tried <code>return value;</code> I got <code>SystemError: initialization of Utilities did not return an extension module</code>"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 1, "creation_date": 1528932996, "post_id": 50847555, "comment_id": 88698788, "body": "That should be the way. Watch out for <b>U</b>tilities vs <b>u</b>tilities (including in your <i>setup.py</i>). All should match. Also <code>spammethods</code> should end in <code>{NULL, NULL, 0, NULL}</code>. But anyway I&#39;m confused, in the question there is some code that&#39;s working. Don&#39;t change it after posting the question (or if you do adapt the question accordingly)."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1528933297, "post_id": 50847555, "comment_id": 88698840, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/173105/discussion-between-simon-and-cristifati\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 2, "last_activity_date": 1534976249, "last_edit_date": 1534976249, "creation_date": 1528931517, "answer_id": 50847555, "question_id": 50847365, "link": "https://stackoverflow.com/questions/50847365/using-pymodule-addintconstant-in-an-extension/50847555#50847555", "title": "Using PyModule_AddIntConstant() in an extension", "body": "<p><code>PyModule_AddIntConstant(value, \"DEFINED\", DEFINED_VALUE);</code> is correct (assuming that <code>DEFINED_VALUE</code> is a (<em>C</em>) <code>long</code>).</p>\n\n<p>That, combined with the linker error at the end (and with the fact that you're writing code then testing, and so on ...) tells me that the linker is not able to write the new <em>.pyd</em> file (that contains the latest changes - including <code>DEFINED</code> variable), because it's in use by a previously started <em>python.exe</em> process that imported your module.</p>\n\n<ul>\n<li>Close <strong>every</strong> running interpreter that imported your module (to \"unlock\" <em>WinUtils.cp36-win32.pyd</em>)</li>\n<li>Build (this time, the linker will be able to overwrite the file)</li>\n<li>Test (run your <em>Python</em> code)</li>\n</ul>\n\n<p>Note: you could check the function return value (<a href=\"https://docs.python.org/3.5/c-api/module.html#c.PyModule_AddIntConstant\" rel=\"nofollow noreferrer\">[Python]: int <strong>PyModule_AddIntConstant</strong>(<em>PyObject *module, const char *name, long value</em>)</a>).</p>\n\n<p><strong><em>@EDIT0</em></strong> (regarding the 2<sup>nd</sup> problem):</p>\n\n<p>As I pecified in my one of my comments, use <code>PyModule_Create</code> (as according to <a href=\"https://docs.python.org/3/c-api/module.html#c.PyModule_New\" rel=\"nofollow noreferrer\">[Python]: PyObject* <strong>PyModule_New</strong>(<em>const char *name</em>)</a>, you're getting <em>Undefined Behavior</em>):</p>\n\n<pre><code>PyMODINIT_FUNC PyInit_utilities() {\n    PyObject *mod = PyModule_Create(&amp;func);\n    PyModule_AddIntConstant(mod, \"DEFINED\", AF_INET);\n    return mod;\n}\n</code></pre>\n"}], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 50847555, "answer_count": 1, "score": 0, "last_activity_date": 1534976249, "creation_date": 1528930080, "last_edit_date": 1528933723, "question_id": 50847365, "link": "https://stackoverflow.com/questions/50847365/using-pymodule-addintconstant-in-an-extension", "title": "Using PyModule_AddIntConstant() in an extension", "body": "<p>I have seen <a href=\"https://stackoverflow.com/questions/23788140/adding-symbolic-constants-with-hex-values-to-python-extension-module\">Adding symbolic constants with hex values to Python extension module</a> and I am trying to reproduce this effect:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;Windows.h&gt;\n\nstatic PyObject * sys_shutdown(PyObject *self, PyObject *args) {\n    int val;\n\n    if (!PyArg_ParseTuple(args, \"i\", &amp;val))\n        val = SHTDN_REASON_MINOR_OTHER; // Provide failsafe\n\n    ExitWindowsEx(EWX_POWEROFF, val); // Shutdown\n    return Py_BuildValue(\"\");\n}\n\nstatic PyObject * sys_restart(PyObject *self, PyObject *args) {\n    int val;\n\n    if (!PyArg_ParseTuple(args, \"i\", &amp;val))\n        val = SHTDN_REASON_MINOR_OTHER; // Provide failsafe\n    ExitWindowsEx(EWX_REBOOT, val); // Restart\n    return Py_BuildValue(\"\");\n}\n\nstatic PyObject * sys_log_out(PyObject *self, PyObject *args) {\n    int val;\n\n    if (!PyArg_ParseTuple(args, \"i\", &amp;val))\n        val = SHTDN_REASON_MINOR_OTHER; // Provide failsafe\n\n    ExitWindowsEx(EWX_LOGOFF, val); // Log out\n    return Py_BuildValue(\"\");\n}\n\nstatic PyMethodDef localMethods[] = {\n    {\"shutdown\", (PyCFunction)sys_shutdown, METH_VARARGS, \"...\"},\n    {\"restart\", (PyCFunction)sys_restart, METH_VARARGS, \"...\"},\n    {\"log_out\", (PyCFunction)sys_log_out, METH_VARARGS, \"...\"},\n    {NULL, NULL, 0, NULL}\n};\n\nstatic struct PyModuleDef func = {\n    PyModuleDef_HEAD_INIT,\n    \"utilities\",\n    \"...\",\n    -1,\n    localMethods,\n};\n\nPyMODINIT_FUNC PyInit_utilities(void) {\n    PyObject *value;\n\n    value = PyModule_New(&amp;func);\n\n    PyModule_AddIntConstant(value, \"DEFINED\", AF_INET);\n\n    return PyModule_Create(&amp;func);\n}\n</code></pre>\n\n<p>Setup Script:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\nmodule = Extension(\n    \"utilities\", \n    sources = [\"main.c\"],\n        libraries = [\"user32\"]\n)\n\nsetup (\n    name = \"Utilities\",\n    version = \"1.0\",\n    ext_modules = [module])\n</code></pre>\n\n<p>Everything builds as expected, however I cannot use <code>DEFINED</code> in my extension:</p>\n\n<pre><code>import utilities\nfor i in utilities.__dict__: print(i)\nutilities.DEFINED # AttributeError: module 'utilities' has no attribute 'DEFINED'\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>__name__\n__doc__\n__package__\n__loader__\n__spec__\nshutdown\nrestart\nlog_out\n__file__\n</code></pre>\n\n<p>I thought of returning <code>value</code> like so:</p>\n\n<pre><code>return PyModule_Create(&amp;value);\n</code></pre>\n\n<p>But that returns:</p>\n\n<blockquote>\n  <p>LINK : fatal error LNK1104: cannot open file 'build\\lib.win32-3.6\\WinUtils.cp36-win32.pyd'\n  error: command 'C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.14.26428\\bin\\HostX86\\x86\\link.exe' failed with exit status 1104</p>\n</blockquote>\n\n<p>How can I add the <code>DEFINED</code> value to my extension (so that I can run <code>utilities.DEFINED</code>)?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>As mentioned in the answer below closing everything and trying again builds the extension successfully, however using <code>return PyModule_Create(&amp;value);</code> still crashes.</p>\n"}, {"tags": ["python", "python-2.7", "cpython"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 2756376, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/hahbR.png?s=128&g=1", "display_name": "user2756376", "link": "https://stackoverflow.com/users/2756376/user2756376"}, "edited": false, "score": 0, "creation_date": 1528993311, "post_id": 50847579, "comment_id": 88726407, "body": "Thank you, abamert! It worked. I&#39;m aware of the overview you mentioned. There are many examples showing how to implement methods in C as that is what most people want. I failed to find any good examples showing how to add module attributes in C. I was looking at wrong chapters in reference. Now I know where to look. Hope this helps others like me in the future. Thank you!"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 107, "user_id": 2756376, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/hahbR.png?s=128&g=1", "display_name": "user2756376", "link": "https://stackoverflow.com/users/2756376/user2756376"}, "edited": false, "score": 0, "creation_date": 1528993829, "post_id": 50847579, "comment_id": 88726669, "body": "@user2756376 The way the extending and embedding docs are organized, you pretty much have to read through the whole thing once, at least to learn where everything is for later, even though half of it is irrelevant to you."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 107, "user_id": 2756376, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/hahbR.png?s=128&g=1", "display_name": "user2756376", "link": "https://stackoverflow.com/users/2756376/user2756376"}, "edited": false, "score": 0, "creation_date": 1528994084, "post_id": 50847579, "comment_id": 88726778, "body": "@user2756376 Meanwhile, unless you just love C, it&#39;s probably worth learning, and switching to, one of the higher-level wrappers for C++ (PyCxx or Boost), Rust (rust-python), D (PyD), etc. They&#39;re a lot easier to use, letting you declare stuff in the source language instead of a bunch of macro-filled structs, automating the ref counting, taking care of argument conversions, etc. You need to know the raw C API at least for debugging purposes, but once you&#39;ve learned it, you&#39;re usually better off not using it. Also, if you&#39;ve never used Cython, definitely give that a look."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 2, "last_activity_date": 1528931693, "creation_date": 1528931693, "answer_id": 50847579, "question_id": 50847363, "link": "https://stackoverflow.com/questions/50847363/extending-python-2-7-with-c-adding-a-pyobject-member-variables/50847579#50847579", "title": "Extending Python 2.7 with &quot;C&quot; - adding a PyObject member variables", "body": "<p>There's an overview, and examples, in the <a href=\"https://docs.python.org/2/extending/extending.html\" rel=\"nofollow noreferrer\">Extending Python with C or C++</a> chapter of the extending and embedding docs. Which you really need to read if you want to write extension modules by hand. Reference details are mostly in the <a href=\"https://docs.python.org/2/c-api/module.html#c.PyModule_AddStringConstant\" rel=\"nofollow noreferrer\">Module Objects</a> chapter of the C-API docs.</p>\n\n<p>While module objects are perfectly normal objects, and you can always access their dict with <code>PyModule_GetDict</code>, or just <code>PyObject_SetAttr</code> them, there are special functions to make this easier. The most common way to do it is to construct the object in the module init function, the same way you'd construct any Python object anywhere, then call <a href=\"https://docs.python.org/2/c-api/module.html#c.PyModule_AddObject\" rel=\"nofollow noreferrer\"><code>PyModule_AddObject</code></a>:</p>\n\n<blockquote>\n  <p>Add an object to <em>module</em> as <em>name</em>. This is a convenience function which can be used from the module\u2019s initialization function. This steals a reference to <em>value</em>. Return -1 on error, 0 on success.</p>\n</blockquote>\n\n<p>One major variation on this is storing the object in a <code>static</code> and over-refcounting it so it can never be deleted. See the <code>SpamError</code> example in the <code>Extending</code> chapter.</p>\n\n<p>But for your specific example, you're just trying to add a string constant, which is much easier, because there are even-specialer functions for adding native-typed constants:</p>\n\n<pre><code>PyMODINIT_FUNC\ninitspam(void) {\n    PyObject *mod = Py_InitModule(\"spam\", SpamMethods);\n    if (!mod) return;\n    if (PyModule_AddStringConstant(mod, \"mystring\", \"This is my string\") == -1) return;\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 2756376, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/hahbR.png?s=128&g=1", "display_name": "user2756376", "link": "https://stackoverflow.com/users/2756376/user2756376"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528931913, "creation_date": 1528930074, "last_edit_date": 1528931913, "question_id": 50847363, "link": "https://stackoverflow.com/questions/50847363/extending-python-2-7-with-c-adding-a-pyobject-member-variables", "title": "Extending Python 2.7 with &quot;C&quot; - adding a PyObject member variables", "body": "<p>I'm trying to extend Python 2.7.x with a \"C\" code.</p>\n\n<p>I know I can create a module using  </p>\n\n<pre><code>Py_InitModule(char *name, PyMethodDef *methods)\n</code></pre>\n\n<p>This works fine to add methods to a module.</p>\n\n<p>I want to add a string to the module I created using <code>Py_InitModule()</code>.\nHow can I add a member variable, such as <code>name = \"my_module\"</code>, or <code>idx=5</code>?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-decorators", "class-method"], "answers": [{"comments": [{"owner": {"reputation": 11682, "user_id": 794380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tLc9e.jpg?s=128&g=1", "display_name": "Idan Arye", "link": "https://stackoverflow.com/users/794380/idan-arye"}, "edited": false, "score": 0, "creation_date": 1528933498, "post_id": 50847714, "comment_id": 88698881, "body": "Thanks. I&#39;d prefer to be able to apply <code>@classmethod</code> last (it makes more sense), but I guess that&#39;ll have to do..."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528935027, "post_id": 50847714, "comment_id": 88699159, "body": "This does pass all of his tests, but it will fail on <code>Foo().qux</code>. In other words, a special classmethod doesn&#39;t act like a classmethod."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528961960, "post_id": 50847714, "comment_id": 88706768, "body": "@abarnert Not sure what you mean. <code>Foo().qux()</code> returns &quot;regular qux&quot; and <code>Foo().qux.special()</code> returns &quot;special qux&quot;. What doesn&#39;t work?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528962339, "post_id": 50847714, "comment_id": 88706980, "body": "@Aran-Fey Sorry, got it backward. It works for <code>Foo().qux</code>, but <a href=\"https://repl.it/repls/ScaryLavenderCone\" rel=\"nofollow noreferrer\">it doesn&#39;t work for <code>Foo.qux()</code></a>. See my answer for the explanation of why."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528962565, "post_id": 50847714, "comment_id": 88707121, "body": "@abarnert Yeah, it&#39;s because you didn&#39;t remove the <code>if instance is None: return self</code> in <code>__get__</code>. I guess I should try to clarify that part of the answer."}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 5, "last_activity_date": 1530285344, "last_edit_date": 1530285344, "creation_date": 1528932989, "answer_id": 50847714, "question_id": 50847358, "link": "https://stackoverflow.com/questions/50847358/classmethod-not-invoking-my-custom-descriptors-get/50847714#50847714", "title": "@classmethod not invoking my custom descriptor&#39;s __get__", "body": "<p><code>classmethod</code> is a descriptor that returns a bound method. It doesn't invoke your <code>__get__</code> method in this process because it can't do so without breaking some contracts of the descriptor protocol. (Namely, the fact that <code>instance</code> should be an instance, not a class.) So your <code>__get__</code> method not being called is completely expected.</p>\n\n<p>So how do you make it work? Well, think about it: You want both <code>some_instance.bar</code> and <code>SomeClass.bar</code> to return a <code>Special</code> instance. In order to achieve that, you simply apply the <code>@Special</code> decorator <em>last</em>:</p>\n\n<pre><code>class Foo:\n    @Special\n    @staticmethod\n    def baz():\n        return 'baz'\n\n    @Special\n    @classmethod\n    def qux(cls):\n        return 'qux'\n</code></pre>\n\n<p>This gives you full control over if/when/how the decorated function's descriptor protocol is invoked. Now you just need to remove the <code>if instance is None:</code> special case in your <code>__get__</code> method, because it prevents classmethods from working correctly. (The reason is that classmethod objects are not callable; you have to invoke the descriptor protocol to turn the classmethod object into a function that can be called.) In other words, the <code>Special.__get__</code> method has to unconditionally call the decorated function's <code>__get__</code> method, like this:</p>\n\n<pre><code>def __get__(self, instance=None, owner=None):\n    return Special(self.func.__get__(instance, owner))\n</code></pre>\n\n<p>And now all your assertions will pass.</p>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 3, "last_activity_date": 1528962536, "last_edit_date": 1528962536, "creation_date": 1528934964, "answer_id": 50847911, "question_id": 50847358, "link": "https://stackoverflow.com/questions/50847358/classmethod-not-invoking-my-custom-descriptors-get/50847911#50847911", "title": "@classmethod not invoking my custom descriptor&#39;s __get__", "body": "<p>The problem is that <code>classmethod.__get__</code> doesn't call the wrapped function's <code>__get__</code>\u2014because that's basically the whole point of <code>@classmethod</code>. You can look at the pure-Python equivalent to <code>classmethod</code> in <a href=\"https://docs.python.org/3/howto/descriptor.html#static-methods-and-class-methods\" rel=\"nofollow noreferrer\">the Descriptors HOWTO</a>, or the actual CPython C source in <a href=\"https://github.com/python/cpython/blob/master/Objects/funcobject.c#L686\" rel=\"nofollow noreferrer\"><code>funcobject.c</code></a>, for details, but you'll see that there's really no way around this.</p>\n\n<hr>\n\n<p>Of course if you just <code>@Special</code> a <code>@classmethod</code>, instead of the other way around, everything will work fine when called on an instance:</p>\n\n<pre><code>class Foo:\n    @Special\n    @classmethod\n    def spam(cls):\n        return 'spam'\n\nassert Foo().spam() == 'regular spam'\nassert Foo().spam.special() == 'special spam'\n</code></pre>\n\n<p>\u2026 but now it won't work when called on the class:</p>\n\n<pre><code>assert Foo.spam() == 'regular spam'\nassert Foo.spam.special() == 'special spam'\n</code></pre>\n\n<p>\u2026 because you're trying to call a <code>classmethod</code> object, which isn't callable.</p>\n\n<hr>\n\n<p>But this problem, unlike the previous one, is fixable. In fact, the only reason this fails is this part:</p>\n\n<pre><code>if instance is None:\n    return self\n</code></pre>\n\n<p>When you try to bind a <code>Special</code> instance to a class, it just returns <code>self</code> instead of binding its wrapped object. Which means it ends up as just a wrapper around a <code>classmethod</code> object rather than a wrapper around a bound class method, and of course you can't call a <code>classmethod</code> object.</p>\n\n<p>But if you just leave that out, it'll let the underlying <code>classmethod</code> bind the same way a normal function does, which does exactly the right thing, and now everything works:</p>\n\n<pre><code>class Special:\n    def __init__(self, func):\n        self.func = func\n\n    def __get__(self, instance, owner=None):\n        return Special(self.func.__get__(instance, owner))\n\n    def special(self, *args, **kwargs):\n        return 'special ' + self.func(*args, **kwargs)\n\n    def __call__(self, *args, **kwargs):\n        return 'regular ' + self.func(*args, **kwargs)\n\nclass Foo:\n    @Special\n    def bar(self):\n        return 'bar'\n\n    @Special\n    @staticmethod\n    def baz():\n        return 'baz'\n\n    @Special\n    @classmethod\n    def qux(cls):\n        return 'qux'\n\nassert Foo().bar() == 'regular bar'\nassert Foo().bar.special() == 'special bar'\n\nassert Foo.baz() == 'regular baz'\nassert Foo.baz.special() == 'special baz'\nassert Foo().baz() == 'regular baz'\nassert Foo().baz.special() == 'special baz'\n\nassert Foo.qux() == 'regular qux'\nassert Foo.qux.special() == 'special qux'\nassert Foo().qux() == 'regular qux'\nassert Foo().qux.special() == 'special qux'\n</code></pre>\n\n<hr>\n\n<p>Of course this will cause problems with wrapping unbound method objects in Python 2.7, but I think your design already breaks for normal methods in 2.7, and hopefully you only care about 3.x here anyway.</p>\n"}], "owner": {"reputation": 11682, "user_id": 794380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tLc9e.jpg?s=128&g=1", "display_name": "Idan Arye", "link": "https://stackoverflow.com/users/794380/idan-arye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 3, "accepted_answer_id": 50847714, "answer_count": 2, "score": 4, "last_activity_date": 1530285344, "creation_date": 1528930039, "question_id": 50847358, "link": "https://stackoverflow.com/questions/50847358/classmethod-not-invoking-my-custom-descriptors-get", "title": "@classmethod not invoking my custom descriptor&#39;s __get__", "body": "<p>I have a decorator called <code>Special</code> that turns a function into two versions of itself: one that can be called directly and prefixes the result with <code>'regular '</code> and one that can be called with <code>.special</code> and prefixes the results with <code>'special '</code>:</p>\n\n<pre><code>class Special:\n    def __init__(self, func):\n        self.func = func\n\n    def __get__(self, instance, owner=None):\n        if instance is None:\n            return self\n        return Special(self.func.__get__(instance, owner))\n\n    def special(self, *args, **kwargs):\n        return 'special ' + self.func(*args, **kwargs)\n\n    def __call__(self, *args, **kwargs):\n        return 'regular ' + self.func(*args, **kwargs)\n</code></pre>\n\n<p>It works fine with regular methods and static methods - but <code>.special</code> does not work with class methods:</p>\n\n<pre><code>class Foo:\n    @Special\n    def bar(self):\n        return 'bar'\n\n    @staticmethod\n    @Special\n    def baz():\n        return 'baz'\n\n    @classmethod\n    @Special\n    def qux(cls):\n        return 'qux'\n\nassert Foo().bar() == 'regular bar'\nassert Foo().bar.special() == 'special bar'\n\nassert Foo.baz() == 'regular baz'\nassert Foo.baz.special() == 'special baz'\n\nassert Foo.qux() == 'regular qux'\nassert Foo.qux.special() == 'special qux'  # TypeError: qux() missing 1 required positional argument: 'cls'\n</code></pre>\n\n<ul>\n<li><p><code>Foo().bar</code> is invoking <code>__get__</code>, which binds the underlying function and passes the bound method to a new instance of <code>Special</code> - which is why both <code>Foo().bar()</code> and <code>Foo().bar.special()</code> work.</p></li>\n<li><p><code>Foo.baz</code> is simply returning the original <code>Special</code> instance - where both the regular and the special calls are simple.</p></li>\n<li><p><code>Foo.qux</code> is binding without calling my <code>__get__</code>.</p>\n\n<ul>\n<li>The new bound object knows to pass the class as the first argument when being called directly - so <code>Foo.qux()</code> works.</li>\n<li><code>Foo.qux.special</code> is simply calling the <code>.special</code> of the underlying function (<code>classmethod</code> does not know how to bind it) - so <code>Foo.qux.special()</code> is invoking an unbound function, hence the <code>TypeError</code>.</li>\n</ul></li>\n</ul>\n\n<p>Is there any way for <code>Foo.qux.special</code> to know it's being called from a <code>classmethod</code>? Or some other way around this problem?</p>\n"}, {"tags": ["python", "excel", "flask", "flask-extensions"], "comments": [{"owner": {"reputation": 3200, "user_id": 849365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7lDM6.jpg?s=128&g=1", "display_name": "Prahlad Yeri", "link": "https://stackoverflow.com/users/849365/prahlad-yeri"}, "edited": false, "score": 1, "creation_date": 1528947643, "post_id": 50847339, "comment_id": 88701446, "body": "That git repo is very old, the last commit was about a year ago. I suggest you to use openpyxl instead which is more mainstream in the python world. It has <a href=\"https://openpyxl.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">extensive documentation</a> that includes what you are looking for."}], "owner": {"reputation": 165, "user_id": 5873366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-bzaCTO7KNJY/AAAAAAAAAAI/AAAAAAAAAD0/mAH7D5PkkeQ/photo.jpg?sz=128", "display_name": "Sebas Pinto", "link": "https://stackoverflow.com/users/5873366/sebas-pinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 830, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528929893, "creation_date": 1528929893, "question_id": 50847339, "link": "https://stackoverflow.com/questions/50847339/fill-excel-template-with-flask-excel", "title": "Fill Excel Template with Flask-Excel", "body": "<p>Im using <a href=\"https://pythonhosted.org/Flask-Excel/\" rel=\"nofollow noreferrer\">Flask-Excel</a> to generate some Excel Files (Reports) on my Flask Web Application. Is a useful library and easy to use to generate dynamically NEW excel files. But i couldn't find docs or examples to import an Excel File with  information inside already, and then fill it with Flask Excel.</p>\n\n<p>For example, let's say i have the company logo, the report title and the column names with a \"pretty\" format in an excel file, and they are in the first 3 rows. How can i do for read this template, and start to Fill Information from row 4.</p>\n\n<p>Thanks in advance for your help</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1528930356, "post_id": 50847329, "comment_id": 88698187, "body": "Can you show the expected output? Right now your text says you want to &quot;<i>patch</i>&quot; the values, but when looking at it, I somehow have the impression, you want ti fix the <i>keys</i>."}, {"owner": {"reputation": 1102, "user_id": 9363594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPexN.png?s=128&g=1", "display_name": "Lyxal", "link": "https://stackoverflow.com/users/9363594/lyxal"}, "edited": false, "score": 0, "creation_date": 1528941388, "post_id": 50847329, "comment_id": 88700308, "body": "Did any of the answers work for you? If so, then make sure you accept the one that worked the best by pressed the tick mark next to the question."}, {"owner": {"reputation": 335, "user_id": 7834130, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1599025640127368/picture?type=large", "display_name": "Raphael Hernandes", "link": "https://stackoverflow.com/users/7834130/raphael-hernandes"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528989885, "post_id": 50847329, "comment_id": 88724425, "body": "Just did it, @WillemVanOnsem. Thank you! And the answers actually came a lot faster than I thought hey would, so I haven&#39;t tested them yet. I&#39;m working on it right now."}], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 7834130, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1599025640127368/picture?type=large", "display_name": "Raphael Hernandes", "link": "https://stackoverflow.com/users/7834130/raphael-hernandes"}, "edited": false, "score": 0, "creation_date": 1528995199, "post_id": 50847424, "comment_id": 88727318, "body": "For future reference: I tried this one as well and it worked"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1528930556, "creation_date": 1528930556, "answer_id": 50847424, "question_id": 50847329, "link": "https://stackoverflow.com/questions/50847329/replacing-dictionary-keys-for-values-in-another-dictionary/50847424#50847424", "title": "Replacing dictionary keys for values in another dictionary", "body": "<p>We can fix every dictionary with a function:</p>\n\n<pre><code>fixer = {'value-2' : 'value_2', 'value&amp;_3' : 'value_3', 'value-3' : 'value_3'}\n\ndef fix_dictionary(dict_):\n    return { fixer.get(k, k): v for k, v in dict_.items() }\n</code></pre>\n\n<p>This will for a given <code>dict_</code> construct a new dictionary where keys that are in the <code>fixer</code> will be \"fixed\" (replaced by the corresponding value in the <code>fixer</code> dictionary).</p>\n\n<p>We can then generate a new list of fixed dictionaries with:</p>\n\n<pre><code>[fix_dictionary(dict_) for dict_ in listOfDicts]\n</code></pre>\n\n<p>Or we can eliminate the function, and use a <em>one</em> liner:</p>\n\n<pre><code>[{ fixer.get(k, k): v for k, v in dict_.items() } for dict_ in listOfDicts]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1102, "user_id": 9363594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPexN.png?s=128&g=1", "display_name": "Lyxal", "link": "https://stackoverflow.com/users/9363594/lyxal"}, "is_accepted": true, "score": 1, "last_activity_date": 1528930619, "creation_date": 1528930619, "answer_id": 50847441, "question_id": 50847329, "link": "https://stackoverflow.com/questions/50847329/replacing-dictionary-keys-for-values-in-another-dictionary/50847441#50847441", "title": "Replacing dictionary keys for values in another dictionary", "body": "<p>This should work for you:</p>\n\n<pre><code>listOfDicts = [{'value_1' : 'A', 'value-2' : 'B', 'value&amp;_3' : 'C'}, {'value-1' : 'D', 'value_2' : 'E', 'value-3' : 'F'}, {'value_1' : 'G', 'value_2' : 'H', 'value_3' : 'I'}]\nfixer = {'value-1' : 'value_1', 'value-2' : 'value_2', 'value&amp;_3' : 'value_3', 'value-3' : 'value_3'}\n\nfor i in range(len(listOfDicts)):\n\n    keys = list(listOfDicts[i].keys())\n    temp_dict = dict()\n\n    for item in keys:\n        if item in fixer:\n            temp_dict[fixer[item]] = listOfDicts[i][item]\n\n        else:\n            temp_dict[item] = listOfDicts[i][item]\n\n    listOfDicts[i] = temp_dict\nprint(listOfDicts)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[{'value_1': 'A', 'value_2': 'B', 'value_3': 'C'}, {'value_1': 'D', 'value_2': 'E', 'value_3': 'F'}, {'value_1': 'G', 'value_2': 'H', 'value_3': 'I'}]\n</code></pre>\n\n<p><hr></p>\n\n<h2>Explanation</h2>\n\n<p>What this program does is that it iterates through each item in the list and gets the keys in the dictionary in the current item. It then creates a temporary dictionary (<code>temp_dict</code>), which will later store the fixed values in it. Then, the program goes through and sees whether or not any keys need to be fixed, and if so, it fixes the keys based on the <code>fixer</code> dictionary. Finally, it replaces the item being iterated in <code>listOfDicts</code> with the fixed values.</p>\n"}, {"tags": [], "owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "is_accepted": false, "score": 1, "last_activity_date": 1528930621, "creation_date": 1528930621, "answer_id": 50847443, "question_id": 50847329, "link": "https://stackoverflow.com/questions/50847329/replacing-dictionary-keys-for-values-in-another-dictionary/50847443#50847443", "title": "Replacing dictionary keys for values in another dictionary", "body": "<p>If I've understood correctly you want something like this?</p>\n\n<pre><code>import json\nimport copy\n\n\nlistOfDicts = [\n    {\n        \"valu&amp;amp;_3\": \"C\",\n        \"value-2\": \"B\",\n        \"value_1\": \"A\"\n    },\n    {\n        \"value-1\": \"D\",\n        \"value-3\": \"F\",\n        \"value_2\": \"E\"\n    },\n    {\n        \"value_1\": \"G\",\n        \"value_2\": \"H\",\n        \"value_3\": \"I\"\n    }\n]\nfixer = {\n    \"valu&amp;amp;_3\": \"value_3\",\n    \"value-2\": \"value_2\",\n    \"value-3\": \"value_3\"\n}\n\nnewDict = copy.deepcopy(listOfDicts)\nfor oldDct in newDict:\n    for k2, v2 in fixer.items():\n        value = oldDct.pop(k2, None)\n        if value:\n            oldDct[v2] = value\n\nprint('listOfDicts'.center(80, '-'))\nprint(json.dumps(listOfDicts, indent=4))\nprint('newDict'.center(80, '-'))\nprint(json.dumps(newDict, indent=4))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>----------------------------------listOfDicts-----------------------------------\n[\n    {\n        \"valu&amp;amp;_3\": \"C\",\n        \"value-2\": \"B\",\n        \"value_1\": \"A\"\n    },\n    {\n        \"value-1\": \"D\",\n        \"value-3\": \"F\",\n        \"value_2\": \"E\"\n    },\n    {\n        \"value_1\": \"G\",\n        \"value_2\": \"H\",\n        \"value_3\": \"I\"\n    }\n]\n------------------------------------newDict-------------------------------------\n[\n    {\n        \"value_1\": \"A\",\n        \"value_3\": \"C\",\n        \"value_2\": \"B\"\n    },\n    {\n        \"value-1\": \"D\",\n        \"value_2\": \"E\",\n        \"value_3\": \"F\"\n    },\n    {\n        \"value_1\": \"G\",\n        \"value_2\": \"H\",\n        \"value_3\": \"I\"\n    }\n]\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 7834130, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1599025640127368/picture?type=large", "display_name": "Raphael Hernandes", "link": "https://stackoverflow.com/users/7834130/raphael-hernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3522, "favorite_count": 0, "accepted_answer_id": 50847441, "answer_count": 3, "score": 2, "last_activity_date": 1528989855, "creation_date": 1528929811, "last_edit_date": 1528989855, "question_id": 50847329, "link": "https://stackoverflow.com/questions/50847329/replacing-dictionary-keys-for-values-in-another-dictionary", "title": "Replacing dictionary keys for values in another dictionary", "body": "<p>I have a list of dictionaries with information I'd like to replace under the keys of each dictionary.</p>\n\n<p>So, I'm thinking of iterating through each dictionary and replacing the values.</p>\n\n<p>I have another dictionary with the values I'd like to replace as keys and the values which should be the final ones as values.</p>\n\n<p>It goes like this:</p>\n\n<pre><code>listOfDicts = [{'value_1' : 'A', 'value-2' : 'B', 'valu&amp;_3' : 'C'}, {'value-1' : 'D', 'value_2' : 'E', 'value-3' : 'F'}, {'value_1' : 'G', 'value_2' : 'H', 'value_3' : 'I'}]\n</code></pre>\n\n<p>Then I have another dictionary to use as basis for fixing this information:</p>\n\n<pre><code>fixer = {'value-2' : 'value_2', 'value&amp;_3' : 'value_3', 'value-3' : 'value_3', ...}\n</code></pre>\n\n<p>How could I make this replacement?</p>\n\n<p>-\nEdit:</p>\n\n<p>The desired output would be somethink like this:</p>\n\n<pre><code>listOfDicts = [{\n'value_1' : 'A',\n'value_2' : 'B',\n'value_3' : 'C'},\n{'value_1' : 'D',\n'value_2' : 'E',\n'value_3' : 'F'},\n...}\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2884, "user_id": 6060083, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10153430563728202/picture?type=large", "display_name": "sudonym", "link": "https://stackoverflow.com/users/6060083/sudonym"}, "edited": false, "score": 3, "creation_date": 1528930264, "post_id": 50847246, "comment_id": 88698162, "body": "Show us what you tried to solve this (CODE)"}, {"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1528930605, "post_id": 50847246, "comment_id": 88698250, "body": "Or you can show us the expected output."}, {"owner": {"reputation": 5, "user_id": 9937036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ce5a10bfd2a1dd4c5f99ed1b701a0c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaspo", "link": "https://stackoverflow.com/users/9937036/gaspo"}, "edited": false, "score": 0, "creation_date": 1528979176, "post_id": 50847246, "comment_id": 88717421, "body": "I have edited the original question with the expected output."}], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 9937036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ce5a10bfd2a1dd4c5f99ed1b701a0c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaspo", "link": "https://stackoverflow.com/users/9937036/gaspo"}, "is_accepted": true, "score": 0, "last_activity_date": 1529075982, "creation_date": 1529075982, "answer_id": 50878485, "question_id": 50847246, "link": "https://stackoverflow.com/questions/50847246/pandas-how-to-select-stocks-to-invest-in-based-on-past-performance-momentum-tr/50878485#50878485", "title": "Pandas how to select stocks to invest in based on past performance (momentum, trend following)", "body": "<p>I solved it using following code </p>\n\n<h1>ranking of the returns</h1>\n\n<p>my_df_returns_rank=my_df_returns.rank(axis=1,method='average', numeric_only=True, na_option='keep', ascending=False, pct=False)</p>\n\n<h1>Creating a mask to select only 2 best returns per period, shifting down one line, replacing NaN in first line by false</h1>\n\n<p>mask=(my_df_rank&lt;3).shift(1)\nmask=mask.replace(np.nan,False)</p>\n\n<h1>Applying the mask to the returns</h1>\n\n<p>my_df_2_best_returns=my_df_returns[mask]</p>\n\n<h1>averaging the returns :</h1>\n\n<p>my_df_average_return_selected= my_df_2_best_returns.mean(axis=1, skipna='true')</p>\n"}], "owner": {"reputation": 5, "user_id": 9937036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ce5a10bfd2a1dd4c5f99ed1b701a0c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaspo", "link": "https://stackoverflow.com/users/9937036/gaspo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 50878485, "answer_count": 1, "score": -3, "last_activity_date": 1529075982, "creation_date": 1528929354, "last_edit_date": 1528980226, "question_id": 50847246, "link": "https://stackoverflow.com/questions/50847246/pandas-how-to-select-stocks-to-invest-in-based-on-past-performance-momentum-tr", "title": "Pandas how to select stocks to invest in based on past performance (momentum, trend following)", "body": "<p>I have a dataframe of 20-day performances of a universe of 5 stocks that looks like this. Index is Dates, columns are stocks, elements are returns. </p>\n\n<pre><code>           ELET3        ELET6       EMBR3      ENBR3        EQTL3 (...)\nDates\n2/8/2018    0.277450    0.307260    0.064575    -0.025936   0.051672\n3/12/2018   0.149723    0.100899    0.017105    0.056956    0.044669\n4/10/2018   -0.235531   -0.180462   0.020565    0.026310    -0.006893\n5/9/2018    -0.019453   -0.057651   0.033495    -0.055192   -0.042110\n</code></pre>\n\n<p>From which I have built a dataframe of the ranking of each stock's performance over that period (same as above but with the ranks instead of the returns): </p>\n\n<pre><code>           ELET3    ELET6   EMBR3   ENBR3   EQTL3   (...)\nDates\n2/8/2018    2.0     1.0     3.0     5.0     4.0\n3/12/2018   1.0     2.0     5.0     3.0     4.0\n4/10/2018   5.0     4.0     2.0     1.0     3.0\n5/9/2018    2.0     5.0     1.0     4.0     3.0\n(...)\n</code></pre>\n\n<p>For each period(i), I want to calculate the average return for period(i) of the 2 stocks from the universe of 50 that had the best performance over the previous period (period(i-1)).</p>\n\n<p>Below is the out put I am looking for.\nThere are no returns for 2/8/2018 as it is the first period. For this first period ELET3 and ELET6 are the two best performing stocks so the strategy invests in them for the next period. Their return over the 2/8/2018 - 3/12/2018 period is 0.149723 and 0.100899 so the code should return the average of that (0.12531). They are also the 2 best performing stocks for that 2/8/2018 - 3/12/2018 period. So the strategy stays invested in them over the 3/12/2018 - 4/10/2018 period. For that period they return -0.20800. over that period the 2 best stocks were EMBR3 and ENBR3, so the strategy invests in them over the 4/10/2018 - 5/9/2018 and they return an average return of -0.01085.</p>\n\n<pre><code>           Strategy Return\nDates\n2/8/2018    \n3/12/2018   0.12531     \n4/10/2018   -0.20800        \n5/9/2018    -0.01085        \n</code></pre>\n"}, {"tags": ["python", "parsing", "formatting"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528929531, "post_id": 50847245, "comment_id": 88697940, "body": "Does the file contains spaces? Or new lines?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528929616, "post_id": 50847245, "comment_id": 88697965, "body": "Nevertheless, this code is not well suited for large files, since it loads the entire file into memory."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528929766, "post_id": 50847245, "comment_id": 88698018, "body": "Can you share (a part) of your sample file?"}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528930790, "post_id": 50847245, "comment_id": 88698303, "body": "I beg you to scrap the input() call from the example - there are so many ways you can structure your code without it"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "edited": false, "score": 0, "creation_date": 1528930060, "post_id": 50847356, "comment_id": 88698106, "body": "thank you! I ended up figuring out that white space, new lines, breaks and all that stuff was the issue and just replaced it all with &quot;&quot;."}], "tags": [], "owner": {"reputation": 491, "user_id": 1389840, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ebaae8c8dbd8d07f0ab56513da378d86?s=128&d=identicon&r=PG", "display_name": "user1389840", "link": "https://stackoverflow.com/users/1389840/user1389840"}, "is_accepted": true, "score": 0, "last_activity_date": 1528929982, "creation_date": 1528929982, "answer_id": 50847356, "question_id": 50847245, "link": "https://stackoverflow.com/questions/50847245/why-isnt-my-text-parsing-correctly/50847356#50847356", "title": "Why isn&#39;t my text parsing correctly?", "body": "<p>Your file may contain white space.</p>\n\n<pre><code>data = g.read()\ndata = data.replace(\" \", \"\").replace(\"\\n\", \"\")\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 50847356, "answer_count": 1, "score": 0, "last_activity_date": 1528930914, "creation_date": 1528929354, "question_id": 50847245, "link": "https://stackoverflow.com/questions/50847245/why-isnt-my-text-parsing-correctly", "title": "Why isn&#39;t my text parsing correctly?", "body": "<p>Follow up referring to this question I asked earlier: <a href=\"https://stackoverflow.com/questions/50845282/how-would-i-go-about-parsing-a-text-file-of-thousands-of-dna-bases\">How would I go about parsing a text file of thousands of DNA bases?</a></p>\n\n<p>Here's the simple code I wrote to handle the text files: </p>\n\n<pre><code>g = open('EGFRsequencencbidata.txt', 'r')\nf = open('data.txt', 'w+')\ndata = g.read()\noligo_size = int(input(\"oligo size: \"))\noverlap = int(input(\"overlap size: \"))\nfor pos in range(0, len(data), oligo_size - overlap):\n    f.write(data[pos:pos+oligo_size] + '\\n')\nf.close()\ng.close()\n</code></pre>\n\n<p>Based on what I got from \"nosklo\" (guy who answered my question) I was able to produce results that mirrored his up to a certain point. However, my code doesn't seem to produce the line by line results I want after about 22 or so lines like so. It starts truncating lines instead of them all being the same size.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4EnSs.png\" rel=\"nofollow noreferrer\">example of what i mean</a></p>\n\n<p>I want all of them to be for example 5 characters long (oligo_size parameter).</p>\n\n<p>Anyone know what might be going wrong?</p>\n"}, {"tags": ["python", "svm", "opencv3.0"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1528930448, "post_id": 50847152, "comment_id": 88698209, "body": "<a href=\"https://stackoverflow.com/a/41741109/5008845\">stackoverflow.com/a/41741109/5008845</a>"}, {"owner": {"reputation": 2790, "user_id": 1830793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E88mv.jpg?s=128&g=1", "display_name": "Zev", "link": "https://stackoverflow.com/users/1830793/zev"}, "edited": false, "score": 0, "creation_date": 1528947419, "post_id": 50847152, "comment_id": 88701394, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41732836/typeerror-src-data-type-17-is-not-supported\">TypeError: src data type = 17 is not supported</a>"}], "owner": {"reputation": 329, "user_id": 9938597, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uT2lyenNVvE/AAAAAAAAAAI/AAAAAAAAAAA/pNkfXUP-v5o/photo.jpg?sz=128", "display_name": "PoorProgrammer", "link": "https://stackoverflow.com/users/9938597/poorprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 465, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528928815, "creation_date": 1528928815, "question_id": 50847152, "link": "https://stackoverflow.com/questions/50847152/opencv-svm-typeerror-samples-data-type-17-is-not-supported", "title": "OpenCV SVM, TypeError: samples data type = 17 is not supported", "body": "<p>I am an intermediate programmer and I have recently working with Histograms of Oriented Gradient (HOG) and SVM on OpenCV. Unfortunately, I have been running across this Type Error no matter what I have done so far. I couldn't find an answer that could let me solve this problem.</p>\n\n<p>My code is written in python below:  </p>\n\n<pre><code>import cv2  \nimport numpy as np  \nimport glob  \n\nneg = glob.glob('...')  \npos = glob.glob('...')  \ntrainingImages = []  \ntrainingLabels = []  \n\nfor img in neg[0:30]:  \n    image = cv2.imread(img)  \n    trainingImages.append(image)  \n    trainingLabels.append(0)  \n\nfor img in pos[0:30]:  \n    image = cv2.imread(img)  \n    trainingImages.append(image)  \n    trainingLabels.append(1)  \n\nwinSize = (800,600)  \nblockSize = (200,150)  \nblockStride = (100,75)  \ncellSize = (100,75)  \nnbins = 9  \nderivAperture = 1  \nwinSigma = -1.  \nhistogramNormType = 0  \nL2HysThreshold = 0.2  \ngammaCorrection = 1  \nnlevels = 64  \nuseSignedGradients = False  \n\nhog = cv2.HOGDescriptor(winSize, blockSize, \n    blockStride, cellSize, nbins, \n    derivAperture, winSigma, histogramNormType\n    , L2HysThreshold, gammaCorrection, nlevels, \n    useSignedGradients)  \n\ntrainingData = []  \nfor img in trainingImages:  \n    descriptor = hog.compute(img)  \n    trainingData.append(descriptor)  \n\nsvm = cv2.ml.SVM_create()  \n\nsvm.setType(cv2.ml.SVM_C_SVC)  \nsvm.setKernel(cv2.ml.SVM_RBF)  \nsvm.setC(12.5)  \nsvm.setGamma(0.50625)  \n\nsvm.trainAuto(np.array(trainingData), cv2.ml.ROW_SAMPLE, np.array(trainingLabels))\n\nsvm.save(\"digits_svm_model.yml\")\n</code></pre>\n\n<p>I keep running into the problem at \nsvm.trainAuto(np.array(trainingData), cv2.ml.ROW_SAMPLE, np.array(trainingLabels))\nwhere I am consistently told that 'TypeError: samples data type = 17 is not supported'  </p>\n\n<p>Can someone please help? Thanks in advance.</p>\n"}, {"tags": ["python", "pandas", "merge"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1528930175, "post_id": 50847122, "comment_id": 88698144, "body": "Please post us a reproducible example here using seeded-random data."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": true, "score": 3, "last_activity_date": 1528929131, "last_edit_date": 1528929131, "creation_date": 1528928781, "answer_id": 50847147, "question_id": 50847122, "link": "https://stackoverflow.com/questions/50847122/how-to-merge-rows-of-a-large-pandas-dataframe-after-concatenation/50847147#50847147", "title": "How to merge rows of a large Pandas dataframe after concatenation?", "body": "<p>You could use <code>.any()</code> within a groupby:</p>\n\n<pre><code>&gt;&gt;&gt; df.groupby('Sample').any().astype(int).reset_index()\n\n   Sample  Col_A  Col_B  Col_C  Col_D\n0       1      1      1      0      1\n1       2      1      1      1      0\n</code></pre>\n\n<p>Side note--<code>any()</code> usually has an <code>axis</code> argument (as a method of a DataFrame itself, not groupby object), but as a groupby method it seems that it does not.  It looks like the default is <code>axis=0</code>, though.</p>\n"}], "owner": {"reputation": 421, "user_id": 4723266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7ff15b7caea532b9f9994a19e6933cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Stanley Gan", "link": "https://stackoverflow.com/users/4723266/stanley-gan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 50847147, "answer_count": 1, "score": 0, "last_activity_date": 1528930119, "creation_date": 1528928600, "last_edit_date": 1528930119, "question_id": 50847122, "link": "https://stackoverflow.com/questions/50847122/how-to-merge-rows-of-a-large-pandas-dataframe-after-concatenation", "title": "How to merge rows of a large Pandas dataframe after concatenation?", "body": "<p>I need to do a <code>pivot_table</code> operation on a very large dataframe. However, due to memory issues, I need to do it chunk by chunk, then <code>pd_concat(list_of_df, axis=0)</code>. Next, I fill the <code>NaN</code> values with 0. However, there are duplicated indices and I will need to perform a <code>groupby</code> operation. Before <code>groupby</code>, the dataframe is:</p>\n\n<pre><code>Sample    Col_A    Col_B    Col_C    Col_D\n  1         0        1        0        1\n  1         1        0        0        0\n  2         1        0        1        0\n  2         0        1        0        0\n</code></pre>\n\n<p>where <code>Sample</code> is the index. I would like to get this after <code>groupby</code> operation:</p>\n\n<pre><code>Sample    Col_A    Col_B    Col_C    Col_D\n  1         1        1        0        1\n  2         1        1        1        0\n</code></pre>\n\n<p>I did <code>groupby(df.index)</code> and tried using <code>first(), last(), sum()</code> etc. I can't seem to produce the correct dataframe as I have the original full pivoted dataframe for checking, where I check it using <code>df_chunk.equals(df_original)</code>.</p>\n"}, {"tags": ["python", "linux", "multithreading", "pipe"], "answers": [{"tags": [], "owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "is_accepted": true, "score": 1, "last_activity_date": 1528934752, "last_edit_date": 1528934752, "creation_date": 1528932804, "answer_id": 50847692, "question_id": 50847096, "link": "https://stackoverflow.com/questions/50847096/python-subprocess-pipe-block/50847692#50847692", "title": "Python subprocess pipe block", "body": "<p>The problem here is that all processes inherit all open file descriptors, and that there will only be an EOF on the read end of the pipe when the write end has been closed in <strong>all</strong> processes. Because the <code>cat</code> process itself keeps the write end open calling <code>os.close(w)</code> in your main process is not enough.</p>\n\n<p>For this case <a href=\"https://docs.python.org/2/library/subprocess.html#subprocess.Popen\" rel=\"nofollow noreferrer\"><code>Popen()</code></a> has the <code>close_fds</code> argument, which when set to <code>True</code> will cause all open file descriptors except those used for stdin, stderr and stout to be closed immediately after creating the subprocess. If you do that the your example should work as expected.</p>\n\n<p>On python2 <code>close_fds=False</code> is the default, in python3 this was changed to <code>close_fds=True</code>, and additionally since python3.4 file desciptors that should be inherited need to be <a href=\"https://docs.python.org/3/library/os.html#inheritance-of-file-descriptors\" rel=\"nofollow noreferrer\">marked as inheritable</a> explicitly using <code>os.set_inheritable()</code>. That reduces this kind of problem.</p>\n"}, {"tags": [], "owner": {"reputation": 597, "user_id": 7106043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad186da33c9c5db8a7af0e1b0bf31026?s=128&d=identicon&r=PG&f=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/7106043/jonah"}, "is_accepted": false, "score": 0, "last_activity_date": 1528933726, "creation_date": 1528933726, "answer_id": 50847791, "question_id": 50847096, "link": "https://stackoverflow.com/questions/50847096/python-subprocess-pipe-block/50847791#50847791", "title": "Python subprocess pipe block", "body": "<p>The reason your program never exits is that you're waiting on cat, except cat is waiting for an EOF that never comes.</p>\n\n<p>when you call <code>subprocess.Popen(['cat'], stdin=r).wait()</code>, it reads from the file descriptor and prints it to stdout because you didn't redirect stdout.\nThis is why you still see '123' on the screen.</p>\n\n<p>Consider either of these options instead:\nUse a queue:</p>\n\n<pre><code>import threading\nfrom Queue import Queue\nq= Queue()\n\ndef producer():\n    print '--producer started'\n    q.put('123')\n    print '--producer finished'\n\ndef consumer():\n    print '--receiver started'\n    print q.get()\n    print '--receiver finished'\n\nthreading.Thread(target=producer).start()\nthreading.Thread(target=consumer).start()\n</code></pre>\n\n<p>or use <code>os.pipe</code> but use <code>read</code> and <code>write</code> instead</p>\n\n<pre><code>import os, subprocess, threading\n(r, w) = os.pipe()\n\ndef producer():\n    print '--producer started'\n    os.write(w, '123')\n    print '--producer finished'\n    os.close(w)\n    print '--write pipe closed'\n\ndef consumer():\n    print '--receiver started'\n    print os.read(r, 3)\n    print '--receiver finished'\n    os.close(r)\n    print '--read pipe closed'\n\nthreading.Thread(target=producer).start()\nthreading.Thread(target=consumer).start()\n</code></pre>\n"}], "owner": {"reputation": 1332, "user_id": 3262785, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XqvLk.jpg?s=128&g=1", "display_name": "sqd", "link": "https://stackoverflow.com/users/3262785/sqd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 50847692, "answer_count": 2, "score": 1, "last_activity_date": 1528934752, "creation_date": 1528928406, "question_id": 50847096, "link": "https://stackoverflow.com/questions/50847096/python-subprocess-pipe-block", "title": "Python subprocess pipe block", "body": "<p>For some reasons, in this example <code>consumer</code> seems to be blocked (because it's waiting for EOF?). But the writing end of the pipe should have been closed.</p>\n\n<pre><code>import os, subprocess, threading\n(r, w) = os.pipe()\n\ndef producer():\n    print '--producer started'\n    subprocess.Popen(['echo', '123'], stdout=w).wait()\n    print '--producer finished'\n    os.close(w)\n    print '--write pipe closed'\n\ndef consumer():\n    print '--receiver started'\n    subprocess.Popen(['cat'], stdin=r).wait()\n    print '--receiver finished'\n    os.close(r)\n    print '--read pipe closed'\n\nthreading.Thread(target=producer).start()\nthreading.Thread(target=consumer).start()\n</code></pre>\n"}, {"tags": ["python", "json", "parent-child", "parent", "children"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1528928259, "post_id": 50847060, "comment_id": 88697606, "body": "You don&#39;t. Python dictionaries, etc. have no reverse relation. You thus need to store it in a stack while traversing."}], "answers": [{"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1528929164, "post_id": 50847127, "comment_id": 88697841, "body": "Is the infinite recursion possible on a <code>json.load</code> result?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1528929232, "post_id": 50847127, "comment_id": 88697859, "body": "@CristiFati: no, since the JSON stream itself is finite, and it creates a new object. I&#39;m only saying that once you constructed Python objects, the JSON context is gone: these are now <i>just</i> Python objects. We could have post-processed them creating infinite recursion, or simply passed an object we constructed to <code>traverse</code>. Furthermore if you create a custom deserializer, it is of course possible."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1528928625, "creation_date": 1528928625, "answer_id": 50847127, "question_id": 50847060, "link": "https://stackoverflow.com/questions/50847060/how-to-access-parent-of-nested-json-object/50847127#50847127", "title": "How to access parent of nested json object", "body": "<p>In Python the <em>vanilla</em> objects (well at least those used for JSON blobs like <code>list</code>, <code>dict</code>, etc.) have <em>no</em> relations to collections and objects that contain them.</p>\n\n<p>That makes sense since basically a list can contain the <em>same</em> object multiple times. Furthermore an object can be stored both in a dictionary and a set at the same time. Unless you perform some sort of <em>garbage collection</em> algorithm (which is performance-wise very inefficient, and will \"<em>scan</em>\" over all objects), there is thus no trivial way to reconstruct a list of objects that refer to a given object. Even if we would scan the objects, it is still far from trivial to decide what we will see as the \"<em>parent</em>\", since there can be multiple parents.</p>\n\n<p>In Python, a dictionary can even contain itself. Like:</p>\n\n<pre><code># example of constructing a datastructure containing itself\nsome_dict = {}\nsome_dict['a'] = some_dict\n</code></pre>\n\n<p>Now we endlessly recurse on <code>some_dict</code>, for example <code>some_dict['a']['a']['a'] is some_dict</code>.</p>\n\n<p>The point is that since your enumerate in a recursive way, you can maintain a <em>stack</em> that holds the ancestors. For example:</p>\n\n<pre><code>def traverse(node, path ='', stack=None):\n    <b>if stack is None:\n        stack = [node]\n    else:\n        stack.push(self)</b>\n    if isinstance(node, dict):\n        for key in node:\n            traverse(node[key], path+'/'+key, stack)\n    elif isinstance(node, list):\n        for elem in node:\n            traverse(elem,path+'/element', stack)\n    <b>stack.pop()</b></code></pre>\n\n<p>So each node pushes itself on the stack before we inspect the node, and at the end, it pops itself from the stack. We pass the stack recursively, so each recursive call can inspect the stack (not only the parent, but the entire trail up to the root).</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 2547777, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1552cfe6018ca3d119dbee1ab5461533?s=128&d=identicon&r=PG", "display_name": "michaelg9", "link": "https://stackoverflow.com/users/2547777/michaelg9"}, "edited": false, "score": 0, "creation_date": 1529069873, "post_id": 50847243, "comment_id": 88755305, "body": "The path is not unique since all the elements of a list share the tag. I really liked the generator traversal though, I&#39;ve moved it into my code! Thank you"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 75, "user_id": 2547777, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1552cfe6018ca3d119dbee1ab5461533?s=128&d=identicon&r=PG", "display_name": "michaelg9", "link": "https://stackoverflow.com/users/2547777/michaelg9"}, "edited": false, "score": 0, "creation_date": 1529083456, "post_id": 50847243, "comment_id": 88762555, "body": "@michaelg9 The usual way to solve the list problem is to include list indices in the path. There are different ways to do this (and I&#39;d take a look at jsonpath, djson, kvc, and the other standard whose name I forget to see if I can just borrow one of them\u2026), but the path to, say, <code>d[&#39;items&#39;][1][&#39;name&#39;]</code> can easily be <code>&#47;items&#47;1&#47;name</code> or <code>&#47;items[1]&#47;name</code> or anything else that makes sense to you. Alternatively, of course, you can just pass a tuple of nodes down instead of a path string, and generate the path from that tuple when you need that, while using <code>pathnodes[-1]</code> when you need a parent."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1528929339, "creation_date": 1528929339, "answer_id": 50847243, "question_id": 50847060, "link": "https://stackoverflow.com/questions/50847060/how-to-access-parent-of-nested-json-object/50847243#50847243", "title": "How to access parent of nested json object", "body": "<p>The only way to get back to the parent of a dict (or any recursive structure that doesn't have back-pointers) is to remember it as you traverse.</p>\n\n<p>But notice that you're already doing this: your <code>path</code> string is a path from the top to the current node.</p>\n\n<p>Let's write a function that uses the path:</p>\n\n<pre><code>def follow(head, path):\n    if not path:\n        return head\n    first, _, rest = path.partition('/')\n    return follow(head[first], rest)\n</code></pre>\n\n<p>Of course it would probably be nicer to build up <code>path</code> as a tuple of keys instead of a string, so we don't have to split them off (and so we don't have to worry about escaping or quoting if any of the keys might contain <code>/</code>, etc.); you can always <code>join</code> them at the end. </p>\n\n<p>And it might be even better to build up <code>path</code> as a tuple of nodes (or key-node pairs) instead of just the keys, so we can access the parent in constant time as just <code>path[-1]</code> instead of in logarithmic time as <code>follow(head, path)</code>. But it really depends on what you're actually trying to do; your real code presumably doesn't just traverse the tree, building up paths to each node, and then doing nothing with them.</p>\n\n<hr>\n\n<p>However, a really nice way to solve this would be to turn the traversal inside-out: make <code>traverse</code> an iterator:</p>\n\n<pre><code>def traverse(node, path =''):\n   if isinstance(node, dict):\n      for key in node:\n         yield from traverse(node[key], path+'/'+key)\n   elif isinstance(node, list):\n      for elem in node:\n         yield from traverse(elem,path+'/element')\n   yield (node, path)\n</code></pre>\n\n<p>Now we can just loop over <code>traverse</code> to do anything we want as a post-order depth-first traversal:</p>\n\n<pre><code>for node, path in traverse(root):\n    # do something\n</code></pre>\n\n<p>And now you can change it easily to yield <code>node, parent, path</code> (whether <code>parent</code> is the parent node, or the parent key, or whatever you wanted).</p>\n"}], "owner": {"reputation": 75, "user_id": 2547777, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1552cfe6018ca3d119dbee1ab5461533?s=128&d=identicon&r=PG", "display_name": "michaelg9", "link": "https://stackoverflow.com/users/2547777/michaelg9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2125, "favorite_count": 0, "accepted_answer_id": 50847127, "answer_count": 2, "score": 1, "last_activity_date": 1528929339, "creation_date": 1528928193, "question_id": 50847060, "link": "https://stackoverflow.com/questions/50847060/how-to-access-parent-of-nested-json-object", "title": "How to access parent of nested json object", "body": "<p>I have an arbitrary nested JSON object (parsed using json.load), consisting of dicts, lists, primitives etc. I traverse it depth first using recursion and tracking the path to the node in a linux fs format (for lists, I append /element to the path, so there can be multiple objects at a specific path), as following:</p>\n\n<pre><code>def traverse(node, path =''):\n   if isinstance(node, dict):\n      for key in node:\n         traverse(node[key], path+'/'+key)\n   elif isinstance(node, list):\n      for elem in node:\n         traverse(elem,path+'/element')\n</code></pre>\n\n<p>Each node may include a string which needs to be filled in using values of objects that can exist wherever in the tree, referenced in a relative path from the current node, eg: \"{../../key} {./child1/child2/key}\".<br>\n<strong>Problem</strong>: I can access the values of nodes that are children of the current node but I can't directly access the parent of the current node.<br>\n<strong>Solutions I thought:</strong> One solution I thought is to have a list of tuples (child,parent) and store the current node along with the child I'm about to recurse in, and then search that list in reverse when I need to go up. This is a bit dangerous because if the child is a primitive value then is will be equal to any other children of the same value and type and hence I may retrieve a wrong parent, but I think going through the list in reverse should take care of that right?<br>\nA different solution I thought is to have a dictionary with key being the child's path and value the parent node. I think this should work better because the only time paths clash is with list elements but they all have the same parent so it should be ok I think.  </p>\n\n<p>Are there any other suggestions? Or any comments on these two solutions?\nThank you</p>\n"}, {"tags": ["python", "json", "python-2.7", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1528932856, "post_id": 50847528, "comment_id": 88698743, "body": "dicts cant (pre 3.7) be guaranteed to maintain a specific order"}, {"owner": {"reputation": 41, "user_id": 9866486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a203c53087a2eac6bffb36d832f52e?s=128&d=identicon&r=PG&f=1", "display_name": "megs56", "link": "https://stackoverflow.com/users/9866486/megs56"}, "edited": false, "score": 0, "creation_date": 1528942944, "post_id": 50847528, "comment_id": 88700602, "body": "That give a <code>Syntax Error</code> probably because i&#39;m reading the data from a file and not as a string from a variable"}], "tags": [], "owner": {"reputation": 491, "user_id": 1389840, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ebaae8c8dbd8d07f0ab56513da378d86?s=128&d=identicon&r=PG", "display_name": "user1389840", "link": "https://stackoverflow.com/users/1389840/user1389840"}, "is_accepted": true, "score": 0, "last_activity_date": 1528931309, "creation_date": 1528931309, "answer_id": 50847528, "question_id": 50847058, "link": "https://stackoverflow.com/questions/50847058/extracting-n-json-objects-contained-in-a-single-line-from-a-text-file-in-python/50847528#50847528", "title": "Extracting N JSON objects contained in a single line from a text file in Python 2.7?", "body": "<p>If you are trying to split apart the highest level braces you could do something like </p>\n\n<pre><code>string = '{\"NextToken\": {\"value\": \"...'\nobjects = eval(\"[\" + string + \"]\")\n</code></pre>\n\n<p>and then parse each item in the list.</p>\n"}], "owner": {"reputation": 41, "user_id": 9866486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a203c53087a2eac6bffb36d832f52e?s=128&d=identicon&r=PG&f=1", "display_name": "megs56", "link": "https://stackoverflow.com/users/9866486/megs56"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 50847528, "answer_count": 1, "score": 1, "last_activity_date": 1528992250, "creation_date": 1528928185, "last_edit_date": 1528992250, "question_id": 50847058, "link": "https://stackoverflow.com/questions/50847058/extracting-n-json-objects-contained-in-a-single-line-from-a-text-file-in-python", "title": "Extracting N JSON objects contained in a single line from a text file in Python 2.7?", "body": "<p>I have a huge text file that contains several JSON objects inside of it that I want to parse into a csv file. Just because i'm dealing with someone else's data I cannot really change the format its being delivered in.</p>\n\n<p>Since I dont know how many objects JSON objects I just can create a couple set of dictionaries, wrap them in a list and then <code>json.loads()</code> the list.</p>\n\n<p>Also, since all the objects are in a single text line I can't a regex expression to separete each individual json object and then put them on a list.(It's a super complicated and sometimes triple nested json at some points.</p>\n\n<p>Here's, my current code</p>\n\n<pre><code>def json_to_csv(text_file_name,desired_csv_name):\n    #Cleans up a bit of the text file\n    file = fileinput.FileInput(text_file_name, inplace=True)\n    ile = fileinput.FileInput(text_file_name, inplace=True)\n    for line in file:\n        sys.stdout.write(line.replace(u'\\'', u'\"'))\n    for line in ile:\n        sys.stdout.write(re.sub(r'(\"[\\s\\w]*)\"([\\s\\w]*\")', r\"\\1\\2\", line))\n    #try to load the text file to content var\n    with open(text_file_name, \"rb\") as fin:\n        content = json.load(fin)\n        #Rest of the logic using the json data in content\n        #that uses it for the desired csv format\n</code></pre>\n\n<p>This code gives a <code>ValueError: Extra data: line 1 column 159816</code> because there is more than one object there.</p>\n\n<p>I seen similar questions in Google and StackOverflow. But none of those solutions none because of the fact that it's just one really long line  in a text file and I dont know how many objects there are in the file.</p>\n"}, {"tags": ["python", "apache-spark", "dataframe", "pyspark", "apache-spark-sql"], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 7323296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbt6x.png?s=128&g=1", "display_name": "Tibberzz", "link": "https://stackoverflow.com/users/7323296/tibberzz"}, "edited": false, "score": 1, "creation_date": 1528930806, "post_id": 50847366, "comment_id": 88698310, "body": "That&#39;s great, but it looks like it now duplicates the columns. I&#39;ve added the resulting dataframe to the post, is there a way to condense those as part of the join?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9938688"}, "is_accepted": false, "score": 2, "last_activity_date": 1528930083, "creation_date": 1528930083, "answer_id": 50847366, "question_id": 50847041, "link": "https://stackoverflow.com/questions/50847041/dataframe-join-null-safe-condition-use/50847366#50847366", "title": "Dataframe Join Null-Safe Condition Use", "body": "<p>This fails, because <code>col1</code> in <code>orderBy</code> is ambiguous. You should reference specific source, for example <code>dfA</code>:</p>\n\n<pre><code>dfA.join(dfB, cond, how='left').orderBy(dfA.col1).show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "is_accepted": true, "score": 4, "last_activity_date": 1528941978, "creation_date": 1528941978, "answer_id": 50848632, "question_id": 50847041, "link": "https://stackoverflow.com/questions/50847041/dataframe-join-null-safe-condition-use/50848632#50848632", "title": "Dataframe Join Null-Safe Condition Use", "body": "<p>A simple solution would be to <code>select</code> the columns that you want to keep. This will let you specify which source dataframe they should come from as well as avoid the duplicate column issue.</p>\n\n<pre><code>dfA.join(dfB, cond, how='left').select(dfA.col1, dfA.col2, dfB.col3).orderBy('col1').show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15502536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjlPEi6urD1bRj1zSp4GkXsLa3P2HTbbZG8bW2vJw=k-s128", "display_name": "Sid jain", "link": "https://stackoverflow.com/users/15502536/sid-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1616981135, "last_edit_date": 1616981135, "creation_date": 1616980021, "answer_id": 66847621, "question_id": 50847041, "link": "https://stackoverflow.com/questions/50847041/dataframe-join-null-safe-condition-use/66847621#66847621", "title": "Dataframe Join Null-Safe Condition Use", "body": "<p>If you have to join with null values with null  values in pyspark you should use eqnullsafe  in joining conditions, then will match null to null values , spark 2.5 version after is better to use eqnullsafe while joining if need more with examples <a href=\"https://knowledges.co.in/how-to-use-eqnullsafe-in-pyspark-for-null-values/\" rel=\"nofollow noreferrer\">https://knowledges.co.in/how-to-use-eqnullsafe-in-pyspark-for-null-values/</a></p>\n"}], "owner": {"reputation": 441, "user_id": 7323296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbt6x.png?s=128&g=1", "display_name": "Tibberzz", "link": "https://stackoverflow.com/users/7323296/tibberzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3150, "favorite_count": 0, "accepted_answer_id": 50848632, "answer_count": 3, "score": 5, "last_activity_date": 1616981135, "creation_date": 1528928063, "last_edit_date": 1528962656, "question_id": 50847041, "link": "https://stackoverflow.com/questions/50847041/dataframe-join-null-safe-condition-use", "title": "Dataframe Join Null-Safe Condition Use", "body": "<p>I have two dataframes with null values that I'm trying to join using PySpark 2.3.0:</p>\n\n\n\n<p>dfA:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># +----+----+\n# |col1|col2|\n# +----+----+\n# |   a|null|\n# |   b|   0|\n# |   c|   0|\n# +----+----+\n</code></pre>\n\n<p>dfB:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># +----+----+----+\n# |col1|col2|col3|\n# +----+----+----+\n# |   a|null|   x|\n# |   b|   0|   x|\n# +----+----+----+\n</code></pre>\n\n<p>The dataframes are creatable with this script:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dfA = spark.createDataFrame(\n    [\n        ('a', None),\n        ('b', '0'),\n        ('c', '0')\n    ],\n    ('col1', 'col2')\n)\n\ndfB = spark.createDataFrame(\n    [\n        ('a', None, 'x'),\n        ('b', '0', 'x')\n    ],\n    ('col1', 'col2', 'col3')\n)\n</code></pre>\n\n<p>Join call:\n</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dfA.join(dfB, dfB.columns[:2], how='left').orderBy('col1').show()\n</code></pre>\n\n<p>Result:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># +----+----+----+\n# |col1|col2|col3|\n# +----+----+----+\n# |   a|null|null|  &lt;- col3 should be x\n# |   b|   0|   x|\n# |   c|   0|null|\n# +----+----+----+\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># +----+----+----+\n# |col1|col2|col3|\n# +----+----+----+\n# |   a|null|   x|  &lt;-\n# |   b|   0|   x|\n# |   c|   0|null|\n# +----+----+----+\n</code></pre>\n\n<p>It works if I set the first row, col2 to anything other than null, but I need to support null values.</p>\n\n<p>I tried using a condition to compare using null-safe equals as outlined in this <a href=\"https://stackoverflow.com/a/41729359/2639647\">post</a> like so:\n</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cond = (dfA.col1.eqNullSafe(dfB.col1) &amp; dfA.col2.eqNullSafe(dfB.col2))\ndfA.join(dfB, cond, how='left').orderBy(dfA.col1).show()\n</code></pre>\n\n<p>Result of null-safe join:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># +----+----+----+----+----+\n# |col1|col2|col1|col2|col3|\n# +----+----+----+----+----+\n# |   a|null|   a|null|   x|\n# |   b|   0|   b|   0|   x|\n# |   c|   0|null|null|null|\n# +----+----+----+----+----+\n</code></pre>\n\n<p>This retains duplicate columns though, I'm still looking for a way to achieve the expected result at the end of a join.</p>\n"}, {"tags": ["python", "google-bigquery", "gcloud"], "answers": [{"tags": [], "owner": {"reputation": 988, "user_id": 5239549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d2d4d67c7a8b930a613a28113a9fa1?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Maloletkin", "link": "https://stackoverflow.com/users/5239549/alexey-maloletkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1528988612, "last_edit_date": 1528988612, "creation_date": 1528929121, "answer_id": 50847202, "question_id": 50847007, "link": "https://stackoverflow.com/questions/50847007/bigquery-extract-table-attributeerror-client-object-has-no-attribute-datase/50847202#50847202", "title": "bigquery, extract_table AttributeError: &#39;Client&#39; object has no attribute &#39;dataset&#39;", "body": "<p>You are using wrong client object. You try to use gcs client to work with bigquery.</p>\n\n<p>Instead of </p>\n\n<pre><code>dataset_ref = storage_client.dataset('my_dataset_name', project='my_project_id')\n</code></pre>\n\n<p>it should be:</p>\n\n<pre><code>bq_client = bigquery.Client.from_service_account_json(\n    'path/to/service_account.json')\ndataset_ref = bq_client.dataset('my_dataset_name', project='my_project_id')\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 9707310, "user_type": "registered", "profile_image": "https://graph.facebook.com/1769469383109270/picture?type=large", "display_name": "Mariane Reis", "link": "https://stackoverflow.com/users/9707310/mariane-reis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2179, "favorite_count": 0, "accepted_answer_id": 50847202, "answer_count": 1, "score": 1, "last_activity_date": 1528988612, "creation_date": 1528927857, "question_id": 50847007, "link": "https://stackoverflow.com/questions/50847007/bigquery-extract-table-attributeerror-client-object-has-no-attribute-datase", "title": "bigquery, extract_table AttributeError: &#39;Client&#39; object has no attribute &#39;dataset&#39;", "body": "<p>my question is about a code to extract a table extract a table from Bigquery and save it as a json file\n.\nI made my code mostly by following the gcloud tutorials on their documentation.</p>\n\n<p>I couldn't implicit set my credentials, so I did it in a explicit way, to my json file. But it seems that it doesn't quite get the \"Client\" object by the path I took.</p>\n\n<p>If anyone could clarify me how this whole implicit and explicit credential works, would help me a lot too!</p>\n\n<p>I am using python 2.7 and pycharm. The code is as follows:</p>\n\n<pre><code>from gcloud import bigquery\nfrom google.cloud import storage\ndef bigquery_get_rows ():\n\n    json_key = \"path/to/my/json_file.json\"\n    storage_client = storage.Client.from_service_account_json(json_key)\n    print(\"\\nPeguei o Cliente\\n\")\n\n    # Make an authenticated API request\n    buckets = list(storage_client.list_buckets())\n    print(buckets)\n    print(storage_client)\n\n    #Setando ambiente\n    bucket_name = 'my_bucket/name'\n    print(bucket_name)\n    destination_uri = 'gs://{}/{}'.format(bucket_name, 'my_table_json_name.json')\n    print(destination_uri)\n    #dataset_ref = client.dataset('samples', project='my_project_name')\n    dataset_ref = storage_client.dataset('my_dataset_name', project='my_project_id')\n    print(dataset_ref)\n    table_ref = dataset_ref.table('my_table_to_be_extracted_name')\n    print(table_ref)\n\n    job_config = bigquery.job.ExtractJobConfig()\n    job_config.destination_format = (\n        bigquery.DestinationFormat.NEWLINE_DELIMITED_JSON)\n\n    extract_job = client.extract_table(\n        table_ref, destination_uri, job_config=job_config)  # API request\n    extract_job.result()  # Waits for job to complete.\n\nbigquery_get_rows()\n</code></pre>\n"}, {"tags": ["python", "django", "csv"], "comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528931011, "post_id": 50847000, "comment_id": 88698357, "body": "is the code above your own? what have you tried?"}, {"owner": {"reputation": 1899, "user_id": 7678093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pmOoYwmTf74/AAAAAAAAAAI/AAAAAAAAAL8/Y_o2wrESTgc/photo.jpg?sz=128", "display_name": "Mohammad Ali", "link": "https://stackoverflow.com/users/7678093/mohammad-ali"}, "edited": false, "score": 0, "creation_date": 1528937944, "post_id": 50847000, "comment_id": 88699701, "body": "There is not any way for parsing csv file. You can read csv file and then set to your fields. you can use pandas For parsing csv file."}], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 8980224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b733078ada0f1754ebd949b395097f?s=128&d=identicon&r=PG&f=1", "display_name": "khaldi", "link": "https://stackoverflow.com/users/8980224/khaldi"}, "is_accepted": false, "score": 2, "last_activity_date": 1528963859, "last_edit_date": 1528963859, "creation_date": 1528963489, "answer_id": 50852540, "question_id": 50847000, "link": "https://stackoverflow.com/questions/50847000/how-can-i-add-a-csv-file-into-django-models/50852540#50852540", "title": "How can I add a csv file into Django models", "body": "<p>You can read the csv file through pandas and then convert it to your desired object ny using pandas funtion 'infer_objects()'. I hope the code below helps you in this regard,</p>\n\n<pre><code>import pandas as pd\nSimilarStore_df = pd.read_csv('./store.csv') #importing csv file as pandas DataFrame\nSimilarStore_df.columns = ['Domain', 'Score','Rank']\n\nSimilarStore=SimilarStore_df.infer_objects() #converting DataFrame to object\n\nprint(SimilarStore)\nprint(SimilarStore.columns)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>               Domain  Score    Rank\n0          roolee.com  100.0  125225\n1   piperandscoot.com   29.3  222166\n2    calledtosurf.com   23.8  361542\n3    cladandcloth.com   17.9  208670\n4  neeseesdresses.com    9.6  251016\nIndex(['Domain', 'Score', 'Rank'], dtype='object')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 530, "user_id": 7929028, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207794047781861/picture?type=large", "display_name": "Vishnu Kiran", "link": "https://stackoverflow.com/users/7929028/vishnu-kiran"}, "is_accepted": false, "score": 0, "last_activity_date": 1528963989, "creation_date": 1528963989, "answer_id": 50852676, "question_id": 50847000, "link": "https://stackoverflow.com/questions/50847000/how-can-i-add-a-csv-file-into-django-models/50852676#50852676", "title": "How can I add a csv file into Django models", "body": "<p>Just find the table name in your Database also find the corresponding column names with the table and use the to_sql command in pandas</p>\n"}], "owner": {"reputation": 1678, "user_id": 9393766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jae P.", "link": "https://stackoverflow.com/users/9393766/jae-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528963989, "creation_date": 1528927834, "question_id": 50847000, "link": "https://stackoverflow.com/questions/50847000/how-can-i-add-a-csv-file-into-django-models", "title": "How can I add a csv file into Django models", "body": "<p>I have a csv file which has contents like the following:</p>\n\n<p><strong>stores.csv</strong></p>\n\n<pre><code>Site, Score, Rank\nroolee.com,100,125225\npiperandscoot.com,29.3,222166\ncalledtosurf.com,23.8,361542\ncladandcloth.com,17.9,208670\nneeseesdresses.com,9.6,251016\n...\n</code></pre>\n\n<p>Here's my model.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class SimilarStore(models.Model):\n    store = models.ForeignKey(Store)\n    csv = FileField()\n\n    domain = models.CharField(max_length=100, blank=True)\n    score = models.IntegerField(blank=True)\n    rank = models.IntegerField(blank=True)\n</code></pre>\n\n<p>So, I wanna upload the <code>stores.csv</code> file into <code>csv</code> field so that each column data goes into each <code>domain</code>, <code>score</code>, and <code>rank</code>.</p>\n\n<p>I found out some resources making python file to parse data and run it through a command like `python parse.py'. However, I need it to be done by uploading the csv file in Django admin. Can anyone explain how I can do that?</p>\n"}, {"tags": ["python", "nltk", "wordnet"], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1528929676, "creation_date": 1528929676, "answer_id": 50847304, "question_id": 50846992, "link": "https://stackoverflow.com/questions/50846992/nltk-wordnet-does-not-contain-vocabulary-term-python/50847304#50847304", "title": "NLTK wordnet does not contain vocabulary term - Python", "body": "<p>You should not make an assumption that a word is known to WordNet. Check if there are any relevant synsets, and ask for a definition only if there is at least one:</p>\n\n<pre><code>for word in [\"ligase\", \"world\"]: # Your word list\n    ss = wn.synsets(word)\n    if ss:\n        definition = ss[0].definition() \n        print(\"{}: {}\".format(word, definition))\n    else:\n        print(\"### Word {} not found\".format(word))\n\n#### Word ligase not found\n#world: everything that exists anywhere\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9895689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3855b40efbcad63d2924c486531750f3?s=128&d=identicon&r=PG&f=1", "display_name": "Aitor Amatriain", "link": "https://stackoverflow.com/users/9895689/aitor-amatriain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 50847304, "answer_count": 1, "score": 0, "last_activity_date": 1528929723, "creation_date": 1528927775, "last_edit_date": 1528929723, "question_id": 50846992, "link": "https://stackoverflow.com/questions/50846992/nltk-wordnet-does-not-contain-vocabulary-term-python", "title": "NLTK wordnet does not contain vocabulary term - Python", "body": "<p>A function in my program finds the definitions of certain vocabulary words, which will be useful for other parts of my program. However, it seems that not every vocabulary word is present in wordnet. \nI find the definitions as follows:</p>\n\n<pre><code>y = wn.synset(w + '.n.01').definition()\n</code></pre>\n\n<p>where 'w' is one of the many vocabulary words being fed from a list (did not include rest of the program because it has too much irrelevant code). When the list reaches the term 'ligase', however, the following error comes up:</p>\n\n<blockquote>\n  <p>line 1298, in synset\n      raise WordNetError(message % (lemma, pos))\n      nltk.corpus.reader.wordnet.WordNetError: no lemma 'ligase' with part of speech 'n'</p>\n</blockquote>\n\n<p>Is there anyway to bypass this or a different way to find the definition of these terms not in wordnet? My program is going through various scientific terms, so this may occur more often as I add more words to the list. </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 7233902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717d870c4fc767a95815772695e03935?s=128&d=identicon&r=PG&f=1", "display_name": "Shezmula", "link": "https://stackoverflow.com/users/7233902/shezmula"}, "is_accepted": false, "score": 0, "last_activity_date": 1528928224, "creation_date": 1528928224, "answer_id": 50847066, "question_id": 50846909, "link": "https://stackoverflow.com/questions/50846909/how-can-i-record-audio-in-python/50847066#50847066", "title": "How can I record audio in Python?", "body": "<p>I would look into python-sounddevice.</p>\n\n<p><a href=\"https://python-sounddevice.readthedocs.io/en/0.3.11/\" rel=\"nofollow noreferrer\">https://python-sounddevice.readthedocs.io/en/0.3.11/</a></p>\n\n<p>It can record and play as well as convert your music into a numpy array if that every interested you. It is a python handler of the PortAudio which is cross-platform.</p>\n\n<p><a href=\"http://portaudio.com\" rel=\"nofollow noreferrer\">http://portaudio.com</a></p>\n"}], "owner": {"reputation": 11, "user_id": 7588555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/effa23920fc13aa257ab7baa07dca219?s=128&d=identicon&r=PG&f=1", "display_name": "John Berden", "link": "https://stackoverflow.com/users/7588555/john-berden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 762, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528928224, "creation_date": 1528927270, "question_id": 50846909, "link": "https://stackoverflow.com/questions/50846909/how-can-i-record-audio-in-python", "title": "How can I record audio in Python?", "body": "<p>I'm wondering if there are libraries in Python for audio recording.\nIdeally, I need to get a cross-platform solution, how can I record audio through Python.\nIdeally, in order that in this library I can either pause with the ability to listen to the recorded fragment and remove it from the audio recording, or record several audio files and after the program work, glue it into 1 audio file.\nIf someone knows such a decision, I will be happy to receive help.\nThanks in advance!</p>\n"}, {"tags": ["python", "python-3.x", "xlsxwriter"], "answers": [{"tags": [], "owner": {"reputation": 2914, "user_id": 7228446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67484fc6683a20547879a70563c2a971?s=128&d=identicon&r=PG&f=1", "display_name": "patrickjlong1", "link": "https://stackoverflow.com/users/7228446/patrickjlong1"}, "is_accepted": true, "score": 4, "last_activity_date": 1528928331, "creation_date": 1528928331, "answer_id": 50847082, "question_id": 50846745, "link": "https://stackoverflow.com/questions/50846745/how-to-add-multiple-formats-to-the-same-text-with-xlsxwriter/50847082#50847082", "title": "how to add multiple formats to the same text with XlsxWriter", "body": "<p>You'll have to set up another format that is both bold and italic. </p>\n\n<p>For example:</p>\n\n<pre><code>bold_and_italic = workbook.add_format({'bold': True, 'italic': True})\n</code></pre>\n\n<p>A fully Reproducible version:</p>\n\n<pre><code>import xlsxwriter\n\nworkbook = xlsxwriter.Workbook('rich_strings.xlsx')\nworksheet = workbook.add_worksheet()\nworksheet.set_column('A:A', 50)\n\nbold = workbook.add_format({'bold': True})\nitalic = workbook.add_format({'italic': True})\nred = workbook.add_format({'color': 'red'})\nbold_and_italic = workbook.add_format({'bold': True, 'italic': True})\n\n\nworksheet.write_rich_string('A1',\n                            'This is', bold, ' bold', \n                            ' and this is ', italic, ' italic',  \n                            ' and this is', bold_and_italic, ' bold and italic')\n\nworkbook.close()\n</code></pre>\n\n<p>with Expected Output:\n<a href=\"https://i.stack.imgur.com/qFYka.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qFYka.jpg\" alt=\"Expected Output\"></a></p>\n"}], "owner": {"reputation": 1979, "user_id": 5060792, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Fac5h.jpg?s=128&g=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/5060792/clay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "accepted_answer_id": 50847082, "answer_count": 1, "score": 1, "last_activity_date": 1528931764, "creation_date": 1528926371, "last_edit_date": 1528931764, "question_id": 50846745, "link": "https://stackoverflow.com/questions/50846745/how-to-add-multiple-formats-to-the-same-text-with-xlsxwriter", "title": "how to add multiple formats to the same text with XlsxWriter", "body": "<p>The following examples from the <a href=\"https://github.com/jmcnamara/XlsxWriter/blob/master/dev/docs/source/worksheet.rst#worksheetwrite_rich_string\" rel=\"nofollow noreferrer\">docs</a> work great:</p>\n\n<pre><code>import xlsxwriter\n\nworkbook = xlsxwriter.Workbook('rich_strings.xlsx')\nworksheet = workbook.add_worksheet()\n\nworksheet.set_column('A:A', 30)\n\n# Set up some formats to use.\nbold = workbook.add_format({'bold': True})\nitalic = workbook.add_format({'italic': True})\nred = workbook.add_format({'color': 'red'})\n\n# Write some strings with multiple formats.\nworksheet.write_rich_string('A1',\n                            'This is ',\n                            bold, 'bold',\n                            ' and this is ',\n                            italic, 'italic')\n</code></pre>\n\n<p>But how would I do something <strong><em>bold and italic</em></strong>?</p>\n\n<p>The following does not work.</p>\n\n<pre><code>worksheet.write_rich_string('A1',\n                            'This is ',\n                            bold, 'bold',\n                            ', this is ',\n                            italic, 'italic',                                \n                            ', and this is',\n                            bold and italic, ' bold and italic')\n</code></pre>\n"}, {"tags": ["python", "regex", "string", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 3, "creation_date": 1528926375, "post_id": 50846719, "comment_id": 88697020, "body": "I can&#39;t reproduce, your third example works for me.  Can you post a sample of your dataframe?"}, {"owner": {"reputation": 249, "user_id": 2238328, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/574abc0e5cc4ee2016915ac6942ea98a?s=128&d=identicon&r=PG", "display_name": "user2238328", "link": "https://stackoverflow.com/users/2238328/user2238328"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528926877, "post_id": 50846719, "comment_id": 88697195, "body": "let&#39;s say on title is &#39;&#226;\u20ac\u02dcBetterHash&#226;\u20ac\u2122: Bitcoin Core Dev. Proposes New Protocols to Decentralize Bitcoin Mining&#39;"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1528927047, "post_id": 50846719, "comment_id": 88697245, "body": "This looks more like an encoding error. Therefore you better solve this at the encoding level."}, {"owner": {"reputation": 249, "user_id": 2238328, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/574abc0e5cc4ee2016915ac6942ea98a?s=128&d=identicon&r=PG", "display_name": "user2238328", "link": "https://stackoverflow.com/users/2238328/user2238328"}, "edited": false, "score": 0, "creation_date": 1528927524, "post_id": 50846719, "comment_id": 88697400, "body": "I have tried various encodings such as utf-8 while importing the csv file using read_csv.  Nothing works :("}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528959725, "post_id": 50846719, "comment_id": 88705550, "body": "Try <code>.replace(&#39;\\xE2\\x82\\xAC&#39;, &#39;&#39;)</code>"}, {"owner": {"reputation": 249, "user_id": 2238328, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/574abc0e5cc4ee2016915ac6942ea98a?s=128&d=identicon&r=PG", "display_name": "user2238328", "link": "https://stackoverflow.com/users/2238328/user2238328"}, "edited": false, "score": 0, "creation_date": 1529086076, "post_id": 50846719, "comment_id": 88763619, "body": "Thanks for the comments, it turns out that this was only occurring when I sent the dataframe to csv, and was actually totally fine in python."}], "answers": [{"tags": [], "owner": {"reputation": 2884, "user_id": 6060083, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10153430563728202/picture?type=large", "display_name": "sudonym", "link": "https://stackoverflow.com/users/6060083/sudonym"}, "is_accepted": false, "score": 3, "last_activity_date": 1528986849, "last_edit_date": 1528986849, "creation_date": 1528930892, "answer_id": 50847468, "question_id": 50846719, "link": "https://stackoverflow.com/questions/50846719/cannot-replace-special-characters-in-a-python-pandas-dataframe/50847468#50847468", "title": "Cannot replace special characters in a Python pandas dataframe", "body": "<p>We can only assume that you refer to non-ASCI as 'special' characters. </p>\n\n<p>To remove <em>all</em> non-ASCI characters in a pandas dataframe column, do the following:</p>\n\n<pre><code>df['clean_titles'] = df['titles'].str.replace(r'[^\\x00-\\x7f]', '')\n</code></pre>\n\n<p>Note that this is a scalable solution as it works for <em>any</em> non-ASCI char. </p>\n"}], "owner": {"reputation": 249, "user_id": 2238328, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/574abc0e5cc4ee2016915ac6942ea98a?s=128&d=identicon&r=PG", "display_name": "user2238328", "link": "https://stackoverflow.com/users/2238328/user2238328"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2006, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1529440834, "creation_date": 1528926226, "last_edit_date": 1529440834, "question_id": 50846719, "link": "https://stackoverflow.com/questions/50846719/cannot-replace-special-characters-in-a-python-pandas-dataframe", "title": "Cannot replace special characters in a Python pandas dataframe", "body": "<p>I'm working with Python 3.5 in Windows.  I have a dataframe where a <code>'titles'</code> str type column contains titles of headlines, some of which have special characters such as <code>\u00e2</code>,<code>\u20ac</code>,<code>\u02dc</code>. </p>\n\n<p>I am trying to replace these with a space <code>''</code> using <code>pandas.replace</code>. I have tried various iterations and nothing works. I am able to replace regular characters, but these special characters just don't seem to work. </p>\n\n<p>The code runs without error, but the replacement simply does not occur, and instead the original title is returned.  Below is what I have tried already.  Any advice would be much appreciated.</p>\n\n<pre><code>df['clean_title'] = df['titles'].replace('\u20ac','',regex=True)\ndf['clean_titles'] = df['titles'].replace('\u20ac','')\ndf['clean_titles'] = df['titles'].str.replace('\u20ac','')\n\ndef clean_text(row):\n   return re.sub('\u20ac','',str(row))\n   return str(row).replace('\u20ac','')\ndf['clean_title'] = df['titles'].apply(clean_text)\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "owner": {"reputation": 23, "user_id": 5028809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540df9e0a748c5cf0c61dadfb38b6908?s=128&d=identicon&r=PG", "display_name": "quizzmaster", "link": "https://stackoverflow.com/users/5028809/quizzmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1528926115, "creation_date": 1528926115, "question_id": 50846694, "link": "https://stackoverflow.com/questions/50846694/text-with-multiple-colors-in-legend-with-matplotlib", "title": "text with multiple colors in legend with matplotlib", "body": "<p>Instesd of many entries within a legend I'd like to add one text line wich describes multiple lines. I'm looking to an automatic way to do this, instead of fiddeling around with the coordinates of the according text object.</p>\n\n<p>Right now I'm using a function which takes the coordinates at which the text should start, a list of strings and a list of colors. Then the function assembles the strings using the colors. Is there a way to get the coordinates of an empty legend string (I just plot nothing with an empty label for that)?</p>\n\n<p>I tried something like this:</p>\n\n<pre><code>import numpy as np\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\n\nx = np.linspace(0,6.19, 100)\ny = np.sin(x)\n\nax = plt.gca()\n\np1 = ax.plot(x,y, label=\"test\")\n\n# list of text objects\ntext = [mpl.text.Text(0,0,'$a=$'), mpl.text.Text(0,0,'$2$')]\n\n# HPacker of text objects\n# right way to get them into the legend?\nhp = mpl.offsetbox.HPacker(children=text)\n\nlgd = plt.legend([p1,??], ['legend1',??])\nplt.show()\n</code></pre>\n\n<p>Couldn't find out how to add the HPacker to the legend.\nIs the HPacker the right way to assemble (text-)objects horizontally for the usage as an item within a legend?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1528926151, "post_id": 50846673, "comment_id": 88696923, "body": "<code>if price is None</code>"}, {"owner": {"reputation": 564, "user_id": 1165946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fYEZj.png?s=128&g=1", "display_name": "rdowell", "link": "https://stackoverflow.com/users/1165946/rdowell"}, "edited": false, "score": 1, "creation_date": 1528926208, "post_id": 50846673, "comment_id": 88696949, "body": "Your error <code>&#39;NoneType&#39; object is not subscriptable&#39;</code> is not coming from your return statement, it&#39;s coming from the previous line: <code>price = cursor.execute(sql).fetchone()[0]</code> implying that the <code>fetchone()</code> function is returning <code>None</code> and then you&#39;re attempting to subscript it with <code>[0]</code>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1528926223, "post_id": 50846673, "comment_id": 88696959, "body": "The error message tells you that you can&#39;t use subscription on the <i>type</i> of the instance that you tried to access. So <code>None[...]</code> results in <code>&#39;NoneType&#39; is not subscriptable</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 1, "creation_date": 1528926255, "post_id": 50846703, "comment_id": 88696969, "body": "@user7496931 can you add the full traceback to your question?"}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": false, "score": 2, "last_activity_date": 1528927074, "last_edit_date": 1528927074, "creation_date": 1528926162, "answer_id": 50846703, "question_id": 50846673, "link": "https://stackoverflow.com/questions/50846673/return-something-else-if-type-is-none-or-nonetype/50846703#50846703", "title": "Return something else if type is None or NoneType", "body": "<p>You are trying to access index <code>0</code> of <code>price</code> before checking if it is <code>None</code>, thus trying to access <code>None[0]</code>.</p>\n\n<pre><code>price = cursor.execute(sql).fetchone()[0]\n#      this may very well be None ---^\n</code></pre>\n\n<p>You should fetch, check that <code>price</code> is not <code>None</code> and only then subscribe to it.</p>\n\n<pre><code>price = cursor.execute(sql).fetchone()\nreturn price[0] if price is not None else 100\n</code></pre>\n\n<p>As a sidenote, you shoud check that <code>price</code> is <code>None</code>, and not <code>NoneType</code> which is its type. To use <code>NoneType</code>, you would need to check <code>if isinstance(price, NoneType)</code>, but this not how objects are checked against <code>None</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1528928038, "post_id": 50846726, "comment_id": 88697557, "body": "You should also fix the explanation; besides, the problem turned out to be the line above."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": -1, "last_activity_date": 1528930856, "last_edit_date": 1528930856, "creation_date": 1528926250, "answer_id": 50846726, "question_id": 50846673, "link": "https://stackoverflow.com/questions/50846673/return-something-else-if-type-is-none-or-nonetype/50846726#50846726", "title": "Return something else if type is None or NoneType", "body": "<pre><code>return 100 if price is None else price\n</code></pre>\n\n<p>This simple <code>if</code> will check the value for <code>None</code> and return the desired result.  I originally did this with <code>if price</code>, but that doesn't work when the price is 0 -- 0 is also <code>falsey</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "edited": false, "score": 0, "creation_date": 1528926434, "post_id": 50846739, "comment_id": 88697035, "body": "THAT WAS IT. Thank you!! Would you suggest using the tuple? I&#39;m kind of new to Python not sure what&#39;s the best convention in this case."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1528926872, "post_id": 50846739, "comment_id": 88697192, "body": "@user7496931: pick whatever feels more comfortable to you. The <code>price, = ...</code> assignment will also throw a <code>TypeError</code> if there is more than one column in the result row, which would let you detect an error in your code sooner."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1528926899, "post_id": 50846739, "comment_id": 88697201, "body": "@user7496931: on the other hand, the <code>,</code> in that assignment is subtle and can cause confusion for developers inexperienced with Python&#39;s tuple assignments."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1528926912, "post_id": 50846739, "comment_id": 88697207, "body": "@user7496931: more important is the SQL parameter advice, to be honest."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 5, "last_activity_date": 1528927263, "last_edit_date": 1528927263, "creation_date": 1528926323, "answer_id": 50846739, "question_id": 50846673, "link": "https://stackoverflow.com/questions/50846673/return-something-else-if-type-is-none-or-nonetype/50846739#50846739", "title": "Return something else if type is None or NoneType", "body": "<p>You are subscribing on <code>None</code> <em>before</em> that test:</p>\n\n<pre><code>price = cursor.execute(sql).fetchone()[0]\n</code></pre>\n\n<p><code>.fetchone()</code> returned <code>None</code>, and it is <code>None[0]</code> that triggers the exception:</p>\n\n<pre><code>&gt;&gt;&gt; None[0]\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: 'NoneType' object is not subscriptable\n</code></pre>\n\n<p>The error message tells you that the type of <code>None</code>, which is <code>NoneType</code>, doesn't implement subscription support. If you look closely at the traceback Python prints out, you'll see it's the <code>price = cursor.execute(sql).fetchone()[0]</code> line where the exception is thrown and the code will never get to the <code>if price is ...</code> line that follows.</p>\n\n<p>Call <code>.fetchone()</code> without subscribing, then test for <code>None</code>:</p>\n\n<pre><code>with self.job.rap.connect() as conn:\n    with conn.cursor() as cursor:\n        cursor.execute(sql)\n        price_row = cursor.fetchone()\n        if price_row is None:\n            return 100\n        else:\n            return price_row[0]\n</code></pre>\n\n<p>Alternatively, you could use a tuple assignment <em>and</em> use exception handling to return a default instead:</p>\n\n<pre><code>with self.job.rap.connect() as conn:\n    with conn.cursor() as cursor:\n        cursor.execute(sql)\n        try:\n            price, = cursor.fetchone()\n            return price\n        except TypeError:\n            return 100\n</code></pre>\n\n<p>You should also <em>not use string formatting</em> to combine data with a query. Use SQL parameters:</p>\n\n<pre><code>sql = \"\"\"\nSELECT TimeSeriesValue\nFROM dbo.TimeSeriesPosition\nWHERE  \nTimeSeriesTypeID = %s AND\nFundID = %s AND\nSecurityMasterID = %s AND\nEffectiveDate = %s\"\"\"\n\nwith self.job.rap.connect() as conn:\n    with conn.cursor() as cursor:\n        cursor.execute(sql, (self.LAST_PRICE_ID, self.FUND_ID, date))\n        try:\n            price, = cursor.fetchone()\n            return price\n        except TypeError:\n            return 100\n</code></pre>\n\n<p>Each <code>%s</code> in the query is a placeholder, and the values for those placeholders are passed into the <code>cursor.execute()</code> call as the second parameter. The <em>database driver</em> then takes responsibility for properly quoting the values for each column, ensure that there the data can't be executed as a SQL command instead; note that there are no quotes around the <code>%s</code> placeholder for the <code>EffectiveDate</code> column. This lets you avoid a SQL injection attack and makes it possible for the database driver to re-use the query plan for the given query, which is more efficient for the database.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 50846739, "answer_count": 3, "score": -1, "last_activity_date": 1528930856, "creation_date": 1528926019, "last_edit_date": 1528926294, "question_id": 50846673, "link": "https://stackoverflow.com/questions/50846673/return-something-else-if-type-is-none-or-nonetype", "title": "Return something else if type is None or NoneType", "body": "<p>I have this method that retrieves a value from a SQL query:</p>\n\n<pre><code>def get_base_price(self, date):\n    sql = \"\"\"\n    SELECT TimeSeriesValue\n    FROM dbo.TimeSeriesPosition\n    WHERE  \n    TimeSeriesTypeID = {0} AND\n    FundID = {1} AND\n    SecurityMasterID = 45889 AND\n    EffectiveDate = '{2}'\"\"\".format(self.LAST_PRICE_ID, self.FUND_ID, date)\n\n    with self.job.rap.connect() as conn:\n        with conn.cursor() as cursor:\n            price = cursor.execute(sql).fetchone()[0] \n            if price is NoneType:\n               return 100\n            else:\n                return price # Returns base price value\n</code></pre>\n\n<p>I have a test, but i'm not able to return 100 if <code>price</code> is <code>None</code>. My running test just returns <code>NoneType</code> object is not subscriptable'</p>\n\n<p>I've also tried: <code>100 if price is None else price</code>, that didn't work. What am I missing?</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "plot", "axis-labels"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528931855, "post_id": 50846666, "comment_id": 88698534, "body": "What&#39;s unsuccessful in this case? How would you like your plot to look like instead?"}, {"owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528979276, "post_id": 50846666, "comment_id": 88717506, "body": "@ImportanceOfBeingErnest I am trying to make it so that I have like four ticks on the x axis and 4 on the y axis, or just in general being able to control the x and y axis ticks for each plot."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1528979508, "post_id": 50846666, "comment_id": 88717657, "body": "But in the code you show you do have 4 ticks on the axis of the last plot."}, {"owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528979801, "post_id": 50846666, "comment_id": 88717874, "body": "That&#39;s true, which is the part that is was confusing to me. The answer by SpghttCd gets me much closer."}], "answers": [{"tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 0, "last_activity_date": 1528967669, "last_edit_date": 1528967669, "creation_date": 1528936379, "answer_id": 50848065, "question_id": 50846666, "link": "https://stackoverflow.com/questions/50846666/x-and-y-ticks-on-a-4x4-multiplot-using-matplotlib-in-python/50848065#50848065", "title": "X and Y Ticks on a 4x4 multiplot using matplotlib in Python", "body": "<p>If I understand right that you'd like to have all x-axes comparable the same and so the y-axes, too, I'd recommend to try shared axes:  </p>\n\n<pre><code>fig, axes = plt.subplots(4, 4, sharex=True, sharey=True, figsize=(6,6))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "is_accepted": true, "score": 1, "last_activity_date": 1528995739, "last_edit_date": 1528995739, "creation_date": 1528993045, "answer_id": 50861903, "question_id": 50846666, "link": "https://stackoverflow.com/questions/50846666/x-and-y-ticks-on-a-4x4-multiplot-using-matplotlib-in-python/50861903#50861903", "title": "X and Y Ticks on a 4x4 multiplot using matplotlib in Python", "body": "<p>This is what I found that answered the problem I was having. </p>\n\n<pre><code>fig, axes = plt.subplots(nrows=math.ceil(len(ph_values)/4), ncols=4, figsize=(9,9))\n\naxes = axes.flatten()\nfor index,ph in enumerate(ph_values):\n    axes[index].scatter(np.asarray(all_xs[index]),np.asarray(all_ys[index]), s=1)\n    plt.sca(axes[index])  &lt;------------------  Fixed Problem \n    plt.xticks([0, 500, 1000, 1500, 2000]) &lt;-  Fixed Problem\n    plt.yticks([0, 1, 2, 3, 4, 5]) &lt;---------- Fixed Problem\n    plt.title('pH:' + str(ph)) \n    if (index % 4 == 0):\n        plt.ylabel('RMSD [$\\\\rm{\\\\AA}$]')\n    if (index &gt;= 12):\n        plt.xlabel('Steps')\n\n\nplt.tight_layout()\nplt.savefig(output)\nplt.show()\n</code></pre>\n\n<p>Here is an image of the result.</p>\n\n<p><img src=\"https://i.stack.imgur.com/bGzJf.png\" alt=\"Final Image\"></p>\n"}], "owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 50861903, "answer_count": 2, "score": 1, "last_activity_date": 1528995739, "creation_date": 1528925975, "last_edit_date": 1528979352, "question_id": 50846666, "link": "https://stackoverflow.com/questions/50846666/x-and-y-ticks-on-a-4x4-multiplot-using-matplotlib-in-python", "title": "X and Y Ticks on a 4x4 multiplot using matplotlib in Python", "body": "<p>I am using Python3.6.5 from an Anaconda install. </p>\n\n<p>I have 16 data files containing two columns of data. I am trying to make a plot that shows all the data in one 4x4 plot. I have managed to get all the plots plotted on a large 4x4 plot, but can't adjust the X and Y ticks. The X values range from 0 to 2000 and the Y values range from 0 to 4.5. </p>\n\n<p>This is my current script:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport math\n\nph_values = [1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5, 7.0, 7.5, 8.0, 8.5]\n\nall_xs = []\nall_ys = []\nfor ph in ph_values:\n    xs = []\n    ys = []\n    with open('rmsd_ph' + str(ph) + '.dat', \"r\") as f:\n        for line in f:\n            if line[0] != \"#\":\n               x,y = line.split()\n               xs.append(float(x))\n               ys.append(float(y))\n    all_xs.append(xs)\n    all_ys.append(ys)\n\nfig, axes = plt.subplots(nrows=math.ceil(len(ph_values)/4), ncols=4, figsize=(6,6))\n\naxes = axes.flatten()\nfor index,ph in enumerate(ph_values):\n    axes[index].plot(np.asarray(all_xs[index]),np.asarray(all_ys[index]))\n\nplt.xticks(np.arange(0, 2000, step=500))\nplt.tight_layout()\nplt.savefig('test.pdf')\nplt.show()\n</code></pre>\n\n<p>Currently the script outputs something that looks like this. </p>\n\n<p><img src=\"https://i.stack.imgur.com/yRSzY.png\" alt=\"enter image description here\"></p>\n\n<p>As you can see the last plot has the X-axis adjusted. I have not tried to adjust the Y-axis yet because I have not not been successful with the y axis. </p>\n\n<p>Overall, I would like 4 ticks on both the y and x axis. </p>\n"}, {"tags": ["python", "matplotlib", "plot", "hierarchical-clustering", "dendrogram"], "comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1529520084, "post_id": 50846621, "comment_id": 88907659, "body": "So I don&#39;t forget: <a href=\"https://github.com/dendrograms/astrodendro/blob/master/astrodendro/viewer.py\" rel=\"nofollow noreferrer\">github.com/dendrograms/astrodendro/blob/master/astrodendro/&hellip;</a> I&#39;ll check out the source code for this soon."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1529520158, "post_id": 50846621, "comment_id": 88907699, "body": "<a href=\"https://github.com/dendrograms/astrodendro/blob/master/astrodendro/dendrogram.py\" rel=\"nofollow noreferrer\">github.com/dendrograms/astrodendro/blob/master/astrodendro/&hellip;</a>"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1529612233, "post_id": 50846621, "comment_id": 88949643, "body": "<a href=\"https://github.com/scipy/scipy/blob/v0.14.0/scipy/cluster/hierarchy.py#L1894\" rel=\"nofollow noreferrer\">github.com/scipy/scipy/blob/v0.14.0/scipy/cluster/&hellip;</a> <i>note-to-self</i> reengineer this."}], "answers": [{"tags": [], "owner": {"reputation": 12855, "user_id": 754456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496c29be59a54e53f43c79d5f9b9b380?s=128&d=identicon&r=PG", "display_name": "mfitzp", "link": "https://stackoverflow.com/users/754456/mfitzp"}, "is_accepted": false, "score": 1, "last_activity_date": 1537489825, "creation_date": 1537489825, "answer_id": 52435026, "question_id": 50846621, "link": "https://stackoverflow.com/questions/50846621/how-to-adjust-branch-lengths-of-dendrogram-in-matplotlib-like-in-astrodendro/52435026#52435026", "title": "How to adjust branch lengths of dendrogram in matplotlib (like in astrodendro)? [Python]", "body": "<p>I'm not sure this really constitutes a practical answer, but it does allow you to generate dendrograms with truncated hanging lines. The trick is to generate the plot as normal, then manipulate the resulting matplotlib plot to recreate the lines.</p>\n\n<p>I couldn't get your example to work locally, so I've just created a dummy dataset.</p>\n\n<pre><code>from matplotlib import pyplot as plt\nfrom scipy.cluster.hierarchy import dendrogram, linkage\nimport numpy as np\n\na = np.random.multivariate_normal([0, 10], [[3, 1], [1, 4]], size=[5,])\nb = np.random.multivariate_normal([0, 10], [[3, 1], [1, 4]], size=[5,])\nX = np.concatenate((a, b),)\n\nZ = linkage(X, 'ward')\n\nfig = plt.figure()\nax = fig.add_subplot(1,1,1)\n\ndendrogram(Z, ax=ax)\n</code></pre>\n\n<p>The resulting plot is the usual long-arm dendrogram.</p>\n\n<p><a href=\"https://i.stack.imgur.com/uokPm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uokPm.png\" alt=\"Standard dendrogram image, generated from random data\"></a></p>\n\n<p>Now for the more interesting bit. A dendrogram is made up of a number of <code>LineCollection</code> objects (one for each colour). To update the lines we iterate through these, extracting the details about their constituent paths, modifying these to remove any lines reaching to a <code>y</code> of zero, and then recreating a <code>LineCollection</code> for these modified paths.</p>\n\n<p>The updated path is then added to the axes, and the original is removed.</p>\n\n<p>The one tricky part is determining what height to draw to instead of zero. Since we are iterating over each dendrograms path, we don't know which point came before \u2014\u00a0we basically have no idea where we are. However, we can exploit the fact that hanging lines hang vertically. Assuming there are no lines on the same <code>x</code>,\u00a0we can look for the known other <code>y</code> values for a given <code>x</code> and use that as the basis for our new <code>y</code> when calculating. The downside is that in order to make sure we have this number, we have to pre-scan the data.</p>\n\n<p>Note: If you <em>can</em> get dendrogram hanging lines on the same <code>x</code>, you would need to include the <code>y</code> and search for <em>nearest y above this x</em> to do this.</p>\n\n<pre><code>import numpy as np\nfrom matplotlib.path import Path\nfrom matplotlib.collections import LineCollection\n\nfig = plt.figure()\nax = fig.add_subplot(1,1,1)\n\ndendrogram(Z, ax=ax);\n\nfor c in ax.collections[:]: #\u00a0use [:] to get a copy, since we're adding to the same list\n    paths = []\n    for path in c.get_paths():\n        segments = []\n        y_at_x = {}\n        # Pre-pass over all elements, to find the lowest y value at each x value.\n        # we can use this to caculate where to cut our lines.\n        for n, seg in enumerate(path.iter_segments()):\n            x, y = seg[0]\n            #\u00a0Don't store if the y is zero, or if it's higher than the current low.\n            if y &gt; 0 and y &lt; y_at_x.get(x, np.inf):\n                y_at_x[x] = y\n\n        for n, seg in enumerate(path.iter_segments()):\n            x, y = seg[0]\n\n            if y == 0:\n                # If we know the last y at this x, use it - 0.5, limit &gt; 0\n                y = max(0, y_at_x.get(x, 0) - 0.5)\n\n            segments.append([x,y])\n\n        paths.append(segments)\n\n    lc = LineCollection(paths, colors=c.get_colors())  #\u00a0Recreate a LineCollection with the same params\n    ax.add_collection(lc)\n    ax.collections.remove(c) #\u00a0Remove the original LineCollection\n</code></pre>\n\n<p>The resulting dendrogram looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gHZN3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gHZN3.png\" alt=\"Dendrogram danglies\"></a></p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1227, "favorite_count": 0, "answer_count": 1, "score": 20, "last_activity_date": 1537489825, "creation_date": 1528925737, "question_id": 50846621, "link": "https://stackoverflow.com/questions/50846621/how-to-adjust-branch-lengths-of-dendrogram-in-matplotlib-like-in-astrodendro", "title": "How to adjust branch lengths of dendrogram in matplotlib (like in astrodendro)? [Python]", "body": "<p>Here is my resulting plot below but I would like it to look like the truncated dendrograms in <code>astrodendro</code> such as <a href=\"https://media.readthedocs.org/pdf/dendrograms/latest/dendrograms.pdf\" rel=\"noreferrer\">this</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cPEIc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cPEIc.png\" alt=\"enter image description here\"></a></p>\n\n<p>There is also a really cool looking dendrogram from <a href=\"https://elifesciences.org/articles/21887\" rel=\"noreferrer\">this paper</a> that I would like to recreate in <code>matplotlib</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/98brn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/98brn.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the code for generating an <code>iris</code> data set with noise variables and plotting the dendrogram in <code>matplotlib</code>.</p>\n\n<p><strong>Does anyone know how to either: (1) truncate the branches like in the example figures; and/or (2) to use <code>astrodendro</code> with a custom linkage matrix and labels?</strong> </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom sklearn.datasets import load_iris\nimport astrodendro\nfrom scipy.cluster.hierarchy import dendrogram, linkage\nfrom scipy.spatial import distance\n\ndef iris_data(noise=None, palette=\"hls\", desat=1):\n    # Iris dataset\n    X = pd.DataFrame(load_iris().data,\n                     index = [*map(lambda x:f\"iris_{x}\", range(150))],\n                     columns = [*map(lambda x: x.split(\" (cm)\")[0].replace(\" \",\"_\"), load_iris().feature_names)])\n\n    y = pd.Series(load_iris().target,\n                           index = X.index,\n                           name = \"Species\")\n    c = map_colors(y, mode=1, palette=palette, desat=desat)#y.map(lambda x:{0:\"red\",1:\"green\",2:\"blue\"}[x])\n\n    if noise is not None:\n        X_noise = pd.DataFrame(\n            np.random.RandomState(0).normal(size=(X.shape[0], noise)),\n            index=X_iris.index,\n            columns=[*map(lambda x:f\"noise_{x}\", range(noise))]\n        )\n        X = pd.concat([X, X_noise], axis=1)\n    return (X, y, c)\n\ndef dism2linkage(DF_dism, method=\"ward\"):\n    \"\"\"\n    Input: A (m x m) dissimalrity Pandas DataFrame object where the diagonal is 0\n    Output: Hierarchical clustering encoded as a linkage matrix\n\n    Further reading:\n    http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.cluster.hierarchy.linkage.html\n    https://pypi.python.org/pypi/fastcluster\n    \"\"\"\n    #Linkage Matrix\n    Ar_dist = distance.squareform(DF_dism.as_matrix())\n    return linkage(Ar_dist,method=method)\n\n\n# Get data\nX_iris_with_noise, y_iris, c_iris = iris_data(50)\n# Get distance matrix\ndf_dism = 1- X_iris_with_noise.corr().abs()\n# Get linkage matrix\nZ = dism2linkage(df_dism)\n\n#Create dendrogram\nwith plt.style.context(\"seaborn-white\"):\n    fig, ax = plt.subplots(figsize=(13,3))\n    D_dendro = dendrogram(\n             Z, \n             labels=df_dism.index,\n             color_threshold=3.5,\n             count_sort = \"ascending\",\n             #link_color_func=lambda k: colors[k]\n             ax=ax\n    )\n    ax.set_ylabel(\"Distance\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BjvVo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BjvVo.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1528926485, "post_id": 50846592, "comment_id": 88697050, "body": "What are you expecting to happen with the <code>None</code> case? Nothing or throw an error?"}, {"owner": {"reputation": 411, "user_id": 9245201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MUGigI4c-hY/AAAAAAAAAAI/AAAAAAAACTI/UAhudL2d8co/photo.jpg?sz=128", "display_name": "dsal3389", "link": "https://stackoverflow.com/users/9245201/dsal3389"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1528978575, "post_id": 50846592, "comment_id": 88717089, "body": "@dawg is in case there is no key named &#39;f&#39;"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1528986612, "post_id": 50846592, "comment_id": 88722350, "body": "I understand that it is the default. My question is: What do you want to happen if there is no function named <code>f</code>? An error that stops the program or silently nothing?"}, {"owner": {"reputation": 411, "user_id": 9245201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MUGigI4c-hY/AAAAAAAAAAI/AAAAAAAACTI/UAhudL2d8co/photo.jpg?sz=128", "display_name": "dsal3389", "link": "https://stackoverflow.com/users/9245201/dsal3389"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1528986692, "post_id": 50846592, "comment_id": 88722401, "body": "Just nothing..."}], "answers": [{"comments": [{"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 1, "creation_date": 1528925949, "post_id": 50846646, "comment_id": 88696834, "body": "just careful about cases where <code>&quot;None&quot;</code> is returned"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1528926731, "post_id": 50846646, "comment_id": 88697142, "body": "Or you could just do <code>a.get(&#39;f&#39;, lambda: &#39;None&#39;)()</code>. But I think the <code>KeyError</code> handling is more readable, even if a bit more verbose."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 5, "last_activity_date": 1528926212, "last_edit_date": 1528926212, "creation_date": 1528925879, "answer_id": 50846646, "question_id": 50846592, "link": "https://stackoverflow.com/questions/50846592/call-a-function-via-dict-get/50846646#50846646", "title": "Call a function via dict.get()", "body": "<p>Your dictionary values are functions. However, you need to remember to actually call your function:</p>\n\n<pre><code>a.get('f', 'None')()\n</code></pre>\n\n<p>The result, as expected, is seeing \"foo\" printed:</p>\n\n<pre><code>foo\n</code></pre>\n\n<p>Notice the parentheses <code>()</code> to indicate we want to run the function. To discover what's happening you can also check the <code>type</code> of <code>a['f']</code>:</p>\n\n<pre><code>print(type(a['f']))\n\n&lt;class 'function'&gt;\n</code></pre>\n\n<p>The method above, however, is inadvisable, because you can't call <code>None</code> if your key does not exist. In this case, you can catch <code>KeyError</code>:</p>\n\n<pre><code>def call_func(dispatcher, key):\n    try:\n        dispatcher[key]()\n    except KeyError:\n        return 'None'\n\ncall_func(a, 'f')\n</code></pre>\n\n<p>In practice, you will have functions with <code>return</code> statements, to avoid the inconsistency of having a function either print something (and return <code>None</code>) or return a string.</p>\n"}], "owner": {"reputation": 411, "user_id": 9245201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MUGigI4c-hY/AAAAAAAAAAI/AAAAAAAACTI/UAhudL2d8co/photo.jpg?sz=128", "display_name": "dsal3389", "link": "https://stackoverflow.com/users/9245201/dsal3389"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 50846646, "answer_count": 1, "score": 0, "last_activity_date": 1528926212, "creation_date": 1528925581, "last_edit_date": 1528926136, "question_id": 50846592, "link": "https://stackoverflow.com/questions/50846592/call-a-function-via-dict-get", "title": "Call a function via dict.get()", "body": "<p>I'm trying to call a function with <code>dict.get()</code>.</p>\n\n<pre><code>def foo():\n    print('foo')\n\ndef oof():\n    print('oof')\n\na = {'f': foo,\n     'o': oof}\n\na.get('f', 'None')\n</code></pre>\n\n<p>But it returns <code>object at 0x0...</code>, and if I call the function like <code>foo()</code> and <code>oof()</code>, it calls both and not only the requested function.</p>\n"}, {"tags": ["python", "web-scraping", "scripting"], "comments": [{"owner": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528927435, "post_id": 50846570, "comment_id": 88697372, "body": "You could use xpath in simple &#39;try except&#39; blok for your first and second class.I think no need to waste time to checking spesific content in webpage."}, {"owner": {"reputation": 31, "user_id": 9938435, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AEFqPW9irQE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0mCrtyEh3y0eZUpzrLlz13rsPlTg/mo/photo.jpg?sz=128", "display_name": "maverick rush", "link": "https://stackoverflow.com/users/9938435/maverick-rush"}, "reply_to_user": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528927831, "post_id": 50846570, "comment_id": 88697496, "body": "@OrhanSolak Thanks for your feedback, issue is i never worked on python and web-scraping, i want to learn it but right now i was looking for some script (due to urgency of work) from where i can start with, i will definetly dig deeper later on."}, {"owner": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528928248, "post_id": 50846570, "comment_id": 88697604, "body": "This <a href=\"https://medium.freecodecamp.org/how-to-scrape-websites-with-python-and-beautifulsoup-5946935d93fe\" rel=\"nofollow noreferrer\">link</a> could be helpful. Even if you read only the highlighted part, you&#39;ll be able to do your work just in minutes."}, {"owner": {"reputation": 31, "user_id": 9938435, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AEFqPW9irQE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0mCrtyEh3y0eZUpzrLlz13rsPlTg/mo/photo.jpg?sz=128", "display_name": "maverick rush", "link": "https://stackoverflow.com/users/9938435/maverick-rush"}, "reply_to_user": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528929881, "post_id": 50846570, "comment_id": 88698053, "body": "@OrhanSolak thanks a lot, i read it, but i cannot find how to find the xpath of that node like : /div[1]/div[2]/center[2]/h3[1], can you please guide me on how to find the xpath"}, {"owner": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528930382, "post_id": 50846570, "comment_id": 88698191, "body": "Try this : <b>$x(&quot;normalize-space(//div[@class=&#39;class_two&#39;]//div[@class=&#39;c&zwnj;&#8203;lass_one&#39;]//h3[@clas&zwnj;&#8203;s=&#39;find_first_class&#39;&zwnj;&#8203;])&quot;)</b>  if you copy paste this code to console(press F12 in chrome) the output would be <b>Some text</b> between the <i>h3</i>. By the way, <b>normalize-space</b> just shows you the <i>output as a readable text format</i>, do not use this part while writing code in python."}, {"owner": {"reputation": 31, "user_id": 9938435, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AEFqPW9irQE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0mCrtyEh3y0eZUpzrLlz13rsPlTg/mo/photo.jpg?sz=128", "display_name": "maverick rush", "link": "https://stackoverflow.com/users/9938435/maverick-rush"}, "reply_to_user": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528930817, "post_id": 50846570, "comment_id": 88698313, "body": "@OrhanSolak thanks man but i am still figuring our how to find xpath the code that i have written so far is i edited in question.Idea is to get some classes from user and store all the xpaths of that class into some variable, but we also need to identify the correct xpath like if we find a class at two places then we need to store two entries into that list like so : /div[1]/div[2]/cente[2]/h3[1] and  /div[2]/idv[3]/center[1]/h3[4]"}, {"owner": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528931651, "post_id": 50846570, "comment_id": 88698486, "body": "I understood what do you want to try. We need to take <i>some kind of classes from user</i> and assign to a variable (probably you&#39;ll use later.) With this code as you wrote, you can only get <i>one</i> class name and you could not know the exact location(respectively) this <b>class name</b> in a html tree. The most healthy way (according to me) is taking <b>exact string name(Some text)</b> from user and try to find this text&#39;s xpath. This <a href=\"https://stackoverflow.com/questions/29890301/python-find-xpath-of-element-containing-string\">link</a> could be helpful"}, {"owner": {"reputation": 31, "user_id": 9938435, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AEFqPW9irQE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0mCrtyEh3y0eZUpzrLlz13rsPlTg/mo/photo.jpg?sz=128", "display_name": "maverick rush", "link": "https://stackoverflow.com/users/9938435/maverick-rush"}, "reply_to_user": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528949031, "post_id": 50846570, "comment_id": 88701718, "body": "@OrhanSolak thanks man for sticking up with me, we got it resolved"}, {"owner": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528970316, "post_id": 50846570, "comment_id": 88712097, "body": "It&#39;s my pleasure :)"}], "answers": [{"comments": [{"owner": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1528936211, "post_id": 50847781, "comment_id": 88699364, "body": "Good job friend :)"}], "tags": [], "owner": {"reputation": 181, "user_id": 5787282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692a867e439036f8f67362129dd0b905?s=128&d=identicon&r=PG&f=1", "display_name": "DatenBergwerker", "link": "https://stackoverflow.com/users/5787282/datenbergwerker"}, "is_accepted": false, "score": 2, "last_activity_date": 1528933675, "creation_date": 1528933675, "answer_id": 50847781, "question_id": 50846570, "link": "https://stackoverflow.com/questions/50846570/write-a-python-script-to-find-out-the-xpath-from-the-html-based-on-any-class/50847781#50847781", "title": "Write a python script to find out the XPath from the HTML based on any class", "body": "<p>Here is the try/except logic Orhan mentioned. lxml parses the document it is passed and can reference the elements via xpath and extract the classes. After that it is just a simple check if they occur in the desired classes. lxml also allows the reconstruction of the initial xpath via ElementTree.</p>\n\n<pre><code>import csv\nimport requests\nfrom lxml import etree\n\ntarget_url = input('Which url is to be scraped?')\n\npage = '''\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n    &lt;body&gt;\n        &lt;div&gt;\n            &lt;h1 class=\"class_one\"&gt;First heading&lt;/h1&gt;\n                &lt;p&gt;Some text&lt;/p&gt;\n            &lt;div class=\"class_two\"&gt;\n                &lt;div class=\"class_three\"&gt;\n                    &lt;div class=\"class_one\"&gt;\n                        &lt;center class=\"class_two\"&gt;\n                            &lt;h3 class=\"class_three\"&gt;\n                            &lt;/h3&gt;\n                        &lt;/center&gt;\n                        &lt;center&gt;\n                            &lt;h3 class=\"find_first_class\"&gt;\n                                Some text\n                            &lt;/h3&gt;\n                        &lt;/center&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"class_two\"&gt;\n                &lt;div class=\"class_three\"&gt;\n                    &lt;div class=\"class_one\"&gt;\n                        &lt;center class=\"class_two\"&gt;\n                            &lt;h2 class=\"find_second_class\"&gt;\n                            &lt;/h2&gt;\n                        &lt;/center&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n'''\n\n#response = requests.get(target_url)\n#document = etree.parse(response.content)\nclasses_list = ['find_first_class', 'find_second_class']\nexpressions = []\n\ndocument = etree.fromstring(page)\n\nfor element in document.xpath('//*'):\n    try:\n        ele_class = element.xpath(\"@class\")[0]\n        print(ele_class)\n        if ele_class in classes_list:\n            tree = etree.ElementTree(element)\n            expressions.append((ele_class, tree.getpath(element)))\n    except IndexError:\n        print(\"No class in this element.\")\n        continue\n\nwith open('test.csv', 'w') as f:\n    writer = csv.writer(f, delimiter=',')\n    writer.writerows(expressions)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 9938435, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AEFqPW9irQE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0mCrtyEh3y0eZUpzrLlz13rsPlTg/mo/photo.jpg?sz=128", "display_name": "maverick rush", "link": "https://stackoverflow.com/users/9938435/maverick-rush"}, "is_accepted": false, "score": 0, "last_activity_date": 1528949093, "creation_date": 1528949093, "answer_id": 50849439, "question_id": 50846570, "link": "https://stackoverflow.com/questions/50846570/write-a-python-script-to-find-out-the-xpath-from-the-html-based-on-any-class/50849439#50849439", "title": "Write a python script to find out the XPath from the HTML based on any class", "body": "<p>For anyone looking similar thing here is how i made it work : </p>\n\n<pre><code>import os\nimport csv\nimport requests\nfrom lxml import html\n\n\ncsv_file = raw_input(\"Enter CSV file name\\n\")\nfull_csv_file = os.path.abspath(csv_file)\nwith open(full_csv_file) as f:\n    reader = csv.reader(f)\n    data = [temp_reader for temp_reader in reader]\n    final_result = {}\n\n    for item_list in data:\n        class_locations = {}\n        url = item_list[0]\n        item_list.pop(0)\n        try:\n            page = requests.get(url)\n            root = html.fromstring(page.text)\n            tree = root.getroottree()\n            for find_class in item_list:\n                find_class_locations =[]\n                try:\n                    result = root.xpath(\"//*[contains(concat(' ', normalize-space(@class), ' '), ' \" + find_class + \" ')]\")\n                    for r in result:\n                        find_class_locations.append(tree.getpath(r))\n                    class_locations[find_class] = find_class_locations\n                except Exception,e:\n                    print(e)\n                    continue\n            final_result[url] = class_locations\n        except Exception, e:\n            print(e)\n            continue\nprint(final_result)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9938435, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AEFqPW9irQE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0mCrtyEh3y0eZUpzrLlz13rsPlTg/mo/photo.jpg?sz=128", "display_name": "maverick rush", "link": "https://stackoverflow.com/users/9938435/maverick-rush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1719, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1528949160, "creation_date": 1528925455, "last_edit_date": 1528949160, "question_id": 50846570, "link": "https://stackoverflow.com/questions/50846570/write-a-python-script-to-find-out-the-xpath-from-the-html-based-on-any-class", "title": "Write a python script to find out the XPath from the HTML based on any class", "body": "<p>In Python, I want the user to enter a URL in the console prompt (take input and store it in some variable), \n<strong>For example, if the webpage contains this HTML:</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n    &lt;body&gt;\n        &lt;div&gt;\n            &lt;h1 class=\"class_one\"&gt;First heading&lt;/h1&gt;\n                &lt;p&gt;Some text&lt;/p&gt;\n            &lt;div class=\"class_two\"&gt;\n                &lt;div class=\"class_three\"&gt;\n                    &lt;div class=\"class_one\"&gt;\n                        &lt;center class=\"class_two\"&gt;\n                            &lt;h3 class=\"class_three\"&gt;\n                            &lt;/h3&gt;\n                        &lt;/center&gt;\n                        &lt;center&gt;\n                            &lt;h3 class=\"find_first_class\"&gt;\n                                Some text\n                            &lt;/h3&gt;\n                        &lt;/center&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"class_two\"&gt;\n                &lt;div class=\"class_three\"&gt;\n                    &lt;div class=\"class_one\"&gt;\n                        &lt;center class=\"class_two\"&gt;\n                            &lt;h2 class=\"find_second_class\"&gt;\n                            &lt;/h2&gt;\n                        &lt;/center&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Then the CSV should contain rows for each and every class that's in the HTML of the webpage (since classes can appear more than once, so we could have multiple rows for any given class).</p>\n\n<p>Now, I want to generate XPath for all the classes present on the page.\nWhat i have written so far is : </p>\n\n<pre><code>import urllib2\nfrom bs4 import BeautifulSoup\n\nresult = {}\nuser_url_list = raw_input(\"Please enter your urls separated by spaces : \\n\")\nurl_list = map(str, user_url_list.split())\nfor url in url_list:\n    try:\n        page = urllib2.urlopen(url)\n        soup = BeautifulSoup(page, 'html.parser')\n        user_class_list = raw_input(\"Please enter the classes to parse for \" + url + \" separated by spaces : \\n\")\n        class_list = map(str, user_class_list.split())\n        for find_class in class_list:\n            try:\n                name_box = soup.find(attrs={'class': find_class})\n                print(xpath_soup(name_box))\n                break\n            except:\n                print(\"There was some error getting the xpath of class : \" + find_class + \" for url : \" + url + \"\\n..trying next class now \\n\")\n                continue\n    except:\n        print(url + \" is not valid, please enter correct full url \\n\")\n        continue\nprint(result)\n</code></pre>\n"}, {"tags": ["python", "django", "celery"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1528925446, "post_id": 50846548, "comment_id": 88696629, "body": "Does <code>INSTALLED_APPS</code> contains <code>&#39;project&#39;</code>?"}, {"owner": {"reputation": 1726, "user_id": 609041, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a1c37f80358135cdd3a310aef075060e?s=128&d=identicon&r=PG", "display_name": "AAA", "link": "https://stackoverflow.com/users/609041/aaa"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528925600, "post_id": 50846548, "comment_id": 88696685, "body": "Nope, I never put <code>project </code> in INSTALLED_APPS. My entire Django app works fine w/o it. Why would I have to put that there? Perhaps I&#39;ll make a different directory to story <code>celery.py</code> if that&#39;s the case."}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1528937180, "post_id": 50846548, "comment_id": 88699554, "body": "@AAA you have strange structure of project. Do you have customizations in <code>manage.py</code>? <code>&#39;...&#39;</code> in INSTALLED_APPS - is your real code or you just abbreviated before pasting here?"}, {"owner": {"reputation": 1726, "user_id": 609041, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a1c37f80358135cdd3a310aef075060e?s=128&d=identicon&r=PG", "display_name": "AAA", "link": "https://stackoverflow.com/users/609041/aaa"}, "edited": false, "score": 0, "creation_date": 1528937249, "post_id": 50846548, "comment_id": 88699566, "body": "<code>...</code> is abbreviation before pasting here.  I will copy and paste my <code>manage.py</code> file into the OP."}, {"owner": {"reputation": 1726, "user_id": 609041, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a1c37f80358135cdd3a310aef075060e?s=128&d=identicon&r=PG", "display_name": "AAA", "link": "https://stackoverflow.com/users/609041/aaa"}, "edited": false, "score": 0, "creation_date": 1528937386, "post_id": 50846548, "comment_id": 88699591, "body": "I just pasted my <code>manage.py</code> file. Could it be the <code>os.path.append</code> part?"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1529486769, "post_id": 50846548, "comment_id": 88886812, "body": "Try <code>PYTHONPATH=$PWD&#47;e celery -A e.project.celery:app worker -l info</code>"}, {"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "edited": false, "score": 1, "creation_date": 1529754199, "post_id": 50846548, "comment_id": 88995382, "body": "I see that you use <code>e.project.celery</code> and <code>e.project.settings</code>, but the error says something about not finding <code>project.urls</code> (no <code>e.</code> at the start). How did you define the <code>ROOT_URLCONF</code> setting?"}, {"owner": {"reputation": 1726, "user_id": 609041, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a1c37f80358135cdd3a310aef075060e?s=128&d=identicon&r=PG", "display_name": "AAA", "link": "https://stackoverflow.com/users/609041/aaa"}, "reply_to_user": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "edited": false, "score": 0, "creation_date": 1529889094, "post_id": 50846548, "comment_id": 89023076, "body": "@Ralf That was indeed the problem, oops! If you answer the question,  I will accept your answer and reward you the bounty. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": true, "score": 4, "last_activity_date": 1529924477, "creation_date": 1529924477, "answer_id": 51021925, "question_id": 50846548, "link": "https://stackoverflow.com/questions/50846548/django-celery-importerror-no-module-named-project-urls/51021925#51021925", "title": "Django + Celery: ImportError: No module named project.urls", "body": "<p>As stated in the comments to the question, I see that you use <code>e.project.celery</code> and <code>e.project.settings</code> in your import statements, but the error says something about not finding <code>project.urls</code> (there is no <code>e.</code> at the start).</p>\n\n<p>How did you define the <code>ROOT_URLCONF</code> setting? Maybe that is causing the problem.</p>\n"}], "owner": {"reputation": 1726, "user_id": 609041, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a1c37f80358135cdd3a310aef075060e?s=128&d=identicon&r=PG", "display_name": "AAA", "link": "https://stackoverflow.com/users/609041/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 1, "accepted_answer_id": 51021925, "answer_count": 1, "score": 3, "last_activity_date": 1529924477, "creation_date": 1528925346, "last_edit_date": 1528937364, "question_id": 50846548, "link": "https://stackoverflow.com/questions/50846548/django-celery-importerror-no-module-named-project-urls", "title": "Django + Celery: ImportError: No module named project.urls", "body": "<p>When I start a worker using Django and Celery using this command (I execute the command within the <code>d</code> directory):</p>\n\n<p><code>celery -A e.project.celery:app worker -l info</code></p>\n\n<pre><code>File \"/Users/.../..../e/venv/lib/python2.7/site-packages/celery-4.2.0-py2.7.egg/celery/loaders/base.py\", line 108, in import_default_modules\n    raise response\n\nImportError: No module named project.urls\n</code></pre>\n\n<p>I am using Django 1.11 and Celery 4.2 with Python 2.7.</p>\n\n<p>Below is my project structure with the contents of some files that should be helpful for debugging. </p>\n\n<p>Django structure:</p>\n\n<pre><code>d/\n    __init__.py\n    e/\n        __init__.py\n        core/\n            __init__.py\n            app1/\n                 __init__.py\n                 tasks.py\n        project/ (project stuff)\n            __init__.py\n            celery.py\n            settings.py\n            urls.py\n            context_processors.py\n            wsgi.py\n    manage.py\n    setup.py\n</code></pre>\n\n<p><code>settings.py</code>:</p>\n\n<pre><code>INSTALLED_APPS = [\n'...',\n'django_celery_results',\n'django_celery_beat'\n]\n\n\nCELERY_RESULT_BACKEND = 'django-db'\nCELERY_BROKER_URL = 'redis://foo:foo@127.0.0.1:6599/1'\nCELERY_CELERYBEAT_SCHEDULER = 'django_celery_beat.schedulers:DatabaseScheduler'\n</code></pre>\n\n<p><code>e/project/__init__.py</code>:</p>\n\n<pre><code>from __future__ import absolute_import, unicode_literals\n\nfrom e.project.celery import app as celery_app\n\n__all__ = ('celery_app', )\n</code></pre>\n\n<p><code>e/project/celery.py</code>:</p>\n\n<pre><code>from __future__ import absolute_import, unicode_literals\nimport os\nimport sys\nfrom celery import Celery\n\n# set the default Django settings module for the 'celery' program.\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"e.project.settings\")\n\napp = Celery('e_tasks')\n\n# Using a string here means the worker doesn't have to serialize\n# the configuration object to child processes.\n# - namespace='CELERY' means all celery-related configuration keys\n#   should have a `CELERY_` prefix.\napp.config_from_object('django.conf:settings', namespace='CELERY')\n\n# Load task modules from all registered Django app configs.\napp.autodiscover_tasks()\n\nif __name__ == '__main__':\n    app.start()\n</code></pre>\n\n<p><code>d/e/core/app1/tasks.py</code>:</p>\n\n<pre><code>from celery import shared_task\n\n\n@shared_task\ndef hello_world_task():\n    print('Hello world')\n</code></pre>\n\n<p>My <code>manage.py</code> file:</p>\n\n<pre><code>#!/usr/local/bin/python2.7\n\nimport os\nimport sys\n\nif __name__ == \"__main__\":\n    sys.path.append(os.path.join(os.path.dirname(os.path.abspath(__file__)), 'e'))\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"e.project.settings\")\n\ntry:\n    from django.core.management import execute_from_command_line\nexcept ImportError:\n    # The above import may fail for some other reason. Ensure that the\n    # issue is really that Django is missing to avoid masking other\n    # exceptions on Python 2.\n    try:\n        import django\n    except ImportError:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        )\n    raise\nexecute_from_command_line(sys.argv)\n</code></pre>\n"}, {"tags": ["python", "dictionary", "methods", "arguments"], "answers": [{"tags": [], "owner": {"reputation": 5056, "user_id": 8472976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808aa1971d8e50ab541e1f54a705afad?s=128&d=identicon&r=PG&f=1", "display_name": "MegaIng", "link": "https://stackoverflow.com/users/8472976/megaing"}, "is_accepted": true, "score": 3, "last_activity_date": 1528925385, "creation_date": 1528925385, "answer_id": 50846561, "question_id": 50846487, "link": "https://stackoverflow.com/questions/50846487/python-dictionary-argument-passing-methods/50846561#50846561", "title": "Python dictionary argument passing methods", "body": "<p>It is simply that <code>(**d)</code> creates a new <code>dict</code>, while <code>(d)</code> keeps a reference to the old one:</p>\n\n<pre><code>def dict_test1(**d):\n    print d is d_global # False\n\ndef dict_test2(d):\n    print d is d_global # True\n\n\nd_global = {'a': '1'}\n\ndict_test1(**d_global ) \ndict_test2(d_global) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1528927867, "creation_date": 1528927867, "answer_id": 50847009, "question_id": 50846487, "link": "https://stackoverflow.com/questions/50846487/python-dictionary-argument-passing-methods/50847009#50847009", "title": "Python dictionary argument passing methods", "body": "<p>To understand what's going on, consider this case:</p>\n\n<pre><code>&gt;&gt;&gt; def test1(**d):\n...     print(d)\n&gt;&gt;&gt; test1(spam=10)\n{'spam': 10}\n</code></pre>\n\n<p>Where did that <code>{'spam': 10}</code> come from? Simple: <code>**d</code> just packs up all keyword arguments that don't match any named parameters, no matter where they came from, into a new dict, and gives you that dict as <code>d</code>.</p>\n\n<hr>\n\n<p>Now look at <code>**</code> on the argument side instead:</p>\n\n<pre><code>&gt;&gt;&gt; def test2(spam, eggs):\n...     print(spam, eggs)\n&gt;&gt;&gt; d = {'eggs': 10, 'spam': 20}\n&gt;&gt;&gt; test2(**d)\n20 10\n</code></pre>\n\n<p>So Python is expanding <code>**d</code> into a bunch of separate keyword arguments, which match up with parameters exactly the same way as actual separate keyword arguments.</p>\n\n<hr>\n\n<p>Finally, on both sides:</p>\n\n<pre><code>&gt;&gt;&gt; def test3(spam, eggs, **d):\n...     print(spam, eggs)\n...     print(d)\n&gt;&gt;&gt; d = {'spam': 10, 'cheese': 20}\n&gt;&gt;&gt; test3(eggs=30, **d)\n10 30\n{'cheese': 20}\n</code></pre>\n\n<p>So Python is expanding the <code>**d</code> argument out into two separate keyword arguments, putting them together with the normal keyword argument <code>eggs=30</code>, matching them to the parameters <code>spam</code> and <code>eggs</code>, and storing any leftovers in a new dict in the <code>**d</code> parameter.</p>\n\n<hr>\n\n<p>This is all explained loosely in <a href=\"https://docs.python.org/3/tutorial/controlflow.html#more-on-defining-functions\" rel=\"nofollow noreferrer\">the tutorial</a>, and more rigorously in <a href=\"https://docs.python.org/3/reference/expressions.html#calls\" rel=\"nofollow noreferrer\">the reference</a>.</p>\n\n<p>There's really nothing special about the fact that you had a <code>**d</code> parameter on the definition and a <code>**d</code> argument on the call; they don't have to correspond to each other in any way.</p>\n\n<p>Some people consider it unfortunate that Python uses the same syntax for variable-argument parameters in the definition and argument unpacking in the call, and likewise the same syntax for default parameter values in the definition and keyword arguments in the call. But, while this is confusing the first time you run into it, once you understand, it's very easy to remember, and to read. And other languages that distinguish the two with syntax like <code>...args</code> vs. <code>seq...</code> don't seem to be any less initially confusing.</p>\n"}], "owner": {"reputation": 131, "user_id": 1571749, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a5e65c505e0580e1ec343df318366d66?s=128&d=identicon&r=PG", "display_name": "eecs", "link": "https://stackoverflow.com/users/1571749/eecs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 50846561, "answer_count": 2, "score": 0, "last_activity_date": 1528927867, "creation_date": 1528925068, "question_id": 50846487, "link": "https://stackoverflow.com/questions/50846487/python-dictionary-argument-passing-methods", "title": "Python dictionary argument passing methods", "body": "<p>I am trying to pass a dictionary as an argument, and see 2 approaches as seen below, what's makes it keep the dictionary value unchanged when passed with **</p>\n\n<pre><code>def dict_test1(**d):\n    d['a'] = '10'\n\ndef dict_test2(d):\n    d['a'] = '10'\n\n\nd = {'a': '1'}\n\ndict_test1(**d) \nprint d\n\ndict_test2(d) \nprint d\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'a': '1'}\n\n{'a': '10'}\n</code></pre>\n"}, {"tags": ["python", "mysql-python"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9883424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea01308998b874aae922ffb621ef4de?s=128&d=identicon&r=PG&f=1", "display_name": "Arashi Okuzono", "link": "https://stackoverflow.com/users/9883424/arashi-okuzono"}, "edited": false, "score": 0, "creation_date": 1528927324, "post_id": 50846595, "comment_id": 88697341, "body": "Im getting a syntax error saying: cant assign to function call even after the fix,"}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 0, "last_activity_date": 1528928140, "last_edit_date": 1528928140, "creation_date": 1528925589, "answer_id": 50846595, "question_id": 50846478, "link": "https://stackoverflow.com/questions/50846478/multiple-tables-from-mysql-to-one-table-in-python/50846595#50846595", "title": "Multiple tables from mysql to one table in python", "body": "<ol>\n<li><p>You have two wheres, i.e. <code>WHERE Where</code>.</p></li>\n<li><p>Use <code>AND</code> to separate the different clauses of the condition, not <code>,</code>. So the end of your SQL should be:</p></li>\n</ol>\n\n\n\n<pre><code>WHERE e.eno = w.eno AND w.pno = p.pno AND p.dno = d.dno AND budget &gt; %s\n</code></pre>\n\n<ol start=\"3\">\n<li><p><code>sum(hours)</code> is a function call, not a valid variable name, so it can't be the target in a for loop, i.e. <code>for (ename, eno, sum(hours), ...</code>. Just make up a variable name, like <code>sum_hours</code>.</p></li>\n<li><p><code>(140000)</code> is just <code>140000</code>, not a tuple. If you want a tuple with one element, you need a comma, i.e. <code>(140000,)</code>. You can also just use a list: <code>[140000]</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 9883424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea01308998b874aae922ffb621ef4de?s=128&d=identicon&r=PG&f=1", "display_name": "Arashi Okuzono", "link": "https://stackoverflow.com/users/9883424/arashi-okuzono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "accepted_answer_id": 50846595, "answer_count": 1, "score": 0, "last_activity_date": 1528928140, "creation_date": 1528925031, "last_edit_date": 1528926978, "question_id": 50846478, "link": "https://stackoverflow.com/questions/50846478/multiple-tables-from-mysql-to-one-table-in-python", "title": "Multiple tables from mysql to one table in python", "body": "<p>In Python, with the use of MYSQL how do you make table from multiple tables. I have found a solution for 2 tables but I do not know how to do it for more that 2 tables. This is the schema:</p>\n\n<pre><code>emp (eno CHAR(5), ename VARCHAR(30), bdate DATE, title CHAR(2), salary DECIMAL(9,2), supereno CHAR(5), dno CHAR(5), PRIMARY KEY (eno))\ndept (dno CHAR(5), dname VARCHAR(40), mgreno CHAR(5), PRIMARY KEY (dno))                      \nproj (pno CHAR(5), pname VARCHAR(40), budget DECIMAL(9,2), dno  CHAR(5), PRIMARY KEY (pno)) \nworkson (eno  CHAR(5), pno  CHAR(5), resp VARCHAR(20), hours SMALLINT, PRIMARY KEY (eno,pno)) \n</code></pre>\n\n<p>And This is what I have tried so far:</p>\n\n<pre><code>import mysql.connector\nconnection = mysql.connector.connect(user='', password='', host='', database='')\ncursor = connection.cursor()\nquery = (\"SELECT ename, w.eno, sum(hours), p.pno, pname, budget, d.dno, dname, mgreno FROM emp e, workson w, proj p, dept d WHERE e.eno=w.eno AND w.pno=p.pno AND p.dno=d.dno \"+\" budget &gt; %s\")\ncursor.execute(query, (140000))\nfor (ename, eno, sum(hours), pno, pname, budget, dno, dname, mgreno) in cursor:\n        print(pno, pname, dno, dname, sum(hours), mgreno)\ncursor.close()\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 7482607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b31eeb556df0dc791872fc34bccb5c93?s=128&d=identicon&r=PG&f=1", "display_name": "Meringoo", "link": "https://stackoverflow.com/users/7482607/meringoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1528927012, "creation_date": 1528927012, "answer_id": 50846861, "question_id": 50846477, "link": "https://stackoverflow.com/questions/50846477/how-to-make-python-only-return-valid-data-using-np-loadtxt/50846861#50846861", "title": "How to make python only return valid data using np.loadtxt", "body": "<p>One solution to the problem would be to keep track of the indices of the invalid rows by \nstoring them in a list, and then deleting them from <code>initialData</code> right before the return using <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.delete.html\" rel=\"nofollow noreferrer\">np.delete</a>. The function takes as input an array, a list of indices to be deleted, and and axis along which the datapoints should be deleted, which in this case would be 0 as you are deleting the rows. </p>\n\n<p>Your code would then look something like this :</p>\n\n<pre><code>import numpy as np\ndef dataLoad():\n    del_indices= []\n    initialData = np.loadtxt(filename)\n\n    for i in range (len(initialData)):\n        if initialData[i,0]&gt;60 or initialData[i,0]&lt;10:\n            print(\"Temperature must be between 10 and 60. Error in column 1 row {}.\".format(initialData.shape[0]))\n            del_indices.append(i)\n        if initialData[i,1]&lt;0:\n            print(\"Bacteria Growth Rate must be higher than, or equal to 0. Error in column 2 row row {}.\".format(initialData.shape[0]))\n            del_indices.append(i)\n        if initialData[i,2] not in [1, 2, 3, 4]:\n            print(\"Bacteria Category must be one of the numbers: 1, 2, 3 and 4. Error in column 3 row {}.\".format(initialData.shape[0]))\n            del_indices.append(i)\n    initialData = np.delete(initialData,del_indices, axis=0)\n    data = initialData.reshape(-1,3)\n    return data\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9938456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3e959dfc667f6e3133423b44ea98565?s=128&d=identicon&r=PG&f=1", "display_name": "JPJ", "link": "https://stackoverflow.com/users/9938456/jpj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 50846861, "answer_count": 1, "score": 0, "last_activity_date": 1528927012, "creation_date": 1528925031, "question_id": 50846477, "link": "https://stackoverflow.com/questions/50846477/how-to-make-python-only-return-valid-data-using-np-loadtxt", "title": "How to make python only return valid data using np.loadtxt", "body": "<p>I have made a code for loading a data file. I have made it so an error message will occur if data does not meet specific requirements. However i need it to also only return the valid data. I cannot seem to find a way to do so on my own, so I hope someone can help me. My code is as following</p>\n\n<pre><code>import numpy as np\ndef dataLoad(filename):\ninitialData = np.loadtxt(filename)\n\nfor i in range (len(initialData)):\n    if initialData[i,0]&gt;60 or initialData[i,0]&lt;10:\n        print(\"Temperature must be between 10 and 60. Error in column 1 row {}.\".format(initialData.shape[0]))\n    if initialData[i,1]&lt;0:\n        print(\"Bacteria Growth Rate must be higher than, or equal to 0. Error in column 2 row row {}.\".format(initialData.shape[0]))\n    if initialData[i,2] not in [1, 2, 3, 4]:\n        print(\"Bacteria Category must be one of the numbers: 1, 2, 3 and 4. Error in column 3 row {}.\".format(initialData.shape[0]))\n    else:\n        pass\ndata = initialData.reshape(-1,3)\nreturn data\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1528924899, "post_id": 50846444, "comment_id": 88696426, "body": "What error are you getting?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1528924954, "post_id": 50846444, "comment_id": 88696442, "body": "This code doesn&#39;t even attempt to convert any strings to floats. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the complete, exact stack trace."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528924966, "post_id": 50846444, "comment_id": 88696448, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 83, "user_id": 7546355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6e164efbf0501a8ce6342dc5eff705f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Madaan", "link": "https://stackoverflow.com/users/7546355/kartik-madaan"}, "edited": false, "score": 0, "creation_date": 1528924968, "post_id": 50846444, "comment_id": 88696449, "body": "Edited ! Added error into body ."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1528924999, "post_id": 50846444, "comment_id": 88696462, "body": "please edit the error into the body of your question as text"}, {"owner": {"reputation": 1283, "user_id": 5599955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LyryY.jpg?s=128&g=1", "display_name": "sP_", "link": "https://stackoverflow.com/users/5599955/sp"}, "edited": false, "score": 0, "creation_date": 1528925190, "post_id": 50846444, "comment_id": 88696526, "body": "What&#39;s the value of p and q for which you&#39;re getting this error?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528925217, "post_id": 50846444, "comment_id": 88696533, "body": "@KartikMadaan: Your posted code doesn&#39;t run, as there&#39;s no call to the function.  The error in your comment doesn&#39;t produce the error isn&#39;t what you posted in your title.  Also, you&#39;ve not even <i>tried</i> to trace the problem by even <code>print</code>ing the values you use."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528925305, "post_id": 50846444, "comment_id": 88696568, "body": "What are the <code>p</code> and <code>q</code> values?"}, {"owner": {"reputation": 83, "user_id": 7546355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6e164efbf0501a8ce6342dc5eff705f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Madaan", "link": "https://stackoverflow.com/users/7546355/kartik-madaan"}, "edited": false, "score": 0, "creation_date": 1528925351, "post_id": 50846444, "comment_id": 88696589, "body": "I don&#39;t know how to get the stack trace as I&#39;m coding on Hackerrank and I&#39;m fairly new to python ! And for the example , please refer to the exact problem page : [Link]<a href=\"https://www.hackerrank.com/challenges/kaprekar-numbers/problem\" rel=\"nofollow noreferrer\">hackerrank.com/challenges/kaprekar-numbers/problem</a>"}, {"owner": {"reputation": 83, "user_id": 7546355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6e164efbf0501a8ce6342dc5eff705f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Madaan", "link": "https://stackoverflow.com/users/7546355/kartik-madaan"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528925410, "post_id": 50846444, "comment_id": 88696609, "body": "@Prune , the values of p and q are passed by helper function . I just need to complete the given function ."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7546355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6e164efbf0501a8ce6342dc5eff705f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Madaan", "link": "https://stackoverflow.com/users/7546355/kartik-madaan"}, "edited": false, "score": 0, "creation_date": 1528925780, "post_id": 50846569, "comment_id": 88696765, "body": "Even though I&#39;ve rectified this error , I&#39;m getting yet another error&lt;br&gt;  <code>Traceback (most recent call last):   File &quot;solution.py&quot;, line 26, in &lt;module&gt;     kaprekarNumbers(p, q)   File &quot;solution.py&quot;, line 14, in kaprekarNumbers     p1 , p2 = square[:len(square)&#47;2] , square[len(square)&#47;2:] TypeError: slice indices must be integers or None or have an __index__ method</code>&lt;br&gt;  Can you please suggest some improvements in the code . Thanks :D"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1528926033, "post_id": 50846569, "comment_id": 88696872, "body": "Shouldn&#39;t it be &quot;<i>range [1:3]</i>&quot;?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528926085, "post_id": 50846569, "comment_id": 88696898, "body": "Actually, 0 is allowable according to the formal definition."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1528926099, "last_edit_date": 1528926099, "creation_date": 1528925430, "answer_id": 50846569, "question_id": 50846444, "link": "https://stackoverflow.com/questions/50846444/valueerror-in-finding-kaprekar-numbers/50846569#50846569", "title": "ValueError in finding Kaprekar numbers", "body": "<p>If <code>p</code> is an integer in the range [0,3], so that its square is a single-digit integer, then your split of the squares string version will produce an empty string for <code>p1</code>.  int('') is an error.  You have to check that value before you attempt to convert:</p>\n\n<pre><code>if len(square) &gt;= 2:\n    # Put your existing code here;\n    # If square is only a single digit, there's no use splitting the result.\n</code></pre>\n\n<p>Better yet, cover the single-digit case, so you pick up <code>1</code> as a valid number:</p>\n\n<pre><code>    if p1 == '':\n        p1 = '0'       # Force a leading zero.\n    if int(p1) + int(p2) == int(i):\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 1, "last_activity_date": 1529019058, "last_edit_date": 1529019058, "creation_date": 1528928111, "answer_id": 50847044, "question_id": 50846444, "link": "https://stackoverflow.com/questions/50846444/valueerror-in-finding-kaprekar-numbers/50847044#50847044", "title": "ValueError in finding Kaprekar numbers", "body": "<p>Here's a more advanced implementation (for when you will be more familiarized with <em>Python</em>).</p>\n\n<p><em>code.py</em>:</p>\n\n<pre><code>import sys\n\n\ndef kaprekar(n, base=10):\n    #if i &lt;= 0:\n    #    return False\n    square = n ** 2\n    splitter = base\n    while True:\n        div, mod = divmod(square, splitter)\n        if mod and div + mod == n:\n            return True\n        if splitter &gt;= square:\n            return False\n        splitter *= base\n    return False\n\n\ndef print_kaprekars(p, q, base=10):\n    for i in range(p, q):\n        if kaprekar(i, base=base):\n            print(i)\n\n\ndef main():\n    lo = 0\n    hi = 1000\n    base = 10\n    print(\"Printing Kaprekar numbers (!!! base 10 representation !!!) between {:d} and {:d} in base {:d}\".format(lo, hi, base))\n    print_kaprekars(lo, hi, base=base)\n\n\nif __name__ == \"__main__\":\n    print(\"Python {:s} on {:s}\\n\".format(sys.version, sys.platform))\n    main()\n</code></pre>\n\n<p><strong>Notes</strong>:</p>\n\n<ul>\n<li><code>kaprekar</code> function:\n\n<ul>\n<li>Tests whether a number satisfies <em>Kaprekar</em> conditions</li>\n<li>Supports bases other than 10 (default)</li>\n<li>Does everything mathematically (no string conversions or parsing - this way you <strong>wouldn't encounter current error</strong>, and also waaay faster)\n\n<ul>\n<li>The \"position\" in the squared number \"held\" by <code>splitter</code> (going right -> left) and the 2 parts are computed using <a href=\"https://docs.python.org/3/library/functions.html#divmod\" rel=\"nofollow noreferrer\">[Python]: <strong>divmod</strong>(<em>a, b</em>)</a></li>\n</ul></li>\n</ul></li>\n<li>The rest are just wrappers</li>\n</ul>\n\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n<pre><code>(py35x64_test) e:\\Work\\Dev\\StackOverflow\\q050846444&gt;\"e:\\Work\\Dev\\VEnvs\\py35x64_test\\Scripts\\python.exe\" code.py\nPython 3.5.4 (v3.5.4:3f56838, Aug  8 2017, 02:17:05) [MSC v.1900 64 bit (AMD64)] on win32\n\nPrinting Kaprekar numbers (!!! base 10 representation !!!) between 0 and 1000 in base 10\n1\n9\n45\n55\n99\n297\n703\n999\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 83, "user_id": 7546355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6e164efbf0501a8ce6342dc5eff705f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Madaan", "link": "https://stackoverflow.com/users/7546355/kartik-madaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1531833309, "accepted_answer_id": 50846569, "answer_count": 2, "score": -1, "last_activity_date": 1529019058, "creation_date": 1528924842, "last_edit_date": 1528925738, "question_id": 50846444, "link": "https://stackoverflow.com/questions/50846444/valueerror-in-finding-kaprekar-numbers", "closed_reason": "Not suitable for this site", "title": "ValueError in finding Kaprekar numbers", "body": "<blockquote>\n  <p>In mathematics, a Kaprekar number for a given base is a non-negative integer,  the representation of whose square in that base can be split into two parts that add up to the original number again. For instance, 45 is a Kaprekar number, because 45\u00b2 = 2025 and 20+25 = 45.<br>\n  I want to print all Kaprekar numbers between two integers p and q </p>\n</blockquote>\n\n<pre><code>def kaprekarNumbers(p, q):\n    for i in range(int(p),int(q)):\n        square = str(i ** 2)\n        if len(square) % 2 == 0:\n            p1 , p2 = square[:len(square)/2] , square[len(square)/2:]\n        else:\n            p1 , p2 = square[:int(len(square)/2)] , square[int(len(square)/2) :]\n        if int(p1) + int(p2) == int(i):\n            print(i , end = '')\n</code></pre>\n\n<p>Error:\nCompiler message :</p>\n\n<pre><code>Runtime Error\nError(stderr) : \nTraceback (most recent call last):\nFile \"solution.py\", line 26, in &lt;module&gt;\n    kaprekarNumbers(p, q)\n  File \"solution.py\", line 17, in kaprekarNumbers\n    if int(p1) + int(p2) == int(i):\nValueError: invalid literal for int() with base 10: ''\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "boxplot"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1528931683, "post_id": 50846441, "comment_id": 88698492, "body": "The right plot shows roughly 1000 boxplots. They are so thin they might appear as  lines."}, {"owner": {"reputation": 43, "user_id": 9938426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da48a205ed365f967b0f0e50da6d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "vivianna", "link": "https://stackoverflow.com/users/9938426/vivianna"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528947069, "post_id": 50846441, "comment_id": 88701316, "body": "Many thanks for your comment. It helped me solve my problem."}], "owner": {"reputation": 43, "user_id": 9938426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da48a205ed365f967b0f0e50da6d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "vivianna", "link": "https://stackoverflow.com/users/9938426/vivianna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528967488, "creation_date": 1528924819, "last_edit_date": 1528967488, "question_id": 50846441, "link": "https://stackoverflow.com/questions/50846441/boxplot-doesnt-show-if-plotting-2-plots-by-subplots-matplotlib", "title": "boxplot doesn&#39;t show if plotting 2 plots by subplots matplotlib", "body": "<p>I'm trying to plot a scatter plot and a box plot side by side by using matplotlib in Python. </p>\n\n<p>The expected result should be the scatter plot on the left side while the box plot on the right side. But my boxplot doesn't display correctly. I got the output as below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9Zqee.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Zqee.png\" alt=\"enter image description here\"></a>\nAs shown in the graph, the boxplot was incorrectly shown as an ugly scatter plot. Below please find my code. I would greatly appreciate any thoughts or advice. Thanks for your time.</p>\n\n<pre><code>def multiple_plot(X, y, outliers_low, outliers_high,attribute_name):\n    import matplotlib.pyplot as plt\n    import pylab\n    import seaborn as sns\n    #plt.scatter(X,y)\n    fig,(ax1, ax2) = plt.subplots(ncols=2,sharey=False,sharex=False,figsize=(18,5))\n    ax1.set_ylim([outliers_low,outliers_high])\n    sns.regplot(x=X,y=y,ax=ax1)\n    ax1.set(xlabel=attribute_name)\n\n    sns.boxplot(x=X, y=y,width=0.5, whis=2,ax=ax2)\n    ax2.set(xlabel=attribute_name)\n    ax2.set(ylabel='NPI');\n\n    plt.tight_layout()\n    plt.show()\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x", "yaml"], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 1831540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8520f8630fabef2ab5e777953d3f00?s=128&d=identicon&r=PG", "display_name": "Charles David", "link": "https://stackoverflow.com/users/1831540/charles-david"}, "edited": false, "score": 0, "creation_date": 1528925550, "post_id": 50846530, "comment_id": 88696663, "body": "Not only what the previous comment said, but you&#39;re using IPython&#39;s console, and not plain Python console ;)"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1528960822, "post_id": 50846530, "comment_id": 88706114, "body": "1) Where is the JSON the OP requested? JSON <a href=\"https://www.json.org/\" rel=\"nofollow noreferrer\">strings</a> have double quotes. 2) PyYAML&#39;s <code>load()</code> is documented to be unsafe, and there is no excuse for using it instead of <code>safe_load()</code> here (or almost anywhere else). 3) You fail to mention that PyYAML only supports the old, pre-2009, YAML 1.1 specification."}, {"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 1, "creation_date": 1529068236, "post_id": 50846530, "comment_id": 88754298, "body": "1. what did you mean about the JSON type in Python, may be you can help me to read about it. is the dict. Other comments is good and interesting as your answer, thank you."}], "tags": [], "owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "is_accepted": true, "score": 24, "last_activity_date": 1578586201, "last_edit_date": 1578586201, "creation_date": 1528925231, "answer_id": 50846530, "question_id": 50846431, "link": "https://stackoverflow.com/questions/50846431/converting-a-yaml-file-to-python-json-object/50846530#50846530", "title": "Converting a YAML file to Python JSON object", "body": "<p>you can use <a href=\"https://github.com/yaml/pyyaml\" rel=\"noreferrer\">PyYAML</a></p>\n\n<pre><code>pip install PyYAML\n</code></pre>\n\n<p>And in the ipython console:</p>\n\n<pre><code>In [1]: import yaml\n\nIn [2]: document = \"\"\"Section:\n   ...:     heading: Heading 1\n   ...:     font: \n   ...:         name: Times New Roman\n   ...:         size: 22\n   ...:         color_theme: ACCENT_2\n   ...: \n   ...: SubSection:\n   ...:     heading: Heading 3\n   ...:     font:\n   ...:         name: Times New Roman\n   ...:         size: 15\n   ...:         color_theme: ACCENT_2\n   ...: Paragraph:\n   ...:     font:\n   ...:         name: Times New Roman\n   ...:         size: 11\n   ...:         color_theme: ACCENT_2\n   ...: Table:\n   ...:     style: MediumGrid3-Accent2\"\"\"\n   ...:     \n\nIn [3]: yaml.load(document)\nOut[3]: \n{'Paragraph': {'font': {'color_theme': 'ACCENT_2',\n   'name': 'Times New Roman',\n   'size': 11}},\n 'Section': {'font': {'color_theme': 'ACCENT_2',\n   'name': 'Times New Roman',\n   'size': 22},\n  'heading': 'Heading 1'},\n 'SubSection': {'font': {'color_theme': 'ACCENT_2',\n   'name': 'Times New Roman',\n   'size': 15},\n  'heading': 'Heading 3'},\n 'Table': {'style': 'MediumGrid3-Accent2'}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 7400111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad63f3a33f128a2f5b413513b0c57445?s=128&d=identicon&r=PG&f=1", "display_name": "Vemund Kvam", "link": "https://stackoverflow.com/users/7400111/vemund-kvam"}, "reply_to_user": {"reputation": 3207, "user_id": 8079103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tWyyz.jpg?s=128&g=1", "display_name": "G_M", "link": "https://stackoverflow.com/users/8079103/g-m"}, "edited": false, "score": 0, "creation_date": 1528925990, "post_id": 50846553, "comment_id": 88696850, "body": "I agree, it&#39;s a more clear answer. I&#39;ll leave my answer here since it includes the file handling part, although it was not asked specifically for it is probably needed more often than not."}, {"owner": {"reputation": 309, "user_id": 7400111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad63f3a33f128a2f5b413513b0c57445?s=128&d=identicon&r=PG&f=1", "display_name": "Vemund Kvam", "link": "https://stackoverflow.com/users/7400111/vemund-kvam"}, "reply_to_user": {"reputation": 3207, "user_id": 8079103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tWyyz.jpg?s=128&g=1", "display_name": "G_M", "link": "https://stackoverflow.com/users/8079103/g-m"}, "edited": false, "score": 0, "creation_date": 1528927799, "post_id": 50846553, "comment_id": 88697488, "body": "I copied the pip install part when you mentioned the other answer being cleared, thanks."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 1, "creation_date": 1528960954, "post_id": 50846553, "comment_id": 88706170, "body": "PyYAML&#39;s <code>load()</code> is documented to be unsafe, and there is no excuse for using it instead of <code>safe_load()</code> here (or almost anywhere else). You fail to mention that PyYAML only supports the old, pre-2009, YAML 1.1 specification."}, {"owner": {"reputation": 309, "user_id": 7400111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad63f3a33f128a2f5b413513b0c57445?s=128&d=identicon&r=PG&f=1", "display_name": "Vemund Kvam", "link": "https://stackoverflow.com/users/7400111/vemund-kvam"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 1, "creation_date": 1529312854, "post_id": 50846553, "comment_id": 88811863, "body": "I had no idea, I&#39;ll include it in the answer, thanks."}, {"owner": {"reputation": 791, "user_id": 1434495, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7737865536963b9e349ca1cce716084a?s=128&d=identicon&r=PG", "display_name": "Flair", "link": "https://stackoverflow.com/users/1434495/flair"}, "edited": false, "score": 0, "creation_date": 1584036234, "post_id": 50846553, "comment_id": 107320547, "body": "For tracking the PyYaml specs: <a href=\"https://github.com/yaml/pyyaml/issues/116\" rel=\"nofollow noreferrer\">github.com/yaml/pyyaml/issues/116</a>"}], "tags": [], "owner": {"reputation": 309, "user_id": 7400111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad63f3a33f128a2f5b413513b0c57445?s=128&d=identicon&r=PG&f=1", "display_name": "Vemund Kvam", "link": "https://stackoverflow.com/users/7400111/vemund-kvam"}, "is_accepted": false, "score": 19, "last_activity_date": 1529313520, "last_edit_date": 1529313520, "creation_date": 1528925352, "answer_id": 50846553, "question_id": 50846431, "link": "https://stackoverflow.com/questions/50846431/converting-a-yaml-file-to-python-json-object/50846553#50846553", "title": "Converting a YAML file to Python JSON object", "body": "<p>The PyYAML library is intended for this purpose</p>\n\n<pre><code>pip install pyyaml\n</code></pre>\n\n\n\n<pre><code>import yaml\nimport json\nwith open(\"example.yaml\", 'r') as yaml_in, open(\"example.json\", \"w\") as json_out:\n    yaml_object = yaml.safe_load(yaml_in) # yaml_object will be a list or a dict\n    json.dump(yaml_object, json_out)\n</code></pre>\n\n<p>Notes: PyYAML only supports the pre-2009, YAML 1.1 specification.<br/>ruamel.yaml is an option if YAML 1.2 is required.</p>\n\n<pre><code>pip install ruamel.yaml\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 2, "creation_date": 1528961043, "post_id": 50846662, "comment_id": 88706229, "body": "PyYAML&#39;s <code>load()</code> is documented to be unsafe, and there is no excuse for using it instead of <code>safe_load()</code> here (or almost anywhere else). Like many others you fail to mention that PyYAML only supports the old, pre-2009, YAML 1.1 specification."}], "tags": [], "owner": {"reputation": 39, "user_id": 5157944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02680a13eb6f1f2c958c2036fe8678d3?s=128&d=identicon&r=PG&f=1", "display_name": "Yuancheng", "link": "https://stackoverflow.com/users/5157944/yuancheng"}, "is_accepted": false, "score": 3, "last_activity_date": 1528925952, "creation_date": 1528925952, "answer_id": 50846662, "question_id": 50846431, "link": "https://stackoverflow.com/questions/50846431/converting-a-yaml-file-to-python-json-object/50846662#50846662", "title": "Converting a YAML file to Python JSON object", "body": "<p>In python3 you can use <a href=\"https://pyyaml.org/wiki/PyYAMLDocumentation\" rel=\"nofollow noreferrer\">pyyaml</a>.</p>\n\n<pre><code>$ pip3 install pyyaml\n</code></pre>\n\n<p>Then you load your yaml file and dump it into json:</p>\n\n<pre><code>import yaml, json\n\nwith open('./file.yaml') as f:\n    print(json.dumps(yaml.load(f)))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\"Section\": null, \"heading\": \"Heading 1\", \"font\": {\"name\": \"Times New Roman\", \"size\": 22, \"color_theme\": \"ACCENT_2\"}, \"SubSection\": {\"heading\": \"Heading 3\", \"font\": {\"name\": \"Times New Roman\", \"size\": 15, \"color_theme\": \"ACCENT_2\"}}, \"Paragraph\": {\"font\": {\"name\": \"Times New Roman\", \"size\": 11, \"color_theme\": \"ACCENT_2\"}}, \"Table\": {\"style\": \"MediumGrid3-Accent2\"}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 2115958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a075d639888d436157cde3dcd9c4a94f?s=128&d=identicon&r=PG", "display_name": "Mohd", "link": "https://stackoverflow.com/users/2115958/mohd"}, "edited": false, "score": 0, "creation_date": 1588778133, "post_id": 50851671, "comment_id": 109031171, "body": "Thanks for sharing. Great deal of Help!"}, {"owner": {"reputation": 3450, "user_id": 948866, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/51be4b39df7f8f8c5bc66c9767324f3c?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/948866/dave"}, "edited": false, "score": 0, "creation_date": 1617466287, "post_id": 50851671, "comment_id": 118313897, "body": "Thanks for developing a modern and higher-quality package. PyYAML is not abandonware, the latest release (5.4.1) is Jan 2021.  Did you submit PRs only to have them rejected, or did you fork without trying to fix the original?"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 3450, "user_id": 948866, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/51be4b39df7f8f8c5bc66c9767324f3c?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/948866/dave"}, "edited": false, "score": 0, "creation_date": 1617483448, "post_id": 50851671, "comment_id": 118318612, "body": "@Dave PRs were not rejected, there was just no answer for several years and then the project was moved and open PRs and issues dropped in the process I haven&#39;t seen anything that IMO warrants a major version number change since 3.12, and PyYAML is still on the standard that was superseded in 2009."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 9, "last_activity_date": 1528961359, "last_edit_date": 1528961359, "creation_date": 1528960549, "answer_id": 50851671, "question_id": 50846431, "link": "https://stackoverflow.com/questions/50846431/converting-a-yaml-file-to-python-json-object/50851671#50851671", "title": "Converting a YAML file to Python JSON object", "body": "<p>There is no such thing as a Python JSON object. JSON is a language independent file format that finds its roots in JavaScript, and is supported by many languages.</p>\n\n<p>If your YAML document adheres to the old 1.1 standard, i.e. pre-2009, you can use PyYAML as suggested by some of the other answers. </p>\n\n<p>If it uses the newer YAML 1.2 specification, which made YAML into a superset of JSON, you should use <a href=\"https://pypi.org/project/ruamel.yaml/\" rel=\"noreferrer\"><code>ruamel.yaml</code></a> (disclaimer: I am the author of that package, which is a fork of PyYAML). </p>\n\n<pre><code>import ruamel.yaml\nimport json\n\nin_file = 'input.yaml'\nout_file = 'output.json'\n\nyaml = ruamel.yaml.YAML(typ='safe')\nwith open(in_file) as fpi:\n    data = yaml.load(fpi)\nwith open(out_file, 'w') as fpo:\n    json.dump(data, fpo, indent=2)\n</code></pre>\n\n<p>which generates <code>output.json</code>:</p>\n\n<pre><code>{\n  \"Section\": {\n    \"heading\": \"Heading 1\",\n    \"font\": {\n      \"name\": \"Times New Roman\",\n      \"size\": 22,\n      \"color_theme\": \"ACCENT_2\"\n    }\n  },\n  \"SubSection\": {\n    \"heading\": \"Heading 3\",\n    \"font\": {\n      \"name\": \"Times New Roman\",\n      \"size\": 15,\n      \"color_theme\": \"ACCENT_2\"\n    }\n  },\n  \"Paragraph\": {\n    \"font\": {\n      \"name\": \"Times New Roman\",\n      \"size\": 11,\n      \"color_theme\": \"ACCENT_2\"\n    }\n  },\n  \"Table\": {\n    \"style\": \"MediumGrid3-Accent2\"\n  }\n}\n</code></pre>\n\n<p><code>ruamel.yaml</code>, apart from supporting YAML 1.2, has many PyYAML bugs fixed. You should also note that PyYAML's <code>load()</code> is also documented to be unsafe, if you don't have full control over the input at all times. PyYAML also loads scalar numbers <code>021</code> as integer <code>17</code> instead of <code>21</code> and <a href=\"https://stackoverflow.com/questions/36463531/pyyaml-automatically-converting-certain-keys-to-boolean-values\">converts scalar strings like <code>on</code>, <code>yes</code>, <code>off</code> to boolean</a> values (resp. <code>True</code>, <code>True</code> and <code>False</code>).</p>\n"}], "owner": {"reputation": 776, "user_id": 9064794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVG97.jpg?s=128&g=1", "display_name": "ReKx", "link": "https://stackoverflow.com/users/9064794/rekx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36446, "favorite_count": 8, "accepted_answer_id": 50846530, "answer_count": 4, "score": 22, "last_activity_date": 1578586201, "creation_date": 1528924753, "last_edit_date": 1528960999, "question_id": 50846431, "link": "https://stackoverflow.com/questions/50846431/converting-a-yaml-file-to-python-json-object", "title": "Converting a YAML file to Python JSON object", "body": "<p>How can I load a YAML file and convert it to a Python JSON object?</p>\n\n<p>My YAML file looks like this:</p>\n\n<pre><code>Section:\n    heading: Heading 1\n    font: \n        name: Times New Roman\n        size: 22\n        color_theme: ACCENT_2\n\nSubSection:\n    heading: Heading 3\n    font:\n        name: Times New Roman\n        size: 15\n        color_theme: ACCENT_2\nParagraph:\n    font:\n        name: Times New Roman\n        size: 11\n        color_theme: ACCENT_2\nTable:\n    style: MediumGrid3-Accent2\n</code></pre>\n"}, {"tags": ["python", "json", "aws-lambda", "aws-api-gateway"], "comments": [{"owner": {"reputation": 736, "user_id": 3776268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd4b847f9cd1558b243ecb35bf3221?s=128&d=identicon&r=PG&f=1", "display_name": "sehafoc", "link": "https://stackoverflow.com/users/3776268/sehafoc"}, "edited": false, "score": 0, "creation_date": 1528925130, "post_id": 50846418, "comment_id": 88696506, "body": "You can&#39;t just keep removing the garbage until it&#39;s clean?  Like: body.replace(&#39;\\&quot;&#39;, &#39;&#39;).replace(&#39;\\n&#39;, &#39;&#39;)......"}, {"owner": {"reputation": 3977, "user_id": 399696, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/giWo4.png?s=128&g=1", "display_name": "dgig", "link": "https://stackoverflow.com/users/399696/dgig"}, "edited": false, "score": 0, "creation_date": 1528925237, "post_id": 50846418, "comment_id": 88696541, "body": "Check out this one, I think you need to convert the string first , then you an do normal json decoding: <a href=\"https://stackoverflow.com/questions/24242433/python-how-to-convert-a-raw-string-into-a-normal-string\" title=\"python how to convert a raw string into a normal string\">stackoverflow.com/questions/24242433/&hellip;</a> (maybe this answer is best: <a href=\"https://stackoverflow.com/a/24242596/399696\">stackoverflow.com/a/24242596/399696</a>). There&#39;s a python 3 version as well."}, {"owner": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "reply_to_user": {"reputation": 736, "user_id": 3776268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd4b847f9cd1558b243ecb35bf3221?s=128&d=identicon&r=PG&f=1", "display_name": "sehafoc", "link": "https://stackoverflow.com/users/3776268/sehafoc"}, "edited": false, "score": 0, "creation_date": 1528932961, "post_id": 50846418, "comment_id": 88698777, "body": "@sehafoc you should never try to modify JSON-in-JSON with string replacement manipulation.  That isn&#39;t garbage."}, {"owner": {"reputation": 3207, "user_id": 8079103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tWyyz.jpg?s=128&g=1", "display_name": "G_M", "link": "https://stackoverflow.com/users/8079103/g-m"}, "edited": false, "score": 0, "creation_date": 1528950957, "post_id": 50846418, "comment_id": 88702135, "body": "<a href=\"https://docs.aws.amazon.com/lambda/latest/dg/python-programming-model-handler-types.html\" rel=\"nofollow noreferrer\">&quot;event \u2013 AWS Lambda uses this parameter to pass in event data to the handler. This parameter is usually of the Python dict type&quot;</a>. You said below that the output in your question is from <code>json.dumps(event)</code>, isn&#39;t <code>event</code> already a Python dict?"}, {"owner": {"reputation": 736, "user_id": 3776268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd4b847f9cd1558b243ecb35bf3221?s=128&d=identicon&r=PG&f=1", "display_name": "sehafoc", "link": "https://stackoverflow.com/users/3776268/sehafoc"}, "reply_to_user": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 1, "creation_date": 1529096416, "post_id": 50846418, "comment_id": 88767436, "body": "@Michael-sqlbot That&#39;s sound advice, The body JSON section looks like it&#39;s be grabbed as an output of a pretty printer or something, which would violate JSON rules.  Though in my tests everything json.loads() cleanly anyways.  Which lead me to believe there is something else there."}, {"owner": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "reply_to_user": {"reputation": 736, "user_id": 3776268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd4b847f9cd1558b243ecb35bf3221?s=128&d=identicon&r=PG&f=1", "display_name": "sehafoc", "link": "https://stackoverflow.com/users/3776268/sehafoc"}, "edited": false, "score": 0, "creation_date": 1529104039, "post_id": 50846418, "comment_id": 88769306, "body": "@sehafoc this is just a normal SNS event notification with multiple layers of JSON encoding.  A surprising number of people are stumped by this.  Cloudwatch creates the message, sends it to SNS, which expects <i>text</i>, not JSON (so it&#39;s stringified = pass 1).  SNS sends an event notification, which is wraps the text into a JSON wrapper (pass 2).  API Gateway passes the body to Lambda, inside a JSON object (pass 3).  Peeling back the layers with <code>json.loads()</code> creates the correct objects.  Pseudocode: parse(parse(parse(event).body).Message) gives you the inner message."}, {"owner": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1529104105, "post_id": 50846418, "comment_id": 88769319, "body": "...but since event is already parsed from JSON by Lambda, it&#39;s just parse(parse(event.body).Message)."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9938397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d60307136f69e6f7778615adfabce9?s=128&d=identicon&r=PG&f=1", "display_name": "user212869", "link": "https://stackoverflow.com/users/9938397/user212869"}, "edited": false, "score": 0, "creation_date": 1528942479, "post_id": 50846536, "comment_id": 88700512, "body": "Yeah, what I pasted was the json.dumps(event) output.   Printing out event directly ports it out as unicode.  Whenever I execute what you have, I get <code>ValueError: Expecting : delimiter: line 42 column 27 (char 2808)</code>.  How would you suggest I convert the input variable to a raw string in the script?  Thanks!"}, {"owner": {"reputation": 370, "user_id": 283285, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/34c0f67ff1e89e60db668bd68145512d?s=128&d=identicon&r=PG", "display_name": "powo", "link": "https://stackoverflow.com/users/283285/powo"}, "reply_to_user": {"reputation": 11, "user_id": 9938397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d60307136f69e6f7778615adfabce9?s=128&d=identicon&r=PG&f=1", "display_name": "user212869", "link": "https://stackoverflow.com/users/9938397/user212869"}, "edited": false, "score": 0, "creation_date": 1528957422, "post_id": 50846536, "comment_id": 88704380, "body": "Since <code>event</code> is already a python dict, all you may need is <code>json.loads(event[&#39;body&#39;])</code>"}], "tags": [], "owner": {"reputation": 370, "user_id": 283285, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/34c0f67ff1e89e60db668bd68145512d?s=128&d=identicon&r=PG", "display_name": "powo", "link": "https://stackoverflow.com/users/283285/powo"}, "is_accepted": false, "score": 1, "last_activity_date": 1528925282, "creation_date": 1528925282, "answer_id": 50846536, "question_id": 50846418, "link": "https://stackoverflow.com/questions/50846418/how-can-i-format-this-json-string-into-a-json-object/50846536#50846536", "title": "How can I format this JSON String into a JSON object?", "body": "<p>if i use your pasted sample as a <strong>raw string</strong>, it works well:</p>\n\n<pre><code>&gt;&gt;&gt; j = r'''...your sample pasted here...'''\n&gt;&gt;&gt; data = json.loads(j)\n&gt;&gt;&gt; bodydata = json.loads(data['body'])\n&gt;&gt;&gt; bodydata['Type']\nu'Notification'\n</code></pre>\n\n<p>seems, that what you pasted above is the <code>repr</code> form, printed out with Python</p>\n"}], "owner": {"reputation": 11, "user_id": 9938397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d60307136f69e6f7778615adfabce9?s=128&d=identicon&r=PG&f=1", "display_name": "user212869", "link": "https://stackoverflow.com/users/9938397/user212869"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1460, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528925282, "creation_date": 1528924653, "question_id": 50846418, "link": "https://stackoverflow.com/questions/50846418/how-can-i-format-this-json-string-into-a-json-object", "title": "How can I format this JSON String into a JSON object?", "body": "<p>I have the following JSON document being sent from an SNS HTTPs subscription to an API Gateway endpoint (backed by a Python2.7 Lambda function).  In this case, I have a Cloudwatch Alarm that's configured to send to SNS, which then sends to this Gateway endpoint.  SNS packages that alarm (which is JSON) into the \"body\" field of the message it sends to Gateway. </p>\n\n<p>I need to extract the JSON document out of the \"body\" field, but by this point it's been properly mangled with escape characters and new lines and json.loads() is not liking it at all.  </p>\n\n<p>How can I read the value of \"body\" back into a JSON document using Python2.7 within a Lambda function?  I've tried cleaning it by removing '\\n' and '\\', but I'm just striking out!</p>\n\n<p>Here is the JSON as received by Lambda:</p>\n\n<pre><code>{\n\"body\": \"{\\n  \\\"Type\\\" : \\\"Notification\\\",\\n  \\\"MessageId\\\" : \\\"944c9xxx3-c98d636ff2c7\\\",\\n  \\\"TopicArn\\\" : \\\"arn:aws:sns:us-west-2:xxx6xx:sxxxr-sns-topic\\\",\\n  \\\"Subject\\\" : \\\"ALARM: \\\\\\\"hhh\\\\\\\" in US West (Oregon)\\\",\\n  \\\"Message\\\" : \\\"{\\\\\\\"AlarmName\\\\\\\":\\\\\\\"hhh\\\\\\\",\\\\\\\"AlarmDescription\\\\\\\":null,\\\\\\\"AWSAccountId\\\\\\\":\\\\\\\"8xxx\\\\\\\",\\\\\\\"NewStateValue\\\\\\\":\\\\\\\"ALARM\\\\\\\",\\\\\\\"NewStateReason\\\\\\\":\\\\\\\"Threshold Crossed: 1 out of the last 1 datapoints [0.333370380661336 (13/06/18 18:06:00)] was greater than or equal to the threshold (0.1) (minimum 1 datapoint for OK -&gt; ALARM transition).\\\\\\\",\\\\\\\"StateChangeTime\\\\\\\":\\\\\\\"2018-06-13T18:16:56.457+0000\\\\\\\",\\\\\\\"Region\\\\\\\":\\\\\\\"US West (Oregon)\\\\\\\",\\\\\\\"OldStateValue\\\\\\\":\\\\\\\"INSUFFICIENT_DATA\\\\\\\",\\\\\\\"Trigger\\\\\\\":{\\\\\\\"MetricName\\\\\\\":\\\\\\\"CPUUtilization\\\\\\\",\\\\\\\"Namespace\\\\\\\":\\\\\\\"AWS/EC2\\\\\\\",\\\\\\\"StatisticType\\\\\\\":\\\\\\\"Statistic\\\\\\\",\\\\\\\"Statistic\\\\\\\":\\\\\\\"AVERAGE\\\\\\\",\\\\\\\"Unit\\\\\\\":null,\\\\\\\"Dimensions\\\\\\\":[{\\\\\\\"name\\\\\\\":\\\\\\\"InstanceId\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"i-07bxxx26\\\\\\\"}],\\\\\\\"Period\\\\\\\":300,\\\\\\\"EvaluationPeriods\\\\\\\":1,\\\\\\\"ComparisonOperator\\\\\\\":\\\\\\\"GreaterThanOrEqualToThreshold\\\\\\\",\\\\\\\"Threshold\\\\\\\":0.1,\\\\\\\"TreatMissingData\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"EvaluateLowSampleCountPercentile\\\\\\\":\\\\\\\"\\\\\\\"}}\\\",\\n  \\\"Timestamp\\\" : \\\"2018-06-13T18:16:56.486Z\\\",\\n  \\\"SignatureVersion\\\" : \\\"1\\\",\\n  \\\"Signature\\\" : \\\"fFunXkjjxxxvF7Kmxxx\\\",\\n  \\\"SigningCertURL\\\" : \\\"https://sns.us-west-2.amazonaws.com/SimpleNotificationService-xxx.pem\\\",\\n  \\\"UnsubscribeURL\\\" : \\\"https://sns.us-west-2.amazonaws.com/?Action=Unsubscribe&amp;SubscriptionArn=axxxd\\\"\\n}\",\n\"resource\": \"/message\",\n\"requestContext\": {\n    \"requestTime\": \"13/Jun/2018:18:16:56 +0000\",\n    \"protocol\": \"HTTP/1.1\",\n    \"resourceId\": \"m4sxxxq\",\n    \"apiId\": \"2v2cthhh\",\n    \"resourcePath\": \"/message\",\n    \"httpMethod\": \"POST\",\n    \"requestId\": \"f41e8-8cbd-57ad9e625d12\",\n    \"extendedRequestId\": \"xxx\",\n    \"path\": \"/stage/message\",\n    \"stage\": \"stage\",\n    \"requestTimeEpoch\": 1528913816627,\n    \"identity\": {\n        \"userArn\": null,\n        \"cognitoAuthenticationType\": null,\n        \"accessKey\": null,\n        \"caller\": null,\n        \"userAgent\": \"Amazon Simple Notification Service Agent\",\n        \"user\": null,\n        \"cognitoIdentityPoolId\": null,\n        \"cognitoIdentityId\": null,\n        \"cognitoAuthenticationProvider\": null,\n        \"sourceIp\": \"xxx\",\n        \"accountId\": null\n    },\n    \"accountId\": \"xxx\"\n},\n\"queryStringParameters\": {\n    \"id\": \"CBxxx69\"\n},\n\"httpMethod\": \"POST\",\n\"pathParameters\": null,\n\"headers\": {\n    \"Content-Type\": \"text/plain; charset=UTF-8\",\n    \"Via\": \"1.1 xxx.cloudfront.net (CloudFront)\",\n    \"Accept-Encoding\": \"gzip,deflate\",\n    \"CloudFront-Is-SmartTV-Viewer\": \"false\",\n    \"x-amz-sns-subscription-arn\": \"arn:aws:sns:us-west-2:xxx:sxxx-nxxx-sns-topic:xxx\",\n    \"CloudFront-Forwarded-Proto\": \"https\",\n    \"X-Forwarded-For\": \"54.240.xxx, 54.182.xxx\",\n    \"CloudFront-Viewer-Country\": \"US\",\n    \"User-Agent\": \"Amazon Simple Notification Service Agent\",\n    \"X-Amzn-Trace-Id\": \"Root=1-5b21xxx53acea6642317ed4\",\n    \"x-amz-sns-topic-arn\": \"arn:aws:sns:us-west-2:xxxx:sxxxier-sns-topic\",\n    \"Host\": \"2vxxx.execute-api.us-west-2.amazonaws.com\",\n    \"X-Forwarded-Proto\": \"https\",\n    \"X-Amz-Cf-Id\": \"xxx\",\n    \"CloudFront-Is-Tablet-Viewer\": \"false\",\n    \"X-Forwarded-Port\": \"443\",\n    \"x-amz-sns-message-type\": \"Notification\",\n    \"CloudFront-Is-Mobile-Viewer\": \"false\",\n    \"x-amz-sns-message-id\": \"xxx\",\n    \"CloudFront-Is-Desktop-Viewer\": \"true\"\n},\n\"stageVariables\": null,\n\"path\": \"/message\",\n\"isBase64Encoded\": false\n}\n</code></pre>\n"}, {"tags": ["python", "django", "nginx", "websocket", "wss"], "owner": {"reputation": 71, "user_id": 6011788, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BVdEvUte4eg/AAAAAAAAAAI/AAAAAAAAAR4/24Ty9xbhpNo/photo.jpg?sz=128", "display_name": "H&#233;ctor Miquel Vidal", "link": "https://stackoverflow.com/users/6011788/h%c3%a9ctor-miquel-vidal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1570, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528924617, "creation_date": 1528924617, "question_id": 50846407, "link": "https://stackoverflow.com/questions/50846407/websocket-error-in-connection-establishment-neterr-cert-authority-invalid", "title": "WebSocket \u2013 Error in connection establishment: net::ERR_CERT_AUTHORITY_INVALID", "body": "<p>after adding the SSL certificates, we are getting the following error in our chat:</p>\n\n<blockquote>\n  <p>WebSocket connection to\n  'wss://ec2-XXXXXXX.us-east-2.compute.amazonaws.com:5002/ws/blablablabla/'\n  failed: Error in connection establishment:\n  net::ERR_CERT_AUTHORITY_INVALID</p>\n</blockquote>\n\n<p>We are using nginx, django and websockets. The chat is based on the following repository:</p>\n\n<p><a href=\"https://github.com/Bearle/django-private-chat\" rel=\"nofollow noreferrer\">https://github.com/Bearle/django-private-chat</a></p>\n\n<p>See here screenshot of the browser's log:</p>\n\n<p><a href=\"https://drive.google.com/file/d/1S3WiUlALcNfYEKo3SENMmga9ktDUaNgb/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1S3WiUlALcNfYEKo3SENMmga9ktDUaNgb/view?usp=sharing</a></p>\n\n<p>Has anyone experienced anything similar? Please, let me know if you need more details of the set up.</p>\n\n<p>See below our nginx configuration</p>\n\n<pre><code>    listen 443 ssl; # managed by Certbot\n    ssl_certificate /etc/letsencrypt/live/casista.com-0001/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/casista.com-0001/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    upstream chatserver {\n    server ec2-13-58-129-240.us-east-2.compute.amazonaws.com:8765;\n    }\n\n    client_max_body_size 4G;\n\n    access_log /var/log/nginx/casista-access.log;\n    error_log /var/log/nginx/casista-error.log;\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n\n    location / {\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto https;\n            proxy_set_header Host $host;\n            proxy_redirect off;\n\n            if (!-f $request_filename) {\n                    proxy_pass http://unix:/home/ubuntu/mywasi-root/mywasi/mywasi.sock;\n                    break;\n            }\n\n            # include proxy_params;\n\n    location /ws {\n            # proxy_pass http://ec2-13-58-129-240.us-east-2.compute.amazonaws.com:8765;\n            proxy_pass http://chatserver;\n            # proxy_pass http://localhost:8765;\n            proxy_connect_timeout 7d;\n            proxy_read_timeout 7d;\n            proxy_send_timeout 7d;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection \"upgrade\";\n\n    }\n\n            auth_basic \"Restricted content\";\n            auth_basic_user_file /etc/nginx/.htpasswd;\n    }\n\n    location /static/ {\n            alias /home/ubuntu/mywasi-root/mywasi/staticfiles/;\n            autoindex off;\n    }\n\n    location /media/ {\n            alias /home/ubuntu/mywasi-root/mywasi/media/;\n            autoindex off;\n    }\n</code></pre>\n"}, {"tags": ["python", "django", "nltk", "virtualenv"], "comments": [{"owner": {"reputation": 148, "user_id": 9901419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a44d48ebabb8d509e2c52d3ce9c4e8?s=128&d=identicon&r=PG&f=1", "display_name": "F. Elliot", "link": "https://stackoverflow.com/users/9901419/f-elliot"}, "edited": false, "score": 0, "creation_date": 1528925759, "post_id": 50846300, "comment_id": 88696755, "body": "When you say you are &#39;typing python in the virtualenv&#39; do you mean you are activating the virtual env? e.g. in cmd line you are typing something like &quot;virtualenv\\Scripts\\activate&quot;."}, {"owner": {"reputation": 516, "user_id": 7837036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-me_lN2czQxc/AAAAAAAAAAI/AAAAAAAAAKE/3shrbWwEj_8/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/7837036/sean"}, "reply_to_user": {"reputation": 148, "user_id": 9901419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a44d48ebabb8d509e2c52d3ce9c4e8?s=128&d=identicon&r=PG&f=1", "display_name": "F. Elliot", "link": "https://stackoverflow.com/users/9901419/f-elliot"}, "edited": false, "score": 0, "creation_date": 1528926126, "post_id": 50846300, "comment_id": 88696915, "body": "After I have activated the virtualenv, i then run the Python shell"}], "owner": {"reputation": 516, "user_id": 7837036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-me_lN2czQxc/AAAAAAAAAAI/AAAAAAAAAKE/3shrbWwEj_8/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/7837036/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529031528, "creation_date": 1528924104, "last_edit_date": 1529031528, "question_id": 50846300, "link": "https://stackoverflow.com/questions/50846300/different-installations-of-python-on-web-server-ntlk-installation-issue", "title": "Different installations of Python on web server - NTLK installation issue", "body": "<p>I am new to web development. I am having an issue importing nltk in Python when I access my shared web hosting account (Linux) with Putty.</p>\n\n<p>I have a shared hosting account and I have several domains. I have started trying to develop a couple of site using Django: let's call them Site1 and Site2. I have separate virtualenvs for Site1 and Site2.</p>\n\n<p>I have in the shared \"base\" directory an installation of Python3.6.</p>\n\n<p>I then have separate installations of Python in the virtualenv bin folders for site1 and site2.</p>\n\n<p>I am trying to install NLTK on Site1. I have done the following:\n(1) Accessed the server through Putty.\n(2) Run the virtualenv for Site1.\n(3) Typed <code>pip install nltk</code>. \n- The package is saved to the <code>/site1-virtualenv/lib/python3.6/site-packages</code> directory. I presume the PIP command is linked to the Python installation for Site1.\n(4) To download the NLTK Data, I run the Python shell by typing <code>python</code> in the Site1 virtualenv. When I type <code>import nltk</code> in the python shell, I get error:</p>\n\n<pre><code>Traceback (most recent call last): File \"&lt;stdin&gt;\", line 1,\n in &lt;module&gt; ModuleNotFoundError: No module named 'nltk'\n</code></pre>\n\n<p>I think this is because the 'python' command is running the installation of Python in the base directory of the shared hosting account; and not the installation of Python in the virtualenv for Site1.</p>\n\n<p>How do I fix this issue? I realise I am probably making several bad decisions.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528924317, "post_id": 50846296, "comment_id": 88696195, "body": "If the answers say to use <code>default=uuid.uuid4()</code>, why are you using <code>default=uuid.uuid4</code>? There&#39;s a big difference between the function object, and the UUID object that you get from calling the function. (Although it seems unlikely to me that <code>default=uuid.uuid4()</code> really would be correct, because this would just give the same UUID to everyone\u2026)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528924531, "post_id": 50846296, "comment_id": 88696287, "body": "Looking at <a href=\"https://docs.djangoproject.com/en/1.9/ref/models/fields/#uuidfield\" rel=\"nofollow noreferrer\">the docs</a>, <code>uuid.uuid4</code> is not only correct, it&#39;s the default default if you don&#39;t specify one. So, unless your Django installation is completely broken, I suspect you&#39;re doing something wrong somewhere else. Can you give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem?"}, {"owner": {"reputation": 85, "user_id": 9904463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d79b718c25fcd83d1d963757a4b28f?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/9904463/marcus"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528924675, "post_id": 50846296, "comment_id": 88696342, "body": "@abarnert : If you use <code>uuid.uuid4()</code> then it does not works. Even the <code>makemigrations</code> fails in that case"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528924807, "post_id": 50846296, "comment_id": 88696390, "body": "The only reason I even mentioned it is that your question says that lots of Stack Overflow answers say to do that. I even said it seemed unlikely that was true. But you&#39;re the one who said it, and nobody else but you can verify it, since you didn&#39;t tell us which answers or give us any links."}], "owner": {"reputation": 85, "user_id": 9904463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d79b718c25fcd83d1d963757a4b28f?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/9904463/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2453, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528924932, "creation_date": 1528924082, "last_edit_date": 1528924932, "question_id": 50846296, "link": "https://stackoverflow.com/questions/50846296/valueerror-badly-formed-hexadecimal-uuid-string-while-using-django-model-for-uu", "title": "ValueError: badly formed hexadecimal UUID string while using Django model for UUIDField", "body": "<p>I am using <code>Django==1.9</code> , My <code>models.py</code> looks something as</p>\n\n<pre><code>from __future__ import unicode_literals\n\nfrom django.db import models\nimport uuid\n\n# Create your models here.\nclass Status(models.Model):\n    id = models.UUIDField(default=uuid.uuid4, editable=False)\n    comment = models.CharField(max_length=1000, unique=True)\n</code></pre>\n\n<p>When I run <code>python manage.py migrate</code> it throws me </p>\n\n<pre><code>  File \"C:\\Python27\\Lib\\uuid.py\", line 136, in __init__\n    raise ValueError('badly formed hexadecimal UUID string')\nValueError: badly formed hexadecimal UUID string\n</code></pre>\n\n<p>Note that, The database table is not yet created in <code>sqlite3.db</code> so other answers for the similar looking question on Stack-Overflow suggests you should drop the database if exists and then migrate. But in my case the database doesn't exists as of now. </p>\n\n<p>I tried most of the Stack-Overflow answer, some suggest use <code>default=''</code> , some says <code>default=uuid.uuid4()</code> etc. Nothing works for me, that is the reason why I created a <em>new</em> question. So, please don't link to answer just by blindly looking at the title !</p>\n\n<p>The answers which I already referred to are as below:\n<a href=\"https://stackoverflow.com/questions/38459942/python-how-to-solve-the-issue-badly-formed-hexadecimal-uuid-string-in-djang\">Python: How to solve the issue : &#39;badly formed hexadecimal UUID string&#39; in Django</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/32445546/django-uuidfield-modelfield-causes-error-in-django-admin-badly-formed-hexadecim\">Django UUIDField modelfield causes error in Django admin: badly formed hexadecimal UUID string</a></p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 2254, "user_id": 5615873, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55004f62cd8635343945470993125241?s=128&d=identicon&r=PG&f=1", "display_name": "Apostolos", "link": "https://stackoverflow.com/users/5615873/apostolos"}, "edited": false, "score": 1, "creation_date": 1529048776, "post_id": 50847548, "comment_id": 88744009, "body": "Great, @Ernes. Thank you. So, the .rc files are config files using matplotlib.rcParams[]!  And  &#39;x&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39; are all lists of same length with x with y values. (If they used &#39;y1&#39;, &#39;y2&#39; and &#39;y3&#39;, it would be less confusing.). About blaming: the Matplotlib tutorial I mentioned, as all the tutorials by matplotlib.org are useful but they are very bad. They are actually references. One has to search other matplotlib reference for rexamples. And the example in question is more confusing than helping, except if someone is quite knowledgeable on matplotlib, which it seems you are."}, {"owner": {"reputation": 2254, "user_id": 5615873, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55004f62cd8635343945470993125241?s=128&d=identicon&r=PG&f=1", "display_name": "Apostolos", "link": "https://stackoverflow.com/users/5615873/apostolos"}, "edited": false, "score": 1, "creation_date": 1529049521, "post_id": 50847548, "comment_id": 88744285, "body": "Oh, I have to add this: If they couldn&#39;t provide a workable example in their &quot;tutorial&quot; page they should better not including any but adding <b>a link to an example</b>. E.g. a link to <b><a href=\"https://matplotlib.org/examples/\" rel=\"nofollow noreferrer\">matplotlib.org/examples</a></b>, also written by /matplotlib.org. This should always be the case. See, it&#39;s rather a matter of thinking or caring, not lack of space or time."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 2254, "user_id": 5615873, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55004f62cd8635343945470993125241?s=128&d=identicon&r=PG&f=1", "display_name": "Apostolos", "link": "https://stackoverflow.com/users/5615873/apostolos"}, "edited": false, "score": 0, "creation_date": 1529056987, "post_id": 50847548, "comment_id": 88748107, "body": "Matplotlib as well as its documentation are open source and community maintained. This means anyone, also you, can improve it; which people are also constantly doing, and they are not payed for it. It is quite natural that this is done mostly by people having a little more experience, so they might miss a bit or two which is important for beginners. Feel free to <a href=\"https://matplotlib.org/devel/contributing.html#other-ways-to-contribute\" rel=\"nofollow noreferrer\">contribute</a> with a suggestion on how to improve this."}, {"owner": {"reputation": 2254, "user_id": 5615873, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55004f62cd8635343945470993125241?s=128&d=identicon&r=PG&f=1", "display_name": "Apostolos", "link": "https://stackoverflow.com/users/5615873/apostolos"}, "edited": false, "score": 1, "creation_date": 1529150815, "post_id": 50847548, "comment_id": 88776845, "body": "I understand. And I would be happy to be able to contribute as you suggest, but the question is <b>how can I do that</b> if I don&#39;t have the necessary knowledge of matplotlib, which is exactly why I commented on this thread in the first place!!  This is a vicious circle! :))"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 2254, "user_id": 5615873, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55004f62cd8635343945470993125241?s=128&d=identicon&r=PG&f=1", "display_name": "Apostolos", "link": "https://stackoverflow.com/users/5615873/apostolos"}, "edited": false, "score": 0, "creation_date": 1529236053, "post_id": 50847548, "comment_id": 88792501, "body": "I suppose now that you have understood the issue you would be able to tell how the documentation should handle this instead from your point of view."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 2, "last_activity_date": 1528931488, "creation_date": 1528931488, "answer_id": 50847548, "question_id": 50846289, "link": "https://stackoverflow.com/questions/50846289/matplotlib-how-is-rc-context-used/50847548#50847548", "title": "Matplotlib - How is rc_context() used?", "body": "<p>The example you show comes from the documentation of the respective method. Such methods have little space to go into much detail, so please don't blame the people for actually providing such example in the unusual place of a method docstring. </p>\n\n<p>A more detailed explanation of the rc file, the context and examples are found in the <a href=\"https://matplotlib.org/tutorials/introductory/customizing.html\" rel=\"nofollow noreferrer\">Customizing tutorial</a> (the second tutorial in the tutorials page, little chance to miss it).</p>\n\n<p>Sticking to the case from the question, the concrete case is you have a python file which contains this code, and in addition you have two text files, named <code>screen.rc</code> and <code>print.rc</code>. </p>\n\n<p>The .py file:</p>\n\n<pre><code>import matplotlib as mpl\nimport matplotlib.pyplot as plt\n\nx = [1,2,3,4]\na = [1,2,4,4]\nb = [1,1,2,4]\nc = [2,3,3,1]\n\n\nwith mpl.rc_context(fname='screen.rc'):\n  plt.plot(x, a)\n  with mpl.rc_context(fname='print.rc'):\n    plt.plot(x, b)\n  plt.plot(x, c)\n\nplt.show()\n</code></pre>\n\n<p>The <code>screen.rc</code> file:</p>\n\n<pre><code>lines.linewidth   : 1       ## line width in points\nlines.linestyle   : -       ## linestyle \n</code></pre>\n\n<p>The <code>print.rc</code> file:</p>\n\n<pre><code>lines.linewidth   : 5       ## line width in points\nlines.linestyle   : :       ## linestyle \n</code></pre>\n\n<p>Running the py file would produce something like this as output</p>\n\n<p><a href=\"https://i.stack.imgur.com/7ecO3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7ecO3.png\" alt=\"enter image description here\"></a></p>\n\n<p>The blue line is the one created from <code>plt.plot(x, a)</code>. It has a solid linestyle and is one point wide. Similar, the green line,  <code>plt.plot(x, c)</code>, because both are inside the <code>screen.rc</code> context, but not within the <code>print.rc</code>. The orange line is the one created from within the <code>print.rc</code> context. It hence has a linewith of 5 points and is dotted.</p>\n"}], "owner": {"reputation": 2254, "user_id": 5615873, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55004f62cd8635343945470993125241?s=128&d=identicon&r=PG&f=1", "display_name": "Apostolos", "link": "https://stackoverflow.com/users/5615873/apostolos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1528931488, "creation_date": 1528924055, "question_id": 50846289, "link": "https://stackoverflow.com/questions/50846289/matplotlib-how-is-rc-context-used", "title": "Matplotlib - How is rc_context() used?", "body": "<p>In matplotlib documentation, at <a href=\"https://matplotlib.org/api/matplotlib_configuration_api.html\" rel=\"nofollow noreferrer\">https://matplotlib.org/api/matplotlib_configuration_api.html</a>, the following \"pseudo example\" is provided, followed by a short \"pseudo explanation\":</p>\n\n<pre><code>with mpl.rc_context(fname='screen.rc'):\n  plt.plot(x, a)\n  with mpl.rc_context(fname='print.rc'):\n    plt.plot(x, b)\n  plt.plot(x, c)\n</code></pre>\n\n<p><em>The 'a' vs 'x' and 'c' vs 'x' plots would have settings from 'screen.rc', while the 'b' vs 'x' plot would have settings from 'print.rc'.</em></p>\n\n<hr>\n\n<p>For me, this is an \"equation with 5 unknowns\": 'screen.rc', 'print.rc', 'a', 'b' and 'c'. More specifically: 1) what are the files 'screen.rc' 'print.rc' and where are they found or how are they created? and 2) what do the variables 'a', 'b' and 'c' represent and how are they set?</p>\n\n<p>It seems that this \"example\" is quite famous, since I have found an exact copy of it, including the short description, in a dozen of different places. What is most interesting is that no one, not even the matplotlib staff itself, cared to explain how can this stuff be actually applied.</p>\n\n<p>Is there someone who has concrete information about this example or can one give a <strong>concrete</strong> example of how is <code>rc_context()</code> used?</p>\n"}, {"tags": ["python", "bash", "ping"], "comments": [{"owner": {"reputation": 6510, "user_id": 5889131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S0TUH.jpg?s=128&g=1", "display_name": "jeremysprofile", "link": "https://stackoverflow.com/users/5889131/jeremysprofile"}, "edited": false, "score": 1, "creation_date": 1528923503, "post_id": 50846131, "comment_id": 88695852, "body": "you are continually resetting <code>response</code>. By the if statement, it is only based on the response to hostname8."}, {"owner": {"reputation": 2614, "user_id": 3254869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/O17Z7.jpg?s=128&g=1", "display_name": "zhqiat", "link": "https://stackoverflow.com/users/3254869/zhqiat"}, "edited": false, "score": 0, "creation_date": 1528923549, "post_id": 50846131, "comment_id": 88695871, "body": "Consider looping through a list and printing the response."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528924138, "post_id": 50846131, "comment_id": 88696120, "body": "As a side note: that <a href=\"https://docs.python.org/3/library/os.html#os.system\" rel=\"nofollow noreferrer\">the docs for <code>os.system</code></a> explicitly tell you that &quot;The subprocess module provides more powerful facilities for spawning new processes and retrieving their results; using that module is preferable to using this function.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 4708, "user_id": 5007059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477099189c307a35bfb73097b19af9fe?s=128&d=identicon&r=PG&f=1", "display_name": "ndmeiri", "link": "https://stackoverflow.com/users/5007059/ndmeiri"}, "is_accepted": true, "score": 4, "last_activity_date": 1617531946, "last_edit_date": 1617531946, "creation_date": 1528923552, "answer_id": 50846179, "question_id": 50846131, "link": "https://stackoverflow.com/questions/50846131/python-ping-script/50846179#50846179", "title": "Python ping script", "body": "<p>You should print the result immediately after pinging each hostname. Try this:</p>\n<pre><code>import os\n\nhostnames = [\n    '10.40.161.2',\n    '10.40.161.3',\n    '10.40.161.4',\n    '10.40.161.5',\n]\n\nfor hostname in hostnames:\n    response = os.system('ping -c 1 ' + hostname)\n    if response == 0:\n        print(hostname, 'is up')\n    else:\n        print(hostname, 'is down')\n</code></pre>\n<p>Also, you should consider using the <a href=\"https://docs.python.org/3/library/subprocess.html#module-subprocess\" rel=\"nofollow noreferrer\"><code>subprocess</code> module</a> instead of <code>os.system()</code> as the latter is deprecated.</p>\n"}], "owner": {"reputation": 29, "user_id": 9938360, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zz5CTNznaq8/AAAAAAAAAAI/AAAAAAAAAAc/aGkBW56BUm8/photo.jpg?sz=128", "display_name": "Melissa Chillington", "link": "https://stackoverflow.com/users/9938360/melissa-chillington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14152, "favorite_count": 0, "accepted_answer_id": 50846179, "answer_count": 1, "score": 1, "last_activity_date": 1617531946, "creation_date": 1528923326, "last_edit_date": 1528924167, "question_id": 50846131, "link": "https://stackoverflow.com/questions/50846131/python-ping-script", "title": "Python ping script", "body": "<p>I am trying to write a Python script that pings IP addresses and outputs whether each ping succeeded. So far I have the following code, but the output seems inaccurate. Namely, when I run the script, it pings each hostname as expected but the output is only ever all up or all down.</p>\n\n<pre><code>import os\n\nhostname0 = \"10.40.161.2\"\nhostname1 = \"10.40.161.3\"\nhostname2 = \"10.40.161.4\"\nhostname3 = \"10.40.161.5\"\n\nresponse = os.system(\"ping -c 1 \" + hostname0)\nresponse = os.system(\"ping -c 1 \" + hostname1)\nresponse = os.system(\"ping -c 1 \" + hostname2)\nresponse = os.system(\"ping -c 1 \" + hostname3)\n\nif response == 0:\n    print hostname0, 'is up'\n    print hostname1, 'is up'\n    print hostname2, 'is up'\n    print hostname3, 'is up'\nelse:\n    print hostname0, 'is down'\n    print hostname1, 'is down'\n    print hostname2, 'is down'\n    print hostname3, 'is down'\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 1, "creation_date": 1528923062, "post_id": 50846049, "comment_id": 88695675, "body": "trim the D: and use a + to combine the strings?"}, {"owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "reply_to_user": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 0, "creation_date": 1528923150, "post_id": 50846049, "comment_id": 88695710, "body": "@dfundako eh, i know about that, but i wonder if there is a more pythonic way doing this."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 4, "creation_date": 1528923208, "post_id": 50846049, "comment_id": 88695731, "body": "Joining two absolute paths makes no sense. So there is unlikely to be a standard way to do it."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 0, "creation_date": 1528923214, "post_id": 50846049, "comment_id": 88695733, "body": "@dfundako If you post that as an answer, I&#39;ll downvote it. Using <code>+</code> on file paths is just wrong. And <i>how</i> would you strip the <code>D:</code> correctly?"}, {"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1528923365, "post_id": 50846049, "comment_id": 88695791, "body": "@Aran-Fey I&#39;m sure there is a SO post out there on how to trim the first 2 chars of a string if you want to know how."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 2, "creation_date": 1528923520, "post_id": 50846049, "comment_id": 88695857, "body": "@dfundako Congratulations, your code doesn&#39;t work on linux."}, {"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 2, "creation_date": 1528923719, "post_id": 50846049, "comment_id": 88695941, "body": "@Aran-Fey The joke&#39;s on you. The code I write rarely works on any operating system."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "edited": false, "score": 0, "creation_date": 1528923466, "post_id": 50846104, "comment_id": 88695840, "body": "Thanks about this, though i will have to make my code run on both linux and windows. So would you prefer i have two methods, one for windows and one for linux than just call these 2 separately by detecting the OS?"}, {"owner": {"reputation": 2293, "user_id": 294836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39669186deaaafaa691ac0605fb0b8ce?s=128&d=identicon&r=PG", "display_name": "WombatPM", "link": "https://stackoverflow.com/users/294836/wombatpm"}, "edited": false, "score": 0, "creation_date": 1528924564, "post_id": 50846104, "comment_id": 88696295, "body": "Ask yourself if the linux problem is really the same?  The concept of drives is totally different.  You can create symbolic links to create any directory structure you want."}, {"owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "edited": false, "score": 0, "creation_date": 1528925128, "post_id": 50846104, "comment_id": 88696505, "body": "@Jean-Fran&#231;oisFabre Simple, clean and native. Thanks for the answer, this is awesome. (it makes me wonder to rewrite my whole script with your solution in mind)"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1528923789, "last_edit_date": 1528923789, "creation_date": 1528923190, "answer_id": 50846104, "question_id": 50846049, "link": "https://stackoverflow.com/questions/50846049/join-two-absolute-paths/50846104#50846104", "title": "Join two absolute paths?", "body": "<p>On Windows, I would use <code>os.path.splitdrive</code> combined with a strip of the separator</p>\n\n<pre><code>import os\n\npath1 = 'C:/folder1/folder2/'\npath2 = 'D:/directory1/directory2/'\n\nseps = os.sep+os.altsep if os.altsep else os.sep\npath3 = os.path.join(path1,os.path.splitdrive(path2)[1].lstrip(seps))  # handles / and \\ as separators on windows\n\nprint(path3)\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>C:/folder1/folder2/directory1/directory2/\n</code></pre>\n\n<p>(if the second path is a relative path, it also works)</p>\n\n<p>The <code>seps = os.sep+os.altsep if os.altsep else os.sep</code> line allows to be compatible with systems with no alternate separators (Linux). This solution works on Windows &amp; Linux, <code>os.splitdrive</code> is a dummy on Linux (returning a tuple with empty first element)</p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1528923922, "post_id": 50846228, "comment_id": 88696028, "body": "this works only in python 3. And if the second directory is relative, it &quot;eats&quot; the root dir. But yes, works. it&#39;s also good because you don&#39;t have to strip the separators,"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1528924739, "post_id": 50846228, "comment_id": 88696367, "body": "@Jean-Fran&#231;oisFabre Code supports relative paths now."}, {"owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "edited": false, "score": 0, "creation_date": 1528925213, "post_id": 50846228, "comment_id": 88696531, "body": "@Aran-Fey a nice solution, thanks, i&#39;ll remember this. Though i was avoiding the use of external libraries as i am writing this code for an extension of another software."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1528925277, "post_id": 50846228, "comment_id": 88696559, "body": "<code>Pathlib</code> isn&#39;t an external library. The only limitation is that it doesn&#39;t run on python 2. but as Blender answer states, you can get a backport."}, {"owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "edited": false, "score": 0, "creation_date": 1528925411, "post_id": 50846228, "comment_id": 88696611, "body": "@Aran-Fey exactly.. i should have noted that i must use python 2.7 :( - But i really like it.. it&#39;s very easy to understand, and i learned something today from you. Thanks for that!"}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 10, "last_activity_date": 1528924722, "last_edit_date": 1528924722, "creation_date": 1528923746, "answer_id": 50846228, "question_id": 50846049, "link": "https://stackoverflow.com/questions/50846049/join-two-absolute-paths/50846228#50846228", "title": "Join two absolute paths?", "body": "<p>Use the <a href=\"https://docs.python.org/3/library/pathlib.html\" rel=\"noreferrer\"><code>pathlib</code> module</a> to make the 2nd path relative and join it with the first one:</p>\n\n<pre><code>from pathlib import Path\n\npath1 = Path('C:/folder1/folder2/')\npath2 = Path('D:/directory1/directory2/')\n\npath3 = path1 / path2.relative_to(path2.anchor)\n# result: C:\\folder1\\folder2\\directory1\\directory2\n</code></pre>\n\n<hr>\n\n<p>To visualize what's happening, let's look at some intermediate output.</p>\n\n<p><a href=\"https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.anchor\" rel=\"noreferrer\"><code>Path.anchor</code></a> gives you the drive letter (or <code>/</code> on linux) of an absolute path. If the path is relative, it returns the empty string:</p>\n\n<pre><code>&gt;&gt;&gt; path2.anchor\n'D:\\\\'\n&gt;&gt;&gt; Path('foo').anchor\n''\n</code></pre>\n\n<p>We can use this with <a href=\"https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.relative_to\" rel=\"noreferrer\"><code>Path.relative_to</code></a> to turn <code>path2</code> into a relative path. If it was already relative, it won't be affected by this operation:</p>\n\n<pre><code>&gt;&gt;&gt; path2.relative_to(path2.anchor)\nWindowsPath('directory1/directory2')\n&gt;&gt;&gt; Path('foo').relative_to('')\nWindowsPath('foo')\n</code></pre>\n\n<p>Finally, now that we have a relative path, it can trivially be combined with <code>path1</code> with the <code>/</code> operator.</p>\n"}], "owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2776, "favorite_count": 0, "accepted_answer_id": 50846104, "answer_count": 2, "score": 1, "last_activity_date": 1528925632, "creation_date": 1528922974, "question_id": 50846049, "link": "https://stackoverflow.com/questions/50846049/join-two-absolute-paths", "title": "Join two absolute paths?", "body": "<p>How do i join two absolute paths in Python?</p>\n\n<p>e.g.</p>\n\n<pre><code>path1 = 'C:/folder1/folder2/'\npath2 = 'D:/directory1/directory2/'\n</code></pre>\n\n<p>The desired result is: <code>C:/folder1/folder2/directory1/directory2/</code></p>\n\n<p>I tried <code>os.path.join</code> but it neglects the first path because it detects it's an absolute path. So what's the best way to join paths like this in Python?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "qt", "pyqt", "qml", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9214218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decdb4f84d9676f5bddf8bf1c7d3e17a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Green", "link": "https://stackoverflow.com/users/9214218/ben-green"}, "is_accepted": true, "score": 0, "last_activity_date": 1528990583, "creation_date": 1528990583, "answer_id": 50861205, "question_id": 50846037, "link": "https://stackoverflow.com/questions/50846037/how-do-i-prevent-out-of-range-intermediate-text-values-in-a-qml-spinbox-with-a-d/50861205#50861205", "title": "How do I prevent out-of-range intermediate text values in a QML SpinBox with a DoubleValidator?", "body": "<p>I found an answer to my problem. I located the source code for the SpinBox QML element and copied the code for the TextInput <code>contentItem</code>. I then wrote a quick function in <code>onTextEdited</code> that checked the value against <code>to</code> and <code>from</code> in the SpinBox. It's not the most reusable solution, but it's all I needed. Also, make sure to import <code>QtQuick.Control.impl</code> to get the Default values.</p>\n\n<pre><code>import QtQuick.Controls.impl 2.2\n\nSpinBox {\n    id: spinbox\n\n    ...\n\n    contentItem: TextInput {\n        id: spinboxTextInput\n\n        property string oldText: spinboxTextInput.text\n\n        z: 2\n        text: spinbox.textFromValue(spinbox.value, spinbox.locale)\n        opacity: spinbox.enabled ? 1 : 0.3\n\n        font: spinbox.font\n        color: Default.textColor\n        selectionColor: Default.focusColor\n        selectedTextColor: Default.textLightColor\n        horizontalAlignment: Qt.AlignHCenter\n        verticalAlignment: Qt.AlignVCenter\n\n        readOnly: !spinbox.editable\n        validator: spinbox.validator\n        inputMethodHints: spinbox.inputMethodHints\n\n        //Check the value of the new text, and revert back if out of range\n        onTextEdited: {\n            var val = spinbox.valueFromText(spinboxTextInput.text, spinbox.locale)\n            if (val &lt; spinbox.from || val &gt; spinbox.to) {\n                spinboxTextInput.text = spinboxTextInput.oldText\n            }\n            else {\n                spinboxTextInput.oldText = spinboxTextInput.text\n            }\n        }\n\n        Rectangle {\n            x: -6 - (spinbox.down.indicator ? 1 : 0)\n            y: -6\n            width: spinbox.width - (spinbox.up.indicator ? spinbox.up.indicator.width - 1 : 0) - (spinbox.down.indicator ? spinbox.down.indicator.width - 1 : 0)\n            height: spinbox.height\n            visible: spinbox.activeFocus\n            color: \"transparent\"\n            border.color: Default.focusColor\n            border.width: 2\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9214218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decdb4f84d9676f5bddf8bf1c7d3e17a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Green", "link": "https://stackoverflow.com/users/9214218/ben-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 50861205, "answer_count": 1, "score": 0, "last_activity_date": 1528990583, "creation_date": 1528922910, "question_id": 50846037, "link": "https://stackoverflow.com/questions/50846037/how-do-i-prevent-out-of-range-intermediate-text-values-in-a-qml-spinbox-with-a-d", "title": "How do I prevent out-of-range intermediate text values in a QML SpinBox with a DoubleValidator?", "body": "<p>I'm trying to make an editable floating-point SpinBox QML element. It all works, except it's possible to type numbers such that the text in the SpinBox displays an invalid value (e.g. 105 when the max is 100). I tried to catch the key presses with Keys.onPressed, but that doesn't seem to be possible. I also tried to use a signal like onTextChanged, but that doesn't seem to exist for a SpinBox. Finally, I have tried to subclass QValidator and use that as the validator for the spinbox, but I get the \"Cannot assign object to property\" error. I assume this is because the custom validator I made is not a Validator QML type.</p>\n\n<p><strong>spinbox-test.py</strong></p>\n\n<pre><code>import sys\n\nfrom PyQt5 import QtGui\nfrom PyQt5.QtQml import QQmlApplicationEngine, qmlRegisterType\nfrom PyQt5.QtWidgets import QApplication\n\nclass MyDoubleValidator(QtGui.QValidator):\n    def __init__(self, parent=None):\n        QtGui.QValidator.__init__(self, parent)\n        print(\"Validator created\")\n\n    def validate(self, inputStr, pos):\n        print(\"validating\")\n\n        if len(inputStr) &gt; 2:\n            return (QtGui.QValidator.Invalid, pos)\n        elif len(inputStr) == 0:\n            return (Qt.QValidator.Intermediate, pos)\n        else:\n            return (Qt.Qvalidator.Acceptable, pos)\n\n\napp = QApplication(sys.argv)\n\nqmlRegisterType(MyDoubleValidator, 'MyValidators', 1, 0, 'MyDoubleValidator')\n\nengine = QQmlApplicationEngine()\nengine.load(\"spinbox-test.qml\")\n</code></pre>\n\n<p><strong>spinbox-test.qml</strong></p>\n\n<pre><code>import QtQuick 2.9\nimport QtQuick.Controls 2.2\nimport QtQuick.Layouts 1.3\nimport MyValidators 1.0\n\nApplicationWindow {\n    visible: true\n    title: qsTr(\"Spinbox Test\")\n    width: 400\n    height: 350\n    color: \"whitesmoke\"\n\n    Item {\n        id: doubleSpinbox\n\n        property int decimals: 2\n        property real realValue: 1.1\n        property real realFrom: 0.0\n        property real realTo: 100.0\n        property real realStepSize: 1.0\n\n        anchors.centerIn: parent\n\n        SpinBox {\n            id: spinbox\n\n            property real factor: Math.pow(10, doubleSpinbox.decimals)\n\n            stepSize: doubleSpinbox.realStepSize * spinbox.factor\n            value: doubleSpinbox.realValue * spinbox.factor\n            to: doubleSpinbox.realTo * spinbox.factor\n            from: doubleSpinbox.realFrom * spinbox.factor\n\n            editable: true\n\n            onValueChanged: label.text = spinbox.value / spinbox.factor\n\n            validator: MyDoubleValidator { }\n\n            textFromValue: function(value, locale) {\n                return parseFloat(spinbox.value*1.0/spinbox.factor).toFixed(doubleSpinbox.decimals);\n            }\n        }\n    }\n\n    Label {\n        id: label\n        text: doubleSpinbox.realValue\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "bar-chart"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528922911, "post_id": 50845998, "comment_id": 88695599, "body": "Can you show a desired output? Your code works for me"}, {"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528923165, "post_id": 50845998, "comment_id": 88695716, "body": "Yes, but it is histogram. What I want is bar chart"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528923194, "post_id": 50845998, "comment_id": 88695727, "body": "<code>plt.bar(months,range(1, 13))</code>?"}, {"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528923250, "post_id": 50845998, "comment_id": 88695742, "body": "it says ValueError: shape mismatch: objects cannot be broadcast to a single shape now"}, {"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528923301, "post_id": 50845998, "comment_id": 88695762, "body": "When it is hist(), it is working. Output: <a href=\"https://imgur.com/a/FHjnGrz\" rel=\"nofollow noreferrer\">imgur.com/a/FHjnGrz</a>"}], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528923537, "post_id": 50846154, "comment_id": 88695866, "body": "I am getting values from the mongodb. When I print my array, the output is: [6, 6, 6, 6, 6, 6, 6, 6, 1, 1, 6, 1, 6, 2, 1, 1, 6, 1, 6, 2, 1, 6, 6, 2, 1, 2, 1, 6, 2, 1, 1, 6, 1, 6, 3, 3, 3, 3, 3, 1, 2, 1, 3, 3, 3, 3, 3, 1, 2, 1, 3, 3, 3, 3, 3, 1, 2, 1, 6, 2, 1, 10, 6, 12, 9, 3, 3, 3, 3, 3, 1, 2, 1, 7, 8, 9, 10, 10, 11, 12, 11, 3, 3, 3, 3, 3, 1, 12, 12, 6, 2, 5, 10, 6, 12, 9, 3, 3, 3, 3, 5, 1, 2, 1, 7, 8, 9, 10, 10, 11, 12, 11, 5, 5, 3, 3, 3, 1, 12, 12]"}, {"owner": {"reputation": 7373, "user_id": 5200329, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/da6b14c198704567425703ff9507dfb4?s=128&d=identicon&r=PG", "display_name": "Bhishan Poudel", "link": "https://stackoverflow.com/users/5200329/bhishan-poudel"}, "reply_to_user": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528923615, "post_id": 50846154, "comment_id": 88695899, "body": "what you want to do with your output?"}, {"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528924447, "post_id": 50846154, "comment_id": 88696251, "body": "Your edit has solved my problem. It is better solution than Psidom&#39;s. Thanks."}], "tags": [], "owner": {"reputation": 7373, "user_id": 5200329, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/da6b14c198704567425703ff9507dfb4?s=128&d=identicon&r=PG", "display_name": "Bhishan Poudel", "link": "https://stackoverflow.com/users/5200329/bhishan-poudel"}, "is_accepted": true, "score": 2, "last_activity_date": 1528927482, "last_edit_date": 1528927482, "creation_date": 1528923428, "answer_id": 50846154, "question_id": 50845998, "link": "https://stackoverflow.com/questions/50845998/matplotlib-bar-chart-that-shows-frequency-of-unique-values/50846154#50846154", "title": "Matplotlib - bar chart that shows frequency of unique values", "body": "<p>Try this:</p>\n\n<pre><code>#!python\n# -*- coding: utf-8 -*-#\n#\n# Imports\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport collections\n\ndata = \"\"\"\nJan\nFeb\nMar\nApr\nMay\nJun\nJul\nAug\nSep\nOct\nNov\nDec\n\"\"\"\nmonths = data.split()\n\ndata = [6, 6, 6, 6, 6, 6, 6, 6, 1, 1, 6, 1, 6, 2, 1, 1, 6, 1, 6, 2, 1, 6, 6, 2, 1, 2, 1, 6, 2, 1, 1, 6, 1, 6, 3, 3, 3, 3, 3, 1, 2, 1, 3, 3, 3, 3, 3, 1, 2, 1, 3, 3, 3, 3, 3, 1, 2, 1, 6, 2, 1, 10,\n        6, 12, 9, 3, 3, 3, 3, 3, 1, 2, 1, 7, 8, 9, 10, 10, 11, 12, 11, 3, 3, 3, 3, 3, 1, 12, 12, 6, 2, 5, 10, 6, 12, 9, 3, 3, 3, 3, 5, 1, 2, 1, 7, 8, 9, 10, 10, 11, 12, 11, 5, 5, 3, 3, 3, 1, 12, 12]\n\nc = collections.Counter(data)\nc = sorted(c.items())\nmonths_num = [i[0] for i in c]\nmonth_names = [months[i[0]-1] for i in c]\nfreq = [i[1] for i in c]\n\nprint(c)\nprint(months)\nprint(freq)\nf, ax = plt.subplots()\n\n\nplt.bar(months_num, freq)\nplt.title(\"Job Request per month\")\nplt.xlabel(\"Months\")\nplt.ylabel(\"Frequency\")\nax.set_xticks(range(1, 13))\nax.set_xticklabels(months)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2FmJj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2FmJj.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528924139, "post_id": 50846293, "comment_id": 88696121, "body": "Same error :( ValueError: shape mismatch: objects cannot be broadcast to a single shape"}, {"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528924181, "post_id": 50846293, "comment_id": 88696136, "body": "Okay. Solved. <code>plt.bar(np.arange(1, 12), np.bincount(months)[1:12])</code> this has fixed the problem somehow. Thanks."}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528924288, "post_id": 50846293, "comment_id": 88696183, "body": "For the value error, I&#39;d add a <code>minlength</code> property to <code>np.bincount</code> so it will always count to 12."}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528924405, "post_id": 50846293, "comment_id": 88696230, "body": "To show odd labels, set the <code>tick_label</code> parameter. <code>plt.bar(np.arange(1, 13), np.bincount(a)[1:], tick_label=np.arange(1,13))</code>"}, {"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528924584, "post_id": 50846293, "comment_id": 88696300, "body": "Your solution is not general. I will not have always a numbers between 1-12. For example, I will have an array like [&#39;cat&#39;, &#39;cat&#39;; &#39;dog&#39;]. Your solution will not work for this case. Hence, I have chosen the other one."}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "edited": false, "score": 0, "creation_date": 1528924664, "post_id": 50846293, "comment_id": 88696336, "body": "@funky-nd Sure if that is the case, but your question says it&#39;s an array with numbers between 1-12. The advantage of this solution is that even if a month doesn&#39;t appear, it will still plot it for you. But it&#39;s ok choosing whichever solution works for you."}, {"owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "reply_to_user": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1528924694, "post_id": 50846293, "comment_id": 88696350, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/173104/discussion-between-funky-nd-and-psidom\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 3, "last_activity_date": 1528924230, "last_edit_date": 1528924230, "creation_date": 1528924067, "answer_id": 50846293, "question_id": 50845998, "link": "https://stackoverflow.com/questions/50845998/matplotlib-bar-chart-that-shows-frequency-of-unique-values/50846293#50846293", "title": "Matplotlib - bar chart that shows frequency of unique values", "body": "<p>You can use <code>np.bincount</code> to count the <code>months</code> first and then plot it:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\n# create an example months array\nmonths = np.random.randint(1, 13, size=30)\n\nplt.bar(np.arange(1, 13), np.bincount(months, minlength=13)[1:])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jqZXa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jqZXa.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 435, "user_id": 4250408, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-QvMmqp9Zgpw/AAAAAAAAAAI/AAAAAAAAAFw/EdmAHzvSOhw/photo.jpg?sz=128", "display_name": "funky-nd", "link": "https://stackoverflow.com/users/4250408/funky-nd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12926, "favorite_count": 0, "accepted_answer_id": 50846154, "answer_count": 2, "score": 3, "last_activity_date": 1528985518, "creation_date": 1528922683, "last_edit_date": 1528985518, "question_id": 50845998, "link": "https://stackoverflow.com/questions/50845998/matplotlib-bar-chart-that-shows-frequency-of-unique-values", "title": "Matplotlib - bar chart that shows frequency of unique values", "body": "<p>I have an array like:</p>\n\n<p>[1, 3, 5, 2, 12, 12, 3, 6,...] etc which varies between 1-12 that represents moths.</p>\n\n<p>Now, I can plot them with</p>\n\n<pre><code>plt.hist(months,range(1, 13))\nplt.title(\"Job Request per month\")\nplt.xlabel(\"Value\")\nplt.ylabel(\"Frequency\")\n\nplt.show()\n</code></pre>\n\n<p>Now, it shows count of unique values at histogram. However, I can't find a way for this with bar chart. </p>\n\n<p>Full Code:</p>\n\n<pre><code>from pymongo import MongoClient\nimport matplotlib.pyplot as plt\n\ndef main():\n\nclient = MongoClient('mongodb://a12345:a12345@127.0.0.1:27017/')\ndb = client['newDatabase']\ncollection = db['jobs']\ncursor = collection.find({}, {'_constructed': 1})\n\nmonths = []\nfor document in cursor:\n    if '_constructed' in document: \n        months.append(document['_constructed'].month)\n\nprint(months);\nplt.bar(months, range(1, 13))\nplt.title(\"Job Request per month\")\nplt.xlabel(\"Value\")\nplt.ylabel(\"Frequency\")\n\nplt.show()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": ["python", "django", "django-forms", "django-allauth"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1528922829, "post_id": 50845990, "comment_id": 88695559, "body": "Nowhere do you show something with <code>is_active</code>..."}, {"owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528923033, "post_id": 50845990, "comment_id": 88695661, "body": "@WillemVanOnsem the is_active is a method in the User model to check whether or not the user is active. <code>active</code> is a boolean field in User. Other than that, I don&#39;t use is_active anywhere"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528923075, "post_id": 50845990, "comment_id": 88695681, "body": "Did you by any change changed the <code>User</code> model with a model that uses <code>active</code> instead of <code>is_active</code>?"}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1528923169, "post_id": 50845990, "comment_id": 88695718, "body": "<a href=\"https://django-allauth.readthedocs.io/en/latest/configuration.html\" rel=\"nofollow noreferrer\">django-allauth.readthedocs.io/en/latest/configuration.html</a> scroll to the acocunt forms header. Does this section help you?"}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1528923365, "post_id": 50845990, "comment_id": 88695790, "body": "<a href=\"https://django-allauth.readthedocs.io/en/latest/forms.html\" rel=\"nofollow noreferrer\">django-allauth.readthedocs.io/en/latest/forms.html</a>"}, {"owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1528923584, "post_id": 50845990, "comment_id": 88695885, "body": "@ritlew Yes, I&#39;ve added that and for some reason it still gives me the same error"}, {"owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528923637, "post_id": 50845990, "comment_id": 88695908, "body": "@WillemVanOnsem No I didn&#39;t touch it. It&#39;s weird that when removing the custom form it starts working.."}], "answers": [{"tags": [], "owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "is_accepted": true, "score": 1, "last_activity_date": 1528935234, "creation_date": 1528935234, "answer_id": 50847942, "question_id": 50845990, "link": "https://stackoverflow.com/questions/50845990/cannot-resolve-keyword-is-active-into-field/50847942#50847942", "title": "Cannot resolve keyword &#39;is_active&#39; into field?", "body": "<p>I finally figured it out. The reason why it was producing this type of error is because I was inheriting from Auth and not Allauth for forms.</p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>class ResetPasswordForm(PasswordResetForm):\n</code></pre>\n\n<p><code>PasswordResetForm</code> is from Auth and not Allauth. Allauth's class name is called: <code>ResetPasswordForm</code> after knowing this, my result was this:</p>\n\n<pre><code>class PasswordResetForm(ResetPasswordForm):\n</code></pre>\n\n<p>It works correctly now and does not give me that error.</p>\n"}], "owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 984, "favorite_count": 0, "accepted_answer_id": 50847942, "answer_count": 1, "score": 0, "last_activity_date": 1528935234, "creation_date": 1528922652, "last_edit_date": 1528922924, "question_id": 50845990, "link": "https://stackoverflow.com/questions/50845990/cannot-resolve-keyword-is-active-into-field", "title": "Cannot resolve keyword &#39;is_active&#39; into field?", "body": "<p>I have the Django <code>allauth</code> package included into my project. I am trying to create a custom view of the reset password page with also a custom form. Here's what I have:</p>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>urlpatterns = [\n    url(r'^password/reset/$', views.ResetPasswordView.as_view(), name='password-reset'),\n]\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>class ResetPasswordView(PasswordResetView):\n    template_name = 'account/password-reset.html'\n    form_class = ResetPasswordForm\n</code></pre>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>class ResetPasswordForm(PasswordResetForm):\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.fields['email'].label = \"\"\n        self.fields['email'].widget = forms.EmailInput(attrs={\"placeholder\": \"Email Address\"})\n</code></pre>\n\n<p>However, for some reason when I enter an email address to reset a password, I get the following error:</p>\n\n<blockquote>\n  <p>Traceback:</p>\n  \n  <p>File\n  \"C:\\python3.6.3\\lib\\site-packages\\django\\core\\handlers\\exception.py\"\n  in inner\n    41.             response = get_response(request)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\core\\handlers\\base.py\"\n  in _get_response\n    187.                 response = self.process_exception_by_middleware(e, request)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\core\\handlers\\base.py\"\n  in _get_response\n    185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\views\\generic\\base.py\"\n  in view\n    68.             return self.dispatch(request, *args, **kwargs)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\views\\generic\\base.py\"\n  in dispatch\n    88.         return handler(request, *args, **kwargs)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\allauth\\account\\views.py\" in\n  post\n    102.             response = self.form_valid(form)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\allauth\\account\\views.py\" in\n  form_valid\n    639.         form.save(self.request)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\contrib\\auth\\forms.py\"\n  in save\n    269.         for user in self.get_users(email):</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\contrib\\auth\\forms.py\"\n  in get_users\n    254.             'is_active': True,</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\manager.py\" in\n  manager_method\n    85.                 return getattr(self.get_queryset(), name)(*args, **kwargs)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\query.py\" in\n  filter\n    784.         return self._filter_or_exclude(False, *args, **kwargs)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\query.py\" in\n  _filter_or_exclude\n    802.             clone.query.add_q(Q(*args, **kwargs))</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\sql\\query.py\"\n  in add_q\n    1250.         clause, _ = self._add_q(q_object, self.used_aliases)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\sql\\query.py\"\n  in _add_q\n    1276.                     allow_joins=allow_joins, split_subq=split_subq,</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\sql\\query.py\"\n  in build_filter\n    1154.         lookups, parts, reffed_expression = self.solve_lookup_type(arg)</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\sql\\query.py\"\n  in solve_lookup_type\n    1034.         _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())</p>\n  \n  <p>File \"C:\\python3.6.3\\lib\\site-packages\\django\\db\\models\\sql\\query.py\"\n  in names_to_path\n    1352.                                      \"Choices are: %s\" % (name, \", \".join(available)))</p>\n  \n  <p>Exception Type: FieldError at /password/reset/ Exception Value: Cannot\n  resolve keyword 'is_active' into field. Choices are: Profile,\n  Profile_id, active, admin, date_joined, email, emailaddress,\n  favorites_count, follower_count, followers, following_count, id,\n  last_login, logentry, password, points_count, questions_count,\n  socialaccount, staff, targets, username</p>\n</blockquote>\n\n<p>When I remove the form_class from the view and use the default form, it works correctly. Why is it not working when I add the custom form?</p>\n"}, {"tags": ["python", "string", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 4, "last_activity_date": 1528941760, "last_edit_date": 1528941760, "creation_date": 1528923239, "answer_id": 50846113, "question_id": 50845987, "link": "https://stackoverflow.com/questions/50845987/search-for-multiple-string-values-of-entire-row-of-dataframe-in-python-pandas/50846113#50846113", "title": "Search for Multiple String Values of Entire Row of Dataframe in python pandas", "body": "<p>If you have</p>\n\n<pre><code>l=['int', 'tos', '198']\n</code></pre>\n\n<p>Then you use <code>str.contains</code> by joining with <code>'|'</code> to get every model that contains any of these words</p>\n\n<pre><code>df.model.str.contains('|'.join(l))\n\n0    False\n1    False\n2     True\n3     True\n</code></pre>\n\n<h3>Edit</h3>\n\n<p>If the intention is to check all columns as @jpp interpreted, I'd suggest:</p>\n\n<pre><code>from functools import reduce\nres = reduce(lambda a,b: a | b, [df[col].astype(str).str.contains(m) for col in df.columns])\n\n0    False\n1     True\n2     True\n3     True\n</code></pre>\n\n<p>If you want it as a column with integer values, just do</p>\n\n<pre><code>df['new_col'] = res.astype(int)\n\n     new_col\n0    0\n1    1\n2    1\n3    1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": false, "score": 0, "last_activity_date": 1528924271, "last_edit_date": 1528924271, "creation_date": 1528923660, "answer_id": 50846210, "question_id": 50845987, "link": "https://stackoverflow.com/questions/50845987/search-for-multiple-string-values-of-entire-row-of-dataframe-in-python-pandas/50846210#50846210", "title": "Search for Multiple String Values of Entire Row of Dataframe in python pandas", "body": "<p>You need to check if <code>model</code> is a substring of <code>match</code> or not. </p>\n\n<pre><code>match = [ 'int', 'tos', '198']\ndf['isContained'] = df['model'].apply(lambda x: 1 if any(s in x for s in match) else 0)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>            model  launched  discontinued  isContained\n0            Lisa      1983          1986            0\n1          Lisa 2      1984          1985            0\n2  Macintosh 128K      1984          1984            1\n3  Macintosh 512K      1984          1986            1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1529019300, "last_edit_date": 1529019300, "creation_date": 1528930587, "answer_id": 50847430, "question_id": 50845987, "link": "https://stackoverflow.com/questions/50845987/search-for-multiple-string-values-of-entire-row-of-dataframe-in-python-pandas/50847430#50847430", "title": "Search for Multiple String Values of Entire Row of Dataframe in python pandas", "body": "<p>If I understand correctly, you wish to check the existence of strings across all columns in each row. This is not straightforward given you have mixed types (integers, strings). One way is to use <code>pd.DataFrame.apply</code> with a custom function.</p>\n\n<p>The main point we need to remember is to convert your entire dataframe to type <code>str</code>, since you cannot test the existence of substrings within an integer.</p>\n\n<pre><code>match = ['int', 'tos', '1985']\n\ndef string_finder(row, words):\n    if any(word in field for field in row for word in words):\n        return True\n    return False\n\ndf['isContained'] = df.astype(str).apply(string_finder, words=match, axis=1)\n\nprint(df)\n\n            model  launched  discontinued  isContained\n0            Lisa      1983          1986        False\n1          Lisa 2      1984          1985         True\n2  Macintosh 128K      1984          1984         True\n3  Macintosh 512K      1984          1986         True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 400, "user_id": 3357517, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VGNVR.jpg?s=128&g=1", "display_name": "mrGreenBrown", "link": "https://stackoverflow.com/users/3357517/mrgreenbrown"}, "is_accepted": true, "score": 0, "last_activity_date": 1530047688, "creation_date": 1530047688, "answer_id": 51051453, "question_id": 50845987, "link": "https://stackoverflow.com/questions/50845987/search-for-multiple-string-values-of-entire-row-of-dataframe-in-python-pandas/51051453#51051453", "title": "Search for Multiple String Values of Entire Row of Dataframe in python pandas", "body": "<p>So the simplest method without using fancy pandas staff would be to use two for loops. I would like if someone could give a better solution, but my approach would be this:</p>\n\n<pre><code>def check_all_for(column_name, search_terms):\n    df[column_name] = ''\n    for row in df.iterrows():\n        flag = 0\n        for element in row:\n            for search_term in search_terms:\n                if search_term in (str(element)).lower():\n                    flag = 1\n        row[column_name] = flag\n</code></pre>\n\n<p>Assumption is that you have <code>dataframe</code> defined as <code>df</code> and you want to flag the new column with 1 and 0</p>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 785673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27f9d81844087be81b3155dabcd049e2?s=128&d=identicon&r=PG&f=1", "display_name": "Feras", "link": "https://stackoverflow.com/users/785673/feras"}, "is_accepted": false, "score": 0, "last_activity_date": 1554050510, "creation_date": 1554050510, "answer_id": 55443106, "question_id": 50845987, "link": "https://stackoverflow.com/questions/50845987/search-for-multiple-string-values-of-entire-row-of-dataframe-in-python-pandas/55443106#55443106", "title": "Search for Multiple String Values of Entire Row of Dataframe in python pandas", "body": "<p>@Guy_Fuqua, my understanding that you want to assure that all words included in one row, am I right?</p>\n\n<p>if so, then a little modification for jpp answer shall help you to achieve this,kindly note the AssessAllString function here</p>\n\n<pre><code>match = ['int', 'tos', '1984']\n\ndef string_finder(row, words):\n    if any(word in field for field in row for word in words):\n        return True\n    return False\n\ndef AssessAllString (row,words):\n    b=True\n    for x in words:\n      b = b&amp;string_finder(row,[x])\n    return b\n\ndf['isContained'] = df.astype(str).apply(AssessAllString, words=match, axis=1)\n\nprint(df)\n\n            model  launched  discontinued  isContained\n0  Lisa            1983      1986          False      \n1  Lisa 2          1984      1985          False      \n2  Macintosh 128K  1984      1984          True       \n3  Macintosh 512K  1984      1986          True \n</code></pre>\n\n<p>Another Example for :</p>\n\n<pre><code>match = ['isa','1984']\ndf['isContained'] = df.astype(str).apply(AssessAllString, words=match, axis=1)\n\n            model  launched  discontinued  isContained\n0  Lisa            1983      1986          False      \n1  Lisa 2          1984      1985          True       \n2  Macintosh 128K  1984      1984          False      \n3  Macintosh 512K  1984      1986          False \n</code></pre>\n\n<p>I believe code still need optimization, but so far shall fit the purpose</p>\n"}], "owner": {"reputation": 350, "user_id": 7451580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNMqM.jpg?s=128&g=1", "display_name": "BrianBeing", "link": "https://stackoverflow.com/users/7451580/brianbeing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8725, "favorite_count": 0, "accepted_answer_id": 51051453, "answer_count": 5, "score": 2, "last_activity_date": 1554050510, "creation_date": 1528922645, "last_edit_date": 1528930760, "question_id": 50845987, "link": "https://stackoverflow.com/questions/50845987/search-for-multiple-string-values-of-entire-row-of-dataframe-in-python-pandas", "title": "Search for Multiple String Values of Entire Row of Dataframe in python pandas", "body": "<p>In a pandas dataframe, I want to search row by row for multiple string values. If the row contains a string value then the function will add/print for that row, into an empty column at the end of the df 1 or 0 based upon<br>\nThere have been multiple tutorials on how to select rows of a Pandas DataFrame that match a (partial) string.</p>\n\n<p>For Example:</p>\n\n<pre><code>import pandas as pd\n\n#create sample data\ndata = {'model': ['Lisa', 'Lisa 2', 'Macintosh 128K', 'Macintosh 512K'],\n        'launched': [1983,1984,1984,1984],\n        'discontinued': [1986, 1985, 1984, 1986]}\n\ndf = pd.DataFrame(data, columns = ['model', 'launched', 'discontinued'])\ndf\n</code></pre>\n\n<p>I'm pulling the above example from this website:\n<a href=\"https://davidhamann.de/2017/06/26/pandas-select-elements-by-string/\" rel=\"nofollow noreferrer\">https://davidhamann.de/2017/06/26/pandas-select-elements-by-string/</a></p>\n\n<p>How would I do a multi-value search of the entire row for: 'int', 'tos', '198'?</p>\n\n<p>Then print into a column next discontinued, a column int that would have 1 or 0 based upon whether the row contained that keyword. </p>\n"}, {"tags": ["python", "pip"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6911027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a0d2fc875ee15a5145ad89f5ce7e72?s=128&d=identicon&r=PG&f=1", "display_name": "R.Pitagram", "link": "https://stackoverflow.com/users/6911027/r-pitagram"}, "edited": false, "score": 0, "creation_date": 1528929927, "post_id": 50846442, "comment_id": 88698071, "body": "I installed PyCairo from  <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#pycairo\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs/#pycairo</a> I still have to install cairo? Because when i&#39;m using pip install cairo i got erros. Is it neccessery to install Cairo either?"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 31, "user_id": 6911027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a0d2fc875ee15a5145ad89f5ce7e72?s=128&d=identicon&r=PG&f=1", "display_name": "R.Pitagram", "link": "https://stackoverflow.com/users/6911027/r-pitagram"}, "edited": false, "score": 0, "creation_date": 1528977862, "post_id": 50846442, "comment_id": 88716669, "body": "You cannot <code>pip install cairo</code> because cairo is not a Python module \u2014 PyCairo is. Even if you&#39;ve installed PyCairo you still need cairo <i>sources</i> because PyGObject needs them for compilation. Unfortunately there is no PyGObject for Python 3.6 at <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs</a>, only for Python 2.7."}, {"owner": {"reputation": 31, "user_id": 6911027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a0d2fc875ee15a5145ad89f5ce7e72?s=128&d=identicon&r=PG&f=1", "display_name": "R.Pitagram", "link": "https://stackoverflow.com/users/6911027/r-pitagram"}, "edited": false, "score": 0, "creation_date": 1529284306, "post_id": 50846442, "comment_id": 88803175, "body": "Ok thanks for info. I installed python 2.7 and rest things fromhttps://www.lfd.uci.edu/~gohlke/pythonlibs/ (Pycairo and Pygobject) then i used pip install appkit. I had to download from this website because when i used pip i had error with C++ Visual"}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": false, "score": 2, "last_activity_date": 1529318391, "last_edit_date": 1529318391, "creation_date": 1528924837, "answer_id": 50846442, "question_id": 50845946, "link": "https://stackoverflow.com/questions/50845946/python-pip-install-appkit/50846442#50846442", "title": "Python pip install appkit", "body": "<p><code>appkit</code> on Windows uses <code>PyGObject</code> which requires <code>PyCairo</code> which requires <code>cairo</code> which you don't have. You have to install <a href=\"https://cairographics.org/download/\" rel=\"nofollow noreferrer\">cairo</a> with sources.</p>\n"}], "owner": {"reputation": 31, "user_id": 6911027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a0d2fc875ee15a5145ad89f5ce7e72?s=128&d=identicon&r=PG&f=1", "display_name": "R.Pitagram", "link": "https://stackoverflow.com/users/6911027/r-pitagram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1313, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529318391, "creation_date": 1528922459, "last_edit_date": 1529089147, "question_id": 50845946, "link": "https://stackoverflow.com/questions/50845946/python-pip-install-appkit", "title": "Python pip install appkit", "body": "<p>I'm using python 3.6 and wanted to install appkit\nI paste last logs. I tryed everything.\nI got installed Visual Studio 2015.\nI'm using Windows 7</p>\n\n<pre><code>    creating build\\temp.win-amd64-3.6\\Release\\cairo\n    C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\x86_amd64\\cl.exe\n/c /nologo /Ox /W3 /GL /DNDEBUG /MD -DPYCAIRO_VERSION_MAJOR=1 -DPYCAIRO_VERSION_\nMINOR=17 -DPYCAIRO_VERSION_MICRO=0 -Ic:\\python36\\include -Ic:\\python36\\include \"\n-IC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\" \"-IC:\\Program\nFiles (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files\n(x86)\\Windows Kits\\10\\include\\10.0.10586.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windo\nws Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\inc\nlude\\10.0.10586.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0\n.10586.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10586.0\\winr\nt\" /Tccairo/device.c /Fobuild\\temp.win-amd64-3.6\\Release\\cairo/device.obj\n    device.c\n    c:\\users\\rafal\\appdata\\local\\temp\\pip-install-l744mfh7\\pycairo\\cairo\\pycairo\n.h(37): fatal error C1083: Cannot open include file: 'cairo.h': No such file or\ndirectory\n    error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\B\nIN\\\\x86_amd64\\\\cl.exe' failed with exit status 2\n\n    ----------------------------------------\nCommand \"c:\\python36\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\n\\Users\\\\rafal\\\\AppData\\\\Local\\\\Temp\\\\pip-install-l744mfh7\\\\pycairo\\\\setup.py';f=\ngetattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.\nclose();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\rafal\\A\nppData\\Local\\Temp\\pip-record-r_uz_0uc\\install-record.txt --single-version-extern\nally-managed --compile\" failed with error code 1 in C:\\Users\\rafal\\AppData\\Local\n\\Temp\\pip-install-l744mfh7\\pycairo\\\n</code></pre>\n\n<p><strong>pip install pygobject</strong></p>\n\n<pre><code>Collecting pygobject\n  Using cached https://files.pythonhosted.org/packages/e0/e8/1e4f21800015a9ca153\n969e85fc29f7962f8f82fc5dbc1ecbdeb9dc54c75/PyGObject-3.28.3.tar.gz\nRequirement already satisfied: pycairo&gt;=1.11.1 in c:\\python36\\lib\\site-packages\n(from pygobject) (1.16.3)\nInstalling collected packages: pygobject\n  Running setup.py install for pygobject ... error\n    Complete output from command c:\\python36\\python.exe -u -c \"import setuptools\n, tokenize;__file__='C:\\\\Users\\\\rafal\\\\AppData\\\\Local\\\\Temp\\\\pip-install-ijzat7z\n3\\\\pygobject\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read(\n).replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install\n --record C:\\Users\\rafal\\AppData\\Local\\Temp\\pip-record-ded1xvyr\\install-record.t\nxt --single-version-externally-managed --compile:\n    running install\n    running build\n    running build_py\n    creating build\n    creating build\\lib.win-amd64-3.6\n    creating build\\lib.win-amd64-3.6\\pygtkcompat\n    copying pygtkcompat\\generictreemodel.py -&gt; build\\lib.win-amd64-3.6\\pygtkcomp\nat\n    copying pygtkcompat\\pygtkcompat.py -&gt; build\\lib.win-amd64-3.6\\pygtkcompat\n    copying pygtkcompat\\__init__.py -&gt; build\\lib.win-amd64-3.6\\pygtkcompat\n    creating build\\lib.win-amd64-3.6\\gi\n    copying gi\\docstring.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\importer.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\module.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\pygtkcompat.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\types.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\_constants.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\_error.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\_option.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\_ossighelper.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\_propertyhelper.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\_signalhelper.py -&gt; build\\lib.win-amd64-3.6\\gi\n    copying gi\\__init__.py -&gt; build\\lib.win-amd64-3.6\\gi\n    creating build\\lib.win-amd64-3.6\\gi\\repository\n    copying gi\\repository\\__init__.py -&gt; build\\lib.win-amd64-3.6\\gi\\repository\n    creating build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\Gdk.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\GIMarshallingTests.py -&gt; build\\lib.win-amd64-3.6\\gi\\ove\nrrides\n    copying gi\\overrides\\Gio.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\GLib.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\GObject.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\Gtk.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\keysyms.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\Pango.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    copying gi\\overrides\\__init__.py -&gt; build\\lib.win-amd64-3.6\\gi\\overrides\n    running build_ext\n    pycairo: new API\n    pycairo: trying include directory: 'c:\\\\python36\\\\lib\\\\site-packages\\\\cairo'\n\n    pycairo: header file ('c:\\\\python36\\\\lib\\\\site-packages\\\\cairo\\\\py3cairo.h')\n not found\n    pycairo: old API\n    pycairo: found pycairo 1.16.3 (c:\\python36\\lib\\site-packages)\n    pycairo: trying include directory: 'c:\\\\python36\\\\include\\\\pycairo'\n    pycairo: header file ('c:\\\\python36\\\\include\\\\pycairo\\\\py3cairo.h') not foun\nd\n    pycairo: pkg-config\n    error: Could not find pycairo headers\n\n    ----------------------------------------\nCommand \"c:\\python36\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\n\\Users\\\\rafal\\\\AppData\\\\Local\\\\Temp\\\\pip-install-ijzat7z3\\\\pygobject\\\\setup.py';\nf=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');\nf.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\rafal\n\\AppData\\Local\\Temp\\pip-record-ded1xvyr\\install-record.txt --single-version-exte\nrnally-managed --compile\" failed with error code 1 in C:\\Users\\rafal\\AppData\\Loc\nal\\Temp\\pip-install-ijzat7z3\\pygobject\\\n\n\n\nC:\\Users\\rafal\\Downloads&gt;pip install pycairo\nRequirement already satisfied: pycairo in c:\\python36\\lib\\site-packages (1.16.3)\n</code></pre>\n\n<p>I downloaded GTK , by using this tutorial\n<a href=\"https://www.gtk.org/download/windows.php\" rel=\"nofollow noreferrer\">https://www.gtk.org/download/windows.php</a>\nAnd PygoObject by using this tutorial:\n<a href=\"http://pygobject.readthedocs.io/en/latest/getting_started.html\" rel=\"nofollow noreferrer\">http://pygobject.readthedocs.io/en/latest/getting_started.html</a></p>\n\n<p>Can you help?</p>\n"}, {"tags": ["python", "module", "pip", "pycharm", "openai-gym"], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "edited": false, "score": 0, "creation_date": 1528947378, "post_id": 50849216, "comment_id": 88701385, "body": "now it says &quot;error.DependencyNotInstalled(&quot;{}. (HINT: you can install Atari dependencies by running &#39;pip install gym[atari]&#39;.)&quot;.format(e)) gym.error.DependencyNotInstalled: No module named &#39;atari_py&#39;. (HINT: you can install Atari dependencies by running &#39;pip install gym[atari]&#39;.)&quot;"}, {"owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "edited": false, "score": 0, "creation_date": 1528947398, "post_id": 50849216, "comment_id": 88701390, "body": "and i already installed Atari :( running pip install says it&#39;s already there"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5777975"}, "reply_to_user": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "edited": false, "score": 0, "creation_date": 1528947586, "post_id": 50849216, "comment_id": 88701429, "body": "Ok. When you navigate to <code>settings</code> -&gt; <code>project Interpreter</code> you will see all the installed packages in the venv which you have selected. If the dependencies are listed in the table then no need to install those. Otherwise you need to install <code>atari</code> using the process mentioned above"}, {"owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "edited": false, "score": 0, "creation_date": 1528947652, "post_id": 50849216, "comment_id": 88701451, "body": "it&#39;s throwing an error :( <a href=\"https://imgur.com/a/5fpgvLl\" rel=\"nofollow noreferrer\">imgur.com/a/5fpgvLl</a> and I checked and i have cython, make, and cmake installed also"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5777975"}, "is_accepted": true, "score": 4, "last_activity_date": 1528947213, "creation_date": 1528947213, "answer_id": 50849216, "question_id": 50845926, "link": "https://stackoverflow.com/questions/50845926/pycharm-wont-install-gym-package/50849216#50849216", "title": "PyCharm won&#39;t install gym package", "body": "<p>From pycharm,</p>\n\n<p>goto <code>settings</code> -> <code>project Interpreter</code></p>\n\n<p>Click on <code>+</code> button on top right corner and you will get pop-up window of Available packages. Then search for <code>gym</code> python package.</p>\n\n<p>Then click on <code>Install package</code> to install the <code>gym</code> package</p>\n"}], "owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4170, "favorite_count": 1, "accepted_answer_id": 50849216, "answer_count": 1, "score": 1, "last_activity_date": 1528966504, "creation_date": 1528922353, "last_edit_date": 1528966504, "question_id": 50845926, "link": "https://stackoverflow.com/questions/50845926/pycharm-wont-install-gym-package", "title": "PyCharm won&#39;t install gym package", "body": "<p>I just installed it with pip, and wanted to import it in PyCharm, but got an error:</p>\n\n<hr>\n\n<p>Solving environment: ...working... failed</p>\n\n<p>PackagesNotFoundError: The following packages are not available from current channels:</p>\n\n<ul>\n<li>gym</li>\n</ul>\n\n<p>Current channels:</p>\n\n<ul>\n<li><a href=\"https://repo.anaconda.com/pkgs/main/win-64\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/main/win-64</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/main/noarch\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/main/noarch</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/free/win-64\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/free/win-64</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/free/noarch\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/free/noarch</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/r/win-64\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/r/win-64</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/r/noarch\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/r/noarch</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/pro/win-64\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/pro/win-64</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/pro/noarch\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/pro/noarch</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/msys2/win-64\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/msys2/win-64</a></li>\n<li><a href=\"https://repo.anaconda.com/pkgs/msys2/noarch\" rel=\"nofollow noreferrer\">https://repo.anaconda.com/pkgs/msys2/noarch</a></li>\n</ul>\n\n<p>To search for alternate channels that may provide the conda package you're\nlooking for, navigate to</p>\n\n<pre><code>https://anaconda.org\n</code></pre>\n\n<p>and use the search bar at the top of the page.</p>\n\n<hr>\n\n<p>does anyone know how to fix this by any chance?</p>\n"}, {"tags": ["python", "python-sphinx", "restructuredtext", "autodoc", "docutils"], "comments": [{"owner": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1528926689, "post_id": 50845914, "comment_id": 88697121, "body": "Your example works in Sphinx 1.7.5 for me. Check your version."}, {"owner": {"reputation": 797, "user_id": 1441112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e814476db17531deb3da00a5385a9d9?s=128&d=identicon&r=PG", "display_name": "goodmami", "link": "https://stackoverflow.com/users/1441112/goodmami"}, "reply_to_user": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1528947118, "post_id": 50845914, "comment_id": 88701334, "body": "I have Sphinx 1.7.5 and docutils 0.14. If I run the same file twice in a row, the warnings are not printed the second time, but the output is still incorrect. Did you verify that the whole literal string is rendered, and not just up to the first colon?"}, {"owner": {"reputation": 797, "user_id": 1441112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e814476db17531deb3da00a5385a9d9?s=128&d=identicon&r=PG", "display_name": "goodmami", "link": "https://stackoverflow.com/users/1441112/goodmami"}, "reply_to_user": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1528947486, "post_id": 50845914, "comment_id": 88701407, "body": "@StevePiercy I notice that I only get the error for docstrings pulled in by autodoc, and not if I put the inline literal directly in a .rst file. Maybe autodoc is interfering, then?"}, {"owner": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1528948823, "post_id": 50845914, "comment_id": 88701681, "body": "I tried it in both an .rst file and in a docstring of a module using autodoc with success both times. Perhaps you are not editing the file you think?"}, {"owner": {"reputation": 797, "user_id": 1441112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e814476db17531deb3da00a5385a9d9?s=128&d=identicon&r=PG", "display_name": "goodmami", "link": "https://stackoverflow.com/users/1441112/goodmami"}, "reply_to_user": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1528949021, "post_id": 50845914, "comment_id": 88701715, "body": "I think I&#39;ve found the problem. It seems to be related to the use of the napoleon extension. See <a href=\"https://github.com/sphinx-doc/sphinx/issues/4016\" rel=\"nofollow noreferrer\">github.com/sphinx-doc/sphinx/issues/4016</a> and <a href=\"https://github.com/sphinx-doc/sphinx/issues/4021\" rel=\"nofollow noreferrer\">github.com/sphinx-doc/sphinx/issues/4021</a>. Still investigating."}], "answers": [{"tags": [], "owner": {"reputation": 797, "user_id": 1441112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e814476db17531deb3da00a5385a9d9?s=128&d=identicon&r=PG", "display_name": "goodmami", "link": "https://stackoverflow.com/users/1441112/goodmami"}, "is_accepted": true, "score": 3, "last_activity_date": 1528950236, "creation_date": 1528950236, "answer_id": 50849593, "question_id": 50845914, "link": "https://stackoverflow.com/questions/50845914/colons-in-restructuredtext-inline-literal/50849593#50849593", "title": "Colons in restructuredText inline literal", "body": "<p>This behavior is not due to an inherent limitation of Sphinx, restructuredText, or autodoc, but in fact a bug in the (current version of the) Napoleon extension for processing Google-style docstrings. Napoleon uses a regular expression to partition content on a colon, and it greedily consumes characters until it reaches the colon. The reason it works with the <code>:code:</code> role is that Napoleon detects those before partitioning, but it does not detect the inline formatting (note that the problem also occurs with other inline formatting patterns, such as <code>*emphasis*</code> or <code>**strong**</code>). One way to get around the bug, until it is fixed, is to place a colon before the inline literal:</p>\n\n<pre><code>def function(a, b):\n    \"\"\"Put *a* and *b* in a dictionary.\n\n    Returns:\n        dict: ``{a: b}``\n    \"\"\"\n    return {a: b}\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 1441112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e814476db17531deb3da00a5385a9d9?s=128&d=identicon&r=PG", "display_name": "goodmami", "link": "https://stackoverflow.com/users/1441112/goodmami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 50849593, "answer_count": 1, "score": 1, "last_activity_date": 1528950236, "creation_date": 1528922301, "last_edit_date": 1528947626, "question_id": 50845914, "link": "https://stackoverflow.com/questions/50845914/colons-in-restructuredtext-inline-literal", "title": "Colons in restructuredText inline literal", "body": "<p>How can I make an inline literal with a colon in restructuredText?</p>\n\n<p>I'm trying to document a Python function that returns a dictionary, e.g., something like:</p>\n\n<pre><code>def function(...):\n    \"\"\"\n    ...\n    Returns:\n        A dictionary mapping ``{id: {role: value}}``\n    \"\"\"\n</code></pre>\n\n<p>But when I compile with Sphinx, it complains:</p>\n\n<pre><code>WARNING: Inline literal start-string without end-string.\n</code></pre>\n\n<p>The literal end-string is certainly there, and it doesn't seem to violate <a href=\"http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#inline-literals\" rel=\"nofollow noreferrer\">other formatting rules</a>, but I cannot get it to render the literal correctly with the colons (the braces aren't an issue; <code>one: two</code> is also problematic inside an inline literal). Escaping doesn't help:</p>\n\n<pre><code>\"\"\" ``one\\: two`` \"\"\"   --&gt; WARNING\n\"\"\" ``one\\\\: two`` \"\"\"  --&gt; WARNING\nr\"\"\" ``one\\: two`` \"\"\"  --&gt; WARNING\n</code></pre>\n\n<p>The only thing that seems to work is a <code>:code:</code> role:</p>\n\n<pre><code>\"\"\" :code:`{one: {two: three}}` \"\"\"  --&gt; OK\n</code></pre>\n\n<p>Is this a limitation of Sphinx? Or a bug with docutils? Or is there a way to get colons inside inline literals?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "edited": false, "score": 0, "creation_date": 1529346403, "post_id": 50846039, "comment_id": 88830829, "body": "This does solve the problem posed in the original question. However, the object I&#39;m receiving the data from isn&#39;t actually an iterator and isn&#39;t compatible with these functions. Is there a way to do this with a generic object that emits numpy arrays when you call <code>next()</code> on it?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "edited": false, "score": 0, "creation_date": 1529350393, "post_id": 50846039, "comment_id": 88832621, "body": "@HalT if you have control of this object, I think the easiest would be to add an <code>__iter__</code> method that does nothing except returning <code>self</code>. If not the obvious---if ugly---workaround would be to wrap object in a class that just proxies the <code>__next__</code> method and has <code>__iter__</code> as just described."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1528923383, "last_edit_date": 1528923383, "creation_date": 1528922918, "answer_id": 50846039, "question_id": 50845870, "link": "https://stackoverflow.com/questions/50845870/running-mean-of-numpy-ndarrays-from-iterator/50846039#50846039", "title": "Running mean of numpy ndarrays from iterator", "body": "<p>You can use <code>itertools</code> together with standard operators:</p>\n\n<pre><code>&gt;&gt;&gt; import itertools, operator\n&gt;&gt;&gt; running_sum = itertools.accumulate(data)\n&gt;&gt;&gt; running_mean = map(operator.truediv, running_sum, itertools.count(1))\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; data = (np.linspace(-i, i*i, 6) for i in range(10))\n&gt;&gt;&gt; \n&gt;&gt;&gt; running_sum = itertools.accumulate(data)\n&gt;&gt;&gt; running_mean = map(operator.truediv, running_sum, itertools.count(1))\n&gt;&gt;&gt; \n&gt;&gt;&gt; for i in running_mean:\n...     print(i)\n... \n[0. 0. 0. 0. 0. 0.]\n[-0.5 -0.3 -0.1  0.1  0.3  0.5]\n[-1.         -0.46666667  0.06666667  0.6         1.13333333  1.66666667]\n[-1.5 -0.5  0.5  1.5  2.5  3.5]\n[-2.  -0.4  1.2  2.8  4.4  6. ]\n[-2.5        -0.16666667  2.16666667  4.5         6.83333333  9.16666667]\n[-3.   0.2  3.4  6.6  9.8 13. ]\n[-3.5  0.7  4.9  9.1 13.3 17.5]\n[-4.          1.33333333  6.66666667 12.         17.33333333 22.66666667]\n[-4.5  2.1  8.7 15.3 21.9 28.5]\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 50846039, "answer_count": 1, "score": 0, "last_activity_date": 1528923383, "creation_date": 1528922158, "question_id": 50845870, "link": "https://stackoverflow.com/questions/50845870/running-mean-of-numpy-ndarrays-from-iterator", "title": "Running mean of numpy ndarrays from iterator", "body": "<p>The question of how to compute a running mean of a series of numbers has been <a href=\"https://stackoverflow.com/questions/13728392/moving-average-or-running-mean\">asked and answered before</a>. However, I am trying to compute the running mean of a series of ndarrays, with an unknown length of series. So, for example, I have an iterator <code>data</code> where I would do:</p>\n\n<pre><code>running_mean = np.zeros((1000,3))\nwhile True:\n    datum = next(data)\n    running_mean = calc_running_mean(datum)\n</code></pre>\n\n<p>What would <code>calc_running_mean</code> look like? My primary concern here is memory, as I can't have the entirety of the data in memory, and I don't know how much data I will be receiving. <code>datum</code> would be an ndarray, let's say that for this example it's a <code>(1000,3)</code> array, and the running mean would be an array of the same size, with each element containing the elementwise mean of every element we've seen in that position so far.</p>\n\n<p>The key distinction this question has from previous questions is that it's calculating the elementwise mean of a series of ndarrays, and the number of arrays is unknown.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528922075, "post_id": 50845835, "comment_id": 88695212, "body": "can you <code>pip3 show &lt;module&gt;</code> your modules and their versions?"}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 9676615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13298be3139f4ac7678693051139495e?s=128&d=identicon&r=PG&f=1", "display_name": "smashed__", "link": "https://stackoverflow.com/users/9676615/smashed"}, "is_accepted": true, "score": 1, "last_activity_date": 1528922554, "creation_date": 1528922554, "answer_id": 50845960, "question_id": 50845835, "link": "https://stackoverflow.com/questions/50845835/pandas-wont-import-python3-5-raspberry-pi-3/50845960#50845960", "title": "Pandas won&#39;t import (Python3.5) (Raspberry Pi 3)", "body": "<p>I ended up uninstalling matplotlib and pandas using </p>\n\n<pre><code>sudo pip3 uninstall &lt;module&gt;\n</code></pre>\n\n<p>Then I installed pandas using:</p>\n\n<pre><code>sudo pip3 install -U pandas\n</code></pre>\n\n<p>and then installed matplotlib again using:</p>\n\n<pre><code>sudo pip3 install matplotlib\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 9676615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13298be3139f4ac7678693051139495e?s=128&d=identicon&r=PG&f=1", "display_name": "smashed__", "link": "https://stackoverflow.com/users/9676615/smashed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 50845960, "answer_count": 1, "score": 0, "last_activity_date": 1528922554, "creation_date": 1528921959, "question_id": 50845835, "link": "https://stackoverflow.com/questions/50845835/pandas-wont-import-python3-5-raspberry-pi-3", "title": "Pandas won&#39;t import (Python3.5) (Raspberry Pi 3)", "body": "<p>I have installed pandas, numpy, and matplotlib using pip3. Importing numpy and matplotlib is successful, but importing pandas results in the following error.</p>\n\n<pre><code>RuntimeError: module compiled against API version 0xc but this version of numpy is 0xa\nRuntimeError: module compiled against API version 0xc but this version of numpy is 0xa\n</code></pre>\n\n<p>If I uninstall matplotlib and import only pandas and numpy, they successfully import.</p>\n\n<p>I have installed these packages in python2.7 and they are all able to import.</p>\n\n<p>I am running the most recent version of Raspbian.</p>\n"}, {"tags": ["python", "tensorflow", "cpython"], "answers": [{"tags": [], "owner": {"reputation": 3300, "user_id": 6780025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e434396bfaf34dfdfe38f9ba8f6bfd11?s=128&d=identicon&r=PG&f=1", "display_name": "iga", "link": "https://stackoverflow.com/users/6780025/iga"}, "is_accepted": true, "score": 1, "last_activity_date": 1529014080, "creation_date": 1529014080, "answer_id": 50866605, "question_id": 50845832, "link": "https://stackoverflow.com/questions/50845832/where-does-python-interpreter-fit-in-tensorflow-runtime-architecture/50866605#50866605", "title": "where does python interpreter fit in Tensorflow runtime architecture?", "body": "<p>Most of the parts above the C API are implemented in Python. You run those parts using a Python interpreter.</p>\n\n<p>More verbosely, the C API and below, is basically just a library. You can use this library from different languages. For training, you usually use Python (all tf.* APIs), which runs using Python interpreter. For inference, you usually use Java or C++. In this case, no Python interpreter is necessary.</p>\n"}], "owner": {"reputation": 1167, "user_id": 7586189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81e805c3d53c754785d05a137f41a0c6?s=128&d=identicon&r=PG&f=1", "display_name": "user7586189", "link": "https://stackoverflow.com/users/7586189/user7586189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 50866605, "answer_count": 1, "score": 0, "last_activity_date": 1529014080, "creation_date": 1528921939, "question_id": 50845832, "link": "https://stackoverflow.com/questions/50845832/where-does-python-interpreter-fit-in-tensorflow-runtime-architecture", "title": "where does python interpreter fit in Tensorflow runtime architecture?", "body": "<p>According to <a href=\"https://www.tensorflow.org/extend/architecture\" rel=\"nofollow noreferrer\">Tensorflow architecture page</a>, the following figure illustrates the general architecture of Tensorflow runtime architecture. A C API separates user level code in different languages from the core runtime.</p>\n\n<p>How does python interpreter fit in the picture? In parallel to Tensorflow runtime? </p>\n\n<p><a href=\"https://www.tensorflow.org/images/layers.png\" rel=\"nofollow noreferrer\"><img src=\"https://www.tensorflow.org/images/layers.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1528922228, "post_id": 50845828, "comment_id": 88695280, "body": "To properly paste code, just copy it in your text editor, paste it in the Stack Overflow edit box, make sure it&#39;s selected, and click the <code>{}</code> icon in the editor (or hit Ctrl-K)."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1528922334, "post_id": 50845828, "comment_id": 88695335, "body": "Also, make sure to strip down your program to the smallest example that reproduces the problem (and to include example data that triggers it, if relevant). See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the help for more details."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528922528, "post_id": 50845828, "comment_id": 88695427, "body": "Anyway, without even looking at your code, I&#39;d give at least 50/50 odds that you&#39;re running into the most common reason for people having problems with buttons in their first Tkinter app: instead of assigning a function as the <code>command</code> callback, you <i>call</i> the function, and assign the <i>result</i>. Like <code>mybutton = tk.Button(parent, text=&#39;Whatever&#39;, command=myclick())</code> instead of <code>mybutton = tk.Button(parent, text=&#39;Whatever&#39;, command=myclick)</code>. Does that look right?"}, {"owner": {"reputation": 1, "user_id": 7571706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2599b5f0fddc519e3f8f2e5985f3b34?s=128&d=identicon&r=PG&f=1", "display_name": "avaq", "link": "https://stackoverflow.com/users/7571706/avaq"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528923632, "post_id": 50845828, "comment_id": 88695906, "body": "How am i supposed to change the certain integer values without calling the function with extra brackets under command? Like <code>mybutton = tk.Button(parent, text=&#39;Whatever&#39;, command=myclick(a,b,c))</code>"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528923984, "post_id": 50845828, "comment_id": 88696051, "body": "If you put your code here, I can show you exactly how to fix it. But more generally, there are two answers: you can <code>from functools import partial</code> and then write <code>command=partial(myclick, a, b, c)</code>, or you can define a new function, either elsewhere with <code>def</code> or directly inline with <code>lambda</code>, like <code>command=lambda: myclick(a, b, c)</code>. Either way, you get a function that takes no arguments, and, when called, calls <code>myclick</code> with the values <code>a, b, c</code> as arguments."}], "answers": [{"tags": [], "owner": {"reputation": 734, "user_id": 7731997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/COdcu.jpg?s=128&g=1", "display_name": "Gabriel Jablonski", "link": "https://stackoverflow.com/users/7731997/gabriel-jablonski"}, "is_accepted": false, "score": 0, "last_activity_date": 1529002311, "last_edit_date": 1529002311, "creation_date": 1528924586, "answer_id": 50846400, "question_id": 50845828, "link": "https://stackoverflow.com/questions/50845828/trying-to-create-a-mediocre-cookie-clicker-in-python-with-tkinter-doesnt-print/50846400#50846400", "title": "Trying to create a mediocre cookie clicker in python with tkinter, doesn&#39;t print?", "body": "<blockquote>\n  <p>The problem is that it doesn't print integers defined as \"a\" representing the cookie amount.</p>\n</blockquote>\n\n<p>If I understand correctly, your <code>buttonzy</code> is supposed to print the amount when clicked, and it doing just that. The main problem is that you're not updating your <code>a</code> variable correctly.</p>\n\n<p><code>slogan = tk.Button(frame, text=\"Cookie click!\", command=clicc(a,b))</code></p>\n\n<p>First thing: you can't directly send arguments to functions used as commands to your tkinter buttons. One approach is to use a <a href=\"https://pythonprogramming.net/passing-functions-parameters-tkinter-using-lambda/\" rel=\"nofollow noreferrer\">lambda operator</a>. So you could rewrite the line above (and all the other ones that try to send arguments to the command functions) as follows:</p>\n\n<p><code>slogan = tk.Button(frame, text=\"Cookie click!\", command=lambda: clicc(a,b))</code></p>\n\n<p>Just a reminder that if you don't need to send any arguments, there's no need to use lambda.</p>\n\n<p>The second problem you are having is with the <code>clicc()</code> function. When you call it from the <code>slogan</code> button, you're sending the <code>a</code> and <code>b</code> variables, and, supposedly updating the value from <code>a</code>. What actually happens is that, when you send the values from <code>a</code> and <code>b</code> to the function, these values are allocated to local variables, that shadow the names from your global variables. So any alteration that you might do inside the function, as <code>a=a+b</code>, will only change the value from you local variables, and leave your global variables unaltered. The same happens in the <code>boostie()</code> function.\nYou can read more about the local/global variables dynamics <a href=\"https://pythonspot.com/global-local-variables/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The most direct solution to you problem, although far from the most elegant, is to add the <code>global</code> keyword with the variable names at the start of the functions that do try to modify the values from global variables. For example, your clicc() function could look like:</p>\n\n<pre><code>def clicc(x, y):\n    global a\n    a=x+y\n</code></pre>\n\n<p>Notice how I changed the first argument from <code>a</code> to <code>x</code>, so as to not use the same variable names.</p>\n\n<p>Another solution would be to work with other types of objects, like lists or even classes, to avoid the need of global variables, so you might want to look into that.</p>\n\n<blockquote>\n  <p>And also is it possible for the cookie amount to be displayed in a button's text?</p>\n</blockquote>\n\n<p>In the link you've provided, they show an example with a label, but it is exactly the same with buttons. You can do something like <code>buttonzy.config(text=str(a))</code> after updating the value from <code>a</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7571706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2599b5f0fddc519e3f8f2e5985f3b34?s=128&d=identicon&r=PG&f=1", "display_name": "avaq", "link": "https://stackoverflow.com/users/7571706/avaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1529002311, "creation_date": 1528921930, "question_id": 50845828, "link": "https://stackoverflow.com/questions/50845828/trying-to-create-a-mediocre-cookie-clicker-in-python-with-tkinter-doesnt-print", "title": "Trying to create a mediocre cookie clicker in python with tkinter, doesn&#39;t print?", "body": "<p>So i decided to do this for a school project and am completely new to tkinter (but not new to python). But in the parts where the \"cookie\" values should be printed - they dont get printed. </p>\n\n<p>I dont know how to properly paste code here so here's github:  <a href=\"https://gist.github.com/avaque/a5fd47b896c8ff4e9e52d206994187ce\" rel=\"nofollow noreferrer\">https://gist.github.com/avaque/a5fd47b896c8ff4e9e52d206994187ce</a></p>\n\n<p>It looks like a mess, but thats not what matters (i think). The problem is that it doesn't print integers defined as \"a\" representing the cookie amount.</p>\n\n<p>I started from this code: <a href=\"https://www.python-course.eu/tkinter_buttons.php\" rel=\"nofollow noreferrer\">https://www.python-course.eu/tkinter_buttons.php</a>\n...and in that one the string gets printed. Is the value type a problem here?</p>\n\n<p>And also is it possible for the cookie amount to be displayed in a button's text? (look at row 70-74)</p>\n"}, {"tags": ["python", "pandas", "pivot", "pivot-table"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6337285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b12bdcfb16b1bea6d502f0fbee5b96?s=128&d=identicon&r=PG&f=1", "display_name": "PokerFace", "link": "https://stackoverflow.com/users/6337285/pokerface"}, "edited": false, "score": 0, "creation_date": 1528923411, "post_id": 50845874, "comment_id": 88695814, "body": "Thanks - exactly what I was working for. Worked beautifully!"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1528922174, "creation_date": 1528922174, "answer_id": 50845874, "question_id": 50845807, "link": "https://stackoverflow.com/questions/50845807/adding-new-columns-based-on-number-of-unique-row-values-in-pandas/50845874#50845874", "title": "Adding new columns based on number of unique row values in Pandas", "body": "<p>You can create the additional key for the duplicate Item within each ID by using <code>cumcount</code>, then we can simply using <code>pivot</code></p>\n\n<pre><code>df.Role=df.Role+'_'+df.groupby(['ID','Role']).cumcount().add(1).astype(str)\ndf.pivot('ID','Role','Name')\nOut[432]: \nRole Driver_1 Owner_1 Owner_2\nID                           \n1         Bob    John    None\n2         Tom    Jake   Sally\n3         Sue    Mary    None\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6337285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b12bdcfb16b1bea6d502f0fbee5b96?s=128&d=identicon&r=PG&f=1", "display_name": "PokerFace", "link": "https://stackoverflow.com/users/6337285/pokerface"}, "edited": false, "score": 0, "creation_date": 1528923454, "post_id": 50845953, "comment_id": 88695832, "body": "Thanks - this makes sense as well.  Although, I discovered that my data set also has multiple drivers in some cases"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1528922490, "creation_date": 1528922490, "answer_id": 50845953, "question_id": 50845807, "link": "https://stackoverflow.com/questions/50845807/adding-new-columns-based-on-number-of-unique-row-values-in-pandas/50845953#50845953", "title": "Adding new columns based on number of unique row values in Pandas", "body": "<p>You need to change the default aggregation function from <code>mean</code> to <code>sum</code>:</p>\n\n<pre><code>pivoted = pd.pivot_table(df, values='Name', \n                         index='ID', columns='Role', aggfunc='sum')\n#Role  Driver          Owner\n#ID                         \n#1       Bob           John \n#2       Tom    Jake  Sally \n#3       Sue           Mary \n</code></pre>\n\n<p>Now, some owners are represented as multiword strings. Split them into individual words:</p>\n\n<pre><code>result = pivoted.join(pivoted['Owner'].str.split().apply(pd.Series))\\\n       .drop(\"Owner\", axis=1)\n#    Driver     0      1\n#ID                     \n#1     Bob   John    NaN\n#2     Tom   Jake  Sally\n#3     Sue   Mary    NaN\n\nresult.columns = \"Driver\", \"Owner_1\", \"Owner_2\"\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6337285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b12bdcfb16b1bea6d502f0fbee5b96?s=128&d=identicon&r=PG&f=1", "display_name": "PokerFace", "link": "https://stackoverflow.com/users/6337285/pokerface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 50845874, "answer_count": 2, "score": 2, "last_activity_date": 1528922490, "creation_date": 1528921808, "last_edit_date": 1528922002, "question_id": 50845807, "link": "https://stackoverflow.com/questions/50845807/adding-new-columns-based-on-number-of-unique-row-values-in-pandas", "title": "Adding new columns based on number of unique row values in Pandas", "body": "<p>I have a data frame with the structure below:</p>\n\n<pre><code>ID | Name | Role  \n1 | John | Owner\n1 | Bob | Driver\n2 | Jake | Owner\n2 | Tom | Driver\n2 | Sally | Owner\n3 | Mary | Owner\n3 | Sue | Driver\n</code></pre>\n\n<p>I'd like to pivot the Role column and have the Name column as the value, but since some IDs (the index in this case) have more than one person in the owner role and some don't the pivot_table function doesn't work. Is there a way to create a new column for each additional owner a particular ID may have. Some may have 2,3,4+ owners. Thanks!</p>\n\n<p>Sample output below:</p>\n\n<pre><code>ID | Owner_1 | Owner_2 | Driver\n1 | John | NaN | Bob \n2 | Jake | Sally | Tom \n3 | Mary | NaN | Sue \n</code></pre>\n\n<p>This is what I tried:</p>\n\n<pre><code>pd.pivot_table(df,values='Name',index='ID',columns='Role')\n\nDataError: No numeric types to aggregate\n</code></pre>\n"}, {"tags": ["python", "css", "xpath", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 462, "user_id": 5516965, "user_type": "registered", "profile_image": "https://graph.facebook.com/779435098869929/picture?type=large", "display_name": "J\u0101nis \u0160.", "link": "https://stackoverflow.com/users/5516965/j%c4%81nis-%c5%a0"}, "edited": false, "score": 0, "creation_date": 1528922108, "post_id": 50845799, "comment_id": 88695225, "body": "Have you checked the content of that XML code? There is no attribute &#39;collapsible2&#39; in it."}, {"owner": {"reputation": 115, "user_id": 9878301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0d950e95b6167022906bc9e9023d6b?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteDillPickle", "link": "https://stackoverflow.com/users/9878301/whitedillpickle"}, "reply_to_user": {"reputation": 462, "user_id": 5516965, "user_type": "registered", "profile_image": "https://graph.facebook.com/779435098869929/picture?type=large", "display_name": "J\u0101nis \u0160.", "link": "https://stackoverflow.com/users/5516965/j%c4%81nis-%c5%a0"}, "edited": false, "score": 0, "creation_date": 1528922209, "post_id": 50845799, "comment_id": 88695270, "body": "I&#39;m not sure what &quot;collapsible2&quot; is, so no."}, {"owner": {"reputation": 462, "user_id": 5516965, "user_type": "registered", "profile_image": "https://graph.facebook.com/779435098869929/picture?type=large", "display_name": "J\u0101nis \u0160.", "link": "https://stackoverflow.com/users/5516965/j%c4%81nis-%c5%a0"}, "edited": false, "score": 0, "creation_date": 1528922952, "post_id": 50845799, "comment_id": 88695627, "body": "You can only use tag names, attributes and values which exist in the code of that page. Open the URL in a browser and then look where the desired content is located."}, {"owner": {"reputation": 115, "user_id": 9878301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0d950e95b6167022906bc9e9023d6b?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteDillPickle", "link": "https://stackoverflow.com/users/9878301/whitedillpickle"}, "reply_to_user": {"reputation": 462, "user_id": 5516965, "user_type": "registered", "profile_image": "https://graph.facebook.com/779435098869929/picture?type=large", "display_name": "J\u0101nis \u0160.", "link": "https://stackoverflow.com/users/5516965/j%c4%81nis-%c5%a0"}, "edited": false, "score": 0, "creation_date": 1528923397, "post_id": 50845799, "comment_id": 88695806, "body": "Isn&#39;t the content located on that URL? Here is the original URL that I want to scrape from <a href=\"http://www.simon.com/mall/abq-uptown/stores\" rel=\"nofollow noreferrer\">simon.com/mall/abq-uptown/stores</a>. I only got to the URL above by accessing the ajax calls from the original site."}, {"owner": {"reputation": 462, "user_id": 5516965, "user_type": "registered", "profile_image": "https://graph.facebook.com/779435098869929/picture?type=large", "display_name": "J\u0101nis \u0160.", "link": "https://stackoverflow.com/users/5516965/j%c4%81nis-%c5%a0"}, "edited": false, "score": 0, "creation_date": 1528954633, "post_id": 50845799, "comment_id": 88703222, "body": "I am afraid scrapy is not suitable for this site. However, the simon.com has a sitemap <a href=\"http://www.simon.com/sitemap.xml\" rel=\"nofollow noreferrer\">simon.com/sitemap.xml</a> that contains a sitemap index with two entries. You can try to process URLs included in them."}, {"owner": {"reputation": 115, "user_id": 9878301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0d950e95b6167022906bc9e9023d6b?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteDillPickle", "link": "https://stackoverflow.com/users/9878301/whitedillpickle"}, "reply_to_user": {"reputation": 462, "user_id": 5516965, "user_type": "registered", "profile_image": "https://graph.facebook.com/779435098869929/picture?type=large", "display_name": "J\u0101nis \u0160.", "link": "https://stackoverflow.com/users/5516965/j%c4%81nis-%c5%a0"}, "edited": false, "score": 0, "creation_date": 1528979412, "post_id": 50845799, "comment_id": 88717588, "body": "If scrapy won&#39;t work, do you know of any other methods to scrape this information?"}], "owner": {"reputation": 115, "user_id": 9878301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0d950e95b6167022906bc9e9023d6b?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteDillPickle", "link": "https://stackoverflow.com/users/9878301/whitedillpickle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1528921774, "creation_date": 1528921774, "question_id": 50845799, "link": "https://stackoverflow.com/questions/50845799/how-to-use-python-scrapy-if-css-or-xpath-selectors-dont-work", "title": "How to use Python Scrapy if CSS or XPATH selectors don&#39;t work?", "body": "<p>I'm trying to scrape from this site using scrapy shell.</p>\n\n<pre><code>    https://api.simon.com/v1.2/tenant?mallId=1345&amp;key=40A6F8C3-3678-410D-86A5-BAEE2804C8F2&amp;lw=true\n</code></pre>\n\n<p>My goal is to extract all the tenant information. </p>\n\n<p>However, I'm having difficulties as it seems that both my CSS and XML selectors aren't working, or at least they're not returning any information.  The website says that it's an XML file without any style information associated with it.  I'm not sure what that means.  </p>\n\n<p>I've narrowed down the problem and am now just trying to return information on a single tenant/store but I still can't seem to figure it out.  Here are some of the selectors that I've tried</p>\n\n<pre><code>    response.xpath('//*[@id=\"collapsible2\"]/div[1]/div[1]/span[2]/text()').extract() \n    response.css(\"#collapsible2 &gt; div.expanded &gt; div:nth-child(1) &gt; span.html-tag::text\").extract()\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "c", "python-3.x", "python-c-api"], "comments": [{"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1529693431, "post_id": 50845740, "comment_id": 88982596, "body": "Note that if this is not a system runtime, this is a way to do it with the anwer below"}], "answers": [{"tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": true, "score": 2, "last_activity_date": 1528922056, "creation_date": 1528922056, "answer_id": 50845854, "question_id": 50845740, "link": "https://stackoverflow.com/questions/50845740/dealing-with-error-lnk2001-unresolved-external-symbol-imp-exitwindowsex8-in/50845854#50845854", "title": "Dealing with error LNK2001: unresolved external symbol __imp__ExitWindowsEx@8 in Python extensions", "body": "<p>Right I found the solution.  The linker path is already set for system runtimes.  All I had to do was link the runtime itself.  This can be done using the <code>library</code> attribute in the setup script:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\nmodule = Extension(\n    \"sys_shutdown\", \n    sources = [\"main.c\"],\n    libraries = [\"user32\"] # &lt;-- Here it is\n)\n\nsetup (\n    name = \"sys_shutdown\",\n    version = \"1.0\",\n    ext_modules = [module])\n</code></pre>\n"}], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "accepted_answer_id": 50845854, "answer_count": 1, "score": 0, "last_activity_date": 1528922056, "creation_date": 1528921601, "question_id": 50845740, "link": "https://stackoverflow.com/questions/50845740/dealing-with-error-lnk2001-unresolved-external-symbol-imp-exitwindowsex8-in", "title": "Dealing with error LNK2001: unresolved external symbol __imp__ExitWindowsEx@8 in Python extensions", "body": "<p>I am trying to build a C project.  I think the source is fine, however I am getting this error:</p>\n\n<blockquote>\n  <p>error LNK2001: unresolved external symbol __imp__ExitWindowsEx@8</p>\n</blockquote>\n\n<p>Or for the complete traceback:</p>\n\n<pre><code>C:\\Users\\Simon\\Desktop\\Learn&gt;python setup.py build\nrunning build\nrunning build_ext\nbuilding 'sys_shutdown' extension\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.14.26428\\bin\\HostX86\\x86\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MT -IC:\\Users\\Simon\\AppData\\Local\\Programs\\Python\\Python36-32\\include -IC:\\Users\\Simon\\AppData\\Local\\Programs\\Python\\Python36-32\\include \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.14.26428\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\cppwinrt\" /Tcmain.c /Fobuild\\temp.win32-3.6\\Release\\main.obj\nmain.c\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.14.26428\\bin\\HostX86\\x86\\link.exe /nologo /INCREMENTAL:NO /LTCG /nodefaultlib:libucrt.lib ucrt.lib /DLL /MANIFEST:EMBED,ID=2 /MANIFESTUAC:NO /LIBPATH:C:\\Users\\Simon\\AppData\\Local\\Programs\\Python\\Python36-32\\libs /LIBPATH:C:\\Users\\Simon\\AppData\\Local\\Programs\\Python\\Python36-32\\PCbuild\\win32 \"/LIBPATH:C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.14.26428\\lib\\x86\" \"/LIBPATH:C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x86\" \"/LIBPATH:C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17134.0\\ucrt\\x86\" \"/LIBPATH:C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17134.0\\um\\x86\" /EXPORT:PyInit_sys_shutdown build\\temp.win32-3.6\\Release\\main.obj /OUT:build\\lib.win32-3.6\\sys_shutdown.cp36-win32.pyd /IMPLIB:build\\temp.win32-3.6\\Release\\sys_shutdown.cp36-win32.lib\n   Creating library build\\temp.win32-3.6\\Release\\sys_shutdown.cp36-win32.lib and object build\\temp.win32-3.6\\Release\\sys_shutdown.cp36-win32.exp\nmain.obj : error LNK2001: unresolved external symbol __imp__ExitWindowsEx@8\nbuild\\lib.win32-3.6\\sys_shutdown.cp36-win32.pyd : fatal error LNK1120: 1 unresolved externals\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\WDExpress\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x86\\\\link.exe' failed with exit status 1120\n</code></pre>\n\n<p>I worked out from <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/706bea92-1931-4abf-9af5-41020c909a70/problem-using-exitwindowsex?forum=vcgeneral\" rel=\"nofollow noreferrer\">here</a> that <code>__imp__ExitWindowsEx@8</code> is caused by the necessary runtime not being found.</p>\n\n<blockquote>\n  <p>Don't link using the #using but link using the linker command line. You can do that by adding the user32.lib to the linker command</p>\n</blockquote>\n\n<p>I tried this in my setup script using <a href=\"https://docs.python.org/3/distutils/apiref.html#distutils.core.Extension\" rel=\"nofollow noreferrer\"><code>extra_objects</code></a>:</p>\n\n<pre><code>import setup, Extension\n\nmodule = Extension(\n    \"sys_shutdown\", \n    sources = [\"main.c\"],\n        extra_objects = [\"C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\Lib\\\\10.0.17134.0\\\\um\\\\arm64\\\\User32.Lib\"]\n)\n\nsetup (\n    name = \"sys_shutdown\",\n    version = \"1.0\",\n    ext_modules = [module])\n</code></pre>\n\n<p>My <code>main.c</code> file (so you know why and what I need to link to):</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;Windows.h&gt;\n\n\n/* The functions that need to be created */\n\nstatic PyObject * sys_shutdown(PyObject *self) {\n    ExitWindowsEx(EWX_POWEROFF, SHTDN_REASON_MINOR_OTHER); // Shutdown\n    return Py_BuildValue(\"\");\n}\n\nstatic PyObject * sys_restart(PyObject *self) {\n    ExitWindowsEx(EWX_REBOOT, SHTDN_REASON_MINOR_OTHER); // Restart\n    return Py_BuildValue(\"\");\n}\n\nstatic PyObject * sys_log_out(PyObject *self) {\n    ExitWindowsEx(EWX_LOGOFF, SHTDN_REASON_MINOR_OTHER); // Log out\n    return Py_BuildValue(\"\");\n}\n\nstatic PyMethodDef allMethods[] = {\n    {\"sys_shutdown\", (PyCFunction)sys_shutdown, METH_NOARGS, \"Shuts down the device\"},\n    {\"sys_restart\", (PyCFunction)sys_restart, METH_NOARGS, \"Restarts the device\"},\n    {\"sys_log_out\", (PyCFunction)sys_log_out, METH_NOARGS, \"Closes all processes and logs out the user from the device\"},\n    {NULL, NULL, 0, NULL}\n};\n\nstatic struct PyModuleDef allModule = {\n    PyModuleDef_HEAD_INIT,\n    \"System Functions\",\n    \"sys_shutdown\",\n    -1,\n    allMethods\n};\n\nPyMODINIT_FUNC PyInit_sys_shutdown(void) {\n    return PyModule_Create(&amp;allModule);\n}\n</code></pre>\n\n<p>This extension requires the <code>ExitWindowsEx()</code> function provided by the <code>user32.dll</code></p>\n\n<p>How can I link the <code>user32.dll</code> to my extension (or if I have missed the plot completely how can I make it compile correctly)?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1528921556, "creation_date": 1528921556, "answer_id": 50845725, "question_id": 50845660, "link": "https://stackoverflow.com/questions/50845660/create-a-pandas-dataframe-from-a-series-of-list/50845725#50845725", "title": "create a Pandas DataFrame from a series of list", "body": "<p>One way is to extract the NumPy array representation and use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tolist.html\" rel=\"nofollow noreferrer\"><code>np.ndarray.tolist</code></a>. You can then feed into <code>pd.DataFrame</code>:</p>\n\n<pre><code>import pandas as pd\n\ns = pd.Series([['2018-3-13', '16:00'], ['2018-3-13', '16:01'],\n               ['2018-3-13', '16:02'], ['2018-3-13', '16:03']])\n\ndf = pd.DataFrame(s.values.tolist(), columns=['date', 'time'])\n\nprint(df)\n\n        date   time\n0  2018-3-13  16:00\n1  2018-3-13  16:01\n2  2018-3-13  16:02\n3  2018-3-13  16:03\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1528921880, "creation_date": 1528921880, "answer_id": 50845822, "question_id": 50845660, "link": "https://stackoverflow.com/questions/50845660/create-a-pandas-dataframe-from-a-series-of-list/50845822#50845822", "title": "create a Pandas DataFrame from a series of list", "body": "<p>you can use <code>apply</code> and <code>pd.Series</code> such as:</p>\n\n<pre><code># with jpp data\ns = pd.Series([['2018-3-13', '16:00'], ['2018-3-13', '16:01'],\n               ['2018-3-13', '16:02'], ['2018-3-13', '16:03']])\n# then you use apply and rename\ndf = s.apply(pd.Series).rename(columns={0:'date',1:'time'})\n</code></pre>\n\n<p>just another method</p>\n"}], "owner": {"reputation": 31, "user_id": 4544688, "user_type": "registered", "profile_image": "https://graph.facebook.com/713154538797729/picture?type=large", "display_name": "Chenxiao XU", "link": "https://stackoverflow.com/users/4544688/chenxiao-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1528921880, "creation_date": 1528921330, "question_id": 50845660, "link": "https://stackoverflow.com/questions/50845660/create-a-pandas-dataframe-from-a-series-of-list", "title": "create a Pandas DataFrame from a series of list", "body": "<p>I have a Pandas series of list</p>\n\n<pre><code>0 ['2018-3-13', '16:00']\n1 ['2018-3-13', '16:01']\n2 ['2018-3-13', '16:02']\n3 ['2018-3-13', '16:03']\n.\n.\n.\n</code></pre>\n\n<p>And I want to create DataFrame as </p>\n\n<pre><code>0 '2018-3-13' '16:00'\n1 '2018-3-13' '16:01'\n2 '2018-3-13' '16:02'\n3 '2018-3-13' '16:03'\n...\n</code></pre>\n\n<p>So anyone could provide a innovative idea?</p>\n\n<p>Quite thanks</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528994250, "post_id": 50845646, "comment_id": 88726873, "body": "In matplotlib 2.2.2 you need to use <code>plt.xkcd</code> inside a context, see <a href=\"https://matplotlib.org/gallery/showcase/xkcd.html\" rel=\"nofollow noreferrer\">official example</a>. This will solve the &quot;run this in script&quot;-problem."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 9815013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1CUsc.png?s=128&g=1", "display_name": "StubBurn", "link": "https://stackoverflow.com/users/9815013/stubburn"}, "is_accepted": true, "score": 1, "last_activity_date": 1550174236, "last_edit_date": 1550174236, "creation_date": 1550173827, "answer_id": 54698065, "question_id": 50845646, "link": "https://stackoverflow.com/questions/50845646/matplotlib-xkcd-and-black-figure-background/54698065#54698065", "title": "matplotlib xkcd and black figure background", "body": "<p>After you give the <code>plt.xkcd()</code> command, try executing </p>\n\n<pre><code>from matplotlib import patheffects\nplt.rcParams['path.effects'] = [patheffects.withStroke(linewidth=0)]\n</code></pre>\n\n<p>This solved the problem for me! </p>\n\n<p>Edit: I ran the code you gave with the suggested changes.</p>\n\n<p>Input:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib import patheffects\n\nplt.style.use(['dark_background'])\nplt.xkcd()\nplt.rcParams['path.effects'] = [patheffects.withStroke(linewidth=0)]\n\nplt.rcParams['figure.facecolor'] = 'black'\n\nx = np.linspace(-5, 5)\n\nplt.figure()\nplt.plot(x, x**2)\nplt.text(0, 10, \"Text\", color='r', fontsize=20)\nplt.xlabel(\"$x$\"   )\nplt.ylabel(\"$f(x)$\")\nplt.show();\n</code></pre>\n\n<p>Output (Sorry, I have to link to the output image, because a newbie on Stack is not allowed to embed images in their answer):</p>\n\n<p><a href=\"https://i.stack.imgur.com/l7SP2.png\" rel=\"nofollow noreferrer\">You might want to change your axis colors to white, though, if you want the background to be black</a></p>\n"}], "owner": {"reputation": 447, "user_id": 6135182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689ff073d382aeecde2ab95f96961fea?s=128&d=identicon&r=PG&f=1", "display_name": "Zaus", "link": "https://stackoverflow.com/users/6135182/zaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 54698065, "answer_count": 1, "score": 2, "last_activity_date": 1550174236, "creation_date": 1528921286, "last_edit_date": 1528968492, "question_id": 50845646, "link": "https://stackoverflow.com/questions/50845646/matplotlib-xkcd-and-black-figure-background", "title": "matplotlib xkcd and black figure background", "body": "<p>I am trying to make a plot using <code>matplotlib</code>'s <code>xkcd</code> package while having a black background. However, xkcd seems to add a sort of <strong>white contour line around text and lines</strong>. On a white background you can't see this white frame, but on a black background it is really annoying.</p>\n\n<p>Does anyone have an idea how to fix this? Maybe an option how to change the white contour lines to have the background color instead?</p>\n\n<p>minimal example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nplt.style.use(['dark_background'])\nplt.xkcd()\nplt.rcParams['figure.facecolor'] = 'black'\n\nx = np.linspace(-5, 5)\n\nplt.figure()\nplt.plot(x, x**2)\nplt.text(0, 10, \"Text\", color='r', fontsize=20)\nplt.xlabel(\"$x$\"   )\nplt.ylabel(\"$f(x)$\")\nplt.show();\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/FXjzO.png\" alt=\"minimal example of xkcd with black background\">:</p>\n\n<p>Edit:\nI am using <code>Python 3.5.4</code> in my jupyter notebook with packages:</p>\n\n<ul>\n<li><code>matplotlib==2.2.2</code>, backend='TkAgg'</li>\n<li><code>jupyter==1.0.0</code></li>\n<li><code>notebook==5.5.0</code></li>\n</ul>\n\n<p>Note, when running the above code as a script I somehow don't get a xkcd plot at all. Only from jupyter notebook or command line I get the described behaviour.</p>\n"}, {"tags": ["python", "python-3.x", "pytorch", "broken-pipe"], "comments": [{"owner": {"reputation": 111, "user_id": 2021774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccac4077ab6c7d9b42e57c5e0c1f2fc3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyathalae", "link": "https://stackoverflow.com/users/2021774/tyathalae"}, "edited": false, "score": 1, "creation_date": 1528975451, "post_id": 50845631, "comment_id": 88715149, "body": "In Windows, you need to wrap your code with if <b>name</b> == &#39;<b>main</b>&#39;: block. <a href=\"https://stackoverflow.com/questions/50701690/pytorch-tutorial-error-training-a-classifier/50716024#50716024\" title=\"pytorch tutorial error training a classifier\">stackoverflow.com/questions/50701690/&hellip;</a>"}, {"owner": {"reputation": 2712, "user_id": 1070480, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6c5c61cd66cede1455405ebc8e89d502?s=128&d=identicon&r=PG", "display_name": "HelloGoodbye", "link": "https://stackoverflow.com/users/1070480/hellogoodbye"}, "reply_to_user": {"reputation": 111, "user_id": 2021774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccac4077ab6c7d9b42e57c5e0c1f2fc3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyathalae", "link": "https://stackoverflow.com/users/2021774/tyathalae"}, "edited": false, "score": 0, "creation_date": 1528997597, "post_id": 50845631, "comment_id": 88728445, "body": "@Tyathalae Thanks, that was the cause of the problem! I marked this question as a duplicate of that one."}], "owner": {"reputation": 2712, "user_id": 1070480, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6c5c61cd66cede1455405ebc8e89d502?s=128&d=identicon&r=PG", "display_name": "HelloGoodbye", "link": "https://stackoverflow.com/users/1070480/hellogoodbye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 572, "favorite_count": 0, "closed_date": 1528997532, "answer_count": 0, "score": 0, "last_activity_date": 1528921228, "creation_date": 1528921228, "question_id": 50845631, "link": "https://stackoverflow.com/questions/50845631/python-brokenpipeerror-when-calling-iter-on-a-torch-utils-data-dataloader-objec", "closed_reason": "Duplicate", "title": "Python: BrokenPipeError when calling iter on a torch.utils.data.DataLoader object", "body": "<p>I'm currently following a PyTorch tutorial, and I'm trying to get <a href=\"https://pytorch.org/tutorials/beginner/blitz/cifar10_tutorial.html#sphx-glr-beginner-blitz-cifar10-tutorial-py\" rel=\"nofollow noreferrer\">this example</a> to work. However, upon running the line <code>dataiter = iter(trainloader)</code> my program first does something I don't understand how it's possible \u2013 it seems to jump backwards in the program and re-run lines of codes which it has already run even though there is no loop. Then it runs into a <code>BrokenPipeError</code> and crashes.</p>\n\n<p>Here is a minimal working example that triggers the problem:</p>\n\n<pre><code>import torch\nimport torchvision\nimport torchvision.transforms as transforms\n\ntransform = transforms.Compose([transforms.ToTensor(),\n                                transforms.Normalize((0.5, 0.5, 0.5),\n                                                     (0.5, 0.5, 0.5))])\ntrainset = torchvision.datasets.CIFAR10(root='./data',\n                                        train=True,\n                                        download=True,\n                                        transform=transform)\ntrainloader = torch.utils.data.DataLoader(trainset,\n                                          batch_size=4,\n                                          shuffle=True,\n                                          num_workers=2)\ndataiter = iter(trainloader)\n</code></pre>\n\n<p>and this is the output I'm getting:</p>\n\n<pre><code>\"D:\\Program Files\\Python35\\python.exe\" D:/work/programs/pytorch/60_minute_blitz_tutorial/3_training_a_classifier/MWE.py\nFiles already downloaded and verified\nFiles already downloaded and verified\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\spawn.py\", line 106, in spawn_main\n    exitcode = _main(fd)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\spawn.py\", line 115, in _main\n    prepare(preparation_data)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\spawn.py\", line 226, in prepare\n    _fixup_main_from_path(data['init_main_from_path'])\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\spawn.py\", line 278, in _fixup_main_from_path\n    run_name=\"__mp_main__\")\n  File \"D:\\Program Files\\Python35\\lib\\runpy.py\", line 263, in run_path\n    pkg_name=pkg_name, script_name=fname)\n  File \"D:\\Program Files\\Python35\\lib\\runpy.py\", line 96, in _run_module_code\n    mod_name, mod_spec, pkg_name, script_name)\n  File \"D:\\Program Files\\Python35\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"D:\\work\\programs\\pytorch\\60_minute_blitz_tutorial\\3_training_a_classifier\\MWE.py\", line 16, in &lt;module&gt;\n    dataiter = iter(trainloader)\n  File \"D:\\Program Files\\Python35\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 451, in __iter__\n    return _DataLoaderIter(self)\n  File \"D:\\Program Files\\Python35\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 239, in __init__\n    w.start()\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\process.py\", line 105, in start\n    self._popen = self._Popen(self)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\context.py\", line 212, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\context.py\", line 313, in _Popen\n    return Popen(process_obj)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\popen_spawn_win32.py\", line 34, in __init__\n    prep_data = spawn.get_preparation_data(process_obj._name)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\spawn.py\", line 144, in get_preparation_data\n    _check_not_importing_main()\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\spawn.py\", line 137, in _check_not_importing_main\n    is not going to be frozen to produce an executable.''')\nRuntimeError: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\nTraceback (most recent call last):\n  File \"D:/work/programs/pytorch/60_minute_blitz_tutorial/3_training_a_classifier/MWE.py\", line 16, in &lt;module&gt;\n    dataiter = iter(trainloader)\n  File \"D:\\Program Files\\Python35\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 451, in __iter__\n    return _DataLoaderIter(self)\n  File \"D:\\Program Files\\Python35\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 239, in __init__\n    w.start()\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\process.py\", line 105, in start\n    self._popen = self._Popen(self)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\context.py\", line 212, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\context.py\", line 313, in _Popen\n    return Popen(process_obj)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\popen_spawn_win32.py\", line 66, in __init__\n    reduction.dump(process_obj, to_child)\n  File \"D:\\Program Files\\Python35\\lib\\multiprocessing\\reduction.py\", line 59, in dump\n    ForkingPickler(file, protocol).dump(obj)\nBrokenPipeError: [Errno 32] Broken pipe\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>The output \"<code>Files already downloaded and verified</code>\" should only be printed once \u2013 when creating <code>trainset</code> \u2013 but it's printed twice.</p>\n\n<p>Why is this? And why am I getting a <code>BrokenPipeError</code>? And most importantly, how do I fix this?</p>\n\n<p>I'm running Windows 10, Python 3.5.3, CUDA 8.0.60 and a PyTorch 0.4.0 that I have installed by running</p>\n\n<pre><code>pip install http://download.pytorch.org/whl/cu80/torch-0.4.0-cp35-cp35m-win_amd64.whl\npip install torchvision\n</code></pre>\n\n<p>as instructed by the <a href=\"https://pytorch.org/\" rel=\"nofollow noreferrer\">PyTorch webpage</a> (well, they use <code>pip3</code> instead of <code>pip</code>, but that shouldn't make any difference since Python 3.5 is the only Python version I have installed).</p>\n"}, {"tags": ["python", "class", "object"], "comments": [{"owner": {"reputation": 2837, "user_id": 1253428, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/umsHF.png?s=128&g=1", "display_name": "Carl Smith", "link": "https://stackoverflow.com/users/1253428/carl-smith"}, "edited": false, "score": 0, "creation_date": 1528921332, "post_id": 50845553, "comment_id": 88694815, "body": "The last line should begin <code>my_example.example_method = ...</code> (no parens, as it&#39;s not an invocation, it&#39;s a reference)."}], "answers": [{"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 1, "last_activity_date": 1528921191, "creation_date": 1528921191, "answer_id": 50845619, "question_id": 50845553, "link": "https://stackoverflow.com/questions/50845553/how-to-modify-a-class-method/50845619#50845619", "title": "How to modify a class method?", "body": "<pre><code># first you replace the method\n\nmy_example.example_method = types.MethodType(different_method, my_example)\n\n# then you call it\nmy_example.example_method(10,20,30)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 3, "last_activity_date": 1528921550, "last_edit_date": 1528921550, "creation_date": 1528921221, "answer_id": 50845628, "question_id": 50845553, "link": "https://stackoverflow.com/questions/50845553/how-to-modify-a-class-method/50845628#50845628", "title": "How to modify a class method?", "body": "<p>You're mixing up function objects, and the values returned by calls to those functions.</p>\n\n<p>First, on the left side of the <code>=</code>, you have this:</p>\n\n<pre><code>my_example.example_method()\n</code></pre>\n\n<p>So you're not trying to replace the <code>example_method</code> attribute of <code>my_example</code>, you're trying to assign to whatever it returns (here, <code>None</code>). That makes no sense.</p>\n\n<p>Then, on the right side, you're trying to build a method, not out of <code>different_method</code>, but out of the result of calling <code>different_method(10,20,30)</code>. This also makes no sense.</p>\n\n<p>What you want is:</p>\n\n<pre><code>my_example.example_method = types.MethodType(different_method, my_example)\n</code></pre>\n\n<hr>\n\n<p>Now you can call it the same as any other method:</p>\n\n<pre><code>my_example.example_method(10, 20, 30)\n</code></pre>\n\n<hr>\n\n<p>But, while we're at it, your <code>different_method</code> doesn't make much sense either. It takes parameters <code>a, b, c</code>, but completely ignores them, and instead just adds <code>self.a + self.b + self.c</code>. While this isn't <em>illegal</em>, it's kind of silly\u2014and it means that the new method doesn't have the same signature as the one you were replacing, which is bound to cause confusion. So what you probably want is:</p>\n\n<pre><code>def different_method(self):\n    print(self.a + self.b + self.c + self.pi)\n\nmy_example.example_method = types.MethodType(different_method, my_example)\n\nmy_example.example_method()\n</code></pre>\n\n<p>If you want to add <em>different</em> values, you'd create a new example object, just as you would when you want to multiply different values:</p>\n\n<pre><code>my_other_example = example_class(10, 20, 30)\nmy_other_example.example_method = types.MethodType(different_method, my_other_example)\nmy_other_example.example_method()\n</code></pre>\n\n<hr>\n\n<p>If you plan to do a lot of this monkeypatching, you may want to write a function to patch example objects:</p>\n\n<pre><code>def patch_example(example, different_method):\n    example.example_method = types.MethodType(different_method, example)\n</code></pre>\n\n<p>\u2026 so you can do this:</p>\n\n<pre><code>my_third_example = example_class(1, 2.5, 0+1j)\npatch_example(my_third_example)\nmy_third_example.example_method()\n</code></pre>\n\n<p>(However, if you really do need to do this multiple times, you probably wanted to create a subclass, or some other higher-level abstraction.)</p>\n"}], "owner": {"reputation": 658, "user_id": 9135359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhZIk.png?s=128&g=1", "display_name": "Code Monkey", "link": "https://stackoverflow.com/users/9135359/code-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 50845628, "answer_count": 2, "score": 1, "last_activity_date": 1528930033, "creation_date": 1528920965, "last_edit_date": 1528930033, "question_id": 50845553, "link": "https://stackoverflow.com/questions/50845553/how-to-modify-a-class-method", "title": "How to modify a class method?", "body": "<p>I wish to modify the method of a class by changing its behaviour. Please note that I do NOT wish to rewrite another method altogether as it is complex and involves many variables and interacts with other methods. Here is an example of what I'm trying to do:</p>\n\n<pre><code>import types\nclass example_class(object):\n    def __init__(self, a, b, c):\n        self.a = a\n        self.b = b\n        self.c = c\n        self.pi = 3.14\n\n    def example_method(self):\n        print(self.a * self.b * self.c * self.pi)\n\n#Create an instance of the object and call the method.\nmy_example = example_class(3, 5, 7)\nmy_example.example_method()\n\n#Now I wish to change the \"example_method\" to add instead of multiply. \ndef different_method(self, a, b, c):\n    print(self.a + self.b + self.c + self.pi)\n\nmy_example.example_method() = types.MethodType(different_method(10,20,30), my_example)\n</code></pre>\n\n<p>I tried using types.MethodType but the above does not work. Note that I am trying to replace the example.method() with different.method(). I would like to give the method different values to calculate as well. </p>\n\n<p>EDIT:\nThank you to all who answered my question! You have clarified it for me and now I can monkeypatch my classes! However, I should have clarified further. I wished to modify my method to include yet another variable. So my different_method should be like this:</p>\n\n<pre><code> #Now I wish to change the \"example_method\" to add instead of multiply. \n def different_method(self, a, b, c, extra_variable):\n     print(self.a + self.b + self.c + extra_variable + self.pi)\n</code></pre>\n\n<p>I am having difficulty adding the extra variable-if you could provide some guidance on that, I\u2019d be very grateful!</p>\n"}, {"tags": ["python", "graph", "pyqtgraph", "graph-visualization"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1528921450, "post_id": 50845534, "comment_id": 88694874, "body": "you could explain yourself better, you expect <code>test_buffer = np.random.randn(100,)         app._update() </code>update the graph?"}, {"owner": {"reputation": 14931, "user_id": 624869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d253a59ca9d41509957700a5e277c93d?s=128&d=identicon&r=PG", "display_name": "JDS", "link": "https://stackoverflow.com/users/624869/jds"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1528921890, "post_id": 50845534, "comment_id": 88695124, "body": "Yes, that&#39;s what I was hoping to have happen, I&#39;ll add to question."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1528921931, "post_id": 50845534, "comment_id": 88695141, "body": "How often do you want it to be updated?"}, {"owner": {"reputation": 14931, "user_id": 624869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d253a59ca9d41509957700a5e277c93d?s=128&d=identicon&r=PG", "display_name": "JDS", "link": "https://stackoverflow.com/users/624869/jds"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1528921971, "post_id": 50845534, "comment_id": 88695166, "body": "The <code>Pyqt</code> graph module is really fast, essentially the update loop reads at hundreds of frames per second, and re-draws. So as fast as possible."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1528922281, "post_id": 50845534, "comment_id": 88695313, "body": "Okay, I understand you but do not expect more than 60FPS, your calculation of FPS is not correct, you are only counting the time the function is executed _update(), that does not guarantee that the painting is 300FPS as you are printing, Qt and all libraries graph does not automatically update the view if not when necessary, for example 60FPS is 16.6ms, assume that you place the data in 2ms intervals only then only 1 of every 8 data will be shown. I can make it update but I indicate that your calculation is not real."}, {"owner": {"reputation": 14931, "user_id": 624869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d253a59ca9d41509957700a5e277c93d?s=128&d=identicon&r=PG", "display_name": "JDS", "link": "https://stackoverflow.com/users/624869/jds"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1528922780, "post_id": 50845534, "comment_id": 88695536, "body": "That&#39;s fine, FPS isn&#39;t a big deal since in practice it&#39;s pretty fast anyways. Just need that real-time update from a buffer variable somehow."}], "answers": [{"comments": [{"owner": {"reputation": 14931, "user_id": 624869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d253a59ca9d41509957700a5e277c93d?s=128&d=identicon&r=PG", "display_name": "JDS", "link": "https://stackoverflow.com/users/624869/jds"}, "edited": false, "score": 0, "creation_date": 1528947500, "post_id": 50846322, "comment_id": 88701411, "body": "Thank you for the comprehensive answer, I will test tomorrow. Regarding calculations (I think you&#39;re referring to FPS), I am not sure if they are correct, it is code I found elsewhere and just started to play with."}, {"owner": {"reputation": 14931, "user_id": 624869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d253a59ca9d41509957700a5e277c93d?s=128&d=identicon&r=PG", "display_name": "JDS", "link": "https://stackoverflow.com/users/624869/jds"}, "edited": false, "score": 0, "creation_date": 1529287996, "post_id": 50846322, "comment_id": 88803752, "body": "I tried it out, it&#39;s functional, but not exactly what I need. How can I include this class in another file, and then use a variable from other code as the data buffer (constantly being updated) that this object then reads and plots?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 14931, "user_id": 624869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d253a59ca9d41509957700a5e277c93d?s=128&d=identicon&r=PG", "display_name": "JDS", "link": "https://stackoverflow.com/users/624869/jds"}, "edited": false, "score": 0, "creation_date": 1529288146, "post_id": 50846322, "comment_id": 88803771, "body": "@JDS  I do not understand, you will understand that your idea is very broad and abstract, my solution solves what you show, not what you want and do not place in your question. If you are not clear on your question do not expect an answer for what you do not mention."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 2, "last_activity_date": 1528924201, "creation_date": 1528924201, "answer_id": 50846322, "question_id": 50845534, "link": "https://stackoverflow.com/questions/50845534/pyqtgraph-class-how-to-automatically-update-graph-values-from-data-buffer/50846322#50846322", "title": "Pyqtgraph class: how to automatically update graph values from data buffer?", "body": "<p>In the comments, indicate that your calculations are incorrect so I will eliminate the <code>_update()</code> method from my answer.</p>\n\n<p>Going to the point, the method <code>exec_()</code> creates an event loop that conceptually is a while True so that after that line no other line of code is executed, so your code from <code>while 1:</code> is never executed.</p>\n\n<p>On the other hand if we eliminate it we could not place the <code>while 1:</code> inside the GUI thread since it blocks it and does not let the GUI review the various events or update the GUI for example the painting task.</p>\n\n<p>Also if you use <code>test_buffer = np.random.randn(100,)</code> that does not imply that <code>self.dataBuffer</code> is updated, they are not linked.</p>\n\n<p>The solution is to place the <code>while 1:</code> inside a new thread and send the data by signals to the main thread.</p>\n\n<pre><code>import sys\n\nimport threading\n\nimport numpy as np\nfrom pyqtgraph.Qt import QtGui, QtCore\nimport pyqtgraph as pg\n\n\nclass App(QtGui.QMainWindow):\n    def __init__(self, buffer_size=0, data_buffer=[], graph_title=\"\", parent=None):\n        super(App, self).__init__(parent)\n\n        #### Create Gui Elements ###########\n        self.mainbox = QtGui.QWidget()\n        self.setCentralWidget(self.mainbox)\n        self.mainbox.setLayout(QtGui.QVBoxLayout())\n\n        self.canvas = pg.GraphicsLayoutWidget()\n        self.mainbox.layout().addWidget(self.canvas)\n\n        self.label = QtGui.QLabel()\n        self.mainbox.layout().addWidget(self.label)\n\n        self.view = self.canvas.addViewBox()\n        self.view.setAspectLocked(True)\n        self.view.setRange(QtCore.QRectF(0,0, 100, 100))\n\n        self.numDstreams = 1\n        self.bufferLength = buffer_size\n        self.graphTitle = graph_title\n\n        self.otherplot = [[self.canvas.addPlot(row=i,col=0, title=self.graphTitle)] # , repeat line for more\n                           for i in range(0,self.numDstreams)]\n        self.h2 = [[self.otherplot[i][0].plot(pen='r')] for i in range(0,self.numDstreams)] # , self.otherplot[i][1].plot(pen='g'), self.otherplot[i][2].plot(pen='b')\n        self.ydata = [[np.zeros((1,self.bufferLength))] for i in range(0,self.numDstreams)] # ,np.zeros((1,self.bufferLength)),np.zeros((1,self.bufferLength))\n\n        for i in range(0,self.numDstreams):\n            self.otherplot[i][0].setYRange(min= -100, max= 100) \n        self.update_plot(data_buffer)\n\n    def update_plot(self, data):\n        self.dataBuffer = data\n        for i in range(0, self.numDstreams):\n            self.ydata[i][0] = np.array(self.dataBuffer)\n            self.h2[i][0].setData(self.ydata[i][0])\n\n\ndef CreateGraph(graph_title): \n    thisapp1 = App(graph_title=graph_title)\n    thisapp1.show()\n    return thisapp1\n\nclass Helper(QtCore.QObject):\n    bufferChanged = QtCore.pyqtSignal(object)\n\ndef generate_buffer(helper):\n    while 1:\n        test_buffer = np.random.randn(100,)\n        helper.bufferChanged.emit(test_buffer)\n        QtCore.QThread.msleep(1)\n\nif __name__ == \"__main__\":\n    app = QtGui.QApplication(sys.argv)\n\n    graph = CreateGraph(\"Activity Score\")\n    helper = Helper()\n    threading.Thread(target=generate_buffer, args=(helper, ), daemon=True).start()\n    helper.bufferChanged.connect(graph.update_plot)\n\n    if sys.flags.interactive != 1 or not hasattr(QtCore, 'PYQT_VERSION'):\n        sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 14931, "user_id": 624869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d253a59ca9d41509957700a5e277c93d?s=128&d=identicon&r=PG", "display_name": "JDS", "link": "https://stackoverflow.com/users/624869/jds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2423, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1606562566, "creation_date": 1528920888, "last_edit_date": 1606562566, "question_id": 50845534, "link": "https://stackoverflow.com/questions/50845534/pyqtgraph-class-how-to-automatically-update-graph-values-from-data-buffer", "title": "Pyqtgraph class: how to automatically update graph values from data buffer?", "body": "<p>I am using the <code>pyqtgraph</code> module to make a nice and simple real-time graph. I want to make it as a class/object that can take in a data buffer, and on update, re-read the data buffer to draw the graph. I'm having some trouble getting data buffer values from outside the class code into the object.</p>\n<p>Code below:</p>\n<pre><code>import pyqtgraph as pg\n# pip install pyqtgraph\n\n\nclass App(QtGui.QMainWindow):\n    def __init__(self, buffer_size, data_buffer, graph_title, parent=None):\n        super(App, self).__init__(parent)\n\n        #### Create Gui Elements ###########\n        self.mainbox = QtGui.QWidget()\n        self.setCentralWidget(self.mainbox)\n        self.mainbox.setLayout(QtGui.QVBoxLayout())\n\n        self.canvas = pg.GraphicsLayoutWidget()\n        self.mainbox.layout().addWidget(self.canvas)\n\n        self.label = QtGui.QLabel()\n        self.mainbox.layout().addWidget(self.label)\n\n        self.view = self.canvas.addViewBox()\n        self.view.setAspectLocked(True)\n        self.view.setRange(QtCore.QRectF(0,0, 100, 100))\n\n        self.numDstreams = 1\n        self.bufferLength = buffer_size\n        self.dataBuffer = data_buffer\n        self.graphTitle = graph_title\n        \n        self.otherplot = [[self.canvas.addPlot(row=i,col=0, title=self.graphTitle)] # , repeat line for more\n                           for i in range(0,self.numDstreams)]\n        self.h2 = [[self.otherplot[i][0].plot(pen='r')] for i in range(0,self.numDstreams)] # , self.otherplot[i][1].plot(pen='g'), self.otherplot[i][2].plot(pen='b')\n        self.ydata = [[np.zeros((1,self.bufferLength))] for i in range(0,self.numDstreams)] # ,np.zeros((1,self.bufferLength)),np.zeros((1,self.bufferLength))\n        \n        for i in range(0,self.numDstreams):\n            self.otherplot[i][0].setYRange(min= -100, max= 100) \n\n        self.counter = 0\n        self.fps = 0.\n        self.lastupdate = time.time()\n\n        #### Start  #####################\n        self._update()\n\n    def _update(self):\n    \n        \n        for i in range(0,self.numDstreams):\n            self.ydata[i][0] = np.array(self.dataBuffer)\n            \n            self.h2[i][0].setData(self.ydata[i][0])\n            \n        \n        now = time.time()\n        dt = (now-self.lastupdate)\n        if dt &lt;= 0:\n            dt = 0.000000000001\n        fps2 = 1.0 / dt\n        self.lastupdate = now\n        self.fps = self.fps * 0.9 + fps2 * 0.1\n        tx = 'Mean Frame Rate:  {fps:.3f} FPS'.format(fps=self.fps )\n        self.label.setText(tx)\n        QtCore.QTimer.singleShot(1, self._update)\n        self.counter += 1\n        \n        \ndef CreateGraph(buffer_size, data_buffer, graph_title): \n        \n    app1 = QtGui.QApplication(sys.argv)\n    thisapp1 = App(buffer_size, data_buffer, graph_title)\n    thisapp1.show()\n    \n    sys.exit(app1.exec_())\n    return app1\n    \nif __name__ == &quot;__main__&quot;:\n    \n    test_buffer = np.random.randn(100,)\n    \n    app = CreateGraph(100, test_buffer, &quot;Activity Score&quot;)\n    \n    while 1:\n        test_buffer = np.random.randn(100,)\n        app._update()\n</code></pre>\n<p>The code works in that it draws an initial graph of the random data. However, it doesn't update in the loop as I'd want. When I use this object, I want it to update its graph data buffer based on an outside variable, as I'm trying. Instead it's stacking, i.e. it only reads the data for the first time.</p>\n<h2>Edit</h2>\n<p>To be clear, I was expecting <code>test_buffer = np.random.randn(100,) app._update()</code> to update the graph continuously in the loop. I need the graph to be able to read a buffer variable in real-time and draw new data.</p>\n<p>How can I do this?</p>\n"}, {"tags": ["python", "bash"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 3, "creation_date": 1528921022, "post_id": 50845531, "comment_id": 88694646, "body": "Your Python script never calls the function <code>main()</code>, so that <code>sys.exit(1)</code> never happens, so it just falls off the end of the script and returns 0 by default."}, {"owner": {"reputation": 95080, "user_id": 89817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df253c3b6533949ea94f31f328f3e769?s=128&d=identicon&r=PG", "display_name": "Gordon Davisson", "link": "https://stackoverflow.com/users/89817/gordon-davisson"}, "edited": false, "score": 1, "creation_date": 1528936538, "post_id": 50845531, "comment_id": 88699425, "body": "I would not use the name &quot;test&quot; for a shell function (or alias or script or...). That&#39;s the name of an important builtin command, and overriding it might cause other scripts to fail in <i>really</i> weird ways."}], "answers": [{"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 5, "last_activity_date": 1528921023, "creation_date": 1528921023, "answer_id": 50845573, "question_id": 50845531, "link": "https://stackoverflow.com/questions/50845531/why-does-bash-echo-print-0-for-a-python-function-that-exits-1/50845573#50845573", "title": "Why does bash echo print 0 for a Python function that exits 1", "body": "<p>Because you're defining, but never calling the <code>main()</code> function. The code finishes as normal (by reaching the end of the file) and return code is 0 in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 1600, "user_id": 1728372, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/16656baa6430a8856ade66db7b97c985?s=128&d=identicon&r=PG", "display_name": "Dan Cook", "link": "https://stackoverflow.com/users/1728372/dan-cook"}, "edited": false, "score": 1, "creation_date": 1528921804, "post_id": 50845600, "comment_id": 88695083, "body": "So simple. Thanks for all answers. Chose this because it included code for solution."}], "tags": [], "owner": {"reputation": 972, "user_id": 2237625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r2QpA.jpg?s=128&g=1", "display_name": "bitsplit", "link": "https://stackoverflow.com/users/2237625/bitsplit"}, "is_accepted": true, "score": 4, "last_activity_date": 1528921544, "last_edit_date": 1528921544, "creation_date": 1528921102, "answer_id": 50845600, "question_id": 50845531, "link": "https://stackoverflow.com/questions/50845531/why-does-bash-echo-print-0-for-a-python-function-that-exits-1/50845600#50845600", "title": "Why does bash echo print 0 for a Python function that exits 1", "body": "<p>Because python will not call <code>main</code> by default.  You have to call it explicitly.</p>\n\n<p>You want:</p>\n\n<pre><code>import sys\ndef main():\n    sys.exit(1)\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}], "owner": {"reputation": 1600, "user_id": 1728372, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/16656baa6430a8856ade66db7b97c985?s=128&d=identicon&r=PG", "display_name": "Dan Cook", "link": "https://stackoverflow.com/users/1728372/dan-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 50845600, "answer_count": 2, "score": 3, "last_activity_date": 1528921544, "creation_date": 1528920873, "question_id": 50845531, "link": "https://stackoverflow.com/questions/50845531/why-does-bash-echo-print-0-for-a-python-function-that-exits-1", "title": "Why does bash echo print 0 for a Python function that exits 1", "body": "<p>With a Python function in <code>testreturn.py</code> defined as:</p>\n\n<pre><code>import sys\ndef main():\n    sys.exit(1)\n</code></pre>\n\n<p>When called from a bash function in <code>scrip.sh</code> defined as:</p>\n\n<pre><code>#!/bin/bash\nfunction test()\n{  \n   python testreturn.py\n   echo $?\n}\n</code></pre>\n\n<p>Why does the following command:</p>\n\n<p><code>test</code></p>\n\n<p>Print</p>\n\n<p><code>0\n</code></p>\n\n<p>I would like the bash function to print the exit code of the python script.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "is_accepted": true, "score": 1, "last_activity_date": 1528921017, "creation_date": 1528921017, "answer_id": 50845571, "question_id": 50845528, "link": "https://stackoverflow.com/questions/50845528/formatting-a-string-in-python-with-variable-number-of-desired-fill-parameter/50845571#50845571", "title": "Formatting a string in python with variable number of desired fill parameter", "body": "<p>It can be done easily by following line of code-</p>\n\n<pre><code>s.rjust(fill_width,fill_parameter)\n</code></pre>\n\n<p>where s is the string,you can put the VARIABLE no. of bit-places you want your string to occupy in total and put fill-parameter as \" \"</p>\n\n<p>As example you can see</p>\n\n<pre><code>str = \"hello world\";\nprint str.rjust(15, \" \")\n</code></pre>\n\n<p>this code will result in </p>\n\n<pre><code>    hello world\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9185187"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 50845571, "answer_count": 1, "score": 0, "last_activity_date": 1528981755, "creation_date": 1528920861, "last_edit_date": 1528981755, "question_id": 50845528, "link": "https://stackoverflow.com/questions/50845528/formatting-a-string-in-python-with-variable-number-of-desired-fill-parameter", "title": "Formatting a string in python with variable number of desired fill parameter", "body": "<p>I am trying to implement left padding of variable length of a string with desired fill parameter with the simplest logic if possible, even a pre-built function. e.g: <code>123</code> as <code>dd123</code> where d is the fill parameter.[<code>\" \"</code> in this case]\nAs I found out from some sources this can be done via <code>zfill</code>.But it pads the string with left zeros.. But I want space padded string.</p>\n\n<p>Again space<code>\" \"</code> padding can be done via <code>'{:&gt;10}'.format('test')</code>-Still it is eligible only when the fill amount is hardcoded integer -as <code>'{:&gt;x}'.format('test')</code> didn't work <code>where x is the variable predefined with an integer value</code>..</p>\n\n<p>So where is the combined solution of those 2 problems?</p>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["python", "image", "medical", "nifti"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1528921557, "post_id": 50845524, "comment_id": 88694940, "body": "You have NifTI files, I believe. DWIConverter used to convert DICOM&lt;-&gt;NifTI&lt;-&gt;nrrd, please check <a href=\"https://github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert\" rel=\"nofollow noreferrer\">github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert</a> or Slicer"}], "answers": [{"tags": [], "owner": {"reputation": 1488, "user_id": 2371987, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/bttAR.jpg?s=128&g=1", "display_name": "Francisco Maria Calisto", "link": "https://stackoverflow.com/users/2371987/francisco-maria-calisto"}, "is_accepted": false, "score": 0, "last_activity_date": 1541775821, "creation_date": 1541775821, "answer_id": 53228229, "question_id": 50845524, "link": "https://stackoverflow.com/questions/50845524/medical-imaging-pyradiomics-with-nii-gz-files/53228229#53228229", "title": "Medical imaging (PyRadiomics) with .nii.gz files", "body": "<p>The <a href=\"https://github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert\" rel=\"nofollow noreferrer\">DWIConverter</a> [1] converts diffusion-weighted MR images [2] in <a href=\"https://github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert\" rel=\"nofollow noreferrer\">DICOM</a> series into <code>nrrd</code> format for analysis in Slicer. It parses the <a href=\"https://github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert\" rel=\"nofollow noreferrer\">DICOM</a> header to extract necessary information about measurement frame, diffusion weighting directions, b-values, etc, and write out a <code>nrrd</code> image. For non-diffusion weighted <a href=\"https://www.dicomlibrary.com/dicom/\" rel=\"nofollow noreferrer\">DICOM</a> images, it loads in an entire <a href=\"https://github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert\" rel=\"nofollow noreferrer\">DICOM</a> series and writes out a single <a href=\"https://github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert\" rel=\"nofollow noreferrer\">DICOM</a> volume in a <code>.nhdr/.raw</code> pair.</p>\n\n<p>So that trying to convert your <strong>.nii.gz</strong> inside <a href=\"https://github.com/BRAINSia/BRAINSTools/tree/master/DWIConvert\" rel=\"nofollow noreferrer\">DICOM</a> files for the <code>nrrd</code> format is a possibility by using this tools. Also, you can look at the <a href=\"http://dmri.slicer.org/\" rel=\"nofollow noreferrer\">SlicerDMRI</a> [3] that is a similar module.</p>\n\n<p>[1] Janson, Andrew P., and Christopher R. Butson. \"Targeting Neuronal Fiber Tracts for Deep Brain Stimulation Therapy Using Interactive, Patient-Specific Models.\" Journal of visualized experiments: JoVE 138 (2018).</p>\n\n<p>[2] Ordidge, Roger J., et al. \"Correction of motional artifacts in diffusion-weighted MR images using navigator echoes.\" Magnetic resonance imaging 12.3 (1994): 455-460.</p>\n\n<p>[3] Isaiah Norton, Walid Ibn Essayed, Fan Zhang, Sonia Pujol, Alex Yarmarkovich, Alexandra J. Golby, Gordon Kindlmann, Demian Wassermann, Raul San Jose Estepar, Yogesh Rathi, Steve Pieper, Ron Kikinis, Hans J. Johnson, Carl-Fredrik Westin and Lauren J. O\u2019Donnell. SlicerDMRI: Open Source Diffusion MRI Software for Brain Cancer Research. Cancer Research 77(21), e101-e103, 2017.</p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 7326036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2903b4494db8f1c28a5dc29ccab62589?s=128&d=identicon&r=PG", "display_name": "JoostJM", "link": "https://stackoverflow.com/users/7326036/joostjm"}, "is_accepted": false, "score": 1, "last_activity_date": 1544778095, "creation_date": 1544778095, "answer_id": 53776413, "question_id": 50845524, "link": "https://stackoverflow.com/questions/50845524/medical-imaging-pyradiomics-with-nii-gz-files/53776413#53776413", "title": "Medical imaging (PyRadiomics) with .nii.gz files", "body": "<p>Although the examples are in .nrrd, PyRadiomics uses SimpleITK for image operations. This allows PyRadiomics to support a whole range of image formats, including .nii.gz. You don't have to convert them.</p>\n"}, {"comments": [{"owner": {"reputation": 190, "user_id": 11475715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MI1sN.jpg?s=128&g=1", "display_name": "Luismi98", "link": "https://stackoverflow.com/users/11475715/luismi98"}, "edited": false, "score": 0, "creation_date": 1588293565, "post_id": 56449929, "comment_id": 108850642, "body": "If you do this you lose all the metadata stored in the NII file. Metadata being things that you may consider essential such as the affine matrix, the slice separations, etc. This information is lost when you transform into numpy array."}], "tags": [], "owner": {"reputation": 103, "user_id": 7621227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpSnn.jpg?s=128&g=1", "display_name": "CrackedStone", "link": "https://stackoverflow.com/users/7621227/crackedstone"}, "is_accepted": false, "score": 1, "last_activity_date": 1559675612, "last_edit_date": 1559675612, "creation_date": 1559675280, "answer_id": 56449929, "question_id": 50845524, "link": "https://stackoverflow.com/questions/50845524/medical-imaging-pyradiomics-with-nii-gz-files/56449929#56449929", "title": "Medical imaging (PyRadiomics) with .nii.gz files", "body": "<p>You could turn NII into numpy array firstly and then turn it into NRRD with using:</p>\n\n<p><a href=\"https://pypi.org/project/pynrrd/\" rel=\"nofollow noreferrer\">nrrd</a> and <a href=\"https://pypi.org/project/nibabel/\" rel=\"nofollow noreferrer\">nibabel</a></p>\n\n<pre><code>import numpy as np\nimport nibabel as nib\nimport nrrd\n\n# Download NII\nexample_filename = \"image.nii.gz\"\nimage = nib.load(example_filename)\n\n# Turn into numpy array\narray = np.array(img.dataobj)\n\n# Save NRRD\nnrrd_path_to = \"image.nrrd\"\nnrrd.write(image_path_to, array)\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 9279770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a994c511bcced3385cb547c2be47cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Kim O", "link": "https://stackoverflow.com/users/9279770/kim-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1559675612, "creation_date": 1528920857, "last_edit_date": 1528921454, "question_id": 50845524, "link": "https://stackoverflow.com/questions/50845524/medical-imaging-pyradiomics-with-nii-gz-files", "title": "Medical imaging (PyRadiomics) with .nii.gz files", "body": "<p>I am trying to implement the package: </p>\n\n<p><a href=\"https://pyradiomics.readthedocs.io/en/latest/usage.html\" rel=\"nofollow noreferrer\">https://pyradiomics.readthedocs.io/en/latest/usage.html</a></p>\n\n<p>It looks super simple, but they expect <strong>.nrrd</strong> files. \nMy files are <strong>.nii.gz.</strong> How do I solve this?\nAlso, have anyone tried to apply PyRadiomics on TCIA data? if so, can I see your github or Jupyter Notebook? </p>\n\n<p>Thanks a lot. </p>\n"}, {"tags": ["python", "algorithm", "numpy", "scipy", "spatial"], "answers": [{"comments": [{"owner": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "edited": false, "score": 0, "creation_date": 1530193577, "post_id": 50851205, "comment_id": 89157455, "body": "Wow! What an interesting way to use numpy functions. Unfortunatelly, my data isn&#39;t structured, so I think I must use a KDTree. I&#39;ll post my solution in a moment. However, the new data is scattered in a matrix and I need to perform the same analysis, so I think in this case I could use your solution. I&#39;ll try it and leave you the comments"}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 1, "last_activity_date": 1528958829, "creation_date": 1528958829, "answer_id": 50851205, "question_id": 50845507, "link": "https://stackoverflow.com/questions/50845507/calculate-distance-between-neighbors-efficiently/50851205#50851205", "title": "Calculate distance between neighbors efficiently", "body": "<p>This may be one of the cases where KDTrees are not a good solution. This is because you are mapping to a grid, which is a very simple structure meaning there is nothing to gain from the KDTree's sophistication. Nearest grid point and distance can be found by simple arithmetic.</p>\n\n<p>Below is a simple example implementation. I'm using a Gaussian kernel but changing that to IDW if you prefer should be straight-forward.</p>\n\n<pre><code>import numpy as np\nfrom scipy import stats\n\ndef rasterize(coords, feature, gu, cutoff, kernel=stats.norm(0, 2.5).pdf):\n    # compute overlap (filter size / grid unit)\n    ovlp = int(np.ceil(cutoff/gu))\n\n    # compute raster dimensions\n    mn, mx = coords.min(axis=0), coords.max(axis=0)\n    reso = np.ceil((mx - mn) / gu).astype(int)\n    base = (mx + mn - reso * gu) / 2\n\n    # map coordinates to raster, the residual is the distance\n    grid_res = coords - base\n    grid_coords = np.rint(grid_res / gu).astype(int)\n    grid_res -= gu * grid_coords\n    # because of overlap we must add neighboring grid points to the nearest\n    gcovlp = np.c_[-ovlp:ovlp+1, np.zeros(2*ovlp+1, dtype=int)]\n    grid_coords = (gcovlp[:, None, None, :] + gcovlp[None, :, None, ::-1]\n                   + grid_coords).reshape(-1, 2)\n    # the corresponding residuals have the same offset with opposite sign\n    gdovlp = -gu * (gcovlp+1/2)\n    grid_res = (gdovlp[:, None, None, :] + gdovlp[None, :, None, ::-1]\n                + grid_res).reshape(-1, 2)\n    # discard off fov grid points and points outside the cutoff\n    valid, = np.where(((grid_coords&gt;=0) &amp; (grid_coords&lt;=reso)).all(axis=1) &amp; (\n        np.einsum('ij,ij-&gt;i', grid_res, grid_res) &lt;= cutoff*cutoff))\n    grid_res = grid_res[valid]\n    feature = feature[valid // (2*ovlp+1)**2]\n    # flatten grid so we can use bincount\n    grid_flat = np.ravel_multi_index(grid_coords[valid].T, reso+1)\n    return np.bincount(\n        grid_flat,\n        feature * kernel(np.sqrt(np.einsum('ij,ij-&gt;i', grid_res, grid_res))),\n        (reso + 1).prod()).reshape(reso+1)\n\n\n\ngu = 5\ncutoff = 10\ncoords = np.random.randn(10_000, 2) * (100, 20)\ncoords[:, 1] += 80 * np.sin(coords[:, 0] / 40)\nfeature = np.random.uniform(0, 1000, (10_000,))\n\nfrom timeit import timeit\n\nprint(timeit(\"rasterize(coords, feature, gu, cutoff)\", globals=globals(), number=100)*10, 'ms')\n\npic = rasterize(coords, feature, gu, cutoff)\n\nimport pylab\npylab.pcolor(pic, cmap=pylab.cm.jet)\npylab.colorbar()\npylab.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/SnUJO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SnUJO.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 777, "user_id": 3591470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-0ehuqmWbVAc/AAAAAAAAAAI/AAAAAAAAAEY/bMXqcomDArM/photo.jpg?sz=128", "display_name": "fferrin", "link": "https://stackoverflow.com/users/3591470/fferrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528958829, "creation_date": 1528920807, "question_id": 50845507, "link": "https://stackoverflow.com/questions/50845507/calculate-distance-between-neighbors-efficiently", "title": "Calculate distance between neighbors efficiently", "body": "<p>I have data geographically scattered without any kind of pattern and I need to create an image where the value of each pixel is an average of the neighbors of that pixel that are less than X meters.</p>\n\n<p>For this I use the library <code>scipy.spatial</code> to generate a KDTree with the data (<code>cKDTree</code>). Once the data structure is generated, I locate the pixel geographically and locate the geographic points that are closest.</p>\n\n<pre><code># Generate scattered data points\ncoord_cart= [\n    [\n        feat.geometry().GetY(),\n        feat.geometry().GetX(),\n        feat.GetField(feature),\n    ] for feat in layer\n]\n\n# Create KDTree structure\ntree = cKDTree(coord_cart)\n\n# Get raster image dimensions\npixel_size = 5\nsource_layer = shapefile.GetLayer()\nx_min, x_max, y_min, y_max = source_layer.GetExtent()\n\nx_res = int((x_max - x_min) / pixel_size)\ny_res = int((y_max - y_min) / pixel_size)\n\n# Create grid\nx = np.linspace(x_min, x_max, x_res)\ny = np.linspace(y_min, y_max, y_res)\n\nX, Y = np.meshgrid(x, y)\ngrid = np.array(zip(Y.ravel(), X.ravel()))\n\n# Get points that are less than 10 meters away\ninds = tree.query_ball_point(grid, 10)\n\n# inds is an np.array of lists of different length, so I need to convert it into an array of n_points x maximum number of neighbors\nll = np.array([len(l) for l in inds])\nmaxlen = max(ll)\narr = np.zeros((len(ll), maxlen), int)\n\n# I don't know why but inds is an array of list, so I convert it into an array of array to use grid[inds]\n# I THINK THIS IS A LITTLE INEFFICIENT\nfor i in range(len(inds)):\n    inds[i].extend([i] * (maxlen - len(inds[i])))\n    arr[i] = np.array(inds[i], dtype=int)\n\n# AND THIS DOESN'T WORK\nd = np.linalg.norm(grid - grid[inds])\n</code></pre>\n\n<p>Is there a better way to do this? I'm trying to use <a href=\"https://en.wikipedia.org/wiki/Inverse_distance_weighting\" rel=\"nofollow noreferrer\">IDW</a> to perform the interpolation between the points. I found this <a href=\"http://earthpy.org/interpolation_between_grids_with_ckdtree.html\" rel=\"nofollow noreferrer\">snippet</a> that uses a function that gets the N nearest points but it does not work for me because I need that if there is no point in a radius R, the value of the pixel is 0.</p>\n\n<pre><code>d, inds = tree.query(zip(xt, yt, zt), k = 10)\nw = 1.0 / d**2\nair_idw = np.sum(w * air.flatten()[inds], axis=1) / np.sum(w, axis=1)\nair_idw.shape = lon_curv.shape\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "sql", "pandas", "datetime", "time-series"], "answers": [{"comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1528921712, "post_id": 50845615, "comment_id": 88695021, "body": "I was about to vote for yours because you realized you didn&#39;t need to sort using <code>ptp</code> :)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1528921753, "post_id": 50845615, "comment_id": 88695043, "body": "emmm, it is better to keep yours since you mention the key function early :-)"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 3, "last_activity_date": 1528921660, "last_edit_date": 1528921660, "creation_date": 1528921178, "answer_id": 50845615, "question_id": 50845484, "link": "https://stackoverflow.com/questions/50845484/how-to-calculate-the-duration-of-events-using-pandas-given-as-strings/50845615#50845615", "title": "How to calculate the duration of events using Pandas given as strings?", "body": "<p><strong><code>groupby</code></strong> with <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.ptp.html\" rel=\"nofollow noreferrer\"><strong><code>np.ptp</code></strong></a></p>\n\n<pre><code>df.groupby('id').time.apply(np.ptp)\n\nid\n420   00:10:00\n425   04:01:00\n427   00:00:00\n428   01:01:00\nName: time, dtype: timedelta64[ns]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 9938085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M8Aq8.jpg?s=128&g=1", "display_name": "Sepa", "link": "https://stackoverflow.com/users/9938085/sepa"}, "edited": false, "score": 0, "creation_date": 1528921631, "post_id": 50845623, "comment_id": 88694983, "body": "This is the first one I tried, the last line of the error reads: TypeError: unsupported operand type(s) for -: &#39;str&#39; and &#39;str&#39;"}, {"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "reply_to_user": {"reputation": 91, "user_id": 9938085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M8Aq8.jpg?s=128&g=1", "display_name": "Sepa", "link": "https://stackoverflow.com/users/9938085/sepa"}, "edited": false, "score": 0, "creation_date": 1528922110, "post_id": 50845623, "comment_id": 88695227, "body": "@Sepa seems like your <code>time</code> columns in not a <code>datetime</code> object. See the edit."}, {"owner": {"reputation": 91, "user_id": 9938085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M8Aq8.jpg?s=128&g=1", "display_name": "Sepa", "link": "https://stackoverflow.com/users/9938085/sepa"}, "edited": false, "score": 1, "creation_date": 1528922630, "post_id": 50845623, "comment_id": 88695477, "body": "That&#39;s exactly it! Thank you."}], "tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": true, "score": 0, "last_activity_date": 1528922088, "last_edit_date": 1528922088, "creation_date": 1528921204, "answer_id": 50845623, "question_id": 50845484, "link": "https://stackoverflow.com/questions/50845484/how-to-calculate-the-duration-of-events-using-pandas-given-as-strings/50845623#50845623", "title": "How to calculate the duration of events using Pandas given as strings?", "body": "<p>You need to sort the dataframe by <code>time</code> and group by <code>id</code> before getting the difference between <code>time</code> in each group.</p>\n\n<pre><code>df['time'] = pd.to_datetime(df['time'])\ndf.sort_values(by='time').groupby('id')['time'].apply(lambda g: g.max() - g.min()).reset_index(name='duration')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     id duration\n0   420 00:10:00\n1   425 04:01:00\n2   427 00:00:00\n3   428 01:01:00\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1528921218, "creation_date": 1528921218, "answer_id": 50845626, "question_id": 50845484, "link": "https://stackoverflow.com/questions/50845484/how-to-calculate-the-duration-of-events-using-pandas-given-as-strings/50845626#50845626", "title": "How to calculate the duration of events using Pandas given as strings?", "body": "<p>Group the dataframe by event IDs and select the smallest and the largest times:</p>\n\n<pre><code>df1 = df.groupby('id').agg([max, min])\n</code></pre>\n\n<p>Find the difference:</p>\n\n<pre><code>(df1[('time','max')] - df1[('time','min')]).reset_index()\n#    id          0\n#0  420   00:10:00\n#1  425   04:01:00\n#2  427   00:00:00\n#3  428   01:01:00\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 9938085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M8Aq8.jpg?s=128&g=1", "display_name": "Sepa", "link": "https://stackoverflow.com/users/9938085/sepa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 50845623, "answer_count": 3, "score": 1, "last_activity_date": 1528922395, "creation_date": 1528920721, "last_edit_date": 1528922395, "question_id": 50845484, "link": "https://stackoverflow.com/questions/50845484/how-to-calculate-the-duration-of-events-using-pandas-given-as-strings", "title": "How to calculate the duration of events using Pandas given as strings?", "body": "<p>After finding the following link regarding <a href=\"https://stackoverflow.com/questions/40804265/how-to-calculate-time-difference-by-group-using-pandas?newreg=fcb39e3a7e5d468a98ab438d2954ec6e\">calculating time differences using Pandas</a>, I'm still stuck attempting to fit that knowledge to my own data. Here's what my dataset looks like:</p>\n\n<pre><code>In [10]: df \nOut[10]:\n      id           time\n   0  420 1/3/2018 8:32\n   1  420 1/3/2018 8:36\n   2  420 1/3/2018 8:42\n   3  425 1/7/2018 12:35\n   4  425 1/7/2018 14:29\n   5  425 1/7/2018 16:15\n   6  425 1/7/2018 16:36\n   7  427 1/11/2018 20:50\n   8  428 1/13/2018 16:35\n   9  428 1/13/2018 17:36\n</code></pre>\n\n<p>I'd like to perform a groupby or another function on ID where the output is:</p>\n\n<pre><code>In [11]: pd.groupby(df[id])\nOut [11]:\n\n      id   time (duration)\n   0  420  0:10\n   1  425  4:01\n   2  427  0:00\n   3  428  1:01\n</code></pre>\n\n<p>The types for id and time are int64 and object respectively. Using python3 and pandas 0.20. </p>\n\n<p>Edit:\nComing from SQL, this appears that it would be functionally equivalent to:</p>\n\n<pre><code>select id, max(time) - min(time)\nfrom df\ngroup by id\n</code></pre>\n\n<p><strong>Edit 2</strong>:\nThank you all for the quick responses. All of the solutions give me some version of the following error. Not sure what is relevant to my particular dataset that I'm missing here:</p>\n\n<pre><code>TypeError: unsupported operand type(s) for -: 'str' and 'str'\n</code></pre>\n"}, {"tags": ["python", "openpyxl"], "comments": [{"owner": {"reputation": 4377, "user_id": 3244542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d97462f60717863214b3efca87c24?s=128&d=identicon&r=PG&f=1", "display_name": "CasualDemon", "link": "https://stackoverflow.com/users/3244542/casualdemon"}, "edited": false, "score": 1, "creation_date": 1528921045, "post_id": 50845483, "comment_id": 88694657, "body": "From <a href=\"https://bitbucket.org/openpyxl/openpyxl/issues/278/get_highest_row-column-are-unreliable\" rel=\"nofollow noreferrer\">bitbucket.org/openpyxl/openpyxl/issues/278/&hellip;</a>  &quot;2.2 allows you to call ws.calculate_dimension(force=True) in read-only mode. This will force openpyxl to go through all the cells in a sheet to find the max row and column values.&quot;"}, {"owner": {"reputation": 4377, "user_id": 3244542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d97462f60717863214b3efca87c24?s=128&d=identicon&r=PG&f=1", "display_name": "CasualDemon", "link": "https://stackoverflow.com/users/3244542/casualdemon"}, "edited": false, "score": 1, "creation_date": 1528921129, "post_id": 50845483, "comment_id": 88694702, "body": "Just to add to that, reading that thread it seems that different editors save <code>max_columns</code> value different ways, so it can&#39;t be relied on to figure out the columns that have data in them. (Hence using <code>calculate_dimension</code> instead)"}, {"owner": {"reputation": 684, "user_id": 2243184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3c3d532ae26d2aab62b89440ad21a8c?s=128&d=identicon&r=PG", "display_name": "physicist", "link": "https://stackoverflow.com/users/2243184/physicist"}, "reply_to_user": {"reputation": 4377, "user_id": 3244542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d97462f60717863214b3efca87c24?s=128&d=identicon&r=PG&f=1", "display_name": "CasualDemon", "link": "https://stackoverflow.com/users/3244542/casualdemon"}, "edited": false, "score": 0, "creation_date": 1528926373, "post_id": 50845483, "comment_id": 88697018, "body": "thank you that was helpful, additionally I noticed it is an excel thing if you scroll to right a lot then those blank columns become visible. I deleted all those blank columns and then saved and closed the file. And on reopening then the number of visible columns were back to 67 and then openpyxl read it correctly."}], "owner": {"reputation": 684, "user_id": 2243184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3c3d532ae26d2aab62b89440ad21a8c?s=128&d=identicon&r=PG", "display_name": "physicist", "link": "https://stackoverflow.com/users/2243184/physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 962, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1528920716, "creation_date": 1528920716, "question_id": 50845483, "link": "https://stackoverflow.com/questions/50845483/openpyxl-max-column-gives-wrong-number-of-columns", "title": "openpyxl - max_column gives wrong number of columns", "body": "<p>I have made some changes to a excel file, earlier the <code>max_column</code> was giving the correct count of number of columns ( which is <code>67</code> in my file) but now after the edit in excel file it returns <code>1024</code>. The edits were nothing spectacular just changed some entries in existing data, no new columns were added.</p>\n\n<p>Any common typo or mistake I could have made?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528920800, "post_id": 50845469, "comment_id": 88694517, "body": "Hold on, the <code>OneToOneField</code> is <b>not</b> a <code>name</code>. In the database it is the same type as the primary key, and in Django it is a <i>lazy</i> fetch."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528921108, "post_id": 50845469, "comment_id": 88694691, "body": "Furthermore it is also very strange to define this on the <code>.save(..)</code> function. This means that each time you save the function, it will subtract another number of days?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528921368, "post_id": 50845469, "comment_id": 88694839, "body": "Looks to me you want <code>total_leave</code> to be 14 minus the sum of <code>toal_days</code> of <code>Leave_management</code> that corresponds to that <code>Employee</code>. Correct?"}, {"owner": {"reputation": 905, "user_id": 9874309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1698783090145977/picture?type=large", "display_name": "Chidananda Nayak", "link": "https://stackoverflow.com/users/9874309/chidananda-nayak"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528921456, "post_id": 50845469, "comment_id": 88694877, "body": "@WillemVanOnsem well its just for practice purpose, btw never thought  that way! well ,yes it would be a problem !"}, {"owner": {"reputation": 905, "user_id": 9874309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1698783090145977/picture?type=large", "display_name": "Chidananda Nayak", "link": "https://stackoverflow.com/users/9874309/chidananda-nayak"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1528922418, "post_id": 50845469, "comment_id": 88695384, "body": "@WillemVanOnsem yes , total_leave(Employee Model) = total_leave(Employee Model)   <i>minus</i> total_days(Leave_Management Model)"}], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 9874309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1698783090145977/picture?type=large", "display_name": "Chidananda Nayak", "link": "https://stackoverflow.com/users/9874309/chidananda-nayak"}, "edited": false, "score": 0, "creation_date": 1528923308, "post_id": 50845968, "comment_id": 88695766, "body": "Thanks for your answer, btw i tried to use signals ,then got integrity error with i could not able to debug.. .thats why went for neanderthal way.."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1528922574, "creation_date": 1528922574, "answer_id": 50845968, "question_id": 50845469, "link": "https://stackoverflow.com/questions/50845469/how-to-manipulate-value-of-one-model-field-from-another-model/50845968#50845968", "title": "How to manipulate value of one Model Field from another Model?", "body": "<p>In fact your <code>OneToOneField(..)</code> to an <code>Employee</code> is <em>not</em> a <code>name</code>. At the database level it will store values that correspond to <em>primary keys</em> of an <code>Employee</code>, and in Django, <code>name</code> will be a <em>lazy</em> fetch to the corresponding <code>Employee</code>. Therefore I suggest to rename your function to (for example) <code>employee</code>.</p>\n\n<p>Another problem is that you define it as a <code>OneToOneField</code>. That means that an <code>Employee</code> has <em>one</em> <code>Leave_management</code>. But based on the fields (<code>reason</code>, <code>from</code>, <code>to</code>, etc.), it looks like an <code>Employee</code> can have zero, one, or more <code>Leave_management</code>s. So that means it is a <code>ForeignKey</code>.</p>\n\n<p>So our model looks like:</p>\n\n<pre><code>class Leave_management(models.Model):\n\n    <b>employee</b> = models.<b>ForeignKey</b>(Employee,on_delete= models.CASCADE)\n    reason = models.CharField(max_length=50)\n    from = models.DateTimeField()\n    to = models.DateTimeField()\n    total_days = models.IntegerField()\n\n     def __str__(self):\n        return self<b>.employee</b>.name</code></pre>\n\n<p>Like the <code>__str__</code> function already suggests, we can obtain the name of the employee by querying <code>self.employee</code>, and we can then fetch its <code>.name</code> attribute.</p>\n\n<p>But now the challenge is what to do when save a <code>Leave_management</code> object. In that case the number of <code>total_leave</code> and <code>paid_leave</code> should be updated.</p>\n\n<p>We first have to figure out the total number of <code>total_days</code> that are stored in <code>Leave_management</code> objects related to an <code>Employee</code>, this is equal to:</p>\n\n<pre><code>(Leave_management.objects.filter(employee=some_employee)\n                         .aggregate(<b>totals=Sum('total_days')</b>)['totals'] or 0</code></pre>\n\n<p>So we can then subtract this from <code>14</code>, and store the (possibly) remaining days in <code>paid_leave</code>, like:</p>\n\n<pre><code>class Leave_management(models.Model):\n\n    # ...\n\n    def save(self, *args, **kwargs):\n        super(Leave_management, self).save(*args, **kwargs)\n        totals = (Leave_management.objects\n                                  .filter(employee=some_employee)\n                                  .aggregate(totals=Sum('total_days'))['totals'] or 0\n        employee = self.employee\n        unpaid = min(14, totals)\n        employee.total_leave = 14 - unpaid\n        employee.unpaid_leave = unpaid\n        employee.paid_leave = totals - unpaid\n        employee.save()</code></pre>\n\n<blockquote>\n  <p><strong>Note</strong>: typically we do <em>not</em> handle this by overriding the <code>.save(..)</code> function, but by using Django <em>signals</em>: triggers that can be implemented when certain objects are saved, etc. This especially should be used since the objects can be changed circumventing the <code>.save(..)</code> function, and sometimes such objects might get deleted as well. So the above is <strong>not a good design decision</strong>.</p>\n  \n  <p>Even when we use signals, it is a good idea to frequently (for example once a day) recalculate the total leave, and update the corresponding <code>Employee</code> models.</p>\n</blockquote>\n"}], "owner": {"reputation": 905, "user_id": 9874309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1698783090145977/picture?type=large", "display_name": "Chidananda Nayak", "link": "https://stackoverflow.com/users/9874309/chidananda-nayak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1089, "favorite_count": 0, "accepted_answer_id": 50845968, "answer_count": 1, "score": 3, "last_activity_date": 1528922574, "creation_date": 1528920637, "last_edit_date": 1528920801, "question_id": 50845469, "link": "https://stackoverflow.com/questions/50845469/how-to-manipulate-value-of-one-model-field-from-another-model", "title": "How to manipulate value of one Model Field from another Model?", "body": "<p>I have two models </p>\n\n<pre><code>class Employee(models.Model):\n    name = models.CharField(max_length=20)\n    ID = models.IntegerField()\n    basic_salary = models.IntegerField()     \n    total_leave = models.IntegerField(default = 14)\n    paid_leave = models.IntegerField(default = 0)\n    unpaid_leave = models.IntegerField(default = 0)\n\ndef __str__(self):\n    return self.name\n\nclass Leave_management(models.Model):\n\n    name = models.OnetoOneField(Employee,on_delete= models.CASCADE)\n    reason = models.CharField(max_length=50)\n    from = models.DateTimeField()\n    to = models.DateTimeField()\n    total_days = models.IntegerField()\n\n     def __str__(self):\n        return self.name\n</code></pre>\n\n<p>So,i want to minus 'total_days' of 'model-Leave_management'  from 'total_leave' field of 'model-Employee'. And as per leaves taken i want to update 'paid_leave' and 'unpaid_leave' sections. </p>\n\n<p>I can perform so if these two models would be one model(example below), But i dont know how to perform so in different models.</p>\n\n<pre><code>def save(self,*args,**kwargs):\n    if self.total_days&lt;=self.total_leave:\n        self.total_leave -= self.total_days\n        self.unpaid_leave = 14 - self.total_leave\n   else:\n       self.total_days -= 14\n       self.paid_leaves = self.total_days\n   super(Model_name,self).save(*args,**kwargs)\n</code></pre>\n\n<p>`\n Please be guiding me.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 2, "creation_date": 1528920737, "post_id": 50845466, "comment_id": 88694497, "body": "<code>test_list = [x + [0] for x in test_list]</code>? <code>test_list[i].insert(1, 0)</code> returns nothing so you just get a big list of nothing."}, {"owner": {"reputation": 13, "user_id": 9938147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e0e9952ef00d21fa5e82ae65de9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/9938147/mark"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1528920927, "post_id": 50845466, "comment_id": 88694590, "body": "That  was fast :-). Thank you very much it works perfect."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528920933, "post_id": 50845466, "comment_id": 88694595, "body": "Don&#39;t use list comprehensions to mutate lists. While you can sometimes get it to work, it&#39;s at the very best misleading and wasteful."}], "answers": [{"tags": [], "owner": {"reputation": 38746, "user_id": 238884, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/febf321631229c7408834722691c06e9?s=128&d=identicon&r=PG", "display_name": "Malvolio", "link": "https://stackoverflow.com/users/238884/malvolio"}, "is_accepted": false, "score": 0, "last_activity_date": 1528920854, "creation_date": 1528920854, "answer_id": 50845521, "question_id": 50845466, "link": "https://stackoverflow.com/questions/50845466/how-to-add-0s-into-two-dimensional-list-using-list-comprehension-in-python/50845521#50845521", "title": "How to add 0&#39;s into two dimensional list using list comprehension in python?", "body": "<p>Is your question \"what's the reason?\"</p>\n\n<p>The line </p>\n\n<pre><code> test_list = [test_list[i].insert(1, 0) for i in range(len(test_list))]\n</code></pre>\n\n<p>means \"make a list of the return values of this expression\".</p>\n\n<p>The return value of the expression <code>[].insert()</code> is None.  <code>test_list</code> will be set to a list of Nones.</p>\n"}, {"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 2, "last_activity_date": 1528920855, "creation_date": 1528920855, "answer_id": 50845522, "question_id": 50845466, "link": "https://stackoverflow.com/questions/50845466/how-to-add-0s-into-two-dimensional-list-using-list-comprehension-in-python/50845522#50845522", "title": "How to add 0&#39;s into two dimensional list using list comprehension in python?", "body": "<p>It doesn't work, because <code>list.insert()</code> modifies the list in-place and returns <code>None</code>, so you will end up with a list of <code>None</code>s which are return values from all <code>.insert()</code>s.</p>\n\n<p>List comprehension format is not adequate for what you want, because it is designed to create new lists, and you seem to want to modify the list in-place. If you want to create new lists instead, you can use this:</p>\n\n<pre><code>test_list = [sublist + [0] for sublist in test_list]\n</code></pre>\n\n<p>this works because the <code>+</code> operator on lists creates and returns a new list.</p>\n"}], "owner": {"reputation": 13, "user_id": 9938147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e0e9952ef00d21fa5e82ae65de9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/9938147/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 50845522, "answer_count": 2, "score": 1, "last_activity_date": 1528920913, "creation_date": 1528920614, "last_edit_date": 1528920703, "question_id": 50845466, "link": "https://stackoverflow.com/questions/50845466/how-to-add-0s-into-two-dimensional-list-using-list-comprehension-in-python", "title": "How to add 0&#39;s into two dimensional list using list comprehension in python?", "body": "<p>I'm trying to convert this for loop into \"list comprehension\" format if possible:</p>\n\n<p>This loop adds 0 into two dimensional list</p>\n\n<pre><code>test_list = [['string1'],['string2'],['string3']]\nfor i in range(len(test_list)):\n    test_list[i].insert(1, 0)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>test_list = [['string1',0],['string2',0],['string3',0]]\n</code></pre>\n\n<p>I've tried this but for some reason it doesn't work.</p>\n\n<pre><code>test_list = [test_list[i].insert(1, 0) for i in range(len(test_list))]\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528921484, "post_id": 50845431, "comment_id": 88694904, "body": "Ah -- so you need to compare values, considering each alpha string and each integer?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528921522, "post_id": 50845431, "comment_id": 88694928, "body": "Please label the source of this problem appropriately. Someone else posted a <i>very</i> similar version of this about an hour ago."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 2, "last_activity_date": 1528921734, "last_edit_date": 1528921734, "creation_date": 1528920858, "answer_id": 50845525, "question_id": 50845431, "link": "https://stackoverflow.com/questions/50845431/trying-to-find-a-match-between-strings-that-ignores-the-case-as-well-as-certain/50845525#50845525", "title": "Trying to find a match between strings that ignores the case as well as certain 0s", "body": "<p>I would use regex to remove the zeroes following a letter, and compare the results (uppercasing the source to be able to compare without casing):</p>\n\n<pre><code>import re\n\ndef compare(s1,s2):\n    def convert(s):\n        return re.sub(\"([A-Z])0+\",r\"\\1\",s.upper())\n    return convert(s1) == convert(s2)\n\n\nprint(compare(\"A02A18\",\"a2a18\"))\nprint(compare(\"A20A18\",\"a2a18\"))\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>True\nFalse\n</code></pre>\n\n<p>note: this also works for <code>A000B12</code>: the zeroes are just removed. However, if there's a risk of false positives because inputs can be <code>A00B1</code> and <code>AB1</code>, then the convert function could create a list of strings + converted integers as an alternative:</p>\n\n<pre><code>def convert(s):\n    return [int(x) if x.isdigit() else x.upper() for x in re.findall(\"[a-zA-Z]+|\\d+\",s)]\n</code></pre>\n\n<p>or a simpler version uppercasing the source from the start (shorter, probably slightly faster because there's only one call to <code>upper</code>)</p>\n\n<pre><code>def convert(s):\n    return [int(x) if x.isdigit() else x for x in re.findall(\"[A-Z]+|\\d+\",s.upper())]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1528921627, "post_id": 50845713, "comment_id": 88694981, "body": "that doesn&#39;t cover all cases. try <code>main(&quot;A020A18&quot;, &quot;a20a18&quot;)</code>. &quot;Assuming that you mean to say that all zeros should be ignored unless the last character is a zero&quot;: Your starting hypothesis is wrong"}], "tags": [], "owner": {"reputation": 86, "user_id": 9937692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4395b2569751c950a17126ad3646fc56?s=128&d=identicon&r=PG&f=1", "display_name": "S. Mansfield", "link": "https://stackoverflow.com/users/9937692/s-mansfield"}, "is_accepted": false, "score": -1, "last_activity_date": 1528921515, "creation_date": 1528921515, "answer_id": 50845713, "question_id": 50845431, "link": "https://stackoverflow.com/questions/50845431/trying-to-find-a-match-between-strings-that-ignores-the-case-as-well-as-certain/50845713#50845713", "title": "Trying to find a match between strings that ignores the case as well as certain 0s", "body": "<p>Assuming that you mean to say that all zeros should be ignored unless the last character is a zero, the following code should be able to perform the task.</p>\n\n<pre><code>def main(first, second):\n\nfirst = first.lower()\nsecond = second.lower()\n\nstring = \"\"\n\nfor i in range(0, (len(first)-1)):\n    if(first[i] != \"0\"):\n        string = string + first[i]\n\nstring = string + first[-1]\n\nif(string == second):\n    return True\nelse:\n    return False\n\n\nanswer = main(\"A02A18\", \"a2a18\")\nprint(answer)\n\nanswer = main(\"A15A20\", \"a15a2\")\nprint(answer)\n</code></pre>\n\n<p>This code returns <code>True</code> for the first call and <code>False</code> for the second. In the future, keep in mind the <code>string.lower()</code> and <code>string.upper()</code> functions. They are very useful in cases like this. </p>\n"}], "owner": {"reputation": 25, "user_id": 9928133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9539624a82928837d740239f1efc8cba?s=128&d=identicon&r=PG&f=1", "display_name": "Yasuke", "link": "https://stackoverflow.com/users/9928133/yasuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 50845525, "answer_count": 2, "score": 2, "last_activity_date": 1528921734, "creation_date": 1528920496, "question_id": 50845431, "link": "https://stackoverflow.com/questions/50845431/trying-to-find-a-match-between-strings-that-ignores-the-case-as-well-as-certain", "title": "Trying to find a match between strings that ignores the case as well as certain 0s", "body": "<p>There are two lists of strings that I am trying to find a match between. They both include strings that have different formatting but they point to the same list of information.</p>\n\n<p>One list include strings that are formatted as  \"A02A18\"   While the next could have the same string as \"a2a18\"</p>\n\n<p>Also there are some strings that may look like \"A05\" that would go with \"a5\"</p>\n\n<p>I say \"certain 0s\" in the title because I dont want there to be a string such as \"A15A20\" and \"a15a2\" to match if I strip all 0s from from the string (Obviously because 05 is the same as 5 but 20 is not the same as 2)</p>\n\n<p>I am looking for a way that can get them to match each other if found. </p>\n\n<p>It would ideally look like</p>\n\n<pre><code>first = \"A02A18\"\nsecond = \"a2a18\"\n\nif first == second:\n  print \"Yes\"\n</code></pre>\n\n<p>What I had-</p>\n\n<p>Initially I had a statement that would match strings like \"A05\" and \"a5\"\nThis looked like</p>\n\n<pre><code>first = \"A05\"\nsecond = \"a5\"\n\nif first[1:].lstrip(\"0\") == second[1:].lstrip(\"0\"):\n  print \"yeah\"\n</code></pre>\n\n<p>this would take both strings and compare them after the first index so in case of the previous example \"A05\" and a5 would be compared after the first letter to ignore the case. then lstrip \"0\" would strip the 0 that would be there. I originally did a strip 0 on both sides incase in the future a string had \"a05\" instead of \"a5\" (just trying to cover all bases)</p>\n\n<p>While this works for this case, it would not work for a strings such as \"A02A18\" and \"a2a18\"</p>\n"}, {"tags": ["python", "package-management"], "comments": [{"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1528921379, "post_id": 50845416, "comment_id": 88694843, "body": "Personally, I would recommend you use virtualenv or conda to manage your python2 or python3 environments. This seems like an XY problem. When you activate environments using those tools you will have pip point to a new path. If you want further details I can write an answer."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1528924857, "post_id": 50845416, "comment_id": 88696408, "body": "exactly as mentioned above, that is what venv is for. can also use pipenv."}], "owner": {"reputation": 862, "user_id": 2369045, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/4nin4.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/2369045/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528920431, "creation_date": 1528920431, "question_id": 50845416, "link": "https://stackoverflow.com/questions/50845416/changing-python-pip-defualt-install-directory", "title": "Changing python pip defualt install directory", "body": "<p>I followed <a href=\"https://stackoverflow.com/questions/24174821/how-to-change-default-install-location-for-pip\">this</a> guide to change my default install directory:</p>\n\n<p><strong>~/.pip/pip.conf</strong>:</p>\n\n<pre><code>[global]\ntarget=~/.python-global\n</code></pre>\n\n<p>So that <code>pip</code> does not interfere with <code>pacman</code>. However, I need to be able to separate python2 and python3. So is there a way to get <code>pip2</code> to point to <code>~/.python-global/python2</code> and <code>pip3</code> to point to <code>~/.python-global/python3</code>?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": true, "score": 0, "last_activity_date": 1528920613, "creation_date": 1528920613, "answer_id": 50845465, "question_id": 50845403, "link": "https://stackoverflow.com/questions/50845403/how-to-parse-the-gerrit-query-json-output-using-python-and-print-couple-of-items/50845465#50845465", "title": "How to parse the gerrit query json output using python and print couple of items?", "body": "<p><code>python -c \"import sys, json; print json.load(sys.stdin)['owner']['name'] + '&lt;' + json.load(sys.stdin)['owner']['email'] + '&gt;'\"</code></p>\n\n<p>You can add strings using <code>+</code></p>\n\n<p>And this can be shortened using a variable:</p>\n\n<pre><code>python -c \"import sys, json; o = json.load(sys.stdin)['owner']; print o['name'] + '&lt;' + o['email'] + '&gt;'\"\n</code></pre>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 50845465, "answer_count": 1, "score": 1, "last_activity_date": 1528920613, "creation_date": 1528920405, "question_id": 50845403, "link": "https://stackoverflow.com/questions/50845403/how-to-parse-the-gerrit-query-json-output-using-python-and-print-couple-of-items", "title": "How to parse the gerrit query json output using python and print couple of items?", "body": "<p>This prints the gerrit owner's name:</p>\n\n<pre><code>ssh -p $PORT $HOST gerrit query --format=JSON change:12345 | head -n 1 | python -c \"import sys, json; print json.load(sys.stdin)['owner']['name']\"\n</code></pre>\n\n<p>this prints email:</p>\n\n<pre><code>ssh -p $PORT $HOST gerrit query --format=JSON change:12345 | head -n 1 | python -c \"import sys, json; print json.load(sys.stdin)['owner']['email']\"\n</code></pre>\n\n<p>How to make it print <code>\"name &lt;email&gt;\"</code> ?</p>\n"}, {"tags": ["python", "python-3.x", "tensorflow", "gpu"], "answers": [{"tags": [], "owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "is_accepted": true, "score": 2, "last_activity_date": 1528967245, "creation_date": 1528967245, "answer_id": 50853722, "question_id": 50845372, "link": "https://stackoverflow.com/questions/50845372/tensorflows-map-fn-only-runs-on-cpu/50853722#50853722", "title": "TensorFlow&#39;s map_fn only runs on CPU", "body": "<p>The error actually stems from the fact that <code>np.arange</code> produces <code>int32</code>s by default but you specified a <code>float32</code> return type. The error is gone with</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nwith tf.Session() as sess:\n    with tf.device(\"/gpu:0\"):\n        def test_func(i):\n            return i\n        test_range = tf.constant(np.arange(5, dtype=np.float32))\n        test = sess.run(tf.map_fn(test_func, test_range, dtype=tf.float32))\nprint(test)\n</code></pre>\n\n<p>I agree that the error message you got is rather confusing. You get the \"real\" error message by removing device placement:</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nwith tf.Session() as sess:\n        def test_func(i):\n            return i\n        test_range = tf.constant(np.arange(5))\n        test = sess.run(tf.map_fn(test_func, test_range, dtype=tf.float32))\nprint(test)\n# InvalidArgumentError (see above for traceback): TensorArray dtype is float but Op is trying to write dtype int32.\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 3079172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i0X6d.jpg?s=128&g=1", "display_name": "Eric R. Anschuetz", "link": "https://stackoverflow.com/users/3079172/eric-r-anschuetz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 2, "accepted_answer_id": 50853722, "answer_count": 1, "score": 2, "last_activity_date": 1528967245, "creation_date": 1528920292, "last_edit_date": 1528922203, "question_id": 50845372, "link": "https://stackoverflow.com/questions/50845372/tensorflows-map-fn-only-runs-on-cpu", "title": "TensorFlow&#39;s map_fn only runs on CPU", "body": "<p>I'm running into a weird problem when trying to get TensorFlow's <code>map_fn</code> to run on my GPU. Here's a minimal broken example:</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nwith tf.Session() as sess:\n    with tf.device(\"/gpu:0\"):\n        def test_func(i):\n            return i\n        test_range = tf.constant(np.arange(5))\n        test = sess.run(tf.map_fn(test_func, test_range, dtype=tf.float32))\nprint(test)\n</code></pre>\n\n<p>This leads to the error:</p>\n\n<blockquote>\n  <p>InvalidArgumentError: Cannot assign a device for operation\n  'map/TensorArray_1': Could not satisfy explicit device specification\n  '' because the node was colocated with a group of nodes that required\n  incompatible device '/device:GPU:0' Colocation Debug Info: Colocation\n  group had the following types and devices:  TensorArrayScatterV3: CPU \n  TensorArrayGatherV3: GPU CPU  Range: GPU CPU  TensorArrayWriteV3: CPU \n  TensorArraySizeV3: GPU CPU  TensorArrayReadV3: CPU  Enter: GPU CPU \n  TensorArrayV3: CPU  Const: GPU CPU </p>\n  \n  <p>Colocation members and user-requested devices:<br>\n  map/TensorArrayStack/range/delta (Const)<br>\n  map/TensorArrayStack/range/start (Const)    map/TensorArray_1\n  (TensorArrayV3)    map/while/TensorArrayWrite/TensorArrayWriteV3/Enter\n  (Enter) /device:GPU:0   map/TensorArrayStack/TensorArraySizeV3\n  (TensorArraySizeV3)    map/TensorArrayStack/range (Range)<br>\n  map/TensorArrayStack/TensorArrayGatherV3 (TensorArrayGatherV3)<br>\n  map/TensorArray (TensorArrayV3)    map/while/TensorArrayReadV3/Enter\n  (Enter) /device:GPU:0   Const (Const) /device:GPU:0<br>\n  map/TensorArrayUnstack/TensorArrayScatter/TensorArrayScatterV3\n  (TensorArrayScatterV3) /device:GPU:0   map/while/TensorArrayReadV3\n  (TensorArrayReadV3) /device:GPU:0<br>\n  map/while/TensorArrayWrite/TensorArrayWriteV3 (TensorArrayWriteV3)\n  /device:GPU:0</p>\n  \n  <p>[[Node: map/TensorArray_1 = TensorArrayV3clear_after_read=true,\n  dtype=DT_FLOAT, dynamic_size=false, element_shape=,\n  identical_element_shapes=true,\n  tensor_array_name=\"\"]]</p>\n</blockquote>\n\n<p>The code behaves as expected when run on my CPU, and simple operations such as:</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nwith tf.Session() as sess:\n    with tf.device(\"/gpu:0\"):\n        def test_func(i):\n            return i\n        test_range = tf.constant(np.arange(5))\n        test = sess.run(tf.add(test_range, test_range))\nprint(test)\n</code></pre>\n\n<p>work fine on my GPU. <a href=\"https://stackoverflow.com/questions/47045026/is-there-a-way-to-use-tensorflow-map-fn-on-gpu\">This post</a> seems to describe a similar issue. Does anyone have any tips? The answer on that post implies that <code>map_fn</code> should work fine on the GPU. I'm running version 1.8.0 of TensorFlow on Python 3.6.4 on Arch Linux, with CUDA version 9.0 and cuDNN version 7.0 on a GeForce GTX 1050.</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["python", "bcrypt", "pymysql"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 5329027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f98b5303b27e6b91f905bec53e84f?s=128&d=identicon&r=PG&f=1", "display_name": "kmbenitez", "link": "https://stackoverflow.com/users/5329027/kmbenitez"}, "is_accepted": false, "score": 0, "last_activity_date": 1528983657, "creation_date": 1528983657, "answer_id": 50858930, "question_id": 50845367, "link": "https://stackoverflow.com/questions/50845367/reconnecting-to-database-results-in-null-terminated-binary-strings/50858930#50858930", "title": "Reconnecting to database results in null terminated binary strings", "body": "<p>The difference between disconnecting and reconnecting should have told me! If the returned result is different from two different connections, you may have omitted the commit.</p>\n\n<p>I believe that the NULL bytes are an artifact of when I tried to update the hash using PhpMyAdmin. Stripping them didn't make a difference because the hash was actually of a different password.</p>\n"}], "owner": {"reputation": 23, "user_id": 5329027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f98b5303b27e6b91f905bec53e84f?s=128&d=identicon&r=PG&f=1", "display_name": "kmbenitez", "link": "https://stackoverflow.com/users/5329027/kmbenitez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528983657, "creation_date": 1528920268, "question_id": 50845367, "link": "https://stackoverflow.com/questions/50845367/reconnecting-to-database-results-in-null-terminated-binary-strings", "title": "Reconnecting to database results in null terminated binary strings", "body": "<p>I'm working on a password verification system. I have a binary(60) column to store the password, which I'm hashing using <code>bcrypt</code>. When I use the same <code>pymysql</code> connection to store and retrieve the password, I am able to verify the password. However, when I create a new connection, the password no longer verifies.</p>\n\n<p>In particular the issue I'm encountering is that the result returned when I have a new connection has a bunch of null bytes at the end. I tried stripping these, but the result still doesn't match. (<code>b'$2b$12$Y9iqA5faupXeUcCzS8jrEOkBdQrpLOCUp\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'</code> vs <code>b'$2b$12$Yzpcua55O0RSNqqSzTZ/k.JcZy6ValV8uTXLpcEzXHM8MYLVlFSoa'</code>)</p>\n\n<p>Is there something wrong with the way I'm storing or encoding these hashes?</p>\n\n<pre><code># CONNECTING #\nconn = pymysql.connect(os.environ[\"db_host\"], \n                        user=os.environ[\"db_user\"], \n                        passwd=os.environ[\"db_password\"],\n                        db=os.environ[\"db_name\"], \n                        connect_timeout=5, \n                        charset='utf8mb4')\n# STORING #\nnewlyhashed = bcrypt.hashpw(apikey.encode(), bcrypt.gensalt())\ncur.execute(\"UPDATE api_users \\\n                          SET secret = _binary %s \\\n                          WHERE api_users.name = %s\", \n            [pymysql.Binary(newlyhashed),\"user\"])\n# RETRIEVING #\ndcur.execute(\"SELECT secret FROM api_users \\\n              WHERE api_users.name = %s\",\"user\")\n# VERIFYING #\nverify = row[\"secret\"]\nbcrypt.checkpw(apikey.encode(), verify)\n</code></pre>\n"}, {"tags": ["python", "random", "choice"], "comments": [{"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 3, "creation_date": 1528920298, "post_id": 50845355, "comment_id": 88694283, "body": "1) those arent lists 2) <a href=\"http://idownvotedbecau.se/noresearch/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/noresearch</a>  What have you researched about random in python, what code did you write to solve your issue, and what problem did you come across that you could not overcome?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528920821, "post_id": 50845355, "comment_id": 88694529, "body": "Choosing a random element from a list is well documented on line.  How did your research not find <i>anything</i> you could use?"}, {"owner": {"reputation": 23, "user_id": 9870365, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000899477162/picture?type=large", "display_name": "Alex Gap", "link": "https://stackoverflow.com/users/9870365/alex-gap"}, "edited": false, "score": 0, "creation_date": 1528921624, "post_id": 50845355, "comment_id": 88694979, "body": "I am not trying to choose 1 ELEMENT randomly, i am trying to choose a random LIST to use !"}, {"owner": {"reputation": 23, "user_id": 9870365, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000899477162/picture?type=large", "display_name": "Alex Gap", "link": "https://stackoverflow.com/users/9870365/alex-gap"}, "edited": false, "score": 0, "creation_date": 1528921743, "post_id": 50845355, "comment_id": 88695039, "body": "Replace &#39;LIST&quot; with &quot;FARM1&quot; and &quot;FARM2&quot;, it will make more sense then I guess. Again, I am trying to select a random FARM so i can work with the variables inside of it later on in the script."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9836403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b5372cb13ed832eac91b9ec37520de?s=128&d=identicon&r=PG&f=1", "display_name": "TrojanHorse", "link": "https://stackoverflow.com/users/9836403/trojanhorse"}, "edited": false, "score": 0, "creation_date": 1529016397, "post_id": 50845537, "comment_id": 88736105, "body": "@AlexGap Consider showing us the desired output, what do you mean by &quot;select&quot;. Do you mean print the list, or store it as a variable? More context required..."}], "tags": [], "owner": {"reputation": 41, "user_id": 9836403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b5372cb13ed832eac91b9ec37520de?s=128&d=identicon&r=PG&f=1", "display_name": "TrojanHorse", "link": "https://stackoverflow.com/users/9836403/trojanhorse"}, "is_accepted": false, "score": 0, "last_activity_date": 1529016137, "last_edit_date": 1529016137, "creation_date": 1528920899, "answer_id": 50845537, "question_id": 50845355, "link": "https://stackoverflow.com/questions/50845355/python-choose-random-choice-from-variables-linked-together/50845537#50845537", "title": "Python choose random choice from variables linked together", "body": "<p>In Python, <a href=\"https://www.w3schools.com/python/python_lists.asp\" rel=\"nofollow noreferrer\">lists</a> are assigned using [ ]</p>\n\n<p>UPDATE to your question:</p>\n\n<p>Use nested lists:</p>\n\n<pre><code>Farms = [[\"dog\",\"4\",\"bones\",\"outside\"],[\"chicken\",\"2\",\"corn\",\"chicken coop\"]]\n</code></pre>\n\n<p>The <a href=\"https://www.tutorialspoint.com/python/python_modules.htm\" rel=\"nofollow noreferrer\">module</a> <a href=\"http://www.pythonforbeginners.com/random/how-to-use-the-random-module-in-python\" rel=\"nofollow noreferrer\">random</a> can then be used to make a random selection from a list:</p>\n\n<pre><code>print(random.choice(Farms))\n&gt;&gt;&gt;[\"dog\",\"4\",\"bones\",\"outside\"]\n</code></pre>\n\n<p>Please use <a href=\"https://www.w3schools.com/python/\" rel=\"nofollow noreferrer\">this</a> to attempt your own code before coming to this site.</p>\n\n<p>Good luck with Python!</p>\n"}], "owner": {"reputation": 23, "user_id": 9870365, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000899477162/picture?type=large", "display_name": "Alex Gap", "link": "https://stackoverflow.com/users/9870365/alex-gap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1529016137, "creation_date": 1528920222, "last_edit_date": 1528921283, "question_id": 50845355, "link": "https://stackoverflow.com/questions/50845355/python-choose-random-choice-from-variables-linked-together", "title": "Python choose random choice from variables linked together", "body": "<p>I am learning python, and want to know how could I chose a random set from a list like this:</p>\n\n<pre><code>List1:\nanimal = 'dog'\nlegs = '4'\nfood = 'bones'\nplace = 'outside'\n\nList2:\nanimal = 'chicken'\nlegs = '2'\nfood = 'corn'\nplace 'chicken coop'\n</code></pre>\n\n<p>I want each time my script runs to choose a different list, something like: \npython(random.choice(list)) </p>\n\n<p>EDIT: Wow this community is harsh! I want to choose a random list to be used later in the script. I have 10 lists, and I want one to work it, I don't know if they are called lists, dictionaries, arrays or idk. When I do random, i want one of them to be selected so I can use those variables inside of it.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 3, "creation_date": 1528920991, "post_id": 50845338, "comment_id": 88694625, "body": "<code>df.index = df.index.values.astype(&#39;M8[D]&#39;)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1528927788, "post_id": 50845561, "comment_id": 88697485, "body": "Yes--as I mentioned in the answer @ALollz.  Although, technically it is a NumPy array of python datetime.date objects."}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1528928014, "post_id": 50845561, "comment_id": 88697541, "body": "I would say in all fairness to prefer @ALollz&#39;s answer if you want to work with the data as a time series.  This answer above is really about formatting, as is <code>df.index.strftime(&#39;%Y-%m-%d&#39;)</code>, which you seemed to be getting at in the question."}, {"owner": {"reputation": 403, "user_id": 6838283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f888553adf1507c7502fbea2f45b1745?s=128&d=identicon&r=PG&f=1", "display_name": "RandomWalker", "link": "https://stackoverflow.com/users/6838283/randomwalker"}, "edited": false, "score": 0, "creation_date": 1553101200, "post_id": 50845561, "comment_id": 97263944, "body": "I second @BradSolomon. Using <code>df.index.strftime(&#39;%Y-%m-%d&#39;)</code> is a great way of getting any format you like for the date objects."}], "tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": false, "score": 12, "last_activity_date": 1554908428, "last_edit_date": 1554908428, "creation_date": 1528920989, "answer_id": 50845561, "question_id": 50845338, "link": "https://stackoverflow.com/questions/50845338/remove-time-portion-of-datetime-index-in-pandas/50845561#50845561", "title": "Remove time portion of DateTime index in pandas", "body": "<p>With the <code>date</code> attribute:</p>\n\n<pre><code>df.index = df.index.date\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame([1, 2, 3, 4], index=pd.date_range('2018', periods=4, freq='H'))\n&gt;&gt;&gt; df.index = df.index.date\n&gt;&gt;&gt; df\n            0\n2018-01-01  1\n2018-01-01  2\n2018-01-01  3\n2018-01-01  4\n</code></pre>\n\n<p><strong>Note</strong>: that this will get you <code>object</code> dtype in Pandas.  All attributes are <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.html\" rel=\"noreferrer\">here</a>.  It's technically an array of native Python <code>datetime.date</code> objects.  See ALollz's answer to keep the dtype datetime-like.</p>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 11, "last_activity_date": 1595452642, "last_edit_date": 1595452642, "creation_date": 1528925740, "answer_id": 50846623, "question_id": 50845338, "link": "https://stackoverflow.com/questions/50845338/remove-time-portion-of-datetime-index-in-pandas/50846623#50846623", "title": "Remove time portion of DateTime index in pandas", "body": "<p>You can  maintain the datetime functionality and set the time portion to 00:00:00 with <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.normalize.html\" rel=\"nofollow noreferrer\"><code>normalize</code></a>.</p>\n<pre><code>df.index = df.index.normalize()\n\n# For non-Index datetime64[ns] dtype columns you use the `.dt` accessor:\n# df['column'] = df['column'].dt.normalize()\n</code></pre>\n<hr />\n<pre><code>import pandas as pd\ndf = pd.DataFrame([1, 2, 3, 4], index=pd.date_range('2018', periods=4, freq='H'))\n\ndf.index = df.index.normalize()\n\nprint(df)\n#            0\n#2018-01-01  1\n#2018-01-01  2\n#2018-01-01  3\n#2018-01-01  4\n</code></pre>\n<p>Looking at the index:</p>\n<pre><code>df.index\n#DatetimeIndex(['2018-01-01', '2018-01-01', '2018-01-01', '2018-01-01'], dtype='datetime64[ns]', freq=None)\n</code></pre>\n<p>And the values are Timestamps:</p>\n<pre><code>df.index[0]\n#Timestamp('2018-01-01 00:00:00')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6661288, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102860664222987/picture?type=large", "display_name": "Antonio Williams", "link": "https://stackoverflow.com/users/6661288/antonio-williams"}, "is_accepted": false, "score": 1, "last_activity_date": 1535840763, "creation_date": 1535840763, "answer_id": 52132627, "question_id": 50845338, "link": "https://stackoverflow.com/questions/50845338/remove-time-portion-of-datetime-index-in-pandas/52132627#52132627", "title": "Remove time portion of DateTime index in pandas", "body": "<h1>You can control your Index object with a simple function like this:</h1>\n\n<pre><code>def set_date_range(start_date, number_of_periods, frequency):\n            date_range = pd.date_range(start= start_date, periods=number_of_periods, freq=frequency)\n\n            for date in date_range:\n                print(date)\n            print()\n\nset_date_range('1/1/2018', 5, \"MS\")\n</code></pre>\n\n<h1>See the line below with the comment, it'll remove the time portion</h1>\n\n<pre><code>def set_date_range(start_date, number_of_periods, frequency):\n            date_range = pd.date_range(start= start_date, periods=number_of_periods, freq=frequency)\n\n            date_range = date_range.date # ASSIGNING THIS GETS RID OF THE TIME PORTION\n\n            for date in date_range:\n                print(date)\n            print()\n\nset_date_range('1/1/2018', 5, \"MS\")\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 7476643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002fd8e01b072b6aa8e481101db1dbff?s=128&d=identicon&r=PG&f=1", "display_name": "bloodynri", "link": "https://stackoverflow.com/users/7476643/bloodynri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19238, "favorite_count": 2, "accepted_answer_id": 50846623, "answer_count": 3, "score": 6, "last_activity_date": 1595452642, "creation_date": 1528920134, "question_id": 50845338, "link": "https://stackoverflow.com/questions/50845338/remove-time-portion-of-datetime-index-in-pandas", "title": "Remove time portion of DateTime index in pandas", "body": "<p>When I query a service through their API for daily data, they throw in a time portion which is equal to whatever time the query was made. So my pandas dataframe looks like this when I called the function at 14:54:36 -</p>\n\n<pre><code>2018-05-16 14:54:36  1024.75  1008.25      ...        39221        242897\n2018-05-17 14:54:36  1017.00  1002.00      ...        35361        241132\n2018-05-18 14:54:36  1015.75  1002.75      ...        49090        242938\n2018-05-21 14:54:36  1034.50  1020.75      ...        56950        243316\n2018-05-22 14:54:36  1043.75  1028.50      ...        49724        247874\n2018-05-23 14:54:36  1049.00  1036.25      ...        46256        253609\n2018-05-24 14:54:36  1059.75  1047.00      ...        65352        259617\n</code></pre>\n\n<p>As this is daily data, the time portion is useless. When I do:</p>\n\n<pre><code>data = pd.read_csv(StringIO(data), index_col=0, header=None,names=['High','Low','Open','Close','Volume','OpenInterest'])\ndata.index = pd.to_datetime(data.index,format=\"%Y-%m-%d\")\n</code></pre>\n\n<p>The format doesn't seem to work. The DateTime index still contains time. Any idea how I can remove the time portion?</p>\n"}, {"tags": ["python", "module", "feather"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528920528, "post_id": 50845316, "comment_id": 88694403, "body": "does <code>import feather</code> work on its own?"}, {"owner": {"reputation": 1, "user_id": 9925966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JqIPEJliQCs/AAAAAAAAAAI/AAAAAAAAD9g/TbQVnh8bdJs/photo.jpg?sz=128", "display_name": "Stephanie Zhang", "link": "https://stackoverflow.com/users/9925966/stephanie-zhang"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528921309, "post_id": 50845316, "comment_id": 88694804, "body": "I just changed it and ran it but now it gives an error that says cannot import name &#39;pdapi&#39;"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528921398, "post_id": 50845316, "comment_id": 88694852, "body": "No I mean can you just write <code>import feather</code> on its own line, with nothing else after it - Does that work? If so: Then you at least have the package, and should <code>print(dir(feather))</code> to see all the possible modules you could import, if not: You did not install the package correctly (in the correct location, etc.)"}], "owner": {"reputation": 1, "user_id": 9925966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JqIPEJliQCs/AAAAAAAAAAI/AAAAAAAAD9g/TbQVnh8bdJs/photo.jpg?sz=128", "display_name": "Stephanie Zhang", "link": "https://stackoverflow.com/users/9925966/stephanie-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 768, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528920010, "creation_date": 1528920010, "question_id": 50845316, "link": "https://stackoverflow.com/questions/50845316/modulenotfounderror-no-module-named-feather-compat", "title": "ModuleNotFoundError: No module named &#39;feather.compat&#39;", "body": "<p>I installed feather using</p>\n\n<pre><code>conda install feather-format -c conda-forge\n</code></pre>\n\n<p>and I believe that it was successfully installed but when I try to run a program with </p>\n\n<pre><code>from feather.compat import pdapi\n</code></pre>\n\n<p>I get an error saying that there is no module named 'feather.compat'. How do I fix this?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 9937874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dcb7a232ee3eeb62d810440d53fcd4f?s=128&d=identicon&r=PG&f=1", "display_name": "Morgan Gladden", "link": "https://stackoverflow.com/users/9937874/morgan-gladden"}, "edited": false, "score": 0, "creation_date": 1528925088, "post_id": 50845339, "comment_id": 88696490, "body": "Would it be possible to weight the different categories. For example color having a score of 1, and size having a score of 10, and shape having a score of 15?"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1528920136, "creation_date": 1528920136, "answer_id": 50845339, "question_id": 50845306, "link": "https://stackoverflow.com/questions/50845306/creating-a-quality-score-column-in-pandas/50845339#50845339", "title": "Creating a quality score column in pandas", "body": "<p>Using <code>isin</code> for data.frame</p>\n\n<pre><code>l=['Red', 'Medium', 'Circle']\ndf['score']=df.isin(l).sum(1)\ndf\nOut[404]: \n   ID   Color    Size     Shape  score\n0   1    Blue   Small  Triangle      0\n1   2     Red  Medium    Square      2\n2   3  Yellow   Large    Circle      1\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 9937874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dcb7a232ee3eeb62d810440d53fcd4f?s=128&d=identicon&r=PG&f=1", "display_name": "Morgan Gladden", "link": "https://stackoverflow.com/users/9937874/morgan-gladden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528920136, "creation_date": 1528919970, "question_id": 50845306, "link": "https://stackoverflow.com/questions/50845306/creating-a-quality-score-column-in-pandas", "title": "Creating a quality score column in pandas", "body": "<p>Hello I am working with a dataframe in pandas which looks something like this</p>\n\n<pre><code>ID    Color    Size      Shape\n1     Blue     Small     Triangle\n2     Red      Medium    Square\n3     Yellow   Large     Circle\n</code></pre>\n\n<p>I would like to compare each row to a list of data and create a new score column that counts the number of times each row matches the list. </p>\n\n<p>Example [Red, Medium, Circle] would yield the following dataframe.</p>\n\n<pre><code>ID    Color    Size      Shape      Score\n1     Blue     Small     Triangle     0\n2     Red      Medium    Square       2\n3     Yellow   Large     Circle       1\n</code></pre>\n\n<p>Ideally I would like the ability to create multiple score columns to check against multiple lists.</p>\n"}, {"tags": ["python", "parsing", "formatting"], "comments": [{"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1528920238, "post_id": 50845282, "comment_id": 88694249, "body": "Can you tell us what you&#39;ve tried so far?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1528921071, "post_id": 50845282, "comment_id": 88694671, "body": "What exactly should the output look like (givem a relatively short sample of the input)? I think you should add both to your question."}, {"owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "edited": false, "score": 0, "creation_date": 1528923050, "post_id": 50845282, "comment_id": 88695671, "body": "I think nosklo has the idea of what I want. I just need to figure out how to make general now (IE the parameters can be input by whoever is using the program) which doesn&#39;t seem to hard to do."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "edited": false, "score": 0, "creation_date": 1528923237, "post_id": 50845383, "comment_id": 88695738, "body": "so according to python docs the you&#39;re essentially using three parameters in the range function which would be start, stop and step if I&#39;m not mistaken. thank you so much for this!"}, {"owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1529020022, "post_id": 50845383, "comment_id": 88736913, "body": "@martineau i was trying to find a way to do that but I don&#39;t see a button or anything for that is it the check mark?"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 1, "last_activity_date": 1528920331, "creation_date": 1528920331, "answer_id": 50845383, "question_id": 50845282, "link": "https://stackoverflow.com/questions/50845282/how-would-i-go-about-parsing-a-text-file-of-thousands-of-dna-bases/50845383#50845383", "title": "How would I go about parsing a text file of thousands of DNA bases?", "body": "<pre><code>data = 'GAGACAGAGTCTCACTCTGTTGCACAGGCTGGAGTGCAGTGGCACAATCTCTGCTCACTGCAACCTCCTC'\nchunk_size = 5\noverlap = 2\n\nfor pos in range(0, len(data), chunk_size - overlap):\n    print(data[pos:pos+chunk_size])\n</code></pre>\n\n<p>The results:</p>\n\n<pre><code>GAGAC\nACAGA\nGAGTC\nTCTCA\nCACTC\nTCTGT\n...\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 50845383, "answer_count": 1, "score": 0, "last_activity_date": 1528920680, "creation_date": 1528919842, "last_edit_date": 1528920680, "question_id": 50845282, "link": "https://stackoverflow.com/questions/50845282/how-would-i-go-about-parsing-a-text-file-of-thousands-of-dna-bases", "title": "How would I go about parsing a text file of thousands of DNA bases?", "body": "<p>Here's what I would have, I would have a massive text file of a bunch of dna bases (A, T, C, G) and what I would like to do is take every 60 characters (arbitrary) and put it on a new line so that way the bases get separated out in chunks. But, I would also like for there to be overlap of each chunk by a certain number of bases. For example, if this 10 letter chunk ATGGCTGCTA was given, and the initial 4 block chunk was ATGG, if there overlap parameter was specified to be 2, then the next 4 block chunk would be GGCT, then CTGC and so on. I know I'll probably have to look into reading, opening, and writing text files with python. If any has resources they could point me torwards on achieving this and any tips and instructions that would be great. </p>\n\n<p>Example of the formatting of the text I would be working with:</p>\n\n<p><a href=\"https://www.ncbi.nlm.nih.gov/nuccore/NC_000017.11?report=fasta&amp;from=7661779&amp;to=7687550\" rel=\"nofollow noreferrer\">https://www.ncbi.nlm.nih.gov/nuccore/NC_000017.11?report=fasta&amp;from=7661779&amp;to=7687550</a></p>\n"}, {"tags": ["python", "smtplib", "taskscheduler", "errno", "smtpexception"], "answers": [{"tags": [], "owner": {"reputation": 539, "user_id": 2186184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdd4717d834bd9f6efbe8987e304049c?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/2186184/jonathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1528920263, "creation_date": 1528920263, "answer_id": 50845364, "question_id": 50845224, "link": "https://stackoverflow.com/questions/50845224/python-script-to-send-emails-fails-occasionally-with-errno-10060/50845364#50845364", "title": "Python Script to send emails fails occasionally with [Errno 10060]", "body": "<p>The context of your error message is missing, but this seems to indicate that the remote party you are trying to connect to.</p>\n\n<p>You most likely will find more detailed information in your exception object. I would suggest to connect a debugger or log more details of your exception, like the stack trace to find the offending line.</p>\n\n<p>Perhaps <a href=\"https://docs.python.org/3/library/traceback.html\" rel=\"nofollow noreferrer\">traceback</a> might be off help here.</p>\n"}], "owner": {"reputation": 1, "user_id": 6918599, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EkQo9RlIh6g/AAAAAAAAAAI/AAAAAAAAIvE/peVaEUJNHyk/photo.jpg?sz=128", "display_name": "Prem27", "link": "https://stackoverflow.com/users/6918599/prem27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529073690, "creation_date": 1528919615, "last_edit_date": 1529073690, "question_id": 50845224, "link": "https://stackoverflow.com/questions/50845224/python-script-to-send-emails-fails-occasionally-with-errno-10060", "title": "Python Script to send emails fails occasionally with [Errno 10060]", "body": "<p>I have set up a python script to insert a new record into a table, send out an email and update the most recently inserted record once the email is sent out successfully. The Python Script is as follows: </p>\n\n<pre><code>import smtplib\nimport pyodbc\nimport time\nimport os\nimport time\nfrom smtplib import SMTPException\nfrom email.MIMEMultipart import MIMEMultipart\nfrom email.MIMEText import MIMEText\nlocaltime = time.asctime( time.localtime(time.time()) )\nfromAddress = \"sender@mydomain.com\"\ntoAddress = \"myEmail@mydomain.com\"\nemail = MIMEMultipart()\nemail['From'] = fromAddress\nemail['To'] = toAddress\nconnection = pyodbc.connect('DRIVER={SQL Server};SERVER=mySQLServer;DATABASE=mydb;UID=username;PWD=password')\ncursor = connection.cursor()\nquery = \"INSERT INTO [mydb].[dbo].[Logger] ([ScriptStartTime], [EmailSent?]) VALUES (CURRENT_TIMESTAMP, 0);\"\ncursor.execute(query)\nprint \"************************Python Script Log Started at\", localtime,\"**********************\"\ndef update():\n   updateEmailFlagQuery = (\"UPDATE [mydb].[dbo].[Logger] SET [EmailSent?] = 1, [EmailSentTime] = CURRENT_TIMESTAMP WHERE ID = (SELECT MAX(ID) FROM [mydb].[dbo].[Logger])\")\n   updateEmailFlag = cursor.execute(updateEmailFlagQuery)\n   connection.commit()\ndef notify(email, body, fromAddress, toAddress):\n   email['Subject'] = \"It Worked\"\n   email.attach(MIMEText(body, 'plain'))\n   server = smtplib.SMTP('SMTPServer', 25)\n   server.set_debuglevel(True)\n   text = email.as_string()\n   server.sendmail(fromAddress, toAddress, text)\n   server.quit()\n   connection.commit()\ntry:\n   body = \"This is an Email sent from Scheduled Python Script\"\n   notify(email, body, fromAddress, toAddress)\n   print \"Email Sent successfully\"\n   try:\n      update()\n      print \"Update Statement on Success code-block executed successfully\n   except:\n      connection.rollback()\n      print \"Update Statement failed and update Transaction Rolled back\"\nexcept SMTPException, e:\n   print e+\" SMTP ERROR OCCURED\"\nexcept Exception, e:\n   print e\n   print \"Unexpected Error/Exception\";\nprint \"************************Python Script Log Ended at\", localtime,\"**********************\"\n</code></pre>\n\n<p>This script is scheduled to run via windows task scheduleron an EC2 Instance. This script works just fine usually but this spits out an error message one in a while. The Error Message is as follows: </p>\n\n<pre><code>************************Python Script Log Started at Thu Jun 07 03:40:04 2018 **********************\n[Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\nUnexpected Error/Exception\n************************Python Script Log Started at Thu Jun 07 03:40:04 2018 **********************\n</code></pre>\n\n<p>I've tried to replicate this error and failed. Upon observation, I found a high co-relation between failure to no user activity around the time of failure. The Script only fails during the times there's no recent user activity on the EC2 machine. Did anyone come across something similar? or any suggestions/improvements?</p>\n\n<p>Please excuse if there are any indent errors, Might be due to my manual formatting while copying the script to StackOverflow's markdown.  </p>\n"}, {"tags": ["python", "amazon-s3", "download"], "owner": {"reputation": 11, "user_id": 9938113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WUGIpDKZLKY/AAAAAAAAAAI/AAAAAAAAAAA/haFtWEEXTJc/photo.jpg?sz=128", "display_name": "user9938113", "link": "https://stackoverflow.com/users/9938113/user9938113"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528919504, "creation_date": 1528919504, "question_id": 50845199, "link": "https://stackoverflow.com/questions/50845199/python-download-upload-api-s3with-authorization", "title": "python download/upload api s3(with authorization)", "body": "<p>Need help on how to incorporate authentication header , when download from S3 object store using python. I found a few articles using both pycurl and response modules, but none worked for me. <em>FYI not able to use `boto' module as the end container  where the script will run has python that does not have the module.</em></p>\n\n<p>Here is a shell code which works seamless for upload, but i need to make the call from python as this will be part of a larger code which downloads from s3 object store and  massage the data before use.</p>\n\n<p>================</p>\n\n<pre><code>bucket=success\nfile=sample.csv\ncontentType=\"text\"\ndateValue=`date -R`\ns3Key=key\ns3Secret=secret\n\n\n  resource=\"/${bucket}/${file}\"\n  stringToSign=\"PUT\\n\\n${contentType}\\n${dateValue}\\n${resource}\"\n  signature=`echo -en ${stringToSign} | openssl sha1 -hmac ${s3Secret} -binary | base64`\n   curl -L -X PUT -T \"${file}\" \\\n  -H \"Host: testurl.com/${bucket}\" \\\n  -H \"Date: ${dateValue}\" \\\n  -H \"Content-Type: ${contentType}\" \\\n  -H \"Authorization: AWS ${s3Key}:${signature}\" \\\n   http://testurl.com/${bucket}/${file}\n</code></pre>\n\n<p>================</p>\n\n<p>Appreciate any insight using python only please.\nFYI version I am using is python 2.7.</p>\n\n<p>thank you\nRD</p>\n"}, {"tags": ["python", "cvxpy"], "answers": [{"comments": [{"owner": {"reputation": 1360, "user_id": 1618041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5a532f7f1a6acec773e7433446044fb2?s=128&d=identicon&r=PG", "display_name": "rhaskett", "link": "https://stackoverflow.com/users/1618041/rhaskett"}, "edited": false, "score": 0, "creation_date": 1528933451, "post_id": 50847717, "comment_id": 88698874, "body": "vstack([sum([target[0], target[1]]), target[2]]) worked.  Thanks."}], "tags": [], "owner": {"reputation": 596, "user_id": 3926335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f346dad9a75758fb998efea8e873f?s=128&d=identicon&r=PG&f=1", "display_name": "steven", "link": "https://stackoverflow.com/users/3926335/steven"}, "is_accepted": true, "score": 3, "last_activity_date": 1528933016, "creation_date": 1528933016, "answer_id": 50847717, "question_id": 50845194, "link": "https://stackoverflow.com/questions/50845194/cvxpy-possible-bug-in-sum-squares-when-handling-nested-sums/50847717#50847717", "title": "CVXPY: possible bug in sum_squares when handling nested sums?", "body": "<p><code>sum_squares</code> does not take array input. The input needs to be a single CVXPY <code>Expression</code>. Use <code>vstack</code>, <code>hstack</code>, or <code>bmat</code> to combine multiple <code>Expressions</code> into a single vector or matrix <code>Expression</code>.</p>\n"}], "owner": {"reputation": 1360, "user_id": 1618041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5a532f7f1a6acec773e7433446044fb2?s=128&d=identicon&r=PG", "display_name": "rhaskett", "link": "https://stackoverflow.com/users/1618041/rhaskett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 50847717, "answer_count": 1, "score": 0, "last_activity_date": 1529749211, "creation_date": 1528919463, "last_edit_date": 1529749211, "question_id": 50845194, "link": "https://stackoverflow.com/questions/50845194/cvxpy-possible-bug-in-sum-squares-when-handling-nested-sums", "title": "CVXPY: possible bug in sum_squares when handling nested sums?", "body": "<p>As part of a larger project, I end up with convex expressions like <code>((x_0 + x_1)^2 + x_2^2</code>:</p>\n\n<pre><code>from cvxpy import Variable, sum_squares, sum\n\ntarget = Variable(3, nonneg=True, name='Target')\nsum(target)\nsum_squares(target)\n\ncombo = [sum([target[0], target[1]]), target[2]]\nsum(combo)\nsum_squares(combo)\n</code></pre>\n\n<p><code>sum(combo)</code> works fine, but <code>sum_squares(combo)</code> throws the following error</p>\n\n<pre><code>ValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>despite both atoms being scalar functions of with array inputs. Is there a better way to rewrite this?</p>\n"}, {"tags": ["python", "python-3.x", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9889190, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jo1PqNxTuRM/AAAAAAAAAAI/AAAAAAAACWk/l1FX5Qq_ESw/photo.jpg?sz=128", "display_name": "meme creep", "link": "https://stackoverflow.com/users/9889190/meme-creep"}, "edited": false, "score": 0, "creation_date": 1528995683, "post_id": 50852590, "comment_id": 88727504, "body": "Wait, but doesn&#39;t linkgen() have a yield for the Request inside of it? Also, this results in a      &quot;NotSupported: Response content isn&#39;t text&quot;  error at     for key in response.css(&quot;ul.stats&quot;):"}], "tags": [], "owner": {"reputation": 59, "user_id": 8885726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7bb8b0131e31a2dde2ba72b47826d5?s=128&d=identicon&r=PG&f=1", "display_name": "mxmn", "link": "https://stackoverflow.com/users/8885726/mxmn"}, "is_accepted": false, "score": 0, "last_activity_date": 1528963672, "creation_date": 1528963672, "answer_id": 50852590, "question_id": 50845189, "link": "https://stackoverflow.com/questions/50845189/scrapy-iterator-stops-immediately-after-request-finished/50852590#50852590", "title": "Scrapy iterator stops immediately after Request finished", "body": "<p>I think you shouldn't just call <code>lgen.next()</code> but you should yield it like this <code>yield lgen.next()</code> because <code>lgen</code> is  just a generator and <code>lgen.next()</code> will just retrieve a scrapy Request, in order scrapy downloads it you have to yield this Request.</p>\n"}], "owner": {"reputation": 33, "user_id": 9889190, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jo1PqNxTuRM/AAAAAAAAAAI/AAAAAAAACWk/l1FX5Qq_ESw/photo.jpg?sz=128", "display_name": "meme creep", "link": "https://stackoverflow.com/users/9889190/meme-creep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528963672, "creation_date": 1528919432, "question_id": 50845189, "link": "https://stackoverflow.com/questions/50845189/scrapy-iterator-stops-immediately-after-request-finished", "title": "Scrapy iterator stops immediately after Request finished", "body": "<p>This is my code that scans a user and outputs their SteamID and the value of their inventory:</p>\n\n<pre><code>import scrapy\n\nbot_words = [\n\"bot\",\n\"BOT\",\n\"Bot\",\n\"[tf2mart]\"\n]\n\nclass AccountSpider(scrapy.Spider):\n    name = \"accounts\"\n    start_urls = [\n    'file:///Users/max/Documents/promotebot/tutorial/tutorial/TF2ITEMS.htm'\n]\n\ndef linkgen(self):\n    global steamid\n    print(\"Downloading Page...\")\n    yield scrapy.Request(\"http://www.backpack.tf\" + steamid, callback=self.parse_accounts)\n    print(\"Page successfully downloaded.\")\n\ndef parse(self, response):\n    global steamid\n    lgen = self.linkgen()\n    for tr in response.css(\"tbody\"):\n        for user in response.css(\"span a\"):\n            if bot_words not in response.css(\"span a\"):\n                print(\"Parsed info\")\n                print(\"User: \" + user.extract())\n                steamid = user.css('::attr(href)').extract()[0]\n                print(\"Steam ID: \" + steamid)\n                lgen.next()\n\ndef parse_accounts(self, response):\n    for key in response.css(\"ul.stats\"):\n        print(\"Value finding function activted.\")\n        value = response.css(\"span.refined-value::text\").extract()\n        print(value)\n</code></pre>\n\n<p>An expected output would be:</p>\n\n<pre><code>Parsed info\nUser: &lt;a href=\"/profiles/76561198017108***\"&gt;user&lt;/a&gt;\nSteam ID: /profiles/76561198017108***\n(SOME VALUE)\n</code></pre>\n\n<p>However, the current output is:</p>\n\n<pre><code>Parsed info\nUser: &lt;a href=\"/profiles/76561198017108***\"&gt;user&lt;/a&gt;\nSteam ID: /profiles/76561198017108***\nDownloading Page...\nParsed info\nUser: &lt;a href=\"/profiles/76561198015589***\"&gt;user&lt;/a&gt;\nSteam ID: /profiles/76561198015589***\nPage successfully downloaded.\n2018-06-13 21:42:45 [scrapy.core.scraper] ERROR: Spider error processing                     &lt;GET file:///Users/max/Documents/promotebot/tutorial/tutorial/TF2ITEMS.htm&gt; (referer: None)\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/defer.py\", line 653, in _runCallbacks\ncurrent.result = callback(current.result, *args, **kw)\n  File \"/Users/max/Documents/promotebot/tutorial/tutorial/spiders/accounts_spider.py\", line 32, in parse\nlgen.next()\nStopIteration\n</code></pre>\n\n<p>Despite the multithreading(the linkgen generator downloading the request while the parse function is activating it again), the function should still work(?)</p>\n"}, {"tags": ["python", "numpy", "error-handling"], "answers": [{"comments": [{"owner": {"reputation": 889, "user_id": 6095474, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5578732beb60da5bc5315baa20b7a440?s=128&d=identicon&r=PG&f=1", "display_name": "Vermillion", "link": "https://stackoverflow.com/users/6095474/vermillion"}, "edited": false, "score": 0, "creation_date": 1528981977, "post_id": 50847309, "comment_id": 88719355, "body": "Wouldn&#39;t the <code>main()</code> function not be run when the module is imported, since it&#39;s called under <code>if __name__ == &quot;__main__&quot;</code>?"}, {"owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "reply_to_user": {"reputation": 889, "user_id": 6095474, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5578732beb60da5bc5315baa20b7a440?s=128&d=identicon&r=PG&f=1", "display_name": "Vermillion", "link": "https://stackoverflow.com/users/6095474/vermillion"}, "edited": false, "score": 0, "creation_date": 1528993207, "post_id": 50847309, "comment_id": 88726351, "body": "@Vermillion added an example!"}], "tags": [], "owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "is_accepted": true, "score": 1, "last_activity_date": 1529000895, "last_edit_date": 1529000895, "creation_date": 1528929695, "answer_id": 50847309, "question_id": 50845185, "link": "https://stackoverflow.com/questions/50845185/numpy-seterr-for-all-functions-in-module/50847309#50847309", "title": "Numpy seterr for all functions in module", "body": "<p>One possibility could be:</p>\n\n<pre><code># only list functions that need to be exported\n__all__ = ['main', 'foo', 'bar', 'division',]\n\n\ndef main():\n    np.seterr(all='raise')\n    # ....\n    # further function calls\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<hr>\n\n<p>Here is a concrete example:</p>\n\n<p>Create a module for e.g. <code>sample.py</code></p>\n\n<pre><code>import numpy as np\n\n__all__ = ['main', 'foo', 'bar', 'division',]\n\ndef foo():\n    print('this is function foo')\n\ndef bar():\n    print('this is function bar')\n\ndef division():\n    print(\"division by zero might occur here...\")\n\ndef main():\n    np.seterr(all='raise')\n    print('this is the main function')\n\n# only executed when run from the commandline as: python sample.py\nif __name__ ==  '__main__':\n    main()\n</code></pre>\n\n<p>Then import this module in for e.g. an <code>ipython</code> prompt or from some other module:</p>\n\n<pre><code>In [1]: import sample\n\n# only the functions included in `__all__` will be imported\nIn [2]: sample.__all__\nOut[2]: ['main', 'foo', 'bar', 'division']\n\n# call whichever function is needed\nIn [3]: sample.main()\nthis is the main function\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 11234824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5995e8b142ee59d489c94ec353adb2dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dorish", "link": "https://stackoverflow.com/users/11234824/dorish"}, "is_accepted": false, "score": 0, "last_activity_date": 1586756690, "creation_date": 1586756690, "answer_id": 61182159, "question_id": 50845185, "link": "https://stackoverflow.com/questions/50845185/numpy-seterr-for-all-functions-in-module/61182159#61182159", "title": "Numpy seterr for all functions in module", "body": "<p>Seems like the thread is alive for quite long, and I guess you/others already managed, but for future viewers (like me), here's something to save a few minutes of your life:</p>\n\n<pre><code>import numpy as np\n\n\ndef unmasked_call(func):\n    def func2(*args, **kwargs):\n        with np.errstate(all='raise'):\n            return func(*args, **kwargs)\n    return func2\n\n\n@unmasked_call\ndef one():\n    print (\"One:\")\n    return np.max([1, 2, np.nan])\n\n\nprint (\"Starting\")\none()\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 6095474, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5578732beb60da5bc5315baa20b7a440?s=128&d=identicon&r=PG&f=1", "display_name": "Vermillion", "link": "https://stackoverflow.com/users/6095474/vermillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 50847309, "answer_count": 2, "score": 3, "last_activity_date": 1586756690, "creation_date": 1528919425, "last_edit_date": 1528919762, "question_id": 50845185, "link": "https://stackoverflow.com/questions/50845185/numpy-seterr-for-all-functions-in-module", "title": "Numpy seterr for all functions in module", "body": "<p>I have a module containing functions with numpy operations. I would like to raise an exception for any floating-point error (e.g., division by zero) that occurs in any of the functions.</p>\n\n<p>This line of code causes all floating-point errors to be raised:</p>\n\n<pre><code>np.seterr(all='raise')\n</code></pre>\n\n<p>I'm wondering how to set this for all functions in the module, without it affecting code outside of the module.</p>\n\n<p>As I understand it, writing the line under <code>if __name__ == '__main__':</code> won't help, because it won't be invoked when the module is imported.</p>\n\n<p>Is there a better way than writing <code>np.seterr(all='raise')</code> inside each function?</p>\n"}, {"tags": ["python", "xpath", "lxml"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9938059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d24bd7d2250e3544955e7e9a1a9bc8db?s=128&d=identicon&r=PG&f=1", "display_name": "Clipper", "link": "https://stackoverflow.com/users/9938059/clipper"}, "edited": false, "score": 0, "creation_date": 1528920213, "post_id": 50845232, "comment_id": 88694237, "body": "This is also exactly what I needed."}], "tags": [], "owner": {"reputation": 1880, "user_id": 3126085, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3d1b5320d5edffe38958e8ca1129ab32?s=128&d=identicon&r=PG&f=1", "display_name": "crookedleaf", "link": "https://stackoverflow.com/users/3126085/crookedleaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1528919642, "creation_date": 1528919642, "answer_id": 50845232, "question_id": 50845165, "link": "https://stackoverflow.com/questions/50845165/extracting-numbers-from-a-string-with-xpath-and-python-3-6/50845232#50845232", "title": "Extracting numbers from a string with xpath and python 3.6", "body": "<p>an easy method would be using <code>strip()</code>. you can scrub the list by doing something like:</p>\n\n<p><code>clean_data = [d.strip() for d in data]</code></p>\n\n<p>which will give you:</p>\n\n<p><code>['1.27', '1.81', '4.90', '2.07', '2.12']</code></p>\n\n<p>if you want these as actual <code>int</code>s, just use <code>int(d.strip())</code> instead</p>\n"}, {"tags": [], "owner": {"reputation": 496, "user_id": 5977709, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wp5WfpAAGHo/AAAAAAAAAAI/AAAAAAAAASc/-Lw55LJlMJ8/photo.jpg?sz=128", "display_name": "Dusan Gligoric", "link": "https://stackoverflow.com/users/5977709/dusan-gligoric"}, "is_accepted": false, "score": 0, "last_activity_date": 1528919717, "creation_date": 1528919717, "answer_id": 50845248, "question_id": 50845165, "link": "https://stackoverflow.com/questions/50845165/extracting-numbers-from-a-string-with-xpath-and-python-3-6/50845248#50845248", "title": "Extracting numbers from a string with xpath and python 3.6", "body": "<p>Lets imagine that your output is stored in variable <code>x</code>:</p>\n\n<pre><code>&gt;&gt;&gt; print(\"\\n\".join([y.strip() for y in x]))\n1.27\n1.81\n4.90\n2.07\n2.12\n</code></pre>\n\n<p>Would this help? Or you need a list in which case:</p>\n\n<pre><code>&gt;&gt;&gt; print([y.strip() for y in x])\n['1.27', '1.81', '4.90', '2.07', '2.12']\n</code></pre>\n\n<p><strong>[UPDATE]</strong></p>\n\n<p>As for the </p>\n\n<blockquote>\n  <p>Is data a list ?</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/402504/how-to-determine-a-python-variables-type\">How to determine a Python variable&#39;s type?</a></p>\n"}], "owner": {"reputation": 13, "user_id": 9938059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d24bd7d2250e3544955e7e9a1a9bc8db?s=128&d=identicon&r=PG&f=1", "display_name": "Clipper", "link": "https://stackoverflow.com/users/9938059/clipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528919717, "creation_date": 1528919381, "question_id": 50845165, "link": "https://stackoverflow.com/questions/50845165/extracting-numbers-from-a-string-with-xpath-and-python-3-6", "title": "Extracting numbers from a string with xpath and python 3.6", "body": "<p>I couldn't apply the solution to similar questions I found here. \nAfter using this in visual code to scrape an web page with python and lxml </p>\n\n<pre><code>[...]\ntree = html.fromstring(browser.page_source)\ndata = tree.xpath('//tr[@title=\"something\"]/td[2]/text()')\n</code></pre>\n\n<p>if I print(data), I will get this list. Is data a list ? </p>\n\n<pre><code>['\\n                    1.27\\n                ', '\\n                    1.81\\n                ', '\\n                    4.90\\n                ', '\\n\n       2.07\\n                ', '\\n                    2.12\\n                ']\n</code></pre>\n\n<p>My goal is to extract only the number from each string. I have read about a regex function, not sure if it is the solution</p>\n\n<pre><code>replace($MyString, '[^0-9]', '')\n</code></pre>\n"}, {"tags": ["python", "oop", "file-io"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1528919666, "post_id": 50845162, "comment_id": 88693963, "body": "Why would <code>line</code> ever be equal to <code>0</code>?"}, {"owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "edited": false, "score": 0, "creation_date": 1528919689, "post_id": 50845162, "comment_id": 88693980, "body": "You are always splitting the same line."}, {"owner": {"reputation": 6367, "user_id": 6914441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc12c764b93fa915b8e5384f521fe12?s=128&d=identicon&r=PG&f=1", "display_name": "jferard", "link": "https://stackoverflow.com/users/6914441/jferard"}, "edited": false, "score": 0, "creation_date": 1528919691, "post_id": 50845162, "comment_id": 88693981, "body": "from doc: if f.readline() returns an empty string, the end of the file has been reached. Not <code>0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9835949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UFib9UPZ4ew/AAAAAAAAAAI/AAAAAAAAAFk/bVi3Zy0uCQc/photo.jpg?sz=128", "display_name": "Andy Junghyun Kim", "link": "https://stackoverflow.com/users/9835949/andy-junghyun-kim"}, "edited": false, "score": 0, "creation_date": 1528920179, "post_id": 50845293, "comment_id": 88694221, "body": "Thank you, but it didn&#39;t fix my problem after changing it to while line != &#39;&#39;:"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 3, "last_activity_date": 1528919886, "creation_date": 1528919886, "answer_id": 50845293, "question_id": 50845162, "link": "https://stackoverflow.com/questions/50845162/how-to-determine-why-my-python-code-takes-infinite-time-to-run/50845293#50845293", "title": "How to determine why my Python code takes infinite time to run", "body": "<p>your problem is in this snippet:</p>\n\n<pre><code>line = file.readline().strip()\nwhile line != 0:\n</code></pre>\n\n<p><code>line</code> will never be <code>== 0</code> since it is a string and <code>0</code> is a integer. They will never compare equal in python, so your loop repeats forever. Also, you do nothing inside the loop to change the value of the <code>line</code> variable. It will forever hold the first value assigned before the loop starts, the condition will never change.</p>\n"}, {"comments": [{"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "edited": false, "score": 0, "creation_date": 1528920004, "post_id": 50845299, "comment_id": 88694141, "body": "also, readline() returns strings so the condition itself will never be False."}, {"owner": {"reputation": 43, "user_id": 9835949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UFib9UPZ4ew/AAAAAAAAAAI/AAAAAAAAAFk/bVi3Zy0uCQc/photo.jpg?sz=128", "display_name": "Andy Junghyun Kim", "link": "https://stackoverflow.com/users/9835949/andy-junghyun-kim"}, "edited": false, "score": 0, "creation_date": 1528920291, "post_id": 50845299, "comment_id": 88694278, "body": "I appreciate your answer!"}, {"owner": {"reputation": 292, "user_id": 9927133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053d1326f4980e131009a6493f79200?s=128&d=identicon&r=PG&f=1", "display_name": "mkamerath", "link": "https://stackoverflow.com/users/9927133/mkamerath"}, "reply_to_user": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "edited": false, "score": 0, "creation_date": 1528920405, "post_id": 50845299, "comment_id": 88694333, "body": "@nosklo Thank you, I had forgotten that you can just do while line:"}], "tags": [], "owner": {"reputation": 292, "user_id": 9927133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053d1326f4980e131009a6493f79200?s=128&d=identicon&r=PG&f=1", "display_name": "mkamerath", "link": "https://stackoverflow.com/users/9927133/mkamerath"}, "is_accepted": true, "score": 0, "last_activity_date": 1528920480, "last_edit_date": 1528920480, "creation_date": 1528919921, "answer_id": 50845299, "question_id": 50845162, "link": "https://stackoverflow.com/questions/50845162/how-to-determine-why-my-python-code-takes-infinite-time-to-run/50845299#50845299", "title": "How to determine why my Python code takes infinite time to run", "body": "<p>This is a classic example of writing an infinite loop.</p>\n\n<p>The three necessary components for creating while loop are</p>\n\n<ol>\n<li>Making a comparision</li>\n<li>Code Body</li>\n<li>Updating the comparison variable</li>\n</ol>\n\n<p>You have the first two parts. However, the line:</p>\n\n<pre><code>line = file.readline().strip()\n</code></pre>\n\n<p>is outside of your while loop. Line will never be anything but the first line you assigned it to. The easiest way to solve this is add another</p>\n\n<pre><code>line = file.readline().strip()\nwhile line != 0:\n    course = tuple(line.split())\n    self._courses.append(course)\n    line = file.readline().strip()\n</code></pre>\n\n<p>As @nosklo said: the correct way to do the while loop is not to compare to zero. I usually prefer</p>\n\n<pre><code>while line:\n    # code\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1528920413, "last_edit_date": 1528920413, "creation_date": 1528920061, "answer_id": 50845325, "question_id": 50845162, "link": "https://stackoverflow.com/questions/50845162/how-to-determine-why-my-python-code-takes-infinite-time-to-run/50845325#50845325", "title": "How to determine why my Python code takes infinite time to run", "body": "<p>While you <em>can</em> iterate over the contents of a file using a <code>while</code> loop and explicit calls to <code>readline</code>, there is no reason to do so.</p>\n\n<pre><code>def read_file(self, file):\n    for line in file:\n        line = line.strip()\n        course = tuple(line.split())\n        self._courses.append(course)\n</code></pre>\n\n<p>which could be condensed even further:</p>\n\n<pre><code>def read_file(self, file):\n    self._courses.extend(tuple(line.strip().split()) for line in file)\n</code></pre>\n\n<hr>\n\n<p>If you choose to use a <code>while</code> loop, you are responsible for calling <code>readline</code> once per iteration, to get a newline, until it returns an empty string.</p>\n\n<pre><code>def read_file(self, file):\n    line = file.readline().strip()\n    while line != \"\":\n        self._courses.append(tuple(line.split()))\n        line = file.readline().strip()\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9835949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UFib9UPZ4ew/AAAAAAAAAAI/AAAAAAAAAFk/bVi3Zy0uCQc/photo.jpg?sz=128", "display_name": "Andy Junghyun Kim", "link": "https://stackoverflow.com/users/9835949/andy-junghyun-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50845299, "answer_count": 3, "score": 0, "last_activity_date": 1528931790, "creation_date": 1528919378, "last_edit_date": 1528931790, "question_id": 50845162, "link": "https://stackoverflow.com/questions/50845162/how-to-determine-why-my-python-code-takes-infinite-time-to-run", "title": "How to determine why my Python code takes infinite time to run", "body": "<p>I learned a little bit of OOP and file I/O. I tried to apply them to real-life by making my own code. Unfortunately, however, it doesn't run. Python never says there is an error. It is just executing command all day and saying please wait for the result.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>class CoursesTaken():\n\n    def __init__(self):\n        self._courses = []\n\n    def read_file(self, file):\n        line = file.readline().strip()\n        while line != 0:\n            course = tuple(line.split())\n            self._courses.append(course)\n\n    def add_course(self, season, code, gpa):\n        self._course = (season, code, gpa)\n        self._courses.append(self._course)\n\n    def total_courses(self):\n        return self._courses\n\n    def name_of_total_courses(self):\n        result = []\n        for i in self._courses:\n            name = i[1]\n            result.append(name)\n        return result\n\n\nif __name__ == '__main__':\n    file = open('courses.txt')\n    courses = CoursesTaken()\n    courses.read_file(file)\n    print(courses.name_of_total_courses)\n    file.close()\n</code></pre>\n\n<p>txt file is in this format:</p>\n\n<p>2018S CSC111 A</p>\n\n<p>2018S MAT101 B+</p>\n\n<p>I have no idea how to improve my code.</p>\n"}, {"tags": ["python", "django", "database", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 8362304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d75333910419880c5287933c7fc737?s=128&d=identicon&r=PG&f=1", "display_name": "Gagandeep Singh", "link": "https://stackoverflow.com/users/8362304/gagandeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1528974875, "creation_date": 1528974875, "answer_id": 50856227, "question_id": 50845097, "link": "https://stackoverflow.com/questions/50845097/postgres-new-created-user-cant-work-with-database/50856227#50856227", "title": "Postgres: New created user can&#39;t work with database", "body": "<p>Have you granted connect permission on dev_db database to your guest user and usage privilege on public schema</p>\n"}], "owner": {"reputation": 13493, "user_id": 2607447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd6c05db10236c0b175d26db1b0ce8e?s=128&d=identicon&r=PG", "display_name": "Milano", "link": "https://stackoverflow.com/users/2607447/milano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1528974875, "creation_date": 1528919124, "last_edit_date": 1528919516, "question_id": 50845097, "link": "https://stackoverflow.com/questions/50845097/postgres-new-created-user-cant-work-with-database", "title": "Postgres: New created user can&#39;t work with database", "body": "<p>I'm trying to create a new <strong>postgres</strong> user so I don't have to give my personal credentials to another developer. I want this new user to have access to only one database (there are <code>db</code> and <code>db_dev</code> databases)</p>\n\n<p>The problem is that <code>shell_plus</code> says that he doesn't have permissions for particular relation. </p>\n\n<p>What I have done:</p>\n\n<pre><code>sudo -u postgres psql\nCREATE USER guest WITH PASSWORD 'password';\nGRANT ALL PRIVILEGES ON DATABASE db_dev TO guest;\n</code></pre>\n\n<p>Then I tried:</p>\n\n<pre><code>GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO guest;\n</code></pre>\n\n<p>But shell keeps raising this error:</p>\n\n<pre><code>&gt;&gt;&gt; User.objects.all()\n&gt;&gt;&gt; ProgrammingError: permission denied for relation auth_user\n</code></pre>\n\n<p>The similar error is being raised when trying to run development server.</p>\n\n<p>Do you know what to do to make it work?</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 6276414, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/0b3c945baeb2a9bc2c31b8b0e2eeb157?s=128&d=identicon&r=PG&f=1", "display_name": "Brinley", "link": "https://stackoverflow.com/users/6276414/brinley"}, "edited": false, "score": 0, "creation_date": 1528919663, "post_id": 50845148, "comment_id": 88693961, "body": "Yeah I&#39;m getting the same error. What do you think is causing it? Is there anything I can do on the client side?"}, {"owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "reply_to_user": {"reputation": 511, "user_id": 6276414, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/0b3c945baeb2a9bc2c31b8b0e2eeb157?s=128&d=identicon&r=PG&f=1", "display_name": "Brinley", "link": "https://stackoverflow.com/users/6276414/brinley"}, "edited": false, "score": 0, "creation_date": 1528919846, "post_id": 50845148, "comment_id": 88694062, "body": "I pretty sure that it cannot be resolved on client side. I think the best way is to report this issue to <code>frontend</code> developers. They can take care about it."}], "tags": [], "owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1528920126, "last_edit_date": 1528920126, "creation_date": 1528919306, "answer_id": 50845148, "question_id": 50845079, "link": "https://stackoverflow.com/questions/50845079/python-selenium-selenium-common-exceptions-nosuchwindowexception-message-brow/50845148#50845148", "title": "Python selenium: selenium.common.exceptions.NoSuchWindowException: Message: Browsing context has been discarded", "body": "<p>It has nothing to do with <code>selenium</code>. I'm getting this in browser <code>DevTools</code> when trying your scenario manually:</p>\n\n<p><a href=\"https://i.stack.imgur.com/a88r6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a88r6.png\" alt=\"img\"></a></p>\n\n<p>It's a website issue.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 14931891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bfdab6187e656f01de42263f4a61639?s=128&d=identicon&r=PG&f=1", "display_name": "sampan0423", "link": "https://stackoverflow.com/users/14931891/sampan0423"}, "is_accepted": false, "score": 0, "last_activity_date": 1610807404, "creation_date": 1610807404, "answer_id": 65750778, "question_id": 50845079, "link": "https://stackoverflow.com/questions/50845079/python-selenium-selenium-common-exceptions-nosuchwindowexception-message-brow/65750778#65750778", "title": "Python selenium: selenium.common.exceptions.NoSuchWindowException: Message: Browsing context has been discarded", "body": "<p>it's not website issue. Iterally it alerts as &quot;noSuchWindowException&quot;, right? so where is the browser window, it's not existing. you've closed the tab/window. Based on this to find the exact reason by your situation.</p>\n"}], "owner": {"reputation": 511, "user_id": 6276414, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/0b3c945baeb2a9bc2c31b8b0e2eeb157?s=128&d=identicon&r=PG&f=1", "display_name": "Brinley", "link": "https://stackoverflow.com/users/6276414/brinley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5191, "favorite_count": 0, "accepted_answer_id": 50845148, "answer_count": 2, "score": 7, "last_activity_date": 1610807404, "creation_date": 1528919051, "question_id": 50845079, "link": "https://stackoverflow.com/questions/50845079/python-selenium-selenium-common-exceptions-nosuchwindowexception-message-brow", "title": "Python selenium: selenium.common.exceptions.NoSuchWindowException: Message: Browsing context has been discarded", "body": "<p>I have the following code ...</p>\n\n<pre><code># instantiate web driver\nprofile = webdriver.FirefoxProfile(\"C:\\\\Users\\\\me\\\\AppData\\\\Roaming\\\\Mozilla\\\\Firefox\\\\Profiles\\\\me.default\")\ndriver = webdriver.Firefox(firefox_profile=profile)\ndriver.wait = WebDriverWait(driver, 5)\n\n# browse to bot detection page\ndriver.get(\"https://botometer.iuni.iu.edu\")\n\n# click dropdown button on navbar\nbutton = driver.wait.until(EC.presence_of_element_located((By.CLASS_NAME, \"dropdown-toggle\")))\nbutton.click()\n\n# click login link\nlogin_link = driver.wait.until(EC.presence_of_element_located((By.LINK_TEXT, \"Log In\")))\nlogin_link.click()\n\n# switch to authorize window\nnew_window = driver.window_handles[1]\ndriver.switch_to.window(new_window)\n\n# click authorize button \nauthorize_button = driver.wait.until(EC.presence_of_element_located((By.ID, \"allow\")))\nauthorize_button.click()\ntime.sleep(5)\n</code></pre>\n\n<p>... that does the following:</p>\n\n<ol>\n<li>Instantiates a web driver</li>\n<li>Navigates to a page</li>\n<li>Clicks on a button on the page that opens a new window</li>\n<li>Switches to the new window</li>\n<li>Clicks another button in the new window</li>\n</ol>\n\n<p>Unfortunately, after the first button is clicked, the new window never opens, and the program terminates with this error: </p>\n\n<pre><code>selenium.common.exceptions.NoSuchWindowException: Message: Browsing context has been discarded\n</code></pre>\n\n<p>It was working fine before today and I'm not sure what happened. Any ideas?</p>\n"}, {"tags": ["python", "gdb", "gcore"], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 5384908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b3UPm.jpg?s=128&g=1", "display_name": "Eirik Fuller", "link": "https://stackoverflow.com/users/5384908/eirik-fuller"}, "is_accepted": true, "score": 1, "last_activity_date": 1578447304, "last_edit_date": 1578447304, "creation_date": 1529798470, "answer_id": 51005951, "question_id": 50845037, "link": "https://stackoverflow.com/questions/50845037/how-to-reverse-the-virtual-address-of-string-from-a-core-dump/51005951#51005951", "title": "How to reverse the virtual address of string from a core dump?", "body": "<p>You can use python code to locate various things in core files. The <a href=\"https://github.com/wackrat/structer\" rel=\"nofollow noreferrer\">structer</a> package includes an <code>elf</code> module whose <code>Elf</code> class provides methods for that. The following output from a <code>gdb</code> session has examples of how to use that code.</p>\n\n<p>The first excerpt of that session shows <code>gdb</code> opening a core file which was generated by <code>gcore</code>, and providing some data for the subsequent searches.</p>\n\n<pre><code>18:33:00 $ gdb -q /home/efuller/gnu/bin/gdb core.17856 \nReading symbols from /home/efuller/gnu/bin/gdb...done.\n[New LWP 17856]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\nCore was generated by `/home/efuller/gnu/bin/gdb /home/efuller/gnu/bin/gdb'.\nProgram terminated with signal SIGINT, Interrupt.\n#0  0x00007ffff62c5660 in __poll_nocancel () at ../sysdeps/unix/syscall-template.S:84\n84  ../sysdeps/unix/syscall-template.S: No such file or directory.\n(gdb) backtrace\n#0  0x00007ffff62c5660 in __poll_nocancel () at ../sysdeps/unix/syscall-template.S:84\n#1  0x00005555557f7ea6 in gdb_wait_for_event (block=1) at event-loop.c:772\n#2  0x00005555557f7185 in gdb_do_one_event () at event-loop.c:347\n#3  0x00005555557f71bd in start_event_loop () at event-loop.c:371\n#4  0x00005555557f003a in captured_command_loop (data=0x0) at main.c:324\n#5  0x00005555557eb2e9 in catch_errors (func=0x5555557efff8 &lt;captured_command_loop(void*)&gt;, func_args=0x0, errstring=0x555555b4f733 \"\", mask=RETURN_MASK_ALL) at exceptions.c:236\n#6  0x00005555557f16e2 in captured_main (data=0x7fffffffea10) at main.c:1149\n#7  0x00005555557f170b in gdb_main (args=0x7fffffffea10) at main.c:1159\n#8  0x00005555555f2daa in main (argc=2, argv=0x7fffffffeb18) at gdb.c:32\n(gdb) frame 6\n#6  0x00005555557f16e2 in captured_main (data=0x7fffffffea10) at main.c:1149\n1149              catch_errors (captured_command_loop, 0, \"\", RETURN_MASK_ALL);\n(gdb) info locals\ncontext = 0x7fffffffea10\nargc = 2\nargv = 0x7fffffffeb18\nquiet = 0\nset_args = 0\ninhibit_home_gdbinit = 0\nsymarg = 0x7fffffffed8e \"/home/efuller/gnu/bin/gdb\"\nexecarg = 0x7fffffffed8e \"/home/efuller/gnu/bin/gdb\"\npidarg = 0x0\ncorearg = 0x0\npid_or_core_arg = 0x0\ncdarg = 0x0\nttyarg = 0x0\nprint_help = 0\nprint_version = 0\nprint_configuration = 0\ncmdarg_vec = 0x0\ncmdarg_p = 0x0\ndirarg = 0x555555fdeb80\ndirsize = 1\nndir = 0\nsystem_gdbinit = 0x0\nhome_gdbinit = 0x555556174960 \"/home/efuller/.gdbinit\"\nlocal_gdbinit = 0x0\ni = 0\nsave_auto_load = 1\nobjfile = 0x0\npre_stat_chain = 0x555555b2c000 &lt;sentinel_cleanup&gt;\n(gdb) \n</code></pre>\n\n<p>The next excerpt shows <code>gdb</code> importing the python code, and performing two searches based on the value of a local variable. The first search shows multiple addresses at which that value occurs (the value of <code>symarg</code> and <code>execarg</code> is among them). The <code>findbytes</code> method requires a <code>bytes</code> object, not a <code>str</code> object. The second search shows just one address which contains the address of the first match from the first search, which happens to have a name in the symbol table.</p>\n\n<pre><code>(gdb) pi\n&gt;&gt;&gt; from structer import memmap, elf\n&gt;&gt;&gt; core = elf.Elf(memmap('core.17856'))\n&gt;&gt;&gt; from pprint import pprint\n&gt;&gt;&gt; \n(gdb) python pprint(tuple(hex(a) for a in core.findbytes(b\"/home/efuller/gnu/bin/gdb\")))\n('0x555555fdef30',\n '0x55555606fce0',\n '0x55555614ff72',\n '0x5555562496a0',\n '0x55555624b915',\n '0x55555625f250',\n '0x5555562c6c4b',\n '0x55555689f2b5',\n '0x7ffff5f2d490',\n '0x7fffffffed74',\n '0x7fffffffed8e',\n '0x7fffffffedf0',\n '0x7fffffffefde')\n(gdb) python pprint(tuple(hex(a) for a in core.findwords(0x555555fdef30)))\n('0x555555faea38',)\n(gdb) x/a 0x555555faea38\n0x555555faea38 &lt;_ZL16gdb_program_name&gt;:     0x555555fdef30\n(gdb) \n</code></pre>\n\n<p>The next excerpt shows other variations on the search. Searching for the <code>dirname</code> of the first search pattern turns up multiple hits, which include all of the hits from the first search. The subsequent search filters out the common hits by requiring a null terminator, and the one after that filters out hits which do not begin with a null terminator. Those last two searches report the same results, although the addresses differ by one, because the searches which require a leading null point at that leading null. </p>\n\n<pre><code>(gdb) python pprint(tuple(hex(a) for a in core.findbytes(b\"/home/efuller/gnu/bin\")))\n('0x555555b4f701',\n '0x555555bd33f0',\n '0x555555fdef30',\n '0x55555606fce0',\n '0x55555614ff72',\n '0x5555562496a0',\n '0x55555624b915',\n '0x55555625f250',\n '0x5555562c6c4b',\n '0x55555689f2b5',\n '0x7ffff5f2d490',\n '0x7fffffffed74',\n '0x7fffffffed8e',\n '0x7fffffffedf0',\n '0x7fffffffefde')\n(gdb) python pprint(tuple(hex(a) for a in core.findbytes(b\"/home/efuller/gnu/bin\\x00\")))\n('0x555555b4f701', '0x555555bd33f0')\n(gdb) python pprint(tuple(hex(a) for a in core.findbytes(b\"\\x00/home/efuller/gnu/bin\\x00\")))\n('0x555555b4f700', '0x555555bd33ef')\n(gdb) \n</code></pre>\n\n<p>The final excerpt separates the hits from the first search into two cases, those with leading nulls and those without leading nulls. The latter uses the most general type of search (the one that both <code>findbytes</code> and <code>findwords</code> rely on) so that it can include the non-null characters preceding the fixed part of the search pattern.</p>\n\n<pre><code>(gdb) python pprint(tuple(hex(a) for a in core.findbytes(b\"\\x00/home/efuller/gnu/bin/gdb\")))\n('0x555555fdef2f',\n '0x55555606fcdf',\n '0x55555624969f',\n '0x55555625f24f',\n '0x7fffffffed73',\n '0x7fffffffed8d',\n '0x7fffffffefdd')\n(gdb) python import re\n(gdb) python pprint(tuple(hex(a) for a in core.find(re.compile(rb\"\\x00[^\\x00]+/home/efuller/gnu/bin/gdb\"))))\n('0x55555614ff6f',\n '0x55555624b8ff',\n '0x5555562c6c37',\n '0x55555689f297',\n '0x7ffff5f2d487',\n '0x7fffffffeded')\n(gdb) x/s 0x55555614ff6f + 1\n0x55555614ff70:     \"_=/home/efuller/gnu/bin/gdb\"\n(gdb) \n</code></pre>\n\n<p>The <code>+ 1</code> in the last command skips the leading null in that search hit, although that could also be incorporated into the search code, as follows.</p>\n\n<pre><code>(gdb) python pprint(tuple(hex(a+1) for a in core.find(re.compile(rb\"\\x00[^\\x00]+/home/efuller/gnu/bin/gdb\"))))\n('0x55555614ff70',\n '0x55555624b900',\n '0x5555562c6c38',\n '0x55555689f298',\n '0x7ffff5f2d488',\n '0x7fffffffedee')\n(gdb) \n</code></pre>\n\n<p>The <a href=\"https://github.com/wackrat/structer\" rel=\"nofollow noreferrer\">structer</a> code does not require <code>gdb</code>; it can run in a python interpreter outside of gdb. It is not compatible with python2, so running it within <code>gdb</code> requires a <code>gdb</code> binary linked against python3.5.</p>\n\n<p>Searching for patterns in a core file can report results which are not reported by the search methods in the <a href=\"https://github.com/wackrat/structer\" rel=\"nofollow noreferrer\">structer</a> code. There are two reasons for that. The <a href=\"https://github.com/wackrat/structer\" rel=\"nofollow noreferrer\">structer</a> code only searches the load segments, so it will not find the contents of note segments, which contains various things which do not correspond to virtual addresses in the core. The <a href=\"https://github.com/wackrat/structer\" rel=\"nofollow noreferrer\">structer</a> code does not find results which span multiple load segments, if two adjacent segments have a gap (an unmapped region between the segments). The code combines adjacent segments which are contiguous in the virtual address space, so a search result need not be confined to a single segment.</p>\n"}], "owner": {"reputation": 31, "user_id": 9009111, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jKoxp3CdIp0/AAAAAAAAAAI/AAAAAAAAAEo/jTbNn07k8ME/photo.jpg?sz=128", "display_name": "Vincent Wells", "link": "https://stackoverflow.com/users/9009111/vincent-wells"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 51005951, "answer_count": 1, "score": 1, "last_activity_date": 1578447304, "creation_date": 1528918900, "last_edit_date": 1528920883, "question_id": 50845037, "link": "https://stackoverflow.com/questions/50845037/how-to-reverse-the-virtual-address-of-string-from-a-core-dump", "title": "How to reverse the virtual address of string from a core dump?", "body": "<p>I'm trying to find a specific string in a process's memory.  Specifically I want to find the virtual address where it's stored. I wrote a python script to call <code>gcore</code> on the process and scan the resulting file for all matches.  Then I call <code>pmap</code> and iterate through the entries there.  My idea is to find the section of memory each index corresponds to, then subtract the sum of the sizes of previous sections to get the offset in the correct section, add it to the base, and get the virtual address.  However, when I search for strings at the virtual addresses I'm computing using gdb, I don't find the right strings.  Why doesn't my method work?  Does <code>gcore</code> not dump the entire contents of virtual memory in order?</p>\n\n<pre><code>#!/usr/bin/python3\nimport sys\nimport ctypes\nimport ctypes.util\nimport subprocess\nimport os\nimport ptrace\nimport re\n\nif(len(sys.argv) != 2):\n    print(\"Usage: search_and_replace.py target_pid\")\n    sys.exit(-1)\n\npid = sys.argv[1]\nif not pid.isdigit():\n    print(\"Invalid PID specified.  Make sure PID is an integer\")\n    sys.exit(-1)\n\nbash_cmd = \"sudo gcore -a {}\".format(pid)\nos.system(bash_cmd)\n\nwith open(\"core.\" + sys.argv[1], 'rb') as f:\n    s = f.read()\n# with open(\"all.dump\", 'rb') as f:\n#   s = f.read()\n\nstr_query = b'a random string in program\\'s memory'\nstr_replc = b'This is an inserted string, replacing the original.'\nindices = []\nfor match in re.finditer(str_query, s):\n    indices.append(match.start())\nprint(\"number of indices is \" + str(len(indices)))\n\n#index = s.find(str_query)\n\n# print(\"offset is \" + str(index))\n# if(index == 0):\n#   print(\"error: String not found\")\n#   sys.exit(-1)\n\nbash_cmd = \"sudo pmap -x {} &gt; maps\".format(pid)\nprint(bash_cmd)\nsubprocess.call(bash_cmd, shell=True)\n\nwith open(\"maps\") as m:\n    lines = m.readlines()\n\n#calculate the virtual address of the targeted string the running process via parsing the pmap output\npages = []\nv_addrs = []\n\nfor index in indices:\n    sum = 0\n    offset = 0\n    v_addr = 0  \n    #print(index)\n    for i in range(2, len(lines) - 2):\n        line = lines[i]\n        items = line.split()\n        v_addr = int(items[0], 16)\n        old_sum = sum\n        sum += int(items[1]) * 1024\n        if sum &gt; index:\n            offset = index - old_sum\n            print(\"max is \" + hex(v_addr + int(items[1]) * 1024))\n            print(\"offset is \" + str(offset) + \" hex \" + hex(offset))\n            print(\"final va is \" + hex(v_addr + offset))\n            pages.append(hex(v_addr) + \", \" + hex(v_addr + int(items[1]) * 1024))\n            v_addrs.append(hex(v_addr + offset))\n            break\n\nprint(\"base va is \" + hex(v_addr))\nv_addr += offset\n\nfor page in set(pages):\n    print(page)\n\nfor va in v_addrs:\n    print(va)\n</code></pre>\n\n<p>On a related note, I also tried to use gdb to scan the file manually--it doesn't seem to find nearly as many matches when I use its <code>find</code> command to scan for the string in the region of memory in question (exact numbers vary greatly).  Why is that?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 1, "creation_date": 1528919777, "post_id": 50845015, "comment_id": 88694022, "body": "You have bad indentation for your <code>word_search</code> function. Please correct that so we can be sure just what you meant. Also show the full traceback for the error message. Read and follow <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. Finally, is that the result of a session at the console? It is not completely clear what is input and what is output. If it is a console session, copy-and-paste the prompts as well. If it is code in a module, remove the output and show that separately."}, {"owner": {"reputation": 21, "user_id": 9937345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d38be752d2b2b22b14afdfaf59c1b7b?s=128&d=identicon&r=PG&f=1", "display_name": "user9937345", "link": "https://stackoverflow.com/users/9937345/user9937345"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1528920385, "post_id": 50845015, "comment_id": 88694322, "body": "Is this what you meant? I apologize I am very new."}], "owner": {"reputation": 21, "user_id": 9937345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d38be752d2b2b22b14afdfaf59c1b7b?s=128&d=identicon&r=PG&f=1", "display_name": "user9937345", "link": "https://stackoverflow.com/users/9937345/user9937345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 10, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528920328, "creation_date": 1528918783, "last_edit_date": 1528920328, "question_id": 50845015, "link": "https://stackoverflow.com/questions/50845015/applying-re-module-on-a-series", "title": "Applying RE module on a Series", "body": "<p>I have trouble applying the following to my series.</p>\n\n<pre><code>Data['Notes']\n0       2018-06-07 09:38:14Z -- legal -- As per ...\n1       2018-06-05 12:48:26Z -- name -- Holdin...\n2       2018-06-05 17:15:48Z -- filing -- Answe...\n3       2018-06-11 08:34:53Z -- name -- lvm i...\n4       2018-05-11 08:31:26Z -- filed -- summo...\n5       2018-06-01 16:07:11Z -- Name Rogers -- sent ...\n\nimport re\n\nkeywords = {'file', 'filing', 'legal'}\nmax_words_after  = 5\n\nkey_re = re.compile(fr\"\"\"\n(?:{'|'.join([w for w in keywords])})   #keyword options group\n\\s((?:[\\s]?[A-Za-z\\']+[\\s]?)    #capture word. include with line-breaks\n{{1,{max_words_after}}})                #1 to max_words_after\n\"\"\", re.VERBOSE|re.IGNORECASE\n)\n\ndata['Result'] = pd.Series\ndef word_search(series):\n     return key_re.findall(series)\ndata['Result'] = data.apply(word_search(data['Notes']))\n\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-32-e6b6bcbe720d&gt; in &lt;module&gt;()\n 13 def word_search(series):\n 14     return key_re.findall(series)\n  ---&gt; 15 data['Result'] = data.apply(word_search(data['Notes']))\n 16 \n 17 \n\n&lt;ipython-input-32-e6b6bcbe720d&gt; in word_search(series)\n 12 data['Result'] = pd.Series\n 13 def word_search(series):\n ---&gt; 14     return key_re.findall(series)\n 15 data['Result'] = data.apply(word_search(data['Notes']))\n 16 \n  TypeError: expected string or bytes-like object\n</code></pre>\n\n<p>Please tell me how I can get a result for every index position and append it to a new series within the data frame.</p>\n"}, {"tags": ["python", "coroutine"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1528918815, "post_id": 50844999, "comment_id": 88693528, "body": "Asking for &quot;some use cases&quot; or &quot;some examples&quot; brings this out of the sweet spot of a narrow question with a canonical answer -- a question asking for examples can never have an answer that&#39;s canonical and complete, because more examples can always exist."}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1528918848, "post_id": 50844999, "comment_id": 88693550, "body": "<a href=\"https://www.youtube.com/watch?v=Z_OAlIhXziw\" rel=\"nofollow noreferrer\">knock yourself out</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528918910, "post_id": 50844999, "comment_id": 88693578, "body": "that said, one of the attributes that makes a coroutine a better tool for a job than a typical one-off function is a need for persistent state between invocations. That can just be as simple as a buffer of content received in the last call that couldn&#39;t be processed yet because the records weren&#39;t complete, to pick one common example."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528918956, "post_id": 50844999, "comment_id": 88693601, "body": "That said, we <b>do</b> have duplicates for this already (site rules change over time, but we don&#39;t usually remove questions if they were valid when asked); ie. <a href=\"https://stackoverflow.com/questions/303760/what-are-use-cases-for-a-coroutine\">What are the use cases for a coroutine?</a>; <a href=\"https://stackoverflow.com/questions/40925797/why-do-we-need-coroutines-in-python\">Why do we need coroutines in Python?</a>; <a href=\"https://stackoverflow.com/questions/32238949/what-are-the-things-you-have-to-use-coroutines-over-functions-in-python\">What are things you have to use coroutines over functions for in Python?</a>"}], "owner": {"reputation": 4713, "user_id": 1187968, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/55c10b3b35dba52324314052e9cf84dc?s=128&d=identicon&r=PG", "display_name": "user1187968", "link": "https://stackoverflow.com/users/1187968/user1187968"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528918702, "creation_date": 1528918702, "question_id": 50844999, "link": "https://stackoverflow.com/questions/50844999/python-coroutines-why-are-they-useful-what-are-the-use-case", "title": "Python Coroutines: Why are they useful? What are the use case?", "body": "<p>I understand Python coroutines are generators functions that consume data. \nWhat are they useful? Can you give me some use cases? </p>\n\n<p>Below is a coroutines example. </p>\n\n<pre><code>def match(pattern):\n    print('Looking for ' + pattern)\n    try:\n        while True:\n            s = (yield)\n            print (\"S is: {}\".format(s))\n            if pattern in s:\n                print(s)\n    except GeneratorExit:\n        print(\"=== Done ===\")\n\n\ndef read(text, next_coroutine):\n    for line in text.split():\n        next_coroutine.send(line)\n    next_coroutine.close()\n\n\n\ntext = 'Commending spending is offending to people pending lending!'\nmatcher = match('ending')\nmatcher.__next__()\nread(text, matcher)\n</code></pre>\n"}]