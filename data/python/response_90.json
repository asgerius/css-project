[{"tags": ["python", "encoding", "syntax-error", "pyqt4", "pyinstaller"], "comments": [{"owner": {"reputation": 1624, "user_id": 2284418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AQO95.jpg?s=128&g=1", "display_name": "Puffin GDI", "link": "https://stackoverflow.com/users/2284418/puffin-gdi"}, "edited": false, "score": 1, "creation_date": 1475109701, "post_id": 39759342, "comment_id": 66815218, "body": "Do you added this one in original python code file? <a href=\"http://www.python.org/dev/peps/pep-0263/\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0263</a>"}, {"owner": {"reputation": 517, "user_id": 5556018, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-nKluQavDpu8/AAAAAAAAAAI/AAAAAAAAAME/4DV85y5sY9k/photo.jpg?sz=128", "display_name": "Pablo Flores", "link": "https://stackoverflow.com/users/5556018/pablo-flores"}, "reply_to_user": {"reputation": 1624, "user_id": 2284418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AQO95.jpg?s=128&g=1", "display_name": "Puffin GDI", "link": "https://stackoverflow.com/users/2284418/puffin-gdi"}, "edited": false, "score": 0, "creation_date": 1475139177, "post_id": 39759342, "comment_id": 66826084, "body": "Thank you for your answer. Yes, I did use those lines in my code."}, {"owner": {"reputation": 1119, "user_id": 6222397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027495110613102/picture?type=large", "display_name": "Hisham Karam", "link": "https://stackoverflow.com/users/6222397/hisham-karam"}, "edited": false, "score": 2, "creation_date": 1476498675, "post_id": 39759342, "comment_id": 67384445, "body": "Your python file is not saved as UTF-8"}, {"owner": {"reputation": 2012, "user_id": 3030243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AcuEX.jpg?s=128&g=1", "display_name": "PsyGik", "link": "https://stackoverflow.com/users/3030243/psygik"}, "edited": false, "score": 0, "creation_date": 1476501611, "post_id": 39759342, "comment_id": 67384836, "body": "Do you have <code># -*- coding: utf-8 -*-</code> at the top of your file?"}, {"owner": {"reputation": 369, "user_id": 3697626, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000919661923/picture?type=large", "display_name": "vatay", "link": "https://stackoverflow.com/users/3697626/vatay"}, "edited": false, "score": 0, "creation_date": 1476504918, "post_id": 39759342, "comment_id": 67385287, "body": "Maybe you have BOM ( U+FEFF BYTE ORDER MARK) in begin of file. Remove it. <a href=\"https://gist.github.com/ZiTAL/1b011032616a5b3bf7e6\" rel=\"nofollow noreferrer\">gist.github.com/ZiTAL/1b011032616a5b3bf7e6</a>"}, {"owner": {"reputation": 517, "user_id": 5556018, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-nKluQavDpu8/AAAAAAAAAAI/AAAAAAAAAME/4DV85y5sY9k/photo.jpg?sz=128", "display_name": "Pablo Flores", "link": "https://stackoverflow.com/users/5556018/pablo-flores"}, "edited": false, "score": 0, "creation_date": 1476563005, "post_id": 39759342, "comment_id": 67401596, "body": "SOrry for late reply. Yes, i do have at the beggining the line: &#39;-<i>- coding: utf-8 -</i>-&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 4, "last_activity_date": 1476553271, "creation_date": 1476553271, "answer_id": 40062240, "question_id": 39759342, "link": "https://stackoverflow.com/questions/39759342/cant-open-the-desktop-app-created-with-pyinstaller/40062240#40062240", "title": "Can&#39;t open the desktop app created with PyInstaller", "body": "<p>This is a Python traceback, but the first line is showing an <em>exe file</em>:</p>\n\n<pre><code>File \"C:\\Users\\Flosh\\Desktop\\dist\\ProgramNew\\New.exe\", line 1\n</code></pre>\n\n<p>which suggests you must be trying to run the application like this:</p>\n\n<pre><code>python C:\\Users\\Flosh\\Desktop\\dist\\ProgramNew\\New.exe\n</code></pre>\n\n<p>You cannot run exe files with Python. Indeed, the whole point of using tools like PyInstaller is that you don't even need to have Python installed in order to run the program. You have created a <em>self-contained executable</em>, so just run it directly, like this:</p>\n\n<pre><code>C:\\Users\\Flosh\\Desktop\\dist\\ProgramNew\\New.exe\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120, "user_id": 3493214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tM22.jpg?s=128&g=1", "display_name": "MAYANK SHARMA", "link": "https://stackoverflow.com/users/3493214/mayank-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1476691360, "last_edit_date": 1476691360, "creation_date": 1476690481, "answer_id": 40081006, "question_id": 39759342, "link": "https://stackoverflow.com/questions/39759342/cant-open-the-desktop-app-created-with-pyinstaller/40081006#40081006", "title": "Can&#39;t open the desktop app created with PyInstaller", "body": "<p>You can try cxfreeze for creating the installer or executable package. Description of creating the setup file is given here <a href=\"https://cx-freeze.readthedocs.io/en/latest/distutils.html\" rel=\"nofollow\">https://cx-freeze.readthedocs.io/en/latest/distutils.html</a>. May be this could help you.</p>\n"}, {"tags": [], "owner": {"reputation": 620, "user_id": 1658543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Fvc8F.png?s=128&g=1", "display_name": "Nils Lindemann", "link": "https://stackoverflow.com/users/1658543/nils-lindemann"}, "is_accepted": false, "score": 1, "last_activity_date": 1477060649, "creation_date": 1477060649, "answer_id": 40179440, "question_id": 39759342, "link": "https://stackoverflow.com/questions/39759342/cant-open-the-desktop-app-created-with-pyinstaller/40179440#40179440", "title": "Can&#39;t open the desktop app created with PyInstaller", "body": "<p>As @Hisham Karam already said in his comment to your question, you probably have not saved your file with the utf-8 encoding. Just adding <code># coding: utf-8</code> at the top of your python file is not enough, it also <em>has to be encoded in utf-8</em>. There are many ways to  check this, my preferred is to use <a href=\"https://notepad-plus-plus.org/\" rel=\"nofollow\">Notepad++</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MrFq6.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/MrFq6.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 517, "user_id": 5556018, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-nKluQavDpu8/AAAAAAAAAAI/AAAAAAAAAME/4DV85y5sY9k/photo.jpg?sz=128", "display_name": "Pablo Flores", "link": "https://stackoverflow.com/users/5556018/pablo-flores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1570, "favorite_count": 0, "accepted_answer_id": 40062240, "answer_count": 3, "score": 3, "last_activity_date": 1477070911, "creation_date": 1475107069, "last_edit_date": 1477070911, "question_id": 39759342, "link": "https://stackoverflow.com/questions/39759342/cant-open-the-desktop-app-created-with-pyinstaller", "title": "Can&#39;t open the desktop app created with PyInstaller", "body": "<p>I created a PyIinstaller file from a <code>.py</code> file. In this file, I've got files with the <code>.ui</code> extension created using PyQt4. But when I try to execute the file created, it shows this error:</p>\n\n<pre><code>File \"C:\\Users\\Flosh\\Desktop\\dist\\ProgramNew\\New.exe\", line 1\nSyntaxError: Non-ASCII character '\\x90' in file C:\\Users\\Flosh\\Desktop\\dist\\ProgramNew\\New.exe on line 1, \nbut no encoding declared; see http://python.org/dev/peps/pep-0263/ for details\n</code></pre>\n\n<p>In the original <code>.py</code> file, I use the UTF-8 encoding, but this error shows an ASCII problem.</p>\n\n<p>How can I fix this error?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1736, "user_id": 2241910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/516190dbb5e7655792bfe6d49316222f?s=128&d=identicon&r=PG", "display_name": "benten", "link": "https://stackoverflow.com/users/2241910/benten"}, "edited": false, "score": 2, "creation_date": 1475107165, "post_id": 39759336, "comment_id": 66814701, "body": "try swapping the order of your last two lines. <code>count</code> effectively starts at 1 due to where it&#39;s located, while python indices start at 0."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1475107195, "post_id": 39759336, "comment_id": 66814703, "body": "also use print statements ... you surely would have found the solution"}, {"owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "edited": false, "score": 0, "creation_date": 1475107326, "post_id": 39759336, "comment_id": 66814724, "body": "that fixed it! Another problem arose though, the values of examTime at the bad indices still return a &quot;NoneType&quot; value. Do you have any idea why this isn&#39;t working?"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475107680, "post_id": 39759336, "comment_id": 66814788, "body": "@AustinLutterbach Does <code>findSchedule</code> actually return anything? If so, what?"}, {"owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475107749, "post_id": 39759336, "comment_id": 66814798, "body": "@jDo it returns a string which is the exam time. for example: &quot;Wednesday 17, 7:45 - 8:00 am&quot;"}, {"owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475107827, "post_id": 39759336, "comment_id": 66814816, "body": "@jDo thats what its suppose to return anyway, it doesn&#39;t for those specific indices, and I&#39;m not sure why. I&#39;ve defined the function for the bad indices in several different ways for it to try to return the value, but it won&#39;t do it. So I&#39;m trying to just append the bad indices values straight to the list"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475108109, "post_id": 39759336, "comment_id": 66814875, "body": "@AustinLutterbach Ok, I think we need to see the <code>findSchedule</code> function to help out."}, {"owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475108362, "post_id": 39759336, "comment_id": 66814931, "body": "@jDo posted it! its odd because even if it doesn&#39;t fit any conditions it should return the string &quot;Class not found...&quot;, but it just returns &quot;NoneType&quot;"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1475108624, "post_id": 39759336, "comment_id": 66815001, "body": "Could you try to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475108702, "post_id": 39759336, "comment_id": 66815016, "body": "@AustinLutterbach Thanks for including it. Just as an example, all the <code>if</code>/<code>elif</code> statements with no final <code>else</code> clause will return <code>None</code> if neither <code>if</code> nor <code>elif</code> are <code>True</code>. The function would benefit  from an overall re-factoring and shortening to reduce repetition and make it easier to follow the logic. You could start by replacing all the <code>return</code> statements with variable assignments and just have a single <code>return</code> at the end."}, {"owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1475108888, "post_id": 39759336, "comment_id": 66815058, "body": "@cricket_007 I just called the findSchedule function for a bad index and it printed and returned the correct value. But when I loop through examTime it still returns &quot;NoneType&quot; value for that specific index."}, {"owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475108971, "post_id": 39759336, "comment_id": 66815073, "body": "@jDo ok thanks for the tip! I just tested calling the function though for a specific bad index, and it returned the correct value, so I don&#39;t think it is the function, but it is when I try to loop through examTime since for some reason it gives me the &quot;NoneType"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475109366, "post_id": 39759336, "comment_id": 66815155, "body": "@AustinLutterbach Ok, try including the full error/traceback here as well."}, {"owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1475109602, "post_id": 39759336, "comment_id": 66815198, "body": "@jDo It&#39;s not giving me an error, it just gives me None when I print out all of the schedules. So for example indices 1 - 58 will give me a exam time string, but when I get to 59, for some reason it gives me &quot;none&quot;, even though it returns a value when I print out calling the function for that specific index."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1475117090, "post_id": 39759336, "comment_id": 66816734, "body": "my comment was simply that the method is really really long. What input are you giving that generates the unexpected results?"}], "answers": [{"tags": [], "owner": {"reputation": 459, "user_id": 3543300, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a9a73d51e419c225c857bad24f4c7c8b?s=128&d=identicon&r=PG&f=1", "display_name": "user3543300", "link": "https://stackoverflow.com/users/3543300/user3543300"}, "is_accepted": false, "score": 0, "last_activity_date": 1475107320, "creation_date": 1475107320, "answer_id": 39759379, "question_id": 39759336, "link": "https://stackoverflow.com/questions/39759336/why-does-this-keep-on-giving-me-a-list-index-out-of-range-error/39759379#39759379", "title": "Why does this keep on giving me a list index out of range error?", "body": "<p>It's tough to say without knowing what your data looks like, but here's what I think,</p>\n\n<p>Your <code>count</code> variable is being incremented too early. In python list indexes start at <code>0</code> and go to <code>len(list)-1</code> as the last index. You're kind of starting at <code>count=1</code> so it's possible that on the last iteration <code>count=len(list)</code> which gives the error. Try this as a correction for the latter part of your code:</p>\n\n<pre><code>for i in badIndices:\n    if count &gt;= len(test1):\n        break\n    else:\n        examTime[i] = test1[count]\n        #We increment count after it is used\n        #to avoid an error\n        count+=1\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6896606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9e05844d4e7123dc11908ce123d8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Lutterbach", "link": "https://stackoverflow.com/users/6896606/austin-lutterbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475108309, "creation_date": 1475106996, "last_edit_date": 1475108309, "question_id": 39759336, "link": "https://stackoverflow.com/questions/39759336/why-does-this-keep-on-giving-me-a-list-index-out-of-range-error", "title": "Why does this keep on giving me a list index out of range error?", "body": "<pre><code>count = 0\nbadIndices = [59,64,68,72,74,77,79,103,104,108,109,118,119,123,124,130,133,139]\ntest1 = []\ncsvCourses = []\ncsvExamTime = []\nexamTime = []\n\nwith open(\"final_exam_schedule.csv\") as file:\n    reader = csv.reader(file, delimiter = \",\")\n    next(reader)\n    for row in reader:\n        csvCourses.append(row)\n\nfor i in range(len(csvCourses)):\n    csvExamTime.append(csvCourses[i][5])\n    examTime.append(findSchedule(csvCourses[i][4],csvCourses[i][1],csvCourses[i][3],csvCourses[i][2]))\n\nfor i in badIndices:\n    test1.append(csvCourses[i][5])\n\nfor i in badIndices:\n    if count &gt;= len(test1):\n        break\n    else:\n        count += 1\n        examTime[i] = test1[count] #this is where I get my error\n</code></pre>\n\n<p>every time I try to assign examTime[i] to test1, it gives me \"out of range\", but I thought that my if statement made sure that it didn't exceed the range?</p>\n\n<p>For reference, examTime contains 155 different indices, and the badIndices list are the ones that aren't returning a value, so I'm going to that exact index and assigning it a value. findSchedule() is my function that has a bunch of ifs and elses to assign examTime, I didn't include it since it is really long and unnecessary to the problem. Only the specific bad indices don't return a value, the rest do.</p>\n\n<p>edit: ok here is the findSchedule function</p>\n\n<pre><code>def findSchedule(days,time,cr,period):          \n    if days == \"TR\":\n        if time == \"11:00\":\n            if period == \"AM\":\n                return(\"Tuesday, December 13, 9:45 - 11:45 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")     \n        elif time == \"12:30\" or time == \"1:00\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"3:30\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"5:00\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 4:30 - 6:30 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"6:30\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 7:00 - 9:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"8:00\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 7:30 - 9:30 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"2:00\":\n            if period == \"PM\":\n                return(\"Thursday, December 15, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"9:30\":\n            if period == \"AM\":\n                return(\"Friday, December 16, 9:45 - 11:45 am\")\n        elif time == \"9:00\":\n            if period == \"AM\":\n                return(\"Friday, December 16, 7:30 - 9:30 am\")\n        elif time == \"10:00\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 9:45 - 11:45 am\")\n        elif time == \"12:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 12:00 - 2:00 pm\")\n        elif time == \"5:00\" and cr == \"5\":\n            return(\"Wednesday, December 14, 4:30 - 6:30 pm\")\n    elif days == \"MWF\":\n        if time == \"10:00\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 9:45 - 11:45 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"12:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"3:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"5:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 4:30 - 6:30 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"6:30\" or time == \"8:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 7:00 - 9:00 pm\")\n            elif period == \"AM\" and time == \"8:00\":\n                return(\"Thursday, December 15, 7:30 - 9:30 am\")\n        elif time == \"11:00\":\n            if period == \"AM\":\n                return(\"Thursday, December 15, 9:45 - 11:45 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"2:00\":\n            if period == \"PM\":\n                return(\"Thursday, December 15, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"9:00\":\n            if period == \"AM\":\n                return(\"Friday, December 16, 7:30 - 9:30 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"1:00\":\n            if period == \"PM\":\n                return(\"Friday, December 16, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"4:00\":\n            if period == \"PM\":\n                return(\"Friday, December 16, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"8:00\":\n            if period == \"AM\":\n                return(\"Thursday, December 15, 7:30 - 9:30 am\")\n        elif time == \"9:30\":\n            return(\"Friday, December 16, 9:45 - 11:45 am\")\n        elif time == \"3:30\":\n            return(\"Tuesday, December 13, 2:15 - 4:15 pm\")\n        elif time == \"3:00\":\n            return(\"Wednesday, December 14, 2:15 - 4:15 pm\")\n        elif time == \"11:00\" and cr == \"5\":\n            if period == \"AM\":\n                return(\"Thursday, December 15, 9:45 - 11:45 am\")\n    elif days == \"MW\":\n        if time == \"8:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 7:00 - 9:00 pm\")\n            elif period == \"AM\":\n                return(\"Thursday, December 15, 7:30 - 9:30 am\")\n        elif time == \"11:00\":\n            if period == \"AM\":\n                return(\"Thursday, December 15, 9:45 - 11:45 am\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"2:00\":\n            if period == \"PM\":\n                return(\"Thursday, December 15, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"1:00\":\n            if period == \"PM\":\n                return(\"Friday, December 16, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"10:00\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 9:45 - 11:45 am\")\n        elif time == \"9:00\":\n            return(\"Friday, December 16, 7:30 - 9:30 am\")\n        elif time == \"9:30\":\n            return(\"Friday, December 16, 9:45 - 11:45 am\")\n        elif time == \"9:30\":\n            return(\"Friday, December 16, 9:45 - 11:45 am\")\n        elif time == \"3:30\":\n            return(\"Tuesday, December 13, 2:15 - 4:15 pm\")\n        elif time == \"6:30\" and cr == \"1\":\n            return(\"Monday, December 12, 6:30 - 7:25 pm\")\n        elif time == \"6:30\" and cr == \"2\":\n            return(\"Monday, December 12, 6:30 - 8:20 pm\")\n        elif time == \"6:30\" and cr == \"3\":\n            return(\"Monday, December 12, 6:30 - 9:30 pm\")\n        elif time == \"6:30\" and cr == \"4\":\n            return(\"Monday, December 12, 6:30 - 10:15 pm\")\n        elif time == \"5:00\" and cr == \"5\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 4:30 - 6:30 pm\")\n\n    elif days == \"R\":\n        if time == \"6:30\" and period == \"PM\":\n            return(\"Thursday, December 15, 7:00 - 9:00 pm\")\n    elif days == \"WF\":\n        if time == \"8:00\" and (cr == \"2\" or cr == \"5\"):\n            if period == \"AM\":\n                return(\"Thursday, December 15, 7:30 - 9:30 am\")\n            elif period == \"PM\":\n                return(\"No class found\")\n        elif time == \"8:00\" and cr == \"4\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 7:30 - 9:30 am\")\n            elif period == \"PM\":\n                return(\"Class not found\")\n        elif time == \"9:00\":\n            if period == \"AM\":\n                return(\"Friday, December 16, 7:30 - 9:30 am\")\n            if period == \"PM\":\n                return(\"Class not found\")\n        elif time == \"9:30\":\n            if period == \"AM\":\n                return(\"Friday, December 16, 9:45 - 11:45 am\")\n            elif period == \"PM\":\n                return(\"Class not found\")\n        elif time == \"10:00\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 9:45 - 11:45 am\")\n            elif period == \"PM\":\n                return(\"Class not found\")\n        elif time == \"11:00\":\n            if period == \"AM\":\n                return(\"Thursday, December 15, 9:45 - 11:45 am\")\n            elif period == \"PM\":\n                return(\"Class not found\")\n        elif time == \"12:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"12:30\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Classs not found\")\n        elif time == \"1:00\":\n            if period == \"PM\":\n                return(\"Friday, December 16, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"2:00\":\n            if period == \"PM\":\n                return(\"Thursday, December 15, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"3:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"3:30\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"4:00\":\n            if period == \"PM\":\n                return(\"Friday, December 16, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"5:00\" and cr == \"2\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 4:30 - 6:30 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"5:00\" and cr == \"4\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 4:30 - 6:30 pm\")\n            elif period == \"AM\":\n                return(\"Class not found\")\n        elif time == \"9:30\":\n            return(\"Friday, December 16, 9:45 - 11:45 am\")\n        elif time == \"3:30\":\n            return(\"Tuesday, December 13, 2:15 - 4:15 pm\")\n    elif days == \"M\":\n        if time == \"6:30\":\n            return(\"Monday, December 12, 6:30 - 7:25 pm\")\n    elif days == \"T\":\n        if time == \"6:30\":\n            return(\"Tuesday, December 13, 7:00 - 9:00 pm\")\n    else:\n        if (cr == \"4\" or cr == \"2\") and time == \"12:30\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 1:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif cr == \"4\" and time == \"3:30\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif cr == \"4\" and time == \"5:00\":\n            if period == \"PM\":\n                return(\"Tuesday, December 13, 4:30 - 6:30 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif cr == \"4\" and time == \"8:00\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 7:30 - 9:30 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"10:00\":\n            if period == \"AM\":\n                return(\"Wednesday, December 14, 9:45 - 10:45 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"12:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"3:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"5:00\":\n            if period == \"PM\":\n                return(\"Wednesday, December 14, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif cr == \"5\" and time == \"8:00\":\n            if period == \"AM\":\n                return(\"Thursday, December 15, 7:30 - 9:30 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"11:00\":\n            if period == \"AM\":\n                return(\"Thursday, December 15, 9:45 - 11:45 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif cr == \"4\" and time == \"2:00\":\n            if period == \"PM\":\n                return(\"Thursday, December 15, 12:00 - 2:00 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif cr == \"5\" and time == \"2:00\":\n            if period == \"PM\":\n                return(\"Thursday, December 15, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"9:00\":\n            if period == \"AM\":\n                return(\"Friday, December 16, 7:30 - 9:30 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"9:30\":\n            if period == \"AM\":\n                return(\"Friday, December 16, 9:45 - 10:45 am\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"1:00\":\n            if period == \"PM\":\n                return(\"Friday, December 16, 12:00 - 2:00 pm\")\n            elif period == \"PM\":\n                return(\"Class final not found, please try again\")\n        elif time == \"4:00\":\n            if period == \"PM\":\n                return(\"Friday, December 16, 2:15 - 4:15 pm\")\n            elif period == \"AM\":\n                return(\"Class final not found, please try again\")   \n        else:\n            return(\"Class final not found, please try again\")\n</code></pre>\n"}, {"tags": ["python", "opencv", "ocr"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 6192380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f4ffd2c03d96d12c5f9b8151c477921?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasDr", "link": "https://stackoverflow.com/users/6192380/thomasdr"}, "is_accepted": false, "score": 0, "last_activity_date": 1475178122, "creation_date": 1475178122, "answer_id": 39778702, "question_id": 39759312, "link": "https://stackoverflow.com/questions/39759312/script-error-from-simple-digit-recognition-ocr-in-opencv-python/39778702#39778702", "title": "Script Error from &quot;Simple Digit Recognition OCR in OpenCV-Python&quot;", "body": "<p>this Error was Homemade:</p>\n\n<pre><code>sample = roismall.reshape((1,100))\n</code></pre>\n\n<p>is corresponding to this line:</p>\n\n<pre><code>roismall = cv2.resize(roi,(30,30))\n</code></pre>\n\n<p>The 30 x 30 = 900 is the right Value or 10,10 = 100.\nI change it back to:</p>\n\n<pre><code>roismall = cv2.resize(roi,(10,10))\n</code></pre>\n\n<p>Here the complett script:</p>\n\n<pre><code>import sys\n\nimport numpy as np\nimport cv2\n\nim = cv2.imread('test001.png')\nres = cv2.resize(im,None,fx=2, fy=2, interpolation = cv2.INTER_CUBIC)\nim3 = res.copy()\n\ngray = cv2.cvtColor(res,cv2.COLOR_BGR2GRAY)\nblur = cv2.GaussianBlur(gray,(5,5),0)\nthresh = cv2.adaptiveThreshold(blur,255,1,1,11,2)\n\n#################      Now finding Contours         ###################\n\n_,contours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)\n\nsamples =  np.empty((0,100))\nsample =  np.empty((0,100))\nresponses = []\nkeys = [i for i in range(48,58)]\n\nfor cnt in contours:\n    if (cv2.contourArea(cnt)&gt;10) and (cv2.contourArea(cnt)&lt;900):\n\n        [x,y,w,h] = cv2.boundingRect(cnt)\n        if  ((h&gt;15) and (h&lt;30)) and ((w&gt;8) and (w&lt;30)):\n            cv2.rectangle(res,(x,y),(x+w,y+h),(0,0,255),1)\n            roi = thresh[y:y+h,x:x+w]\n            roismall = cv2.resize(roi,(10,10))\n            cv2.imshow('roi',roismall)\n            cv2.imshow('norm',res)\n            key = cv2.waitKey(0) % 256\n            if key == 27:  # (escape to quit)\n                sys.exit()\n            elif key in keys:\n                responses.append(int(key))\n                sample = roismall.reshape((1,100))\n                samples = np.append(samples,sample)\n\nresponses = np.array(responses,np.float32)\nresponses = responses.reshape((responses.size,1))\nprint (\"training complete\")\n\nnp.savetxt('generalsamples.data',samples)\nnp.savetxt('generalresponses.data',responses)\n</code></pre>\n\n<p>regards Thomas</p>\n"}], "owner": {"reputation": 91, "user_id": 6192380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f4ffd2c03d96d12c5f9b8151c477921?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasDr", "link": "https://stackoverflow.com/users/6192380/thomasdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475178122, "creation_date": 1475106828, "question_id": 39759312, "link": "https://stackoverflow.com/questions/39759312/script-error-from-simple-digit-recognition-ocr-in-opencv-python", "title": "Script Error from &quot;Simple Digit Recognition OCR in OpenCV-Python&quot;", "body": "<p>I have update the Script but one Error i can not fix.\nHere my script Version:</p>\n\n<pre><code>import sys\nimport numpy as np\nimport cv2\n\nim = cv2.imread('test001.png')\nres = cv2.resize(im,None,fx=2, fy=2, interpolation = cv2.INTER_CUBIC)\nim3 = res.copy()\n\ngray = cv2.cvtColor(res,cv2.COLOR_BGR2GRAY)\nblur = cv2.GaussianBlur(gray,(5,5),0)\nthresh = cv2.adaptiveThreshold(blur,255,1,1,11,2)\n\n#################      Now finding Contours         ###################\n\n_,contours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)\n\nsamples =  np.empty((0,100))\nresponses = []\nkeys = [i for i in range(48,58)]\n\nfor cnt in contours:\n    if (cv2.contourArea(cnt)&gt;50) and (cv2.contourArea(cnt)&lt;900):\n\n        [x,y,w,h] = cv2.boundingRect(cnt)\n        if  ((h&gt;0) and (h&lt;35)) and ((w&gt;0) and (w&lt;35)):\n            cv2.rectangle(res,(x,y),(x+w,y+h),(0,0,255),1)\n            roi = thresh[y:y+h,x:x+w]\n            roismall = cv2.resize(roi,(30,30))\n            cv2.imshow('norm',res)\n            key = cv2.waitKey(0) % 256\n            print (\"+\")\n            print (key)\n            print (\"+\")\n\n            if key == 27:  # (escape to quit)\n                sys.exit()\n            elif key in keys:\n                print (\"-\")\n                print (key)\n                print (\"-\")\n                responses.append(int(key))\n                print (len(roismall))\n                sample = roismall.reshape((1,100))\n                samples = np.append(samples,sample,0)\n\nresponses = np.array(responses,np.float32)\nresponses = responses.reshape((responses.size,1))\nprint (\"training complete\")\n\nnp.savetxt('generalsamples.data',samples)\nnp.savetxt('generalresponses.data',responses)\n</code></pre>\n\n<p>When i run the code i get this Error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File \"file001.py\", line 45, in\n  \n      sample = roismall.reshape((1,100)) ValueError: total size of new array must be unchanged</p>\n</blockquote>\n\n<p>The last print \"print (len(roismall))\" have a Value of 30.</p>\n\n<p>regards Thomas</p>\n"}, {"tags": ["python", "docker", "dockerpy"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1475107008, "post_id": 39759306, "comment_id": 66814677, "body": "you can mount a shared folder in docker ... and save the file to that folder ..."}, {"owner": {"reputation": 285, "user_id": 4703731, "user_type": "registered", "accept_rate": 4, "profile_image": "https://graph.facebook.com/100006306372111/picture?type=large", "display_name": "Wang Nick", "link": "https://stackoverflow.com/users/4703731/wang-nick"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1475107280, "post_id": 39759306, "comment_id": 66814718, "body": "Not quite understand. Can I treat the string as a content and as it does in Dockerfile to"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1475107364, "post_id": 39759306, "comment_id": 66814729, "body": "i dont understand the question ... in your dockerfile you could certainly do <code>x=(python -c &quot;print 1234&quot;)</code> and x would be an environmental variable equal to 1234"}], "owner": {"reputation": 285, "user_id": 4703731, "user_type": "registered", "accept_rate": 4, "profile_image": "https://graph.facebook.com/100006306372111/picture?type=large", "display_name": "Wang Nick", "link": "https://stackoverflow.com/users/4703731/wang-nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475106785, "creation_date": 1475106785, "question_id": 39759306, "link": "https://stackoverflow.com/questions/39759306/pass-messages-as-file-through-docker-py", "title": "Pass messages as file through docker-py", "body": "<p>Is there a way to pass messages as a file through docker and execute it on the docker shell?</p>\n\n<p>For instance, if x  = \"print 12345\", can I pass the value of x as a python file and copy it into my container. Then use shell to run this python file?</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "dataframe", "charts"], "comments": [{"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1475108538, "post_id": 39759301, "comment_id": 66814974, "body": "I can not reproduce the problem. It works for me."}, {"owner": {"reputation": 815, "user_id": 6571492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/33cca8797c533e67bae63c59711d10db?s=128&d=identicon&r=PG&f=1", "display_name": "ZacAttack", "link": "https://stackoverflow.com/users/6571492/zacattack"}, "reply_to_user": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1475108599, "post_id": 39759301, "comment_id": 66814990, "body": "It must be something on my computer as far as settings"}, {"owner": {"reputation": 1084, "user_id": 6005062, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9KbZp.jpg?s=128&g=1", "display_name": "estebanpdl", "link": "https://stackoverflow.com/users/6005062/estebanpdl"}, "edited": false, "score": 0, "creation_date": 1475111416, "post_id": 39759301, "comment_id": 66815550, "body": "@ZacAttack did you tried this line: <code>% matplotlib inline</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1731, "user_id": 5030014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-zWqHFyLctqQ/AAAAAAAAAAI/AAAAAAAADqs/5BfozDTamtQ/photo.jpg?sz=128", "display_name": "David Hoffman", "link": "https://stackoverflow.com/users/5030014/david-hoffman"}, "is_accepted": true, "score": 0, "last_activity_date": 1475117140, "creation_date": 1475117140, "answer_id": 39760572, "question_id": 39759301, "link": "https://stackoverflow.com/questions/39759301/trying-to-plot-a-random-series-on-a-chart-with-matplotlib-but-the-chart-will-no/39760572#39760572", "title": "Trying to plot a random series on a chart with matplotlib, but the chart will not display when the programe is ran.", "body": "<p>It's not clear if you're doing this in a script, interactive python session or ipython. In the first case you need to call <code>plt.show()</code> at the end to show any figures. That's what you can do in a regular interactive python session as well. In ipython you're better off using <code>%matplotlib inline</code> to set everything up for you. </p>\n"}, {"tags": [], "owner": {"reputation": 1084, "user_id": 6005062, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9KbZp.jpg?s=128&g=1", "display_name": "estebanpdl", "link": "https://stackoverflow.com/users/6005062/estebanpdl"}, "is_accepted": false, "score": 0, "last_activity_date": 1475171275, "creation_date": 1475171275, "answer_id": 39776860, "question_id": 39759301, "link": "https://stackoverflow.com/questions/39759301/trying-to-plot-a-random-series-on-a-chart-with-matplotlib-but-the-chart-will-no/39776860#39776860", "title": "Trying to plot a random series on a chart with matplotlib, but the chart will not display when the programe is ran.", "body": "<p>You can add this line at the top of your code:</p>\n\n<pre><code>% matplotlib inline\n</code></pre>\n\n<p>Here is a good example using your data:</p>\n\n<p><a href=\"https://i.stack.imgur.com/neD0y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/neD0y.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 815, "user_id": 6571492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/33cca8797c533e67bae63c59711d10db?s=128&d=identicon&r=PG&f=1", "display_name": "ZacAttack", "link": "https://stackoverflow.com/users/6571492/zacattack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 39760572, "answer_count": 2, "score": 0, "last_activity_date": 1475171275, "creation_date": 1475106764, "question_id": 39759301, "link": "https://stackoverflow.com/questions/39759301/trying-to-plot-a-random-series-on-a-chart-with-matplotlib-but-the-chart-will-no", "title": "Trying to plot a random series on a chart with matplotlib, but the chart will not display when the programe is ran.", "body": "<p>The following code will run with no errors, but the chart that I am trying to display will not pop up. I see the screen blink when I run the program like the chart is going to load but that is it, just a quick flash of the screen. Then my command line reads \"press any key to continue\" which is normal when my programs are finished running, but there is no chart???</p>\n\n<pre><code>import pandas as pd\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nseedval = 111111\n\nnp.random.seed(seedval)\ns= pd.Series(np.random.randn(1096),index=pd.date_range('2012-01-01','2014-12-31'))\n\nwalk_ts = s.cumsum()\n\nwalk_ts.plot()\n</code></pre>\n\n<p>This is the output </p>\n\n<pre><code>Press any key to continue . . .\n</code></pre>\n"}, {"tags": ["python", "django", "django-forms"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1475118536, "post_id": 39759273, "comment_id": 66817070, "body": "I guess it is your browser filling the form from the password storage."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6896559, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j0rP0b5Mwew/AAAAAAAAAAI/AAAAAAAAJMc/FBBVJo_sVKc/photo.jpg?sz=128", "display_name": "Andreia Oliveira", "link": "https://stackoverflow.com/users/6896559/andreia-oliveira"}, "edited": false, "score": 0, "creation_date": 1475140818, "post_id": 39761484, "comment_id": 66827149, "body": "I did what you suggested and it worked. Thank you. I guess I was just confused as to why the autofill appeared in the &#39;last_name&#39; field instead of in the &#39;username&#39;."}, {"owner": {"reputation": 6780, "user_id": 6448351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3Kns.jpg?s=128&g=1", "display_name": "Prakhar Trivedi", "link": "https://stackoverflow.com/users/6448351/prakhar-trivedi"}, "reply_to_user": {"reputation": 3, "user_id": 6896559, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j0rP0b5Mwew/AAAAAAAAAAI/AAAAAAAAJMc/FBBVJo_sVKc/photo.jpg?sz=128", "display_name": "Andreia Oliveira", "link": "https://stackoverflow.com/users/6896559/andreia-oliveira"}, "edited": false, "score": 0, "creation_date": 1475141594, "post_id": 39761484, "comment_id": 66827711, "body": "Cheers..! Happy coding :)"}], "tags": [], "owner": {"reputation": 6780, "user_id": 6448351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3Kns.jpg?s=128&g=1", "display_name": "Prakhar Trivedi", "link": "https://stackoverflow.com/users/6448351/prakhar-trivedi"}, "is_accepted": true, "score": 0, "last_activity_date": 1475123683, "creation_date": 1475123683, "answer_id": 39761484, "question_id": 39759273, "link": "https://stackoverflow.com/questions/39759273/user-form-has-fields-with-unwanted-initial-value-django/39761484#39761484", "title": "User form has fields with unwanted initial value, Django", "body": "<p>It's because while testing,You might have used browser feature of saving the field and form data i.e. autosave the password.It generally saves the password and just previous field of the form.Please clear your cache and form autofill data from browser settings. Let us know if the error still exists.\nThanks</p>\n"}], "owner": {"reputation": 3, "user_id": 6896559, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j0rP0b5Mwew/AAAAAAAAAAI/AAAAAAAAJMc/FBBVJo_sVKc/photo.jpg?sz=128", "display_name": "Andreia Oliveira", "link": "https://stackoverflow.com/users/6896559/andreia-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 39761484, "answer_count": 1, "score": 0, "last_activity_date": 1475123683, "creation_date": 1475106503, "question_id": 39759273, "link": "https://stackoverflow.com/questions/39759273/user-form-has-fields-with-unwanted-initial-value-django", "title": "User form has fields with unwanted initial value, Django", "body": "<p>I'm trying to create a view to allow a User to create another User. The problem is that the generated form has initial values for the 'password' and 'last_name' fields, and I don't know why. I need to remove those initial values.</p>\n\n<p>I have created a UserForm with ModelForm.</p>\n\n<pre><code>class UserForm(forms.ModelForm):\n    # I've tried this, but it doesn't change anything\n    #def __init__(self, *args, **kwargs):\n        #super(UserForm, self).__init__(*args, **kwargs)\n        #self.fields['password'].value = ''\n        #self.fields['last_name'].value = ''\n\n    password = forms.CharField(widget=forms.PasswordInput(render_value=True))\n\n    class Meta:\n        model = User\n        fields = [\n            'username', 'email', 'first_name', 'last_name'\n        ]\n</code></pre>\n\n<p>Then I have the view. I have coded the view following the same pattern for creating views for other objects. After having this problem, I wrote the view down to this:</p>\n\n<pre><code>def create_user(request):\n    user_form = UserForm()\n\n    context = {\n        \"user_form\": user_form,\n    }\n    return render(request, \"remote/user/user_create_form.html\", context)\n</code></pre>\n\n<p>I was hoping that if I only tried to display the form, and not treat the form data, this problem would not appear, but it does.</p>\n\n<p>My template has this (I'm using crispy forms): </p>\n\n<pre><code>&lt;form action=\"\" method=\"POST\"&gt;{% csrf_token %}\n    {{ user_form|crispy }}\n    &lt;input type=\"submit\" class=\"btn btn-primary\" value=\"Registar\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here is what the form looks like initially:\n<a href=\"http://i.stack.imgur.com/wTt4d.png\" rel=\"nofollow\">password and last_name fields have initial values</a></p>\n"}, {"tags": ["python", "python-3.4", "anaconda"], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 4062451, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c62a4b86f88400a422c10d43567ac3bf?s=128&d=identicon&r=PG&f=1", "display_name": "spacegoing", "link": "https://stackoverflow.com/users/4062451/spacegoing"}, "is_accepted": true, "score": 0, "last_activity_date": 1484092653, "creation_date": 1484092653, "answer_id": 41580566, "question_id": 39759271, "link": "https://stackoverflow.com/questions/39759271/configure-system-default-python-to-use-anacondas-packages/41580566#41580566", "title": "Configure system default python to use anaconda&#39;s packages", "body": "<p><code>update-alternatives</code> will do this trick. Simply remember switching to Py3.4 when you need and switching it back after you finished!</p>\n"}], "owner": {"reputation": 3984, "user_id": 4062451, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c62a4b86f88400a422c10d43567ac3bf?s=128&d=identicon&r=PG&f=1", "display_name": "spacegoing", "link": "https://stackoverflow.com/users/4062451/spacegoing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 41580566, "answer_count": 1, "score": 0, "last_activity_date": 1484092653, "creation_date": 1475106476, "question_id": 39759271, "link": "https://stackoverflow.com/questions/39759271/configure-system-default-python-to-use-anacondas-packages", "title": "Configure system default python to use anaconda&#39;s packages", "body": "<p>I have to keep using the <code>system's default</code> python3.4 on a centos server. I'm wondering if there is any way to configure system's python using anaconda's python packages:P</p>\n"}, {"tags": ["python", "ascii", "parity"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1475106572, "post_id": 39759265, "comment_id": 66814584, "body": "this question does not make sense in its current form ... please provide (a small sample) example input and expected output (at the very least ...its probably a good idea to post some code that you have tried that did not give the correct results, as well as what way the results are wrong)"}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 2, "creation_date": 1475107822, "post_id": 39759265, "comment_id": 66814811, "body": "I&#39;m not sure what you mean by &quot;in a real textbook&quot; --- are you scanning a printed book (on paper) and somehow losing bits from the scanner device (or from the scanned image-or-data file)?  Are you scanning a book and looking for printed &quot;0&quot; and &quot;1&quot; characters, but the scanner is not recording all the characters (or misidentifying them as capital-O or lower-case-L)?  Or are you starting with a complete file representing a book&#39;s contents (PDF? ASCII? LaTeX? XML? bitmap?), and somehow not getting all the data you expected out of it?"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1475106752, "creation_date": 1475106752, "answer_id": 39759298, "question_id": 39759265, "link": "https://stackoverflow.com/questions/39759265/ascii-stream-with-missing-bits-no-parity/39759298#39759298", "title": "Ascii stream with missing bits (no parity)", "body": "<pre><code>all_ones_and_zeros = re.findall(\"[01]\",corpus_of_text)\nBITS_PER_ASCII = 8 #(ascii characters are all the ordinals from 0-255 ... or 8 bits)\nasciis = zip([iter(all_ones_and_zeros)]*BITS_PER_ASCII)\nbins = [''.join(x) for x in asciis]\nchars = [chr(int(y,2)) for y in bins]\n\nprint \"MSG:\",chars\n</code></pre>\n\n<p>I guess ... its not very clear what your input or expected output is ...</p>\n"}], "owner": {"reputation": 21, "user_id": 4274199, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tcRBSGviy8Q/AAAAAAAAAAI/AAAAAAABQ6E/U7wnIrllNNQ/photo.jpg?sz=128", "display_name": "Sander Van Schoote", "link": "https://stackoverflow.com/users/4274199/sander-van-schoote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1475106752, "creation_date": 1475106446, "last_edit_date": 1475106736, "question_id": 39759265, "link": "https://stackoverflow.com/questions/39759265/ascii-stream-with-missing-bits-no-parity", "title": "Ascii stream with missing bits (no parity)", "body": "<p>I've been given a task to look for 0's and 1's in a real textbook in order to decipher an ASCII message from it. The problem is that it's really hard to find all 0's and 1's and I have the feeling I am skipping a lot of them. This completely messes up the ASCII conversion. Some of the things I tried:</p>\n\n<ul>\n<li>'synchronize' words by detecting spaces (or something close to a space)</li>\n<li>trying to correct chars based on assumption of only alphabet characters (a-z, A-Z)</li>\n<li>trying to correct words based on the assumption of frequency of chars in the language (Dutch)</li>\n</ul>\n\n<p>But I still didn't get much out of it with the main problem being synchronization (when does a new char start?). I probably have to run through the books again (sigh, 3rd time or so) but I was wondering if you guys have any other ideas for the problem of missing bits in an ASCII binary stream?</p>\n"}, {"tags": ["python", "openfst"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1475106438, "post_id": 39759240, "comment_id": 66814554, "body": "Welcome to stackoverflow. This question would be vastly improved by providing the literal for the value you want to convert (just call <code>repr(value)</code> and post it here)."}, {"owner": {"reputation": 33, "user_id": 6430754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24dfd5ba537c46f957128b4157b3b6f3?s=128&d=identicon&r=PG&f=1", "display_name": "DoritoDewBoop", "link": "https://stackoverflow.com/users/6430754/doritodewboop"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1475106910, "post_id": 39759240, "comment_id": 66814659, "body": "Greeting @Paulo, just learned something new, thank you. Here you go, <code>&lt;StdVectorFst with 104 states&gt;</code>"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1475108011, "post_id": 39759240, "comment_id": 66814860, "body": "OK, I was expecting something like a list of integers. :-) I would like to reproduce your problem - I know a lot about ETL but nothing about openfst. Could you edit your question in order to include a small, self-contained and reproducible example of the input you got and expected output?"}], "answers": [{"tags": [], "owner": {"reputation": 1081, "user_id": 2034301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bCh7p.jpg?s=128&g=1", "display_name": "blambert", "link": "https://stackoverflow.com/users/2034301/blambert"}, "is_accepted": true, "score": 1, "last_activity_date": 1475245383, "creation_date": 1475245383, "answer_id": 39793772, "question_id": 39759240, "link": "https://stackoverflow.com/questions/39759240/showing-characters-instead-of-integers-in-arcs-in-openfstpyfst/39793772#39793772", "title": "Showing characters instead of integers in arcs in OpenFST(PyFST)", "body": "<p>To do this on the command line, make sure you provide both an input and output symbol table.  The command should be something like</p>\n\n<pre><code>fstdraw --isymbols=input_syms.txt --osymbols=output_syms.txt fst.bin\n</code></pre>\n\n<p>I haven't used \"PyFST\", but I would suggest you use the Python bindings that are included in OpenFst 1.5.1 and later.  The Python support has been getting better in versions 1.5.x, so it's best to use 1.5.3 or later.</p>\n\n<p>If using the OpenFST provided Python bindings, make sure you set the symbol tables before attempting to draw.</p>\n\n<pre><code>fst.input_symbols = your_symbol_table\nfst.output_symbols = your_symbol_table\nfst.draw(\"fst.dot\")\n</code></pre>\n\n<p>There is more documentation for these Python bindings available here: <a href=\"http://www.openfst.org/twiki/bin/view/FST/PythonExtension\" rel=\"nofollow\">http://www.openfst.org/twiki/bin/view/FST/PythonExtension</a></p>\n\n<p>If that doesn't help, could you post some example code please?</p>\n"}], "owner": {"reputation": 33, "user_id": 6430754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24dfd5ba537c46f957128b4157b3b6f3?s=128&d=identicon&r=PG&f=1", "display_name": "DoritoDewBoop", "link": "https://stackoverflow.com/users/6430754/doritodewboop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 39793772, "answer_count": 1, "score": 3, "last_activity_date": 1475257751, "creation_date": 1475106171, "last_edit_date": 1475257751, "question_id": 39759240, "link": "https://stackoverflow.com/questions/39759240/showing-characters-instead-of-integers-in-arcs-in-openfstpyfst", "title": "Showing characters instead of integers in arcs in OpenFST(PyFST)", "body": "<p>I'm using the method <code>linear_chain</code> to accept a <code>String</code>. When I convert it into a <code>fst binary</code> to then into a <code>DOT</code> format, I get integers instead of the characters. Also, I have a SymbolTable for each of the corresponding letters being read.</p>\n\n<p>What I need is to show the characters instead, be by the command line or by coding directly in Python. Any help or reference would be greatly appreciated.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8167, "user_id": 3734244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/y1UTF.png?s=128&g=1", "display_name": "danidee", "link": "https://stackoverflow.com/users/3734244/danidee"}, "edited": false, "score": 2, "creation_date": 1475106250, "post_id": 39759188, "comment_id": 66814514, "body": "<a href=\"http://stackoverflow.com/questions/1988804/what-is-memoization-and-how-can-i-use-it-in-python\" title=\"what is memoization and how can i use it in python\">stackoverflow.com/questions/1988804/&hellip;</a>"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 8167, "user_id": 3734244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/y1UTF.png?s=128&g=1", "display_name": "danidee", "link": "https://stackoverflow.com/users/3734244/danidee"}, "edited": false, "score": 0, "creation_date": 1475106326, "post_id": 39759188, "comment_id": 66814532, "body": "@danidee good related answer (although probably overkill for this particular question)"}], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1475105965, "post_id": 39759197, "comment_id": 66814452, "body": "(additionally the question does not make much sense outside of that context :P )"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1475106248, "post_id": 39759197, "comment_id": 66814511, "body": "And if you&#39;re using IPython, results like this are also stored in the <code>Out</code> object, so you can look at the little <code>Out[15]:</code> or <code>Out[42]:</code> label next to your output and access <code>Out[15]</code> or <code>Out[42]</code> to get at objects that have been shoved out of <code>_</code> by further outputs."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1475106287, "post_id": 39759197, "comment_id": 66814520, "body": "ahh I fiigured ipython had some extra bells and whistles :P but i dont use it enough so :P"}, {"owner": {"reputation": 83, "user_id": 6896508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727dc315c6619ba3cbb17c71478aedf7?s=128&d=identicon&r=PG&f=1", "display_name": "DanB", "link": "https://stackoverflow.com/users/6896508/danb"}, "edited": false, "score": 0, "creation_date": 1475122356, "post_id": 39759197, "comment_id": 66817983, "body": "Wow, that was a perfect and easy solution, thank you!"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 4, "last_activity_date": 1475105776, "creation_date": 1475105776, "answer_id": 39759197, "question_id": 39759188, "link": "https://stackoverflow.com/questions/39759188/how-to-save-value-returned-from-python-function-if-call-does-not-capture-return/39759197#39759197", "title": "How to save value returned from python function if call does not capture return", "body": "<p><code>y=_</code></p>\n\n<p>assuming you are in the interactive python console. <code>_</code> is magic that holds the last \"result\"</p>\n"}], "owner": {"reputation": 83, "user_id": 6896508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727dc315c6619ba3cbb17c71478aedf7?s=128&d=identicon&r=PG&f=1", "display_name": "DanB", "link": "https://stackoverflow.com/users/6896508/danb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 39759197, "answer_count": 1, "score": 0, "last_activity_date": 1475105776, "creation_date": 1475105711, "question_id": 39759188, "link": "https://stackoverflow.com/questions/39759188/how-to-save-value-returned-from-python-function-if-call-does-not-capture-return", "title": "How to save value returned from python function if call does not capture return", "body": "<p>Let's say I have a python function, where <code>x</code> and <code>y</code> are relatively large objects (lists, NumPy matrices, etc.):</p>\n\n<pre><code>def myfun(x):\n  y=some complicated function of x\n  return y\n</code></pre>\n\n<p>If in an interactive session the user calls this as: </p>\n\n<pre><code>myfun(5)\n</code></pre>\n\n<p>The call is basically useless, since <code>y</code> is lost. Let's also suppose the function takes a while to run. Is there a way to retrieve the answer, so the user doesn't have to re-run, i.e. <code>answer=myfun(5)</code>? Alternatively, what is a good (pythonic) way to write the function to make it 'fool-proof' for this scenario? Some not-so-great options are:</p>\n\n<p>Require a parameter that stores the value, e.g.</p>\n\n<pre><code>def myfun(x,y):\n  y = some complicated function of x\n  return y\n</code></pre>\n\n<p>Or maybe:</p>\n\n<pre><code>def myfun(x):\n  y = some complicated function of x\n  global temp\n  temp = y\n  return y\n</code></pre>\n\n<p>In the latter case, if a user then mistakenly called <code>myfun(5)</code>, there's the option of <code>y=temp</code> to get the answer back.. but using <code>global</code> just seems wrong.</p>\n"}, {"tags": ["python", "python-requests", "put", "confluence"], "answers": [{"comments": [{"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1475165718, "post_id": 39759463, "comment_id": 66844791, "body": "Why is the update not happening then? And what other formats can the API respond with if not JSON?"}, {"owner": {"reputation": 17253, "user_id": 577199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/df8c59bf29696babd35e0bb7e0182e78?s=128&d=identicon&r=PG", "display_name": "Ceasar Bautista", "link": "https://stackoverflow.com/users/577199/ceasar-bautista"}, "reply_to_user": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1475185182, "post_id": 39759463, "comment_id": 66855075, "body": "I&#39;m not familiar with the specific API, but XML is pretty common besides JSON. However, it can response with any content-type. It could be text, HTML, etc.  As for why it&#39;s not doing what you expect, it could be the wrong body, method, or endpoint. It&#39;s hard to say without know more about the specifics of what you are trying to do."}], "tags": [], "owner": {"reputation": 17253, "user_id": 577199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/df8c59bf29696babd35e0bb7e0182e78?s=128&d=identicon&r=PG", "display_name": "Ceasar Bautista", "link": "https://stackoverflow.com/users/577199/ceasar-bautista"}, "is_accepted": true, "score": 0, "last_activity_date": 1475108045, "creation_date": 1475108045, "answer_id": 39759463, "question_id": 39759155, "link": "https://stackoverflow.com/questions/39759155/python-put-request-to-confluence-webpage-valueerror-no-json-object-could-be-d/39759463#39759463", "title": "Python PUT Request to Confluence Webpage - ValueError: No JSON object could be decoded, but &lt;Response [200]&gt;", "body": "<p>This is happening because the API you're posting to doesn't respond with JSON, so when you call <code>r.json()</code> requests tries to parse the body of the response as JSON and fails. You're seeing a 200 because you were able to send the data to the server correctly, you're just trying to read the response wrong.</p>\n\n<p>From the <a href=\"http://docs.python-requests.org/en/master/user/quickstart/\" rel=\"nofollow\">Requests docs</a>:</p>\n\n<blockquote>\n  <p>For example, if the response gets a 204 (No Content), or if the response contains invalid JSON, attempting r.json() raises ValueError: No JSON object could be decoded.</p>\n</blockquote>\n"}], "owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 39759463, "answer_count": 1, "score": 0, "last_activity_date": 1475108045, "creation_date": 1475105529, "last_edit_date": 1475106006, "question_id": 39759155, "link": "https://stackoverflow.com/questions/39759155/python-put-request-to-confluence-webpage-valueerror-no-json-object-could-be-d", "title": "Python PUT Request to Confluence Webpage - ValueError: No JSON object could be decoded, but &lt;Response [200]&gt;", "body": "<p>I'm trying to update some data on a confluence webpage. Everything works fine in Postman (the data is updated). However, when I use python and the requests module I'm getting the following error:</p>\n\n<blockquote>\n  <p>ValueError: No JSON object could be decoded</p>\n</blockquote>\n\n<p>The strangest thing is I'm getting a 200 status code back but the webpage isn't updating. The error seems to root from typing 'r.json'.</p>\n\n<p>Here is my code (I'm trying to change the content of the webpage to 'Hello World'):</p>\n\n<pre><code>import requests\nimport json\n\nurl = &lt;url&gt;\n\ndata = {\n    \"id\": \"18219205\",\n    \"title\": \"Testapi\",\n    \"type\": \"page\",\n    \"version\": {\n        \"number\": 11\n    },\n    \"body\": {\n        \"storage\": {\n            \"representation\": \"storage\",\n            \"value\": \"Hello world.\"\n        }\n    }\n}\ndumped_data = json.dumps(data)\n\nheaders = {\n    'content-type': \"application/json\",\n    'authorization': \"Basic &lt;token number&gt;\",\n    'cache-control': \"no-cache\",\n    'postman-token': \"&lt;another token&gt;\"\n    }\n\nr = requests.put(url, data=dumped_data, headers=headers, verify=False)\n\nprint r.json()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 4, "creation_date": 1475105261, "post_id": 39759108, "comment_id": 66814309, "body": "cool story bro."}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 1, "creation_date": 1475109680, "post_id": 39759108, "comment_id": 66815212, "body": "The hover-text for the downvote button begins, &quot;This question does not show any research effort...&quot;.  To everyone who answered anyway:  Please don&#39;t <a href=\"https://stackoverflow.com/questions/39729526\">feed</a> the <a href=\"http://slash7.com/2006/12/22/vampires/\" rel=\"nofollow noreferrer\">help vampires</a>."}, {"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "edited": false, "score": 0, "creation_date": 1475118430, "post_id": 39759108, "comment_id": 66817049, "body": "<a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask a Question on Stack Overflow</a> - You should probably read that. Also this may help you pass this class (just getting an answer), but you&#39;re not gonna get a degree this way man."}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 6, "last_activity_date": 1475105256, "creation_date": 1475105256, "answer_id": 39759127, "question_id": 39759108, "link": "https://stackoverflow.com/questions/39759108/sorting-tuple-of-tuple-in-a-list/39759127#39759127", "title": "Sorting tuple of tuple in a list", "body": "<pre><code>sorted(a_list,key=lambda x:(-x[-1],x[0]))\n</code></pre>\n\n<p>I guess... you should probably make an effort if you actually want to pass your class... </p>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1475105658, "post_id": 39759168, "comment_id": 66814381, "body": "This is way over-engineered."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1475105679, "post_id": 39759168, "comment_id": 66814386, "body": "that might be part of the point ..."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1475106087, "post_id": 39759168, "comment_id": 66814483, "body": "Hoping not to come off as too critical, but you should rely on the <code>key</code> parameter to do these sorts of things. Also, I would look into <code>defaultdictionary</code> for this sort of idiom were your dictionary values will be another container that may or may not exist. It will be significantly faster than these checks. And finally, <code>if k in some_dict.keys()</code> is unecessary, you can simply use <code>if k in some_dict</code>"}], "tags": [], "owner": {"reputation": 174, "user_id": 1330616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3901983492714e675bda199fff98437?s=128&d=identicon&r=PG", "display_name": "Gopi Vinod Avvari", "link": "https://stackoverflow.com/users/1330616/gopi-vinod-avvari"}, "is_accepted": false, "score": 0, "last_activity_date": 1475105598, "creation_date": 1475105598, "answer_id": 39759168, "question_id": 39759108, "link": "https://stackoverflow.com/questions/39759108/sorting-tuple-of-tuple-in-a-list/39759168#39759168", "title": "Sorting tuple of tuple in a list", "body": "<p>Below code works with dictionaries and uses its keys to do your work</p>\n\n<pre><code>testv = [(('A', 'B'), 1.0), (('A', 'C'), 1.0), (('B', 'C'), 1.0), (('B', 'D'), 1.0), (('D', 'E'), 1.0), (('D', 'F'), 1.0), (('E', 'F'), 5.0), (('F', 'G'), 5.0), (('D', 'G'), 1.0)]\ntestv_dict = {}\nfor element in testv:\n    if element[1] in testv_dict.keys():\n        testv_dict[element[1]].append(element)\n    else:\n        testv_dict[element[1]] = [element]\nkey_list = testv_dict.keys()\nkey_list.sort(reverse=True)\noutput_list = []\nfor key_i in key_list:\n    output_list.extend(testv_dict[key_i])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 2, "last_activity_date": 1475105751, "creation_date": 1475105751, "answer_id": 39759192, "question_id": 39759108, "link": "https://stackoverflow.com/questions/39759108/sorting-tuple-of-tuple-in-a-list/39759192#39759192", "title": "Sorting tuple of tuple in a list", "body": "<p>This isn't as nice as Joran's solution, but since Timsort is stable, you could sort <em>twice</em>:</p>\n\n<pre><code>&gt;&gt;&gt; my_list = [(('A', 'B'), 1.0), (('A', 'C'), 1.0), (('B', 'C'), 1.0), (('B', 'D'), 1.0), (('D', 'E'), 1.0), (('D', 'F'), 1.0), (('E', 'F'), 5.0), (('F', 'G'), 5.0), (('D', 'G'), 1.0)]\n&gt;&gt;&gt; sorted(sorted(my_list, key = lambda t:t[0]), key = lambda t:t[1],reverse=True)\n[(('E', 'F'), 5.0), (('F', 'G'), 5.0), (('A', 'B'), 1.0), (('A', 'C'), 1.0), (('B', 'C'), 1.0), (('B', 'D'), 1.0), (('D', 'E'), 1.0), (('D', 'F'), 1.0), (('D', 'G'), 1.0)]\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6889018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89ef1a6a6adbb8a8c5d7cdb6fe7eb1a?s=128&d=identicon&r=PG&f=1", "display_name": "code ninja", "link": "https://stackoverflow.com/users/6889018/code-ninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1475131875, "answer_count": 3, "score": -3, "last_activity_date": 1475105751, "creation_date": 1475105060, "question_id": 39759108, "link": "https://stackoverflow.com/questions/39759108/sorting-tuple-of-tuple-in-a-list", "closed_reason": "Duplicate", "title": "Sorting tuple of tuple in a list", "body": "<pre><code>[(('A', 'B'), 1.0), (('A', 'C'), 1.0), (('B', 'C'), 1.0), (('B', 'D'), 1.0), (('D', 'E'), 1.0), (('D', 'F'), 1.0), (('E', 'F'), 5.0), (('F', 'G'), 5.0), (('D', 'G'), 1.0)]\n</code></pre>\n\n<p>I need to sort this list in descending order on the numbers if in case of a tie I have to sort in the ascending order of alphabets</p>\n\n<p>The final list should look something like this:</p>\n\n<pre><code>[(('E', 'F'), 5.0),(('F', 'G'), 5.0), (('A', 'B'), 1.0),(('A', 'C'), 1.0),(('B', 'C'), 1.0),(('B', 'D'), 1.0),(('D', 'E'), 1.0),(('D', 'F'), 1.0) (('D', 'G'), 1.0)]\n</code></pre>\n"}, {"tags": ["python", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "is_accepted": false, "score": 1, "last_activity_date": 1475104701, "creation_date": 1475104701, "answer_id": 39759062, "question_id": 39759049, "link": "https://stackoverflow.com/questions/39759049/i-cant-move-up-and-down-with-my-code/39759062#39759062", "title": "I cant move up and down with my code", "body": "<p>The following: </p>\n\n<pre><code>def move(self, xdir, ydir):\n    self.rect.x += xdir*self.speed\n    self.rect.x += ydir*self.speed\n</code></pre>\n\n<p>Should be changed to:</p>\n\n<pre><code>def move(self, xdir, ydir):\n    self.rect.x += xdir*self.speed\n    self.rect.y += ydir*self.speed\n</code></pre>\n\n<p>You were always incrementing <code>x</code> regardless of if the change was in <code>xdir</code> or <code>ydir</code>. The change change <code>rect.y</code> for <code>ydir</code> and <code>rect.x</code> for <code>xdir</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 6896198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ef39ebeed43bf8a9d4473eb37d63bf?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Wu", "link": "https://stackoverflow.com/users/6896198/alexander-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475179580, "creation_date": 1475104607, "last_edit_date": 1475179580, "question_id": 39759049, "link": "https://stackoverflow.com/questions/39759049/i-cant-move-up-and-down-with-my-code", "title": "I cant move up and down with my code", "body": "<p>Here is the code I used to use a rectangle move for a game. But every time I press the up and down keys, it goes left and right. If you can paste the correct version in your answer. Thanks!!!!    </p>\n\n<p>p.s the # is a comment</p>\n\n<pre><code>#to start pygame\nimport pygame\n\npygame.init()\n\n#game window\ngameWindow = pygame.display.set_mode((1000, 600))\npygame.display.set_caption(\"SimpleShooter\")\n\n#moving character\nclass PlayerActive():\n    def __init__(self):\n\n        self.image = pygame.Surface((50, 50))\n        self.image.fill((0, 0, 255))\n        self.rect = self.image.get_rect()\n\n        self.rect.x = 50\n        self.rect.y = 50\n\n        self.speed = 1\n\n    def move(self, xdir, ydir):\n        self.rect.x += xdir*self.speed\n        self.rect.x += ydir*self.speed\n\nplayer = PlayerActive()\n\n#starting and ending the game\ngameActive = True\nwhile gameActive:\n    for event in pygame.event.get():\n        #print event (optional)\n        if event.type == pygame.QUIT:\n            gameActive = False\n\n    #moving character\n    activekey = pygame.key.get_pressed()\n\n    if activekey[pygame.K_RIGHT]:\n        player.move(1, 0)\n    if activekey[pygame.K_LEFT]:\n        player.move(-1, 0)\n    if activekey[pygame.K_UP]:\n        player.move(0, -1)\n    if activekey[pygame.K_DOWN]:\n        player.move(0, 1)\n\n    #change the main screen\n    gameWindow.fill((255, 255, 255))\n    #place moving character\n    gameWindow.blit(player.image, player.rect)\n    #how to draw rectangles\n    pygame.draw.rect(gameWindow, (0, 0, 0), (50, 195, 50, 50), 5)\n    #use to show shapes on gameWindow\n    pygame.display.update()\n\n#quit game\npygame.quit()\nquit()\n</code></pre>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 107, "user_id": 861043, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/8c01979077e4792bb154a90d1cf4d627?s=128&d=identicon&r=PG", "display_name": "Daniel Rusu", "link": "https://stackoverflow.com/users/861043/daniel-rusu"}, "edited": false, "score": 0, "creation_date": 1475104946, "post_id": 39759046, "comment_id": 66814218, "body": "I also tried this with no success:  results = multiprocessing.Pool(5).map(lambda args: self.postAd(currentAccount.login,currentAccount.password,cam&zwnj;&#8203;paign.titlesFile,cam&zwnj;&#8203;paign.licLocFile,cam&zwnj;&#8203;paign.subCity,campai&zwnj;&#8203;gn.bodiesMainFile,ca&zwnj;&#8203;mpaign.bodiesKeyword&zwnj;&#8203;sFile,campaign.bodie&zwnj;&#8203;sIntroFile), range(3))  Error: Can&#39;t pickle &lt;function NewPostService.processNewAds.&lt;locals&gt;.&lt;lambda&gt; at 0x0000000002F3CBF8&gt;: attribute lookup &lt;lambda&gt; on functions failed"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1475106106, "post_id": 39759046, "comment_id": 66814485, "body": "Do you really want all three calls to use <i>exactly</i> the same arguments? I&#39;m not sure that works with <code>map</code>, since it will always want to be providing an extra argument from the sequence it loops over (the <code>range</code> in this case). You can probably make it work by writing an extra function that ignores its last argument (and using <code>partial(self.postadd, *data)</code>), but it might be easier to use your own loop creating <code>Process</code>es."}, {"owner": {"reputation": 107, "user_id": 861043, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/8c01979077e4792bb154a90d1cf4d627?s=128&d=identicon&r=PG", "display_name": "Daniel Rusu", "link": "https://stackoverflow.com/users/861043/daniel-rusu"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1475108775, "post_id": 39759046, "comment_id": 66815029, "body": "Yes I want it to use the same arguments. I want the same process to happen 3x simultaneously is the reason why.  How would I do this &quot; but it might be easier to use your own loop creating Processes.&quot; Can you give me an example based on my code if you&#39;d be so kind"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 861043, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/8c01979077e4792bb154a90d1cf4d627?s=128&d=identicon&r=PG", "display_name": "Daniel Rusu", "link": "https://stackoverflow.com/users/861043/daniel-rusu"}, "edited": false, "score": 0, "creation_date": 1475117374, "post_id": 39759667, "comment_id": 66816808, "body": "Thanks for the response Alex. I&#39;m still a beginner python programmer so some of this is over my head. I tried doing both options of 1. partial(self.postAd, *data) and 2. multiprocessing.Pool(5).map(partial(self.postAd,currentAccou&zwnj;&#8203;nt.login,currentAcco&zwnj;&#8203;unt.password,campaig&zwnj;&#8203;n.titlesFile,campaig&zwnj;&#8203;n.licLocFile,campaig&zwnj;&#8203;n.subCity,campaign.b&zwnj;&#8203;odiesMainFile,campai&zwnj;&#8203;gn.bodiesKeywordsFil&zwnj;&#8203;e,campaign.bodiesInt&zwnj;&#8203;roFile),range(3)   ----------------- . and got this error for both of them:  Error: postAd() takes 9 positional arguments but 10 were given. I&#39;m not sure where the 10th argument is as I&#39;m only passing 8."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 107, "user_id": 861043, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/8c01979077e4792bb154a90d1cf4d627?s=128&d=identicon&r=PG", "display_name": "Daniel Rusu", "link": "https://stackoverflow.com/users/861043/daniel-rusu"}, "edited": false, "score": 0, "creation_date": 1475146408, "post_id": 39759667, "comment_id": 66830976, "body": "@DanielRusu it&#39;s getting the 8 normal arguments, <code>self</code>, and the 10th is the value from <code>range(3)</code> passed in by <code>map</code>. It wouldn&#39;t make much sense to modify <code>postAd</code> for this case so actually just forget about trying to use <code>partial</code>, it&#39;s not intended for this."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 0, "last_activity_date": 1475146536, "last_edit_date": 1475146536, "creation_date": 1475109798, "answer_id": 39759667, "question_id": 39759046, "link": "https://stackoverflow.com/questions/39759046/python-how-can-i-pass-multiple-arguments-using-pool-map/39759667#39759667", "title": "Python - How can I pass multiple arguments using Pool map", "body": "<p>Your first attempt is a misuse of <code>partial</code>. <code>data</code> is a single argument: it being a list doesn't automatically unpack its contents. <code>partial</code> simply takes variable arguments and so you should pass those arguments 'normally', either </p>\n\n<pre><code>partial(self.postAd, currentAccount.login,currentAccount.password, ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>partial(self.postAd, *data)\n</code></pre>\n\n<p>The reason it says that <code>postAd</code> received two arguments instead of just one (<code>data</code>) is that it also implicitly received the <code>self</code> argument.</p>\n\n<p>Your second attempt is the right idea and very close, but it so happens that <a href=\"http://bugs.python.org/issue19272\" rel=\"nofollow\">in older versions of python pickle (which is essential for multiprocessing) can't handle lambdas</a>. Replace the lambda with a named function defined using <code>def</code>:</p>\n\n<pre><code>def postNow(arg):  # Accepts an argument from map which it ignores\n    self.postAd(currentAccount.login, ..., campaign.bodiesIntroFile)\n</code></pre>\n\n<p>Side notes:</p>\n\n<p>It's a bit odd that your argument to the lambda is called <code>args</code> when it's just one argument. If your intention is to make it flexible and accept variable arguments, use <code>lambda *args: ...</code> or even <code>lambda *args, **kwargs: ...</code> to accept keyword arguments. The names are not important, they are just convention. The important part is the <code>*</code> and <code>**</code>. Note that <code>partial</code> has a signature like this, as an example.</p>\n\n<p>I have never seen this issue with the second attempt before. I learnt it by Googling the error message. Always Google things.</p>\n"}], "owner": {"reputation": 107, "user_id": 861043, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/8c01979077e4792bb154a90d1cf4d627?s=128&d=identicon&r=PG", "display_name": "Daniel Rusu", "link": "https://stackoverflow.com/users/861043/daniel-rusu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1538, "favorite_count": 0, "closed_date": 1498166536, "answer_count": 1, "score": 0, "last_activity_date": 1475146536, "creation_date": 1475104597, "last_edit_date": 1475104994, "question_id": 39759046, "link": "https://stackoverflow.com/questions/39759046/python-how-can-i-pass-multiple-arguments-using-pool-map", "closed_reason": "Duplicate", "title": "Python - How can I pass multiple arguments using Pool map", "body": "<p>This is a sniplet of my code:</p>\n\n<pre><code>data = [currentAccount.login,currentAccount.password,campaign.titlesFile,campaign.licLocFile,campaign.subCity,campaign.bodiesMainFile,campaign.bodiesKeywordsFile,campaign.bodiesIntroFile]\nresults = multiprocessing.Pool(5).map(partial(self.postAd,data),range(3))\n...\ndef postAd (self,login,password,titlesFile,licLocFile,subCity,bodiesMainFile,bodiesKeywordsFile,bodiesIntroFile):\n...\n</code></pre>\n\n<p>(Just so you know what's going on: currentAccount and campaign are classes, those are variables within those classes. Using self b/c this is all being run in a class. I'm trying to run self.postAd 3x passing it all the variables I have in data)</p>\n\n<p>When I run that it says \" postAd() missing 6 required positional arguments: 'titlesFile', 'licLocFile', 'subCity', 'bodiesMainFile', 'bodiesKeywordsFile', and 'bodiesIntroFile'\"</p>\n\n<p>What am I doing wrong? Why does it only accept 2 variables?</p>\n\n<p>If I cant use Pool map, how should I be doing this?</p>\n\n<p>I also tried this with no success:</p>\n\n<pre><code>results = multiprocessing.Pool(5).map(lambda args: self.postAd(currentAccount.login,currentAccount.password,campaign.titlesFile,campaign.licLocFile,campaign.subCity,campaign.bodiesMainFile,campaign.bodiesKeywordsFile,campaign.bodiesIntroFile), range(3))\n\nError: Can't pickle &lt;function NewPostService.processNewAds.&lt;locals&gt;.&lt;lambda&gt; at 0x0000000002F3CBF8&gt;: attribute lookup &lt;lambda&gt; on functions failed\n</code></pre>\n"}, {"tags": ["python", "csv", "numpy", "save"], "comments": [{"owner": {"reputation": 219, "user_id": 6828921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e41ab0e2279cdcb26c52511d25e62d?s=128&d=identicon&r=PG", "display_name": "user40314", "link": "https://stackoverflow.com/users/6828921/user40314"}, "edited": false, "score": 0, "creation_date": 1475104669, "post_id": 39758941, "comment_id": 66814144, "body": "In a numpy array, all elements must have the same type, i.e. you can not have the first column be a number, and the second column be a vector in a numpy array. You need pandas table for that."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1475107007, "post_id": 39758941, "comment_id": 66814676, "body": "You can, however, have a <a href=\"http://docs.scipy.org/doc/numpy/user/basics.rec.html\" rel=\"nofollow noreferrer\">structured numpy array</a> where the fields have different dtypes."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1475112861, "last_edit_date": 1475112861, "creation_date": 1475108899, "answer_id": 39759564, "question_id": 39758941, "link": "https://stackoverflow.com/questions/39758941/realizing-different-column-formats-with-numpy-savetxt/39759564#39759564", "title": "Realizing different column formats with numpy.savetxt", "body": "<p>You aren't even getting to the <code>savetxt</code> step.</p>\n\n<pre><code>save_values[idx, :] = column_0, column_1\n</code></pre>\n\n<p>the target is 2 values (2 columns).  The source is <code>idx</code> and a list.</p>\n\n<p>That's why it's giving you the 'setting with a sequence' error.  It can't put the list in <code>save_values[idx,1]</code>.</p>\n\n<p>You could define a <code>save_values</code> array that has 2 fields, and one of the fields having 2 elements.  But how would you save it?</p>\n\n<p>How should the text file appear - 3 columns separated by <code>,</code>?  or two columns with special structure inside the 2nd?, e.g.</p>\n\n<pre><code> 1.2, 3.5, 4.2   # or\n 1.2, [2.5, 4.2]\n</code></pre>\n\n<p>That in turn raises the issue of what can be loaded.  <code>genfromtxt</code> can handle the 3 columns; it can't readily hand the nested columns.  As a default <code>genfromtxt</code> would read the 3 column case as 3 columns, but it is possible to give it the 2 fields <code>dtype</code>.</p>\n\n<p>Anyways, for saving I think generating 3 columns is simplest.  Reloading could be done with columns or fields.</p>\n\n<p>I can generate a compound dtype array with:</p>\n\n<pre><code>In [329]: dt = np.dtype('i,(2,)f')\nIn [330]: dt\nOut[330]: dtype([('f0', '&lt;i4'), ('f1', '&lt;f4', (2,))])\nIn [331]: save_values = np.zeros((5,),dtype=dt)\nIn [332]: for i in range(5):\n     ...:     save_values[i]=(i,(i+5., i+15.))\n     ...:     \nIn [333]: save_values\nOut[333]: \narray([(0, [5.0, 15.0]), (1, [6.0, 16.0]), (2, [7.0, 17.0]),\n       (3, [8.0, 18.0]), (4, [9.0, 19.0])], \n      dtype=[('f0', '&lt;i4'), ('f1', '&lt;f4', (2,))])\n</code></pre>\n\n<p>But if I try to save it I get an error</p>\n\n<pre><code>In [334]: np.savetxt('test.txt',save_values,delimiter=',')\n...\nTypeError: Mismatch between array dtype ('[('f0', '&lt;i4'), ('f1', '&lt;f4', (2,))]') and format specifier ('%.18e,%.18e')\n</code></pre>\n\n<p>I can save it by spelling out the write format, <code>fmt%tuple(save_values[0])</code>, but that puts <code>[]</code> in the output:</p>\n\n<pre><code>In [335]: np.savetxt('test.txt',save_values,fmt='%10d, %s')\nIn [336]: cat test.txt\n         0, [  5.  15.]\n         1, [  6.  16.]\n         2, [  7.  17.]\n         3, [  8.  18.]\n         4, [  9.  19.]\n</code></pre>\n\n<p>I can flatten the array dtype with a view (here I'm keeping the 1st field integer just to keep things interesting):</p>\n\n<pre><code>In [337]: dt1=np.dtype('i,f,f')\nIn [338]: save_values.view(dt1)\nOut[338]: \narray([(0, 5.0, 15.0), (1, 6.0, 16.0), (2, 7.0, 17.0), (3, 8.0, 18.0),\n       (4, 9.0, 19.0)], \n      dtype=[('f0', '&lt;i4'), ('f1', '&lt;f4'), ('f2', '&lt;f4')])\n</code></pre>\n\n<p>Now I can save it as 3 columns:</p>\n\n<pre><code>In [340]: np.savetxt('test.txt',save_values.view(dt1),fmt='%10d, %10f, %10f')\nIn [341]: cat test.txt\n         0,   5.000000,  15.000000\n         1,   6.000000,  16.000000\n         2,   7.000000,  17.000000\n         3,   8.000000,  18.000000\n         4,   9.000000,  19.000000\n</code></pre>\n\n<p>and I can reload it with either dtype:</p>\n\n<pre><code>In [342]: np.genfromtxt('test.txt',delimiter=',',dtype=dt)\nOut[342]: \narray([(0, [5.0, 15.0]), (1, [6.0, 16.0]), (2, [7.0, 17.0]),\n       (3, [8.0, 18.0]), (4, [9.0, 19.0])], \n      dtype=[('f0', '&lt;i4'), ('f1', '&lt;f4', (2,))])\n\nIn [343]: np.genfromtxt('test.txt',delimiter=',',dtype=dt1)\nOut[343]: \narray([(0, 5.0, 15.0), (1, 6.0, 16.0), (2, 7.0, 17.0), (3, 8.0, 18.0),\n       (4, 9.0, 19.0)], \n      dtype=[('f0', '&lt;i4'), ('f1', '&lt;f4'), ('f2', '&lt;f4')])\n</code></pre>\n\n<p>I could have also created the <code>text.txt</code> with a 5x3 array of floats.</p>\n\n<p>The key point with <code>savetxt</code> is that it iterates over the rows your array, formats them, and writes that line to the file.  So your array has to work with:</p>\n\n<pre><code>for row in myarray:\n   print(fmt % tuple(row))\n</code></pre>\n\n<p><code>fmt</code> may be be spelled out, or may build from a single field format, eg.</p>\n\n<pre><code>fmt = ','.join(['%10f']*3)   # or\nfmt = '%10d, %10f, %10f'\n</code></pre>\n\n<p>So it comes down to standard Python string formatting.</p>\n"}], "owner": {"reputation": 3176, "user_id": 2776885, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/97df0a051ee23f43da5d4fa54879285a?s=128&d=identicon&r=PG&f=1", "display_name": "The Dude", "link": "https://stackoverflow.com/users/2776885/the-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2636, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475112861, "creation_date": 1475103836, "question_id": 39758941, "link": "https://stackoverflow.com/questions/39758941/realizing-different-column-formats-with-numpy-savetxt", "title": "Realizing different column formats with numpy.savetxt", "body": "<p>I want to create a <code>.csv</code> file using <code>numpy.savetxt</code>. Each <code>row</code> of the file indicates a certain event. Every row has multiple <code>columns</code> indicating different elements of the event. The information stored in each <code>column</code> is different. Certain <code>columns</code> will contain single <code>float</code> values while others should contain two <code>floats</code> that are connected to each other. If I would call that column when loading the <code>.csv</code> I should obtain the two <code>float</code> values. </p>\n\n<p>I have the following code:</p>\n\n<pre><code>import numpy\n\nrows = 5\ncolumns = 2 \nsave_values = numpy.zeros((rows, columns))\n\nfor idx in xrange(rows):\n  column_0 = float(idx)\n  column_1 = [idx + 5., idx + 15.]\n\n  save_values[idx, :] = column_0, column_1\n\nnumpy.savetxt(\"outfile.csv\", save_values, delimiter = \",\")\n</code></pre>\n\n<p>This however results in the following error message: </p>\n\n<pre><code>  save_values[idx, :] = column_0, column_1\nValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>which is understandable. However, despite knowing why it is going wrong I am having a hard time realizing my goal.</p>\n\n<p>How can I achieve my goal?</p>\n"}, {"tags": ["python", "console", "auto-indent"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6896502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5daa8c1819b1dcc5374ec179899643?s=128&d=identicon&r=PG&f=1", "display_name": "user6896502", "link": "https://stackoverflow.com/users/6896502/user6896502"}, "edited": false, "score": 0, "creation_date": 1475154771, "post_id": 39761017, "comment_id": 66836975, "body": "I can&#39;t import join or upper"}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "reply_to_user": {"reputation": 11, "user_id": 6896502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5daa8c1819b1dcc5374ec179899643?s=128&d=identicon&r=PG&f=1", "display_name": "user6896502", "link": "https://stackoverflow.com/users/6896502/user6896502"}, "edited": false, "score": 0, "creation_date": 1475163671, "post_id": 39761017, "comment_id": 66843474, "body": "@NateHailfire, what version of python are you running?"}], "tags": [], "owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "is_accepted": false, "score": 0, "last_activity_date": 1475167693, "last_edit_date": 1475167693, "creation_date": 1475120402, "answer_id": 39761017, "question_id": 39758895, "link": "https://stackoverflow.com/questions/39758895/indent-on-new-lines-in-console/39761017#39761017", "title": "Indent On New Lines In Console", "body": "<p>Is this what you are looking for?</p>\n\n<pre><code>import textwrap\nfrom string import join, split\n\ntext = \"\"\"This is a block of text. It keeps going on\n            and on and on. It has    some line breaks \\n\n            but mostly just keeps going on without\n            breaks. The lines are sometimes too long,\n            so they wrap to the next line, but they \n            don't indent. I need to fix this\"\"\"\n\nprint \"\\nPrinted as one line:\\n\"\nt=join(text.split())\nprint t\n\nprint \"\\nPrinted as formatted paragraph:\\n\"\nt=join(text.split())\nt=textwrap.wrap(t,width=70,initial_indent=' '*4,subsequent_indent=' '*8)\nt=join(t,\"\\n\")\nprint t\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>Printed as one line:                                                                                                                                           \n\nThis is a block of text. It keeps going on and on and on. It has some line breaks but mostly just keeps going on without breaks. The lines are sometimes too lo\nng, so they wrap to the next line, but they don't indent. I need to fix this                                                                                   \n\nPrinted as formatted paragraph:                                                                                                                                \n\n    This is a block of text. It keeps                                                                                                                          \n        going on and on and on. It has                                                                                                                         \n        some line breaks but mostly just                                                                                                                       \n        keeps going on without breaks.                                                                                                                         \n        The lines are sometimes too                                                                                                                            \n        long, so they wrap to the next                                                                                                                         \n        line, but they don't indent. I                                                                                                                         \n        need to fix this                                                                                                                                       \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "is_accepted": false, "score": 0, "last_activity_date": 1475167815, "creation_date": 1475167815, "answer_id": 39775911, "question_id": 39758895, "link": "https://stackoverflow.com/questions/39758895/indent-on-new-lines-in-console/39775911#39775911", "title": "Indent On New Lines In Console", "body": "<p>You said that join, split are failing to import. Try the following:</p>\n\n<pre><code>import re, textwrap\n\ndef myformatting(t):\n    t=re.sub('\\s+',' ',t); t=re.sub('^\\s+','',t); t=re.sub('\\s+$','',t)\n    t=textwrap.wrap(t,width=40,initial_indent=' '*4,subsequent_indent=' '*8)\n    s=\"\"\n    for i in (t): s=s+i+\"\\n\"\n    s=re.sub('\\s+$','',s)\n    return(s)\n\ntext = \"\"\"\\t\\tThis is a block of text. It keeps going on\n            and on and on. It has    some line breaks \\n\n            but mostly just keeps going on without\n            breaks. The lines are sometimes too long,\n            so they wrap to the next line, but they \n            don't indent. I need to fix this\"\"\"\n\ntext=myformatting(text)\nprint text\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6896502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5daa8c1819b1dcc5374ec179899643?s=128&d=identicon&r=PG&f=1", "display_name": "user6896502", "link": "https://stackoverflow.com/users/6896502/user6896502"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1117, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475167815, "creation_date": 1475103503, "last_edit_date": 1475105054, "question_id": 39758895, "link": "https://stackoverflow.com/questions/39758895/indent-on-new-lines-in-console", "title": "Indent On New Lines In Console", "body": "<p>I have a large block of text. It has line breaks in it, but since the lines are still to long even with the line-breaks, it wraps to the next line. Since all of the other script functions have all lines indented one space, I would like this to match it. I understand that if I print just one line, I can just insert a space, and if I want to indent after a linebreak that fit in one line, I can just insert <code>\\n</code> with a space after it.</p>\n\n<p>How would I make every line in a block of text indent? e.g:</p>\n\n<p><code>text = \"\"\"This is a block of text. It keeps going on\n           and on and on. It has some line breaks \\n\n           but mostly just keeps going on without\n           breaks. The lines are sometimes too long,\n           so they wrap to the next line, but they \n           don't indent. I need to fix this\"\"\"</code></p>\n\n<p>that would print as:</p>\n\n<pre><code>&gt;&gt;&gt; print(text) \n  This is a block of text. It keeps going on\n  and on and on. It has some line breaks\n\n  but mostly just keeps going on without\n  breaks. The lines are sometimes too long,\n  so they wrap to the next line, but they \n  don't indent. I need to fix this\n</code></pre>\n"}, {"tags": ["python", "while-loop"], "comments": [{"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1475103428, "post_id": 39758857, "comment_id": 66813812, "body": "<code>i</code> is not defined in your code snippet. Please update a code to demonstrate <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 2, "creation_date": 1475103460, "post_id": 39758857, "comment_id": 66813823, "body": "<code>i</code> is out of range when evaluating the condition.  <code>pass</code> probably doesn&#39;t do what you think it does."}, {"owner": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475103464, "post_id": 39758857, "comment_id": 66813825, "body": "Edited to include value of i"}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 0, "creation_date": 1475110079, "post_id": 39758857, "comment_id": 66815298, "body": "Are you trying to understand the code you posted, or are you just looking for <code>stripped_line = line.strip()</code>?  (See the <a href=\"https://docs.python.org/3/library/stdtypes.html#str.strip\" rel=\"nofollow noreferrer\"><code>str.strip</code> docs</a>, along with <code>lstrip</code> and <code>rstrip</code> on that same page.)"}, {"owner": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "reply_to_user": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 0, "creation_date": 1475111107, "post_id": 39758857, "comment_id": 66815486, "body": "@KevinJ.Chase I&#39;m trying to fix my code, as it is getting an IndexError, and print the obj."}], "answers": [{"comments": [{"owner": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475104370, "post_id": 39758890, "comment_id": 66814070, "body": "What do you mean <code>pass</code> is no-op? It would have to operate if the condition is true."}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "reply_to_user": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 3, "creation_date": 1475104612, "post_id": 39758890, "comment_id": 66814128, "body": "I mean that &quot;pass&quot; does nothing, this is literaly no-op in python, it does not affect the execution in any sense. Maybe you meant &quot;continue&quot;?"}], "tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": false, "score": 1, "last_activity_date": 1475103474, "creation_date": 1475103474, "answer_id": 39758890, "question_id": 39758857, "link": "https://stackoverflow.com/questions/39758857/why-is-my-protected-loop-erroring/39758890#39758890", "title": "Why is my protected loop erroring?", "body": "<p>Your loop is not \"safe\", \"break\" only breaks <strong>inner</strong> loop, thus once i==len(line) it goes out of first while, stays in the main for and you try to read out line[i] in \"while not line[i] == \"\"\" line, which causes you to index outside \"line\" (since the condition is checked before entering the loop).</p>\n\n<pre><code>for line in file:\n    while line[i] == \" \":\n        if i == len(line):   \n            break # THIS executes, thus i == len(line)\n        i += 1\n    if i == len(line): # this is true, thus nothing happens, pass is no-op\n        pass\n    while not line[i] == \" \": # this executes, and fails since i == len(line)\n        if i == len(line):\n            break\n        obj += line[i]\n        i += 1\n    print obj\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475103868, "post_id": 39758893, "comment_id": 66813930, "body": "<code>obj</code> is never printed, fix?"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475103973, "post_id": 39758893, "comment_id": 66813959, "body": "@bjskistad You can plug that part into your main code."}, {"owner": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475104099, "post_id": 39758893, "comment_id": 66813995, "body": "I did, and it&#39;s printing two blank values."}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475104210, "post_id": 39758893, "comment_id": 66814018, "body": "@bjskistad I changed the condition on the while. Check update"}, {"owner": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475104303, "post_id": 39758893, "comment_id": 66814044, "body": "Now giving me IndexError"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "edited": false, "score": 0, "creation_date": 1475104369, "post_id": 39758893, "comment_id": 66814068, "body": "I updated, you could also try the second approach instead"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 2, "last_activity_date": 1475104316, "last_edit_date": 1475104316, "creation_date": 1475103477, "answer_id": 39758893, "question_id": 39758857, "link": "https://stackoverflow.com/questions/39758857/why-is-my-protected-loop-erroring/39758893#39758893", "title": "Why is my protected loop erroring?", "body": "<blockquote>\n  <p>my loop is protected</p>\n</blockquote>\n\n<p>No it isn't. The condition on the <code>while</code> has to be evaluated first before reaching the body of the loop where the <em>protection</em> <code>if</code> condition is.</p>\n\n<p>To be sure <code>i</code> does not exceed the length of the list, move the condition on the <code>if</code> and make it the first condition on the <code>while</code>:</p>\n\n<pre><code>while i &lt; len(line) and not line[i] == \" \":\n    obj += line[i]\n    i += 1\n</code></pre>\n\n<hr>\n\n<p>Otherwise you could move the <code>if</code> block after the update of <code>i</code> so the condition is evaluated before that of the next iteration of <code>while</code>:</p>\n\n<pre><code>while not line[i] == \" \":\n    obj += line[i]\n    i += 1\n    if i == len(line):\n        break\n</code></pre>\n"}], "owner": {"reputation": 1876, "user_id": 6568784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Kk1s7.png?s=128&g=1", "display_name": "baranskistad", "link": "https://stackoverflow.com/users/6568784/baranskistad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 39758893, "answer_count": 2, "score": 2, "last_activity_date": 1475104316, "creation_date": 1475103288, "last_edit_date": 1475103438, "question_id": 39758857, "link": "https://stackoverflow.com/questions/39758857/why-is-my-protected-loop-erroring", "title": "Why is my protected loop erroring?", "body": "<p>I have this script</p>\n\n<pre><code>for line in file:\n    while line[i] == \" \":\n        if i == len(line):\n            break\n        i += 1\n    if i == len(line):\n        pass\n    while not line[i] == \" \":\n        if i == len(line):\n            break\n        obj += line[i]\n        i += 1\n    print obj\n</code></pre>\n\n<p>As of now, <code>file</code> equals <code>[\"clear\", \"exit\"]</code> and <code>i</code> equals <code>0</code>.</p>\n\n<p>When I run this script, it errors like this</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/ubuntu/workspace/lib/source.py\", line 8, in &lt;module&gt;\n    while not line[i] == \" \":\nIndexError: string index out of range\n</code></pre>\n\n<p>I'm pretty sure my loop is protected right, and it should break before this happens. If this the case, then why is it happening?</p>\n"}, {"tags": ["python", "django", "django-templates", "mezzanine"], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 1188952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rs7gb.jpg?s=128&g=1", "display_name": "brunoelottero", "link": "https://stackoverflow.com/users/1188952/brunoelottero"}, "is_accepted": false, "score": 0, "last_activity_date": 1475105829, "creation_date": 1475105829, "answer_id": 39759201, "question_id": 39758854, "link": "https://stackoverflow.com/questions/39758854/django-template-loader-not-reaching-app-template/39759201#39759201", "title": "Django Template Loader not reaching app template", "body": "<p>Then you could reach your template with 'app_name/index.html'</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 6530566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06ce1a1658c680675e9b4a0c996868e2?s=128&d=identicon&r=PG&f=1", "display_name": "JTheboss", "link": "https://stackoverflow.com/users/6530566/jtheboss"}, "edited": false, "score": 0, "creation_date": 1475180670, "post_id": 39760450, "comment_id": 66852992, "body": "Any way to make Django recurse to the directories beyond the &#39;templates&#39; directory?"}, {"owner": {"reputation": 36, "user_id": 6180364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4d091711b5eed69cfaecde084970e4?s=128&d=identicon&r=PG&f=1", "display_name": "f_h", "link": "https://stackoverflow.com/users/6180364/f-h"}, "reply_to_user": {"reputation": 37, "user_id": 6530566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06ce1a1658c680675e9b4a0c996868e2?s=128&d=identicon&r=PG&f=1", "display_name": "JTheboss", "link": "https://stackoverflow.com/users/6530566/jtheboss"}, "edited": false, "score": 0, "creation_date": 1475195938, "post_id": 39760450, "comment_id": 66858096, "body": "Read this <a href=\"http://stackoverflow.com/questions/1740436/what-is-the-best-location-to-put-templates-in-django-project\">site</a> maybe will help to answer your question, but creating a <code>templates</code> directory inside your app directory is ideal to store your app-specific templates."}], "tags": [], "owner": {"reputation": 36, "user_id": 6180364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4d091711b5eed69cfaecde084970e4?s=128&d=identicon&r=PG&f=1", "display_name": "f_h", "link": "https://stackoverflow.com/users/6180364/f-h"}, "is_accepted": true, "score": 0, "last_activity_date": 1475116671, "last_edit_date": 1475116671, "creation_date": 1475116317, "answer_id": 39760450, "question_id": 39758854, "link": "https://stackoverflow.com/questions/39758854/django-template-loader-not-reaching-app-template/39760450#39760450", "title": "Django Template Loader not reaching app template", "body": "<p>Did you try to change your template dirs on <code>setting.py</code> like this</p>\n\n<pre><code>'DIRS': [\"templates\"],\n</code></pre>\n\n<p>and did your <code>views.py</code>  provide specific location of template E.g.</p>\n\n<pre><code>return render(request, 'foldername/templatename.html', {})\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6530566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06ce1a1658c680675e9b4a0c996868e2?s=128&d=identicon&r=PG&f=1", "display_name": "JTheboss", "link": "https://stackoverflow.com/users/6530566/jtheboss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 39760450, "answer_count": 2, "score": 1, "last_activity_date": 1475116671, "creation_date": 1475103271, "question_id": 39758854, "link": "https://stackoverflow.com/questions/39758854/django-template-loader-not-reaching-app-template", "title": "Django Template Loader not reaching app template", "body": "<p>According to Django documentation</p>\n\n<p>\"Your project\u2019s TEMPLATES setting describes how Django will load and render templates. The default settings file configures a DjangoTemplates backend whose APP_DIRS option is set to True. By convention DjangoTemplates looks for a \u201ctemplates\u201d subdirectory in each of the INSTALLED_APPS.\"</p>\n\n<p>My Mezzanine settings.py has this configuration</p>\n\n<pre><code>TEMPLATES = [\n{\n    'BACKEND': 'django.template.backends.django.DjangoTemplates',\n    'DIRS': [],\n    'APP_DIRS': True,\n    'OPTIONS': {\n        'context_processors': [\n            'django.template.context_processors.debug',\n            'django.template.context_processors.request',\n            'django.contrib.auth.context_processors.auth',\n            'django.contrib.messages.context_processors.messages',\n        ],\n    },\n},\n</code></pre>\n\n<p>]</p>\n\n<p>My directory structure is</p>\n\n<pre><code>project\n    app_name\n        templates\n            app_name\n                index.html\n</code></pre>\n\n<p>But the template loader stops at </p>\n\n<pre><code>project\n    app_name\n        templates\n</code></pre>\n\n<p>As such my app_name template index.html is not reached.  What can be the problem?</p>\n"}, {"tags": ["python", "json", "string", "dictionary", "filter"], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1475625019, "last_edit_date": 1475625019, "creation_date": 1475103433, "answer_id": 39758883, "question_id": 39758835, "link": "https://stackoverflow.com/questions/39758835/python-filter-a-dict-json-response-to-send-back-only-two-values-or-convert-to/39758883#39758883", "title": "Python - Filter a dict JSON response to send back only two values or convert to a string?", "body": "<p>You got a nested dictionary back, so access it's values using the right keys:</p>\n\n<pre><code>d = json.loads(json_str)\nlat, long = d['result']['latitude'], d['result']['longitude']\nnewurl = url + '?' + 'lat=' + lat + '&amp;lon=' + lon\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 3231557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b734e7cb6de2b7394ab1da5baa2d37e?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Gwynn-Jones", "link": "https://stackoverflow.com/users/3231557/rob-gwynn-jones"}, "is_accepted": false, "score": -1, "last_activity_date": 1475103542, "creation_date": 1475103542, "answer_id": 39758899, "question_id": 39758835, "link": "https://stackoverflow.com/questions/39758835/python-filter-a-dict-json-response-to-send-back-only-two-values-or-convert-to/39758899#39758899", "title": "Python - Filter a dict JSON response to send back only two values or convert to a string?", "body": "<p>You can access your JSON object exactly like a dictionary.  So to get the latitude and longitude from your result, you can use:</p>\n\n<p><code>lat, long = d[result][latitude], d[result][longitude]</code></p>\n\n<p>Load these into strings, do your error checking, and then append them into your new URL.</p>\n"}], "owner": {"reputation": 39, "user_id": 6896170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fd79aa17e21ca070543e2c601e5d3395?s=128&d=identicon&r=PG&f=1", "display_name": "Finn Geraghty", "link": "https://stackoverflow.com/users/6896170/finn-geraghty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1475625019, "creation_date": 1475103112, "question_id": 39758835, "link": "https://stackoverflow.com/questions/39758835/python-filter-a-dict-json-response-to-send-back-only-two-values-or-convert-to", "title": "Python - Filter a dict JSON response to send back only two values or convert to a string?", "body": "<p>I am manipulating a URL in Python that calls an API and gets a valid result in JSON.</p>\n\n<p>I only need the 'latitude' and 'longitude' provided by [result]</p>\n\n<p>But, I cannot seem to find any good way to handle sending dict values back.</p>\n\n<p>I've tried to convert the JSON to a string, but as my end goal is to append the latitude and longitude to another URL, this seems silly?</p>\n\n<p>Have been searching around, and seems parsing DICT a common issue.</p>\n\n<p>Can anyone point me in the right direction?</p>\n\n<p>My code (that ran)</p>\n\n<pre><code>import urllib2\nimport json\nPostcode = raw_input(\"Hello hello hello, what's your postcode..?  \")\nPostcodeURL = 'https://api.postcodes.io/postcodes/' + Postcode\njson_str = urllib2.urlopen(PostcodeURL).read()\nd = json.loads(json_str)\nprint(d)\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<pre><code>{u'status': 200, u'result': {u'eastings': 531025, u'outcode': u'N8', u'admin_county': None, u'postcode'\n</code></pre>\n"}, {"tags": ["python", "loops", "variables", "netcdf", "dimension"], "comments": [{"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "edited": false, "score": 1, "creation_date": 1475103449, "post_id": 39758781, "comment_id": 66813819, "body": "Just for clarification, are you attempting to add the tuple <code>(i, lat[eachstep, i], lon[eachstep, i], age)</code> to the record <code>new_age</code> each time the inner loop runs?"}, {"owner": {"reputation": 11, "user_id": 4632703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c784de03afbd91dc80e07b1093f8015?s=128&d=identicon&r=PG&f=1", "display_name": "Abstract Wisdom", "link": "https://stackoverflow.com/users/4632703/abstract-wisdom"}, "reply_to_user": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "edited": false, "score": 0, "creation_date": 1475103673, "post_id": 39758781, "comment_id": 66813876, "body": "Yes, that is correct. Appending rather than  writing over."}, {"owner": {"reputation": 795, "user_id": 3563448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/de5d2fa5813e44bf3b943607e5347666?s=128&d=identicon&r=PG&f=1", "display_name": "kakk11", "link": "https://stackoverflow.com/users/3563448/kakk11"}, "edited": false, "score": 1, "creation_date": 1475242609, "post_id": 39758781, "comment_id": 66878573, "body": "Imo setting variable values should be in the form      <code>new_age[index1] = age</code> and you compute index from lat, lon"}, {"owner": {"reputation": 3533, "user_id": 1211981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74d8816f67808fb71206ca536c9f9916?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Bridger", "link": "https://stackoverflow.com/users/1211981/eric-bridger"}, "edited": false, "score": 0, "creation_date": 1475272680, "post_id": 39758781, "comment_id": 66893802, "body": "I agree. <code>new_age = ageme</code>  overwrites new_age every time thru the loop."}, {"owner": {"reputation": 11, "user_id": 4632703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c784de03afbd91dc80e07b1093f8015?s=128&d=identicon&r=PG&f=1", "display_name": "Abstract Wisdom", "link": "https://stackoverflow.com/users/4632703/abstract-wisdom"}, "edited": false, "score": 0, "creation_date": 1475586805, "post_id": 39758781, "comment_id": 66994335, "body": "Can you be a bit clearer?"}], "owner": {"reputation": 11, "user_id": 4632703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c784de03afbd91dc80e07b1093f8015?s=128&d=identicon&r=PG&f=1", "display_name": "Abstract Wisdom", "link": "https://stackoverflow.com/users/4632703/abstract-wisdom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475103130, "creation_date": 1475102755, "last_edit_date": 1475103130, "question_id": 39758781, "link": "https://stackoverflow.com/questions/39758781/python-loop-and-save-to-netcdf", "title": "Python Loop and save to NetCDF", "body": "<p>I am trying to create a new dimension and add current data to a new variable in a NetCDF file using python. </p>\n\n<p>Lat/Lon are 2D arrays (variables).\nid is a dimension.   </p>\n\n<pre><code>from netCDF4 import Dataset\n\ndata = Dataset(netdata,'a')\nlat = data.variables['lat'][:]\nlon = data.variables['lon'][:]\nid = data.dimensions['id']\n\nageme = []\n\nage = 1\n\nnew_age = data.createVariable('age', np.float32)           \n\nfor i in range(0,len(id)):\n    if lat[0,i] != -10.85000038:\n        for eachstep in range(0,len(lat)):\n            ageme = i, lat[eachstep, i], lon[eachstep,i], age\n            new_age = ageme\n            age = age + 1\ndata.close()   \n</code></pre>\n\n<p>I think there is a small mistake around \"new_age = ageme\" this bit of code, but can't quite fix it! </p>\n"}, {"tags": ["python", "django", "django-admin"], "owner": {"reputation": 2154, "user_id": 2350219, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/K61LC.jpg?s=128&g=1", "display_name": "Ashish Gupta", "link": "https://stackoverflow.com/users/2350219/ashish-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475102642, "creation_date": 1475102323, "last_edit_date": 1475102642, "question_id": 39758725, "link": "https://stackoverflow.com/questions/39758725/django-admin-do-not-show-search-term-in-changelist-url", "title": "Django admin do not show search term in changelist url", "body": "<p>I have modified the <a href=\"https://docs.djangoproject.com/en/1.8/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_search_results\" rel=\"nofollow\">get_search_results</a> method of django admin changelist to use custom search method. I am using large text string as input to the search, so I don't want the search term to appear in the url. How can I remove the search term from the changelist url ?</p>\n\n<pre><code>def get_search_results(self, request, queryset, search_term):\n    \"\"\"\n    Returns a tuple containing a queryset to implement the search,\n    and a boolean indicating if the results may contain duplicates.\n    \"\"\"\n    # Apply keyword searches.\n    def construct_search(field_name):\n        if field_name.startswith('^'):\n            return \"%s__istartswith\" % field_name[1:]\n        elif field_name.startswith('='):\n            return \"%s__iexact\" % field_name[1:]\n        elif field_name.startswith('@'):\n            return \"%s__search\" % field_name[1:]\n        else:\n            return \"%s__icontains\" % field_name\n\n    use_distinct = False\n    if search_term:\n        # here input is large text string\n        sites = get_sites_from_text(search_term)\n        search_fields = self.get_search_fields(request)\n        if len(sites) &gt; 0:\n            queryset = queryset.filter(site_name__in=sites)\n        elif search_fields:\n            orm_lookups = [construct_search(str(search_field))\n                           for search_field in search_fields]\n            for bit in search_term.split():\n                or_queries = [models.Q(**{orm_lookup: bit})\n                              for orm_lookup in orm_lookups]\n                queryset = queryset.filter(\n                    reduce(operator.or_, or_queries))\n            if not use_distinct:\n                for search_spec in orm_lookups:\n                    if lookup_needs_distinct(self.opts, search_spec):\n                        use_distinct = True\n                        break\n\n    return queryset, use_distinct\n</code></pre>\n"}, {"tags": ["python", "twitter", "tweepy"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1475109298, "post_id": 39758666, "comment_id": 66815145, "body": "Are you sure it&#39;s not authentication error? Just going off of the API docs <a href=\"http://docs.tweepy.org/en/v3.4.0/streaming_how_to.html\" rel=\"nofollow noreferrer\">Streaming With Tweepy</a>: <code>API authorization is required to access Twitter streams.</code>"}, {"owner": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1475117644, "post_id": 39758666, "comment_id": 66816865, "body": "@downshift If it were an authentication error, I don&#39;t believe that I would be able to use all of the non-streaming functionality, as the streaming and non-streaming functions use the same set of credentials. Also, it wouldn&#39;t explain why the program works on one machine, and not on another."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1475119340, "post_id": 39758666, "comment_id": 66817281, "body": "I am sure you are right about the authentication requirements, you have better understanding and experience than I using the api. Yet the program could work on one system that has environment variables set for the credentials and none set on the other computer, which was why I asked, but fair enough, you&#39;ve corrected me."}], "answers": [{"comments": [{"owner": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "edited": false, "score": 0, "creation_date": 1475117402, "post_id": 39759792, "comment_id": 66816815, "body": "Oddly enough, the clock on the Windows 7 machine on which it wasn&#39;t working was showing basically the same time (maybe a couple of seconds off) as the Win 7 machine on which it was working. But the question had to do with implementing a multi-system tweepy/python-based solution to the clock issue. Any suggestions on that?"}, {"owner": {"reputation": 3417, "user_id": 886719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f61f07eb4347b5dbbd090b8e4f4b1bc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/886719/jonas"}, "reply_to_user": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "edited": false, "score": 0, "creation_date": 1475160234, "post_id": 39759792, "comment_id": 66841072, "body": "You can get away with up to 3 simultaneous streams opened with the same credentials. Were you able to get the second instance working while the first instance was stopped?"}, {"owner": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "edited": false, "score": 0, "creation_date": 1475165180, "post_id": 39759792, "comment_id": 66844453, "body": "it turned out to be a clock issue, and after unsuccessful manual clock adjustments, synchronizing with Microsoft&#39;s time server fixed it. But the question is, how to prevent this issue from arising across end-users&#39; systems, without asking them to adjust their clocks?"}, {"owner": {"reputation": 3417, "user_id": 886719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f61f07eb4347b5dbbd090b8e4f4b1bc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/886719/jonas"}, "reply_to_user": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "edited": false, "score": 0, "creation_date": 1475169300, "post_id": 39759792, "comment_id": 66846748, "body": "That&#39;s what an NTP server is for. Users don&#39;t have to manually adjust their clock anymore. They can point their system clock to an internet time server. Give the users instructions like <a href=\"http://www.guidingtech.com/3119/windows-clock-sync/\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "edited": false, "score": 0, "creation_date": 1475171052, "post_id": 39759792, "comment_id": 66847782, "body": "Thanks, Jonas - I&#39;d like to explore options that wouldn&#39;t burden the user with having to adjust the system clock or play with any system settings (i.e. perhaps the functionality of the Twitter API that requires the user system&#39;s time can instead be provided, by the program, with a time obtained from the NTP server). If it turns out that the only option is to force the user to adjust/sync the system clock, I&#39;ll go with that, but I think that this should be the last resort."}, {"owner": {"reputation": 3417, "user_id": 886719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f61f07eb4347b5dbbd090b8e4f4b1bc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/886719/jonas"}, "reply_to_user": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "edited": false, "score": 0, "creation_date": 1475173880, "post_id": 39759792, "comment_id": 66849388, "body": "You could set the HTTP timestamp yourself, but you would still need to get the correct time from somewhere."}, {"owner": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "edited": false, "score": 0, "creation_date": 1475174911, "post_id": 39759792, "comment_id": 66849992, "body": "Obtaining a time that works with the Twitter API can be done in the following way (allowing for the specification of a different server, if necessary): <a href=\"https://stackoverflow.com/questions/12664295/ntp-client-in-python\" title=\"ntp client in python\">stackoverflow.com/questions/12664295/ntp-client-in-python</a>. How do you set the HTTP timestamp yourself within the context of Tweepy&#39;s streaming functionality?"}], "tags": [], "owner": {"reputation": 3417, "user_id": 886719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f61f07eb4347b5dbbd090b8e4f4b1bc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/886719/jonas"}, "is_accepted": false, "score": 1, "last_activity_date": 1475111011, "creation_date": 1475111011, "answer_id": 39759792, "question_id": 39758666, "link": "https://stackoverflow.com/questions/39758666/401-error-using-the-streaming-features-of-twitter-api-through-tweepy/39759792#39759792", "title": "401 error using the Streaming features of Twitter API (through Tweepy)", "body": "<p>Your system clock is probably more than 5 minutes off. </p>\n"}], "owner": {"reputation": 2346, "user_id": 4400277, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e793a96600dee929c909b81fcc05cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Boa", "link": "https://stackoverflow.com/users/4400277/boa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475166454, "creation_date": 1475101909, "last_edit_date": 1475166454, "question_id": 39758666, "link": "https://stackoverflow.com/questions/39758666/401-error-using-the-streaming-features-of-twitter-api-through-tweepy", "title": "401 error using the Streaming features of Twitter API (through Tweepy)", "body": "<p>I've got an application which takes advantage of a number of features of the Twitter API. I've tested the application on one Windows 7 system, and all features worked well. </p>\n\n<p>Testing the application on a second Windows 7 system, it seems that everything but the Public Stream and User Stream features is working (i.e. the app managed to authenticate, can follow/unfollow users, etc). On this system, the Stream features produce a <a href=\"https://dev.twitter.com/overview/api/response-codes\" rel=\"nofollow\">401 error</a>. As I understand it, 401 could indicate an authorization error (which isn't happening in this case, since non-streaming features are available), or <a href=\"https://twittercommunity.com/t/401-fixing-server-time-differences/803/2\" rel=\"nofollow\">a difference in time configuration</a> between Twitter's servers, and the client system.</p>\n\n<p>I'd like the streaming features of my app to be available cross platform (Windows, Mac, Unix), and I can't expect end-users to tinker with their system's clock configurations. Can anyone recommend a system-agnostic Tweepy/python-based solution to the 401 error issue under the condition that it's caused by a time-configuration problem? Thanks.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>On the system on which the Stream features were not working, after having manually tinkered with the system clock, with no success, I synchronized with time.windows.com. This didn't have any discernible effect on the time that was showing (I didn't have a view of the seconds), but it resolved the problem (i.e. the Twitter User and Public Stream features became available). The question remains - how does one prevent such an error from arising on end users' systems? It's unrealistic for me to warn users to adjust their clocks.</p>\n"}, {"tags": ["python", "pycharm"], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 1917407, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6NIMc.jpg?s=128&g=1", "display_name": "adamcircle", "link": "https://stackoverflow.com/users/1917407/adamcircle"}, "edited": false, "score": 0, "creation_date": 1475102820, "post_id": 39758651, "comment_id": 66813635, "body": "One more thing, how does this work if there&#39;s a space in the folder name?"}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "reply_to_user": {"reputation": 601, "user_id": 1917407, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6NIMc.jpg?s=128&g=1", "display_name": "adamcircle", "link": "https://stackoverflow.com/users/1917407/adamcircle"}, "edited": false, "score": 0, "creation_date": 1475168855, "post_id": 39758651, "comment_id": 66846488, "body": "You should remove them or use another way to import. Look at the answer : <a href=\"http://stackoverflow.com/questions/9123517/how-do-you-import-a-file-in-python-with-spaces-in-the-name\" title=\"how do you import a file in python with spaces in the name\">stackoverflow.com/questions/9123517/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "is_accepted": true, "score": 2, "last_activity_date": 1475101833, "creation_date": 1475101833, "answer_id": 39758651, "question_id": 39758606, "link": "https://stackoverflow.com/questions/39758606/how-do-i-import-a-module-from-within-a-pycharm-project/39758651#39758651", "title": "How do I import a module from within a Pycharm project?", "body": "<p>To import as object : </p>\n\n<p><code>from root.folder1.folder2 import script1</code></p>\n\n<p>To import a function of your script:</p>\n\n<p><code>from root.folder1.folder2.script1 import NameOfTheFunction</code></p>\n"}], "owner": {"reputation": 601, "user_id": 1917407, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6NIMc.jpg?s=128&g=1", "display_name": "adamcircle", "link": "https://stackoverflow.com/users/1917407/adamcircle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39758651, "answer_count": 1, "score": 0, "last_activity_date": 1475101833, "creation_date": 1475101511, "question_id": 39758606, "link": "https://stackoverflow.com/questions/39758606/how-do-i-import-a-module-from-within-a-pycharm-project", "title": "How do I import a module from within a Pycharm project?", "body": "<p>In my project, the file structure is as follows:</p>\n\n<p>root/folder1/folder2/script1.py</p>\n\n<p>root/folder1/folder2/script2.py</p>\n\n<p>I have a statement in script2.py that says \"import script1\", and Pycharm says no module is found. How do I fix this?</p>\n"}, {"tags": ["python", "boolean"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1475101268, "post_id": 39758537, "comment_id": 66813190, "body": "It&#39;s not so simple: <a href=\"http://stackoverflow.com/questions/36550588/assigning-string-with-boolean-expression/36551857#36551857\" title=\"assigning string with boolean expression\">stackoverflow.com/questions/36550588/&hellip;</a>"}, {"owner": {"reputation": 73, "user_id": 6896389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-BJfXFt2yPAI/AAAAAAAAAAI/AAAAAAAAAGQ/Zb8Cd2OHhw0/photo.jpg?sz=128", "display_name": "Huy Nguyen", "link": "https://stackoverflow.com/users/6896389/huy-nguyen"}, "reply_to_user": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1475136946, "post_id": 39758537, "comment_id": 66824546, "body": "see edit of original question for clarifications @Kasramvd"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1475146842, "post_id": 39758537, "comment_id": 66831216, "body": "@HuyNguyen Nobody blocks you from asking more questions. This is the best way that this community tends to be mange. And every newcomer  should read the <a href=\"http://stackoverflow.com/help/how-to-ask\">documentation first</a>, before getting started."}, {"owner": {"reputation": 73, "user_id": 6896389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-BJfXFt2yPAI/AAAAAAAAAAI/AAAAAAAAAGQ/Zb8Cd2OHhw0/photo.jpg?sz=128", "display_name": "Huy Nguyen", "link": "https://stackoverflow.com/users/6896389/huy-nguyen"}, "reply_to_user": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1475173043, "post_id": 39758537, "comment_id": 66848940, "body": "@Kasramvd, there are different problems that have the same root cause. Like the ones above, my questions were on bool statements with comparison signs (&gt;, &lt;, ==,.....) that normally return true or false (as one would intuitively expect), the other are with normal statements. I am sure there are other better examples. One can say 1 thing can manifest itself in different forms. People see the different forms and ask for help. How is it a duplicate, even if the same answer applies?"}], "answers": [{"tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": true, "score": 0, "last_activity_date": 1475101312, "creation_date": 1475101312, "answer_id": 39758572, "question_id": 39758537, "link": "https://stackoverflow.com/questions/39758537/python-bool-statements/39758572#39758572", "title": "Python bool statements", "body": "<p>This has to do with the fact that <code>and</code> short-circuits, and returns the truthy value instead of <code>True</code> or <code>False</code>. </p>\n\n<p>In:</p>\n\n<pre><code>7 &gt;= 77 and 7\n</code></pre>\n\n<p>7 >= 77 equates to <code>False</code>, so the second operand of <code>and</code> is never evaluated, so it becomes <code>False</code>. </p>\n\n<p>In:</p>\n\n<pre><code>7 &gt;= 7 and 77\n</code></pre>\n\n<p>7 is equal to 7 (obviously), so the second operand of <code>and</code> is evaluated. Since 77 is truthy, it's what's returned. </p>\n"}, {"tags": [], "owner": {"reputation": 2676, "user_id": 5718020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RdYmf.png?s=128&g=1", "display_name": "gowrath", "link": "https://stackoverflow.com/users/5718020/gowrath"}, "is_accepted": false, "score": 0, "last_activity_date": 1475101499, "creation_date": 1475101499, "answer_id": 39758605, "question_id": 39758537, "link": "https://stackoverflow.com/questions/39758537/python-bool-statements/39758605#39758605", "title": "Python bool statements", "body": "<p>I believe the mechanics of and statements in python work like this. </p>\n\n<p>The conditions in the and statements are evaluated sequentially. If a falsy thing is found, then this is returned as it is. Otherwise, the last thing in the and conditions is returned. </p>\n\n<p>In Python things have the notion of being truthy or falsy without necessarily being boolean variables. Thus, the and just returns either the first thing that is falsy, or the last condition. In this case, it is retuning 77 and if you put this in a conditional, it would be treated as a True because 77 is truthy. </p>\n\n<p>For ex, if you do </p>\n\n<pre><code>7&gt;=7 and False and 77 # ===&gt; False\n7&gt;=7 and 0 and 77 # ===&gt; 0\n7&gt;=7 and [] and 77 # ===&gt; []\n</code></pre>\n\n<p>So you see it doesn't return True/False necessarily, it just returns the first falsy thing it sees or returns the last thing. </p>\n"}], "owner": {"reputation": 73, "user_id": 6896389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-BJfXFt2yPAI/AAAAAAAAAAI/AAAAAAAAAGQ/Zb8Cd2OHhw0/photo.jpg?sz=128", "display_name": "Huy Nguyen", "link": "https://stackoverflow.com/users/6896389/huy-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "closed_date": 1475101252, "accepted_answer_id": 39758572, "answer_count": 2, "score": -2, "last_activity_date": 1475136897, "creation_date": 1475101065, "last_edit_date": 1475136897, "question_id": 39758537, "link": "https://stackoverflow.com/questions/39758537/python-bool-statements", "closed_reason": "Duplicate", "title": "Python bool statements", "body": "<p>why would it return 77 in case 3? isn't it a bool statement? Note that case 1 and 2 return False. What is the difference between case 2 and 3?</p>\n\n<pre><code>7 &gt;= 77 and 77 \nOut[313]: False\n\n7 &gt;= 77 and 7\nOut[314]: False\n\n7 &gt;= 7 and 77\nOut[315]: 77\n\n7 &gt;= 8 and 77\nOut[318]: False\n</code></pre>\n\n<p>Thanks</p>\n\n<p>regarding  @Kasramvd's comment that my question is the exact duplicate of the question from another user (see below)</p>\n\n<p>it is not obvious at all to me, a novice,  that my question is the same as the below. An expert can easily see that the same answer apply to both. After reading answers, i do see a link. Before getting the answers, no way I could've known. </p>\n\n<p>i am a novice in programming. And it was my first time joining stack over flow. And this was my first question on stackoverflow. It appears that stackoverflow is not novice friendly. Thanks for blocking me to ask more questions.Just found that out too.</p>\n\n<hr>\n\n<p>another user's question</p>\n\n<p>I am trying to understand this code from someone else's project. If you want the context it's here: <a href=\"https://github.com/newsapps/beeswithmachineguns/blob/master/beeswithmachineguns/bees.py#L501\" rel=\"nofollow\">https://github.com/newsapps/beeswithmachineguns/blob/master/beeswithmachineguns/bees.py#L501</a></p>\n\n<p>IS_PY2 is just a boolean variable, True if the Python major version is 2. I know that a non-empty string is True, but for some reason I don't understand openmode is assigned either 'w' or 'wt' rather than True or False.</p>\n\n<pre><code>openmode = IS_PY2 and 'w' or 'wt'\nopenkwargs = IS_PY2 and {} or {'encoding': 'utf-8', 'newline': ''}\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "scikit-learn"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 5, "creation_date": 1475101081, "post_id": 39758449, "comment_id": 66813117, "body": "Use <code>np.nanmax</code> and <code>np.nanmin</code> instead of <code>np.max</code> and <code>np.min</code>, the rest should work fine."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 6, "creation_date": 1475101651, "post_id": 39758449, "comment_id": 66813321, "body": "So, basically : <code>(a-np.nanmin(a))&#47;(np.nanmax(a) - np.nanmin(a))</code>."}, {"owner": {"reputation": 10159, "user_id": 509824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c62e65b86aabdffdd1c628aad1fefe3?s=128&d=identicon&r=PG", "display_name": "Alberto Garcia-Raboso", "link": "https://stackoverflow.com/users/509824/alberto-garcia-raboso"}, "edited": false, "score": 4, "creation_date": 1475108502, "post_id": 39758449, "comment_id": 66814963, "body": "pandas also deals gracefully with <code>NaN</code>s, so a simple <code>(a - a.min()) &#47; (a.max() - a.min())</code> does the job."}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 6828921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e41ab0e2279cdcb26c52511d25e62d?s=128&d=identicon&r=PG", "display_name": "user40314", "link": "https://stackoverflow.com/users/6828921/user40314"}, "edited": false, "score": 6, "creation_date": 1475103999, "post_id": 39758551, "comment_id": 66813966, "body": "-1 The OP clearly indicated that he was interested in the linear scaling by referencing <code>MinMaxScaler</code>. Options 2 and 3 are irrelevant for the OP, and confuse the reader more than help them in my opinion."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 219, "user_id": 6828921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e41ab0e2279cdcb26c52511d25e62d?s=128&d=identicon&r=PG", "display_name": "user40314", "link": "https://stackoverflow.com/users/6828921/user40314"}, "edited": false, "score": 3, "creation_date": 1475104282, "post_id": 39758551, "comment_id": 66814036, "body": "@user40314 Kudos for commenting on why you down voted.  I&#39;ll use that to improve the answer and make it clearer."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 219, "user_id": 6828921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e41ab0e2279cdcb26c52511d25e62d?s=128&d=identicon&r=PG", "display_name": "user40314", "link": "https://stackoverflow.com/users/6828921/user40314"}, "edited": false, "score": 0, "creation_date": 1497706407, "post_id": 39758551, "comment_id": 76197430, "body": "Whom ever down voted this answer. I&#39;d appreciate an explanation. This has been modified to provide what OP wanted and has been accepted."}, {"owner": {"reputation": 111, "user_id": 3919701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f41d4a451db55984cb0fcd0ce71fbff?s=128&d=identicon&r=PG&f=1", "display_name": "Balinus", "link": "https://stackoverflow.com/users/3919701/balinus"}, "edited": false, "score": 1, "creation_date": 1517327957, "post_id": 39758551, "comment_id": 84046100, "body": "I think the answer is clear and that the other options are useful for other readers that are looking for a wider answer."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 13, "last_activity_date": 1475104395, "last_edit_date": 1475104395, "creation_date": 1475101169, "answer_id": 39758551, "question_id": 39758449, "link": "https://stackoverflow.com/questions/39758449/normalise-between-0-and-1-ignoring-nan/39758551#39758551", "title": "Normalise between 0 and 1 ignoring NaN", "body": "<p>consider <code>pd.Series</code> <code>s</code></p>\n\n<pre><code>s = pd.Series(np.random.choice([3, 4, 5, 6, np.nan], 100))\ns.hist()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/hzlrF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hzlrF.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em>Option 1</em></strong><br>\nMin Max Scaling</p>\n\n<pre><code>new = s.sub(s.min()).div((s.max() - s.min()))\nnew.hist()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ThfOU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ThfOU.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>NOT WHAT OP ASKED FOR</strong><br>\nI put these in because I wanted to</p>\n\n<p><strong><em>Option 2</em></strong><br>\nsigmoid</p>\n\n<pre><code>sigmoid = lambda x: 1 / (1 + np.exp(-x))\n\nnew = sigmoid(s.sub(s.mean()))\nnew.hist()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/W4nZv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/W4nZv.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em>Option 3</em></strong><br>\ntanh (hyperbolic tangent)</p>\n\n<pre><code>new = np.tanh(s.sub(s.mean())).add(1).div(2)\nnew.hist()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/7Q0WT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7Q0WT.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 184, "user_id": 8086033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8aSb.jpg?s=128&g=1", "display_name": "CharlesG", "link": "https://stackoverflow.com/users/8086033/charlesg"}, "edited": false, "score": 0, "creation_date": 1535546493, "post_id": 49015278, "comment_id": 91105152, "body": "This solution is nice but insufficient if multiple columns have to be normalized (or then a loop may have to be considered)"}, {"owner": {"reputation": 2821, "user_id": 5662006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eb237f223f66056b9ea829b44b4cf40?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Farr", "link": "https://stackoverflow.com/users/5662006/chris-farr"}, "reply_to_user": {"reputation": 184, "user_id": 8086033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8aSb.jpg?s=128&g=1", "display_name": "CharlesG", "link": "https://stackoverflow.com/users/8086033/charlesg"}, "edited": false, "score": 1, "creation_date": 1538601220, "post_id": 49015278, "comment_id": 92204747, "body": "In my case you would only want one column per MinMaxScaler object."}], "tags": [], "owner": {"reputation": 2821, "user_id": 5662006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eb237f223f66056b9ea829b44b4cf40?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Farr", "link": "https://stackoverflow.com/users/5662006/chris-farr"}, "is_accepted": false, "score": 6, "last_activity_date": 1615745039, "last_edit_date": 1615745039, "creation_date": 1519755094, "answer_id": 49015278, "question_id": 39758449, "link": "https://stackoverflow.com/questions/39758449/normalise-between-0-and-1-ignoring-nan/49015278#49015278", "title": "Normalise between 0 and 1 ignoring NaN", "body": "<p>Here's a different approach and one that I believe answers the OP correctly, the only difference is this works for a dataframe instead of a list, you can easily put your list in a dataframe as done below. The other options didn't work for me because I needed to store the MinMaxScaler in order to reverse transform after a prediction was made. So instead of passing the entire column to the MinMaxScaler you can filter out NaNs for both the target and the input.</p>\n<p><em>Solution Example</em></p>\n<pre><code>import pandas as pd\nimport numpy as np\nfrom sklearn.preprocessing import MinMaxScaler\n\nscaler = MinMaxScaler(feature_range=(0, 1))\n\nd = pd.DataFrame({'A': [0, 1, 2, 3, np.nan, 3, 2]})\n\nnull_index = d['A'].isnull()\n\nd.loc[~null_index, ['A']] = scaler.fit_transform(d.loc[~null_index, ['A']])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 7827119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MaUDha5BdR0/AAAAAAAAAAI/AAAAAAAAAII/A6vJDQUkJSM/photo.jpg?sz=128", "display_name": "Markus Kaukonen", "link": "https://stackoverflow.com/users/7827119/markus-kaukonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1603200328, "last_edit_date": 1603200328, "creation_date": 1591257075, "answer_id": 62189477, "question_id": 39758449, "link": "https://stackoverflow.com/questions/39758449/normalise-between-0-and-1-ignoring-nan/62189477#62189477", "title": "Normalise between 0 and 1 ignoring NaN", "body": "<p>It seems that sklearn now (June 2020) behaves as you (and me) desire:\nnp.nan is left untouched.\n(mainly copy pasted from sklearn docs)</p>\n<pre><code>import sklearn\nimport numpy as np\nfrom sklearn.preprocessing import MinMaxScaler\nsklearn.__version__\n# '0.23.1'\ndata = np.array([[-1, 2, 3], [-0.5, 6,3 ], [np.nan, 18, 3 ]])\nprint(data)\n#[[-1.   2.   3. ]\n# [-0.5  6.   3. ]\n# [ nan 18.   3. ]]\nscaler = MinMaxScaler()\ndata = scaler.fit_transform(data)\nprint(data)\n#[[0.   0.   0.  ]\n# [1.   0.25 0.  ]\n# [ nan 1.   0.  ]]\n</code></pre>\n"}], "owner": {"reputation": 1114, "user_id": 2308132, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KW5Ae.jpg?s=128&g=1", "display_name": "JakeCowton", "link": "https://stackoverflow.com/users/2308132/jakecowton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10644, "favorite_count": 4, "accepted_answer_id": 39758551, "answer_count": 3, "score": 25, "last_activity_date": 1615745039, "creation_date": 1475100493, "last_edit_date": 1475122611, "question_id": 39758449, "link": "https://stackoverflow.com/questions/39758449/normalise-between-0-and-1-ignoring-nan", "title": "Normalise between 0 and 1 ignoring NaN", "body": "<p>For a list of numbers ranging from <code>x</code> to <code>y</code> that may contain <code>NaN</code>, how can I normalise between 0 and 1, ignoring the <code>NaN</code> values (they stay as <code>NaN</code>).</p>\n\n<p>Typically I would use <code>MinMaxScaler</code> (<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.MinMaxScaler.html#sklearn.preprocessing.MinMaxScaler\" rel=\"noreferrer\">ref page</a>) from <code>sklearn.preprocessing</code>, but this cannot handle <code>NaN</code> and recommends imputing the values based on mean or median etc. it doesn't offer the option to ignore all the <code>NaN</code> values.</p>\n"}, {"tags": ["python", "python-2.7", "sockets", "irc"], "comments": [{"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 1, "creation_date": 1475100753, "post_id": 39758442, "comment_id": 66812999, "body": "Please add the full traceback to your question."}, {"owner": {"reputation": 235, "user_id": 4166639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c6110c14b881d9654817fc48ac01ca9c?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge", "link": "https://stackoverflow.com/users/4166639/jorge"}, "reply_to_user": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1475100902, "post_id": 39758442, "comment_id": 66813048, "body": "@mhawke done! Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 4166639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c6110c14b881d9654817fc48ac01ca9c?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge", "link": "https://stackoverflow.com/users/4166639/jorge"}, "edited": false, "score": 0, "creation_date": 1475102684, "post_id": 39758589, "comment_id": 66813596, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": true, "score": 1, "last_activity_date": 1475101404, "creation_date": 1475101404, "answer_id": 39758589, "question_id": 39758442, "link": "https://stackoverflow.com/questions/39758442/socket-issue-when-connecting-to-irc/39758589#39758589", "title": "Socket issue when connecting to IRC", "body": "<p>You are determining the proxy port with</p>\n\n<pre><code>port = proxy.split(\":\")[1]\n</code></pre>\n\n<p>You are then passing it to socks:</p>\n\n<pre><code>irc.setproxy(socks.PROXY_TYPE_HTTP, hostname, port)\n</code></pre>\n\n<p>But it's still a string. I bet it will work if you change the latter to</p>\n\n<pre><code>irc.setproxy(socks.PROXY_TYPE_HTTP, hostname, int(port))\n</code></pre>\n\n<p>It's not actually <em>used</em> until you call <code>irc.connect</code> but it's the port from the setproxy.</p>\n"}, {"comments": [{"owner": {"reputation": 235, "user_id": 4166639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c6110c14b881d9654817fc48ac01ca9c?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge", "link": "https://stackoverflow.com/users/4166639/jorge"}, "edited": false, "score": 0, "creation_date": 1475102687, "post_id": 39758593, "comment_id": 66813598, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": false, "score": 1, "last_activity_date": 1475101773, "last_edit_date": 1475101773, "creation_date": 1475101443, "answer_id": 39758593, "question_id": 39758442, "link": "https://stackoverflow.com/questions/39758442/socket-issue-when-connecting-to-irc/39758593#39758593", "title": "Socket issue when connecting to IRC", "body": "<p>These lines:</p>\n\n<pre><code>port = proxy.split(\":\")[1]\nirc.setproxy(socks.PROXY_TYPE_HTTP, hostname, port)\n</code></pre>\n\n<p>will result in port being a <em>string</em> containing the required port number. An <code>integer</code> is required for the port. Change your code to :</p>\n\n<pre><code>port = int(proxy.split(\":\")[1])\nirc.setproxy(socks.PROXY_TYPE_HTTP, hostname, port)\n</code></pre>\n\n<p>which converts the port from a string into an integer as required.</p>\n"}], "owner": {"reputation": 235, "user_id": 4166639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c6110c14b881d9654817fc48ac01ca9c?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge", "link": "https://stackoverflow.com/users/4166639/jorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 39758589, "answer_count": 2, "score": 0, "last_activity_date": 1475101773, "creation_date": 1475100466, "last_edit_date": 1475100885, "question_id": 39758442, "link": "https://stackoverflow.com/questions/39758442/socket-issue-when-connecting-to-irc", "title": "Socket issue when connecting to IRC", "body": "<p>I am trying create a very simple python bot that joins a specific channel, and says a random phrase every time someone says anything. I am doing this primarily to learn how sockets and IRC works. I am getting the following error message: </p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"D:/Users/Administrator/Documents/Classwork/Dropbox/Bots/Rizon Bot/ViewBot.py\", line 36, in &lt;module&gt;\n    irc.connect((irc_server, 6667))\n  File \"D:\\Users\\Administrator\\Documents\\Classwork\\Dropbox\\Bots\\Rizon Bot\\socks.py\", line 351, in connect\n    _orgsocket.connect(self,(self.__proxy[1],portnum))\n  File \"C:\\Python27\\lib\\socket.py\", line 228, in meth\n    return getattr(self._sock,name)(*args)\nTypeError: an integer is required\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>When running the following code: </p>\n\n<pre><code>import random\nfrom urlparse import urlparse\nimport socks\nimport socket\nimport time\n\n#---- Definitions ----#\n#Proxylist\nproxy_list = []\nwith open(\"proxy_list.txt\") as f:\n    proxy_list = f.readlines()\n\n#IRC Name List\nirc_names = []\nwith open(\"irc_names.txt\") as f:\n    irc_names = f.readlines()\n\n#Phrase List\nphrase_list = []\nwith open(\"phrase_list.txt\") as f:\n    phrase_list = f.readlines()\n\nirc_server = \"irc.rizon.net\"\nirc_port = 6667\nirc_channel = '#test12'  # Change this to what ever channel you would like\n\n\nqueue = 0\n#---- Code ----#\nproxy = random.choice(proxy_list)\nhostname = proxy.split(\":\")[0]\nport = proxy.split(\":\")[1]\n#irc = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )\nirc = socks.socksocket()\nirc.setproxy(socks.PROXY_TYPE_HTTP, hostname, port)\nirc.connect((irc_server, 6667))\nprint irc.recv ( 4096 )\nirc.send ( 'NICK ' + random.choice(irc_names) + '\\r\\n' )\nirc.send ( 'USER botty botty botty :Sup\\r\\n' )\nirc.send ( 'JOIN ' + irc_channel + '\\r\\n' )\ntime.sleep(4)\nirc.send('PRIVMSG ' + irc_channel + ' :' + random.choice(phrase_list) + '\\r\\n')\nwhile True:\n   data = irc.recv ( 4096 )\n   print data\n   if data.find('KICK') != -1:\n       irc.send('JOIN '+ irc_channel + '\\r\\n')\n   if data.find('') != -1:  # !test command\n       irc.send('PRIVMSG ' + irc_channel + ' :' + (random.choice(phrase_list)) + '\\r\\n')\n</code></pre>\n\n<p>I believe the issue is with: </p>\n\n<pre><code>irc.connect((irc_server, 6667))\n</code></pre>\n\n<p>My goal is to connect to the IRC server using a proxy loaded from the proxy list. Any ideas? </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1475100426, "post_id": 39758415, "comment_id": 66812870, "body": "Burn <i>global e1x, e1y, e1c, e2x, e2y, e2c, altx, alty, x, y</i>. You don&#39;t really want to  use globals. You would also use <code>self</code> in a class method where self refers to the instance the method would be called on. If you want to use that logic then actually create a class not just functions."}, {"owner": {"reputation": 478030, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 0, "creation_date": 1475100464, "post_id": 39758415, "comment_id": 66812881, "body": "&quot;It doesn&#39;t work&quot; is not a problem description.  Do you get an error?  If so, what&#39;s the full traceback?  Does it behave unexpectedly?  If so, describe the expected and actual behaviour."}, {"owner": {"reputation": 13, "user_id": 5822591, "user_type": "registered", "profile_image": "https://graph.facebook.com/940006002714127/picture?type=large", "display_name": "Alfonso Izaguirre Mart&#237;nez", "link": "https://stackoverflow.com/users/5822591/alfonso-izaguirre-mart%c3%adnez"}, "reply_to_user": {"reputation": 478030, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 0, "creation_date": 1475100639, "post_id": 39758415, "comment_id": 66812951, "body": "Python says &quot;e1x is not defined&quot; when I try to use it on &#39;calculateValues()&#39; but I declared on top and initialized on the function which actually returns those values @SvenMarnach"}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1475100720, "post_id": 39758415, "comment_id": 66812986, "body": "@AlfonsoIzaguirreMart&#237;nez You are supposed to move the global decl to the top of <code>getValues()</code>. but you don&#39;t want to use global variables because they are evil."}, {"owner": {"reputation": 478030, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 0, "creation_date": 1475100770, "post_id": 39758415, "comment_id": 66813005, "body": "@AlfonsoIzaguirreMart&#237;nez This should be included in your question, including the full traceback of the error.  You can&#39;t declare variables in Python, and <code>global</code> outside a function definition doesn&#39;t do anything."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1475100902, "post_id": 39758415, "comment_id": 66813049, "body": "The <code>global</code> statement only applies to <i>functions</i>. Python determines that a name is a local in a function if you <i>bind to it</i> (assignment is one form of binding). The <code>global</code> statement tells Python to override that determination. You didn&#39;t use <code>global</code> in the function, you used it elsewhere."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1475101348, "post_id": 39758415, "comment_id": 66813211, "body": "the duplicate is not what you want. because global variables are evil"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5822591, "user_type": "registered", "profile_image": "https://graph.facebook.com/940006002714127/picture?type=large", "display_name": "Alfonso Izaguirre Mart&#237;nez", "link": "https://stackoverflow.com/users/5822591/alfonso-izaguirre-mart%c3%adnez"}, "edited": false, "score": 0, "creation_date": 1475100551, "post_id": 39758438, "comment_id": 66812915, "body": "Yes, I&#39;ll use the in calculateValues()"}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "reply_to_user": {"reputation": 13, "user_id": 5822591, "user_type": "registered", "profile_image": "https://graph.facebook.com/940006002714127/picture?type=large", "display_name": "Alfonso Izaguirre Mart&#237;nez", "link": "https://stackoverflow.com/users/5822591/alfonso-izaguirre-mart%c3%adnez"}, "edited": false, "score": 0, "creation_date": 1475100641, "post_id": 39758438, "comment_id": 66812953, "body": "@AlfonsoIzaguirreMart&#237;nez No, you don&#39;t. <code>calculateValues()</code> should call <code>getValues()</code> and use the return value. Or, you could pass the result of <code>getValues()</code> to <code>calculateValues()</code>. Global variables are evil."}], "tags": [], "owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "is_accepted": true, "score": 2, "last_activity_date": 1475101206, "last_edit_date": 1495541212, "creation_date": 1475100448, "answer_id": 39758438, "question_id": 39758415, "link": "https://stackoverflow.com/questions/39758415/python-variables-in-functions/39758438#39758438", "title": "Python variables in functions?", "body": "<p>You need to include <code>global</code> within your function. Outside it does nothing.</p>\n\n<pre><code>def getValues():\n    global e1x, e1y, e1c, e2x, e2y, e2c, altx, alty, x, y\n    print(\"Taking Ax + By = C:\")\n    e1x = float(input(\"Value of x in first equation: \"))\n    #...\n    if(confirm()): # A function I ommited 'cause its irrelevant\n        return e1x, e1y, e1c, e2x, e2y, e2c\n    else:\n        getValues()\n\ndef calculateValues():\n    # Stuff with variables\n\n\n# MAIN\ngetValues()\ncalculateValues()\n</code></pre>\n\n<p>But why do you need global variables? Are you going to use those variables outside your function? <code>global</code> is only necessary if you need to modify values that exist outside the scope of the function. </p>\n\n<p>Reformat your code to be like:</p>\n\n<pre><code>def getValues():\n    print(\"Taking Ax + By = C:\")\n    e1x = float(input(\"Value of x in first equation: \"))\n    #...\n    if(confirm()): # A function I ommited 'cause its irrelevant\n        return e1x, e1y, e1c, e2x, e2y, e2c\n    else:\n        getValues()\n\ndef calculateValues(values):\n    # Stuff with variables\n\n\n# MAIN\ncalculateValues(getValues())\n</code></pre>\n\n<p>Instead of passing information with global variables, this passes information by return values. <a href=\"https://www.google.com/search?q=global%20variables%20are%20evil\" rel=\"nofollow noreferrer\">There are hundreds of articles on why global variables are evil.</a></p>\n\n<p><code>values</code> holds the returned variables <code>e1x, e1y, e1c, e2x, e2y, e2c</code>. It is accessible using list index notation. If you want to refer to the variables by their names, use:</p>\n\n<pre><code>#...\ndef calculateValues(e1x, e1y, e1c, e2x, e2y, e2c):\n    # Stuff with variables\n\n\n# MAIN\ncalculateValues(*getValues())\n</code></pre>\n\n<p><code>*foo</code> is list unpacking notation. It is an advanced topic, but it is useful in your situation. You can read more about list unpacking <a href=\"https://stackoverflow.com/a/2238361/1459669\">here.</a></p>\n"}], "owner": {"reputation": 13, "user_id": 5822591, "user_type": "registered", "profile_image": "https://graph.facebook.com/940006002714127/picture?type=large", "display_name": "Alfonso Izaguirre Mart&#237;nez", "link": "https://stackoverflow.com/users/5822591/alfonso-izaguirre-mart%c3%adnez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1475100953, "accepted_answer_id": 39758438, "answer_count": 1, "score": 1, "last_activity_date": 1475102185, "creation_date": 1475100358, "last_edit_date": 1475102185, "question_id": 39758415, "link": "https://stackoverflow.com/questions/39758415/python-variables-in-functions", "closed_reason": "Duplicate", "title": "Python variables in functions?", "body": "<p>I have a little question about variables. My main language is Java (and I'm learning Python) so, I have a problem calling a variable in a function, it doesn't refresh its new value:</p>\n\n<pre><code># Values\nglobal e1x, e1y, e1c, e2x, e2y, e2c, altx, alty, x, y\n\ndef getValues():\n    print(\"Taking Ax + By = C:\")\n    e1x = float(input(\"Value of x in first equation: \"))\n    #...\n    if(confirm()): # A function I ommited 'cause its irrelevant\n        return e1x, e1y, e1c, e2x, e2y, e2c\n    else:\n        getValues()\n\ndef calculateValues():\n    # Stuff with variables\n\n\n# MAIN\ngetValues()\ncalculateValues()\n</code></pre>\n\n<p>I tried to write it without the <em>global</em>, tried to use the <em>self</em> word but, It doesn't work. (Using Python 3)</p>\n\n<p>ERROR:</p>\n\n<pre><code> Traceback (most recent call last):\n   File \"E002_GaussSeidel.py\", line 41, in &lt;module&gt;\n      calculateValues()\n   File \"E002_GaussSeidel.py\", line 34, in calculateValues\n      print(str(e1x))\n NameError: name 'e1x' is not defined\n</code></pre>\n"}, {"tags": ["python", "psychopy"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1475100396, "post_id": 39758412, "comment_id": 66812857, "body": "Besides the straightforward geometric way of checking the (squared) distance beween point and center?"}], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 5785120, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/95e6747fdd33c1f25f555e3ff02072f2?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5785120/steve"}, "edited": false, "score": 0, "creation_date": 1475103277, "post_id": 39758535, "comment_id": 66813769, "body": "Could you tell me what the &#39;-circle[0]&#39; part does?"}, {"owner": {"reputation": 580, "user_id": 622303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2618a762201bdc7800ce4199d3720acd?s=128&d=identicon&r=PG", "display_name": "aqua", "link": "https://stackoverflow.com/users/622303/aqua"}, "reply_to_user": {"reputation": 309, "user_id": 5785120, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/95e6747fdd33c1f25f555e3ff02072f2?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5785120/steve"}, "edited": false, "score": 0, "creation_date": 1475172723, "post_id": 39758535, "comment_id": 66848769, "body": "Shifts the coordinates you&#39;re testing to be relative to the center of the circle, rather than to the origin, so that you can see if the test points are within a certain radius of the center of the circle."}], "tags": [], "owner": {"reputation": 580, "user_id": 622303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2618a762201bdc7800ce4199d3720acd?s=128&d=identicon&r=PG", "display_name": "aqua", "link": "https://stackoverflow.com/users/622303/aqua"}, "is_accepted": false, "score": 1, "last_activity_date": 1492018341, "last_edit_date": 1492018341, "creation_date": 1475101033, "answer_id": 39758535, "question_id": 39758412, "link": "https://stackoverflow.com/questions/39758412/python-psychopy-checking-if-a-point-is-within-a-circle/39758535#39758535", "title": "Python/Psychopy: checking if a point is within a circle", "body": "<p>I don't think it needs to be that complicated:</p>\n\n<pre><code>center=(600,600)\nradius=120\ncoordinate=(50,70)\n\nif (coordinate[0]-center[0])**2 + (coordinate[1]-center[1])**2 &lt; radius**2:\n    print \"inside\"\nelse:   \n    print \"outside\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "is_accepted": true, "score": 7, "last_activity_date": 1475101885, "creation_date": 1475101885, "answer_id": 39758660, "question_id": 39758412, "link": "https://stackoverflow.com/questions/39758412/python-psychopy-checking-if-a-point-is-within-a-circle/39758660#39758660", "title": "Python/Psychopy: checking if a point is within a circle", "body": "<p>PsychoPy's <code>ShapeStim</code> classes have a <code>.contains()</code> method, as per the API:\n<a href=\"http://psychopy.org/api/visual/shapestim.html#psychopy.visual.ShapeStim.contains\">http://psychopy.org/api/visual/shapestim.html#psychopy.visual.ShapeStim.contains</a></p>\n\n<p>So your code could simply be:</p>\n\n<pre><code>if shape.contains(coordinate):\n    print 'inside'\nelse:\n    print 'outside'\n</code></pre>\n\n<p>Using this method has the advantage that it is a general solution (taking into account the shape of the stimulus vertices) and is not just a check on the pythagorean distance from the stimulus centre (which is a special case for circles only).</p>\n"}], "owner": {"reputation": 309, "user_id": 5785120, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/95e6747fdd33c1f25f555e3ff02072f2?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5785120/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "accepted_answer_id": 39758660, "answer_count": 2, "score": 2, "last_activity_date": 1492018341, "creation_date": 1475100342, "question_id": 39758412, "link": "https://stackoverflow.com/questions/39758412/python-psychopy-checking-if-a-point-is-within-a-circle", "title": "Python/Psychopy: checking if a point is within a circle", "body": "<p>I want to know the most efficient way to check if a given point (an eye coordinate) is within a specific region (in this case a circle).</p>\n\n<p>Code:</p>\n\n<pre><code>win = visual.Window([600,600], allowGUI=False)\n\ncoordinate = [50,70] #example x and y coordinates \n\nshape = visual.Circle(win, radius=120, units='pix') #shape to check if coordinates are within it\n\nif coordinate in shape:\n    print \"inside\"\nelse:\n    print \"outside\"\n\n&gt;&gt;TypeError: argument of type 'Circle' is not iterable\n</code></pre>\n\n<p>My x and y coordinates correspond to one point on the window, I need to check if this point falls within the circle whose radius is 120 pixels. </p>\n\n<p>Thanks,\nSteve</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1475102586, "last_edit_date": 1495541212, "creation_date": 1475102586, "answer_id": 39758762, "question_id": 39758386, "link": "https://stackoverflow.com/questions/39758386/initial-value-in-forms-init-for-the-model-with-generic-relation/39758762#39758762", "title": "Initial value in form&#39;s __init__ for the model with generic relation", "body": "<p>I have found a nice answer to my question <a href=\"https://stackoverflow.com/a/11400559/709897\">here</a>: </p>\n\n<blockquote>\n  <p>If you have already called super().<strong>init</strong> in your Form class, you\n  should update the form.initial dictionary, not the field.initial\n  property. If you study form.initial (e.g. print self.initial after the\n  call to super().<strong>init</strong>), it will contain values for all the fields.\n  Having a value of None in that dict will override the field.initial\n  value</p>\n</blockquote>\n\n<p>The solution to the problem was then just adding one additional line:</p>\n\n<pre><code>self.initial['content_object'] = form_value\n</code></pre>\n"}], "owner": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475102586, "creation_date": 1475100186, "last_edit_date": 1475101105, "question_id": 39758386, "link": "https://stackoverflow.com/questions/39758386/initial-value-in-forms-init-for-the-model-with-generic-relation", "title": "Initial value in form&#39;s __init__ for the model with generic relation", "body": "<p>I have a model with generic relation like this:</p>\n\n<pre><code>  content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE, blank=True, null=True)\n\n  object_id = models.PositiveIntegerField(blank=True, null=True)\n\n  content_object = GenericForeignKey('content_type', 'object_id')\n</code></pre>\n\n<p>To make the life easier for the user I have modified the form. The idea was to have one field with choices instead of multiple. For that I have merged fields into choices inside of form's init().</p>\n\n<pre><code>def __init__(self, *args, **kwargs):\n    super(AdminTaskForm, self).__init__(*args, **kwargs)\n\n    # combine object_type and object_id into a single 'generic_obj' field\n    # getall the objects that we want the user to be able to choose from\n    available_objects = list(Event.objects.all())\n    available_objects += list(Contest.objects.all())\n\n    # now create our list of choices for the &lt;select&gt; field\n    object_choices = []\n    for obj in available_objects:\n        type_id = ContentType.objects.get_for_model(obj.__class__).id\n        obj_id = obj.id\n        form_value = \"type:%s-id:%s\" % (type_id, obj_id)  # e.g.\"type:12-id:3\"\n        display_text = str(obj)\n        object_choices.append([form_value, display_text])\n    self.fields['content_object'].choices = object_choices\n</code></pre>\n\n<p>Till now everything was working fine, but now I have to provide initial value for content_object field.</p>\n\n<p>I have added this code to init() but it is not working:</p>\n\n<pre><code>    initial = kwargs.get('initial')\n    if initial:\n        if initial['content_object']:\n            object = initial['content_object']\n            object_id = object.id\n            object_type = ContentType.objects.get_for_model(object).id\n            form_value = \"type:%s-id:%s\" % (object_type, object_id)\n            self.fields['content_object'].initial = form_value\n</code></pre>\n\n<p>Any suggestions why I cannot set initial value inside of init? Thanks!</p>\n\n<p>P.S. Debug output looks for me ok, but initial is not set at all.</p>\n\n<pre><code>print(self.fields['content_object'].choices) --&gt; [['type:32-id:10050', 'Value1'], ['type:32-id:10056', 'Value2']]\nprint(form_value) --&gt; type:32-id:10056\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 5303, "user_id": 5927126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q2PYp.jpg?s=128&g=1", "display_name": "AnandShanbhag", "link": "https://stackoverflow.com/users/5927126/anandshanbhag"}, "is_accepted": true, "score": 1, "last_activity_date": 1476530733, "creation_date": 1476530733, "answer_id": 40058421, "question_id": 39758315, "link": "https://stackoverflow.com/questions/39758315/pandas-dataframe-data-type-conversion-or-isomap-transformation/40058421#40058421", "title": "Pandas Dataframe Data Type Conversion or Isomap Transformation", "body": "<p>Do you want to reshape your image to a new shape instead of the original one?</p>\n\n<p>If that is not the case then you should change the following line in your code </p>\n\n<pre><code>x = (img/255.0).reshape(-1,3)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>x = (img/255.0).reshape(-1)\n</code></pre>\n\n<p>Hope this will resolve your issue</p>\n"}], "owner": {"reputation": 53, "user_id": 6890604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c4e031966a89ccf4ca92b08ca4f7a4?s=128&d=identicon&r=PG&f=1", "display_name": "semenoff", "link": "https://stackoverflow.com/users/6890604/semenoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 40058421, "answer_count": 1, "score": 0, "last_activity_date": 1476530733, "creation_date": 1475099788, "question_id": 39758315, "link": "https://stackoverflow.com/questions/39758315/pandas-dataframe-data-type-conversion-or-isomap-transformation", "title": "Pandas Dataframe Data Type Conversion or Isomap Transformation", "body": "<p>I load images with scipy's misc.imread, which returns in my case 2304x3 ndarray. Later, I append this array to the list and convert it to a DataFrame. The purpose of doing so is to later apply Isomap transform on the DataFrame. My data frame is 84 rows/samples (images in the folder) and 2304 features each feature is array/list of 3 elements. When I try using Isomap transform I get error:</p>\n\n<pre><code>ValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>I think error is there because elements of my data frame are of the object type. First I tried using a conversion to_numeric on each column, but got an error, then I wrote a loop to convert each element to numeric. The results I get are still of the object type. Here is my code:</p>\n\n<pre><code>import pandas as pd\nfrom scipy import misc\nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport glob\nfrom sklearn import manifold\n\nsamples = []\npath = 'Datasets/ALOI/32/*.png'\nfiles = glob.glob(path)\nfor name in files:\n    img = misc.imread(name)\n    img = img[::2, ::2]\n    x = (img/255.0).reshape(-1,3)\n    samples.append(x)\n\ndf = pd.DataFrame.from_records(samples, coerce_float = True)\n\nfor i in range(0,2304):\n    for j in range(0,84):\n        df[i][j] = pd.to_numeric(df[i][j], errors = 'coerce')\n    df[i] = pd.to_numeric(df[i], errors = 'coerce')\n\n\nprint df[2303][83]\nprint df[2303].dtype\nprint df[2303][83].dtype\n\n#iso = manifold.Isomap(n_neighbors=6, n_components=3)\n#iso.fit(df) \n#manifold = iso.transform(df)\n#print manifold.shape\n</code></pre>\n\n<p>Last four lines commented out because they give an error. The output I get is:</p>\n\n<pre><code>[ 0.05098039  0.05098039  0.05098039]\nobject\nfloat64\n</code></pre>\n\n<p>As you can see each element of DataFrame is of the type <em>float64</em> but whole column is an <em>object</em>.</p>\n\n<p>Does anyone know how to convert whole data frame to numeric?</p>\n\n<p>Is there another way of applying Isomap?</p>\n"}, {"tags": ["python", "pandas", "dictionary"], "comments": [{"owner": {"reputation": 1386, "user_id": 3688683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0lBiI.jpg?s=128&g=1", "display_name": "scomes", "link": "https://stackoverflow.com/users/3688683/scomes"}, "edited": false, "score": 0, "creation_date": 1475155258, "post_id": 39758268, "comment_id": 66837343, "body": "See <a href=\"http://stackoverflow.com/questions/23787072/python-pandas-join-dataframes-on-index\" title=\"python pandas join dataframes on index\">stackoverflow.com/questions/23787072/&hellip;</a>"}, {"owner": {"reputation": 4703, "user_id": 1290147, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/86960db52bfc0bcf33fa3cc75a7ae9d8?s=128&d=identicon&r=PG", "display_name": "Luis Miguel", "link": "https://stackoverflow.com/users/1290147/luis-miguel"}, "reply_to_user": {"reputation": 1386, "user_id": 3688683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0lBiI.jpg?s=128&g=1", "display_name": "scomes", "link": "https://stackoverflow.com/users/3688683/scomes"}, "edited": false, "score": 0, "creation_date": 1475169737, "post_id": 39758268, "comment_id": 66847005, "body": "Thank you. The question you point out is tangentially related; it does not address the merging of multiple dfs at the same time, but in pairs."}, {"owner": {"reputation": 1386, "user_id": 3688683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0lBiI.jpg?s=128&g=1", "display_name": "scomes", "link": "https://stackoverflow.com/users/3688683/scomes"}, "edited": false, "score": 0, "creation_date": 1475170662, "post_id": 39758268, "comment_id": 66847536, "body": "Just merge them in one at a time. That is the way that merges are generally written. Keep a &quot;master&quot; dataframe at all times (at first this is just the first dataframe) and then merge the other ones into that one by one."}, {"owner": {"reputation": 4703, "user_id": 1290147, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/86960db52bfc0bcf33fa3cc75a7ae9d8?s=128&d=identicon&r=PG", "display_name": "Luis Miguel", "link": "https://stackoverflow.com/users/1290147/luis-miguel"}, "reply_to_user": {"reputation": 1386, "user_id": 3688683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0lBiI.jpg?s=128&g=1", "display_name": "scomes", "link": "https://stackoverflow.com/users/3688683/scomes"}, "edited": false, "score": 0, "creation_date": 1475170927, "post_id": 39758268, "comment_id": 66847692, "body": "One at a time if very inefficient. I am half-way into a solution and I&#39;ll probably answer my own question if I don&#39;t see the right answer, thanks for your help!"}], "answers": [{"tags": [], "owner": {"reputation": 4703, "user_id": 1290147, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/86960db52bfc0bcf33fa3cc75a7ae9d8?s=128&d=identicon&r=PG", "display_name": "Luis Miguel", "link": "https://stackoverflow.com/users/1290147/luis-miguel"}, "is_accepted": false, "score": 0, "last_activity_date": 1475191698, "last_edit_date": 1475191698, "creation_date": 1475190921, "answer_id": 39781422, "question_id": 39758268, "link": "https://stackoverflow.com/questions/39758268/merging-mutliple-pandas-dfs-time-series-on-date-index-and-which-are-contained-in/39781422#39781422", "title": "Merging mutliple pandas dfs time series on DATE index and which are contained in a python dictionary", "body": "<p>After not getting any answers, I found a solution that works, although there might be better ones. This is what I did:</p>\n\n<pre><code>asset_dict = {}\nfor name, file in zip(asset_name, files_to_test):\n    asset_dict[name] = pd.read_csv(file, index_col='DATE', parse_dates=True)\n    asset_dict[name].sort_index(ascending = True, inplace = True)\n</code></pre>\n\n<p>Pandas can <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html\" rel=\"nofollow\">concatenate</a> multilple dfs (at once, not one by one) contained in dictionaries, 'straight out of the box' without much tweaking, by specifying the axis and other parameters.</p>\n\n<pre><code>df = pd.concat(asset_dict, axis = 1)\n</code></pre>\n\n<p>The resulting df is a multi-index df, which is a problem for me. Also, the time series for stock prices are all of different lengths, which creates a lot of NaNs. I solved bot problems with this:</p>\n\n<pre><code>df.columns = df.columns.droplevel(1)\ndf.dropna(inplace = True)\n</code></pre>\n\n<p>Now, the columns of my df are these:</p>\n\n<pre><code>['AAPL', 'AORD', 'EURODOLLAR1MONTH', 'NGETF', 'USDBRL']\n</code></pre>\n\n<p>But since I wanted them to contain the 'STOCK_CLOSE' format, I do this: </p>\n\n<pre><code>old_columns = df.columns.tolist()\nnew_columns = []\nfor name in old_columns:\n    new_name = name + '_CLOSE_'\n    new_columns.append(new_name)\n</code></pre>\n"}], "owner": {"reputation": 4703, "user_id": 1290147, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/86960db52bfc0bcf33fa3cc75a7ae9d8?s=128&d=identicon&r=PG", "display_name": "Luis Miguel", "link": "https://stackoverflow.com/users/1290147/luis-miguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475191698, "creation_date": 1475099521, "last_edit_date": 1475191347, "question_id": 39758268, "link": "https://stackoverflow.com/questions/39758268/merging-mutliple-pandas-dfs-time-series-on-date-index-and-which-are-contained-in", "title": "Merging mutliple pandas dfs time series on DATE index and which are contained in a python dictionary", "body": "<p>I have a python dictionary that contains CLOSE prices for several stocks, stock indices, fixed income instruments and currencies (AAPL, AORD, etc.), using a DATE index. The different DFs in the dictionary have different lengths, i.e. some time series are longer than others. All the DFs have the same field, ie. 'CLOSE'.</p>\n\n<p>The length of the dictionary is variable. How can I merge all the DFs into a single one, by DATE index, and also using lsuffix = partial name and feature of the the file I am reading? (for example, the AAPL_CLOSE.csv file has a DATE &amp; a CLOSE field, but to differentiate from the other 'CLOSE' in the merged DF, its name should be AAPL_CLOSE)</p>\n\n<p>This is what I have:</p>\n\n<pre><code>asset_name = []\nfiles_to_test = glob.glob('*_CLOSE*')\nfor name in files_to_test:\n    asset_name.append(name.rsplit('_', 1)[0])\n</code></pre>\n\n<p>Which returns:</p>\n\n<pre><code>asset_name = ['AAPL', 'AORD', 'EURODOLLAR1MONTH', 'NGETF', 'USDBRL']\nfiles_to_test = ['AAPL_CLOSE.csv',\n 'AORD_CLOSE.csv',\n 'EURODOLLAR1MONTH_CLOSE.csv',\n 'NGETF_CLOSE.csv',\n 'USDBRL_CLOSE.csv']\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>asset_dict = {}\nfor name, file in zip(asset_name, files_to_test):\n    asset_dict[name] = pd.read_csv(file, index_col = 'DATE', parse_dates = True)\n</code></pre>\n\n<p>This is the little function I would like to generalize, to create a big merge of all the DFs in the dictionary by DATE, using lsuffix = the elements in asset_list. </p>\n\n<pre><code>merged = asset_dict['AAPL'].join(asset_dict['AORD'], how = 'right', lsuffix ='_AAPL')\n</code></pre>\n\n<p>The DFs will have a lot of N/A due to the mismatch of lengths, but I will deal with that later.</p>\n"}, {"tags": ["python", "xlwings"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6826497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5utw.jpg?s=128&g=1", "display_name": "QBG", "link": "https://stackoverflow.com/users/6826497/qbg"}, "edited": false, "score": 0, "creation_date": 1475130383, "post_id": 39758533, "comment_id": 66820790, "body": "Hi - thanks for the advice!  I am just learning about lists now so I will rearrange everything so that the final write to excel uses a single list written to a range rather than each cell being written in turn, as they currently are.  I&#39;ll need to do some homework about NumPy and Panda as I&#39;ve seen them mentioned but haven&#39;t used them yet.  Thanks again, Richard."}], "tags": [], "owner": {"reputation": 36, "user_id": 6758601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ygmhY.gif?s=128&g=1", "display_name": "Samuel RN Beatty", "link": "https://stackoverflow.com/users/6758601/samuel-rn-beatty"}, "is_accepted": true, "score": 1, "last_activity_date": 1475101387, "last_edit_date": 1475101387, "creation_date": 1475101023, "answer_id": 39758533, "question_id": 39758226, "link": "https://stackoverflow.com/questions/39758226/using-xlwings-with-excel-which-of-these-two-approaches-is-the-quickest-preferr/39758533#39758533", "title": "Using xlwings with excel, which of these two approaches is the quickest/ preferred?", "body": "<p>The overhead of the Excel call reigns supreme. When using XLWings, write to your spreadsheet as infrequently as possible.</p>\n\n<p>I've found rewriting the whole sheet (or area of the sheet to be changed) using the Range object to be leaps and bounds faster than writing individual cells, rows, or columns. If I'm not doing any heavy data manipulation I just use nested lists - Whether it'll be better for you to treat the sublists as columns or rows (the tranpose option is used for this) is up to how you're handling your data. If you're working with larger datasets or doing more intensive work you may want to use NumPy arrays or Panda.</p>\n"}], "owner": {"reputation": 35, "user_id": 6826497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5utw.jpg?s=128&g=1", "display_name": "QBG", "link": "https://stackoverflow.com/users/6826497/qbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 1, "accepted_answer_id": 39758533, "answer_count": 1, "score": 1, "last_activity_date": 1475101387, "creation_date": 1475099306, "question_id": 39758226, "link": "https://stackoverflow.com/questions/39758226/using-xlwings-with-excel-which-of-these-two-approaches-is-the-quickest-preferr", "title": "Using xlwings with excel, which of these two approaches is the quickest/ preferred?", "body": "<p>I have just started to learn Python and am using xlwings to write to an excel spreadsheet.  I am really new to coding (and this is my first question) so this may be a bit of a simple question but any comments would be really appreciated.</p>\n\n<p>I am reading the page source of a website (using selenium and beautiful soup) to get a few pieces of information about a product, such as price and weight.  I am then writing these values to cells in excel.</p>\n\n<p>I have two ways of doing this - the first runs a function and then writes the values to excel before moving on to the next function:</p>\n\n<p><em>(these are excerpts of the main script - both ways work ok)</em></p>\n\n<pre><code>   while rowNum &lt; lastRow + 1:    \n\n    urlCellRef = (rowNum, colNum)\n    url = wb.sheets[0].range(urlCellRef).value\n\n    # Parse HTML with beautiful soup\n    getPageSource()            \n\n    # Find a product price field value within HTML\n    getProductPrice() \n    itemPriceRef = (rowNum, colNum + 1)\n    # Write price value back to Excel sheet\n    wb.sheets[0].range(itemPriceRef).value = productPrice\n\n    getProductWeight()\n    itemWeightRef = (rowNum, colNum + 2)\n    wb.sheets[0].range(itemWeightRef).value = productWeight     \n\n    getProductQuantity()\n    itemQuantityRef = (rowNum, colNum + 4)\n    wb.sheets[0].range(itemQuantityRef).value = productQuantity\n\n    getProductCode()\n    prodCodeRef = (rowNum, colNum + 6)\n    wb.sheets[0].range(prodCodeRef).value = productCode\n\n\n    rowNum = rowNum + 1\n</code></pre>\n\n<p>The second runs all of the functions and then writes each of the stored values to excel in one go:</p>\n\n<pre><code>   while rowNum &lt; lastRow + 1:    \n\n    urlCellRef = (rowNum, colNum)\n    url = wb.sheets[0].range(urlCellRef).value\n\n\n    getPageSource()            \n    getProductPrice() \n    getProductWeight()\n    getProductQuantity()\n    getProductCode()\n\n\n    itemPriceRef = (rowNum, colNum + 1)\n    wb.sheets[0].range(itemPriceRef).value = productPrice  \n\n    itemWeightRef = (rowNum, colNum + 2)\n    wb.sheets[0].range(itemWeightRef).value = productWeight\n\n    itemQuantityRef = (rowNum, colNum + 4)\n    wb.sheets[0].range(itemQuantityRef).value = productQuantity\n\n    prodCodeRef = (rowNum, colNum + 6)\n    wb.sheets[0].range(prodCodeRef).value = productCode\n\n\n    rowNum = rowNum + 1 \n</code></pre>\n\n<p>I was wondering, which is the preferred method for doing this?  I haven't noticed much of a speed difference but my laptop is pretty slow so if one approach is considered best practice then I would prefer to go with that as I will be increasing the number of urls that will be used.</p>\n\n<p>Many thanks for your help!</p>\n"}, {"tags": ["python", "deep-learning", "keras"], "owner": {"reputation": 3347, "user_id": 3140992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RiDg4.jpg?s=128&g=1", "display_name": "citynorman", "link": "https://stackoverflow.com/users/3140992/citynorman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2599, "favorite_count": 3, "answer_count": 0, "score": 4, "last_activity_date": 1485184095, "creation_date": 1475099132, "question_id": 39758190, "link": "https://stackoverflow.com/questions/39758190/time-series-prediction-with-keras-and-multiple-sequences", "title": "Time series prediction with keras and multiple sequences", "body": "<p>I understand the <a href=\"https://github.com/fchollet/keras/blob/master/examples/stateful_lstm.py\" rel=\"nofollow\">stateful LSTM prediction example</a> in Keras on a single sequence. That example has one sequence of 50k observations. </p>\n\n<p>My questions:</p>\n\n<ul>\n<li>What if you want to train multiple sequences of 50k observations? Say one that starts/ends at different values and has a slightly different behavior?</li>\n<li>How to modify the example to increase the prediction time step?</li>\n<li>Are LSTMs even any good for that sort of thing?</li>\n</ul>\n\n<p>Fully replicable example with 3 mean-reverting time series and predicting 20 steps out.</p>\n\n<pre><code># generate random data\nimport statsmodels.api as sm\nimport numpy as np\nimport pandas as pd\n\ncfg_t_total = 25000\ncfg_t_step = 20\ncfg_batch_size = 100\n\nnp.random.seed(12345)\narparams = np.array([.75, -.25])\nmaparams = np.array([.65, .35])\nar = np.r_[1, -arparams] # add zero-lag and negate\nma = np.r_[1, maparams] # add zero-lag\ny0 = sm.tsa.arma_generate_sample(ar, ma, cfg_t_total)\ny1 = sm.tsa.arma_generate_sample(ar, ma, cfg_t_total)\ny2 = sm.tsa.arma_generate_sample(ar, ma, cfg_t_total)\n\ndf=pd.DataFrame({'a':y0,'b':y1,'c':y2})\n\ndf.head(100).plot()\n\ndf.head(5)\n\n# create training data format\nX = df.unstack()\ny = X.groupby(level=0).shift(-cfg_t_step)\n\nidx_keep = ~(y.isnull())\nX = X.ix[idx_keep]\ny = y.ix[idx_keep]\n\nfrom keras.models import Sequential\nfrom keras.layers import Dense, LSTM\n\n# LSTM taken from https://github.com/fchollet/keras/blob/master/examples/stateful_lstm.py\n# how to do this...?!\nprint('Creating Model')\nmodel = Sequential()\nmodel.add(LSTM(50,\n               batch_input_shape=(cfg_batch_size, cfg_t_step, 1),\n               return_sequences=True,\n               stateful=True))\nmodel.add(LSTM(50,\n               batch_input_shape=(cfg_batch_size, cfg_t_step, 1),\n               return_sequences=False,\n               stateful=True))\nmodel.add(Dense(1))\nmodel.compile(loss='mse', optimizer='rmsprop')\n\nmodel.fit(X, y, batch_size=cfg_batch_size, verbose=2, validation_split=0.25, nb_epoch=1, shuffle=False)\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 895565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89580d24963c8aa55287d52259091cfd?s=128&d=identicon&r=PG", "display_name": "user895565", "link": "https://stackoverflow.com/users/895565/user895565"}, "edited": false, "score": 0, "creation_date": 1475104925, "post_id": 39758216, "comment_id": 66814214, "body": "restart didn&#39;t help."}], "tags": [], "owner": {"reputation": 11805, "user_id": 1637351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CptWd.jpg?s=128&g=1", "display_name": "schillingt", "link": "https://stackoverflow.com/users/1637351/schillingt"}, "is_accepted": false, "score": 0, "last_activity_date": 1475099285, "creation_date": 1475099285, "answer_id": 39758216, "question_id": 39758177, "link": "https://stackoverflow.com/questions/39758177/python-django-app-settings-log-level/39758216#39758216", "title": "python django app settings log level", "body": "<p>You need to restart the web server for it to pick up changes in your app.</p>\n"}], "owner": {"reputation": 71, "user_id": 895565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89580d24963c8aa55287d52259091cfd?s=128&d=identicon&r=PG", "display_name": "user895565", "link": "https://stackoverflow.com/users/895565/user895565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475099285, "creation_date": 1475099061, "question_id": 39758177, "link": "https://stackoverflow.com/questions/39758177/python-django-app-settings-log-level", "title": "python django app settings log level", "body": "<p>I am new to python and Django. My changes in app/settings.py are not picking up. I have changed the log level \nFROM:</p>\n\n<pre><code>LOGGING = {\n'version': 1,\n...\n'handlers': {\n    'mail_admins': {\n        'level': 'ERROR',\n        'filters': ['require_debug_false'],\n        'class': 'django.utils.log.AdminEmailHandler'\n    }\n},\n\n'loggers': {\n    'django.request': {\n        'handlers': ['mail_admins'],\n        'level': 'ERROR',\n        'propagate': True,\n    },\n}\n}\n</code></pre>\n\n<p>TO</p>\n\n<pre><code>LOGGING = {\n'version': 1,\n...\n\n 'handlers': {\n    'file': {\n        'level': 'DEBUG',\n        'class': 'logging.FileHandler',\n        'filename': '/var/log/django/debug.log'\n     }\n },\n\n 'loggers': {\n    'django.request': {\n        'handlers': ['file'],\n        'level': 'DEBUG',\n        'propagate': True,\n     },\n }\n} \n</code></pre>\n\n<p>but changes are not picking up as I don't see any activity on log despite actions on app. How could I tell Django that settings are updated and reload it?</p>\n"}, {"tags": ["python", "treeview", "kivy", "kivy-language"], "owner": {"reputation": 4275, "user_id": 2930045, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HSbSx.jpg?s=128&g=1", "display_name": "DuckPuncher", "link": "https://stackoverflow.com/users/2930045/duckpuncher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1475098873, "creation_date": 1475098873, "question_id": 39758128, "link": "https://stackoverflow.com/questions/39758128/how-are-the-treeview-and-or-recycleview-used-in-kivy", "title": "How are the TreeView and/or RecycleView used in Kivy?", "body": "<p>I'm using python 3.5 along with Kivy to write a simple timeclock program.</p>\n\n<p>I need to list employees out so that they can be selected, so that whoever is doing payroll can get an overview of the employees hours.</p>\n\n<p>I have gone over the documentation for both <a href=\"https://kivy.org/docs/api-kivy.uix.treeview.html\" rel=\"nofollow\"><code>TreeView</code></a> and <a href=\"https://kivy.org/docs/api-kivy.uix.recycleview.html\" rel=\"nofollow\"><code>RecycleView</code></a>, but I cannot seem to wrap my head around either of them when it comes to using them in <code>.kv</code> files.</p>\n\n<p>Are there any good examples out there? I am fairly new to Kivy, so maybe I'm missing something?  I cannot seem to find anything on the subject other than, \"It's way more complicated than it needs to be and nobody knows how it works\".</p>\n\n<p>Here is one approach I took using <code>TreeView</code>, but I couldn't apply colors to the text on the <code>TreeViewLabel</code>s which is desired.  Basically, I just created new classes based on the <code>TreeView</code> and <code>TreeViewLabel</code> classes:</p>\n\n<pre><code>class CustomTreeViewLabel(TreeViewLabel):\n    \"\"\"\n    Custom TreeViewLabel for attaching database model instances to a node.\n    \"\"\"\n    def __init__(self, user=None, **kwargs):\n        super(CustomTreeViewLabel, self).__init__(**kwargs)\n        self.user = user\n\n\nclass CustomTreeView(FloatLayout):\n    \"\"\"\n    The CustomTreeView is what is used in place of a TreeView since they are useless\n    inside of the .kv files.\n    \"\"\"\n    def __init__(self, **kwargs):\n        super(CustomTreeView, self).__init__(**kwargs)\n        self.selected = None\n\n        tree_view = TreeView(\n            hide_root=True,\n            indent_level=4\n        )\n\n        # Use Peewee ORM to grab the teams set up in database\n        teams = [team for team in models.Team.select().execute()]\n\n        for team in teams:\n            # Create a node with no parent to the TreeView\n            team_tree_label = TreeViewLabel(text=team.name)\n            tree_view.add_node(team_tree_label)\n\n            # Get users on the given team.\n            users = [u for u in models.User.select().where(models.User.team_id == team.id)]\n            for user in users:\n                # Add the users full name as a TreeViewLabel with the team_tree_label as the parent node.\n                user_text = '{} {}'.format(user.first_name, user.last_name)\n                tree_view.add_node(CustomTreeViewLabel(user=user, text=user_text, on_touch_up=self.touch, color=(65, 207, 63, 1)), parent=team_tree_label)\n\n        # Add the TreeView widget to the FloatLayout\n        self.add_widget(tree_view)\n\n    def touch(self, *args, **kwargs):\n        \"\"\"\n        Handle a touch event on a child TreeViewLabel\n\n        :param args:\n        :param kwargs:\n        :return:\n        \"\"\"\n\n        tree_view_label, motion = args\n\n        if tree_view_label.is_selected and self.selected != tree_view_label:\n            # Set the selected label\n            self.selected = tree_view_label\n            print(tree_view_label.user.id)\n            print(tree_view_label.text)\n</code></pre>\n\n<p>Then I just imported the <code>CustomTreeView</code> in my <code>.kv</code> file and use it:</p>\n\n<pre><code>#: import CustomTreeView views.CustomTreeView\n\n&lt;TimeClockApp&gt;:\n    do_default_tab: False\n    tab_width: 200\n    padding: 3\n    TabbedPanelItem:\n        text: 'Time Clock'\n        BoxLayout:\n            cols: 2\n            CustomTreeView\n            GridLayout:\n                cols: 1\n                spacing: 25\n                padding: [50, 150, 50, 150]\n                BoxLayout:\n                    orientation: 'vertical'\n                    Label:\n                        text: ''\n                Button:\n                    size_hint: (2, .5)\n                    text: 'Clock In'\n                    size: (20, 20)\n                    on_press: app.root.clock_in(*args)\n                Button:\n                    size_hint: (2, .5)\n                    text: 'Clock Out'\n                    size: (20, 20)\n</code></pre>\n\n<p>This seems a bit excessive for something that should be pretty simple, and I doubt it would scale well.</p>\n\n<p>What can I do to fix this?  Is this how people normally go about making lists of data in Kivy?  I really don't like doing it this way.</p>\n"}, {"tags": ["python", "tensorflow", "gpu"], "comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1475109967, "post_id": 39758094, "comment_id": 66815280, "body": "What if you delete the session (del sess)? That should have the same effect on memory as restarting process"}, {"owner": {"reputation": 15751, "user_id": 524436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5336a2844502fe58c2c06bc12c32ed?s=128&d=identicon&r=PG", "display_name": "etarion", "link": "https://stackoverflow.com/users/524436/etarion"}, "edited": false, "score": 1, "creation_date": 1475141788, "post_id": 39758094, "comment_id": 66827854, "body": "Shouldn&#39;t sess.close() (or using the Session as a context with <code>with</code>) also work?"}, {"owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "edited": false, "score": 0, "creation_date": 1475164844, "post_id": 39758094, "comment_id": 66844252, "body": "I wish, I do use <code>with ... sess:</code> and have also tried <code>sess.close()</code>. GPU memory doesn&#39;t get cleared, and clearing the default graph and rebuilding it certainly doesn&#39;t <i>appear</i> to work. That is, even if I put 10 sec pause in between models I don&#39;t see memory on the GPU clear with <code>nvidia-smi</code>. That doesn&#39;t necessarily mean that tensorflow isn&#39;t handling things properly behind the scenes and just keeping its allocation of memory constant. But I&#39;m having troubles validating that line of reasoning."}, {"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 2, "creation_date": 1475183431, "post_id": 39758094, "comment_id": 66854336, "body": "<code>nvidia-smi</code> doesn&#39;t correctly report amount of memory available to TensorFlow. When TensorFlow computation releases memory, it will still show up as reserved to outside tools, but this memory is available to other computations in tensorflow"}, {"owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "reply_to_user": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1475188436, "post_id": 39758094, "comment_id": 66856160, "body": "@YaroslavBulatov I&#39;ve done more testing and confirmed that tensorflow is performing as expected on the 2nd and 3rd models after simply resetting the default graph. If you post that as an answer I&#39;ll accept it as correct. It seems that this question is irrelevant, though probably commonly asked so worth keeping open."}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 4165040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74MU3.jpg?s=128&g=1", "display_name": "Fedor Chervinskii", "link": "https://stackoverflow.com/users/4165040/fedor-chervinskii"}, "edited": false, "score": 7, "creation_date": 1497978390, "post_id": 39781178, "comment_id": 76303478, "body": "As for now, tensorflow still doesn&#39;t release GPU memory with sess.Close() or after with tf.Session() as sess: , could you please update your answer considering comments above?"}, {"owner": {"reputation": 1549, "user_id": 3302563, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/noftk.jpg?s=128&g=1", "display_name": "Diego Aguado", "link": "https://stackoverflow.com/users/3302563/diego-aguado"}, "edited": false, "score": 0, "creation_date": 1501266653, "post_id": 39781178, "comment_id": 77721869, "body": "@yaroslav-bulatov you mentioned on your comments that <code>nvidia-smi</code> doesn&#39;t show the correct memory on a gpu.  I tried <code>tf.reset_default_graph()</code> and then rebuild the previous graph but I have an OOM error which suggests that <code>nvidia-smi</code> is displaying correctly the memory. Any thoughts?"}, {"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "reply_to_user": {"reputation": 1549, "user_id": 3302563, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/noftk.jpg?s=128&g=1", "display_name": "Diego Aguado", "link": "https://stackoverflow.com/users/3302563/diego-aguado"}, "edited": false, "score": 0, "creation_date": 1501267556, "post_id": 39781178, "comment_id": 77722338, "body": "@DiegoAgher what I meant that nvidia-smi may show 0 available memory, yet there&#39;s still plenty of memory available for TensorFlow to use. The reason is that TensorFlow takes over the memory management"}, {"owner": {"reputation": 1549, "user_id": 3302563, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/noftk.jpg?s=128&g=1", "display_name": "Diego Aguado", "link": "https://stackoverflow.com/users/3302563/diego-aguado"}, "edited": false, "score": 0, "creation_date": 1501268342, "post_id": 39781178, "comment_id": 77722758, "body": "@yaroslavBulatov so how would you go about freeing up space in the gpu if the tensorflow pool is still there and when building again the graph, I get the OOM error ?"}, {"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1501269950, "post_id": 39781178, "comment_id": 77723572, "body": "It&#39;s freed up automatically. OOM error in tensorflow is typically caused by having models that are too large"}, {"owner": {"reputation": 512, "user_id": 5617182, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f2b838653aa59cfff8a971c3ed11bb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fosa", "link": "https://stackoverflow.com/users/5617182/fosa"}, "edited": false, "score": 0, "creation_date": 1501463293, "post_id": 39781178, "comment_id": 77773007, "body": "I also have the OOM error which seems to be due to variables not being released.  For example the model will run and train several times, but after reassigning the variable (not changing the total size), it may give an OOM error.  Closing Spyder and reopening has been my only recourse.."}], "tags": [], "owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "is_accepted": false, "score": 2, "last_activity_date": 1501267407, "last_edit_date": 1501267407, "creation_date": 1475189229, "answer_id": 39781178, "question_id": 39758094, "link": "https://stackoverflow.com/questions/39758094/clearing-tensorflow-gpu-memory-after-model-execution/39781178#39781178", "title": "Clearing Tensorflow GPU memory after model execution", "body": "<p>GPU memory allocated by tensors is released (back into TensorFlow memory pool) as soon as the tensor is not needed anymore (before the .run call terminates). GPU memory allocated for variables is released when variable containers are destroyed. In case of DirectSession (ie, sess=tf.Session(\"\")) it is when session is closed or explicitly reset (added in  <a href=\"https://github.com/tensorflow/tensorflow/commit/62c159ff\" rel=\"nofollow noreferrer\">62c159ff</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 5991, "user_id": 232371, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb2a01bdde27923d196336fe006c8764?s=128&d=identicon&r=PG", "display_name": "Ben Usman", "link": "https://stackoverflow.com/users/232371/ben-usman"}, "edited": false, "score": 0, "creation_date": 1532731911, "post_id": 44842044, "comment_id": 90099619, "body": "I wrote a <a href=\"https://gist.github.com/MInner/9716950ac85b49821b56298117756451\" rel=\"nofollow noreferrer\">small reusable wrapper</a> that uses same trick as in this answer. However, performance degradation is severe, which is okay for small computations (i.e. inference on a small dataset), but not practical in any other scenario. I believe this must be due to inter-process communication and passing large numpy objects back and forth."}, {"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1540953842, "post_id": 44842044, "comment_id": 93049184, "body": "Can I use this to free GPU memory after loading a Keras model?"}, {"owner": {"reputation": 55, "user_id": 4984822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-yTO8zf9dMxI/AAAAAAAAAAI/AAAAAAAAAgY/4tz7ttEuWnU/photo.jpg?sz=128", "display_name": "mradul dubey", "link": "https://stackoverflow.com/users/4984822/mradul-dubey"}, "edited": false, "score": 0, "creation_date": 1592315986, "post_id": 44842044, "comment_id": 110377658, "body": "Related and important, multiprocessing.Process uses <code>spawn</code> as default on Windows, but, <code>fork</code> on *nix systems. If you find yourself in a situation where the model running in a separate Process is unable to use GPU i.e. <code>tf.test.is_gpu_available</code> is <code>False</code> while checking cross platform compatibility, you can force select the state using <code>multiprocessing.get_context(&#39;spawn&#39;)</code>. <code>spawn</code> is available for Windows, Linux and MacOS. More on context <a href=\"https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 106, "user_id": 10540299, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nlFk2LE4m2k/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBIQIiX6aq5TxYyssuhd1Ic0CvEjg/mo/photo.jpg?sz=128", "display_name": "Foivos Ts", "link": "https://stackoverflow.com/users/10540299/foivos-ts"}, "edited": false, "score": 0, "creation_date": 1601465198, "post_id": 44842044, "comment_id": 113415255, "body": "This is a great answer."}, {"owner": {"reputation": 414, "user_id": 3907561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5609173fc8392f902513d21357cd64?s=128&d=identicon&r=PG&f=1", "display_name": "Joke Huang", "link": "https://stackoverflow.com/users/3907561/joke-huang"}, "edited": false, "score": 0, "creation_date": 1604126102, "post_id": 44842044, "comment_id": 114257392, "body": "So how to make multiprocessing works for jupyter notebook?"}, {"owner": {"reputation": 486, "user_id": 6509922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b7ae46c10ea451f336b34d1d2dd005c?s=128&d=identicon&r=PG&f=1", "display_name": "Jed", "link": "https://stackoverflow.com/users/6509922/jed"}, "edited": false, "score": 1, "creation_date": 1604654533, "post_id": 44842044, "comment_id": 114418683, "body": "I can&#39;t get this to work, nor the small reusable wrapper listed by Ben Usman. The problem is that the parallel_wrapper is not picklable if using &#39;spawn&#39; and the process hangs if using &#39;fork&#39;. It&#39;s hard to believe that after nearly 4 years this is still such an issue with TF. does anybody know of a good resolution?"}], "tags": [], "owner": {"reputation": 2246, "user_id": 4391129, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000214836875/picture?type=large", "display_name": "Oliver Wilken", "link": "https://stackoverflow.com/users/4391129/oliver-wilken"}, "is_accepted": true, "score": 29, "last_activity_date": 1498811435, "creation_date": 1498811435, "answer_id": 44842044, "question_id": 39758094, "link": "https://stackoverflow.com/questions/39758094/clearing-tensorflow-gpu-memory-after-model-execution/44842044#44842044", "title": "Clearing Tensorflow GPU memory after model execution", "body": "<p>A git issue from June 2016 (<a href=\"https://github.com/tensorflow/tensorflow/issues/1727\" rel=\"noreferrer\">https://github.com/tensorflow/tensorflow/issues/1727</a>) indicates that there is the following problem:</p>\n\n<blockquote>\n  <p>currently the Allocator in the GPUDevice belongs to the ProcessState,\n  which is essentially a global singleton. The first session using GPU\n  initializes it, and frees itself when the process shuts down.</p>\n</blockquote>\n\n<p>Thus the only workaround would be to use processes and shut them down after the computation.</p>\n\n<p><strong>Example Code:</strong></p>\n\n<pre><code>import tensorflow as tf\nimport multiprocessing\nimport numpy as np\n\ndef run_tensorflow():\n\n    n_input = 10000\n    n_classes = 1000\n\n    # Create model\n    def multilayer_perceptron(x, weight):\n        # Hidden layer with RELU activation\n        layer_1 = tf.matmul(x, weight)\n        return layer_1\n\n    # Store layers weight &amp; bias\n    weights = tf.Variable(tf.random_normal([n_input, n_classes]))\n\n\n    x = tf.placeholder(\"float\", [None, n_input])\n    y = tf.placeholder(\"float\", [None, n_classes])\n    pred = multilayer_perceptron(x, weights)\n\n    cost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(logits=pred, labels=y))\n    optimizer = tf.train.AdamOptimizer(learning_rate=0.001).minimize(cost)\n\n    init = tf.global_variables_initializer()\n\n    with tf.Session() as sess:\n        sess.run(init)\n\n        for i in range(100):\n            batch_x = np.random.rand(10, 10000)\n            batch_y = np.random.rand(10, 1000)\n            sess.run([optimizer, cost], feed_dict={x: batch_x, y: batch_y})\n\n    print \"finished doing stuff with tensorflow!\"\n\n\nif __name__ == \"__main__\":\n\n    # option 1: execute code with extra process\n    p = multiprocessing.Process(target=run_tensorflow)\n    p.start()\n    p.join()\n\n    # wait until user presses enter key\n    raw_input()\n\n    # option 2: just execute the function\n    run_tensorflow()\n\n    # wait until user presses enter key\n    raw_input()\n</code></pre>\n\n<p>So if you would call the function <code>run_tensorflow()</code> within a process you created and shut the process down (option 1), the memory is freed. If you just run <code>run_tensorflow()</code> (option 2) the memory is not freed after the function call.</p>\n"}, {"comments": [{"owner": {"reputation": 874, "user_id": 1032586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c5abff11139e6bc9a54e50fdc4e0579?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1032586/igor"}, "edited": false, "score": 0, "creation_date": 1533660410, "post_id": 51731238, "comment_id": 90424299, "body": "I&#39;m not sure I get the difference between the two methods you are talking about. They both look like just &quot;use multiprocessing&quot; to me. And there&#39;s already a nice and more detailed <a href=\"https://stackoverflow.com/a/44842044/1032586\">answer</a> about it."}, {"owner": {"reputation": 118, "user_id": 4331167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f6185edb1171dbcff2e684db20a7e5?s=128&d=identicon&r=PG&f=1", "display_name": "liviaerxin", "link": "https://stackoverflow.com/users/4331167/liviaerxin"}, "reply_to_user": {"reputation": 874, "user_id": 1032586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c5abff11139e6bc9a54e50fdc4e0579?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1032586/igor"}, "edited": false, "score": 0, "creation_date": 1533720754, "post_id": 51731238, "comment_id": 90446445, "body": "In my sense, &#39;multiprocessing&#39; and &#39;subprocess&#39;, they both spawn the new process to handle the GPU run and free but operate in different  ways"}, {"owner": {"reputation": 583, "user_id": 1624911, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/19add53f1ef99fe8c6c1c2bb5860ac62?s=128&d=identicon&r=PG", "display_name": "Michael Malak", "link": "https://stackoverflow.com/users/1624911/michael-malak"}, "edited": false, "score": 1, "creation_date": 1602862206, "post_id": 51731238, "comment_id": 113863431, "body": "Should be noted that is multiprocessing.Queue and not queue.Queue"}], "tags": [], "owner": {"reputation": 118, "user_id": 4331167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f6185edb1171dbcff2e684db20a7e5?s=128&d=identicon&r=PG&f=1", "display_name": "liviaerxin", "link": "https://stackoverflow.com/users/4331167/liviaerxin"}, "is_accepted": false, "score": 3, "last_activity_date": 1533720021, "last_edit_date": 1533720021, "creation_date": 1533658352, "answer_id": 51731238, "question_id": 39758094, "link": "https://stackoverflow.com/questions/39758094/clearing-tensorflow-gpu-memory-after-model-execution/51731238#51731238", "title": "Clearing Tensorflow GPU memory after model execution", "body": "<p>Now there seem to be two ways to resolve the iterative training model or if you use future multipleprocess pool to serve the model training, where the process in the pool will not be killed if the future finished. You can apply two methods in the training process to release GPU memory meanwhile you wish to preserve the main process.</p>\n\n<ol>\n<li>call a subprocess to run the model training. when one phase training completed, the subprocess will exit and free memory. It's easy to get the return value.</li>\n<li>call the multiprocessing.Process(p) to run the model training(p.start), and p.join will indicate the process exit and free memory.</li>\n</ol>\n\n<p>Here is a helper function using multiprocess.Process which can open a new process to run your python written function and reture value instead of using Subprocess,</p>\n\n<pre><code># open a new process to run function\ndef process_run(func, *args):\n    def wrapper_func(queue, *args):\n        try:\n            logger.info('run with process id: {}'.format(os.getpid()))\n            result = func(*args)\n            error = None\n        except Exception:\n            result = None\n            ex_type, ex_value, tb = sys.exc_info()\n            error = ex_type, ex_value,''.join(traceback.format_tb(tb))\n        queue.put((result, error))\n\n    def process(*args):\n        queue = Queue()\n        p = Process(target = wrapper_func, args = [queue] + list(args))\n        p.start()\n        result, error = queue.get()\n        p.join()\n        return result, error  \n\n    result, error = process(*args)\n    return result, error\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 3808676, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9bccf00a60db5d03d645691a8d52468?s=128&d=identicon&r=PG&f=1", "display_name": "guillefix", "link": "https://stackoverflow.com/users/3808676/guillefix"}, "edited": false, "score": 4, "creation_date": 1537144854, "post_id": 51852511, "comment_id": 91663489, "body": "Running this code gives me an <code>tensorflow.python.framework.errors_impl.InternalError: Failed to create session.</code> preceded by <code>Failed precondition: Failed to memcopy into scratch buffer for device 0</code>, when I try to run the <code>tf.Session()</code> after the <code>cuda.close(1)</code>"}, {"owner": {"reputation": 28637, "user_id": 99989, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLbIt.jpg?s=128&g=1", "display_name": "Neil G", "link": "https://stackoverflow.com/users/99989/neil-g"}, "edited": false, "score": 0, "creation_date": 1563489019, "post_id": 51852511, "comment_id": 100727745, "body": "This leaves tensorflow in  a bad state"}], "tags": [], "owner": {"reputation": 274, "user_id": 5837113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0DJy.jpg?s=128&g=1", "display_name": "TanLingxiao", "link": "https://stackoverflow.com/users/5837113/tanlingxiao"}, "is_accepted": false, "score": 6, "last_activity_date": 1534303317, "creation_date": 1534303317, "answer_id": 51852511, "question_id": 39758094, "link": "https://stackoverflow.com/questions/39758094/clearing-tensorflow-gpu-memory-after-model-execution/51852511#51852511", "title": "Clearing Tensorflow GPU memory after model execution", "body": "<p>I use <a href=\"http://numba.pydata.org/numba-doc/0.13/CUDADevice.html\" rel=\"noreferrer\">numba</a> to releae gpu, with tensorflow I can not find a effect method.</p>\n\n<pre><code>import tensorflow as tf\nfrom numba import cuda\n\na = tf.constant([1.0,2.0,3.0],shape=[3],name='a')\nb = tf.constant([1.0,2.0,3.0],shape=[3],name='b')\nwith tf.device('/gpu:1'):\n    c = a+b\n\nTF_CONFIG = tf.ConfigProto(\ngpu_options=tf.GPUOptions(per_process_gpu_memory_fraction=0.1),\n  allow_soft_placement=True)\n\nsess = tf.Session(config=TF_CONFIG)\nsess.run(tf.global_variables_initializer())\ni=1\nwhile(i&lt;1000):\n        i=i+1\n        print(sess.run(c))\n\nsess.close() # if don't use numba,the gpu can't be released\ncuda.select_device(1)\ncuda.close()\nwith tf.device('/gpu:1'):\n    c = a+b\n\nTF_CONFIG = tf.ConfigProto(\ngpu_options=tf.GPUOptions(per_process_gpu_memory_fraction=0.5),\n  allow_soft_placement=True)\n\nsess = tf.Session(config=TF_CONFIG)\n\nsess.run(tf.global_variables_initializer())\nwhile(1):\n        print(sess.run(c))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 4984822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-yTO8zf9dMxI/AAAAAAAAAAI/AAAAAAAAAgY/4tz7ttEuWnU/photo.jpg?sz=128", "display_name": "mradul dubey", "link": "https://stackoverflow.com/users/4984822/mradul-dubey"}, "edited": false, "score": 2, "creation_date": 1587491975, "post_id": 60354785, "comment_id": 108531311, "body": "This leaves the GPU in a bad state."}, {"owner": {"reputation": 139, "user_id": 6610205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2374ecc343f7e9e98bf0180db487083?s=128&d=identicon&r=PG&f=1", "display_name": "Scott White", "link": "https://stackoverflow.com/users/6610205/scott-white"}, "edited": false, "score": 7, "creation_date": 1591144908, "post_id": 60354785, "comment_id": 109942554, "body": "Would you mind explaining what you mean by &quot;leaves the GPU in a bad state&quot;? That doesn&#39;t tell us the ramifications of using this approach."}, {"owner": {"reputation": 2059, "user_id": 9805238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u4HMG.png?s=128&g=1", "display_name": "Hagbard", "link": "https://stackoverflow.com/users/9805238/hagbard"}, "edited": false, "score": 1, "creation_date": 1599036362, "post_id": 60354785, "comment_id": 112645716, "body": "I guess what he means is that this results in an &quot; .\\tensorflow/core/kernels/random_op_gpu.h:232] Non-OK-status: GpuLaunchKernel(FillPhiloxRandomKernelLaunch&lt;Distribution&gt;, num_blocks, block_size, 0, d.stream(), gen, data, size, dist) status: Internal: invalid resource handle&quot; error. At least, that&#39;s the case for me."}, {"owner": {"reputation": 486, "user_id": 6509922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b7ae46c10ea451f336b34d1d2dd005c?s=128&d=identicon&r=PG&f=1", "display_name": "Jed", "link": "https://stackoverflow.com/users/6509922/jed"}, "edited": false, "score": 2, "creation_date": 1604655054, "post_id": 60354785, "comment_id": 114418895, "body": "perhaps by bad state, he means that this kills the kernel. this cannot be done in the midst of long processes"}], "tags": [], "owner": {"reputation": 146, "user_id": 8462333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3LRWg-sBmj0/AAAAAAAAAAI/AAAAAAAAAJM/sFeU_hstnww/photo.jpg?sz=128", "display_name": "hitesh kumar", "link": "https://stackoverflow.com/users/8462333/hitesh-kumar"}, "is_accepted": false, "score": 9, "last_activity_date": 1596207014, "last_edit_date": 1596207014, "creation_date": 1582392255, "answer_id": 60354785, "question_id": 39758094, "link": "https://stackoverflow.com/questions/39758094/clearing-tensorflow-gpu-memory-after-model-execution/60354785#60354785", "title": "Clearing Tensorflow GPU memory after model execution", "body": "<p>You can use numba library to release all the gpu memory</p>\n<pre class=\"lang-sh prettyprint-override\"><code>pip install numba \n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code>from numba import cuda \ndevice = cuda.get_current_device()\ndevice.reset()\n</code></pre>\n<p>This will release all the memory</p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 7377044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/805c33a2d2765f49795908e46b605c49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Chen", "link": "https://stackoverflow.com/users/7377044/mike-chen"}, "edited": false, "score": 0, "creation_date": 1596630079, "post_id": 63260353, "comment_id": 111871931, "body": "My test shows that numba is a better choice. However, users need to use pip install numba rather than conda install -c numba mumba or sudo apt-get install python-3 numba.  conda install... has an internal conflict and sudo apt-get install..could not be used."}], "tags": [], "owner": {"reputation": 141, "user_id": 7377044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/805c33a2d2765f49795908e46b605c49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Chen", "link": "https://stackoverflow.com/users/7377044/mike-chen"}, "is_accepted": false, "score": 2, "last_activity_date": 1596614228, "last_edit_date": 1596614228, "creation_date": 1596612497, "answer_id": 63260353, "question_id": 39758094, "link": "https://stackoverflow.com/questions/39758094/clearing-tensorflow-gpu-memory-after-model-execution/63260353#63260353", "title": "Clearing Tensorflow GPU memory after model execution", "body": "<p>I am figuring out which option is better in the Jupyter Notebook. Jupyter Notebook occupies the GPU memory permanently even a deep learning application is completed. It usually incurs the GPU Fan ERROR that is a big headache. In this condition, I have to reset nvidia_uvm and reboot the linux system regularly. I conclude the following two options can remove the headache of GPU Fan Error but want to know which is better.</p>\n<p><strong>Environment:</strong></p>\n<ul>\n<li>CUDA 11.0</li>\n<li>cuDNN 8.0.1</li>\n<li>TensorFlow 2.2</li>\n<li>Keras 2.4.3</li>\n<li>Jupyter Notebook 6.0.3</li>\n<li>Miniconda 4.8.3</li>\n<li>Ubuntu 18.04 LTS</li>\n</ul>\n<p><strong>First Option</strong></p>\n<p>Put the following code at the end of the cell. The kernel immediately ended upon the application runtime is completed. But it is not much elegant. Juputer will pop up a message for the died ended kernel.</p>\n<pre><code>import os\n \npid = os.getpid()\n!kill -9 $pid\n</code></pre>\n<p><strong>Section Option</strong></p>\n<p>The following code can also end the kernel with Jupyter Notebook. I do not know whether numba is secure. Nvidia prefers the &quot;0&quot; GPU that is the most used GPU by personal developer (not server guys). However, both Neil G and mradul dubey have had the response: This leaves the GPU in a bad state.</p>\n<pre><code>from numba import cuda\n\ncuda.select_device(0)\ncuda.close()\n</code></pre>\n<p>It seems that the second option is more elegant. Can some one confirm which is the best choice?</p>\n<p>Notes:</p>\n<p>It is not such the problem to automatically release the GPU memory in the environment of  Anaconda by direct executing &quot;$ python abc.py&quot;. However, I sometimes need to use Jyputer Notebook to handle .ipynb application.</p>\n"}], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67603, "favorite_count": 12, "accepted_answer_id": 44842044, "answer_count": 6, "score": 34, "last_activity_date": 1598325689, "creation_date": 1475098714, "question_id": 39758094, "link": "https://stackoverflow.com/questions/39758094/clearing-tensorflow-gpu-memory-after-model-execution", "title": "Clearing Tensorflow GPU memory after model execution", "body": "<p>I've trained 3 models and am now running code that loads each of the 3 checkpoints in sequence and runs predictions using them. I'm using the GPU.</p>\n\n<p>When the first model is loaded it pre-allocates the entire GPU memory (which I want for working through the first batch of data). But it doesn't unload memory when it's finished. When the second model is loaded, using both <code>tf.reset_default_graph()</code> and <code>with tf.Graph().as_default()</code> the GPU memory still is fully consumed from the first model, and the second model is then starved of memory.</p>\n\n<p>Is there a way to resolve this, other than using Python subprocesses or multiprocessing to work around the problem (the only solution I've found on via google searches)?</p>\n"}, {"tags": ["python", "mongodb", "pymongo", "mongoengine", "flask-mongoengine"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6765115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-ojDqKYap0ZE/AAAAAAAAAAI/AAAAAAAAA2g/KMRfC1QTeLI/photo.jpg?sz=128", "display_name": "Anurag Upadhyaya", "link": "https://stackoverflow.com/users/6765115/anurag-upadhyaya"}, "edited": false, "score": 0, "creation_date": 1587025672, "post_id": 39764540, "comment_id": 108348015, "body": "what&#39;s the fix to it, my version is <code>mongoengine==0.19.1</code> and <code>flask-mongoengine==0.9.5</code>"}], "tags": [], "owner": {"reputation": 417, "user_id": 4991991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/00da8c3b68b203db993337c263bf17c7?s=128&d=identicon&r=PG&f=1", "display_name": "Lokesh Meher", "link": "https://stackoverflow.com/users/4991991/lokesh-meher"}, "is_accepted": true, "score": 2, "last_activity_date": 1475135850, "creation_date": 1475135850, "answer_id": 39764540, "question_id": 39758077, "link": "https://stackoverflow.com/questions/39758077/cannot-connect-to-remote-mongodb-server-using-flask-mongoengine/39764540#39764540", "title": "Cannot connect to remote MongoDB server using flask-mongoengine", "body": "<p>I figured out that it's a bug in <a href=\"https://github.com/MongoEngine/flask-mongoengine\" rel=\"nofollow\">flask-mongoengine</a> version <code>0.8</code> and has beed reported <a href=\"https://github.com/MongoEngine/flask-mongoengine/issues/247\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 417, "user_id": 4991991, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/00da8c3b68b203db993337c263bf17c7?s=128&d=identicon&r=PG&f=1", "display_name": "Lokesh Meher", "link": "https://stackoverflow.com/users/4991991/lokesh-meher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1698, "favorite_count": 0, "accepted_answer_id": 39764540, "answer_count": 1, "score": 1, "last_activity_date": 1475135850, "creation_date": 1475098629, "last_edit_date": 1475099983, "question_id": 39758077, "link": "https://stackoverflow.com/questions/39758077/cannot-connect-to-remote-mongodb-server-using-flask-mongoengine", "title": "Cannot connect to remote MongoDB server using flask-mongoengine", "body": "<p>Trying to connect to a MongoDB cluster hosted on a remote server using flask-mongoengine but the following error is thrown:</p>\n\n<pre><code>File \"test.py\", line 9, in &lt;module&gt;\n    inserted = Something(some='whatever').save()\n  File \"/home/lokesh/Desktop/Work/Survaider_Apps/new_survaider/survaider-env/lib/python3.5/site-packages/mongoengine/document.py\", line 323, in save\n    object_id = collection.save(doc, **write_concern)\n  File \"/home/lokesh/Desktop/Work/Survaider_Apps/new_survaider/survaider-env/lib/python3.5/site-packages/pymongo/collection.py\", line 2186, in save\n    with self._socket_for_writes() as sock_info:\n  File \"/usr/lib/python3.5/contextlib.py\", line 59, in __enter__\n    return next(self.gen)\n  File \"/home/lokesh/Desktop/Work/Survaider_Apps/new_survaider/survaider-env/lib/python3.5/site-packages/pymongo/mongo_client.py\", line 762, in _get_socket\n    server = self._get_topology().select_server(selector)\n  File \"/home/lokesh/Desktop/Work/Survaider_Apps/new_survaider/survaider-env/lib/python3.5/site-packages/pymongo/topology.py\", line 210, in select_server\n    address))\n  File \"/home/lokesh/Desktop/Work/Survaider_Apps/new_survaider/survaider-env/lib/python3.5/site-packages/pymongo/topology.py\", line 186, in select_servers\n    self._error_message(selector))\npymongo.errors.ServerSelectionTimeoutError: admin:27017: [Errno -2] Name or service not known\n</code></pre>\n\n<p>Below is the code I am using:</p>\n\n<pre><code># test.py\n\nfrom my_app_module import app\nfrom flask_mongoengine import MongoEngine\n\ndb = MongoEngine(app)\n\nclass Something(db.Document):\n    some = db.StringField()\n\ninserted = Something(some='whatever').save()\n\nprint(inserted)\nfor obj in Something.objects:\n    print(obj)\n</code></pre>\n\n<p>My <code>config.py</code> file contains:</p>\n\n<pre><code># config.py\n\nMONGODB_SETTINGS = {\n    'db': 'testdb',\n    'host': 'mongodb://&lt;my_username&gt;:&lt;my_password&gt;@&lt;my_cluster_replica_1&gt;.mongodb.net:27017,&lt;my_cluster_replica_2&gt;.mongodb.net:27017,&lt;my_cluster_replica_3&gt;.mongodb.net:27017/admin?ssl=true&amp;replicaSet=&lt;my_cluster&gt;&amp;authSource=admin',\n}\n</code></pre>\n\n<p>But I can connect using <code>pymongo</code> using the following code.</p>\n\n<pre><code>from pymongo import MongoClient\n\nuri = 'mongodb://&lt;my_username&gt;:&lt;my_password&gt;@&lt;my_cluster_replica_1&gt;.mongodb.net:27017,&lt;my_cluster_replica_2&gt;.mongodb.net:27017,&lt;my_cluster_replica_3&gt;.mongodb.net:27017/admin?ssl=true&amp;replicaSet=&lt;my_cluster&gt;&amp;authSource=admin'\n\nclient = MongoClient(uri)\ndb = client['testdb']\n\ndb.test_collection.insert({'some_key': 'some_value'})\n\nfor col in db.test_collection.find():\n    print(col)\n\n# Prints {'some_key': 'some_value', '_id': ObjectId('57ec35d9312f911329e54d5e')}\n</code></pre>\n\n<p>I tried to find a solution but nobody seems to have come across the problem before. I am using MongoDB's Atlas solution to host the MongoDB cluster.</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql", "pyspark-dataframes"], "answers": [{"comments": [{"owner": {"reputation": 612, "user_id": 6828263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a917ba89aba59feadac4b6ec251f15?s=128&d=identicon&r=PG&f=1", "display_name": "Allan Feliph", "link": "https://stackoverflow.com/users/6828263/allan-feliph"}, "edited": false, "score": 0, "creation_date": 1475164362, "post_id": 39758966, "comment_id": 66843936, "body": "I&#39;m running exactly the same command and the columns are not in the same order, when I run the union values are wrong"}, {"owner": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "edited": false, "score": 0, "creation_date": 1475165180, "post_id": 39758966, "comment_id": 66844454, "body": "Interestingly, in spark 1.5.2 it seems that the order matters (I believe It shouldn&#39;t). However, I think that your columns should have the same order as <code>total</code> (see the map in <code>expr</code>)."}, {"owner": {"reputation": 1924, "user_id": 1607185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/BtKvH.jpg?s=128&g=1", "display_name": "Michel Lemay", "link": "https://stackoverflow.com/users/1607185/michel-lemay"}, "edited": false, "score": 3, "creation_date": 1496339340, "post_id": 39758966, "comment_id": 75633662, "body": "Column order matters. See <a href=\"https://issues.apache.org/jira/browse/SPARK-20660\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/SPARK-20660</a>"}, {"owner": {"reputation": 726, "user_id": 1192987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMkOD.jpg?s=128&g=1", "display_name": "Nikita Bosik", "link": "https://stackoverflow.com/users/1192987/nikita-bosik"}, "edited": false, "score": 4, "creation_date": 1516024505, "post_id": 39758966, "comment_id": 83511612, "body": "<code>unionAll()</code> has been deprecated since 2.0.0 in favor of <code>union()</code>"}, {"owner": {"reputation": 451, "user_id": 4789626, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ko4mx.jpg?s=128&g=1", "display_name": "ankush reddy", "link": "https://stackoverflow.com/users/4789626/ankush-reddy"}, "edited": false, "score": 1, "creation_date": 1537288455, "post_id": 39758966, "comment_id": 91727130, "body": "Hi Is there any python way of implementation. This looks relatively easy when compared to the other solutions provided for the post."}, {"owner": {"reputation": 796, "user_id": 4792175, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/860160017390069/picture?type=large", "display_name": "Ajay Aradhya", "link": "https://stackoverflow.com/users/4792175/ajay-aradhya"}, "edited": false, "score": 0, "creation_date": 1553058853, "post_id": 39758966, "comment_id": 97239962, "body": "Error : Cannot resolve symbol col. Should i be importing anything?"}, {"owner": {"reputation": 796, "user_id": 4792175, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/860160017390069/picture?type=large", "display_name": "Ajay Aradhya", "link": "https://stackoverflow.com/users/4792175/ajay-aradhya"}, "edited": false, "score": 0, "creation_date": 1553059770, "post_id": 39758966, "comment_id": 97240211, "body": "import org.apache.spark.sql.functions.col"}, {"owner": {"reputation": 396, "user_id": 11590582, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zifHXDz8a1U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfd794mZYdxeK6qlYXunprs6uOFiA/mo/photo.jpg?sz=128", "display_name": "Learnis", "link": "https://stackoverflow.com/users/11590582/learnis"}, "edited": false, "score": 0, "creation_date": 1594050507, "post_id": 39758966, "comment_id": 110984011, "body": "You should use unionByName to match the column names"}], "tags": [], "owner": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "is_accepted": true, "score": 54, "last_activity_date": 1475165673, "last_edit_date": 1475165673, "creation_date": 1475103987, "answer_id": 39758966, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/39758966#39758966", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>In Scala you just have to append all missing columns as <code>nulls</code>.</p>\n\n\n\n<pre class=\"lang-scala prettyprint-override\"><code>import org.apache.spark.sql.functions._\n\n// let df1 and df2 the Dataframes to merge\nval df1 = sc.parallelize(List(\n  (50, 2),\n  (34, 4)\n)).toDF(\"age\", \"children\")\n\nval df2 = sc.parallelize(List(\n  (26, true, 60000.00),\n  (32, false, 35000.00)\n)).toDF(\"age\", \"education\", \"income\")\n\nval cols1 = df1.columns.toSet\nval cols2 = df2.columns.toSet\nval total = cols1 ++ cols2 // union\n\ndef expr(myCols: Set[String], allCols: Set[String]) = {\n  allCols.toList.map(x =&gt; x match {\n    case x if myCols.contains(x) =&gt; col(x)\n    case _ =&gt; lit(null).as(x)\n  })\n}\n\ndf1.select(expr(cols1, total):_*).unionAll(df2.select(expr(cols2, total):_*)).show()\n\n+---+--------+---------+-------+\n|age|children|education| income|\n+---+--------+---------+-------+\n| 50|       2|     null|   null|\n| 34|       4|     null|   null|\n| 26|    null|     true|60000.0|\n| 32|    null|    false|35000.0|\n+---+--------+---------+-------+\n</code></pre>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Both temporal <code>DataFrames</code> will have the same order of columns, because we are mapping through <code>total</code> in both cases.</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>df1.select(expr(cols1, total):_*).show()\ndf2.select(expr(cols2, total):_*).show()\n\n+---+--------+---------+------+\n|age|children|education|income|\n+---+--------+---------+------+\n| 50|       2|     null|  null|\n| 34|       4|     null|  null|\n+---+--------+---------+------+\n\n+---+--------+---------+-------+\n|age|children|education| income|\n+---+--------+---------+-------+\n| 26|    null|     true|60000.0|\n| 32|    null|    false|35000.0|\n+---+--------+---------+-------+\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10563, "user_id": 189336, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7543066b996b2053a554951bfeae16b0?s=128&d=identicon&r=PG", "display_name": "conradlee", "link": "https://stackoverflow.com/users/189336/conradlee"}, "edited": false, "score": 1, "creation_date": 1478186971, "post_id": 40403773, "comment_id": 68061086, "body": "Strangely when I run this I get a <code>pyspark.sql.utils.AnalysisException: u&quot;unresolved operator &#39;Union;&quot;</code>.  This seems to be some kind of spark bug--maybe someone else knows what&#39;s going on?"}, {"owner": {"reputation": 665, "user_id": 1928660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rnpOq.png?s=128&g=1", "display_name": "ATN", "link": "https://stackoverflow.com/users/1928660/atn"}, "edited": false, "score": 0, "creation_date": 1478710339, "post_id": 40403773, "comment_id": 68266092, "body": "Try setting your context <code>sqlCtx.sql(&quot;SET spark.sql.parquet.binaryAsString=true&quot;)</code>, it solved my problem"}, {"owner": {"reputation": 2787, "user_id": 3656912, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4TOOK.jpg?s=128&g=1", "display_name": "Romeo Kienzler", "link": "https://stackoverflow.com/users/3656912/romeo-kienzler"}, "edited": false, "score": 0, "creation_date": 1507186216, "post_id": 40403773, "comment_id": 80111763, "body": "@conradlee just fyi - union replaced unionAll since Spark v2.0 - so maybe you are on Spark &lt; v2.0?"}, {"owner": {"reputation": 6777, "user_id": 1322962, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/1Iet2.jpg?s=128&g=1", "display_name": "AlexLordThorsen", "link": "https://stackoverflow.com/users/1322962/alexlordthorsen"}, "edited": false, "score": 0, "creation_date": 1533339502, "post_id": 40403773, "comment_id": 90325509, "body": "In the second for loop don&#39;t you mean <code>l_type = left_type[r_name]</code> instead of <code>l_type = right_types[r_name]</code>?"}, {"owner": {"reputation": 6777, "user_id": 1322962, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/1Iet2.jpg?s=128&g=1", "display_name": "AlexLordThorsen", "link": "https://stackoverflow.com/users/1322962/alexlordthorsen"}, "edited": false, "score": 0, "creation_date": 1533667671, "post_id": 40403773, "comment_id": 90427712, "body": "I ran into a second problem with this solution in that the columns need to be ordered as well. =("}, {"owner": {"reputation": 10563, "user_id": 189336, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7543066b996b2053a554951bfeae16b0?s=128&d=identicon&r=PG", "display_name": "conradlee", "link": "https://stackoverflow.com/users/189336/conradlee"}, "reply_to_user": {"reputation": 6777, "user_id": 1322962, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/1Iet2.jpg?s=128&g=1", "display_name": "AlexLordThorsen", "link": "https://stackoverflow.com/users/1322962/alexlordthorsen"}, "edited": false, "score": 0, "creation_date": 1533710496, "post_id": 40403773, "comment_id": 90440211, "body": "@AlexLordThorsen -- sorry I wasn&#39;t able to test this code,  I just sketched out what the overall approach should be -- I really should have mentioned that. I&#39;ve updated the answer to note that.  were you able to modify this code to get it to work?  if so, can you let me know what I need to change?"}, {"owner": {"reputation": 6777, "user_id": 1322962, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/1Iet2.jpg?s=128&g=1", "display_name": "AlexLordThorsen", "link": "https://stackoverflow.com/users/1322962/alexlordthorsen"}, "edited": false, "score": 0, "creation_date": 1533711792, "post_id": 40403773, "comment_id": 90440879, "body": "@conradlee I was planning on making the changes today but I didn&#39;t get to it. I&#39;ll ping you when I do."}, {"owner": {"reputation": 1441, "user_id": 7116108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dde0241609cdf83ef463cc154c14c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/7116108/dan"}, "edited": false, "score": 0, "creation_date": 1539703862, "post_id": 40403773, "comment_id": 92594078, "body": "I just stumbled upon this problem, and as AlexLordThorsen suggests, this solution only works if the columns are ordered. A fix would be to add this before the return statement: <code>df_left = df_left.select(sorted(df_left.columns))</code> and <code>df_right = df_right.select(sorted(df_right.columns))</code>"}, {"owner": {"reputation": 10563, "user_id": 189336, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7543066b996b2053a554951bfeae16b0?s=128&d=identicon&r=PG", "display_name": "conradlee", "link": "https://stackoverflow.com/users/189336/conradlee"}, "reply_to_user": {"reputation": 1441, "user_id": 7116108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dde0241609cdf83ef463cc154c14c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/7116108/dan"}, "edited": false, "score": 0, "creation_date": 1539765321, "post_id": 40403773, "comment_id": 92616699, "body": "thanks @Dan I&#39;ve added a line (the second-to-last line) to the code that ensures the columns are in the same order.  I&#39;ve avoided doing any sorting because I think the only important thing is that the orders are same--they don&#39;t need to be sorted.  Let me know what you think I haven&#39;t tested this yet(!) as I don&#39;t have a spark environment handy at the moment."}, {"owner": {"reputation": 1441, "user_id": 7116108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dde0241609cdf83ef463cc154c14c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/7116108/dan"}, "edited": false, "score": 0, "creation_date": 1539869346, "post_id": 40403773, "comment_id": 92663788, "body": "@conradlee just tested and yes your addition seems to work! thanks"}, {"owner": {"reputation": 10563, "user_id": 189336, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7543066b996b2053a554951bfeae16b0?s=128&d=identicon&r=PG", "display_name": "conradlee", "link": "https://stackoverflow.com/users/189336/conradlee"}, "reply_to_user": {"reputation": 1441, "user_id": 7116108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dde0241609cdf83ef463cc154c14c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/7116108/dan"}, "edited": false, "score": 0, "creation_date": 1539930565, "post_id": 40403773, "comment_id": 92686706, "body": "@Dan thanks!  I&#39;ll remove the disclaimers about the code not being tested."}], "tags": [], "owner": {"reputation": 10563, "user_id": 189336, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7543066b996b2053a554951bfeae16b0?s=128&d=identicon&r=PG", "display_name": "conradlee", "link": "https://stackoverflow.com/users/189336/conradlee"}, "is_accepted": false, "score": 10, "last_activity_date": 1552416583, "last_edit_date": 1552416583, "creation_date": 1478182410, "answer_id": 40403773, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/40403773#40403773", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>Here's a pyspark solution.  </p>\n\n<p>It assumes that if a field in <code>df1</code> is missing from <code>df2</code>, then you add that missing field to <code>df2</code> with null values.  However it also assumes that if the field exists in both dataframes, but the type or nullability of the field is different, then the two dataframes conflict and cannot be combined.  In that case I raise a <code>TypeError</code>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.functions import lit\n\ndef harmonize_schemas_and_combine(df_left, df_right):\n    left_types = {f.name: f.dataType for f in df_left.schema}\n    right_types = {f.name: f.dataType for f in df_right.schema}\n    left_fields = set((f.name, f.dataType, f.nullable) for f in df_left.schema)\n    right_fields = set((f.name, f.dataType, f.nullable) for f in df_right.schema)\n\n    # First go over left-unique fields\n    for l_name, l_type, l_nullable in left_fields.difference(right_fields):\n        if l_name in right_types:\n            r_type = right_types[l_name]\n            if l_type != r_type:\n                raise TypeError, \"Union failed. Type conflict on field %s. left type %s, right type %s\" % (l_name, l_type, r_type)\n            else:\n                raise TypeError, \"Union failed. Nullability conflict on field %s. left nullable %s, right nullable %s\"  % (l_name, l_nullable, not(l_nullable))\n        df_right = df_right.withColumn(l_name, lit(None).cast(l_type))\n\n    # Now go over right-unique fields\n    for r_name, r_type, r_nullable in right_fields.difference(left_fields):\n        if r_name in left_types:\n            l_type = left_types[r_name]\n            if r_type != l_type:\n                raise TypeError, \"Union failed. Type conflict on field %s. right type %s, left type %s\" % (r_name, r_type, l_type)\n            else:\n                raise TypeError, \"Union failed. Nullability conflict on field %s. right nullable %s, left nullable %s\" % (r_name, r_nullable, not(r_nullable))\n        df_left = df_left.withColumn(r_name, lit(None).cast(r_type))    \n\n    # Make sure columns are in the same order\n    df_left = df_left.select(df_right.columns)\n\n    return df_left.union(df_right)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 726, "user_id": 1192987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMkOD.jpg?s=128&g=1", "display_name": "Nikita Bosik", "link": "https://stackoverflow.com/users/1192987/nikita-bosik"}, "edited": false, "score": 6, "creation_date": 1516025081, "post_id": 42972088, "comment_id": 83511917, "body": "<code>unionAll()</code> has been deprecated since 2.0.0 in favor of <code>union()</code>"}, {"owner": {"reputation": 726, "user_id": 1192987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMkOD.jpg?s=128&g=1", "display_name": "Nikita Bosik", "link": "https://stackoverflow.com/users/1192987/nikita-bosik"}, "edited": false, "score": 1, "creation_date": 1516105343, "post_id": 42972088, "comment_id": 83545755, "body": "Second: for me, <code>lit(None)</code> fails with <b>RuntimeException: Unsupported literal type class scala.None$ None</b>, so I had to change it to <code>lit(null)</code>"}], "tags": [], "owner": {"reputation": 1691, "user_id": 1956859, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7RV0j.jpg?s=128&g=1", "display_name": "Rags", "link": "https://stackoverflow.com/users/1956859/rags"}, "is_accepted": false, "score": 15, "last_activity_date": 1490261604, "creation_date": 1490261604, "answer_id": 42972088, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/42972088#42972088", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>A very simple way to do this - <code>select</code> the columns in the same order from both the dataframes and use <code>unionAll</code></p>\n\n<pre><code>df1.select('code', 'date', 'A', 'B', 'C', lit(None).alias('D'), lit(None).alias('E'))\\\n   .unionAll(df2.select('code', 'date', lit(None).alias('A'), 'B', 'C', 'D', 'E'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 7043716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2203bf6dad6ba8a378c5413e89c77c34?s=128&d=identicon&r=PG", "display_name": "drkostas", "link": "https://stackoverflow.com/users/7043716/drkostas"}, "is_accepted": false, "score": 4, "last_activity_date": 1508630493, "creation_date": 1508630493, "answer_id": 46869280, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/46869280#46869280", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>I had the same issue and using join instead of union solved my problem.\nSo, for example with <strong>python</strong> , instead of this line of code:\n<code>result = left.union(right)</code>, which will fail to execute for different number of columns,\nyou should use this one:</p>\n\n<pre><code>result = left.join(right, left.columns if (len(left.columns) &lt; len(right.columns)) else right.columns, \"outer\")\n</code></pre>\n\n<p>Note that the second argument contains the common columns between the two DataFrames. If you don't use it, the result will have duplicate columns with one of them being null and the other not.\nHope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 2361, "user_id": 1241540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5j8Zu.png?s=128&g=1", "display_name": "swdev", "link": "https://stackoverflow.com/users/1241540/swdev"}, "edited": false, "score": 0, "creation_date": 1521831724, "post_id": 48484652, "comment_id": 85916320, "body": "I had to remove <code>.rdd</code> from the code to get it to work. (Spark 1.6). But works fine with that change but doesn&#39;t seem to preserve the column ordering."}], "tags": [], "owner": {"reputation": 4982, "user_id": 724109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb245f679b7762217c478e66b3496591?s=128&d=identicon&r=PG", "display_name": "Avishek Bhattacharya", "link": "https://stackoverflow.com/users/724109/avishek-bhattacharya"}, "is_accepted": false, "score": 4, "last_activity_date": 1517129395, "creation_date": 1517129395, "answer_id": 48484652, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/48484652#48484652", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>There is much concise way to handle this issue with a moderate sacrifice of performance.</p>\n\n<pre><code>def unionWithDifferentSchema(a: DataFrame, b: DataFrame): DataFrame = {\n    sparkSession.read.json(a.toJSON.union(b.toJSON).rdd)\n}\n</code></pre>\n\n<p>This is the function which does the trick. Using toJSON to each dataframe makes a json Union. This preserves the ordering and the datatype.</p>\n\n<p>Only catch is toJSON is relatively expensive (however not much you probably get 10-15% slowdown). However this keeps the code clean.</p>\n"}, {"tags": [], "owner": {"reputation": 2361, "user_id": 1241540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5j8Zu.png?s=128&g=1", "display_name": "swdev", "link": "https://stackoverflow.com/users/1241540/swdev"}, "is_accepted": false, "score": 7, "last_activity_date": 1523558610, "creation_date": 1523558610, "answer_id": 49803833, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/49803833#49803833", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>Modified Alberto Bonsanto's version to preserve the original column order (OP implied the order should match the original tables). Also, the <code>match</code> part caused an Intellij warning. </p>\n\n<p>Here's my version:</p>\n\n<pre><code>def unionDifferentTables(df1: DataFrame, df2: DataFrame): DataFrame = {\n\n  val cols1 = df1.columns.toSet\n  val cols2 = df2.columns.toSet\n  val total = cols1 ++ cols2 // union\n\n  val order = df1.columns ++  df2.columns\n  val sorted = total.toList.sortWith((a,b)=&gt; order.indexOf(a) &lt; order.indexOf(b))\n\n  def expr(myCols: Set[String], allCols: List[String]) = {\n      allCols.map( {\n        case x if myCols.contains(x) =&gt; col(x)\n        case y =&gt; lit(null).as(y)\n      })\n  }\n\n  df1.select(expr(cols1, sorted): _*).unionAll(df2.select(expr(cols2, sorted): _*))\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 679, "user_id": 4510219, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VFMC9.jpg?s=128&g=1", "display_name": "Shubham Sharma", "link": "https://stackoverflow.com/users/4510219/shubham-sharma"}, "edited": false, "score": 0, "creation_date": 1601029666, "post_id": 50665187, "comment_id": 113283506, "body": "Ah here we go again, having 0 clues about Python, Glue, Spark just copy pasting stuff and making stuff work."}], "tags": [], "owner": {"reputation": 199, "user_id": 9887716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eli B", "link": "https://stackoverflow.com/users/9887716/eli-b"}, "is_accepted": false, "score": 18, "last_activity_date": 1572488535, "last_edit_date": 1572488535, "creation_date": 1528020116, "answer_id": 50665187, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/50665187#50665187", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>Here is the code for Python 3.0 using pyspark:</p>\n\n<pre><code>from pyspark.sql.functions import lit\n\n\ndef __order_df_and_add_missing_cols(df, columns_order_list, df_missing_fields):\n    \"\"\" return ordered dataFrame by the columns order list with null in missing columns \"\"\"\n    if not df_missing_fields:  # no missing fields for the df\n        return df.select(columns_order_list)\n    else:\n        columns = []\n        for colName in columns_order_list:\n            if colName not in df_missing_fields:\n                columns.append(colName)\n            else:\n                columns.append(lit(None).alias(colName))\n        return df.select(columns)\n\n\ndef __add_missing_columns(df, missing_column_names):\n    \"\"\" Add missing columns as null in the end of the columns list \"\"\"\n    list_missing_columns = []\n    for col in missing_column_names:\n        list_missing_columns.append(lit(None).alias(col))\n\n    return df.select(df.schema.names + list_missing_columns)\n\n\ndef __order_and_union_d_fs(left_df, right_df, left_list_miss_cols, right_list_miss_cols):\n    \"\"\" return union of data frames with ordered columns by left_df. \"\"\"\n    left_df_all_cols = __add_missing_columns(left_df, left_list_miss_cols)\n    right_df_all_cols = __order_df_and_add_missing_cols(right_df, left_df_all_cols.schema.names,\n                                                        right_list_miss_cols)\n    return left_df_all_cols.union(right_df_all_cols)\n\n\ndef union_d_fs(left_df, right_df):\n    \"\"\" Union between two dataFrames, if there is a gap of column fields,\n     it will append all missing columns as nulls \"\"\"\n    # Check for None input\n    if left_df is None:\n        raise ValueError('left_df parameter should not be None')\n    if right_df is None:\n        raise ValueError('right_df parameter should not be None')\n        # For data frames with equal columns and order- regular union\n    if left_df.schema.names == right_df.schema.names:\n        return left_df.union(right_df)\n    else:  # Different columns\n        # Save dataFrame columns name list as set\n        left_df_col_list = set(left_df.schema.names)\n        right_df_col_list = set(right_df.schema.names)\n        # Diff columns between left_df and right_df\n        right_list_miss_cols = list(left_df_col_list - right_df_col_list)\n        left_list_miss_cols = list(right_df_col_list - left_df_col_list)\n        return __order_and_union_d_fs(left_df, right_df, left_list_miss_cols, right_list_miss_cols)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 568, "user_id": 10093840, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-m8JHHHgLXgU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p9_XazNr3P-9rZPYYWQ41VODus6A/mo/photo.jpg?sz=128", "display_name": "Yosi Hammer", "link": "https://stackoverflow.com/users/10093840/yosi-hammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1541708273, "creation_date": 1541708273, "answer_id": 53215507, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/53215507#53215507", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>here's another one:</p>\n\n<pre><code>def unite(df1: DataFrame, df2: DataFrame): DataFrame = {\n    val cols1 = df1.columns.toSet\n    val cols2 = df2.columns.toSet\n    val total = (cols1 ++ cols2).toSeq.sorted\n    val expr1 = total.map(c =&gt; {\n      if (cols1.contains(c)) c else \"NULL as \" + c\n    })\n    val expr2 = total.map(c =&gt; {\n      if (cols2.contains(c)) c else \"NULL as \" + c\n    })\n    df1.selectExpr(expr1:_*).union(\n      df2.selectExpr(expr2:_*)\n    )\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 1983682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/772747990c2aba7fd1df0fee38eb05af?s=128&d=identicon&r=PG", "display_name": "user1983682", "link": "https://stackoverflow.com/users/1983682/user1983682"}, "edited": false, "score": 1, "creation_date": 1580343520, "post_id": 55461824, "comment_id": 106070456, "body": "This is an awesome solution!  Thank you for sharing!"}, {"owner": {"reputation": 356, "user_id": 3661384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d1b29c3835e94724a20559906e6712b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3661384", "link": "https://stackoverflow.com/users/3661384/user3661384"}, "edited": false, "score": 0, "creation_date": 1617273926, "post_id": 55461824, "comment_id": 118261493, "body": "Great solution. Thank you for this"}], "tags": [], "owner": {"reputation": 111, "user_id": 2102359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b4f9df00c472853e5317a1e1a11c14?s=128&d=identicon&r=PG", "display_name": "user2102359", "link": "https://stackoverflow.com/users/2102359/user2102359"}, "is_accepted": false, "score": 11, "last_activity_date": 1554145108, "creation_date": 1554145108, "answer_id": 55461824, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/55461824#55461824", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>Here is my Python version:</p>\n\n<pre><code>from pyspark.sql import SparkSession, HiveContext\nfrom pyspark.sql.functions import lit\nfrom pyspark.sql import Row\n\ndef customUnion(df1, df2):\n    cols1 = df1.columns\n    cols2 = df2.columns\n    total_cols = sorted(cols1 + list(set(cols2) - set(cols1)))\n    def expr(mycols, allcols):\n        def processCols(colname):\n            if colname in mycols:\n                return colname\n            else:\n                return lit(None).alias(colname)\n        cols = map(processCols, allcols)\n        return list(cols)\n    appended = df1.select(expr(cols1, total_cols)).union(df2.select(expr(cols2, total_cols)))\n    return appended\n</code></pre>\n\n<p>Here is sample usage:</p>\n\n<pre><code>data = [\n    Row(zip_code=58542, dma='MIN'),\n    Row(zip_code=58701, dma='MIN'),\n    Row(zip_code=57632, dma='MIN'),\n    Row(zip_code=58734, dma='MIN')\n]\n\nfirstDF = spark.createDataFrame(data)\n\ndata = [\n    Row(zip_code='534', name='MIN'),\n    Row(zip_code='353', name='MIN'),\n    Row(zip_code='134', name='MIN'),\n    Row(zip_code='245', name='MIN')\n]\n\nsecondDF = spark.createDataFrame(data)\n\ncustomUnion(firstDF,secondDF).show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 529, "user_id": 2913884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RJWcI.jpg?s=128&g=1", "display_name": "aysa", "link": "https://stackoverflow.com/users/2913884/aysa"}, "is_accepted": false, "score": 1, "last_activity_date": 1563302609, "last_edit_date": 1563302609, "creation_date": 1563298695, "answer_id": 57062747, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/57062747#57062747", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>Union and outer union for Pyspark DataFrame concatenation. This works for multiple data frames with different columns.</p>\n\n<pre><code>def union_all(*dfs):\n    return reduce(ps.sql.DataFrame.unionAll, dfs)\n\ndef outer_union_all(*dfs):\n\n    all_cols = set([])\n    for df in dfs:\n        all_cols |= set(df.columns) \n    all_cols = list(all_cols)\n    print(all_cols)\n\n    def expr(cols, all_cols):\n\n        def append_cols(col):\n            if col in cols:\n                return col\n            else:\n                return sqlfunc.lit(None).alias(col)\n\n        cols_ = map(append_cols, all_cols)\n        return list(cols_)\n\n    union_df = union_all(*[df.select(expr(df.columns, all_cols)) for df in dfs])\n    return union_df\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10209, "user_id": 1637673, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/102059d423f2265e737117ce0947e7ee?s=128&d=identicon&r=PG", "display_name": "Mithril", "link": "https://stackoverflow.com/users/1637673/mithril"}, "is_accepted": false, "score": 0, "last_activity_date": 1580804893, "creation_date": 1580804893, "answer_id": 60053307, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/60053307#60053307", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>This is my pyspark version:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from functools import reduce\nfrom pyspark.sql.functions import lit\n\ndef concat(dfs):\n    # when the dataframes to combine do not have the same order of columns\n    # https://datascience.stackexchange.com/a/27231/15325\n    return reduce(lambda df1, df2: df1.union(df2.select(df1.columns)), dfs) \n\ndef union_all(dfs):\n    columns = reduce(lambda x, y : set(x).union(set(y)), [ i.columns for i in dfs ]  )\n\n    for i in range(len(dfs)):\n        d = dfs[i]\n        for c in columns:\n            if c not in d.columns:\n                d = d.withColumn(c, lit(None))\n        dfs[i] = d\n\n    return concat(dfs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 9445912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2415019b220715368e3803d33f1ee3c9?s=128&d=identicon&r=PG&f=1", "display_name": "ValaravausBlack", "link": "https://stackoverflow.com/users/9445912/valaravausblack"}, "is_accepted": false, "score": 3, "last_activity_date": 1598847582, "last_edit_date": 1598847582, "creation_date": 1584898280, "answer_id": 60802676, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/60802676#60802676", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>Here's the version in Scala also answered here, Also a Pyspark version..\n( <a href=\"https://stackoverflow.com/questions/60701190/spark-merge-union-dataframe-with-different-schema-column-names-and-sequence/60702657#60702657\">Spark - Merge / Union DataFrame with Different Schema (column names and sequence) to a DataFrame with Master common schema</a> ) -</p>\n<p>It takes List of dataframe to be unioned .. Provided same named columns in all the dataframe should have same datatype..</p>\n<pre><code>def unionPro(DFList: List[DataFrame], spark: org.apache.spark.sql.SparkSession): DataFrame = {\n\n    /**\n     * This Function Accepts DataFrame with same or Different Schema/Column Order.With some or none common columns\n     * Creates a Unioned DataFrame\n     */\n\n    import spark.implicits._\n\n    val MasterColList: Array[String] = DFList.map(_.columns).reduce((x, y) =&gt; (x.union(y))).distinct\n\n    def unionExpr(myCols: Seq[String], allCols: Seq[String]): Seq[org.apache.spark.sql.Column] = {\n      allCols.toList.map(x =&gt; x match {\n        case x if myCols.contains(x) =&gt; col(x)\n        case _                       =&gt; lit(null).as(x)\n      })\n    }\n\n    // Create EmptyDF , ignoring different Datatype in StructField and treating them same based on Name ignoring cases\n\n    val masterSchema = StructType(DFList.map(_.schema.fields).reduce((x, y) =&gt; (x.union(y))).groupBy(_.name.toUpperCase).map(_._2.head).toArray)\n\n    val masterEmptyDF = spark.createDataFrame(spark.sparkContext.emptyRDD[Row], masterSchema).select(MasterColList.head, MasterColList.tail: _*)\n\n    DFList.map(df =&gt; df.select(unionExpr(df.columns, MasterColList): _*)).foldLeft(masterEmptyDF)((x, y) =&gt; x.union(y))\n\n  }\n\n</code></pre>\n<p>Here is the sample test for it -</p>\n<pre><code>\n    val aDF = Seq((&quot;A&quot;, 1), (&quot;B&quot;, 2)).toDF(&quot;Name&quot;, &quot;ID&quot;)\n    val bDF = Seq((&quot;C&quot;, 1, &quot;D1&quot;), (&quot;D&quot;, 2, &quot;D2&quot;)).toDF(&quot;Name&quot;, &quot;Sal&quot;, &quot;Deptt&quot;)\n    unionPro(List(aDF, bDF), spark).show\n\n</code></pre>\n<p>Which gives output as -</p>\n<pre><code>+----+----+----+-----+\n|Name|  ID| Sal|Deptt|\n+----+----+----+-----+\n|   A|   1|null| null|\n|   B|   2|null| null|\n|   C|null|   1|   D1|\n|   D|null|   2|   D2|\n+----+----+----+-----+\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 12209688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0242eb8c539b0aafd724906c90ed6578?s=128&d=identicon&r=PG&f=1", "display_name": "Belwal", "link": "https://stackoverflow.com/users/12209688/belwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1585323268, "last_edit_date": 1585323268, "creation_date": 1585098689, "answer_id": 60841674, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/60841674#60841674", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p><strong>One more generic method to union list of <code>DataFrame</code>.</strong></p>\n\n<pre><code>def unionFrames(dfs: Seq[DataFrame]): DataFrame = {\n    dfs match {\n      case Nil =&gt; session.emptyDataFrame // or throw an exception?\n      case x :: Nil =&gt; x\n      case _ =&gt;\n        //Preserving Column order from left to right DF's column order\n        val allColumns = dfs.foldLeft(collection.mutable.ArrayBuffer.empty[String])((a, b) =&gt; a ++ b.columns).distinct\n\n        val appendMissingColumns = (df: DataFrame) =&gt; {\n          val columns = df.columns.toSet\n          df.select(allColumns.map(c =&gt; if (columns.contains(c)) col(c) else lit(null).as(c)): _*)\n        }\n\n        dfs.tail.foldLeft(appendMissingColumns(dfs.head))((a, b) =&gt; a.union(appendMissingColumns(b)))\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3691397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0563632f058734f81a2d5a98cf2d21b3?s=128&d=identicon&r=PG&f=1", "display_name": "Serg Rubtsov", "link": "https://stackoverflow.com/users/3691397/serg-rubtsov"}, "is_accepted": false, "score": 1, "last_activity_date": 1587653673, "last_edit_date": 1587653673, "creation_date": 1585216744, "answer_id": 60864703, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/60864703#60864703", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>My version for Java:</p>\n\n<pre><code>    private static Dataset&lt;Row&gt; unionDatasets(Dataset&lt;Row&gt; one, Dataset&lt;Row&gt; another) {\n        StructType firstSchema = one.schema();\n        List&lt;String&gt; anotherFields = Arrays.asList(another.schema().fieldNames());\n        another = balanceDataset(another, firstSchema, anotherFields);\n        StructType secondSchema = another.schema();\n        List&lt;String&gt; oneFields = Arrays.asList(one.schema().fieldNames());\n        one = balanceDataset(one, secondSchema, oneFields);\n        return another.unionByName(one);\n    }\n\n    private static Dataset&lt;Row&gt; balanceDataset(Dataset&lt;Row&gt; dataset, StructType schema, List&lt;String&gt; fields) {\n        for (StructField e : schema.fields()) {\n            if (!fields.contains(e.name())) {\n                dataset = dataset\n                        .withColumn(e.name(),\n                                lit(null));\n                dataset = dataset.withColumn(e.name(),\n                        dataset.col(e.name()).cast(Optional.ofNullable(e.dataType()).orElse(StringType)));\n            }\n        }\n        return dataset;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1414, "user_id": 3757672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/miE8t.png?s=128&g=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/3757672/markus"}, "is_accepted": false, "score": 7, "last_activity_date": 1585588491, "last_edit_date": 1585588491, "creation_date": 1585584702, "answer_id": 60934726, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/60934726#60934726", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>I somehow find most of the python-answers here a bit too clunky in their writing if you're just going with the simple <code>lit(None)</code>-workaround (which is also the only way I know). As alternative this might be useful:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># df1 and df2 are assumed to be the given dataFrames from the question\n\n# Get the lacking columns for each dataframe and set them to null in the respective dataFrame.\n# First do so for df1...\nfor column in [column for column in df1.columns if column not in df2.columns]:\n    df1 = df1.withColumn(column, lit(None))\n\n# ... and then for df2\nfor column in [column for column in df2.columns if column not in df1.columns]:\n    df2 = df2.withColumn(column, lit(None))\n</code></pre>\n\n<p><br>\nAfterwards just do the <code>union()</code> you wanted to do.\n<br><strong>Caution</strong>: If your column-order differs between <code>df1</code> and <code>df2</code> use <code>unionByName()</code>!</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>result = df1.unionByName(df2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5136, "user_id": 2553191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e4f2ea35a69b90cd49c463281a1eeed7?s=128&d=identicon&r=PG", "display_name": "ehacinom", "link": "https://stackoverflow.com/users/2553191/ehacinom"}, "is_accepted": false, "score": 4, "last_activity_date": 1597341590, "creation_date": 1597341590, "answer_id": 63400789, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/63400789#63400789", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>in pyspark:</p>\n<pre><code>df = df1.join(df2, ['each', 'shared', 'col'], how='full')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 850, "user_id": 7252531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Imb0t.png?s=128&g=1", "display_name": "gbeaven", "link": "https://stackoverflow.com/users/7252531/gbeaven"}, "edited": false, "score": 0, "creation_date": 1616523400, "post_id": 64857381, "comment_id": 118027674, "body": "And what do you do if matching columns exist in some dfs but not all dfs? You would get ambiguous column names in your joined set."}], "tags": [], "owner": {"reputation": 31, "user_id": 14601817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d63123f83f7733b5e12b74313b7ac0?s=128&d=identicon&r=PG&f=1", "display_name": "LaTreb", "link": "https://stackoverflow.com/users/14601817/latreb"}, "is_accepted": false, "score": 0, "last_activity_date": 1605527091, "creation_date": 1605527091, "answer_id": 64857381, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/64857381#64857381", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>Alternate you could use full join.</p>\n<pre><code>list_of_files = ['test1.parquet', 'test2.parquet']\n\ndef merged_frames():\n  if list_of_files:\n    frames = [spark.read.parquet(df.path) for df in list_of_files]\n    if frames:\n      df = frames[0]\n      if frames[1]:\n        var = 1\n        for element in range(len(frames)-1):\n          result_df = df.join(frames[var], 'primary_key', how='full')\n          var += 1\n    display(result_df)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14743370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjW85poyx-JzahZPyUb5WkkS-eOaH4uquj1z3xl=k-s128", "display_name": "Lukas U-ski", "link": "https://stackoverflow.com/users/14743370/lukas-u-ski"}, "is_accepted": false, "score": 1, "last_activity_date": 1609328775, "last_edit_date": 1609328775, "creation_date": 1609328441, "answer_id": 65506382, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/65506382#65506382", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p><strong>PYSPARK</strong></p>\n<p>Scala version from Alberto works great. However, if you want to make a for-loop or some dynamic assignment of variables you can face some problems.\nSolution comes with Pyspark - clean code:</p>\n<pre><code>from pyspark.sql.functions import *\n\n#defining dataframes\ndf1 = spark.createDataFrame(\n    [\n        (1, 'foo','ok'), \n        (2, 'pro','ok')\n    ],\n    ['id', 'txt','check']\n)\n\ndf2 = spark.createDataFrame(\n    [\n        (3, 'yep',13,'mo'), \n        (4, 'bro',11,'re')\n        \n    ],\n    ['id', 'txt','value','more'] \n) \n\n#retrieving columns\ncols1 = df1.columns\ncols2 = df2.columns\n\n#getting columns from df1 and df2\ntotal = list(set(cols2) | set(cols1)) \n\n#defining function for adding nulls (None in case of pyspark)\ndef addnulls(yourDF): \n  for x in total:\n    if not x in yourDF.columns:\n      yourDF = yourDF.withColumn(x,lit(None))\n  return yourDF\n\ndf1 = addnulls(df1)\ndf2 = addnulls(df2)\n\n\n#additional sorting for correct unionAll (it concatenates DFs by column number)\ndf1.select(sorted(df1.columns)).unionAll(df2.select(sorted(df2.columns))).show()\n\n+-----+---+----+---+-----+\n|check| id|more|txt|value|\n+-----+---+----+---+-----+\n|   ok|  1|null|foo| null|\n|   ok|  2|null|pro| null|\n| null|  3|  mo|yep|   13|\n| null|  4|  re|bro|   11|\n+-----+---+----+---+-----+\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2330, "user_id": 12708583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9hXo.jpg?s=128&g=1", "display_name": "10 Rep", "link": "https://stackoverflow.com/users/12708583/10-rep"}, "edited": false, "score": 1, "creation_date": 1612291397, "post_id": 66013191, "comment_id": 116719395, "body": "Could you add clarification around this answer?"}, {"owner": {"reputation": 2429, "user_id": 594916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55d19990ceaa2f85a9196dc5e8f6ea7b?s=128&d=identicon&r=PG", "display_name": "Melanie Shebel", "link": "https://stackoverflow.com/users/594916/melanie-shebel"}, "edited": false, "score": 1, "creation_date": 1612305020, "post_id": 66013191, "comment_id": 116724521, "body": "While this code may provide a solution to the question, it&#39;s better to add context as to why/how it works. This can help future users learn and apply that knowledge to their own code. You are also likely to have positive-feedback/upvotes from users, when the code is explained."}, {"owner": {"reputation": 109, "user_id": 5042832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207337026526602/picture?type=large", "display_name": "Dung Tran", "link": "https://stackoverflow.com/users/5042832/dung-tran"}, "edited": false, "score": 0, "creation_date": 1613506531, "post_id": 66013191, "comment_id": 117094422, "body": "@blud I like this answer the most. it accounted for type. This answer should be higher. He explained well in his code comments."}], "tags": [], "owner": {"reputation": 21, "user_id": 14374890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa4df6c8216fafa7edbd14426a55ba7?s=128&d=identicon&r=PG&f=1", "display_name": "blud", "link": "https://stackoverflow.com/users/14374890/blud"}, "is_accepted": false, "score": 2, "last_activity_date": 1612346073, "last_edit_date": 1612346073, "creation_date": 1612281507, "answer_id": 66013191, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/66013191#66013191", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>This function takes in two dataframes (df1 and df2) with different schemas and unions them.\nFirst we need to bring them to the same schema by adding all (missing) columns from df1 to df2 and vice versa. To add a new empty column to a df we need to specify the datatype.</p>\n<pre><code>import pyspark.sql.functions as F\n    \ndef union_different_schemas(df1, df2):\n   # Get a list of all column names in both dfs\n   columns_df1 = df1.columns\n   columns_df2 = df2.columns\n   # Get a list of datatypes of the columns\n   data_types_df1 = [i.dataType for i in df1.schema.fields]\n   data_types_df2 = [i.dataType for i in df2.schema.fields]\n   # We go through all columns in df1 and if they are not in df2, we add \n   # them (and specify the correct datatype too)\n   for col, typ in zip(columns_df1, data_types_df1):\n      if col not in df2.columns:\n         df2 = df2\\\n            .withColumn(col, F.lit(None).cast(typ))\n   # Now df2 has all missing columns from df1, let's do the same for df1\n   for col, typ in zip(columns_df2, data_types_df2):\n      if col not in df1.columns:\n         df1 = df1\\\n            .withColumn(col, F.lit(None).cast(typ))\n   # Now df1 and df2 have the same columns, not necessarily in the same \n   # order, therefore we use unionByName\n   combined_df = df1\\\n      .unionByName(df2)\n\n   return combined_df\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 12894086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB994qXUkwPVuadD7qXKznFvtm0CDe3tk0AYQUH=k-s128", "display_name": "Naveen Anto", "link": "https://stackoverflow.com/users/12894086/naveen-anto"}, "is_accepted": false, "score": 0, "last_activity_date": 1612323174, "creation_date": 1612323174, "answer_id": 66020870, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/66020870#66020870", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>If you are loading from files, I guess you could just use the read function with a list of files.</p>\n<pre class=\"lang-py prettyprint-override\"><code>    # file_paths is list of files with different schema\n    df = spark.read.option(&quot;mergeSchema&quot;, &quot;true&quot;).json(file_paths)\n</code></pre>\n<p>The resulting dataframe will have merged columns.</p>\n"}, {"tags": [], "owner": {"reputation": 8006, "user_id": 2753501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0a5ac280a03c3a9d89488dc33f0ef075?s=128&d=identicon&r=PG&f=1", "display_name": "ZygD", "link": "https://stackoverflow.com/users/2753501/zygd"}, "is_accepted": false, "score": 3, "last_activity_date": 1616158384, "last_edit_date": 1616158384, "creation_date": 1616154359, "answer_id": 66707568, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/66707568#66707568", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p><strong>Spark 3.1+</strong></p>\n<pre><code>df = df1.unionByName(df2, allowMissingColumns=True)\n</code></pre>\n<p>Test results:</p>\n<pre><code>from pyspark.sql import SparkSession\n\nspark = SparkSession.builder.getOrCreate()\n\ndata1=[\n(1 , '2016-08-29', 1 , 2, 3),\n(2 , '2016-08-29', 1 , 2, 3),\n(3 , '2016-08-29', 1 , 2, 3)]\ndf1 = spark.createDataFrame(data1, ['code' , 'date' , 'A' , 'B', 'C'])\ndata2=[\n(5 , '2016-08-29', 1, 2, 3, 4),\n(6 , '2016-08-29', 1, 2, 3, 4),\n(7 , '2016-08-29', 1, 2, 3, 4)]\ndf2 = spark.createDataFrame(data2, ['code' , 'date' , 'B', 'C', 'D', 'E'])\n\ndf = df1.unionByName(df2, allowMissingColumns=True)\ndf.show()\n\n#     +----+----------+----+---+---+----+----+\n#     |code|      date|   A|  B|  C|   D|   E|\n#     +----+----------+----+---+---+----+----+\n#     |   1|2016-08-29|   1|  2|  3|null|null|\n#     |   2|2016-08-29|   1|  2|  3|null|null|\n#     |   3|2016-08-29|   1|  2|  3|null|null|\n#     |   5|2016-08-29|null|  1|  2|   3|   4|\n#     |   6|2016-08-29|null|  1|  2|   3|   4|\n#     |   7|2016-08-29|null|  1|  2|   3|   4|\n#     +----+----------+----+---+---+----+----+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 315, "user_id": 4844789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GuByk.jpg?s=128&g=1", "display_name": "Jai K", "link": "https://stackoverflow.com/users/4844789/jai-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1616757845, "last_edit_date": 1616757845, "creation_date": 1616756694, "answer_id": 66815678, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar/66815678#66815678", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<pre><code>from functools import reduce\nfrom pyspark.sql import DataFrame\nimport pyspark.sql.functions as F\n\ndef unionAll(*dfs, fill_by=None):\n    clmns = {clm.name.lower(): (clm.dataType, clm.name) for df in dfs for clm in df.schema.fields}\n    \n    dfs = list(dfs)\n    for i, df in enumerate(dfs):\n        df_clmns = [clm.lower() for clm in df.columns]\n        for clm, (dataType, name) in clmns.items():\n            if clm not in df_clmns:\n                # Add the missing column\n                dfs[i] = dfs[i].withColumn(name, F.lit(fill_by).cast(dataType))\n    return reduce(DataFrame.unionByName, dfs)\nunionAll(df1, df2).show()\n</code></pre>\n<ol>\n<li>Case insenstive columns</li>\n<li>Will returns the actual column case</li>\n<li>Support the existing datatypes</li>\n<li>Default value can be customizable</li>\n<li>Pass multiple dataframes at once (e.g unionAll(df1, df2, df3, ..., df10))</li>\n</ol>\n"}], "owner": {"reputation": 612, "user_id": 6828263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a917ba89aba59feadac4b6ec251f15?s=128&d=identicon&r=PG&f=1", "display_name": "Allan Feliph", "link": "https://stackoverflow.com/users/6828263/allan-feliph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104545, "favorite_count": 29, "protected_date": 1612349438, "accepted_answer_id": 39758966, "answer_count": 22, "score": 60, "last_activity_date": 1616757845, "creation_date": 1475098471, "last_edit_date": 1616154527, "question_id": 39758045, "link": "https://stackoverflow.com/questions/39758045/how-to-perform-union-on-two-dataframes-with-different-amounts-of-columns-in-spar", "title": "How to perform union on two DataFrames with different amounts of columns in spark?", "body": "<p>I have 2 <code>DataFrame</code>s:</p>\n<p><a href=\"https://i.stack.imgur.com/L4qs0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/L4qs0.png\" alt=\"Source data\" /></a></p>\n<p>I need union like this:</p>\n<p><a href=\"https://i.stack.imgur.com/mdICY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mdICY.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>unionAll</code> function doesn't work because the number and the name of columns are different.</p>\n<p>How can I do this?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 3, "creation_date": 1475098619, "post_id": 39758022, "comment_id": 66812171, "body": "I can run your code without error. Although I doubt you want the brackets around <code>val</code>."}, {"owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475098983, "post_id": 39758022, "comment_id": 66812312, "body": "And I&#39;m going to assume that <code>fiancee_wordfreq.csv</code> isn&#39;t being used for nefarious purposes... :)"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 1, "creation_date": 1475098999, "post_id": 39758022, "comment_id": 66812318, "body": "If you&#39;re using Python3 there is no need for the &#39;b&#39; in the mode argument."}], "answers": [{"tags": [], "owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "is_accepted": true, "score": 2, "last_activity_date": 1475098935, "creation_date": 1475098935, "answer_id": 39758138, "question_id": 39758022, "link": "https://stackoverflow.com/questions/39758022/trying-to-create-a-csv-using-python-and-getting-list-indices-error/39758138#39758138", "title": "Trying to create a csv using python, and getting &quot;list indices&quot; error", "body": "<p>(My answer is for Python3)</p>\n\n<p>You are opening the file in \"bytes\" mode. It worked for me when I removed the \"b\" argument:</p>\n\n<pre><code>with open(\"testabc.csv\" , \"w\") as f:\n  writer = csv.writer(f)  \n  for val in clean_titles:\n     writer.writerow(val)\n</code></pre>\n\n<p>Also, you can just use a built-in <code>writerows</code> function to be less verbose:</p>\n\n<pre><code>with open(\"testabc.csv\" , \"w\") as f:\n  writer = csv.writer(f)  \n  writer.writerows(clean_titles)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6378117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hHI4h.jpg?s=128&g=1", "display_name": "glongo", "link": "https://stackoverflow.com/users/6378117/glongo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 39758138, "answer_count": 1, "score": 0, "last_activity_date": 1475098935, "creation_date": 1475098379, "question_id": 39758022, "link": "https://stackoverflow.com/questions/39758022/trying-to-create-a-csv-using-python-and-getting-list-indices-error", "title": "Trying to create a csv using python, and getting &quot;list indices&quot; error", "body": "<p>In my last question, I asked how to get python to assign a set of values to phrases in a csv files.  I was told to create a list of tuples, and this worked great.    </p>\n\n<p>Currently my list, called clean_titles looks like this:</p>\n\n<pre><code>[('a', 1),\n ('a', 1),\n ('a', 1),\n ('a', 1),\n ('a', 1),\n ('a', 1),\n ('a', 1),\n ('a', 1),\n ('b', 2),\n ('b', 2),\n ('b', 2),\n ('b', 2),\n ('b', 2),\n ('b', 2),\n ('c', 3),\n ('c', 3),\n ('c', 3),\n ('c', 3),\n ('c', 3)]\n</code></pre>\n\n<p>Now I want to take the list, and export it to as CSV file.  I want the name of the phrases in one column and the assigned number in another column.</p>\n\n<pre><code>with open(\"fiancee_wordfreq.csv\" , \"wb\") as f:\n     writer = csv.writer(f)  \n  for val in clean_titles:\n     writer.writerow([val])\n</code></pre>\n\n<p>But I keep getting an error message that \"list indices must be integers not unicode\" </p>\n\n<p>What am I doing wrong or what am I missing.  Thanks for your help. </p>\n"}, {"tags": ["python", "jupyter", "jupyter-notebook", "xgboost"], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 1247603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5BqVH.jpg?s=128&g=1", "display_name": "P B", "link": "https://stackoverflow.com/users/1247603/p-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1491332300, "creation_date": 1491332300, "answer_id": 43215493, "question_id": 39757947, "link": "https://stackoverflow.com/questions/39757947/xgboost-verbose-eval-in-jupyter-not-working/43215493#43215493", "title": "XGBOOST verbose_eval in Jupyter not working", "body": "<p>You also need to provide your evaluation data set/s and the number of rounds of no improvement after which you want to invoke an early stop. For example:</p>\n\n<pre><code>xgb_params = {\"objective\": \"multi:softprob\", \"max_depth\": 8, \"silent\": 1, \"num_class\":5}\nnum_rounds = 1000\ndtrain = xgb.DMatrix(trainX, trainY)    #training data\ndvalid = xgb.DMatrix(validX, validY)    #validation data\nthisxgb = xgb.train(xgb_params, dtrain, num_rounds, \\\n                    [(dtrain,'train'),(dvalid,'test')], \\\n                    early_stopping_rounds=10\\\n                   )    #stop if no improvement in 10 rounds\n</code></pre>\n"}], "owner": {"reputation": 1144, "user_id": 2781958, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0f3adff8df8bc8260145c5ee01887516?s=128&d=identicon&r=PG", "display_name": "Alex R.", "link": "https://stackoverflow.com/users/2781958/alex-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2719, "favorite_count": 3, "answer_count": 1, "score": 3, "last_activity_date": 1491332300, "creation_date": 1475098014, "question_id": 39757947, "link": "https://stackoverflow.com/questions/39757947/xgboost-verbose-eval-in-jupyter-not-working", "title": "XGBOOST verbose_eval in Jupyter not working", "body": "<p>I'm running the following in a python Jupyter notebook:</p>\n\n<pre><code>import xgboost as xgb\nbst_dx=xgb.train(paramMap,dset,num_round,verbose_eval=True)\n</code></pre>\n\n<p>For some reason I never see the actual verbose evaluation, which is supposed to print the current loss at the last evaluated boost. I've tried setting verbose_eval to 1,2,3,4, etc but that still doesn't do anything. I just get a silent output. Is there some setting I need to enable in Jupyter?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6026, "user_id": 3991125, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/wbRqp.png?s=128&g=1", "display_name": "albert", "link": "https://stackoverflow.com/users/3991125/albert"}, "edited": false, "score": 0, "creation_date": 1475098739, "post_id": 39757924, "comment_id": 66812214, "body": "for using command line arguments as <code>-arg1 -arg2</code> I&#39;d suggest having a look at <code>argparse</code> or <code>docopt</code> modules."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 6267601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04402a8c349a6b199b8f3e5f0080a372?s=128&d=identicon&r=PG&f=1", "display_name": "BynaryCobweb", "link": "https://stackoverflow.com/users/6267601/bynarycobweb"}, "is_accepted": true, "score": 0, "last_activity_date": 1475099301, "creation_date": 1475099301, "answer_id": 39758222, "question_id": 39757924, "link": "https://stackoverflow.com/questions/39757924/how-to-add-more-functionality-with-arguments-in-this-code/39758222#39758222", "title": "How to add more functionality with arguments in this code?", "body": "<p>First, <code>sys.argv</code> is an array with the arguments of the command line in it. So you need to test the length of it :</p>\n\n<pre><code>if len(sys.argv) &gt;= 2 :\n   #sys.argv[0] is the name of your program\n   if sys.argv[1] == '-c' :\n</code></pre>\n\n<p>Then you can see that the file is written the latest lines :</p>\n\n<pre><code>if len( lines ) &gt; 1:\nmemoir_path = os.path.expanduser( '~/.memoir' )\n\n# prepend a seperator only if the file exists ( there are entries already in there )\nif os.path.exists( memoir_path ):\n    lines.insert( 0, '--------------------\\n' )\n\n#here the file is opened with 'a' = append mode. \n#If you want to override the content of the file (for your command 'clear'), use 'w' = write mode.\nwith open( memoir_path, 'a' ) as f:\n    f.writelines( lines )\n</code></pre>\n\n<p>So you can include the 'clear' command at the end. The 'read' command will rather find its place at the beggining of the program.</p>\n"}], "owner": {"reputation": 131, "user_id": 5752060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-j1SdNyAmhNY/AAAAAAAAAAI/AAAAAAAACHw/W2-P-2PDv-M/photo.jpg?sz=128", "display_name": "s-kaczmarek", "link": "https://stackoverflow.com/users/5752060/s-kaczmarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 39758222, "answer_count": 1, "score": 0, "last_activity_date": 1475181155, "creation_date": 1475097899, "last_edit_date": 1475181155, "question_id": 39757924, "link": "https://stackoverflow.com/questions/39757924/how-to-add-more-functionality-with-arguments-in-this-code", "title": "How to add more functionality with arguments in this code?", "body": "<p>I have found nice little program for making quick notes in terminal. There is a little lack of functionality- I can't read notes I have made with it and also I cannot clear notes from file where they are stored. I would like to modify this program, so i can run it with arguments to read what I have written there and also clean. I have some idea how to do that, but can't find write place in code to paste my lines. I want to run it with arguments such as: -r -c</p>\n\n<p>original program looks like this:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport time\nimport os\nimport sys\n\n# add the current local time to the entry header\nlines = [ time.asctime() + '\\n' + '--------------------\\n' ]\n\nif len( sys.argv ) &gt; 1:\n    lines.append( ' '.join( sys.argv[ 1: ] ) )\n    lines[-1] += '\\n'\nelse:\n    while 1:\n        try:\n            line = input()\n        except EOFError:\n            break\n\n        # get more user input until an empty line\n        if len( line ) == 0:\n            break\n        else:\n            lines.append( line + '\\n' )\n\n\n# only write the entry if the user entered something\nif len( lines ) &gt; 1:\n    memoir_path = os.path.expanduser( '~/.memoir' )\n\n    # prepend a seperator only if the file exists ( there are entries already in there )\n    if os.path.exists( memoir_path ):\n        lines.insert( 0, '--------------------\\n' )\n\n    with open( memoir_path, 'a' ) as f:\n        f.writelines( lines )\n</code></pre>\n\n<p>my code, which I don't know where to paste (if it is correct):</p>\n\n<pre><code># read memoir file\nif str(sys.argv) == (\"r\"):\n    os.system('cat ~/.memoir')\n\n# clear memoir file\nif str(sys.argv) == (\"c\"):\n    os.system('&gt; ~/.memoir')\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I have made few changes, due to answer, and everything works fine, but I would like to make this code a little simplier. Author of this code added some usles feature for me to run this program with number of random arguments which will be \"transformed\" into empty lines in note. It seems to not work anyway after my update, so I want to get rid of this feature. I think it starts in line nr 37 look for #here!!! comment</p>\n\n<p>new code looks like this:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport time\nimport os\nimport sys\n\ndef help():\n    print (\"memoir is a minimal cli diary\")\n    print (\"run script with -r argument to read notes\")\n    print (\"run script with -c argument to clear notes file\")\n    print (\"run script with -h argument for help\")\n\n# add the current local time to the entry header\nlines = [ time.asctime() + '\\n' + '------------------------\\n' + '\\n' ]\n\nif len(sys.argv) &gt;= 2:\n    if sys.argv[1] == '-r':\n        # read .memoir file\n        os.system('cat ~/.memoir')\n        print('\\n')\n        exit(0)\n\n    if sys.argv[1] == '-h':\n        # print help\n        help()\n        exit(0)\n\n    if sys.argv[1] == '-c':\n        # clear .memoir file\n        os.system('&gt; ~/.memoir')\n        exit(0)\n\n    else:\n        print(\"invalid argument, type m -h for help\")\n        exit(0)\n\nif len(sys.argv) &gt; 1 and len(sys.argv) != 2: #here!!!\n    lines.append( ' '.join(sys.argv[ 1: ]))\n    lines[-1] += '\\n'\nelse:\n    while 1:\n        try:\n            line = input()\n        except EOFError:\n            break\n\n        # get more user input until an empty line\n        if len( line ) == 0:\n            break\n        else:\n            lines.append( line + '\\n' )\n\n\n# only write the entry if the user entered something\nif len( lines ) &gt; 1:\n    memoir_path = os.path.expanduser( '~/.memoir' )\n\n    # prepend a seperator only if the file exists ( there are entries already in there )\n    if os.path.exists( memoir_path ):\n        lines.insert(0, '\\n------------------------\\n')\n\n    with open( memoir_path, 'a' ) as f:\n        f.writelines( lines )\n\nif len(sys.argv) &gt;= 2:\n    # clear .memoir file\n    if sys.argv[1] == '-c':\n        os.system('&gt; ~/.memoir')\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475098164, "post_id": 39757922, "comment_id": 66811961, "body": "Do you want to display all the photos (separated in threes) in your view, or just three per page? If the latter, the Django paginator is the way to go."}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475098670, "post_id": 39757922, "comment_id": 66812193, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/845227/django-templates-group-items-in-threes\">Django templates: Group items in Threes</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "is_accepted": false, "score": 1, "last_activity_date": 1475098596, "last_edit_date": 1495542792, "creation_date": 1475098596, "answer_id": 39758064, "question_id": 39757922, "link": "https://stackoverflow.com/questions/39757922/how-to-go-through-a-manytomany-field-in-chunks-in-django/39758064#39758064", "title": "How to go through a ManyToMany field in chunks in Django", "body": "<pre><code>{% for photo in album.images.all %}\n    {{ photo }}\n    {% if forloop.counter|divisibleby:4 %}\n        &lt;hr&gt; {# or some other markup #}\n    {% endif\n{% endfor %}\n</code></pre>\n\n<p>You might also do the grouping in your view. This might result in cleaner markup. See: <a href=\"https://stackoverflow.com/questions/11964972/django-template-for-tag-add-li-every-4th-element#answer-11965885\">Django template {%for%} tag add li every 4th element</a></p>\n"}], "owner": {"reputation": 31, "user_id": 2867777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1316198c7c857feaa1d2a70058afc28?s=128&d=identicon&r=PG&f=1", "display_name": "user2867777", "link": "https://stackoverflow.com/users/2867777/user2867777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475098596, "creation_date": 1475097895, "question_id": 39757922, "link": "https://stackoverflow.com/questions/39757922/how-to-go-through-a-manytomany-field-in-chunks-in-django", "title": "How to go through a ManyToMany field in chunks in Django", "body": "<p>I am trying to display sets of three objects in a HTML template in a tiled interface. So, for example, an Album model has a ManyToMany field with specific photos. I want to iterate through the photos and show them in sets of three in the view. Currently, I can get all the photos using <code>{{ for photo in album.images.all }}</code> in the template, but don't know how to get the results in sets of three. </p>\n\n<p>How would I go about chunking the results into sets of three so that I can then iterate through the sets of three for the template? Or is there a way to get the total length and then index of specific elements using the Template tags?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1475098181, "post_id": 39757910, "comment_id": 66811967, "body": "Take a look at <a href=\"https://docs.python.org/2/library/os.path.html#os.path.exists\" rel=\"nofollow noreferrer\">os.path.exists</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": false, "score": 1, "last_activity_date": 1475099490, "last_edit_date": 1475099490, "creation_date": 1475098961, "answer_id": 39758144, "question_id": 39757910, "link": "https://stackoverflow.com/questions/39757910/argparse-how-to-parse-a-single-string-argument-or-a-file-listing-many-arguments/39758144#39758144", "title": "argparse: how to parse a single string argument OR a file listing many arguments?", "body": "<p>A way would be:</p>\n\n<p>Let's say that you have created a parser like this:</p>\n\n<pre><code>parser.add_argument('-i',  \n                    help='...', \n                    type=function)\n</code></pre>\n\n<p>Where <code>type</code> points to the <code>function</code> which will be an outer function that evaluates the input of the user and decides if it is a <code>string</code> or a <code>filename</code></p>\n\n<p>More information about <code>type</code> you can find in the <a href=\"https://docs.python.org/3/library/argparse.html#type\" rel=\"nofollow\">documentation</a>.</p>\n\n<p>Here is a minimal example that demonstrates this use of <code>type</code>:</p>\n\n<pre><code>parser.add_argument('-d','--directory', \n                    type=Val_dir, \n                    help='...')\n# ....\n\ndef Val_dir(dir):\n    if not os.path.isdir(dir):\n        raise argparse.ArgumentTypeError('The directory you specified does not seem to exist!')\n    else:\n        return dir\n</code></pre>\n\n<p>The above example shows that with <code>type</code> we can control the input at parsing time. Of course in your case the function would implement another logic - evaluate if the input is a string or a filename.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1475103061, "last_edit_date": 1475103061, "creation_date": 1475102291, "answer_id": 39758720, "question_id": 39757910, "link": "https://stackoverflow.com/questions/39757910/argparse-how-to-parse-a-single-string-argument-or-a-file-listing-many-arguments/39758720#39758720", "title": "argparse: how to parse a single string argument OR a file listing many arguments?", "body": "<p>This doesn't look like an <code>argparse</code> problem, since all you want from it is a string.  That string can be a filename or a function argument.  To a <code>parser</code> these will look the same.  Also <code>argparse</code> isn't normally used to run functions.  It is used to parse the commandline.  Your code determines what to do with that information.</p>\n\n<p>So here's a script (untested) that I think does your task:</p>\n\n<pre><code>import argparse\ndef somefunction(*args):\n    print(args)\n\nif __name__=='__main__':\n    parser=argparse.ArgumentParser()\n    parser.add_argument('-i','--input')\n    args = parser.parse_args()\n\n    try:\n        with open(args.input) as f:\n            lines = f.read()\n            somefunction(*lines)\n            # or\n            # for line in lines:\n            #   somefuncion(line.strip())\n    except:\n        somefunction(arg.input)\n</code></pre>\n\n<p><code>argparse</code> just provides the <code>args.input</code> string.  It's the try/except block that determines how it is used.</p>\n\n<p>================</p>\n\n<p>Here's a prefix char approach:</p>\n\n<pre><code>parser=argparse.ArgumentParser(fromfile_prefix_chars='@',\n   description=\"use &lt;prog -i @filename&gt; to load values from file\")\nparser.add_argument('-i','--inputs')\nargs=parser.parse_args()\nfor arg in args.inputs:\n     somefunction(arg)\n</code></pre>\n\n<p>this is supposed to work with a file like:</p>\n\n<pre><code> one\n two \n three\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/argparse.html#fromfile-prefix-chars\" rel=\"nofollow\">https://docs.python.org/3/library/argparse.html#fromfile-prefix-chars</a></p>\n"}], "owner": {"reputation": 670, "user_id": 2774885, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a3e973183d9d175409774363a52ed152?s=128&d=identicon&r=PG", "display_name": "ljwobker", "link": "https://stackoverflow.com/users/2774885/ljwobker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1995, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475103061, "creation_date": 1475097825, "last_edit_date": 1475098023, "question_id": 39757910, "link": "https://stackoverflow.com/questions/39757910/argparse-how-to-parse-a-single-string-argument-or-a-file-listing-many-arguments", "title": "argparse: how to parse a single string argument OR a file listing many arguments?", "body": "<p>I have a use case where I'd like the user to be able to provide, as an argument to argparse, EITHER a single string OR a filename where each line has a string.</p>\n\n<p>Assume the user launches <code>./myscript.py -i foobar</code></p>\n\n<p>The logical flow I'm looking for is something like this:</p>\n\n<p>The script determines whether the string foobar is a readable file.\nIF it is indeed a readable file, we call some function from the script, passing each line in <code>foobar</code> as an argument to that function.  If foobar is not a readable file, we call the same function but just use the string <code>foobar</code> as the argument and return. </p>\n\n<p>I have no ability to guarantee that a filename argument will have a specific extension (or even an extension at all). </p>\n\n<p>Is there a more pythonic way to do this OTHER than just coding up the logic exactly as I've described above?   I looked through the <a href=\"https://docs.python.org/2/howto/argparse.html\" rel=\"nofollow\">argparse tutorial</a> and didn't see anything, but it also seems reasonable to think that there would be some specific hooks for filenames as arguments, so I figured I'd ask.  </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 1, "creation_date": 1475098237, "post_id": 39757962, "comment_id": 66811990, "body": "Should be <code>df.reindex(columns = list(&#39;abcd&#39;)).fillna(0)</code>."}, {"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "reply_to_user": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1475098380, "post_id": 39757962, "comment_id": 66812058, "body": "yes..actuall fillna(0) is what i was looking for. thank you"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1475098561, "post_id": 39757962, "comment_id": 66812140, "body": "What you currently have will throw an error. Should be: <code>columns = list(&#39;abcd&#39;)</code> or <code>columns = [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;]</code> for the <code>columns</code> argument."}, {"owner": {"reputation": 89, "user_id": 9913015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9659f88d09ae6dfe3685afe272fd7a7e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Beining", "link": "https://stackoverflow.com/users/9913015/m-beining"}, "edited": false, "score": 0, "creation_date": 1583399135, "post_id": 39757962, "comment_id": 107104986, "body": "The solution from @fleurette is safer (no risk of deleting non-mentioned columns) and faster (as no fillna has to be applied afterwards)"}], "tags": [], "owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1475098323, "last_edit_date": 1495541802, "creation_date": 1475098096, "answer_id": 39757962, "question_id": 39757901, "link": "https://stackoverflow.com/questions/39757901/how-to-initialize-multiple-columns-to-existing-pandas-dataframe/39757962#39757962", "title": "how to initialize multiple columns to existing pandas DataFrame", "body": "<p>i got a solution <a href=\"https://stackoverflow.com/questions/30926670/pandas-add-multiple-empty-columns-to-dataframe\">here</a>. </p>\n\n<pre><code>df.reindex(columns = list['cd'])\n</code></pre>\n\n<p>will do the trick.</p>\n\n<p>actually it will be:</p>\n\n<pre><code>df.reindex(columns = list['abcd'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1475102012, "creation_date": 1475102012, "answer_id": 39758675, "question_id": 39757901, "link": "https://stackoverflow.com/questions/39757901/how-to-initialize-multiple-columns-to-existing-pandas-dataframe/39758675#39758675", "title": "how to initialize multiple columns to existing pandas DataFrame", "body": "<p><strong><em><code>pd.concat</code></em></strong></p>\n\n<pre><code>pd.concat([df, pd.DataFrame(0, df.index, list('cd'))], axis=1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4L9rZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4L9rZ.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong><em><code>join</code></em></strong></p>\n\n<pre><code>df.join(pd.DataFrame(0, df.index, list('cd')))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4L9rZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4L9rZ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 1566418, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6165dcf07e59a9c74af0f49cca9cc054?s=128&d=identicon&r=PG", "display_name": "fleurette", "link": "https://stackoverflow.com/users/1566418/fleurette"}, "is_accepted": false, "score": 6, "last_activity_date": 1539201284, "creation_date": 1539201284, "answer_id": 52747826, "question_id": 39757901, "link": "https://stackoverflow.com/questions/39757901/how-to-initialize-multiple-columns-to-existing-pandas-dataframe/52747826#52747826", "title": "how to initialize multiple columns to existing pandas DataFrame", "body": "<p>I prefer this solution.</p>\n\n<pre><code>    df = df.assign(**{'c': 0, 'd': 0})\n</code></pre>\n"}], "owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5602, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1539201284, "creation_date": 1475097787, "question_id": 39757901, "link": "https://stackoverflow.com/questions/39757901/how-to-initialize-multiple-columns-to-existing-pandas-dataframe", "title": "how to initialize multiple columns to existing pandas DataFrame", "body": "<p>how can I initialize multiple columns in a single instance in an existing pandas DataFrame object? I can initialize single column at an instance, this way:</p>\n\n<pre><code>df = pd.DataFrame({'a':[1,2,3],'b':[4,5,6]}, dtype='int')\ndf['c'] = 0\n</code></pre>\n\n<p>but i cannot do something like:</p>\n\n<pre><code>df[['c','d']] = 0 or\ndf[['c']['d']] = 0\n</code></pre>\n\n<p>is there a way i can achieve this?</p>\n"}, {"tags": ["python", "rabbitmq", "celery"], "answers": [{"comments": [{"owner": {"reputation": 815, "user_id": 2265812, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e967d0cc250f58500dd2a4a23c43041?s=128&d=identicon&r=PG", "display_name": "Orelus", "link": "https://stackoverflow.com/users/2265812/orelus"}, "edited": false, "score": 0, "creation_date": 1475149273, "post_id": 39768592, "comment_id": 66832838, "body": "Even with a <code>for loop</code> and <code>sleep</code> around <code>task = celery.result.AsyncResult(task_id, app=celery_app)</code>, if I do not re-instantiate the <code>celery_app</code> it won&#39;t work (I tried to wait for 10sec). I do agree that managing the result myself would be easier but I try to understand the mechanism behind this problem"}], "tags": [], "owner": {"reputation": 127411, "user_id": 1906307, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kRxnP.jpg?s=128&g=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/1906307/louis"}, "is_accepted": false, "score": 0, "last_activity_date": 1475147240, "creation_date": 1475147240, "answer_id": 39768592, "question_id": 39757813, "link": "https://stackoverflow.com/questions/39757813/celery-redis-backend-not-always-returning-result/39768592#39768592", "title": "Celery redis backend not always returning result", "body": "<p><strong>You have a race condition.</strong> This is what happens:</p>\n\n<ol>\n<li><p>The loop arrives at <code>_, resp = r.blpop('/task_finished')</code> and blocks there.</p></li>\n<li><p>The task executes <code>r.rpush('/task_finished', task.request.id)</code></p></li>\n<li><p>The loop unblocks, executes <code>task = celery.result.AsyncResult(task_id, app=celery_app)</code> and gets an empty result because the task has not yet recorded its result to the database.</p></li>\n</ol>\n\n<p>There may be a way do the <code>r.rpush</code> <em>after</em> celery has committed the results to the backend. Perhaps creating a custom class derived from <code>Task</code> would do it. But that's not something I've tried.</p>\n\n<p>However, you could certainly modify your code to store the results <em>together</em> with the task id. Something like: </p>\n\n<pre><code>r.rpush('/task_finished', json.dumps({ \"task_id\": task.request.id, \"result\": 42 }))\n</code></pre>\n\n<p>I've used a JSON serialization for the sake of illustration. You can use whatever scheme you want. On reading:</p>\n\n<pre><code>_, resp = r.blpop('/task_finished')\nresp = json.loads(resp)\n</code></pre>\n\n<p>With this, you might want to change <code>ignore_result=False</code> to <code>ignore_result=True</code>.</p>\n"}], "owner": {"reputation": 815, "user_id": 2265812, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e967d0cc250f58500dd2a4a23c43041?s=128&d=identicon&r=PG", "display_name": "Orelus", "link": "https://stackoverflow.com/users/2265812/orelus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475149440, "creation_date": 1475097415, "last_edit_date": 1475149440, "question_id": 39757813, "link": "https://stackoverflow.com/questions/39757813/celery-redis-backend-not-always-returning-result", "title": "Celery redis backend not always returning result", "body": "<p>I'm running a celery worker such that:</p>\n\n<pre><code> -------------- celery@ v3.1.23 (Cipater)\n---- **** ----- \n--- * ***  * -- Linux-4.4.0-31-generic-x86_64-with-debian-stretch-sid\n-- * - **** --- \n- ** ---------- [config]\n- ** ---------- .&gt; app:         __main__:0x7fe76cd42400\n- ** ---------- .&gt; transport:   amqp://\n- ** ---------- .&gt; results:     redis://\n- *** --- * --- .&gt; concurrency: 4 (prefork)\n-- ******* ---- \n--- ***** ----- [queues]\n -------------- .&gt; celery           exchange=celery(direct) key=celery\n[tasks]\n  . tasks.mytask\n</code></pre>\n\n<p><strong>tasks.py</strong>:</p>\n\n<pre><code>@celery_app.task(bind=True, ignore_result=False)\ndef mytask(task):\n    r = redis.StrictRedis()\n    r.rpush('/task_finished', task.request.id)\n    return {'result': 42}\n</code></pre>\n\n<p>When I try to run the following code, and run 2 task one after the other it works when getting the first result but fails to return the second one.</p>\n\n<pre><code>import celery.result\nimport redis\n\nr = redis.StrictRedis()\ncelery_app = Celery(name=\"my_long_task\", backend=\"redis://\")\n\nwhile True:\n    _, resp = r.blpop('/task_finished')\n    task_id = resp.decode('utf-8')\n    task = celery.result.AsyncResult(task_id, app=celery_app)\n    print(task)\n    print(task.result)\n</code></pre>\n\n<p>Will return:</p>\n\n<p><em>First loop</em>:  </p>\n\n<pre><code>[1] 990e2d04-5664-4d7c-8a5c-e9cb4ef45e24  \n[2] {'result': 42}\n</code></pre>\n\n<p><em>Second loop</em> (fails to return the result):  </p>\n\n<pre><code>[3] 8463cc46-0884-4bf7-b838-f0614f74b271  \n[4] {}\n</code></pre>\n\n<p>However if I instantiate <code>celery_app = Celery(name=\"my_long_task\", backend=\"redis://\")</code> in the <code>while</code> loop it will work each time.<br>\nWhat is wrong with not reinstantiating <code>celery_app</code> ? What am I missing ?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Waiting a bit for the result (in case of latency) won't work too</p>\n\n<pre><code>while True:\n    _, resp = r.blpop('/task_finished')\n    task_id = resp.decode('utf-8')\n    for i in range(0, 20):\n        # Won't work because I need to re instantiate celery_app\n        task = celery.result.AsyncResult(task_id, app=celery_app)\n        print(task.result)\n        time.sleep(1)\n</code></pre>\n"}, {"tags": ["python", "beautifulsoup", "python-requests", "bs4"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1475097467, "post_id": 39757805, "comment_id": 66811639, "body": "Where is your code so far? There is 100 percent a way but it would be good to see your efforts thus far."}, {"owner": {"reputation": 75, "user_id": 6673546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df28527fe4648b4b0b45e03440158f07?s=128&d=identicon&r=PG&f=1", "display_name": "Tony sanchez", "link": "https://stackoverflow.com/users/6673546/tony-sanchez"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1475097699, "post_id": 39757805, "comment_id": 66811763, "body": "@PadraicCunningham updated"}, {"owner": {"reputation": 75, "user_id": 6673546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df28527fe4648b4b0b45e03440158f07?s=128&d=identicon&r=PG&f=1", "display_name": "Tony sanchez", "link": "https://stackoverflow.com/users/6673546/tony-sanchez"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1475097712, "post_id": 39757805, "comment_id": 66811767, "body": "@jonrsharpe updated"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1475097751, "post_id": 39757805, "comment_id": 66811782, "body": "... <i>&quot;and what precisely is the problem with it?&quot;</i> Give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 75, "user_id": 6673546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df28527fe4648b4b0b45e03440158f07?s=128&d=identicon&r=PG&f=1", "display_name": "Tony sanchez", "link": "https://stackoverflow.com/users/6673546/tony-sanchez"}, "edited": false, "score": 0, "creation_date": 1475098487, "post_id": 39757879, "comment_id": 66812107, "body": "Run it now, that was just a warning about the parser"}, {"owner": {"reputation": 75, "user_id": 6673546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df28527fe4648b4b0b45e03440158f07?s=128&d=identicon&r=PG&f=1", "display_name": "Tony sanchez", "link": "https://stackoverflow.com/users/6673546/tony-sanchez"}, "edited": false, "score": 0, "creation_date": 1475108419, "post_id": 39757879, "comment_id": 66814944, "body": "hey man, curious why do i get none type when i try to get value.....&lt;input type=&quot;hidden&quot; name=&quot;CSRFToken&quot; value=&quot;94ae9386-b3ab-4bc3-bb2d-234e850a0872&quot;&gt;"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 9, "last_activity_date": 1475098455, "last_edit_date": 1475098455, "creation_date": 1475097701, "answer_id": 39757879, "question_id": 39757805, "link": "https://stackoverflow.com/questions/39757805/using-python-requests-and-beautiful-soup-to-pull-text/39757879#39757879", "title": "Using python requests and beautiful soup to pull text", "body": "<p>Ok now we have code, it is as simple as:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\n\nsoup = BeautifulSoup(requests.get(\"https://e-com.secure.force.com/adidasUSContact/\").content, \"html.parser\")\n\nkey = soup.select_one(\"#ncaptchaRecaptchaId\")[\"data-sitekey\"]\n</code></pre>\n\n<p><em>data-sitekey</em> is an <em>attribute</em>, <strong>not</strong> a <em>css</em> class so you just need to extract it from the element, you can find the element by it's <em>id</em> as above.</p>\n\n<p>You could also use the class name:</p>\n\n<pre><code># css selector\nkey = soup.select_one(\"div.g-recaptcha\")[\"data-sitekey\"]\n# regular find using class name\nkey = soup.find(\"div\",class_=\"g-recaptcha\")[\"data-sitekey\"]\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6673546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df28527fe4648b4b0b45e03440158f07?s=128&d=identicon&r=PG&f=1", "display_name": "Tony sanchez", "link": "https://stackoverflow.com/users/6673546/tony-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8979, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1475098455, "creation_date": 1475097387, "last_edit_date": 1475097651, "question_id": 39757805, "link": "https://stackoverflow.com/questions/39757805/using-python-requests-and-beautiful-soup-to-pull-text", "title": "Using python requests and beautiful soup to pull text", "body": "<p>thanks for taking a look at my problem. i would like to know if there is any way to pull the data-sitekey from this text... here is the url to the page <a href=\"https://e-com.secure.force.com/adidasUSContact/\" rel=\"noreferrer\">https://e-com.secure.force.com/adidasUSContact/</a></p>\n\n<pre><code>&lt;div class=\"g-recaptcha\" data-sitekey=\"6LfI8hoTAAAAAMax5_MTl3N-5bDxVNdQ6Gx6BcKX\" data-type=\"image\" id=\"ncaptchaRecaptchaId\"&gt;&lt;div style=\"width: 304px; height: 78px;\"&gt;&lt;div&gt;&lt;iframe src=\"https://www.google.com/recaptcha/api2/anchor?k=6LfI8hoTAAAAAMax5_MTl3N-5bDxVNdQ6Gx6BcKX&amp;amp;co=aHR0cHM6Ly9lLWNvbS5zZWN1cmUuZm9yY2UuY29tOjQ0Mw..&amp;amp;hl=en&amp;amp;type=image&amp;amp;v=r20160921114513&amp;amp;size=normal&amp;amp;cb=ei2ddcb6rl03\" title=\"recaptcha widget\" width=\"304\" height=\"78\" role=\"presentation\" frameborder=\"0\" scrolling=\"no\" name=\"undefined\"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;textarea id=\"g-recaptcha-response\" name=\"g-recaptcha-response\" class=\"g-recaptcha-response\" style=\"width: 250px; height: 40px; border: 1px solid #c1c1c1; margin: 10px 25px; padding: 0px; resize: none;  display: none; \"&gt;&lt;/t\n</code></pre>\n\n<p>here is my current code </p>\n\n<pre><code>    import requests \nfrom bs4 import BeautifulSoup\n\nheaders = {\n    'Host' : 'e-com.secure.force.com',\n    'Connection' : 'keep-alive',\n    'Upgrade-Insecure-Requests' : '1',\n    'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64)',\n    'Accept' : 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n    'Accept-Encoding' : 'gzip, deflate, sdch',\n    'Accept-Language' : 'en-US,en;q=0.8'\n}\nurl = 'https://e-com.secure.force.com/adidasUSContact/'\nr = requests.get(url, headers=headers)\nsoup = BeautifulSoup(r, 'html.parser')\nc = soup.find_all('div', attrs={\"class\": \"data-sitekey\"})\nprint c\n</code></pre>\n"}, {"tags": ["python", "numbers"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1475097239, "post_id": 39757754, "comment_id": 66811537, "body": "Find the largest integer first, then take the reciprocal;)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1475097476, "post_id": 39757754, "comment_id": 66811644, "body": "you first algorithm is log(N)-complex, your second one is N-complex. You should multiply by 2 until you reach overflow THEN work your way down. However I&#39;m sensing that the exercise is pointless."}, {"owner": {"reputation": 3241, "user_id": 781162, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/440977e8e1ca487a0979daf9c975ed3e?s=128&d=identicon&r=PG", "display_name": "Eugene K", "link": "https://stackoverflow.com/users/781162/eugene-k"}, "edited": false, "score": 0, "creation_date": 1475097948, "post_id": 39757754, "comment_id": 66811875, "body": "What? There is no maximum or minimum number in Python. Python will automagically convert your &quot;int&quot; to a &quot;long&quot; which is actually infinite size (realistically w.e. is allocated by the OS). There is a max &#39;int&#39;, but it&#39;s fairly meaningless. If that&#39;s not satisfying, check out <a href=\"https://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Arbitrary-precision_arithmetic</a> or search for &quot;big number library&quot; for reference impls."}], "answers": [{"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1475097562, "post_id": 39757815, "comment_id": 66811691, "body": "The interesting thing is that it seems that you <i>can</i> still divide <code>sys.float_info.min</code> ... And I&#39;m not sure <i>why</i>.  Maybe an IEEE guru can enlighten us?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1475097564, "post_id": 39757815, "comment_id": 66811692, "body": "How do you suppose that 2.2250738585072014e-308 is the smallest available float when the OP has gotten to 5e-324?"}, {"owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475097691, "post_id": 39757815, "comment_id": 66811757, "body": "Try: <code>sys.float_info.min*sys.float_info.epsilon</code>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1475097868, "post_id": 39757815, "comment_id": 66811838, "body": "@mgilson isn&#39;t this about normalized and unnormalized floats? <code>2.2e-308</code> might be divided into <code>0.000000002e-308</code>, etc?"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1475097935, "post_id": 39757815, "comment_id": 66811869, "body": "@AndrasDeak -- Likely.  I don&#39;t know the difference between a &quot;normalized&quot; and &quot;unnormalized&quot; float :-).  You&#39;d think I would have picked that up somewhere ..."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1475098036, "post_id": 39757815, "comment_id": 66811907, "body": "@mgilson and I don&#39;t even know the terminology, apparently they&#39;re called <a href=\"https://en.wikipedia.org/wiki/Denormal_number\" rel=\"nofollow noreferrer\">denormal numbers</a>."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1475098972, "post_id": 39757815, "comment_id": 66812305, "body": "In order to clarify the doubts here: <code>sys.float_info.max</code> is the number with the largest exponent and the full precision in use. As you go above it, you&#39;ll loose precision. Similar is for <code>.min</code>"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1475099273, "post_id": 39757815, "comment_id": 66812429, "body": "Python uses double-precision floats, which can hold values from about 10 to the -308 to 10 to the 308 power. Updated the answer with the experiment from the python prompt. Hope that will clarify your doubt"}, {"owner": {"reputation": 79, "user_id": 6727894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1yeZ.png?s=128&g=1", "display_name": "AAAAAAAAA EEEEEEEEEEEEEEEEEEEE", "link": "https://stackoverflow.com/users/6727894/aaaaaaaaa-eeeeeeeeeeeeeeeeeeee"}, "edited": false, "score": 0, "creation_date": 1475534756, "post_id": 39757815, "comment_id": 66972869, "body": "This answer was most helpful because I tried the code and divided what I got with the maximum float. I got 0, this confirmed that I had found the smallest number (above 0) in python. Thanks."}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": true, "score": 3, "last_activity_date": 1475144780, "last_edit_date": 1592644375, "creation_date": 1475097426, "answer_id": 39757815, "question_id": 39757754, "link": "https://stackoverflow.com/questions/39757754/trying-to-find-smallest-number/39757815#39757815", "title": "Trying to find smallest number", "body": "<p>You may use <code>sys.float_info</code> to get the maximum/minimum representable finite float as:</p>\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.float_info.min\n2.2250738585072014e-308\n&gt;&gt;&gt; sys.float_info.max\n1.7976931348623157e+308\n</code></pre>\n<p>Python uses double-precision floats, which can hold values from about 10 to the -308 to 10 to the 308 power. Below is the experiment from the python prompt:</p>\n<pre><code># for maximum\n&gt;&gt;&gt; 1e308\n1e+308\n&gt;&gt;&gt; 1e+309\ninf   &lt;-- Infinite\n</code></pre>\n<p>You may even get numbers smaller than <code>1e-308</code> via <a href=\"https://en.wikipedia.org/wiki/Denormal_number\" rel=\"nofollow noreferrer\"><code>denormals</code></a>, but there is a significant performance hit to this and such numbers are <em>represented with a loss of precision</em>. I found that Python is able to handle 1e-323 but underflows on 1e-324 and returns 0.0 as the value.</p>\n<pre><code># for minimum\n&gt;&gt;&gt; 1e-323\n1e-323\n&gt;&gt;&gt; 1e-324\n0.0\n</code></pre>\n<p>You can get denormalized minimum as <code>sys.float_info.min * sys.float_info.epsilon</code>, which comes as <strong><code>5e-324</code></strong>.</p>\n<p>As per the document:</p>\n<blockquote>\n<p><strong>sys.float_info.max</strong> is maximum representable finite float</p>\n<p><strong>sys.float_info.min</strong> is minimum positive normalized float</p>\n</blockquote>\n<p>To get more information check: <a href=\"https://docs.python.org/3/library/sys.html#sys.float_info\" rel=\"nofollow noreferrer\"><code>sys.float_info</code></a>:</p>\n<blockquote>\n<p><strong>sys.float_info</strong> is a struct sequence holding information about the float type. It contains low level information about the precision and internal representation. The values correspond to the various floating-point constants defined in the standard header file float.h for the \u2018C\u2019 programming language; see section 5.2.4.2.2 of the 1999 ISO/IEC C standard [C99], \u2018Characteristics of floating types\u2019, for details.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15668, "user_id": 149076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZHnYp.jpg?s=128&g=1", "display_name": "Jim Dennis", "link": "https://stackoverflow.com/users/149076/jim-dennis"}, "is_accepted": false, "score": 0, "last_activity_date": 1475098334, "last_edit_date": 1495541966, "creation_date": 1475098334, "answer_id": 39758010, "question_id": 39757754, "link": "https://stackoverflow.com/questions/39757754/trying-to-find-smallest-number/39758010#39758010", "title": "Trying to find smallest number", "body": "<p>The key word that you're apparently missing is \"<a href=\"https://en.wikipedia.org/wiki/Epsilon\" rel=\"nofollow noreferrer\">epsilon</a>.\"  If you search on <strong>Python epsilon value</strong> then it returns a links to <a href=\"https://stackoverflow.com/a/9528486/149076\">StackOverflow: Value for epsilon in Python</a> near the top of the results in Google.</p>\n\n<p>Obviously it helps if you understand how the term is associated with this concept.</p>\n"}, {"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 1, "last_activity_date": 1475100514, "creation_date": 1475100514, "answer_id": 39758456, "question_id": 39757754, "link": "https://stackoverflow.com/questions/39757754/trying-to-find-smallest-number/39758456#39758456", "title": "Trying to find smallest number", "body": "<p>The smallest floating point number representable in Python is <code>5e-324</code>, or <code>2.0**-1075</code>.</p>\n\n<p>The other two answers have each given you half of what you need to find this number. It can be found by multiplying <code>sys.float_info.min</code> (<code>2.2250738585072014e-308</code>, the smallest normalized float) by <code>sys.float_info.epsilon</code> (<code>2.220446049250313e-16</code>, the smallest proportion you can modify a number by while still getting a distinct value).</p>\n"}], "owner": {"reputation": 79, "user_id": 6727894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1yeZ.png?s=128&g=1", "display_name": "AAAAAAAAA EEEEEEEEEEEEEEEEEEEE", "link": "https://stackoverflow.com/users/6727894/aaaaaaaaa-eeeeeeeeeeeeeeeeeeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "accepted_answer_id": 39757815, "answer_count": 3, "score": 1, "last_activity_date": 1475144780, "creation_date": 1475097193, "last_edit_date": 1475098072, "question_id": 39757754, "link": "https://stackoverflow.com/questions/39757754/trying-to-find-smallest-number", "title": "Trying to find smallest number", "body": "<p>In my program I'm trying to find the smallest number that python can give me. When I kept dividing a number by 2, I got 5 x 10^-324 (5e-324). I thought I could divide this by the biggest number I can use in python. I tried to get the biggest number in python by doing this:</p>\n\n<pre><code>z = 1\n    while True:\n        try:\n            z = z+1\n        except OverflowError:\n            z = z-1\n            break\n</code></pre>\n\n<hr>\n\n<p>Here is my full code:</p>\n\n<pre><code>from os import system\nx = 76556758478567587\nwhile True:\n    x = x/2\n    if x/2 == 0.0:\n        break\n\nprint(\"Smallest number I can compute:\", x)\nprint()\nz = 1\nwhile True:\n    try:\n        z = z+1\n    except OverflowError:\n        z = z-1\n        break\n\nprint(str(x) + \" divided by \" + str(z) + \" is...\")\nz = x/z\nprint(z)\nsystem(\"pause &gt;nul\")\n</code></pre>\n\n<p>Every time I run this it does nothing. I suddenly recognize it's still trying to solve the problem so I open task manager and Python was eating up my CPU like a pack of wolves eating a dead cow.</p>\n\n<hr>\n\n<p>I know the smallest number in python would be negative but I want to get the the smallest number <strong>above zero</strong>.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 15859, "user_id": 975114, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9cca3ab47e2685d05b75880de0faee63?s=128&d=identicon&r=PG", "display_name": "Amit Verma", "link": "https://stackoverflow.com/users/975114/amit-verma"}, "edited": false, "score": 0, "creation_date": 1475124210, "post_id": 39757696, "comment_id": 66818473, "body": "Your code looks good to me. Can you try adding a small delay before the click?  <code>import time; time.sleep(1)</code>  before the last line"}, {"owner": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "reply_to_user": {"reputation": 15859, "user_id": 975114, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9cca3ab47e2685d05b75880de0faee63?s=128&d=identicon&r=PG", "display_name": "Amit Verma", "link": "https://stackoverflow.com/users/975114/amit-verma"}, "edited": false, "score": 0, "creation_date": 1475140678, "post_id": 39757696, "comment_id": 66827048, "body": "@Amit I add <code>time</code> before the last line and it works."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "edited": false, "score": 0, "creation_date": 1475144393, "post_id": 39761172, "comment_id": 66829680, "body": "Its works ,but A2 square coordinates are (0,480).It is same to its translate."}, {"owner": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "edited": false, "score": 0, "creation_date": 1475145941, "post_id": 39761172, "comment_id": 66830635, "body": "Something went wrong and nothing happen when it click on A3.why Piece don&#39;t move,but stay on same position."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "reply_to_user": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "edited": false, "score": 0, "creation_date": 1475153211, "post_id": 39761172, "comment_id": 66835816, "body": "The translate coords for A2 are (0,480) but that is the top-left corner of the square. I would suggest clicking in the center of the square to be sure that you get the correct square."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "reply_to_user": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "edited": false, "score": 0, "creation_date": 1475153255, "post_id": 39761172, "comment_id": 66835841, "body": "I wrote and tested this whole thing in C# and it worked for me. I don&#39;t have python so I can&#39;t test it. You may need some brief pauses between clicks to make sure the browser has time to react?"}, {"owner": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "edited": false, "score": 0, "creation_date": 1475161579, "post_id": 39761172, "comment_id": 66842092, "body": "Tried pauses between clicks and before finding board element, still not working."}, {"owner": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "edited": false, "score": 0, "creation_date": 1475172469, "post_id": 39761172, "comment_id": 66848624, "body": "I delete last two lines in my code and add this lines:                       <code>board = Driver.find_element_by_id(&quot;chessboard_boardarea&quot;)</code>\\ <code>action_chains = ActionChains(Driver)</code>\\ <code>time.sleep(1)</code>\\ <code>action_chains.move_to_element_with_offset(board,560, 560).click().perform() # A2</code>\\ <code>time.sleep(1)</code>\\ <code>action_chains.move_to_element_with_offset(board,560, 480).click().perform()</code>\\ <code>time.sleep(1)</code>\\ <code>action_chains.move_to_element_with_offset(board,560, 400).click().perform()</code>\\ .and it make move,but when I delete 3-4 lines it does&#39;t."}], "tags": [], "owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "is_accepted": true, "score": 0, "last_activity_date": 1475122150, "last_edit_date": 1475122150, "creation_date": 1475121604, "answer_id": 39761172, "question_id": 39757696, "link": "https://stackoverflow.com/questions/39757696/selenium-click-trouble-python/39761172#39761172", "title": "Selenium click trouble (Python)", "body": "<p>This is somewhat complicated. The chess pieces are <code>IMG</code>s that can be clicked but empty chess squares are not represented by an element. You will have to determine a coordinate system and use <a href=\"http://selenium-python.readthedocs.io/api.html#selenium.webdriver.common.action_chains.ActionChains.move_to_element_with_offset\" rel=\"nofollow\"><code>move_to_element_with_offset(to_element, xoffset, yoffset)</code></a> based off the board represented by <code>&lt;div id=\"chessboard_boardarea\" ...&gt;</code> and the board labels A-H and 1-8. For <code>move_to_element_with_offset()</code>, the offsets are relative to the top-left corner of the element. So in this case, (0,0) is the top left corner of the chessboard.</p>\n\n<p>The code below should click the white pawn at A2 and then click A3 which moves it. The board is 640px x 640px. Each square is 80px. The code is clicking in the middle of the square so:</p>\n\n<ul>\n<li>A8 would be 40,40</li>\n<li>A1 is 40,600</li>\n<li>H8 is 600,40</li>\n<li>H1 is 600,600</li>\n</ul>\n\n<p></p>\n\n<pre><code>board = Driver.find_element_by_id(\"chessboard_boardarea\")\naction_chains = ActionChains(Driver)\naction_chains.move_to_element_with_offset(board, 40, 520).click().perform() # A2\naction_chains.move_to_element_with_offset(board, 40, 440).click().perform() # A3\n</code></pre>\n\n<p>You can determine what piece is represented by an element (<code>IMG</code> tag) by looking at the filename in the <code>src</code> attribute. For example, <code>src=\"//images.chesscomfiles.com/chess-themes/pieces/neo/80/bn.png\"</code> has the filename <code>bn.png</code> and is the black knight. Each image filename will be two letters. The first letter is the piece color which is either 'b' for black or 'w' for white. The second letter is the piece name, 'p' pawn, 'r' rook, 'n' knight, 'b' bishop, 'q' queen, and 'k' king. So, <code>bn.png</code> is 'b' for black and 'n' for knight... the black knight.</p>\n\n<p>You can determine where pieces are by using the <code>transform: translate(160px, 160px);</code> portion of the style attribute of the <code>IMG</code> tags representing the different pieces. For example, <code>transform: translate(160px, 160px);</code> this element is at 160,160 which is C6 (the coords are the top-left of the square and each square is 80px).</p>\n"}, {"comments": [{"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1475153389, "post_id": 39764746, "comment_id": 66835945, "body": "Selenium works just fine. Why is Genie better in this case?"}, {"owner": {"reputation": 367, "user_id": 2367514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m95rC.jpg?s=128&g=1", "display_name": "Ankit Sahu", "link": "https://stackoverflow.com/users/2367514/ankit-sahu"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1475154324, "post_id": 39764746, "comment_id": 66836640, "body": "using coordinates based clicks would later result into failure with change in screen/resolution . Genie would generate IDs for you for each of those element."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1475154375, "post_id": 39764746, "comment_id": 66836683, "body": "There aren&#39;t elements on open squares."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1475154462, "post_id": 39764746, "comment_id": 66836763, "body": "You could also add a scaling function. You could get the size of the board and scale the coordinate system based on that. Anyway... just curious."}, {"owner": {"reputation": 367, "user_id": 2367514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m95rC.jpg?s=128&g=1", "display_name": "Ankit Sahu", "link": "https://stackoverflow.com/users/2367514/ankit-sahu"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1475154682, "post_id": 39764746, "comment_id": 66836908, "body": "you are correct about the open squares, din&#39;t observe that earlier, just checked on pieces. I&#39;ll have to actually check  genie&#39;s behavior now. Thanks for bringing it to this point."}], "tags": [], "owner": {"reputation": 367, "user_id": 2367514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m95rC.jpg?s=128&g=1", "display_name": "Ankit Sahu", "link": "https://stackoverflow.com/users/2367514/ankit-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1475153343, "last_edit_date": 1475153343, "creation_date": 1475136466, "answer_id": 39764746, "question_id": 39757696, "link": "https://stackoverflow.com/questions/39757696/selenium-click-trouble-python/39764746#39764746", "title": "Selenium click trouble (Python)", "body": "<p>Selenium Webdriver is not the right tool for it.</p>\n\n<p>You could try <a href=\"https://sourceforge.net/adobe/genie/wiki/Home/\" rel=\"nofollow\">Genie automation tool</a> if you are looking for a free tool. I've tried my hands on Genie, it's a bit complex but at the end it solves your problem.</p>\n"}], "owner": {"reputation": 17, "user_id": 3772506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYeSn.png?s=128&g=1", "display_name": "Nika Tvildiani", "link": "https://stackoverflow.com/users/3772506/nika-tvildiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 1, "accepted_answer_id": 39761172, "answer_count": 2, "score": 0, "last_activity_date": 1475153343, "creation_date": 1475096939, "last_edit_date": 1475120118, "question_id": 39757696, "link": "https://stackoverflow.com/questions/39757696/selenium-click-trouble-python", "title": "Selenium click trouble (Python)", "body": "<p>I am using Selenium (<code>ChromeDriver</code>) to automate a <a href=\"https://www.chess.com/play/computer\" rel=\"nofollow\">chess site</a> but I am having trouble clicking on a piece and moving it. I have tried <code>click()</code> and <code>ActionChains</code> but nothing is working. Here is my code:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\nT = r\"C:\\Users\\HP\\Downloads\\chromedriver.exe\"\noptions = webdriver.ChromeOptions()\noptions.add_argument(\"--start-maximized\")\nDriver = webdriver.Chrome(T, chrome_options=options)\nDriver.get(\"https://www.chess.com/play/computer\")\nDriver.find_element_by_xpath('//*[@id=\"boardMessage\"]/a').click()\nPiece = WebDriverWait(Driver,10).until(EC.element_to_be_clickable((By.XPATH,'//*[@id=\"chessboard_boardarea\"]/img[22]')))\nPiece.click()\n</code></pre>\n\n<p>When I run the script nothing happens but the white pawn should be highlighted in yellow. Can someone explain why <code>.click()</code> or <code>ActionChains</code> is not working? How can I make it work?</p>\n\n<p>P.S. If solution requires JavaScript help, please write it in more detail because I don't know JavaScript at all.</p>\n"}, {"tags": ["python", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 418, "user_id": 6302720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zausC55SAA8/AAAAAAAAAAI/AAAAAAAAAGM/YX9SnwRQbrY/photo.jpg?sz=128", "display_name": "Charlton Lane", "link": "https://stackoverflow.com/users/6302720/charlton-lane"}, "is_accepted": false, "score": 1, "last_activity_date": 1475112234, "creation_date": 1475112234, "answer_id": 39759942, "question_id": 39757662, "link": "https://stackoverflow.com/questions/39757662/python-video-system-not-intilated/39759942#39759942", "title": "Python video system not intilated", "body": "<p>You have <code>pygame.quit()</code> in your main loop, so after one iteration through the loop you are calling <code>pygame.quit()</code>, which causes pygame to no longer be initialized which creates the error of not having a display surface. </p>\n\n<p>Moving <code>pygame.quit()</code> out of the main while loop fixes the issue.</p>\n"}], "owner": {"reputation": 11, "user_id": 6896198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ef39ebeed43bf8a9d4473eb37d63bf?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Wu", "link": "https://stackoverflow.com/users/6896198/alexander-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475122120, "creation_date": 1475096780, "last_edit_date": 1475122120, "question_id": 39757662, "link": "https://stackoverflow.com/questions/39757662/python-video-system-not-intilated", "title": "Python video system not intilated", "body": "<p>Here it is, I dont know what is wrong, I looked at other answers but I still dont know what is wrong?</p>\n\n<pre><code>import pygame\n\npygame.init()\n\ngameWindow = pygame.display.set_mode((1000,600));\npygame.display.set_caption(\"Practice\")\n#game starts\ngameActive = True\nwhile gameActive:\n    for event in pygame.event.get():\n        #print event\n        if event.type == pygame.QUIT:\n            gameActive = False\n\n    pygame.quit()\nquit()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 6802134, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Xzf3A.jpg?s=128&g=1", "display_name": "Cuylar Conly", "link": "https://stackoverflow.com/users/6802134/cuylar-conly"}, "is_accepted": true, "score": 0, "last_activity_date": 1475606654, "last_edit_date": 1592644375, "creation_date": 1475606654, "answer_id": 39859570, "question_id": 39757639, "link": "https://stackoverflow.com/questions/39757639/tf-contrib-learn-quickstart-fix-float64-warning/39859570#39859570", "title": "tf.contrib.learn Quickstart: Fix float64 Warning", "body": "<p>I received this answer from the development team via Git-hub.</p>\n<blockquote>\n<p>Hi @qweelar, the float64 warning is due to a bug with the load_csv_with_header function that was fixed in commit b6813bd. This fix isn't in TensorFlow release 0.10, but should be in the next release.</p>\n<p>In the meantime, for the purposes of the tf.contrib.learn quickstart, you can safely ignore the float64 warning.</p>\n<p>(Side note: In terms of the other deprecation warning, I will be updating the tutorial code to use load_csv_with_header, and will update this issue when that's in place.)</p>\n</blockquote>\n"}], "owner": {"reputation": 375, "user_id": 6802134, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Xzf3A.jpg?s=128&g=1", "display_name": "Cuylar Conly", "link": "https://stackoverflow.com/users/6802134/cuylar-conly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 1, "accepted_answer_id": 39859570, "answer_count": 1, "score": 0, "last_activity_date": 1476827130, "creation_date": 1475096681, "question_id": 39757639, "link": "https://stackoverflow.com/questions/39757639/tf-contrib-learn-quickstart-fix-float64-warning", "title": "tf.contrib.learn Quickstart: Fix float64 Warning", "body": "<p>I'm getting myself started with TensorFlow by working through the posted tutorials.</p>\n\n<p>I have the Linux CPU python2.7 version 0.10.0 running on Fedora 23 (twenty three).</p>\n\n<p>I am trying the tf.contrib.learn Quickstart tutorial as per the following code.</p>\n\n<blockquote>\n  <p><a href=\"https://www.tensorflow.org/versions/r0.10/tutorials/tflearn/index.html#tf-contrib-learn-quickstart\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.10/tutorials/tflearn/index.html#tf-contrib-learn-quickstart</a></p>\n</blockquote>\n\n<pre><code>from __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\n\nimport tensorflow as tf\nimport numpy as np\n\n# Data sets\nIRIS_TRAINING = \"IRIS_data/iris_training.csv\"\nIRIS_TEST = \"IRIS_data/iris_test.csv\"\n\n# Load datasets.\ntraining_set = tf.contrib.learn.datasets.base.load_csv(filename=IRIS_TRAINING,\n                                                   target_dtype=np.int)\ntest_set = tf.contrib.learn.datasets.base.load_csv(filename=IRIS_TEST,\n                                               target_dtype=np.int)\n\n# Specify that all features have real-value data\nfeature_columns = [tf.contrib.layers.real_valued_column(\"\", dimension=4)]\n\n# Build 3 layer DNN with 10, 20, 10 units respectively.\nclassifier = tf.contrib.learn.DNNClassifier(feature_columns=feature_columns,\n                                        hidden_units=[10, 20, 10],\n                                        n_classes=3,\n                                        model_dir=\"/tmp/iris_model\")\n\n# Fit model.\nclassifier.fit(x=training_set.data, \n           y=training_set.target, \n           steps=2000)\n\n# Evaluate accuracy.\naccuracy_score = classifier.evaluate(x=test_set.data,\n                                 y=test_set.target)[\"accuracy\"]\nprint('Accuracy: {0:f}'.format(accuracy_score))\n\n# Classify two new flower samples.\nnew_samples = np.array(\n[[6.4, 3.2, 4.5, 1.5], [5.8, 3.1, 5.0, 1.7]], dtype=float)\ny = classifier.predict(new_samples)\nprint('Predictions: {}'.format(str(y)))\n</code></pre>\n\n<p>The Code Executes, but gives float64 warnings. As Such:</p>\n\n<pre><code>$ python confErr.py\nWARNING:tensorflow:load_csv (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed after 2016-09-15.\nInstructions for updating:\nPlease use load_csv_{with|without}_header instead.\nWARNING:tensorflow:load_csv (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed after 2016-09-15.\nInstructions for updating:\nPlease use load_csv_{with|without}_header instead.\nWARNING:tensorflow:Using default config.\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nWARNING:tensorflow:Setting feature info to TensorSignature(dtype=tf.float64, shape=TensorShape([Dimension(None), Dimension(4)]), is_sparse=False)\nWARNING:tensorflow:Setting targets info to TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False)\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nWARNING:tensorflow:Given features: Tensor(\"input:0\", shape=(?, 4), dtype=float64), required signatures: TensorSignature(dtype=tf.float64, shape=TensorShape([Dimension(None), Dimension(4)]), is_sparse=False).\nWARNING:tensorflow:Given targets: Tensor(\"output:0\", shape=(?,), dtype=int64), required signatures: TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False).\nAccuracy: 0.966667\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nPredictions: [1 1]\n</code></pre>\n\n<p>Note: replace 'load_csv()' with 'load_csv_with_header()' produces the correct Prediction. but float64 warnings remain.</p>\n\n<p>I have tried explicitly listing dtype (np.int32 ; np.float32; tf.int32; tf.float32) for training_set, test_set and new_samples.</p>\n\n<p>I also tried 'casting' feature_columns as:</p>\n\n<pre><code>feature_columns = tf.cast(feature_columns, tf.float32)\n</code></pre>\n\n<p>The problems with float64 are known development issue, but I'm wondering if there is some workaround?</p>\n"}, {"tags": ["python", "string", "api", "integer", "urllib"], "comments": [{"owner": {"reputation": 39, "user_id": 6896170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fd79aa17e21ca070543e2c601e5d3395?s=128&d=identicon&r=PG&f=1", "display_name": "Finn Geraghty", "link": "https://stackoverflow.com/users/6896170/finn-geraghty"}, "edited": false, "score": 0, "creation_date": 1475096631, "post_id": 39757614, "comment_id": 66811216, "body": "The second part that goes wrong is      for item in data         #print data[&#39;result&#39;]         print item[&#39;latitude&#39;]         print item[&#39;longitude&#39;]"}, {"owner": {"reputation": 39, "user_id": 6896170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fd79aa17e21ca070543e2c601e5d3395?s=128&d=identicon&r=PG&f=1", "display_name": "Finn Geraghty", "link": "https://stackoverflow.com/users/6896170/finn-geraghty"}, "reply_to_user": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "edited": false, "score": 0, "creation_date": 1475096825, "post_id": 39757614, "comment_id": 66811319, "body": "File &quot;/Library/Frameworks/Python.framework/Versions/2.7/lib/pytho&zwnj;&#8203;n2.7/json/decoder.py&zwnj;&#8203;&quot;, line 364, in decode     obj, end = self.raw_decode(s, idx=_w(s, 0).end()) TypeError: expected string or buffer"}, {"owner": {"reputation": 39, "user_id": 6896170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fd79aa17e21ca070543e2c601e5d3395?s=128&d=identicon&r=PG&f=1", "display_name": "Finn Geraghty", "link": "https://stackoverflow.com/users/6896170/finn-geraghty"}, "reply_to_user": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "edited": false, "score": 0, "creation_date": 1475097160, "post_id": 39757614, "comment_id": 66811496, "body": "It still errors :( - are we importing the text somehow? -  ................line 287, in load     return loads(fp.read(), AttributeError: &#39;str&#39; object has no attribute &#39;read&#39;"}, {"owner": {"reputation": 39, "user_id": 6896170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fd79aa17e21ca070543e2c601e5d3395?s=128&d=identicon&r=PG&f=1", "display_name": "Finn Geraghty", "link": "https://stackoverflow.com/users/6896170/finn-geraghty"}, "edited": false, "score": 0, "creation_date": 1475098392, "post_id": 39757614, "comment_id": 66812061, "body": "I don&#39;t need to even print the Latitude/Longitude, I wish to use them to create another URL to load. My results look like:  {u&#39;status&#39;: 200, u&#39;result&#39;: {u&#39;eastings&#39;: 531025, u&#39;outcode&#39;: u&#39;N8&#39;, u&#39;admin_county&#39;: None, u&#39;postcode&#39;:"}], "owner": {"reputation": 39, "user_id": 6896170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fd79aa17e21ca070543e2c601e5d3395?s=128&d=identicon&r=PG&f=1", "display_name": "Finn Geraghty", "link": "https://stackoverflow.com/users/6896170/finn-geraghty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475098115, "creation_date": 1475096581, "last_edit_date": 1475098115, "question_id": 39757614, "link": "https://stackoverflow.com/questions/39757614/urllib2-returns-1-result-on-a-postcode-lookup-causing-problems-with-tuples-lat", "title": "urllib2 returns &gt;1 result on a postcode lookup, causing problems with tuples later", "body": "<p>I'm making a very simple lookup in Python to convert user input into a postcode lookup, which I then want to use to do a separate lookup.</p>\n\n<p>When I then try and take the latitude and longitude from the data that returns 'result' - I have issues as I get two exactly the same results.</p>\n\n<p>I then have issues relating to '..must be integers, not str'</p>\n\n<p>Can I somehow 'Cast' this value as a string (I've not been able to) or can I chose to limit my results from urllib2 on PostcodeURL to one?</p>\n\n<pre><code>import urllib2\nimport json\n\nPostcode = raw_input(\"Hello hello hello, what's your postcode?\")\n# Get user string input UK postcode\nPostcodeURL = 'https://api.postcodes.io/postcodes/' + Postcode\njson_obj = urllib2.urlopen(PostcodeURL)\ndata = json.load(json_obj)\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 1, "creation_date": 1475096776, "post_id": 39757609, "comment_id": 66811298, "body": "I believe <code>DictWriter</code> expects a <code>list</code> of <code>dict</code>s rather than a <code>dict</code> of <code>list</code>s. See the example here: <a href=\"https://docs.python.org/2/library/csv.html#csv.DictWriter\" rel=\"nofollow noreferrer\">docs.python.org/2/library/csv.html#csv.DictWriter</a>"}], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 5066768, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-YoBUVJzZy6I/AAAAAAAAAAI/AAAAAAAAC6Y/7HFIlfzMvMc/photo.jpg?sz=128", "display_name": "Ryan Erwin", "link": "https://stackoverflow.com/users/5066768/ryan-erwin"}, "edited": false, "score": 0, "creation_date": 1475097546, "post_id": 39757688, "comment_id": 66811682, "body": "The reason I&#39;m not using <code>pandas</code> is because looping over multiple dictionaries (a list of test_dict&#39;s) and I want to write each to a row to disk."}, {"owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "reply_to_user": {"reputation": 741, "user_id": 5066768, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-YoBUVJzZy6I/AAAAAAAAAAI/AAAAAAAAC6Y/7HFIlfzMvMc/photo.jpg?sz=128", "display_name": "Ryan Erwin", "link": "https://stackoverflow.com/users/5066768/ryan-erwin"}, "edited": false, "score": 0, "creation_date": 1475097862, "post_id": 39757688, "comment_id": 66811834, "body": "@RyanErwin But all in the same &#39;test.csv&#39;  file?"}, {"owner": {"reputation": 741, "user_id": 5066768, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-YoBUVJzZy6I/AAAAAAAAAAI/AAAAAAAAC6Y/7HFIlfzMvMc/photo.jpg?sz=128", "display_name": "Ryan Erwin", "link": "https://stackoverflow.com/users/5066768/ryan-erwin"}, "edited": false, "score": 0, "creation_date": 1475098325, "post_id": 39757688, "comment_id": 66812036, "body": "yes, so assuming they&#39;re all the same size as test_dict, same keys, with different values, then each would add four new rows."}], "tags": [], "owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "is_accepted": false, "score": 0, "last_activity_date": 1475098604, "last_edit_date": 1475098604, "creation_date": 1475096910, "answer_id": 39757688, "question_id": 39757609, "link": "https://stackoverflow.com/questions/39757609/write-multiple-rows-from-dict-using-csv/39757688#39757688", "title": "Write multiple rows from dict using csv", "body": "<p>If you don't mind using a 3rd-party package, you could do it with <a href=\"http://pandas.pydata.org/\" rel=\"nofollow\"><code>pandas</code></a>.</p>\n\n<pre><code>import pandas as pd\npd.DataFrame(test_dict).to_csv('test.csv', index=False)\n</code></pre>\n\n<p><strong>update</strong></p>\n\n<p>So, you have several dictionaries and all of them seems to come from a scraping routine. </p>\n\n<pre><code>import pandas as pd\n\ntest_dict = {\"review_id\": [1, 2, 3, 4],\n             \"text\": [5, 6, 7, 8]}\npd.DataFrame(test_dict).to_csv('test.csv', index=False)\n\nlist_of_dicts = [test_dict, test_dict]\nfor d in list_of_dicts:\n    pd.DataFrame(d).to_csv('test.csv', index=False, mode='a', header=False)\n</code></pre>\n\n<p>This time, you would be appending to the file and without the header.</p>\n\n<p>The output is:</p>\n\n<pre><code>review_id,text\n1,5\n2,6\n3,7\n4,8\n1,5\n2,6\n3,7\n4,8\n1,5\n2,6\n3,7\n4,8\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 741, "user_id": 5066768, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-YoBUVJzZy6I/AAAAAAAAAAI/AAAAAAAAC6Y/7HFIlfzMvMc/photo.jpg?sz=128", "display_name": "Ryan Erwin", "link": "https://stackoverflow.com/users/5066768/ryan-erwin"}, "edited": false, "score": 0, "creation_date": 1475097326, "post_id": 39757714, "comment_id": 66811578, "body": "The reason I&#39;m not using <code>pandas</code> is because looping over multiple dictionaries (a list of test_dict&#39;s) and I want to write each to a row to disk."}, {"owner": {"reputation": 493, "user_id": 4190304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w0uFI.jpg?s=128&g=1", "display_name": "Ajay Pal", "link": "https://stackoverflow.com/users/4190304/ajay-pal"}, "reply_to_user": {"reputation": 741, "user_id": 5066768, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-YoBUVJzZy6I/AAAAAAAAAAI/AAAAAAAAC6Y/7HFIlfzMvMc/photo.jpg?sz=128", "display_name": "Ryan Erwin", "link": "https://stackoverflow.com/users/5066768/ryan-erwin"}, "edited": false, "score": 0, "creation_date": 1475097830, "post_id": 39757714, "comment_id": 66811823, "body": "Do u have a list of dict something like that:  [{&#39;review_id&#39;: [1, 2, 3, 4], &#39;text&#39;: [5, 6, 7, 8]},{&#39;review_id2&#39;: [1, 2, 3, 4], &#39;text2&#39;: [5, 6, 7, 8]}] and you want to create a csv out of it with review_id as column 1, text as col2, and so on.. ?? Am i right ?"}], "tags": [], "owner": {"reputation": 493, "user_id": 4190304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w0uFI.jpg?s=128&g=1", "display_name": "Ajay Pal", "link": "https://stackoverflow.com/users/4190304/ajay-pal"}, "is_accepted": false, "score": 0, "last_activity_date": 1475097024, "creation_date": 1475097024, "answer_id": 39757714, "question_id": 39757609, "link": "https://stackoverflow.com/questions/39757609/write-multiple-rows-from-dict-using-csv/39757714#39757714", "title": "Write multiple rows from dict using csv", "body": "<p>Try using pandas of python..</p>\n\n<p>Here is a simple example</p>\n\n<pre><code>import pandas as pd\ntest_dict = {\"review_id\": [1, 2, 3, 4],\n         \"text\": [5, 6, 7, 8]}\nd1 = pd.DataFrame(test_dict)\nd1.to_csv(\"output.csv\")\n</code></pre>\n\n<p>Cheers</p>\n"}, {"tags": [], "owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "is_accepted": false, "score": 1, "last_activity_date": 1475097772, "creation_date": 1475097772, "answer_id": 39757893, "question_id": 39757609, "link": "https://stackoverflow.com/questions/39757609/write-multiple-rows-from-dict-using-csv/39757893#39757893", "title": "Write multiple rows from dict using csv", "body": "<p>Your first example will work with minor edits. <code>DictWriter</code> expects a <code>list</code> of <code>dict</code>s rather than a <code>dict</code> of <code>list</code>s. Assuming you can't change the format of the <code>test_dict</code>:</p>\n\n<pre><code>import csv\ntest_dict = {\"review_id\": [1, 2, 3, 4],\n             \"text\": [5, 6, 7, 8]}\n\ndef convert_dict(mydict, numentries):\n    data = []\n    for i in range(numentries):\n        row = {}\n        for k, l in mydict.iteritems():\n            row[k] = l[i]\n        data.append(row)\n    return data\n\nwith open('test.csv', 'w') as csvfile:\n    fieldnames = [\"review_id\", \"text\"]\n    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n    writer.writeheader()\n    writer.writerows(convert_dict(test_dict, 4))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1475098126, "last_edit_date": 1475098126, "creation_date": 1475097777, "answer_id": 39757896, "question_id": 39757609, "link": "https://stackoverflow.com/questions/39757609/write-multiple-rows-from-dict-using-csv/39757896#39757896", "title": "Write multiple rows from dict using csv", "body": "<p>The built-in <a href=\"https://docs.python.org/2/library/functions.html#zip\" rel=\"nofollow\"><code>zip</code> function</a> can join together different iterables into tuples which can be passed to <code>writerows</code>. Try this as the last line:</p>\n\n<pre><code>writer.writerows(zip(test_dict[\"review_id\"], test_dict[\"text\"]))\n</code></pre>\n\n<p>You can see what it's doing by making a list:</p>\n\n<pre><code>&gt;&gt;&gt; list(zip(test_dict[\"review_id\"], test_dict[\"text\"]))\n[(1, 5), (2, 6), (3, 7), (4, 8)]\n</code></pre>\n\n<p><strong>Edit</strong>: In this particular case, you probably want a regular <a href=\"https://docs.python.org/2/library/csv.html#writer-objects\" rel=\"nofollow\">csv.Writer</a>, since what you effectively have is now a list.</p>\n"}, {"comments": [{"owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1475102849, "post_id": 39758030, "comment_id": 66813644, "body": "This example relies on dictionary iteration order."}], "tags": [], "owner": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "is_accepted": false, "score": 0, "last_activity_date": 1475098837, "last_edit_date": 1475098837, "creation_date": 1475098404, "answer_id": 39758030, "question_id": 39757609, "link": "https://stackoverflow.com/questions/39757609/write-multiple-rows-from-dict-using-csv/39758030#39758030", "title": "Write multiple rows from dict using csv", "body": "<p>The problem is that with <code>DictWriter.writerows()</code> you are forced to have a dict for each row. Instead you can simply add the values changing your csv creation:</p>\n\n<pre><code>with open('test.csv', 'w') as csvfile:\n     fieldnames = test_dict.keys()\n     fieldvalues = zip(*test_dict.values())\n\n     writer = csv.writer(csvfile)\n     writer.writerow(fieldnames)\n     writer.writerows(fieldvalues)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4028, "user_id": 631199, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8d14e043d3c1f08e23d0a6fbbed1be3e?s=128&d=identicon&r=PG", "display_name": "Brian Bruggeman", "link": "https://stackoverflow.com/users/631199/brian-bruggeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1475099976, "creation_date": 1475099976, "answer_id": 39758347, "question_id": 39757609, "link": "https://stackoverflow.com/questions/39757609/write-multiple-rows-from-dict-using-csv/39758347#39758347", "title": "Write multiple rows from dict using csv", "body": "<p>You have two different problems in your question:</p>\n\n<ol>\n<li>Create a csv file from a dictionary where the values are containers and not primitives.</li>\n</ol>\n\n<p>For the first problem, the solution is generally to transform the container type into a primitive type.  The most common method is creating a json-string.  So for example:</p>\n\n<pre><code>&gt;&gt;&gt; import json\n&gt;&gt;&gt; x = [2, 4, 6, 8, 10]\n&gt;&gt;&gt; json_string = json.dumps(x)\n&gt;&gt;&gt; json_string\n'[2, 4, 6, 8, 10]'\n</code></pre>\n\n<p>So your data conversion might look like:</p>\n\n<pre><code>import json\n\n\ndef convert(datadict):\n    '''Generator which converts a dictionary of containers into a dictionary of json-strings.\n\n    args:\n        datadict(dict): dictionary which needs conversion\n\n    yield:\n        tuple: key and string\n    '''\n    for key, value in datadict.items():\n        yield key, json.dumps(value)\n\n\ndef dump_to_csv_using_dict(datadict, fields=None, filepath=None, delimiter=None):\n    '''Dumps a datadict value into csv\n\n    args:\n        datadict(list): list of dictionaries to dump\n        fieldnames(list): field sequence to use from the dictionary [default: sorted(datadict.keys())]\n        filepath(str): filepath to save to  [default: 'tmp.csv']\n        delimiter(str): delimiter to use in csv [default: '|']\n    '''\n    fieldnames = sorted(datadict.keys()) if fields is None else fields\n    filepath = 'tmp.csv' if filepath is None else filepath\n    delimiter = '|' if not delimiter else delimiter\n    with open(filepath, 'w') as csvfile:\n       writer = csv.DictWriter(csvfile, fieldnames, restval='', extrasaction='ignore', delimiter=delimiter)\n       writer.writeheader()\n       for each_dict in datadict:\n           writer.writerow(each_dict)\n</code></pre>\n\n<p>So the naive conversion looks like this:</p>\n\n<pre><code># Conversion code\ntest_data = {\n    \"review_id\": [1, 2, 3, 4],\n         \"text\": [5, 6, 7, 8]}\n}\n\nconverted_data = dict(convert(test_data))\ndata_list = [converted_data]\ndump_to_csv(data_list)\n</code></pre>\n\n<ol start=\"2\">\n<li>Create a final value that is actually some sort of a merging of two disparate data sets.</li>\n</ol>\n\n<p>To do this, you need to find a way to combine data from different keys.  This is not an easy problem to generically solve.</p>\n\n<p>That said, it's easy to combine two lists with zip.</p>\n\n<pre><code>&gt;&gt;&gt; x = [2, 4, 6]\n&gt;&gt;&gt; y = [1, 3, 5]\n&gt;&gt;&gt; zip(y, x)\n[(1, 2), (3, 4), (5, 6)]\n</code></pre>\n\n<p>In addition, in the event that your lists are not the same size, python's itertools package provides a method, izip_longest, which will yield back the full zip even if one list is shorter than another.  Note izip_longest returns a generator.</p>\n\n<pre><code>from itertools import izip_longest\n&gt;&gt;&gt; x = [2, 4]\n&gt;&gt;&gt; y = [1, 3, 5]\n&gt;&gt;&gt; z = izip_longest(y, x, fillvalue=None)  # default fillvalue is None\n&gt;&gt;&gt; list(z)  # z is a generator\n[(1, 2), (3, 4), (5, None)]\n</code></pre>\n\n<p>So we could add another function here:</p>\n\n<pre><code>from itertoops import izip_longest\n\ndef combine(data, fields=None, default=None):\n    '''Combines fields within data\n\n    args:\n        data(dict): a dictionary with lists as values\n        fields(list): a list of keys to combine [default: all fields in random order]\n        default: default fill value [default: None]\n    yields:\n        tuple: columns combined into rows\n    '''\n    fields = data.keys() if field is None else field\n    columns = [data.get(field) for field in fields]\n    for values in izip_longest(*columns, fillvalue=default):\n        yield values\n</code></pre>\n\n<p>And now we can use this to update our original conversion.</p>\n\n<pre><code>def dump_to_csv(data, filepath=None, delimiter=None):\n    '''Dumps list into csv\n\n    args:\n        data(list): list of values to dump\n        filepath(str): filepath to save to  [default: 'tmp.csv']\n        delimiter(str): delimiter to use in csv [default: '|']\n    '''\n    fieldnames = sorted(datadict.keys()) if fields is None else fields\n    filepath = 'tmp.csv' if filepath is None else filepath\n    delimiter = '|' if not delimiter else delimiter\n    with open(filepath, 'w') as csvfile:\n       writer = csv.writer(csvfile, delimiter=delimiter)\n       for each_row in data:\n           writer.writerow(each_dict)\n\n# Conversion code\ntest_data = {\n    \"review_id\": [1, 2, 3, 4],\n         \"text\": [5, 6, 7, 8]}\n}\n\ncombined_data = combine(test_data)\ndata_list = [combined_data]\ndump_to_csv(data_list)    \n</code></pre>\n"}], "owner": {"reputation": 741, "user_id": 5066768, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-YoBUVJzZy6I/AAAAAAAAAAI/AAAAAAAAC6Y/7HFIlfzMvMc/photo.jpg?sz=128", "display_name": "Ryan Erwin", "link": "https://stackoverflow.com/users/5066768/ryan-erwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2134, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1475099976, "creation_date": 1475096564, "last_edit_date": 1475097413, "question_id": 39757609, "link": "https://stackoverflow.com/questions/39757609/write-multiple-rows-from-dict-using-csv", "title": "Write multiple rows from dict using csv", "body": "<p><strong>Update</strong>: I do not want to use <code>pandas</code> because I have a list of dict's and want to write each one to disk as they come in (part of webscraping workflow).</p>\n\n<p>I have a dict that I'd like to write to a csv file. I've come up with a solution, but I'd like to know if there's a more <code>pythonic</code> solution available. Here's what I envisioned (but doesn't work):</p>\n\n<pre><code>import csv\ntest_dict = {\"review_id\": [1, 2, 3, 4],\n             \"text\": [5, 6, 7, 8]}\n\nwith open('test.csv', 'w') as csvfile:\n    fieldnames = [\"review_id\", \"text\"]\n    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n    writer.writeheader()\n    writer.writerows(test_dict)\n</code></pre>\n\n<p>Which would ideally result in:</p>\n\n<pre><code>review_id text\n        1    5\n        2    6\n        3    7\n        4    8 \n</code></pre>\n\n<p>The code above doesn't seem to work that way I'd expect it to and throws a value error. So, I've  turned to following solution (which does work, but seems verbose).</p>\n\n<pre><code>with open('test.csv', 'w') as csvfile:\n    fieldnames = [\"review_id\", \"text\"]\n    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n    writer.writeheader()\n    response = test_dict\n    cells = [{x: {key: val}} for key, vals in response.items()\n             for x, val in enumerate(vals)]\n    rows = {}\n    for d in cells:\n        for key, val in d.items():\n          if key in rows:\n            rows[key].update(d.get(key, None))\n          else:\n            rows[key] = d.get(key, None)     \n    for row in [val for _, val in rows.items()]:\n        writer.writerow(row)\n</code></pre>\n\n<p>Again, to reiterate what I'm looking for: the block of code directly above works (i.e., produces the desired result mentioned early in the post), but seems verbose. So, is there a more <code>pythonic</code> solution?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pyspark"], "comments": [{"owner": {"reputation": 9179, "user_id": 5827767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36cb15cf87fdd2b880ca1193443b653?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5827767/david"}, "edited": false, "score": 0, "creation_date": 1475096629, "post_id": 39757591, "comment_id": 66811215, "body": "Can you show the code that caused the error?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1475097660, "post_id": 39757591, "comment_id": 66811745, "body": "You cut off the traceback. Can you please show <i>more lines of the code</i>? I can trace this back to a <code>StructField</code>. Perhaps the parent lines show where that field is stored."}], "answers": [{"comments": [{"owner": {"reputation": 10900, "user_id": 463300, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7656adad2ef7c5ac31f6a55fcdb1734d?s=128&d=identicon&r=PG", "display_name": "Sean Nguyen", "link": "https://stackoverflow.com/users/463300/sean-nguyen"}, "edited": false, "score": 0, "creation_date": 1475098488, "post_id": 39757681, "comment_id": 66812108, "body": "Thanks! I am able to figure out my error based on your hint"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 5, "last_activity_date": 1475097597, "last_edit_date": 1475097597, "creation_date": 1475096857, "answer_id": 39757681, "question_id": 39757591, "link": "https://stackoverflow.com/questions/39757591/what-is-causing-unicode-object-has-no-attribute-toordinal-in-pyspark/39757681#39757681", "title": "What is causing &#39;unicode&#39; object has no attribute &#39;toordinal&#39; in pyspark?", "body": "<p>The specific exception is caused by trying to store a <code>unicode</code> value in a <em>date</em> datatype that is part of a struct. The conversion of the Python type to Spark internal representation expected to be able to call <a href=\"https://docs.python.org/3/library/datetime.html#datetime.date.toordinal\" rel=\"noreferrer\"><code>date.toordinal()</code></a> method.</p>\n\n<p>Presumably you have a dataframe schema somewhere that consists of a struct type with a date field, and something tried to stuff a string into that.</p>\n\n<p>You can trace this based on the traceback you <em>do</em> have. The <a href=\"https://github.com/apache/spark\" rel=\"noreferrer\">Apache Spark source code</a> is hosted on GitHub, and your traceback points to the <a href=\"https://github.com/apache/spark/blob/master/python/pyspark/sql/types.py\" rel=\"noreferrer\"><code>pyspark/sql/types.py</code> file</a>. The lines point to the <a href=\"https://github.com/apache/spark/blob/master/python/pyspark/sql/types.py#L435-L436\" rel=\"noreferrer\"><code>StructField.toInternal()</code> method</a>, which delegates to the <code>self.dataType.toInternal()</code> method:</p>\n\n<pre><code>class StructField(DataType):\n    # ...\n    def toInternal(self, obj):\n        return self.dataType.toInternal(obj)\n</code></pre>\n\n<p>which in your traceback ends up at the <a href=\"https://github.com/apache/spark/blob/master/python/pyspark/sql/types.py#L170-L172\" rel=\"noreferrer\"><code>DateType.toInternal()</code> method</a>:</p>\n\n<pre><code>class DateType(AtomicType):\n    # ...\n    def toInternal(self, d):\n        if d is not None:\n            return d.toordinal() - self.EPOCH_ORDINAL\n</code></pre>\n\n<p>So we know this is about a date field in a struct. The <code>DateType.fromInternal()</code> shows you what Python type is produced in the opposite direction:</p>\n\n<pre><code>def fromInternal(self, v):\n    if v is not None:\n        return datetime.date.fromordinal(v + self.EPOCH_ORDINAL)\n</code></pre>\n\n<p>It is safe to assume that <code>toInternal()</code> expects the same type when converting in the other direction.</p>\n"}], "owner": {"reputation": 10900, "user_id": 463300, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7656adad2ef7c5ac31f6a55fcdb1734d?s=128&d=identicon&r=PG", "display_name": "Sean Nguyen", "link": "https://stackoverflow.com/users/463300/sean-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2168, "favorite_count": 0, "accepted_answer_id": 39757681, "answer_count": 1, "score": 4, "last_activity_date": 1475097597, "creation_date": 1475096499, "question_id": 39757591, "link": "https://stackoverflow.com/questions/39757591/what-is-causing-unicode-object-has-no-attribute-toordinal-in-pyspark", "title": "What is causing &#39;unicode&#39; object has no attribute &#39;toordinal&#39; in pyspark?", "body": "<p>I got this error but I don't what causes it. My python code ran in pyspark. The stacktrace is long and i just show some of them. All the stacktrace doesn't show my code in it so I don't know where to look for. What is possible the cause for this error? </p>\n\n<pre><code>/usr/hdp/2.4.2.0-258/spark/python/lib/py4j-0.9-src.zip/py4j/protocol.py in get_return_value(answer, gateway_client, target_id, name)\n    306                 raise Py4JJavaError(\n    307                     \"An error occurred while calling {0}{1}{2}.\\n\".\n--&gt; 308                     format(target_id, \".\", name), value)\n    309             else:\n    310                 raise Py4JError(\n\nPy4JJavaError: An error occurred while calling o107.parquet.\n\n...\nFile \"/usr/hdp/2.4.2.0-258/spark/python/lib/pyspark.zip/pyspark/sql/types.py\", line 435, in toInternal\n    return self.dataType.toInternal(obj)\n  File \"/usr/hdp/2.4.2.0-258/spark/python/lib/pyspark.zip/pyspark/sql/types.py\", line 172, in toInternal\n    return d.toordinal() - self.EPOCH_ORDINAL\nAttributeError: 'unicode' object has no attribute 'toordinal'\n</code></pre>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "regex", "python-2.7"], "comments": [{"owner": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1475096522, "post_id": 39757573, "comment_id": 66811161, "body": "<code>re.match(r&#39;^\\d{5}\\.\\d\\.\\d{5}$&#39;, string)</code>"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1475096599, "post_id": 39757573, "comment_id": 66811197, "body": "Use <code>search</code> instead. <code>match</code> only works at the beginning of a string."}, {"owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475096722, "post_id": 39757573, "comment_id": 66811270, "body": "This matches &#39;ddddd#d#ddddd&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4847912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5a0dbcd66d527947f3e3679f978f8251?s=128&d=identicon&r=PG&f=1", "display_name": "ThatOnePythonNoob", "link": "https://stackoverflow.com/users/4847912/thatonepythonnoob"}, "edited": false, "score": 0, "creation_date": 1475097062, "post_id": 39757619, "comment_id": 66811448, "body": "What do you mean by &#39;To match whole words&#39;, when there are no words included? :) Sorry for misunderstanding."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 89, "user_id": 4847912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5a0dbcd66d527947f3e3679f978f8251?s=128&d=identicon&r=PG&f=1", "display_name": "ThatOnePythonNoob", "link": "https://stackoverflow.com/users/4847912/thatonepythonnoob"}, "edited": false, "score": 0, "creation_date": 1475097243, "post_id": 39757619, "comment_id": 66811539, "body": "Whole word matching means there are no &quot;word&quot; chars before or after the value. &quot;Word&quot; chars include letters, digits and underscore (~<code>[a-zA-Z0-9_]</code> - depending on the <code>re.UNICODE</code> flag)."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 2, "last_activity_date": 1475096601, "creation_date": 1475096601, "answer_id": 39757619, "question_id": 39757573, "link": "https://stackoverflow.com/questions/39757573/use-regex-to-match-5-num-dot-1-num-dot-5-num/39757619#39757619", "title": "Use regex to match 5 num, dot, 1 num, dot, 5 num", "body": "<p>Use the following with <code>re.findall</code>:</p>\n\n<pre><code>r'\\b\\d{5}\\.\\d\\.\\d{5}\\b'\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/ExVBOp/1\" rel=\"nofollow\">regex demo</a></p>\n\n<p>The point is:</p>\n\n<ul>\n<li>to match a digit, you need to use <code>\\d</code></li>\n<li>a dot must be escaped to match a literal dot</li>\n<li>to match whole words, you need to use <code>\\b</code> word boundary or you will find matches of 5-digit chunks in <code>2234567654</code> like strings</li>\n<li><code>re.findall</code> will return a list of all non-overlapping matches (since there are no capturing groups in this pattern) </li>\n</ul>\n\n<p>Sample Python code:</p>\n\n<pre><code>import re\nregex = r\"\\b\\d{5}\\.\\d\\.\\d{5}\\b\"\ntest_str = \"{u'blabla': u'asdf', u'dd': u'a', u'cotry': u'jjK', u'l': u'/q/iii:00000.1.17372', u'stfe': u'', u'fdfhdiufhi': u'GB', u'y_name': u'Unitm', u'mw': u'00000.1.17372'}\"\nmatches = re.findall(regex, test_str)\nprint(matches)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "is_accepted": false, "score": 0, "last_activity_date": 1475096622, "creation_date": 1475096622, "answer_id": 39757626, "question_id": 39757573, "link": "https://stackoverflow.com/questions/39757573/use-regex-to-match-5-num-dot-1-num-dot-5-num/39757626#39757626", "title": "Use regex to match 5 num, dot, 1 num, dot, 5 num", "body": "<p>The pattern you want is:</p>\n\n<pre><code>\\d{5}\\.\\d\\.\\d{5}\n</code></pre>\n\n<p>You need to escape the dots and use the proper token for a number, which is <code>\\d</code>.</p>\n"}], "owner": {"reputation": 89, "user_id": 4847912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5a0dbcd66d527947f3e3679f978f8251?s=128&d=identicon&r=PG&f=1", "display_name": "ThatOnePythonNoob", "link": "https://stackoverflow.com/users/4847912/thatonepythonnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475096622, "creation_date": 1475096418, "question_id": 39757573, "link": "https://stackoverflow.com/questions/39757573/use-regex-to-match-5-num-dot-1-num-dot-5-num", "title": "Use regex to match 5 num, dot, 1 num, dot, 5 num", "body": "<p>I'm trying to create regex to match the following pattern:</p>\n\n<pre><code>00000.1.17372\n</code></pre>\n\n<p>i.e: <code>5 Numbers DOT 1 Number DOT 5 Numbers</code></p>\n\n<p>I have tried the following re.match:</p>\n\n<pre><code>find = re.match('d{5}.d{1}.d{5}', string)\n</code></pre>\n\n<p>In context:</p>\n\n<pre><code>import re\n\nstring = \"{u'blabla': u'asdf', u'dd': u'a', u'cotry': u'jjK', u'l': u'/q/iii:00000.1.17372', u'stfe': u'', u'fdfhdiufhi': u'GB', u'y_name': u'Unitm', u'mw': u'00000.1.17372'}\"\n\nfind = re.match('d{5}.d{1}.d{5}', string)\n\nprint find\n</code></pre>\n\n<p>However, this doesn't seem to work, as the output is:</p>\n\n<pre><code>None\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "random", "precision"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1475096462, "post_id": 39757559, "comment_id": 66811128, "body": "You can never expect floating point operations to be exact. You should change your algorithm to accommodate some errors. Otherwise there are some fancier sums in the <code>statistics</code> module, but that&#39;s not really the point now. Especially with numpy, where vectorization should be a basic tool, you can never rely on the order of arithmetic operations."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1475096605, "post_id": 39757559, "comment_id": 66811203, "body": "How/where are you using <code>np.in1d</code>? For the listed code, you can use <code>np.isclose(s1,s2)</code>."}, {"owner": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1475098258, "post_id": 39757559, "comment_id": 66812002, "body": "@Divakar I don&#39;t use it in the exemple but in my actual algorithm I would use <code>np.in1d(s1, s2)</code> and other equivalent arrays obtained through other operations like product, etc..."}, {"owner": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1475098664, "post_id": 39757559, "comment_id": 66812188, "body": "@Andras Deak I think I need to rethink the choice of my tag... Random floats is probably not a good idea as you point out but it was a convenient one since I am doing this on a very large array and I perform operations like <code>tag**3</code> which I was afraid would lead to overflows if using integers... I&#39;m opened to suggestions (my tag array must have non repeated values)..."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1475098743, "post_id": 39757559, "comment_id": 66812215, "body": "No, no, the solution is usually not to restrict your data from floats:) My point was the same as that of Divakar: don&#39;t use exact tests, use closeness tests. But you seem to be already aware of this, which is why I only suggested to restructure your algorithm to avoid exact tests."}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "edited": false, "score": 0, "creation_date": 1475102576, "post_id": 39758154, "comment_id": 66813560, "body": "This implementation of in1d with tolerance uses a lot more memory (for big arrays)... so I did instead a <code>np.around</code> of the arrays I want to compare with a number of decimals close to the floating point precision and it seems to do the job. Thank you."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "edited": false, "score": 0, "creation_date": 1475104164, "post_id": 39758154, "comment_id": 66814010, "body": "@thomleo Good point! Added that into the post, hope that&#39;s okay."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 4, "last_activity_date": 1475104143, "last_edit_date": 1475104143, "creation_date": 1475099007, "answer_id": 39758154, "question_id": 39757559, "link": "https://stackoverflow.com/questions/39757559/working-with-floating-point-numpy-arrays-for-comparison-and-related-operations/39758154#39758154", "title": "Working with floating point NumPy arrays for comparison and related operations", "body": "<p>For the listed code, you can use <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.isclose.html\" rel=\"nofollow\"><code>np.isclose</code></a> and with it tolerance values could be specified too.</p>\n\n<p>Using the provided sample, let's see how it could be used -</p>\n\n<pre><code>In [201]: n = 10\n     ...: m = 4\n     ...: \n     ...: tag = np.random.rand(n, m)\n     ...: \n     ...: s1 = np.sum(tag, axis=1)\n     ...: s2 = np.sum(tag[:, ::-1], axis=1)\n     ...: \n\nIn [202]: np.nonzero(s1 != s2)[0].shape[0]\nOut[202]: 4\n\nIn [203]: (~np.isclose(s1,s2)).sum() # So, all matches!\nOut[203]: 0\n</code></pre>\n\n<p>To make use of tolerance values in other scenarios, we need to work on a case-by-case basis. So, let's say for an implementation that involve elementwise comparison like in <code>np.in1d</code>, we can bring in <a href=\"http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow\"><code>broadcasting</code></a> to do those elementwise equality checks for all elems in first input against all elems in the second one. Then, we use <code>np.abs</code> to get the \"closeness factor\" and finally compare against the input tolerance to decide the matches. As needed to simulate <code>np.in1d</code>, we do ANY operation along one of the axis. Thus, <code>np.in1d</code> with tolerance using <code>broadcasting</code> could be implemented like so -</p>\n\n<pre><code>def in1d_with_tolerance(A,B,tol=1e-05):\n    return (np.abs(A[:,None] - B) &lt; tol).any(1)\n</code></pre>\n\n<p>As suggested in the comments by OP, we can also round floating-pt numbers after scaling them up and this should be memory efficient, as being needed for working with large arrays. So, a modified version would be like so -</p>\n\n<pre><code>def in1d_with_tolerance_v2(A,B,tol=1e-05):\n    S = round(1/tol)\n    return np.in1d(np.around(A*S).astype(int),np.around(B*S).astype(int))\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [372]: A = np.random.rand(5)\n     ...: B = np.random.rand(7)\n     ...: B[3] = A[1] + 0.0000008\n     ...: B[6] = A[4] - 0.0000007\n     ...: \n\nIn [373]: np.in1d(A,B) # Not the result we want!\nOut[373]: array([False, False, False, False, False], dtype=bool)\n\nIn [374]: in1d_with_tolerance(A,B)\nOut[374]: array([False,  True, False, False,  True], dtype=bool)\n\nIn [375]: in1d_with_tolerance_v2(A,B)\nOut[375]: array([False,  True, False, False,  True], dtype=bool)\n</code></pre>\n\n<p>Finally, on how to make it work for other implementations and use cases - It would depend on the implementation itself. But for most cases, <code>np.isclose</code> and <code>broadcasting</code> should help.</p>\n"}], "owner": {"reputation": 957, "user_id": 1847221, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Zwxr5.jpg?s=128&g=1", "display_name": "Thomas Leonard", "link": "https://stackoverflow.com/users/1847221/thomas-leonard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3415, "favorite_count": 0, "accepted_answer_id": 39758154, "answer_count": 1, "score": 4, "last_activity_date": 1475135513, "creation_date": 1475096379, "last_edit_date": 1475135513, "question_id": 39757559, "link": "https://stackoverflow.com/questions/39757559/working-with-floating-point-numpy-arrays-for-comparison-and-related-operations", "title": "Working with floating point NumPy arrays for comparison and related operations", "body": "<p>I have an array of random floats and I need to compare it to another one that has the same values in a different order. For that matter I use the sum, product (and other combinations depending on the dimension of the table hence the number of equations needed).</p>\n\n<p>Nevertheless, I encountered a precision issue when I perform the sum (or product) on the array depending on the order of the values. </p>\n\n<p>Here is a simple standalone example to illustrate this issue :</p>\n\n<pre><code>import numpy as np\n\nn = 10\nm = 4\n\ntag = np.random.rand(n, m)\n\ns1 = np.sum(tag, axis=1)\ns2 = np.sum(tag[:, ::-1], axis=1)\n\n# print the number of times s1 is not equal to s2 (should be 0)\nprint np.nonzero(s1 != s2)[0].shape[0]\n</code></pre>\n\n<p>If you execute this code it sometimes tells you that <code>s1</code> and <code>s2</code> are not equal and the differents is of magnitude of the computer precision.</p>\n\n<p>The problem is I need to use those in functions like <code>np.in1d</code> where I can't really give a tolerance...</p>\n\n<p>Is there a way to avoid this issue?</p>\n"}, {"tags": ["python", "unit-testing", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 4265, "user_id": 1286705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3c6f332ab773b78f4ebd72d56d7b6df?s=128&d=identicon&r=PG", "display_name": "jamesc", "link": "https://stackoverflow.com/users/1286705/jamesc"}, "edited": false, "score": 0, "creation_date": 1475148352, "post_id": 39757885, "comment_id": 66832197, "body": "OK so the reason that I&#39;m building custom requests wasn&#39;t clear enough in my question - it&#39;s because GitHub sends a <code>X-GitHub-Event</code> header which I need to emulate in my test suite. Adding more info to the question..."}, {"owner": {"reputation": 17957, "user_id": 361427, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fe876b7f3f32966ceb8b4977feded6a7?s=128&d=identicon&r=PG", "display_name": "pleasedontbelong", "link": "https://stackoverflow.com/users/361427/pleasedontbelong"}, "reply_to_user": {"reputation": 4265, "user_id": 1286705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3c6f332ab773b78f4ebd72d56d7b6df?s=128&d=identicon&r=PG", "display_name": "jamesc", "link": "https://stackoverflow.com/users/1286705/jamesc"}, "edited": false, "score": 1, "creation_date": 1475152046, "post_id": 39757885, "comment_id": 66834974, "body": "@jamesc\tthen add the header in the client <code>client = APIClient(HTTP_X_GITHUB_EVENT=&#39;pull_request&#39;)</code>. Not tested, it works with Django&#39;s Client class.. Did it once <a href=\"https://github.com/pleasedontbelong/slack_dispatcher/blob/master/events/tests/test_pull_requests.py\" rel=\"nofollow noreferrer\">github.com/pleasedontbelong/slack_dispatcher/blob/master/eve&zwnj;&#8203;nts/&hellip;</a>"}, {"owner": {"reputation": 4265, "user_id": 1286705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3c6f332ab773b78f4ebd72d56d7b6df?s=128&d=identicon&r=PG", "display_name": "jamesc", "link": "https://stackoverflow.com/users/1286705/jamesc"}, "edited": false, "score": 0, "creation_date": 1475152945, "post_id": 39757885, "comment_id": 66835600, "body": "Thanks that&#39;s super helpful - and helpful to see that I named <code>HTTP_X_GITHUB_EVENT</code> correctly."}], "tags": [], "owner": {"reputation": 17957, "user_id": 361427, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fe876b7f3f32966ceb8b4977feded6a7?s=128&d=identicon&r=PG", "display_name": "pleasedontbelong", "link": "https://stackoverflow.com/users/361427/pleasedontbelong"}, "is_accepted": false, "score": 1, "last_activity_date": 1475098324, "last_edit_date": 1475098324, "creation_date": 1475097722, "answer_id": 39757885, "question_id": 39757530, "link": "https://stackoverflow.com/questions/39757530/test-requests-for-django-rest-framework-arent-parsable-by-its-own-request-class/39757885#39757885", "title": "Test Requests for Django Rest Framework aren&#39;t parsable by its own Request class", "body": "<p>\"Yo dawg, I heard you like Request, cos' you put a Request inside a Request\" XD</p>\n\n<p>I'd do it like this:</p>\n\n<pre><code>from rest_framework.test import APIClient\n\nclient = APIClient()\nresponse = client.post('/', {'github': 'payload'}, format='json')\nself.assertEqual(response.data, {'github': 'payload'})\n# ...or assert something was called, etc.\n</code></pre>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 4265, "user_id": 1286705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3c6f332ab773b78f4ebd72d56d7b6df?s=128&d=identicon&r=PG", "display_name": "jamesc", "link": "https://stackoverflow.com/users/1286705/jamesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1475153430, "creation_date": 1475153430, "answer_id": 39770829, "question_id": 39757530, "link": "https://stackoverflow.com/questions/39757530/test-requests-for-django-rest-framework-arent-parsable-by-its-own-request-class/39770829#39770829", "title": "Test Requests for Django Rest Framework aren&#39;t parsable by its own Request class", "body": "<p>Looking at the <a href=\"https://github.com/tomchristie/django-rest-framework/blob/master/tests/test_testing.py\" rel=\"nofollow\">tests for <code>APIRequestFactory</code> in\nDRF</a>, <a href=\"https://github.com/tomchristie/django-rest-framework/blob/master/tests/test_testing.py#L18-L23\" rel=\"nofollow\">stub\nviews</a>\nare created and then run through that view - the output is inspected for expected results.\nTherefore a reasonable, but slightly long solution, is to copy this strategy to\nassert that the <code>PayloadRequestFactory</code> is building valid requests, before then\npointing that at a full view.</p>\n\n<p>The test above becomes:</p>\n\n<pre><code>from django.conf.urls import url\nfrom django.test import TestCase, override_settings\nfrom rest_framework.decorators import api_view\nfrom rest_framework.response import Response\nfrom rest_framework.test import APIRequestFactory\n\n\n@api_view(['POST'])\ndef view(request):\n    \"\"\"\n    Testing stub view to return Request's data and GitHub event header.\n    \"\"\"\n    return Response({\n        'header_github_event': request.META.get('HTTP_X_GITHUB_EVENT', ''),\n        'request_data': request.data,\n    })\n\n\nurlpatterns = [\n    url(r'^view/$', view),\n]\n\n\n@override_settings(ROOT_URLCONF='github.tests.test_payload_factories.test_roundtrip')\nclass TestRoundtrip(TestCase):\n\n    def test_round_trip(self):\n        \"\"\"\n        A DRF Request can be loaded via stub view\n        \"\"\"\n        request_factory = APIRequestFactory()\n        request = request_factory.post(\n            '/view/',\n            data={'hello': 'world'},\n            format='json',\n        )\n\n        result = view(request)\n\n        self.assertEqual(result.data['request_data'], {'hello': 'world'})\n        self.assertEqual(result.data['header_github_event'], '')\n</code></pre>\n\n<p>Which passes :D</p>\n"}], "owner": {"reputation": 4265, "user_id": 1286705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3c6f332ab773b78f4ebd72d56d7b6df?s=128&d=identicon&r=PG", "display_name": "jamesc", "link": "https://stackoverflow.com/users/1286705/jamesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475153430, "creation_date": 1475096290, "last_edit_date": 1475149094, "question_id": 39757530, "link": "https://stackoverflow.com/questions/39757530/test-requests-for-django-rest-framework-arent-parsable-by-its-own-request-class", "title": "Test Requests for Django Rest Framework aren&#39;t parsable by its own Request class", "body": "<p>I'm writing an endpoint to receive and parse <a href=\"https://developer.github.com/webhooks/#example-delivery\" rel=\"nofollow\">GitHub Webhook payloads</a> using Django Rest Framework 3. In order to match the payload specification, I'm writing a payload request factory and testing that it's generating valid requests.</p>\n\n<p>However, the problem comes when trying to test the request generated with DRF's <code>Request</code> class. Here's the smallest failing test I could come up with - the problem is that a request generated with DRF's <code>APIRequestFactory</code> seems to not be parsable by DRF's <code>Request</code> class. Is that expected behaviour?</p>\n\n<pre><code>from rest_framework.request import Request\nfrom rest_framework.parsers import JSONParser\nfrom rest_framework.test import APIRequestFactory, APITestCase\n\n\nclass TestRoundtrip(APITestCase):\n\n    def test_round_trip(self):\n        \"\"\"\n        A DRF Request can be loaded into a DRF Request object\n        \"\"\"\n        request_factory = APIRequestFactory()\n        request = request_factory.post(\n            '/',\n            data={'hello': 'world'},\n            format='json',\n        )\n\n        result = Request(request, parsers=(JSONParser,))\n\n        self.assertEqual(result.data['hello'], 'world')\n</code></pre>\n\n<p>And the stack trace is:</p>\n\n<pre><code>E\n======================================================================\nERROR: A DRF Request can be loaded into a DRF Request object\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/james/active/prlint/venv/lib/python3.4/site-packages/rest_framework/request.py\", line 380, in __getattribute__\n    return getattr(self._request, attr)\nAttributeError: 'WSGIRequest' object has no attribute 'data'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/james/active/prlint/prlint/github/tests/test_payload_factories/test_roundtrip.py\", line 22, in test_round_trip\n    self.assertEqual(result.data['hello'], 'world')\n  File \"/home/james/active/prlint/venv/lib/python3.4/site-packages/rest_framework/request.py\", line 382, in __getattribute__\n    six.reraise(info[0], info[1], info[2].tb_next)\n  File \"/home/james/active/prlint/venv/lib/python3.4/site-packages/django/utils/six.py\", line 685, in reraise\n    raise value.with_traceback(tb)\n  File \"/home/james/active/prlint/venv/lib/python3.4/site-packages/rest_framework/request.py\", line 186, in data\n    self._load_data_and_files()\n  File \"/home/james/active/prlint/venv/lib/python3.4/site-packages/rest_framework/request.py\", line 246, in _load_data_and_files\n    self._data, self._files = self._parse()\n  File \"/home/james/active/prlint/venv/lib/python3.4/site-packages/rest_framework/request.py\", line 312, in _parse\n    parsed = parser.parse(stream, media_type, self.parser_context)\n  File \"/home/james/active/prlint/venv/lib/python3.4/site-packages/rest_framework/parsers.py\", line 64, in parse\n    data = stream.read().decode(encoding)\nAttributeError: 'str' object has no attribute 'read'\n\n----------------------------------------------------------------------\n</code></pre>\n\n<p>I'm obviously doing something stupid - I've messed around with encodings... realised that I needed to pass the parsers list to the <code>Request</code> to avoid the <code>UnsupportedMediaType</code> error, and now I'm stuck here.</p>\n\n<p>Should I do something different? Maybe avoid using <code>APIRequestFactory</code>? Or test my built GitHub requests a different way?</p>\n\n<hr>\n\n<h2>More info</h2>\n\n<p>GitHub sends a request out to registered webhooks that has a <code>X-GitHub-Event</code> header and therefore in order to test my webhook DRF code I need to be able to emulate this header at test time.</p>\n\n<p>My path to succeeding with this has been to build a custom Request and load a payload using a factory into it. This is my factory code:</p>\n\n<pre><code>def PayloadRequestFactory():\n    \"\"\"\n    Build a Request, configure it to look like a webhook payload from GitHub.\n    \"\"\"\n    request_factory = APIRequestFactory()\n    request = request_factory.post(url, data=PingPayloadFactory())\n    request.META['HTTP_X_GITHUB_EVENT'] = 'ping'\n    return request\n</code></pre>\n\n<p>The issue has arisen because I want to assert that <code>PayloadRequestFactory</code> is generating valid requests for various passed arguments - so I'm trying to parse them and assert their validity but DRF's <code>Request</code> class doesn't seem to be able to achieve this - hence my question with a failing test.</p>\n\n<p>So really my question is - how should I test this <code>PayloadRequestFactory</code> is generating the kind of request that I need?</p>\n"}, {"tags": ["python", "python-3.x", "email"], "answers": [{"comments": [{"owner": {"reputation": 1128, "user_id": 1708984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d816531140e37f01f364122aadc361f3?s=128&d=identicon&r=PG", "display_name": "Petr Baudis", "link": "https://stackoverflow.com/users/1708984/petr-baudis"}, "edited": false, "score": 2, "creation_date": 1475107533, "post_id": 39758812, "comment_id": 66814760, "body": "Awesome, thanks! For anyone else using MIMEText, which doesn&#39;t allow passing this in constructor, just set <code>msg.policy = EmailPolicy()</code> afterwards."}, {"owner": {"reputation": 9656, "user_id": 5378816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2de735170fb38dcd62375ac3a9f8ecc?s=128&d=identicon&r=PG&f=1", "display_name": "VPfB", "link": "https://stackoverflow.com/users/5378816/vpfb"}, "reply_to_user": {"reputation": 1128, "user_id": 1708984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d816531140e37f01f364122aadc361f3?s=128&d=identicon&r=PG", "display_name": "Petr Baudis", "link": "https://stackoverflow.com/users/1708984/petr-baudis"}, "edited": false, "score": 0, "creation_date": 1485682035, "post_id": 39758812, "comment_id": 71019769, "body": "@PetrBaudis: this is now fixed in 3.6"}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": true, "score": 3, "last_activity_date": 1475103581, "last_edit_date": 1475103581, "creation_date": 1475103006, "answer_id": 39758812, "question_id": 39757504, "link": "https://stackoverflow.com/questions/39757504/how-to-send-emails-with-names-in-headers-from-python/39758812#39758812", "title": "How to send emails with names in headers from Python", "body": "<p>You have to use the right policy from <code>email.policy</code> to get the correct behaviour.</p>\n\n<h2>Wrong Policy</h2>\n\n<p><a href=\"https://docs.python.org/3.5/library/email.message.html#email.message.Message\" rel=\"nofollow\"><code>email.message.Message</code></a> will use <code>email.policy.Compat32</code> by default. That one was designed for backward-compatibility wih older Python versions and does the wrong thing:</p>\n\n<pre><code>&gt;&gt;&gt; msg = email.message.Message(policy=email.policy.Compat32())\n&gt;&gt;&gt; msg['To'] = '\u0161\u0161\u0161\u0161\u0161 &lt;ssss@example.com&gt;'\n&gt;&gt;&gt; msg.as_bytes()\nb'To: =?utf-8?b?xaHFocWhxaHFoSA8c3Nzc0BleGFtcGxlLmNvbT4=?=\\n\\n'\n</code></pre>\n\n<h2>Correct Policy</h2>\n\n<p><a href=\"https://docs.python.org/3.5/library/email.policy.html#email.policy.EmailPolicy\" rel=\"nofollow\"><code>email.policy.EmailPolicy</code></a> will do what you want:</p>\n\n<pre><code>&gt;&gt;&gt; msg = email.message.Message(policy=email.policy.EmailPolicy())\n&gt;&gt;&gt; msg['To'] = '\u0161\u0161\u0161\u0161\u0161 &lt;ssss@example.com&gt;'\n&gt;&gt;&gt; msg.as_bytes()\nb'To: =?utf-8?b?xaHFocWhxaHFoQ==?= &lt;ssss@example.com&gt;\\n\\n'\n</code></pre>\n\n<h2>Python 2.7</h2>\n\n<p>With older Python versions (eg 2.7), you have to use the \"hack\" as you called it:</p>\n\n<pre><code>&gt;&gt;&gt; msg = email.message.Message()\n&gt;&gt;&gt; msg['To'] = email.header.Header(u'\u0161\u0161\u0161\u0161\u0161').encode() + ' &lt;ssss@example.com&gt;'\n&gt;&gt;&gt; msg.as_string()\n'To: =?utf-8?b?xaHFocWhxaHFoQ==?= &lt;ssss@example.com&gt;\\n\\n'\n</code></pre>\n"}], "owner": {"reputation": 1128, "user_id": 1708984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d816531140e37f01f364122aadc361f3?s=128&d=identicon&r=PG", "display_name": "Petr Baudis", "link": "https://stackoverflow.com/users/1708984/petr-baudis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 39758812, "answer_count": 1, "score": 1, "last_activity_date": 1475103581, "creation_date": 1475096183, "last_edit_date": 1495541803, "question_id": 39757504, "link": "https://stackoverflow.com/questions/39757504/how-to-send-emails-with-names-in-headers-from-python", "title": "How to send emails with names in headers from Python", "body": "<p>I need to send nice-looking emails from Python with address headers that contain names - somehow something that never pops up in tutorials.</p>\n\n<p>I'm using email.mime.text.MIMEText() to create the email, but setting <code>msg['To'] = '\u00e1 &lt;x@y.cz&gt;'</code> rather than utf8-encoding only the name part, will utf8-encode the whole header value, which of course fails miserably. How to do this correctly?</p>\n\n<p>I have found a sort-of solution <a href=\"https://stackoverflow.com/questions/10551933/python-email-module-form-header-from-with-some-unicode-name-email\">Python email module: form header &quot;From&quot; with some unicode name + email</a> but it feels hard to accept such a hack, since there does seem to be some support for handling this automatically in Python's email package in email.headerregistry which should be used automatically as far as I can see, but it doesn't happen.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2309, "user_id": 1269634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b33cfdd331ac690e21e1eb478ab8331?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/1269634/geoff"}, "edited": false, "score": 0, "creation_date": 1475163520, "post_id": 39761232, "comment_id": 66843379, "body": "Very nice! I&#39;ve used <code>resample()</code> a lot, but I couldn&#39;t figure out how to get it to handle the irregular dates. Your second example is great and pretty much exactly what I need. Thanks!"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 2309, "user_id": 1269634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b33cfdd331ac690e21e1eb478ab8331?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/1269634/geoff"}, "edited": false, "score": 0, "creation_date": 1475180440, "post_id": 39761232, "comment_id": 66852882, "body": "Awesome! Glad I could help out."}], "tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 2, "last_activity_date": 1475122025, "creation_date": 1475122025, "answer_id": 39761232, "question_id": 39757437, "link": "https://stackoverflow.com/questions/39757437/how-can-i-resample-a-dataframe-so-that-it-is-properly-aligned-with-another-dataf/39761232#39761232", "title": "How can I resample a DataFrame so that it is properly aligned with another DataFrame?", "body": "<p>Consider using pandas <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.resample.html\" rel=\"nofollow\">DataFrame.resample()</a>:</p>\n\n<pre><code># EXAMPLE DATA OF SEQUENTIAL DATES AND RANDOM NUMBERS\nindex = pd.date_range('12/01/2007', periods=3197, freq='D', dtype='datetime64[ns]')\nseries = pd.Series(np.random.randint(0,100, 3197), index=index)\ndf = pd.DataFrame({'num':series})\n#             num\n# 2007-12-01   73\n# 2007-12-02   17\n# 2007-12-03   63\n# 2007-12-04   72\n# 2007-12-05    4\n# 2007-12-06   91\n# 2007-12-07   20\n# 2007-12-08   99\n# 2007-12-09   97\n# 2007-12-10   33\n\nwdf = df.resample('W-SAT').sum()        # SATURDAY WEEK START\n#             num\n# 2007-12-01   73\n# 2007-12-08  366\n# 2007-12-15  354\n# 2007-12-22  302\n# 2007-12-29  310\n# 2008-01-05  323\n# 2008-01-12  424\n\nmdf = df.resample('MS').sum()           # MONTH START\n#              num\n# 2007-12-01  1568\n# 2008-01-01  1465\n# 2008-02-01  1317\n# 2008-03-01  1473\n# 2008-04-01  1762\n# 2008-05-01  1698\n# 2008-06-01  1345\n</code></pre>\n\n<p>For the irregular interval, use a custom function in <code>DataFrame.apply()</code> to create a <em>enddate</em> column which would be the end cut-off date of the interval the current row's date falls in series (i.e., <em>2015-01-01</em>'s end date being <em>2015-01-21</em> in Datetimeindex series), calculated by using a series filter. Then, run a <code>groupby()</code> on new <em>enddate</em> column for sum aggregation:</p>\n\n<pre><code>irrdt = pd.DatetimeIndex(['2014-02-14', '2014-05-08', '2014-09-19', '2014-09-24',\n                          '2015-01-21', '2016-05-26', '2016-06-02', '2016-06-04'],\n                           dtype='datetime64[ns]', name='date', freq=None)    \ndef findrng(row):                      \n    ed = str(irrdt[irrdt &gt; row['Date']].min())[0:10]\n    row['enddt'] = ed if ed !='NaT' else str(irrdt.max())[0:10]\n    return(row)\n\ndf['Date'] = df.index\ndf = df.apply(findrng, axis=1).groupby(['enddt']).sum()    \n#                num\n# enddt             \n# 2014-02-14  112143\n# 2014-05-08    3704\n# 2014-09-19    5958\n# 2014-09-24     365\n# 2015-01-21    5730\n# 2016-05-26   24126\n# 2016-06-02     305\n# 2016-06-04    4142\n</code></pre>\n"}], "owner": {"reputation": 2309, "user_id": 1269634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b33cfdd331ac690e21e1eb478ab8331?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/1269634/geoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 1, "accepted_answer_id": 39761232, "answer_count": 1, "score": 0, "last_activity_date": 1475122025, "creation_date": 1475095911, "question_id": 39757437, "link": "https://stackoverflow.com/questions/39757437/how-can-i-resample-a-dataframe-so-that-it-is-properly-aligned-with-another-dataf", "title": "How can I resample a DataFrame so that it is properly aligned with another DataFrame?", "body": "<p>I've got several Pandas DataFrames at different time intervals. One is at the daily level:</p>\n\n<pre><code>DatetimeIndex(['2007-12-01', '2007-12-02', '2007-12-03', '2007-12-04',\n               '2007-12-05', '2007-12-06', '2007-12-07', '2007-12-08',\n               '2007-12-09', '2007-12-10',\n               ...\n               '2016-08-22', '2016-08-23', '2016-08-24', '2016-08-25',\n               '2016-08-26', '2016-08-27', '2016-08-28', '2016-08-29',\n               '2016-08-30', '2016-08-31'],\n              dtype='datetime64[ns]', length=3197, freq=None)\n</code></pre>\n\n<p>The others are at some non-daily level (they will <em>always</em> be less resolute than daily). For example, this one is weekly:</p>\n\n<pre><code>DatetimeIndex(['2007-01-01', '2007-01-08', '2007-01-15', '2007-01-22',\n               '2007-01-29', '2007-02-05', '2007-02-12', '2007-02-19',\n               '2007-02-26', '2007-03-05',\n               ...\n               '2010-03-08', '2010-03-15', '2010-03-22', '2010-03-29',\n               '2010-04-05', '2010-04-12', '2010-04-19', '2010-04-26',\n               '2010-05-03',        'NaT'],\n              dtype='datetime64[ns]', name='week', length=176, freq=None)\n</code></pre>\n\n<p>This one is monthly:</p>\n\n<pre><code>DatetimeIndex(['2013-04-01', '2013-05-01', '2013-06-01', '2013-07-01',\n               '2013-08-01', '2013-09-01', '2013-10-01', '2013-11-01',\n               '2013-12-01', '2014-01-01', '2014-02-01', '2014-03-01',\n               '2014-04-01', '2014-05-01', '2014-06-01', '2014-07-01',\n               '2014-08-01', '2014-09-01', '2014-10-01', '2014-11-01',\n               '2014-12-01', '2015-01-01', '2015-02-01', '2015-03-01',\n               '2015-04-01', '2015-05-01', '2015-06-01', '2015-07-01',\n               '2015-08-01', '2015-09-01', '2015-10-01', '2015-11-01',\n               '2015-12-01', '2016-01-01', '2016-02-01', '2016-03-01',\n               '2016-04-01', '2016-05-01', '2016-06-01', '2016-07-01',\n               '2016-08-01'],\n              dtype='datetime64[ns]', name='month', freq=None)\n</code></pre>\n\n<p>This is just an oddball with an irregular interval:</p>\n\n<pre><code>DatetimeIndex(['2014-02-14', '2014-05-08', '2014-09-19', '2014-09-24',\n               '2015-01-21', '2016-05-26', '2016-06-02', '2016-06-04'],\n              dtype='datetime64[ns]', name='date', freq=None)\n</code></pre>\n\n<p>What I need to do is resample (sum) the daily data to the intervals specified by the others. So if a DatetimeIndex is monthly, I need to resample the daily data to monthly. If it's weekly, it should be resampled weekly. If it's irregular, it needs to match. I need this because I'm building statistical models on these data, and I need the ground truth to line up with the observed values.</p>\n\n<p>How can I get Pandas to resample a DataFrame, <code>df1</code>, to match the DatetimeIndex of another arbitrary DataFrame, <code>df2</code>? I've search around, but I can't figure this out. It seems like it'd be a really common Pandas task, so I must just be missing something. Thanks!</p>\n"}, {"tags": ["python", "string", "list", "variables", "indexing"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1475096074, "post_id": 39757426, "comment_id": 66810934, "body": "What is <code>&gt;&gt;for</code> and <code>&gt;&gt;if</code> supposed to mean?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096240, "post_id": 39757426, "comment_id": 66811014, "body": "Why do you have two loops <code>for i in solvinglst:</code> and <code>for x in solvinglst:</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096270, "post_id": 39757426, "comment_id": 66811026, "body": "<code>if solvingstr != solvinglst:</code> will always succeed, since a string and a list are never equal to each other."}, {"owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096278, "post_id": 39757426, "comment_id": 66811037, "body": "that is what I have tried to do, but it keeps saying [list indices must be integers or slices, not str]"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096347, "post_id": 39757426, "comment_id": 66811066, "body": "That&#39;s because of <code>solvinglst[x]</code>. <code>x</code> is the current character in the list, it makes no sense to use it as the index of the list."}, {"owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096348, "post_id": 39757426, "comment_id": 66811069, "body": "im not sure why thats there... must have been from my ppast code"}, {"owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096477, "post_id": 39757426, "comment_id": 66811137, "body": "I&#39;m trying to copy everything from <code>solvinglst</code> to <code>solvingstr</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096482, "post_id": 39757426, "comment_id": 66811141, "body": "I don&#39;t understand why you need two variables <code>solvinglst</code> and <code>solvingstr</code>. If you have a list of characters, you can create the corresponding string with  <code>&#39;&#39;.join(solvinglst)</code>."}, {"owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096570, "post_id": 39757426, "comment_id": 66811179, "body": "Let me put down all my code and it will make sense. The code isn&#39;t very long."}, {"owner": {"reputation": 649, "user_id": 4979237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh4.googleusercontent.com/-IhkrApjwfYo/AAAAAAAAAAI/AAAAAAAAABA/g7-CQDdB2BI/photo.jpg?sz=128", "display_name": "Albert Rothman", "link": "https://stackoverflow.com/users/4979237/albert-rothman"}, "edited": false, "score": 0, "creation_date": 1475096686, "post_id": 39757426, "comment_id": 66811247, "body": "it is kind of unclear what your variables are for...solvinglst looks like its just a  list of underscores the length of the word you&#39;re supposed to guess. but you&#39;re comparing it against solvingstr which is just a single space... (solvingstr = &quot; &quot;)...looking farther down in your code, it looks like you&#39;re just replacing the underscores with spaces. I think you may need to reapproach the problem and ask yourself what you really want to do....which for a first step is check if a certain character occurs in a string...then there are other steps after that, but right now you don&#39;t even have that."}, {"owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "edited": false, "score": 0, "creation_date": 1475098397, "post_id": 39757426, "comment_id": 66812067, "body": "I just reposted my full code that can play a full game of hangman, but all I need to to is make this <code>[&#39;_&#39;,&#39;_&#39;,&#39;_&#39;]</code> to this <code>_ _ _</code>."}, {"owner": {"reputation": 649, "user_id": 4979237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh4.googleusercontent.com/-IhkrApjwfYo/AAAAAAAAAAI/AAAAAAAAABA/g7-CQDdB2BI/photo.jpg?sz=128", "display_name": "Albert Rothman", "link": "https://stackoverflow.com/users/4979237/albert-rothman"}, "edited": false, "score": 0, "creation_date": 1475101389, "post_id": 39757426, "comment_id": 66813230, "body": "Very different question than what you originally posted and also a duplicate of <a href=\"http://stackoverflow.com/questions/2906092/converting-a-list-to-a-string\" title=\"converting a list to a string\">stackoverflow.com/questions/2906092/&hellip;</a>. It may not be immediately obvious, but if that&#39;s all you need to do, then you just need to convert the list to string before printing.. you might need to add the spaces manually before printing, which you can do easily with a list comprehension(which I would recommend looking up anyway, because they are very useful)"}], "owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1475096730, "creation_date": 1475095871, "last_edit_date": 1475096730, "question_id": 39757426, "link": "https://stackoverflow.com/questions/39757426/update-a-value-in-comparison-with-another-value", "title": "Update a value in comparison with another value", "body": "<p>I have this code that is a hangman game. I use <code>while(there are blanks in the word):</code>. Then I use a <code>for</code> loop to transfer a list version of it that is workable with, then I use a string version of it that they can see.</p>\n\n<blockquote>\n  <p>How am I supposed to update the visible version with the non visible version without printing out a ridiculous amount of _s?</p>\n</blockquote>\n\n<hr>\n\n<pre><code>**Here is some code to refer to.**\n```\n\n# -*- coding: utf-8 -*-\n\nimport random\nimport string\n\nWORDLIST_FILENAME = \"words.txt\"\n\ndef load_words():\n    \"\"\"\n    Returns a list of valid words. Words are strings of lowercase letters.\n\n    Depending on the size of the word list, this function may\n    take a while to finish.\n    \"\"\"\n    # inFile: file\n    inFile = open(WORDLIST_FILENAME, 'r')\n    # line: string\n    line = inFile.readline()\n    # wordlist: list of strings\n    wordlist = line.split()\n    return wordlist\n\nwordlist = load_words()\nword_to_guess = random.choice(wordlist)\n\n# end of helper code.  A word to guess has been stored in the string\n# variable 'word_to_guess'. +9\n\ndef hangman(word_to_guess):\n    solvinglst = []\n    solvingstr = \" \"\n    alphabet = \"abcdefghijklmnopqrstuvwxyz\"\n    num_guesses = len(word_to_guess)\n    for i in range(len(word_to_guess)):\n        solvinglst += \"_\"\n    print(\"Welcome to Hangman!\")\n    print(\"-------------------------------------------------------------\")\n    while(\"_\" in solvinglst):            \n        for i in solvinglst:\n            if solvingstr != solvinglst:\n                solvinglst[i].copy(solvingstr)\n        print(solvingstr)\n        print(\"You have \",num_guesses,\"guesses.\")\n        letter = input(\"What letter do you want to guess?:\")\n        if letter in word_to_guess:\n            for i in range(len(word_to_guess)):                    \n                for x in range(len(alphabet)):\n                        if alphabet[x] == letter:\n                            alphabet = alphabet.replacea(alphabet[x],\"_\")\n            if word_to_guess[i] == letter:\n                solvinglst[i] = letter\n\n        if letter not in word_to_guess:\n            num_guesses -= 1\n        if num_guesses &lt; 1 :\n            print(\"You lose.\")\n            solvinglst = word_to_guess\n        if \"_\" not in solvinglst:\n            print(solvinglst)\n            break\n        print(num_guesses)\n        print(alphabet)\n</code></pre>\n\n<h2>    hangman(word_to_guess)</h2>\n\n<p>I have code above that to return a random word for them to guess.\nAs you can see I already have a idea of what to do, it doesn't work but I need a simple solution to this code.</p>\n"}, {"tags": ["python", "python-3.x", "rename"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1475096211, "post_id": 39757368, "comment_id": 66811000, "body": "Why not just use a preexisting program intended for this, like Rename Master?"}], "answers": [{"comments": [{"owner": {"reputation": 481, "user_id": 6649949, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/76e07520fe854b60c1f9ebc3ea499a82?s=128&d=identicon&r=PG&f=1", "display_name": "S. Gamgee", "link": "https://stackoverflow.com/users/6649949/s-gamgee"}, "edited": false, "score": 0, "creation_date": 1475095808, "post_id": 39757393, "comment_id": 66810803, "body": "A site documenting this is: <a href=\"http://www.tutorialspoint.com/python/os_rename.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/python/os_rename.htm</a>"}], "tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": false, "score": 4, "last_activity_date": 1475095885, "last_edit_date": 1475095885, "creation_date": 1475095755, "answer_id": 39757393, "question_id": 39757368, "link": "https://stackoverflow.com/questions/39757368/how-to-erase-the-first-character-from-all-files-on-windows-into-a-folder-using/39757393#39757393", "title": "How to erase the first character from all files (on Windows) into a folder using Python 3?", "body": "<p>You can use <a href=\"http://www.tutorialspoint.com/python/os_rename.htm\" rel=\"nofollow\">os.rename</a>:</p>\n\n<pre><code>import os    \nos.rename(src, dst)\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 2762103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Cj047.jpg?s=128&g=1", "display_name": "SnowBG", "link": "https://stackoverflow.com/users/2762103/snowbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1475096512, "answer_count": 1, "score": -2, "last_activity_date": 1475096319, "creation_date": 1475095667, "last_edit_date": 1475096319, "question_id": 39757368, "link": "https://stackoverflow.com/questions/39757368/how-to-erase-the-first-character-from-all-files-on-windows-into-a-folder-using", "closed_reason": "Duplicate", "title": "How to erase the first character from all files (on Windows) into a folder using Python 3?", "body": "<p>I have a folder of log files recorded as XML. A guy in here made a mess in there and changed the script of creation of those files and insert a '<strong>p</strong>' letter at the beginning. E.g.:</p>\n\n<p>The file name is now: <strong>p</strong>0154656450103.xml</p>\n\n<p>When it should be: 0154656450103.xml</p>\n\n<p>There are about 3,000 files this way. How can I rename them erasing just the first character or just the '<strong>p</strong>' character?</p>\n"}, {"tags": ["python", "arrays", "numpy", "sum", "slice"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1475095754, "post_id": 39757355, "comment_id": 66810770, "body": "I think you&#39;re going to want to flatten <code>arr</code> and use <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.reduceat.html\" rel=\"nofollow noreferrer\"><code>numpy.add.reduceat</code></a> to compute sums."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1475095973, "post_id": 39757355, "comment_id": 66810887, "body": "That has the unfortunate effect of computing a bunch of sums you don&#39;t need with the other parts of <code>arr</code>, though. I don&#39;t know of a good way to avoid that without writing an explicit loop."}], "answers": [{"comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1475096478, "post_id": 39757459, "comment_id": 66811139, "body": "I like this answer!"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 3, "last_activity_date": 1475096013, "creation_date": 1475096013, "answer_id": 39757459, "question_id": 39757355, "link": "https://stackoverflow.com/questions/39757355/numpy-computing-sumarrayi-aibi-for-all-rows-i/39757459#39757459", "title": "Numpy: Computing sum(array[i, a[i]:b[i]]) for all rows i", "body": "<p>Here's a vectorized approach using <a href=\"http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow\"><code>NumPy broadcasting</code></a> and <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html\" rel=\"nofollow\"><code>np.einsum</code></a> -</p>\n\n<pre><code># Create range array corresponding to the length of the no. of cols\nr = np.arange(arr.shape[1])\n\n# Mask of ranges corresponding to the start and end indices using broadcasting\nmask = (start[:,None] &lt;= r) &amp; (end[:,None] &gt; r)\n\n# Finally, we use the mask to select and sum rows using einsum\nout = np.einsum('ij,ij-&gt;i',arr,mask)\n</code></pre>\n"}], "owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 39757459, "answer_count": 1, "score": 1, "last_activity_date": 1475096013, "creation_date": 1475095622, "question_id": 39757355, "link": "https://stackoverflow.com/questions/39757355/numpy-computing-sumarrayi-aibi-for-all-rows-i", "title": "Numpy: Computing sum(array[i, a[i]:b[i]]) for all rows i", "body": "<p>I have a numpy array <code>arr</code> and a list of slice start points <code>start</code> and a list of slice endpoints <code>end</code>. For each row <code>i</code>, I want to determine the sum of the elements from <code>start[i]</code> to <code>end[i]</code>. That is, I want to determine</p>\n\n<pre><code>[np.sum(arr[i, start[i]:end[i]]) for i in range(arr.shape[0])]\n</code></pre>\n\n<p>Is there a smarter/faster way to do this using numpy only?</p>\n"}, {"tags": ["python", "ubuntu", "matplotlib", "pyqt", "qt5"], "comments": [{"owner": {"reputation": 4141, "user_id": 3419537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e5899a36794df8696441dfa03069bad?s=128&d=identicon&r=PG&f=1", "display_name": "user3419537", "link": "https://stackoverflow.com/users/3419537/user3419537"}, "edited": false, "score": 1, "creation_date": 1475152013, "post_id": 39757345, "comment_id": 66834949, "body": "Which versions of python and matplotlib do you have installed? You may have a matplotlib version prior to PyQt5 support. I believe PyQt5 is also only available for python 3 under 14.04"}, {"owner": {"reputation": 325, "user_id": 6631510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jIHBf_DQQXE/AAAAAAAAAAI/AAAAAAAAAAc/Cbur5oPQhuM/photo.jpg?sz=128", "display_name": "Kohki Mametani", "link": "https://stackoverflow.com/users/6631510/kohki-mametani"}, "reply_to_user": {"reputation": 4141, "user_id": 3419537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e5899a36794df8696441dfa03069bad?s=128&d=identicon&r=PG&f=1", "display_name": "user3419537", "link": "https://stackoverflow.com/users/3419537/user3419537"}, "edited": false, "score": 1, "creation_date": 1475158125, "post_id": 39757345, "comment_id": 66839538, "body": "Wops, I forgot it. Updating matplotlib from 1.3.1 to 1.5.3 solved the problem. Thank you."}], "owner": {"reputation": 325, "user_id": 6631510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jIHBf_DQQXE/AAAAAAAAAAI/AAAAAAAAAAc/Cbur5oPQhuM/photo.jpg?sz=128", "display_name": "Kohki Mametani", "link": "https://stackoverflow.com/users/6631510/kohki-mametani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1210, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1475095565, "creation_date": 1475095565, "question_id": 39757345, "link": "https://stackoverflow.com/questions/39757345/how-to-get-unrecognized-backends-in-matplotlib", "title": "How to get unrecognized backends in Matplotlib", "body": "<p>I'm trying to embed matplotlib canvas in PyQt5 application on Ubuntu 14.04.</p>\n\n<p>The following worked on OSX but returned an error on Ubuntu: <code>matplotlib.use(\"Qt5Agg\")</code></p>\n\n<p>Error:</p>\n\n<p><code>ValueError: Unrecognized backend string \"qt5agg\": valid strings are ['GTK3Agg', 'GTKCairo', 'MacOSX', 'pdf', 'Qt4Agg', 'agg', 'template', 'cairo', 'TkAgg', 'GTK', 'gdk', 'CocoaAgg', 'GTKAgg', 'WebAgg', 'WX', 'ps', 'svg', 'GTK3Cairo', 'WXAgg', 'pgf', 'emf']\n</code></p>\n\n<p>How can I add \"qt5agg\" backend to this environment or is there any way to make Qt5 application work with other backends available listed above?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "sockets", "serialization", "scandir"], "comments": [{"owner": {"reputation": 803, "user_id": 2312004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XHEcO.jpg?s=128&g=1", "display_name": "Simon Black", "link": "https://stackoverflow.com/users/2312004/simon-black"}, "edited": false, "score": 0, "creation_date": 1475143728, "post_id": 39757325, "comment_id": 66829258, "body": "Why do you want to send the object through a socket and not the relevant data within the object?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "reply_to_user": {"reputation": 803, "user_id": 2312004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XHEcO.jpg?s=128&g=1", "display_name": "Simon Black", "link": "https://stackoverflow.com/users/2312004/simon-black"}, "edited": false, "score": 0, "creation_date": 1475143972, "post_id": 39757325, "comment_id": 66829405, "body": "@SimonBlack: Exactly, I figured it out partially by sending only the accessible data. But, how to emulate the behaviour of the methods of the class, like <code>is_dir()</code>? Where is the actual data for this <code>is_dir()</code> method?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "is_accepted": false, "score": 0, "last_activity_date": 1475144070, "last_edit_date": 1475144070, "creation_date": 1475143757, "answer_id": 39767389, "question_id": 39757325, "link": "https://stackoverflow.com/questions/39757325/how-to-serialize-a-scandir-direntry-in-python-for-sending-through-a-network-sock/39767389#39767389", "title": "How to serialize a scandir.DirEntry in Python for sending through a network socket?", "body": "<p>Well I myself have figured out that for instances of non-standard classes like this <code>scandir.DirEntry</code>, the best way is to <strong>convert the class member data into a (possibly nested) combination of standard objects</strong> like (<code>list</code>, <code>dict</code>, etc.).</p>\n\n<p>For example, in the particular case of <code>scandir.DirEntry</code>, it can be done as follows.</p>\n\n<pre><code>import scandir, pickle\n\ns = scandir.scandir(\"D:\\\\PYTHON\")\nentry = s.next()\n\n# first convert the stat object to st_\nst = entry.stat()\nst_ = {'st_mode':st.st_mode, 'st_size':st.st_size,\\\n   'st_atime':st.st_atime, 'st_mtime':st.st_mtime,\\\n   'st_ctime':st.st_ctime}\n\n# now convert the entry object to entry_\nentry_ = {'name':entry.name, 'is_dir':entry.is_dir(), \\\n 'path':entry.path, 'stat':st_}\n\n# one may need some other class member data also as necessary\n\n# now pickle the converted entry_\ndata = pickle.dumps(entry_)\n</code></pre>\n\n<p>Although for my purpose, I only require the data, after the unpickling in the other end, one may need to <strong>reconstruct</strong> the unpickled <code>entry_</code> to unpickled <code>scandir.DirEntry</code> object 'entry'. <strong>However, I am yet to figure out how to reconstruct the class instance and set the data for the behaviour of methods like</strong> <code>is_dir()</code>, <code>stat()</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 9148, "user_id": 68707, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/901005efe8195afcad5139a584921962?s=128&d=identicon&r=PG", "display_name": "Ben Hoyt", "link": "https://stackoverflow.com/users/68707/ben-hoyt"}, "is_accepted": false, "score": 1, "last_activity_date": 1479238309, "creation_date": 1479238309, "answer_id": 40618192, "question_id": 39757325, "link": "https://stackoverflow.com/questions/39757325/how-to-serialize-a-scandir-direntry-in-python-for-sending-through-a-network-sock/40618192#40618192", "title": "How to serialize a scandir.DirEntry in Python for sending through a network socket?", "body": "<p>Yes, <code>os.DirEntry</code> objects are intended to be short-lived, not really kept around or serialized. If you need the data in them to be serialized, looks like you've figured that out in your own answer -- serialize (pickle) a dict version of the attributes you need.</p>\n\n<p>To deserialize into an object that walks and quacks like an <code>os.DirEntry</code> instance, create a <code>PseudoDirEntry</code> class that mimics the things you need.</p>\n\n<p>Note that you can directly serialize the stat object already, which saves you picking the fields out of that.</p>\n\n<p>Combined, that would look like this:</p>\n\n<pre><code>class PseudoDirEntry:\n    def __init__(self, name, path, is_dir, stat):\n        self.name = name\n        self.path = path\n        self._is_dir = is_dir\n        self._stat = stat\n\n    def is_dir(self):\n        return self._is_dir\n\n    def stat(self):\n        return self._stat\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>&gt;&gt;&gt; import os, pickle\n&gt;&gt;&gt; entry = list(os.scandir())[0]\n&gt;&gt;&gt; pickled = pickle.dumps({'name': entry.name, 'path': entry.path, 'is_dir': entry.is_dir(), 'stat': entry.stat()})\n&gt;&gt;&gt; loaded = pickle.loads(pickled)\n&gt;&gt;&gt; pseudo = PseudoDirEntry(loaded['name'], loaded['path'], loaded['is_dir'], loaded['stat'])\n&gt;&gt;&gt; pseudo.name\n'.DS_Store'\n&gt;&gt;&gt; pseudo.is_dir()\nFalse\n&gt;&gt;&gt; pseudo.stat()\nos.stat_result(st_mode=33188, st_ino=8370294, st_dev=16777220, st_nlink=1, st_uid=502, st_gid=20, st_size=8196, st_atime=1478356967, st_mtime=1477601172, st_ctime=1477601172)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1342, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1479238309, "creation_date": 1475095507, "last_edit_date": 1475143801, "question_id": 39757325, "link": "https://stackoverflow.com/questions/39757325/how-to-serialize-a-scandir-direntry-in-python-for-sending-through-a-network-sock", "title": "How to serialize a scandir.DirEntry in Python for sending through a network socket?", "body": "<p>I have server and client programs that communicate with each other through a network socket.</p>\n\n<p>What I want is to send a directory entry (<code>scandir.DirEntry</code>) obtained from <code>scandir.scandir()</code> through the socket.</p>\n\n<p>For now I am using <code>pickle</code> and <code>cPickle</code> modules and have come up with the following (excerpt only):</p>\n\n<pre><code>import scandir, pickle\n\ns = scandir.scandir(\"D:\\\\PYTHON\")\nentry = s.next()\ndata = pickle.dumps(entry)\n</code></pre>\n\n<p>However, I am getting the following error stack:</p>\n\n<pre><code>File \"untitled.py\", line 5, in &lt;module&gt;\n  data = pickle.dumps(item)\nFile \"C:\\Python27\\Lib\\pickle.py\", line 1374, in dumps\n  Pickler(file, protocol).dump(obj)\nFile \"C:\\Python27\\Lib\\pickle.py\", line 224, in dump\n  self.save(obj)\nFile \"C:\\Python27\\Lib\\pickle.py\", line 306, in save\n  rv = reduce(self.proto)\nFile \"C:\\Python27\\Lib\\copy_reg.py\", line 70, in _reduce_ex\n  raise TypeError, \"can't pickle %s objects\" % base.__name__\n\nTypeError: can't pickle DirEntry objects\n</code></pre>\n\n<p>How can I get rid of this error?</p>\n\n<p>I have heard of using <code>marshall</code> or <code>JSON</code>. \n<em>UPDATE</em>: <code>JSON</code> is not dumping all the data within the object.</p>\n\n<p>Is there any completely different way to do so to send the object through the socket?</p>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 6627176, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dafe9730c6fdbfe8ef7cb7cccf25c211?s=128&d=identicon&r=PG&f=1", "display_name": "spacedinosaur10", "link": "https://stackoverflow.com/users/6627176/spacedinosaur10"}, "edited": false, "score": 0, "creation_date": 1475177032, "post_id": 39758866, "comment_id": 66851144, "body": "@nullop- thanks for the response. Unfortunately this did not work. Excel is writing col A as  ;2016-01-31 00:00:00&#39;"}, {"owner": {"reputation": 524, "user_id": 1190492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc54307a008d55ba763828244d37bff?s=128&d=identicon&r=PG", "display_name": "nullop", "link": "https://stackoverflow.com/users/1190492/nullop"}, "reply_to_user": {"reputation": 505, "user_id": 6627176, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dafe9730c6fdbfe8ef7cb7cccf25c211?s=128&d=identicon&r=PG&f=1", "display_name": "spacedinosaur10", "link": "https://stackoverflow.com/users/6627176/spacedinosaur10"}, "edited": false, "score": 0, "creation_date": 1475182951, "post_id": 39758866, "comment_id": 66854099, "body": "I&#39;ve updated my comment with code sample. Could you check if it works for you? If you have any strftime calls applied to your date values, you probably have to remove them."}, {"owner": {"reputation": 505, "user_id": 6627176, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dafe9730c6fdbfe8ef7cb7cccf25c211?s=128&d=identicon&r=PG&f=1", "display_name": "spacedinosaur10", "link": "https://stackoverflow.com/users/6627176/spacedinosaur10"}, "edited": false, "score": 0, "creation_date": 1475615687, "post_id": 39758866, "comment_id": 67011656, "body": "Ah i see what might be the problem. I have the strtime function in there because I am using it for something un related- having excel write the current date below the data frame.. Her eis the code. date= dt.datetime.today().strftime(&quot;%m/%d/%Y&quot;)      nrows = df5.shape[0]      worksheet.write(nrows + 8, 0, &#39;Data as of &#39; + date, link_format)"}], "tags": [], "owner": {"reputation": 524, "user_id": 1190492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc54307a008d55ba763828244d37bff?s=128&d=identicon&r=PG", "display_name": "nullop", "link": "https://stackoverflow.com/users/1190492/nullop"}, "is_accepted": false, "score": 1, "last_activity_date": 1475182609, "last_edit_date": 1475182609, "creation_date": 1475103336, "answer_id": 39758866, "question_id": 39757293, "link": "https://stackoverflow.com/questions/39757293/strftime-function-pandas-python/39758866#39758866", "title": "strftime function pandas - Python", "body": "<p>strftime is creating a textual representation of a datetime value which later is formatted and displayed by Excel according to its formatting templates. We could change this formatting template using <code>date_format</code> parameter in our ExcelWriter constructor e.g.:<code>writer = pandas.ExcelWriter(\"test.xlsx\", engine=\"xlsxwriter\", date_format=\"ddmmyyyy\")</code>. I've slightly modified your sample:</p>\n\n<pre><code>import pandas as pd\nimport datetime\ndf = pd.DataFrame()\ndf['ASOFDATE'] = [datetime.datetime.now() for x in xrange(3)]\nfor i in xrange(3):\n    df[i] = [1,2,3]\ndf6 = df\nwriter = pd.ExcelWriter('test.xlsx', engine='xlsxwriter', date_format=\"ddmmyyyy\")\nworkbook = writer.book\ndf6.to_excel(writer, sheet_name= 'Frogs', startrow= 4, index=False)\nworksheet = writer.sheets['Frogs']\nformat5 = workbook.add_format({'num_format': '0.00%'})\nworksheet.set_column('B:B', 18, format5)\nworksheet.set_column('C:C', 18, format5)\nworksheet.set_column('D:D', 18, format5)\nlink_format = workbook.add_format({'color': 'black', 'bold': 1})\nworksheet.write(0, 0, 'Chart4', link_format)\nworksheet.write(1, 0, 'Frogs',link_format)\nwriter.save()\n</code></pre>\n\n<p>This code produces a file which has date values formatted according to the specified template.</p>\n"}], "owner": {"reputation": 505, "user_id": 6627176, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dafe9730c6fdbfe8ef7cb7cccf25c211?s=128&d=identicon&r=PG&f=1", "display_name": "spacedinosaur10", "link": "https://stackoverflow.com/users/6627176/spacedinosaur10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1513270094, "creation_date": 1475095390, "last_edit_date": 1513270094, "question_id": 39757293, "link": "https://stackoverflow.com/questions/39757293/strftime-function-pandas-python", "title": "strftime function pandas - Python", "body": "<p>I am trying to strip the time out of the date when the dataframe writes to Excel, but have been unsuccessful.</p>\n\n<p>The weird thing is, I am able to manipulate the dataframe by using the lambda and striptime function below, and can see it the function is working by my <code>print df6</code>.</p>\n\n<p>However, for some reason when I open the Excel file it shows in the format <code>%m%d%y: 12:00am</code>. I would like to just have the date show. Ideas?</p>\n\n<p>Here is my code:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>df6 = df\nworkbook = writer.book\ndf6.to_excel(writer, sheet_name= 'Frogs', startrow= 4, index=False)\ndf6['ASOFDATE'] = df6['ASOFDATE'].apply(lambda x:x.date().strftime('%d%m%y'))\nworksheet = writer.sheets['Frogs']\nformat5 = workbook.add_format({'num_format': '0.00%'})\n#format6= workbook.add_format({'num_format': 'mmm d yyyy'})\n#worksheet.set_column('A:A', 18, format6)\nworksheet.set_column('B:B', 18, format5)\nworksheet.set_column('C:C', 18, format5)\nworksheet.set_column('D:D', 18, format5)\nnow = datetime.now()\ndate= dt.datetime.today().strftime(\"%m/%d/%Y\")\nlink_format = workbook.add_format({'color': 'black', 'bold': 1})\nnrows = df6.shape[0]\nworksheet.write(0, 0, 'Chart4', link_format) \nworksheet.write(1, 0, 'Frogs',link_format) \n#Multiply dataframe by 100 to get out of decimals (this method is used when dates are in the picture)\ndf6[df6.columns[np.all(df6.gt(0) &amp; df6.lt(1),axis=0)]] *= 100\nprint df6\nwriter.save() \n</code></pre>\n"}, {"tags": ["python", "django", "forms", "django-registration"], "comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475095383, "post_id": 39757258, "comment_id": 66810562, "body": "You need to subclass <code>UserForm(RegistrationForm):</code> not <code>UserForm(UserCreationForm):</code>"}, {"owner": {"reputation": 53, "user_id": 6307675, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bddcbf7ddeded08661956e0cadde145?s=128&d=identicon&r=PG&f=1", "display_name": "Kerosive", "link": "https://stackoverflow.com/users/6307675/kerosive"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475095514, "post_id": 39757258, "comment_id": 66810633, "body": "I thought that was the case as well, but it did not change anything."}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475095581, "post_id": 39757258, "comment_id": 66810675, "body": "What do you expect? What fields?"}, {"owner": {"reputation": 53, "user_id": 6307675, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bddcbf7ddeded08661956e0cadde145?s=128&d=identicon&r=PG&f=1", "display_name": "Kerosive", "link": "https://stackoverflow.com/users/6307675/kerosive"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475095778, "post_id": 39757258, "comment_id": 66810785, "body": "The fields are irrelevant, I can add the fields into the <code>forms.py</code> of <code>django-registration</code> and get the desired effect that way if I absolutely need to. The bigger issue here is that for some reason the application is not using my form at all and instead automatically using the <code>forms.py</code> of <code>django-registration</code> even though I am telling it to use mine."}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475095832, "post_id": 39757258, "comment_id": 66810814, "body": "How do you know that? What is desired output and what you get?"}, {"owner": {"reputation": 53, "user_id": 6307675, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bddcbf7ddeded08661956e0cadde145?s=128&d=identicon&r=PG&f=1", "display_name": "Kerosive", "link": "https://stackoverflow.com/users/6307675/kerosive"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475096327, "post_id": 39757258, "comment_id": 66811055, "body": "I know because I tested by commenting out the entire form I had created and it still persisted. I then went to the <code>forms.py</code> in <code>django-registration</code> and added in the <code>first_name</code> and <code>last_name</code> fields into the <code>RegistrationForm</code> class and then requested it in my browser and saw the changes take effect. No matter what I change in my <code>UserForm</code> class within my <code>forms.py</code> no change takes effect."}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475096532, "post_id": 39757258, "comment_id": 66811164, "body": "Try to change the order of urls: put <code>url(r&#39;^accounts&#47;&#39;, include(&#39;registration.backends.hmac.urls&#39;)),</code> on 3rd place after your urls."}, {"owner": {"reputation": 53, "user_id": 6307675, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bddcbf7ddeded08661956e0cadde145?s=128&d=identicon&r=PG&f=1", "display_name": "Kerosive", "link": "https://stackoverflow.com/users/6307675/kerosive"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475096829, "post_id": 39757258, "comment_id": 66811323, "body": "That definitely did something, but now I am getting this error:  django.template.exceptions.TemplateDoesNotExist: {&#39;form&#39;: &lt;UserForm bound=False, valid=Unknown, fields=(username;first_name;last_name;email;password1;passwo&zwnj;&#8203;rd2)&gt;, &#39;csrf_token&#39;: &lt;SimpleLazyObject: &lt;function csrf.&lt;locals&gt;._get_val at 0x11083b378&gt;&gt;}"}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475097007, "post_id": 39757258, "comment_id": 66811424, "body": "Check if you got template there, of if your path is correct, maybe it&#39;s <code>&#39;templates&#47;registration&#47;registration_form.html&#39;</code>"}, {"owner": {"reputation": 53, "user_id": 6307675, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bddcbf7ddeded08661956e0cadde145?s=128&d=identicon&r=PG&f=1", "display_name": "Kerosive", "link": "https://stackoverflow.com/users/6307675/kerosive"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475097754, "post_id": 39757258, "comment_id": 66811783, "body": "I figured out why I was getting that error, the first to lines in <code>urls.py</code> were completely unnecessary and creating issues. I removed them and now I am back at my original issue."}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475098214, "post_id": 39757258, "comment_id": 66811981, "body": "C&#39;mon, you dont need to remove those urls. If you want your custom handling <i>register</i> process, then you need to keep them(before declaring urls from package). The error that you were getting with template, happened because you don&#39;t have template in <code>&#39;registration&#47;registration_form.html&#39;</code> path. You need to have such. Or you need to change path(referencing to existing template that you have that renders your form)"}], "answers": [{"tags": [], "owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "is_accepted": false, "score": 1, "last_activity_date": 1475096875, "creation_date": 1475096875, "answer_id": 39757683, "question_id": 39757258, "link": "https://stackoverflow.com/questions/39757258/using-django-registration-form-instead-of-own/39757683#39757683", "title": "using django-registration form instead of own", "body": "<p>Since <code>urlpatterns</code> has that order:</p>\n\n<pre><code>url(r'^accounts/', include('registration.backends.hmac.urls')),\nurl(r'^accounts/register/$', views.register, name='register'),\nurl(r'^accounts/register/complete/$', views.registration_complete, name='registration_complete'),\n</code></pre>\n\n<p>Url from <code>url(r'^accounts/', include('registration.backends.hmac.urls')),</code> match your <code>/accounts/register/</code> url first, and don't get to your <code>views.register</code> view. So, to change that, you need to change the order, so that url patterns would be</p>\n\n<pre><code>urlpatterns = [\n    url(r'^accounts/register/$', views.register, name='register'),\n    url(r'^accounts/register/complete/$', views.registration_complete, name='registration_complete'),\n    url(r'^accounts/', include('registration.backends.hmac.urls')),\n    ...\n    ]\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6307675, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bddcbf7ddeded08661956e0cadde145?s=128&d=identicon&r=PG&f=1", "display_name": "Kerosive", "link": "https://stackoverflow.com/users/6307675/kerosive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480287318, "creation_date": 1475095280, "question_id": 39757258, "link": "https://stackoverflow.com/questions/39757258/using-django-registration-form-instead-of-own", "title": "using django-registration form instead of own", "body": "<p>So I am using <code>django-registration</code> for email activation and the like. I defined my form and am calling to it properly however for some reason it is using the base form out of <code>django-registration</code> instead of my own. I have absolutely no clue as to why this is happening, any thoughts?</p>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render, render_to_response\nfrom django.http import HttpResponseRedirect\nfrom django.template.context_processors import csrf\nfrom django.contrib.auth.models import User\nfrom .forms import UserForm\n\n\ndef register(request):\n    if request.method == 'POST':\n        form = UserForm(request.POST)\n        if form.is_valid():\n            form.save()\n            return HttpResponseRedirect('/accounts/register/complete')\n\n    else:\n        form = UserForm()\n        token = {}\n        token.update(csrf(request))\n        token['form'] = form\n\n    return render('registration/registration_form.html', token)\n\ndef registration_complete(request):\n    return render('registration/registration_complete.html')\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>from django.conf.urls import include, url\nfrom django.contrib import admin\nfrom main import views\n\nurlpatterns = [\n\n    # Registration URLs\n    url(r'^accounts/', include('registration.backends.hmac.urls')),\n    url(r'^accounts/register/$', views.register, name='register'),\n    url(r'^accounts/register/complete/$', views.registration_complete, name='registration_complete'),\n\n    url(r'^admin/', admin.site.urls),\n    url(r'^$', views.index, name='index'),\n    url(r'^contact/$', views.contact, name='contact'),\n    url(r'^login/$', views.login, name='login'),\n    url(r'^register/$', views.register, name='register'),\n    url(r'^profile/$', views.profile, name='profile'),\n    url(r'^blog/$', views.blog, name='blog'),\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>from django import forms\nfrom django.contrib.auth.models import User\nfrom django.contrib.auth.forms import UserCreationForm\nfrom django.utils.translation import gettext as _\nfrom registration.forms import RegistrationFormUniqueEmail, RegistrationForm\n\nclass UserForm(UserCreationForm):\n\n    email = forms.EmailField(required=True)\n    first_name = forms.CharField(label=_(\"Firstname\"), required=False)\n    last_name = forms.CharField(label=_(\"Lastname\"),  required=False)\n\n    class Meta:\n        model = User\n        fields = ('username', 'first_name', 'last_name', 'email', 'password1', 'password2')\n\n    def save(self, commit=True):\n        user = super(UserForm, self).save(commit=False)\n        user.first_name = self.cleaned_data['first_name']\n        user.last_name = self.cleaned_data['last_name']\n        user.email = self.cleaned_data['email']\n\n        if commit:\n            user.save()\n\n        return user\n</code></pre>\n\n<p>template</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% block title %}Register{% endblock %}\n{% block content %}\n\n  &lt;h2&gt;Registration&lt;/h2&gt;\n\n  &lt;form action=\"/accounts/register/\" method=\"post\"&gt;{% csrf_token %}\n    {{ form.as_p }}\n  &lt;input type=\"submit\" value=\"Register\" /&gt;\n\n  &lt;/form&gt;\n\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 10101429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ce17fd24c28c3cd14adac3ffe11f00?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/10101429/will"}, "is_accepted": false, "score": 0, "last_activity_date": 1532100468, "creation_date": 1532100468, "answer_id": 51445876, "question_id": 39757225, "link": "https://stackoverflow.com/questions/39757225/user-database-authentication-in-django/51445876#51445876", "title": "User database authentication in Django", "body": "<p>I know that this is an old question but here is for future Googlers that may have the same issue.</p>\n\n<p>I just had the <a href=\"https://stackoverflow.com/questions/51408934/per-user-database-authentication-in-django/51445784#51445784\">same problem</a>. While I could not find a way to log everything site-wide, I was able to make it work with select queries.</p>\n\n<p>I was able to accomplish this by giving the SQL user the IMPERSONATE permission and performing EXECUTE AS prior to the DB queries that I needed to have logged in models.py.</p>\n\n<pre><code>    cursor = self.connection.cursor()\n    try:\n        cursor.execute(\"EXECUTE AS \" + get_current_user()\n    except DatabaseError as e:\n        cursor.close()\n        raise e\n</code></pre>\n"}], "owner": {"reputation": 1124, "user_id": 5199096, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/7121c9c8b95b9b4ba519af1d02515dff?s=128&d=identicon&r=PG&f=1", "display_name": "mk8efz", "link": "https://stackoverflow.com/users/5199096/mk8efz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1532100468, "creation_date": 1475095113, "question_id": 39757225, "link": "https://stackoverflow.com/questions/39757225/user-database-authentication-in-django", "title": "User database authentication in Django", "body": "<p>I have created a basic CRUD web application with Django. Whenever an operation is performed on the database, it's the 'server'-user that's performing the operations, defined by settings.py file:</p>\n\n<pre><code>default': {\n    'ENGINE': \"sql_server.pyodbc\",\n    'HOST': \"MY-SERVER\\SQL1\",\n    'USER': \"AppFrontEnd\",\n    'PASSWORD': \"MyPassword123\",\n    'NAME': \"TEST_DB_1\"\n   }\n</code></pre>\n\n<p>Since I keep audit tables, I'd like to track where the changes are coming from and who is making them. We have a couple desktop applications that do this (Access) by using Windows passthrough authentication - but in Django I have to provide each specific users database login information. </p>\n"}, {"tags": ["python", "pandas", "matplotlib", "graph", "interactive"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 5134930, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156050187550314/picture?type=large", "display_name": "Varun Balupuri", "link": "https://stackoverflow.com/users/5134930/varun-balupuri"}, "edited": false, "score": 0, "creation_date": 1475656888, "post_id": 39757585, "comment_id": 67025393, "body": "Thanks, however this leads to error:  AttributeError: &#39;AxesSubplot&#39; object has no attribute &#39;get_xdata&#39;  Any ideas?"}], "tags": [], "owner": {"reputation": 20969, "user_id": 2314737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/RF6KX.jpg?s=128&g=1", "display_name": "user2314737", "link": "https://stackoverflow.com/users/2314737/user2314737"}, "is_accepted": false, "score": 1, "last_activity_date": 1475753238, "last_edit_date": 1475753238, "creation_date": 1475096471, "answer_id": 39757585, "question_id": 39757188, "link": "https://stackoverflow.com/questions/39757188/how-can-i-make-a-python-candlestick-chart-clickable-in-matplotlib/39757585#39757585", "title": "How can I make a python candlestick chart clickable in matplotlib", "body": "<p>You need to set <code>set_picker(True)</code> to enable a pick event  or give a tolerance in points as a float (see <a href=\"http://matplotlib.org/api/artist_api.html#matplotlib.artist.Artist.set_picker\" rel=\"nofollow\">http://matplotlib.org/api/artist_api.html#matplotlib.artist.Artist.set_picker</a>).</p>\n\n<p>So in your case <code>ax1.set_picker(True)</code> if you want  pick event to be fired whenever if mouseevent is over <code>ax1</code>.</p>\n\n<p>You can enable pick events on the elements of the candlestick chart. I read the documentation and <a href=\"http://matplotlib.org/api/finance_api.html#matplotlib.finance.candlestick2_ohlc\" rel=\"nofollow\"><code>candlestick2_ohlc</code></a> returns a tuple of two objects: a <code>LineCollection</code> and a <code>PolyCollection</code>. So you can name these objects and set the picker to true on them</p>\n\n<pre><code>(lines,polys) = candlestick2_ohlc(ax1, ...)\nlines.set_picker(True) # collection of lines in the candlestick chart\npolys.set_picker(True) # collection of polygons in the candlestick chart\n</code></pre>\n\n<p>The index of the event <code>ind = event.ind[0]</code> will tell you which element in the collection contained the mouse event (<code>event.ind</code> returns a list of indices since a mouse event might pertain more than one item).</p>\n\n<p>Once you trigger a pick event on a candlestick you can print the data from the original dataframe.</p>\n\n<p>Here's some working code</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib.collections import LineCollection, PolyCollection\nfrom matplotlib.text import Text\nfrom matplotlib.finance import candlestick2_ohlc\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(0)\ndates = pd.date_range('20160101',periods=7)\ndf = pd.DataFrame(np.reshape(1+np.random.random_sample(42)*0.1,(7,6)),index=dates,columns=[\"PX_BID\",\"PX_ASK\",\"PX_LAST\",\"PX_OPEN\",\"PX_HIGH\",\"PX_LOW\"])\ndf['PX_HIGH']+=.1\ndf['PX_LOW']-=.1\n\nfig, ax1 = plt.subplots()\n\nax1.set_title('click on points', picker=20)\nax1.set_ylabel('ylabel', picker=20, bbox=dict(facecolor='red'))\n\n(lines,polys) = candlestick2_ohlc(ax1, df['PX_OPEN'],df['PX_HIGH'],df['PX_LOW'],df['PX_LAST'],width=0.4)\nlines.set_picker(True)\npolys.set_picker(True)\n\ndef onpick1(event):\n    if isinstance(event.artist, (Text)):\n        text = event.artist\n        print 'You clicked on the title (\"%s\")' % text.get_text()\n    elif isinstance(event.artist, (LineCollection, PolyCollection)):   \n        thisline = event.artist\n        mouseevent = event.mouseevent\n        ind = event.ind[0]\n        print 'You clicked on item %d' % ind\n        print 'Day: ' + df.index[ind].normalize().to_datetime().strftime('%Y-%m-%d')\n        for p in ['PX_OPEN','PX_OPEN','PX_HIGH','PX_LOW']:\n            print p + ':' + str(df[p][ind])    \n        print('x=%d, y=%d, xdata=%f, ydata=%f' %\n          ( mouseevent.x, mouseevent.y, mouseevent.xdata, mouseevent.ydata))\n\n\n\nfig.canvas.mpl_connect('pick_event', onpick1)\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 5134930, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156050187550314/picture?type=large", "display_name": "Varun Balupuri", "link": "https://stackoverflow.com/users/5134930/varun-balupuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3264, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1475753238, "creation_date": 1475094949, "last_edit_date": 1475095129, "question_id": 39757188, "link": "https://stackoverflow.com/questions/39757188/how-can-i-make-a-python-candlestick-chart-clickable-in-matplotlib", "title": "How can I make a python candlestick chart clickable in matplotlib", "body": "<p>I am trying to make a OHLC graph plotted with matplotlib interactive upon the user clicking on a valid point. The data is stored as a pandas dataframe of the form  </p>\n\n<pre><code>index       PX_BID  PX_ASK  PX_LAST  PX_OPEN  PX_HIGH  PX_LOW\n2016-07-01  1.1136  1.1137   1.1136   1.1106   1.1169  1.1072\n2016-07-04  1.1154  1.1155   1.1154   1.1143   1.1160  1.1098\n2016-07-05  1.1076  1.1077   1.1076   1.1154   1.1186  1.1062\n2016-07-06  1.1100  1.1101   1.1100   1.1076   1.1112  1.1029\n2016-07-07  1.1062  1.1063   1.1063   1.1100   1.1107  1.1053\n</code></pre>\n\n<p>I am plotting it with matplotlib's candlestick function:</p>\n\n<pre><code>candlestick2_ohlc(ax1, df['PX_OPEN'],df['PX_HIGH'],df['PX_LOW'],df['PX_LAST'],width=1)\n</code></pre>\n\n<p>When plotted it looks somthing like this:</p>\n\n<p><a href=\"https://pythonprogramming.net/static/images/matplotlib/candlestick-ohlc-graphs-matplotlib-tutorial.png\" rel=\"nofollow\">https://pythonprogramming.net/static/images/matplotlib/candlestick-ohlc-graphs-matplotlib-tutorial.png</a></p>\n\n<p>I want the console to print out the value of the point clicked, the date and whether it is an open, high low or close. So far I have something like:</p>\n\n<pre><code>fig, ax1 = plt.subplots()\n\nax1.set_title('click on points', picker=True)\nax1.set_ylabel('ylabel', picker=True, bbox=dict(facecolor='red'))\nline = candlestick2_ohlc(ax1, df['PX_OPEN'],df['PX_HIGH'],df['PX_LOW'],df['PX_LAST'],width=0.4)\n\ndef onpick1(event):\n    if isinstance(event.artist, (lineCollection, barCollection)):\n        thisline = event.artist\n        xdata = thisline.get_xdata()\n        ydata = thisline.get_ydata()\n        ind = event.ind\n        #points = tuple(zip(xdata[ind], ydata[ind]))\n        #print('onpick points:', points)\n        print( 'X='+str(np.take(xdata, ind)[0]) ) # Print X point\n        print( 'Y='+str(np.take(ydata, ind)[0]) ) # Print Y point\n\nfig.canvas.mpl_connect('pick_event', onpick1)\nplt.show()\n</code></pre>\n\n<p>This code however does not print anything when ran and points are clicked. When I look at examples of interactive matplotlib graphs, they tend to have an argument in the plot function such as:</p>\n\n<pre><code>line, = ax.plot(rand(100), 'o', picker=5)\n</code></pre>\n\n<p>However, candlestick2_ohlc does not take a 'picker' arg. Any tips on how I can get around this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": true, "score": 0, "last_activity_date": 1475095559, "creation_date": 1475095559, "answer_id": 39757344, "question_id": 39757176, "link": "https://stackoverflow.com/questions/39757176/distinct-rows-from-a-list-of-dictionaries-based-on-values/39757344#39757344", "title": "Distinct rows from a list of dictionaries based on values", "body": "<p>This works:</p>\n\n<pre><code>from collections import defaultdict\nfrom operator import itemgetter\n\ncode_dict = defaultdict(list)\nfor d in sampleInputDbData:\n    code_dict[d[\"FundCode\"]].append(d)\n\noutput_data = [max(d, key=itemgetter(\"ProdEndDate\")) for d in code_dict.values()]\n</code></pre>\n\n<p>I first create a default dict for temporary sorting by <code>FundCode</code>. Each key will contain a list with all dicts with the same <code>FundCode</code>. Then, I'm taking the last <code>ProdEndDate</code> from each list.</p>\n"}], "owner": {"reputation": 401, "user_id": 1202863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f9a379ee2dc4f74108213e164ec873e?s=128&d=identicon&r=PG", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/1202863/pankaj-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 39757344, "answer_count": 1, "score": 1, "last_activity_date": 1475095559, "creation_date": 1475094906, "last_edit_date": 1475095217, "question_id": 39757176, "link": "https://stackoverflow.com/questions/39757176/distinct-rows-from-a-list-of-dictionaries-based-on-values", "title": "Distinct rows from a list of dictionaries based on values", "body": "<p>I have this sample input below <strong>sampleInputDbData</strong></p>\n\n<pre><code>def sampleInputDbData( self ):\n    return \\\n    [\n        {'FundCode': 300, 'FundName': 'First Fund', 'ProdStartDate': dt(2016,7,3,4,5,6), 'ProdEndDate': dt(2016,8,3,4,5,6), 'FundFee': 100},\n        {'FundCode': 300, 'FundName': 'First Fund', 'ProdStartDate': dt(2016,8,3,4,5,6), 'ProdEndDate': dt(2016,8,3,6,5,6), 'FundFee': 101 },\n        {'FundCode': 300, 'FundName': 'First Fund', 'ProdStartDate': dt(2016,8,3,6,5,6), 'ProdEndDate': dt(2016,8,15,6,5,6), 'FundFee': 102 },\n        {'FundCode': 301, 'FundName': 'Second Fund', 'ProdStartDate': dt(2016,7,3,4,5,6), 'ProdEndDate': dt(2016,8,3,6,5,6), 'FundFee': 110},\n        {'FundCode': 301, 'FundName': 'Second Fund', 'ProdStartDate': dt(2016,8,3,6,5,6), 'ProdEndDate':  dt(2016,8,15,6,5,6), 'FundFee': 111},\n        {'FundCode': 302, 'FundName': 'Third Fund', 'ProdStartDate': dt(2016,8,3,6,5,6), 'ProdEndDate':  dt(2016,8,15,6,5,6), 'FundFee': 120},\n    ]\n</code></pre>\n\n<p>What I want is this <strong>sampleOutputDbData</strong> as output</p>\n\n<pre><code>def sampleOutputDbData( self ):\n    return \\\n    [\n        {'FundCode': 300, 'FundName': 'First Fund', 'ProdStartDate': dt(2016,8,3,6,5,6), 'ProdEndDate': dt(2016,8,15,6,5,6), 'FundFee': 102 },\n        {'FundCode': 301, 'FundName': 'Second Fund', 'ProdStartDate': dt(2016,8,3,6,5,6), 'ProdEndDate':  dt(2016,8,15,6,5,6), 'FundFee': 111},\n        {'FundCode': 302, 'FundName': 'Third Fund', 'ProdStartDate': dt(2016,8,3,6,5,6), 'ProdEndDate':  dt(2016,8,15,6,5,6), 'FundFee': 120},\n    ]\n</code></pre>\n\n<p>The decision factor is basically: Get all unique <strong>FundCode</strong> based on max value of the key <strong>ProdEndDate</strong>. dt is type datetime</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475096431, "post_id": 39757126, "comment_id": 66811112, "body": "Re your update, what is not working? Is it giving an error? Perhaps you are just not using backslashes in your <code>myPath</code> variable?"}, {"owner": {"reputation": 422, "user_id": 1795949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a8555547748759e38e7353476eed52?s=128&d=identicon&r=PG", "display_name": "noclew", "link": "https://stackoverflow.com/users/1795949/noclew"}, "reply_to_user": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475100973, "post_id": 39757126, "comment_id": 66813079, "body": "@brianpck Thanks, I updated. The function above to add a path to sys.path works inconsistently. It works sometimes and sometimes not. Maybe it is a specific problem of my environment, I guess... By the way, If I do this adding to path thing over a list of paths with sys.path, is Intersection function is the best to do it?"}, {"owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475106331, "post_id": 39757126, "comment_id": 66814533, "body": "If you want to find the paths that are in both lists, then yes, intersection is the best way. With regard to <code>sys.path</code>, I recommend asking another question if this is an issue since it&#39;s really a separate issue."}], "answers": [{"comments": [{"owner": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "edited": false, "score": 0, "creation_date": 1475131697, "post_id": 39757180, "comment_id": 66821523, "body": "Just to clarify; this is showing the words in <code>list1</code> that <i>is not</i>  in <code>compSet</code>, and not which words that is in it."}], "tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": false, "score": 1, "last_activity_date": 1475094914, "creation_date": 1475094914, "answer_id": 39757180, "question_id": 39757126, "link": "https://stackoverflow.com/questions/39757126/comparing-strings-in-list-to-strings-in-list/39757180#39757180", "title": "comparing strings in list to strings in list", "body": "<p>Try that:</p>\n\n<pre><code> &gt;&gt;&gt; l = list(set(list1)-set(compSet))\n &gt;&gt;&gt; l\n ['this', 'and']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 422, "user_id": 1795949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a8555547748759e38e7353476eed52?s=128&d=identicon&r=PG", "display_name": "noclew", "link": "https://stackoverflow.com/users/1795949/noclew"}, "edited": false, "score": 0, "creation_date": 1475095159, "post_id": 39757182, "comment_id": 66810429, "body": "Thank you so much!"}, {"owner": {"reputation": 422, "user_id": 1795949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a8555547748759e38e7353476eed52?s=128&d=identicon&r=PG", "display_name": "noclew", "link": "https://stackoverflow.com/users/1795949/noclew"}, "edited": false, "score": 0, "creation_date": 1475096206, "post_id": 39757182, "comment_id": 66810996, "body": "Hi Brian, I just updated my question. Can you please look into it?"}], "tags": [], "owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "is_accepted": true, "score": 8, "last_activity_date": 1475095462, "last_edit_date": 1475095462, "creation_date": 1475094920, "answer_id": 39757182, "question_id": 39757126, "link": "https://stackoverflow.com/questions/39757126/comparing-strings-in-list-to-strings-in-list/39757182#39757182", "title": "comparing strings in list to strings in list", "body": "<p>There is a simple way to check for the intersection of two lists: convert them to a set and use <code>intersection</code>:</p>\n\n<pre><code>&gt;&gt;&gt; list1 = ['this', 'and', 'that' ]\n&gt;&gt;&gt; compSet = [ 'check','that','thing' ]\n&gt;&gt;&gt; set(list1).intersection(compSet)\n{'that'}\n</code></pre>\n\n<p>You can also use bitwise operators:</p>\n\n<p>Intersection:</p>\n\n<pre><code>&gt;&gt;&gt; set(list1) &amp; set(compSet)\n{'that'}\n</code></pre>\n\n<p>Union:</p>\n\n<pre><code>&gt;&gt;&gt; set(list1) | set(compSet)\n{'this', 'and', 'check', 'thing', 'that'}\n</code></pre>\n\n<p>You can make any of these results a list using <code>list()</code>.</p>\n"}], "owner": {"reputation": 422, "user_id": 1795949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a8555547748759e38e7353476eed52?s=128&d=identicon&r=PG", "display_name": "noclew", "link": "https://stackoverflow.com/users/1795949/noclew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 39757182, "answer_count": 2, "score": 7, "last_activity_date": 1475100875, "creation_date": 1475094729, "last_edit_date": 1475100875, "question_id": 39757126, "link": "https://stackoverflow.com/questions/39757126/comparing-strings-in-list-to-strings-in-list", "title": "comparing strings in list to strings in list", "body": "<p>I see that the code below can check if a word is </p>\n\n<pre><code>list1 = 'this'\ncompSet = [ 'this','that','thing' ]\nif any(list1 in s for s in compSet): print(list1)\n</code></pre>\n\n<p>Now I want to check if a word in a list is in some other list as below:</p>\n\n<pre><code>list1 = ['this', 'and', 'that' ]\ncompSet = [ 'check','that','thing' ]\n</code></pre>\n\n<p>What's the best way to check if words in list1 are in compSet, and doing something over non-existing elements, e.g., appending 'and' to compSet or deleting 'and' from list1?</p>\n\n<p>__________________update___________________</p>\n\n<p>I just found that doing the same thing is not working with sys.path. The code below sometimes works to add the path to sys.path, and sometimes not.</p>\n\n<pre><code>myPath = '/some/my path/is here'\nif not any( myPath in s for s in sys.path):\n    sys.path.insert(0, myPath)\n</code></pre>\n\n<p>Why is this not working? Also, if I want to do the same operation on a set of my paths,   </p>\n\n<pre><code>myPaths = [ '/some/my path/is here', '/some/my path2/is here' ...]\n</code></pre>\n\n<p>How can I do it?</p>\n"}, {"tags": ["python", "parallel-processing"], "owner": {"reputation": 411, "user_id": 3716774, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2da9579355efbe9766fdf0e4e95ff19b?s=128&d=identicon&r=PG&f=1", "display_name": "user3716774", "link": "https://stackoverflow.com/users/3716774/user3716774"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1475094419, "creation_date": 1475094419, "question_id": 39757044, "link": "https://stackoverflow.com/questions/39757044/python-ipyparallel-apply-function-in-class", "title": "python ipyparallel apply function in class", "body": "<p>Here is my snippet:</p>\n\n<pre><code>import ipyparallel as ipp\n\nc = ipp.Client()\n\nclass test:\n    def f(self):\n       return 'hello'\n\n    def run(self, client):\n       self.c = client\n       self.c[:].apply_sync(self.f)\n\na = test()\na.run(c)\n</code></pre>\n\n<p>And it gives me error:\n<code>AttributeError: Can't pickle local object 'wrap.&lt;locals&gt;.null_wrapper'</code></p>\n\n<p>I don't understand why. </p>\n"}, {"tags": ["python", "http-error"], "comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475094310, "post_id": 39756947, "comment_id": 66809910, "body": "Just check for response code. If it equals <code>404</code> do what you need."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1475094742, "post_id": 39756947, "comment_id": 66810185, "body": "nah, urllib raises HTTPError for 404, not a response with code 404"}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1475094658, "last_edit_date": 1475094658, "creation_date": 1475094352, "answer_id": 39757025, "question_id": 39756947, "link": "https://stackoverflow.com/questions/39756947/how-to-check-http-errors-for-more-than-two-urls/39757025#39757025", "title": "How to check HTTP errors for more than two URLs?", "body": "<p>Another job for plain old for loop:</p>\n\n<pre><code>for url in testurl1, testurl2, testurl3\n    req = Request(url)\n    try:\n        response = urlopen(req)\n    except HttpError as err:\n        if err.code == 404:\n            continue\n        raise\n    else:\n        # do what you want with successful response here (or outside the loop)\n        break\nelse:\n    # They ALL errored out with HTTPError code 404.  Handle this?\n    raise err\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 6226488, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d5e57ed25220782e76124bbf83cb9e28?s=128&d=identicon&r=PG&f=1", "display_name": "jath03", "link": "https://stackoverflow.com/users/6226488/jath03"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094676, "creation_date": 1475094676, "answer_id": 39757114, "question_id": 39756947, "link": "https://stackoverflow.com/questions/39756947/how-to-check-http-errors-for-more-than-two-urls/39757114#39757114", "title": "How to check HTTP errors for more than two URLs?", "body": "<p>Hmmm maybe something like this?</p>\n\n<pre><code>from urllib2 import Request, urlopen\nfrom urllib2 import URLError, HTTPError\n\ndef checkfiles():\n    req = Request('http://testurl1')\n    try:\n        response = urlopen(req)\n        url1=('http://testurl1')\n\n    except HTTPError, URLError:\n        try:\n            url1 = ('http://testurl2')\n        except HTTPError, URLError:\n            url1 = ('http://testurl3')\n    print url1\n    finalURL='wget '+url1+'/testfile.tgz'\n\n    print finalURL\n\ncheckfiles()\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6237702, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0d1d9fece1a9e1f2e6e633457e89be3?s=128&d=identicon&r=PG&f=1", "display_name": "beginner_user", "link": "https://stackoverflow.com/users/6237702/beginner-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 39757025, "answer_count": 2, "score": 2, "last_activity_date": 1475094676, "creation_date": 1475094088, "last_edit_date": 1475094415, "question_id": 39756947, "link": "https://stackoverflow.com/questions/39756947/how-to-check-http-errors-for-more-than-two-urls", "title": "How to check HTTP errors for more than two URLs?", "body": "<p><strong><em>Question: I've 3 URLS - testurl1, testurl2 and testurl3. I'd like to try testurl1 first, if I get 404 error then try testurl2, if that gets 404 error then try testurl3. How to achieve this? So far I've tried below but that works only for two url, how to add support for third url?</em></strong></p>\n\n<pre><code>from urllib2 import Request, urlopen\nfrom urllib2 import URLError, HTTPError\n\ndef checkfiles():\n    req = Request('http://testurl1')\n    try:\n        response = urlopen(req)\n        url1=('http://testurl1')\n\n    except HTTPError, URLError:\n        url1 = ('http://testurl2')\n\n    print url1\n    finalURL='wget '+url1+'/testfile.tgz'\n\n    print finalURL\n\ncheckfiles()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1475093956, "post_id": 39756899, "comment_id": 66809689, "body": "<code>pip3 install</code> will do."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1475093968, "post_id": 39756899, "comment_id": 66809695, "body": "are you aware of <a href=\"http://docs.python-guide.org/en/latest/dev/virtualenvs/\" rel=\"nofollow noreferrer\">virtualenv</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6896078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxcw9.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6896078/garrett"}, "is_accepted": false, "score": 0, "last_activity_date": 1475095172, "creation_date": 1475095172, "answer_id": 39757237, "question_id": 39756899, "link": "https://stackoverflow.com/questions/39756899/different-versions-of-python-in-one-mac-how-can-i-open-a-specific-version-among/39757237#39757237", "title": "different versions of python in one mac, how can I open a specific version among them?", "body": "<p>Try using pip for 3.5:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>pip3.5 install bumpy\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6853767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/322bf9c75d4a3d5962da044f62d3a552?s=128&d=identicon&r=PG&f=1", "display_name": "Jaeho Jung", "link": "https://stackoverflow.com/users/6853767/jaeho-jung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "closed_date": 1475336464, "answer_count": 1, "score": 1, "last_activity_date": 1475095172, "creation_date": 1475093859, "question_id": 39756899, "link": "https://stackoverflow.com/questions/39756899/different-versions-of-python-in-one-mac-how-can-i-open-a-specific-version-among", "closed_reason": "Duplicate", "title": "different versions of python in one mac, how can I open a specific version among them?", "body": "<p>I just started learning python and while I tried to follow several examples, I installed different versions of python in my mac.\nI found out there are already python in my mac later, and I did not consider it seriously.</p>\n\n<p>Anyway, I tried to do something with idle, or python 3.5, and it does not have bumpy module.\nI then tried to install the module so I opened a terminal and \"pip install bumpy:\"\nit says it already has that in python2.7</p>\n\n<p>Are there ways that I can do pip install thing in terminal into python3.5?</p>\n\n<p>Thanks a lot.</p>\n\n<p>Sincerely,\nJaeho</p>\n"}, {"tags": ["python", "composition"], "comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 1, "creation_date": 1475094202, "post_id": 39756890, "comment_id": 66809832, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17846545/python-comprehension-to-compose-two-dictionaries\">Python: comprehension to compose two dictionaries</a>"}], "answers": [{"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094091, "creation_date": 1475094091, "answer_id": 39756948, "question_id": 39756890, "link": "https://stackoverflow.com/questions/39756890/stuck-defining-composition-function-in-python/39756948#39756948", "title": "Stuck defining composition function in python", "body": "<p>You need to just iterate over one dict <code>f</code>, and in the comprehension, replace the value of f with the value of <code>g</code>  </p>\n\n<pre><code>f = {0:'a', 1:'b'}\ng = {'a':'apple', 'b': 'banana'}\nnew_dict = {k: g[v] for k, v in f.items()}\n# Value of new_dict = {0: 'apple', 1: 'banana'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094174, "creation_date": 1475094174, "answer_id": 39756980, "question_id": 39756890, "link": "https://stackoverflow.com/questions/39756890/stuck-defining-composition-function-in-python/39756980#39756980", "title": "Stuck defining composition function in python", "body": "<p>The correct dict comprehension would be:</p>\n\n<pre><code>{i:g[f[i]] for i in f}\n</code></pre>\n\n<p>You did:</p>\n\n<pre><code>{i:g[j] for i in f for j in g}\n</code></pre>\n\n<p>That mapped every i to every <code>i</code> to every value in <code>g</code>, but then dict removed duplicate keys.</p>\n\n<p>To see what is going on, try generating a list instead:</p>\n\n<pre><code>&gt;&gt;&gt; [(i, g[j]) for i in f for j in g]\n[(0, 'apple'), (0, 'banana'), (1, 'apple'), (1, 'banana')]\n</code></pre>\n\n<p>In the correct case:</p>\n\n<pre><code>&gt;&gt;&gt; [(i, g[f[i]]) for i in f]\n[(0, 'apple'), (1, 'banana')]\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5378819, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/060ee16495064b830311dcc862d9d42d?s=128&d=identicon&r=PG&f=1", "display_name": "blionzion", "link": "https://stackoverflow.com/users/5378819/blionzion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475094174, "creation_date": 1475093826, "question_id": 39756890, "link": "https://stackoverflow.com/questions/39756890/stuck-defining-composition-function-in-python", "title": "Stuck defining composition function in python", "body": "<p>input: two functions f and g, represented as dictionaries, such that g \u25e6 f exists. output: dictionary that represents the function g \u25e6 f. \nexample: given f = {0:\u2019a\u2019, 1:\u2019b\u2019} and g = {\u2019a\u2019:\u2019apple\u2019, \u2019b\u2019:\u2019banana\u2019}, return {0:\u2019apple\u2019, 1:\u2019banana\u2019}.</p>\n\n<p>The closest to the correct answer I have is with {i:g[j] for i in f for j in g} which outputs {0: 'apple', 1: 'apple'}. What am I doing wrong?</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "pip", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 475, "user_id": 2078504, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/hZPPs.jpg?s=128&g=1", "display_name": "IAmHomes", "link": "https://stackoverflow.com/users/2078504/iamhomes"}, "is_accepted": false, "score": 0, "last_activity_date": 1475248018, "creation_date": 1475248018, "answer_id": 39794666, "question_id": 39756878, "link": "https://stackoverflow.com/questions/39756878/python-schematics-model-conversion-error-rouge-field/39794666#39794666", "title": "Python Schematics model conversion error rouge field", "body": "<p>Need to use ModelType(ModelName) rather thans DictType</p>\n"}], "owner": {"reputation": 475, "user_id": 2078504, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/hZPPs.jpg?s=128&g=1", "display_name": "IAmHomes", "link": "https://stackoverflow.com/users/2078504/iamhomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1475248018, "creation_date": 1475093789, "last_edit_date": 1475149142, "question_id": 39756878, "link": "https://stackoverflow.com/questions/39756878/python-schematics-model-conversion-error-rouge-field", "title": "Python Schematics model conversion error rouge field", "body": "<p>Please help me on this, I have a model like this which i wanted to import,</p>\n\n<pre><code>cricket:\n players:\n  1 : Mike\n  2 : Mark\n  3 : Miller\n scores:\n  12: 222\n  13: 255\n  15: 555\n</code></pre>\n\n<p>When using <code>DictType(ModelType(CricModel), default=None, deserialize_from=('cricket', 'params'))</code> it's throwing error.</p>\n\n<p>Am i doing it correctly</p>\n"}, {"tags": ["python", "selenium", "xpath"], "answers": [{"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1475094051, "post_id": 39756871, "comment_id": 66809745, "body": "You could also use the` <code>%r</code> placeholder to get the <code>repr()</code> of the string, which won&#39;t be exactly what you want in complex cases due to differences between Python and XPath syntax, but which might be good enough in most cases."}, {"owner": {"reputation": 1240, "user_id": 6648326, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/zaG25.jpg?s=128&g=1", "display_name": "MasterJoe", "link": "https://stackoverflow.com/users/6648326/masterjoe"}, "edited": false, "score": 0, "creation_date": 1475095202, "post_id": 39756871, "comment_id": 66810458, "body": "Btw, when do we need to use parameters in xpath ? (first time I am seeing parameters in xpath.)"}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 2, "creation_date": 1475098925, "post_id": 39756871, "comment_id": 66812294, "body": "Those parameters are not a part of XPath but rather being substituted by Python before the XPath expression is evaluated."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 3, "last_activity_date": 1475093773, "creation_date": 1475093773, "answer_id": 39756871, "question_id": 39756842, "link": "https://stackoverflow.com/questions/39756842/using-parameters-in-the-xpath/39756871#39756871", "title": "Using parameters in the XPath", "body": "<p>Don't forget about the quotes around the placeholders:</p>\n\n<pre><code>\"//*[@id='%s']/optgroup[@label='%s']/[contains(@title, '%s')]\" % (FIELDTYPE, label, fieldtype)\n</code></pre>\n\n<p>Also note that I've also added the <code>*</code> after the <code>//</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5796982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1aae9de1aa5487f0806df3a3a3eff93f?s=128&d=identicon&r=PG&f=1", "display_name": "protea", "link": "https://stackoverflow.com/users/5796982/protea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1475096305, "creation_date": 1475093677, "last_edit_date": 1475096305, "question_id": 39756842, "link": "https://stackoverflow.com/questions/39756842/using-parameters-in-the-xpath", "title": "Using parameters in the XPath", "body": "<p>I am trying to use parameters in the xpath expression but no luck.</p>\n\n<pre><code>field = //*[@id=%s]/optgroup[@label=%s]/*[contains(@title, %s)]\"%(FIELDTYPE, label, fieldtype)\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "macos", "tkinter", "tkmessagebox"], "answers": [{"tags": [], "owner": {"reputation": 2132, "user_id": 830431, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qBd4q.jpg?s=128&g=1", "display_name": "Grezzo", "link": "https://stackoverflow.com/users/830431/grezzo"}, "is_accepted": true, "score": 1, "last_activity_date": 1475095835, "last_edit_date": 1475095835, "creation_date": 1475094385, "answer_id": 39757032, "question_id": 39756822, "link": "https://stackoverflow.com/questions/39756822/why-cant-i-change-the-icon-on-a-tkmessagebox-askyesno-on-os-x/39757032#39757032", "title": "Why can&#39;t I change the icon on a tkMessagebox.askyesno() on OS X?", "body": "<p>I found a solution:</p>\n\n<pre><code>tkMessageBox.askretrycancel(title, message, type=tkMessageBox.YESNO)\n</code></pre>\n\n<p>seems to work, but <strong>both buttons presses return <code>False</code>, so it's not of any use.</strong></p>\n\n<pre><code>tkMessageBox.showwarning(title, message, type=tkMessageBox.YESNO)\n</code></pre>\n\n<p><strong>does also work work</strong>, but be aware that it returns <code>'yes'</code> or <code>'no'</code>, not <code>True</code> or <code>False</code>. It's the only real option though.</p>\n\n<hr>\n\n<p>I would still be interested if anyone can tell me whether it is a bug.</p>\n"}], "owner": {"reputation": 2132, "user_id": 830431, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qBd4q.jpg?s=128&g=1", "display_name": "Grezzo", "link": "https://stackoverflow.com/users/830431/grezzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 0, "accepted_answer_id": 39757032, "answer_count": 1, "score": 4, "last_activity_date": 1475095835, "creation_date": 1475093569, "question_id": 39756822, "link": "https://stackoverflow.com/questions/39756822/why-cant-i-change-the-icon-on-a-tkmessagebox-askyesno-on-os-x", "title": "Why can&#39;t I change the icon on a tkMessagebox.askyesno() on OS X?", "body": "<p><code>tkMessageBox.askyesno('Title', 'Message', icon=tkMessageBox.WARNING)</code> on OS X just gives me the rocket icon.</p>\n\n<p>I know there is some weirdness with OS X and tkMessageBox icons because <code>tkMessageBox.showerror()</code> just shows the rocket icon, but <code>tkMessageBox.showwarning</code> shows a yellow triangle (with a small rocket in the corner)</p>\n\n<p>Is this is a bug?</p>\n\n<p>Is there some workaround to get a warning triangle and Yes/No buttons without having to resort to making my own message box window from scratch?</p>\n"}, {"tags": ["python", "flask", "python-requests", "gunicorn", "gevent"], "comments": [{"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1475093654, "post_id": 39756807, "comment_id": 66809523, "body": "What do you expect would happen here? You can&#39;t return anything to the client if you haven&#39;t received it yet"}, {"owner": {"reputation": 853, "user_id": 1294529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/86f3c49bcdab97efcc8893a9eec26973?s=128&d=identicon&r=PG", "display_name": "JLTChiu", "link": "https://stackoverflow.com/users/1294529/jltchiu"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1475093793, "post_id": 39756807, "comment_id": 66809602, "body": "I was expecting to make it async so when it&#39;s waiting for the super slow api the cpu power can be used to handle other incoming requests that can potentially be going to the other path. (Since I assume this application will receive lots of other different incoming requests)"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1475094257, "post_id": 39756807, "comment_id": 66809870, "body": "That doesn&#39;t mean what you think it means. And Gunicorn <i>should</i> be handling this for you, you could test to make sure just by adding a <code>time.sleep(30)</code> in there, I think. It&#39;s called the reactor pattern, but Gunicorn allows the client to connect, and then passes off the request to a worker. When the worker finishes, it returns the data from the worker and then puts it back in the pool. I&#39;m not sure if it spins up a new worker if all the existing ones are busy, though."}, {"owner": {"reputation": 853, "user_id": 1294529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/86f3c49bcdab97efcc8893a9eec26973?s=128&d=identicon&r=PG", "display_name": "JLTChiu", "link": "https://stackoverflow.com/users/1294529/jltchiu"}, "edited": false, "score": 0, "creation_date": 1475094470, "post_id": 39756807, "comment_id": 66810020, "body": "I am still learning this, but I expect running Gunicorn should be something like <code>gunicorn server:app -k gevent -w 4</code> but I am really not sure."}, {"owner": {"reputation": 853, "user_id": 1294529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/86f3c49bcdab97efcc8893a9eec26973?s=128&d=identicon&r=PG", "display_name": "JLTChiu", "link": "https://stackoverflow.com/users/1294529/jltchiu"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1475094586, "post_id": 39756807, "comment_id": 66810088, "body": "@WayneWerner, do you mean that with the current code I posted above, when a specific request is waiting for the slow api to response, it will just use the cpu power to process other incoming requests to the application server?"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1475094896, "post_id": 39756807, "comment_id": 66810278, "body": "Well the CPU for sure - that&#39;s your OS that&#39;s going to handle that when the underlying socket does a <code>.read</code> the OS is going to say, &quot;Oh sweet, this process is blocked, lemme do something else&quot;."}, {"owner": {"reputation": 853, "user_id": 1294529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/86f3c49bcdab97efcc8893a9eec26973?s=128&d=identicon&r=PG", "display_name": "JLTChiu", "link": "https://stackoverflow.com/users/1294529/jltchiu"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1475095733, "post_id": 39756807, "comment_id": 66810760, "body": "@WayneWerner All I want is to achieve as much rps as possible, I had experience that slow blocking IO will significantly reduce the rps my application server can process, and I want to avoid that (maybe with gevent?)"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "reply_to_user": {"reputation": 853, "user_id": 1294529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/86f3c49bcdab97efcc8893a9eec26973?s=128&d=identicon&r=PG", "display_name": "JLTChiu", "link": "https://stackoverflow.com/users/1294529/jltchiu"}, "edited": false, "score": 0, "creation_date": 1475096403, "post_id": 39756807, "comment_id": 66811097, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/124470/discussion-between-wayne-werner-and-jltchiu\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 433, "user_id": 1984065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533af3c4b1adeaeea0946afb4bf431c3?s=128&d=identicon&r=PG", "display_name": "jerry", "link": "https://stackoverflow.com/users/1984065/jerry"}, "is_accepted": false, "score": 1, "last_activity_date": 1476028436, "last_edit_date": 1476028436, "creation_date": 1475781004, "answer_id": 39903915, "question_id": 39756807, "link": "https://stackoverflow.com/questions/39756807/make-a-non-blocking-request-with-requests-when-running-flask-with-gunicorn-and-g/39903915#39903915", "title": "Make a non-blocking request with requests when running Flask with Gunicorn and Gevent", "body": "<p>You can use <code>grequests</code>. It allows other greenlets to run while the request is made. It is compatible with the <code>requests</code> library and returns a <code>requests.Response</code> object. The usage is as follows:</p>\n\n<pre><code>import grequests\n\n@app.route('/do', methods = ['POST'])\ndef do():\n    result = grequests.map([grequests.get('slow api')])\n    return result[0].content\n</code></pre>\n\n<p>Edit: I've added a test and saw that the time didn't improve with grequests since gunicorn's gevent worker already performs monkey-patching when it is initialized: <a href=\"https://github.com/benoitc/gunicorn/blob/master/gunicorn/workers/ggevent.py#L65\" rel=\"nofollow\">https://github.com/benoitc/gunicorn/blob/master/gunicorn/workers/ggevent.py#L65</a></p>\n"}, {"tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": false, "score": 6, "last_activity_date": 1475823410, "creation_date": 1475823410, "answer_id": 39911201, "question_id": 39756807, "link": "https://stackoverflow.com/questions/39756807/make-a-non-blocking-request-with-requests-when-running-flask-with-gunicorn-and-g/39911201#39911201", "title": "Make a non-blocking request with requests when running Flask with Gunicorn and Gevent", "body": "<p>First a bit of background, A blocking socket is the default kind of socket, once you start reading your app or thread does not regain control until data is actually read, or you are disconnected. This is how <code>python-requests</code>, operates by default. There is a spin off called <code>grequests</code> which provides non blocking reads.</p>\n\n<blockquote>\n  <p>The major mechanical difference is that send, recv, connect and accept\n  can return without having done anything. You have (of course) a number\n  of choices. You can check return code and error codes and generally\n  drive yourself crazy. If you don\u2019t believe me, try it sometime</p>\n</blockquote>\n\n<p>Source: <a href=\"https://docs.python.org/2/howto/sockets.html\" rel=\"noreferrer\">https://docs.python.org/2/howto/sockets.html</a></p>\n\n<p>It also goes on to say:</p>\n\n<blockquote>\n  <p>There\u2019s no question that the fastest sockets code uses non-blocking\n  sockets and select to multiplex them. You can put together something\n  that will saturate a LAN connection without putting any strain on the\n  CPU. The trouble is that an app written this way can\u2019t do much of\n  anything else - it needs to be ready to shuffle bytes around at all\n  times.</p>\n  \n  <p>Assuming that your app is actually supposed to do something more than\n  that, threading is the optimal solution</p>\n</blockquote>\n\n<p>But do you want to add a whole lot of complexity to your view by having it spawn it's own threads. Particularly when gunicorn as <a href=\"http://docs.gunicorn.org/en/stable/design.html#async-workers\" rel=\"noreferrer\">async workers</a>?</p>\n\n<blockquote>\n  <p>The asynchronous workers available are based on Greenlets (via\n  Eventlet and Gevent). Greenlets are an implementation of cooperative\n  multi-threading for Python. In general, an application should be able\n  to make use of these worker classes with no changes.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Some examples of behavior requiring asynchronous workers: Applications\n  making long blocking calls (Ie, external web services)</p>\n</blockquote>\n\n<p>So to cut a long story short, don't change anything! Just let it be. If you are making any changes at all, let it be to introduce caching. Consider using <a href=\"https://cachecontrol.readthedocs.io/en/latest/\" rel=\"noreferrer\">Cache-control</a> an extension recommended by python-requests developers.</p>\n"}, {"comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 4, "creation_date": 1476095783, "post_id": 39941098, "comment_id": 67192225, "body": "In this case the OP is talking about making another blocking network call from inside his view. Which is different from the scenario in your answer."}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 1, "creation_date": 1476102076, "post_id": 39941098, "comment_id": 67195733, "body": "OP asked &quot;How can I modify the example below so that the view is non-blocking?&quot; The view is already nonblocking. Of course the <code>requests.get</code> blocks, but this action happens in a manner such that another client can still access the same view, which I believe was OP&#39;s main concern. You could make the api call nonblocking, too, but that doesn&#39;t help because you won&#39;t be able to return anything to the client until it completes, anyhow."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1476102151, "post_id": 39941098, "comment_id": 67195776, "body": "Really? perhaps I misunderstood the question. My understanding was that he wanted requests to be non blocking"}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1476102288, "post_id": 39941098, "comment_id": 67195863, "body": "I think because OP thought that the server must finish serving one request before it can serve another client. There&#39;s some clarifications that were made in the question comments."}, {"owner": {"reputation": 5383, "user_id": 90263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a794604b9d384c16dd5f4b703112dc85?s=128&d=identicon&r=PG", "display_name": "fmalina", "link": "https://stackoverflow.com/users/90263/fmalina"}, "edited": false, "score": 0, "creation_date": 1559766460, "post_id": 39941098, "comment_id": 99526549, "body": "When working with slow API synchronously it may be good idea to increase the gunicorn default timeout e.g.: <code>gunicorn ... --timeout 60</code>. Default value is just 30 seconds. <a href=\"https://stackoverflow.com/questions/6816215/gunicorn-nginx-timeout-problem\" title=\"gunicorn nginx timeout problem\">stackoverflow.com/questions/6816215/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "is_accepted": true, "score": 14, "last_activity_date": 1475998059, "creation_date": 1475998059, "answer_id": 39941098, "question_id": 39756807, "link": "https://stackoverflow.com/questions/39756807/make-a-non-blocking-request-with-requests-when-running-flask-with-gunicorn-and-g/39941098#39941098", "title": "Make a non-blocking request with requests when running Flask with Gunicorn and Gevent", "body": "<p>If you're deploying your Flask application with gunicorn, it is already non-blocking. If a client is waiting on a response from one of your views, another client can make a request to the same view without a problem. There will be multiple workers to process multiple requests concurrently. No need to change your code for this to work. This also goes for pretty much every Flask deployment option.</p>\n"}], "owner": {"reputation": 853, "user_id": 1294529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/86f3c49bcdab97efcc8893a9eec26973?s=128&d=identicon&r=PG", "display_name": "JLTChiu", "link": "https://stackoverflow.com/users/1294529/jltchiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16880, "favorite_count": 1, "accepted_answer_id": 39941098, "answer_count": 3, "score": 23, "last_activity_date": 1476028436, "creation_date": 1475093482, "last_edit_date": 1475094977, "question_id": 39756807, "link": "https://stackoverflow.com/questions/39756807/make-a-non-blocking-request-with-requests-when-running-flask-with-gunicorn-and-g", "title": "Make a non-blocking request with requests when running Flask with Gunicorn and Gevent", "body": "<p>My Flask application will receive a request, do some processing, and then make a request to a slow external endpoint that takes 5 seconds to respond.  It looks like running Gunicorn with Gevent will allow it to handle many of these slow requests at the same time.  How can I modify the example below so that the view is non-blocking?</p>\n\n<pre><code>import requests\n\n@app.route('/do', methods = ['POST'])\ndef do():\n    result = requests.get('slow api')\n    return result.content\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>gunicorn server:app -k gevent -w 4\n</code></pre>\n"}, {"tags": ["python", "oauth", "cron", "oauth2"], "owner": {"reputation": 53, "user_id": 6341020, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47e433dcf5921fd1b3f6b07b6056f3ba?s=128&d=identicon&r=PG&f=1", "display_name": "derks", "link": "https://stackoverflow.com/users/6341020/derks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475093127, "creation_date": 1475093127, "last_edit_date": 1495541969, "question_id": 39756713, "link": "https://stackoverflow.com/questions/39756713/oauth2-error-appearing-in-cron-job-that-isnt-appearing-elsewhere", "title": "Oauth2 error appearing in cron job that isn&#39;t appearing elsewhere", "body": "<p>I have a piece of python code on my machine that does a few things, one of which includes interacting with the Yelp API, which uses oauth2.</p>\n\n<p>I've scheduled this piece of code to run via a cron job everyday at 2PM. When the job executes, I get the following error: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/.../.../.../project.py\", line 18, in &lt;module&gt;\n    from yelp.oauth1_authenticator import Oauth1Authenticator\n  File \"/Users/.../.../.../yelp/oauth1_authenticator.py\", line 2, in &lt;module&gt;\n    import oauth2\nImportError: No module named oauth2\n</code></pre>\n\n<p>This call to import oauth2 is part of the oauth1_authenticator.py file in the Yelp API, which exists here:</p>\n\n<pre><code>import oauth2\n\n\nclass Oauth1Authenticator(object):\n\n\n\ndef __init__(\n    self,\n    consumer_key,\n    consumer_secret,\n    token,\n    token_secret\n):\n    self.consumer = oauth2.Consumer(consumer_key, consumer_secret)\n    self.token = oauth2.Token(token, token_secret)\n\ndef sign_request(self, url, url_params={}):\n    oauth_request = oauth2.Request(\n        method=\"GET\",\n        url=url,\n        parameters=url_params\n    )\n    oauth_request.update(\n        {\n            'oauth_nonce': oauth2.generate_nonce(),\n            'oauth_timestamp': oauth2.generate_timestamp(),\n            'oauth_token': self.token.key,\n            'oauth_consumer_key': self.consumer.key\n        }\n    )\n    oauth_request.sign_request(\n        oauth2.SignatureMethod_HMAC_SHA1(),\n        self.consumer,\n        self.token\n    )\n    return oauth_request.to_url()\n</code></pre>\n\n<p>The error occurs and nothing else in the program is executed.</p>\n\n<p>However, when I open up the program in my editor and simply run it, everything works fine. No errors returned. For awhile, I thought this was in part to how oauth2 was installed on my machine -- similar to <a href=\"https://stackoverflow.com/questions/7781233/python-why-is-installing-oauth2-so-hard\">this</a> -- but now I'm not so sure.</p>\n"}, {"tags": ["python", "tkinter", "tk", "toplevel"], "comments": [{"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1475094086, "post_id": 39756617, "comment_id": 66809765, "body": "Not sure what you are asking. The main window (if you mean the root window) is also a <code>Toplevel</code> object."}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1475095178, "last_edit_date": 1475095178, "creation_date": 1475094258, "answer_id": 39757007, "question_id": 39756617, "link": "https://stackoverflow.com/questions/39756617/how-should-i-make-a-class-that-can-be-used-as-my-main-app-window-but-also-can-b/39757007#39757007", "title": "How should I make a class that can be used as my main app window, but also can be used as a secondary window", "body": "<p>Create a subclass of a Frame, and then put it either in the root window or a toplevel. In either case, you still call <code>mainloop</code> only once on the root window.</p>\n\n<p>The only care you have to take is that you have to be careful about letting the user close the root window, because it will cause all of the other windows to be destroyed. </p>\n\n<p>If you're creating a program that can have multiple windows, you might want to consider hiding the root window and always putting your window in a <code>Toplevel</code>. Of course, when you do that you need to make sure you destroy the root window whenever the last toplevel window is destroyed, or your program will continue to run but the user will have no way to access it.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 6749902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd858dfb406f853a99e4b6f5060249e?s=128&d=identicon&r=PG&f=1", "display_name": "DamnFreckles", "link": "https://stackoverflow.com/users/6749902/damnfreckles"}, "is_accepted": false, "score": 1, "last_activity_date": 1475113367, "last_edit_date": 1495541960, "creation_date": 1475113367, "answer_id": 39760079, "question_id": 39756617, "link": "https://stackoverflow.com/questions/39756617/how-should-i-make-a-class-that-can-be-used-as-my-main-app-window-but-also-can-b/39760079#39760079", "title": "How should I make a class that can be used as my main app window, but also can be used as a secondary window", "body": "<p>Do you mean having a home screen that you can flip back to? If so, you can try looking here: <a href=\"https://stackoverflow.com/questions/14817210/using-buttons-in-tkinter-to-navigate-to-different-pages-of-the-application\">Using buttons in Tkinter to navigate to different pages of the application?</a></p>\n"}], "owner": {"reputation": 2132, "user_id": 830431, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qBd4q.jpg?s=128&g=1", "display_name": "Grezzo", "link": "https://stackoverflow.com/users/830431/grezzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 39757007, "answer_count": 2, "score": -1, "last_activity_date": 1475113367, "creation_date": 1475092739, "question_id": 39756617, "link": "https://stackoverflow.com/questions/39756617/how-should-i-make-a-class-that-can-be-used-as-my-main-app-window-but-also-can-b", "title": "How should I make a class that can be used as my main app window, but also can be used as a secondary window", "body": "<p>I know that I can subclass a tk.Frame (or ttk.Frame) and add that to a TopLevel to make secondary windows, but I'm not sure how I should use that as the main window. I know that creating an instance of a Frame class and calling .mainloop() on it seems to work for using it as the main window, but I feel like that's bad practice...</p>\n\n<p>What do other people do when they are making GUI layouts that they want to have available to main windows and secondary windows?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "edited": false, "score": 0, "creation_date": 1475092894, "post_id": 39756599, "comment_id": 66809126, "body": "<code>cijferlijst = filter(lambda x: x.strip(), cijferlijst)</code>"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1475092908, "post_id": 39756599, "comment_id": 66809139, "body": "Why you just don&#39;t split the text with <code>-</code>?"}, {"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 2, "creation_date": 1475092909, "post_id": 39756599, "comment_id": 66809140, "body": "Why not this <code>cijferlijst = invoer.split(&quot;-&quot;)</code>? Am I misunderstanding what you are trying to do?"}, {"owner": {"reputation": 314, "user_id": 6810982, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/1178334388891506/picture?type=large", "display_name": "Sam Vruggink", "link": "https://stackoverflow.com/users/6810982/sam-vruggink"}, "reply_to_user": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 1, "creation_date": 1475093968, "post_id": 39756599, "comment_id": 66809696, "body": "@MattCremeens You actually did it. Thanks so much!"}, {"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1475094008, "post_id": 39756599, "comment_id": 66809718, "body": "Glad I could help."}], "answers": [{"comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1475092966, "post_id": 39756657, "comment_id": 66809172, "body": "Why not <code>replace</code>?"}], "tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": false, "score": 4, "last_activity_date": 1475093074, "last_edit_date": 1475093074, "creation_date": 1475092900, "answer_id": 39756657, "question_id": 39756599, "link": "https://stackoverflow.com/questions/39756599/how-to-remove-whitespace-in-a-list/39756657#39756657", "title": "How to remove whitespace in a list", "body": "<p>Try that:</p>\n\n<pre><code>&gt;&gt;&gt; ''.join(invoer.split('-'))\n'597178324879'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6889983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9255075c1df14629a76beef1d7b635?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dickey", "link": "https://stackoverflow.com/users/6889983/a-dickey"}, "is_accepted": false, "score": 1, "last_activity_date": 1475092951, "last_edit_date": 1495542795, "creation_date": 1475092914, "answer_id": 39756659, "question_id": 39756599, "link": "https://stackoverflow.com/questions/39756599/how-to-remove-whitespace-in-a-list/39756659#39756659", "title": "How to remove whitespace in a list", "body": "<p>This looks a lot like the following question:\n<a href=\"https://stackoverflow.com/questions/3232953/python-removing-spaces-from-list-objects\">Python: Removing spaces from list objects</a></p>\n\n<p>The answer being to use <code>strip</code> instead of <code>replace</code>. Have you tried </p>\n\n<pre><code>abc = x.strip(' ') for x in x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 3, "last_activity_date": 1475092929, "creation_date": 1475092929, "answer_id": 39756666, "question_id": 39756599, "link": "https://stackoverflow.com/questions/39756599/how-to-remove-whitespace-in-a-list/39756666#39756666", "title": "How to remove whitespace in a list", "body": "<p>If you want the numbers in string without <code>-</code>, use <a href=\"https://docs.python.org/2/library/string.html#string.replace\" rel=\"nofollow\"><code>.replace()</code></a> as:</p>\n\n<pre><code>&gt;&gt;&gt; string_list = \"5-9-7-1-7-8-3-2-4-8-7-9\"\n&gt;&gt;&gt; string_list.replace('-', '')\n'597178324879'\n</code></pre>\n\n<p>If you want the numbers as <code>list</code> of numbers, use <a href=\"https://docs.python.org/2/library/stdtypes.html#str.split\" rel=\"nofollow\"><code>.split()</code></a>: </p>\n\n<pre><code>&gt;&gt;&gt; string_list.split('-')\n['5', '9', '7', '1', '7', '8', '3', '2', '4', '8', '7', '9']\n</code></pre>\n"}], "owner": {"reputation": 314, "user_id": 6810982, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/1178334388891506/picture?type=large", "display_name": "Sam Vruggink", "link": "https://stackoverflow.com/users/6810982/sam-vruggink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5558, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1475093074, "creation_date": 1475092674, "last_edit_date": 1475092802, "question_id": 39756599, "link": "https://stackoverflow.com/questions/39756599/how-to-remove-whitespace-in-a-list", "title": "How to remove whitespace in a list", "body": "<p>I can't remove my whitespace in my list. </p>\n\n<pre><code>invoer = \"5-9-7-1-7-8-3-2-4-8-7-9\"\ncijferlijst = []\n\nfor cijfer in invoer:\n    cijferlijst.append(cijfer.strip('-'))\n</code></pre>\n\n<p>I tried the following but it doesn't work. I already made a list from my string and seperated everything but the <code>\"-\"</code> is now a <code>\"\"</code>.  </p>\n\n<pre><code>filter(lambda x: x.strip(), cijferlijst)\nfilter(str.strip, cijferlijst)\nfilter(None, cijferlijst)\nabc = [x.replace(' ', '') for x in cijferlijst]\n</code></pre>\n"}, {"tags": ["python", "django", "websocket", "django-channels"], "comments": [{"owner": {"reputation": 9014, "user_id": 3762142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TgKI9.png?s=128&g=1", "display_name": "Raja Simon", "link": "https://stackoverflow.com/users/3762142/raja-simon"}, "edited": false, "score": 2, "creation_date": 1475644647, "post_id": 39756595, "comment_id": 67019470, "body": "<code>channel_layer.group_channels(&#39;&lt;your group name&gt;&#39;)</code> this will return the list  of client connected to that group. I think it will throw error when no group present."}], "owner": {"reputation": 738, "user_id": 4075528, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4ff5e9171da29f1b467bf990f09fe294?s=128&d=identicon&r=PG&f=1", "display_name": "kt14", "link": "https://stackoverflow.com/users/4075528/kt14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1475092671, "creation_date": 1475092671, "question_id": 39756595, "link": "https://stackoverflow.com/questions/39756595/how-to-check-if-message-failed-in-django-channels", "title": "How to check if message failed in django-channels", "body": "<p>I am using <a href=\"https://channels.readthedocs.io/\" rel=\"nofollow\">channels</a> in my project which made django to use websockets very easy to setup and use. </p>\n\n<p>In my application every user that logs in opens a Group to which we can send information if there is any activity.</p>\n\n<pre><code>def ws_connect(message):\n    Group(\"%s\" % message.user.id).add(message.reply_channel)\n</code></pre>\n\n<p>so whenever I want to send a message to that user, I use</p>\n\n<pre><code>Group('%s' % user.id).send(\n    {\n        'text': json.dumps({\n            'message': 'Some message'\n        })\n    }\n\n)\n</code></pre>\n\n<p>But this fails silently if there is any error.\nSo question is there way to check if it failed or if there is any way we can check if the Group exists (live or listening ), even before I send data in order to handle it better.</p>\n"}, {"tags": ["python", "django", "unit-testing"], "comments": [{"owner": {"reputation": 8157, "user_id": 500202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0f8622f992b847d49c77cdbec81c95?s=128&d=identicon&r=PG", "display_name": "Izkata", "link": "https://stackoverflow.com/users/500202/izkata"}, "edited": false, "score": 1, "creation_date": 1475093917, "post_id": 39756579, "comment_id": 66809665, "body": "As I don&#39;t have that version of Django to double-check with, I&#39;m not posting it as an answer - but your command looks totally wrong.  I&#39;m not surprised it failed.  Try <code>bots.tests.test_node_tree_walker.NodeTreeWalkerTests.test_re&zwnj;&#8203;gex_questions</code>"}, {"owner": {"reputation": 8157, "user_id": 500202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0f8622f992b847d49c77cdbec81c95?s=128&d=identicon&r=PG", "display_name": "Izkata", "link": "https://stackoverflow.com/users/500202/izkata"}, "edited": false, "score": 0, "creation_date": 1475093959, "post_id": 39756579, "comment_id": 66809691, "body": "I <i>think</i> what you tried works for the default test runner of an old version of Django, something like 1.3 (but even then, I think only with a <code>tests.py</code> and not a <code>tests&#47;</code> directory)"}, {"owner": {"reputation": 5936, "user_id": 4057053, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/82115e7f12137a90204826145eb42992?s=128&d=identicon&r=PG&f=1", "display_name": "kurtgn", "link": "https://stackoverflow.com/users/4057053/kurtgn"}, "reply_to_user": {"reputation": 8157, "user_id": 500202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0f8622f992b847d49c77cdbec81c95?s=128&d=identicon&r=PG", "display_name": "Izkata", "link": "https://stackoverflow.com/users/500202/izkata"}, "edited": false, "score": 0, "creation_date": 1475217762, "post_id": 39756579, "comment_id": 66864166, "body": "@Izkata awesome thanks, this worked! The path I had tried before was from Pycharm - don&#39;t know why it got that wrong."}], "owner": {"reputation": 5936, "user_id": 4057053, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/82115e7f12137a90204826145eb42992?s=128&d=identicon&r=PG&f=1", "display_name": "kurtgn", "link": "https://stackoverflow.com/users/4057053/kurtgn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475217695, "creation_date": 1475092613, "last_edit_date": 1475217695, "question_id": 39756579, "link": "https://stackoverflow.com/questions/39756579/django-1-9-tests-able-to-test-the-whole-project-but-fails-to-run-individual-tes", "title": "django 1.9 tests: Able to test the whole project but fails to run individual tests", "body": "<p>I have a <code>django 1.9</code> app with tests that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QE0Dy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QE0Dy.png\" alt=\"enter image description here\"></a></p>\n\n<p>these <code>test_***</code> files contain <code>django.test.TestCase</code> classes, as usual.</p>\n\n<p>When I test the whole project with </p>\n\n<pre><code>python manage.py test --keepdb\n</code></pre>\n\n<p>everything works perfectly, all tests are found and ran.</p>\n\n<pre><code>Using existing test database for alias 'default'...\n....................................................\n----------------------------------------------------------------------\nRan 38 tests in 12.214s\n\nOK\n</code></pre>\n\n<p>However, when I try to run an individual test, like so</p>\n\n<pre><code>python manage.py test bots.NodeTreeWalkerTests.test_regex_questions --keepdb\n</code></pre>\n\n<p>it fails:</p>\n\n<pre><code>Using existing test database for alias 'default'...\nE\n======================================================================\nERROR: NodeTreeWalkerTests (unittest.loader._FailedTest)\n----------------------------------------------------------------------\nImportError: Failed to import test module: NodeTreeWalkerTests\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/unittest/loader.py\", line 153, in loadTestsFromName\n    module = __import__(module_name)\nImportError: No module named 'bots.NodeTreeWalkerTests'\n</code></pre>\n\n<p>It worked before, but I renamed my project, and now it doesn't work. </p>\n\n<p>It looks like I've messed up some environment variables, but I changed all old name instances to the new name, and the project itself works perfectly, but this one particular issue remains.</p>\n\n<p>I tried importing test cases to the <code>tests.__init__</code> file</p>\n\n<pre><code>from bots.tests.test_node_tree_walker import NodeTreeWalkerTests\n</code></pre>\n\n<p>but it didn't help.</p>\n\n<p>What am I missing?</p>\n\n<p><strong>UPDATE</strong>:\nThanks to Izkata's comment I got the test to work with a more detailed path </p>\n\n<pre><code>python manage.py test bots.tests.test_node_tree_walker.NodeTreeWalkerTests.test_regex_questions\n</code></pre>\n\n<p>But why does Pycharm keep suggesting me the wrong path?</p>\n\n<p><a href=\"https://i.stack.imgur.com/4VI7D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4VI7D.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "ruby", "rubygems", "ubuntu-14.04", "jekyll"], "comments": [{"owner": {"reputation": 726, "user_id": 5450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7D0G.jpg?s=128&g=1", "display_name": "Hamim Al Mahdi Russell", "link": "https://stackoverflow.com/users/5450651/hamim-al-mahdi-russell"}, "edited": false, "score": 0, "creation_date": 1475092779, "post_id": 39756515, "comment_id": 66809062, "body": "Try <code>sudo apt-get remove ruby</code>     <code>sudo apt-get install ruby1.9.1-dev</code>     <code>gem install jekyll</code>"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 1, "creation_date": 1475094384, "post_id": 39756515, "comment_id": 66809964, "body": "Use <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv</a>"}, {"owner": {"reputation": 77, "user_id": 6692920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d3aedcd191550fd12fb57def6e5028d3?s=128&d=identicon&r=PG&f=1", "display_name": "John77", "link": "https://stackoverflow.com/users/6692920/john77"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1475385057, "post_id": 39756515, "comment_id": 66918861, "body": "@DavidJacquel thanks. plz give a few steps on what to do wrt the problem. i will accept the answer. thanks."}, {"owner": {"reputation": 724, "user_id": 2632107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6114b3072f3fd075698d514a5d1c05?s=128&d=identicon&r=PG", "display_name": "S0AndS0", "link": "https://stackoverflow.com/users/2632107/s0ands0"}, "edited": false, "score": 0, "creation_date": 1557973060, "post_id": 39756515, "comment_id": 98948027, "body": "Might be worth the time to check a related <a href=\"https://stackoverflow.com/a/56157908/2632107\">answer</a> that&#39;ll show some methods of setting-up a user account for non-<code>sudo</code> installed Gems... aside from account setup <code>sudo</code> isn&#39;t required when using <i><code>gem install someThing</code></i> via one of the <i>proper</i> ways."}], "owner": {"reputation": 77, "user_id": 6692920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d3aedcd191550fd12fb57def6e5028d3?s=128&d=identicon&r=PG&f=1", "display_name": "John77", "link": "https://stackoverflow.com/users/6692920/john77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475097876, "creation_date": 1475092413, "last_edit_date": 1475092763, "question_id": 39756515, "link": "https://stackoverflow.com/questions/39756515/cant-install-jekyll", "title": "Can&#39;t Install Jekyll", "body": "<p>I get the error (Ubuntu 14.04):</p>\n\n<pre><code>sudo gem install \n\njekyllBuilding native extensions.  This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\n    /usr/bin/ruby2.1 extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.1.0/gems/ffi-1.9.14 for inspection.\nResults logged to /var/lib/gems/2.1.0/extensions/x86_64-linux/2.1.0/ffi-1.9.14/gem_make.out\n</code></pre>\n\n<p>Common solutions like installing ruby-dev are not working.</p>\n\n<p>Please help.Thanks.</p>\n"}, {"tags": ["python", "generics", "python-3.5"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 4, "creation_date": 1475092261, "post_id": 39756447, "comment_id": 66808763, "body": "What makes you think that code won&#39;t work for other numbers?"}, {"owner": {"reputation": 674, "user_id": 4154212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-cTLMKvR2tGQ/AAAAAAAAAAI/AAAAAAAAABw/hYmgXlvtj2o/photo.jpg?sz=128", "display_name": "Ciprum", "link": "https://stackoverflow.com/users/4154212/ciprum"}, "edited": false, "score": 1, "creation_date": 1475092323, "post_id": 39756447, "comment_id": 66808799, "body": "What&#39;s wrong with using **? It works with all numbers."}, {"owner": {"reputation": 338, "user_id": 6147002, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/88a79fd77ec742077fe231a8ae661639?s=128&d=identicon&r=PG&f=1", "display_name": "sawreals", "link": "https://stackoverflow.com/users/6147002/sawreals"}, "edited": false, "score": 0, "creation_date": 1475092491, "post_id": 39756447, "comment_id": 66808894, "body": "Why do you have that print statement at the end of your code?"}, {"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 1, "creation_date": 1475092518, "post_id": 39756447, "comment_id": 66808907, "body": "I feel it should the code length should be shorter than that and probably there is a built-in function to doing it? Generally I feel a more pythonic way is available by experienced python programmers?"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 338, "user_id": 6147002, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/88a79fd77ec742077fe231a8ae661639?s=128&d=identicon&r=PG&f=1", "display_name": "sawreals", "link": "https://stackoverflow.com/users/6147002/sawreals"}, "edited": false, "score": 0, "creation_date": 1475092554, "post_id": 39756447, "comment_id": 66808930, "body": "@sawreals2 As I read the question, he is asking for a more elegant &quot;pythonic&quot; solution even though this code does work."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1475092620, "post_id": 39756447, "comment_id": 66808970, "body": "<code>eval</code> comes to mind but, isn&#39;t there better than <code>eval(&quot;2**2**2**2**0&quot;)</code> to do this? I mean we know <code>eval</code> is evil right?"}, {"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1475092620, "post_id": 39756447, "comment_id": 66808971, "body": "that is true @ sabbahillel"}, {"owner": {"reputation": 1036, "user_id": 3666763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/127dd9afe7dd34531fde487a859171ac?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin L", "link": "https://stackoverflow.com/users/3666763/kevin-l"}, "edited": false, "score": 1, "creation_date": 1475092636, "post_id": 39756447, "comment_id": 66808986, "body": "which makes it off topic for SO. go post on codereview.SE"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1475093160, "post_id": 39756447, "comment_id": 66809286, "body": "<a href=\"http://stackoverflow.com/questions/1832940/is-using-eval-in-python-a-bad-practice\" title=\"is using eval in python a bad practice\">stackoverflow.com/questions/1832940/&hellip;</a>"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1475094402, "post_id": 39756447, "comment_id": 66809975, "body": "I think that doing the split and passing the list into the recursive function is a little nicer as I show below."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1475095982, "post_id": 39756447, "comment_id": 66810892, "body": "Added an answer with the use of <code>reduce()</code>. Please note one should always avoid the usage of <code>eval</code> and <code>exec</code> in the code due to security concerns. Mentioning this because most voted answer is based on the usage of <code>eval</code>"}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1475092735, "post_id": 39756586, "comment_id": 66809039, "body": "it runs as script not on the cmd prompt"}, {"owner": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "reply_to_user": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1475092864, "post_id": 39756586, "comment_id": 66809107, "body": "@UmarYusuf Anything you do on the interactive interpreter you can do as a script."}, {"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1475093116, "post_id": 39756586, "comment_id": 66809260, "body": "Ok, let me study it"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1475093802, "post_id": 39756586, "comment_id": 66809607, "body": "eval is evil, but you can assert that the original code has only digits and <code>^</code>. i guess that would make it safe."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1475094468, "post_id": 39756586, "comment_id": 66810017, "body": "I split it into a list and just had the recursive function work on the integers"}], "tags": [], "owner": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "is_accepted": false, "score": 2, "last_activity_date": 1475093434, "last_edit_date": 1495542389, "creation_date": 1475092628, "answer_id": 39756586, "question_id": 39756447, "link": "https://stackoverflow.com/questions/39756447/generic-pythonic-code-to-solve-22220/39756586#39756586", "title": "Generic Pythonic Code to Solve: 2**2**2**2**0", "body": "<p>Python's built-in <code>**</code> operator respects precedence correctly already. You can feed it the full expression and get the answers you are expecting.</p>\n\n<pre><code>&gt;&gt;&gt; 3 ** 2 ** 4 ** 1 ** 0\n43046721\n</code></pre>\n\n<p>So the straightforward (but potentially dangerous) way to write your function is something like this, by just evaluating the expression after replacing the <code>^</code> with <code>**</code>:</p>\n\n<pre><code>def solve_expo(expression):\n    return eval(expression.replace('^', '**'))\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/q/1832940/2069350\">Obviously, <code>eval</code> might not be suitable for your situation</a> (or you might just want to do something a little more interesting), so you could rewrite your solution as a recursive one. It's a little more elegant, at any rate.</p>\n\n<pre><code>def solve_expo(expression):\n    base, exp = expression.split('^', 1)  # Split off just the first ^\n    if '^' in exp:\n        return int(base) ** solve_expo(exp)  # More exponents later, so resolve them and raise our base to that power\n    return int(base) ** int(exp)  # base and exp are plain numbers, so just return base^exp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094214, "creation_date": 1475094214, "answer_id": 39756993, "question_id": 39756447, "link": "https://stackoverflow.com/questions/39756447/generic-pythonic-code-to-solve-22220/39756993#39756993", "title": "Generic Pythonic Code to Solve: 2**2**2**2**0", "body": "<p>Since you want to handle it as a recursion, this code seems to handle it nicely. The split creates a single list of string values which are then handled completely within the recursive function.</p>\n\n<pre><code>val = '2^3^4^5^6^7'\nvals = val.split('^')\n\ndef solve_expo(expo):\n    if len(expo) == 1:\n        return int(expo)\n    else:\n        return solve_expo(expo[:-1]) ** int(expo[-1])\n\nsolv_expo(vals)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "edited": false, "score": 0, "creation_date": 1475138949, "post_id": 39757336, "comment_id": 66825914, "body": "Thanks, this is a more professional code"}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": true, "score": 1, "last_activity_date": 1475095867, "last_edit_date": 1495535266, "creation_date": 1475095533, "answer_id": 39757336, "question_id": 39756447, "link": "https://stackoverflow.com/questions/39756447/generic-pythonic-code-to-solve-22220/39757336#39757336", "title": "Generic Pythonic Code to Solve: 2**2**2**2**0", "body": "<p>Alternative approach to achieve this by using <a href=\"https://docs.python.org/2/library/functions.html#reduce\" rel=\"nofollow noreferrer\"><code>reduce()</code></a> function as:</p>\n\n<pre><code>&gt;&gt;&gt; operation_str = '3^2^4^1^0'\n&gt;&gt;&gt; reduce(lambda x, y: int(y)**int(x), operation_str.split('^')[::-1])\n43046721\n</code></pre>\n\n<p>Explanation based on step by step operation:</p>\n\n<pre><code>&gt;&gt;&gt; operation_str.split('^')\n['3', '2', '4', '1', '0'] # Converted str into list\n&gt;&gt;&gt; operation_str.split('^')[::-1]\n['0', '1', '4', '2', '3'] # Reversed list\n&gt;&gt;&gt; reduce(lambda x, y: int(y)**int(x), operation_str.split('^')[::-1])\n43046721  # Check reduce() fucntion linked above to know how it works\n</code></pre>\n\n<p>Also read: <a href=\"https://stackoverflow.com/questions/1933451/why-should-exec-and-eval-be-avoided\">Why should exec() and eval() be avoided?</a></p>\n"}], "owner": {"reputation": 689, "user_id": 3692272, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/13ec477c85592d36cbd6fa5175090267?s=128&d=identicon&r=PG", "display_name": "Umar Yusuf", "link": "https://stackoverflow.com/users/3692272/umar-yusuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1475095594, "accepted_answer_id": 39757336, "answer_count": 3, "score": -7, "last_activity_date": 1475095867, "creation_date": 1475092120, "last_edit_date": 1475092223, "question_id": 39756447, "link": "https://stackoverflow.com/questions/39756447/generic-pythonic-code-to-solve-22220", "closed_reason": "Not suitable for this site", "title": "Generic Pythonic Code to Solve: 2**2**2**2**0", "body": "<p><a href=\"https://i.stack.imgur.com/JR8o0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JR8o0.png\" alt=\"enter image description here\"></a></p>\n\n<p>I got the python code below that solves the expression above. I believe there should be a more generic Pythonic approach. By generic I mean it should solve any combinations of numbers (not just: 2 ** 2 ** 2 ** 2 ** 0) e.g: 3 ** 2 ** 4 ** 1 ** 0, 3 ** 3 ** 1 ** 2 ** 0 etc</p>\n\n<pre><code>def get_expo(expo, index, cur_expo):\n    return int(expo[index-1]) ** cur_expo\n\n\ndef solve_expo(expo):\n    expo = expo.split(\"^\")\n    index = len(expo) - 1\n    cur_expo = int(expo[-1])\n    result = 0\n    for i in range(len(expo)):\n        if index == 1:\n            result = get_expo(expo, index, cur_expo)\n            return \"Answer is: \" + str(result)\n        else:\n            cur_expo = get_expo(expo, index, cur_expo)\n            index -= 1\n\n\n\nprint solve_expo(\"2^2^2^2^0\")\n</code></pre>\n\n<p>I need a better pythonic approach to solving it?</p>\n"}, {"tags": ["python", "heroku"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1475092140, "post_id": 39756388, "comment_id": 66808695, "body": "You can&#39;t use <code>raw_input()</code> in a web app."}, {"owner": {"reputation": 47, "user_id": 6805726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b50dec5dde02162c0fc1d12e932a69?s=128&d=identicon&r=PG&f=1", "display_name": "Sean James", "link": "https://stackoverflow.com/users/6805726/sean-james"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1475092306, "post_id": 39756388, "comment_id": 66808793, "body": "what would be the alternative"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1475092438, "post_id": 39756388, "comment_id": 66808861, "body": "What do you want to do? Your code would be helpful."}, {"owner": {"reputation": 47, "user_id": 6805726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b50dec5dde02162c0fc1d12e932a69?s=128&d=identicon&r=PG&f=1", "display_name": "Sean James", "link": "https://stackoverflow.com/users/6805726/sean-james"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1475093173, "post_id": 39756388, "comment_id": 66809296, "body": "This is a chat room bot that you run from the terminal at the moment the bot runs from a local machine I&#39;m trying to get the bot to run automatically on Heruko so far I can manually run the .py file with this command <code>heroku run --app cghelper python bot.by</code> all files are in my github repo. You can see here <a href=\"https://github.com/sean-james/lilbot/tree/master\" rel=\"nofollow noreferrer\">github.com/sean-james/lilbot/tree/master</a>"}], "owner": {"reputation": 47, "user_id": 6805726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b50dec5dde02162c0fc1d12e932a69?s=128&d=identicon&r=PG&f=1", "display_name": "Sean James", "link": "https://stackoverflow.com/users/6805726/sean-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475091897, "creation_date": 1475091897, "question_id": 39756388, "link": "https://stackoverflow.com/questions/39756388/app-crashing-on-heroku-pyphon-application", "title": "App crashing on Heroku Pyphon application", "body": "<p>Hi could any help me with my .Py Application it is a bot for my website chat room and I'm currently having issues with it keep on crashing. </p>\n\n<p>I'm new to python so I'm unsure how to correct this.</p>\n\n<p>Here is the app log </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>2016-09-28T17:33:36.856407+00:00 heroku[web.1]: Starting process with command `python pinybot.py`\r\n2016-09-28T17:33:40.278003+00:00 app[web.1]: --&gt; Now checking module updates...\r\n2016-09-28T17:33:42.778247+00:00 app[web.1]: Setting up: pip\r\n2016-09-28T17:33:43.417702+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): pip in ./.heroku/python/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg\r\n2016-09-28T17:33:44.167819+00:00 app[web.1]: Setting up: requests\r\n2016-09-28T17:33:44.774642+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): requests in ./.heroku/python/lib/python2.7/site-packages\r\n2016-09-28T17:33:45.512264+00:00 app[web.1]: Setting up: pyamf\r\n2016-09-28T17:33:46.095476+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): pyamf in ./.heroku/python/lib/python2.7/site-packages\r\n2016-09-28T17:33:46.102778+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): defusedxml in ./.heroku/python/lib/python2.7/site-packages (from pyamf)\r\n2016-09-28T17:33:46.657006+00:00 app[web.1]: Setting up: colorama\r\n2016-09-28T17:33:47.349365+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): colorama in ./.heroku/python/lib/python2.7/site-packages\r\n2016-09-28T17:33:47.980547+00:00 app[web.1]: Setting up: beautifulsoup4\r\n2016-09-28T17:33:48.631215+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): beautifulsoup4 in ./.heroku/python/lib/python2.7/site-packages\r\n2016-09-28T17:33:49.148829+00:00 app[web.1]: Setting up: wikipedia\r\n2016-09-28T17:33:49.715791+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): wikipedia in ./.heroku/python/lib/python2.7/site-packages\r\n2016-09-28T17:33:49.719299+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): beautifulsoup4 in ./.heroku/python/lib/python2.7/site-packages (from wikipedia)\r\n2016-09-28T17:33:49.720919+00:00 app[web.1]: Requirement already satisfied (use --upgrade to upgrade): requests&lt;3.0.0,&gt;=2.0.0 in ./.heroku/python/lib/python2.7/site-packages (from wikipedia)\r\n2016-09-28T17:33:50.311164+00:00 app[web.1]: --&gt; Module checking complete.\r\n2016-09-28T17:33:52.822285+00:00 app[web.1]: TERM environment variable not set.\r\n2016-09-28T17:33:52.826437+00:00 app[web.1]: --&gt; Now checking bot updates...\r\n2016-09-28T17:33:54.330070+00:00 app[web.1]: --&gt; Fetching from repository: https://github.com/TechWhizZ199/pinybot.git\r\n2016-09-28T17:33:55.449425+00:00 app[web.1]: --&gt; Detecting version data.\r\n2016-09-28T17:33:56.453883+00:00 app[web.1]: --&gt; Your version: 1.41 Repository version: 1.41\r\n2016-09-28T17:33:56.453922+00:00 app[web.1]: You are running the latest version.\r\n2016-09-28T17:33:58.460095+00:00 app[web.1]: TERM environment variable not set.\r\n2016-09-28T17:33:58.461830+00:00 app[web.1]: Enter room name: Traceback (most recent call last):\r\n2016-09-28T17:33:58.461865+00:00 app[web.1]:   File \"pinybot.py\", line 3377, in &lt;module&gt;\r\n2016-09-28T17:33:58.462585+00:00 app[web.1]:     main()\r\n2016-09-28T17:33:58.462617+00:00 app[web.1]:   File \"pinybot.py\", line 3290, in main\r\n2016-09-28T17:33:58.463169+00:00 app[web.1]:     room_name = raw_input('Enter room name: ')\r\n2016-09-28T17:33:58.463231+00:00 app[web.1]: EOFError: EOF when reading a line\r\n2016-09-28T17:33:58.573090+00:00 heroku[web.1]: Process exited with status 1\r\n2016-09-28T17:33:58.594752+00:00 heroku[web.1]: State changed from starting to crashed</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is the error </p>\n\n<p><code>2016-09-28T17:33:58.463231+00:00 app[web.1]: EOFError: EOF when reading a line\n2016-09-28T17:33:58.573090+00:00 heroku[web.1]: Process exited with status 1\n2016-09-28T17:33:58.594752+00:00 heroku[web.1]: State changed from starting to crashed</code></p>\n"}, {"tags": ["python", "utf-8"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1475091947, "post_id": 39756386, "comment_id": 66808579, "body": "examine the http response headers and/or http headers to see what charset it WAS served up in."}, {"owner": {"reputation": 3196, "user_id": 893159, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a6b495308482759d359eb97636fdccb0?s=128&d=identicon&r=PG", "display_name": "allo", "link": "https://stackoverflow.com/users/893159/allo"}, "edited": false, "score": 0, "creation_date": 1475092412, "post_id": 39756386, "comment_id": 66808846, "body": "Depending on what you want to do, it may be a good idea to look at <code>lxml2</code>, which for example can parse meta-tags as well and help you to decode entities like <code>&amp;auml;</code>"}, {"owner": {"reputation": 45, "user_id": 5521465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9efcffeb94f17e0fd5f38d181d2af9?s=128&d=identicon&r=PG&f=1", "display_name": "Iterniam", "link": "https://stackoverflow.com/users/5521465/iterniam"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1475092519, "post_id": 39756386, "comment_id": 66808908, "body": "@MarcB Charset=windows-1252 for all of the sites, however decoding it using windows-1252 doesn&#39;t work. Could you explain what you mean in detail?"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1475092537, "post_id": 39756386, "comment_id": 66808918, "body": "With which number does it work? Does it work with in browser with both numbers? What exactly do you mean by <i>&quot;does not work&quot;</i>?"}, {"owner": {"reputation": 45, "user_id": 5521465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9efcffeb94f17e0fd5f38d181d2af9?s=128&d=identicon&r=PG&f=1", "display_name": "Iterniam", "link": "https://stackoverflow.com/users/5521465/iterniam"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1475092937, "post_id": 39756386, "comment_id": 66809156, "body": "@zvone with it does not work I mean that I cannot decode it. This varies day by day, currently <code>[218, 337]</code> don&#39;t work, but <code>[25, 33, 36, 41, 47, 59, 63, 65, 80, 81, 89, 97, 139, 178, 179, 181, 185, 191, 199, 211, 213, 222, 228, 231, 232, 285, 288, 302, 319, 348, 356, 358, 368, 385, 387, 397, 398, 400, 401, 406, 415, 418, 419]</code> do work"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1475093166, "post_id": 39756386, "comment_id": 66809289, "body": "<i>&quot;Cannot decode&quot;</i> raises an exception for utf-8? Probably, but I am sure it does not raise an exception for windows-1252 (it shouldn&#39;t even if the content is not windows-1252). So what happens then?"}, {"owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "edited": false, "score": 0, "creation_date": 1475097783, "post_id": 39756386, "comment_id": 66811801, "body": "@Iterniam what happens when you decode it with 1252? Is there an error?"}], "owner": {"reputation": 45, "user_id": 5521465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9efcffeb94f17e0fd5f38d181d2af9?s=128&d=identicon&r=PG&f=1", "display_name": "Iterniam", "link": "https://stackoverflow.com/users/5521465/iterniam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475091881, "creation_date": 1475091881, "question_id": 39756386, "link": "https://stackoverflow.com/questions/39756386/how-do-i-decode-a-website-if-it-isnt-utf-8-in-python", "title": "How do I decode a website if it isn&#39;t utf-8 in python?", "body": "<p>The following is my setup for a web scraping program:</p>\n\n<pre><code>import urllib\nimport urllib.request\nimport re\n\nurl = http://roosters5.gepro-osi.nl/roosters/rooster.php?&amp;school=x with x being the number of the school\nhtmlfile = urllib.request.urlopen(url)\nhtmltext = htmlfile.read().decode('utf-8')\n</code></pre>\n\n<p>Normally, this returns the html file in which I can search for what I want with <code>re.findall()</code>, however, this doesn't work with some school numbers such as 218.</p>\n\n<p>What causes this and how should I fix this?</p>\n"}, {"tags": ["python", "tkinter", "treeview", "ttk"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1475092618, "post_id": 39756379, "comment_id": 66808969, "body": "have you tried using the documented <a href=\"https://docs.python.org/dev/library/tkinter.ttk.html#tkinter.ttk.Treeview.get_children\" rel=\"nofollow noreferrer\">get_children</a> method?"}, {"owner": {"reputation": 958, "user_id": 3535074, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf0e1152c6926ac3405d5831d74c9e14?s=128&d=identicon&r=PG&f=1", "display_name": "user3535074", "link": "https://stackoverflow.com/users/3535074/user3535074"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1475094692, "post_id": 39756379, "comment_id": 66810150, "body": "I&#39;ve investigated it before but I wasn&#39;t able to make the step to using it to iterate over the treeview.  It returns a list of what exactly? Are they treeview id&#39;s which I could use to parse the treeview with?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1475095323, "post_id": 39756379, "comment_id": 66810528, "body": "The documentation I pointed you to says it returns &quot;a list of children&quot;. More specifically, it returns the id of each child. Many of the treeview methods take this id as an argument."}, {"owner": {"reputation": 958, "user_id": 3535074, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf0e1152c6926ac3405d5831d74c9e14?s=128&d=identicon&r=PG&f=1", "display_name": "user3535074", "link": "https://stackoverflow.com/users/3535074/user3535074"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1475095622, "post_id": 39756379, "comment_id": 66810697, "body": "I will try that and report back!"}], "answers": [{"comments": [{"owner": {"reputation": 1037, "user_id": 6929343, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2SXNl.jpg?s=128&g=1", "display_name": "WinEunuuchs2Unix", "link": "https://stackoverflow.com/users/6929343/wineunuuchs2unix"}, "edited": false, "score": 1, "creation_date": 1597969076, "post_id": 39762166, "comment_id": 112313115, "body": "You can delete the 4 lines above of:  <code>for each in listOfEntriesInTreeview</code> and then use <code>for each in treeview.get_children():</code> instead."}], "tags": [], "owner": {"reputation": 958, "user_id": 3535074, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf0e1152c6926ac3405d5831d74c9e14?s=128&d=identicon&r=PG&f=1", "display_name": "user3535074", "link": "https://stackoverflow.com/users/3535074/user3535074"}, "is_accepted": false, "score": 1, "last_activity_date": 1597970286, "last_edit_date": 1597970286, "creation_date": 1475127312, "answer_id": 39762166, "question_id": 39756379, "link": "https://stackoverflow.com/questions/39756379/tkinter-ttk-iterating-through-treeview/39762166#39762166", "title": "tkinter ttk iterating through treeview", "body": "<p>To iterate through a treeview's individual entries, get a list of treeview item 'id's and use that to iterate in a 'for' loop:</p>\n<pre><code>#Column integer to match the column which was clicked in the table\ncol=int(treeview.identify_column(event.x).replace('#',''))-1\n\n#Create list of 'id's\nlistOfEntriesInTreeView=treeview.get_children()\n\nfor each in listOfEntriesInTreeView:\n    print(treeview.item(each)['values'][col])  #e.g. prints data in clicked cell\n    treeview.detach(each) #e.g. detaches entry from treeview\n</code></pre>\n<p>This does what I need but if there is a better way, please let me know.</p>\n"}], "owner": {"reputation": 958, "user_id": 3535074, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf0e1152c6926ac3405d5831d74c9e14?s=128&d=identicon&r=PG&f=1", "display_name": "user3535074", "link": "https://stackoverflow.com/users/3535074/user3535074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2729, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1597970286, "creation_date": 1475091852, "last_edit_date": 1495541969, "question_id": 39756379, "link": "https://stackoverflow.com/questions/39756379/tkinter-ttk-iterating-through-treeview", "title": "tkinter ttk iterating through treeview", "body": "<p>I an using a tkinter ttk GUI to present data on files in a server. The information is stored in a ttk treeview and presented as a table. The goal is for the user to be able to filter these rows so that functions can be performed only on those visible in the treeview after the user is done filtering.</p>\n\n<p>Problem is, I can't find a way to iterate through the treeview. I need to be able to to do something like this:</p>\n\n<pre><code>def filterTreeview(treeviewToFilter, tvColumn, stringVariable):\n    for tvRow in treeviewToFilter:\n        if tvRow.getValue(tvColumn) != stringVariable:\n            tvRow.detach()\n</code></pre>\n\n<p>How can I achieve this?</p>\n\n<p>As a secondary question, does anybody know of a better way to do this? Is there any reason to use a treeview rather than a simple array? What about making the filter on an array of data and then re-creating the treeview table from scratch?</p>\n\n<p>I've spent a lot of time reading tutorials looking for information but I've not been successful in understanding the way to use data in a treeview so far:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22032152/python-ttk-treeview-sort-numbers\">python ttk treeview sort numbers</a>\n<a href=\"http://www.tkdocs.com/tutorial/tree.html\" rel=\"nofollow noreferrer\">http://www.tkdocs.com/tutorial/tree.html</a></p>\n\n<p><a href=\"https://fossies.org/dox/Python-3.5.2/classtkinter_1_1ttk_1_1Treeview.html\" rel=\"nofollow noreferrer\">https://fossies.org/dox/Python-3.5.2/classtkinter_1_1ttk_1_1Treeview.html</a> </p>\n"}, {"tags": ["python", "eclipse"], "comments": [{"owner": {"reputation": 1381, "user_id": 4718335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0a0a692e389751ea75095d2fec7ae03d?s=128&d=identicon&r=PG&f=1", "display_name": "nikolas", "link": "https://stackoverflow.com/users/4718335/nikolas"}, "edited": false, "score": 0, "creation_date": 1475091887, "post_id": 39756254, "comment_id": 66808551, "body": "Have you added <code>__init__.py</code> in files folder?"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "reply_to_user": {"reputation": 1381, "user_id": 4718335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0a0a692e389751ea75095d2fec7ae03d?s=128&d=identicon&r=PG&f=1", "display_name": "nikolas", "link": "https://stackoverflow.com/users/4718335/nikolas"}, "edited": false, "score": 0, "creation_date": 1475091983, "post_id": 39756254, "comment_id": 66808601, "body": "No. But say I do that, what should be the relative path?"}, {"owner": {"reputation": 1381, "user_id": 4718335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0a0a692e389751ea75095d2fec7ae03d?s=128&d=identicon&r=PG&f=1", "display_name": "nikolas", "link": "https://stackoverflow.com/users/4718335/nikolas"}, "edited": false, "score": 0, "creation_date": 1475092097, "post_id": 39756254, "comment_id": 66808672, "body": "try using <code>..&#47;_files_inner&#47;games.csv</code>"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "reply_to_user": {"reputation": 1381, "user_id": 4718335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0a0a692e389751ea75095d2fec7ae03d?s=128&d=identicon&r=PG&f=1", "display_name": "nikolas", "link": "https://stackoverflow.com/users/4718335/nikolas"}, "edited": false, "score": 0, "creation_date": 1475092305, "post_id": 39756254, "comment_id": 66808792, "body": "awesome. one dot fixed it (no need for the <b>init</b>.py) put your answer and I&#39;ll check it. THANKS!"}, {"owner": {"reputation": 1381, "user_id": 4718335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0a0a692e389751ea75095d2fec7ae03d?s=128&d=identicon&r=PG&f=1", "display_name": "nikolas", "link": "https://stackoverflow.com/users/4718335/nikolas"}, "edited": false, "score": 0, "creation_date": 1475092412, "post_id": 39756254, "comment_id": 66808847, "body": "Welcome........"}], "answers": [{"tags": [], "owner": {"reputation": 1381, "user_id": 4718335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0a0a692e389751ea75095d2fec7ae03d?s=128&d=identicon&r=PG&f=1", "display_name": "nikolas", "link": "https://stackoverflow.com/users/4718335/nikolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1475092359, "creation_date": 1475092359, "answer_id": 39756504, "question_id": 39756254, "link": "https://stackoverflow.com/questions/39756254/how-to-access-the-project-root-folder/39756504#39756504", "title": "How to access the project root folder", "body": "<p><code>try using ../_files_inner/games.csv</code></p>\n"}], "owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 39756504, "answer_count": 1, "score": 1, "last_activity_date": 1475092359, "creation_date": 1475091498, "question_id": 39756254, "link": "https://stackoverflow.com/questions/39756254/how-to-access-the-project-root-folder", "title": "How to access the project root folder", "body": "<p>Below is a screenshot of my project. While I can access my <code>_files_inner</code> folder quite easily with <code>pd.read_csv(\"./_files_inner/games.csv\")</code> I find it tricky to access my 'root' folder <code>_files</code></p>\n\n<p>if you see my project explorer, I'm trying to access the <code>_files</code> but without specifying the absolute path (i.e., <code>C:\\\\Users\\\\adhg\\\\dev\\\\py\\\\_files\\\\games.csv</code>) because other developer have different path.</p>\n\n<p>Question: how to access the root <code>_files</code> folder with something like this one (doesn't work)<code>pd.read_csv(\"./_files/games.csv\")</code>: </p>\n\n<pre><code>import pandas as pd\n\ncsv_result = pd.read_csv(\"./_files/games.csv\")  #will not work\ncsv_result = pd.read_csv(\"./_files_inner/games.csv\") #works \n\nprint csv_result\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wTz4c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wTz4c.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "networking", "scapy", "dhcp"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1475092499, "post_id": 39756217, "comment_id": 66808901, "body": "You can request a lease time using the correct DHCP option."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475092881, "post_id": 39756217, "comment_id": 66809120, "body": "You can put option #51 in the request packet. I don&#39;t know if the server will use it, though."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1475093464, "creation_date": 1475093464, "answer_id": 39756801, "question_id": 39756217, "link": "https://stackoverflow.com/questions/39756217/specfying-lease-time-in-dhcp-request-packet/39756801#39756801", "title": "Specfying lease time in DHCP request packet", "body": "<p>Put option #51, with the desired lease time as its value, in the <code>options</code> section of the <code>DHCPREQUEST</code> or <code>DHCPDISCOVER</code> packet.</p>\n\n<p>From <a href=\"http://www.freesoft.org/CIE/RFC/2131/16.htm\" rel=\"nofollow\">RFC 2131 Section 3.5</a>:</p>\n\n<blockquote>\n  <p>In addition, the client may suggest values for the network address and lease time in the DHCPDISCOVER message. The client may include the 'requested IP address' option to suggest that a particular IP address be assigned, and may include the 'IP address lease time' option to suggest the lease time it would like.</p>\n</blockquote>\n"}], "owner": {"reputation": 43, "user_id": 4080431, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/c30161aca85859222c67953e564c01b4?s=128&d=identicon&r=PG&f=1", "display_name": "Varun Chopra", "link": "https://stackoverflow.com/users/4080431/varun-chopra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475095519, "creation_date": 1475091375, "question_id": 39756217, "link": "https://stackoverflow.com/questions/39756217/specfying-lease-time-in-dhcp-request-packet", "title": "Specfying lease time in DHCP request packet", "body": "<p>I am trying to create a Dhcp request packet using scapy. Is there any way in which I can specify DHCP lease time in my request packet?</p>\n"}, {"tags": ["python", "machine-learning", "neural-network", "tensorflow"], "comments": [{"owner": {"reputation": 346, "user_id": 4325508, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100006092160171/picture?type=large", "display_name": "Jasdeep Singh Chhabra", "link": "https://stackoverflow.com/users/4325508/jasdeep-singh-chhabra"}, "edited": false, "score": 0, "creation_date": 1475325128, "post_id": 39756186, "comment_id": 66904640, "body": "anyone?........"}], "answers": [{"tags": [], "owner": {"reputation": 28720, "user_id": 4561314, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6ad3771ba6e8e823dbcae710c1cde4da?s=128&d=identicon&r=PG", "display_name": "stackoverflowuser2010", "link": "https://stackoverflow.com/users/4561314/stackoverflowuser2010"}, "is_accepted": false, "score": 0, "last_activity_date": 1475181464, "creation_date": 1475181464, "answer_id": 39779564, "question_id": 39756186, "link": "https://stackoverflow.com/questions/39756186/cost-function-erratically-varying/39779564#39779564", "title": "Cost function erratically varying", "body": "<p>Whenever you see your cost function increase when you use gradient descent, you should try <strong>reducing the learning rate parameter</strong>. Try repeatedly decreasing the learning rate by 1/10 until you see the loss decrease monotonically.</p>\n"}], "owner": {"reputation": 346, "user_id": 4325508, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100006092160171/picture?type=large", "display_name": "Jasdeep Singh Chhabra", "link": "https://stackoverflow.com/users/4325508/jasdeep-singh-chhabra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475317010, "creation_date": 1475091279, "last_edit_date": 1475317010, "question_id": 39756186, "link": "https://stackoverflow.com/questions/39756186/cost-function-erratically-varying", "title": "Cost function erratically varying", "body": "<p><strong>Background</strong></p>\n\n<p>I am designing a neural network solution for multiclass classification problem using tensorflow.The input data consist of 16 features and 6000 training examples to be read from csv file having 17 columns(16 features+1 label) and 6000 rows(training examples).I have decided to take 16 neurons as input layer 16 neurons in hidden layer and 16 neurons in output layer(as it is a 16 class classification).Here is my code for implementation-</p>\n\n<pre><code>import tensorflow as tf\nx=tf.placeholder(tf.float32,shape=[None,16])\ny_=tf.placeholder(tf.float32,shape=[None,16])\ndef weight_variable(shape):\n    initial=tf.truncated_normal(shape,stddev=0.1,dtype=tf.float32)\n    return tf.Variable(initial)\ndef bias_variable(shape):\n    initial=tf.constant(0.1,shape=shape)\n    return tf.Variable(initial)\ndef read_from_csv(filename_queue):\n    reader=tf.TextLineReader()\n    key,value=reader.read(filename_queue)\n    record_defaults=[[1.], [1.], [1.], [1.], [1.],[1.], [1.], [1.], [1.], [1.],[1.], [1.], [1.], [1.], [1.],[1.],[1.]]\n    col1,col2,col3,col4,col5,col6,col7,col8,col9,col10,col11,col12,col13,col14,col15,col16,col17=tf.decode_csv(value,record_defaults=record_defaults)\n    features = tf.pack([col1, col2, col3, col4,col5,col6,col7,col8,col9,col10,col11,col12,col13,col14,col15,col16])\n    labels=tf.pack([col17])\n    return features,labels\ndef input_pipeline(filenames,batch_size,num_epochs=None):\n    filename_queue=tf.train.string_input_producer([filenames],num_epochs=num_epochs,shuffle=True)\n    features,labels=read_from_csv(filename_queue)\n    min_after_dequeue=100\n    capacity=300\n    feature_batch,label_batch=tf.train.shuffle_batch([features,labels],batch_size=batch_size,capacity=capacity,min_after_dequeue=min_after_dequeue)\n    return feature_batch,label_batch\n\nx,y_=input_pipeline('csvnew1.csv',20,300)\n#input layer\nW_1=weight_variable([16,16])\nb_1=bias_variable([16])\ny_1=tf.nn.relu(tf.matmul(x,W_1)+b_1)\n\n#hidden layer\nW_2=weight_variable([16,16])\nb_2=bias_variable([16])\ny_2=tf.nn.softmax(tf.matmul(y_1,W_2)+b_2)\n\n\ncross_entropy=tf.reduce_mean(-tf.reduce_sum(y_*tf.log(y_2),reduction_indices=[1]))\ntrain_step=tf.train.GradientDescentOptimizer(0.01).minimize(cross_entropy)\ncorrect_prediction=tf.equal(tf.argmax(y_2,1),tf.argmax(y_,1))\naccuracy=tf.reduce_mean(tf.cast(correct_prediction,tf.float32))\nsummary_cross=tf.scalar_summary('cost',cross_entropy)\nsummaries = tf.merge_all_summaries()\n\ninit_op = tf.initialize_all_variables()\n\n# Create a session for running operations in the Graph.\nsess = tf.Session()\nsummary_writer = tf.train.SummaryWriter('stats', sess.graph)\n\n\n# Initialize the variables (like the epoch counter).\nsess.run(init_op)\nsess.run(tf.initialize_local_variables())\ncoord = tf.train.Coordinator()\nthreads = tf.train.start_queue_runners(sess=sess, coord=coord)\n\ncount=0\ntry:\n    while not coord.should_stop():\n\n         #print(\"training....\")\n    #summary_writer.add_summary(sess.run(summaries), count)\n\n\n\n    sess.run(train_step)\n    if count in range(300,90000,300):\n        print(sess.run(cross_entropy))\n    count=count+1\nexcept tf.errors.OutOfRangeError:\n    print('Done training -- epoch limit reached')\nfinally:\n    # When done, ask the threads to stop.\n    coord.request_stop()\n\n# Wait for threads to finish.\ncoord.join(threads)\nsess.close()\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<p>The problem here is that as I print my cost function during training instead of generally decreasing trend it increases and decreases pretty randomly and erratically.I am pasting full code because it looks like implementation problem that I am unable to find.(varying learning rate is vain). </p>\n\n<p>Edit:Decreasing learning rate to 10^-12 gives following costs(still erratic)</p>\n\n<p>201.928,\n173.078,\n144.212,\n97.6255,\n133.125,\n164.19,\n208.571,\n208.599,\n188.594,\n244.078,\n237.414,\n224.085,\n224.1,\n206.36,\n217.457,\n244.083,\n246.309,\n268.496,\n248.517,\n272.924,\n228.551,\n239.637,\n301.759,....</p>\n\n<p>I am printing cost after every 300 counts because 1 batch=20 examples,6000/20=300  counts for 1 epoch after which weights are updated.</p>\n"}, {"tags": ["python", "windows", "wmi"], "comments": [{"owner": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 1, "creation_date": 1475091426, "post_id": 39756172, "comment_id": 66808296, "body": "Can you include the relevant snippet of your code in the question itself, rather than instructing the user to download the file?"}, {"owner": {"reputation": 535, "user_id": 5899439, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-TRcyChltFH8/AAAAAAAAAAI/AAAAAAAAADI/BM0RqbMXv0I/photo.jpg?sz=128", "display_name": "James Yeoman", "link": "https://stackoverflow.com/users/5899439/james-yeoman"}, "reply_to_user": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475091477, "post_id": 39756172, "comment_id": 66808327, "body": "@brianpck ah yeah... I&#39;ll do that now"}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 1, "creation_date": 1475092479, "post_id": 39756172, "comment_id": 66808886, "body": "You need to read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The code needs to be in the question itself, not in an external link."}, {"owner": {"reputation": 535, "user_id": 5899439, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-TRcyChltFH8/AAAAAAAAAAI/AAAAAAAAADI/BM0RqbMXv0I/photo.jpg?sz=128", "display_name": "James Yeoman", "link": "https://stackoverflow.com/users/5899439/james-yeoman"}, "reply_to_user": {"reputation": 7083, "user_id": 4211135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fd7db022a4fc71ad40335fce1e750e?s=128&d=identicon&r=PG&f=1", "display_name": "brianpck", "link": "https://stackoverflow.com/users/4211135/brianpck"}, "edited": false, "score": 0, "creation_date": 1475169130, "post_id": 39756172, "comment_id": 66846631, "body": "@brianpck thanks. I will remember about that next time. Bookmarking now..."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 5899439, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-TRcyChltFH8/AAAAAAAAAAI/AAAAAAAAADI/BM0RqbMXv0I/photo.jpg?sz=128", "display_name": "James Yeoman", "link": "https://stackoverflow.com/users/5899439/james-yeoman"}, "edited": false, "score": 0, "creation_date": 1475169077, "post_id": 39756598, "comment_id": 66846611, "body": "derp... thank you. Sometimes, I wish error messages were able to understand the library and therefore be able to tell you went wrong..."}], "tags": [], "owner": {"reputation": 1399, "user_id": 1681760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f97621ebad8c47b0570d00624cf12a54?s=128&d=identicon&r=PG", "display_name": "rtaft", "link": "https://stackoverflow.com/users/1681760/rtaft"}, "is_accepted": true, "score": 1, "last_activity_date": 1475092674, "creation_date": 1475092674, "answer_id": 39756598, "question_id": 39756172, "link": "https://stackoverflow.com/questions/39756172/what-is-the-cause-of-the-error-in-this-python-wmi-script-windows-8-1-network/39756598#39756598", "title": "What is the cause of the error in this Python WMI script? (Windows 8.1) (Network adapter configuration) (Python 2.7)", "body": "<p>SetDNSServerSearchOrder is looking for an array of Strings</p>\n\n<pre><code>c = nic.SetDNSServerSearchOrder(dns)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>c = nic.SetDNSServerSearchOrder([dns])\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 5899439, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-TRcyChltFH8/AAAAAAAAAAI/AAAAAAAAADI/BM0RqbMXv0I/photo.jpg?sz=128", "display_name": "James Yeoman", "link": "https://stackoverflow.com/users/5899439/james-yeoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 1, "accepted_answer_id": 39756598, "answer_count": 1, "score": 0, "last_activity_date": 1475168899, "creation_date": 1475091233, "last_edit_date": 1495541707, "question_id": 39756172, "link": "https://stackoverflow.com/questions/39756172/what-is-the-cause-of-the-error-in-this-python-wmi-script-windows-8-1-network", "title": "What is the cause of the error in this Python WMI script? (Windows 8.1) (Network adapter configuration) (Python 2.7)", "body": "<p>I am trying to make a Python script that will set my IP address to a static one instead of a dynamic one. I have searched up methods for this and the WMI implementation for Python seemed to be the best option. The stackoverflow question I got the information about is <a href=\"https://stackoverflow.com/a/7581831/5899439\">here</a>. </p>\n\n<p>I can get the IP address to be set to the static address but then I have to set the DNS server as well. <a href=\"https://community.spiceworks.com/topic/405339-replace-static-dns-settings-with-wmi-and-powershell\" rel=\"nofollow noreferrer\">This site here</a> is where I got the basis for the DNS setting but it is causing problems. </p>\n\n<p><strong>Traceback from IDLE</strong></p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:\\Users\\james_000\\Desktop\\SetIP.py\", line 18, in &lt;module&gt;\n    c = nic.SetDNSServerSearchOrder(dns)\nFile \"C:\\Python27\\lib\\site-packages\\wmi.py\", line 431, in __call__\n    handle_com_error ()\nFile \"C:\\Python27\\lib\\site-packages\\wmi.py\", line 241, in handle_com_error\n    raise klass (com_error=err)\nx_wmi: &lt;x_wmi: Unexpected COM Error (-2147352567, 'Exception occurred.', (0,\nu'SWbemProperty', u'Type mismatch ', None, 0, -2147217403), None)&gt;\n</code></pre>\n\n<p><strong>SetIP.py</strong></p>\n\n<pre><code>import wmi\n\nnic_configs = wmi.WMI('').Win32_NetworkAdapterConfiguration(IPEnabled=True)\n\n# First network adaptor\nnic = nic_configs[0]\n\n# IP address, subnetmask and gateway values should be unicode objects\nip = u'192.168.0.151'\nsubnetmask = u'255.255.255.0'\ngateway = u'192.168.0.1'\ndns = u'192.168.0.1'\n\n# Set IP address, subnetmask and default gateway\n# Note: EnableStatic() and SetGateways() methods require *lists* of values to be passed\na = nic.EnableStatic(IPAddress=[ip],SubnetMask=[subnetmask])\nb = nic.SetGateways(DefaultIPGateway=[gateway])\nc = nic.SetDNSServerSearchOrder(dns)\nd = nic.SetDynamicDNSRegistration(true)\n\nprint(a)\nprint(b)\nprint(c)\nprint(d)\n</code></pre>\n\n<p>Please don't add solutions in comments as it makes it harder for other people to learn about how to fix the problem. </p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1475093009, "post_id": 39756435, "comment_id": 66809196, "body": "That&#39;s clever. Thank you!"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 3, "last_activity_date": 1475092084, "creation_date": 1475092084, "answer_id": 39756435, "question_id": 39756150, "link": "https://stackoverflow.com/questions/39756150/how-to-separate-a-numpy-array-into-separate-columns-in-pandas/39756435#39756435", "title": "How to separate a numpy array into separate columns in pandas", "body": "<p>You can construct a series object from each numpy array and the elements will be broadcasted as columns:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf.groupby(['ID_0', 'ID_1']).apply(lambda x: pd.Series(np.histogram(x['ID_2'], range = (0,1), density=True)[0])).reset_index()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fc63F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fc63F.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 39756435, "answer_count": 1, "score": 1, "last_activity_date": 1475092084, "creation_date": 1475091156, "question_id": 39756150, "link": "https://stackoverflow.com/questions/39756150/how-to-separate-a-numpy-array-into-separate-columns-in-pandas", "title": "How to separate a numpy array into separate columns in pandas", "body": "<p>I have a dataframe that looks like</p>\n\n<pre><code>  ID_0 ID_1  ID_2\n0    a    b  0.05\n1    a    b  0.10\n2    a    b  0.19\n3    a    c  0.25\n4    a    c  0.40\n5    a    c  0.65\n6    a    c  0.71\n7    d    c  0.95\n8    d    c  1.00\n</code></pre>\n\n<p>I want to groupby and make a normalized histogram of the ID_2 column for each group. So I do</p>\n\n<pre><code>df.groupby(['ID_0', 'ID_1']).apply(lambda x: np.histogram(x['ID_2'], range = (0,1), density=True)[0]).reset_index(name='ID_2')\n</code></pre>\n\n<p>However what I would really like is for the 11 elements of the numpy arrays to be in separate columns  of the dataframe.  </p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 132, "user_id": 6610547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0302e90d39f3c793e91176f6ae68bc7?s=128&d=identicon&r=PG&f=1", "display_name": "PQL", "link": "https://stackoverflow.com/users/6610547/pql"}, "edited": false, "score": 0, "creation_date": 1475091386, "post_id": 39756119, "comment_id": 66808275, "body": "Haven&#39;t used selenium but it looks like the code already has you specify how long to wait (in your case 1500 seconds)."}, {"owner": {"reputation": 164, "user_id": 6877104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce453f996196d55aeee378e9fbeef68?s=128&d=identicon&r=PG&f=1", "display_name": "Iber", "link": "https://stackoverflow.com/users/6877104/iber"}, "reply_to_user": {"reputation": 132, "user_id": 6610547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0302e90d39f3c793e91176f6ae68bc7?s=128&d=identicon&r=PG&f=1", "display_name": "PQL", "link": "https://stackoverflow.com/users/6610547/pql"}, "edited": false, "score": 0, "creation_date": 1475091674, "post_id": 39756119, "comment_id": 66808434, "body": "@PQL I want to be able to abort the waiting before the 1500 seconds. Tried to use a variable: with input() as x: WebDriverWait(driver, x).until... which won&#39;t work. I&#39;m looking for a general workaround using except if possible."}], "answers": [{"tags": [], "owner": {"reputation": 1386, "user_id": 3688683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0lBiI.jpg?s=128&g=1", "display_name": "scomes", "link": "https://stackoverflow.com/users/3688683/scomes"}, "is_accepted": false, "score": 0, "last_activity_date": 1475092801, "creation_date": 1475092801, "answer_id": 39756635, "question_id": 39756119, "link": "https://stackoverflow.com/questions/39756119/can-i-stop-some-code-by-pressing-a-button/39756635#39756635", "title": "Can I stop some code by pressing a button?", "body": "<p>If you are okay with being asked if you want to continue at regular intervals, in this case 15 seconds, and you want to use except (like you said in your comment), then the following code should work. It isn't the most elegant but it does the trick. </p>\n\n<pre><code>try:\n    while True:\n        try:\n            element = WebDriverWait(driver,15).until(EC.presence_of_element_located((By.ID, 'someid')))\n            break\n        except Exception as e:\n            do_continue = input(\"Continue? (y/n)\")\n            if do_continue == \"n\":\n                raise e\nexcept:\n\n    print 'Doing other code'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6266651, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yBAIDUbSvfc/AAAAAAAAAAI/AAAAAAAAANw/U4NG3eO2QiQ/photo.jpg?sz=128", "display_name": "Chinmay Garg", "link": "https://stackoverflow.com/users/6266651/chinmay-garg"}, "is_accepted": false, "score": 0, "last_activity_date": 1475237622, "creation_date": 1475237622, "answer_id": 39791282, "question_id": 39756119, "link": "https://stackoverflow.com/questions/39756119/can-i-stop-some-code-by-pressing-a-button/39791282#39791282", "title": "Can I stop some code by pressing a button?", "body": "<p>You can handle this using Try Catch block. The exception which occurs in case element do not show up, mention that exception in catch, and the execution will simple move further in case element does not appear. \nIf it do appear, then write the code to handle that element in Try block.</p>\n\n<p>This approach can be tried if you want to avoid manual intervention. </p>\n"}], "owner": {"reputation": 164, "user_id": 6877104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce453f996196d55aeee378e9fbeef68?s=128&d=identicon&r=PG&f=1", "display_name": "Iber", "link": "https://stackoverflow.com/users/6877104/iber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "closed_date": 1475336624, "answer_count": 2, "score": 0, "last_activity_date": 1475237622, "creation_date": 1475091026, "question_id": 39756119, "link": "https://stackoverflow.com/questions/39756119/can-i-stop-some-code-by-pressing-a-button", "closed_reason": "Duplicate", "title": "Can I stop some code by pressing a button?", "body": "<p>I'm waiting for an element that might or might not show up.\nAt some point if it doesn't show up I want to be able to press \"enter\"\nand move to some other part of the code.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\ndriver = webdriver.Firefox()\ndriver.get(\"http://somelink.com\")\n\nTry:\n  element = WebDriverWait(driver, 1500).until(EC.presence_of_element_located((By.ID, 'someid')))\n  # I want to be able to interrupt the waiting at some point before the 1500 secs.\nexcept: # if I click on \"enter\"\n  # some other code\n  pass\n</code></pre>\n\n<p>I don't know whether it is possible using try/except, timers or not possible at all.\nI don't want the script to exit (as with ctrl+c) but rather to execute some other code.</p>\n\n<p>Suggestions are welcome.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1475091107, "post_id": 39756016, "comment_id": 66808129, "body": "What is the URL you&#39;re trying to access?  <code>requests.get()</code> is complaining that the URL does not start with <code>http:</code> or <code>https:</code>."}, {"owner": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1475093057, "post_id": 39756016, "comment_id": 66809220, "body": "see my full code # edited"}, {"owner": {"reputation": 2342, "user_id": 1048186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/taKn8.png?s=128&g=1", "display_name": "Josiah Yoder", "link": "https://stackoverflow.com/users/1048186/josiah-yoder"}, "edited": false, "score": 0, "creation_date": 1568900207, "post_id": 39756016, "comment_id": 102428774, "body": "The error message would be clearer if it read &quot;missing <b>protocol</b>&quot; rather than &quot;missing schema&quot;.  I looked at it for a long time and had to come here before noticing the http at the beginning of the URL."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475094944, "post_id": 39756927, "comment_id": 66810308, "body": "actually  urls = root.xpath(&#39;//div[1]/header/div[3]/nav/ul/li/a/@href&#39;) is to scrap main content link like sports,business,world  and urls = root.xpath(&#39;//div[@class=&quot;media-body&quot;]//@href&#39;) is for scrapping news content link   and then at last i am joining it to make a complete link. because newspaper link changing everyday...  i have done with other news website and its working fine but for this website ..the above error coming...what to do??"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475095090, "post_id": 39756927, "comment_id": 66810394, "body": "<i>and then at last i am joining it to make a complete link</i> In the first <code>for</code> loop where you call <code>requests.get(l)</code>, you are NOT doing this.  Was my answer unclear?"}, {"owner": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475096308, "post_id": 39756927, "comment_id": 66811051, "body": "now understood and its working now...... one more help....i want title and article should be opened in gui. how to do that??"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475096610, "post_id": 39756927, "comment_id": 66811206, "body": "What do you mean by <i>i want title and article should be opened in gui</i>?  Do you mean you want to start up a browser and open a specific link?"}, {"owner": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475097146, "post_id": 39756927, "comment_id": 66811490, "body": "i have extracted news article(text format) from dnaindia.com and i want to show that article in python gui or in web browser( it should not open the link, the text which i extracted only that needed)  because link contains so many ad."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475097252, "post_id": 39756927, "comment_id": 66811544, "body": "I don&#39;t know what you mean by <i>python gui</i>.  Perhaps a separate question would be better."}, {"owner": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475097706, "post_id": 39756927, "comment_id": 66811764, "body": "GUI Application with Tkinter"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "edited": false, "score": 0, "creation_date": 1475098120, "post_id": 39756927, "comment_id": 66811946, "body": "I don&#39;t know anything about Tkinter.  I think you should put that in a new question."}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 1, "last_activity_date": 1475094761, "last_edit_date": 1475094761, "creation_date": 1475093986, "answer_id": 39756927, "question_id": 39756016, "link": "https://stackoverflow.com/questions/39756016/missingschema-invalid-url-no-schema-supplied-perhaps-you-meant-http/39756927#39756927", "title": "MissingSchema: Invalid URL &#39;/&#39;: No schema supplied. Perhaps you meant http:///?", "body": "<pre><code>urls = root.xpath('//div[1]/header/div[3]/nav/ul/li/a/@href')\n</code></pre>\n\n<p>These HREFs aren't full URLs; they're essentially just pathnames (i.e. <code>/foo/bar/thing.html</code>).</p>\n\n<p>When you click on one of these links in a browser, the browser is smart enough to prepend the current page's scheme and hostname (i.e. <code>https://host.something.com</code>) to these paths, making a full URL.</p>\n\n<p>But your code isn't doing that; you're trying to use the raw HREF value.</p>\n\n<p>Later on in your program you use <code>urljoin()</code> which solves this issue, but you aren't doing that in the <code>for l in l1:</code> loop.  <em>Why not?</em></p>\n"}], "owner": {"reputation": 1, "user_id": 6895777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dcc834b36b241c5896985d39297fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal Prasad", "link": "https://stackoverflow.com/users/6895777/gopal-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4943, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1475296924, "creation_date": 1475090648, "last_edit_date": 1475296924, "question_id": 39756016, "link": "https://stackoverflow.com/questions/39756016/missingschema-invalid-url-no-schema-supplied-perhaps-you-meant-http", "title": "MissingSchema: Invalid URL &#39;/&#39;: No schema supplied. Perhaps you meant http:///?", "body": "<pre><code>for l in l1:\nr = requests.get(l)\nhtml = r.content\nroot = lxml.html.fromstring(html)   \nurls = root.xpath('//div[@class=\"media-body\"]//@href')\nl2.extend(urls)\n</code></pre>\n\n<p>while running the above code this error coming. any solution??</p>\n\n<p>MissingSchemaTraceback (most recent call last)</p>\n\n<p>MissingSchema: Invalid URL '/': No schema supplied. Perhaps you meant <a href=\"http:///\" rel=\"nofollow\">http:///</a>?</p>\n"}, {"tags": ["python", "hidden-markov-models", "hmmlearn"], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 1123695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8781f11cea77d589056d22493de54a1?s=128&d=identicon&r=PG", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/1123695/isaiah"}, "edited": false, "score": 0, "creation_date": 1475172453, "post_id": 39767561, "comment_id": 66848611, "body": "Hi Sergei, it is nice to hear from you. For the first one, I am a little confused about how can I do it in a semi-supervised manner in hmmlearn module. When I call function fit, the input is only observations. Can you tell me more about it? Thanks."}, {"owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "reply_to_user": {"reputation": 587, "user_id": 1123695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8781f11cea77d589056d22493de54a1?s=128&d=identicon&r=PG", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/1123695/isaiah"}, "edited": false, "score": 0, "creation_date": 1475182293, "post_id": 39767561, "comment_id": 66853760, "body": "<code>hmmlearn</code> does not currently have a way of doing this automatically, because all of the problems I&#39;ve used HMMs are unsupervised (i.e. no labelled data are available at all) and thus require the second approach. Anyway, I&#39;ve updated the answer, please do let me know if the output of <code>guess_labels</code> makes any sense for your data."}, {"owner": {"reputation": 587, "user_id": 1123695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8781f11cea77d589056d22493de54a1?s=128&d=identicon&r=PG", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/1123695/isaiah"}, "edited": false, "score": 0, "creation_date": 1476314399, "post_id": 39767561, "comment_id": 67297769, "body": "Thanks Sergei, I just switch to LSTM to train my data and it seems OK for me."}, {"owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "reply_to_user": {"reputation": 587, "user_id": 1123695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8781f11cea77d589056d22493de54a1?s=128&d=identicon&r=PG", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/1123695/isaiah"}, "edited": false, "score": 0, "creation_date": 1476435564, "post_id": 39767561, "comment_id": 67354017, "body": "Yeah, for supervised data LSTM might be a better choice."}], "tags": [], "owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "is_accepted": false, "score": 4, "last_activity_date": 1475182165, "last_edit_date": 1475182165, "creation_date": 1475144243, "answer_id": 39767561, "question_id": 39756006, "link": "https://stackoverflow.com/questions/39756006/how-to-map-hidden-states-to-their-corresponding-categories-after-decoding-in-hmm/39767561#39767561", "title": "How to map hidden states to their corresponding categories after decoding in hmmlearn (Hidden Markov Model)?", "body": "<p>This is known as label-switching problem. The log-likelihood of the model sums over all of the states and is therefore independent of the particular ordering.</p>\n\n<p>As far as I know, there is no general recipe for dealing with it. Among the things you might try are:</p>\n\n<ul>\n<li>Find a partially labelled dataset, run <code>predict</code> on it and use the predictions to map the state indices to the corresponding labels. </li>\n<li>Come up with heuristics for possible parameter values in each state. This could be tricky to do for Multinomials, but is possible if you model e.g. accelerometer data.</li>\n</ul>\n\n<hr>\n\n<p><strong>Update</strong>: An ad-hoc version of guessing state to label mapping from labelled data.</p>\n\n<pre><code>def guess_labels(hmm, X, labels):\n    result = [None] * hmm.n_components\n    for label, y_t in zip(labels, hmm.predict(X)):\n        assigned = result[y_t]\n        if assigned is not None:\n            # XXX clearly for any real data there might be\n            #     (and there will be) conflicts. Here we just blindly\n            #     hope the ``assert`` never fires.\n            assert assigned == label\n        else:\n            result[y_t] = label\n    return result\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 1123695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8781f11cea77d589056d22493de54a1?s=128&d=identicon&r=PG", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/1123695/isaiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1659, "favorite_count": 3, "answer_count": 1, "score": 3, "last_activity_date": 1475182165, "creation_date": 1475090617, "last_edit_date": 1475168584, "question_id": 39756006, "link": "https://stackoverflow.com/questions/39756006/how-to-map-hidden-states-to-their-corresponding-categories-after-decoding-in-hmm", "title": "How to map hidden states to their corresponding categories after decoding in hmmlearn (Hidden Markov Model)?", "body": "<p>I would like to predict hidden states using Hidden Markov Model (decoding problem). The data is categorical. The hidden states include Hungry, Rest, Exercise and Movie. The observation set include Food, Home, Outdoor &amp; Recreation and Arts &amp; Entertainment. My program is first to train the HMM based on the observation sequence (Baum-Welch algorithm). And then I do the decoding (Viterbi algorithm) to predict the hidden state sequence.</p>\n\n<p>My question is that how I can map the result (non-negative integers) to their corresponding categories like Hungry or Rest. Because of the non-deterministic property of the training algorithm , the parameters are different for every training of the same data. Therefore the hidden state sequence is different every time if I do the map like the following code. </p>\n\n<p>The code is as follows:</p>\n\n<pre><code>from __future__ import division\nimport numpy as np\nfrom hmmlearn import hmm\n\nstates = [\"Hungry\", \"Rest\", \"Exercise\", \"Movie\"]\nn_states = len(states)\n\nobservations = [\"Food\", \"Home\", \"Outdoor &amp; Recreation\", \"Arts &amp; Entertainment\"]\n\n# The number in this sequence is the index of observation\ncategory_sequence = [1, 0, 1, 2, 1, 3, 1]\nLocation = np.array([category_sequence]).T\nmodel = hmm.MultinomialHMM(n_components=n_states).fit(Location)\n\nlogprob, result = model.decode(Location)\nprint \"Category:\", \", \".join(map(lambda x: observations[x], Location.T[0]))\nprint \"Intent:\", \", \".join(map(lambda x: states[x], result))\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 3316031, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/884d57330e5b3f9d58fef38f73336b32?s=128&d=identicon&r=PG&f=1", "display_name": "spiderface", "link": "https://stackoverflow.com/users/3316031/spiderface"}, "edited": false, "score": 0, "creation_date": 1475091305, "post_id": 39756074, "comment_id": 66808232, "body": "Thanks. What does join do then?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 699, "user_id": 3316031, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/884d57330e5b3f9d58fef38f73336b32?s=128&d=identicon&r=PG&f=1", "display_name": "spiderface", "link": "https://stackoverflow.com/users/3316031/spiderface"}, "edited": false, "score": 0, "creation_date": 1475091646, "post_id": 39756074, "comment_id": 66808415, "body": "@spiderface was working on more comprehensive answer.  post has been updated."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1475091620, "last_edit_date": 1475091620, "creation_date": 1475090867, "answer_id": 39756074, "question_id": 39755981, "link": "https://stackoverflow.com/questions/39755981/explain-how-pandas-dataframe-join-works/39756074#39756074", "title": "Explain how pandas DataFrame join works", "body": "<p>First things first:<br>\nWhat you wanted was merge</p>\n\n<pre><code>df1.merge(df2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HnoA8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HnoA8.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><code>join</code> defaults to merging on the <code>index</code>.  You can specify the <code>on</code> parameter which only says which column from left side to match with the index of the right side.  </p>\n\n<p>These might help illustrate</p>\n\n<pre><code>df1.set_index('key').join(df2.set_index('key'))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Mpw4c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mpw4c.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>df1.join(df2.set_index('key'), on='key')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9QQgK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9QQgK.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Your example is matching the index of <code>df2</code> which looks like <code>[0, 1, 2, 3]</code> with the <code>key</code> column of <code>df1</code> which looks like <code>[1, 2, 3, 4]</code><br>\nThat's why you get <code>NaN</code> in <code>col2</code> when <code>key_l</code> is <code>4</code></p>\n\n<pre><code>df1.join(df2, on='key', lsuffix='_l', how='outer')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Wg93O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wg93O.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 699, "user_id": 3316031, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/884d57330e5b3f9d58fef38f73336b32?s=128&d=identicon&r=PG&f=1", "display_name": "spiderface", "link": "https://stackoverflow.com/users/3316031/spiderface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 1, "accepted_answer_id": 39756074, "answer_count": 1, "score": 3, "last_activity_date": 1475091620, "creation_date": 1475090533, "question_id": 39755981, "link": "https://stackoverflow.com/questions/39755981/explain-how-pandas-dataframe-join-works", "title": "Explain how pandas DataFrame join works", "body": "<p>Why does inner join work so strange in pandas?</p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code>import pandas as pd\nimport io\n\nt1 = ('key,col1\\n'\n      '1,a\\n'\n      '2,b\\n'\n      '3,c\\n'\n      '4,d')\n\nt2 = ('key,col2\\n'\n      '1,e\\n'\n      '2,f\\n'\n      '3,g\\n'\n      '4,h')\n\n\ndf1 = pd.read_csv(io.StringIO(t1), header=0)\ndf2 = pd.read_csv(io.StringIO(t2), header=0)\n\nprint(df1)\nprint()\nprint(df2)\nprint()\nprint(df2.join(df1, on='key', how='inner', lsuffix='_l'))\n</code></pre>\n\n<p><strong>Outputs:</strong></p>\n\n<pre><code>   key col1\n0    1    a\n1    2    b\n2    3    c\n3    4    d\n\n   key col2\n0    1    e\n1    2    f\n2    3    g\n3    4    h\n\n   key_l col2  key col1\n0      1    e    2    b\n1      2    f    3    c\n2      3    g    4    d\n</code></pre>\n\n<p>If I don't specify <code>lsuffix</code>, it says</p>\n\n<pre><code>ValueError: columns overlap but no suffix specified: Index(['key'], dtype='object')\n</code></pre>\n\n<p>Does this function work differently from SQL's JOIN? Why does it want to create an extra 'key' column with a suffix? Why are there only 3 rows?\nI expected it to output something like this:</p>\n\n<pre><code>   key col1 col2\n0    1    a    e\n1    2    b    f\n2    3    c    g\n3    4    d    h\n</code></pre>\n"}, {"tags": ["python", ".net", "dictionary", "python.net"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1475091333, "post_id": 39755973, "comment_id": 66808246, "body": "What flavor of Python interpreter are you using? I ask because if <code>SortedDictionary</code> is the name of a class, <code>SortedDictionary&lt;int, bool&gt;(1, True)</code> results in the tuple <code>(True, True)</code>. This would also explain the <code>AttributeError</code> you&#39;re getting. The statement is <i>not</i> valid Python syntax."}, {"owner": {"reputation": 63, "user_id": 6888086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b6ae21255481c9805e1580da680ead?s=128&d=identicon&r=PG&f=1", "display_name": "cole", "link": "https://stackoverflow.com/users/6888086/cole"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1475091643, "post_id": 39755973, "comment_id": 66808413, "body": "@martineau the interpreter is CPython. The project I&#39;m working on uses SortedDictionary&lt;int, Object&gt;, but I replaced Object with a bool for this question since it still doesn&#39;t work in that case. I assumed this was correct Python syntax because I didn&#39;t get any error messages regarding that, but I think that should solve this case. Thanks!"}, {"owner": {"reputation": 63, "user_id": 6888086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b6ae21255481c9805e1580da680ead?s=128&d=identicon&r=PG&f=1", "display_name": "cole", "link": "https://stackoverflow.com/users/6888086/cole"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1475092056, "post_id": 39755973, "comment_id": 66808650, "body": "@martineau do you mind explaining why SortedDictionary&lt;int, bool&gt;(1, True) would return the tuple (True, True)?"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1475092105, "post_id": 39755973, "comment_id": 66808676, "body": "This is IronPython."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1475092107, "post_id": 39755973, "comment_id": 66808679, "body": "In that case it&#39;s definitely a syntax issue. You&#39;re using C# syntax which the Python interpreter no comprende. I think you want something like <code>SortedDictionary[int, bool]</code> based on some coding examples I just found."}, {"owner": {"reputation": 63, "user_id": 6888086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b6ae21255481c9805e1580da680ead?s=128&d=identicon&r=PG&f=1", "display_name": "cole", "link": "https://stackoverflow.com/users/6888086/cole"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1475092181, "post_id": 39755973, "comment_id": 66808717, "body": "@kindall this is Python for .Net (I&#39;m avoiding IronPython since it uses a different interpreter)"}, {"owner": {"reputation": 63, "user_id": 6888086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b6ae21255481c9805e1580da680ead?s=128&d=identicon&r=PG&f=1", "display_name": "cole", "link": "https://stackoverflow.com/users/6888086/cole"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1475092208, "post_id": 39755973, "comment_id": 66808733, "body": "@martineau thanks a lot!"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1475092272, "post_id": 39755973, "comment_id": 66808772, "body": "<code>SortedDictionary&lt;int, bool&gt;(1, True)</code> is interpreted as two valid boolean expressions, <code>SortedDictionary &lt; int</code> and <code>bool &gt; (1, True)</code> separated by a comma, which causes a tuple of the two results to be created."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 6888086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b6ae21255481c9805e1580da680ead?s=128&d=identicon&r=PG&f=1", "display_name": "cole", "link": "https://stackoverflow.com/users/6888086/cole"}, "is_accepted": false, "score": 1, "last_activity_date": 1475092411, "creation_date": 1475092411, "answer_id": 39756514, "question_id": 39755973, "link": "https://stackoverflow.com/questions/39755973/using-sorteddictionary-for-net-imported-from-c-dll/39756514#39756514", "title": "Using SortedDictionary for .net (imported from C# .dll)", "body": "<p>\"In that case it's definitely a syntax issue. You're using C# syntax which the Python interpreter no comprende. I think you want something like SortedDictionary[int, bool] based on some coding examples I just found\" @martineau</p>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 1, "last_activity_date": 1475092866, "last_edit_date": 1475092866, "creation_date": 1475092511, "answer_id": 39756544, "question_id": 39755973, "link": "https://stackoverflow.com/questions/39755973/using-sorteddictionary-for-net-imported-from-c-dll/39756544#39756544", "title": "Using SortedDictionary for .net (imported from C# .dll)", "body": "<p>The problem is this:</p>\n\n<pre><code>SortedDictionary&lt;int, bool&gt;(1, True)\n</code></pre>\n\n<p>The <code>&lt;</code> and <code>&gt;</code> symbols in this line are being taken as <em>comparison operators.</em> Python sees you asking for two things:</p>\n\n<pre><code> SortedDictionary &lt; int\n bool &gt; (1, True)\n</code></pre>\n\n<p>The comma between these expressions makes the results into a tuple, so you get <code>(True, True)</code> as a result. (Python 2.x lets you compare anything; the result may not have any reasonable meaning, as is the case here.)</p>\n\n<p>Clearly, Python does not use the same <code>&lt;...&gt;</code> syntax as C# for generic types. Instead, you use <code>[...]</code>:</p>\n\n<pre><code>sorted_dict = SortedDictionary[int, bool](1, True)\n</code></pre>\n\n<p>This still doesn't work: you get:</p>\n\n<pre><code>TypeError: expected IDictionary[int, bool], got int\n</code></pre>\n\n<p>This is because you are trying to instantiate the class with two parameters, when it wants a single parameter that has a dictionary interface. So this will work:</p>\n\n<pre><code>sorted_dict = SortedDictionary[int, bool]({1: True})\n</code></pre>\n\n<p>Edit: I originally assumed you were using IronPython. Looks like Python for .NET uses a similar approach, so I believe the above should still work.</p>\n"}], "owner": {"reputation": 63, "user_id": 6888086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b6ae21255481c9805e1580da680ead?s=128&d=identicon&r=PG&f=1", "display_name": "cole", "link": "https://stackoverflow.com/users/6888086/cole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 39756544, "answer_count": 2, "score": 2, "last_activity_date": 1489796232, "creation_date": 1475090480, "last_edit_date": 1489796232, "question_id": 39755973, "link": "https://stackoverflow.com/questions/39755973/using-sorteddictionary-for-net-imported-from-c-dll", "title": "Using SortedDictionary for .net (imported from C# .dll)", "body": "<p>I'm currently working on a python (for .NET) project that interacts with a C# .dll. However, something is wrong with the SortedDictionary I'm importing.</p>\n\n<p>This is what I'm doing:</p>\n\n<pre><code>import clr\nfrom System.Collections.Generic import SortedDictionary\nsorted_dict = SortedDictionary&lt;int, bool&gt;(1, True)\n</code></pre>\n\n<p>I get the following error when calling Count on sorted_dict:</p>\n\n<pre><code>AttributeError: 'tuple' object has no attribute 'Count'\n</code></pre>\n\n<p>sorted_dict doesn't allow me to call any of the public member functions I see in the interface (Add, Clear, ContainsKey, etc.). Am I doing this correctly?</p>\n"}, {"tags": ["python", "excel", "xlwings"], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 1489401, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/34e6cddce3b8819f5b9c9a0edff46794?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1489401/alexander"}, "edited": false, "score": 0, "creation_date": 1475100360, "post_id": 39757304, "comment_id": 66812850, "body": "OK, it does work (of course). But I am afraid it is a little bit misleading. I thought that by using @arg I do specify the type of argument. Nevermind, this is a minor feature."}, {"owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "reply_to_user": {"reputation": 361, "user_id": 1489401, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/34e6cddce3b8819f5b9c9a0edff46794?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1489401/alexander"}, "edited": false, "score": 0, "creation_date": 1475102753, "post_id": 39757304, "comment_id": 66813617, "body": "Currently, the date converter only works on date formatted cells. I get your point thought - might be a future enhancement."}], "tags": [], "owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "is_accepted": false, "score": 2, "last_activity_date": 1475095414, "creation_date": 1475095414, "answer_id": 39757304, "question_id": 39755934, "link": "https://stackoverflow.com/questions/39755934/xlwings-date-argument-conversion/39757304#39757304", "title": "Xlwings: date argument conversion", "body": "<p>xlwings only performs the automatic transformation into a <code>datetime</code> object if the cell in Excel is formatted as a Date. That is, if you put <code>=DATE(2001,1,1)</code> into one cell and then in a different cell write <code>=fff('A1')</code>, it will work as you expect (assuming that the date formula is in A1).</p>\n"}], "owner": {"reputation": 361, "user_id": 1489401, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/34e6cddce3b8819f5b9c9a0edff46794?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1489401/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1472, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522927643, "creation_date": 1475090322, "last_edit_date": 1522927643, "question_id": 39755934, "link": "https://stackoverflow.com/questions/39755934/xlwings-date-argument-conversion", "title": "Xlwings: date argument conversion", "body": "<p>In an Excel cell I call function fff(DATE(2001,1,1)). To receive the date argument, I use (xlwings 0.10.0) the following code:</p>\n\n<pre><code>@xw.func\n@xw.arg('req_date', dates=datetime.date) # I also tried datetime.datetime\ndef fff(req_date):\n    print req_date\n</code></pre>\n\n<p>which prints just a number, not datetime object. I solved the problem by calling</p>\n\n<pre><code>req_date = datetime.datetime(1899, 12, 30)\n           + datetime.timedelta(days=req_date)\n</code></pre>\n\n<p>but I wonder what did I do wrong with the xlwings way?! </p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1475090583, "post_id": 39755958, "comment_id": 66807888, "body": "Yes; it&#39;s better to use <code>split</code> in that case. you could have explained that the regex doesn&#39;t work because <code>&#47;*</code> should be <code>&#47;.*</code> (<code>*</code> applies to the previous char)"}, {"owner": {"reputation": 43, "user_id": 6895760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e87d0dc3b5fcaa5d901f532f5f9cb6?s=128&d=identicon&r=PG", "display_name": "Billy K", "link": "https://stackoverflow.com/users/6895760/billy-k"}, "edited": false, "score": 0, "creation_date": 1475090862, "post_id": 39755958, "comment_id": 66808006, "body": "but I may have a process name without /"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 43, "user_id": 6895760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e87d0dc3b5fcaa5d901f532f5f9cb6?s=128&d=identicon&r=PG", "display_name": "Billy K", "link": "https://stackoverflow.com/users/6895760/billy-k"}, "edited": false, "score": 0, "creation_date": 1475090894, "post_id": 39755958, "comment_id": 66808019, "body": "@BillyK Both approaches will work even without a slash"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1475090933, "post_id": 39755958, "comment_id": 66808040, "body": "@Jean-Fran&#231;oisFabre Yes, but I thought they could for <code>re.sub</code> instead"}, {"owner": {"reputation": 43, "user_id": 6895760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e87d0dc3b5fcaa5d901f532f5f9cb6?s=128&d=identicon&r=PG", "display_name": "Billy K", "link": "https://stackoverflow.com/users/6895760/billy-k"}, "edited": false, "score": 0, "creation_date": 1475091237, "post_id": 39755958, "comment_id": 66808201, "body": "Well. My head was stuck in digging the regex.  Didn&#39;t think about split it.  Yes, it is a quick fix.  Thanks a lot"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 0, "last_activity_date": 1475090976, "last_edit_date": 1475090976, "creation_date": 1475090422, "answer_id": 39755958, "question_id": 39755930, "link": "https://stackoverflow.com/questions/39755930/regex-match-proc-name-without-slash/39755958#39755958", "title": "regex match proc name without slash", "body": "<p>An alternative to regex is to <code>split</code> on <em>slash</em> and take the first item:</p>\n\n<pre><code>&gt;&gt;&gt; s ='kworker/23:1'\n&gt;&gt;&gt; s.split('/')[0]\n'kworker'\n</code></pre>\n\n<p>This also works when the string does not contain a slash:</p>\n\n<pre><code>&gt;&gt;&gt; s = 'qmgr'\n&gt;&gt;&gt; s.split('/')[0]\n'qmgr'\n</code></pre>\n\n<p>But if you're going to stick to <code>re</code>, I think <code>re.sub</code> is what you want, as you won't need to fetch the <em>matching group</em>:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; s ='kworker/23:1'\n&gt;&gt;&gt; re.sub(r'/.*$', '', s)\n'kworker'\n</code></pre>\n\n<p>On a side note, assignig the name <code>str</code> shadows the in built string type, which you don't want.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 6895760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e87d0dc3b5fcaa5d901f532f5f9cb6?s=128&d=identicon&r=PG", "display_name": "Billy K", "link": "https://stackoverflow.com/users/6895760/billy-k"}, "edited": false, "score": 0, "creation_date": 1475091088, "post_id": 39756041, "comment_id": 66808113, "body": "yup... I think this works.      re.search(r&#39;^(\\w+)/?&#39;,str)"}, {"owner": {"reputation": 2709, "user_id": 5189673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a1a8d2328d31cdd52ed37dee8d91d4?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/5189673/leon"}, "reply_to_user": {"reputation": 43, "user_id": 6895760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e87d0dc3b5fcaa5d901f532f5f9cb6?s=128&d=identicon&r=PG", "display_name": "Billy K", "link": "https://stackoverflow.com/users/6895760/billy-k"}, "edited": false, "score": 0, "creation_date": 1475091221, "post_id": 39756041, "comment_id": 66808186, "body": "Works as well. Anything, that will not take the slash would work (e.g. [a-zA-Z0-9_]). <code>[^\\&#47;]</code> is just the most liberal approach, working with any character in the proc name (except a <code>&#47;</code> of course)"}], "tags": [], "owner": {"reputation": 2709, "user_id": 5189673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a1a8d2328d31cdd52ed37dee8d91d4?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/5189673/leon"}, "is_accepted": true, "score": 0, "last_activity_date": 1475090756, "creation_date": 1475090756, "answer_id": 39756041, "question_id": 39755930, "link": "https://stackoverflow.com/questions/39755930/regex-match-proc-name-without-slash/39756041#39756041", "title": "regex match proc name without slash", "body": "<p>The problem with the regex is, that the greedy <code>.+</code> is going until the end, because everything after it is optional, meaning it is kept as short as possible (essentially empty). To fix this replace the <code>.</code> with anything but a <code>/</code>.</p>\n\n<pre><code>([^\\/]+)\\/?.*\n</code></pre>\n\n<p>works. You can test this regex <a href=\"https://regex101.com/r/Z8Cixr/1\" rel=\"nofollow\">here</a>. In case it is new to you, <code>[^\\/]</code> matches anything, but a slash., as the <code>^</code> in the beginning inverts which characters are matched.</p>\n\n<p>Alternatively, you can also use <code>split</code> as suggested by Moses Koledoye. <code>split</code> is often better for simple string manipulation, while regex enables you to perform very complex tasks with rather little code.</p>\n"}], "owner": {"reputation": 43, "user_id": 6895760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e87d0dc3b5fcaa5d901f532f5f9cb6?s=128&d=identicon&r=PG", "display_name": "Billy K", "link": "https://stackoverflow.com/users/6895760/billy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 39756041, "answer_count": 2, "score": 0, "last_activity_date": 1475090976, "creation_date": 1475090293, "last_edit_date": 1475090412, "question_id": 39755930, "link": "https://stackoverflow.com/questions/39755930/regex-match-proc-name-without-slash", "title": "regex match proc name without slash", "body": "<p>I have a list of proc names on Linux.  Some have slash, some don't. For example,</p>\n\n<p><strong>kworker</strong>/23:1</p>\n<strong>migration</strong>/39</p>\n<strong>qmgr</strong></p>\n\n<p>I need to extract just the proc name without the slash and the rest.  I tried a few different ways but still won't get it completely correct.  What's wrong with my regex?  Any help would be much appreciated.</p>\n\n<pre><code>&gt;&gt;&gt; str='kworker/23:1'\n&gt;&gt;&gt; match=re.search(r'^(.+)\\/*',str)\n&gt;&gt;&gt; match.group(1)\n'kworker/23:1'\n</code></pre>\n"}, {"tags": ["python", "numpy", "memory", "setrlimit"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1498062366, "post_id": 39755928, "comment_id": 76347287, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5061582/setting-stacksize-in-a-python-script\">Setting stacksize in a python script</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1498062379, "post_id": 39755928, "comment_id": 76347292, "body": "Attempting to set <code>rlimit_stack</code> after <a href=\"http://www.openwall.com/lists/oss-security/2017/06/19/1\" rel=\"nofollow noreferrer\">Stack Clash</a> remediations may result in failure or related problems. Also see Red Hat <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1463241\" rel=\"nofollow noreferrer\">Issue 1463241</a>"}], "answers": [{"comments": [{"owner": {"reputation": 17326, "user_id": 974555, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vAAS0.png?s=128&g=1", "display_name": "gerrit", "link": "https://stackoverflow.com/users/974555/gerrit"}, "edited": false, "score": 0, "creation_date": 1475145999, "post_id": 39765583, "comment_id": 66830674, "body": "I have added some system details.  Do I need to add more?  <code>top</code> reports that I&#39;m using 379 GB virtual memory.  I don&#39;t know why, but it probably explains why the <code>RLIMIT_AS</code> version fails early.  NB: I am just a user on this server and not in a position to disable swap memory."}, {"owner": {"reputation": 8344, "user_id": 404099, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cb2550abde0be50f7830de4a8a88010e?s=128&d=identicon&r=PG", "display_name": "Ilia Barahovski", "link": "https://stackoverflow.com/users/404099/ilia-barahovski"}, "reply_to_user": {"reputation": 17326, "user_id": 974555, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vAAS0.png?s=128&g=1", "display_name": "gerrit", "link": "https://stackoverflow.com/users/974555/gerrit"}, "edited": false, "score": 0, "creation_date": 1475163214, "post_id": 39765583, "comment_id": 66843192, "body": "Yes, indeed 379GB is really strange, and it might explain the early failure. What Linux flavor the machine runs? Have you tried to <code>print peak_virtual_memory_mb()</code> before and after memory allocation? BTW, probably best not to share the hostname on public site :)"}, {"owner": {"reputation": 17326, "user_id": 974555, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vAAS0.png?s=128&g=1", "display_name": "gerrit", "link": "https://stackoverflow.com/users/974555/gerrit"}, "edited": false, "score": 0, "creation_date": 1475184388, "post_id": 39765583, "comment_id": 66854763, "body": "@It&#39;s Redhat Enterprise Linux (see edit).  I&#39;m not sure how to print the peak virtual memory."}, {"owner": {"reputation": 8344, "user_id": 404099, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cb2550abde0be50f7830de4a8a88010e?s=128&d=identicon&r=PG", "display_name": "Ilia Barahovski", "link": "https://stackoverflow.com/users/404099/ilia-barahovski"}, "reply_to_user": {"reputation": 17326, "user_id": 974555, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vAAS0.png?s=128&g=1", "display_name": "gerrit", "link": "https://stackoverflow.com/users/974555/gerrit"}, "edited": false, "score": 0, "creation_date": 1475327284, "post_id": 39765583, "comment_id": 66905317, "body": "Well. Haven&#39;t found anything on Redhat. See my answer above for the code to print VM. Or you may run memory profiler on your script - <a href=\"https://pypi.python.org/pypi/memory_profiler\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/memory_profiler</a>. I fear I have no more ideas :)"}], "tags": [], "owner": {"reputation": 8344, "user_id": 404099, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cb2550abde0be50f7830de4a8a88010e?s=128&d=identicon&r=PG", "display_name": "Ilia Barahovski", "link": "https://stackoverflow.com/users/404099/ilia-barahovski"}, "is_accepted": false, "score": 1, "last_activity_date": 1475138818, "last_edit_date": 1495540853, "creation_date": 1475138818, "answer_id": 39765583, "question_id": 39755928, "link": "https://stackoverflow.com/questions/39755928/how-do-i-use-setrlimit-to-limit-memory-usage-rlimit-as-kills-too-soon-rlimit/39765583#39765583", "title": "How do I use `setrlimit` to limit memory usage? RLIMIT_AS kills too soon; RLIMIT_DATA, RLIMIT_RSS, RLIMIT_STACK kill not at all", "body": "<p>Alas I have no answer for your question. But I hope the following might help:</p>\n\n<ul>\n<li>Your script works as expected on my system. Please share exact spec for yours, might be there is a known problem with Linux distro, kernel or even numpy...</li>\n<li>You should be OK with <code>RLIMIT_AS</code>. As explained <a href=\"https://stackoverflow.com/a/33525161/404099\">here</a> this should limit the entire virtual memory used by the process. And virtual memory includes all: swap memory, shared libraries, code and data. More details <a href=\"https://stackoverflow.com/a/21049737/404099\">here</a>.</li>\n<li><p>You may add the following function (adopted from <a href=\"https://stackoverflow.com/a/938800/404099\">this answer</a>) to your script to check actual virtual memory usage at any point:</p>\n\n<pre><code>def peak_virtual_memory_mb():\n    with open('/proc/self/status') as f:\n        status = f.readlines()\n        vmpeak = next(s for s in status if s.startswith(\"VmPeak:\"))\n        return vmpeak\n</code></pre></li>\n<li>A general advice, disable swap memory. In my experience with high performance servers it does more harm than solves problems.</li>\n</ul>\n"}], "owner": {"reputation": 17326, "user_id": 974555, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vAAS0.png?s=128&g=1", "display_name": "gerrit", "link": "https://stackoverflow.com/users/974555/gerrit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6683, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1475185034, "creation_date": 1475090285, "last_edit_date": 1495541707, "question_id": 39755928, "link": "https://stackoverflow.com/questions/39755928/how-do-i-use-setrlimit-to-limit-memory-usage-rlimit-as-kills-too-soon-rlimit", "title": "How do I use `setrlimit` to limit memory usage? RLIMIT_AS kills too soon; RLIMIT_DATA, RLIMIT_RSS, RLIMIT_STACK kill not at all", "body": "<p>I'm trying to use <code>setrlimit</code> to limit my memory usage on a Linux system, in order to stop my process from crashing the machine (my code was crashing nodes on a high performance cluster, because a bug led to memory consumption in excess of 100 GiB).  I can't seem to find the correct resource to pass to <code>setrlimit</code>; I think it should be resident, which <a href=\"https://stackoverflow.com/questions/3043709/resident-set-size-rss-limit-has-no-effect\">cannot be limited with setrlimit</a>, but I am confused by resident, heap, stack.  In the code below; if I uncomment only <code>RLIMIT_AS</code>, the code fails with <code>MemoryError</code> at <code>numpy.ones(shape=(1000, 1000, 10), dtype=\"f8\")</code> even though that array should be only 80 MB.  If I uncomment only <code>RLIMIT_DATA</code>, <code>RLIMIT_RSS</code>, or <code>RLIMIT_STACK</code> both arrays get allocated successfully, even though the total memory usage is 2 GB, or twice the desired maximum.</p>\n\n<p>I would like to make make my program fail (no matter how) as soon as it tries to allocate too much RAM.  Why do none of <code>RLIMIT_DATA</code>, <code>RLIMIT_RSS</code>, <code>RLIMIT_STACK</code> and <code>RLIMIT_AS</code> do what I mean, and what is the correct resource to pass to <code>setrlimit</code>?</p>\n\n<pre><code>$ cat mwe.py \n#!/usr/bin/env python3.5\n\nimport resource\nimport numpy\n\n#rsrc = resource.RLIMIT_AS\n#rsrc = resource.RLIMIT_DATA\n#rsrc = resource.RLIMIT_RSS\n#rsrc = resource.RLIMIT_STACK\n\nsoft, hard = resource.getrlimit(rsrc)\nprint(\"Limit starts as:\", soft, hard)\n\nresource.setrlimit(rsrc, (1e9, 1e9))\n\nsoft, hard = resource.getrlimit(rsrc)\nprint(\"Limit is now:\", soft, hard)\nprint(\"Allocating 80 KB, should certainly work\")\nM1 = numpy.arange(100*100, dtype=\"u8\")\n\nprint(\"Allocating 80 MB, should work\")\nM2 = numpy.arange(1000*1000*10, dtype=\"u8\")\n\nprint(\"Allocating 2 GB, should fail\")\nM3 = numpy.arange(1000*1000*250, dtype=\"u8\")\n\ninput(\"Still here\u2026\")\n</code></pre>\n\n<p>Output with the <code>RLIMIT_AS</code> line uncommented:</p>\n\n<pre><code>$ ./mwe.py \nLimit starts as: -1 -1\nLimit is now: 1000000000 -1\nAllocating 80 KB, should certainly work\nAllocating 80 MB, should work\nTraceback (most recent call last):\n  File \"./mwe.py\", line 22, in &lt;module&gt;\n    M2 = numpy.arange(1000*1000*10, dtype=\"u8\")\nMemoryError\n</code></pre>\n\n<p>Output when running with any of the other ones uncommented:</p>\n\n<pre><code>$ ./mwe.py \nLimit starts as: -1 -1\nLimit is now: 1000000000 -1\nAllocating 80 KB, should certainly work\nAllocating 80 MB, should work\nAllocating 2 GB, should fail\nStill here\u2026\n</code></pre>\n\n<p>At the final line, <code>top</code> reports that my process is using 379 GB VIRT, 2.0 GB RES.</p>\n\n<hr>\n\n<p>System details:</p>\n\n<pre><code>$ uname -a\nLinux host.somewhere.ac.uk 2.6.32-573.3.1.el6.x86_64 #1 SMP Mon Aug 10 09:44:54 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux\n\n$ cat /etc/redhat-release \nRed Hat Enterprise Linux Server release 6.7 (Santiago)\n\n$ free -h\n             total       used       free     shared    buffers     cached\nMem:          2.0T       1.9T        37G       1.6G       3.4G       1.8T\n-/+ buffers/cache:        88G       1.9T \nSwap:         464G       4.8M       464G \n\n$ python3.5 --version\nPython 3.5.0\n\n$ python3.5 -c \"import numpy; print(numpy.__version__)\"\n1.11.1\n</code></pre>\n"}]