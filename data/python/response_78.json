[{"tags": ["python", "dictionary", "nltk"], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 4, "last_activity_date": 1467849839, "creation_date": 1467849839, "answer_id": 38235722, "question_id": 38235672, "link": "https://stackoverflow.com/questions/38235672/extract-data-from-api-object-in-python/38235722#38235722", "title": "Extract data from API object in Python", "body": "<p>You need to call <code>r.json()</code> then access by key, .text will just give you a json string :</p>\n\n<pre><code>import requests\nr = requests.post(\"http://text-processing.com/api/sentiment/\",data={'text':'I am a good boy'})\njsn_dict = r.json()\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>jsn_dict[\"probability\"][\"neutral\"]\n</code></pre>\n\n<p>If we run the code, you will see we get what we need:</p>\n\n<pre><code>In [13]: import requests\n\nIn [14]: r = requests.post(\"http://text-processing.com/api/sentiment/\",data={'text':'I am a good boy'})\n\nIn [15]: jsn_dict = r.json()\n\nIn [16]: jsn_dict[\"probability\"][\"neutral\"]\nOut[16]: 0.14191475627838368\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5580101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kqgJM.gif?s=128&g=1", "display_name": "venkatsai", "link": "https://stackoverflow.com/users/5580101/venkatsai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 38235722, "answer_count": 1, "score": 1, "last_activity_date": 1467849975, "creation_date": 1467849485, "question_id": 38235672, "link": "https://stackoverflow.com/questions/38235672/extract-data-from-api-object-in-python", "title": "Extract data from API object in Python", "body": "<p>I am using an NLTK API to get the information by passing some text.</p>\n\n<pre><code>import requests\nr = requests.post(\"http://text-processing.com/api/sentiment/\",data={'text':'I am a good boy'})\nprint(r.text)\n</code></pre>\n\n<p>The following is the Output.</p>\n\n<pre><code>{\"probability\": {\"neg\": 0.50955199890675162, \"neutral\": 0.6850996054094568, \"pos\": 0.49044800109324838}, \"label\": \"neutral\"}\n</code></pre>\n\n<p>How do i extract only \"neutral\" from this????Please help me out.</p>\n"}, {"tags": ["python", "dataset", "tensorflow", "image-segmentation"], "comments": [{"owner": {"reputation": 2066, "user_id": 4844184, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/055c6d4adf1d157725f2d920fab121c9?s=128&d=identicon&r=PG&f=1", "display_name": "jeandut", "link": "https://stackoverflow.com/users/4844184/jeandut"}, "edited": false, "score": 1, "creation_date": 1484318833, "post_id": 38235643, "comment_id": 70474023, "body": "I think you mean patch and not batch it is confusing."}], "answers": [{"tags": [], "owner": {"reputation": 613, "user_id": 3850022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ed841c563d3c605c63872450a32a98?s=128&d=identicon&r=PG&f=1", "display_name": "Szabolcs", "link": "https://stackoverflow.com/users/3850022/szabolcs"}, "is_accepted": false, "score": 3, "last_activity_date": 1587382041, "last_edit_date": 1587382041, "creation_date": 1505232774, "answer_id": 46181172, "question_id": 38235643, "link": "https://stackoverflow.com/questions/38235643/getting-started-with-tensorflow-split-image-into-sub-images/46181172#46181172", "title": "Getting started with Tensorflow - Split image into sub-images", "body": "<p>You can use a combination of <code>reshape</code> and <code>transpose</code> calls to cut an image into tiles:</p>\n\n<pre><code>def split_image(image3, tile_size):\n    image_shape = tf.shape(image3)\n    tile_rows = tf.reshape(image3, [image_shape[0], -1, tile_size[1], image_shape[2]])\n    serial_tiles = tf.transpose(tile_rows, [1, 0, 2, 3])\n    return tf.reshape(serial_tiles, [-1, tile_size[1], tile_size[0], image_shape[2]])\n</code></pre>\n\n<p>where <code>image3</code> is a 3-dimensional tensor (e.g. an image), and <code>tile_size</code> is a pair of values <code>[H, W]</code> specifying the size of a tile. The output is a tensor with shape <code>[B, H, W, C]</code>. In your case the call would be:</p>\n\n<pre><code>tiles = split_image(image, [28, 28])\n</code></pre>\n\n<p>resulting in a tensor with shape <code>[B, 28, 28, 1]</code>. You can also reassemble the original image from the tiles by performing these operations in reverse:</p>\n\n<pre><code>def unsplit_image(tiles4, image_shape):\n    tile_width = tf.shape(tiles4)[1]\n    serialized_tiles = tf.reshape(tiles4, [-1, image_shape[0], tile_width, image_shape[2]])\n    rowwise_tiles = tf.transpose(serialized_tiles, [1, 0, 2, 3])\n    return tf.reshape(rowwise_tiles, [image_shape[0], image_shape[1], image_shape[2]])\n</code></pre>\n\n<p>Where <code>tiles4</code> is a 4D tensor of shape <code>[B, H, W, C]</code>, and <code>image_shape</code> is the shape of the original image. In your case the call could be:</p>\n\n<pre><code>image = unsplit_image(tiles, tf.shape(image))\n</code></pre>\n\n<p>Note that this only works if the image size is divisible by the tile size. If that's not the case you need to pad your image to the nearest multiple of the tile size:</p>\n\n<pre><code>def pad_image_to_tile_multiple(image3, tile_size, padding=\"CONSTANT\"):\n    imagesize = tf.shape(image3)[0:2]\n    padding_ = tf.to_int32(tf.ceil(imagesize / tile_size)) * tile_size - imagesize\n    return tf.pad(image3, [[0, padding_[0]], [0, padding_[1]], [0, 0]], padding)\n</code></pre>\n\n<p>Which you would call as such:</p>\n\n<pre><code>image = pad_image_to_tile_multiple(image, [28,28])\n</code></pre>\n\n<p>Then remove the paddig by splicing after you reassembled the image from tiles:</p>\n\n<pre><code>image = image[0:original_size[0], 0:original_size[1], :]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 416, "user_id": 5333435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3JRdjrh3rw/AAAAAAAAAAI/AAAAAAAACog/l42EkfIuhRY/photo.jpg?sz=128", "display_name": "Santi Iglesias", "link": "https://stackoverflow.com/users/5333435/santi-iglesias"}, "is_accepted": false, "score": 0, "last_activity_date": 1595197171, "creation_date": 1595197171, "answer_id": 62986307, "question_id": 38235643, "link": "https://stackoverflow.com/questions/38235643/getting-started-with-tensorflow-split-image-into-sub-images/62986307#62986307", "title": "Getting started with Tensorflow - Split image into sub-images", "body": "<p>An easy solution to crop a batch of images (-1, X, Y, 3) in N pieces:</p>\n<pre><code>crops = tf.reshape(tensor_images, (-1, N, tensor_images.shape[1]//N, N, tensor_images.shape[2]//N, tensor_images.shape[3]))\ncrops = tf.transpose(crops, [0, 1, 3, 2, 4, 5])\n</code></pre>\n<p>Check the solution like this:</p>\n<pre><code>def show_images(segs, x, y):\n  fig, axs = plt.subplots(x, y, figsize=(x*2, y*2))\n  for i in range(x):\n    for j in range(y):\n      axs[i, j].imshow(segs[i][j], cmap=plt.cm.binary, vmin=0, vmax=1)\n  plt.show()\n  plt.close()\ntensor_images = tf.convert_to_tensor(image_batch, dtype=tf.float32)\ncrops = tf.reshape(tensor_images, (-1, 8, tensor_images.shape[1]//8, 8,\ntensor_images.shape[2]//8, tensor_images.shape[3]))\ncrops = tf.transpose(crops, [0, 1, 3, 2, 4, 5])\nshow_images(crops.numpy()[0], 8, 8)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6558381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/891be2959f06588f9ff3540b526d7240?s=128&d=identicon&r=PG&f=1", "display_name": "Emme", "link": "https://stackoverflow.com/users/6558381/emme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3889, "favorite_count": 4, "answer_count": 2, "score": 4, "last_activity_date": 1595197171, "creation_date": 1467849236, "last_edit_date": 1484553723, "question_id": 38235643, "link": "https://stackoverflow.com/questions/38235643/getting-started-with-tensorflow-split-image-into-sub-images", "title": "Getting started with Tensorflow - Split image into sub-images", "body": "<p>This is my very first time using a Convolutional Neural Networks and Tensorflow.</p>\n\n<p>I am trying to implement a convolutional neural network that is able to <b>extract</b> vessels from Digital Retinal Images. I am working with the publicly available <a href=\"http://www.isi.uu.nl/Research/Databases/DRIVE/\" rel=\"nofollow noreferrer\">Drive database</a> (images are in .tif format).</p>\n\n<p>Since my images are very large my idea is to split them into sub-images of size 28x28x1 (The \"1\" is the green channel, the only one I need). To create the training set I randomly crop a 28x28 batch iteratively from each image, and train the network on this set.</p>\n\n<p>Now, I would like to test my trained network on one of the large images in the database (that is, I want to apply the network to a complete eye). Since my network is trained on sub-images of size 28x28 the idea is to split the eye in 'n' sub-images, pass them throw the network, reassemble them and show the result as show in Fig1:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Na8a.jpg\" rel=\"nofollow noreferrer\">Fig1</a> </p>\n\n<p>I tried using some functions like:\n<code>tf.extract_image_pathces</code> or <code>tf.train.batch</code>, but I would like to know what is the right method to do this.</p>\n\n<p>Below is a snippet of my code. The function where I am stuck is <code>split_image(image)</code></p>\n\n<pre><code>import numpy\nimport os\nimport random\n\nfrom PIL import Image\nimport tensorflow as tf\n\nBATCH_WIDTH = 28;\nBATCH_HEIGHT = 28;\n\nNUM_TRIALS = 10;\n\nclass Drive:\n    def __init__(self,train):\n        self.train = train\n\nclass Dataset:\n    def __init__(self, inputs, labels):\n        self.inputs = inputs\n        self.labels = labels\n        self.current_batch = 0\n\n    def next_batch(self):\n        batch = self.inputs[self.current_batch], self.labels[self.current_batch]\n        self.current_batch = (self.current_batch + 1) % len(self.inputs)\n        return batch\n\n\n#counts the number of black pixel in the batch\ndef mostlyBlack(image):\n    pixels = image.getdata()\n    black_thresh = 50\n    nblack = 0\n    for pixel in pixels:\n        if pixel &lt; black_thresh:\n            nblack += 1\n\n    return nblack / float(len(pixels)) &gt; 0.5\n\n#crop the image starting from a random point\ndef cropImage(image, label):\n    width  = image.size[0]\n    height = image.size[1]\n    x = random.randrange(0, width - BATCH_WIDTH)\n    y = random.randrange(0, height - BATCH_HEIGHT)\n    image = image.crop((x, y, x + BATCH_WIDTH, y + BATCH_HEIGHT)).split()[1]\n    label = label.crop((x, y, x + BATCH_WIDTH, y + BATCH_HEIGHT)).split()[0]\n    return image, label\n\ndef split_image(image):\n\n    ksizes_ = [1, BATCH_WIDTH, BATCH_HEIGHT, 1]\n    strides_ = [1, BATCH_WIDTH, BATCH_HEIGHT, 1]\n\n    input = numpy.array(image.split()[1])\n    #input = tf.reshape((input), [image.size[0], image.size[1]])\n\n    #input = tf.train.batch([input],batch_size=1)\n    split = tf.extract_image_patches(input, padding='VALID', ksizes=ksizes_, strides=strides_, rates=[1,28,28,1], name=\"asdk\")\n\n#creates NUM_TRIALS images from a dataset\ndef create_dataset(images_path, label_path):\n    files = os.listdir(images_path)\n    label_files = os.listdir(label_path)\n\n    images = [];\n    labels = [];\n    t = 0\n    while t &lt; NUM_TRIALS:\n        index = random.randrange(0, len(files))\n        if files[index].endswith(\".tif\"):\n            image_filename = images_path + files[index]\n            label_filename = label_path  + label_files[index]\n            image = Image.open(image_filename)\n            label = Image.open(label_filename)\n            image, label = cropImage(image, label)\n            if not mostlyBlack(image):\n                #images.append(tf.convert_to_tensor(numpy.array(image)))\n                #labels.append(tf.convert_to_tensor(numpy.array(label)))\n                images.append(numpy.array(image))\n                labels.append(numpy.array(label))\n\n                t+=1\n\n    image = Image.open(images_path + files[1])\n    split_image(image)\n\n    train = Dataset(images, labels)\n    return Drive(train)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467849012, "post_id": 38235566, "comment_id": 63892709, "body": "Offhand, I do not see here &quot;any sort of <code>main</code> routine&quot; that a <i>command-line(!)</i> execution of <code>python</code> would be expected to pick-up on. Here, you define &quot;a class,&quot; and you define a constructor for that class, <i>and</i> it seems that you&#39;ve also tossed-in a <code>print</code> statement, but I don&#39;t see anything here that tells <code>python</code> what is supposed to be done when this <code>.py</code> file is executed from the command line. Therefore, I&#39;m not surprised that it does nothing. <b>:-)</b> &quot;Go thee now, and take a look,&quot; at some existing Python <i>(library)</i> code. Notice what they do, and do thee likewise."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1467849296, "post_id": 38235566, "comment_id": 63892785, "body": "That is really bizarre... It seems like <code>sys.modules[self.__class__.__module__].__file__</code> should just give you <code>__file__</code>..."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1467852637, "post_id": 38235566, "comment_id": 63893600, "body": "What is the proper indentation level of the final <code>print</code>? Is it part of the <code>class</code> definition or part of the <code>__init__()</code> method\u2014because as posted it&#39;s an indentation error."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467854747, "post_id": 38235566, "comment_id": 63894075, "body": "@Mike: If the final <code>print()</code> is part of the <code>class</code> definition (and not part of the <code>__init__()</code> method), running the script will execute it when the class definition executes. Regardless, it looks like @mgilson is correct, it&#39;s just an convoluted way to get <code>__file__</code>."}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467854834, "post_id": 38235566, "comment_id": 63894099, "body": "Yup ... think I agree with ye ..."}, {"owner": {"reputation": 1011, "user_id": 3924113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RhGO9.png?s=128&g=1", "display_name": "calico_", "link": "https://stackoverflow.com/users/3924113/calico"}, "edited": false, "score": 0, "creation_date": 1612223879, "post_id": 38235566, "comment_id": 116694939, "body": "I found this answer after trying something similar. One thing to consider, <code>__file__</code> returns the  path of the module for this class. But, when inheriting from <code>testloadfile</code>, you might want the path of the child class. I think the code above is the only way to do that. It looks bizarre, but I think it&#39;s necessary."}], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 1, "last_activity_date": 1467900218, "last_edit_date": 1467900218, "creation_date": 1467861336, "answer_id": 38237055, "question_id": 38235566, "link": "https://stackoverflow.com/questions/38235566/understanding-and-testing-self-class-module-file/38237055#38237055", "title": "Understanding and testing [self._class_._module_]._file_", "body": "<p>Classes in python have a <code>__module__</code> attribute which contains the name of the module in which the class was defined. Additionally, each module contains a <a href=\"https://docs.python.org/3.5/reference/import.html#__file__\" rel=\"nofollow\"><strong><code>__file__</code></strong></a> attribute which has the full path to the <code>.py</code> file. </p>\n\n<p>He is trying to get the file path for the file in which the class was defined but he's not going the best way with doing it, ideally you could just index <a href=\"https://docs.python.org/3/library/sys.html#sys.modules\" rel=\"nofollow\"><strong><code>sys.modules</code></strong></a> by using <a href=\"https://docs.python.org/3.5/reference/import.html#__name__\" rel=\"nofollow\"><strong><code>__name__</code></strong></a>:</p>\n\n<pre><code>path = sys.modules[__name__].__file__ \n</code></pre>\n\n<p>instead of going through the class (i.e <code>self.__class__.__module__ == __name__</code>). Do note here that <code>if __name__ == \"__main__\"</code> this will fail because the <a href=\"https://docs.python.org/3.5/library/__main__.html#module-__main__\" rel=\"nofollow\"><code>__main__</code></a> module does not have a <code>__file__</code> attribute defined. You'll need to safeguard against it:</p>\n\n<pre><code>path = sys.modules[__name__].__file__ if __name__ == \"__main__\" else __file__\n</code></pre>\n\n<p>where <code>if __name__ == \"__main__\"</code> then <code>__file__</code> will contain the path of the file being executed. </p>\n\n<p>Next, add the usual clause in your script in order for it to initialize the object if the script is running as <code>__main__</code>:</p>\n\n<pre><code>if __name__ == \"__main__\":\n    testloadfile()  # initialize\n</code></pre>\n\n<p>Now, if you call it as the <code>__main__</code> script with:</p>\n\n<pre><code>python -m test.py \n</code></pre>\n\n<p>or if you <code>import</code> it, it will pickup the <code>__file__</code> attribute, print it and then print the file name.</p>\n\n<p><strong>P.s</strong>: Fix the indentation in your final <code>print</code>.</p>\n"}], "owner": {"reputation": 4199, "user_id": 785099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/969c836471cfffdce595c51104a5768b?s=128&d=identicon&r=PG", "display_name": "user785099", "link": "https://stackoverflow.com/users/785099/user785099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 1, "accepted_answer_id": 38237055, "answer_count": 1, "score": 1, "last_activity_date": 1467900218, "creation_date": 1467848694, "last_edit_date": 1467899772, "question_id": 38235566, "link": "https://stackoverflow.com/questions/38235566/understanding-and-testing-self-class-module-file", "title": "Understanding and testing [self._class_._module_]._file_", "body": "<p>When reading a python-based software, I feel confused about a line of python code: <code>path = sys.modules[self.__class__.__module__].__file__</code>. </p>\n\n<p>I can guess it was trying to return the file name in class file, but I'm not very clear about the exact usage of this.  I saved the related code segment into a file named <code>test.py</code> and I'm trying to test it by <code>python test.py</code>, but it does not print anything. How can I test this kind of file?</p>\n\n<pre><code>import os\nimport sys\n\nclass testloadfile:\n  def __init__(self, test_path=None):\n     if test_path is None:\n        path = sys.modules[self.__class__.__module__].__file__\n        # print path\n        path = os.path.abspath(os.path.join(path, os.pardir))\n        # print path\n        path = os.path.join(path, \"test.r\")\n        print(path)\n        test_path = path\n\n    print(\"r file loaded\")  \n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 1, "user_id": 6384734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M9MGOId4Z4Y/AAAAAAAAAAI/AAAAAAAAAPY/dGV9mct7SXw/photo.jpg?sz=128", "display_name": "KARAN JAIN", "link": "https://stackoverflow.com/users/6384734/karan-jain"}, "edited": false, "score": 0, "creation_date": 1481621483, "post_id": 38235555, "comment_id": 69443207, "body": "Just to add one thing. You will have to add initializer to scan function , to the size of the output of your two matrix multiplications, U*x"}, {"owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "edited": false, "score": 0, "creation_date": 1494148072, "post_id": 38235555, "comment_id": 74696662, "body": "Currently <a href=\"http://stackoverflow.com/a/43829731/1090562\">tf.matmul</a> is the right way to do batch multiplication."}], "answers": [{"comments": [{"owner": {"reputation": 1568, "user_id": 635622, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8a221827305369c01efda589968df362?s=128&d=identicon&r=PG", "display_name": "yoki", "link": "https://stackoverflow.com/users/635622/yoki"}, "edited": false, "score": 0, "creation_date": 1467926693, "post_id": 38244353, "comment_id": 63932104, "body": "Thank you! I do care about efficiency. How much should I avoid option 1, or does tensorflow (with GPU etc) do that efficiently more or less?  About option 2, I lose some of the matrix structure this way, right? I&#39;m surprised there&#39;s no support for this operation. Is it not a common operation?"}, {"owner": {"reputation": 2556, "user_id": 118173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80009e9d6d8947af413342700d2c13d2?s=128&d=identicon&r=PG", "display_name": "Styrke", "link": "https://stackoverflow.com/users/118173/styrke"}, "reply_to_user": {"reputation": 1568, "user_id": 635622, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8a221827305369c01efda589968df362?s=128&d=identicon&r=PG", "display_name": "yoki", "link": "https://stackoverflow.com/users/635622/yoki"}, "edited": false, "score": 0, "creation_date": 1467928283, "post_id": 38244353, "comment_id": 63932741, "body": "@yoki Unless I made some mistake the results from the two approaches should be completely identical after the second reshape in option 2. I mainly included option 1 because it may be easier to understand how and why it works. I don&#39;t think what you&#39;re doing is very common outside of recurrent networks. (Which is one of the main uses of <code>scan</code>.) I noticed there&#39;s a <a href=\"https://www.tensorflow.org/versions/master/api_docs/python/math_ops.html#batch_matmul\" rel=\"nofollow noreferrer\"><code>batch_matmul</code></a> operation that you could also use, but you would need to create a lot of copies of your <code>U</code> matrix to use that."}, {"owner": {"reputation": 2556, "user_id": 118173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80009e9d6d8947af413342700d2c13d2?s=128&d=identicon&r=PG", "display_name": "Styrke", "link": "https://stackoverflow.com/users/118173/styrke"}, "reply_to_user": {"reputation": 1568, "user_id": 635622, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8a221827305369c01efda589968df362?s=128&d=identicon&r=PG", "display_name": "yoki", "link": "https://stackoverflow.com/users/635622/yoki"}, "edited": false, "score": 1, "creation_date": 1467929547, "post_id": 38244353, "comment_id": 63933199, "body": "@yoki Actually now that I am thinking about it, the thing you&#39;re trying to do probably doesn&#39;t really make a difference. Because matrix multiplication is associative, you would get the exact same result by multiplying <code>W</code> with <code>U</code> before you do the embedding lookup and then looking up the embeddings in that product. So unless you&#39;re doing something exotic that I don&#39;t know about, the most effective approach would be to simply define a single matrix that represents <code>WU</code> instead of actually defining both and then multiplying them together."}, {"owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "edited": false, "score": 6, "creation_date": 1496318006, "post_id": 38244353, "comment_id": 75618642, "body": "This answer is <a href=\"https://stackoverflow.com/a/43829731/656912\">obsolete</a>."}, {"owner": {"reputation": 2622, "user_id": 5107084, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64c5e71c2718a074d65b1a85b4b2f1a0?s=128&d=identicon&r=PG&f=1", "display_name": "kwotsin", "link": "https://stackoverflow.com/users/5107084/kwotsin"}, "edited": false, "score": 1, "creation_date": 1534320182, "post_id": 38244353, "comment_id": 90662345, "body": "Using <code>tf.matmul</code> supports batch matmul. For some 3D tensors, perform matmul considering only the axes that are not the batch axis. e.g. If <code>A</code> has size <code>(N, T, D)</code> and <code>B</code> has size <code>(N, D, V)</code>, disregarding batch axis 0 (indicated by N), our <code>tf.matmul(A, B)</code> gives shape <code>(N, T, V)</code> just like what matmul with tensors of shape <code>(T, D) and (D, V)</code> would give you a tensor of <code>(T, V)</code>."}, {"owner": {"reputation": 915, "user_id": 6569803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ec911c8581d51827067b7bf0bcf7c368?s=128&d=identicon&r=PG&f=1", "display_name": "antonioACR1", "link": "https://stackoverflow.com/users/6569803/antonioacr1"}, "edited": false, "score": 0, "creation_date": 1535860191, "post_id": 38244353, "comment_id": 91217965, "body": "Deprecated answer :)"}], "tags": [], "owner": {"reputation": 2556, "user_id": 118173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80009e9d6d8947af413342700d2c13d2?s=128&d=identicon&r=PG", "display_name": "Styrke", "link": "https://stackoverflow.com/users/118173/styrke"}, "is_accepted": true, "score": 17, "last_activity_date": 1494316828, "last_edit_date": 1494316828, "creation_date": 1467891069, "answer_id": 38244353, "question_id": 38235555, "link": "https://stackoverflow.com/questions/38235555/tensorflow-matmul-of-input-matrix-with-batch-data/38244353#38244353", "title": "Tensorflow - matmul of input matrix with batch data", "body": "<p>The <a href=\"https://www.tensorflow.org/api_docs/python/tf/matmul\" rel=\"noreferrer\">matmul operation</a> only works on matrices (2D tensors). Here are two main approaches to do this, both assume that <code>U</code> is a 2D tensor.</p>\n\n<ol>\n<li><p>Slice <code>embed</code> into 2D tensors and multiply each of them with <code>U</code> individually. This is probably easiest to do using <a href=\"https://www.tensorflow.org/api_docs/python/tf/scan\" rel=\"noreferrer\"><code>tf.scan()</code></a> like this:</p>\n\n<pre><code>h = tf.scan(lambda a, x: tf.matmul(x, U), embed)\n</code></pre></li>\n<li><p>On the other hand if efficiency is important it may be better to reshape <code>embed</code> to be a 2D tensor so the multiplication can be done with a single <code>matmul</code> like this:</p>\n\n<pre><code>embed = tf.reshape(embed, [-1, m])\nh = tf.matmul(embed, U)\nh = tf.reshape(h, [-1, n, c])\n</code></pre>\n\n<p>where <code>c</code> is the number of columns in <code>U</code>. The last reshape will make sure that <code>h</code> is a 3D tensor where the 0th dimension corresponds to the batch just like the original <code>x_input</code> and <code>embed</code>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 4111187, "user_type": "registered", "profile_image": "https://graph.facebook.com/1497064077/picture?type=large", "display_name": "Desh Raj", "link": "https://stackoverflow.com/users/4111187/desh-raj"}, "is_accepted": false, "score": 4, "last_activity_date": 1485972259, "creation_date": 1485972259, "answer_id": 41986618, "question_id": 38235555, "link": "https://stackoverflow.com/questions/38235555/tensorflow-matmul-of-input-matrix-with-batch-data/41986618#41986618", "title": "Tensorflow - matmul of input matrix with batch data", "body": "<p>As answered by @Stryke, there are two ways to achieve this: 1. Scanning, and 2. Reshaping</p>\n\n<ol>\n<li><p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/api_docs/python/functions_and_classes/shard9/tf.scan.md\" rel=\"nofollow noreferrer\">tf.scan</a> requires lambda functions and is generally used for recursive operations. Some examples for the same are here: <a href=\"https://rdipietro.github.io/tensorflow-scan-examples/\" rel=\"nofollow noreferrer\">https://rdipietro.github.io/tensorflow-scan-examples/</a></p></li>\n<li><p>I personally prefer reshaping, since it is more intuitive. If you are trying to matrix multiply each matrix in the 3D tensor by the matrix that is the 2D tensor, like Cijl = Aijk * Bkl, you can do it with a simple reshape.</p>\n\n<pre><code>A' = tf.reshape(Aijk,[i*j,k])\nC' = tf.matmul(A',Bkl)\nC = tf.reshape(C',[i,j,l])\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 166, "user_id": 6454066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11fa58a7ab0d661744186d02748cee9d?s=128&d=identicon&r=PG&f=1", "display_name": "KarlSt", "link": "https://stackoverflow.com/users/6454066/karlst"}, "edited": false, "score": 6, "creation_date": 1499588345, "post_id": 43829731, "comment_id": 76963010, "body": "What is the correct way to do this if, like in the question, you want to multiply one matrix with many others? Do you have to replicate (tile) the single matrix batch_sizetimes or is there a better way?"}, {"owner": {"reputation": 320, "user_id": 1599349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bee5b1f3eddbc3628ef24217bacd6d?s=128&d=identicon&r=PG", "display_name": "sirgogo", "link": "https://stackoverflow.com/users/1599349/sirgogo"}, "reply_to_user": {"reputation": 166, "user_id": 6454066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11fa58a7ab0d661744186d02748cee9d?s=128&d=identicon&r=PG&f=1", "display_name": "KarlSt", "link": "https://stackoverflow.com/users/6454066/karlst"}, "edited": false, "score": 2, "creation_date": 1499907622, "post_id": 43829731, "comment_id": 77112653, "body": "@KarlSt Based on my experiments, this doesn&#39;t work when the first N-2 dimensions do not match. Clearly, the numpy version of this command supports broadcasting, but I think the only way to do it in TF is to tile the single matrix batch_size times. I have even tried playing transpose tricks (so it looks like the matrix is [batch_size, n, m] and second matrix is [1, m, k]), no luck. I&#39;m not sure it can be called a bug, but clearly, this should be implemented in TF since its such a common operation."}, {"owner": {"reputation": 166, "user_id": 6454066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11fa58a7ab0d661744186d02748cee9d?s=128&d=identicon&r=PG&f=1", "display_name": "KarlSt", "link": "https://stackoverflow.com/users/6454066/karlst"}, "edited": false, "score": 0, "creation_date": 1499946371, "post_id": 43829731, "comment_id": 77131592, "body": "I found a better way here: <a href=\"https://groups.google.com/a/tensorflow.org/forum/#!topic/discuss/4tgsOSxwtkY\" rel=\"nofollow noreferrer\">groups.google.com/a/tensorflow.org/forum/#!topic/discuss/&hellip;</a>  You can conflate the two dimensions not used in the multiplication using reshape, multiply the two matrices, and then call reshape again to get the desired shape. This is equivalent to doing batch multiplication."}, {"owner": {"reputation": 267, "user_id": 2105525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2AGIx.png?s=128&g=1", "display_name": "Akababa", "link": "https://stackoverflow.com/users/2105525/akababa"}, "edited": false, "score": 3, "creation_date": 1543449572, "post_id": 43829731, "comment_id": 93928356, "body": "This doesn&#39;t seem to answer the original question"}, {"owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "reply_to_user": {"reputation": 267, "user_id": 2105525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2AGIx.png?s=128&g=1", "display_name": "Akababa", "link": "https://stackoverflow.com/users/2105525/akababa"}, "edited": false, "score": 0, "creation_date": 1543450409, "post_id": 43829731, "comment_id": 93928541, "body": "@Akababa look closer and you will see that it exactly answers it. I even provided the code which shows you how to do it."}, {"owner": {"reputation": 800, "user_id": 7281675, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e5051a7115b414b6f7f069073dfc12de?s=128&d=identicon&r=PG&f=1", "display_name": "keramat", "link": "https://stackoverflow.com/users/7281675/keramat"}, "edited": false, "score": 1, "creation_date": 1548518053, "post_id": 43829731, "comment_id": 95573422, "body": "@Salvador Dali you means that the we add another dimension to B? because we want to multiply A(batch size, n, m) with a weight matrix B (m, k)."}], "tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": false, "score": 84, "last_activity_date": 1494148032, "creation_date": 1494148032, "answer_id": 43829731, "question_id": 38235555, "link": "https://stackoverflow.com/questions/38235555/tensorflow-matmul-of-input-matrix-with-batch-data/43829731#43829731", "title": "Tensorflow - matmul of input matrix with batch data", "body": "<p>Previous answers are obsolete. Currently <a href=\"https://www.tensorflow.org/api_docs/python/tf/matmul\" rel=\"noreferrer\"><code>tf.matmul()</code></a> support tensors with rank > 2:</p>\n\n<blockquote>\n  <p>The inputs must be matrices (or tensors of rank > 2, representing\n  batches of matrices), with matching inner dimensions, possibly after\n  transposition.</p>\n</blockquote>\n\n<p>Also <code>tf.batch_matmul()</code> was removed and <code>tf.matmul()</code> is the right way to do batch multiplication. The main idea can be understood from the following code:</p>\n\n<pre><code>import tensorflow as tf\nbatch_size, n, m, k = 10, 3, 5, 2\nA = tf.Variable(tf.random_normal(shape=(batch_size, n, m)))\nB = tf.Variable(tf.random_normal(shape=(batch_size, m, k)))\ntf.matmul(A, B)\n</code></pre>\n\n<p>Now you will receive a tensor of the shape <code>(batch_size, n, k)</code>. Here is what is going on here. Assume you have <code>batch_size</code> of matrices <code>nxm</code> and <code>batch_size</code> of matrices <code>mxk</code>. Now for each pair of them you calculate <code>nxm X mxk</code> which gives you an <code>nxk</code> matrix. You will have <code>batch_size</code> of them.</p>\n\n<p>Notice that something like this is also valid:</p>\n\n<pre><code>A = tf.Variable(tf.random_normal(shape=(a, b, n, m)))\nB = tf.Variable(tf.random_normal(shape=(a, b, m, k)))\ntf.matmul(A, B)\n</code></pre>\n\n<p>and will give you a shape <code>(a, b, n, k)</code></p>\n"}, {"comments": [{"owner": {"reputation": 1136, "user_id": 6084245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a9d8725b1bb91943421a0615a94839be?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/6084245/robin"}, "edited": false, "score": 1, "creation_date": 1546441427, "post_id": 51326380, "comment_id": 94853744, "body": "This is the best answer since it actually answers the question (in part 3)"}, {"owner": {"reputation": 551, "user_id": 3366323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRe6K.jpg?s=128&g=1", "display_name": "MohammadReza", "link": "https://stackoverflow.com/users/3366323/mohammadreza"}, "edited": false, "score": 0, "creation_date": 1570032674, "post_id": 51326380, "comment_id": 102788819, "body": "<code>tf.matmul()</code> can now simply handle case 3."}], "tags": [], "owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "is_accepted": false, "score": 33, "last_activity_date": 1539897284, "last_edit_date": 1539897284, "creation_date": 1531488844, "answer_id": 51326380, "question_id": 38235555, "link": "https://stackoverflow.com/questions/38235555/tensorflow-matmul-of-input-matrix-with-batch-data/51326380#51326380", "title": "Tensorflow - matmul of input matrix with batch data", "body": "<h2>1. I want to multiply a batch of matrices with a batch of matrices of the same length, pairwise</h2>\n\n<pre><code>M = tf.random_normal((batch_size, n, m))\nN = tf.random_normal((batch_size, m, p))\n\n# python &gt;= 3.5\nMN = M @ N\n# or the old way,\nMN = tf.matmul(M, N)\n# MN has shape (batch_size, n, p)\n</code></pre>\n\n<h2>2. I want to multiply a batch of matrices with a batch of vectors of the same length, pairwise</h2>\n\n<p>We fall back to case 1 by adding and removing a dimension to <code>v</code>.</p>\n\n<pre><code>M = tf.random_normal((batch_size, n, m))\nv = tf.random_normal((batch_size, m))\n\nMv = (M @ v[..., None])[..., 0]\n# Mv has shape (batch_size, n)\n</code></pre>\n\n<h2>3. I want to multiply a single matrix with a batch of matrices</h2>\n\n<p>In this case, we cannot simply add a batch dimension of <code>1</code> to the single matrix, because <code>tf.matmul</code> does not broadcast in the batch dimension.</p>\n\n<h3>3.1. The single matrix is on the right side</h3>\n\n<p>In that case, we can treat the matrix batch as a single large matrix, using a simple reshape.</p>\n\n<pre><code>M = tf.random_normal((batch_size, n, m))\nN = tf.random_normal((m, p))\n\nMN = tf.reshape(tf.reshape(M, [-1, m]) @ N, [-1, n, p])\n# MN has shape (batch_size, n, p)\n</code></pre>\n\n<h3>3.2. The single matrix is on the left side</h3>\n\n<p>This case is more complicated. We can fall back to case 3.1 by transposing the matrices.</p>\n\n<pre><code>MT = tf.matrix_transpose(M)\nNT = tf.matrix_transpose(N)\nNTMT = tf.reshape(tf.reshape(NT, [-1, m]) @ MT, [-1, p, n])\nMN = tf.matrix_transpose(NTMT)\n</code></pre>\n\n<p>However, transposition can be a costly operation, and here it is done twice on an entire batch of matrices. It may be better to simply duplicate <code>M</code> to match the batch dimension:</p>\n\n<pre><code>MN = tf.tile(M[None], [batch_size, 1, 1]) @ N\n</code></pre>\n\n<p>Profiling will tell which option works better for a given problem/hardware combination.</p>\n\n<h2>4. I want to multiply a single matrix with a batch of vectors</h2>\n\n<p>This looks similar to case 3.2 since the single matrix is on the left, but it is actually simpler because transposing a vector is essentially a no-op. We end-up with</p>\n\n<pre><code>M = tf.random_normal((n, m))\nv = tf.random_normal((batch_size, m))\n\nMT = tf.matrix_transpose(M)\nMv = v @ MT\n</code></pre>\n\n<h1>What about <code>einsum</code>?</h1>\n\n<p>All of the previous multiplications could have been written with the <a href=\"https://www.tensorflow.org/versions/r1.8/api_docs/python/tf/einsum\" rel=\"noreferrer\"><code>tf.einsum</code></a> swiss army knife. For example the first solution for 3.2 could be written simply as</p>\n\n<pre><code>MN = tf.einsum('nm,bmp-&gt;bnp', M, N)\n</code></pre>\n\n<p>However, note that <code>einsum</code> is ultimately <a href=\"https://stackoverflow.com/a/43104527\">relying on <code>tranpose</code> and <code>matmul</code></a> for the computation.</p>\n\n<p>So even though <code>einsum</code> is a very convenient way to write matrix multiplications, it hides the complexity of the operations underneath \u2014 for example it is not straightforward to guess how many times an <code>einsum</code> expression will transpose your data, and therefore how costly the operation will be. Also, it may hide the fact that there could be several alternatives for the same operation (see case 3.2) and might not necessarily choose the better option.</p>\n\n<p>For this reason, I would personally use explicit formulas like those above to better convey their respective complexity. Although if you know what you are doing and like the simplicity of the <code>einsum</code> syntax, then by all means go for it.</p>\n"}, {"tags": [], "owner": {"reputation": 1208, "user_id": 1762351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9vAfS.jpg?s=128&g=1", "display_name": "James Fletcher", "link": "https://stackoverflow.com/users/1762351/james-fletcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1541080212, "creation_date": 1541080212, "answer_id": 53102667, "question_id": 38235555, "link": "https://stackoverflow.com/questions/38235555/tensorflow-matmul-of-input-matrix-with-batch-data/53102667#53102667", "title": "Tensorflow - matmul of input matrix with batch data", "body": "<p>It seems that in TensorFlow 1.11.0 the <a href=\"https://www.tensorflow.org/api_docs/python/tf/matmul\" rel=\"nofollow noreferrer\">docs</a> for <code>tf.matmul</code> incorrectly say that it works for rank >= 2.</p>\n\n<p>Instead, the best clean alternative I've found is to use <code>tf.tensordot(a, b, (-1, 0))</code> (<a href=\"https://www.tensorflow.org/api_docs/python/tf/tensordot\" rel=\"nofollow noreferrer\">docs</a>).</p>\n\n<p>This function gets the dot product of any axis of array <code>a</code> and any axis of array <code>b</code> in its general form <code>tf.tensordot(a, b, axis)</code>. Providing <code>axis</code> as <code>(-1, 0)</code> gets the standard dot product of two arrays.</p>\n"}], "owner": {"reputation": 1568, "user_id": 635622, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8a221827305369c01efda589968df362?s=128&d=identicon&r=PG", "display_name": "yoki", "link": "https://stackoverflow.com/users/635622/yoki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42485, "favorite_count": 21, "accepted_answer_id": 38244353, "answer_count": 5, "score": 42, "last_activity_date": 1541080212, "creation_date": 1467848611, "last_edit_date": 1520926033, "question_id": 38235555, "link": "https://stackoverflow.com/questions/38235555/tensorflow-matmul-of-input-matrix-with-batch-data", "title": "Tensorflow - matmul of input matrix with batch data", "body": "<p>I have some data represented by <code>input_x</code>. It is a tensor of unknown size (should be inputted by batch) and each item there is of size <code>n</code>. <code>input_x</code> undergoes <code>tf.nn.embedding_lookup</code>, so that <code>embed</code> now has dimensions <code>[?, n, m]</code> where <code>m</code> is the embedding size and <code>?</code> refers to the unknown batch size. </p>\n\n<p>This is described here:</p>\n\n<pre><code>input_x = tf.placeholder(tf.int32, [None, n], name=\"input_x\") \nembed = tf.nn.embedding_lookup(W, input_x)\n</code></pre>\n\n<p>I'm now trying to multiply each sample in my input data (which is now expanded by embedding dimension) by a matrix variable, <code>U</code>, and I can't seem to get how to do that.</p>\n\n<p>I first tried using <code>tf.matmul</code> but it gives an error due to mismatch in shapes. I then tried the following, by expanding the dimension of <code>U</code> and applying <code>batch_matmul</code> (I also tried the function from <code>tf.nn.math_ops.</code>, the result was the same):</p>\n\n<pre><code>U = tf.Variable( ... )    \nU1 = tf.expand_dims(U,0)\nh=tf.batch_matmul(embed, U1)\n</code></pre>\n\n<p>This passes the initial compilation, but then when actual data is applied, I get the following error:</p>\n\n<p><code>In[0].dim(0) and In[1].dim(0) must be the same: [64,58,128] vs [1,128,128]</code></p>\n\n<p>I also know why this is happening - I replicated the dimension of <code>U</code> and it is now <code>1</code>, but the minibatch size, <code>64</code>, doesn't fit. </p>\n\n<p>How can I do that matrix multiplication on my tensor-matrix input correctly (for unknown batch size)?</p>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1467848694, "post_id": 38235520, "comment_id": 63892617, "body": "You forgot to commit."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1467848775, "post_id": 38235520, "comment_id": 63892636, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1387573/mysql-insert-data-does-not-get-stored-in-proper-db-only-temporary\">MySQL INSERT data does not get stored in proper db, only temporary?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 388, "user_id": 4042486, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-aT_LVHAPlQg/AAAAAAAAAAI/AAAAAAAAASM/N3AXlLcfOe0/photo.jpg?sz=128", "display_name": "Cloud", "link": "https://stackoverflow.com/users/4042486/cloud"}, "is_accepted": true, "score": 0, "last_activity_date": 1467848707, "creation_date": 1467848707, "answer_id": 38235570, "question_id": 38235520, "link": "https://stackoverflow.com/questions/38235520/python-dont-register-in-mysql-server/38235570#38235570", "title": "Python don&#39;t register in MySQL server", "body": "<p>You will need to add <code>conn.commit()</code> before <code>conn.close()</code>. That should solve the problem. </p>\n"}], "owner": {"reputation": 86, "user_id": 4564365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a76e2242e3a6e2731e123a3da79013a?s=128&d=identicon&r=PG&f=1", "display_name": "Racerider", "link": "https://stackoverflow.com/users/4564365/racerider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 38235570, "answer_count": 1, "score": 0, "last_activity_date": 1467848730, "creation_date": 1467848415, "last_edit_date": 1467848730, "question_id": 38235520, "link": "https://stackoverflow.com/questions/38235520/python-dont-register-in-mysql-server", "title": "Python don&#39;t register in MySQL server", "body": "<p>there\u2019s something wrong in my python script: when I try to put some data in my database and print it, it looks like it\u2019s working, but when I rerun the code, or if I check the phpmyadmin, there\u2019s no data saved in the db. Does anyone have some idea on how to solve this problem?</p>\n\n<pre><code>import mysql.connector\nfrom mysql.connector import errorcode\n\n\ndef connect():\n    \"\"\" Connect to MySQL database \"\"\"\n    try:\n        conn = mysql.connector.connect(host='localhost',\n                                       database='Temperature',\n                                       user='Temperature',\n                                       password='mypass')\n        if conn.is_connected():\n            print('Connected to MySQL database')\n            cur = conn.cursor()\n\n            query = \"INSERT INTO Temp(temp, humi) \" \\\n            \"VALUES(315, 55)\"\n            try:\n                cur.execute(query)\n            except MySQLdb.ProgrammingError as e:\n                print(e)\n\n            query = \"SELECT * FROM Temp\"\n            try:\n                cur.execute(query)\n                for reading in cur.fetchall():\n                    print (str(reading[0])+\"    \"+str(reading[1]))\n            except MySQLdb.ProgrammingError as e:\n                print(e)\n\n    except Error as e:\n        print(e)\n\n    finally:\n        conn.close()\n\n\nif __name__ == '__main__':\n    connect()\n</code></pre>\n"}, {"tags": ["python", "methods", "breadth-first-search"], "comments": [{"owner": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "edited": false, "score": 0, "creation_date": 1467847452, "post_id": 38235316, "comment_id": 63892286, "body": "I know it is your choice, but especially if you want others to help you on StackOverflow, your code should probably use english identifiers and should have english comments (and english mixed with another language looks ugly). I&#39;ll try to find the problem anyway, so don&#39;t worry. But others may not even want to try."}, {"owner": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "edited": false, "score": 0, "creation_date": 1467847595, "post_id": 38235316, "comment_id": 63892320, "body": "Where are you calling <code>setlista</code> and <code>hittabarn</code>?"}, {"owner": {"reputation": 41, "user_id": 6499399, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e513a60bb594886731ac47e37e6b9e30?s=128&d=identicon&r=PG&f=1", "display_name": "A.Maine", "link": "https://stackoverflow.com/users/6499399/a-maine"}, "reply_to_user": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "edited": false, "score": 0, "creation_date": 1467848159, "post_id": 38235316, "comment_id": 63892465, "body": "I updated it now, I copied the code I was experimenting with, ye, I&#39;ve realized it was really, really stupid to go both english and swedish here, Im sorry about that, next time I post something here I will stop with that, was really dumb of me"}, {"owner": {"reputation": 41, "user_id": 6499399, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e513a60bb594886731ac47e37e6b9e30?s=128&d=identicon&r=PG&f=1", "display_name": "A.Maine", "link": "https://stackoverflow.com/users/6499399/a-maine"}, "reply_to_user": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "edited": false, "score": 0, "creation_date": 1467848192, "post_id": 38235316, "comment_id": 63892478, "body": "as you can see I&#39;m calling mangd=setlista() in hittabarn-method (which I dont wanna do)..."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1467848196, "post_id": 38235316, "comment_id": 63892480, "body": "You appear to have inserted some assumptions; since you haven&#39;t detailed &quot;a problem&quot; you&#39;re solving, we can&#39;t help too much.  As it stands, the problem does nothing: there&#39;s no entry point to the code you wrote."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1467848273, "post_id": 38235316, "comment_id": 63892508, "body": "You never call <b>hittabarn</b>.  <b>parent</b> is undefined."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1467848340, "post_id": 38235316, "comment_id": 63892526, "body": "Most such applications are wrapped up in a <i>class</i>, including an initialization method: something you call <i>once</i> on creation; then you maintain those given values in class attributes."}, {"owner": {"reputation": 41, "user_id": 6499399, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e513a60bb594886731ac47e37e6b9e30?s=128&d=identicon&r=PG&f=1", "display_name": "A.Maine", "link": "https://stackoverflow.com/users/6499399/a-maine"}, "edited": false, "score": 0, "creation_date": 1467848361, "post_id": 38235316, "comment_id": 63892529, "body": "yes, I realized that, I just updated it, im sorry about that, I copied the wrong code, I copied something I was experimenting with, sorry about that"}, {"owner": {"reputation": 41, "user_id": 6499399, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e513a60bb594886731ac47e37e6b9e30?s=128&d=identicon&r=PG&f=1", "display_name": "A.Maine", "link": "https://stackoverflow.com/users/6499399/a-maine"}, "edited": false, "score": 0, "creation_date": 1467848446, "post_id": 38235316, "comment_id": 63892551, "body": "Isnt it possible to add a list as paramter in both the setlista method and the hittbarn-method, I&#39;m unsure how to implement it (I tried to but couldnt call it, either I didnt understand how to call it proper or it simply didnt work)"}, {"owner": {"reputation": 41, "user_id": 6499399, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e513a60bb594886731ac47e37e6b9e30?s=128&d=identicon&r=PG&f=1", "display_name": "A.Maine", "link": "https://stackoverflow.com/users/6499399/a-maine"}, "edited": false, "score": 0, "creation_date": 1467936257, "post_id": 38235316, "comment_id": 63935079, "body": "Prune, I did edit the code as I mentioned above, do you have any ideas of what I can possibly do ?"}], "owner": {"reputation": 41, "user_id": 6499399, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e513a60bb594886731ac47e37e6b9e30?s=128&d=identicon&r=PG&f=1", "display_name": "A.Maine", "link": "https://stackoverflow.com/users/6499399/a-maine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467848107, "creation_date": 1467847001, "last_edit_date": 1467848107, "question_id": 38235316, "link": "https://stackoverflow.com/questions/38235316/bfs-need-to-create-the-set-once-and-for-all-not-everytime", "title": "BFS, need to create the set once and for all, not everytime", "body": "<p>Got a problem, I've solved a problem with this code:</p>\n\n<pre><code>def hamta():\n    ordlista=[]\n    fil=open(\"labb9text.txt\")\n    ordlista=[]\n    for line in fil.readlines():\n        ordlista.append(line.strip())\n    return ordlista\n\ndef setlista():\n    ordlista=hamta()\n    setlista=set()\n    for a in ordlista:\n        if a not in setlista:\n            setlista.add(a)\n    return setlista\n\ndef hittabarn(parent):\n    mangd=setlista() \n    children=[]\n    lparent=list(parent)\n    mangd.remove(parent)          #listan m\u00e5ste l\u00e4sas in en g\u00e5ng f\u00f6r alla, inte i hittabarn\n    for word in mangd:\n        letters=list(word)\n        count=0\n        i=0\n        for a in letters:\n            if a==lparent[i]:\n                count+=1\n                i+=1\n            else:\n                i+=1\n            if count==2:\n                if word not in children:\n                    children.append(word)\n            if i&gt;2:\n                break\n    return children\n</code></pre>\n\n<p>The problem is that everytime I wanna run \"hittabarn\", I'll have to load call setlista (which means I have to \"create\" the list with words, and it's not supposed to be like that, the assignment says that I should only load the list once, in the beginning, how do I solve this problem? Is it possible to like give the setlista-method a parameter, and then give hittabarn another parameter? That's what I've been trying but cant really make it work....</p>\n"}, {"tags": ["python", "curve", "points", "smooth"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 2, "creation_date": 1467846807, "post_id": 38235244, "comment_id": 63892095, "body": "You could try some piecewise-monotonic interpolation method like <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.PchipInterpolator.html#scipy.interpolate.PchipInterpolator\" rel=\"nofollow noreferrer\">PCHIP</a>. <code>The interpolator preserves monotonicity in the interpolation data and does not overshoot if the data is not smooth.</code>"}, {"owner": {"reputation": 60033, "user_id": 102302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd9c8a33bbb45d398ad8777e619c7a3?s=128&d=identicon&r=PG", "display_name": "tom10", "link": "https://stackoverflow.com/users/102302/tom10"}, "edited": false, "score": 1, "creation_date": 1467851718, "post_id": 38235244, "comment_id": 63893399, "body": "You would benefit by using a spline rather than polynomial fits since the spline will also match derivatives at the boundaries between sections.  <a href=\"http://stackoverflow.com/questions/31221444/intuitive-interpolation-between-unevenly-spaced-points\">Here&#39;s an answer</a> where I compared different spline methods (including pchip), and I think the same approach could be used here."}], "owner": {"reputation": 73, "user_id": 5867263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91272091a4df627b14e42aaa0ec67c47?s=128&d=identicon&r=PG&f=1", "display_name": "BloodyNoob", "link": "https://stackoverflow.com/users/5867263/bloodynoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 983, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1467889676, "creation_date": 1467846542, "last_edit_date": 1467889676, "question_id": 38235244, "link": "https://stackoverflow.com/questions/38235244/construct-a-smooth-curve-from-mouse-coordinates", "title": "Construct a smooth curve from mouse coordinates", "body": "<p>In a project I'm working on, i get mouse coordinates every X milliseconds. I would like to draw the most likely path between these coordinates.</p>\n\n<p>By example : \n- After X ms, i could get these (x,y) coordinates : (0, 0), (3, 1), (5, 4), (6, 7)\n- After 2*X ms i could have this : (0, 0), (3, 1), (5, 4), (6, 7), (8, 5), (11, -7)\n- etc.</p>\n\n<p>I would like to draw step by step a path between these points, once I've drawn a path i can't change it (i can't wait to have all the coordinates to draw the line).</p>\n\n<p>I started to think about a solution where I draw lines between pair of coordinates by calculating a polynomial fit:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndef construct_path(points):\n    x = points[:,0]\n    y = points[:,1]\n\n    (x_new,y_new) = ([],[])\n    for i in range(0,len(x) - 2):\n        (x_tmp, y_tmp) =  get_new_points(x[i:(i+3)], y[i:(i+3)], (i+3) == len(x))\n        (x_new,y_new) = (x_new + x_tmp.tolist(), y_new + y_tmp.tolist())\n        previous_points = [x_tmp,y_tmp]\n\n    return (x_new, y_new)\n\ndef get_new_points(x,y, end):\n    x = np.array(x)\n    y = np.array(y)\n\n    # calculate polynomial\n    z = np.polyfit(x, y, 2)\n    f = np.poly1d(z)\n\n    # calculate new x's and y's\n\n    if not end:\n        x_new = np.linspace(x[0], x[1], 11)\n    else:\n        x_new = np.linspace(x[0], x[1], 10, endpoint=False).tolist() + np.linspace(x[1], x[2], 11).tolist()\n        x_new = np.array(x_new)\n    y_new = f(x_new)\n\n    print(x_new, y_new)\n    return (x_new, y_new)\n\n\npoints = np.array([(0, 0), (3, 1), (5, 4), (6, 7), (8, 5), (11, -7) ])\n\nx = points[:,0]\ny = points[:,1]\n(x_new, y_new) = construct_path(points)\n\nplt.plot(x,y,'o',np.array(x_new),np.array(y_new))\nplt.xlim([-2, 12])\nplt.ylim([-10, 10])\nplt.show()\n</code></pre>\n\n<p>The result is ok :\n<a href=\"https://i.stack.imgur.com/xEFpQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xEFpQ.png\" alt=\"smooth curve\"></a></p>\n\n<p>But it doesn't work when points have close x's or y's (ex : (0, 0), (3, 1), (5.8, 4), (6, 7), (8, 5), (11, -7))</p>\n\n<p><a href=\"https://i.stack.imgur.com/wipLC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wipLC.png\" alt=\"smooth_curve2\"></a></p>\n\n<p>EDIT : found some interesting leads :</p>\n\n<pre><code>from __future__ import division\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport scipy.interpolate\n\ndef range_spline(x,y):\n    t = np.arange(x.shape[0], dtype=float)\n    t /= t[-1]\n    nt = np.linspace(0, 1, 100)\n    new_x = scipy.interpolate.spline(t, x, nt)\n    new_y = scipy.interpolate.spline(t, y, nt)\n    return (new_x,new_y)\n\ndef dist_spline(x,y):\n    t = np.zeros(x.shape)\n    t[1:] = np.sqrt((x[1:] - x[:-1])**2 + (y[1:] - y[:-1])**2)\n    t = np.cumsum(t)\n    t /= t[-1]\n    nt = np.linspace(0, 1, 100)\n    new_x = scipy.interpolate.spline(t, x, nt)\n    new_y = scipy.interpolate.spline(t, y, nt)\n    return (new_x, new_y)\n\nx = np.array([ 0,  3,  6,  6,  8,  11, 8, 6, 6])\ny = np.array([ 0,  1,  4,  7,  5,  -7, -10, -10, -5])\n#x = np.array([ 0, 2, 4])\n#y = np.array([ 0, 2, 0])\n\n\n(x1, y1) = range_spline(x,y)\n(x2,y2) = dist_spline(x,y)\n\nplt.plot(x,y, 'o')\nplt.plot(x1, y1, label='range_spline')\nplt.plot(x2, y2, label='dist_spline')\n\nplt.legend(loc='best')\nplt.show()\n</code></pre>\n\n<p>It works well when there are many points :\n<a href=\"https://i.stack.imgur.com/GhRf9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GhRf9.png\" alt=\"splines\"></a></p>\n\n<p>But not so well when there are less than 5 points (which is what i'd like) :\n<a href=\"https://i.stack.imgur.com/wxIfy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wxIfy.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 8004, "user_id": 3450064, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fd82a72ed3da42b434e182f953399a43?s=128&d=identicon&r=PG&f=1", "display_name": "CentAu", "link": "https://stackoverflow.com/users/3450064/centau"}, "edited": false, "score": 0, "creation_date": 1467846823, "post_id": 38235183, "comment_id": 63892099, "body": "Please edit your question and show us what you have already tried, add your code. As it stands, this question seems more like a request for code."}], "answers": [{"tags": [], "owner": {"reputation": 684, "user_id": 5592754, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6d0643dbc791d114689434893fe31ada?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi V", "link": "https://stackoverflow.com/users/5592754/abhi-v"}, "is_accepted": true, "score": 1, "last_activity_date": 1467846738, "creation_date": 1467846738, "answer_id": 38235279, "question_id": 38235183, "link": "https://stackoverflow.com/questions/38235183/python-dictionary-data-manipulation/38235279#38235279", "title": "Python dictionary data manipulation", "body": "<p><code>print data[0]['values'][0]['value']</code> seems to work. It prints out this:</p>\n\n<pre><code>{'BD': 80, 'BE': 367, 'FR': 388, 'BG': 732, 'BR': 609, 'RU': 99, 'NL': 418, 'NO': 97, 'RO': 488, 'CH': 187, 'CO': 98, 'GR': 273321, 'CA': 317, 'CZ': 188, 'CY': 1820, 'GB': 2063, 'SK': 81, 'SE': 495, 'DK': 77, 'DE': 4463, 'HU': 120, 'DZ': 86, 'MK': 831, 'PT': 160, 'TR': 547, 'TN': 92, 'PE': 204, 'PK': 100, 'PH': 144, 'PL': 186, 'AE': 142, 'EG': 217, 'AL': 1588, 'IT': 845, 'AR': 105, 'AU': 550, 'AT': 151, 'IN': 114, 'ID': 91, 'ES': 230, 'MA': 95, 'RS': 444, 'GE': 178, 'US': 2447, 'MX': 82}\n</code></pre>\n\n<p>In your <code>data</code> array, it is the first item, and in that item is a key <code>values</code> whose first element has a key <code>value</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1124, "user_id": 359340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c1ea7e6c3947492455be6f3897996dd?s=128&d=identicon&r=PG", "display_name": "Kal Zekdor", "link": "https://stackoverflow.com/users/359340/kal-zekdor"}, "is_accepted": false, "score": 2, "last_activity_date": 1467846764, "creation_date": 1467846764, "answer_id": 38235284, "question_id": 38235183, "link": "https://stackoverflow.com/questions/38235183/python-dictionary-data-manipulation/38235284#38235284", "title": "Python dictionary data manipulation", "body": "<p>If I'm not mistaken, it looks like the <code>values</code> array is an aggregate snapshot, not a period value. Meaning that you should be able to just pull the last value and use that:</p>\n\n<pre><code>countryData = data[0]['values'][-1]['value']\n</code></pre>\n\n<p><code>[0]</code> pulls the first (and only) item of the outer list.</p>\n\n<p><code>['values']</code> pulls the list of snapshots from the dictionary.</p>\n\n<p><code>[-1]</code> gets the last snapshot.</p>\n\n<p><code>['value']</code> gets the country data from that snapshot.</p>\n"}], "owner": {"reputation": 127, "user_id": 4281863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9475433ddc4dd870ea4f24239563d?s=128&d=identicon&r=PG&f=1", "display_name": "dimos", "link": "https://stackoverflow.com/users/4281863/dimos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 38235279, "answer_count": 2, "score": -3, "last_activity_date": 1467848867, "creation_date": 1467846170, "last_edit_date": 1467848867, "question_id": 38235183, "link": "https://stackoverflow.com/questions/38235183/python-dictionary-data-manipulation", "title": "Python dictionary data manipulation", "body": "<p>I have the following dataset in Python:</p>\n\n<blockquote>\n  <p>data = [{'id': '431876400186007/insights/page_fans_country/lifetime', 'name': 'page_fans_country', 'description': 'Lifetime: Aggregated Facebook location data, sorted by country, about the people who like your Page. (Unique Users)', 'title': 'Lifetime Likes by Country', 'period': 'lifetime', 'values': [{'end_time': '2016-07-02T07:00:00+0000', 'value': {'PK': 100, 'AT': 151, 'SK': 81, 'RO': 488, 'BE': 367, 'ID': 91, 'MX': 82, 'GB': 2063, 'CY': 1820, 'TN': 92, 'NL': 418, 'ES': 230, 'RU': 99, 'CZ': 188, 'AR': 105, 'BD': 80, 'PH': 144, 'AU': 550, 'GE': 178, 'GR': 273321, 'CO': 98, 'DZ': 86, 'US': 2447, 'BG': 732, 'MA': 95, 'MK': 831, 'PT': 160, 'CH': 187, 'CA': 317, 'DE': 4463, 'AL': 1588, 'FR': 388, 'PE': 204, 'AE': 142, 'TR': 547, 'BR': 609, 'SE': 495, 'HU': 120, 'IT': 845, 'PL': 186, 'IN': 114, 'EG': 217, 'NO': 97, 'DK': 77, 'RS': 444}}, {'end_time': '2016-07-03T07:00:00+0000', 'value': {'PK': 100, 'AT': 151, 'SK': 81, 'RO': 488, 'BE': 367, 'ID': 91, 'MX': 82, 'GB': 2063, 'CY': 1820, 'TN': 92, 'NL': 418, 'ES': 230, 'RU': 99, 'CZ': 188, 'AR': 105, 'BD': 80, 'PH': 144, 'AU': 548, 'GE': 178, 'GR': 273275, 'CO': 98, 'DZ': 86, 'US': 2447, 'BG': 732, 'MA': 95, 'MK': 831, 'PT': 159, 'CH': 187, 'CA': 317, 'DE': 4462, 'AL': 1588, 'FR': 388, 'PE': 204, 'AE': 142, 'TR': 547, 'BR': 607, 'SE': 495, 'HU': 120, 'IT': 845, 'PL': 186, 'IN': 114, 'EG': 217, 'NO': 97, 'DK': 77, 'RS': 445}}, {'end_time': '2016-07-04T07:00:00+0000', 'value': {'PK': 100, 'AT': 151, 'SK': 81, 'RO': 488, 'BE': 367, 'ID': 90, 'MX': 82, 'GB': 2063, 'CY': 1820, 'TN': 92, 'NL': 418, 'ES': 230, 'RU': 99, 'CZ': 188, 'AR': 105, 'BD': 80, 'PH': 144, 'AU': 547, 'GE': 178, 'GR': 273249, 'CO': 98, 'DZ': 86, 'US': 2445, 'BG': 732, 'MA': 95, 'MK': 831, 'PT': 159, 'CH': 187, 'CA': 317, 'DE': 4460, 'AL': 1588, 'FR': 388, 'PE': 204, 'AE': 142, 'TR': 547, 'BR': 608, 'SE': 495, 'HU': 120, 'IT': 845, 'PL': 186, 'IN': 114, 'EG': 217, 'NO': 97, 'DK': 77, 'RS': 444}}]}]</p>\n</blockquote>\n\n<p>I want to make a dictionary with country data like this:</p>\n\n<pre><code>{'PK': 100, \n 'AT': 151, \n 'SK': 81, \n 'RO': 488, \n 'BE': 367, \n 'ID': 91, \n 'MX': 82, \n 'GB': 2063, \n 'CY': 1820, \n 'TN': 92, \n 'NL': 418, \n 'ES': 230, \n 'RU': 99, \n 'CZ': 188, \n 'AR': 105, \n 'BD': 80, \n 'PH': 144, \n 'AU': 550, \n 'GE': 178, \n 'GR': 273321, \n 'CO': 98}\n</code></pre>\n\n<p>What  should I do?</p>\n\n<p>I cannot use the following code:</p>\n\n<pre><code>data['value'] \n</code></pre>\n\n<p>as I could in an ordinary dictionary.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "edited": false, "score": 0, "creation_date": 1467846161, "post_id": 38235151, "comment_id": 63891877, "body": "<code>22</code> is not a valid identifier."}, {"owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "reply_to_user": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "edited": false, "score": 0, "creation_date": 1467846235, "post_id": 38235151, "comment_id": 63891902, "body": "@CodingLambdas would it be better to stick to nested dictionaries?"}, {"owner": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "edited": false, "score": 0, "creation_date": 1467846306, "post_id": 38235151, "comment_id": 63891922, "body": "I am currently writing an answer."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467846541, "post_id": 38235151, "comment_id": 63892018, "body": "So you want to chain attribute calls?"}, {"owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467846725, "post_id": 38235151, "comment_id": 63892067, "body": "@PadraicCunningham Yes, essentially"}, {"owner": {"reputation": 572, "user_id": 1193279, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/354864361106284548b95138e2c00f20?s=128&d=identicon&r=PG", "display_name": "HeinzKurt", "link": "https://stackoverflow.com/users/1193279/heinzkurt"}, "edited": false, "score": 0, "creation_date": 1467849493, "post_id": 38235151, "comment_id": 63892844, "body": "What you are trying to do is conceptionally hard, because nested classes are the wrong tool for simple data storage that you are trying to achieve. Use a pandas Series/dataframe with a Multiindex and you will be fine."}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1467850176, "post_id": 38235151, "comment_id": 63893035, "body": "It might be a good idea to clarify what your input data actually looks like.  Is it already a nested dictionary?  Or is it some text that needs to be parsed?  The example data you have given is mostly syntax errors."}, {"owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "reply_to_user": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1467851163, "post_id": 38235151, "comment_id": 63893267, "body": "@PaulCornelius The data was originally sourced from a website using bs4, it is some text that needs to be parsed."}], "answers": [{"comments": [{"owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "edited": false, "score": 0, "creation_date": 1467848311, "post_id": 38235344, "comment_id": 63892518, "body": "Sorry to ask, but could you include an example to demonstrate, I don&#39;t fully understand how to use it."}, {"owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "edited": false, "score": 0, "creation_date": 1467849361, "post_id": 38235344, "comment_id": 63892804, "body": "Thank you, that is exactly what I need, however I do get this error when trying to use this code <code>print(wednesday[23].temperature)</code> &quot;TypeError: &#39;Weather&#39; object does not support indexing&quot;"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1467849429, "post_id": 38235344, "comment_id": 63892825, "body": "@CodingLambdas did you mean to inherit from SpecificWeather?"}, {"owner": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1467850184, "post_id": 38235344, "comment_id": 63893037, "body": "@juanpa.arrivillaga Nope. <code>SpecificWeather</code> is the weather for a specific time, while <code>Weather</code> is for the whole day, so <code>Weather</code> contains more data. But for using <code>isinstance</code>, and because they have some pretty similar properties, you could create a <code>BaseWeather</code> class."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1467850423, "post_id": 38235344, "comment_id": 63893086, "body": "@CodingLambdas OH yes I see."}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1467850657, "post_id": 38235344, "comment_id": 63893144, "body": "@CodingLambdas Not a problem with your answer, but a minor point: <code>__getattr__</code> is only called if the attribute lookup has already failed.  Therefore your call to <code>super().__getattr__(name)</code> is certain to fail and should be replaced by <code>raise AttributeError</code>."}, {"owner": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "reply_to_user": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1467851988, "post_id": 38235344, "comment_id": 63893460, "body": "@PaulCornelius Your right, I just forgot the name and was to lazy to look it up."}], "tags": [], "owner": {"reputation": 1383, "user_id": 4696955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-Bef502HUdvc/AAAAAAAAAAI/AAAAAAAAAA4/xILmyHEn5iU/photo.jpg?sz=128", "display_name": "CodenameLambda", "link": "https://stackoverflow.com/users/4696955/codenamelambda"}, "is_accepted": true, "score": 1, "last_activity_date": 1467852009, "last_edit_date": 1467852009, "creation_date": 1467847187, "answer_id": 38235344, "question_id": 38235151, "link": "https://stackoverflow.com/questions/38235151/python-nested-classes-parent-child-new-to-classes/38235344#38235344", "title": "Python - Nested Classes (Parent-Child [New to Classes])", "body": "<p>Although numbers are not considered to be valid identifiers in Python (but that could be funny for trolling: <code>0 = 1 = 2 = 3 = 42</code>), things like <code>_3</code> are, but are generally considered to be <em>\"private\"</em> attributes by the python community (myself included), so i use <code>at</code> followed by the number instead. And I think it would be better to access it like you access a dictionary.</p>\n\n<p>Here is my take on it. Remove the methods if you don't want the associated feature.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class SpecificWeather(object):\n    def __init__(self, data):\n        self.data = data\n\n    @property\n    def type(self):\n        return self.data[\"Type\"]\n\n    @property\n    def temperature(self):\n        return self.data[\"Temp\"]\n\n    @property\n    def speed(self):\n        return self.data[\"Speed\"]\n\n    @property\n    def direction(self):\n        return self.data[\"Direction\"]\n\n\nclass Weather(object):\n    def __init__(self, data):  # data is the dictionary\n        self.data = data\n\n    def __getitem___(self, item):  # for wednesday[22].type\n        return SpecificWeather(self.data[item])\n\n    def __getattr__(self, name):  # for wednesday.at22.type\n        if name.startswith(\"at\"):\n            return SpecificWeather(self.data[int(name[2:])])\n        raise AttributeError()\n\n    @property\n    def type(self):\n        # TODO: Return the average type or something like that\n\n    @property\n    def temperature(self):\n        # TODO: Return the average temperature or something like that\n\n    @property\n    def speed(self):\n        # TODO: Return the average speed or something like that\n\n    @property\n    def direction(self):\n        # TODO: Return the average direction or something like that\n</code></pre>\n\n<p>This solution uses <code>property</code> a lot, this has a big advantage: If you change the temperate for 22, <code>wednesday[22].temperature</code> will now give you the new value. If you care for performance however, and you use only half of them, then this one can be faster than storing the results, if you access them even multiple times though, this will be a lot slower.</p>\n\n<p>How to use it:</p>\n\n<pre><code>wednesday = Weather({\n    22: {\n        'Type': ...,\n        'Temp': 30,\n        'Speed': ...,\n        'Direction': ...\n    },\n    23: {\n        'Type': ...,\n        'Temp': 28,\n        'Speed': ...,\n        'Direction': ...\n    }\n})\n\nprint(wednesday.at22.temperature)  # gives 30\nprint(wednesday[23].temperature)  # gives 28\n</code></pre>\n"}], "owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "accepted_answer_id": 38235344, "answer_count": 1, "score": 1, "last_activity_date": 1467852009, "creation_date": 1467845984, "question_id": 38235151, "link": "https://stackoverflow.com/questions/38235151/python-nested-classes-parent-child-new-to-classes", "title": "Python - Nested Classes (Parent-Child [New to Classes])", "body": "<p>I have this data </p>\n\n<pre><code>{Wednesday : {22 : {Type = x,\n                    Temp = x,\n                    Speed = x,\n                    Direction = x}\n             {23 : {Type = x,\n                    Temp = x,\n                    Speed = x,\n                    Direction = x}\n</code></pre>\n\n<p>I am trying to write a class so that I will be able to access it by calling  as an example and that will give me X.</p>\n\n<p>My code so far is this :</p>\n\n<pre><code>class Weather(object):\n        def __init__(self, wtype, wtemp, wspeed, wdirection):\n            self.type = wtype\n            self.temp = wtemp\n            self.speed = wspeed\n            self.direction = wdirection\n</code></pre>\n\n<p>This allows me to get the data when calling upon the date : </p>\n\n<pre><code>Wednesday.Temp\n&gt;&gt;&gt; 22 \n</code></pre>\n\n<p>However I also need to allocate the data by time as well as the date, so when calling <code>\"Wednesday.22.Type\"</code> I get the specific date for that our.</p>\n\n<p>I am new to classes within Python and I'm not quite sure on how to build the class so that I can call on the date, and then the time to get the respective data. I'm assuming that a nested class is needed to have a \"parent-child\" like relation in the code however I'm not sure how to do this. </p>\n"}, {"tags": ["python", "dll", "environment", "cx-freeze", "unqlite"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6558316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e0ba9d65a2adb21b55e043d2a13460?s=128&d=identicon&r=PG&f=1", "display_name": "tawnydev", "link": "https://stackoverflow.com/users/6558316/tawnydev"}, "is_accepted": false, "score": 0, "last_activity_date": 1468239833, "last_edit_date": 1468239833, "creation_date": 1468237135, "answer_id": 38306009, "question_id": 38235099, "link": "https://stackoverflow.com/questions/38235099/python-exe-cx-freeze-importerror-dll-load-failed/38306009#38306009", "title": "Python exe - Cx_Freeze - ImportError DLL load failed", "body": "<p>Well, I have finally found the solution.</p>\n\n<p>I took a monitor software to look at the DLL load in my machine.\nI filtred all files with my process and the DLL in loaded path.</p>\n\n<p>In one hand, it was <strong>one python DLL</strong> which were missing. On an other hand, Cython expected <strong>one library from microsoft visual C++ runtime environnement</strong>.</p>\n\n<p><em>After adding these DLL manually in the program folder and in the setup, my program worked.</em></p>\n"}], "owner": {"reputation": 1, "user_id": 6558316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e0ba9d65a2adb21b55e043d2a13460?s=128&d=identicon&r=PG&f=1", "display_name": "tawnydev", "link": "https://stackoverflow.com/users/6558316/tawnydev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468239833, "creation_date": 1467845640, "last_edit_date": 1467846076, "question_id": 38235099, "link": "https://stackoverflow.com/questions/38235099/python-exe-cx-freeze-importerror-dll-load-failed", "title": "Python exe - Cx_Freeze - ImportError DLL load failed", "body": "<p>In my machine (Windows), I can use my executable of my python program. But if I try on the machine of another person(Windows), it doesn't work.</p>\n\n<p>The executable blocks at the line :\nfrom unqlite import UnQLite</p>\n\n<p>I have fixed his dependency in packages variable:\noptions={'build_exe':{'include_files':includefiles,'packages': ['Cython'],'includes':['unqlite']}}</p>\n\n<p>And if I look at the folder where it puts the exe, the unqlite.pyd is there...</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 3, "creation_date": 1467846348, "post_id": 38235026, "comment_id": 63891942, "body": "What should happen in the cases where a week overlaps two months? Should the values be aggregated to the starting month? Ending month? Divided between the two?"}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 1, "creation_date": 1467847615, "post_id": 38235026, "comment_id": 63892325, "body": "Another clarification:  What day of the week are your weeks starting on?"}, {"owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "reply_to_user": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467904035, "post_id": 38235026, "comment_id": 63919249, "body": "@root: Those are very good questions. If the cases overlap two weeks, you would aggregate to ending month. The week ends with Sunday so starts on Monday. I will add this to my question."}], "answers": [{"comments": [{"owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "edited": false, "score": 0, "creation_date": 1467846223, "post_id": 38235085, "comment_id": 63891895, "body": "Thanks for your response. Please note that the &quot;YR_FW&quot; is the weekly value. Hence, 201402 is the second week of January and not the month of February. I would like to combine the 52 weeks into 12 months."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "edited": false, "score": 0, "creation_date": 1467849354, "post_id": 38235085, "comment_id": 63892799, "body": "@Rohit hmmm, it seems like %W or %U should do that, but it doesn&#39;t seem to work for me :/ <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a>"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "edited": false, "score": 2, "creation_date": 1467849592, "post_id": 38235085, "comment_id": 63892865, "body": "@Rohit Ah ha, you need to do: <code>pd.to_datetime(df[&quot;YR_FW&quot;].astype(&quot;str&quot;) + &quot;-0&quot;, format=&quot;%Y%W-%w&quot;)</code> Note: astype may not be necessary."}, {"owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "edited": false, "score": 0, "creation_date": 1467904841, "post_id": 38235085, "comment_id": 63919833, "body": "Yes, I had to change the type to <code>str</code> before it could work. However, how does this address the following questions: (1) what happens when the week overlaps two months. How does it aggregate? (2) When there is a missing week?  These questions are asked by root above and very pertinent in order to get the right answer. Thanks!"}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 1, "creation_date": 1467906433, "post_id": 38235085, "comment_id": 63920928, "body": "The <code>to_datetime</code> conversion in @AndyHayden&#39;s comment is correct.  The <code>%W</code> specifies that the week starts on Monday, and the <code>&#39;-0&#39;</code> specifies to take the Sunday within the week.  So, the resulting dates would be the last day of the week specified.  Then, when doing the <code>groupby</code> as in his answer, it would aggregate to the ending month."}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467906933, "post_id": 38235085, "comment_id": 63921218, "body": "@AndyHayden: I&#39;ve edited your answer to reflect the changes you made in the comments.  Feel free to further edit it if any of the wording is off."}, {"owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "reply_to_user": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467916987, "post_id": 38235085, "comment_id": 63927131, "body": "@root: Thank you so much for your help along with Andy. Appreciate it!"}], "tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": true, "score": 3, "last_activity_date": 1467906898, "last_edit_date": 1467906898, "creation_date": 1467845575, "answer_id": 38235085, "question_id": 38235026, "link": "https://stackoverflow.com/questions/38235026/aggregating-fiscal-week-data-into-monthly-sum-in-pandas/38235085#38235085", "title": "Aggregating Fiscal Week data into monthly sum in pandas", "body": "<p>I would convert these to datetimes first:</p>\n\n<pre><code>In [11]: df[\"YR_FW\"] = pd.to_datetime(df[\"YR_FW\"].astype(\"str\") + \"-0\", format=\"%Y%W-%w\")\n\nIn [12]: df\nOut[12]:\n       YR_FW  YIELD\n0 2014-01-12   12.3\n1 2014-01-19   10.2\n2 2014-01-26    7.2\n3 2014-02-02    8.0\n4 2014-02-09    1.2\n</code></pre>\n\n<p>Note that the <code>%W</code> specifies that the week starts on Monday, and the <code>'-0'</code> specifies to take the Sunday within the week. So, the resulting dates would be the last day of the week specified.</p>\n\n<p>Now you can use the <code>dt</code> accessor to extract the last day of the week's month:</p>\n\n<pre><code>In [13]: df.groupby(df[\"YR_FW\"].dt.month).sum()\nOut[13]:\n       YIELD\nYR_FW       \n1       29.7\n2        9.2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "edited": false, "score": 0, "creation_date": 1467917102, "post_id": 38237145, "comment_id": 63927195, "body": "Thank you for working this out. I wanted everything in pandas which Andy&#39;s answer does. It is also very elegant. Thanks nonetheless for your effort!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4280261"}, "is_accepted": false, "score": 0, "last_activity_date": 1467915037, "last_edit_date": 1467915037, "creation_date": 1467862253, "answer_id": 38237145, "question_id": 38235026, "link": "https://stackoverflow.com/questions/38235026/aggregating-fiscal-week-data-into-monthly-sum-in-pandas/38237145#38237145", "title": "Aggregating Fiscal Week data into monthly sum in pandas", "body": "<p>Unfortunately, I don't have enough data to fully check the code, but this is what I arrived to right now. If we suppose that we have:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({\"YR_FW\":[201401,201402,201403,201405,201506],\"YIELD\":[12.3,10.2,7.2,1.2,3.8]})\n\n     YR_FW    YIELD\n0    201401     12.3\n1    201402     10.2\n2    201403     7.2\n3    201405     1.2\n4    201506     3.8\n</code></pre>\n\n<p>with the 3rd row missing to conform to your actual data, and a different year added. We could proceed as follow:</p>\n\n<pre><code>df_pd_range = pd.period_range(\"01/01/2014\",\"02/07/2016\", freq=\"W\") #Here you place the period of your data, I elongated till 2016 to test code\ndf.YR_FW = df.YR_FW.astype(str).map(lambda a_: a_[:4] + \"-\" + a_[4:])\na_ = [np.logical_and(df_pd_range.year == int(df.YR_FW.iloc[i][:4]),df_pd_range.week==int(df.YR_FW.iloc[i][5:])) for i in range(len(df))] #choose only the period that is present in the data\nb_ = [df_pd_range[i][0] for i in a_]\narrays = [[i.year for i in b_],[i.month for i in b_] ]\nindex = pd.MultiIndex.from_arrays(arrays, names=[\"year\", \"month\"])\ndf.set_index(index, inplace=True)\ndf.groupby(level=[0,1]).mean() #Here you obtain mean data grouped by week and year\n</code></pre>\n\n<p>Tell me how it goes</p>\n"}], "owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 1, "accepted_answer_id": 38235085, "answer_count": 2, "score": 2, "last_activity_date": 1467915037, "creation_date": 1467845231, "last_edit_date": 1467904103, "question_id": 38235026, "link": "https://stackoverflow.com/questions/38235026/aggregating-fiscal-week-data-into-monthly-sum-in-pandas", "title": "Aggregating Fiscal Week data into monthly sum in pandas", "body": "<p>I have a dataset that looks like the following:</p>\n\n<pre><code>      YR_FW    YIELD\n0    201401     12.3\n1    201402     10.2\n2    201403     7.2\n3    201404     8.0\n4    201405     1.2\n...  ....     ....\n96   201446     102.3\n97   201447     101.7\n98   201448     89.5\n99   201449     72.2\n100  201450     88.0\n101  201451     98.89\n</code></pre>\n\n<p>I would like to aggregate (sum) such that I have 12 months. It may look something like this:</p>\n\n<pre><code>Months    Summed_YLD\n1            value\n2            value\n...         ...\n11           value\n12           value\n</code></pre>\n\n<p>Note: The YR_FW at times have missing values. For example <code>201427</code> is not in the data frame.  </p>\n\n<p>Note2: If cases overlap, they should be aggregated to ending month. The week starts with Monday and ends with Sunday (this is not a 5-day week). </p>\n"}, {"tags": ["python", "api"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467848762, "post_id": 38235008, "comment_id": 63892633, "body": "There is no python api?"}, {"owner": {"reputation": 516, "user_id": 5043357, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/efeb4b2e5899c59b9e65008393ca5019?s=128&d=identicon&r=PG&f=1", "display_name": "rishran", "link": "https://stackoverflow.com/users/5043357/rishran"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467894009, "post_id": 38235008, "comment_id": 63911724, "body": "Apparently not. There is just the API documentation but I believe we need to build a Python Parsing Client."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467900415, "post_id": 38235008, "comment_id": 63916478, "body": "If I get a chance later I will throw a python solution together"}, {"owner": {"reputation": 516, "user_id": 5043357, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/efeb4b2e5899c59b9e65008393ca5019?s=128&d=identicon&r=PG&f=1", "display_name": "rishran", "link": "https://stackoverflow.com/users/5043357/rishran"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467907885, "post_id": 38235008, "comment_id": 63921785, "body": "Thanks for your help Padraic!"}], "answers": [{"tags": [], "owner": {"reputation": 516, "user_id": 5043357, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/efeb4b2e5899c59b9e65008393ca5019?s=128&d=identicon&r=PG&f=1", "display_name": "rishran", "link": "https://stackoverflow.com/users/5043357/rishran"}, "is_accepted": true, "score": 1, "last_activity_date": 1467907531, "creation_date": 1467907531, "answer_id": 38250290, "question_id": 38235008, "link": "https://stackoverflow.com/questions/38235008/sovren-resume-parser-python/38250290#38250290", "title": "Sovren Resume Parser - Python", "body": "<pre><code>from zeep import Client\n\nclient = Client('http://services.resumeparsing.com/ResumeService.asmx?wsdl')\n\nresponse = client.service.GetAccountInfo(request={'AccountId': 'AccountId','ServiceKey':'ServiceKey'})\nprint(response)\n</code></pre>\n\n<p>Using the Zeep module did the trick! This works with Python3 as well!</p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 2847330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8725dc556c112b5a9b7d2926cb40e36d?s=128&d=identicon&r=PG&f=1", "display_name": "ak2205", "link": "https://stackoverflow.com/users/2847330/ak2205"}, "is_accepted": false, "score": 0, "last_activity_date": 1504865329, "creation_date": 1504865329, "answer_id": 46113988, "question_id": 38235008, "link": "https://stackoverflow.com/questions/38235008/sovren-resume-parser-python/46113988#46113988", "title": "Sovren Resume Parser - Python", "body": "<p>I've used following code in Python to parse job order and resume. </p>\n\n<p>One thing I couldn't figure out is to zip/compress request data. The output from zlib.compress() or gzip.compress() doesn't work. The web service complains about data conversion failure.</p>\n\n<pre><code>from zeep import Client\nimport os\n\n#If required, set proxy.\n#os.environ[\"http_proxy\"] = 'http://user:password@host:port'\n#os.environ[\"https_proxy\"] = 'https://user:password@host:port'\n\naccount_id = 'account_id'\nservice_key = 'service_key'\n\nclient = Client('http://services.resumeparsing.com/ParsingService.asmx?wsdl')\n\nwith open('C:/temp/jd.docx', 'rb') as in_file:\n    file_bytes = in_file.read()\n\nrequest = {'AccountId':account_id, 'ServiceKey':service_key, 'FileBytes':file_bytes}\n\nresponse = client.service.ParseJobOrder(request)\n# Similarlly ParseResume() for parsing resume.\n\nprint('response.Code = ', response.Code)\nprint('response.SubCode = ', response.SubCode)\nprint('response.Message = ', response.Message)\nprint('response.Xml = ', response.Xml)\n</code></pre>\n"}], "owner": {"reputation": 516, "user_id": 5043357, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/efeb4b2e5899c59b9e65008393ca5019?s=128&d=identicon&r=PG&f=1", "display_name": "rishran", "link": "https://stackoverflow.com/users/5043357/rishran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1477, "favorite_count": 0, "accepted_answer_id": 38250290, "answer_count": 2, "score": 0, "last_activity_date": 1504865329, "creation_date": 1467845153, "last_edit_date": 1467845497, "question_id": 38235008, "link": "https://stackoverflow.com/questions/38235008/sovren-resume-parser-python", "title": "Sovren Resume Parser - Python", "body": "<p>I am trying to use the Sovren Resume Parser API and I am pretty new to APIs. My application is in Django-Python and thus, I would like to implement call and receive this API using a Python Script. </p>\n\n<p>Documentation - <a href=\"http://resumeparsing.com/\" rel=\"nofollow\">http://resumeparsing.com/</a></p>\n\n<p>I need a general overview of how to go about this. </p>\n"}, {"tags": ["python", "google-app-engine", "google-cloud-storage"], "comments": [{"owner": {"reputation": 6266, "user_id": 2302437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abb8e13633480a4d3add0f113e596501?s=128&d=identicon&r=PG&f=1", "display_name": "electronix384128", "link": "https://stackoverflow.com/users/2302437/electronix384128"}, "edited": false, "score": 0, "creation_date": 1467845054, "post_id": 38234985, "comment_id": 63891507, "body": "According to this post: <a href=\"http://stackoverflow.com/a/29664200/2302437\">stackoverflow.com/a/29664200/2302437</a> It should work like mentioned above... There also seems to be no docs from Google on this :/"}, {"owner": {"reputation": 10484, "user_id": 3524613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71de987671a207271720d862fa4caafb?s=128&d=identicon&r=PG&f=1", "display_name": "GAEfan", "link": "https://stackoverflow.com/users/3524613/gaefan"}, "edited": false, "score": 0, "creation_date": 1467935723, "post_id": 38234985, "comment_id": 63934960, "body": "That request is returning a 200, so it appears to be working.  Have you logged the response contents to see what it is?"}], "answers": [{"tags": [], "owner": {"reputation": 1051, "user_id": 3277582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0acf1c02112eb07e52b816734c861af6?s=128&d=identicon&r=PG&f=1", "display_name": "ozarov", "link": "https://stackoverflow.com/users/3277582/ozarov"}, "is_accepted": false, "score": 2, "last_activity_date": 1468000577, "creation_date": 1468000577, "answer_id": 38272792, "question_id": 38234985, "link": "https://stackoverflow.com/questions/38234985/google-app-engine-local-dev-server-does-not-route-to-remote-cloud-storage-bucket/38272792#38272792", "title": "Google App Engine Local Dev Server Does not Route to Remote Cloud Storage Bucket", "body": "<p>You need to make sure that auth will be configured with your google cloud project and that the client will connect to the production google cloud storage rather than the local development (which happens by default when local development server run is detected).</p>\n\n<p>See <a href=\"https://github.com/GoogleCloudPlatform/appengine-gcs-client/blob/f9dbbd43ec431f739aa33a44cf24d32a19579f33/python/src/cloudstorage/common.py#L74\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6266, "user_id": 2302437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abb8e13633480a4d3add0f113e596501?s=128&d=identicon&r=PG&f=1", "display_name": "electronix384128", "link": "https://stackoverflow.com/users/2302437/electronix384128"}, "is_accepted": true, "score": -1, "last_activity_date": 1475537658, "creation_date": 1475537658, "answer_id": 39842012, "question_id": 38234985, "link": "https://stackoverflow.com/questions/38234985/google-app-engine-local-dev-server-does-not-route-to-remote-cloud-storage-bucket/39842012#39842012", "title": "Google App Engine Local Dev Server Does not Route to Remote Cloud Storage Bucket", "body": "<p>We're still having this issue. We believe this is an issue that's originating from the Appengine Wordpress plugin.</p>\n\n<p>We came up with the following workaround to get the images loading properly:</p>\n\n<p>Create a Bookmarklet in Google Chrome and add the following url:</p>\n\n<pre><code>javascript:var start = var targetUrls = [\"//\" + window.location.host + \"/wp-content/uploads/\",\"//\" + window.location.host + \"/_ah/gcs/bucket-name/\"];var htmlAttributes = [\"src\", \"srcset\"];jQuery(\"img\").each(function(index, img) {targetUrls.forEach(function(pattern) {htmlAttributes.forEach(function(htmlAttr) {var htmlObj = jQuery(img).attr(htmlAttr);if (htmlObj) {jQuery(img).attr(htmlAttr, htmlObj.replace(new RegExp(pattern, \"g\"), \"//bucket-name.storage.googleapis.com/\"));}});});});\n</code></pre>\n\n<p>Full Code:</p>\n\n<pre><code>var targetUrls = [\n    \"//\" + window.location.host + \"/wp-content/uploads/\",\n    \"//\" + window.location.host + \"/_ah/gcs/bucket-name/\"\n];\nvar htmlAttributes = [\"src\", \"srcset\"];\njQuery(\"img\").each(function(index, img) {\n    targetUrls.forEach(function(pattern) {\n        htmlAttributes.forEach(function(htmlAttr) {\n            var htmlObj = jQuery(img).attr(htmlAttr);\n            if (htmlObj) {\n                jQuery(img).attr(htmlAttr, htmlObj.replace(new RegExp(pattern, \"g\"), \"//bucket-name.storage.googleapis.com/\"));\n            }\n        });\n    });\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6732989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38e5a04406e1be3d853c8f3b2730c14?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Zito", "link": "https://stackoverflow.com/users/6732989/bill-zito"}, "is_accepted": false, "score": 0, "last_activity_date": 1513294950, "creation_date": 1513294950, "answer_id": 47823794, "question_id": 38234985, "link": "https://stackoverflow.com/questions/38234985/google-app-engine-local-dev-server-does-not-route-to-remote-cloud-storage-bucket/47823794#47823794", "title": "Google App Engine Local Dev Server Does not Route to Remote Cloud Storage Bucket", "body": "<p>I believe you need to include the bucket name:</p>\n\n<pre><code>    localhost:port/_ah/gcs/bucket_name/file_suffix \n</code></pre>\n\n<p>Where port is by default 8080, and the file was written to: /bucket_name/file_suffix</p>\n\n<p>It appears you went to:</p>\n\n<pre><code>   http://localhost:8080/_ah/gcs/leanplum-black.svg\n</code></pre>\n\n<p>But needed to include the bucket name, which may be <em>leanplum-wordpress</em>:</p>\n\n<pre><code>   http://localhost:8080/_ah/gcs/leanplum-wordpress/leanplum-black.svg\n</code></pre>\n\n<p>Note that I did not find this anywhere in the documentation. This question  helped me guess that I needed to include the bucket name in the url, so I hope this helps someone else as well!</p>\n"}], "owner": {"reputation": 6266, "user_id": 2302437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abb8e13633480a4d3add0f113e596501?s=128&d=identicon&r=PG&f=1", "display_name": "electronix384128", "link": "https://stackoverflow.com/users/2302437/electronix384128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 39842012, "answer_count": 3, "score": 1, "last_activity_date": 1513294950, "creation_date": 1467845039, "last_edit_date": 1467999956, "question_id": 38234985, "link": "https://stackoverflow.com/questions/38234985/google-app-engine-local-dev-server-does-not-route-to-remote-cloud-storage-bucket", "title": "Google App Engine Local Dev Server Does not Route to Remote Cloud Storage Bucket", "body": "<p>I am trying to access files that are hosted on a remote cloud storage bucket through the <code>dev_appserver.py</code> dev server.</p>\n\n<p>This direct link to google cloud storage works:</p>\n\n<pre><code>https://leanplum-wordpress.storage.googleapis.com/leanplum-black.svg\n</code></pre>\n\n<p>where as the local via the dev_appserver does not:</p>\n\n<pre><code>http://localhost:8080/_ah/gcs/leanplum-black.svg\n</code></pre>\n\n<p>Log Output:</p>\n\n<pre><code>INFO     2016-07-06 22:37:16,461 module.py:788] default: \"GET /_ah/gcs/leanplum-black.svg HTTP/1.1\" 200 116\n</code></pre>\n\n<p>I am running the dev server like this:</p>\n\n<pre><code>dev_appserver.py --default_gcs_bucket_name=leanplum-wordpress .\n</code></pre>\n\n<p>What's wrong?</p>\n"}, {"tags": ["python", "pyqt"], "comments": [{"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1467845271, "post_id": 38234968, "comment_id": 63891595, "body": "Looks like you&#39;re missing a space <code>&quot;python&quot; + &quot;question.py&quot;</code> equals <code>&quot;pythonquestion.py&quot;</code>"}, {"owner": {"reputation": 2583, "user_id": 6269247, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/kapSj.jpg?s=128&g=1", "display_name": "rainer", "link": "https://stackoverflow.com/users/6269247/rainer"}, "reply_to_user": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1467846773, "post_id": 38234968, "comment_id": 63892085, "body": "Brendan, thanks for your answer. Sorrt, but I couldn&#180;t follow: what would be the correct syntax?"}], "answers": [{"comments": [{"owner": {"reputation": 2583, "user_id": 6269247, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/kapSj.jpg?s=128&g=1", "display_name": "rainer", "link": "https://stackoverflow.com/users/6269247/rainer"}, "edited": false, "score": 0, "creation_date": 1467848880, "post_id": 38235320, "comment_id": 63892668, "body": "Brendan, many thanks, that helped a lot. The close() command is not working, so the window still stays open. I have added the command line &quot;self.btn_newSearch.clicked.connect(QtCore.QCoreApplication.&zwnj;&#8203;instance().quit)&quot; at the beginning, what solved the issue.Do you have any idea on how to close the window from within the def restart?"}, {"owner": {"reputation": 1358, "user_id": 3704411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ZSfmb.jpg?s=128&g=1", "display_name": "Oceanescence", "link": "https://stackoverflow.com/users/3704411/oceanescence"}, "edited": false, "score": 0, "creation_date": 1589184846, "post_id": 38235320, "comment_id": 109181442, "body": "Does this command still work if the python code is turned into an executable file?"}], "tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": false, "score": 1, "last_activity_date": 1467847026, "creation_date": 1467847026, "answer_id": 38235320, "question_id": 38234968, "link": "https://stackoverflow.com/questions/38234968/pyqt-close-and-reopen-application/38235320#38235320", "title": "PyQT close and reopen application", "body": "<p>If <code>python</code> is in your <code>PATH</code> environment variable, you shouldn't need the <code>shell=True</code> argument.  You also probably don't want to use <code>subprocess.call</code>, since it will block</p>\n\n<pre><code>subprocess.Popen(['python', 'question.py'])\n</code></pre>\n"}], "owner": {"reputation": 2583, "user_id": 6269247, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/kapSj.jpg?s=128&g=1", "display_name": "rainer", "link": "https://stackoverflow.com/users/6269247/rainer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "closed_date": 1467847125, "answer_count": 1, "score": 2, "last_activity_date": 1467847026, "creation_date": 1467844948, "question_id": 38234968, "link": "https://stackoverflow.com/questions/38234968/pyqt-close-and-reopen-application", "closed_reason": "Duplicate", "title": "PyQT close and reopen application", "body": "<p>The button in following code is supposed to close the programm window and reopen it. The RESTART part works perfectly well in a different context, but I can\u00b4t get it working in this one. \nAny idea what I am missing here? Help from more experient folks would be greatly appreciated. </p>\n\n<pre><code>import sys\nimport subprocess\nfrom PyQt4 import QtCore, QtGui\n\nclass MainWindow(QtGui.QMainWindow):\n\n    def __init__(self, parent=None):\n\n        super(MainWindow, self).__init__(parent)\n\n        self.win_widget = WinWidget(self)\n        widget = QtGui.QWidget()\n        layout = QtGui.QVBoxLayout(widget)\n        layout.addWidget(self.win_widget)\n        self.setCentralWidget(widget)\n\n        self.statusBar().showMessage('Ready')\n\n        self.setGeometry(300, 300, 450, 250)\n        self.setWindowTitle('Test')  \n        self.setWindowIcon (QtGui.QIcon('logo.png'))\n        self.show()\n\nclass WinWidget (QtGui.QWidget) : \n\n    def __init__(self, parent): \n\n        super (WinWidget , self).__init__(parent)\n        self.controls()\n        self.grid_layout() \n\n    def controls(self):\n\n        self.btn_newSearch = QtGui.QPushButton('New Search  ', self)\n        self.btn_newSearch.clicked.connect(self.restart)\n        self.btn_newSearch.setFont(QtGui.QFont('CourierNew', 12 , QtGui.QFont.Bold,False))\n\n    def restart(self):\n        self.close()\n        subprocess.call(\"python\" + \"question.py  \", shell=True)\n\n    def grid_layout (self) : \n        grid = QtGui.QGridLayout()\n        grid.setSpacing(2)\n        grid.addWidget(self.btn_newSearch , 1 , 1)\n        self.setLayout(grid)\n\ndef main():\n\n    app = QtGui.QApplication(sys.argv)\n    win = MainWindow()\n    win.show()\n    sys.exit(app.exec_())\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1467845031, "post_id": 38234951, "comment_id": 63891501, "body": "Is the list <code>None</code> or an item in the list?"}, {"owner": {"reputation": 1717, "user_id": 891441, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7d498503d9a55df34133c5092d72c905?s=128&d=identicon&r=PG", "display_name": "morfys", "link": "https://stackoverflow.com/users/891441/morfys"}, "reply_to_user": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 1, "creation_date": 1467845041, "post_id": 38234951, "comment_id": 63891503, "body": "Thanks, Moses, but that is a different question, dealing with list <i>elements</i> that are None.  My question pertains to the case where the <i>list</i> itself is None."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1467849298, "post_id": 38234951, "comment_id": 63892786, "body": "If you are fine with an empty list having the same effect as <code>None</code>, you may simply do <code>my_list or []</code>"}], "answers": [{"comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1467849441, "post_id": 38234988, "comment_id": 63892828, "body": "Isn&#39;t <code>[x for x in my_list]</code> the inefficient way of writing <code>list(my_list)</code>?"}, {"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1467849663, "post_id": 38234988, "comment_id": 63892886, "body": "@spectras Yes. My interpretation is that <code>x for x</code> is a stand-in for some other processing that the OP intends but does not want us to focus on.  His focus was on making the ternary statement work."}, {"owner": {"reputation": 1717, "user_id": 891441, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7d498503d9a55df34133c5092d72c905?s=128&d=identicon&r=PG", "display_name": "morfys", "link": "https://stackoverflow.com/users/891441/morfys"}, "edited": false, "score": 1, "creation_date": 1468269363, "post_id": 38234988, "comment_id": 64047941, "body": "Yes, that&#39;s right John1024.  Thanks a lot for your answer."}], "tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": true, "score": 10, "last_activity_date": 1467845383, "last_edit_date": 1467845383, "creation_date": 1467845046, "answer_id": 38234988, "question_id": 38234951, "link": "https://stackoverflow.com/questions/38234951/list-comprehension-where-list-itself-is-none/38234988#38234988", "title": "list comprehension where list itself is None", "body": "<p>I think this does what you want:</p>\n\n<pre><code>&gt;&gt;&gt; my_list = None\n&gt;&gt;&gt; [x for x in my_list] if my_list is not None else ['1']\n['1']\n</code></pre>\n\n<p>The change here is moving the ternary statement outside of the list comprehension.</p>\n\n<p>Alternatively, if we add some parens, we can keep the ternary statement inside the list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; my_list = None\n&gt;&gt;&gt; [x for x in (my_list if my_list is not None else ['1'])]\n['1']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1467848960, "last_edit_date": 1467848960, "creation_date": 1467848524, "answer_id": 38235538, "question_id": 38234951, "link": "https://stackoverflow.com/questions/38234951/list-comprehension-where-list-itself-is-none/38235538#38235538", "title": "list comprehension where list itself is None", "body": "<p>Your code is equivalent to making a copy of the list if it is not None else setting whatever to <code>[\"1\"]</code>:</p>\n\n<pre><code> whatever = my_list[:] if my_list is not None else ['1']\n</code></pre>\n\n<p>But I have a feeling what you really want is maybe a single <code>if my_list is None</code>:</p>\n\n<pre><code>if my_list is None:\n     my_list = ['1']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 809, "user_id": 4632354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed5803d5b37ee8da64e2f1eda7d8c73?s=128&d=identicon&r=PG&f=1", "display_name": "davidedb", "link": "https://stackoverflow.com/users/4632354/davidedb"}, "is_accepted": false, "score": 1, "last_activity_date": 1468183110, "creation_date": 1468183110, "answer_id": 38296265, "question_id": 38234951, "link": "https://stackoverflow.com/questions/38234951/list-comprehension-where-list-itself-is-none/38296265#38296265", "title": "list comprehension where list itself is None", "body": "<p>Another simple solution is the following:</p>\n\n<pre><code>[x for x in my_list or ['1']]\n</code></pre>\n\n<p>However your code is almost correct: you have just to take into account of operator priorities by adding a couple of parenthesis:</p>\n\n<pre><code>[x for x in (my_list if my_list is not None else ['1'])]\n</code></pre>\n"}], "owner": {"reputation": 1717, "user_id": 891441, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7d498503d9a55df34133c5092d72c905?s=128&d=identicon&r=PG", "display_name": "morfys", "link": "https://stackoverflow.com/users/891441/morfys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 38234988, "answer_count": 3, "score": 4, "last_activity_date": 1468183110, "creation_date": 1467844845, "last_edit_date": 1467845096, "question_id": 38234951, "link": "https://stackoverflow.com/questions/38234951/list-comprehension-where-list-itself-is-none", "title": "list comprehension where list itself is None", "body": "<p>Is there a way for me to deal with the case where the list my_list itself can be None in \nthe list comprehension:</p>\n\n<pre><code>[x for x in my_list]\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>[x for x in my_list if my_list is not None else ['1']]\n</code></pre>\n\n<p>However, it doesn't seem to work.</p>\n"}, {"tags": ["python", "kivy"], "answers": [{"tags": [], "owner": {"reputation": 7293, "user_id": 5994041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dWWF9.png?s=128&g=1", "display_name": "Peter Badida", "link": "https://stackoverflow.com/users/5994041/peter-badida"}, "is_accepted": false, "score": 0, "last_activity_date": 1467919308, "creation_date": 1467919308, "answer_id": 38253691, "question_id": 38234848, "link": "https://stackoverflow.com/questions/38234848/kivy-dynamically-add-and-remove-dropdown-entries/38253691#38253691", "title": "kivy dynamically add and remove dropdown entries", "body": "<p>Use <a href=\"https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.clear_widgets\" rel=\"nofollow\"><code>clear_widgets()</code></a> to get the result you want - removing all buttons from dropdown - or store some reference to those buttons in dropdown somewhere and remove only desired ones.</p>\n\n<pre><code>def removeButtonPressed(self):\n    self.dropdown.clear_widgets()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6558281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f20ce6171d333ed44f8d9bda6541b90?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/6558281/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467919308, "creation_date": 1467844190, "last_edit_date": 1467844653, "question_id": 38234848, "link": "https://stackoverflow.com/questions/38234848/kivy-dynamically-add-and-remove-dropdown-entries", "title": "kivy dynamically add and remove dropdown entries", "body": "<p>my app should dynamically add and remove items in the dropdown menu. The adding of buttons works, but I didn't get it working to remove the added buttons.</p>\n\n<p>py:</p>\n\n<pre><code>import kivy\nkivy.require('1.7.2') # replace with your current kivy version !\n\nfrom kivy.app import App\nfrom kivy.uix.screenmanager import ScreenManager, Screen\nfrom kivy.properties import ObjectProperty\nfrom kivy.uix.button import Button\nfrom kivy.uix.dropdown import DropDown\n\nclass HomeScreen(Screen):\n    addButton = ObjectProperty(None)\n    removeButton = ObjectProperty(None)\n    top_layout = ObjectProperty(None)\n\n    def __init__(self, *args, **kwargs):\n        super(HomeScreen, self).__init__(*args, **kwargs)\n\n    def resetBoxes(self):\n        self.ids.btn_release.text = \"Release\"\n        self.ids.btn_version.text = \"Version\"\n        self.ids.btn_device.text = \"Device\"\n        return\n\n    def removeButtonPressed(self):\n        self.dropdown.remove_widget(self)\n        return\n\n    def addButtonPressed(self):\n        self.dropdown = DropDown()\n        notes = ['Features', 'Suggestions', 'Abreviations', 'Miscellaneous']\n        for note in notes:\n            btn = Button(text=note, size_hint_y=None, height=20)\n            btn.bind(on_release=lambda btn: self.dropdown.select(btn.text))\n            self.dropdown.add_widget(btn)\n            self.ids.btn_release.bind(on_release=self.dropdown.open)\n        self.dropdown.bind(on_select=lambda instance, x: setattr(self.ids.btn_release, 'text', x))\n        return\n\n    def btn_releaseClicked(self):\n        self.ids.btn_release.text=\"clicked\"\n    def btn_versionClicked(self):\n        self.ids.btn_version.text=\"clicked\"\n    def btn_deviceClicked(self):\n        self.ids.btn_device.text=\"clicked\"\nclass dropdApp(App):\n    def build(self):\n        return HomeScreen()\n\n\nif __name__ == '__main__':\n    dropdApp().run()\n</code></pre>\n\n<p>kv:</p>\n\n<pre><code>&lt;HomeScreen&gt;:\n    id: home_screen\n    addButton: addButtonID\n    removeButton: removeButtonID\n    top_layout: topLayoutID\n\n    orientation: 'vertical'\n    FloatLayout: \n        size_hint: 1, 1\n        Button:\n            id: addButtonID\n            text: 'Add'\n            pos_hint: {'x': .35, 'y': .70}\n            size_hint: .3, .08\n            valign: 'middle'\n            halign: 'center'\n            text_size: self.size\n            on_release: root.addButtonPressed()\n        Button:\n            id: removeButtonID\n            text: 'Remove'\n            pos_hint: {'x': .35, 'y': .60}\n            size_hint: .3, .08\n            valign: 'middle'\n            halign: 'center'\n            text_size: self.size\n            on_release: root.removeButtonPressed()\n\n\n    BoxLayout:\n        id: topLayoutID\n        size_hint: 1, .05\n        pos_hint: {'x': 0, 'y': .90}\n        Button:\n            id: btn_release\n            text: 'Release'\n            on_press: root.btn_releaseClicked()\n        Button:\n            id: btn_version\n            text: 'Version'\n            on_press: root.btn_versionClicked()\n        Button:\n            id: btn_device\n            text: 'Device'\n            on_press: root.btn_deviceClicked()\n</code></pre>\n"}, {"tags": ["python", "ipython", "cython", "jupyter"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1467844310, "post_id": 38234776, "comment_id": 63891316, "body": "Why are you using <code>import *</code>? Stop doing that, and your problem goes away instantly."}, {"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467847049, "post_id": 38234776, "comment_id": 63892161, "body": "I use one class per file normally.. so it wont matter"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1467847647, "post_id": 38234776, "comment_id": 63892339, "body": "&quot;I use one class per file normally&quot; - also a bad idea. This isn&#39;t Java here. You don&#39;t always need classes, and when you do, there&#39;s no reason to limit yourself to one per file."}, {"owner": {"reputation": 588, "user_id": 645494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bm5ET.png?s=128&g=1", "display_name": "Chris Swierczewski", "link": "https://stackoverflow.com/users/645494/chris-swierczewski"}, "edited": false, "score": 0, "creation_date": 1467997528, "post_id": 38234776, "comment_id": 63963317, "body": "@user1019129 Can you clarify what you mean by &quot;hierarchy&quot;? Are you referring to, say, module A importing from module B and your plan to eventually Cythonize both?"}, {"owner": {"reputation": 588, "user_id": 645494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bm5ET.png?s=128&g=1", "display_name": "Chris Swierczewski", "link": "https://stackoverflow.com/users/645494/chris-swierczewski"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467997727, "post_id": 38234776, "comment_id": 63963413, "body": "Also, adding to @user2357112 &#39;s comment, why you can&#39;t create an &quot;implementation zoo&quot; within a single Cython module? You can keep the original Python implementation in there as &quot;BlahPython&quot; and add other implementations (e.g. &quot;BlahCython&quot;, &quot;BlahMemoryViews&quot;) as you go in a sort of strategy design pattern. Once you determine the &quot;best&quot; version you can set a default via <code>Blah = BlahMemoryViews</code> so when the user imports <code>Blah</code> they end up using the desired implementation."}, {"owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "reply_to_user": {"reputation": 588, "user_id": 645494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bm5ET.png?s=128&g=1", "display_name": "Chris Swierczewski", "link": "https://stackoverflow.com/users/645494/chris-swierczewski"}, "edited": false, "score": 0, "creation_date": 1468036788, "post_id": 38234776, "comment_id": 63975235, "body": "@chris yes, A -&gt; B -&gt; C ... i start with cythonizing A, then B then C"}, {"owner": {"reputation": 588, "user_id": 645494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bm5ET.png?s=128&g=1", "display_name": "Chris Swierczewski", "link": "https://stackoverflow.com/users/645494/chris-swierczewski"}, "edited": false, "score": 0, "creation_date": 1468608692, "post_id": 38234776, "comment_id": 64214754, "body": "Any update on your progress? I&#39;m interested to hear your solution since I write a lot of Cython, myself."}], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 645494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bm5ET.png?s=128&g=1", "display_name": "Chris Swierczewski", "link": "https://stackoverflow.com/users/645494/chris-swierczewski"}, "is_accepted": false, "score": 3, "last_activity_date": 1467847647, "creation_date": 1467847647, "answer_id": 38235410, "question_id": 38234776, "link": "https://stackoverflow.com/questions/38234776/cython-and-python-class-coexistence-in-ipython/38235410#38235410", "title": "Cython and Python class coexistence in ipython?", "body": "<p>You can use the <code>import x as y</code> method for renaming definitions within modules. For example, if <code>foo.py</code> contains a function <code>func</code> and <code>bar.pyx</code> also contains the function <code>func</code> (perhaps this is you trying to write a Cython version of <code>foo.func()</code>) then you can do the following in your timing script:</p>\n\n<pre><code># separate imports\nfrom foo import func as func_py\nfrom bar import func as func_cy\n\n# use the code\nfunc_py(2.0)\nfunc_cy(2.0)\n</code></pre>\n\n<p>This way you can keep a meaningful naming scheme within the <code>foo</code> and <code>bar</code> modules.</p>\n"}], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467865863, "creation_date": 1467843842, "last_edit_date": 1467865863, "question_id": 38234776, "link": "https://stackoverflow.com/questions/38234776/cython-and-python-class-coexistence-in-ipython", "title": "Cython and Python class coexistence in ipython?", "body": "<p>What is the best approach to have the same classes coexist in ipython environment.</p>\n\n<p>I want to gradually migrate some classes in hierarchy (starting from the root classes) from Python to Cython.\nI want to be able to have both versions running (in ipython env), so I can compare performance, and be able to fall-back when needed.</p>\n\n<p>Is there some other approach that may work even if not exactly the way I want.</p>\n\n<p>For my current experiments I started with renaming the classes and importing them separately.\nF.e. :</p>\n\n<pre><code>import pyximport; pyximport.install()\nfrom blah import *\nfrom c_blah import *\nb = Blah()\ncb = c_Blah()\n\n%timeit -n 1000 b.op()\n%timeit -n 1000 cb.op()\n</code></pre>\n\n<p>that is cumbersome because I had to rename all class-attr/method accesses.\nAlso this does not solve my dilemma once I go down the hierarchy.</p>\n\n<p>Any other ideas how to approach this ?\nI mean incremental recoding in Cython.</p>\n\n<hr>\n\n<p>cswiercz makes good point :</p>\n\n<pre><code>from blah import Blah\nfrom cblah import Blah as cBlah\n</code></pre>\n\n<p>this is OK, but supporting hierarchy will require modifications.\nWill keep it open for other ideas.</p>\n"}, {"tags": ["python", "json"], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 2648799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0b040bda30246847339b501e2149c4?s=128&d=identicon&r=PG&f=1", "display_name": "zlr", "link": "https://stackoverflow.com/users/2648799/zlr"}, "edited": false, "score": 1, "creation_date": 1467996499, "post_id": 38270137, "comment_id": 63962826, "body": "Stellar! I was missing the <code>return(dct)</code> when the key isn&#39;t found. There&#39;s a reason they call you &quot;the druid&quot; !"}, {"owner": {"reputation": 719, "user_id": 2648799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0b040bda30246847339b501e2149c4?s=128&d=identicon&r=PG&f=1", "display_name": "zlr", "link": "https://stackoverflow.com/users/2648799/zlr"}, "edited": false, "score": 0, "creation_date": 1470869200, "post_id": 38270137, "comment_id": 65130173, "body": "Related, but for yaml: <a href=\"http://stackoverflow.com/questions/19439765/is-there-a-way-to-construct-an-object-using-pyyaml-construct-mapping-after-all-n\" title=\"is there a way to construct an object using pyyaml construct mapping after all n\">stackoverflow.com/questions/19439765/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5219, "user_id": 248343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9b236eeda6f72e93320f97a6c4b672?s=128&d=identicon&r=PG", "display_name": "OcuS", "link": "https://stackoverflow.com/users/248343/ocus"}, "is_accepted": true, "score": 1, "last_activity_date": 1467990934, "creation_date": 1467990934, "answer_id": 38270137, "question_id": 38234765, "link": "https://stackoverflow.com/questions/38234765/object-hook-does-not-address-the-full-json/38270137#38270137", "title": "object_hook does not address the full json", "body": "<p><code>object_hook</code> is applied to <em>every</em> object/dict nested in the json, from the deepest to the highest.\nSo <code>{\"codes\": [], \"name\": \"John Doe\", \"cities\": [\"New York\", \"Houston\"]}</code> is provided to the hook first.</p>\n\n<p>Your example can be fixed with the following <code>object_hook</code>:</p>\n\n<pre><code>def as_humans(dct):\n    if not 'key' in dct:\n        print(\"IT'S A NOT HUMAN\", dct)\n        return dct\n    print(\"IT'S A HUMAN\", dct)\n    source = dct['key']\n    value = dct['value']\n    codes = value['codes']\n    name = value['name']\n    cities = value['cities']\n    return (Humans(source, codes, name, cities))\n</code></pre>\n\n<p>and the ouput will be:</p>\n\n<pre><code>{'value': {'cities': ['New York', 'Houston'], 'name': 'John Doe', 'codes': []}, 'key': 'Program1'}\nIT'S A NOT HUMAN {'cities': ['New York', 'Houston'], 'name': 'John Doe', 'codes': []}\nIT'S A HUMAN {'value': {'cities': ['New York', 'Houston'], 'name': 'John Doe', 'codes': []}, 'key': 'Program1'}\nJohn Doe\n</code></pre>\n"}], "owner": {"reputation": 719, "user_id": 2648799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0b040bda30246847339b501e2149c4?s=128&d=identicon&r=PG&f=1", "display_name": "zlr", "link": "https://stackoverflow.com/users/2648799/zlr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 38270137, "answer_count": 1, "score": 1, "last_activity_date": 1467990934, "creation_date": 1467843810, "question_id": 38234765, "link": "https://stackoverflow.com/questions/38234765/object-hook-does-not-address-the-full-json", "title": "object_hook does not address the full json", "body": "<p>I have trouble understanding the way the object_hook function parses the json it is supplied by json.loads. </p>\n\n<p>Consider the following:</p>\n\n<pre><code>import json\n\nj = '{\"key\": \"Program1\",\\\n    \"value\": {\"codes\": [], \"name\": \"John Doe\", \"cities\": [\"New York\", \"Houston\"]}}'\n\nclass Humans:\n    def __init__(self, source, codes, name, cities):\n        self.source = source\n        self.codes = codes\n        self.name = name\n        self.cities = cities\n\ndef as_Humans(dct):\n    print(dct)\n    source = dct['key']\n    value = dct['value']\n    codes = value['codes']\n    name = value['name']\n    cities = value['cities']\n    return(Humans(source, codes, name, cities))\n\n\nprint(json.loads(j))\nhuman = json.loads(j, object_hook = as_Humans)        \nprint(human.name)\n</code></pre>\n\n<p>When I run this I get the following errors:</p>\n\n<pre><code>{'key': 'Program1', 'value': {'name': 'John Doe', 'cities': ['New York', 'Houston'], 'codes': []}}\n{'name': 'John Doe', 'cities': ['New York', 'Houston'], 'codes': []}\nTraceback (most recent call last):\n  File \"stackoverflow.py\", line 25, in &lt;module&gt;\n    human = json.loads(j, object_hook = as_Humans)        \n  File \"/usr/lib/python3.4/json/__init__.py\", line 331, in loads\n    return cls(**kw).decode(s)\n  File \"/usr/lib/python3.4/json/decoder.py\", line 343, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib/python3.4/json/decoder.py\", line 359, in raw_decode\n    obj, end = self.scan_once(s, idx)\n  File \"stackoverflow.py\", line 16, in as_Humans\n    source = dct['key']\nKeyError: 'key'\n</code></pre>\n\n<p>Clearly this does not work the way I think it does: from the <code>print(dct)</code> in the hook, I can see that only a subset of the original json got passed, and since that part does not have the key \"key\", well, I get a key error. </p>\n\n<p>If I modify this in order to only have <code>{\"codes\": [], \"name\": \"John Doe\", \"cities\": [\"New York\", \"Houston\"]}</code> in the json (and modify everything else accordingly), it works.</p>\n\n<p>Interestingly enough, if the json is <code>'{\"value\": {\"codes\": [], \"name\": \"John Doe\", \"cities\": [\"New York\", \"Houston\"]}}'</code>, it fails in the same way (key error on \"value\").</p>\n\n<p>What am I missing? Is my JSON string invalid? Is it possible to do this without tweaking the json first?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1299, "user_id": 2923846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e45ca52b59ce69b3844c6e8b09f278c?s=128&d=identicon&r=PG", "display_name": "lwassink", "link": "https://stackoverflow.com/users/2923846/lwassink"}, "edited": false, "score": 0, "creation_date": 1467843727, "post_id": 38234718, "comment_id": 63891136, "body": "Can you just use a dictionary to store the variable names and values?"}, {"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467843762, "post_id": 38234718, "comment_id": 63891151, "body": "use another dict to contain the other dicts, for example all_tax[tax_file], with the filename (or just year) as key, and as value the dict for that year"}, {"owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "edited": false, "score": 0, "creation_date": 1467844135, "post_id": 38234718, "comment_id": 63891263, "body": "Your question is unclear! Edit to show what you want to achieve i.e. show the output you are expecting in the code, by hardcoding!"}, {"owner": {"reputation": 39, "user_id": 6412120, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1245392502145492/picture?type=large", "display_name": "Sam He", "link": "https://stackoverflow.com/users/6412120/sam-he"}, "reply_to_user": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467895947, "post_id": 38234718, "comment_id": 63913023, "body": "@\u03bbuser@Iwassink Thank you! that should work, a dictionary of a dictionary, but is this a good structure to code in sense of memory management?"}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467843860, "post_id": 38234760, "comment_id": 63891183, "body": "i think he/she wants to group data by file, but you put everything in a single dict"}, {"owner": {"reputation": 39, "user_id": 6412120, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1245392502145492/picture?type=large", "display_name": "Sam He", "link": "https://stackoverflow.com/users/6412120/sam-he"}, "reply_to_user": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467899830, "post_id": 38234760, "comment_id": 63916002, "body": "@\u03bbuser yup, thanks for clearing it. that&#39;s the method I wanted to take to solve this problem, but i will settle at the dictionary method. Just curious is there a way of doing this tho. in the other post <a href=\"http://stackoverflow.com/questions/1373164/how-do-i-do-variable-variables-in-python\">variable variable</a> I only see it construct the name attribute of an object with getattr or using globals() for accessing, but is it possible to play around of the idea of variable of variable in python?"}], "tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": true, "score": 1, "last_activity_date": 1467844052, "last_edit_date": 1467844052, "creation_date": 1467843779, "answer_id": 38234760, "question_id": 38234718, "link": "https://stackoverflow.com/questions/38234718/referring-variable-with-another-variable-in-python/38234760#38234760", "title": "referring variable with another variable in python", "body": "<pre><code>res = {}\nfor tax_file in tax_files:\n    filename=file_dir + tax_file+'.csv'\n    with open(filename,'r') as f:\n        for line in f:\n            splitted_line = line.split()\n            res[ tax_file + '_' +splitLine[1]] = splitLine[0]\n</code></pre>\n\n<p>update</p>\n\n<pre><code>res = {}\nfor tax_file in tax_files:\n    temp = {}\n    filename=file_dir + tax_file+'.csv'\n    with open(filename,'r') as f:\n        for line in f:\n            splitted_line = line.split()\n            temp[line[0]] = temp.get(line[0],[]) +[line[1]]\n   res[ tax_file ] = temp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 3114897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qydM2.jpg?s=128&g=1", "display_name": "Shalan", "link": "https://stackoverflow.com/users/3114897/shalan"}, "is_accepted": false, "score": 0, "last_activity_date": 1467843971, "creation_date": 1467843971, "answer_id": 38234803, "question_id": 38234718, "link": "https://stackoverflow.com/questions/38234718/referring-variable-with-another-variable-in-python/38234803#38234803", "title": "referring variable with another variable in python", "body": "<p>Why not just make the dict variable a dictionary where the key is the year, and the value is just another dictionary. So that you can do</p>\n\n<pre><code>dict[tax_file][splitLine[1]] = splitLine[0]\n</code></pre>\n\n<p>This is sort of the standard way to solve the problem you're describing. And in this case you should probably also use a different name for the variable, since 'dict' is a class in python</p>\n"}], "owner": {"reputation": 39, "user_id": 6412120, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1245392502145492/picture?type=large", "display_name": "Sam He", "link": "https://stackoverflow.com/users/6412120/sam-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1467844290, "accepted_answer_id": 38234760, "answer_count": 2, "score": 0, "last_activity_date": 1467844052, "creation_date": 1467843519, "last_edit_date": 1467843621, "question_id": 38234718, "link": "https://stackoverflow.com/questions/38234718/referring-variable-with-another-variable-in-python", "closed_reason": "Duplicate", "title": "referring variable with another variable in python", "body": "<p>I'm kind of new to python\nhere's my code so far. The goal I want to accomplish is to refer a variable name using another variable.</p>\n\n<pre><code>tax_files=['2008','2009','2011','2012','2013','2014','2015']\nfile_dir='/'\nfor tax_file in tax_files:\n    filename=file_dir + tax_file+'.csv'\n    with open(filename,'r') as f:\n        for line in f:\n            splitted_line = line.split()\n            dict_(tax_file)[splitLine[1]] = splitLine[0]\n</code></pre>\n\n<p>in the last line here, dict(tax_file) is suppose to be different at different iteration eg. first iteration should be dict_2008, then dict_2009 and so forth.</p>\n\n<p>just for easier understanding, the file i read in is like this </p>\n\n<pre><code>usgaap costofgoodsold\nusgaap returnonasset\n</code></pre>\n\n<p>Can I accomplish this in python? </p>\n"}, {"tags": ["python", "flask", "gevent"], "comments": [{"owner": {"reputation": 122, "user_id": 512848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/743080215a63dec0477353eaef746b1a?s=128&d=identicon&r=PG", "display_name": "Daniel Johansson", "link": "https://stackoverflow.com/users/512848/daniel-johansson"}, "edited": false, "score": 0, "creation_date": 1474311318, "post_id": 38234669, "comment_id": 66470281, "body": "I ran in to the same issue today. Have you found an answer to this question? Related but with no explanation at all: <a href=\"http://stackoverflow.com/a/15000958\">stackoverflow.com/a/15000958</a>"}], "owner": {"reputation": 7448, "user_id": 865883, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93b1d699b8b40616d823e50e096012c2?s=128&d=identicon&r=PG&f=1", "display_name": "funseiki", "link": "https://stackoverflow.com/users/865883/funseiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1474373910, "creation_date": 1467843221, "last_edit_date": 1474373910, "question_id": 38234669, "link": "https://stackoverflow.com/questions/38234669/flask-with-gevent-blocking-requests-on-separate-browser-windows", "title": "Flask with Gevent Blocking Requests on Separate Browser Windows", "body": "<p>In the following snippet, I have a simple web server running that utilizes Flask. It appears as though all requests wait for the previous requests to complete before being processed.</p>\n\n<p>To test, I point two windows in Chrome to localhost:5000. The second waits for the first request to finish completely.</p>\n\n<p>This does not occur when I open one of those windows in 'Incognito' or when running two curl commands simultaneously.</p>\n\n<p>If anyone has an idea why two separate windows get treated as the same connection (and why an incognito one is treated separately), this would be much appreciated.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>from gevent import monkey; monkey.patch_all()\nmonkey.patch_time()\n\nfrom gevent.pywsgi import WSGIServer\n\n\nfrom flask import Flask, Response, jsonify\nimport json\nimport time\n\napp = Flask(__name__)\n\ndef toJson(obj):\n    return json.dumps(obj, indent=None, separators=(',', ':'))\n\n@app.route(\"/\")\ndef hello():\n    print 'Received Request'\n    time.sleep(5)\n    return Response(toJson({'hello': 'world'}), mimetype='application/json')\n\nprint 'Starting Server'\nhttp = WSGIServer(('', 5000), app)\nhttp.serve_forever()\n</code></pre>\n"}, {"tags": ["python", "docker", "pycharm"], "owner": {"reputation": 843, "user_id": 167077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6910d674f8ae12e1a84183e7400cf2d2?s=128&d=identicon&r=PG", "display_name": "Christian Lemer", "link": "https://stackoverflow.com/users/167077/christian-lemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467843025, "creation_date": 1467843025, "question_id": 38234623, "link": "https://stackoverflow.com/questions/38234623/image-name-dropdown-is-empty-when-configuring-remote-interpreter-docker-in-pycha", "title": "Image name dropdown is empty when configuring remote interpreter Docker in PyCharm 2016", "body": "<p>When configuring a Docker remote python interpreter in PyCharm 2016 with Docker for Mac OS X, the image name dropdown is empty. </p>\n\n<p><a href=\"https://i.stack.imgur.com/1QZxO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1QZxO.png\" alt=\"Configure Remote Python Interpreter\"></a></p>\n\n<p>The Image name field is mandatory and entering a value manually doesn't help. The same error messages is returned for 'python', 'python:3', 'python:3.5', 'library/python',...</p>\n\n<p><a href=\"https://i.stack.imgur.com/fac5T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fac5T.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the PyCharm version info</p>\n\n<p><a href=\"https://i.stack.imgur.com/JHWVQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JHWVQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the Docker version info</p>\n\n<p><a href=\"https://i.stack.imgur.com/BkT5P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BkT5P.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 5970213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ee1e826c674046ddd75f5a2c551154?s=128&d=identicon&r=PG&f=1", "display_name": "jpm", "link": "https://stackoverflow.com/users/5970213/jpm"}, "is_accepted": true, "score": 2, "last_activity_date": 1467844246, "creation_date": 1467844246, "answer_id": 38234861, "question_id": 38234594, "link": "https://stackoverflow.com/questions/38234594/numpy-linalg-lstsqr-errors/38234861#38234861", "title": "numpy.linalg.lstsqr Errors", "body": "<p>As you've written it, Cs has shape (15,800) and Os has shape (800,). But lstsq requires Os to be shape (15,) since you're trying to find the least squares solution to Cs x = Os (minimizing ||Cs x - Os||^2 over x). If you change 800 to 15 you'll see that you won't get any errors, but I don't know what you're trying to solve exactly.</p>\n\n<p>In the documentation a, in this instance Cs, has shape (M,N) and b, or Os, has shape (M,).</p>\n\n<p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html\" rel=\"nofollow\">http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 6557467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c7f54904f64d1e58c916721fff399a?s=128&d=identicon&r=PG&f=1", "display_name": "Brayden Nilson", "link": "https://stackoverflow.com/users/6557467/brayden-nilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1467848398, "creation_date": 1467848398, "answer_id": 38235515, "question_id": 38234594, "link": "https://stackoverflow.com/questions/38234594/numpy-linalg-lstsqr-errors/38235515#38235515", "title": "numpy.linalg.lstsqr Errors", "body": "<p>False alarm, I found an error in my creation of the matrices. Sorry everybody!</p>\n"}], "owner": {"reputation": 47, "user_id": 6557467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c7f54904f64d1e58c916721fff399a?s=128&d=identicon&r=PG&f=1", "display_name": "Brayden Nilson", "link": "https://stackoverflow.com/users/6557467/brayden-nilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 38234861, "answer_count": 2, "score": 1, "last_activity_date": 1467848398, "creation_date": 1467842887, "last_edit_date": 1467843519, "question_id": 38234594, "link": "https://stackoverflow.com/questions/38234594/numpy-linalg-lstsqr-errors", "title": "numpy.linalg.lstsqr Errors", "body": "<p>I have two matrices, model_con and observed_con. model_con is 15x1096, and filled with float values ranging from 0 to about 5. observed_con is size 1096 with float values within approximately the same range. When I run this code: </p>\n\n<pre><code>for j in range(1000):\n    N = []\n    for i in range(800):\n        N.append(randint(0,1095)) \n    Cs = model_con[:,N]\n    Os = observed_con[N]\n    k = np.linalg.lstsq(Cs,Os)[0]\n</code></pre>\n\n<p>I recieve the error:</p>\n\n<pre><code>numpy.linalg.linalg.LinAlgError: Incompatible dimensions\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 1, "creation_date": 1467849210, "post_id": 38234545, "comment_id": 63892766, "body": "I think you would be better off using one of the other styles of histogram (like <code>step</code>) as the offset and shrinking of the bars is actually very misleading in this case.  The &#39;stacked&#39; variaty of histograms might also be good here."}, {"owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1467876046, "post_id": 38234545, "comment_id": 63900171, "body": "Have you tried using <code>np.histogram</code> and then plotting a bar plot ?"}, {"owner": {"reputation": 11, "user_id": 6558213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53936b40c8b9e4ff576932f872720fcf?s=128&d=identicon&r=PG&f=1", "display_name": "Arjay7891", "link": "https://stackoverflow.com/users/6558213/arjay7891"}, "reply_to_user": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1467913621, "post_id": 38234545, "comment_id": 63925138, "body": "@tcaswell using step is a good idea, that also works for what I want. Stacked is not so good since it makes it harder to compare the sizes of the bins visually."}, {"owner": {"reputation": 11, "user_id": 6558213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53936b40c8b9e4ff576932f872720fcf?s=128&d=identicon&r=PG&f=1", "display_name": "Arjay7891", "link": "https://stackoverflow.com/users/6558213/arjay7891"}, "reply_to_user": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1467913772, "post_id": 38234545, "comment_id": 63925221, "body": "@hashcode55 I looked into it using this <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html\" rel=\"nofollow noreferrer\">link</a> documentation, but couldn&#39;t get it to work. Also it says that matplotlib passes the arguments for histograms to np.histogram anyways, so not sure it would make a difference"}], "owner": {"reputation": 11, "user_id": 6558213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53936b40c8b9e4ff576932f872720fcf?s=128&d=identicon&r=PG&f=1", "display_name": "Arjay7891", "link": "https://stackoverflow.com/users/6558213/arjay7891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1467848408, "creation_date": 1467842635, "last_edit_date": 1495539853, "question_id": 38234545, "link": "https://stackoverflow.com/questions/38234545/multiple-histograms-with-logarithmic-x-scale", "title": "Multiple histograms with logarithmic x scale", "body": "<p>This is a combination of <a href=\"https://stackoverflow.com/questions/18453570/opacity-misleading-when-plotting-two-histograms-at-the-same-time-with-matplotlib\">this thread</a> on multiple histograms, and <a href=\"https://stackoverflow.com/questions/6855710/how-to-have-logarithmic-bins-in-a-python-histogram\">this thread</a> on a logarithmic scales.</p>\n\n<p>I am trying to have two (or more) histograms in a plot with a logarithmic x-scale, using this code: (with some external lists)</p>\n\n<pre><code>import numpy\nimport matplotlib.pyplot as plt\n\nplt.hist([capacity_list, capacity_list2], np.logspace(-1,4,11))\nplt.gca().set_xscale(\"log\")\nplt.show()\n</code></pre>\n\n<p>It works in principle; my only problem is that the logarithmic scale also seems to affect the bin width of the histograms and so one if them always has shorter bins, which doesn't look nice:</p>\n\n<p><img src=\"https://i.stack.imgur.com/hwK4t.png\" alt=\"two histograms with logarithmic x-axis\"></p>\n\n<p>Does anybody know how to fix that?</p>\n"}, {"tags": ["python", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "edited": false, "score": 2, "creation_date": 1467842655, "post_id": 38234525, "comment_id": 63890737, "body": "We can confirm that the list returned by .keys is ordered"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "edited": false, "score": 0, "creation_date": 1467842693, "post_id": 38234525, "comment_id": 63890752, "body": "@Liam, thanks and vote up, could you point me the official document? I searched but not see related stuff mentioned."}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 2, "creation_date": 1467842721, "post_id": 38234525, "comment_id": 63890769, "body": "Could you update the title to include the question, as it stands, it&#39;s a little vague."}, {"owner": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "edited": false, "score": 1, "creation_date": 1467842764, "post_id": 38234525, "comment_id": 63890785, "body": "I haven&#39;t looked for an official document but it is crystal clear that it is ordered, I&#39;ll search a document anyways"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1467842774, "post_id": 38234525, "comment_id": 63890791, "body": "@TankorSmash, done, and vote up for your advice. If you have any thoughts on my original question, it will be great. :)"}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 1, "creation_date": 1467842820, "post_id": 38234525, "comment_id": 63890809, "body": "@LinMa Found the docs for keys, which links to items, which says it&#39;s not ordered."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "edited": false, "score": 0, "creation_date": 1467842825, "post_id": 38234525, "comment_id": 63890812, "body": "@Liam, thanks and vote up, I search here (<a href=\"https://docs.python.org/2/library/stdtypes.html#dict.keys\" rel=\"nofollow noreferrer\">docs.python.org/2/library/stdtypes.html#dict.keys</a>), but not see it is mentioned keys are ordered list."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1467842874, "post_id": 38234525, "comment_id": 63890829, "body": "@TankorSmash, thanks and vote up. I searched here (<a href=\"https://docs.python.org/2/library/stdtypes.html#dict.keys\" rel=\"nofollow noreferrer\">docs.python.org/2/library/stdtypes.html#dict.keys</a>), I do not see it is explicitly mention order or not ordered. Where do you see it is explicitly mentioning keys are not ordered?"}, {"owner": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "edited": false, "score": 1, "creation_date": 1467842904, "post_id": 38234525, "comment_id": 63890839, "body": "Look here <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.items\" rel=\"nofollow noreferrer\">docs.python.org/2/library/stdtypes.html#dict.items</a>"}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "reply_to_user": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "edited": false, "score": 1, "creation_date": 1467842935, "post_id": 38234525, "comment_id": 63890856, "body": "@Liam  Um.. keys are not ordered, so it&#39;s not crystal clear."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "edited": false, "score": 0, "creation_date": 1467842949, "post_id": 38234525, "comment_id": 63890863, "body": "@Liam, vote up. Thanks for confirming it is not ordered. :)"}, {"owner": {"reputation": 4284, "user_id": 4879665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tvytj.png?s=128&g=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/4879665/liam"}, "reply_to_user": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 1, "creation_date": 1467843005, "post_id": 38234525, "comment_id": 63890882, "body": "@Brendanabel looks like I was wrong"}], "answers": [{"comments": [{"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1467842966, "post_id": 38234574, "comment_id": 63890870, "body": "Thanks TankorSmash, vote up. And will mark it as answer in 7 mins. :))"}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1467842988, "post_id": 38234574, "comment_id": 63890874, "body": "<a href=\"https://docs.python.org/2/library/stdtypes.html#dict.keys\" rel=\"nofollow noreferrer\">docs.python.org/2/library/stdtypes.html#dict.keys</a> tells you to see the notes for <code>dict.items</code> which contains the note."}], "tags": [], "owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "is_accepted": true, "score": 7, "last_activity_date": 1467842788, "creation_date": 1467842788, "answer_id": 38234574, "question_id": 38234525, "link": "https://stackoverflow.com/questions/38234525/keys-method-of-a-python-dictionary-return-ordered-list-or-not/38234574#38234574", "title": "keys() method of a Python dictionary return ordered list or not", "body": "<p><a href=\"https://docs.python.org/2/library/stdtypes.html#dict.items\" rel=\"noreferrer\">https://docs.python.org/2/library/stdtypes.html#dict.items</a></p>\n\n<blockquote>\n  <p>CPython implementation detail: Keys and values are listed in an arbitrary order which is non-random, varies across Python implementations, and depends on the dictionary\u2019s history of insertions and deletions.</p>\n</blockquote>\n\n<p>No, you cannot rely on the ordering to be consistent.</p>\n"}, {"tags": [], "owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "is_accepted": false, "score": 2, "last_activity_date": 1467842999, "last_edit_date": 1467842999, "creation_date": 1467842975, "answer_id": 38234613, "question_id": 38234525, "link": "https://stackoverflow.com/questions/38234525/keys-method-of-a-python-dictionary-return-ordered-list-or-not/38234613#38234613", "title": "keys() method of a Python dictionary return ordered list or not", "body": "<p>From <a href=\"http://docs.python.org/tutorial/datastructures.html\" rel=\"nofollow\">http://docs.python.org/tutorial/datastructures.html</a>:</p>\n\n<blockquote>\n  <p>The keys() method of a dictionary object returns a list of all the keys used in the dictionary, in arbitrary order (if you want it sorted, just apply the sorted() function to it).</p>\n</blockquote>\n"}], "owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "closed_date": 1467843169, "accepted_answer_id": 38234574, "answer_count": 2, "score": 0, "last_activity_date": 1467842999, "creation_date": 1467842542, "last_edit_date": 1467842753, "question_id": 38234525, "link": "https://stackoverflow.com/questions/38234525/keys-method-of-a-python-dictionary-return-ordered-list-or-not", "closed_reason": "Duplicate", "title": "keys() method of a Python dictionary return ordered list or not", "body": "<p>Using Python 2.7. Want to confirm that we cannot assume .keys() method returns keys of a dictionary (as a list) in an ordered way (e.g. ascending order)? Tried a few samples, and always return ordered list, so want to double confirm. Python official document does not mention order related stuff.</p>\n"}, {"tags": ["python", "string", "typography"], "comments": [{"owner": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "edited": false, "score": 0, "creation_date": 1467842571, "post_id": 38234488, "comment_id": 63890693, "body": "What have you tried so far? How much do you trust your input? Do the quotes always correctly come in pairs?"}, {"owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1467843115, "post_id": 38234488, "comment_id": 63890918, "body": "Here you go - <a href=\"https://gist.github.com/davidtheclark/5521432\" rel=\"nofollow noreferrer\">gist.github.com/davidtheclark/5521432</a>"}, {"owner": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "reply_to_user": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1467843992, "post_id": 38234488, "comment_id": 63891220, "body": "@hashcode55 This produces HTML entities, not plain text."}, {"owner": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "reply_to_user": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "edited": false, "score": 1, "creation_date": 1467844021, "post_id": 38234488, "comment_id": 63891234, "body": "@user1582024 I added information to the post regarding your questions."}, {"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467844749, "post_id": 38234488, "comment_id": 63891421, "body": "the re.sub function supports a callback for the replacement, where you can do the % 2 stuff"}], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "edited": false, "score": 0, "creation_date": 1467843854, "post_id": 38234634, "comment_id": 63891181, "body": "I&#39;m not sure I understand. Do you suggest to use smartypants to get HTML entities and then decode these entities back to plain text?"}], "tags": [], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "is_accepted": false, "score": 0, "last_activity_date": 1467843048, "creation_date": 1467843048, "answer_id": 38234634, "question_id": 38234488, "link": "https://stackoverflow.com/questions/38234488/python-replace-dumb-quotation-marks-with-curly-ones-in-a-string/38234634#38234634", "title": "Python: Replace &quot;dumb quotation marks&quot; with \u201ccurly ones\u201d in a string", "body": "<p>Glancing through the documentation, it <em>looks</em> like you're stuck with <code>.replace</code> on top of the smartypants:</p>\n\n<pre><code>smartypants(r'\"smarty\" \\\"pants\\\"').replace('&amp;#x201C;', '\u201c').replace('&amp;#x201D;', '\u201d')\n</code></pre>\n\n<p>Might read better if you alias the magic strings, though:</p>\n\n<pre><code>html_open_quote = '&amp;#x201C;'\nhtml_close_quote = '&amp;#x201D;'\nsmart_open_quote = '\u201c'\nsmart_close_quote = '\u201d'\nsmartypants(r'\"smarty\" \\\"pants\\\"') \\\n    .replace(html_open_quote, smart_open_quote)  \\\n    .replace(html_close_quote, smart_close_quote)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 682534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2867318c3050120b8a0a6a374edcd679?s=128&d=identicon&r=PG", "display_name": "David Yen", "link": "https://stackoverflow.com/users/682534/david-yen"}, "is_accepted": false, "score": 0, "last_activity_date": 1467844908, "creation_date": 1467844908, "answer_id": 38234962, "question_id": 38234488, "link": "https://stackoverflow.com/questions/38234488/python-replace-dumb-quotation-marks-with-curly-ones-in-a-string/38234962#38234962", "title": "Python: Replace &quot;dumb quotation marks&quot; with \u201ccurly ones\u201d in a string", "body": "<p>Assuming good input, this can be done using regular expressions:</p>\n\n<pre><code># coding=utf8\nimport re\nsample = '\\'Sample Text\\' - \"But that gentleman,\" looking at Darcy, \"seemed to think the \\'country\\' was nothing at all.\" \\'Don\\'t convert here.\\''\nprint re.sub(r\"(\\s|^)\\'(.*?)\\'(\\s|$)\", r\"\\1\u2018\\2\u2019\\3\", re.sub(r\"\\\"(.*?)\\\"\", r\"\u201c\\1\u201d\", sample))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\u2018Sample Text\u2019 - \u201cBut that gentleman,\u201d looking at Darcy, \u201cseemed to think the \u2018country\u2019 was nothing at all.\u201d \u2018Don't convert here.\u2019\n</code></pre>\n\n<p>I am separating out single quotes here by assuming they either are at the beginning/end of a line or has white space around them.</p>\n"}, {"comments": [{"owner": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "edited": false, "score": 0, "creation_date": 1467847045, "post_id": 38234964, "comment_id": 63892160, "body": "Good idea, but I get an error. The string has been read from a .txt file before. Traceback (most recent call last):   File &quot;/Users/bildlich/Development/textfiles-to-mongodb/textfiles-&zwnj;&#8203;to-mongodb.py&quot;, line 173, in &lt;module&gt;     assumedSentences.extend(fileToSentenceList(textFilesDirector&zwnj;&#8203;y + filename))   File &quot;/Users/bildlich/Development/textfiles-to-mongodb/textfiles-&zwnj;&#8203;to-mongodb.py&quot;, line 147, in fileToSentenceList     numberOpenings = assumedSentence[&#39;sentence&#39;].count(quotationMark[&#39;start&#39;]) UnicodeDecodeError: &#39;ascii&#39; codec can&#39;t decode byte 0xe2 in position 0: ordinal not in range(128)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "edited": false, "score": 1, "creation_date": 1467847175, "post_id": 38234964, "comment_id": 63892193, "body": "OK, so it is latin-1 encoded data? basically you are trying to concatenate an ascii string to a latin-1 encode string, you sould use unicode everywhere and encode to  str if required."}, {"owner": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "edited": false, "score": 0, "creation_date": 1467983067, "post_id": 38234964, "comment_id": 63954252, "body": "Thanks for the hint. I solved it by A) making sure that the input text is encoded with UTF-8 using io.open and B) encoding the quotationMark[&#39;start&#39;] in UTF-8 as well."}, {"owner": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "edited": false, "score": 0, "creation_date": 1467983507, "post_id": 38234964, "comment_id": 63954548, "body": "I added the solution to the original question."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1467847690, "last_edit_date": 1467847690, "creation_date": 1467844916, "answer_id": 38234964, "question_id": 38234488, "link": "https://stackoverflow.com/questions/38234488/python-replace-dumb-quotation-marks-with-curly-ones-in-a-string/38234964#38234964", "title": "Python: Replace &quot;dumb quotation marks&quot; with \u201ccurly ones\u201d in a string", "body": "<p>You can use the  <code>HTMLParser</code> to unescape the html entities returned from smartypants:</p>\n\n<pre><code>In [32]: from HTMLParser import HTMLParser\n\nIn [33]: s = \"&amp;#x201C;But that gentleman,&amp;#x201D;\"\n\nIn [34]: print HTMLParser().unescape(s)\n\u201cBut that gentleman,\u201d\nIn [35]: HTMLParser().unescape(s)\nOut[35]: u'\\u201cBut that gentleman,\\u201d'\n</code></pre>\n\n<p>To avoin encoding errors, you should either use <code>io.open</code> when opening the file and specify <code>encoding=\"the_encoding\"</code> or decode the strings to unicode:</p>\n\n<pre><code> In [11]: s\nOut[11]: '&amp;#x201C;But that gentleman,&amp;#x201D;\\xe2'\n\nIn [12]: print  HTMLParser().unescape(s.decode(\"latin-1\"))\n\u201cBut that gentleman,\u201d\u00e2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2333228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79aa88a876a447f4f6adbebcb28ae837?s=128&d=identicon&r=PG", "display_name": "JanH", "link": "https://stackoverflow.com/users/2333228/janh"}, "is_accepted": false, "score": 1, "last_activity_date": 1591639409, "creation_date": 1591639409, "answer_id": 62268435, "question_id": 38234488, "link": "https://stackoverflow.com/questions/38234488/python-replace-dumb-quotation-marks-with-curly-ones-in-a-string/62268435#62268435", "title": "Python: Replace &quot;dumb quotation marks&quot; with \u201ccurly ones\u201d in a string", "body": "<p>Since the question was originally asked, Python smartypants has gained <a href=\"https://pythonhosted.org/smartypants/reference.html#smartypants._Attr.u\" rel=\"nofollow noreferrer\">an option</a> for directly outputting the replaced characters in Unicode:</p>\n\n<blockquote>\n  <p>u = 256</p>\n  \n  <p>Output Unicode characters instead of numeric character references, for example, from &#8220; to left double quotation mark (\u201c) (U+201C).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 20965, "user_id": 191246, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/zRo29.png?s=128&g=1", "display_name": "ccpizza", "link": "https://stackoverflow.com/users/191246/ccpizza"}, "is_accepted": false, "score": 0, "last_activity_date": 1593012303, "last_edit_date": 1593012303, "creation_date": 1593011605, "answer_id": 62558308, "question_id": 38234488, "link": "https://stackoverflow.com/questions/38234488/python-replace-dumb-quotation-marks-with-curly-ones-in-a-string/62558308#62558308", "title": "Python: Replace &quot;dumb quotation marks&quot; with \u201ccurly ones\u201d in a string", "body": "<p>For the simplest possible use case there is no need for regular expressions:</p>\n<pre class=\"lang-python prettyprint-override\"><code>quote_chars_counts = {\n    '&quot;': 0,\n    &quot;'&quot;: 0,\n    &quot;`&quot;: 0\n}\n\n\ndef to_smart_quotes(s):\n    output = []\n\n    for c in s:\n        if c in quote_chars_counts.keys():\n            replacement = (quote_chars_counts[c] % 2 == 0) and '\u201c' or '\u201d'\n            quote_chars_counts[c] = quote_chars_counts[c] + 1\n            new_ch = replacement\n        else:\n            new_ch = c\n        output.append(new_ch)\n\n    return ''.join(output)\n</code></pre>\n<p>If needed, it's trivial to modify to pull replacements from a replacement map rather than using literals.</p>\n"}], "owner": {"reputation": 905, "user_id": 836005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98e030e13d66c976cec20bb4cea9ff69?s=128&d=identicon&r=PG", "display_name": "bootsmaat", "link": "https://stackoverflow.com/users/836005/bootsmaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2036, "favorite_count": 0, "accepted_answer_id": 38234964, "answer_count": 5, "score": 2, "last_activity_date": 1593012303, "creation_date": 1467842366, "last_edit_date": 1467983478, "question_id": 38234488, "link": "https://stackoverflow.com/questions/38234488/python-replace-dumb-quotation-marks-with-curly-ones-in-a-string", "title": "Python: Replace &quot;dumb quotation marks&quot; with \u201ccurly ones\u201d in a string", "body": "<p>I have a string like this:</p>\n\n<h1>\"But that gentleman,\" looking at Darcy, \"seemed to think the country was nothing at all.\"</h1>\n\n<p>I want this output:</p>\n\n<h1>\u201cBut that gentleman,\u201d looking at Darcy, \u201cseemed to think the country was nothing at all.\u201d</h1>\n\n<p>Likewise, dumb single quotes should be converted to their curly equivalents. <a href=\"http://practicaltypography.com/straight-and-curly-quotes.html\" rel=\"nofollow\">Read about the typographic rules here if you are interested.</a></p>\n\n<p>My guess is that this has been solved before but I can't find a library or script to do it. <a href=\"http://daringfireball.net/projects/smartypants/\" rel=\"nofollow\">SmartyPants</a> (Perl) is the mother of all libraries to do this and there is a <a href=\"https://pypi.python.org/pypi/smartypants\" rel=\"nofollow\">python port</a>. But its output are HTML entities: <code>&amp;#x201C;But that gentleman,&amp;#x201D;</code> I just want a plain string with curly quotes. Any ideas?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I solved it as suggested by Padraig Cunningham:</p>\n\n<ol>\n<li>Use smartypants to make the typographic corrections</li>\n<li>Use <code>HTMLParser().unescape</code> to convert the HTML entities back to Unicode</li>\n</ol>\n\n<p>This approach may be problematic if your input text contains HTML entities that you wish not to convert but in my case it's ok.</p>\n\n<p><strong>End of Update</strong></p>\n\n<p><em>Can the input be trusted?</em></p>\n\n<p>The input can only be trusted so far. The string could contain a non-closed double quote: <code>\"But be that gentleman, looking at Dary</code>. It could also contain a non-closed single quote: <code>'But be that gentleman, looking at Dary</code>. Finally, it could contain a single-quote that is meant to be an apostrophe: <code>Don't go there.</code></p>\n\n<p>I have already implemented an alogrithm that tries to close these lost quotes correctly, so this is not part of the question. For completeness, here is the code that closes lost quotes:</p>\n\n<pre><code>quotationMarkDictionary = [{\n    'start': '\"',\n    'end': '\"',\n    },{\n    'start': '\u201c',\n    'end': '\u201d',\n    },{\n    'start': '\\'',\n    'end': '\\'',\n    },{\n    'start': '\u2018',\n    'end': '\u2019'\n    },{\n    'start': '(',\n    'end': ')'\n    },{\n    'start': '{',\n    'end': '}'\n    },{\n    'start': '[',\n    'end': ']'\n    }]\n\n'''If assumedSentence has quotation marks (single, double, \u2026) and the \nnumber of opening quotation marks is larger than the number of closing    \nquotation marks, append a closing quotation mark at the end of the \nsentence. Likewise, add opening quotation marks to the beginning of the \nsentence if there are more closing marks than opening marks.'''\nfor quotationMark in quotationMarkDictionary:\n  numberOpenings = assumedSentence['sentence'].count(quotationMark['start'])\n  numberClosings = assumedSentence['sentence'].count(quotationMark['end'])\n  # Are the opening and closing marks the same? ('Wrong' marks.) Then just make sure there is an even number of them\n  if quotationMark['start'] is quotationMark['end'] and numberOpenings % 2 is not 0:\n    # If sentence starts with this quotation mark, put the new one at the end\n    if assumedSentence['sentence'].startswith(quotationMark['start']):\n      assumedSentence['sentence'] += quotationMark['end']\n    else:\n      assumedSentence['sentence'] = quotationMark['end'] + assumedSentence['sentence']\n  elif numberOpenings &gt; numberClosings:\n    assumedSentence['sentence'] += quotationMark['end']\n  elif numberOpenings &lt; numberClosings:\n     assumedSentence['sentence'] = quotationMark['start'] + assumedSentence['sentence']\n</code></pre>\n"}, {"tags": ["python", "matlab", "scipy", "interpolation"], "answers": [{"tags": [], "owner": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "is_accepted": true, "score": 3, "last_activity_date": 1467847806, "last_edit_date": 1467847806, "creation_date": 1467847247, "answer_id": 38235352, "question_id": 38234448, "link": "https://stackoverflow.com/questions/38234448/roots-of-piecewise-cubic-hermite-interpolator-with-python/38235352#38235352", "title": "roots of piecewise cubic hermite interpolator with python", "body": "<p>This is a bug in scipy.</p>\n\n<p>(Please report it on <a href=\"https://github.com/scipy/scipy/issues\" rel=\"nofollow\">https://github.com/scipy/scipy/issues</a>)</p>\n\n<p>As a workaround, you can convert to the power basis manually:</p>\n\n<pre><code>In [1]: from scipy.interpolate import pchip\n\nIn [2]: import numpy as np\n\nIn [3]: x = np.arange(10)\n\nIn [4]: y = [1., 1., 3., 2., 1., 1., 1.5, 2., 8., 1.]\n\nIn [5]: s = pchip(x, y)\n\nIn [6]: from scipy.interpolate import PPoly\n\nIn [7]: pp = PPoly.from\nPPoly.from_bernstein_basis  PPoly.from_spline\n\nIn [7]: pp = PPoly.from_bernstein_basis(s)\n\nIn [8]: pp.roots()\nOut[8]: array([  9.07179677,  22.92820323])\n</code></pre>\n\n<p>EDIT: and if do use this workaround and you have non-default <code>axis</code>, best check that the axis is handled when converting. If it's not, please report it too.</p>\n"}], "owner": {"reputation": 43, "user_id": 6558100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5559e63cbd2f62c8ef3473f0e0872e26?s=128&d=identicon&r=PG&f=1", "display_name": "olk", "link": "https://stackoverflow.com/users/6558100/olk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 38235352, "answer_count": 1, "score": 4, "last_activity_date": 1467847806, "creation_date": 1467842175, "question_id": 38234448, "link": "https://stackoverflow.com/questions/38234448/roots-of-piecewise-cubic-hermite-interpolator-with-python", "title": "roots of piecewise cubic hermite interpolator with python", "body": "<p>I would like to do some piecewise cubic hermite interpolation and get the <strong>roots</strong> of the polynomials. (I used to do this in matlab but would now like to implement this in python 3.4).<br>\nI tried to use the scipy PchipInterpolator. Interpolation is OK but when I tried to retrieve the roots I got this error...<br>\nI now am stuck here and could'nt find any workaround. Here is a simple code reproducing what I do and the exact error message...</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom scipy import interpolate, __version__\nimport numpy as np\n\nprint('numpy : ' + np.__version__)\nprint('scipy :' + __version__)\n\nx = np.arange(10)\ny = [1., 1., 3., 2., 1., 1., 1.5, 2., 8., 1.]\nf = interpolate.PchipInterpolator(x, y, axis=0, extrapolate=None)\nprint(f.roots()) # this produces an error !\n\nxnew = np.arange(0, 9, 0.1)\nynew = f(xnew)   # use interpolation function returned by `PchipInterpolator`\nplt.plot(x, y, 'o', xnew, ynew, '-')\nplt.show()\n</code></pre>\n\n<p>The error message :</p>\n\n<pre><code>numpy : 1.10.1\nscipy :0.17.1\nTraceback (most recent call last):\n  File \"test.py\", line 11, in &lt;module&gt;\n    print(f.roots()) # this produces an error !\n  File \"/usr/local/lib/python3.4/dist-packages/scipy/interpolate/_monotone.py\", line 105, in roots\n    return (PPoly.from_bernstein_basis(self._bpoly)).roots()\nAttributeError: 'PchipInterpolator' object has no attribute '_bpoly'\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>However scipy docs say : \"roots()   Return the roots of the interpolated function.\" </p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["python", "image", "python-3.x", "compare", "hashcode"], "comments": [{"owner": {"reputation": 3396, "user_id": 1103734, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/87a5e4ab78c197e14ca8cbe22e84b53c?s=128&d=identicon&r=PG", "display_name": "ollien", "link": "https://stackoverflow.com/users/1103734/ollien"}, "edited": false, "score": 0, "creation_date": 1467842333, "post_id": 38234412, "comment_id": 63890580, "body": "Try using Pillow. <a href=\"https://python-pillow.org/\" rel=\"nofollow noreferrer\">python-pillow.org</a>"}, {"owner": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "edited": false, "score": 0, "creation_date": 1467842533, "post_id": 38234412, "comment_id": 63890661, "body": "Better compare  hashes (<code>sha</code> or <code>md5</code> or maybe perceptual hashes) of files instead of file size."}], "answers": [{"tags": [], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "is_accepted": true, "score": 1, "last_activity_date": 1467843953, "last_edit_date": 1495542153, "creation_date": 1467843953, "answer_id": 38234799, "question_id": 38234412, "link": "https://stackoverflow.com/questions/38234412/how-can-i-use-python-to-locate-two-files-with-identical-names-and-check-if-they/38234799#38234799", "title": "How can I use Python to locate two files with identical names and check if they&#39;re equal?", "body": "<p>Comparing file size really isn't enough, is it? You could easily have two files, a.jpg in folder A and a.jpg in folder B. They are both exactly 16 kb, except that one is a picture of a dog and one is a picture of a cat. </p>\n\n<p>What may be valuable is to <code>hash</code> every image in the list. In Python, you can take anything - numbers, strings, images, etc - and call <code>hash()</code> on it. </p>\n\n<p>A hash is a numeric representation of a specific set of data. Barring some rare exceptions, hashes are <em>exactly</em> unique to that data. No other sets of data, except those that are exactly the same, will have that hash.</p>\n\n<p>Some examples:</p>\n\n<p><code>&gt; hash('test')</code></p>\n\n<p>will output</p>\n\n<p><code>2314058222102390712</code></p>\n\n<p><code>&gt; hash('Test')</code></p>\n\n<p><code>-1504849438355502056</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3735553/how-do-i-read-an-image-file-using-python\">This question</a> describes how to load an image in Python. Then, just call <code>hash</code> on each image. <a href=\"https://stackoverflow.com/questions/17585730/what-does-hash-do-in-python\">This</a> describes what a hash is if I was unclear.</p>\n"}], "owner": {"reputation": 35, "user_id": 6552796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c0a4ad33972ca3b47b4f0d68f3212d?s=128&d=identicon&r=PG&f=1", "display_name": "Justlieb", "link": "https://stackoverflow.com/users/6552796/justlieb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1467859464, "accepted_answer_id": 38234799, "answer_count": 1, "score": 1, "last_activity_date": 1467901535, "creation_date": 1467842020, "last_edit_date": 1467901535, "question_id": 38234412, "link": "https://stackoverflow.com/questions/38234412/how-can-i-use-python-to-locate-two-files-with-identical-names-and-check-if-they", "closed_reason": "Needs more focus", "title": "How can I use Python to locate two files with identical names and check if they&#39;re equal?", "body": "<p>Summary:  How can I use Python to locate two files with identical names (in known locations) and see if they are identical using hash.   </p>\n\n<p>I currently have two folders, <em>Folder1</em> and <em>Folder2</em>.  I am trying to figure out how I can have Python <strong>move file by file through <em>Folder1</em></strong>.  For each file (which is a .jpg image), I would like to <strong>use hash to get a unique integer for the image and copy the file name to a string</strong>.  From this string, I plan to find the potential identical copy of that image in <em>Folder2</em> and then use hash to see if they are identical.</p>\n\n<p>I am new to Python and this is my first post on Stack Overflow.  If there is any information I should include or area where I was unclear, please let me know and I will respond as soon as possible.  Thanks, and thank you to Ares for recommending the use of hash.</p>\n"}, {"tags": ["python", "c++", "opencv", "video", "camera"], "answers": [{"tags": [], "owner": {"reputation": 9525, "user_id": 777285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I1WDv.png?s=128&g=1", "display_name": "Arnaud P", "link": "https://stackoverflow.com/users/777285/arnaud-p"}, "is_accepted": false, "score": 4, "last_activity_date": 1476881204, "last_edit_date": 1476881204, "creation_date": 1476873622, "answer_id": 40129056, "question_id": 38234407, "link": "https://stackoverflow.com/questions/38234407/opencv-videocapture-hangs-freeze-when-camera-disconnected-instead-of-returning/40129056#40129056", "title": "opencv videocapture hangs/freeze when camera disconnected instead of returning &quot;False&quot;", "body": "<p>I'm experiencing the same issue with the webcam of my MacBook, when the lid is closed (i.e. cam not available). After a quick look at the doc, the <code>VideoCapture</code> constructor doesn't seem to have any <code>timeout</code> parameter. So the solution has to involve forcibly interrupting this call from Python.</p>\n\n<p>After yet more readings about Python's <code>asyncio</code> then <code>threading</code> in general, I couldn't come up with any clue on how to interrupt a method which is busy outside the interpreter. So I resorted to creating a daemon per <code>VideoCapture</code> call, and let them die on their own.</p>\n\n<pre><code>import threading, queue\n\nclass VideoCaptureDaemon(threading.Thread):\n\n    def __init__(self, video, result_queue):\n        super().__init__()\n        self.daemon = True\n        self.video = video\n        self.result_queue = result_queue\n\n    def run(self):\n        self.result_queue.put(cv2.VideoCapture(self.video))\n\n\ndef get_video_capture(video, timeout=5):\n    res_queue = queue.Queue()\n    VideoCaptureDaemon(video, res_queue).start()\n    try:\n        return res_queue.get(block=True, timeout=timeout)\n    except queue.Empty:\n        print('cv2.VideoCapture: could not grab input ({}). Timeout occurred after {:.2f}s'.format(video, timeout))\n</code></pre>\n\n<p>If anyone has better, I'm all ears.</p>\n"}], "owner": {"reputation": 107, "user_id": 6068028, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22871e3d63d75f1b6a533a1392846d92?s=128&d=identicon&r=PG&f=1", "display_name": "Alvin C", "link": "https://stackoverflow.com/users/6068028/alvin-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3343, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1476881204, "creation_date": 1467841986, "question_id": 38234407, "link": "https://stackoverflow.com/questions/38234407/opencv-videocapture-hangs-freeze-when-camera-disconnected-instead-of-returning", "title": "opencv videocapture hangs/freeze when camera disconnected instead of returning &quot;False&quot;", "body": "<p>I'm using OpenCV-Python 3.1  Following the example code from here:\n<a href=\"http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html\" rel=\"nofollow\">http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html</a> and using a http camera stream instead of the default camera, the read function in videocapture never returns \"False\" (or anything for that matter) when the camera is physically disconnected, thus hanging/freezing the program entirely.  Does anyone know how to fix this?</p>\n\n<pre><code>import numpy as np\nimport cv2\n\ncap = cv2.VideoCapture('http://url')\n\nret = True\n\nwhile(ret):\n    # Capture frame-by-frame\n    ret, frame = cap.read()\n    print(ret)\n    # Our operations on the frame come here\n    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\n\n    # Display the resulting frame\n    cv2.imshow('frame',gray)\n    if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n        break\n\n# When everything done, release the capture\ncap.release()\ncv2.destroyAllWindows()\n</code></pre>\n"}, {"tags": ["python", "inheritance", "pyqt", "pyqt4"], "answers": [{"tags": [], "owner": {"reputation": 281, "user_id": 4210253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/slxxr.jpg?s=128&g=1", "display_name": "iSplasher", "link": "https://stackoverflow.com/users/4210253/isplasher"}, "is_accepted": false, "score": 2, "last_activity_date": 1467929168, "creation_date": 1467929168, "answer_id": 38256036, "question_id": 38234397, "link": "https://stackoverflow.com/questions/38234397/pyqt-make-custom-pushbutton-inheritance-from-class-which-has-arguments/38256036#38256036", "title": "PyQt Make Custom PushButton / inheritance from class which has arguments", "body": "<p>You'd want to pass <code>MainWindow</code> as the parent of your checkbox:</p>\n\n<pre><code>class Valve(QtGui.QCheckBox):\n\n    def __init__(self, parent, x, y, inputs=[], outputs=[]):\n        QtGui.QCheckBox.__init__(self, parent)\n\nclass MainWindow(QtGui.QWidget):\n\n    def initUI(self):\n        self.button1 = Valve(self, 5, 6)\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 5211467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/504bc5bcaf1afb1056683830674cdc68?s=128&d=identicon&r=PG&f=1", "display_name": "ihsancemil", "link": "https://stackoverflow.com/users/5211467/ihsancemil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1467929168, "creation_date": 1467841940, "question_id": 38234397, "link": "https://stackoverflow.com/questions/38234397/pyqt-make-custom-pushbutton-inheritance-from-class-which-has-arguments", "title": "PyQt Make Custom PushButton / inheritance from class which has arguments", "body": "<p>I'm new at PyQt I want to build my own Check Box which inheritance from QCheckBox.</p>\n\n<pre><code>class Valve(QtGui.QCheckBox):\n    def __init__(self, x, y, inputs=[], outputs=[]):\n        QtGui.QCheckBox.__init__(self)\n        self.sources = inputs\n        self.outputs = outputs\n        self.move(x, y)\n\n    def is_fillable(self):\n        for source in self.sources:\n            if source.value == 100: \n                return 1\n        return 0\n\n    def stateChanged():\n        if isChecked():\n            for output in self.outputs:\n                if self.is_fillable():\n                    output.fill(1)\n        else:\n            for output in self.outputs:\n                if self.is_fillable:\n                    output.fill(-1)\n\nclass MainWindow(QtGui.QWidget):\n    def __init__(self):\n        QtGui.QWidget.__init__(self)\n        self.initUI()\n\n    def initUI(self):\n        self.button1 = Valve('', self, 5, 6)\n\n        self.setGeometry(0, 0, 500, 500)\n        self.show()\n\ndef main():\n\n    app = QtGui.QApplication(sys.argv)\n    ex = MainWindow()\n    sys.exit(app.exec_())\n\nif __name__ == '__main__':\n    main() \n</code></pre>\n\n<p>Description what I did here: </p>\n\n<p>I want to build water system. I will use progress bars as pipe so in my code inputs and outputs will be QProgressBar and I will fill them with their values.</p>\n\n<p>However my Valve(CheckBox) is not show up at my Window Because I couldn't figure how to inheritance from QCheckButton out since it has argument.</p>\n\n<p>Thanks for answers</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 421, "user_id": 5211467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/504bc5bcaf1afb1056683830674cdc68?s=128&d=identicon&r=PG&f=1", "display_name": "ihsancemil", "link": "https://stackoverflow.com/users/5211467/ihsancemil"}, "edited": false, "score": 0, "creation_date": 1467842098, "post_id": 38234389, "comment_id": 63890462, "body": "<code>try: foo() ; except: pass</code> dirty but you can try it"}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 2, "last_activity_date": 1467843164, "last_edit_date": 1467843164, "creation_date": 1467842481, "answer_id": 38234514, "question_id": 38234389, "link": "https://stackoverflow.com/questions/38234389/elif-statement-to-check-for-sheet-range/38234514#38234514", "title": "Elif statement to check for sheet range", "body": "<p>The <code>if...elif</code> isn't entirely necessary. </p>\n\n<p>You can use <a href=\"https://docs.python.org/2.7/library/itertools.html#itertools.islice\" rel=\"nofollow\"><code>itertools.islice</code></a> to <em>slice</em> your <code>Sheets</code>:</p>\n\n<pre><code>from itertools import islice\n\nfor file in files:\n    wb = openpyxl.load_workbook(file)\n    Sheets = wb.worksheets\n    for sheet in islice(Sheets, 2, 9):\n        # do something with sheet\n</code></pre>\n\n<p>If <code>Sheets</code> isn't up to length <code>9</code>, the iteration stops at the length of <code>Sheets</code>, say <code>5</code>.</p>\n"}], "owner": {"reputation": 135, "user_id": 4877501, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1389b175e0abc6d4a192771e3af4e74f?s=128&d=identicon&r=PG&f=1", "display_name": "wisenhiemer", "link": "https://stackoverflow.com/users/4877501/wisenhiemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38234514, "answer_count": 1, "score": -1, "last_activity_date": 1467873715, "creation_date": 1467841906, "last_edit_date": 1467873715, "question_id": 38234389, "link": "https://stackoverflow.com/questions/38234389/elif-statement-to-check-for-sheet-range", "title": "Elif statement to check for sheet range", "body": "<p>I have several Excel files some with 10 worksheets others with 8. In my code I looping through all files and selecting a sheet range of 2 to 9. However, since I have some workbooks with 8 sheets I would like to do the same loop or action in these workbooks instead of getting the \"sheets = wb.worksheets[n]\nIndexError: list index out of range\". Can I use elif to accomplish this?</p>\n\n<pre><code>import glob\nimport openpyxl\n\npath = 'C:/ExcelFolder/*.xlsx'\nfiles = glob.glob(path)\nfor file in files:\n  wb = openpyxl.load_workbook(file)\n  Sheet = wb.worksheets\n  if Sheet is range(2, 9):\n    for n in range(2, 9):\n        sheets = wb.worksheets[n]\n        #Do something\n  elif Sheet is range(2, 5):\n    for n in range(2, 5):\n        sheets = wb.worksheets[n]\n        #Do something\n</code></pre>\n"}, {"tags": ["python", "mocking"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467841733, "post_id": 38234302, "comment_id": 63890306, "body": "The fact that it&#39;s <code>StorageSaver</code> instead of <code>some_module.StorageSaver</code> here suggests that you might be trying to do this from inside the module that defines <code>StorageSaver</code>, in which case this probably isn&#39;t a unit test and you <i>really</i> shouldn&#39;t be using <code>patch</code> at all. Alternatively, maybe you used a <code>from</code> import, in which case you should just not use <code>from</code> imports for this thing."}, {"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467842276, "post_id": 38234302, "comment_id": 63890559, "body": "It&#39;s indeed a unittest, I originally used patch &#39;module.StorageSaver&#39; whilst it worked on that particular test case, when I run the whole test suite, it didn&#39;t work because some other module imports affected it, I have not wrapped my mind around it yet, but the test suite works when I explicitly imported <code>StorageSaver</code> and patch it&#39;s attributes."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467842687, "post_id": 38234302, "comment_id": 63890751, "body": "Sounds like the other modules are using <code>StorageSaver</code> in a way that doesn&#39;t play well with patching. It could be something as simple as those modules importing it with a <code>from</code> import, or it could be that they need to do some static initialization that uses <code>StorageSaver</code> and won&#39;t pick up any attempts to replace it. There&#39;s no way to use <code>patch</code> to outright replace an object with a mock; you can only replace specific references."}, {"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467844176, "post_id": 38234302, "comment_id": 63891274, "body": "ok, thank you for the info, I will have another look at how other modules are affecting it."}, {"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467845699, "post_id": 38234302, "comment_id": 63891719, "body": "I just realised one of my unittest against the storagesaver is directly importing it to run tests against it., so this very likely the cause of my other unittests not working properly."}], "owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1467841516, "creation_date": 1467841516, "question_id": 38234302, "link": "https://stackoverflow.com/questions/38234302/how-to-mock-use-patch-object-to-patch-the-whole-object-in-python", "title": "How to mock use patch.object to patch the whole object in python", "body": "<p>I have been using <code>patch.object(obj, attribute)</code> to patch an attribute of <code>obj</code>:</p>\n\n<pre><code>with patch.object(StorageSaver, 'save_listing'):\n    ImportJob.objects.import_feed(feed.id)\n</code></pre>\n\n<p>but is there a way to patch the whole <code>obj</code>? Eg.</p>\n\n<pre><code>with patch.object(StorageSaver):\n    ...\n</code></pre>\n"}, {"tags": ["python", "datetime", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1467842548, "post_id": 38234251, "comment_id": 63890678, "body": "The many-to-one example you provided happen to merge on date time that is the same.  Was that intentional?  If not, can you provide an example of what &quot;close&quot; means and how you&#39;d want it handled?"}, {"owner": {"reputation": 301, "user_id": 6273709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7fb089fe24e704c75bfe58428ceb2ae?s=128&d=identicon&r=PG&f=1", "display_name": "sos", "link": "https://stackoverflow.com/users/6273709/sos"}, "reply_to_user": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1467842711, "post_id": 38234251, "comment_id": 63890762, "body": "@unutbu: yes! Sorry, it was intended to be 2016-06-05 08:30:10"}, {"owner": {"reputation": 301, "user_id": 6273709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7fb089fe24e704c75bfe58428ceb2ae?s=128&d=identicon&r=PG&f=1", "display_name": "sos", "link": "https://stackoverflow.com/users/6273709/sos"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1467842768, "post_id": 38234251, "comment_id": 63890787, "body": "@piRSquared: yes! this was intentional. i wanted duplicates of the index to be retained"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1467842844, "post_id": 38234251, "comment_id": 63890819, "body": "What I meant was, is this a simple merge on equal values or do you need some fuzzy matching of datetimes?"}], "answers": [{"tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": true, "score": 3, "last_activity_date": 1467842828, "creation_date": 1467842828, "answer_id": 38234584, "question_id": 38234251, "link": "https://stackoverflow.com/questions/38234251/merge-join-a-dataframe-based-on-nearest-datetime-to-different-dataframe/38234584#38234584", "title": "Merge/join a dataframe based on nearest datetime to different dataframe", "body": "<p>Do the <code>reindex</code> on the unique values of the other index.  You'll pick up the duplicates during the join.</p>\n\n<pre><code>object3 = object2.join(object1.reindex(object2.index.unique(), method='nearest'))\n</code></pre>\n\n<p>The resulting output:</p>\n\n<pre><code>                     x_2  y_2  x_1  y_1\nDateTime                               \n2016-07-05 08:30:00   13   14    1    2\n2016-07-05 08:30:05   15   16    9   10\n2016-07-05 08:30:05   17   18    9   10\n2016-07-05 08:30:10   19   20   11   12\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 6273709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7fb089fe24e704c75bfe58428ceb2ae?s=128&d=identicon&r=PG&f=1", "display_name": "sos", "link": "https://stackoverflow.com/users/6273709/sos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 2, "accepted_answer_id": 38234584, "answer_count": 1, "score": 2, "last_activity_date": 1467843313, "creation_date": 1467841273, "last_edit_date": 1467843313, "question_id": 38234251, "link": "https://stackoverflow.com/questions/38234251/merge-join-a-dataframe-based-on-nearest-datetime-to-different-dataframe", "title": "Merge/join a dataframe based on nearest datetime to different dataframe", "body": "<p>I have a pandas dataframe of a pretty high length (100,000+), and I want to merge this dataframe with another based on closest element (by index) to a different dataframe object. For example, let us say that object 1 is the following: </p>\n\n<pre><code> DateTime                x_1   y_1\n 2016-07-05 08:30:00     1     2\n 2016-07-05 08:30:01     3     4 \n 2016-07-05 08:30:02     5     6\n 2016-07-05 08:30:03     7     8\n 2016-07-05 08:30:05     9     10\n 2016-07-05 08:30:11     11    12\n</code></pre>\n\n<p>and object 2 is the following:</p>\n\n<pre><code> DateTime                x_2   y_2\n 2016-07-05 08:30:00     13    14\n 2016-07-05 08:30:05     15    16\n 2016-07-05 08:30:05     17    18\n 2016-07-05 08:30:10     19    20\n</code></pre>\n\n<p>I want to return a new object, object3, which has the same length as object2, and now contains items from object1 which are closest to the times of object2. Object3, in this case, would look like this:</p>\n\n<pre><code> DateTime                x_2   y_2   x_1   y_1  \n 2016-07-05 08:30:00     13    14    1     2\n 2016-07-05 08:30:05     15    16    9     10\n 2016-07-05 08:30:05     17    18    9     10\n 2016-07-05 08:30:10     19    20    11    12\n</code></pre>\n\n<p>I currently do something along these lines to get this to work, but I get reindex errors (non-unique index):</p>\n\n<p><code>object3 = object2.join(object1.reindex(object2.index, method='nearest'), how='left')</code></p>\n\n<p>which returns a valueerror:</p>\n\n<p><code>ValueError: cannot reindex a non-unique index with a method or limit</code></p>\n"}, {"tags": ["python", "sqlite", "sqlalchemy", "wxpython", "wxformbuilder"], "answers": [{"tags": [], "owner": {"reputation": 5783, "user_id": 395984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d4a16205f08542f455a3f1a15ab2ce?s=128&d=identicon&r=PG", "display_name": "RobinDunn", "link": "https://stackoverflow.com/users/395984/robindunn"}, "is_accepted": false, "score": 1, "last_activity_date": 1468279786, "creation_date": 1468279786, "answer_id": 38317767, "question_id": 38234238, "link": "https://stackoverflow.com/questions/38234238/how-do-i-reset-the-allownone-status-of-a-wxdatepickerctrl/38317767#38317767", "title": "How do I reset the ALLOWNONE status of a wxDatePickerCtrl?", "body": "<p>The <code>wxDP_ALLOWNONE</code> is a flag so it shouldn't be losing that unless it is explicitly removed.  I assume that what you mean is the visual state of the widget and what is done for that is up to the native control and how it chooses to represent the current value. The usual pattern for things like this in wxWidgets is to use an invalid object of the given type to represent empty, null, default, etc.  So I would try using <code>self.m_datePicker23.SetValue(wx.DefaultDateTime)</code>.</p>\n"}], "owner": {"reputation": 361, "user_id": 4824365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a8a5a7aa0ba0e433e01ae2fa5f0f28c3?s=128&d=identicon&r=PG", "display_name": "Finchy70", "link": "https://stackoverflow.com/users/4824365/finchy70"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468279786, "creation_date": 1467841210, "question_id": 38234238, "link": "https://stackoverflow.com/questions/38234238/how-do-i-reset-the-allownone-status-of-a-wxdatepickerctrl", "title": "How do I reset the ALLOWNONE status of a wxDatePickerCtrl?", "body": "<p>The code below uses sqlalchemy to check an sqlite3 mapped table(Ppe) for dates.\nIt then uses these dates to populate a field on a wxForm on a comboBox event.</p>\n\n<pre><code>def refresh_ppe( self, event ):\n        selected_user = str(self.m_comboBox31.GetValue())\n        session = start_session()\n        updater = session.query(Ppe).filter(Ppe.name == selected_user).first()\n        new_date = updater.ear_defenders\n        try:\n            self.m_datePicker23.SetValue(_pydate2wxdate(new_date))\n        except AssertionError:\n            self.m_datePicker23.SetValue(None)\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/uBXPa.png\" rel=\"nofollow\">Image of control in question.</a></p>\n\n<p>What I'm trying to do is when I repopulate the table with an entry with a Null date for Ear Defenders (because they haven't been issued them) that it resets the ALLOWNONE state of the DatePickerCtrl and clears the checkbox.</p>\n\n<p>I have tried self.m_panel1681.Refresh() (the parent panel) and also tried hiding and showing the panel and the DatePickerCtrl.</p>\n\n<p>Any help would be greatfully recieved.</p>\n\n<p>Thanks\nPaul.</p>\n"}, {"tags": ["python", "pandas", "count", "sum"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467841469, "post_id": 38234209, "comment_id": 63890200, "body": "Share code to create df1, df2, df3?"}, {"owner": {"reputation": 181, "user_id": 6505850, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d17bd636ae8155e4694aa0c7d7e61e32?s=128&d=identicon&r=PG&f=1", "display_name": "Yared J.", "link": "https://stackoverflow.com/users/6505850/yared-j"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467842122, "post_id": 38234209, "comment_id": 63890477, "body": "I didn&#39;t used a code. It&#39;s part of an excel file"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1467842159, "creation_date": 1467842159, "answer_id": 38234442, "question_id": 38234209, "link": "https://stackoverflow.com/questions/38234209/how-to-count-the-number-of-values-that-are-being-summed/38234442#38234442", "title": "How to count the number of values that are being summed", "body": "<p>try this:</p>\n\n<pre><code>In [153]: df = df.groupby('A', as_index=False)['B1'].agg(['sum','count']).reset_index()\n\nIn [154]: df = pd.merge(df3, df, on='A', how='left').rename(columns={'B1':'Sum'}).fillna('')\n\nIn [155]: df\nOut[155]:\n       A    B sum count\n0  Erick  Yes\n1   John  Yes  18     3\n2  David   No\n3  Mandy  Yes  29     2\n4  Jared   No\n5   Lisa   No\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 6505850, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d17bd636ae8155e4694aa0c7d7e61e32?s=128&d=identicon&r=PG&f=1", "display_name": "Yared J.", "link": "https://stackoverflow.com/users/6505850/yared-j"}, "edited": false, "score": 0, "creation_date": 1467843761, "post_id": 38234645, "comment_id": 63891149, "body": "This works, but only with one column. How con I aplly this to several columns at once. For example df[&#39;count&#39;] = groups.count()[&#39;A, &#39;B&#39;, &#39;C&#39;]"}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "reply_to_user": {"reputation": 181, "user_id": 6505850, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d17bd636ae8155e4694aa0c7d7e61e32?s=128&d=identicon&r=PG&f=1", "display_name": "Yared J.", "link": "https://stackoverflow.com/users/6505850/yared-j"}, "edited": false, "score": 0, "creation_date": 1467844059, "post_id": 38234645, "comment_id": 63891246, "body": "groups.count() computes all non nan values in each column for each group.  Above, I select column B1 because that what you used for sum(), but you can select any columns you&#39;d like."}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "reply_to_user": {"reputation": 181, "user_id": 6505850, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d17bd636ae8155e4694aa0c7d7e61e32?s=128&d=identicon&r=PG&f=1", "display_name": "Yared J.", "link": "https://stackoverflow.com/users/6505850/yared-j"}, "edited": false, "score": 0, "creation_date": 1467844224, "post_id": 38234645, "comment_id": 63891290, "body": "Add brackets to the labels for multiple labels df[[&#39;counta&#39;, &#39;countb&#39;, &#39;countc&#39;]] = groups.count()[[&#39;A, &#39;B&#39;, &#39;C&#39;]]"}, {"owner": {"reputation": 181, "user_id": 6505850, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d17bd636ae8155e4694aa0c7d7e61e32?s=128&d=identicon&r=PG&f=1", "display_name": "Yared J.", "link": "https://stackoverflow.com/users/6505850/yared-j"}, "edited": false, "score": 0, "creation_date": 1467844251, "post_id": 38234645, "comment_id": 63891299, "body": "Thanks. I found that only selecting one column does the job. This solves it."}], "tags": [], "owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "is_accepted": true, "score": 1, "last_activity_date": 1467843098, "creation_date": 1467843098, "answer_id": 38234645, "question_id": 38234209, "link": "https://stackoverflow.com/questions/38234209/how-to-count-the-number-of-values-that-are-being-summed/38234645#38234645", "title": "How to count the number of values that are being summed", "body": "<p>Try using the groupby method count()</p>\n\n<pre><code>df = pd.merge(df1, df2, left_on='B', right_on='A', suffixes=('','1'))\n\ngroups = df.groupby('A', as_index=False)\ndf = groups['B1'].sum()\ndf['count'] = groups.count()['B1']\n\ndf = pd.merge(df3, df, on='A', how='left').rename(columns {'B1':'Sum'}).fillna('')\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 6505850, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d17bd636ae8155e4694aa0c7d7e61e32?s=128&d=identicon&r=PG&f=1", "display_name": "Yared J.", "link": "https://stackoverflow.com/users/6505850/yared-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 38234645, "answer_count": 2, "score": 0, "last_activity_date": 1467843098, "creation_date": 1467841089, "question_id": 38234209, "link": "https://stackoverflow.com/questions/38234209/how-to-count-the-number-of-values-that-are-being-summed", "title": "How to count the number of values that are being summed", "body": "<p>How can I count the number of values that are being summed?</p>\n\n<p>I have a really large df, but lets say I have a df like this:</p>\n\n<pre><code>df1:\n\n     A     B        C\n0   John  Pen       Apple\n1   John  Printer   Pie\n2   John  Charger   Burger\n3   Erick Battery   Pizza\n4   Mandy Keyboard  Bread\n5   Mandy Phone     Coffee\n6   David Computer  Coke\n</code></pre>\n\n<p>And another df:</p>\n\n<pre><code>df2:\n\n     A        B  \n0   Pen       2\n1   Printer   5\n2   Charger   11\n3   USB       5\n4   Keyboard  8\n5   Phone     21\n6   Cup       3\n</code></pre>\n\n<p>And a third df:</p>\n\n<pre><code>df3: \n\n    A      B\n0  Erick  Yes\n1  John   Yes\n2  David  No \n3  Mandy  Yes\n4  Jared  No\n5  Lisa   No\n</code></pre>\n\n<p>I summed the matching values</p>\n\n<pre><code>In: \n\ndf = pd.merge(df1, df2, left_on='B', right_on='A', suffixes=('','1'))\ndf = df.groupby('A', as_index=False)['B1'].sum()\ndf = pd.merge(df3, df, on='A', how='left').rename(columns={'B1':'Sum'}).fillna('')\n\nOut:\n\n    A      B   Sum\n0  Erick  Yes  \n1  John   Yes  18\n2  David  No   \n3  Mandy  Yes  29\n4  Jared  No\n5  Lisa   No\n</code></pre>\n\n<p>And now I'm trying to count the number of values that are being summed.\nMy desired df would be:</p>\n\n<pre><code>Out:\n\n    A      B   Sum   Count\n0  Erick  Yes          0\n1  John   Yes  18      3\n2  David  No           0\n3  Mandy  Yes  29      2\n4  Jared  No           0\n5  Lisa   No           0\n</code></pre>\n\n<p>I know this might be very simple and obvious, but I'm still very new to python</p>\n\n<p>How can I do it?</p>\n"}, {"tags": ["python", "python-3.x", "dictionary", "file-processing"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1467841381, "post_id": 38234190, "comment_id": 63890156, "body": "Somewhat unrelated to your question, but how are you planning to handle names that have a space in them?"}, {"owner": {"reputation": 178, "user_id": 6502173, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e01ad30a53c00f05da052ea161d06c92?s=128&d=identicon&r=PG&f=1", "display_name": "ByteSettlement", "link": "https://stackoverflow.com/users/6502173/bytesettlement"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1467841814, "post_id": 38234190, "comment_id": 63890345, "body": "@spectras That wasn&#39;t really within the scope of my project so I had not put any thought into it. Lets just assume that my project will only be taking typical first and last names like John Smith"}, {"owner": {"reputation": 217, "user_id": 5045888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hans Nelsen", "link": "https://stackoverflow.com/users/5045888/hans-nelsen"}, "edited": false, "score": 0, "creation_date": 1467842081, "post_id": 38234190, "comment_id": 63890457, "body": "silly question, but are there actual brackets in your file, or are you just using them to make the format clear?"}, {"owner": {"reputation": 8004, "user_id": 3450064, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fd82a72ed3da42b434e182f953399a43?s=128&d=identicon&r=PG&f=1", "display_name": "CentAu", "link": "https://stackoverflow.com/users/3450064/centau"}, "edited": false, "score": 0, "creation_date": 1467842345, "post_id": 38234190, "comment_id": 63890585, "body": "Why aren&#39;t you using pandas? Simply replace your file with a csv file (e.g replace brackets with quotation and space with comma), read it with pandas and you will have everything that you need with only a few lines."}, {"owner": {"reputation": 178, "user_id": 6502173, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e01ad30a53c00f05da052ea161d06c92?s=128&d=identicon&r=PG&f=1", "display_name": "ByteSettlement", "link": "https://stackoverflow.com/users/6502173/bytesettlement"}, "reply_to_user": {"reputation": 217, "user_id": 5045888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hans Nelsen", "link": "https://stackoverflow.com/users/5045888/hans-nelsen"}, "edited": false, "score": 0, "creation_date": 1467842968, "post_id": 38234190, "comment_id": 63890871, "body": "@HansNelsen the brackets are used just for formatting, there aren&#39;t actually brackets in the file"}], "answers": [{"tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1467842238, "creation_date": 1467842238, "answer_id": 38234457, "question_id": 38234190, "link": "https://stackoverflow.com/questions/38234190/read-text-file-into-dictionary-to-be-used-later-for-adding-modifying-deleting/38234457#38234457", "title": "Read text file into dictionary to be used later for adding/modifying/deleting", "body": "<p>i think the problem you are facing is how to find unique key<br>\nto create unique key, simply add all string together than hash it. </p>\n\n<pre><code>res = {}\nwith open('employees.txt') as file:\n   for line in file:\n       res[line] = line.split(' ')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "reply_to_user": {"reputation": 178, "user_id": 6502173, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e01ad30a53c00f05da052ea161d06c92?s=128&d=identicon&r=PG&f=1", "display_name": "ByteSettlement", "link": "https://stackoverflow.com/users/6502173/bytesettlement"}, "edited": false, "score": 0, "creation_date": 1467899560, "post_id": 38234479, "comment_id": 63915766, "body": "As a simplification, classes are a way to keep information related to a specific thing together. Here, you want to describe a person, so make a <code>Person</code> class. In this class, you can store information about any one person and you can use methods on the class to perform simple operations like &quot;Am I the same person as another?&quot;, &quot;What is my name?&quot;, and &quot;What is a simple summary of myself?&quot;."}, {"owner": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "reply_to_user": {"reputation": 178, "user_id": 6502173, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e01ad30a53c00f05da052ea161d06c92?s=128&d=identicon&r=PG&f=1", "display_name": "ByteSettlement", "link": "https://stackoverflow.com/users/6502173/bytesettlement"}, "edited": false, "score": 0, "creation_date": 1467899842, "post_id": 38234479, "comment_id": 63916009, "body": "They are very useful, so I hope that in your learning Python that you will find out more about them. :)"}], "tags": [], "owner": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "is_accepted": false, "score": 0, "last_activity_date": 1467842340, "creation_date": 1467842340, "answer_id": 38234479, "question_id": 38234190, "link": "https://stackoverflow.com/questions/38234190/read-text-file-into-dictionary-to-be-used-later-for-adding-modifying-deleting/38234479#38234479", "title": "Read text file into dictionary to be used later for adding/modifying/deleting", "body": "<p>You make some of the code easier by creating a <code>Person</code> class.</p>\n\n<pre><code>class Person:\n    def __init__(self, first, last, rate, hours):\n       self.first = first\n       self.last = last\n       self.rate = rate\n       self.hours = hours\n\n    def matches_name(self, name):\n        return name.lower() == self.first.lower() or name.lower() == self.last.lower()\n\n    def __str__(self):\n        return '{} {} {}'.format(self.first, self.last, self.rate*self.hours)\n</code></pre>\n\n<p>This will simplify your code a bit. If you want to find out if someone has a specific name, you can just call  something like:</p>\n\n<pre><code>a_person.matches_name(random_first_name)\n</code></pre>\n\n<p>If you want to print out the person and their gross pay, you just have to do</p>\n\n<pre><code>print(a_person)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 6502173, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e01ad30a53c00f05da052ea161d06c92?s=128&d=identicon&r=PG&f=1", "display_name": "ByteSettlement", "link": "https://stackoverflow.com/users/6502173/bytesettlement"}, "edited": false, "score": 0, "creation_date": 1467845591, "post_id": 38234500, "comment_id": 63891692, "body": "does this convert my file into a csv file? I need to keep the file looking how it does now in a txt format"}, {"owner": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "reply_to_user": {"reputation": 178, "user_id": 6502173, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e01ad30a53c00f05da052ea161d06c92?s=128&d=identicon&r=PG&f=1", "display_name": "ByteSettlement", "link": "https://stackoverflow.com/users/6502173/bytesettlement"}, "edited": false, "score": 0, "creation_date": 1467899288, "post_id": 38234500, "comment_id": 63915523, "body": "@ByteSettlement No, when you read the file, you specify the delimiter as a space."}], "tags": [], "owner": {"reputation": 217, "user_id": 5045888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hans Nelsen", "link": "https://stackoverflow.com/users/5045888/hans-nelsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1467842439, "creation_date": 1467842439, "answer_id": 38234500, "question_id": 38234190, "link": "https://stackoverflow.com/questions/38234190/read-text-file-into-dictionary-to-be-used-later-for-adding-modifying-deleting/38234500#38234500", "title": "Read text file into dictionary to be used later for adding/modifying/deleting", "body": "<p>Presuming you have space delimited data, you can just use the csv library.</p>\n\n<pre><code>import csv\n\nlabels = ['first_name', 'last_name', 'rate', 'hours']\ndata = csv.DictReader(open('./test.txt'), delimiter=' ', fieldnames=labels)\n\nresult = []\n\nfor row in data:\n  result.append(row)\n\nprint result\n</code></pre>\n\n<p>You will wind up with an array of dictionaries that each have the labels as key names.</p>\n"}, {"tags": [], "owner": {"reputation": 8004, "user_id": 3450064, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fd82a72ed3da42b434e182f953399a43?s=128&d=identicon&r=PG&f=1", "display_name": "CentAu", "link": "https://stackoverflow.com/users/3450064/centau"}, "is_accepted": false, "score": 0, "last_activity_date": 1467845219, "last_edit_date": 1467845219, "creation_date": 1467843708, "answer_id": 38234749, "question_id": 38234190, "link": "https://stackoverflow.com/questions/38234190/read-text-file-into-dictionary-to-be-used-later-for-adding-modifying-deleting/38234749#38234749", "title": "Read text file into dictionary to be used later for adding/modifying/deleting", "body": "<h3>You can easily achieve all the desired operations with <code>pandas</code>:</h3>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n</code></pre>\n\n<p>First convert your file to csv format (comma separated text file), then:</p>\n\n<p>assuming your file is in txt:</p>\n\n<pre><code>&gt;&gt;&gt; txt = \"\"\"                \n    'FN','LN','rate','hours'\n    'John','Doe','12','40'\n    'Jane','Roe','20','35'\n    \"\"\"\n\n&gt;&gt;&gt; file = StringIO(txt)\n\n&gt;&gt;&gt; df = pd.read_csv(file, quotechar=\"'\")\n\n&gt;&gt;&gt; df\nOut: \n     FN   LN  rate  hours\n0  John  Doe    12     40\n1  Jane  Roe    20     35\n</code></pre>\n\n<h3>print out all the people at once:</h3>\n\n<pre><code>&gt;&gt;&gt; df[['FN','LN']]\nOut: \n     FN   LN\n0  John  Doe\n1  Jane  Roe\n</code></pre>\n\n<h3>Search for a person by first or last name and print out their information:</h3>\n\n<pre><code>&gt;&gt;&gt; df.loc[df['FN'] == 'John']\nOut: \n     FN   LN  rate  hours\n0  John  Doe    12     40\n\n&gt;&gt;&gt; df.loc[df['LN'] == 'Roe']\nOut: \n     FN   LN  rate  hours\n1  Jane  Roe    20     35\n</code></pre>\n\n<h3>Modify a person (first name, last name, hours, rate):</h3>\n\n<p>I'll show modifying the rate for a person whose name is 'John'</p>\n\n<pre><code>&gt;&gt;&gt; df.loc[df['FN'] == 'John', 'rate'] = 14\n\n&gt;&gt;&gt; df\nOut: \n     FN   LN  rate  hours\n0  John  Doe    14     40\n1  Jane  Roe    20     35\n</code></pre>\n\n<h3>Delete a person (all their information):</h3>\n\n<p>I'll show deleting 'John Doe':</p>\n\n<pre><code>&gt;&gt;&gt; df = df[(df['FN'] != 'John') &amp; (df['LN'] != 'Doe')]\n\n&gt;&gt;&gt; df\nOut: \n     FN   LN  rate  hours\n1  Jane  Roe    20     35\n</code></pre>\n\n<h3>Finally, if you want the gross pay you can add a new column <code>pay</code> that holds that information:</h3>\n\n<pre><code>&gt;&gt;&gt; values = df['rate'] * df['hours']\n\n&gt;&gt;&gt; df['pay'] = values\n\n&gt;&gt;&gt; df\nOut[67]: \n     FN   LN  rate  hours  pay\n0  John  Doe    12     40  480\n1  Jane  Roe    20     35  700\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 6502173, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e01ad30a53c00f05da052ea161d06c92?s=128&d=identicon&r=PG&f=1", "display_name": "ByteSettlement", "link": "https://stackoverflow.com/users/6502173/bytesettlement"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1467849232, "creation_date": 1467841008, "last_edit_date": 1467849232, "question_id": 38234190, "link": "https://stackoverflow.com/questions/38234190/read-text-file-into-dictionary-to-be-used-later-for-adding-modifying-deleting", "title": "Read text file into dictionary to be used later for adding/modifying/deleting", "body": "<p>Let me preface by saying I'm not 100% sure if using a dictionary is the best course of action for this task but that is what I believe I need to use to accomplish this.</p>\n\n<p>I have a .txt file that is formatted like this:</p>\n\n<pre><code>first_name last_name rate hours\nfirst_name last_name rate hours\nfirst_name last_name rate hours\nfirst_name last_name rate hours\n</code></pre>\n\n<p>There is a single space between each item.\nEach line represents a person.</p>\n\n<p>For my program I need to be able to: </p>\n\n<ul>\n<li>print out all the people at once</li>\n<li>be able to search for a person by first or last name and print out their information </li>\n<li>modify a person (first name, last name, hours, rate)</li>\n<li>delete a person (all their information)</li>\n</ul>\n\n<p>When it gets printed I <strong><em>DO NOT</em></strong> need to see the [rate] and [hours] but [gross pay] instead (gross pay = rate * hours).</p>\n\n<p>I am fairly new to file processing with python so my first attempt at this was just to read every line from the file and print it out on the screen, but I came across the problem of being able to display [gross pay].</p>\n\n<pre><code># 'print_emp', display only a single employee's data chosen by the user displayed as\n# firstname, lastname, grosspay (on one line of output)\ndef print_emp():\n    menu_name = ' '*int(OFFSET/2) + \"EMPLOYEE LOOKUP\"\n    dotted = (OFFSET+len(menu_name))*'-'\n\n    try:\n        with open('employees.txt') as file:\n            print('{} \\n{} \\n{}'.format(dotted, menu_name, dotted))\n            emp_name = input(\"Employee Name: \")\n            print('{0:20} {1:20} {2}'.format(\"First Name\", \"Last Name\", \"Gross Pay\"))\n            for line in file:\n                if emp_name in line:\n                    print (line.strip())\n\n                #print(\"\\nEmployee\", emp_name, \"does not exist. Try again.\\n\")\n                #break\n    except FileNotFoundError:\n        print(\"Error: File not found.\")\n\n\n# 'print_all_emp', display all employee data in format firstname, lastname,\n# grosspay (on one line of output per employee)\ndef print_all_emps():\n    menu_name = ' '*int(OFFSET/2) + \"EMPLOYEE LIST\"\n    dotted = (OFFSET+len(menu_name))*'-'\n\n    try:\n        with open('employees.txt', 'r') as file:\n            print('{} \\n{} \\n{}'.format(dotted, menu_name, dotted))\n            print('{0:20} {1:20} {2}'.format(\"First Name\", \"Last Name\", \"Gross Pay\"))\n            for line in file:\n                print(line.strip())\n            print(dotted)\n    except FileNotFoundError:\n        print(\"Error: File not found.\")\n</code></pre>\n\n<p>I am not sure how I go about reading my .txt file into a dictionary (if that's what I need to do) where I assign a key to each person that includes their first name, last name, rate, and hours and then multiplying the rate * hours to create the gross pay and then displaying that gross pay.</p>\n\n<p>I will be creating three more functions where I can add, delete, and modify the people in the .txt file.</p>\n\n<p><strong>EDIT :</strong> </p>\n\n<p>I believe what I am going for as an end program looks something like this:</p>\n\n<p><a href=\"https://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3/File_IO\" rel=\"nofollow\">https://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3/File_IO</a></p>\n\n<p>But without the load and save functions...</p>\n"}, {"tags": ["python", "openpyxl"], "comments": [{"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 0, "creation_date": 1467841200, "post_id": 38234130, "comment_id": 63890068, "body": "It&#39;s being used a search term in a web scraper, so it must be a string (at that point in the script, anyway).  But the <code>.0</code> causes the search to fail.  I suppose I could just convert it to <code>float</code> as I read it in, to <code>int</code> when I associate it with it&#39;s other search terms, then to <code>str</code> as I search it.  I was just wondering it there&#39;s a way to do all three at once without this clunky combo of casts."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1467874012, "post_id": 38234130, "comment_id": 63899023, "body": "When reading Excel files openpyxl tries to convert to int and falls back to float for anything in the XML source that has a decimal point. You can easily convert from a float to an int. You&#39;re also using an older version of the API and should avoid <code>internal_value</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 0, "creation_date": 1467841403, "post_id": 38234145, "comment_id": 63890168, "body": "Awesome, exactly what I was looking for.  I&#39;ve never used <code>rstrip</code> with parameters before."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 0, "creation_date": 1467841580, "post_id": 38234145, "comment_id": 63890252, "body": "No worries, like I said in the answer, there is the 0 or 0.0  cases but for all other value stripping and trailing 0&#39;s will not change the actual value so it should be fine, if there can be 0, 0.0 etc.. the latter code will set that to &quot;0&quot; as <code>&quot;0.0&quot;.rstrip(&quot;0.&quot;)</code> would return an empty string which is considered falsey so s would then reach the or and be set to &quot;0"}, {"owner": {"reputation": 786, "user_id": 5399098, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZMwu_HjwSJc/AAAAAAAAAAI/AAAAAAAACo8/swEsw31X2UM/photo.jpg?sz=128", "display_name": "Paul Hansen", "link": "https://stackoverflow.com/users/5399098/paul-hansen"}, "edited": false, "score": 0, "creation_date": 1603819425, "post_id": 38234145, "comment_id": 114155553, "body": "This fails if there are trailing zeros on the number, for example &quot;1000.0&quot; would give you &quot;1&quot;! If you do it in two rstrip operations it will work <code>&quot;1000.0&quot;.rstrip(&quot;0&quot;).rstrip(&quot;.&quot;)</code>. I feel like there should be a better solution though."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1467841183, "last_edit_date": 1467841183, "creation_date": 1467840812, "answer_id": 38234145, "question_id": 38234130, "link": "https://stackoverflow.com/questions/38234130/how-to-cast-float-to-string-with-no-decimal-places/38234145#38234145", "title": "How to cast float to string with no decimal places", "body": "<p>If you will never have decimals like <code>0.0</code> you can <code>str.rstrip</code> it will make <code>6978279.0</code> <code>6978279</code> removing zeros from the end of any other decimals is not going to change its value <code>1.12300</code> will be <code>1.233</code>:</p>\n\n<pre><code>In [20]: \"1.234200\".rstrip(\"0.\")\nOut[20]: '1.2342'\n\nIn [21]: \"1.0\".rstrip(\"0.\")\nOut[21]: '1'\n</code></pre>\n\n<p>If you could have 0.0  etc.. you could catch when the string is empty:</p>\n\n<pre><code> In [22]: s = \"0.0\".rstrip(\"0.\") or \"0\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 6449260, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ec4555c5562eccb3b40556457353e21f?s=128&d=identicon&r=PG&f=1", "display_name": "Compadre", "link": "https://stackoverflow.com/users/6449260/compadre"}, "is_accepted": false, "score": 0, "last_activity_date": 1467844196, "creation_date": 1467844196, "answer_id": 38234851, "question_id": 38234130, "link": "https://stackoverflow.com/questions/38234130/how-to-cast-float-to-string-with-no-decimal-places/38234851#38234851", "title": "How to cast float to string with no decimal places", "body": "<p>If you need int or float returned (may be for arithmetic operations), you can use a function like this:</p>\n\n<pre><code>def strip_num_or_float(value):\n    try:\n        value= int(value)\n    except TypeError:\n        value = value.normalize()\n    return value\n</code></pre>\n"}], "owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "accepted_answer_id": 38234145, "answer_count": 2, "score": 2, "last_activity_date": 1467844196, "creation_date": 1467840750, "question_id": 38234130, "link": "https://stackoverflow.com/questions/38234130/how-to-cast-float-to-string-with-no-decimal-places", "title": "How to cast float to string with no decimal places", "body": "<p>I'm using <code>openpyxl</code> to read values from a spreadsheet.  These values are being read as floats, I am not entirely sure why.</p>\n\n<pre><code>import openpyxl as opx\nwb = opx.load_workbook(SKU_WORKBOOK_PATH, use_iterators=True, data_only=True)\nws = wb.worksheets[0]\nfor row in ws.iter_rows():\n  foo = str(int(row[1].internal_value))\n</code></pre>\n\n<p>This is throwing the error:</p>\n\n<pre><code>ValueError: invalid literal for int() with base 10: '6978279.0'\n</code></pre>\n\n<p>Normally, openpyxl reads in integer values as <code>int</code>, but this time it has read it in a float cast as a string.  In the spreadsheet, the value of this cell is <code>6978279</code>.</p>\n\n<p>I am converting this to the string I want with <code>foo = str(int(float(foo)))</code> which results in <code>'6978279'</code> as intended.  I could also do <code>foo = foo[:-2]</code>, but this worries me that another cell, which may be read as an <code>int</code> or with more decimal places, would screw things up.</p>\n\n<p>This feels like a terrible, messy way of mashing what I have into what I want.  Is there a more pythonic way to do this?  Am I reading the <code>xlsx</code> in a way that forces floats?  How can I do this without triple casting?</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "is_accepted": false, "score": 1, "last_activity_date": 1467845954, "creation_date": 1467845954, "answer_id": 38235149, "question_id": 38234115, "link": "https://stackoverflow.com/questions/38234115/pandas-matplotlib-pyplot-add-legend-by-a-column-value/38235149#38235149", "title": "Pandas matplotlib.pyplot add legend by a column value", "body": "<p>Maybe this is what you need in the last line:</p>\n\n<pre><code>plt.legend(legend.values,loc=4)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 3445711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dnc5o.jpg?s=128&g=1", "display_name": "megamind", "link": "https://stackoverflow.com/users/3445711/megamind"}, "is_accepted": false, "score": 1, "last_activity_date": 1541775471, "last_edit_date": 1541775471, "creation_date": 1541773097, "answer_id": 53227439, "question_id": 38234115, "link": "https://stackoverflow.com/questions/38234115/pandas-matplotlib-pyplot-add-legend-by-a-column-value/53227439#53227439", "title": "Pandas matplotlib.pyplot add legend by a column value", "body": "<p>You can try this:</p>\n\n<pre><code>for city,color in [('Asia Pacific', 'Green'), ('EMEA', 'Red'), ('rest', 'Blue')]:\n    x = test3.loc[test3['Lenovo Global Region']==city]['Apr_2015_to_Mar_2016_[kWh]']\n    y = test3.loc[test3['Lenovo Global Region']==city]['Apr_2015_to_Mar_2016_[MT]']\n    area= (y/x)*500000\n    plt.scatter(x, y, alpha=0.6,c=color,s=area, label=city)\nplt.legend()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 610, "user_id": 2415706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/83810fa352ecb3bb3a0932490a89af36?s=128&d=identicon&r=PG", "display_name": "user2415706", "link": "https://stackoverflow.com/users/2415706/user2415706"}, "is_accepted": false, "score": 1, "last_activity_date": 1591635849, "creation_date": 1591635849, "answer_id": 62267438, "question_id": 38234115, "link": "https://stackoverflow.com/questions/38234115/pandas-matplotlib-pyplot-add-legend-by-a-column-value/62267438#62267438", "title": "Pandas matplotlib.pyplot add legend by a column value", "body": "<p>From this other question that might be the same:\n<a href=\"https://stackoverflow.com/questions/44595288/matplotlib-adding-legend-based-on-existing-color-series\">Matplotlib adding legend based on existing color series</a></p>\n\n<p>\"You can create the legend handles using an empty plot with the color based on the colormap and normalization of the scatter plot.\"</p>\n\n<pre><code>sc = plt.scatter(df['x'], df['y'], s=size, c=df['colors'], edgecolors='none')\n\nlp = lambda i: plt.plot([],color=sc.cmap(sc.norm(i)), ms=np.sqrt(size), mec=\"none\",\n                        label=\"Feature {:g}\".format(i), ls=\"\", marker=\"o\")[0]\nhandles = [lp(i) for i in np.unique(df[\"colors\"])]\nplt.legend(handles=handles)\nplt.show()\n</code></pre>\n\n<p>So from their code to yours just change assign your plt.scatter to a variable like sc, and replace all the df['colors'] with T. </p>\n"}], "owner": {"reputation": 137, "user_id": 5839247, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-C4HOs4Z03r8/AAAAAAAAAAI/AAAAAAAAABQ/64YbzvCkEb8/photo.jpg?sz=128", "display_name": "Yang ", "link": "https://stackoverflow.com/users/5839247/yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3276, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1591635849, "creation_date": 1467840689, "last_edit_date": 1572817844, "question_id": 38234115, "link": "https://stackoverflow.com/questions/38234115/pandas-matplotlib-pyplot-add-legend-by-a-column-value", "title": "Pandas matplotlib.pyplot add legend by a column value", "body": "<p><a href=\"https://i.stack.imgur.com/luI1D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/luI1D.png\" alt=\"enter image description here\"></a>I'm using Pandas to make a scatter plot. My data look like this:</p>\n\n<pre><code>\n\n    Locations Lenovo Global Region Primary Function Subsidiaries Apr_2015_to_Mar_2016_[kWh] Apr_2015_to_Mar_2016_[MT] color MT/kWh\n&lt;!-- --&gt;  \n\n    263 United Kingdom - Hook EMEA Large Office (OFL) Lenovo 7.561727e+04 129.438515 r 0.001712  \n    202 South Africa - Johannesburg/Bryanston EMEA Small Office (OSL) Lenovo 1.013746e+05 93.872885 r 0.000926  \n    232 India - Chennai Factory Asia Pacific Manufacturing (MFG) Motorola Mobility 3.163600e+05 271.933953 g 0.000860  \n    159 India - Pondicherry Asia Pacific    Manufacturing (MFG) Lenovo  1.074016e+06    907.869649  g   0.000845  \n    242 Australia - Chatswood   Asia Pacific    Large Office (OFL)  Lenovo  3.001254e+05    239.500093  g   0.000798\n</code></pre>\n\n<p>define a function to use different color for different regions. </p>\n\n<pre><code>def colorpoint(row):\n    if row['Lenovo Global Region'] == 'Asia Pacific':\n        return('g')\n    if row['Lenovo Global Region'] == 'EMEA':\n        return('r')\n    else:\n        return('b')\ntest3['color'] = test3.apply (lambda row: colorpoint (row),axis=1)\n</code></pre>\n\n<p>define the scatter points that I want to plot. </p>\n\n<pre><code>y=test3['Apr_2015_to_Mar_2016_[MT]']\nx=test3['Apr_2015_to_Mar_2016_[kWh]']\nT = test3['color']\narea= (y/x)*500000\nxmax=1.1*max(test3['Apr_2015_to_Mar_2016_[kWh]'])\nymax=1.1*max(test3['Apr_2015_to_Mar_2016_[MT]'])\n</code></pre>\n\n<p>plot the figure. \n    fig1 = plt.figure(figsize=(16,9), dpi=300)\n    ax = plt.subplot(111)</p>\n\n<pre><code>plot=plt.scatter(x,y,alpha=0.6,c=T,s=area)\nax.grid(True)\nax.set_xlim([0,xmax])\nax.set_ylim([0,ymax])\nax.set_xlabel('Apr 2015 to Mar 2016 [kWh]')\nax.set_ylabel('Apr 2015 to Mar 2016 [MT]')\nax.set_title('Total Elec consumtion [kWh] VS CO2 emission [MT]')\n</code></pre>\n\n<p>Try to add legend. \n<strong>I want to show colors correspond to their \"Lenovo Global Region\", but it's not working, only showing one region \"America Groups\" as blue dot</strong> </p>\n\n<pre><code>legend=test3['Lenovo Global Region']\nplt.legend(legend,loc=4)\n</code></pre>\n\n<p>Thanks if you have ideas!!</p>\n"}, {"tags": ["python", "syntax"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 3, "creation_date": 1467840687, "post_id": 38234103, "comment_id": 63889855, "body": "You are missing two close brackets in the previous line. (the outside bracket set is also uneccessary and will probably cause some weird stuff)"}, {"owner": {"reputation": 380, "user_id": 6539852, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/546677b859edbb509b2973eadd5ff49f?s=128&d=identicon&r=PG&f=1", "display_name": "pokemon", "link": "https://stackoverflow.com/users/6539852/pokemon"}, "edited": false, "score": 1, "creation_date": 1467840887, "post_id": 38234103, "comment_id": 63889927, "body": "Just a suggestion: You will learn more and better if you try hard to figure out such things like syntax error by yourself, instead of just copy pasting things on StackOverflow"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6557963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafe829eb93ed13b067cba9257443ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Number28", "link": "https://stackoverflow.com/users/6557963/number28"}, "edited": false, "score": 1, "creation_date": 1467842200, "post_id": 38234262, "comment_id": 63890526, "body": "Thank you very much! This makes total sense to me."}, {"owner": {"reputation": 506, "user_id": 5410736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YRYKp.png?s=128&g=1", "display_name": "DibDibs", "link": "https://stackoverflow.com/users/5410736/dibdibs"}, "reply_to_user": {"reputation": 13, "user_id": 6557963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafe829eb93ed13b067cba9257443ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Number28", "link": "https://stackoverflow.com/users/6557963/number28"}, "edited": false, "score": 0, "creation_date": 1467890351, "post_id": 38234262, "comment_id": 63909112, "body": "No problem Number28, but I agree with @pokemon, you will learn a lot more if you go through your code and look for errors. If you look back at my answer, I&#39;ve added how to correct syntax errors. I&#39;m happy to help with any problems you have, but a lot of people will just tell you to correct it yourself."}, {"owner": {"reputation": 506, "user_id": 5410736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YRYKp.png?s=128&g=1", "display_name": "DibDibs", "link": "https://stackoverflow.com/users/5410736/dibdibs"}, "reply_to_user": {"reputation": 13, "user_id": 6557963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafe829eb93ed13b067cba9257443ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Number28", "link": "https://stackoverflow.com/users/6557963/number28"}, "edited": false, "score": 0, "creation_date": 1467890923, "post_id": 38234262, "comment_id": 63909493, "body": "PS: Thanks for flagging me as best answer, and good luck with the rest of your project!"}], "tags": [], "owner": {"reputation": 506, "user_id": 5410736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YRYKp.png?s=128&g=1", "display_name": "DibDibs", "link": "https://stackoverflow.com/users/5410736/dibdibs"}, "is_accepted": true, "score": 3, "last_activity_date": 1467890845, "last_edit_date": 1467890845, "creation_date": 1467841335, "answer_id": 38234262, "question_id": 38234103, "link": "https://stackoverflow.com/questions/38234103/python-variable-outside-of-function-syntax-error/38234262#38234262", "title": "Python variable outside of function Syntax error?", "body": "<p>There are two errors that I can spot here.\nThe first one is on line 20. You have opened 3 parentheses and only closed one of them. Change line 22 to this:</p>\n\n<pre><code>numb = int(raw_input(\"How many points would you like to add?\\n &gt; \"))\n</code></pre>\n\n<p><em>There is no need for the third bracket, just use 2.</em></p>\n\n<p>The second is on lines 32 and 14. You are not passing <code>Premains</code> into the function <code>dex_skill</code>, thereby it cannot access that variable, so it will return a TypeError.\nTo fix this, change line 32 to this:</p>\n\n<pre><code>dex_skill(Premains)\n</code></pre>\n\n<p>and line 14 to this:</p>\n\n<pre><code>def dex_skill(Premains):\n</code></pre>\n\n<p>So your code will look like this:</p>\n\n<pre><code>Premains = 10 #Remaining points assigned before functions\n\n#Function designed to see user's overall stats and remaining points\n\ndef print_skills():\n        print \"Dexterity:\" + dex\n        print \"Strength:\" + str\n        print \"IntelligenceL:\" + int\n        print \"\\nYou have %d remaining\" % Premain\n\n#Function called when user selects to edit Dexterity attribute\nPremains = 10 #Remaining points assigned before functions\n\n#Function designed to see user's overall stats and remaining points\ndef print_skills():\n        print \"Dexterity:\" + dex\n        print \"Strength:\" + str\n        print \"IntelligenceL:\" + int\n        print \"\\nYou have %d remaining\" % Premain\n\n#Function called when user selects to edit Dexterity attribute\n\ndef dex_skill(Premains): #Passing Premains as a parameter so this function can access it.\n        Dpoints = 0\n        print \"Great you choose Dexterity!\"\n        answer = raw_input(\"would you like to add or subtract    points?\\n &gt; \")\n\n        if answer == \"add\":\n                print \"You have: %d points remaining!\" % Premains\n\n                numb = int(raw_input(\"How many points would you like to add?\\n &gt; \"))\n\n                Premains = (numb - Premains)\n                Dpoints = numb + Dpoints\n\n                print \"Great! you now have: %d Dexterity points!\"\n\n        else:\n                print \"You choose subtract.\"\n                #Subtract code goes here. Similiar to above.\n\ndex_skill(Premains)\n</code></pre>\n\n<p><strong>HOW TO CORRECT SYNTAX ERRORS</strong></p>\n\n<p>Syntax errors are one of the easiest errors to fix, you get all of the information you need to fix it in the error thrown by Python.</p>\n\n<p>The following code:</p>\n\n<pre><code>array = ['john', 'paul', 'mike'\n\nfor a in array:\n    print(a)\n</code></pre>\n\n<p>will return a Syntax error at line 1, and the Python IDE will highlight the point where is cannot parse past, so it will look like this:\n<a href=\"https://i.stack.imgur.com/5NkcB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5NkcB.png\" alt=\"Example of Syntax Error in Python 2.7\"></a></p>\n\n<p>As you can see, <code>for</code> is highlighted in red, so Python cannot parse past that, so the error is either on that line or on the line above. In this case, the array has been opened, but not closed so Python is parsing the for loop as if it is an array, which it cannot do, so you need to correct line 1 by changing it...</p>\n\n<p>From this: <code>array = ['john', 'paul', 'mike'</code> </p>\n\n<p>To this <code>array = ['john', 'paul', 'mike']</code></p>\n\n<p>Other IDEs should either give you syntax errors like this or print it on the console like the official Python IDE would do for a <code>ValueError</code></p>\n\n<p>Hope this helps, DibDibs :)</p>\n"}], "owner": {"reputation": 13, "user_id": 6557963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafe829eb93ed13b067cba9257443ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Number28", "link": "https://stackoverflow.com/users/6557963/number28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 38234262, "answer_count": 1, "score": 1, "last_activity_date": 1467890845, "creation_date": 1467840640, "question_id": 38234103, "link": "https://stackoverflow.com/questions/38234103/python-variable-outside-of-function-syntax-error", "title": "Python variable outside of function Syntax error?", "body": "<p>I'm relatively new to programming. </p>\n\n<p>I've been attempting to write and run my first program and i'm getting stuck with an error. I attempted removing the <strong><em>int(raw_input()) on line 22</em></strong> a few times and make a few other adjustment's however my skill isn't quite all there to solve this myself.</p>\n\n<pre><code>1 Premains = 10 #Remaining points assigned before functions\n2 \n3 #Function designed to see user's overall stats and remaining points\n4 \n5 def print_skills():\n6 \n7         print \"Dexterity:\" + dex\n8         print \"Strength:\" + str\n9         print \"IntelligenceL:\" + int\n10         print \"\\nYou have %d remaining\" % Premain\n11 \n12 #Function called when user selects to edit Dexterity attribute\n13 \n14 def dex_skill():\n15         Dpoints = 0\n16         print \"Great you choose Dexterity!\"\n17         answer = raw_input(\"would you like to add or subtract    points?\\n &gt; \")\n18 \n19         if answer == \"add\":\n20                 print \"You have: %d points remaining!\" % Premains\n21 \n22                 numb =(int(raw_input(\"How many points would you like to add?\\n &gt; \")\n23 \n24                 Premains = (numb - Premains)\n25                 Dpoints = numb + Dpoints\n26 \n27                 print \"Great! you now have: %d Dexterity points!\"\n28 \n29         else:\n30                 print \"You choose subtract.\"\n31                 #Subtract code goes here. Similiar to above.\n32 dex_skill()\n</code></pre>\n\n<p>~<br>\nThis returns with the error </p>\n\n<pre><code>  File \"try.py\", line 24\nPremains = (numb - Premains)\n       ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "windows", "python-3.x", "text", "tkinter"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467842958, "post_id": 38234084, "comment_id": 63890865, "body": "In <a href=\"https://technet.microsoft.com/en-us/sysinternals/processexplorer.aspx\" rel=\"nofollow noreferrer\">Process Explorer</a>, set the lower pane to show the process handles. Add columns to the handle view for the handle type, name, access mask, and share flags. Click on the process that&#39;s writing the log, and sort its handles by type. Look for the log file handle. If it exists, what are the values for its access mask and share flags? It may not be listed if the application doesn&#39;t keep the file open."}, {"owner": {"reputation": 365, "user_id": 2133156, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74175b3bdd6f13fe9daaeffa117de1af?s=128&d=identicon&r=PG", "display_name": "elder4222", "link": "https://stackoverflow.com/users/2133156/elder4222"}, "edited": false, "score": 0, "creation_date": 1467845387, "post_id": 38234084, "comment_id": 63891628, "body": "What have you tried so far, and is it giving any errors specifically? That might help to debug this issue."}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "edited": false, "score": 0, "creation_date": 1467847665, "post_id": 38234084, "comment_id": 63892344, "body": "Not listed. In Process monitor I can see the process open,write,query, and close the log. So it doesn&#39;t keep it open. Any ideas?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467848261, "post_id": 38234084, "comment_id": 63892505, "body": "In Process Monitor, check the properties of the <code>CreateFile</code> event to see what the desired access and share mode are when the file is opened. With the file already opened in Python, does the application&#39;s <code>CreateFile</code> call succeed or fail?"}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "edited": false, "score": 0, "creation_date": 1467848568, "post_id": 38234084, "comment_id": 63892594, "body": "elder4222 I dont know what I can try. I was hoping someone would know if it was possible to watch a log that is locked down like this one is. If its not possible to watch it then does anyone have examples on how to open, read, close a file and only pull new information when it is seen?"}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "edited": false, "score": 0, "creation_date": 1467848780, "post_id": 38234084, "comment_id": 63892639, "body": "Eryksun- desired access is &quot;generic read/write&quot; and the sharemode is &quot;None&quot;. I&#39;ll have to monitor it later tonight or tomorrow to see if the createfile fails when python has it open."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467849269, "post_id": 38234084, "comment_id": 63892775, "body": "The application probably doesn&#39;t retry the call with sharing allowed. That means you can&#39;t keep the file open in Python. You need to monitor the directory for changes, either by directly using a Windows API such as <a href=\"https://msdn.microsoft.com/en-us/library/aa365465\" rel=\"nofollow noreferrer\"><code>ReadDirectoryChangesW</code></a> via ctypes or PyWin32, or by using a package that does this for you."}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "edited": false, "score": 0, "creation_date": 1467849624, "post_id": 38234084, "comment_id": 63892876, "body": "I&#39;ll look into ways to monitor the file for changes and then query the file. If anyone has recommendations feel free to list."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467855605, "post_id": 38234084, "comment_id": 63894257, "body": "A user generally isn&#39;t notified of replies unless it&#39;s on her or his own question or answer. Otherwise you need to manually notify someone by addressing the comment to his or her username, prefixed by &quot;@&quot;, e.g. @sidnical. As you start typing, a box should appear that contains the closest matching user name in the current context, which you can click on to automatically complete the rest of the name."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467855983, "post_id": 38234084, "comment_id": 63894326, "body": "As to suggestions, try <a href=\"https://pythonhosted.org/watchdog\" rel=\"nofollow noreferrer\">watchdog</a>. On Windows it uses the <code>ReadDirectoryChangesW</code> API. You can subclass the <code>watchdog.events.PatternMatchingEventHandler</code> and override its <code>on_modified</code> method to implement an action when files that match the pattern are modified in the watched directory. The pattern uses shell wildcards such as <code>&#39;*&#47;app.log&#39;</code> and it has to match the <code>src_path</code> of the event. Note that the latter is a fully qualified path, which is I started the pattern with <code>&#39;*&#47;&#39;</code> to match a filename."}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467919826, "post_id": 38234084, "comment_id": 63928705, "body": "@eryksun I found that the process that writes to the log starts showing sharing violation in process monitor when my application starts reading the file. Does this mean my program is &quot;blocking&quot; the file and keeping anything from editing it? This works with other files that get a slow trickle of updates. The log im having issues with is constantly being updated... maybe that is the problem?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467920803, "post_id": 38234084, "comment_id": 63929227, "body": "Unlike Unix, Windows requires declaring how read, write, and delete access can be shared when opening a file. Sharing access isn&#39;t the same as file locking, which is a separate mechanism that&#39;s more precise (e.g. a range of bytes in a file can be locked). The application is trying to open the log file exclusively, so you can&#39;t leave it open in Python. That&#39;s why I suggested watching the directory using watchdog. When you get a notice that the file has been modified, loop trying to open it until you get access, and then read it from the previous position (i.e. the old file size)."}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467921469, "post_id": 38234084, "comment_id": 63929559, "body": "@eryksun I looked at some of the watchdog documentation and its really confusing to me. I got watchdog installed but never figured out how to use it correctly. Im newish to coding and its alot to wrap my head around. Any examples you can provide?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467922523, "post_id": 38234084, "comment_id": 63930089, "body": "Get an observer, e.g. <code>observer = watchdog.observers.Observer()</code>. Get a handler, e.g. <code>handler = MyHandler(&#39;*&#47;the_log_filename&#39;)</code>. Schedule the handler to watch a given path, e.g. <code>observer.schedule(handler, path)</code>. Then start it, e.g. <code>observer.start()</code>. Your handler should subclass an existing handler such as <code>watchdog.events.PatternMatchingEventHandler</code>, and override the methods that you need, such as the <code>on_modified</code> method."}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1467990456, "post_id": 38234084, "comment_id": 63959278, "body": "@eryksun I added an example of what I created above. When I run this it just finishes with exit code 0. Am I missing something to specify the type of event to watch for?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1468007101, "post_id": 38234084, "comment_id": 63967898, "body": "The handler&#39;s methods are called on a worker thread. Your main thread has to provide the actual application interface. Notice in the documentation&#39;s simple example that it uses a while loop that requires the user to break via Ctrl+C. When the loop is broken, it calls the observer&#39;s <code>stop</code> and <code>join</code> methods to exit cleanly. Also, you have to do the work for the event in the methods <code>on_modified</code> and <code>on_created</code>. You can&#39;t just <code>pass</code>; that&#39;s ignoring the event."}, {"owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1468012976, "post_id": 38234084, "comment_id": 63970463, "body": "Im still not understanding the process. I&#39;ll just have to find a different way of doing it because I cant find an example that makes sense to me. Thanks for your help @eryksun. I think im just too new to wrap my head around the options in watchdog."}], "owner": {"reputation": 371, "user_id": 6363004, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d980b68a0ecf6f32f0d04d43e8172e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sidnical", "link": "https://stackoverflow.com/users/6363004/sidnical"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468008689, "creation_date": 1467840576, "last_edit_date": 1468008689, "question_id": 38234084, "link": "https://stackoverflow.com/questions/38234084/tail-a-txt-file-that-is-open-by-a-different-application", "title": "tail a .txt file that is open by a different application", "body": "<p>Im trying to use tools like <a href=\"https://pypi.python.org/pypi/tailer/\" rel=\"nofollow\">tailer.py</a> to follow a log that is constantly being updated by a different application. The output goes to a Text widget in a GUI for monitoring. If I point it to a test file I can add text, save, and the widget updates with the new information. If I point it to the log file that is being updated by the other application it watches the file but I never get output from it. </p>\n\n<p>I do not know what kind of lock the other application has on the file but it definitely has a hold of the file. I can not copy the file or edit/save anything to the file because it is in use. </p>\n\n<p>I've tried several different tools and processes I've found online but none are able to watch the file while it is in use. I AM able to query specified lines from the file though over and over without a problem. Its just watching the file does not detect changes. </p>\n\n<p>Maybe I can query the file and only return lines that were not in the last query? I think this would be a constant .open()/.close() on the file but if its my only option i'll try to work with it. Any recommendations for getting around this? </p>\n\n<p>=========================================================================\n7/8/2016</p>\n\n<p>Testing watchdog:</p>\n\n<pre><code>import watchdog\nfrom watchdog.observers import Observer\nfrom watchdog.events import PatternMatchingEventHandler\npath = \"C:\\\\test\\\\\"\n\nclass MyHandler(PatternMatchingEventHandler):\n    def on_modified(self, event):\n        print(test)\n\n    def on_created(self, event):\n        pass\n\n\nobserver = watchdog.observers.Observer()\nhandler = MyHandler('*/file.log')\nobserver.schedule(handler, path)\nobserver.start()\n</code></pre>\n\n<p>I would expect this to print test every time something happens to the file.log. Comparing to the giant class examples I see on other pages I think maybe im missing something to specify  the type of event to watch for? </p>\n"}, {"tags": ["python", "mongodb", "pymongo", "aggregation-framework"], "comments": [{"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1467840764, "post_id": 38234053, "comment_id": 63889881, "body": "Is &quot;hostnames&quot; one element array?"}, {"owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "reply_to_user": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1467841133, "post_id": 38234053, "comment_id": 63890046, "body": "Not sure if I am understanding properly, but I think &quot;hostnames&quot; is an array of objects. As you can see in Structure 1 the &quot;hostnames&quot; array contains two properties &quot;name&quot; and &quot;type&quot;."}, {"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1467841300, "post_id": 38234053, "comment_id": 63890118, "body": "Do you always have one object in the array?"}, {"owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "reply_to_user": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1467841451, "post_id": 38234053, "comment_id": 63890190, "body": "Yes I think so. I do not see any instances where $hostnames.name contains multiple values."}, {"owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "reply_to_user": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1467841592, "post_id": 38234053, "comment_id": 63890256, "body": "The version is MongoDB 2.6.1"}], "answers": [{"tags": [], "owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "is_accepted": true, "score": 1, "last_activity_date": 1467925389, "last_edit_date": 1467925389, "creation_date": 1467841962, "answer_id": 38234402, "question_id": 38234053, "link": "https://stackoverflow.com/questions/38234053/project-different-embedded-structures-to-same-name/38234402#38234402", "title": "Project different embedded structures to same name", "body": "<p>You can use the <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/ifNull/\" rel=\"nofollow\"><code>$ifNull</code></a> operator to <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/project\" rel=\"nofollow\"><code>$project</code></a> the \"hostname\" field.</p>\n\n<pre><code>cmp = db['computers'].aggregate([\n    {\"$project\": { \n        \"u_hostname\": {\n            \"$ifNull\": [\n                \"$hostnames.name\", \n                { \"$map\": { \n                    \"input\": {\"$literal\": [\"A\"]}, \n                    \"as\": \"el\", \n                    \"in\": \"$hostname\"\n                }}\n            ]\n        }, \n        \"_id\": 0, \n        \"u_ipv4\": \"$addresses.ipv4\"\n    }},\n    {\"$unwind\": \"$u_hostname\"}\n])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 217, "user_id": 5045888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hans Nelsen", "link": "https://stackoverflow.com/users/5045888/hans-nelsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1467844414, "creation_date": 1467844414, "answer_id": 38234886, "question_id": 38234053, "link": "https://stackoverflow.com/questions/38234053/project-different-embedded-structures-to-same-name/38234886#38234886", "title": "Project different embedded structures to same name", "body": "<p>You want the $unwind, $group and $setUnion operators included in the aggregate function. It will allow you to flatten you list of hostnames.name and then union them with the other hostnames.</p>\n"}], "owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 38234402, "answer_count": 2, "score": 4, "last_activity_date": 1467925389, "creation_date": 1467840413, "last_edit_date": 1467841990, "question_id": 38234053, "link": "https://stackoverflow.com/questions/38234053/project-different-embedded-structures-to-same-name", "title": "Project different embedded structures to same name", "body": "<p>I am writing a python script that performs these tasks:</p>\n\n<ul>\n<li>Query a MongoDB Collection with embeded documents</li>\n<li>Aggregate and Project to change the field names that are returned in the query to match a \"u_\" convention</li>\n<li>Import the values to ServiceNow via REST API</li>\n</ul>\n\n<p><strong>ISSUE:</strong></p>\n\n<p>The embedded documents are not in a consistent structure. The HOSTNAME field is stored in varying structures.</p>\n\n<p>I need to return the hostname as u_hostname. I need the value of $hostnames.name if it exists OR the value of $hostname if it exists.</p>\n\n<p>How can I determine if either one exists, and return it as u_hostname?</p>\n\n<p><strong>Structure 1  Hostname stored as $hostnames.name</strong></p>\n\n<pre><code>{\n    \"_id\" : \"192.168.1.1\",\n    \"addresses\" : {\n        \"ipv4\" : \"192.168.1.1\"\n    },\n    \"hostnames\" : [ \n        {\n            \"type\" : \"PTR\",\n            \"name\" : \"example.hostname.com\"\n        }\n    ]\n}\n</code></pre>\n\n<p><strong>Structure 2  Hostname stored as $hostname</strong></p>\n\n<pre><code>{\n    \"_id\" : \"192.168.2.1\",\n    \"addresses\" : {\n        \"ipv4\" : \"192.168.2.1\"\n    },\n    \"hostname\" : \"helloworld.com\",\n\n}\n</code></pre>\n\n<p><strong>Script:</strong></p>\n\n<p>The query will only return the value of $hostname, not $hostname.name.</p>\n\n<pre><code>cmp = db['computers'].aggregate([\n        {\"$project\" : {\n                \"_id\":0,\n                \"u_hostname\": \"$hostnames.name\",\n                \"u_hostname\": \"$hostname\",\n                \"u_ipv4\": \"$addresses.ipv4\"\n        }}\n])\n</code></pre>\n"}, {"tags": ["python", "qt", "pyqt4"], "comments": [{"owner": {"reputation": 4602, "user_id": 625350, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qzA9A.jpg?s=128&g=1", "display_name": "titusjan", "link": "https://stackoverflow.com/users/625350/titusjan"}, "edited": false, "score": 0, "creation_date": 1467843152, "post_id": 38234039, "comment_id": 63890929, "body": "I don&#39;t understand what you mean with &quot;top right corner cell/pushbutton&quot;. Perhaps a screenshot with a circle or arrow would help."}, {"owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "edited": false, "score": 0, "creation_date": 1467845275, "post_id": 38234039, "comment_id": 63891598, "body": "Are you talking about the <a href=\"http://doc.qt.io/qt-4.8/qtableview.html#cornerButtonEnabled-prop\" rel=\"nofollow noreferrer\">corner button</a> - which is at the top left rather than top right?"}, {"owner": {"reputation": 736, "user_id": 4317363, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/36de5dfa781f22965f225c6f88a93824?s=128&d=identicon&r=PG&f=1", "display_name": "asdf", "link": "https://stackoverflow.com/users/4317363/asdf"}, "edited": false, "score": 0, "creation_date": 1467900405, "post_id": 38234039, "comment_id": 63916470, "body": "Yeah sorry, top left!"}, {"owner": {"reputation": 4602, "user_id": 625350, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qzA9A.jpg?s=128&g=1", "display_name": "titusjan", "link": "https://stackoverflow.com/users/625350/titusjan"}, "reply_to_user": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "edited": false, "score": 1, "creation_date": 1468356937, "post_id": 38234039, "comment_id": 64091825, "body": "So what&#39;s wrong with <code>setCornerButtonEnabled(False)</code>, like @eclarkso suggested?"}, {"owner": {"reputation": 736, "user_id": 4317363, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/36de5dfa781f22965f225c6f88a93824?s=128&d=identicon&r=PG&f=1", "display_name": "asdf", "link": "https://stackoverflow.com/users/4317363/asdf"}, "reply_to_user": {"reputation": 4602, "user_id": 625350, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qzA9A.jpg?s=128&g=1", "display_name": "titusjan", "link": "https://stackoverflow.com/users/625350/titusjan"}, "edited": false, "score": 0, "creation_date": 1468424179, "post_id": 38234039, "comment_id": 64124385, "body": "@titusjan I want to remove it.  Not just disable it"}], "answers": [{"tags": [], "owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "is_accepted": false, "score": 1, "last_activity_date": 1468420054, "creation_date": 1468420054, "answer_id": 38354494, "question_id": 38234039, "link": "https://stackoverflow.com/questions/38234039/is-there-a-way-to-access-the-top-left-corner-push-button-of-qtableview/38354494#38354494", "title": "Is there a way to access the top left corner push button of QTableView?", "body": "<p>Per the comments above, you can only disable it via <a href=\"http://doc.qt.io/qt-4.8/qtableview.html#cornerButtonEnabled-prop\" rel=\"nofollow\"><code>::setCornerButtonEnabled()</code></a>.  </p>\n\n<p>That said, if this is important enough you can try <a href=\"http://www.qtcentre.org/threads/28693-QTableWidget-Using-top-left-corner-cell\" rel=\"nofollow\">hackery referenced in this thread</a> to hide or style or otherwise muck up the button.</p>\n"}], "owner": {"reputation": 736, "user_id": 4317363, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/36de5dfa781f22965f225c6f88a93824?s=128&d=identicon&r=PG&f=1", "display_name": "asdf", "link": "https://stackoverflow.com/users/4317363/asdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468420054, "creation_date": 1467840345, "last_edit_date": 1467905236, "question_id": 38234039, "link": "https://stackoverflow.com/questions/38234039/is-there-a-way-to-access-the-top-left-corner-push-button-of-qtableview", "title": "Is there a way to access the top left corner push button of QTableView?", "body": "<p>PyQt 4.11.4\nQt 4.8.7</p>\n\n<p>Is there a way to get a pointer to the top left corner cell/pushbutton on a QTableView?  I would like to remove it or hide it. In the image below its the cell left of the first column (Lag1_Lvl_Cng_BBB_Spread) and above the first row (qadj_disp_inc_nom)</p>\n\n<p>Any help appreciated<a href=\"https://i.stack.imgur.com/ftJzF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ftJzF.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "qt", "pyqt5"], "comments": [{"owner": {"reputation": 31, "user_id": 6441952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be73037ef9cd287ffe4d224a7eac4382?s=128&d=identicon&r=PG&f=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/6441952/developer"}, "edited": false, "score": 0, "creation_date": 1467904203, "post_id": 38234021, "comment_id": 63919369, "body": "Thanks for the reply. That doesn&#39;t help. Those properties don&#39;t have any effect on how the horizontal bar handles the QWheelEvent, which essentailly delivers an angleDelta to Qt. The key problem is that the horizontal bar does not work while the vertical bar wokrs perfectly. I did not do anything special for the vertical bar."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9503243, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p98_sj-fAt4/AAAAAAAAAAI/AAAAAAAAAOA/iiw-p-FnJr4/photo.jpg?sz=128", "display_name": "Gelso", "link": "https://stackoverflow.com/users/9503243/gelso"}, "is_accepted": false, "score": 0, "last_activity_date": 1536226192, "last_edit_date": 1536226192, "creation_date": 1532104663, "answer_id": 51446991, "question_id": 38234021, "link": "https://stackoverflow.com/questions/38234021/horizontal-scroll-on-wheelevent-with-shift-too-fast/51446991#51446991", "title": "Horizontal scroll on wheelEvent with shift too fast", "body": "<p>In order to slow down the two scrollbars, I would interact with them changing their values like this (in my code, I moved the scrollbars horizontally with Ctrl and vertically with Shift):</p>\n\n<pre><code>def wheelEvent(self, event):\n\n    delta = event.angleDelta().y()\n\n    if event.modifiers() &amp; Qt.ControlModifier:\n        x = self.horizontalScrollBar().value()\n        self.horizontalScrollBar().setValue(x - delta)\n\n    elif event.modifiers() &amp; Qt.ShiftModifier:\n        y = self.verticalScrollBar().value()\n        self.verticalScrollBar().setValue(y + delta)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 167, "user_id": 6798110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01eb2b25c65ca40b940c06f738b5826e?s=128&d=identicon&r=PG&f=1", "display_name": "jmcker", "link": "https://stackoverflow.com/users/6798110/jmcker"}, "is_accepted": false, "score": 0, "last_activity_date": 1607990160, "creation_date": 1607990160, "answer_id": 65298179, "question_id": 38234021, "link": "https://stackoverflow.com/questions/38234021/horizontal-scroll-on-wheelevent-with-shift-too-fast/65298179#65298179", "title": "Horizontal scroll on wheelEvent with shift too fast", "body": "<p>Another way to accomplish this is to trigger a\n<a href=\"https://doc.qt.io/archives/qt-4.8/qabstractslider.html#SliderAction-enum\" rel=\"nofollow noreferrer\"><code>SliderSingleStepAdd</code> or <code>SliderSingleStepSub</code></a>\naction using the <a href=\"https://doc.qt.io/archives/qt-4.8/qabstractslider.html#triggerAction\" rel=\"nofollow noreferrer\"><code>triggerAction</code></a> function.</p>\n<p>These seem to move at an appropriate scroll speed since it applies whatever delta would naturally be used.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def wheelEvent(self, event: QtGui.QWheelEvent):\n\n    scrollbar = self.verticalScrollbar()\n    if (event.modifiers() == QtCore.Qt.ShiftModifier):\n        scrollbar = self.horizontalScrollBar()\n\n    action = QtWidgets.QAbstractSlider.SliderSingleStepAdd\n    if (event.angleDelta().y() &gt; 0):\n        action = QtWidgets.QAbstractSlider.SliderSingleStepSub\n\n    scrollbar.triggerAction(action)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6441952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be73037ef9cd287ffe4d224a7eac4382?s=128&d=identicon&r=PG&f=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/6441952/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1182, "favorite_count": 0, "protected_date": 1532105961, "answer_count": 2, "score": 3, "last_activity_date": 1607990160, "creation_date": 1467840261, "last_edit_date": 1467840983, "question_id": 38234021, "link": "https://stackoverflow.com/questions/38234021/horizontal-scroll-on-wheelevent-with-shift-too-fast", "title": "Horizontal scroll on wheelEvent with shift too fast", "body": "<p>I have 200 objects on the <code>MyView</code> that is derived from the <code>QGraphicsView</code>. I use the mouse wheel to scroll vertically, everything is nice and smooth. I think that is the Qt default implementation. </p>\n\n<p>I implement the Shift + wheel to scroll horizontally, and the horizontal scroll bar jumps a huge step on a single wheel event - 10 times bigger than that on the vertical scroll bar.</p>\n\n<p>Basically, the same wheel event drives the horizontal scroll bar 10 times farther than the vertical scroll bar.</p>\n\n<p>How to slow down the horizontal scroll bar?</p>\n\n<p>Well, I tried to reduce the original event's <code>angleDelta</code> value like this <code>event.angleDelta()/10</code> to generate a new wheel event and use the new event to drive the horizontal scroll bar. That works but seems to be too complicated.</p>\n\n<p>I also notice it is the Shift modifier that affects the horizontal scroll bar behavior. If I do <code>self.horizontalBar().wheelEvent(event)</code> without the Shift modifier, the horizontal bar scrolling is 10 times slower. That is weird. Why does pressing Shift change the horizontal scrolling behavior?!</p>\n\n<pre><code>import sys\nfrom PyQt5.Qt import QGraphicsScene, QGraphicsView, QGraphicsTextItem, QApplication, QWheelEvent, Qt\n\n\nclass MyView(QGraphicsView):\n    def wheelEvent(self, event: QWheelEvent):\n        if event.modifiers() == Qt.ShiftModifier:\n            self.horizontalScrollBar().wheelEvent(event)\n        else:\n            self.verticalScrollBar().wheelEvent(event)\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    scene = QGraphicsScene()\n    view = MyView(scene)\n\n    # Generate 200 objects, 100 on x and 100 on y.\n    for i in range(100):\n        obj_on_x = QGraphicsTextItem(\"X\" + str(i))\n        obj_on_x.setX(i * 100)\n        scene.addItem(obj_on_x)\n\n        obj_on_y = QGraphicsTextItem(\"Y\" + str(i))\n        obj_on_y.setY(i * 100)\n        scene.addItem(obj_on_y)\n\n    view.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 2, "last_activity_date": 1467841293, "creation_date": 1467841293, "answer_id": 38234255, "question_id": 38234003, "link": "https://stackoverflow.com/questions/38234003/pandas-dataframe-find-and-replace/38234255#38234255", "title": "Pandas Dataframe find and replace", "body": "<pre><code>import pandas as pd\n\nsingle = ['A','B']\ndouble = ['AA','BB']\ndf = pd.DataFrame([['All',1,'AA','Yes'],['A',2,'All','No']])\n\nfirst = pd.DataFrame([x for item in single \n                      for x in [('All', item), (item, item)]], columns=[0, 'first']) \nthird = pd.DataFrame([x for item in double \n                      for x in [('All', item), (item, item)]], columns=[2, 'third']) \n\nresult = pd.merge(pd.merge(df, first, how='left'), third, how='left')\nresult = result.drop([0, 2], axis=1)\nresult = result.rename(columns={'first':0, 'third':2})\nresult = result.sortlevel(axis=1)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>   0  1   2    3\n0  A  1  AA  Yes\n1  B  1  AA  Yes\n2  A  2  AA   No\n3  A  2  BB   No\n</code></pre>\n\n<hr>\n\n<p>The main idea is to prepare two helper DataFrames:</p>\n\n<pre><code>first = pd.DataFrame([x for item in single \n                      for x in [('All', item), (item, item)]], columns=[0, 'first']) \n#      0 first\n# 0  All     A\n# 1    A     A\n# 2  All     B\n# 3    B     B\n\nthird = pd.DataFrame([x for item in double \n                      for x in [('All', item), (item, item)]], columns=[2, 'third']) \n#      2 third\n# 0  All    AA\n# 1   AA    AA\n# 2  All    BB\n# 3   BB    BB\n</code></pre>\n\n<p>Then the desired DataFrame is the result of merging <code>df</code> with <code>first</code> and <code>third</code>:</p>\n\n<pre><code>result = pd.merge(pd.merge(df, first, how='left'), third, how='left')\n#      0  1    2    3 first third\n# 0  All  1   AA  Yes     A    AA\n# 1  All  1   AA  Yes     B    AA\n# 2    A  2  All   No     A    AA\n# 3    A  2  All   No     A    BB\n</code></pre>\n\n<p>Finally, drop the <code>0</code> and <code>2</code> columns and replace them with the <code>first</code> and <code>third</code> columns:</p>\n\n<pre><code>result = result.drop([0, 2], axis=1)\nresult = result.rename(columns={'first':0, 'third':2})\nresult = result.sortlevel(axis=1)\n#    0  1   2    3\n# 0  A  1  AA  Yes\n# 1  B  1  AA  Yes\n# 2  A  2  AA   No\n# 3  A  2  BB   No\n</code></pre>\n"}], "owner": {"reputation": 2325, "user_id": 3029108, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6d131f80f764cda67171268ecc400609?s=128&d=identicon&r=PG&f=1", "display_name": "ilovecp3", "link": "https://stackoverflow.com/users/3029108/ilovecp3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 38234255, "answer_count": 1, "score": 0, "last_activity_date": 1467841293, "creation_date": 1467840189, "question_id": 38234003, "link": "https://stackoverflow.com/questions/38234003/pandas-dataframe-find-and-replace", "title": "Pandas Dataframe find and replace", "body": "<p>I have two lists:</p>\n\n<pre><code>single = ['A','B']\ndouble = ['AA','BB']\n</code></pre>\n\n<p>Data stored in dataframe <code>df</code>:</p>\n\n<pre><code>     0  1    2    3\n0  All  1   AA  Yes\n1    A  2  All   No\n</code></pre>\n\n<p>where All means <code>['A','B']</code> in column 0 and means <code>['AA','BB']</code> in column 2, I want to obtain the following dataframe <code>df2</code></p>\n\n<pre><code>    0  1   2    3\n0   A  1  AA  Yes\n1   B  1  AA  Yes\n2   A  2  AA   No\n3   A  2  BB   No\n</code></pre>\n\n<p>and the order of the row index doesn't matter. I am now doing:</p>\n\n<pre><code>single = ['A','B']\ndouble = ['AA','BB']\ndf=pd.DataFrame([['All',1,'AA','Yes'],['A',2,'All','No']])\n\nindex = []\nfor i in range(len(df)):\n    if df.loc[i,0] == 'All':\n        index.append(i)\n        for j in single:\n            df.loc[len(df),:] = df.loc[i,:]\n            df.loc[len(df)-1,0] = j\ndf = df.drop(index).reset_index(drop=True)\n\nindex = []\nfor i in range(len(df)):\n    if df.loc[i,2] == 'All':\n        index.append(i)\n        for j in double:\n            df.loc[len(df),:] = df.loc[i,:]\n            df.loc[len(df)-1,2] = j\ndf2 = df.drop(index).reset_index(drop=True)\nprint df2\n</code></pre>\n\n<p>It first adds two rows to represent 'All' in column 0 and delete this row. Then for the 'All' in column 2.</p>\n\n<p>Any easier way to do this 'find and replace'?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8305, "user_id": 6495570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nDPog.jpg?s=128&g=1", "display_name": "Abhinay Reddy Keesara", "link": "https://stackoverflow.com/users/6495570/abhinay-reddy-keesara"}, "edited": false, "score": 0, "creation_date": 1467840459, "post_id": 38233966, "comment_id": 63889764, "body": "change this with open(&#39;names.txt&#39;) as x: line as with open(&#39;names.txt&#39;,&#39;r&#39;) as x:"}, {"owner": {"reputation": 53, "user_id": 1879400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78cabf9ac211b1c1543bd383d323eca5?s=128&d=identicon&r=PG", "display_name": "DarkKnight4251", "link": "https://stackoverflow.com/users/1879400/darkknight4251"}, "reply_to_user": {"reputation": 8305, "user_id": 6495570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nDPog.jpg?s=128&g=1", "display_name": "Abhinay Reddy Keesara", "link": "https://stackoverflow.com/users/6495570/abhinay-reddy-keesara"}, "edited": false, "score": 0, "creation_date": 1467840878, "post_id": 38233966, "comment_id": 63889923, "body": "Thanks for the tip. I should have done that in the first place. Unfortunately, I still get the same error."}, {"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467841785, "post_id": 38233966, "comment_id": 63890326, "body": "os.mkdir(line), not os.mkdir(x), because x is the file descriptor, not the line"}, {"owner": {"reputation": 4731, "user_id": 1716866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411da970ac5de2f1a0d66a10741b0e9c?s=128&d=identicon&r=PG", "display_name": "leekaiinthesky", "link": "https://stackoverflow.com/users/1716866/leekaiinthesky"}, "edited": false, "score": 1, "creation_date": 1467842045, "post_id": 38233966, "comment_id": 63890448, "body": "Flagging to close as a problem caused by simple typographical error."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 1879400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78cabf9ac211b1c1543bd383d323eca5?s=128&d=identicon&r=PG", "display_name": "DarkKnight4251", "link": "https://stackoverflow.com/users/1879400/darkknight4251"}, "edited": false, "score": 0, "creation_date": 1467898015, "post_id": 38234364, "comment_id": 63914520, "body": "That worked. Sometimes it just takes another set of eyes I guess :). You&#39;re right, I added the str because os.mkdir(x) was giving me an error."}], "tags": [], "owner": {"reputation": 4731, "user_id": 1716866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411da970ac5de2f1a0d66a10741b0e9c?s=128&d=identicon&r=PG", "display_name": "leekaiinthesky", "link": "https://stackoverflow.com/users/1716866/leekaiinthesky"}, "is_accepted": true, "score": 3, "last_activity_date": 1467846998, "last_edit_date": 1467846998, "creation_date": 1467841775, "answer_id": 38234364, "question_id": 38233966, "link": "https://stackoverflow.com/questions/38233966/creating-folders-based-on-names-in-a-text-file-in-python/38234364#38234364", "title": "Creating folders based on names in a text file in python", "body": "<p>Instead of:</p>\n\n<pre><code>        os.mkdir(str(x))\n</code></pre>\n\n<p>You meant:</p>\n\n<pre><code>        os.mkdir(str(line))\n</code></pre>\n\n<p>You don't even need <code>str()</code>, since <code>line</code> is already a <code>str</code>. (I suspect you only added it because <code>os.mkdir(x)</code> was giving you an error.)</p>\n\n<p>Your previous code was trying to create several directories, all named something like \"<code>&lt;open file 'names.txt', mode 'r' at 0X00000000025E6300&gt;</code>\".</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 1879400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78cabf9ac211b1c1543bd383d323eca5?s=128&d=identicon&r=PG", "display_name": "DarkKnight4251", "link": "https://stackoverflow.com/users/1879400/darkknight4251"}, "edited": false, "score": 0, "creation_date": 1467898071, "post_id": 38234572, "comment_id": 63914578, "body": "Good thought! I already double checked the code with this previously and it didn&#39;t matter, so I took it out jus to get rid of extra code."}], "tags": [], "owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "is_accepted": false, "score": 0, "last_activity_date": 1467842765, "creation_date": 1467842765, "answer_id": 38234572, "question_id": 38233966, "link": "https://stackoverflow.com/questions/38233966/creating-folders-based-on-names-in-a-text-file-in-python/38234572#38234572", "title": "Creating folders based on names in a text file in python", "body": "<p>Check the current working directory by:</p>\n\n<pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.getcwd()\n</code></pre>\n\n<p>You may find that your program maynot have appropriate permission to make changes on the directory.</p>\n\n<p>Try changing to something else like:</p>\n\n<pre><code>&gt;&gt;&gt; os.chdir(\"&lt;someAbsolutePath&gt;\")\n</code></pre>\n\n<p>And if you find the program can write/ make changes on another directory, then you may need to change the permissions of the program.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 1879400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78cabf9ac211b1c1543bd383d323eca5?s=128&d=identicon&r=PG", "display_name": "DarkKnight4251", "link": "https://stackoverflow.com/users/1879400/darkknight4251"}, "edited": false, "score": 0, "creation_date": 1467898100, "post_id": 38234837, "comment_id": 63914601, "body": "I didn&#39;t have to do that in this instance, but I&#39;m absolutely going to keep this in mind for future projects. Thanks!"}], "tags": [], "owner": {"reputation": 101, "user_id": 3920201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ef148534ac3ecbe91bb70e456d7343?s=128&d=identicon&r=PG&f=1", "display_name": "Malcriado415", "link": "https://stackoverflow.com/users/3920201/malcriado415"}, "is_accepted": false, "score": 0, "last_activity_date": 1467844669, "last_edit_date": 1467844669, "creation_date": 1467844132, "answer_id": 38234837, "question_id": 38233966, "link": "https://stackoverflow.com/questions/38233966/creating-folders-based-on-names-in-a-text-file-in-python/38234837#38234837", "title": "Creating folders based on names in a text file in python", "body": "<p>You may be catching a problem with special characters and whitespace between the names.  Windows doesn't like it when you fail to escape the whitespace between multi-word directory names.  </p>\n\n<p>Try (i) reading the lines as Unicode (to avoid special character problems) and then (ii) joining the names with an underscore to avoid whitespace issues:</p>\n\n<pre><code>import os\n\nwith open('names.txt', 'rU') as x:\n    for line in x:\n        line = line.strip().split()\n        filename = \"_\".join([i for i in line])\n        os.mkdir(filename)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7371764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kp0hA.jpg?s=128&g=1", "display_name": "Abisdad", "link": "https://stackoverflow.com/users/7371764/abisdad"}, "is_accepted": false, "score": 0, "last_activity_date": 1552744064, "creation_date": 1552744064, "answer_id": 55197532, "question_id": 38233966, "link": "https://stackoverflow.com/questions/38233966/creating-folders-based-on-names-in-a-text-file-in-python/55197532#55197532", "title": "Creating folders based on names in a text file in python", "body": "<pre><code># My solution from above...\n# Trying to create folders from a file\n# By Rob Thomas\n# 16/3/2019 Ver 2.0\n\nimport os,sys\n\n# Change to correct folder to create files in\n# Just copy from Windows Explorer, then add in the extra \"\\\"\nos.chdir(\"R:\\\\_1 Y9 Yellow\")\nprint(os.getcwd())\nright=input(\"Is this correct? Y/N: \")\n\nif right.lower()!=\"y\":\n    print(\"Exiting...\")\n    sys.exit()\n\ntry:    # Also change to the correct file name \n    with open('Yellow.txt', \"r\") as x:\n        for line in x:\n            line = line.strip()\n            os.mkdir(str(line))\n        x.close()\n\nexcept OSError:  \n    print (\"Creation of the directory failed\" )\nelse:  \n    print (\"Successfully created the directory\" )\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 1879400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78cabf9ac211b1c1543bd383d323eca5?s=128&d=identicon&r=PG", "display_name": "DarkKnight4251", "link": "https://stackoverflow.com/users/1879400/darkknight4251"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2413, "favorite_count": 1, "accepted_answer_id": 38234364, "answer_count": 4, "score": 1, "last_activity_date": 1552744064, "creation_date": 1467840030, "question_id": 38233966, "link": "https://stackoverflow.com/questions/38233966/creating-folders-based-on-names-in-a-text-file-in-python", "title": "Creating folders based on names in a text file in python", "body": "<p>I am trying to get a python script to read a text file that has a list of names in it and create folders based on those names. For example, if the text file has \"john_doe\" and \"jane_doe\" in it, the script should create two folders. One called \"john_doe\" and one called \"jane_doe\". </p>\n\n<p>When I run my script, I get the error WindowsError: [Error 123] The filename, directory name, or colume label syntax is incorrect: \",open file 'names.txt', mode 'r' at 0X00000000025E6300>\"</p>\n\n<p>Here's the script that I'm running:</p>\n\n<pre><code>import os\n\nwith open('names.txt') as x:\n    for line in x:\n        line = line.strip()\n        os.mkdir(str(x))\n</code></pre>\n\n<p>I think that it's more of a Windows problem (hence the WindowsError), but I'm not sure how to get around it. Any tips?</p>\n"}, {"tags": ["python", "django", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 6449260, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ec4555c5562eccb3b40556457353e21f?s=128&d=identicon&r=PG&f=1", "display_name": "Compadre", "link": "https://stackoverflow.com/users/6449260/compadre"}, "is_accepted": true, "score": 1, "last_activity_date": 1467843248, "creation_date": 1467843248, "answer_id": 38234674, "question_id": 38233889, "link": "https://stackoverflow.com/questions/38233889/python-django-compare-list-with-database-rows/38234674#38234674", "title": "Python/django - compare list with database rows", "body": "<p>Assuming you have django model <code>VotableImage</code>, you can get list of one of it's fields by calling <code>db_path_list = VotableImage.objects.values_list('Path', flat=True)</code> and then check each value for presence in <code>files</code> list (that you created by script)</p>\n"}], "owner": {"reputation": 2461, "user_id": 1726404, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/647f2443db420ba73f605ac0637b4166?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1726404/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 38234674, "answer_count": 1, "score": 0, "last_activity_date": 1467843248, "creation_date": 1467839721, "question_id": 38233889, "link": "https://stackoverflow.com/questions/38233889/python-django-compare-list-with-database-rows", "title": "Python/django - compare list with database rows", "body": "<p>I have a database with rows of image locations, I also have a list of image locations which is generated when I run the script. I want to keep the database in sync with the generated list. I would just drop the table, but this table has vote information which I need to keep. If I delete the image, I don't want there to be an entry, but if I add an image I want to be able to keep the votes for all of the other images</p>\n\n<p>example:</p>\n\n<pre><code>[db]\nName   | Path               | vote_count\nimage1 | path/to/image1.jpg | 1\nimage2 | path/to/image2.jpg | 4\nimage3 | path/to/image3.jpg | 2\n\n[list]\npath/to/image1.jpg\npath/to/image2.jpg\npath/to/image3.jpg\npath/to/image4.jpg\n</code></pre>\n\n<p>I want to compare the list to the database and if there is an added image I want to see the db do the following:</p>\n\n<pre><code>[db]\nName   | Path               | vote_count\nimage1 | path/to/image1.jpg | 1\nimage2 | path/to/image2.jpg | 4\nimage3 | path/to/image3.jpg | 2\nimage4 | path/to/image4.jpg | 0\n</code></pre>\n\n<p>What is a good way to accomplish this?</p>\n\n<p>I have this so far:</p>\n\n<pre><code>def ScanImages(request):\n    files = []\n    fileRoots = []\n    for root, directories, filenames in os.walk('/web/static/web/images/'):\n        for filename in filenames: \n            files.append(os.path.join(root,filename))\n            fileRoots.append(root)\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "testing"], "comments": [{"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1467840710, "post_id": 38233870, "comment_id": 63889865, "body": "maybe this helps: <a href=\"http://stackoverflow.com/questions/4142151/python-how-to-import-the-class-within-the-same-directory-or-sub-directory\" title=\"python how to import the class within the same directory or sub directory\">stackoverflow.com/questions/4142151/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2197, "user_id": 5328348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/113b8a1425d012e4a48b69849a499bc9?s=128&d=identicon&r=PG&f=1", "display_name": "SJC", "link": "https://stackoverflow.com/users/5328348/sjc"}, "edited": false, "score": 0, "creation_date": 1467841412, "post_id": 38234124, "comment_id": 63890171, "body": "I am now getting an error saying <code>name Calculate is not defined</code> when defining <code>self.calc = Calculate()</code> in the setup method."}, {"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467842180, "post_id": 38234124, "comment_id": 63890514, "body": "calculate_test.py needs to access Calculate from calculate/calculate.py, so you need &quot;from calculate.calculate import Calculate&quot;"}, {"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467842358, "post_id": 38234124, "comment_id": 63890591, "body": "I think it&#39;s better practice to have the tests inside the packages hierarchy"}, {"owner": {"reputation": 2197, "user_id": 5328348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/113b8a1425d012e4a48b69849a499bc9?s=128&d=identicon&r=PG&f=1", "display_name": "SJC", "link": "https://stackoverflow.com/users/5328348/sjc"}, "reply_to_user": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467842656, "post_id": 38234124, "comment_id": 63890739, "body": "@\u03bbuser what structure do you suggest? I would ideally like to have a tests folder to separate out the classes and test files"}, {"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "edited": false, "score": 0, "creation_date": 1467843096, "post_id": 38234124, "comment_id": 63890911, "body": "I&#39;d suggest doing like this: <a href=\"http://stackoverflow.com/a/5998845\">stackoverflow.com/a/5998845</a> Having tests in a hierarchy allows sharing stuff between them, better organization, etc."}], "tags": [], "owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1467841189, "last_edit_date": 1467841189, "creation_date": 1467840723, "answer_id": 38234124, "question_id": 38233870, "link": "https://stackoverflow.com/questions/38233870/why-do-i-get-importerror-when-running-the-tests/38234124#38234124", "title": "Why do I get ImportError when running the tests?", "body": "<p>Your project's structure is the reason. The test script doesn't have the outer directory in the search path when you start it. Here are some ways to fix that</p>\n\n<ol>\n<li>Move the test file into the same directory that contains the module it imports. That will require no changes in the test file.</li>\n<li><p>Use this structure</p>\n\n<pre><code>./project/\n    calculate_test.py\n    calculate/\n        __init__.py\n        calculate.py\n</code></pre>\n\n<p>This will require you to change the import signature in calculate_test.py to something like <code>from calculate import calculate</code></p></li>\n</ol>\n"}], "owner": {"reputation": 2197, "user_id": 5328348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/113b8a1425d012e4a48b69849a499bc9?s=128&d=identicon&r=PG&f=1", "display_name": "SJC", "link": "https://stackoverflow.com/users/5328348/sjc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 611, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1592507767, "creation_date": 1467839624, "last_edit_date": 1592507767, "question_id": 38233870, "link": "https://stackoverflow.com/questions/38233870/why-do-i-get-importerror-when-running-the-tests", "title": "Why do I get ImportError when running the tests?", "body": "<p>I am using Python 3 to try and get a test file for sample application working yet it keeps throwing <code>ImportError: No module named 'calculate'</code></p>\n\n<p>My file structure is:</p>\n\n<pre><code>/calculate\n  __init__.py\n  calculate.py\n  test/\n    __init__.py\n    calculate_test.py\n</code></pre>\n\n<p>I cannot figure out why this is the case, any help would be much appreciated.</p>\n\n<p>The <code>__init__.py</code> files are empty.</p>\n\n<p><strong>calculate.py</strong> contains:</p>\n\n<pre><code>class Calculate(object):\n    def add(self, x, y):\n        return x + y\n\nif __name__ == '__main__':\n    calc = Calculate()\n    result = calc.add(2, 2)\n    print(result)\n</code></pre>\n\n<p><strong>calculate_test.py</strong> contains:</p>\n\n<pre><code>import unittest\nfrom calculate import Calculate\n\nclass TestCalculate(unittest.TestCase):\n    def setUp(self):\n        self.calc = Calculate()\n\n    def test_add_method_returns_correct_result(self):\n        self.assertEqual(4, self.calc.add(2,2))\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>I am running <code>python test/calculate_test.py</code> from the root <code>/calculate</code> folder and am getting the error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test/calculate_test.py\", line 2, in &lt;module&gt;\n    from calculate import Calculate\nImportError: No module named 'calculate'\n</code></pre>\n\n<p>I have been fiddling around with different structures and cannot understand what the problem is.</p>\n"}, {"tags": ["python", "neural-network", "theano"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 1983184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea201bcf47dd0d991c3af73792251fcd?s=128&d=identicon&r=PG", "display_name": "Cem S.", "link": "https://stackoverflow.com/users/1983184/cem-s"}, "edited": false, "score": 2, "creation_date": 1467930832, "post_id": 38240539, "comment_id": 63933642, "body": "theano.tensor.shape() do not work.. (It returns Shape.0) - I think what I need to do is, somehow get the value, and then compute the shape. If x was a shared variable I could do that, but it is not.."}, {"owner": {"reputation": 147, "user_id": 1983184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea201bcf47dd0d991c3af73792251fcd?s=128&d=identicon&r=PG", "display_name": "Cem S.", "link": "https://stackoverflow.com/users/1983184/cem-s"}, "edited": false, "score": 0, "creation_date": 1467931237, "post_id": 38240539, "comment_id": 63933766, "body": "And, could you give an example for theano.tensor.ones_like? Thanks!"}, {"owner": {"reputation": 2940, "user_id": 4244561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542bdc9fbdd04da66313de3d4bbe36ee?s=128&d=identicon&r=PG&f=1", "display_name": "harshil", "link": "https://stackoverflow.com/users/4244561/harshil"}, "reply_to_user": {"reputation": 147, "user_id": 1983184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea201bcf47dd0d991c3af73792251fcd?s=128&d=identicon&r=PG", "display_name": "Cem S.", "link": "https://stackoverflow.com/users/1983184/cem-s"}, "edited": false, "score": 0, "creation_date": 1468009124, "post_id": 38240539, "comment_id": 63968865, "body": "theano.tensor.shape returns a tensor variable itself, so this is why it returns Shape.0. If you wanted to use this, you would do something like <code>b = T.ones(T.shape(x)[1])</code>.  Or, using ones_like, you could do <code>T.ones_like(x[0])</code>."}, {"owner": {"reputation": 147, "user_id": 1983184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea201bcf47dd0d991c3af73792251fcd?s=128&d=identicon&r=PG", "display_name": "Cem S.", "link": "https://stackoverflow.com/users/1983184/cem-s"}, "edited": false, "score": 0, "creation_date": 1468019250, "post_id": 38240539, "comment_id": 63972408, "body": "<code>ones_like</code> works! I couldn&#39;t get <code>ones</code> to work though.. Curious: What exactly is <code>x[0]</code>, I mean x is organized so that each column is a data item. When we say x[0] are we taking a row from x? Thanks!"}, {"owner": {"reputation": 2940, "user_id": 4244561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542bdc9fbdd04da66313de3d4bbe36ee?s=128&d=identicon&r=PG&f=1", "display_name": "harshil", "link": "https://stackoverflow.com/users/4244561/harshil"}, "reply_to_user": {"reputation": 147, "user_id": 1983184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea201bcf47dd0d991c3af73792251fcd?s=128&d=identicon&r=PG", "display_name": "Cem S.", "link": "https://stackoverflow.com/users/1983184/cem-s"}, "edited": false, "score": 0, "creation_date": 1468049924, "post_id": 38240539, "comment_id": 63977671, "body": "Yes, <code>x[0]</code> is indeed a row from <code>x</code>."}, {"owner": {"reputation": 633, "user_id": 289934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2f6b05efbdb03e9a23625189b71e83?s=128&d=identicon&r=PG", "display_name": "Robert P. Goldman", "link": "https://stackoverflow.com/users/289934/robert-p-goldman"}, "reply_to_user": {"reputation": 147, "user_id": 1983184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea201bcf47dd0d991c3af73792251fcd?s=128&d=identicon&r=PG", "display_name": "Cem S.", "link": "https://stackoverflow.com/users/1983184/cem-s"}, "edited": false, "score": 0, "creation_date": 1556319802, "post_id": 38240539, "comment_id": 98411458, "body": "Needs an example to show how <code>theano.tensor.ones_like</code> would help.  @CemS. seems to have worked out the answer, but doesn&#39;t say what it is. Here&#39;s what I see: <code>ipdb&gt; p T.ones_like(weights). Elemwise{second,no_inplace}.0</code>. -- the <code>Elemwise</code> object is just as opaque as <code>Shape.0</code>"}], "tags": [], "owner": {"reputation": 2940, "user_id": 4244561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542bdc9fbdd04da66313de3d4bbe36ee?s=128&d=identicon&r=PG&f=1", "display_name": "harshil", "link": "https://stackoverflow.com/users/4244561/harshil"}, "is_accepted": true, "score": 1, "last_activity_date": 1467879106, "creation_date": 1467879106, "answer_id": 38240539, "question_id": 38233858, "link": "https://stackoverflow.com/questions/38233858/theano-shape-of-a-tensor-variable-inside-a-function/38240539#38240539", "title": "Theano: Shape of a tensor variable inside a function", "body": "<p>You can try using <a href=\"http://deeplearning.net/software/theano/library/tensor/basic.html#theano.tensor.shape\" rel=\"nofollow\">theano.tensor.shape</a> to get the shape of the object in question, or, more directly, you can use <a href=\"http://deeplearning.net/software/theano/library/tensor/basic.html#theano.tensor.ones_like\" rel=\"nofollow\">theano.tensor.ones_like</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 1601588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc534877ace7b3d3cd1107ea9c0a8d1?s=128&d=identicon&r=PG", "display_name": "Pete", "link": "https://stackoverflow.com/users/1601588/pete"}, "is_accepted": false, "score": 2, "last_activity_date": 1506596271, "creation_date": 1506596271, "answer_id": 46467474, "question_id": 38233858, "link": "https://stackoverflow.com/questions/38233858/theano-shape-of-a-tensor-variable-inside-a-function/46467474#46467474", "title": "Theano: Shape of a tensor variable inside a function", "body": "<p>Theano knows about the shape of an object using the \"type\" (see <a href=\"http://deeplearning.net/software/theano/library/tensor/basic.html\" rel=\"nofollow noreferrer\">Tensor basics</a>)</p>\n\n<p>So x.type.dtype, x.type.ndim, x.type.broadcastable, give you a good set of information about the type and shape of a tensor variable.</p>\n"}], "owner": {"reputation": 147, "user_id": 1983184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea201bcf47dd0d991c3af73792251fcd?s=128&d=identicon&r=PG", "display_name": "Cem S.", "link": "https://stackoverflow.com/users/1983184/cem-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4800, "favorite_count": 2, "accepted_answer_id": 38240539, "answer_count": 2, "score": 2, "last_activity_date": 1506596271, "creation_date": 1467839572, "last_edit_date": 1467839782, "question_id": 38233858, "link": "https://stackoverflow.com/questions/38233858/theano-shape-of-a-tensor-variable-inside-a-function", "title": "Theano: Shape of a tensor variable inside a function", "body": "<p>Say I have this theano function, which defines a layer of a neural network:</p>\n\n<pre><code>def layer(W, x):\n    b = np.array(np.ones(N))  # append 1 for intercept\n    newx = T.concatenate([x, T.stack(b)], 0)\n    return T.dot(W, newx)\n</code></pre>\n\n<p>I am concatenating ones (which is the b vector) to the end of the input data matrix x before passing it through W matrix. The problem is I need to specify a length for b. The data matrix has N columns, but say we do not know that beforehand. </p>\n\n<p>I could not find how to properly do the theano equivalent of <code>size(x, 2)</code> in Matlab. I know <code>x</code> is a symbolic variable at this point, but I could not find how to find the shape of a tensor variable inside a function.. </p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "is_accepted": false, "score": 3, "last_activity_date": 1467840014, "creation_date": 1467840014, "answer_id": 38233962, "question_id": 38233838, "link": "https://stackoverflow.com/questions/38233838/selecting-second-child-in-beautiful-soup/38233962#38233962", "title": "selecting second child in beautiful soup", "body": "<pre><code>secondp = [div.find('p') for div in soup.find('div')]\n\nIn : secondp[1].text\n\nOut : Your text\n</code></pre>\n\n<p>Or you can use the <code>findChildren</code> directly - </p>\n\n<pre><code>div_ = soup.find('div').findChildren()\nfor i, child in enumerate(div_):\n    if i == 1:\n         print child.text\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 1, "creation_date": 1467840385, "post_id": 38234025, "comment_id": 63889731, "body": "Can&#39;t be more pythonic!"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 9, "creation_date": 1467840690, "post_id": 38234025, "comment_id": 63889858, "body": "@hashcode55  how about: <code>soup.select_one(&#39;div &gt; p:nth-of-type(2)&#39;).get_text(strip=True)</code>?"}, {"owner": {"reputation": 93, "user_id": 3110742, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/SaRe2.jpg?s=128&g=1", "display_name": "dpkrai96", "link": "https://stackoverflow.com/users/3110742/dpkrai96"}, "reply_to_user": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1555442907, "post_id": 38234025, "comment_id": 98111198, "body": "@alecxe How can I get the following html element as I am getting it using js with beautifulsoup in python-- document.querySelector(&#39;body &gt; table &gt; tbody &gt; tr &gt; td &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td:nth-child(2) &gt; div:nth-child(3) &gt; table &gt; tbody &gt; tr:nth-child(11) &gt; td &gt; table &gt; tbody &gt; tr:nth-child(4) &gt; td:nth-child(5) &gt; input[type=&quot;hidden&quot;]:nth-child(1)&#39;).getAttribute(&quot;name&quot;)"}], "tags": [], "owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "is_accepted": true, "score": 26, "last_activity_date": 1552395174, "last_edit_date": 1552395174, "creation_date": 1467840272, "answer_id": 38234025, "question_id": 38233838, "link": "https://stackoverflow.com/questions/38233838/selecting-second-child-in-beautiful-soup/38234025#38234025", "title": "selecting second child in beautiful soup", "body": "<p>You can use a CSS selector to do this:</p>\n\n<pre><code>&gt;&gt;&gt; from bs4 import BeautifulSoup\n\n&gt;&gt;&gt;  soup = BeautifulSoup(\"\"\"&lt;div&gt;\n.... &lt;p&gt;this is some text&lt;/p&gt;\n.... &lt;p&gt;...and this is some other text&lt;/p&gt;\n.... &lt;/div&gt;\"\"\", \"html.parser\")\n\n&gt;&gt;&gt;  soup.select('div &gt; p')[1].get_text(strip=True)\n     '...and this is some other text'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 3110742, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/SaRe2.jpg?s=128&g=1", "display_name": "dpkrai96", "link": "https://stackoverflow.com/users/3110742/dpkrai96"}, "edited": false, "score": 0, "creation_date": 1555446056, "post_id": 38234066, "comment_id": 98112526, "body": "How can I get the following html element as I am getting it using js with beautifulsoup in python-- document.querySelector(&#39;body &gt; table &gt; tbody &gt; tr &gt; td &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td:nth-child(2) &gt; div:nth-child(3) &gt; table &gt; tbody &gt; tr:nth-child(11) &gt; td &gt; table &gt; tbody &gt; tr:nth-child(4) &gt; td:nth-child(5) &gt; input[type=&quot;hidden&quot;]:nth-child(1)&#39;).getAttribute(&quot;name&quot;)"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 13, "last_activity_date": 1467840663, "last_edit_date": 1467840663, "creation_date": 1467840486, "answer_id": 38234066, "question_id": 38233838, "link": "https://stackoverflow.com/questions/38233838/selecting-second-child-in-beautiful-soup/38234066#38234066", "title": "selecting second child in beautiful soup", "body": "<p>You can use <em>nth-of-type</em>:</p>\n\n<pre><code>h = \"\"\"&lt;div&gt;\n    &lt;p&gt;this is some text&lt;/p&gt;\n    &lt;p&gt;...and this is some other text&lt;/p&gt;\n&lt;/div&gt;\"\"\"\n\n\nsoup = BeautifulSoup(h)\n\nprint(soup.select_one(\"div p:nth-of-type(2)\").text)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6972, "user_id": 3731467, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ba1b20a3d2de4a97b893058a4673510a?s=128&d=identicon&r=PG&f=1", "display_name": "emehex", "link": "https://stackoverflow.com/users/3731467/emehex"}, "is_accepted": false, "score": -1, "last_activity_date": 1602282991, "creation_date": 1602282991, "answer_id": 64288139, "question_id": 38233838, "link": "https://stackoverflow.com/questions/38233838/selecting-second-child-in-beautiful-soup/64288139#64288139", "title": "selecting second child in beautiful soup", "body": "<p>You could solve this with <a href=\"https://github.com/maxhumber/gazpacho\" rel=\"nofollow noreferrer\">gazpacho</a>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from gazpacho import Soup\n\nhtml = &quot;&quot;&quot;\\\n&lt;div&gt;\n    &lt;p&gt;this is some text&lt;/p&gt;\n    &lt;p&gt;...and this is some other text&lt;/p&gt;\n&lt;/div&gt;\n&quot;&quot;&quot;\n\nsoup = Soup(html)\nsoup.find('p')[1].text\n</code></pre>\n<p>Which would output:</p>\n<blockquote>\n<p>'...and this is some other text'</p>\n</blockquote>\n"}], "owner": {"reputation": 295, "user_id": 3885884, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/348308da467250c343f7b6b1b2b120cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3885884", "link": "https://stackoverflow.com/users/3885884/user3885884"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21351, "favorite_count": 3, "accepted_answer_id": 38234025, "answer_count": 4, "score": 11, "last_activity_date": 1602282991, "creation_date": 1467839514, "last_edit_date": 1467839537, "question_id": 38233838, "link": "https://stackoverflow.com/questions/38233838/selecting-second-child-in-beautiful-soup", "title": "selecting second child in beautiful soup", "body": "<p>Let say a have:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;p&gt;this is some text&lt;/p&gt;\n    &lt;p&gt;...and this is some other text&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>How can I retrieve the text from the second paragraph in beautifulsoup?</p>\n"}, {"tags": ["python", "list-comprehension", "dictionary-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 1720, "user_id": 3130735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/144eeadac497b4ef167d0012a7d81f86?s=128&d=identicon&r=PG&f=1", "display_name": "TTT", "link": "https://stackoverflow.com/users/3130735/ttt"}, "is_accepted": true, "score": 2, "last_activity_date": 1467839503, "creation_date": 1467839503, "answer_id": 38233836, "question_id": 38233835, "link": "https://stackoverflow.com/questions/38233835/dictionary-comprehension-within-a-list-comprehension-per-dictionary-in-other-li/38233836#38233836", "title": "Dictionary comprehension within a list comprehension, per dictionary in other list", "body": "<p>A dict comprehension must be used, the compounded for does not capture the per-key-per-dictionary scope.</p>\n\n<pre><code>[{k:v for k,v in d.iteritems() if k in lst_multiple_tagnames} for d in child_container if isinstance(d, dict)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1467840471, "creation_date": 1467840471, "answer_id": 38234065, "question_id": 38233835, "link": "https://stackoverflow.com/questions/38233835/dictionary-comprehension-within-a-list-comprehension-per-dictionary-in-other-li/38234065#38234065", "title": "Dictionary comprehension within a list comprehension, per dictionary in other list", "body": "<pre><code>assume child_container = [{ 1:1,3:324,2:2334}, {1:123},{2:2}]\nfor d in child_container:\n...     if isinstance(d,dict):\n...         for k in d:\n...             res[k] = res.get(k,[]) + [d[k]]\nprint res\n{1: [1, 123], 2: [2334, 2], 3: [324]}\n</code></pre>\n"}], "owner": {"reputation": 1720, "user_id": 3130735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/144eeadac497b4ef167d0012a7d81f86?s=128&d=identicon&r=PG&f=1", "display_name": "TTT", "link": "https://stackoverflow.com/users/3130735/ttt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 38233836, "answer_count": 2, "score": 1, "last_activity_date": 1467840471, "creation_date": 1467839503, "question_id": 38233835, "link": "https://stackoverflow.com/questions/38233835/dictionary-comprehension-within-a-list-comprehension-per-dictionary-in-other-li", "title": "Dictionary comprehension within a list comprehension, per dictionary in other list", "body": "<p>I am attempting to create a list of dictionaries, where the dictionaries inside of the list are created from a preexisting list of dictionaries, for which a new dictionary should be created from the aggregate of the key-value pairs of each dictionary in the preexisting list of dictionaries, if the key is a member of another preexisting list (child_container). </p>\n\n<p>Or in other words, I am trying to filter out the keys in the dictionaries (d) in a list of dictionaries (child_container) that are not members of list_multiple_tagnames.</p>\n\n<pre><code>[d for d in child_container if isinstance(d, dict) for k, v in d.iteritems() if k in lst_multiple_tagnames]\n</code></pre>\n\n<p>The intended effect is for a dictionary to be made PER dictionary d in child_container, with only the Key-Value pairs that are in lst_multiple_tagnames.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1467839515, "post_id": 38233824, "comment_id": 63889344, "body": "Not numpy. Python."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1467839587, "post_id": 38233824, "comment_id": 63889380, "body": "Summary of the above: It expands the shape tuple as if each element in it were separate arg passed to the function."}, {"owner": {"reputation": 645, "user_id": 1358630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b1a7af0933051fe8c98e04665dcecd9?s=128&d=identicon&r=PG", "display_name": "hoof_hearted", "link": "https://stackoverflow.com/users/1358630/hoof-hearted"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467839731, "post_id": 38233824, "comment_id": 63889443, "body": "Ah - thanks @MadPhysicist. That&#39;s perfect. I couldn&#39;t find the answer because it&#39;s associated with python and not numpy."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467840058, "post_id": 38233824, "comment_id": 63889601, "body": "For the future, when reading any weird notation in Python, remember that libraries just provide packages, modules, functions and constants. Pretty much all symbol characters are part of the language itself."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1467842726, "post_id": 38233824, "comment_id": 63890771, "body": "If the linked posts were helpful, remember to upvote them."}], "owner": {"reputation": 645, "user_id": 1358630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b1a7af0933051fe8c98e04665dcecd9?s=128&d=identicon&r=PG", "display_name": "hoof_hearted", "link": "https://stackoverflow.com/users/1358630/hoof-hearted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1467839555, "answer_count": 0, "score": 0, "last_activity_date": 1467839531, "creation_date": 1467839443, "last_edit_date": 1467839531, "question_id": 38233824, "link": "https://stackoverflow.com/questions/38233824/what-does-numpys-do-to-a-variable", "closed_reason": "Duplicate", "title": "What does numpy&#39;s * do to a variable?", "body": "<p>I'm going through an online course, and don't understand the 4th line of this code:</p>\n\n<pre><code> import numpy as np\n H1 = np.random.randn(50, 50) + 10\n p = 0.5\n U1 = np.random.rand(*H1.shape) &lt; p\n</code></pre>\n\n<p>In particular, what is the <code>*</code> doing to <code>H1.shape</code> inside the <code>np.random.rand</code> function?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1467839809, "post_id": 38233823, "comment_id": 63889481, "body": "The question is very unclear. Are you asking how best to visualize the strings, or how to use graphviz and pydot, or how to transform the strings into the required format? In case of the latter, what <i>is</i> the required format?"}, {"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1467840860, "post_id": 38233823, "comment_id": 63889918, "body": "<i>it seems I will have to do a lot of refactoring to get my strings into their format</i> yes, when you are using your own custom data format instead of standardized formats like *.DOT, you need to write your own adapters / converters. What exactly have you expected, that there is some tool in universe which is 100% conformant with your own custom data format, and outputs data exactly as you want to? Good luck with that. <a href=\"https://en.wikipedia.org/wiki/DOT_(graph_description_language)\" rel=\"nofollow noreferrer\">DOT</a> is a standard for graph description, graphviz is one of best free tools to draw them out of DOT files. Use it"}, {"owner": {"reputation": 1665, "user_id": 3155053, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ee08d1f18c3cc3fc73f47830d6a8ecfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3155053", "link": "https://stackoverflow.com/users/3155053/user3155053"}, "reply_to_user": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1467841099, "post_id": 38233823, "comment_id": 63890018, "body": "There we go.  Converting to the *.DOT format is what I was looking for.  Thank you @Rogalski. Easy how to: <a href=\"https://en.wikipedia.org/wiki/DOT_(graph_description_language)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/DOT_(graph_description_language)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1665, "user_id": 3155053, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ee08d1f18c3cc3fc73f47830d6a8ecfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3155053", "link": "https://stackoverflow.com/users/3155053/user3155053"}, "is_accepted": true, "score": 0, "last_activity_date": 1467841808, "creation_date": 1467841808, "answer_id": 38234374, "question_id": 38233823, "link": "https://stackoverflow.com/questions/38233823/tree-plot-from-multiple-strings-python/38234374#38234374", "title": "Tree plot from multiple strings, Python", "body": "<p>By transforming the \":\" into \"->\" and wrapping with .DOT formating, plotting is easy.</p>\n\n<pre><code>digraph graphname {\n A -&gt; B -&gt; C -&gt; D;\n A -&gt; B -&gt; C -&gt; D -&gt; F;\n A -&gt; B -&gt; C -&gt; E -&gt; H;\n A -&gt; B -&gt; C -&gt; D -&gt; G;\n A -&gt; B -&gt; C -&gt; E -&gt; I;\n}\n</code></pre>\n\n<p>I tested my little snippet of code here: <a href=\"http://sandbox.kidstrythisathome.com/erdos/\" rel=\"nofollow\">http://sandbox.kidstrythisathome.com/erdos/</a></p>\n"}, {"tags": [], "owner": {"reputation": 13671, "user_id": 1838763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T3Hdl.jpg?s=128&g=1", "display_name": "Steven Moseley", "link": "https://stackoverflow.com/users/1838763/steven-moseley"}, "is_accepted": false, "score": 1, "last_activity_date": 1467843039, "creation_date": 1467843039, "answer_id": 38234626, "question_id": 38233823, "link": "https://stackoverflow.com/questions/38233823/tree-plot-from-multiple-strings-python/38234626#38234626", "title": "Tree plot from multiple strings, Python", "body": "<p>Not a \"simple\" approach, but this script will parse your file into a tree, with each \"size\" value stored in the None index:</p>\n\n<p><strong>tree.txt</strong></p>\n\n<pre><code>A:B:C:D                          355\nA:B:C:D:F                        330\nA:B:C:E:H                        78\nA:B:C:D:G                        37\nA:B:C:E:I                        33\n</code></pre>\n\n<p><strong>tree.py</strong></p>\n\n<pre><code>import re\nf = open('tree.txt', 'r')\ntree = {}\nfor line in f:\n    parts = re.split('\\s+', line)\n    if parts[0] and parts[1]:\n        pointer = tree\n        node = parts[0].split(':')\n        for key in node:\n            if not key in pointer:\n                pointer[key] = {None: None}\n            pointer = pointer[key]\n        try:\n            pointer[None] = int(parts[1])\n        except:\n            pass\nprint(tree)\n</code></pre>\n\n<p><code>tree</code> will look like this:</p>\n\n<pre><code>{\n    'A': {\n        'B': {\n            'C': {\n                'D': {\n                    'F': {None: 330},\n                    'G': {None: 37}, \n                    None: 355\n                },\n                'E': {\n                    'H': {None: 78}, \n                    'I': {None: 33}, \n                    None: None\n                },\n                None: None\n            },\n            None: None\n        },\n        None: None\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1665, "user_id": 3155053, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ee08d1f18c3cc3fc73f47830d6a8ecfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3155053", "link": "https://stackoverflow.com/users/3155053/user3155053"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 38234374, "answer_count": 2, "score": 1, "last_activity_date": 1467843039, "creation_date": 1467839440, "last_edit_date": 1467840254, "question_id": 38233823, "link": "https://stackoverflow.com/questions/38233823/tree-plot-from-multiple-strings-python", "title": "Tree plot from multiple strings, Python", "body": "<p>I have a set of structured strings.  Is there a clean way to visualize this data with a tree plot?  I am currently reading into <a href=\"http://www.graphviz.org/\" rel=\"nofollow noreferrer\">http://www.graphviz.org/</a> and <a href=\"https://pypi.python.org/pypi/pydot\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/pydot</a> but it seems I will have to do a lot of refactoring to get my strings into their format.</p>\n\n<pre><code>String                           Occurrence\nA:B:C:D                          355\nA:B:C:D:F                        330\nA:B:C:E:H                        78\nA:B:C:D:G                        37\nA:B:C:E:I                        33\n...                              ...\n</code></pre>\n\n<p>EDIT: Is there a way to have a tool read this \":\" separated formatting of data?\n<a href=\"https://i.stack.imgur.com/pzwFV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pzwFV.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "list", "combinations", "combinatorics", "large-data"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1467839336, "post_id": 38233761, "comment_id": 63889254, "body": "Would a binary file fit your needs?  You can index it with the &lt;file&gt;.seek(&lt;position&gt;) command."}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1467839380, "post_id": 38233761, "comment_id": 63889277, "body": "Could you explain your suggestion further?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 7, "creation_date": 1467839389, "post_id": 38233761, "comment_id": 63889282, "body": "I&#39;m a bit confused about what you need to do with your combinations. Your title suggests you want to iterate over them, for which the iterator returned from <code>itertools.combinations</code> seems ideal (just don&#39;t turn it into a list!). The body of your question however seems to need random access to the combinations in some unclear way. If you&#39;re going to iterate, you don&#39;t need random access. If you do need random access, you can probably come up with a way of translating your combination-index into a pair of indexes into the original list."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 3, "creation_date": 1467839490, "post_id": 38233761, "comment_id": 63889331, "body": "Definitely a case of XY problem going on here. What are you actually trying to do?"}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 0, "creation_date": 1467839564, "post_id": 38233761, "comment_id": 63889371, "body": "I will edit the question to make it very clear what exactly I am trying to do."}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1467845468, "post_id": 38233761, "comment_id": 63891653, "body": "@Prune, when you get a chance, could you elaborate on your binary file idea, possibly with an answer?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1467846094, "post_id": 38233761, "comment_id": 63891855, "body": "Sure -- although the answer I posted is faster and uses less memory.  ///  Use the <b>itertools</b> generator and write the pairs directly to a file; use binary format so that each integer takes the same amount of space (4 bytes each, 8 bytes per pair).  Open your binary file as, say, <b>pair_file</b>.  When you want pair <b>N</b> from the set, do <b>pair_file.seek(8*N)</b> and then read two integers from that spot."}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1467900449, "post_id": 38233761, "comment_id": 63916505, "body": "@Prune, would it be a problem that some of my numbers are as large as 40,000 storing them in a binary file as you have specified?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1467912064, "post_id": 38233761, "comment_id": 63924305, "body": "@jackskis, that&#39;s no problem at all.  The basic integer is much larger than that (32 or 64 bits)."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 0, "creation_date": 1467839949, "post_id": 38233850, "comment_id": 63889545, "body": "I edited the question to more refine what I&#39;m looking for."}, {"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "reply_to_user": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 0, "creation_date": 1467840154, "post_id": 38233850, "comment_id": 63889640, "body": "Thanks!  If you want &quot;random access&quot; in constant time, then you&#39;ll need to write your own code for that.  @Captain already sketched a start; I&#39;d flesh it out, but can&#39;t make time now.  I bet someone else can, though ;-)"}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 0, "creation_date": 1467840239, "post_id": 38233850, "comment_id": 63889671, "body": "Yes, I am just wondering if there are some pre written libraries I can take advantage of! Thanks for your help!"}, {"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "reply_to_user": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 1, "creation_date": 1467840444, "post_id": 38233850, "comment_id": 63889760, "body": "Here&#39;s the math needed:  <a href=\"https://en.wikipedia.org/wiki/Combinatorial_number_system#Finding_the_k-combination_for_a_given_number\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1467840450, "post_id": 38233850, "comment_id": 63889762, "body": "It wont be in constant time but you can use islice like this: <code>itertools.islice(it, 5, 7)</code> so it will contain 6th and 7th elements."}], "tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": false, "score": 6, "last_activity_date": 1467839549, "creation_date": 1467839549, "answer_id": 38233850, "question_id": 38233761, "link": "https://stackoverflow.com/questions/38233761/random-access-over-all-pair-wise-combinations-of-large-list-in-python/38233850#38233850", "title": "Random access over all pair-wise combinations of large list in Python", "body": "<p>Except <code>itertools.combinations</code> does not return a list - it returns an iterator.  Here:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import combinations\n&gt;&gt;&gt; it = combinations([1, 2, 3, 4, 5], 2)\n&gt;&gt;&gt; next(it)\n(1, 2)\n&gt;&gt;&gt; next(it)\n(1, 3)\n&gt;&gt;&gt; next(it)\n(1, 4)\n&gt;&gt;&gt; next(it)\n(1, 5)\n&gt;&gt;&gt; next(it)\n(2, 3)\n&gt;&gt;&gt; next(it)\n(2, 4)\n</code></pre>\n\n<p>and so on.  It's extremely memory-efficient:  only one pair is produced per invocation.</p>\n\n<p>Of course it <em>is</em> possible to write a function that returns the <code>n'th</code> result, but before bothering with that (which will be slower and more involved), are you quite sure you can't just use <code>combinations()</code> the way it was <em>designed</em> to be used (i.e., iterating over it, instead of forcing it to produce a giant list)?</p>\n"}, {"tags": [], "owner": {"reputation": 316, "user_id": 6343046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3f48209610b6ef289c665ce3d38e2b6?s=128&d=identicon&r=PG&f=1", "display_name": "kcborys", "link": "https://stackoverflow.com/users/6343046/kcborys"}, "is_accepted": false, "score": 1, "last_activity_date": 1467839898, "creation_date": 1467839898, "answer_id": 38233931, "question_id": 38233761, "link": "https://stackoverflow.com/questions/38233761/random-access-over-all-pair-wise-combinations-of-large-list-in-python/38233931#38233931", "title": "Random access over all pair-wise combinations of large list in Python", "body": "<p>So you've got 44906 items. Notice, however, that if you build your combinations the same way you build them in the example then there are 44905 combinations with <code>large[0]</code> as the first number. Furthermore, combination <code>i</code> for <code>i &lt;= 44905</code> looks like <code>(large[0], large[i])</code>.</p>\n\n<p>For <code>44905 &lt; i &lt;= 89809</code>, it looks like <code>(large[1],large[i-44904])</code>.</p>\n\n<p>If I'm not mistaken, this pattern should continue with something like <code>(large[j],large[i-(exclusive lower bound for j)+1])</code>. You can check my math on that but I'm pretty sure it's right. Anyways, you could iterate to find these lower bounds (so for j=0, it's 0, for j=1, it's 44905, etc.) Iterating should be easy because you just add the next descending number: 44905, 44905+44904, 44905+44904+44903...</p>\n"}, {"tags": [], "owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "is_accepted": false, "score": 1, "last_activity_date": 1467840107, "creation_date": 1467840107, "answer_id": 38233984, "question_id": 38233761, "link": "https://stackoverflow.com/questions/38233761/random-access-over-all-pair-wise-combinations-of-large-list-in-python/38233984#38233984", "title": "Random access over all pair-wise combinations of large list in Python", "body": "<p>For well defined order of created pairs, indices of first and second elements should be related to n and length of a sequence. If you'll find them, you'll be able to achieve const-time performance, since indexing lists is <code>O(1)</code> operation.</p>\n\n<p>Pseudocode would look like this:</p>\n\n<pre><code>def find_nth_pair(seq, n):\n    idx1 = f1(n, len(seq))  # some formula of n and len(seq)\n    idx2 = f2(n, len(seq))  # some formula of n and len(seq)\n    return (seq[idx1], seq[idx2])\n</code></pre>\n\n<p>You only need to find formulas for idx1 and idx2.</p>\n"}, {"comments": [{"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 0, "creation_date": 1467842379, "post_id": 38234233, "comment_id": 63890600, "body": "Note that it&#39;s really a bit trickier than this (see your <code>6 [3, 3] ( 4, 4 )</code> output for why)."}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 0, "creation_date": 1467846410, "post_id": 38234233, "comment_id": 63891970, "body": "Yes, and this solution doesn&#39;t behave as &#39;itertools.combinations()&#39; does"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1467847592, "post_id": 38234233, "comment_id": 63892318, "body": "thanks for the feedback, fixed the triangular mapping now."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1467848120, "post_id": 38234233, "comment_id": 63892450, "body": "To fix the ordering, you need to count from the end of ordering and invert the indexes. Use <code>n, m = comb(size - 1 - i)</code> and then <code>small[length - 1 - n]</code> and <code>small[length - 1 - m]</code>"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1467848515, "post_id": 38234233, "comment_id": 63892577, "body": "Also, changing the generator to upper triangular version will do it, but it needs then to know the size.  Your suggestion is better."}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 0, "creation_date": 1467897626, "post_id": 38234233, "comment_id": 63914223, "body": "Thank you. This is exactly what I wanted!"}, {"owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "edited": false, "score": 0, "creation_date": 1467988133, "post_id": 38234233, "comment_id": 63957721, "body": "@karakfa, do you have any references for the formula you use for comb() above?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1467991427, "post_id": 38234233, "comment_id": 63959946, "body": "No, I came up with this, but I&#39;m sure I&#39;m not the first one. I&#39;ll write something up.  It&#39;s essentially inverse of enumerating lower triangular section of a matrix.  The formula is the root of quadratic equation <code>x^2-x-2k</code> arising from <code>x*(x-1)&#47;2</code> as the triangular number when solving for the lower bound."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1469563795, "post_id": 38234233, "comment_id": 64585999, "body": "here is a reference on SE.  <a href=\"http://math.stackexchange.com/questions/455511/formula-for-the-nth-term-of-1-2-2-3-3-3-4-4-4-4-5\" title=\"formula for the nth term of 1 2 2 3 3 3 4 4 4 4 5\">math.stackexchange.com/questions/455511/&hellip;</a>"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 4, "last_activity_date": 1467851861, "last_edit_date": 1467851861, "creation_date": 1467841197, "answer_id": 38234233, "question_id": 38233761, "link": "https://stackoverflow.com/questions/38233761/random-access-over-all-pair-wise-combinations-of-large-list-in-python/38234233#38234233", "title": "Random access over all pair-wise combinations of large list in Python", "body": "<p>If you want random access to any combination you can use this function to return the index of a corresponding lower triangular  representation of the cross-product</p>\n\n<pre><code>def comb(k):         \n        row=int((math.sqrt(1+8*k)+1)/2)    \n        column=int(k-(row-1)*(row)/2)  \n        return [row,column]\n</code></pre>\n\n<p>using your small array for example</p>\n\n<pre><code>small = [1,2,3,4,5]\nlength = len(small)\nsize = int(length * (length-1)/2)\nfor i in range(size):\n    [n,m] = comb(i)\n    print(i,[n,m],\"(\",small[n],\",\",small[m],\")\")\n</code></pre>\n\n<p>will give</p>\n\n<pre><code>0 [1, 0] ( 2 , 1 )\n1 [2, 0] ( 3 , 1 )\n2 [2, 1] ( 3 , 2 )\n3 [3, 0] ( 4 , 1 )\n4 [3, 1] ( 4 , 2 )\n5 [3, 2] ( 4 , 3 )\n6 [4, 0] ( 5 , 1 )\n7 [4, 1] ( 5 , 2 )\n8 [4, 2] ( 5 , 3 )\n9 [4, 3] ( 5 , 4 )\n</code></pre>\n\n<p>obviously if your access method is in order other methods will be more practical.</p>\n\n<p>Note also that the <code>comb</code> function is independent of the size of the problem.</p>\n\n<p>As suggested by @Blckknght in the comments to get the same order as itertools version change to </p>\n\n<pre><code>for i in range(size):\n        [n,m] = comb(size-1-i) \n        print(i,[n,m],\"(\",small[length-1-n],\",\",small[length-1-m],\")\")  \n\n\n0 [4, 3] ( 1 , 2 )\n1 [4, 2] ( 1 , 3 )\n2 [4, 1] ( 1 , 4 )\n3 [4, 0] ( 1 , 5 )\n4 [3, 2] ( 2 , 3 )\n5 [3, 1] ( 2 , 4 )\n6 [3, 0] ( 2 , 5 )\n7 [2, 1] ( 3 , 4 )\n8 [2, 0] ( 3 , 5 )\n9 [1, 0] ( 4 , 5 )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 3, "last_activity_date": 1467843851, "creation_date": 1467843851, "answer_id": 38234780, "question_id": 38233761, "link": "https://stackoverflow.com/questions/38233761/random-access-over-all-pair-wise-combinations-of-large-list-in-python/38234780#38234780", "title": "Random access over all pair-wise combinations of large list in Python", "body": "<p>I started with that triangular arrangement, finding the subscript <strong>k</strong> for list members indexed <strong>row</strong> and <strong>col</strong>.  Then I reversed the process, deriving <strong>row</strong> and <strong>col</strong> from <strong>k</strong>.</p>\n\n<p>For a list <strong>large</strong> of <strong>N</strong> items, let</p>\n\n<pre><code>b = 2*N - 1\n</code></pre>\n\n<p>Now, to get the <strong>k</strong>th combination in the list ...</p>\n\n<pre><code>row = (b - math.sqrt(b*b - 8*k)) // 2\ncol = k - (2*N - row + 1)*row / 2\nkth_pair = large[row][col]\n</code></pre>\n\n<p>This allows you to access any member of the combinations list without ever generating that list.</p>\n"}], "owner": {"reputation": 389, "user_id": 3538220, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XPQr2.jpg?s=128&g=1", "display_name": "jackskis", "link": "https://stackoverflow.com/users/3538220/jackskis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 1, "accepted_answer_id": 38234233, "answer_count": 5, "score": 5, "last_activity_date": 1506003524, "creation_date": 1467839122, "last_edit_date": 1506102294, "question_id": 38233761, "link": "https://stackoverflow.com/questions/38233761/random-access-over-all-pair-wise-combinations-of-large-list-in-python", "title": "Random access over all pair-wise combinations of large list in Python", "body": "<p><strong>Background:</strong></p>\n\n<p>I have a list of 44906 items: <code>large = [1, 60, 17, ...]</code>. I also have a personal computer with limited memory (8GB), running Ubuntu 14.04.4 LTS.</p>\n\n<p><strong>The Goal:</strong></p>\n\n<p>I need to find all the pair-wise combinations of <code>large</code> in a memory-efficient manner, without filling a list with all the combinations beforehand.</p>\n\n<p><strong>The Problem &amp; What I've Tried So Far:</strong></p>\n\n<p>When I use <code>itertools.combinations(large, 2)</code>, and try to assign it to a list my memory fills up immediately, and I get very slow performance. The reason for this is that the number of pairwise combinations goes like <code>n*(n-1)/2</code> where <code>n</code> is the number of elements of the list.</p>\n\n<p>The number of combinations for <code>n=44906</code> comes out to <code>44906*44905/2 = 1008251965</code>. A list with this many entries is much too large to store in memory. I would like to be able to design a function so that I can plug in a number <code>i</code> to find the <code>i</code>th pair-wise combination of numbers in this list, and a way to somehow dynamically compute this combination, without referring to a 1008251965 element list that's impossible to store in memory.</p>\n\n<p><strong>An Example of What I Am Trying To Do:</strong></p>\n\n<p>Let's say I have an array <code>small = [1,2,3,4,5]</code></p>\n\n<p>In the configuration in which I have the code, <code>itertools.combinations(small, 2)</code> will return a list of tuples as such:</p>\n\n<pre><code>[(1, 2), # 1st entry\n (1, 3), # 2nd entry\n (1, 4), # 3rd entry\n (1, 5), # 4th entry\n (2, 3), # 5th entry\n (2, 4), # 6th entry \n (2, 5), # 7th entry\n (3, 4), # 8th entry\n (3, 5), # 9th entry\n (4, 5)] # 10th entry\n</code></pre>\n\n<p>A call to a the function like this: `find_pair(10)' would return:</p>\n\n<pre><code>(4, 5)\n</code></pre>\n\n<p>, giving the 10th entry in the would-be array, but without calculating the entire combinatorial explosion beforehand.</p>\n\n<p>The thing is, I need to be able to drop in to the middle of the combinations, not starting from the beginning every time, which is what it seems like an iterator does:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import combinations\n&gt;&gt;&gt; it = combinations([1, 2, 3, 4, 5], 2)\n&gt;&gt;&gt; next(it)\n(1, 2)\n&gt;&gt;&gt; next(it)\n(1, 3)\n&gt;&gt;&gt; next(it)\n(1, 4)\n&gt;&gt;&gt; next(it)\n(1, 5)\n</code></pre>\n\n<p>So, instead of having to execute next() 10 times to get to the 10th combination, I would like to be able to retrieve the tuple returned by the 10th iteration with one call. </p>\n\n<p><strong>The Question</strong></p>\n\n<p>Are there any other combinatorial functions that behave this way designed to deal with huge data sets? If not, is there a good way to implement a memory-saving algorithm that behaves this way?</p>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy", "sqlalchemy-migrate"], "comments": [{"owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "edited": false, "score": 1, "creation_date": 1467839460, "post_id": 38233748, "comment_id": 63889320, "body": "I think it is better to let <code>alembic</code> module handle for you the db migrations. Did u try that?"}, {"owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "edited": false, "score": 0, "creation_date": 1467839737, "post_id": 38233748, "comment_id": 63889445, "body": "Plus, I think data types for columns is of the form (<code>Integer</code>, <code>String</code>...)..."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1467840136, "post_id": 38233748, "comment_id": 63889635, "body": "In the future, please don&#39;t embed tracebacks as images."}, {"owner": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "reply_to_user": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "edited": false, "score": 0, "creation_date": 1467840509, "post_id": 38233748, "comment_id": 63889783, "body": "@IronFist thanks for the recommendation. I understand sqlalchemy-migrate is fairly popular too. I will look into alembic if I can&#39;t get this working."}, {"owner": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1467840513, "post_id": 38233748, "comment_id": 63889786, "body": "@IljaEveril&#228; Will do in the future. Thanks for the advice"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1467840769, "post_id": 38233748, "comment_id": 63889883, "body": "sqlalchemy-migrate is a 3rd party tool that hasn&#39;t seen a release in a year, where as alembic is developed by the author of SQLAlchemy and has active development."}, {"owner": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1467840952, "post_id": 38233748, "comment_id": 63889952, "body": "@IljaEveril&#228; I wasn&#39;t aware of that. I will try out alembic! Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "edited": false, "score": 0, "creation_date": 1467840256, "post_id": 38233951, "comment_id": 63889679, "body": "but the code in 005_migration.py is generated by sqlalchemy-migrate. In my models.py, I defined it as SQLAlchemy.Integer <code>id = db.Column(db.Integer, primary_key=True)</code>. Also, it migrates fine when I keep the line <code>username = db.Column(db.String(32), index=True, unique=True)</code>"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "edited": false, "score": 0, "creation_date": 1467840399, "post_id": 38233951, "comment_id": 63889738, "body": "Then it is generated incorrectly, probably by directly reading the table definition from your DB, but using the wrong types as can be seen. The tool is broken. I also recommend giving <a href=\"http://alembic.zzzcomputing.com/en/latest/\" rel=\"nofollow noreferrer\">alembic</a> a go. What does the generated migration look like, if you &quot;keep the line&quot;? I&#39;d guess it is empty, as there are no changes to migrate."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": false, "score": 0, "last_activity_date": 1467839993, "creation_date": 1467839993, "answer_id": 38233951, "question_id": 38233748, "link": "https://stackoverflow.com/questions/38233748/sqlalchemy-error-object-takes-no-parameters-error-after-dropping-column-from/38233951#38233951", "title": "sqlalchemy error: object() takes no parameters error after dropping column from db model.py", "body": "<p>The error is not due to removing a column, it originates from the line</p>\n\n<pre><code>Column('id', INTEGER(display_width=11), primary_key=True, nullable=False),\n</code></pre>\n\n<p>which the traceback clearly indicates.</p>\n\n<p><a href=\"http://docs.sqlalchemy.org/en/latest/core/type_basics.html#sqlalchemy.types.INTEGER\" rel=\"nofollow\"><code>INTEGER</code></a>, which you import with <code>from sqlalchemy import *</code> takes no arguments, such as <em>display_width</em>. You should be using the dialect specific data type <a href=\"http://docs.sqlalchemy.org/en/latest/dialects/mysql.html#sqlalchemy.dialects.mysql.INTEGER\" rel=\"nofollow\"><code>sqlalchemy.dialects.mysql.INTEGER</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "edited": false, "score": 0, "creation_date": 1467840229, "post_id": 38233959, "comment_id": 63889665, "body": "but the code in 005_migration.py is generated by sqlalchemy-migrate. In my models.py, I defined it as SQLAlchemy.Integer <code>id = db.Column(db.Integer, primary_key=True)</code>"}, {"owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "reply_to_user": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "edited": false, "score": 0, "creation_date": 1467840605, "post_id": 38233959, "comment_id": 63889831, "body": "@GucciProgrammer .. The migration script is still experimental in my understanding, try to manually fix those data types and you should be ready to migrate .. And like I suggested to you...<code>Alembic</code> is much better..."}, {"owner": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "edited": false, "score": 0, "creation_date": 1467840995, "post_id": 38233959, "comment_id": 63889973, "body": "I will try out Alembic. Thanks! :)"}], "tags": [], "owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "is_accepted": true, "score": 1, "last_activity_date": 1467840012, "creation_date": 1467840012, "answer_id": 38233959, "question_id": 38233748, "link": "https://stackoverflow.com/questions/38233748/sqlalchemy-error-object-takes-no-parameters-error-after-dropping-column-from/38233959#38233959", "title": "sqlalchemy error: object() takes no parameters error after dropping column from db model.py", "body": "<p>I think you are using the wrong data types for Column definition, here are the right ones:</p>\n\n<pre><code>from sqlalchemy import (MetaData, Table, Column, Integer, String)\n\nuser = Table('user', pre_meta,\n    Column('id', Integer, primary_key=True, nullable=False),\n    Column('username', String(32)),\n    Column('email', String(120)),\n    Column('firstname', String(128)),\n    Column('lastname', String(128)),\n)\n</code></pre>\n\n<p>For more details on SQLAlchemy Column and Data Types, check this <a href=\"http://docs.sqlalchemy.org/en/latest/core/type_basics.html#module-sqlalchemy.types\" rel=\"nofollow\">link</a></p>\n"}], "owner": {"reputation": 163, "user_id": 4043856, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bea1cc77f023751416c48307918aaef9?s=128&d=identicon&r=PG&f=1", "display_name": "GucciProgrammer", "link": "https://stackoverflow.com/users/4043856/gucciprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2444, "favorite_count": 0, "accepted_answer_id": 38233959, "answer_count": 2, "score": 0, "last_activity_date": 1467840037, "creation_date": 1467839085, "last_edit_date": 1467840037, "question_id": 38233748, "link": "https://stackoverflow.com/questions/38233748/sqlalchemy-error-object-takes-no-parameters-error-after-dropping-column-from", "title": "sqlalchemy error: object() takes no parameters error after dropping column from db model.py", "body": "<p>I get the following error <code>typeerror: object() takes no parameters</code> on a mysql command which doesn't make sense to me. The error is due to  dropping the username column from my models.py which I no longer require</p>\n\n<p><a href=\"https://i.stack.imgur.com/PpPms.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PpPms.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the user model definition in my models.py file, I want to drop the username column and get the above error when I remove it from the model</p>\n\n<pre><code>class User(db.Model):\n   __tablename__ = 'user'\n   id = db.Column(db.Integer, primary_key=True)\n   username = db.Column(db.String(32), index=True, unique=True)\n   firstname = db.Column(db.String(128))\n   lastname = db.Column(db.String(128))\n   email = db.Column(db.String(120), index=True, unique=True)\n</code></pre>\n\n<p>Below is my db_migrate.py file which I used to update the db. I got this from  <a href=\"http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iv-database\" rel=\"nofollow noreferrer\">Miguel's database tutorial</a></p>\n\n<pre><code>#!flask/bin/python\nimport types\nfrom migrate.versioning import api\nfrom app import db\nfrom config import SQLALCHEMY_DATABASE_URI\nfrom config import SQLALCHEMY_MIGRATE_REPO\nv = api.db_version(SQLALCHEMY_DATABASE_URI, SQLALCHEMY_MIGRATE_REPO)\nmigration = SQLALCHEMY_MIGRATE_REPO + ('/versions/%03d_migration.py' % (v+1))\ntmp_module = types.ModuleType('old_model')\nold_model = api.create_model(SQLALCHEMY_DATABASE_URI, SQLALCHEMY_MIGRATE_REPO)\nexec(old_model, tmp_module.__dict__)\nscript = api.make_update_script_for_model(SQLALCHEMY_DATABASE_URI, SQLALCHEMY_MIGRATE_REPO, tmp_module.meta, db.metadata)\nopen(migration, \"wt\").write(script)\napi.upgrade(SQLALCHEMY_DATABASE_URI, SQLALCHEMY_MIGRATE_REPO)\nv = api.db_version(SQLALCHEMY_DATABASE_URI, SQLALCHEMY_MIGRATE_REPO)\nprint('New migration saved as ' + migration)\nprint('Current database version: ' + str(v))\n</code></pre>\n\n<p>This is the 005_migration.py file</p>\n\n<pre><code>from sqlalchemy import *\nfrom migrate import *\n\n\nfrom migrate.changeset import schema\npre_meta = MetaData()\npost_meta = MetaData()\nuser = Table('user', pre_meta,\n    Column('id', INTEGER(display_width=11), primary_key=True, nullable=False),\n    Column('username', VARCHAR(length=32)),\n    Column('email', VARCHAR(length=120)),\n    Column('password_hash', VARCHAR(length=128)),\n    Column('firstname', VARCHAR(length=128)),\n    Column('lastname', VARCHAR(length=128)),\n)\n\n\ndef upgrade(migrate_engine):\n    # Upgrade operations go here. Don't create your own engine; bind\n    # migrate_engine to your metadata\n    pre_meta.bind = migrate_engine\n    post_meta.bind = migrate_engine\n    pre_meta.tables['user'].columns['username'].drop()\n\n\ndef downgrade(migrate_engine):\n    # Operations to reverse the above upgrade go here.\n    pre_meta.bind = migrate_engine\n    post_meta.bind = migrate_engine\n    pre_meta.tables['user'].columns['username'].create()\n</code></pre>\n"}, {"tags": ["java", "python", "subprocess"], "owner": {"reputation": 4069, "user_id": 3413239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hM6rq.jpg?s=128&g=1", "display_name": "pg2455", "link": "https://stackoverflow.com/users/3413239/pg2455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467839000, "creation_date": 1467839000, "question_id": 38233735, "link": "https://stackoverflow.com/questions/38233735/logging-with-subprocess-in-python", "title": "logging with subprocess in Python", "body": "<p>I am launching a Java command through subprocess in Python. </p>\n\n<pre><code>JAVA_CMD = ['java', '-Xmx10200m', '-cp', '/path/to/class', '-Dlog4j.configurationFile=/path/to/logfile']\nfilename,k,mail = '/path/to/file2',\"20\", 'help@so.com'\nsubprocess.Popen(JAVA_CMD + [filename,K,mail], stdout=subprocess.PIPE)\n## rest of the code\n</code></pre>\n\n<p>Above command runs for 24-48 hours. </p>\n\n<p>Does anyone know if the logging in java command will work with above command? Currently I am able to launch the java command without having to wait for the response but, logging is not working. It is not creating any log files. </p>\n\n<p>Also, is there an automatic timeout related to above process? One of the commands is dying again and again. It might be a problem in the code but I was wondering if subprocess has a timeout related to it which is killing the process. </p>\n\n<p>Ideally what I want is the ability to launch a java command from within Python as if the command was launched by the user and the process should keep on running indefinitely, till it is completed. Python should be able to work on further without having to worry about the java command launched.</p>\n"}, {"tags": ["python", "pandas", "csv", "large-data"], "comments": [{"owner": {"reputation": 2008, "user_id": 5534457, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IiquF.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/5534457/jeff"}, "edited": false, "score": 1, "creation_date": 1467839105, "post_id": 38233719, "comment_id": 63889132, "body": "I think most of the discussion on this question will be relevant.  In short there wasn&#39;t a great solution that wasn&#39;t memory-intensive.  <a href=\"http://stackoverflow.com/questions/38039723/splitting-a-large-pandas-dataframe-with-minimal-memory-footprint/38086123#38086123\" title=\"splitting a large pandas dataframe with minimal memory footprint\">stackoverflow.com/questions/38039723/&hellip;</a>"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1467839435, "post_id": 38233719, "comment_id": 63889301, "body": "skiprows uses a lot of memory, try using with chunks: <a href=\"http://stackoverflow.com/questions/36874993/pandas-memory-error-after-a-certain-skiprows-parameter\" title=\"pandas memory error after a certain skiprows parameter\">stackoverflow.com/questions/36874993/&hellip;</a>"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1467839583, "post_id": 38233719, "comment_id": 63889378, "body": "If you go to one of these links and find them useful, please upvote them if you can.  You need 15 reputation to upvote.  You now have 6."}], "answers": [{"comments": [{"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467844387, "post_id": 38234137, "comment_id": 63891342, "body": "One issue is that this approach isn&#39;t truly random, as you force selections from each chunk.  For example, it&#39;s possible, albeit not probable, that a random selection of n items is the first n items, and the chunked approach does not admit this possibility.  However, you could also argue that this approach is good enough for most cases that require random selection."}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "reply_to_user": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467845314, "post_id": 38234137, "comment_id": 63891610, "body": "That&#39;s right. I edited the answer to take that into account, where the number of samples from each chunk is random. But however, there is still a caveat in that it needs to have at least &#39;factor&#39; samples per chunk, to get the required number of samples before reaching end of file. To be really random, the possibility to loop over the file more than once needs to be considered."}, {"owner": {"reputation": 391, "user_id": 6556947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JWKTw3rjsO0/AAAAAAAAAAI/AAAAAAAAABE/YofIbKb-PBo/photo.jpg?sz=128", "display_name": "Marcel Mars", "link": "https://stackoverflow.com/users/6556947/marcel-mars"}, "edited": false, "score": 0, "creation_date": 1467886011, "post_id": 38234137, "comment_id": 63906390, "body": "Thanks, yes, indeed, I believe that is also the way out: to randomly choose chunks and randomly select rows from them, and do this operation in iterative manner. It looks less memory demanding than skiprows option."}], "tags": [], "owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "is_accepted": false, "score": 2, "last_activity_date": 1467845523, "last_edit_date": 1467845523, "creation_date": 1467840787, "answer_id": 38234137, "question_id": 38233719, "link": "https://stackoverflow.com/questions/38233719/reading-random-rows-of-a-large-csv-file-python-pandas/38234137#38234137", "title": "Reading random rows of a large csv file, python, pandas", "body": "<p>If memory is the biggest issue, a possible solution might be to use chunks, and randomly select from the chunks</p>\n\n<pre><code>n = 100\ns = 10\nfactor = 1    # should be integer\nchunksize = int(s/factor)\n\nreader = pd.read_csv(path, usecols = ['Col1', 'Col2'],dtype  = {'Col1': 'int32', 'Col2':'int32'}, chunksize=chunksize)\n\nout = []\ntot = 0\nfor df in reader:\n    nsample = random.randint(factor,chunksize)\n    tot += nsample\n    if  tot &gt; s:\n        nsample = s - (tot - nsample)\n    out.append(df.sample(nsample))\n    if tot &gt;= s:\n        break\n\ndata = pd.concat(out)\n</code></pre>\n\n<p>And you can use factor to control the sizes of the chunks.</p>\n"}, {"tags": [], "owner": {"reputation": 4446, "user_id": 5717589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebac146fb4581d2fdf6e788faf2fea15?s=128&d=identicon&r=PG&f=1", "display_name": "ptrj", "link": "https://stackoverflow.com/users/5717589/ptrj"}, "is_accepted": true, "score": 1, "last_activity_date": 1467851604, "creation_date": 1467851604, "answer_id": 38235952, "question_id": 38233719, "link": "https://stackoverflow.com/questions/38233719/reading-random-rows-of-a-large-csv-file-python-pandas/38235952#38235952", "title": "Reading random rows of a large csv file, python, pandas", "body": "<p>I think this is faster than other methods showed here and may be worth trying.</p>\n\n<p>Say, we have already chosen rows to be skipped in a list <code>skipped</code>. First, I convert it to a lookup bool table.</p>\n\n<pre><code># Some preparation:\nskipped = np.asarray(skipped)\n# MAX &gt;= number of rows in the file\nbool_skipped = np.zeros(shape(MAX,), dtype=bool)\nbool_skipped[skipped] = True\n</code></pre>\n\n<p>Main stuff:</p>\n\n<pre><code>from io import StringIO\n# in Python 2 use\n# from StringIO import StringIO\n\ndef load_with_buffer(filename, bool_skipped, **kwargs):\n    s_buf = StringIO()\n    with open(filename) as file:\n        count = -1\n        for line in file:\n            count += 1\n            if bool_skipped[count]:\n                continue\n            s_buf.write(line)\n    s_buf.seek(0)\n    df = pd.read_csv(s_buf, **kwargs)\n    return df\n</code></pre>\n\n<p>I tested it as follows:</p>\n\n<pre><code>df = pd.DataFrame(np.random.rand(100000, 100))\ndf.to_csv('test.csv')\n\ndf1 = load_with_buffer('test.csv', bool_skipped, index_col=0)\n</code></pre>\n\n<p>with 90% of rows skipped. It performs comparably to </p>\n\n<pre><code>pd.read_csv('test.csv', skiprows=skipped, index_col=0)\n</code></pre>\n\n<p>and is about 3-4 times faster than using dask or reading in chunks.</p>\n"}], "owner": {"reputation": 391, "user_id": 6556947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JWKTw3rjsO0/AAAAAAAAAAI/AAAAAAAAABE/YofIbKb-PBo/photo.jpg?sz=128", "display_name": "Marcel Mars", "link": "https://stackoverflow.com/users/6556947/marcel-mars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2793, "favorite_count": 0, "accepted_answer_id": 38235952, "answer_count": 2, "score": 3, "last_activity_date": 1506003538, "creation_date": 1467838941, "last_edit_date": 1506102294, "question_id": 38233719, "link": "https://stackoverflow.com/questions/38233719/reading-random-rows-of-a-large-csv-file-python-pandas", "title": "Reading random rows of a large csv file, python, pandas", "body": "<p>could you help me, I faced a problem of reading random rows from the large csv file using 0.18.1 pandas and 2.7.10 Python on Windows (8 Gb RAM).</p>\n\n<p>In <a href=\"https://stackoverflow.com/questions/22258491/read-a-small-random-sample-from-a-big-csv-file-into-a-python-data-frame\">Read a small random sample from a big CSV file into a Python data frame</a>\nI saw an approach, however, it occured for my PC to be very memory consuming, namely, part of the code:</p>\n\n<pre><code>n = 100\ns = 10\nskip = sorted(rnd.sample(xrange(1, n), n-s))# skip n-s random rows from *.csv       \ndata = pd.read_csv(path, usecols = ['Col1', 'Col2'], \n                   dtype  = {'Col1': 'int32', 'Col2':'int32'}, skiprows = skip)\n</code></pre>\n\n<p>so, if I want to take some random rows from the file considering not only 100 rows, but 100 000, it becomes hard, however taking not random rows from the file is almost alright:</p>\n\n<pre><code>skiprows = xrange(100000)    \ndata = pd.read_csv(path, usecols = ['Col1', 'Col2'], \n                   dtype  = {'Col1': 'int32', 'Col2':'int32'}, skiprows = skip, nrows = 10000)\n</code></pre>\n\n<p>So the question how can I deal with reading large number of random rows from the large csv file with pandas, i.e. since I can't read the entire csv file, even with chunking it, I'm interested exactly in random rows.\nThanks</p>\n"}, {"tags": ["python", "django", "authentication", "passwords"], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 5240136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa949172c99eb8f6adfa11043cff2f66?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5240136/mike"}, "edited": false, "score": 0, "creation_date": 1467860121, "post_id": 38234318, "comment_id": 63895201, "body": "That got me going, thanks!  I added the URL declaration for password_change_done, and it worked perfectly."}], "tags": [], "owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "is_accepted": true, "score": 1, "last_activity_date": 1467841575, "creation_date": 1467841575, "answer_id": 38234318, "question_id": 38233663, "link": "https://stackoverflow.com/questions/38233663/django-password-change-noreversematch/38234318#38234318", "title": "django password_change noreversematch", "body": "<p>The <code>password_change</code> view <a href=\"https://github.com/django/django/blob/master/django/contrib/auth/views.py#L346\" rel=\"nofollow\">does not use</a> the <code>current_app</code> parameter to determine the redirect url. You need to explicitly pass the view name including the namespace:</p>\n\n<pre><code>url(r'^password_change/$',\n    auth_views.password_change,\n    {'post_change_redirect': 'league:password_change_done'},\n    name='password_change'),\n</code></pre>\n\n<p>The <code>current_app</code> parameter is only used in the <code>{% url %}</code> tag in the template, but it is <a href=\"https://docs.djangoproject.com/en/1.9/releases/1.9/#current-app-parameter-to-contrib-auth-views\" rel=\"nofollow\">deprecated</a> and will be removed in Django 2.0. If you need the current app in the template context, you need to set <code>request.current_app</code>. </p>\n"}], "owner": {"reputation": 132, "user_id": 5240136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa949172c99eb8f6adfa11043cff2f66?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5240136/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 38234318, "answer_count": 1, "score": 0, "last_activity_date": 1467841575, "creation_date": 1467838668, "last_edit_date": 1495539854, "question_id": 38233663, "link": "https://stackoverflow.com/questions/38233663/django-password-change-noreversematch", "title": "django password_change noreversematch", "body": "<p>I'm new to Django, and I'm trying add user authentication to a simple app.  I'm working with Django 1.9, and I'm trying to do this a simply as possible.  Login and Logout work, but with \"Change Password\", I get a NoReverseMatch error for password_change_done.</p>\n\n<p>From my urls.py</p>\n\n<pre><code>app_name = 'league'\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url('^', include('django.contrib.auth.urls')),\n]\n</code></pre>\n\n<p>In /league/templates/league/index.html, I have:</p>\n\n<pre><code>&lt;a href=\"{% url 'league:login' %}\"&gt;Login&lt;/a&gt;\n&lt;a href=\"{% url 'league:logout' %}\"&gt;Logout&lt;/a&gt;\n&lt;a href=\"{% url 'league:password_change' %}\"&gt;Change Password&lt;/a&gt;\n&lt;a href=\"{% url 'league:password_change_done' %}\"&gt;Change Password Done&lt;/a&gt;\n</code></pre>\n\n<p>I created these files in /league/templates/registration/.  password_change_form.html and password_change_done.html currently do nothing, they contain only a string that gets displayed.</p>\n\n<ul>\n<li>login.html</li>\n<li>logged_out.html</li>\n<li>password_change_form.html</li>\n<li>password_change_done.html</li>\n</ul>\n\n<p>When I click the \"Change Password\" link, I get:</p>\n\n<pre><code>NoReverseMatch at /league/password_change/\nReverse for 'password_change_done' with arguments'()' and keyword arguments '{}' not found.\n</code></pre>\n\n<p>I know the \"Change Password Done\" link is silly, but I added it to see what happens.  It works fine.  When I click it, password_change_done.html displays, as expected.</p>\n\n<p>Here's the stack trace from when I click the \"Change Password\" link:</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://localhost:8000/league/password_change/\n\nDjango Version: 1.9.2\nPython Version: 3.4.3\nInstalled Applications:\n['league.apps.LeagueConfig',\n 'django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles']\nInstalled Middleware:\n['django.middleware.security.SecurityMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware']\n\n\n\nTraceback:\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/core/handlers/base.py\" in get_response\n  149.                     response = self.process_exception_by_middleware(e, request)\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/core/handlers/base.py\" in get_response\n  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/views/decorators/debug.py\" in sensitive_post_parameters_wrapper\n  76.             return view(request, *args, **kwargs)\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/utils/decorators.py\" in _wrapped_view\n  149.                     response = view_func(request, *args, **kwargs)\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  23.                 return view_func(request, *args, **kwargs)\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/contrib/auth/views.py\" in inner\n  49.         return func(*args, **kwargs)\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/contrib/auth/views.py\" in password_change\n  308.         post_change_redirect = reverse('password_change_done')\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/core/urlresolvers.py\" in reverse\n  600.     return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))\n\nFile \"/home/mriley/.virtualenvs/django1_8/lib/python3.4/site-packages/django/core/urlresolvers.py\" in _reverse_with_prefix\n  508.                              (lookup_view_s, args, kwargs, len(patterns), patterns))\n\nException Type: NoReverseMatch at /league/password_change/\nException Value: Reverse for 'password_change_done' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []\n</code></pre>\n\n<p>I found similar cases on stackoverflow, including <a href=\"https://stackoverflow.com/questions/31609310/noreversematch-at-reverse-for-password-change-done-with-arguments-and-k\">this one.</a></p>\n\n<p>I changed my urls.py to this:</p>\n\n<pre><code>url(r'^password_change/$',\n    auth_views.password_change,\n    {'current_app': 'league'},\n    name='password_change'),\nurl(r'^password_change_done/$',\n    auth_views.password_change_done,\n    {'current_app': 'league'},\n    name='password_change_done'),\n</code></pre>\n\n<p>But it made no difference, I still get the NoReverseMatch error.</p>\n\n<p>Any ideas what I'm doing incorrectly with \"Change Password\"?</p>\n\n<p>Thanks,\nMike</p>\n"}, {"tags": ["python", "null"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 9, "creation_date": 1467838746, "post_id": 38233661, "comment_id": 63888935, "body": "I have no idea why that would be helpful."}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 4, "creation_date": 1467838816, "post_id": 38233661, "comment_id": 63888963, "body": "I can only see this being of any use if you&#39;re using <code>eval</code>, <i>which you should not be doing.</i>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1467838834, "post_id": 38233661, "comment_id": 63888971, "body": "@MorganThrapp Because it would let something like <code>[1, null, 2]</code> work properly."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467839026, "post_id": 38233661, "comment_id": 63889084, "body": "@MadPhysicist But what&#39;s the point? <code>[1, None, 2]</code> is the proper Python way of specifying that array. Either learn to code in proper Python or use C/C++/C#/Java; don&#39;t make it some mashup of un-idiomatic C-esque Python."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1467839040, "post_id": 38233661, "comment_id": 63889096, "body": "Are you trying to parse JSON with <code>eval</code> or something?"}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467839063, "post_id": 38233661, "comment_id": 63889107, "body": "@madphysicist But why is that any better/easier/more readable that just using None directly?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1467839100, "post_id": 38233661, "comment_id": 63889130, "body": "@MorganThrapp Oh, it&#39;s not. This solution is crap."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 0, "creation_date": 1467840027, "post_id": 38233661, "comment_id": 63889578, "body": "to answer all your questions, yes, this piece of code contains <code>eval</code>. I guess I should work on that instead"}], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 10, "last_activity_date": 1467839132, "creation_date": 1467839132, "answer_id": 38233764, "question_id": 38233661, "link": "https://stackoverflow.com/questions/38233661/set-null-to-none-in-python-is-it-a-good-practice/38233764#38233764", "title": "set null to None in Python, is it a good practice?", "body": "<p>This is not a good idea. It indicates some fuzziness in your program, a blurring of the line between code and input.</p>\n\n<p>Any code you write should use <code>None</code>, not a variable set to <code>None</code>. Having a <code>null</code> constant wouldn't help because you could simply write <code>None</code>.</p>\n\n<p>If you're getting input from the user or from another program, that input would be text. It'd be stored in a string variable as <code>\"null\"</code>. It wouldn't be a raw identifier <code>null</code>. It would be a very poor design if user input could somehow refer to variables in your source code. That would be leaking implementation details.</p>\n\n<p>If you find yourself using <code>eval</code> or equivalent, go directly to jail, do not pass GO, do not collect $200.</p>\n"}, {"tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 6, "last_activity_date": 1467839242, "creation_date": 1467839242, "answer_id": 38233778, "question_id": 38233661, "link": "https://stackoverflow.com/questions/38233661/set-null-to-none-in-python-is-it-a-good-practice/38233778#38233778", "title": "set null to None in Python, is it a good practice?", "body": "<p>You're losing the advantages of <code>None</code>.  Try this:</p>\n\n<pre><code>None = \"Hello\"\n</code></pre>\n\n<p>It doesn't work (<code>SyntaxError</code>) because assignment to <code>None</code> is prohibited.  Creating an extra variable, <code>null</code>, introduces the <em>possibility</em> that <code>null is not None</code> at some future point in your program.</p>\n\n<p>Just use <code>None</code>.  <code>None</code> is guaranteed.</p>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1467839424, "creation_date": 1467839424, "answer_id": 38233816, "question_id": 38233661, "link": "https://stackoverflow.com/questions/38233661/set-null-to-none-in-python-is-it-a-good-practice/38233816#38233816", "title": "set null to None in Python, is it a good practice?", "body": "<p>I'm imagining you could receive input as a string <code>'null'</code>.  However, this would be a string and not a key word.  You'd be free to parse and deal with it as you saw fit.  The only way I can imagine using <code>null = None</code> would do anything is if you were trying to evaluate strings as python code like</p>\n\n<pre><code>null = None\n`eval('null')`\n</code></pre>\n\n<p>I'd consider this <strong>bad</strong> and <strong>sloppy</strong> coding practice.</p>\n"}], "owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3237, "favorite_count": 1, "accepted_answer_id": 38233764, "answer_count": 3, "score": 0, "last_activity_date": 1467842687, "creation_date": 1467838666, "last_edit_date": 1467842687, "question_id": 38233661, "link": "https://stackoverflow.com/questions/38233661/set-null-to-none-in-python-is-it-a-good-practice", "title": "set null to None in Python, is it a good practice?", "body": "<p>Very often when I deal with input/output that are generated from different languages, I often have to deal with the null values when I get those input/output into Python. As we all know <code>None</code> is the keyword for Python instead of <code>null</code>, so it often creates error when, say, the <code>null</code> value is in a list. Some libraries already deal with this situation, but some don't. I'm just wondering if it's a good practice to simply set</p>\n\n<pre><code>null = None\n</code></pre>\n\n<p>Honestly I haven't seen this done before, but I don't know if I'm just not paying attention. Is there any bad side effect for this? Is this even recommended?</p>\n\n<p>EDIT: The current piece I'm working on does contain <code>eval</code>. I didn't it was such an evil thing lol. Someone wrote this a long time ago. I don't know how <code>eval</code> gave impression back then. nonetheless, I think it's a better idea to change the eval part.</p>\n\n<p>Essentially the part that creates problem is when the code tries to eval a list that has <code>null</code> in it.</p>\n\n<p>To be exact, the input here is a list of list that's wrapped in a string.</p>\n\n<p>EDIT2: don't just downvote. I'm simply asking a question</p>\n"}, {"tags": ["python", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "edited": false, "score": 0, "creation_date": 1467839918, "post_id": 38233614, "comment_id": 63889531, "body": "Can you add some info why do you want use <code>scrapy</code>? Right now it seems that you need to download one page (without related scripts, images ...), and save it content (without any modification or grabbing data from it). Its easer to do with <code>requests</code> or even <code>urllib</code>."}, {"owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "reply_to_user": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "edited": false, "score": 1, "creation_date": 1467840169, "post_id": 38233614, "comment_id": 63889645, "body": "@Arnial It&#39;s not one only page, there are several thousands, I use scrapy to extract the data one I have the source of the page."}], "answers": [{"comments": [{"owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "edited": false, "score": 0, "creation_date": 1467899411, "post_id": 38234394, "comment_id": 63915622, "body": "Can I set a user agent in that file?"}, {"owner": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "reply_to_user": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "edited": false, "score": 1, "creation_date": 1467899662, "post_id": 38234394, "comment_id": 63915851, "body": "In <code>test_scr.py</code> probably not (i don&#39;t know how), but you can set in in command line <code>scrapy runspider test_scr.py -s USER_AGENT=&quot;user agent name&quot;</code>"}, {"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1467962593, "post_id": 38234394, "comment_id": 63942069, "body": "You can most likely set an user agent using <code>spider.custom_settings</code>       <code>custom_settings = {         &quot;USER_AGENT&quot;: &quot;&lt;user agent name&gt;&quot;       }</code>"}, {"owner": {"reputation": 1421, "user_id": 1079002, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0f405619ecb9d1ad4bc624ead7ac13ce?s=128&d=identicon&r=PG", "display_name": "cikatomo", "link": "https://stackoverflow.com/users/1079002/cikatomo"}, "edited": false, "score": 0, "creation_date": 1608253380, "post_id": 38234394, "comment_id": 115534143, "body": "will this also download all the images and css files?"}], "tags": [], "owner": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "is_accepted": true, "score": 14, "last_activity_date": 1467841930, "creation_date": 1467841930, "answer_id": 38234394, "question_id": 38233614, "link": "https://stackoverflow.com/questions/38233614/download-a-full-page-with-scrapy/38234394#38234394", "title": "Download a full page with scrapy", "body": "<p>Code will download this page and save it in file <code>download-a-full-page-with-scrapy.html</code></p>\n\n<p>test_scr.py</p>\n\n<pre><code>import scrapy\nclass TestSpider(scrapy.Spider):\n    name = \"test\"\n\n    start_urls = [\n        \"http://stackoverflow.com/questions/38233614/download-a-full-page-with-scrapy\",\n    ]\n\n    def parse(self, response):\n        filename = response.url.split(\"/\")[-1] + '.html'\n        with open(filename, 'wb') as f:\n            f.write(response.body)\n</code></pre>\n\n<p>run scrapy by this command</p>\n\n<pre><code>scrapy runspider test_scr.py\n</code></pre>\n"}], "owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13561, "favorite_count": 3, "accepted_answer_id": 38234394, "answer_count": 1, "score": 10, "last_activity_date": 1467842845, "creation_date": 1467838475, "last_edit_date": 1467842845, "question_id": 38233614, "link": "https://stackoverflow.com/questions/38233614/download-a-full-page-with-scrapy", "title": "Download a full page with scrapy", "body": "<p>I want to download the content a whole page using scrapy. </p>\n\n<p>With selenium this is quite easy:</p>\n\n<pre><code>import os,sys\nreload(sys)  \nsys.setdefaultencoding('utf8')\nfrom selenium import webdriver\n\n\nurl = 'https://es.wikipedia.org/wiki/Python'\n\ndriver = webdriver.Firefox()\ndriver.get(url)\ncontent = driver.page_source\nwith open('source','w') as output:\n    output.write(content)\n</code></pre>\n\n<p>But selenium is much slower than scrapy.</p>\n\n<p>Is it an simple way to do in scrapy?</p>\n\n<p>I want to save the code of each page in a different file text, not as a csv or json file.  Also, if posible without creating a project, which seems a bit of overkill for such a simple task.</p>\n"}, {"tags": ["python", "if-statement", "types", "conditional", "type-conversion"], "answers": [{"tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 0, "last_activity_date": 1467838270, "creation_date": 1467838270, "answer_id": 38233573, "question_id": 38233540, "link": "https://stackoverflow.com/questions/38233540/data-type-conditions-in-python/38233573#38233573", "title": "Data type conditions in python", "body": "<p>With your sample code, your best bet is to catch the <code>ValueError</code> and try again:</p>\n\n<pre><code>def get_int():\n    try:\n        return int(input('Type an integer:'))\n    except ValueError:\n        print(\"Not an int.  Try again.\")\n        return get_int()\n</code></pre>\n\n<p>The reason is because if the user enters a non-integer string, then the exception gets raised before you have a chance to check the type, so <code>isinstance</code> doesn't really help you too much here.</p>\n"}, {"tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 0, "last_activity_date": 1467838470, "creation_date": 1467838470, "answer_id": 38233613, "question_id": 38233540, "link": "https://stackoverflow.com/questions/38233540/data-type-conditions-in-python/38233613#38233613", "title": "Data type conditions in python", "body": "<p>One way would be casting the value to into and handle the exception:</p>\n\n<pre><code>try:\n    parsed = int(user_input)\n    print (\"int\")\n\nexcept:\n    print (\"not int\")\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6486389, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a588f138b1d2d015314280f29d0eb5ed?s=128&d=identicon&r=PG&f=1", "display_name": "ebere", "link": "https://stackoverflow.com/users/6486389/ebere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1167, "favorite_count": 0, "closed_date": 1467838403, "accepted_answer_id": 38233573, "answer_count": 2, "score": 0, "last_activity_date": 1467838470, "creation_date": 1467838125, "last_edit_date": 1467838258, "question_id": 38233540, "link": "https://stackoverflow.com/questions/38233540/data-type-conditions-in-python", "closed_reason": "Duplicate", "title": "Data type conditions in python", "body": "<p>How do i give a condition in which for example; if x is not an integer print(\"type an integer\")<img src=\"https://i.stack.imgur.com/zEF1N.png\" alt=\"this image should explain better\"></p>\n"}, {"tags": ["python", "pickle", "importerror"], "comments": [{"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1467838166, "post_id": 38233515, "comment_id": 63888650, "body": "Do you have the corresponding write to the pickle file?"}, {"owner": {"reputation": 61, "user_id": 2480019, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a603b6921ac607bdda4dcc9cfc8d4280?s=128&d=identicon&r=PG", "display_name": "user2480019", "link": "https://stackoverflow.com/users/2480019/user2480019"}, "reply_to_user": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1467838811, "post_id": 38233515, "comment_id": 63888959, "body": "What do you mean the corresponding write? I was given a set of .pkl files, and I am trying to read those files using the above method."}, {"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1467838969, "post_id": 38233515, "comment_id": 63889052, "body": "That wasn&#39;t clear in your post. I thought maybe you wrote out the pkl files too. I guess that would be a good first step, does it work with a pickle file you create?"}, {"owner": {"reputation": 61, "user_id": 2480019, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a603b6921ac607bdda4dcc9cfc8d4280?s=128&d=identicon&r=PG", "display_name": "user2480019", "link": "https://stackoverflow.com/users/2480019/user2480019"}, "reply_to_user": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1467839657, "post_id": 38233515, "comment_id": 63889410, "body": "Yup, sorry! It is working for a pickle file that I manually write."}], "answers": [{"comments": [{"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1467895936, "post_id": 38233851, "comment_id": 63913013, "body": "Does this issue go away if you use <code>json</code> or <code>yaml</code>?"}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "reply_to_user": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1467908519, "post_id": 38233851, "comment_id": 63922178, "body": "@busfault No. The problem isn&#39;t the serialization format.  The problem is trying to serialize a complex datatype.  In fact, json or yaml only support serializing the basic datatypes.  Those libraries won&#39;t even try to serialize a custom class unless you provide a custom Encoder/Decoder."}], "tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": false, "score": 1, "last_activity_date": 1467839906, "last_edit_date": 1467839906, "creation_date": 1467839549, "answer_id": 38233851, "question_id": 38233515, "link": "https://stackoverflow.com/questions/38233515/pickle-file-import-error/38233851#38233851", "title": "Pickle File Import Error", "body": "<p>Pickle files don't actually store class or module definitions.  They only store attribute values.  The benefit to this is that you can pickle out an object, update the class definition in your source code, then read in the pickled data and it will use the new class definition instead of having two different versions of the same class.  </p>\n\n<p>The downside is that pickle files aren't really transferrable between different python environments (and can't reliably even be transferred across different python files or modules).  When it comes to loading a class or object, the pickle file uses the same import structure/namespace that was present when the pickle was created.  That means that pickle files created from the same module that defines a class can only be reloaded in that same module (unless you manually import that class into your global namespace).</p>\n\n<p>For all we know <code>sysid_functions</code> was a sub-module of some other package that you don't have installed.  Even if you did have it installed, you would likely only be able to load the pickle file if you managed set up your module <code>globals()</code> the same way that the module that created the pickle file was set up.</p>\n"}], "owner": {"reputation": 61, "user_id": 2480019, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a603b6921ac607bdda4dcc9cfc8d4280?s=128&d=identicon&r=PG", "display_name": "user2480019", "link": "https://stackoverflow.com/users/2480019/user2480019"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2533, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467839906, "creation_date": 1467838033, "question_id": 38233515, "link": "https://stackoverflow.com/questions/38233515/pickle-file-import-error", "title": "Pickle File Import Error", "body": "<p>I have been trying to load a Python pickle file using the following Python function: </p>\n\n<pre><code>import os \nimport cPickle as pickle\n\ndef load_var(var_name):\n    fid = open(var_name + '.pkl', 'rb')\n    data = pickle.load(fid)\n    fid.close()\n    return data\n</code></pre>\n\n<p>but I keep on running into the following error: </p>\n\n<pre><code>ImportError: No module named sysid_functions\n</code></pre>\n\n<p>It's complaining about a module named sysid that is called in the pickle.py file. If I import pickle instead of (cPickle as pickle), I get the following more detailed error output: </p>\n\n<pre><code> File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py\", line 1378, in load\n    return Unpickler(file).load()\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py\", line 858, in load\n    dispatch[key](self)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py\", line 1090, in load_global\n    klass = self.find_class(module, name)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pickle.py\", line 1124, in find_class\n    __import__(module)\nImportError: No module named sysid_functions\n</code></pre>\n\n<p>Does anybody have any idea what might be causing the error? </p>\n"}, {"tags": ["python", "numpy", "pandas", "scipy", "sparse-matrix"], "comments": [{"owner": {"reputation": 136, "user_id": 3462016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1326121116/picture?type=large", "display_name": "breucopter", "link": "https://stackoverflow.com/users/3462016/breucopter"}, "edited": false, "score": 0, "creation_date": 1467838540, "post_id": 38233504, "comment_id": 63888826, "body": "Have you tried the <code>to_sparse</code> method? <a href=\"http://pandas.pydata.org/pandas-docs/stable/sparse.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/sparse.html</a>"}, {"owner": {"reputation": 131, "user_id": 5988911, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f6d76bfca0da61c534a7db2200a7e43?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Lo", "link": "https://stackoverflow.com/users/5988911/dan-lo"}, "reply_to_user": {"reputation": 136, "user_id": 3462016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1326121116/picture?type=large", "display_name": "breucopter", "link": "https://stackoverflow.com/users/3462016/breucopter"}, "edited": false, "score": 0, "creation_date": 1467839126, "post_id": 38233504, "comment_id": 63889143, "body": "Trying it out - seems like it takes a while. Can the resulting dataframe from the to_sparse method be subsetted easily?  Edit: using to_sparse on my 73000x8000 dataframe crashed my computer"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1467844960, "post_id": 38233504, "comment_id": 63891479, "body": "Did you try: <code>list_of_inds = pd.Index(list_of_inds); df.ix[list_of_inds]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1246, "user_id": 3878013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lRPxj.png?s=128&g=1", "display_name": "clocker", "link": "https://stackoverflow.com/users/3878013/clocker"}, "is_accepted": false, "score": -1, "last_activity_date": 1467883341, "creation_date": 1467883341, "answer_id": 38241810, "question_id": 38233504, "link": "https://stackoverflow.com/questions/38233504/selecting-rows-from-sparse-dataframe-by-index-position/38241810#38241810", "title": "Selecting rows from sparse dataframe by index position", "body": "<p>The issue you are facing could be related to view vs copy semantics. </p>\n\n<pre><code>df.ix[1:N]              # uses slicing =&gt; operates on a view \ndf.ix[np.arange(1,N)]   # uses fancy indexing =&gt; \"probably\" creates a copy first\n</code></pre>\n\n<p>I created a DataFrame on my machine of shape 73000x8000 and my memory spiked to 4.4 GB so I wouldn't be surprised with crashes. That said, if you do need to create a new array with the index list, then you're out of luck. However, to modify the original DataFrame, you should be able to modify the DataFrame one row at a time, or few sliced rows at a time at the expense of speed, eg:</p>\n\n<pre><code>for i in arbitrary_list_of_indices:\n    df.ix[i] = new_values \n</code></pre>\n\n<p>Btw, you could try working off numpy arrays directly which I felt has clearer descriptions of which operations result in copies vs views. You can always create a DataFrame from the array with hardly any memory overhead since it just creates a reference to the original array. </p>\n\n<p>Also indexing in numpy seems much faster, even without slicing. Here's a simple testcase:</p>\n\n<pre><code>In [66]: df\nOut[66]: \n    0   1   2   3\n0   3  14   5   1\n1   9  19  14   4\n2   5   4   5   5\n3  13  14   4   7\n4   8  12   3  16\n5  15   3  17  12\n6  11   0  12   0\n\nIn [68]: df.ix[[1,3,5]]       # fancy index version\nOut[68]: \n    0   1   2   3\n1   9  19  14   4\n3  13  14   4   7\n5  15   3  17  12\n\nIn [69]: df.ix[1:5:2]   # sliced version of the same\nOut[69]: \n    0   1   2   3\n1   9  19  14   4\n3  13  14   4   7\n5  15   3  17  12\n\nIn [71]: %timeit df.ix[[1,3,5]] = -1   # use fancy index version\n1000 loops, best of 3: 251 \u00b5s per loop\n\nIn [72]: %timeit df.ix[1:5:2] = -2     # faster sliced version\n10000 loops, best of 3: 157 \u00b5s per loop\n\nIn [73]: arr = df.values\nIn [74]: arr\nOut[74]: \narray([[ 3, 14,  5,  1],\n       [-2, -2, -2, -2],\n       [ 5,  4,  5,  5],\n       [-2, -2, -2, -2],\n       [ 8, 12,  3, 16],\n       [-2, -2, -2, -2],\n       [11,  0, 12,  0]])\n\nIn [75]: %timeit arr[[1,3,5]] = -1   # much faster than DataFrame\nThe slowest run took 23.49 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 4.56 \u00b5s per loop\n\nIn [77]: %timeit arr[1:5:2] = -3  # really fast but restricted to slicing\nThe slowest run took 19.46 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 821 ns per loop\n</code></pre>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 131, "user_id": 5988911, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f6d76bfca0da61c534a7db2200a7e43?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Lo", "link": "https://stackoverflow.com/users/5988911/dan-lo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1131, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1467883341, "creation_date": 1467837990, "last_edit_date": 1467838149, "question_id": 38233504, "link": "https://stackoverflow.com/questions/38233504/selecting-rows-from-sparse-dataframe-by-index-position", "title": "Selecting rows from sparse dataframe by index position", "body": "<p>In a typical python dataframe, it's easy to select desired rows based on index:</p>\n\n<pre><code>df.ix[list_of_inds] or df.loc[list_of_inds]\n</code></pre>\n\n<p>However, using this method to take a substantial subset of a large, sparse dataframe (73,000 rows, 8,000 columns specifically) seems to be extremely intensive - my memory shoots up and my computer crashes.</p>\n\n<p>I did notice that indexing using a range like this..</p>\n\n<pre><code>df.ix[1:N]\n</code></pre>\n\n<p>works fine, while using a list of indices like this...</p>\n\n<pre><code>df.ix[np.arange(1,N)]\n</code></pre>\n\n<p>is what makes the memory overload.</p>\n\n<p>Is there another way to select rows from a sparse dataframe that's computationally easier? Or, can I convert this dataframe to an actual sparse matrix...</p>\n\n<pre><code>sparse_df = scipy.sparse.csc(df)\n</code></pre>\n\n<p>and select only the indices I want from that?</p>\n"}, {"tags": ["python", "amazon-dynamodb", "boto3"], "answers": [{"comments": [{"owner": {"reputation": 1159, "user_id": 666397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097ee41669d9e37f526dfcf396a632b0?s=128&d=identicon&r=PG", "display_name": "Atifm", "link": "https://stackoverflow.com/users/666397/atifm"}, "edited": false, "score": 0, "creation_date": 1477672820, "post_id": 38234247, "comment_id": 67876249, "body": "When you recursive in this context.. what do you mean here?  FilterExpression isn&#39;t working right for me either.  Trying to figure out why"}], "tags": [], "owner": {"reputation": 2345, "user_id": 3089927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e7fbe35c012cf500aaf9e2da06ec656d?s=128&d=identicon&r=PG&f=1", "display_name": "user3089927", "link": "https://stackoverflow.com/users/3089927/user3089927"}, "is_accepted": false, "score": 0, "last_activity_date": 1467841264, "creation_date": 1467841264, "answer_id": 38234247, "question_id": 38233502, "link": "https://stackoverflow.com/questions/38233502/dynamodb-filterexpression-returns-unexpected-data/38234247#38234247", "title": "dynamodb FilterExpression returns unexpected data", "body": "<p>So, if I recursively pass the username and \"LastEvaluatedKey\" to the function, it returns all the data and then by chaining, I can get the complete list.</p>\n"}], "owner": {"reputation": 2345, "user_id": 3089927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e7fbe35c012cf500aaf9e2da06ec656d?s=128&d=identicon&r=PG&f=1", "display_name": "user3089927", "link": "https://stackoverflow.com/users/3089927/user3089927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467841264, "creation_date": 1467837981, "question_id": 38233502, "link": "https://stackoverflow.com/questions/38233502/dynamodb-filterexpression-returns-unexpected-data", "title": "dynamodb FilterExpression returns unexpected data", "body": "<p>I am doing FilterExpression with boto3 library and looking for a username in a table that has 4 entries in that table. FilterExpression is returning only 1 record and LastEvaluationKey with unique_id in it. When I pass that unique_id to get more values for that user, I get different data set. </p>\n\n<pre><code>def lambda_handler(event,context):\n    username=\"john\"\n    response = emp_info.scan(\n        FilterExpression=Attr('username').eq(username)\n    )\n    print response\n</code></pre>\n\n<p>and when I see response and pass the value of \"LastEvaluationKey\", I see a different data set for different user.</p>\n\n<p>How can I get all rows for the user and not random data set? I can confirm that user has 4 records in dynamodb.</p>\n"}, {"tags": ["python", "eclipse-rcp", "pydev"], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "edited": false, "score": 0, "creation_date": 1467920909, "post_id": 38249828, "comment_id": 63929262, "body": "Thanks, Fabio. The problem was in my code. I was programmatically generating the pypredef file with hundreds of methods and failed to notice that a few of the methods I was adding are python reserved words when converted to lower case. I detect and skip those now, and it works properly."}], "tags": [], "owner": {"reputation": 23516, "user_id": 110451, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70fc26faedcbfc82344a0b347053aaa0?s=128&d=identicon&r=PG", "display_name": "Fabio Zadrozny", "link": "https://stackoverflow.com/users/110451/fabio-zadrozny"}, "is_accepted": true, "score": 0, "last_activity_date": 1467906245, "creation_date": 1467906245, "answer_id": 38249828, "question_id": 38233473, "link": "https://stackoverflow.com/questions/38233473/can-pydev-predefined-definitions-be-case-insensitive/38249828#38249828", "title": "Can PyDev Predefined definitions be case-insensitive?", "body": "<p>Adding one entry for the upper case and another for the lower case <strong>should</strong> work, so, if that's not working for you, please report this as a bug in <a href=\"https://sw-brainwy.rhcloud.com/tracker/PyDev\" rel=\"nofollow\">https://sw-brainwy.rhcloud.com/tracker/PyDev</a></p>\n"}], "owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 38249828, "answer_count": 1, "score": 0, "last_activity_date": 1467906245, "creation_date": 1467837864, "question_id": 38233473, "link": "https://stackoverflow.com/questions/38233473/can-pydev-predefined-definitions-be-case-insensitive", "title": "Can PyDev Predefined definitions be case-insensitive?", "body": "<p>I'm using PyDev predefined completions, and I'd like the defined methods to be case-insensitive. Even though python method names are case-sensitive, the predefs I'm implementing represent wrapper methods which delegate to a library which is not case-sensitive. So I'd like for developers to be able to enter lowercase or uppercase method names and both be recognized as valid.</p>\n\n<p>I tried adding duplicate method definitions to the predef file\u2014one in upper case and the other in lower case\u2014but that's apparently not allowed, as it results in neither lower case nor uppercase method names being recognized.</p>\n"}, {"tags": ["python", "postgresql", "warnings", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 10395, "user_id": 275088, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b931a4a3164d36350c78dd67ed8a9f99?s=128&d=identicon&r=PG", "display_name": "planetp", "link": "https://stackoverflow.com/users/275088/planetp"}, "edited": false, "score": 0, "creation_date": 1467890787, "post_id": 38233977, "comment_id": 63909383, "body": "This looks very clean. It&#39;d we nice if <code>psycopg</code> supported such cursors out of the box though."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1467840086, "creation_date": 1467840086, "answer_id": 38233977, "question_id": 38233400, "link": "https://stackoverflow.com/questions/38233400/how-do-i-promote-postgresql-warnings-to-exceptions-in-psycopg2/38233977#38233977", "title": "How do I promote PostgreSQL warnings to exceptions in psycopg2?", "body": "<p>I am very far from being <code>psycopg2</code> or <code>Postgres</code> expert, and, I am sure there is a better solution to increase the warning level, but here is something that worked for me - <a href=\"http://initd.org/psycopg/docs/advanced.html#subclassing-connection\" rel=\"nofollow\">a custom cursor</a> which looks into <a href=\"http://initd.org/psycopg/docs/connection.html#connection.notices\" rel=\"nofollow\">connection notices</a> and, if there is something there - it throws an exception. The implementation itself is for education purposes mostly - I am sure it needs to be adjusted to work in your use case:</p>\n\n<pre><code>import psycopg2\n\n# this \"cursor\" class needs to be used as a base for custom cursor classes\nfrom psycopg2.extensions import cursor  \n\nclass ErrorThrowingCursor(cursor):\n    def __init__(self, conn, *args, **kwargs):\n        self.conn = conn\n        super(ErrorThrowingCursor, self).__init__(*args, **kwargs)\n\n    def execute(self, query, vars=None):\n        result = super(ErrorThrowingCursor, self).execute(query, vars)\n\n        for notice in self.conn.notices:\n            level, message = notice.split(\": \")\n            if level == \"WARNING\":\n                raise psycopg2.Warning(message.strip())\n\n        return result\n</code></pre>\n\n<p>Usage sample:</p>\n\n<pre><code>conn = psycopg2.connect(user=\"user\", password=\"secret\")\ncursor = conn.cursor(conn, cursor_factory=ErrorThrowingCursor)\n</code></pre>\n\n<p>This would throw an exception (of a <a href=\"http://initd.org/psycopg/docs/module.html#psycopg2.Warning\" rel=\"nofollow\"><code>psycopg2.Warning</code></a> type) if a warning was issued after a query execution. Sample:</p>\n\n<pre><code>psycopg2.Warning: there is already a transaction in progress\n</code></pre>\n"}], "owner": {"reputation": 10395, "user_id": 275088, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b931a4a3164d36350c78dd67ed8a9f99?s=128&d=identicon&r=PG", "display_name": "planetp", "link": "https://stackoverflow.com/users/275088/planetp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 1, "accepted_answer_id": 38233977, "answer_count": 1, "score": 5, "last_activity_date": 1467840086, "creation_date": 1467837603, "question_id": 38233400, "link": "https://stackoverflow.com/questions/38233400/how-do-i-promote-postgresql-warnings-to-exceptions-in-psycopg2", "title": "How do I promote PostgreSQL warnings to exceptions in psycopg2?", "body": "<p>From the PostgreSQL <a href=\"https://www.postgresql.org/docs/9.5/static/sql-begin.html\" rel=\"noreferrer\">docs</a> on <code>BEGIN</code>:</p>\n\n<blockquote>\n  <p>Issuing BEGIN when already inside a transaction block will provoke a\n  warning message. The state of the transaction is not affected.</p>\n</blockquote>\n\n<p>How can I make <code>psycopg2</code> raise an exception on any such warning?</p>\n"}, {"tags": ["python", "azure", "stored-procedures", "azure-cosmosdb"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2913122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d2cfb2404662c53c617569cc990b18cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Furlan", "link": "https://stackoverflow.com/users/2913122/jesse-furlan"}, "edited": false, "score": 0, "creation_date": 1467845495, "post_id": 38234035, "comment_id": 63891664, "body": "This worked perfectly, thanks! document_client is pretty huge, I didn&#39;t see those other methods tucked away on the bottom there."}], "tags": [], "owner": {"reputation": 7557, "user_id": 319795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uPeKR.png?s=128&g=1", "display_name": "Andrew Liu", "link": "https://stackoverflow.com/users/319795/andrew-liu"}, "is_accepted": true, "score": 0, "last_activity_date": 1467840322, "creation_date": 1467840322, "answer_id": 38234035, "question_id": 38233391, "link": "https://stackoverflow.com/questions/38233391/possible-to-run-stored-procedure-using-documentdb-sdk-for-python/38234035#38234035", "title": "Possible to run Stored Procedure using documentDB SDK for Python?", "body": "<p>For the DocumentDB Python SDK, you can call <code>ExecuteStoredProcedure(self, sproc_link, params, options=None)</code>.</p>\n\n<p>You can find a short example in the SDK's unit tests here:</p>\n\n<p><a href=\"https://github.com/Azure/azure-documentdb-python/blob/e605e7ca7b1ddd2454f1014f536a0fded9e6f234/test/crud_tests.py#L3408-L3409\" rel=\"nofollow\">https://github.com/Azure/azure-documentdb-python/blob/e605e7ca7b1ddd2454f1014f536a0fded9e6f234/test/crud_tests.py#L3408-L3409</a></p>\n"}], "owner": {"reputation": 3, "user_id": 2913122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d2cfb2404662c53c617569cc990b18cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Furlan", "link": "https://stackoverflow.com/users/2913122/jesse-furlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 38234035, "answer_count": 1, "score": 0, "last_activity_date": 1467840322, "creation_date": 1467837571, "question_id": 38233391, "link": "https://stackoverflow.com/questions/38233391/possible-to-run-stored-procedure-using-documentdb-sdk-for-python", "title": "Possible to run Stored Procedure using documentDB SDK for Python?", "body": "<p>I'm using Tornado and pydocumentDB to run a storage application on Azure. I also have a stored procedure: </p>\n\n<pre><code>function userIDSproc() {\n    var collection = getContext().getCollection();\n\n    // Query documents and take 1st item.\n    var isAccepted = collection.queryDocuments(\n        collection.getSelfLink(),\n        \"SELECT * FROM root r WHERE r.id='user_ids_counter'\",\n        function (err, feed, options) {\n            if (err) throw err;\n\n            // Check the feed and if empty, set the body to 'no docs found', \n            // else take 1st element from feed\n            if (!feed || !feed.length) getContext().getResponse().setBody('no docs found');\n            else tryUpdate(feed[0])\n        });\n\n    if (!isAccepted) throw new Error('The query was not accepted by the server.');\n\n    function tryUpdate(document){\n        document.counter += 1;\n        getContext().getResponse().setBody(document['counter']);\n        var isAccepted = collection.replaceDocument(document._self, document, function (err, document, options) {\n            if (err) throw err;\n            // If we have successfully updated the document - return it in the response body.\n            getContext().getResponse().setBody(document);            \n        });\n    }\n</code></pre>\n\n<p>What I'm trying to do is increase the <code>counter</code> property of my user_ids document every time a new user is generated and their document is added to the collection. Is it possible to call that Sproc, update the counter, then query the document for the new counter, then use that new counter as the ID for the new user? The documentDB SDK on GitHub shows a couple methods like <code>QueryStoredProcedures(self, collection_link, query, options=None):\n</code> and <code>ReadStoredProcedures(self, collection_link, options=None):</code> but nothing to actually execute.</p>\n"}, {"tags": ["python", "directory", "ipython", "readonly", "temporary"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1467867455, "creation_date": 1467867455, "answer_id": 38237798, "question_id": 38233364, "link": "https://stackoverflow.com/questions/38233364/ipython-on-readonly-filesystem-no-usable-temporary-directory-found/38237798#38237798", "title": "ipython on readonly filesystem: &quot;No usable temporary directory found&quot;", "body": "<p>I am looking at the <code>ipython</code> config file to see if there's anything about automatic writing and how to turn it off.</p>\n\n<p>One that thing it does, by default, is write a <code>history.sqlite</code> file.  </p>\n\n<p>Setting:</p>\n\n<pre><code>c.HistoryManager.enabled = False\n</code></pre>\n\n<p>might turn that off.  But that requires editing the config file.  But it is possible to change config values like this in the commandline.  I haven't tried that.</p>\n\n<pre><code>ipython --HistoryManager.enabled=False\n</code></pre>\n\n<p>might do the trick.</p>\n\n<p>Look at the big help to see if anything looks like it might help.</p>\n\n<pre><code>ipython --help-all\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6557981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e78fceb9d585371d3eeb7574147daa78?s=128&d=identicon&r=PG&f=1", "display_name": "praereac", "link": "https://stackoverflow.com/users/6557981/praereac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 834, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467867455, "creation_date": 1467837495, "question_id": 38233364, "link": "https://stackoverflow.com/questions/38233364/ipython-on-readonly-filesystem-no-usable-temporary-directory-found", "title": "ipython on readonly filesystem: &quot;No usable temporary directory found&quot;", "body": "<p>if I start IPython on a readonly filesystem it always crashes with:</p>\n\n<pre><code>  File \"/usr/lib/python2.7/tempfile.py\", line 217, in _get_default_tempdir\n    (\"No usable temporary directory found in %s\" % dirlist))\nIOError: [Errno 2] No usable temporary directory found in ['/tmp', '/var/tmp',\n</code></pre>\n\n<p>For some reasons i can not mount them writeable, so my question:</p>\n\n<p>is it possible to start IPython in a read-only mode? </p>\n\n<p>thanks in advance</p>\n\n<p>preareac</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1467860784, "post_id": 38233348, "comment_id": 63895307, "body": "I would suggest a frame on the left for the buttons, and a frame on the right for the entry widget and the listbox. You can then layout each section independently of the other."}], "answers": [{"tags": [], "owner": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "is_accepted": true, "score": 2, "last_activity_date": 1467838571, "creation_date": 1467838571, "answer_id": 38233634, "question_id": 38233348, "link": "https://stackoverflow.com/questions/38233348/tkinter-widget-layout-is-wrong/38233634#38233634", "title": "Tkinter widget layout is wrong?", "body": "<p>You can tell the grid to let (force) a widget to take up multiple rows/columns with the <code>columnspan</code> argument to <code>grid()</code>, i.e.:</p>\n\n<pre><code>...\nlist_box.grid(row=1, column=3, rowspan=3)\n...\n</code></pre>\n\n<p>That will tell your <code>list_box</code> to cover (up to) three rows (if there's more space than the widget, you may need to <code>anchor</code> it to the (N)orth + (S)outh to stretch over available space) <code>columnspan</code> works in the same way.</p>\n\n<p>As a note, spans anchor from the top-left; <code>row=1, column=3</code> with a <code>rowspan</code> and <code>columnspan</code> of 3 each will take up rows 1-3 and columns 3-5.</p>\n"}], "owner": {"reputation": 286, "user_id": 4677628, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/640b058a420fc856868361392ce02949?s=128&d=identicon&r=PG&f=1", "display_name": "tomh1012", "link": "https://stackoverflow.com/users/4677628/tomh1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 1, "accepted_answer_id": 38233634, "answer_count": 1, "score": 1, "last_activity_date": 1467839780, "creation_date": 1467837455, "last_edit_date": 1467839780, "question_id": 38233348, "link": "https://stackoverflow.com/questions/38233348/tkinter-widget-layout-is-wrong", "title": "Tkinter widget layout is wrong?", "body": "<p>I've been putting a menu together using Tkinter with Python 2.7. It works functionally, but the layout is very messy. I'm usng the .grid() method to organise the widgets, but they are interfering with each other, so my listbox widget is taller than the buttons so they get spaced apart etc. What can I do to resolve this? \nThe result I'm getting is shown here: </p>\n\n<p><a href=\"https://i.stack.imgur.com/jW1cu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jW1cu.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>With what I'm trying to achieve drawn out here:</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/BF7M7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BF7M7.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is my code:</p>\n\n<pre><code>import Tkinter as tk\nroot = tk.Tk()\nroot.title(\"Test\")\n\ncommand = []\nclass button():\n    def __init__(self, root, text_in, x, y, command):\n        self.text = text_in\n        self.pressed = False\n        self.button = tk.Button(root, text=text_in, width = 15, height = 5, command = lambda: add_to_command(self.text))\n        self.button.grid(row=x, column = y)\n\ndef add_to_command(word):\n    command.append(word)\n    command.append(' ')\ndef print_command(command, command_line):\n    if command_line.get():\n        command = command_line.get()\n    else:\n        command = ''.join(command)\n    print command\n\nbutton1 = button(root, \"1\", 0, 1, command)\nbutton2 = button(root, \"2\", 0, 2, command)\nbutton3 = button(root, \"3\", 1, 1, command)\nbutton4 = button(root, \"4\", 1, 2, command)\nbutton5 = button(root, \"5\", 2, 1, command)\nbutton6 = button(root, \"6\", 2, 2, command)\nbutton7 = button(root, \"7\", 3, 1, command)\nbutton8 = button(root, \"8\", 3, 2, command)\ncommand_line = tk.Entry(root, width = 100, takefocus=1)\ncommand_line.grid(row = 0,column = 3, padx = 10)\ngo_button = tk.Button(root, text=\"Enter\", width = 15, height = 5, command = lambda: print_command(command, command_line))\ngo_button.grid(row=0, column=5)\n\nlist_box = tk.Listbox(root)\nlist_box.grid(row = 1, column = 3)\nlist_box.insert(0, \"ENTRY 1\")\nlist_box.insert(1, \"ENTRY 2\")\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1467837533, "post_id": 38233320, "comment_id": 63888341, "body": "Have you read the traceback, which tells you exactly which line it&#39;s referring to?"}, {"owner": {"reputation": 21, "user_id": 6557933, "user_type": "registered", "profile_image": "https://graph.facebook.com/270876319934349/picture?type=large", "display_name": "Emma Zhao", "link": "https://stackoverflow.com/users/6557933/emma-zhao"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1467882563, "post_id": 38233320, "comment_id": 63904061, "body": "Yes, I read that, but it list many lines. Always not for sure which line caused the problem."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1467883003, "post_id": 38233320, "comment_id": 63904351, "body": "Even if you don&#39;t fully understand it, you could at least include it. And to help interpret it: as a rule, start at the bottom, with the <i>last</i> line called before the error."}, {"owner": {"reputation": 21, "user_id": 6557933, "user_type": "registered", "profile_image": "https://graph.facebook.com/270876319934349/picture?type=large", "display_name": "Emma Zhao", "link": "https://stackoverflow.com/users/6557933/emma-zhao"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1467911373, "post_id": 38233320, "comment_id": 63923897, "body": "OK, thanks for the tips. :)"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6557933, "user_type": "registered", "profile_image": "https://graph.facebook.com/270876319934349/picture?type=large", "display_name": "Emma Zhao", "link": "https://stackoverflow.com/users/6557933/emma-zhao"}, "edited": false, "score": 0, "creation_date": 1467882757, "post_id": 38233365, "comment_id": 63904175, "body": "Thanks for pointing out this.  I changed students list. But now it alarms: TypeError: &#39;float&#39; object is not callable, which think it is the &quot; total = float(total)&quot;.  So I quote it, still the same. And changed marks of every student into integer, doesn&#39;t work either."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 21, "user_id": 6557933, "user_type": "registered", "profile_image": "https://graph.facebook.com/270876319934349/picture?type=large", "display_name": "Emma Zhao", "link": "https://stackoverflow.com/users/6557933/emma-zhao"}, "edited": false, "score": 0, "creation_date": 1467897015, "post_id": 38233365, "comment_id": 63913770, "body": "@EmmaZhao - I ran your original code (with the change I specified) in my Python 2 interpreter and got <code>83.8666666667</code>. I can&#39;t reproduce your new issue."}, {"owner": {"reputation": 21, "user_id": 6557933, "user_type": "registered", "profile_image": "https://graph.facebook.com/270876319934349/picture?type=large", "display_name": "Emma Zhao", "link": "https://stackoverflow.com/users/6557933/emma-zhao"}, "edited": false, "score": 0, "creation_date": 1467911303, "post_id": 38233365, "comment_id": 63923853, "body": "Wow..weird, maybe it&#39;s the version thing, I will try to figure it out then.  Thanks a lot!"}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 6, "last_activity_date": 1467837496, "creation_date": 1467837496, "answer_id": 38233365, "question_id": 38233320, "link": "https://stackoverflow.com/questions/38233320/typeerror-string-indices-must-be-integers-not-str-which-part-it-refers-to/38233365#38233365", "title": "TypeError: string indices must be integers, not str, which part it refers to?", "body": "<p>When you enclose a name in quotes, it is a string literal, not a variable.</p>\n\n<pre><code>&gt;&gt;&gt; x = 3\n&gt;&gt;&gt; x\n3\n&gt;&gt;&gt; 'x'\n'x'\n</code></pre>\n\n<p>Use <code>students = [lloyd, alice, tyler]</code> to refer to the variables you defined above.</p>\n"}], "owner": {"reputation": 21, "user_id": 6557933, "user_type": "registered", "profile_image": "https://graph.facebook.com/270876319934349/picture?type=large", "display_name": "Emma Zhao", "link": "https://stackoverflow.com/users/6557933/emma-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1467837883, "creation_date": 1467837349, "last_edit_date": 1467837883, "question_id": 38233320, "link": "https://stackoverflow.com/questions/38233320/typeerror-string-indices-must-be-integers-not-str-which-part-it-refers-to", "title": "TypeError: string indices must be integers, not str, which part it refers to?", "body": "<p>I am a total beginner of python, may bring some basic questions here. Could someone please help?</p>\n\n<p>I want to get the average for each student and then calculate the average of those averages. Get \"TypeError: string indices must be integers, not str\". Cannot figure out what it referring to and how to modify. Here is my code:</p>\n\n<pre><code>lloyd = {\n    \"name\": \"Lloyd\",\n    \"homework\": [90.0, 97.0, 75.0, 92.0],\n    \"quizzes\": [88.0, 40.0, 94.0],\n    \"tests\": [75.0, 90.0]\n}\nalice = {\n    \"name\": \"Alice\",\n    \"homework\": [100.0, 92.0, 98.0, 100.0],\n    \"quizzes\": [82.0, 83.0, 91.0],\n    \"tests\": [89.0, 97.0]\n}\ntyler = {\n    \"name\": \"Tyler\",\n    \"homework\": [0.0, 87.0, 75.0, 22.0],\n    \"quizzes\": [0.0, 75.0, 78.0],\n    \"tests\": [100.0, 100.0]\n}\n\n\ndef average(numbers):\n    total = sum(numbers)\n    total = float(total)\n    return total/len(numbers)\n\n\ndef get_average(student):\n    homework = average(student[\"homework\"])\n    quizzes = average(student[\"quizzes\"])\n    tests = average(student[\"tests\"])\n    return 0.1*homework + 0.3*quizzes + 0.6*tests\n\n\ndef get_class_average(students):\n    results = []\n    for student in students:\n        result = get_average(student)\n        results.append(result)\n    return average(results)\n\nstudents = [\"lloyd\", \"alice\", \"tyler\"]\nprint get_class_average(students)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 1540, "user_id": 3121049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53bb58fba0f1b65aea414ba7430079ae?s=128&d=identicon&r=PG&f=1", "display_name": "miyamoto", "link": "https://stackoverflow.com/users/3121049/miyamoto"}, "edited": false, "score": 1, "creation_date": 1467845351, "post_id": 38234987, "comment_id": 63891618, "body": "I think it&#39;s worth pointing out too that you don&#39;t need a <code>business_locations</code> field on the <code>Business</code> model as a <code>businesslocations_set</code> related manager is provided by the <code>ForeignKey</code> field on <code>BusinessLocations</code> model.  Read up on field lookups too. <a href=\"https://docs.djangoproject.com/en/1.9/topics/db/queries/#field-lookups\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.9/topics/db/queries/#field-looku&zwnj;&#8203;ps</a>"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1467921413, "post_id": 38234987, "comment_id": 63929524, "body": "This almost works.  The employee objects.filter works 100% correctly.  I can give it a business and get back all the employees.   The <code>Business.objects.filter</code> does not work the same, I give it an employee and get back all the businesses the employee does NOT work for.  Also if i take the employee out of all the employee locations I get back [] for that same query. (That does seem right).  So close on this.  Also i did remove the business_locations from the Business model."}, {"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1467952953, "post_id": 38234987, "comment_id": 63938527, "body": "@Codejoy: I&#39;m not sure how you could get that result. You might want to <a href=\"https://docs.djangoproject.com/en/dev/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running\" rel=\"nofollow noreferrer\">look at the generated SQL</a> to see if it matches what you expect."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1467991325, "post_id": 38234987, "comment_id": 63959877, "body": "Ran those, nothing came back looking very suspicious. I am thinking my database is just gunked up.   Running int he shell <code>&gt;&gt;&gt; BusinessLocations.objects.all()</code>  gives me an error <code>AttributeError: &#39;QuerySet&#39; object has no attribute &#39;objects&#39;</code>  Even though in the <code>&#47;admin</code> i can see the table, and the two business locations there are, and one of the locations is the same one the employee has for which the group does not show up in the list from the shell just all the other businesses."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1468423207, "post_id": 38234987, "comment_id": 64123697, "body": "Good lord I finally figured this out, the problem?  In my shell i was missing the import of BusinessLocations ugh. ty so much for the help!"}], "tags": [], "owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "is_accepted": true, "score": 1, "last_activity_date": 1467845044, "creation_date": 1467845044, "answer_id": 38234987, "question_id": 38233245, "link": "https://stackoverflow.com/questions/38233245/giving-a-model-knowledge-of-a-many-to-many-related-model-in-django/38234987#38234987", "title": "Giving a model knowledge of a many-to-many related model in django", "body": "<p>What you're missing is Django's concept of <a href=\"https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects\" rel=\"nofollow\">related objects</a>. </p>\n\n<blockquote>\n  <p>When you define a relationship in a model (i.e., a <code>ForeignKey</code>, <code>OneToOneField</code>, or <code>ManyToManyField</code>), instances of that model will have a convenient API to access the related objects.</p>\n</blockquote>\n\n<p>You can access the related objects both in queries and as a manager attribute on your models. See the examples in the documentation. In your case this would look something like:</p>\n\n<pre><code># Now lets see which businesses the employee works for:\nBusiness.objects.filter(businesslocations__employee=employee).distinct()\n\n# And let's see each business's employees:\nEmployee.objects.filter(business_locations__business=business).distinct()\n</code></pre>\n"}], "owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "accepted_answer_id": 38234987, "answer_count": 1, "score": 1, "last_activity_date": 1468337990, "creation_date": 1467837072, "last_edit_date": 1468337990, "question_id": 38233245, "link": "https://stackoverflow.com/questions/38233245/giving-a-model-knowledge-of-a-many-to-many-related-model-in-django", "title": "Giving a model knowledge of a many-to-many related model in django", "body": "<p>EDIT:  Given responses in comments and answer I tried suggestion and I get some errors when trying to query , also doing the related name query does not get the right results (as seen in comments)</p>\n\n<p>BusinessLocations.objects.all() </p>\n\n<p><code>Error: QuerySet object has no attribute 'objects' is the error.</code></p>\n\n<p>In either case, I did a dump of all the tables and see this:</p>\n\n<pre><code>auth_business_permissions', u'auth_permission', u'auth_user', u'auth_user_businesss', u'auth_user_user_permissions', u'django_admin_log', \nu'django_content_type', u'django_migrations', u'django_session', u'ipaswdb_address', u'ipaswdb_billing', u'ipaswdb_billing_businesss', \nu'ipaswdb_designation', u'ipaswdb_business', u'ipaswdb_business_business_locations', u'ipaswdb_businessinsurances', u'ipaswdb_businessinvoices', \n'ipaswdb_businesslocations', u'ipaswdb_businessterm', u'ipaswdb_insurance', u'ipaswdb_insurance_businesss', u'ipaswdb_invoice', u'ipaswdb_employee',\nu'ipaswdb_employeeinvoice', u'ipaswdb_employeelocations', u'ipaswdb_employeeterms', u'ipaswdb_specialty']\n</code></pre>\n\n<p>I have a <code>ipaswdb_business_business_locations</code> and a <code>ipaswdb_businesslocations</code> which seems strange to me, and I wonder if my database is just gunked up?</p>\n\n<p><code>Original Question:</code></p>\n\n<p>I have two models a <code>Business</code> and an Employee.  I want them both to be aware of each other but not directly but through another model called a 'BusinessesLocation`.  I can sort of express this in my models but it doesn't look or feel right.  It is like only the employee knows of the businesses, and not vice vice versa.  </p>\n\n<p>I had another question opened to try to answer this but the answer was not 100% correct in that it didn't offer for a many to many it was more like a one to many.  In this case:  An employee can work at many locations (potentially being an employee of many businesses) and a business can have many locations having many employees.</p>\n\n<p>Currently my models work where this shell script works:</p>\n\n<p><code>someEmployee.business_locations.all()[0].business.business_name</code>\nand it works fine, I can get all the locations of a business an employee works at and via that infer the many businesses an employee might work for given the businesses locations.</p>\n\n<p>But I cannot figure out how to go the other way, and find out all the employees a business has working for them and at which locations</p>\n\n<p>My current (wrongish) models are like this:</p>\n\n<pre><code>class Employee(models.Model):\n        first_name = models.CharField(max_length = 50)\n        business_locations = models.ManyToManyField('BusinessLocations', through='EmployeeLocations')\n\n\nclass EmployeeLocations(models.Model):\n    employee = models.ForeignKey('Employee', on_delete=models.CASCADE)\n    business_location = models.ForeignKey('BusinessLocations', on_delete=models.CASCADE)\n    created_at=models.DateField(auto_now_add=True)\n    updated_at=models.DateField(auto_now=True)\n    def __str__(self):\n        return self.provider.first_name\n\nclass BusinessLocations(models.Model):\n    address = models.ForeignKey('Address', on_delete= models.SET_NULL, null=True)\n    business = models.ForeignKey('Business', on_delete=models.CASCADE)\n    doing_business_as = models.CharField(max_length = 255)\n    created_at=models.DateField(auto_now_add=True)\n    updated_at=models.DateField(auto_now=True)\n    def __str__(self):\n        return self.doing_business_as\n\nclass Business(models.Model):\n    business_name = models.CharField(max_length=50)\n    business_locations = I need something here no idea how\n</code></pre>\n\n<p>Bellow is some pseudo shell code demonstrating how I would like my models to work:</p>\n\n<pre><code>#create a new business location assume business has been created\nnewLocation = Address(...)\nbusiness.business_locations.add(newLocation, doing_business_as='alternative name maybe')\n\n\n#assume employee exists\n#add a new business location to the employee\n#when i say selected business the form would have current employee then in its locations\n#you'd have to select a business first, and get a list of all that businesses locations and you\n#you could add the business location and then select another business with all ITS locations\n# and add one there too if you wish\n\nemployee.employee_locations.add(selectedBusiness.business_locations[0])\nemployee.employee_locations.add(anotherSelectedBusiness.business_locations[1])\n\nBelow is what I cannot figure out how to do, vice versa... \n\n#now lets see which businesses the employee works for.\n\nfor business in employee.business_locations\n       business.business_name\n\n#and lets see each businesses employees:\nfor employee in Employee.objects.all()\n       employee.\n?? No idea how to build the models to represent these relationships\n</code></pre>\n\n<p>I can get an employees business locations just fine, but I cannot get the above examples of getting a list of employees for a business.  Not sure what I need to adjust (or methods I might need?) to get this to work like I want in my shell example.</p>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 5929199, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wBaZz.jpg?s=128&g=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/5929199/hari"}, "edited": false, "score": 0, "creation_date": 1467875649, "post_id": 38233872, "comment_id": 63899952, "body": "Thank you so much!! I&#39;m new and I&#39;m trying everything just now! Bye!"}], "tags": [], "owner": {"reputation": 21, "user_id": 5240651, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KzM0mE7AoOY/AAAAAAAAAAI/AAAAAAAAAB0/zeVqPItgXPk/photo.jpg?sz=128", "display_name": "Ethan H.", "link": "https://stackoverflow.com/users/5240651/ethan-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1467839633, "creation_date": 1467839633, "answer_id": 38233872, "question_id": 38233230, "link": "https://stackoverflow.com/questions/38233230/two-foreign-key-in-the-same-model-from-two-different-model/38233872#38233872", "title": "Two foreign key in the same model from two different model", "body": "<p>Django didn't pop up error because you were doing it right. It's totally reasonable that there are multiple foreign keys in one model, just like class C.</p>\n\n<p>In class C, as long as id_A and id_B is the single column primary keys of their own model, it will perfectly work out.</p>\n\n<p>\"MultipleColumnPrimaryKeys\" you mentioned is a different thing. It means that for a specific table in database, there are multiple columns together to be the table's primary key, which is not supported in Django.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 5929199, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wBaZz.jpg?s=128&g=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/5929199/hari"}, "edited": false, "score": 0, "creation_date": 1467875730, "post_id": 38234088, "comment_id": 63900004, "body": "Ok, I was about to find an answer about related_name attribute, but you already answer me!! Thank you!"}], "tags": [], "owner": {"reputation": 542, "user_id": 2921575, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/suRzV.jpg?s=128&g=1", "display_name": "dfrojas", "link": "https://stackoverflow.com/users/2921575/dfrojas"}, "is_accepted": true, "score": 1, "last_activity_date": 1467840595, "creation_date": 1467840595, "answer_id": 38234088, "question_id": 38233230, "link": "https://stackoverflow.com/questions/38233230/two-foreign-key-in-the-same-model-from-two-different-model/38234088#38234088", "title": "Two foreign key in the same model from two different model", "body": "<p>You are doing it well, if you were relating id_A and id_B to a same model, django would give you an error, in this case just put <code>related_name</code> attribute in the second field.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 5929199, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wBaZz.jpg?s=128&g=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/5929199/hari"}, "edited": false, "score": 0, "creation_date": 1467876031, "post_id": 38234126, "comment_id": 63900160, "body": "Thank you for your answer. Actually, id_A and id_B are not auto-increment primary key, but UUIDField: I now realize that I didn&#39;t write correctly."}], "tags": [], "owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "is_accepted": false, "score": 1, "last_activity_date": 1467840736, "creation_date": 1467840736, "answer_id": 38234126, "question_id": 38233230, "link": "https://stackoverflow.com/questions/38233230/two-foreign-key-in-the-same-model-from-two-different-model/38234126#38234126", "title": "Two foreign key in the same model from two different model", "body": "<p>You can use a many-to-many relationship that automatically creates that intermediate model for you:</p>\n\n<pre><code>from django.db import models\n\n\nclass Publication(models.Model):\n    title = models.CharField(max_length=30)\n\n\nclass Article(models.Model):\n    headline = models.CharField(max_length=100)\n    publications = models.ManyToManyField(Publication, related_name='articles')\n</code></pre>\n\n<p>With this you can do both:</p>\n\n<pre><code>publication.articles.all()  # Gives you the articles of the current publication instance\narticle.publications.all()  # Gives you the publications of the current article instance\n</code></pre>\n\n<p>Check out docs for <a href=\"https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/\" rel=\"nofollow\">many to many</a></p>\n\n<p>If you need to use any additional fields in that intermediate model, you can tell django which is the <code>through</code> model like this:</p>\n\n<pre><code>from django.db import models\n\n\nclass Person(models.Model):\n    name = models.CharField(max_length=128)\n\n\nclass Group(models.Model):\n    name = models.CharField(max_length=128)\n    members = models.ManyToManyField(Person, through='Membership')\n\n\nclass Membership(models.Model):\n    person = models.ForeignKey(Person)\n    group = models.ForeignKey(Group)\n    date_joined = models.DateField()\n    invite_reason = models.CharField(max_length=64)\n</code></pre>\n\n<p>Check out docs for <a href=\"https://docs.djangoproject.com/en/1.9/topics/db/models/#extra-fields-on-many-to-many-relationships\" rel=\"nofollow\">extra fields on many to many</a></p>\n\n<p>Also, if you are going for a standard integer auto-increment primary key, django already generates one for you so you don't need to define <code>id_A</code> and <code>id_B</code>.</p>\n"}], "owner": {"reputation": 181, "user_id": 5929199, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wBaZz.jpg?s=128&g=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/5929199/hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2049, "favorite_count": 0, "accepted_answer_id": 38234088, "answer_count": 3, "score": 0, "last_activity_date": 1467840736, "creation_date": 1467837033, "question_id": 38233230, "link": "https://stackoverflow.com/questions/38233230/two-foreign-key-in-the-same-model-from-two-different-model", "title": "Two foreign key in the same model from two different model", "body": "<p>I need to put two Foreign Keys in a model class from two different models. I would like to relate the third model class to the first and the second. </p>\n\n<p>I've tried something like this:</p>\n\n<pre><code>class A (models.Model)\n    id_A = models.IntergerField (primary_key=True)\n    #...\n\n    class B (models.Model)\n     id_B = models.IntergerField (primary_key=True)\n    #...\n\n    class C (models.Model)\n      id_A = models.ForeignKey(A)\n      id_B = models.ForeignKey(B)\n</code></pre>\n\n<p>Reading the docs I understand that is not possible to have <a href=\"https://code.djangoproject.com/wiki/MultipleColumnPrimaryKeys\" rel=\"nofollow\">MultipleColumnPrimaryKeys</a>... but I Didn't receive any error from django with this models.py</p>\n\n<p>Is it possible? Is there a smarter way?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "data-structures", "moving-average"], "comments": [{"owner": {"reputation": 500, "user_id": 1910527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2Yh9l.jpg?s=128&g=1", "display_name": "Copy and Paste", "link": "https://stackoverflow.com/users/1910527/copy-and-paste"}, "edited": false, "score": 1, "creation_date": 1467837145, "post_id": 38233189, "comment_id": 63888143, "body": "What will be consuming this data once sorted? One, two, multiple processes? Perhaps a database would be appropriate."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1467837999, "post_id": 38233189, "comment_id": 63888568, "body": "Pandas is very efficient if all your data fits into memory - it&#39;s not clear though why do you need <code>rolling window</code> functions. Can you post desired data set?"}, {"owner": {"reputation": 1135, "user_id": 3754101, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/D1eNN.jpg?s=128&g=1", "display_name": "enaJ", "link": "https://stackoverflow.com/users/3754101/enaj"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1467839011, "post_id": 38233189, "comment_id": 63889073, "body": "@MaxU, and Copy and Paste, after sorted, I want to calculate the average degree of edges and nodes in a one-day time window. The average degree of edges and nodes is defined as degree = total edges / total nodes. That is why I talked about the rolling window functions."}], "answers": [{"comments": [{"owner": {"reputation": 1135, "user_id": 3754101, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/D1eNN.jpg?s=128&g=1", "display_name": "enaJ", "link": "https://stackoverflow.com/users/3754101/enaj"}, "edited": false, "score": 0, "creation_date": 1468010229, "post_id": 38233799, "comment_id": 63969345, "body": "You are right that this problem should be solved using an efficient insertion sort related data structure. But after an exclusive search of all the possible data structures that can do the job, I felt the python heapq should be the best one, since it can maintain insert, delete better for a stream data."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 1135, "user_id": 3754101, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/D1eNN.jpg?s=128&g=1", "display_name": "enaJ", "link": "https://stackoverflow.com/users/3754101/enaj"}, "edited": false, "score": 0, "creation_date": 1468013360, "post_id": 38233799, "comment_id": 63970602, "body": "Then heapq it should be. You&#39;ll get no argument from me -- I just mentioned some options I&#39;ve heard of."}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 1, "last_activity_date": 1467839318, "last_edit_date": 1495542887, "creation_date": 1467839318, "answer_id": 38233799, "question_id": 38233189, "link": "https://stackoverflow.com/questions/38233189/efficient-data-structure-for-storing-timestamp-data-calculating-in-a-rolling-w/38233799#38233799", "title": "Efficient data structure for storing timestamp data &amp; calculating in a rolling window", "body": "<p>The tweets can be expected to be mostly sorted, so a sequence type with <a href=\"https://stackoverflow.com/q/220044/699305\">insertion sort</a> should be a good way to get them ordered. Add a rolling window to replace the oldest ones after you reach 24 hours.</p>\n\n<p>For efficient insertions, you'll want a sequence type with better insertion support than <code>list</code>. I'd give <a href=\"https://pypi.python.org/pypi/blist/?\" rel=\"nofollow noreferrer\"><code>blist</code></a> a try. In fact it provides a <code>sortedlist</code> type, so you could try that out and see what kind of performance it achieves.</p>\n\n<p>This all assumes that your stream doesn't grow too fast to keep a whole day's tweets in memory. If it does, you'll <em>have</em> to delegate to some kind of database.</p>\n"}, {"comments": [{"owner": {"reputation": 1135, "user_id": 3754101, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/D1eNN.jpg?s=128&g=1", "display_name": "enaJ", "link": "https://stackoverflow.com/users/3754101/enaj"}, "edited": false, "score": 0, "creation_date": 1468010012, "post_id": 38233950, "comment_id": 63969251, "body": "Thanks. This may work well for normal time series data operation, but not efficient enough to do a stream data."}, {"owner": {"reputation": 6433, "user_id": 901444, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nAQoU.jpg?s=128&g=1", "display_name": "slashdottir", "link": "https://stackoverflow.com/users/901444/slashdottir"}, "edited": false, "score": 0, "creation_date": 1495205706, "post_id": 38233950, "comment_id": 75170320, "body": "don&#39;t see any usage of pd?"}, {"owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "edited": false, "score": 0, "creation_date": 1495403038, "post_id": 38233950, "comment_id": 75224331, "body": "Thanks slashdottir I removed it. Pandas is necessary to create the dataframe df."}], "tags": [], "owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "is_accepted": false, "score": 1, "last_activity_date": 1495402913, "last_edit_date": 1495402913, "creation_date": 1467839992, "answer_id": 38233950, "question_id": 38233189, "link": "https://stackoverflow.com/questions/38233189/efficient-data-structure-for-storing-timestamp-data-calculating-in-a-rolling-w/38233950#38233950", "title": "Efficient data structure for storing timestamp data &amp; calculating in a rolling window", "body": "<p>I would use pandas. Here is an example implementation which sorts out timestamps based on a window. You would need to copy your data into a dataframe first.</p>\n\n<pre><code>import datetime\nimport dateutil.relativedelta\n\ndays_back = 1\ndatetimeFormat = '%Y-%m-%d %H:%M:%S'\ndt_now = datetime.datetime.now()\nstart_date = dt_now - dateutil.relativedelta.relativedelta(days=days_back)\nstart_date = start_date.strftime(datetimeFormat)\ndf2 = df[df['time_stamp'] &gt; start_date]\n</code></pre>\n"}], "owner": {"reputation": 1135, "user_id": 3754101, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/D1eNN.jpg?s=128&g=1", "display_name": "enaJ", "link": "https://stackoverflow.com/users/3754101/enaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1215, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1495402913, "creation_date": 1467836887, "last_edit_date": 1495542387, "question_id": 38233189, "link": "https://stackoverflow.com/questions/38233189/efficient-data-structure-for-storing-timestamp-data-calculating-in-a-rolling-w", "title": "Efficient data structure for storing timestamp data &amp; calculating in a rolling window", "body": "<p>I have a large Twitter data stream, and I am interested in analyzing the relationships of hashtags in each tweet. For example, if hashtag A and hashtag B appear in the same tweet, I would record this tweet as \"A-B\" together with the timestamp of the tweet. </p>\n\n<p>As such, sample inputs are:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>hashtags,       Timestamp \nA-B,     created_time: 2016-04-07T01:33:19Z \nB-C,     created_time: 2016-04-07T03:53:19Z \nC,       created_time: 2016-04-08T03:31:19Z\nC-A,     created_time: 2016-04-08T04:33:19Z \nA-D,     created_time: 2016-04-07T07:33:19Z  # (Note: an example of out of order)\nB-D,     created_time: 2016-04-09T09:33:19Z\n</code></pre>\n\n<p>Note that the stream data might not be ordered by time.</p>\n\n<p>Tasks: \n1) Use the stream data to build a graph of hashtags (A, B, C, C...) and their relationship with one another.\n2) Calculate the average degree of a vertex in a graph and update this each time a new stream data appears (across a one-day sliding window).</p>\n\n<p>The average degree of a vertex is defined as: degree = number of edges/number of nodes. For example, if the current graph is A-B, then the average degree = 1(edge)/2 (# of nodes).  </p>\n\n<p>Sample outputs:</p>\n\n<pre><code>Output\n1/2,\n2/3,\n1/2,\n1/2,\n2/3,\n1/2\n</code></pre>\n\n<p>What is the most efficient Python data structure to store a such timestamp data in order to calculate the average degree of vertex in a one-day rolling window?*</p>\n\n<p>My intuition is to use a dictionary to store and maintain the hashtags as key, and the <code>created_time</code> as values. So in order to maintain a one-day window, I need to first sort the dictionary, which takes lots of time. Is there a more efficient way to automatically store the timestamp data based on time (no need for sort)? </p>\n\n<p>I found posts using the Pandas <code>DataFrame</code> and rolling functions to do the similar tasks. But in my case, I am looking for a most efficient <em>data structure</em> to do the task.</p>\n\n<p>Updates:\nAfter more research about my question, I found this question is a good match to mine. \n<a href=\"https://stackoverflow.com/questions/19276592/ideal-data-structure-with-fast-lookup-fast-update-and-easy-comparison-sorting\">Ideal data structure with fast lookup, fast update and easy comparison/sorting</a></p>\n\n<p>The key idea is to use <code>[heapq][2]</code></p>\n"}, {"tags": ["python", "multithreading"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 6548496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd1b1dc35a715c7e4012c40f94efcc45?s=128&d=identicon&r=PG&f=1", "display_name": "user00", "link": "https://stackoverflow.com/users/6548496/user00"}, "is_accepted": false, "score": 0, "last_activity_date": 1467853374, "creation_date": 1467853374, "answer_id": 38236147, "question_id": 38233184, "link": "https://stackoverflow.com/questions/38233184/python-multithreads-for-calling-the-same-function-to-run-in-parallel-and-indep/38236147#38236147", "title": "Python - Multithreads for calling the same function to run in parallel and independently", "body": "<p>I have found a solution to my problem. I was using the pool without necessity.\nIt is much simpler to just use the threading.Timer() function, as shown below:</p>\n\n<pre><code>t = threading.Timer(time_delay, send_up, [pkt_recv_raw, id_pkt])    \nt.start()\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6548496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd1b1dc35a715c7e4012c40f94efcc45?s=128&d=identicon&r=PG&f=1", "display_name": "user00", "link": "https://stackoverflow.com/users/6548496/user00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467853374, "creation_date": 1467836875, "last_edit_date": 1467838507, "question_id": 38233184, "link": "https://stackoverflow.com/questions/38233184/python-multithreads-for-calling-the-same-function-to-run-in-parallel-and-indep", "title": "Python - Multithreads for calling the same function to run in parallel and independently", "body": "<p>I'm new in Python and I'm struggling a lot trying to solve a problem. I have three programs running. One of them has the objective to send data, the other to receive and the third one works in the middle (transparently). The difficulty is happening with this third one, which I'm calling delay_loss.py.</p>\n\n<p>It has to emulate delay of packets before delivering them to the receiving program.</p>\n\n<p>Searching a lot I have found a solution (multithreading), which I'm not sure is the best one. Since delay_loss.py can receive a lot of packets \"at once\" and has to select for each a random time to emulate a delay in the network, I have to be able to send each packet to the receiving program after the random time selected for this packet, independently of the others.</p>\n\n<p>I'm trying to use multithread for this, and I think I'm not using it correctly because all the packets are sent at the same time after some time. The threads seem to not be running the function send_up() independently.</p>\n\n<p>Part of the code of delay_loss.py is shown below:</p>\n\n<pre><code>import threading\nimport time\nfrom multiprocessing.dummy import Pool as ThreadPool\n...\npool = ThreadPool(window_size)\ndef send_up (pkt, time_delay, id_pkt):\n\n    time.sleep(time_delay)\n\n    sock_server.sendto(pkt, (C_IP, C_PORT))\n\ndef delay_pkt(pkt_recv_raw, rtt, average_delay, id_pkt):\n\n    x = random.expovariate(1/average_delay)          \n    time_delay = rtt/(2+x) \n\n    pool.apply_async(send_up, [pkt_recv_raw, time_delay, id_pkt])\n\n...\ndelay_pkt(pkt_recv_raw, rtt, average_delay, id_pkt_recv)\nid_pkt_recv += 1\n</code></pre>\n\n<p>If anyone has some idea of what am I doing wrong. Or just to say don't take this approach of multithreads for doing this task, it would be of much help!</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "nltk"], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 5452001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e35dde228ef7bb4a9cf637672a7c5819?s=128&d=identicon&r=PG", "display_name": "42piratas", "link": "https://stackoverflow.com/users/5452001/42piratas"}, "edited": false, "score": 0, "creation_date": 1467841435, "post_id": 38233647, "comment_id": 63890179, "body": "I could create a dataset with the frequency of each word by POS in a certain corpus, then use it as a reference, right? I was wondering, though, if we don&#39;t have already a easier way to do the same."}, {"owner": {"reputation": 124, "user_id": 6509033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d84a947bb457d7d27dd25b08c5a36df8?s=128&d=identicon&r=PG&f=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/6509033/clay"}, "reply_to_user": {"reputation": 393, "user_id": 5452001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e35dde228ef7bb4a9cf637672a7c5819?s=128&d=identicon&r=PG", "display_name": "42piratas", "link": "https://stackoverflow.com/users/5452001/42piratas"}, "edited": false, "score": 0, "creation_date": 1467913204, "post_id": 38233647, "comment_id": 63924939, "body": "@Alexis saw what you were trying to do!  As their answer shows, the corpora in nltk.corpus have a <code>tagged_words()</code> method that is what you are looking for, along with the <code>ConditionalFreqDist</code> object."}], "tags": [], "owner": {"reputation": 124, "user_id": 6509033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d84a947bb457d7d27dd25b08c5a36df8?s=128&d=identicon&r=PG&f=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/6509033/clay"}, "is_accepted": false, "score": 2, "last_activity_date": 1467838947, "last_edit_date": 1495542715, "creation_date": 1467838614, "answer_id": 38233647, "question_id": 38233145, "link": "https://stackoverflow.com/questions/38233145/nltk-most-common-synonym-wordnet-for-each-word/38233647#38233647", "title": "NLTK Most common synonym (Wordnet) for each word", "body": "<p>Synonyms are a huge and open area of work in natural language processing.  </p>\n\n<p>In your example, how is the program supposed to know what the allowed synonyms are?  One method might be to keep a dictionary of sets of synonyms for each word.  However, this can run into problems due to overlaps in <strong>parts of speech</strong>: \"dear\" is an adjective, but \"valued\" can be an adjective or a past-tense verb.  </p>\n\n<p>Context is also important: the bigram \"dear friend\" might be more common than \"valued friend\", but \"valued customer\" would be more common than \"dear customer\".  So, the <strong>sense</strong> of a given word needs to be accounted for too.</p>\n\n<p>Another method might be to just look at everything and see what words appear in similar contexts.  You need a <em>huge</em> <strong>corpus</strong> for this to be effective though, and you have to decide how large a window of <strong>n-grams</strong> you want to use (a bigram context? A 20-gram context?).</p>\n\n<p>I recommend you take a look at applications of <strong>WordNet</strong> (<a href=\"https://wordnet.princeton.edu/\" rel=\"nofollow noreferrer\">https://wordnet.princeton.edu/</a>), which was designed to help figure some of these things out.  Unfortunately, I'm not sure you'll find a way to \"solve\" synonyms on your own, but keep looking and asking questions!</p>\n\n<p><strong>Edit</strong>: I should have included this link to an older question as well: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/19258652/how-to-get-synonyms-from-nltk-wordnet-python\">How to get synonyms from nltk WordNet Python</a></p>\n\n<p>And the NLTK documentation on its interface with WordNet:</p>\n\n<p><a href=\"http://www.nltk.org/howto/wordnet.html\" rel=\"nofollow noreferrer\">http://www.nltk.org/howto/wordnet.html</a></p>\n\n<p>I don't think these address your question, however, since WordNet doesn't have usage statistics (which are dependent on the corpus you use).  You should be able to apply its synsets in a method like above, though.</p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 5452001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e35dde228ef7bb4a9cf637672a7c5819?s=128&d=identicon&r=PG", "display_name": "42piratas", "link": "https://stackoverflow.com/users/5452001/42piratas"}, "edited": false, "score": 0, "creation_date": 1467841677, "post_id": 38234243, "comment_id": 63890289, "body": "Thank you, @Ares. As I mentioned in the other answer, I was wandering if we don&#39;t have already an easy way to do that, but apparently we don&#39;t. I might create a dataset with frequency of words/POS from a certain corpus and then use it as reference."}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "reply_to_user": {"reputation": 393, "user_id": 5452001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e35dde228ef7bb4a9cf637672a7c5819?s=128&d=identicon&r=PG", "display_name": "42piratas", "link": "https://stackoverflow.com/users/5452001/42piratas"}, "edited": false, "score": 1, "creation_date": 1467841799, "post_id": 38234243, "comment_id": 63890336, "body": "As @Clay mentioned, you may also consider storing pairs of words as well as the words themselves. You&#39;ll find that this quickly becomes a massive database. FWIW, I conceived and wrote this solution in a day or so. Not as daunting as it seems."}], "tags": [], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "is_accepted": false, "score": 0, "last_activity_date": 1467841234, "creation_date": 1467841234, "answer_id": 38234243, "question_id": 38233145, "link": "https://stackoverflow.com/questions/38233145/nltk-most-common-synonym-wordnet-for-each-word/38234243#38234243", "title": "NLTK Most common synonym (Wordnet) for each word", "body": "<p>The other answer shows you how to use synonyms:</p>\n\n<blockquote>\n<pre><code>wn.synsets('small')\n[Synset('small.n.01'),\n Synset('small.n.02'),\n Synset('small.a.01'),\n Synset('minor.s.10'),\n Synset('little.s.03'),\n Synset('small.s.04'),\n Synset('humble.s.01'),\n Synset('little.s.07'),\n Synset('little.s.05'),\n Synset('small.s.08'),\n Synset('modest.s.02'),\n Synset('belittled.s.01'),\n Synset('small.r.01')]\n</code></pre>\n</blockquote>\n\n<p>You now know how to get all the synonyms for a word. That's not the hard part. The hard part is determining what's the most common synonym. This question is <em>highly domain dependent.</em> Most common synonym where? In literature? In common vernacular? In technical speak? </p>\n\n<p>Like you, I wanted to get an idea of how the English language was used. I downloaded 15,000 entire books from (<a href=\"http://gutenberg.org\" rel=\"nofollow\">Project Gutenberg</a>) and processed the word and letter pair frequencies on all of them. After ingesting such a large corpus, I could see which words were used most commonly. Like I said above, though, it will depend on what you're trying to process. If it's something like Twitter posts, try ingesting a ton of tweets. Learn from what you have to eventually process.</p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 5452001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e35dde228ef7bb4a9cf637672a7c5819?s=128&d=identicon&r=PG", "display_name": "42piratas", "link": "https://stackoverflow.com/users/5452001/42piratas"}, "edited": false, "score": 0, "creation_date": 1467844930, "post_id": 38234480, "comment_id": 63891464, "body": "That&#39;s exactly what was thinking about, @alexis! Thank you very much!"}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": true, "score": 6, "last_activity_date": 1467842340, "creation_date": 1467842340, "answer_id": 38234480, "question_id": 38233145, "link": "https://stackoverflow.com/questions/38233145/nltk-most-common-synonym-wordnet-for-each-word/38234480#38234480", "title": "NLTK Most common synonym (Wordnet) for each word", "body": "<p>Synonyms are tricky, but if you are starting out with a synset from Wordnet and you simply want to choose the most common member in the set, it's pretty straightforward: Just build your own frequency list from a corpus, and look up each member of the synset to pick the maximum.</p>\n\n<p>The nltk will let you build a frequency table in just a few lines of code. Here's one based on the Brown corpus:</p>\n\n<pre><code>from nltk.corpus import brown\nfreqs = nltk.FreqDist(w.lower() for w in brown.words())\n</code></pre>\n\n<p>You can then look up the frequency of a word like this:</p>\n\n<pre><code>&gt;&gt;&gt; print(freqs[\"valued\"]) \n14\n</code></pre>\n\n<p>Of course you'll need to do a little more work: I would count words separately for each of the major parts of speech (wordnet provides <code>n</code>, <code>v</code>, <code>a</code>, and <code>r</code>, resp. <code>noun</code>, <code>verb</code>, <code>adjective</code> and <code>adverb</code>), and use these POS-specific frequencies (after adjusting for the different tagset notations) to choose the right substitute. </p>\n\n<pre><code>&gt;&gt;&gt; freq2 = nltk.ConditionalFreqDist((tag, wrd.lower()) for wrd, tag in \n        brown.tagged_words(tagset=\"universal\"))\n\n&gt;&gt;&gt; print(freq2[\"ADJ\"][\"valued\"])\n0\n&gt;&gt;&gt; print(freq2[\"ADJ\"][\"dear\"])\n45\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 5452001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e35dde228ef7bb4a9cf637672a7c5819?s=128&d=identicon&r=PG", "display_name": "42piratas", "link": "https://stackoverflow.com/users/5452001/42piratas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7083, "favorite_count": 5, "accepted_answer_id": 38234480, "answer_count": 3, "score": 6, "last_activity_date": 1594656544, "creation_date": 1467836761, "question_id": 38233145, "link": "https://stackoverflow.com/questions/38233145/nltk-most-common-synonym-wordnet-for-each-word", "title": "NLTK Most common synonym (Wordnet) for each word", "body": "<p>Is there a way to find the most common synonym of a word with NLTK? I would like to simplify a sentence using the most common synonyms of each word on it. </p>\n\n<p>If a word used in the sentence is already the most common word from its group of synonyms, it shouldn't be changed. </p>\n\n<p>Let's say \"Hi\" is more common than \"Hello\"; \"Dear\" is more common than \"Valued\"; and \"Friend\" is already the most common word of its group os synonyms. </p>\n\n<pre><code>Input: \"Hello my valued friend\"\nReturn: \"Hi my dear friend\"\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1467836695, "post_id": 38233057, "comment_id": 63887898, "body": "Will the list always be sorted? When you say <i>&quot;nearest minimum&quot;</i> do you just mean the largest number smaller than the input, or does the delta actually matter?"}, {"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 1, "creation_date": 1467837449, "post_id": 38233057, "comment_id": 63888300, "body": "What if the value is equal to the entry in the list? Should we go to the next biggest or return the equal number?"}, {"owner": {"reputation": 6902, "user_id": 3148478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cfb54292261fde31574e100a1f7d66c?s=128&d=identicon&r=PG&f=1", "display_name": "woot", "link": "https://stackoverflow.com/users/3148478/woot"}, "edited": false, "score": 0, "creation_date": 1467854977, "post_id": 38233057, "comment_id": 63894122, "body": "Based on his example, I would say that we don&#39;t know for sure if it is sorted (possibly not since his answer works without sorting). I would also say that based on his answer, he&#39;s looking for equal matches."}], "answers": [{"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1467836637, "post_id": 38233093, "comment_id": 63887858, "body": "It certainly doesn&#39;t give the right answer."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 1, "creation_date": 1467836709, "post_id": 38233093, "comment_id": 63887910, "body": "@marcusshep that makes no difference"}, {"owner": {"reputation": 8845, "user_id": 160511, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e1673c17602446801778189a291f2f24?s=128&d=identicon&r=PG&f=1", "display_name": "Wells", "link": "https://stackoverflow.com/users/160511/wells"}, "edited": false, "score": 0, "creation_date": 1467836814, "post_id": 38233093, "comment_id": 63887958, "body": "max rather than min of course, fixed it."}, {"owner": {"reputation": 6902, "user_id": 3148478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cfb54292261fde31574e100a1f7d66c?s=128&d=identicon&r=PG&f=1", "display_name": "woot", "link": "https://stackoverflow.com/users/3148478/woot"}, "edited": false, "score": 0, "creation_date": 1467840302, "post_id": 38233093, "comment_id": 63889700, "body": "You mean... <code>max(v for v in a if v &lt;= b)</code> but this is a linear search."}], "tags": [], "owner": {"reputation": 8845, "user_id": 160511, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e1673c17602446801778189a291f2f24?s=128&d=identicon&r=PG&f=1", "display_name": "Wells", "link": "https://stackoverflow.com/users/160511/wells"}, "is_accepted": false, "score": -2, "last_activity_date": 1467836719, "last_edit_date": 1467836719, "creation_date": 1467836538, "answer_id": 38233093, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233093#38233093", "title": "python recipe: list item nearest equal to value", "body": "<p>Well, <code>a</code> is the list and <code>b</code> the value:</p>\n\n<pre><code>max(a for a in a if a &lt;= b)\n</code></pre>\n\n<p>More efficient way? Probably not?</p>\n"}, {"tags": [], "owner": {"reputation": 1423, "user_id": 6447429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/371beb048a08cb51a13677a50a5948c1?s=128&d=identicon&r=PG&f=1", "display_name": "James Tanner", "link": "https://stackoverflow.com/users/6447429/james-tanner"}, "is_accepted": false, "score": 0, "last_activity_date": 1467836648, "creation_date": 1467836648, "answer_id": 38233116, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233116#38233116", "title": "python recipe: list item nearest equal to value", "body": "<p>There's a couple options here.</p>\n\n<p>The simplest would be to iterate over the array and stop when a) you've reached the end of the array OR b) the value at the current position is larger than the one you're looking for. Then simply return the last value found. (One edge case to consider: what happens if the number requested is smaller than ALL values of the array?)</p>\n\n<p>This solution assumes that the array is ordered. If not, it will not work.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2276185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gRIC7.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2276185/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1467836769, "creation_date": 1467836769, "answer_id": 38233148, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233148#38233148", "title": "python recipe: list item nearest equal to value", "body": "<p>If your list is small, iterating through it is the best bet. You'll avoid some overhead, plus there's no point in over-engineering this task. If you want your code to be a bit more \"correct\", or if you want this to scale well on larger inputs, I'd recommend a binary search approach. This is, of course, assuming that your input is guaranteed to be sorted. If unsorted, you have no choice other than to iterate through the values while keeping track of a delta. Here's a relatively high-level explanation of the binary search strategy:</p>\n\n<ol>\n<li>Do a binary search</li>\n<li>If equal to the value you were searching for, return the value at the previous index.</li>\n<li>If less than the value, return that index.</li>\n<li>If greater than the value, return the previous index.</li>\n</ol>\n\n<p>It might help to run through a few examples to prove to yourself that this will work. </p>\n"}, {"tags": [], "owner": {"reputation": 24435, "user_id": 3191896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVtnn.png?s=128&g=1", "display_name": "Jossef Harush", "link": "https://stackoverflow.com/users/3191896/jossef-harush"}, "is_accepted": false, "score": 0, "last_activity_date": 1467837557, "last_edit_date": 1467837557, "creation_date": 1467837164, "answer_id": 38233268, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233268#38233268", "title": "python recipe: list item nearest equal to value", "body": "<p>You can use <code>yield</code> and <code>next()</code> to avoid iterating the whole list</p>\n\n<p><strong>Online Demo - <a href=\"https://repl.it/C9YJ/1\" rel=\"nofollow\">https://repl.it/C9YJ/1</a></strong></p>\n\n<pre><code>values = [0,3,7,10,12,15,19,21]\n\ndef get_closest(value, items):\n\n    previews_item = None\n    for item in items:\n        if item &gt;= value:\n            yield previews_item\n\n        previews_item = max(item, previews_item) if previews_item else item\n\n    yield None\n\n\nprint next(get_closest(4, values))\n# 3\n\nprint next(get_closest(18, values))\n# 15\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "is_accepted": false, "score": 0, "last_activity_date": 1467837780, "last_edit_date": 1467837780, "creation_date": 1467837310, "answer_id": 38233304, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233304#38233304", "title": "python recipe: list item nearest equal to value", "body": "<p>Really messy and probably inefficient solution but it works</p>\n\n<pre><code>test=[0,3,7,10,12,15,19,21]\nvalue=25\nnearest=[]\nfor i in test:\n    if i == value:\n        nearest.append(test[(test.index(i))])\n        break\n    if i&gt;value:\n        nearest.append(test[(test.index(i))-1])\n        break\nif len(nearest) == 0:\n    nearest.append(test[-1])\n\nprint nearest[0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6902, "user_id": 3148478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cfb54292261fde31574e100a1f7d66c?s=128&d=identicon&r=PG&f=1", "display_name": "woot", "link": "https://stackoverflow.com/users/3148478/woot"}, "is_accepted": false, "score": 3, "last_activity_date": 1467837870, "creation_date": 1467837870, "answer_id": 38233475, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233475#38233475", "title": "python recipe: list item nearest equal to value", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/bisect.html\" rel=\"nofollow\">bisect</a> which isn't too difficult. It's used for binary searching like this. This does assume a sorted list.</p>\n\n<pre><code>from bisect import bisect_right\n\ndef find_le(a, x):\n    'Find rightmost value less than or equal to x'\n    i = bisect_right(a, x)\n    if i:\n        return a[i-1]\n    raise ValueError\n\nmylist = [0,3,7,10,12,15,19,21]\nprint find_le(mylist,4)\nprint find_le(mylist,-1)\nprint find_le(mylist,29)\nprint find_le(mylist,12)\n</code></pre>\n\n<p>Running interactive: </p>\n\n<pre><code>&gt;&gt;&gt; print find_le(mylist,4)\n3\n&gt;&gt;&gt; print find_le(mylist,-1)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;stdin&gt;\", line 6, in find_le\nValueError\n&gt;&gt;&gt; print find_le(mylist,29)\n21\n&gt;&gt;&gt; print find_le(mylist,12)\n12\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1467849188, "post_id": 38233479, "comment_id": 63892756, "body": "While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value."}, {"owner": {"reputation": 371, "user_id": 6107026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ced6fec5fb42ca2d5ab5cd157e3bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/6107026/joe"}, "reply_to_user": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1467851502, "post_id": 38233479, "comment_id": 63893344, "body": "Thanks for your feedback, Ajean! I shall comment on my own code and hopefully I can add some value."}], "tags": [], "owner": {"reputation": 371, "user_id": 6107026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ced6fec5fb42ca2d5ab5cd157e3bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/6107026/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1467852355, "last_edit_date": 1467852355, "creation_date": 1467837883, "answer_id": 38233479, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233479#38233479", "title": "python recipe: list item nearest equal to value", "body": "<pre><code>x = [0,3,7,10,12,15,19,21]\nval = 18\n\nx.sort()\nclose =  [abs(_ - val) for _ in x]\nans = (x[close.index(min(close))])\nif ans &gt; val:\n    ans = (x[close.index(min(close)) -1])\nprint (ans)\n</code></pre>\n\n<p>Comments:</p>\n\n<p>(1.) We cannnot assume that the original is pre-sorted as it was not specified as such. Hence, I did an in-place sort. If the order of the list items need to be preserved, then make a copy of the list and then sort.</p>\n\n<p>(2.) There are some excellent posts using the bisect module, and using iterators. I wanted to show another way by demonstrating list comprehensions, and the use of a throw-away variable (the underscore). </p>\n\n<p>(3.) If the list is long, you should use bisect. If the list is short (specified to be no more than a few hundred), don't over-engineer the code; linear search is fine. Just remember in software, you are always juggling between, time vs. space, readability, maintainability, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1467837965, "creation_date": 1467837965, "answer_id": 38233497, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value/38233497#38233497", "title": "python recipe: list item nearest equal to value", "body": "<p>using bisect. <br>\none problem: code will give last element once checking number is smaller than first element in list</p>\n\n<pre><code>import bisect\nlst = [0, 3, 7, 10, 12, 15, 19, 21]\nlst[bisect.bisect_left(lst,-1) - 1]\n</code></pre>\n"}], "owner": {"reputation": 8845, "user_id": 160511, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e1673c17602446801778189a291f2f24?s=128&d=identicon&r=PG&f=1", "display_name": "Wells", "link": "https://stackoverflow.com/users/160511/wells"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1468193063, "answer_count": 8, "score": 3, "last_activity_date": 1467852355, "creation_date": 1467836428, "question_id": 38233057, "link": "https://stackoverflow.com/questions/38233057/python-recipe-list-item-nearest-equal-to-value", "closed_reason": "Needs more focus", "title": "python recipe: list item nearest equal to value", "body": "<p>Considering a list like <code>[0,3,7,10,12,15,19,21]</code>, I want to get the nearest minimum digit closest to any value, so if I pass <code>4</code>, I would get <code>3</code>, and if I pass <code>18</code>, I would get <code>15</code>, etc.</p>\n"}, {"tags": ["python", "tensorflow", "recurrent-neural-network", "gated-recurrent-unit"], "answers": [{"comments": [{"owner": {"reputation": 4242, "user_id": 2745266, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hvvbS.jpg?s=128&g=1", "display_name": "exAres", "link": "https://stackoverflow.com/users/2745266/exares"}, "edited": false, "score": 0, "creation_date": 1467837615, "post_id": 38233213, "comment_id": 63888390, "body": "Wow. I thought calling <code>sess.run(init_op)</code> at the end would help regardless of where I put <code>init_op=tf.initialize_all_variables()</code>"}], "tags": [], "owner": {"reputation": 8087, "user_id": 691733, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ac5c46a75d24d0268e1b779977ad7e58?s=128&d=identicon&r=PG", "display_name": "keveman", "link": "https://stackoverflow.com/users/691733/keveman"}, "is_accepted": true, "score": 3, "last_activity_date": 1467836973, "creation_date": 1467836973, "answer_id": 38233213, "question_id": 38233056, "link": "https://stackoverflow.com/questions/38233056/how-can-i-complete-following-gru-based-rnn-written-in-tensorflow/38233213#38233213", "title": "How can I complete following GRU based RNN written in tensorflow?", "body": "<p><code>tf.initialize_all_variables()</code> gets the \"current\" set of variables from the graph. Since you are creating <code>softmax_w</code> and <code>softmax_b</code> after your call to <code>tf.initialize_all_variables()</code>, they are not in the list that <code>tf.initialize_all_variables()</code> consults, and hence not initialized when you run <code>sess.run(init_op)</code>. The following should work :</p>\n\n<pre><code>softmax_w = tf.get_variable(\"softmax_w\", [hidden_size, 1], )\nsoftmax_b = tf.get_variable(\"softmax_b\", [1])\n\ninit_op = tf.initialize_all_variables()\n</code></pre>\n"}], "owner": {"reputation": 4242, "user_id": 2745266, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hvvbS.jpg?s=128&g=1", "display_name": "exAres", "link": "https://stackoverflow.com/users/2745266/exares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 38233213, "answer_count": 1, "score": 0, "last_activity_date": 1467836973, "creation_date": 1467836424, "question_id": 38233056, "link": "https://stackoverflow.com/questions/38233056/how-can-i-complete-following-gru-based-rnn-written-in-tensorflow", "title": "How can I complete following GRU based RNN written in tensorflow?", "body": "<p>So far I have written following code:</p>\n\n<pre><code>import pickle\nimport numpy as np\nimport pandas as pd\nimport tensorflow as tf\n\n# load pickled objects (x and y)\nx_input, y_actual = pickle.load(open('sample_input.pickle', 'rb'))\nx_input = np.reshape(x_input, (50, 1))\ny_actual = np.reshape(y_actual, (50, 1))\n\n# parameters\nbatch_size = 50\nhidden_size = 100\n\n# create network graph\ninput_data = tf.placeholder(tf.float32, [batch_size, 1])\noutput_data = tf.placeholder(tf.float32, [batch_size, 1])\n\ncell = tf.nn.rnn_cell.GRUCell(hidden_size)\n\ninitial_state = cell.zero_state(batch_size, tf.float32)\n\nhidden_state = initial_state\n\noutput_of_cell, hidden_state = cell(inputs=input_data, state=hidden_state)\n\ninit_op = tf.initialize_all_variables()\n\nsoftmax_w = tf.get_variable(\"softmax_w\", [hidden_size, 1], )\nsoftmax_b = tf.get_variable(\"softmax_b\", [1])\n\nlogits = tf.matmul(output_of_cell, softmax_w) + softmax_b\n\nprobabilities = tf.nn.softmax(logits)\n\nsess = tf.Session()\nsess.run(init_op)\n\nsomething = sess.run([probabilities, hidden_state], feed_dict={input_data:x_input, output_data:y_actual})\n\n#cost = tf.nn.sigmoid_cross_entropy_with_logits(logits, output_data)\n\n\n#sess.close()\n</code></pre>\n\n<p>But I am getting error for s<code>oftmax_w/b</code> as uninitialized variables.</p>\n\n<p>I am not getting how should I use these <code>W</code> and <code>b</code> and carry out train operation.</p>\n\n<p>Something like following:</p>\n\n<pre><code>## some cost function\n## training operation minimizing cost function using gradient descent optimizer\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "numpy", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 5002, "user_id": 1479974, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4cea72bb02e8c58be163b707022245a4?s=128&d=identicon&r=PG", "display_name": "chintan s", "link": "https://stackoverflow.com/users/1479974/chintan-s"}, "edited": false, "score": 0, "creation_date": 1467837465, "post_id": 38233073, "comment_id": 63888311, "body": "I tried this but it does not work. <code>df = pd.read_csv(&quot;train.csv&quot;, header = None, na_values=&#39;?&#39;)</code> The output is of <code>df.ix[0,]</code> still shows <code>?</code>"}, {"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "reply_to_user": {"reputation": 5002, "user_id": 1479974, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4cea72bb02e8c58be163b707022245a4?s=128&d=identicon&r=PG", "display_name": "chintan s", "link": "https://stackoverflow.com/users/1479974/chintan-s"}, "edited": false, "score": 0, "creation_date": 1467837575, "post_id": 38233073, "comment_id": 63888361, "body": "Is there <code>?</code> only? Maybe there is some space."}, {"owner": {"reputation": 5792, "user_id": 5907870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DKVw5.jpg?s=128&g=1", "display_name": "shivsn", "link": "https://stackoverflow.com/users/5907870/shivsn"}, "edited": false, "score": 1, "creation_date": 1467837686, "post_id": 38233073, "comment_id": 63888424, "body": "try adding <code>skipintialspace=True</code>."}, {"owner": {"reputation": 5002, "user_id": 1479974, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4cea72bb02e8c58be163b707022245a4?s=128&d=identicon&r=PG", "display_name": "chintan s", "link": "https://stackoverflow.com/users/1479974/chintan-s"}, "edited": false, "score": 0, "creation_date": 1467837918, "post_id": 38233073, "comment_id": 63888545, "body": "@jezrael Not that I can see. The data is from here <a href=\"https://archive.ics.uci.edu/ml/datasets/Census-Income+%28KDD%29\" rel=\"nofollow noreferrer\">archive.ics.uci.edu/ml/datasets/Census-Income+%28KDD%29</a>"}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 3, "last_activity_date": 1467838604, "last_edit_date": 1495542151, "creation_date": 1467836488, "answer_id": 38233073, "question_id": 38233046, "link": "https://stackoverflow.com/questions/38233046/pandas-read-file-with-special-characters-in-a-column/38233073#38233073", "title": "Pandas: read file with special characters in a column", "body": "<p>Add parameter <code>na_values='?'</code> to <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\"><code>read_csv</code></a>.</p>\n\n<p>Sample:</p>\n\n<pre><code>import pandas as pd\nimport io\n\n\ntemp=u\"\"\"Date Time,a\n2010-01-27 16:00:00,?\n2010-01-27 16:10:00,2.2\n2010-01-27 16:30:00,1.7\"\"\"\n\ndf = pd.read_csv(io.StringIO(temp),na_values='?')\nprint (df)\n             Date Time    a\n0  2010-01-27 16:00:00  NaN\n1  2010-01-27 16:10:00  2.2\n2  2010-01-27 16:30:00  1.7\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Thank you <a href=\"https://stackoverflow.com/questions/38233046/pandas-read-file-with-special-characters-in-a-column#comment63888424_38233073\">'shivsn'</a> for suggestion add <code>skipinitialspace=True</code>:</p>\n\n<pre><code>temp=u\"\"\"Date Time,a\n ? , ?\n? ,?\n2010-01-27 16:30:00,1.7\"\"\"\n\ndf = pd.read_csv(io.StringIO(temp),na_values=['?', '? '], skipinitialspace =True)\nprint (df)\n             Date Time    a\n0                  NaN  NaN\n1                  NaN  NaN\n2  2010-01-27 16:30:00  1.7\n</code></pre>\n\n<p>EDIT1 by file:</p>\n\n<p>It looks like there is only <code>space</code> before <code>?</code>:</p>\n\n<pre><code>df = pd.read_csv('census-income.data', \n                 header = None, \n                 na_values=['?'], \n                 skipinitialspace =True)\nprint (df)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5002, "user_id": 1479974, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4cea72bb02e8c58be163b707022245a4?s=128&d=identicon&r=PG", "display_name": "chintan s", "link": "https://stackoverflow.com/users/1479974/chintan-s"}, "edited": false, "score": 0, "creation_date": 1467838315, "post_id": 38233461, "comment_id": 63888723, "body": "This is not working as well. I have just provided the code and output."}], "tags": [], "owner": {"reputation": 5792, "user_id": 5907870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DKVw5.jpg?s=128&g=1", "display_name": "shivsn", "link": "https://stackoverflow.com/users/5907870/shivsn"}, "is_accepted": false, "score": 1, "last_activity_date": 1467838629, "last_edit_date": 1467838629, "creation_date": 1467837839, "answer_id": 38233461, "question_id": 38233046, "link": "https://stackoverflow.com/questions/38233046/pandas-read-file-with-special-characters-in-a-column/38233461#38233461", "title": "Pandas: read file with special characters in a column", "body": "<p>after reading the file use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.replace.html\" rel=\"nofollow\">replace</a> :</p>\n\n<pre><code>df.repalce('.?',np.nan,inplace=True,regex=True)\n</code></pre>\n"}], "owner": {"reputation": 5002, "user_id": 1479974, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4cea72bb02e8c58be163b707022245a4?s=128&d=identicon&r=PG", "display_name": "chintan s", "link": "https://stackoverflow.com/users/1479974/chintan-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "accepted_answer_id": 38233073, "answer_count": 2, "score": 3, "last_activity_date": 1467838629, "creation_date": 1467836390, "last_edit_date": 1467838288, "question_id": 38233046, "link": "https://stackoverflow.com/questions/38233046/pandas-read-file-with-special-characters-in-a-column", "title": "Pandas: read file with special characters in a column", "body": "<p>In the data that I have, some feature values are <code>?</code>. How do I replace them with <code>NA</code>? </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The code and output is as below:</p>\n\n<pre><code>df = pd.read_csv(\"cca-census-income.csv\", header = None)\n\ndf.replace('?', np.nan, inplace=True)\n\ndf.ix[0,]\n\n23                Other relative of householder\n24                                      1700.09\n25                                            ?\n26                                            ?\n27                                            ?\n28             Not in universe under 1 year old\n29                                            ?\n30                                            0\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pycharm", "tensorflow"], "comments": [{"owner": {"reputation": 8087, "user_id": 691733, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ac5c46a75d24d0268e1b779977ad7e58?s=128&d=identicon&r=PG", "display_name": "keveman", "link": "https://stackoverflow.com/users/691733/keveman"}, "edited": false, "score": 0, "creation_date": 1467836557, "post_id": 38233014, "comment_id": 63887816, "body": "Does running <code>python -c &quot;from six.moves import cPickle&quot;</code> from command line (inside the virtualenv) work?"}, {"owner": {"reputation": 37, "user_id": 1723929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffc2d872c4057e3f42d632d829995ef?s=128&d=identicon&r=PG", "display_name": "JoaoAntunes", "link": "https://stackoverflow.com/users/1723929/joaoantunes"}, "reply_to_user": {"reputation": 8087, "user_id": 691733, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ac5c46a75d24d0268e1b779977ad7e58?s=128&d=identicon&r=PG", "display_name": "keveman", "link": "https://stackoverflow.com/users/691733/keveman"}, "edited": false, "score": 0, "creation_date": 1467845224, "post_id": 38233014, "comment_id": 63891574, "body": "I get no output from it. I&#39;m assuming that means it works?"}, {"owner": {"reputation": 8087, "user_id": 691733, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ac5c46a75d24d0268e1b779977ad7e58?s=128&d=identicon&r=PG", "display_name": "keveman", "link": "https://stackoverflow.com/users/691733/keveman"}, "edited": false, "score": 0, "creation_date": 1467845808, "post_id": 38233014, "comment_id": 63891766, "body": "Yes. Since it works from the command line, this is not really Tensorflow specific problem. Someone from the pycharm community has to answer this."}, {"owner": {"reputation": 37, "user_id": 1723929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffc2d872c4057e3f42d632d829995ef?s=128&d=identicon&r=PG", "display_name": "JoaoAntunes", "link": "https://stackoverflow.com/users/1723929/joaoantunes"}, "reply_to_user": {"reputation": 8087, "user_id": 691733, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ac5c46a75d24d0268e1b779977ad7e58?s=128&d=identicon&r=PG", "display_name": "keveman", "link": "https://stackoverflow.com/users/691733/keveman"}, "edited": false, "score": 0, "creation_date": 1467852342, "post_id": 38233014, "comment_id": 63893550, "body": "Is there something I need to do to ask them or do I just wait for them to see this post?"}], "answers": [{"tags": [], "owner": {"reputation": 638, "user_id": 1934174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07eaff1d7dec2658b6356bea4d539ae8?s=128&d=identicon&r=PG", "display_name": "Chintalagiri Shashank", "link": "https://stackoverflow.com/users/1934174/chintalagiri-shashank"}, "is_accepted": false, "score": 0, "last_activity_date": 1468176066, "creation_date": 1468176066, "answer_id": 38295288, "question_id": 38233014, "link": "https://stackoverflow.com/questions/38233014/pycharm-cant-locate-cpickle-on-six/38295288#38295288", "title": "Pycharm Cant locate cPickle on six", "body": "<p>Pycharm has trouble with resolving names when dynamic dispatch is in play, and their tooltips on such errors say as much. While six manages to map functions to their correct py2 and py3 versions, it does so using dynamic dispatch. </p>\n\n<p>I'm not sure if the problem is a theoretical one or just an issue with the pycharm implementation, but at the very least it is a difficult problem to solve. Essentially, what function gets called is not known until it actually gets called. </p>\n\n<p>One approach you could use to still have pycharm help in these cases is to not import from six initially, and use the version provided by your python natively. Once you're done, all you should have to do is switch the imports from the 'standard' version to that provided by six.</p>\n\n<p>You get used to it. </p>\n"}], "owner": {"reputation": 37, "user_id": 1723929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffc2d872c4057e3f42d632d829995ef?s=128&d=identicon&r=PG", "display_name": "JoaoAntunes", "link": "https://stackoverflow.com/users/1723929/joaoantunes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 566, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468176066, "creation_date": 1467836256, "question_id": 38233014, "link": "https://stackoverflow.com/questions/38233014/pycharm-cant-locate-cpickle-on-six", "title": "Pycharm Cant locate cPickle on six", "body": "<p>I'm doing the udacity course on deep neural networks and I'm trying to do the assignment related to notMNIST. I installed tensorflow and six in a virtualenv and then made Pycharm recognise this virtualenv as my project interpreter.</p>\n\n<p>Tensorflow commands can now be run but in this import section:</p>\n\n<pre><code>from six.moves.urllib.request import urlretrieve\nfrom six.moves import cPickle as pickle\n</code></pre>\n\n<p>both cPickle and url retrieve can not be found.</p>\n\n<p>I updated my six inside the virtualenv, but it seems to be up to date:</p>\n\n<pre><code>(tensorflow) Joaos-MBP:~ jantunes$ pip install --upgrade six\nRequirement already up-to-date: six in /Library/Python/2.7/site-packages/six-1.10.0-py2.7.egg\n(tensorflow) Joaos-MBP:~ jantunes$ \n</code></pre>\n\n<p>How can I get pycharm to recognise the url retrieve and cPickle libraries?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "postgresql", "list", "psycopg2"], "answers": [{"tags": [], "owner": {"reputation": 97819, "user_id": 131874, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b3600796ab1d9e78c7545c91468c2e51?s=128&d=identicon&r=PG", "display_name": "Clodoaldo Neto", "link": "https://stackoverflow.com/users/131874/clodoaldo-neto"}, "is_accepted": false, "score": 1, "last_activity_date": 1467836608, "creation_date": 1467836608, "answer_id": 38233107, "question_id": 38232983, "link": "https://stackoverflow.com/questions/38232983/python-array-manipulation-from-psycopg2-postgresql-query/38233107#38233107", "title": "Python array manipulation from psycopg2 PostgreSQL query", "body": "<p>Aggregate in the query:</p>\n\n<pre><code>query = '''\n    select array_agg(distinct name)\n    from product\n'''\ncursor.execute(query)\nrs = cursor.fetchall()[0][0]\nprint rs\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['product1', 'product2', 'product3', 'product4']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1467836616, "creation_date": 1467836616, "answer_id": 38233109, "question_id": 38232983, "link": "https://stackoverflow.com/questions/38232983/python-array-manipulation-from-psycopg2-postgresql-query/38233109#38233109", "title": "Python array manipulation from psycopg2 PostgreSQL query", "body": "<p>The time needed to convert the list is negligible compared to the database query.\nBut you don't need to create a list first-hand:</p>\n\n<pre><code>cur.execute(\"SELECT DISTINCT name FROM product\")\nresult = [item for item, in cur]\nprint(result) \n</code></pre>\n"}], "owner": {"reputation": 126, "user_id": 5094445, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af1e4a676171fb3039a092b69c40853b?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Olson", "link": "https://stackoverflow.com/users/5094445/justin-olson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1482, "favorite_count": 0, "accepted_answer_id": 38233109, "answer_count": 2, "score": 1, "last_activity_date": 1467836616, "creation_date": 1467836157, "question_id": 38232983, "link": "https://stackoverflow.com/questions/38232983/python-array-manipulation-from-psycopg2-postgresql-query", "title": "Python array manipulation from psycopg2 PostgreSQL query", "body": "<p>I am using psycopg2 to do a psql query. </p>\n\n<pre><code>cur.execute(\"SELECT DISTINCT name FROM product\")\nresult = cur.fetchall()\nprint(result)\n\n[('product1',), ('product2',), ('product3',), ('product4',)]\n</code></pre>\n\n<p>I need to reformat this array to make an API endpoint. Right now it is a list of tuples where the second value of the tuple is empty. A simple loop iterating through gets the job done.</p>\n\n<pre><code>results=[]\nfor item in result:\n    results.append(item[0])\nprint(results)\n\n['product1','product2','product3','product4']\n</code></pre>\n\n<p>However this query can get rather large. And iterating through the entire list adds a delay to the query that doesn't seem necessary. Is there a way to flatten the array in constant time, or a differnt psycopg2 function that returns in the format I need?</p>\n"}, {"tags": ["python", "opencv", "machine-learning", "neural-network"], "answers": [{"tags": [], "owner": {"reputation": 9525, "user_id": 777285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I1WDv.png?s=128&g=1", "display_name": "Arnaud P", "link": "https://stackoverflow.com/users/777285/arnaud-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1471680086, "last_edit_date": 1495541312, "creation_date": 1471676570, "answer_id": 39051454, "question_id": 38232934, "link": "https://stackoverflow.com/questions/38232934/ann-mlp-not-working-with-opencv-3-1-0-dev-python/39051454#39051454", "title": "ANN_MLP() not working with Opencv 3.1.0 Dev (python)", "body": "<p>The first thing you can do is edit your post and specify the error you get. Here are two hints nonetheless:</p>\n\n<ol>\n<li>There is a typo in the last line:\u00a0<em>nerual</em> instead of <em>neural</em>.</li>\n<li><a href=\"https://stackoverflow.com/a/39051837/777285\">This answer</a> might help with setting the number of layers.</li>\n</ol>\n"}], "owner": {"reputation": 57, "user_id": 4265799, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-T2uZKwVkEzQ/AAAAAAAAAAI/AAAAAAAAAf8/BPDYgRuDQFI/photo.jpg?sz=128", "display_name": "Arpit Joshi", "link": "https://stackoverflow.com/users/4265799/arpit-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471680086, "creation_date": 1467835994, "question_id": 38232934, "link": "https://stackoverflow.com/questions/38232934/ann-mlp-not-working-with-opencv-3-1-0-dev-python", "title": "ANN_MLP() not working with Opencv 3.1.0 Dev (python)", "body": "<p>I have been working on Neural Networks Using OpenCV </p>\n\n<p>From the documentation I have learned that instead of <em>cv2.ANN_MLP</em> </p>\n\n<p>We have to use <em>cv2.ml.ANN_MLP_create()</em></p>\n\n<p>But what I don't get is how do I give the layer size? </p>\n\n<p>Here is the code </p>\n\n<pre><code>import cv2\nimport numpy as np\nimport glob\n\ntraining_data = np.zeros((1,307200))\nlabels = np.zeros((1,4),'float')\ntrain = glob.glob('training.npz')\nprint train\nfor i in train:\n    with np.load(i) as data:\n        print data.files\n        training_temp = data['training_image_array']\n        labels_temp = data['output_array']\n    training_data = np.vstack((training_data,training_temp))\n    labels = np.vstack((labels,labels_temp))\n\ntraining_data = training_data[1:,:]\nlabels = labels[1:, :]\n\nprint training_data.shape\nprint labels.shape\n\ne1 = cv2.getTickCount()\n\nlayer_size = np.int32([307200,32,4])\n\nneural = cv2.ml.ANN_MLP_create()\nnerual.create(layer_size)\n</code></pre>\n\n<p>This gives me an error.</p>\n\n<p>If anyone has an idea on what to do, Please help. Thanks</p>\n"}, {"tags": ["python", "geometry", "2d", "trigonometry", "shadows"], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 4648634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TpKT2.png?s=128&g=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4648634/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1467839703, "creation_date": 1467839703, "answer_id": 38233883, "question_id": 38232929, "link": "https://stackoverflow.com/questions/38232929/2d-shadow-effect-points-on-circle/38233883#38233883", "title": "2D Shadow Effect - Points on circle", "body": "<p>The trick is to notice what is happening at point P.  At point P, the line AP is tangent to the circle so in other words the angle APO is 90 degrees.  Likewise AQO is 90 degrees.</p>\n\n<p>Now we know that we have a triangle, we know 2 of the lengths and one of the angles (We know AO, OP / OQ (Same thing), and APO / AQO).</p>\n\n<p>We now use the law of sines.</p>\n\n<pre><code> AO/sin(APO) = OP/sin(PAO)\n PAO = asin(OP*(sin(APO)/AO))\n</code></pre>\n\n<p>Remember to be conscious of the units (ie using 90 degrees as an input value and then forgetting that a your library function for sin may return in radians not degrees).</p>\n\n<p>From here, you can find all of the angles by knowing that the sum of all angles in a triangle is 180 degrees.  So now you have all three angles.</p>\n\n<p>When you have angle AOP from the above calculation, you can use the law of sines again to calculate the length of AP.</p>\n\n<pre><code> AP = sin(AOP) * AO / sin(APO).\n</code></pre>\n\n<p>Note that sin(90 degrees) == 1 (And remember that APO and AQO are 90 degrees | pi/2 radians).</p>\n\n<p>Now we have the length of AP.  We can now find the coordinates (x, y) of P, assuming that A is at (0, 0).  If A is not the origin just add A's coordinates as an offset.</p>\n\n<p>To find the coordinates of P:</p>\n\n<pre><code> PxCoord = AxCoord + AP * cos(PAO)\n PyCoord = AyCoord + AP * sin(PAO)\n</code></pre>\n\n<p><strong>Reminder: Please check if your trig functions (sin / asin) use degrees or radians, and make sure to convert the 90 degrees to radians (it is pi/2 radians) if your function uses radians.  Also note that if this is the case, your output will be in radians for the angle, and likewise instead of there being 180 degrees in a triangle you will have pi radians.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": false, "score": 1, "last_activity_date": 1467873710, "creation_date": 1467873710, "answer_id": 38238977, "question_id": 38232929, "link": "https://stackoverflow.com/questions/38232929/2d-shadow-effect-points-on-circle/38238977#38238977", "title": "2D Shadow Effect - Points on circle", "body": "<p>Let's vector V = OP (unknown), vector Q = AP, vector U = AO (known)<br>\nNote that Q = U + V</p>\n\n<p>Vector V length is radius R, so</p>\n\n<pre><code>VX^2 + VY^2 = R^2   //1\n</code></pre>\n\n<p>Vectors V and A are perpendicular, so their scalar product is zero</p>\n\n<pre><code>VX * QX + VY * QY = 0\nVX * (VX + UX) + VY * (VY  + UY) = 0\nVX * VX + VX * UX + VY * VY  + VY * UY = 0\nR^2 + VX * UX + VY * UY = 0   //2\n</code></pre>\n\n<p>Solve system of equations 1 and 2 and get solutions</p>\n\n<pre><code>LL = U.X^2 + U.Y^2\n\nVY = (R^2 * UY  +/- R * UX * Sqrt(LL - R^2)) / LL\nVX = (R^2 - VY * UY) / UX\n</code></pre>\n\n<p>and finally</p>\n\n<pre><code>P.X = O.X + VX\nP.Y = O.Y + VY\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5404506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b8e09f082e8670601188dbbaa7eb09?s=128&d=identicon&r=PG&f=1", "display_name": "Finley Rosser-Davies", "link": "https://stackoverflow.com/users/5404506/finley-rosser-davies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1467873710, "creation_date": 1467835983, "question_id": 38232929, "link": "https://stackoverflow.com/questions/38232929/2d-shadow-effect-points-on-circle", "title": "2D Shadow Effect - Points on circle", "body": "<p>I am currently trying to implement flat shadow effects to a 2D game that i have written in Python. I have found a great deal of tutorials and methods of doing this online (<a href=\"http://ncase.me/sight-and-light/\" rel=\"nofollow noreferrer\">http://ncase.me/sight-and-light/</a>) however, these all use polygons as the obstructions, where all corner points are known while my game includes circles.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zxJ8G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zxJ8G.png\" alt=\"\"></a></p>\n\n<p>I was wondering if it were possible to calculate either the X and Y coordinates of each of the points of contact (P and Q) or the gradient of the line if the situation of A and O and the radius of the circle are known.</p>\n\n<p>Thanks in advance and apologies if the question is off topic, but i couldn't find the answers anywhere else.</p>\n"}, {"tags": ["python", "string", "list", "python-3.x", "int"], "comments": [{"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 4, "creation_date": 1467835896, "post_id": 38232852, "comment_id": 63887464, "body": "Great! Good luck with it! Ask a descriptive question with what you have tried and researched so far if you get stuck"}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 6147002, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/88a79fd77ec742077fe231a8ae661639?s=128&d=identicon&r=PG&f=1", "display_name": "sawreals", "link": "https://stackoverflow.com/users/6147002/sawreals"}, "edited": false, "score": 0, "creation_date": 1467836202, "post_id": 38232961, "comment_id": 63887625, "body": "Why am I being down voted?"}, {"owner": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "edited": false, "score": 0, "creation_date": 1467836272, "post_id": 38232961, "comment_id": 63887664, "body": "That doesn&#39;t work. Try running it yourself"}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 5, "creation_date": 1467836278, "post_id": 38232961, "comment_id": 63887668, "body": "Your answer is wrong. It produces <code>[&#39;I&#39;,&#39;h&#39;,&#39;a&#39;,&#39;v&#39;,&#39;e&#39;,&#39;1&#39;,&#39;0&#39;,&#39;c&#39;,&#39;a&#39;,&#39;r&#39;,&#39;s&#39;]</code>, i.e. it splits the number as well. Also, the use of <code>str</code> is unneeded."}], "tags": [], "owner": {"reputation": 338, "user_id": 6147002, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/88a79fd77ec742077fe231a8ae661639?s=128&d=identicon&r=PG&f=1", "display_name": "sawreals", "link": "https://stackoverflow.com/users/6147002/sawreals"}, "is_accepted": false, "score": -4, "last_activity_date": 1467836084, "creation_date": 1467836084, "answer_id": 38232961, "question_id": 38232852, "link": "https://stackoverflow.com/questions/38232852/how-to-separate-string-and-integers-to-a-list/38232961#38232961", "title": "How to separate string and integers to a list", "body": "<p>Try to return it as a string. </p>\n\n<pre><code>list(str(\"I have 10 cars\"))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "edited": false, "score": 0, "creation_date": 1467837704, "post_id": 38233110, "comment_id": 63888436, "body": "<code>append</code> and <code>+=</code> are really expensive for <code>list</code>, given that you need to resize it every time"}, {"owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "reply_to_user": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "edited": false, "score": 0, "creation_date": 1467838126, "post_id": 38233110, "comment_id": 63888631, "body": "@Brian append will create list of list"}, {"owner": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "edited": false, "score": 0, "creation_date": 1467838334, "post_id": 38233110, "comment_id": 63888731, "body": "<code>append</code> and <code>extend</code> (or <code>+=</code> as you use) should be avoided if you have the chance. Both operations cause Python to have to resize the array in memory and because of that, it&#39;s not very efficient. Your method works, but for longer strings, it will be an expensive operation"}, {"owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "reply_to_user": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "edited": false, "score": 0, "creation_date": 1467841353, "post_id": 38233110, "comment_id": 63890145, "body": "@Brian true. agree with you"}, {"owner": {"reputation": 5, "user_id": 4018279, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003608570309/picture?type=large", "display_name": "Sasindu JAyashma", "link": "https://stackoverflow.com/users/4018279/sasindu-jayashma"}, "edited": false, "score": 0, "creation_date": 1467869306, "post_id": 38233110, "comment_id": 63897122, "body": "res = [] for item in input().split(&#39; &#39;):     try:         res.append(int(item))     except:         res += list(item) print(res)"}], "tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": true, "score": 3, "last_activity_date": 1467836617, "creation_date": 1467836617, "answer_id": 38233110, "question_id": 38232852, "link": "https://stackoverflow.com/questions/38232852/how-to-separate-string-and-integers-to-a-list/38233110#38233110", "title": "How to separate string and integers to a list", "body": "<pre><code>res = []\nfor item in s.split(' '):\n...     try:\n...         int(item)\n...         res.append(item)\n...     except:\n...         res += list(item)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "is_accepted": false, "score": 2, "last_activity_date": 1467837666, "creation_date": 1467837666, "answer_id": 38233414, "question_id": 38232852, "link": "https://stackoverflow.com/questions/38232852/how-to-separate-string-and-integers-to-a-list/38233414#38233414", "title": "How to separate string and integers to a list", "body": "<blockquote>\n  <p>The other answers here are terribly inefficient for larger strings.</p>\n</blockquote>\n\n<p>You should <strong>not</strong> unnecessarily use <code>append</code>, since it could be very costly with larger strings. In my way, you do not resize your <code>list</code> each time you find a new element you need in it. In the interest of efficiency, you can do it like so:</p>\n\n<pre><code>s = \"I have 10 cars\"\n\ndef seperateWithInts( l ):\n    for s in l.split():\n        if s.isdigit():\n            yield s\n        else:\n            for c in s:\n                yield c\n\ns2 = [i for i in seperateWithInts(s)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 778, "user_id": 4941367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f9d9494ba211e291ea0bdf9014689c?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/4941367/jeremy"}, "is_accepted": false, "score": 0, "last_activity_date": 1467842158, "creation_date": 1467842158, "answer_id": 38234441, "question_id": 38232852, "link": "https://stackoverflow.com/questions/38232852/how-to-separate-string-and-integers-to-a-list/38234441#38234441", "title": "How to separate string and integers to a list", "body": "<p>Here's a one-liner using list comprehension which is probably not your best option.</p>\n\n<pre><code>s = \"I have 10 cars\"\nprint [item for sublist in [[x] if x.isdigit() else list(x) for x in s.split(\" \")] for item in sublist]\n#Output\n['I', 'h', 'a', 'v', 'e', '10', 'c', 'a', 'r', 's']\n</code></pre>\n\n<p>Basically, you split the string into a list of lists which contains the chars and the number, then you flatten the lists, all in one fell swoop of list comprehension.</p>\n"}], "owner": {"reputation": 5, "user_id": 4018279, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003608570309/picture?type=large", "display_name": "Sasindu JAyashma", "link": "https://stackoverflow.com/users/4018279/sasindu-jayashma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2269, "favorite_count": 0, "closed_date": 1468262843, "accepted_answer_id": 38233110, "answer_count": 4, "score": -8, "last_activity_date": 1467868556, "creation_date": 1467835642, "last_edit_date": 1467868556, "question_id": 38232852, "link": "https://stackoverflow.com/questions/38232852/how-to-separate-string-and-integers-to-a-list", "closed_reason": "Not suitable for this site", "title": "How to separate string and integers to a list", "body": "<p>I need to separate this string: </p>\n\n<pre><code>s = \"I have 10 cars\"\n</code></pre>\n\n<p>to a list like this:</p>\n\n<pre><code>['I','h','a','v','e',10,'c','a','r','s']\n</code></pre>\n\n<p>The digits shouldn't be separated. also digit should entered as a Integer( without these ' ') </p>\n"}, {"tags": ["python", "python-2.7", "csv", "stringio"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 3, "creation_date": 1467835658, "post_id": 38232838, "comment_id": 63887350, "body": "Do you have some sample data?"}, {"owner": {"reputation": 782, "user_id": 5049858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXzyH.jpg?s=128&g=1", "display_name": "andrralv", "link": "https://stackoverflow.com/users/5049858/andrralv"}, "edited": false, "score": 1, "creation_date": 1467835761, "post_id": 38232838, "comment_id": 63887394, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19717769/convert-list-of-lists-into-a-string\" title=\"convert list of lists into a string\">stackoverflow.com/questions/19717769/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "edited": false, "score": 0, "creation_date": 1467836598, "post_id": 38233075, "comment_id": 63887835, "body": "As I mentioned in my question, that solution doesn&#39;t handle values that themselves contain a comma. My bad, I should have provided a clear example. I&#39;ll edit."}], "tags": [], "owner": {"reputation": 10159, "user_id": 509824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c62e65b86aabdffdd1c628aad1fefe3?s=128&d=identicon&r=PG", "display_name": "Alberto Garcia-Raboso", "link": "https://stackoverflow.com/users/509824/alberto-garcia-raboso"}, "is_accepted": false, "score": 1, "last_activity_date": 1467837528, "last_edit_date": 1495541364, "creation_date": 1467836491, "answer_id": 38233075, "question_id": 38232838, "link": "https://stackoverflow.com/questions/38232838/convert-a-python-list-of-lists-to-a-string/38233075#38233075", "title": "Convert a Python list of lists to a string", "body": "<p>The approach in the <a href=\"https://stackoverflow.com/questions/44778/how-would-you-make-a-comma-separated-string-from-a-list\">question</a> you link to as a reference for <code>join</code>, together with a nested <code>join</code>s (what's wrong with that?) works as long as you can convert all of the objects contained in your list of lists to a string:</p>\n\n<pre><code>list_of_lists = [[1, 'a'], [2, 3, 'b'], ['c', 'd']]\njoined = '\\n'.join(','.join(map(str, row)) for row in list_of_lists)\nprint(join)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1,a\n2,3,b\nc,d\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If the string representation of your objects may contain commas, here are a couple of things you could do to achieve an output that can recover the original list of lists:</p>\n\n<ol>\n<li>escape those commas, or</li>\n<li>wrap said string representations in some flavor of quotes (then you have to escape the occurrences of that character inside your values). This is precisely what the combination of <code>io.StringIO</code> and <code>csv</code> does (see Daniel's answer).</li>\n</ol>\n\n<p>To achieve the first, you could do</p>\n\n<pre><code>import re\n\ndef escape_commas(obj):\n   return re.sub(',', '\\,', str(obj))\n\njoined = '\\n'.join(','.join(map(escape_commas, row)) for row in list_of_lists)\n</code></pre>\n\n<p>For the second,</p>\n\n<pre><code>import re\n\ndef wrap_in_quotes(obj):\n   return '\"' + re.sub('\"', '\\\"', str(obj)) + '\"'\n\njoined = '\\n'.join(','.join(map(wrap_in_quotes, row)) for row in list_of_lists)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "edited": false, "score": 0, "creation_date": 1467840208, "post_id": 38233192, "comment_id": 63889657, "body": "Ah, perfect! I was not familiar with the <code>StringIO</code> class. Totally worth the downvotes. :P"}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 6, "last_activity_date": 1467836890, "creation_date": 1467836890, "answer_id": 38233192, "question_id": 38232838, "link": "https://stackoverflow.com/questions/38232838/convert-a-python-list-of-lists-to-a-string/38233192#38233192", "title": "Convert a Python list of lists to a string", "body": "<p>Combine the csv-module with <code>StringIO</code>:</p>\n\n<pre><code>import io, csv\n\nresult = io.StringIO()\nwriter = csv.writer(result)\nwriter.writerow([5,6,7])\nprint(result.getvalue())\n</code></pre>\n"}], "owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2558, "favorite_count": 1, "accepted_answer_id": 38233192, "answer_count": 2, "score": 2, "last_activity_date": 1467840143, "creation_date": 1467835591, "last_edit_date": 1495542296, "question_id": 38232838, "link": "https://stackoverflow.com/questions/38232838/convert-a-python-list-of-lists-to-a-string", "title": "Convert a Python list of lists to a string", "body": "<p>How can I best convert a list of lists in Python to a (for example) comma-delimited-value, newline-delimited-row, string? Ideally, I'd be able to do something like this:</p>\n\n<pre><code>&gt;import csv\n\n&gt;matrix = [[\"Frodo\",\"Baggins\",\"Hole-in-the-Ground, Shire\"],[\"Sauron\", \"I forget\", \"Mordor\"]]\n&gt; csv_string = csv.generate_string(matrix)\n&gt;print(csv_string)\nFrodo,Baggins,\"Hole-in-the-Ground, Shire\"\nSauron,I forget,Mordor\n</code></pre>\n\n<p>I know that Python has a <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">csv module</a>, as seen in SO questions like <a href=\"https://stackoverflow.com/questions/6916542/writing-list-of-strings-to-excel-csv-file-in-python\">this</a> but all of its functions seem to operate on a File object. The lists are small enough that using a file is overkill.</p>\n\n<p>I'm familiar with the <a href=\"https://stackoverflow.com/questions/44778/how-would-you-make-a-comma-separated-string-from-a-list\">join</a> function, and there are plenty of SO answers <a href=\"https://stackoverflow.com/questions/19717769/convert-list-of-lists-into-a-string\">about it</a>. But this doesn't handle values that contain a comma, nor does it handle multiple rows unless I nest a <code>join</code> within another <code>join</code>.</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 735, "user_id": 2757239, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/57DYO.jpg?s=128&g=1", "display_name": "verbamour", "link": "https://stackoverflow.com/users/2757239/verbamour"}, "edited": false, "score": 0, "creation_date": 1469809297, "post_id": 38232834, "comment_id": 64707627, "body": "I do not use <code>.sparse_column_with_keys</code>, but I do use <code>.sparse_column_with_hash_bucket</code> and get the same warning."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 6663787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zj4VcrUcjO4/AAAAAAAAAAI/AAAAAAAAAEI/K1tprd6Y1bc/photo.jpg?sz=128", "display_name": "Jacob Chandran", "link": "https://stackoverflow.com/users/6663787/jacob-chandran"}, "is_accepted": true, "score": 2, "last_activity_date": 1470074646, "last_edit_date": 1470074646, "creation_date": 1470065050, "answer_id": 38702578, "question_id": 38232834, "link": "https://stackoverflow.com/questions/38232834/warningtensorflowcreate-partitioned-variables-is-deprecated/38702578#38702578", "title": "WARNING:tensorflow:create_partitioned_variables is deprecated", "body": "<p>Basically <code>sparse_column_with_keys</code> is using <code>create_partitioned_variables()</code> for its initialization, however, within the <code>create_partitioned_variables()</code> class, they throw a warning that is basically saying that <code>create_partitioned_variables()</code> is not the accepted way of creating partitioned variables anymore. Instead, you can use the <code>get_variable()</code> function.</p>\n\n<p>If you go to <code>tensorflow/contrib/layers/python/layers</code>, and open _feature_column.py_, you will find that the embedding for <code>sparse_column_with_keys</code> uses <code>create_partitioned_variables()</code>. To fix this, import the <code>get_variable function</code> (<code>from tensorflow.python.ops.variable_scope import get_variable</code>), and then define the variable <code>embeddings</code> (which should be using <code>create_partitioned_variables()</code> initially) using <code>get_variable()</code> instead of <code>create_partitioned_variables()</code>. I don't think the warning really matters much though.</p>\n"}], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 1, "accepted_answer_id": 38702578, "answer_count": 1, "score": 4, "last_activity_date": 1470074646, "creation_date": 1467835572, "last_edit_date": 1467836123, "question_id": 38232834, "link": "https://stackoverflow.com/questions/38232834/warningtensorflowcreate-partitioned-variables-is-deprecated", "title": "WARNING:tensorflow:create_partitioned_variables is deprecated", "body": "<p>I'm getting this <code>WARNING</code></p>\n\n<blockquote>\n  <p>WARNING:tensorflow:create_partitioned_variables is deprecated.  Use tf.get_variable with a partitioner set, or tf.get_partitioned_variable_list, instead.</p>\n</blockquote>\n\n<p>I'm not using the function <code>create_partitioned_variables</code></p>\n\n<p>I'm using <code>tensorflow.__version__ 0.9.0</code></p>\n\n<p>What is the most appropriate way to resolve this <code>WARNING</code></p>\n\n<p>If you have tensorflow installed along with pandas/numpy, you should be able to copy and paste this code.</p>\n\n<h3>Setup</h3>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport tensorflow as tf\nimport tempfile\n\nnp.random.seed([3,1415])\ndf = pd.DataFrame(dict(cat1=np.random.choice(('Yes', 'No'), (100,),),\n                       val1=np.random.rand(100),\n                       val2=np.random.rand(100),\n                       val3=np.random.rand(100),\n                       label=np.random.choice((0, 1), (100,))))\n\nLABEL_COLUMN = \"label\"\n\ntrainBegin, trainEnd = 0, 80\ntestBegin, testEnd = 80, 100\ndf_train = df.iloc[trainBegin:trainEnd, :]\ndf_test = df.iloc[testBegin:testEnd, :]\n\nCONTINUOUS_COLUMNS = ['val1', 'val2', 'val3']\nCATEGORICAL_COLUMNS = ['cat1']\n\ndef input_fn(df):\n    # Creates a dictionary mapping from each continuous feature column name (k) to\n    # the values of that column stored in a constant Tensor.\n    continuous_cols = {k: tf.constant(df[k].values)\n                       for k in CONTINUOUS_COLUMNS}\n    # Creates a dictionary mapping from each categorical feature column name (k)\n    # to the values of that column stored in a tf.SparseTensor.\n    categorical_cols = {k: tf.SparseTensor(\n            indices=[[i, 0] for i in range(df[k].size)],\n            values=df[k].values,\n            shape=[df[k].size, 1])\n                        for k in CATEGORICAL_COLUMNS}\n    # Merges the two dictionaries into one.\n    feature_cols = dict(continuous_cols.items() + categorical_cols.items())\n    # Converts the label column into a constant Tensor.\n    label = tf.constant(df[LABEL_COLUMN].values)\n    # Returns the feature columns and the label.\n    return feature_cols, label\n\ndef train_input_fn():\n    return input_fn(df_train)\n\ndef eval_input_fn():\n    return input_fn(df_test)\n\nval1 = tf.contrib.layers.real_valued_column(\"val1\")\nval2 = tf.contrib.layers.real_valued_column(\"val2\")\nval3 = tf.contrib.layers.real_valued_column(\"val3\")\n\ncat1 = tf.contrib.layers.sparse_column_with_keys(column_name=\"cat1\", keys=[\"Yes\", \"No\"])\n\nwide_columns = [val1, val2, val3, cat1] \n</code></pre>\n\n<p><code>WARNINGS</code> come when I run:</p>\n\n<pre><code>model_dir = tempfile.mkdtemp()\nm = tf.contrib.learn.LinearClassifier(feature_columns=wide_columns, model_dir=model_dir)\n\nm.fit(input_fn=train_input_fn, steps=200)\n\nresults = m.evaluate(input_fn=eval_input_fn, steps=1)\nfor key in sorted(results):\n    print(\"%s: %s\" % (key, results[key]))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/S3kN6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S3kN6.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I run this instead:</p>\n\n<pre><code>model_dir = tempfile.mkdtemp()\nm = tf.contrib.learn.LinearClassifier(feature_columns=wide_columns[:-1], model_dir=model_dir)\n# removing last feature columns which is categorical using [:-1]  ^^^^^\n\nm.fit(input_fn=train_input_fn, steps=200)\n\nresults = m.evaluate(input_fn=eval_input_fn, steps=1)\nfor key in sorted(results):\n    print(\"%s: %s\" % (key, results[key]))\n</code></pre>\n\n<p>I get no errors.</p>\n\n<pre><code>accuracy: 0.45\neval_auc: 0.459596\nloss: 0.771354\n</code></pre>\n\n<h3>Conclusion</h3>\n\n<p>I narrowed it down to using categorical features created using <code>.sparse_column_with_keys</code> but what am I supposed to do about it?</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "oop", "memory-management"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 6, "creation_date": 1467835270, "post_id": 38232743, "comment_id": 63887157, "body": "Why would they be the same?"}], "answers": [{"tags": [], "owner": {"reputation": 877, "user_id": 4974662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FHAjX.jpg?s=128&g=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/4974662/pynoob"}, "is_accepted": true, "score": 2, "last_activity_date": 1467835415, "creation_date": 1467835415, "answer_id": 38232796, "question_id": 38232743, "link": "https://stackoverflow.com/questions/38232743/location-of-objects-python/38232796#38232796", "title": "Location of Objects - Python", "body": "<p>In python, when you assign a variable to a value, it stores the value in a memory location, and then creates a reference to that object. As a result, your variable is just a reference.  So, if you assign a new value to the variable, it does not overwrite that memory location with the new value, but rather creates a new object in a new memory location and a new reference to that memory location.  </p>\n\n<p>See below for an example. In this case, the list [1,2] is stored in memory location 46777352 when a is created. When b is created, it is stored in memory location 46797512. Even though they have the same value, a is not b because they do not refer to the same memory location.  When a is re-assigned the value of [1,2,3], it does not change the value in memory location 46777352, but rather creates a new object in memory location 46812296.  Variable b retains a\u2019s original memory location even though it was created after variable a. </p>\n\n<p><strong>Example</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/ePqIa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ePqIa.png\" alt=\"Example\"></a></p>\n\n<p><strong>Further Reading</strong></p>\n\n<p>Here are some good videos from pycon 2015 and 2016 which explain the concept. </p>\n\n<p><em>Facts and Myths about Python \u2013 Pycon 2015</em></p>\n\n<p><a href=\"https://www.youtube.com/watch?v=_AEJHKGk9ns&amp;feature=youtu.be\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=_AEJHKGk9ns&amp;feature=youtu.be</a></p>\n\n<p><em>Python by Immersion \u2013 Pycon 2016</em></p>\n\n<p><a href=\"https://www.youtube.com/watch?v=9k5687mmnoc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=9k5687mmnoc</a></p>\n"}], "owner": {"reputation": 135, "user_id": 6206263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rgmib.jpg?s=128&g=1", "display_name": "William III", "link": "https://stackoverflow.com/users/6206263/william-iii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 38232796, "answer_count": 1, "score": -2, "last_activity_date": 1467836366, "creation_date": 1467835191, "last_edit_date": 1467836366, "question_id": 38232743, "link": "https://stackoverflow.com/questions/38232743/location-of-objects-python", "title": "Location of Objects - Python", "body": "<p>When I executed the following code, i got value A.  When I executed it again, I got value B.  Why is that. Shouldn't it have produced the same result?</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>list_a = ['one_A', 'two_A', 'three_A']\n\n#initialize the list\nnew_li = map(lambda i: '{0}\\n'.format(i), list_a)\n\nprint(new_li)\n</code></pre>\n\n<p><strong>Value A</strong></p>\n\n<pre><code>&lt;map object at 0x00000000093E7E80&gt;\n</code></pre>\n\n<p><strong>Value B</strong></p>\n\n<pre><code>&lt;map object at 0x0000000009423080&gt;\n</code></pre>\n\n<p><strong><em>Note</em></strong></p>\n\n<p>I'm not asking how to turn a map object into a list. But rather why memory locations are different when the map object new_li is re-created.</p>\n"}, {"tags": ["python", "json", "python-requests"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1467834940, "post_id": 38232627, "comment_id": 63886984, "body": "Does PATCHing work when performed through non-Python means, e.g., curl?"}, {"owner": {"reputation": 121, "user_id": 1818250, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3706ecf8adf01d16cbc540d84cee5e8e?s=128&d=identicon&r=PG&f=1", "display_name": "MBH", "link": "https://stackoverflow.com/users/1818250/mbh"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1467835408, "post_id": 38232627, "comment_id": 63887232, "body": "That is an excellent question. I hate to admit that I did not think to try that yet. I will go try that now..."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 3470821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfGTO.jpg?s=128&g=1", "display_name": "Daniel Dainty", "link": "https://stackoverflow.com/users/3470821/daniel-dainty"}, "is_accepted": false, "score": 1, "last_activity_date": 1486044011, "creation_date": 1486044011, "answer_id": 42004145, "question_id": 38232627, "link": "https://stackoverflow.com/questions/38232627/python-will-not-patch-json-in-connectwise/42004145#42004145", "title": "Python will not patch json in ConnectWise.", "body": "<p>I've just checked some of my other code and I'm patching successfully using an array, but I'm using the ID of the resource rather than the name. Try that; instead of /status/name use /status/id and a numerical value.</p>\n\n<p>What is the result of r.text? That should either return the configuration in its new, patched, form or it will tell you why the patch didn't work.</p>\n"}], "owner": {"reputation": 121, "user_id": 1818250, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3706ecf8adf01d16cbc540d84cee5e8e?s=128&d=identicon&r=PG&f=1", "display_name": "MBH", "link": "https://stackoverflow.com/users/1818250/mbh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486044011, "creation_date": 1467834739, "question_id": 38232627, "link": "https://stackoverflow.com/questions/38232627/python-will-not-patch-json-in-connectwise", "title": "Python will not patch json in ConnectWise.", "body": "<p>I am a little confused why the following will not work. </p>\n\n<p>I am connecting to our ConnectWise API via requests. I get the response and then I parse through to find the tickets I am looking for. I am then trying to PATCH the ticket to change certain information.</p>\n\n<p>Sample json that is returned via API. </p>\n\n<pre><code>{\n  \"id\": 12345,\n  \"summary\": \"[CompanyName][ComputerName] Disk Space Check - drive G:\",\n  \"recordType\": \"ServiceTicket\",\n  \"board\": {\n    \"id\": 1,\n    \"name\": \"Board1\",\n  },\n  \"status\": {\n    \"id\": 5,\n    \"name\": \"NewTicket\",\n  },  \n  \"owner\": {\n  \"id\": 1,\n  \"identifier\": \"\",\n</code></pre>\n\n<p>Once I have identified the ticket I need to work with. I try to patch it. </p>\n\n<pre><code>def assign_ticket(self, ticket):\n\n    add_resource = [\n                   {'op': 'replace', 'path': '/board/name', 'value': 'Board2'},\n                   {'op': 'replace', 'path': '/status/name', 'value': 'NewTicket2'},\n                   {'op': 'replace', 'path': '/owner/identifier', 'value': 'MyBrainHurts'}\n            ]\n\n    r = requests.patch(self.url + self.url_ticket + str(ticket), json=add_resource, headers=self.header)\n    print(r.status_code)\n</code></pre>\n\n<p>It returns a 200 status code to indicate everything completely correctly, but only the /owner/identifier field is updated. The other two are not. I have Google'd for several days and tried multiple variations of the code but I do not see why it will not change the board or status. Any ideas?   </p>\n"}, {"tags": ["python", "lxml", "lxml.html"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467842277, "post_id": 38232584, "comment_id": 63890560, "body": "So you don&#39;t want the div itself? That will give you broken html are you sure you want that?"}, {"owner": {"reputation": 25, "user_id": 6441949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4beaf8f9375e29e1143571d47a8c68e9?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Loach", "link": "https://stackoverflow.com/users/6441949/paul-loach"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1467897927, "post_id": 38232584, "comment_id": 63914454, "body": "Yes. I am sure because I will be importing the data into a new html document that already has that tag created."}], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 1204098, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/5b99662b69ca647d0821f877b9258211?s=128&d=identicon&r=PG", "display_name": "pcm", "link": "https://stackoverflow.com/users/1204098/pcm"}, "is_accepted": true, "score": -1, "last_activity_date": 1467841126, "creation_date": 1467841126, "answer_id": 38234219, "question_id": 38232584, "link": "https://stackoverflow.com/questions/38232584/how-to-grab-raw-all-raw-html-within-a-certain-xpath-from-a-local-file-in-python/38234219#38234219", "title": "How to grab raw all raw html within a certain XPath from a local file in Python", "body": "<p>You could try using BeautifulSoup. I'm not real versed in it, but you can do something like this (or cleaner, if you read up on BeautifulSoup :)</p>\n\n<pre><code>from bs4 import BeautifulSoup\nsoup = BeautifulSoup(open(\"input.html\"), 'html')\nx = soup.find_all(class_=\"main-content\")\nfor line in x[0].contents:\n    print line,\n</code></pre>\n\n<p>You'll get output like this:</p>\n\n<pre><code>        Hello\n         &lt;br/&gt;\n&lt;br/&gt; &lt;a href=\"http://www.stackexchange.com\"&gt;Click here to visit stack exchange&lt;/a&gt;\n&lt;h1&gt;This is an introduction&lt;/h1&gt;\n&lt;h3&gt;This is the third header&lt;/h3&gt;\n&lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n&lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n&lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;list text&lt;/li&gt;\n&lt;li&gt;list text&lt;/li&gt;\n&lt;li&gt;list text&lt;/li&gt;\n&lt;li&gt;list text&lt;/li&gt;\n&lt;/ul&gt;\n&lt;div class=\"row\"&gt;\n&lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"/&gt;More content 1&lt;/div&gt;\n&lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"/&gt;More content 2&lt;/div&gt;\n&lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"/&gt;More content 3&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>BeautifulSoup will \"fix\" the HTML syntax, like the change from <br> to <br/> and it'll keep the spacing inside of the elements. See the docs on it at: <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow\">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></p>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 3, "last_activity_date": 1467843876, "last_edit_date": 1467843876, "creation_date": 1467843336, "answer_id": 38234693, "question_id": 38232584, "link": "https://stackoverflow.com/questions/38232584/how-to-grab-raw-all-raw-html-within-a-certain-xpath-from-a-local-file-in-python/38234693#38234693", "title": "How to grab raw all raw html within a certain XPath from a local file in Python", "body": "<p>Using lxml:</p>\n\n<pre><code>from lxml import html\n\nxm = html.fromstring(h)\ndiv = xm.xpath(\"//div[@class='main-content']\")[0]\nprint(div.text  + \"\".join(map(html.tostring, div.xpath(\"./*\"))))\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>from lxml import html\n\nxm = html.fromstring(h)\neles  = xm.xpath(\"//div[@class='main-content']/text() | //div[@class='main-content']/*\")\nprint(\"\".join([ele if  isinstance(ele, str) else html.tostring(ele) for ele in eles]))\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6441949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4beaf8f9375e29e1143571d47a8c68e9?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Loach", "link": "https://stackoverflow.com/users/6441949/paul-loach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1227, "favorite_count": 0, "accepted_answer_id": 38234219, "answer_count": 2, "score": 2, "last_activity_date": 1467843876, "creation_date": 1467834564, "last_edit_date": 1495535415, "question_id": 38232584, "link": "https://stackoverflow.com/questions/38232584/how-to-grab-raw-all-raw-html-within-a-certain-xpath-from-a-local-file-in-python", "title": "How to grab raw all raw html within a certain XPath from a local file in Python", "body": "<p>I am trying to grab the raw html from a bunch of local html files. I had some help from this post in getting the raw file to read in:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4624062/get-all-text-inside-a-tag-in-lxml\">Get all text inside a tag lxml</a></p>\n\n<p>But the code I have currently produces the entire file instead of a subset. Right now I seem to be missing a line where I can choose an xpath I want to grab.</p>\n\n<p>Here is the code I currently have:</p>\n\n<pre><code>def stringify_children(node):\n    from lxml.etree import tostring\n    from itertools import chain\n    parts = ([node.text] +\n            list(chain(*([c.text, tostring(c), c.tail] for c\n            in node.getchildren()))) +\n            [node.tail])\n    # filter removes possible Nones in texts and tails\n    return ''.join(filter(None, parts))\n\nfor filename in os.listdir('../news/article/'):\n    if (filename.endswith('.html') and not filename.startswith('._')):\n        print filename;\n        with open('../news/article/' + filename, \"r\") as f:\n            page=f.read();\n        tree=html.fromstring(page);\n        maincontent = stringify_children(tree);\n        print maincontent;\n</code></pre>\n\n<p>My end goal is to be able to get that in a string and output to a local file as only that div.</p>\n\n<p>Here is a sample file:</p>\n\n<pre><code>&lt;html&gt;\n\n&lt;head&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\"&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-xs-4\"&gt;\n                &lt;div class=\"left-bar\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-xs-4\"&gt;\n                &lt;div class=\"middle-bar\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-xs-4\"&gt;\n                &lt;div class=\"right-bar\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-xs-3\"&gt;\n                &lt;div class=\"navigation\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-xs-9\"&gt;\n                &lt;div class=\"main-content\"&gt;\n                    Hello\n                    &lt;br&gt;\n                    &lt;br&gt;&lt;a href=\"http://www.stackexchange.com\"&gt;Click here to visit stack exchange&lt;/a&gt;\n                    &lt;h1&gt;This is an introduction&lt;/h1&gt;\n                    &lt;h3&gt;This is the third header&lt;/h3&gt;\n                    &lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n                    &lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n                    &lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n                    &lt;ul&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                    &lt;/ul&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"&gt;More content 1&lt;/div&gt;\n                        &lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"&gt;More content 2&lt;/div&gt;\n                        &lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"&gt;More content 3&lt;/div&gt;\n                    &lt;/div&gt;\n\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p>I want to grab all of the content underneath the maincontent class. Here is the xpath of that class in this file:</p>\n\n<p><strong>XPath: /html/body/div/div[2]/div[2]/div</strong></p>\n\n<p>The program should output the following:</p>\n\n<pre><code>                    Hello\n                    &lt;br&gt;\n                    &lt;br&gt;&lt;a href=\"http://www.stackexchange.com\"&gt;Click here to visit stack exchange&lt;/a&gt;\n                    &lt;h1&gt;This is an introduction&lt;/h1&gt;\n                    &lt;h3&gt;This is the third header&lt;/h3&gt;\n                    &lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n                    &lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n                    &lt;p&gt;Lorem ipsum dolor sit amet.....&lt;/p&gt;\n                    &lt;ul&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                        &lt;li&gt;list text&lt;/li&gt;\n                    &lt;/ul&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"&gt;More content 1&lt;/div&gt;\n                        &lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"&gt;More content 2&lt;/div&gt;\n                        &lt;div class=\"col-xs-4\"&gt;&lt;img src=\"#\"&gt;More content 3&lt;/div&gt;\n                    &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "xpath"], "comments": [{"owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "edited": false, "score": 0, "creation_date": 1467845766, "post_id": 38232560, "comment_id": 63891749, "body": "I seriously don&#39;t get <code>I need all &lt;td&gt; in following siblings &lt;tr&gt; after a &lt;tr&gt; with some values in his &lt;td&gt;s, but until the next &lt;tr&gt; with some values in all &lt;td&gt;s.</code>"}, {"owner": {"reputation": 20027, "user_id": 1987598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3j3n.jpg?s=128&g=1", "display_name": "Mathias M&#252;ller", "link": "https://stackoverflow.com/users/1987598/mathias-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1467880549, "post_id": 38232560, "comment_id": 63902826, "body": "Please show your Python code. An XPath expression that solves this problem will be long-winded. Rather, you should write a relatively simple XPath expression and then process the results with Python."}, {"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 0, "creation_date": 1467880606, "post_id": 38232560, "comment_id": 63902858, "body": "Do you want to segment the  <code>&lt;tr&gt;</code>s with <code>&lt;td class=&quot;DT&quot;&gt;</code> as boundaries?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3165748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255f4a2234bcf43150e6b439038df2fa?s=128&d=identicon&r=PG&f=1", "display_name": "Gino", "link": "https://stackoverflow.com/users/3165748/gino"}, "edited": false, "score": 0, "creation_date": 1467920021, "post_id": 38241458, "comment_id": 63928816, "body": "Wow, great explanation and works perfect! Thanks a lot!"}, {"owner": {"reputation": 2772, "user_id": 1907888, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QisuQ.png?s=128&g=1", "display_name": "Robert Sinclair", "link": "https://stackoverflow.com/users/1907888/robert-sinclair"}, "edited": false, "score": 0, "creation_date": 1598452809, "post_id": 38241458, "comment_id": 112464881, "body": "like a perfect example of why sometimes using substr and strpos is way better than xpath"}], "tags": [], "owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "is_accepted": true, "score": 1, "last_activity_date": 1467882775, "last_edit_date": 1467882775, "creation_date": 1467882305, "answer_id": 38241458, "question_id": 38232560, "link": "https://stackoverflow.com/questions/38232560/xpath-following-siblings-until-another-sibling/38241458#38241458", "title": "Xpath following siblings until another sibling", "body": "<p>I may be misinterpreting the question, but if, for each <code>&lt;tr&gt;&lt;td class=\"DT\"&gt;xx-xx-xx&lt;/td&gt;</code>, you want all <code>&lt;tr&gt;</code> after it, and before the next <code>&lt;tr&gt;&lt;td class=\"DT\"&gt;xx-xx-xx&lt;/td&gt;</code>, one pattern is to loop on these \"boundary\" <code>&lt;tr&gt;&lt;td class=\"DT\"&gt;xx-xx-xx&lt;/td&gt;</code> elements, and selecting following sibling rows with a condition on how many \"boundaries\" are found before.</p>\n\n<p>Let's use <code>lxml</code> to illustrate. First, we create a document from your sample input:</p>\n\n<pre><code>&gt;&gt;&gt; import lxml.html\n&gt;&gt;&gt; t = '''&lt;table&gt;\n...     &lt;tr&gt;\n...         &lt;td class=\"DT\"&gt;29-04-14&lt;/td&gt;\n...         &lt;td class=\"Regio\"&gt;Text&lt;/td&gt;\n...         &lt;td class=\"Md\"&gt;Text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td class=\"SomeClass\"&gt;Some other text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td class=\"SomeOtherClass\"&gt;Some more text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td class=\"DT\"&gt;22-04-14&lt;/td&gt;\n...         &lt;td class=\"Regio\"&gt;Text&lt;/td&gt;\n...         &lt;td class=\"Md\"&gt;Text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td class=\"OmsAm\"&gt;more text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td class=\"DT\"&gt;30-04-14&lt;/td&gt;\n...         &lt;td class=\"Regio\"&gt;Text&lt;/td&gt;\n...         &lt;td class=\"Md\"&gt;Text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td class=\"OmsBr\"&gt;Some other Text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td class=\"OmsBr\"&gt;More Text&lt;/td&gt;\n...     &lt;/tr&gt;\n...     &lt;tr&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td&gt;&lt;/td&gt;\n...         &lt;td class=\"OmsBr\"&gt;Some different text&lt;/td&gt;\n...     &lt;/tr&gt;\n... &lt;/table&gt;'''\n&gt;&gt;&gt; doc = lxml.html.fromstring(t)\n</code></pre>\n\n<p>Now, let's count these <code>&lt;tr&gt;&lt;td class=\"DT\"&gt;xx-xx-xx&lt;/td&gt;</code>:</p>\n\n<pre><code>&gt;&gt;&gt; doc.xpath('//table/tr[td/@class=\"DT\"]')\n[&lt;Element tr at 0x7f948ab00548&gt;, &lt;Element tr at 0x7f948ab005e8&gt;, &lt;Element tr at 0x7f948ab00638&gt;]\n&gt;&gt;&gt; doc.xpath('count(//table/tr[td/@class=\"DT\"])')\n3.0\n&gt;&gt;&gt; list(enumerate(doc.xpath('//table/tr[td/@class=\"DT\"]'), start=1))\n[(1, &lt;Element tr at 0x7f948ab00548&gt;), (2, &lt;Element tr at 0x7f948ab005e8&gt;), (3, &lt;Element tr at 0x7f948ab00638&gt;)]\n</code></pre>\n\n<p>We can loop on these rows and select the rows that come after in the document (we'll select text nodes to \"see\" which row these are:</p>\n\n<pre><code>&gt;&gt;&gt; for cnt, row in enumerate(doc.xpath('//table/tr[td/@class=\"DT\"]'), start=1):\n...     print( row.xpath('./following-sibling::tr/td/text()') )\n... \n['Some other text', 'Some more text', '22-04-14', 'Text', 'Text', 'more text', '30-04-14', 'Text', 'Text', 'Some other Text', 'More Text', 'Some different text']\n['more text', '30-04-14', 'Text', 'Text', 'Some other Text', 'More Text', 'Some different text']\n['Some other Text', 'More Text', 'Some different text']\n</code></pre>\n\n<p>We're selecting too many rows in each iteration, all the rows until the end of the <code>&lt;table&gt;</code>. We need an additional \"end\" condition for following rows.</p>\n\n<p>We're counting the <code>tr[td/@class=\"DT\"]</code> in the loop, so we can check how many preceding <code>tr[td/@class=\"DT\"]</code> each row has:</p>\n\n<p>For the 1st set:</p>\n\n<pre><code>row.xpath('./following-sibling::tr[count(./preceding-sibling::tr[td/@class=\"DT\"])=1]\n</code></pre>\n\n<p>For the 2nd:</p>\n\n<pre><code>row.xpath('./following-sibling::tr[count(./preceding-sibling::tr[td/@class=\"DT\"])=2]\n</code></pre>\n\n<p>etc.</p>\n\n<p>So, in the loop, we can use the current count with an XPath variable with lxml (<a href=\"http://lxml.de/xpathxslt.html\" rel=\"nofollow\">an underrated XPath feature supported by lxml</a>):</p>\n\n<pre><code>&gt;&gt;&gt; for cnt, row in enumerate(doc.xpath('//table/tr[td/@class=\"DT\"]'), start=1):\n...     print( row.xpath('./following-sibling::tr[count(./preceding-sibling::tr[td/@class=\"DT\"])=$count]', count=cnt) )\n... \n[&lt;Element tr at 0x7f948ab00548&gt;, &lt;Element tr at 0x7f948ab005e8&gt;, &lt;Element tr at 0x7f948ec02f98&gt;]\n[&lt;Element tr at 0x7f948ab00548&gt;, &lt;Element tr at 0x7f948ab00638&gt;]\n[&lt;Element tr at 0x7f948ab00548&gt;, &lt;Element tr at 0x7f948ab005e8&gt;, &lt;Element tr at 0x7f948ab00688&gt;]\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Hm, we're selecting 1 row too much in each iteration.</p>\n\n<p>That's because <code>&lt;tr&gt;&lt;td class=\"DT\"&gt;30-04-14&lt;/td&gt;</code> also has 1 preceding <code>&lt;tr&gt;&lt;td class=\"DT\"&gt;</code></p>\n\n<p>We can add an extra predicate for selecting rows that do NOT have a <code>&lt;td class=\"DT\"&gt;</code></p>\n\n<pre><code>&gt;&gt;&gt; for cnt, row in enumerate(doc.xpath('//table/tr[td/@class=\"DT\"]'), start=1):\n...     print( row.xpath('''\n...         ./following-sibling::tr[count(./preceding-sibling::tr[td/@class=\"DT\"])=$count]\n...                                [not(td/@class=\"DT\")]''', count=cnt) )\n... \n[&lt;Element tr at 0x7f948ab00548&gt;, &lt;Element tr at 0x7f948ab005e8&gt;]\n[&lt;Element tr at 0x7f948ab00548&gt;]\n[&lt;Element tr at 0x7f948ab00548&gt;, &lt;Element tr at 0x7f948ab005e8&gt;, &lt;Element tr at 0x7f948ab00688&gt;]\n&gt;&gt;&gt; \n</code></pre>\n\n<p>The number of results per iteration looks right.\nLet's finally check using text nodes:</p>\n\n<pre><code>&gt;&gt;&gt; for cnt, row in enumerate(doc.xpath('//table/tr[td/@class=\"DT\"]'), start=1):\n...     print( row.xpath('''\n...         ./following-sibling::tr[count(./preceding-sibling::tr[td/@class=\"DT\"])=$count]\n...                                [not(td/@class=\"DT\")]\n...             /td/text()''', count=cnt) )\n... \n['Some other text', 'Some more text']\n['more text']\n['Some other Text', 'More Text', 'Some different text']\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3165748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255f4a2234bcf43150e6b439038df2fa?s=128&d=identicon&r=PG&f=1", "display_name": "Gino", "link": "https://stackoverflow.com/users/3165748/gino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1109, "favorite_count": 0, "accepted_answer_id": 38241458, "answer_count": 1, "score": 1, "last_activity_date": 1467882775, "creation_date": 1467834462, "question_id": 38232560, "link": "https://stackoverflow.com/questions/38232560/xpath-following-siblings-until-another-sibling", "title": "Xpath following siblings until another sibling", "body": "<p>I'm new to using Xpath. I'm trying to parse some data in Python using Xpath.</p>\n\n<p>Parsing the following HTML:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td class=\"DT\"&gt;29-04-14&lt;/td&gt;\n        &lt;td class=\"Regio\"&gt;Text&lt;/td&gt;\n        &lt;td class=\"Md\"&gt;Text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td class=\"SomeClass\"&gt;Some other text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td class=\"SomeOtherClass\"&gt;Some more text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td class=\"DT\"&gt;22-04-14&lt;/td&gt;\n        &lt;td class=\"Regio\"&gt;Text&lt;/td&gt;\n        &lt;td class=\"Md\"&gt;Text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td class=\"OmsAm\"&gt;more text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td class=\"DT\"&gt;30-04-14&lt;/td&gt;\n        &lt;td class=\"Regio\"&gt;Text&lt;/td&gt;\n        &lt;td class=\"Md\"&gt;Text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td class=\"OmsBr\"&gt;Some other Text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td class=\"OmsBr\"&gt;More Text&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td class=\"OmsBr\"&gt;Some different text&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I need all <code>&lt;td&gt;</code> in following siblings <code>&lt;tr&gt;</code> after a <code>&lt;tr&gt;</code> with some values in his <code>&lt;td&gt;</code>s, but <em>until</em> the next <code>&lt;tr&gt;</code> with some values in all <code>&lt;td&gt;</code>s. </p>\n\n<p>E.g. assuming my current position is the first <code>&lt;tr&gt;</code>, I would need these table cells:</p>\n\n<pre><code>    &lt;td class=\"SomeClass\"&gt;Some other text&lt;/td&gt;\n    &lt;td class=\"SomeOtherClass\"&gt;Some more text&lt;/td&gt;\n</code></pre>\n\n<p>Assuming my current position is the table row 4</p>\n\n<pre><code>&lt;tr&gt;\n    &lt;td class=\"DT\"&gt;22-04-14&lt;/td&gt;\n    &lt;td class=\"Regio\"&gt;Text&lt;/td&gt;\n    &lt;td class=\"Md\"&gt;Text&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>I would only need</p>\n\n<pre><code>    &lt;td class=\"OmsAm\"&gt;more text&lt;/td&gt;\n</code></pre>\n\n<p>This is the Xpath I'm using to get all sibling <code>&lt;tr&gt;</code>, but it gets me <em>all</em> follinwg siblings, and not until the sibling it should stop: <code>./following-sibling::tr/td[1][not(text()[1])]/..</code></p>\n\n<p>I think I have to implement the Kayesian method, but I don't understand this in my case. Any help would be really apreciated!</p>\n"}, {"tags": ["python", "eclipse", "pydev"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6471536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e0db72ec3c245c4ac14b056b3f2eed3?s=128&d=identicon&r=PG&f=1", "display_name": "Ramya", "link": "https://stackoverflow.com/users/6471536/ramya"}, "edited": false, "score": 0, "creation_date": 1467923333, "post_id": 38249938, "comment_id": 63930469, "body": "Yes, that was the issue. I had figured it out. Thanks for your answer though. :)"}], "tags": [], "owner": {"reputation": 23516, "user_id": 110451, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70fc26faedcbfc82344a0b347053aaa0?s=128&d=identicon&r=PG", "display_name": "Fabio Zadrozny", "link": "https://stackoverflow.com/users/110451/fabio-zadrozny"}, "is_accepted": true, "score": 1, "last_activity_date": 1467906540, "creation_date": 1467906540, "answer_id": 38249938, "question_id": 38232517, "link": "https://stackoverflow.com/questions/38232517/not-getting-the-python-run-option-in-pydev-perspective/38249938#38249938", "title": "Not getting the Python Run option in PyDev perspective", "body": "<p>Maybe the issue is that you're not configuring the project as a PyDev project... See: <a href=\"http://www.pydev.org/manual_101_root.html\" rel=\"nofollow\">http://www.pydev.org/manual_101_root.html</a> for more details on how to configure a project.</p>\n\n<p>As a note, you should be using the \"PyDev package explorer view\" and not the plain \"Navigator view\" (valid modules should have a different icon there so it's easy to differentiate from a file in a configured project vs file in a project that's not configured).</p>\n"}, {"tags": [], "owner": {"reputation": 431, "user_id": 6846195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ed7997ec520e0f942731bf283ec6f95?s=128&d=identicon&r=PG&f=1", "display_name": "cenkarioz", "link": "https://stackoverflow.com/users/6846195/cenkarioz"}, "is_accepted": false, "score": 1, "last_activity_date": 1485658340, "creation_date": 1485658340, "answer_id": 41917183, "question_id": 38232517, "link": "https://stackoverflow.com/questions/38232517/not-getting-the-python-run-option-in-pydev-perspective/41917183#41917183", "title": "Not getting the Python Run option in PyDev perspective", "body": "<p>There might be a problem with your interpreter settings. May be this can help:\n<br><br> Go to Window\\Preferences\\PyDev\\Interpreters\\Python Interpreter\n<br> Click Quick Auto-Config on the top menu to automatically set the interpreter\n<br><br> Then you should be able to choose to run as Python Run</p>\n"}], "owner": {"reputation": 31, "user_id": 6471536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e0db72ec3c245c4ac14b056b3f2eed3?s=128&d=identicon&r=PG&f=1", "display_name": "Ramya", "link": "https://stackoverflow.com/users/6471536/ramya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3574, "favorite_count": 0, "accepted_answer_id": 38249938, "answer_count": 2, "score": 2, "last_activity_date": 1485658340, "creation_date": 1467834313, "question_id": 38232517, "link": "https://stackoverflow.com/questions/38232517/not-getting-the-python-run-option-in-pydev-perspective", "title": "Not getting the Python Run option in PyDev perspective", "body": "<p>I just installed PyDev to run python scripts from eclipse. I have a Java project which has a python script that I want to run. I am in PyDev perspective (did the following: Windows -> Perspective -> Open PErspective -> Other -> Pydev -> Ok). But when I right click on the python script it doesn't show me the \"Python Run\" option (shown in below image). How to run that script?</p>\n\n<p><a href=\"http://i.stack.imgur.com/x8PBA.png\" rel=\"nofollow\">Image</a></p>\n"}, {"tags": ["python", "arrays", "numpy", "array-broadcasting"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834440, "post_id": 38232497, "comment_id": 63886694, "body": "It&#39;s not running slowly for me at all, nor does it look like it should run slowly."}, {"owner": {"reputation": 171, "user_id": 4572570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde6bef5c10f95e71531a61a2c6a0111?s=128&d=identicon&r=PG&f=1", "display_name": "Chiefscreation", "link": "https://stackoverflow.com/users/4572570/chiefscreation"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834563, "post_id": 38232497, "comment_id": 63886771, "body": "@EliSadoff it will if I have 700 arrays all with shape (7000,7000) ..."}, {"owner": {"reputation": 2728, "user_id": 5237611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef9dbabde19ea7759116c85eea13340a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5237611/michael"}, "edited": false, "score": 0, "creation_date": 1467834853, "post_id": 38232497, "comment_id": 63886935, "body": "I&#39;m not sure how to do it in python but have you considered multi-threading or parallel processing? I know in C you can do this to speed up large data processing."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467835323, "post_id": 38232497, "comment_id": 63887194, "body": "You are not setting <code>max_x</code> and <code>max_y</code> correctly..."}], "answers": [{"comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1467835570, "post_id": 38232755, "comment_id": 63887315, "body": "Nicely done. I was about to write something like this. +1."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1467835670, "post_id": 38232755, "comment_id": 63887355, "body": "@rayryeng Good to see you with NumPy tag! ;)"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1467835692, "post_id": 38232755, "comment_id": 63887365, "body": "@Divakar It&#39;s on my feed :) I haven&#39;t been answering questions lately though... lots of stuff going on on my end."}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 1, "creation_date": 1467835760, "post_id": 38232755, "comment_id": 63887393, "body": "<a href=\"http://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.ndimage.filters.uniform_filter.html\" rel=\"nofollow noreferrer\">uniform_filter</a> is a short-cut for this... but since the <code>signal</code> module operates in the Fourier domain, I guess this would be faster?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1467835927, "post_id": 38232755, "comment_id": 63887479, "body": "@ImanolLuengo Ah uniform_filter seems much faster! Post that as a solution!"}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1467836057, "post_id": 38232755, "comment_id": 63887548, "body": "@Divakar I guess.. if <code>uniform_filter</code> is faster it must be because it does two 1D convolutions (by separating the kernel). I will check something before :P"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1467836126, "post_id": 38232755, "comment_id": 63887585, "body": "@ImanolLuengo Yeah, I am not sure about the internals of it, could be that."}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1467837217, "post_id": 38232755, "comment_id": 63888181, "body": "@Divakar <a href=\"https://github.com/scipy/scipy/blob/v0.15.1/scipy/ndimage/filters.py#L765\" rel=\"nofollow noreferrer\">just checked</a>, internally it calls N times (one for dimension) to <code>uniform_filter1d</code>, which is probably why it gets the speedup over the <code>signal</code> module. For all other non-separable filters, your <code>conv2d</code> should always be faster."}, {"owner": {"reputation": 171, "user_id": 4572570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde6bef5c10f95e71531a61a2c6a0111?s=128&d=identicon&r=PG&f=1", "display_name": "Chiefscreation", "link": "https://stackoverflow.com/users/4572570/chiefscreation"}, "reply_to_user": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1467916294, "post_id": 38232755, "comment_id": 63926712, "body": "Thanks @ImanolLuengo and Divakar for the answers! One more question, if I want to change mean to max, do you know what commands can do this? There doesn&#39;t seem to have max option in convolve2d..."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 171, "user_id": 4572570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde6bef5c10f95e71531a61a2c6a0111?s=128&d=identicon&r=PG&f=1", "display_name": "Chiefscreation", "link": "https://stackoverflow.com/users/4572570/chiefscreation"}, "edited": false, "score": 1, "creation_date": 1467917745, "post_id": 38232755, "comment_id": 63927591, "body": "@Chiefscreation Well there is max filter too in scipy : <a href=\"http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.ndimage.filters.maximum_filter.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy-0.16.0/reference/generated/&hellip;</a>"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 11, "last_activity_date": 1467836950, "last_edit_date": 1467836950, "creation_date": 1467835242, "answer_id": 38232755, "question_id": 38232497, "link": "https://stackoverflow.com/questions/38232497/numpy-replace-every-value-in-the-array-with-the-mean-of-its-adjacent-elements/38232755#38232755", "title": "Numpy: Replace every value in the array with the mean of its adjacent elements", "body": "<p>Well, that's a <a href=\"https://en.wikipedia.org/wiki/Smoothing\" rel=\"noreferrer\"><code>smoothing operation in image processing</code></a>, which can be achieved with <code>2D</code> convolution. You are working a bit differently on the near-boundary elements. So, if the boundary elements are let off for precision, you can use <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.convolve2d.html\" rel=\"noreferrer\"><code>scipy's convolve2d</code></a> like so -</p>\n\n<pre><code>from scipy.signal import convolve2d as conv2\n\nout = (conv2(a,np.ones((3,3)),'same')/9.0\n</code></pre>\n\n<p>This specific operation is a built-in in OpenCV module as <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/filtering.html?highlight=blur#blur\" rel=\"noreferrer\"><code>cv2.blur</code></a> and is very efficient at it. The name basically describes its operation of blurring the input arrays representing images. I believe the efficiency comes from the fact that internally its implemented entirely in <code>C</code> for performance with a thin Python wrapper to handle NumPy arrays.</p>\n\n<p>So, the output could be alternatively calculated with it, like so -</p>\n\n<pre><code>import cv2 # Import OpenCV module\n\nout = cv2.blur(a.astype(float),(3,3))\n</code></pre>\n\n<p>Here's a quick show-down on timings on a decently big image/array -</p>\n\n<pre><code>In [93]: a = np.random.randint(0,255,(5000,5000)) # Input array\n\nIn [94]: %timeit conv2(a,np.ones((3,3)),'same')/9.0\n1 loops, best of 3: 2.74 s per loop\n\nIn [95]: %timeit cv2.blur(a.astype(float),(3,3))\n1 loops, best of 3: 627 ms per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467837360, "post_id": 38233229, "comment_id": 63888254, "body": "Good findings! Gotta digest all that stuffs now."}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467837489, "post_id": 38233229, "comment_id": 63888319, "body": "@Divakar just found something quite interesting, for different <i>small</i> kernel sizes, the last 2 methods maintain <i>constant</i> execution time."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467838915, "post_id": 38233229, "comment_id": 63889024, "body": "I think I understood the uniform_filter&#39;s implementation with two passes to process this. That <code>fftconvolve</code>&#39;s internal implementation looks messy though. Thanks again for coming up with those useful findings!"}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1467841839, "post_id": 38233229, "comment_id": 63890352, "body": "@Divakar <a href=\"https://en.wikipedia.org/wiki/Separable_filter\" rel=\"nofollow noreferrer\">wikipedia</a> actually explains pretty well what <code>uniform_filter</code> is doing (essentially same example)!"}], "tags": [], "owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "is_accepted": false, "score": 4, "last_activity_date": 1467841855, "last_edit_date": 1467841855, "creation_date": 1467837029, "answer_id": 38233229, "question_id": 38232497, "link": "https://stackoverflow.com/questions/38232497/numpy-replace-every-value-in-the-array-with-the-mean-of-its-adjacent-elements/38233229#38233229", "title": "Numpy: Replace every value in the array with the mean of its adjacent elements", "body": "<p>Following the discussion with @Divakar, find bellow a comparison of different convolution methods present in scipy:</p>\n\n<pre><code>import numpy as np\nfrom scipy import signal, ndimage\n\ndef conv2(A, size):\n    return signal.convolve2d(A, np.ones((size, size)), mode='same') / float(size**2)\n\ndef fftconv(A, size):\n    return signal.fftconvolve(A, np.ones((size, size)), mode='same') / float(size**2)\n\ndef uniform(A, size):\n    return ndimage.uniform_filter(A, size, mode='constant')\n</code></pre>\n\n<p>All 3 methods return exactly the same value. However, note that <code>uniform_filter</code> has a parameter <code>mode='constant'</code>, which indicates the boundary conditions of the filter, and <code>constant == 0</code> is the same boundary condition that the Fourier domain (in the other 2 methods) is enforced. For different use cases you can change the boundary conditions.</p>\n\n<p>Now some test matrices:</p>\n\n<pre><code>A = np.random.randn(1000, 1000)\n</code></pre>\n\n<p>And some timings:</p>\n\n<pre><code>%timeit conv2(A, 3)     # 33.8 ms per loop\n%timeit fftconv(A, 3)   # 84.1 ms per loop\n%timeit uniform(A, 3)   # 17.1 ms per loop\n\n%timeit conv2(A, 5)     # 68.7 ms per loop\n%timeit fftconv(A, 5)   # 92.8 ms per loop\n%timeit uniform(A, 5)   # 17.1 ms per loop\n\n%timeit conv2(A, 10)     # 210 ms per loop\n%timeit fftconv(A, 10)   # 86 ms per loop\n%timeit uniform(A, 10)   # 16.4 ms per loop\n\n%timeit conv2(A, 30)     # 1.75 s per loop\n%timeit fftconv(A, 30)   # 102 ms per loop\n%timeit uniform(A, 30)   # 16.5 ms per loop\n</code></pre>\n\n<p>So in short, <code>uniform_filter</code> seems faster, and it because the <a href=\"https://en.wikipedia.org/wiki/Separable_filter\" rel=\"nofollow\">convolution is separable</a> in two 1D convolutons (similar to <a href=\"http://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.ndimage.filters.gaussian_filter.html#scipy.ndimage.filters.gaussian_filter\" rel=\"nofollow\">gaussian_filter</a> which is also separable). </p>\n\n<p>Other non-separable filters with different kernels are more likely to be faster using <code>signal</code> module (the one in @Divakar's) solution.</p>\n\n<p>The speed of both <code>fftconvolve</code> and <code>uniform_filter</code> remains <em>constant</em> for different kernel sizes, while <code>convolve2d</code> gets slightly slower.</p>\n"}, {"tags": [], "owner": {"reputation": 889, "user_id": 7847903, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9a596b316a9beab18979ca27e317973b?s=128&d=identicon&r=PG&f=1", "display_name": "GeorgeLPerkins", "link": "https://stackoverflow.com/users/7847903/georgelperkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1503003483, "creation_date": 1503003483, "answer_id": 45744849, "question_id": 38232497, "link": "https://stackoverflow.com/questions/38232497/numpy-replace-every-value-in-the-array-with-the-mean-of-its-adjacent-elements/45744849#45744849", "title": "Numpy: Replace every value in the array with the mean of its adjacent elements", "body": "<p>I had a similar problem recently and had to find a different solution since I can't use scipy.</p>\n\n<pre><code>import numpy as np\n\na = np.random.randint(100, size=(7000,7000)) #Array of 7000 x 7000\nrow,col = a.shape\n\ncolumn_totals =  a.sum(axis=0) #Dump the sum of all columns into a single array\n\nnew_array = np.zeros([row,col]) #Create an receiving array\n\nfor i in range(row):\n    #Resulting row = the value of all rows minus the orignal row, divided by the row number minus one. \n    new_array[i] = (column_totals - a[i]) / (row - 1)\n\nprint(new_array)\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 4572570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde6bef5c10f95e71531a61a2c6a0111?s=128&d=identicon&r=PG&f=1", "display_name": "Chiefscreation", "link": "https://stackoverflow.com/users/4572570/chiefscreation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1335, "favorite_count": 1, "accepted_answer_id": 38232755, "answer_count": 3, "score": 5, "last_activity_date": 1503003483, "creation_date": 1467834243, "last_edit_date": 1467834680, "question_id": 38232497, "link": "https://stackoverflow.com/questions/38232497/numpy-replace-every-value-in-the-array-with-the-mean-of-its-adjacent-elements", "title": "Numpy: Replace every value in the array with the mean of its adjacent elements", "body": "<p>I have an ndarray, and I want to replace every value in the array with the mean of its adjacent elements. The code below can do the job, but it is super slow when I have 700 arrays all with shape (7000, 7000) , so I wonder if there are better ways to do it. Thanks!</p>\n\n<pre><code>a = np.array(([1,2,3,4,5,6,7,8,9],[4,5,6,7,8,9,10,11,12],[3,4,5,6,7,8,9,10,11]))\nrow,col = a.shape\nnew_arr = np.ndarray(a.shape)\nfor x in xrange(row):\n    for y in xrange(col):\n        min_x = max(0, x-1)\n        min_y = max(0, y-1)\n        new_arr[x][y] = a[min_x:(x+2),min_y:(y+2)].mean()\nprint new_arr\n</code></pre>\n"}, {"tags": ["python", "windows-shortcut"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834258, "post_id": 38232465, "comment_id": 63886593, "body": "What is the shortcut?"}, {"owner": {"reputation": 327, "user_id": 6194302, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/55c1c6c1398f14ca01e5af4ac4307320?s=128&d=identicon&r=PG&f=1", "display_name": "A Display Name", "link": "https://stackoverflow.com/users/6194302/a-display-name"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834296, "post_id": 38232465, "comment_id": 63886616, "body": "I&#39;m assuming you mean, what type of shortcut is it? It&#39;s an Icon Shortcut (Not An Internet Shortcut) Also I made the shortcut which might mean that other pcs cannot open - but I really don&#39;t know."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834353, "post_id": 38232465, "comment_id": 63886644, "body": "No, I mean what is the code for the shortcut? It&#39;s going to be very hard to fix this if we can&#39;t see that code/no one will help without the code."}, {"owner": {"reputation": 327, "user_id": 6194302, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/55c1c6c1398f14ca01e5af4ac4307320?s=128&d=identicon&r=PG&f=1", "display_name": "A Display Name", "link": "https://stackoverflow.com/users/6194302/a-display-name"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834397, "post_id": 38232465, "comment_id": 63886671, "body": "I&#39;ll add it to the question XD"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834582, "post_id": 38232465, "comment_id": 63886780, "body": "Well the first issue I see is that in python you must use <code>\\\\ </code> where there is a <code>\\ </code> because it reads <code>\\ </code> as an escape character so fix that, and see what&#39;s happening."}, {"owner": {"reputation": 327, "user_id": 6194302, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/55c1c6c1398f14ca01e5af4ac4307320?s=128&d=identicon&r=PG&f=1", "display_name": "A Display Name", "link": "https://stackoverflow.com/users/6194302/a-display-name"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834695, "post_id": 38232465, "comment_id": 63886855, "body": "I don&#39;t think that will solve it, I think it is because the shortcut roots to my username, so on other PC&#39;s who don&#39;t have my username it won&#39;t run - so how will I fix that? -"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834760, "post_id": 38232465, "comment_id": 63886892, "body": "You can use <code>%HOMEDRIVE%%HOMEPATH%\\Desktop\\...</code>."}, {"owner": {"reputation": 327, "user_id": 6194302, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/55c1c6c1398f14ca01e5af4ac4307320?s=128&d=identicon&r=PG&f=1", "display_name": "A Display Name", "link": "https://stackoverflow.com/users/6194302/a-display-name"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467834803, "post_id": 38232465, "comment_id": 63886910, "body": "Ok, where do i put that, target or start in? or both?"}, {"owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 0, "creation_date": 1467836349, "post_id": 38232465, "comment_id": 63887710, "body": "Are users guaranteed to place your game folder at a specific location on their file system? If not, you might need a <a href=\"http://stackoverflow.com/questions/1169556/making-a-windows-shortcut-start-relative-to-where-the-folder-is#8163798\">relative windows shortcut</a>."}], "owner": {"reputation": 327, "user_id": 6194302, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/55c1c6c1398f14ca01e5af4ac4307320?s=128&d=identicon&r=PG&f=1", "display_name": "A Display Name", "link": "https://stackoverflow.com/users/6194302/a-display-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467835744, "creation_date": 1467834151, "last_edit_date": 1467835744, "question_id": 38232465, "link": "https://stackoverflow.com/questions/38232465/shortcuts-wont-work-on-other-pcs", "title": "Shortcuts Wont Work On Other PCs", "body": "<p>I'm trying to distribute a Game, I made a shortcut so that people don't have to go searching through the game files to look for it.</p>\n\n<p>However, when another computer attempts to open the shortcut it doesn't open, instead it asks for a Network Password &amp; Username (something like that), please help!</p>\n\n<p>Extra Info:</p>\n\n<ul>\n<li>Using Python (2.7)</li>\n<li>Tried IExpress, Doesn't Do What I Need</li>\n<li>Tried Making Installer In Python - Doesn't Work</li>\n</ul>\n\n<p><strong>I'm thinking that I might need a program to create a shortcut, but I don't know.</strong></p>\n\n<p>Shortcut Code:</p>\n\n<pre><code>Target: \"C:\\Users\\Name\\Desktop\\Project Battle\\Project Battle Debug_Build V1.5\\Game\\Game.exe\"\n\nStart In: \"C:\\Users\\Name\\Desktop\\Project Battle\\Project Battle Debug_Build V1.5\\Game\"\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 2, "creation_date": 1467834247, "post_id": 38232452, "comment_id": 63886584, "body": "For me it works nice. Maybe restart <code>anaconda</code> or other IDE."}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1467834280, "post_id": 38232452, "comment_id": 63886603, "body": "Are you sure about the update? Can you confirm it by typing pd.__version__?"}, {"owner": {"reputation": 1796, "user_id": 1895314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26c6efbcd2fa647228645b685f2fbfa5?s=128&d=identicon&r=PG", "display_name": "Chong Tang", "link": "https://stackoverflow.com/users/1895314/chong-tang"}, "edited": false, "score": 0, "creation_date": 1467834327, "post_id": 38232452, "comment_id": 63886635, "body": "It works as expected on my machine. I am using pandas 0.18.1."}, {"owner": {"reputation": 379, "user_id": 6096125, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6c1ea677c6c5b51055871516c22c43e1?s=128&d=identicon&r=PG&f=1", "display_name": "itf", "link": "https://stackoverflow.com/users/6096125/itf"}, "edited": false, "score": 0, "creation_date": 1467834577, "post_id": 38232452, "comment_id": 63886776, "body": "Oh how embarrassing! Restarting the the IDE worked. Thanks guys!"}, {"owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 0, "creation_date": 1467835864, "post_id": 38232452, "comment_id": 63887446, "body": "Can you delete the question? TIA"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 6096125, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6c1ea677c6c5b51055871516c22c43e1?s=128&d=identicon&r=PG&f=1", "display_name": "itf", "link": "https://stackoverflow.com/users/6096125/itf"}, "edited": false, "score": 0, "creation_date": 1467834775, "post_id": 38232599, "comment_id": 63886898, "body": "Thanks! Here&#39;s a followup question: let&#39;s say df1 is now a dataframe with feature A, but the values are mixed doubles and triples (2- and 3-tuples). How can I extract the samples which contain only doubles? I tried doing this as df1.loc[len(df1.A)&gt;2,:], but it&#39;s clear that pandas doesn&#39;t broadcast the values the way I expect."}], "tags": [], "owner": {"reputation": 86, "user_id": 6540219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwaEv.jpg?s=128&g=1", "display_name": "c. leather", "link": "https://stackoverflow.com/users/6540219/c-leather"}, "is_accepted": false, "score": 1, "last_activity_date": 1467834640, "creation_date": 1467834640, "answer_id": 38232599, "question_id": 38232452, "link": "https://stackoverflow.com/questions/38232452/pandas-selection-by-callables/38232599#38232599", "title": "pandas selection by callables", "body": "<p>You can do what you want to do without the lambda function, as follows:</p>\n\n<pre><code>df1.loc[df1.A&gt;0,:]\n</code></pre>\n\n<p>Perhaps the docs are outdated.</p>\n"}, {"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 2, "last_activity_date": 1467835482, "last_edit_date": 1495542149, "creation_date": 1467835482, "answer_id": 38232812, "question_id": 38232452, "link": "https://stackoverflow.com/questions/38232452/pandas-selection-by-callables/38232812#38232812", "title": "pandas selection by callables", "body": "<p>You have to restart <code>IDE</code>.</p>\n\n<p>Your another <a href=\"https://stackoverflow.com/questions/38232452/pandas-selection-keyerror/38232812#comment63886898_38232599\">question</a>:</p>\n\n<p>Use <code>apply</code> with <code>len</code>:</p>\n\n<pre><code>import pandas as pd\n\ndata = {'A': [(1,2), (1,2), (1,2), (1,2), (1,2,4), (1,2,3)],\n        'B': [13, 98, 23, 45, 64, 10]}\n\ndf = pd.DataFrame(data)\n\nprint (df)\n           A   B\n0     (1, 2)  13\n1     (1, 2)  98\n2     (1, 2)  23\n3     (1, 2)  45\n4  (1, 2, 4)  64\n5  (1, 2, 3)  10\n\nprint (df[df.A.apply(len) &gt;2])\n\n           A   B\n4  (1, 2, 4)  64\n5  (1, 2, 3)  10\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 6096125, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6c1ea677c6c5b51055871516c22c43e1?s=128&d=identicon&r=PG&f=1", "display_name": "itf", "link": "https://stackoverflow.com/users/6096125/itf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 38232812, "answer_count": 2, "score": 2, "last_activity_date": 1468002396, "creation_date": 1467834100, "last_edit_date": 1468002396, "question_id": 38232452, "link": "https://stackoverflow.com/questions/38232452/pandas-selection-by-callables", "title": "pandas selection by callables", "body": "<p><strong>EDIT:</strong> Turns out my initial question was simply a versionitis issue. However, in the course of answering my initial question a few other questions were addressed, so I've reworded the questions and listed them below:</p>\n\n<ol>\n<li><p>I'm familiarizing myself with some pandas capabilities, namely <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#selection-by-callable\" rel=\"nofollow\">selection by callables</a>. The docs advise use of lambda functions, e.g. to extract all samples in dataframe df1 with value > 0 for feature 'A':</p>\n\n<pre><code>df1.loc[lambda df: df.A &gt; 0, :]\n</code></pre>\n\n<p>Is there a more compact, pythonic way to do this?</p></li>\n<li><p>Let's say df1 is now a dataframe with feature A, but the values are mixed doubles and triples (2- and 3-tuples). How can I extract the samples which contain only doubles? I tried doing this as <code>df1.loc[len(df1.A)&gt;2,:]</code>, but it's clear that pandas doesn't broadcast the values the way I expect.</p></li>\n</ol>\n"}, {"tags": ["python", "selenium", "firefox", "selenium-webdriver", "firefox-marionette"], "comments": [{"owner": {"reputation": 1887, "user_id": 3999025, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f179f4542183c3253e22896da1a813be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu Zhang", "link": "https://stackoverflow.com/users/3999025/yu-zhang"}, "edited": false, "score": 1, "creation_date": 1467841016, "post_id": 38232406, "comment_id": 63889979, "body": "can you please try using option.get_attribute(&quot;innerText&quot;) instead to acquire &quot;Custom&quot;? and can you please introduce a bit &quot;wait&quot; after you click on &quot;request&quot; so that the click will not be too fast to be missed."}, {"owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "reply_to_user": {"reputation": 1887, "user_id": 3999025, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f179f4542183c3253e22896da1a813be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu Zhang", "link": "https://stackoverflow.com/users/3999025/yu-zhang"}, "edited": false, "score": 0, "creation_date": 1467843386, "post_id": 38232406, "comment_id": 63891018, "body": "@YuZhang the current loop will reach the <code>option.click()</code> statement, if I change the conditional to <code>if option.get_attribute(&quot;innerText&quot;) == &quot;Custom&quot;:</code> the <code>click()</code> statement is never reached.  Waiting after the click also does nothing.  I&#39;m baffled."}, {"owner": {"reputation": 378, "user_id": 2469439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc728bab4b1be18f5e35f06a2b8f5953?s=128&d=identicon&r=PG", "display_name": "ishikun", "link": "https://stackoverflow.com/users/2469439/ishikun"}, "edited": false, "score": 1, "creation_date": 1467845759, "post_id": 38232406, "comment_id": 63891745, "body": "Try: <code>requests=Select(driver.find_element_by_id(&quot;Dropdownlistreque&zwnj;&#8203;sts&quot;)) requests.select_by_visible_text(&quot;Custom&quot;)</code>"}, {"owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "reply_to_user": {"reputation": 378, "user_id": 2469439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc728bab4b1be18f5e35f06a2b8f5953?s=128&d=identicon&r=PG", "display_name": "ishikun", "link": "https://stackoverflow.com/users/2469439/ishikun"}, "edited": false, "score": 0, "creation_date": 1467845902, "post_id": 38232406, "comment_id": 63891798, "body": "@ishikun I&#39;ve tried that too with no success"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1467850146, "post_id": 38232406, "comment_id": 63893030, "body": "I&#39;m wondering if it&#39;s the Marionette driver. Do you have a requirement to use the FF dev version? You might try the old driver and see if it works. You may have found a bug. Your code looks fine to me."}, {"owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1467852100, "post_id": 38232406, "comment_id": 63893490, "body": "@JeffC when I started this project FF 47 was not supported by Marionette with python (official instructions recommend FF Dev : <a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/&hellip;</a>) and  FF 47 was also not supported by the standard selenium web driver (wires I think).  Let me try it without marionette or with an older version."}, {"owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1467911600, "post_id": 38232406, "comment_id": 63924030, "body": "@JeffC No luck whenever I&#39;m using Marionette.  See my update above."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1467916413, "post_id": 38232406, "comment_id": 63926784, "body": "Yeah... that&#39;s a bummer. You should enter a bug for this issue if one doesn&#39;t exist already."}, {"owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1467917123, "post_id": 38232406, "comment_id": 63927205, "body": "@JeffC I submitted on here <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1285241\" rel=\"nofollow noreferrer\">bugzilla.mozilla.org/show_bug.cgi?id=1285241</a>"}], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "edited": false, "score": 0, "creation_date": 1467900969, "post_id": 38239051, "comment_id": 63916923, "body": "I tired the above code and it changed the value of the <code>&lt;select&gt;</code> but did not actually click the option thus not triggering the necessary JavaScript"}, {"owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "reply_to_user": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "edited": false, "score": 0, "creation_date": 1467902614, "post_id": 38239051, "comment_id": 63918230, "body": "You mean you like as simly open selectbox show all options and then click at option..Right??"}, {"owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "edited": false, "score": 0, "creation_date": 1467902788, "post_id": 38239051, "comment_id": 63918370, "body": "Your code just changes the label in the select box.  I just want to click the 6th option I do not need all the options to be shown."}, {"owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "reply_to_user": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "edited": false, "score": 0, "creation_date": 1467956346, "post_id": 38239051, "comment_id": 63939437, "body": "@pmaurais please try with my updated answer. it will trigger the onchange event...:)"}], "tags": [], "owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "is_accepted": true, "score": 0, "last_activity_date": 1467956309, "last_edit_date": 1467956309, "creation_date": 1467873983, "answer_id": 38239051, "question_id": 38232406, "link": "https://stackoverflow.com/questions/38232406/selenium-in-python-selecting-an-option/38239051#38239051", "title": "Selenium in Python: Selecting an Option", "body": "<p>If non of the work in your case you should try <code>.execute_script()</code> as below :-</p>\n\n<pre><code>select = driver.find_element_by_id(\"Dropdownlistrequests\")\n\ndriver.execute_script(\"var select = arguments[0]; for(var i = 0; i &lt; select.options.length; i++){ if(select.options[i].text == arguments[1]){ select.options[i].selected = true; } }\",select, \"Custom\")\n</code></pre>\n\n<p><strong>Edited</strong> :- Above code only select the provided option from select box. If you want trigger the <code>onchange</code> event as well when option selected, try as below :-</p>\n\n<pre><code>select = driver.find_element_by_id(\"Dropdownlistrequests\")\n\ndriver.execute_script(\"showDropdown = function (element) {var event; event = document.createEvent('MouseEvents'); event.initMouseEvent('mousedown', true, true, window); element.dispatchEvent(event); }; showDropdown(arguments[0]);\",select)\n# now you dropdown will be open\n\n\ndriver.find_element_by_xpath(\"//select[@id='Dropdownlistrequests']/option[text()='Custom']\").click()\n#this will click the option which text is custom and onchange event will be triggered.\n</code></pre>\n\n<p>Hope it will work for you..:)</p>\n"}], "owner": {"reputation": 414, "user_id": 5112469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xEm2F.jpg?s=128&g=1", "display_name": "pmaurais", "link": "https://stackoverflow.com/users/5112469/pmaurais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2273, "favorite_count": 0, "accepted_answer_id": 38239051, "answer_count": 1, "score": 1, "last_activity_date": 1467956309, "creation_date": 1467833963, "last_edit_date": 1492087305, "question_id": 38232406, "link": "https://stackoverflow.com/questions/38232406/selenium-in-python-selecting-an-option", "title": "Selenium in Python: Selecting an Option", "body": "<p>I am having no luck selecting an option from a <code>&lt;select&gt;</code> using selenium.  I have referenced <a href=\"https://sqa.stackexchange.com/questions/1355/what-is-the-correct-way-to-select-an-option-using-seleniums-python-webdriver\">https://sqa.stackexchange.com/questions/1355/what-is-the-correct-way-to-select-an-option-using-seleniums-python-webdriver</a></p>\n\n<p>The html code is as follows: </p>\n\n<pre><code>&lt;select name=\"Dropdownlistrequests\" onchange=\"javascript:setTimeout(&amp;#39;__doPostBack(\\&amp;#39;Dropdownlistrequests\\&amp;#39;,\\&amp;#39;\\&amp;#39;)&amp;#39;, 0)\" id=\"Dropdownlistrequests\" style=\"height:51px;width:174px;Z-INDEX: 104; LEFT: 280px; POSITION: absolute; TOP: 72px\"&gt;\n    &lt;option selected=\"selected\" value=\"1\"&gt;Previous Days&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Previous Month&lt;/option&gt;\n    &lt;option value=\"3\"&gt;Last 12 Hours&lt;/option&gt;\n    &lt;option value=\"4\"&gt;Demand Poll&lt;/option&gt;\n    &lt;option value=\"6\"&gt;Custom&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>I have tried </p>\n\n<pre><code>requests = driver.find_element_by_id(\"Dropdownlistrequests\")\nrequests.click()\nfor option in requests.find_elements_by_tag_name('option'):\n    if option.text == \"Custom\":\n        option.click()\n        break\n</code></pre>\n\n<p>And</p>\n\n<pre><code>requests = Select(driver.find_element_by_id(\"Dropdownlistrequests\"))\nrequests.select_by_value(\"6\")\n</code></pre>\n\n<p>And</p>\n\n<pre><code>b.find_element_by_xpath(\"//select[@id='Dropdownlistrequests']/option[text()='Custom']\").click()\n</code></pre>\n\n<p>Instead of selecting the appropriate option the browser does nothing and moves on to the next bit of code.  Could it have something to do the the javascript that is triggered by the onchange?</p>\n\n<p><strong>To provide some more context</strong>: I am running windows 7 enterprise and using selenium with marionette and Firefox developer edition 49.0a2</p>\n\n<p><strong>Update:</strong> This only sems to happen when usoing Marionette in python. I tried this same code in Java with and without Marionette and it worked</p>\n"}, {"tags": ["python", "mysql", "django", "rdms"], "comments": [{"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 3, "creation_date": 1467834041, "post_id": 38232364, "comment_id": 63886461, "body": "You need a primary key.  unique_together is not enough.  In Django primary key can&#39;t be composite.  Have you run migrations?"}, {"owner": {"reputation": 125, "user_id": 6472116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1d206b3cd800fe564af40eee2e35c6c4?s=128&d=identicon&r=PG&f=1", "display_name": "omgirok", "link": "https://stackoverflow.com/users/6472116/omgirok"}, "reply_to_user": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1467838860, "post_id": 38232364, "comment_id": 63888988, "body": "@joelgoldstick it makes no sense to set any of the fields to be a primary key. Creating an AutoField called id with primary_key=true doesn&#39;t seem to be playing well either."}, {"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1467838996, "post_id": 38232364, "comment_id": 63889060, "body": "I&#39;m at a loss that it didn&#39;t create a primary key on its own. Don&#39;t have a clue why not"}], "answers": [{"tags": [], "owner": {"reputation": 8555, "user_id": 484127, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/53AHb.jpg?s=128&g=1", "display_name": "tutuDajuju", "link": "https://stackoverflow.com/users/484127/tutudajuju"}, "is_accepted": true, "score": 2, "last_activity_date": 1467971270, "last_edit_date": 1467971270, "creation_date": 1467970518, "answer_id": 38263392, "question_id": 38232364, "link": "https://stackoverflow.com/questions/38232364/django-model-tries-to-auto-create-a-primary-key-field-even-though-it-is-already/38263392#38263392", "title": "Django model tries to auto-create a primary key field even though it is already specified", "body": "<p><strong><em>tl;dr: Recreate the table or add the \"id\" field to the database manually.</em></strong></p>\n\n<p>I don't believe it's possible to create a primary key in all databases.\nFor example when using SQLite, if I create a simplified version of your table, altering it to add a PK returns an error:</p>\n\n<pre><code>&gt; CREATE TABLE connections(src_MAC CHAR(17) NOT NULL, first_activity DATETIME NULL);\n&gt; INSERT INTO connections VALUES ('abcd1234',date('now'));\n&gt; ALTER TABLE connections add column id integer NOT NULL PRIMARY KEY AUTOINCREMENT;\nError: Cannot add a PRIMARY KEY column\n</code></pre>\n\n<p>Similarly, running a Django migration to create the field with SQLite simply fails to add the field silently (<em>possibly a Django issue</em>).</p>\n\n<p>If you're unlucky and use a database that <em>does not</em> support adding a primary key (if you're not sure, check by running the <code>ALTER</code> command), your best bet would be to dump the table data, drop the table, create a new table with a primary key and finally reload the table data. This seems also to be the safest way to do it generally.</p>\n\n<p>On the other hand if you do use a database that supports adding a primary key, you can either try to make migrations or alter the database manually.</p>\n\n<p>Creating the id field manually in Postgres is as simple as:</p>\n\n<pre><code>ALTER TABLE connections ADD COLUMN id SERIAL PRIMARY KEY;\n</code></pre>\n\n<p>This here is sufficient to make the Model usable in Django. Now for the hard way.</p>\n\n<hr>\n\n<p>It seems that <code>makemigrations</code> assumes an ID field already exists, and thus if you opt to use migrations, the initial migration would need a fix (remove the id field). You can create the CreateField migration manually thus:</p>\n\n<p><em><code>migrations/0002_connections_id.py</code></em></p>\n\n<pre><code># -*- coding: utf-8 -*-\n# Generated by Django 1.9.7 on 2016-07-08 08:56\nfrom __future__ import unicode_literals\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('testapp', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='connections',\n            name='id',\n            field=models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID'),\n        ),\n    ]\n</code></pre>\n\n<p>Unfortunately, this still doesn't seem to be enough, since the created column does not auto-increment (possibly <em>another Django issue</em>). The solution now would be to alter the created field like so:</p>\n\n<pre><code>&gt; ALTER TABLE connections ALTER id SET default nextval('connections_id_seq');\n</code></pre>\n\n<p>Finally the values make sense to Django and you can now query and create \"Connections\" instances as usual.</p>\n\n<p>Just in case anyone needs this later, I've pushed the code I used to test this to <a href=\"https://github.com/izzysoftware/inspectdb\" rel=\"nofollow\">this GitHub repo</a>.</p>\n"}], "owner": {"reputation": 125, "user_id": 6472116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1d206b3cd800fe564af40eee2e35c6c4?s=128&d=identicon&r=PG&f=1", "display_name": "omgirok", "link": "https://stackoverflow.com/users/6472116/omgirok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2344, "favorite_count": 1, "accepted_answer_id": 38263392, "answer_count": 1, "score": 2, "last_activity_date": 1467971270, "creation_date": 1467833796, "question_id": 38232364, "link": "https://stackoverflow.com/questions/38232364/django-model-tries-to-auto-create-a-primary-key-field-even-though-it-is-already", "title": "Django model tries to auto-create a primary key field even though it is already specified", "body": "<p>It is stated in the Django documentation that each model requires a Primary Key. In my MySQL schema it is specified that for my table the primary key is made up of multiple columns. Using inspectdb to auto-generate the model creates the unique_together Meta information. </p>\n\n<pre><code>class Connections(models.Model):\n    router = models.ForeignKey('Routers', models.CASCADE)\n    src_mac = models.CharField(db_column='src_MAC', max_length=17)  # Field name made lowercase.\n    src_ip = models.CharField(max_length=45, blank=True, null=True)\n    src_port = models.CharField(max_length=45)\n    dest_mac = models.CharField(db_column='dest_MAC', max_length=17, blank=True, null=True)  # Field name made lowercase.\n    dest_ip = models.CharField(max_length=45)\n    dest_port = models.CharField(max_length=45)\n    first_activity = models.DateTimeField(blank=True, null=True)\n    last_activity = models.DateTimeField(blank=True, null=True)\n    hits_counter = models.IntegerField(blank=True, null=True)\n\ndef __unicode__(self):\n    return self.src_ip\n\nclass Meta:\n      db_table = 'Connections'\n      unique_together = (('router', 'src_mac', 'src_port', 'dest_ip', 'dest_port'),)\n</code></pre>\n\n<p>When I go to run</p>\n\n<blockquote>\n  <p>> python manage.py shell</p>\n  \n  <blockquote>\n    <p>>>> Connections.objects.all()</p>\n  </blockquote>\n</blockquote>\n\n<p>it gives me the OperationalError: (1054, \"Unknown column 'Connections.id' in 'field list'\") to my understanding this means that Django is trying to auto-create the primary key column for Connections. \nHow do I get around this?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql", "pyspark-sql"], "answers": [{"tags": [], "owner": {"reputation": 16438, "user_id": 690430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/28190f5ce27f4213ac50f6f624c6ff52?s=128&d=identicon&r=PG", "display_name": "Kamil Sindi", "link": "https://stackoverflow.com/users/690430/kamil-sindi"}, "is_accepted": false, "score": 0, "last_activity_date": 1467834581, "last_edit_date": 1467834581, "creation_date": 1467834155, "answer_id": 38232467, "question_id": 38232249, "link": "https://stackoverflow.com/questions/38232249/spark-pivot-one-column-but-keep-others-intact/38232467#38232467", "title": "Spark pivot one column but keep others intact", "body": "<p>Here's a solution using <strong>join</strong>, which I'm hoping to avoid:</p>\n\n<p><strong>Sum dataframe</strong></p>\n\n<pre><code>df_sum = df.groupBy(\"UserID\").agg(F.sum(\"Plays\").alias(\"Plays\")).alias(\"df_sum\")\ndf_sum.show()\n\n+------+-----+\n|UserID|Plays|\n+------+-----+\n|    u1|    4|\n|    u2|    1|\n+------+-----+\n\nrowNumberWindow = Window.partitionBy(\"UserID\").orderBy(F.col(\"Time\"))\n</code></pre>\n\n<p><strong>Pivot dataframe</strong></p>\n\n<pre><code>rowNumberWindow = Window.partitionBy(\"UserID\").orderBy(F.col(\"Time\"))\n\ndf_piv = (df\n         .groupBy(\"UserID\", \"GameID\")\n         .agg(F.sum(\"Plays\").alias(\"Plays\"),\n              F.max(\"Score\").alias(\"Score\"),\n              F.min(\"Time\").alias(\"Time\"))\n         .select(F.col(\"*\"),\n                 F.row_number().over(rowNumberWindow).alias(\"GameNumber\"))\n         .filter(F.col(\"GameNumber\") &lt;= F.lit(2))\n         .withColumn(\"GameCol\", F.concat(F.lit(\"MaxScoreGame\"), F.col(\"GameNumber\")))\n         .groupBy(\"UserID\")\n         .pivot(\"GameCol\", [\"MaxScoreGame1\", \"MaxScoreGame2\"])  \n         .agg(F.max(\"Score\"))\n        ).alias(\"df_piv\")\n\ndf_piv.show()\n\n+------+-------------+-------------+\n|UserID|MaxScoreGame1|MaxScoreGame2|\n+------+-------------+-------------+\n|    u1|           10|            5|\n|    u2|            1|         null|\n+------+-------------+-------------+\n</code></pre>\n\n<p><strong>Joined dataframe</strong></p>\n\n<pre><code>df_joined = df_sum.join(df_piv, F.col(\"df_sum.UserID\") == F.col(\"df_piv.UserID\"))\n\ndf_joined.show()\n\n+------+-----+------+-------------+-------------+\n|UserID|Plays|UserID|MaxScoreGame1|MaxScoreGame2|\n+------+-----+------+-------------+-------------+\n|    u1|    4|    u1|           10|            5|\n|    u2|    1|    u2|            1|         null|\n+------+-----+------+-------------+-------------+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": true, "score": 1, "last_activity_date": 1467835830, "creation_date": 1467835830, "answer_id": 38232893, "question_id": 38232249, "link": "https://stackoverflow.com/questions/38232249/spark-pivot-one-column-but-keep-others-intact/38232893#38232893", "title": "Spark pivot one column but keep others intact", "body": "<p>I don't think it is a real improvement but you can add total number of plays </p>\n\n<pre><code>...\n.select(\n  F.col(\"*\"),\n  F.row_number().over(rowNumberWindow).alias(\"GameNumber\"),\n  F.sum(\"Plays\").over(rowNumberWindow.orderBy()).alias(\"total_plays\")\n)\n...\n</code></pre>\n\n<p>and use it later as a secondary grouping column for <code>pivot</code>:</p>\n\n<pre><code>...\n.groupBy(\"UserID\", \"total_plays\")\n.pivot(\"GameCol\", [\"MaxScoreGame1\", \"MaxScoreGame2\"])\n.agg(F.max(\"Score\"))\n...\n</code></pre>\n"}], "owner": {"reputation": 16438, "user_id": 690430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/28190f5ce27f4213ac50f6f624c6ff52?s=128&d=identicon&r=PG", "display_name": "Kamil Sindi", "link": "https://stackoverflow.com/users/690430/kamil-sindi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 1, "accepted_answer_id": 38232893, "answer_count": 2, "score": 2, "last_activity_date": 1467836914, "creation_date": 1467833304, "last_edit_date": 1467836914, "question_id": 38232249, "link": "https://stackoverflow.com/questions/38232249/spark-pivot-one-column-but-keep-others-intact", "title": "Spark pivot one column but keep others intact", "body": "<p>Given the following dataframe, how do I pivot the max scores but aggregate the sum of plays?</p>\n\n<pre><code>from pyspark import SparkContext\nfrom pyspark.sql import HiveContext\nfrom pyspark.sql import functions as F\nfrom pyspark.sql import Window\n\ndf = sqlContext.createDataFrame([\n    (\"u1\", \"g1\", 10, 0, 1),\n    (\"u1\", \"g3\", 2, 2, 1),\n    (\"u1\", \"g3\", 5, 3, 1),\n    (\"u1\", \"g4\", 5, 4, 1),\n    (\"u2\", \"g2\", 1, 1, 1),\n], [\"UserID\", \"GameID\", \"Score\", \"Time\", \"Plays\"])\n</code></pre>\n\n<p><strong>Desired Output</strong></p>\n\n<pre><code>+------+-------------+-------------+-----+\n|UserID|MaxScoreGame1|MaxScoreGame2|Plays|\n+------+-------------+-------------+-----+\n|    u1|           10|            5|    4|\n|    u2|            1|         null|    1|\n+------+-------------+-------------+-----+\n</code></pre>\n\n<p>I posted a solution below but I'm hoping to avoid using join.</p>\n"}, {"tags": ["python", "gmail", "imap", "imaplib"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1467834067, "post_id": 38232243, "comment_id": 63886476, "body": "Try parenthesizing the flags parameter, and making it a raw string so the backslashes are kept: r&quot;(\\Inbox \\Important \\Sent \\Seen)&quot;"}, {"owner": {"reputation": 61, "user_id": 4337277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b0d7809c1c135d01a17e0bacd12b45?s=128&d=identicon&r=PG&f=1", "display_name": "Jerp Dertin", "link": "https://stackoverflow.com/users/4337277/jerp-dertin"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1467879055, "post_id": 38232243, "comment_id": 63901958, "body": "This gives the same output unfortunately!"}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 1, "creation_date": 1468059789, "post_id": 38232243, "comment_id": 63980053, "body": "Issuing a UID MOVE command to the &quot;[Gmail]/All Mail&quot; mailbox does the trick. You have to find that mailbox&#39; name using LIST first, unless you&#39;re doing this for just one locale. I have no idea how to convince the python imaplib to issue UID MOVE."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 4337277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b0d7809c1c135d01a17e0bacd12b45?s=128&d=identicon&r=PG&f=1", "display_name": "Jerp Dertin", "link": "https://stackoverflow.com/users/4337277/jerp-dertin"}, "is_accepted": false, "score": 2, "last_activity_date": 1468155669, "creation_date": 1468155669, "answer_id": 38292145, "question_id": 38232243, "link": "https://stackoverflow.com/questions/38232243/move-to-gmail-archive-python-imaplib/38292145#38292145", "title": "Move to Gmail Archive - Python Imaplib", "body": "<p>The Delete flag is not the same as the Trash flag, so if you set Delete, it will move it to the archive by removing any excess labels </p>\n\n<pre><code>self.connection.store(msg_id, '+FLAGS', '\\\\Deleted') \n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4337277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b0d7809c1c135d01a17e0bacd12b45?s=128&d=identicon&r=PG&f=1", "display_name": "Jerp Dertin", "link": "https://stackoverflow.com/users/4337277/jerp-dertin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1238, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1468155669, "creation_date": 1467833276, "question_id": 38232243, "link": "https://stackoverflow.com/questions/38232243/move-to-gmail-archive-python-imaplib", "title": "Move to Gmail Archive - Python Imaplib", "body": "<p>I'm trying to write a script which moves a particular email to Archive after getting its text, however I've looked all over the place and tried plenty of solutions. My understanding is that when a message is archived, all of its labels are removed and it only appears in the All Mail folder. </p>\n\n<p>This is my current code to try to remove any labels associated with the message, I believe that this should archive the message, however it seems to do nothing. There are no errors when running this code. </p>\n\n<pre><code>one, two = self.connection.store(msg_id, '-X-GM-LABELS', \"\\Inbox \\Important \\Sent \\Seen\")\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "crash", "pygame"], "comments": [{"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467833607, "post_id": 38232232, "comment_id": 63886233, "body": "What error are you getting?"}, {"owner": {"reputation": 57, "user_id": 6387757, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115602778503750/picture?type=large", "display_name": "Brian Howell", "link": "https://stackoverflow.com/users/6387757/brian-howell"}, "edited": false, "score": 0, "creation_date": 1467834504, "post_id": 38232232, "comment_id": 63886741, "body": "What debugging have you done before asking?"}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 6540219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwaEv.jpg?s=128&g=1", "display_name": "c. leather", "link": "https://stackoverflow.com/users/6540219/c-leather"}, "is_accepted": false, "score": 0, "last_activity_date": 1467833598, "creation_date": 1467833598, "answer_id": 38232318, "question_id": 38232232, "link": "https://stackoverflow.com/questions/38232232/why-does-my-game-crash-in-pygame-every-time-i-try-to-shoot/38232318#38232318", "title": "Why does my game crash in PYGAME every time I try to shoot", "body": "<p>It looks like once isShooting is set to True, the program gets stuck in the while loop (while isShooting:). It seems like you need a condition in the while loop to set isShooting back to False if a certain conditions is met, for example, if the v key is released.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6520275, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/476175a6e255774861420bf04c01724d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Biggs", "link": "https://stackoverflow.com/users/6520275/jake-biggs"}, "edited": false, "score": 0, "creation_date": 1467837743, "post_id": 38232349, "comment_id": 63888460, "body": "Thanks, I will try and fix this bug tomorrow (It is late in Worcester (UK)) but  thanks for your help"}], "tags": [], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "is_accepted": false, "score": 0, "last_activity_date": 1467833742, "last_edit_date": 1495539854, "creation_date": 1467833742, "answer_id": 38232349, "question_id": 38232232, "link": "https://stackoverflow.com/questions/38232232/why-does-my-game-crash-in-pygame-every-time-i-try-to-shoot/38232349#38232349", "title": "Why does my game crash in PYGAME every time I try to shoot", "body": "<p>Just get rid of the <code>while</code> loop. <code>while isShooting</code> should be removed. The player should shoot at most one time per game loop - any more than that and they won't be able to see the effects of them firing. Plus, you create an infinite loop. </p>\n\n<p>On another note, welcome to Stack Overflow! If you haven't yet, check out the tour <a href=\"https://stackoverflow.com/tour\">here</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 6520275, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/476175a6e255774861420bf04c01724d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Biggs", "link": "https://stackoverflow.com/users/6520275/jake-biggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1467833742, "creation_date": 1467833241, "question_id": 38232232, "link": "https://stackoverflow.com/questions/38232232/why-does-my-game-crash-in-pygame-every-time-i-try-to-shoot", "title": "Why does my game crash in PYGAME every time I try to shoot", "body": "<p>I am making a 2 player fighting game and whenever I try and press \"v\" the, the key to shoot my game seems to crash and not work. I am new to pygame and I am learning as I go. Any help is appreciated. Thanks!</p>\n\n<pre><code>import pygame\n\npygame.init()\n\n#Sets up 8 bit colours\nwhite = (255,255,255)\nblack = (0,0,0)\nred = (255,0,0)\ngreen = (0,255,0)\nblue = (0,0,255)\nlightblue = (180,235,255)\ngrassgreen =(20,200,50)\n\n#Sets up pygame window\ngameDisplay = pygame.display.set_mode((1000,600))\npygame.display.set_caption('Block Fighter')\n\n\n\n#Variables\ngameExit = False\nx = 0\ny = 0\nx_change = 0\ny_change = 0\nisShooting = False\n\nclock = pygame.time.Clock()\n\nclass Player:\n    def __init__(self, x_change, y_change, x, y):\n        self.x_change = 0\n        self.y_change = 0\n        self.x= 50\n        self.y= 480\n\n    def Left(self, x_change):\n        self.x_change = -5\n    def Right(self, x_change):\n        self.x_change =5\n    def Jump(self, y_change):\n        if (self.y == 480):\n            self.y_change = -70\n            return\np1 = Player(x_change, y_change, x, y)\n\nclass Bullet:\n    def __init__(self, x, y, Player, x_change):\n        self.x = p1.x\n        self.y = p1.y\n        self.x_change = 0\n    def Show(self, x_change, x , y, Player ):\n        pygame.draw.rect(gameDisplay, black , [p1.x,p1.y,5,5])\n        self.x_change = 10\nb1 = Bullet(x, y, Player, x_change)\n\n#Main Game Loop\nwhile not gameExit:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            gameExit = True\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_a:\n                p1.Left(x_change)\n            if event.key == pygame.K_d:\n                p1.Right(x_change)\n            if event.key == pygame.K_w:\n                p1.Jump(y_change)\n            if event.key == pygame.K_v:\n                b1.Show(x, y, x_change, Player)\n                isShooting = True\n        while isShooting:\n            pygame.draw.rect(gameDisplay, black, [b1.x, b1.y , 5,5])\n            if b1.x &gt; 1000:\n                pass\n        if event.type == pygame.KEYUP:\n            if event.key == pygame.K_a or event.key == pygame.K_d:\n                p1.x_change = 0\n\n    if p1.x &lt;= 0:\n        p1.x = 0\n    if p1.x &gt;= 500:\n        p1.x = 500\n\n    if p1.y &gt; 480:\n        p1.y_change = 0\n        p1.y = 480\n    if p1.y &lt; 480:\n        p1.y_change = 5\n\n    p1.x += p1.x_change\n    p1.y += p1.y_change\n    b1.x += b1.x_change\n    gameDisplay.fill(lightblue)\n    pygame.draw.rect(gameDisplay, grassgreen, [1000,600,-1000,-100])\n    pygame.draw.rect(gameDisplay, red, [p1.x,p1.y,20,20])\n    pygame.display.update()\n\n    clock.tick(40)\n\npygame.quit()\nquit()\n</code></pre>\n"}, {"tags": ["python", "qt", "user-interface", "pyqt"], "comments": [{"owner": {"reputation": 3092, "user_id": 1295678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c622a384410a309e4a20630fc5a0b88?s=128&d=identicon&r=PG", "display_name": "strubbly", "link": "https://stackoverflow.com/users/1295678/strubbly"}, "edited": false, "score": 0, "creation_date": 1467903180, "post_id": 38232231, "comment_id": 63918641, "body": "This code doesn&#39;t seem to be complete.  Can you create a working example (and strip out some of the unnecessary parts) so we can focus on the question."}, {"owner": {"reputation": 39, "user_id": 6510351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2e9e573fe1b5892076143c65cd0ae82?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Barbosa", "link": "https://stackoverflow.com/users/6510351/felipe-barbosa"}, "reply_to_user": {"reputation": 3092, "user_id": 1295678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c622a384410a309e4a20630fc5a0b88?s=128&d=identicon&r=PG", "display_name": "strubbly", "link": "https://stackoverflow.com/users/1295678/strubbly"}, "edited": false, "score": 0, "creation_date": 1467907943, "post_id": 38232231, "comment_id": 63921823, "body": "I completed the code. Do you have any idea how I can display the  [&#39;OFF&#39;, &#39;ON&#39;] as a combo box?"}, {"owner": {"reputation": 3092, "user_id": 1295678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c622a384410a309e4a20630fc5a0b88?s=128&d=identicon&r=PG", "display_name": "strubbly", "link": "https://stackoverflow.com/users/1295678/strubbly"}, "edited": false, "score": 0, "creation_date": 1468225464, "post_id": 38232231, "comment_id": 64021001, "body": "I figured you could do this with an <code>ItemDelegate</code> but I had a go and couldn&#39;t get it to work, sorry."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 6510351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2e9e573fe1b5892076143c65cd0ae82?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Barbosa", "link": "https://stackoverflow.com/users/6510351/felipe-barbosa"}, "is_accepted": true, "score": 1, "last_activity_date": 1473341560, "last_edit_date": 1473341560, "creation_date": 1470920059, "answer_id": 38897002, "question_id": 38232231, "link": "https://stackoverflow.com/questions/38232231/how-do-i-put-a-qcombobox-inside-qcolumnview/38897002#38897002", "title": "How do I put a QComboBox inside QColumnView", "body": "<p>I could not find a solution for that but I found a workaround, so I'm posting hoping to help who has the same problem as me.</p>\n\n<p>Once I couldnt put the combobox in the QColumnView as I was trying, my workaround was to create a table filled with the comboboxes I wanted, and then setting this QTable as the preview widget in QColumnView.</p>\n"}], "owner": {"reputation": 39, "user_id": 6510351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2e9e573fe1b5892076143c65cd0ae82?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Barbosa", "link": "https://stackoverflow.com/users/6510351/felipe-barbosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 38897002, "answer_count": 1, "score": 2, "last_activity_date": 1473341560, "creation_date": 1467833240, "last_edit_date": 1467907777, "question_id": 38232231, "link": "https://stackoverflow.com/questions/38232231/how-do-i-put-a-qcombobox-inside-qcolumnview", "title": "How do I put a QComboBox inside QColumnView", "body": "<p><strong>Scenario:</strong> I need to put a combo box inside the 4th column in qcolumnview, so the user can choose ON or OFF. </p>\n\n<p><strong>Description:</strong> In the future this will be saved as an XML file, so the user can select the parameter and generate a custom XML file.\nCan someone tell me how do I do that?</p>\n\n<pre><code>import sys\n\nfrom PyQt4 import QtGui, QtCore\n\n\nclass xml_creator(QtGui.QMainWindow):\n    def __init__(self):\n        super(xml_creator, self).__init__()\n        self.initUI()\n\n    def initUI(self):\n\n        column_view = QtGui.QColumnView(self)\n        self.setCentralWidget(column_view)\n\n        m_model = QtGui.QStandardItemModel()\n        column_view.setModel(m_model)\n        column_view.setAlternatingRowColors(True)\n\n        self.test_variables = {}\n        self.test_variables['OPTION_1'] = ['OFF', 'ON']\n        self.test_variables['OPTION_2'] = ['OFF', 'ON']\n\n        self.iq_xml = {}\n        self.iq_xml['TEST_1'] = {}\n        self.iq_xml['TEST_1']['Test_case_1'] = self.test_variables\n\n        for x in self.iq_xml:\n\n            if not self.iq_xml[x]:\n                continue\n            parent = QtGui.QStandardItem(x)\n            parent.setFlags(QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsSelectable)\n\n            for y in self.iq_xml[x]:\n                if not self.iq_xml[x][y]:\n                    continue\n                child0 = QtGui.QStandardItem(y)\n                child0.setFlags(QtCore.Qt.ItemIsEnabled)\n                parent.appendRow(child0)\n\n\n                for z in self.iq_xml[x][y]:\n                    if not self.iq_xml[x][y][z]:\n                        continue\n\n                    grand_child = QtGui.QStandardItem(z)\n                    grand_child.setFlags(QtCore.Qt.ItemIsEnabled)\n                    child0.appendRow(grand_child)\n\n                    value = self.iq_xml[x][y][z]\n                    grand_grand_child = QtGui.QStandardItem(str(value))\n                    grand_grand_child.setFlags(QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsEditable)\n                    grand_child.appendRow(grand_grand_child)\n\n            column_view.model().appendRow(parent)\n\n        column_view.setColumnWidths([200, 200, 200, 100])\n\n        self.setGeometry(300, 300, 1000, 300)\n        self.setWindowTitle('IQ XML Creator')\n        self.show()\n\ndef main():\n    app = QtGui.QApplication(sys.argv)\n    ex = xml_creator()\n    sys.exit(app.exec_())\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1467832915, "post_id": 38232059, "comment_id": 63885886, "body": "Btw. learn more about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, <i>not setting the pose</i> may be reproduced without pygame and all of your code logic."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5957273, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O32CKp_EF9c/AAAAAAAAAAI/AAAAAAAAAEY/1MgE8eSGMsk/photo.jpg?sz=128", "display_name": "Piggles The Pig", "link": "https://stackoverflow.com/users/5957273/piggles-the-pig"}, "edited": false, "score": 0, "creation_date": 1467835250, "post_id": 38232455, "comment_id": 63887142, "body": "Thank you! It works and I see what you mean."}], "tags": [], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "is_accepted": true, "score": 1, "last_activity_date": 1467834116, "creation_date": 1467834116, "answer_id": 38232455, "question_id": 38232059, "link": "https://stackoverflow.com/questions/38232059/basic-running-cycle-not-working/38232455#38232455", "title": "Basic Running Cycle Not working", "body": "<p>Rather than trying to pass by reference - which is what you're doing, try something like this:</p>\n\n<pre><code>def set_pose(pose):\n    if pose &gt;= 4:\n        return 1\n    else:\n        return pose + 1\n</code></pre>\n\n<p>Then when you're trying to update the <code>pose</code> variable elsewhere:</p>\n\n<p><code>pose = set_pose(pose)</code></p>\n\n<p>Would you agree that you can call the arguments to your function whatever you want? For example, <code>set_pose</code> could look like this and do <em>exactly</em> the same thing:</p>\n\n<pre><code>def set_pose(foo):\n    if foo &gt;= 4:\n        return 1\n    else:\n        return foo + 1\n</code></pre>\n\n<p>In other words, just because it's called <code>pose</code> inside the function doesn't mean it will refer to pose <em>outside</em> the function.</p>\n"}], "owner": {"reputation": 43, "user_id": 5957273, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O32CKp_EF9c/AAAAAAAAAAI/AAAAAAAAAEY/1MgE8eSGMsk/photo.jpg?sz=128", "display_name": "Piggles The Pig", "link": "https://stackoverflow.com/users/5957273/piggles-the-pig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1467835267, "accepted_answer_id": 38232455, "answer_count": 1, "score": 1, "last_activity_date": 1467834116, "creation_date": 1467832537, "question_id": 38232059, "link": "https://stackoverflow.com/questions/38232059/basic-running-cycle-not-working", "closed_reason": "Duplicate", "title": "Basic Running Cycle Not working", "body": "<p>I'm still new to python, and have started with pygame. I'm making an endless runner game, but I've run into a problem with my run cycle. Here's my code:</p>\n\n<pre><code>import pygame\nimport sys\nfrom pygame.locals import *\npygame.init()\nclock = pygame.time.Clock()\nclock2 = pygame.time.get_ticks()\nscreen = pygame.display.set_mode((640, 575))\nbgx = 0\nbgx2 = -800\nscroll = 10\npose = 1\nbackground = pygame.image.load(\"images/background2.png\").convert_alpha();\nplayer = pygame.image.load(\"images/character1.png\").convert_alpha();\nscreen.blit(background, (0, 0))\ndef draw_screen(x):\nscreen.blit(background, (x, 0))\ndef draw_screen2(x2):\nscreen.blit(background, (x2, 0))\ndef draw_player(pose):\n    if pose == 1:\n        player = pygame.image.load(\"images/character1.png\").convert_alpha();\n        screen.blit(player, (0, 0))\n    elif pose == 2:\n        player = pygame.image.load(\"images/character2.png\").convert_alpha();\n        screen.blit(player, (0, 0))\n    elif pose == 3:\n        player = pygame.image.load(\"images/character3.png\").convert_alpha();\n        screen.blit(player, (0, 0))\n    elif pose == 4:\n        player = pygame.image.load(\"images/character2.png\").convert_alpha();\n        screen.blit(player, (0, 0))\ndef set_poses(pose):\n    if pose == 1:\n        pose = 2\n    if pose == 2:\n        pose = 3\n    if pose == 3:\n        pose = 4\n    if pose == 4:\n        pose = 1\n\nwhile True: #Loop\n    clock2 = pygame.time.get_ticks()\n    #Quitting Function\n    for event in pygame.event.get():\n        if event.type == QUIT:\n            pygame.quit()\n            sys.exit()\n            quit()\n    clock.tick(50)\n    #Screen Scrolling\n    if bgx != 800:\n        bgx += scroll\n    else:\n        bgx = 0\n    if bgx2 != 0:\n        bgx2 += scroll\n    else:\n        bgx2 = -800\n    #Drawing Items\n    draw_screen2(bgx2)\n    draw_screen(bgx)\n    draw_player(pose)\n    if clock2%6 == 0:\n        set_poses(pose)\n    pygame.display.update()\n</code></pre>\n\n<p>So the screen is scrolling, and my character appears but he stays in his first position (Frame I guess.) at the part where it runs <code>set_poses(pose)</code> I tried having it also print something right before setting the pose, which it did, but its not setting the pose. I tried having it printing the pose, and it showed that the poses wasn't changing. So, yea, I've found my problem, but I can't for the life of me find a solution.</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1467833419, "post_id": 38232051, "comment_id": 63886136, "body": "Dictionaries consist of key, value pairs. You want to modify the values, not the keys."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6556617, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRIL6PgnZIM/AAAAAAAAAAI/AAAAAAAA1FE/8wLQGDHWStE/photo.jpg?sz=128", "display_name": "Stephan Sturges", "link": "https://stackoverflow.com/users/6556617/stephan-sturges"}, "edited": false, "score": 0, "creation_date": 1467897114, "post_id": 38232119, "comment_id": 63913849, "body": "Thanks! This works perfectly, except I had to use <code>[-8:]</code>  to keep only the last part of the string!"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 4, "last_activity_date": 1467897667, "last_edit_date": 1467897667, "creation_date": 1467832811, "answer_id": 38232119, "question_id": 38232051, "link": "https://stackoverflow.com/questions/38232051/can-i-replace-part-of-a-string-in-a-json-key-in-python/38232119#38232119", "title": "Can I replace part of a string in a JSON key in Python?", "body": "<p>Your replace logic failed as you need to reassign content to the new string,<code>str.replace</code> is not an inplace operation, it creates a new string:</p>\n\n<pre><code> content =  content.replace(\"D:\\\\Outgoing\\\\\", \"X:\\\\Incoming\\\\\")\n</code></pre>\n\n<p>Using the json approach just do a replace too, using the current value:</p>\n\n<pre><code>settings['normaldir'] =  settings['normaldir'].replace(\"D:\\\\Outgoing\\\\\", \"X:\\\\Incoming\\\\\")\n</code></pre>\n\n<p>You also would want  <code>truncate()</code> before you write or just reopen the file with w and dump/write the new value, if you really wanted to just keep the last 8 chars and prepend a string:</p>\n\n<pre><code>settings['normaldir'] =  \"X:\\\\Incoming\\\\\" + settings['normaldir'][-8:] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 1, "last_activity_date": 1467834209, "creation_date": 1467834209, "answer_id": 38232481, "question_id": 38232051, "link": "https://stackoverflow.com/questions/38232051/can-i-replace-part-of-a-string-in-a-json-key-in-python/38232481#38232481", "title": "Can I replace part of a string in a JSON key in Python?", "body": "<p>Python come with a <a href=\"https://docs.python.org/2.7/library/json.html\" rel=\"nofollow\">json</a> library.\nWith this library, you can read and write JSON files (or JSON strings).\nParsed data is converted to Python objects and vice versa.</p>\n\n<p>To use the <code>json</code> library, simply import it:</p>\n\n<pre><code>import json\n</code></pre>\n\n<p>Say your data is stored in <code>input_data.json</code> file.</p>\n\n<pre><code>input_data_path = \"input_data.json\"\n</code></pre>\n\n<p>You read the file like this:</p>\n\n<pre><code>import io\n\nwith io.open(input_data_path, mode=\"rb\") as fd:\n    obj = json.load(fd)\n</code></pre>\n\n<p>or, alternatively:</p>\n\n<pre><code>with io.open(input_data_path, mode=\"rb\") as fd:\n    content = fd.read()\nobj = json.loads(content)\n</code></pre>\n\n<p>Your data is automatically converted into Python objects, here you get a <code>dict</code>:</p>\n\n<pre><code>print(repr(obj))\n# {u'projectdir': u'D:\\\\Outgoing\\\\1622_2\\\\',\n#  u'normaldir': u'D:\\\\Outgoing\\\\1621_1\\\\'}\n</code></pre>\n\n<p><em>note: I'm using Python 2.7 so you get the unicode string prefixed by \"u\", like <code>u'projectdir'</code>.</em></p>\n\n<p>It's now easy to change the values for <code>normaldir</code> and <code>projectdir</code>:</p>\n\n<pre><code>obj[\"normaldir\"] = \"X:\\\\Incoming\\\\1621_1\\\\\"\nobj[\"projectdir\"] = \"X:\\\\Incoming\\\\1622_2\\\\\"\n</code></pre>\n\n<p>Since <code>obj</code> is a <code>dict</code>, you can also use the <code>update</code> method like this:</p>\n\n<pre><code>obj.update({'normaldir': \"X:\\\\Incoming\\\\1621_1\\\\\",\n            'projectdir': \"X:\\\\Incoming\\\\1622_2\\\\\"})\n</code></pre>\n\n<p>That way, you use a similar syntax like JSON.</p>\n\n<p>Finally, you can write your Python object back to JSON file:</p>\n\n<pre><code>output_data_path = \"output_data.json\"\n\nwith io.open(output_data_path, mode=\"wb\") as fd:\n    json.dump(obj, fd)\n</code></pre>\n\n<p>or, alternatively with indentation:</p>\n\n<pre><code>content = json.dumps(obj, indent=True)\nwith io.open(output_data_path, mode=\"wb\") as fd:\n    fd.write(content)\n</code></pre>\n\n<p><em>Remarks: reading/writing JSON objects is faster with a buffer (the <code>content</code> variable).</em></p>\n"}, {"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1467834433, "creation_date": 1467834433, "answer_id": 38232550, "question_id": 38232051, "link": "https://stackoverflow.com/questions/38232051/can-i-replace-part-of-a-string-in-a-json-key-in-python/38232550#38232550", "title": "Can I replace part of a string in a JSON key in Python?", "body": "<p><code>.replace</code> returns a new string, and don't change it. But you should not treat json-files as normal text files, so you can combine parsing json with replace:</p>\n\n<pre><code>def processscan(scanfile):\n    configfile= MonitorDirectory + scanfile\n    with open(configfile, 'rb') as settingsData:\n        settings = json.load(settingsData)\n\n    settings = {k: v.replace(\"D:\\\\Outgoing\\\\\", \"X:\\\\Incoming\\\\\")\n        for k, v in settings.items()\n    }\n\n    with open(configfile, 'wb') as settingsData:\n        json.dump(settings, settingsData)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6556617, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRIL6PgnZIM/AAAAAAAAAAI/AAAAAAAA1FE/8wLQGDHWStE/photo.jpg?sz=128", "display_name": "Stephan Sturges", "link": "https://stackoverflow.com/users/6556617/stephan-sturges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1383, "favorite_count": 0, "accepted_answer_id": 38232119, "answer_count": 3, "score": 3, "last_activity_date": 1467897667, "creation_date": 1467832516, "question_id": 38232051, "link": "https://stackoverflow.com/questions/38232051/can-i-replace-part-of-a-string-in-a-json-key-in-python", "title": "Can I replace part of a string in a JSON key in Python?", "body": "<p>This is my first question here, I'm new to python and trying to figure some things out to set up an automatic 3D model processing chain that relies on data being stored in JSON files moving from one server to another.</p>\n\n<p>The problem is that I need to store absolute paths to files that are being processed, but these absolute paths should be modified in the original JSON files upon the first time that they are processed.</p>\n\n<p>Basically the JSON file comes in like this:</p>\n\n<pre><code>{\n    \"normaldir\": \"D:\\\\Outgoing\\\\1621_1\\\\\", \n  \"projectdir\": \"D:\\\\Outgoing\\\\1622_2\\\\\"\n} \n</code></pre>\n\n<p>And I would like to rename the file paths to</p>\n\n<pre><code>    {\n\"normaldir\": \"X:\\\\Incoming\\\\1621_1\\\\\", \n  \"projectdir\": \"X:\\\\Incoming\\\\1622_2\\\\\", \n   } \n</code></pre>\n\n<p>What I've been trying to do is replace the first part of the path using this code, but it isn't working:</p>\n\n<pre><code>def processscan(scanfile):\n    configfile= MonitorDirectory + scanfile\n    with open(configfile, 'r+') as file:\n        content = file.read()\n        file.seek(0)\n        content.replace(\"D:\\\\Outgoing\\\\\", \"X:\\\\Incoming\\\\\")\n        file.write(content)\n</code></pre>\n\n<p>However this was not working at all, so I tried interpreting the JSON file properly and replacing the key code from <a href=\"https://gist.github.com/rascode/5527635\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>def processscan(scanfile):\n    configfile= MonitorDirectory + scanfile\n    with open(configfile, 'r+') as settingsData:\n        settings = json.load(settingsData)  \n        settings['normaldir'] = 'X:\\\\Incoming\\\\1621_1\\\\'\n        settings['projectdir'] = 'X:\\\\Incoming\\\\1622_2\\\\'\n        settingsData.seek(0)  # rewind to beginning of file\n        settingsData.write(json.dumps(settings,indent=2,sort_keys=True)) #write the updated version \n        settingsData.truncate() #truncate the remainder of the data in the file\n</code></pre>\n\n<p>This works perfectly, however I'm replacing the whole path so it won't really work for every JSON file that I need to process. What I would really like to do is to take a JSON key corresponding to a file path, keep the last 8 characters and replace the rest of the patch with a new string, but I can't figure out how to do this using json in python, as far as I can tell I can't edit part of a key.\nDoes anyone have a workaround for this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "hierarchical-data"], "comments": [{"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 1, "creation_date": 1467832805, "post_id": 38232046, "comment_id": 63885822, "body": "This looks like JSON, have you tried using python&#39;s <a href=\"https://docs.python.org/2.7/library/json.html\" rel=\"nofollow noreferrer\">json</a>"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 2, "creation_date": 1467832809, "post_id": 38232046, "comment_id": 63885824, "body": "The structure is deeply nested, so basically the way to transform this into a 2D data table is a matter of your designing decision. Why not store the data as JSON entries?"}, {"owner": {"reputation": 11, "user_id": 6557695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91f998febad220b5b945ef37bc0818c?s=128&d=identicon&r=PG&f=1", "display_name": "J.Wang", "link": "https://stackoverflow.com/users/6557695/j-wang"}, "edited": false, "score": 0, "creation_date": 1467834282, "post_id": 38232046, "comment_id": 63886604, "body": "The data is given to me like this. For those who suggest JSON, do that mean I need to save the data in JSON format first, then write codes on JSON format data?"}], "answers": [{"tags": [], "owner": {"reputation": 4368, "user_id": 6557569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/T3iVG.jpg?s=128&g=1", "display_name": "Szabolcs Dombi", "link": "https://stackoverflow.com/users/6557569/szabolcs-dombi"}, "is_accepted": false, "score": 0, "last_activity_date": 1467833169, "creation_date": 1467833169, "answer_id": 38232213, "question_id": 38232046, "link": "https://stackoverflow.com/questions/38232046/data-extraction-from-hierachial-text-using-python/38232213#38232213", "title": "Data extraction from hierachial text using Python", "body": "<p>use json format. if you want to store this in a relational database i have no idea how to do it. but you could store the data as json using MongoDB.</p>\n\n<pre><code>Root_file = {\n    \"Version\" : \"1.1\",\n    \"Clusters\" : [\n        {\n            \"ClusterName\" : \"cluster 1\",\n            \"Groups\" : [\n                {\n                    \"groupType\" : \"Type1\",\n                    \"Subgroup\" : {\n                        \"country\" : \"US\"\n                    }\n                },\n                {\n                    \"groupType\" : \"Type2\",\n                    \"Subgroup\" : {\n                        \"country\" : \"England\"\n                    }\n                }\n            ]\n        },\n        {\n            \"ClusterName\" : \"cluster 2\",\n            \"Groups\" : [\n                {\n                    \"groupType\" : \"Type1\",\n                    \"Subgroups\" : [\n                        {\n                            \"country\" : \"US\"\n                        },\n                        {\n                            \"country\" : \"China\"\n                        },\n                        {\n                            \"country\" : \"Germany\"\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7053, "user_id": 317971, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f3612eb48bbf7acfe2668d843af0618b?s=128&d=identicon&r=PG", "display_name": "augustomen", "link": "https://stackoverflow.com/users/317971/augustomen"}, "is_accepted": false, "score": 0, "last_activity_date": 1467839225, "creation_date": 1467839225, "answer_id": 38233775, "question_id": 38232046, "link": "https://stackoverflow.com/questions/38232046/data-extraction-from-hierachial-text-using-python/38233775#38233775", "title": "Data extraction from hierachial text using Python", "body": "<p>What you need is a <strong>parser</strong> for this data format. I don't know if it's a standard, therefore I don't know if there's a parser, but I came up with a parser that works <em>only</em> if the input if formatted as you have posted:</p>\n\n<pre><code>import re\ngroup_start_pattern = re.compile(r\"(\\w+)\\s*\\{\")\nvalue_pattern = re.compile(r\"(\\w+)\\s*\\=\\s*(.*)\")\n\ndef parse(src):\n    result = []\n    current_children = result\n    current_group = None\n    for line in src.split('\\n'):\n        line = line.strip()\n        if not line:\n            continue  # Empty line\n\n        match = value_pattern.search(line)\n        if match:\n            # It's a 'key = value' line\n            if current_group is None:\n                raise SyntaxError(\"No current group\")\n            key, value = match.groups()\n            current_group[key.strip()] = value.strip()\n            continue\n\n        match = group_start_pattern.search(line)\n        if match:\n            # It's a \"Group {\" opening line\n            current_group = {\n                'name': match.group(1),\n                'children': [],\n                'parent': current_group,\n            }\n            current_children.append(current_group)\n            current_children = current_group['children']\n            continue\n\n        if line.strip() == '}':\n            # Closing group\n            if current_group is None:\n                raise SyntaxError(\"No current group\")\n            current_group = current_group.pop('parent')\n            current_children = current_group['children'] if current_group else result\n            continue\n\n        raise SyntaxError(\"Invalid line: {!r}\".format(line))\n\n    if current_group:\n        raise SyntaxError(\"Missing closing braces\")\n    return result\n</code></pre>\n\n<p>For the given string, the output of this parser is a list of dicts:</p>\n\n<pre><code>[{'name': 'Root_file', 'Version': '\"1.1\"', 'children': [\n  {'name': 'Cluster', 'ClusterName': '\"cluster 1\"', 'children': [\n    {'groupType': 'Type1', 'children': [\n      {'name': 'Group', 'name': 'Subgroup', 'children': [], 'country': 'US'},\n    ]},\n    {'name': 'Group', 'groupType': 'Type2', 'children': [\n      {'country': 'England', 'name': 'Subgroup', 'children': []},\n    ]},\n  ]},\n  {'name': 'Cluster', 'ClusterName': '\"cluster 2\"', 'children': [\n    {'name': 'Group', 'groupType': 'Type1', 'children': [\n      {'name': 'Subgroup', 'country': 'US', 'children': []},\n      {'name': 'Subgroup', 'country': 'China', 'children': []},\n      {'name': 'Subgroup', 'country': 'Germany', 'children': []},\n    ]},\n  ]}],\n}]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6557695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91f998febad220b5b945ef37bc0818c?s=128&d=identicon&r=PG&f=1", "display_name": "J.Wang", "link": "https://stackoverflow.com/users/6557695/j-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467839225, "creation_date": 1467832492, "last_edit_date": 1467834531, "question_id": 38232046, "link": "https://stackoverflow.com/questions/38232046/data-extraction-from-hierachial-text-using-python", "title": "Data extraction from hierachial text using Python", "body": "<p>Below is the example of my hierarchical data. Using python, what is the best way to extract all the entry information and save them in a table with rows and columns organized based on the hierarchical structure. Is it possible to perform iteration over each Cluster ?</p>\n\n<pre><code>Root_file { \n    Version = \"1.1\"\n    Cluster {\n        ClusterName = \"cluster 1\"\n        Group {\n            groupType = Type1\n            Subgroup {\n                country = US\n            }\n        }\n        Group {\n            groupType = Type2\n            Subgroup {\n                country = England\n            }\n        }\n    }\n    Cluster {\n        ClusterName = \"cluster 2\"\n        Group {\n            groupType = Type1\n            Subgroup {\n                country = US\n            }\n            Subgroup {\n                country = China\n            }\n            Subgroup {\n                country = Germany\n            }\n        }\n    }\n}\n</code></pre>\n"}]