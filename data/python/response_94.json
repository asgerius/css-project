[{"tags": ["android", "python", "appium"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 7020034, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/6cd5863acdc2dedb69fc382b19bc5356?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/7020034/cody"}, "edited": false, "score": 0, "creation_date": 1477581881, "post_id": 40285112, "comment_id": 67835200, "body": "This worked! Thanks so much. I didn&#39;t know you could use xpaths without the index numbers."}], "tags": [], "owner": {"reputation": 820, "user_id": 5888357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xSUX5.png?s=128&g=1", "display_name": "Domestus", "link": "https://stackoverflow.com/users/5888357/domestus"}, "is_accepted": true, "score": 1, "last_activity_date": 1477572840, "creation_date": 1477572840, "answer_id": 40285112, "question_id": 40274008, "link": "https://stackoverflow.com/questions/40274008/how-to-get-the-number-of-items-in-an-expandablelistview-for-appium-using-python/40285112#40285112", "title": "How to get the number of items in an ExpandableListView for Appium using python?", "body": "<pre><code>actual_names = []\nexpected_names = [\"Abe\", \"Bob\", \"Carl\"]\nxpat = \"//android.widget.ExpandableListView/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.TextView\"\nelements = appium_driver.find_elements_by_xpath(xpat)\nfor element in elements:\n    text = element.text\n    actual_names.append(text)\n\nassert expected_names == actual_names\n</code></pre>\n\n<p>The difference here is that I'm using <code>appium_driver.find_elements_by_xpath()</code>, which will collect all elements that match the criteria given and give them as a list for you to look at.</p>\n\n<p>The xpath statement should not use the index numbers when you want to match against multiple elements with similar path, so I removed them.</p>\n"}], "owner": {"reputation": 107, "user_id": 7020034, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/6cd5863acdc2dedb69fc382b19bc5356?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/7020034/cody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 40285112, "answer_count": 1, "score": 0, "last_activity_date": 1477572840, "creation_date": 1477526353, "question_id": 40274008, "link": "https://stackoverflow.com/questions/40274008/how-to-get-the-number-of-items-in-an-expandablelistview-for-appium-using-python", "title": "How to get the number of items in an ExpandableListView for Appium using python?", "body": "<p>I'm trying to automate an Android app using Appium and python. I have a screen with a list view and I'd like to create a function that iterates through the list and returns the names in the list, then compares that to an expected list (alphabetization matters). I would like to use this function for screens that might have lists of different lengths, do I need to be able to determine the length of the list first.</p>\n\n<pre><code>actual_names = []\nexpected_names = [\"Abe\", \"Bob\", \"Carl\"]\nfor num in range(1, 4):\n    xpat = \"//android.widget.ExpandableListView[1]/android.widget.FrameLayout[\" + str(num) + \"]/android.widget.RelativeLayout[1]/android.widget.TextView[1]\"\n    text = appium_driver.find_element_by_xpath(xpat).text\n    actual_names.append(text)\n\nassert expected_names == actual_names\n</code></pre>\n\n<p>This code works, but only for one screen and only the exact number of items in the list. If the number of items in the list changes, it fails. This is very brittle. How can I improve this and make it more dynamic? I am using Python 3 and Appium 1.5.3</p>\n"}, {"tags": ["python", "list", "python-2.7", "divide-by-zero"], "comments": [{"owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 2, "creation_date": 1477526261, "post_id": 40273964, "comment_id": 67807507, "body": "<code>count</code> is probably zero because your first <code>words_list[words_list.index(each_word) + 1:]</code> is probably empty."}, {"owner": {"reputation": 141, "user_id": 5391187, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/54bc98c119c07a7f2b85c4721a129022?s=128&d=identicon&r=PG&f=1", "display_name": "windboy", "link": "https://stackoverflow.com/users/5391187/windboy"}, "reply_to_user": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1477526434, "post_id": 40273964, "comment_id": 67807554, "body": "Hi  kichik, i don&#39;t really understand. can you explain a little more please. Thanks"}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1477526583, "post_id": 40273964, "comment_id": 67807605, "body": "Have you looked at your error thoroughly? It should give the line number, and a snippet of the erroneous code."}, {"owner": {"reputation": 141, "user_id": 5391187, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/54bc98c119c07a7f2b85c4721a129022?s=128&d=identicon&r=PG&f=1", "display_name": "windboy", "link": "https://stackoverflow.com/users/5391187/windboy"}, "edited": false, "score": 0, "creation_date": 1477526663, "post_id": 40273964, "comment_id": 67807629, "body": "Hi leaf, this is the exact error message. I am new to python I have no idea how to debug it well."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 5391187, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/54bc98c119c07a7f2b85c4721a129022?s=128&d=identicon&r=PG&f=1", "display_name": "windboy", "link": "https://stackoverflow.com/users/5391187/windboy"}, "edited": false, "score": 0, "creation_date": 1477534664, "post_id": 40274908, "comment_id": 67809463, "body": "Thank you very much. You are correct, That is the problem. Thanks again."}], "tags": [], "owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "is_accepted": true, "score": 1, "last_activity_date": 1477533402, "creation_date": 1477533402, "answer_id": 40274908, "question_id": 40273964, "link": "https://stackoverflow.com/questions/40273964/zerodivisionerror-but-i-cant-find-the-error/40274908#40274908", "title": "ZeroDivisionError , but I can&#39;t find the error", "body": "<p>It is because the first <code>for</code> loop has reached the last word and the second <code>for</code> loop will not be executed and so the <code>count</code> equals to zero (reset to zero in last iteration).  Just change the first <code>for</code> loop to ignore the last word (since it is not necessary):</p>\n\n<pre><code>for each_word in words_list[:-1]:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1477533939, "creation_date": 1477533939, "answer_id": 40274991, "question_id": 40273964, "link": "https://stackoverflow.com/questions/40273964/zerodivisionerror-but-i-cant-find-the-error/40274991#40274991", "title": "ZeroDivisionError , but I can&#39;t find the error", "body": "<p>the line that goes wrong is directly stated in the error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/User/Desktop/Complete2/Complete/TrainedTedModel/LatestJR.py\", line 41, in &lt;module&gt;\n    avgScore = round(SentenceScore / count,5)\nZeroDivisionError: division by zero\n</code></pre>\n\n<p>so I'm going to assume that <code>SentenceScore / count</code> is the division in question so it is clear that <code>count</code> is 0, I would suggest right before that line you add something like:</p>\n\n<pre><code>print(\"SentenceScore is\",SentenceScore, \"and count is\",count)\n</code></pre>\n\n<p>so you can see this for yourself, now since the inner loop:</p>\n\n<p>for each_word2 in words_list[words_list.index(each_word) + 1:]:\n        count = count + 1</p>\n\n<p>is the only thing that adds to count and count is being reset to zero at the end of each iteration of the outer loop that would mean that the inner loop is not running at all at some point, meaning that <code>words_list[words_list.index(each_word) + 1:]</code> is an empty sequence. This will happen when <code>each_word</code> is the last word in <code>words_list</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 5391187, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/54bc98c119c07a7f2b85c4721a129022?s=128&d=identicon&r=PG&f=1", "display_name": "windboy", "link": "https://stackoverflow.com/users/5391187/windboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 40274908, "answer_count": 2, "score": 0, "last_activity_date": 1477533939, "creation_date": 1477526119, "last_edit_date": 1477526298, "question_id": 40273964, "link": "https://stackoverflow.com/questions/40273964/zerodivisionerror-but-i-cant-find-the-error", "title": "ZeroDivisionError , but I can&#39;t find the error", "body": "<p>I have a small encountered a zero error but I can't find it. My intention is to compare a text file which contains these words.</p>\n\n<pre><code>secondly\npardon\nwoods\nsecondly\n</code></pre>\n\n<p>I wrote the script to compare the two values this way:</p>\n\n<pre><code>secondly, pardon\nsecondly, woods\nsecondly, secondly\npardon, woods\npardon, secondly\nwoods, secondly\n</code></pre>\n\n<p>My code does the following:</p>\n\n<p>1) if words are the same it will give a score of 1 otherwise it is a score calculated by the gensim vector model\n2) there is a counter and the counter will reset when the first for loop moves to the next word. Eg, secondly,pardon > secondly, woods > secondly, secondly ( at this point the count is 3) </p>\n\n<p><strong>The code</strong></p>\n\n<pre><code>from __future__ import division\nimport gensim\n\n\ntextfile = 'businessCleanTxtUniqueWords'\nmodel = gensim.models.Word2Vec.load(\"businessSG\")\ncount = 0  # keep track of counter\nscore = 0\navgScore = 0\nSentenceScore = 0\nexternalCount = 0\ntotalAverageScore = 0\n\nwith open(textfile, 'r+') as f1:\n\n    words_list = f1.readlines()\n\n    for each_word in words_list:\n        word = each_word.strip()\n\n        for each_word2 in words_list[words_list.index(each_word) + 1:]:\n            count = count + 1\n\n            try:\n                word2 = each_word2.strip()\n                print(word, word2)\n                # if words are the same\n                if (word == word2):\n                    score = 1\n                else:\n                    score = model.similarity(word,word2) # when words are not the same\n            # if word is not in vector model\n            except KeyError:\n                score = 0\n            # to keep track of the score\n            SentenceScore=SentenceScore + score\n\n            print(\"the score is: \" + str(score))\n            print(\"the count is: \" + str(count))\n        # average score\n        avgScore = round(SentenceScore / count,5)\n\n        print(\"the avg score: \" + str(SentenceScore) + '/' + str(count) + '=' + str(avgScore))\n        # reset counter and sentence score\n        count = 0\n        SentenceScore = 0\n</code></pre>\n\n<p><strong>The error message:</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/User/Desktop/Complete2/Complete/TrainedTedModel/LatestJR.py\", line 41, in &lt;module&gt;\n    avgScore = round(SentenceScore / count,5)\nZeroDivisionError: division by zero\n('secondly', 'pardon')\nthe score is: 0.180233083443\nthe count is: 1\n('secondly', 'woods')\nthe score is: 0.181432347816\nthe count is: 2\n('secondly', 'secondly')\nthe score is: 1\nthe count is: 3\nthe avg score: 1.36166543126/3=0.45389\n('pardon', 'woods')\nthe score is: 0.405021005657\nthe count is: 1\n('pardon', 'secondly')\nthe score is: 0.180233083443\nthe count is: 2\nthe avg score: 0.5852540891/2=0.29263\n('woods', 'secondly')\nthe score is: 0.181432347816\nthe count is: 1\nthe avg score: 0.181432347816/1=0.18143\n</code></pre>\n\n<p>I have included \" <code>from __future__ import division</code> \" for the division but it does not seem to fix it</p>\n\n<p>My files can be found in the following link:</p>\n\n<p>Gensim model:</p>\n\n<p><a href=\"https://entuedu-my.sharepoint.com/personal/jseng001_e_ntu_edu_sg/_layouts/15/guestaccess.aspx?guestaccesstoken=BlORQpsmI6RMIja55I%2bKO9oF456w5tBLR43XZdVCQIA%3d&amp;docid=00459c024d33d48638508dd331cf73144&amp;rev=1&amp;expiration=2016-11-25T23%3a56%3a48.000Z\" rel=\"nofollow\">https://entuedu-my.sharepoint.com/personal/jseng001_e_ntu_edu_sg/_layouts/15/guestaccess.aspx?guestaccesstoken=BlORQpsmI6RMIja55I%2bKO9oF456w5tBLR43XZdVCQIA%3d&amp;docid=00459c024d33d48638508dd331cf73144&amp;rev=1&amp;expiration=2016-11-25T23%3a56%3a48.000Z</a></p>\n\n<p>Textfile:</p>\n\n<p><a href=\"https://entuedu-my.sharepoint.com/personal/jseng001_e_ntu_edu_sg/_layouts/15/guestaccess.aspx?guestaccesstoken=7%2b8Nkm9BySPFR0zqD%2fdgUcYOaXREG3%2fycALnMFcv59A%3d&amp;docid=08158c442c3f74970bc8090f253b499f8&amp;rev=1&amp;expiration=2016-11-25T23%3a56%3a01.000Z\" rel=\"nofollow\">https://entuedu-my.sharepoint.com/personal/jseng001_e_ntu_edu_sg/_layouts/15/guestaccess.aspx?guestaccesstoken=7%2b8Nkm9BySPFR0zqD%2fdgUcYOaXREG3%2fycALnMFcv59A%3d&amp;docid=08158c442c3f74970bc8090f253b499f8&amp;rev=1&amp;expiration=2016-11-25T23%3a56%3a01.000Z</a></p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1477526190, "post_id": 40273956, "comment_id": 67807491, "body": "If you don&#39;t want to descend into sub-directories, why are you walking the file tree instead of just listing the files?"}, {"owner": {"reputation": 265, "user_id": 6918302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be8a518b970216b5ae640d360337d385?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Short", "link": "https://stackoverflow.com/users/6918302/jeff-short"}, "reply_to_user": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1477526250, "post_id": 40273956, "comment_id": 67807504, "body": "@Falmarri - what should I use then?I dont need to list the file count aswell,I only need folder count"}], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 6918302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be8a518b970216b5ae640d360337d385?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Short", "link": "https://stackoverflow.com/users/6918302/jeff-short"}, "edited": false, "score": 0, "creation_date": 1477526432, "post_id": 40273999, "comment_id": 67807552, "body": "I have a path(dir) as input..I need to use that"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 2, "creation_date": 1477526466, "post_id": 40273999, "comment_id": 67807565, "body": "Creating a list to get its length is overkill. It might be OK in this case but it&#39;s not a good idea in general. Prefer <code>sum(os.path.isdir(i) for i in os.listdir(&#39;.&#39;))</code>."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 265, "user_id": 6918302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be8a518b970216b5ae640d360337d385?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Short", "link": "https://stackoverflow.com/users/6918302/jeff-short"}, "edited": false, "score": 0, "creation_date": 1477526543, "post_id": 40273999, "comment_id": 67807591, "body": "@JeffShort You can replace <code>&#39;.&#39;</code> with <code>path</code>."}, {"owner": {"reputation": 265, "user_id": 6918302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be8a518b970216b5ae640d360337d385?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Short", "link": "https://stackoverflow.com/users/6918302/jeff-short"}, "edited": false, "score": 0, "creation_date": 1477527007, "post_id": 40273999, "comment_id": 67807719, "body": "I did something like <code>folders = sum(os.path.isdir(i) for i in os.listdir(path)) print folders</code> which prints <code>0</code> eventhough it has 2 folders"}, {"owner": {"reputation": 265, "user_id": 6918302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be8a518b970216b5ae640d360337d385?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Short", "link": "https://stackoverflow.com/users/6918302/jeff-short"}, "edited": false, "score": 0, "creation_date": 1477527228, "post_id": 40273999, "comment_id": 67807768, "body": "does sum work with python 2.7.x ,it prints the list of folders correctly but the <code>sum</code> doesn&#39;t seem to be working"}, {"owner": {"reputation": 265, "user_id": 6918302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be8a518b970216b5ae640d360337d385?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Short", "link": "https://stackoverflow.com/users/6918302/jeff-short"}, "edited": false, "score": 0, "creation_date": 1477527402, "post_id": 40273999, "comment_id": 67807809, "body": "found the bug <code>os.listdir(path)</code> is just listing the folder but not the whole dir path"}, {"owner": {"reputation": 740, "user_id": 4807429, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RFvFI.jpg?s=128&g=1", "display_name": "CNugteren", "link": "https://stackoverflow.com/users/4807429/cnugteren"}, "edited": false, "score": 3, "creation_date": 1508771731, "post_id": 40273999, "comment_id": 80732808, "body": "You&#39;ll have to do the following to get it working: <code>sum(os.path.isdir(os.path.join(path, i)) for i in os.listdir(path))</code>"}], "tags": [], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "is_accepted": false, "score": 2, "last_activity_date": 1477526614, "last_edit_date": 1477526614, "creation_date": 1477526318, "answer_id": 40273999, "question_id": 40273956, "link": "https://stackoverflow.com/questions/40273956/how-do-i-figure-out-the-number-of-folders-in-a-directorynot-subdirectories/40273999#40273999", "title": "How do I figure out the number of folders in a directory(not subdirectories)", "body": "<p>You can do this instead</p>\n\n<pre><code>import os\nlen([i for i in os.listdir(path) if os.path.isdir(i)])\n</code></pre>\n\n<p>Or as recommended (saves from creating list):</p>\n\n<pre><code>import os\nsum(os.path.isdir(i) for i in os.listdir(path))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 252, "user_id": 6810870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fbd14e6b24515f5ba9716af382f7d39d?s=128&d=identicon&r=PG&f=1", "display_name": "weeCoder", "link": "https://stackoverflow.com/users/6810870/weecoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1477564083, "creation_date": 1477564083, "answer_id": 40282247, "question_id": 40273956, "link": "https://stackoverflow.com/questions/40273956/how-do-i-figure-out-the-number-of-folders-in-a-directorynot-subdirectories/40282247#40282247", "title": "How do I figure out the number of folders in a directory(not subdirectories)", "body": "<p>Well even though a very good answer has already been given to you, here's another one just for the sake of it. I reckon the solution is less elegant and less efficient though.</p>\n\n<pre><code>import os\n\npath = 'your_path_goes_here'\nnumber_of_dirs = len(list(filter(os.path.isdir, os.listdir(path))))\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 6918302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be8a518b970216b5ae640d360337d385?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Short", "link": "https://stackoverflow.com/users/6918302/jeff-short"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7241, "favorite_count": 3, "answer_count": 2, "score": 0, "last_activity_date": 1477564083, "creation_date": 1477526050, "question_id": 40273956, "link": "https://stackoverflow.com/questions/40273956/how-do-i-figure-out-the-number-of-folders-in-a-directorynot-subdirectories", "title": "How do I figure out the number of folders in a directory(not subdirectories)", "body": "<p>I have the following code which works but it searches in all the sub-directories,I only want to search in the immediate directory and also limit the search for folders,I don't need the files cound,can anyone suggest how to do that?</p>\n\n<pre><code>import os\n\nfiles = folders = 0\n\npath = \"\\\\\\\\snowcone\\\\builds708\\\\INTEGRATION\\\\CI_LA.UM.5.7-45903-8x98.1-4\\\\LINUX\\\\android\\\\out\\\\target\\\\product\"\n\nfor _, dirnames, filenames in os.walk(path):\n  # ^ this idiom means \"we won't be using this value\"\n    files += len(filenames)\n    folders += len(dirnames)\n\nprint \"{:,} files, {:,} folders\".format(files, folders)\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "setter"], "answers": [{"comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 25, "user_id": 1592810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1588605d269d8c7a476aaf17b05128?s=128&d=identicon&r=PG", "display_name": "deckardk", "link": "https://stackoverflow.com/users/1592810/deckardk"}, "edited": false, "score": 0, "creation_date": 1477526440, "post_id": 40273957, "comment_id": 67807556, "body": "@deckardk If I get what you&#39;re asking, you&#39;re essentially assigning them to the same object. Updating from one reference changes the object, and the change is reflected across all others."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1477526058, "creation_date": 1477526058, "answer_id": 40273957, "question_id": 40273914, "link": "https://stackoverflow.com/questions/40273914/python-setting-values-of-a-list-of-nested-dictionaries-in-class-instances/40273957#40273957", "title": "Python: setting values of a list of nested dictionaries in class instances", "body": "<p>Assign the keys to different copies of the <code>inside_init_dict</code> dictionary instead of the same one:</p>\n\n<pre><code>    ...\n    inside_init_dict = {'test': True}\n    for x in self.stuff:\n        x['info'] = inside_init_dict.copy()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 1592810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1588605d269d8c7a476aaf17b05128?s=128&d=identicon&r=PG", "display_name": "deckardk", "link": "https://stackoverflow.com/users/1592810/deckardk"}, "edited": false, "score": 0, "creation_date": 1477526424, "post_id": 40273989, "comment_id": 67807547, "body": "Awesome, thank you for explaining it that way. Makes sense to me now."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 3, "last_activity_date": 1477526279, "creation_date": 1477526279, "answer_id": 40273989, "question_id": 40273914, "link": "https://stackoverflow.com/questions/40273914/python-setting-values-of-a-list-of-nested-dictionaries-in-class-instances/40273989#40273989", "title": "Python: setting values of a list of nested dictionaries in class instances", "body": "<p>In the first example you create a single dictionary <code>inside_init_dict</code> outside the loop and put it in multiple places. Every element of the list gets that same <code>inside_init_dict</code>. What you're seeing is not other objects in a list being affected, there's just one object being shown multiple times.</p>\n\n<p>In the second example:</p>\n\n<pre><code>    for x in self.stuff:\n        x['info'] = {'test': True}\n</code></pre>\n\n<p>Now each <code>x</code> gets its own dictionary. They all have the same value at first, but they are different instances, like identical twins.</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 2566388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18deeb76c7adf2e0f3abdea09c0970da?s=128&d=identicon&r=PG", "display_name": "Samira N", "link": "https://stackoverflow.com/users/2566388/samira-n"}, "is_accepted": false, "score": 2, "last_activity_date": 1477527265, "last_edit_date": 1495535252, "creation_date": 1477527265, "answer_id": 40274118, "question_id": 40273914, "link": "https://stackoverflow.com/questions/40273914/python-setting-values-of-a-list-of-nested-dictionaries-in-class-instances/40274118#40274118", "title": "Python: setting values of a list of nested dictionaries in class instances", "body": "<p>This happens because <code>dicts</code> are <a href=\"https://stackoverflow.com/questions/8056130/immutable-vs-mutable-types\">mutable</a>, meaning that you can change their content without changing their identity. Here's a much simpler example of the behavior you're seeing:</p>\n\n<pre><code>my_dict = { \"key\" : \"value\" }\nmy_list = [ my_dict, my_dict ]\nmy_list[0][\"key\"] = \"new_value\"\nprint(my_list) # [ {\"key\" : \"new_value\"}, {\"key\": \"new_value\"} ]\n</code></pre>\n\n<p><strong>Why this happens:</strong></p>\n\n<p>In the first line of this code, I create a new dictionary, <code>{\"key\" : \"value\"}</code>, and assign the name <code>my_dict</code> to it.</p>\n\n<p>In the second line, I create a list, whose zeroth and first element <em>both</em> point to <code>my_dict</code>.</p>\n\n<p>In the third line, I access <code>my_dict</code> (through <code>my_list[0]</code>), and I <em>mutate</em> it: changing the value associated with <code>\"key\"</code>. </p>\n\n<p>In the  fourth line, I check the value of <code>my_list</code>. Both the zeroth and the first element of <code>my_list</code> still point to <code>my_dict</code> -- and we've changed <code>my_dict</code>. So the change is reflected in both elements of the list.</p>\n\n<p><strong>One way to fix it:</strong></p>\n\n<p>Instead pointing to the same dictionary twice, create two dictionaries that have the same value:</p>\n\n<pre><code>my_list = [ { \"key\" : \"value\" } , { \"key\" : \"value\" } ] \nmy_list[0][\"key\"] = \"new_value\"\nprint(my_list) # [ {\"key\" : \"new_value\"}, {\"key\": \"value\"} ]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 1592810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1588605d269d8c7a476aaf17b05128?s=128&d=identicon&r=PG", "display_name": "deckardk", "link": "https://stackoverflow.com/users/1592810/deckardk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 40273957, "answer_count": 3, "score": 0, "last_activity_date": 1477527265, "creation_date": 1477525797, "question_id": 40273914, "link": "https://stackoverflow.com/questions/40273914/python-setting-values-of-a-list-of-nested-dictionaries-in-class-instances", "title": "Python: setting values of a list of nested dictionaries in class instances", "body": "<p>I have a burning question that I just can't figure out. Let's say you have a class, and this class takes in as input a list of nested dictionaries. It initializes one of the keys of each of these dictionaries with a new, empty dictionary. Later, I want to set one of the nested values of an object in the list as something. For some reason this seems to affect other objects in the list?</p>\n\n<p>I know that's sounds very convoluted, so here's an example:</p>\n\n<pre><code>class Tester():\n    def __init__(self, stuff):\n\n        # stuff is a list of dictionaries\n        self.stuff = stuff\n\n        # Each item in the list should be initialized to this dictionary\n        inside_init_dict = {'test': True}\n        for x in self.stuff:\n            x['info'] = inside_init_dict\n\nif __name__ == '__main__':\n    new_stuff = [{'info': {}}, {'info': {}}, {'info': {}}]\n    mytest = Tester(new_stuff)\n\n    print(mytest.stuff)\n    # &gt;&gt;&gt; [{'info': {'test': True}}, {'info': {'test': True}}, {'info': {'test': True}}]\n\n    # I want to just set a value in the nested dict of the first item in the list\n    mytest.stuff[0]['info']['test'] = False\n\n    # However, all items in the list change\n    print(mytest.stuff)\n    # &gt;&gt;&gt; [{'info': {'test': False}}, {'info': {'test': False}}, {'info': {'test': False}}]\n</code></pre>\n\n<p>This happens on both Python 2 and 3. The only way I can get around this is to not use the separate variable \"inside_init_dict\", and directly set the initialized dictionary:</p>\n\n<pre><code>class Tester():\n    def __init__(self, stuff):\n\n        # stuff is a list of dictionaries\n        self.stuff = stuff\n\n        # Each item in the list should be initialized to this dictionary\n        for x in self.stuff:\n            x['info'] = {'test': True}\n\nif __name__ == '__main__':\n    new_stuff = [{'info': {}}, {'info': {}}, {'info': {}}]\n    mytest = Tester(new_stuff)\n\n    print(mytest.stuff)\n    # &gt;&gt;&gt; [{'info': {'test': True}}, {'info': {'test': True}}, {'info': {'test': True}}]\n\n    mytest.stuff[0]['info']['test'] = False\n\n    # This is what I want\n    print(mytest.stuff)\n    # &gt;&gt;&gt; [{'info': {'test': False}}, {'info': {'test': True}}, {'info': {'test': True}}]\n</code></pre>\n\n<p>What's going on here? I have tried setting the variable \"inside_init_dict\" in various places, like as a class variable or outside the class. The issue still occurs.</p>\n"}, {"tags": ["python", "c++", "linux", "pyqt", "raspberry-pi3"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477526445, "post_id": 40273901, "comment_id": 67807558, "body": "QT Creator is for C++ code so it needs C++ compiler."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1477527281, "post_id": 40273901, "comment_id": 67807782, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/q/14700965/1889329\">Qt Creator needs a compiler set up to build. Configure a compiler in the kit options</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7077719, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_nzkQSbGwbc/AAAAAAAAAAI/AAAAAAAAABA/SLnreExGkpw/photo.jpg?sz=128", "display_name": "Mona Omari", "link": "https://stackoverflow.com/users/7077719/mona-omari"}, "edited": false, "score": 0, "creation_date": 1477543018, "post_id": 40276075, "comment_id": 67811355, "body": "Im using raspberry pi 3, and I downloaded python 2 and 3. I downloaded these: sudo apt-get install g++  sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev? are those similar to gcc or clang? if not, how do I download them?"}, {"owner": {"reputation": 92, "user_id": 4868335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XldAm.png?s=128&g=1", "display_name": "telis80", "link": "https://stackoverflow.com/users/4868335/telis80"}, "reply_to_user": {"reputation": 11, "user_id": 7077719, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_nzkQSbGwbc/AAAAAAAAAAI/AAAAAAAAABA/SLnreExGkpw/photo.jpg?sz=128", "display_name": "Mona Omari", "link": "https://stackoverflow.com/users/7077719/mona-omari"}, "edited": false, "score": 0, "creation_date": 1477544841, "post_id": 40276075, "comment_id": 67811885, "body": "There&#39;s a metapackage called build-essential which should install the compiler and a bunch of related/needed packages:  [code]sudo apt-get install build-essential[/code]"}, {"owner": {"reputation": 92, "user_id": 4868335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XldAm.png?s=128&g=1", "display_name": "telis80", "link": "https://stackoverflow.com/users/4868335/telis80"}, "reply_to_user": {"reputation": 11, "user_id": 7077719, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_nzkQSbGwbc/AAAAAAAAAAI/AAAAAAAAABA/SLnreExGkpw/photo.jpg?sz=128", "display_name": "Mona Omari", "link": "https://stackoverflow.com/users/7077719/mona-omari"}, "edited": false, "score": 0, "creation_date": 1477545355, "post_id": 40276075, "comment_id": 67812058, "body": "Install these, try again, and comment if you have a problem!"}, {"owner": {"reputation": 11, "user_id": 7077719, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_nzkQSbGwbc/AAAAAAAAAAI/AAAAAAAAABA/SLnreExGkpw/photo.jpg?sz=128", "display_name": "Mona Omari", "link": "https://stackoverflow.com/users/7077719/mona-omari"}, "edited": false, "score": 0, "creation_date": 1477588829, "post_id": 40276075, "comment_id": 67839620, "body": "I still get an error saying in compile output:  error while building/deploying project GUI (kit:desktop) when exciting step &quot;Make&quot; and in the issues: QT creator needs a compiler set up to build. Configure a compiler in the kit options"}], "tags": [], "owner": {"reputation": 92, "user_id": 4868335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XldAm.png?s=128&g=1", "display_name": "telis80", "link": "https://stackoverflow.com/users/4868335/telis80"}, "is_accepted": false, "score": 0, "last_activity_date": 1477542212, "creation_date": 1477542212, "answer_id": 40276075, "question_id": 40273901, "link": "https://stackoverflow.com/questions/40273901/qt-creator-on-raspberry-pi-gui/40276075#40276075", "title": "QT creator on raspberry pi GUI", "body": "<p>There is no difference between running QT on a raspberry pi and a normal computer. First of all, which OS are you running? QT just needs a compiler to use. Just install gcc or clang compiler and you will be fine. Next time just read the output carefully. Configure a compiler in the kit options means there is no compiler!</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6512945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b704fb82e59df080a9248a68fec50ec?s=128&d=identicon&r=PG&f=1", "display_name": "randy sandy", "link": "https://stackoverflow.com/users/6512945/randy-sandy"}, "is_accepted": false, "score": 0, "last_activity_date": 1480524309, "creation_date": 1480524309, "answer_id": 40893743, "question_id": 40273901, "link": "https://stackoverflow.com/questions/40273901/qt-creator-on-raspberry-pi-gui/40893743#40893743", "title": "QT creator on raspberry pi GUI", "body": "<p>I will assume you already have gcc 4.9 installed on your RPi.</p>\n\n<p>Tools --> Options\nBuild &amp; Run --> Compilers Tab\nThe compiler path should be /usr/bin/arm-linux-gnueabihf-gcc-4.9</p>\n"}], "owner": {"reputation": 11, "user_id": 7077719, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_nzkQSbGwbc/AAAAAAAAAAI/AAAAAAAAABA/SLnreExGkpw/photo.jpg?sz=128", "display_name": "Mona Omari", "link": "https://stackoverflow.com/users/7077719/mona-omari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 944, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1480524309, "creation_date": 1477525699, "question_id": 40273901, "link": "https://stackoverflow.com/questions/40273901/qt-creator-on-raspberry-pi-gui", "title": "QT creator on raspberry pi GUI", "body": "<p>IM trying to create a GUI on QT creator with a raspberry pi 3. Every time I put a widget and try to run it to check if its working, this message shows up \"QT Creator needs a compiler set up to build. Configure a compiler in the kit options. </p>\n\n<p>I'm not sure what to do about this!</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 907, "user_id": 1920391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b844b572e4a3fcb07b132bbad4a90c37?s=128&d=identicon&r=PG", "display_name": "Titus P", "link": "https://stackoverflow.com/users/1920391/titus-p"}, "edited": false, "score": 0, "creation_date": 1477591246, "post_id": 40273876, "comment_id": 67840909, "body": "I have a workaround using the RawSQL object, but I would rather not have my own SQL in there if I can help it."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1477667011, "post_id": 40273876, "comment_id": 67873005, "body": "you haven&#39;t actually posted your attempt at using When"}, {"owner": {"reputation": 907, "user_id": 1920391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b844b572e4a3fcb07b132bbad4a90c37?s=128&d=identicon&r=PG", "display_name": "Titus P", "link": "https://stackoverflow.com/users/1920391/titus-p"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1477951200, "post_id": 40273876, "comment_id": 67956986, "body": "I don&#39;t think its worth posting since how it was not working as intended. I am  hoping someone knows how to get what my question is asking for, me posting what doesn&#39;t work won&#39;t help much. If you have an idea I owuld be happy to try it and post the results."}, {"owner": {"reputation": 4895, "user_id": 938207, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9b01a720bd1c499ea39b0387fd3b8fac?s=128&d=identicon&r=PG", "display_name": "Aziz Alfoudari", "link": "https://stackoverflow.com/users/938207/aziz-alfoudari"}, "edited": false, "score": 0, "creation_date": 1477952112, "post_id": 40273876, "comment_id": 67957265, "body": "<code>filter(inventoryentry__receipt__isnull=False)</code> right after <code>filter(**item_qs_kwargs)</code> doesn&#39;t work?"}], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 1920391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b844b572e4a3fcb07b132bbad4a90c37?s=128&d=identicon&r=PG", "display_name": "Titus P", "link": "https://stackoverflow.com/users/1920391/titus-p"}, "edited": false, "score": 0, "creation_date": 1478019937, "post_id": 40363679, "comment_id": 67983037, "body": "I&#39;ll give it a try and let you know"}, {"owner": {"reputation": 3372, "user_id": 6118299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8e3jd.jpg?s=128&g=1", "display_name": "Carlos Mermingas", "link": "https://stackoverflow.com/users/6118299/carlos-mermingas"}, "edited": false, "score": 0, "creation_date": 1478091660, "post_id": 40363679, "comment_id": 68012920, "body": "Great answer. Just a quick note: it works the same without the <code>F</code> expression. That is: <code>default=&#39;inventoryentry__created&#39;</code>. Please correct me if I am missing something."}, {"owner": {"reputation": 907, "user_id": 1920391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b844b572e4a3fcb07b132bbad4a90c37?s=128&d=identicon&r=PG", "display_name": "Titus P", "link": "https://stackoverflow.com/users/1920391/titus-p"}, "edited": false, "score": 0, "creation_date": 1478538354, "post_id": 40363679, "comment_id": 68185615, "body": "This seems to work as I asked for it! Thanks! I will point out that its not very performant(try running .query on this, its not ideal!) and the rawsql query I am using, although I figured Django could reproduce it easily and it cannot, is drastically better. I will probably stick with the performant one for now and keep this in my pocket for another time."}], "tags": [], "owner": {"reputation": 3153, "user_id": 641234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42888171bce11ee00617e3f803af6a6b?s=128&d=identicon&r=PG", "display_name": "emulbreh", "link": "https://stackoverflow.com/users/641234/emulbreh"}, "is_accepted": true, "score": 3, "last_activity_date": 1478015533, "creation_date": 1478015533, "answer_id": 40363679, "question_id": 40273876, "link": "https://stackoverflow.com/questions/40273876/django-aggregate-filters/40363679#40363679", "title": "Django aggregate filters", "body": "<p>A solution with <a href=\"https://docs.djangoproject.com/en/1.10/ref/models/conditional-expressions/\" rel=\"nofollow noreferrer\">conditional expressions</a> should work like this:</p>\n\n<pre><code>from django.db.models import Max, Case, When, F\n\nsale_date = Case(When(\n    inventoryentry__receipt=None,\n    then=None\n), default=F('inventoryentry__created'))\nqs = Item.objects.annotate(latest_sale_date=Max(sale_date))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 3048148, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100002140301137/picture?type=large", "display_name": "user3048148", "link": "https://stackoverflow.com/users/3048148/user3048148"}, "is_accepted": false, "score": 0, "last_activity_date": 1478176821, "creation_date": 1478176821, "answer_id": 40401760, "question_id": 40273876, "link": "https://stackoverflow.com/questions/40273876/django-aggregate-filters/40401760#40401760", "title": "Django aggregate filters", "body": "<p>I have tried some modified solution. Have a look.</p>\n\n<pre><code>from django.db.models import F\n\nItem.objects\\\n.annotate(latest_inventoryentry_id=Max('inventoryentry__created'))\\\n.filter(\ninventoryentry__id=F('latest_inventoryentry_id'), \ninventoryentry__receipt=None\n)\n</code></pre>\n\n<p>I did not check manually. you can check and let me know. </p>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 907, "user_id": 1920391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b844b572e4a3fcb07b132bbad4a90c37?s=128&d=identicon&r=PG", "display_name": "Titus P", "link": "https://stackoverflow.com/users/1920391/titus-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 40363679, "answer_count": 2, "score": 4, "last_activity_date": 1478176821, "creation_date": 1477525508, "question_id": 40273876, "link": "https://stackoverflow.com/questions/40273876/django-aggregate-filters", "title": "Django aggregate filters", "body": "<p>I have 3 models similar to the below, and I am trying to get the latest sale date for my items in a single query, which is definitely possible using SQL, but I am trying to use the built in Django functionality:</p>\n\n<pre><code>class Item(models.Model):\n    name = models.CharField()\n    ...\n\nclass InventoryEntry(models.Model):\n    delta = models.IntegerField()\n    item = models.ForeignKey(\"Item\")\n    receipt = models.ForeignKey(\"Receipt\", null=True)\n    created = models.DateTimeField(default=timezone.now)\n    ...\n\nclass Receipt(models.Model):\n    amt = models.IntegerField()\n    ...\n</code></pre>\n\n<p>What I am trying to do is query my items and annotate the last time a sale was made on them. The InventoryEntry model can be queried for whether or not an entry was a sale based on the existence of a receipt (inventory can also be adjusted because of an order, or being stolen, etc, and I am only interested in the most recent sale).</p>\n\n<p>My query right now looks something like this, which currently just gets the latest of ANY inventory entry. I want to filter the annotation to only return the max value of created when receipt__isnull=False on the InventoryEntry:</p>\n\n<pre><code>Item.objects.filter(**item_qs_kwargs).annotate(latest_sale_date=Max('inventoryentry_set__created'))\n</code></pre>\n\n<p>I attempted to use the When query expression but it did not work as intended, so perhaps I misused it. Any insight would be appreciated</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "edited": false, "score": 2, "creation_date": 1477528865, "post_id": 40273872, "comment_id": 67808148, "body": "What are x,y, and z in your code? You&#39;re plotting the same values three times and that&#39;s why your markers overlap."}, {"owner": {"reputation": 832, "user_id": 2660966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/778bc4c1e60ee65d17d5d5ab947e5e52?s=128&d=identicon&r=PG", "display_name": "user2660966", "link": "https://stackoverflow.com/users/2660966/user2660966"}, "edited": false, "score": 0, "creation_date": 1477555024, "post_id": 40273872, "comment_id": 67817013, "body": "Victor Chubukov is right about the overlapping issue. About the color, It seems that the scatter method does not work exactly the same way for 2D and 3D plots, in 3D you should use c=&quot;r&quot; instead of color=&quot;r&quot; (which works fine in 2D). You may also use edgecolors=&quot;face&quot;."}], "owner": {"reputation": 1255, "user_id": 5431568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2aa8d0ebf28cace58d0fcba0c16273e3?s=128&d=identicon&r=PG&f=1", "display_name": "Char", "link": "https://stackoverflow.com/users/5431568/char"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 857, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1477525484, "creation_date": 1477525484, "question_id": 40273872, "link": "https://stackoverflow.com/questions/40273872/matplotlib-overlapping-color-and-marker", "title": "Matplotlib overlapping color and marker", "body": "<pre><code>import numpy as np\nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\n\nfor color, marker in [('g', 'x'), ('r', 'o'), ('b', '^')]:\n    ax.scatter(x[:100],y[:100],z[:100], marker=marker, color=color, s=50, alpha=.3)\n\nax.set_xlabel('X Label')\nax.set_ylabel('Y Label')\nax.set_zlabel('Z Label')\n\nplt.show()\n</code></pre>\n\n<p>gets me this </p>\n\n<p><a href=\"https://i.stack.imgur.com/qzCbG.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/qzCbG.png\" alt=\"enter image description here\"></a></p>\n\n<p>but I want this instead</p>\n\n<p><a href=\"https://i.stack.imgur.com/xGJf3.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/xGJf3.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried changing facecolor and edgecolor but no help.</p>\n\n<p>The tutorial code seems to work the way I want and doesn't overlap the markers and gets the colors correct. Is there an easier way to do this without the loop?</p>\n\n<pre><code>import numpy as np\nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\n\n\ndef randrange(n, vmin, vmax):\n    return (vmax - vmin)*np.random.rand(n) + vmin\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nn = 100\nfor c, m, zl, zh in [('g', 'o', -50, -25), ('b', '^', -30, -5), ('r', 'x', -30, -5)]:\n    xs = randrange(n, 23, 32)\n    ys = randrange(n, 0, 100)\n    zs = randrange(n, zl, zh)\n    ax.scatter(xs, ys, zs, edgecolor=(0,0,0,0), c=c, marker=m)\n\nax.set_xlabel('X Label')\nax.set_ylabel('Y Label')\nax.set_zlabel('Z Label')\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "sas", "gini"], "comments": [{"owner": {"reputation": 16968, "user_id": 1919583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35a12f323e0bea76c8b442df11825d57?s=128&d=identicon&r=PG", "display_name": "Reeza", "link": "https://stackoverflow.com/users/1919583/reeza"}, "edited": false, "score": 0, "creation_date": 1477526205, "post_id": 40273869, "comment_id": 67807494, "body": "SAS UE can be installed for free so you can follow the calculations. Since w=1 then cumm_w0 will be a running total of the randomly sorted data."}, {"owner": {"reputation": 4487, "user_id": 3728956, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4bd304322d1e69e6d11ac55b840c0fc5?s=128&d=identicon&r=PG&f=1", "display_name": "nEO", "link": "https://stackoverflow.com/users/3728956/neo"}, "reply_to_user": {"reputation": 16968, "user_id": 1919583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35a12f323e0bea76c8b442df11825d57?s=128&d=identicon&r=PG", "display_name": "Reeza", "link": "https://stackoverflow.com/users/1919583/reeza"}, "edited": false, "score": 0, "creation_date": 1477526546, "post_id": 40273869, "comment_id": 67807593, "body": "@Reeza - any idea what the parameters are?"}, {"owner": {"reputation": 16968, "user_id": 1919583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35a12f323e0bea76c8b442df11825d57?s=128&d=identicon&r=PG", "display_name": "Reeza", "link": "https://stackoverflow.com/users/1919583/reeza"}, "edited": false, "score": 0, "creation_date": 1477528887, "post_id": 40273869, "comment_id": 67808158, "body": "No. Where did you get this code from that you can&#39;t get documentation or help?"}, {"owner": {"reputation": 4487, "user_id": 3728956, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4bd304322d1e69e6d11ac55b840c0fc5?s=128&d=identicon&r=PG&f=1", "display_name": "nEO", "link": "https://stackoverflow.com/users/3728956/neo"}, "reply_to_user": {"reputation": 16968, "user_id": 1919583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35a12f323e0bea76c8b442df11825d57?s=128&d=identicon&r=PG", "display_name": "Reeza", "link": "https://stackoverflow.com/users/1919583/reeza"}, "edited": false, "score": 0, "creation_date": 1477595146, "post_id": 40273869, "comment_id": 67842976, "body": "there is a prediction competition at my university and they shared this with the participants"}], "answers": [{"tags": [], "owner": {"reputation": 9226, "user_id": 667489, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d553533e5863d75b02f58a5bb42c567f?s=128&d=identicon&r=PG", "display_name": "user667489", "link": "https://stackoverflow.com/users/667489/user667489"}, "is_accepted": false, "score": 0, "last_activity_date": 1477583379, "creation_date": 1477583379, "answer_id": 40289071, "question_id": 40273869, "link": "https://stackoverflow.com/questions/40273869/sas-code-trying-to-understand-how-to-build-gini-index/40289071#40289071", "title": "SAS Code - Trying to understand how to build GINI Index", "body": "<p>This looks like an implementation of the bottom formula in this section of the wikipedia article on the Gini Coefficient:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Gini_coefficient#Alternate_expressions\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Gini_coefficient#Alternate_expressions</a></p>\n"}], "owner": {"reputation": 4487, "user_id": 3728956, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4bd304322d1e69e6d11ac55b840c0fc5?s=128&d=identicon&r=PG&f=1", "display_name": "nEO", "link": "https://stackoverflow.com/users/3728956/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1078, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477583379, "creation_date": 1477525444, "question_id": 40273869, "link": "https://stackoverflow.com/questions/40273869/sas-code-trying-to-understand-how-to-build-gini-index", "title": "SAS Code - Trying to understand how to build GINI Index", "body": "<p>I am participating in a data science competition and my final predictions would be measured via a GINI Index. It is a regression problem. I have the source code for the calculation in SAS but I dont know SAS and am not able to understand what is going on. </p>\n\n<p>I want to build the same in Python. Any help would be appreciated. If someone knows Python code for this, it would help a lot.</p>\n\n<pre><code>    *define GINI;       \n    %macro  gini(input=, output=, y=, py=, filter=, split_ind = );\n    data indsn;\n        set &amp;input.;\n        _random=ranuni (123456789);\n        w=1;\n        if &amp;split_ind.=\"&amp;filter.\";\n    run;\n\n    proc sort data=indsn;by &amp;py _random;run;\n        /*accumulate w to calculate Gini    */\n        data test;\n            set indsn;\n            if _N_ = 1 then do;\n                cumm_w0=0;\n            end;\n            retain cumm_w0\n            ;\n            cumm_w0=cumm_w0+w;\n        run;\n\n        /*calcualate Gini */\n        proc sql noprint;\n            create table &amp;output\n            as\n            select 1-2/(sum(w)-1)*(sum(w)-sum(&amp;y.*cumm_w0*w)/sum(&amp;y.*w)) as gini\n            from test;\n        quit;\n\n\n        proc print data=&amp;output;\n            title \" GINI on &amp;filter.\";run;\n    %mend;\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 2209, "user_id": 435693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Hc0y2.jpg?s=128&g=1", "display_name": "Morvader", "link": "https://stackoverflow.com/users/435693/morvader"}, "edited": false, "score": 0, "creation_date": 1479297174, "post_id": 40273832, "comment_id": 68495399, "body": "Incrementing page load time worked for me. driver.Manage().Timeouts().SetPageLoadTimeout(TimeSpan.FromS&zwnj;&#8203;econds(60));"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 7077556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b28092e8b18d041f2f8057b9fa6d7cc?s=128&d=identicon&r=PG&f=1", "display_name": "RMM", "link": "https://stackoverflow.com/users/7077556/rmm"}, "edited": false, "score": 0, "creation_date": 1477534293, "post_id": 40274597, "comment_id": 67809384, "body": "Using <code>--dns-prefetch-disable</code> didn&#39;t solve the issue for me. The driver is created with it&#39;s arguments correctly but with the next command <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=402\" rel=\"nofollow noreferrer\">webdriver hangs on page load and does not give control back for script execution.</a>"}, {"owner": {"reputation": 4052, "user_id": 13969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c6205448de1b8ad8d5baf0f3416d899?s=128&d=identicon&r=PG", "display_name": "rjurney", "link": "https://stackoverflow.com/users/13969/rjurney"}, "edited": false, "score": 1, "creation_date": 1491778525, "post_id": 40274597, "comment_id": 73690445, "body": "For the last line, you meant to write <code>driver = Chrome(chrome_options=chrome_options)</code>"}], "tags": [], "owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "is_accepted": false, "score": 11, "last_activity_date": 1491849499, "last_edit_date": 1492087306, "creation_date": 1477531164, "answer_id": 40274597, "question_id": 40273832, "link": "https://stackoverflow.com/questions/40273832/selenium-chromedriver-2-25-timeoutexception-cannot-determine-loading-status/40274597#40274597", "title": "Selenium chromedriver 2.25 TimeoutException cannot determine loading status", "body": "<blockquote>\n  <p>selenium.common.exceptions.TimeoutException: Message: timeout: cannot determine loading status\n  from timeout: Timed out receiving message from renderer: -0.003</p>\n</blockquote>\n\n<p><a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=817\" rel=\"noreferrer\">Issue817:It looks like this issue has been logged as a bug for Selenium</a>.</p>\n\n<p>Someone has answered to get rid from this issue by using the <code>--dns-prefetch-disable</code> option of chrome.</p>\n\n<pre><code>from selenium.webdriver import Chrome\nfrom selenium.webdriver.chrome.options import Options\n\nchrome_options = Options()\nchrome_options.add_argument('--dns-prefetch-disable')\ndriver = Chrome(chrome_options=chrome_options)\n</code></pre>\n\n<p><a href=\"https://sqa.stackexchange.com/questions/9007/how-to-handle-time-out-receiving-message-from-the-renderer-in-chrome-driver\">If issue still exists follow this thread may be it solves your problem</a></p>\n"}, {"comments": [{"owner": {"reputation": 3069, "user_id": 1394981, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8bc6f5d86a2a8d7ed90dea48ca7c67e2?s=128&d=identicon&r=PG", "display_name": "Matt Westlake", "link": "https://stackoverflow.com/users/1394981/matt-westlake"}, "edited": false, "score": 0, "creation_date": 1490294545, "post_id": 40618662, "comment_id": 73060730, "body": "I don&#39;t see how this helps."}], "tags": [], "owner": {"reputation": 3378, "user_id": 3318273, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nvfcf.png?s=128&g=1", "display_name": "Romain Jouin", "link": "https://stackoverflow.com/users/3318273/romain-jouin"}, "is_accepted": false, "score": 0, "last_activity_date": 1479240082, "creation_date": 1479240082, "answer_id": 40618662, "question_id": 40273832, "link": "https://stackoverflow.com/questions/40273832/selenium-chromedriver-2-25-timeoutexception-cannot-determine-loading-status/40618662#40618662", "title": "Selenium chromedriver 2.25 TimeoutException cannot determine loading status", "body": "<p>Set</p>\n\n<p>env LANG=en_US.UTF-8 ./chromedriver</p>\n\n<p>from : <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=1552\" rel=\"nofollow noreferrer\">https://bugs.chromium.org/p/chromedriver/issues/detail?id=1552</a></p>\n"}], "owner": {"reputation": 153, "user_id": 7077556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b28092e8b18d041f2f8057b9fa6d7cc?s=128&d=identicon&r=PG&f=1", "display_name": "RMM", "link": "https://stackoverflow.com/users/7077556/rmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11174, "favorite_count": 3, "answer_count": 2, "score": 14, "last_activity_date": 1491849499, "creation_date": 1477525134, "last_edit_date": 1477531515, "question_id": 40273832, "link": "https://stackoverflow.com/questions/40273832/selenium-chromedriver-2-25-timeoutexception-cannot-determine-loading-status", "title": "Selenium chromedriver 2.25 TimeoutException cannot determine loading status", "body": "<p>I am using <code>python3</code> on mac os and I have updated chrome, <code>chromedriver</code> and <code>selenium</code> to the latest version. I am getting a <code>TimeoutException</code>, the browser opens correctly but it freezes.</p>\n\n<pre><code>&gt;&gt;&gt; from selenium import webdriver\n&gt;&gt;&gt; driver = webdriver.Chrome()\n# opens browser with blank page\n&gt;&gt;&gt; driver.get('http://example.com')\n# gets first page OK and then driver literally flashes once\n&gt;&gt;&gt; driver.get('http://stackoverflow.com')\n&gt;&gt;&gt;\n# Cursor loading forever... until TimeoutException\n</code></pre>\n\n<p>This error is thrown:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 248, in get\n    self.execute(Command.GET, {'url': url})\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 236, in execute\n    self.error_handler.check_response(response)\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/remote/errorhandler.py\", line 192, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.TimeoutException: Message: timeout: cannot determine loading status\nfrom timeout: Timed out receiving message from renderer: -0.003\n  (Session info: chrome=54.0.2840.71)\n  (Driver info: chromedriver=2.25.426935 (820a95b0b81d33e42712f9198c215f703412e1a1),platform=Mac OS X 10.12.0 x86_64)\n</code></pre>\n\n<p>I'm using: <code>Python 3.5.2</code> ,<code>Chrome 54.0</code>, <code>chromedriver 2.25</code>, <code>selenium 3.0.1</code></p>\n\n<p>I've tried other versions of <code>chromedriver</code> with no success, also I did not find any solution to this online. Thanks.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Still getting the error from above + getting a new error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/chrome/webdriver.py\", line 69, in __init__\n    desired_capabilities=desired_capabilities)\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 92, in __init__\n    self.start_session(desired_capabilities, browser_profile)\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 179, in start_session\n    response = self.execute(Command.NEW_SESSION, capabilities)\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 236, in execute\n    self.error_handler.check_response(response)\n  File \"/usr/local/lib/python3.5/site-packages/selenium/webdriver/remote/errorhandler.py\", line 192, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.WebDriverException: Message: session not created exception\nfrom unknown error: bad inspector message: {\"method\":\"Page.loadEventFired\",\"params\":{\"timestamp\":14220,088073}}\n  (Session info: chrome=54.0.2840.71)\n  (Driver info: chromedriver=2.25.426935 (820a95b0b81d33e42712f9198c215f703412e1a1),platform=Mac OS X 10.12.0 x86_64)\n</code></pre>\n"}, {"tags": ["python", "caching", "lru"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1477525085, "post_id": 40273767, "comment_id": 67807239, "body": "Yes, the decorated function now has the method <code>my_function.cache_clear()</code>. You can also get stats with <code>my_function.cache_info()</code>. See <a href=\"https://docs.python.org/3.5/library/functools.html?highlight=lru#functools.lru_cache\" rel=\"nofollow noreferrer\"><code>lru_cache</code></a>"}, {"owner": {"reputation": 4435, "user_id": 2801069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b7f58afbd866da432633593302fe79c4?s=128&d=identicon&r=PG&f=1", "display_name": "kyrenia", "link": "https://stackoverflow.com/users/2801069/kyrenia"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1477526054, "post_id": 40273767, "comment_id": 67807454, "body": "@AChampion - sure, aware of both of those, question though is rather is there a way of applying those methods to every decorated functions (i.e. clear <i>all</i> the lru_cache&#39;s)."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1477527499, "post_id": 40273767, "comment_id": 67807828, "body": "No, there is no simple way to clear all decorated function caches, they are all independent. You could create a registry of all those functions and then iterate through them to clear."}], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 7, "last_activity_date": 1477528938, "creation_date": 1477528938, "answer_id": 40274320, "question_id": 40273767, "link": "https://stackoverflow.com/questions/40273767/clear-all-lru-cache-in-python/40274320#40274320", "title": "Clear all lru_cache in Python", "body": "<p>You can create a modified decorator which also takes note of the cached functions:</p>\n\n<pre><code>cached_functions = []\n\ndef clearable_lru_cache(*args, **kwargs):\n    def decorator(func):\n        func = lru_cache(*args, **kwargs)(func)\n        cached_functions.append(func)\n        return func\n\n    return decorator\n\ndef clear_all_cached_functions():\n    for func in cached_functions:\n        func.cache_clear()\n</code></pre>\n\n<p>If you really want you can also use monkey patching to replace the original decorator.</p>\n\n<p>Test:</p>\n\n<pre><code>@clearable_lru_cache()\ndef foo(x):\n    print('foo', x)\n\n@clearable_lru_cache()\ndef bar(x):\n    print('bar', x)\n\nfor i in [1, 2]:\n    for j in [1, 2]:\n        print('Calling functions')\n        for k in [1, 2, 3]:\n            for f in [foo, bar]:\n                f(k)\n        print('Functions called - if you saw nothing they were cached')\n    print('Clearing cache')\n    clear_all_cached_functions()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Calling functions\nfoo 1\nbar 1\nfoo 2\nbar 2\nfoo 3\nbar 3\nFunctions called - if you saw nothing they were cached\nCalling functions\nFunctions called - if you saw nothing they were cached\nClearing cache\nCalling functions\nfoo 1\nbar 1\nfoo 2\nbar 2\nfoo 3\nbar 3\nFunctions called - if you saw nothing they were cached\nCalling functions\nFunctions called - if you saw nothing they were cached\nClearing cache\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 15054634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bf8f62d71cbc0c13534b5aabed94fef?s=128&d=identicon&r=PG", "display_name": "Rol", "link": "https://stackoverflow.com/users/15054634/rol"}, "edited": false, "score": 0, "creation_date": 1613644052, "post_id": 50699209, "comment_id": 117140917, "body": "Inheriting a codebase that was so hard to test because of the reliance on lru_caches that shared state between tests."}], "tags": [], "owner": {"reputation": 1964, "user_id": 2097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86e1e03facd4470a84e97ccbcaf6353?s=128&d=identicon&r=PG", "display_name": "BlackShift", "link": "https://stackoverflow.com/users/2097/blackshift"}, "is_accepted": false, "score": 8, "last_activity_date": 1528201360, "last_edit_date": 1528201360, "creation_date": 1528198859, "answer_id": 50699209, "question_id": 40273767, "link": "https://stackoverflow.com/questions/40273767/clear-all-lru-cache-in-python/50699209#50699209", "title": "Clear all lru_cache in Python", "body": "<blockquote>\n  <p>maybe there is a way of returning all function\n  names loaded in memory, and then loop over them clearing the cache\n  from each</p>\n</blockquote>\n\n<p>Yes that is possible as well:</p>\n\n<pre><code>import functools\nimport gc\n\ngc.collect()\nwrappers = [\n    a for a in gc.get_objects() \n    if isinstance(a, functools._lru_cache_wrapper)]\n\nfor wrapper in wrappers:\n    wrapper.cache_clear()\n</code></pre>\n\n<blockquote>\n  <p>I'm specifically looking to implement as part of a fall-back, for\n  cases where say 90% of the memory on my machine gets used.</p>\n</blockquote>\n\n<p>This is code you will probably not use under normal circumstances, but can be useful for debugging.</p>\n\n<p>In my particular case I wanted to clear some <a href=\"https://github.com/matplotlib/matplotlib/commit/349762b8d2fba9638746e6ed1c8d237a925561ec\" rel=\"noreferrer\">dangling file handles from matplotlib</a> (in order to focus on my own loose file handles), so it was not possible to use the solution by Alex Hall.</p>\n"}], "owner": {"reputation": 4435, "user_id": 2801069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b7f58afbd866da432633593302fe79c4?s=128&d=identicon&r=PG&f=1", "display_name": "kyrenia", "link": "https://stackoverflow.com/users/2801069/kyrenia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6463, "favorite_count": 2, "accepted_answer_id": 40274320, "answer_count": 2, "score": 5, "last_activity_date": 1528201360, "creation_date": 1477524759, "question_id": 40273767, "link": "https://stackoverflow.com/questions/40273767/clear-all-lru-cache-in-python", "title": "Clear all lru_cache in Python", "body": "<p>I have functions in python that have caches with lru_cache e.g. </p>\n\n<pre><code> @lru_cache(maxsize=None)\n def my_function():\n    ...\n</code></pre>\n\n<p>While i can individually clear the caches with e.g. <code>my_function.cache_clear()</code> is there any way of clearing the caches of every function at once? [I was thinking that maybe there is a way of returning all function names loaded in memory, and then loop over them clearing the cache from each].</p>\n\n<p>I'm specifically looking to implement as part of a fall-back, for cases where say 90% of the memory on my machine gets used.</p>\n"}, {"tags": ["python", "binary", "addition"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 6837696, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1301d197f266ffdf2b75e76f04d1211b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Cho", "link": "https://stackoverflow.com/users/6837696/phil-cho"}, "edited": false, "score": 0, "creation_date": 1477526175, "post_id": 40273928, "comment_id": 67807489, "body": "Thanks but I have to use recursion and I&#39;m not allowed to use any loops"}, {"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "reply_to_user": {"reputation": 105, "user_id": 6837696, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1301d197f266ffdf2b75e76f04d1211b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Cho", "link": "https://stackoverflow.com/users/6837696/phil-cho"}, "edited": false, "score": 0, "creation_date": 1477526250, "post_id": 40273928, "comment_id": 67807505, "body": "The second version doesn\u2019t use loops."}], "tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": false, "score": 0, "last_activity_date": 1477525906, "creation_date": 1477525906, "answer_id": 40273928, "question_id": 40273755, "link": "https://stackoverflow.com/questions/40273755/binary-addition-using-a-carry/40273928#40273928", "title": "Binary Addition using a carry", "body": "<p>Let\u2019s start with the first part, which is making sure the two strings are the same length.  Since they're numbers, all you have to do is '0' pad the shorter number</p>\n\n<pre><code>max_len = max(len(S), len(T))\n# the more simple to understand way\nwhile len(S) &lt; max_len: S = '0' + S\nwhile len(T) &lt; max_len: T = '0' + T\n# or you can use this python trickery\nS = ('0' * (max_len - len(S))) + S\nT = ('0' * (max_len - len(T))) + T\n</code></pre>\n\n<p>For the carries, your carries should be as follows:</p>\n\n<pre><code>For sum = 0, carry = 0\nFor sum = 1, carry = 0\nFor sum = 2, carry = 1\nFor sum = 3, carry = 1\n</code></pre>\n\n<p>Hope that helps,</p>\n"}, {"tags": [], "owner": {"reputation": 12341, "user_id": 3678068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QWjMd.png?s=128&g=1", "display_name": "Fabricator", "link": "https://stackoverflow.com/users/3678068/fabricator"}, "is_accepted": true, "score": 1, "last_activity_date": 1477526512, "creation_date": 1477526512, "answer_id": 40274033, "question_id": 40273755, "link": "https://stackoverflow.com/questions/40273755/binary-addition-using-a-carry/40274033#40274033", "title": "Binary Addition using a carry", "body": "<p>Here's a cleaner version that uses some Python syntactic sugar:</p>\n\n<pre><code>def add(a,b,c=0):\n    if a == '' and b == '':\n        return str(c)\n    a = a or '0'\n    b = b or '0'\n    n = int(a[-1]) + int(b[-1]) + c\n    return add(a[:-1],b[:-1],n//2) + str(n%2)\n</code></pre>\n\n<ul>\n<li>Use default value of carry <code>c=0</code> to get rid of the inner function</li>\n<li><code>a = a or '0'</code> sets <code>a</code> to <code>'0'</code> if it's <code>''</code></li>\n<li>You forgot to convert string to integer before adding them</li>\n<li><code>n//2</code> get the carry</li>\n</ul>\n"}], "owner": {"reputation": 105, "user_id": 6837696, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1301d197f266ffdf2b75e76f04d1211b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Cho", "link": "https://stackoverflow.com/users/6837696/phil-cho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "accepted_answer_id": 40274033, "answer_count": 2, "score": 0, "last_activity_date": 1477526512, "creation_date": 1477524653, "last_edit_date": 1477526150, "question_id": 40273755, "link": "https://stackoverflow.com/questions/40273755/binary-addition-using-a-carry", "title": "Binary Addition using a carry", "body": "<p>Im trying to add two binary numbers without converting the two numbers, S and T, into a base 10,using recursion and I'm having difficulty incorporating the carry into the code. Also, I'm not exactly sure what to do if one binary number is longer than the other. </p>\n\n<pre><code>def addB(S,T):\n  '''adds binary number without converting to base 10'''\n  def addBhelper(S,T,carry):\n    if S=='' and T=='':\n        return ''\n    if S[-1] + T[-1]+carry==0:\n        return addBhelper(S[:-1],T[:-1],0) + str((carry+int(S[-1]) + int(T[-1]))% 2)\n    if S[-1] + T[-1]+carry==1:\n        return addBhelper(S[:-1],T[:-1],1) + str((carry+int(S[-1]) + int(T[-1])) % 2)\n    if S[-1] + T[-1]+carry==2:\n        return addBhelper(S[:-1],T[:-1],2) + str((carry+int(S[-1]) + int(T[-1])) % 2)\n    if S[-1] + T[-1]+carry==3:\n        return addBhelper(S[:-1],T[:-1],2) + str((carry+int(S[-1]) + int(T[-1])) % 2)\n  return addBhelper(S,T,0)\n</code></pre>\n\n<p>---- updated to fix code formatting</p>\n"}, {"tags": ["python", "python-3.x", "curve-fitting", "gaussian"], "answers": [{"tags": [], "owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "is_accepted": false, "score": 0, "last_activity_date": 1477533015, "creation_date": 1477533015, "answer_id": 40274864, "question_id": 40273674, "link": "https://stackoverflow.com/questions/40273674/need-help-python-fitting-gaussian-to-data-that-doesnt-lie-along-x-axis-at-y-0/40274864#40274864", "title": "Need Help Python Fitting Gaussian to data that doesn&#39;t lie along x-axis at y=0", "body": "<p>p0 is the vector of initial guesses for the parameters. So just append another number to it.</p>\n\n<p><code>popt,pcov = curve_fit(gaus,xcut,ycut,p0=[45,mean,sigma,initial_y0_guess]</code></p>\n"}, {"tags": [], "owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "is_accepted": false, "score": 0, "last_activity_date": 1477575011, "creation_date": 1477575011, "answer_id": 40285897, "question_id": 40273674, "link": "https://stackoverflow.com/questions/40273674/need-help-python-fitting-gaussian-to-data-that-doesnt-lie-along-x-axis-at-y-0/40285897#40285897", "title": "Need Help Python Fitting Gaussian to data that doesn&#39;t lie along x-axis at y=0", "body": "<p>Regarding your question edit on the initial guess for the new y0 parameter, the minimum x value should work.  Try passing min(x).</p>\n"}], "owner": {"reputation": 43, "user_id": 4983656, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155688886780051/picture?type=large", "display_name": "dciampa", "link": "https://stackoverflow.com/users/4983656/dciampa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477575011, "creation_date": 1477524102, "last_edit_date": 1477525570, "question_id": 40273674, "link": "https://stackoverflow.com/questions/40273674/need-help-python-fitting-gaussian-to-data-that-doesnt-lie-along-x-axis-at-y-0", "title": "Need Help Python Fitting Gaussian to data that doesn&#39;t lie along x-axis at y=0", "body": "<p>I have searched a decent amount and have yet to find a clear solution to my question. I currently can fit a Gaussian to any data that lies along the x-axis, the typical set of data you see when looking a Gaussian fitting tutorial. Now I have data that is raised a certain amount above the x-axis so i can't have my Gaussian fit hit the x-axis. My solution is to just define a Gaussian function with an additional + y0 constant. I just don't know how to code this in! Currently I have the following.</p>\n\n<pre><code>n = len(xcut)                            \nmean = center                           \nsigma = sum(ycut*(xcut-mean)**2)/n        \n\ndef gaus(x,a,x0,sigma):\n     return a*exp(-(x-x0)**2/(2*sigma**2))\n\npopt,pcov = curve_fit(gaus,xcut,ycut,p0=[45,mean,sigma])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kWFIx.png\" rel=\"nofollow\">Gauss Fit</a></p>\n\n<p>I would like to make is so the function is:</p>\n\n<pre><code>def gaus(x,a,x0,sigma,y0):\n     return y0+a*exp(-(x-x0)**2/(2*sigma**2))\n</code></pre>\n\n<p>But after this how do I alter the parameter guesses and such? Similar to amplitude would I input my guess inside p0?</p>\n\n<p>Edit: I can set my y0 to a constant value that I can guess and the fit works very well. But this would require me to give a good guess each time for each data set. Which is a work around, but a pain!</p>\n\n<p>Any help would be great thanks!</p>\n"}, {"tags": ["python", "authentication", "flask", "token", "flask-jwt"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477526332, "post_id": 40273634, "comment_id": 67807528, "body": "shouldn&#39;t be <code>json=playload</code> when you send <code>&#39;application&#47;json&#39;</code> ?"}, {"owner": {"reputation": 23, "user_id": 5097996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQXf1.jpg?s=128&g=1", "display_name": "Cyril Ben", "link": "https://stackoverflow.com/users/5097996/cyril-ben"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477581570, "post_id": 40273634, "comment_id": 67834996, "body": "That&#39;s what I thought at first but all the tutorials out there are with data=payload. I tried with json=payload but didn&#39;t change a thing !"}], "owner": {"reputation": 23, "user_id": 5097996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQXf1.jpg?s=128&g=1", "display_name": "Cyril Ben", "link": "https://stackoverflow.com/users/5097996/cyril-ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477524112, "creation_date": 1477523807, "last_edit_date": 1477524112, "question_id": 40273634, "link": "https://stackoverflow.com/questions/40273634/internal-flask-post-requests-to-flask-jwt-auth-endpoint-doesnt-succeed", "title": "Internal Flask POST requests to Flask-Jwt /auth endpoint doesn&#39;t succeed", "body": "<p>I come to you today with a problem that seems to be annoying and bother me for 1 week (maybe more).</p>\n\n<p>I implemented Flask and Flask-JWT to create a Token and use it in different parts of my web-app.\nThe process is : The user puts is credentials on the form and when he's logged a token is created by making a POST request to the Flask-JWT /auth endpoint.</p>\n\n<p>The problem is :</p>\n\n<ul>\n<li>When the user has loged-in, the token creation part of the code (POST request to /auth endpoint) seems to be in an endless loop.</li>\n</ul>\n\n<p>The code stop at : \"<strong>r = requests.post(url, headers=headers, data=payload)</strong>\"</p>\n\n<p>The funny part is that if a user login and <strong>after</strong> go to the /auth endpoint, it has the token created.</p>\n\n<p>Someone already had this problem ?</p>\n\n<p>Thank you</p>\n\n<h2>project/config.py</h2>\n\n<pre><code>JWT_EXPIRATION_DELTA = timedelta(seconds=900)\nJWT_AUTH_URL_RULE = \"/api/v1/auth\"\n\nSECURITY_PASSWORD_HASH = 'pbkdf2_sha512'\nSECURITY_TRACKABLE = True\nSECURITY_PASSWORD_SALT = \"xxxx\"\n\nWTF_CSRF_ENABLED = True\nWTF_CSRF_SECRET_KEY = \"xxxx\"\n</code></pre>\n\n<h2>project/app/<strong>init</strong>.py</h2>\n\n<pre><code>from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_login import LoginManager, login_required\nfrom flask_bcrypt import Bcrypt\nfrom flask_security import Security, SQLAlchemyUserDatastore, \\\n    UserMixin, RoleMixin, login_required\nfrom flask_jwt import JWT, jwt_required\nimport os\n\napp = Flask(__name__)\napp.config.from_object('config')\nbcrypt = Bcrypt(app)\ndb = SQLAlchemy(app)\n\n# To have random secret key\nsecret_key = os.urandom(24)\napp.secret_key = secret_key\n\nfrom textr import views, models\nfrom search_number import views\nfrom buy_number import views\nfrom users import views, models\nfrom sms_receiver import views, models\nfrom sms_sender import views, models\nfrom phone_number import models, views\n\nfrom users.models import User, Role\n\n# Setup Flask-Security\nuser_datastore = SQLAlchemyUserDatastore(db, User, Role)\nsecurity = Security(app, user_datastore)\n\nlogin_manager = LoginManager()\nlogin_manager.init_app(app)\nlogin_manager.login_view = \"login\"\n\n@login_manager.user_loader\ndef load_user(user_id):\n    return User.query.filter(User.id == int(user_id)).first()\n\nfrom textr.tools import retreive_user, verify_password\n\ndef authenticate(username, password):\n    user = retreive_user(username)\n    if verify_password(username, password):\n        return user\n\ndef identity(payload):\n    return User.query.filter(User.id == payload['identity']).scalar()\n\njwt = JWT(app, authenticate, identity)\n</code></pre>\n\n<h2>project/app/users/views.py</h2>\n\n<pre><code>from flask_jwt import jwt_required, JWT\nfrom models import User\nfrom error_handling import error_400\nfrom flask import Flask, request, render_template, jsonify, session, redirect, url_for, flash\nimport json\nimport requests\n\n@app.route(\"/api/v1/login\", methods=[\"GET\", \"POST\"])\ndef login():\n    error = None\n\n    if request.method == 'POST':\n        json_data = request.json\n        if not json_data:\n            username = request.form['username']\n            password = request.form['password']\n        else:\n            username = json_data['username']\n            password = json_data['password']\n\n        if not check_user_present(username):\n            return error_400('Error', 'User not found', 404)\n\n        if verify_password(username, password):\n            flash('Logged in successfully.')\n            user = retreive_user(username)\n            login_user(user)\n\n            # Infos to create POST request for Token\n            payload = ({'username':username, 'password':password})\n            url = \"http://127.0.0.1:8080/api/v1/auth\"\n            headers = {'Content-Type': 'application/json', 'charset': 'utf-8'}\n\n            # Token creation\n            r = requests.post(url, headers=headers, data=payload)\n            response = r.json()\n\n            if (r.status_code is 200):\n                token = response['user']['authentication_token']\n                session['api_session_token'] = token)\n        else:\n            flash('Wrong credentials!')\n            return error_400('Error', 'Wrong credentials', 401)\n\n    return render_template('users/login.html')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "while-loop"], "comments": [{"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 2, "creation_date": 1477523715, "post_id": 40273582, "comment_id": 67806887, "body": "The error is actually &quot;gue<b><i>sss</i></b>esTakenInt&quot; is not defined. Count the s&#39;s."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 7067541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWlLv.jpg?s=128&g=1", "display_name": "Arthur Zopellaro", "link": "https://stackoverflow.com/users/7067541/arthur-zopellaro"}, "is_accepted": true, "score": 0, "last_activity_date": 1477525660, "last_edit_date": 1495540097, "creation_date": 1477525660, "answer_id": 40273894, "question_id": 40273582, "link": "https://stackoverflow.com/questions/40273582/input-must-be-between-100-and-200-python/40273894#40273894", "title": "Input must be between 100 and 200 python", "body": "<p>As stated by <a href=\"https://stackoverflow.com/questions/40273582/input-must-be-between-100-and-200-python#comment67806887_40273582\">JJJ</a>, you have a typo there. But that is not all, you also have two different <code>while</code>: </p>\n\n<ol>\n<li>is used to check if the user typed in a number or not</li>\n<li>is used to check if the number is in between 100 and 200</li>\n</ol>\n\n<hr>\n\n<p>Here's what you need to do:</p>\n\n<ol>\n<li>Both <code>while</code> should be merged into one.</li>\n<li>Use <code>str.isnumeric()</code> to test if the string is <a href=\"https://en.wikipedia.org/wiki/NaN\" rel=\"nofollow noreferrer\">NaN</a> before parsing it to <code>int(str)</code>.</li>\n<li>Change <code>guesssesTakenInt</code> to <code>guessesTakenInt</code></li>\n<li>Change <code>guessesTakenInt += 1ed</code> to <code>guessesTakenInt += 1</code></li>\n<li>Fix your indentation</li>\n</ol>\n\n<hr>\n\n<p>I took the liberty to change your code.</p>\n\n<pre><code>def main():\n    # this is the code that runs when your program is executed\n    guessesTakenInt = 0\n    guessesTakenStr = 0\n\n    user_input = input(\"Please enter a number between 100 and 200: \")\n\n    while True:\n        if user_input.isnumeric():\n            user_input = int(user_input)\n            guessesTakenInt += 1\n            if user_input &gt; 200:\n                user_input = input(\"This number is too big. Try again: \")\n            elif user_input &lt; 100:\n                user_input = input(\"This number is too low. Try again: \")\n            else:\n                guessesTakenInt = str(guessesTakenInt)\n                guessesTakenStr = str(guessesTakenStr)\n                print(\"That number is just right!\")\n                print(\"You tried {} numbers and {} non-numbers to get it right.\".format(guessesTakenInt, guessesTakenStr))\n                break\n        else:\n            guessesTakenStr += 1\n            print(\"Sorry that is not a number. \")\n            user_input = input(\"Please enter a number between 100 and 200: \")\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 6267901, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d84920a6c14b00dc96d1459f0fb34a0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe2", "link": "https://stackoverflow.com/users/6267901/jane-doe2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 40273894, "answer_count": 1, "score": -1, "last_activity_date": 1477526471, "creation_date": 1477523533, "question_id": 40273582, "link": "https://stackoverflow.com/questions/40273582/input-must-be-between-100-and-200-python", "title": "Input must be between 100 and 200 python", "body": "<p>I am creating a program that makes the user enter a number numerous times until said number is between 100 and 200. If the user enters a string or non integer, an error messages is created and the user is prompted to try again. Currently I am having issues with the line:          </p>\n\n<pre><code>print(\"You tried \" + guesssesTakenInt + \"numbers and \" + guessesTakenStr +  \n   \"non-number to get it right.\")\n</code></pre>\n\n<p>I assume I have to make it into one while loop, so that the following error: guessesTakenInt is not defined.</p>\n\n<pre><code>##\n## a6p2.py\n##\n\n\ndef main():\n    # this is the code that runs when your program is executed\n    guessesTakenInt = 0\n    guessesTakenStr = 0\n    while True:\n\n        guessesTakenStr += 1\n        try:\n            userNumber = int(input(\"Please enter a number between 100 and 200: \"))\n        except ValueError:\n            print(\"Sorry that is not a number. \")\n            continue\n        else:\n            break\n\n    while userNumber &gt; 0:\n\n        guessesTakenInt += 1ed\n\n        if userNumber &gt; 200:\n            userNumber = int(input(\"This number is too big. Try again: \"))\n        elif userNumber &lt; 100:\n            userNumber = int(input(\"This number is too low. Try again: \"))\n        else:\n            guessesTakenInt = str(guessesTakenInt)\n            guessesTakenStr = str(guessesTakenStr)\n\n                print(\"That number is just right!\")\n                print(\"You tried \" + guesssesTakenInt + \"numbers and \" + guessesTakenStr + \" non-number to get it right.\")\n                break\n\n\n\n\n    return\n    print (main())\n\n\n\n\n\n\n###############################################################\n## DO NOT CHANGE THIS! LEAVE IT AT THE BOTTOM OF YOUR FILE\n## calls the main function when this file is run with Python\n##\n## python stats.py\n##\n###############################################################\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1477523851, "post_id": 40273548, "comment_id": 67806921, "body": "What&#39;s the question again? Does the code you provided not do what you are wanting it to do?"}, {"owner": {"reputation": 103, "user_id": 5127962, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d5297368f89c5024b94d32befd877dca?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred H.", "link": "https://stackoverflow.com/users/5127962/alfred-h"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1477523999, "post_id": 40273548, "comment_id": 67806963, "body": "@downshift, I believe I am having issues with the Createintlist function, I cannot get it to create a lists of integers (using the given sentinel value), since that is not working the rest of my &quot;main&quot; program is not working"}, {"owner": {"reputation": 73, "user_id": 2566388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18deeb76c7adf2e0f3abdea09c0970da?s=128&d=identicon&r=PG", "display_name": "Samira N", "link": "https://stackoverflow.com/users/2566388/samira-n"}, "edited": false, "score": 1, "creation_date": 1477524179, "post_id": 40273548, "comment_id": 67807005, "body": "You&#39;re already calling all 3 functions (<code>createIntList</code>, <code>multiply</code>, and <code>summation</code>) from your <code>main()</code> -- there shouldn&#39;t be a problem with that. (You sound like you&#39;re worried that Python won&#39;t &quot;let&quot; you call multiple functions from <code>main()</code>, but it definitely will; there&#39;s no limit on the number of functions you can call in a script.) If you&#39;re having a specific problem, describe it to us (any specific error messages you&#39;re seeing?)"}, {"owner": {"reputation": 73, "user_id": 2566388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18deeb76c7adf2e0f3abdea09c0970da?s=128&d=identicon&r=PG", "display_name": "Samira N", "link": "https://stackoverflow.com/users/2566388/samira-n"}, "edited": false, "score": 1, "creation_date": 1477524511, "post_id": 40273548, "comment_id": 67807084, "body": "@AlfredH., There&#39;s a number of small errors in your code. For example, in your <code>main</code> function, you&#39;re calling <code>createIntList</code> on <code>myInt</code>, but you&#39;ve never defined the value of <code>myInt</code>. Also, <code>createIntList</code> returns a list, and if you want to use that returned list, you should assign it to a variable when you call the function (for example, <code>intList = createIntList(myInt)</code>)."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1477524767, "post_id": 40273548, "comment_id": 67807165, "body": "sounds like Samira&#39;s listed the details for you to check. If that function <code>createIntList</code> is giving any errors let us know what the error message is, because it seems to work for me when I run it (although I&#39;m running a different python version that you&#39;re using, so I had to make a few changes to the print format)."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 7067541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWlLv.jpg?s=128&g=1", "display_name": "Arthur Zopellaro", "link": "https://stackoverflow.com/users/7067541/arthur-zopellaro"}, "is_accepted": false, "score": 1, "last_activity_date": 1477546338, "last_edit_date": 1495535655, "creation_date": 1477545847, "answer_id": 40276719, "question_id": 40273548, "link": "https://stackoverflow.com/questions/40273548/how-make-3-functions-to-run-in-one-program/40276719#40276719", "title": "how make 3 functions to run in one program", "body": "<p><a href=\"https://stackoverflow.com/questions/40273548/how-make-3-functions-to-run-in-one-program#comment67807084_40273548\">Samira N</a> already gave you some feedback, but there are many other problems with your code. I commented all lines with errors and corrected them for you.</p>\n\n<pre><code>def summation(intlist):\n    output = 0  #you are correct, as you are using it below, you need to initialize beforehand\n    #for x in range(len(intlist)): # see below for a better way to use list in a 'for'\n    for x in intlist: # 'x' now represents the proper element inside the list, iterating each element\n        #output += intlist[x] #see below on how to use 'x' with the new 'for'\n        output += x\n    return output\n\ndef multiply(intlist):\n    if len(intlist) == 0:\n        #output = 0 # no need for 'output'\n        #return output # same\n        return 0\n    else:\n        output = 1# same here, you are using output below, so you need to initialize beforehand. Nice!\n        #for x in range(len(intlist)): # same as before, see below for a better way to use 'for' with lists\n        for x in intlist:\n            #output = intlist[x] * output # same as before, use 'x' instead of 'intlist[x]' with the new 'for'\n            output = x * output\n        return output\n\n#def createIntList(myInt): #you are initializing myInt in the input, so you dont need it here\ndef createIntList():\n    #createlist = [] # you should use better names for your variables\n    new_list = []\n    #myInt = int(input(\"What do you want the sentinel to be?\")) # pick a better name for myInt\n    sentinel = int(input(\"What do you want the sentinel to be?\"))\n    #addNum = None # same, better name\n    number = None\n    #while myInt != addNum: #see below for the 'while' with the new variable names\n    while sentinel != number:\n        #number = input(\"Please enter a number, \", sentinel, \"to stop: \") # you need to use + to append, but you need to parse it to str as 'sentinel' is an int\n        number = int(input(\"Please enter a number, \" + str(sentinel) + \"to stop: \")) # same you did with 'sentinel', need to add 'int(' so you make sure it returns a number\n        #createlist.append(addNum) #same code below, but with the new variable names\n        if sentinel != number: # so you don't add the sentinel to the list\n            new_list.append(number)\n    return new_list\n\ndef main():\n    print(\"Welcome to the Simple Math Helper\")\n    listIteration = int(input(\"How many list would you like to create? \"))\n    #x = 0 # x is already being initialized/declared in the 'for' below\n    #for x in range(len(listIteration)): # listIteration is already an int, so you don't need to use len()\n    for x in range(listIteration):\n        print(\"Your are creating list #\", x+1) #x+1 because x starts as 0, +1 ensures it will show 'Your are creating list #1' and so on\n        #createIntList(myInt) # you are calling the function with a variable that doesnt exist: myInt\n        int_list = createIntList() # as createIntList returns something, lets use int_list to save the returned list\n        #multiply(createIntList) # you need to send as paramter a variable (not the function itself)\n        multiplication_output = multiply(int_list) # you are returning an int, so you need to store it somewhere\n        #summation(createIntList) # send a variable, not the function\n        sum_output = summation(int_list) # same as before store the return somewhere\n        # x = x + 1 # no need for this, the 'for' does it already\n        print(\"For the list \", int_list)\n        print(\"The summation is \", sum_output)\n        print(\"The product is \", multiplication_output)\n    print(\"Thank you for using the Simple Math Helper\")\n\n\nmain()\n</code></pre>\n\n<p>I tried to keep things simple as you asked:</p>\n\n<blockquote>\n  <p>For answers please make it as simple as possible refrain from using any technique that is too advanced as I am still learning Python and do not want to jump too far ahead...</p>\n</blockquote>\n\n<p>This is how I would do, though:</p>\n\n<pre><code>def summation(int_list):\n    return sum(int_list) #sum() is a pretty good built-in function :)\n\ndef multiply(int_list):\n    if int_list: #better way to write 'if len(intlist) != 0:'\n        output = 1\n        for x in int_list:\n            output = x * output\n        return output\n    else:\n        return 0\n\ndef create_list(list_number):\n    print('Your are creating list #{}'.format(list_number))\n    new_list = []\n    sentinel = int(input('What do you want the sentinel to be? '))\n    number = None\n    while number != sentinel:\n        #str.format() is a function that I love.\n        #Check it out: https://pyformat.info/\n        number = int(\n        input('Please enter a number ({} to stop): '.format(sentinel)))\n        if number != sentinel:\n            new_list.append(number)\n    return new_list\n\ndef main():\n    print('Welcome to the Simple Math Helper')\n    listIteration = int(\n    input('How many list would you like to create? '))\n\n    for x in range(listIteration):\n        int_list = create_list(x+1)\n        multiplication_output = multiply(int_list)\n        sum_output = summation(int_list)\n        print('''For the list {}\nThe summation is {}\nThe product is {}'''.format(int_list, sum_output,multiplication_output))\n\n    print('Thank you for using the Simple Math Helper')\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 5127962, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d5297368f89c5024b94d32befd877dca?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred H.", "link": "https://stackoverflow.com/users/5127962/alfred-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1477546338, "creation_date": 1477523322, "question_id": 40273548, "link": "https://stackoverflow.com/questions/40273548/how-make-3-functions-to-run-in-one-program", "title": "how make 3 functions to run in one program", "body": "<p>For answers please make it as simple as possible refrain from using any technique that is too advanced as I am still learning Python and do not want to jump too far ahead...</p>\n\n<p>For the def main program, I am trying to run all 3 functions in this \"Main\", the Summation and Multiply functions is self explanatory, the CreateIntList is suppose function takes in a sentinel value (an integer), and\nit takes in a sentinal value(int) and return a list of integers. it prompts the user to create a list of integers, using the provided sentinel value as the number the user enters to exit the creation of the list. </p>\n\n<pre><code>For each list:\no Tell the user which number list they are creating (starting at 1)\no Ask the user for their desired sentinel value\no Create a lists of integers (using the given sentinel value)\no Calculate the summation\no Calculate the product\no Print out:\n\uf0a7 The entire list\n\uf0a7 The summation of the list\n\uf0a7 The product of the list\n\n\n\ndef summation(intlist):\n    output = 0\n    for x in range(len(intlist)):\n        output += intlist[x]\n    return output\n\ndef multiply(intlist):\n    if len(intlist) == 0:\n        output = 0\n        return output\n    else:\n        output = 1\n        for x in range(len(intlist)):\n            output = intlist[x] * output\n        return output\n\ndef createIntList(myInt):\n    createlist = []\n    myInt = int(input(\"What do you want the sentinel to be?\"))\n    addNum = None\n while myInt != addNum:\n        addNum = input(\"Please enter a number, \", myInt, \"to stop: \")\n        createlist.append(addNum)\n    return createlist\n\ndef main():\n    print(\"Welcome to the Simple Math Helper\")\n    listIteration = int(input(\"How many list would you like to create? \"))\n    x = 0\n    for x in range(len(listIteration)):\n        print(\"Your are creating list #\", x)\n        createIntList(myInt)\n        multiply(createIntList)\n        summation(createIntList)\n        x = x + 1\n    print(\"Thank you for using the Simple Math Helper\")\n\n\nmain()\n</code></pre>\n\n<p>Projected output:</p>\n\n<pre><code>Welcome to the Simple Math Helper\nHow many lists would you like to create? 1\nYou are creating list #1\nWhat do you want the sentinel to be? 0\nPlease enter a number, 0 to stop: 1\nPlease enter a number, 0 to stop: 2\nPlease enter a number, 0 to stop: 3\nPlease enter a number, 0 to stop: 4\nPlease enter a number, 0 to stop: 5\nPlease enter a number, 0 to stop: 6\nPlease enter a number, 0 to stop: 7\nPlease enter a number, 0 to stop: 8\nPlease enter a number, 0 to stop: 9\nPlease enter a number, 0 to stop: 10\nPlease enter a number, 0 to stop: -9\nPlease enter a number, 0 to stop: -3\nPlease enter a number, 0 to stop: -1\nPlease enter a number, 0 to stop: 0\nFor the list [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, -9, -3, -1]\nThe summation is 42\nThe product is -97977600\nThank you for using the Simple Math Helper\n</code></pre>\n"}, {"tags": ["python", "dictionary", "key"], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "edited": false, "score": 0, "creation_date": 1477524600, "post_id": 40273611, "comment_id": 67807111, "body": "Can you use the a.get(&#39;key&#39;, &#39;defaultValue&#39;) format in the original example problem?  I&#39;m not quite following how to use it in the bigger picture."}, {"owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "edited": false, "score": 0, "creation_date": 1477524737, "post_id": 40273611, "comment_id": 67807153, "body": "DJV just provided the answer in another comment:  [d.get(&#39;key1&#39;, 0) for d in dict_list]"}], "tags": [], "owner": {"reputation": 1038, "user_id": 3246043, "user_type": "registered", "profile_image": "https://graph.facebook.com/1488120014/picture?type=large", "display_name": "AbrahamB", "link": "https://stackoverflow.com/users/3246043/abrahamb"}, "is_accepted": false, "score": 2, "last_activity_date": 1477523677, "creation_date": 1477523677, "answer_id": 40273611, "question_id": 40273542, "link": "https://stackoverflow.com/questions/40273542/python-create-list-from-list-of-dictionaries-for-each-dictionary-that-has-a-spec/40273611#40273611", "title": "Python create list from list of dictionaries for each dictionary that has a specific key", "body": "<p>Absolutely. The dict has a \"get\" method, which you can use.</p>\n\n<p>For example</p>\n\n<pre><code>a = {}\na.get('this-does-not-exist')\n</code></pre>\n\n<p>That will return a None type.</p>\n\n<p>Now you can get fancier, such as returning a default value if nothing is found:</p>\n\n<pre><code>a = {}\na.get('this-does-not-exist', [])\n</code></pre>\n\n<p>which will return an empty list [].</p>\n"}, {"tags": [], "owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "is_accepted": false, "score": 1, "last_activity_date": 1477523822, "creation_date": 1477523822, "answer_id": 40273636, "question_id": 40273542, "link": "https://stackoverflow.com/questions/40273542/python-create-list-from-list-of-dictionaries-for-each-dictionary-that-has-a-spec/40273636#40273636", "title": "Python create list from list of dictionaries for each dictionary that has a specific key", "body": "<p>You were pretty close:</p>\n\n<pre><code>key1vals = [d['key1'] for d in dict_list if 'key1' in d]\n</code></pre>\n\n<p>To get all keys' values:</p>\n\n<pre><code>all_keys = {key for d in dict_list for key in d}\n\nresult_dict = {}\nfor key in all_keys:\n    result_dict[key] = [d[key] for d in dict_list if key in d]\n\nprint(result_dict)\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre><code>{'key1': [1, 1], 'key4': [4], 'key3': [3, 3], 'key2': [2, 2, 2]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1120, "user_id": 6642340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NCelF.jpg?s=128&g=1", "display_name": "DJV", "link": "https://stackoverflow.com/users/6642340/djv"}, "is_accepted": true, "score": 2, "last_activity_date": 1477536584, "last_edit_date": 1477536584, "creation_date": 1477523870, "answer_id": 40273645, "question_id": 40273542, "link": "https://stackoverflow.com/questions/40273542/python-create-list-from-list-of-dictionaries-for-each-dictionary-that-has-a-spec/40273645#40273645", "title": "Python create list from list of dictionaries for each dictionary that has a specific key", "body": "<pre><code>dict1 = {'key1': 1, 'key2': 2, 'key4': 4}\ndict2 = {'key2': 2, 'key3': 3}\ndict3 = {'key1': 1, 'key2': 2, 'key3': 3}\n\ndict_list = [dict1, dict2, dict3]\n\nkeys = ['key1', 'key2', 'key3', 'key4', 'key5']\nfor key in keys:\n    values = [d[key] for d in dict_list if key in d]\n    print(values)\n</code></pre>\n\n\n\n<pre><code>[1, 1]\n[2, 2, 2]\n[3, 3]\n[4]\n[]\n</code></pre>\n\n<p>But the same item lookup is done twice here: <code>key in d</code> and <code>d[key]</code>. You can avoid it:</p>\n\n<pre><code>    values = list(filter(None, (d.get(key) for d in dict_list)))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    values = [i for i in (d.get(key) for d in dict_list) if i is not None]\n</code></pre>\n\n<hr>\n\n<p><em>Added</em>:\nAs you mentioned in comments, you actually need <code>0</code> if key is not in dict. Just use <code>get</code> method with default value:</p>\n\n<pre><code>    values = [d.get(key, 0) for d in dict_list]\n</code></pre>\n\n\n\n<pre><code>[1, 0, 1]\n[2, 2, 2]\n[0, 3, 3]\n[4, 0, 0]\n[0, 0, 0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1038, "user_id": 3246043, "user_type": "registered", "profile_image": "https://graph.facebook.com/1488120014/picture?type=large", "display_name": "AbrahamB", "link": "https://stackoverflow.com/users/3246043/abrahamb"}, "edited": false, "score": 0, "creation_date": 1477523944, "post_id": 40273646, "comment_id": 67806951, "body": "I would suggest using the get since it is cleaner. You&#39;re already calling the key in dict[&#39;key1&#39;], so this would be shorter as just dict.get(&#39;key1&#39;)"}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1477524291, "post_id": 40273646, "comment_id": 67807029, "body": "Either way. Yeah, it&#39;s shorter, but I think the <code>if &#39;key1&#39; in d</code> language may be a bit more Pythonic and easier to read. That approach literally checks whether the dictionary even has a key <code>&#39;key1&#39;</code>. You can&#39;t go wrong either way."}, {"owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "edited": false, "score": 0, "creation_date": 1477524440, "post_id": 40273646, "comment_id": 67807066, "body": "Can I add an &quot;else&quot; statement, such as &gt;&gt;&gt;key1vals = [dict[&#39;key1&#39;] for dict in dict_list if &#39;key1&#39; in dict else 0].  Then I would want key1vals to contain [1, 0, 1]."}, {"owner": {"reputation": 1120, "user_id": 6642340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NCelF.jpg?s=128&g=1", "display_name": "DJV", "link": "https://stackoverflow.com/users/6642340/djv"}, "edited": false, "score": 0, "creation_date": 1477524591, "post_id": 40273646, "comment_id": 67807109, "body": "<code>[d.get(&#39;key1&#39;, 0) for d in dict_list]</code>"}], "tags": [], "owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "is_accepted": false, "score": 0, "last_activity_date": 1477523879, "creation_date": 1477523879, "answer_id": 40273646, "question_id": 40273542, "link": "https://stackoverflow.com/questions/40273542/python-create-list-from-list-of-dictionaries-for-each-dictionary-that-has-a-spec/40273646#40273646", "title": "Python create list from list of dictionaries for each dictionary that has a specific key", "body": "<p>Thanks for the suggestions!  I found another solution which simply reversed the \"for\" and \"if\" statements in my previous attempt:</p>\n\n<pre><code>&gt;&gt;&gt; key1vals = [dict['key1'] for dict in dict_list if 'key1' in dict]\n&gt;&gt;&gt; key1vals\n[1, 1]\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Would the filter or \"get\" methods be preferred to this?</p>\n"}], "owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1477603079, "accepted_answer_id": 40273645, "answer_count": 4, "score": 1, "last_activity_date": 1477536584, "creation_date": 1477523290, "last_edit_date": 1477525084, "question_id": 40273542, "link": "https://stackoverflow.com/questions/40273542/python-create-list-from-list-of-dictionaries-for-each-dictionary-that-has-a-spec", "closed_reason": "Duplicate", "title": "Python create list from list of dictionaries for each dictionary that has a specific key", "body": "<p>I have a list of dictionaries that do not necessarily have the same keys.  I am trying to make a new list of the values contained in each dictionary that has a specific key.</p>\n\n<p>E.g.</p>\n\n<pre><code>dict1 = {'key1': 1, 'key2': 2, 'key4': 4}\ndict2 = {'key2': 2, 'key3': 3}\ndict3 = {'key1': 1, 'key2': 2, 'key3': 3}\n\ndict_list = [dict1, dict2, dict3]\n</code></pre>\n\n<p>Now I'm trying to create a list from dict_list as follows:</p>\n\n<pre><code>key2vals = [dict['key2'] for dict in dict_list]\nprint(key2vals)\n   [2, 2, 2]\n</code></pre>\n\n<p>That works well, since 'key2' is contained in every dictionary in the list.  However, when I try a key that does not appear in every dictionary, I get a fault.  E.g. 'key1':</p>\n\n<pre><code>&gt;&gt;&gt; key1vals = [dict['key1'] for dict in dict_list]\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;stdin&gt;\", line 1, in &lt;listcomp&gt;\nKeyError: 'key1'\n</code></pre>\n\n<p>Is there a short and straightforward way that I can do something like the following, which does not work?</p>\n\n<pre><code># This does not work\nkey1vals = [dict['key1'] if 'key1' in dict for dict in dict_list]\n</code></pre>\n\n<p>What is the most Pythonic way to accomplish this?</p>\n\n<p><strong>ANSWER:</strong>\nThe order of the for and if statements should have been reversed:</p>\n\n<pre><code>key1vals = [dict['key1'] for dict in dict_list if 'key1' in dict ]\n</code></pre>\n\n<p>Also, with AbrahamB and DJV's suggestions, I was able to add a default value to those dictionaries without the search key:</p>\n\n<pre><code>[dict.get('key1', 0) for dict in dict_list] \n</code></pre>\n"}, {"tags": ["python", "unit-testing", "nose", "python-unittest", "python-unittest.mock"], "answers": [{"tags": [], "owner": {"reputation": 1626, "user_id": 2452406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e84bcf837bc03baed9f7e8c3ecd8a368?s=128&d=identicon&r=PG", "display_name": "aleivag", "link": "https://stackoverflow.com/users/2452406/aleivag"}, "is_accepted": false, "score": 1, "last_activity_date": 1477548103, "creation_date": 1477548103, "answer_id": 40277202, "question_id": 40273537, "link": "https://stackoverflow.com/questions/40273537/mock-an-attribute-in-python-class-for-unit-testing/40277202#40277202", "title": "Mock an attribute in python class for unit testing", "body": "<p>you could do 2 things here, the simplest its just patch Pyro4.Proxy, something like this:</p>\n\n<pre><code>from unittest.mock import patch\n# or from mock import create_autospec if you are in py2\n\nclass TestA(TestCase):\n  @patch('Pyro4.Proxy', autospec=True)\n  def test_method(self):\n     temp_A = A()\n     temp_A.method_1()\n</code></pre>\n\n<p>the trick is to patch the \"right object\" and don't instantiate the class till after you patch (inside your test function) , <code>Pyro4.Proxy</code> is the best object i could deduce from your code, but if your <code>class A</code> is in my_module, maybe the best object to patch is <code>my_module.Pyro4.Proxy</code>.</p>\n\n<p>the other thing you could want is to just mock the var variable. then as you define <code>self.var</code> inside the <code>__init__</code> method and assuming you don't want to mock the whole <code>__init__</code> method then you can</p>\n\n<pre><code>from unittest.mock import create_autospec\n# or from mock import create_autospec if you are in py2\n\nclass TestA(TestCase):\n  def setUp(self):\n     self.temp_A = classA()\n     self.temp_A.var = create_autospec(Pyro4.Proxy)(None)\n\n  def test_method(self):\n     self.temp_A.method_1()\n</code></pre>\n\n<p>if you can refactor your class a bit i would suggest make the var a property for easy mocking</p>\n\n<pre><code>class A(object):\n   def __init__(self):\n         ...\n   @property\n   def var(self):\n       return Pyro4.Proxy(self.ns.lookup(temp_name))\n\n   def method_1(self):\n       .....\n</code></pre>\n\n<p>and then your testing class can be</p>\n\n<pre><code>from unittest.mock import create_autospec, PropertyMock\nclass TestA(TestCase):\n  def setUp(self):\n     self.temp_A = classA()\n     type(self.temp_A).var = PropertyMock(side_effect=lambda *x, **y: create_autospec(Pyro4.Proxy)(*x, **y))\n\n  def test_method(self):\n     self.temp_A.method_1()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477604502, "creation_date": 1477604502, "answer_id": 40294646, "question_id": 40273537, "link": "https://stackoverflow.com/questions/40273537/mock-an-attribute-in-python-class-for-unit-testing/40294646#40294646", "title": "Mock an attribute in python class for unit testing", "body": "<p>I think the easiest way to handle this is to stub out the class undertest.</p>\n\n<h1>In the test file</h1>\n\n<pre><code>class AStub(A):\n   def __init__(self):\n     #  By pass super constructor\n     self.var = None\n\nclass TestA(TestCase):\n  def setUp(self):\n    self.helper = AStub()\n</code></pre>\n"}], "owner": {"reputation": 1354, "user_id": 6412942, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c8302ba86cf28126f773c6f40573c175?s=128&d=identicon&r=PG&f=1", "display_name": "leopoodle", "link": "https://stackoverflow.com/users/6412942/leopoodle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4300, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1508429516, "creation_date": 1477523274, "last_edit_date": 1508429516, "question_id": 40273537, "link": "https://stackoverflow.com/questions/40273537/mock-an-attribute-in-python-class-for-unit-testing", "title": "Mock an attribute in python class for unit testing", "body": "<p>I would like to mock the <code>self.var</code> in my unit test since the name server lookup fails. I've tried bunch of things using <code>patch</code>, but I couldn't get it to work. What is the best way to mock <code>self.var</code>?</p>\n\n<p>My class definition is as below:</p>\n\n<pre><code>class A:\n   def __init__(self):\n       self.var = Pyro4.Proxy(self.ns.lookup(temp_name))\n   def method_1(self):\n   .....\n</code></pre>\n\n<p>My unit test goes like this:</p>\n\n<pre><code>class TestA(TestCase):\n    def setUp(self):\n        self.temp_A = classA()    \n    def test_method(self):\n       self.temp_A.method_1()`\n</code></pre>\n"}, {"tags": ["python", "for-loop", "dictionary", "dictionary-comprehension"], "comments": [{"owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "edited": false, "score": 2, "creation_date": 1477523357, "post_id": 40273496, "comment_id": 67806786, "body": "My first guess would be that <code>key1</code> is not what you think it is and they are all the same value, so you end up with one entry.  Post some actual sample data structures for corrected_dict, server_list and flag_list so we can poke around."}, {"owner": {"reputation": 23, "user_id": 5817754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7abb31daced72aa7fd288082e57107a?s=128&d=identicon&r=PG&f=1", "display_name": "Pines", "link": "https://stackoverflow.com/users/5817754/pines"}, "reply_to_user": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "edited": false, "score": 0, "creation_date": 1477527316, "post_id": 40273496, "comment_id": 67807788, "body": "I updated the question with a sample. Hope this is clearer. Anyhow, the answer below works just fine."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5817754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7abb31daced72aa7fd288082e57107a?s=128&d=identicon&r=PG&f=1", "display_name": "Pines", "link": "https://stackoverflow.com/users/5817754/pines"}, "edited": false, "score": 0, "creation_date": 1477525544, "post_id": 40273689, "comment_id": 67807350, "body": "Hey that is awesome, your answer is great. It worked just fine.  I missed that part of doing the nested dict. comperhension. I wuld vote your answer but stillnot got enough points jeje. Thanks for your help!!"}], "tags": [], "owner": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "is_accepted": false, "score": 1, "last_activity_date": 1477524169, "creation_date": 1477524169, "answer_id": 40273689, "question_id": 40273496, "link": "https://stackoverflow.com/questions/40273496/python-dictionary-of-dictionaries-comprehension-with-nested-loops/40273689#40273689", "title": "python dictionary of dictionaries comprehension with nested loops", "body": "<p>Well for starters, it looks like all the keys in <code>new_services_dict</code> will be the same since you have a nested for loop and not a nested dictionary comprehension, which I am assuming is what you want.</p>\n\n<p>For example,</p>\n\n<pre><code>&gt;&gt;&gt;{k1:{k2:v} for k1 in ['a','b'] for k2,v in zip(['aa','bb'],[1,2])}\n{'b': {'bb': 2}, 'a': {'bb': 2}} # dictionaries are unordered\n</code></pre>\n\n<p>Here <code>k1</code> takes value of <code>'a'</code> then pauses until <code>k2,v</code> for loop iterates through all of the items before resuming. This just keeps reassigning <code>k1</code> to <code>{'bb':2}</code> since that's the last item in the <code>k2</code> iteration. This is why all of your values are probably coming out the same.</p>\n\n<p>What you probably want is a nested dictionary comprehension that would look like this:</p>\n\n<pre><code>&gt;&gt;&gt;{k1:{k2:v for k2,v in zip(['aa','bb'],[1,2])} for k1 in ['a','b']}\n{'b': {'aa': 1, 'bb': 2}, 'a': {'aa': 1, 'bb': 2}}\n</code></pre>\n\n<p>Here, <code>k1</code> takes the value of <code>'a'</code> then pauses until the nested comprehension runs.</p>\n\n<p>Check this out for more information and better explanation on <a href=\"https://docs.python.org/3/tutorial/datastructures.html#nested-list-comprehensions\" rel=\"nofollow\">nested comprehensions</a>. This is for list comprehensions, but the same logic applies.</p>\n"}], "owner": {"reputation": 23, "user_id": 5817754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7abb31daced72aa7fd288082e57107a?s=128&d=identicon&r=PG&f=1", "display_name": "Pines", "link": "https://stackoverflow.com/users/5817754/pines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1477527257, "creation_date": 1477523029, "last_edit_date": 1477527257, "question_id": 40273496, "link": "https://stackoverflow.com/questions/40273496/python-dictionary-of-dictionaries-comprehension-with-nested-loops", "title": "python dictionary of dictionaries comprehension with nested loops", "body": "<p>I am starting to understand and implement dictionary comperhension. I am trying to build a dictionary with nested dictionaries like this:</p>\n\n<blockquote>\n  <p>{serviceA:{ip_server1: flag, ip_server2:flag...}, serviceB{ip_server1: flag, ip_server_2: flag...etc}}</p>\n</blockquote>\n\n<p>I am having problems to build it as when getting the result It just throws me tha last element. I have tried many ways and all lead the same way. Here is the code I used :</p>\n\n<p>DICTIONARY 1:</p>\n\n<pre><code>services_dict = {key_service: value for key_service,value in config_file.iteritems() if key_service.startswith(\"s-\")}\n#It returns a dictionary in this form {service1: [list_of_flags]}\n</code></pre>\n\n<p>Then I have an external list that has the server IPs </p>\n\n<blockquote>\n  <p>server_list = [S1, S2, S3, S4..etc]</p>\n</blockquote>\n\n<p>After this I want to use dic comprehension to build the complete dictionary:</p>\n\n<pre><code>new_services_dict = { key1: {key2:fl} for key1, flag_list in corrected_dict.items() for key2, fl in zip(server_list, flag_list)}\n</code></pre>\n\n<p>The problem is that it only returns the last element of the ip list (1 element only)</p>\n\n<blockquote>\n  <p>{'ServiceA': {'last_server_ip_in_list': 'Last_flag_in_list'}}</p>\n</blockquote>\n\n<p>I am not sure why it is not appending new values and just take sthe last item in the iteration. </p>\n\n<p>Any help would be greatly appreciated. I have already tried many ways and i am not able to find out which part of the iteraiton i am missing.</p>\n\n<p><strong><em>UPDATED INFO</em></strong></p>\n\n<p>As requested in the coment below here is some sample data to clarify the question:\nLet say we have to map a list of students that I have separated from a dictionary that contains the college subjects with the grades:</p>\n\n<blockquote>\n  <p>services_dict = {math:['A','B','C','D'], Databases:['B','C','D', 'A']}\n  students list = ['Jhon','Michael','Leslie','Lorraine']</p>\n</blockquote>\n\n<p>The grades are listed respectively from the student list, so that is not the problem (on which grade belongs to whom).</p>\n\n<p>What is intended it to get a dictionary in the form:</p>\n\n<blockquote>\n  <p>{'math':{'Jhon':'A', 'Michael':'B', 'Leslie':'C', 'Lorraine':'D'}, Databases:{'Jhon':'B', 'Michael':'C', 'Leslie':'D', 'Lorraine':'A'}}</p>\n</blockquote>\n\n<p>The problem i am getting is that <strong><em>new_services_dict</em></strong> is only returning:</p>\n\n<blockquote>\n  <p>{'math:{'Lorraine':'D'}</p>\n</blockquote>\n\n<p>I hope this is clearer than the explanation above.</p>\n"}, {"tags": ["python", "list", "stack", "queue"], "comments": [{"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1477522639, "post_id": 40273427, "comment_id": 67806580, "body": "I think he means like a list so look into substrings and by top I bet they mean index 0"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1477522931, "post_id": 40273427, "comment_id": 67806666, "body": "According to <a href=\"https://en.wikibooks.org/wiki/Data_Structures/Stacks_and_Queues\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Data_Structures/Stacks_and_Queues</a>, there is only <code>one end called top of the stack.</code> and <code>the item at the front of the queue.</code>, doesn&#39;t seem like there&#39;s ambiguity it"}, {"owner": {"reputation": 917, "user_id": 5759063, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-1eAgvsus1Fk/AAAAAAAAAAI/AAAAAAAAAGw/i5CaZxtNOug/photo.jpg?sz=128", "display_name": "Sreejith Menon", "link": "https://stackoverflow.com/users/5759063/sreejith-menon"}, "edited": false, "score": 0, "creation_date": 1477522957, "post_id": 40273427, "comment_id": 67806676, "body": "It very well depends on how you want to look at it. For someone, the top of the stack could be the last element of the list (since FIFO), so any <code>pop()</code> operation would mean taking out the most recently inserted element. On the other hand, stack top could be the first element, where after each <code>pop()</code> you have readjust all the subsequent elements to the left by 1 position."}, {"owner": {"reputation": 73, "user_id": 2566388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18deeb76c7adf2e0f3abdea09c0970da?s=128&d=identicon&r=PG", "display_name": "Samira N", "link": "https://stackoverflow.com/users/2566388/samira-n"}, "edited": false, "score": 1, "creation_date": 1477523047, "post_id": 40273427, "comment_id": 67806707, "body": "You might want to look at the answers to this question: <a href=\"http://stackoverflow.com/questions/10974922/what-is-the-basic-difference-between-stack-and-queue\">What is the basic difference between a stack and a queue?</a> Specifically, <a href=\"http://stackoverflow.com/a/19241916/2566388\">this answer</a> defines the terms &quot;top&quot; and &quot;front&quot; for you."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1477523408, "post_id": 40273427, "comment_id": 67806807, "body": "If you&#39;re implementing stacks and queues on top of lists, the front of the queue or the top of the stack is whichever end you chose to use for that purpose. One choice might be more natural for whatever reason (especially for stacks), but it really depends on your implementation."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1477523672, "post_id": 40273427, "comment_id": 67806880, "body": "The &quot;stack&quot; metaphor is supposed to refer to a pile of plates. The top is where you add and remove plates. When you add a new plate, it goes on the top, and that&#39;s the one you get when you take a plate off the stack."}], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 4577206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBGxT.png?s=128&g=1", "display_name": "beeftendon", "link": "https://stackoverflow.com/users/4577206/beeftendon"}, "is_accepted": false, "score": 5, "last_activity_date": 1477694205, "last_edit_date": 1477694205, "creation_date": 1477523317, "answer_id": 40273547, "question_id": 40273427, "link": "https://stackoverflow.com/questions/40273427/which-end-of-a-list-is-the-top/40273547#40273547", "title": "Which end of a list is the top?", "body": "<p>I think that, strictly speaking, neither end of a list <em>has</em> to be the top of a stack/front of a queue. The implementation of your data structure is separate from the expected behavior of the data structure. </p>\n\n<p>For instance, a stack exhibits a last in, first out (LIFO) behavior. In other words, the last element that was stored in the stack is the \"top\" element. If you decide to implement your stack as a list where every new element is added at index 0, and all existing elements are shifted over by 1, then index 0 would be your top. On the other hand, if you implement your stack as a list where every new element is appended to the end of the list, then index -1 would be your top.</p>\n\n<p>With that said, the former implementation is quite inefficient because every time you push/pop values on/off the stack, you have to shift your entire list, whereas the latter implementation is more efficient because you can simply append/remove elements to/from the end of the list.</p>\n\n<p>Also, just to point out something mentioned in other answers/comments that I didn't make explicitly clear, your implementation doesn't have to be a list either. When I said that implementation and behavior are separate, that also goes for underlying data structure.</p>\n"}, {"comments": [{"owner": {"reputation": 763, "user_id": 6027397, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh3.googleusercontent.com/-TwWFt2CF5XE/AAAAAAAAAAI/AAAAAAAAACQ/cJK6amtx1eo/photo.jpg?sz=128", "display_name": "oneman", "link": "https://stackoverflow.com/users/6027397/oneman"}, "edited": false, "score": 0, "creation_date": 1477523818, "post_id": 40273552, "comment_id": 67806908, "body": "Thank you that makes sense. I should have considered the LIFO and FIFO natures. But I&#39;m sure you can understand where I am coming from in saying that &quot;top&quot; and &quot;front&quot; are quite ambiguous."}, {"owner": {"reputation": 385, "user_id": 7029724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c23fdb3187b5de62c28d3f99474f78c9?s=128&d=identicon&r=PG&f=1", "display_name": "am2", "link": "https://stackoverflow.com/users/7029724/am2"}, "edited": false, "score": 0, "creation_date": 1477524419, "post_id": 40273552, "comment_id": 67807059, "body": "In my opinion a stack and a queue are not the same, as a list. These are different structures as a tree or anything else. So there is no reason to decide, which end of the list is top of stack or front of queue. Of course it could be usefull to implement a stack and a queue with a list as base structure  and sure the end of the list could be prefered as top of stack, but an implementation can do it, as is wants to. The question is useful, o.k. but my answer would be: lists are other basic structures and so they in fact dont have a front, an end or a top."}, {"owner": {"reputation": 385, "user_id": 7029724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c23fdb3187b5de62c28d3f99474f78c9?s=128&d=identicon&r=PG&f=1", "display_name": "am2", "link": "https://stackoverflow.com/users/7029724/am2"}, "edited": false, "score": 0, "creation_date": 1477524583, "post_id": 40273552, "comment_id": 67807103, "body": "it sounds as to take a blank sheet of paper and ask, which side has to be the upper. If you want to draw anything you will determine this fact, but earlier there is no upper side."}, {"owner": {"reputation": 763, "user_id": 6027397, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh3.googleusercontent.com/-TwWFt2CF5XE/AAAAAAAAAAI/AAAAAAAAACQ/cJK6amtx1eo/photo.jpg?sz=128", "display_name": "oneman", "link": "https://stackoverflow.com/users/6027397/oneman"}, "reply_to_user": {"reputation": 385, "user_id": 7029724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c23fdb3187b5de62c28d3f99474f78c9?s=128&d=identicon&r=PG&f=1", "display_name": "am2", "link": "https://stackoverflow.com/users/7029724/am2"}, "edited": false, "score": 0, "creation_date": 1477524644, "post_id": 40273552, "comment_id": 67807125, "body": "@am2 I partially disagree. Lists are ordered, are they not? If we iterate through the list (printing each item for example), then by default, it starts at index[0] and it will keep on iterating until it gets to the &quot;end of the list&quot; index[-1]. So in my opinion, I believe that lists have a start (index[0]) and an end (index[-1]) but I can not relate this to &quot;front&quot; or &quot;top&quot; as in my mind, either end can be the front or top"}, {"owner": {"reputation": 385, "user_id": 7029724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c23fdb3187b5de62c28d3f99474f78c9?s=128&d=identicon&r=PG&f=1", "display_name": "am2", "link": "https://stackoverflow.com/users/7029724/am2"}, "reply_to_user": {"reputation": 763, "user_id": 6027397, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh3.googleusercontent.com/-TwWFt2CF5XE/AAAAAAAAAAI/AAAAAAAAACQ/cJK6amtx1eo/photo.jpg?sz=128", "display_name": "oneman", "link": "https://stackoverflow.com/users/6027397/oneman"}, "edited": false, "score": 0, "creation_date": 1477552624, "post_id": 40273552, "comment_id": 67815582, "body": "@oneman: sorry, I didn&#39;t explain as I meant. Of course has a list a start and an end. But both of them have nothing to do with front and and of a queue unless you implement this that way. It might be useful to use the start of a list as front of a queue, but It depends on you"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 5, "last_activity_date": 1477524077, "last_edit_date": 1477524077, "creation_date": 1477523355, "answer_id": 40273552, "question_id": 40273427, "link": "https://stackoverflow.com/questions/40273427/which-end-of-a-list-is-the-top/40273552#40273552", "title": "Which end of a list is the top?", "body": "<blockquote>\n  <p>Is there a definition for both \"front\" and \"top\" in terms of stacks/queues which are basically just lists or are these terms ambiguous</p>\n</blockquote>\n\n<p>The question is built on a false premise, that stacks/queues are \"basically just lists\".  </p>\n\n<p>Take a look at this picture, which shows how python lists are stored in memory (CPython)</p>\n\n<p><a href=\"https://i.stack.imgur.com/KM4No.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KM4No.png\" alt=\"it&#39;s a python list, dawg!\"></a></p>\n\n<p><em>(image source: <a href=\"https://jakevdp.github.io/blog/2014/05/09/why-python-is-slow/\" rel=\"nofollow noreferrer\">here</a>)</em></p>\n\n<p>The implementation is actually nothing much like a stack or a queue, and the actual list objects can be all over the place in memory.  </p>\n\n<h1>Stacks:</h1>\n\n<p>This one's pretty clear-cut: if someone speaks about the \"top\" of the stack, they would be referring to the item that was most recently added to the stack.  That's the item you'll get if you \"pop\" off the stack. </p>\n\n<h1>Queues:</h1>\n\n<p>This one's a bit more airy-fairy.  If someone refers to the front of the queue, they probably mean the item which was added earliest, since queues are usually implemented \"FIFO\" (first in first out).  But, it does depend on the implementation, for example there is also a <a href=\"https://docs.python.org/2/library/queue.html#Queue.LifoQueue\" rel=\"nofollow noreferrer\">LIFO Queue</a> in python, which orders more like a stack.  To make matters worse, there are also deques (double-ended queues) so you really need to have more context to understand this bit of CS jargon.</p>\n"}, {"tags": [], "owner": {"reputation": 1304, "user_id": 5566217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WDhzG.jpg?s=128&g=1", "display_name": "Preston Hager", "link": "https://stackoverflow.com/users/5566217/preston-hager"}, "is_accepted": false, "score": 1, "last_activity_date": 1477524809, "creation_date": 1477524809, "answer_id": 40273776, "question_id": 40273427, "link": "https://stackoverflow.com/questions/40273427/which-end-of-a-list-is-the-top/40273776#40273776", "title": "Which end of a list is the top?", "body": "<p>It depends on how you are appending to the list. If you are doing it as such, </p>\n\n<pre><code>stack = []\nnumbers = [1, 2, 3, 4, 6, 5]\nfor n in numbers:\n  stack.append(n)\nprint(stack)\n</code></pre>\n\n<p>Then the \"top\" of the stack is the end. When appending from the front of the list then the front or index 0 is the top. Here is an example for a calculator. </p>\n\n<pre><code>addStack = []\ncurNumber = 0\nwhile True:\n  n = raw_input(\"Enter a number or operation.\")\n  if n.isdecimal():\n    addStack.append(int(n))\n  if n == \"=\":\n    print(\"Top number(or last number entered): %i\" % (\n</code></pre>\n"}], "owner": {"reputation": 763, "user_id": 6027397, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh3.googleusercontent.com/-TwWFt2CF5XE/AAAAAAAAAAI/AAAAAAAAACQ/cJK6amtx1eo/photo.jpg?sz=128", "display_name": "oneman", "link": "https://stackoverflow.com/users/6027397/oneman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1181, "favorite_count": 0, "accepted_answer_id": 40273552, "answer_count": 3, "score": 6, "last_activity_date": 1477694205, "creation_date": 1477522541, "last_edit_date": 1477527307, "question_id": 40273427, "link": "https://stackoverflow.com/questions/40273427/which-end-of-a-list-is-the-top", "title": "Which end of a list is the top?", "body": "<p>Admittedly this seems like a silly question, but bear with me.</p>\n\n<p>In a question I'm given relating to a Stack, we are to define a function that returns the item \"on top\" of the stack. To me, I don't know which side is the \"top\" because really, either side could be.</p>\n\n<p>Also, I'm given a question relating to a Queue which asks us to define a function that returns the item \"on the front\" of the queue. Again, either side can be interpreted as the \"front\" </p>\n\n<p>If the questions were reworded to ask \"return the last item on the list\" or the \"first item on the list\" this makes perfect sense, but unfortunately that is not the case. </p>\n\n<p>So I would like to know: is there a definition for both \"front\" and \"top\" in terms of stacks/queues which are basically just lists, or are these terms ambiguous?</p>\n"}, {"tags": ["python", "machine-learning", "neural-network", "tensorflow"], "comments": [{"owner": {"reputation": 1747, "user_id": 4697430, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/383daa91372c846b7fb8991dcf4e638c?s=128&d=identicon&r=PG&f=1", "display_name": "wwl", "link": "https://stackoverflow.com/users/4697430/wwl"}, "edited": false, "score": 0, "creation_date": 1477522747, "post_id": 40273426, "comment_id": 67806614, "body": "It would help if you are a bit more specific: what do you mean by &quot;predict&quot;?"}, {"owner": {"reputation": 153, "user_id": 5075778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5844bb054b07219f1d1c79798ff633c7?s=128&d=identicon&r=PG&f=1", "display_name": "sam202252012", "link": "https://stackoverflow.com/users/5075778/sam202252012"}, "reply_to_user": {"reputation": 1747, "user_id": 4697430, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/383daa91372c846b7fb8991dcf4e638c?s=128&d=identicon&r=PG&f=1", "display_name": "wwl", "link": "https://stackoverflow.com/users/4697430/wwl"}, "edited": false, "score": 0, "creation_date": 1477522803, "post_id": 40273426, "comment_id": 67806632, "body": "so basically i input 2 values so [1,0]. I want it to tell me 0 or 1 that all sorry about that"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5075778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5844bb054b07219f1d1c79798ff633c7?s=128&d=identicon&r=PG&f=1", "display_name": "sam202252012", "link": "https://stackoverflow.com/users/5075778/sam202252012"}, "edited": false, "score": 0, "creation_date": 1477523649, "post_id": 40273589, "comment_id": 67806870, "body": "would you please explain what is happening as i am a total noob. Thanks"}, {"owner": {"reputation": 153, "user_id": 5075778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5844bb054b07219f1d1c79798ff633c7?s=128&d=identicon&r=PG&f=1", "display_name": "sam202252012", "link": "https://stackoverflow.com/users/5075778/sam202252012"}, "edited": false, "score": 0, "creation_date": 1477524029, "post_id": 40273589, "comment_id": 67806971, "body": "also how would you predict if it is a regression model like if there is more than two outputs for like stocks etc"}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "reply_to_user": {"reputation": 153, "user_id": 5075778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5844bb054b07219f1d1c79798ff633c7?s=128&d=identicon&r=PG&f=1", "display_name": "sam202252012", "link": "https://stackoverflow.com/users/5075778/sam202252012"}, "edited": false, "score": 0, "creation_date": 1477526194, "post_id": 40273589, "comment_id": 67807492, "body": "you simply have to add to your graph operation that actually produces the output and run it in the session, since your graph produces probability from sigmoid, you could also just do sess.run on our Output node, I added &quot;round&quot; to make it a class. For regression you would simply run your Output node, that&#39;s all."}, {"owner": {"reputation": 153, "user_id": 5075778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5844bb054b07219f1d1c79798ff633c7?s=128&d=identicon&r=PG&f=1", "display_name": "sam202252012", "link": "https://stackoverflow.com/users/5075778/sam202252012"}, "edited": false, "score": 0, "creation_date": 1477565268, "post_id": 40273589, "comment_id": 67823421, "body": "In regression wouldn&#39;t the output be the probability from sigmoid. Thank you"}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "reply_to_user": {"reputation": 153, "user_id": 5075778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5844bb054b07219f1d1c79798ff633c7?s=128&d=identicon&r=PG&f=1", "display_name": "sam202252012", "link": "https://stackoverflow.com/users/5075778/sam202252012"}, "edited": false, "score": 0, "creation_date": 1477569234, "post_id": 40273589, "comment_id": 67826056, "body": "Please ask separate question and describe exactly what do you mean."}], "tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": true, "score": 2, "last_activity_date": 1477523562, "creation_date": 1477523562, "answer_id": 40273589, "question_id": 40273426, "link": "https://stackoverflow.com/questions/40273426/how-do-you-predict-in-tensorflow/40273589#40273589", "title": "How do you predict in Tensorflow", "body": "<p>Since your classification is simply 0 iff Output&lt;0.5 you can add new, prediction node:</p>\n\n<pre><code>prediction_op = tf.round(Output)\n</code></pre>\n\n<p>and call it afterwards</p>\n\n<pre><code>print(sess.run(prediction_op, feed_dict={X: np.array([[1., 0.]])}))\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5075778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5844bb054b07219f1d1c79798ff633c7?s=128&d=identicon&r=PG&f=1", "display_name": "sam202252012", "link": "https://stackoverflow.com/users/5075778/sam202252012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2981, "favorite_count": 0, "accepted_answer_id": 40273589, "answer_count": 1, "score": 3, "last_activity_date": 1477524231, "creation_date": 1477522538, "last_edit_date": 1477524231, "question_id": 40273426, "link": "https://stackoverflow.com/questions/40273426/how-do-you-predict-in-tensorflow", "title": "How do you predict in Tensorflow", "body": "<p>I'm a noob to tensorflow. So I was playing around with the Xor problem my question is how do you predict in tensorflow. So when i enter [1,0], i want it to give me either 1 or 0. Also in a different scenario if it is model which is meant to have more than multiple values(regressor)eg stocks. How would i do that Thank you.\nSo far i got this far:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\nX = tf.placeholder(tf.float32, shape=([4,2]), name = \"Input\")\ny = tf.placeholder(tf.float32, shape=([4,1]), name = \"Output\")\n#weights\nW = tf.Variable(tf.random_uniform([2,2], -1,1), name = \"weights1\")\nw2 = tf.Variable(tf.random_uniform([2,1], -1,1), name = \"weights2\")\nBiases1 = tf.Variable(tf.zeros([2]), name = \"Biases1\")\nBiases2 = tf.Variable(tf.zeros([1]), name = \"Biases2\")\n#Setting up the model\nNode1 = tf.sigmoid(tf.matmul(X, W)+ Biases1)\nOutput = tf.sigmoid(tf.matmul(Node1, w2)+ Biases2)\n#Setting up the Cost function\ncost = tf.reduce_mean(((y* tf.log(Output))+ \n                       ((1-y)* tf.log(1.0 - Output)))* -1)\n#Now to training and optimizing\ntrain_step = tf.train.GradientDescentOptimizer(0.01).minimize(cost)\nxorX = np.array([[0,0], [0,1], [1,0], [1,1]])\nxorY = np.array([[0], [1], [1], [0]])\n#Now to creating the session\ninitial = tf.initialize_all_variables()\nsess = tf.Session()\nsess.run(initial)\nfor i in range(100000):\n    sess.run(train_step, feed_dict={X: xorX, y: xorY })\n</code></pre>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1477522404, "post_id": 40273329, "comment_id": 67806515, "body": "If you need &#39;basically like a loop&#39; then just use a loop."}, {"owner": {"reputation": 9, "user_id": 6884757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3133de7267300428bc06a0669b7635c?s=128&d=identicon&r=PG&f=1", "display_name": "Ice", "link": "https://stackoverflow.com/users/6884757/ice"}, "reply_to_user": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1477523919, "post_id": 40273329, "comment_id": 67806943, "body": "how? thats my question."}, {"owner": {"reputation": 9, "user_id": 6884757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3133de7267300428bc06a0669b7635c?s=128&d=identicon&r=PG&f=1", "display_name": "Ice", "link": "https://stackoverflow.com/users/6884757/ice"}, "reply_to_user": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1477527480, "post_id": 40273329, "comment_id": 67807824, "body": "Oh sorry, I thought you can ask questions here."}, {"owner": {"reputation": 348, "user_id": 7033248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b85c75088e5a1ae561439c641c43e8?s=128&d=identicon&r=PG&f=1", "display_name": "Luis de Arquer", "link": "https://stackoverflow.com/users/7033248/luis-de-arquer"}, "reply_to_user": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1477574660, "post_id": 40273329, "comment_id": 67829877, "body": "@BilltheLizard I know the question is quite basic, but is it that bad? I mean, quite often I find questions considered valid here at stackoverflow which can be easily answered by looking up the manual."}, {"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "reply_to_user": {"reputation": 348, "user_id": 7033248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b85c75088e5a1ae561439c641c43e8?s=128&d=identicon&r=PG&f=1", "display_name": "Luis de Arquer", "link": "https://stackoverflow.com/users/7033248/luis-de-arquer"}, "edited": false, "score": 0, "creation_date": 1477576712, "post_id": 40273329, "comment_id": 67831406, "body": "@LuisdeArquer Yes, it&#39;s really that bad. There are literally thousands of questions already on Stack Overflow where you can find the basic syntax for a loop, not to mention thousands of other resources on other sites. This is not something that&#39;s ever going to help other users."}, {"owner": {"reputation": 348, "user_id": 7033248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b85c75088e5a1ae561439c641c43e8?s=128&d=identicon&r=PG&f=1", "display_name": "Luis de Arquer", "link": "https://stackoverflow.com/users/7033248/luis-de-arquer"}, "reply_to_user": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1477579450, "post_id": 40273329, "comment_id": 67833476, "body": "@BilltheLizard The question is well-worded and clear, and possibly the OP has never coded a loop or doesn&#39;t even know that a loop is possible in programming. Usefulness for other users is desirable, but required? It is useful for OP. And you never <a href=\"http://stackoverflow.com/questions/27364956/looping-back-to-specific-point-in-code\">know</a>. I&#39;ve seen famous questions that could be solved with a quick google search instead, and they surely were not famous at the moment they were asked. Nothing to argue about question duplicity though."}, {"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "reply_to_user": {"reputation": 348, "user_id": 7033248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b85c75088e5a1ae561439c641c43e8?s=128&d=identicon&r=PG&f=1", "display_name": "Luis de Arquer", "link": "https://stackoverflow.com/users/7033248/luis-de-arquer"}, "edited": false, "score": 0, "creation_date": 1477579566, "post_id": 40273329, "comment_id": 67833565, "body": "@LuisdeArquer The OP wrote &quot;basically like a loop&quot; right in the question."}, {"owner": {"reputation": 348, "user_id": 7033248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b85c75088e5a1ae561439c641c43e8?s=128&d=identicon&r=PG&f=1", "display_name": "Luis de Arquer", "link": "https://stackoverflow.com/users/7033248/luis-de-arquer"}, "reply_to_user": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1477582219, "post_id": 40273329, "comment_id": 67835453, "body": "@BilltheLizard And yet OP was probably genuinely stuck at it. Many people get stuck at the simplest things when starting to program. I was no exception. Sure, easier googling than asking (but not like OP is spamming the site, and I have seen cases <a href=\"http://stackoverflow.com/questions/9081/grep-a-file-but-show-several-surrounding-lines\">before</a> ). I don&#39;t see anything wrong with the question."}], "answers": [{"tags": [], "owner": {"reputation": 348, "user_id": 7033248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b85c75088e5a1ae561439c641c43e8?s=128&d=identicon&r=PG&f=1", "display_name": "Luis de Arquer", "link": "https://stackoverflow.com/users/7033248/luis-de-arquer"}, "is_accepted": false, "score": 0, "last_activity_date": 1477574408, "creation_date": 1477574408, "answer_id": 40285697, "question_id": 40273329, "link": "https://stackoverflow.com/questions/40273329/how-to-go-back-to-a-line-of-code-in-python-if-a-condition-is-met/40285697#40285697", "title": "How to go back to a line of code in python if a condition is met?", "body": "<p>You want to use a while loop</p>\n\n<pre><code>while &lt;condition&gt;:\n(1) if (variable == whatever):\n(2)     print (\"Cool you win\")\n(4) #nothing needed here\n(5) else:\n(6)     print (\"You loose!\")\n(7) #nothing needed here\n</code></pre>\n\n<p>If you don't have a particular condition, you can just loop forever with <code>while True:</code></p>\n"}], "owner": {"reputation": 9, "user_id": 6884757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3133de7267300428bc06a0669b7635c?s=128&d=identicon&r=PG&f=1", "display_name": "Ice", "link": "https://stackoverflow.com/users/6884757/ice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2691, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1600008760, "creation_date": 1477522088, "last_edit_date": 1600008760, "question_id": 40273329, "link": "https://stackoverflow.com/questions/40273329/how-to-go-back-to-a-line-of-code-in-python-if-a-condition-is-met", "title": "How to go back to a line of code in python if a condition is met?", "body": "<p>Basically, I am trying to create a game. It's going well so far! However, I am trying to figure out how to make code go back. I am a beginner at python, so I think its something to do with <code>def start():</code> and <code>start():</code> - or something along those lines - but I'm not sure.</p>\n<p>If you do not know what I am talking about, I am basically saying I want something like:</p>\n<pre><code>    (1) if (variable) == (whatever)\n    (2)     print (&quot;Cool you win&quot;)\n    (4) (code to go back and repeat line 1)\n    (5) else:\n    (6)     print (&quot;You loose!&quot;)\n    (7) (code to go back and repeat line 1)\n</code></pre>\n<p>So, basically like a loop: How can I do this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1477522287, "post_id": 40273315, "comment_id": 67806481, "body": "Why are you defining functions inside of your loop?"}, {"owner": {"reputation": 1, "user_id": 7077514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17572ddaf7cd28c8a048e33e34e8396d?s=128&d=identicon&r=PG&f=1", "display_name": "DR2016", "link": "https://stackoverflow.com/users/7077514/dr2016"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1477523038, "post_id": 40273315, "comment_id": 67806703, "body": "because I don&#39;t know what I&#39;m doing lol.. can i put all of those before the while loop begins?"}, {"owner": {"reputation": 3136, "user_id": 4194819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6b74e8f2e9413654c6e52408583d207?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4194819/chris"}, "edited": false, "score": 0, "creation_date": 1477524034, "post_id": 40273315, "comment_id": 67806972, "body": "You want to call shape = input... at the start of the while loop. At the moment after the cube calculation, the shape =cube still so it goes back inside the loop."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7077514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17572ddaf7cd28c8a048e33e34e8396d?s=128&d=identicon&r=PG&f=1", "display_name": "DR2016", "link": "https://stackoverflow.com/users/7077514/dr2016"}, "edited": false, "score": 0, "creation_date": 1477523067, "post_id": 40273373, "comment_id": 67806714, "body": "this worked thank you! but now i have the problem that when i enter quit, it doesn&#39;t print what it&#39;s supposed to, the process just ends.."}, {"owner": {"reputation": 3136, "user_id": 4194819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6b74e8f2e9413654c6e52408583d207?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4194819/chris"}, "edited": false, "score": 0, "creation_date": 1477524620, "post_id": 40273373, "comment_id": 67807118, "body": "you could change your while condition to simply &#39;while True&#39;, then add a break at the end of your quit condition"}], "tags": [], "owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "is_accepted": false, "score": 0, "last_activity_date": 1477522254, "creation_date": 1477522254, "answer_id": 40273373, "question_id": 40273315, "link": "https://stackoverflow.com/questions/40273315/python-make-if-statement-in-while-loops-restart-the-loop-not-the-condition/40273373#40273373", "title": "Python - Make if statement in while loops restart the loop, not the condition?", "body": "<p>You're missing <code>shape =</code> in your <code>else</code> clause.</p>\n\n<p>If I understand correctly, just <strong>remove</strong> the <code>else</code> clause and leave:</p>\n\n<pre><code>shape = str(input(\"Please enter a shape: \")).lower()\n</code></pre>\n\n<p>at the end of the loop.</p>\n\n<p>This will ask the user as long as he didn't enter <code>\"quit\"</code>, even if he did enter a valid choice.</p>\n"}, {"tags": [], "owner": {"reputation": 182, "user_id": 6895009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d8148fc6cc0f8b6a06f9bc5bfde88a5?s=128&d=identicon&r=PG&f=1", "display_name": "Yashvardhan Nanavati", "link": "https://stackoverflow.com/users/6895009/yashvardhan-nanavati"}, "is_accepted": false, "score": 0, "last_activity_date": 1477523070, "creation_date": 1477523070, "answer_id": 40273503, "question_id": 40273315, "link": "https://stackoverflow.com/questions/40273315/python-make-if-statement-in-while-loops-restart-the-loop-not-the-condition/40273503#40273503", "title": "Python - Make if statement in while loops restart the loop, not the condition?", "body": "<p>I have made some changes to the code. I have put the statements taking input from the user into the while loop and added a break statement in the 'if=='quit'' statement.</p>\n\n<p>Change 1:</p>\n\n<pre><code>import math\nimport decimal\n\nshapes = [\"cube\", \"pyramid\", \"ellipsoid\", \"quit\"]\n\nstored_cube_vol = []\nstored_pymd_vol = []\nstored_ellip_vol = []\nshape = \" \"\nwhile shape != \"quit\":\n    shape = str(input(\"Please enter a shape: \"))\n    shape = shape.lower()\n</code></pre>\n\n<p>Change 2:</p>\n\n<pre><code>elif shape == \"quit\":\n    print(\"You have come to the end of the session.\")\n    print(\"The volumes calculated for each shape are shown below.\")\n    print(\"Cube: \", sorted(stored_cube_vol))\n    print(\"Pyramid: \", sorted(stored_pymd_vol))\n    print(\"Ellipsoid: \", sorted(stored_ellip_vol))\n    break\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7077514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17572ddaf7cd28c8a048e33e34e8396d?s=128&d=identicon&r=PG&f=1", "display_name": "DR2016", "link": "https://stackoverflow.com/users/7077514/dr2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1109, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477523070, "creation_date": 1477521965, "question_id": 40273315, "link": "https://stackoverflow.com/questions/40273315/python-make-if-statement-in-while-loops-restart-the-loop-not-the-condition", "title": "Python - Make if statement in while loops restart the loop, not the condition?", "body": "<p>I have code that is supposed to determine the volume of a shape, determined by input. I have several if statements nested in a while loop. I want the loop to restart at the very beginning where it asks for input, but instead it is getting stuck in the condition statement. For example, if I enter \"cube\", it computes the volume and then asks me again to input the dimensions - instead I want it to ask me the shape, and proceed through the if statements again. Same at the end, if I enter a shape that isn't valid, it's supposed to ask me to input again and if that input is valid, proceed accordingly. But it doesn't, it gets stuck in an infinite loop and never stops asking me to input a shape.</p>\n\n<pre><code>import math\nimport decimal\n\nshape = str(input(\"Please enter a shape: \"))\nshape = shape.lower()\n\nshapes = [\"cube\", \"pyramid\", \"ellipsoid\", \"quit\"]\n\nstored_cube_vol = []\nstored_pymd_vol = []\nstored_ellip_vol = []\n\nwhile shape != \"quit\":\n    if shape == \"cube\":\n        def cube_volume(cube_side_length):\n            cube_total_vol = decimal.Decimal(cube_side_length**3)\n            return round(cube_total_vol, 2)\n\n        cube_side_length = float(input(\"Enter the length of length of one side of the cube: \"))\n\n        print(\"The volume of a cube with sides with a length of\", cube_side_length, \"is\", cube_volume(cube_side_length))\n\n        stored_cube_vol.append(cube_volume(cube_side_length))\n\n    elif shape == \"pyramid\":\n        def pymd_volume(pymd_base, pymd_height):\n            pymd_total_vol = decimal.Decimal(pymd_base**2)*pymd_height*(1/3)\n            return round(pymd_total_vol, 2)\n\n        pymd_base = float(input(\"Enter the length of the base of the pyramid: \"))\n        pymd_height = float(input(\"Enter the height of the pyramid: \"))\n\n        print(\"The volume of a pyramid with a base of\", pymd_base, \"and a height of\", pymd_height, \"is\", pymd_volume(pymd_base, pymd_height))\n\n        stored_pymd_vol.append(pymd_volume(pymd_base, pymd_height))\n\n    elif shape == \"ellipsoid\":\n        def ellip_volume(ellip_rad_1, ellip_rad_2, ellip_rad_3):\n            ellip_total_vol = decimal.Decimal(math.pi*(4/3)*ellip_rad_1*ellip_rad_2*ellip_rad_3)\n            return round(ellip_total_vol, 2)\n\n        ellip_rad_1 = float(input(\"Enter the first radius: \"))\n        ellip_rad_2 = float(input(\"Enter the second radius: \"))\n        ellip_rad_3 = float(input(\"Enter the third radius: \"))\n\n        print(\"The volume of an ellipsoid with radii\", ellip_rad_1, ellip_rad_2, \"and\", ellip_rad_3, \"is\", ellip_volume(ellip_rad_1, ellip_rad_2, ellip_rad_3))\n\n        stored_ellip_vol.append(ellip_volume(ellip_rad_1, ellip_rad_2, ellip_rad_3))\n\n    elif shape == \"quit\":\n        print(\"You have come to the end of the session.\")\n        print(\"The volumes calculated for each shape are shown below.\")\n        print(\"Cube: \", sorted(stored_cube_vol))\n        print(\"Pyramid: \", sorted(stored_pymd_vol))\n        print(\"Ellipsoid: \", sorted(stored_ellip_vol))\n\n    else:\n        str(input(\"Please enter a shape: \").lower())\n</code></pre>\n"}, {"tags": ["python", "regex", "pandas"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1477522395, "post_id": 40273313, "comment_id": 67806512, "body": "<code>^12</code> is the regex for &quot;starts with &#39;12&#39;&quot;"}, {"owner": {"reputation": 4838, "user_id": 440294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f9b4bd073537b03827fe2047aa4c91?s=128&d=identicon&r=PG", "display_name": "Nathan Davis", "link": "https://stackoverflow.com/users/440294/nathan-davis"}, "edited": false, "score": 1, "creation_date": 1477523151, "post_id": 40273313, "comment_id": 67806736, "body": "What if you have &quot;1234&quot;?  Should &quot;12&quot; be retained in that case or discarded?"}], "answers": [{"comments": [{"owner": {"reputation": 4946, "user_id": 2656614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/rJz0Z.png?s=128&g=1", "display_name": "Addison", "link": "https://stackoverflow.com/users/2656614/addison"}, "edited": false, "score": 1, "creation_date": 1477524917, "post_id": 40273380, "comment_id": 67807203, "body": "This is dangerous, as it won&#39;t work for <code>1234</code>. Please use something like <code>^12(?=.{4}$)</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1477525604, "last_edit_date": 1477525604, "creation_date": 1477522296, "answer_id": 40273380, "question_id": 40273313, "link": "https://stackoverflow.com/questions/40273313/how-to-extract-first-two-characters-from-string-using-regex/40273380#40273380", "title": "How to extract first two characters from string using regex", "body": "<p><strong><em>new answers</em></strong><br>\nper comment from @Addison</p>\n\n<pre><code># '12(?=.{4}$)' makes sure we have a 12 followed by exactly 4 something elses\ndf.c_contofficeID.str.replace('^12(?=.{4}$)', '')\n</code></pre>\n\n<p>If ID's must have four characters, it's simpler to</p>\n\n<pre><code>df.c_contofficeID.str[-4:]\n</code></pre>\n\n<p><strong><em>old answer</em></strong><br>\nuse <code>str.replace</code></p>\n\n<pre><code>df.c_contofficeID.str.replace('^12', '').to_frame()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/l74y2.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/l74y2.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 4797, "user_id": 2201603, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/PDTrS.jpg?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/2201603/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3010, "favorite_count": 0, "accepted_answer_id": 40273380, "answer_count": 1, "score": 5, "last_activity_date": 1477525604, "creation_date": 1477521952, "last_edit_date": 1495541347, "question_id": 40273313, "link": "https://stackoverflow.com/questions/40273313/how-to-extract-first-two-characters-from-string-using-regex", "title": "How to extract first two characters from string using regex", "body": "<p>reference:  <a href=\"https://stackoverflow.com/questions/13682044/pandas-dataframe-remove-unwanted-parts-from-strings-in-a-column\">Pandas DataFrame: remove unwanted parts from strings in a column</a></p>\n\n<p>In reference to an answer provided in the link above.  I've researched some regular expressions and I plan to dive deeper but in the meantime I could use some help.</p>\n\n<p>My dataframe is something like:</p>\n\n<p>df:</p>\n\n<pre><code>  c_contofficeID\n0           0109\n1           0109\n2           3434\n3         123434  \n4         1255N9\n5           0109\n6         123434\n7           55N9\n8           5599\n9           0109\n</code></pre>\n\n<p>Psuedo Code</p>\n\n<p>If the first two characters are a 12 remove them. Or alternatively, add a 12 to the characters that don't have a 12 in the first two characters. </p>\n\n<p>Result would look like:</p>\n\n<pre><code>  c_contofficeID\n0           0109\n1           0109\n2           3434\n3           3434  \n4           55N9\n5           0109\n6           3434\n7           55N9\n8           5599\n9           0109\n</code></pre>\n\n<p>I'm using the answer from the link above as a starting point:</p>\n\n<pre><code>df['contofficeID'].replace(regex=True,inplace=True,to_replace=r'\\D',value=r'')\n</code></pre>\n\n<p>I've tried the following:</p>\n\n<p>Attempt 1)</p>\n\n<pre><code>df['contofficeID'].replace(regex=True,inplace=True,to_replace=r'[1][2]',value=r'')\n</code></pre>\n\n<p>Attempt 2)</p>\n\n<pre><code>df['contofficeID'].replace(regex=True,inplace=True,to_replace=r'$[1][2]',value=r'')\n</code></pre>\n\n<p>Attempt 3) </p>\n\n<pre><code>df['contofficeID'].replace(regex=True,inplace=True,to_replace=r'?[1]?[2]',value=r'')\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1613026462, "post_id": 40273251, "comment_id": 116949992, "body": "Your issue here is that <b>you want to groupby multiple columns</b>, then do a <code>pct_change()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 15, "last_activity_date": 1477522112, "creation_date": 1477522112, "answer_id": 40273336, "question_id": 40273251, "link": "https://stackoverflow.com/questions/40273251/pandas-groupby-multiple-columns-with-pct-change/40273336#40273336", "title": "Pandas groupby multiple columns, with pct_change", "body": "<p>you want to get your date into the row index and groups/company into the columns</p>\n\n<pre><code>d1 = df.set_index(['Date', 'Company', 'Group']).Value.unstack(['Company', 'Group'])\nd1\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/hdNBI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hdNBI.png\" alt=\"enter image description here\"></a></p>\n\n<p>then use <code>pct_change</code></p>\n\n<pre><code>d1.pct_change()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aOzA1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aOzA1.png\" alt=\"enter image description here\"></a></p>\n\n<p>OR</p>\n\n<p>with groupby</p>\n\n<pre><code>df['pct'] = df.sort_values('Date').groupby(['Company', 'Group']).Value.pct_change()\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2GAfK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2GAfK.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 3757023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc40a8157f12cf24f1d919af8b7bd00b?s=128&d=identicon&r=PG&f=1", "display_name": "SimonR", "link": "https://stackoverflow.com/users/3757023/simonr"}, "edited": false, "score": 0, "creation_date": 1548889146, "post_id": 54261006, "comment_id": 95710259, "body": "This appears to be fixed again as of 0.24.0, so be sure to update to that version."}], "tags": [], "owner": {"reputation": 97, "user_id": 3757023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc40a8157f12cf24f1d919af8b7bd00b?s=128&d=identicon&r=PG&f=1", "display_name": "SimonR", "link": "https://stackoverflow.com/users/3757023/simonr"}, "is_accepted": false, "score": 3, "last_activity_date": 1547844139, "last_edit_date": 1547844139, "creation_date": 1547843352, "answer_id": 54261006, "question_id": 40273251, "link": "https://stackoverflow.com/questions/40273251/pandas-groupby-multiple-columns-with-pct-change/54261006#54261006", "title": "Pandas groupby multiple columns, with pct_change", "body": "<p>I'm not sure the <code>groupby</code> method works as intended as of Pandas 0.23.4 at least. </p>\n\n<pre><code>df['pct'] = df.sort_values('Date').groupby(['Company', 'Group']).Value.pct_change()\n</code></pre>\n\n<p>Produces this, which is incorrect for purposes of the question: </p>\n\n<p><a href=\"https://i.stack.imgur.com/jxv7Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jxv7Q.png\" alt=\"Incorrect Outcome\"></a></p>\n\n<p>The Index+Stack method still works as intended, but you need to do additional merges to get it into the original form requested.  </p>\n\n<pre><code>d1 = df.set_index(['Date', 'Company', 'Group']).Value.unstack(['Company', 'Group'])\nd1 = d1.pct_change().stack([0,1]).reset_index()\ndf = df.merge(d1, on=['Company', 'Group', 'Date'], how='left')\ndf.rename(columns={0: 'pct'}, inplace=True)\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vAsIP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vAsIP.png\" alt=\"Correct Outcome\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3453173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c243820b934cb29bbe61453c2f80ed3?s=128&d=identicon&r=PG&f=1", "display_name": "user3453173", "link": "https://stackoverflow.com/users/3453173/user3453173"}, "is_accepted": false, "score": 1, "last_activity_date": 1614705635, "creation_date": 1614705635, "answer_id": 66444122, "question_id": 40273251, "link": "https://stackoverflow.com/questions/40273251/pandas-groupby-multiple-columns-with-pct-change/66444122#66444122", "title": "Pandas groupby multiple columns, with pct_change", "body": "<pre><code>df['Pct_Change'] = df.groupby(['Company','Group'])['Value'].pct_change()\n</code></pre>\n"}], "owner": {"reputation": 569, "user_id": 3357979, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/69d38a7b3afce1b70368b8797c8abf27?s=128&d=identicon&r=PG&f=1", "display_name": "user3357979", "link": "https://stackoverflow.com/users/3357979/user3357979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10041, "favorite_count": 6, "accepted_answer_id": 40273336, "answer_count": 3, "score": 15, "last_activity_date": 1614705635, "creation_date": 1477521604, "last_edit_date": 1613026479, "question_id": 40273251, "link": "https://stackoverflow.com/questions/40273251/pandas-groupby-multiple-columns-with-pct-change", "title": "Pandas groupby multiple columns, with pct_change", "body": "<p>I'm trying to find the period-over-period growth in <code>Value</code> for each unique group, grouped by (<code>Company</code>, <code>Group</code>, and <code>Date</code>).</p>\n<pre><code>Company Group Date     Value\nA       X     2015-01  1\nA       X     2015-02  2\nA       X     2015-03  1.5\nA       XX    2015-01  1\nA       XX    2015-02  1.5\nA       XX    2015-03  0.75\nA       XX    2015-04  1\nB       Y     2015-01  1\nB       Y     2015-02  1.5\nB       Y     2015-03  2\nB       Y     2015-04  3\nB       YY    2015-01  2\nB       YY    2015-02  2.5\nB       YY    2015-03  3\n</code></pre>\n<p>I've tried:</p>\n<pre><code>df.groupby(['Date','Company','Group']).pct_change()\n</code></pre>\n<p>but this returns all NaN.</p>\n<p>The result I'm looking for is:</p>\n<pre><code>Company Group Date     Value/People\nA       X     2015-01  NaN\nA       X     2015-02  1.0\nA       X     2015-03  -0.25\nA       XX    2015-01  NaN\nA       XX    2015-02  0.5\nA       XX    2015-03  -0.5\nA       XX    2015-04  0.33\nB       Y     2015-01  NaN\nB       Y     2015-02  0.5\nB       Y     2015-03  0.33\nB       Y     2015-04  0.5\nB       YY    2015-01  NaN\nB       YY    2015-02  0.25\nB       YY    2015-03  0.2\n</code></pre>\n"}, {"tags": ["python", "vmware", "pyvmomi"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4309651, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ec19b620862fa1d822a8995f595013dd?s=128&d=identicon&r=PG&f=1", "display_name": "jramacha", "link": "https://stackoverflow.com/users/4309651/jramacha"}, "edited": false, "score": 0, "creation_date": 1477591826, "post_id": 40278843, "comment_id": 67841257, "body": "I am getting an error when I call the Relocate/RelocateVM_Task, any ideas? I set the spec with the host. But it throws this error. pyVmomi.VmomiSupport.ManagedObjectNotFound: (vmodl.fault.ManagedObjectNotFound) {    dynamicType = &lt;unset&gt;,    dynamicProperty = (vmodl.DynamicProperty) [],    msg = &#39;&#39;,    faultCause = &lt;unset&gt;,    faultMessage = (vmodl.LocalizableMessage) [],    obj = &#39;vim.VirtualMachine:xxxx&#39; }"}, {"owner": {"reputation": 1327, "user_id": 5154090, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8c0e83aefa292c31e1ac30a92c62ef6d?s=128&d=identicon&r=PG&f=1", "display_name": "YSK", "link": "https://stackoverflow.com/users/5154090/ysk"}, "reply_to_user": {"reputation": 107, "user_id": 4309651, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ec19b620862fa1d822a8995f595013dd?s=128&d=identicon&r=PG&f=1", "display_name": "jramacha", "link": "https://stackoverflow.com/users/4309651/jramacha"}, "edited": false, "score": 0, "creation_date": 1477599072, "post_id": 40278843, "comment_id": 67845170, "body": "@jramacha Can you post your updated code in the question? Note that you have to create a new <code>vim.vm.RelocateSpec</code> object (you can&#39;t pass <code>spec=host</code>). See the example at <a href=\"https://github.com/sijis/pyvmomi-examples/blob/master/migrate-vm.py\" rel=\"nofollow noreferrer\">github.com/sijis/pyvmomi-examples/blob/master/migrate-vm.py</a>."}, {"owner": {"reputation": 107, "user_id": 4309651, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ec19b620862fa1d822a8995f595013dd?s=128&d=identicon&r=PG&f=1", "display_name": "jramacha", "link": "https://stackoverflow.com/users/4309651/jramacha"}, "edited": false, "score": 0, "creation_date": 1477600941, "post_id": 40278843, "comment_id": 67846168, "body": "Actually it works now, I had a typo. I did spec.host = host obj. Thanks a lot"}], "tags": [], "owner": {"reputation": 1327, "user_id": 5154090, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8c0e83aefa292c31e1ac30a92c62ef6d?s=128&d=identicon&r=PG&f=1", "display_name": "YSK", "link": "https://stackoverflow.com/users/5154090/ysk"}, "is_accepted": false, "score": 0, "last_activity_date": 1477553832, "creation_date": 1477553832, "answer_id": 40278843, "question_id": 40273250, "link": "https://stackoverflow.com/questions/40273250/pyvmomierror-when-calling-relocatevm/40278843#40278843", "title": "pyvmomi:error when calling RelocateVM", "body": "<p>Looks like a mistake in the documentation. The method is called <code>Relocate</code> (and not <code>RelocateVM</code>).</p>\n\n<p>Note, BTW, that in your first sample you're not passing the destination host to the call to <code>Relocate</code> so something is definitely missing there.</p>\n\n<p>You can see some samples at <a href=\"https://gist.github.com/rgerganov/12fdd2ded8d80f36230f\" rel=\"nofollow\">https://gist.github.com/rgerganov/12fdd2ded8d80f36230f</a> or at <a href=\"https://github.com/sijis/pyvmomi-examples/blob/master/migrate-vm.py\" rel=\"nofollow\">https://github.com/sijis/pyvmomi-examples/blob/master/migrate-vm.py</a>.</p>\n\n<p>Lastly, one way to realize you're using the wrong name is by calling Python's <code>dir</code> method on a VirtualMachine object. This will list all properties of the object so you can see which methods it has:</p>\n\n<pre><code>&gt;&gt;&gt; vm = vim.VirtualMachine('vm-1234', None)\n&gt;&gt;&gt; dir(vm)\n['AcquireMksTicket', [...] 'Relocate', 'RelocateVM_Task', [...] ]\n</code></pre>\n\n<p>(abbreviated output)</p>\n"}], "owner": {"reputation": 107, "user_id": 4309651, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ec19b620862fa1d822a8995f595013dd?s=128&d=identicon&r=PG&f=1", "display_name": "jramacha", "link": "https://stackoverflow.com/users/4309651/jramacha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 735, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478535820, "creation_date": 1477521599, "last_edit_date": 1478535820, "question_id": 40273250, "link": "https://stackoverflow.com/questions/40273250/pyvmomierror-when-calling-relocatevm", "title": "pyvmomi:error when calling RelocateVM", "body": "<p>Hi I am using pyvmomi API, to perform vmotions against a cluster when DRS is set to manual mode. I am going through a vcenter and querying a cluster and getting recommendation and using that to perform the Vmotions. The code is something like this.</p>\n\n<pre><code>    content=getVCContent(thisHost,    {'user':username,'pwd':decoded_password},logger)\n        allClusterObj = content.viewManager.CreateContainerView(content.rootFolder, [pyVmomi.vim.ClusterComputeResource], True)\n\n        allCluster = allClusterObj.view\n\n\n\n        for thisDrsRecommendation in thisCluster.drsRecommendation:\n            print thisDrsRecommendation.reason\n        for thisMigration in thisDrsRecommendation.migrationList:\n            print ' vm:', thisMigration.vm.name \n     while True:\n            relocate_vm_to_host(thisMigration.vm.name,thisMigration.destination.name, allClusterObj.view)\n\n#FUNCTION definition\n    def relocate_vm_to_host(vm, host , allCluster):\n        for thisCluster in allCluster:\n            for thisHost in thisCluster.host:\n                if thisHost.name == host:\n                    for thisVm in thisHost.vm:\n                        print 'Relocating vm:%s to host:%s on cluster:%s' %(thisVm.name,thisHost.name,thisCluster.name)\n                        task = thisVm.RelocateVM(priority='defaultpriority')\n</code></pre>\n\n<p>I am getting an error saying the attribute doesn't exist.\nAttributeError: 'vim.VirtualMachine' object has no attribute 'RelocateVM'</p>\n\n<p>But the pyvmomi documentaion here <a href=\"https://github.com/vmware/pyvmomi/blob/master/docs/vim/VirtualMachine.rst\" rel=\"nofollow noreferrer\">https://github.com/vmware/pyvmomi/blob/master/docs/vim/VirtualMachine.rst</a>\n has a detailed explanation for the method\n    RelocateVM(spec, priority):</p>\n\n<p>Anyone know what's the reason the method is missing? I also tried checking the available methods of the object ,that has RelocateVM_Task ,instead of RelocateVM(for which I couldn't find documentation) When I used that I get this error</p>\n\n<pre><code>TypeError: For \"spec\" expected type vim.vm.RelocateSpec, but got str\n</code></pre>\n\n<p>I checked the documentation for vim.vm.RelocateSpec, I am calling it in a function , but still throws an error.</p>\n\n<pre><code>def relocate_vm(VmToRelocate,destination_host,content):\n    allvmObj = content.viewManager.CreateContainerView(content.rootFolder, [pyVmomi.vim.VirtualMachine], True)  \n    allvms = allvmObj.view\n    for vm in allvms:\n        if vm.name == VmToRelocate:\n        print 'vm:%s to relocate %s' %(vm.name , VmToRelocate)\n        task = vm.RelocateVM_Task(spec = destination_host)  \n</code></pre>\n\n<p>Any help is appreciated.\nThanks</p>\n"}, {"tags": ["python", "linux", "ubuntu"], "comments": [{"owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 2, "creation_date": 1477522198, "post_id": 40273242, "comment_id": 67806449, "body": "os.system has issues, try using subprocess.call instead. It allows for far greater control of how to call external commands with arguments.  That being said, why spawn a shell command at all? Can&#39;t you use os.walk and keep it all in Python?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1477522581, "post_id": 40273242, "comment_id": 67806558, "body": "you could use <code>os.listdir()</code> with <code>fnmatch.filter()</code> or <code>glob.glob(&#39;images&#47;*.png&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 506, "user_id": 3946884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aF-FWha421M/AAAAAAAAAAI/AAAAAAAAAB4/6x8kUby8FZE/photo.jpg?sz=128", "display_name": "Kyle Roux", "link": "https://stackoverflow.com/users/3946884/kyle-roux"}, "is_accepted": true, "score": 0, "last_activity_date": 1477523469, "last_edit_date": 1477523469, "creation_date": 1477522367, "answer_id": 40273390, "question_id": 40273242, "link": "https://stackoverflow.com/questions/40273242/python-trying-to-put-the-contents-of-a-folder-into-a-text-file/40273390#40273390", "title": "Python: Trying to put the contents of a folder into a text file:", "body": "<p>its not sending the full text for your regular expression through to bash because of how python processes and escapes string content, so the best quickest solution would be to just manually escape the back slashes in the string, because python thinks they currently are escape codes. so change this line:  </p>\n\n<pre><code>cmd = 'find ' + img_path + '/*.png | sed -e \"s/^/\\\"/g;s/$/\\\"/g\" &gt;'  + file_path + '/desc.txt'\n</code></pre>\n\n<p>to this:  </p>\n\n<pre><code>cmd = 'find ' + img_path + '/*.png | sed -e \"s/^/\\\\\"/g;s/$/\\\\\"/g\" &gt;'  + file_path + '/desc.txt'\n</code></pre>\n\n<p>and that should work for you.     </p>\n\n<p>although, the comment on your question has a great point, you could totally just do it from python, something like:  </p>\n\n<pre><code>import os\nimport sys    \n\ndef main():\n    # variables \n    img_path= str(sys.argv[1])\n    file_path = str(sys.argv[2]) \n\n    with open(file_path,'w') as f:\n        f.writelines(['{}\\n'.format(line) for line in os.listdir(img_path) if line.endswith('*.png')])\n\nif __name__ == \"__main__\":\n    main()        \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 506, "user_id": 3946884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aF-FWha421M/AAAAAAAAAAI/AAAAAAAAAB4/6x8kUby8FZE/photo.jpg?sz=128", "display_name": "Kyle Roux", "link": "https://stackoverflow.com/users/3946884/kyle-roux"}, "edited": false, "score": 0, "creation_date": 1477587564, "post_id": 40286865, "comment_id": 67838882, "body": "yes it is more readable, but needs over twice as many lines to accomplish the same goal. I was trying to show the quickest solution, but your way is more pythonic for sure"}, {"owner": {"reputation": 19, "user_id": 4092739, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YdDNJbmZHyU/AAAAAAAAAAI/AAAAAAAAAAA/p50wr9pVzgg/photo.jpg?sz=128", "display_name": "Daniel Serrano", "link": "https://stackoverflow.com/users/4092739/daniel-serrano"}, "reply_to_user": {"reputation": 506, "user_id": 3946884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aF-FWha421M/AAAAAAAAAAI/AAAAAAAAAB4/6x8kUby8FZE/photo.jpg?sz=128", "display_name": "Kyle Roux", "link": "https://stackoverflow.com/users/3946884/kyle-roux"}, "edited": false, "score": 1, "creation_date": 1477606324, "post_id": 40286865, "comment_id": 67848352, "body": "Thanks a lot Kyle. I was trying to offer an alternative and easy to read solution. Your solution is better by far, but for experienced people ;)"}, {"owner": {"reputation": 506, "user_id": 3946884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aF-FWha421M/AAAAAAAAAAI/AAAAAAAAAB4/6x8kUby8FZE/photo.jpg?sz=128", "display_name": "Kyle Roux", "link": "https://stackoverflow.com/users/3946884/kyle-roux"}, "edited": false, "score": 0, "creation_date": 1477612771, "post_id": 40286865, "comment_id": 67850368, "body": "haha, well thank you also @DanielSerrano , sometimes i forget not everyone is quite as familiar with pythons more obscure features as i am,  but then again they are fairly useful now and again, even if people dont necessarily know exactly how its working, as long as it does haha.  thats why i drop off these little nuggets of knowledge here and there."}], "tags": [], "owner": {"reputation": 19, "user_id": 4092739, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YdDNJbmZHyU/AAAAAAAAAAI/AAAAAAAAAAA/p50wr9pVzgg/photo.jpg?sz=128", "display_name": "Daniel Serrano", "link": "https://stackoverflow.com/users/4092739/daniel-serrano"}, "is_accepted": false, "score": 0, "last_activity_date": 1477577442, "creation_date": 1477577442, "answer_id": 40286865, "question_id": 40273242, "link": "https://stackoverflow.com/questions/40273242/python-trying-to-put-the-contents-of-a-folder-into-a-text-file/40286865#40286865", "title": "Python: Trying to put the contents of a folder into a text file:", "body": "<p>I fully agree with Kyle. My recommendation is to do using only python code better than call bash commands from your code. Here it is my recommended code, it is longer and not as optimal than the aforementioned one, but IMHO it is a more easy to understand solution.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#!/usr/bin/python\r\n\r\nimport glob\r\nimport sys\r\nimport os\r\n\r\n# Taking arguments\r\nimg_path = str(sys.argv[1])\r\nfile_path = str(sys.argv[2])\r\n# lets put the target filename in a variable (it is better than hardcoding it)\r\nfile_name = 'desc.txt'\r\n# folder_separator is used to define how your operating system separates folders (unix / and windows \\)\r\nfolder_separator = '\\\\' # Windows folders\r\n# folder_separator = '/' # Unix folders\r\n\r\n# better if you make sure that the target folder exists\r\nif not os.path.exists(file_path):\r\n    # if it does not exist, you create it\r\n    os.makedirs(file_path)\r\n\r\n# Create the target file (write mode).\r\noutfile = open(file_path + '/' + file_name, 'w')\r\n\r\n# loop over folder contents\r\nfor fname in glob.iglob(\"%s/*\" % img_path):\r\n    # for every file found you take only the name (assuming that structure is folder/file.ext)\r\n    file_name_in_imgPath = fname.split('\\\\')[1]\r\n    # we want to avoid to write 'folders' in the target file\r\n    if os.path.isfile(file_name_in_imgPath):\r\n        # write filename in the target file\r\n        outfile.write(str(file_name_in_imgPath) + '\\n')\r\n\r\noutfile.close()</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 75, "user_id": 4798064, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-ClaZE6htsFo/AAAAAAAAAAI/AAAAAAAAFWw/wmXN3FvMU-8/photo.jpg?sz=128", "display_name": "AndrewD", "link": "https://stackoverflow.com/users/4798064/andrewd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 40273390, "answer_count": 2, "score": 1, "last_activity_date": 1477577442, "creation_date": 1477521576, "last_edit_date": 1477522851, "question_id": 40273242, "link": "https://stackoverflow.com/questions/40273242/python-trying-to-put-the-contents-of-a-folder-into-a-text-file", "title": "Python: Trying to put the contents of a folder into a text file:", "body": "<p>I'm in the process of writing a python script that takes two arguments that will allow me to output the contents of a folder to a text file for me to use for another process. The snippet of I have is below: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#!/usr/bin/python\r\n\r\nimport cv2\r\nimport numpy as np\r\nimport random\r\nimport sys\r\nimport os\r\nimport fileinput\r\n\r\n#Variables:\r\n\r\nimg_path= str(sys.argv[1])\r\nfile_path = str(sys.argv[2]) \r\n\r\nprint img_path\r\nprint file_path\r\n\r\ncmd = 'find ' + img_path + '/*.png | sed -e \"s/^/\\\"/g;s/$/\\\"/g\" &gt;'  + file_path + '/desc.txt'\r\n\r\nprint \"command: \", cmd\r\n\r\n#Generate desc.txt file:\r\nos.system(cmd)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>When I try and run that from my command line, I get the following output, and I have no idea how to fix it.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>sh: 1: s/$//g: not found</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I tested the command I am using by running the following command in a fresh terminal instance, and it works out fine:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>images/*.png | sed -e \"s/^/\\\"/g;s/$/\\\"/g\" &gt; desc.txt</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Can anyone see why my snippet isn't working? When I run it, I get an empty file...</p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 8, "creation_date": 1477521469, "post_id": 40273203, "comment_id": 67806264, "body": "first of all this is not what list comprehension is for. List comprehension should not really have side effects, it should just create a list. Furthermore, you cannot modify container you are iterating over during iteration - no matter comprehension or not."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477521551, "post_id": 40273203, "comment_id": 67806291, "body": "What is it that you expect as a result here?  What are the new values of list_filtered and list?"}, {"owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477521881, "post_id": 40273203, "comment_id": 67806380, "body": "Hmm. Generally it sounds perfectly plausible to iterate through a list and remove the element you iterated through if it fits the &quot;if&quot; statement.  Apparently this isn&#39;t possible with list comprehensions, which was my question. &quot;Is this possible, and if so - how?&quot;. Thanks for the information :)"}], "answers": [{"comments": [{"owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522231, "post_id": 40273238, "comment_id": 67806458, "body": "Sorry, the explanation might not be clear enough. I know how to iterate and create the new list. I want to create &quot;list_filtered&quot; and remove that value from &quot;list&quot; if it fits the &quot;IF&quot; statement.  Practically the goal is to create a new list (&quot;list_filtered&quot;), and edit the existing one (&quot;list&quot;) in the same list comprehension statement using &quot;x&quot;."}, {"owner": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "reply_to_user": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522383, "post_id": 40273238, "comment_id": 67806507, "body": "@Neekoy if that&#39;s the case I&#39;d stick with the advice from leaf. You&#39;d want to go about that a different way"}], "tags": [], "owner": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "is_accepted": false, "score": 4, "last_activity_date": 1477522614, "last_edit_date": 1495540424, "creation_date": 1477521546, "answer_id": 40273238, "question_id": 40273203, "link": "https://stackoverflow.com/questions/40273203/python-list-comprehension-and-do-action/40273238#40273238", "title": "Python list comprehension and do action", "body": "<p>If you're just trying to remove <code>3</code> you could do:</p>\n\n<pre><code>list_filtered=[i for i in list if i != 3]\nprint(list_filtered) # [1,2]\n</code></pre>\n\n<p>This will remove all values that are not equal to <code>3</code>.</p>\n\n<p>Alternatively if you wanted to do something like increment all the items in the list you would do:</p>\n\n<pre><code>[i+1 for i in list]\n&gt;&gt;&gt; [2,3,4]\n</code></pre>\n\n<p>Using a function on every item of the list would look like: </p>\n\n<pre><code>[float(i) for i in list]\n&gt;&gt;&gt; [1.0, 2.0, 3.0]\n</code></pre>\n\n<p>You can do <a href=\"https://stackoverflow.com/questions/394809/does-python-have-a-ternary-conditional-operator\">ternary statements</a>:</p>\n\n<pre><code>[i if i&lt;3 else None for i in list]\n&gt;&gt;&gt;[1, 2, None]\n</code></pre>\n\n<p>and a whole lot more...</p>\n\n<p>Here is more documentation on <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehensions</a>.</p>\n\n<p>Given your new updates, I would try something like:</p>\n\n<pre><code>list_filtered=[list.pop(list.index(3))]\n</code></pre>\n\n<p>Then <code>list_filtered</code> would be <code>[3]</code> and <code>list</code> would be <code>[1,2]</code> as your specified. </p>\n"}, {"comments": [{"owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522574, "post_id": 40273278, "comment_id": 67806556, "body": "I&#39;ll mark this question as the correct one even though everyone gave the answer I was going for - it&#39;s not possible. I&#39;m marking this one since it specifically says that the container shouldn&#39;t be modified while iterating."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522696, "post_id": 40273278, "comment_id": 67806602, "body": "@N thanks. But if you must change your original list, just reassign it to the value of the list comprehension."}, {"owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522899, "post_id": 40273278, "comment_id": 67806655, "body": "That&#39;s the thing, I want the original list to contain all values <b>except</b> those that are in the list_filtered. And I wanted to do that in the same list comparison function."}, {"owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477523729, "post_id": 40273278, "comment_id": 67806889, "body": "Yup, I&#39;m aware I can do this with two separate list comparisons. I was looking to do it in a single one, which apparently isn&#39;t possible. :/"}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477526399, "post_id": 40273278, "comment_id": 67807543, "body": "@Neekoy as of now.. But I&#39;ll update my answer if I find anything ;)"}], "tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": true, "score": 3, "last_activity_date": 1477579991, "last_edit_date": 1477579991, "creation_date": 1477521746, "answer_id": 40273278, "question_id": 40273203, "link": "https://stackoverflow.com/questions/40273203/python-list-comprehension-and-do-action/40273278#40273278", "title": "Python list comprehension and do action", "body": "<p>Your miss understand the purpose of list comprehension. List comprehension should be used to create a list, not to use its side effects. Further more, as Leijot has already mentioned, you should <strong>never modify a container while iterating over it</strong>.</p>\n\n<p>If you want to filter out certain elements in a list using list comprehension, use an if statement:</p>\n\n<pre><code>&gt;&gt;&gt; l = [1, 2, 3]\n&gt;&gt;&gt; l_filtered = [i for i in l if i != 3]\n&gt;&gt;&gt; l_filtered\n[1, 2]\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Alternatively, you can use the builtin function <a href=\"https://docs.python.org/3/library/functions.html#filter\" rel=\"nofollow\"><code>filter()</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; l = [1, 2, 3]\n&gt;&gt;&gt; l_filtered = list(filter(lambda x: x != 3, l))\n&gt;&gt;&gt; l_filtered\n[1, 2]\n&gt;&gt;&gt;\n</code></pre>\n\n<p><strong>Edit:</strong> Based on your most recent edit, what your asking is absolutely possible. Just use two different list comprehensions:</p>\n\n<pre><code>&gt;&gt;&gt; l = [1, 2, 3]\n&gt;&gt;&gt; l_filtered = [i for i in l if i == 3]\n&gt;&gt;&gt; l_filtered\n[3]\n&gt;&gt;&gt; l = [i for i in l if i != 3] # reassigning the value of l to a new list\n&gt;&gt;&gt; l\n[1, 2]\n&gt;&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522111, "post_id": 40273290, "comment_id": 67806429, "body": "The purpose of my question is to create &quot;list_filtered&quot; and alter &quot;list&quot; in the same time."}, {"owner": {"reputation": 657, "user_id": 4577206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBGxT.png?s=128&g=1", "display_name": "beeftendon", "link": "https://stackoverflow.com/users/4577206/beeftendon"}, "reply_to_user": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522612, "post_id": 40273290, "comment_id": 67806570, "body": "@Neekoy So are the new list and the modified original list supposed to contain the same values?"}, {"owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "edited": false, "score": 0, "creation_date": 1477522806, "post_id": 40273290, "comment_id": 67806634, "body": "I added an edit to the OP with two example outputs for the lists. I think it should make more sense that way. I&#39;m with the impression this isn&#39;t possible though."}], "tags": [], "owner": {"reputation": 657, "user_id": 4577206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBGxT.png?s=128&g=1", "display_name": "beeftendon", "link": "https://stackoverflow.com/users/4577206/beeftendon"}, "is_accepted": false, "score": 1, "last_activity_date": 1477522341, "last_edit_date": 1477522341, "creation_date": 1477521806, "answer_id": 40273290, "question_id": 40273203, "link": "https://stackoverflow.com/questions/40273203/python-list-comprehension-and-do-action/40273290#40273290", "title": "Python list comprehension and do action", "body": "<p>Maybe you want to provide a different example of what you're trying to do since you shouldn't remove elements from a list while you're iterating over it. Since list comprehensions create another list anyway, you could accomplish the same thing as your example by building a list that omits certain elements. If your goal is to create a list that excludes the value 3, to slightly modify your example:</p>\n\n<pre><code>l = [1, 2, 3]\nlist_filtered = [ i for i in l if i != 3 ]\n</code></pre>\n\n<p><code>l</code> remains unaltered, but <code>list_filtered</code> now contains <code>[1, 2]</code>.</p>\n"}], "owner": {"reputation": 1808, "user_id": 4175568, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A9Bst.jpg?s=128&g=1", "display_name": "Neekoy", "link": "https://stackoverflow.com/users/4175568/neekoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "accepted_answer_id": 40273278, "answer_count": 3, "score": 2, "last_activity_date": 1477579991, "creation_date": 1477521315, "last_edit_date": 1477522711, "question_id": 40273203, "link": "https://stackoverflow.com/questions/40273203/python-list-comprehension-and-do-action", "title": "Python list comprehension and do action", "body": "<p>Is it possible to do an action with the item in a list comprehension?</p>\n\n<p>Example:</p>\n\n<pre><code>list = [1, 2, 3]\nlist_filtered = [ i for i in list if i == 3 AND DO SOMETHING WITH I]\nprint (list_filtered)\n</code></pre>\n\n<p>For example if I want to remove the '3' how would I go about it? Logic says that it's something like:</p>\n\n<pre><code>list = [1, 2, 3]\nlist_filtered = [ i for i in list if i == 3 &amp;&amp; list.remove(i) ]\nprint (list_filtered)\n</code></pre>\n\n<p>I can't seem to make Python perform an action with that 'i' with any syntax that I tried. Can someone please elaborate?</p>\n\n<p>EDIT: Sorry, the explanation might not be clear enough. I know how to iterate and create the new list. I want to create \"list_filtered\" and remove that value from \"list\" if it fits the \"IF\" statement.</p>\n\n<p>Practically I need the following:</p>\n\n<pre><code>list = [1, 2, 3]\nlist_filtered = [ i for i in list if i == 3 &amp;&amp; list.remove(i) ]\nprint (list_filtered)\n# output &gt;&gt; [3]\nprint (list)\n# output &gt;&gt; [1, 2]\n</code></pre>\n\n<p>I hope the above makes it more clear. Also, please note that my question is if this can be done in the list comprehension specifically. I know how to do it with additional code. :)</p>\n\n<p>EDIT2: Apparently what I wanted to do isn't possible and also isn't advisable (which is the reason it isn't possible). It seemed like a logical thing that I just didn't know how to do. Thanks guys :)</p>\n"}, {"tags": ["python", "tkinter", "get", "set"], "comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1477521297, "post_id": 40273177, "comment_id": 67806198, "body": "You are initializing <code>path1</code> with an empty string. So why do you think, getting that value results in anything else?"}, {"owner": {"reputation": 1, "user_id": 7072079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a296c13578929cf5c9ee456ba4ef5df3?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/7072079/nathan"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1477521686, "post_id": 40273177, "comment_id": 67806325, "body": "shouldn&#39;t that string be filled once the user selects the file?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477522261, "post_id": 40273177, "comment_id": 67806469, "body": "do you mean <code>print path1.get()</code> ? It is executed at start before you select path."}, {"owner": {"reputation": 1, "user_id": 7072079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a296c13578929cf5c9ee456ba4ef5df3?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/7072079/nathan"}, "edited": false, "score": 0, "creation_date": 1477522287, "post_id": 40273177, "comment_id": 67806482, "body": "Sorry for the dumb questions....  I&#39;m still a beginner"}, {"owner": {"reputation": 1, "user_id": 7072079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a296c13578929cf5c9ee456ba4ef5df3?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/7072079/nathan"}, "edited": false, "score": 0, "creation_date": 1477522400, "post_id": 40273177, "comment_id": 67806514, "body": "I&#39;d like to set the path that is displayed in the entry box and assign it to a variable so that it can be passed to another script. the print path1.get() was just me trying to get some kind of output"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 6399970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ffb8c35e0d679ba2e7d81fbe144f17?s=128&d=identicon&r=PG&f=1", "display_name": "R.Campbell", "link": "https://stackoverflow.com/users/6399970/r-campbell"}, "is_accepted": false, "score": 1, "last_activity_date": 1477564259, "creation_date": 1477564259, "answer_id": 40282312, "question_id": 40273177, "link": "https://stackoverflow.com/questions/40273177/why-is-nothing-returned-when-i-invoke-get/40282312#40282312", "title": "why is nothing returned when I invoke .get()", "body": "<p>You do not need to use a textvariable, you can just use <code>variable = entry1.get()</code>. A Tkinter textvariable is not like a traditional python variable, it is just used for setting the text in an entry.</p>\n"}], "owner": {"reputation": 1, "user_id": 7072079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a296c13578929cf5c9ee456ba4ef5df3?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/7072079/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477564259, "creation_date": 1477521145, "question_id": 40273177, "link": "https://stackoverflow.com/questions/40273177/why-is-nothing-returned-when-i-invoke-get", "title": "why is nothing returned when I invoke .get()", "body": "<p>Having trouble setting the file path that is selected by the user and setting to variable. I am able to retrieve the path and set it to display in the entry box but I would like to capture that path and import it into another script. Maybe my logic is flawed here? What am I doing wrong?</p>\n\n<pre><code>    import Tkinter\n    import tkFileDialog\n    from Tkinter import *\n    from tkFileDialog import *\n\nclass GUI:\n    def __init__(self, master):\n        self.master = master\n\n\n\n        master.title(\"XML Compare Tool\")\n        master.geometry('700x300')\n\n        path1 = StringVar()\n        path2 = StringVar()\n        self.bb1 = Button(master, text=\"Browse\", command=lambda: path1.set(askopenfilename()))\n        self.bb1.grid(row=0, column=0, padx=5, pady=5)\n\n\n        self.bb2 = Button(master, text=\"Browse\", command=lambda: path2.set(askopenfilename()))\n        self.bb2.grid(row=1, column=0, padx=5, pady=5)\n\n        self.confirm = Button(master, text=\"Confirm\", command='')\n        self.confirm.grid(row=3, column=1, padx=5, pady=5, sticky='')\n\n        self.entry1 = Entry(master, width=75, textvariable=path1)\n        self.entry1.grid(row=0, column=1, columnspan=2, sticky=W)\n        print path1.get()\n\n        self.entry2 = Entry(master, width=75, textvariable=path2)\n        self.entry2.grid(row=1, column=1, sticky=W)\n\n        self.t_label = Label(master, text=\"Script Output\")\n        self.t_label.grid(row=4, column=1, columnspan=1, sticky='')\n\n        self.t_frame = Frame(master, bg=\"white\", height=150, width=600)\n        self.t_frame.grid(row=5, column=1, columnspan=1, sticky='')\n        self.t_text = Text(self.t_frame)\n\n\n\nroot = Tk()\nmy_gui = GUI(root)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "redirect", "error-handling", "python-requests"], "comments": [{"owner": {"reputation": 790, "user_id": 438374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c66dc1d90463561db2fbe3afd34873c?s=128&d=identicon&r=PG", "display_name": "Wissam Youssef", "link": "https://stackoverflow.com/users/438374/wissam-youssef"}, "edited": false, "score": 0, "creation_date": 1477521828, "post_id": 40273175, "comment_id": 67806365, "body": "could you give me a couple of links to test please? I am just checking if I can help you with the solution. give me links with good redirect and bad redirects if the links you are working on are public."}, {"owner": {"reputation": 128, "user_id": 4191951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b63e9f1242a84f5ad06744928d9420?s=128&d=identicon&r=PG&f=1", "display_name": "stungkit", "link": "https://stackoverflow.com/users/4191951/stungkit"}, "reply_to_user": {"reputation": 790, "user_id": 438374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c66dc1d90463561db2fbe3afd34873c?s=128&d=identicon&r=PG", "display_name": "Wissam Youssef", "link": "https://stackoverflow.com/users/438374/wissam-youssef"}, "edited": false, "score": 0, "creation_date": 1477523012, "post_id": 40273175, "comment_id": 67806692, "body": "I added a good redirect link. The bad ones are harder to find. I will update this post when I can provide you with one."}, {"owner": {"reputation": 790, "user_id": 438374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c66dc1d90463561db2fbe3afd34873c?s=128&d=identicon&r=PG", "display_name": "Wissam Youssef", "link": "https://stackoverflow.com/users/438374/wissam-youssef"}, "edited": false, "score": 0, "creation_date": 1477523117, "post_id": 40273175, "comment_id": 67806725, "body": "thank you. just so you know for the crash part of your problem it is a simple exception catching code. I will include a sample for you if I can find a solution for the history."}, {"owner": {"reputation": 128, "user_id": 4191951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b63e9f1242a84f5ad06744928d9420?s=128&d=identicon&r=PG&f=1", "display_name": "stungkit", "link": "https://stackoverflow.com/users/4191951/stungkit"}, "reply_to_user": {"reputation": 790, "user_id": 438374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c66dc1d90463561db2fbe3afd34873c?s=128&d=identicon&r=PG", "display_name": "Wissam Youssef", "link": "https://stackoverflow.com/users/438374/wissam-youssef"}, "edited": false, "score": 0, "creation_date": 1477523926, "post_id": 40273175, "comment_id": 67806947, "body": "Thanks. Catching the crash is straight forward. The hard part is getting the history."}, {"owner": {"reputation": 790, "user_id": 438374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c66dc1d90463561db2fbe3afd34873c?s=128&d=identicon&r=PG", "display_name": "Wissam Youssef", "link": "https://stackoverflow.com/users/438374/wissam-youssef"}, "edited": false, "score": 1, "creation_date": 1477524815, "post_id": 40273175, "comment_id": 67807177, "body": "I am curious, could you show me the error message when the program crashes, because if I skip the exception, I still can get a partial history if the url is 404 for example."}], "owner": {"reputation": 128, "user_id": 4191951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b63e9f1242a84f5ad06744928d9420?s=128&d=identicon&r=PG&f=1", "display_name": "stungkit", "link": "https://stackoverflow.com/users/4191951/stungkit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1477525510, "creation_date": 1477521133, "last_edit_date": 1477522961, "question_id": 40273175, "link": "https://stackoverflow.com/questions/40273175/python-requests-module-retrieve-requests-history-upon-completion-or-error", "title": "Python requests module - Retrieve requests.history upon completion or error", "body": "<p>I am using Python and the requests module to follow redirects for any link. I have the following code:</p>\n\n<pre><code>import requests\n\nr = requests.get(\"put link here\")\nprint r.history \n</code></pre>\n\n<p>This code enables me to retrieve the history of the redirects, which is something that I want. However, from time to time, I would get an error when being redirected from a link:</p>\n\n<pre><code># Sometimes links in the beginning, in between, or even in the end throws an error.\nr = requests.get(\"put link here\")\n</code></pre>\n\n<p>The error can be caused by a number of issues. Is it possible for me to obtain all the redirects up to and including the link that caused an error ? For instance:</p>\n\n<pre><code>starting_link -&gt; good_link1 -&gt; good_link2 -&gt; bad_link -&gt; X (causes program to crash)\n</code></pre>\n\n<p>I would like to obtain:</p>\n\n<pre><code>starting_link -&gt; good_link1 -&gt; good_link2 -&gt; bad_link\n</code></pre>\n\n<p>Is this possible with the requests module?</p>\n\n<p>Thanks!</p>\n\n<p>Examples:</p>\n\n<pre><code># Good redirect since it will redirect you to https://www.yahoo.com (note the http -&gt; https)\ngood_link = http://www.yahoo.com \n\n# Bad redirect\n# Apologies, but I cannot provide you with an exact link. But it involves clicking a link that redirects you to \"market://details?id=XXXXX\"\n# The requests module thinks that this is not a valid link (it is a valid 'link' in an Android phone)\n</code></pre>\n"}, {"tags": ["python", "opencv", "tensorflow"], "comments": [{"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1477521827, "post_id": 40273109, "comment_id": 67806364, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37620330/import-tensor-with-mat-format-to-tensorflow\">import tensor with mat format to tensorflow</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2012, "user_id": 5587428, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/FJMiv.jpg?s=128&g=1", "display_name": "RobR", "link": "https://stackoverflow.com/users/5587428/robr"}, "is_accepted": false, "score": 1, "last_activity_date": 1477525060, "last_edit_date": 1477525060, "creation_date": 1477524719, "answer_id": 40273760, "question_id": 40273109, "link": "https://stackoverflow.com/questions/40273109/convert-python-opencv-mat-image-to-tensorflow-image-data/40273760#40273760", "title": "Convert python opencv mat image to tensorflow image data", "body": "<p>You should be able to convert the opencv mat format to a numpy array as:</p>\n\n<pre><code>np_image_data = np.asarray(image_data)\n</code></pre>\n\n<p>Once you have the data as a numpy array you can pass it to tensor flow through a <a href=\"https://www.tensorflow.org/versions/r0.8/how_tos/reading_data/index.html#feeding\" rel=\"nofollow\">feeding mechanism</a> as in the link that @thesonyman101 referenced:</p>\n\n<pre><code>feed_dict = {some_tf_input:np_image_data}\npredictions = sess.run(some_tf_output, feed_dict=feed_dict)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 4350908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c1e93c7f7137b46b4e848b480fd967?s=128&d=identicon&r=PG&f=1", "display_name": "Txeif", "link": "https://stackoverflow.com/users/4350908/txeif"}, "edited": false, "score": 0, "creation_date": 1478168310, "post_id": 40273815, "comment_id": 68047863, "body": "Thanks Mark, i solved the problem saving the opencv Mat image into a temp file and then loading as i post. It&#180;s not the cleanest solution but it works"}], "tags": [], "owner": {"reputation": 6724, "user_id": 17328, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b8f5cf3259414d6b33897ffc6430df2?s=128&d=identicon&r=PG", "display_name": "Mark McDonald", "link": "https://stackoverflow.com/users/17328/mark-mcdonald"}, "is_accepted": false, "score": 5, "last_activity_date": 1601443067, "last_edit_date": 1601443067, "creation_date": 1477525041, "answer_id": 40273815, "question_id": 40273109, "link": "https://stackoverflow.com/questions/40273109/convert-python-opencv-mat-image-to-tensorflow-image-data/40273815#40273815", "title": "Convert python opencv mat image to tensorflow image data", "body": "<p>It looks like you're using the pre-trained and pre-defined Inception model, which has a tensor named <code>DecodeJpeg/contents:0</code>. If so, this tensor expects a scalar string containing the bytes for a JPEG image.</p>\n<p>You have a couple of options, one is to look further down the network for the node where the JPEG is converted to a matrix. I'm not sure what the MAT format is, but this will be a <code>[height, width, colour_depth]</code> representation. If you can get your image in that format you can replace the <code>DecodeJpeg...</code> string with the name of the node you want to feed into.</p>\n<p>The other option is to simply convert your images to JPEGs and feed them straight in.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 13492054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dbf328fc8da59a114b9600a4aef0975?s=128&d=identicon&r=PG&f=1", "display_name": "Prabath", "link": "https://stackoverflow.com/users/13492054/prabath"}, "edited": false, "score": 0, "creation_date": 1611502539, "post_id": 42828577, "comment_id": 116466663, "body": "This works perfectly even with the video frames. I used below code to analyse video file with OpenCV + Tensorflow.      <code>ret, frame = cap.read() </code>          <code>image = cv2.resize(frame,dsize=(299,299), interpolation = cv2.INTER_CUBIC)</code>      <code>np_image_data = np.asarray(image)</code>        <code>image = np.expand_dims(image, axis=0)</code>      <code>image = preprocess(image)</code>      <code>preds = model.predict(image)</code>"}], "tags": [], "owner": {"reputation": 166, "user_id": 7719845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03850c4caabd2d65a456eaeff330506e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris VdoP", "link": "https://stackoverflow.com/users/7719845/chris-vdop"}, "is_accepted": true, "score": 13, "last_activity_date": 1489746533, "last_edit_date": 1489746533, "creation_date": 1489652216, "answer_id": 42828577, "question_id": 40273109, "link": "https://stackoverflow.com/questions/40273109/convert-python-opencv-mat-image-to-tensorflow-image-data/42828577#42828577", "title": "Convert python opencv mat image to tensorflow image data", "body": "<p>Load the OpenCV image using imread, then convert it to a numpy array.</p>\n\n<p>For feeding into inception v3, you need to use the Mult:0 Tensor as entry point, this expects a 4 dimensional Tensor that has the layout: [Batch index,Width,Height,Channel]\nThe last three are perfectly fine from a cv::Mat, the first one just needs to be 0, as you do not want to feed a batch of images, but a single image.\nThe code looks like:</p>\n\n<pre><code>#Loading the file\nimg2 = cv2.imread(file)\n#Format for the Mul:0 Tensor\nimg2= cv2.resize(img2,dsize=(299,299), interpolation = cv2.INTER_CUBIC)\n#Numpy array\nnp_image_data = np.asarray(img2)\n#maybe insert float convertion here - see edit remark!\nnp_final = np.expand_dims(np_image_data,axis=0)\n\n#now feeding it into the session:\n#[... initialization of session and loading of graph etc]\npredictions = sess.run(softmax_tensor,\n                           {'Mul:0': np_final})\n#fin! \n</code></pre>\n\n<p>Kind regards,</p>\n\n<p>Chris</p>\n\n<p>Edit: I just noticed, that the inception network wants intensity values normalized as floats to [-0.5,0.5], so please use this code to convert them before building the RGB image:</p>\n\n<pre><code>np_image_data=cv2.normalize(np_image_data.astype('float'), None, -0.5, .5, cv2.NORM_MINMAX)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9569349, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6SEaYY4MfJo/AAAAAAAAAAI/AAAAAAAABEM/ND_Gsz6NFj4/photo.jpg?sz=128", "display_name": "Rodolfo Lomascolo Szittyay", "link": "https://stackoverflow.com/users/9569349/rodolfo-lomascolo-szittyay"}, "is_accepted": false, "score": 0, "last_activity_date": 1522322305, "creation_date": 1522322305, "answer_id": 49554737, "question_id": 40273109, "link": "https://stackoverflow.com/questions/40273109/convert-python-opencv-mat-image-to-tensorflow-image-data/49554737#49554737", "title": "Convert python opencv mat image to tensorflow image data", "body": "<p>In my case i had to read an image from file, do some processing and then inject into inception to obtain the return from a features layer, called last layer.\nMy solution is short but effective.</p>\n\n<pre><code>        img = cv2.imread(file)\n        ... do some processing \n        img_as_string = cv2.imencode('.jpg', img)[1].tostring()\n        features = sess.run(last_layer, {'DecodeJpeg/contents:0': img_as_string})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 723, "user_id": 10152334, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hz2s4qLpp44/AAAAAAAAAAI/AAAAAAAACyk/w8sYnaTw_Mg/photo.jpg?sz=128", "display_name": "Bensuperpc", "link": "https://stackoverflow.com/users/10152334/bensuperpc"}, "is_accepted": false, "score": 4, "last_activity_date": 1582642073, "creation_date": 1582642073, "answer_id": 60397271, "question_id": 40273109, "link": "https://stackoverflow.com/questions/40273109/convert-python-opencv-mat-image-to-tensorflow-image-data/60397271#60397271", "title": "Convert python opencv mat image to tensorflow image data", "body": "<p>With Tensorflow 2.0 and OpenCV 4.2.0, you can convert by this way :</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\nimport cv2 as cv\n\nwidth = 32\nheight = 32\n\n#Load image by OpenCV\nimg = cv.imread('img.jpg')\n\n#Resize to respect the input_shape\ninp = cv.resize(img, (width , height ))\n\n#Convert img to RGB\nrgb = cv.cvtColor(inp, cv.COLOR_BGR2RGB)\n\n#Is optional but i recommend (float convertion and convert img to tensor image)\nrgb_tensor = tf.convert_to_tensor(rgb, dtype=tf.float32)\n\n#Add dims to rgb_tensor\nrgb_tensor = tf.expand_dims(rgb_tensor , 0)\n\n#Now you can use rgb_tensor to predict label for exemple :\n\n#Load pretrain model, made from: https://www.tensorflow.org/tutorials/images/cnn\nmodel = tf.keras.models.load_model('cifar10_model.h5')\n\n#Create probability model \nprobability_model = tf.keras.Sequential([model, \n                                     tf.keras.layers.Softmax()])\n#Predict label\npredictions = probability_model.predict(rgb_tensor, steps=1)\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4350908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c1e93c7f7137b46b4e848b480fd967?s=128&d=identicon&r=PG&f=1", "display_name": "Txeif", "link": "https://stackoverflow.com/users/4350908/txeif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16851, "favorite_count": 3, "accepted_answer_id": 42828577, "answer_count": 5, "score": 9, "last_activity_date": 1601443067, "creation_date": 1477520792, "question_id": 40273109, "link": "https://stackoverflow.com/questions/40273109/convert-python-opencv-mat-image-to-tensorflow-image-data", "title": "Convert python opencv mat image to tensorflow image data", "body": "<p>I want to capture frames from a video with python and opencv and then classify the captured Mat images with tensorflow. The problem is that i don\u00b4t know how to convert de Mat format to a 3D Tensor variable. This is how i am doing now with tensorflow (loading the image from file) :</p>\n\n<pre><code>image_data = tf.gfile.FastGFile(imagePath, 'rb').read()\nwith tf.Session() as sess:\n    softmax_tensor = sess.graph.get_tensor_by_name('final_result:0')\n    predictions = sess.run(softmax_tensor,\n                           {'DecodeJpeg/contents:0': image_data})\n</code></pre>\n\n<p>I will appreciate any help, thanks in advance</p>\n"}, {"tags": ["python", "if-statement", "vector"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477520947, "post_id": 40273096, "comment_id": 67806061, "body": "The variable <code>scalar_result</code> is local to the <code>__mul__</code> function. You can&#39;t access it in <code>is_perpendicular_to</code>. And <code>is_perpendicular_to</code> never does <code>self * other</code>, so what&#39;s supposed to set the variable?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477520977, "post_id": 40273096, "comment_id": 67806066, "body": "I think you just want <code>if self * other == 0:</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477521029, "post_id": 40273096, "comment_id": 67806085, "body": "If you have multiple questions, you should post them separately."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477521123, "post_id": 40273096, "comment_id": 67806124, "body": "&quot;for me it is not function&quot; is not a clear question. What is it supposed to do, and what is it doing instead?"}, {"owner": {"reputation": 11, "user_id": 7077531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79e0f41fe80e364bbdc8f159128cf1c2?s=128&d=identicon&r=PG&f=1", "display_name": "Werner", "link": "https://stackoverflow.com/users/7077531/werner"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477521393, "post_id": 40273096, "comment_id": 67806230, "body": "My question is, how should look a function which print &quot;They are perpendicular&quot; if scalar_result = 0."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477521466, "post_id": 40273096, "comment_id": 67806262, "body": "<code>if vec1.is_perpendicular(vec2): print &quot;They are pependicular&quot;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477521509, "post_id": 40273096, "comment_id": 67806278, "body": "<code>is_perpendicular()</code> should return <code>True</code> or <code>False</code>, not print something by itself."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1477521638, "post_id": 40273096, "comment_id": 67806314, "body": "this question seems to be all about <code>python</code>, not <code>c</code>.  Suggest removing the <code>c</code> tag"}, {"owner": {"reputation": 11, "user_id": 7077531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79e0f41fe80e364bbdc8f159128cf1c2?s=128&d=identicon&r=PG&f=1", "display_name": "Werner", "link": "https://stackoverflow.com/users/7077531/werner"}, "edited": false, "score": 0, "creation_date": 1477521770, "post_id": 40273096, "comment_id": 67806348, "body": "strange, I tried it and this shows up &quot;&quot; TypeError: is_perpendicular_to() takes exactly 1 argument (2 given) &quot;&quot;, I don&#39;t get it vec 2 is just 1 argument? or not?"}], "owner": {"reputation": 11, "user_id": 7077531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79e0f41fe80e364bbdc8f159128cf1c2?s=128&d=identicon&r=PG&f=1", "display_name": "Werner", "link": "https://stackoverflow.com/users/7077531/werner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477521811, "creation_date": 1477520729, "last_edit_date": 1477521811, "question_id": 40273096, "link": "https://stackoverflow.com/questions/40273096/vectors-cross-product-and-if-statement-in-function", "title": "Vector&#39;s cross product and if statement in function", "body": "<p>My program is working but not all of it's parts, I listed my problems in comment of program</p>\n\n<pre><code>class MyVector:\n    def __init__(self, vector):\n        self.vector = vector\n\n    def get_vector(self):\n        return self.vector\n\n    def __mul__(self, other):\n        scalar_result = 0  # or 0.0\n        for i in range(0, len(self.vector)):\n            scalar_result += self.vector[i] * other.vector[i]\n        return scalar_result\n\n    def is_perpendicular_to(self, other):       #is there a way that I could make function which will print wheter they are perpendicular or not?\n        if (scalar_result == 0):                #this isn't seem to work\n            print(\"They are perpendicular\")\n\n    \"\"\"\n    Also I was hoping that I can get crossdot product of these two vectors, but I can not make it functional\n    def crossProd(vector):\n        dimension = len(a)\n        c = []\n        for i in range(dimension):\n            c.append(0)\n            for j in range(dimension):\n                if j &lt;&gt; i:\n                    for k in range(dimension):\n                        if k &lt;&gt; i:\n                            if k &gt; j:\n                                c[i] += a[j] * b[k]\n                            elif k &lt; j:\n                                c[i] -= a[j] * b[k]\n        return c\n    \"\"\"\n\nif __name__ == \"__main__\":\n     vec1 = MyVector([1, 0, 3, 0])\n     vec2 = MyVector([0, 4, 0, 4])\n     print(vec1.get_vector())\n     print(vec2.get_vector())\n     scalar_result = vec1 * vec2\n     print(scalar_result)\n</code></pre>\n\n<p>In the upper part I created logical algorithm that I think should work, but I can't put it to the program, for me it is not functional</p>\n"}, {"tags": ["python", "rdf", "owl", "ontology", "rdflib"], "comments": [{"owner": {"reputation": 19956, "user_id": 451941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445f31cee6cbc99490297198c54f2589?s=128&d=identicon&r=PG", "display_name": "Jeen Broekstra", "link": "https://stackoverflow.com/users/451941/jeen-broekstra"}, "edited": false, "score": 1, "creation_date": 1477712926, "post_id": 40273085, "comment_id": 67888736, "body": "RDFLib is, as the name implies, an RDF library. It is not an OWL reasoner."}, {"owner": {"reputation": 724, "user_id": 1461380, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/TW4We.jpg?s=128&g=1", "display_name": "UserK", "link": "https://stackoverflow.com/users/1461380/userk"}, "reply_to_user": {"reputation": 19956, "user_id": 451941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445f31cee6cbc99490297198c54f2589?s=128&d=identicon&r=PG", "display_name": "Jeen Broekstra", "link": "https://stackoverflow.com/users/451941/jeen-broekstra"}, "edited": false, "score": 0, "creation_date": 1478187547, "post_id": 40273085, "comment_id": 68061485, "body": "Is it possible to use an OWL reasoner to perform a consistency check on an ontology and notify a python program about the result?"}, {"owner": {"reputation": 9995, "user_id": 7879193, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bVdcN0nQCio/AAAAAAAAAAI/AAAAAAAACfs/jPa4Dr_Nzbk/photo.jpg?sz=128", "display_name": "Stanislav Kralin", "link": "https://stackoverflow.com/users/7879193/stanislav-kralin"}, "edited": false, "score": 0, "creation_date": 1520339817, "post_id": 40273085, "comment_id": 85266515, "body": "Probably you could use <a href=\"https://stackoverflow.com/questions/tagged/owlready\">owlready</a>."}, {"owner": {"reputation": 724, "user_id": 1461380, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/TW4We.jpg?s=128&g=1", "display_name": "UserK", "link": "https://stackoverflow.com/users/1461380/userk"}, "edited": false, "score": 0, "creation_date": 1520349500, "post_id": 40273085, "comment_id": 85273000, "body": "Thanks I ll have look. It seems that the library supports reasoners invocation"}], "owner": {"reputation": 724, "user_id": 1461380, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/TW4We.jpg?s=128&g=1", "display_name": "UserK", "link": "https://stackoverflow.com/users/1461380/userk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 531, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503397098, "creation_date": 1477520686, "last_edit_date": 1477521208, "question_id": 40273085, "link": "https://stackoverflow.com/questions/40273085/check-ontology-consistency-with-rdflib-and-python", "title": "Check ontology consistency with RDFlib and python", "body": "<p>I am using <a href=\"http://rdflib.readthedocs.io/en/stable/\" rel=\"nofollow\">RDF lib</a> with python. Is it there any function that controls if an ontology is inconsistent.</p>\n\n<pre><code>&lt;  owl:Class rdf:about=\"http://www.semanticweb.org/ontologies/2016/1/semantic_mapping_domain_model#Chair\"&gt;\n    &lt;  owl:equivalentClass rdf:resource=\"http://www.semanticweb.org/ontologies/2016/1/semantic_mapping_domain_model#Table\"/&gt;\n    &lt;  rdfs:subClassOf rdf:resource=\"http://www.semanticweb.org/ontologies/2016/1/semantic_mapping_domain_model#Furniture\"/&gt;\n    &lt;  owl:disjointWith rdf:resource=\"http://www.semanticweb.org/ontologies/2016/1/semantic_mapping_domain_model#Table\"/&gt;\n&lt;  /owl:Class&gt;\n</code></pre>\n\n<p>I have forced an individual to belong to some class and to its complement. I would like to perform a consistency check on a .owl file using python. </p>\n\n<p>Starting the Pellet reasoner with Prot\u00e9g\u00e9 returns:</p>\n\n<blockquote>\n  <p>InconsistentOntologyException: cannot do reasoning on inconsistent\n  ontologies!</p>\n</blockquote>\n\n<p>When I load the ontology (you can find it <a href=\"http://userk.co.uk/ontologies/semantic_map_domain_model.owl\" rel=\"nofollow\">here</a>) with the following python code:</p>\n\n<pre><code>import uri\nfrom rdflib import Graph, Literal, BNode, Namespace, RDF, URIRef\nfrom rdflib.namespace import DC, FOAF, RDF\n[...]\ng = Graph()\ng.parse(\"/local_path/scripts/semantic_mapChairs.owl\")\n[...]\n</code></pre>\n\n<p>nothing is detected (there is an instance of the object Chair). \nDo you have any advice?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 2, "creation_date": 1477521197, "post_id": 40273117, "comment_id": 67806164, "body": "If you have a large data set, it might be impossible to use replace like this manually."}, {"owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "reply_to_user": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1477521996, "post_id": 40273117, "comment_id": 67806402, "body": "@JoeR Right! Is there a way which I can implement on large data?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 2, "creation_date": 1477522946, "post_id": 40273117, "comment_id": 67806671, "body": "I ran this over 100,000,000 rows and finished in a couple of seconds.  IMO, this is your solution."}, {"owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "edited": false, "score": 0, "creation_date": 1477523176, "post_id": 40273117, "comment_id": 67806739, "body": "What if there are more errors like these? Do we specify each such value in the dictionary?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "edited": false, "score": 1, "creation_date": 1477527643, "post_id": 40273117, "comment_id": 67807863, "body": "@user6461192 yes.  There cannot be very many types.  you can find them all with <code>df.Num_of_employees.unique()</code> or <code>df.Num_of_employees.value_counts()</code>  create a dictionary with all offending entries and the corresponding corrections."}, {"owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1477597444, "post_id": 40273117, "comment_id": 67844311, "body": "@piRSquared Using the above piece of code, I am able to make changes in the df. I can see the output. But when I export the result in a csv, the changes aren&#39;t shown. Can you figure out any particular reason for the same?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1477597691, "post_id": 40273117, "comment_id": 67844447, "body": "you might not be assigning the result back to the column. <code>df.Num_of_employees.replace({&#39;10-Jan&#39;: &#39;1-10&#39;, &#39;Nov-50&#39;: &#39;11-50&#39;})</code> will display the results but you have to capture them with <code>df.Num_of_employees = df.Num_of_employees.replace({&#39;10-Jan&#39;: &#39;1-10&#39;, &#39;Nov-50&#39;: &#39;11-50&#39;})</code>.  You can check before you write your file with <code>print(df.to_csv())</code>"}, {"owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1477602867, "post_id": 40273117, "comment_id": 67847007, "body": "@piRSquared I am doing that. It doesn&#39;t work. I have started a separated thread for the same. If you have any comments - Please post it there. <a href=\"http://stackoverflow.com/questions/40294115/changes-in-data-frame-not-reflected-in-csv-output\" title=\"changes in data frame not reflected in csv output\">stackoverflow.com/questions/40294115/&hellip;</a>"}], "tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": true, "score": 17, "last_activity_date": 1477520828, "creation_date": 1477520828, "answer_id": 40273117, "question_id": 40273067, "link": "https://stackoverflow.com/questions/40273067/replace-specific-values-in-a-dataframe-column-using-pandas/40273117#40273117", "title": "Replace specific values in a dataframe column using Pandas", "body": "<p>A clean syntax for this kind of \"find and replace\" uses a dict, as</p>\n\n<pre><code>df.Num_of_employees = df.Num_of_employees.replace({\"10-Jan\": \"1-10\",\n                                                   \"Nov-50\": \"11-50\"})\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33323, "favorite_count": 6, "accepted_answer_id": 40273117, "answer_count": 1, "score": 8, "last_activity_date": 1477520864, "creation_date": 1477520573, "last_edit_date": 1477520864, "question_id": 40273067, "link": "https://stackoverflow.com/questions/40273067/replace-specific-values-in-a-dataframe-column-using-pandas", "title": "Replace specific values in a dataframe column using Pandas", "body": "<p>I have a data frame df with a column called \"Num_of_employees\", which has values like 50-100, 200-500 etc. I see a problem with few values in my data. Wherever the employee number should be 1-10, the data has it as 10-Jan. Also, wherever the value should be 11-50, the data has it as Nov-50. How would I rectify this problem using pandas?</p>\n"}, {"tags": ["python", "progress-bar", "stdout"], "comments": [{"owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "edited": false, "score": 0, "creation_date": 1477520739, "post_id": 40273053, "comment_id": 67805984, "body": "Have a look at the tqdm library, it might suit you."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1477521373, "post_id": 40273099, "comment_id": 67806225, "body": "Thanks. So I&#39;m assuming this is safe to use this as long as I&#39;ll never need to actually use STDERR for errors?"}, {"owner": {"reputation": 1639, "user_id": 3030010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c97ca617bb8ebf436f2131091f8d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3030010", "link": "https://stackoverflow.com/users/3030010/user3030010"}, "reply_to_user": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1477521685, "post_id": 40273099, "comment_id": 67806324, "body": "That&#39;s correct. If you do ever need to do that, then you probably will want to rewrite the Python script to just do the logging itself. You can do something like <code>f = open(&quot;json.log&quot;, &quot;wt&quot;)</code>, and then <code>print(&quot;something&quot;, file=f)</code>, or use one of the more robust logging modules available."}, {"owner": {"reputation": 12479, "user_id": 1121352, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9275f0e17dc5e423f989ed6bf6cbab11?s=128&d=identicon&r=PG", "display_name": "gaborous", "link": "https://stackoverflow.com/users/1121352/gaborous"}, "edited": false, "score": 0, "creation_date": 1482960675, "post_id": 40273099, "comment_id": 69941591, "body": "To keep the bar at the bottom, you will need to write all your messages using <code>tqdm.write()</code>, or use your own curse based solution."}], "tags": [], "owner": {"reputation": 1639, "user_id": 3030010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c97ca617bb8ebf436f2131091f8d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3030010", "link": "https://stackoverflow.com/users/3030010/user3030010"}, "is_accepted": false, "score": 2, "last_activity_date": 1477520748, "creation_date": 1477520748, "answer_id": 40273099, "question_id": 40273053, "link": "https://stackoverflow.com/questions/40273053/how-can-i-output-a-status-bar-to-the-console-without-interfering-with-append/40273099#40273099", "title": "How can I output a status bar to the console without interfering with append (&gt;&gt;)?", "body": "<p>Using <code>&gt;&gt;</code> will by default only pipe STDOUT to the file, so if you print to STDERR, it won't go to the log. For example:</p>\n\n<pre><code>import sys\nprint(\"something\") # this will go to json.logs\nprint(\"something else\", file=sys.stderr) # this won't go to json.logs unless you specifically tell it to\n</code></pre>\n\n<p>As for making the bar itself, either look at something like <a href=\"https://pypi.python.org/pypi/tqdm\" rel=\"nofollow\">tqdm</a> or if you specifically want the bar to appear at the bottom of the window, you may have to roll your own solution with <a href=\"https://docs.python.org/3.5/howto/curses.html\" rel=\"nofollow\">curses</a>. Or just do something simple, like print one asterisk at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1477521440, "post_id": 40273114, "comment_id": 67806250, "body": "Thanks. I can at least start with this. I also asked this above: It should be safe to use this solution as long as I never need to actually use STDERR for real errors, right?"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1477521533, "post_id": 40273114, "comment_id": 67806287, "body": "Yes! In case you want to trace errors, you could use a different file as a log."}], "tags": [], "owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "is_accepted": false, "score": 1, "last_activity_date": 1477520811, "creation_date": 1477520811, "answer_id": 40273114, "question_id": 40273053, "link": "https://stackoverflow.com/questions/40273053/how-can-i-output-a-status-bar-to-the-console-without-interfering-with-append/40273114#40273114", "title": "How can I output a status bar to the console without interfering with append (&gt;&gt;)?", "body": "<p>The idea is to use the stderr (<code>import sys; sys.stderr.write('the bar')</code> you could use <code>print ('barstuff', file=sys.stderr)</code> if you are using python3). This works fine if you want to save the stdout in a file while having the bar in the screen. To have the bar always at the bottom of the screen, looks like quite complicated: you should know what is the height of the screen and, I think, this could be almost impossible from python.</p>\n\n<p>Probably, with some magic, you could be able to print the bar at the beginning of the screen and a given number of lines below it using the \\r to rewrite on the old strings.</p>\n"}], "owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477520811, "creation_date": 1477520494, "question_id": 40273053, "link": "https://stackoverflow.com/questions/40273053/how-can-i-output-a-status-bar-to-the-console-without-interfering-with-append", "title": "How can I output a status bar to the console without interfering with append (&gt;&gt;)?", "body": "<p>I have a script that simply outputs log events formatted in json to the screen line by line. One line equals one json log event. I usually simply append the results to a file to hold onto them when I need to (./script.py >> json.logs).</p>\n\n<p>This script can take a while depending on the input, and I'd like to add a simple progress bar or number to the bottom of the console as it's working. However, I think this will also be written to the log file if I append like normal and I do not want that.</p>\n\n<p>What is the normal way to approach printing something to the console that will not be appended to stdout or >>? <em>Also</em>, if I'm just simply printing the results to the screen instead of logging them to a file, I need the status bar to not make a mess in the screen as well (or rather, to only ever show at the bottom of the console screen).</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1477520682, "post_id": 40273050, "comment_id": 67805969, "body": "You can store all the indices of items you&#39;ll need to delete, then handle everything after the loop."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1477520822, "post_id": 40273050, "comment_id": 67806014, "body": "<i>should I just try doing this is another way?</i>  &lt;--- yes, that"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4307777"}, "edited": false, "score": 0, "creation_date": 1477521024, "post_id": 40273050, "comment_id": 67806083, "body": "How? I tried doing that, but as soon as I do del(lst[d]) d being a list with all the indexes that are duplicate, it gives me an index out of range error since all the other values of d are now off."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477521110, "post_id": 40273050, "comment_id": 67806117, "body": "Iterate through the list of indices from highest to lowest.  Use <b>for d in lst[::-1]</b>"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1477521396, "post_id": 40273050, "comment_id": 67806233, "body": "Realize that this is quite inefficient. The <code>aux = ...</code> line is O(n). The <code>lst[i] in aux</code> check is O(n). <code>del(list[i])</code> is O(n). All of these are repeated for each position in the list. Overall you&#39;ve got O(n^2) performance."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4307777"}, "edited": false, "score": 0, "creation_date": 1477521129, "post_id": 40273108, "comment_id": 67806126, "body": "Yes that&#39;s the exact problem, I&#39;ll stick with the while as another user mentioned! Thanks"}], "tags": [], "owner": {"reputation": 192, "user_id": 3465172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/350154b19760947dfd0693f79377ebd0?s=128&d=identicon&r=PG&f=1", "display_name": "Bobbyrogers", "link": "https://stackoverflow.com/users/3465172/bobbyrogers"}, "is_accepted": false, "score": 0, "last_activity_date": 1477520786, "creation_date": 1477520786, "answer_id": 40273108, "question_id": 40273050, "link": "https://stackoverflow.com/questions/40273050/creating-a-function-that-removes-duplicates-in-list/40273108#40273108", "title": "Creating a function that removes duplicates in list", "body": "<p>The problem is you are manipulating the list as you are iterating over it. This means that when you reach the end of the list, it is now shorter because you're removed elements. You should (generally) avoid removing elements while you are looping over lists.</p>\n"}, {"tags": [], "owner": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "is_accepted": false, "score": 1, "last_activity_date": 1477520905, "creation_date": 1477520905, "answer_id": 40273134, "question_id": 40273050, "link": "https://stackoverflow.com/questions/40273050/creating-a-function-that-removes-duplicates-in-list/40273134#40273134", "title": "Creating a function that removes duplicates in list", "body": "<p>I know this does not fix your current script, but would something like this work?</p>\n\n<pre><code>def remove(lst):\n    unique=[]\n    for i in lst:\n        if i not in unique: unique.append(i)\n    return unique\n</code></pre>\n\n<p>Just simply looping through, creating another list and checking for membership? </p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1477520956, "creation_date": 1477520956, "answer_id": 40273142, "question_id": 40273050, "link": "https://stackoverflow.com/questions/40273050/creating-a-function-that-removes-duplicates-in-list/40273142#40273142", "title": "Creating a function that removes duplicates in list", "body": "<p>You got it the first time: <strong>len(lst)</strong> is evaluated only when you enter the loop.  If you want it re-evaluated, try the <strong>while</strong> version:</p>\n\n<pre><code>i = 0\nwhile i &lt; len(lst):\n    ...\n    i += 1\n</code></pre>\n\n<p>Next, you get to worry about another problem: you increment i <em>only</em> when you don't delete an item.  When you do delete, shortening the list gets you to the next element. </p>\n\n<pre><code>i = 0\nwhile i &lt; len(lst):\n    aux = lst[0:i] + lst[i+1:len(lst)]\n    if lst[i] in aux:\n        del(lst[i])\n    else:\n        i += 1\n</code></pre>\n\n<p>I think that should solve your problem ... using the logic you intended.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 7067541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWlLv.jpg?s=128&g=1", "display_name": "Arthur Zopellaro", "link": "https://stackoverflow.com/users/7067541/arthur-zopellaro"}, "is_accepted": false, "score": 0, "last_activity_date": 1477521419, "last_edit_date": 1495535248, "creation_date": 1477521419, "answer_id": 40273218, "question_id": 40273050, "link": "https://stackoverflow.com/questions/40273050/creating-a-function-that-removes-duplicates-in-list/40273218#40273218", "title": "Creating a function that removes duplicates in list", "body": "<pre><code>def remove(lst):\n    new_list = []\n    for i in lst:\n        if i not in new_list:\n            new_list.append(i)\n    return new_list\n</code></pre>\n\n<p>You should append the values to a secondary list. As Bobbyrogers <a href=\"https://stackoverflow.com/a/40273108/7067541\">said</a>, it's not a good idea to iterate over a list that is changing.</p>\n"}, {"tags": [], "owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "is_accepted": false, "score": 0, "last_activity_date": 1477521655, "creation_date": 1477521655, "answer_id": 40273265, "question_id": 40273050, "link": "https://stackoverflow.com/questions/40273050/creating-a-function-that-removes-duplicates-in-list/40273265#40273265", "title": "Creating a function that removes duplicates in list", "body": "<p>You can also try this:</p>\n\n<pre><code>lst = [1,2,3,3,4,4,5,6]\nlst2 = []\nfor i in lst:\n    if i not in lst2:\n        lst2.append(i)\nprint(lst2)\n[1, 2, 3, 4, 5, 6]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4307777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1477522335, "creation_date": 1477520475, "last_edit_date": 1477520692, "question_id": 40273050, "link": "https://stackoverflow.com/questions/40273050/creating-a-function-that-removes-duplicates-in-list", "title": "Creating a function that removes duplicates in list", "body": "<p>I'm trying to manually make a function that removes duplicates from a list. I know there is a Python function that does something similar (<code>set()</code>), but I want to create my own. This is what I have:</p>\n\n<pre><code>def remove(lst):\n\nfor i in range(len(lst)):\n    aux = lst[0:i] + lst[i+1:len(lst)]\n    if lst[i] in aux:\n        del(lst[i])\n\nreturn lst\n</code></pre>\n\n<p>I was trying something like creating a sub-list with all the items except the one the for is currently on, and then check if the item is still in the list. If it is, remove it.</p>\n\n<p>The problem is that it gives me an index out of range error. Does the <code>for i in range(len(lst)):</code> line not update every time it starts over? Since I'm removing items from the list, the list will be shorter, so for a list that has 10 items and 2 duplicates, it will go up to index 9 instead of stopping on the 7th.</p>\n\n<p>Is there anyway to fix this, or should I just try doing this is another way?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1477521404, "post_id": 40273049, "comment_id": 67806235, "body": "To process an n-dimensional array, you need n nested loops."}, {"owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477521514, "post_id": 40273049, "comment_id": 67806281, "body": "can you show the code to realize the 4-D matrix?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477521547, "post_id": 40273049, "comment_id": 67806289, "body": "it&#39;s the same as for 2-D, just add loops for <code>kk</code> and <code>ll</code>."}, {"owner": {"reputation": 1243, "user_id": 1682673, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c93dd597cdf4fa73876e42f96f17b2b?s=128&d=identicon&r=PG", "display_name": "rnbguy", "link": "https://stackoverflow.com/users/1682673/rnbguy"}, "edited": false, "score": 0, "creation_date": 1477521718, "post_id": 40273049, "comment_id": 67806334, "body": "for multi-dimension matrix and these kind of loops, ndarray from numpy would be best choice."}, {"owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "edited": false, "score": 0, "creation_date": 1477521729, "post_id": 40273049, "comment_id": 67806339, "body": "You mean the code structure is valid in Python?  It seems I need to make the index range from 0 to max-1 and delete the two &#39;end&#39; . I am new to Python programming."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1477522262, "post_id": 40273049, "comment_id": 67806470, "body": "@jingweimo, yes I think they mean that the logic of your pseudocode is correct. And yes, that Python implementation is a correct translation"}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1482627387, "post_id": 40273049, "comment_id": 69839656, "body": "Accept the answer if it solves your problem."}], "answers": [{"tags": [], "owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "is_accepted": false, "score": 1, "last_activity_date": 1477523861, "last_edit_date": 1477523861, "creation_date": 1477522969, "answer_id": 40273488, "question_id": 40273049, "link": "https://stackoverflow.com/questions/40273049/how-to-create-a-for-loop-to-process-a-multid-dimensional-matrix-in-python/40273488#40273488", "title": "How to create a for loop to process a multid-dimensional matrix in Python", "body": "<p>If you have 4-dimensional matrix, you should use 4 indexes:</p>\n\n<pre><code>for i in range(m):\n    for j in range(n):\n        for k in range(p):\n            for l in range(q):\n                myFunction(A[i,j,k,l])\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>A = [[[[6,1],[4,3]],[[4,8],[0,9]]],[[[1,5],[3,9]],[[5,5],[2,7]]]]\ns = 0\nfor i in range(2):\n    for j in range(2):\n        for k in range(2):\n            for l in range(2):\n                s += A[i][j][k][l]\nprint(s)\n</code></pre>\n"}], "owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477523861, "creation_date": 1477520471, "last_edit_date": 1477522166, "question_id": 40273049, "link": "https://stackoverflow.com/questions/40273049/how-to-create-a-for-loop-to-process-a-multid-dimensional-matrix-in-python", "title": "How to create a for loop to process a multid-dimensional matrix in Python", "body": "<p>Assume I have a four-dimensional matrix A(:, :, :, :). I want to update the matrix by performing some processing on it. The pseudo codes are presented as follows:</p>\n\n<pre><code>for ii = 1:m\n    for jj = 1:n\n        A = myFunction(A(:,:,jj,ii))\n    end\nend\n</code></pre>\n\n<p>To implement the for-loop processing in Python: </p>\n\n<pre><code>for ii in range(m):\n    for jj in range(n):\n        A = myFunction(A[:,:,jj,ii])\n</code></pre>\n\n<p>Is that correct? </p>\n"}, {"tags": ["python", "class", "methods", "rectangles"], "comments": [{"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "edited": false, "score": 1, "creation_date": 1477520555, "post_id": 40273003, "comment_id": 67805933, "body": "In your <code>contains</code> method, you aren&#39;t actually using the <code>posn</code> argument. You need to test <code>posn</code> against the bounds of the rectangle."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477520687, "post_id": 40273003, "comment_id": 67805972, "body": "@JETM <code>a &gt; a &gt;= a</code> is valid in Python but mostly is not in other languages."}, {"owner": {"reputation": 49, "user_id": 5885695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154555296967468/picture?type=large", "display_name": "Chris Avina", "link": "https://stackoverflow.com/users/5885695/chris-avina"}, "reply_to_user": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "edited": false, "score": 0, "creation_date": 1477523198, "post_id": 40273003, "comment_id": 67806746, "body": "@DKrueger Am I not passing it as the class Point(3,3) to the rectangle &#39;r&#39;?  So the Point I am passing when calling it in print(r.contains(Point(3,3))) is (3,3) and the size of the rectangle is domain [0 10), and range is [0, 5) in my original rectangle r = Rectangle(Point(0, 0), 10, 5)?"}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "edited": false, "score": 0, "creation_date": 1477610413, "post_id": 40273003, "comment_id": 67849744, "body": "@ChrisAvina Yes, you are passing it in, but you never use it in the method. Nowhere in the method is the location of <code>posn</code> actually used. Maybe instead of <code>self.corner.x</code>, you meant to use <code>posn.x</code> (and the same for <code>y</code>)?"}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 11644725, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-USPEDr3PL8s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-Tiut6iOrGDcU0YJVskiB6Aowkw/mo/photo.jpg?sz=128", "display_name": "Gabriel Sales", "link": "https://stackoverflow.com/users/11644725/gabriel-sales"}, "is_accepted": false, "score": 0, "last_activity_date": 1583939722, "creation_date": 1583939722, "answer_id": 60639207, "question_id": 40273003, "link": "https://stackoverflow.com/questions/40273003/python-calling-on-method-in-point-to-check-if-point-is-in-rectangle/60639207#60639207", "title": "Python - calling on method in Point to check if Point is in Rectangle", "body": "<pre><code>class Point:\n    def __init__(self, x=0, y=0):\n        self.x = x\n        self.y = y\n\n\nclass Rectangle:\n    def __init__(self, posn, w, h):\n        self.corner = posn\n        self.width = w\n        self.height = h\n\n\n    def contains(self, point):\n        return self.width &gt; point.x &gt;= self.corner.x and self.height &gt; point.y &gt;= self.corner.y\n</code></pre>\n\n<p>What the <code>contains</code> method is doing is:</p>\n\n<p>1) Checking if the given point's x position is less than the rectangle's width and larger than or equal to the rectangle's corner's x position:</p>\n\n<pre><code>self.width &gt; point.x &gt;= self.corner.x\n</code></pre>\n\n<p>2) And then doing the same thing for y and the height:</p>\n\n<pre><code>self.height &gt; point.y &gt;= self.corner.y\n</code></pre>\n\n<p>3) Put together it looks like:</p>\n\n<pre><code>def contains(self, point):\n    return self.width &gt; point.x &gt;= self.corner.x and self.height &gt; point.y &gt;= self.corner.y\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5885695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154555296967468/picture?type=large", "display_name": "Chris Avina", "link": "https://stackoverflow.com/users/5885695/chris-avina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1583939722, "creation_date": 1477520198, "question_id": 40273003, "link": "https://stackoverflow.com/questions/40273003/python-calling-on-method-in-point-to-check-if-point-is-in-rectangle", "title": "Python - calling on method in Point to check if Point is in Rectangle", "body": "<p>I'm learning classes and methods in Python and I'm doing the Rectangle/Point exercise in 'How to Think Like a Computer Scientist'. I've researched, but have not come across someone the same problem that I'm running into.\nI'm having a problem calling on self.width and self.height in my Rectangle Class.  What's strange is that I have no problem calling on it in my other methods that I wrote.  When I debug, it shows the instance of my width and height as nothing and now I'm at my last resort - here!</p>\n\n<p>Here is the code I'm using:</p>\n\n<pre><code>class Point:\n    \"\"\"Sets up a class point. If user doesn't supply args it starts at\n     0,0)\"\"\"\n    def __init__(self, x = 0, y = 0):\n        self.x = x\n        self.y = y\n\nclass Rectangle:\n    '''A class to create rectangle objects '''\n\n    def __init__(self, posn, w, h):\n        self.corner = posn  '''position of rectangle as tuple (Point Class)'''\n        self.width = w      '''Sets self.width as w'''\n        self.height = h     '''Sets self.height as h'''\n\n    '''Added grow and move methods to display how I'm calling\n    self.width/height and self.corner.x/y. These both work when I call them'''\n\n    def grow(self, delta_width, delta_height):\n        '''Grow or shrink object by deltas'''\n        self.width += delta_width\n        self.height += delta_height\n\n    def move(self, dx, dy):\n        '''Move this object by the deltas'''\n        self.corner.x += dx\n        self.corner.y += dy\n\n    '''This is where I'm having the problem. '''\n    def contains(self, posn):\n        return (self.width &gt; self.corner.x &gt;= 0\n        and self.height &gt; self.corner.y &gt;= 0)\n\nr = Rectangle(Point(0, 0), 10, 5)\n\nprint(r.contains(Point(0,0))) '''Should return True'''\nprint(r.contains(Point(3,3))) '''Should return True'''\nprint(r.contains(Point(3, 7))) '''Should return False, but returns True'''\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 1, "creation_date": 1477521129, "post_id": 40272979, "comment_id": 67806127, "body": "What&#39;s the output of just <code>settings.BASE_DIR</code>?"}, {"owner": {"reputation": 416, "user_id": 2410376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37bd02becb3445230d2ce1ef4c108d19?s=128&d=identicon&r=PG", "display_name": "A R", "link": "https://stackoverflow.com/users/2410376/a-r"}, "reply_to_user": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 0, "creation_date": 1477666331, "post_id": 40272979, "comment_id": 67872561, "body": "If I use &quot;python manage.py shell&quot;, I get the full absolute path. But if I print it from the code in the view, I get a . (just a point)."}, {"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 0, "creation_date": 1477670661, "post_id": 40272979, "comment_id": 67875160, "body": "Make sure that you&#39;re not using root privil&#232;ge when you create your project."}, {"owner": {"reputation": 416, "user_id": 2410376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37bd02becb3445230d2ce1ef4c108d19?s=128&d=identicon&r=PG", "display_name": "A R", "link": "https://stackoverflow.com/users/2410376/a-r"}, "reply_to_user": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 0, "creation_date": 1477684529, "post_id": 40272979, "comment_id": 67881864, "body": "It&#39;s a windows machine and the project was created with an admin account. Could that be it?"}, {"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 0, "creation_date": 1477686177, "post_id": 40272979, "comment_id": 67882554, "body": "You&#39;re not connected as the same account that created the project?"}, {"owner": {"reputation": 416, "user_id": 2410376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37bd02becb3445230d2ce1ef4c108d19?s=128&d=identicon&r=PG", "display_name": "A R", "link": "https://stackoverflow.com/users/2410376/a-r"}, "reply_to_user": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 0, "creation_date": 1477941116, "post_id": 40272979, "comment_id": 67952401, "body": "Yes, I&#39;m using an admin account."}], "answers": [{"tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": true, "score": 3, "last_activity_date": 1477522333, "creation_date": 1477522333, "answer_id": 40273387, "question_id": 40272979, "link": "https://stackoverflow.com/questions/40272979/how-do-i-get-the-absolute-path-from-the-settings-file-in-django/40273387#40273387", "title": "How do I get the absolute path from the settings file in Django", "body": "<p>Use the following:</p>\n\n<pre><code>import os\nfrom django.conf import settings\n\nfolder_path = os.path.join(settings.BASE_DIR, 'somefolder')\n</code></pre>\n"}], "owner": {"reputation": 416, "user_id": 2410376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37bd02becb3445230d2ce1ef4c108d19?s=128&d=identicon&r=PG", "display_name": "A R", "link": "https://stackoverflow.com/users/2410376/a-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1296, "favorite_count": 0, "accepted_answer_id": 40273387, "answer_count": 1, "score": 0, "last_activity_date": 1477522333, "creation_date": 1477520093, "question_id": 40272979, "link": "https://stackoverflow.com/questions/40272979/how-do-i-get-the-absolute-path-from-the-settings-file-in-django", "title": "How do I get the absolute path from the settings file in Django", "body": "<p>I have a simple question:</p>\n\n<p>I have read a lot of answers in this forum on how to get a project's root directory. However I'm running into a problem: the path is just .</p>\n\n<p>For example:</p>\n\n<pre><code>from django.conf import settings\n\npath = settings.BASE_DIR + /somefolder/\n</code></pre>\n\n<p>the resulting value for path is just .</p>\n\n<p>I need the full path in order to save to that folder. </p>\n"}, {"tags": ["python", "numpy", "matplotlib", "spyder"], "comments": [{"owner": {"reputation": 48633, "user_id": 832621, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xOSw3.png?s=128&g=1", "display_name": "Saullo G. P. Castro", "link": "https://stackoverflow.com/users/832621/saullo-g-p-castro"}, "edited": false, "score": 0, "creation_date": 1477521058, "post_id": 40272874, "comment_id": 67806090, "body": "you could try to set <code>plt.ioff()</code> before the script"}, {"owner": {"reputation": 27, "user_id": 5289209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645d3522a0453518b10e470358e4135b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Kwas", "link": "https://stackoverflow.com/users/5289209/a-kwas"}, "reply_to_user": {"reputation": 48633, "user_id": 832621, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xOSw3.png?s=128&g=1", "display_name": "Saullo G. P. Castro", "link": "https://stackoverflow.com/users/832621/saullo-g-p-castro"}, "edited": false, "score": 0, "creation_date": 1477523926, "post_id": 40272874, "comment_id": 67806946, "body": "It doesn&#39;t work. When I set &quot;inline&quot; in graphic backend options it works OK but I want to plot in another windows"}], "owner": {"reputation": 27, "user_id": 5289209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645d3522a0453518b10e470358e4135b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Kwas", "link": "https://stackoverflow.com/users/5289209/a-kwas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477519596, "creation_date": 1477519596, "question_id": 40272874, "link": "https://stackoverflow.com/questions/40272874/plot-chart-before-script-end", "title": "Plot chart before script end", "body": "<p>I have a problem with ploting in Python</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nplt.plot(np.arange(10),np.arange(10))\nplt.show(0)\n#another computation\n</code></pre>\n\n<p>I am using Spyder editor with graphic backend set to automatic. I want to make plot in new window. The problem is the plot appear after the end of the script. How to make it appear immediately?</p>\n"}, {"tags": ["python", "data-manipulation", "bigdata"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 5072022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ritSA.jpg?s=128&g=1", "display_name": "StayLearning", "link": "https://stackoverflow.com/users/5072022/staylearning"}, "edited": false, "score": 0, "creation_date": 1477522107, "post_id": 40273088, "comment_id": 67806426, "body": "Your answer works properly. One question. Which one is more efficient: processing line by line or reading in in chunks and process chunk by chunk or reading the file and process them at once (if memory permits)? I am still curious about how the chunks would work. So I will leave the question open for a while. If no better answer, will take yours. Thanks."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 353, "user_id": 5072022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ritSA.jpg?s=128&g=1", "display_name": "StayLearning", "link": "https://stackoverflow.com/users/5072022/staylearning"}, "edited": false, "score": 0, "creation_date": 1477524558, "post_id": 40273088, "comment_id": 67807097, "body": "I doubt there would be much difference, as the OS is already doing input buffering under the hood."}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": true, "score": 0, "last_activity_date": 1477521786, "last_edit_date": 1477521786, "creation_date": 1477520695, "answer_id": 40273088, "question_id": 40272817, "link": "https://stackoverflow.com/questions/40272817/read-data-in-chunks-and-keep-one-row-for-each-id-in-python/40273088#40273088", "title": "Read data in chunks and keep one row for each ID in Python", "body": "<p>Keep track of the data in a dictionary of this format:</p>\n\n<pre><code>data = {\n    ID: [value, 'string'],\n}\n</code></pre>\n\n<p>As you read each line from the file, see if that ID is already in the dict.  If not, add it; if it is, and the current ID is bigger, replace it in the dict.</p>\n\n<p>At the end, your dict should have every biggest ID.</p>\n\n<pre><code># init to empty dict\ndata = {}\n\n# open the input file\nwith open('file.txt', 'r') as fp:\n\n    # read each line\n    for line in fp:\n\n          # grab ID, value, string\n          item_id, item_value, item_string = line.split()\n\n          # convert ID and value to integers\n          item_id = int(item_id)\n          item_value = int(item_value)\n\n          # if ID is not in the dict at all, or if the value we just read\n          # is bigger, use the current values\n          if item_id not in data or item_value &gt; data[item_id][0]:\n              data[item_id] = [item_value, item_string]\n\nfor item_id in data:\n    print item_id, data[item_id][0], data[item_id][1]\n</code></pre>\n\n<p>Dictionaries don't enforce any specific ordering of their contents, so at the end of your program when you get the data back out of the dict, it might not be in the same order as the original file (i.e. you might see ID 2 first, followed by ID 1).</p>\n\n<p>If this matters to you, you can use an <code>OrderedDict</code>, which retains the original insertion order of the elements.</p>\n\n<p>(Did you have something specific in mind when you said \"read by chunks\"?  If you meant <em>a specific number of bytes</em>, then you might run into issues if a chunk boundary happens to fall in the middle of a word...)</p>\n"}, {"tags": [], "owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "is_accepted": false, "score": 0, "last_activity_date": 1505830371, "last_edit_date": 1505830371, "creation_date": 1505828066, "answer_id": 46301919, "question_id": 40272817, "link": "https://stackoverflow.com/questions/40272817/read-data-in-chunks-and-keep-one-row-for-each-id-in-python/46301919#46301919", "title": "Read data in chunks and keep one row for each ID in Python", "body": "<p><strong>Code</strong></p>\n\n<pre><code>import csv\nimport itertools as it\nimport collections as ct\n\n\nwith open(\"test.csv\") as f:                                \n    reader = csv.DictReader(f, delimiter=\" \")              # 1\n    for k, g in it.groupby(reader, lambda d: d[\"ID\"]):     # 2\n        print(max(g, key=lambda d: float(d[\"value\"])))     # 3\n\n# {'value': '105', 'string': 'abc', 'ID': '1'}\n# {'value': '160', 'string': 'oemd', 'ID': '2'}\n</code></pre>\n\n<hr>\n\n<p><strong>Details</strong></p>\n\n<p>The <code>with</code> block ensures safe opening and closing of file <code>f</code>.  The file is iterable allowing you to loop over it or ideally apply <code>itertools</code>.</p>\n\n<ol>\n<li><p>For each line of <code>f</code>, <code>csv.DictReader</code> splits the data and maintains header-row information as key-value pairs of a dictionary ,e.g. <code>[{'value': '105', 'string': 'abc', 'ID': '1'}, ...</code></p></li>\n<li><p>This data is iterable and passed to <code>groupby</code> that chunks all of the data by <code>ID</code>. See <a href=\"https://stackoverflow.com/a/45873519/4531270\">this post from more details on <code>how groupby works</code></a>.</p></li>\n<li><p>The the <code>max()</code> builtin combined with a special key function returns the dicts with the largest <code>\"value\"</code>.  See <a href=\"https://www.programiz.com/python-programming/methods/built-in/max\" rel=\"nofollow noreferrer\">this tutorial for more details on the <code>max()</code> function</a>.</p></li>\n</ol>\n"}], "owner": {"reputation": 353, "user_id": 5072022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ritSA.jpg?s=128&g=1", "display_name": "StayLearning", "link": "https://stackoverflow.com/users/5072022/staylearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 40273088, "answer_count": 2, "score": 1, "last_activity_date": 1505830371, "creation_date": 1477519208, "last_edit_date": 1506102531, "question_id": 40272817, "link": "https://stackoverflow.com/questions/40272817/read-data-in-chunks-and-keep-one-row-for-each-id-in-python", "title": "Read data in chunks and keep one row for each ID in Python", "body": "<p>Imagine we have a big file with rows as follows</p>\n\n<pre><code>ID     value     string\n1      105       abc \n1      98        edg\n1      100       aoafsk\n2      160       oemd\n2      150       adsf \n...\n</code></pre>\n\n<p>Say the file is named file.txt and is separated by tab.</p>\n\n<p>I want to keep the largest value for each ID. The expected output is</p>\n\n<pre><code>ID     value     string\n1      105       abc \n2      160       oemd\n...\n</code></pre>\n\n<p>How can I read it by chunks and process the data? If I read the data in chunks, how can I make sure at the end of each chunk the records are complete for each ID?</p>\n"}, {"tags": ["python", "django-models"], "comments": [{"owner": {"reputation": 78904, "user_id": 46914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d47d0397605e4b9cab9fd8fce027e3b5?s=128&d=identicon&r=PG", "display_name": "Soviut", "link": "https://stackoverflow.com/users/46914/soviut"}, "edited": false, "score": 1, "creation_date": 1477541180, "post_id": 40272812, "comment_id": 67810921, "body": "Please clean up your indentation. It makes it very difficult to debug."}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 6238475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IKvn0.png?s=128&g=1", "display_name": "Zach Zundel", "link": "https://stackoverflow.com/users/6238475/zach-zundel"}, "is_accepted": false, "score": 1, "last_activity_date": 1477541107, "creation_date": 1477541107, "answer_id": 40275934, "question_id": 40272812, "link": "https://stackoverflow.com/questions/40272812/django-models-are-not-created-in-db-after-running-migration/40275934#40275934", "title": "Django Models are not created in DB after running migration", "body": "<p>Your models do not extend the Django <code>django.db.models.Model</code> class.</p>\n\n<p>You import <code>models</code> from <code>django.db</code> at the top of your models file, so you just need to change your <code>models.py</code> file as follows:</p>\n\n<pre><code>class EnergyOTAPI(models.Model):\n    key = models.CharField(max_length=255)\n\nclass PowerPrediction(models.Model):\n    created = models.DateField()\n    entry = models.IntegerField('max_length=500')\n    value = models.IntegerField('max_length=500')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6906597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae831541a6f1a82c2b07ca28d93d0ac?s=128&d=identicon&r=PG&f=1", "display_name": "karthik", "link": "https://stackoverflow.com/users/6906597/karthik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477541107, "creation_date": 1477519192, "last_edit_date": 1477538968, "question_id": 40272812, "link": "https://stackoverflow.com/questions/40272812/django-models-are-not-created-in-db-after-running-migration", "title": "Django Models are not created in DB after running migration", "body": "<p>I want to fetch data from an API and store it in DB. But the api url should not be hardcoded in view. So I have created api.py in which calling the url request as below:</p>\n\n<pre><code>class API(object):\ndef __init__(self, key, base_url=None):\n    self._key = key\n    self._base_url = base_url\ndef get_predictor(self):\n    payload = {'key': self._key, 'results':'100'}\n    response = requests.get(\n    self._get_url(),\n    data=payload,\n    timeout=(3.1, 10))\n    self._get_url_predictor()\ndef _get_url_predictor(self):\n    return '/'.join([self._base_url, 'api', 'meter', 'feed.json'])\n</code></pre>\n\n<p>Then I have created a file predictor were I am passing parameter to url and fetching details from API as below:</p>\n\n<pre><code>import urllib,json\nfrom django.conf import settings\nfrom AppSerializer.models import EnergyOTAPI, PowerPrediction\nfrom AppSerializer.meter.api import API\ndef update_api_predictor():\nfor meter in EnergyOTAPI.objects.all():\n            get_api_predector_data(meter)\ndef get_api_predector_data(meter):\napi = API (\n    key=meter.key,\n    base_url=settings.SOURCE_ENDPOINTS['url_api'][0]\n)\nendpoint = api.get_predictor()\nserialized_data = urllib.request.urlopen(endpoint).read()\noutput = json.loads(serialized_data)\ndef _create_sp_power_prediction_from_api():\n    created_at = output['channels'][0]['feeds'][0]['created_at']\n    entry_id = output['channels'][0]['feeds'][0]['entry_id']\n    value = output['channels'][0]['feeds'][0]['value']\n    PowerPrediction.objects.create(created=created_at,\n                                        entry=entry_id,\n                                        value=value)\n</code></pre>\n\n<p>Then for those fields I created models, serializer, views and url as below.</p>\n\n<p>MOdels:</p>\n\n<pre><code>from django.db import models\nclass EnergyOTAPI:\nkey = models.CharField(max_length=255)\nclass PowerPrediction:\ncreated = models.DateField()\nentry = models.IntegerField('max_length=500')\nvalue = models.IntegerField('max_length=500')\n</code></pre>\n\n<p>Serializer:</p>\n\n<pre><code>from rest_framework import serializers\n\nfrom AppSerializer.models import PowerPrediction\n\nclass PowerPredictonSerializer(serializers.HyperlinkedModelSerializer):\n    source = serializers.ReadOnlyField(source='source.pk')\n    class Meta:\n        model = PowerPrediction\n        fields = ('created',\n                  'entry',\n                  'value')\n</code></pre>\n\n<p>Views:</p>\n\n<pre><code>from rest_framework.decorators import api_view\nfrom rest_framework import generics, permissions, viewsets\nfrom rest_framework.reverse import reverse\nfrom rest_framework.response import Response\nfrom AppSerializer.models import PowerPrediction\nfrom AppSerializer.serializer import PowerPredictonSerializer\n\n@api_view(['GET'])\ndef api_root(request, format=None):\nreturn Response({\n    'locations': reverse('solar:location-list', request=request,      format=format),\n 'sources': reverse('source-list', request=request, format=format)\n})\n\nclass PowerPredictionList(generics.ListAPIView):\nqueryset = PowerPrediction.objects.all()\nserializer_class = PowerPredictonSerializer\ndef perform_create(self, serializer):\n    serializer.save(location=self.request.location)\n\nclass PowerPredictionDetail(generics.RetrieveDestroyAPIView):\nqueryset = PowerPrediction.objects.all()\nserializer_class = PowerPredictonSerializer\n</code></pre>\n"}, {"tags": ["python", "2d", "polygon", "surface", "abaqus"], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 3203246, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff559ad8929b01e3ef1a0c743f670743?s=128&d=identicon&r=PG&f=1", "display_name": "johnzilla", "link": "https://stackoverflow.com/users/3203246/johnzilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1482950534, "creation_date": 1482950534, "answer_id": 41367909, "question_id": 40272766, "link": "https://stackoverflow.com/questions/40272766/how-to-draw-polygons-using-abaqus-python-script/41367909#41367909", "title": "How to draw polygons using Abaqus python script", "body": "<p>Try recording a macro. Manually create the model using Abaqus CAE. I assumed you're doing a 2-D model, so your geometry will probably be:</p>\n\n<ol>\n<li>A solid rectangle.\n2a. Planar cut on the rectangle created through a sketch.\n2b. Alternatively, you can use the \"create wire\" feature to input your shape coordinates (right-click to read coordinates from a text file). Use merge scheme \"Separate wire\". Then, use the \"Partition\" tool to partition the holes, and then use \"Geometry Edit\" to remove the undesired faces. </li>\n</ol>\n\n<p>Anyways, the macro recorder will help prototype the code that you will need to generate. Once you do that, you're going to need to do typical Python file open/read operations to read the input coordinates and develop the program to generate the model and mesh. Or, you can extruciatingly generate your model manually using the method I outlined above. There's a lot of ways to skin this chicken. </p>\n"}], "owner": {"reputation": 13, "user_id": 4406920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8413d552a930e5e2f6052b8d6bd4d65?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4406920/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482950534, "creation_date": 1477518954, "last_edit_date": 1477522854, "question_id": 40272766, "link": "https://stackoverflow.com/questions/40272766/how-to-draw-polygons-using-abaqus-python-script", "title": "How to draw polygons using Abaqus python script", "body": "<p>I have (X,Y) coordinates of polygons as shown in the picture <a href=\"https://i.stack.imgur.com/sMNMd.png\" rel=\"nofollow\">pores image</a>. How can I import them to Abaqus and how to create a surface in a way that subtract the internal shapes (polygon1,poly2....) from the external shape (the frame (a rectangle)). Rectangle-poly1-poly2....</p>\n\n<p><a href=\"https://i.stack.imgur.com/hLxMx.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/hLxMx.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "dataframe", "data-cleaning"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1477519572, "creation_date": 1477519572, "answer_id": 40272872, "question_id": 40272721, "link": "https://stackoverflow.com/questions/40272721/column-in-index-format-to-dataframe/40272872#40272872", "title": "column (in index format) to dataframe?", "body": "<p>consider <code>s</code></p>\n\n<pre><code>s = pd.Series([\n      \"[u'Basketball', 'Swimming', 'Gym']\",\n      \"[u'Gym', u'Soccer', u'Football']\",\n      \"[u'Ballet', u'Basketball', u'Volleyball']\"\n    ])\ns\n\n0           [u'Basketball', 'Swimming', 'Gym']\n1             [u'Gym', u'Soccer', u'Football']\n2    [u'Ballet', u'Basketball', u'Volleyball']\ndtype: object\n</code></pre>\n\n<p>quickest way is to <code>apply</code> <code>eval</code></p>\n\n<pre><code>s.apply(eval)\n\n0         [Basketball, Swimming, Gym]\n1             [Gym, Soccer, Football]\n2    [Ballet, Basketball, Volleyball]\ndtype: object\n</code></pre>\n\n<p>to get a dataframe</p>\n\n<pre><code>s.apply(eval).apply(pd.Series)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/shxld.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/shxld.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 368, "user_id": 6692757, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1761b168db288a0aa80f79b1bd530412?s=128&d=identicon&r=PG&f=1", "display_name": "noiivice", "link": "https://stackoverflow.com/users/6692757/noiivice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 40272872, "answer_count": 1, "score": 2, "last_activity_date": 1477519572, "creation_date": 1477518798, "question_id": 40272721, "link": "https://stackoverflow.com/questions/40272721/column-in-index-format-to-dataframe", "title": "column (in index format) to dataframe?", "body": "<p>I have a column in my dataframe that is formatted like an index: </p>\n\n<pre><code>0      [u'Basketball', u'Swimming', u'Gym']\n1      [u'Gym', u'Soccer', u'Football']\n2      [u'Ballet', u'Basketball', u'Volleyball']\n</code></pre>\n\n<p>Is there an easy way for me to clean this up (remove the u, and the square brackets) then  split them by (',') such that sports are grouped to three columns?</p>\n"}, {"tags": ["python", "mysql", "python-3.x", "mysql-python"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477519154, "post_id": 40272639, "comment_id": 67805494, "body": "print <code>row</code> and see what you have in row. <code>execute()</code> expects tuple with 11 elements."}, {"owner": {"reputation": 175, "user_id": 4881292, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10206679260160201/picture?type=large", "display_name": "Evy555", "link": "https://stackoverflow.com/users/4881292/evy555"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477519784, "post_id": 40272639, "comment_id": 67805671, "body": "when I print row I get 11 different column names, but I don&#39;t think it is a tuple. It&#39;s printing them 1 by 1."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1477526887, "post_id": 40272639, "comment_id": 67807694, "body": "Why the overhead of pandas? Csv module would nicely do. And if using, pandas consider its <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_sql.html\" rel=\"nofollow noreferrer\">to_sql</a> to bulk append in one call. Even still MySQL has the <a href=\"http://dev.mysql.com/doc/refman/5.7/en/load-data.html\" rel=\"nofollow noreferrer\">LOAD DATA INFILE</a> command for text files."}, {"owner": {"reputation": 1137, "user_id": 2178980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NwxMq.jpg?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/2178980/eugene"}, "edited": false, "score": 0, "creation_date": 1478859718, "post_id": 40272639, "comment_id": 68330128, "body": "mysqldb has a Python 3 version: <a href=\"https://pypi.python.org/pypi/mysqlclient\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/mysqlclient</a> --- works exactly the same. Also, not sure if this is a mysql.connector thing (which is CONSIDERABLY slower by the way), but does %d even work? mysqldb only allows %s, regardless of type... also, row needs to be strictly a tuple (again, mysqldb, not sure but worth mentioning...) Also, don&#39;t use quotation marks around your params like suggested below... let me know if you still need help and I&#39;ll sort you out..."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 4881292, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10206679260160201/picture?type=large", "display_name": "Evy555", "link": "https://stackoverflow.com/users/4881292/evy555"}, "edited": false, "score": 0, "creation_date": 1477521050, "post_id": 40272960, "comment_id": 67806088, "body": "That helps me break up each row. But the list is still not able to be inputted into mysql. I&#39;m getting the same error. Does this list not input correctly as 11 values for the expectation of 11 values in the execute?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 175, "user_id": 4881292, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10206679260160201/picture?type=large", "display_name": "Evy555", "link": "https://stackoverflow.com/users/4881292/evy555"}, "edited": false, "score": 0, "creation_date": 1477521698, "post_id": 40272960, "comment_id": 67806330, "body": "It works if I use quotation marks <code>(&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;)</code>"}, {"owner": {"reputation": 175, "user_id": 4881292, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10206679260160201/picture?type=large", "display_name": "Evy555", "link": "https://stackoverflow.com/users/4881292/evy555"}, "edited": false, "score": 0, "creation_date": 1477525009, "post_id": 40272960, "comment_id": 67807221, "body": "I had to make some tweaks to my code. I got it to run with no error, but the table is not populating with anything. I&#39;ve added my new code above."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 175, "user_id": 4881292, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10206679260160201/picture?type=large", "display_name": "Evy555", "link": "https://stackoverflow.com/users/4881292/evy555"}, "edited": false, "score": 0, "creation_date": 1477526065, "post_id": 40272960, "comment_id": 67807456, "body": "You need <code>cnx.commit()</code> to send data to database."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1477520022, "creation_date": 1477520022, "answer_id": 40272960, "question_id": 40272639, "link": "https://stackoverflow.com/questions/40272639/importing-csv-into-mysql-python-3-x/40272960#40272960", "title": "Importing CSV into Mysql Python 3.x", "body": "<p>You have wrong <code>row</code>.</p>\n\n<pre><code> for row in csv_data \n</code></pre>\n\n<p>gives you column name in <code>row</code></p>\n\n<p>To get row you need <code>iterrows()</code></p>\n\n<pre><code> for row in csv_data.iterrows():\n</code></pre>\n\n<p>But this <code>row</code> has not only <code>values</code> but other information. You values are in <code>row[1]</code> but as <code>Series</code> object so you need <code>values</code> to get values as list</p>\n\n<pre><code> for row in csv_data.iterrows():\n     print( row[1].values )\n</code></pre>\n\n<hr>\n\n<p>Full working example:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame([[1,2,3], [4,5,6]], columns=['a','b','c'])\n\nprint(df)\n\nfor row in df.iterrows():\n    print('type:', type(row[1]))\n    print('values:', row[1].values)\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>   a  b  c\n0  1  2  3\n1  4  5  6\ntype: &lt;class 'pandas.core.series.Series'&gt;\nvalues: [1 2 3]\ntype: &lt;class 'pandas.core.series.Series'&gt;\nvalues: [4 5 6]\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 4881292, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10206679260160201/picture?type=large", "display_name": "Evy555", "link": "https://stackoverflow.com/users/4881292/evy555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3575, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1477525098, "creation_date": 1477518414, "last_edit_date": 1477525098, "question_id": 40272639, "link": "https://stackoverflow.com/questions/40272639/importing-csv-into-mysql-python-3-x", "title": "Importing CSV into Mysql Python 3.x", "body": "<p>I'm trying to import a csv file into mysql using python for practice. I believe I've downloaded the right libraries. Every time I run my code I get the error: </p>\n\n<p><strong>mysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)' at line 1</strong> </p>\n\n<p>I can't figure out why this won't work and all answers seem to be using mysqldb, which doesn't support python 3.x. </p>\n\n<p>My code: </p>\n\n<pre><code>import mysql.connector\nimport pandas as pd\n\ncnx = mysql.connector.connect(user='root', password='comeonin', host='127.0.0.1', database='boxresults')\ncursor = cnx.cursor()\ncsv_data = pd.read_csv('Betting/boxresults3.csv')\n\nfor row in csv_data:\n    cursor.execute(\"INSERT INTO table1(Week, Day, Date, Winner, Loser, PtsW, PtsL, YdsW, TOW, YdsL, TOL) VALUES(%s,%s,%s,%s,%s,%s,%s,%s,%s,%s, %s)\", row)\n\n\ncursor.close() \ncnx.close() \n</code></pre>\n\n<p>New Code:</p>\n\n<pre><code>import mysql.connector\nimport pandas as pd\n\ncnx = mysql.connector.connect(user='root', password='comeonin', host='127.0.0.1', database='boxresults')\ncursor = cnx.cursor()\ncsv_data = pd.read_csv('Betting/boxresults3.csv') \n\nfor row in csv_data.iterrows():\n    list = row[1].values\n    cursor.execute(\"INSERT INTO table1(Week, Day, Date, Winner, Loser, PtsW, PtsL, YdsW, TOW, YdsL, TOL) VALUES('%d','%s','%s','%s','%s','%d','%d','%d','%d','%d', '%d')\" % tuple(list))\n\ncursor.close() \ncnx.close() \n</code></pre>\n"}, {"tags": ["python", "variable-assignment"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477518959, "post_id": 40272594, "comment_id": 67805415, "body": "@Prune: None of the answers there discuss the kind of interference between assignments that shows up in this question."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1477519434, "post_id": 40272594, "comment_id": 67805573, "body": "I just broke it down to the same logical sequence, and reproduced the user&#39;s problem.  In short, I <i>did</i> get the same interactions."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477520326, "post_id": 40272594, "comment_id": 67805849, "body": "@Prune: Are you seeing something in those answers that I&#39;m not? None of them say anything about how assignments and evaluations are interleaved on the LHS, or how that can lead to assignments interfering with each other."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477520690, "post_id": 40272594, "comment_id": 67805974, "body": "Yes.  This is the same process as outlined in the accepted answer, which devolves from the documentation you quoted, and the examples we have in our answers to this question."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477520974, "post_id": 40272594, "comment_id": 67806065, "body": "@Prune: The accepted answer doesn&#39;t say anything about how expressions on the LHS are handled. None of the assignment targets in the question or any answer involve expression evaluations. Reading and fully comprehending those answers would still not provide enough information to determine what happens in this question&#39;s case."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1477521083, "post_id": 40272594, "comment_id": 67806099, "body": "Related: <a href=\"http://stackoverflow.com/q/32127908\">Python Assignment Operator Precedence - (a, b) = a&#91;b&#93; = {}, 5</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477521318, "post_id": 40272594, "comment_id": 67806203, "body": "@Prune: The answers say that the right-hand side is evaluated before any assignments are performed, but they don&#39;t say anything about evaluating the left-hand side. From the information in those answers, it would be impossible to determine whether the <code>A[i] - 1</code> on the LHS in <code>A[i], A[A[i] - 1] = A[A[i] - 1], A[i]</code> is evaluated before the RHS, before the first assignment, or before the second assignment."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 1, "creation_date": 1477603299, "post_id": 40272594, "comment_id": 67847177, "body": "@BhargavRao: Yeah, that&#39;s a much better dupe."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1477519945, "creation_date": 1477519945, "answer_id": 40272945, "question_id": 40272594, "link": "https://stackoverflow.com/questions/40272594/python-multiple-assignment-issue-list/40272945#40272945", "title": "Python multiple assignment issue (list)", "body": "<p>The sequence of operations works the same for any multiple assignment:</p>\n\n<ol>\n<li>Evaluate every expression on the RHS (right-hand side), left to right, placing each into a temporary variable.</li>\n<li>Evaluate the expressions on the LHS (left), left to right.  For each of these, assign the corresponding temporary variable from the RHS.</li>\n</ol>\n\n<p>For your code, this expands to:</p>\n\n<pre><code># A[A[i] - 1], A[i]  =  A[i], A[A[i] - 1]\nA = [3,4,-1,1]\nt1 = A[i]\nt2 = A[A[i] - 1]\n# t1 = 4, t2 = 1\nA[A[i] - 1] = t1\nA[i] = t2\nprint A\n# Result: [3, 1, -1, 4]\n\n# A[i], A[A[i] - 1] = A[A[i] - 1], A[i]\nA = [3,4,-1,1]\nt2 = A[A[i] - 1]\nt1 = A[i]\n# As before, t1 = 4, t2 = 1\nA[i] = t2\n# A[i] is now 1 !\nA[A[i] - 1] = t1\nprint A\n# Result: [4, 1, -1, 1]\n</code></pre>\n\n<p>The critical difference is when A[i] gets changed in each sequence.  IN the second example, when we evaluate <strong>A[A[i] - 1]</strong> in the final assignment, <strong>A[i]</strong> has already changed to 1.  Therefore, this last assignment puts 4 into location 0, rather than location 3.</p>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1477519971, "creation_date": 1477519971, "answer_id": 40272952, "question_id": 40272594, "link": "https://stackoverflow.com/questions/40272594/python-multiple-assignment-issue-list/40272952#40272952", "title": "Python multiple assignment issue (list)", "body": "<p>With how you're encouraged to do things like <code>a, b = b, a+b</code>, you might think that multiple assignments like this are supposed to always bypass problems with one assignment interfering with another. Particularly, it's natural to think that all expression evaluations happen before any assignments. Unfortunately, that's not how it works.</p>\n\n<p>When you have a multiple assignment of the form</p>\n\n<pre><code>expr_a[expr_b], expr_c[expr_d] = expr_e, expr_f\n</code></pre>\n\n<p>the order of events goes as follows:</p>\n\n<ol>\n<li>Evaluate the right-hand side, evaluating <code>expr_e</code> and <code>expr_f</code>.</li>\n<li>Perform the first assignment, evaluating <code>expr_a</code> and <code>expr_b</code>.</li>\n<li>Perform the third assignment, evaluating <code>expr_c</code> and <code>expr_d</code>. <strong>The first assignment has already happened when these expressions are evaluated.</strong></li>\n</ol>\n\n<p>That means that if assigning to <code>expr_a[expr_b]</code> changes the value of <code>expr_c</code> or <code>expr_d</code>, that will change what happens in the second assignment.</p>\n\n<p>In your case, assigning to <code>A[i]</code> changes the value of <code>A[i] - 1</code> in the assignment target <code>A[A[i] - 1]</code>.</p>\n\n<hr>\n\n<p>Don't use a multiple assignment in cases like this. Separate the assignments onto their own lines, and use temporary variables if necessary to remember values that get changed by assignments.</p>\n"}, {"comments": [{"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1477521189, "post_id": 40273033, "comment_id": 67806159, "body": "If we could write A.swap(i,A[i]-1) then a one-liner would do... Maybe the reason why there is no such swap function is precisely this multiple assignment feature... like presumed at <a href=\"https://www.reddit.com/r/Python/comments/3eh5p3/why_isnt_there_a_listswapi_j_function_built_in_to/\" rel=\"nofollow noreferrer\">reddit.com/r/Python/comments/3eh5p3/&hellip;</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1477521341, "post_id": 40273033, "comment_id": 67806211, "body": "@aka.nice then <code>A[i] - 1</code> would be evaluated before the function was called, and be fixed on both sides of the assignment"}, {"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1477521646, "post_id": 40273033, "comment_id": 67806315, "body": "Yes, implicitely pushing A[i]-1 in a temp (or stack) is precisely what would make the expression work symmetrically A.swap(A[i]-1,i) would have the same effect"}], "tags": [], "owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "is_accepted": false, "score": 4, "last_activity_date": 1477520852, "last_edit_date": 1495540844, "creation_date": 1477520365, "answer_id": 40273033, "question_id": 40272594, "link": "https://stackoverflow.com/questions/40272594/python-multiple-assignment-issue-list/40273033#40273033", "title": "Python multiple assignment issue (list)", "body": "<p>Per <a href=\"https://docs.python.org/3/reference/expressions.html#evaluation-order\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>Python evaluates expressions from left to right. Notice that while\n  evaluating an assignment, the right-hand side is evaluated before the\n  left-hand side.</p>\n</blockquote>\n\n<p>For more detail, see <a href=\"https://docs.python.org/3/reference/simple_stmts.html#assignment-statements\" rel=\"nofollow noreferrer\">this section</a>. There is a good example of a brain-teaser exploiting this behaviour <a href=\"https://stackoverflow.com/q/32127908/3001761\">here</a>.</p>\n\n<p>This means that the right-hand side of the <code>=</code> is evaluated first, left-to-right, then the assignment is made to the left-hand side, left-to-right. Necessarily, the brackets are evaluated inside-out. Breaking that down stepwise, here's the first example:</p>\n\n<pre><code>i = 1\nA = [3, 4, -1, 1]\n\nA[A[i] - 1], A[i] = A[i], A[A[i] - 1]\n                  = A[1], A[A[i] - 1]\n                  = 4, A[A[i] - 1]\n                  = 4, A[A[1] - 1]\n                  = 4, A[4 - 1]\n                  = 4, A[3]\n                  = 4, 1\nA[A[i] - 1], A[i] = 4, 1\nA[A[1] - 1], A[i] = 4, 1\nA[4 - 1], A[i] = 4, 1\nA[3], A[i] = 4, 1  # A becomes [3, 4, -1, 4]\nA[i] = 1\nA[1] = 1  # A becomes [3, 1, -1, 4]\n</code></pre>\n\n<p>And here's the second:</p>\n\n<pre><code>i = 1\nA = [3, 4, -1, 1]\n\nA[i], A[A[i] - 1] = A[A[i] - 1], A[i]\n                  = A[A[1] - 1], A[i]\n                  = A[4 - 1], A[i]\n                  = A[3], A[i]\n                  = 1, A[i]\n                  = 1, A[1]\n                  = 1, 4\nA[i], A[A[i] - 1] = 1, 4\nA[1], A[A[i] - 1] = 1, 4  #\u00a0A becomes [3, 1, -1, 1]\nA[A[1] - 1] = 4\nA[1 - 1] = 4\nA[0] = 4  # A becomes [4, 1, -1, 1]\n</code></pre>\n\n<p>The assignment to the left-hand target on the left-hand side alters the content of <code>A</code>, which changes the indexing in the right-hand target. The <code>4</code> is assigned to either <code>A[3]</code> or <code>A[0]</code>, depending on the value of <code>A[1]</code> (which changes from <code>4</code> to <code>1</code>) when the index is calculated.</p>\n\n<p><em>\"What's the best way to do this kind of multiple assignment in one line?\"</em> - I'd do my very best to avoid it. I can't think of any situation where it would be necessary to assign to moving targets like this.</p>\n"}], "owner": {"reputation": 61, "user_id": 7077431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/595ced60c5eeb0703fa27bbfa430f0a7?s=128&d=identicon&r=PG&f=1", "display_name": "Mian", "link": "https://stackoverflow.com/users/7077431/mian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "closed_date": 1477603160, "answer_count": 3, "score": 2, "last_activity_date": 1545177287, "creation_date": 1477518244, "question_id": 40272594, "link": "https://stackoverflow.com/questions/40272594/python-multiple-assignment-issue-list", "closed_reason": "Duplicate", "title": "Python multiple assignment issue (list)", "body": "<pre><code>&gt;&gt;&gt; i = 1\n&gt;&gt;&gt; A = [3,4,-1,1]\n&gt;&gt;&gt; A[A[i] - 1], A[i]  =  A[i], A[A[i] - 1]\n&gt;&gt;&gt; A\n[3, 1, -1, 4]\n&gt;&gt;&gt; A = [3,4,-1,1]\n&gt;&gt;&gt; A[i], A[A[i] - 1] = A[A[i] - 1], A[i]\n&gt;&gt;&gt; A\n[4, 1, -1, 1]\n</code></pre>\n\n<p>I have question when I do assignment for multiple variables for a list.\nLike the example above, the assignment</p>\n\n<pre><code>A[A[i] - 1], A[i]  =  A[i], A[A[i] - 1]\n</code></pre>\n\n<p>is different from the assignment</p>\n\n<pre><code>A[i], A[A[i] - 1] = A[A[i] - 1], A[i]\n</code></pre>\n\n<p>I am really confused the inside calculation order in Python. Why the results are different? What's the best way to do this kind of multiple assignment in one line?</p>\n"}, {"tags": ["python", "tensorflow", "lstm"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3592864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585f7c5477e2910d85b11fd5f13dc3ef?s=128&d=identicon&r=PG", "display_name": "Valedra", "link": "https://stackoverflow.com/users/3592864/valedra"}, "edited": false, "score": 0, "creation_date": 1477593244, "post_id": 40279677, "comment_id": 67842060, "body": "Thank you so much! I had no idea it worked that way. Two small adjustments though for people who stumble upon this question in the future:  1) The parameters should be in an array 2) The names of the variables that I assign have to differ from previous assigned variables.    The syntax that worked for me is <code>preds, stat, acc = sess.run([pred, states, accuracy], feed_dict={x: batch_x, y: batch_y})</code>"}], "tags": [], "owner": {"reputation": 514, "user_id": 3480922, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/38aa9221efc824c8520aed29df7489e2?s=128&d=identicon&r=PG&f=1", "display_name": "user3480922", "link": "https://stackoverflow.com/users/3480922/user3480922"}, "is_accepted": true, "score": 5, "last_activity_date": 1477556704, "creation_date": 1477556704, "answer_id": 40279677, "question_id": 40272567, "link": "https://stackoverflow.com/questions/40272567/how-to-extract-the-cell-state-and-hidden-state-from-an-rnn-model-in-tensorflow/40279677#40279677", "title": "How to extract the cell state and hidden state from an RNN model in tensorflow?", "body": "<p>You may simply collect the values of the <code>states</code> in the same way accuracy is collected.</p>\n\n<p>I guess, <code>pred, states, acc = sess.run(pred, states, accuracy, feed_dict={x: batch_x, y: batch_y})</code> should work perfectly fine.</p>\n"}, {"tags": [], "owner": {"reputation": 783, "user_id": 3134418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c38e763e300598684f61341fce8c1e?s=128&d=identicon&r=PG&f=1", "display_name": "melgor89", "link": "https://stackoverflow.com/users/3134418/melgor89"}, "is_accepted": false, "score": 5, "last_activity_date": 1477571593, "creation_date": 1477571593, "answer_id": 40284685, "question_id": 40272567, "link": "https://stackoverflow.com/questions/40272567/how-to-extract-the-cell-state-and-hidden-state-from-an-rnn-model-in-tensorflow/40284685#40284685", "title": "How to extract the cell state and hidden state from an RNN model in tensorflow?", "body": "<p>One comment about your assumption: the \"states\" does have only the values of \"hidden state\" and \"memory cell\" from last timestep.</p>\n\n<p>The \"outputs\" contain the \"hidden state\" from each time step you want (the size of outputs is [batch_size, seq_len, hidden_size]. So I assume that you want \"outputs\" variable, not \"states\". See the <a href=\"https://www.tensorflow.org/versions/r0.11/api_docs/python/nn.html#rnn\" rel=\"noreferrer\">documentation</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 5293272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fce5ef624caebba68372ae750a9dc8c4?s=128&d=identicon&r=PG&f=1", "display_name": "Farhana  Liza", "link": "https://stackoverflow.com/users/5293272/farhana-liza"}, "is_accepted": false, "score": 3, "last_activity_date": 1489411276, "last_edit_date": 1489411276, "creation_date": 1489408555, "answer_id": 42763793, "question_id": 40272567, "link": "https://stackoverflow.com/questions/40272567/how-to-extract-the-cell-state-and-hidden-state-from-an-rnn-model-in-tensorflow/42763793#42763793", "title": "How to extract the cell state and hidden state from an RNN model in tensorflow?", "body": "<p>I have to disagree with the answer of user3480922. For the code:</p>\n\n<pre><code>outputs, states = rnn.rnn(lstm_cell, x, dtype=tf.float32)\n</code></pre>\n\n<p>to be able to extract the hidden state for each time_step in a prediction, you have to use the outputs. Because outputs have the hidden state value for each time_step. However, I am not sure is there any way we can store the values of the cell state for each time_step as well. Because states tuple provides the cell state values but only for the last time_step.</p>\n\n<p>For example, in the following sample with 5 time_steps, the outputs[4,:,:], time_step = 0,...,4 has the hidden state values for time_step=4, whereas the states tuple h only has the hidden state values for time_step=4. State tuple c has the cell value at the time_step=4 though. </p>\n\n<pre><code>  outputs = [[[ 0.0589103 -0.06925126 -0.01531546 0.06108122]\n  [ 0.00861215 0.06067181 0.03790079 -0.04296958]\n  [ 0.00597713 0.03916606 0.02355802 -0.0277683 ]]\n\n  [[ 0.06252582 -0.07336216 -0.01607122 0.05024602]\n  [ 0.05464711 0.03219429 0.06635305 0.00753127]\n  [ 0.05385715 0.01259535 0.0524035 0.01696803]]\n\n  [[ 0.0853352 -0.06414541 0.02524283 0.05798233]\n  [ 0.10790729 -0.05008117 0.03003334 0.07391824]\n  [ 0.10205664 -0.04479517 0.03844892 0.0693808 ]]\n\n  [[ 0.10556188 0.0516542 0.09162509 -0.02726674]\n  [ 0.11425048 -0.00211394 0.06025286 0.03575509]\n  [ 0.11338984 0.02839304 0.08105748 0.01564003]]\n\n  **[[ 0.10072514 0.14767936 0.12387902 -0.07391471]\n  [ 0.10510238 0.06321315 0.08100517 -0.00940042]\n  [ 0.10553667 0.0984127 0.10094948 -0.02546882]]**]\n  states = LSTMStateTuple(c=array([[ 0.23870754, 0.24315512, 0.20842518, -0.12798975],\n  [ 0.23749796, 0.10797793, 0.14181322, -0.01695861],\n  [ 0.2413336 , 0.16692916, 0.17559692, -0.0453596 ]], dtype=float32), h=array(**[[ 0.10072514, 0.14767936, 0.12387902, -0.07391471],\n  [ 0.10510238, 0.06321315, 0.08100517, -0.00940042],\n  [ 0.10553667, 0.0984127 , 0.10094948, -0.02546882]]**, dtype=float32))\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3592864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585f7c5477e2910d85b11fd5f13dc3ef?s=128&d=identicon&r=PG", "display_name": "Valedra", "link": "https://stackoverflow.com/users/3592864/valedra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6668, "favorite_count": 4, "accepted_answer_id": 40279677, "answer_count": 3, "score": 7, "last_activity_date": 1489411276, "creation_date": 1477518115, "last_edit_date": 1495542322, "question_id": 40272567, "link": "https://stackoverflow.com/questions/40272567/how-to-extract-the-cell-state-and-hidden-state-from-an-rnn-model-in-tensorflow", "title": "How to extract the cell state and hidden state from an RNN model in tensorflow?", "body": "<p>I am new to TensorFlow and have difficulties understanding the RNN module. I am trying to extract hidden/cell states from an LSTM. \nFor my code, I am using the implementation from <a href=\"https://github.com/aymericdamien/TensorFlow-Examples\" rel=\"noreferrer\">https://github.com/aymericdamien/TensorFlow-Examples</a>. </p>\n\n<pre><code># tf Graph input\nx = tf.placeholder(\"float\", [None, n_steps, n_input])\ny = tf.placeholder(\"float\", [None, n_classes])\n\n# Define weights\nweights = {'out': tf.Variable(tf.random_normal([n_hidden, n_classes]))}\nbiases = {'out': tf.Variable(tf.random_normal([n_classes]))}\n\ndef RNN(x, weights, biases):\n    # Prepare data shape to match `rnn` function requirements\n    # Current data input shape: (batch_size, n_steps, n_input)\n    # Required shape: 'n_steps' tensors list of shape (batch_size, n_input)\n\n    # Permuting batch_size and n_steps\n    x = tf.transpose(x, [1, 0, 2])\n    # Reshaping to (n_steps*batch_size, n_input)\n    x = tf.reshape(x, [-1, n_input])\n    # Split to get a list of 'n_steps' tensors of shape (batch_size, n_input)\n    x = tf.split(0, n_steps, x)\n\n    # Define a lstm cell with tensorflow\n    #with tf.variable_scope('RNN'):\n    lstm_cell = rnn_cell.BasicLSTMCell(n_hidden, forget_bias=1.0, state_is_tuple=True)\n\n    # Get lstm cell output\n        outputs, states = rnn.rnn(lstm_cell, x, dtype=tf.float32)\n\n    # Linear activation, using rnn inner loop last output\n    return tf.matmul(outputs[-1], weights['out']) + biases['out'], states\n\npred, states = RNN(x, weights, biases)\n\n# Define loss and optimizer\ncost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(pred, y))\noptimizer = tf.train.AdamOptimizer(learning_rate=learning_rate).minimize(cost)\n\n# Evaluate model\ncorrect_pred = tf.equal(tf.argmax(pred,1), tf.argmax(y,1))\naccuracy = tf.reduce_mean(tf.cast(correct_pred, tf.float32))\n# Initializing the variables\ninit = tf.initialize_all_variables()\n</code></pre>\n\n<p>Now I want to extract the cell/hidden state for each time step in a prediction. The state is stored in a LSTMStateTuple of the form (c,h), which I can find out by evaluating <code>print states</code>. However, trying to call <code>print states.c.eval()</code> (which according to the documentation should give me values in the tensor <code>states.c</code>), yields an error stating that my variables are not initialized even though I am calling it right after I am predicting something. The code for this is here: </p>\n\n<pre><code># Launch the graph\nwith tf.Session() as sess:\n    sess.run(init)\n    step = 1\n    # Keep training until reach max iterations\n    for v in tf.get_collection(tf.GraphKeys.VARIABLES, scope='RNN'):\n        print v.name\n    while step * batch_size &lt; training_iters:\n        batch_x, batch_y = mnist.train.next_batch(batch_size)\n        # Reshape data to get 28 seq of 28 elements\n        batch_x = batch_x.reshape((batch_size, n_steps, n_input))\n        # Run optimization op (backprop)\n        sess.run(optimizer, feed_dict={x: batch_x, y: batch_y})\n\n        print states.c.eval()\n        # Calculate batch accuracy\n        acc = sess.run(accuracy, feed_dict={x: batch_x, y: batch_y})\n\n        step += 1\n    print \"Optimization Finished!\"\n</code></pre>\n\n<p>and the error message is </p>\n\n<pre><code>InvalidArgumentError: You must feed a value for placeholder tensor 'Placeholder' with dtype float\n     [[Node: Placeholder = Placeholder[dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\n</code></pre>\n\n<p>The states are also not visible in <code>tf.all_variables()</code>, only the trained matrix/bias tensors (as described here: <a href=\"https://stackoverflow.com/questions/39168025/tensorflow-show-or-save-forget-gate-values-in-lstm\">Tensorflow: show or save forget gate values in LSTM</a>). I don't want to build the whole LSTM from scratch though since I have the states in the <code>states</code> variable, I just need to call it. </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 79, "user_id": 5651345, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4551beeb7feb954e96812db8c66dc098?s=128&d=identicon&r=PG&f=1", "display_name": "KGBeans", "link": "https://stackoverflow.com/users/5651345/kgbeans"}, "reply_to_user": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 0, "creation_date": 1477517686, "post_id": 40272325, "comment_id": 67804965, "body": "I&#39;ve only played around with trying to match one column to another and am having no luck. I&#39;ve used &#39;is val in dfA[&#39;Names&#39;] == val in dfB[&#39;Names&#39;]: print val&#39; which didn&#39;t and i&#39;ve also tried throwing that in a for loop."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1477520061, "creation_date": 1477520061, "answer_id": 40272973, "question_id": 40272325, "link": "https://stackoverflow.com/questions/40272325/matching-columns-from-multiple-dataframes-in-pandas/40272973#40272973", "title": "Matching columns from multiple dataframes in pandas", "body": "<p>consider <code>d1</code> and <code>d2</code></p>\n\n<pre><code>d1 = pd.DataFrame(dict(Names=list('ABCDEFG'),\n                       Addressess=[1, 2, 3, 4, 5, 6, 7]))\nd1\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/OgZAj.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/OgZAj.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>d2 = pd.DataFrame(dict(Names=list('FGHIJ'),\n                       Addressess=[6, 7, 8, 9, 10]))\nd2\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vAe9O.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/vAe9O.png\" alt=\"enter image description here\"></a></p>\n\n<p>then use merge</p>\n\n<pre><code>d2.merge(d1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MytXC.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/MytXC.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 79, "user_id": 5651345, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4551beeb7feb954e96812db8c66dc098?s=128&d=identicon&r=PG&f=1", "display_name": "KGBeans", "link": "https://stackoverflow.com/users/5651345/kgbeans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 40272973, "answer_count": 1, "score": -3, "last_activity_date": 1477520061, "creation_date": 1477516882, "question_id": 40272325, "link": "https://stackoverflow.com/questions/40272325/matching-columns-from-multiple-dataframes-in-pandas", "title": "Matching columns from multiple dataframes in pandas", "body": "<p>I have 2 dataframes with a column of ['Names'] and ['Addresses']. I would like to get pandas to print the row in the second dataframe if it matches the name and address from the first.</p>\n"}, {"tags": ["python", "linux", "upstart", "vnc"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1477518680, "post_id": 40272225, "comment_id": 67805318, "body": "maybe I&#39;m wrong but upstart is use to run services/deamons - programs which can run when nobody is login so there is no posibiliti to display anything. Or maybe you have to set <code>export DISPLAY=:0.0</code> to inform program where to display."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 1522163, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/283a6498de0a3bc00f6dfc922bb9314e?s=128&d=identicon&r=PG", "display_name": "mastash3ff", "link": "https://stackoverflow.com/users/1522163/mastash3ff"}, "is_accepted": false, "score": 0, "last_activity_date": 1477576344, "last_edit_date": 1492086165, "creation_date": 1477571659, "answer_id": 40284708, "question_id": 40272225, "link": "https://stackoverflow.com/questions/40272225/upstart-graphic-window-not-displaying/40284708#40284708", "title": "Upstart - Graphic window not displaying", "body": "<p>Ended up going with the solution from by setting up a .desktop file:</p>\n\n<p><a href=\"https://askubuntu.com/questions/107187/how-to-launch-gui-app-with-upstart-script\">https://askubuntu.com/questions/107187/how-to-launch-gui-app-with-upstart-script</a></p>\n\n<p>Initially, I started by a</p>\n\n<pre><code>export DISPLAY=0.0 \n</code></pre>\n\n<p>...and it worked.  I could then control it as a service.  But as soon as I restarted the computer, it would not work as expected.  Could not even stop the service after starting it.  I'm not sure why it worked in the first place.</p>\n"}], "owner": {"reputation": 315, "user_id": 1522163, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/283a6498de0a3bc00f6dfc922bb9314e?s=128&d=identicon&r=PG", "display_name": "mastash3ff", "link": "https://stackoverflow.com/users/1522163/mastash3ff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477576344, "creation_date": 1477516407, "question_id": 40272225, "link": "https://stackoverflow.com/questions/40272225/upstart-graphic-window-not-displaying", "title": "Upstart - Graphic window not displaying", "body": "<p>I've got this python script that opens up a VNC session through a graphical window.  It sits there blocking waiting for a particular message to come in and then spawns the graphical window successfully when ran from the command prompt.  </p>\n\n<p>But if I place this in an Upstart .conf file so I can use it as a background service, I can see that my program receives the message to pop up a window but it does not display a graphical window.</p>\n\n<pre><code>...\nexec /usr/local/bin/vncscript.py # does not display window\n...\n</code></pre>\n\n<p>How would I go about displaying a graphical window using Upstart?</p>\n"}, {"tags": ["python", "pandas", "numpy", "python-xarray"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 271526, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/59debb0f1e43f6773cb6a655ea3516ce?s=128&d=identicon&r=PG", "display_name": "Gabe", "link": "https://stackoverflow.com/users/271526/gabe"}, "edited": false, "score": 0, "creation_date": 1477517443, "post_id": 40272331, "comment_id": 67804868, "body": "I had been trying to do this, but kept getting errors. This method worked super well. I assume that is how the time.season==&#39;JJA&#39; works in the underlying code?"}, {"owner": {"reputation": 7287, "user_id": 809705, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/93a76a800ef6c5919baa8ba91120ee98?s=128&d=identicon&r=PG", "display_name": "shoyer", "link": "https://stackoverflow.com/users/809705/shoyer"}, "reply_to_user": {"reputation": 379, "user_id": 271526, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/59debb0f1e43f6773cb6a655ea3516ce?s=128&d=identicon&r=PG", "display_name": "Gabe", "link": "https://stackoverflow.com/users/271526/gabe"}, "edited": false, "score": 3, "creation_date": 1477603543, "post_id": 40272331, "comment_id": 67847294, "body": "Take a look for yourself: <a href=\"https://github.com/pydata/xarray/blob/90c854fd0ad20a35935319eb5b45a827d3269e81/xarray/core/dataset.py#L69-L73\" rel=\"nofollow noreferrer\">github.com/pydata/xarray/blob/&hellip;</a>  We actually use a trick with integer division modulo 4, which is probably slightly faster but also less clear (and less generalizable)."}], "tags": [], "owner": {"reputation": 7287, "user_id": 809705, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/93a76a800ef6c5919baa8ba91120ee98?s=128&d=identicon&r=PG", "display_name": "shoyer", "link": "https://stackoverflow.com/users/809705/shoyer"}, "is_accepted": true, "score": 21, "last_activity_date": 1477516915, "creation_date": 1477516915, "answer_id": 40272331, "question_id": 40272222, "link": "https://stackoverflow.com/questions/40272222/select-xarray-pandas-index-based-on-specific-months/40272331#40272331", "title": "Select xarray/pandas index based on specific months", "body": "<p>The easiest way to select custom months is to use boolean masks, e.g.,</p>\n\n<pre><code>def is_amj(month):\n    return (month &gt;= 4) &amp; (month &lt;= 6)\n\nseasonal_data = temp_data.sel(time=is_amj(temp_data['time.month']))\n</code></pre>\n\n<p>Note that you need to use the bitwise operators like <code>&amp;</code> or <code>|</code> because Python's built-ins <code>and</code> and <code>or</code> don't work on vectors. Also, you need the parentheses because bitwise operators have higher precedence than comparisons.</p>\n"}], "owner": {"reputation": 379, "user_id": 271526, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/59debb0f1e43f6773cb6a655ea3516ce?s=128&d=identicon&r=PG", "display_name": "Gabe", "link": "https://stackoverflow.com/users/271526/gabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4112, "favorite_count": 5, "accepted_answer_id": 40272331, "answer_count": 1, "score": 7, "last_activity_date": 1515692759, "creation_date": 1477516394, "question_id": 40272222, "link": "https://stackoverflow.com/questions/40272222/select-xarray-pandas-index-based-on-specific-months", "title": "Select xarray/pandas index based on specific months", "body": "<p>I have an xarray DataArray that I want to select the months April, May, June (similar to time.season=='JJA') for an entire time series.</p>\n\n<p>Its structured like: </p>\n\n<pre><code>&lt;xarray.DataArray 't2m' (time: 492, latitude: 81, longitude: 141)&gt;\n</code></pre>\n\n<p>I have been previously selecting JJA by:</p>\n\n<pre><code>seasonal_data =temp_data.sel(time=temp_data['time.season']=='JJA')\n</code></pre>\n\n<p>I would like to do the same thing but with the months 'AMJ' instead. I can add any details that I might be missing. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-datamodel"], "answers": [{"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1477516777, "post_id": 40272162, "comment_id": 67804549, "body": "I think mileage varies a little depending on which dunder attribute/method you&#39;re working with.  e.g. <code>self.__dict___</code> is probably nearly as common as <code>vars(self)</code>, <code>self.__class__</code> is also nearly as popular as <code>type(self)</code>.  As a slight generalization, I think that not using methods that look up attributes are more likely to be considered &quot;acceptable&quot; by the community vs. methods that call hooks.  With that said, I fall squarely on the same side of this discussion as your conclusion:  &quot;Use builtin functions/operators wherever you can&quot;"}, {"owner": {"reputation": 16669, "user_id": 1231929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/hLiYk.jpg?s=128&g=1", "display_name": "jme", "link": "https://stackoverflow.com/users/1231929/jme"}, "edited": false, "score": 0, "creation_date": 1477519840, "post_id": 40272162, "comment_id": 67805696, "body": "It might be interesting to note that special methods are called on the class, not the instance. For example, <code>next(obj)</code> doesn&#39;t quite translate to <code>obj.__next__()</code>, but rather something like <code>type(obj).__next__(obj)</code>."}], "tags": [], "owner": {"reputation": 286979, "user_id": 541136, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/wftMn.jpg?s=128&g=1", "display_name": "Aaron Hall", "link": "https://stackoverflow.com/users/541136/aaron-hall"}, "is_accepted": true, "score": 45, "last_activity_date": 1570022944, "last_edit_date": 1570022944, "creation_date": 1477516172, "answer_id": 40272162, "question_id": 40272161, "link": "https://stackoverflow.com/questions/40272161/what-is-the-relationship-between-the-python-data-model-and-built-in-functions/40272162#40272162", "title": "What is the relationship between the Python data model and built-in functions?", "body": "<h1>What is the relationship between the Python datamodel and builtin functions?</h1>\n\n<ul>\n<li>The builtins and operators use the underlying datamodel methods or attributes.</li>\n<li>The builtins and operators have more elegant behavior and are in general more forward compatible.</li>\n<li>The special methods of the datamodel are semantically non-public interfaces.</li>\n<li>The builtins and language operators are specifically intended to be the user interface for behavior implemented by special methods.</li>\n</ul>\n\n<p>Thus, you should prefer to use the builtin functions and operators where possible over the special methods and attributes of the datamodel.</p>\n\n<p>The semantically internal APIs are more likely to change than the public interfaces. While Python doesn't actually consider anything \"private\" and exposes the internals, that doesn't mean it's a good idea to abuse that access.  Doing so has the following risks:</p>\n\n<ul>\n<li>You may find you have more breaking changes when upgrading your Python executable or switching to other implementations of Python (like PyPy, IronPython, or Jython, or some other unforeseen implementation.)</li>\n<li>Your colleagues will likely think poorly of your language skills and conscientiousness, and consider it a code-smell, bringing you and the rest of your code to greater scrutiny.</li>\n<li>The builtin functions are easy to intercept behavior for. Using special methods directly limits the power of your Python for introspection and debugging.</li>\n</ul>\n\n<h2>In depth</h2>\n\n<p>The builtin functions and operators invoke the special methods and use the special attributes in the Python datamodel. They are the readable and maintainable veneer that hides the internals of objects. In general, users should use the builtins and operators given in the language as opposed to calling the special methods or using the special attributes directly. </p>\n\n<p>The builtin functions and operators also can have fallback or more elegant behavior than the more primitive datamodel special methods. For example:</p>\n\n<ul>\n<li><code>next(obj, default)</code> allows you to provide a default instead of raising <code>StopIteration</code> when an iterator runs out, while <code>obj.__next__()</code> does not. </li>\n<li><code>str(obj)</code> fallsback to <code>obj.__repr__()</code> when <code>obj.__str__()</code> isn't available - whereas calling <code>obj.__str__()</code> directly would raise an attribute error.</li>\n<li><code>obj != other</code> fallsback to <code>not obj == other</code> in Python 3 when no <code>__ne__</code> - calling <code>obj.__ne__(other)</code> would not take advantage of this.</li>\n</ul>\n\n<p>(Builtin functions can also be easily overshadowed, if necessary or desirable, on a module's global scope or the <code>builtins</code> module, to further customize behavior.)</p>\n\n<h2>Mapping the builtins and operators to the datamodel</h2>\n\n<p>Here is a mapping, with notes, of the builtin functions and operators to the respective special methods and attributes that they use or return - note that the usual rule is that the builtin function usually maps to a special method of the same name, but this is not consistent enough to warrant giving this map below:</p>\n\n<pre><code>builtins/     special methods/\noperators  -&gt; datamodel               NOTES (fb == fallback)\n\nrepr(obj)     obj.__repr__()          provides fb behavior for str\nstr(obj)      obj.__str__()           fb to __repr__ if no __str__\nbytes(obj)    obj.__bytes__()         Python 3 only\nunicode(obj)  obj.__unicode__()       Python 2 only\nformat(obj)   obj.__format__()        format spec optional.\nhash(obj)     obj.__hash__()\nbool(obj)     obj.__bool__()          Python 3, fb to __len__\nbool(obj)     obj.__nonzero__()       Python 2, fb to __len__\ndir(obj)      obj.__dir__()\nvars(obj)     obj.__dict__            does not include __slots__\ntype(obj)     obj.__class__           type actually bypasses __class__ -\n                                      overriding __class__ will not affect type\nhelp(obj)     obj.__doc__             help uses more than just __doc__\nlen(obj)      obj.__len__()           provides fb behavior for bool\niter(obj)     obj.__iter__()          fb to __getitem__ w/ indexes from 0 on\nnext(obj)     obj.__next__()          Python 3\nnext(obj)     obj.next()              Python 2\nreversed(obj) obj.__reversed__()      fb to __len__ and __getitem__\nother in obj  obj.__contains__(other) fb to __iter__ then __getitem__\nobj == other  obj.__eq__(other)\nobj != other  obj.__ne__(other)       fb to not obj.__eq__(other) in Python 3\nobj &lt; other   obj.__lt__(other)       get &gt;, &gt;=, &lt;= with @functools.total_ordering\ncomplex(obj)  obj.__complex__()\nint(obj)      obj.__int__()\nfloat(obj)    obj.__float__()\nround(obj)    obj.__round__()\nabs(obj)      obj.__abs__()\n</code></pre>\n\n<p>The <code>operator</code> module has <code>length_hint</code> which has a fallback implemented by a respective special method if <code>__len__</code> is not implemented:</p>\n\n<pre><code>length_hint(obj)  obj.__length_hint__() \n</code></pre>\n\n<h3>Dotted Lookups</h3>\n\n<p>Dotted lookups are contextual. Without special method implementation, first look in class hierarchy for data descriptors (like properties and slots), then in the instance <code>__dict__</code> (for instance variables), then in the class hierarchy for non-data descriptors (like methods). Special methods implement the following behaviors:</p>\n\n<pre><code>obj.attr      obj.__getattr__('attr')       provides fb if dotted lookup fails\nobj.attr      obj.__getattribute__('attr')  preempts dotted lookup\nobj.attr = _  obj.__setattr__('attr', _)    preempts dotted lookup\ndel obj.attr  obj.__delattr__('attr')       preempts dotted lookup\n</code></pre>\n\n<h3>Descriptors</h3>\n\n<p>Descriptors are a bit advanced - feel free to skip these entries and come back later - recall the descriptor instance is in the class hierarchy (like methods, slots, and properties). A data descriptor implements either <code>__set__</code> or <code>__delete__</code>:</p>\n\n<pre><code>obj.attr        descriptor.__get__(obj, type(obj)) \nobj.attr = val  descriptor.__set__(obj, val)\ndel obj.attr    descriptor.__delete__(obj)\n</code></pre>\n\n<p>When the class is instantiated (defined) the following descriptor method <code>__set_name__</code> is called if any descriptor has it to inform the descriptor of its attribute name. (This is new in Python 3.6.) <code>cls</code> is same as <code>type(obj)</code> above, and <code>'attr'</code> stands in for the attribute name:</p>\n\n<pre><code>class cls:\n    @descriptor_type\n    def attr(self): pass # -&gt; descriptor.__set_name__(cls, 'attr') \n</code></pre>\n\n<h3>Items (subscript notation)</h3>\n\n<p>The subscript notation is also contextual:</p>\n\n<pre><code>obj[name]         -&gt; obj.__getitem__(name)\nobj[name] = item  -&gt; obj.__setitem__(name, item)\ndel obj[name]     -&gt; obj.__delitem__(name)\n</code></pre>\n\n<p>A special case for subclasses of <code>dict</code>, <code>__missing__</code> is called if <code>__getitem__</code> doesn't find the key:</p>\n\n<pre><code>obj[name]         -&gt; obj.__missing__(name)  \n</code></pre>\n\n<h3>Operators</h3>\n\n<p>There are also special methods for <code>+, -, *, @, /, //, %, divmod(), pow(), **, &lt;&lt;, &gt;&gt;, &amp;, ^, |</code> operators, for example:</p>\n\n<pre><code>obj + other   -&gt;  obj.__add__(other), fallback to other.__radd__(obj)\nobj | other   -&gt;  obj.__or__(other), fallback to other.__ror__(obj)\n</code></pre>\n\n<p>and in-place operators for augmented assignment, <code>+=, -=, *=, @=, /=, //=, %=, **=, &lt;&lt;=, &gt;&gt;=, &amp;=, ^=, |=</code>, for example:</p>\n\n<pre><code>obj += other  -&gt;  obj.__iadd__(other)\nobj |= other  -&gt;  obj.__ior__(other)\n</code></pre>\n\n<p>(If these in-place operators are not defined, Python falls back to, for example, for <code>obj += other</code> to <code>obj = obj + other</code>)</p>\n\n<p>and unary operations:</p>\n\n<pre><code>+obj          -&gt;  obj.__pos__()\n-obj          -&gt;  obj.__neg__()\n~obj          -&gt;  obj.__invert__()\n</code></pre>\n\n<h3>Context Managers</h3>\n\n<p>A context manager defines <code>__enter__</code>, which is called on entering the code block (its return value, usually self, is aliased with <code>as</code>), and <code>__exit__</code>, which is guaranteed to be called on leaving the code block, with exception information.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with obj as enters_return_value: #-&gt;  enters_return_value = obj.__enter__()\n    raise Exception('message')\n                                 #-&gt;  obj.__exit__(Exception, \n                                 #-&gt;               Exception('message'), \n                                 #-&gt;               traceback_object)\n</code></pre>\n\n<p>If <code>__exit__</code> gets an exception and then returns a false value, it will reraise it on leaving the method. </p>\n\n<p>If no exception, <code>__exit__</code> gets <code>None</code> for those three arguments instead, and the return value is meaningless:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with obj:           #-&gt;  obj.__enter__()\n    pass\n                    #-&gt;  obj.__exit__(None, None, None)\n</code></pre>\n\n<h3>Some Metaclass Special Methods</h3>\n\n<p>Similarly, classes can have special methods (from their metaclasses) that support abstract base classes:</p>\n\n<pre><code>isinstance(obj, cls) -&gt; cls.__instancecheck__(obj)\nissubclass(sub, cls) -&gt; cls.__subclasscheck__(sub)\n</code></pre>\n\n<p>An important takeaway is that while the builtins like <code>next</code> and <code>bool</code> do not change between Python 2 and 3, underlying implementation names <em>are</em> changing. </p>\n\n<p>Thus using the builtins also offers more forward compatibility.</p>\n\n<h2>When am I supposed to use the special names?</h2>\n\n<p>In Python, names that begin with underscores are semantically non-public names for users. The underscore is the creator's way of saying, \"hands-off, don't touch.\"</p>\n\n<p>This is not just cultural, but it is also in Python's treatment of API's. When a package's <code>__init__.py</code> uses <code>import *</code> to provide an API from a subpackage, if the subpackage does not provide an <code>__all__</code>, it excludes names that start with underscores. The subpackage's <code>__name__</code> would also be excluded. </p>\n\n<p>IDE autocompletion tools are mixed in their consideration of names that start with underscores to be non-public. However, I greatly appreciate not seeing <code>__init__</code>, <code>__new__</code>, <code>__repr__</code>, <code>__str__</code>, <code>__eq__</code>, etc. (nor any of the user created non-public interfaces) when I type the name of an object and a period.</p>\n\n<p>Thus I assert:</p>\n\n<p><strong>The special \"dunder\" methods are not a part of the public interface. Avoid using them directly.</strong> </p>\n\n<p>So when to use them? </p>\n\n<p>The main use-case is when implementing your own custom object or subclass of a builtin object. </p>\n\n<p>Try to only use them when absolutely necessary. Here are some examples:</p>\n\n<h3>Use the <code>__name__</code> special attribute on functions or classes</h3>\n\n<p>When we decorate a function, we typically get a wrapper function in return that hides helpful information about the function. We would use the <code>@wraps(fn)</code> decorator to make sure we don't lose that information, but if we need the name of the function, we need to use the <code>__name__</code> attribute directly:</p>\n\n<pre><code>from functools import wraps\n\ndef decorate(fn): \n    @wraps(fn)\n    def decorated(*args, **kwargs):\n        print('calling fn,', fn.__name__) # exception to the rule\n        return fn(*args, **kwargs)\n    return decorated\n</code></pre>\n\n<p>Similarly, I do the following when I need the name of the object's class in a method (used in, for example, a <code>__repr__</code>):</p>\n\n<pre><code>def get_class_name(self):\n    return type(self).__name__\n          # ^          # ^- must use __name__, no builtin e.g. name()\n          # use type, not .__class__\n</code></pre>\n\n<h3>Using special attributes to write custom classes or subclassed builtins</h3>\n\n<p>When we want to define custom behavior, we must use the data-model names. </p>\n\n<p>This makes sense, since we are the implementors, these attributes aren't private to us.</p>\n\n<pre><code>class Foo(object):\n    # required to here to implement == for instances:\n    def __eq__(self, other):      \n        # but we still use == for the values:\n        return self.value == other.value\n    # required to here to implement != for instances:\n    def __ne__(self, other): # docs recommend for Python 2.\n        # use the higher level of abstraction here:\n        return not self == other  \n</code></pre>\n\n<p>However, even in this case, we don't use <code>self.value.__eq__(other.value)</code> or <code>not self.__eq__(other)</code> (see my <a href=\"https://stackoverflow.com/q/4352244/541136\">answer here</a> for proof that the latter can lead to unexpected behavior.) Instead, we should use the higher level of abstraction.</p>\n\n<p>Another point at which we'd need to use the special method names is when we are in a child's implementation, and want to delegate to the parent. For example:  </p>\n\n<pre><code>class NoisyFoo(Foo):\n    def __eq__(self, other):\n        print('checking for equality')\n        # required here to call the parent's method\n        return super(NoisyFoo, self).__eq__(other) \n</code></pre>\n\n<h2>Conclusion</h2>\n\n<p>The special methods allow users to implement the interface for object internals. </p>\n\n<p>Use the builtin functions and operators wherever you can. Only use the special methods where there is no documented public API.</p>\n"}, {"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1477543759, "post_id": 40274814, "comment_id": 67811598, "body": "I think that one other (key) difference between <code>type(obj)</code> vs <code>obj.__class__</code> and <code>len(a)</code> vs <code>a.__len__()</code> is that the builtin <code>type</code> is overloaded.  <code>type(obj)</code> means something completely different than <code>type(&#39;Foo&#39;, (object,), {})</code>.  Similarly with <code>vars()</code> vs <code>vars(obj)</code>.  Rather than remembering that <code>type</code> does multiple things, I think people tend to just think of <code>type</code> as a factory for creating new types and so they fall back to good ole&#39; <code>obj.__class__</code> to get an object&#39;s type.  I&#39;m not saying that they <i>should</i>, just trying to explain why it might be more common than <code>__len__</code> misuse"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1477580366, "post_id": 40274814, "comment_id": 67834186, "body": "@mgilson Good point. Or maybe they even only know the other thing. Like, they somewhere saw <code>type</code> being used for creating a type and then never learned the other thing because they thought they already know what <code>type</code> does. Another thing might be IDE&#39;s auto-completion. People might learn what they can do with objects by looking at what auto-completion offers. And then they see <code>__class__</code> there but not <code>type</code>."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 11, "last_activity_date": 1477534982, "last_edit_date": 1495540982, "creation_date": 1477532650, "answer_id": 40274814, "question_id": 40272161, "link": "https://stackoverflow.com/questions/40272161/what-is-the-relationship-between-the-python-data-model-and-built-in-functions/40274814#40274814", "title": "What is the relationship between the Python data model and built-in functions?", "body": "<p>I'll show some usage that you apparently didn't think of, comment on the examples you showed, and argue against the privacy claim from your own answer.</p>\n\n<hr>\n\n<p>I agree with your own answer that for example <code>len(a)</code> should be used, not <code>a.__len__()</code>. I'd put it like this: <strong><code>len</code> exists so we can use it, and <code>__len__</code> exists so <code>len</code> can use it</strong>. Or however that really works internally, since <code>len(a)</code> can actually be much <strong>faster</strong>, at least for example for lists and strings:</p>\n\n<pre><code>&gt;&gt;&gt; timeit('len(a)', 'a = [1,2,3]', number=10**8)\n4.22549770486512\n&gt;&gt;&gt; timeit('a.__len__()', 'a = [1,2,3]', number=10**8)\n7.957335462257106\n\n&gt;&gt;&gt; timeit('len(s)', 's = \"abc\"', number=10**8)\n4.1480574509332655\n&gt;&gt;&gt; timeit('s.__len__()', 's = \"abc\"', number=10**8)\n8.01780160432645\n</code></pre>\n\n<p>But besides defining these methods in my own classes for usage by builtin functions and operators, I occasionally also use them as follows:</p>\n\n<p>Let's say I need to give a filter function to some function and I want to use a set <code>s</code> as the filter. I'm not going to create an extra function <code>lambda x: x in s</code> or <code>def f(x): return x in s</code>. No. I already have a perfectly fine function that I can use: the set's <code>__contains__</code> method. It's simpler and more direct. And even faster, as shown here (ignore that I save it as <code>f</code> here, that's just for this timing demo):</p>\n\n<pre><code>&gt;&gt;&gt; timeit('f(2); f(4)', 's = {1, 2, 3}; f = s.__contains__', number=10**8)\n6.473739433621368\n&gt;&gt;&gt; timeit('f(2); f(4)', 's = {1, 2, 3}; f = lambda x: x in s', number=10**8)\n19.940786514456924\n&gt;&gt;&gt; timeit('f(2); f(4)', 's = {1, 2, 3}\\ndef f(x): return x in s', number=10**8)\n20.445680107760325\n</code></pre>\n\n<p>So while I don't <strong>directly call</strong> magic methods like <code>s.__contains__(x)</code>, I do occasionally <strong>pass</strong> them somewhere like <code>some_function_needing_a_filter(s.__contains__)</code>. And I think that's perfectly fine, and better than the lambda/def alternative.</p>\n\n<hr>\n\n<p>My thoughts on the examples you showed:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/31401712/541136\">Example 1</a>: Asked how to get the size of a list, he answered <code>items.__len__()</code>. Even without any reasoning. My verdict: That's just wrong. Should be <code>len(items)</code>.</li>\n<li><a href=\"https://stackoverflow.com/a/15994607/541136\">Example 2</a>: Does mention <code>d[key] = value</code> first! And then adds <code>d.__setitem__(key, value)</code> with the reasoning <em>\"if your keyboard is missing the square bracket keys\"</em>, which rarely applies and which I doubt was serious. I think it was just the foot in the door for the last point, mentioning that that's how we can support the square bracket syntax in our own classes. Which turns it back to a suggestion to use square brackets.</li>\n<li><a href=\"https://stackoverflow.com/a/192207/541136\">Example 3</a>: Suggests <code>obj.__dict__</code>. Bad, like the <code>__len__</code> example. But I suspect he just didn't know <code>vars(obj)</code>, and I can understand it, as <code>vars</code> is less common/known and the name does differ from the \"dict\" in <code>__dict__</code>.</li>\n<li><a href=\"https://stackoverflow.com/a/29113307/541136\">Example 4</a>: Suggests <code>__class__</code>. Should be <code>type(obj)</code>. I suspect it's similar to the <code>__dict__</code> story, although I think <code>type</code> is more well-known.</li>\n</ul>\n\n<hr>\n\n<p>About privacy: In your own answer you say these methods are \"semantically private\". I strongly disagree. Single and double <strong>leading</strong> underscores are for that, but not the data model's special \"dunder/magic\" methods with double leading+trailing underscores.</p>\n\n<ul>\n<li>The two things you use as arguments are importing behaviour and IDE's autocompletion. But importing and these special methods are different areas, and the one IDE I tried (the popular PyCharm) disagrees with you. I created a class/object with methods <code>_foo</code> and <code>__bar__</code> and then autocompletion didn't offer <code>_foo</code> but <strong>did</strong> offer <code>__bar__</code>. And when I used both methods anyway, PyCharm only warned me about <code>_foo</code> (calling it a \"protected member\"), <strong>not</strong> about <code>__bar__</code>.</li>\n<li><a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"noreferrer\">PEP 8</a> says <em>'weak \"internal use\" indicator'</em> explicitly for <strong>single</strong> leading underscore, and explicitly for double <strong>leading</strong> underscores it mentions the name mangling and later explains that it's for <em>\"attributes that you do not want subclasses to use\"</em>. But the comment about <strong>double leading+trailing</strong> underscores doesn't say anything like that.</li>\n<li>The <a href=\"https://docs.python.org/3/reference/datamodel.html\" rel=\"noreferrer\">data model page</a> you yourself link to says that these <a href=\"https://docs.python.org/3/reference/datamodel.html#special-method-names\" rel=\"noreferrer\">special method names</a> are <strong>\"Python\u2019s approach to operator overloading\"</strong>. Nothing about privacy there. The words private/privacy/protected don't even appear anywhere on that page.<br><br>\nI also recommend reading <a href=\"http://www.pixelmonkey.org/2013/04/11/python-double-under-double-wonder\" rel=\"noreferrer\">this article by Andrew Montalenti</a> about these methods, emphasizing that <em>\"The dunder convention is a namespace reserved for the core Python team\"</em> and <em>\"Never, ever, invent your own dunders\"</em> because <em>\"The core Python team reserved a somewhat ugly namespace for themselves\"</em>. Which all matches PEP 8's instruction <em>\"Never invent [dunder/magic] names; only use them as documented\"</em>. I think Andrew is spot on - it's just an ugly namespace of the core team. And it's for the purpose of operator overloading, not about privacy (not Andrew's point but mine and the data model page's).</li>\n</ul>\n\n<p>Besides Andrew's article I also checked several more about these \"magic\"/\"dunder\" methods, and I found none of them talking about privacy at all. That's just not what this is about.</p>\n\n<p>Again, we should use <code>len(a)</code>, not <code>a.__len__()</code>. But not because of privacy.</p>\n"}], "owner": {"reputation": 286979, "user_id": 541136, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/wftMn.jpg?s=128&g=1", "display_name": "Aaron Hall", "link": "https://stackoverflow.com/users/541136/aaron-hall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3657, "favorite_count": 14, "accepted_answer_id": 40272162, "answer_count": 2, "score": 38, "last_activity_date": 1570022944, "creation_date": 1477516172, "last_edit_date": 1495541430, "question_id": 40272161, "link": "https://stackoverflow.com/questions/40272161/what-is-the-relationship-between-the-python-data-model-and-built-in-functions", "title": "What is the relationship between the Python data model and built-in functions?", "body": "<p>As I read Python answers on Stack Overflow, I continue to see some people <a href=\"https://stackoverflow.com/a/31401712/541136\">telling users</a> to <a href=\"https://stackoverflow.com/a/15994607/541136\">use the data model's</a> special <a href=\"https://stackoverflow.com/a/192207/541136\">methods</a> or <a href=\"https://stackoverflow.com/a/29113307/541136\">attributes</a> directly.</p>\n\n<p>I then see contradicting advice (sometimes from myself) saying not to do that, and instead to use builtin functions and the operators directly.</p>\n\n<p>Why is that? What is the relationship between the special \"dunder\" methods and attributes of the Python <a href=\"https://docs.python.org/3/reference/datamodel.html\" rel=\"noreferrer\">data model</a> and <a href=\"https://docs.python.org/3/library/functions.html\" rel=\"noreferrer\">builtin functions</a>? </p>\n\n<p>When am I supposed to use the special names?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 5, "last_activity_date": 1507797964, "last_edit_date": 1507797964, "creation_date": 1477516785, "answer_id": 40272305, "question_id": 40272114, "link": "https://stackoverflow.com/questions/40272114/using-column-header-and-values-from-one-dataframe-to-find-weights-in-another-dat/40272305#40272305", "title": "Using column header and values from one dataframe to find weights in another dataframe", "body": "<p>One option would be to transform <code>table1</code> to long format, merge with <code>table2</code> on parameters and values, and then transform it back to wide format:</p>\n\n<pre><code>In [85]: pd.merge(pd.melt(df1, id_vars='ID'), df2,\n                  left_on=['variable', 'value'], right_on=['parameter', 'value']\n                   ).pivot('ID', 'parameter', 'weight')\nOut[85]:\nparameter  param1  param2  param3\nID\nA12            13      21      49\nB15            10      39      49\nB20            13      39      49\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1507798107, "last_edit_date": 1507798107, "creation_date": 1477521642, "answer_id": 40273259, "question_id": 40272114, "link": "https://stackoverflow.com/questions/40272114/using-column-header-and-values-from-one-dataframe-to-find-weights-in-another-dat/40273259#40273259", "title": "Using column header and values from one dataframe to find weights in another dataframe", "body": "<p>A bunch of thrashing about and I came up with something far inferior to @Psidom.  I only convinced myself to post to provide some insight into getting at the same solution with varying techniques.</p>\n\n<pre><code>In [55]: (df1.set_index('ID')\n             .rename_axis('parameter', 1)\n             .stack()\n             .reset_index(name='value')\n             .merge(df2)\n             .set_index(['ID', 'parameter']).weight.unstack())\nOut[55]:\nparameter  param1  param2  param3\nID\nA12            13      21      49\nB15            10      39      49\nB20            13      39      49\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 3863003, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/088614dc7cb872f9cc1891014208477d?s=128&d=identicon&r=PG&f=1", "display_name": "SharpObject", "link": "https://stackoverflow.com/users/3863003/sharpobject"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 40272305, "answer_count": 2, "score": 5, "last_activity_date": 1507798107, "creation_date": 1477515989, "last_edit_date": 1477516641, "question_id": 40272114, "link": "https://stackoverflow.com/questions/40272114/using-column-header-and-values-from-one-dataframe-to-find-weights-in-another-dat", "title": "Using column header and values from one dataframe to find weights in another dataframe", "body": "<p>I have two tables that look like the following</p>\n\n<pre><code>    ID  param1  param2  param3\n0  A12       2       1       1\n1  B15       1       2       1\n2  B20       2       2       1\n...\n</code></pre>\n\n<p>and</p>\n\n<pre><code>    parameter  value  weight\n0      param1      1      10\n1      param1      2      13\n2      param2      1      21\n3      param2      2      39\n4      param3      1      49\n5      param3      2      61\n</code></pre>\n\n<p>What's the best way to take the first dataframe, lookup each parameter's weight in the second dataframe and return a dataframe like the following?</p>\n\n<pre><code>    ID  param1  param2  param3\n0  A12      13      21      49\n1  B15      10      39      49\n2  B20      13      39      49\n</code></pre>\n\n<p>What I was thinking was to write a function given the parameter, and value, subset table2 like the following, \n<code>table2[(table2['parameter'] = parameter) &amp; (table2['value'] = value)]</code> and doing some kind of vectorized application to each column in table1, but Im not sure how to go over each value and do the lookup.</p>\n"}, {"tags": ["python", "macos", "scapy"], "comments": [{"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 1, "creation_date": 1507518108, "post_id": 40272077, "comment_id": 80225675, "body": "You should accept the answer that is most voted."}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 7239531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588e88e4d8e6d38bb94de4773ffbd57a?s=128&d=identicon&r=PG", "display_name": "Matt L", "link": "https://stackoverflow.com/users/7239531/matt-l"}, "is_accepted": true, "score": 21, "last_activity_date": 1480653634, "creation_date": 1480653634, "answer_id": 40924921, "question_id": 40272077, "link": "https://stackoverflow.com/questions/40272077/importerror-no-module-named-dumbnet-when-trying-to-run-a-script-that-leverage/40924921#40924921", "title": "&#39;ImportError: No module named dumbnet&#39; when trying to run a script that leverages scapy on OS X", "body": "<p>dumbnet is also known as libdnet. Source can be found at \n<a href=\"https://github.com/dugsong/libdnet\" rel=\"noreferrer\">https://github.com/dugsong/libdnet</a>. You can run the following commands in Terminal and scapy should work.</p>\n\n<pre><code>cd\ngit clone https://github.com/dugsong/libdnet.git\ncd libdnet\n./configure &amp;&amp; make\ncd python\npython setup.py install\n</code></pre>\n"}], "owner": {"reputation": 1637, "user_id": 3724464, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/TwFbe.jpg?s=128&g=1", "display_name": "timbram", "link": "https://stackoverflow.com/users/3724464/timbram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8325, "favorite_count": 2, "accepted_answer_id": 40924921, "answer_count": 1, "score": 13, "last_activity_date": 1480653634, "creation_date": 1477515837, "last_edit_date": 1477516869, "question_id": 40272077, "link": "https://stackoverflow.com/questions/40272077/importerror-no-module-named-dumbnet-when-trying-to-run-a-script-that-leverage", "title": "&#39;ImportError: No module named dumbnet&#39; when trying to run a script that leverages scapy on OS X", "body": "<p>So, I am trying to learn about the scapy library in Python and trying to run a script that uses scapy.  The script imports the module with:</p>\n\n<p><code>from scapy.all import *</code></p>\n\n<p>I saw this and of course installed scapy with:</p>\n\n<p><code>pip install scapy</code></p>\n\n<p>Next, I got the following import error:</p>\n\n<p><code>ImportError: No module named pcapy</code></p>\n\n<p>So, then I decided to install pcapy with <code>pip install pcapy</code>.  It installed fine but now I am getting the import error of: </p>\n\n<p><code>ImportError: No module named dumbnet</code></p>\n\n<p>I can't find a module called dumbnet.  Anybody know whats going on here?</p>\n\n<p>This is the first time I am messing around scapy and am using a Mac with Python 2.7 install in an activated virtual environment.</p>\n\n<p>Edit1:</p>\n\n<p>Here is the full error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"syn_test.py\", line 4, in &lt;module&gt;\n    from scapy.all import * # The One and Only Scapy\n  File \"/Users/dasComputer/venv_mac/lib/python2.7/site-packages/scapy/all.py\", line 16, in &lt;module&gt;\n    from scapy.arch import *\n  File \"/Users/dasComputer/venv_mac/lib/python2.7/site-packages/scapy/arch/__init__.py\", line 79, in &lt;module&gt;\n    from scapy.arch.pcapdnet import *\n  File \"/Users/dasComputer/venv_mac/lib/python2.7/site-packages/scapy/arch/pcapdnet.py\", line 471, in &lt;module&gt;\n    import dumbnet as dnet\nImportError: No module named dumbnet\n</code></pre>\n"}, {"tags": ["python", "pickle"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1477515918, "post_id": 40272040, "comment_id": 67804130, "body": "Why not fix the missing class issue by having your module available for import when unpickling (with <code>MyList</code> as a global in that module)?"}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1477515946, "post_id": 40272040, "comment_id": 67804144, "body": "Did you read <a href=\"https://docs.python.org/3/library/pickle.html#pickling-class-instances\" rel=\"nofollow noreferrer\">the documentation</a>?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1477515958, "post_id": 40272040, "comment_id": 67804147, "body": "You can customise what is pickled, yes, there are various hooks, see <a href=\"https://docs.python.org/3/library/pickle.html#pickling-class-instances\" rel=\"nofollow noreferrer\">docs.python.org/3/library/pickle.html#pickling-class-instanc&zwnj;&#8203;es</a>"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1477516182, "post_id": 40272040, "comment_id": 67804251, "body": "Seems like the easiest fix would be to use <code>pickle.dump(list(f), open(&#39;somefile&#39;, &#39;w&#39;))</code>"}, {"owner": {"reputation": 2589, "user_id": 216341, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c1b108747233d9f3eaa88bc109021d2?s=128&d=identicon&r=PG", "display_name": "reckoner", "link": "https://stackoverflow.com/users/216341/reckoner"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1477518174, "post_id": 40272040, "comment_id": 67805141, "body": "@mgilson Yes, but the Mlist object is embedded into other objects so I would have to unpack and re-pack them to get this to work. Thanks."}, {"owner": {"reputation": 2589, "user_id": 216341, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c1b108747233d9f3eaa88bc109021d2?s=128&d=identicon&r=PG", "display_name": "reckoner", "link": "https://stackoverflow.com/users/216341/reckoner"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1477518612, "post_id": 40272040, "comment_id": 67805295, "body": "@MartijnPieters I think I need more help than I can get from that page. Also, this is a Python 2.7 issue."}, {"owner": {"reputation": 2589, "user_id": 216341, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c1b108747233d9f3eaa88bc109021d2?s=128&d=identicon&r=PG", "display_name": "reckoner", "link": "https://stackoverflow.com/users/216341/reckoner"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1477528965, "post_id": 40272040, "comment_id": 67808183, "body": "@MartijnPieters The trick is that MyList has methods for doing one-off debugging and other forensics. I don&#39;t want to have to distribute and support it because it&#39;s not important to the final product."}], "answers": [{"tags": [], "owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "is_accepted": true, "score": 2, "last_activity_date": 1477576474, "creation_date": 1477576474, "answer_id": 40286482, "question_id": 40272040, "link": "https://stackoverflow.com/questions/40272040/pickling-an-object-as-an-instance-of-its-parent-class/40286482#40286482", "title": "Pickling an object as an instance of its parent class?", "body": "<p>I think what you wanted to do is to pickle the class instance and bundle up the class description in the pickled object.  <code>pickle</code> doesn't pickle a class description, but <code>dill</code> does.</p>\n\n<pre><code>&gt;&gt;&gt; class MyList(list):\n...   def some_function(self):\n...     pass\n... \n&gt;&gt;&gt; f = MyList()\n&gt;&gt;&gt; import dill\n&gt;&gt;&gt; dill.dump(f, open('somefile','w'))\n&gt;&gt;&gt; \n</code></pre>\n\n<p>And then upon loading, it just works...</p>\n\n<pre><code>dude@hilbert&gt;$ python\nPython 2.7.12 (default, Jun 29 2016, 12:42:34) \n[GCC 4.2.1 Compatible Apple LLVM 5.1 (clang-503.0.40)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import dill\n&gt;&gt;&gt; f = dill.load(open('somefile','r'))\n&gt;&gt;&gt; f\n[]\n&gt;&gt;&gt; type(f)\n&lt;class '__main__.MyList'&gt;\n&gt;&gt;&gt; g = f.__class__()\n</code></pre>\n"}], "owner": {"reputation": 2589, "user_id": 216341, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c1b108747233d9f3eaa88bc109021d2?s=128&d=identicon&r=PG", "display_name": "reckoner", "link": "https://stackoverflow.com/users/216341/reckoner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 40286482, "answer_count": 1, "score": 1, "last_activity_date": 1477576474, "creation_date": 1477515679, "last_edit_date": 1477516085, "question_id": 40272040, "link": "https://stackoverflow.com/questions/40272040/pickling-an-object-as-an-instance-of-its-parent-class", "title": "Pickling an object as an instance of its parent class?", "body": "<p>Suppose I had the following subclass that I'm using to temporarily endow <code>list</code> with some extra methods,</p>\n\n<pre><code>class MyList(list):\n   def some_function(self):\n       pass\n</code></pre>\n\n<p>and then I do something like</p>\n\n<pre><code>&gt;&gt;&gt; f = MyList()\n&gt;&gt;&gt; .. bunch of list stuff ...\n&gt;&gt;&gt; cPickle.dump(f,open('somefile','w'))\n</code></pre>\n\n<p>Now, that is all well and good until I try to open the file</p>\n\n<pre><code>&gt;&gt;&gt; cPickle.load(open('somefile'))\n</code></pre>\n\n<p>and I get a complaint that <code>MyList</code> doesn't exist. Is there a way to somehow\nget <code>MyList</code> to pickle as a plain <code>list</code> so that when I later try to load\nthe pickle file, I don't get this missing class error? I would like the pickle file to only refer to the built-in <code>list</code> type.</p>\n"}, {"tags": ["python", "function", "math", "range", "trigonometry"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1477515897, "creation_date": 1477515897, "answer_id": 40272088, "question_id": 40272009, "link": "https://stackoverflow.com/questions/40272009/make-a-range-of-radian-values-in-python/40272088#40272088", "title": "Make a range of radian values in Python", "body": "<p>Does this do it for you?  Let <strong>i</strong> be the measure in degrees</p>\n\n<pre><code>for i in range(90):\n    yvalues = integrand(i * math.pi/180, 60)\n</code></pre>\n\n<p>If you want the whole array at once, use a comprehension:</p>\n\n<pre><code>yyvalues = [integrand(i * math.pi/180, 60) for i in range(90)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 4111370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y6iID.png?s=128&g=1", "display_name": "TripleD", "link": "https://stackoverflow.com/users/4111370/tripled"}, "is_accepted": false, "score": 0, "last_activity_date": 1477516067, "creation_date": 1477516067, "answer_id": 40272133, "question_id": 40272009, "link": "https://stackoverflow.com/questions/40272009/make-a-range-of-radian-values-in-python/40272133#40272133", "title": "Make a range of radian values in Python", "body": "<p>Go by degrees, and convert to radians:</p>\n\n<pre><code>for i in range(0, 90):\n    radian = i * 0.0174533\n    yValue += integrand(i, 60)\n</code></pre>\n\n<p>You could also do it in a single line with list comprehensions:</p>\n\n<pre><code>yValue = [integrand(i * 0.0174533, 60) for i in range(0, 90)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1789, "user_id": 5626104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9bff58c22f757507d69a779603d3eac?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5626104/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1477516317, "creation_date": 1477516317, "answer_id": 40272193, "question_id": 40272009, "link": "https://stackoverflow.com/questions/40272009/make-a-range-of-radian-values-in-python/40272193#40272193", "title": "Make a range of radian values in Python", "body": "<p>If you're serious about math and arrays of numbers, definitely check out <a href=\"http://www.numpy.org/\" rel=\"nofollow\">numpy</a> and avoid the loop in your code altogether:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; yvalues = integrand(numpy.linspace(0,numpy.pi/2,361), 60) \n\n&gt;&gt;&gt; print(numpy.linspace(0,numpy.pi/2,17))\n[ 0.          0.09817477  0.19634954  0.29452431  0.39269908  0.49087385\n  0.58904862  0.68722339  0.78539816  0.88357293  0.9817477   1.07992247\n  1.17809725  1.27627202  1.37444679  1.47262156  1.57079633]]\n</code></pre>\n\n<p>This may require editing the <code>integrand</code> function, but getting to use numpy arrays instead of python lists can make code more readable and faster. </p>\n"}], "owner": {"reputation": 21, "user_id": 5535197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896c24537838a5a573a91db5b05ee19?s=128&d=identicon&r=PG&f=1", "display_name": "K.Parker", "link": "https://stackoverflow.com/users/5535197/k-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1814, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1477516317, "creation_date": 1477515556, "question_id": 40272009, "link": "https://stackoverflow.com/questions/40272009/make-a-range-of-radian-values-in-python", "title": "Make a range of radian values in Python", "body": "<p>I have an equation (integrand) and want the for loop to produce an array of values that can then be plotted. Both the variables in the integrand function are the arguments of cosine. math.cos only allows radian values so I want my range to be from 0 to 90 degrees (pi/2 radians) but the range function does not allow float values. How can I achieve this. My attempt, but doesn't work because of the float issue is:</p>\n\n<pre><code>for i in range(0, 0.5*(math.pi), 0.0174533):\n    yvalues = integrand(i, 60)\n</code></pre>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1477515574, "post_id": 40271988, "comment_id": 67803956, "body": "Try <code>&#39;_F__x&#39;</code> - using leading double underscores invokes name mangling, don&#39;t use it for <i>&quot;privacy&quot;</i>."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1477515657, "post_id": 40271988, "comment_id": 67804009, "body": "Why are you using <code>__getattribute__</code> anyway instead of <code>getattr</code>?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1477515718, "post_id": 40271988, "comment_id": 67804034, "body": "Or, for that matter, just <code>return self.__x</code>, which <i>would</i> be unmangled correctly. I&#39;d recommend reading <a href=\"http://stackoverflow.com/q/7456807/3001761\">stackoverflow.com/q/7456807/3001761</a>."}], "owner": {"reputation": 107, "user_id": 3579852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7835850a09f3c790855708d3374ba358?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3579852/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "closed_date": 1477516037, "answer_count": 0, "score": 0, "last_activity_date": 1477515958, "creation_date": 1477515476, "last_edit_date": 1477515958, "question_id": 40271988, "link": "https://stackoverflow.com/questions/40271988/getattribute-method-for-private-attributes", "closed_reason": "Duplicate", "title": "__getattribute__() method for private attributes", "body": "<p>In a class like this:</p>\n\n<pre><code>    class F(object):\n        def __init__(self, x=0):\n             self.__x = x\n\n        def X(self):\n            return self.__getattribute___('__x')\n</code></pre>\n\n<p>Is it possible to use <code>__getattribute__</code> for getting private attributes? Doing such Python 3 says <code>F has no attribute '__x'</code>. If my class is like this instead:</p>\n\n<pre><code>      class F(object):\n          def __init__(self, x=0):\n               self.x = x\n\n          @property\n          def x(self):\n              return self.__x\n\n          def X(self):\n              return self.__getattribute__('x')\n</code></pre>\n\n<p><code>__getattribute__</code> does work. I know private attributes aren't accessible outside of the class; does the first case not work because of something related to that?</p>\n"}, {"tags": ["python", "plot", "seaborn"], "answers": [{"comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "reply_to_user": {"reputation": 13, "user_id": 7065970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec44667cde60216dc17466e2cf5197f?s=128&d=identicon&r=PG&f=1", "display_name": "chuck", "link": "https://stackoverflow.com/users/7065970/chuck"}, "edited": false, "score": 1, "creation_date": 1477599271, "post_id": 40288781, "comment_id": 67845283, "body": "@chuck is this solved your problem, please let future visitors to this site know by marking this as an accepted answer"}], "tags": [], "owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "is_accepted": true, "score": 4, "last_activity_date": 1477582563, "creation_date": 1477582563, "answer_id": 40288781, "question_id": 40271907, "link": "https://stackoverflow.com/questions/40271907/patches-in-seaborn/40288781#40288781", "title": "Patches in seaborn", "body": "<p><code>lmplot</code> as you've learned, returns a <code>FacetGrid</code>, which stores all of its axes in an <code>axes</code> property as a 2D numpy array. </p>\n\n<p>So you just need to do something like:</p>\n\n<pre><code>fg = sns.lmplot('A', 'B', hue=\"group\", data=res_me,fit_reg=False,\n              palette=\"Set1\",size=10, aspect=1,\n              scatter_kws={\"s\": 100,\"linewidths\":2,\"edgecolor\":\"black\"})\n\nfg.axes[0, 0].add_patch(patches.Rectangle((0.912, 0.72), 1.02, \n                        0.802,fill=False,edgecolor='green',lw=3))\n</code></pre>\n\n<p>Note that if your <code>FacetGrid</code> only has one <code>Axes</code> object in it, you can access it directly with <code>fg.ax</code></p>\n"}], "owner": {"reputation": 13, "user_id": 7065970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec44667cde60216dc17466e2cf5197f?s=128&d=identicon&r=PG&f=1", "display_name": "chuck", "link": "https://stackoverflow.com/users/7065970/chuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4074, "favorite_count": 0, "accepted_answer_id": 40288781, "answer_count": 1, "score": 1, "last_activity_date": 1477586710, "creation_date": 1477515139, "last_edit_date": 1477586710, "question_id": 40271907, "link": "https://stackoverflow.com/questions/40271907/patches-in-seaborn", "title": "Patches in seaborn", "body": "<p>My intention is to add a patch at a specific coordinate in seaborn's <code>lmplot</code> :</p>\n\n<p><a href=\"https://i.stack.imgur.com/OCxEk.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/OCxEk.jpg\" alt=\"Intended seaborn plot with patch\"></a></p>\n\n<p>Is there anyway to add a rectangular/square patch to <code>lmplot</code>?</p>\n\n<p>I was able to get the plot printed out through <code>sns.lmplot()</code>. But when I try to add the rectangular patch using <code>ax.add_patch()</code> statement with relevant coordinate's, it error's out.</p>\n\n<pre><code>#Sample code to generate lmplot  and add patch   \nax= sns.lmplot('A', 'B', hue=\"group\", data=res_me,fit_reg=False, \\\n              palette=\"Set1\",size=10, aspect=1, scatter_kws={\"s\": 100,\"linewidths\":2,\"edgecolor\":\"black\"})\n\nax.add_patch(patches.Rectangle((0.912, 0.72), 1.02, .802,fill=False,edgecolor='green',lw=3))\n</code></pre>\n\n<p>I get the following error. </p>\n\n<pre><code>AttributeError: 'FacetGrid' object has no attribute 'add_patch'\n</code></pre>\n\n<p>So can we add patches to <code>FacetGrid</code> ? </p>\n"}, {"tags": ["python", "replace", "substring", "template-strings"], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1477516095, "last_edit_date": 1477516095, "creation_date": 1477515407, "answer_id": 40271972, "question_id": 40271895, "link": "https://stackoverflow.com/questions/40271895/how-to-replace-substrings-like-name-in-a-string-template/40271972#40271972", "title": "How to replace substrings like NAME in a string template?", "body": "<p>You should reassign the replaced string to the original name so the previous replacements are not thrown away:</p>\n\n<pre><code>with open('recipients.csv') as csvfile:\n    reader = csv.DictReader(csvfile)\n    for row in reader:\n        inputtext = text\n        for match in matchedfields:\n            inputtext = inputtext.replace(match, row[match])\n        print inputtext\n</code></pre>\n\n<p>On another note, you could update the original string using <em>string formatting</em> with a little modification to the string like so:</p>\n\n<pre><code>text = \"Dear {0[NAME]}, it was nice to meet you on {0[DATE]}. Hope to talk with you and {0[SPOUSE]} again soon!\"\n\nwith open('recipients.csv') as csvfile:\n    reader = csv.DictReader(csvfile)\n    for row in reader:\n        inputtext = text.format(row)\n        print inputtext\n</code></pre>\n\n<p>That formats the string with the dictionary in one step, without having to make replacements iteratively.</p>\n"}, {"tags": [], "owner": {"reputation": 6010, "user_id": 2487607, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/77dd6879d2c47000814cb47faa2079c1?s=128&d=identicon&r=PG", "display_name": "travelingbones", "link": "https://stackoverflow.com/users/2487607/travelingbones"}, "is_accepted": false, "score": 3, "last_activity_date": 1477630466, "last_edit_date": 1477630466, "creation_date": 1477515717, "answer_id": 40272048, "question_id": 40271895, "link": "https://stackoverflow.com/questions/40271895/how-to-replace-substrings-like-name-in-a-string-template/40272048#40272048", "title": "How to replace substrings like NAME in a string template?", "body": "<p>The problem is that <code>inputtext.replace(match, row[match])</code> doesn't change the <code>inputtext</code> variable, it just makes a new string that you aren't storing. Try this: </p>\n\n<pre><code>import copy \n\nwith open('recipients.csv') as csvfile:\n    reader = csv.DictReader(csvfile)\n    for row in reader:\n        inputtext_copy = copy.copy(inputtext) ## make a new copy of the input_text to be changed.\n        for match in matchedfields:\n            inputtext_copy = inputtext_copy.replace(match, row[match]) ## this saves the text with the right \n        print inputtext ## should be the original w/ generic field names \n        print inputtext_copy ## should be the new version with all fields changed to specific instantiations\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 1, "creation_date": 1477516410, "post_id": 40272169, "comment_id": 67804344, "body": "Excellent. <a href=\"https://docs.python.org/2/library/string.html?highlight=safe_substitute#string.Template.safe_substitute\" rel=\"nofollow noreferrer\">string.safe_substitute()</a> Never knew about Template strings (added back in Python 2.4)"}], "tags": [], "owner": {"reputation": 8257, "user_id": 3568092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlJHI.png?s=128&g=1", "display_name": "dangom", "link": "https://stackoverflow.com/users/3568092/dangom"}, "is_accepted": true, "score": 6, "last_activity_date": 1548630697, "last_edit_date": 1548630697, "creation_date": 1477516203, "answer_id": 40272169, "question_id": 40271895, "link": "https://stackoverflow.com/questions/40271895/how-to-replace-substrings-like-name-in-a-string-template/40272169#40272169", "title": "How to replace substrings like NAME in a string template?", "body": "<p>I think the real way to go here is to use string templates. Makes your life easy.</p>\n\n<p>Here is a general solution that works under Python2 and 3:</p>\n\n<pre><code>import string\n\ntemplate_text = string.Template((\"Dear ${NAME}, \"\n                                 \"it was nice to meet you on ${DATE}. \"\n                                 \"Hope to talk with you and ${SPOUSE} again soon!\"))\n</code></pre>\n\n<p>And then </p>\n\n<pre><code>import csv\n\nwith open('recipients.csv') as csvfile:\n    reader = csv.DictReader(csvfile)\n    for row in reader:\n        print(template_text.safe_substitute(row))\n</code></pre>\n\n<p>Now, I noticed that your csv is kind of messed up with whitespaces, so you'll have to take care of that first (or adapt the call to either the csv reader or the template).</p>\n"}], "owner": {"reputation": 1633, "user_id": 1592764, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c7b74add83c996da44919e1f709c000f?s=128&d=identicon&r=PG", "display_name": "Marcatectura", "link": "https://stackoverflow.com/users/1592764/marcatectura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1302, "favorite_count": 0, "accepted_answer_id": 40272169, "answer_count": 3, "score": 2, "last_activity_date": 1548630697, "creation_date": 1477515105, "last_edit_date": 1477516529, "question_id": 40271895, "link": "https://stackoverflow.com/questions/40271895/how-to-replace-substrings-like-name-in-a-string-template", "title": "How to replace substrings like NAME in a string template?", "body": "<p>I've got a string containing substrings I'd like to replace, e.g.</p>\n\n<pre><code>text = \"Dear NAME, it was nice to meet you on DATE. Hope to talk with you and SPOUSE again soon!\"\n</code></pre>\n\n<p>I've got a csv of the format (first row is a header)</p>\n\n<pre><code>NAME, DATE, SPOUSE\nJohn, October 1, Jane\nJane, September 30, John\n...\n</code></pre>\n\n<p>I'm trying to loop through each row in the csv file, replacing substrings in <code>text</code> with the csv element from the column with header row matching the original substring. I've got a list called <code>matchedfields</code> which contains all the fields that are found in the csv header row and <code>text</code> (in case there are some columns in the csv I don't need to use). My next step is to iterate through each csv row and replace the matched fields with the element from that csv column. To accomplish this, I'm using </p>\n\n<pre><code>with open('recipients.csv') as csvfile:\n reader = csv.DictReader(csvfile)\n for row in reader:\n     for match in matchedfields:\n        print inputtext.replace(match, row[match])\n</code></pre>\n\n<p>My problem is that this only replaces the first matched substring in <code>text</code> with the appropriate element from the csv. Is there a way to make multiple replacements simultaneously so I end up with</p>\n\n<pre><code>\"Dear John, it was nice to meet you on October 1. Hope to talk with you and Jane again soon!\"\n\n\"Dear Jane, it was nice to meet you on September 30. Hope to talk with you and John again soon!\"\n</code></pre>\n"}, {"tags": ["python", "django", "pythonanywhere"], "comments": [{"owner": {"reputation": 12921, "user_id": 366221, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/16ae2626136e8542b448b50f2bd8f0fc?s=128&d=identicon&r=PG", "display_name": "hwjp", "link": "https://stackoverflow.com/users/366221/hwjp"}, "edited": false, "score": 1, "creation_date": 1477580472, "post_id": 40271891, "comment_id": 67834261, "body": "I would suggest removing whitenoise, and replacing it with PythonAnywhere&#39;s official static files system, and using that same system to set up a MEDIA_URL and directory -- more info here: <a href=\"https://help.pythonanywhere.com/pages/DjangoStaticFiles\" rel=\"nofollow noreferrer\">help.pythonanywhere.com/pages/DjangoStaticFiles</a>"}, {"owner": {"reputation": 260, "user_id": 978237, "user_type": "registered", "profile_image": "https://graph.facebook.com/584909039/picture?type=large", "display_name": "sonifex", "link": "https://stackoverflow.com/users/978237/sonifex"}, "reply_to_user": {"reputation": 12921, "user_id": 366221, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/16ae2626136e8542b448b50f2bd8f0fc?s=128&d=identicon&r=PG", "display_name": "hwjp", "link": "https://stackoverflow.com/users/366221/hwjp"}, "edited": false, "score": 0, "creation_date": 1477601528, "post_id": 40271891, "comment_id": 67846434, "body": "I have used the official media files system for Media files and it worked. Still using whitenoise for static files. Thanks. I have solved the problem after two days."}], "owner": {"reputation": 260, "user_id": 978237, "user_type": "registered", "profile_image": "https://graph.facebook.com/584909039/picture?type=large", "display_name": "sonifex", "link": "https://stackoverflow.com/users/978237/sonifex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477515709, "creation_date": 1477515091, "last_edit_date": 1477515709, "question_id": 40271891, "link": "https://stackoverflow.com/questions/40271891/uploaded-images-need-server-reload", "title": "Uploaded Images need server reload", "body": "<p>I am new at django.\nI upload images and it was working well when in development.</p>\n\n<p>I use pythonanywhere for deploy my code. </p>\n\n<p>The problem is  I can upload image on admin but can't display unless reload the server.</p>\n\n<p>I can show some code snippets you want.</p>\n\n<p>I have no idea what the problem is</p>\n\n<p>Also used Whitenoise to server media files. I added below the code I put to wsgi file in pythonanywhere</p>\n\n<pre><code>application = DjangoWhiteNoise(application)\n\napplication = WhiteNoise(\n   DjangoWhiteNoise(get_wsgi_application()),\n   root=settings.MEDIA_ROOT,\n   prefix='/media/', \n)\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 1, "creation_date": 1477514973, "post_id": 40271848, "comment_id": 67803663, "body": "<code>temp[1:2,1:].shape = (1, 2)</code>, so try <code>temp[[filter_indices], [filter_indices2]]</code>."}, {"owner": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "reply_to_user": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 0, "creation_date": 1477515020, "post_id": 40271848, "comment_id": 67803684, "body": "Awesome, why does that work though?"}], "answers": [{"tags": [], "owner": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "is_accepted": true, "score": 2, "last_activity_date": 1477515403, "creation_date": 1477515403, "answer_id": 40271971, "question_id": 40271848, "link": "https://stackoverflow.com/questions/40271848/why-arent-the-numpy-matrices-equal/40271971#40271971", "title": "Why aren&#39;t the numpy matrices equal?", "body": "<p>Ultimately it is the product of your first slice, as there is a difference between indexing with <code>slice(1, 2)</code> and <code>[1]</code>.  By indexing with <code>1:2</code>, you produce</p>\n\n<pre><code>&gt; temp[1:2]\narray([[4, 5, 6]])\n</code></pre>\n\n<p>which has shape <code>(1, 3)</code>, i.e. a row vector (1 row, 3 cols). Using <code>filter_indices</code>, you are producing essentially</p>\n\n<pre><code>&gt; temp[1] #equivalent to temp[filter_indices]\narray([4, 5, 6])\n</code></pre>\n\n<p>with shape <code>(3,)</code>. To get the same behavior, index with</p>\n\n<pre><code>&gt; temp[[1]] #equivalent to temp[[filter_indices]]\narray([[4, 5, 6]])\n</code></pre>\n"}], "owner": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 40271971, "answer_count": 1, "score": 1, "last_activity_date": 1477515403, "creation_date": 1477514871, "last_edit_date": 1477514983, "question_id": 40271848, "link": "https://stackoverflow.com/questions/40271848/why-arent-the-numpy-matrices-equal", "title": "Why aren&#39;t the numpy matrices equal?", "body": "<p>Why does this return False?</p>\n\n<pre><code>temp = np.array([[1,2,3],[4,5,6], [7,8,9]])\n\nfilter_indices = range(3)[1:2]\nfilter_indices2 = range(3)[1:]\n\nprint np.array_equal(temp[1:2,1:], temp[filter_indices, filter_indices2])\n</code></pre>\n\n<p>but these are equal:</p>\n\n<pre><code>np.array_equal(temp[1:2,1:], temp[filter_indices, 1:])\n</code></pre>\n\n<p>It looks like they'd be the same to me, but it seems like this second array is filtering differently than the first.</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql", "pyspark-sql"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 1903670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWLER.jpg?s=128&g=1", "display_name": "omnisius", "link": "https://stackoverflow.com/users/1903670/omnisius"}, "edited": false, "score": 0, "creation_date": 1561381338, "post_id": 40272034, "comment_id": 100033043, "body": "Thanks a lot ! This function really is usefull"}], "tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": true, "score": 11, "last_activity_date": 1477517380, "last_edit_date": 1477517380, "creation_date": 1477515666, "answer_id": 40272034, "question_id": 40271814, "link": "https://stackoverflow.com/questions/40271814/get-last-monday-in-spark/40272034#40272034", "title": "Get Last Monday in Spark", "body": "<p>You can determine next date using <code>next_day</code> and subtract a week. Required functions can be imported as follows:</p>\n\n<pre><code>from pyspark.sql.functions import next_day, date_sub\n</code></pre>\n\n<p>And as:</p>\n\n<pre><code>def previous_day(date, dayOfWeek):\n    return date_sub(next_day(date, \"monday\"), 7)\n</code></pre>\n\n<p>Finally an example:</p>\n\n<pre><code>from pyspark.sql.functions import to_date\n\ndf = sc.parallelize([\n    (\"2016-10-26\", )\n]).toDF([\"date\"]).withColumn(\"date\", to_date(\"date\"))\n\ndf.withColumn(\"last_monday\", previous_day(\"date\", \"monday\"))\n</code></pre>\n\n<p>With result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>+----------+-----------+\n|      date|last_monday|\n+----------+-----------+\n|2016-10-26| 2016-10-24|\n+----------+-----------+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7732819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23c819cffaf3e25ebb36ff66baead9f?s=128&d=identicon&r=PG&f=1", "display_name": "philomine", "link": "https://stackoverflow.com/users/7732819/philomine"}, "is_accepted": false, "score": 1, "last_activity_date": 1607348788, "creation_date": 1607348788, "answer_id": 65182896, "question_id": 40271814, "link": "https://stackoverflow.com/questions/40271814/get-last-monday-in-spark/65182896#65182896", "title": "Get Last Monday in Spark", "body": "<p>I found out that pyspark's function <code>trunc</code> also works.</p>\n<pre><code>import pyspark.sql.functions as f\n\ndf = spark.createDataFrame([\n    (datetime.date(2020, 10, 27), ),\n    (datetime.date(2020, 12, 21), ),\n    (datetime.date(2020, 10, 13), ),\n    (datetime.date(2020, 11, 11), ),\n], [&quot;date_col&quot;])\ndf = df.withColumn(&quot;first_day_of_week&quot;, f.trunc(&quot;date_col&quot;, &quot;week&quot;))\n</code></pre>\n"}], "owner": {"reputation": 128, "user_id": 4882743, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203770111685594/picture?type=large", "display_name": "Porter James", "link": "https://stackoverflow.com/users/4882743/porter-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3386, "favorite_count": 0, "accepted_answer_id": 40272034, "answer_count": 2, "score": 6, "last_activity_date": 1607348788, "creation_date": 1477514709, "last_edit_date": 1539230175, "question_id": 40271814, "link": "https://stackoverflow.com/questions/40271814/get-last-monday-in-spark", "title": "Get Last Monday in Spark", "body": "<p>I am using Spark 2.0 with the Python API.</p>\n\n<p>I have a dataframe with a column of type DateType(). I would like to add a column to the dataframe containing the most recent Monday.</p>\n\n<p>I can do it like this:</p>\n\n<pre><code>reg_schema = pyspark.sql.types.StructType([\n    pyspark.sql.types.StructField('AccountCreationDate', pyspark.sql.types.DateType(), True),\n    pyspark.sql.types.StructField('UserId', pyspark.sql.types.LongType(), True)\n])\nreg = spark.read.schema(reg_schema).option('header', True).csv(path_to_file)\nreg = reg.withColumn('monday',\n    pyspark.sql.functions.when(pyspark.sql.functions.date_format(reg.AccountCreationDate,'E') == 'Mon',\n        reg.AccountCreationDate).otherwise(\n    pyspark.sql.functions.when(pyspark.sql.functions.date_format(reg.AccountCreationDate,'E') == 'Tue',\n        pyspark.sql.functions.date_sub(reg.AccountCreationDate, 1)).otherwise(\n    pyspark.sql.functions.when(pyspark.sql.functions.date_format(reg.AccountCreationDate, 'E') == 'Wed',\n        pyspark.sql.functions.date_sub(reg.AccountCreationDate, 2)).otherwise(\n    pyspark.sql.functions.when(pyspark.sql.functions.date_format(reg.AccountCreationDate, 'E') == 'Thu',\n        pyspark.sql.functions.date_sub(reg.AccountCreationDate, 3)).otherwise(\n    pyspark.sql.functions.when(pyspark.sql.functions.date_format(reg.AccountCreationDate, 'E') == 'Fri',\n        pyspark.sql.functions.date_sub(reg.AccountCreationDate, 4)).otherwise(\n    pyspark.sql.functions.when(pyspark.sql.functions.date_format(reg.AccountCreationDate, 'E') == 'Sat',\n        pyspark.sql.functions.date_sub(reg.AccountCreationDate, 5)).otherwise(\n    pyspark.sql.functions.when(pyspark.sql.functions.date_format(reg.AccountCreationDate, 'E') == 'Sun',\n        pyspark.sql.functions.date_sub(reg.AccountCreationDate, 6))\n        )))))))\n</code></pre>\n\n<p>However, this seems like a lot of code for something that should be rather simple. Is there a more concise way of doing this?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "boolean", "countif"], "comments": [{"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 2, "creation_date": 1477515428, "post_id": 40271809, "comment_id": 67803889, "body": "Your <code>df2</code> is not reproducible. <code>df_data</code> is not defined here."}, {"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "reply_to_user": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1477515500, "post_id": 40271809, "comment_id": 67803915, "body": "fixed Psidom. Thanks."}, {"owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "edited": false, "score": 0, "creation_date": 1480107870, "post_id": 40271809, "comment_id": 68844730, "body": "Will we tidy this question and answer up?"}, {"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1480357868, "post_id": 40271809, "comment_id": 68918805, "body": "Sorry is there something I did not do? I upvoted both of your answers and selected the second as it&#39;s more concise for others to look at. Great answers, very much appreciate your time."}, {"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1480358648, "post_id": 40271809, "comment_id": 68919203, "body": "On a separate note, I don&#39;t find the docs on manipulating df.rolling() objects to be as fleshed out as many other topics. It would be useful to replace the 0.95 below with another derivation of the same rolling data."}], "answers": [{"comments": [{"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1477688169, "post_id": 40295159, "comment_id": 67883314, "body": "thanks Dickster, really appreciate your input. While I am working through your solution, I added some color to my question above - probably didn&#39;t ask clearly enough."}, {"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1477923776, "post_id": 40295159, "comment_id": 67942339, "body": "works perfectly, thanks again. i believe the .between() approach outperforms the first method. i am going to ask a follow up as a new question."}, {"owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "reply_to_user": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1478183921, "post_id": 40295159, "comment_id": 68058738, "body": "cool point me at that - and credit on features shown by the others on the thread that are implemented."}, {"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1478627308, "post_id": 40295159, "comment_id": 68230838, "body": "hi Dickster - after further use, something appears to be off. When I replace the original &#39;list1&#39; with list1 = [[21,101],[22,110],[25,113],[24,112],[21,109],[26,108],[25,1&zwnj;&#8203;02],[26,106],[25,111&zwnj;&#8203;],[22,110]], the output with the Series.between() solution does not appear correct. Any chance you can take a look?"}, {"owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "reply_to_user": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1478727505, "post_id": 40295159, "comment_id": 68274606, "body": "I don&#39;t see the issue using the new data. What is it that you think is wrong?"}, {"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1478729313, "post_id": 40295159, "comment_id": 68275326, "body": "I posted the new data in the question above. df3.ix[&#39;2000-01-06&#39;,&#39;A&#39;] should not = 1.0 because 26 is not between any of the 5 prior low:high pairs (x*0.95:x)."}, {"owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "reply_to_user": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1479079905, "post_id": 40295159, "comment_id": 68395649, "body": "I think there may be a disconnect in my solution and how I have perceived the question and how you perceive the solution should be working. I wonder can you make an excel spreadsheet available with a couple of examples and your expected behaviour?"}, {"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1479160893, "post_id": 40295159, "comment_id": 68432638, "body": "i took a snapshot of a spreadsheet with 3 examples and pasted above. if there is a way to attach the sheet itself with formulas, i would be happy to do but don&#39;t know how. thanks again for looking."}, {"owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "reply_to_user": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1479336036, "post_id": 40295159, "comment_id": 68519358, "body": "see new answer. I recognize your list in the comments (2 columns) is different from the new screen shots."}], "tags": [], "owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "is_accepted": false, "score": 2, "last_activity_date": 1477757437, "last_edit_date": 1477757437, "creation_date": 1477607128, "answer_id": 40295159, "question_id": 40271809, "link": "https://stackoverflow.com/questions/40271809/how-can-i-replicate-excel-countifs-in-python-pandas/40295159#40295159", "title": "How can I replicate excel COUNTIFS in python/pandas?", "body": "<pre><code>list1 = [[21,101],[22,110],[25,113],[24,112],[21,109],[28,108],[30,102],[26,106],[25,111],[24,110]]\ndf = pd.DataFrame(list1,index=pd.date_range('2000-1-1',periods=10, freq='D'), columns=list('AB'))\ndf2 = pd.DataFrame(df * (1-.05))\n\n\nwindow = 6\nresults = []\nfor i in range (len(df)-window+1):\n    slice_df1 = df.iloc[i:i + window]\n    slice_df2 = df2.iloc[i:i + window]\n    compare1 = slice_df1['A'].iloc[-1]\n    compare2 = slice_df2['A'].iloc[-1]\n    a= slice_df1.iloc[:-1]['A'].between(compare2,compare1)  # series have a between metho\n    results.append(a.sum())\n\ndf_res =  pd.DataFrame(data = results , index = df.index[window-1:] , columns = ['countifs'])\ndf_res = df_res.reindex(df.index,fill_value=0.0)\nprint df_res\n\nwhich yields:\n\n            countifs\n2000-01-01    0.0000\n2000-01-02    0.0000\n2000-01-03    0.0000\n2000-01-04    0.0000\n2000-01-05    0.0000\n2000-01-06    0.0000\n2000-01-07    0.0000\n2000-01-08    1.0000\n2000-01-09    1.0000\n2000-01-10    0.0000\n</code></pre>\n\n<p>BUT</p>\n\n<p>Seeing there is a logical relationship between your upper and lower bound,  value and value - 5%. Then this will perhaps be what you want.</p>\n\n<pre><code>    df3 = pd.DataFrame(\n         df.rolling(center=False,window=6).apply(\n            lambda rollwin: sum(np.logical_and(\n                                    rollwin[-1]*0.95 &lt;= rollwin[:-1]\n                                   ,rollwin[:-1] &lt; rollwin[-1]) \n                                )))\n</code></pre>\n\n<p>and if you prefer the pd.Series.between() approach:</p>\n\n<pre><code>df3 = pd.DataFrame(\n     df.rolling(center=False,window=6).apply(\n          lambda rollwin: pd.Series(rollwin[:-1]).between(rollwin[-1]*0.95,rollwin[-1]).sum()))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "edited": false, "score": 0, "creation_date": 1479498798, "post_id": 40643644, "comment_id": 68600501, "body": "it works. thank you so much. toggling between inclusive=True/False is important."}], "tags": [], "owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "is_accepted": true, "score": 2, "last_activity_date": 1479336025, "creation_date": 1479336025, "answer_id": 40643644, "question_id": 40271809, "link": "https://stackoverflow.com/questions/40271809/how-can-i-replicate-excel-countifs-in-python-pandas/40643644#40643644", "title": "How can I replicate excel COUNTIFS in python/pandas?", "body": "<pre><code>list1 = [[21,50,101],[22,52,110],[25,49,113],[24,49,112],[21,55,109],[28,54,108],[30,57,102],[26,56,106],[25,58,111],[24,60,110]]\ndf = pd.DataFrame(list1,index=pd.date_range('2000-1-1',periods=10, freq='D'), columns=list('ABC'))\n\nprint df\n</code></pre>\n\n<p>I believe this matches your new screen shot \"Given Data\".</p>\n\n<pre><code>             A   B    C\n2000-01-01  21  50  101\n2000-01-02  22  52  110\n2000-01-03  25  49  113\n2000-01-04  24  49  112\n2000-01-05  21  55  109\n2000-01-06  28  54  108\n2000-01-07  30  57  102\n2000-01-08  26  56  106\n2000-01-09  25  58  111\n2000-01-10  24  60  110\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/64TOu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/64TOu.png\" alt=\"enter image description here\"></a></p>\n\n<p>and the same function:</p>\n\n<pre><code>print pd.DataFrame(\n           df.rolling(center=False,window=6).\n              apply(lambda rollwin: pd.Series(rollwin[:-1]).\n                   between(rollwin[-1]*0.95,rollwin[-1]).sum()))\n</code></pre>\n\n<p>gives your desired output \"Desired outcome\":</p>\n\n<pre><code>             A   B   C\n2000-01-01 nan nan nan\n2000-01-02 nan nan nan\n2000-01-03 nan nan nan\n2000-01-04 nan nan nan\n2000-01-05 nan nan nan\n2000-01-06   0   1   0\n2000-01-07   0   1   0\n2000-01-08   1   2   1\n2000-01-09   1   2   3\n2000-01-10   0   2   3\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/uMJgn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uMJgn.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1393, "user_id": 4263878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c95a66d30180a95353e7e655d0020f51?s=128&d=identicon&r=PG&f=1", "display_name": "MJS", "link": "https://stackoverflow.com/users/4263878/mjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4188, "favorite_count": 0, "accepted_answer_id": 40643644, "answer_count": 2, "score": 5, "last_activity_date": 1479336025, "creation_date": 1477514690, "last_edit_date": 1495541237, "question_id": 40271809, "link": "https://stackoverflow.com/questions/40271809/how-can-i-replicate-excel-countifs-in-python-pandas", "title": "How can I replicate excel COUNTIFS in python/pandas?", "body": "<p>I would like to get a count for the # of the previous 5 values in df['A'] which are &lt; current value in df['A'] &amp; are also >= df2['A']. I am trying to avoid looping over every row and columns because I'd like to apply this to a larger data set.</p>\n\n<p>Given this...</p>\n\n<pre><code>list1 = [[21,101],[22,110],[25,113],[24,112],[21,109],[28,108],[30,102],[26,106],[25,111],[24,110]]\ndf = pd.DataFrame(list1,index=pd.date_range('2000-1-1',periods=10, freq='D'), columns=list('AB'))\ndf2 = pd.DataFrame(df * (1-.05))\n</code></pre>\n\n<p>I would like to return this (solved in Excel with COUNTIFS)...</p>\n\n<p><a href=\"https://i.stack.imgur.com/vM0Fn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vM0Fn.png\" alt=\"enter image description here\"></a></p>\n\n<p>The line below achieves the first part (thanks Alexander), and Divakar and DSM have also weighed in previously (<a href=\"https://stackoverflow.com/questions/33289664/comparing-single-dataframe-value-to-previous-10-in-same-column\">here</a> and <a href=\"https://stackoverflow.com/questions/28506255/in-pandas-how-to-calculate-countif-on-a-moving-window-basis\">here</a>).</p>\n\n<pre><code>df3 = pd.DataFrame(df.rolling(center=False,window=6).apply(lambda rollwin: sum((rollwin[:-1] &lt; rollwin[-1]))))\n</code></pre>\n\n<p>But I am unable to to add the comparison to df2. Please help. </p>\n\n<p>FOLLOW UP on 10/27/16:</p>\n\n<p>How would I write the lambda above as a standard function? </p>\n\n<p>10/28/16: </p>\n\n<p>See below, taking col 'A' from both df and df2, I am trying to count how many of the previous 5 values from df['A'] fall between the current df2['A'] and df['A']. Said differently, how many from each orange box fall between the yellow low-high range?</p>\n\n<p><a href=\"https://i.stack.imgur.com/jSmk0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jSmk0.png\" alt=\"enter image description here\"></a></p>\n\n<p>UPDATE: different list1 data produces incorrect df3...</p>\n\n<pre><code>list1 = [[21,101],[22,110],[25,113],[24,112],[21,109],[26,108],[25,102],[26,106],[25,111],[22,110]]\ndf = pd.DataFrame(list1,index=pd.date_range('2000-1-1',periods=10, freq='D'), columns=list('AB'))\ndf2 = pd.DataFrame(df * (1-.05))\n\ndf3 = pd.DataFrame(\n     df.rolling(center=False,window=6).apply(\n          lambda rollwin: pd.Series(rollwin[:-1]).between(rollwin[-1]*0.95,rollwin[-1]).sum()))\n\ndf\nOut[9]: \n             A    B\n2000-01-01  21  101\n2000-01-02  22  110\n2000-01-03  25  113\n2000-01-04  24  112\n2000-01-05  21  109\n2000-01-06  26  108\n2000-01-07  25  102\n2000-01-08  26  106\n2000-01-09  25  111\n2000-01-10  22  110\n\n\ndf3\nOut[8]: \n              A    B\n2000-01-01  NaN  NaN\n2000-01-02  NaN  NaN\n2000-01-03  NaN  NaN\n2000-01-04  NaN  NaN\n2000-01-05  NaN  NaN\n2000-01-06  1.0  0.0\n2000-01-07  2.0  0.0\n2000-01-08  3.0  1.0\n2000-01-09  2.0  3.0\n2000-01-10  1.0  3.0\n</code></pre>\n\n<p>EXCEL EXAMPLES (11/14): see below, trying to count how many numbers in the blue box fall between the range highlighted in orange. </p>\n\n<p><a href=\"https://i.stack.imgur.com/vBmcg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vBmcg.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 0, "creation_date": 1477514439, "post_id": 40271741, "comment_id": 67803400, "body": "<code>append</code> returns None..."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1477514456, "post_id": 40271741, "comment_id": 67803412, "body": "The reason is that <code>append</code> modifies the list in place and returns None.  Search to find gazillions of other questions about this on here."}], "owner": {"reputation": 53, "user_id": 7049572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5Gtk.jpg?s=128&g=1", "display_name": "Gingerbread", "link": "https://stackoverflow.com/users/7049572/gingerbread"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1477514476, "answer_count": 0, "score": 0, "last_activity_date": 1550030751, "creation_date": 1477514426, "last_edit_date": 1550030751, "question_id": 40271741, "link": "https://stackoverflow.com/questions/40271741/none-output-in-the-assignments-of-lists", "closed_reason": "Duplicate", "title": "None output in the assignments of lists", "body": "<pre><code>a = [1,2,3]\nx=a.append(2009)\nprint (x)\n</code></pre>\n\n<p>Output is : </p>\n\n<pre><code>None\n</code></pre>\n\n<p>What is the main reason of it ?</p>\n"}, {"tags": ["python", "layout", "pyqt", "pyqt4", "qt-designer"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1477515320, "post_id": 40271708, "comment_id": 67803841, "body": "It might be better if you posted the qt designer ui file, rather than the pyqt code."}, {"owner": {"reputation": 131, "user_id": 5014810, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-J6BeYU1wwGU/AAAAAAAAAAI/AAAAAAAAAAA/BGWFsJr90Ms/photo.jpg?sz=128", "display_name": "Marius Valentavicius", "link": "https://stackoverflow.com/users/5014810/marius-valentavicius"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1477678916, "post_id": 40271708, "comment_id": 67879206, "body": "@ekhumoro sorry yesterday was unable to login, so post is edited with the ui file at the end."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1477759783, "post_id": 40271708, "comment_id": 67898415, "body": "The ui file looks nothing like the image you posted. It has ordinary push-buttons at top-left and top-right. Also, there is no progress bar named <code>RoundPrg1</code> in the python code you posted."}, {"owner": {"reputation": 131, "user_id": 5014810, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-J6BeYU1wwGU/AAAAAAAAAAI/AAAAAAAAAAA/BGWFsJr90Ms/photo.jpg?sz=128", "display_name": "Marius Valentavicius", "link": "https://stackoverflow.com/users/5014810/marius-valentavicius"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1477819281, "post_id": 40271708, "comment_id": 67910303, "body": "@ekhumoro this progress bar is custom made so there is no way I can put in qt designer (or I dont know how) and in python code there is two lines with RoundPrg1,2 &lt;code&gt;         self.MainVarsLayout.addWidget(self.RoundPrg)#(self.speedBarp&zwnj;&#8203;lace) &lt;code&gt;"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 1, "creation_date": 1477839851, "post_id": 40271708, "comment_id": 67915788, "body": "Where did you get the code for the custom widgets? You need to provide all the code that is relevant to the problem."}, {"owner": {"reputation": 131, "user_id": 5014810, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-J6BeYU1wwGU/AAAAAAAAAAI/AAAAAAAAAAA/BGWFsJr90Ms/photo.jpg?sz=128", "display_name": "Marius Valentavicius", "link": "https://stackoverflow.com/users/5014810/marius-valentavicius"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1477864622, "post_id": 40271708, "comment_id": 67923250, "body": "@ekhumoro sorry didnt think about my progress bar code. I edited post and added link to the progress bar file (coz code bit too long). And thank you for your time."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 1, "creation_date": 1477946963, "post_id": 40271708, "comment_id": 67955232, "body": "It seems you got the progress bar code from <a href=\"http://stackoverflow.com/q/33577068/984421\">this question</a>, and I can see the same clipping in the screenshot shown there. I suggest you ask the original author if they are able to fix the bug."}, {"owner": {"reputation": 131, "user_id": 5014810, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-J6BeYU1wwGU/AAAAAAAAAAI/AAAAAAAAAAA/BGWFsJr90Ms/photo.jpg?sz=128", "display_name": "Marius Valentavicius", "link": "https://stackoverflow.com/users/5014810/marius-valentavicius"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1477948535, "post_id": 40271708, "comment_id": 67955887, "body": "@ekhumoro yes you are right I get from that post. I will try to ask the author. Thanks!"}], "owner": {"reputation": 131, "user_id": 5014810, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-J6BeYU1wwGU/AAAAAAAAAAI/AAAAAAAAAAA/BGWFsJr90Ms/photo.jpg?sz=128", "display_name": "Marius Valentavicius", "link": "https://stackoverflow.com/users/5014810/marius-valentavicius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 732, "favorite_count": 0, "closed_date": 1478142637, "answer_count": 0, "score": 2, "last_activity_date": 1477864516, "creation_date": 1477514341, "last_edit_date": 1477864516, "question_id": 40271708, "link": "https://stackoverflow.com/questions/40271708/pyqt-layout-cuts-off-part-of-widget-edges", "closed_reason": "Not suitable for this site", "title": "PyQt: layout cuts off part of widget edges", "body": "<p>I'm trying to make a layout for my app. I designed it in Qt Designer, and in the preview everything looks right. But when I run the code, the progress bar sides are cut off.</p>\n\n<p><img src=\"https://i.stack.imgur.com/Bx306.png\" alt=\"program window looks like this\"></p>\n\n<p>I guess I need to play with size-policy or something? Here is the actual code (the progress bar is <code>RoundPrg1</code>):</p>\n\n<pre><code>def setupUi(self, MainWindow):\n    MainWindow.setObjectName(_fromUtf8(\"MainWindow\"))\n    MainWindow.resize(800, 600)\n    self.centralwidget = QtGui.QWidget(MainWindow)\n    self.centralwidget.setObjectName(_fromUtf8(\"centralwidget\"))\n    self.gridLayout_2 = QtGui.QGridLayout(self.centralwidget)\n    self.gridLayout_2.setObjectName(_fromUtf8(\"gridLayout_2\"))\n    self.gridLayout = QtGui.QGridLayout()\n    self.gridLayout.setObjectName(_fromUtf8(\"gridLayout\"))\n    self.MainVarsLayout = QtGui.QHBoxLayout()\n    self.MainVarsLayout.setSizeConstraint(QtGui.QLayout.SetDefaultConstraint)\n    self.MainVarsLayout.setMargin(10)\n    self.MainVarsLayout.setSpacing(10)\n    self.MainVarsLayout.setObjectName(_fromUtf8(\"MainVarsLayout\"))\n    #self.speedBarplace = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Preferred)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(2)\n    #sizePolicy.setHeightForWidth(self.speedBarplace.sizePolicy().hasHeightForWidth())\n    #self.speedBarplace.setSizePolicy(sizePolicy)\n    #self.speedBarplace.setMinimumSize(QtCore.QSize(300, 270))\n    #self.speedBarplace.setObjectName(_fromUtf8(\"speedBarplace\"))\n    self.MainVarsLayout.addWidget(self.RoundPrg)#(self.speedBarplace)\n    self.MainVariablesLayout = QtGui.QVBoxLayout()\n    self.MainVariablesLayout.setObjectName(_fromUtf8(\"MainVariablesLayout\"))\n    self.temperaturePlace = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Fixed)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(2)\n    sizePolicy.setHeightForWidth(self.temperaturePlace.sizePolicy().hasHeightForWidth())\n    self.temperaturePlace.setSizePolicy(sizePolicy)\n    self.temperaturePlace.setMinimumSize(QtCore.QSize(0, 130))\n    self.temperaturePlace.setObjectName(_fromUtf8(\"temperaturePlace\"))\n    self.MainVariablesLayout.addWidget(self.temperaturePlace)\n    self.fuelPlace = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Fixed)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(2)\n    sizePolicy.setHeightForWidth(self.fuelPlace.sizePolicy().hasHeightForWidth())\n    self.fuelPlace.setSizePolicy(sizePolicy)\n    self.fuelPlace.setMinimumSize(QtCore.QSize(0, 130))\n    self.fuelPlace.setObjectName(_fromUtf8(\"fuelPlace\"))\n    self.MainVariablesLayout.addWidget(self.fuelPlace)\n    self.MainVarsLayout.addLayout(self.MainVariablesLayout)\n    #self.rpmPlace = QtGui.QPushButton(self.centralwidget)\n    #sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Minimum)\n    #sizePolicy.setHorizontalStretch(0)\n    #sizePolicy.setVerticalStretch(2)\n    #sizePolicy.setHeightForWidth(self.rpmPlace.sizePolicy().hasHeightForWidth())\n    #self.rpmPlace.setSizePolicy(sizePolicy)\n    #self.rpmPlace.setMinimumSize(QtCore.QSize(300, 270))\n    #self.rpmPlace.setObjectName(_fromUtf8(\"rpmPlace\"))\n    self.MainVarsLayout.addWidget(self.RoundPrg2)#(self.rpmPlace)\n    self.gridLayout.addLayout(self.MainVarsLayout, 1, 0, 1, 1)\n    self.InfoLayout = QtGui.QHBoxLayout()\n    self.InfoLayout.setSizeConstraint(QtGui.QLayout.SetFixedSize)\n    self.InfoLayout.setObjectName(_fromUtf8(\"InfoLayout\"))\n    self.pushButton_2 = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Preferred)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.pushButton_2.sizePolicy().hasHeightForWidth())\n    self.pushButton_2.setSizePolicy(sizePolicy)\n    self.pushButton_2.setObjectName(_fromUtf8(\"pushButton_2\"))\n    self.InfoLayout.addWidget(self.pushButton_2)\n    self.pushButton_3 = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Preferred)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.pushButton_3.sizePolicy().hasHeightForWidth())\n    self.pushButton_3.setSizePolicy(sizePolicy)\n    self.pushButton_3.setObjectName(_fromUtf8(\"pushButton_3\"))\n    self.InfoLayout.addWidget(self.pushButton_3)\n    self.pushButton_4 = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Preferred)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.pushButton_4.sizePolicy().hasHeightForWidth())\n    self.pushButton_4.setSizePolicy(sizePolicy)\n    self.pushButton_4.setObjectName(_fromUtf8(\"pushButton_4\"))\n    self.InfoLayout.addWidget(self.pushButton_4)\n    self.pushButton = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Preferred)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.pushButton.sizePolicy().hasHeightForWidth())\n    self.pushButton.setSizePolicy(sizePolicy)\n    self.pushButton.setObjectName(_fromUtf8(\"pushButton\"))\n    self.InfoLayout.addWidget(self.pushButton)\n    self.ComputerInfoLayout = QtGui.QVBoxLayout()\n    self.ComputerInfoLayout.setObjectName(_fromUtf8(\"ComputerInfoLayout\"))\n    self.PcuTempBar = QtGui.QProgressBar(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Fixed)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.PcuTempBar.sizePolicy().hasHeightForWidth())\n    self.PcuTempBar.setSizePolicy(sizePolicy)\n    self.PcuTempBar.setMinimumSize(QtCore.QSize(0, 0))\n    self.PcuTempBar.setProperty(\"value\", 24)\n    self.PcuTempBar.setObjectName(_fromUtf8(\"PcuTempBar\"))\n    self.ComputerInfoLayout.addWidget(self.PcuTempBar)\n    self.CpuUsageBar = QtGui.QProgressBar(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Fixed)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.CpuUsageBar.sizePolicy().hasHeightForWidth())\n    self.CpuUsageBar.setSizePolicy(sizePolicy)\n    self.CpuUsageBar.setMinimumSize(QtCore.QSize(0, 0))\n    self.CpuUsageBar.setProperty(\"value\", 24)\n    self.CpuUsageBar.setObjectName(_fromUtf8(\"CpuUsageBar\"))\n    self.ComputerInfoLayout.addWidget(self.CpuUsageBar)\n    self.RamUsag[eBar = QtGui.QProgressBar(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Fixed)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.RamUsageBar.sizePolicy().hasHeightForWidth())\n    self.RamUsageBar.setSizePolicy(sizePolicy)\n    self.RamUsageBar.setMinimumSize(QtCore.QSize(0, 0))\n    self.RamUsageBar.setProperty(\"value\", 24)\n    self.RamUsageBar.setObjectName(_fromUtf8(\"RamUsageBar\"))\n    self.ComputerInfoLayout.addWidget(self.RamUsageBar)\n    self.InfoLayout.addLayout(self.ComputerInfoLayout)\n    self.gridLayout.addLayout(self.InfoLayout, 3, 0, 1, 1)\n    self.horizontalLayout = QtGui.QHBoxLayout()\n    self.horizontalLayout.setObjectName(_fromUtf8(\"horizontalLayout\"))\n    self.pushButton_5 = QtGui.QPushButton(self.centralwidget)\n    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Preferred)\n    sizePolicy.setHorizontalStretch(0)\n    sizePolicy.setVerticalStretch(0)\n    sizePolicy.setHeightForWidth(self.pushButton_5.sizePolicy().hasHeightForWidth())\n    self.pushButton_5.setSizePolicy(sizePolicy)\n    self.pushButton_5.setObjectName(_fromUtf8(\"pushButton_5\"))\n    self.horizontalLayout.addWidget(self.pushButton_5)\n    self.gridLayout.addLayout(self.horizontalLayout, 2, 0, 1, 1)\n    self.gridLayout_2.addLayout(self.gridLayout, 0, 0, 1, 1)\n    MainWindow.setCentralWidget(self.centralwidget)\n</code></pre>\n\n<p><a href=\"http://www.filedropper.com/workinggui\" rel=\"nofollow\">Ui file is here</a>\n<a href=\"http://www.filedropper.com/qroundprogressbar\" rel=\"nofollow\">Here is the custom widget .py file</a></p>\n"}, {"tags": ["python", "machine-learning", "computer-vision", "tensorflow", "deep-learning"], "comments": [{"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1477517439, "post_id": 40271585, "comment_id": 67804867, "body": "all you have to do is literally create a <b>for loop</b>. That&#39;s all, you do not need references to your hidden layers, just the previous one."}, {"owner": {"reputation": 156, "user_id": 3015202, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a249024da26ec591b77a08bf0b06244e?s=128&d=identicon&r=PG&f=1", "display_name": "beniroquai", "link": "https://stackoverflow.com/users/3015202/beniroquai"}, "reply_to_user": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1477560920, "post_id": 40271585, "comment_id": 67820684, "body": "Thank you for your thoughts. How would I do this precisely? Do you have an example for that? I define the first hidden_layer and hidden_weights and in the for-loop I just the last hidden_layer as the input for my matmul()? How do I make sure, that the graph is build correctly? I guess I&#39;m missing some knowledge sorry.."}], "answers": [{"comments": [{"owner": {"reputation": 156, "user_id": 3015202, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a249024da26ec591b77a08bf0b06244e?s=128&d=identicon&r=PG&f=1", "display_name": "beniroquai", "link": "https://stackoverflow.com/users/3015202/beniroquai"}, "edited": false, "score": 0, "creation_date": 1477515942, "post_id": 40271670, "comment_id": 67804141, "body": "Thank you for quick response! I&#39;m not yet familiar with python/tensorflow. Could you provide a quick pseudo-code/example how this might work? Or just give some keywords I should look for? I&#39;m just slowly transiting from Matlab to Python - so I don&#39;t know any function which could do that ;)"}], "tags": [], "owner": {"reputation": 27634, "user_id": 1576602, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d5132c0e702c0b50cac6aa7c56d191f?s=128&d=identicon&r=PG", "display_name": "Andrzej Pronobis", "link": "https://stackoverflow.com/users/1576602/andrzej-pronobis"}, "is_accepted": true, "score": 1, "last_activity_date": 1477598691, "last_edit_date": 1477598691, "creation_date": 1477514156, "answer_id": 40271670, "question_id": 40271585, "link": "https://stackoverflow.com/questions/40271585/duplicate-replicate-tensorflow-layers-with-same-properties-to-form-a-graph/40271670#40271670", "title": "Duplicate/Replicate tensorflow layers with same properties to form a graph", "body": "<p>The easiest way to accomplish that is to create a function that builds your layer and simply invoke the function multiple times, possibly in a loop.</p>\n\n<p>For instance:</p>\n\n<pre><code>def layer(input):\n    hidden_weights = tf.Variable( tf.truncated_normal([n*n, 1]) )\n    hidden_layer = tf.nn.matmul( tf.matmul( input, hidden_weights), tf_ph_unit)\n    return hidden_layer\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>input = tf_input\nfor i in range(10):\n    input = layer(input)\n</code></pre>\n"}], "owner": {"reputation": 156, "user_id": 3015202, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a249024da26ec591b77a08bf0b06244e?s=128&d=identicon&r=PG&f=1", "display_name": "beniroquai", "link": "https://stackoverflow.com/users/3015202/beniroquai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1503, "favorite_count": 2, "accepted_answer_id": 40271670, "answer_count": 1, "score": 0, "last_activity_date": 1477598691, "creation_date": 1477513759, "question_id": 40271585, "link": "https://stackoverflow.com/questions/40271585/duplicate-replicate-tensorflow-layers-with-same-properties-to-form-a-graph", "title": "Duplicate/Replicate tensorflow layers with same properties to form a graph", "body": "<p>The task I try to implement by using a neural network differs a bit from its most common usage. I try to simulate a physical process by propagating something from the input to the output layer by optimizing the network's weights which represents physical properties.</p>\n\n<p>Therefor I need a i.e. 150 layer network where each layer has the same properties in the form </p>\n\n<blockquote>\n  <p>mx+b</p>\n</blockquote>\n\n<p>where x is my variable I like to optimize and m an external factor which is the same for each layer (b is not in use right now).</p>\n\n<p>I would like to automate the process of creating the graph rather than copy/paste each layer. So is there a function to copy the structure of the first layer to all following layers? </p>\n\n<p>In tensorflow it should look like something like this here:</p>\n\n<pre><code>graph = tf.Graph()\nwith graph.as_default():\n\n    # Input data.\n    tf_input = tf.placeholder(tf.float32, shape=(n_data, n))\n    tf_spatial_grid = tf.constant(m_index_mat)\n    tf_ph_unit = tf.const(m_unit_mat)\n    tf_output = tf.placeholder(tf.float32, shape=(n_data, n))\n\n    # new hidden layer 1    \n    hidden_weights = tf.Variable( tf.truncated_normal([n*n, 1]) )\n    hidden_layer = tf.nn.matmul( tf.matmul( tf_input, hidden_weights), tf_ph_unit)\n\n    # new hidden layer 2\n    hidden_weights_2 = tf.Variable( tf.truncated_normal([n*n, 1]) )\n    hidden_layer_2 = tf.nn.matmul( tf.matmul( hidden_layer, hidden_weights_2), tf_ph_unit)\n</code></pre>\n\n<p>......</p>\n\n<pre><code>    # new hidden layer n\n    hidden_weights_n = tf.Variable( tf.truncated_normal([n*n, 1]) )\n    hidden_layer_n = tf.nn.matmul( tf.matmul( hidden_layer_m, hidden_weights_n), tf_ph_unit)\n</code></pre>\n\n<p>...</p>\n\n<p>So is there any option that automates this process somehow? Maybe I'm missing something</p>\n\n<p>I really appreciate any help!</p>\n"}, {"tags": ["python", "list", "numbers"], "comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 5, "creation_date": 1477513875, "post_id": 40271548, "comment_id": 67803146, "body": "Ummm I tested your method It gave me 15 in Python 3.5.2 and 2.7"}, {"owner": {"reputation": 385, "user_id": 7029724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c23fdb3187b5de62c28d3f99474f78c9?s=128&d=identicon&r=PG&f=1", "display_name": "am2", "link": "https://stackoverflow.com/users/7029724/am2"}, "edited": false, "score": 0, "creation_date": 1477514003, "post_id": 40271548, "comment_id": 67803210, "body": "2.7 gives me 15 too"}, {"owner": {"reputation": 33, "user_id": 7077153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1eb3d8d7da6b4a922bb662add147aa?s=128&d=identicon&r=PG&f=1", "display_name": "None", "link": "https://stackoverflow.com/users/7077153/none"}, "edited": false, "score": 0, "creation_date": 1477514212, "post_id": 40271548, "comment_id": 67803312, "body": "Oh, perhaps mine is too old. All right thanks guys, I have tested it with a more recent one and it works."}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1477514281, "post_id": 40271548, "comment_id": 67803349, "body": "@KazeRyuga: What Python version are you using?"}, {"owner": {"reputation": 33, "user_id": 7077153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1eb3d8d7da6b4a922bb662add147aa?s=128&d=identicon&r=PG&f=1", "display_name": "None", "link": "https://stackoverflow.com/users/7077153/none"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 1, "creation_date": 1477514468, "post_id": 40271548, "comment_id": 67803417, "body": "@Blender it was Python 2.1.1"}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1477514619, "post_id": 40271548, "comment_id": 67803489, "body": "@KazeRyuga: It&#39;s more than 15 years old..."}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 2, "creation_date": 1477514636, "post_id": 40271548, "comment_id": 67803499, "body": "2.1.1? Are you a time-traveller from 2000?"}, {"owner": {"reputation": 33, "user_id": 7077153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1eb3d8d7da6b4a922bb662add147aa?s=128&d=identicon&r=PG&f=1", "display_name": "None", "link": "https://stackoverflow.com/users/7077153/none"}, "edited": false, "score": 0, "creation_date": 1477514939, "post_id": 40271548, "comment_id": 67803646, "body": "Yeah pretty old. I was working on an old project, it was using Python 2.1"}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 1, "creation_date": 1477515174, "post_id": 40271548, "comment_id": 67803761, "body": "@KazeRyuga If it is really 2.1.1 then I am not sure how the accepted answer is going to help you -- Neither <code>key</code> existed in Python 2.1.1 nor <code>sorted()</code>."}, {"owner": {"reputation": 33, "user_id": 7077153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1eb3d8d7da6b4a922bb662add147aa?s=128&d=identicon&r=PG&f=1", "display_name": "None", "link": "https://stackoverflow.com/users/7077153/none"}, "reply_to_user": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 0, "creation_date": 1477515596, "post_id": 40271548, "comment_id": 67803968, "body": "@AshwiniChaudhary I&#39;m going to rewrite my entire project with Python 3.5 , so his answer is right"}], "answers": [{"tags": [], "owner": {"reputation": 18044, "user_id": 12892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c866ac84e832e585c6bd3abe1149c47?s=128&d=identicon&r=PG", "display_name": "Cristian Ciupitu", "link": "https://stackoverflow.com/users/12892/cristian-ciupitu"}, "is_accepted": false, "score": 6, "last_activity_date": 1477514628, "last_edit_date": 1477514628, "creation_date": 1477513957, "answer_id": 40271625, "question_id": 40271548, "link": "https://stackoverflow.com/questions/40271548/how-to-find-the-smallest-closest-number-in-a-list-in-python/40271625#40271625", "title": "How to find the smallest closest number in a list in python", "body": "<p>Add the number from the list of numbers to the key, so it's taken into account.</p>\n\n<pre><code>min(list_of_numbers, key=lambda x: (abs(x - number), x))\n</code></pre>\n\n<p>Also if you want the <em>first</em> number from the list which matches the requirement, add the index to the key:</p>\n\n<pre><code>min(enumerate(list_of_numbers), key=lambda ix: (abs(ix[1] - number), ix[0]))[1]\n</code></pre>\n\n<p>Though this would only be needed under <a href=\"https://docs.python.org/2/library/functions.html#min\" rel=\"nofollow\">Python 2</a>, because <a href=\"https://docs.python.org/3/library/functions.html#min\" rel=\"nofollow\">Python 3</a> guarantees that:</p>\n\n<blockquote>\n  <p>If multiple items are minimal, the function returns the first one encountered.   This is consistent with other sort-stability preserving tools such as <code>sorted(iterable, key=keyfunc)[0]</code> and <code>heapq.nsmallest(1, iterable, key=keyfunc)</code>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1477514944, "post_id": 40271630, "comment_id": 67803649, "body": "is order dependent, testing the original with [4,9,25,15] I get 25 while the [4,9,15,25] give 15, therefore it return the first one that is found in python 3.5 and 2.7, and maybe in python 2.1 is the last one that it returned"}, {"owner": {"reputation": 18044, "user_id": 12892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c866ac84e832e585c6bd3abe1149c47?s=128&d=identicon&r=PG", "display_name": "Cristian Ciupitu", "link": "https://stackoverflow.com/users/12892/cristian-ciupitu"}, "reply_to_user": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1477515118, "post_id": 40271630, "comment_id": 67803737, "body": "@Copperfield, <a href=\"https://docs.python.org/3.2/library/functions.html#min\" rel=\"nofollow noreferrer\">Python 3</a> (&gt;=3.2) guarantees that the first item is returned, <a href=\"https://docs.python.org/2/library/functions.html#min\" rel=\"nofollow noreferrer\">Python 2</a> doesn&#39;t."}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "reply_to_user": {"reputation": 18044, "user_id": 12892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c866ac84e832e585c6bd3abe1149c47?s=128&d=identicon&r=PG", "display_name": "Cristian Ciupitu", "link": "https://stackoverflow.com/users/12892/cristian-ciupitu"}, "edited": false, "score": 0, "creation_date": 1477515481, "post_id": 40271630, "comment_id": 67803908, "body": "@CristianCiupitu It is just a documentation issue with Python 2.7."}, {"owner": {"reputation": 18044, "user_id": 12892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c866ac84e832e585c6bd3abe1149c47?s=128&d=identicon&r=PG", "display_name": "Cristian Ciupitu", "link": "https://stackoverflow.com/users/12892/cristian-ciupitu"}, "reply_to_user": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 0, "creation_date": 1477515956, "post_id": 40271630, "comment_id": 67804146, "body": "@AshwiniChaudhary, just a documentation issue?! Where&#39;s the bug report? :-) If it&#39;s not in documentation, it does not exist. Because of programmers abusing undocumented behavior people have a hard time trying to make old programs run on new systems. Microsoft has probably wasted a lot of resources trying to preserve compatibility with old software."}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "reply_to_user": {"reputation": 18044, "user_id": 12892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c866ac84e832e585c6bd3abe1149c47?s=128&d=identicon&r=PG", "display_name": "Cristian Ciupitu", "link": "https://stackoverflow.com/users/12892/cristian-ciupitu"}, "edited": false, "score": 1, "creation_date": 1477517037, "post_id": 40271630, "comment_id": 67804696, "body": "@CristianCiupitu Not of all of the changes made to Python 3 are applied to Python 2.7 anymore. Unlike Microsoft there&#39;s nothing closed source here, you can always check the source to be sure. :-) Related issue: <a href=\"http://bugs.python.org/issue9802\" rel=\"nofollow noreferrer\">bugs.python.org/issue9802</a>"}], "tags": [], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": true, "score": 10, "last_activity_date": 1477513977, "creation_date": 1477513977, "answer_id": 40271630, "question_id": 40271548, "link": "https://stackoverflow.com/questions/40271548/how-to-find-the-smallest-closest-number-in-a-list-in-python/40271630#40271630", "title": "How to find the smallest closest number in a list in python", "body": "<p>You could make the <code>key</code> also contain the number itself and use that for breaking ties:</p>\n\n<pre><code>min(list_of_numbers, key=lambda x: (abs(x - number), x))\n</code></pre>\n\n<p>Your behavior is strange, though. It might be a bug. You might be able to work around it by using <code>sorted</code>, which is stable:</p>\n\n<pre><code>sorted(list_of_numbers, key=lambda x: abs(x - number))[0]\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7077153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1eb3d8d7da6b4a922bb662add147aa?s=128&d=identicon&r=PG&f=1", "display_name": "None", "link": "https://stackoverflow.com/users/7077153/none"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3877, "favorite_count": 0, "accepted_answer_id": 40271630, "answer_count": 2, "score": 2, "last_activity_date": 1477514628, "creation_date": 1477513571, "last_edit_date": 1477513942, "question_id": 40271548, "link": "https://stackoverflow.com/questions/40271548/how-to-find-the-smallest-closest-number-in-a-list-in-python", "title": "How to find the smallest closest number in a list in python", "body": "<p>I want to know how can I find the smallest closest number in a list to a given number. \nFor example:</p>\n\n<pre><code>number = 20\n\nlist_of_numbers = [4, 9, 15, 25]\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>min(list_of_numbers, key=lambda x:abs(x-number))\n</code></pre>\n\n<p>The output is 25 and not 15. The problem is that it always gives me the \"biggest closest\" and not the \"smallest closest\". </p>\n"}, {"tags": ["python", "ms-access", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7077175, "user_type": "registered", "profile_image": "https://graph.facebook.com/179182435871627/picture?type=large", "display_name": "Jaktens Tid", "link": "https://stackoverflow.com/users/7077175/jaktens-tid"}, "is_accepted": false, "score": 0, "last_activity_date": 1477576545, "creation_date": 1477576545, "answer_id": 40286511, "question_id": 40271529, "link": "https://stackoverflow.com/questions/40271529/heroku-convert-mdb-to-csv-or-how-to-use-multiple-buildpacks-together/40286511#40286511", "title": "Heroku convert .mdb to csv or how to use multiple buildpacks together", "body": "<p>Here is answer:</p>\n\n<p>You don't need heroku-buildpack-mdbtools to use several buildpacks in your heroku application.</p>\n\n<p>Following this arcticle (<a href=\"https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app\" rel=\"nofollow\">https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app</a>)\nYou can use following </p>\n\n<p>bash: <code>heroku buildpacks:set your-first-buildpack</code></p>\n\n<p>then</p>\n\n<p>bash: <code>heroku buildpacks:add --index 1 your-additional-buildpack</code></p>\n\n<p>I used heroku/python + <strong><a href=\"https://github.com/profit-strategies/heroku-buildpack-mdbtools\" rel=\"nofollow\">https://github.com/profit-strategies/heroku-buildpack-mdbtools</a></strong> to convert .mdb database (WHO STILL USES MICROSOFT ACCESS IN 2016???) to csv in linux by this command:<code>mdb-export 'mdb-file' 'table-name' &gt; result.csv</code>\nJust runned this command as a subprocess in python</p>\n\n<pre><code>subprocess.call(\"mdb-export '%s' 'colorado well completions' &gt; Temporary/result.csv\" % path_to_mdb, shell=True)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7077175, "user_type": "registered", "profile_image": "https://graph.facebook.com/179182435871627/picture?type=large", "display_name": "Jaktens Tid", "link": "https://stackoverflow.com/users/7077175/jaktens-tid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477576545, "creation_date": 1477513482, "question_id": 40271529, "link": "https://stackoverflow.com/questions/40271529/heroku-convert-mdb-to-csv-or-how-to-use-multiple-buildpacks-together", "title": "Heroku convert .mdb to csv or how to use multiple buildpacks together", "body": "<p>Have a simple python application deployed on heroku and I need to manage with microsoft access database (.mdb). I read, that I have to use mdb-tools for this purposes.\nExample - converting mdb database to csv:</p>\n\n<p>bash:  <code>mdb-export 'mdb-file' 'table-name' &gt; result.csv</code>\n(I am going to run it as subprocess in python)</p>\n\n<p>I installed <a href=\"https://github.com/iblogbox/heroku-buildpack-mdbtools\" rel=\"nofollow\">https://github.com/iblogbox/heroku-buildpack-mdbtools</a> build pack.\nBut when I try test it:</p>\n\n<pre><code>heroku run bash\nmdb-export\n</code></pre>\n\n<p>I get <code>bash: mdb-export: command not found</code></p>\n\n<p>Questions: </p>\n\n<ul>\n<li>Can I use multiple buildpacks in heroku?</li>\n<li>Is it possible to convert .mdb file to csv or excel file in linux?</li>\n</ul>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "math", "syntax-error"], "comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 1, "creation_date": 1477513333, "post_id": 40271466, "comment_id": 67802890, "body": "Replace <code>4i</code> and <code>2i</code> with <code>4*i</code> and <code>2*i</code>"}, {"owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "edited": false, "score": 1, "creation_date": 1477513360, "post_id": 40271466, "comment_id": 67802901, "body": "and <code>for i in n:</code> with <code>for i in range(n):</code>"}, {"owner": {"reputation": 1639, "user_id": 3030010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c97ca617bb8ebf436f2131091f8d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3030010", "link": "https://stackoverflow.com/users/3030010/user3030010"}, "edited": false, "score": 1, "creation_date": 1477513475, "post_id": 40271466, "comment_id": 67802953, "body": "Also what are you expecting <code>1**i</code> to do? Because that raises <code>1</code> to the power of <code>i</code>, which will always result in <code>1</code>."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 2, "creation_date": 1477514134, "post_id": 40271466, "comment_id": 67803276, "body": "BTW, this is <i>not</i> the Gregory\u2013Leibniz formula for pi. Also, the actual Gregory\u2013Leibniz formula is one of the slowest ways known of calculating pi."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1478735406, "post_id": 40271466, "comment_id": 68277486, "body": "@Stacey:   <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">Accept my answer</a> if it helped, for others taking reference for the same problem in future."}], "answers": [{"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 2, "last_activity_date": 1477516827, "last_edit_date": 1477516827, "creation_date": 1477513479, "answer_id": 40271528, "question_id": 40271466, "link": "https://stackoverflow.com/questions/40271466/how-do-i-fix-the-python-error-that-i-get-with-my-gregory-liebniz-equation/40271528#40271528", "title": "How do I fix the Python error that I get with my Gregory-Liebniz equation?", "body": "<p>Try with this code:</p>\n\n<pre><code>n = 10  \npi = 0\n\nfor i in range(n): # replaced 'n' with range(n)  \n    pi += (4*i - ((-1)**i))/(2*i+1)  # a = a + b, is same as: a += b\n    #              ^ Correction as per Gregory\u2013Leibniz formula    \n    # for multiplication, you need to explicitly mention `*` operator\n    # replaced '4i' and '2i' with '4*i' and '2*i'\n\nprint(pi)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1477515269, "creation_date": 1477515269, "answer_id": 40271933, "question_id": 40271466, "link": "https://stackoverflow.com/questions/40271466/how-do-i-fix-the-python-error-that-i-get-with-my-gregory-liebniz-equation/40271933#40271933", "title": "How do I fix the Python error that I get with my Gregory-Liebniz equation?", "body": "<p>Here's the actual formula:</p>\n\n<pre><code>n = 1000 # Raise the number of iterations to get a better approximation\npi = 0.0\n\nfor i in range(n):\n    pi += (-1)**i/(2.0*i + 1) # You have to use the .0 in python 2.x\n\nprint(pi * 4)\n</code></pre>\n\n<p>The formula returns <code>pi/4</code>, that's why the <code>* 4</code> part.</p>\n\n<p>Also, <code>1**i</code> always results in <code>1</code>, you actually need <code>(-1)**i</code></p>\n"}, {"tags": [], "owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "is_accepted": false, "score": 1, "last_activity_date": 1477516937, "last_edit_date": 1477516937, "creation_date": 1477515586, "answer_id": 40272017, "question_id": 40271466, "link": "https://stackoverflow.com/questions/40271466/how-do-i-fix-the-python-error-that-i-get-with-my-gregory-liebniz-equation/40272017#40272017", "title": "How do I fix the Python error that I get with my Gregory-Liebniz equation?", "body": "<p>Apart from the syntax errors of <code>4i</code> and <code>2i</code>, you have not implemented the Gregory\u2013Leibniz formula for pi correctly. Here's a repaired version.</p>\n\n<pre><code>n = 50000\npi = 0\nfor i in range(n):\n    pi += 4 * (-1)**i / (2*i + 1)\n\nprint(pi)\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>3.1415726535897814\n</code></pre>\n\n<p>However, <code>(-1)**i</code> is a very wasteful way to compute the sign change of each term. Here's a better way. It's also more efficient to move the multiplication by 4 out of the loop, and to get <code>range</code> to just supply odd numbers.</p>\n\n<pre><code>n = 50000\npi = 0\ns = 1\nfor i in range(1, 2*n, 2):\n    pi += s / i\n    s = -s\npi *= 4\n\nprint(pi)\n</code></pre>\n\n<hr>\n\n<p>The Gregory\u2013Leibniz formula calculates <code>pi = 4 * arctan(1)</code>. You can speed up the convergence by using arctangent relationships based on smaller numbers than 1. Eg, </p>\n\n<pre><code>arctan(1) = arctan(1/2) + arctan(1/3) \n</code></pre>\n\n<p>and</p>\n\n<pre><code>arctan(1) = 4 * arctan(1/5) - arctan(1/239) \n</code></pre>\n\n<p>It can be more convenient to use the inverse cotangent function, since <code>arctan(1/n) == arccot(n)</code></p>\n\n<pre><code>def arc_cot(n, lim=1E-15):\n    ''' Inverse cotangent of n '''\n    x = 1.0 / n\n    y = -x * x\n    a = x\n    i = 1\n    while True:\n        i += 2\n        x *= y\n        t = x / i\n        a += t\n        if abs(t) &lt; lim:\n            break\n    return a\n\na = arc_cot(2) + arc_cot(3) \nprint(4 * a)\n\na = 4 * arc_cot(5) - arc_cot(239) \nprint(4 * a)\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>3.141592653589793\n3.141592653589794\n</code></pre>\n\n<p>For info on the derivation of these arccot formulae, please see <a href=\"https://en.wikipedia.org/wiki/Machin-like_formula\" rel=\"nofollow\">Machin-like formula</a> and <a href=\"http://www.machination.eclipse.co.uk/\" rel=\"nofollow\">Computing Pi: Lists Of Machin-Type (Inverse Cotangent) Identities For Pi/4</a>.</p>\n"}], "owner": {"reputation": 15, "user_id": 7077142, "user_type": "registered", "profile_image": "https://graph.facebook.com/884798971653266/picture?type=large", "display_name": "Stacey Koornneef", "link": "https://stackoverflow.com/users/7077142/stacey-koornneef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "answer_count": 3, "score": -3, "last_activity_date": 1477516937, "creation_date": 1477513228, "last_edit_date": 1477513262, "question_id": 40271466, "link": "https://stackoverflow.com/questions/40271466/how-do-i-fix-the-python-error-that-i-get-with-my-gregory-liebniz-equation", "title": "How do I fix the Python error that I get with my Gregory-Liebniz equation?", "body": "<pre><code>n = 10  \npi =0\n\nfor i in n:  \n    pi = pi + (4i - (1**i))/(2i+1)\n\nprint(pi)\n</code></pre>\n\n<p>There is an indent in the for loop, can't get it to show.  I comes up as a syntax error at pi = pi... line.  What would be a good way to figure this out?  I'm just learning Python and am not fully sure if I am using correct syntax.  Thank you so much!</p>\n"}, {"tags": ["python", "c++", "caffe", "openblas"], "comments": [{"owner": {"reputation": 860, "user_id": 1363495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f75bb8e7032480da04377694f3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Gun2sh", "link": "https://stackoverflow.com/users/1363495/gun2sh"}, "edited": false, "score": 0, "creation_date": 1516223582, "post_id": 40271400, "comment_id": 83605891, "body": "did you use -I before the LDFLAGS?"}], "answers": [{"comments": [{"owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477514384, "post_id": 40271592, "comment_id": 67803377, "body": "I have edited those two lines and still get the same error. My changes were: <code>INCLUDE_DIRS := &#47;usr&#47;local&#47;include &#47;usr&#47;local&#47;opt&#47;openblas&#47;lib</code> and <code>LIBRARY_DIRS := &#47;usr&#47;local&#47;lib &#47;usr&#47;lib &#47;usr&#47;local&#47;opt&#47;openblas&#47;include</code> as there was nothing in my PYTHON_INCLUDE and PYTHON_LIB variables."}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477514564, "post_id": 40271592, "comment_id": 67803458, "body": "What is the output of <code>shell brew --prefix openblas</code>?"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477514613, "post_id": 40271592, "comment_id": 67803486, "body": "I never installed caffe... but do you have some <code>.&#47;config</code> to run before <code>make</code>?"}, {"owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477514922, "post_id": 40271592, "comment_id": 67803638, "body": "<code>&#47;usr&#47;local&#47;opt&#47;openblas</code>. And no, there is no executable config file."}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515059, "post_id": 40271592, "comment_id": 67803705, "body": "Do you see the blas libraries doing <code>ls &#47;usr&#47;local&#47;opt&#47;openblas&#47;lib</code>?"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515163, "post_id": 40271592, "comment_id": 67803758, "body": "No, sorry... I am completely wrong... The point is that or you installed the wrong libraries or you are trying to install the wrong caffe"}, {"owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515377, "post_id": 40271592, "comment_id": 67803867, "body": "I do see all the <code>*.dylib</code> libraries. I&#39;m not sure how else I would install openblas. Maybe I will just use Atlas or MLK instead."}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515392, "post_id": 40271592, "comment_id": 67803875, "body": "could you give me the output of <code>uname -a</code>? (I suppose mac works as GNU/linux in this stuff)"}, {"owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515729, "post_id": 40271592, "comment_id": 67804040, "body": "<code>Darwin Trends-MacBook-Pro.local 15.6.0 Darwin Kernel Version 15.6.0: Mon Aug 29 20:21:34 PDT 2016; root:xnu-3248.60.11~1&#47;RELEASE_X86_64 x86_64</code>"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515749, "post_id": 40271592, "comment_id": 67804051, "body": "Try like this: into the <code>Makefile</code> (not the config) at line 421 add <code>-I&#47;usr&#47;local&#47;opt&#47;openblas&#47;include</code> and <code>-L&#47;usr&#47;local&#47;opt&#47;openblas&#47;lib</code> (the two line of the brew output)"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515850, "post_id": 40271592, "comment_id": 67804102, "body": "You can try with ATLAS, mkl are not free... I do not know if you have them... (moreover you should then use the intel compiler)"}, {"owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477515875, "post_id": 40271592, "comment_id": 67804118, "body": "Line 421 looks like this <code>lintclean: \t@ $(RM) -r $(LINT_OUTPUT_DIR) $(EMPTY_LINT_REPORT) $(NONEMPTY_LINT_REPORT) </code> That doesn&#39;t seem right. Can you be more specific about where I am adding it?"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 1, "creation_date": 1477516019, "post_id": 40271592, "comment_id": 67804175, "body": "At the end of this one... <code>LDFLAGS += $(foreach librarydir,$(LIBRARY_DIRS),-L$(librarydir)) $(PKG_CONFIG) \\ \t\t$(foreach library,$(LIBRARIES),-l$(library))</code> (sorry I was looking at the development version..). This is a long line broke in two.."}, {"owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477516179, "post_id": 40271592, "comment_id": 67804250, "body": "So now that line looks as follows: <code>LDFLAGS += $(foreach librarydir,$(LIBRARY_DIRS),-L$(librarydir)) $(PKG_CONFIG) \\ \t\t$(foreach library,$(LIBRARIES),-l$(library)) \\ \t\t-I&#47;usr&#47;local&#47;opt&#47;openblas&#47;include \\ \t\t-L&#47;usr&#47;local&#47;opt&#47;openblas&#47;lib</code>"}, {"owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "reply_to_user": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477516225, "post_id": 40271592, "comment_id": 67804274, "body": "Looks fine... try to make clean and make (-j 4 should run faster)"}, {"owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "edited": false, "score": 0, "creation_date": 1477516393, "post_id": 40271592, "comment_id": 67804335, "body": "I got a warning but no error! Fully compiled. Thank you so so much!"}], "tags": [], "owner": {"reputation": 1563, "user_id": 6769931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210224459237306/picture?type=large", "display_name": "Riccardo Petraglia", "link": "https://stackoverflow.com/users/6769931/riccardo-petraglia"}, "is_accepted": true, "score": 0, "last_activity_date": 1477516566, "last_edit_date": 1477516566, "creation_date": 1477513799, "answer_id": 40271592, "question_id": 40271400, "link": "https://stackoverflow.com/questions/40271400/error-in-compiling-caffe-ld-cant-map-file-errno-22/40271592#40271592", "title": "Error in compiling Caffe: ld: can&#39;t map file, errno=22", "body": "<p>Rough but working method:</p>\n\n<p>change the following line in the Makefile (not config)</p>\n\n<pre><code>LDFLAGS += $(foreach librarydir,$(LIBRARY_DIRS),-L$(librarydir)) $(PKG_CONFIG) \\ $(foreach library,$(LIBRARIES),-l$(library)) \n</code></pre>\n\n<p>with</p>\n\n<pre><code> LDFLAGS += $(foreach librarydir,$(LIBRARY_DIRS),-L$(librarydir)) $(PKG_CONFIG) \\ $(foreach library,$(LIBRARIES),-l$(library)) \\ -I/usr/local/opt/openblas/include \\ -L/usr/local/opt/openblas/lib\n</code></pre>\n"}], "owner": {"reputation": 1177, "user_id": 5380366, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ff4791dd8775da984411d8b7348d1982?s=128&d=identicon&r=PG&f=1", "display_name": "Melanie", "link": "https://stackoverflow.com/users/5380366/melanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 0, "accepted_answer_id": 40271592, "answer_count": 1, "score": 2, "last_activity_date": 1477516566, "creation_date": 1477512918, "last_edit_date": 1477513384, "question_id": 40271400, "link": "https://stackoverflow.com/questions/40271400/error-in-compiling-caffe-ld-cant-map-file-errno-22", "title": "Error in compiling Caffe: ld: can&#39;t map file, errno=22", "body": "<p>I am trying to compile Caffe and am receiving the following error that I cannot debug:</p>\n\n<p><code>ld: can't map file, errno=22 file '/usr/local/opt/openblas/lib' for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)</code> </p>\n\n<p>I have downloaded OpenBLAS via <code>brew install openblas</code> and received the following potentially important output: </p>\n\n<pre><code>==&gt; Caveats\nThis formula is keg-only, which means it was not symlinked into /usr/local.\n\nmacOS already provides this software and installing another version in\nparallel can cause all kinds of trouble.\n\nGenerally there are no consequences of this for you. If you build your\nown software and it requires this formula, you'll need to add to your\nbuild variables:\n\n    LDFLAGS:  -L/usr/local/opt/openblas/lib\n    CPPFLAGS: -I/usr/local/opt/openblas/include\n</code></pre>\n\n<p>I added the necessary paths to my Makefile.config file, which is below:</p>\n\n<pre><code># Refer to http://caffe.berkeleyvision.org/installation.html\n# Contributions simplifying and improving our build system are welcome!\n\n# cuDNN acceleration switch (uncomment to build with cuDNN).\n# USE_CUDNN := 1\n\n# CPU-only switch (uncomment to build without GPU support).\nCPU_ONLY := 1\n\n# To customize your choice of compiler, uncomment and set the following.\n# N.B. the default for Linux is g++ and the default for OSX is clang++\n# CUSTOM_CXX := g++\n\n# CUDA directory contains bin/ and lib/ directories that we need.\nCUDA_DIR := /usr/local/cuda\n# On Ubuntu 14.04, if cuda tools are installed via\n# \"sudo apt-get install nvidia-cuda-toolkit\" then use this instead:\n# CUDA_DIR := /usr\n\n# CUDA architecture setting: going with all of them.\n# For CUDA &lt; 6.0, comment the *_50 lines for compatibility.\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n            -gencode arch=compute_20,code=sm_21 \\\n            -gencode arch=compute_30,code=sm_30 \\\n            -gencode arch=compute_35,code=sm_35 \\\n            -gencode arch=compute_50,code=sm_50 \\\n            -gencode arch=compute_50,code=compute_50\n\n# BLAS choice:\n# atlas for ATLAS (default)\n# mkl for MKL\n# open for OpenBlas\nBLAS := open\n# Custom (MKL/ATLAS/OpenBLAS) include and lib directories.\n# Leave commented to accept the defaults for your choice of BLAS\n# (which should work)!\n# BLAS_INCLUDE := /usr/local/opt/openblas/include\n# BLAS_LIB := /usr/local/opt/openblas/lib\n\n# Homebrew puts openblas in a directory that is not on the standard search   path\nBLAS_INCLUDE := $(shell brew --prefix openblas)/include\nBLAS_LIB := $(shell brew --prefix openblas)/lib\n\n# This is required only if you will compile the matlab interface.\n# MATLAB directory should contain the mex binary in /bin.\n# MATLAB_DIR := /usr/local\n# MATLAB_DIR := /Applications/MATLAB_R2012b.app\n\n# NOTE: this is required only if you will compile the python interface.\n# We need to be able to find Python.h and numpy/arrayobject.h.\n# PYTHON_INCLUDE := /usr/include/python2.7 \\\n            # /usr/lib/python2.7/dist-packages/numpy/core/include\n# Anaconda Python distribution is quite popular. Include path:\n# Verify anaconda location, sometimes it's in root.\nANACONDA_HOME := $(HOME)/anaconda\nPYTHON_INCLUDE := $(ANACONDA_HOME)/include \\\n                  $(ANACONDA_HOME)/include/python2.7 \\\n                  $(ANACONDA_HOME)/lib/python2.7/site-packages/numpy/core/include \\\n\n# We need to be able to find libpythonX.X.so or .dylib.\n# PYTHON_LIB := /usr/lib\nPYTHON_LIB := $(ANACONDA_HOME)/lib\n\n# Homebrew installs numpy in a non standard path (keg only)\n# PYTHON_INCLUDE += $(dir $(shell python -c 'import numpy.core;      print(numpy.core.__file_$\n# PYTHON_LIB += $(shell brew --prefix numpy)/lib\n\n# Uncomment to support layers written in Python (will link against Python libs)\n# WITH_PYTHON_LAYER := 1\n\n# Whatever else you find you need goes here.\nINCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include\nLIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib\n\n# If Homebrew is installed at a non standard location (for example your home directory) $\n# INCLUDE_DIRS += $(shell brew --prefix)/include\n# LIBRARY_DIRS += $(shell brew --prefix)/lib\n\n# Uncomment to use `pkg-config` to specify OpenCV library paths.\n# (Usually not necessary -- OpenCV libraries are normally installed in one of the above $\n# USE_PKG_CONFIG := 1\n\nBUILD_DIR := build\nDISTRIBUTE_DIR := distribute\n\n# Uncomment for debugging. Does not work on OSX due to https://github.com/BVLC/caffe/iss$\n# DEBUG := 1\n\n# The ID of the GPU that 'make runtest' will use to run unit tests.\nTEST_GPUID := 0\n\n# enable pretty build (comment to see full commands)\nQ ?= @\n</code></pre>\n"}, {"tags": ["python", "email", "smtp"], "comments": [{"owner": {"reputation": 602, "user_id": 2230494, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tqupO.jpg?s=128&g=1", "display_name": "clutton", "link": "https://stackoverflow.com/users/2230494/clutton"}, "edited": false, "score": 1, "creation_date": 1477513042, "post_id": 40271333, "comment_id": 67802746, "body": "Just curious why you don&#39;t just get the mail from an existing mail server... use python to check via POP3/IMAP and then send out to that same server?"}, {"owner": {"reputation": 281, "user_id": 3417197, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a4e65dbebbb5e9a4275514ab3b321fe7?s=128&d=identicon&r=PG&f=1", "display_name": "Copernicus", "link": "https://stackoverflow.com/users/3417197/copernicus"}, "reply_to_user": {"reputation": 602, "user_id": 2230494, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tqupO.jpg?s=128&g=1", "display_name": "clutton", "link": "https://stackoverflow.com/users/2230494/clutton"}, "edited": false, "score": 0, "creation_date": 1477513269, "post_id": 40271333, "comment_id": 67802857, "body": "@clutton I know that I could do that but I&#39;m trying to avoid putting username/password data on the server that&#39;ll run the code. The company I work for has a server where I could send the emails, but if I use an SMTP client to access the data I&#39;ll have to update the password every time it expires. I also don&#39;t want to leave a password lying around in a config file if I can help it."}, {"owner": {"reputation": 602, "user_id": 2230494, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tqupO.jpg?s=128&g=1", "display_name": "clutton", "link": "https://stackoverflow.com/users/2230494/clutton"}, "edited": false, "score": 0, "creation_date": 1477517124, "post_id": 40271333, "comment_id": 67804736, "body": "How is your script going to get mail?  Normally you get it from a mail server as that is where mail is delivered... I think you may be missing a piece, perhaps this helps: <a href=\"http://xmodulo.com/how-mail-server-works.html\" rel=\"nofollow noreferrer\">xmodulo.com/how-mail-server-works.html</a>"}], "owner": {"reputation": 281, "user_id": 3417197, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a4e65dbebbb5e9a4275514ab3b321fe7?s=128&d=identicon&r=PG&f=1", "display_name": "Copernicus", "link": "https://stackoverflow.com/users/3417197/copernicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477512696, "creation_date": 1477512696, "question_id": 40271333, "link": "https://stackoverflow.com/questions/40271333/simple-smtp-processing-point", "title": "Simple SMTP Processing point", "body": "<p>I'm working with a third party service that will send update information on some machinery to an email address I specify. What I want to do is take that email, parse  out the the owner of a particular piece of hardware, and send that owner an email update. To be clear, I can't send the first email directly to the end user because the third party source I'm working with doesn't have my end user's email address data.</p>\n\n<p>I've been able to do the two parts [(1)receiving+parsing, (2) sending new message ] independently using the smtpd and smtplib python packages, but I'm not able to use them together. Python doesn't have a builtin MTA so any outgoing messages I send with smtplib are intercepted by the smtpd.SMTPServer. Is there any way I can combine these two parts (receiving+parsing and sending an update) with a simple script without having to invest in a big smtp server package like Lamson?</p>\n"}, {"tags": ["python", "real-time", "obd-ii", "real-time-updates"], "comments": [{"owner": {"reputation": 387, "user_id": 5368039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/--_uvOayYqYI/AAAAAAAAAAI/AAAAAAAAABg/0Y2bDAktBkU/photo.jpg?sz=128", "display_name": "Jeremy Weirich", "link": "https://stackoverflow.com/users/5368039/jeremy-weirich"}, "edited": false, "score": 0, "creation_date": 1477513925, "post_id": 40271330, "comment_id": 67803168, "body": "Can you put those two lines into a <code>current_rpm</code> method?  Just use <code>current_rpm()</code> instead of <code>rpm</code> in your loop."}], "answers": [{"tags": [], "owner": {"reputation": 1587, "user_id": 3520965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31fd95e9573fb19ea05a8f928d905f39?s=128&d=identicon&r=PG&f=1", "display_name": "Dalvenjia", "link": "https://stackoverflow.com/users/3520965/dalvenjia"}, "is_accepted": true, "score": 0, "last_activity_date": 1477514413, "creation_date": 1477514413, "answer_id": 40271738, "question_id": 40271330, "link": "https://stackoverflow.com/questions/40271330/python-constantly-refresh-variable/40271738#40271738", "title": "Python constantly refresh variable", "body": "<p>use the Async interface instead of the OBD:</p>\n\n<blockquote>\n  <p>Since the standard query() function is blocking, it can be a hazard for UI event loops. To deal with this, python-OBD has an Async connection object that can be used in place of the standard OBD object. Async is a subclass of OBD, and therefore inherits all of the standard methods. However,  Async adds a few in order to control a threaded update loop. This loop will keep the values of your commands up to date with the vehicle. This way, when the user querys the car, the latest response is returned immediately.</p>\n  \n  <p>The update loop is controlled by calling start() and stop(). To subscribe a command for updating, call watch() with your requested OBDCommand. Because the update loop is threaded, commands can only be watched while the loop is stoped.</p>\n\n<pre><code>import obd\n\nconnection = obd.Async() # same constructor as 'obd.OBD()'\n\nconnection.watch(obd.commands.RPM) # keep track of the RPM\n\nconnection.start() # start the async update loop\n\nprint connection.query(obd.commands.RPM) # non-blocking, returns immediately\n</code></pre>\n</blockquote>\n\n<p><a href=\"http://python-obd.readthedocs.io/en/latest/Async%20Connections/\" rel=\"nofollow\">http://python-obd.readthedocs.io/en/latest/Async%20Connections/</a></p>\n"}], "owner": {"reputation": 3, "user_id": 7077101, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188452714537330/picture?type=large", "display_name": "Dennis Denk", "link": "https://stackoverflow.com/users/7077101/dennis-denk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1515, "favorite_count": 0, "accepted_answer_id": 40271738, "answer_count": 1, "score": 0, "last_activity_date": 1477514413, "creation_date": 1477512688, "question_id": 40271330, "link": "https://stackoverflow.com/questions/40271330/python-constantly-refresh-variable", "title": "Python constantly refresh variable", "body": "<p>I don't know if it's a dumb question, but I'm really struggling with solving this problem.</p>\n\n<p>I'm coding with the obd library.\nNow my problem with that is the continuous actualization of my variables.\nFor instance, one variable outputs the actual speed of the car.\nThis variable has to be updated every second or 2 seconds. To do this update I have to run 2 lines of code </p>\n\n<pre><code>cmd = obd.commands.RPM\nrpm = connection.query(cmd)\n</code></pre>\n\n<p>but I have to check the rpm variable in some while loops and if statements. (in realtime)</p>\n\n<p>Is there any opportunity to get this thing done ? (another class or thread or something) It would really help me take a leap forward in my programming project.</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 2, "last_activity_date": 1477512728, "creation_date": 1477512728, "answer_id": 40271343, "question_id": 40271273, "link": "https://stackoverflow.com/questions/40271273/functional-composition-of-pandas-series/40271343#40271343", "title": "functional composition of pandas&#39; Series", "body": "<p>That's what <code>map</code> is for.  Just do <code>u = s.map(t)</code>.</p>\n"}], "owner": {"reputation": 539, "user_id": 6136013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dfd7585752c56c5272150aa4fead686?s=128&d=identicon&r=PG&f=1", "display_name": "BlindDriver", "link": "https://stackoverflow.com/users/6136013/blinddriver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 40271343, "answer_count": 1, "score": 1, "last_activity_date": 1477512728, "creation_date": 1477512474, "question_id": 40271273, "link": "https://stackoverflow.com/questions/40271273/functional-composition-of-pandas-series", "title": "functional composition of pandas&#39; Series", "body": "<p>What is the best way to get functional composition of pandas <code>Series</code>? To clarify the question, a <code>Series</code> is a map from its index to its values. Given two Series <code>s</code> and <code>t</code> how do I construct their composition <code>u</code> such that its index is that of s and for each <code>i</code> in <code>s.index</code> <code>u[i] = t[s[i]]</code>. I currently do the following:</p>\n\n<pre><code>u = pd.Series(t[s].values, index=s.index)\n</code></pre>\n\n<p>Is there a more elegant way?</p>\n"}, {"tags": ["javascript", "python", "django", "python-2.7", "django-admin"], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 3992452, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6711ead05e6ff4dd0a609742dcce19c5?s=128&d=identicon&r=PG&f=1", "display_name": "user168983", "link": "https://stackoverflow.com/users/3992452/user168983"}, "edited": false, "score": 0, "creation_date": 1477549204, "post_id": 40272855, "comment_id": 67813620, "body": "my bad on syntax..yup this fixed"}], "tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": true, "score": 1, "last_activity_date": 1477519477, "creation_date": 1477519477, "answer_id": 40272855, "question_id": 40271270, "link": "https://stackoverflow.com/questions/40271270/using-django-rendered-lists-in-javascript-on-the-rendered-html-page/40272855#40272855", "title": "Using Django rendered lists in Javascript on the rendered html page", "body": "<p>Fix your script like the following, this should work for you:</p>\n\n<pre><code>&lt;script&gt;\nfunction func() {\n    var e = document.getElementById(\"sel\");\n    var str = e.options[e.selectedIndex].value;\n    \"{% for each in words %}\"\n        var a = \"{{ each.word }}\";\n        if(str === a) {\n            console.log(\"{{ each.word }}\")\n        }\n    \"{% endfor %}\"\n}\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 555, "user_id": 7062327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e420b639f7ca1ede450e843f060d599?s=128&d=identicon&r=PG&f=1", "display_name": "Brett Jeffreson", "link": "https://stackoverflow.com/users/7062327/brett-jeffreson"}, "is_accepted": false, "score": 0, "last_activity_date": 1477547315, "creation_date": 1477547315, "answer_id": 40277000, "question_id": 40271270, "link": "https://stackoverflow.com/questions/40271270/using-django-rendered-lists-in-javascript-on-the-rendered-html-page/40277000#40277000", "title": "Using Django rendered lists in Javascript on the rendered html page", "body": "<p>Try something like this:</p>\n\n<pre><code>&lt;script&gt;\n    var words = [\n    {% for word in words %}\n        \"{{ word }}\",\n    {% endfor %}\n    ];\n\n    function func() {\n        var e = document.getElementById(\"sel\");\n        var str = e.options[e.selectedIndex].value;\n        for (var word = 0; word &lt; words.length; word++) {\n            if (words[word] === str) {\n                console.log(words[word]);\n            }\n        }\n    }\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 764, "user_id": 3992452, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6711ead05e6ff4dd0a609742dcce19c5?s=128&d=identicon&r=PG&f=1", "display_name": "user168983", "link": "https://stackoverflow.com/users/3992452/user168983"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 40272855, "answer_count": 2, "score": 0, "last_activity_date": 1477547315, "creation_date": 1477512454, "last_edit_date": 1477542416, "question_id": 40271270, "link": "https://stackoverflow.com/questions/40271270/using-django-rendered-lists-in-javascript-on-the-rendered-html-page", "title": "Using Django rendered lists in Javascript on the rendered html page", "body": "<p>I am working on a django app where I made a custom view that passes a queryset of elements to the rendered html page.</p>\n\n<p>In the html page I want to have an option to select a word from a select list and If the selected word matches any element from the list I got from view, I should need to display it. </p>\n\n<p>I tried using Java script to read these elements into array and then use that array on chnage in select box. but it didnt work as I required. </p>\n\n<p>Here is what I have done so far.</p>\n\n<p>View:</p>\n\n<pre><code>from .models import words as m\ndef test(request):\n  words = m.objects.all()\ncontext = Context({\n    'words': words, \n})\nreturn render(request, 'newpage.html',context)\n</code></pre>\n\n<p>newpage.html:</p>\n\n<pre><code>&lt;select id=\"sel\" onChange=\"func();\"&gt;\n&lt;option  value=\"\" selected=\"selected\"&gt;--none--&lt;/option&gt;\n&lt;option value=\"word1\"&gt;word1&lt;/option&gt;\n....\n&lt;option value=\"wordn\"&gt;wordn&lt;/option&gt;\n\n&lt;/select&gt;\n&lt;script&gt;\nfunction func()\n{\n var e = document.getElementById(\"sel\");\n var str = e.options[e.selectedIndex].value;\n '{% for each in words %}'\n var a=\"{{ each.word }}\";\n if(str===a)\n    {\n    console.log('{{each.word }}')//or passing it to a div in html\n     }\n{% endfor %}\n }\n&lt;/script&gt;\n</code></pre>\n\n<p>what I require is If the selected element is \"word1\" and if the queryset \"words\" has \"word1\" in it, it should display the word in the page in any div\ncan any one help me understand the right way to use this queryset object in the html/js.</p>\n"}, {"tags": ["python", "django", "overriding", "modelform"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1477516916, "post_id": 40271247, "comment_id": 67804623, "body": "Well, indeed <code>self</code> is not defined in that function. Why do you think it should be? Why are you calling <code>__init__</code> directly at all?"}, {"owner": {"reputation": 181, "user_id": 1778743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c73def74cad0ae639a92d91aec1337ea?s=128&d=identicon&r=PG", "display_name": "user1778743", "link": "https://stackoverflow.com/users/1778743/user1778743"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1477572096, "post_id": 40271247, "comment_id": 67828048, "body": "i first tried it without the self but it was asking for a 3rd arguement  so i added self. in the model.py there are choices but for a view i dont want those choices to appear i want different choices to appear so im trying to override the choices for that field"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 1778743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c73def74cad0ae639a92d91aec1337ea?s=128&d=identicon&r=PG", "display_name": "user1778743", "link": "https://stackoverflow.com/users/1778743/user1778743"}, "edited": false, "score": 0, "creation_date": 1477573518, "post_id": 40273381, "comment_id": 67829041, "body": "ok that solved it now i getting a new error       &#39;str&#39; object has no attribute &#39;get&#39;     AttributeError"}, {"owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "reply_to_user": {"reputation": 181, "user_id": 1778743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c73def74cad0ae639a92d91aec1337ea?s=128&d=identicon&r=PG", "display_name": "user1778743", "link": "https://stackoverflow.com/users/1778743/user1778743"}, "edited": false, "score": 0, "creation_date": 1477576659, "post_id": 40273381, "comment_id": 67831363, "body": "i would need more context. Can you look into the stacktrace and see where it is failing ? Also, you might have conflicting local variable names in your declarations"}], "tags": [], "owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "is_accepted": true, "score": 2, "last_activity_date": 1477576554, "last_edit_date": 1477576554, "creation_date": 1477522298, "answer_id": 40273381, "question_id": 40271247, "link": "https://stackoverflow.com/questions/40271247/overriding-modelform-choices-with-init/40273381#40273381", "title": "overriding modelform choices with __init__", "body": "<p>This is how you would be initializing the form:</p>\n\n<pre><code>form = carOwnerForm.__init__(self,'B','None','C')\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>form = carOwnerForm('B', None, 'C')\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 1778743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c73def74cad0ae639a92d91aec1337ea?s=128&d=identicon&r=PG", "display_name": "user1778743", "link": "https://stackoverflow.com/users/1778743/user1778743"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 40273381, "answer_count": 1, "score": 0, "last_activity_date": 1477658893, "creation_date": 1477512373, "last_edit_date": 1477658893, "question_id": 40271247, "link": "https://stackoverflow.com/questions/40271247/overriding-modelform-choices-with-init", "title": "overriding modelform choices with __init__", "body": "<p>I've been trying to get the fields for a choice to change based on what i give it in my view and i get </p>\n\n<pre><code>name 'self' is not defined\n</code></pre>\n\n<p>here is my view.py</p>\n\n<pre><code>def CarOwnerSearch(request):\n    if request.user.is_authenticated():\n        form = carOwnerForm.__init__(self,'B','None','C')\n        return render (request,'carmanager/CarOwnerSearch.html', {'form': form})\n</code></pre>\n\n<p>OK ive got a modelform</p>\n\n<pre><code>class carOwnerForm(forms.ModelForm):\n    first_name = forms.charfield()\n    last_name = forms.charfield()\n\n    def __init__(self, a,b,c):\n        super(carOwnerForm,self).__init(a,b,c)\n        self.field[\"ownership_Type\"].choice = [a,b,c]\n\n    class Meta:\n        model = CarOwner\n        fields = ['ownership_type','CarModel']\n</code></pre>\n\n<p>and this is my model.py</p>\n\n<pre><code>class CarOwner(models.Model):\n    ownershipTpes_choices = ( ('R','Rented'),('L','Leased'),('O','Owned'))\n    ownership_Type = models.CharField(max_length=1,\n                                     choices=ownershipTypeChoices)\n</code></pre>\n\n<p>the traceback is here \nthis is an edit update for a particular problem noted in the comments </p>\n"}, {"tags": ["python", "algorithm", "hash", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 2962678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557f5a472dcc022106e1ff67625c37da?s=128&d=identicon&r=PG&f=1", "display_name": "Shiv Konar", "link": "https://stackoverflow.com/users/2962678/shiv-konar"}, "edited": false, "score": 0, "creation_date": 1477512714, "post_id": 40271307, "comment_id": 67802585, "body": "Sorry, I didn&#39;t understand when you say values are nodes in the list themselves"}], "tags": [], "owner": {"reputation": 1639, "user_id": 3030010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c97ca617bb8ebf436f2131091f8d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3030010", "link": "https://stackoverflow.com/users/3030010/user3030010"}, "is_accepted": true, "score": 0, "last_activity_date": 1477512767, "last_edit_date": 1477512767, "creation_date": 1477512604, "answer_id": 40271307, "question_id": 40271237, "link": "https://stackoverflow.com/questions/40271237/find-the-nth-node-from-the-end-of-a-linked-list-using-python-and-hash-table/40271307#40271307", "title": "Find the nth node from the end of a Linked List using Python and hash table", "body": "<p>In Python, you would just construct a dictionary where the keys are indices in the linked lists, and the values are nodes in the lists themselves. You don't need to know the actual memory address of the nodes, since adding them to the dictionary won't create a copy of them, but rather another reference to the original object.</p>\n\n<p>So your code would start out with some kind of collection like:</p>\n\n<pre><code>linked_index_to_node = {}\n</code></pre>\n\n<p>Then for each item in the linked list, it would add it like this:</p>\n\n<pre><code># Making some assumptions about what your list looks like here\nnext_node = linked_list\nnext_index = 1\nwhile next_node is not None:\n    linked_index_to_node[next_index] = next_node\n    next_index += 1\n    next_node = next_node.next\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2962678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557f5a472dcc022106e1ff67625c37da?s=128&d=identicon&r=PG&f=1", "display_name": "Shiv Konar", "link": "https://stackoverflow.com/users/2962678/shiv-konar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 40271307, "answer_count": 1, "score": 1, "last_activity_date": 1544633279, "creation_date": 1477512331, "last_edit_date": 1592644375, "question_id": 40271237, "link": "https://stackoverflow.com/questions/40271237/find-the-nth-node-from-the-end-of-a-linked-list-using-python-and-hash-table", "title": "Find the nth node from the end of a Linked List using Python and hash table", "body": "<p>I am just beginning learning Data Structures and Algorithms. I am using the &quot;Data Structure and Algorithmic Thinking with Python&quot; book by Narasimha Karumanchi(CareerMonk).</p>\n<p>On the topic of linked lists, one of the exercise question is to find the nth node from the end of a linked list. The author mentions that using a hash table is a better solution than brute forcing it.</p>\n<p><a href=\"https://i.stack.imgur.com/4EFNJ.jpg\" rel=\"nofollow noreferrer\">Screenshot from the book</a></p>\n<p>The author has left the implementation out. I am wondering how will I code this in Python as a class method or a function. I mean, it is relatively easy to get the memory address in C/C++ but I don't know how to construct the hash table(dictionary) as the author suggests in the book.</p>\n<p>Can anyone help?</p>\n<p>Thanks</p>\n"}, {"tags": ["python", "memory", "virtualalloc", "pydbg"], "owner": {"reputation": 11, "user_id": 7077089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc1b13d7354db77bd0ef4be94a511c5?s=128&d=identicon&r=PG&f=1", "display_name": "myperfectname", "link": "https://stackoverflow.com/users/7077089/myperfectname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1477512241, "creation_date": 1477512241, "question_id": 40271210, "link": "https://stackoverflow.com/questions/40271210/pydbg-dump-memory-from-virtualalloc", "title": "Pydbg dump memory from VirtualAlloc", "body": "<p>I am using the following code taken from:\n<a href=\"http://securityxploded.com/automation-reversing-scripting.php#Pydbg\" rel=\"nofollow\">http://securityxploded.com/automation-reversing-scripting.php#Pydbg</a></p>\n\n<pre><code>    # Author: Amit Malik\n\n\nimport sys\nimport pefile\nimport struct\nfrom pydbg import *\nfrom pydbg.defines import *\n\n\ndef ret_addr_handler(dbg):\n\n    lpAddress = dbg.context.Eax                      # Get value returned by VirtualAlloc\n    print \" Returned Pointer: \",hex(int(lpAddress))\n\n    return DBG_CONTINUE\n\ndef virtual_handler(dbg):\n\n    print \"****************\"\n    pdwSize = dbg.context.Esp + 8                   # 2nd argument to VirtualAlloc\n    rdwSize = dbg.read_process_memory(pdwSize,4)\n    dwSize  = struct.unpack(\"L\",rdwSize)[0]\n    dwSize  = int(dwSize)\n    print \"Allocation Size: \",hex(dwSize)\n\n    pflAllocationType = dbg.context.Esp + 12          # 3rd argument to VirtualAlloc    \n    rflAllocationType = dbg.read_process_memory(pflAllocationType,4)\n    flAllocationType  = struct.unpack(\"L\",rflAllocationType)[0] \n    flAllocationType  = int(flAllocationType)\n    print \"Allocation Type: \",hex(flAllocationType)\n\n    pflProtect = dbg.context.Esp + 16                  # 4th Argument to VirtualAlloc   \n    rflProtect = dbg.read_process_memory(pflProtect,4)\n    flProtect  = struct.unpack(\"L\",rflProtect)[0]   \n    flProtect  = int(flProtect)\n    print \"Protection Type: \",hex(flProtect)\n\n    pret_addr = dbg.context.Esp                        # Get return Address\n    rret_addr = dbg.read_process_memory(pret_addr,4)\n    ret_addr  = struct.unpack(\"L\",rret_addr)[0]\n    ret_addr  = int(ret_addr)\n    dbg.bp_set(ret_addr,description=\"ret_addr breakpoint\",restore = True,handler = ret_addr_handler)\n\n    return DBG_CONTINUE\n\ndef entry_handler(dbg):\n\n    virtual_addr = dbg.func_resolve(\"kernel32.dll\",\"VirtualAlloc\")   # Get VirtualAlloc address\n    if virtual_addr:    \n        dbg.bp_set(virtual_addr,description=\"Virtualalloc breakpoint\",restore = True,handler = virtual_handler)\n\n    return DBG_CONTINUE\n\ndef main():\n\n    file = sys.argv[1]\n    pe = pefile.PE(file)\n    # get entry point \n    entry_addr = pe.OPTIONAL_HEADER.AddressOfEntryPoint + pe.OPTIONAL_HEADER.ImageBase \n    dbg = pydbg()          # get pydbg object\n    dbg.load(file)\n    dbg.bp_set(entry_addr,description=\"Entry point breakpoint\",restore = True,handler = entry_handler)\n    dbg.run()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>My question is how can i read the memory that VirtualAlloc will allocate? I tried the read_process_memory but it didn't work.</p>\n"}, {"tags": ["python", "packages", "anaconda", "conda"], "answers": [{"comments": [{"owner": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "edited": false, "score": 0, "creation_date": 1477514387, "post_id": 40271250, "comment_id": 67803379, "body": "I still get the &quot;PackageNotFoundError: Package not found: &#39;&#39; Package missing in current win-64 channels:&quot; error even after activating the new 32bit environment"}, {"owner": {"reputation": 1587, "user_id": 3520965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31fd95e9573fb19ea05a8f928d905f39?s=128&d=identicon&r=PG&f=1", "display_name": "Dalvenjia", "link": "https://stackoverflow.com/users/3520965/dalvenjia"}, "reply_to_user": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "edited": false, "score": 0, "creation_date": 1477514880, "post_id": 40271250, "comment_id": 67803622, "body": "Don&#39;t unset the <code>CONDA_FORCE_32BIT</code> for as long as you need the 32 bit python, otherwise conda goes with 64bit, on a side note pyspharm only supports python27 so I edited the answer to do the py27_32bit environment."}], "tags": [], "owner": {"reputation": 1587, "user_id": 3520965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31fd95e9573fb19ea05a8f928d905f39?s=128&d=identicon&r=PG&f=1", "display_name": "Dalvenjia", "link": "https://stackoverflow.com/users/3520965/dalvenjia"}, "is_accepted": true, "score": 1, "last_activity_date": 1477514790, "last_edit_date": 1477514790, "creation_date": 1477512375, "answer_id": 40271250, "question_id": 40271187, "link": "https://stackoverflow.com/questions/40271187/how-to-install-win-32-package-on-a-64-bit-system-with-conda-install/40271250#40271250", "title": "How to install win-32 package on a 64-bit system with conda install", "body": "<p>Crate a 32bit python environment:</p>\n\n<pre><code>set CONDA_FORCE_32BIT=1\nconda create -n py27_32bit python=2.7\nenable py27_32bit\nconda install --channel https://conda.anaconda.org/conda-forge pyspharm\n</code></pre>\n\n<p>Just remember to <code>set CONDA_FORCE_32BIT=</code> (set empty) if you are going to use the root environment 64bit</p>\n"}], "owner": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4106, "favorite_count": 2, "accepted_answer_id": 40271250, "answer_count": 1, "score": 1, "last_activity_date": 1477514790, "creation_date": 1477512145, "question_id": 40271187, "link": "https://stackoverflow.com/questions/40271187/how-to-install-win-32-package-on-a-64-bit-system-with-conda-install", "title": "How to install win-32 package on a 64-bit system with conda install", "body": "<p>I am looking to install the package <a href=\"https://code.google.com/archive/p/pyspharm/\" rel=\"nofollow\">pyspharm</a></p>\n\n<p>I am running the 64-bit Windows and have the 64-bit version of Anaconda installed.</p>\n\n<p>However, whe I look for packages with </p>\n\n<pre><code>anaconda search -t conda pyspharm\n</code></pre>\n\n<p>It appears as if there are no channels with a package made for the win-64 platform.</p>\n\n<p>Is there any way I can still install it?</p>\n"}, {"tags": ["python", "list", "tuples", "splice"], "comments": [{"owner": {"reputation": 2180, "user_id": 526904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e0cd6a32ecba27f5e6aea1f7f15be539?s=128&d=identicon&r=PG", "display_name": "Hoopdady", "link": "https://stackoverflow.com/users/526904/hoopdady"}, "edited": false, "score": 0, "creation_date": 1477512317, "post_id": 40271123, "comment_id": 67802380, "body": "I don&#39;t see the code you&#39;re using to split them, but you&#39;ll probably just want to use <code>del splice[index:index]</code> after you pull it out."}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 3, "last_activity_date": 1477513223, "last_edit_date": 1477513223, "creation_date": 1477512273, "answer_id": 40271222, "question_id": 40271123, "link": "https://stackoverflow.com/questions/40271123/divide-the-list-in-chunks-sub-lists-based-on-filter-criterion/40271222#40271222", "title": "Divide the list in chunks (sub-lists) based on filter criterion", "body": "<p>You could use <a href=\"https://docs.python.org/2/library/itertools.html#itertools.groupby\" rel=\"nofollow\"><code>itertools.groupby</code></a> since we don't have the indices of the items that are <code>'00'</code> beforehand:</p>\n\n<pre><code>from itertools import groupby\n\na = ['31', '20', '54', '68', '65', '72', '00', '00', '00', '82', '4d', '61', '72', '67', '69', '6e', '00', '00', '00', '00','00', '84', '92', '4d','91']\n\nresult = []\nfor i, g in groupby(a, lambda x: x!='00'):\n    if i:\n        result.append(tuple(g))\nprint(result)\n# [('31', '20', '54', '68', '65', '72'), ('82', '4d', '61', '72', '67', '69', '6e'), ('84', '92', '4d', '91')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 6, "last_activity_date": 1477512666, "creation_date": 1477512666, "answer_id": 40271322, "question_id": 40271123, "link": "https://stackoverflow.com/questions/40271123/divide-the-list-in-chunks-sub-lists-based-on-filter-criterion/40271322#40271322", "title": "Divide the list in chunks (sub-lists) based on filter criterion", "body": "<p><em>List Comprehension</em> expression using <a href=\"https://docs.python.org/2/library/itertools.html#itertools.groupby\"><code>itertools.groupby()</code></a> as:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import groupby\n&gt;&gt;&gt; a = ['31', '20', '54', '68', '65', '72', '00', '00', '00', '82', '4d', '61', '72', '67', '69', '6e', '00', '00', '00', '00','00', '84', '92', '4d','91']\n\n&gt;&gt;&gt; [tuple(group) for is_valid, group in groupby(a, lambda x: x!='00') if is_valid]\n[('31', '20', '54', '68', '65', '72'), ('82', '4d', '61', '72', '67', '69', '6e'), ('84', '92', '4d', '91')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 1, "creation_date": 1477514592, "post_id": 40271387, "comment_id": 67803473, "body": "You are right about the execution time part. This is faster. <code>itertools.groupsby()</code> approach is slower due to the usage of <code>lambda</code> within the expression."}], "tags": [], "owner": {"reputation": 1789, "user_id": 5626104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9bff58c22f757507d69a779603d3eac?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5626104/brian"}, "is_accepted": true, "score": 6, "last_activity_date": 1477515202, "last_edit_date": 1495541808, "creation_date": 1477512882, "answer_id": 40271387, "question_id": 40271123, "link": "https://stackoverflow.com/questions/40271123/divide-the-list-in-chunks-sub-lists-based-on-filter-criterion/40271387#40271387", "title": "Divide the list in chunks (sub-lists) based on filter criterion", "body": "<p>Here's a list comprehension answer that doesn't require importing <code>itertools</code>:</p>\n\n<pre><code>&gt;&gt;&gt; a = ['31', '20', '54', '68', '65', '72', '00', '00', '00', '82', '4d', '61', '72', '67', '69', '6e', '00', '00', '00', '00','00', '84', '92', '4d','91']\n&gt;&gt;&gt; [ tuple(b.strip().split()) for b in ' '.join(a).split('00 ') if b ]\n[('31', '20', '54', '68', '65', '72'), ('82', '4d', '61', '72', '67', '69', '6e'), ('84', '92', '4d', '91')]\n</code></pre>\n\n<p>Comparison with other other approaches (for 10,000 iterations):</p>\n\n<ul>\n<li>This approach using <em>joining and splitting</em> takes - 0.214s</li>\n<li><a href=\"https://stackoverflow.com/a/40271222/2063361\"><em>MosesKoledoye</em>'s answer</a> using <em><code>itertools.groupby()</code> with for loop</em> takes - 0.372s,</li>\n<li><a href=\"https://stackoverflow.com/a/40271322/2063361\"><em>anonymous</em>'s answer</a> using <em><code>itertools.groupby()</code> with list comprehension</em> takes - 0.321s</li>\n</ul>\n\n<p>(not including the time it takes for their codes to import <code>itertools</code>)</p>\n"}], "owner": {"reputation": 1213, "user_id": 873393, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7316c08303e3f311c7406ea9f47ca353?s=128&d=identicon&r=PG", "display_name": "ilaunchpad", "link": "https://stackoverflow.com/users/873393/ilaunchpad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 40271387, "answer_count": 3, "score": 2, "last_activity_date": 1477543233, "creation_date": 1477511882, "last_edit_date": 1477543233, "question_id": 40271123, "link": "https://stackoverflow.com/questions/40271123/divide-the-list-in-chunks-sub-lists-based-on-filter-criterion", "title": "Divide the list in chunks (sub-lists) based on filter criterion", "body": "<p>I have a list like this</p>\n\n<pre><code>a = ['31', '20', '54', '68', '65', '72', '00', '00', '00', '82', '4d', '61', '72', '67', '69', '6e', '00', '00', '00', '00','00', '84', '92', '4d','91']\n</code></pre>\n\n<p>I want to split them into list of tuples and remove the chunk of zeros.</p>\n\n<pre><code>li_tup = [('31', '20', '54', '68', '65', '72'), ('82', '4d', '61', '72', '67', '69', '6e'), ('84', '92', '4d','91')] \n</code></pre>\n\n<p>When I use the <code>splice[index:index]</code> the original list remains the same. So the loop iterates over the same item. How do I remove the spliced items from the original list? So I dont have to iterate over it again.</p>\n"}, {"tags": ["python", "django", "postgresql", "heroku", "psycopg2"], "comments": [{"owner": {"reputation": 1770, "user_id": 4249576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/682A5.jpg?s=128&g=1", "display_name": "D&#225;rio", "link": "https://stackoverflow.com/users/4249576/d%c3%a1rio"}, "edited": false, "score": 0, "creation_date": 1496949183, "post_id": 40271083, "comment_id": 75885212, "body": "phildini, did you manage to find the solution for this issue?"}, {"owner": {"reputation": 89, "user_id": 1827539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/062f9d19b2fb305e6734c778ff01e87b?s=128&d=identicon&r=PG", "display_name": "phildini", "link": "https://stackoverflow.com/users/1827539/phildini"}, "reply_to_user": {"reputation": 1770, "user_id": 4249576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/682A5.jpg?s=128&g=1", "display_name": "D&#225;rio", "link": "https://stackoverflow.com/users/4249576/d%c3%a1rio"}, "edited": false, "score": 0, "creation_date": 1500431959, "post_id": 40271083, "comment_id": 77328503, "body": "@D&#225;rio I still don&#39;t know what the exact issue was, but upgrading the psycopg2 package fixed it."}], "answers": [{"tags": [], "owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "is_accepted": false, "score": 2, "last_activity_date": 1546475912, "last_edit_date": 1592644375, "creation_date": 1531591742, "answer_id": 51342132, "question_id": 40271083, "link": "https://stackoverflow.com/questions/40271083/typeerror-argument-2-must-be-a-connection-cursor-or-none-in-psycopg2/51342132#51342132", "title": "`TypeError: argument 2 must be a connection, cursor or None` in Psycopg2", "body": "<h1>tldr</h1>\n<pre><code># example borked\nengine = sqlalchemy.create_engine('postgresql+psycopg2://', creator=lambda: 'asdf')\n# example works\nengine = sqlalchemy.create_engine('postgresql+psycopg2://', creator=lambda: conn)\n</code></pre>\n<p>I think this might be an error from one of the following:</p>\n<ul>\n<li><p><code>psycopg2.extensions.register_type</code></p>\n</li>\n<li><p><code>_connect</code></p>\n</li>\n<li><p>cpython</p>\n<ul>\n<li><code>static PyObject *psyco_register_type</code></li>\n<li><code>static PyObject * psyco_connect</code></li>\n</ul>\n</li>\n</ul>\n<p>examples</p>\n<ul>\n<li><a href=\"https://github.com/psycopg/psycopg2/search?q=register_type&amp;unscoped_q=register_type\" rel=\"nofollow noreferrer\">https://github.com/psycopg/psycopg2/search?q=register_type&amp;unscoped_q=register_type</a></li>\n</ul>\n<p>Specifcally the error can be raised from :</p>\n<p><code>psycopg2.</code></p>\n<pre><code>_ipaddress.py\n_json.py\n_psycopg.cpython-37m-darwin.so\n_range.py\nextensions.py\nextras.py\n</code></pre>\n<p>in my case:</p>\n<pre><code>_ext.register_type(_ext.UUID, conn_or_curs)\n</code></pre>\n<p>Apparently this is what it does:</p>\n<ul>\n<li><a href=\"https://github.com/psycopg/psycopg2/blob/master/doc/src/extensions.rst#database-types-casting-functions\" rel=\"nofollow noreferrer\">https://github.com/psycopg/psycopg2/blob/master/doc/src/extensions.rst#database-types-casting-functions</a></li>\n</ul>\n<p>the code in my case which caused the issue was the <code>create_engine</code> keyword <code>creator=get_connection</code> in the following example:</p>\n<pre><code> from psycopg2.pool import ThreadedConnectionPool\n from contextlib import contextmanager\n import sqlalchemy\n conn_string = &quot;host='127.0.0.1' dbname='postgres' user='someuser' password='somepassword'&quot;\n top = ThreadedConnectionPool(1, 250, conn_string)\n\n @contextmanager\n def get_connection():\n     try:\n         connection = top.getconn()\n         yield connection\n     finally:\n         top.putconn(connection)\n\n @contextmanager\n def get_cursor(commit=False):\n     with get_connection() as connection:\n         cursor = connection.cursor(\n             cursor_factory=psycopg2.extras.RealDictCursor)\n         try:\n             yield cursor\n             if commit:\n                 connection.commit()\n         finally:\n             cursor.close()\n\n engine = sqlalchemy.create_engine('postgresql+psycopg2://', creator=get_connection)\n\n @contextmanager\n def get_sqlalchemy_engine():\n     yield engine.connect()\n</code></pre>\n<p>what caused the issue:</p>\n<pre><code>with get_sqlalchemy_engine() as engine:\n    pd.DataFrame([1]).to_sql('asdf', engine, if_exists='replace')\n</code></pre>\n<p>And what fixed the issue:</p>\n<pre><code>@contextmanager\ndef get_sqlalchemy_engine():\n    with get_connection() as conn:\n        try:\n            engine = sqlalchemy.create_engine('postgresql+psycopg2://', creator=lambda: conn)\n            # engine = sqlalchemy.create_engine('postgresql+psycopg2://', creator=lambda: 'asdf')\n            yield engine\n        finally:\n            engine.dispose()\n</code></pre>\n<p>further research indicates the following:</p>\n<pre><code>JSON = new_type((oid, ), name, typecast_json)\nif array_oid is not None:\n    JSONARRAY = new_array_type((array_oid, ), &quot;%sARRAY&quot; % name, JSON)\nelse:\n    JSONARRAY = None\n\nreturn JSON, JSONARRAY\n</code></pre>\n<p>basically <code>conn_or_curs</code> is not a connection or cursor, but rather some other thing,</p>\n<pre><code>register_type(JSON, not globally and conn_or_curs or None)\nregister_type(JSONARRAY, not globally and conn_or_curs or None)\n</code></pre>\n<ul>\n<li><a href=\"https://github.com/psycopg/psycopg2/blob/f947c0e6be1d2c3ea8d2d8badf683b95bd213444/psycopg/psycopgmodule.c#L189\" rel=\"nofollow noreferrer\">https://github.com/psycopg/psycopg2/blob/f947c0e6be1d2c3ea8d2d8badf683b95bd213444/psycopg/psycopgmodule.c#L189</a></li>\n<li><a href=\"https://github.com/psycopg/psycopg2/blob/f947c0e6be1d2c3ea8d2d8badf683b95bd213444/psycopg/psycopgmodule.c#L260\" rel=\"nofollow noreferrer\">https://github.com/psycopg/psycopg2/blob/f947c0e6be1d2c3ea8d2d8badf683b95bd213444/psycopg/psycopgmodule.c#L260</a></li>\n</ul>\n"}], "owner": {"reputation": 89, "user_id": 1827539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/062f9d19b2fb305e6734c778ff01e87b?s=128&d=identicon&r=PG", "display_name": "phildini", "link": "https://stackoverflow.com/users/1827539/phildini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1546475912, "creation_date": 1477511735, "last_edit_date": 1531591780, "question_id": 40271083, "link": "https://stackoverflow.com/questions/40271083/typeerror-argument-2-must-be-a-connection-cursor-or-none-in-psycopg2", "title": "`TypeError: argument 2 must be a connection, cursor or None` in Psycopg2", "body": "<p>I have a heroku pipeline set up, and have just enabled review apps for it. It is using the same codebase as my staging and production apps, same settings files and everything.</p>\n\n<p>When the review app spins up, it can connect to the created DB and run migrations. When I try to connect to the app in the browser, I get </p>\n\n<pre><code>`TypeError: argument 2 must be a connection, cursor or None` in `psycopg2/_json.py, register_json:139`\n</code></pre>\n\n<p>Top of stack is: </p>\n\n<pre><code>`django.contrib.sites.models._get_site_by_id`.\n</code></pre>\n\n<p>I've attached the Opbeat output of the error frame at the bottom of this post.</p>\n\n<p><a href=\"https://github.com/phildini/logtacts/blob/master/logtacts/prod_settings/__init__.py\" rel=\"noreferrer\">Settings file</a> is linked.</p>\n\n<p>When I set <code>DEBUG=True</code>, everything works fine. Which might suggest an <code>ALLOWED_HOSTS</code> issue, but when I set <code>ALLOWED_HOSTS</code> to <code>'*'</code> with <code>DEBUG=False</code>, it still errors?</p>\n\n<p>What is wrong with my setup? This works in staging, and production, but not the review apps.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HzaKg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HzaKg.png\" alt=\"error frame\"></a></p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 1066, "user_id": 6930916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d45da3aacf3390f5502e952c06cb9f?s=128&d=identicon&r=PG&f=1", "display_name": "hvwaldow", "link": "https://stackoverflow.com/users/6930916/hvwaldow"}, "edited": false, "score": 1, "creation_date": 1477513199, "post_id": 40271077, "comment_id": 67802825, "body": "It is unclear what the data structure is, and between what exactly you calculate differences. Assuming data[j] is a dict you can get a &quot;sub-dict&quot; with keys != group[k] as dict-comprehension: {d: data[j][d] for d in data[j] if d != group[k]}."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6884169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c99a3d1d6000d24c5bf740ad96a9977?s=128&d=identicon&r=PG&f=1", "display_name": "Smitje", "link": "https://stackoverflow.com/users/6884169/smitje"}, "is_accepted": false, "score": 0, "last_activity_date": 1477512301, "creation_date": 1477512301, "answer_id": 40271231, "question_id": 40271077, "link": "https://stackoverflow.com/questions/40271077/python-access-all-dictionary-elements-not-corresponding-to-key/40271231#40271231", "title": "python - access all dictionary elements not corresponding to key", "body": "<p>You Could compare them all and then throw out the ones where the group is the same as the one being compared to. (I hope that makes sense)</p>\n\n<p>Or </p>\n\n<p>make a temporary group[l] equal to group[k] minus the instance you are comparing to.</p>\n"}], "owner": {"reputation": 111, "user_id": 6837955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/22c57636a7bbe7f095ed284e1ee3c348?s=128&d=identicon&r=PG&f=1", "display_name": "Allie H", "link": "https://stackoverflow.com/users/6837955/allie-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477512301, "creation_date": 1477511711, "question_id": 40271077, "link": "https://stackoverflow.com/questions/40271077/python-access-all-dictionary-elements-not-corresponding-to-key", "title": "python - access all dictionary elements not corresponding to key", "body": "<p>I'm trying to write code to compute pairwise differences in a bunch of data within and between groups. That is, I've loaded the data into a dictionary so that the ith value of data j in group k is accessible by </p>\n\n<pre><code>data[j][group[k]][i]\n</code></pre>\n\n<p>I've written for loops to calculate all of the within group pairwise differences, but I'm a little stuck on how to then calculate the between groups pairwise differences. Is there a way to compare all of the values in <code>data[j][group[k]]</code> to all of the values in <code>data[j][*NOT*group[k]]</code>?\nThanks for any suggestions.</p>\n"}, {"tags": ["python", "iterable", "built-in"], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 1, "last_activity_date": 1477512274, "last_edit_date": 1477512274, "creation_date": 1477511794, "answer_id": 40271094, "question_id": 40271033, "link": "https://stackoverflow.com/questions/40271033/testing-to-see-if-ipv4-address-is-valid/40271094#40271094", "title": "Testing to see if IPv4 address is valid", "body": "<p>Don't reinvent the wheel (unless you're happy to maintain the wheel).  You can use a regex to validate ipv4 addresses.  The following pattern is <a href=\"https://github.com/django/django/blob/f734e2d4b2fc4391a4d097b80357724815c1d414/django/core/validators.py#L83\" rel=\"nofollow\">taken from Django</a>:</p>\n\n<pre><code>r'(?:25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}'\n</code></pre>\n\n<p>If you are working already in the context of a Django project, you may prefer to just import their validator and use it directly:</p>\n\n<pre><code>from django.core.validators import validate_ipv4_address\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1639, "user_id": 3030010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c97ca617bb8ebf436f2131091f8d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3030010", "link": "https://stackoverflow.com/users/3030010/user3030010"}, "is_accepted": false, "score": 1, "last_activity_date": 1477512255, "last_edit_date": 1477512255, "creation_date": 1477511875, "answer_id": 40271121, "question_id": 40271033, "link": "https://stackoverflow.com/questions/40271033/testing-to-see-if-ipv4-address-is-valid/40271121#40271121", "title": "Testing to see if IPv4 address is valid", "body": "<p>If you are using Python3, there is a built-in <a href=\"https://docs.python.org/3/library/ipaddress.html\" rel=\"nofollow\"><code>ipaddress</code></a> module that you can use.</p>\n\n<p>As for what is wrong with your code, I don't believe that the all() function does what you think it does. all() expects an iterable of Booleans, and returns <code>True</code> if every one of those Booleans is <code>True</code>.</p>\n\n<p>To get that to work how you expected, you probably want something like</p>\n\n<pre><code>all(addr_piece &gt;= slice_split_address[0] for addr_piece in slice_split_address)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 6535798, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153683285618365/picture?type=large", "display_name": "eeskonivich ", "link": "https://stackoverflow.com/users/6535798/eeskonivich"}, "edited": false, "score": 0, "creation_date": 1478143567, "post_id": 40271188, "comment_id": 68037980, "body": "Thanks this has really helped me out. Sorry it has taken so long to respond, been busy. Wondering what the requirements are for an IPv4 address? do the numbers have to be consecutively bigger, with the exception of the first number? Having a hard time finding the exact requirements."}, {"owner": {"reputation": 2063, "user_id": 473890, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f99ad93b98334809733352b22922d6d?s=128&d=identicon&r=PG", "display_name": "xZise", "link": "https://stackoverflow.com/users/473890/xzise"}, "reply_to_user": {"reputation": 101, "user_id": 6535798, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153683285618365/picture?type=large", "display_name": "eeskonivich ", "link": "https://stackoverflow.com/users/6535798/eeskonivich"}, "edited": false, "score": 1, "creation_date": 1478206662, "post_id": 40271188, "comment_id": 68072456, "body": "There are special IP addresses, but they aren&#39;t \u201cinvalid\u201d. And there is no requirement that the number need to bigger than the previous. For example <code>192.168.0.254</code> or <code>192.168.178.1</code> are a perfectly valid IPs."}], "tags": [], "owner": {"reputation": 2063, "user_id": 473890, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f99ad93b98334809733352b22922d6d?s=128&d=identicon&r=PG", "display_name": "xZise", "link": "https://stackoverflow.com/users/473890/xzise"}, "is_accepted": true, "score": 1, "last_activity_date": 1477512149, "creation_date": 1477512149, "answer_id": 40271188, "question_id": 40271033, "link": "https://stackoverflow.com/questions/40271033/testing-to-see-if-ipv4-address-is-valid/40271188#40271188", "title": "Testing to see if IPv4 address is valid", "body": "<p>As said in the documentation of <a href=\"https://docs.python.org/3/library/functions.html#all\" rel=\"nofollow\"><code>all</code></a>, it checks if every element in a list evaluates to <code>True</code> (basically <code>bool(e)</code> is <code>True</code>) or it is empty.</p>\n\n<p>Now you have a list of integers in <code>slice_split_address</code> and so it'll check if every element of that list evaluates to <code>True</code> if you just call it like you do and any number other than 0 will evaluate to <code>True</code>, but an IP like <code>127.0.0.1</code> is actually valid.</p>\n\n<p>So what you need is actually a list which contains <code>True</code> if the corresponding number is between 0 and 255 (inclusive):</p>\n\n<pre><code>is_valid = [0 &lt;= e &lt;= 255 for e in slice_split_address]\n</code></pre>\n\n<p>If you call then <code>all(is_valid)</code> it returns if every item in <code>slice_split_address</code> is between 0 and 255. Usually it'll be combined into something like <code>all(0 &lt;= e &lt;= 255 for e in slice_split_address)</code>.</p>\n\n<p>Now there is still one issue in your implementation because <code>slice_split_address</code> doesn't actually contain the first number of the IP address, so you might include it. Or do you actually want the first number to be lower or equal to the other three numbers?</p>\n\n<p>Also your check <code>all(\u2026) &gt;= \u2026</code> doesn't make sense as <code>all()</code> only returns <code>True</code> or <code>False</code> so comparing it with an integer doesn't really make sense.</p>\n\n<p>Note that <code>all(is_valid)</code> will also return <code>True</code> to IP addresses like <code>0.0.0.0</code> so might need to adjust the range I used.</p>\n"}, {"tags": [], "owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "is_accepted": false, "score": 0, "last_activity_date": 1477512195, "creation_date": 1477512195, "answer_id": 40271200, "question_id": 40271033, "link": "https://stackoverflow.com/questions/40271033/testing-to-see-if-ipv4-address-is-valid/40271200#40271200", "title": "Testing to see if IPv4 address is valid", "body": "<p>As others have said, there are better ways to do this. And your algorithm doesn't actually validate IPv4 addresses. But here's a repaired version of your code.</p>\n\n<pre><code>def IPv4_address(address):\n    if address.count(\".\") != 3:\n        return False\n    elif address == \"\":\n        return False\n    else:\n        lst_split_address = address.split(\".\")\n        slice_split_address = [int(num) for num in lst_split_address[1:]]\n        head = slice_split_address[0]\n        return all(u &gt;= head for u in slice_split_address)\n\nprint IPv4_address(\"10.20.30.40\")\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>True\n</code></pre>\n\n<p>I've moved the <code>lst_split_address</code> stuff into the <code>else</code> block because there's no need to do it if the if / elif parts return False. </p>\n\n<pre><code>all(u &gt;= head for u in slice_split_address)\n</code></pre>\n\n<p>uses a simple generator expression to check that all items in <code>slice_split_address</code> are >= the head item.</p>\n"}], "owner": {"reputation": 101, "user_id": 6535798, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153683285618365/picture?type=large", "display_name": "eeskonivich ", "link": "https://stackoverflow.com/users/6535798/eeskonivich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 40271188, "answer_count": 4, "score": 0, "last_activity_date": 1477513519, "creation_date": 1477511514, "last_edit_date": 1477511707, "question_id": 40271033, "link": "https://stackoverflow.com/questions/40271033/testing-to-see-if-ipv4-address-is-valid", "title": "Testing to see if IPv4 address is valid", "body": "<p>I want to return a boolean depending if the address given is a correct IPv4 address or not. I am having an issue with the all() built in in python. I have looked up the documentation on it and it seems straight forward. That being said I can't get it to work for my expression. If you could explain how it works layman's terms and how I could correct my code, that would be great.</p>\n\n<pre><code>def IPv4_address(address):\n\n    lst_split_address = address.split(\".\")\n    slice_split_address = [int(num) for num in lst_split_address[1:]]\n\n    if address.count(\".\") != 3:\n        return False\n    elif address == \"\":\n        return False\n    else:\n        if all(slice_split_address) &gt;= slice_split_address[0]:\n            return True\n        else:\n            return False\n\n\nprint IPv4_address(\"10.20.30.40\")\n</code></pre>\n"}, {"tags": ["python", "list", "command-line"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1477511724, "post_id": 40271029, "comment_id": 67802086, "body": "What is the <code>print a</code> printing?"}, {"owner": {"reputation": 1789, "user_id": 5626104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9bff58c22f757507d69a779603d3eac?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5626104/brian"}, "edited": false, "score": 0, "creation_date": 1477511853, "post_id": 40271029, "comment_id": 67802161, "body": "What&#39;s <code>edges()</code> doing? Is it expecting a list input? If you&#39;ve printed <code>a</code> and verified it has two elements, then that&#39;s not the problem."}, {"owner": {"reputation": 184, "user_id": 6800998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bc84759ab0eee320fead3b71bb71a2f?s=128&d=identicon&r=PG&f=1", "display_name": "john ", "link": "https://stackoverflow.com/users/6800998/john"}, "reply_to_user": {"reputation": 1789, "user_id": 5626104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9bff58c22f757507d69a779603d3eac?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5626104/brian"}, "edited": false, "score": 0, "creation_date": 1477512034, "post_id": 40271029, "comment_id": 67802251, "body": "@Brian This function takes the first passed element and stores it as a dictionary value and second element as a dictionary key"}, {"owner": {"reputation": 1789, "user_id": 5626104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9bff58c22f757507d69a779603d3eac?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5626104/brian"}, "edited": false, "score": 1, "creation_date": 1477512189, "post_id": 40271029, "comment_id": 67802319, "body": "Might be helpful to show the <code>edges</code> function. I suspect that <code>edges</code> might be expecting something like <code>edges(a)</code> and references <code>a[0]</code> and <code>a[1]</code> internally, causing the <code>IndexError</code>. Does <code>print a[1]</code> also cause an <code>IndexError</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 6800998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bc84759ab0eee320fead3b71bb71a2f?s=128&d=identicon&r=PG&f=1", "display_name": "john ", "link": "https://stackoverflow.com/users/6800998/john"}, "edited": false, "score": 0, "creation_date": 1477513599, "post_id": 40271168, "comment_id": 67803020, "body": "Yes the counter helped me debug the problem , thank you !"}], "tags": [], "owner": {"reputation": 541, "user_id": 5110035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwEM7.jpg?s=128&g=1", "display_name": "MichaelMMeskhi", "link": "https://stackoverflow.com/users/5110035/michaelmmeskhi"}, "is_accepted": true, "score": 0, "last_activity_date": 1477512038, "creation_date": 1477512038, "answer_id": 40271168, "question_id": 40271029, "link": "https://stackoverflow.com/questions/40271029/error-while-accepting-inputs-from-command-line-in-python/40271168#40271168", "title": "Error while accepting inputs from command line in python", "body": "<p>Try specifying the index into which you are inputting the word. This will keep the list/array from overflowing and causing \"index out of bounds\" error.</p>\n\n<p><strong>EDIT</strong>\nI see you are trying to store the first element as the key and then value. Please use a counter such as 'k' and 'v' to keep track and avoid overflows.</p>\n\n<p>Hope this helps,</p>\n"}], "owner": {"reputation": 184, "user_id": 6800998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bc84759ab0eee320fead3b71bb71a2f?s=128&d=identicon&r=PG&f=1", "display_name": "john ", "link": "https://stackoverflow.com/users/6800998/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 40271168, "answer_count": 1, "score": 0, "last_activity_date": 1477512399, "creation_date": 1477511507, "last_edit_date": 1477512399, "question_id": 40271029, "link": "https://stackoverflow.com/questions/40271029/error-while-accepting-inputs-from-command-line-in-python", "title": "Error while accepting inputs from command line in python", "body": "<p>I tried to take an input from the command line by passing a file and storing it in an array.\nI know my input is two words separated by white space, so I tried</p>\n\n<pre><code>import sys\nfor line in sys.stdin:\n   a=[]\n\n   a=line.split() #to split the 2 words separated by white space into 2 list elements \n\n   print a # just to debug my code\n\n   edges(a[0], a[1])  #calling the function edges\n</code></pre>\n\n<p>To this I m getting an error as:-</p>\n\n<pre><code>  edges(a[0], a[1])\nIndexError: list index out of range\n</code></pre>\n\n<p>Can someone suggest what am I doing wrong ?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "matplotlib", "cartopy"], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 8083048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2485646ffa5ffd44fac561d1edd162fb?s=128&d=identicon&r=PG&f=1", "display_name": "ouranos", "link": "https://stackoverflow.com/users/8083048/ouranos"}, "edited": false, "score": 0, "creation_date": 1562167972, "post_id": 40279430, "comment_id": 100295699, "body": "I get an error when trying this work-around. <code>ValueError: Image size of 319440347x319385677 pixels is too large. It must be less than 2^16 in each direction</code> using Python 3.7.2 and Cartopy 0.17.0. Any ideas?"}, {"owner": {"reputation": 696, "user_id": 4192269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pz9Sj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4192269/chris"}, "edited": false, "score": 0, "creation_date": 1571048104, "post_id": 40279430, "comment_id": 103098344, "body": "I tried using this with PlateCarree - fiddling with the threshold value either makes the &quot;steppiness&quot; worse, or the line just becomes a straight line"}, {"owner": {"reputation": 2507, "user_id": 1867427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26a824d58d8524a0cf6cc2bd1c40c36d?s=128&d=identicon&r=PG&f=1", "display_name": "ajdawson", "link": "https://stackoverflow.com/users/1867427/ajdawson"}, "edited": false, "score": 1, "creation_date": 1571050822, "post_id": 40279430, "comment_id": 103099682, "body": "The default threshold for PlateCarree is much smaller at 0.5 for a global plot. Did you try values smaller than 0.5?"}, {"owner": {"reputation": 379, "user_id": 6764310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebde673fa19aa3d38eadb1af9ab5ccc?s=128&d=identicon&r=PG", "display_name": "KiwiKilian", "link": "https://stackoverflow.com/users/6764310/kiwikilian"}, "edited": false, "score": 0, "creation_date": 1611222407, "post_id": 40279430, "comment_id": 116382926, "body": "Have a look at this answer: <a href=\"https://stackoverflow.com/a/60724892/6764310\">stackoverflow.com/a/60724892/6764310</a>"}, {"owner": {"reputation": 696, "user_id": 4192269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pz9Sj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4192269/chris"}, "edited": false, "score": 0, "creation_date": 1614561062, "post_id": 40279430, "comment_id": 117414925, "body": "I could not get this working, but KiwiKilian&#39;s link worked a treat"}], "tags": [], "owner": {"reputation": 2507, "user_id": 1867427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26a824d58d8524a0cf6cc2bd1c40c36d?s=128&d=identicon&r=PG&f=1", "display_name": "ajdawson", "link": "https://stackoverflow.com/users/1867427/ajdawson"}, "is_accepted": true, "score": 10, "last_activity_date": 1477555815, "creation_date": 1477555815, "answer_id": 40279430, "question_id": 40270990, "link": "https://stackoverflow.com/questions/40270990/cartopy-higher-resolution-for-great-circle-distance-line/40279430#40279430", "title": "cartopy: higher resolution for great circle distance line", "body": "<p>This problem is due to the hard-coded threshold in the projection. Currently this is not a user controllable parameter, but you can work around that by defining your own sub-class:</p>\n\n<pre><code>class LowerThresholdRobinson(ccrs.Robinson):\n\n    @property\n    def threshold(self):\n        return 1e3\n</code></pre>\n\n<p>If you use <code>LowerThresholdRobinson()</code> instead of <code>ccrs.Robinson()</code> when defining the axes this should eliminate the problem.</p>\n"}], "owner": {"reputation": 73, "user_id": 7076910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854979e4cb478a7ef09dfebb96969751?s=128&d=identicon&r=PG&f=1", "display_name": "Kristen", "link": "https://stackoverflow.com/users/7076910/kristen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 1, "accepted_answer_id": 40279430, "answer_count": 1, "score": 7, "last_activity_date": 1477555815, "creation_date": 1477511335, "question_id": 40270990, "link": "https://stackoverflow.com/questions/40270990/cartopy-higher-resolution-for-great-circle-distance-line", "title": "cartopy: higher resolution for great circle distance line", "body": "<p>I am trying to plot a great circle distance between two points. I have found an in the cartopy docs (introductory_examples/01.great_circle.html):</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\nax = plt.axes(projection=ccrs.Robinson())\n\nax.set_global()\n\nax.coastlines()\n\nplt.plot([-0.08, 132], [51.53, 43.17], color='red',      transform=ccrs.Geodetic())\nplt.plot([-0.08, 132], [51.53, 43.17], color='blue', transform=ccrs.PlateCarree())\n\nplt.show()\n</code></pre>\n\n<p>which makes the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RPfPH.png\" rel=\"noreferrer\">great circle example</a></p>\n\n<p>The thing is, in my own work, the two points are much closer together, and in a different projection (though I think that isn't important here). If I change this code to be a line in a smaller area, like so:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\nax = plt.axes(projection=ccrs.Robinson())\n\nax.set_extent([-5, 55, 40, 55])\n\nax.coastlines()\n\nplt.plot([-0.08, 50], [51.53, 43.17], color='red',      transform=ccrs.Geodetic())\nplt.plot([-0.08, 50], [51.53, 43.17], color='blue', transform=ccrs.PlateCarree())\n\nplt.show()\n</code></pre>\n\n<p>This makes the following image: <a href=\"https://i.stack.imgur.com/4HZJq.png\" rel=\"noreferrer\">shorter line</a></p>\n\n<p>The red great circle line in this case looks crappy and looks like it is due to being too low resolution. How do I increase the number of points making up the great circle line?</p>\n"}, {"tags": ["python", "url", "redirect"], "comments": [{"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1477510687, "post_id": 40270776, "comment_id": 67801580, "body": "Do you have an ad blocker running? If not, copy the full request headers through your browser&#39;s developer tools."}, {"owner": {"reputation": 91, "user_id": 6562181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-6dPLYasF6BQ/AAAAAAAAAAI/AAAAAAAAAB8/ZZyKz_F6Yvs/photo.jpg?sz=128", "display_name": "opamp", "link": "https://stackoverflow.com/users/6562181/opamp"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1477511306, "post_id": 40270776, "comment_id": 67801890, "body": "@Blender I&#39;m sorry, I&#39;m not too sure what you mean. I just started using the developer tools. Do you just wan the string?"}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1477511380, "post_id": 40270776, "comment_id": 67801919, "body": "On Chrome, it&#39;s something like &quot;Copy as cURL command line&quot; when you right click on the request."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6562181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-6dPLYasF6BQ/AAAAAAAAAAI/AAAAAAAAAB8/ZZyKz_F6Yvs/photo.jpg?sz=128", "display_name": "opamp", "link": "https://stackoverflow.com/users/6562181/opamp"}, "edited": false, "score": 0, "creation_date": 1477512038, "post_id": 40271073, "comment_id": 67802252, "body": "Thanks @MicahStetson! However, I still don&#39;t see status 400. This time its 302 and history seems to empty."}], "tags": [], "owner": {"reputation": 594, "user_id": 2654541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfa49aaf3b8bbf839a09a9a2e8414bb?s=128&d=identicon&r=PG", "display_name": "MicahStetson", "link": "https://stackoverflow.com/users/2654541/micahstetson"}, "is_accepted": false, "score": 0, "last_activity_date": 1477511701, "creation_date": 1477511701, "answer_id": 40271073, "question_id": 40270776, "link": "https://stackoverflow.com/questions/40270776/python-shows-failed-redirect-as-valid/40271073#40271073", "title": "Python shows failed redirect as valid", "body": "<p>By default, <code>requests</code> <a href=\"http://docs.python-requests.org/en/master/user/quickstart/#redirection-and-history\" rel=\"nofollow\">follows redirects transparently</a>. To get the initial response without the redirect, you can either examine <code>r.history</code>, or disable redirects like this:</p>\n\n<pre><code>import requests\nr = requests.get('http://principal.com', allow_redirects=False)\nprint(r)\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6562181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-6dPLYasF6BQ/AAAAAAAAAAI/AAAAAAAAAB8/ZZyKz_F6Yvs/photo.jpg?sz=128", "display_name": "opamp", "link": "https://stackoverflow.com/users/6562181/opamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477511701, "creation_date": 1477510545, "question_id": 40270776, "link": "https://stackoverflow.com/questions/40270776/python-shows-failed-redirect-as-valid", "title": "Python shows failed redirect as valid", "body": "<p>I am trying to see a redirect for <strong>pricipal.com</strong>. When using the developer tools I can see that the redirect fails with status code 400. However, when using python I see Status Code: 200</p>\n\n<p>This is the code I'm using:</p>\n\n<pre><code>import requests\nimport urllib.request, urllib.error\nimport vertica_python\n\nr = requests.get('http://pricipal.com')\nt = requests.ReadTimeout()\ntry:    \n    print('#################')\n# d = geturl(r)\n# print(r.status_code)\n    print(\"{}: {}\".format(r, r.status_code))\n    print('URL: ' + r.url)\n    print(\"{}: {}\".format('History: ', r.history))\n    print(\"{}: {}\".format(r, r.status_code))\n    print('#################')\nexcept requests.ConnectionError:\n# prints the int of the status code. Find more at httpstatusrappers.com :)\n    print('######FAIL#######')\n    print(r + \": failed to connect\")\n    print(r.ConnectionError)\n    print(r.url)\n    print('Read timeout: ' + t)\n    print('#################')\n    print('done')\n</code></pre>\n\n<p>How can I modify the code to properly display that the redirect has status code 400 and not 200?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "html", "email", "email-attachments"], "answers": [{"tags": [], "owner": {"reputation": 1085, "user_id": 1690805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g5JiQ.jpg?s=128&g=1", "display_name": "Georg Pfolz", "link": "https://stackoverflow.com/users/1690805/georg-pfolz"}, "is_accepted": false, "score": 1, "last_activity_date": 1488961588, "creation_date": 1488961588, "answer_id": 42666372, "question_id": 40270655, "link": "https://stackoverflow.com/questions/40270655/sending-attachment-in-html-email-with-python/42666372#42666372", "title": "Sending attachment in HTML email with Python", "body": "<p>Use</p>\n\n<pre><code>msg = MIMEMultipart('mixed')\n</code></pre>\n\n<p>instead of 'alternative'</p>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 1597934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b79cd14f520191a6c0e10d5837dfa2a4?s=128&d=identicon&r=PG", "display_name": "BlowMan", "link": "https://stackoverflow.com/users/1597934/blowman"}, "edited": false, "score": 0, "creation_date": 1618923855, "post_id": 64174056, "comment_id": 118745696, "body": "This solution actually solved my issue. And thanks for the detailed answer."}, {"owner": {"reputation": 424, "user_id": 1426495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSoEQ.jpg?s=128&g=1", "display_name": "Filip Kwiatkowski", "link": "https://stackoverflow.com/users/1426495/filip-kwiatkowski"}, "reply_to_user": {"reputation": 293, "user_id": 1597934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b79cd14f520191a6c0e10d5837dfa2a4?s=128&d=identicon&r=PG", "display_name": "BlowMan", "link": "https://stackoverflow.com/users/1597934/blowman"}, "edited": false, "score": 0, "creation_date": 1618929714, "post_id": 64174056, "comment_id": 118748733, "body": "@BlowMan I&#39;m glad it was helpful"}], "tags": [], "owner": {"reputation": 424, "user_id": 1426495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSoEQ.jpg?s=128&g=1", "display_name": "Filip Kwiatkowski", "link": "https://stackoverflow.com/users/1426495/filip-kwiatkowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1601651688, "creation_date": 1601651688, "answer_id": 64174056, "question_id": 40270655, "link": "https://stackoverflow.com/questions/40270655/sending-attachment-in-html-email-with-python/64174056#64174056", "title": "Sending attachment in HTML email with Python", "body": "<p>To have text, html and attachments at the same time it is necessary to use both mixed and alternative parts.</p>\n<pre><code>import smtplib\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.base import MIMEBase\nfrom email.mime.text import MIMEText\n\ntext = &quot;This is the plain text version.&quot;\nhtml = &quot;&lt;html&gt;&lt;p&gt;This is some HTML&lt;/p&gt;&lt;/html&gt;&quot;\ntext_part = MIMEText(text, 'plain')\nhtml_part = MIMEText(html, 'html')\n\nmsg_alternative = MIMEMultipart('alternative')\nmsg_alternative.attach(text_part)\nmsg_alternative.attach(html_part)\n\nfilename='graph.pdf'\nfp=open(filename,'rb')\nattachment = email.mime.application.MIMEApplication(fp.read(),_subtype=&quot;pdf&quot;)\nfp.close()\nattachment.add_header('Content-Disposition', 'attachment', filename=filename)\n\nmsg_mixed = MIMEMultipart('mixed')\nmsg_mixed.attach(msg_alternative)\nmsg_mixed.attach(attachment)\nmsg_mixed['From'] = 'me@gmail.com'\nmsg_mixed['To'] = 'you@gmail.com'\nmsg_mixed['Subject'] = 'Deliverability Report'\n\nsmtp_obj = smtplib.SMTP('SERVER', port=25)\nsmtp_obj.ehlo()\nsmtp_obj.login('NAME', 'PASSWORD')\nsmtp_obj.sendmail(msg_mixed['From'], msg_mixed['To'], msg_mixed.as_string())\nsmtp_obj.quit()\n</code></pre>\n<p>Message structure should be like this:</p>\n<p>Mixed:</p>\n<ul>\n<li>Alternative:\n<ul>\n<li>Text</li>\n<li>HTML</li>\n</ul>\n</li>\n<li>Attachment</li>\n</ul>\n"}], "owner": {"reputation": 265, "user_id": 3658457, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5f815a12e27379ab1507affab8aa5ace?s=128&d=identicon&r=PG&f=1", "display_name": "user3658457", "link": "https://stackoverflow.com/users/3658457/user3658457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5962, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1601651688, "creation_date": 1477510088, "question_id": 40270655, "link": "https://stackoverflow.com/questions/40270655/sending-attachment-in-html-email-with-python", "title": "Sending attachment in HTML email with Python", "body": "<p>I saw there are a few somewhat similar questions on stack overflow already, but I couldn't find a solution to my specific problem in them.  </p>\n\n<p>I am trying to use Python to send an HTML email with a .pdf attachment.  It seems to work fine when I check my email on gmail.com, but when I check the message through apple's Mail program, I do not see the attachment.  Any idea what is causing this?</p>\n\n<p>My code is below.  A lot of it is copied from various places on stack overflow, so I do not completely understand what each part is doing, but it seems to (mostly) work:</p>\n\n<pre><code>import smtplib  \nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText                    \nfrom email.mime.application import MIMEApplication\nfrom os.path import basename\nimport email\nimport email.mime.application\n\n#plain text version\ntext = \"This is the plain text version.\"\n\n#html body\nhtml = \"\"\"&lt;html&gt;&lt;p&gt;This is some HTML&lt;/p&gt;&lt;/html&gt;\"\"\"\n\n# Create message container - the correct MIME type is multipart/alternative.\nmsg = MIMEMultipart('alternative')\nmsg['Subject'] = \"Deliverability Report\"\nmsg['From'] = \"me@gmail.com\"\nmsg['To'] = \"you@gmail.com\"\n\n# Record the MIME types of both parts - text/plain and text/html\npart1 = MIMEText(text, 'plain')\npart2 = MIMEText(html, 'html')\n\n# create PDF attachment\nfilename='graph.pdf'\nfp=open(filename,'rb')\natt = email.mime.application.MIMEApplication(fp.read(),_subtype=\"pdf\")\nfp.close()\natt.add_header('Content-Disposition','attachment',filename=filename)\n\n# Attach parts into message container.\nmsg.attach(att)\nmsg.attach(part1)\nmsg.attach(part2)\n\n# Send the message via local SMTP server.\ns = smtplib.SMTP()\ns.connect('smtp.webfaction.com')\ns.login('NAME','PASSWORD')\ns.sendmail(msg['From'], msg['To'], msg.as_string())\ns.quit()\n</code></pre>\n\n<p>I'm not sure if it is relevant, but I am running this code on a WebFaction server.</p>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1477510575, "post_id": 40270627, "comment_id": 67801513, "body": "Can you provide a self-contained example with sample data demonstrating the problem?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 9, "creation_date": 1477511550, "post_id": 40270627, "comment_id": 67802000, "body": "what are the <code>dtypes</code>.?  Is it possible they are categorical with the information about all the bins in the category spec?"}, {"owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1477511689, "post_id": 40270627, "comment_id": 67802070, "body": "@piRSquared is correct. The dtype of <code>conf_bin</code> is <code>category</code>. Thanks!!"}, {"owner": {"reputation": 2123, "user_id": 4755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLwF0.jpg?s=128&g=1", "display_name": "ayorgo", "link": "https://stackoverflow.com/users/4755520/ayorgo"}, "edited": false, "score": 1, "creation_date": 1582625778, "post_id": 40270627, "comment_id": 106833469, "body": "Please refer to <a href=\"https://stackoverflow.com/a/50579578/4755520\">stackoverflow.com/a/50579578/4755520</a> for the categorical case. TL;DR use <code>.groupby(..., observed=True)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 975, "user_id": 5531059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YAeK.jpg?s=128&g=1", "display_name": "Fran&#231;ois Leblanc", "link": "https://stackoverflow.com/users/5531059/fran%c3%a7ois-leblanc"}, "is_accepted": false, "score": 2, "last_activity_date": 1589438029, "last_edit_date": 1589438029, "creation_date": 1522177356, "answer_id": 49520592, "question_id": 40270627, "link": "https://stackoverflow.com/questions/40270627/pandas-returning-empty-groups-in-groupby/49520592#49520592", "title": "Pandas returning empty groups in groupby", "body": "<p>I too was having this problem, which popped up when trying to create subplots for every category in my dataframe.</p>\n\n<p>I came up with the following workaround (based on <a href=\"https://stackoverflow.com/questions/14734533/how-to-access-pandas-groupby-dataframe-by-key\">this SO post</a>), by pulling out the non-empty groups into a list.</p>\n\n\n\n<pre><code>groups = df.groupby('conf_bin')\ngroup_list = [(index, group) for index, group in groups if len(group) &gt; 0]\n</code></pre>\n\n<p>It does break the implicit contract that \"you wrangle your data in pandas\", and probably mismanages memory, but it works.</p>\n\n<hr>\n\n<p>Now you can iterate through your groupby list with the same interface as with a groupby object, e.g.</p>\n\n\n\n<pre><code>fig, axes = plt.subplots(nrows=len(group_list), ncols=1)\nfor (index, group), ax in zip(group_list, axes.flatten()):\n    group['target'].plot(ax=ax, title=index)\n</code></pre>\n"}], "owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4952, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1589438029, "creation_date": 1477509996, "question_id": 40270627, "link": "https://stackoverflow.com/questions/40270627/pandas-returning-empty-groups-in-groupby", "title": "Pandas returning empty groups in groupby", "body": "<p>I have a Pandas DataFrame with 3 columns, <code>target</code>, <code>pred</code>, and <code>conf_bin</code>. If I run a <code>groupby(by='conf_bin').apply(...)</code> my apply function gets called with empty <code>DataFrame</code>s for values that do not appear in the <code>conf_bin</code> column. How is this possible?</p>\n\n<hr>\n\n<p><strong>Details</strong></p>\n\n<p>The DataFrame looks something like this:</p>\n\n<pre><code>        target  pred conf_bin\n0            5     6     0.50\n1            4     4     0.60\n2            4     4     0.50\n3            4     3     0.50\n4            4     5     0.50\n5            5     5     0.55\n6            5     5     0.55\n7            5     5     0.55\n</code></pre>\n\n<p>Obviously <code>conf_bin</code> is a numeric bin with values in the range <code>np.arange(0, 1, 0.05)</code>. However, not all values are present in the data:</p>\n\n<pre><code>In [224]: grp = tp.groupby(by='conf_bin')\n\nIn [225]: grp.groups.keys()\nOut[225]: dict_keys([0.5, 0.60000000000000009, 0.35000000000000003, 0.75, 0.85000000000000009, 0.65000000000000002, 0.55000000000000004, 0.80000000000000004, 0.20000000000000001, 0.45000000000000001, 0.40000000000000002, 0.30000000000000004, 0.70000000000000007, 0.25])\n</code></pre>\n\n<p>So, for example, the values <code>0</code> and <code>0.05</code> do not appear. However, when I run an <code>apply</code> on the group my function does get called for these values:</p>\n\n<pre><code>In [226]: grp.apply(lambda x: x.shape)\nOut[226]:\nconf_bin\n0.00        (0, 3)\n0.05        (0, 3)\n0.10        (0, 3)\n0.15        (0, 3)\n0.20       (22, 3)\n0.25       (75, 3)\n0.30       (95, 3)\n0.35      (870, 3)\n0.40     (8505, 3)\n0.45    (40068, 3)\n0.50    (51238, 3)\n0.55    (54305, 3)\n0.60    (47191, 3)\n0.65    (38977, 3)\n0.70    (34444, 3)\n0.75    (20435, 3)\n0.80     (3352, 3)\n0.85        (4, 3)\n0.90        (0, 3)\ndtype: object\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>How can Pandas even know that the values 0.0 and 0.5 \"make sense\" since they don't appear in my <code>DataFrame</code>?</li>\n<li>Why is it calling my apply function with empty <code>DataFrame</code> objects for values that do no appear in <code>grp.groups</code>?</li>\n</ol>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 2189, "user_id": 4313064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a3169edbfa182bfcb5981445b46c3473?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4313064/simon"}, "is_accepted": false, "score": 1, "last_activity_date": 1477510054, "creation_date": 1477510054, "answer_id": 40270639, "question_id": 40270582, "link": "https://stackoverflow.com/questions/40270582/how-do-i-separate-columns-using-sep-in-python-pandas/40270639#40270639", "title": "how do i separate columns using sep= in python pandas?", "body": "<p>You can read it as a csv file with sep=\"|\".</p>\n\n<p>Or you can read it into excel with separator \"|\" so it has multiple columns.</p>\n\n<p>read_excel does not have a sep parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 2, "last_activity_date": 1477510854, "creation_date": 1477510854, "answer_id": 40270864, "question_id": 40270582, "link": "https://stackoverflow.com/questions/40270582/how-do-i-separate-columns-using-sep-in-python-pandas/40270864#40270864", "title": "how do i separate columns using sep= in python pandas?", "body": "<p>You can use <code>read_csv()</code> as follows, keep in mind that the <code>sep</code> parameter accepts regular expression:</p>\n\n<blockquote>\n  <p>sep : str, default ','\n      Delimiter to use. If sep is None, will try to automatically determine\n      this. Separators longer than 1 character and different from '\\s+' will be\n      interpreted as regular expressions, will force use of the python parsing\n      engine and will ignore quotes in the data. Regex example: '\\r\\t'</p>\n</blockquote>\n\n<p>so <code>|</code> needs to be escaped with <code>\\</code>, otherwise it will be interpreted as <code>or</code> of patterns in regex:</p>\n\n<pre><code>import pandas as pd\nfrom io import StringIO\n\npd.read_csv(StringIO(\"\"\"emp_num | Name | Salary\n551234 | Joe | 5000\n551234 | Dan | 5001\n551234 | James | 5002\n551234 | Li | 5003\n551234 | Suzi | 5004\"\"\"), sep = \" \\| \")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8NYoU.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/8NYoU.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 6900523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/558736b53ebe559640dbcc618b0348ab?s=128&d=identicon&r=PG&f=1", "display_name": "krishna kishore", "link": "https://stackoverflow.com/users/6900523/krishna-kishore"}, "is_accepted": false, "score": 2, "last_activity_date": 1477513154, "last_edit_date": 1477513154, "creation_date": 1477511943, "answer_id": 40271136, "question_id": 40270582, "link": "https://stackoverflow.com/questions/40270582/how-do-i-separate-columns-using-sep-in-python-pandas/40271136#40271136", "title": "how do i separate columns using sep= in python pandas?", "body": "<p>you can use \".parse\" like</p>\n\n<pre><code>import pandas as pd\nxls_file = pd.ExcelFile('file path')\ndf = xls_file.parse('Sheet1')\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>   emp_num   Name   Salary\n0   551234    Joe   5000\n1   551234    Dan   5001\n2   551234  James   5002\n3   551234     Li   5003\n4   551234   Suzi   5004\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7076909, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/de17b15c5f4e7f0d09a37571d79766c6?s=128&d=identicon&r=PG&f=1", "display_name": "MaxKedem", "link": "https://stackoverflow.com/users/7076909/maxkedem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5758, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1477513154, "creation_date": 1477509796, "last_edit_date": 1477510074, "question_id": 40270582, "link": "https://stackoverflow.com/questions/40270582/how-do-i-separate-columns-using-sep-in-python-pandas", "title": "how do i separate columns using sep= in python pandas?", "body": "<p>I have the following table in a xlsx file:</p>\n\n<pre><code>emp_num | Name | Salary\n551234 | Joe | 5000\n551234 | Dan | 5001\n551234 | James | 5002\n551234 | Li | 5003\n551234 | Suzi | 5004\n</code></pre>\n\n<p>Im trying to separate the columns by using <code>sep= \" | \"</code>\nHere is my code:</p>\n\n<pre><code>df = pd.read_excel('I21.xlsx', sep=' | ', header=None)\n</code></pre>\n\n<p>After running the code this what i get:\nI use <code>header=None</code> only to show more clearly that there only 1 column.</p>\n\n<pre><code>                         0\n0  emp_num | Name | Salary\n1      551234 | Joe | 5000\n2      551234 | Dan | 5001\n3    551234 | James | 5002\n4       551234 | Li | 5003\n</code></pre>\n"}, {"tags": ["python", "facebook", "facebook-graph-api", "facebook-javascript-sdk"], "comments": [{"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1477513799, "post_id": 40270559, "comment_id": 67803113, "body": "What permissions does your access token include?"}, {"owner": {"reputation": 13, "user_id": 6728208, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ee50b6c095a0d08fab545cb4d0da8a45?s=128&d=identicon&r=PG&f=1", "display_name": "slimshady", "link": "https://stackoverflow.com/users/6728208/slimshady"}, "reply_to_user": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1477516681, "post_id": 40270559, "comment_id": 67804502, "body": "ads_management, user_friends and public_profile @CBroe"}, {"owner": {"reputation": 13, "user_id": 6728208, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ee50b6c095a0d08fab545cb4d0da8a45?s=128&d=identicon&r=PG&f=1", "display_name": "slimshady", "link": "https://stackoverflow.com/users/6728208/slimshady"}, "reply_to_user": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 2, "creation_date": 1477519211, "post_id": 40270559, "comment_id": 67805513, "body": "guys im an idiot, changed this line me = AdUser(fbid=&#39;126712121&#39;) to me = AdUser(fbid=&#39;me&#39;) and all was well with the world. still stick to my claim that facebook&#39;s documentation could have been cuter."}], "owner": {"reputation": 13, "user_id": 6728208, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ee50b6c095a0d08fab545cb4d0da8a45?s=128&d=identicon&r=PG&f=1", "display_name": "slimshady", "link": "https://stackoverflow.com/users/6728208/slimshady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477509704, "creation_date": 1477509704, "question_id": 40270559, "link": "https://stackoverflow.com/questions/40270559/how-do-i-do-the-setup-to-allow-myself-to-create-facebook-ad-campaigns-from-pytho", "title": "How do I do the setup to allow myself to create Facebook ad campaigns from Python scripts?", "body": "<p>Facebook's documentation on this seems quite scattered and poor. It's a pretty straight forward question but I can't find simple step by step instructions on how to set up permissions to be able to do things with campaigns programmatically in my python scripts.</p>\n\n<p>I have tried both of the following approaches, both of which I have found in Facebooks examples but neither of which work.</p>\n\n<p>The first approach I have tried is this:</p>\n\n<pre><code>campaign = Campaign(parent_id='12121212')\ncampaign.update({\n    Campaign.Field.name: 'My Campaign',\n    Campaign.Field.objective: Campaign.Objective.link_clicks,\n})\n\ncampaign.remote_create(params={\n    'status': Campaign.Status.paused,\n})\n</code></pre>\n\n<p>When I run this though I get an error from this line:</p>\n\n<pre><code>'status': Campaign.Status.paused,\n</code></pre>\n\n<p>The error says AttributeError: 'NoneType' object has no attribute 'call'. </p>\n\n<p>I have also tried the following different approach:</p>\n\n<pre><code>my_app_id = '1212121212121212'\nmy_app_secret = 'g121g21g2g21g2g12g12'\nmy_access_token = '12121212121ig2j121kj1j3g1h2kj1h2k1h2j1h2k12hj12h1k21j2h1k2j12k12h1k2jh12k12h1kj2h1k212j1h2k12h1k2jh12kj12h1k2j'\nFacebookAdsApi.init(my_app_id, my_app_secret, my_access_token)\n\nme = AdUser(fbid='126712121')\nmy_accounts = list(me.get_ad_accounts())\nprint(my_accounts)\nmy_account = me.get_ad_accounts()[0]\n\ncampaign = objects.Campaign(parent_id = my_account.get_id_assured())\ncampaign[objects.Campaign.Field.name] = \"Potato Campain\" # sic\ncampaign[objects.Campaign.Field.configured_status] = objects.Campaign.Status.paused\n</code></pre>\n\n<p>But this gives me an error on the following line:</p>\n\n<pre><code> my_accounts = list(me.get_ad_accounts())\n</code></pre>\n\n<p>The error looks like so:</p>\n\n<pre><code>facebookads.exceptions.FacebookRequestError: \n\n  Message: Call was not successful\n  Method:  GET\n  Path:    https://graph.facebook.com/v2.8/643866195/adaccounts\n  Params:  {'summary': 'true'}\n\n  Status:  400\n  Response:\n    {\n      \"error\": {\n        \"message\": \"(#3) Application does not have the capability to make this API call.\", \n        \"code\": 3, \n        \"type\": \"OAuthException\", \n        \"fbtrace_id\": \"Gc2iAi7MwuD\"\n      }\n    }\n</code></pre>\n\n<p>I just wanna get this working, what set up am I missing based on these errors? Thanks and i love you.. </p>\n"}, {"tags": ["python", "arrays", "numpy", "dictionary"], "comments": [{"owner": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "reply_to_user": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 1, "creation_date": 1477510135, "post_id": 40270535, "comment_id": 67801267, "body": "@trincot, I think you&#39;re confused.  <code>a</code> is 3D numpy array, where <code>a[0,0,0]</code> would be perfectly valid if the inner most elements weren&#39;t list types.  <code>a[0,0][0]</code> works, for example."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "reply_to_user": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 0, "creation_date": 1477510372, "post_id": 40270535, "comment_id": 67801391, "body": "Ah, yes, you&#39;re right, @wflynny!"}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1477510421, "post_id": 40270535, "comment_id": 67801422, "body": "Your question is confusing. First you ask for a result like <code>[1,3,5,6]</code>, but then you ask a 2x2x2 array. Which do you want?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1477514503, "post_id": 40270535, "comment_id": 67803432, "body": "Don&#39;t just guess about shape.  Print <code>a.shape</code> and <code>a.dtype</code>.  The commas, present or not are a clue.  Arrays format without comma, lists with."}], "answers": [{"comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1477511230, "post_id": 40270746, "comment_id": 67801841, "body": "I think the OP wants to use pandas / numpy. Note that your solution doesn&#39;t preserve order. Here&#39;s a version that does: <code>[mydict[k0][k1][0] for k0 in sorted(mydict.keys()) for k1 in sorted(mydict[k0].keys())]</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1477513017, "post_id": 40270746, "comment_id": 67802737, "body": "It&#39;s a vanilla dict, which has no inherent order.  Still, your code is a good addition.  Also, I used the list to illustrate; OP already showed s/he knows how to convert to numpy."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1477513454, "post_id": 40270746, "comment_id": 67802940, "body": "Sure, a plain dict has no inherent order (although dict in Python 3.6 does actually preserve order), however, this particular dict (and its sub-dicts) is using numeric keys &amp; I&#39;m assuming the OP would like to use numeric ordering of those keys."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1477510426, "creation_date": 1477510426, "answer_id": 40270746, "question_id": 40270535, "link": "https://stackoverflow.com/questions/40270535/convert-a-dict-to-numpy-multi-dimensional-array/40270746#40270746", "title": "Convert a dict to numpy multi-dimensional array", "body": "<p>You need to dig into each dictionary element, and then into each sub-dictionary, and pull out the first element of each of the leaf lists.</p>\n\n<pre><code>a = [mydict[x][y][0] for y in mydict[x] for x in mydict]\n</code></pre>\n\n<p>Result as a Python list:</p>\n\n<pre><code>[1, 3, 5, 7]\n</code></pre>\n\n<p>I believe this is what you actually want.</p>\n"}, {"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1477511030, "post_id": 40270790, "comment_id": 67801746, "body": "Or using stack operations : <code>np.hstack(np.hstack(a))</code> if you want to avoid mapping or creating a list."}], "tags": [], "owner": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "is_accepted": true, "score": 5, "last_activity_date": 1477510919, "last_edit_date": 1477510919, "creation_date": 1477510606, "answer_id": 40270790, "question_id": 40270535, "link": "https://stackoverflow.com/questions/40270535/convert-a-dict-to-numpy-multi-dimensional-array/40270790#40270790", "title": "Convert a dict to numpy multi-dimensional array", "body": "<p>Your issue comes from the fact that pandas is treating your initial entries (lists) as objects, so then when you convert to a numpy array, your inner most entries are list objects.  For example,</p>\n\n<pre><code>&gt; type(a)\nnumpy.ndarray\n&gt; type(a[0])\nnumpy.ndarray\n&gt; type(a[0,0])\nlist\n</code></pre>\n\n<p>If you know the shape you ultimately want (2x2x2), you could always do:</p>\n\n<pre><code>&gt; b = np.array(map(np.array, a.flat)).reshape(2,2,2)\n&gt; b.shape\n(2, 2, 2)\n&gt; b[0,0,0]\n1\n</code></pre>\n\n<p>Edit:  Or even simpler:</p>\n\n<pre><code>&gt; b = np.array(a.tolist())\narray([[[1, 2],\n        [5, 6]],\n\n       [[3, 4],\n        [7, 8]]])\n</code></pre>\n\n<p>If you want the first item of each innermost row, e.g. 1,3,5,7, you could do <code>b[...,0]</code> or <code>b[...,0].flatten()</code> depending on the resulting shape you want.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1477514702, "creation_date": 1477514702, "answer_id": 40271811, "question_id": 40270535, "link": "https://stackoverflow.com/questions/40270535/convert-a-dict-to-numpy-multi-dimensional-array/40271811#40271811", "title": "Convert a dict to numpy multi-dimensional array", "body": "<p>Without Pandas I can recreate your array with:</p>\n\n<pre><code>In [1723]: mydict = {1: {1: [1, 2], 2: [3, 4]}, 2: {1: [5, 6], 2: [7, 8]}}\nIn [1724]: mydict\nOut[1724]: {1: {1: [1, 2], 2: [3, 4]}, 2: {1: [5, 6], 2: [7, 8]}}\nIn [1725]: mydict[1]\nOut[1725]: {1: [1, 2], 2: [3, 4]}\nIn [1726]: mydict[2]\nOut[1726]: {1: [5, 6], 2: [7, 8]}\nIn [1727]: a=np.empty((2,2),dtype=object)\nIn [1728]: for i in range(2):\n      ...:     for j in range(2):\n      ...:         a[i,j]=mydict[i+1][j+1]\n      ...:         \nIn [1729]: a\nOut[1729]: \narray([[[1, 2], [3, 4]],\n       [[5, 6], [7, 8]]], dtype=object)\nIn [1730]: print(a)\n[[[1, 2] [3, 4]]\n [[5, 6] [7, 8]]]\n</code></pre>\n\n<p>This last print is the same as yours.</p>\n\n<p>Elements of this array are lists</p>\n\n<pre><code>In [1735]: a[0,1]\nOut[1735]: [3, 4]\nIn [1736]: type(a[0,1])\nOut[1736]: list\n</code></pre>\n\n<p>The easist way to turn this into a 3d array is with <code>tolist</code>:</p>\n\n<pre><code>In [1737]: a.tolist()\nOut[1737]: [[[1, 2], [3, 4]], [[5, 6], [7, 8]]]\nIn [1738]: np.array(a.tolist())\nOut[1738]: \narray([[[1, 2],\n        [3, 4]],\n\n       [[5, 6],\n        [7, 8]]])\nIn [1739]: _.shape\nOut[1739]: (2, 2, 2)\n# dtype('int32')\n</code></pre>\n\n<p><code>tolist</code> unpacks the array into a nested list; <code>np.array</code> then creates the highest-dimension array it can from that list structure.</p>\n"}], "owner": {"reputation": 1171, "user_id": 3821012, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa95d94042e4219a23fa02c16e898b2a?s=128&d=identicon&r=PG&f=1", "display_name": "user3821012", "link": "https://stackoverflow.com/users/3821012/user3821012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4258, "favorite_count": 0, "accepted_answer_id": 40270790, "answer_count": 3, "score": 1, "last_activity_date": 1477541912, "creation_date": 1477509616, "last_edit_date": 1477541912, "question_id": 40270535, "link": "https://stackoverflow.com/questions/40270535/convert-a-dict-to-numpy-multi-dimensional-array", "title": "Convert a dict to numpy multi-dimensional array", "body": "<p>I have a python dictionary defined as follows, where the innermost items are two-element array:</p>\n\n<pre><code>    mydict = {1: {1: [1, 2], 2: [3, 4]}, 2: {1: [5, 6], 2: [7, 8]}}\n</code></pre>\n\n<p>What I need now is to form all the 0th elements as a new array, i.e., using a[:,:,0] or a[...,0] to return [1,3,5,6]. However, a[:,:,0] or a[...,0] would not work in this case as shown below.</p>\n\n<pre><code>    import numpy as np\n    import pandas as pd\n    a = np.array(pd.DataFrame.from_dict(mydict))\n    print a\n</code></pre>\n\n<p>which gives the following output:</p>\n\n<pre><code>    [[[1, 2] [5, 6]]\n     [[3, 4] [7, 8]]]\n</code></pre>\n\n<p>It seems that this is an 2x2x2 array. There is no problem with accessing the corresponding element using separate brackets, e.g., a[0][0][0] returns 1. However, a[0,0,0] would cause an error. </p>\n\n<pre><code>    ---------------------------------------------------------------------------\n    IndexError                                Traceback (most recent call last)\n    &lt;ipython-input-150-f68aba7de42a&gt; in &lt;module&gt;()\n    ----&gt; 1 a[0,0,0]\n\n    IndexError: too many indices for array\n</code></pre>\n\n<p>It seems that the two-element arrays are considered as elements in the 2x2 array -- but what I need is a 2x2x2 array in order to achieve my goal. Is there any way to convert this to a 2x2x2 array? </p>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 387, "user_id": 5368039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/--_uvOayYqYI/AAAAAAAAAAI/AAAAAAAAABg/0Y2bDAktBkU/photo.jpg?sz=128", "display_name": "Jeremy Weirich", "link": "https://stackoverflow.com/users/5368039/jeremy-weirich"}, "edited": false, "score": 0, "creation_date": 1477514586, "post_id": 40270522, "comment_id": 67803469, "body": "How do you know it&#39;s not being updated?  What happens if you refresh `interface_klient.html&#39;?"}, {"owner": {"reputation": 21, "user_id": 7052847, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211219864998647/picture?type=large", "display_name": "Antoine Pradier", "link": "https://stackoverflow.com/users/7052847/antoine-pradier"}, "reply_to_user": {"reputation": 387, "user_id": 5368039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/--_uvOayYqYI/AAAAAAAAAAI/AAAAAAAAABg/0Y2bDAktBkU/photo.jpg?sz=128", "display_name": "Jeremy Weirich", "link": "https://stackoverflow.com/users/5368039/jeremy-weirich"}, "edited": false, "score": 0, "creation_date": 1477517124, "post_id": 40270522, "comment_id": 67804738, "body": "In <code>interface_du_klient.html</code> I can see the value of the attribute <code>argent</code> of the selected <code>klient</code>and it still has the same value. I can also see this by running <code>one_klient.argent</code> in the shell and by looking at the administration."}], "owner": {"reputation": 21, "user_id": 7052847, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211219864998647/picture?type=large", "display_name": "Antoine Pradier", "link": "https://stackoverflow.com/users/7052847/antoine-pradier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1477519258, "creation_date": 1477509579, "last_edit_date": 1477519258, "question_id": 40270522, "link": "https://stackoverflow.com/questions/40270522/django-how-to-save-an-object-from-a-model-in-a-view", "title": "Django - How to save an object from a model in a view", "body": "<p>I'm running Django 1.10 on Python 3.7.</p>\n\n<p>I have a problem when I try to save an object from a model after applying a function on it.</p>\n\n<p>What I want to do is just to substract a certain amount of money (this amount is stored in the class (<code>klient</code>) attribute <code>argent</code>).\nThen, I created a method called <code>acheter</code> in this class with an argument <code>id_achat</code> to be able to substract different amounts of money. </p>\n\n<p>When I run the command <code>a.acheter(id_achat)</code> (where <em>a</em> is a <code>klient</code> object and <code>id_achat</code> an integer) in the shell, everything is OK, the substraction has been done when I run <code>a.argent</code>.</p>\n\n<p>However, in <code>interface_du_klient.html</code>, I put some links to redirect the user to a view called <code>achat</code>. In this view I call the <code>acheter</code> method on my <code>klient</code> object called with the <code>get_object_or_404</code> method, but the attribute <code>argent</code> of this <code>klient</code> object is not modified.</p>\n\n<p><strong>Here you can see my <code>models.py</code> :</strong></p>\n\n<pre><code>from django.db import models\nfrom django.contrib import admin\nimport decimal\n\nclass klient(models.Model):\n    id_klient=models.CharField(max_length=100, primary_key=True)\n    nom=models.CharField(max_length=100)\n    prenom=models.CharField(max_length=100)\n    argent=models.DecimalField(decimal_places=2,max_digits=4)\n    membre=models.IntegerField() # 0 pour non membre, 1 pour membre KFet\n    date = models.DateTimeField(auto_now_add=True, auto_now=False, \n                                verbose_name=\"Date d'enregistrement\")\n    nombre_biere=models.IntegerField(default=0)\n    nombre_pinte=models.IntegerField(default=0)\n    nombre_cafe_ou_the=models.IntegerField(default=0)\n    nombre_canette=models.IntegerField(default=0)\n    def __str__(self):\n        return \"{0} {1}\".format(self.nom,self.prenom)\n    def acheter(self,id_achat):\n        if self.membre==0:\n            a=1\n        else:\n            a=0.8\n        if id_achat==1:          # id_achat : {1:bi\u00e8re 33cl, 2:bi\u00e8re 25cl, 3:pinte, 4:caf\u00e9/th\u00e9, 5:canette}\n            self.argent=self.argent-decimal.Decimal(3*a)\n            self.nombre_biere+=1                            ## bi\u00e8re 33cl\n            self.save()\n        elif id_achat==2:\n            self.argent=self.argent-decimal.Decimal(2.2*a)\n            self.nombre_biere+=1                            ## bi\u00e8re 25cl\n            self.save()\n        elif id_achat==3:\n            self.argent=self.argent-decimal.Decimal(2*a)\n            self.nombre_pinte+=1                            ## pinte Blondi\n            self.save()\n        elif id_achat==4:\n            self.argent=self.argent-decimal.Decimal(0.4*a)\n            self.nombre_cafe_ou_the+=1                      ## caf\u00e9/th\u00e9\n            self.save()\n        elif id_achat==5:\n            self.argent=self.argent-decimal.Decimal(0.8*a)\n            self.nombre_canette+=1                          ## canette\n            self.save()\n        pass\n\nclass achetables(models.Model):\n    nom=models.CharField(max_length=100)\n    prix=models.DecimalField(decimal_places=1,max_digits=4)\n    def __str__(self):\n        return \"{0}\".format(self.prix)\n</code></pre>\n\n<p><strong>Here is my <code>views.py</code> :</strong></p>\n\n<pre><code>#-*- coding: utf-8 -*-\n\nfrom django.http import HttpResponse\nfrom django.shortcuts import render\nfrom kfet.models import klient,achetables\nfrom django.shortcuts import get_object_or_404\nfrom django.urls import reverse\n\nfrom datetime import datetime\n\n\ndef date_actuelle(request):\n    return render(request, 'kfet/date.html', {'date': datetime.now()})\n\ndef accueil(request):\n    liste_tokards=klient.objects.all()\n    return render(request, \"kfet/accueil.html\",{'liste_tokards': liste_tokards})\n\ndef interface_du_klient(request,id_ienkli):\n    produits=achetables.objects.all()\n    klient_selec=get_object_or_404(klient, id_klient=id_ienkli)\n    liste_tokards=klient.objects.all()\n    if id_ienkli==0:\n        return render(request, \"kfet/accueil.html\", {'liste_tokards': liste_tokards})\n    else:\n        return render(request, \"kfet/interface_du_klient.html\", {'client': klient_selec}, {'liste_produits' : produits})\n\ndef achat(request,id_bouffon,id_ach):\n    klient_selec=get_object_or_404(klient, id_klient=id_bouffon)\n    klient_selec.acheter(id_ach)\n    return interface_du_klient(request,id_bouffon)\n</code></pre>\n\n<p><strong>Here is my <code>interface_klient.html</code> :</strong></p>\n\n<pre><code>&lt;h1&gt;Bienvenue sur le site de la KFet !&lt;/h1&gt;\n\n\n&lt;h3&gt;Compte de {{client.nom}} {{client.prenom}}. Il y a {{client.argent}} euros sur son compte.&lt;/h3&gt;\n\n\n\n&lt;p&gt;&lt;a href=\"{% url \"accueil\" %}\"&gt;Retour accueil&lt;/a&gt;\n\n&lt;p&gt;&lt;a href=\"{% url \"achat\" id_bouffon=client.id_klient id_ach=1 %}\"&gt;Acheter biere 33cl&lt;/a&gt;\n\n&lt;p&gt;&lt;a href=\"{% url \"achat\" id_bouffon=client.id_klient id_ach=2 %}\"&gt;Acheter biere 25cl&lt;/a&gt;\n\n&lt;p&gt;&lt;a href=\"{% url \"achat\" id_bouffon=client.id_klient id_ach=3 %}\"&gt;Acheter pinte Blondi&lt;/a&gt;\n</code></pre>\n\n<p>If you want to see my <code>urls.py</code>, I can edit my post but I think it doesn't come from this file.</p>\n\n<p>Thank you in advance to anyone who may be able to help me.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 1, "creation_date": 1477510016, "post_id": 40270484, "comment_id": 67801195, "body": "Have a look at <a href=\"https://docs.python.org/2/library/glob.html\" rel=\"nofollow noreferrer\"><b><code>glob</code></b></a>"}, {"owner": {"reputation": 956, "user_id": 4296857, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/22bc0f1f5b151f66183aaa834cdcf605?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Tilton", "link": "https://stackoverflow.com/users/4296857/jeff-tilton"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1477512139, "post_id": 40270484, "comment_id": 67802301, "body": "@Jan thank you for the suggestion.  I do not believe my current situation allows glob because I am working out of a HEC-DSS database file that contains the directories.  I am working in <a href=\"http://www.hec.usace.army.mil/software/hec-dssvue/\" rel=\"nofollow noreferrer\">DSSVue</a>, which is a java based program and uses jython for user defined functions."}], "owner": {"reputation": 956, "user_id": 4296857, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/22bc0f1f5b151f66183aaa834cdcf605?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Tilton", "link": "https://stackoverflow.com/users/4296857/jeff-tilton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477509409, "creation_date": 1477509409, "question_id": 40270484, "link": "https://stackoverflow.com/questions/40270484/python-subset-file-directories-with-regular-expression", "title": "Python subset file directories with regular expression", "body": "<p>I am trying to append matching directories from a list to an empty list based on user input.  The directory format is\n/a/b/c/d/e/f/</p>\n\n<p>a-f can have any alphanumeric or be empty.  The user can enter one or more inputs and should match all directories with those inputs.  For example can enter 'a' and leave b-f empty, but all directories with 'a' input will match regardless of b-f.  </p>\n\n<p>I thought I had it working, but if there are any spaces in a user specified path it returns no match.  </p>\n\n<p>What I have tried:\nThis works:</p>\n\n<pre><code>a = r'.*?(?iLmsux)\\s*'\nb = 'thisWorks'\nc =  r'.*?(?iLmsux)\\s*'\nd =  r'.*?(?iLmsux)\\s*'\ne =  r'.*?(?iLmsux)\\s*'\nf =  r'.*?(?iLmsux)\\s*'\n\npath = re.compile(r\"/%s/%s/%s/%s/%s/%s/\" % (a,b,c,d,e,f))\ny = r'//thisWorks/gf e /8900_=!/ 90[//'\n\nif path.search(y):\n    print \"match found\"\nelse:\n    print 'no match'\n</code></pre>\n\n<p>This also works:    </p>\n\n<pre><code>x = re.compile('this works')\nif x.search('this works'):\n    print 'match'\n</code></pre>\n\n<p>But this doesn't work:</p>\n\n<pre><code>a = r'.*?(?iLmsux)\\s*'\nb = 'this does not'\nc =  r'.*?(?iLmsux)\\s*'\nd =  r'.*?(?iLmsux)\\s*'\ne =  r'.*?(?iLmsux)\\s*'\nf =  r'.*?(?iLmsux)\\s*'\n\npath = re.compile(r\"/%s/%s/%s/%s/%s/%s/\" % (a,b,c,d,e,f))\ny = r'//this does not/////'\n\nif path.search(y):\n    print \"match found\"\nelse:\n    print 'no match'\n</code></pre>\n\n<p>Thank you for any suggestions</p>\n"}, {"tags": ["python", "nlp", "nltk", "sentiment-analysis", "corpus"], "comments": [{"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1477522598, "post_id": 40270449, "comment_id": 67806567, "body": "Please post your code that achieves the error, so that it&#39;s helpful for posterity."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1477529080, "post_id": 40270449, "comment_id": 67808215, "body": "Actually there&#39;s a neat trick to use <code>nltk.data.find</code> with <code>LazyCorpusReader</code> and that will make your corpus looks like it&#39;s native to NLTK. I&#39;ll upload an answer when i&#39;m freer over the weekend."}, {"owner": {"reputation": 188, "user_id": 7058329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/519c5be8abab560198bec62515af3891?s=128&d=identicon&r=PG&f=1", "display_name": "pythlang", "link": "https://stackoverflow.com/users/7058329/pythlang"}, "reply_to_user": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1477529889, "post_id": 40270449, "comment_id": 67808371, "body": "Please, do that. I think it&#39;d still be conductive to learn how the PlaintextCorpusReader functions as well"}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1477531533, "post_id": 40270449, "comment_id": 67808706, "body": "As for <code>PlaintextCorpusReader</code>, there&#39;s an answer here: <a href=\"http://stackoverflow.com/a/20922201/610569\">stackoverflow.com/a/20922201/610569</a>"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1477566182, "post_id": 40270449, "comment_id": 67824068, "body": "WHAT ARE YOU TRYING TO ACCOMPLISH with your code?"}, {"owner": {"reputation": 188, "user_id": 7058329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/519c5be8abab560198bec62515af3891?s=128&d=identicon&r=PG&f=1", "display_name": "pythlang", "link": "https://stackoverflow.com/users/7058329/pythlang"}, "edited": false, "score": 0, "creation_date": 1477586549, "post_id": 40270449, "comment_id": 67838281, "body": "apologies:  I&#39;d like to use this custom corpora to yield more reliable results when using positive/negative sentiment analysis on short-texted platforms like Twitter.   I think with your guys&#39; help it is routed correctly but I am now getting a   UnicodeDecodeError: &#39;ascii&#39; codec can&#39;t decode byte 0xed in position 6: ordinal not in range(128)   but I can&#39;t solve it using codes I&#39;ve found, if my routing is even correct. I can post another EDIT with my new routing and traceback if you want or create a new thread.   I&#39;m still interested in LazyCorpusReader when you have time"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 1, "creation_date": 1477587877, "post_id": 40270449, "comment_id": 67839047, "body": "Don&#39;t bother with <code>LazyCorpusReader</code>. If you&#39;re getting an encoding error, your code is already finding and opening your files. Clearly, your new problem is that some of the files are not ascii. Be sure to google and look around the site for the solution, because your new question will definitely be a duplicate."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1477588040, "post_id": 40270449, "comment_id": 67839138, "body": "Yes, if your corpus has categories, use a <code>Categorized...</code> reader. That was really not clear from your original question. Check the nltk book or source for how to define your categories."}, {"owner": {"reputation": 188, "user_id": 7058329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/519c5be8abab560198bec62515af3891?s=128&d=identicon&r=PG&f=1", "display_name": "pythlang", "link": "https://stackoverflow.com/users/7058329/pythlang"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1477590708, "post_id": 40270449, "comment_id": 67840597, "body": "thank you @alexis; i&#39;d be interested in learning how lazycorpusreader works either way.  I&#39;ll make another attempt to figure out the ascii/utf thing.  thank you @alvas"}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1477646575, "post_id": 40270449, "comment_id": 67861269, "body": "Actually, now i don&#39;t get what you want to do... Are you trying to create a new corpus in <code>nltk</code> and make it looks like <code>nltk.corpus.brown</code> or <code>nltk.corpus.movie_review</code>? Or are you encountering unicode errors? If it&#39;s the latter, the easy answer is use <code>python3</code>, there&#39;ll still be encoding pains but lesser."}, {"owner": {"reputation": 188, "user_id": 7058329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/519c5be8abab560198bec62515af3891?s=128&d=identicon&r=PG&f=1", "display_name": "pythlang", "link": "https://stackoverflow.com/users/7058329/pythlang"}, "edited": false, "score": 0, "creation_date": 1477672287, "post_id": 40270449, "comment_id": 67875965, "body": "well, if i have the option of making the corpus appear as a native corpus such as &quot;nltk.corpus.movie_review&quot; then yes, that&#39;d be ideal. I am encountering unicode errors, however. I&#39;m not sure how to run python3 in visual studio code but it is installed on my computer and am able to access it from the terminal by typing &quot;python3&quot;; I could save the file as file.py then load it into the terminal in python3. here is a <a href=\"https://pythonprogramming.net/static/downloads/short_reviews/positive.txt\" rel=\"nofollow noreferrer\">link</a> to my corpus. there is also a neg.txt"}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 7058329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/519c5be8abab560198bec62515af3891?s=128&d=identicon&r=PG&f=1", "display_name": "pythlang", "link": "https://stackoverflow.com/users/7058329/pythlang"}, "edited": false, "score": 0, "creation_date": 1477586688, "post_id": 40272963, "comment_id": 67838365, "body": "thank you, I am pretty sure that this worked along with alvas&#39; link which I&#39;d found but wasn&#39;t sure how to apply without a simple explanation like yours on where to direct the path."}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": true, "score": 2, "last_activity_date": 1477520880, "last_edit_date": 1477520880, "creation_date": 1477520028, "answer_id": 40272963, "question_id": 40270449, "link": "https://stackoverflow.com/questions/40270449/how-to-create-a-corpus-for-sentiment-analysis-in-nltk/40272963#40272963", "title": "How to create a corpus for sentiment analysis in NLTK?", "body": "<p>The answer you refer to contains some very poor (or rather, inapplicable) advice. There is no reason to place your own corpus in <code>nltk_data</code>, or to hack <code>nltk.corpus.__init__.py</code> to load it like a native corpus. In fact, <strong>do not</strong> do these things.</p>\n\n<p>You should use <code>PlaintextCorpusReader</code>. I don't understand your reluctance to do so, but if your files are plain text, it's the right tool to use. Supposing you have a folder <code>NLP/bettertrainingdata</code>, you can build a reader that will load all <code>.txt</code> files in this folder like this:</p>\n\n<pre><code>myreader = nltk.corpus.reader.PlaintextCorpusReader(r\"NLP/bettertrainingdata\", r\".*\\.txt\")\n</code></pre>\n\n<p>If you add new files to the folder, the reader will find and use them. If what you want is to be able to use your script with other folders, then just do so-- you don't need a different reader, you need to learn about <code>sys.argv</code>. If you are after a categorized corpus with <code>pos.txt</code> and <code>neg.txt</code>, then you need a <code>CategorizedPlaintextCorpusReader</code> (which see). If it's something else yet that you want, then please edit <strong>your question</strong> to explain what you are trying to do.</p>\n"}], "owner": {"reputation": 188, "user_id": 7058329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/519c5be8abab560198bec62515af3891?s=128&d=identicon&r=PG&f=1", "display_name": "pythlang", "link": "https://stackoverflow.com/users/7058329/pythlang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3472, "favorite_count": 0, "closed_date": 1477646688, "accepted_answer_id": 40272963, "answer_count": 1, "score": 0, "last_activity_date": 1477646673, "creation_date": 1477509308, "last_edit_date": 1495540837, "question_id": 40270449, "link": "https://stackoverflow.com/questions/40270449/how-to-create-a-corpus-for-sentiment-analysis-in-nltk", "closed_reason": "Duplicate", "title": "How to create a corpus for sentiment analysis in NLTK?", "body": "<p>I'm looking to use my own created corpus within Visual Studio Code for MacOSX; I have read probably a hundred forums and I can't wrap my head around what I'm doing wrong as I'm pretty new to programming. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/15611328/how-to-save-a-custom-categorized-corpus-in-nltk\">This question</a> seems to be the closes thing I can find to what I need to do; however, I am unaware of how to do the following:</p>\n\n<p>\"on a Mac it would be in ~/nltk_data/corpora, for instance. And it looks like you also have to append your new corpus to the <code>__init__.py</code> within .../site-packages/nltk/corpus/.\"</p>\n\n<p><strong>When answering, please be aware I am using Homebrew</strong> and don't want to permanently disable using another path if I need to use a stock NLTK corpora data set as well within the same coding.</p>\n\n<p>If needed, I can post my attempt at coding using \"PlaintextCorpusReader\" along with the provided traceback below, although I would rather not have to use PlaintextCorpusReader at all for seamless use and would rather just use a simple copy+paste for .txt files into an appropriate location I wish to use in accordance with the append coding. </p>\n\n<p>Thank you.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/jordanXXX/Documents/NLP/bettertrainingdata\", line 42, in &lt;module&gt;\n    short_pos = open(\"short_reviews/pos.txt\", \"r\").read\nIOError: [Errno 2] No such file or directory: 'short_reviews/pos.txt'\n</code></pre>\n\n<hr>\n\n<hr>\n\n<h2>EDIT:</h2>\n\n<hr>\n\n<p>Thank you for your responses.</p>\n\n<p>I have taken your advice and moved the folder out of NLTK's corpora.</p>\n\n<p>I've been doing some experimenting with my folder location and I've gotten different tracebacks.</p>\n\n<p>If you are saying the best way to do it is with PlaintextCorpusReader then so be it; however, maybe for my application I'd want to use CategorizedPlaintextCorpusReader?</p>\n\n<p>sys.argv is definitely not what I meant, so I can read up on that later.</p>\n\n<p>First, here is my code without my attempt to use PlaintextCorpusReader which results in the above traceback when the folder \"short_reviews\" containing the pos.txt and neg.txt files is outside of the NLP folder:</p>\n\n<pre><code>import nltk\nimport random\nfrom nltk.corpus import movie_reviews\nfrom nltk.classify.scikitlearn import SklearnClassifier\nimport pickle\n\nfrom sklearn.naive_bayes import MultinomialNB, GaussianNB, BernoulliNB\nfrom sklearn.linear_model import LogisticRegression, SGDClassifier\nfrom sklearn.svm import SVC, LinearSVC, NuSVC\n\nfrom nltk.classify import ClassifierI\nfrom statistics import mode\n\nfrom nltk import word_tokenize\n\nclass VoteClassifier(ClassifierI):\n    def __init__(self, *classifiers):\n        self._classifiers = classifiers\n\n    def classify(self, features):\n        votes = []\n        for c in self._classifiers:\n            v = c.classify(features)\n            votes.append(v)\n        return mode(votes)\n\n    def confidence(self, features):\n        votes = []\n        for c in self._classifiers:\n            v = c.classify(features)\n            votes.append(v)\n\n        choice_votes = votes.count(mode(votes))\n        conf = choice_votes / len(votes)\n        return conf\n\n# def main():\n#     file = open(\"short_reviews/pos.txt\", \"r\")\n#     short_pos = file.readlines()\n#     file.close\n\nshort_pos = open(\"short_reviews/pos.txt\", \"r\").read\nshort_neg = open(\"short_reviews/neg.txt\", \"r\").read\n\ndocuments = []\n\nfor r in short_pos.split('\\n'):\n    documents.append( (r, \"pos\") )\n\nfor r in short_neg.split('\\n'):\n    documents.append((r, \"neg\"))\n\nall_words = []\n\nshort_pos_words = word.tokenize(short_pos)\nshort_neg_words = word.tokenize(short_neg)\n\nfor w in short_pos_words:\n    all_words.append(w. lower())\n\nfor w in short_neg_words:\n    all_words.append(w. lower())\n\nall_words = nltk.FreqDist(all_words)\n</code></pre>\n\n<p>However, when I move the folder \"short_reviews\" containing the text files into the NLP folder using the same code as above but without the use of PlaintextCorpusReader the following occurs:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/jordanXXX/Documents/NLP/bettertrainingdata\", line 47, in &lt;module&gt;\n    for r in short_pos.split('\\n'):\nAttributeError: 'builtin_function_or_method' object has no attribute 'split'\n</code></pre>\n\n<p>When I move the folder \"short_reviews\" containing the text files into the NLP folder using the code below with the use of PlaintextCorpusReader the following Traceback occurs:</p>\n\n<pre><code>import nltk\nimport random\nfrom nltk.corpus import movie_reviews\nfrom nltk.classify.scikitlearn import SklearnClassifier\nimport pickle\n\nfrom sklearn.naive_bayes import MultinomialNB, GaussianNB, BernoulliNB\nfrom sklearn.linear_model import LogisticRegression, SGDClassifier\nfrom sklearn.svm import SVC, LinearSVC, NuSVC\n\nfrom nltk.classify import ClassifierI\nfrom statistics import mode\n\nfrom nltk import word_tokenize\n\nfrom nltk.corpus import PlaintextCorpusReader\ncorpus_root = 'short_reviews'\nword_lists = PlaintextCorpusReader(corpus_root, '*')\nwordlists.fileids()\n\n\nclass VoteClassifier(ClassifierI):\n    def __init__(self, *classifiers):\n        self._classifiers = classifiers\n\n    def classify(self, features):\n        votes = []\n        for c in self._classifiers:\n            v = c.classify(features)\n            votes.append(v)\n        return mode(votes)\n\n    def confidence(self, features):\n        votes = []\n        for c in self._classifiers:\n            v = c.classify(features)\n            votes.append(v)\n\n        choice_votes = votes.count(mode(votes))\n        conf = choice_votes / len(votes)\n        return conf\n\n# def main():\n#     file = open(\"short_reviews/pos.txt\", \"r\")\n#     short_pos = file.readlines()\n#     file.close\n\nshort_pos = open(\"short_reviews/pos.txt\", \"r\").read\nshort_neg = open(\"short_reviews/neg.txt\", \"r\").read\n\ndocuments = []\n\nfor r in short_pos.split('\\n'):\n    documents.append((r, \"pos\"))\n\nfor r in short_neg.split('\\n'):\n    documents.append((r, \"neg\"))\n\nall_words = []\n\nshort_pos_words = word.tokenize(short_pos)\nshort_neg_words = word.tokenize(short_neg)\n\nfor w in short_pos_words:\n    all_words.append(w. lower())\n\nfor w in short_neg_words:\n    all_words.append(w. lower())\n\nall_words = nltk.FreqDist(all_words)\n\n\nTraceback (most recent call last):\n  File \"/Users/jordanXXX/Documents/NLP/bettertrainingdata2\", line 18, in &lt;module&gt;\n    word_lists = PlaintextCorpusReader(corpus_root, '*')\n  File \"/Library/Python/2.7/site-packages/nltk/corpus/reader/plaintext.py\", line 62, in __init__\n    CorpusReader.__init__(self, root, fileids, encoding)\n  File \"/Library/Python/2.7/site-packages/nltk/corpus/reader/api.py\", line 87, in __init__\n    fileids = find_corpus_fileids(root, fileids)\n  File \"/Library/Python/2.7/site-packages/nltk/corpus/reader/util.py\", line 763, in find_corpus_fileids\n    if re.match(regexp, prefix+fileid)]\n  File \"/usr/local/Cellar/python/2.7.12_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py\", line 141, in match\n    return _compile(pattern, flags).match(string)\n  File \"/usr/local/Cellar/python/2.7.12_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py\", line 251, in _compile\n    raise error, v # invalid expression\nerror: nothing to repeat\n</code></pre>\n"}, {"tags": ["python", "powershell", "password-protection", "lastpass"], "answers": [{"comments": [{"owner": {"reputation": 877, "user_id": 6860953, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qt9un.png?s=128&g=1", "display_name": "AdilZ", "link": "https://stackoverflow.com/users/6860953/adilz"}, "edited": false, "score": 0, "creation_date": 1477603384, "post_id": 40291786, "comment_id": 67847226, "body": "So Lastpass Enterprise ACTUALLY allows me to have dynamic password management for my code and APIs. I couldnt figure it out with their vagueish website description and lack of access to documentation to non-enterprise members. Looks like ill be getting it. Thanks"}], "tags": [], "owner": {"reputation": 587, "user_id": 2577147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvSVl.jpg?s=128&g=1", "display_name": "Jim Moyle", "link": "https://stackoverflow.com/users/2577147/jim-moyle"}, "is_accepted": true, "score": 1, "last_activity_date": 1477593037, "creation_date": 1477593037, "answer_id": 40291786, "question_id": 40270356, "link": "https://stackoverflow.com/questions/40270356/password-management-like-lastpass-for-api-interfacing/40291786#40291786", "title": "Password management like Lastpass for API interfacing", "body": "<p>LastPass seems to only allow API integration for Enterprise accounts. Keepass is an alternative that is local and scriptable.</p>\n\n<p><a href=\"http://keepass.info/help/v2_dev/scr_sc_index.html\" rel=\"nofollow\">http://keepass.info/help/v2_dev/scr_sc_index.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1982, "user_id": 21480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/270457f1819589536369a86f2cef0e08?s=128&d=identicon&r=PG", "display_name": "Badri", "link": "https://stackoverflow.com/users/21480/badri"}, "is_accepted": false, "score": 1, "last_activity_date": 1489628757, "creation_date": 1489628757, "answer_id": 42823885, "question_id": 40270356, "link": "https://stackoverflow.com/questions/40270356/password-management-like-lastpass-for-api-interfacing/42823885#42823885", "title": "Password management like Lastpass for API interfacing", "body": "<p>You should try <a href=\"https://www.vaultproject.io/\" rel=\"nofollow noreferrer\">Hashicorp Vault</a>. </p>\n\n<p>It advertises itself as \"encryption as a service\", is open source and has got a batteries-included REST API which you can interact with from any programming language.</p>\n"}], "owner": {"reputation": 877, "user_id": 6860953, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qt9un.png?s=128&g=1", "display_name": "AdilZ", "link": "https://stackoverflow.com/users/6860953/adilz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1693, "favorite_count": 0, "accepted_answer_id": 40291786, "answer_count": 2, "score": 0, "last_activity_date": 1489628757, "creation_date": 1477509017, "question_id": 40270356, "link": "https://stackoverflow.com/questions/40270356/password-management-like-lastpass-for-api-interfacing", "title": "Password management like Lastpass for API interfacing", "body": "<p>I have coded a few modules in both PowerShell and python, each accessing different APIs which requiring authentication.</p>\n\n<p>I currently have it so that the usernames and passwords are typed IN the code. I know I have the option of making it prompt every time to ask for credentials or store the credentials in a static repo and static encryption which I can pull from the file. But those are not solutions to my need.</p>\n\n<p>What I want to ask is, is there like a Lastpass type solution for developing APIs?</p>\n\n<p>I have tried looking it up on Lastpass site itself, but I don't see anything, at least that I could understand, that would fulfill this purpose (especially for PowerShell and Python).</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "is_accepted": true, "score": 4, "last_activity_date": 1477508985, "creation_date": 1477508985, "answer_id": 40270347, "question_id": 40270260, "link": "https://stackoverflow.com/questions/40270260/python-read-everything-after-second-or-third-last-dot/40270347#40270347", "title": "Python - read everything after second or third last dot", "body": "<pre><code>input_ = 'firstname.middlename.lastname.city.state.'\nx = [a for a in input_.split('.') if a]\n\nprint('.'.join(x[-2:])) # prints city.state\n</code></pre>\n\n<p>Works with both input.</p>\n"}, {"tags": [], "owner": {"reputation": 822, "user_id": 4597645, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DgOM2SaN7uU/AAAAAAAAAAI/AAAAAAAAAIE/MREw6dHrYwc/photo.jpg?sz=128", "display_name": "Vaibhav Singh", "link": "https://stackoverflow.com/users/4597645/vaibhav-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1479835302, "last_edit_date": 1479835302, "creation_date": 1477509278, "answer_id": 40270440, "question_id": 40270260, "link": "https://stackoverflow.com/questions/40270260/python-read-everything-after-second-or-third-last-dot/40270440#40270440", "title": "Python - read everything after second or third last dot", "body": "<p>Check whether your string ends with a dot using .endswith() then remove the last dot, eg. </p>\n\n<pre><code>str =  \"firstname.middlename.lastname.city.state.\"\nif str.endswith('.'):\n   str = str[:-1] \n</code></pre>\n\n<p>This will remove the last . and follow your current method.</p>\n"}, {"tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 0, "last_activity_date": 1477510774, "creation_date": 1477510774, "answer_id": 40270835, "question_id": 40270260, "link": "https://stackoverflow.com/questions/40270260/python-read-everything-after-second-or-third-last-dot/40270835#40270835", "title": "Python - read everything after second or third last dot", "body": "<p>Create a dictionary that returns the correct slice object depending on whether the string ends in a dot.</p>\n\n<pre><code>&gt;&gt;&gt; \n&gt;&gt;&gt; s = 'firstname.middlename.lastname.city.state.'\n&gt;&gt;&gt; d = 'firstname.middlename.lastname.city.state'\n&gt;&gt;&gt; c_s = {True:slice(-3, -1), False:slice(-2, None, None)}\n&gt;&gt;&gt; s.split('.')[c_s[s.endswith('.')]]\n['city', 'state']\n&gt;&gt;&gt; d.split('.')[c_s[d.endswith('.')]]\n['city', 'state']\n&gt;&gt;&gt;\n</code></pre>\n\n<hr>\n\n<p>Or write a function:</p>\n\n<pre><code>&gt;&gt;&gt; def city_state(s):\n    return s.split('.')[-3:-1] if s.endswith('.') else s.split('.')[-2:]\n\n&gt;&gt;&gt; city_state(s)\n['city', 'state']\n&gt;&gt;&gt; city_state(d)\n['city', 'state']\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1456, "user_id": 1998300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XQYma.png?s=128&g=1", "display_name": "Alexandr T", "link": "https://stackoverflow.com/users/1998300/alexandr-t"}, "is_accepted": false, "score": 3, "last_activity_date": 1477510875, "creation_date": 1477510875, "answer_id": 40270873, "question_id": 40270260, "link": "https://stackoverflow.com/questions/40270260/python-read-everything-after-second-or-third-last-dot/40270873#40270873", "title": "Python - read everything after second or third last dot", "body": "<p>Split string based on regex</p>\n\n<pre><code>import re\ninput_string = \"firstname.middlename.lastname.city.state.\"\n\".\".join(re.findall(r'[^.]+', input_string)[-2:])\n</code></pre>\n"}], "owner": {"reputation": 9180, "user_id": 395255, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b877e7b6ce7a551ef103f03ea55b3bd2?s=128&d=identicon&r=PG", "display_name": "Asdfg", "link": "https://stackoverflow.com/users/395255/asdfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 40270347, "answer_count": 4, "score": 0, "last_activity_date": 1479835302, "creation_date": 1477508695, "question_id": 40270260, "link": "https://stackoverflow.com/questions/40270260/python-read-everything-after-second-or-third-last-dot", "title": "Python - read everything after second or third last dot", "body": "<p>I need to get the below output from the input.</p>\n\n<pre><code>Input1: firstname.middlename.lastname.city.state\nExpected output: city.state\n\nInput2: firstname.middlename.lastname.city.state.\nExpected output: city.state\n</code></pre>\n\n<p>This is the expression i have that works when the Input does not have . at the end:</p>\n\n<pre><code>'firstname.middlename.lastname.city.state'['firstname.middlename.lastname.city.state'[:'firstname.middlename.lastname.city.state'.rfind(\".\")].rfind(\".\")+1:]\n</code></pre>\n\n<p>How do i modify this expression so that <code>Input2</code> has the same output as <code>Input1</code></p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 731, "user_id": 5613367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-ZDZV06Q_DNI/AAAAAAAAAAI/AAAAAAAAAH8/yz_JRBIXnoM/photo.jpg?sz=128", "display_name": "Pat Jones", "link": "https://stackoverflow.com/users/5613367/pat-jones"}, "edited": false, "score": 0, "creation_date": 1477508774, "post_id": 40270246, "comment_id": 67800552, "body": "Could you show a few records of the input data if it&#39;s not too sensitive to do so?"}, {"owner": {"reputation": 91, "user_id": 5472343, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/868f8e126c80b3c645c64639471ba51f?s=128&d=identicon&r=PG&f=1", "display_name": "haledaco", "link": "https://stackoverflow.com/users/5472343/haledaco"}, "reply_to_user": {"reputation": 731, "user_id": 5613367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-ZDZV06Q_DNI/AAAAAAAAAAI/AAAAAAAAAH8/yz_JRBIXnoM/photo.jpg?sz=128", "display_name": "Pat Jones", "link": "https://stackoverflow.com/users/5613367/pat-jones"}, "edited": false, "score": 0, "creation_date": 1477509199, "post_id": 40270246, "comment_id": 67800761, "body": "See the original question. I&#39;ve edited it to show a portion of the text file. It is deleting all of the xcoord column."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1477509280, "post_id": 40270246, "comment_id": 67800806, "body": "Please <a href=\"https://stackoverflow.com/posts/40270246/edit\">edit</a> your question and add the sample input data to it."}, {"owner": {"reputation": 731, "user_id": 5613367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-ZDZV06Q_DNI/AAAAAAAAAAI/AAAAAAAAAH8/yz_JRBIXnoM/photo.jpg?sz=128", "display_name": "Pat Jones", "link": "https://stackoverflow.com/users/5613367/pat-jones"}, "edited": false, "score": 0, "creation_date": 1477509749, "post_id": 40270246, "comment_id": 67801063, "body": "And each row has an entry for each column? In other words, there isn&#39;t a situation where perhaps tmax_F is missing for a record and everything gets shifted over one column..."}, {"owner": {"reputation": 91, "user_id": 5472343, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/868f8e126c80b3c645c64639471ba51f?s=128&d=identicon&r=PG&f=1", "display_name": "haledaco", "link": "https://stackoverflow.com/users/5472343/haledaco"}, "edited": false, "score": 0, "creation_date": 1477509907, "post_id": 40270246, "comment_id": 67801132, "body": "No there isn&#39;t. the txt file is actually an extraction of data that happens earlier in my python script and when I open up the txt file and look at it everything looks fine. I even copied and pasted the txt file into excel and did the text-to-columns feature to separate to ensure it looks good."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5472343, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/868f8e126c80b3c645c64639471ba51f?s=128&d=identicon&r=PG&f=1", "display_name": "haledaco", "link": "https://stackoverflow.com/users/5472343/haledaco"}, "edited": false, "score": 0, "creation_date": 1477510375, "post_id": 40270620, "comment_id": 67801395, "body": "That worked other than it put an extra blank row between rows."}, {"owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "reply_to_user": {"reputation": 91, "user_id": 5472343, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/868f8e126c80b3c645c64639471ba51f?s=128&d=identicon&r=PG&f=1", "display_name": "haledaco", "link": "https://stackoverflow.com/users/5472343/haledaco"}, "edited": false, "score": 0, "creation_date": 1477510923, "post_id": 40270620, "comment_id": 67801698, "body": "Please see my update. My machine is Mac, not Windows, so if it does not work, I suspect it has to do with line ending handling. Please let me know."}, {"owner": {"reputation": 91, "user_id": 5472343, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/868f8e126c80b3c645c64639471ba51f?s=128&d=identicon&r=PG&f=1", "display_name": "haledaco", "link": "https://stackoverflow.com/users/5472343/haledaco"}, "edited": false, "score": 0, "creation_date": 1477511058, "post_id": 40270620, "comment_id": 67801765, "body": "Still has the blank rows between each row."}, {"owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "reply_to_user": {"reputation": 91, "user_id": 5472343, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/868f8e126c80b3c645c64639471ba51f?s=128&d=identicon&r=PG&f=1", "display_name": "haledaco", "link": "https://stackoverflow.com/users/5472343/haledaco"}, "edited": false, "score": 0, "creation_date": 1477511250, "post_id": 40270620, "comment_id": 67801860, "body": "Strange. I tried it with your block of data and it works just fine. Do you have a different block of data which shows this problem? Please update your post with it."}, {"owner": {"reputation": 731, "user_id": 5613367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-ZDZV06Q_DNI/AAAAAAAAAAI/AAAAAAAAAH8/yz_JRBIXnoM/photo.jpg?sz=128", "display_name": "Pat Jones", "link": "https://stackoverflow.com/users/5613367/pat-jones"}, "edited": false, "score": 0, "creation_date": 1477511794, "post_id": 40270620, "comment_id": 67802127, "body": "I think that <code>row.split()</code> needs to be <code>row.split().strip()</code>. See my answer, there are new line characters appended to the entries in the last column."}, {"owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "reply_to_user": {"reputation": 731, "user_id": 5613367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-ZDZV06Q_DNI/AAAAAAAAAAI/AAAAAAAAAH8/yz_JRBIXnoM/photo.jpg?sz=128", "display_name": "Pat Jones", "link": "https://stackoverflow.com/users/5613367/pat-jones"}, "edited": false, "score": 0, "creation_date": 1477512085, "post_id": 40270620, "comment_id": 67802277, "body": "Thank you, @PatJones. I updated my post with update 2"}], "tags": [], "owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "is_accepted": false, "score": 1, "last_activity_date": 1477512051, "last_edit_date": 1477512051, "creation_date": 1477509969, "answer_id": 40270620, "question_id": 40270246, "link": "https://stackoverflow.com/questions/40270246/converting-file-from-txt-to-csv-doesnt-write-last-column-of-data/40270620#40270620", "title": "converting file from .txt to .csv doesn&#39;t write last column of data", "body": "<p>Here is my attempt:</p>\n\n<pre><code>txt_file = r'ATF_160A_AR-160B_Pr_Temp_test.txt'\ncsv_file = r'ATF_160A_AR-160B_Pr_Temp_test.csv'\nwith open(txt_file) as infile, open(csv_file, 'w') as outfile:\n    writer = csv.writer(outfile)\n    writer.writerows(row.split() for row in infile)\n</code></pre>\n\n<h1>Discussion</h1>\n\n<ol>\n<li>Call <code>split()</code> without any argument to do the right thing: split by spaces, even multiple spaces</li>\n<li>If your input file is large, you should not put them into a list (<code>data</code>), but process each line and write, which makes it faster and require less memory.</li>\n</ol>\n\n<h1>Update</h1>\n\n<p>Try this to see if you can eliminate blank rows:</p>\n\n<pre><code>    writer.writerows(row.split() for row in infile if row.strip())\n</code></pre>\n\n<h1>Update 2</h1>\n\n<p>Let's try again with Pat Jones' suggestion (I think he meant to strip first, thens split):</p>\n\n<pre><code>    writer.writerows(row.strip().split() for row in infile if row.strip())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 731, "user_id": 5613367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-ZDZV06Q_DNI/AAAAAAAAAAI/AAAAAAAAAH8/yz_JRBIXnoM/photo.jpg?sz=128", "display_name": "Pat Jones", "link": "https://stackoverflow.com/users/5613367/pat-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1477510337, "creation_date": 1477510337, "answer_id": 40270724, "question_id": 40270246, "link": "https://stackoverflow.com/questions/40270246/converting-file-from-txt-to-csv-doesnt-write-last-column-of-data/40270724#40270724", "title": "converting file from .txt to .csv doesn&#39;t write last column of data", "body": "<p>When I ran your code on the input data that you presented, but put a couple of print statements in to see what it is doing, I noticed newline characters on the entries in the last column:</p>\n\n<pre><code>['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '789.345', '420.747', '0.0\\n']\n['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '751.559', '399.755', '0.1244\\n']\n</code></pre>\n\n<p>I'd probably strip those off before writing out, because they can often times have unforeseen impacts:</p>\n\n<pre><code>data.append([word.strip('\\n') for word in line.split(' ') if word])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1477511878, "creation_date": 1477511878, "answer_id": 40271122, "question_id": 40270246, "link": "https://stackoverflow.com/questions/40270246/converting-file-from-txt-to-csv-doesnt-write-last-column-of-data/40271122#40271122", "title": "converting file from .txt to .csv doesn&#39;t write last column of data", "body": "<p>The doc for csv.writer say that if the target is an opened file, it should be opened with <code>newline=''</code>.  I am pretty sure it should not be opened in binary (bytes) mode.  The following code, coded for development (without using external files),</p>\n\n<pre><code>import csv\nfrom io import StringIO\n\nf = '''\\\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.345 420.747 0.0\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 751.559 399.755 0.1244\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.300 420.722 0.004976\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.193 420.663 0.009952\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.017 420.565 0.014928\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 788.770 420.428 0.019904\n'''.splitlines()\n\ndata = []\nfor line in f:\n     data.append([word for word in line.split(' ') if word])\nfor line in data: print(line)\n\nout = StringIO()\nwriter = csv.writer(out)\nwriter.writerows(data)\nfor line in out.getvalue().splitlines(): print(line)\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '789.345', '420.747', '0.0']\n['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '751.559', '399.755', '0.1244']\n['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '789.300', '420.722', '0.004976']\n['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '789.193', '420.663', '0.009952']\n['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '789.017', '420.565', '0.014928']\n['abcd-1_AB.odb', 'Nominal', 'SPECIMEN_POS1-1', 'SET-1', '788.770', '420.428', '0.019904']\nabcd-1_AB.odb,Nominal,SPECIMEN_POS1-1,SET-1,789.345,420.747,0.0\nabcd-1_AB.odb,Nominal,SPECIMEN_POS1-1,SET-1,751.559,399.755,0.1244\nabcd-1_AB.odb,Nominal,SPECIMEN_POS1-1,SET-1,789.300,420.722,0.004976\nabcd-1_AB.odb,Nominal,SPECIMEN_POS1-1,SET-1,789.193,420.663,0.009952\nabcd-1_AB.odb,Nominal,SPECIMEN_POS1-1,SET-1,789.017,420.565,0.014928\nabcd-1_AB.odb,Nominal,SPECIMEN_POS1-1,SET-1,788.770,420.428,0.019904\n</code></pre>\n\n<p>With a target expecting strings rather than bytes, the writer writes all fields.</p>\n\n<p>If you know that your input file never contains ',', you can skip using csv and create the output lines with <code>','.join(word for word in line.split(' '))</code> and write them with <code>outfile.write</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3499, "user_id": 7010554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895ef9191cdd3d7c23e5195e359709c7?s=128&d=identicon&r=PG&f=1", "display_name": "maij", "link": "https://stackoverflow.com/users/7010554/maij"}, "is_accepted": false, "score": 0, "last_activity_date": 1477516738, "creation_date": 1477516738, "answer_id": 40272297, "question_id": 40270246, "link": "https://stackoverflow.com/questions/40270246/converting-file-from-txt-to-csv-doesnt-write-last-column-of-data/40272297#40272297", "title": "converting file from .txt to .csv doesn&#39;t write last column of data", "body": "<p>On my system, after adding <code>import csv</code> and replacing <code>line.split(' ')</code> by <code>line.strip().split(' ')</code> as suggested by others, your script runs as expected. </p>\n\n<p>There are at least 3 steps involved:</p>\n\n<ul>\n<li>splitting the line</li>\n<li>inserting entries into data list</li>\n<li>printing csv</li>\n</ul>\n\n<p>Find out which step fails, for example by extending your script as follows:</p>\n\n<pre><code>import csv    \ntxt_file = r'ATF_160A_AR-160B_Pr_Temp_test.txt'\ndata = []\nwith open(txt_file) as f:\n    for line in f:\n        print line\n        for word in line.strip().split(' '):\n            print bool(word), \": \", word\n        data.append([word for word in line.strip().split(' ') if word])\n        print data\n\ncsv_file = r'ATF_160A_AR-160B_Pr_Temp_test.csv'\nout_csv = csv.writer(open(csv_file, 'wb'))\n\nout_csv.writerows(data)\n</code></pre>\n\n<p>Which step does not produce the expected output in your case?</p>\n"}], "owner": {"reputation": 91, "user_id": 5472343, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/868f8e126c80b3c645c64639471ba51f?s=128&d=identicon&r=PG&f=1", "display_name": "haledaco", "link": "https://stackoverflow.com/users/5472343/haledaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1477516738, "creation_date": 1477508643, "last_edit_date": 1477509400, "question_id": 40270246, "link": "https://stackoverflow.com/questions/40270246/converting-file-from-txt-to-csv-doesnt-write-last-column-of-data", "title": "converting file from .txt to .csv doesn&#39;t write last column of data", "body": "<p>I have a text file that I'm trying to convert to a .csv file and have all the data separated into columns at every instance where there is white space between characters. The following code is doing this however it isn't writing the last column of data.</p>\n\n<pre><code>txt_file = r'ATF_160A_AR-160B_Pr_Temp_test.txt'\ndata = []\nwith open(txt_file) as f:\n    for line in f:\n        data.append([word for word in line.split(' ') if word])\n\n\ncsv_file = r'ATF_160A_AR-160B_Pr_Temp_test.csv'\nout_csv = csv.writer(open(csv_file, 'wb'))\n\n\nout_csv.writerows(data)\n</code></pre>\n\n<p>The text file looks like this.</p>\n\n<pre><code>odbName stepName instanceName  setName tmax_F tmax_C xcoord\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.345 420.747 0.0\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 751.559 399.755 0.1244\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.300 420.722 0.004976\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.193 420.663 0.009952\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 789.017 420.565 0.014928\nabcd-1_AB.odb Nominal SPECIMEN_POS1-1 SET-1 788.770 420.428 0.019904\n</code></pre>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1477508617, "post_id": 40270074, "comment_id": 67800489, "body": "<code>once it failed</code>?  What was that failure?"}], "answers": [{"tags": [], "owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "is_accepted": true, "score": 0, "last_activity_date": 1477508984, "creation_date": 1477508984, "answer_id": 40270346, "question_id": 40270074, "link": "https://stackoverflow.com/questions/40270074/seemingly-random-error-when-creating-a-new-image-file/40270346#40270346", "title": "Seemingly Random Error when creating a new image file", "body": "<p>You have no exception handling, so when an error occurs, there's no chance to clean up.  Try adding try-catch.  The following isn't very elegant. You could improve it by adding handling for specific errors.</p>\n\n<pre><code>import numpy as np\nimport cv2\nimport pyexiv2\nimport os\n\ndirectory = \"C:\\Users\\name\\Desktop\\TEST\\\\IMAGES\"\n\nfor dirname, dirnames, filenames in os.walk(directory):\n  print(dirname)\n  for file in os.listdir(dirname):\n    if file.endswith(('.jpeg', '.jpg')) or file.endswith(('.JPEG', '.JPG')) :\n        try:\n            filename, file_extension = os.path.splitext(directory+file)\n            oldFile = dirname+\"\\\\\"+file\n            newFile = dirname+\"\\\\DUPLICATE\"+file_extension\n            image = cv2.imread(oldFile)\n            cv2.imwrite(newFile, image)\n            m1 = pyexiv2.ImageMetadata(oldFile)\n            m1.read()\n            m1.modified = True  # not sure what this is good for\n            m2 = pyexiv2.metadata.ImageMetadata(newFile)\n            m2.read()  # yes, we need to read the old stuff before we can overwrite it\n            m1.copy(m2)\n            m2.write()\n            metadata = pyexiv2.ImageMetadata(newFile)\n            metadata.read()\n            print ', '.join(metadata.exif_keys)\n            metadata.write()\n            key = 'Exif.Image.Orientation'\n            value = 1\n            metadata[key] = pyexiv2.ExifTag(key, value)\n            os.remove(oldFile)\n            os.rename(newFile, oldFile)\n        except Exception as e:\n            print oldfile, 'not converted'\n            print str(e)\n            os.remove(newFile) # remove the partial new file\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6416123, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/760eb1435c365c5985337685f88e411e?s=128&d=identicon&r=PG&f=1", "display_name": "k_schultz", "link": "https://stackoverflow.com/users/6416123/k-schultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 40270346, "answer_count": 1, "score": 0, "last_activity_date": 1477508984, "creation_date": 1477508010, "last_edit_date": 1477508154, "question_id": 40270074, "link": "https://stackoverflow.com/questions/40270074/seemingly-random-error-when-creating-a-new-image-file", "title": "Seemingly Random Error when creating a new image file", "body": "<p>My script, which uses opencv to rotate images to how they should reside, opencv does this automatically so its pretty easy just to open the image via opencv then save.</p>\n\n<p>I then transfer the exif headers from the old image to the new(using pyexiv2) and delete the old renaming the new file to what the old file was.</p>\n\n<p>However I get this seemingly random error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/name/PycharmProjects/exif_data/test.py\", line 28, in &lt;module&gt;\n    metadata.write()\n  File \"C:\\Users\\name\\AppData\\Roaming\\Python\\Python27\\site-packages\\pyexiv2\\metadata.py\", line 119, in write\n    self._image._writeMetadata()\nIOError: C:\\Users\\name\\Desktop\\TEST\\IMAGES\\GIS\\DUPLICATE.JPG5048: Failed to rename file to C:\\Users\\name\\Desktop\\TEST\\IMAGES\\GIS\\DUPLICATE.JPG: File exists (errno = 17)\n</code></pre>\n\n<p>duplicate doesnt exist and is being renamed on script every time once it failed it leaves the file DUPLICATE.JPG5048 in the folder, is there a solution? Or am I missing something?</p>\n\n<pre><code>import numpy as np\nimport cv2\nimport pyexiv2\nimport os\n\n\ndirectory = \"C:\\Users\\name\\Desktop\\TEST\\\\IMAGES\"\n\nfor dirname, dirnames, filenames in os.walk(directory):\nprint(dirname)\nfor file in os.listdir(dirname):\n    if file.endswith(('.jpeg', '.jpg')) or file.endswith(('.JPEG', '.JPG')) :\n        filename, file_extension = os.path.splitext(directory+file)\n        oldFile = dirname+\"\\\\\"+file\n        newFile = dirname+\"\\\\DUPLICATE\"+file_extension\n        image = cv2.imread(oldFile)\n        cv2.imwrite(newFile, image)\n        m1 = pyexiv2.ImageMetadata(oldFile)\n        m1.read()\n        m1.modified = True  # not sure what this is good for\n        m2 = pyexiv2.metadata.ImageMetadata(newFile)\n        m2.read()  # yes, we need to read the old stuff before we can overwrite it\n        m1.copy(m2)\n        m2.write()\n        metadata = pyexiv2.ImageMetadata(newFile)\n        metadata.read()\n        print ', '.join(metadata.exif_keys)\n        metadata.write()\n        key = 'Exif.Image.Orientation'\n        value = 1\n        metadata[key] = pyexiv2.ExifTag(key, value)\n        os.remove(oldFile)\n        os.rename(newFile, oldFile)\n        del m1\n        del m2\n        del oldFile\n        del newFile\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 13890, "user_id": 3642398, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y6cZb.jpg?s=128&g=1", "display_name": "elethan", "link": "https://stackoverflow.com/users/3642398/elethan"}, "edited": false, "score": 1, "creation_date": 1477507977, "post_id": 40270001, "comment_id": 67800159, "body": "One difference that I can think of is that if <code>tensor</code> is not a module, the first one won&#39;t work, while the second one will work whether tensor is a module or a method...AFAIK"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1477508071, "post_id": 40270001, "comment_id": 67800207, "body": "Although the duplicated question isn&#39;t exactly the same level, the longest answer&#39;s explanation (from user <i>sapam</i>) covers the differences in this case."}, {"owner": {"reputation": 460, "user_id": 6832556, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/37f222f512d925b88880038d394a2aa7?s=128&d=identicon&r=PG&f=1", "display_name": "HMK", "link": "https://stackoverflow.com/users/6832556/hmk"}, "edited": false, "score": 0, "creation_date": 1477508803, "post_id": 40270001, "comment_id": 67800565, "body": "I understand the difference between import module and from module import *. My question is about the &quot;as&quot; part."}, {"owner": {"reputation": 13890, "user_id": 3642398, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y6cZb.jpg?s=128&g=1", "display_name": "elethan", "link": "https://stackoverflow.com/users/3642398/elethan"}, "edited": false, "score": 0, "creation_date": 1477508886, "post_id": 40270001, "comment_id": 67800610, "body": "<code>as</code> is just defining an alias for whatever is being imported. If you are importing the same thing, the affect of <code>as</code> will be the same in both cases."}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 5223791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba65cfa02bc04edba25999762b52b21e?s=128&d=identicon&r=PG&f=1", "display_name": "Thaufeki", "link": "https://stackoverflow.com/users/5223791/thaufeki"}, "is_accepted": false, "score": 0, "last_activity_date": 1477508126, "last_edit_date": 1495541960, "creation_date": 1477508126, "answer_id": 40270103, "question_id": 40270001, "link": "https://stackoverflow.com/questions/40270001/whats-the-difference-between-these-two-import-statements/40270103#40270103", "title": "What&#39;s the difference between these two import statements?", "body": "<p>No, there's not. You're importing the same thing in both cases.</p>\n\n<p>To read up on the differences between <code>import module</code> and <code>from module import foo</code> see <a href=\"https://stackoverflow.com/questions/710551/import-module-or-from-module-import%20%22%22\">this question</a></p>\n"}, {"tags": [], "owner": {"reputation": 13890, "user_id": 3642398, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y6cZb.jpg?s=128&g=1", "display_name": "elethan", "link": "https://stackoverflow.com/users/3642398/elethan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477508498, "creation_date": 1477508498, "answer_id": 40270206, "question_id": 40270001, "link": "https://stackoverflow.com/questions/40270001/whats-the-difference-between-these-two-import-statements/40270206#40270206", "title": "What&#39;s the difference between these two import statements?", "body": "<p>Although the SO posts linked in comments will probably give you the answer you are looking for, one thing I would like to add to the conversation is that the from <code>import a.b</code> will only work if <code>b</code> is a submodule of <code>a</code>, but will raise an error if <code>b</code> is not a module. </p>\n\n<p>On the other hand, <code>from a import b</code> will work even if <code>b</code> is not a module (i.e., if it is a method of <code>a</code>). Observe:</p>\n\n<pre><code>In [1]: import os.path\n\nIn [2]: from os import path\n\nIn [3]: import datetime.datetime\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n&lt;ipython-input-3-8466c53a2255&gt; in &lt;module&gt;()\n----&gt; 1 import datetime.datetime\n\nImportError: No module named datetime\n\nIn [4]: from datetime import datetime\n</code></pre>\n\n<p>I think <code>from a import b</code> is the preferred usage compared to <code>import a.b</code> - at least it is the one that I have come across far more often. The <code>as ...</code> part will operate the same in both cases.</p>\n"}], "owner": {"reputation": 460, "user_id": 6832556, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/37f222f512d925b88880038d394a2aa7?s=128&d=identicon&r=PG&f=1", "display_name": "HMK", "link": "https://stackoverflow.com/users/6832556/hmk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "closed_date": 1477509975, "answer_count": 2, "score": 0, "last_activity_date": 1477508498, "creation_date": 1477507725, "question_id": 40270001, "link": "https://stackoverflow.com/questions/40270001/whats-the-difference-between-these-two-import-statements", "closed_reason": "Duplicate", "title": "What&#39;s the difference between these two import statements?", "body": "<pre><code>import theano.tensor as T\nfrom theano import tensor as T \n</code></pre>\n\n<p>Is there a difference between the two or are they same? Which is better?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d498ac417156c6a1a432caed682899?s=128&d=identicon&r=PG&f=1", "display_name": "Ashton Butcher", "link": "https://stackoverflow.com/users/7043658/ashton-butcher"}, "edited": false, "score": 0, "creation_date": 1477607089, "post_id": 40274013, "comment_id": 67848633, "body": "Ok so I decided to go with shape=[None, None, None] which works nicely!   But I&#39;ve been trying to wrestle with my task in this form but I&#39;m not able to figure it out. Let&#39;s say that I embedded my inputs and now I have it at shape [64 X 41 X 395 X 500]. This is 64 (batch_size), 41 (seq_len), 395 (events in each item), 500 (embeddings to represent each event)."}, {"owner": {"reputation": 53, "user_id": 7043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d498ac417156c6a1a432caed682899?s=128&d=identicon&r=PG&f=1", "display_name": "Ashton Butcher", "link": "https://stackoverflow.com/users/7043658/ashton-butcher"}, "edited": false, "score": 0, "creation_date": 1477607105, "post_id": 40274013, "comment_id": 67848640, "body": "The result I am trying to create is [64 X 41 X 500] and what this means is for each case in the minibatch, I will still have all 41 items but for each item I will have a 500 float embedding representing. We reduce to just 500 because I will take the 395 X 500 for each item, compute the average. Now here&#39;s the tricky part, for each single case (row), I have lengths which is a tensor that looks like this, where each row is of size 41:     [9 0 0 0 ... 0 0]     [9 8 0 0 ... 0 0]     ..."}, {"owner": {"reputation": 53, "user_id": 7043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d498ac417156c6a1a432caed682899?s=128&d=identicon&r=PG&f=1", "display_name": "Ashton Butcher", "link": "https://stackoverflow.com/users/7043658/ashton-butcher"}, "edited": false, "score": 0, "creation_date": 1477607123, "post_id": 40274013, "comment_id": 67848648, "body": "So for the first single case from my minibatch, 9 means take the first 9 items from 395 and average them.     So this creates a 1X41X500 where only the 1st column has any values, rest are zero.     Then for second case from my minibatch, [9, 8, 0, ... 0] means take the first 9 items from 1st/41 395 and average them."}, {"owner": {"reputation": 53, "user_id": 7043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d498ac417156c6a1a432caed682899?s=128&d=identicon&r=PG&f=1", "display_name": "Ashton Butcher", "link": "https://stackoverflow.com/users/7043658/ashton-butcher"}, "edited": false, "score": 0, "creation_date": 1477607130, "post_id": 40274013, "comment_id": 67848650, "body": "Then take 8 items from the 2nd/41 395 and average them. So this creates a 1X41X500, where the first and second columns have values but rest have zeroes. Background: I&#39;m trying to implement the youtube recommendation paper and this is the first time I&#39;m dealing with embedding list of lists like this. I tried playing with tf.gather(), tf.reshape() but I&#39;m not able to figure it out."}], "tags": [], "owner": {"reputation": 6724, "user_id": 17328, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b8f5cf3259414d6b33897ffc6430df2?s=128&d=identicon&r=PG", "display_name": "Mark McDonald", "link": "https://stackoverflow.com/users/17328/mark-mcdonald"}, "is_accepted": true, "score": 2, "last_activity_date": 1477526413, "creation_date": 1477526413, "answer_id": 40274013, "question_id": 40269991, "link": "https://stackoverflow.com/questions/40269991/passing-a-list-of-lists-into-tensorflow/40274013#40274013", "title": "Passing a list of lists into tensorflow", "body": "<p>TensorFlow's equivalent to a \"list of x\" is to increase the dimension of an existing tensor.</p>\n\n<p>e.g. If you were passing in a list of [1, 2, 3, 4, 5] and you now want to pass in a list of these, you increase the dimensionality by 1 and end up with a matrix (aka a tensor of dimension 2).</p>\n\n<p><code>tf.int32</code> still makes sense as your tensor still contains entirely ints.</p>\n\n<p>It's hard to tell but I think you can simply add an extra element to your shape parameter, e.g. <code>tf.placeholder(tf.int32, shape=[None, None, SEQ_LEN])</code> (replacing SEQ_LEN with None if appropriate). I haven't seen the data, so SEQ_LEN may need to be in a different position too.</p>\n\n<p>Another strategy is to flatten your list-of-lists into a single list and then use <code>tf.reshape</code> to change it into the matrix or higher-dimensional shape you need.</p>\n"}], "owner": {"reputation": 53, "user_id": 7043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d498ac417156c6a1a432caed682899?s=128&d=identicon&r=PG&f=1", "display_name": "Ashton Butcher", "link": "https://stackoverflow.com/users/7043658/ashton-butcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2988, "favorite_count": 0, "accepted_answer_id": 40274013, "answer_count": 1, "score": 3, "last_activity_date": 1477526413, "creation_date": 1477507682, "question_id": 40269991, "link": "https://stackoverflow.com/questions/40269991/passing-a-list-of-lists-into-tensorflow", "title": "Passing a list of lists into tensorflow", "body": "<p>I wanted to know how to pass in a list of lists into a tensor in tensorflow. I was able to pass in arrays of [batch_size, seq_len] in where each item is just a number. But now I have a list of lists also of shape (batch_size, seq_len] but how do I pass this in?</p>\n\n<p>I tried this:</p>\n\n<pre><code>self.inputs_X = [tf.placeholder(tf.int32, shape=[None, None],\n                 name='inputs_X{0}'.format(i)) for i in xrange(SEQ_LEN)]\n</code></pre>\n\n<p>(* any way I can do this without explicitly passing in SEQ_LEN ?)</p>\n\n<p>First of all the tf.int32, doesn't make sense because i'm not longer passing in an int, im passsing in a list. And so, I'm getting this error: </p>\n\n<p>ValueError: setting an array element with a sequence.</p>\n\n<p>Appreciate the help!</p>\n"}, {"tags": ["python", "python-multithreading"], "comments": [{"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1477508003, "post_id": 40269969, "comment_id": 67800173, "body": "You can learn the SO etiquette <a href=\"http://stackoverflow.com/help/how-to-ask\">here</a>.   What you&#39;re asking about is called the <code>Observer Pattern</code>, and you can find a lot of articles on it through google."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1477508122, "post_id": 40269969, "comment_id": 67800232, "body": "Not an answer, but for your first post this is fairly good! The only improvement I could suggest would be to elaborate a little more on what you&#39;ve tried and why it failed/didn&#39;t work. Also your title could be a little more descriptive."}, {"owner": {"reputation": 85, "user_id": 7054479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c53d44e9e638bc9c60e06f03f57e2a7?s=128&d=identicon&r=PG&f=1", "display_name": "AppleJuice", "link": "https://stackoverflow.com/users/7054479/applejuice"}, "edited": false, "score": 0, "creation_date": 1477508308, "post_id": 40269969, "comment_id": 67800331, "body": "Thanks! I&#39;ll take a look at the Observer Patter"}, {"owner": {"reputation": 85, "user_id": 7054479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c53d44e9e638bc9c60e06f03f57e2a7?s=128&d=identicon&r=PG&f=1", "display_name": "AppleJuice", "link": "https://stackoverflow.com/users/7054479/applejuice"}, "reply_to_user": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1477512417, "post_id": 40269969, "comment_id": 67802420, "body": "@CAB, I found this example of the Observer Pattern (<a href=\"http://www.giantflyingsaucer.com/blog/?p=5117\" rel=\"nofollow noreferrer\">giantflyingsaucer.com/blog/?p=5117</a>) but the issue is that the update is still triggered in the spawned thread and not the main."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7054479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c53d44e9e638bc9c60e06f03f57e2a7?s=128&d=identicon&r=PG&f=1", "display_name": "AppleJuice", "link": "https://stackoverflow.com/users/7054479/applejuice"}, "edited": false, "score": 0, "creation_date": 1477597913, "post_id": 40272060, "comment_id": 67844555, "body": "Thanks for taking the time! In my case, the Observable object is being altered within a spawned thread (threading.Timer recursion) and when it is changed and fires its notifier I need the Observer to catch this but run code in the main thread (not the spawned). You&#39;re solution seems to be for the opposite case. Have any ideas?"}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "reply_to_user": {"reputation": 85, "user_id": 7054479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c53d44e9e638bc9c60e06f03f57e2a7?s=128&d=identicon&r=PG&f=1", "display_name": "AppleJuice", "link": "https://stackoverflow.com/users/7054479/applejuice"}, "edited": false, "score": 0, "creation_date": 1477598450, "post_id": 40272060, "comment_id": 67844848, "body": "Supposing you have the myObserver.update() do something like put the value on a <a href=\"https://docs.python.org/2/library/queue.html\" rel=\"nofollow noreferrer\">queue</a>, you could have main periodically check to see if there&#39;s a value in the queue waiting to be processed.  Such a <code>busy loop</code> is wasteful as most of the time there will be nothing waiting. It is also laggy, as a ready value will have to wait in the queue until the loop comes back around.  If your loop and timer are not sychronized, you might even find many values waiting in the queue."}, {"owner": {"reputation": 85, "user_id": 7054479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c53d44e9e638bc9c60e06f03f57e2a7?s=128&d=identicon&r=PG&f=1", "display_name": "AppleJuice", "link": "https://stackoverflow.com/users/7054479/applejuice"}, "edited": false, "score": 0, "creation_date": 1477599039, "post_id": 40272060, "comment_id": 67845151, "body": "thats my issue, I can&#39;t have any sort of busy loop :(. The solution would be simple if I could just periodically check for a value change but I need the solution to be asyncronous. Ideally an event based system where the thread emits some signal that triggers a UI update."}], "tags": [], "owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "is_accepted": true, "score": 3, "last_activity_date": 1477515751, "creation_date": 1477515751, "answer_id": 40272060, "question_id": 40269969, "link": "https://stackoverflow.com/questions/40269969/cross-thread-update-observer-pattern-non-blocking/40272060#40272060", "title": "Cross Thread Update Observer Pattern (non-blocking)", "body": "<p>Let's build on that example from <a href=\"http://www.giantflyingsaucer.com/blog/?p=5117\" rel=\"nofollow\">http://www.giantflyingsaucer.com/blog/?p=5117</a>.  </p>\n\n<pre><code>from abc import ABCMeta, abstractmethod\n\nclass Observer(object):\n    __metaclass__ = ABCMeta\n\n    @abstractmethod\n    def update(self, *args, **kwargs):\n        pass\n</code></pre>\n\n<p>The onus is then on the Observer implementation to disconnect the threads.  Let's say we do this using a simplistic thread.  (syntax might be off, I'm cramming this in and need to catch a bus).</p>\n\n<pre><code>from observer import Observer\nfrom threading import Thread\n\nclass myObserver(Observer):\n\n    def update(self, *args, **kwargs):\n        '''update is called in the source thread context'''\n        Thread(target=self.handler, args=(self,*args), kwargs=**kwargs).start()\n\n    def handler(self, *args, **kwargs):\n       '''handler runs in an independent thread context'''\n       pass # do something useful with the args\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7054479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c53d44e9e638bc9c60e06f03f57e2a7?s=128&d=identicon&r=PG&f=1", "display_name": "AppleJuice", "link": "https://stackoverflow.com/users/7054479/applejuice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1790, "favorite_count": 0, "accepted_answer_id": 40272060, "answer_count": 1, "score": 2, "last_activity_date": 1477599863, "creation_date": 1477507601, "last_edit_date": 1592644375, "question_id": 40269969, "link": "https://stackoverflow.com/questions/40269969/cross-thread-update-observer-pattern-non-blocking", "title": "Cross Thread Update Observer Pattern (non-blocking)", "body": "<p>New to SO, please forgive any etiquette errors (point out if there are!).</p>\n<p>I'm working on a script that is running on the programs main UI thread. That being said, I need to avoid all blocking calls to ensure user can still interact. I do not have access to the UI event loop so any busy loop solutions aren't possible in my situation.</p>\n<p>I have a simple background thread that is communicating to another app and gathering data, and storing in a simple array for consumption. Each time this data is updated I need to use the data to modify the UI (this must run in main thread). Ideally the background thread would emit a signal each time the data is updated then in the main thread a listener would handle this and modify the UI. A busy loop is not an option everything must be asyncronous/event based.</p>\n<p>I have the data gathering continuossly running in the background using threading.timer(..). However since this runs in a seperate thread, the UI operations need to be called externally to this.</p>\n<pre><code>def _pollLoop(self): \n    if (self._isCubeControl):\n        self._getNewData()\n        #in a perfect world, updateUI() would be here\n        self._pollThread = threading.Timer(0.1,self._pollLoop)\n        self._pollThread.start()\n</code></pre>\n<p>I need a way for this pollLoop to callback to main thread so I can update the UI. I've tried direct callbacks within the pollLoop but the callback are ran within the seperate thread causing errors.</p>\n<p>Looking for a way to attach listener to the data object so that on change updateUI() can be ran IN MAIN THREAD.</p>\n<p>Thanks for any help you can offer! If this is at all vague please let me know</p>\n<h2>Update</h2>\n<p>Based off of @CAB's answer I'm now trying to implement an Observer Pattern. The difficulty is that the Observable is to be ran in a spawned thread while the Observer update function must run in the main thread. I've implemented the example chad lung (<a href=\"http://www.giantflyingsaucer.com/blog/?p=5117\" rel=\"nofollow noreferrer\">http://www.giantflyingsaucer.com/blog/?p=5117</a>).</p>\n<pre><code>import threading\n\nclass Observable(object):\n\n    def __init__(self):\n        self.observers = []\n\n    def register(self, observer):\n        if not observer in self.observers:\n            self.observers.append(observer)\n\n    def unregister(self, observer):\n        if observer in self.observers:\n            self.observers.remove(observer)\n\n    def unregister_all(self):\n        if self.observers:\n             del self.observers[:]\n\n    def update_observers(self, *args, **kwargs):\n        for observer in self.observers:\n            observer.update(*args, **kwargs)\n        thread = threading.Timer(4,self.update_observers).start()\n\nfrom abc import ABCMeta, abstractmethod\n\nclass Observer(object):\n    __metaclass__ = ABCMeta\n\n    @abstractmethod\n    def update(self, *args, **kwargs):\n        pass\n\nclass myObserver(Observer):  \n    def update(self, *args, **kwargs):\n        '''update is called in the source thread context'''\n        print(str(threading.current_thread()))\n\nobservable = Observable()\n\nobserver = myObserver()\nobservable.register(observer)\n\nobservable.update_observers('Market Rally', something='Hello World')\n</code></pre>\n<p>What I get in response is:</p>\n<pre><code>&lt;_MainThread(MainThread, started 140735179829248)&gt;\n&lt;_Timer(Thread-1, started 123145306509312)&gt;\n&lt;_Timer(Thread-2, started 123145310715904)&gt;\n</code></pre>\n<p>So clearly the Observer is running in the spawned thread and not main. Anyone have another method for me? :) Once again I cannot have a busy loop to periodically check for value change (i wish.. :( ) This script is running overtop a UI and I do not have access to the GUI event loop, so everything needs to be asynchronous and non-blocking.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 13890, "user_id": 3642398, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y6cZb.jpg?s=128&g=1", "display_name": "elethan", "link": "https://stackoverflow.com/users/3642398/elethan"}, "edited": false, "score": 0, "creation_date": 1477507734, "post_id": 40269962, "comment_id": 67800021, "body": "Is this django? What is the error you are getting? If it is django, did you do {% load static %} beforehand in your template?"}, {"owner": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "reply_to_user": {"reputation": 13890, "user_id": 3642398, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y6cZb.jpg?s=128&g=1", "display_name": "elethan", "link": "https://stackoverflow.com/users/3642398/elethan"}, "edited": false, "score": 0, "creation_date": 1477507967, "post_id": 40269962, "comment_id": 67800155, "body": "Yes, It&#39;s django, I want to do it manually and place my file to string to prevent any attempts of django to read it from disk each time. Cause is that file too small and very often client demand him."}, {"owner": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "reply_to_user": {"reputation": 13890, "user_id": 3642398, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y6cZb.jpg?s=128&g=1", "display_name": "elethan", "link": "https://stackoverflow.com/users/3642398/elethan"}, "edited": false, "score": 0, "creation_date": 1477508392, "post_id": 40269962, "comment_id": 67800375, "body": "I can&#39;t use cache because I don&#39;t need in cache at all, my site have only one page which continue interact with site by using Angular REST API."}], "answers": [{"comments": [{"owner": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "edited": false, "score": 0, "creation_date": 1477509834, "post_id": 40270550, "comment_id": 67801104, "body": "Thanks a lot. Could you give me some links to learn regexp in Python?"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "edited": false, "score": 0, "creation_date": 1477509900, "post_id": 40270550, "comment_id": 67801129, "body": "@LuchkoSerega Glad it worked. A good starting point is <a href=\"http://stackoverflow.com/documentation/python/632/regular-expressions-regex#t=201610261924366282161\">stackoverflow.com/documentation/python/632/&hellip;</a>"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 1, "last_activity_date": 1477509689, "creation_date": 1477509689, "answer_id": 40270550, "question_id": 40269962, "link": "https://stackoverflow.com/questions/40269962/python-find-strings-and-replace/40270550#40270550", "title": "Python find strings and replace", "body": "<p>You can either use <code>Django</code>'s builtin methods or a simple regex to achieve the same:</p>\n\n<pre><code>import re\n\ns = \"htmlhtl {% static path1 %} htmlhtml {% static path2/path3 %} htmlhtml \" \n\nrx = re.compile(r'{% static (?P&lt;path&gt;\\S+) %}')\n# search for {% static ...%}\n\ns = rx.sub(r'www.static.com/\\g&lt;path&gt;', s)\nprint(s)\n# htmlhtl www.static.com/path1 htmlhtml www.static.com/path2/path3 htmlhtml \n</code></pre>\n\n<p><hr>\nSee a working <a href=\"http://ideone.com/goHBdl\" rel=\"nofollow\"><strong>demo on ideone.com</strong></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 993870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a99c0b10aaa360bc861ddad8ec6361?s=128&d=identicon&r=PG", "display_name": "TobalJackson", "link": "https://stackoverflow.com/users/993870/tobaljackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1477510179, "creation_date": 1477510179, "answer_id": 40270684, "question_id": 40269962, "link": "https://stackoverflow.com/questions/40269962/python-find-strings-and-replace/40270684#40270684", "title": "Python find strings and replace", "body": "<p>Here is an example solution I came up with to your provided information using regular expressions:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; s = \"htmlhtl {% static path1 %} htmlhtml {% static path2/path3 %} htmlhtml \"\n&gt;&gt;&gt; path = \"www.static.com\"\n&gt;&gt;&gt; pat = re.compile(r'\\{%\\s*static\\s+([\\w/]+)\\s*%\\}')\n&gt;&gt;&gt; re.sub(pat, path+r'/\\1',s)\n'htmlhtl www.static.com/path1 htmlhtml www.static.com/path2/path3 htmlhtml '\n</code></pre>\n"}], "owner": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 40270550, "answer_count": 2, "score": 1, "last_activity_date": 1477510179, "creation_date": 1477507580, "last_edit_date": 1477509209, "question_id": 40269962, "link": "https://stackoverflow.com/questions/40269962/python-find-strings-and-replace", "title": "Python find strings and replace", "body": "<p>I have string in Python :</p>\n\n<p><strong><code>s = \"htmlhtl {% static path1 %} htmlhtml {% static path2/path3 %} htmlhtml \"</code></strong> </p>\n\n<p>and variable :</p>\n\n<p><strong><code>path = \"www.static.com\"</code></strong></p>\n\n<p>I want to make from <strong>s</strong> new string which will contain on the places of the <strong><code>{% static ... %}</code></strong> tag paths to folders:</p>\n\n<pre><code>\"htmlhtl www.static.com/path1 htmlhtml www.static.com/path2/path3 htmlhtml\"\n</code></pre>\n\n<p>I have opened python doc, and have tried to do it by myself but I can't even match tags. The task seems to be very often case for regexp.</p>\n"}, {"tags": ["python", "opencv", "tkinter"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1477513442, "post_id": 40269957, "comment_id": 67802932, "body": "camera window in Tkinter window is not good idea. Both windows use own mainloop (event loop) which can&#39;t work at the same time (or you have to use <code>threading</code>) and don&#39;t have contact one with other. Maybe easier is get camera video frame and display in Tkinter window (on Label or Canvas)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6765239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fba412fd762905bfc6f19c245f3752?s=128&d=identicon&r=PG&f=1", "display_name": "jainix", "link": "https://stackoverflow.com/users/6765239/jainix"}, "edited": false, "score": 0, "creation_date": 1477561050, "post_id": 40271580, "comment_id": 67820768, "body": "Thanks for the reply.Now that you know what i want to make ,can you suggest something for my GUI problem. I want all attributes to run simultaneoulsy, not periodically."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 13, "user_id": 6765239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fba412fd762905bfc6f19c245f3752?s=128&d=identicon&r=PG&f=1", "display_name": "jainix", "link": "https://stackoverflow.com/users/6765239/jainix"}, "edited": false, "score": 0, "creation_date": 1477584082, "post_id": 40271580, "comment_id": 67836781, "body": "You can use <code>after()</code> to run two functions periodically and it will look like they work simultaneoulsy. Other way you have to use threads. (BTW: threads work very similar - system run two threads periodically and it looks like they work simultaneoulsy. Only system can stop one thread at every moment and run another)"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1477513748, "creation_date": 1477513748, "answer_id": 40271580, "question_id": 40269957, "link": "https://stackoverflow.com/questions/40269957/opencv-window-in-tkinter-frame/40271580#40271580", "title": "opencv window in tkinter frame", "body": "<p>OpenCV window in Tkinter window is not good idea. Both windows use own mainloop (event loop) which can't work at the same time (or you have to use threading) and don't have contact one with other. </p>\n\n<p>Probably it is easier to get video frame and display in Tkinter window on Label or Canvas. You can use <code>tk.after(miliseconds, function_name)</code> to run periodically function which will update video frame in Tkinter window.</p>\n"}], "owner": {"reputation": 13, "user_id": 6765239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fba412fd762905bfc6f19c245f3752?s=128&d=identicon&r=PG&f=1", "display_name": "jainix", "link": "https://stackoverflow.com/users/6765239/jainix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 40271580, "answer_count": 1, "score": 0, "last_activity_date": 1477513748, "creation_date": 1477507572, "question_id": 40269957, "link": "https://stackoverflow.com/questions/40269957/opencv-window-in-tkinter-frame", "title": "opencv window in tkinter frame", "body": "<p>I am making a hand controlled media player application in Python and through OpenCV.I want to embed gesture window of OpenCV in Tkinter frame so I can add further attributes to it.\nCan someone tell how to embed OpenCV camera window into Tkinter frame?</p>\n"}]