[{"tags": ["python", "regex", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1491437866, "post_id": 43243495, "comment_id": 73557271, "body": "<code>&lt;!DOCTYPE&gt;</code> isn&#39;t an HTML tag but a declaration and <code>find()</code> doesn&#39;t work with the full text of those. apparently. See <a href=\"http://stackoverflow.com/questions/2499358/get-document-doctype-with-beautifulsoup\" title=\"get document doctype with beautifulsoup\">stackoverflow.com/questions/2499358/&hellip;</a> for some ideas."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1491438168, "post_id": 43243495, "comment_id": 73557355, "body": "@kindall -- This question looks to me like it should be a dupe of that one though I hesitate to mark it since you didn&#39;t ;-) ..."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1491438348, "post_id": 43243495, "comment_id": 73557405, "body": "I feel like this question isn&#39;t a strict dupe because it&#39;s asking what the problem is with <code>.find()</code> rather than how to get the doctype."}], "answers": [{"tags": [], "owner": {"reputation": 5839, "user_id": 6454584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YR4dt.png?s=128&g=1", "display_name": "Zroq", "link": "https://stackoverflow.com/users/6454584/zroq"}, "is_accepted": false, "score": 0, "last_activity_date": 1491466793, "creation_date": 1491466793, "answer_id": 43249575, "question_id": 43243495, "link": "https://stackoverflow.com/questions/43243495/trying-to-print-the-doctype-declaration/43249575#43249575", "title": "Trying to print the doctype declaration", "body": "<p>Doctype is an instruction to the browser so find and find_all won't find it normally because it is not an html tag.</p>\n\n<p>Other than that your regex won't work because the <code>string</code> value in BS is only <code>html</code> rather than <code>DOCTYPE html</code>.</p>\n\n<p>You can use the link that user <code>kindall</code> mentioned or use it this way:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup, Doctype\n\nhtml = requests.get(\"http://www.bbc.co.uk/iplayer/live/bbcone?area=london\")\nsoup = BeautifulSoup(html.content, \"html.parser\")\nversion = soup.find_all(string=\"html\")\nDOCTYPE = next(item for item in version if isinstance(item, Doctype))\n\nprint (DOCTYPE)\n</code></pre>\n\n<p>Which will print:</p>\n\n<blockquote>\n  <p>html</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 7823631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f3c6a476f19350089147fc60a3e936d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/7823631/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491466793, "creation_date": 1491436760, "question_id": 43243495, "link": "https://stackoverflow.com/questions/43243495/trying-to-print-the-doctype-declaration", "title": "Trying to print the doctype declaration", "body": "<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nimport re\n\nhtml = urlopen(\"http://www.bbc.co.uk/iplayer/live/bbcone?area=london\")\nbsObj = BeautifulSoup(html, \"html.parser\")\nversion = bsObj.find(string = re.compile('DOCTYPE html'))\n\nif version in bsObj:\n    print(\"Yes\")\nelse:\n    print(\"No\")\n</code></pre>\n\n<p>I know the doctype declaration for \"<a href=\"http://www.bbc.co.uk/iplayer/live/bbcone?area=london\" rel=\"nofollow noreferrer\">http://www.bbc.co.uk/iplayer/live/bbcone?area=london</a>\" is html 5 (!DOCTYPE html) but when I run this script the output is \"No\". What am I doing wrong?</p>\n"}, {"tags": ["python", "unix", "docker", "uwsgi"], "comments": [{"owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "edited": false, "score": 0, "creation_date": 1491437993, "post_id": 43243483, "comment_id": 73557306, "body": "Should I try running with a different base image?"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1491444292, "post_id": 43243483, "comment_id": 73558899, "body": "This is a question about system administration and not about programming and therefor off-topic for SO."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 3276747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/memGE.png?s=128&g=1", "display_name": "Tony Schwartz", "link": "https://stackoverflow.com/users/3276747/tony-schwartz"}, "edited": false, "score": 0, "creation_date": 1570107921, "post_id": 43391887, "comment_id": 102815304, "body": "can the container configuration be modified after the fact?  Or do I need to delete the container and create it again using the run command?"}], "tags": [], "owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "is_accepted": true, "score": 7, "last_activity_date": 1492085141, "creation_date": 1492085141, "answer_id": 43391887, "question_id": 43243483, "link": "https://stackoverflow.com/questions/43243483/docker-container-increase-listen-queue-size-beyond-128/43391887#43391887", "title": "docker container increase listen queue size beyond 128", "body": "<p>You either need to run Docker in privileged mode than you can modify the <code>/proc</code> file system after the container was started or you upgrade to a newer Docker release. <code>run</code> subcommand has the <a href=\"https://docs.docker.com/engine/reference/commandline/run/#options\" rel=\"noreferrer\"><code>--sysctl</code></a> option, which allows to make the change you envision:</p>\n\n<p><code>\n$ docker run -ti --sysctl net.core.somaxconn=4096 --rm ubuntu /bin/bash\nroot@9e850908ddb7:/# sysctl net.core.somaxconn\nnet.core.somaxconn = 4096\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 842473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276d61e16224ea4132067343b8aa043?s=128&d=identicon&r=PG", "display_name": "kakilangit", "link": "https://stackoverflow.com/users/842473/kakilangit"}, "is_accepted": false, "score": 8, "last_activity_date": 1612506256, "last_edit_date": 1612506256, "creation_date": 1510799018, "answer_id": 47320534, "question_id": 43243483, "link": "https://stackoverflow.com/questions/43243483/docker-container-increase-listen-queue-size-beyond-128/47320534#47320534", "title": "docker container increase listen queue size beyond 128", "body": "<p>If you prefer using <code>docker-compose</code>. Here's the configuration that you want to adjust:</p>\n<pre><code>sysctls:\n  net.core.somaxconn: 1024\n</code></pre>\n<p>Or</p>\n<pre><code>sysctls:\n  - net.core.somaxconn=1024\n</code></pre>\n<p>Reference: <a href=\"https://github.com/compose-spec/compose-spec/blob/master/spec.md#sysctls\" rel=\"nofollow noreferrer\">https://github.com/compose-spec/compose-spec/blob/master/spec.md#sysctls</a></p>\n"}], "owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8313, "favorite_count": 1, "accepted_answer_id": 43391887, "answer_count": 2, "score": 7, "last_activity_date": 1612506256, "creation_date": 1491436649, "last_edit_date": 1495541386, "question_id": 43243483, "link": "https://stackoverflow.com/questions/43243483/docker-container-increase-listen-queue-size-beyond-128", "title": "docker container increase listen queue size beyond 128", "body": "<p>How can I increase the listen queue size beyond 128 on a docker image with a read only file system?</p>\n\n<p>When I run my container I get the following error:</p>\n\n<p><code>uWSGI: - Listen queue size is greater than the system max net.core.somaxconn (128).</code></p>\n\n<p>I have a Dockerfile with base image <a href=\"https://hub.docker.com/_/python/\" rel=\"noreferrer\" title=\"python:2.7\">python:2.7</a>.  I am trying to increase system level limit on Unix socket and TCP connection listen queue so that uwsgi can set a listen queue limit of 1024, as described at <a href=\"https://stackoverflow.com/questions/12340047/uwsgi-your-server-socket-listen-backlog-is-limited-to-100-connections\">uwsgi: your server socket listen backlog is limited to 100 connections</a>.</p>\n\n<p>I tried adding these <code>RUN</code> commands to the Dockerfile:</p>\n\n<ul>\n<li><code>echo 4096 &gt; /proc/sys/net/core/somaxconn</code></li>\n<li><code>sysctl -w net.core.somaxconn=4096</code></li>\n</ul>\n\n<p>But these both fail with the following errors respectively:</p>\n\n<ul>\n<li><code>/bin/sh: 1: cannot create /proc/sys/net/core/somaxconn: Read-only file system</code></li>\n<li><code>sysctl: setting key \"net.core.somaxconn\": Read-only file system</code></li>\n</ul>\n\n<p>I also tried mounting a file to overwrite the <code>/proc/sys/net/core/somaxconn</code> and that failed with the error <code>cannot be mounted because it is located inside \"/proc\"</code></p>\n\n<p>I also tried running <code>sudo sysctl -w net.core.somaxconn=4096\nnet.core.somaxconn = 4096</code> on the host before running, but it isn't reflected in the docker container; uwsgi still fails with the error <code>uWSGI: - Listen queue size is greater than the system max net.core.somaxconn (128)</code> and running <code>cat /proc/sys/net/core/somaxconn</code> shows 128 in the container while showing 4096 on the host.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1491436474, "post_id": 43243391, "comment_id": 73556915, "body": "add code to create your first dataframe if you want help ... of coarse someone might help even without it if your lucky"}], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1491436539, "post_id": 43243453, "comment_id": 73556937, "body": "That was my last vote of the day.  I won&#39;t be able to vote for 4 more minutes.  I hope you appreciate that :-)"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1491436580, "post_id": 43243453, "comment_id": 73556951, "body": "I appreciate buddy, I appreciate :D"}], "tags": [], "owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "is_accepted": false, "score": 2, "last_activity_date": 1491436487, "creation_date": 1491436487, "answer_id": 43243453, "question_id": 43243391, "link": "https://stackoverflow.com/questions/43243391/group-elements-using-2-columns-and-then-create-a-dataframe/43243453#43243453", "title": "Group elements using 2 columns and then create a dataframe", "body": "<pre><code>df.set_index(['user','products']).unstack()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6744866, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-6CrzCmbIXLo/AAAAAAAAAAI/AAAAAAAAAUI/3F2ZYE99zXU/photo.jpg?sz=128", "display_name": "Rodrigo Cesar Silva", "link": "https://stackoverflow.com/users/6744866/rodrigo-cesar-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491436487, "creation_date": 1491436020, "last_edit_date": 1491436199, "question_id": 43243391, "link": "https://stackoverflow.com/questions/43243391/group-elements-using-2-columns-and-then-create-a-dataframe", "title": "Group elements using 2 columns and then create a dataframe", "body": "<p>I have the following pandas dataframe:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HsBFf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HsBFf.png\" alt=\"enter image description here\"></a></p>\n\n<p>The table contains information about products bought by clients and their respective quantities.</p>\n\n<p>I want to create a matrix of Client(rows) x Product(columns) and fill it with the quantities and input zeros when a client did not buy a product, like the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IXFEy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IXFEy.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I do that?</p>\n\n<p>Thanks,</p>\n\n<p>Rodrigo.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1491436346, "post_id": 43243319, "comment_id": 73556881, "body": "&quot;If I create a list in python, and assign a different list to it, changes of the first list are reflected in the second list&quot; - no, you don&#39;t have a first list and a second list. You have <b>one list</b> and two names for it. With <code>np.array(a)</code>, you&#39;re making an actual second object. You can&#39;t have it mirror changes to the list it was created from; NumPy arrays don&#39;t support that and couldn&#39;t support it without sacrificing almost everything that justifies their existence."}, {"owner": {"reputation": 2203, "user_id": 3344139, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ytB7I.jpg?s=128&g=1", "display_name": "RunOrVeith", "link": "https://stackoverflow.com/users/3344139/runorveith"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491436913, "post_id": 43243319, "comment_id": 73557051, "body": "Yes, I was aware that it is just a different name. Thanks, I thought that it wouldn&#39;t work, but I wasn&#39;t sure."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491499358, "post_id": 43243707, "comment_id": 73592373, "body": "Watch out - <code>numpy.frombuffer</code> is still using the old buffer protocol (or on Python 3, the compatibility functions that wrap the new buffer protocol in an old-style interface), so it&#39;s not very memory-safe. If you create a NumPy array from an <code>array.array</code> or <code>bytearray</code> with <code>frombuffer</code>, you must not change the size of the underlying array. Doing so risks arbitrary memory corruption and segfaults when you access the NumPy array."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491499797, "post_id": 43243707, "comment_id": 73592633, "body": "@user2357112 good advice. I would likely never actually use the above, but I simply wanted to illustrate a little bit about the <code>numpy</code> and <code>python</code> internals. I edited to add a warning."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1491499942, "last_edit_date": 1491499942, "creation_date": 1491438265, "answer_id": 43243707, "question_id": 43243319, "link": "https://stackoverflow.com/questions/43243319/is-it-possible-to-keep-reference-link-between-list-and-numpy-array/43243707#43243707", "title": "Is it possible to keep reference link between list and numpy array", "body": "<p>Fundamentally the issue is that Python lists <em>are not really arrays</em>. OK, CPython lists are ArrayLists, but they are arrays of Py_Object pointers, so they can hold heterogenous data. See <a href=\"http://www.laurentluce.com/posts/python-list-implementation/\" rel=\"nofollow noreferrer\">here</a> for an excellent exposition on the implementation details of CPython lists. Also, they are resizable, and all the <code>malloc</code> and <code>realloc</code> gets taken care of under the hood. However, you <em>can</em> achieve something like what you want if you use vanilla Python arrays available in the <a href=\"https://docs.python.org/3/library/array.html\" rel=\"nofollow noreferrer\"><code>array</code></a> module.</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np # third party\n&gt;&gt;&gt; import array # standard library module\n</code></pre>\n\n<p>Let's make a <em>real</em> array:</p>\n\n<pre><code>&gt;&gt;&gt; a = array.array('i', [1,2,3])\n&gt;&gt;&gt; a\narray('i', [1, 2, 3])\n</code></pre>\n\n<p>We can use <code>numpy.frombuffer</code> if we want our <code>np.array</code> to share the underyling memory of the buffer:</p>\n\n<pre><code>&gt;&gt;&gt; arr = np.frombuffer(a, dtype='int32')\n&gt;&gt;&gt; arr\narray([1, 2, 3], dtype=int32)\n</code></pre>\n\n<h2>EDIT: WARNING</h2>\n\n<p>As stated by @user2357112 in the comments:</p>\n\n<blockquote>\n  <p>Watch out - <code>numpy.frombuffer</code> is still using the old buffer protocol\n  (or on Python 3, the compatibility functions that wrap the new buffer\n  protocol in an old-style interface), so it's not very memory-safe. If\n  you create a NumPy array from an <code>array.array</code> or <code>bytearray</code> with\n  <code>frombuffer</code>, you must not change the size of the underlying array.\n  Doing so risks arbitrary memory corruption and segfaults when you\n  access the NumPy array</p>\n</blockquote>\n\n<p>Note, I had to explicitly pass <code>dtype='int32'</code> because I initialized my <code>array.array</code> with the <code>i</code> signed int typecode, which on my system corresponds to a 32 bit int. Now, presto:</p>\n\n<pre><code>&gt;&gt;&gt; a\narray('i', [1, 2, 3])\n&gt;&gt;&gt; a[0] = 88\n&gt;&gt;&gt; a\narray('i', [88, 2, 3])\n&gt;&gt;&gt; arr\narray([88,  2,  3], dtype=int32)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Now, if we use <code>dtype=object</code>, we actually can share the underlying objects. However, with numerical types, we <em>can't mutate</em>, only replace. However, we can wrap a Python <code>int</code> in a class to make a mutable object:</p>\n\n<pre><code>&gt;&gt;&gt; class MutableInt:\n...     def __init__(self, val):\n...         self.val = val\n...     def __repr__(self):\n...         return repr(self.val)\n...\n&gt;&gt;&gt; obj_list = [MutableInt(i) for i in range(1, 8)]\n&gt;&gt;&gt; obj_list\n[1, 2, 3, 4, 5, 6, 7]\n</code></pre>\n\n<p>Now, we create an array that consists of the same <em>objects</em>:</p>\n\n<pre><code>&gt;&gt;&gt; obj_array = np.array(obj_list, dtype=object)\n&gt;&gt;&gt; obj_array\narray([1, 2, 3, 4, 5, 6, 7], dtype=object)\n</code></pre>\n\n<p>Now, we can mutate the int wrapper in the list:</p>\n\n<pre><code>&gt;&gt;&gt; obj_list[0].val = 88\n&gt;&gt;&gt; obj_list\n[88, 2, 3, 4, 5, 6, 7]\n</code></pre>\n\n<p>And the effects are visible in the <code>numpy</code> array!:</p>\n\n<pre><code>&gt;&gt;&gt; obj_array\narray([88, 2, 3, 4, 5, 6, 7], dtype=object)\n</code></pre>\n\n<p>Note, though, you've now essentially created a less useful version of a Python <code>list</code>, one that isn't resizable, and doesn't have the nice O(1) amortized <code>append</code> behavior. We also lose any memory efficiency gains that a <code>numpy</code> array might give you!</p>\n\n<p>Also, note that in the above the <code>obj_list</code> and <code>obj_array</code> are not sharing the same underlying buffer, they are making *two different arrays of holding the same Py_Obj pointer values:</p>\n\n<pre><code>&gt;&gt;&gt; obj_list[1] = {}\n&gt;&gt;&gt; obj_array\narray([88, 2, 3, 4, 5, 6, 7], dtype=object)\n&gt;&gt;&gt; obj_list\n[88, {}, 3, 4, 5, 6, 7]\n&gt;&gt;&gt;\n</code></pre>\n\n<p>We cannot access the underlying buffer to a python <code>list</code> because this is not exposed. Theoretically, they <em>could</em> if they exposed the buffer protocol: <a href=\"https://docs.python.org/3/c-api/buffer.html#bufferobjects\" rel=\"nofollow noreferrer\">https://docs.python.org/3/c-api/buffer.html#bufferobjects</a></p>\n\n<p>But they don't. <code>bytes</code> and <code>bytearray</code> objects <em>do</em> expose the buffer protocol. <code>bytes</code> are essentially Python 2 <code>str</code>, and <code>bytearray</code> is a mutable version of <code>bytes</code>, so they are essentially mutable <code>char</code> arrays like in C:</p>\n\n<pre><code>&gt;&gt;&gt; barr = bytearray([65, 66, 67, 68])\n&gt;&gt;&gt; barr\nbytearray(b'ABCD')\n</code></pre>\n\n<p>Now, let's make a <code>numpy</code> array that shares the underlying buffer:</p>\n\n<pre><code>&gt;&gt;&gt; byte_array = np.frombuffer(barr, dtype='int8')\n&gt;&gt;&gt; byte_array\narray([65, 66, 67, 68], dtype=int8)\n</code></pre>\n\n<p>Now, we will see changes reflected across both objects:</p>\n\n<pre><code>&gt;&gt;&gt; byte_array[1] = 98\n&gt;&gt;&gt; byte_array\narray([65, 98, 67, 68], dtype=int8)\n&gt;&gt;&gt; barr\nbytearray(b'AbCD')\n</code></pre>\n\n<p>Now, before you think you can use this to subvert the immutability of Python <code>bytes</code> objects, think again:</p>\n\n<pre><code>&gt;&gt;&gt; bs = bytes([65, 66, 67, 68])\n&gt;&gt;&gt; bs\nb'ABCD'\n&gt;&gt;&gt; byte_array = np.frombuffer(bs, dtype='int8')\n&gt;&gt;&gt; byte_array\narray([65, 66, 67, 68], dtype=int8)\n&gt;&gt;&gt; bs\nb'ABCD'\n&gt;&gt;&gt; byte_array[1] = 98\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nValueError: assignment destination is read-only\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1491455846, "last_edit_date": 1491455846, "creation_date": 1491438453, "answer_id": 43243730, "question_id": 43243319, "link": "https://stackoverflow.com/questions/43243319/is-it-possible-to-keep-reference-link-between-list-and-numpy-array/43243730#43243730", "title": "Is it possible to keep reference link between list and numpy array", "body": "<pre><code>a = [1,2,3]\n</code></pre>\n\n<p>A list contains pointers to objects (in this case integers) elsewhere in memory.</p>\n\n<pre><code>b = a\n</code></pre>\n\n<p><code>b</code> points to the same list as <code>a</code>.  It's just another name</p>\n\n<pre><code>c = a[:]\n</code></pre>\n\n<p><code>c</code> is new, but it contains the same pointers as <code>a</code></p>\n\n<pre><code>arr = np.array(a)\n</code></pre>\n\n<p><code>arr</code> has the same numeric values as <code>a</code>, but it stores those values in its own databuffer.  It has, in effect, evaluated <code>a</code>, and made a new object.  There is no connection, other than by value, with <code>a</code>.</p>\n\n<pre><code>arr1 = arr[:]\n</code></pre>\n\n<p>a new array, but with a shared data buffer, a <code>view</code>.</p>\n\n<pre><code>arr2 = arr.copy()\n</code></pre>\n\n<p>a new array with its own data buffer.</p>\n\n<pre><code>arr[0]\n</code></pre>\n\n<p>is a number, created from <code>arr</code>.  It's equal in value to <code>a[0]</code> but does not reference the same numeric object.</p>\n"}], "owner": {"reputation": 2203, "user_id": 3344139, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ytB7I.jpg?s=128&g=1", "display_name": "RunOrVeith", "link": "https://stackoverflow.com/users/3344139/runorveith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 43243707, "answer_count": 2, "score": 1, "last_activity_date": 1491499942, "creation_date": 1491435480, "last_edit_date": 1491456057, "question_id": 43243319, "link": "https://stackoverflow.com/questions/43243319/is-it-possible-to-keep-reference-link-between-list-and-numpy-array", "title": "Is it possible to keep reference link between list and numpy array", "body": "<p>If I create a list in python, and assign a different list to it, changes of the first list are reflected in the second list:</p>\n\n<pre><code>a = [1, 2, 3]\nb = a\na[0] = 0\nprint(b)\n&gt;&gt;&gt; [0, 2, 3]\n</code></pre>\n\n<p>Is it possible to achieve this behavior when creating a numpy array from a list?\nWhat I want:</p>\n\n<pre><code>import numpy as np\na = [1, 2, 3]\nb = np.array(a)\na[0] = 0\nprint(b)\n&gt;&gt;&gt; [ 0 2 3 ]\n</code></pre>\n\n<p>But what actually happens is that b is <code>[ 1 2 3 ]</code>. I realize that this is difficult due to dynamic resizing of the list. But if I could tell numpy that this list is never resized, it should work somehow.\nIs this behavior achievable? Or am I missing some really bad drawbacks?</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1491435584, "creation_date": 1491435584, "answer_id": 43243334, "question_id": 43243311, "link": "https://stackoverflow.com/questions/43243311/multiple-bars-for-each-x-axis-value-using-matplotlib/43243334#43243334", "title": "Multiple bars for each x axis value using matplotlib", "body": "<p><code>set_index</code> + <code>unstack</code></p>\n\n<pre><code>df.set_index(['Time', 'Id']).Count.unstack().plot.bar()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MKnE0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MKnE0.png\" alt=\"enter image description here\"></a></p>\n\n<p>This time with <code>Count</code> as the <code>ylabel</code></p>\n\n<pre><code>ax = df.set_index(['Time', 'Id']).Count.unstack().plot.bar()\nax.set_ylabel('Count')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1B0Gs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1B0Gs.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2762, "user_id": 3447653, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d764d2cae36e073b329a7d73cb222f6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3447653", "link": "https://stackoverflow.com/users/3447653/user3447653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491435584, "creation_date": 1491435394, "question_id": 43243311, "link": "https://stackoverflow.com/questions/43243311/multiple-bars-for-each-x-axis-value-using-matplotlib", "title": "Multiple bars for each x axis value using matplotlib", "body": "<p>I am trying to have 2 bars for each time in the bar chart. \nX axis has to be time and y axis has to be count. \nFor each time I am trying to plot 2 bars for each id. </p>\n\n<pre><code>  Id    Time Count\n  585   10  9\n  585   11  34\n  585   12  96\n  193   10  147\n  193   11  85\n  193   12  1\n</code></pre>\n\n<p>Tried with the below code but could not get the desired results. Any help would be really helpful.</p>\n\n<p>Thanks in advance !!</p>\n\n<pre><code>  y = df1['Id']\n  z = df1['Count']\n\n  ax = plt.subplot(111)\n  ax.bar(y, z,width=0.2,color='b',align='center')\n  ax.bar(y, z,width=0.2,color='g',align='center')\n  ax.xaxis_date()\n\n  plt.show()\n</code></pre>\n"}, {"tags": ["python", "parsing", "dictionary", "rss", "atom-feed"], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 2620192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c19d372d5623f1b5174b1f73e8fd4b10?s=128&d=identicon&r=PG", "display_name": "Pierre Monico", "link": "https://stackoverflow.com/users/2620192/pierre-monico"}, "edited": false, "score": 0, "creation_date": 1491471857, "post_id": 43243619, "comment_id": 73571795, "body": "I thought of that, and it might help. The problem is I need more than the image and I need it for hundreds of articles at page load time (webapp), so it might hurt performance. I&#39;ll try it anyway, thanks!"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 725, "user_id": 2620192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c19d372d5623f1b5174b1f73e8fd4b10?s=128&d=identicon&r=PG", "display_name": "Pierre Monico", "link": "https://stackoverflow.com/users/2620192/pierre-monico"}, "edited": false, "score": 0, "creation_date": 1491492426, "post_id": 43243619, "comment_id": 73587546, "body": "If you need more, then search SO for how to recursively descend through dictionaries.  You can still use the extension matching on <b>present_dict.values</b> to spot the critical fields."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 725, "user_id": 2620192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c19d372d5623f1b5174b1f73e8fd4b10?s=128&d=identicon&r=PG", "display_name": "Pierre Monico", "link": "https://stackoverflow.com/users/2620192/pierre-monico"}, "edited": false, "score": 0, "creation_date": 1491492524, "post_id": 43243619, "comment_id": 73587617, "body": "Note, however, that we can&#39;t really write code for you, since (1) we don&#39;t do end-to-end coding tasks; (2) it seems that you haven&#39;t defined your entire problem; (3) you haven&#39;t provided a framework of code under which we can solve a specific problem.  Pick the range of what you need solved, give us your best shot, and we&#39;ll see about filling in one or two holes for you."}, {"owner": {"reputation": 725, "user_id": 2620192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c19d372d5623f1b5174b1f73e8fd4b10?s=128&d=identicon&r=PG", "display_name": "Pierre Monico", "link": "https://stackoverflow.com/users/2620192/pierre-monico"}, "edited": false, "score": 0, "creation_date": 1491518606, "post_id": 43243619, "comment_id": 73602400, "body": "I made edits; hope it&#39;s clearer now. Thanks for pointing out additional searches I can carry out."}, {"owner": {"reputation": 725, "user_id": 2620192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c19d372d5623f1b5174b1f73e8fd4b10?s=128&d=identicon&r=PG", "display_name": "Pierre Monico", "link": "https://stackoverflow.com/users/2620192/pierre-monico"}, "edited": false, "score": 0, "creation_date": 1491518890, "post_id": 43243619, "comment_id": 73602495, "body": "By the way, I just noticed that my first comment was unclear as well. What I meant by &quot;I need more than the image&quot; is &quot;I have already implemented code to get everything else than the image, and using solution to get the images that doesn&#39;t fit the existing implementation might hurt performance&quot;."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1491437684, "creation_date": 1491437684, "answer_id": 43243619, "question_id": 43243307, "link": "https://stackoverflow.com/questions/43243307/find-a-value-by-substring-in-a-nested-dictionary/43243619#43243619", "title": "Find a value by substring in a nested dictionary", "body": "<p>If all you need is the thumbnail, I would think that the easy way would be to ignore everything else, and simply search every value string for the desired tail.  There are plenty of links to help you traverse the structure, should you care to do that, but I'd turn it into a string and then parse that.</p>\n\n<p>Your trigger is a colon followed by white-space and a quotation mark.  Grab what's between the quotation marks.  Call that <strong>value</strong></p>\n\n<pre><code>extensions = [\".jpg\", \".png\"]\n...\nif value[-4:] in extensions:\n    # You've found a desired URL\n</code></pre>\n\n<p>Does that get you moving?</p>\n"}, {"tags": [], "owner": {"reputation": 725, "user_id": 2620192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c19d372d5623f1b5174b1f73e8fd4b10?s=128&d=identicon&r=PG", "display_name": "Pierre Monico", "link": "https://stackoverflow.com/users/2620192/pierre-monico"}, "is_accepted": true, "score": 0, "last_activity_date": 1491773416, "creation_date": 1491773416, "answer_id": 43312147, "question_id": 43243307, "link": "https://stackoverflow.com/questions/43243307/find-a-value-by-substring-in-a-nested-dictionary/43312147#43312147", "title": "Find a value by substring in a nested dictionary", "body": "<p>I wrote a solution based on <a href=\"https://gist.github.com/PierreMonico/starred\" rel=\"nofollow noreferrer\">this snippet</a>.</p>\n\n<pre><code>def get_image_url(substring, dictionary):\n    for key, value in dictionary.items():\n        # try is for handling Booleans\n        try:\n            if substring in value:\n                yield value\n            elif isinstance(value, dict):\n                for result in get_image_url(substring, value):\n                    yield result\n            elif isinstance(value, list):\n                for list_item in value:\n                    for result in get_image_url(substring, list_item):\n                        yield result\n        except:\n            pass\n\n&gt;&gt;&gt; list(get_image_url('.jpg', article_dict))\n&gt;&gt;&gt; ['https://static01.nyt.com/images/2017/04/09/us/10OBAMA-alt/10OBAMA-alt-moth.jpg']\n</code></pre>\n\n<p>PS : while it does not answer the exact question of finding a value in a nested dictionary, I found out that a good way to get images for articles from RSS feeds in a consistent manner is simply to follow back the URL to the original article, parse the HTML and search for the <code>og:image</code> tag.</p>\n"}], "owner": {"reputation": 725, "user_id": 2620192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c19d372d5623f1b5174b1f73e8fd4b10?s=128&d=identicon&r=PG", "display_name": "Pierre Monico", "link": "https://stackoverflow.com/users/2620192/pierre-monico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 43312147, "answer_count": 2, "score": -1, "last_activity_date": 1494526401, "creation_date": 1491435341, "last_edit_date": 1494526401, "question_id": 43243307, "link": "https://stackoverflow.com/questions/43243307/find-a-value-by-substring-in-a-nested-dictionary", "title": "Find a value by substring in a nested dictionary", "body": "<p>Just to give my problem a context: I am writing a Django webapp that includes several applications. One of them is used to display articles from RSS feeds. For now, I was only displaying the link, source and description. I want to add thumbnails to these articles. \nI'm trying to grab these thumbnails for <strong>any</strong> RSS or ATOM feed. Theses feeds are for some parts (e.g. images) constructed in totally arbitrary ways. Since I don't want to write a specific script for every feed on the Web, my idea is to look for \".jpg\", \".png\" substrings in every article I fetch and get that URL.\nGetting from RSS or ATOM feeds to articles is well handled by the python Feedparser module, and outputs this for example:</p>\n\n<pre><code> {'guidislink': False,\n  'href': '',\n  'id': 'http://www.bbc.co.uk/sport/football/39426760',\n  'link': 'http://www.bbc.co.uk/sport/football/39426760',\n  'links': [{'href': 'http://www.bbc.co.uk/sport/football/39426760',\n             'rel': 'alternate',\n             'type': 'text/html'}],\n  'media_thumbnail': [{'height': '576',\n                       'url': 'http://c.files.bbci.co.uk/44A9/production/_95477571_joshking2.jpg',\n                       'width': '1024'}],\n  'published': 'Wed, 05 Apr 2017 21:49:14 GMT',\n  'published_parsed': time.struct_time(tm_year=2017, tm_mon=4, tm_mday=5, tm_hour=21, tm_min=49, tm_sec=14, tm_wday=2, tm_yday=95, tm_isdst=0),\n  'summary': 'Joshua King scores a dramatic late equaliser for Bournemouth as '\n             'Liverpool drop two crucial points at Anfield.',\n  'summary_detail': {'base': 'http://feeds.bbci.co.uk/news/rss.xml',\n                     'language': None,\n                     'type': 'text/html',\n                     'value': 'Joshua King scores a dramatic late equaliser '\n                              'for Bournemouth as Liverpool drop two crucial '\n                              'points at Anfield.'},\n  'title': 'Liverpool 2-2 Bournemouth',\n  'title_detail': {'base': 'http://feeds.bbci.co.uk/news/rss.xml',\n                   'language': None,\n                   'type': 'text/plain',\n                   'value': 'Liverpool 2-2 Bournemouth'}}\n</code></pre>\n\n<p>Here, <code>http://c.files.bbci.co.uk/44A9/production/_95477571_joshking2.jpg</code> is somewhere nested in lists and dictionaries. While I know how to access it in this specific case, the structures of feeds widely vary. Mainly:</p>\n\n<ul>\n<li>The dictionary key holding the url is not always the same</li>\n<li>The 'deepness' of where the url might be nested is not always the same</li>\n</ul>\n\n<p>However, what is almost always the case is that an url with an image extension is the thumbnail of that article. How do I get that url? </p>\n\n<p>To frame it out a little more, for now I use helper functions (based on the Feedparser module) that processes a <code>feeds</code> context variable, which is a dictionary, usable in my templates. I do the looping and displaying of title, description etc directly in my templates, since they are consistently a part of that dictionary thanks to feedparser:</p>\n\n<pre><code>...\n{% for feed in feeds %}\n  &lt;h3&gt;{{ feed.feed.title }}&lt;/h3&gt;\n  {% for entry in feed.entries %}\n...\n</code></pre>\n\n<p>On the backend :</p>\n\n<pre><code>def parse_feeds(urls):\n    parsed_feeds = []\n    for url in urls:\n        parsed_feed = feedparser.parse(url)\n        parsed_feeds.append(parsed_feed)\n    return parsed_feeds\n\nclass IndexView(generic.ListView):\n    template_name = 'publisher/index.html'\n\n    def get_context_data(self, **kwargs):\n        context = super(IndexView,self).get_context_data(**kwargs)\n        reacted_feeds = RSSArticle.objects.all()\n        context['reacted_feeds'] = reacted_feeds\n        parsed_feeds = parse_feeds(urls)\n        delete_existing_entries(parsed_feeds)\n        context['feeds'] = parsed_feeds\n        return context\n</code></pre>\n\n<p>So basically every time you call that IndexView, you get the list of all articles from the feeds you subscribed to. That's where I want to include the image, which are not provided by Feedparser due to the inconsistent nature of their location in feeds. </p>\n\n<p>If I want to include these pictures, at a macro level I basically have two solutions:</p>\n\n<ul>\n<li>Writing something in addition to the existing system, but that might hurt performance because of too many things having to happen at the same time</li>\n<li>Rewriting the whole thing, which might also hurt performance and consistency because I don't take advantage of Feedparser's power anymore</li>\n</ul>\n\n<p>Maybe I should just keep the raw XML and try my luck with Beautifulsoup instead of translating to a dictionary with Feedparser.</p>\n\n<p>PS : here is another example where the image is located somewhere else.</p>\n\n<pre><code>{'guidislink': False,\n 'id': 'http://www.lemonde.fr/tiny/5106451/',\n 'link': 'http://www.lemonde.fr/les-decodeurs/article/2017/04/05/presidentielle-les-grands-clivages-qui-divisent-les-onze-candidats_5106451_4355770.html?xtor=RSS-3208',\n 'links': [{'href': 'http://www.lemonde.fr/les-decodeurs/article/2017/04/05/presidentielle-les-grands-clivages-qui-divisent-les-onze-candidats_5106451_4355770.html?xtor=RSS-3208',\n            'rel': 'alternate',\n            'type': 'text/html'},\n           {'href': 'http://s1.lemde.fr/image/2017/04/05/644x322/5106578_3_0f2b_sur-le-plateau-du-debat-de-bfmtv-et-cnews_0e90a3db44861847870cfa1e4c3793b1.jpg',\n            'length': '40057',\n            'rel': 'enclosure',\n            'type': 'image/jpeg'}],\n 'published': 'Wed, 05 Apr 2017 17:02:38 +0200',\n 'published_parsed': time.struct_time(tm_year=2017, tm_mon=4, tm_mday=5, tm_hour=15, tm_min=2, tm_sec=38, tm_wday=2, tm_yday=95, tm_isdst=0),\n 'summary': 'Protection sociale, Europe, identit\u00e9\u2026 Avec leurs programmes, les '\n            'proximit\u00e9s id\u00e9ologiques entre candidats bousculent de plus en '\n            'plus le traditionnel axe \u00ab\\xa0gauche-droite\\xa0\u00bb.',\n 'summary_detail': {'base': 'http://www.lemonde.fr/rss/une.xml',\n                    'language': None,\n                    'type': 'text/html',\n                    'value': 'Protection sociale, Europe, identit\u00e9\u2026 Avec leurs '\n                             'programmes, les proximit\u00e9s id\u00e9ologiques entre '\n                             'candidats bousculent de plus en plus le '\n                             'traditionnel axe \u00ab\\xa0gauche-droite\\xa0\u00bb.'},\n 'title': 'Pr\u00e9sidentielle\\xa0: les grands clivages qui divisent les onze '\n          'candidats',\n 'title_detail': {'base': 'http://www.lemonde.fr/rss/une.xml',\n                  'language': None,\n                  'type': 'text/plain',\n                  'value': 'Pr\u00e9sidentielle\\xa0: les grands clivages qui '\n                           'divisent les onze candidats'}}\n</code></pre>\n"}, {"tags": ["python", "multithreading", "user-interface", "tkinter", "widget"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1491436085, "post_id": 43243285, "comment_id": 73556813, "body": "Just make the threads daemons so they die with the parent thread."}, {"owner": {"reputation": 41, "user_id": 2225133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de87f0e51d203b99c98be56d1787a3a?s=128&d=identicon&r=PG", "display_name": "Justin Gries", "link": "https://stackoverflow.com/users/2225133/justin-gries"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1491454421, "post_id": 43243285, "comment_id": 73561479, "body": "Well, that certainly worked!  I still feel like those methods should raise an exception rather than hanging the way that they do... Thank you so much!"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 2225133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de87f0e51d203b99c98be56d1787a3a?s=128&d=identicon&r=PG", "display_name": "Justin Gries", "link": "https://stackoverflow.com/users/2225133/justin-gries"}, "is_accepted": false, "score": 0, "last_activity_date": 1491454702, "creation_date": 1491454702, "answer_id": 43246028, "question_id": 43243285, "link": "https://stackoverflow.com/questions/43243285/calls-to-defunct-tkinter-python-gui-widgets-are-hanging/43246028#43246028", "title": "Calls to defunct tkinter (python GUI) widgets are hanging", "body": "<p>Setting the background threads as daemons worked just fine</p>\n\n<pre><code>t = Thread(target=self.pollData)\nt.daemon = True\nt.start()\n</code></pre>\n\n<p>Thread 't' ends when the main thread exits</p>\n\n<p>I still feel that the tkinter methods behave poorly by blocking/hanging rather than raising an exception in this scenario</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 2225133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de87f0e51d203b99c98be56d1787a3a?s=128&d=identicon&r=PG", "display_name": "Justin Gries", "link": "https://stackoverflow.com/users/2225133/justin-gries"}, "is_accepted": false, "score": 0, "last_activity_date": 1491498171, "last_edit_date": 1491498171, "creation_date": 1491457867, "answer_id": 43246718, "question_id": 43243285, "link": "https://stackoverflow.com/questions/43243285/calls-to-defunct-tkinter-python-gui-widgets-are-hanging/43246718#43246718", "title": "Calls to defunct tkinter (python GUI) widgets are hanging", "body": "<p>While assigning the threads as daemons works in this particular case, that doesn't really help unless we are actually closing the application.  What if I were merely closing a window, or a frame?  Then we're stuck with the problem of the methods of these defunct GUI items being called and hanging the thread... </p>\n\n<p>We need a way to keep those methods from being called, but we cannot depend on a check-then-call solution because these are not atomic operations.</p>\n\n<p>Here's another idea...  What do people think about this as a solution?</p>\n\n<pre><code>  # The tkinter GUI objects were hanging indefinitely upon calls to their methods after\n  # the window was closed, so we will replace them with dummy objects that will recieve \n  # those calls instead\n  def deactivate(self):\n    self._active = False\n    self.varToUpdate = Stub()  # we could probably just reinitialize an IntVar\n    self.bar = Stub()\n    self.frame = Stub()\n\nclass Stub(object):\n\n  def __init__(self):\n    pass\n\n  def config(self, **kwargs):\n    pass\n\n  def set(self, value):\n    pass\n</code></pre>\n\n<p>We might also simply delete the objects and add handling to catch the resulting exceptions when calls are made to the now non-existant objects...</p>\n\n<pre><code>  def deactivate(self):\n    self._active = False\n    del self.varToUpdate\n    del self.bar\n    del self.frame\n</code></pre>\n\n<p>Unfortunately, even with these solutions, I think there is still a chance that the shutdown of the objects could occur after the calls to the GUI objects have been made.</p>\n"}], "owner": {"reputation": 41, "user_id": 2225133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de87f0e51d203b99c98be56d1787a3a?s=128&d=identicon&r=PG", "display_name": "Justin Gries", "link": "https://stackoverflow.com/users/2225133/justin-gries"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491498171, "creation_date": 1491435213, "last_edit_date": 1491436002, "question_id": 43243285, "link": "https://stackoverflow.com/questions/43243285/calls-to-defunct-tkinter-python-gui-widgets-are-hanging", "title": "Calls to defunct tkinter (python GUI) widgets are hanging", "body": "<p>I'm dialing up a GUI using tkinter, and I am trying to be a responsible citizen by cleaning up all of my threads when my application is closed.  My application is multi-threaded, with a polling engine regularly sending updates back to my display.  I'm using resource locking to control access to shared resources, (NOT shown in the example code, below).  The problem is that quite frequently after closing the application window I am stuck with leftover threads.</p>\n\n<p>I've tried to show what I'm working with in the code below: The callbacks to \"update\" are asynchronous. The problem is that between the time that I check \"self._active\" for the status of the underlying widgets and the time that I make the calls to \"...frameWidget.configure(style=...\" and \"...varToUpdate.set(...\", the state of those widgets may have been altered by the tkinter engine to some flavor of 'defunct'/'unresponsive'.  </p>\n\n<p>Using a Lock does not help.  I have not found a way to control the state of the widgets to keep them from 'dying' until I can clean things up.  The event notifications appear to be simply that: they tell you that an event has occurred, but they do not allow you to delay widget-'death' until you can finish cleaning up.</p>\n\n<p>The real problem appears to be that the calls to configure the style of the widget (\"self.frameWidget.configure(style = stylename)\") and to update the IntVar (\"self.varToUpdate.set(value)\") simply hang/block when the GUI has been shut down.<br>\nRather than producing an exception, or just yielding nothing, those method calls never return.  (This does not seem like good behavior to me.)</p>\n\n<p>So.  How to deal with this?   Any ideas?  I would really LOVE the ability to specify a chunk of code as \"atomic\" somehow so that I could guarantee that the object manipulation was guaranteed to be run immediately after the check for \"._active\" but I have not seen anything like that in Python.  Even if I could achieve that, I am not sure how the tkinker engine actually goes about updating the objects, so that might not solve the problem.  Am I missing something?</p>\n\n<p>And yes, I'm new to python, bla bla bla...  I come from a Java background, so I assume that much of what I have written is decidedly \"un-pythonic\".  I am quite happy to hear your insight on how I might improve things here to leverage the strengths of the language.</p>\n\n<p>The example code!</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import ttk\nfrom myutil import Subscriber\n\nthreshold = 20\ndeactivationEvents = (\"Deactivate\", \"Destroy\", \"Unmap\")\nactivationEvents = (\"Activate\", \"Map\")\n\n# class implements/inherits \"listener pattern\" functionality\nclass MyClass(Subscriber)\n  def __init__(self, parentWidget):\n    self._active = False\n    self.frame = ttk.LabelFrame(parentWidget, text='something')\n    self.varToUpdate = IntVar()\n    self.bar = ttk.Progressbar(self.frame, orient=VERTICAL)\n    self.bar.config(mode='determinate', maximum=100, variable=self.varToUpdate)\n    self.moreThings()\n    self.bindWidgetEvents():\n\n  . more\n  . code\n  . here\n\n  # I'm using a simple boolean flag to control access here\n  # I've tried using threading.Lock as well, to no avail\n  def update(self, value):\n    stylename = \"{}.TFrame\".format(\"Normal\" if value &gt; threshold else \"Alarm\")\n    if self._active:\n      self.frame.configure(style=stylename)\n      self.varToUpdate.set(value)\n\n  def bindWidgetEvents(self):\n    widgets = [self.bar, self.frame]\n    self.bindActivationEvents(widgets)\n    self.bindDeactivationEvents(widgets)\n\n  def bindActivationEvents(self, widgets):\n    def activate(event):\n      self._active = True\n    for widget in widgets:\n      for event in activationEvents:\n        widget.bind(\"&lt;{}&gt;\".format(event), activate)\n\n  def bindDeactivationEvents(self, widgets):\n    def deactivate(event):\n      self._active = False\n    for widget in widgets:\n      for event in deactivationEvents:\n        widget.bind(\"&lt;{}&gt;\".format(event), deactivate)\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "is_accepted": false, "score": 0, "last_activity_date": 1491435351, "creation_date": 1491435351, "answer_id": 43243309, "question_id": 43243246, "link": "https://stackoverflow.com/questions/43243246/what-does-it-mean-to-change-data-root-to-point-to-the-pascal-images/43243309#43243309", "title": "What does it mean to &quot;Change DATA_ROOT to point to the PASCAL images&quot;", "body": "<p>Looks like it's a global variable in <a href=\"https://github.com/TheLegendAli/DeepLab-Context/blob/master/run.py#L14\" rel=\"nofollow noreferrer\"><code>run.py</code></a>:</p>\n\n<pre><code># MODIFY PATH for YOUR SETTING\nEXP='voc12' #dataset\nNET_ID='vgg128_noup' #model name\nNUM_LABELS=21\nYEAR = 'VOC2012'\nDATA_ROOT='/media/ali/VOCdevkit/VOC2012'\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 2654794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38103cc236613360643237c6097feb3?s=128&d=identicon&r=PG", "display_name": "pongoS", "link": "https://stackoverflow.com/users/2654794/pongos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491435351, "creation_date": 1491434934, "question_id": 43243246, "link": "https://stackoverflow.com/questions/43243246/what-does-it-mean-to-change-data-root-to-point-to-the-pascal-images", "title": "What does it mean to &quot;Change DATA_ROOT to point to the PASCAL images&quot;", "body": "<p>I'm going through an installation of <a href=\"https://github.com/TheLegendAli/DeepLab-Context\" rel=\"nofollow noreferrer\">https://github.com/TheLegendAli/DeepLab-Context</a> and got this instruction.</p>\n\n<p>Here is the how-to-install info:</p>\n\n<p><strong>Performance</strong></p>\n\n<p>DeepLab currently achieves 73.9% on the challenging PASCAL VOC 2012 image segmentation task -- see the leaderboard.</p>\n\n<p><strong>Pre-trained models</strong></p>\n\n<p>We have released several trained models and corresponding prototxt files at here. Please check it for more model details.</p>\n\n<p>The best model among the released ones yields 73.6% on PASCAL VOC 2012 test set.</p>\n\n<p><strong>Python wrapper requirements</strong></p>\n\n<p>Install wget library for python</p>\n\n<p><code>sudo pip install wget</code></p>\n\n<p>Change DATA_ROOT to point to the PASCAL images</p>\n\n<p>To use the mat_read_layer and mat_write_layer, please download and install matio.</p>\n\n<p><strong>Running the code</strong></p>\n\n<p><code>python run.py</code></p>\n\n<hr>\n\n<p>I don't know what DATA_ROOT is - is it an environment variable? something else? How would I access it and change it?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 1, "creation_date": 1491434571, "post_id": 43243176, "comment_id": 73556421, "body": "Please provide contents of cub.txt"}, {"owner": {"reputation": 55, "user_id": 6316333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93499e4b57dff5d09a9132c8b9f8d21?s=128&d=identicon&r=PG", "display_name": "Ahmed Khaled", "link": "https://stackoverflow.com/users/6316333/ahmed-khaled"}, "reply_to_user": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 0, "creation_date": 1491434793, "post_id": 43243176, "comment_id": 73556487, "body": "i have provide it"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1491434841, "post_id": 43243176, "comment_id": 73556503, "body": "What did you think <code>[A-A]{1}</code> or <code>[A-A,&#39;A&#39;]</code> were going to do? And why did you expect any sort of dict out of <code>re.findall</code>?"}, {"owner": {"reputation": 55, "user_id": 6316333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93499e4b57dff5d09a9132c8b9f8d21?s=128&d=identicon&r=PG", "display_name": "Ahmed Khaled", "link": "https://stackoverflow.com/users/6316333/ahmed-khaled"}, "edited": false, "score": 0, "creation_date": 1491434913, "post_id": 43243176, "comment_id": 73556518, "body": "i am stuck at this part"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1491435475, "post_id": 43243176, "comment_id": 73556680, "body": "You add some explanation of what exactly the desired result is. Otherwise we have to deduce it for ourselves."}, {"owner": {"reputation": 3930, "user_id": 1695437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buiqY.jpg?s=128&g=1", "display_name": "Darkstarone", "link": "https://stackoverflow.com/users/1695437/darkstarone"}, "edited": false, "score": 0, "creation_date": 1491436563, "post_id": 43243176, "comment_id": 73556943, "body": "Hey @AhmedKhaled, I was editing the ordered part of my question while you accepted it - if you&#39;re using that version make sure you&#39;ve got the updated version of the code (which also sorts the internal hashes)."}, {"owner": {"reputation": 55, "user_id": 6316333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93499e4b57dff5d09a9132c8b9f8d21?s=128&d=identicon&r=PG", "display_name": "Ahmed Khaled", "link": "https://stackoverflow.com/users/6316333/ahmed-khaled"}, "edited": false, "score": 1, "creation_date": 1491436665, "post_id": 43243176, "comment_id": 73556980, "body": "thank you sir really thank you"}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1542031054, "post_id": 43243176, "comment_id": 93411451, "body": "For what it&#39;s worth, the regex to match the character <code>A</code> is just <code>A</code>, not <code>[A-A]{1}</code>. If you really want to use a character class, the range and the single repetition are redundant, but with those removed, you could say <code>[A]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3930, "user_id": 1695437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buiqY.jpg?s=128&g=1", "display_name": "Darkstarone", "link": "https://stackoverflow.com/users/1695437/darkstarone"}, "is_accepted": true, "score": 0, "last_activity_date": 1491436485, "last_edit_date": 1491436485, "creation_date": 1491435686, "answer_id": 43243347, "question_id": 43243176, "link": "https://stackoverflow.com/questions/43243176/extract-gene-sequence-from-text-using-regex/43243347#43243347", "title": "Extract gene sequence from text using regex", "body": "<pre><code># Read in the file to a single line.   \nwith open('cub.txt', 'r') as myfile:\n    data=myfile.read().replace('\\n', '')\n\n# split into individual items. \ndata = data.split(\" \")\n\nresult = {}\n\nfor index, item in enumerate(data):\n    # Check if item is a codon. \n    if item.isalpha() and len(item) == 3:\n        # Key is next item after codon.\n        key = data[index+1]\n        # Makes an internal hash if not done already, and inserts the result.\n        if key not in result:\n            result[key] = {}\n        result[key][item] = data[index+2]\n\nprint(result)\n</code></pre>\n\n<p>Keep in mind this does not maintain order (Since you're wanting the result in hashes (which don't maintain order).</p>\n\n<p>To maintain order you can use an <code>OrderedDict</code>:</p>\n\n<pre><code>from collections import OrderedDict\n\n# Read in the file to a single line.   \nwith open('cub.txt', 'r') as myfile:\n    data=myfile.read().replace('\\n', '')\n\n# split into individual items. \ndata = data.split(\" \")\n\nresult = {}\n\nfor index, item in enumerate(data):\n    # Check if item is a codon. \n    if item.isalpha() and len(item) == 3:\n        # Key is next item after codon.\n        key = data[index+1]\n        # Makes an internal hash if not done already, and inserts the result.\n        if key not in result:\n            result[key] = {}\n        result[key][item] = data[index+2]\n\n# Order keys.\nordered_result = OrderedDict(sorted(result.items(), key=lambda t: t[0]))\n\n# Order internal hashes.\nfor key, value in ordered_result.items():\n    ordered_result[key] = OrderedDict(sorted(value.items(), key=lambda t: t[0]))\n\nprint(ordered_result)\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6316333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93499e4b57dff5d09a9132c8b9f8d21?s=128&d=identicon&r=PG", "display_name": "Ahmed Khaled", "link": "https://stackoverflow.com/users/6316333/ahmed-khaled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 43243347, "answer_count": 1, "score": -2, "last_activity_date": 1542030943, "creation_date": 1491434430, "last_edit_date": 1542030943, "question_id": 43243176, "link": "https://stackoverflow.com/questions/43243176/extract-gene-sequence-from-text-using-regex", "title": "Extract gene sequence from text using regex", "body": "<p>My code doesn't give me the desired output:</p>\n\n<pre><code>import re\nf = open(\"cub.txt\")\ncub = f.read()\nf.close()\nr = re.compile(\"([A-A]{1})\\s([A-A,'A'])\\s([-+]?[0-9]*\\.?[0-9]*)\")\nmatches = re.findall(r, cub)\nprint (matches)\n</code></pre>\n\n<p>contents of cub text file :   </p>\n\n<pre><code>UUU F 0.45 16.8 ( 45768)  UCU S 0.18 14.1 ( 38296)  UAU Y 0.40 11.8 ( 32211)  UGU C 0.40  8.8 ( 23851)\nUUC F 0.55 20.2 ( 54936)  UCC S 0.20 15.7 ( 42683)  UAC Y 0.60 17.8 ( 48342)  UGC C 0.60 13.3 ( 36075)\nUUA L 0.08  7.0 ( 19129)  UCA S 0.15 11.6 ( 31442)  UAA * 0.41  0.8 (  2046)  UGA * 0.59  1.1 (  2986)\nUUG L 0.13 12.6 ( 34146)  UCG S 0.07  5.2 ( 14079)  UAG Q 0.01  0.5 (  1281)  UGG W 1.00 12.0 ( 32616)\n\nCUU L 0.13 12.4 ( 33708)  CCU P 0.27 15.3 ( 41672)  CAU H 0.40  9.5 ( 25885)  CGU R 0.10  5.4 ( 14682)\nCUC L 0.18 16.8 ( 45753)  CCC P 0.30 17.0 ( 46097)  CAC H 0.60 14.4 ( 39081)  CGC R 0.19 10.4 ( 28305)\nCUA L 0.06  6.0 ( 16211)  CCA P 0.28 15.7 ( 42767)  CAA Q 0.27 12.1 ( 33018)  CGA R 0.10  5.3 ( 14339)\nCUG L 0.41 38.5 (104699)  CCG P 0.14  7.8 ( 21091)  CAG Q 0.72 32.6 ( 88743)  CGG R 0.18  9.7 ( 26453)\n\nAUU I 0.35 16.8 ( 45653)  ACU T 0.25 13.3 ( 36078)  AAU N 0.43 16.9 ( 46039)  AGU S 0.14 11.2 ( 30390)\nAUC I 0.46 22.0 ( 59906)  ACC T 0.31 16.5 ( 44951)  AAC N 0.57 22.5 ( 61099)  AGC S 0.26 20.2 ( 54867)\nAUA I 0.18  8.8 ( 23805)  ACA T 0.30 16.1 ( 43884)  AAA K 0.44 27.3 ( 74256)  AGA R 0.22 12.2 ( 33289)\nAUG M 1.00 23.2 ( 62972)  ACG T 0.14  7.7 ( 20943)  AAG K 0.56 34.3 ( 93393)  AGG R 0.21 11.7 ( 31945)\n\nGUU V 0.21 13.1 ( 35593)  GCU A 0.29 20.8 ( 56528)  GAU D 0.50 25.3 ( 68683)  GGU G 0.18 11.4 ( 30898)\nGUC V 0.22 13.6 ( 36917)  GCC A 0.32 22.9 ( 62202)  GAC D 0.50 24.9 ( 67783)  GGC G 0.31 19.7 ( 53631)\nGUA V 0.12  7.8 ( 21277)  GCA A 0.26 19.0 ( 51713)  GAA E 0.43 31.0 ( 84178)  GGA G 0.27 17.6 ( 47765)\nGUG V 0.45 28.2 ( 76624)  GCG A 0.13  9.1 ( 24768)  GAG E 0.57 40.9 (111123)  GGG G 0.25 16.0 ( 43513)\n</code></pre>\n\n<p>desired output:</p>\n\n<pre><code>{'A': {'GCA': '0.26', 'GCC': '0.32', 'GCU': '0.29', 'GCG': '0.13'}, 'C': {'UGC': '0.60', 'UGU': '0.40'}, 'E': {'GAG': '0.57', 'GAA': '0.43'}, 'D': {'GAU': '0.50', 'GAC': '0.50'}, 'G': {'GGU': '0.18', 'GGG': '0.25', 'GGA': '0.27', 'GGC': '0.31'}, 'F': {'UUU': '0.45', 'UUC': '0.55'}, 'I': {'AUA': '0.18', 'AUC': '0.46', 'AUU': '0.35'}, 'H': {'CAC': '0.60', 'CAU': '0.40'}, 'K': {'AAG': '0.56', 'AAA': '0.44'}, '*': {'UAA': '0.41', 'UGA': '0.59'}, 'M': {'AUG': '1.00'}, 'L': {'CUU': '0.13', 'CUG': '0.41', 'CUC': '0.18', 'CUA': '0.06', 'UUG': '0.13', 'UUA': '0.08'}, 'N': {'AAU': '0.43', 'AAC': '0.57'}, 'Q': {'CAA': '0.27', 'CAG': '0.72', 'UAG': '0.01'}, 'P': {'CCU': '0.27', 'CCG': '0.14', 'CCA': '0.28', 'CCC': '0.30'}, 'S': {'UCU': '0.18', 'AGC': '0.26', 'UCG': '0.07', 'UCC': '0.20', 'UCA': '0.15', 'AGU': '0.14'}, 'R': {'CGA': '0.10', 'CGC': '0.19', 'AGA': '0.22', 'AGG': '0.21', 'CGG': '0.18', 'CGU': '0.10'}, 'T': {'ACC': '0.31', 'ACA': '0.30', 'ACG': '0.14', 'ACU': '0.25'}, 'W': {'UGG': '1.00'}, 'V': {'GUC': '0.22', 'GUA': '0.12', 'GUG': '0.45', 'GUU': '0.21'}, 'Y': {'UAC': '0.60', 'UAU': '0.40'}}\n</code></pre>\n"}, {"tags": ["python", "python-multiprocessing", "contextmanager"], "comments": [{"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 3, "creation_date": 1491434725, "post_id": 43243173, "comment_id": 73556459, "body": "Where is the code for <code>read_engine_files</code>?"}, {"owner": {"reputation": 127, "user_id": 939971, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fb4d3dc58615993f0023bc7ad4d08c6c?s=128&d=identicon&r=PG", "display_name": "jamis", "link": "https://stackoverflow.com/users/939971/jamis"}, "reply_to_user": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 0, "creation_date": 1491497405, "post_id": 43243173, "comment_id": 73591163, "body": "@TomDalton I added in a function for <code>read_engine_files</code>. Can someone explain why this is being down voted?"}, {"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 0, "creation_date": 1491549732, "post_id": 43243173, "comment_id": 73612218, "body": "It&#39;s probably being downvoted because you haven&#39;t provided a minimal example. Even with the extra code you&#39;ve posted, now we can&#39;t see the <code>engineInput()</code> or <code>engine_input.parse_from_string(f.read())</code> code."}], "answers": [{"tags": [], "owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "is_accepted": false, "score": 1, "last_activity_date": 1491437245, "creation_date": 1491437245, "answer_id": 43243561, "question_id": 43243173, "link": "https://stackoverflow.com/questions/43243173/why-does-my-context-manager-exit-function-run-before-the-computation-isnt-f/43243561#43243561", "title": "Why does my context manager __exit__ function run before the computation isn&#39;t finished?", "body": "<p>Are you sure you're just calling <code>pool.map()</code>? That should block until all the items have been mapped.</p>\n\n<p>If you're calling one of the asynchronous methods of <code>Pool</code>, then you should be able to solve the problem by changing the order of things in <code>__exit__()</code>. Just join the pool before doing the summary.</p>\n\n<pre><code>def __exit__(self, type_, value, traceback):\n    self.pool.close()\n    self.pool.join()\n    print 'end concurrent:', self.msg\n    print 'time:', time.time() - self.start\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 6603796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83f50093152535dc0854d1aab1dad65f?s=128&d=identicon&r=PG", "display_name": "jws", "link": "https://stackoverflow.com/users/6603796/jws"}, "is_accepted": false, "score": 0, "last_activity_date": 1551055114, "creation_date": 1551055114, "answer_id": 54858051, "question_id": 43243173, "link": "https://stackoverflow.com/questions/43243173/why-does-my-context-manager-exit-function-run-before-the-computation-isnt-f/54858051#54858051", "title": "Why does my context manager __exit__ function run before the computation isn&#39;t finished?", "body": "<p>The most likely explanation is that an exception occurred. The above code sample does not parse the <code>type</code>, <code>value</code> or <code>traceback</code> arguments of the <code>__exit__</code> statement. Thus, an exception occurs (and is not caught earlier), is handed to the exit statement which in turn does not react to it. The processes (or some of them) continue running.</p>\n"}], "owner": {"reputation": 127, "user_id": 939971, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fb4d3dc58615993f0023bc7ad4d08c6c?s=128&d=identicon&r=PG", "display_name": "jamis", "link": "https://stackoverflow.com/users/939971/jamis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1551055114, "creation_date": 1491434406, "last_edit_date": 1491497354, "question_id": 43243173, "link": "https://stackoverflow.com/questions/43243173/why-does-my-context-manager-exit-function-run-before-the-computation-isnt-f", "title": "Why does my context manager __exit__ function run before the computation isn&#39;t finished?", "body": "<p>The <strong>exit</strong> function of my custom context manager seemingly runs before the computation is done. My context manager is meant to simplify writing concurrent/parallel code. Here is my context manager code:</p>\n\n<pre><code>import time\nfrom multiprocessing.dummy import Pool, cpu_count\n\nclass managed_pool:\n    '''Simple context manager for multiprocessing.dummy.Pool'''\n    def __init__(self, msg):\n        self.msg = msg\n    def __enter__(self):\n        cores = cpu_count()\n        print 'start concurrent ({0} cores): {1}'.format(cores, self.msg)\n        self.start = time.time()\n        self.pool = Pool(cores)\n        return self.pool\n    def __exit__(self, type_, value, traceback):\n        print 'end concurrent:', self.msg\n        print 'time:', time.time() - self.start\n        self.pool.close()\n        self.pool.join()\n</code></pre>\n\n<p>I've already tried this script with <code>multiprocessing.Pool</code> instead of <code>multiprocessing.dummy.Pool</code> and it seems to fail all the time.</p>\n\n<p>Here is an example of using the context manager:</p>\n\n<pre><code>def read_engine_files(f):\n    engine_input = engineInput()\n    with open(f, 'rb') as f:\n        engine_input.parse_from_string(f.read())\n    return engine_input\n\nwith managed_pool('load input files') as pool:\n    data = pool.map(read_engine_files, files)\n</code></pre>\n\n<p>So, inside of <code>read_engine_files</code> I print the name of the file. You'll notice in the <code>__exit__</code> function that I also print out when the computation is done and how long it took. But when viewing stdout the <code>__exit__</code> message appears way before the computation finished. Like, minutes before the computation is done. But <code>htop</code> says all of my cores are still being used. Here's an example of the output</p>\n\n<pre><code>start concurrent (4 cores): load engine input files\nfile1.pbin\nfile2.pbin\n...\nfile16.pbin\nend concurrent: load engine input files\ntime: 246.43829298\nfile17.pbin\n...\nfile45.pbin\n</code></pre>\n\n<p>Why is <code>__exit__</code> being called so early?</p>\n"}, {"tags": ["python", "coordinates", "indices", "ncl"], "comments": [{"owner": {"reputation": 195, "user_id": 2175208, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/OsNBR.jpg?s=128&g=1", "display_name": "CRogers", "link": "https://stackoverflow.com/users/2175208/crogers"}, "edited": false, "score": 0, "creation_date": 1498345968, "post_id": 43243172, "comment_id": 76464735, "body": "I am wondering something very similar."}, {"owner": {"reputation": 4197, "user_id": 6068294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-87QvRBEGz-U/AAAAAAAAAAI/AAAAAAAAKmA/840m-7K_5xU/photo.jpg?sz=128", "display_name": "Adrian Tompkins", "link": "https://stackoverflow.com/users/6068294/adrian-tompkins"}, "edited": false, "score": 0, "creation_date": 1518092559, "post_id": 43243172, "comment_id": 84368045, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33789379/netcdf-and-python-finding-the-closest-lon-lat-index-given-actual-lon-lat-values\">NetCDF and Python: Finding the closest lon/lat index given actual lon/lat values</a>"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 6562257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoBqI.jpg?s=128&g=1", "display_name": "harmony", "link": "https://stackoverflow.com/users/6562257/harmony"}, "is_accepted": false, "score": 0, "last_activity_date": 1503691237, "creation_date": 1503691237, "answer_id": 45888642, "question_id": 43243172, "link": "https://stackoverflow.com/questions/43243172/indices-of-2d-lat-lon-data/45888642#45888642", "title": "indices of 2D lat lon data", "body": "<p>I found scipy  spatial.KDTree can perform similar task. Here is my code of finding the model grid that is closest to the observation location </p>\n\n<pre><code>from scipy import spatial\nfrom netCDF4 import Dataset\n\n# read in the one dimensional lat lon info from a dataset\nfname = '0k_T_ann_clim.nc'  \nfid   = Dataset(fname, 'r')\n\nlat  = fid.variables['lat'][:] \nlon  = fid.variables['lon'][:]\n# make them a meshgrid for later use KDTree\nlon2d, lat2d = np.meshgrid(lon, lat)\n# zip them together\nmodel_grid = list( zip(np.ravel(lon2d), np.ravel(lat2d)) ) \n\n#target point location : 30.5N, 56.1E\ntarget_pts = [30.5 56.1]   \ndistance, index = spatial.KDTree(model_grid).query(target_pts)\n# the nearest model location (in lat and lon)\nmodel_loc_coord = [coord for i, coord in enumerate(model_grid) if i==index]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4197, "user_id": 6068294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-87QvRBEGz-U/AAAAAAAAAAI/AAAAAAAAKmA/840m-7K_5xU/photo.jpg?sz=128", "display_name": "Adrian Tompkins", "link": "https://stackoverflow.com/users/6068294/adrian-tompkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1515495938, "creation_date": 1515495938, "answer_id": 48166801, "question_id": 43243172, "link": "https://stackoverflow.com/questions/43243172/indices-of-2d-lat-lon-data/48166801#48166801", "title": "indices of 2D lat lon data", "body": "<p>I'm not sure how lon/lat arrays are stored when read in python, so to use the following solution you may need to convert lon/lat to numpy arrays.  You can just put the abs(array-target).argmin() in a function.</p>\n\n<pre><code>import numpy as np\n\n# make a dummy longitude array, 0.5 degree resolution.\nlon=np.linspace(0.5,360,720)\n\n# find index of nearest longitude to 25.4 \nind=abs(lon-25.4).argmin()\n\n# check it works!  this gives 25.5 \nlon[ind]  \n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 6610946, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/116d123d9bd9b2c1ac5b76f896df6775?s=128&d=identicon&r=PG&f=1", "display_name": "pwprnt", "link": "https://stackoverflow.com/users/6610946/pwprnt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1766, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515495938, "creation_date": 1491434405, "question_id": 43243172, "link": "https://stackoverflow.com/questions/43243172/indices-of-2d-lat-lon-data", "title": "indices of 2D lat lon data", "body": "<p>I am trying to find the equivalent (if there exists one) of an NCL function that returns the indices of two-dimensional latitude/longitude arrays closest to a user-specified latitude/longitude coordinate pair.</p>\n\n<p>This is the link to the NCL function that I am hoping there is an equivalent to in python.  I'm suspecting at this point that there is not, so any tips on how to get indices from lat/lon coordinates is appreciated</p>\n\n<p><a href=\"https://www.ncl.ucar.edu/Document/Functions/Contributed/getind_latlon2d.shtml\" rel=\"nofollow noreferrer\">https://www.ncl.ucar.edu/Document/Functions/Contributed/getind_latlon2d.shtml</a></p>\n\n<p>Right now , I have my coordinate values saved into an .nc file and are read by:</p>\n\n<pre><code>coords='coords.nc'\nfh = Dataset(coords, mode='r')\nlons = fh.variables['g5_lon_1'][:,:]\nlats = fh.variables['g5_lat_0'][:,:]\nrot = fh.variables['g5_rot_2'][:,:]\nfh.close()\n</code></pre>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1491435141, "post_id": 43243121, "comment_id": 73556574, "body": "Do you really need a list of single-entry dictionaries?  This makes things more difficult.  Why not just have <b>&quot;items&quot; : {&quot;potion&quot; : 1, &quot;potion2&quot; : 1}</b> so that you could retrieve them by name?"}], "answers": [{"tags": [], "owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": true, "score": 0, "last_activity_date": 1491435347, "last_edit_date": 1491435347, "creation_date": 1491434489, "answer_id": 43243185, "question_id": 43243121, "link": "https://stackoverflow.com/questions/43243121/getting-an-dict-by-name-with-in-a-list-with-an-element-key-within-a-variable/43243185#43243185", "title": "Getting an dict by name with in a list with an element key within a variable", "body": "<p>I'm assuming you don't want to provide the index because hard coding it will not work in all circumstances.</p>\n\n<p>You can just pull out any items in the list which have that key.</p>\n\n<p>Build a list of any items, which have that key. It might ordinarily be just one, but the container itself does not enforce that only one entry can have that key.</p>\n\n<p>After that you can either iterate over the list or check if the returned value is empty and just take the first element.</p>\n\n<pre><code>&gt;&gt;&gt; data = {'items': [{'potion': 1}, {'potion2': 1}]}\n&gt;&gt;&gt; e = filter(lambda i: 'potion' in i, data['items'])\n&gt;&gt;&gt; for i in e:\n...     print(i['potion'])\n... \n1\n</code></pre>\n\n<p>Or to pull out only the first element. I realize you said no indices, but this index is applied to the filtered list and we check that its not empty first, so it's a valid thing to do.</p>\n\n<pre><code>&gt;&gt;&gt; if e:\n...     print(e[0]['potion'])\n... \n1\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 4570083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NPjDz.jpg?s=128&g=1", "display_name": "NekoTony", "link": "https://stackoverflow.com/users/4570083/nekotony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 43243185, "answer_count": 1, "score": 0, "last_activity_date": 1491435347, "creation_date": 1491434080, "question_id": 43243121, "link": "https://stackoverflow.com/questions/43243121/getting-an-dict-by-name-with-in-a-list-with-an-element-key-within-a-variable", "title": "Getting an dict by name with in a list with an element key within a variable", "body": "<pre><code>data = {\n  \"items\" : [{\"potion\" : 1}, {\"potion2\" : 1}]\n}\n\nprint(data[\"items\"][0][\"potion\"])\n</code></pre>\n\n<p>So, here's the jiz. I want to get potion2 without providing number like <code>[0]</code> but i can't because some variables has 5 items within the list while another one might have 3 items so providing a number might not giving me what i need. Is there a way to get <code>potion2</code> without providing that number before it?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491434272, "post_id": 43243106, "comment_id": 73556351, "body": "&quot;but since i am using way more numpy.ndarrays than the one in the example, i converted the list into a numpy.arrays to make this a bit faster&quot; - appending arrays one at a time is one of the few instances where you actually should stick with a list, at least until you&#39;re done appending."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491434511, "post_id": 43243106, "comment_id": 73556404, "body": "<code>np.concatenate</code> doesn&#39;t actually do anything to its inputs. It builds a new array, which you ignore and discard."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491434611, "post_id": 43243106, "comment_id": 73556433, "body": "Most of this code looks pretty pointless. It looks like you could just work with one array instead of a list and make a few <code>reshape</code> and <code>swapaxes</code> calls instead of trying to do any concatenation."}, {"owner": {"reputation": 3, "user_id": 7822023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b886e17be6e5f4c3184c3ce23b139e4c?s=128&d=identicon&r=PG&f=1", "display_name": "paithon", "link": "https://stackoverflow.com/users/7822023/paithon"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491434632, "post_id": 43243106, "comment_id": 73556441, "body": "@user2357112 fixed it.. = still not working. I am not sure i understand why i should stick to it?..  If numpy does it faster?"}, {"owner": {"reputation": 3, "user_id": 7822023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b886e17be6e5f4c3184c3ce23b139e4c?s=128&d=identicon&r=PG&f=1", "display_name": "paithon", "link": "https://stackoverflow.com/users/7822023/paithon"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491434850, "post_id": 43243106, "comment_id": 73556506, "body": "I am not sure i understand what kind of solution your are suggesting.. \t @user2357112 .. A better solution would also be better."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1491434891, "post_id": 43243106, "comment_id": 73556515, "body": "I recommended list appends for a reason: <a href=\"http://stackoverflow.com/a/43238729/901925\">stackoverflow.com/a/43238729/901925</a>"}], "owner": {"reputation": 3, "user_id": 7822023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b886e17be6e5f4c3184c3ce23b139e4c?s=128&d=identicon&r=PG&f=1", "display_name": "paithon", "link": "https://stackoverflow.com/users/7822023/paithon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491434597, "creation_date": 1491433977, "last_edit_date": 1491434597, "question_id": 43243106, "link": "https://stackoverflow.com/questions/43243106/why-is-the-array-in-the-list-not-getting-bigger", "title": "Why is the array in the list not getting bigger?", "body": "<p>I am currently trying to append <code>numpy.arrays</code> to a <code>numpy.array</code> of <code>numpy.arrays</code>, but for some reason is the dimension it was supposed to increase in not increasing. </p>\n\n<p>I made a prior post about the same but for <code>list</code> of of <code>numpy.arrays</code>, which worked, but since i am using way more <code>numpy.ndarrays</code> than the one in the example, i converted the list into a <code>numpy.arrays</code> to make this a bit faster - the container has the shape (72,0,78,3). </p>\n\n<p>Example: </p>\n\n<pre><code>import numpy as np\n\nnano_train_input = []\nfor i in range(974):\n    nano_train_input.append(np.random.random((78,72,3)))\n\ninput_train = np.array([np.empty((0,78,3)) for i in range(72)])\n\nprint input_train.shape\nraw_input(\"sadasd...\")\n#print nano_train_input.shape\ni = 0\nj = 0\nfor train in nano_train_input:\n    for row in train.reshape(72,78,3):\n        #print row.reshape(1,78,3).shape\n        input_train[i]= np.concatenate((input_train[i],row.reshape(1,78,3)),axis=0)\n        i = i+1\n        print input_train[0].shape\n    i=0\n\nprint input_train[0].shape\n</code></pre>\n\n<p>Problem is that after the concatenate is input_train[0].shape still (0,78,3) and not the desired (974,78,3)... how do i fix that?</p>\n\n<p>I intend on converting the input_train to a list, but should be possible with <code>numpy.tolist()</code></p>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 4, "creation_date": 1491433671, "post_id": 43243048, "comment_id": 73556195, "body": "No. You inherit only from the parent, not from your siblings."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1491433778, "post_id": 43243048, "comment_id": 73556215, "body": "Sounds like a design-flaw."}, {"owner": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "edited": false, "score": 0, "creation_date": 1491434132, "post_id": 43243048, "comment_id": 73556311, "body": "Out of interest - if you need a method accessible from both A and B, why wouldn&#39;t you put it in Base?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1491436509, "post_id": 43243048, "comment_id": 73556924, "body": "Any code can call a method from class <code>B</code>, as long as it&#39;s calling it on a <code>B</code> object. It doesn&#39;t need to be a sibling class."}], "answers": [{"comments": [{"owner": {"reputation": 37665, "user_id": 521034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1e92d5a4154a59c4dfb3217067fa74?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/521034/keith"}, "edited": false, "score": 1, "creation_date": 1491434036, "post_id": 43243088, "comment_id": 73556284, "body": "While you can do this, we would have to question the wisdom of this design."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 37665, "user_id": 521034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1e92d5a4154a59c4dfb3217067fa74?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/521034/keith"}, "edited": false, "score": 0, "creation_date": 1491434418, "post_id": 43243088, "comment_id": 73556385, "body": "That depends on the application.  I&#39;ve had designs with interactions among related items, in which I needed to grab information from a support object.  In most cases, it&#39;s better to put such a method in the parent class, but ... well, teammates can decide otherwise.  :-)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1491436450, "post_id": 43243088, "comment_id": 73556911, "body": "The fact that the classes are siblings is irrelevant in the first case. Any code can call <code>B_Object.B_method()</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1491436636, "post_id": 43243088, "comment_id": 73556970, "body": "Right.  Just trying to anticipate what OP might be trying to accomplish."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1491492553, "post_id": 43243088, "comment_id": 73587644, "body": "When you get to a resolution, please remember to up-vote useful things and accept your favourite answer (even if you have to write it yourself), so Stack Overflow can properly archive the question."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1491433877, "creation_date": 1491433877, "answer_id": 43243088, "question_id": 43243048, "link": "https://stackoverflow.com/questions/43243048/python-is-it-possible-to-call-a-method-from-a-sibling-class/43243088#43243088", "title": "Python: Is it possible to call a method from a &#39;sibling&#39; class?", "body": "<p>Yes, so long as you're applying it to an object of type <strong>B</strong>.  This means that you'd need something like</p>\n\n<pre><code>Class A(parent):\n    ...\n\ndef sibling_rivalry(self, B_object):\n    ...\n    B_object.B_method()\n</code></pre>\n\n<p>You <em>cannot</em> apply a method of type <strong>B</strong> to an object of type <strong>A</strong>.  For instance, in the above method <strong>sibling_rivalry</strong>,</p>\n\n<pre><code>    self.B_method()\n</code></pre>\n\n<p>is simply not a valid reference.</p>\n"}], "owner": {"reputation": 21, "user_id": 7032736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa8c4815fdcc848df48e54b10187e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "Roy", "link": "https://stackoverflow.com/users/7032736/roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 1, "accepted_answer_id": 43243088, "answer_count": 1, "score": 1, "last_activity_date": 1491433877, "creation_date": 1491433549, "question_id": 43243048, "link": "https://stackoverflow.com/questions/43243048/python-is-it-possible-to-call-a-method-from-a-sibling-class", "title": "Python: Is it possible to call a method from a &#39;sibling&#39; class?", "body": "<p>I have done a bit of research and I can't seem to find an answer, maybe I missed something obvious.</p>\n\n<p>So, if I have a class named <em>'Base'</em> and two classes: <em>'A'</em> and <em>'B'</em> inherit from it, can I call a method from class <em>'B'</em> within class <em>'A'</em>?</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1491441378, "post_id": 43243021, "comment_id": 73558118, "body": "Can you attach sample images for all the three cases: <code>No warning, too bright, too dark</code>"}, {"owner": {"reputation": 1335, "user_id": 3763732, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/030dfac3e67d9b4c2858ab78895d208b?s=128&d=identicon&r=PG&f=1", "display_name": "AutomaticStatic", "link": "https://stackoverflow.com/users/3763732/automaticstatic"}, "reply_to_user": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1491444599, "post_id": 43243021, "comment_id": 73558982, "body": "@ZdaR Unfortunately, no."}, {"owner": {"reputation": 381, "user_id": 7892212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ciIt.jpg?s=128&g=1", "display_name": "mohamed_abdullah", "link": "https://stackoverflow.com/users/7892212/mohamed-abdullah"}, "edited": false, "score": 0, "creation_date": 1584448439, "post_id": 43243021, "comment_id": 107434475, "body": "@ AutomaticStatic I have the same problem. did you find a solution for it?"}], "owner": {"reputation": 1335, "user_id": 3763732, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/030dfac3e67d9b4c2858ab78895d208b?s=128&d=identicon&r=PG&f=1", "display_name": "AutomaticStatic", "link": "https://stackoverflow.com/users/3763732/automaticstatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491444570, "creation_date": 1491433372, "last_edit_date": 1491444570, "question_id": 43243021, "link": "https://stackoverflow.com/questions/43243021/how-to-inspect-brightness-of-v-channel-with-opencv", "title": "How to inspect brightness of V channel with OpenCV?", "body": "<p>I need to find a way to evaluate the \"brightness\" of an image. We're running it through an OCR system that warns us if an image is too bright or dark, but I'm not sure what they're measuring exactly. I've assembled a set of test data divided into 3 categories: No warning, too bright, too dark. I figured I'd do something like convert the image to HSV and inspect the V channel. Frankly, I don't entirely know what I'm doing, and the OpenCV docs for Python are pretty opaque. I got as far as calculating a V channel histogram (although I'm not sure the args are correct): </p>\n\n<pre><code>def calc_hist(image_path):\n    image = cv2.imread(image_path)\n    image = imutils.resize(image, height=500)\n    hsv = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)\n    hist = cv2.calcHist([hsv], [2], None, [256], [0,256])\n    hist_array = hist.flatten()\n</code></pre>\n\n<p>Again, I'm not sure if inspecting the histogram is the right approach, but basically I'm trying to come up with some value that approximates \"brightness\" so I can compare these groups of images and try to find a range of values where our OCR software does not throw a warning.</p>\n\n<p>Assuming these are the right histograms, I went on to normalize them and compare the mean standard deviation.</p>\n"}, {"tags": ["python", "unit-testing", "mocking", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1491507863, "post_id": 43264377, "comment_id": 73597276, "body": "The questioner is not trying to patch the environment variable or <code>connect</code>. They&#39;re trying to patch <code>commit</code>."}, {"owner": {"reputation": 1968, "user_id": 4378118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8D5PM.jpg?s=128&g=1", "display_name": "Enrique Saez", "link": "https://stackoverflow.com/users/4378118/enrique-saez"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491508065, "post_id": 43264377, "comment_id": 73597423, "body": "@user2357112 I get yur point, I assumed that since it is a Unit Test you do not want to have external dependencies. That&#39;s why I proposed to both check that the <code>function call is schematically correct</code> and mocking the call to commit since <code>psycopg2.connect</code> call is a mock"}], "tags": [], "owner": {"reputation": 1968, "user_id": 4378118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8D5PM.jpg?s=128&g=1", "display_name": "Enrique Saez", "link": "https://stackoverflow.com/users/4378118/enrique-saez"}, "is_accepted": false, "score": -1, "last_activity_date": 1491516896, "last_edit_date": 1495540000, "creation_date": 1491507662, "answer_id": 43264377, "question_id": 43243001, "link": "https://stackoverflow.com/questions/43243001/mocking-only-one-function-of-a-class/43264377#43264377", "title": "Mocking Only One Function of a Class", "body": "<p>I assume you are using <a href=\"https://docs.pytest.org/en/latest/example/\" rel=\"nofollow noreferrer\">pytest</a> and it is not a good practice to name your functions starting with <code>test_</code> if they are not actual tests as this will probably raise problems with the testing framework. Therefore I slightly modified your initial snippet as follows and I named the module <code>psyco.py</code></p>\n\n<pre><code>import psycopg2\nimport os\n\ndef insert(a, b, c):\n    con = psycopg2.connect(os.environ['PGDB'])\n    import ipdb; ipdb.set_trace()\n    cur = con.cursor()\n    cur.execute('insert into test_table values ({a}, {b}, {c})'.format(a=a, b=b, c=c))\n    con.commit()\n    con.close()\n</code></pre>\n\n<p>Next, I created the test for your method by taking into account <a href=\"https://docs.python.org/3/library/unittest.mock.html\" rel=\"nofollow noreferrer\">how patch works</a> and <a href=\"https://docs.python.org/3/library/unittest.mock.html#where-to-patch\" rel=\"nofollow noreferrer\">where to patch</a>. As you are dealing with os environment variables <a href=\"https://stackoverflow.com/questions/31582750/python-mock-patch-os-environ-and-return-value\">this question</a> can help you understand why I mocked it that way.</p>\n\n<p>An example implementation of the test could be as follows:</p>\n\n<pre><code>from psyco import insert\nfrom unittest.mock import patch, Mock, MagicMock\nimport os\n\n@patch.dict(os.environ,{'PGDB':'db_url'})\n@patch('psycopg2.connect')\ndef test_insert_function(psycopg2_mock):\n\n    x = 1\n    y = 4\n    z = 'xyz'\n    sql_query = 'insert into test_table values ({0}, {1}, {2})'.format(x,y,z)\n    insert(x,y,z)\n    assert psycopg2_mock.return_value.cursor.call_count == 1\n    psycopg2_mock.return_value.cursor.return_value.execute.assert_called_with(sql_query)\n    assert psycopg2_mock.return_value.commit.call_count == 1\n    assert psycopg2_mock.return_value.close.call_count == 1\n</code></pre>\n"}], "owner": {"reputation": 5353, "user_id": 2055368, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/87fff166977c518f4a21ec46a787e947?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2055368/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 613, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491516896, "creation_date": 1491433208, "last_edit_date": 1491492857, "question_id": 43243001, "link": "https://stackoverflow.com/questions/43243001/mocking-only-one-function-of-a-class", "title": "Mocking Only One Function of a Class", "body": "<p>I would like to write a unit test that can ensure a SQL statement in a function call is schematically correct. It should test the execution of this call. I would then like to mock the call to commit, so that no insertions to the database take place. I'm using psycopg2 for my tests.</p>\n\n<p>I have a function like:</p>\n\n<pre><code>def test_insert(a, b, c):\n    con = psycopg2.connect(os.environ['PGDB'])\n    cur = con.cursor()\n    cur.execute('insert into test_table values ({a}, {b}, {c})'.format(a=a, b=b, c=c))\n    con.commit()\n    con.close()\n</code></pre>\n\n<p>when calling <code>test_insert(1,2,3)</code> I see the row inserted into the table. Now I try to mock the call. I've taken a few approaches so far:</p>\n\n<pre><code>@mock.patch('psycopg2.connect')\ndef test(mock_connect, a, b, c):\n    mock_con = mock_connect.return_value\n    mock_con.commit.return_value = None\n    insert_row(a, b, c)\n</code></pre>\n\n<p>This seems to work but does not actually call the execution statement. <code>test_insert(1,4,'xyz')</code> fails for instance while <code>test(1,4,'xyz')</code> does not. Next I tried to mock just the commit method of the connection class in psycopg2:</p>\n\n<pre><code>@mock.patch('psycopg2.extensions.connection.commit')\ndef test_insert(mock_commit, a, b, c):\n    mock_commit.return_value = None\n    insert_row(a,b,c)\n</code></pre>\n\n<p>but this gives me a syntax error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/home/a/.virtualenv/test/lib/python2.7/site-packages/mock/mock.py\", line 1318, in patched\n    patching.__exit__(*exc_info)\n  File \"/home/a/.virtualenv/test/lib/python2.7/site-packages/mock/mock.py\", line 1480, in __exit__\n    setattr(self.target, self.attribute, self.temp_original)\nTypeError: can't set attributes of built-in/extension type 'psycopg2.extensions.connection'\n</code></pre>\n\n<p>Is there a good way to do what I am trying to do?</p>\n"}, {"tags": ["python", "numpy", "matplotlib", "plot", "legend"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 7745793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d707ac90184fff9bddbbbdc3e80aaa57?s=128&d=identicon&r=PG&f=1", "display_name": "Thom Elliott", "link": "https://stackoverflow.com/users/7745793/thom-elliott"}, "edited": false, "score": 0, "creation_date": 1491494120, "post_id": 43245848, "comment_id": 73588905, "body": "Thanks very much, is there also a way to add the title? i cant see it in the documentation."}, {"owner": {"reputation": 52229, "user_id": 2937831, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/56c4053438af8e8b90d6f53cbb7573be?s=128&d=identicon&r=PG", "display_name": "jakevdp", "link": "https://stackoverflow.com/users/2937831/jakevdp"}, "reply_to_user": {"reputation": 167, "user_id": 7745793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d707ac90184fff9bddbbbdc3e80aaa57?s=128&d=identicon&r=PG&f=1", "display_name": "Thom Elliott", "link": "https://stackoverflow.com/users/7745793/thom-elliott"}, "edited": false, "score": 0, "creation_date": 1491500475, "post_id": 43245848, "comment_id": 73593001, "body": "Seaborn just wraps matplotlib, so you can just use <code>plt.title(&#39;My Title&#39;)</code>"}], "tags": [], "owner": {"reputation": 52229, "user_id": 2937831, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/56c4053438af8e8b90d6f53cbb7573be?s=128&d=identicon&r=PG", "display_name": "jakevdp", "link": "https://stackoverflow.com/users/2937831/jakevdp"}, "is_accepted": true, "score": 0, "last_activity_date": 1491453748, "creation_date": 1491453748, "answer_id": 43245848, "question_id": 43242964, "link": "https://stackoverflow.com/questions/43242964/plotting-a-legend-with-matplotlib-error/43245848#43245848", "title": "Plotting a legend with matplotlib: error", "body": "<p>Matplotlib's <code>label</code> argument is meant to be a single string that labels the entire dataset, rather than an array of individual labels for the points within the dataset. If you wish to pass an array of point-by-point labels that will be aggregated into a legend, the best option is probably the <a href=\"http://seaborn.pydata.org/\" rel=\"nofollow noreferrer\">Seaborn</a> library. Seaborn provides a wrapper around matplotlib for more convenient statistical visualization.</p>\n\n<p>This should do approximately what you wish to do with your data:</p>\n\n<pre><code>import seaborn\nseaborn.lmplot('Number of Sides', 'Largest Angle', hue='Label',\n               data=data_df, fit_reg=False)\n</code></pre>\n\n<p>I'd suggest checking out the <a href=\"http://seaborn.pydata.org/examples/\" rel=\"nofollow noreferrer\">seaborn example gallery</a> for more ideas.</p>\n"}], "owner": {"reputation": 167, "user_id": 7745793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d707ac90184fff9bddbbbdc3e80aaa57?s=128&d=identicon&r=PG&f=1", "display_name": "Thom Elliott", "link": "https://stackoverflow.com/users/7745793/thom-elliott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 43245848, "answer_count": 1, "score": 1, "last_activity_date": 1491453748, "creation_date": 1491432958, "question_id": 43242964, "link": "https://stackoverflow.com/questions/43242964/plotting-a-legend-with-matplotlib-error", "title": "Plotting a legend with matplotlib: error", "body": "<p>I am trying to add a legend to my graph in matplotlib. instead of creating a legend it puts the full list of all mylabels in the legend.</p>\n\n<p>My graph looks like this:\n<a href=\"https://i.stack.imgur.com/WtDCz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WtDCz.png\" alt=\"enter image description here\"></a></p>\n\n<p>The legend is cut off and i cant see more than that, i assume due to its size.</p>\n\n<p>This is my code:</p>\n\n<pre><code>features2 = [\"Number of Sides\"]\nfeatures3 = [\"Largest Angle\"]\nheader2 = [\"Label\"]\n\ndata_df = pd.DataFrame.from_csv(\"AllMixedShapes2.csv\")\nX1 = np.array(data_df[features2].values)\ny1 = np.array(data_df[features3].values)\nl = np.array(data_df[header2].values)\n\nplt.scatter(X1[:, 0],y1, c=y, cmap=plt.cm.Paired, label=l)\nplt.axis([0, 17, 0, 200])\nplt.ylabel(\"Maximum Angle (Degrees)\")\nplt.xlabel(\"Number Of Sides\")\nplt.title('Original 450 Test Shapes')\n\nplt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\nplt.show()\n</code></pre>\n\n<p>And AllMixedShapes2.csv looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ruMcv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ruMcv.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm quite new to python and machine learning and ive tried other examples but i cant get anything to work.</p>\n"}, {"tags": ["python", "numpy", "scipy", "statistics", "distribution"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7345804"}, "edited": false, "score": 0, "creation_date": 1491432918, "post_id": 43242877, "comment_id": 73555970, "body": "Can you show what your fit looks like?"}, {"owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1491433286, "post_id": 43242877, "comment_id": 73556095, "body": "Warren: I corrected the negatives, hope that helps. Mikey: I can upload an image of my fit shortly."}, {"owner": {"reputation": 7093, "user_id": 330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04dd8f05b03fb08b5d7ff058148eb13?s=128&d=identicon&r=PG", "display_name": "Glen_b", "link": "https://stackoverflow.com/users/330679/glen-b"}, "edited": false, "score": 0, "creation_date": 1491441157, "post_id": 43242877, "comment_id": 73558065, "body": "Are your y-values scaled counts?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1491439020, "post_id": 43243407, "comment_id": 73557579, "body": "Thanks, this looks promising. I am trying reproduce what you have created and fit gamma, any chance you can paste the code?"}, {"owner": {"reputation": 7093, "user_id": 330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04dd8f05b03fb08b5d7ff058148eb13?s=128&d=identicon&r=PG", "display_name": "Glen_b", "link": "https://stackoverflow.com/users/330679/glen-b"}, "reply_to_user": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1491439792, "post_id": 43243407, "comment_id": 73557779, "body": "@zad I didn&#39;t do that in Python... all I did was regress log(y) on x and log(x) to get the coefficients for a gamma curve (scaled gamma density). If R code would help you, I could paste that but I don&#39;t think it will tell you anything useful beyond what I just said in words. The principle is the same in whatever language."}], "tags": [], "owner": {"reputation": 7093, "user_id": 330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04dd8f05b03fb08b5d7ff058148eb13?s=128&d=identicon&r=PG", "display_name": "Glen_b", "link": "https://stackoverflow.com/users/330679/glen-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1491440324, "last_edit_date": 1491440324, "creation_date": 1491436085, "answer_id": 43243407, "question_id": 43242877, "link": "https://stackoverflow.com/questions/43242877/fitting-a-lognormal-distribution-in-python-using-curve-fit/43243407#43243407", "title": "Fitting a Lognormal Distribution in Python using CURVE_FIT", "body": "<p>Note that if a lognormal curve is correct and you take logs of both variables, you should have a quadratic relationship; even if that's not a suitable scale for a final model (because of variance effects -- if your variance is near constant on the original scale it will overweight the small values) it should at least give a good starting point for a nonlinear fit.</p>\n\n<p>Indeed aside from the first two points this looks fairly good:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XdrWl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XdrWl.png\" alt=\"plot on log-log scale showing near-quadratic relationship\"></a></p>\n\n<p>-- a quadratic fit to the solid points would describe that data quite well and should give suitable starting values if you then want to do a nonlinear fit.</p>\n\n<p>(If error in x is at all possible, the lack of fit at the lowest x may be as much issues with error in x as error in y)</p>\n\n<p>Incidentally, that plot seems to hint that a <em>gamma</em> curve may fit a little better overall than a lognormal one (in particular if you <em>don't</em> want to reduce the impact of those first two points relative to points 4-6). A good initial fit for that can be had by regressing log(y) on x and log(x):</p>\n\n<p><a href=\"https://i.stack.imgur.com/SbeX3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SbeX3.png\" alt=\"fit of gamma curve on log-log scale\"></a></p>\n\n<p>The scaled gamma density is g = c.x^(a-1) exp(-bx) ... taking logs, you get log(g) = log(c) + (a-1) log(x) - b x = b0 + b1 log(x) + b2 x  ... so supplying log(x) and x to a linear regression routine will fit that. The same caveats about variance effects apply (so it might be best as a starting point for a nonlinear least squares fit if your relative error in y isn't nearly constant).</p>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 1, "last_activity_date": 1491439582, "creation_date": 1491439582, "answer_id": 43243859, "question_id": 43242877, "link": "https://stackoverflow.com/questions/43242877/fitting-a-lognormal-distribution-in-python-using-curve-fit/43243859#43243859", "title": "Fitting a Lognormal Distribution in Python using CURVE_FIT", "body": "<p>Discrete distribution might look better - your <code>x</code> are all integers after all. You have distribution with variance about 3 times higher than mean, asymmetric - so most likely something like <a href=\"https://en.wikipedia.org/wiki/Negative_binomial_distribution\" rel=\"nofollow noreferrer\">Negative Binomial</a> might work quite well. Here is quick fit</p>\n\n<p><a href=\"https://i.stack.imgur.com/Jnf9Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jnf9Q.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>r</code> is a bit above 6, so you might want to move to distribution with real <code>r</code> - Polya distribution.</p>\n\n<p>Code</p>\n\n<pre><code>from scipy.misc import comb\n\nimport matplotlib.pyplot as plt\n\ny_axis = [0.00032425299473065838, 0.00063714106162861229, 0.00027009331177605913, 0.00096672396877715144, 0.002388766809835889, 0.0042233337680543182, 0.0053072824980722137, 0.0061291327849408699, 0.0064555344006149871, 0.0065601228278316746, 0.0052574034010282218, 0.0057924488798939255, 0.0048154093097913355, 0.0048619350036057446, 0.0048154093097913355, 0.0045114840997070331, 0.0034906838696562147, 0.0040069911024866456, 0.0027766995669134334, 0.0016595801819374015, 0.0012182145074882836, 0.00098231827111984341, 0.00098231827111984363, 0.0012863691645616997, 0.0012395921040321833, 0.00093554121059032721, 0.0012629806342969417, 0.0010057068013846018, 0.0006081017868837127, 0.00032743942370661445, 4.6777060529516312e-05, 7.0165590794274467e-05, 7.0165590794274467e-05, 4.6777060529516745e-05]\nx_axis = [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0]\n\n## y_axis values must be normalised\nsum_ys = sum(y_axis)\n\n# normalize to 1\ny_axis = [_/sum_ys for _ in y_axis]\n\ns = 1.0 # shift by 1 to have them all at 0\nm = 0.0\nfor k in range(0, len(x_axis)):\n    m += y_axis[k] * (x_axis[k] - s)\n\nv = 0.0\nfor k in range(0, len(x_axis)):\n    t = (x_axis[k] - s - m)\n    v += y_axis[k] * t * t\n\nprint(m, v)\n\np = 1.0 - m/v\nr = int(m*(1.0 - p) / p)\n\nprint(p, r)\n\nz = []\nfor k in range(0, len(x_axis)):\n    q = comb(k + r - 1, k) * (1.0 - p)**r * p**k\n    z.append(q)\n\nplt.plot(x_axis, y_axis, 'ro')\nplt.plot(x_axis, z, 'b*')\nplt.axis([0, 35, 0, .1])\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": true, "score": 2, "last_activity_date": 1491441958, "creation_date": 1491441958, "answer_id": 43244172, "question_id": 43242877, "link": "https://stackoverflow.com/questions/43242877/fitting-a-lognormal-distribution-in-python-using-curve-fit/43244172#43244172", "title": "Fitting a Lognormal Distribution in Python using CURVE_FIT", "body": "<p>Actually, <a href=\"https://en.wikipedia.org/wiki/Gamma_distribution\" rel=\"nofollow noreferrer\">Gamma distribution</a> might be good fit as @Glen_b proposed. I'm using second definition with \\alpha and \\beta. </p>\n\n<p>NB: trick I use for a quick fit is to compute mean and variance and for typical two-parametric distribution it is enough to recover parameters and get quick idea if it is good fit or not.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RIM5z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RIM5z.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code</p>\n\n<pre><code>import math\nfrom scipy.misc import comb\n\nimport matplotlib.pyplot as plt\n\ny_axis = [0.00032425299473065838, 0.00063714106162861229, 0.00027009331177605913, 0.00096672396877715144, 0.002388766809835889, 0.0042233337680543182, 0.0053072824980722137, 0.0061291327849408699, 0.0064555344006149871, 0.0065601228278316746, 0.0052574034010282218, 0.0057924488798939255, 0.0048154093097913355, 0.0048619350036057446, 0.0048154093097913355, 0.0045114840997070331, 0.0034906838696562147, 0.0040069911024866456, 0.0027766995669134334, 0.0016595801819374015, 0.0012182145074882836, 0.00098231827111984341, 0.00098231827111984363, 0.0012863691645616997, 0.0012395921040321833, 0.00093554121059032721, 0.0012629806342969417, 0.0010057068013846018, 0.0006081017868837127, 0.00032743942370661445, 4.6777060529516312e-05, 7.0165590794274467e-05, 7.0165590794274467e-05, 4.6777060529516745e-05]\nx_axis = [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0]\n\n## y_axis values must be normalised\nsum_ys = sum(y_axis)\n\n# normalize to 1\ny_axis = [_/sum_ys for _ in y_axis]\n\nm = 0.0\nfor k in range(0, len(x_axis)):\n    m += y_axis[k] * x_axis[k]\n\nv = 0.0\nfor k in range(0, len(x_axis)):\n    t = (x_axis[k] - m)\n    v += y_axis[k] * t * t\n\nprint(m, v)\n\nb = m/v\na = m * b\n\nprint(a, b)\n\nz = []\nfor k in range(0, len(x_axis)):\n    q = b**a * x_axis[k]**(a-1.0) * math.exp( - b*x_axis[k] ) / math.gamma(a)\n    z.append(q)\n\nplt.plot(x_axis, y_axis, 'ro')\nplt.plot(x_axis, z, 'b*')\nplt.axis([0, 35, 0, .1])\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 14246345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JRZGm.png?s=128&g=1", "display_name": "Jean A.", "link": "https://stackoverflow.com/users/14246345/jean-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1604670496, "creation_date": 1604670496, "answer_id": 64715823, "question_id": 43242877, "link": "https://stackoverflow.com/questions/43242877/fitting-a-lognormal-distribution-in-python-using-curve-fit/64715823#64715823", "title": "Fitting a Lognormal Distribution in Python using CURVE_FIT", "body": "<p>In Python, I explained a trick <a href=\"https://stackoverflow.com/questions/46036694/creating-a-best-fit-probability-distribution-from-pdf-sample-coordinates-with-sc/64715089#64715089\">here</a> of how to fit a LogNormal very simply using <a href=\"http://openturns.org\" rel=\"nofollow noreferrer\">OpenTURNS</a> library:</p>\n<pre><code>import openturns as ot\n\nn_times = [int(y_axis[i] * N) for i in range(len(y_axis))]\nS = np.repeat(x_axis, n_times)\n\nsample = ot.Sample([[p] for p in S])\nfitdist = ot.LogNormalFactory().buildAsLogNormal(sample)\n</code></pre>\n<p>That's it!</p>\n<p><code>print(fitdist)</code> will show you <code>&gt;&gt;&gt; LogNormal(muLog = 2.92142, sigmaLog = 0.305, gamma = -6.24996)</code></p>\n<p>and the fitting seems good:</p>\n<pre><code>import matplotlib.pyplot as plt\n\nplt.hist(S, density =True, color = 'grey', bins = 34, alpha = 0.5)\nplt.scatter(x_axis, y_axis, color= 'red')\nplt.plot(x_axis, fitdist.computePDF(ot.Sample([[p] for p in x_axis])), color = 'black')\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/5OTIR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5OTIR.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3430, "favorite_count": 0, "accepted_answer_id": 43244172, "answer_count": 4, "score": 5, "last_activity_date": 1604670496, "creation_date": 1491432463, "last_edit_date": 1491434920, "question_id": 43242877, "link": "https://stackoverflow.com/questions/43242877/fitting-a-lognormal-distribution-in-python-using-curve-fit", "title": "Fitting a Lognormal Distribution in Python using CURVE_FIT", "body": "<p>I have a hypothetical y function of x and trying to find/fit a lognormal distribution curve that would shape over the data best. I am using curve_fit function and was able to fit normal distribution, but the curve does not look optimized. </p>\n\n<p>Below are the give y and x data points where y = f(x).</p>\n\n<pre><code>y_axis = [0.00032425299473065838, 0.00063714106162861229, 0.00027009331177605913, 0.00096672396877715144, 0.002388766809835889, 0.0042233337680543182, 0.0053072824980722137, 0.0061291327849408699, 0.0064555344006149871, 0.0065601228278316746, 0.0052574034010282218, 0.0057924488798939255, 0.0048154093097913355, 0.0048619350036057446, 0.0048154093097913355, 0.0045114840997070331, 0.0034906838696562147, 0.0040069911024866456, 0.0027766995669134334, 0.0016595801819374015, 0.0012182145074882836, 0.00098231827111984341, 0.00098231827111984363, 0.0012863691645616997, 0.0012395921040321833, 0.00093554121059032721, 0.0012629806342969417, 0.0010057068013846018, 0.0006081017868837127, 0.00032743942370661445, 4.6777060529516312e-05, 7.0165590794274467e-05, 7.0165590794274467e-05, 4.6777060529516745e-05]\n</code></pre>\n\n<p>y-axis are probabilities of an event occurring in x-axis time bins:</p>\n\n<pre><code>x_axis = [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0]\n</code></pre>\n\n<p>I was able to get a better fit on my data using excel and lognormal approach. When I attempt to use lognormal in python, the fit does not work and I am doing something wrong. </p>\n\n<p>Below is the code I have for fitting a normal distribution, which seems to be the only one that I can fit in python (hard to believe):</p>\n\n<pre><code>#fitting distributino on top of savitzky-golay\n%matplotlib inline\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport scipy\nimport scipy.stats\nimport numpy as np\nfrom scipy.stats import gamma, lognorm, halflogistic, foldcauchy\nfrom scipy.optimize import curve_fit\n\nmatplotlib.rcParams['figure.figsize'] = (16.0, 12.0)\nmatplotlib.style.use('ggplot')\n# results from savgol\nx_axis = [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0,     13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0]\ny_axis = [0.00032425299473065838, 0.00063714106162861229, 0.00027009331177605913, 0.00096672396877715144, 0.002388766809835889, 0.0042233337680543182, 0.0053072824980722137, 0.0061291327849408699, 0.0064555344006149871, 0.0065601228278316746, 0.0052574034010282218, 0.0057924488798939255, 0.0048154093097913355, 0.0048619350036057446, 0.0048154093097913355, 0.0045114840997070331, 0.0034906838696562147, 0.0040069911024866456, 0.0027766995669134334, 0.0016595801819374015, 0.0012182145074882836, 0.00098231827111984341, 0.00098231827111984363, 0.0012863691645616997, 0.0012395921040321833, 0.00093554121059032721, 0.0012629806342969417, 0.0010057068013846018, 0.0006081017868837127, 0.00032743942370661445, 4.6777060529516312e-05, 7.0165590794274467e-05, 7.0165590794274467e-05, 4.6777060529516745e-05]\n\n## y_axis values must be normalised\nsum_ys = sum(y_axis)\n\n# normalize to 1\ny_axis = [_/sum_ys for _ in y_axis]\n\n# def gamma_f(x, a, loc, scale):\n#     return gamma.pdf(x, a, loc, scale)\n\ndef norm_f(x, loc, scale):\n#     print 'loc: ', loc, 'scale: ', scale, \"\\n\"\n    return norm.pdf(x, loc, scale)\n\nfitting = norm_f\n\n# param_bounds = ([-np.inf,0,-np.inf],[np.inf,2,np.inf])\nresult = curve_fit(fitting, x_axis, y_axis)\nresult_mod = result\n\n# mod scale\n# results_adj  = [result_mod[0][0]*.75, result_mod[0][1]*.85]\n\nplt.plot(x_axis, y_axis, 'ro')\nplt.bar(x_axis, y_axis, 1, alpha=0.75)\nplt.plot(x_axis, [fitting(_, *result[0]) for _ in x_axis], 'b-')\nplt.axis([0,35,0,.1])\n\n# convert back into probability\ny_norm_fit = [fitting(_, *result[0]) for _ in x_axis]\ny_fit = [_*sum_ys for _ in y_norm_fit]\nprint list(y_fit)\n\nplt.show()\n</code></pre>\n\n<p>I am trying to get answers two questions:</p>\n\n<ol>\n<li>Is this the best fit I will get from normal distribution curve? How can I imporve my the fit?</li>\n</ol>\n\n<p>Normal distribution result:\n<a href=\"https://i.stack.imgur.com/dpLeM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dpLeM.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"2\">\n<li>How can I fit a lognormal distribution to this data or is there a better distribution that I can use?</li>\n</ol>\n\n<p>I was playing around with lognormal distribution curve adjust mu and sigma, it looks like that there is possible a better fit. I don't understand what I am doing wrong to get similar results in python.</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1491433956, "post_id": 43242849, "comment_id": 73556270, "body": "what&#39;s your purpose now?  It doesn&#39;t make sense since you edited your original post"}], "answers": [{"tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 1, "last_activity_date": 1491432581, "creation_date": 1491432581, "answer_id": 43242902, "question_id": 43242849, "link": "https://stackoverflow.com/questions/43242849/how-can-i-start-at-a-line-with-a-csv-file-in-python/43242902#43242902", "title": "How can i start at a line with a csv file in python?", "body": "<p>Use <code>enumerate()</code> you can have the line number as below, by default the count <code>start</code> is starting from 0, you can force it starting from 1: </p>\n\n<pre><code>for line_number, line in enumerate(reader,start=1):\n    if line_number &gt; 3:\n        print(line)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": false, "score": 0, "last_activity_date": 1491432658, "creation_date": 1491432658, "answer_id": 43242912, "question_id": 43242849, "link": "https://stackoverflow.com/questions/43242849/how-can-i-start-at-a-line-with-a-csv-file-in-python/43242912#43242912", "title": "How can i start at a line with a csv file in python?", "body": "<p>Using <a href=\"https://docs.python.org/3/library/functions.html#next\" rel=\"nofollow noreferrer\"><code>next</code></a> you can skip the first two lines by consuming them:</p>\n\n<pre><code>reader = csv.reader(f)\nnext(reader)\nnext(reader)\n\nfor line in reader:\n    print(line)\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 7691211, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/44f236d03aa4a70e79660b88c1be31b8?s=128&d=identicon&r=PG&f=1", "display_name": "davidjbeiler", "link": "https://stackoverflow.com/users/7691211/davidjbeiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491432928, "creation_date": 1491432320, "last_edit_date": 1491432928, "question_id": 43242849, "link": "https://stackoverflow.com/questions/43242849/how-can-i-start-at-a-line-with-a-csv-file-in-python", "title": "How can i start at a line with a csv file in python?", "body": "<pre><code>import glob\nimport csv\n\nwith open('last30daysdisabled.csv') as f:\n\n    reader = csv.reader(f)\n\n    for line in reader:\n        print(line)\n</code></pre>\n\n<p>How would i go about turning this into a list?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 7447711, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/06fc8aa94e57d803061286afdcd0f309?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael", "link": "https://stackoverflow.com/users/7447711/mikael"}, "is_accepted": false, "score": 0, "last_activity_date": 1491433089, "creation_date": 1491433089, "answer_id": 43242983, "question_id": 43242829, "link": "https://stackoverflow.com/questions/43242829/python-answer-not-splitting-right/43242983#43242983", "title": "Python, Answer not splitting right", "body": "<p>Considering that you have a giant string with all the digits.</p>\n\n<pre><code>container=[]\nyourstring=\"your string here\"\nfor i in range(len(yourstring)):\n    try:\n        container.append(yourstring [i:(i+2)])\n    except:\n        break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 716, "user_id": 6252310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a45399dc30d3398b07d7ef120b0e12?s=128&d=identicon&r=PG&f=1", "display_name": "jtmingus", "link": "https://stackoverflow.com/users/6252310/jtmingus"}, "is_accepted": true, "score": 1, "last_activity_date": 1491433152, "creation_date": 1491433152, "answer_id": 43242990, "question_id": 43242829, "link": "https://stackoverflow.com/questions/43242829/python-answer-not-splitting-right/43242990#43242990", "title": "Python, Answer not splitting right", "body": "<p>Your problem is in this section of your code:</p>\n\n<pre><code>    liste = tentative\n    for i in str(liste):\n        total = total + i\n        message = total\n</code></pre>\n\n<p>You are iterating through each letter of the last guess and just adding each digit. You should add a space as well. Instead, you could just do this:</p>\n\n<pre><code>message += str(tentative) + ' '\n</code></pre>\n\n<p><strong>However</strong>, that's not the most pythonic way to solve this problem. It would be better to keep track of all of your guesses. Then, when you print it out, you can join them as a string. Like this:</p>\n\n<pre><code>guesses.append(str(tentative))\n</code></pre>\n\n<p>and then when you want to print out the list, do this:</p>\n\n<pre><code>print ' '.join(guesses)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 7524933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/590ea9d1f454aaccdfb90e5c75b04334?s=128&d=identicon&r=PG&f=1", "display_name": "avodo", "link": "https://stackoverflow.com/users/7524933/avodo"}, "is_accepted": false, "score": 0, "last_activity_date": 1491433220, "creation_date": 1491433220, "answer_id": 43243004, "question_id": 43242829, "link": "https://stackoverflow.com/questions/43242829/python-answer-not-splitting-right/43243004#43243004", "title": "Python, Answer not splitting right", "body": "<p><code>tentative = int(input(\"Votre essai svp: \"))</code>, so tentative is the str representation of whatever number the usr inputed.</p>\n\n<p>When you do</p>\n\n<pre><code>    liste = tentative\n    for i in str(liste):\n        total = total + i\n        message = total\n</code></pre>\n\n<p>You are looping through every character of liste. </p>\n\n<p>If the second number the user input is 44 then on the first loop <code>i</code> is 4, total = \"4\" and message = \"4\". On the second loop, <code>i</code> is again 4, the total becomes \"44\" and message = \"44\"</p>\n\n<p>If the third number is 55, then on the first loop <code>i</code> = \"5\" and total = \"445\", and on the second loop total = \"4455\". When you 'add' characters you do not add a space in between them.</p>\n\n<p>To solve this, you could add a space yourself outside the for loop <code>total += \" \"</code>. </p>\n\n<p>Also, the <code>message</code> variable is redundant with <code>total</code></p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1491434960, "creation_date": 1491434960, "answer_id": 43243247, "question_id": 43242829, "link": "https://stackoverflow.com/questions/43242829/python-answer-not-splitting-right/43243247#43243247", "title": "Python, Answer not splitting right", "body": "<p>If you want a list of the numbers guessed by the player, then use a list.  Here is code where I have replaced <strong>total</strong> with a list, and removed one or two extra variables:</p>\n\n<pre><code>def devinettes():\n    nombre = random.randint(1, 100)\n    compteur = 1\n    total = []\n    premieressaie = \"\"\n    message = \"\"\n    print(\"J'ai choisi un nombre al\u00e9atoire de 1 \u00e0 100 inclusivement \\n\\\net je vous invite \u00e0 deviner de quel nombre il s'agit.\")\n    while True:\n        try:\n            tentative = int(input(\"Votre essai svp: \"))\n            total.append(tentative)\n            break\n        except ValueError:\n            print(\"Ceci n'est pas un nombre entier.\")\n    while tentative != nombre:\n        if tentative &lt; 0:\n            print(\"Bon, vous en avez assez, \u00e7a se voit...\")\n            sys.exit()\n        elif tentative &gt; nombre:\n            print(\"Trop grand! \")\n        elif tentative &lt; nombre:\n            print(\"Trop petit! \")\n        while True:\n            try:\n                tentative = int(input(\"Votre essai svp: \"))\n                break\n            except ValueError:\n                print(\"Ceci n'est pas un nombre entier.\")\n        compteur += 1\n        liste = tentative\n        total.append(tentative)\n\n    message = ' '.join([str(essai) for essai in total])\n    print(\"Bravo vous avez devinez mon choix apr\u00e8s\", \"\\x1b[0;33;40m\" + str(compteur) + \"\\x1b[0m\",\\\n\"\\x1b[0;33;40m\"+ \"essais!\" + \"\\x1b[0m\", \"\\nVos essais:\", message)\n    reessaie = recommence()\n    return reessaie\n</code></pre>\n\n<p>I've played two games with this, and it works correctly.  For instance:</p>\n\n<pre><code>J'ai choisi un nombre al\u00e9atoire de 1 \u00e0 100 inclusivement \net je vous invite \u00e0 deviner de quel nombre il s'agit.\nVotre essai svp: 50\nTrop petit! \nVotre essai svp: 75\nTrop petit! \nVotre essai svp: 88\nTrop grand! \nVotre essai svp: 81\nTrop grand! \nVotre essai svp: 78\nTrop petit! \nVotre essai svp: 79\nTrop petit! \nVotre essai svp: 80\nBravo vous avez devinez mon choix apr\u00e8s 7 essais! \nVos essais: 50 75 88 81 78 79 80\nRejouer (o/n) ? \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 7794569, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/707689f20d38ad4ef365aa07b12f92a6?s=128&d=identicon&r=PG&f=1", "display_name": "Isen", "link": "https://stackoverflow.com/users/7794569/isen"}, "is_accepted": false, "score": 1, "last_activity_date": 1491436067, "creation_date": 1491436067, "answer_id": 43243403, "question_id": 43242829, "link": "https://stackoverflow.com/questions/43242829/python-answer-not-splitting-right/43243403#43243403", "title": "Python, Answer not splitting right", "body": "<p>i've made it the simplest way possible and remove the for to just use this line like mentionned by  </p>\n\n<pre><code>message += str(tentative) + \" \"\n</code></pre>\n\n<p>It's working super fine and simple enough for what i have to do.</p>\n\n<p>Thanks everyone for the quick answer</p>\n"}], "owner": {"reputation": 79, "user_id": 7794569, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/707689f20d38ad4ef365aa07b12f92a6?s=128&d=identicon&r=PG&f=1", "display_name": "Isen", "link": "https://stackoverflow.com/users/7794569/isen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 43242990, "answer_count": 5, "score": 1, "last_activity_date": 1491438989, "creation_date": 1491432227, "last_edit_date": 1491438989, "question_id": 43242829, "link": "https://stackoverflow.com/questions/43242829/python-answer-not-splitting-right", "title": "Python, Answer not splitting right", "body": "<p>i have a little software made with python language.\nBehavior:</p>\n\n<ol>\n<li>Starts</li>\n<li>Choose a random number from 1 to 100</li>\n<li>ask me to input a try.</li>\n<li><p>It will output a messsage:</p>\n\n<ul>\n<li>4.1 It will print you the number of tries you've done</li>\n<li>4.2 it will print you all the entries of the user.</li>\n<li>4.3 It will ask you to replay again</li>\n</ul></li>\n</ol>\n\n<p>The problem is within the section 4.2 Where the print of all the input of the user are displayed like this</p>\n\n<pre><code>Vos essais: 33 44556677798082848687887079747271\n</code></pre>\n\n<p>Instead of </p>\n\n<pre><code>Vos essais: 33 44 55 66 77 79 80 82 84 86 87 88 70 79 74 72 71\n</code></pre>\n\n<p>I have tried everything to make it works but all the space im trying to add just separate each characters of the print. ( ive join join(). Split()) nothing seems to works fine.</p>\n\n<p>I know the full code is not professionnal, but I'm a beginner.</p>\n\n<pre><code>        liste = tentative\n        for i in str(liste):\n            total = total + i\n            message = total\n    print(\"Bravo vous avez devinez mon choix apr\u00e8s\", \"\\x1b[0;33;40m\" + str(compteur) + \"\\x1b[0m\",\\\n\"\\x1b[0;33;40m\"+ \"essais!\" + \"\\x1b[0m\", \"\\nVos essais:\", str(premieressaie), str(message))\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1491432560, "post_id": 43242777, "comment_id": 73555840, "body": "If you think of this in an abstract way, there are three locations where you can split the string which are independent of each other. So you can start by creating all possible lists of where the string should be split, e. g. <code>[True, False, False]</code> for <code>[&#39;B&#39;,&#39;ang&#39;]</code>. Then go from there with loops."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1491432595, "post_id": 43242777, "comment_id": 73555858, "body": "Please post your current code, including your best attempt at multiple splits."}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 6759898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/08a70b03b07d5dcac57d91494e723448?s=128&d=identicon&r=PG&f=1", "display_name": "Aman ", "link": "https://stackoverflow.com/users/6759898/aman"}, "edited": false, "score": 0, "creation_date": 1491434324, "post_id": 43243012, "comment_id": 73556362, "body": "The solution looks pretty elegant. I will try to understand how it is working."}, {"owner": {"reputation": 187400, "user_id": 43089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbdcba7870660c048cf9d6db74a3ef29?s=128&d=identicon&r=PG", "display_name": "Triptych", "link": "https://stackoverflow.com/users/43089/triptych"}, "reply_to_user": {"reputation": 333, "user_id": 6759898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/08a70b03b07d5dcac57d91494e723448?s=128&d=identicon&r=PG&f=1", "display_name": "Aman ", "link": "https://stackoverflow.com/users/6759898/aman"}, "edited": false, "score": 0, "creation_date": 1491434808, "post_id": 43243012, "comment_id": 73556492, "body": "Thanks - yeah play around! It&#39;s a nice problem to explore how recursion works."}], "tags": [], "owner": {"reputation": 187400, "user_id": 43089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbdcba7870660c048cf9d6db74a3ef29?s=128&d=identicon&r=PG", "display_name": "Triptych", "link": "https://stackoverflow.com/users/43089/triptych"}, "is_accepted": true, "score": 3, "last_activity_date": 1491433297, "creation_date": 1491433297, "answer_id": 43243012, "question_id": 43242777, "link": "https://stackoverflow.com/questions/43242777/splitting-a-word-into-all-possible-subwords-all-possible-combinations/43243012#43243012", "title": "Splitting a word into all possible &#39;subwords&#39; - All possible combinations", "body": "<p>Here ya go..</p>\n\n<pre><code>def combos(s):\n  if not s:\n    return\n  yield (s,)\n  for i in range(1, len(s)):\n    for c in combos(s[i:]):\n      yield (s[:i],) + c\n\nfor c in combos('Bang'):\n  print c\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>('Bang',)\n('B', 'ang')\n('B', 'a', 'ng')\n('B', 'a', 'n', 'g')\n('B', 'an', 'g')\n('Ba', 'ng')\n('Ba', 'n', 'g')\n('Ban', 'g')\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 6759898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/08a70b03b07d5dcac57d91494e723448?s=128&d=identicon&r=PG&f=1", "display_name": "Aman ", "link": "https://stackoverflow.com/users/6759898/aman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "accepted_answer_id": 43243012, "answer_count": 1, "score": 6, "last_activity_date": 1491433297, "creation_date": 1491431867, "last_edit_date": 1491433260, "question_id": 43242777, "link": "https://stackoverflow.com/questions/43242777/splitting-a-word-into-all-possible-subwords-all-possible-combinations", "title": "Splitting a word into all possible &#39;subwords&#39; - All possible combinations", "body": "<p>I am trying to split a word into subwords - all possible permutations. </p>\n\n<pre><code>Input: Bang\nOutput: [['B','ang'], ['Ba','ng'], ['Ban','g'], ['B','a','ng'], ['B','an','g'], ['Ba','n','g'], ['B','a','n','g']]\n</code></pre>\n\n<p>I hope I covered all possbile ways to arrange 'Bang'. I thought long about it but could not find a way.</p>\n\n<pre><code>list(permutations('Bang', 3))\n</code></pre>\n\n<p>Permutations method does not return the entire word. I can split into 2 words but unable to split a word into 3 or more(for a bigger word).</p>\n\n<p>Splitting into 2 words can be done using the below code which was suggested by one of the members. </p>\n\n<pre><code>[ [word[:i],word[i:]] for i in range(1,len(word))]\n</code></pre>\n"}, {"tags": ["python", "database", "insert"], "owner": {"reputation": 339, "user_id": 5882642, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/202d1963ca33998dea7d176aef7053fa?s=128&d=identicon&r=PG&f=1", "display_name": "glc78", "link": "https://stackoverflow.com/users/5882642/glc78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1491431535, "creation_date": 1491431535, "question_id": 43242717, "link": "https://stackoverflow.com/questions/43242717/python2-6-error-loading-data-into-influx-database", "title": "Python2.6 - Error loading data into Influx database", "body": "<p>I'm using python2.6 to load records into Influx database. This is my influx point:</p>\n\n<pre><code>influx_point = {\n  \"measurement\": \"%s\"%measurement,\n  \"tags\": {\n        \"domain\": \"%s\"%domain,\n        \"host\": \"%s.%s\"%(host,domain),\n        \"tag1\": \"\",\n        \"tag2\": \"\"\n        },\n  \"time\": timestamp,\n  \"fields\": {\n        \"value\": value\n        }\n  }\n</code></pre>\n\n<p>Tyep of <em>measurement</em> is string. And this is the error it returns:</p>\n\n<pre><code>errore:  400: {\"error\":\"field type conflict: input field \\\"value\\\" on measurement \\\"hsm.recall.succeeded\\\" is type float, already exists as type integer dropped=206\"}\n</code></pre>\n\n<p>Could someone explain me why?</p>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1491469061, "post_id": 43242660, "comment_id": 73569745, "body": "I fixed some indentation in your example, but left <code>remove_tag()</code> untouched, though it seems to have some errors as well. Could you check?"}], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 1384541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7755b40cfb93c34f1a278218f5a4614c?s=128&d=identicon&r=PG", "display_name": "edlee", "link": "https://stackoverflow.com/users/1384541/edlee"}, "is_accepted": true, "score": 0, "last_activity_date": 1491651140, "last_edit_date": 1491651140, "creation_date": 1491650748, "answer_id": 43293465, "question_id": 43242660, "link": "https://stackoverflow.com/questions/43242660/flask-sqlalchemy-many-to-many-staledataerror/43293465#43293465", "title": "Flask SQLAlchemy Many-to-Many StaleDataError", "body": "<p>Had an epiphany!</p>\n\n<blockquote>\n  <p>How did I get in the situation of a StaleDataError ?</p>\n</blockquote>\n\n<p>When testing my edit Post page I did many POST of the same post to the database. </p>\n\n<blockquote>\n  <p>Why does it match more than one row, when my query to .all() doesn't show multiple uses?</p>\n</blockquote>\n\n<p>My testing created multiple entries in the association table. In other words I had <code>(tag.id= 1, post.id=1)</code> multiple times.</p>\n\n<blockquote>\n  <p>How can I prevent this from happening?</p>\n</blockquote>\n\n<p>Add Unique Constraint to the association table to stop multiple entries to your DB. I also added checks in my view to stop multiple entries.    </p>\n\n<pre><code>tags = db.Table(\n    'tags',\n    db.Column('tag_id', db.Integer, db.ForeignKey('tag.id')),\n    db.Column('post_id', db.Integer, db.ForeignKey('posts.id')),\n    db.UniqueConstraint('tag_id', 'post_id', name='UC_tag_id_post_id')\n)\n</code></pre>\n\n<p>Migrate your DB. </p>\n\n<p>If your using SQlite and Alembic you will most likely encounter this error: \"No support for ALTER of constraints in SQLite dialect\". More on this issue can be found <a href=\"https://github.com/miguelgrinberg/Flask-Migrate/issues/61\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>In short, if this is a development Database it is easier to delete your DB. If your in a production environment, perhaps you should consider a data migration and switch to another engine.</p>\n"}, {"tags": [], "owner": {"reputation": 585, "user_id": 6146234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc6bb43005df20abb3b36b3f8fe0f?s=128&d=identicon&r=PG&f=1", "display_name": "penny chan", "link": "https://stackoverflow.com/users/6146234/penny-chan"}, "is_accepted": false, "score": 0, "last_activity_date": 1522644499, "creation_date": 1522644499, "answer_id": 49605446, "question_id": 43242660, "link": "https://stackoverflow.com/questions/43242660/flask-sqlalchemy-many-to-many-staledataerror/49605446#49605446", "title": "Flask SQLAlchemy Many-to-Many StaleDataError", "body": "<p>What if I cannot modify the tags and post db model(when I am using opensource project that db migrate may cause lots of problems)?</p>\n\n<p>I solved this problem by clean the <code>tags</code> that related to the <code>post_id</code>, and then reset the <code>post.tags = []</code>, lastly, delete the post\n item.</p>\n\n<pre><code>1.\nsql = text('delete from tags where post_id = %s' % post_id)\ndb.engine.execute(sql)\n\n2.\npost.tags = []\ndb.session.merge(post)\ndb.session.commit()\n\n3.\ndb.session.delete(post)\ndb.session.commit()\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 1384541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7755b40cfb93c34f1a278218f5a4614c?s=128&d=identicon&r=PG", "display_name": "edlee", "link": "https://stackoverflow.com/users/1384541/edlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 1, "accepted_answer_id": 43293465, "answer_count": 2, "score": 2, "last_activity_date": 1522644499, "creation_date": 1491431170, "last_edit_date": 1491467769, "question_id": 43242660, "link": "https://stackoverflow.com/questions/43242660/flask-sqlalchemy-many-to-many-staledataerror", "title": "Flask SQLAlchemy Many-to-Many StaleDataError", "body": "<p>I'm using Flask-SQLAlchemy. I have a two classes which share a relationship through an association table. When I try to delete a row in the one of the tables. I see the following error:</p>\n\n<pre><code>sqlalchemy.orm.exc.StaleDataError\nStaleDataError: DELETE statement on table 'tags' expected to delete 1 row(s); Only 2 were matched.\n</code></pre>\n\n<p>Here are my models:</p>\n\n<pre><code>tags = db.Table('tags',\n    db.Column('tag_id', db.Integer, db.ForeignKey('tag.id')),\n    db.Column('post_id', db.Integer, db.ForeignKey('posts.id'))\n)\n\nclass Post(db.Model):\n    __tablename__ = 'posts'\n    id = db.Column(db.Integer, primary_key=True)\n    title = db.Column(db.String(255))\n    tags = db.relationship('Tag', secondary=tags,\n                       backref=db.backref('posts', lazy='dynamic'))\n\n    def __init__(self, **kwargs):\n        super(Post, self).__init__(**kwargs)\n\n    def __repr__(self):\n        return '&lt;title %r&gt;' % self.title\n\n\nclass Tag(db.Model):\n    __tablename__ = 'tag'\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(120), unique=True)\n</code></pre>\n\n<p>An here is the code I run to delete:</p>\n\n<pre><code>def remove_tag(tag_id):\n    tag = Tag.query.get(tag_id)\n    for post in tag.posts:\n        p = Post.query.get(post.id)\n        p.tags.remove(tag)\ndb.session.delete(tag)\ndb.session.commit()\n</code></pre>\n\n<p>I have tried a striped-down version of this code, outside of this app, in a standalone test, db and environment. And, it works as expected removing the tag and associated table row.</p>\n\n<p>What I would like to know, if possible:</p>\n\n<ul>\n<li>How did I get in the situation of a StaleDataError ? </li>\n<li>Why does it match more than one row, when my query to .all() doesn't show multiple uses? </li>\n<li>How can I prevent this from happening?</li>\n</ul>\n\n<p>Thanks in advance for any assistance.</p>\n\n<p>Best,\nEdward</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1491431661, "post_id": 43242659, "comment_id": 73555572, "body": "Because <code>dict.fromkeys(m, 0)</code> runs once, and then puts the same dictionary in every value for <code>dict.fromkeys(k, dict.fromkeys(m, 0))</code>. You can check this by doing <code>for dct in dict1: print id(dct)</code> they will all be the same <code>id</code>, eg. the same <code>object</code>"}, {"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 2, "creation_date": 1491431693, "post_id": 43242659, "comment_id": 73555583, "body": "Only one sub-dictionary was ever created. What you have now is that dictionary itself accessible in multiple ways. <code>dict[0.5]</code> and <code>dict[1]</code> refer to the same dictionary (and not copies of it)"}], "answers": [{"comments": [{"owner": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 0, "creation_date": 1491432129, "post_id": 43242785, "comment_id": 73555709, "body": "Does that mean, it won&#39;t be possible to change a single key in dict1? That&#39;s a bummer."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 0, "creation_date": 1491432164, "post_id": 43242785, "comment_id": 73555716, "body": "@alDiablo it means you have to make nested dictionaries differently."}, {"owner": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 0, "creation_date": 1491432238, "post_id": 43242785, "comment_id": 73555740, "body": "<code>dict.fromkeys</code> only to be used for quick read only dicts then?"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 1, "creation_date": 1491432550, "post_id": 43242785, "comment_id": 73555837, "body": "I&#39;ll append my answer @alDiablo, the issue is <b>parameters are only evaluated once, when the function is called</b>... so <code>dict.fromkeys</code> will put the same value (whatever that may be) in every key."}], "tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1491432488, "last_edit_date": 1491432488, "creation_date": 1491431909, "answer_id": 43242785, "question_id": 43242659, "link": "https://stackoverflow.com/questions/43242659/python-dict-of-dict-setting-values-missmatch/43242785#43242785", "title": "Python dict of dict setting values missmatch", "body": "<p>I haven't found a good dupe target, although this general issue is common:</p>\n\n<p>Because <code>dict.fromkeys(m, 0)</code> runs once when the function is called, and then puts the same dictionary in every value for <code>dict.fromkeys(k, dict.fromkeys(m, 0))</code>. You can check this by doing <code>for dct in dict1: print id(dict1[dct])</code> they will all be the same <code>id</code>, eg. the same object:</p>\n\n<pre><code>&gt;&gt;&gt; for dct in dict1: print id(dict1[dct])\n140401847695352\n140401847695352\n140401847695352\n</code></pre>\n\n<p>This happens because <strong>parameters are only evaluated once, when the function is called</strong>... so <code>dict.fromkeys</code> will put the same value (whatever that may be) in every key. It is equivalent to:</p>\n\n<pre><code>default_dct = dict.fromkeys(m, 0)\ndict1 = dict.fromkeys(k, default_dct)\n</code></pre>\n\n<hr>\n\n<p><em>Instead</em>, you can use a dictionary comprehension:</p>\n\n<pre><code>dict1 = {key: {ikey: 0 for ikey in m} for key in k}\n</code></pre>\n\n<p>or, via copying:</p>\n\n<pre><code>inner_dct = dict.fromkeys(m, 0)\ndict1 = {}\nfor key in k:\n    dict1[key] = inner_dct.copy()\n</code></pre>\n\n<p>Both of which yield different values:</p>\n\n<pre><code>&gt;&gt;&gt;for dct in dict1: print id(dict1[dct])\n140401847695352\n140401847646200\n140401847644240\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "is_accepted": true, "score": 0, "last_activity_date": 1491432463, "last_edit_date": 1491432463, "creation_date": 1491432087, "answer_id": 43242811, "question_id": 43242659, "link": "https://stackoverflow.com/questions/43242659/python-dict-of-dict-setting-values-missmatch/43242811#43242811", "title": "Python dict of dict setting values missmatch", "body": "<p>Only one sub-dictionary was ever created. What you have now is that dictionary itself accessible in multiple ways. \n<code>dict[0.5]</code> and <code>dict[1]</code> refer to the same dictionary (and not copies of it).</p>\n\n<p>One way to achieve what you want to do is to use a dict comprehension:</p>\n\n<pre><code>dict1 = {k_outer: {k_inner:0 for k_inner in m} for k_outer in k}\n</code></pre>\n\n<p>This creates a new nested dict for each key, thereby avoiding the problem of them all accessing the same nested dict.</p>\n"}], "owner": {"reputation": 437, "user_id": 7823403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/102c82470b22f70a8981d2b9a4af098e?s=128&d=identicon&r=PG&f=1", "display_name": "MaPy", "link": "https://stackoverflow.com/users/7823403/mapy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 43242811, "answer_count": 2, "score": 0, "last_activity_date": 1491432488, "creation_date": 1491431169, "question_id": 43242659, "link": "https://stackoverflow.com/questions/43242659/python-dict-of-dict-setting-values-missmatch", "title": "Python dict of dict setting values missmatch", "body": "<p>Hi can anyone explain why we have the following behavior:</p>\n\n<pre><code>&gt;&gt;&gt; k = [0.5, 1, 2]\n&gt;&gt;&gt; m = [0.5, 1, 2]\n&gt;&gt;&gt; dict1 = dict.fromkeys(k, dict.fromkeys(m, 0))\n&gt;&gt;&gt; dict1\n{0.5: {0.5: 0, 1: 0, 2: 0}, 1: {0.5: 0, 1: 0, 2: 0}, 2: {0.5: 0, 1: 0, 2: 0}}\n&gt;&gt;&gt; dict1[0.5][0.5]= 4.5\n&gt;&gt;&gt; dict1\n{0.5: {0.5: 4.5, 1: 0, 2: 0}, 1: {0.5: 4.5, 1: 0, 2: 0}, 2: {0.5: 4.5, 1: 0, 2: 0}}\n\n\n&gt;&gt;&gt; dict2 = {0.5: {0.5: 0, 1: 0, 2: 0}, 1: {0.5: 0, 1: 0, 2: 0}, 2: {0.5: 0, 1: 0, 2: 0}}\n&gt;&gt;&gt; dict2[0.5][0.5] = 4.5\n&gt;&gt;&gt; dict2\n{0.5: {0.5: 4.5, 1: 0, 2: 0}, 1: {0.5: 0, 1: 0, 2: 0}, 2: {0.5: 0, 1: 0, 2: 0}}\n</code></pre>\n\n<p>so in the first case whenever I try to change a value of dict1 all the values  with the same second key are changing (e.g dict1[0.5][0.5]=4.5 will also change dict1[1][0.5] for some reason).</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "edited": false, "score": 0, "creation_date": 1491431456, "post_id": 43242697, "comment_id": 73555503, "body": "yep just figured that out thank you for the response!"}], "tags": [], "owner": {"reputation": 188, "user_id": 7421821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d049065b62e849de71d61be857f0276?s=128&d=identicon&r=PG&f=1", "display_name": "Lysandros Nikolaou", "link": "https://stackoverflow.com/users/7421821/lysandros-nikolaou"}, "is_accepted": false, "score": 2, "last_activity_date": 1493909336, "last_edit_date": 1493909336, "creation_date": 1491431406, "answer_id": 43242697, "question_id": 43242653, "link": "https://stackoverflow.com/questions/43242653/loop-through-pattern-of-characters-and-print-out-corresponding-text/43242697#43242697", "title": "Loop Through Pattern Of Characters and Print Out Corresponding Text", "body": "<p>What you are passing to the <code>join()</code> function is a string, so it will iterate through every letter in the string, that's why you are getting this output. What you really want to do is use a list, so that <code>join()</code> iterates through every word in the list:</p>\n\n<pre><code>...\ndotdash = []\nfor s in pattern:\n    if s == \".\":\n        dotdash.append(\"dot\")\n    elif s == \"_\":\n        dotdash.append(\"dash\")\nx = \"-\".join(dotdash)\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": false, "score": 2, "last_activity_date": 1491431413, "creation_date": 1491431413, "answer_id": 43242698, "question_id": 43242653, "link": "https://stackoverflow.com/questions/43242653/loop-through-pattern-of-characters-and-print-out-corresponding-text/43242698#43242698", "title": "Loop Through Pattern Of Characters and Print Out Corresponding Text", "body": "<p>You could add the hyphens first with <code>join</code>, which gives you a string, and then apply two replacements to get the final string:</p>\n\n<pre><code>def ss(pattern):\n    return '-'.join(pattern).replace('.', 'dot').replace('_', 'dash')\n\nprint(ss(['.', '.', '_', '.', '_', '.'])) // dot-dot-dash-dot-dash-dot\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "is_accepted": false, "score": 0, "last_activity_date": 1491431431, "creation_date": 1491431431, "answer_id": 43242703, "question_id": 43242653, "link": "https://stackoverflow.com/questions/43242653/loop-through-pattern-of-characters-and-print-out-corresponding-text/43242703#43242703", "title": "Loop Through Pattern Of Characters and Print Out Corresponding Text", "body": "<p>well, i'll just go ahead and respond to my own answer--woops.  Easy solution here--i just changed dotdash to a list, and that took care of all my problems.</p>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 7657675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097f4068d60b09d605fcc91af7787cd8?s=128&d=identicon&r=PG&f=1", "display_name": "sjjhsjjh", "link": "https://stackoverflow.com/users/7657675/sjjhsjjh"}, "is_accepted": false, "score": 0, "last_activity_date": 1491431463, "creation_date": 1491431463, "answer_id": 43242707, "question_id": 43242653, "link": "https://stackoverflow.com/questions/43242653/loop-through-pattern-of-characters-and-print-out-corresponding-text/43242707#43242707", "title": "Loop Through Pattern Of Characters and Print Out Corresponding Text", "body": "<p>Change (\"dot\") to (\"dot\",) with a trailing comma, and do the same for (\"dash\").\nThe trailing comma forces it to be a list type.</p>\n\n<p>Edit: Also, change dotdash to be initialised like dotdash = []</p>\n"}], "owner": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1493909336, "creation_date": 1491431142, "question_id": 43242653, "link": "https://stackoverflow.com/questions/43242653/loop-through-pattern-of-characters-and-print-out-corresponding-text", "title": "Loop Through Pattern Of Characters and Print Out Corresponding Text", "body": "<p>Hi working on a sort of morse-code problem where a user would input a string in a  format like this</p>\n\n<pre><code>pattern = ['.', '.', '_', '.', '_', '.']\n</code></pre>\n\n<p>and the code would print out the resulting word for each like so:</p>\n\n<pre><code>\"dot-dot-dash-dot-dash-dot\"\n</code></pre>\n\n<p>I've tried this:</p>\n\n<pre><code>def ss(pattern):\n    dotdash = \"\"\n    for s in pattern:\n        if s == \".\":\n            dotdash+=(\"dot\")\n        elif s == \"_\":\n            dotdash+=(\"dash\")\n    x = \"-\".join(dotdash)\n    print(x)\n\nss(['.', '.', '_', '.', '_', '.'])\n</code></pre>\n\n<p>but that's just giving me output like this:</p>\n\n<pre><code>d-o-t-d-o-t-d-a-s-h-d-o-t-d-a-s-h-d-o-t\n</code></pre>\n\n<p>looking for a solution to separate those dots and dashes with a hyphen--just a bit stumped.  thinking maybe to split--based on the words--but just unsure how to accomplish that. any help is hugely appreciated.</p>\n"}, {"tags": ["python", "performance", "pandas", "numpy", "processing-efficiency"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1491429985, "post_id": 43242384, "comment_id": 73554983, "body": "So, the output would be of length <code>1 million</code>?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1491430347, "post_id": 43242384, "comment_id": 73555120, "body": "Also, what to output if there&#39;s isn&#39;t a match of <code>df2</code> in <code>df</code>?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1491430683, "post_id": 43242384, "comment_id": 73555254, "body": "Did you try to use the isin() DataFrame method?"}, {"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "edited": false, "score": 0, "creation_date": 1491442668, "post_id": 43242384, "comment_id": 73558465, "body": "Either length would be ok now that I think about it."}, {"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "reply_to_user": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 0, "creation_date": 1491443269, "post_id": 43242384, "comment_id": 73558633, "body": "@Andrew L I&#39;ve mainly tried brute forcing through the loc method, but I assumed this is the most time intensive way to do it."}, {"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1491443300, "post_id": 43242384, "comment_id": 73558642, "body": "@wwii Thanks for the tip.  I see it in a solution below as well."}], "answers": [{"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1491431604, "post_id": 43242489, "comment_id": 73555554, "body": "But, we need to get the indexes of <code>df2</code> corresponding to the matches, right?"}, {"owner": {"reputation": 54855, "user_id": 37751, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GiarY.jpg?s=128&g=1", "display_name": "JD Long", "link": "https://stackoverflow.com/users/37751/jd-long"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1491436356, "post_id": 43242489, "comment_id": 73556886, "body": "I guess I don&#39;t understand what you mean. There&#39;s no explicit index in df2. You looking for the row number index? um, that&#39;s simply  <code>df[df.WholeList.isin(df2.ThingsToFind)].index</code>"}, {"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "edited": false, "score": 0, "creation_date": 1491443063, "post_id": 43242489, "comment_id": 73558577, "body": "@Divaker  I would say that as long as I can easily have it where WholeList(index our function would provide)=ThingsToFind, then I&#39;d be happy.  I&#39;m thinking of a MATLAB command that I love and trying to implement it in Python.  Sorry if this is a newbie question, but I&#39;m only in month 2 of the language."}, {"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "edited": false, "score": 0, "creation_date": 1491443111, "post_id": 43242489, "comment_id": 73558589, "body": "I&#39;ll give isin a try.  Thanks!"}], "tags": [], "owner": {"reputation": 54855, "user_id": 37751, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GiarY.jpg?s=128&g=1", "display_name": "JD Long", "link": "https://stackoverflow.com/users/37751/jd-long"}, "is_accepted": false, "score": 1, "last_activity_date": 1491430292, "creation_date": 1491430292, "answer_id": 43242489, "question_id": 43242384, "link": "https://stackoverflow.com/questions/43242384/pandas-searching-column-of-data-frame-from-list-efficiently/43242489#43242489", "title": "Pandas - Searching Column of Data Frame from List Efficiently", "body": "<p>Pandas dataframes have an <code>isin()</code> method that works really well:</p>\n\n<pre><code>df[df.WholeList.isin(df2.ThingsToFind)]\n</code></pre>\n\n<p>It seems reasonably performant on my MBP:</p>\n\n<pre><code>CPU times: user 3 \u00b5s, sys: 5 \u00b5s, total: 8 \u00b5s\nWall time: 11 \u00b5s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "edited": false, "score": 0, "creation_date": 1491442937, "post_id": 43242545, "comment_id": 73558535, "body": "Thanks.  I assumed there were other approaches than the brute force + loc method.  I&#39;ll give this a try."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1491430601, "creation_date": 1491430601, "answer_id": 43242545, "question_id": 43242384, "link": "https://stackoverflow.com/questions/43242384/pandas-searching-column-of-data-frame-from-list-efficiently/43242545#43242545", "title": "Pandas - Searching Column of Data Frame from List Efficiently", "body": "<p>I agree with @JDLong - IMO Pandas is pretty fast:</p>\n\n<pre><code>In [49]: %timeit df[df.WholeList.isin(df2.ThingsToFind)]\n1 loop, best of 3: 819 ms per loop\n\nIn [50]: %timeit df.loc[df.WholeList.isin(df2.ThingsToFind)]\n1 loop, best of 3: 814 ms per loop\n\nIn [51]: %timeit df.query(\"WholeList in @df2.ThingsToFind\")\n1 loop, best of 3: 837 ms per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "edited": false, "score": 0, "creation_date": 1491443183, "post_id": 43242570, "comment_id": 73558609, "body": "Thanks!  This is an interesting approach."}, {"owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "edited": false, "score": 1, "creation_date": 1491591164, "post_id": 43242570, "comment_id": 73638589, "body": "This worked beautifully.  isin() didn&#39;t give me what I wanted, but this was brilliant.  Thanks!"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 0, "last_activity_date": 1491431065, "last_edit_date": 1491431065, "creation_date": 1491430715, "answer_id": 43242570, "question_id": 43242384, "link": "https://stackoverflow.com/questions/43242384/pandas-searching-column-of-data-frame-from-list-efficiently/43242570#43242570", "title": "Pandas - Searching Column of Data Frame from List Efficiently", "body": "<p>Here's an approach with <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html\" rel=\"nofollow noreferrer\"><code>np.searchsorted</code></a> as it seems the second dataframe has its elements sorted and unique -</p>\n\n<pre><code>def find_index(a,b, invalid_specifier = -1):\n    idx = np.searchsorted(b,a)\n    idx[idx==b.size] = 0\n    idx[b[idx] != a] = invalid_specifier\n    return idx\n\ndef process_dfs(df, df2):\n    a = df.WholeList.values.ravel()\n    b = df2.ThingsToFind.values.ravel()\n    return find_index(a,b, invalid_specifier=-1)\n</code></pre>\n\n<p>Sample run on arrays -</p>\n\n<pre><code>In [200]: a\nOut[200]: array([ 3,  5,  8,  4,  3,  2,  5,  2, 12,  6,  3,  7])\n\nIn [201]: b\nOut[201]: array([2, 3, 5, 6, 7, 8, 9])\n\nIn [202]: find_index(a,b, invalid_specifier=-1)\nOut[202]: array([ 1,  2,  5, -1,  1,  0,  2,  0, -1,  3,  1,  4])\n</code></pre>\n\n<p>Sample run on dataframes -</p>\n\n<pre><code>In [188]: df\nOut[188]: \n    WholeList\n0           3\n1           5\n2           8\n3           4\n4           3\n5           2\n6           5\n7           2\n8          12\n9           6\n10          3\n11          7\n\nIn [189]: df2\nOut[189]: \n   ThingsToFind\n0             2\n1             3\n2             5\n3             6\n4             7\n5             8\n6             9\n\nIn [190]: process_dfs(df, df2)\nOut[190]: array([ 1,  2,  5, -1,  1,  0,  2,  0, -1,  3,  1,  4])\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 7823253, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba8d16ef51c5d4b49ac789583d6b4980?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Russell", "link": "https://stackoverflow.com/users/7823253/tyler-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "accepted_answer_id": 43242570, "answer_count": 3, "score": 0, "last_activity_date": 1491442720, "creation_date": 1491429697, "last_edit_date": 1491442720, "question_id": 43242384, "link": "https://stackoverflow.com/questions/43242384/pandas-searching-column-of-data-frame-from-list-efficiently", "title": "Pandas - Searching Column of Data Frame from List Efficiently", "body": "<p>I am trying to figure out the most efficient way to search a data frame in Pandas with a list (dataframe) of other values without using brute force methods.  Is there a way to vectorize it?  I know I can for loop each element of the list (or dataframe) and extract the data using the loc method, but was hoping for something faster.  I have a data frame with 1 million rows and I need to search within it to extract the index of 600,000 rows.</p>\n\n<p>Example:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({'WholeList': np.round(1000000*(np.random.rand(1000000)),0)})\ndf2 = pd.DataFrame({'ThingsToFind': np.arange(50000)+50000})\ndf.loc[1:10,:]\n#Edited, now that I think about it, the 'arange' method would have been better to populate the arrays.\n</code></pre>\n\n<p>I want the most efficient way to get the index of df2 in df, where it exists in df.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "try-except", "python-ggplot"], "answers": [{"tags": [], "owner": {"reputation": 1359, "user_id": 7525365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4d0e089f8b44b1b50e9f0ccefce3674f?s=128&d=identicon&r=PG&f=1", "display_name": "TMWP", "link": "https://stackoverflow.com/users/7525365/tmwp"}, "is_accepted": true, "score": 1, "last_activity_date": 1491430599, "creation_date": 1491430599, "answer_id": 43242543, "question_id": 43242368, "link": "https://stackoverflow.com/questions/43242368/try-except-not-working-with-python-ggplot/43242543#43242543", "title": "try except not working with python ggplot", "body": "<p>Looks like in creating this question (and doing a little investigation of the issue myself), I may have uncovered a bug in either <code>ggplot</code> or python for this specific interaction.  </p>\n\n<p>Simply changing the x value in the <code>ggplot</code> line to <code>'Something Stupid'</code>, the <code>try-except</code> error then gets reported and printed as per the <code>except</code> portion of the block.</p>\n\n<p>However - Anaconda was installed using version 4.2.  Until I rule out the possibility that something needs an upgrade, this bug should not be reported yet.  It is worth noting in case anyone else encounters the same problem.</p>\n"}], "owner": {"reputation": 1359, "user_id": 7525365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4d0e089f8b44b1b50e9f0ccefce3674f?s=128&d=identicon&r=PG&f=1", "display_name": "TMWP", "link": "https://stackoverflow.com/users/7525365/tmwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 43242543, "answer_count": 1, "score": 1, "last_activity_date": 1491431251, "creation_date": 1491429628, "last_edit_date": 1491431251, "question_id": 43242368, "link": "https://stackoverflow.com/questions/43242368/try-except-not-working-with-python-ggplot", "title": "try except not working with python ggplot", "body": "<p>I am debugging a problem in some python <code>ggplot</code> code.  So that I could see if my efforts (which I expect are coming from the underlying data frame) are working, I tried to wrap the problem code in a <code>try/except</code> statement.  However, when I run the Python 2.7 Jupyter cell the code is in, if I take off the <code>try/except</code>, it throws an error.  Put try/except back on, and the cell simply executes with no output of any kind.  </p>\n\n<p>Does <code>ggplot</code> not work with <code>try/except</code>?  Or is there something I need to do differently to this code so the interaction will react as expected?</p>\n\n<p><strong>Problem Code:</strong></p>\n\n<pre><code>try:\n    ggplot(aes(x='Date', y='Price', color='Daily'), data=googleHiLoPlotData) \\\n        + geom_density() \nexcept Exception as ee:\n    print(ee)\n    print(type(ee))\n</code></pre>\n\n<p><strong>Error it only throws if I remove <code>try/except</code> and take out the indenting:</strong></p>\n\n<pre><code>TypeError: unsupported operand type(s) for /: 'str' and 'long'\n</code></pre>\n\n<p>I have copied the 'try/except' block to another cell and verified that if I replace the entire <code>ggplot</code> line to something else that will throw an error, it works and then prints the error and error type as expected.  So the problem seems to be something about this specific code within the block.  Any ideas what is going on here, and how to make it throw the error correctly) with the <code>ggplot</code> line?</p>\n\n<p>Version Info:  Python 2.7, ggplot 0.11.5, Windows 7 64bit</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "answers": [{"comments": [{"owner": {"reputation": 1702, "user_id": 2505209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rm2Dy.jpg?s=128&g=1", "display_name": "Harsha Pokkalla", "link": "https://stackoverflow.com/users/2505209/harsha-pokkalla"}, "edited": false, "score": 0, "creation_date": 1491512158, "post_id": 43242899, "comment_id": 73599767, "body": "Hi @DavidParks, thanks a lot for your reply.  1. Based on your suggestions, I would do it in python thread and use feed_dict. 2. My use case is simple I guess, I am not doing much pre-processing (concat, subtract). I will give it a try using tf.map_fn and see how that goes."}], "tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": false, "score": 2, "last_activity_date": 1491432966, "last_edit_date": 1491432966, "creation_date": 1491432573, "answer_id": 43242899, "question_id": 43242313, "link": "https://stackoverflow.com/questions/43242313/reading-multiple-images-process-them-to-one-image-and-feed-through-model/43242899#43242899", "title": "Reading multiple images, process them to one image and feed through model", "body": "<p>I just did this last week! It was awesome, I learned a ton about tensorflow using things like <code>tf.map_fn</code>, and <code>tf.cond</code>. And it worked.</p>\n\n<p>This week I just refactored my code to eliminate it all, because it was a bad idea.</p>\n\n<p>Issues I ran into:</p>\n\n<ol>\n<li>Doing preprocessing in tensorflow is messy to debug. Doing proper TDD will definitely benefit you here, but still not going to be particularly pretty or easy to debug.</li>\n<li>You <em>should</em> be offloading the preprocessing to the CPU and leaving the GPU (assuming you're using one) to do training. A better approach is to just have a queue and load it from a thread/class that's dedicated to your preprocessing task. And doing the work in numpy/scikit/scikit-image is going to be easier to configure and test.</li>\n<li>I thought I was so smart, corralling all my code into a single model. But the complexity of the preprocessing meant my model was really hard to iterate on, it got to be rigid code quickly - example is when I added my test set evaluation in, the preprocessing requirement was slightly different. Suddenly I had to add large sections of conditional code to my model and it got ugly quick.</li>\n</ol>\n\n<p>That being said, my preprocessing steps were maybe more complex than yours. If you're sticking to simple things where you can just apply some of the simple image preprocessing steps it might still be easier for you to go this approach.</p>\n\n<p>To answer your questions specifically:</p>\n\n<ol>\n<li><p>Queues won't give any benefit over feed_dict that I know of. You still have a problem of moving data from a TF queue on the CPU to the GPU memory each iteration same as feed_dict does, watch this thread if you care about that topic, GPU queues are coming: <a href=\"https://github.com/tensorflow/tensorflow/issues/7679\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/7679</a></p></li>\n<li><p>You should just <code>dequeue_many</code> from the queue, process them as a batch. If you need to do something to each individual image just use <code>tf.map_fn</code> which will remove the first dimension and pass individual 3D images to your specified function. But heed my warning above when you go this route - you'll probably be happier just doing this in a separate thread.</p></li>\n<li><p>Already answered in #2, use <code>tf.map_fn</code> to iterate over multiple images in a batch. it's pretty easy to use actually.</p></li>\n<li><p>I don't know Keras.</p></li>\n</ol>\n"}], "owner": {"reputation": 1702, "user_id": 2505209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rm2Dy.jpg?s=128&g=1", "display_name": "Harsha Pokkalla", "link": "https://stackoverflow.com/users/2505209/harsha-pokkalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491432966, "creation_date": 1491429365, "last_edit_date": 1491430175, "question_id": 43242313, "link": "https://stackoverflow.com/questions/43242313/reading-multiple-images-process-them-to-one-image-and-feed-through-model", "title": "Reading multiple images, process them to one image and feed through model", "body": "<p>Is there a way to build following graph in Tensorflow:</p>\n\n<ol>\n<li>Load some N images (N can vary for each set) using TF Queues and TF Image Readers.</li>\n<li>Process these images to get fixed size image and prepare batches.</li>\n<li>Feed these batches through the CNN model </li>\n</ol>\n\n<p>Some questions/info:</p>\n\n<ol>\n<li>I am trying to build data loading part in TF instead of Python functions and feed_dict. I guess, TF Data loading can train the model faster compared to python and feed_dict. Is that right ?   </li>\n<li>Building the graph for small N (N&lt;5) is easy. Define exclusive nodes for each image in N and process on them. (working)</li>\n<li>Can I use TF \"while_loop\" to build such functionality to read N images ?? </li>\n<li>Does Keras supports such functionality ?</li>\n</ol>\n\n<p>Thanks for your suggestions. </p>\n"}, {"tags": ["python", "text", "colors", "python-imaging-library"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1491430381, "post_id": 43242305, "comment_id": 73555136, "body": "Where is your code? Can you show us an example of what you want and what you&#39;re getting?"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1491431250, "post_id": 43242305, "comment_id": 73555449, "body": "Just the other day I was looking at <a href=\"https://github.com/danieldiekmeier/memegenerator/blob/master/memegenerator.py#L41\" rel=\"nofollow noreferrer\">github.com/danieldiekmeier/memegenerator/blob/master/&hellip;</a>, which I believe does what you&#39;re looking for. First it draws the text repeatedly in the background color with various small spatial offsets, effectively making it &quot;bleed&quot; outwards slightly. Then it draws the foreground text on top of that once."}], "owner": {"user_type": "does_not_exist", "display_name": "user7812593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491429327, "creation_date": 1491429327, "question_id": 43242305, "link": "https://stackoverflow.com/questions/43242305/how-to-create-bordered-text-using-pil", "title": "How to create bordered text using PIL", "body": "<p>Is there a way to create text with PIL, but make the borders black and the inside of the text white? I tried overlaying two versions of the same text but with different colors, but they don't line up correctly.</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "boto3"], "answers": [{"comments": [{"owner": {"reputation": 10169, "user_id": 6017840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0178fd0ada940a400e40867315020b2?s=128&d=identicon&r=PG&f=1", "display_name": "mootmoot", "link": "https://stackoverflow.com/users/6017840/mootmoot"}, "edited": false, "score": 0, "creation_date": 1491467157, "post_id": 43242679, "comment_id": 73568373, "body": "Apparently this is an API issues."}], "tags": [], "owner": {"reputation": 4175, "user_id": 11801, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a31fbafa397845ab6ec33df5139ae589?s=128&d=identicon&r=PG", "display_name": "tenpn", "link": "https://stackoverflow.com/users/11801/tenpn"}, "is_accepted": true, "score": 0, "last_activity_date": 1491431279, "creation_date": 1491431279, "answer_id": 43242679, "question_id": 43242300, "link": "https://stackoverflow.com/questions/43242300/boto3-s3-put-object-times-out/43242679#43242679", "title": "boto3 s3 put_object times out", "body": "<p>Using inspiration from this <a href=\"https://github.com/boto/boto3/issues/870\" rel=\"nofollow noreferrer\">https://github.com/boto/boto3/issues/870</a> issue, I added <code>.read()</code> to my Body parameter, and lo it works. </p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 4412317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIWSk.jpg?s=128&g=1", "display_name": "Noam", "link": "https://stackoverflow.com/users/4412317/noam"}, "is_accepted": false, "score": -1, "last_activity_date": 1531935366, "creation_date": 1531935366, "answer_id": 51407969, "question_id": 43242300, "link": "https://stackoverflow.com/questions/43242300/boto3-s3-put-object-times-out/51407969#51407969", "title": "boto3 s3 put_object times out", "body": "<p>Might be network issues. are you on the same network?</p>\n\n<p>are you able to upload it using the AWS-CLI\ntry the following</p>\n\n<pre><code>aws s3 cp my-file.txt s3://my-s3-bucket/data/ --debug\n</code></pre>\n\n<p>also I would consider adding X retries to the upload might give you more information on the error at hand. most of the times these are sporadic network related issues</p>\n"}], "owner": {"reputation": 4175, "user_id": 11801, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a31fbafa397845ab6ec33df5139ae589?s=128&d=identicon&r=PG", "display_name": "tenpn", "link": "https://stackoverflow.com/users/11801/tenpn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "accepted_answer_id": 43242679, "answer_count": 2, "score": 1, "last_activity_date": 1531935366, "creation_date": 1491429304, "question_id": 43242300, "link": "https://stackoverflow.com/questions/43242300/boto3-s3-put-object-times-out", "title": "boto3 s3 put_object times out", "body": "<p>I've got a python script that Works On My Machine (OSX, python 2.7.13, boto3 1.4.4) but won't work for my colleague (Windows7, otherwise same). </p>\n\n<p>The authentication seems to work, and we can both s3's list_objects_v2 and get_object. However when he tries to upload with put_object, it times out. Here is <a href=\"https://gist.github.com/rcteske/e1e7b3499f080b26f3697f239e4269a4\" rel=\"nofollow noreferrer\">a full log</a>; the upload starts at line 45.</p>\n\n<p>I've tried using his credentials and it works. He's tried uploading a tiny file and it'll work when it's in the bytes range, but even kb is too big for it. We've even tried it on another windows machine on another internet connection with no luck. </p>\n\n<p>My upload code is pretty simple:</p>\n\n<pre><code>with open(\"tmp_build.zip\", \"r\") as zip_to_upload:\n  upload_response = s3.put_object(Bucket=target_bucket, Body=zip_to_upload, Key=build_type+\".zip\")\n</code></pre>\n\n<p>The Key resolves to test.zip in our runs, and the file is about 15mb.  </p>\n\n<p>Why is it failing on windows? What more debug info can I give you? </p>\n"}, {"tags": ["python", "scikit-image"], "comments": [{"owner": {"reputation": 681, "user_id": 3409630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f74a2cfb78131495f543e51df81fa7?s=128&d=identicon&r=PG&f=1", "display_name": "alexblae", "link": "https://stackoverflow.com/users/3409630/alexblae"}, "edited": false, "score": 0, "creation_date": 1491483048, "post_id": 43242248, "comment_id": 73580071, "body": "So what exactly is your question? Do you receive a particular error message? The lines <code>plt.savefig(...)=...</code> don&#39;t seem really  kosher. I would use <code>ax[idx].figure.savefig(path)</code>."}, {"owner": {"reputation": 1, "user_id": 7822675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5df9ada78c2087d4b0366ccd4b80613b?s=128&d=identicon&r=PG&f=1", "display_name": "Ashay Chandra", "link": "https://stackoverflow.com/users/7822675/ashay-chandra"}, "reply_to_user": {"reputation": 681, "user_id": 3409630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f74a2cfb78131495f543e51df81fa7?s=128&d=identicon&r=PG&f=1", "display_name": "alexblae", "link": "https://stackoverflow.com/users/3409630/alexblae"}, "edited": false, "score": 0, "creation_date": 1491495511, "post_id": 43242248, "comment_id": 73589902, "body": "I tried doing your suggested way  ax[0].figure.savefig(&quot;&#39;C:\\Users\\ashay.chandra\\Documents\\lear&zwnj;&#8203;ning_python\\test_Ori&zwnj;&#8203;g.png&quot;) &amp; I get  SyntaxError: (unicode error) &#39;unicodeescape&#39; codec can&#39;t decode bytes in position 3-4: truncated \\UXXXXXXXX escape  All I want to do is use different filters on original image &amp; save those files."}, {"owner": {"reputation": 681, "user_id": 3409630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f74a2cfb78131495f543e51df81fa7?s=128&d=identicon&r=PG&f=1", "display_name": "alexblae", "link": "https://stackoverflow.com/users/3409630/alexblae"}, "edited": false, "score": 0, "creation_date": 1491498911, "post_id": 43242248, "comment_id": 73592078, "body": "It seems like you are having an escape character somewhere in your code and the python interpreter cannot handle it."}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1492254160, "post_id": 43242248, "comment_id": 73908565, "body": "@AshayChandra Have a look at t<a href=\"http://www.jesshamrick.com/2012/09/03/saving-figures-from-pyplot/\" rel=\"nofollow noreferrer\">THIS BLOG</a>"}], "owner": {"reputation": 1, "user_id": 7822675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5df9ada78c2087d4b0366ccd4b80613b?s=128&d=identicon&r=PG&f=1", "display_name": "Ashay Chandra", "link": "https://stackoverflow.com/users/7822675/ashay-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491429048, "creation_date": 1491429048, "question_id": 43242248, "link": "https://stackoverflow.com/questions/43242248/how-to-save-image-to-files-while-using-matplotlib", "title": "how to save image to files while using matplotlib", "body": "<p>I  am using different filters from skimage package &amp; want to save  new image into file instead of showing on screen. Can you please help. I am pretty new user of python . below is my code</p>\n\n<pre><code>import os\na = 'C:'\na1 = 'Users'\na2 = 'ashay.chandra'\nb = 'Downloads' \nc = 'test.jpg'\nimport matplotlib.pyplot as plt\n\nfrom skimage import data,io\nfrom skimage.color import rgb2hed\nfrom matplotlib.colors import LinearSegmentedColormap\n\n# Create an artificial color close to the orginal one\ncmap_hema = LinearSegmentedColormap.from_list('mycmap', ['white', 'navy'])\ncmap_dab = LinearSegmentedColormap.from_list('mycmap', ['white',\n                                             'saddlebrown'])\ncmap_eosin = LinearSegmentedColormap.from_list('mycmap', ['darkviolet',\n                                               'white'])\nfilename = os.path.join (a + os.sep,a1,a2,b,c)\n#ihc_rgb = data.immunohistochemistry()\nimg = io.imread(filename)\n#ihc_rgb = data.immunohistochemistry()\nihc_hed = rgb2hed(img)\n\nfig, axes = plt.subplots(2, 2, figsize=(7, 6), sharex=True, sharey=True,\n                         subplot_kw={'adjustable': 'box-forced'})\nax = axes.ravel()\nplt.savefig(\"'C:\\Users\\ashay.chandra\\Documents\\learning_python\\test_Orig.png\") = ax[0].imshow(img)\nplt.savefig(\"'C:\\Users\\ashay.chandra\\Documents\\learning_python\\4PnormC1P2_AD1_TZ1_A0_V0_M0_L0_IX_H1_Hematoxylin.png\") = ax[1].imshow(ihc_hed[:, :, 0], cmap=cmap_hema)\nplt.savefig(\"'C:\\Users\\ashay.chandra\\Documents\\learning_python\\test_Eosin.png\") = ax[2].imshow(ihc_hed[:, :, 1], cmap=cmap_eosin)\nplt.savefig(\"'C:\\Users\\ashay.chandra\\Documents\\learning_python\\test_DAB.png\") = ax[3].imshow(ihc_hed[:, :, 2], cmap=cmap_dab)\n#ax[0].imshow(img)\n#ax[0].set_title(\"Original image\")\n\n#ax[1].imshow(ihc_hed[:, :, 0], cmap=cmap_hema)\n#ax[1].set_title(\"Hematoxylin\")\n\n#ax[2].imshow(ihc_hed[:, :, 1], cmap=cmap_eosin)\n#ax[2].set_title(\"Eosin\")\n\n#ax[3].imshow(ihc_hed[:, :, 2], cmap=cmap_dab)\n#ax[3].set_title(\"DAB\")\n\nfor a in ax.ravel():\n    a.axis('off')\n\nfig.tight_layout()\n</code></pre>\n\n<p>Can some one please help</p>\n\n<p>Ashay</p>\n"}, {"tags": ["python", "pandas", "plot", "zooming"], "comments": [{"owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 0, "creation_date": 1491465262, "post_id": 43242246, "comment_id": 73567167, "body": "The provided answer gives the good solution (using a datetime index instead of MultiIndex), but just to comment on the original issue in the question: pandas currently does not yet support zooming plots where the x axis is not numerical or datetime (so eg strings, multi-index). See <a href=\"https://github.com/pandas-dev/pandas/issues/15912\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/15912</a> and <a href=\"https://github.com/pandas-dev/pandas/issues/7612\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/7612</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1324, "user_id": 5402386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/TfZ8j.jpg?s=128&g=1", "display_name": "mjp", "link": "https://stackoverflow.com/users/5402386/mjp"}, "edited": false, "score": 0, "creation_date": 1491430316, "post_id": 43242386, "comment_id": 73555099, "body": "thanks! changing from <code>groupby</code> to <code>pd.TimeGrouper</code> solved the problem. However I don&#39;t understand the explanation?  Simply changing the <code>groupby</code> to <code>TimeGrouper</code> fixed the problem, without changing how it calculates the percentages (the <code>df_use_perc</code> line of code) at all"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 1324, "user_id": 5402386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/TfZ8j.jpg?s=128&g=1", "display_name": "mjp", "link": "https://stackoverflow.com/users/5402386/mjp"}, "edited": false, "score": 0, "creation_date": 1491430832, "post_id": 43242386, "comment_id": 73555308, "body": "@mjp, yes, using <code>TimeGrouper</code> generates an index of <code>datetime</code> dtype. I just didn&#39;t want to create additional variables."}, {"owner": {"reputation": 1324, "user_id": 5402386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/TfZ8j.jpg?s=128&g=1", "display_name": "mjp", "link": "https://stackoverflow.com/users/5402386/mjp"}, "edited": false, "score": 0, "creation_date": 1491430865, "post_id": 43242386, "comment_id": 73555323, "body": "ahh okay. I see now. The <code>groupby</code> method creates a date setup with <code>2012 1 A B C D</code>, while the TimeGrouper solution creates the dataframe with a date setup of <code>2012-01-01 A B C D</code> where it&#39;s marked by a datetime of the first day of the date period"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1491429703, "creation_date": 1491429703, "answer_id": 43242386, "question_id": 43242246, "link": "https://stackoverflow.com/questions/43242246/pandas-dataframe-groupby-failed-zooming-for-x-axis-ticks/43242386#43242386", "title": "Pandas dataframe + groupby = failed zooming for x-axis ticks", "body": "<p>IIUC you can do the following:</p>\n\n<pre><code>x = df_days.groupby(pd.TimeGrouper('MS')).sum()\nx.div(x.sum(1), 0).mul(100).plot(kind='area', stacked=True, color=my_colors)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Ypx0R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ypx0R.png\" alt=\"enter image description here\"></a></p>\n\n<p>after zooming:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ID9uK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ID9uK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Explanation:</p>\n\n<pre><code>In [35]: x\nOut[35]:\n                    A          B          C          D\n2012-01-01  14.739981  18.306502  11.659834  13.990243\n2012-02-01  13.180681  12.487874  15.367421  16.877128\n2012-03-01  14.528299  16.936493  16.467844  16.668185\n2012-04-01   4.190121   3.110165   5.165066   3.086899\n\nIn [36]: x.div(x.sum(1), 0).mul(100)\nOut[36]:\n                    A          B          C          D\n2012-01-01  25.112171  31.188374  19.864594  23.834861\n2012-02-01  22.759411  21.563123  26.535309  29.142158\n2012-03-01  22.489341  26.217149  25.491695  25.801815\n2012-04-01  26.942217  19.998167  33.211047  19.848569\n</code></pre>\n"}], "owner": {"reputation": 1324, "user_id": 5402386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/TfZ8j.jpg?s=128&g=1", "display_name": "mjp", "link": "https://stackoverflow.com/users/5402386/mjp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 43242386, "answer_count": 1, "score": 1, "last_activity_date": 1491429703, "creation_date": 1491429030, "question_id": 43242246, "link": "https://stackoverflow.com/questions/43242246/pandas-dataframe-groupby-failed-zooming-for-x-axis-ticks", "title": "Pandas dataframe + groupby = failed zooming for x-axis ticks", "body": "<p>I am trying to plot some <code>pandas</code> dataframe data but, when it is organised into daily/monthly/yearly sums using <code>groupby</code>, the resulting plot cannot be zoomed correctly.</p>\n\n<p>The zoom does work however the x-axis tickmarks don't update correctly. I can't work out the solution to this.</p>\n\n<p>Example code:</p>\n\n<pre><code>import datetime\nimport pandas as pd\nimport numpy as np\n\narraya = np.random.rand(1,100)[0]\narrayb = np.random.rand(1,100)[0]\narrayc = np.random.rand(1,100)[0]\narrayd = np.random.rand(1,100)[0]\n\nday_counts = {'A': arraya,\n              'B': arrayb,\n              'C': arrayc,\n              'D': arrayd}\n\n#prepare data\ndf_days = pd.DataFrame(day_counts, index=pd.date_range('2012-01-01', periods=100))\n#df_use = df_days.groupby([lambda x: x.year, lambda x: x.month, lambda x: x.day]).sum()\ndf_use = df_days.groupby([lambda x: x.year, lambda x: x.month]).sum()\n\n#prepare percentages\ndf_use_perc = df_use.divide(df_use.sum(axis=1), axis=0).multiply(100) #percentages\n\nmy_colors = list(['orange', 'blue', 'purple', 'red'])\n\n#plot the main subfigure (relative event types)\nax = df_use_perc.plot(kind='area', stacked=True, color=my_colors)\n</code></pre>\n\n<p>It is this line that causes the failure:</p>\n\n<pre><code>df_use = df_days.groupby([lambda x: x.year, lambda x: x.month]).sum()\n</code></pre>\n\n<p>I can plot it just using the dataframe <code>df_days</code>, without using the <code>groupby</code> function and it works okay but I need to be able to sum up the months etc.</p>\n\n<p>Plot:\n<a href=\"https://i.stack.imgur.com/RnmKH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RnmKH.png\" alt=\"enter image description here\"></a></p>\n\n<p>Plot after zooming in massively (the whole x-axis is probably only a few seconds wide):\n<a href=\"https://i.stack.imgur.com/hfNDi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hfNDi.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "string", "unicode", "hex"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1491430054, "post_id": 43242235, "comment_id": 73555007, "body": "Looks like url encoding - take a look at <code>urllib.parse.urlencode</code>."}], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 5345050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJo3x.jpg?s=128&g=1", "display_name": "dolgom", "link": "https://stackoverflow.com/users/5345050/dolgom"}, "edited": false, "score": 0, "creation_date": 1491430955, "post_id": 43242549, "comment_id": 73555357, "body": "Thank you! The preferred solution is what I look for."}], "tags": [], "owner": {"reputation": 20829, "user_id": 1030110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bsgx2.png?s=128&g=1", "display_name": "m0nhawk", "link": "https://stackoverflow.com/users/1030110/m0nhawk"}, "is_accepted": true, "score": 0, "last_activity_date": 1491430973, "last_edit_date": 1491430973, "creation_date": 1491430620, "answer_id": 43242549, "question_id": 43242235, "link": "https://stackoverflow.com/questions/43242235/how-to-convert-byte-to-hex-string-starting-with-in-python/43242549#43242549", "title": "How to convert byte to hex string starting with &#39;%&#39; in python", "body": "<p>There is two ways to do this:</p>\n\n<p>The <strong>preferred</strong> solution. Use <a href=\"https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlencode\" rel=\"nofollow noreferrer\"><code>urllib.parse.urlencode</code></a> and specify multiple parameters and encode all at once:</p>\n\n<pre><code>urllib.parse.urlencode({'parameter': '\u203b', 'test': 'True'})\n# parameter=%E2%80%BB&amp;test=True\n</code></pre>\n\n<p>Or, you can manually convert this into chunks of two symbols, then join with the <code>%</code> symbol:</p>\n\n<pre><code>def encode_symbol(symbol):\n    symbol_hex = symbol.encode('utf-8').hex()\n    symbol_groups = [symbol_hex[i:i + 2].upper() for i in range(0, len(symbol_hex), 2)]\n    symbol_groups.insert(0, '')\n    return '%'.join(symbol_groups)\n\nencode_symbol('\u203b')\n# %E2%80%BB\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 5345050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJo3x.jpg?s=128&g=1", "display_name": "dolgom", "link": "https://stackoverflow.com/users/5345050/dolgom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 43242549, "answer_count": 1, "score": 0, "last_activity_date": 1491430973, "creation_date": 1491428999, "last_edit_date": 1495542351, "question_id": 43242235, "link": "https://stackoverflow.com/questions/43242235/how-to-convert-byte-to-hex-string-starting-with-in-python", "title": "How to convert byte to hex string starting with &#39;%&#39; in python", "body": "<p>I would like to convert Unicode characters encoded by 'utf-8' to hex string of which character starts with '%' because the API server only recognize this form.</p>\n\n<p>For example, if I need to input unicode character '\u203b' to the server, I should convert this character to string '%E2%80%BB'. (It does not matter whether a character is upper or lower.)</p>\n\n<p>I found the way to convert unicode character to bytes and convert bytes to hex string in <a href=\"https://stackoverflow.com/a/35599781\">https://stackoverflow.com/a/35599781</a>.</p>\n\n<pre><code>&gt;&gt;&gt; print('\u203b'.encode('utf-8'))\nb'\\xe2\\x80\\xbb'\n&gt;&gt;&gt; print('\u203b'.encode('utf-8').hex())\ne280bb\n</code></pre>\n\n<p>But I need the form of starting with '%' like '%E2%80%BB' or %e2%80%bb'</p>\n\n<p>Are there any concise way to implement this? Or do I need to make the function to add '%' to each hex character?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491429041, "post_id": 43242208, "comment_id": 73554585, "body": "I have no idea what you are trying to do here. <code>add</code> is presumably some method in a class definition? What should this method do? If you are trying to find the sum of the list <code>var1</code> then all you need is <code>sum(var1)</code>..."}, {"owner": {"reputation": 447, "user_id": 5556887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb86c8d689592c71cc88a42c7981c252?s=128&d=identicon&r=PG&f=1", "display_name": "bouletta", "link": "https://stackoverflow.com/users/5556887/bouletta"}, "edited": false, "score": 0, "creation_date": 1491429073, "post_id": 43242208, "comment_id": 73554597, "body": "It would be nice to show where you call that function and with which arguments. Chances are as the error states that you are passing an int and not a list..."}, {"owner": {"reputation": 3, "user_id": 7668573, "user_type": "registered", "profile_image": "https://graph.facebook.com/1308174452561846/picture?type=large", "display_name": "Shawn Ruby", "link": "https://stackoverflow.com/users/7668573/shawn-ruby"}, "edited": false, "score": 0, "creation_date": 1491429097, "post_id": 43242208, "comment_id": 73554605, "body": "sorry i didnt want to include too much code for readability. Ill include it all"}, {"owner": {"reputation": 1187, "user_id": 3042057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a699dceb8500b26a5355e497b73f3865?s=128&d=identicon&r=PG", "display_name": "Emin Mastizada", "link": "https://stackoverflow.com/users/3042057/emin-mastizada"}, "edited": false, "score": 0, "creation_date": 1491429205, "post_id": 43242208, "comment_id": 73554649, "body": "Also, which line gives error?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491429225, "post_id": 43242208, "comment_id": 73554662, "body": "Please read this: <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 3, "user_id": 7668573, "user_type": "registered", "profile_image": "https://graph.facebook.com/1308174452561846/picture?type=large", "display_name": "Shawn Ruby", "link": "https://stackoverflow.com/users/7668573/shawn-ruby"}, "edited": false, "score": 0, "creation_date": 1491429250, "post_id": 43242208, "comment_id": 73554681, "body": "the seventh line does             self.var1 = [x for x in self.var1, sum(self.var1)] ill include error code"}, {"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 0, "creation_date": 1491429263, "post_id": 43242208, "comment_id": 73554688, "body": "What is this line supposed to do: <code>self.var1 = [x for x in self.var1, sum(self.var1)]</code>? I think that&#39;s your error"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491429287, "post_id": 43242208, "comment_id": 73554700, "body": "What in the world are you doing with your instance attributes? Why do you keep reassigning to them, and then never really using them and they don&#39;t really seem to serve any purpose other than to obfuscate your code..."}, {"owner": {"reputation": 3, "user_id": 7668573, "user_type": "registered", "profile_image": "https://graph.facebook.com/1308174452561846/picture?type=large", "display_name": "Shawn Ruby", "link": "https://stackoverflow.com/users/7668573/shawn-ruby"}, "edited": false, "score": 0, "creation_date": 1491429356, "post_id": 43242208, "comment_id": 73554737, "body": "even without the list comprehension it brings up the same issue. i used a list comprehension because i thought the error meant it wasnt iterating because it wasnt given an action to iterate"}, {"owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "edited": false, "score": 1, "creation_date": 1491429402, "post_id": 43242208, "comment_id": 73554760, "body": "When you get the error, <code>var1</code> is <code>2</code>, which is an integer and so isn&#39;t iterable..."}, {"owner": {"reputation": 3, "user_id": 7668573, "user_type": "registered", "profile_image": "https://graph.facebook.com/1308174452561846/picture?type=large", "display_name": "Shawn Ruby", "link": "https://stackoverflow.com/users/7668573/shawn-ruby"}, "edited": false, "score": 0, "creation_date": 1491429402, "post_id": 43242208, "comment_id": 73554761, "body": "there shouldnt be any issue with me reassigning my function variables, the issue is the type error. i can make it pretty later"}, {"owner": {"reputation": 3, "user_id": 7668573, "user_type": "registered", "profile_image": "https://graph.facebook.com/1308174452561846/picture?type=large", "display_name": "Shawn Ruby", "link": "https://stackoverflow.com/users/7668573/shawn-ruby"}, "edited": false, "score": 0, "creation_date": 1491429538, "post_id": 43242208, "comment_id": 73554816, "body": "okay i did if isinstance(var,list): then sum. thank you thierry. would vote you right answer"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7668573, "user_type": "registered", "profile_image": "https://graph.facebook.com/1308174452561846/picture?type=large", "display_name": "Shawn Ruby", "link": "https://stackoverflow.com/users/7668573/shawn-ruby"}, "edited": false, "score": 0, "creation_date": 1491429892, "post_id": 43242335, "comment_id": 73554947, "body": "Thank you, Thierry helped first but it&#39;s the same work"}], "tags": [], "owner": {"reputation": 1187, "user_id": 3042057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a699dceb8500b26a5355e497b73f3865?s=128&d=identicon&r=PG", "display_name": "Emin Mastizada", "link": "https://stackoverflow.com/users/3042057/emin-mastizada"}, "is_accepted": true, "score": 1, "last_activity_date": 1491429418, "creation_date": 1491429418, "answer_id": 43242335, "question_id": 43242208, "link": "https://stackoverflow.com/questions/43242208/python-trying-to-pass-list-in-as-variable-in-function-typeerror-int-object-is/43242335#43242335", "title": "python trying to pass list in as variable in function TypeError: &#39;int&#39; object is not iterable", "body": "<p><code>test.add(2,2,2)</code> will make var1 to be equal to 2. 2 is not a list, so the line <code>x for x in self.var1, sum(self.var1)</code> will have an error, because both for and sum requires list and 2 is an integer. You can use <code>test.add([2,2,2])</code></p>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 6336503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-31as4tw6seE/AAAAAAAAAAI/AAAAAAAAAm8/XKft3Do8tKI/photo.jpg?sz=128", "display_name": "Niladri Gomes", "link": "https://stackoverflow.com/users/6336503/niladri-gomes"}, "is_accepted": false, "score": 0, "last_activity_date": 1491430387, "creation_date": 1491430387, "answer_id": 43242505, "question_id": 43242208, "link": "https://stackoverflow.com/questions/43242208/python-trying-to-pass-list-in-as-variable-in-function-typeerror-int-object-is/43242505#43242505", "title": "python trying to pass list in as variable in function TypeError: &#39;int&#39; object is not iterable", "body": "<p>This will serve your purpose:</p>\n\n<p><code>self.var1 = [x for x in range(self.var1)]</code></p>\n\n<p><code>self.var1.append(sum(self.var1))</code></p>\n\n<p>But later part of your code has many other bugs. So I wonder the code will run without fixing them.</p>\n"}], "owner": {"reputation": 3, "user_id": 7668573, "user_type": "registered", "profile_image": "https://graph.facebook.com/1308174452561846/picture?type=large", "display_name": "Shawn Ruby", "link": "https://stackoverflow.com/users/7668573/shawn-ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 43242335, "answer_count": 2, "score": 0, "last_activity_date": 1491430387, "creation_date": 1491428873, "last_edit_date": 1491429301, "question_id": 43242208, "link": "https://stackoverflow.com/questions/43242208/python-trying-to-pass-list-in-as-variable-in-function-typeerror-int-object-is", "title": "python trying to pass list in as variable in function TypeError: &#39;int&#39; object is not iterable", "body": "<p>I'm trying to pass a list in as a variable (var1) but I keep getting TypeError: 'int' object is not iterable. So I added a list comprehension thinking I need to make it iterate in order for it to sum. It didn't work, I'm not sure what the type error means exactly if it doesn't mean that I need to iterate over the list from var1. The splat works, it converts the tuple to a list then sums the list. It just won't work for a given list as var1.</p>\n\n<pre><code>    class MathDojo(object):\n        def __init__(self):\n            self.count = 0\n\n        def add(self,var1,*args):\n            self.var1 = var1\n            self.var1 = [x for x in self.var1, sum(self.var1)]\n            self.args = list(args)\n            self.args = sum(self.args)\n            self.count += (self.var1 + self.args)\n            return self\n\n\n        def subtract(self,var1,*args):\n            self.var1 = var1\n            self.var1 = sum(self.var1)\n            self.args = list(args)\n            self.args = sum(self.args)\n            self.count += -(self.var1 + self.args)\n            return self\n\n        def result(self):\n            print self.count\n            return self\n\n    test = MathDojo()\n    test.add(2,2,2).subtract([3,2,1],3,1,2).add(1,3,5,6,7).subtract(3,4,6).result()\n\n\n    Traceback (most recent call last):\n      File \"mathdojo.py\", line 26, in &lt;module&gt;\n        test.add(2,2,2).subtract([3,2,1],3,1,2).add(1,3,5,6,7).subtract(3,4,6).result()\n      File \"mathdojo.py\", line 6, in add\n        self.var1 = [x for x in var1, sum(var1)]\n    TypeError: 'int' object is not iterable\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "nohup"], "comments": [{"owner": {"reputation": 1187, "user_id": 3042057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a699dceb8500b26a5355e497b73f3865?s=128&d=identicon&r=PG", "display_name": "Emin Mastizada", "link": "https://stackoverflow.com/users/3042057/emin-mastizada"}, "edited": false, "score": 0, "creation_date": 1491428869, "post_id": 43242131, "comment_id": 73554521, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6341358/subprocess-wait-not-waiting-for-popen-process-to-finish-when-using-threads\">subprocess.wait() not waiting for Popen process to finish (when using threads)?</a>"}, {"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1491429247, "post_id": 43242131, "comment_id": 73554678, "body": "How do you produce the situation that &quot;the parent dies&quot; when you test?  Depending on this you might hunt ghosts because something actively kills your child along with the parent, so not the death of the parent is the reason for your child to perish."}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1491430514, "post_id": 43242131, "comment_id": 73555193, "body": "@Alfe: the parent exits on its own, no one does any killing here"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 1187, "user_id": 3042057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a699dceb8500b26a5355e497b73f3865?s=128&d=identicon&r=PG", "display_name": "Emin Mastizada", "link": "https://stackoverflow.com/users/3042057/emin-mastizada"}, "edited": false, "score": 0, "creation_date": 1491430547, "post_id": 43242131, "comment_id": 73555205, "body": "@EminMastizada: my question is almost completely unrelated. No threads, no wait()."}, {"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1491430937, "post_id": 43242131, "comment_id": 73555353, "body": "Then you have a strange setup I cannot reproduce.  I start an interactive Python session and type: <code>from subprocess import Popen</code>, <code>p = Popen([ &#39;bash&#39;, &#39;-c&#39;, &#39;while sleep 3; do date; done&#39; ])</code>, then I exit the session (Ctrl-D).  The child process continues to print dates into my terminal. Or using python in the child: <code>Popen([ sys.executable, &#39;-c&#39;, &#39;import time\\nwhile True:\\n  time.sleep(3.0)\\n  print time.time()\\n&#39; ])</code>"}, {"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1491431325, "post_id": 43242131, "comment_id": 73555469, "body": "Can the termination of th father have any side-effect (e. g. like a closing terminal window, a broken pipe, or similar) which in turn causes the child to terminate?"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 1, "creation_date": 1491431490, "post_id": 43242131, "comment_id": 73555515, "body": "@Alfe: you are right: I was testing under emacs where (apparently) parent existing cause tty closure; I tried bash and everything is fine now"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1491431637, "post_id": 43242131, "comment_id": 73555565, "body": "@Alfe: my deployment environment will be cron, I suspect that it will be similar to emacs"}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 2, "creation_date": 1491432178, "post_id": 43242131, "comment_id": 73555724, "body": "Most dramatic on-topic title on SO?"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 1, "creation_date": 1491432595, "post_id": 43242131, "comment_id": 73555857, "body": "@HFBrowning ;-) <a href=\"http://sds.podval.org/zombie.html\" rel=\"nofollow noreferrer\">sds.podval.org/zombie.html</a>"}], "owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1491430476, "creation_date": 1491428529, "last_edit_date": 1491430476, "question_id": 43242131, "link": "https://stackoverflow.com/questions/43242131/python-child-dies-when-parent-dies", "title": "python: child dies when parent dies", "body": "<p>I want my python job to start another process and exit, while keeping the child running.</p>\n\n<p>When I start a subprocess using</p>\n\n<pre><code>Popen([sys.executable,\"foo\",\"bar\"])\n</code></pre>\n\n<p>(as <a href=\"https://docs.python.org/2/library/subprocess.html#replacing-the-os-spawn-family\" rel=\"nofollow noreferrer\">recommended</a> instead of <code>spawn</code>), the child dies when the parent exits (the above <code>Popen</code> is about the last thing the parent does).</p>\n\n<p>This, of course, can be remedied using <code>nohup</code>:</p>\n\n<pre><code>with open(\"/dev/null\",\"w\") as fd:\n    Popen([\"nohup\",sys.executable,\"foo\",\"bar\"],stdout=fd)\n</code></pre>\n\n<p>(I have to redirect output to <code>/dev/null</code> to prevent <code>nohup</code> from \ncreating file <code>nohup.out</code> and announcing that misdeed on <code>stdout</code>).</p>\n\n<p><strong>Is there a <em>more elegant</em>/pythonic way to deal with this?</strong></p>\n\n<p>I also tried <code>os.fork</code> + <code>signal.signal(signal.SIGHUP,signal.SIG_IGN)</code> and the child still died when the parent exited.</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1491428937, "post_id": 43242121, "comment_id": 73554544, "body": "the indentation is broken in the code you posted."}, {"owner": {"reputation": 11, "user_id": 7759115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248055f842a8a47a3272c119ff53a2c4?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Brunet", "link": "https://stackoverflow.com/users/7759115/matt-brunet"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1491429286, "post_id": 43242121, "comment_id": 73554699, "body": "yes I know the class indentation is wrong but it doesn&#39;t show anyway"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1491429331, "post_id": 43242121, "comment_id": 73554725, "body": "I don&#39;t know what you mean by &quot;it doesn&#39;t show anyway&quot;, but it is showing incorrectly. The only thing we have to go on is the code as it appears in the question."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7759115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248055f842a8a47a3272c119ff53a2c4?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Brunet", "link": "https://stackoverflow.com/users/7759115/matt-brunet"}, "edited": false, "score": 0, "creation_date": 1491429760, "post_id": 43242297, "comment_id": 73554899, "body": "awesome ! I understand ! one or the other ! thanks alot"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 1, "last_activity_date": 1491429288, "creation_date": 1491429288, "answer_id": 43242297, "question_id": 43242121, "link": "https://stackoverflow.com/questions/43242121/tkinter-gui-doesnt-appear/43242297#43242297", "title": "tkinter GUI doesn&#39;t appear?", "body": "<p>In addition to indentation errors and missing import statements and missing definition of <code>LARGE_FONT</code>, you have this problem:</p>\n\n<pre><code>label = Label(self, text=\"Informations sur le suspect\")\nlabel.pack(side=\"top\", fill=\"both\", expand=True, padx=10, pady=10)\n\nperson_suspected = Label(self, text=\"Prenom\")\nperson_suspected.grid(row=0, column=0, padx=10, pady=10)\n</code></pre>\n\n<p>Both <code>label</code> and <code>person_suspected</code> share the same parent (<code>self</code>), but one uses <code>pack</code> and one uses <code>grid</code>. You can't use both of them with widgets that share a common parent. You must use only <code>grid</code> or only <code>pack</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7759115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248055f842a8a47a3272c119ff53a2c4?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Brunet", "link": "https://stackoverflow.com/users/7759115/matt-brunet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491431467, "creation_date": 1491428494, "last_edit_date": 1491431467, "question_id": 43242121, "link": "https://stackoverflow.com/questions/43242121/tkinter-gui-doesnt-appear", "title": "tkinter GUI doesn&#39;t appear?", "body": "<p>Small problem here, my code seem to be clean but the tkinter GUI doesn't appear ? Can seem to figure it out. The GUI / Code is for a report form type.</p>\n\n<p>Thanks for your help in advance</p>\n\n<pre><code>from tkinter import *\n\nclass FicheDeSignalement(Frame):\n    def __init__(self):\n        Frame.__init__(self)\n\n        programme = Frame()\n        programme.pack(side=\"top\", fill=\"both\", expand=True)\n        programme.grid_rowconfigure(0, weight=5)\n        programme.grid_columnconfigure(0, weight=5)\n\n        self.pages = {}\n        for onePage in (StartProgram, InformationsPage):\n            start_page = onePage(programme, self)\n            self.pages[onePage] = start_page\n            start_page.grid(row=0, column=0, sticky=\"nsew\")\n        self.show_pages(StartProgram)\n\n    def show_pages(self, cont):\n        see_start_page = self.pages[cont]\n        see_start_page.tkraise()\n\n\nclass StartProgram(Frame):\n    def __init__(self, parent, controller):\n        Frame.__init__(self, parent, controller)\n        label = Label(self, text=\"Fiche de Signalement\", font=LARGE_FONT)\n        label.pack(padx=10, pady=10)\n\n        start_button = Button(self, text=\"Commencer\", command=lambda: controller.see_page(InformationsPage))\n        start_button.pack()\n\n\nclass InformationsPage(Frame):\n    def __init__(self, parent, controller):\n        Frame.__init__(self, parent, controller)\n\n        label = Label(self, text=\"Informations sur le suspect\", font=LARGE_FONT)\n        label.pack(side=\"top\", fill=\"both\", expand=True, padx=10, pady=10)\n\n        person_suspected = Label(self, text=\"Prenom\")\n        person_suspected.grid(row=0, column=0, padx=10, pady=10)\n        first_name = Entry(self)\n        first_name.grid(row=0, column=1, padx=10, pady=10)\n\n        person_suspected_2 = Label(self, text=\"Nom\")\n        person_suspected_2.grid(row=0, column=2, padx=10, pady=10)\n        last_name = Entry(self)\n        last_name.grid(row=0, column=3, padx=10, pady=10)\n\n        person_height = Label(self, text=\"Grandeur\")\n        person_height.grid(row=1, column=0, padx=10, pady=10)\n        size_height = Entry(self)\n        size_height.grid(row=1, column=1, padx=10, pady=10)\n\n        person_weight = Label(self, text=\"Poids\")\n        person_weight.grid(row=1, column=2, padx=10, pady=10)\n        size_weight = Entry(self)\n        size_weight.grid(row=1, column=3, padx=10, pady=10)\n\napp = FicheDeSignalement()\napp.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "terminate", "os.system"], "comments": [{"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1491429374, "post_id": 43242113, "comment_id": 73554747, "body": "Try to use <code>os.system(&quot;python script_B.py &amp;&quot;)</code> to start your B script in the background."}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 0, "creation_date": 1491430600, "post_id": 43242113, "comment_id": 73555224, "body": "os.system is synchronous."}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 6312623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810b3104b815a8a4ed1dc5d42f9eaeba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos_Mondragon", "link": "https://stackoverflow.com/users/6312623/carlos-mondragon"}, "is_accepted": false, "score": 0, "last_activity_date": 1491432141, "last_edit_date": 1592644375, "creation_date": 1491430390, "answer_id": 43242507, "question_id": 43242113, "link": "https://stackoverflow.com/questions/43242113/how-to-terminate-a-python-program-before-its-child-is-finished-running/43242507#43242507", "title": "How to Terminate a Python program before its child is finished running?", "body": "<p>It seems you want to detach a system call to another thread.</p>\n<h1>script_A.py</h1>\n<pre><code>import subprocess\nimport sys\n\nwhile(1)\n    do some stuff\n    do even more stuff\n    if true:\n        pid = subprocess.Popen([sys.executable, &quot;python script_B.py&quot;]) # call subprocess\n        sys.exit(0)\n</code></pre>\n<p>Anyway it does not seem a good practice at all. Why do you not try the script A listens the Process Stack and if it finds script B running then stops. This is another example how you could do it.</p>\n<pre><code>import subprocess\nimport sys\nimport psutil\n\nwhile(1)\n    #This sections queries the current processes running\n    for proc in psutil.process_iter():\n        pinfo = proc.as_dict(attrs=['pid', 'name'])\n        if pinfo[ 'name' ] == &quot;script_B.py&quot;:\n            sys.exit(0)\n   \n    do some stuff\n    do even more stuff\n    if true:\n        pid = subprocess.Popen([sys.executable, &quot;python script_B.py&quot;]) # call subprocess\n        sys.exit(0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 502, "user_id": 4681442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73fec9197f51f779d2c18627ff5e3f66?s=128&d=identicon&r=PG&f=1", "display_name": "redxef", "link": "https://stackoverflow.com/users/4681442/redxef"}, "is_accepted": true, "score": 0, "last_activity_date": 1491431346, "creation_date": 1491431346, "answer_id": 43242691, "question_id": 43242113, "link": "https://stackoverflow.com/questions/43242113/how-to-terminate-a-python-program-before-its-child-is-finished-running/43242691#43242691", "title": "How to Terminate a Python program before its child is finished running?", "body": "<p>What you are describing sounds a lot like a function call:</p>\n\n<pre><code>def doScriptB():\n  # do some stuff\n  # do some more stuff\n\ndef doScriptA():\n  while True:\n    # do some stuff\n    if Your Condition:\n      doScriptB()\n      return\n\nwhile True:\n  doScriptA()\n</code></pre>\n\n<p>If this is insufficient for you, then you have to detach the process from you python process. This normally involves spawning the process in the background, which is done by appending an ampersand to the command in bash:</p>\n\n<pre><code>yes 'This is a background process' &amp;\n</code></pre>\n\n<p>And detaching said process from the current shell, which, in a simple C program is done by forking the process twice. I don't know how to do this in python, but would bet, that there is a module for this.</p>\n\n<p>This way, when the calling python process exits, it won't terminate the spawned child, since it is now independent.</p>\n"}], "owner": {"reputation": 23, "user_id": 7576857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87933aa290be246179deed0d47204243?s=128&d=identicon&r=PG&f=1", "display_name": "Allen", "link": "https://stackoverflow.com/users/7576857/allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 43242691, "answer_count": 2, "score": 2, "last_activity_date": 1491432141, "creation_date": 1491428478, "question_id": 43242113, "link": "https://stackoverflow.com/questions/43242113/how-to-terminate-a-python-program-before-its-child-is-finished-running", "title": "How to Terminate a Python program before its child is finished running?", "body": "<p>I have a script that is supposed to run 24/7 unless interrupted. This script is script A.\nI want script A to call Script B, and have script A exit while B is running. Is this possible?\nThis is what I thought would work</p>\n\n<pre><code>#script_A.py\nwhile(1)\n    do some stuff\n    do even more stuff\n    if true:\n        os.system(\"python script_B.py\")\n        sys.exit(0)\n\n\n#script_B.py\ntime.sleep(some_time)\ndo something\nos.system(\"python script_A.py\")\nsys.exit(0)\n</code></pre>\n\n<p>But it seems as if A doesn't actually exit until B has finished executing (which is not what I want to happen).\nIs there another way to do this?</p>\n"}, {"tags": ["python", "html", "user-interface", "server", "wysiwyg"], "answers": [{"tags": [], "owner": {"reputation": 606, "user_id": 2525083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/muMuh.jpg?s=128&g=1", "display_name": "xcski", "link": "https://stackoverflow.com/users/2525083/xcski"}, "is_accepted": true, "score": 3, "last_activity_date": 1505934589, "creation_date": 1505934589, "answer_id": 46330009, "question_id": 43242111, "link": "https://stackoverflow.com/questions/43242111/quick-implementation-of-gui-application-that-reads-local-server-data/46330009#46330009", "title": "Quick implementation of GUI application that reads local server data", "body": "<p>Your server should have X11 forwarding. Here is a page with an introduction:</p>\n\n<p><a href=\"http://math.msu.su/~vvb/2course/Borisenko/CppProjects/GWindow/xintro.html\" rel=\"nofollow noreferrer\">http://math.msu.su/~vvb/2course/Borisenko/CppProjects/GWindow/xintro.html</a></p>\n\n<p>I don't recommend coding an X11 application from scratch; this will take a very long time. Use an IDE like QT creator or XCode to speed up the process. If coded in C++, the X11 application should not have compatibility issues like you do with Python and PHP.</p>\n"}], "owner": {"reputation": 1096, "user_id": 5150303, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5IihF.jpg?s=128&g=1", "display_name": "Daniel R. Livingston", "link": "https://stackoverflow.com/users/5150303/daniel-r-livingston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 46330009, "answer_count": 1, "score": 0, "last_activity_date": 1505934589, "creation_date": 1491428468, "last_edit_date": 1491448940, "question_id": 43242111, "link": "https://stackoverflow.com/questions/43242111/quick-implementation-of-gui-application-that-reads-local-server-data", "title": "Quick implementation of GUI application that reads local server data", "body": "<h2>The Issue</h2>\n\n<p>I'm trying to build a very simple GUI application that either (i) runs on a local Ubuntu 14 server, or (ii) that runs locally but can read/write data from this server. Multiple people will be using this implementation to make modifications to a very simple array data file. The final solution can either be a script, dynamic webpage, or precompiled program.</p>\n\n<h2>Attempted Solutions</h2>\n\n<ul>\n<li><p>Writing an HTML file that uses PHP to read/write form data: PHP is not enabled on this server. HTML5 FileSystem API doesn't seem to do what I need it to (i.e. it seems to only sandbox IO).</p></li>\n<li><p>Python: Tkl/Tcl/wxWidgets are not available on this server, and most of the people who will be using this won't have it available locally either.</p></li>\n</ul>\n"}, {"tags": ["python", "multithreading"], "owner": {"reputation": 1582, "user_id": 1644142, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/onuP5.png?s=128&g=1", "display_name": "vivekanon", "link": "https://stackoverflow.com/users/1644142/vivekanon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491428439, "creation_date": 1491428439, "question_id": 43242108, "link": "https://stackoverflow.com/questions/43242108/python-how-to-pause-and-resume-threads", "title": "Python : How to pause and resume threads", "body": "<p>I have a Tornado server with websockets:</p>\n\n<pre><code>class SockHandler(SockJSConnection):\n\n    def on_open(self, request):\n        clients.add(self)\n\n\n    def on_message(self, message):\n\n        if (message == 'start'):\n            self.send({'message' : start_msg})\n\n            thr = threading.Thread(target=func_with_loop, args=(self.on_result,)).start()\n\n        if (message == 'next'):\n            # resume 'thr'\n\n\n    def on_result(self, response):\n        self.send(response)\n        # pause 'thr'\n\n    def on_error(self, e):\n        print(e)\n\n    def on_close(self):\n        clients.remove(self)\n        self.close()\n</code></pre>\n\n<p>On the UI i have 'start' and 'next' buttons that send these messages through the socket connection.</p>\n\n<p>I'm creating a thread at 'start' which triggers a function which runs a finite loop and calls the callback <code>self.on_result</code> in each loop.</p>\n\n<p>This works perfectly fine right now. But what I need to do is to execute commands at the two comments to pause and resume the thread. </p>\n\n<p>How should I achieve this ?\nThanks </p>\n"}, {"tags": ["python", "django", "django-templates"], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 5444527, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b423659fb3ff5bddd8e52b8c251eb407?s=128&d=identicon&r=PG&f=1", "display_name": "Dzawor", "link": "https://stackoverflow.com/users/5444527/dzawor"}, "is_accepted": false, "score": 0, "last_activity_date": 1491433750, "last_edit_date": 1491433750, "creation_date": 1491433417, "answer_id": 43243027, "question_id": 43242019, "link": "https://stackoverflow.com/questions/43242019/block-super-returns-noreversematch/43243027#43243027", "title": "block.super returns NoReverseMatch", "body": "<p>I have found the solution - which is nonintuitive for me - but it is working.</p>\n\n<p>View <code>category_error_list</code> was missing <code>category_name</code> variable, so I have fixed it but this:</p>\n\n<pre><code>def category_error_list(request, category_name):\n    category_with_errors = Category.objects.get(name=category_name)\n    error_list = Error.objects.get(category=category_with_errors)\n    return render(request, 'charts/category/list_content.html',\n                 {'category_name': category_with_errors.name,\n                  'errors_list': error_list})\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5444527, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b423659fb3ff5bddd8e52b8c251eb407?s=128&d=identicon&r=PG&f=1", "display_name": "Dzawor", "link": "https://stackoverflow.com/users/5444527/dzawor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491433750, "creation_date": 1491428032, "question_id": 43242019, "link": "https://stackoverflow.com/questions/43242019/block-super-returns-noreversematch", "title": "block.super returns NoReverseMatch", "body": "<p>I'm learning Django and I have problems with templates. </p>\n\n<p>I'm trying to add content to extended template. </p>\n\n<p>Structure of my code:</p>\n\n<pre><code>base.html\ncategory\n     -- category_detail.html\n     -- list_content.html\n</code></pre>\n\n<p>category_detail.html</p>\n\n<pre><code>{% extends 'base.html' %}\n{% block title %}\n    {{ category_name  }}\n{% endblock %}\n\n{% block description %}\n    {{ category_description }}\n{% endblock %}\n\n{% block content %}\n    &lt;div class=\"col-md-10 text-center\"&gt;\n    &lt;a href=\"{% url 'charts:category_error_list' category_name %}\" id=\"list-button\" class=\"btn btn-success btn-lg active\" role=\"button\" aria-pressed=\"true\"&gt;Error list&lt;/a&gt;\n    &lt;/div&gt;\n{% endblock %}\n</code></pre>\n\n<p>Simple subpage with button. Button should redirect to another template, hovewer it gives me NoReverseMatch.</p>\n\n<p>list_content.html (which is category_error_list defined in view)</p>\n\n<pre><code>{% extends 'category/category_detail.html' %}\n\n{% block content %}\n   {{ block.super }}\n   &lt;h1 class=\"page-header\"&gt; Some string&lt;/h1&gt;\n{% endblock %}\n</code></pre>\n\n<p>What I'm trying to achieve is displaying \"Some string\" under button. (I know it should be done better with AJAX for example, but I want to learn the basics).</p>\n\n<p>urls.py</p>\n\n<pre><code>urlpatterns = [\n    url(r'^category/$', views.categories_list, name='categories'),\n    url(r'^category/(?P&lt;category_name&gt;\\w+)/$', views.category_detail, name='category_detail'),\n    url(r'^category/(?P&lt;category_name&gt;\\w+)/list/$', views.category_error_list, name='category_error_list'),\n] \n</code></pre>\n\n<p>views.py</p>\n\n<pre><code># ${url}/category/${category}\ndef category_detail(request, category_name):\n    cat_detail = Category.objects.get(name=category_name)\n    return render(request, 'charts/category/category_detail.html',\n                 {'category_name': cat_detail.name,\n                 'category_description': cat_detail.description})\n\n#${url}/category/${category}/list\ndef category_error_list(request, category_name):\n    category_with_errors = Category.objects.filter(name=category_name)\n    error_list = Error.objects.get(category=category_with_errors)\n    return render(request, 'charts/category/list_content.html',\n                 {'errors_list': error_list})\n</code></pre>\n\n<p>Problems seems to be related with <code>urls.py</code>, but I can't find what is wrong.</p>\n\n<p>Stacktrace:</p>\n\n<pre><code>Template error:\nIn template                 \n/usr/src/app/analizer/charts/templates/charts/category/list_content.html, error at line 0\nReverse for 'category_error_list' with arguments '('',)' and keyword arguments '{}' not found. 1 pattern(s) tried: ['category/(?P&lt;category_name&gt;\\\\w+)/list/$']   \n1 : {% extends 'category/category_detail.html' %}\n2 : \n3 : {% block content %}\n4 :    {{ block.super }}\n5 :    &lt;h1 class=\"page-header\"&gt; Cos tam &lt;/h1&gt;\n6 : {% endblock %}\n7 : \n8 : \n</code></pre>\n\n<p>If I will remove <code>block.super</code> tag it is working, but I'm overriding content on parent template. What I'm doing wrong?</p>\n\n<p>I'm using Django-1.9.4.</p>\n"}, {"tags": ["python", "python-2.7", "pyspark"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1491427954, "post_id": 43241981, "comment_id": 73554162, "body": "have you tried <code>sys.path.add(&#39;&lt;some-path&gt;&#47;crfsuite&#39;)</code> ?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1491428121, "post_id": 43241981, "comment_id": 73554232, "body": "@Jean-Fran&#231;oisFabre it would be <code>append</code> or <code>insert</code>. <code>sys.path</code> is not a <code>set</code>, it is a <code>list</code>."}, {"owner": {"reputation": 31, "user_id": 7823227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdf19830563ee7cd28f166c4a626aaf?s=128&d=identicon&r=PG&f=1", "display_name": "ysc", "link": "https://stackoverflow.com/users/7823227/ysc"}, "edited": false, "score": 0, "creation_date": 1491428140, "post_id": 43241981, "comment_id": 73554242, "body": "Ah, I should add that I want to run decode.py with spark-submit . Thus the motivation for doing away with PYTHONPATH"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1491429928, "post_id": 43241981, "comment_id": 73554961, "body": "@PeterWood sorry I meant <code>append</code> of course. <code>sys.path.append(&#39;&lt;some-path&gt;&#47;crfsuite&#39;)</code>"}, {"owner": {"reputation": 31, "user_id": 7823227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdf19830563ee7cd28f166c4a626aaf?s=128&d=identicon&r=PG&f=1", "display_name": "ysc", "link": "https://stackoverflow.com/users/7823227/ysc"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1491751805, "post_id": 43241981, "comment_id": 73681561, "body": "@Jean-Fran&#231;oisFabre , would you like to rewrite your comment as an answer? I can then check it as the accepted answer."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1491754276, "post_id": 43241981, "comment_id": 73682475, "body": "would be glad too in a moment."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1491755709, "creation_date": 1491755709, "answer_id": 43309189, "question_id": 43241981, "link": "https://stackoverflow.com/questions/43241981/how-to-programmatically-replace-pythonpath/43309189#43309189", "title": "How to programmatically replace PYTHONPATH", "body": "<p><code>PYTHONPATH</code> env. variable contents is copied in <code>sys.path</code> module, so before importing you can add  some paths like this for instance:</p>\n\n<pre><code>import sys\nsys.path.append(\"/path/to/your/module\")\n# your_module.py will now be found in /path/to/your/module\nimport your_module\n</code></pre>\n\n<p>note that you can also remove paths using <code>sys.path.remove</code> if <code>PYTHONPATH</code> overrides some system lib and you don't want it to.</p>\n"}], "owner": {"reputation": 31, "user_id": 7823227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdf19830563ee7cd28f166c4a626aaf?s=128&d=identicon&r=PG&f=1", "display_name": "ysc", "link": "https://stackoverflow.com/users/7823227/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1491755709, "creation_date": 1491427843, "last_edit_date": 1491428237, "question_id": 43241981, "link": "https://stackoverflow.com/questions/43241981/how-to-programmatically-replace-pythonpath", "title": "How to programmatically replace PYTHONPATH", "body": "<p>Is there a way to programmatically replace PYTHONPATH ?\nI should add that I want to run decode.py with spark-submit</p>\n\n<p>I have the following directory structure at some-path:</p>\n\n<pre><code>decode.py\ndecode2.py\ncrfsuite/\n    crfsuite.py\n    _crfsuite.so\n    libcqdb-0.12.so\n    libcrfsuite-0.12.so\n</code></pre>\n\n<p>decode.py:</p>\n\n<pre><code>import crfsuite\nif __name__ == '__main__':\n    tagger = crfsuite.Tagger()\n</code></pre>\n\n<p>The following command works:</p>\n\n<pre><code>PYTHONPATH=./crfsuite LD_LIBRARY_PATH=./crfsuite python decode.py\n</code></pre>\n\n<p>Or if I copied crfsuite/crfsuite.py and crfsuite/_crfsuite.so to my local directory (where decode.py exists), then the following also works:</p>\n\n<pre><code>LD_LIBRARY_PATH=./crfsuite python decode.py\n</code></pre>\n\n<p>Is there a way to programmatically add .py and .so files? I came up with decode2.py:</p>\n\n<pre><code>from ctypes import *\nimport imp\n\nif __name__ == '__main__':\n    cdll.LoadLibrary('&lt;some-path&gt;/crfsuite/_crfsuite.so')\n    imp.load_source('crfsuite', '&lt;some-path&gt;/crfsuite/crfsuite.py')\n    tagger = crfsuite.Tagger()\n</code></pre>\n\n<p>Executing:</p>\n\n<pre><code>LD_LIBRARY_PATH=./crfsuite python decode2.py                                \n\nTraceback (most recent call last):\n  File \"decode2.py\", line 6, in &lt;module&gt;\n    imp.load_source('crfsuite', '&lt;some-path&gt;/crfsuite/crfsuite.py')\n  File \"&lt;some-path&gt;/crfsuite/crfsuite.py\", line 17, in &lt;module&gt;\n    _crfsuite = swig_import_helper()\n  File \"&lt;some-path&gt;/crfsuite/crfsuite.py\", line 16, in swig_import_helper\n    return importlib.import_module('_crfsuite')\n  File \"sw/anaconda2/lib/python2.7/importli/__init__.py\", line 37, in import_module\n    __import__(name)\nImportError: No module named _crfsuite\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas", "data-analysis"], "comments": [{"owner": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 3, "creation_date": 1491427717, "post_id": 43241906, "comment_id": 73554083, "body": "...If they <i>did</i> select &quot;Much shorter than expected&quot;, what <i>would</i> the probability <code>Q3</code> is a 10 be? It looks like it&#39;d be 100%, no?  It&#39;s not very clear what you&#39;re looking for, or how to arrive at it.  What if they choose &quot;About what I expected&quot;? The probability that <code>Q3</code> then is 1/3...Also, what have you tried so far?"}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "reply_to_user": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 0, "creation_date": 1491429447, "post_id": 43241906, "comment_id": 73554775, "body": "I updated with the entire survey. I dont think just calculating the percentage of answers that fit my question will give the actually probability."}, {"owner": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 2, "creation_date": 1491429650, "post_id": 43241906, "comment_id": 73554858, "body": "so what&#39;s your question? How to calculate probability?"}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "reply_to_user": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 0, "creation_date": 1491496445, "post_id": 43241906, "comment_id": 73590535, "body": "my question is as stated above &quot;if a responder answers Q2 with &#39;Much shorter than expected&#39; what is the probability they will answer Q3 with &#39;10&#39;&quot;"}, {"owner": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 0, "creation_date": 1491497357, "post_id": 43241906, "comment_id": 73591127, "body": "This may be a question for mathematics SO, it doesn&#39;t seem to necessarily be an Excel question.  It&#39;s just asking about how to calculate probability, no?"}, {"owner": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 1, "creation_date": 1491497442, "post_id": 43241906, "comment_id": 73591196, "body": "I&#39;m voting to close this question as off-topic because it&#39;s a question about calculating probability, or other mathematical operation, and not a programming question."}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "reply_to_user": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 0, "creation_date": 1491503305, "post_id": 43241906, "comment_id": 73594613, "body": "I am asking for help in implementing the solution in excel or pandas so I dont believe it is off topic."}, {"owner": {"reputation": 6095, "user_id": 1274820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/620aa435151f022b9c4070eae088d788?s=128&d=identicon&r=PG", "display_name": "user1274820", "link": "https://stackoverflow.com/users/1274820/user1274820"}, "edited": false, "score": 0, "creation_date": 1491504275, "post_id": 43241906, "comment_id": 73595206, "body": "@Precise_V5 your original question has been answered. You are now asking new questions - of which the answer is simply &quot;yes.&quot; I have also voted to close."}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "reply_to_user": {"reputation": 6095, "user_id": 1274820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/620aa435151f022b9c4070eae088d788?s=128&d=identicon&r=PG", "display_name": "user1274820", "link": "https://stackoverflow.com/users/1274820/user1274820"}, "edited": false, "score": 0, "creation_date": 1491505195, "post_id": 43241906, "comment_id": 73595680, "body": "@user1274820 it has not been answered. I am asking for a different solution than what you have given. If you cant give me one that is fine but please let others help."}, {"owner": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 0, "creation_date": 1491506925, "post_id": 43241906, "comment_id": 73596689, "body": "I think we&#39;re getting hung up on what your actual question is here - Excel is just a tool that can help you set up data and analyse.  If you&#39;re asking <i>how</i> to determine the probability, that is a little off topic for SO, which is mainly for programming questions/solutions.  If you have a formula for your probability, and are trying to determine how apply in Excel, let us know what the formula is.  I see that each &quot;much shorter than expected&quot; value is 10, and only 10. But I don&#39;t know what value you expect for &quot;Shorter than I expected&quot;, since it&#39;s different (some are 10, some are 8, etc)..."}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "reply_to_user": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 0, "creation_date": 1491508363, "post_id": 43241906, "comment_id": 73597619, "body": "@BruceWayne not all &quot;much shorter than expected&quot; value is 10, for example line 16 and 18."}, {"owner": {"reputation": 6095, "user_id": 1274820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/620aa435151f022b9c4070eae088d788?s=128&d=identicon&r=PG", "display_name": "user1274820", "link": "https://stackoverflow.com/users/1274820/user1274820"}, "edited": false, "score": 0, "creation_date": 1491512252, "post_id": 43241906, "comment_id": 73599821, "body": "@Precise_V5 you&#39;re new here - Bruce and I have been here for awhile. We can help you write formulas/macros to apply formulas, but we do not teach statistics or math - that&#39;s not what we&#39;re here for. You asked (originally) how to calculate the probability and gave a dataset. I have shown you how to do that. You then edit your question to instead ask &quot;Can I use Logistic regression&quot;? &quot;Can I somehow create a correlation matrix?&quot; These are math questions, not programming questions. I.E. off topic."}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "edited": false, "score": 0, "creation_date": 1491512796, "post_id": 43241906, "comment_id": 73600105, "body": "where should I move the my post to? cross validated?"}, {"owner": {"reputation": 6095, "user_id": 1274820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/620aa435151f022b9c4070eae088d788?s=128&d=identicon&r=PG", "display_name": "user1274820", "link": "https://stackoverflow.com/users/1274820/user1274820"}, "edited": false, "score": 0, "creation_date": 1491513760, "post_id": 43241906, "comment_id": 73600553, "body": "@Precise_V5 You can try <a href=\"http://math.stackexchange.com/\">math.stackexchange.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "edited": false, "score": 0, "creation_date": 1491496621, "post_id": 43242533, "comment_id": 73590645, "body": "Thanks for the response. I am not looking to calculate the percent of responses however. I am looking to use some type of modeling or stats technique (bayesian, logisitic regression, chi-squared test for independence, etc...). we cant assume here that the distribution of answers to the survey is representative of a larger population. our statistical error would be quite large since the sample size is so small."}, {"owner": {"reputation": 6095, "user_id": 1274820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/620aa435151f022b9c4070eae088d788?s=128&d=identicon&r=PG", "display_name": "user1274820", "link": "https://stackoverflow.com/users/1274820/user1274820"}, "reply_to_user": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "edited": false, "score": 0, "creation_date": 1491503801, "post_id": 43242533, "comment_id": 73594924, "body": "@Precise_V5 you haven&#39;t actually said what you want. Are you literally just asking &quot;can you please teach me every way to analyze data?&quot; I don&#39;t understand what it is you&#39;re asking for anymore."}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "edited": false, "score": 0, "creation_date": 1491504035, "post_id": 43242533, "comment_id": 73595048, "body": "1. if responder answer Q2 with &quot;Much shorter than expected&quot;, then what is the probability Q3 would be a 10? - looking for help answering this  2. how would i go about implementing such solution in excel or pandas - looking for help doing this  The above are my two questions. I am trying to give as much information as possible but now it seems I must make this very explicit."}, {"owner": {"reputation": 6095, "user_id": 1274820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/620aa435151f022b9c4070eae088d788?s=128&d=identicon&r=PG", "display_name": "user1274820", "link": "https://stackoverflow.com/users/1274820/user1274820"}, "reply_to_user": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "edited": false, "score": 1, "creation_date": 1491504151, "post_id": 43242533, "comment_id": 73595124, "body": "That&#39;s exactly what I answered for you already. Given the data set, the answer is <code>83.33%</code>. I have also shown you how to get this solution in excel."}, {"owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "edited": false, "score": 1, "creation_date": 1491504860, "post_id": 43242533, "comment_id": 73595496, "body": "You realize there are many differnet ways to calculate probability right? I responded to your answer and why I dont think it is accurate but I will say again - <b>we cant assume here that the distribution of answers to the survey is representative of a larger population. our statistical error would be quite large since the sample size is so small.</b>  Does the above make sense? because of that I am looking for a more robust way of measuring correlation between how Q2 is answered and how Q3 is answered."}], "tags": [], "owner": {"reputation": 6095, "user_id": 1274820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/620aa435151f022b9c4070eae088d788?s=128&d=identicon&r=PG", "display_name": "user1274820", "link": "https://stackoverflow.com/users/1274820/user1274820"}, "is_accepted": false, "score": 1, "last_activity_date": 1491431568, "last_edit_date": 1491431568, "creation_date": 1491430526, "answer_id": 43242533, "question_id": 43241906, "link": "https://stackoverflow.com/questions/43241906/analysis-method-for-categorical-survey/43242533#43242533", "title": "Analysis method for categorical survey", "body": "<p>You can calculate this using a formula:</p>\n\n<p><code>=(COUNTIFS($B$2:$B$37,\"Much shorter than I expected\",$C$2:$C$37,10)/COUNTIF($B42:$B$37,\"Much shorter than I expected\"))*100</code></p>\n\n<p>We give it the range <code>B2:B37</code> to check for the answer \"Much shorter than I expected\"</p>\n\n<p>When we find it, we check to see if they gave a 10 for Q3.</p>\n\n<p>Then we take the number where it is true over the total number times they answered \"Much shorter than I expected\", multiply by 100 and round to 2 decimal places.</p>\n\n<p><strong>Formula Example:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/vsVLL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vsVLL.png\" alt=\"Formula\"></a></p>\n\n<p>You can also modify this formula to accept different parameters:</p>\n\n<p><code>=(COUNTIFS($B$2:$B$37,E2,$C$2:$C$37,F2)/COUNTIF($B$2:$B$37,E2))*100</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/m9Ih1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m9Ih1.png\" alt=\"Example2\"></a></p>\n\n<p>And if you're just wondering about the math to calculate probability, here are the steps:</p>\n\n<ol>\n<li>Define your events and outcomes.</li>\n<li>Divide the number of events by the number of possible outcomes.</li>\n<li>Multiply the answer by 100 to make it a percent.</li>\n<li>Use the percentage as your answer.</li>\n</ol>\n\n<p><a href=\"http://www.wikihow.com/Calculate-Probability\" rel=\"nofollow noreferrer\">http://www.wikihow.com/Calculate-Probability</a></p>\n"}], "owner": {"reputation": 1, "user_id": 4245161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf81769406fde5d4dbf4c4308ff8934d?s=128&d=identicon&r=PG&f=1", "display_name": "Precise_V5", "link": "https://stackoverflow.com/users/4245161/precise-v5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491503718, "creation_date": 1491427544, "last_edit_date": 1491503718, "question_id": 43241906, "link": "https://stackoverflow.com/questions/43241906/analysis-method-for-categorical-survey", "title": "Analysis method for categorical survey", "body": "<p>I have a survey response like the following:</p>\n\n<pre><code>Q1              Q2                              Q3\n\nVery satisfied  Much shorter than I expected    10\nVery satisfied  About what I expected           10\nVery satisfied  About what I expected           8\nVery satisfied  Much shorter than I expected    10\nSatisfied       About what I expected           4\nVery satisfied  Much shorter than I expected    10\nSatisfied       About what I expected           8\nSatisfied       Much shorter than I expected    10\nVery satisfied  Shorter than I expected         9\nVery satisfied  Much shorter than I expected    10\nSatisfied       Shorter than I expected         8\nSatisfied       About what I expected           8\nSatisfied       Shorter than I expected         5\nVery satisfied  Shorter than I expected         10\nVery satisfied  Much shorter than I expected    9\nVery satisfied  Much shorter than I expected    10\nSatisfied       Much shorter than I expected    9\nVery satisfied  About what I expected           9\nVery satisfied  About what I expected           10\nVery satisfied  Shorter than I expected         10\nVery satisfied  Much shorter than I expected    10\nVery satisfied  About what I expected           10\nNeutral         Shorter than I expected         8\nVery satisfied  Shorter than I expected         6\nSatisfied       About what I expected           8\nVery satisfied  Much shorter than I expected    10\nVery satisfied  Shorter than I expected         9\nUnsatisfied     About what I expected           3\nVery satisfied  Much shorter than I expected    10\nSatisfied       Shorter than I expected         9\nNeutral         Shorter than I expected         6\nUnsatisfied     Did not receive a response      1\nVery satisfied  Much shorter than I expected    10\nVery unsatisfied    About what I expected       1\nVery satisfied  Shorter than I expected         10\nVery satisfied  Shorter than I expected         8\n</code></pre>\n\n<p>What would be the best way to answer the following question: if responder answer Q2 with \"Much shorter than expected\", then  what is the probability Q3 would be a 10.</p>\n\n<p>I'm looking for explicit answers or how to guides to that I can learn to do this in the future. I would like to accomplish this in excel or pandas. </p>\n\n<p>Can I use Logistic regression and assign a dummy variable to Q2? Can I somehow create a correlation matrix to see how correlated the responses of Q2 are with Q3?</p>\n"}, {"tags": ["python", "python-3.x", "coding-style", "computer-science", "charactercount"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1491427696, "post_id": 43241883, "comment_id": 73554074, "body": "What do you mean by &quot;count the number of times a certain character is used&quot;? Are you give a particular character and a particular file, and you are to count how many times that character is in the file? Or are you to do that for all characters that are in the file, or for all possible characters, or something else?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1491427697, "post_id": 43241883, "comment_id": 73554075, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. You&#39;ve posted code, but you haven&#39;t described a particular problem, and I doubt that this is the minimal code to exhibit the problem."}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491439271, "post_id": 43241883, "comment_id": 73557660, "body": "I have to input a .txt file to be read and used, yes. I have to than use a for loop to to &quot;count&quot; the number of times it is used in the file, my four characters to find are, the number of uppercase letters/lowercase, digits used, and # of white spaces."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491439465, "post_id": 43242119, "comment_id": 73557706, "body": "Thank you! I am stressed with this, I&#39;m used to just using the &#39;blaaah&#39;.count(&#39;a&#39;) method. Question, the &quot;symbol&quot; variable you used is that the same as my &quot;Ch&quot; so I can keep that, and I did not know about the 4 spaces! My professor has us use the tab, thanks"}, {"owner": {"reputation": 828, "user_id": 7699691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/998b1a0c218e9ceca44337ff4b91a6ca?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Che", "link": "https://stackoverflow.com/users/7699691/andrew-che"}, "reply_to_user": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491462185, "post_id": 43242119, "comment_id": 73565222, "body": "Yes, you can name variable whatever you want until you and everybody who reads your code understand its meaning. About the professor - that&#39;s surprising. You know, you can customize many editors to make them put several (including 4) spaces when pressed tab (instead of putting actual tab symbol), maybe that&#39;s what he means, and you lost this information somehow? @MrWhal3"}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491489575, "post_id": 43242119, "comment_id": 73585399, "body": "So, if I put exactly what&#39;s here, keep my three for loops and use what you did for reading the file, and also changed the variable names(close the file as well) I should be good?"}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491490314, "post_id": 43242119, "comment_id": 73585959, "body": "I did exatly what you had and put my ch in there, I&#39;ll put it in here, used python four space method and such&gt; Even doing so, I still got a blank result."}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491490378, "post_id": 43242119, "comment_id": 73586009, "body": "&quot;&quot;&quot; def main():      try:              string_input = open(&#39;text.txt&#39;, &#39;r&#39;)              string = string_input.read()              uppercase = uppercase_counter(string)         lowercase = lowercase_counter(string)         digit = digit_counter(string)              for ch in string:             if ch.isupper():                 count1 = count1 + 1                 print(count1)          return count1                                 string_input.close()                                  except:              print(&#39;Error&#39;) main()"}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491490422, "post_id": 43242119, "comment_id": 73586046, "body": "@andrewchervatkin"}, {"owner": {"reputation": 828, "user_id": 7699691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/998b1a0c218e9ceca44337ff4b91a6ca?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Che", "link": "https://stackoverflow.com/users/7699691/andrew-che"}, "reply_to_user": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491491978, "post_id": 43242119, "comment_id": 73587174, "body": "What error, what&#39;s its traceback and message? And why did you put your code in 3 double-quotes? You definetly should remove them to make it work @MrWhal3"}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491512320, "post_id": 43242119, "comment_id": 73599859, "body": "I fixed my issue, Community question here for everyone, when I ran my program with .isspace,  I got 871 for the whitspace count from my text file. I also got 144 for just, &quot; &quot;, and that&#39;s just from the space bar.. Which would be the total white space? I&#39;ll put my code here"}], "tags": [], "owner": {"reputation": 828, "user_id": 7699691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/998b1a0c218e9ceca44337ff4b91a6ca?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Che", "link": "https://stackoverflow.com/users/7699691/andrew-che"}, "is_accepted": false, "score": 1, "last_activity_date": 1491428834, "last_edit_date": 1491428834, "creation_date": 1491428488, "answer_id": 43242119, "question_id": 43241883, "link": "https://stackoverflow.com/questions/43241883/python-for-loop-character-counting/43242119#43242119", "title": "Python FOR loop character counting", "body": "<p>Firstly, never use tabs in Python. Always use 4-spaces indent, it's a common practice. It's convenient when everybody does such simple things the same way, helps to understand someone else's code.</p>\n\n<p>What they are telling you:</p>\n\n<pre><code>character_strings = string_input.readlines()\n</code></pre>\n\n<p>this line reads all text from the <code>string_input</code> file, splits it by newline symbol and returns a list of lines. As I can see, there is no need to care about lines, you can read the whole text to a single long string</p>\n\n<pre><code>string = string_input.read()\n</code></pre>\n\n<p>So you should pass that very string to all <code>_counter</code>s you have.</p>\n\n<pre><code>uppercase = uppercase_counter(string)\n</code></pre>\n\n<p>And so on.</p>\n\n<p>About doing the same with for loops, you need to iterate over symbols of the string</p>\n\n<pre><code>for symbol in string:\n    if symbol.isupper():\n        count1 = count1 + 1\n</code></pre>\n\n<p>Same with <code>islower</code> and <code>isdigit</code></p>\n\n<p>(Naming variables like <code>something1</code>, <code>something2</code> and <code>something3</code> is usually a bad practice. Perhaps you should think of better names.)</p>\n\n<p>P. S. You forgot to close the file. Insert <code>string_input.close()</code> before first <code>except</code>. It's always recommended to close a file when done with it.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491439594, "post_id": 43242280, "comment_id": 73557731, "body": "Set default character would be like, &quot;.islower&quot; correct? Something like; count.islower(character)?? I may be thinking too much on ALL of this and leaving little/major key parts I should know, but yes you helped, thanks"}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491439839, "post_id": 43242280, "comment_id": 73557792, "body": "With your example, where would I put the character exactly, since I am looking for the number of lower/uppercase letter, digits and Han white spaces?"}, {"owner": {"reputation": 35, "user_id": 6765372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbBgR.jpg?s=128&g=1", "display_name": "Francisco G&#243;mez Garc&#237;a", "link": "https://stackoverflow.com/users/6765372/francisco-g%c3%b3mez-garc%c3%ada"}, "reply_to_user": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491454502, "post_id": 43242280, "comment_id": 73561512, "body": "Let say you have in your .txt file the following string: &#39;Hello world!&#39;"}, {"owner": {"reputation": 35, "user_id": 6765372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbBgR.jpg?s=128&g=1", "display_name": "Francisco G&#243;mez Garc&#237;a", "link": "https://stackoverflow.com/users/6765372/francisco-g%c3%b3mez-garc%c3%ada"}, "reply_to_user": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491454517, "post_id": 43242280, "comment_id": 73561521, "body": "The output should be something like this: {&#39; &#39;: 1, &#39;!&#39;: 1, &#39;H&#39;: 1, &#39;d&#39;: 1, &#39;e&#39;: 1, &#39;l&#39;: 3, &#39;o&#39;: 2, &#39;r&#39;: 1, &#39;w&#39;: 1} This means you have ONE whitespace, ONE especial character (!), ONE uppercase letter (H) one lowercase letter (d)... and so on."}, {"owner": {"reputation": 35, "user_id": 6765372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbBgR.jpg?s=128&g=1", "display_name": "Francisco G&#243;mez Garc&#237;a", "link": "https://stackoverflow.com/users/6765372/francisco-g%c3%b3mez-garc%c3%ada"}, "reply_to_user": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491454630, "post_id": 43242280, "comment_id": 73561551, "body": "This code will show you all characters types in your file, it automatically includes lowercase and uppercase characters since both type of characters are differents."}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491489506, "post_id": 43242280, "comment_id": 73585350, "body": "If I put exactly what you had, but changed the names and used my .txt file. That  would be exactly what I need? Is the character variable in the for loop something I need to change?"}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491491346, "post_id": 43242280, "comment_id": 73586730, "body": "I got my code to work the way you had it, now how would I read, or just count, the character types, for example I want JUST uppercase letters to be counters and than to beable to put: print(&#39;the number of uppercase characters:, count_uppercaseletters)"}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491491370, "post_id": 43242280, "comment_id": 73586749, "body": "I need to do it for upper/lowercase, digits, and whitespaces."}, {"owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "edited": false, "score": 0, "creation_date": 1491491422, "post_id": 43242280, "comment_id": 73586786, "body": "Hope youcan continue to help! @Francisco"}], "tags": [], "owner": {"reputation": 35, "user_id": 6765372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbBgR.jpg?s=128&g=1", "display_name": "Francisco G&#243;mez Garc&#237;a", "link": "https://stackoverflow.com/users/6765372/francisco-g%c3%b3mez-garc%c3%ada"}, "is_accepted": false, "score": 0, "last_activity_date": 1491429190, "creation_date": 1491429190, "answer_id": 43242280, "question_id": 43241883, "link": "https://stackoverflow.com/questions/43241883/python-for-loop-character-counting/43242280#43242280", "title": "Python FOR loop character counting", "body": "<p>Let's make it simple.</p>\n\n<p>You have to <em>open</em> and <em>read</em> this file content... this .txt file. So try this:</p>\n\n<pre><code>someFile = open('file.txt')      # Open the file\nfileContent = someFile.read()    #Read its content and store it in fileContent variable\n</code></pre>\n\n<p>Now, you have to iterate over the string contained in <code>fileContent</code>.</p>\n\n<pre><code>count = {}\nfor character in fileContent:\n    count.setdefault(character, 0)\n    count[character] = count[character] + 1\n\nprint(count)\n</code></pre>\n\n<p>The program loops over each character in the <code>fileContent</code> variable\u2019s string, counting how often each character appears.</p>\n\n<p>Finally, the output will be a dictionary where the keys are each kind of character and values are the number of time they appears, that includes all lowercase letters, uppercase letters and space characters.</p>\n\n<p>I hope I helped you.</p>\n"}], "owner": {"reputation": 11, "user_id": 7823236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46045e7bf772141de1c415985f1b4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Whal3", "link": "https://stackoverflow.com/users/7823236/mr-whal3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1511274529, "creation_date": 1491427441, "last_edit_date": 1511274529, "question_id": 43241883, "link": "https://stackoverflow.com/questions/43241883/python-for-loop-character-counting", "title": "Python FOR loop character counting", "body": "<p>Here's my code for my class, i'm suppose to use a for loop to count the number of times a certain character is used, I was told to do each character instead of a line, what does this mean? Besides the basic string line, I have no clue most of the time, I'm currently online and can never understand what my teacher means most of the time. This is the only code creation I have had trouble with character counting.</p>\n\n<pre><code>   def main():\n\n        try:\n\n                uppercase = 0\n                lowercase = 0\n                digits = 0\n                whitespace = 0\n\n                string_input = open('text.txt', 'r')\n\n                character_strings = string_input.readlines()\n\n                for i in range(len(character_strings)):\n                    character_strings[i] = character_strings[i].rstrip(\"\\n\")\n\n                uppercase = uppercase_counter(character_strings)\n                lowercase = lowercase_counter(character_strings)\n                digits = digit_counter(character_strings)\n\n                count1 = 0\n                count2 = 0\n                count3 = 0\n\n                for ch in string:\n                        if ch.isupper():\n                                count1 = count1 + 1\n\n                return count1\n                print(count1)\n\n                for ch in string:\n                        if ch.islower():\n                                count2 = count2 + 1\n\n                return count2\n                print(count2)\n\n                for ch in string:\n                        if ch.isdigit():\n                                count3 = count3 + 1    \n\n                return count3\n                print(count3)\n\n        except IOError:\n                print(\"The file could not be found\")\n        except IndexError:\n                print(\"There was an indexing error\")\n        except:\n                print(\"An error occurred\")\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "maya"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1491427479, "post_id": 43241815, "comment_id": 73553974, "body": "The short answer is you can&#39;t do that; you can&#39;t have an assignment in a list comprehension. Rather than <code>enumerate</code> I&#39;d probably create a <code>node</code>, set its <code>path</code> <i>then</i> <code>append</code> it to the list. Alternatively, perhaps you could expand on <i>&quot;breaks horrible&quot;</i> with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and we can help fix the problem with what sounds like a fundamentally more straightforward approach?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1491427799, "post_id": 43241815, "comment_id": 73554114, "body": "I guess you could write <code>[n for n, i in ((node(), i) for i in cmds.ls(sl=1, l=1)) if setattr(n, &#39;path&#39;, i) is None]</code>, but I would <b>strongly encourage you not to</b>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1491427858, "post_id": 43241815, "comment_id": 73554133, "body": "@jonrsharpe No! Burn it with fire! ;) Not only are you mixing a side-effect with a functional construct, you have a side effect in your condition!"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1491427929, "post_id": 43241815, "comment_id": 73554154, "body": "@juanpa.arrivillaga <i>look into the heart of darkness</i>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1491427954, "post_id": 43241815, "comment_id": 73554163, "body": "It&#39;s looking <b>right back at me</b>."}, {"owner": {"reputation": 103, "user_id": 3868877, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/29016405a6df55aec0c030f3718243dc?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Knueppel", "link": "https://stackoverflow.com/users/3868877/colin-knueppel"}, "edited": false, "score": 0, "creation_date": 1491430655, "post_id": 43241815, "comment_id": 73555242, "body": "I posted the issue before and no one gave a good answer. <a href=\"http://stackoverflow.com/questions/42674768/maya-python-unbound-method-due-to-reload/42817981#42817981\" title=\"maya python unbound method due to reload\">stackoverflow.com/questions/42674768/&hellip;</a>"}, {"owner": {"reputation": 11342, "user_id": 1936075, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/keYz5.jpg?s=128&g=1", "display_name": "theodox", "link": "https://stackoverflow.com/users/1936075/theodox"}, "edited": false, "score": 0, "creation_date": 1491451538, "post_id": 43241815, "comment_id": 73560646, "body": "Looking at this and the related question you linked -- are you sure you need a special class to track your objects at all?   Does it do something that pymel or uuids won&#39;t do?"}, {"owner": {"reputation": 103, "user_id": 3868877, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/29016405a6df55aec0c030f3718243dc?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Knueppel", "link": "https://stackoverflow.com/users/3868877/colin-knueppel"}, "edited": false, "score": 0, "creation_date": 1491488226, "post_id": 43241815, "comment_id": 73584264, "body": "Started this in maya 2014. When started, the openMaya method was the only way to track objects regardless of rename or reparenting that I had found. The method itself works flawlessly. Its the russian nesting dolls approach of classes across files I built up over time that doesn&#39;t work, and because of that reload issue in the other question. I&#39;ve worked my way around it now. Just wish I hadn&#39;t had to go through all these hoops because python loses class reference due to seemingly inscrutable import issues."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2806536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/caacd8715a5f30c2d3b52a80b2ce63ce?s=128&d=identicon&r=PG&f=1", "display_name": "LismUK", "link": "https://stackoverflow.com/users/2806536/lismuk"}, "edited": false, "score": 0, "creation_date": 1491427729, "post_id": 43241918, "comment_id": 73554088, "body": "List comprehension wont execute because of capital :)"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 1, "last_activity_date": 1491427763, "last_edit_date": 1491427763, "creation_date": 1491427587, "answer_id": 43241918, "question_id": 43241815, "link": "https://stackoverflow.com/questions/43241815/maya-python-single-line-class-instance-and-class-variable-assignment/43241918#43241918", "title": "Maya Python single line class instance and class variable assignment?", "body": "<p>Not only is the first example invalid syntax, what you are attempting to do is fundamentally unsound: <strong>do not mix list-comprehensions with state-change (i.e. assigning to an object attribute).</strong> Whatever <code>node</code> is, it seems the best way to deal with your issue is to add a parameter to <code>node.__init__</code> that allows you to set <code>path</code> when you instantiate a <code>node</code> object.  And then you could do <code>things = [node(x) for x in cmds.ls(sl=1, l=1)]</code></p>\n\n<p>So, the most basic approach using a single positional argument to <code>__init__</code>:</p>\n\n<pre><code>class Node(object):\n    def __init__(self, path):\n        self.path = path\n...\n\nthings = [Node(x) for x in cmds.ls(sl=1, l=1)]\n</code></pre>\n\n<p>More importantly, though, using a for-loop is <em>perfectly Pythonic</em>. Trying to get your code to be all one-liners is a fundamentally misguided. Here is how I would work with what you have already and make it more Pythonic:</p>\n\n<pre><code>things = []\nfor path in cmds.ls(sl=1,l=1):\n    n = node()\n    n.path = path\n    things.append(n)\n</code></pre>\n\n<p>The above is perfectly pythonic as it is...</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 3868877, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/29016405a6df55aec0c030f3718243dc?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Knueppel", "link": "https://stackoverflow.com/users/3868877/colin-knueppel"}, "is_accepted": true, "score": 0, "last_activity_date": 1491830073, "last_edit_date": 1495542333, "creation_date": 1491489054, "answer_id": 43258164, "question_id": 43241815, "link": "https://stackoverflow.com/questions/43241815/maya-python-single-line-class-instance-and-class-variable-assignment/43258164#43258164", "title": "Maya Python single line class instance and class variable assignment?", "body": "<p>The reasons for the original question are related to this problem: <a href=\"https://stackoverflow.com/questions/42674768/maya-python-unbound-method-due-to-reload/42817981#42817981\">Maya Python: Unbound Method due to Reload()</a>. The solution I've found is essentially to rework my tracking method to not need an initialization, and then, to avoid the unbound error, I create the initialization sequence nearest to its use.</p>\n\n<p>trackingMethod file:</p>\n\n<pre><code>import maya.cmds as cmds\nimport maya.OpenMaya as om\n\nclass pathTracking(object):\n    def setPathing(self, instance):\n        sel = om.MSelectionList()\n        sel.add(instance.nodeName)\n        try:\n            instance.obj = om.MObject()\n            sel.getDependNode(0, instance.obj)\n        except:\n            cmds.warning(instance.nodeName + \" is somehow invalid as an openMaya obj node.\")\n        try:\n            instance.dag = om.MDagPath()\n            sel.getDagPath(0,instance.dag)\n        except:\n            pass\n    def __set__(self, instance, value):\n        if isinstance(value,dict):\n            if \"dag\" in value:\n                instance.dag = value[\"dag\"]\n            if \"obj\" in value:\n                instance.obj = value[\"obj\"]\n            if \"nodeName\" in value:\n                instance.nodeName = value[\"nodeName\"]\n                self.setPathing(instance)\n        else:\n            if isinstance(value, basestring):\n                instance.nodeName = value\n                self.setPathing(instance)\n    def __get__(self, instance, owner):\n        if instance.dag and instance.dag.fullPathName():\n            return instance.dag.fullPathName()\n        return om.MFnDependencyNode(instance.obj).name()\n\nclass exampleNode(object):\n    path = pathTracking()\n    dag = None\n    obj = None\n    nodeName = \"\"\n    someVar1 = \"blah blah\"\n\n    def initialize(self,nodeName,obj,dag):\n        if obj or dag:\n            self.obj = obj\n            self.dag = dag\n        elif nodeName:\n            self.path = nodeName\n        else:\n            return False\n        return True\n</code></pre>\n\n<p>other file:</p>\n\n<pre><code>import trackingMethod as trm\n\ncircleExample(trm.exampleNode):\n    def __init__(self,nodeName=\"\",dag=None,obj=None):\n        if not self.initialize(nodeName,obj,dag)\n            self.path = cmds.circle()[0]\n</code></pre>\n\n<p>and with this method I can do</p>\n\n<pre><code>circles = [circleExample(nodeName=x) for x in cmds.ls(sl=1,l=1)]\n</code></pre>\n\n<p>PS. I ran into some stuff that required the class to be initialized before some of its bits could be created. Below is a custom dict that required I pass an instance of self to it at the time the dict is created. Recreating these dict structures in every class that interacts with a transform would have been tedious. The solution was to put these dependent class initializations into a function in the transform class. That way the final class inherits the function to create the dicts and can call it in their init. This avoids a whole russian nesting doll of <em>init</em> statements that breaks when you have multiple files inheriting from a single class. </p>\n\n<p>While this solution may seem obvious to some, I was just about pulling out hair to think of a way around a chicken egg situation of needing to init the class to get self, but not being able to init class due to unbound method errors.</p>\n\n<pre><code>class sqetDict(dict):\n    def __init__(self,instance,*args,**kwargs):\n        self.instance = instance\n        dict.__init__(self,*args,**kwargs)\n\n    def __getitem__(self, key):\n        thing = dict.__getitem__(self,key)\n        if key in self and isinstance(thing,(connection,Attribute,xform)):\n            return thing.__get__(self.instance,None)\n        else:\n            return dict.__getitem__(self,key)\n\n    def __setitem__(self, key, value):\n        thing = dict.__getitem__(self,key)\n        if key in self and isinstance(thing,(connection,Attribute,xform)):\n            thing.__set__(self.instance,value)\n        else:\n            dict.__setitem__(self,key,value)\n</code></pre>\n\n<p>These dicts would be initialized like this:</p>\n\n<pre><code>def enableDicts(self):\n    self.connection = sqetDict(self, {\"txyz\": connection(\"translate\"), \"tx\": connection(\"tx\"),\n                                      \"ty\": connection(\"ty\"), \"tz\": connection(\"tz\"),\n                                      \"rxyz\": connection(\"rotate\"),\n                                      \"rx\": connection(\"rx\"), \"ry\": connection(\"ry\"), \"rz\": connection(\"rz\"),\n                                      \"sxyz\": connection(\"scale\"),\n                                      \"sx\": connection(\"sx\"), \"sy\": connection(\"sy\"), \"sz\": connection(\"sz\"),\n                                      \"joxyz\": connection(\"jointOrient\"),\n                                      \"jox\": connection(\"jox\"), \"joy\": connection(\"joy\"), \"joz\": connection(\"joz\"),\n                                      \"worldMatrix\": connection(\"worldMatrix\"),\n                                      \"worldInvMatrix\": connection(\"worldInverseMatrix\"),\n                                      \"parentInvMatrix\": connection(\"parentInverseMatrix\")})\n    self.value = sqetDict(self, {\"txyz\": Attribute(\"translate\", \"double3\"),\n                                 \"tx\": Attribute(\"tx\", \"float\"), \"ty\": Attribute(\"ty\", \"float\"),\n                                 \"tz\": Attribute(\"tz\", \"float\"),\n                                 \"rxyz\": Attribute(\"rotate\", \"double3\"),\n                                 \"rx\": Attribute(\"rx\", \"float\"), \"ry\": Attribute(\"ry\", \"float\"),\n                                 \"rz\": Attribute(\"rz\", \"float\"),\n                                 \"sxyz\": Attribute(\"scale\", \"double3\"),\n                                 \"sx\": Attribute(\"sx\", \"float\"), \"sy\": Attribute(\"sy\", \"float\"),\n                                 \"sz\": Attribute(\"sz\", \"float\"),\n                                 \"joxyz\": Attribute(\"jointOrient\", \"double3\"),\n                                 \"jox\": Attribute(\"jox\", \"float\"), \"joy\": Attribute(\"joy\", \"float\"),\n                                 \"joz\": Attribute(\"joz\", \"float\"),\n                                 \"rotOrder\": Attribute(\"rotateOrder\", \"string\"),\n                                 \"worldMatrix\": Attribute(\"worldMatrix\", \"matrix\"),\n                                 \"worldInvMatrix\": Attribute(\"worldInverseMatrix\", \"matrix\"),\n                                 \"parentInvMatrix\": Attribute(\"parentInverseMatrix\", \"matrix\"),\n                                 \"rotatePivot\": Attribute(\"rotatePivot\", \"double3\"),\n                                 \"visibility\": Attribute(\"visibility\", \"long\")})\n    self.xform = sqetDict(self, {\"t\": xform(\"t\"), \"ro\": xform(\"ro\"), \"s\": xform(\"s\")})\n</code></pre>\n\n<p>my connection class does the cmds.connectAttr when sent a value, and it returns the various attributes of a connection as a dict like {\"in\": \"in connection\", \"out\":[\"outConn1\",\"outCon2\",etc..], \"path\":\"fullpath name to attribute\"}. So you could do something like, thingA.connection[\"txyz\"] = thingB.connection[\"txyz\"][\"path\"] to connect the relative translates of two objects.</p>\n\n<p>My Attribute class allows set and get of attribute values, like temp = thing.value[\"txyz\"] results in temp = (value,value,value), and thing.value[\"txyz\"]=(0,0,0) would zero the translate. </p>\n\n<p>xform does the values thing but in absolute world space values.</p>\n"}], "owner": {"reputation": 103, "user_id": 3868877, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/29016405a6df55aec0c030f3718243dc?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Knueppel", "link": "https://stackoverflow.com/users/3868877/colin-knueppel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 43258164, "answer_count": 2, "score": 1, "last_activity_date": 1491830073, "creation_date": 1491427153, "last_edit_date": 1491427311, "question_id": 43241815, "link": "https://stackoverflow.com/questions/43241815/maya-python-single-line-class-instance-and-class-variable-assignment", "title": "Maya Python single line class instance and class variable assignment?", "body": "<p>I want to do something like this,</p>\n\n<pre><code>things = [ node().path = x for x in cmds.ls(sl=1,l=1)]\n</code></pre>\n\n<p>but I'm getting an invalid syntax error. So I've had to use this instead,</p>\n\n<pre><code>things = []\nfor i, thing in enumerate(cmds.ls(sl=1,l=1)):\n    things.append(node())\n    things[i].path = thing\n</code></pre>\n\n<p>The first invalid code is nice clean and short. The second one is tedious. How can I get some code that allows me to assign a class variable in the same creation line WITHOUT using an initialization. I'm avoiding initialization because this class is going to be inherited into many other classes across multiple files, and my previous version that uses initializations breaks horrible when imported into too many packages, causing unbound method errors.</p>\n"}, {"tags": ["python", "numpy", "h5py"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1491427379, "post_id": 43241733, "comment_id": 73553911, "body": "We need to know more about the dataset.  In <code>h5py</code> a set may be 2d with 1 variable dimension, i.e a ragged 2d array.  But <code>numpy</code> 2d arrays have to be rectangular.  A ragged set is loaded as 1d numpy with object dtype.  Access to such an array is slower. In MATLAB is that array being loaded as a <code>cell</code>?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1491427596, "post_id": 43241733, "comment_id": 73554034, "body": "<a href=\"http://stackoverflow.com/questions/42658438/storing-multidimensional-variable-length-array-with-h5py\" title=\"storing multidimensional variable length array with h5py\">stackoverflow.com/questions/42658438/&hellip;</a> - A SO question about variable length array."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1491428479, "post_id": 43241733, "comment_id": 73554372, "body": "How about information for the dataset as a whole, not just one &#39;row&#39;?"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1491490166, "post_id": 43241733, "comment_id": 73585849, "body": "Do you have a chunked Dataset? If so, what is the chunk size of your Dataset? Do you really have a list of arrays of variable length? It looks like you are having one array with shape  (31646700, 42)..."}], "answers": [{"tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1491428406, "last_edit_date": 1491428406, "creation_date": 1491428100, "answer_id": 43242038, "question_id": 43241733, "link": "https://stackoverflow.com/questions/43241733/fastest-way-to-go-through-a-long-list-of-arrays/43242038#43242038", "title": "Fastest way to go through a long list of arrays", "body": "<p>this may help. first change nd arry to 1d arry; second sorted it; third find index of number. In this case, you do need iterate all the items. <br></p>\n\n<pre><code>import numpy as np\n\nnewData = dset_data.ravel()\nnewData.sort()\nindex = np.searchsorted(data,400)\nres = newData[:index ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1491428831, "creation_date": 1491428831, "answer_id": 43242201, "question_id": 43241733, "link": "https://stackoverflow.com/questions/43241733/fastest-way-to-go-through-a-long-list-of-arrays/43242201#43242201", "title": "Fastest way to go through a long list of arrays", "body": "<p>If my guess that <code>t_stamp</code> is a 1d array of varying length, you could collect all elements >400 with:</p>\n\n<pre><code>list_value = []\nfor t_stamp in (dset_data):\n    list_value.append(t_stamp[t_stamp&gt;400])\n    # list_value.extend()\n</code></pre>\n\n<p>Use <code>append</code> if you want to collect the values in sublists. Use extend if you want one flat list.</p>\n\n<p>It still iterates on the 'rows' of <code>dset_data</code>, but selection from each row will be much faster.</p>\n\n<p>If all rows are 42 long, then <code>dset_data.value</code> will be a 2d numpy array:</p>\n\n<pre><code>dset_data[dset_data&gt;400]\n</code></pre>\n\n<p>will be a flat array of the selected values</p>\n"}], "owner": {"reputation": 13, "user_id": 7822129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847880cbe81c6f626e18ce1d753b1f79?s=128&d=identicon&r=PG&f=1", "display_name": "ukey", "link": "https://stackoverflow.com/users/7822129/ukey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491428831, "creation_date": 1491426846, "last_edit_date": 1491428726, "question_id": 43241733, "link": "https://stackoverflow.com/questions/43241733/fastest-way-to-go-through-a-long-list-of-arrays", "title": "Fastest way to go through a long list of arrays", "body": "<p>I have a data set from electrophysiological recordings in a hdf5 file in the form of what is really close to numpy arrays from my understanding and what I am trying to do is access it in the most efficient and fast way.</p>\n\n<p><strong>Let me explain:</strong> The dataset is a list of arrays (2D-array?); each array contains x number of channels (recording sites), usually around 32-64.</p>\n\n<p><strong>The problem is the following:</strong> There are millions of arrays and it's taking forever to loop through every individual array. Moreover, I have to loop through each channel in each array in order retrieve the values.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import h5py\n\nf_kwd = h5py.File(\"experiment1_100.raw.kwd\", \"r\") # reads hdf5 file\ndset_data = f_kwd['recordings/0/data']\nprint (len(dset_data)) # prints 31646700\nprint (dset_data[0]) # prints the following\n\n[    94   1377    208    202    246    387   1532   1003    460    665\n810    638    223    363    990     78   -139    191     63    630\n763     60    682   1025    472   1113   -137    360   1216    297\n-71    -35   -477   -498   -541   -557  27776   2281 -11370  32767\n-28849 -30243]\n\nlist_value = []\nfor t_stamp in (dset_data):\n    for value in t_stamp:\n        if value &gt; 400:\n            list_value.append(value)\n</code></pre>\n\n<p>Is there a way to make this a lot more efficient and quick?\nDo I have to use numpy and if so, how can I make this happen? I feel like I am doing something wrong here.</p>\n\n<p><strong>EDIT :</strong>\nHere are some additional info about the  first array in dataset for the following attributes:  </p>\n\n<blockquote>\n  <p>.shape -> (42,)<br>\n  .itemsize -> 2<br>\n  .dtype -> int16<br>\n  .size -> 42<br>\n  .ndim -> 1</p>\n</blockquote>\n\n<p><strong>EDIT2 :</strong>\n..and the dataset itself:  </p>\n\n<blockquote>\n  <p>.shape -> (31646700, 42)<br>\n  .dtype -> int16<br>\n  .size -> 1329161400  </p>\n</blockquote>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 239, "user_id": 6785153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oSrXtjZ5ExM/AAAAAAAAAAI/AAAAAAAAC2o/pm_R2z2w-lA/photo.jpg?sz=128", "display_name": "Sergio Guadarrama", "link": "https://stackoverflow.com/users/6785153/sergio-guadarrama"}, "is_accepted": false, "score": 0, "last_activity_date": 1491505230, "creation_date": 1491505230, "answer_id": 43263688, "question_id": 43241728, "link": "https://stackoverflow.com/questions/43241728/tfslim-valueerror-can-not-squeeze-dim1-expected-a-dimension-of-1-got-3-for/43263688#43263688", "title": "TFSlim ValueError Can not squeeze dim[1], expected a dimension of 1, got 3 for &#39;vgg_16/fc8/squeezed&#39; (op: &#39;Squeeze&#39;) with input shapes: [3,3,3,2]", "body": "<p>Can you try just defining the batch directly:</p>\n\n<pre><code>with tf.Graph().as_default():\n\n    tf.logging.set_verbosity(tf.logging.INFO)\n    images = tf.randon_uniform([BATCH_SIZE, 224, 224, 3])\n    labels = tf.randon_uniform([BATCH_SIZE], max_value=NUM_CLASES)\n    with slim.arg_scope(vgg.vgg_arg_scope()):\n        logits, _ = vgg.vgg_16(images, num_classes=NUM_CLASSES, is_training=True)\n</code></pre>\n\n<p>Also you can debug the shapes of the tensors images and labels before passing them to vgg.vgg_16</p>\n"}], "owner": {"reputation": 1, "user_id": 5249683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o76TJzClPQk/AAAAAAAAAAI/AAAAAAAABVg/mZfeB84Qig0/photo.jpg?sz=128", "display_name": "Rohit Alekar", "link": "https://stackoverflow.com/users/5249683/rohit-alekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1585, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491505230, "creation_date": 1491426838, "question_id": 43241728, "link": "https://stackoverflow.com/questions/43241728/tfslim-valueerror-can-not-squeeze-dim1-expected-a-dimension-of-1-got-3-for", "title": "TFSlim ValueError Can not squeeze dim[1], expected a dimension of 1, got 3 for &#39;vgg_16/fc8/squeezed&#39; (op: &#39;Squeeze&#39;) with input shapes: [3,3,3,2]", "body": "<p>Trying to fine-tune the Tensorflow Slim VGG16 net on a different set of class labels ( 2 ) excluding the fc8. On execution I am getting this error.</p>\n\n<h1>Error</h1>\n\n<pre><code>logits, _ = vgg.vgg_16(images, num_classes=NUM_CLASSES, is_training=True)\n/models/slim/nets/vgg.py\", line 178, in vgg_16\nnet = tf.squeeze(net, [1, 2], name='fc8/squeezed')\n/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 2273, in squeeze\n--- STACK TRACE OMITTED -----\n/anaconda/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.py\", line 675, in _call_cpp_shape_fn_impl\nraise ValueError(err.message)\nValueError: Can not squeeze dim[1], expected a dimension of 1, got 3 for 'vgg_16/fc8/squeezed' (op: 'Squeeze') with input shapes: [3,3,3,2].\n</code></pre>\n\n<h1>Code</h1>\n\n<pre><code> BATCH_SIZE    = 3\n NUM_CLASSES = 2\n def load_batch():\n    filepaths, labels = read_label_file(train_labels_file)\n    images = ops.convert_to_tensor(filepaths, dtype=dtypes.string)\n    labels = ops.convert_to_tensor(labels, dtype=dtypes.int32)\n    input_queue = tf.train.slice_input_producer([images, labels],shuffle=False)\n    file_content = tf.read_file(input_queue[0])\n    image = tf.image.decode_jpeg(file_content, channels=NUM_CHANNELS)\n    label = input_queue[1]\n    image.set_shape([387,408,3])\n    size = tf.constant([224,224],dtype=tf.int32)\n    image = tf.image.resize_images(image,size)\n    image_batch, label_batch = tf.train.batch([image, label],batch_size=BATCH_SIZE , num_threads=1)\n    return image_batch , label_batch\n\n with tf.Graph().as_default():\n\n    tf.logging.set_verbosity(tf.logging.INFO)\n    images,labels = load_batch()\n    with slim.arg_scope(vgg.vgg_arg_scope()):\n        logits, _ = vgg.vgg_16(images, num_classes=NUM_CLASSES, is_training=True)\n    .... \n</code></pre>\n"}, {"tags": ["python", "base64"], "comments": [{"owner": {"reputation": 81, "user_id": 2479832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad957cbacb731efa11f7ca73e9ada41?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Gulliver", "link": "https://stackoverflow.com/users/2479832/daniel-gulliver"}, "edited": false, "score": 1, "creation_date": 1491427592, "post_id": 43241723, "comment_id": 73554029, "body": "Have you tried running the same code with a FLAC file that you&#39;ve already downloaded? At the moment, you&#39;re downloading the file each time you run the code, which is dependent on the speed of your Internet connection."}, {"owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1491427615, "post_id": 43241723, "comment_id": 73554042, "body": "Could you edit the question to show the exceptions you are seeing?"}, {"owner": {"reputation": 11, "user_id": 7823213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8e952d620a58eca49c32104a3eb64c?s=128&d=identicon&r=PG&f=1", "display_name": "Marius-H", "link": "https://stackoverflow.com/users/7823213/marius-h"}, "edited": false, "score": 0, "creation_date": 1491427994, "post_id": 43241723, "comment_id": 73554184, "body": "Im running the code in sandboxmode in Zapier Code. It times out after 10 seconds. <a href=\"https://zapier.com/help/code-python/\" rel=\"nofollow noreferrer\">zapier.com/help/code-python</a>  Traceback (most recent call last):    &quot;2017-04-05T21:17:15.536Z 37f5f173-1a45-11e7-a3c6-690a7b270042 Task timed out after 10.00 seconds&quot;"}], "owner": {"reputation": 11, "user_id": 7823213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8e952d620a58eca49c32104a3eb64c?s=128&d=identicon&r=PG&f=1", "display_name": "Marius-H", "link": "https://stackoverflow.com/users/7823213/marius-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491428050, "creation_date": 1491426826, "last_edit_date": 1491428050, "question_id": 43241723, "link": "https://stackoverflow.com/questions/43241723/python-code-running-slow-code-included-base64-encoding", "title": "Python code running slow - code included - base64 encoding", "body": "<p>I am trying to base64 encode an audio flac file.</p>\n\n<p>Sometimes my code times out. Sometimes it works. Any ideas on what am i doing wrong?</p>\n\n<pre><code>import base64\nimport urllib\n\ndef get_flac(uri=None):\n   try:\n       req = urllib.urlopen(uri)\n   except Exception as e:\n       print(e)\n   return req\n\ndef convert_base64(flac_file):\n   audio_read = flac_file.read()\n   return base64.b64encode(audio_read)\n\nuri = None\n\ntry:\n   the_file = get_flac('https://host123d1qv.cloudconvert.com/download/~_9IfzT78VnkmVoUPqux_1AQHm1w')\nexcept Exception as e:\n   print(e)\n\ntry:\n   con = convert_base64(the_file)\nexcept Exception as e:\n    print(e)\n\ncon\n</code></pre>\n"}, {"tags": ["python", "html", "selenium", "selenium-webdriver", "pytest"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 1181979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248c0130a1cb8dc5cd4650f2e4c5413a?s=128&d=identicon&r=PG", "display_name": "user1181979", "link": "https://stackoverflow.com/users/1181979/user1181979"}, "edited": false, "score": 1, "creation_date": 1573723979, "post_id": 45394247, "comment_id": 103979018, "body": "Hi nice one , which module should import for &#39;html&#39;?"}, {"owner": {"reputation": 56729, "user_id": 862594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/41cb1334a9c30eec7a0774331ecd7f61?s=128&d=identicon&r=PG", "display_name": "nickb", "link": "https://stackoverflow.com/users/862594/nickb"}, "reply_to_user": {"reputation": 79, "user_id": 1181979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248c0130a1cb8dc5cd4650f2e4c5413a?s=128&d=identicon&r=PG", "display_name": "user1181979", "link": "https://stackoverflow.com/users/1181979/user1181979"}, "edited": false, "score": 0, "creation_date": 1601298331, "post_id": 45394247, "comment_id": 113355315, "body": "@user1181979 <code>from py.xml import html</code>"}], "tags": [], "owner": {"reputation": 902, "user_id": 1534775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b86535e3ff6fa9b3cff8f81165263e0?s=128&d=identicon&r=PG", "display_name": "gbonetti", "link": "https://stackoverflow.com/users/1534775/gbonetti"}, "is_accepted": false, "score": 7, "last_activity_date": 1501490829, "last_edit_date": 1501490829, "creation_date": 1501363847, "answer_id": 45394247, "question_id": 43241640, "link": "https://stackoverflow.com/questions/43241640/how-to-add-additional-variable-to-pytest-html-report/45394247#45394247", "title": "How to add additional variable to pytest html report", "body": "<p>You can insert custom html for each test by either adding html content to the \"show details\" section of each test, or customizing the result table (e.g. add a ticket column).</p>\n\n<p>The first possibility is the simplest, you can just add the following to your conftest.py</p>\n\n<pre><code>@pytest.mark.hookwrapper\ndef pytest_runtest_makereport(item, call):\n    pytest_html = item.config.pluginmanager.getplugin('html')\n    outcome = yield\n    report = outcome.get_result()\n    extra = getattr(report, 'extra', [])\n    if report.when == 'call':\n        extra.append(pytest_html.extras.html('&lt;p&gt;some html&lt;/p&gt;'))\n        report.extra = extra\n</code></pre>\n\n<p>Where you can replace <code>&lt;p&gt;some html&lt;/p&gt;</code> with your content.</p>\n\n<p>The second solution would be:</p>\n\n<pre><code>@pytest.mark.optionalhook\ndef pytest_html_results_table_header(cells):\n    cells.insert(1, html.th('Ticket'))\n\n\n@pytest.mark.optionalhook\ndef pytest_html_results_table_row(report, cells):\n    cells.insert(1, html.td(report.ticket))\n\n\n@pytest.mark.hookwrapper\ndef pytest_runtest_makereport(item, call):\n    outcome = yield\n    report = outcome.get_result()\n    report.ticket = some_function_that_gets_your_ticket_number()\n</code></pre>\n\n<p>Remember that you can always access the current test with the item object, this might help retrieving the information you need.</p>\n"}], "owner": {"reputation": 89, "user_id": 7564867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5fecd21b9e3cb9383b10a46af0882dab?s=128&d=identicon&r=PG&f=1", "display_name": "olia", "link": "https://stackoverflow.com/users/7564867/olia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3870, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1573489565, "creation_date": 1491426438, "last_edit_date": 1505807048, "question_id": 43241640, "link": "https://stackoverflow.com/questions/43241640/how-to-add-additional-variable-to-pytest-html-report", "title": "How to add additional variable to pytest html report", "body": "<p>I am using <code>pytest</code> HTML report plugin for my selenium tests.\nIt works great with just passing <code>test.py --html==report.htmlin</code> command line and generates a great report.</p>\n\n<p>I also need to implement additional string/variable to each test case display. It doesn't matter if it's pass or failed it should just show \"ticket number\". This ticket id I can return in each test scenario.</p>\n\n<p>I could just add ticket number to test name, but it will look ugly.</p>\n\n<p>Please advise what's the best way to do it.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 6288311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d18745d57ed4ea17ccc6c90254a65a8f?s=128&d=identicon&r=PG&f=1", "display_name": "News_is_Selection_Bias", "link": "https://stackoverflow.com/users/6288311/news-is-selection-bias"}, "edited": false, "score": 0, "creation_date": 1491426201, "post_id": 43241560, "comment_id": 73553348, "body": "For the python list, what if I still want to keep the variable x and create a new x based on x?"}, {"owner": {"reputation": 1370, "user_id": 3188061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c5b5891d55112097938b3c8e66218e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alper F\u0131rat Kaya", "link": "https://stackoverflow.com/users/3188061/alper-f%c4%b1rat-kaya"}, "edited": false, "score": 1, "creation_date": 1491426358, "post_id": 43241560, "comment_id": 73553443, "body": "you can use extend  x = [1,2,3,4]     y = [5,6]     x.extend(y)"}], "tags": [], "owner": {"reputation": 855, "user_id": 4672617, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Auj2u.png?s=128&g=1", "display_name": "rammelmueller", "link": "https://stackoverflow.com/users/4672617/rammelmueller"}, "is_accepted": true, "score": 1, "last_activity_date": 1491426117, "creation_date": 1491426117, "answer_id": 43241560, "question_id": 43241495, "link": "https://stackoverflow.com/questions/43241495/create-new-list-or-numpy-array-with-a-named-list-or-numpy-array/43241560#43241560", "title": "Create new list (or numpy.array) with a named list (or numpy.array)", "body": "<p>For mere Python lists you do:</p>\n\n<pre><code>x = [1, 2, 3, 4]\nx += [5, 6]\n&gt;&gt;&gt; [1, 2, 3, 4, 5, 6]\n</code></pre>\n\n<p>and for numpy-arrays:</p>\n\n<pre><code>x = np.array([1, 2, 3, 4])\nx = np.concatenate((x, np.array([5, 6])))\n&gt;&gt;&gt; np.array([1, 2, 3, 4, 5, 6])\n</code></pre>\n\n<p>Mind the double parentheses in np.concatenate, since the arguments must be passed as a tuple.</p>\n"}], "owner": {"reputation": 809, "user_id": 6288311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d18745d57ed4ea17ccc6c90254a65a8f?s=128&d=identicon&r=PG&f=1", "display_name": "News_is_Selection_Bias", "link": "https://stackoverflow.com/users/6288311/news-is-selection-bias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "closed_date": 1491426086, "accepted_answer_id": 43241560, "answer_count": 1, "score": 0, "last_activity_date": 1491426117, "creation_date": 1491425871, "question_id": 43241495, "link": "https://stackoverflow.com/questions/43241495/create-new-list-or-numpy-array-with-a-named-list-or-numpy-array", "closed_reason": "Duplicate", "title": "Create new list (or numpy.array) with a named list (or numpy.array)", "body": "<p>I have a name list, and I want to construct a new list of the same type of data inside the list. How can I do it? What if it is a numpy array?</p>\n\n<pre><code>x=[1,2,3,4]\nnewx=[x,5,6]\n[[1, 2, 3, 4], 5, 6]\n\n#numpy\ny=np.array([0,1,2,3,4])\nnewy=[y,5,6]\n[array([0, 1, 2, 3, 4]), 5, 6]\n</code></pre>\n\n<p>Desired output</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 3, "creation_date": 1491425745, "post_id": 43241444, "comment_id": 73553085, "body": "If you had to do this yourself, where would you start? Stack Overflow isn&#39;t a code writing service."}, {"owner": {"reputation": 333, "user_id": 6759898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/08a70b03b07d5dcac57d91494e723448?s=128&d=identicon&r=PG&f=1", "display_name": "Aman ", "link": "https://stackoverflow.com/users/6759898/aman"}, "reply_to_user": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1491425830, "post_id": 43241444, "comment_id": 73553142, "body": "Edited question. Please check"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491425978, "post_id": 43241444, "comment_id": 73553212, "body": "It looks like you want us to write some code for you. While many users are willing to produce code for a coder in distress, they usually only help when the poster has already tried to solve the problem on their own. A good way to demonstrate this effort is to include the code you&#39;ve written so far (forming a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), example input (if there is any), the expected output, and the output you actually get (output, tracebacks, etc.). The more detail you provide, the more answers you are likely to receive. Check the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491425986, "post_id": 43241504, "comment_id": 73553218, "body": "As stated in <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a>, please avoid answering unclear, overly-broad, typo, opinion-based, unreproducible, or duplicate questions. Write-my-code requests and low-effort homework questions are off-topic for <a href=\"https://stackoverflow.com\">Stack Overflow</a> and more suited to professional coding/tutoring services. Good questions adhere to <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, have research effort, and have the potential to be useful to future visitors. Answering inappropriate questions harms the site by making it more difficult to navigate and encouraging further such questions, which can drive away other users who volunteer their time and expertise."}, {"owner": {"reputation": 333, "user_id": 6759898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/08a70b03b07d5dcac57d91494e723448?s=128&d=identicon&r=PG&f=1", "display_name": "Aman ", "link": "https://stackoverflow.com/users/6759898/aman"}, "edited": false, "score": 0, "creation_date": 1491426282, "post_id": 43241504, "comment_id": 73553391, "body": "I guess writing for loop was the best way but you wrote it as a list comprehension."}, {"owner": {"reputation": 333, "user_id": 6759898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/08a70b03b07d5dcac57d91494e723448?s=128&d=identicon&r=PG&f=1", "display_name": "Aman ", "link": "https://stackoverflow.com/users/6759898/aman"}, "edited": false, "score": 0, "creation_date": 1491426321, "post_id": 43241504, "comment_id": 73553414, "body": "I was actually looking for a solution using itertools package but it changes the order of letter too."}], "tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": true, "score": 2, "last_activity_date": 1491426054, "last_edit_date": 1491426054, "creation_date": 1491425930, "answer_id": 43241504, "question_id": 43241444, "link": "https://stackoverflow.com/questions/43241444/splitting-a-word-into-2-in-all-possible-ways-in-python/43241504#43241504", "title": "Splitting a word into 2 in all possible ways in python", "body": "<p>you can slice the word by index to get the combination you want</p>\n\n<pre><code>word = 'Stack'    \n[ [word[:i],word[i:]] for i in range(1,len(word))]\n\n[['S', 'tack'], ['St', 'ack'], ['Sta', 'ck'], ['Stac', 'k']]\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 6759898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/08a70b03b07d5dcac57d91494e723448?s=128&d=identicon&r=PG&f=1", "display_name": "Aman ", "link": "https://stackoverflow.com/users/6759898/aman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1491431074, "accepted_answer_id": 43241504, "answer_count": 1, "score": -4, "last_activity_date": 1491426386, "creation_date": 1491425674, "last_edit_date": 1491426386, "question_id": 43241444, "link": "https://stackoverflow.com/questions/43241444/splitting-a-word-into-2-in-all-possible-ways-in-python", "closed_reason": "Needs more focus", "title": "Splitting a word into 2 in all possible ways in python", "body": "<p>How do I split a word into 2 in all possible ways in python?</p>\n\n<p>Input - Eg: Stack</p>\n\n<p>Output - {S, tack},{St,ack},{Sta, ck}, {Stac,k}</p>\n\n<p>I thought of writing a for loop but is there a better way?\nI can't think of a method by using itertools package. It changes the order of letters in the word.</p>\n"}, {"tags": ["python", "html", "dictionary", "html-table"], "answers": [{"comments": [{"owner": {"reputation": 585, "user_id": 2527616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jsGRT.jpg?s=128&g=1", "display_name": "grimdog_john", "link": "https://stackoverflow.com/users/2527616/grimdog-john"}, "edited": false, "score": 1, "creation_date": 1491435710, "post_id": 43242995, "comment_id": 73556740, "body": "Updated fiddle to use JSON and convert to Array so it will work for you."}, {"owner": {"reputation": 245, "user_id": 5531672, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2425e2c5670e7bc1f4d5de41d33292c8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5531672/jack"}, "edited": false, "score": 0, "creation_date": 1491437793, "post_id": 43242995, "comment_id": 73557249, "body": "Thanks for the update but i still get an error <code>Uncaught TypeError: Cannot read property &#39;0&#39; of undefined</code> at <code>tableData += &#39;&lt;td&gt;&#39;+data[j][i]+&#39;&lt;&#47;td&gt;&#39;; </code>"}, {"owner": {"reputation": 245, "user_id": 5531672, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2425e2c5670e7bc1f4d5de41d33292c8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5531672/jack"}, "edited": false, "score": 0, "creation_date": 1491437856, "post_id": 43242995, "comment_id": 73557269, "body": "The thing is that I have to change your data parts to data.result to grab the actual data"}, {"owner": {"reputation": 245, "user_id": 5531672, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2425e2c5670e7bc1f4d5de41d33292c8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5531672/jack"}, "edited": false, "score": 0, "creation_date": 1491437903, "post_id": 43242995, "comment_id": 73557283, "body": "I really appreciate all your help so far"}, {"owner": {"reputation": 245, "user_id": 5531672, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2425e2c5670e7bc1f4d5de41d33292c8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5531672/jack"}, "edited": false, "score": 0, "creation_date": 1491437916, "post_id": 43242995, "comment_id": 73557287, "body": "I made a print of the cols and rows and those come out right"}, {"owner": {"reputation": 585, "user_id": 2527616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jsGRT.jpg?s=128&g=1", "display_name": "grimdog_john", "link": "https://stackoverflow.com/users/2527616/grimdog-john"}, "reply_to_user": {"reputation": 245, "user_id": 5531672, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2425e2c5670e7bc1f4d5de41d33292c8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5531672/jack"}, "edited": false, "score": 0, "creation_date": 1491464975, "post_id": 43242995, "comment_id": 73566931, "body": "Glad I could help :-)"}], "tags": [], "owner": {"reputation": 585, "user_id": 2527616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jsGRT.jpg?s=128&g=1", "display_name": "grimdog_john", "link": "https://stackoverflow.com/users/2527616/grimdog-john"}, "is_accepted": true, "score": 1, "last_activity_date": 1491435654, "last_edit_date": 1491435654, "creation_date": 1491433193, "answer_id": 43242995, "question_id": 43241437, "link": "https://stackoverflow.com/questions/43241437/rows-and-columns-html-table-json-response/43242995#43242995", "title": "Rows and Columns HTML TABLE (JSON RESPONSE)", "body": "<p>Because of the way the JSON is formatted you need to use multiple loops. If you have control over this formatting it would be much simpler to loop though it if formatted as follows :-</p>\n\n<pre><code>{\n  \"objects\" : [\n  {\n    \"Developer\": \"Office Koukan\",\n    \"Publisher\": \"Shouei\",\n    \"ReleaseDate\": \"March 18, 1994\",\n    \"Title\": \"Idea no Hi\"\n  },\n  {\n    \"Developer\": \"Jorudan\",\n    \"Publisher\": \"VAP\",\n    \"ReleaseDate\": \"November 18, 1994\",\n    \"Title\": \"Pachinko Hi Hisshouhou\"\n  },\n  {\n    \"Developer\": \"Beam Software\",\n    \"Publisher\": \"Hi Tech Expressions\",\n    \"ReleaseDate\": \"October 1, 1993\",\n    \"Title\": \"hunThe Hunt for Red October\"\n  }\n]\n}\n</code></pre>\n\n<p>This will provide you a much more natural loop as you can loop through each object instead of looping back over each field grouping multiple times.</p>\n\n<p>If you can't change the format, look at this jsfiddle <a href=\"http://jsfiddle.net/8TT4p/3538/\" rel=\"nofollow noreferrer\">http://jsfiddle.net/8TT4p/3538/</a>.</p>\n\n<p>I created a JS array to match your data. Ive looped through once to get the table header row setup. Then there's a triple nested loop to create a row for each record, then pull out the correct data for that row/column. </p>\n\n<p>Hope it helps in some way</p>\n"}], "owner": {"reputation": 245, "user_id": 5531672, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2425e2c5670e7bc1f4d5de41d33292c8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5531672/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 43242995, "answer_count": 1, "score": 0, "last_activity_date": 1491435654, "creation_date": 1491425622, "question_id": 43241437, "link": "https://stackoverflow.com/questions/43241437/rows-and-columns-html-table-json-response", "title": "Rows and Columns HTML TABLE (JSON RESPONSE)", "body": "<p>I have the following code in index.html which grabs a dictionary list and prints out keys and values into a table</p>\n\n<pre><code>$(function() {\n  $('a#search').bind('click', function() {\n    $.getJSON('/_search', {\n      a: $('input[name=\"a\"]').val()\n    }, function(data) {\n      var tableData = '&lt;table&gt;'\n      $.each(data.result, function(key, value){\n        tableData += '&lt;tr&gt;&lt;td&gt;' + '   ' + key + '   ' + '&lt;/td&gt;';\n        alert(key)\n        $.each(value, function(val){\n            alert(value[val])\n            tableData += '&lt;td&gt;' + value[val] + '&lt;/td&gt;';\n          });\n        tableData += '&lt;/tr&gt;';\n      });\n      tableData += '&lt;/table&gt;';\n      $('#table').html(tableData);\n    });\n</code></pre>\n\n<p>What it is grabbing is a dictionary list from search.py</p>\n\n<pre><code>result = defaultdict(list)\nreturn jsonify(result=result)\n</code></pre>\n\n<p>result contains the following</p>\n\n<pre><code>defaultdict(&lt;class 'list'&gt;, {'Developer': ['Office Koukan', 'Jorudan', 'Beam Software'], 'Publisher': ['Shouei', 'VAP', 'Hi Tech Expressions'], 'ReleaseDate': ['March 18, 1994', 'November 18, 1994', 'October 1, 1993'], 'Title': ['Idea no Hi', 'Pachinko Hi Hisshouhou', 'hunThe Hunt for Red October']})\n</code></pre>\n\n<p>However my output is as follows</p>\n\n<pre><code>Developer Publisher ReleaseDate Title\nOffice    Koukan    Jorudan Beam Software\nShouei    VAP       Hi Tech Expressions\nMarch 18, 1994  November 18, 1994   October 1, 1993\nIdea no Hi  Pachinko Hi Hisshouhou  hunThe Hunt for Red October\n</code></pre>\n\n<p>When the output should be</p>\n\n<pre><code>Developer      Publisher ReleaseDate Title\nOffice         Shouei    ...         ...\nKoukan         VAP       ...         ...\nJorudan        ...       ...         ...\nBeam Software  ...       ...         ...\n</code></pre>\n\n<p>Any idea what I might be doing wrong any help would be appreciated?</p>\n"}, {"tags": ["python", "variables", "text", "printing"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1491425718, "post_id": 43241416, "comment_id": 73553064, "body": "Has it occurred to you that that many characters and tabs simply don&#39;t fit?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1491425852, "post_id": 43241416, "comment_id": 73553153, "body": "Your given output would be 82 characters wide, with PS/cmd tab stops. The standard terminal width is 82 characters."}, {"owner": {"reputation": 1, "user_id": 7802562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4uuup_qx8-4/AAAAAAAAAAI/AAAAAAAAAXg/fYYTMneg8p0/photo.jpg?sz=128", "display_name": "Manith Hetti", "link": "https://stackoverflow.com/users/7802562/manith-hetti"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491430241, "post_id": 43241416, "comment_id": 73555071, "body": "@TigerhawkT3, I&#39;ve reduced the tabs and characters to a minimum, but it still continues to happen."}], "owner": {"reputation": 1, "user_id": 7802562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4uuup_qx8-4/AAAAAAAAAAI/AAAAAAAAAXg/fYYTMneg8p0/photo.jpg?sz=128", "display_name": "Manith Hetti", "link": "https://stackoverflow.com/users/7802562/manith-hetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491425526, "creation_date": 1491425526, "question_id": 43241416, "link": "https://stackoverflow.com/questions/43241416/a-variable-with-an-assigned-integer-value-moves-down-the-line-in-shell", "title": "A variable with an assigned integer value moves down the line in shell", "body": "<p>Can somebody please show me which part of the code makes the an int variable move down without being asked to do so.</p>\n\n<pre><code>    def option():\n        file = open('firesideResults.txt')\n        print (\"\\t\\tPlayer Nickname\\t\\tMatches Palyed\\t\\tMatches Won\\t\\tMatches Lost\\t\\tPoints\")\n        for line in file:\n                if line.split(',')[2] &gt; \"0\":\n                        player_name = line.split (',')[0]\n                        matches_plyd = line.split (',')[1]\n                        matches_won = line.split (',')[2]\n                        matches_lost = line.split (',')[3]\n                        points = int(matches_won)*3    \n                        print(\"\\n\",player_name,\"\\t\\t\\t\",matches_plyd,\"\\t\\t\\t\",matches_won,\"\\t\\t\",matches_lost,\"\\t\\t\",points,)\n                        continue\n        file.close()\n</code></pre>\n\n<p>I expect the results to be laid out in the format</p>\n\n<pre><code>  Roy     17    10    7    30\n</code></pre>\n\n<p>however the output is: </p>\n\n<pre><code>  Roy    17    10    7\n      30\n</code></pre>\n\n<p>I want to know how to make the 'points' variable next to the other variables in the line. Thank you.</p>\n"}, {"tags": ["python", "youtube", "youtube-api", "youtube-livestreaming-api", "captions"], "comments": [{"owner": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "edited": false, "score": 0, "creation_date": 1491504006, "post_id": 43241401, "comment_id": 73595037, "body": "You may refer with this <a href=\"https://productforums.google.com/forum/#!msg/youtube/u54b9ROXy40/_FcHS9cjFAAJ\" rel=\"nofollow noreferrer\">thread</a>. Make sure that you put a new line character <code>\\n</code> at the end of each message wherein it consists of a time and a text based in <a href=\"https://support.google.com/youtube/answer/6077032?&amp;ref_topic=2853697\" rel=\"nofollow noreferrer\">example</a>. Be noted of <a href=\"https://support.google.com/youtube/answer/3068031?hl=en\" rel=\"nofollow noreferrer\">Live caption requirements</a>. In order to add captions to your live event, you need to send captions to YouTube either embedded in the video or through supported software that can send captions over HTTP POSTs."}, {"owner": {"reputation": 25, "user_id": 6343043, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TpNpaAt9mfQ/AAAAAAAAAAI/AAAAAAAAASQ/jzpBDM7YeIo/photo.jpg?sz=128", "display_name": "Alexey Elesin", "link": "https://stackoverflow.com/users/6343043/alexey-elesin"}, "reply_to_user": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "edited": false, "score": 0, "creation_date": 1491596064, "post_id": 43241401, "comment_id": 73640962, "body": "Thanks. It works now."}, {"owner": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "edited": false, "score": 0, "creation_date": 1491607540, "post_id": 43241401, "comment_id": 73644922, "body": "Does my comment helps? If yes I&#39;ll post it as an answer."}, {"owner": {"reputation": 25, "user_id": 6343043, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TpNpaAt9mfQ/AAAAAAAAAAI/AAAAAAAAASQ/jzpBDM7YeIo/photo.jpg?sz=128", "display_name": "Alexey Elesin", "link": "https://stackoverflow.com/users/6343043/alexey-elesin"}, "reply_to_user": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "edited": false, "score": 0, "creation_date": 1491738037, "post_id": 43241401, "comment_id": 73677264, "body": "Yes, it works. I was confused by documentation notes about using the &lt;br&gt; tag."}], "answers": [{"tags": [], "owner": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "is_accepted": true, "score": 1, "last_activity_date": 1491738250, "creation_date": 1491738250, "answer_id": 43306292, "question_id": 43241401, "link": "https://stackoverflow.com/questions/43241401/youtube-live-streaming-captions/43306292#43306292", "title": "Youtube Live streaming captions", "body": "<p>You may refer with this <a href=\"https://productforums.google.com/forum/#!msg/youtube/u54b9ROXy40/_FcHS9cjFAAJ\" rel=\"nofollow noreferrer\">thread</a>. Make sure that you put a new line character <code>\\n</code> at the end of each message where each message consists of a time and a text according to the <a href=\"https://support.google.com/youtube/answer/6077032?&amp;ref_topic=2853697\" rel=\"nofollow noreferrer\">example</a>. </p>\n\n<p>Also, be noted of this <a href=\"https://support.google.com/youtube/answer/3068031?hl=en\" rel=\"nofollow noreferrer\">Live caption requirements</a>. In order to add captions to your live event, you need to send captions to YouTube either embedded in the video or through supported software that can send captions over HTTP POSTs.</p>\n"}, {"comments": [{"owner": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "edited": false, "score": 1, "creation_date": 1495207621, "post_id": 44073465, "comment_id": 75171619, "body": "If you&#39;re saying that his script works for you adding \\n, that&#39;s a fine answer.  If that&#39;s the case, please edit your answer to remove the claim that it is not an answer."}], "tags": [], "owner": {"reputation": 11, "user_id": 8036488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8768084985479d0ae0963ae23261bb?s=128&d=identicon&r=PG&f=1", "display_name": "pkv", "link": "https://stackoverflow.com/users/8036488/pkv"}, "is_accepted": false, "score": 1, "last_activity_date": 1495209725, "last_edit_date": 1495209725, "creation_date": 1495206485, "answer_id": 44073465, "question_id": 43241401, "link": "https://stackoverflow.com/questions/43241401/youtube-live-streaming-captions/44073465#44073465", "title": "Youtube Live streaming captions", "body": "<p><s>This is more a comment than an answer, but I am not allowed yet to comment;</s> I had to add \\n after the time stamp in addition to \\n after the cc text. Without it, it does not work.\nTried to curl, but I failed to make it work while your python script worked immediately, provided one inserts \\n .</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7799255, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Cxu4zW9EriA/AAAAAAAAAAI/AAAAAAAAAAA/_y7K9aPClpA/photo.jpg?sz=128", "display_name": "Chris Deleo", "link": "https://stackoverflow.com/users/7799255/chris-deleo"}, "is_accepted": false, "score": 0, "last_activity_date": 1607975214, "creation_date": 1607975214, "answer_id": 65295475, "question_id": 43241401, "link": "https://stackoverflow.com/questions/43241401/youtube-live-streaming-captions/65295475#65295475", "title": "Youtube Live streaming captions", "body": "<p>@pkv thank you I just wanted to add the code changes that you suggested to your answer but I also don't have enough reputation to comment.  This was all that was needed for this to work.</p>\n<pre><code>post_fields = datetime.utcnow().strftime('%Y-%m-%dT%H:%M:%S.%f')[:-3] + ' region:reg1#cue1\\n' + &quot;&lt;br&gt;&quot; + word + '&lt;br&gt;\\n'\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6343043, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TpNpaAt9mfQ/AAAAAAAAAAI/AAAAAAAAASQ/jzpBDM7YeIo/photo.jpg?sz=128", "display_name": "Alexey Elesin", "link": "https://stackoverflow.com/users/6343043/alexey-elesin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1136, "favorite_count": 0, "accepted_answer_id": 43306292, "answer_count": 3, "score": 0, "last_activity_date": 1607975214, "creation_date": 1491425460, "question_id": 43241401, "link": "https://stackoverflow.com/questions/43241401/youtube-live-streaming-captions", "title": "Youtube Live streaming captions", "body": "<p>I'm currently developing an rtsp stream speech transcriber and as a test task I'm thinking of trying to send subtitles for youtube stream.\nAccording to <a href=\"https://support.google.com/youtube/answer/6077032?&amp;ref_topic=2853697#\" rel=\"nofollow noreferrer\">this link</a> my code in Python is:</p>\n\n<pre><code>post_fields = datetime.utcnow().strftime('%Y-%m-%dT%H:%M:%S.%f')[:-3] + ' region:reg1#cue1' + \"&lt;br&gt;\" + word + '&lt;br&gt;'\nheaders = {'content-type': 'text/plain'}\nurl = self.youtube_link + '&amp;seq=' + str(self.youtube_seq)\nr = requests.post(url=url, data=post_fields.encode('utf-8'), headers=headers)\nself.youtube_seq += 1\n</code></pre>\n\n<p>Sadly all what I can recieve from youtube is:</p>\n\n<pre><code>400\n2017-04-05T20:19:58.135\nCan't parse HTTP POST body.\n</code></pre>\n\n<p>Did anyone managed to successfully send captions for youtube livestreams via POST requests?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 5288, "user_id": 6277525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdd8aedc14bc95b56efed36de1dd034?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/6277525/andrew-l"}, "edited": false, "score": 0, "creation_date": 1491430008, "post_id": 43241380, "comment_id": 73554992, "body": "In your apply/lambda function you&#39;re trying to parse the date in mm/dd/yyyy format which &quot;41266&quot; is not."}], "answers": [{"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 1, "last_activity_date": 1491426135, "creation_date": 1491426135, "answer_id": 43241564, "question_id": 43241380, "link": "https://stackoverflow.com/questions/43241380/wrong-date-displayed-when-converting-in-pandas/43241564#43241564", "title": "Wrong date displayed when converting in pandas", "body": "<p>Pandas is not able to decipher 41266 as a date. You can add a preceding zero to the date so that it looks like 041266. Then use pd.to_datetime</p>\n\n<pre><code>df['Appreciation'] = '0'+df['Appreciation'].astype(str)\ndf['Appreciation'] = pd.to_datetime(df['Appreciation'], format = '%m%d%y')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6221, "user_id": 1499803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d0702c82056cae179a5d46e79773c1?s=128&d=identicon&r=PG", "display_name": "Back2Basics", "link": "https://stackoverflow.com/users/1499803/back2basics"}, "is_accepted": false, "score": 0, "last_activity_date": 1491447083, "creation_date": 1491447083, "answer_id": 43244837, "question_id": 43241380, "link": "https://stackoverflow.com/questions/43241380/wrong-date-displayed-when-converting-in-pandas/43244837#43244837", "title": "Wrong date displayed when converting in pandas", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Unix_time\" rel=\"nofollow noreferrer\">1/1/1970 is the epoch date</a>.  It's what happens when your time is set to zero seconds and you want to format it as a date. </p>\n\n<p>As for fixing it I would go with @A-Za-z's answer.  Unless you were going to measure time in seconds, which would make these dates around 1/28/1970.</p>\n"}], "owner": {"reputation": 614, "user_id": 7044005, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37a81d2bcd09e1d0855e897a170f2e55?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Wagner", "link": "https://stackoverflow.com/users/7044005/jake-wagner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491447083, "creation_date": 1491425388, "question_id": 43241380, "link": "https://stackoverflow.com/questions/43241380/wrong-date-displayed-when-converting-in-pandas", "title": "Wrong date displayed when converting in pandas", "body": "<p>I do not know why this snippet is producing 01/01/1970 for all the dates when I am sure this is not accurate.</p>\n\n<p>My Original File:</p>\n\n<pre><code>Appreciation Start              Funding Date\n    41266                          41432\n    41266                          41715\n    41266                          41533\n    41266                          41505\n    41266                          41444\n    41550                          41513\n    41550                          41451\n</code></pre>\n\n<p>My snippet:</p>\n\n<pre><code>import pandas as pd\n\ndf['Funding Date'] = pd.to_datetime(df['Funding Date']).apply(lambda x: x.strftime('%m/%d/%Y')if not pd.isnull(x) else '')\ndf['Appreciation Start'] = pd.to_datetime(df['Appreciation Start']).apply(lambda x: x.strftime('%m/%d/%Y')if not pd.isnull(x) else '')\n\ndf.to_excel('new.xlsx')\n</code></pre>\n\n<p>In Excel:</p>\n\n<pre><code>Appreciation Start              Funding Date\n    01/01/1970                   01/01/1970\n    01/01/1970                   01/01/1970\n    01/01/1970                   01/01/1970\n    ..........                ..............\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["python", "git", "unix", "grep", "git-grep"], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 4672617, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Auj2u.png?s=128&g=1", "display_name": "rammelmueller", "link": "https://stackoverflow.com/users/4672617/rammelmueller"}, "is_accepted": false, "score": 0, "last_activity_date": 1491426338, "creation_date": 1491426338, "answer_id": 43241609, "question_id": 43241373, "link": "https://stackoverflow.com/questions/43241373/finding-files-with-both-of-two-specified-terms-via-git-grep/43241609#43241609", "title": "Finding files with both of two specified terms via git grep", "body": "<p>You can combine it with another grep command:</p>\n\n<pre><code>git grep -l -E 'term1' | grep term2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": true, "score": 1, "last_activity_date": 1491460023, "last_edit_date": 1491460023, "creation_date": 1491459576, "answer_id": 43247196, "question_id": 43241373, "link": "https://stackoverflow.com/questions/43241373/finding-files-with-both-of-two-specified-terms-via-git-grep/43247196#43247196", "title": "Finding files with both of two specified terms via git grep", "body": "<p>Two ways to achieve the goal:</p>\n\n<p><strong><em>1)</em></strong> combining multiple patterns specified by <code>-e</code> option with <code>--and</code> flag</p>\n\n<blockquote>\n  <p><strong>--and</strong><br>\n  <strong>--or</strong><br>\n  <strong>--not</strong><br> \n  <strong>( \u2026\u200b )</strong> <br>\n  Specify how multiple patterns are combined using Boolean expressions.</p>\n</blockquote>\n\n<pre><code>git grep -l -e 'term1' --and -e 'term2'\n</code></pre>\n\n<hr>\n\n<p><strong><em>2)</em></strong> using <code>--all-match</code> flag</p>\n\n<blockquote>\n  <p>When giving multiple pattern expressions combined with <em>--or</em>, this flag\n  is specified to limit the match to files that have lines to match all\n  of them.</p>\n</blockquote>\n\n<pre><code>git grep -l --all-match -e 'term1' -e 'term2'\n</code></pre>\n\n<p><a href=\"https://git-scm.com/docs/git-grep#git-grep--e\" rel=\"nofollow noreferrer\">https://git-scm.com/docs/git-grep#git-grep--e</a></p>\n"}], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 43247196, "answer_count": 2, "score": 1, "last_activity_date": 1491460023, "creation_date": 1491425366, "question_id": 43241373, "link": "https://stackoverflow.com/questions/43241373/finding-files-with-both-of-two-specified-terms-via-git-grep", "title": "Finding files with both of two specified terms via git grep", "body": "<p>I'm attempting to find files in my git repository using git grep and I have no easy way of doing so without manual searching. I have found one workaround like this:</p>\n\n<pre><code>git grep -l 'term1' | xargs -i grep -l term2 {}\n</code></pre>\n\n<p>But I'm wondering if there is a way similar to this which doesn't require xargs:</p>\n\n<pre><code>git grep -l -E 'term1|term2'\n</code></pre>\n\n<p>This essentially means show me the files containing either term1 or terms2... is there a \"show me files with BOTH these terms.\"</p>\n\n<p>I'm trying to use the git grep command in a way that is not practical for piping commands into other commands. I really hate working with python's subprocess module and its use of piping...</p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 2, "creation_date": 1491425317, "post_id": 43241335, "comment_id": 73552841, "body": "Is there a reason you can&#39;t just use bash directly: <code>curl -ku xxxx:abc -X GET https:&#47;&#47;xyzm:8443&#47;rest&#47;import-job&#47;834 &gt;yourfile.txt</code>?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1491426408, "post_id": 43241335, "comment_id": 73553467, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16966231/redirecting-subprocess-stdout\">Redirecting subprocess stdout</a>"}, {"owner": {"reputation": 155, "user_id": 5190993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53ec1e3c9c25e24fb1e46db7bcca840b?s=128&d=identicon&r=PG&f=1", "display_name": "Kavitha", "link": "https://stackoverflow.com/users/5190993/kavitha"}, "edited": false, "score": 0, "creation_date": 1491439084, "post_id": 43241335, "comment_id": 73557602, "body": "I need to parse the json file and again upload the file to different userName just like copy. I can use bash script, but there are lots files and involves various logics, so I thought using python script would be a little bit easier."}], "answers": [{"comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 1, "creation_date": 1491439193, "post_id": 43241460, "comment_id": 73557633, "body": "Always use a <code>with</code> block when dealing with files."}, {"owner": {"reputation": 155, "user_id": 5190993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53ec1e3c9c25e24fb1e46db7bcca840b?s=128&d=identicon&r=PG&f=1", "display_name": "Kavitha", "link": "https://stackoverflow.com/users/5190993/kavitha"}, "edited": false, "score": 0, "creation_date": 1491439476, "post_id": 43241460, "comment_id": 73557709, "body": "There is nothing in the output variable since the process returns the output to the terminal. That&#39;s why I am looking for the way to capture the output to a file."}, {"owner": {"reputation": 232, "user_id": 7786031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jcHpK.jpg?s=128&g=1", "display_name": "App-Devon", "link": "https://stackoverflow.com/users/7786031/app-devon"}, "edited": false, "score": 0, "creation_date": 1491484286, "post_id": 43241460, "comment_id": 73581043, "body": "Are you calling this from a terminal, or command prompt?  In which case I would advise calling it like this to write to out.txt:     <code>python file.py &gt; out.txt</code>"}], "tags": [], "owner": {"reputation": 232, "user_id": 7786031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jcHpK.jpg?s=128&g=1", "display_name": "App-Devon", "link": "https://stackoverflow.com/users/7786031/app-devon"}, "is_accepted": false, "score": 1, "last_activity_date": 1491425750, "creation_date": 1491425750, "answer_id": 43241460, "question_id": 43241335, "link": "https://stackoverflow.com/questions/43241335/redirecting-output-to-file-in-python-script/43241460#43241460", "title": "Redirecting output to file in Python script", "body": "<p>The following code will write to a file in python 2.6 (I have it set to write what is contained in your output variable), followed by a read of that same file &amp; then the print command will display the output on the terminal.</p>\n\n<pre><code># Write a file\nout_file = open(\"test.txt\", \"w\")\nout_file.write(output)\nout_file.close()\n\n# Read a file\nin_file = open(\"test.txt\", \"r\")\ntext = in_file.read()\nin_file.close()\n\nprint text\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4611, "user_id": 7511971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Byz18.jpg?s=128&g=1", "display_name": "Ricardo Branco", "link": "https://stackoverflow.com/users/7511971/ricardo-branco"}, "is_accepted": false, "score": 0, "last_activity_date": 1491425981, "creation_date": 1491425981, "answer_id": 43241518, "question_id": 43241335, "link": "https://stackoverflow.com/questions/43241335/redirecting-output-to-file-in-python-script/43241518#43241518", "title": "Redirecting output to file in Python script", "body": "<p>Using PyCurl is easy.</p>\n\n<p>Here's an example to get you started:</p>\n\n<p><a href=\"https://github.com/pycurl/pycurl/blob/master/examples/quickstart/get.py\" rel=\"nofollow noreferrer\">https://github.com/pycurl/pycurl/blob/master/examples/quickstart/get.py</a></p>\n\n<p>For some options (setopt) you could get a hint using the --libcurl option of curl.  </p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 5190993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53ec1e3c9c25e24fb1e46db7bcca840b?s=128&d=identicon&r=PG&f=1", "display_name": "Kavitha", "link": "https://stackoverflow.com/users/5190993/kavitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1491497309, "creation_date": 1491497309, "answer_id": 43261273, "question_id": 43241335, "link": "https://stackoverflow.com/questions/43241335/redirecting-output-to-file-in-python-script/43261273#43261273", "title": "Redirecting output to file in Python script", "body": "<p>Thank you very much for taking time to reply.</p>\n\n<p>I achieved the goal by using Python <strong>requests</strong> package without using Linux subprocess module or commands.</p>\n\n<p>Once again, Thank you all!</p>\n"}], "owner": {"reputation": 155, "user_id": 5190993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53ec1e3c9c25e24fb1e46db7bcca840b?s=128&d=identicon&r=PG&f=1", "display_name": "Kavitha", "link": "https://stackoverflow.com/users/5190993/kavitha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1491497309, "creation_date": 1491425235, "last_edit_date": 1491439143, "question_id": 43241335, "link": "https://stackoverflow.com/questions/43241335/redirecting-output-to-file-in-python-script", "title": "Redirecting output to file in Python script", "body": "<p>I have a Python(Version 2.6.6) script like Below:</p>\n\n<pre><code>import subprocess\n\nid = 834\nurllink = \"https://xyzm:8443/rest/import-job/\" + str(id)\nsubprocess.call([\n    'curl',\n    '-k',\n    '-u',\n    'xxxx:abc',\n    '-X',\n    'GET',\n    urllink\n])\n</code></pre>\n\n<p>It returns some JSON output to the terminal. How can I redirect the output to a file, so that I can parse the file and use the same file(data) while executing a POST command?</p>\n\n<p>Any reply would be greatly appreciated.</p>\n\n<p>Thanks,\nJee</p>\n"}, {"tags": ["python", "python-2.7", "loops", "progress-bar"], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 7681184, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/da05c910ed199919c8d348113c4ef082?s=128&d=identicon&r=PG&f=1", "display_name": "user7681184", "link": "https://stackoverflow.com/users/7681184/user7681184"}, "edited": false, "score": 0, "creation_date": 1491433417, "post_id": 43241864, "comment_id": 73556125, "body": "Thanks for the response but I don&#39;t think this is the info I was looking for. More specifically, I was interested in using some type of progress bar library (like &quot;progressbar&quot; for example) but I am confused where the code needs to be inserted relative to my FOR loop that I have included as an example above. Thanks."}], "tags": [], "owner": {"reputation": 73, "user_id": 7524933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/590ea9d1f454aaccdfb90e5c75b04334?s=128&d=identicon&r=PG&f=1", "display_name": "avodo", "link": "https://stackoverflow.com/users/7524933/avodo"}, "is_accepted": false, "score": 0, "last_activity_date": 1491427347, "creation_date": 1491427347, "answer_id": 43241864, "question_id": 43241268, "link": "https://stackoverflow.com/questions/43241268/python-progress-bar-confusion-how-to-add-progress-bar-to-already-existing-loop/43241864#43241864", "title": "Python progress bar confusion, how to add progress bar to already existing loop", "body": "<p>A simple solution would be to <code>print '-'</code> at the end of the loop. This prints one hyphen for each iteration of the for loop.</p>\n\n<p>If you instead wanted to always print out 100 hyphens, 1 hyphen for each 'percent' then you might do something like <code>print '-'*(100/len(members))</code>, with an extra check for adding extra dashes to the last iteration for an even 100.</p>\n"}, {"tags": [], "owner": {"reputation": 1312, "user_id": 4951187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Zu4T.png?s=128&g=1", "display_name": "aviso", "link": "https://stackoverflow.com/users/4951187/aviso"}, "is_accepted": false, "score": 0, "last_activity_date": 1534516114, "creation_date": 1534516114, "answer_id": 51897558, "question_id": 43241268, "link": "https://stackoverflow.com/questions/43241268/python-progress-bar-confusion-how-to-add-progress-bar-to-already-existing-loop/51897558#51897558", "title": "Python progress bar confusion, how to add progress bar to already existing loop", "body": "<p>It's actually very easy with the <a href=\"https://pypi.org/project/enlighten\" rel=\"nofollow noreferrer\">enlighten</a> library. Just create a progress bar before the loop and update it with each instance of the loop. Using the manager, you could have additional progress bars for other parts of your program.</p>\n\n<pre><code>import enlighten\n\nmanager = enlighten.get_manager()\npbar = manager.counter(total=len(members), desc=\"Checking status\", unit='members')\n\nfor member in members:\n    url = \"http://api.wiki123.com/v1.11/member?id=\"+str(member)\n    header = {\"Authorization\": authorization_code}\n    api_response = requests.get(url, headers=header)\n    member_check = json.loads(api_response.text)\n    member_status = member_check.get(\"response\")\n    pbar.update()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7309855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uc53M.png?s=128&g=1", "display_name": "Tai Sakuma", "link": "https://stackoverflow.com/users/7309855/tai-sakuma"}, "is_accepted": false, "score": 0, "last_activity_date": 1553444843, "creation_date": 1553444843, "answer_id": 55325956, "question_id": 43241268, "link": "https://stackoverflow.com/questions/43241268/python-progress-bar-confusion-how-to-add-progress-bar-to-already-existing-loop/55325956#55325956", "title": "Python progress bar confusion, how to add progress bar to already existing loop", "body": "<p>This can be easily done with <a href=\"https://github.com/alphatwirl/atpbar#atpbar\" rel=\"nofollow noreferrer\"><em>atpbar</em></a> as long as <code>members</code> in your code has a length.</p>\n\n<p>You only need to wrap <code>members</code> with <code>atpbar</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from atpbar import atpbar\n\n\u22ee\n\nfor member in atpbar(members):\n    \u22ee\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 7681184, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/da05c910ed199919c8d348113c4ef082?s=128&d=identicon&r=PG&f=1", "display_name": "user7681184", "link": "https://stackoverflow.com/users/7681184/user7681184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 967, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1566543504, "creation_date": 1491425009, "last_edit_date": 1495540950, "question_id": 43241268, "link": "https://stackoverflow.com/questions/43241268/python-progress-bar-confusion-how-to-add-progress-bar-to-already-existing-loop", "title": "Python progress bar confusion, how to add progress bar to already existing loop", "body": "<p>After looking at the following question with regards to Python Progress bars, I am still confused:\n<a href=\"https://stackoverflow.com/questions/3160699/python-progress-bar\">Python Progress Bar</a></p>\n\n<p>I am new to Python and I am trying to add a progress bar to a script I created which runs a for loop. The loop takes a significant amount of time to process so I want the progress bar to show when the loop is running. The part that confuses me is, do I have set to up a loop inside of a loop in order to implement a progress bar? Here is a sample of my for loop from my code:</p>\n\n<pre><code>for member in members:\n    url = \"http://api.wiki123.com/v1.11/member?id=\"+str(member) \n\n    header = {\"Authorization\": authorization_code}\n\n    api_response = requests.get(url, headers=header)\n\n    member_check = json.loads(api_response.text)\n\n    member_status = member_check.get(\"response\") \n</code></pre>\n\n<p>Do I need to include the code to add a progress bar INTO this loop or does it have to be included outside of the loop? Thanks.</p>\n\n<p>Update: I mention the progressbar library here but I am open to suggestions of other libraries.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 0, "creation_date": 1491432860, "post_id": 43241251, "comment_id": 73555946, "body": "Please indent your code, it doesn&#39;t run."}, {"owner": {"reputation": 1, "user_id": 7822826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb036216615a631665928404a0efb6c6?s=128&d=identicon&r=PG&f=1", "display_name": "QOO", "link": "https://stackoverflow.com/users/7822826/qoo"}, "reply_to_user": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 0, "creation_date": 1491453726, "post_id": 43241251, "comment_id": 73561267, "body": "@alDiablo thanks. Now it can run."}, {"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1491455421, "post_id": 43241251, "comment_id": 73561794, "body": "That&#39;s the entire point of the exercise, see if <i>you</i> know of a better algorithm to solve the problem faster or more efficiently. Do the work."}], "owner": {"reputation": 1, "user_id": 7822826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb036216615a631665928404a0efb6c6?s=128&d=identicon&r=PG&f=1", "display_name": "QOO", "link": "https://stackoverflow.com/users/7822826/qoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491453630, "creation_date": 1491424930, "last_edit_date": 1491453630, "question_id": 43241251, "link": "https://stackoverflow.com/questions/43241251/uva11340-python-tle", "title": "UVa#11340 python TLE", "body": "<p>Problem: <a href=\"https://uva.onlinejudge.org/external/113/11340.pdf\" rel=\"nofollow noreferrer\">11340 - Newspaper</a></p>\n\n<p>I use <strong>dict</strong> to store the values and characters as the key. I read every line of the input as a string and see if each character in every line has value in <strong>dict</strong>.</p>\n\n<p>Here's a message it tell us:</p>\n\n<blockquote>\n  <p>Each line can be up to 10000 characters length. Be aware of alargeinput size, the whole inputfile is about 7MB.</p>\n</blockquote>\n\n<p>But I think I could just ignore the message above. Here's my code:</p>\n\n<pre><code>def main():\n    test_case = int(input())\n\n    for t in range(test_case):\n        number_of_paid_characters = int(input())\n        paid_character_dict = {}\n        for n in range(number_of_paid_characters):\n            paid_character, value = input().split()\n            paid_character_dict[paid_character] = int(value)\n\n        paid = 0\n        number_of_lines = int(input())\n        for n in range(number_of_lines):\n            line = input()\n            for character in line:\n                paid += paid_character_dict.get(character, 0)\n\n        print(\"{:.2f}$\".format(paid/100))\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>My output is identical to the accepted output in uDebug. <a href=\"https://www.udebug.com/UVa/11340\" rel=\"nofollow noreferrer\">uDebug #11340</a></p>\n\n<p>I think there're probably something wrong with string processing, but I have no idea of it.</p>\n\n<p>I tried sending my code several times but keep getting <strong>Time Limit Exceeded</strong>. Are there any way to improve my code? </p>\n"}, {"tags": ["python", "python-3.x", "asynchronous", "python-asyncio", "aiohttp"], "comments": [{"owner": {"reputation": 643, "user_id": 1412036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A8KxT.png?s=128&g=1", "display_name": "Dmitry Shilyaev", "link": "https://stackoverflow.com/users/1412036/dmitry-shilyaev"}, "edited": false, "score": 1, "creation_date": 1491426204, "post_id": 43241221, "comment_id": 73553349, "body": "You always block on I/O. With cooperative multitasking you can&#39;t get desired behaviour, because blocked coroutine returns control (yield) only after request is finished."}, {"owner": {"reputation": 24473, "user_id": 57952, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/920d3f95a8dfb28d2e716ce91f40105a?s=128&d=identicon&r=PG", "display_name": "Udi", "link": "https://stackoverflow.com/users/57952/udi"}, "edited": false, "score": 1, "creation_date": 1491430435, "post_id": 43241221, "comment_id": 73555161, "body": "aiohttp is good for http. For non http TCP, asyncio is enough."}], "answers": [{"comments": [{"owner": {"reputation": 1471, "user_id": 2038464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f965262116bd9a0067ce433239e99d2?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/2038464/oleg"}, "edited": false, "score": 14, "creation_date": 1497145110, "post_id": 43263397, "comment_id": 75954084, "body": "<code>ProcessPoolExecutor</code> has a high cost because it launches an entire new python interpreter. It is used when you have a CPU-intensive task that needs to use multiple processors. Consider using <code>ThreadPoolExecutor</code> instead, which uses threading."}, {"owner": {"reputation": 2138, "user_id": 4284401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rz99Q.jpg?s=128&g=1", "display_name": "Zac Delventhal", "link": "https://stackoverflow.com/users/4284401/zac-delventhal"}, "reply_to_user": {"reputation": 1471, "user_id": 2038464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f965262116bd9a0067ce433239e99d2?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/2038464/oleg"}, "edited": false, "score": 6, "creation_date": 1497411298, "post_id": 43263397, "comment_id": 76061034, "body": "Thank you for the additional info. Although the original example used process pool, <code>ThreadPoolExecutor</code> is what I ended up using after a little more research. Still seems a little jenky, but so far it&#39;s all holding together."}, {"owner": {"reputation": 1708, "user_id": 247924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736c4f3f8a3f1a45e81672d580d5625d?s=128&d=identicon&r=PG", "display_name": "Amit Kotlovski", "link": "https://stackoverflow.com/users/247924/amit-kotlovski"}, "edited": false, "score": 12, "creation_date": 1516265507, "post_id": 43263397, "comment_id": 83619736, "body": "Just a note, instead of creating a new executor, it might be simpler to use the default executor by calling <code>loop.run_in_executor(executor=None, func, *args)</code> (see <a href=\"https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop.run_in_executor\" rel=\"nofollow noreferrer\">documentation</a>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11006952"}, "edited": false, "score": 4, "creation_date": 1586128601, "post_id": 43263397, "comment_id": 108006482, "body": "To get the event loop, one can do  <code>loop = asyncio.get_event_loop()</code>"}], "tags": [], "owner": {"reputation": 2138, "user_id": 4284401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rz99Q.jpg?s=128&g=1", "display_name": "Zac Delventhal", "link": "https://stackoverflow.com/users/4284401/zac-delventhal"}, "is_accepted": true, "score": 56, "last_activity_date": 1578960599, "last_edit_date": 1578960599, "creation_date": 1491504202, "answer_id": 43263397, "question_id": 43241221, "link": "https://stackoverflow.com/questions/43241221/how-can-i-wrap-a-synchronous-function-in-an-async-coroutine/43263397#43263397", "title": "How can I wrap a synchronous function in an async coroutine?", "body": "<p>Eventually I found an answer in <a href=\"https://stackoverflow.com/a/27298880\">this thread</a>. The method I was looking for is <a href=\"https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.run_in_executor\" rel=\"noreferrer\">run_in_executor</a>. This allows a synchronous function to be run asynchronously without blocking an event loop.</p>\n\n<p>In the <code>sleep</code> example I posted above, it might look like this:</p>\n\n<pre><code>import asyncio\nfrom time import sleep\n\nasync def sleep_async(loop, delay):\n    # None uses the default executor (ThreadPoolExecutor)\n    await loop.run_in_executor(None, sleep, delay)\n    return 'I slept asynchronously'\n</code></pre>\n\n<p>Also see the following answer -> <a href=\"https://stackoverflow.com/questions/38557768/how-do-we-call-a-normal-function-where-a-coroutine-is-expected\">How do we call a normal function where a coroutine is expected?</a></p>\n"}, {"comments": [{"owner": {"reputation": 4243, "user_id": 320104, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/afc20be40eeba70286e8de0d49ba3260?s=128&d=identicon&r=PG", "display_name": "WBAR", "link": "https://stackoverflow.com/users/320104/wbar"}, "edited": false, "score": 1, "creation_date": 1551224790, "post_id": 50450553, "comment_id": 96560840, "body": "good advise to use <code>aioify</code> it makes now so easy to write async functions and modules :)"}, {"owner": {"reputation": 5359, "user_id": 582917, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/98a347823cd1db90af884b227a29c29e?s=128&d=identicon&r=PG", "display_name": "CMCDragonkai", "link": "https://stackoverflow.com/users/582917/cmcdragonkai"}, "edited": false, "score": 0, "creation_date": 1601430354, "post_id": 50450553, "comment_id": 113403370, "body": "Even when using <code>aiofy</code> when using the function, it may still block the event loop if the function itself is a long-running blocking operation. In that case, instead of concurrency we would need parallelism. Unless there was a way to yield back to the loop within the long-running operation."}], "tags": [], "owner": {"reputation": 5386, "user_id": 1061155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57eb915295663567365f1eebe0a41faa?s=128&d=identicon&r=PG", "display_name": "ospider", "link": "https://stackoverflow.com/users/1061155/ospider"}, "is_accepted": false, "score": 21, "last_activity_date": 1582451996, "last_edit_date": 1582451996, "creation_date": 1526911165, "answer_id": 50450553, "question_id": 43241221, "link": "https://stackoverflow.com/questions/43241221/how-can-i-wrap-a-synchronous-function-in-an-async-coroutine/50450553#50450553", "title": "How can I wrap a synchronous function in an async coroutine?", "body": "<p>You can use a decorator to wrap the sync version to an async version.</p>\n\n<pre><code>import time\nfrom functools import wraps, partial\n\n\ndef wrap(func):\n    @wraps(func)\n    async def run(*args, loop=None, executor=None, **kwargs):\n        if loop is None:\n            loop = asyncio.get_event_loop()\n        pfunc = partial(func, *args, **kwargs)\n        return await loop.run_in_executor(executor, pfunc)\n    return run\n\n@wrap\ndef sleep_async(delay):\n    time.sleep(delay)\n    return 'I slept asynchronously'\n</code></pre>\n\n<p>or use the <a href=\"https://pypi.org/project/aioify/\" rel=\"noreferrer\">aioify</a> library</p>\n\n<pre><code>% pip install aioify\n</code></pre>\n\n<p>then</p>\n\n<pre><code>@aioify\ndef sleep_async(delay):\n    pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 3866172, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f60997da43c5a202131cfee501ff12a5?s=128&d=identicon&r=PG&f=1", "display_name": "hpca01", "link": "https://stackoverflow.com/users/3866172/hpca01"}, "is_accepted": false, "score": 0, "last_activity_date": 1560873054, "last_edit_date": 1560873054, "creation_date": 1543270682, "answer_id": 53489973, "question_id": 43241221, "link": "https://stackoverflow.com/questions/43241221/how-can-i-wrap-a-synchronous-function-in-an-async-coroutine/53489973#53489973", "title": "How can I wrap a synchronous function in an async coroutine?", "body": "<p>Not sure if too late but you can also use a decorator to do your function in a thread. ALTHOUGH, note that it will still be non-coop blocking unlike async which is co-op blocking.</p>\n\n<pre><code>def wrap(func):\n    from concurrent.futures import ThreadPoolExecutor\n    pool=ThreadPoolExecutor()\n    @wraps(func)\n    async def run(*args, loop=None, executor=None, **kwargs):\n        if loop is None:\n            loop = asyncio.get_event_loop()\n        future=pool.submit(func, *args, **kwargs)\n        return asyncio.wrap_future(future)\n    return run\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 14522393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiTorduX2qPJYDBrrs4dbMsPj5XKJZp-aqInCLHTA=k-s128", "display_name": "Evgeniy Blinov", "link": "https://stackoverflow.com/users/14522393/evgeniy-blinov"}, "is_accepted": false, "score": 2, "last_activity_date": 1603721707, "last_edit_date": 1603721707, "creation_date": 1603720712, "answer_id": 64538605, "question_id": 43241221, "link": "https://stackoverflow.com/questions/43241221/how-can-i-wrap-a-synchronous-function-in-an-async-coroutine/64538605#64538605", "title": "How can I wrap a synchronous function in an async coroutine?", "body": "<p>Maybe someone will need my solution to this problem. I wrote my own library to solve this, which allows you to make any function asynchronous using a decorator.</p>\n<p>To install the library, run this command:</p>\n<pre><code>$ pip install awaits\n</code></pre>\n<p>To make any of your functions asynchronous, just add the @awaitable decorator to it, like this:</p>\n<pre><code>import time\nimport asyncio\nfrom awaits.awaitable import awaitable\n\n@awaitable\ndef sum(a, b):\n  # heavy load simulation\n  time.sleep(10)\n  return a + b\n</code></pre>\n<p>Now you can make sure that your function is really asynchronous coroutine:</p>\n<pre><code>print(asyncio.run(sum(2, 2)))\n</code></pre>\n<p>&quot;Under the hood&quot; your function will be executed in the thread pool. This thread pool will not be recreated every time your function is called. A thread pool is created once and accepts new tasks via a queue. This will make your program run faster than using other solutions, because the creation of additional threads is an additional overhead.</p>\n"}, {"comments": [{"owner": {"reputation": 122, "user_id": 9600355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aWLNl.png?s=128&g=1", "display_name": "Sima", "link": "https://stackoverflow.com/users/9600355/sima"}, "edited": false, "score": 0, "creation_date": 1618313635, "post_id": 66352467, "comment_id": 118558876, "body": "Union[None, ...] - union of None and something is Optional[...]"}, {"owner": {"reputation": 577, "user_id": 10936968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w8e2k.jpg?s=128&g=1", "display_name": "Sabuhi Shukurov", "link": "https://stackoverflow.com/users/10936968/sabuhi-shukurov"}, "reply_to_user": {"reputation": 122, "user_id": 9600355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aWLNl.png?s=128&g=1", "display_name": "Sima", "link": "https://stackoverflow.com/users/9600355/sima"}, "edited": false, "score": 0, "creation_date": 1618491006, "post_id": 66352467, "comment_id": 118620504, "body": "yes you are right."}], "tags": [], "owner": {"reputation": 577, "user_id": 10936968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w8e2k.jpg?s=128&g=1", "display_name": "Sabuhi Shukurov", "link": "https://stackoverflow.com/users/10936968/sabuhi-shukurov"}, "is_accepted": false, "score": 0, "last_activity_date": 1618490970, "last_edit_date": 1618490970, "creation_date": 1614175446, "answer_id": 66352467, "question_id": 43241221, "link": "https://stackoverflow.com/questions/43241221/how-can-i-wrap-a-synchronous-function-in-an-async-coroutine/66352467#66352467", "title": "How can I wrap a synchronous function in an async coroutine?", "body": "<p>The decorator would be useful for this case and run your blocking function in another thread.</p>\n<pre><code>import asyncio\nfrom concurrent.futures import ThreadPoolExecutor\nfrom functools import wraps, partial\nfrom typing import Union\n\nclass to_async:\n\n    def __init__(self, *, executor: Optional[None,ThreadPoolExecutor] = None):\n       \n        self.executor =  executor\n    \n    def __call__(self, blocking):\n        @wraps(blocking)\n        async def wrapper(*args, **kwargs):\n\n            loop = asyncio.get_event_loop()\n            if not self.executor:\n                self.executor =  ThreadPoolExecutor()\n\n            func = partial(blocking, *args, **kwargs)\n        \n            return await loop.run_in_executor(self.executor,func)\n\n        return wrapper\n\n@to_async(executor=None)\ndef sync(*args, **kwargs):\n    print(args, kwargs)\n   \nasyncio.run(sync(&quot;hello&quot;, &quot;world&quot;, result=True))\n\n</code></pre>\n"}], "owner": {"reputation": 2138, "user_id": 4284401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rz99Q.jpg?s=128&g=1", "display_name": "Zac Delventhal", "link": "https://stackoverflow.com/users/4284401/zac-delventhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22416, "favorite_count": 17, "accepted_answer_id": 43263397, "answer_count": 5, "score": 50, "last_activity_date": 1618490970, "creation_date": 1491424803, "last_edit_date": 1491425109, "question_id": 43241221, "link": "https://stackoverflow.com/questions/43241221/how-can-i-wrap-a-synchronous-function-in-an-async-coroutine", "title": "How can I wrap a synchronous function in an async coroutine?", "body": "<p>I'm using <a href=\"https://github.com/aio-libs/aiohttp\" rel=\"noreferrer\">aiohttp</a> to build an API server that sends TCP requests off to a seperate server. The module that sends the TCP requests is synchronous and a black box for my purposes. So my problem is that these requests are blocking the entire API. I need a way to wrap the module requests in an asynchronous coroutine that won't block the rest of the API.</p>\n\n<p>So, just using <code>sleep</code> as a simple example, is there any way to somehow wrap time-consuming synchronous code in a non-blocking coroutine, something like this:</p>\n\n<pre><code>async def sleep_async(delay):\n    # After calling sleep, loop should be released until sleep is done\n    yield sleep(delay)\n    return 'I slept asynchronously'\n</code></pre>\n"}, {"tags": ["python", "virtualenv", "virtualenvwrapper"], "comments": [{"owner": {"reputation": 3425, "user_id": 7582820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIuht.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/7582820/andrew"}, "edited": false, "score": 0, "creation_date": 1492115193, "post_id": 43241188, "comment_id": 73862953, "body": "Were you able to set a specific python version in virtualenvwrapper?"}], "answers": [{"tags": [], "owner": {"reputation": 3425, "user_id": 7582820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIuht.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/7582820/andrew"}, "is_accepted": true, "score": 4, "last_activity_date": 1491425688, "creation_date": 1491425688, "answer_id": 43241448, "question_id": 43241188, "link": "https://stackoverflow.com/questions/43241188/set-python-version-for-each-virtualenv-using-virtualenvwrapper/43241448#43241448", "title": "Set python version for each virtualenv using virtualenvwrapper", "body": "<p>You should be able to use the <code>-p</code> option when creating a virtualenv using virtualenvwrapper to specify the version: <code>mkvirtualenv -p /usr/bin/python2.7 my_env</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2615, "user_id": 2878244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a579d8d3b39378a8933d8eb5acb5672?s=128&d=identicon&r=PG&f=1", "display_name": "wcyn", "link": "https://stackoverflow.com/users/2878244/wcyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1498496232, "creation_date": 1498496232, "answer_id": 44764793, "question_id": 43241188, "link": "https://stackoverflow.com/questions/43241188/set-python-version-for-each-virtualenv-using-virtualenvwrapper/44764793#44764793", "title": "Set python version for each virtualenv using virtualenvwrapper", "body": "<p>I've found you can also do the same for virtualenvwrapper projects like so:\n<code>mkproject -p python2 my_venv_project</code>.\nAlso, Make sure the project name comes last</p>\n"}], "owner": {"reputation": 1494, "user_id": 1355634, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d8b4ab7cfa6273819da5bbe387550ecd?s=128&d=identicon&r=PG", "display_name": "math", "link": "https://stackoverflow.com/users/1355634/math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 43241448, "answer_count": 2, "score": 1, "last_activity_date": 1498496232, "creation_date": 1491424713, "question_id": 43241188, "link": "https://stackoverflow.com/questions/43241188/set-python-version-for-each-virtualenv-using-virtualenvwrapper", "title": "Set python version for each virtualenv using virtualenvwrapper", "body": "<p>Using virtualenv I can set the python version to a specific virtual environment via th <code>-p</code> option. This means for different environments I can set different python versions. Is there a similar possibility for virtualenvwrapper? Please note I dont want to set a system wide version used in ALL virtual environments. I would like to have the flexibility it to set the python version on virtual environment level. </p>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1491424763, "post_id": 43241162, "comment_id": 73552527, "body": "Have you tried using environments?"}, {"owner": {"reputation": 926, "user_id": 5472462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2547f7133348b1d4071ee4a9db20e0e?s=128&d=identicon&r=PG&f=1", "display_name": "vincentmajor", "link": "https://stackoverflow.com/users/5472462/vincentmajor"}, "edited": false, "score": 0, "creation_date": 1491424778, "post_id": 43241162, "comment_id": 73552540, "body": "It (using <code>%in%</code>) works for me. But it matches the value, NOT the key and value. <code>list_three &lt;- list(a = 1, b = 2, d = 3)</code>, <code>list_one %in% list_three</code> yields <code>TRUE TRUE TRUE</code>"}, {"owner": {"reputation": 28030, "user_id": 3628236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/sMsia.jpg?s=128&g=1", "display_name": "Colonel Beauvel", "link": "https://stackoverflow.com/users/3628236/colonel-beauvel"}, "edited": false, "score": 0, "creation_date": 1491425461, "post_id": 43241162, "comment_id": 73552928, "body": "do your R lists only contains &quot;scalar&quot; (vector of length one) ?"}], "answers": [{"comments": [{"owner": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "edited": false, "score": 0, "creation_date": 1491425232, "post_id": 43241262, "comment_id": 73552800, "body": "But it&#39;s important for me to know which didn&#39;t match.... This is a very simplified example"}], "tags": [], "owner": {"reputation": 81, "user_id": 7667219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6070686f370345237ba9d6cfb40616d4?s=128&d=identicon&r=PG&f=1", "display_name": "Mez13", "link": "https://stackoverflow.com/users/7667219/mez13"}, "is_accepted": false, "score": 1, "last_activity_date": 1491424998, "creation_date": 1491424998, "answer_id": 43241262, "question_id": 43241162, "link": "https://stackoverflow.com/questions/43241162/comparing-key-value-pairs-equivalent-in-r/43241262#43241262", "title": "Comparing key, value pairs equivalent in R", "body": "<p>In a simple case like yours, I would not use lists, I would just use vectors <code>c()</code>function in R.</p>\n\n<pre><code>list_one &lt;- c(1,2,3)\nlist_two &lt;- c(1,2,4)\nlist_one==list_two\n</code></pre>\n\n<p>Which gives <code>[1]  TRUE  TRUE FALSE</code> as you whished.</p>\n\n<p>I hope I've helped you.</p>\n"}, {"comments": [{"owner": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "edited": false, "score": 0, "creation_date": 1491425797, "post_id": 43241358, "comment_id": 73553117, "body": "Wow, this is really, really good. Tiny change, I was looking for <code>==</code> as the comparison, not <code>!=</code>."}, {"owner": {"reputation": 28030, "user_id": 3628236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/sMsia.jpg?s=128&g=1", "display_name": "Colonel Beauvel", "link": "https://stackoverflow.com/users/3628236/colonel-beauvel"}, "reply_to_user": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "edited": false, "score": 0, "creation_date": 1491425974, "post_id": 43241358, "comment_id": 73553209, "body": "Glap to help, yes you can adapt with <code>==</code> of course!"}], "tags": [], "owner": {"reputation": 28030, "user_id": 3628236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/sMsia.jpg?s=128&g=1", "display_name": "Colonel Beauvel", "link": "https://stackoverflow.com/users/3628236/colonel-beauvel"}, "is_accepted": true, "score": 3, "last_activity_date": 1491425322, "creation_date": 1491425322, "answer_id": 43241358, "question_id": 43241162, "link": "https://stackoverflow.com/questions/43241162/comparing-key-value-pairs-equivalent-in-r/43241358#43241358", "title": "Comparing key, value pairs equivalent in R", "body": "<p>You can do (this will take into consideration possible different ordering in your list):</p>\n\n<pre><code>&gt; unlist(list_two[names(list_one)])!=unlist(list_one)\n    a     b     c \nFALSE FALSE  TRUE \n</code></pre>\n"}], "owner": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 43241358, "answer_count": 2, "score": 1, "last_activity_date": 1491425322, "creation_date": 1491424646, "question_id": 43241162, "link": "https://stackoverflow.com/questions/43241162/comparing-key-value-pairs-equivalent-in-r", "title": "Comparing key, value pairs equivalent in R", "body": "<p>I'm going from Python to R and I wanted to compare two things that I would normally use a <code>dict</code> for by doing something like this:</p>\n\n<pre><code>dict_one = {'a': 1, 'b': 2, 'c': 3}\ndict_two = {'a': 1, 'b': 2, 'c': 4}\n\nfor key1, value1 in dict_one.items():\n    if dict_two[key1] != value1:\n        print(key1)  #prints c\n</code></pre>\n\n<p>Is there anything similar R? I've made two named lists</p>\n\n<pre><code>list_one &lt;- list(a = 1, b = 2, c = 3)\nlist_two &lt;- list(a = 1, b = 2, c = 4)\n</code></pre>\n\n<p>I tried something like this, but it didn't output what I was looking for. </p>\n\n<pre><code>&gt; list_one %in% list_two\n[1] TRUE TRUE TRUE #looking for TRUE TRUE FALSE\n</code></pre>\n"}, {"tags": ["python", "tkinter", "beautifulsoup"], "comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1491424624, "post_id": 43241109, "comment_id": 73552448, "body": "Don&#39;t use HTML to manually format your code. Just paste it, select it, and click the <code>{}</code> button or press Ctrl+K. This indents it by 4 spaces, telling Stack Overflow to format it as code."}], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1491424781, "creation_date": 1491424781, "answer_id": 43241209, "question_id": 43241109, "link": "https://stackoverflow.com/questions/43241109/tkinter-does-not-run-the-function/43241209#43241209", "title": "Tkinter does not run the function", "body": "<p>Remove <code>()</code> from <code>news()</code> in the <code>Button</code> creation code. You do not want to run the function at the time you create the button. You want to register it for future use.</p>\n"}, {"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 1, "last_activity_date": 1491424825, "creation_date": 1491424825, "answer_id": 43241226, "question_id": 43241109, "link": "https://stackoverflow.com/questions/43241109/tkinter-does-not-run-the-function/43241226#43241226", "title": "Tkinter does not run the function", "body": "<p>The <code>command</code> attribute must be given a callable function, not a string. </p>\n\n<p>For example:</p>\n\n<pre><code>b = Button(..., command=news)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7595682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabdf84d8bb53a1494197d7a90c3bea2?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey E", "link": "https://stackoverflow.com/users/7595682/andrey-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491424825, "creation_date": 1491424443, "last_edit_date": 1491424691, "question_id": 43241109, "link": "https://stackoverflow.com/questions/43241109/tkinter-does-not-run-the-function", "title": "Tkinter does not run the function", "body": "<p>I'm trying to make use Tkinter. When running my program, a pop up with a button should appear. After pressing the button, the code is executed and the site is parsed. The parsing itself is working ok, but with Tkinter it does not. Besides, the code is executed before a button is pressed. I would be very grateful if someone could point to the mistake I made.</p>\n\n<pre><code>from lxml import html\nimport requests\nfrom bs4 import BeautifulSoup\n\ndef news():\n    page = requests.get('http://www.globo.com/index.html')\n\n    soup = BeautifulSoup(page.content, 'html.parser')\n    bbb = soup.find_all('p', class_='hui-premium__title')\n    for item in bbb:\n        ccc = item.get_text('p')\n        print(ccc)\n\n\nfrom tkinter import *\nmaster = Tk()\n\nb = Button(master, text=\"latest news\", command='news()')\nb.pack()\n\nmainloop()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1491428574, "post_id": 43241108, "comment_id": 73554403, "body": "I see that you have 2 columns of combobox, one column of QLineEdit and another 2 columns of QLineEdit disabled, what relationship there is between them. Your description there is nothing about them."}, {"owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1491429344, "post_id": 43241108, "comment_id": 73554730, "body": "This is for calculating the overall area for a group of wires. The first combobox is for insulation type for each wire, while the second combobox is the wire size. So if you have a THWN for the insulation type and the size is 12awg then 0.0133 should appear in the first disabled QLineEdit in the same row. I tried to change the code to make it more generic."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1491429703, "post_id": 43241108, "comment_id": 73554873, "body": "The other QLineEdits disabled will not you use them? You only want to use the 2 QComboBox and QLineEdit."}, {"owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1491430077, "post_id": 43241108, "comment_id": 73555013, "body": "Sorry I realize that was not clear, I was trying to edit it and my computer shut down to install updates. But the first combobox is for the insulation type for a wire. The second combobox is for the wire size. The first QLineEdit is for the user to input a number of wires they have. The first disabled QLineEdit should print out the size of an individual wire that was selected and the last QLineEdit should be the Area of one wire * the amount"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1491430273, "post_id": 43241108, "comment_id": 73555088, "body": "I guess the inputs are the 2 QComboBox and the QLineEdit enabled, and the outputs are the last 2 QLineEdits disabled, am I correct?"}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "edited": false, "score": 0, "creation_date": 1491453760, "post_id": 43242767, "comment_id": 73561275, "body": "That is it! Thank you so much!! I have spent more time than I would like to admit trying to figure it out. I appreciate all your help!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1491431827, "creation_date": 1491431827, "answer_id": 43242767, "question_id": 43241108, "link": "https://stackoverflow.com/questions/43241108/pyqt-accessing-and-changing-dynamically-added-controls/43242767#43242767", "title": "PYQT Accessing and changing dynamically added controls", "body": "<p>We use <code>sender()</code> to get the object that emits the signal, then we look for the name of that object with <code>setObjectName()</code>, and we search the index, then we get the other objects with <code>findChildren()</code>, for example the output will be the union of the selected texts.</p>\n\n<p>add name to Choice1ComboBox:</p>\n\n<pre><code>Choice1ComboBox.setObjectName(\"Choice1ComboBox\"+str(i))\n</code></pre>\n\n<p>doSomething function:</p>\n\n<pre><code>def doSomething(self, _):\n    sender = self.sender()\n\n    l = sender.objectName().split(\"Choice1ComboBox\")\n    if len(l) &gt; 1:\n        number = l[1]\n    else:\n        number = sender.objectName().split(\"Choice2ComboBox\")[1]\n\n    combo1 = self.findChildren(QComboBox, \"Choice1ComboBox\"+number)[0]\n    combo2 = self.findChildren(QComboBox, \"Choice2ComboBox\"+number)[0]\n    obj = self.findChildren(QLineEdit, \"numBox\"+number)[0]\n    obj.setText(combo1.currentText() + \" \" +  combo2.currentText())\n</code></pre>\n\n<p>Complete code:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtCore import QCoreApplication\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtWidgets import *\n\nclass window(QMainWindow):\n\n    def __init__(self):\n        super(window, self).__init__()\n        self.setGeometry(50, 50, 700, 600)\n\n        self.home()\n\n    def home(self):\n        Test1Choices = ['Test1:','Choice1', 'Choice2', 'Choice3', 'Choice4','Choice5', 'Choice6', 'Choice7', 'Choice8', 'Choice9']\n        Test2Choices= ['Test2:','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15']\n        for i in range(0,10):\n            Choice1ComboBox = QComboBox(self)\n            Choice1ComboBox.setObjectName(\"Choice1ComboBox\"+str(i))\n            Choice1ComboBox.addItems(Test1Choices)\n            Choice1ComboBox.resize(150,25)\n            Choice1ComboBox.move(30,(150+(i*35)))\n            Choice1ComboBox.setCurrentIndex(2)\n            Choice1ComboBox.activated[str].connect(self.doSomething)\n\n            Choice2ComboBox = QComboBox(self)\n            Choice2ComboBox.setObjectName(\"Choice2ComboBox\"+str(i))\n            Choice2ComboBox.addItems(Test2Choices)\n            Choice2ComboBox.resize(75,25)\n            Choice2ComboBox.move(200,(150+(i*35)))\n            Choice2ComboBox.setCurrentIndex(2)\n            Choice2ComboBox.activated[str].connect(self.doSomething)\n\n            numTextBox = QLineEdit(self)\n            numTextBox.setObjectName(\"numBox\"+str(i))\n            numTextBox.move(325,(150+(i*35)))\n            numTextBox.resize(35,25)\n\n            result1TextBox = QLineEdit(self)\n            result1TextBox.setObjectName(\"result1Box\"+str(i))\n            result1TextBox.move(400,(150+(i*35)))\n            result1TextBox.resize(100,25)\n            result1TextBox.setEnabled(0)\n\n            result2TextBox = QLineEdit(self)\n            result2TextBox.setObjectName(\"result2Box\"+str(i))\n            result2TextBox.move(525,(150+(i*35)))\n            result2TextBox.resize(100,25)\n            result2TextBox.setEnabled(0)\n\n        self.show()\n\n    def doSomething(self, _):\n        sender = self.sender()\n\n        l = sender.objectName().split(\"Choice1ComboBox\")\n        if len(l) &gt; 1:\n            number = l[1]\n        else:\n            number = sender.objectName().split(\"Choice2ComboBox\")[1]\n\n        combo1 = self.findChildren(QComboBox, \"Choice1ComboBox\"+number)[0]\n        combo2 = self.findChildren(QComboBox, \"Choice2ComboBox\"+number)[0]\n        obj = self.findChildren(QLineEdit, \"numBox\"+number)[0]\n        obj.setText(combo1.currentText() +  \" \" + combo2.currentText())\n\n\n\n\ndef run():\n    app = QApplication(sys.argv)\n    Gui = window()\n    sys.exit(app.exec_())\n\n\nrun()\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 43242767, "answer_count": 1, "score": 1, "last_activity_date": 1491431827, "creation_date": 1491424442, "last_edit_date": 1491428174, "question_id": 43241108, "link": "https://stackoverflow.com/questions/43241108/pyqt-accessing-and-changing-dynamically-added-controls", "title": "PYQT Accessing and changing dynamically added controls", "body": "<p>I am a beginner with GUI's and PYQT. What I am trying to do is dynamically set up a grid of QComboBox's and QLineEdit's. From the QComboBox you can select a choice and from that choice, it will fill in the corresponding QLineEdit with some numbers. The problem I'm having is creating the link between the first QComboBox and the first QLineEdit box. I could make a function for each row but I would like to know a better way. I will post some sample code. Thank you for any help or advice that you might have.</p>\n\n<pre><code>import sys\nfrom PyQt5.QtCore import QCoreApplication\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtWidgets import *\n\nclass window(QMainWindow):\n\n    def __init__(self):\n        super(window, self).__init__()\n        self.setGeometry(50, 50, 700, 600)\n\n        self.home()\n\n    def home(self):\n        Test1Choices = ['Test1:','Choice1', 'Choice2', 'Choice3', 'Choice4','Choice5', 'Choice6', 'Choice7', 'Choice8', 'Choice9']\n        Test2Choices= ['Test2:','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15']\n        for i in range(0,10):\n            Choice1ComboBox = QComboBox(self)\n            Choice1ComboBox.addItems(Test1Choices)\n            Choice1ComboBox.resize(150,25)\n            Choice1ComboBox.move(30,(150+(i*35)))\n            Choice1ComboBox.setCurrentIndex(2)\n\n            Choice2ComboBox = QComboBox(self)\n            Choice2ComboBox.setObjectName(\"Choice2ComboBox\"+str(i))\n            Choice2ComboBox.addItems(Test2Choices)\n            Choice2ComboBox.resize(75,25)\n            Choice2ComboBox.move(200,(150+(i*35)))\n            Choice2ComboBox.setCurrentIndex(2)\n            Choice2ComboBox.activated[str].connect(self.doSomething)\n\n            numTextBox = QLineEdit(self)\n            numTextBox.setObjectName(\"numBox\"+str(i))\n            numTextBox.move(325,(150+(i*35)))\n            numTextBox.resize(35,25)\n\n            result1TextBox = QLineEdit(self)\n            result1TextBox.setObjectName(\"result1Box\"+str(i))\n            result1TextBox.move(400,(150+(i*35)))\n            result1TextBox.resize(100,25)\n            result1TextBox.setEnabled(0)\n\n            result2TextBox = QLineEdit(self)\n            result2TextBox.setObjectName(\"result2Box\"+str(i))\n            result2TextBox.move(525,(150+(i*35)))\n            result2TextBox.resize(100,25)\n            result2TextBox.setEnabled(0)\n\n        self.show()\n\n    def doSomething(self):\n        numbers=['result1','result2','result3','result4','result5','result6','result7','result8','result9','result10','result11','result12','result13','result14','result15']\n\ndef run():\n    app = QApplication(sys.argv)\n    Gui = window()\n    sys.exit(app.exec_())\n\n\nrun()\n</code></pre>\n\n<p>To summarize I would like to  bring in the index of the selected <code>QComboBox</code>. Then use that index number to reference the answer that is in the \"numbers\" array. Then print that result in the <code>QLineEdit</code> that is in the same row</p>\n"}, {"tags": ["python", "session", "flask"], "comments": [{"owner": {"reputation": 887, "user_id": 1429776, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nGt0C.jpg?s=128&g=1", "display_name": "mmenschig", "link": "https://stackoverflow.com/users/1429776/mmenschig"}, "edited": false, "score": 2, "creation_date": 1491424861, "post_id": 43241094, "comment_id": 73552590, "body": "really good question. You wouldn&#39;t want to issue this session lifetime based on a user role, just the url endpoint, correct?"}, {"owner": {"reputation": 1000, "user_id": 5206857, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/325b583352015c4cd1f4ccd0c9ae0f1c?s=128&d=identicon&r=PG&f=1", "display_name": "john_mc", "link": "https://stackoverflow.com/users/5206857/john-mc"}, "reply_to_user": {"reputation": 887, "user_id": 1429776, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nGt0C.jpg?s=128&g=1", "display_name": "mmenschig", "link": "https://stackoverflow.com/users/1429776/mmenschig"}, "edited": false, "score": 0, "creation_date": 1491425123, "post_id": 43241094, "comment_id": 73552739, "body": "thank you. And yes that&#39;s correct"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491591727, "post_id": 43241094, "comment_id": 73638839, "body": "You can also also make such a check and invalidate the session in pre-request handling like in these answers <a href=\"http://stackoverflow.com/questions/14367991/flask-before-request-add-exception-for-specific-route\" title=\"flask before request add exception for specific route\">stackoverflow.com/questions/14367991/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1000, "user_id": 5206857, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/325b583352015c4cd1f4ccd0c9ae0f1c?s=128&d=identicon&r=PG&f=1", "display_name": "john_mc", "link": "https://stackoverflow.com/users/5206857/john-mc"}, "edited": false, "score": 2, "creation_date": 1492019011, "post_id": 43282216, "comment_id": 73814704, "body": "The problem isn&#39;t that I don&#39;t know how to change the session lifetime variable (see the middle of my question). The problem is that, in flask, the &#39;permanent_session_lifetime&#39; variable is a singleton that retroactively overwrites the timeout length of sessions previously created. Therefore, if an admin logs in (w/ a shorter session) when there are users logged in, the users&#39; sessions will be overwritten with the admin session length and will be prematurely logged out. Therefore, what I&#39;m asking is if I can maintain distinct values for the session lengths without this unwanted behavior"}], "tags": [], "owner": {"reputation": 51, "user_id": 5486079, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qG37B5Ep_yo/AAAAAAAAAAI/AAAAAAAAAjE/xoght2S7lF4/photo.jpg?sz=128", "display_name": "Ktk", "link": "https://stackoverflow.com/users/5486079/ktk"}, "is_accepted": false, "score": 0, "last_activity_date": 1491579867, "creation_date": 1491579867, "answer_id": 43282216, "question_id": 43241094, "link": "https://stackoverflow.com/questions/43241094/possible-to-create-different-session-timeout-lengths-for-different-users-in-pyth/43282216#43282216", "title": "Possible to create different session timeout lengths for different users in Python Flask?", "body": "<p>Yes of course!</p>\n\n<p>1) if it is url based lifetime session that you want:</p>\n\n<p>for each view append your configuration line:</p>\n\n<pre><code>app.permanent_session_lifetime = timedelta(seconds=int)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>app.config['PERMANENT_SESSION_LIFETIME'] = &lt;intended_value_in_seconds&gt;\n</code></pre>\n\n<p>2) if it is on a per user basis:</p>\n\n<p>I recommend creating groups and for each group assign a specific config so you can just call the config when needed.</p>\n\n<pre><code>def group_session(self, group):\n    if group_session == 'visitors':\n       return app.config['PERMANENT_SESSION_LIFETIME'] == &lt;intended_value_in_seconds&gt;\n    if group_session == 'admin':\n        return app.config['PERMANENT_SESSION_LIFETIME'] == &lt;intended_value_in_seconds&gt;\n    return app.config['PERMANENT_SESSION_LIFETIME']\n</code></pre>\n\n<p>3) if you prefer to have a by user session lifetime, then:</p>\n\n<pre><code>if user == &lt;chosen_name&gt;:\n    app.config['PERMANENT_SESSION_LIFETIME'] == &lt;intended_value_in_seconds&gt;\n</code></pre>\n\n<p>I hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 2249, "user_id": 344141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb3332980508763e613db06ed0b16f8?s=128&d=identicon&r=PG", "display_name": "Bartek Jablonski", "link": "https://stackoverflow.com/users/344141/bartek-jablonski"}, "is_accepted": false, "score": 0, "last_activity_date": 1494584729, "creation_date": 1494584729, "answer_id": 43935435, "question_id": 43241094, "link": "https://stackoverflow.com/questions/43241094/possible-to-create-different-session-timeout-lengths-for-different-users-in-pyth/43935435#43935435", "title": "Possible to create different session timeout lengths for different users in Python Flask?", "body": "<p>Subclass <a href=\"http://flask.pocoo.org/docs/0.12/api/#flask.sessions.SecureCookieSessionInterface\" rel=\"nofollow noreferrer\">SecureCookieSessionInterface</a> an override <em>get_expiration_time()</em> method where yo can set session expire time for single sessions.</p>\n"}], "owner": {"reputation": 1000, "user_id": 5206857, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/325b583352015c4cd1f4ccd0c9ae0f1c?s=128&d=identicon&r=PG&f=1", "display_name": "john_mc", "link": "https://stackoverflow.com/users/5206857/john-mc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1155, "favorite_count": 3, "answer_count": 2, "score": 6, "last_activity_date": 1494584729, "creation_date": 1491424375, "last_edit_date": 1491425384, "question_id": 43241094, "link": "https://stackoverflow.com/questions/43241094/possible-to-create-different-session-timeout-lengths-for-different-users-in-pyth", "title": "Possible to create different session timeout lengths for different users in Python Flask?", "body": "<p>I have an Angular/Flask web app and am trying to create an admin page that will be accessed by a certain url, say \"/admin_page\". The page will require additional authentication and <strong><em>needs to issue a session timeout that is shorter than the timeout for all the other users</em></strong>. </p>\n\n<p>However, I'm under the impression that all sessions are generated from the same variable in my flask application, which I configure as such: </p>\n\n<p><code>app.permanent_session_lifetime = timedelta(seconds=int)</code></p>\n\n<p>So, my question is: <em>Is there a way to change the session timeout length for certain users without affecting the timeout length of other users' sessions?</em> </p>\n\n<p>i.e.\nIf in my route handler for <code>/admin_page</code> I temporarily change the value of <code>app.permanent_session_lifetime</code>, create the user's session, and then restore the variable to its original value, will sessions that were created previously have their timeout value altered?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8755, "user_id": 4168397, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e31d5748edf285187f67c329542ef96?s=128&d=identicon&r=PG", "display_name": "Rakesh Adhikesavan", "link": "https://stackoverflow.com/users/4168397/rakesh-adhikesavan"}, "edited": false, "score": 0, "creation_date": 1491424326, "post_id": 43241033, "comment_id": 73552298, "body": "Can you post a sample input and your desired output?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1491424366, "post_id": 43241033, "comment_id": 73552313, "body": "What determines that a row is invalid?"}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491424372, "post_id": 43241033, "comment_id": 73552316, "body": "Added the input and output samples above.."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1491424376, "post_id": 43241033, "comment_id": 73552318, "body": "I don&#39;t understand the output"}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491424446, "post_id": 43241033, "comment_id": 73552355, "body": "Sorry.. I added the comments..."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1491424568, "post_id": 43241033, "comment_id": 73552419, "body": "Why is row 1 invalid?"}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491424625, "post_id": 43241033, "comment_id": 73552449, "body": "My bad... I just corrected the output data.... I am really sorry..."}], "answers": [{"tags": [], "owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "is_accepted": false, "score": 0, "last_activity_date": 1491424556, "creation_date": 1491424556, "answer_id": 43241131, "question_id": 43241033, "link": "https://stackoverflow.com/questions/43241033/get-the-count-of-first-field-in-the-list-of-lists-by-iterating-through-for-loop/43241131#43241131", "title": "Get the count of first field in the list of lists by iterating through for loop", "body": "<pre><code>from collections import Counter\n\ncounts = Counter()\nfor l in myList:\n    counts[l[0]] += 1\nfor l in myList:\n    if counts[l[0]] &gt; 1:\n        print(\"Invalid row\")\n    else:\n        print(\"Valid row\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491426155, "post_id": 43241536, "comment_id": 73553319, "body": "Is it possible to append the count to each list in l ?"}, {"owner": {"reputation": 8755, "user_id": 4168397, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e31d5748edf285187f67c329542ef96?s=128&d=identicon&r=PG", "display_name": "Rakesh Adhikesavan", "link": "https://stackoverflow.com/users/4168397/rakesh-adhikesavan"}, "reply_to_user": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491426287, "post_id": 43241536, "comment_id": 73553398, "body": "Yes, that is fairly simple to do once you have all the counts, I will update my answer"}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491426594, "post_id": 43241536, "comment_id": 73553550, "body": "The ques I have is how does c[element[0]] appends the right count to each list in the list as there are total 5 lists inside the big list?"}, {"owner": {"reputation": 8755, "user_id": 4168397, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e31d5748edf285187f67c329542ef96?s=128&d=identicon&r=PG", "display_name": "Rakesh Adhikesavan", "link": "https://stackoverflow.com/users/4168397/rakesh-adhikesavan"}, "reply_to_user": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491426760, "post_id": 43241536, "comment_id": 73553627, "body": "That&#39;s because I first ran a for loop through all the lists inside &quot;l&quot; and stored the count in &quot;c&quot;. &quot;c&quot; is a Counter. Once I have done that, I use &quot;c&quot; to look up the counts"}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491427652, "post_id": 43241536, "comment_id": 73554057, "body": "I havent tested it yet.. give me few mins... I will get back to u shortly... thank u so much for taking time and answering my ques.."}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491428461, "post_id": 43241536, "comment_id": 73554364, "body": "Append seems like doesnt work Rakesh... When I try appending it  I am getting 1 at the end of each row"}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491428566, "post_id": 43241536, "comment_id": 73554397, "body": "My data is like this 1:201601 and I am doing my code like this .....   list.append(c[element[0].split(&#39;:&#39;)[0]])"}, {"owner": {"reputation": 8755, "user_id": 4168397, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e31d5748edf285187f67c329542ef96?s=128&d=identicon&r=PG", "display_name": "Rakesh Adhikesavan", "link": "https://stackoverflow.com/users/4168397/rakesh-adhikesavan"}, "reply_to_user": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491491601, "post_id": 43241536, "comment_id": 73586909, "body": "You need to do a better job at explaining your question and data. For the situation you have described above, my code works. Sorry I couldn&#39;t help you"}], "tags": [], "owner": {"reputation": 8755, "user_id": 4168397, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e31d5748edf285187f67c329542ef96?s=128&d=identicon&r=PG", "display_name": "Rakesh Adhikesavan", "link": "https://stackoverflow.com/users/4168397/rakesh-adhikesavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1491426164, "last_edit_date": 1491426164, "creation_date": 1491426032, "answer_id": 43241536, "question_id": 43241033, "link": "https://stackoverflow.com/questions/43241033/get-the-count-of-first-field-in-the-list-of-lists-by-iterating-through-for-loop/43241536#43241536", "title": "Get the count of first field in the list of lists by iterating through for loop", "body": "<p>You have to store the counts of the first element in a counter and then do another for loop to iterate through your list of lists:</p>\n\n<p>First, store counts:</p>\n\n<pre><code>from collections import Counter\nl = [ [1,'A'],[1,'B'],[2,'C'],[-1,'D'],[-1,'D'] ]\nc= Counter()\nfor element in l:\n    c[element[0]] += 1\n\nprint c\nOut: Counter({1: 2, -1: 2, 2: 1})\n</code></pre>\n\n<p>Now, Iterate through your list of lists to check which is valid and which is not:</p>\n\n<pre><code>for element in l:\n    if c[element[0]] &gt; 1:\n        print \"Invalid\"\n    else:\n        print \"Valid\"\n</code></pre>\n\n<p>Follow up from the comments: If you want to append the counts to each element in the list: </p>\n\n<pre><code>for element in l:\n    element.append(c[element[0]])\n</code></pre>\n"}], "owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": -9, "last_activity_date": 1571209651, "creation_date": 1491424149, "last_edit_date": 1571209651, "question_id": 43241033, "link": "https://stackoverflow.com/questions/43241033/get-the-count-of-first-field-in-the-list-of-lists-by-iterating-through-for-loop", "title": "Get the count of first field in the list of lists by iterating through for loop", "body": "<p>By iterating through a list of lists I am trying to get the count of the first field from all the lists within a list and implement some if-else logic. Not sure if this is possible to do within an Iterator. </p>\n\n<pre><code>Input:-\n\n[ [1,'A'],[1,'B'],[2,'C'],[-1,'D'],[-1,'D'] ]\n\nOutput:-\n\nInvalid row\nInvalid row\nValid row \nInvalid row\nInvalid row\n\nComments :-\n</code></pre>\n\n<p>If the count is more than 1 for any value then all such rows are invalid otherwise the rows are valid.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1491424139, "post_id": 43241016, "comment_id": 73552211, "body": "Don&#39;t parse HTML with regex? Could you use CSS selectors or an Xpath with an actual parser?"}, {"owner": {"reputation": 4128, "user_id": 4607733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc604aa16e5409668cc4fd1f2f0c01e2?s=128&d=identicon&r=PG&f=1", "display_name": "horcrux", "link": "https://stackoverflow.com/users/4607733/horcrux"}, "edited": false, "score": 0, "creation_date": 1491424220, "post_id": 43241016, "comment_id": 73552253, "body": "The html source does not contain neither the string &quot;Item 1A Risk Factors&quot; nor &quot;Item 1B Unresolved&quot;."}, {"owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "edited": false, "score": 0, "creation_date": 1491424325, "post_id": 43241016, "comment_id": 73552295, "body": "&quot;Item 1A Risk Factors&quot; nor &quot;Item 1B Unresolved&quot; are in the actual texts. That&#39;s why I remove html tags first and try to use regular expression. Hope this makes sense."}, {"owner": {"reputation": 671, "user_id": 7737781, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aAdetGA1ucY/AAAAAAAAAAI/AAAAAAAAAAo/UxFBJQMwA3g/photo.jpg?sz=128", "display_name": "Quinn Mortimer", "link": "https://stackoverflow.com/users/7737781/quinn-mortimer"}, "edited": false, "score": 0, "creation_date": 1491424998, "post_id": 43241016, "comment_id": 73552673, "body": "It&#39;s probably worth noting that html2text converts HTML source to valid Markdown, not plain text."}], "answers": [{"comments": [{"owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "edited": false, "score": 0, "creation_date": 1491433599, "post_id": 43241945, "comment_id": 73556181, "body": "Thanks! @anonyXmous"}], "tags": [], "owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "is_accepted": true, "score": 2, "last_activity_date": 1491427673, "creation_date": 1491427673, "answer_id": 43241945, "question_id": 43241016, "link": "https://stackoverflow.com/questions/43241016/extracting-data-from-a-html-page-python/43241945#43241945", "title": "Extracting data from a HTML page (Python)", "body": "<p>If you want to use regEx, you may use below code which runs in Python 3.5.2.\nTry printing your \"text\" to see the actual value of ITEM 1A which is different from what you see in the webpage (ITEM\\&amp;#160\\;1A).  Hope this helps.</p>\n\n<pre><code>import urllib.request\nfrom urllib.error import URLError, HTTPError\nimport re\nimport contextlib\n\nmainpage = \"https://www.sec.gov/Archives/edgar/data/104169/000010416916000079/wmtform10-kx1312016.htm\"\n\ntry:\n    with contextlib.closing(urllib.request.urlopen(mainpage)) as url:\n        htmltext = url.read().decode('utf-8')\n        #print(htmltext)\nexcept HTTPError as e:\n    print(\"HTTPError\") \nexcept URLError as e:\n    print(\"URLError\") \nelse:\n    results = re.findall(r'(?=ITEM\\&amp;\\#160\\;1A\\.(.*)(RISK FACTORS))(.*)(?=ITEM\\&amp;\\#160\\;1B\\.(.*)(UNRESOLVED))',htmltext)\n    print (results)\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1491431196, "creation_date": 1491431196, "answer_id": 43242665, "question_id": 43241016, "link": "https://stackoverflow.com/questions/43241016/extracting-data-from-a-html-page-python/43242665#43242665", "title": "Extracting data from a HTML page (Python)", "body": "<p>You could just remove the html tags with this  </p>\n\n<p><em>Find:</em>  </p>\n\n<p><code>&lt;(?:(?:(?:(script|style|object|embed|applet|noframes|noscript|noembed)(?:\\s+(?&gt;\"[\\S\\s]*?\"|'[\\S\\s]*?'|(?:(?!/&gt;)[^&gt;])?)+)?\\s*&gt;)[\\S\\s]*?&lt;/\\1\\s*(?=&gt;))|(?:/?[\\w:]+\\s*/?)|(?:[\\w:]+\\s+(?:\"[\\S\\s]*?\"|'[\\S\\s]*?'|[^&gt;]?)+\\s*/?)|\\?[\\S\\s]*?\\?|(?:!(?:(?:DOCTYPE[\\S\\s]*?)|(?:\\[CDATA\\[[\\S\\s]*?\\]\\])|(?:--[\\S\\s]*?--)|(?:ATTLIST[\\S\\s]*?)|(?:ENTITY[\\S\\s]*?)|(?:ELEMENT[\\S\\s]*?))))&gt;</code>  </p>\n\n<p><em>Replace with nothing:</em> \"\"  </p>\n\n<p>Then run this on the resulting string  </p>\n\n<p><code>1A\\s*\\.\\s*RISK\\s+FACTORS(.*?)1B\\s*\\.\\s*UNRESOLVED\\s+STAFF\\s+COMMENTS</code>  </p>\n\n<p>What you want is in capture group 1.   </p>\n\n<p>You could wrap the text in your own app or,  </p>\n\n<p>Paste the group 1 string into a <a href=\"http://www.regexformat.com\" rel=\"nofollow noreferrer\">http://www.regexformat.com</a> app<br>\ndocument, right click context menu -> Misc Utilities -> Word Wrap.<br>\nEnter a value of about 60 in max line length.   </p>\n\n<p>And it pops out 5k of wrapped text, like below (which is truncated).  </p>\n\n<pre><code>The risks described below could materially and adversely \naffect our business, results of operations, financial \ncondition and liquidity.  Our business operations could also\nbe affected by additional factors that apply to all \ncompanies operating in the U.S. and globally.Strategic \nRisksGeneral or macro-economic factors, both domestically \nand internationally, may materially adversely affect our \nfinancial performance.General economic conditions, globally \nor in one or more of the markets we serve, may adversely \naffect our financial performance.  Higher interest rates, \nlower or higher prices of petroleum products, including \ncrude oil, natural gas, gasoline, and diesel fuel, higher \ncosts for electricity and other energy, weakness in the \nhousing market, inflation, deflation, increased costs of \nessential services, such as medical care and utilities, \nhigher levels of unemployment, decreases in consumer \ndisposable income, unavailability of consumer credit, higher\nconsumer debt levels, changes in consumer spending and \nshopping patterns, fluctuations in currency exchange rates, \nhigher tax rates, imposition of new taxes and surcharges, \nother changes in tax laws, other regulatory changes, overall\n</code></pre>\n"}], "owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 2, "accepted_answer_id": 43241945, "answer_count": 2, "score": 2, "last_activity_date": 1491431196, "creation_date": 1491424061, "last_edit_date": 1491424167, "question_id": 43241016, "link": "https://stackoverflow.com/questions/43241016/extracting-data-from-a-html-page-python", "title": "Extracting data from a HTML page (Python)", "body": "<p>I am trying to extract some data from <a href=\"http://www.sec.gov/Archives/edgar/data/104169/000010416916000079/wmtform10-kx1312016.htm\" rel=\"nofollow noreferrer\">this page</a>. I would like to extract any texts between two strings (Item 1A RISK FACTORS and Item 1B UNRESOLVED STAFF COMMENTS). It is difficult to come up with the right regular expression to do that.</p>\n\n<pre><code>import re\nimport html2text\n\nurl = \"https://www.sec.gov/Archives/edgar/data/104169/000010416916000079/wmtform10-kx1312016.htm\"\nhtml = urllib.urlopen(url).read()\n\ntext = html2text.html2text(html)\n\nregex= '(?&lt;=Item 1A Risk Factors)(.*)(?=Item 1B Unresolved)'\n\nmatch = re.search(regex, text, flags=re.IGNORECASE)\n\nprint match\n</code></pre>\n\n<p>The above code returns 'none'. Any suggestions?</p>\n"}, {"tags": ["python", "numpy", "bigdata"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1491427893, "post_id": 43240980, "comment_id": 73554141, "body": "Would the first column always be sorted?"}, {"owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1491428773, "post_id": 43240980, "comment_id": 73554488, "body": "I believe it is sorted, but I can sort it if necessary."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1491819279, "post_id": 43240980, "comment_id": 73705058, "body": "Did either of the posted solutions work for you?"}, {"owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1492022858, "post_id": 43240980, "comment_id": 73816826, "body": "@Divakar, yes. The accepted answer works, is extremely fast on a dataset of 3,348,026 elements, and requires very little additional code."}], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 1, "last_activity_date": 1491425617, "last_edit_date": 1491425617, "creation_date": 1491425188, "answer_id": 43241320, "question_id": 43240980, "link": "https://stackoverflow.com/questions/43240980/efficiently-counting-duplicate-values-in-a-numpy-column-and-appending-the-counts/43241320#43241320", "title": "Efficiently counting duplicate values in a numpy column and appending the counts", "body": "<p>You can try this, normally <code>X[:, 0] == node_id</code> is time consuming when you have a lot of distinct nodes. You can sort data by the first column firstly and then create a new count column from that by repeating the counts:</p>\n\n<pre><code>train_X = train_X[train_X[:, 0].argsort()]\n_, counts = np.unique(train_X[:,0], return_counts=True)\nnp.hstack((train_X, np.repeat(counts, counts)[:, None]))\n\n# array([[     0,      1,      3,      5],\n#        [     0,     13,      1,      5],\n#        [     0,     37,      1,      5],\n#        [     0,     51,      1,      5],\n#        [     0, 438481,      1,      5],\n#        [     1,      0,      3,      9],\n#        [     1,      4,    354,      9],\n#        [     1,     10,   2602,      9],\n#        [     1,     11,   2689,      9],\n#        [     1,     12,      1,      9],\n#        [     1,     18,    345,      9],\n#        [     1,     19,    311,      9],\n#        [     1,     23,      1,      9],\n#        [     1,     24,    366,      9]])\n</code></pre>\n\n<p>Or you can use pandas groupby:</p>\n\n<pre><code>import pandas as pd\npd.DataFrame(train_X).pipe(lambda x: x.assign(size = x.groupby([0])[0].transform('size'))).values\n\n#array([[     0,      1,      3,      5],\n#       [     0,     13,      1,      5],\n#       [     0,     37,      1,      5],\n#       [     0,     51,      1,      5],\n#       [     0, 438481,      1,      5],\n#       [     1,      0,      3,      9],\n#       [     1,      4,    354,      9],\n#       [     1,     10,   2602,      9],\n#       [     1,     11,   2689,      9],\n#       [     1,     12,      1,      9],\n#       [     1,     18,    345,      9],\n#       [     1,     19,    311,      9],\n#       [     1,     23,      1,      9],\n#       [     1,     24,    366,      9]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 3, "last_activity_date": 1491425981, "creation_date": 1491425981, "answer_id": 43241517, "question_id": 43240980, "link": "https://stackoverflow.com/questions/43240980/efficiently-counting-duplicate-values-in-a-numpy-column-and-appending-the-counts/43241517#43241517", "title": "Efficiently counting duplicate values in a numpy column and appending the counts", "body": "<p>You can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html\" rel=\"nofollow noreferrer\"><code>numpy.unique</code></a>.</p>\n\n<p>Suppose your input data is in the array <code>data</code>:</p>\n\n<pre><code>In [245]: data\nOut[245]: \narray([[     0,      1,      3],\n       [     0,     13,      1],\n       [     0,     37,      1],\n       [     0,     51,      1],\n       [     0, 438481,      1],\n       [     1,      0,      3],\n       [     1,      4,    354],\n       [     1,     10,   2602],\n       [     1,     11,   2689],\n       [     1,     12,      1],\n       [     1,     18,    345],\n       [     1,     19,    311],\n       [     1,     23,      1],\n       [     1,     24,    366],\n       [     2,     10,      1],\n       [     2,     13,      3],\n       [     2,     99,      5],\n       [     3,     25,     13],\n       [     3,     99,     15]])\n</code></pre>\n\n<p>Find the unique values in the first column, along with the \"inverse\" array and the counts of the occurrences of each unique value:</p>\n\n<pre><code>In [246]: nodes, inv, counts = np.unique(data[:,0], return_inverse=True, return_counts=True)\n</code></pre>\n\n<p>Your column of out degrees is <code>counts[inv]</code>:</p>\n\n<pre><code>In [247]: out_degrees = counts[inv]\n\nIn [248]: out_degrees\nOut[248]: array([5, 5, 5, 5, 5, 9, 9, 9, 9, 9, 9, 9, 9, 9, 3, 3, 3, 2, 2])\n</code></pre>\n\n<p>This assumes that a pair (source_node, target_node) does not occur more than once in the <code>data</code> array.</p>\n"}, {"tags": [], "owner": {"reputation": 9216, "user_id": 613246, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09cd8fb3ecae7d982c5bb0e1081dcf69?s=128&d=identicon&r=PG", "display_name": "Eelco Hoogendoorn", "link": "https://stackoverflow.com/users/613246/eelco-hoogendoorn"}, "is_accepted": false, "score": 3, "last_activity_date": 1491426346, "creation_date": 1491426346, "answer_id": 43241611, "question_id": 43240980, "link": "https://stackoverflow.com/questions/43240980/efficiently-counting-duplicate-values-in-a-numpy-column-and-appending-the-counts/43241611#43241611", "title": "Efficiently counting duplicate values in a numpy column and appending the counts", "body": "<p>np.unique indeed does a fine job here, as explained in some of the other answers.</p>\n\n<p>Still you might want to take a look at <a href=\"https://github.com/EelcoHoogendoorn/Numpy_arraysetops_EP\" rel=\"nofollow noreferrer\">numpy_indexed</a> (disclaimer: I am its author); it can do the same thing with the same efficiency, but supports a lot of other functionality as well, that tends to be very useful when working with graphs; or sparse / jagged datastructures in general. </p>\n\n<p>It also has a clean one-line solution to your problem specifically:</p>\n\n<pre><code>import numpy_indexed as npi\nX = np.column_stack((X, npi.multiplicity(X[:, 0])))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "edited": false, "score": 0, "creation_date": 1492023284, "post_id": 43242194, "comment_id": 73817075, "body": "This works and is also fast. The accepted answer requires a little less code, but this is a complete solution if anyone reading this answer wants that."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 1, "last_activity_date": 1491429535, "last_edit_date": 1491429535, "creation_date": 1491428811, "answer_id": 43242194, "question_id": 43240980, "link": "https://stackoverflow.com/questions/43240980/efficiently-counting-duplicate-values-in-a-numpy-column-and-appending-the-counts/43242194#43242194", "title": "Efficiently counting duplicate values in a numpy column and appending the counts", "body": "<p>Here's one vectorized approach with focus on performance -</p>\n\n<pre><code>def argsort_unique(idx):\n    # Original idea : http://stackoverflow.com/a/41242285/3293881 \n    n = idx.size\n    sidx = np.empty(n,dtype=int)\n    sidx[idx] = np.arange(n)\n    return sidx\n\ndef count_and_append(a): # For sorted arrays\n    a0 = a[:,0]\n    sf0 = np.flatnonzero(a0[1:] != a0[:-1])+1\n    shift_idx = np.concatenate(( [0] , sf0, [a0.size] ))\n    c = shift_idx[1:] - shift_idx[:-1]\n    out_col = np.repeat(c,c)\n    return np.column_stack((a, out_col))\n\ndef count_and_append_generic(a): # For generic (not necessarily sorted) arrays\n    sidx = a[:,0].argsort()\n    b = a[sidx]\n    return count_and_append(b)[argsort_unique(sidx)]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [70]: a # Not sorted case\nOut[70]: \narray([[     1,     18,    345],\n       [     1,     23,      1],\n       [     0,     13,      1],\n       [     0,     37,      1],\n       [     2,     99,      5],\n       [     0,      1,      3],\n       [     2,     13,      3],\n       [     1,      4,    354],\n       [     1,     24,    366],\n       [     0, 438481,      1],\n       [     1,     12,      1],\n       [     1,     11,   2689],\n       [     1,     19,    311],\n       [     2,     10,      1],\n       [     3,     99,     15],\n       [     0,     51,      1],\n       [     3,     25,     13],\n       [     1,      0,      3],\n       [     1,     10,   2602]])\n\nIn [71]: np.allclose(count_and_append_generic(a), save_degrees(a))\nOut[71]: True\n</code></pre>\n\n<p>If input array is already sorted by the first column, simply use <code>count_and_append(a)</code>.</p>\n"}], "owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1738, "favorite_count": 1, "accepted_answer_id": 43241517, "answer_count": 4, "score": 2, "last_activity_date": 1505544412, "creation_date": 1491423914, "last_edit_date": 1506102531, "question_id": 43240980, "link": "https://stackoverflow.com/questions/43240980/efficiently-counting-duplicate-values-in-a-numpy-column-and-appending-the-counts", "title": "Efficiently counting duplicate values in a numpy column and appending the counts", "body": "<p>I have a dataset representing a directed graph. The first column is the source node, the second column is the target node, and we can ignore the third column (essentially a weight). So for example:</p>\n\n<pre><code>0 1 3\n0 13 1\n0 37 1\n0 51 1\n0 438481 1\n1 0 3\n1 4 354\n1 10 2602\n1 11 2689\n1 12 1\n1 18 345\n1 19 311\n1 23 1\n1 24 366\n...\n</code></pre>\n\n<p>What I would like to do is append the out-degree for each node. For example, if I just added the out-degree for node 0, I would have:</p>\n\n<pre><code>0 1 3 5\n0 13 1 5\n0 37 1 5\n0 51 1 5\n0 438481 1 5\n1 0 3\n...\n</code></pre>\n\n<p>I have some code that does this, but it is extremely slow because I am using a <code>for</code> loop:</p>\n\n<pre><code>import numpy as np\n\ndef save_degrees(X):\n    new_col = np.zeros(X.shape[0], dtype=np.int)\n    X = np.column_stack((X, new_col))\n    node_ids, degrees = np.unique(X[:, 0], return_counts=True)\n    # This is the slow part.\n    for node_id, deg in zip(node_ids, degrees):\n        indices = X[:, 0] == node_id\n        X[:, -1][indices] = deg\n    return X\n\ntrain_X = np.load('data/train_X.npy')\ntrain_X = save_degrees(train_X)\nnp.save('data/train_X_degrees.npy', train_X)\n</code></pre>\n\n<p>Is there a more efficient way to build this data structure?</p>\n"}, {"tags": ["python", "opencv", "cv2"], "comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 7, "creation_date": 1491424025, "post_id": 43240951, "comment_id": 73552158, "body": "Stop complaining - that&#39;s nice and sharp ;-) ;-)"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1491441882, "post_id": 43240951, "comment_id": 73558257, "body": "It is working fine on my machine (Linux, OpenCV2.x) :)"}, {"owner": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "edited": false, "score": 0, "creation_date": 1491499183, "post_id": 43240951, "comment_id": 73592266, "body": "I also can&#39;t reproduce this. Might be time to rebuild libTIFF and openCV."}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1535100863, "post_id": 43240951, "comment_id": 90950628, "body": "Can you post the TIFF itself? Also what versions of OpenCV etc."}], "owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3460, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1491423793, "creation_date": 1491423793, "question_id": 43240951, "link": "https://stackoverflow.com/questions/43240951/cv2-imwrite-mangles-tiff-output", "title": "cv2.imwrite Mangles TIFF Output", "body": "<p>I've been playing with OpenCV 3.1.0 in Python. My code works great, but when it comes time to write it out to a TIFF file, this happens:</p>\n\n<p><strong>Before:</strong>\n<a href=\"https://i.stack.imgur.com/gnHJJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gnHJJ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>After:</strong>\n<a href=\"https://i.stack.imgur.com/TIsFB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TIsFB.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>My code to reproduce this is literally two lines:</p>\n\n<pre><code>f = cv2.imread('f.tif', 0)\ncv2.imwrite('test.tif', f)\n</code></pre>\n\n<p>Both <code>f.tif</code> and the resulting <code>test.tif</code> are 8-bit greyscale TIFF files, according to ImageMagick.</p>\n\n<p>Writing the image to PNG instead of TIFF works just fine.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491423479, "post_id": 43240769, "comment_id": 73551864, "body": "What is the actual directory that your code is attempting to remove?"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491423581, "post_id": 43240769, "comment_id": 73551916, "body": "im trying to delete everything under the * Pub\\Cache\\ * directory.  It is a bunch of stuff related to the outdated datasets from Dart&#39;s (The language) package management system"}, {"owner": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491424205, "post_id": 43240769, "comment_id": 73552246, "body": "When you get the &quot;Access denied&quot; error, did any of the files get deleted? What happens if you try to delete the directory from Explorer?"}, {"owner": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491424272, "post_id": 43240769, "comment_id": 73552282, "body": "As a side note, there are cleaner ways to fetch environment variables (<code>os.environ[&#39;APPDATA&#39;]</code>) and build paths from individual components (<code>os.path.join(basepath,dir1,dir2,...)</code>)."}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491424456, "post_id": 43240769, "comment_id": 73552359, "body": "When deleting the items from explorer, they all delete.  Was about 250mb worth of data clean up.  Also, i really shouldve thought more on it.  Should i have just did:  <code>path = &quot;%sPub\\\\Cache\\\\&quot; % os.environ[&quot;APPDATA&quot;]</code> ?"}, {"owner": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491424805, "post_id": 43240769, "comment_id": 73552561, "body": "Your Python code isn&#39;t trying to just delete the contents of that directory - it&#39;s trying to delete the <b>directory itself</b>, an additional step that could fail. Your &quot;Access is denied&quot; message should have indicated which file it was unable to delete - was that file in use by another application at the time?"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491424867, "post_id": 43240769, "comment_id": 73552594, "body": "yeah my goal was to delete the folder and all of its contents.  The error was: WindowsError: [Error 5] Access is denied: &#39;C:\\\\Users\\\\wfrancis\\\\AppData\\\\Roaming\\\\Pub\\\\Cache\\\\git\\\\cac&zwnj;&#8203;he\\\\seg_ui-7212c90ba&zwnj;&#8203;70f88fb83440f8049e5d&zwnj;&#8203;6ee9e2276ef\\\\objects&zwnj;&#8203;\\\\pack\\\\pack-053cf44&zwnj;&#8203;e4ba619c904614642a95&zwnj;&#8203;7e2d44688ba54.idx&#39;"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491425197, "post_id": 43240769, "comment_id": 73552775, "body": "It seems like there was a subfolder called git (as you can see in the above comment) that it didnt like.  When i repopulated the area the script worked.  Something in that git subdirectory though is not really liked by the <code>os.remove</code>function"}, {"owner": {"reputation": 16143, "user_id": 3357935, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jaomO.png?s=128&g=1", "display_name": "Stevoisiak", "link": "https://stackoverflow.com/users/3357935/stevoisiak"}, "edited": false, "score": 0, "creation_date": 1528905767, "post_id": 43240769, "comment_id": 88686797, "body": "Related: <a href=\"https://stackoverflow.com/q/37830326/3357935\">How to avoid \u201cWindowsError: &#91;Error 5&#93; Access is denied\u201d</a>"}], "owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491423470, "creation_date": 1491423141, "last_edit_date": 1491423470, "question_id": 43240769, "link": "https://stackoverflow.com/questions/43240769/running-python-in-admin-console-still-throwing-windowserror-error-5-access-is-de", "title": "running python in admin console still throwing WindowsError Error 5 Access is denied", "body": "<p>I have a script which is suppose to recurively remove corrupt code I am working with.</p>\n\n<pre><code>import shutil\nimport subprocess\n\npath = subprocess.check_output(\"echo %APPDATA%\", shell=True)\npath = \"%s\\\\\" % path[:-2]\nshutil.rmtree(\"%sPub\\\\Cache\\\\\" % path)\n</code></pre>\n\n<p>and it fails at the rmtree call.  It looks like it fails in the rmtree call at:</p>\n\n<pre><code>os.remove(fullname)\n</code></pre>\n\n<p>and then it will throw the error saying:</p>\n\n<p><em>WindowsError: [Error 5] Access is denied: '.............'</em></p>\n\n<p>I have tried both running this in a regular shell and an admin shell and im not sure what is going on.  Maybe the subprocess launched by os.remove is not admin?  I figured those rights would be passed into the child processes forked by my python script.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491464077, "post_id": 43240695, "comment_id": 73566413, "body": "Please note that tables and queries have no guaranteed order unless you use ORDER BY."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491464458, "post_id": 43240695, "comment_id": 73566632, "body": "Do you want to create all three timers at once? Or to change the timer when the previous step has expired?"}, {"owner": {"reputation": 85, "user_id": 6168474, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6be2e698e738c8dea7d4ab9e9e22eaa1?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy_Hanna", "link": "https://stackoverflow.com/users/6168474/cathy-hanna"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491481648, "post_id": 43240695, "comment_id": 73578971, "body": "I need a timer for each step? Can I put a loop in the checkRunTime function and once the duration from the first step is done, run the next step?"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491481944, "post_id": 43240695, "comment_id": 73579202, "body": "You get a message when the timer expires. In the message handler, start the next timer."}, {"owner": {"reputation": 85, "user_id": 6168474, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6be2e698e738c8dea7d4ab9e9e22eaa1?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy_Hanna", "link": "https://stackoverflow.com/users/6168474/cathy-hanna"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491483848, "post_id": 43240695, "comment_id": 73580667, "body": "I&#39;m still having trouble visualizing the code (self-taught newbie with no programming experience). Should I pull one record at a time, when that one completes loop back and pull the next?"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491487448, "post_id": 43240695, "comment_id": 73583613, "body": "You need to remember either the step number, so that you can retrieve the next one, or the entire list."}], "owner": {"reputation": 85, "user_id": 6168474, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6be2e698e738c8dea7d4ab9e9e22eaa1?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy_Hanna", "link": "https://stackoverflow.com/users/6168474/cathy-hanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491422858, "creation_date": 1491422858, "question_id": 43240695, "link": "https://stackoverflow.com/questions/43240695/iterating-through-a-python-sqlite-db-using-data-as-a-timer-variable", "title": "Iterating through a python sqlite db using data as a timer variable", "body": "<p>I have an sqlite database with four columns: cycle_no, step, color, duration. I would like to run the color for each step in the cycle for the duration indicated. For example, if the database contains this: toRun = [(1,1,red,2),(1,2,blue,4), (1,3,green,3) then red will light for two minutes, blue for 4 minutes and green for 3 minutes. I am using wx.Timer and the process starts on a button click.</p>\n\n<pre><code>def onRun(self, event):\n\n    toRun = self.c.execute(\"SELECT * from cycles WHERE Cycle_No=1\").fetchall()\n    print toRun\n\n    for row in toRun:\n        #something here\n\n\n    self.setTime()\n    self.lightTimer.Start(10000)\n\ndef setTime(self):\n    global timeOn\n    now = datetime.datetime.now()\n    timeOn = now + datetime.timedelta(minutes=dur) \n    print timeOn\n\ndef checkRunTime(self,event):\n    global timeOn,\n    if timeOn &lt; datetime.datetime.now():\n        print 'check time'\n</code></pre>\n\n<p>I'm not having any luck with the loop. Either all the colors go off at once or only the last color lights.\nThank you.</p>\n"}, {"tags": ["python", "mysql", "sql", "sqlalchemy"], "comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1491423111, "post_id": 43240669, "comment_id": 73551646, "body": "which database?"}, {"owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1491423163, "post_id": 43240669, "comment_id": 73551685, "body": "mysql but the query is execute with sqlalchemy like so: self.session.execute(unlicensed_query).fetchall()[0]"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 3, "creation_date": 1491423261, "post_id": 43240669, "comment_id": 73551737, "body": "Look here: <a href=\"http://docs.sqlalchemy.org/en/latest/core/tutorial.html#specifying-bound-parameter-behaviors\" rel=\"nofollow noreferrer\">docs.sqlalchemy.org/en/latest/core/&hellip;</a>"}, {"owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1491425252, "post_id": 43240669, "comment_id": 73552804, "body": "I used bound parameters using thebjorn&#39;s link and it&#39;s working well. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "is_accepted": false, "score": 2, "last_activity_date": 1491426162, "creation_date": 1491426162, "answer_id": 43241569, "question_id": 43240669, "link": "https://stackoverflow.com/questions/43240669/python-variable-in-long-sql-string/43241569#43241569", "title": "Python variable in long SQL string", "body": "<p>As stated by thebjorn, the correct way to do this is to use bound parameters (<a href=\"http://docs.sqlalchemy.org/en/latest/core/tutorial.html#specifying-bound-parameter-behaviors\" rel=\"nofollow noreferrer\">http://docs.sqlalchemy.org/en/latest/core/tutorial.html#specifying-bound-parameter-behaviors</a>). An example is here:</p>\n\n<pre><code>from sqlalchemy.sql import text\nfully_utilized_query = text(\"\"\"\n    SELECT SUM(x.quantity)\n            FROM (\n            SELECT cu.customer_id, cu.product_id, cu.quantity\n            FROM csi_usage cu\n            JOIN csi c\n            ON cu.customer_id = c.customer_id\n            AND cu.product_id = c.product_id\n            AND cu.quantity = c.licence_qty\n            WHERE cu.customer_id = :customer_id) x;\n    \"\"\")\nfully_utilized = self.session.execute(fully_utilized_query, {'customer_id': current_user.customer_id}).scalar()\n</code></pre>\n"}], "owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491426162, "creation_date": 1491422771, "last_edit_date": 1491423335, "question_id": 43240669, "link": "https://stackoverflow.com/questions/43240669/python-variable-in-long-sql-string", "title": "Python variable in long SQL string", "body": "<p>What is a safe way to replace the number in the second-to-last line of this SQL query with a variable?</p>\n\n<p>Say my variable is customer_id. Can I use {} in place of 2 and put .format(customer_id) at the end of this string? </p>\n\n<pre><code>unlicensed_query = \"\"\"\n    SELECT SUM(x.quantity), SUM(x.quantity * p.list_price)\n        FROM (\n        SELECT cu.customer_id, cu.product_id, cu.quantity\n        FROM csi_usage cu LEFT JOIN csi c\n        ON cu.customer_id = c.customer_id\n        AND cu.product_id = c.product_id\n        WHERE c.product_id IS NULL\n        AND cu.customer_id = 2) x, product p\n        WHERE x.product_id = p.id;\n    \"\"\"\n</code></pre>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "edited": false, "score": 0, "creation_date": 1491422787, "post_id": 43240617, "comment_id": 73551443, "body": "you never call <code>data_entry()</code> and you are missing <code>()</code> on the last line (sholud be <code>conn.close()</code>); also, rename variable <code>list</code> to something like <code>list_</code>, but don&#39;t use reserved words"}], "answers": [{"tags": [], "owner": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "is_accepted": true, "score": 3, "last_activity_date": 1491423134, "creation_date": 1491423134, "answer_id": 43240767, "question_id": 43240617, "link": "https://stackoverflow.com/questions/43240617/python-sqlite3-insert-list/43240767#43240767", "title": "python sqlite3 insert list", "body": "<p>Iterate over <code>list_</code> and execute <code>INSERT</code> for each item. And call <code>data_entry()</code> to actually insert data.</p>\n\n<pre><code>import sqlite3\n\nlist_ = ['a', 'b', 'c']\n\n#create a data structure\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\n\n#Create table\nc.execute('''Create TABLE if not exists server(\"sites\")''')\n\n#Insert links into table\ndef data_entry():\n    for item in list_:\n        c.execute(\"INSERT INTO server(sites) VALUES(?)\", (item))\n    conn.commit()\n\ndata_entry()  # ==&gt; call the function\n\n#query database\nc.execute(\"SELECT * FROM server\")\nrows = c.fetchall()\nfor row in rows:\n    print(row)\n\nconn.close()\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5780947"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18995, "favorite_count": 5, "accepted_answer_id": 43240767, "answer_count": 1, "score": 2, "last_activity_date": 1510251472, "creation_date": 1491422602, "last_edit_date": 1491422952, "question_id": 43240617, "link": "https://stackoverflow.com/questions/43240617/python-sqlite3-insert-list", "title": "python sqlite3 insert list", "body": "<p>I have a python script that should insert a list into a sqlite table. It appears my insert statement is not working. </p>\n\n<pre><code>links = ['a', 'b', 'c']\n\nconn = sqlite3.connect('example.db')\n\n#create a data structure\nc = conn.cursor()\n\n#Create table\nc.execute('''Create TABLE if not exists server(\"sites\")''')\n\n#Insert links into table\ndef data_entry():\n    sites = links\n    c.execute(\"INSERT INTO server(sites) VALUES(?)\", (sites))\n    conn.commit()\n\n#query database\nc.execute(\"SELECT * FROM server\")\nrows = c.fetchall()\nfor row in rows:\n    print(row)\n\nconn.close\n</code></pre>\n\n<p>I checked the database at command line but the \"server\" table is empty:</p>\n\n<pre><code>C:\\App\\sqlite\\sqlite_databases&gt;sqlite3\nSQLite version 3.17.0 2017-02-13 16:02:40\nEnter \".help\" for usage hints.\nConnected to a transient in-memory database.\nUse \".open FILENAME\" to reopen on a persistent database.\nsqlite&gt; .tables\nserver\nsqlite&gt; SELECT * FROM server\n...&gt; ;\nsqlite&gt;\n</code></pre>\n\n<p>So it doesn't appear that the list is actually being inserted.</p>\n"}, {"tags": ["python", "opencv", "normalization"], "answers": [{"tags": [], "owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "is_accepted": true, "score": 1, "last_activity_date": 1491442929, "creation_date": 1491442929, "answer_id": 43244296, "question_id": 43240604, "link": "https://stackoverflow.com/questions/43240604/python-local-normalization-in-opencv/43244296#43244296", "title": "Python - Local Normalization in OpenCV", "body": "<p>There were some errors in your implementation, So here is the correctly translated code in python:</p>\n\n<pre><code>import cv2\nimport numpy as np\n\nimg = cv2.imread('lena.png')\n\ngray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n\nfloat_gray = gray.astype(np.float32) / 255.0\n\nblur = cv2.GaussianBlur(float_gray, (0, 0), sigmaX=2, sigmaY=2)\nnum = float_gray - blur\n\nblur = cv2.GaussianBlur(num*num, (0, 0), sigmaX=20, sigmaY=20)\nden = cv2.pow(blur, 0.5)\n\ngray = num / den\n\ncv2.normalize(gray, dst=gray, alpha=0.0, beta=1.0, norm_type=cv2.NORM_MINMAX)\n\ncv2.imwrite(\"./debug.png\", gray * 255)\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ofAR3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ofAR3.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1972, "user_id": 5180620, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10152895466831954/picture?type=large", "display_name": "Yohan Obadia", "link": "https://stackoverflow.com/users/5180620/yohan-obadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2613, "favorite_count": 2, "accepted_answer_id": 43244296, "answer_count": 1, "score": 0, "last_activity_date": 1491442929, "creation_date": 1491422577, "last_edit_date": 1495541422, "question_id": 43240604, "link": "https://stackoverflow.com/questions/43240604/python-local-normalization-in-opencv", "title": "Python - Local Normalization in OpenCV", "body": "<p>I am trying to implement in python the same function than on this post: <a href=\"https://stackoverflow.com/questions/14872306/local-normalization-in-opencv\">link</a></p>\n\n<p>However, I can't get a smooth result, whatever I try, even though I tried both implementation, the corrected one of the OP and the second answer provided.</p>\n\n<p>I am probably missing something small but I can't figure out what.</p>\n\n<pre><code>def local_norm(img, sigma_1, sigma_2):\n\n    float_gray = img * cv2.CV_32FC1 / 255.0\n    blur_1 = int(2 * np.ceil(- norm.ppf(0.05, loc=0, scale=sigma_1)) + 1)\n    blurred_1 = cv2.GaussianBlur(float_gray, (blur_1, blur_1), sigma_1, sigma_1)\n    temp_1 = float_gray - blurred_1\n\n    temp_2 = cv2.pow(temp_1, 2.0)\n    blur_2 = int(2 * np.ceil(- norm.ppf(0.05, loc=0, scale=sigma_2)) + 1)\n    blurred_2 = cv2.GaussianBlur(temp_2, (blur_2, blur_2), sigma_2, sigma_2)\n    temp_2 = cv2.pow(blurred_2, 0.5)\n\n    float_gray = temp_1 / temp_2\n    res = cv2.normalize(float_gray, 0, 255, cv2.NORM_MINMAX)\n    res = res * cv2.CV_32S\n    return res\n</code></pre>\n\n<p>I must precise that at the end, I use <code>cv2.CV_32S</code> because with the OP's encoding I end up with a black image. For the rest, I use the same sigma, 2.0 and 20.0.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ee17Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ee17Q.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-2.7", "list"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 6, "creation_date": 1491422640, "post_id": 43240590, "comment_id": 73551346, "body": "What&#39;s wrong with <code>range(10,0,-1)</code>? (<code>list(range(10,0,-1))</code>, if you use Python-3.x)"}, {"owner": {"reputation": 893, "user_id": 7571052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3N48C.png?s=128&g=1", "display_name": "AsheKetchum", "link": "https://stackoverflow.com/users/7571052/asheketchum"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1491422675, "post_id": 43240590, "comment_id": 73551371, "body": "Nothing :) let me try that again, didn&#39;t work earlier for some reason"}, {"owner": {"reputation": 893, "user_id": 7571052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3N48C.png?s=128&g=1", "display_name": "AsheKetchum", "link": "https://stackoverflow.com/users/7571052/asheketchum"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1491422768, "post_id": 43240590, "comment_id": 73551436, "body": "I think I was trying to write <code>range(0, 10, -1)</code> which did not work."}, {"owner": {"reputation": 2486, "user_id": 7665691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a29f95ebd154c0c084345b1729fc11?s=128&d=identicon&r=PG&f=1", "display_name": "Michael H.", "link": "https://stackoverflow.com/users/7665691/michael-h"}, "edited": false, "score": 1, "creation_date": 1491422807, "post_id": 43240590, "comment_id": 73551457, "body": "Like the slicing syntax <code>[start:stop:step]</code>, the built-in <code>range(start, stop, step)</code> works with the same parameters."}, {"owner": {"reputation": 893, "user_id": 7571052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3N48C.png?s=128&g=1", "display_name": "AsheKetchum", "link": "https://stackoverflow.com/users/7571052/asheketchum"}, "edited": false, "score": 0, "creation_date": 1491422850, "post_id": 43240590, "comment_id": 73551479, "body": "That makes a lot of sense :) Thank you for the clarification"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1491422864, "post_id": 43240590, "comment_id": 73551487, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/509211/explain-pythons-slice-notation\">Explain Python&#39;s slice notation</a>"}, {"owner": {"reputation": 893, "user_id": 7571052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3N48C.png?s=128&g=1", "display_name": "AsheKetchum", "link": "https://stackoverflow.com/users/7571052/asheketchum"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1491422905, "post_id": 43240590, "comment_id": 73551515, "body": "@DYZ The question isn&#39;t necessarily a duplicate, but the link does answer my question :P"}], "answers": [{"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1491422699, "post_id": 43240630, "comment_id": 73551384, "body": "It&#39;s <code>reversed</code> -- The list method is <code>.reverse</code> (just like <code>sorted</code> vs. <code>list.sort</code>)"}, {"owner": {"reputation": 893, "user_id": 7571052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3N48C.png?s=128&g=1", "display_name": "AsheKetchum", "link": "https://stackoverflow.com/users/7571052/asheketchum"}, "edited": false, "score": 0, "creation_date": 1491422736, "post_id": 43240630, "comment_id": 73551408, "body": "either is fine for my case I think :)"}, {"owner": {"reputation": 2398, "user_id": 1489266, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a01327452d034693cc1ed1019c6e30a1?s=128&d=identicon&r=PG", "display_name": "Giannis Spiliopoulos", "link": "https://stackoverflow.com/users/1489266/giannis-spiliopoulos"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1491422742, "post_id": 43240630, "comment_id": 73551415, "body": "@mgilson true, thank you. I have corrected my misspelling"}], "tags": [], "owner": {"reputation": 2398, "user_id": 1489266, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a01327452d034693cc1ed1019c6e30a1?s=128&d=identicon&r=PG", "display_name": "Giannis Spiliopoulos", "link": "https://stackoverflow.com/users/1489266/giannis-spiliopoulos"}, "is_accepted": false, "score": 1, "last_activity_date": 1491422734, "last_edit_date": 1491422734, "creation_date": 1491422643, "answer_id": 43240630, "question_id": 43240590, "link": "https://stackoverflow.com/questions/43240590/generate-decreasing-list-of-integers-using-python-range/43240630#43240630", "title": "Generate decreasing list of integers using python range", "body": "<p>I don't know if it's cleaner but you could also use:</p>\n\n<pre><code>reversed(range(1, 11))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "is_accepted": false, "score": 3, "last_activity_date": 1491422668, "creation_date": 1491422668, "answer_id": 43240639, "question_id": 43240590, "link": "https://stackoverflow.com/questions/43240590/generate-decreasing-list-of-integers-using-python-range/43240639#43240639", "title": "Generate decreasing list of integers using python range", "body": "<p>Using <code>numpy</code> you could do</p>\n\n<pre><code>import numpy as np\nnp.arange(10, 0, -1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 7677986, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208668727258712/picture?type=large", "display_name": "Moi Syme", "link": "https://stackoverflow.com/users/7677986/moi-syme"}, "is_accepted": true, "score": 16, "last_activity_date": 1491422685, "creation_date": 1491422685, "answer_id": 43240644, "question_id": 43240590, "link": "https://stackoverflow.com/questions/43240590/generate-decreasing-list-of-integers-using-python-range/43240644#43240644", "title": "Generate decreasing list of integers using python range", "body": "<p>You can use that <code>range(10, 0, -1)</code></p>\n"}], "owner": {"reputation": 893, "user_id": 7571052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3N48C.png?s=128&g=1", "display_name": "AsheKetchum", "link": "https://stackoverflow.com/users/7571052/asheketchum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8496, "favorite_count": 1, "accepted_answer_id": 43240644, "answer_count": 3, "score": 9, "last_activity_date": 1491423285, "creation_date": 1491422523, "last_edit_date": 1491422988, "question_id": 43240590, "link": "https://stackoverflow.com/questions/43240590/generate-decreasing-list-of-integers-using-python-range", "title": "Generate decreasing list of integers using python range", "body": "<p>This is a simple question. I have </p>\n\n<pre><code>range(1, 11)[::-1]\n</code></pre>\n\n<p>which gives me </p>\n\n<pre><code>[10, 9, 8, 7, 6, 5, 4, 3, 2, 1]\n</code></pre>\n\n<p>Is there a 'cleaner' way to generate the above list? With a single function perhaps?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1491423549, "post_id": 43240551, "comment_id": 73551900, "body": "You cannot get page source code because of <code>browser.quit()</code>. Note that block of code after <code>finally</code> operator executes <b>always</b>.  So you might need to execute <code>browser.page_source</code> before <code>browser.quit()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 334, "user_id": 7822853, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PVse7.png?s=128&g=1", "display_name": "Pierre Delecto", "link": "https://stackoverflow.com/users/7822853/pierre-delecto"}, "edited": false, "score": 0, "creation_date": 1491423494, "post_id": 43240799, "comment_id": 73551871, "body": "This is correct. My understanding was that the Quit() was only being called if the wait time was exceeded but that is not the case."}, {"owner": {"reputation": 1837, "user_id": 6469477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyc7T.jpg?s=128&g=1", "display_name": "Moe Ghafari", "link": "https://stackoverflow.com/users/6469477/moe-ghafari"}, "reply_to_user": {"reputation": 334, "user_id": 7822853, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PVse7.png?s=128&g=1", "display_name": "Pierre Delecto", "link": "https://stackoverflow.com/users/7822853/pierre-delecto"}, "edited": false, "score": 1, "creation_date": 1491423579, "post_id": 43240799, "comment_id": 73551914, "body": "no, a finally block is a way to ensure the code inside it is always executed, remove and see how it will work"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "reply_to_user": {"reputation": 334, "user_id": 7822853, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PVse7.png?s=128&g=1", "display_name": "Pierre Delecto", "link": "https://stackoverflow.com/users/7822853/pierre-delecto"}, "edited": false, "score": 0, "creation_date": 1491432857, "post_id": 43240799, "comment_id": 73555945, "body": "@Farmer Replace <code>finally</code> with <code>catch</code> and you will probably get the behavior you intended. You should probably take some time to read the docs on <code>try-catch-finally</code> to better understand how they work."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1491449810, "post_id": 43240799, "comment_id": 73560233, "body": "@JeffC, in <code>Python</code> it is actually <code>try-except-else-finally</code> construction... OP should replace <code>finally</code> with <code>except</code>"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1491455586, "post_id": 43240799, "comment_id": 73561855, "body": "@Andersson ah... I&#39;m not a python guy. I should have looked it up instead of assuming it&#39;s the same as Java and C#. Thanks."}], "tags": [], "owner": {"reputation": 1837, "user_id": 6469477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyc7T.jpg?s=128&g=1", "display_name": "Moe Ghafari", "link": "https://stackoverflow.com/users/6469477/moe-ghafari"}, "is_accepted": true, "score": 2, "last_activity_date": 1491423251, "creation_date": 1491423251, "answer_id": 43240799, "question_id": 43240551, "link": "https://stackoverflow.com/questions/43240551/python-selenium-webdriver-explicit-wait-connection-error/43240799#43240799", "title": "Python selenium webdriver explicit wait connection error", "body": "<p>Im assuming you are getting this exception at browser.page_source\nThis is because you are doing browser.quit \nQuit() - It is used to shut down the web driver instance or destroy the web driver</p>\n\n<p>you will need to get the page source before you quit either by adding the print statement at the end of your try block or moving the quit after you print :)</p>\n"}], "owner": {"reputation": 334, "user_id": 7822853, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PVse7.png?s=128&g=1", "display_name": "Pierre Delecto", "link": "https://stackoverflow.com/users/7822853/pierre-delecto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 43240799, "answer_count": 1, "score": 2, "last_activity_date": 1491423251, "creation_date": 1491422363, "question_id": 43240551, "link": "https://stackoverflow.com/questions/43240551/python-selenium-webdriver-explicit-wait-connection-error", "title": "Python selenium webdriver explicit wait connection error", "body": "<p>The script I am running does not return consistent data from run to run. I believe as I iterate through pages, it is not waiting for all pages to load Javascript and AJAX in full. In an attempt to remedy this I added the explicit wait below, but it returns the following error: </p>\n\n<blockquote>\n  <p>ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it</p>\n</blockquote>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\nbrowser = webdriver.Chrome()\nurl = 'http://www.website.com'\nbrowser.get(url)\ntry:\n    element = WebDriverWait(browser, 10).until(EC.presence_of_all_elements_located((By.ID, \"results-main\")))\nfinally:\n    browser.quit()\n\nprint (browser.page_source)\n</code></pre>\n\n<p>An implicit wait will run without errors, but it also does not return consistent source code.</p>\n"}, {"tags": ["python", "python-3.x", "apache-spark", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 45345, "user_id": 470184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DzXRW.jpg?s=128&g=1", "display_name": "blue-sky", "link": "https://stackoverflow.com/users/470184/blue-sky"}, "edited": false, "score": 0, "creation_date": 1491471080, "post_id": 43241691, "comment_id": 73571186, "body": "+1 , in my experience implementing at RDD level faster than at dataframe level in terms of algorithm implementation but I&#39;m biased towards  preferring functional (rdd) rather than sql (dataframe) styles."}, {"owner": {"reputation": 3761, "user_id": 1336758, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oIp1q.png?s=128&g=1", "display_name": "NYCeyes", "link": "https://stackoverflow.com/users/1336758/nyceyes"}, "edited": false, "score": 2, "creation_date": 1547098695, "post_id": 43241691, "comment_id": 95076790, "body": "The book Spark 2 The Definitive Guide... validates this answer and, in fact, encourages use of the DataFrame centric, newer MLib. In fact, I believe it said that the older MLlib is now in maintenance status, and will only receive fixes. Sadly, I don&#39;t have a link to the book for you (as I type this from a small phone), but it&#39;s the latest one from O&#39;Reilly."}], "tags": [], "owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "is_accepted": true, "score": 24, "last_activity_date": 1491426669, "creation_date": 1491426669, "answer_id": 43241691, "question_id": 43240539, "link": "https://stackoverflow.com/questions/43240539/pyspark-mllib-versus-pyspark-ml-packages/43241691#43241691", "title": "`pyspark mllib` versus `pyspark ml` packages", "body": "<p>From my experience <code>pyspark.mllib</code> classes can only be used with <code>pyspark.RDD</code>'s, whereas (as you mention) <code>pyspark.ml</code> classes can only be used with <code>pyspark.sql.DataFrame</code>'s. There is mention to support this in the documentation for <code>pyspark.ml</code>, the first entry in <a href=\"http://spark.apache.org/docs/latest/api/python/pyspark.ml.html\" rel=\"noreferrer\"><code>pyspark.ml package</code></a> states: </p>\n\n<blockquote>\n  <p>DataFrame-based machine learning APIs to let users quickly assemble and configure practical machine learning pipelines.</p>\n</blockquote>\n\n<p>Now I am reminded of an article I read a while back regarding the three API's available in Spark 2.0, their relative benefits/drawbacks and their comparative performance. <a href=\"https://databricks.com/blog/2016/07/14/a-tale-of-three-apache-spark-apis-rdds-dataframes-and-datasets.html\" rel=\"noreferrer\">A Tale of Three Apache Spark APIs: RDDs, DataFrames, and Datasets</a>. I was in the midst of doing performance testing on new client servers and was interested if there would ever be a scenario in which it would be worth developing an RDD based approach as opposed to a DataFrame based approach (my approach of choice), but I digress. </p>\n\n<p>The gist was that there are situations in which each are highly suited and others where they might not be. One example I remember is that if you data is already structured DataFrames confer some performance benefits over RDD's, this is apparently drastic as the complexity of your operations increase. Another observation was that DataSets and DataFrames consume far less memory when caching than RDD's. In summation the author concluded that for low level operations RDD's are great, but for high level operations, viewing, and tying with other API's DataFrames and DataSets are superior.</p>\n\n<p>So to come back full circle to your question, I believe the answer is a resounding <code>pyspark.ml</code> as the classes in this package are designed to utilize <code>pyspark.sql.DataFrames</code>. I would imagine that the performance of complex algorithms implemented in each of these packages would be significant if you were to test against the same data structured as a DataFrame vs RDD. Furthermore, viewing the data and developing compelling visuals would be both more intuitive and have better performance.</p>\n"}], "owner": {"reputation": 45345, "user_id": 470184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DzXRW.jpg?s=128&g=1", "display_name": "blue-sky", "link": "https://stackoverflow.com/users/470184/blue-sky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4700, "favorite_count": 6, "accepted_answer_id": 43241691, "answer_count": 1, "score": 18, "last_activity_date": 1491426669, "creation_date": 1491422341, "last_edit_date": 1491423376, "question_id": 43240539, "link": "https://stackoverflow.com/questions/43240539/pyspark-mllib-versus-pyspark-ml-packages", "title": "`pyspark mllib` versus `pyspark ml` packages", "body": "<p>What is difference between <code>pyspark mllib</code> and <code>pyspark ml</code> packages ? :</p>\n\n<p><a href=\"https://spark.apache.org/docs/latest/api/python/pyspark.mllib.html\" rel=\"noreferrer\">https://spark.apache.org/docs/latest/api/python/pyspark.mllib.html</a></p>\n\n<p><a href=\"https://spark.apache.org/docs/latest/api/python/pyspark.ml.html\" rel=\"noreferrer\">https://spark.apache.org/docs/latest/api/python/pyspark.ml.html</a></p>\n\n<p><code>pyspark mllib</code> appears to be target algorithms at dataframe level <code>pyspark ml</code></p>\n\n<p>One difference I found is <code>pyspark ml</code> implements <code>pyspark.ml.tuning.CrossValidator</code> while <code>pyspark mllib</code> does not.</p>\n\n<p>My understanding is the library should use if implementing algorithms on Apache Spark framework is <code>mllib</code> but there appears to be a split ?</p>\n\n<p>There does not appear to be interoperability between each of the frameworks without transforming types as they each contain a different package structure.</p>\n"}, {"tags": ["python", "networkx"], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1491422396, "creation_date": 1491422396, "answer_id": 43240561, "question_id": 43240462, "link": "https://stackoverflow.com/questions/43240462/networkx-python-directed-undirected-graph-inconsistent-nodes-and-edges/43240561#43240561", "title": "networkx python, directed/undirected graph, inconsistent nodes and edges?", "body": "<p>Edges in an undirected graph have no direction. Edges from A to B and from B to A are considered duplicates. <code>add_edge()</code> silently ignores duplicates. That is why your undirected graph would have one edge (A,B) or (B,A) where the directed graph would have two edges, (A,B) and (B,A).</p>\n"}], "owner": {"reputation": 1929, "user_id": 1783398, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6369d503a436016a8f3998033d6d1ee2?s=128&d=identicon&r=PG", "display_name": "Ziqi", "link": "https://stackoverflow.com/users/1783398/ziqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 43240561, "answer_count": 1, "score": 0, "last_activity_date": 1491422396, "creation_date": 1491422083, "question_id": 43240462, "link": "https://stackoverflow.com/questions/43240462/networkx-python-directed-undirected-graph-inconsistent-nodes-and-edges", "title": "networkx python, directed/undirected graph, inconsistent nodes and edges?", "body": "<p>I have creating a graph on which I run pagerank. I have tested both directed and undirected graphs but I struggle to understand what I see.</p>\n\n<p>I have a block of code that look like below:</p>\n\n<pre><code>G= nx.DiGraph() #option 1\n#G= nx.Graph() #option 2\n[inside a for loop]\n   G.add_edge(node, another_node)\nprint(\"Graph size {} {}\".format(len(G.nodes()), len(G.edges())))\n\n[then code to run pagerank...]\n</code></pre>\n\n<p>which as you can see, I try both directed graph (DiGraph) and undirected graph (Graph). For both, I go through the same loop, that call 'add_edge' same number of times, on the same set of (node, another_node) pairs.</p>\n\n<p>Then I print the number of nodes and edges on the resulting graph. However, this is the line that baffles me. Because for DiGraph and Graph, I see different output:</p>\n\n<p>When option 1 is used, there are 10107 nodes and 1350222 edges.\nWhen option 2 is used, there are 10107 nodes and 1268064 edges.</p>\n\n<p>I do know understand the consistency. is this normal or what could be wrong?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3745885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959f9b45bbabc1ddbfc330a0cd0029e7?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/3745885/raj"}, "edited": false, "score": 0, "creation_date": 1491423894, "post_id": 43240507, "comment_id": 73552085, "body": "Duh! Thanks Suever."}], "tags": [], "owner": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "is_accepted": true, "score": 1, "last_activity_date": 1491422241, "creation_date": 1491422241, "answer_id": 43240507, "question_id": 43240430, "link": "https://stackoverflow.com/questions/43240430/matplotlib-pyplot-plt-bar-warning-when-i-try-to-set-plt-axes/43240507#43240507", "title": "matplotlib.pyplot plt.bar() warning when I try to set plt.axes()", "body": "<p>To adjust the axis limits you want to use <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.axis\" rel=\"nofollow noreferrer\"><code>plt.axis</code></a> rather than <a href=\"http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes\" rel=\"nofollow noreferrer\"><code>plt.axes</code></a>. The latter <em>creates</em> an <code>axes</code> object and it interprets the input to be a rect specifying the location (in the format <code>[left, bottom, width, height]</code>) and a pixel location of <code>-1</code> is outside of your figure which is causing the warning.</p>\n\n<p>The correct code would be</p>\n\n<pre><code>plt.bar(xs, ys)\nplt.axis([-1, 20, 0, 12])\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3745885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959f9b45bbabc1ddbfc330a0cd0029e7?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/3745885/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "accepted_answer_id": 43240507, "answer_count": 1, "score": 1, "last_activity_date": 1491422454, "creation_date": 1491421952, "last_edit_date": 1491422454, "question_id": 43240430, "link": "https://stackoverflow.com/questions/43240430/matplotlib-pyplot-plt-bar-warning-when-i-try-to-set-plt-axes", "title": "matplotlib.pyplot plt.bar() warning when I try to set plt.axes()", "body": "<p>I'm trying to getnerate a simple pyplot bargraph, Python 3.6.0. Code is below:</p>\n\n<pre><code>import random\nimport matplotlib.pyplot as plt\nimport collections.Counter\n\n#Generate random number of friends(0-19) for 100 users\nnum_freinds = [random.randrange(20) for _ in range(100)]\n#Define a Counter to see how Friend Counts vary\nc = Counter(num_freinds)\n\n#Plot Friend Count vs Number of users with that Friend Count\nxs = [i for i in range(20)]\nys = [c[i] for i in xs]\nplt.bar(xs, ys)\nplt.axes([-1, 20, 0, 12])\nplt.xticks([i for i in range(21)])\nplt.yticks([i for i in range(13)])\nplt.xlabel(\"# of Friends\")\nplt.ylabel(\"Count of Users\")\nplt.show()\n</code></pre>\n\n<p>I get the following error when I run the code:</p>\n\n<p>\\Python\\lib\\site-packages\\matplotlib\\axis.py:1035: UserWarning: Unable to find pixel distance along axis for interval padding of ticks; assuming no interval padding needed.\n  warnings.warn(\"Unable to find pixel distance along axis \"</p>\n\n<p>The problem seems to be the following line of code:</p>\n\n<pre><code>plt.axes([-1, 20, 0, 12])\n</code></pre>\n\n<p>If I comment out the above line, everything works fine, no warning.</p>\n\n<p>Can anybody explain why setting the axes seems to be causing the pixel warning? The axes ranges are in line with the data. I can't figure this out.</p>\n"}, {"tags": ["python", "dataframe", "formatting", "export-to-excel"], "comments": [{"owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "reply_to_user": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1491422050, "post_id": 43240407, "comment_id": 73551016, "body": "Haha Psidom you got me again. I changed my name from AlexMeow to this. In excel you can easily select the numbers and go to the toolbar then select the &quot;$&quot;. But they stay as number."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1491422223, "post_id": 43240407, "comment_id": 73551116, "body": "Is <a href=\"http://stackoverflow.com/questions/41567847/how-to-format-specific-cells-in-excel-using-xlsx-package-in-python\">this</a> what you want?"}, {"owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1491422423, "post_id": 43240407, "comment_id": 73551218, "body": "I do not want to do any manual work during the process so exporting to excel then add $ is not in consideration for now, unless there&#39;s no better solution."}, {"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1491423275, "post_id": 43240407, "comment_id": 73551746, "body": "Note: I am not a dataframe user. However, If I need more advanced Excel outputs, I use <code>xlsxwriter</code>."}], "owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491421978, "creation_date": 1491421875, "last_edit_date": 1491421978, "question_id": 43240407, "link": "https://stackoverflow.com/questions/43240407/python-export-numbers-to-excel-as-numbers-not-string", "title": "Python - Export $ numbers to excel as numbers, not string", "body": "<p>I have a dataframe and I need to format one column to $xxx.xx. When I export to excel I need the numbers in float format but they are strings. How to export them as float?</p>\n\n<pre><code>df = pd.DataFrame(index=['index1', 'index2', 'index3'], \n          columns=[\"A\", \"B\", \"C\"], \n          data=[[5,34, \"ok\"], [7,8,\"fine\"], [\"3rd\",100,np.nan]])\ndf['B'] = (df['B']).apply(lambda x: '${:,.2f}'.format(x))\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/EKdfX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EKdfX.png\" alt=\"enter image description here\"></a></p>\n\n<p>The exported excel has B column in string format:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CC6Ps.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CC6Ps.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I need:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lmOCd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lmOCd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "opencv", "image-processing", "video-processing"], "answers": [{"tags": [], "owner": {"reputation": 844, "user_id": 1076269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e8fa6f164fd72142309b03e5efd4bb23?s=128&d=identicon&r=PG", "display_name": "telenachos", "link": "https://stackoverflow.com/users/1076269/telenachos"}, "is_accepted": true, "score": 0, "last_activity_date": 1491422614, "creation_date": 1491422614, "answer_id": 43240623, "question_id": 43240404, "link": "https://stackoverflow.com/questions/43240404/converting-sequenced-frames-to-video/43240623#43240623", "title": "Converting sequenced frames to video", "body": "<p>You need a call to <code>waitKey()</code> in order for <code>imshow()</code> to work. </p>\n\n<p>For example:</p>\n\n<pre><code>import re\nimport glob\nimport cv2\n\nnumbers = re.compile(r'(\\d+)')\n\ndef numericalSort(value):\n    parts = numbers.split(value)\n    parts[1::2] = map(int, parts[1::2])\n    return parts\n\nfor infile in sorted(glob.glob('*.jpg'), key=numericalSort):\n    img1 = cv2.imread(infile)\n\n    cv2.imshow('image', img1)\n    k = cv2.waitKey(33)\n    if k==27:    # Escape to quit\n        break\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5029845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6813f01bd95d9ff97428d400ecce6e6e?s=128&d=identicon&r=PG&f=1", "display_name": "mmt", "link": "https://stackoverflow.com/users/5029845/mmt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 43240623, "answer_count": 1, "score": 0, "last_activity_date": 1491422614, "creation_date": 1491421860, "question_id": 43240404, "link": "https://stackoverflow.com/questions/43240404/converting-sequenced-frames-to-video", "title": "Converting sequenced frames to video", "body": "<p>I'm trying to convert images to video, but it wasn't getting the right sequence, so I'm using glob to organize it. After this I was getting erros, and then I reduced my code to this:</p>\n\n<pre><code>import re\nimport glob\nimport cv2\n\nnumbers = re.compile(r'(\\d+)')\n\ndef numericalSort(value):\n    parts = numbers.split(value)\n    parts[1::2] = map(int, parts[1::2])\n    return parts\n\nfor infile in sorted(glob.glob('*.jpg'), key=numericalSort):\n    img1 = cv2.imread(infile)\n\n    cv2.imshow('image', img1)\n\n    exit()\n</code></pre>\n\n<p>And for some reason it isn't showing 'img1'. </p>\n\n<p>I think I can't call \"cv2.imread\" for a variable, because in my previous code it was saying something like \"its not a valid array\" when I called an opencv function to work with 'img1'.</p>\n\n<p>So, my questions is, why isn't imshow running, and how could I use the image \"\"\"behind\"\"\" infile and work with this file. </p>\n"}, {"tags": ["python", "image-processing"], "comments": [{"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1491422020, "post_id": 43240401, "comment_id": 73550999, "body": "use <a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.ndimage.imread.html#scipy.ndimage.imread\" rel=\"nofollow noreferrer\"><code>scipy.ndimage.imread</code></a> to read into a numpy array (which can then be reshaped at will). Use mode <code>&#39;L&#39;</code> for an 8 bit grayscale image"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2639830"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1491423691, "post_id": 43240401, "comment_id": 73551980, "body": "That did the trick! Thank you. Please post as answer."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2639830"}, "edited": false, "score": 0, "creation_date": 1491425438, "post_id": 43241353, "comment_id": 73552915, "body": "I also have a small side question. This image gives me a 2d array. However, I would like to have a one-hot encoding (1d vector) of the image. Is there a simple way to do this?"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1491425991, "post_id": 43241353, "comment_id": 73553219, "body": "@Christian you should now have a numpy array of pixel values. assuming <code>img = imread(stuff)</code> you could call <code>length = np.prod(img.shape); img = img.reshape(length)</code>. Alternatively you could use the ndarray&#39;s <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.flatiter.html\" rel=\"nofollow noreferrer\"><code>flatiter</code></a> attribute, which gives you a memory view of the array as if it were flat without actually shifting the memory around. The latter being the better approach in general, it may not be treated as a regular array by some functions resulting in incompatibility."}], "tags": [], "owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "is_accepted": true, "score": 0, "last_activity_date": 1491425299, "creation_date": 1491425299, "answer_id": 43241353, "question_id": 43240401, "link": "https://stackoverflow.com/questions/43240401/converting-an-image-into-a-vector-of-pixels/43241353#43241353", "title": "Converting an image into a vector of pixels", "body": "<p>Scipy's <code>ndimage</code> library is generally the go-to library for working with pixels as data (arrays). You can load an image from file (most common formats supported) using <code>scipy.ndimage.imread</code> into a numpy array which can be easily reshaped and mathematically operated on. The <code>mode</code> keyword can be used to specify a colorspace transformation upon load (convert an RGB image to black and white). In your case you asked for single color pixels from 0-255 (8bit grayscale) so you would use <code>mode='L'</code>. See <a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.ndimage.imread.html#scipy.ndimage.imread\" rel=\"nofollow noreferrer\">The Documentation</a> for usage / more useful functions.</p>\n"}, {"tags": [], "owner": {"reputation": 6626, "user_id": 4907913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2769a366bde01ddbf60008819e371c?s=128&d=identicon&r=PG&f=1", "display_name": "thewaywewere", "link": "https://stackoverflow.com/users/4907913/thewaywewere"}, "is_accepted": false, "score": 0, "last_activity_date": 1491442351, "creation_date": 1491442351, "answer_id": 43244234, "question_id": 43240401, "link": "https://stackoverflow.com/questions/43240401/converting-an-image-into-a-vector-of-pixels/43244234#43244234", "title": "Converting an image into a vector of pixels", "body": "<p>If use <code>OpenCV</code>, <code>gray=cv2.imread(image,0)</code> will return a grayscale image with <code>n rows</code> x <code>m cols</code> single channel numpy array. <code>rows, cols = gray.shape</code> will return the height and width of the image.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2639830"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5337, "favorite_count": 0, "accepted_answer_id": 43241353, "answer_count": 2, "score": 0, "last_activity_date": 1616783654, "creation_date": 1491421846, "question_id": 43240401, "link": "https://stackoverflow.com/questions/43240401/converting-an-image-into-a-vector-of-pixels", "title": "Converting an image into a vector of pixels", "body": "<p>I am trying to convert an image into an array of pixels.\nHere is my current code.</p>\n\n<pre><code>im = Image.open(\"beeleg.png\")\npixels = im.load()\nim.getdata() # doesn't work\nprint(pixels # doesn't work\n</code></pre>\n\n<p>Ideally, my end goal is to convert the image into a vector of just pixels, so for instance if I have an image of dimensions <code>100x100</code>, then I want a vector of dimensions <code>1x10000</code>, where each value is between [0, 255]. Then, divide each of the values in the array by <code>256</code> and add a bias of <code>1</code> in the front of the vector. However, I am not able to proceed with all this without being able to obtain an array. How to proceed?</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup", "yahoo-finance"], "comments": [{"owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1491438359, "post_id": 43240250, "comment_id": 73557410, "body": "<code>tr.contents[1].contents[0].name == &quot;a&quot;</code> is now False, because <code>tr.contents[1].contents[0].name</code> is only svg or None ...no links there..."}, {"owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1491438823, "post_id": 43240250, "comment_id": 73557522, "body": "Does this look like one of the tags you&#39;re looking for? <code>&lt;a href=&quot;&#47;quote&#47;CAFD?p=CAFD&quot; title=&quot;8Point3 Energy Partners LP&quot; data-symbol=&quot;CAFD&quot; class=&quot;Fw(b)&quot; data-reactid=&quot;408&quot;&gt;CAFD&lt;&#47;a&gt;</code>"}, {"owner": {"reputation": 96, "user_id": 3014870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2a3fa91c2ba62c5408995f0ffac249?s=128&d=identicon&r=PG&f=1", "display_name": "MachineGhost", "link": "https://stackoverflow.com/users/3014870/machineghost"}, "reply_to_user": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1491529211, "post_id": 43240250, "comment_id": 73605233, "body": "Yes, that is correct.  &quot;/quote/&quot; doesn&#39;t match and I don&#39;t know if this is due to some kind of dynamic javascript issue where what the server sends is different than what the client interprets which I&#39;ve read elsewhere can be an annoying problem with the new Yahoo/Oath layout."}, {"owner": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1491534721, "post_id": 43240250, "comment_id": 73606601, "body": "What&#39;s the data in the csv file supposed to look like?"}, {"owner": {"reputation": 96, "user_id": 3014870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2a3fa91c2ba62c5408995f0ffac249?s=128&d=identicon&r=PG&f=1", "display_name": "MachineGhost", "link": "https://stackoverflow.com/users/3014870/machineghost"}, "reply_to_user": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1491673751, "post_id": 43240250, "comment_id": 73662418, "body": "Each row is:TICKER,DATE"}, {"owner": {"reputation": 96, "user_id": 3014870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2a3fa91c2ba62c5408995f0ffac249?s=128&d=identicon&r=PG&f=1", "display_name": "MachineGhost", "link": "https://stackoverflow.com/users/3014870/machineghost"}, "reply_to_user": {"reputation": 2996, "user_id": 6085135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHKnG.png?s=128&g=1", "display_name": "brennan", "link": "https://stackoverflow.com/users/6085135/brennan"}, "edited": false, "score": 0, "creation_date": 1510798188, "post_id": 43240250, "comment_id": 81591934, "body": "Seems like many things have changed, especially the datetime format, so I&#39;m going to close this.  <a href=\"https://github.com/wenboyu2/yahoo-earnings-calendar\" rel=\"nofollow noreferrer\">github.com/wenboyu2/yahoo-earnings-calendar</a>"}], "owner": {"reputation": 96, "user_id": 3014870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2a3fa91c2ba62c5408995f0ffac249?s=128&d=identicon&r=PG&f=1", "display_name": "MachineGhost", "link": "https://stackoverflow.com/users/3014870/machineghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491674052, "creation_date": 1491421348, "last_edit_date": 1491674052, "question_id": 43240250, "link": "https://stackoverflow.com/questions/43240250/scraping-yahoo-oath-new-earnings-calendar-format", "title": "Scraping Yahoo/Oath New Earnings Calendar Format", "body": "<p>Can't figure out why the modified Python script below isn't working with the new earnings calendar format.  It does not appear to be matching the href which may be significantly different than the old format (dynamic javascript?).</p>\n\n<pre><code>import datetime\nimport requests\nimport bs4\nimport csv\n\ndef get_earning_data(date,date2):\n    url = \"http://finance.yahoo.com/calendar/earnings?&amp;day={}\".format(date)\n    headers = {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; rv:36.0) Gecko/20100101 Firefox/36.0\"}\n    html = requests.get(url, headers=headers).text\n    soup = bs4.BeautifulSoup(html, \"html.parser\")\n    quotes = []\n    for tr in soup.find_all(\"tr\"):\n        if len(tr.contents) &gt; 3:\n            if len(tr.contents[1].contents) &gt; 0:\n                if tr.contents[1].contents[0].name == \"a\":\n                    if tr.contents[1].contents[0][\"href\"].startswith(\"/quote/\"):\n                        if \".\" not in tr.contents[1].contents[0].text: \n                            quotes.append(tr.contents[1].contents[0].text)\n                            quotes.append(date2)\n    return quotes\n\noutfile = \"EarningsCalendar.csv\"\nopen(outfile, 'wb').close\nindex = 0\nwhile index &lt; 7:\n    date = (datetime.date.today() + datetime.timedelta(index)).strftime(\"%Y-%m-%d\")\n    date2 = (datetime.date.today() + datetime.timedelta(index)).strftime(\"%d/%m/%Y\")\n    mylist = get_earning_data(date,date2)\n    print (mylist)\n    with open(outfile, 'ab') as csvfile:\n        writer = csv.writer(csvfile, delimiter=',',quoting=csv.QUOTE_NONE)\n        for i in range(0, len(mylist), 2):\n            writer.writerow(mylist[i:i+2])\n    index += 1    \n</code></pre>\n\n<p>Here's a sample page source row for 04-05-2017:</p>\n\n<p><code>&lt;tr class=\"data-rowKMX9 Bgc($extraLightBlue):h H(36px) Bgc($altRowColor)\" data-reactid=\"490\"&gt;&lt;td class=\"data-col0 Ta(start) Pend(15px) Pstart(6px) W(10%)\" data-reactid=\"491\"&gt;&lt;a href=\"/quote/KMX?p=KMX\" title=\"Carmax Inc\" data-symbol=\"KMX\" class=\"Fw(b)\" data-reactid=\"492\"&gt;KMX&lt;/a&gt;&lt;/td&gt;&lt;td class=\"data-col1 Ta(start) Pend(10px) W(20%)\" data-reactid=\"493\"&gt;Carmax Inc&lt;/td&gt;&lt;td class=\"data-col2 Ta(end) Pstart(15px) W(10%)\" data-reactid=\"494\"&gt;0.79&lt;/td&gt;&lt;td class=\"data-col3 Ta(end) Pstart(15px) W(10%)\" data-reactid=\"495\"&gt;-&lt;/td&gt;&lt;td class=\"data-col4 Ta(end) Pstart(15px) W(10%)\" data-reactid=\"496\"&gt;&lt;span class=\"\" data-reactid=\"497\"&gt;-&lt;/span&gt;&lt;/td&gt;&lt;td class=\"data-col5 Ta(end) Pend(6px) Pstart(15px) W(13%)\" data-reactid=\"498\"&gt;&lt;span data-reactid=\"499\"&gt;Before Market Open&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;</code></p>\n\n<p>Here's a sample page showing the old format: <a href=\"http://web.archive.org/web/20170301070135/https://biz.yahoo.com/research/earncal/today.html\" rel=\"nofollow noreferrer\">http://web.archive.org/web/20170301070135/https://biz.yahoo.com/research/earncal/today.html</a></p>\n\n<p>The only difference between old and new that I can see is the .startswith.  Using \"<a href=\"http://finance.yahoo.com/quote/\" rel=\"nofollow noreferrer\">http://finance.yahoo.com/quote/</a>\" does not work either.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5111575, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9c6149ee957c53f7675b531835ecf3fc?s=128&d=identicon&r=PG&f=1", "display_name": "shaz", "link": "https://stackoverflow.com/users/5111575/shaz"}, "edited": false, "score": 0, "creation_date": 1491424390, "post_id": 43240900, "comment_id": 73552328, "body": "This helped answer the question: <a href=\"http://stackoverflow.com/questions/569468/django-multiple-models-in-one-template-using-forms\" title=\"django multiple models in one template using forms\">stackoverflow.com/questions/569468/&hellip;</a>"}], "tags": [], "owner": {"reputation": 91, "user_id": 5111575, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9c6149ee957c53f7675b531835ecf3fc?s=128&d=identicon&r=PG&f=1", "display_name": "shaz", "link": "https://stackoverflow.com/users/5111575/shaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1491423616, "creation_date": 1491423616, "answer_id": 43240900, "question_id": 43240241, "link": "https://stackoverflow.com/questions/43240241/django-not-null-constraint-failed-on-stockinfo-note-stock-id-foreignkey-erro/43240900#43240900", "title": "Django - NOT NULL constraint failed on stockinfo_note.stock_id - ForeignKey error", "body": "<p>Okay solved the problem. In <code>stock_new</code> i added: <code>note.stock = stock</code></p>\n\n<p>So views.py now look likes this:</p>\n\n<pre><code>def stocknoter(request):\n    stock = Stock.objects.filter(user=request.user)\n    note = Note.objects.filter(user=request.user)\n\n    context_dict = {'stock':stock, 'note':note}\n    return render(request, \"stocknoter/stock.html\", context_dict)\n\ndef stock_new(request):\n    if request.method == \"POST\":\n        form1 = StockForm(request.POST)\n        form2 = NoteForm(request.POST)\n        if form1.is_valid() and form2.is_valid():\n            stock = form1.save(commit=False)\n            stock.user = request.user\n            stock.save()\n\n            note = form2.save(commit=False)\n            note.user = request.user\n\n            note.stock = stock\n\n            note.save()\n            return redirect('stock')\nelse:\n    form1 = StockForm()\n    form2 = NoteForm()\nreturn render(request, 'stocknoter/stock_edit.html', {'form1':form1, 'form2':form2})\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5111575, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9c6149ee957c53f7675b531835ecf3fc?s=128&d=identicon&r=PG&f=1", "display_name": "shaz", "link": "https://stackoverflow.com/users/5111575/shaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 43240900, "answer_count": 1, "score": 2, "last_activity_date": 1491423616, "creation_date": 1491421322, "question_id": 43240241, "link": "https://stackoverflow.com/questions/43240241/django-not-null-constraint-failed-on-stockinfo-note-stock-id-foreignkey-erro", "title": "Django - NOT NULL constraint failed on stockinfo_note.stock_id - ForeignKey error", "body": "<p><strong>Purpose and Problem:</strong></p>\n\n<p>I want to put two forms in the same template and process them in the one view. I can get the template to display the two forms but not submit them (i.e process the submission). When I submit I get the following error:</p>\n\n<pre><code>Exception Value: NOT NULL constraint failed: stockinfo_note.stock_id\n</code></pre>\n\n<p>'stock' is the ForeignKey. I can't figure out how to get the function stock_new in Views.py to populate the foreign key ID which is what i think i need to do to overcome the above error.</p>\n\n<p><strong>Models.py:</strong></p>\n\n<pre><code>class Stock(models.Model):\n    '''\n    Model representing the stock info.\n    '''\n    user = models.ForeignKey(User)\n    ticker_code = models.CharField(max_length=10, null=True, blank=True)\n\n    def __str__(self):\n        return self.ticker_code\n\nclass Note(models.Model):\n    '''\n    Model representing the note.\n    '''\n    user = models.ForeignKey(User)\n    text_note = models.TextField()\n    stock = models.ForeignKey(Stock)\n\n    def __str__(self):\n        return self.text_note\n</code></pre>\n\n<p><strong>Forms.py</strong></p>\n\n<pre><code>class StockForm(forms.ModelForm):\n\n    class Meta:\n        model = Stock\n        fields = ('ticker_code',)\n\nclass NoteForm(forms.ModelForm):\n\n    class Meta:\n        model = Note\n        fields = ('text_note',)\n</code></pre>\n\n<p><strong>Views.py</strong></p>\n\n<pre><code>def stocknoter(request):\n    stock = Stock.objects.filter(user=request.user)\n    note = Note.objects.filter(user=request.user)\n\n    context_dict = {'stock':stock, 'note':note}\n    return render(request, \"stocknoter/stock.html\", context_dict)\n\ndef stock_new(request):\n    if request.method == \"POST\":\n        form1 = StockForm(request.POST)\n        form2 = NoteForm(request.POST)\n        if form1.is_valid() and form2.is_valid():\n            stock = form1.save(commit=False)\n            stock.user = request.user\n            stock.save()\n\n            note = form2.save(commit=False)\n            note.user = request.user\n            '''\n            **THE PROBLEM IS AROUND HERE i think, how do i pass stock_id created \n            by form1 so form2 saves it as the foreignkey?**\n            '''\n            note.save()\n            return redirect('stock')\n    else:\n        form1 = StockForm()\n        form2 = NoteForm()\n    return render(request, 'stocknoter/stock_edit.html', {'form1':form1, 'form2':form2})\n</code></pre>\n\n<p>As mentioned above, i think the problem lies with this latter section (sorry should add i am new to Django). What do i need to do to save the foreign key id?</p>\n"}, {"tags": ["python", "algorithm", "fft"], "comments": [{"owner": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "edited": false, "score": 1, "creation_date": 1491422745, "post_id": 43240212, "comment_id": 73551419, "body": "Have you tried <code>z = +1 if inverse else -1</code>?"}, {"owner": {"reputation": 35, "user_id": 3238531, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1755811338/picture?type=large", "display_name": "backwardsboy", "link": "https://stackoverflow.com/users/3238531/backwardsboy"}, "reply_to_user": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "edited": false, "score": 0, "creation_date": 1491424761, "post_id": 43240212, "comment_id": 73552524, "body": "Yup... that worked! Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "is_accepted": true, "score": 2, "last_activity_date": 1491428786, "creation_date": 1491428786, "answer_id": 43242191, "question_id": 43240212, "link": "https://stackoverflow.com/questions/43240212/fft-algorithm-bug/43242191#43242191", "title": "FFT Algorithm Bug", "body": "<p>The <a href=\"https://docs.scipy.org/doc/numpy/reference/routines.fft.html#implementation-details\" rel=\"nofollow noreferrer\">definition of the forward Discrete Fourier Transform used by <code>np.fft.fft</code></a> is given by:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ejuDe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ejuDe.png\" alt=\"\\begin{align}A_k &amp;= \\sum_{m=0}^{n-1} a_m \\exp\\left{-2\\pi i \\frac{m k}{n}\\right}, &amp;k=0,\\dots,n-1\\end{align}\"></a></p>\n\n<p>You should notice the negative sign in the argument to the complex exponential. </p>\n\n<p>In your implementation on the other hand, you are using a positive sign for the forward transform, and such an inversing in the sign of the arguments to the complex exponential results in conjugating the frequency spectrum.</p>\n\n<p>So, for your implementation to yield the same results as <code>np.fft.fft</code> you simply have to invert the sign of the forward and backward transforms with:</p>\n\n<pre><code>z = +1 if inverse else -1\n</code></pre>\n\n<p>(instead of <code>z = -1 if inverse else 1</code>).</p>\n"}], "owner": {"reputation": 35, "user_id": 3238531, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1755811338/picture?type=large", "display_name": "backwardsboy", "link": "https://stackoverflow.com/users/3238531/backwardsboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 43242191, "answer_count": 1, "score": 1, "last_activity_date": 1491428786, "creation_date": 1491421229, "question_id": 43240212, "link": "https://stackoverflow.com/questions/43240212/fft-algorithm-bug", "title": "FFT Algorithm Bug", "body": "<p>Attempting to implement the FFT Algorithm in python, and hitting a bug that I can't seem to figure out.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>def FFT(co, inverse=False):\n  if len(co) &lt;= 1:\n    return co\n\n  even = FFT(co[::2], inverse)\n  odd = FFT(co[1::2], inverse)\n\n  y = [0] * len(co)\n  z = -1 if inverse else 1\n\n  for k in range(0, len(co)//2):\n    w = np.round(math.e**(z*1j*math.pi*(2*k / len(co))), decimals=10)\n    y[k] = even[k] + w*odd[k]\n    y[k + len(co)//2] = even[k] - w*odd[k]\n\nreturn y\n</code></pre>\n\n<p>when I run</p>\n\n<pre><code>x1 = FFT([1, 1, 2, 0])\nprint x1\n\nprint np.fft.fft([1, 1, 2, 0])\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>[(4+0j), (-1+1j), (2+0j), (-1-1j)]\n[ 4.+0.j -1.-1.j  2.+0.j -1.+1.j]\n</code></pre>\n\n<p>So for index 1 and index 3, it's the complex conjugate. Any ideas?</p>\n"}, {"tags": ["python", "scikit-learn", "nltk"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7820322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78dd397e6a9bfbd5f86cfdbf094c8f1d?s=128&d=identicon&r=PG&f=1", "display_name": "MyTivoli", "link": "https://stackoverflow.com/users/7820322/mytivoli"}, "edited": false, "score": 0, "creation_date": 1491464071, "post_id": 43240846, "comment_id": 73566410, "body": "I tried to use this, but all I get is a none in return? Do you know why that is."}, {"owner": {"reputation": 6402, "user_id": 6245650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vMp3K.jpg?s=128&g=1", "display_name": "Scratch&#39;N&#39;Purr", "link": "https://stackoverflow.com/users/6245650/scratchnpurr"}, "reply_to_user": {"reputation": 125, "user_id": 7820322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78dd397e6a9bfbd5f86cfdbf094c8f1d?s=128&d=identicon&r=PG&f=1", "display_name": "MyTivoli", "link": "https://stackoverflow.com/users/7820322/mytivoli"}, "edited": false, "score": 0, "creation_date": 1491479017, "post_id": 43240846, "comment_id": 73576932, "body": "Is your corpus a list of tweets. E.g. <code>corpus = [&quot;real unicorns among us narwhals&quot;, &quot;this is tweet two&quot;, &quot;tweet three is positive sentiment!&quot;]</code>? Also, if you&#39;re looking at tweets, it might be better to use <a href=\"http://www.nltk.org/api/nltk.tokenize.html#nltk.tokenize.casual.TweetTokenizer\" rel=\"nofollow noreferrer\">TweetTokenizer</a>"}, {"owner": {"reputation": 125, "user_id": 7820322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78dd397e6a9bfbd5f86cfdbf094c8f1d?s=128&d=identicon&r=PG&f=1", "display_name": "MyTivoli", "link": "https://stackoverflow.com/users/7820322/mytivoli"}, "edited": false, "score": 0, "creation_date": 1491483131, "post_id": 43240846, "comment_id": 73580149, "body": "The data set is just a lot of tweets, i&#39;m trying to use the classifier on data that looks like this; [(&#39;1&#39;, &#39;hello&#39;), (&#39;hello&#39;, &#39;says&#39;), (&#39;says&#39;, &#39;someone&#39;), (&#39;someone&#39;, &#39;country&#39;), (&#39;country&#39;, &#39;fasting&#39;)] [(&#39;2&#39;, &#39;happy&#39;), (&#39;happy&#39;, &#39;sad&#39;), (&#39;sad&#39;, &#39;python&#39;), (&#39;pythoin&#39;, &#39;never&#39;), (&#39;never&#39;, &#39;commit&#39;)]"}, {"owner": {"reputation": 6402, "user_id": 6245650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vMp3K.jpg?s=128&g=1", "display_name": "Scratch&#39;N&#39;Purr", "link": "https://stackoverflow.com/users/6245650/scratchnpurr"}, "reply_to_user": {"reputation": 125, "user_id": 7820322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78dd397e6a9bfbd5f86cfdbf094c8f1d?s=128&d=identicon&r=PG&f=1", "display_name": "MyTivoli", "link": "https://stackoverflow.com/users/7820322/mytivoli"}, "edited": false, "score": 0, "creation_date": 1491488897, "post_id": 43240846, "comment_id": 73584833, "body": "Hmmm, so it does look like the bigrams are already generated in your data. It just needs to have the counts for the bigrams in a dictionary format."}], "tags": [], "owner": {"reputation": 6402, "user_id": 6245650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vMp3K.jpg?s=128&g=1", "display_name": "Scratch&#39;N&#39;Purr", "link": "https://stackoverflow.com/users/6245650/scratchnpurr"}, "is_accepted": false, "score": 1, "last_activity_date": 1491423405, "creation_date": 1491423405, "answer_id": 43240846, "question_id": 43240176, "link": "https://stackoverflow.com/questions/43240176/how-to-use-sklearnclassifier-on-counter/43240846#43240846", "title": "How to use SklearnClassifier on Counter", "body": "<p>Your training data also needs the specific target label. Consider this example pulled from the nltk <a href=\"http://www.nltk.org/howto/classify.html\" rel=\"nofollow noreferrer\">website</a>:</p>\n\n<pre><code>&gt;&gt;&gt; from nltk.classify import SklearnClassifier\n&gt;&gt;&gt; from sklearn.naive_bayes import BernoulliNB\n&gt;&gt;&gt; from sklearn.svm import SVC\n&gt;&gt;&gt; train_data = [({\"a\": 4, \"b\": 1, \"c\": 0}, \"ham\"),\n...               ({\"a\": 5, \"b\": 2, \"c\": 1}, \"ham\"),\n...               ({\"a\": 0, \"b\": 3, \"c\": 4}, \"spam\"),\n...               ({\"a\": 5, \"b\": 1, \"c\": 1}, \"ham\"),\n...               ({\"a\": 1, \"b\": 4, \"c\": 3}, \"spam\")]\n&gt;&gt;&gt; classif = SklearnClassifier(BernoulliNB()).train(train_data)\n&gt;&gt;&gt; test_data = [{\"a\": 3, \"b\": 2, \"c\": 1},\n...              {\"a\": 0, \"b\": 3, \"c\": 7}]\n&gt;&gt;&gt; classif.classify_many(test_data)\n['ham', 'spam']\n&gt;&gt;&gt; classif = SklearnClassifier(SVC(), sparse=False).train(train_data)\n&gt;&gt;&gt; classif.classify_many(test_data)\n['ham', 'spam']\n</code></pre>\n\n<p>As you can see, the target labels are <strong>ham</strong> or <strong>spam</strong>. Also, you seem to be using a <code>Counter</code> object, while the API is looking for a list of tuples, which has the dictionary of word counts in each tuple, along with the label. I don't know what target label you have created for your corpus of tweets, but I can tell you how to generate the dictionary of bi-gram frequencies for your corpus, assuming your corpus is an iterable where each element is a tweet.</p>\n\n<pre><code>mybigramlist = []\nfor tweet in corpus:\n    tokens = nltk.word_tokenize(tweet)\n    bgs = nltk.bigrams(tokens)  # get the bigrams\n    freqs = nltk.FreqDist(bgs)  # this is dictionary of the bigrams with their frequencies in the tweet\n    mybigramlist.append(freqs)\n</code></pre>\n\n<p>Now all you have to do is figure out what your labels are and then make the final training data that adheres the structure in the given documentation.</p>\n"}], "owner": {"reputation": 125, "user_id": 7820322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78dd397e6a9bfbd5f86cfdbf094c8f1d?s=128&d=identicon&r=PG&f=1", "display_name": "MyTivoli", "link": "https://stackoverflow.com/users/7820322/mytivoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491515389, "creation_date": 1491421100, "last_edit_date": 1491515389, "question_id": 43240176, "link": "https://stackoverflow.com/questions/43240176/how-to-use-sklearnclassifier-on-counter", "title": "How to use SklearnClassifier on Counter", "body": "<p>I have some lists represented by their bigrams, and how many times they each occur. The bigrams come from a vocabulary made from alle unique bigrams. I would like to use the SklearnClassifier(SVC) on this </p>\n\n<p>The code I've made so far: </p>\n\n<pre><code> train_ngrams = [(train_filtered_tweets[i], train_filtered_tweets[i + 1]) for\n i in range(len(train_filtered_tweets) - 1)]\n print \"Tweets from train set as bigrams\", Counter(train_ngrams)\n\n classif = SklearnClassifier(BernoulliNB()).train(train_ngrams)\n classify = SklearnClassifier(SVC(), sparse=False).train(Counter(train_ngrams))\n print classify\n</code></pre>\n\n<p>But I get the error : </p>\n\n<pre><code> AttributeError: 'str' object has no attribute 'iteritems'\n</code></pre>\n\n<p>I think that it is because my train_ngrams is not the feature vector, but I'm not sure how to make it. </p>\n"}, {"tags": ["python", "matplotlib", "charts"], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 1468125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d460177ead43966a5af7f8b634519f?s=128&d=identicon&r=PG", "display_name": "Gavin", "link": "https://stackoverflow.com/users/1468125/gavin"}, "is_accepted": true, "score": 1, "last_activity_date": 1491437601, "creation_date": 1491437601, "answer_id": 43243608, "question_id": 43240157, "link": "https://stackoverflow.com/questions/43240157/how-to-make-color-the-wick-portion-of-a-candlestick-stick-using-matplotlib/43243608#43243608", "title": "How to make color the wick portion of a candlestick stick using matplotlib?", "body": "<p>As Paul says, A MCVE would assist people in helping you greatly.</p>\n\n<p>However - just having a quick glance at the source code for the candlestick plotting in matplotlib shows that it uses the colorup/colordown parameter for both the candle and the wick.</p>\n\n<p>So in order to get them to be different colours you will most likely need to reimplement the method and/or monkey patch the base implementation.</p>\n\n<p>So in your plotting module, use something along the lines of:</p>\n\n<pre><code>from matplotlib.lines import Line2D\nfrom matplotlib.patches import Rectangle\n\n\ndef blackwickcandlestick(ax, quotes, width=0.2, colorup='k', colordown='r',\n                         alpha=1.0, ochl=True):\n\n    OFFSET = width / 2.0\n\n    lines = []\n    patches = []\n    for q in quotes:\n        if ochl:\n            t, open, close, high, low = q[:5]\n        else:\n            t, open, high, low, close = q[:5]\n\n        if close &gt;= open:\n            color = colorup\n            lower = open\n            height = close - open\n        else:\n            color = colordown\n            lower = close\n            height = open - close\n\n        vline = Line2D(\n            xdata=(t, t), ydata=(low, high),\n            color='k',      # This is the only line changed from the default implmentation\n            linewidth=0.5,\n            antialiased=True,\n        )\n\n        rect = Rectangle(\n            xy=(t - OFFSET, lower),\n            width=width,\n            height=height,\n            facecolor=color,\n            edgecolor=color,\n        )\n        rect.set_alpha(alpha)\n\n        lines.append(vline)\n        patches.append(rect)\n        ax.add_line(vline)\n        ax.add_patch(rect)\n    ax.autoscale_view()\n\n    return lines, patches\n\n\nimport matplotlib.finance as mpl_finance\n\nmpl_finance._candlestick = blackwickcandlestick\n</code></pre>\n\n<p>Then elsewhere in this module you can use the <code>mpl_finance.candlestick_ohlc(...)</code> plotting functions.</p>\n"}, {"comments": [{"owner": {"reputation": 880, "user_id": 1468125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d460177ead43966a5af7f8b634519f?s=128&d=identicon&r=PG", "display_name": "Gavin", "link": "https://stackoverflow.com/users/1468125/gavin"}, "edited": false, "score": 0, "creation_date": 1491472300, "post_id": 43249954, "comment_id": 73572126, "body": "Yeah, - a much better approach than mine and of course easier to extend to whatever colour border/line you like."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 4, "last_activity_date": 1491467850, "creation_date": 1491467850, "answer_id": 43249954, "question_id": 43240157, "link": "https://stackoverflow.com/questions/43240157/how-to-make-color-the-wick-portion-of-a-candlestick-stick-using-matplotlib/43249954#43249954", "title": "How to make color the wick portion of a candlestick stick using matplotlib?", "body": "<p>Rewriting the complete <code>candlestick_ohlc</code> seems overly complicated. You can just iterate over the lines returned by the function and set their color to black. You may also set the <code>zorder</code> to have the wicks appear below the boxes.</p>\n\n<pre><code>lines, patches = candlestick_ohlc(ax, quotes, width=0.5)\nfor line, patch in zip(lines, patches):\n    patch.set_edgecolor(\"k\")\n    patch.set_linewidth(0.72)\n    patch.set_antialiased(False)\n    line.set_color(\"k\")\n    line.set_zorder(0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JvHrf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JvHrf.png\" alt=\"enter image description here\"></a></p>\n\n<p>If this is to be used often in a script, you can of course put it in a function.</p>\n\n<pre><code>def candlestick_ohlc_black(*args,**kwargs):\n    lines, patches = candlestick_ohlc(*args,**kwargs)\n    for line, patch in zip(lines, patches):\n        patch.set_edgecolor(\"k\")\n        patch.set_linewidth(0.72)\n        patch.set_antialiased(False)\n        line.set_color(\"k\")\n        line.set_zorder(0)\n\ncandlestick_ohlc_black(ax, quotes, width=0.5)\n</code></pre>\n"}], "owner": {"reputation": 6216, "user_id": 388458, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/42257fb9718da7b5e04dd41961e71f13?s=128&d=identicon&r=PG", "display_name": "hanumanDev", "link": "https://stackoverflow.com/users/388458/hanumandev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1527, "favorite_count": 0, "accepted_answer_id": 43243608, "answer_count": 2, "score": 0, "last_activity_date": 1491467850, "creation_date": 1491421049, "last_edit_date": 1491458817, "question_id": 43240157, "link": "https://stackoverflow.com/questions/43240157/how-to-make-color-the-wick-portion-of-a-candlestick-stick-using-matplotlib", "title": "How to make color the wick portion of a candlestick stick using matplotlib?", "body": "<p>I'm looking to make the wick portion of a candlestick stick black using matplotlib? I couldn't find any mention of it in the documentation, but I've seen pictoral examples showing that it can be done.</p>\n\n<p>here's what I currently have: </p>\n\n<p><a href=\"https://i.stack.imgur.com/QdKTD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QdKTD.png\" alt=\"enter image description here\"></a></p>\n\n<p>here's an example of the wicks being colored black:</p>\n\n<p><a href=\"https://i.stack.imgur.com/U3Jjm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U3Jjm.png\" alt=\"enter image description here\"></a></p>\n\n<p>Update:</p>\n\n<p>I used the solution provided below but changed the code slightly to remove the vertical line over the body area of the candlestick:</p>\n\n<pre><code>from matplotlib.lines import Line2D\nfrom matplotlib.patches import Rectangle\n\n\ndef blackwickcandlestick(ax, quotes, width=0.2, colorup='#00FF00', colordown='#FF0000',\n                         alpha=1.0, shadowCol='k', ochl=True):\n\n    OFFSET = width / 2.0\n\n    lines = []\n    patches = []\n    for q in quotes:\n        if ochl:\n            t, open, close, high, low = q[:5]\n        else:\n            t, open, high, low, close = q[:5]\n\n        if close &gt;= open:\n            color = colorup\n            lower = open\n            height = close - open\n            vline = Line2D(\n                xdata=(t, t), ydata=(low, high),\n                color=colorup,      # This changed from the default implementation\n                linewidth=0.5,\n                antialiased=True,\n                )\n        else:\n            color = colordown\n            lower = close\n            height = open - close\n            vline = Line2D(\n                xdata=(t, t), ydata=(low, high),\n                color=colordown,      # This changed from the default implementation\n                linewidth=0.5,\n                antialiased=True,\n                )\n\n\n        rect = Rectangle(\n            xy=(t - OFFSET, lower),\n            width=width,\n            height=height,\n            facecolor=color,\n            edgecolor=color,\n        )\n        rect.set_alpha(alpha)\n\n        lines.append(vline)\n        patches.append(rect)\n        ax.add_line(vline)\n        ax.add_patch(rect)\n    ax.autoscale_view()\n\n    return lines, patches\n\n\nimport matplotlib.finance as mpl_finance\n\nmpl_finance._candlestick = blackwickcandlestick\n</code></pre>\n"}, {"tags": ["python", "django", "pickle", "sympy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491421244, "post_id": 43240137, "comment_id": 73550543, "body": "It sounds like unpickling in an <code>evaluate(False)</code> context might help. I haven&#39;t tried it, though, and I don&#39;t know if unpickling is supposed to behave this way by default."}, {"owner": {"reputation": 135, "user_id": 7447427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbfbdf284ee4211a04a59e423206ff0?s=128&d=identicon&r=PG&f=1", "display_name": "esandier", "link": "https://stackoverflow.com/users/7447427/esandier"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491424302, "post_id": 43240137, "comment_id": 73552289, "body": "Indeed it does work, thanks! In the django context, this means retrieving values from <code>request.session</code> in an <code>evaluate(False)</code> context."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491425230, "post_id": 43240137, "comment_id": 73552798, "body": "That sounds like there might be thread-safety issues with different threads trying to enter and leave the <code>evaluate(False)</code> context in conflict with each other."}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 7447427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbfbdf284ee4211a04a59e423206ff0?s=128&d=identicon&r=PG&f=1", "display_name": "esandier", "link": "https://stackoverflow.com/users/7447427/esandier"}, "is_accepted": true, "score": 0, "last_activity_date": 1491425445, "last_edit_date": 1495542351, "creation_date": 1491425445, "answer_id": 43241397, "question_id": 43240137, "link": "https://stackoverflow.com/questions/43240137/pickle-and-evaluation-of-sympy-expressions/43241397#43241397", "title": "Pickle and evaluation of sympy expressions", "body": "<p>The comment by <a href=\"https://stackoverflow.com/users/2357112/user2357112\">user2357112</a> answers the question. </p>\n\n<pre><code>&gt;&gt;&gt;with evaluate(False) : x = atan(sqrt(3))\n&gt;&gt;&gt;x\natan(sqrt(3))\n&gt;&gt;&gt; y = pickle.dumps(x)\n&gt;&gt;&gt; with evaluate(False) : z = pickle.loads(y)\n&gt;&gt;&gt; z\natan(sqrt(3))\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 7447427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbfbdf284ee4211a04a59e423206ff0?s=128&d=identicon&r=PG&f=1", "display_name": "esandier", "link": "https://stackoverflow.com/users/7447427/esandier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 43241397, "answer_count": 1, "score": 0, "last_activity_date": 1491425445, "creation_date": 1491420981, "question_id": 43240137, "link": "https://stackoverflow.com/questions/43240137/pickle-and-evaluation-of-sympy-expressions", "title": "Pickle and evaluation of sympy expressions", "body": "<p>I have the problem that pickling/unpickling of sympy expressions may not return the inital expression, as in the following example</p>\n\n<pre><code>&gt;&gt;&gt;with evaluate(False) : x = atan(sqrt(3))\n&gt;&gt;&gt;x\natan(sqrt(3))\n&gt;&gt;&gt; y = pickle.dumps(x)\n&gt;&gt;&gt; z = pickle.loads(y)\n&gt;&gt;&gt; z\npi/3\n</code></pre>\n\n<p>Is there a way to avoid the evaluation in the process?</p>\n\n<p>The motivation is that I need to add sympy expressions to a request.session object in Django without them being altered in the process. </p>\n"}, {"tags": ["python", "email", "sendgrid"], "answers": [{"comments": [{"owner": {"reputation": 2206, "user_id": 6026516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fLyDS.jpg?s=128&g=1", "display_name": "Ramtin", "link": "https://stackoverflow.com/users/6026516/ramtin"}, "edited": false, "score": 0, "creation_date": 1540241839, "post_id": 43240412, "comment_id": 92784480, "body": "Look at this <a href=\"https://github.com/sendgrid/sendgrid-python/blob/master/sendgrid/helpers/mail/content.py\" rel=\"nofollow noreferrer\">link</a> . At the time of writing, you need to look at the line of 31, in the <code>type</code> method."}, {"owner": {"reputation": 1797, "user_id": 1628299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc57aecea5508ca244e0f89ff1e98e1?s=128&d=identicon&r=PG", "display_name": "jacobmovingfwd", "link": "https://stackoverflow.com/users/1628299/jacobmovingfwd"}, "edited": false, "score": 0, "creation_date": 1540569361, "post_id": 43240412, "comment_id": 92928182, "body": "Here&#39;s the link I got while I&#39;m not logged in, so should hopefully stay good: <a href=\"https://github.com/sendgrid/sendgrid-python/blob/master/examples/helpers/mail_example.py#L157\" rel=\"nofollow noreferrer\">github.com/sendgrid/sendgrid-python/blob/master/examples/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1797, "user_id": 1628299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc57aecea5508ca244e0f89ff1e98e1?s=128&d=identicon&r=PG", "display_name": "jacobmovingfwd", "link": "https://stackoverflow.com/users/1628299/jacobmovingfwd"}, "is_accepted": true, "score": 1, "last_activity_date": 1491421902, "creation_date": 1491421902, "answer_id": 43240412, "question_id": 43240050, "link": "https://stackoverflow.com/questions/43240050/simple-way-to-send-an-html-text-email-using-sendgrid-python/43240412#43240412", "title": "Simple way to send an html/text email using sendgrid &amp; python?", "body": "<p>Have you looked at the <a href=\"https://github.com/sendgrid/sendgrid-python\" rel=\"nofollow noreferrer\">SendGrid Python Library</a>? The <a href=\"https://github.com/sendgrid/sendgrid-python#with-mail-helper-class\" rel=\"nofollow noreferrer\">basic example</a> only shows one content type, but the <a href=\"https://github.com/sendgrid/sendgrid-python/blob/master/examples/helpers/mail/mail_example.py#L62\" rel=\"nofollow noreferrer\">\"kitchen sink\"</a> example shows setting both contents.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 7750221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b07e7135b5eeb149499c15a8321ee89?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin", "link": "https://stackoverflow.com/users/7750221/sachin"}, "is_accepted": false, "score": 9, "last_activity_date": 1538914422, "creation_date": 1538914422, "answer_id": 52688389, "question_id": 43240050, "link": "https://stackoverflow.com/questions/43240050/simple-way-to-send-an-html-text-email-using-sendgrid-python/52688389#52688389", "title": "Simple way to send an html/text email using sendgrid &amp; python?", "body": "<p>Mail Helper Source <a href=\"https://github.com/sendgrid/sendgrid-python/blob/master/sendgrid/helpers/mail/mail.py\" rel=\"noreferrer\">https://github.com/sendgrid/sendgrid-python/blob/master/sendgrid/helpers/mail/mail.py</a> </p>\n\n<pre><code>mail_html = Content(type_='text/html', value='&lt;h1&gt;Test Mail&lt;/h1&gt;&lt;p&gt;This is a test email message.&lt;/p&gt;')\nmail_txt = Content(type_='text/plain', value='This is a test email message.')\nmail = Mail(mail_from, mail_subject, mail_to, mail_html)\nmail.add_content(mail_txt)\nresponse = sg.client.mail.send.post(request_body=mail.get())\n</code></pre>\n\n<p>The sample links are still 404's.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 9927163, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PfyJ5U4f-og/AAAAAAAAAAI/AAAAAAAAB5o/fNGlg4mxLi4/photo.jpg?sz=128", "display_name": "Vishal Sinha", "link": "https://stackoverflow.com/users/9927163/vishal-sinha"}, "is_accepted": false, "score": 0, "last_activity_date": 1613386154, "creation_date": 1613386154, "answer_id": 66206633, "question_id": 43240050, "link": "https://stackoverflow.com/questions/43240050/simple-way-to-send-an-html-text-email-using-sendgrid-python/66206633#66206633", "title": "Simple way to send an html/text email using sendgrid &amp; python?", "body": "<pre><code>import os\n\nfrom sendgrid import SendGridAPIClient\nfrom sendgrid.helpers.mail import Mail\n\n\ndef send_email(emails, notification_text, subject):\n    &quot;&quot;&quot;Send Emails\n\n    Send email to the mail ids\n\n    :param emails: emails of the user\n    :type emails: list\n    :param notification_text: notification text\n    :type notification_text: str\n    :param request_link: link to the requet\n    :type request_link: str\n    :param subject: subject of the email\n    :type subject: str\n\n    :rtype: str\n    &quot;&quot;&quot;\n    html_content = '&lt;strong&gt;' + notification_text + '&lt;/strong&gt;'\n    emails = emails\n    message = Mail(\n        from_email='yourSendGridVerifiedEmail',\n        to_emails=emails,\n        subject=subject,\n        html_content=html_content)\n    try:\n        sg = SendGridAPIClient(os.environ.get('SENDGRID_API_KEY'))\n        sg.send(message)\n        return &quot;Email Sent&quot;\n    except Exception as e:\n        return e.message\n</code></pre>\n"}], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5525, "favorite_count": 0, "accepted_answer_id": 43240412, "answer_count": 3, "score": 5, "last_activity_date": 1613386154, "creation_date": 1491420654, "question_id": 43240050, "link": "https://stackoverflow.com/questions/43240050/simple-way-to-send-an-html-text-email-using-sendgrid-python", "title": "Simple way to send an html/text email using sendgrid &amp; python?", "body": "<p>I'm trying to use sendgrid to send email from my Python application. </p>\n\n<p>It's sending fine using the mail helper and the following syntax:</p>\n\n<pre><code>sgmessage = mail.Mail(from_email, message.subject, to_email, content)\nsg.client.mail.send.post(request_body=sgmessage.get())\n</code></pre>\n\n<p>But I can't find the way to send an email which has a multipart/alternative content type with text &amp; html versions?</p>\n\n<p>I've tried things like this:</p>\n\n<pre><code>sgmessage = mail.Mail(from_email, message.subject, to_email)\nsgmessage.add_content(content)\nsgmessage.add_content(htmlcontent)\n</code></pre>\n\n<p>But that gives me Bad Request when I try to send.</p>\n\n<p>Could someone point me to the documentation or other tip for achieving this?</p>\n\n<p>Also attachments -- I can't find docs for that handy mail helper which would help me add attachments ability to my code.</p>\n"}, {"tags": ["python", "python-2.7", "amazon-web-services", "amazon-redshift", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 337666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa336c67275c5215e50b6c7f5fb05df?s=128&d=identicon&r=PG", "display_name": "Shrikant Prabhu", "link": "https://stackoverflow.com/users/337666/shrikant-prabhu"}, "edited": false, "score": 3, "creation_date": 1495502424, "post_id": 43240103, "comment_id": 75267667, "body": "Sadly it&#39;s not true. I tried Max(id) approach in my case but redshift doesn&#39;t increment identity column value sequentially..i.e. it can leave gaps between ids generated. Newly generated id is guaranteed to be unique but may not necessarily be higher than Max(id) , it can be lower than. E.g. current ids on table can be 1,2,6,7,8 and new record is inserted, it can get assigned the id of 3 which is unique but not more than max(id)."}, {"owner": {"reputation": 2712, "user_id": 2267932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb8389c99a599092b185844a3d0599a5?s=128&d=identicon&r=PG", "display_name": "MarSoft", "link": "https://stackoverflow.com/users/2267932/marsoft"}, "reply_to_user": {"reputation": 519, "user_id": 337666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa336c67275c5215e50b6c7f5fb05df?s=128&d=identicon&r=PG", "display_name": "Shrikant Prabhu", "link": "https://stackoverflow.com/users/337666/shrikant-prabhu"}, "edited": false, "score": 0, "creation_date": 1496014686, "post_id": 43240103, "comment_id": 75475931, "body": "@ShrikantPrabhu, thanks for pointing. <a href=\"http://www.sqlhaven.com/identity-column-seed-step-with-insert-statements/\" rel=\"nofollow noreferrer\">This article</a> investigates into the issue. Probably the simplest thing to try is to use <code>IDENTITY (1,1)</code> but I am not sure if it helps. Actually not sure how one can use Redshift at all with such lack of information about newly inserted records.."}, {"owner": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "reply_to_user": {"reputation": 2712, "user_id": 2267932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb8389c99a599092b185844a3d0599a5?s=128&d=identicon&r=PG", "display_name": "MarSoft", "link": "https://stackoverflow.com/users/2267932/marsoft"}, "edited": false, "score": 2, "creation_date": 1539071920, "post_id": 43240103, "comment_id": 92357454, "body": "@MarSoft I realise this comment is old, however, using <code>IDENTITY(1,1)</code> doesn&#39;t help because of the sharded/distributed nature of REDSHIFT.  Each node or slice assigns from a different subset of the IDs in a manner that won&#39;t duplicate or collide.  This means that the nodes don&#39;t need to talk to each other to assign an identity, but it also means &quot;sequential&quot;/&quot;in-order&quot; allocation is <b><i>not</i></b> guaranteed."}], "tags": [], "owner": {"reputation": 62733, "user_id": 691688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de2b55e3d46ce8bac74421a91299cd5e?s=128&d=identicon&r=PG", "display_name": "Femi", "link": "https://stackoverflow.com/users/691688/femi"}, "is_accepted": true, "score": 4, "last_activity_date": 1491420834, "creation_date": 1491420834, "answer_id": 43240103, "question_id": 43239986, "link": "https://stackoverflow.com/questions/43239986/get-the-auto-id-for-inserted-row-into-redshift-table-using-psycopg2-in-python/43240103#43240103", "title": "Get the auto id for inserted row into Redshift table using psycopg2 in Python", "body": "<p>Currently not possible with Redshift, as it doesn't support returning the last insert id via the RETURNING syntax. What you might need to do is use a <code>SELECT MAX(id) FROM schema.table;</code> inside a transaction, which probably not quite what you wanted to hear but appears to be the best you can do with the current state of Redshift.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 8196029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec686ffda5639c19eca6dc550fb39f96?s=128&d=identicon&r=PG&f=1", "display_name": "happysachan", "link": "https://stackoverflow.com/users/8196029/happysachan"}, "is_accepted": false, "score": 0, "last_activity_date": 1532711100, "creation_date": 1532711100, "answer_id": 51562557, "question_id": 43239986, "link": "https://stackoverflow.com/questions/43239986/get-the-auto-id-for-inserted-row-into-redshift-table-using-psycopg2-in-python/51562557#51562557", "title": "Get the auto id for inserted row into Redshift table using psycopg2 in Python", "body": "<p>You can also query for the id in a select if you know how to uniquely find the row without id.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11094782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2c1857b82039b731e19d32acb99b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Dor", "link": "https://stackoverflow.com/users/11094782/dor"}, "is_accepted": false, "score": 1, "last_activity_date": 1573578323, "last_edit_date": 1573578323, "creation_date": 1566389152, "answer_id": 57591237, "question_id": 43239986, "link": "https://stackoverflow.com/questions/43239986/get-the-auto-id-for-inserted-row-into-redshift-table-using-psycopg2-in-python/57591237#57591237", "title": "Get the auto id for inserted row into Redshift table using psycopg2 in Python", "body": "<p>At this moment, Redshift still doesn't support RETURNING syntax, and I couldn't find here a satisfying answer. So I'm posting a generic solution in case anyone needs it.</p>\n\n<p>The only assumption for this solution is that you know how many records you've just inserted. Assuming x is the numbers of records inserted, you can run this query:</p>\n\n<pre><code>SELECT id \nFROM table \nORDER BY id DESC\nLIMIT {x}\n</code></pre>\n\n<p>Very important! you have to run this query together with the insert one in the <strong>same transaction</strong>. Otherwise, it won't work.</p>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 4672396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-rIIMGtuFeTw/AAAAAAAAAAI/AAAAAAAAAVw/iphn1vBSh0A/photo.jpg?sz=128", "display_name": "JEEVAN GEORGE ANTONY", "link": "https://stackoverflow.com/users/4672396/jeevan-george-antony"}, "is_accepted": false, "score": 0, "last_activity_date": 1601016643, "creation_date": 1601016643, "answer_id": 64059222, "question_id": 43239986, "link": "https://stackoverflow.com/questions/43239986/get-the-auto-id-for-inserted-row-into-redshift-table-using-psycopg2-in-python/64059222#64059222", "title": "Get the auto id for inserted row into Redshift table using psycopg2 in Python", "body": "<p>You could use following query to get the last inserted id from redshift.</p>\n<pre><code>SELECT top 1 id from sampletable where created &lt; Getdate() order by created desc;\n</code></pre>\n<p>where 'id' is the field you are interested in and 'created' is the field having datetime information.</p>\n<p>The reason being using the created date time information is, if the table is used for bulk insert there is a chance for having records with id's that are sequential like 1,33,35,56,103, etc.....\nIn the above scenario, using max(id) wont work as expected.\nbecause the last inserted id could be any number which was not already inserted earlier.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 12365793, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F1E_WOxHAro/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfQRe83Tq-XaIxLEWNHQKYJJoLI6w/photo.jpg?sz=128", "display_name": "Aaron Coquet", "link": "https://stackoverflow.com/users/12365793/aaron-coquet"}, "is_accepted": false, "score": 0, "last_activity_date": 1604334198, "creation_date": 1604334198, "answer_id": 64649341, "question_id": 43239986, "link": "https://stackoverflow.com/questions/43239986/get-the-auto-id-for-inserted-row-into-redshift-table-using-psycopg2-in-python/64649341#64649341", "title": "Get the auto id for inserted row into Redshift table using psycopg2 in Python", "body": "<p>Assuming that you aren't (potentially) inserting duplicates, you could do this with python. I'm assuming that your provided code is in a loop; the specifics of the loop don't matter, but put the <code># before the loop</code> section before the loop.</p>\n<pre class=\"lang-py prettyprint-override\"><code># before the loop\n# you probably have a list or dict of values that you're inputting. Re-use that if you can; if you can't, create a dict\nsample_dict = {}\n# end before the loop\n\n/* existing code */\nconn=psycopg2.connect(conn_str)\nconn.autocommit = True\n\n# use this query instead of your current one (just remove the RETURNING clause)\nins_sql = &quot;INSERT INTO schema.table (col1, col2) VALUES (%s, %s);&quot;\n\n# this query will get the id of those last added values\nsel_sql = &quot;SELECT id FROM schema.table WHERE col1 = %s AND col2 = %s ORDER BY id DESC LIMIT 1;&quot;\n\ncur = conn.cursor()\ncur.execute(ins_sql,(val1,val2))\n\n# new stuff here!\ncur.execute(sel_sql,(val1,val2))\nid = cur.fetchone()[0]\nsample_dict[val1 + '|' + val2] = id\n</code></pre>\n<p>Caveats:</p>\n<ol>\n<li>I haven't tested this exact script</li>\n<li>This will probably not work if you're inserting duplicate values</li>\n<li>You aren't sanitizing your input or using prepared statements (Not 100% sure that's an option, TBH)</li>\n<li>You know more about your database and code structure than I do; leverage that knowledge</li>\n<li>This is not the most efficient solution, but it <em>should</em> work for what you want.</li>\n</ol>\n"}], "owner": {"reputation": 145, "user_id": 4772711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SCgCM.png?s=128&g=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/4772711/zac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2840, "favorite_count": 0, "accepted_answer_id": 43240103, "answer_count": 5, "score": 7, "last_activity_date": 1604334198, "creation_date": 1491420420, "last_edit_date": 1582457826, "question_id": 43239986, "link": "https://stackoverflow.com/questions/43239986/get-the-auto-id-for-inserted-row-into-redshift-table-using-psycopg2-in-python", "title": "Get the auto id for inserted row into Redshift table using psycopg2 in Python", "body": "<p>I am inserting a record into a <strong>Amazon Redshift</strong> table from <strong>Python 2.7</strong> using <strong>psycopg2</strong> library and I would like to get back the auto generate primary id for the inserted row.</p>\n\n<p>I have tried the usual ways I can find here or in other websites using google search, eg:</p>\n\n<pre><code>conn=psycopg2.connect(conn_str)\nconn.autocommit = True\n\nsql = \"INSERT INTO schema.table (col1, col2) VALUES (%s, %s) RETURNING id;\"\n\ncur = conn.cursor()\ncur.execute(sql,(val1,val2))\nid = cur.fetchone()[0]\n</code></pre>\n\n<p>I receive an error on cur.execute line :</p>\n\n<pre><code>ProgrammingError: syntax error at or near \"RETURNING\"\n</code></pre>\n\n<p>Does anybody know how to fix this or accomplish the same thing?</p>\n\n<blockquote>\n  <p>I have to use <strong>psycopg2</strong> in my code</p>\n</blockquote>\n"}, {"tags": ["python", "tkinter", "ttk"], "answers": [{"tags": [], "owner": {"reputation": 343, "user_id": 4627318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wv2bn.jpg?s=128&g=1", "display_name": "Sebastian Hoelzl", "link": "https://stackoverflow.com/users/4627318/sebastian-hoelzl"}, "is_accepted": false, "score": 0, "last_activity_date": 1491422364, "creation_date": 1491422364, "answer_id": 43240552, "question_id": 43239982, "link": "https://stackoverflow.com/questions/43239982/python2-windows7-nested-tkinter-panedwindows/43240552#43240552", "title": "Python2/Windows7: Nested Tkinter PanedWindows", "body": "<p>Okay I solved this:</p>\n\n<pre><code># -*- coding: utf-8 -*-\n\nimport Tkinter as tk\nimport ttk\n\n\nclass Test(tk.Tk):\n\n    def __init__(self, *args, **kwargs):\n        tk.Tk.__init__(self, *args, **kwargs)\n        self.geometry('800x600')\n        self.createUI()\n        self.mkLayout()\n        self.configResize()\n        self.mainloop()\n\n    def createUI(self):\n        self.paneV = ttk.PanedWindow(master=self, orient=tk.VERTICAL)\n        self.paneH = ttk.PanedWindow(master=self.paneV, orient=tk.HORIZONTAL)\n        self.frmA = ttk.Frame(master=self.paneH)\n        self.frmB = ttk.Frame(master=self.paneH)\n        self.frmC = ttk.Frame(master=self.paneV)\n        self.trvA = ttk.Treeview(master=self.frmA,\n                                 columns=('1', '2', '3', '4', '5', '6', '7',\n                                          '8', '9', '10'))\n        self.trvB = ttk.Treeview(master=self.frmB, columns=('1', '2', '3'))\n        self.trvC = ttk.Treeview(master=self.frmC,\n                                 columns=('1', '2', '3', '4', '5', '6'))\n        self.scrA = ttk.Scrollbar(master=self.frmA, orient=tk.HORIZONTAL,\n                                  command=self.trvA.xview)\n        self.scrB = ttk.Scrollbar(master=self.frmB, orient=tk.HORIZONTAL,\n                                  command=self.trvB.xview)\n        self.scrC = ttk.Scrollbar(master=self.frmC, orient=tk.HORIZONTAL,\n                                  command=self.trvC.xview)\n        self.trvA['xscroll'] = self.scrA.set\n        self.trvB['xscroll'] = self.scrB.set\n        self.trvC['xscroll'] = self.scrC.set        \n\n    def mkLayout(self):\n        self.paneV.grid(row=0, column=0, sticky=tk.NSEW)\n        self.paneH.add(self.frmA, weight=1)\n        self.paneH.add(self.frmB, weight=1)\n        self.paneV.add(self.paneH, weight=1)\n        self.paneV.add(self.frmC, weight=1)\n        self.trvA.grid(row=0, column=0, sticky=tk.NSEW)\n        self.trvB.grid(row=0, column=0, sticky=tk.NSEW)\n        self.trvC.grid(row=0, column=0, sticky=tk.NSEW)\n        self.scrA.grid(row=1, column=0, sticky=tk.EW)\n        self.scrB.grid(row=1, column=0, sticky=tk.EW)\n        self.scrC.grid(row=1, column=0, sticky=tk.EW)\n\n\n    def configResize(self):\n        self.columnconfigure(0, weight=1)\n        self.rowconfigure(0, weight=1)\n        self.frmA.grid_propagate(0)\n        self.frmB.grid_propagate(0)\n        self.frmC.grid_propagate(0)\n        self.frmA.columnconfigure(0, weight=1)\n        self.frmB.columnconfigure(0, weight=1)\n        self.frmC.columnconfigure(0, weight=1)\n        self.frmA.rowconfigure(0, weight=1)\n        self.frmB.rowconfigure(0, weight=1)\n        self.frmC.rowconfigure(0, weight=1)\n\nTest()\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 4627318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wv2bn.jpg?s=128&g=1", "display_name": "Sebastian Hoelzl", "link": "https://stackoverflow.com/users/4627318/sebastian-hoelzl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491422364, "creation_date": 1491420408, "question_id": 43239982, "link": "https://stackoverflow.com/questions/43239982/python2-windows7-nested-tkinter-panedwindows", "title": "Python2/Windows7: Nested Tkinter PanedWindows", "body": "<p>I want the following nested PanedWindows to <strong>resize correctly</strong>. </p>\n\n<p>The vertical PanedWindow should split the window in two halfs and the horizontal should split the upper pane horizontally in half. In each pane a treeview is grid. Those Treeviews have a different amount of columns and a scrollbar is attached to them.</p>\n\n<p>Thanks for help!</p>\n\n<pre><code># -*- coding: utf-8 -*-\n\nimport Tkinter as tk\nimport ttk\n\n\nclass Test(tk.Tk):\n\n    def __init__(self, *args, **kwargs):\n        tk.Tk.__init__(self, *args, **kwargs)\n        self.createUI()\n        self.mkLayout()\n        self.configResize()\n        self.mainloop()\n\n    def createUI(self):\n        self.paneV = ttk.PanedWindow(master=self, orient=tk.VERTICAL)\n        self.paneH = ttk.PanedWindow(master=self.paneV, orient=tk.HORIZONTAL)\n        self.frmA = ttk.Frame(master=self.paneH)\n        self.frmB = ttk.Frame(master=self.paneH)\n        self.frmC = ttk.Frame(master=self.paneV)\n        self.trvA = ttk.Treeview(master=self.frmA,\n                                 columns=('1', '2', '3', '4', '5', '6', '7',\n                                          '8', '9', '10'))\n        self.trvB = ttk.Treeview(master=self.frmB, columns=('1', '2', '3'))\n        self.trvC = ttk.Treeview(master=self.frmC,\n                                 columns=('1', '2', '3', '4', '5', '6'))\n        self.scrA = ttk.Scrollbar(master=self.frmA, orient=tk.HORIZONTAL,\n                                  command=self.trvA.xview)\n        self.scrB = ttk.Scrollbar(master=self.frmB, orient=tk.HORIZONTAL,\n                                  command=self.trvB.xview)\n        self.scrC = ttk.Scrollbar(master=self.frmC, orient=tk.HORIZONTAL,\n                                  command=self.trvC.xview)\n\n    def mkLayout(self):\n        self.trvA.grid(row=0, column=0, sticky=tk.NSEW)\n        self.trvB.grid(row=0, column=0, sticky=tk.NSEW)\n        self.trvC.grid(row=0, column=0, sticky=tk.NSEW)\n        self.scrA.grid(row=1, column=0, sticky=tk.EW)\n        self.scrB.grid(row=1, column=0, sticky=tk.EW)\n        self.scrC.grid(row=1, column=0, sticky=tk.EW)\n        self.paneV.grid(row=0, column=0, sticky=tk.NSEW)\n        self.paneH.add(self.frmA, weight=1)\n        self.paneH.add(self.frmB, weight=1)\n        self.paneV.add(self.paneH, weight=1)\n        self.paneV.add(self.frmC, weight=1)\n\n    def configResize(self):\n        self.columnconfigure(0, weight=1)\n        self.rowconfigure(0, weight=1)\n\nTest()\n</code></pre>\n"}, {"tags": ["python", "csv", "apache-spark", "pyspark", "rdd"], "comments": [{"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1491420568, "post_id": 43239969, "comment_id": 73550155, "body": "what spark version are you using? <code>val df = spark.read.option(&quot;header&quot;, false).option(&quot;inferSchema&quot;, true).csv(&quot;*.csv&quot;)</code> works for me spark 2.0.2."}, {"owner": {"reputation": 165, "user_id": 7495666, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/123d85b8f6a2a0627eaa9754414d919a?s=128&d=identicon&r=PG&f=1", "display_name": "user491", "link": "https://stackoverflow.com/users/7495666/user491"}, "reply_to_user": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1491420600, "post_id": 43239969, "comment_id": 73550180, "body": "yes, but i am using 1.x :("}, {"owner": {"reputation": 2959, "user_id": 6933215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BQEhb.jpg?s=128&g=1", "display_name": "Pushkr", "link": "https://stackoverflow.com/users/6933215/pushkr"}, "edited": false, "score": 2, "creation_date": 1491433460, "post_id": 43239969, "comment_id": 73556137, "body": "Apart from seriously considering to upgrade to spark2.x, and if you really cant use databrick&#39;s csv package (for mysterious reasons !) , simplest way you can try is use <code>textFile</code> method to read file and use regex to find the columns/data which contain commas between quotes and replace them something else. So this is basic data preparation operation, once you are done with that, you can use simple <code>rdd.map(lambda row: row.split(&quot;,&quot;))</code> operation to make each row as comma separated list"}, {"owner": {"reputation": 165, "user_id": 7495666, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/123d85b8f6a2a0627eaa9754414d919a?s=128&d=identicon&r=PG&f=1", "display_name": "user491", "link": "https://stackoverflow.com/users/7495666/user491"}, "reply_to_user": {"reputation": 2959, "user_id": 6933215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BQEhb.jpg?s=128&g=1", "display_name": "Pushkr", "link": "https://stackoverflow.com/users/6933215/pushkr"}, "edited": false, "score": 0, "creation_date": 1491674042, "post_id": 43239969, "comment_id": 73662513, "body": "@Pushkr I want the commas in the data, if I replace it with something then I need to again replace it with comma. I&#39;m not sure what to replace comma with in first stage, since fields may contain any kind of characters."}], "answers": [{"tags": [], "owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "is_accepted": false, "score": 1, "last_activity_date": 1515516421, "last_edit_date": 1515516421, "creation_date": 1491427578, "answer_id": 43241915, "question_id": 43239969, "link": "https://stackoverflow.com/questions/43239969/read-csv-file-with-strings-to-rdd-spark/43241915#43241915", "title": "Read CSV file with strings to RDD spark", "body": "<p>In spark 2.0+ you can use the <a href=\"http://spark.apache.org/docs/2.1.0/api/python/pyspark.sql.html#pyspark.sql.DataFrameReader.csv\" rel=\"nofollow noreferrer\"><code>SparkSession.read</code></a> method to read in a number of formats, one of which is csv. Using this method you could do the following:</p>\n\n<pre><code>df = spark.read.csv(filename)\n</code></pre>\n\n<p>Or for an rdd just:</p>\n\n<pre><code>rdd = spark.read.csv(filename).rdd\n</code></pre>\n\n<p><strong>Update</strong> </p>\n\n<p>Having seen your comment take a look at <a href=\"https://github.com/databricks/spark-csv\" rel=\"nofollow noreferrer\">CSV Data Source for Apache Spark 1.x</a>. I believe this was part of what lead to the read method being included in Spark 2.0.</p>\n"}, {"comments": [{"owner": {"reputation": 462, "user_id": 7753398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c96d474ceba4da0af7728e11e7f3ad3?s=128&d=identicon&r=PG&f=1", "display_name": "alpeshpandya", "link": "https://stackoverflow.com/users/7753398/alpeshpandya"}, "edited": false, "score": 0, "creation_date": 1493853035, "post_id": 43243007, "comment_id": 74584174, "body": "Was this useful? Do you have any follow up questions?"}], "tags": [], "owner": {"reputation": 462, "user_id": 7753398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c96d474ceba4da0af7728e11e7f3ad3?s=128&d=identicon&r=PG&f=1", "display_name": "alpeshpandya", "link": "https://stackoverflow.com/users/7753398/alpeshpandya"}, "is_accepted": false, "score": 0, "last_activity_date": 1491433265, "creation_date": 1491433265, "answer_id": 43243007, "question_id": 43239969, "link": "https://stackoverflow.com/questions/43239969/read-csv-file-with-strings-to-rdd-spark/43243007#43243007", "title": "Read CSV file with strings to RDD spark", "body": "<p>With older version of Spark you cannot read csv directly. But you can include Databrick's csv jar and use their Python API to achieve the same.</p>\n\n<pre><code>from pyspark.sql import SQLContext\nsqlContext = SQLContext(sc)\n\ndf = sqlContext.read.format('com.databricks.spark.csv').options(header='true', \n  inferschema='true').load('cars.csv')\ndf.select('year', \n  'model').write.format('com.databricks.spark.csv').save('newcars.csv')\n</code></pre>\n\n<p>Reference: <a href=\"https://github.com/databricks/spark-csv#python-api\" rel=\"nofollow noreferrer\">https://github.com/databricks/spark-csv#python-api</a></p>\n"}], "owner": {"reputation": 165, "user_id": 7495666, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/123d85b8f6a2a0627eaa9754414d919a?s=128&d=identicon&r=PG&f=1", "display_name": "user491", "link": "https://stackoverflow.com/users/7495666/user491"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6772, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515516421, "creation_date": 1491420369, "question_id": 43239969, "link": "https://stackoverflow.com/questions/43239969/read-csv-file-with-strings-to-rdd-spark", "title": "Read CSV file with strings to RDD spark", "body": "<p>I have input CSV file as below</p>\n\n<pre><code>123,john,ny,\"new-emp-in\"\n111,rock,sf,\"recently,promoted\"\n100,smith,la,\"10.101.0129-name,string\"\n</code></pre>\n\n<p>so how can i read this and created RDD?<br>\ncom.databricks:spark-csv_2.11:1.5.0 supports this, but i cannot use this. </p>\n"}, {"tags": ["python", "selenium-webdriver", "web-scraping"], "comments": [{"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 1, "creation_date": 1491422151, "post_id": 43239959, "comment_id": 73551078, "body": "This site works by posting code, showing results, and asking a specific question."}, {"owner": {"reputation": 1, "user_id": 7532776, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a629661fc3f7a941642eee27532e418a?s=128&d=identicon&r=PG&f=1", "display_name": "Zeeshan Ul Haq", "link": "https://stackoverflow.com/users/7532776/zeeshan-ul-haq"}, "reply_to_user": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1491426420, "post_id": 43239959, "comment_id": 73553475, "body": "I edited the question. Is it more clear now?"}, {"owner": {"reputation": 1, "user_id": 7532776, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a629661fc3f7a941642eee27532e418a?s=128&d=identicon&r=PG&f=1", "display_name": "Zeeshan Ul Haq", "link": "https://stackoverflow.com/users/7532776/zeeshan-ul-haq"}, "reply_to_user": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1491459612, "post_id": 43239959, "comment_id": 73563713, "body": "I don&#39;t have yet the privilege to upload an image directly. I can only add the image as a link. How can get that privilege?"}], "answers": [{"tags": [], "owner": {"reputation": 1335, "user_id": 3763732, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/030dfac3e67d9b4c2858ab78895d208b?s=128&d=identicon&r=PG&f=1", "display_name": "AutomaticStatic", "link": "https://stackoverflow.com/users/3763732/automaticstatic"}, "is_accepted": false, "score": 0, "last_activity_date": 1491494586, "creation_date": 1491494586, "answer_id": 43260331, "question_id": 43239959, "link": "https://stackoverflow.com/questions/43239959/web-scraping-infinite-scrolling-and-extracting-links/43260331#43260331", "title": "Web Scraping, Infinite scrolling and extracting links", "body": "<p>Scraping with Selenium is generally terrible and the odds are slim-to-none that you'll find a way to deal with the infinite scroll.</p>\n\n<p>This site basically has a JSON endpoint at <code>https://www.pakwheels.com/forums/c/travel-n-tours/l/latest.json?_=&lt;uts&gt;</code>, where <code>&lt;uts&gt;</code> is a Unix timestamp.</p>\n\n<p>Basically, here's how this works. Open Chrome DevTools or Firebug and load the forum screen. Check out the <code>Network</code> tab. There's a <code>XHR</code> file called something like <code>latest.json?_=1491493915518</code>. Click on it. </p>\n\n<p>The <code>Request URL</code> displays as <code>https://www.pakwheels.com/forums/c/travel-n-tours/l/latest.json?_=1491493915518</code>. This is your endpoint. </p>\n\n<p>Now all you need is a Unix timestamp and a few lines of code:</p>\n\n<pre><code>import requests\n\ncurrent_uts = from_some_unix_timestamp_source  \nresponse = requests.get('https://www.pakwheels.com/forums/c/travel-n-tours/l/latest.json?_={}'.format(current_uts))\nprint(response.json())\n</code></pre>\n\n<p>And you get back a JSON representation of everything on that page. If you re-run the same script with a more recent timestamp, it will retrieve new forum threads. You could also go back in time with an old Unix timestamp if you wanted to retrieve older threads (or even scrape the entire forum). I'll leave it to you to figure out how to build this out into something more robust.</p>\n"}], "owner": {"reputation": 1, "user_id": 7532776, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a629661fc3f7a941642eee27532e418a?s=128&d=identicon&r=PG&f=1", "display_name": "Zeeshan Ul Haq", "link": "https://stackoverflow.com/users/7532776/zeeshan-ul-haq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 608, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1491494586, "creation_date": 1491420319, "last_edit_date": 1491439821, "question_id": 43239959, "link": "https://stackoverflow.com/questions/43239959/web-scraping-infinite-scrolling-and-extracting-links", "title": "Web Scraping, Infinite scrolling and extracting links", "body": "<p>I am trying to extract all the links like \"Saudi Sim Card\" from \"<a href=\"https://www.pakwheels.com/forums/c/travel-n-tours\" rel=\"nofollow noreferrer\">https://www.pakwheels.com/forums/c/travel-n-tours</a>\". I am using Selenium web driver to scroll the web page but i am unable to extract all the links. The error i get says \"object of type None has no href attribute\" Any suggestions? \n<a href=\"https://i.stack.imgur.com/VkSlP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VkSlP.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>from PageScroller import WebPageScroller\nimport bs4 as bs\n\nsourceUrl='https://www.pakwheels.com/forums/c/travel-n-tours'\n\n#----------------------- Scrolling to the bottom of page and getting source code --------------------------------------#\n\nscrollObject=WebPageScroller\npageSource=scrollObject.getScrolledPageSource(scrollObject,sourceUrl)\n\n# ------------------------------------- Getting links ---------------------------------- #\nsoup = bs.BeautifulSoup(pageSource, 'lxml')\n\nblogUrls=[]\nfor url in soup.find_all('a'):\n\n    if((url.get('href').find('/forums/t/')!=-1) and (url.get('href').find('about-the-travel-n-tours-category')==-1) and (url.get('href').find('/forums/t/topic/')==-1)):\n        blogUrls.append(url.get('href'))\n        print(url.get('href'))       \nprint(len(blogUrls))\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "while-loop"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1491420387, "post_id": 43239948, "comment_id": 73550048, "body": "In your code here, <code>n</code> is a string, not a number."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491420429, "post_id": 43239948, "comment_id": 73550070, "body": "Briefly: you need to cast <code>n</code> to an integer, because <code>raw_input</code> always produces strings, and Python 2 will happily compare objects of different types with no error messages because it is bad."}, {"owner": {"reputation": 1188, "user_id": 7244759, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/336538946712354/picture?type=large", "display_name": "spicypumpkin", "link": "https://stackoverflow.com/users/7244759/spicypumpkin"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491420723, "post_id": 43239948, "comment_id": 73550247, "body": "@TigerhawkT3 Wait but how is the condition met when <code>i != 0</code>? Isn&#39;t all strings and all non-zero integers considered to be <code>True</code>?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 1188, "user_id": 7244759, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/336538946712354/picture?type=large", "display_name": "spicypumpkin", "link": "https://stackoverflow.com/users/7244759/spicypumpkin"}, "edited": false, "score": 1, "creation_date": 1491420812, "post_id": 43239948, "comment_id": 73550292, "body": "@Posh_Pumpkin - Non-empty strings and non-zero numbers (and non-empty sequences, etc.) are truthy. However, when you compare objects of different types in Python 2 (e.g. <code>&#39;a&#39; &gt; 4</code>), it will compare their <i>types</i>, alphabetically, so strings are always greater than integers."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491421294, "post_id": 43239948, "comment_id": 73550573, "body": "@ZacharyM: Please unaccept my answer so that I can delete it and make Tigerhawk happy."}], "owner": {"reputation": 27, "user_id": 7822687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128de6275f1b8cc4c7e0aa4b3875f90?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary M.", "link": "https://stackoverflow.com/users/7822687/zachary-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1491420383, "answer_count": 0, "score": 0, "last_activity_date": 1491420727, "creation_date": 1491420265, "question_id": 43239948, "link": "https://stackoverflow.com/questions/43239948/placing-a-stop-condition-on-while-loop-in-a-function-python-2-7", "closed_reason": "Duplicate", "title": "Placing a stop condition on while-loop in a function? Python 2.7", "body": "<p>I placed a while-loop inside of a function 'count()'.</p>\n\n<p>Ideally, I want the user to pick a number between one and 10.\nIf said number \"n\" &lt; the base number (i), then print and add 1. </p>\n\n<p>The problem is that when n > i, the process continues as if being ignored.</p>\n\n<pre><code>i = 0\nnumbers = []\n\nprint \"Pick a number between 1 and 10:\"\nn = raw_input(\"&gt; \")\n\ndef count(x,y):\n    while x &lt; y:\n        print \"First number is %d\" % x\n        numbers.append(x)\n\n        x += 1\n        print \"Total numbers now: \", numbers\n        print \"Last number = %d\" % x\n\ncount(i,n)\n</code></pre>\n\n<p>I believe this has something to do with the While-Loop being placed inside of a function, or perhaps I'm not seeing it. </p>\n\n<p>My returned product looks something like this:</p>\n\n<pre><code>At the top, i is 9\nNumbers now:  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nAt the bottom i is 10\n</code></pre>\n\n<p>I am still learning Python (my first language) and trying to follow a tutorial. I am aware that it may be better to do For-Loops instead, however this is the current topic I'm still trying to grasp.</p>\n"}, {"tags": ["python", "encoding", "standards", "data-conversion"], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 3453023, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6ca5e757ad552b723e42c8d1e387499a?s=128&d=identicon&r=PG&f=1", "display_name": "tlaminator", "link": "https://stackoverflow.com/users/3453023/tlaminator"}, "edited": false, "score": 0, "creation_date": 1491624024, "post_id": 43240579, "comment_id": 73647583, "body": "Thanks for the solution. I&#39;m wondering if you can offer Python 2 solution as well."}, {"owner": {"reputation": 796, "user_id": 3453023, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6ca5e757ad552b723e42c8d1e387499a?s=128&d=identicon&r=PG&f=1", "display_name": "tlaminator", "link": "https://stackoverflow.com/users/3453023/tlaminator"}, "edited": false, "score": 0, "creation_date": 1491625613, "post_id": 43240579, "comment_id": 73647866, "body": "Also I don&#39;t quite understand how did you get the sequence <code>b&#39;\\033$B</code>. Is this sequence specific to this example or can you use this in general for other JIS X 208 code as well?"}, {"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "reply_to_user": {"reputation": 796, "user_id": 3453023, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6ca5e757ad552b723e42c8d1e387499a?s=128&d=identicon&r=PG&f=1", "display_name": "tlaminator", "link": "https://stackoverflow.com/users/3453023/tlaminator"}, "edited": false, "score": 0, "creation_date": 1491688504, "post_id": 43240579, "comment_id": 73666984, "body": "That&#39;s what Python gave when I asked to encode in iso2022_jp, and more are listed at <a href=\"https://en.wikipedia.org/wiki/ISO/IEC_2022#ISO.2FIEC_2022_character_sets\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ISO/&hellip;</a>"}], "tags": [], "owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "is_accepted": true, "score": 1, "last_activity_date": 1491422481, "creation_date": 1491422481, "answer_id": 43240579, "question_id": 43239935, "link": "https://stackoverflow.com/questions/43239935/convert-jis-x-208-code-to-utf-8-in-python/43240579#43240579", "title": "Convert JIS X 208 code to UTF-8 in Python", "body": "<p>These are accessed under ISO 2022 codec.</p>\n\n<pre><code>&gt;&gt;&gt; '\u4e9c'.encode('iso2022_jp')\nb'\\x1b$B0!\\x1b(B'\n</code></pre>\n\n<p>If I saw those bytes not framed by the escape sequence, I would have to know which version of JIS X 0208 is being used, but I'm entirely pattern matching on Wikipedia at this point anyway.</p>\n\n<pre><code>&gt;&gt;&gt; b = b'\\033$B' + bytes.fromhex('3021')\n&gt;&gt;&gt; c = b.decode('iso2022_jp')\n&gt;&gt;&gt; c\n'\u4e9c'\n&gt;&gt;&gt; urllib.parse.quote(c)\n'%E4%BA%9C'\n</code></pre>\n\n<p>(This is Python 3.)</p>\n"}, {"tags": [], "owner": {"reputation": 1648, "user_id": 9935654, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XdoefqMBYAQ/AAAAAAAAAAI/AAAAAAAAIfg/qFXt_RO4q5s/photo.jpg?sz=128", "display_name": "Carson", "link": "https://stackoverflow.com/users/9935654/carson"}, "is_accepted": false, "score": 0, "last_activity_date": 1574242142, "creation_date": 1574242142, "answer_id": 58950909, "question_id": 43239935, "link": "https://stackoverflow.com/questions/43239935/convert-jis-x-208-code-to-utf-8-in-python/58950909#58950909", "title": "Convert JIS X 208 code to UTF-8 in Python", "body": "<p>This solution may not be standard, but it seems to work.</p>\n\n<h1>CODE</h1>\n\n<pre><code>import urllib.parse\n\n\ndef jis_to_euc_jp(jis_hex: str):\n    \"\"\"\n    You can find the rules from this website: https://pentan.info/doc/jis_list.html\n\n    8080 = A1A1 - 2121\n    4B8080 = 8FA1C1 - 442141\n    \"\"\"\n    int_jis = int(jis_hex, 16)\n    step = int('8080', 16) if int_jis &lt;= int('7426', 16) else int('4B8080', 16)\n    return hex(int_jis + step).upper()[2:]  # 0X3021 -&gt; 3021\n\n\ndef eucjp_to_utf_16be(eucjp_hex: str):\n    byte_ch = bytes.fromhex(eucjp_hex)\n    real_char = byte_ch.decode('euc_jp')  # '\u4e9c'\n    # code = real_str.encode('utf-8').hex().upper()  # E4BA9C\n    return real_char\n\n\ndef main():\n    for v in ['\u4e9c'.encode('utf-8').hex().upper(),  # when glyph is know. E4BA9C\n\n              # only know jis code, to find the real char\n              jis_to_euc_jp('3021'),  # B0A1  # the Standard Encodings is provided euc-jp turn to utf-16be, so we need to know the relation between JIS and euc-jp\n              eucjp_to_utf_16be(jis_to_euc_jp('3021'))\n              ]:\n        print(urllib.parse.quote(v))\n\n\nif __name__ == '__main__':\n    main()\n\n</code></pre>\n\n<pre><code>E4BA9C\nB0A1\n%E4%BA%9C\n</code></pre>\n\n<h1>REFERENCE</h1>\n\n<ul>\n<li>Standard Encodings: <a href=\"https://docs.python.org/3.7/library/codecs.html#standard-encodings\" rel=\"nofollow noreferrer\">https://docs.python.org/3.7/library/codecs.html#standard-encodings</a></li>\n<li>JIS TABLE: <a href=\"https://pentan.info/doc/jis_list.html\" rel=\"nofollow noreferrer\">https://pentan.info/doc/jis_list.html</a></li>\n</ul>\n"}], "owner": {"reputation": 796, "user_id": 3453023, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6ca5e757ad552b723e42c8d1e387499a?s=128&d=identicon&r=PG&f=1", "display_name": "tlaminator", "link": "https://stackoverflow.com/users/3453023/tlaminator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 1, "accepted_answer_id": 43240579, "answer_count": 2, "score": 0, "last_activity_date": 1574242142, "creation_date": 1491420242, "question_id": 43239935, "link": "https://stackoverflow.com/questions/43239935/convert-jis-x-208-code-to-utf-8-in-python", "title": "Convert JIS X 208 code to UTF-8 in Python", "body": "<p>Let's say I have this Kanji \"\u4e9c\" which is represented in JIS X 208 code in hex form: 0x3021. I want my Python program to convert that code into its UTF-8 form E4BA9C so that I can pass that string (URL-encoded) into my url like this </p>\n\n<p><a href=\"http://jisho.org/api/v1/search/words?keyword=%E4%BA%9C\" rel=\"nofollow noreferrer\">http://jisho.org/api/v1/search/words?keyword=%E4%BA%9C</a></p>\n\n<p>I'm using Python 2.7.12 but I'm open to Python 3 solution as well</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 5480051, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/eQMrd.jpg?s=128&g=1", "display_name": "mbvee", "link": "https://stackoverflow.com/users/5480051/mbvee"}, "edited": false, "score": 0, "creation_date": 1491424466, "post_id": 43240012, "comment_id": 73552367, "body": "The file size is bigger."}], "tags": [], "owner": {"reputation": 5185, "user_id": 679240, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c6c18851c01fa33057f636caea371047?s=128&d=identicon&r=PG", "display_name": "Haroldo_OK", "link": "https://stackoverflow.com/users/679240/haroldo-ok"}, "is_accepted": false, "score": 1, "last_activity_date": 1491420507, "creation_date": 1491420507, "answer_id": 43240012, "question_id": 43239915, "link": "https://stackoverflow.com/questions/43239915/python-string-extraction-from-text-file/43240012#43240012", "title": "Python String Extraction from text file", "body": "<p>If your file isn't very big, you can read the entire text into a string by using <a href=\"https://www.tutorialspoint.com/python/file_readlines.htm\" rel=\"nofollow noreferrer\"><code>file.readlines()</code></a>, then use the <a href=\"https://docs.python.org/2/library/re.html\" rel=\"nofollow noreferrer\">regular expression library</a> to extract the required parts.</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 5480051, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/eQMrd.jpg?s=128&g=1", "display_name": "mbvee", "link": "https://stackoverflow.com/users/5480051/mbvee"}, "edited": false, "score": 0, "creation_date": 1491424394, "post_id": 43240071, "comment_id": 73552332, "body": "Thanks for the idea. I am now able to fetch the value. However, as available in your own solution, it displays all the values. Any idea on how the second part alone can be fetched ? I mean, the string starting from &quot; {&quot;value &quot; and ending at &quot; } &quot;."}], "tags": [], "owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "is_accepted": true, "score": 2, "last_activity_date": 1491424724, "last_edit_date": 1491424724, "creation_date": 1491420738, "answer_id": 43240071, "question_id": 43239915, "link": "https://stackoverflow.com/questions/43239915/python-string-extraction-from-text-file/43240071#43240071", "title": "Python String Extraction from text file", "body": "<p>A <code>re</code> example from the interpreter:</p>\n\n<pre><code>&gt;&gt;&gt; with open('file') as f:\n...    raw = f.read()\n&gt;&gt;&gt; \n&gt;&gt;&gt; import re\n&gt;&gt;&gt; pat = re.compile(r'{\"value\":[^{]+}')\n&gt;&gt;&gt; pat.findall(raw)\n['{\"value\":\"abcdefghijklmnopqrstuvwxyz\",\\n \"pass\":\"123456789zxcvbnmljhgfds\",\\n \"token\":\"abcdefghijklmnopqrstuvwxyz==\"}']\n&gt;&gt;&gt; pat.search(raw).group()\n'{\"value\":\"abcdefghijklmnopqrstuvwxyz\",\\n \"pass\":\"123456789zxcvbnmljhgfds\",\\n \"token\":\"abcdefghijklmnopqrstuvwxyz==\"}'\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 5480051, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/eQMrd.jpg?s=128&g=1", "display_name": "mbvee", "link": "https://stackoverflow.com/users/5480051/mbvee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 43240071, "answer_count": 2, "score": 1, "last_activity_date": 1491424724, "creation_date": 1491420176, "question_id": 43239915, "link": "https://stackoverflow.com/questions/43239915/python-string-extraction-from-text-file", "title": "Python String Extraction from text file", "body": "<p>I have written a python script that will make a call to a server and fetch the response. While making a call to the server, it will pass few values in the body of the request. This value is supposed to be fetched by reading a text file. The text file sample is given below.</p>\n\n<p>My text file sample: </p>\n\n<hr>\n\n<pre><code>Host: localhost:8080\nConnection: keep-alive\n.....\n.....\n{\"token\":\"abcdefhutryskslkslksslslks==\"}POST /fill/entry/login HTTP/1.1\n\nHost: localhost:8080\nConnection: keep-alive\n.....\n.....\n{\"value\":\"abcdefghijklmnopqrstuvwxyz\",\n \"pass\":\"123456789zxcvbnmljhgfds\",\n \"token\":\"abcdefghijklmnopqrstuvwxyz==\"}POST /fill/health HTTP/1.1\n</code></pre>\n\n<hr>\n\n<p>Here, if you can observe, I get different responses. I need to capture the string that starts with <strong>{\"value\"</strong> and ends with <strong>\"}</strong> (the second part of the response as seen in the sample). </p>\n\n<p>On searching in stack overflow, I came across scenarios where they extract the string but however they have a definite start point and a definite end point. In my case, even though the start point can be identified uniquely using the search string \" {\"url \", the end point cannot be identified as the text file contains multiple other parentheses as well. </p>\n\n<p>Any suggestions/pointers on fetching the specific part of the sting from the text file(as stated above) will be really helpful.</p>\n"}, {"tags": ["python", "pandas", "machine-learning", "time-series"], "answers": [{"tags": [], "owner": {"reputation": 2268, "user_id": 6502416, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-mJkhPIxLINg/AAAAAAAAAAI/AAAAAAAAAW0/Ir9dUqclnxk/photo.jpg?sz=128", "display_name": "Alexey Trofimov", "link": "https://stackoverflow.com/users/6502416/alexey-trofimov"}, "is_accepted": false, "score": 0, "last_activity_date": 1491421625, "last_edit_date": 1491421625, "creation_date": 1491420890, "answer_id": 43240114, "question_id": 43239866, "link": "https://stackoverflow.com/questions/43239866/value-error-time-series-data-can-not-convert-string-to-float/43240114#43240114", "title": "Value error: time series data can not convert string to float", "body": "<p>Try to add this line:</p>\n\n<pre><code>series = pd.to_datetime(series)\n</code></pre>\n\n<p>before scaling, but it will turn your timestamps to floats. And i dont think it can be meaningfully reversed</p>\n"}, {"comments": [{"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491423884, "post_id": 43240660, "comment_id": 73552079, "body": "if i do the first line values=series.sub(series.min()).dt.total_seconds().values i get the error: TypeError: ufunc subtract cannot use operands with types dtype(&#39;&lt;M8[ns]&#39;) and dtype(&#39;O&#39;)"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491424076, "post_id": 43240660, "comment_id": 73552183, "body": "this is what I did, would it be helpful to email you my ipython notebook? I appreciate your help, i just feel very stuck!"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491424184, "post_id": 43240660, "comment_id": 73552235, "body": "and then when i call the other function <code>values = series.sub(series.min()).dt.total_seconds().values</code> i get that same error"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491424817, "post_id": 43240660, "comment_id": 73552568, "body": "version: &#39;0.18.1&#39;"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1491425626, "post_id": 43240660, "comment_id": 73553015, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/140015/discussion-between-kwashington122-and-pirsquared\">continue this discussion in chat</a>."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491425903, "post_id": 43240660, "comment_id": 73553170, "body": "@kwashington122 can you copy and paste the code I just pasted below <b><i>setup for debugging</i></b> and run it?"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491446206, "post_id": 43240660, "comment_id": 73559339, "body": "I dont really understand how that works, if I do that it literally just prints out   Out[68]: data1.csv so I dont understand, if there is anyway I can send you my code over messanger or something? let me know please because im running into a block."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491455929, "post_id": 43240660, "comment_id": 73561968, "body": "@kwashington122 I&#39;m not referencing <code>&#39;data1.csv&#39;</code>!  You should be running <code>series.sub(series.min()).dt.total_seconds()</code> at the end.  If you end up with a series of floats, then that implies there is nothing wrong with your python.  And the problem lies in your data or how you are importing it."}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491503060, "post_id": 43240660, "comment_id": 73594474, "body": "AttributeError                            Traceback (most recent call last) &lt;ipython-input-29-dbd8a3644636&gt; in &lt;module&gt;() ----&gt; 1 series.sub(series.min()).dt.total_seconds()  C:\\Program Files\\Anaconda3\\lib\\site-packages\\pandas\\core\\generic.py in __getattr__(self, name)    2670             if name in self._info_axis:    2671                 return self[name] -&gt; 2672             return object.__getattribute__(self, name)    2673     2674     def __setattr__(self, name, value):  AttributeError: &#39;DataFrame&#39; object has no attribute &#39;dt&#39;"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491503095, "post_id": 43240660, "comment_id": 73594491, "body": "when i do series.dtypes i get Value    float64 dtype: object"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491503127, "post_id": 43240660, "comment_id": 73594501, "body": "this  is what i get when i type in series.dtypes                                  ` Value login_time\t 2016-01-01 00:00:00\t3.0 2016-01-01 00:15:00\t3.0 2016-01-01 00:30:00\t7.0 2016-01-01 00:45:00\t7.0 2016-01-01 01:00:00\t5.0`"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491503248, "post_id": 43240660, "comment_id": 73594575, "body": "@kwashington122 ahh... your <code>series</code> is not <code>pd.Series</code> its a <code>pd.DataFrame</code>... you shouldn&#39;t have gotten this error with my test code because I ensured it was a <code>pd.Series</code>.  You need to run this on the column name.  <code>series[&#39;colname&#39;]</code>  I don&#39;t know what the column name is because you didn&#39;t include it."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491503336, "post_id": 43240660, "comment_id": 73594629, "body": "you can also try <code>series.sub(series.min()).iloc[:, 0].dt.total_seconds()</code>"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491587012, "post_id": 43240660, "comment_id": 73636543, "body": "thank you! i will try this out again right now, if not is there anyway I can send you the data set? or my ipynb? thank you!"}, {"owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "edited": false, "score": 0, "creation_date": 1491613651, "post_id": 43240660, "comment_id": 73646084, "body": "AttributeError: &#39;DatetimeProperties&#39; object has no attribute &#39;total_seconds&#39;"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1491425870, "last_edit_date": 1491425870, "creation_date": 1491422741, "answer_id": 43240660, "question_id": 43239866, "link": "https://stackoverflow.com/questions/43239866/value-error-time-series-data-can-not-convert-string-to-float/43240660#43240660", "title": "Value error: time series data can not convert string to float", "body": "<p>Assuming <code>dtype</code> is <code>Timestamp</code>... if not, do this first</p>\n\n<pre><code>series = pd.to_datetime(series)\n</code></pre>\n\n<p>Problem is you need to turn these into numbers that make sense for scaling.<br>\nI'd subtract the minimum date from the series to get a series of <code>Timedelta</code>s.  Then find the total seconds for each <code>Timedelta</code> which is a float.<br>\nNow you're ready for <code>MinMaxScaler</code></p>\n\n<pre><code>values = series.sub(series.min()).dt.total_seconds().values\nvalues = values.reshape((len(values), 1))\nscaler = MinMaxScaler(feature_range=(0, 1))\nscaler = scaler.fit(values)\n</code></pre>\n\n<hr>\n\n<p><strong><em>setup for debugging</em></strong>  </p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\n\ntxt = \"\"\"0       2016-01-01 00:11:52\n1       2016-01-01 00:13:00\n2       2016-01-01 00:14:49\n3       2016-01-01 00:21:00\n4       2016-01-01 00:23:05\n5       2016-01-01 00:29:00\n6       2016-01-01 00:30:00\n7       2016-01-01 00:30:36\n8       2016-01-01 00:32:00\n9       2016-01-01 00:33:00\n10      2016-01-01 00:36:40\n11      2016-01-01 00:36:55\n12      2016-01-01 00:41:00\n13      2016-01-01 00:48:17\n14      2016-01-01 00:50:49\n15      2016-01-01 00:51:00\n16      2016-01-01 00:53:00\n17      2016-01-01 00:56:00\n18      2016-01-01 00:57:00\n19      2016-01-01 00:57:35\n20      2016-01-01 01:01:00\n21      2016-01-01 01:01:37\n22      2016-01-01 01:02:07\n23      2016-01-01 01:08:32\n24      2016-01-01 01:09:00\n25      2016-01-01 01:16:00\n26      2016-01-01 01:18:47\n27      2016-01-01 01:21:00\n28      2016-01-01 01:27:34\n29      2016-01-01 01:29:07\"\"\"\n\nseries = pd.read_csv(StringIO(txt),\n                     sep='\\s{2,}', header=None,\n                     index_col=0, squeeze=True,\n                     engine='python').rename_axis(None)\n\nseries = pd.to_datetime(series)\n\nseries.sub(series.min()).dt.total_seconds()\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 6130967, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0655f066b391922b3778f8ead204f6c4?s=128&d=identicon&r=PG&f=1", "display_name": "kwashington122", "link": "https://stackoverflow.com/users/6130967/kwashington122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1234, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491425870, "creation_date": 1491420012, "last_edit_date": 1491425610, "question_id": 43239866, "link": "https://stackoverflow.com/questions/43239866/value-error-time-series-data-can-not-convert-string-to-float", "title": "Value error: time series data can not convert string to float", "body": "<p>The below code is not working I am trying to use my timestamp data, aggregate it in 10 minute intervals and do time series analysis in pandas, I am getting a value error on the last command and I dont know how to remediate</p>\n\n<pre><code>0       2016-01-01 00:11:52\n1       2016-01-01 00:13:00\n2       2016-01-01 00:14:49\n3       2016-01-01 00:21:00\n4       2016-01-01 00:23:05\n5       2016-01-01 00:29:00\n6       2016-01-01 00:30:00\n7       2016-01-01 00:30:36\n8       2016-01-01 00:32:00\n9       2016-01-01 00:33:00\n10      2016-01-01 00:36:40\n11      2016-01-01 00:36:55\n12      2016-01-01 00:41:00\n13      2016-01-01 00:48:17\n14      2016-01-01 00:50:49\n15      2016-01-01 00:51:00\n16      2016-01-01 00:53:00\n17      2016-01-01 00:56:00\n18      2016-01-01 00:57:00\n19      2016-01-01 00:57:35\n20      2016-01-01 01:01:00\n21      2016-01-01 01:01:37\n22      2016-01-01 01:02:07\n23      2016-01-01 01:08:32\n24      2016-01-01 01:09:00\n25      2016-01-01 01:16:00\n26      2016-01-01 01:18:47\n27      2016-01-01 01:21:00\n28      2016-01-01 01:27:34\n29      2016-01-01 01:29:07\n               ...        \nvalues = series.values\nvalues = values.reshape((len(values), 1))\nscaler = MinMaxScaler(feature_range=(0, 1))\nscaler = scaler.fit(values)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7244282"}, "edited": false, "score": 0, "creation_date": 1491427063, "post_id": 43240582, "comment_id": 73553772, "body": "&lt;QuerySet [&lt;Articles: Articles object&gt;, &lt;Articles: Articles object&gt;, .... and I can&#39;t make:     random.shuffle(articles_list)"}], "tags": [], "owner": {"reputation": 63, "user_id": 4298013, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1064832732/picture?type=large", "display_name": "Omar Herrera", "link": "https://stackoverflow.com/users/4298013/omar-herrera"}, "is_accepted": false, "score": 0, "last_activity_date": 1491422497, "creation_date": 1491422497, "answer_id": 43240582, "question_id": 43239840, "link": "https://stackoverflow.com/questions/43239840/django-how-i-can-get-all-objects-to-the-list-from-db/43240582#43240582", "title": "Django how I can get all objects to the list from db?", "body": "<p>1) yes it is correct\n2) on the official docs says that list(Query object) should return a list with the results, is it not working?\n<a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/dev/ref/models/querysets/</a></p>\n\n<p>and just a suggestion i always declare the variables before sending to the response like this:</p>\n\n<pre><code>def article_theme(request, articleblock_id=2):\n    ArticleBlock_name = ArticleBlock.objects.get(id=articleblock_id)\n    articles_list = list(Articles.objects.filter(articles_articleblock_id=articleblock_id))\n    context = {\n        \"ArticleBlock_name\": ArticleBlock_name, \n        \"articles_list\":articles_list\n    }\n\n    return render_to_response('article_theme.html', context)\n</code></pre>\n\n<p>for better reading.\nNOTE: putting the variables in the context dict doesnt change the access names in the templates you still access those variables with {{ArticleBlock_name}}</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7244282"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 812, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491422497, "creation_date": 1491419899, "question_id": 43239840, "link": "https://stackoverflow.com/questions/43239840/django-how-i-can-get-all-objects-to-the-list-from-db", "title": "Django how I can get all objects to the list from db?", "body": "<p>I want to use a \"ArticleBlock\", and it must have some \"Articles\"</p>\n\n<p>I wrote next models</p>\n\n<pre><code>class ArticleBlock(models.Model):\n    class Meta:\n        db_table = \"articleblock\"\n    articleBlockName = models.CharField(max_length=50)\n\n\nclass Articles(models.Model):\n    class Meta:\n        db_table = \"articles\"\n    articles_titel = models.CharField(max_length=50)\n    articles_text = models.TextField()\n    articles_date = models.DateTimeField()\n    articles_main = models.ForeignKey(ArticleBlock)\n</code></pre>\n\n<p>The first question?\nIs it correct? if I want bind many articles to one some block?\nIn view.py I have next:</p>\n\n<pre><code>def article_theme(request, articleblock_id=2):\n    return render_to_response('article_theme.html', \n   {\"ArticleBlock_name\": ArticleBlock.objects.get(id=articleblock_id), \n   'articles_list':list(Articles.objects.filter\n   (articles_articleblock_id=articleblock_id))})\n</code></pre>\n\n<p>I want get a list() with articles, to sort random them.\nHow I can get the list from db?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491419986, "post_id": 43239821, "comment_id": 73549821, "body": "It looks like you want us to write some code for you. While many users are willing to produce code for a coder in distress, they usually only help when the poster has already tried to solve the problem on their own. A good way to demonstrate this effort is to include the code you&#39;ve written so far (forming a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), example input (if there is any), the expected output, and the output you actually get (output, tracebacks, etc.). The more detail you provide, the more answers you are likely to receive. Check the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491420021, "post_id": 43239821, "comment_id": 73549837, "body": "I am not sure how to write it @TigerhawkT3"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1491420084, "post_id": 43239821, "comment_id": 73549868, "body": "That seems to be the case in general, yes. I recommend learning some Python (with e.g. the <a href=\"https://docs.python.org/3.6/tutorial/index.html\" rel=\"nofollow noreferrer\">official Python tutorial</a>) rather than getting SO to write it for you via half a dozen questions per day."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1491420170, "post_id": 43239821, "comment_id": 73549918, "body": "Apply function <code>str()</code> to each of your values, and it will create a string representation suitable for passing to <code>write()</code>."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1491420241, "post_id": 43239821, "comment_id": 73549966, "body": "How is this different from <a href=\"http://stackoverflow.com/questions/43233717/writing-the-iterative-output-into-a-file-in-python\">your question a few hours ago</a>? It looks like you copy-pasted its answer into this question and are now asking for someone to write the next part."}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1491420248, "post_id": 43239930, "comment_id": 73549971, "body": "As stated in <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a>, please avoid answering unclear, overly-broad, typo, opinion-based, unreproducible, or duplicate questions. Write-my-code requests and low-effort homework questions are off-topic for <a href=\"https://stackoverflow.com\">Stack Overflow</a> and more suited to professional coding/tutoring services. Good questions adhere to <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, have research effort, and have the potential to be useful to future visitors. Answering inappropriate questions harms the site by making it more difficult to navigate and encouraging further such questions, which can drive away other users who volunteer their time and expertise."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491420668, "post_id": 43239930, "comment_id": 73550214, "body": "@Teja - This is far from the first time I&#39;ve seen you ask for code and then complain that it &quot;doesn&#39;t work&quot; in some vague way. You will get much better results if you actually try to gain some knowledge of Python so that you can adapt the generic code (that is intended to be helpful to future visitors, not just you) to your specific situation."}, {"owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "edited": false, "score": 0, "creation_date": 1491420905, "post_id": 43239930, "comment_id": 73550360, "body": "@flymousechiu It is working fine... But wondering how to print more than one variable..."}, {"owner": {"reputation": 55, "user_id": 2213236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8b2f209a6ccc59a75dd9ecd01468e?s=128&d=identicon&r=PG", "display_name": "flymousechiu", "link": "https://stackoverflow.com/users/2213236/flymousechiu"}, "edited": false, "score": 0, "creation_date": 1491421010, "post_id": 43239930, "comment_id": 73550421, "body": "read <a href=\"https://docs.python.org/3.4/library/string.html#formatstrings\" rel=\"nofollow noreferrer\">docs.python.org/3.4/library/string.html#formatstrings</a> about string formatting"}], "tags": [], "owner": {"reputation": 55, "user_id": 2213236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8b2f209a6ccc59a75dd9ecd01468e?s=128&d=identicon&r=PG", "display_name": "flymousechiu", "link": "https://stackoverflow.com/users/2213236/flymousechiu"}, "is_accepted": false, "score": -1, "last_activity_date": 1491420226, "creation_date": 1491420226, "answer_id": 43239930, "question_id": 43239821, "link": "https://stackoverflow.com/questions/43239821/writing-variables-into-a-file-iterating-through-for-loop/43239930#43239930", "title": "Writing variables into a file iterating through for loop", "body": "<p>for python-3.x, the preferred method is via using string.format() method.</p>\n\n<p>for example, </p>\n\n<pre><code>for i in inputm[1:]:  \n#print('\\n',repr(i)) \n if '::' in i[0] or ':' not in i[0]:   \n     outputfile.write('\\n {}This is not a valid order record.'.format(i[0].split(':')[0]))\n</code></pre>\n"}], "owner": {"reputation": 11798, "user_id": 1049893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f5d5ebb073cfa55b19168608f502584e?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/1049893/teja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1491420226, "creation_date": 1491419858, "question_id": 43239821, "link": "https://stackoverflow.com/questions/43239821/writing-variables-into-a-file-iterating-through-for-loop", "title": "Writing variables into a file iterating through for loop", "body": "<p>By iterating through a nested list(list of lists) I am reading each row from the file doing some computations and writing it into a file. But I would like to write a mix of both text and variable into the output file. Just wondering how can I do it in python. </p>\n\n<p><strong>Code:-</strong></p>\n\n<pre><code>for i in inputm[1:]:  \n    #print('\\n',repr(i)) \n     if '::' in i[0] or ':' not in i[0]:   \n         outputfile.write('\\n %s'%('This is not a valid order record.'))\n</code></pre>\n\n<p>Instead of printing 'This is not a valid record'. I would like to write a variable <code>i[0].split(':')[0]</code> and the above sentence together into the output file.</p>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 440, "user_id": 7406574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-HCDi5HoXGR0/AAAAAAAAAAI/AAAAAAAAAPc/2zCs49q5XfI/photo.jpg?sz=128", "display_name": "Max Paymar", "link": "https://stackoverflow.com/users/7406574/max-paymar"}, "edited": false, "score": 0, "creation_date": 1491420068, "post_id": 43239698, "comment_id": 73549861, "body": "If you do <code>print(resp.url)</code> what do you get? Also I&#39;d recommend using longer variable names... is <code>dat</code> supposed to mean <code>data</code>? Is one character worth confusing people? Same goes for <code>resp</code> --&gt; <code>response</code>"}], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 863489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e874d608c82595a5d17302d47c64ede?s=128&d=identicon&r=PG", "display_name": "elecay", "link": "https://stackoverflow.com/users/863489/elecay"}, "is_accepted": true, "score": 6, "last_activity_date": 1491423173, "creation_date": 1491423173, "answer_id": 43240776, "question_id": 43239698, "link": "https://stackoverflow.com/questions/43239698/502-error-using-requests-to-search-website-in-python/43240776#43240776", "title": "502 error using Requests to search website in Python", "body": "<p>Define a <code>User-Agent</code> header. Like this:</p>\n\n<pre><code>import requests\n\ndef main():\n    url = \"https://www.last10k.com/Search\"\n    dat = {'q':'goog'}\n    resp = requests.get(url, params=dat, headers={'User-Agent': 'Mozilla/5.0'})\n    print(resp.status_code)\n</code></pre>\n\n<p>Why of this requirement? <a href=\"https://meta.wikimedia.org/wiki/User-Agent_policy\" rel=\"noreferrer\">Wikimedia User-Agent policy</a></p>\n"}, {"tags": [], "owner": {"reputation": 4284, "user_id": 1025430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNcOr.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1025430/chris"}, "is_accepted": false, "score": 2, "last_activity_date": 1498810837, "creation_date": 1498810837, "answer_id": 44841861, "question_id": 43239698, "link": "https://stackoverflow.com/questions/43239698/502-error-using-requests-to-search-website-in-python/44841861#44841861", "title": "502 error using Requests to search website in Python", "body": "<p>I had this problem and found that a mix of looking at the content and trying the request with a browser helped me find the solution. Maybe it will help you, too, so here is what I did:</p>\n\n<p>My request was successful with a browser, then failed with python. The URLs were the same. So I used the debugger. You can also simply print stuff, but the debugger shows what all is to see and lets you explore what you otherwise have missed. And I found that the response content on the failed python-request was an error-message which googles to be a ruby-problem.</p>\n\n<p>So there was some different behavior on the remote-side, but what causes it? Adding a User-Agent-header, as suggested, was nice, but did not change anything. So I looked at the other headers and found that the Basic Authentication string looked completely different. </p>\n\n<p>My solution: I fed the python request with the wrong auth-data due to some reafactoring I made and the remote side was processing \"permission denied\" results somehow badly, which ended up in a 502 instead of a 403.</p>\n"}], "owner": {"reputation": 107, "user_id": 6132790, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003973485191/picture?type=large", "display_name": "Derek Zhang", "link": "https://stackoverflow.com/users/6132790/derek-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5705, "favorite_count": 1, "accepted_answer_id": 43240776, "answer_count": 2, "score": 4, "last_activity_date": 1498810837, "creation_date": 1491419384, "question_id": 43239698, "link": "https://stackoverflow.com/questions/43239698/502-error-using-requests-to-search-website-in-python", "title": "502 error using Requests to search website in Python", "body": "<p>Using a very basic program to search up a query on a website and print out the search results, why do I get a 502 error?</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport re\n\ndef main():\n    url = \"https://www.last10k.com/Search\"\n    dat = {'q':'goog'}\n    resp = requests.get(url, params=dat)\n    print(resp.content)\n</code></pre>\n"}, {"tags": ["python", "flask", "ibm-cloud"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": false, "score": 1, "last_activity_date": 1491420168, "last_edit_date": 1491420168, "creation_date": 1491419830, "answer_id": 43239814, "question_id": 43239697, "link": "https://stackoverflow.com/questions/43239697/open-flask-static-file-on-bluemix/43239814#43239814", "title": "Open Flask static file on Bluemix", "body": "<p>You're using a relative path, which is relative to the current working directory. In development, you're running from the app's directory. In production, the WSGI server is running the app, and was not launched in that directory. Build an absolute path instead. <a href=\"http://flask.pocoo.org/docs/0.12/api/#flask.Flask.static_folder\" rel=\"nofollow noreferrer\"><code>app.static_folder</code></a> is the path to the base static folder.</p>\n\n<pre><code>os.path.join(app.static_folder, 'images', 'image.jpg')\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5873366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-bzaCTO7KNJY/AAAAAAAAAAI/AAAAAAAAAD0/mAH7D5PkkeQ/photo.jpg?sz=128", "display_name": "Sebas Pinto", "link": "https://stackoverflow.com/users/5873366/sebas-pinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1491420168, "creation_date": 1491419384, "last_edit_date": 1491420134, "question_id": 43239697, "link": "https://stackoverflow.com/questions/43239697/open-flask-static-file-on-bluemix", "title": "Open Flask static file on Bluemix", "body": "<p>I'm trying to open an image in my Flask app's static folder with PIL. When I run locally, it works. When I deploy to Bluemix, it doesn't find the image.</p>\n\n<pre><code>from PIL import Image\njpg = Image.open('static/images/image.jpg')\n</code></pre>\n\n<p>I found it could be a problem with the os path, so I tried the following but it didn't fix the issue.</p>\n\n<pre><code>import os, sys\nfrom PIL import Image\njpg = Image.open(os.path.join(sys.path[0], 'static/images/image.jpg'))\n</code></pre>\n\n<p>How can I open a static file whether running locally or on Bluemix?</p>\n\n\n\n<pre><code>myproject/\n    static/\n        images/\n            image.jpg\n    myapp.py\n</code></pre>\n"}]