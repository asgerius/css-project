[{"tags": ["python", "nltk", "stemming", "lemmatization"], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 392975, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a62bcec9b5b35a3cab7c25a44016e0d4?s=128&d=identicon&r=PG", "display_name": "Eli", "link": "https://stackoverflow.com/users/392975/eli"}, "edited": false, "score": 0, "creation_date": 1460160056, "post_id": 36475993, "comment_id": 60628879, "body": "C&#39;mon, you know that&#39;s not what I mean."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 31114, "user_id": 392975, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a62bcec9b5b35a3cab7c25a44016e0d4?s=128&d=identicon&r=PG", "display_name": "Eli", "link": "https://stackoverflow.com/users/392975/eli"}, "edited": false, "score": 1, "creation_date": 1460178830, "post_id": 36475993, "comment_id": 60632169, "body": "It really depends on how your data looks like to find the best fit / best way to &quot;hack&quot; the existing lemmatizers/stemmers. Sharing a representative sample of your data would help improve the answer =)"}], "tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": false, "score": 0, "last_activity_date": 1460031578, "creation_date": 1460031578, "answer_id": 36475993, "question_id": 36464366, "link": "https://stackoverflow.com/questions/36464366/how-to-get-words-like-ologist-and-ology-to-stem-lemmatize-to-the-same-root/36475993#36475993", "title": "How to get words like *ologist and *ology to stem/lemmatize to the same root?", "body": "<p>Something like this?</p>\n\n<pre><code>&gt;&gt;&gt; s = 'cardiology'\n&gt;&gt;&gt; s = s[:-5] if s.endswith('ology') else s\n&gt;&gt;&gt; s = s[:-7] if s.endswith('ologist') else s\n&gt;&gt;&gt; s\n'cardi'\n&gt;&gt;&gt; s = 'cardiologist'\n&gt;&gt;&gt; s = s[:-5] if s.endswith('ology') else s\n&gt;&gt;&gt; s = s[:-7] if s.endswith('ologist') else s\n&gt;&gt;&gt; s\n'cardi'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 1286398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c4cf05c3ed59083994c6153647bd5ba?s=128&d=identicon&r=PG", "display_name": "Riyaz", "link": "https://stackoverflow.com/users/1286398/riyaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1460206529, "last_edit_date": 1460206529, "creation_date": 1460050096, "answer_id": 36483252, "question_id": 36464366, "link": "https://stackoverflow.com/questions/36464366/how-to-get-words-like-ologist-and-ology-to-stem-lemmatize-to-the-same-root/36483252#36483252", "title": "How to get words like *ologist and *ology to stem/lemmatize to the same root?", "body": "<p>Have you looked at Morfessor? It features a bunch of morph segmenting algorithms. Apparently, the kind of analysis that you are looking for is possible using this tool. Here is the link [1]: <a href=\"http://asr.aalto.fi/morfessordemo/\" rel=\"nofollow\">http://asr.aalto.fi/morfessordemo/</a></p>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 7716944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkue3.jpg?s=128&g=1", "display_name": "Roman Kishchenko", "link": "https://stackoverflow.com/users/7716944/roman-kishchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1570485988, "creation_date": 1570485988, "answer_id": 58277738, "question_id": 36464366, "link": "https://stackoverflow.com/questions/36464366/how-to-get-words-like-ologist-and-ology-to-stem-lemmatize-to-the-same-root/58277738#58277738", "title": "How to get words like *ologist and *ology to stem/lemmatize to the same root?", "body": "<p>The process of stemming/lemmatization assumes removing of inflectional suffixes only (i. e. remove <code>-s</code> suffix from the word <code>radiologists</code>), while you want to remove the derivational suffixes as well. </p>\n\n<p>Try <a href=\"https://www.linguarobot.io\" rel=\"nofollow noreferrer\">Lingua Robot</a>. It's capable of segmenting the words into morphemes. For example, the word <code>simplifications</code> is segmented into the base word <code>simple</code> (I assume this is what you want to retrieve) and derivational suffixes (<code>-ify</code>, <code>-ation</code> and <code>-s</code>). Your case is not that simple as according to the API <code>radiologist</code> consists of affixes only (<code>radio-</code> + <code>-logy</code> + <code>-ist</code>). Somehow, you will need to figure what affix to leave in such cases. I'm also not sure if you want to leave prefixes or not (<code>preprocess</code> \u2192 <code>process</code>). Besides it, you will need to take into account compound words as they contain several roots. </p>\n"}], "owner": {"reputation": 31114, "user_id": 392975, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a62bcec9b5b35a3cab7c25a44016e0d4?s=128&d=identicon&r=PG", "display_name": "Eli", "link": "https://stackoverflow.com/users/392975/eli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1570485988, "creation_date": 1459987086, "question_id": 36464366, "link": "https://stackoverflow.com/questions/36464366/how-to-get-words-like-ologist-and-ology-to-stem-lemmatize-to-the-same-root", "title": "How to get words like *ologist and *ology to stem/lemmatize to the same root?", "body": "<p>I've been playing with a bunch of stemmers and lemmatizers in <a href=\"http://www.nltk.org/\" rel=\"nofollow\">NLTK</a>, but none do what I want. I have a bunch of words like \"radiologist\", \"radiology\", \"cardiologist\", \"cardiology\", etc... where I'd like to have *ologist go to the same bucket as *ology. I've tried PorterStemmer, SnowballStemmer, and WordNet's Lemmatizer in Python, but nothing sends these to the same bucket. It's seems like stemming should accomplish this, and these aren't incredibly uncommon words. How would you go about achieving the desired result?</p>\n"}, {"tags": ["python", "matplotlib", "pyside"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 2, "creation_date": 1460647380, "post_id": 36464357, "comment_id": 60850854, "body": "You can not mix <code>PyQt</code> and <code>PySide</code> imports in the same process.  I suggest you import everything from the <code>matplotlib.backends.qt_compat</code> module where we shim over what the differences."}, {"owner": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "reply_to_user": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 1, "creation_date": 1460654829, "post_id": 36464357, "comment_id": 60855528, "body": "The code of pyside is automatically generated by pyside-uic so I need to remain somehow. Unless you&#39;re saying its not possible?"}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 1, "creation_date": 1461020534, "post_id": 36464357, "comment_id": 60999330, "body": "I had a similar problem - although there are some differences. Please check out this post on stackoverflow: <a href=\"http://stackoverflow.com/questions/36665850/matplotlib-animation-inside-your-own-pyqt4-gui/36669876#36669876\" title=\"matplotlib animation inside your own pyqt4 gui\">stackoverflow.com/questions/36665850/&hellip;</a> Hope it helps."}], "answers": [{"comments": [{"owner": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "edited": false, "score": 0, "creation_date": 1461191563, "post_id": 36674182, "comment_id": 61092766, "body": "To clarify: a widget needs to be put into a layout. In this case the wiedget is named mplvl and the vertical layout vLayout. After that the above code will work."}, {"owner": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "edited": false, "score": 0, "creation_date": 1461191716, "post_id": 36674182, "comment_id": 61092831, "body": "The only small problem is that the plot is cut off at the bottom a bit. Is there anything that can be done about it?"}, {"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "reply_to_user": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "edited": false, "score": 0, "creation_date": 1461231956, "post_id": 36674182, "comment_id": 61109476, "body": "What I advise you to do is the following: inside QtDesigner, add a first scroll area where you put a vertical layout (replace <code>mplvl</code>). Then add the plots inside this layout. The size problem on the vertical axis simply comes from your <code>self.mplvl.setGeometry(QtCore.QRect(150, 150, 251, 231))</code>, which is too small."}], "tags": [], "owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "is_accepted": true, "score": 8, "last_activity_date": 1460880888, "creation_date": 1460880888, "answer_id": 36674182, "question_id": 36464357, "link": "https://stackoverflow.com/questions/36464357/matplotlib-in-pyside-with-qt-designer-pyside/36674182#36674182", "title": "Matplotlib in Pyside with Qt designer (PySide)", "body": "<p>I'm not an expert on that matter so it might not be the cleanest way of doing this, but here is some working code to get you started:</p>\n\n<ul>\n<li>I think the easiest way to add widgets is via a <code>QxxxxLayout</code></li>\n<li>then I just made your <code>Plotter</code> inherit from <code>FigureCanvas</code></li>\n<li>and told <code>matplotlib</code> to work with <code>PySide</code></li>\n</ul>\n\n<p>ui.py:</p>\n\n<pre><code>from PySide import QtCore, QtGui\n\nclass Ui_Form(object):\n    def setupUi(self, Form):\n        Form.setObjectName(\"Form\")\n        Form.resize(533, 497)\n        self.mplvl = QtGui.QWidget(Form)\n        self.mplvl.setGeometry(QtCore.QRect(150, 150, 251, 231))\n        self.mplvl.setObjectName(\"mplvl\")\n        self.vLayout = QtGui.QVBoxLayout()\n        self.mplvl.setLayout(self.vLayout)\n        self.retranslateUi(Form)\n        QtCore.QMetaObject.connectSlotsByName(Form)\n\n    def retranslateUi(self, Form):\n        Form.setWindowTitle(QtGui.QApplication.translate(\"Form\", \"Form\", None, QtGui.QApplication.UnicodeUTF8))\n</code></pre>\n\n<p>For this you just have to add the canvas to <code>mplvl</code> in <code>QtDesigner</code></p>\n\n<p>main.py:</p>\n\n<pre><code>import matplotlib\nmatplotlib.use('Qt4Agg')\nmatplotlib.rcParams['backend.qt4'] = 'PySide'\nfrom matplotlib.backends.backend_qt4agg import (\n    FigureCanvasQTAgg as FigureCanvas,\n    NavigationToolbar2QT as NavigationToolbar)\nfrom matplotlib.figure import Figure\nfrom PySide import QtGui, QtCore\nimport random\n\nfrom weakref import proxy\nfrom ui import Ui_Form\n\n\nclass Plotter(FigureCanvas):\n    def __init__(self, parent):\n        ''' plot some random stuff '''\n        self.parent = proxy(parent)\n        # random data\n        data = [random.random() for i in range(10)]\n        fig = Figure()\n        super(Plotter,self).__init__(fig)\n        # create an axis\n        self.axes = fig.add_subplot(111)\n        # discards the old graph\n        self.axes.hold(False)\n        # plot data\n        self.axes.plot(data, '*-')\n\n    def binding_plotter_with_ui(self):\n        self.parent.vLayout.insertWidget(1, self)\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    Form = QtGui.QWidget()\n    ui = Ui_Form()\n    ui.setupUi(Form)\n    # plotter logic and binding needs to be added here\n    plotter = Plotter(ui)\n    plotter.binding_plotter_with_ui()\n    plotter2 = Plotter(ui)\n    plotter2.binding_plotter_with_ui()\n    Form.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Now what's left is probably to tweak the <code>FigureCanvas</code> to make it the right size and proportions, so you should be able to get what you want looking at <a href=\"http://matplotlib.org/examples/user_interfaces/embedding_in_qt4.html\" rel=\"noreferrer\">this example</a> or <a href=\"http://matplotlib.org/examples/user_interfaces/embedding_in_qt4_wtoolbar.html\" rel=\"noreferrer\">the other</a>.</p>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "edited": false, "score": 1, "creation_date": 1461155153, "post_id": 36736223, "comment_id": 61068677, "body": "That&#39;s definitely a step in the right direction. Only problem I have now is that self.setParent(parent) gives an error: TypeError: arguments did not match any overloaded call:   QWidget.setParent(QWidget): argument 1 has unexpected type &#39;PySide.QtGui.QWidget&#39;   QWidget.setParent(QWidget, Qt.WindowFlags): argument 1 has unexpected type &#39;PySide.QtGui.QWidget&#39;"}, {"owner": {"reputation": 2998, "user_id": 2354344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/laaX5.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/2354344/rob"}, "reply_to_user": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "edited": false, "score": 1, "creation_date": 1461156596, "post_id": 36736223, "comment_id": 61069778, "body": "Make sure you only import from PySide and nothing from PyQt4. Probably your matplotlib uses PyQt4 by default. The first lines of your script set the correct backend in matplotlib, as in the answer by Silmathoron."}, {"owner": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "edited": false, "score": 0, "creation_date": 1461157710, "post_id": 36736223, "comment_id": 61070738, "body": "I have now edited the original question to better show the current status of things"}], "tags": [], "owner": {"reputation": 2998, "user_id": 2354344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/laaX5.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/2354344/rob"}, "is_accepted": false, "score": 3, "last_activity_date": 1461135868, "creation_date": 1461135868, "answer_id": 36736223, "question_id": 36464357, "link": "https://stackoverflow.com/questions/36464357/matplotlib-in-pyside-with-qt-designer-pyside/36736223#36736223", "title": "Matplotlib in Pyside with Qt designer (PySide)", "body": "<p>Have a look at the matplotlib example of embedding in QT4: <a href=\"http://matplotlib.org/examples/user_interfaces/embedding_in_qt4.html\" rel=\"nofollow\">http://matplotlib.org/examples/user_interfaces/embedding_in_qt4.html</a></p>\n\n<p>Here they define a couple of classes implementing a matplotlib widget in a QT4 application, e.g. the class <code>MyStaticMplCanvas</code>. The trick to use this class inside QT Designer is to use a standard QWidget, right-click it and select <code>Promote to ...</code> Fill in the class name <code>MyStaticMplCanvas</code> under <code>Promoted class name</code>, and the filename where this class is found under <code>header file</code> (the extention .h is added, but ignored in the python code). Click <code>Add</code> and <code>Promote</code>.</p>\n\n<p>Now after compilation by uic the python code should look similar to:</p>\n\n<pre><code>from PySide import QtCore, QtGui\nclass Ui_Form(object):\n    def setupUi(self, Form):\n        ...\n        self.mplvl = MyStaticMplCanvas(Form)\n        ...\n\nfrom mystaticmplcanvas import MyStaticMplCanvas\n</code></pre>\n"}], "owner": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2081, "favorite_count": 1, "accepted_answer_id": 36674182, "answer_count": 2, "score": 9, "last_activity_date": 1461157458, "creation_date": 1459987044, "last_edit_date": 1461157458, "question_id": 36464357, "link": "https://stackoverflow.com/questions/36464357/matplotlib-in-pyside-with-qt-designer-pyside", "title": "Matplotlib in Pyside with Qt designer (PySide)", "body": "<p>I have been looking for a working example how to embed a matplotlib plot in pyside that is created with the QT designer while keeping the logic in a separate file. I know that there are numerous examples on the web but none of them actually uses the QT designer and then creates a separate file to add the logic where the matplitlib plot is added to a widget. I found an example that 'almost' works <a href=\"http://blog.rcnelson.com/building-a-matplotlib-gui-with-qt-designer-part-1/\" rel=\"nofollow\">http://blog.rcnelson.com/building-a-matplotlib-gui-with-qt-designer-part-1/</a> but but in my version it's not possible to \"Change the layoutName property from \u201cverticalLayout\u201d to \u201cmplvl\u201d\".</p>\n\n<p>So I have the following specific questions:\nI'm not clear into what item that plot can be embedded to in Pyside Qt designer. Is it a simple \"widget\" (as there is no matplotlib widget available in pyside). If so, how can I then add the plot to that widget? Or do I have to create a 'FigureCanvas' with Qt Designer? Is this possible at all? If so, how?</p>\n\n<p>Here is the simplest possible design I can make with the Pyside Qt designer in embedding a widget (is this correct?). How can I now add a matplotlib plot on top of it?</p>\n\n<p>As suggested in one of the answers I have now promoted the Qwidget to MyStaticMplCanvas and edited the name of Qwidget to mplvl.</p>\n\n<p>Automatically generated file with Pyside Qt designer and compiled with \npyside-uic ui.ui -o ui.py -x</p>\n\n<p>ui.py looks like this:</p>\n\n<pre><code># -*- coding: utf-8 -*-\n\n# Form implementation generated from reading ui file 'gui.ui'\n#\n# Created: Wed Apr 20 14:00:02 2016\n#      by: pyside-uic 0.2.15 running on PySide 1.2.2\n#\n# WARNING! All changes made in this file will be lost!\n\nfrom PySide import QtCore, QtGui\n\nclass Ui_MainWindow(object):\n    def setupUi(self, MainWindow):\n        MainWindow.setObjectName(\"MainWindow\")\n        MainWindow.resize(444, 530)\n        self.centralwidget = QtGui.QWidget(MainWindow)\n        self.centralwidget.setObjectName(\"centralwidget\")\n        self.mplvl = MyStaticMplCanvas(self.centralwidget)\n        self.mplvl.setGeometry(QtCore.QRect(120, 190, 221, 161))\n        self.mplvl.setObjectName(\"mplvl\")\n        MainWindow.setCentralWidget(self.centralwidget)\n        self.menubar = QtGui.QMenuBar(MainWindow)\n        self.menubar.setGeometry(QtCore.QRect(0, 0, 444, 21))\n        self.menubar.setObjectName(\"menubar\")\n        MainWindow.setMenuBar(self.menubar)\n        self.statusbar = QtGui.QStatusBar(MainWindow)\n        self.statusbar.setObjectName(\"statusbar\")\n        MainWindow.setStatusBar(self.statusbar)\n\n        self.retranslateUi(MainWindow)\n        QtCore.QMetaObject.connectSlotsByName(MainWindow)\n\n    def retranslateUi(self, MainWindow):\n        MainWindow.setWindowTitle(QtGui.QApplication.translate(\"MainWindow\", \"MainWindow\", None, QtGui.QApplication.UnicodeUTF8))\n\nfrom mystaticmplcanvas import MyStaticMplCanvas\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    MainWindow = QtGui.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>how can I now add a plot into the mplvl object from a separate .py file?</p>\n"}, {"tags": ["python", "json", "serialization", "pickle"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1459987356, "post_id": 36464326, "comment_id": 60540439, "body": "Size limit? The pickle protocol and implementations have some limitations, but I don&#39;t think there are any size limitations near the 300 MB mark. Can you give some simple, runnable example code that constructs a huge object, pickles it, and unpickles it, such that the unpickled result doesn&#39;t match the original object?"}, {"owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "reply_to_user": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "edited": false, "score": 0, "creation_date": 1460497211, "post_id": 36464326, "comment_id": 60767981, "body": "@lordingtar yes but it is unable to handle some custom data types."}], "answers": [{"comments": [{"owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "edited": false, "score": 0, "creation_date": 1459999029, "post_id": 36464945, "comment_id": 60543478, "body": "Thanks, I&#39;m trying to avoid the overhead of implementing a whole API, but it may be necessary. And why this over <a href=\"https://capnproto.org/\" rel=\"nofollow noreferrer\">Cap&#39;n Proto</a>?"}, {"owner": {"reputation": 808, "user_id": 3245114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b550b8e747a12bcce2387d8d1f6d8e9?s=128&d=identicon&r=PG", "display_name": "Jordan Shurmer", "link": "https://stackoverflow.com/users/3245114/jordan-shurmer"}, "reply_to_user": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "edited": false, "score": 0, "creation_date": 1460034400, "post_id": 36464945, "comment_id": 60564266, "body": "Mostly because I have not heard of Cap&#39;n Proto yet :)"}], "tags": [], "owner": {"reputation": 808, "user_id": 3245114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b550b8e747a12bcce2387d8d1f6d8e9?s=128&d=identicon&r=PG", "display_name": "Jordan Shurmer", "link": "https://stackoverflow.com/users/3245114/jordan-shurmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1459991166, "creation_date": 1459991166, "answer_id": 36464945, "question_id": 36464326, "link": "https://stackoverflow.com/questions/36464326/need-a-robust-efficient-python-serializer/36464945#36464945", "title": "Need a robust, efficient Python serializer", "body": "<p>Depending on <strong>why</strong> you're serializing I would highly recommend looking at the <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"nofollow\">Protocol Buffer API</a>.</p>\n\n<blockquote>\n  <p>Protocol buffers are Google's language-neutral, platform-neutral, extensible mechanism for serializing structured data \u2013 think XML, but smaller, faster, and simpler. You define how you want your data to be structured once, then you can use special generated source code to easily write and read your structured data to and from a variety of data streams and using a variety of languages.</p>\n</blockquote>\n\n<p>If that sounds like it fits what your intentions are, I would suggest taking the time to read through all their documentation.</p>\n\n<p>There's even a <a href=\"https://developers.google.com/protocol-buffers/docs/pythontutorial\" rel=\"nofollow\">Python specific tutorial</a></p>\n"}], "owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459991166, "creation_date": 1459986828, "question_id": 36464326, "link": "https://stackoverflow.com/questions/36464326/need-a-robust-efficient-python-serializer", "title": "Need a robust, efficient Python serializer", "body": "<p>I'm trying to serialize a Python object that has a mix of data types -- native Python, numpy, subclasses of built-in Python. Pickle, and cPickle, are robust enough to handle all the data types, but I reach the size limit (>300MB); I know this because upon loading the pickled object I can see not the full object was serialized. Looking for a more efficient alternative to cPickle I've tried the following, but nothing works for the data types: json, simplejson, custom subclass of json to convert numpy types to native Python, marshal (doesn't handle subclasses of built-in types, like <code>defaultdict</code>), MessagePack. Do you have any suggestions? Thanks in advance!</p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 0, "creation_date": 1459986827, "post_id": 36464283, "comment_id": 60540281, "body": "Is the key integer 1001 or string &quot;1001&quot;?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6066621"}, "reply_to_user": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1459986830, "post_id": 36464283, "comment_id": 60540283, "body": "@Rogalski Yes I&#39;m trying to remove a key from the dictionary self._book."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6066621"}, "reply_to_user": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 0, "creation_date": 1459986861, "post_id": 36464283, "comment_id": 60540297, "body": "@timrau It&#39;s an integer"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6066621"}, "edited": false, "score": 0, "creation_date": 1459987141, "post_id": 36464318, "comment_id": 60540374, "body": "Thanks you user2357112, your second suggestion using del worked. As a side note, your first suggestion didn&#39;t work for me: when I tried it there were no errors, however 1001 was still in the dictionary."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459987198, "post_id": 36464318, "comment_id": 60540390, "body": "@AshutoshMishra: Sounds like you&#39;ve got more bugs somewhere."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1459986792, "creation_date": 1459986792, "answer_id": 36464318, "question_id": 36464283, "link": "https://stackoverflow.com/questions/36464283/i-keep-getting-a-keyerror-when-i-use-a-variable-as-key-in-dictionary-popke/36464318#36464318", "title": "I keep getting a KeyError when I use a variable as [key] in [dictionary].pop([key])", "body": "<p><code>input</code> on Python 3 returns a string, and <code>'1001' != 1001</code>. If your key is the int <code>1001</code>, you will need to convert the input to an int:</p>\n\n<pre><code>self._answer= int(input(\"Which appointment would you like to delete?\"))\n</code></pre>\n\n<p>As an aside, the name <code>self._useless</code> indicates that you might not care about the result of the <code>pop</code> operation. If you just want to remove the entry from the dict, you can use <code>del</code>:</p>\n\n<pre><code>del self._book[self._answer]\n</code></pre>\n\n<p>or you could ignore the return value of <code>pop</code> and not assign it to anything:</p>\n\n<pre><code>self._book.pop(self._answer)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6066621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 0, "closed_date": 1567369877, "accepted_answer_id": 36464318, "answer_count": 1, "score": 1, "last_activity_date": 1567369872, "creation_date": 1459986595, "last_edit_date": 1567369870, "question_id": 36464283, "link": "https://stackoverflow.com/questions/36464283/i-keep-getting-a-keyerror-when-i-use-a-variable-as-key-in-dictionary-popke", "closed_reason": "Duplicate", "title": "I keep getting a KeyError when I use a variable as [key] in [dictionary].pop([key])", "body": "<p>I don't get KeyError when I use a constant (whose value is the same as the variable) for [key].</p>\n\n<p>For example: </p>\n\n<pre><code>self._answer= input(\"Which appointment would you like to delete?\")\nself._useless= self._book.pop(self._answer)\n</code></pre>\n\n<p>Gives a key error when self._answer= 1001, however:</p>\n\n<p><code>self._useless= self._book.pop(1001)</code></p>\n\n<p>works as desired. Any ideas how I can resolve this issue?</p>\n\n<p>Edit: As @user2357112 suggested below, the following piece of code worked: <code>def deleteAppointment(self):\n        self._answer= int(input(\"Which appointment would you like to delete?\"))\n        del self._book[self._answer]</code></p>\n\n<p><strong>However</strong>, after redoing  the entire project I no longer ran into the problem above (i.e. using [dictionary].pop([key]) no longer produced a KeyError). <strong>Therefore, if you are getting this error there is likely a bug in your code.</strong></p>\n"}, {"tags": ["python", "numpy", "matrix", "concatenation"], "comments": [{"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459987424, "post_id": 36464191, "comment_id": 60540449, "body": "Could you show your existing code? It would help because it would show what result you are trying to achieve and what you don&#39;t like about the result you are getting."}, {"owner": {"reputation": 85, "user_id": 5916075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837d4cf25487e00088eeab6a5987701d?s=128&d=identicon&r=PG&f=1", "display_name": "pythonFriend", "link": "https://stackoverflow.com/users/5916075/pythonfriend"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459989759, "post_id": 36464191, "comment_id": 60541038, "body": "There is nothing special about my code. I just have a loop which uses vstack to stack my list of np.arrays (H1,H2,H3). Then I have to manually vstack my np.zero-array with same shape as one of the H to create my first column. Then I have to manually vstack EMPTY H1 H2 H3 EMPTY for the second column, and same for the third. In the end I use a loop to hstack all of my created columns. The problem is the whole stacking part, which I can&#39;t do dynamically. My final toeplitz of toeplitz matrix constists of 25 diffents Hs and the number of EMPTY arrays will be 200+ for each column."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5916075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837d4cf25487e00088eeab6a5987701d?s=128&d=identicon&r=PG&f=1", "display_name": "pythonFriend", "link": "https://stackoverflow.com/users/5916075/pythonfriend"}, "edited": false, "score": 0, "creation_date": 1460024464, "post_id": 36466365, "comment_id": 60556806, "body": "That&#39;s actually what i wanted, but I struggle to understand to parameter which decides the final block toeplitz dimension. In the end it should have 256*256 dimensions. But if i change nh or nrows, I get out of bounds errors."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 85, "user_id": 5916075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837d4cf25487e00088eeab6a5987701d?s=128&d=identicon&r=PG&f=1", "display_name": "pythonFriend", "link": "https://stackoverflow.com/users/5916075/pythonfriend"}, "edited": false, "score": 0, "creation_date": 1460055667, "post_id": 36466365, "comment_id": 60579339, "body": "<i>&quot;...if i change nh or nrows, I get out of bounds errors.&quot;</i>  <code>nh</code> and <code>nrows</code> are determined by the number of input arrays.  As you can see in the code, <code>nh</code> is simply <code>len(inputs)</code> (i.e. the number of input arrays), and <code>nrows</code> is <code>2*nh - 1</code>.  In the code that I wrote, you can&#39;t change these independently.  The implementation is based on my interpretation of the question.  If you need something more flexible, edit the question and explain."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 5, "last_activity_date": 1460001654, "last_edit_date": 1460001654, "creation_date": 1460001005, "answer_id": 36466365, "question_id": 36464191, "link": "https://stackoverflow.com/questions/36464191/toeplitz-matrix-of-toeplitz-matrix/36466365#36466365", "title": "Toeplitz matrix of toeplitz matrix", "body": "<p>Instead of nested calls to <code>vstack</code> and <code>hstack</code>, it will be more efficient to preallocate the final array, and then use a nested loop to fill in the array.  You can initially use a higher dimensional array to keep the code clean.</p>\n\n<p>For example, this script</p>\n\n<pre><code>import numpy as np\n\nH1 = np.array([[11, 11], [11, 11]])\nH2 = np.array([[22, 22], [22, 22]])\nH3 = np.array([[33, 33], [33, 33]])\n\ninputs = (H1, H2, H3)\n\n# This assumes all the arrays in `inputs` have the same shape,\n# and that the data type of all the arrays is the same as H1.dtype.\nnh = len(inputs)\nnrows = 2*nh - 1\nm, n = H1.shape\n# T is a 4D array.  For a given i and j, T[i, :, j, :] is a 2D array\n# with shape (m, n).  T can be intepreted as a 2D array of 2D arrays. \nT = np.zeros((nrows, m, nh, n), dtype=H1.dtype)\nfor i, H in enumerate(inputs):\n    for j in range(nh):\n        T[i + j, :, j, :] = H\n\n# Partially flatten the 4D array to a 2D array that has the desired\n# block structure.\nT.shape = (nrows*m, nh*n)\n\nprint(T)\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>[[11 11  0  0  0  0]\n [11 11  0  0  0  0]\n [22 22 11 11  0  0]\n [22 22 11 11  0  0]\n [33 33 22 22 11 11]\n [33 33 22 22 11 11]\n [ 0  0 33 33 22 22]\n [ 0  0 33 33 22 22]\n [ 0  0  0  0 33 33]\n [ 0  0  0  0 33 33]]\n</code></pre>\n\n<p>(Note that the result is not a Toeplitz matrix; it is a <a href=\"https://en.wikipedia.org/wiki/Block_matrix#Block_Toeplitz_matrices\" rel=\"noreferrer\">block Toeplitz matrix</a>.)</p>\n"}, {"tags": [], "owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "is_accepted": false, "score": 0, "last_activity_date": 1552570605, "creation_date": 1552570605, "answer_id": 55163955, "question_id": 36464191, "link": "https://stackoverflow.com/questions/36464191/toeplitz-matrix-of-toeplitz-matrix/55163955#55163955", "title": "Toeplitz matrix of toeplitz matrix", "body": "<p>Here's an alternative approach, for anyone interested in this problem</p>\n\n<pre><code>from pylab import *\nimport scipy.linalg\n\nH1 = array([[11, 11], [11, 11]])\nH2 = array([[22, 22], [22, 22]])\nH3 = array([[33, 33], [33, 33]])\n\n# Setup blocks \nt = array([zeros_like(H1), H1, H2, H3])\n# Create index to each block, using toeplitz\nidx = scipy.linalg.toeplitz(r_[1, 2, 3, zeros(2)], r_[1, zeros(2)]).astype(int)\n# Index into blocks, transpose and reshape to get re-ordered array\n#  copy is used to ensure memory is nicely ordered\nT = t[idx].transpose(0, 2, 1, 3).reshape(10, 6).copy()\n</code></pre>\n\n<p>Most of the time is spent in <code>scipy.linalg.toeplitz</code>, making it slower than filling in memory in an array for the small matrices used here, so I'd recommend profiling before using this approach.</p>\n"}], "owner": {"reputation": 85, "user_id": 5916075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837d4cf25487e00088eeab6a5987701d?s=128&d=identicon&r=PG&f=1", "display_name": "pythonFriend", "link": "https://stackoverflow.com/users/5916075/pythonfriend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 1, "accepted_answer_id": 36466365, "answer_count": 2, "score": 4, "last_activity_date": 1552570605, "creation_date": 1459985970, "question_id": 36464191, "link": "https://stackoverflow.com/questions/36464191/toeplitz-matrix-of-toeplitz-matrix", "title": "Toeplitz matrix of toeplitz matrix", "body": "<p>I want to create a toeplitz matrix of toeplitz matrix.\nH1, H2 and H3 are toeplitz matrices already. My result should look like that:\n<code>\nH1 0  0\nH2 H1 0\nH3 H2 H1\n0  H3 H2\n0  0  H3</code></p>\n\n<p>The existing toeplitz-function only accepts vector, so I can't use it for matrix. Currently I'm using <code>vstack</code> to create the first column, then second column etc. and then I use <code>hstack</code>to merge all columns. This takes a lot of effort, since I have to specifically add <code>np.zeros</code> matrices at certain places. I can't think of a better way to concatenate numpy arrays, since there are only a few functions for that and none of them really fits my problem. </p>\n"}, {"tags": ["python", "sympy", "simplify", "polynomials"], "answers": [{"tags": [], "owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "is_accepted": true, "score": 3, "last_activity_date": 1459990987, "last_edit_date": 1459990987, "creation_date": 1459990556, "answer_id": 36464858, "question_id": 36464184, "link": "https://stackoverflow.com/questions/36464184/sympy-simplify-logic/36464858#36464858", "title": "Sympy simplify logic", "body": "<p>There is no bug. If you simplify the last three expressions, you'll see they all cancel out.</p>\n\n<pre><code>&gt;&gt;&gt; print(fx - p2_simplified - tn_shifted)\n0.25*x**3 - 1.5*x**2 + 3.0*x - 0.25*(x - 2)**3 - 2.0\n&gt;&gt;&gt; print((fx - p2_simplified - tn_shifted).simplify())\n0\n</code></pre>\n\n<p>Once you force that <code>(x - 2)**3</code> term to expand, it all works out. Why does this happen though? Initially, you have</p>\n\n<pre><code>&gt;&gt;&gt; fx\nx**3 - 2*x**2 + x + 1\n&gt;&gt;&gt; tn_shifted\n-0.75*x + 0.25*(x - 2)**3 + 1.5\n&gt;&gt;&gt; p2_ethalon\nx**3 - 2*x**2 + 1.75*x - 0.25*(x - 2)**3 - 0.5\n</code></pre>\n\n<p>So, naturally,</p>\n\n<pre><code>&gt;&gt;&gt; p2_ethalon + tn_shifted\nx**3 - 2*x**2 + 1.0*x + 1.0\n</code></pre>\n\n<p>When you subtract that from <code>fx</code>, it causes everything to cancel out nicely. However, for <code>p2_simplified</code>, you ask it to simplify <code>p2_ethalon</code> in isolation, which returns</p>\n\n<pre><code>&gt;&gt;&gt; p2_simplified\n0.75*x**3 - 0.5*x**2 - 1.25*x + 1.5\n</code></pre>\n\n<p>The problem here is that when you add this to <code>tn_shifted</code>, sympy doesn't realise that by expanding the cubic from <code>tn_shifted</code> it would allow everything to simplify even more, so they stay in limbo as a more complex expression.</p>\n\n<pre><code>&gt;&gt;&gt; p2_simplified + tn_shifted\n0.75*x**3 - 0.5*x**2 - 2.0*x + 0.25*(x - 2)**3 + 3.0\n</code></pre>\n\n<p>However, if you were to expand the cubic from <code>tn_shifted</code>, the above would simplify to <code>fx</code>.</p>\n\n<pre><code>&gt;&gt;&gt; tn_expanded = tn_shifted.expand()\n&gt;&gt;&gt; p2_simplified + tn_expanded\n1.0*x**3 - 2.0*x**2 + 1.0*x + 1.0\n</code></pre>\n\n<p>Bottom line, sympy doesn't aggressively simplify an expression every time a new term is added, multiplied, subtracted, etc. And simplifying a part of an expression in isolation may prevent sympy later on to see a bigger pattern which would lead to a more global simplification.</p>\n\n<p>I've had a similar experience with Maple a few of times, where, in order to bring a formula to the exact form I wanted, I had to nest functions like simplify(collect(expand(expr))).</p>\n"}], "owner": {"reputation": 13, "user_id": 6169440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae12ee19e11d5b6f94319bd0e0f53d23?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine Belev", "link": "https://stackoverflow.com/users/6169440/constantine-belev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 36464858, "answer_count": 1, "score": 1, "last_activity_date": 1459990987, "creation_date": 1459985936, "last_edit_date": 1459990600, "question_id": 36464184, "link": "https://stackoverflow.com/questions/36464184/sympy-simplify-logic", "title": "Sympy simplify logic", "body": "<p>I've recently start use Sympy, and from very beginning it behaves strange from my viewpoint.</p>\n\n<p>Consider two polynomials, fx and tn_shifted of one variable. I subtract one from another to get polynom p2. Then I perform simplify of it, and get a completely different expression, as shown below.</p>\n\n<pre><code>import sympy as spy\nfrom sympy import Symbol\n\nx = Symbol('x')\na, b = 1, 3\nn = 3\ntn = lambda x: x**3 - 3*x\nfx = spy.simplify(x**3 - 2*x**2 + x + 1)\n\ntn_shifted = (b - a)**n / (2**(2*n - 1)) * tn((2*x - (b + a)) / (b - a))\ntn_shifted = spy.simplify(tn_shifted)\n\np2_ethalon = fx - tn_shifted\nprint(fx - p2_ethalon - tn_shifted)\n\np2_simplified = spy.simplify(fx - tn_shifted)\nprint(fx - p2_simplified - tn_shifted)\n\np2_expanded = spy.expand(fx - tn_shifted)\nprint(fx - p2_expanded - tn_shifted)\n\nprint(p2_ethalon - p2_simplified)\n</code></pre>\n\n<p>Here is an output:</p>\n\n<pre><code>0\n0.25*x**3 - 1.5*x**2 + 3.0*x - 0.25*(x - 2)**3 - 2.0\n0.25*x**3 - 1.5*x**2 + 3.0*x - 0.25*(x - 2)**3 - 2.0\n0.25*x**3 - 1.5*x**2 + 3.0*x - 0.25*(x - 2)**3 - 2.0\n</code></pre>\n\n<p>Sympy comes with anaconda for python 3.5 under OS X Yosemite\nHere is <code>pip show sympy</code> info</p>\n\n<pre><code>Name: sympy\nVersion: 0.7.6.1\nSummary: Computer algebra system (CAS) in Python\nHome-page: http://sympy.org\nAuthor: SymPy development team\nAuthor-email: sympy@googlegroups.com\nLicense: BSD\nLocation: /Users/cnst/anaconda/lib/python3.5/site-packages\n</code></pre>\n\n<p>So, is there a bug or Sympy has some nontrivial logic when it simplifies expression?</p>\n"}, {"tags": ["python", "string", "python-2.7", "punctuation"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 2, "creation_date": 1459986529, "post_id": 36464160, "comment_id": 60540198, "body": "Did you read the <a href=\"https://docs.python.org/2/library/string.html#string.maketrans\" rel=\"nofollow noreferrer\">docs</a>?"}, {"owner": {"reputation": 1776, "user_id": 3113501, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/defc8f3b2a6827502b7099332c4b8c3e?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/3113501/lars"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459986579, "post_id": 36464160, "comment_id": 60540212, "body": "yes, but how does that big mess from maketrans help us get rid of punctuation?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1459986892, "post_id": 36464160, "comment_id": 60540309, "body": "@lars: It provides a table to feed the <code>translate()</code> method that doesn&#39;t do anything (so you can pass the method&#39;s second argument and have it only remove characters)."}], "answers": [{"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1459986806, "post_id": 36464292, "comment_id": 60540276, "body": "In Python version 2.6+, you can just use <code>None</code> for the <i>table</i> argument and avoid having the need to create the identity translation table."}], "tags": [], "owner": {"reputation": 1563, "user_id": 1261507, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SIc7J.png?s=128&g=1", "display_name": "Philipp Braun", "link": "https://stackoverflow.com/users/1261507/philipp-braun"}, "is_accepted": false, "score": 0, "last_activity_date": 1459986951, "last_edit_date": 1459986951, "creation_date": 1459986632, "answer_id": 36464292, "question_id": 36464160, "link": "https://stackoverflow.com/questions/36464160/what-does-python-string-maketrans/36464292#36464292", "title": "What does Python string.maketrans(&quot;&quot;,&quot;&quot;)", "body": "<p><code>string.maketrans(intab, outtab)</code>returns a translation table that maps each character in the intabstring into the character at the same position in the outtab string.</p>\n\n<pre><code>tran_table = string.maketrans(intab, outtab)\nprint myStr.translate(tran_table)\n</code></pre>\n\n<p>The code above will then translate <code>myStr</code> using your created table. In your case the table generates all characters because you do not specify anything.</p>\n"}, {"tags": [], "owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "is_accepted": true, "score": 8, "last_activity_date": 1459988121, "last_edit_date": 1459988121, "creation_date": 1459987003, "answer_id": 36464351, "question_id": 36464160, "link": "https://stackoverflow.com/questions/36464160/what-does-python-string-maketrans/36464351#36464351", "title": "What does Python string.maketrans(&quot;&quot;,&quot;&quot;)", "body": "<p>I'll take some liberties, since Python 2 muddles the line being strings and bytes. There are 256 bytes, ranging from 0 to 255. You can get their byte representation by using <code>chr()</code>. So, all the bytes from 0 to 255 look like this</p>\n\n<pre><code>&gt;&gt;&gt; ''.join(map(chr, range(256)))\n'\\x00\\x01\\x02\\x03\\x04\\x05\\x06\\x07\\x08\\t\\n\\x0b\\x0c\\r\\x0e\\x0f\\x10\\x11\\x12\\x13\\\nx14\\x15\\x16\\x17\\x18\\x19\\x1a\\x1b\\x1c\\x1d\\x1e\\x1f !\"#$%&amp;\\'()*+,-./0123456789:;\n&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\\x7f\\x80\n\\x81\\x82\\x83\\x84\\x85\\x86\\x87\\x88\\x89\\x8a\\x8b\\x8c\\x8d\\x8e\\x8f\\x90\\x91\\x92\\x93\n\\x94\\x95\\x96\\x97\\x98\\x99\\x9a\\x9b\\x9c\\x9d\\x9e\\x9f\\xa0\\xa1\\xa2\\xa3\\xa4\\xa5\\xa6\n\\xa7\\xa8\\xa9\\xaa\\xab\\xac\\xad\\xae\\xaf\\xb0\\xb1\\xb2\\xb3\\xb4\\xb5\\xb6\\xb7\\xb8\\xb9\n\\xba\\xbb\\xbc\\xbd\\xbe\\xbf\\xc0\\xc1\\xc2\\xc3\\xc4\\xc5\\xc6\\xc7\\xc8\\xc9\\xca\\xcb\\xcc\n\\xcd\\xce\\xcf\\xd0\\xd1\\xd2\\xd3\\xd4\\xd5\\xd6\\xd7\\xd8\\xd9\\xda\\xdb\\xdc\\xdd\\xde\\xdf\n\\xe0\\xe1\\xe2\\xe3\\xe4\\xe5\\xe6\\xe7\\xe8\\xe9\\xea\\xeb\\xec\\xed\\xee\\xef\\xf0\\xf1\\xf2\n\\xf3\\xf4\\xf5\\xf6\\xf7\\xf8\\xf9\\xfa\\xfb\\xfc\\xfd\\xfe\\xff'\n</code></pre>\n\n<p><a href=\"https://docs.python.org/2/library/string.html#string.maketrans\" rel=\"noreferrer\"><code>string.maketrans(from, to)</code></a> creates a string of 256 characters, where the characters in <code>from</code> will be replaced by <code>to</code>. For example, <code>string.maketrans('ab01', 'AB89')</code> will return the string from above, but <code>a</code> will be replaced by <code>A</code>, <code>b</code> by <code>B</code>, <code>0</code> by <code>8</code> and <code>1</code> by <code>9</code>.</p>\n\n<pre><code>&gt;&gt;&gt; string.maketrans('ab01', 'AB89')\n'\\x00\\x01\\x02\\x03\\x04\\x05\\x06\\x07\\x08\\t\\n\\x0b\\x0c\\r\\x0e\\x0f\\x10\\x11\\x12\\x13\\\nx14\\x15\\x16\\x17\\x18\\x19\\x1a\\x1b\\x1c\\x1d\\x1e\\x1f !\"#$%&amp;\\'()*+,-./8923456789:;\n&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`ABcdefghijklmnopqrstuvwxyz{|}~\\x7f\\x80\n\\x81\\x82\\x83\\x84\\x85\\x86\\x87\\x88\\x89\\x8a\\x8b\\x8c\\x8d\\x8e\\x8f\\x90\\x91\\x92\\x93\n\\x94\\x95\\x96\\x97\\x98\\x99\\x9a\\x9b\\x9c\\x9d\\x9e\\x9f\\xa0\\xa1\\xa2\\xa3\\xa4\\xa5\\xa6\n\\xa7\\xa8\\xa9\\xaa\\xab\\xac\\xad\\xae\\xaf\\xb0\\xb1\\xb2\\xb3\\xb4\\xb5\\xb6\\xb7\\xb8\\xb9\n\\xba\\xbb\\xbc\\xbd\\xbe\\xbf\\xc0\\xc1\\xc2\\xc3\\xc4\\xc5\\xc6\\xc7\\xc8\\xc9\\xca\\xcb\\xcc\n\\xcd\\xce\\xcf\\xd0\\xd1\\xd2\\xd3\\xd4\\xd5\\xd6\\xd7\\xd8\\xd9\\xda\\xdb\\xdc\\xdd\\xde\\xdf\n\\xe0\\xe1\\xe2\\xe3\\xe4\\xe5\\xe6\\xe7\\xe8\\xe9\\xea\\xeb\\xec\\xed\\xee\\xef\\xf0\\xf1\\xf2\n\\xf3\\xf4\\xf5\\xf6\\xf7\\xf8\\xf9\\xfa\\xfb\\xfc\\xfd\\xfe\\xff'\n</code></pre>\n\n<p>Effectively, <code>string.maketrans('', '') == ''.join(map(chr, range(256)))</code>.</p>\n\n<p>This serves as a map, which when provided to <a href=\"https://docs.python.org/2/library/string.html#string.translate\" rel=\"noreferrer\"><code>str.translate()</code></a>, it can be used to replace multiple characters with one pass over your string. For the example map above, all characters will remain the same, except from all <code>a</code> turning into <code>A</code>, <code>b</code> into <code>B</code>, etc. If you do <code>myStr.translate(string.maketrans('', ''))</code>, you simply don't change anything in <code>myStr</code>.</p>\n\n<p>Finally, <code>translate()</code> has one additional argument, <code>deletechars</code>. If you pass a string for that argument, <code>translate()</code> will translate all characters according to the mapping you provide, but it will ignore, any characters in <code>deletechars</code>. So, putting it all together, <code>myStr.translate(string.maketrans('', ''), string.punctuation)</code> does not change any character in the string, but in the process will ignore any character in <code>string.punctuation</code>. Effectively, you have removed the punctuation in the output string.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1459991199, "post_id": 36464415, "comment_id": 60541388, "body": "Note, even in Python 2, <code>string.translate</code> is pointless; <code>str.translate</code> (a method of all <code>str</code> objects) is faster and requires no imports (though <code>string.maketrans</code> still does, until Python 3)."}], "tags": [], "owner": {"reputation": 80, "user_id": 4516872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d81308d50d4c460ac6c631e7c8a14b?s=128&d=identicon&r=PG&f=1", "display_name": "Miles", "link": "https://stackoverflow.com/users/4516872/miles"}, "is_accepted": false, "score": 0, "last_activity_date": 1459987713, "last_edit_date": 1459987713, "creation_date": 1459987509, "answer_id": 36464415, "question_id": 36464160, "link": "https://stackoverflow.com/questions/36464160/what-does-python-string-maketrans/36464415#36464415", "title": "What does Python string.maketrans(&quot;&quot;,&quot;&quot;)", "body": "<p>Python 2.7's <a href=\"https://docs.python.org/2/library/string.html#string.maketrans\" rel=\"nofollow\">string.maketrans()</a> returns a byte value, like your result, which could be used with <a href=\"https://docs.python.org/2/library/string.html#string.translate\" rel=\"nofollow\">string.translate()</a>.</p>\n\n<p><code>string.translate(s, table)</code> translates characters in <code>s</code> (Let's call this <code>c</code>) into <code>table[ord(c)]</code>. So <code>\\x00</code> is translated into <code>table[0]</code>, and so on. In your case, it's just returning an identity table.</p>\n\n<p>It should be noted that <code>string.translate</code> is deprecated in Python 2.7, and in Python 3.1 and onwards, they are replaced by <code>bytes.maketrans()</code>, <code>bytes.translate()</code>, and the corresponding methods for <code>str</code> ans <code>bytearray</code>.</p>\n"}], "owner": {"reputation": 1776, "user_id": 3113501, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/defc8f3b2a6827502b7099332c4b8c3e?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/3113501/lars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3635, "favorite_count": 0, "accepted_answer_id": 36464351, "answer_count": 3, "score": 2, "last_activity_date": 1459988121, "creation_date": 1459985823, "last_edit_date": 1459987200, "question_id": 36464160, "link": "https://stackoverflow.com/questions/36464160/what-does-python-string-maketrans", "title": "What does Python string.maketrans(&quot;&quot;,&quot;&quot;)", "body": "<pre><code> string.maketrans(\"\",\"\")\n</code></pre>\n\n<p>gives</p>\n\n<pre><code> \\x00\\x01\\x02\\x03\\x04\\x05\\x06\\x07\\x08\\t\\n\\x0b\\x0c\\r\\x0e\\x0f\\x10\\x11\\x12\\x13 \n \\x14\\x15\\x16\\x17\\x18\\x19\\x1a\\x1b\\x1c\\x1d\\x1e\\x1f !\"#$%&amp;\\'()*+,-./0123456789:;&lt;=&gt;?\n @ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\n \\x7f\\x80\\x81\\x82\\x83\\x84\\x85\\x86\\x87\\x88\\x89\\x8a\\x8b\\x8c\\x8d\\x8e\\x8f\\x90\n\\x91\\x92\\x93\\x94\\x95\\x96\\x97\\x98\\x99\\x9a\\x9b\\x9c\\x9d\\x9e\\x9f\\xa0\\xa1\\xa2\n\\xa3\\xa4\\xa5\\xa6\\xa7\\xa8\\xa9\\xaa\\xab\\xac\\xad\\xae\\xaf\\xb0\\xb1\\xb2\\xb3\\xb4\n\\xb5\\xb6\\xb7\\xb8\\xb9\\xba\\xbb\\xbc\\xbd\\xbe\\xbf\\xc0\\xc1\\xc2\\xc3\\xc4\\xc5\\xc6\\xc7\\xc8\\xc9\n\\xca\\xcb\\xcc\\xcd\\xce\\xcf\\xd0\\xd1\\xd2\\xd3\\xd4\\xd5\\xd6\\xd7\\xd8\\xd9\\xda\\xdb\\xdc\\xdd\\xde\n\\xdf\\xe0\\xe1\\xe2\\xe3\\xe4\\xe5\\xe6\\xe7\\xe8\\xe9\\xea\\xeb\\xec\\xed\n\\xee\\xef\\xf0\\xf1\\xf2\\xf3\\xf4\\xf5\\xf6\\xf7\\xf8\\xf9\\xfa\\xfb\\xfc\\xfd\\xfe\\xff\n</code></pre>\n\n<p>What does this mean? </p>\n\n<p>And how does it help in removing punctuation in a string with the following call: </p>\n\n<pre><code> import string\n myStr.translate(string.maketrans(\"\",\"\"), string.punctuation)\n</code></pre>\n"}, {"tags": ["python", "selenium", "xpath", "web-scraping"], "comments": [{"owner": {"reputation": 96, "user_id": 750702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d09ba619dbb18ee62caebf67e6de8aa2?s=128&d=identicon&r=PG", "display_name": "Zhack", "link": "https://stackoverflow.com/users/750702/zhack"}, "edited": false, "score": 0, "creation_date": 1459985273, "post_id": 36464025, "comment_id": 60539852, "body": "Are you sure you switched to correct iframe?"}, {"owner": {"reputation": 1145, "user_id": 2052781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d59dc23a4e74412f19263c1e5af35e0?s=128&d=identicon&r=PG", "display_name": "gpanterov", "link": "https://stackoverflow.com/users/2052781/gpanterov"}, "reply_to_user": {"reputation": 96, "user_id": 750702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d09ba619dbb18ee62caebf67e6de8aa2?s=128&d=identicon&r=PG", "display_name": "Zhack", "link": "https://stackoverflow.com/users/750702/zhack"}, "edited": false, "score": 0, "creation_date": 1459986315, "post_id": 36464025, "comment_id": 60540154, "body": "I am not quite sure. I saw two frames in the code and tried switching to both. Is there a way to list all frames?"}], "answers": [{"comments": [{"owner": {"reputation": 1145, "user_id": 2052781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d59dc23a4e74412f19263c1e5af35e0?s=128&d=identicon&r=PG", "display_name": "gpanterov", "link": "https://stackoverflow.com/users/2052781/gpanterov"}, "edited": false, "score": 0, "creation_date": 1459992204, "post_id": 36464856, "comment_id": 60541627, "body": "This did it! Thanks! Quick follow up - how did you find the css selector for the correct frame. I tried searching for this frame in the raw page source but nothing came up"}, {"owner": {"reputation": 4487, "user_id": 2329061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89e7e5642e4f608893b279c8438329a3?s=128&d=identicon&r=PG", "display_name": "Buaban", "link": "https://stackoverflow.com/users/2329061/buaban"}, "reply_to_user": {"reputation": 1145, "user_id": 2052781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d59dc23a4e74412f19263c1e5af35e0?s=128&d=identicon&r=PG", "display_name": "gpanterov", "link": "https://stackoverflow.com/users/2052781/gpanterov"}, "edited": false, "score": 0, "creation_date": 1459992752, "post_id": 36464856, "comment_id": 60541777, "body": "You can use Chrome Dev&#39;Tool to see hierarchy of elements. See my answer in this post: <a href=\"http://stackoverflow.com/questions/35194819/unable-to-access-login-container-elements-in-chrome/35196463?noredirect=1#comment58112245_35196463\" title=\"unable to access login container elements in chrome\">stackoverflow.com/questions/35194819/&hellip;</a>. Regarding the Css Selector expression, I created it by myself. You can see some interesting examples from <a href=\"https://saucelabs.com/resources/selenium/css-selectors\" rel=\"nofollow noreferrer\">saucelabs.com/resources/selenium/css-selectors</a>."}], "tags": [], "owner": {"reputation": 4487, "user_id": 2329061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89e7e5642e4f608893b279c8438329a3?s=128&d=identicon&r=PG", "display_name": "Buaban", "link": "https://stackoverflow.com/users/2329061/buaban"}, "is_accepted": true, "score": 2, "last_activity_date": 1459990543, "creation_date": 1459990543, "answer_id": 36464856, "question_id": 36464025, "link": "https://stackoverflow.com/questions/36464025/unable-to-locate-a-visible-element-with-python-selenium/36464856#36464856", "title": "Unable to locate a visible element with python selenium", "body": "<p>The problem is your code didn't switch to iframe yet. See example code below:</p>\n\n<pre><code>browser = webdriver.Firefox(firefox_profile=fp)\nbrowser.get(url)\nbrowser.implicitly_wait(5)\ntime.sleep(5)\niframe = browser.find_element_by_css_selector('#crowdTorchTicketingMainContainer &gt; iframe')\nbrowser.switch_to.frame(iframe)\nel=browser.find_element_by_id('20160420')\nprint(el.text)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4487, "user_id": 2329061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89e7e5642e4f608893b279c8438329a3?s=128&d=identicon&r=PG", "display_name": "Buaban", "link": "https://stackoverflow.com/users/2329061/buaban"}, "edited": false, "score": 0, "creation_date": 1459993450, "post_id": 36465195, "comment_id": 60541978, "body": "I think it would be better if we use css selector to get the iframe directly. For instance, frame = find_element_by_css_selector(&quot;iframe[src*=&#39;ticketmob&#39;]&quot;)"}, {"owner": {"reputation": 79, "user_id": 3849808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WxagG.jpg?s=128&g=1", "display_name": "WeezyKrush", "link": "https://stackoverflow.com/users/3849808/weezykrush"}, "reply_to_user": {"reputation": 4487, "user_id": 2329061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89e7e5642e4f608893b279c8438329a3?s=128&d=identicon&r=PG", "display_name": "Buaban", "link": "https://stackoverflow.com/users/2329061/buaban"}, "edited": false, "score": 0, "creation_date": 1459994553, "post_id": 36465195, "comment_id": 60542275, "body": "based on your comments @Buaban, I changed my answer to search for just one iframe by css selector, rather than sorting through a group filtering by attributes within the iframes."}], "tags": [], "owner": {"reputation": 79, "user_id": 3849808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WxagG.jpg?s=128&g=1", "display_name": "WeezyKrush", "link": "https://stackoverflow.com/users/3849808/weezykrush"}, "is_accepted": false, "score": 0, "last_activity_date": 1459994393, "last_edit_date": 1459994393, "creation_date": 1459992896, "answer_id": 36465195, "question_id": 36464025, "link": "https://stackoverflow.com/questions/36464025/unable-to-locate-a-visible-element-with-python-selenium/36465195#36465195", "title": "Unable to locate a visible element with python selenium", "body": "<p>The issue seems to be that the element that you are looking for is in an iframe, and you have to switch to that before you can access the calendar element:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait as WDW\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import NoSuchElementException,     TimeoutException, StaleElementReferenceException\n\n\nurl = 'https://hornblowernewyork.com/cruises/international-sightseeing-cruise'\nbrowser = webdriver.Firefox()\nbrowser.get(url)\n\n# seach for the appropriate iframe\nframe = browser.find_element(By.CSS_SELECTOR, \"#crowdTorchTicketingMainContainer &gt; iframe\")\nif not frame:\n  raise Exception('Frame not found')\n\n# once the correct iframe is found switch to it, \n# then look for your calendar element\nbrowser.switch_to.frame(frame)\ntry:\n  el = WDW(browser, 10).until(\n    EC.presence_of_element_located((By.ID, \"20160406\"))\n  )\nexcept (TimeoutException, NoSuchElementException, StaleElementReferenceException), e:\n  print e\nelse:\n  print el\n</code></pre>\n"}], "owner": {"reputation": 1145, "user_id": 2052781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d59dc23a4e74412f19263c1e5af35e0?s=128&d=identicon&r=PG", "display_name": "gpanterov", "link": "https://stackoverflow.com/users/2052781/gpanterov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1262, "favorite_count": 0, "accepted_answer_id": 36464856, "answer_count": 2, "score": 1, "last_activity_date": 1459994393, "creation_date": 1459984837, "question_id": 36464025, "link": "https://stackoverflow.com/questions/36464025/unable-to-locate-a-visible-element-with-python-selenium", "title": "Unable to locate a visible element with python selenium", "body": "<p>I would like to click on a calendar entry in this <a href=\"https://hornblowernewyork.com/cruises/international-sightseeing-cruise/\" rel=\"nofollow\">site</a> using selenium in python. Although I can clearly see each calendar entry and I can get its xpath, id etc. But when I try to locate the element I get an errror.\n(For example, I can see that the link for the 20th day of April has an id='20160420')</p>\n\n<pre><code>browser = webdriver.Firefox(firefox_profile=fp)\nbrowser.get(url)\nbrowser.implicitly_wait(5)\nel=browser.find_element_by_id('20160420')\n</code></pre>\n\n<p>Any suggestions (I tried switching between frames, active elements etc. but to no avail so far ...)</p>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459984632, "post_id": 36463979, "comment_id": 60539686, "body": "Can you please provide the exact output you expect please"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1459985118, "post_id": 36463979, "comment_id": 60539807, "body": "Use <code>new_list.append([m, n])</code> instead of <code>new_list.append([m])</code>.  The second number isn&#39;t there because you never added it."}, {"owner": {"reputation": 325, "user_id": 5636889, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13e3a2efd32a50b40e88e8961a801a7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/5636889/jose"}, "edited": false, "score": 0, "creation_date": 1459985370, "post_id": 36463979, "comment_id": 60539875, "body": "Is the same output with new_list.append([m, n])"}, {"owner": {"reputation": 5357, "user_id": 948918, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SfJmq.jpg?s=128&g=1", "display_name": "pkacprzak", "link": "https://stackoverflow.com/users/948918/pkacprzak"}, "edited": false, "score": 0, "creation_date": 1459985455, "post_id": 36463979, "comment_id": 60539902, "body": "what do you expect when the second element is not greater than the first one?"}], "answers": [{"tags": [], "owner": {"reputation": 5357, "user_id": 948918, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SfJmq.jpg?s=128&g=1", "display_name": "pkacprzak", "link": "https://stackoverflow.com/users/948918/pkacprzak"}, "is_accepted": true, "score": 0, "last_activity_date": 1459985193, "creation_date": 1459985193, "answer_id": 36464074, "question_id": 36463979, "link": "https://stackoverflow.com/questions/36463979/make-loop-for-a-list-of-multiple-list/36464074#36464074", "title": "Make loop for a list of multiple list", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/functions.html#map\" rel=\"nofollow\">map()</a> functional primitive here to easily express the result.</p>\n\n<p>I assume that all inner lists have at least 2 elements and if the second element is not greater than the first one, then the whole list is returned rather than only its first element.</p>\n\n<pre><code>&gt;&gt;&gt; my_list = [ [ [1,2], [2,3] ], [ [2,3], [2,3] ], [ [1,2], [1,3] ] ]\n&gt;&gt;&gt; map(lambda x: map(lambda y: y[:1] if y[1] &gt; y[0] else y, x), my_list)\n[[[1], [2]], [[2], [2]], [[1], [1]]]\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 2855699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76318dfe8b0e6c23e1552929c2c3837d?s=128&d=identicon&r=PG&f=1", "display_name": "RoboCopNixon", "link": "https://stackoverflow.com/users/2855699/robocopnixon"}, "is_accepted": false, "score": 0, "last_activity_date": 1459985658, "creation_date": 1459985658, "answer_id": 36464135, "question_id": 36463979, "link": "https://stackoverflow.com/questions/36463979/make-loop-for-a-list-of-multiple-list/36464135#36464135", "title": "Make loop for a list of multiple list", "body": "<p>This should work. You need to add a sublist as below: </p>\n\n<pre><code>new_list =[]\nfor l in my_list:\n  sub_list=[]\n  for m, n in l:\n      if m&lt;n:\n          sub_list.append(m)\nnew_list.append(sub_list)\n\n&gt;&gt;&gt;[[1, 2], [2, 2], [1, 1]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 741, "user_id": 2112269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b55e65da393974dba4e152a6a0f9b0c3?s=128&d=identicon&r=PG", "display_name": "Aquiles", "link": "https://stackoverflow.com/users/2112269/aquiles"}, "is_accepted": false, "score": 0, "last_activity_date": 1459987828, "creation_date": 1459987828, "answer_id": 36464456, "question_id": 36463979, "link": "https://stackoverflow.com/questions/36463979/make-loop-for-a-list-of-multiple-list/36464456#36464456", "title": "Make loop for a list of multiple list", "body": "<p>This should work assuming that you want to keep the second value if that's lower, you don't specify that case in your question:</p>\n\n<pre><code>[[[min(x)] for x in y] for y in my_list]\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 5636889, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13e3a2efd32a50b40e88e8961a801a7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/5636889/jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 36464074, "answer_count": 3, "score": 0, "last_activity_date": 1459988003, "creation_date": 1459984589, "last_edit_date": 1459988003, "question_id": 36463979, "link": "https://stackoverflow.com/questions/36463979/make-loop-for-a-list-of-multiple-list", "title": "Make loop for a list of multiple list", "body": "<p>I want to make a loop of a list of multiple list, I have something like this:</p>\n\n<pre><code>my_list = [ [ [1,2], [2,3] ], [ [2,3], [2,3] ], [ [1,2], [1,3] ] ]\n</code></pre>\n\n<p>So, I want to keep only the first value if the second is greater than the first one, I don't want second value in the output, and here is my script:</p>\n\n<pre><code>new_list = []\nfor member in range(0, len(my_list)):\n    for m,n in my_list[member]:\n        if m.distance &lt; n.distance\n            new_list.append([m])\n</code></pre>\n\n<p>when I run it, it removes one level of the list and returns this:</p>\n\n<pre><code>new_list = [[1], [2], [2], [2], [1], [1]]\n</code></pre>\n\n<p>What is missing?\nThis is what I expect from output:</p>\n\n<pre><code>new_list = [ [ [1],[2] ], [ [2],[2] ], [ [1],[1] ] ]\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot", "plotly"], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "is_accepted": true, "score": 1, "last_activity_date": 1459986091, "creation_date": 1459986091, "answer_id": 36464205, "question_id": 36463965, "link": "https://stackoverflow.com/questions/36463965/how-to-make-this-plot-ly-heatmap-esque-plot-in-pure-python/36464205#36464205", "title": "How to make this plot.ly heatmap-esque plot in &quot;pure&quot; python?", "body": "<p>To give you a simple example, the following will generate the attached plot.</p>\n\n<pre><code>from pylab import *\nZ = rand(6, 100) # tried to make it look similar to your plot\nc = pcolor(Z)\nshow()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/A4XQW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A4XQW.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": false, "score": 1, "last_activity_date": 1459993007, "last_edit_date": 1459993007, "creation_date": 1459992227, "answer_id": 36465092, "question_id": 36463965, "link": "https://stackoverflow.com/questions/36463965/how-to-make-this-plot-ly-heatmap-esque-plot-in-pure-python/36465092#36465092", "title": "How to make this plot.ly heatmap-esque plot in &quot;pure&quot; python?", "body": "<p>Building on Hun answer, if you don't want your eyes to hurt too much, you can use an alternate color map. Here <code>viridis</code></p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nZ = np.random.rand(6, 100)\nc = plt.pcolor(Z, cmap='viridis')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/YI14o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YI14o.png\" alt=\"enter image description here\"></a></p>\n\n<p>and remember: <code>pyplot</code> &amp; <code>numpy</code> will keep your namespace tidy...</p>\n"}], "owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 36464205, "answer_count": 2, "score": 0, "last_activity_date": 1459993007, "creation_date": 1459984492, "question_id": 36463965, "link": "https://stackoverflow.com/questions/36463965/how-to-make-this-plot-ly-heatmap-esque-plot-in-pure-python", "title": "How to make this plot.ly heatmap-esque plot in &quot;pure&quot; python?", "body": "<p>Is there an equivalent plotting function and/or a simple way to make this plot.ly plot in python in \"pure\" python using e.g. matplotlib?</p>\n\n<p><a href=\"https://i.stack.imgur.com/ViNJu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ViNJu.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://plot.ly/python/heatmaps/\" rel=\"nofollow noreferrer\">from here.</a></p>\n\n<p>Just wondering if there is an equivalent function or similar. Cannot find any, or am not searching for the right thing. \"heatmap python\" only comes up with square plots, and changing their shape seems cumbersome.</p>\n"}, {"tags": ["python", "comments", "indentation"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1459984363, "post_id": 36463910, "comment_id": 60539604, "body": "You&#39;ll have to identify the line of code that is giving you the error. Also edit the question to include the full error message"}, {"owner": {"reputation": 25, "user_id": 5026357, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2Q_laP9JQqE/AAAAAAAAAAI/AAAAAAAABDo/YcCZ-XH8rio/photo.jpg?sz=128", "display_name": "Alki Kollias", "link": "https://stackoverflow.com/users/5026357/alki-kollias"}, "edited": false, "score": 0, "creation_date": 1459984511, "post_id": 36463910, "comment_id": 60539653, "body": "I just edited the question"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1459984624, "post_id": 36463910, "comment_id": 60539684, "body": "Why did you indent the <code>def</code>? You don&#39;t need to indent after finishing your imports. The parser doesn&#39;t expect an indent there, so if you provide one it will not be able to compile your code."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459986819, "post_id": 36463910, "comment_id": 60540279, "body": "Your docstring should be <i>inside</i> the function definition, not outside of it."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 750702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d09ba619dbb18ee62caebf67e6de8aa2?s=128&d=identicon&r=PG", "display_name": "Zhack", "link": "https://stackoverflow.com/users/750702/zhack"}, "is_accepted": false, "score": 0, "last_activity_date": 1459984887, "creation_date": 1459984887, "answer_id": 36464035, "question_id": 36463910, "link": "https://stackoverflow.com/questions/36463910/indentation-error-in-python-2-7/36464035#36464035", "title": "Indentation error in Python 2.7", "body": "<p>You have 2 indentation errors. \nFirst one is your comment between \"\"\" \"\"\" tags. It is normal string so it has to match indentation rules. Use # instead.\nSecond one is line where you define your function. It needs to match indentation before.</p>\n\n<pre><code>import os\nimport socket\nimport connection\nfrom constants import *\n\"\"\"\nget_file_listing lists the files in the directory.\n\"\"\" # geting IndentationError: unexpected indent at this line's 5th column\ndef get_file_listing(connection,):\n    files = os.listdir(connection.directory)\n    answer = str(CODE_OK) + \" \" + error_messages[CODE_OK] + EOL\n    for f in files:\n        path = os.path.join(connection.directory, f)\n        if os.path.isfile(path):\n            answer += f + EOL\n    answer += EOL\n    return answer\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5026357, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2Q_laP9JQqE/AAAAAAAAAAI/AAAAAAAABDo/YcCZ-XH8rio/photo.jpg?sz=128", "display_name": "Alki Kollias", "link": "https://stackoverflow.com/users/5026357/alki-kollias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459984887, "creation_date": 1459984210, "last_edit_date": 1459984434, "question_id": 36463910, "link": "https://stackoverflow.com/questions/36463910/indentation-error-in-python-2-7", "title": "Indentation error in Python 2.7", "body": "<p>I'm getting an indentation error in this line of code (it's a comment with all spaces, no tabs), hope you can help me with this :)</p>\n\n<pre><code>import os\nimport socket\nimport connection\nfrom constants import *\n    \"\"\"\n    get_file_listing lists the files in the directory.\n    \"\"\" # geting IndentationError: unexpected indent at this line's 5th column\n    def get_file_listing(connection,):\n        files = os.listdir(connection.directory)\n        answer = str(CODE_OK) + \" \" + error_messages[CODE_OK] + EOL\n        for f in files:\n            path = os.path.join(connection.directory, f)\n            if os.path.isfile(path):\n                answer += f + EOL\n        answer += EOL\n        return answer\n</code></pre>\n"}, {"tags": ["python", "linux", "ssh", "swap", "ram"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459984272, "post_id": 36463897, "comment_id": 60539572, "body": "Can you just get someone physically near the PC to turn it off and on?"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459987098, "post_id": 36463897, "comment_id": 60540361, "body": "Well, you&#39;re going to have to run <code>ps x</code> to get the running processes, then run <code>kill -9 PID</code> where PID is the process id of your script. Alternatively, just run <code>sudo shutdown -r now</code> to remotely reboot the system."}], "owner": {"reputation": 199, "user_id": 3395841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e96d6ed0d7679927093f45ce47bcfcd?s=128&d=identicon&r=PG", "display_name": "Caos", "link": "https://stackoverflow.com/users/3395841/caos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459984140, "creation_date": 1459984140, "question_id": 36463897, "link": "https://stackoverflow.com/questions/36463897/remote-desktop-out-of-ram-and-swap-memory", "title": "remote desktop out of ram and swap memory", "body": "<p>I launched some python script on a remote desktop PC via ssh. The system is running ubuntu 14.04. There were some bugs in my script and they filled all the ram (and also the swap I think) of the remote desktop.\nNow the desktop is blocked, it takes about 15 minutes to ssh connect to it (normally this operation was lasting few seconds) and then also typing a command in the terminal takes about 20 seconds per letter.</p>\n\n<p>I tried to type </p>\n\n<pre><code>killall -9 python\n</code></pre>\n\n<p>(it took me about 5 minutes to write this command letter by letter since the system is litelally blocked).\nI typed that command about 40 minutes ago and nothing has changes.\nHas anyone an idea about how I could kill all the process I launched or force the freeing of the memory in order to recover the control of the remote desktop?  </p>\n"}, {"tags": ["python", "ruby-on-rails", "heroku", "scheduler", "sendgrid"], "comments": [{"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459984097, "post_id": 36463871, "comment_id": 60539505, "body": "Are you using a virtualenv? If so, did you confirm that sendgrid is installed in that virtualenv? Or that you are using the virtualenv when trying to run the python script?"}, {"owner": {"reputation": 131, "user_id": 1050165, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0292df659da47e9cdc72c15c91c6ccb7?s=128&d=identicon&r=PG", "display_name": "user1050165", "link": "https://stackoverflow.com/users/1050165/user1050165"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459984347, "post_id": 36463871, "comment_id": 60539599, "body": "I used puma as the webserver for this Rails application. I don&#39;t know about virtualenv, so I believe I didn&#39;t use it."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459984413, "post_id": 36463871, "comment_id": 60539622, "body": "On your server, you validated that sendgrid is actually there?"}, {"owner": {"reputation": 131, "user_id": 1050165, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0292df659da47e9cdc72c15c91c6ccb7?s=128&d=identicon&r=PG", "display_name": "user1050165", "link": "https://stackoverflow.com/users/1050165/user1050165"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459984657, "post_id": 36463871, "comment_id": 60539691, "body": "I used the free Heroku account. I deployed it from my Mac using command &quot;heroku create&quot; and &quot;git push heroku&quot;. I added the sendgrid addon in Heroku using &quot;heroku addons:create sendgrid:starter&quot;. Inside my Rails app, there is a &quot;confirm&quot; button that will send a confirmation email via sendgrid. I&#39;ve checked it works. The Python script does some backend data extraction from an API and checks the database and sends an email notification when requirements are fulfilled."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459984740, "post_id": 36463871, "comment_id": 60539716, "body": "Ah. This seems very heroku specific. Unfortunately, I have not used that much heroku. Not much help from me, sorry. =/"}], "answers": [{"comments": [{"owner": {"reputation": 1702, "user_id": 1412689, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/591e95e607966eb156388e578a5e06e0?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/1412689/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1460012253, "post_id": 36468772, "comment_id": 60548539, "body": "You&#39;ve been faster after 6 hours of silence in this question... ;)"}, {"owner": {"reputation": 131, "user_id": 1050165, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0292df659da47e9cdc72c15c91c6ccb7?s=128&d=identicon&r=PG", "display_name": "user1050165", "link": "https://stackoverflow.com/users/1050165/user1050165"}, "reply_to_user": {"reputation": 1702, "user_id": 1412689, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/591e95e607966eb156388e578a5e06e0?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/1412689/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1460417776, "post_id": 36468772, "comment_id": 60722537, "body": "Yeah. I was busy contacting Heroku tech support."}], "tags": [], "owner": {"reputation": 131, "user_id": 1050165, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0292df659da47e9cdc72c15c91c6ccb7?s=128&d=identicon&r=PG", "display_name": "user1050165", "link": "https://stackoverflow.com/users/1050165/user1050165"}, "is_accepted": true, "score": 0, "last_activity_date": 1460012053, "creation_date": 1460012053, "answer_id": 36468772, "question_id": 36463871, "link": "https://stackoverflow.com/questions/36463871/no-module-named-sendgrid-in-python-script-in-heroku-scheduler-inside-rails-app/36468772#36468772", "title": "No module named sendgrid in Python script in Heroku scheduler inside Rails app", "body": "<p>I contacted Heroku tech support. They told me I have to install both the ruby and python buildpack and include sendgrid in the requirements.txt in the application root directory.</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app\" rel=\"nofollow\">https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app</a></p>\n\n<p>Issue resolved.</p>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 1412689, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/591e95e607966eb156388e578a5e06e0?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/1412689/andr%c3%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1460012209, "creation_date": 1460012209, "answer_id": 36468819, "question_id": 36463871, "link": "https://stackoverflow.com/questions/36463871/no-module-named-sendgrid-in-python-script-in-heroku-scheduler-inside-rails-app/36468819#36468819", "title": "No module named sendgrid in Python script in Heroku scheduler inside Rails app", "body": "<p>Sounds like you forgot to install <a href=\"https://sendgrid.com/docs/Integrate/Code_Examples/python.html\" rel=\"nofollow\">Python's sendgrid dependency</a> when building the container. See <a href=\"https://devcenter.heroku.com/articles/getting-started-with-python#declare-app-dependencies\" rel=\"nofollow\">declare Python app dependencies</a> for how to install Python dependencies. As you are running both, ruby and Python, you have to install both buildpacks to ensure both dependencies are being loaded. </p>\n"}], "owner": {"reputation": 131, "user_id": 1050165, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0292df659da47e9cdc72c15c91c6ccb7?s=128&d=identicon&r=PG", "display_name": "user1050165", "link": "https://stackoverflow.com/users/1050165/user1050165"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 36468772, "answer_count": 2, "score": 0, "last_activity_date": 1460012209, "creation_date": 1459983983, "question_id": 36463871, "link": "https://stackoverflow.com/questions/36463871/no-module-named-sendgrid-in-python-script-in-heroku-scheduler-inside-rails-app", "title": "No module named sendgrid in Python script in Heroku scheduler inside Rails app", "body": "<p>I've deployed a Rails application on Heroku. I also have a Python script inside the Rails bin folder. I am now using Heroku scheduler to run the Python script every 10 minutes. I want to test it first. So I run:</p>\n\n<pre><code>heroku run python bin/notify.py\n</code></pre>\n\n<p>in my local terminal. Then I got the following error message:</p>\n\n<pre><code>Running python bin/notify.py on ...\nTraceback (most recent call last):\n  File \"bin/notify.py\", line 6, in &lt;module&gt;\n    import sendgrid\nImportError: No module named sendgrid\n</code></pre>\n\n<p>However, I've already had the sendgrid addon on Heroku. I can also use sendgrid in my Rails code without any problem.</p>\n\n<p>Can anyone help me with this? Thanks!</p>\n"}, {"tags": ["python", "arrays", "string", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "is_accepted": true, "score": 1, "last_activity_date": 1459985136, "last_edit_date": 1459985136, "creation_date": 1459983928, "answer_id": 36463860, "question_id": 36463791, "link": "https://stackoverflow.com/questions/36463791/how-to-write-values-of-numpy-array-member-to-txt-in-python/36463860#36463860", "title": "How to write values of numpy array member to txt in python?", "body": "<p><a href=\"https://docs.python.org/3/library/functions.html#repr\" rel=\"nofollow\"><code>repr()</code></a> will give you a representation of the object. For simple objects, such as integers and floats, this will be the literal value, but this isn't the case for everything. What you want here is to use the value of the array in <a href=\"https://docs.python.org/3.5/library/string.html#format-string-syntax\" rel=\"nofollow\">string interpolation</a>. It's also recommended to handle files with the <a href=\"https://docs.python.org/3.1/reference/compound_stmts.html#with\" rel=\"nofollow\"><code>with</code></a> syntax.</p>\n\n<pre><code>with open(\"output.txt\",\"w\") as textf:\n    for i in range(len(x1)):\n        textf.write('sf{0}: -1x1_1+{1:f}x_1+{2:f}x3_1\\n'.format(i+2, x2[i], x3[i]))\n</code></pre>\n\n<p>By adding further numbers in the format, e.g. <code>{:5.3f}</code> you can control the maximum width the float will take up and how many digits after the decimal point will be shown. For example,</p>\n\n<pre><code>&gt;&gt;&gt; '{:10.5f}'.format(3.25)\n'   3.25000'\n</code></pre>\n\n<p>And for filling the spaces to the left with zeros:</p>\n\n<pre><code>&gt;&gt;&gt; '{:010.5f}'.format(3.25)\n'0003.25000'\n</code></pre>\n\n<p>Finally, if you have a lot of lines to write, calling <code>write()</code> repeatedly could be slow. It'd be more efficient to create a string of all the lines first and then write them in one go.</p>\n\n<pre><code>lines = ['sf{0}: -1x1_1+{1:f}x_1+{2:f}x3_1'.format(i+2, x2[i], x3[i]) for i in range(len(x1))]\nwith open(\"output.txt\",\"w\") as textf:\n    textf.write('\\n'.join(lines))\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 5935602, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/36586e643e5d5c7d267bc53e7dc4af6e?s=128&d=identicon&r=PG", "display_name": "Lanza", "link": "https://stackoverflow.com/users/5935602/lanza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 36463860, "answer_count": 1, "score": 1, "last_activity_date": 1459985136, "creation_date": 1459983522, "question_id": 36463791, "link": "https://stackoverflow.com/questions/36463791/how-to-write-values-of-numpy-array-member-to-txt-in-python", "title": "How to write values of numpy array member to txt in python?", "body": "<p>I would like to write certain text in a certain format to txt with this code:</p>\n\n<pre><code>textf = open(\"output.txt\",\"w\")\n\nfor i in range(len(x1)):\n    textf.write(\"sf\"+repr(i+2) +\": -1x1_1+\"+ repr((x2[i]))+\"x2_1+\"+repr(x3[i])+\"x3_1\")\n    textf.write(\"\\n\")\n\n    textf.close()\n</code></pre>\n\n<p>The output is this:</p>\n\n<pre><code>sf2: -1x1_1+array([ 100.])x2_1+array([ 100.])x3_1\nsf3: -1x1_1+array([ 91.02295278])x2_1+array([ 90.9906232])x3_1\nsf4: -1x1_1+array([ 101.25508941])x2_1+array([ 138.07783278])x3_1\n</code></pre>\n\n<p>But i would like to see only the values in the array:</p>\n\n<pre><code>sf2: -1x1_1+100x2_1+100x3_1\nsf3: -1x1_1+91.02295278x2_1+90.9906232x3_1\nsf4: -1x1_1+101.25508941x2_1+138.07783278x3_1\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "c++", "windows", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 5665422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-ZjJuNkfFnlA/AAAAAAAAAAI/AAAAAAAAABw/2xNy6z_ACgw/photo.jpg?sz=128", "display_name": "S rick", "link": "https://stackoverflow.com/users/5665422/s-rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1459985488, "creation_date": 1459985488, "answer_id": 36464109, "question_id": 36463722, "link": "https://stackoverflow.com/questions/36463722/how-do-i-install-sip-makefile-to-use-pyqt/36464109#36464109", "title": "How do I install SIP makefile to use PyQt?", "body": "<p>So I've found the correct way to use make. I had to set my path to include mnGW and use: <code>mingw32-make</code> and <code>mingw32-make install</code></p>\n\n<p>I found this ironically on the python wiki!</p>\n\n<p><a href=\"https://wiki.python.org/moin/BuildPyQt4Windows\" rel=\"nofollow\">https://wiki.python.org/moin/BuildPyQt4Windows</a></p>\n"}], "owner": {"reputation": 34, "user_id": 5665422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-ZjJuNkfFnlA/AAAAAAAAAAI/AAAAAAAAABw/2xNy6z_ACgw/photo.jpg?sz=128", "display_name": "S rick", "link": "https://stackoverflow.com/users/5665422/s-rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1593, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1460020317, "creation_date": 1459983251, "last_edit_date": 1460020317, "question_id": 36463722, "link": "https://stackoverflow.com/questions/36463722/how-do-i-install-sip-makefile-to-use-pyqt", "title": "How do I install SIP makefile to use PyQt?", "body": "<p>I want to install sip to use with PyQt.</p>\n\n<ol>\n<li>I've unpacked the sip download</li>\n<li>I ran Windows command prompt and changed dir to C:\\Python\\sip\\</li>\n<li>I ran the <code>configure.py</code> script, I did try the <code>python configure.py</code> first but because I unpacked the sip folder into C:\\Python I couldn't get command line to recognise the python shell</li>\n<li>This returned the makefile in command prompt, i couldn't then use make, it just gave me the error <code>'make' is not recognized</code></li>\n<li>I looked into it and thought i would solve this by using minGW</li>\n<li><p>Now my command prompt shows:</p>\n\n<p><code>C:\\Python\\sip&gt;configure.py --platform win32-g++\nThis is SIP 4.17 for Python 2.7.11 on win32.\nThe SIP code generator will be installed in C:\\Python27.\nThe sip module will be installed in C:\\Python27\\Lib\\site-packages.\nThe sip.h header file will be installed in C:\\Python27\\include.\nThe default directory to install .sip files in is C:\\Python27\\sip.\nCreating siplib\\sip.h...\nCreating siplib\\siplib.c...\nCreating siplib\\siplib.sbf...\nCreating sipconfig.py...\nCreating top level Makefile...\nCreating sip code generator Makefile...\nCreating sip module Makefile...</code></p></li>\n<li><p>I then run make and i get</p>\n\n<p><code>C:\\Python\\sip&gt;make\n'make' is not recognized as an internal or external command,\noperable program or batch file.</code></p></li>\n</ol>\n\n<p>I've searched through Stack and some are close to the answer but nothing has got me quite there yet.</p>\n\n<p>I'm looking into downloading visual studio as I have been reading that your supposed to run the makefile from there on windows.</p>\n\n<p>Is this correct or am I looking in the wrong place?</p>\n"}, {"tags": ["python", "python-3.x", "steam"], "comments": [{"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459983427, "post_id": 36463687, "comment_id": 60539299, "body": "thanks, will test that right now, what is &lt;&lt; doing? I thought that was some sort of pseudocode when I read it on the steam page"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459983935, "post_id": 36463687, "comment_id": 60539445, "body": "I&#39;m making a more expanded answer for you right now..."}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459983971, "post_id": 36463687, "comment_id": 60539461, "body": "Okay I updated my question to show what I have now thank to your help, not working properly though"}], "answers": [{"comments": [{"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 0, "creation_date": 1459984206, "post_id": 36463885, "comment_id": 60539543, "body": "Thanks for the response, that code is for one specific example right? How do I implement it for any steamID like <code>STEAM_1:0:61759597</code>"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 1, "creation_date": 1459984896, "post_id": 36463885, "comment_id": 60539755, "body": "@Racialz no, I believe you. I guess it was just a random drive-by... At any rate, check out my edit."}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 0, "creation_date": 1459985146, "post_id": 36463885, "comment_id": 60539819, "body": "This looks like it working, just going to do a few more tests to ensure and then i&#39;ll mark it as the answer. As for that seemingly arbitrary number, I was seeing that a lot too when I was trying to solve this on my own before I asked on here. Just edit the line <code>if id_split[1] = &quot;1&quot;:</code> to replace the = with == to help other people with the same problem in the future"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459985205, "post_id": 36463885, "comment_id": 60539833, "body": "I think the formula is for modern formats, the OP&#39;s are legacy."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 0, "creation_date": 1459985216, "post_id": 36463885, "comment_id": 60539836, "body": "@Racialz yes, I just caught that myself. I also renamed some variables. The present version should work fine."}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 0, "creation_date": 1459985552, "post_id": 36463885, "comment_id": 60539929, "body": "Okay it&#39;s marked as the answer, I&#39;m just so surprised that something that I assumed would be common since the steam api only accepts steamid64s would have such a cryptic and weird solution. Thanks for the help"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 1, "creation_date": 1459985723, "post_id": 36463885, "comment_id": 60539986, "body": "@Racialz same here. I can understand the bit-shifting, as that&#39;s done quite frequently in C and C++, which is probably what Steam is written in, but I honestly don&#39;t understand the Python implementation, and I&#39;ve been programming in Python for a long time. Some more research is needed, for sure. I also posted my results for your other two IDs in my answer, so you can double-check them against yours."}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1459985261, "last_edit_date": 1459985261, "creation_date": 1459984079, "answer_id": 36463885, "question_id": 36463687, "link": "https://stackoverflow.com/questions/36463687/how-can-i-get-a-steamid-64-from-a-steamid-in-python/36463885#36463885", "title": "How can I get a steamid 64 from a steamID in python", "body": "<p>The implementation is actually exactly the same as shown on the Steam wiki:</p>\n\n<pre><code>&gt;&gt;&gt; (1 &lt;&lt; 56) | (7 &lt;&lt; 52) | (0 &lt;&lt; 32) | 4\n103582791429521412\n</code></pre>\n\n<p><code>&lt;&lt;</code> and <code>|</code> are <a href=\"https://wiki.python.org/moin/BitwiseOperators\" rel=\"nofollow\">bitwise operators</a>, performing a left shift and a bitwise OR, respectively. You can learn a lot more about <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation\" rel=\"nofollow\">bitwise operations</a> on Wikipedia.</p>\n\n<p>As far as translating arbitrary Steam IDs to the 64-bit system, I found this <a href=\"https://gist.github.com/bcahue/4eae86ae1d10364bb66d\" rel=\"nofollow\">gist</a>:</p>\n\n<pre><code>def steamid_to_64bit(steamid):\n    steam64id = 76561197960265728 # I honestly don't know where\n                                    # this came from, but it works...\n    id_split = steamid.split(\":\")\n    steam64id += int(id_split[2]) * 2 # again, not sure why multiplying by 2...\n    if id_split[1] == \"1\":\n        steam64id += 1\n    return steam64id\n\nIn [14]: steamid_to_64bit(\"STEAM_1:0:61759597\")\nOut[14]: 76561198083784922\n\nIn [15]: steamid_to_64bit(\"STEAM_1:1:20263946\")\nOut[15]: 76561198000793621\n\nIn [16]: steamid_to_64bit(\"STEAM_1:0:105065707\")\nOut[16]: 76561198170397142\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 1, "creation_date": 1459984717, "post_id": 36463960, "comment_id": 60539709, "body": "So how can I use this information to do the conversion from SteamID to SteamID64? I&#39;m under the impression that I need to use the formula <code>(X &lt;&lt; 56) | (Y &lt;&lt; 52) | (Z &lt;&lt; 32) | 4)</code> but I&#39;m having trouble figuring out what is x, what is y, what is z"}], "tags": [], "owner": {"reputation": 675, "user_id": 5602134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/quWOJ.png?s=128&g=1", "display_name": "Erick", "link": "https://stackoverflow.com/users/5602134/erick"}, "is_accepted": false, "score": -1, "last_activity_date": 1459984468, "creation_date": 1459984468, "answer_id": 36463960, "question_id": 36463687, "link": "https://stackoverflow.com/questions/36463687/how-can-i-get-a-steamid-64-from-a-steamid-in-python/36463960#36463960", "title": "How can I get a steamid 64 from a steamID in python", "body": "<p>What exactly is happening is that the SteamID to SteamID64 conversion is taking the base 10 integer information stored in the SteamID, and converting them to a 64-bit binary number.</p>\n\n<p>If you take the Valve group example, you can take the SteamID64 </p>\n\n<p><code>(103582791429521412)_10 = (101110000000000000000000000000000000000000000000000000100)_2.</code></p>\n\n<p>Each character here represents a bit. Looking at the numbers n={56,52,32,0}, you can see that starting at the n-th bit of your 64-bit number, you get the binary value corresponding to a certain stored detail.</p>\n\n<p><code>1|0111|00000000000000000000|00000000000000000000000000000100</code></p>\n\n<ul>\n<li><p>Universe (from 56th bit): 1<sub>2</sub> (Public)</p></li>\n<li><p>Account type (from 52nd bit): 0111<sub>2</sub> = 7 (Clan)</p></li>\n<li><p>Instance (from 32nd bit): 00000000000000000000<sub>2</sub> = 0</p></li>\n<li><p>Account ID (from 0th bit):\n00000000000000000000000000000100<sub>2</sub> = 4</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1460026330, "last_edit_date": 1460026330, "creation_date": 1460023513, "answer_id": 36472887, "question_id": 36463687, "link": "https://stackoverflow.com/questions/36463687/how-can-i-get-a-steamid-64-from-a-steamid-in-python/36472887#36472887", "title": "How can I get a steamid 64 from a steamID in python", "body": "<p>There is an explanation in a <a href=\"http://forums.steampowered.com/forums/showpost.php?p=35768152&amp;postcount=4\" rel=\"nofollow\">steam forum post</a> of how to convert, we only care about the last two numbers:</p>\n\n<p><em>ID3 is therefore the offset from the ID64 base number (76561197960265728), and is the account number. \nFirst ever made account: (its 76561197960265728 + 1, 76561197960265728 does not exist)</em></p>\n\n<pre><code>    ID64 = 76561197960265728 + (B * 2) + A\n    ID3 = (B * 2) + A\n    ID32 = STEAM_0:A:B\n</code></pre>\n\n<p>So all you need is:</p>\n\n<pre><code>def to_steam64(s):\n    return ((b * 2) + a) + 76561197960265728\n</code></pre>\n\n<p>To go the reverse route, from steam64:</p>\n\n<pre><code>def from_steam64(sid):\n    y = int(sid) - 76561197960265728\n    x = y % 2 \n    return \"STEAM_0:{}:{}\".format(x, (y - x) // 2)\n</code></pre>\n\n<p>The is a conversion table <a href=\"http://forum.tsgk.com/viewtopic.php?t=26238\" rel=\"nofollow\">here</a> </p>\n"}], "owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2589, "favorite_count": 0, "accepted_answer_id": 36463885, "answer_count": 3, "score": 2, "last_activity_date": 1460026330, "creation_date": 1459983063, "last_edit_date": 1459983948, "question_id": 36463687, "link": "https://stackoverflow.com/questions/36463687/how-can-i-get-a-steamid-64-from-a-steamid-in-python", "title": "How can I get a steamid 64 from a steamID in python", "body": "<p>I have a list of steam IDS that look like this:</p>\n\n<pre><code>STEAM_1:0:61759597\nSTEAM_1:1:20263946\nSTEAM_1:0:105065707\n</code></pre>\n\n<p>For all the calls to the steam API you need to give it a steamID64, those look like this:</p>\n\n<pre><code>76561198083784922\n76561198000793621\n76561198170397142\n</code></pre>\n\n<p>The steam page shows an example of how to convert from SteamID to SteamID64\n<a href=\"https://developer.valvesoftware.com/wiki/SteamID\" rel=\"nofollow\">https://developer.valvesoftware.com/wiki/SteamID</a></p>\n\n<pre><code>As a 64-bit integer\nGiven the components of a Steam ID, a Steam ID can be converted to it's 64-bit integer form as follows: \n((Universe &lt;&lt; 56) | (Account Type &lt;&lt; 52) | (Instance &lt;&lt; 32) | Account ID)\nWorked Example:\nUniverse: Public (1)\nAccount Type: Clan (7)\nInstance: 0\nAccount ID: 4\n64-bit integer value: 103582791429521412\n</code></pre>\n\n<p>My question is how do I implement this in python. I don't understand anything that going on here. </p>\n\n<p>To make my question super clear I want to start with <code>STEAM_1:0:61759597</code> from that resolve the SteamID64 which is <code>76561198083784922</code></p>\n\n<p>I know this is possible because there are a number of websites that do this:\n<a href=\"https://steamid.io/\" rel=\"nofollow\">https://steamid.io/</a>, <a href=\"http://steamidfinder.com/\" rel=\"nofollow\">http://steamidfinder.com/</a>, <a href=\"https://steamid.co/\" rel=\"nofollow\">https://steamid.co/</a></p>\n\n<p>So many question is: what does this algorithm do and how do I implement it in python?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This is the code i have now, not working as expected:</p>\n\n<pre><code>steamID = \"STEAM_1:0:61759597\"\nX = int(steamID[6:7])\nY = int(steamID[8:9])\nZ = int(steamID[10:])\n\n#x is 1\n#y is 0\n#z is 61759597\n\nprint(X,Y,Z)\n\nprint((X &lt;&lt; 56) | (Y &lt;&lt; 52) | (Z &lt;&lt; 32) | 4)\n#current output: 265255449329139716\n#desired output: 76561198083784922\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 13398, "user_id": 442650, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/728395557/picture?type=large", "display_name": "Jonathan Vanasco", "link": "https://stackoverflow.com/users/442650/jonathan-vanasco"}, "edited": false, "score": 0, "creation_date": 1459987553, "post_id": 36463916, "comment_id": 60540477, "body": "Sometimes you need to explicitly join in order to filter.  If that is the case, you should use <code>contains_eager</code>, otherwise sqlalchemy will make anonymous joins for the relationships as well."}], "tags": [], "owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "is_accepted": false, "score": 1, "last_activity_date": 1459984586, "last_edit_date": 1459984586, "creation_date": 1459984235, "answer_id": 36463916, "question_id": 36463623, "link": "https://stackoverflow.com/questions/36463623/optimally-access-an-sqlalchemy-model-paramater-n-number-of-relationships-away/36463916#36463916", "title": "Optimally access an SQLAlchemy model paramater n number of relationships away", "body": "<p>By default, relationships are not loaded. That means the first time you access a relationship a query is emitted to fetch the data, which in turn doesn't load <em>its</em> relationships. For your scenario, for <code>n</code> <code>ZabTest</code> instances, it emits <code>4n</code> queries to get the name of the location.</p>\n\n<p>The general approach to making many small operations efficient is through batching, which combines the overhead of many operations into one. The way to do this in SQL is to query multiple rows at once instead of one row at a time. SQLAlchemy exposes this ability through <a href=\"http://docs.sqlalchemy.org/en/latest/orm/loading_relationships.html#using-loader-strategies-lazy-loading-eager-loading\" rel=\"nofollow\">eager loading</a>:</p>\n\n<pre><code>session.query(ZabTest).options(\n    joinedload(ZabTest.equipmentzab)\n    .joinedload(EquipmentZab.equipmentbar)\n    .joinedload(EquipmentBar.equipmentfoo)\n    .joinedload(EquipmentFoo.location))\n</code></pre>\n\n<p>What this accomplishes is it populates the entire chain of <code>self.equipmentbar.equipmentfoo.location.name</code>, including <code>ZabTest</code> itself, <em>in a single query</em>.</p>\n\n<p>Alternatively, you can configure SQLAlchemy to <em>always</em> eager load:</p>\n\n<pre><code>zabtests = relationship('ZabTest', backref=backref('equipmentzab', lazy=\"joined\"))\n</code></pre>\n\n<p>Be forewarned: since you are also using inheritance, the eager loading syntax may get hairy. Always check the emitted SQL to make sure you are joining things in correctly.</p>\n"}], "owner": {"reputation": 3377, "user_id": 2224777, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/4s327.png?s=128&g=1", "display_name": "Brian Leach", "link": "https://stackoverflow.com/users/2224777/brian-leach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1459984586, "creation_date": 1459982701, "question_id": 36463623, "link": "https://stackoverflow.com/questions/36463623/optimally-access-an-sqlalchemy-model-paramater-n-number-of-relationships-away", "title": "Optimally access an SQLAlchemy model paramater n number of relationships away", "body": "<p>The title of the question may be confusing, but I believe I have described the issue below. </p>\n\n<p>I have various declarative \"test type\" models that I have built with SQLAlchemy. Each \"test type\" model is associated with a piece of \"equipment\" that sits on a \"location\". Therefore, each test type has a \"location.name\" parameter that is located a varying number of relationships away from the actual test model. I need this \"location.name\" value to be associated with each \"test\" object. </p>\n\n<p>The way I have it set up now emits a ton of SQL when querying the tests. I imagine this is because of the relationship cascade. I display all tests in a single table and I would like to be able to somehow filter the tests based on the location they are associated with.</p>\n\n<p>This model configuration is new to me and I am do not know how to interact with it using raw <code>SQL</code>, I only know how to work with the models.</p>\n\n<p>I am wondering what the optimal way to get a particular test instance's location's name parameter. Notice that <code>location.name</code> is returned on each test's <code>get_json()</code> function, although I am hoping there is a better way that will emit less SQL and be simpeler when it comes to filtering all test types. </p>\n\n<p>Hopefully the below model definitions make this clear</p>\n\n<pre><code>class Location(Model):\n    __tablename__ = 'locations'\n    id = Column(Integer, Sequence('location_id_seq'), primary_key=True)\n    name = Column(String(50), unique=True)\n    ...\n\n\nclass EquipmentFoo(Model):\n    __tablename__ = 'equipmentfoos'\n    id = Column(Integer, Sequence('equipmentfoo_id_seq'), primary_key=True)\n    location_id = Column(Integer, ForeignKey('locations.id'))\n    location = relationship('Location', backref='equipmentfoos')\n    footests = relationship('FooTest', backref='equipmentfoo')\n    ...\n\n\nclass EquipmentBar(Model):\n    __tablename__ = 'equipmentbars'\n    id = Column(Integer, Sequence('equipmentbar_id_seq'), primary_key=True)\n    equipmentfoo_id = Column(Integer, ForeignKey('equipmentfoos.id'))\n    equipmentfoo = relationship('EquipmentFoo', backref='equipmentbars')\n    bartests = relationship('BarTest', backref='equipmentbar')\n    ...\n\n\nclass EquipmentZab(Model):\n    __tablename__ = 'equipmentzabs'\n    id = Column(Integer, Sequence('equipmentzab_id_seq'), primary_key=True)\n    equipmentbar_id = Column(Integer, ForeignKey('equipmentbars.id'))\n    equipmentbar = relationship('EquipmentBar', backref='equipmentzabs')\n    zabtests = relationship('ZabTest', backref='equipmentzab')\n    ...\n</code></pre>\n\n<p>So there are the equipment models and how they relate to a location. Also included are their relationships to their respective tests below. </p>\n\n<pre><code>class HasId(object):\n    @declared_attr\n    def id(cls):\n        return Column('id', Integer, Sequence('test_id_seq'), primary_key=True)\n    @declared_attr\n    def status(cls):\n        return Column('status', String(50))\n    ...\n\n\nclass TestParent(HasId, Model):\n    __tablename__ = 'tests'\n    discriminator = Column(String(50))\n    __mapper_args__ = {'polymorphic_on': discriminator}\n    ...\n    def parent_json(self):\n        return {'id': self.id,\n                'status': self.status,\n                ...\n                }         \n\n\nclass FooTest(TestParent):\n    __tablename__ = 'footests'\n    __mapper_args__ = {'polymorphic_identity': 'footests'}\n    id = Column(Integer, ForeignKey('tests.id'), primary_key=True) cascade='save-update, merge')\n    pressure_start = Column(Float)\n    ...\n    def get_json():\n        my_json = {'location': self.equipmentfoo.location.name,\n                   'pressure_start': self.pressure_start,\n                   ...\n                   }\n        parent_json = super(FooTest, self).parent_json()\n        my_json.update(parent_json)\n        return my_json\n\n\nclass BarTest(TestParent):\n    __tablename__ = 'bartests'\n    __mapper_args__ = {'polymorphic_identity': 'bartests'}\n    id = Column(Integer, ForeignKey('tests.id'), primary_key=True) cascade='save-update, merge')\n    hatch_value = Column(Boolean)\n    ...\n    def get_json():\n        my_json = {'location': self.equipmentbar.equipmentfoo.location.name,\n                   'hatch_value': self.hatch_value,\n                   ...\n                   }\n        parent_json = super(BarTest, self).parent_json()\n        my_json.update(parent_json)\n        return my_json\n\n\nclass ZabTest(TestParent):\n    __tablename__ = 'zabtests'\n    __mapper_args__ = {'polymorphic_identity': 'zabtests'}\n    id = Column(Integer, ForeignKey('tests.id'), primary_key=True) cascade='save-update, merge')\n    safety_check = Column(Boolean)\n    ...\n    def get_json():\n        my_json = {'location': self.equipmentzab.equipmentbar.equipmentfoo.location.name,\n                   'safety_check': self.hatch_value,\n                   ...\n                   }\n        parent_json = super(ZabTest, self).parent_json()\n        my_json.update(parent_json)\n        return my_json\n</code></pre>\n"}, {"tags": ["python", "igraph"], "comments": [{"owner": {"reputation": 43955, "user_id": 156771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2163ccb26148ab885d6d827e7cb270a1?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s", "link": "https://stackoverflow.com/users/156771/tam%c3%a1s"}, "edited": false, "score": 0, "creation_date": 1460196302, "post_id": 36463619, "comment_id": 60636327, "body": "Show us the original DIMACS file. Judging from igraph&#39;s output, the original DIMACS file was read in a way that vertex zero is an isolated vertex."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 43955, "user_id": 156771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2163ccb26148ab885d6d827e7cb270a1?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s", "link": "https://stackoverflow.com/users/156771/tam%c3%a1s"}, "edited": false, "score": 0, "creation_date": 1460235182, "post_id": 36463619, "comment_id": 60649928, "body": "@Tam&#225;s Vertex zero does not exist in the original DIMACS file, because the format specify that the first label must be 1. The input file is identical to the written but vertex labels starts from 1: [(1, 2), (1, 8), (1, 11), (1 ,14) ...]"}, {"owner": {"reputation": 43955, "user_id": 156771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2163ccb26148ab885d6d827e7cb270a1?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s", "link": "https://stackoverflow.com/users/156771/tam%c3%a1s"}, "edited": false, "score": 0, "creation_date": 1460368247, "post_id": 36463619, "comment_id": 60691468, "body": "Still, I need to see your original file to check what igraph does with it - otherwise I can&#39;t help. Trying with a random DIMACS file that I have created by hand seems to work."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 43955, "user_id": 156771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2163ccb26148ab885d6d827e7cb270a1?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s", "link": "https://stackoverflow.com/users/156771/tam%c3%a1s"}, "edited": false, "score": 0, "creation_date": 1460408549, "post_id": 36463619, "comment_id": 60718821, "body": "@Tam&#225;s I was just updating the post with the file when I decided to try it again and now it works perfectly. Obviously I must have made some mistakes that I cannot reproduce. All&#39;s well that ends well (now I&#39;m playing with write_svg ... adding g.vs[&quot;size&quot;] ... but this will be another question)"}], "answers": [{"comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1460071584, "post_id": 36487483, "comment_id": 60586705, "body": "Thanks for the solution, I must admit that I believed the docs and did not tried to set <code>capacity</code>. I still have some issues with the labels in the written file (as far as I know DIMACS labels should start from 1) and I updated my question accordingly. If you have some other insight I will appreciate but I consider you answer correct, thanks again."}], "tags": [], "owner": {"reputation": 43955, "user_id": 156771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2163ccb26148ab885d6d827e7cb270a1?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s", "link": "https://stackoverflow.com/users/156771/tam%c3%a1s"}, "is_accepted": true, "score": 1, "last_activity_date": 1460064195, "creation_date": 1460064195, "answer_id": 36487483, "question_id": 36463619, "link": "https://stackoverflow.com/questions/36463619/problems-using-the-method-write-dimacs-of-igraph/36487483#36487483", "title": "Problems using the method `write_dimacs` of igraph", "body": "<p>The <code>write_dimacs</code> method is for writing igraph graphs in the <a href=\"http://lpsolve.sourceforge.net/5.5/DIMACS_maxf.htm\" rel=\"nofollow\">DIMACS maximum flow problem format</a>. This format requires you to:</p>\n\n<ul>\n<li>specify the <code>source</code> vertex of the maximum flow problem</li>\n<li>specify the <code>target</code> vertex of the maximum flow problem</li>\n<li>specify the capacities of the edges</li>\n</ul>\n\n<p>The source and target vertices are defined from the <code>source</code> and <code>target</code> attributes of the graph. The capacities are assumed to come from the <code>capacity</code> edge attribute. igraph's documentation has a bug here: the documentation says that if the <code>capacity</code> attribute is missing, it will simply assume that all the capacities are equal to 1, but this is not the case - you need to pass the capacities explicitly, or provide the name of an edge attribute that specifies the edge capacities.</p>\n\n<p>In your case, the easiest way to get it working is as follows:</p>\n\n<pre><code>g.write_dimacs(\"graph5.txt\", source=0, target=1, capacity=[1]*g.ecount())\n</code></pre>\n\n<p>where I have simply defined two arbitrary vertices as source and target.</p>\n"}], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 36487483, "answer_count": 1, "score": 0, "last_activity_date": 1460408585, "creation_date": 1459982693, "last_edit_date": 1460408585, "question_id": 36463619, "link": "https://stackoverflow.com/questions/36463619/problems-using-the-method-write-dimacs-of-igraph", "title": "Problems using the method `write_dimacs` of igraph", "body": "<p>I have problems using the method <code>write_dimacs</code> of the <a href=\"http://igraph.org/python/doc/igraph.Graph-class.html#write_dimacs\" rel=\"nofollow\">igraph</a> python library:</p>\n\n<p>For some reasons which I don't understand, when I try to use it I get the error: <code>KeyError: 'Attribute does not exist'</code> (see full output below).</p>\n\n<p>Here is a sample code snippet that reproduces the error on my system (mac os x 10.10.5, python 3.5.1, python-igraph-0.7.1.post6):</p>\n\n<pre><code>from igraph import *\n\ng = Graph.Read_Edgelist(\"graph3.txt\")\n\nprint(g)\n\n# This works fine\ng.write_adjacency(\"graph4.txt\")\n\n# This gives the error\ng.write_dimacs(\"graph5.txt\")\n</code></pre>\n\n<p>I get the same error also if I explicitly pass the other arguments to the method, like in: <code>g.write_dimacs(\"graph5.txt\", 1)</code></p>\n\n<p><strong>Output:</strong></p>\n\n<hr>\n\n<pre><code>IGRAPH D--- 15 22 --\n+ edges:\n1-&gt;2 1-&gt;8 1-&gt;11 1-&gt;14 2-&gt;3 2-&gt;6 3-&gt;4 4-&gt;5 5-&gt;4 5-&gt;1 6-&gt;4 6-&gt;7 7-&gt;4 8-&gt;9 8-&gt;11\n8-&gt;12 9-&gt;10 10-&gt;9 10-&gt;5 11-&gt;12 12-&gt;13 13-&gt;10\nTraceback (most recent call last):\n  File \"test.py\", line 10, in &lt;module&gt;\n    g.write_dimacs(\"graph5.txt\")\n  File \"build/bdist.macosx-10.10-intel/egg/igraph/__init__.py\", line 1676, in write_dimacs\nKeyError: 'Attribute does not exist'\n</code></pre>\n\n<p>Does anybody know what is happening?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "yaml", "pyyaml"], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 4077356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fa99bc2de496c4400cc1fd035d94dc27?s=128&d=identicon&r=PG&f=1", "display_name": "sulimmesh", "link": "https://stackoverflow.com/users/4077356/sulimmesh"}, "edited": false, "score": 0, "creation_date": 1459985319, "post_id": 36463915, "comment_id": 60539866, "body": "If I&#39;m using <code>SafeLoader</code> would I need to use a <code>SafeConstructor</code> instead?"}, {"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "reply_to_user": {"reputation": 583, "user_id": 4077356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fa99bc2de496c4400cc1fd035d94dc27?s=128&d=identicon&r=PG&f=1", "display_name": "sulimmesh", "link": "https://stackoverflow.com/users/4077356/sulimmesh"}, "edited": false, "score": 0, "creation_date": 1459987825, "post_id": 36463915, "comment_id": 60540540, "body": "Yup. That&#39;s the one for you"}], "tags": [], "owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "is_accepted": true, "score": 4, "last_activity_date": 1459984228, "creation_date": 1459984228, "answer_id": 36463915, "question_id": 36463531, "link": "https://stackoverflow.com/questions/36463531/pyyaml-automatically-converting-certain-keys-to-boolean-values/36463915#36463915", "title": "PyYAML automatically converting certain keys to boolean values", "body": "<p><code>yaml.load</code> takes a second argument, a loader class (by default, <code>yaml.loader.Loader</code>). The predefined loader is a mash up of a number of others:</p>\n\n<pre><code>class Loader(Reader, Scanner, Parser, Composer, Constructor, Resolver):\n\n    def __init__(self, stream):\n        Reader.__init__(self, stream)\n        Scanner.__init__(self)\n        Parser.__init__(self)\n        Composer.__init__(self)\n        Constructor.__init__(self)\n        Resolver.__init__(self)\n</code></pre>\n\n<p>The <code>Constructor</code> class is the one performing the data type conversion. One (kludgy, but fast) way to override the boolean conversion could be:</p>\n\n<pre><code>from yaml.constructor import Constructor\n\ndef add_bool(self, node):\n    return self.construct_scalar(node)\n\nConstructor.add_constructor(u'tag:yaml.org,2002:bool', add_bool)\n</code></pre>\n\n<p>which overrides the function that the constructor uses to turn boolean-tagged data into Python booleans. What we're doing here is just returning the string, verbatim.</p>\n\n<p>This affects <strong>ALL</strong> YAML loading, though, because you're overriding the behaviour of the default constructor. A more proper way to do things could be to create a new class derived from <code>Constructor</code>, and new <code>Loader</code> object taking your custom constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 583, "user_id": 4077356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fa99bc2de496c4400cc1fd035d94dc27?s=128&d=identicon&r=PG&f=1", "display_name": "sulimmesh", "link": "https://stackoverflow.com/users/4077356/sulimmesh"}, "edited": false, "score": 0, "creation_date": 1460047981, "post_id": 36470466, "comment_id": 60574725, "body": "I&#39;ve taken a look at this package before and I do think for the long term this might be what I go with. Keeping comments and special keys is also useful."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 583, "user_id": 4077356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fa99bc2de496c4400cc1fd035d94dc27?s=128&d=identicon&r=PG&f=1", "display_name": "sulimmesh", "link": "https://stackoverflow.com/users/4077356/sulimmesh"}, "edited": false, "score": 0, "creation_date": 1460054994, "post_id": 36470466, "comment_id": 60578938, "body": "@skeletalbassman Did you actually get this to work with Ricardo&#39;s answer? I more or less stopped reading that once I hit his nonsense about &quot;data conversion by the Constructor class&quot; and he certainly doesn&#39;t take the easiest route when doing this in PyYAML (which is changing the pattern for boolean recognition)."}, {"owner": {"reputation": 583, "user_id": 4077356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fa99bc2de496c4400cc1fd035d94dc27?s=128&d=identicon&r=PG&f=1", "display_name": "sulimmesh", "link": "https://stackoverflow.com/users/4077356/sulimmesh"}, "edited": false, "score": 0, "creation_date": 1460055315, "post_id": 36470466, "comment_id": 60579140, "body": "Yeah it does work. I needed a quick solution since I&#39;m launching in a week. There are reasons to convert to a package that supports comments, but that would be a project in itself to change our dependencies."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 583, "user_id": 4077356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fa99bc2de496c4400cc1fd035d94dc27?s=128&d=identicon&r=PG&f=1", "display_name": "sulimmesh", "link": "https://stackoverflow.com/users/4077356/sulimmesh"}, "edited": false, "score": 0, "creation_date": 1460056329, "post_id": 36470466, "comment_id": 60579713, "body": "@skeletalbassman I update my answer, with just 6 lines you can prevent PyYAML to recognise On/Off/Yes/No as boolean without affecting True and False being a boolean. Quicker and (subjectively) cleaner."}, {"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1460084850, "post_id": 36470466, "comment_id": 60590066, "body": "@Anthon. Sorry if what I said sounds like &quot;nonsense&quot; to you. I just had a cursory look at the way PyYAML deals with data and yeah, actually <code>SafeConstructor</code> takes a node tagged (by the resolver) as boolean and uses a dict mapping &#39;yes&#39;, &#39;no&#39;, &#39;true&#39;, &#39;false&#39;, &#39;on&#39;, &#39;off&#39; to <code>True</code>/<code>False</code> to return the matching boolean value, so I didn&#39;t even bother looking further. I tested the proposed solution. It worked. I posted it. It may not be the ideal place to change the behaviour. It&#39;s kludgy (and I advertised as that). But hey, it works for a quick job."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1460096484, "post_id": 36470466, "comment_id": 60593692, "body": "@RicardoC&#225;rdenes I specifically indicated what sounded nonsense to me (the Constructor doesn&#39;t change data types), not that all you wrote (said) did sound so. And given the little context that the small example the OP gave couldn&#39;t imagine it would work correctly for him. PyYAML sucks in that it sets its recognition patterns on import  (in <code>resolver.py:167</code>), so they are difficult to change. But that IMO the ideal place to attack this."}, {"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1460103336, "post_id": 36470466, "comment_id": 60597298, "body": "I see. What I meant with &quot;data type conversion&quot; is &quot;mapping raw data to Python&#39;s native types&quot; (ie. int, float, boolean, etc.) My bad, I wrote something funny."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 12, "last_activity_date": 1460056719, "last_edit_date": 1460056719, "creation_date": 1460017090, "answer_id": 36470466, "question_id": 36463531, "link": "https://stackoverflow.com/questions/36463531/pyyaml-automatically-converting-certain-keys-to-boolean-values/36470466#36470466", "title": "PyYAML automatically converting certain keys to boolean values", "body": "<p>PyYAML is <a href=\"http://pyyaml.org/#Whatimplementationshouldyouuse\" rel=\"noreferrer\">YAML 1.1 conformant</a> for parsing and emitting, and for YAML 1.1 this is <a href=\"http://yaml.org/spec/1.1/current.html#id864510\" rel=\"noreferrer\">at least partly documented</a> behavior, so no idiosyncrasy at all, but conscious design.</p>\n\n<p>In YAML 1.2 (which in 2009 superseded the 1.1 specification from 2005)  this usage of <code>Off/On/Yes/No</code> was dropped, among other changes.</p>\n\n<p>In <a href=\"https://pypi.python.org/pypi/ruamel.yaml/\" rel=\"noreferrer\"><code>ruamel.yaml</code></a> (disclaimer: I am the author of that package), the <code>round_trip_loader</code> is a safe_loader that defaults to YAML 1.2 behaviour:</p>\n\n<pre><code>import ruamel.yaml as yaml\n\nyaml_str = \"\"\"\\\noff:\n    yes: \"Flavor text for yes\"  # quotes around value dropped\n    no: \"Flavor text for no\"\n\"\"\"\n\ndata = yaml.round_trip_load(yaml_str)\nassert 'off' in data\nprint(yaml.round_trip_dump(data, indent=4))\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>off:\n    yes: Flavor text for yes    # quotes around value dropped\n    no: Flavor text for no\n</code></pre>\n\n<p>If your output needs to be version 1.1 compatible then you can dump with\nan explicit <code>version=(1, 1)</code>.</p>\n\n<p>Since the quotes around the nested mapping's scalar values are unnecessary they are <strong>not</strong> emitted on writing out.</p>\n\n<hr>\n\n<p>If you need to do this with PyYAML, rewrite the (global) rules it uses for boolean recognition:</p>\n\n<pre><code>import  yaml\nfrom yaml.resolver import Resolver\nimport re\n\nyaml_str = \"\"\"\\\noff:\n    yes: \"Flavor text for yes\"  # quotes around value dropped\n    no: \"Flavor text for no\"\n\"\"\"\n\n# remove resolver entries for On/Off/Yes/No\nfor ch in \"OoYyNn\":\n    if len(Resolver.yaml_implicit_resolvers[ch]) == 1:\n        del Resolver.yaml_implicit_resolvers[ch]\n    else:\n        Resolver.yaml_implicit_resolvers[ch] = [x for x in\n                Resolver.yaml_implicit_resolvers[ch] if x[0] != 'tag:yaml.org,2002:bool']\n\ndata = yaml.load(yaml_str)\nprint(data)\nassert 'off' in data\nprint(yaml.dump(data))\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>{'off': {'yes': 'Flavor text for yes', 'no': 'Flavor text for no'}}\noff: {no: Flavor text for no, yes: Flavor text for yes}\n</code></pre>\n\n<p>This works because PyYAML keeps a global dict (<code>Resolver.yaml_implicit_resolvers</code>) which maps first letters to a list of (tag, re.match_pattern) values. For for <code>o</code>, <code>O</code>, <code>y</code> and <code>Y</code> there is only one such pattern (and it can be deleted), but for <code>n</code>/<code>N</code> you can also match <code>null</code>/<code>Null</code>, so you have to delete the right pattern.</p>\n\n<p>After that removal <code>yes</code>, <code>no</code>, <code>on</code>, <code>Off</code> are no longer recognised as bool, but <code>True</code> and <code>False</code> still are.</p>\n"}, {"comments": [{"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 1, "creation_date": 1487277888, "post_id": 36493902, "comment_id": 71725139, "body": "Your advice alters not just keys but any use of ` on:` including things like <code>{ text: &quot;Turn on: then tune out&quot;}</code>"}, {"owner": {"reputation": 538, "user_id": 4912876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5f96391f5499c01e98d03957e31f98?s=128&d=identicon&r=PG", "display_name": "Toni Homedes i Saun", "link": "https://stackoverflow.com/users/4912876/toni-homedes-i-saun"}, "reply_to_user": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1538141482, "post_id": 36493902, "comment_id": 92051473, "body": "@JasonS : Felix&#39;s implementation is wrong, but his idea is sound: Don&#39;t rely on the inner implementation of yaml because it could change at any moment without notice. Instead, alter the input in a compatible way that will give the good result. Now, <i>properly</i> writing that filter is not going to be easy, <i>at all</i>. It would probably need a full and compliant Yaml parser."}], "tags": [], "owner": {"reputation": 27, "user_id": 6175922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160ff5b1d15bb5de08264e98c2a09d0d?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/6175922/felix"}, "is_accepted": false, "score": 1, "last_activity_date": 1460100440, "creation_date": 1460100440, "answer_id": 36493902, "question_id": 36463531, "link": "https://stackoverflow.com/questions/36463531/pyyaml-automatically-converting-certain-keys-to-boolean-values/36493902#36493902", "title": "PyYAML automatically converting certain keys to boolean values", "body": "<p>Simply sanitize your input:</p>\n\n<pre><code>import  yaml\n\n\ndef sanitize_load(s):\n    s = ' ' + s\n    for w in \"yes no Yes No Off off On on\".split():\n        s = s.replace(' ' + w + ':', ' \"' + w + '\":')\n    return yaml.load(s[1:])\n\nwith open(filename) as f:\n    data = sanitize_load(f.read())\nprint data\n</code></pre>\n\n<p>This is mucht better than blindly poking in the horrible depths of pyyaml. That packages comes with two, almost but not quite identical, sources and is  a maintenance nightmare.</p>\n"}, {"tags": [], "owner": {"reputation": 265, "user_id": 6779704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec5391fe5e7e39e1e81ec00ef0c7799?s=128&d=identicon&r=PG", "display_name": "wski", "link": "https://stackoverflow.com/users/6779704/wski"}, "is_accepted": false, "score": 2, "last_activity_date": 1572277294, "creation_date": 1572277294, "answer_id": 58593978, "question_id": 36463531, "link": "https://stackoverflow.com/questions/36463531/pyyaml-automatically-converting-certain-keys-to-boolean-values/58593978#58593978", "title": "PyYAML automatically converting certain keys to boolean values", "body": "<p>Ran into this problem at work and had to implement it the \"correct\" way. Here are the steps that I took. Note, I am using the SafeLoader, not the regular Loader. The steps would be VERY similar.</p>\n\n<p>General steps are</p>\n\n<ol>\n<li>Create custom <code>SafeConstuctor</code></li>\n<li>Create custom <code>SafeLoader</code> that imports this custom <code>SafeConstructor</code></li>\n<li>Call <code>yaml.load</code>'s \"load\" function, passing in the custom <code>SafeLoader</code> we\ncreated with the custom <code>SafeConstructor</code></li>\n</ol>\n\n<p><strong>MySafeConstructor.py</strong></p>\n\n<pre><code>from yaml.constructor import SafeConstructor\n\n# Create custom safe constructor class that inherits from SafeConstructor\nclass MySafeConstructor(SafeConstructor):\n\n    # Create new method handle boolean logic\n    def add_bool(self, node):\n        return self.construct_scalar(node)\n\n# Inject the above boolean logic into the custom constuctor\nMySafeConstructor.add_constructor('tag:yaml.org,2002:bool',\n                                      MySafeConstructor.add_bool)\n</code></pre>\n\n<ol start=\"4\">\n<li>I then create a brand new loader class using the same format as the <a href=\"https://github.com/yaml/pyyaml/blob/e471e86bf6dabdad45a1438c20a4a5c033eb9034/lib/yaml/loader.py\" rel=\"nofollow noreferrer\">rest of the loaders defined</a> except we pass in our newly created custom <code>Constructor</code>. We are essentially just \"adding\" to this list.</li>\n</ol>\n\n<p><strong>MySafeLoader.py</strong></p>\n\n<pre><code>from yaml.reader import *\nfrom yaml.scanner import *\nfrom yaml.parser import *\nfrom yaml.composer import *\nfrom MySafeConstructor import *\nfrom yaml.resolver import *\n\n\nclass MySafeLoader(Reader, Scanner, Parser, Composer, MySafeConstructor, Resolver):\n\n    def __init__(self, stream):\n        Reader.__init__(self, stream)\n        Scanner.__init__(self)\n        Parser.__init__(self)\n        Composer.__init__(self)\n        MySafeConstructor.__init__(self)\n        Resolver.__init__(self)\n</code></pre>\n\n<ol start=\"5\">\n<li>Finally, we will <code>import</code> the custom safe loader into the <code>main.py</code> or wherever you are doing your load (works in <code>__init__()</code> too)</li>\n</ol>\n\n<p><strong>main.py</strong></p>\n\n<pre><code># Mandatory imports\nfrom yaml import load\nfrom MySafeLoader import MySafeLoader\n\ndef main():\n\n    filepath_to_yaml = \"/home/your/filepath/here.yml\"\n\n    # Open the stream, load the yaml doc using the custom SafeLoader\n    file_stream: TextIO = open(filepath_to_yaml , 'r')\n    yaml_as_dict = load(file_stream, MySafeLoader)\n    file_stream.close()\n\n    # Print our result\n    print(yaml_as_dict)\n\n</code></pre>\n\n<p>Now we can use either the standard loader or our custom loader modified for the boolean logic we want. If you want other values than the strings you can try overriding the <code>bool_values</code> <a href=\"https://github.com/yaml/pyyaml/blob/master/lib3/yaml/constructor.py\" rel=\"nofollow noreferrer\">list in the MySafeConstructor class</a>, as this is a global list containing the logic for translation.</p>\n\n<p><strong>constructor.py</strong></p>\n\n<pre><code>    bool_values = {\n        'yes':      True,\n        'no':       False,\n        'true':     True,\n        'false':    False,\n        'on':       True,\n        'off':      False,\n    }\n</code></pre>\n\n<p><strong>Note</strong>: If you do this, you will not want to override the boolean logic, just override this list.</p>\n"}], "owner": {"reputation": 583, "user_id": 4077356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fa99bc2de496c4400cc1fd035d94dc27?s=128&d=identicon&r=PG&f=1", "display_name": "sulimmesh", "link": "https://stackoverflow.com/users/4077356/sulimmesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8303, "favorite_count": 2, "accepted_answer_id": 36463915, "answer_count": 4, "score": 9, "last_activity_date": 1572277294, "creation_date": 1459982160, "last_edit_date": 1460010544, "question_id": 36463531, "link": "https://stackoverflow.com/questions/36463531/pyyaml-automatically-converting-certain-keys-to-boolean-values", "title": "PyYAML automatically converting certain keys to boolean values", "body": "<p>I've been working with a the <code>PyYAML</code> parser for a few months now to convert file types as part of a data pipeline. I've found the parser to be quite idiosyncratic at times and it seems that today I've stumbled on another strange behavior. The file I'm currently converting contains the following section:</p>\n\n<pre><code>off:\n    yes: \"Flavor text for yes\"\n    no: \"Flavor text for no\"\n</code></pre>\n\n<p>I keep a list of the current nesting in the dictionary so that I can construct a flat document, but save the nesting to convert back to YAML later on. I got a <code>TypeError</code> saying I was trying to concatenate a <code>str</code> and <code>bool</code> type together. I investigated and found that <code>PyYaml</code> is actually taking my section of text above and converting it to the following:</p>\n\n<pre><code>with open(filename, \"r\") as f:\n    data = yaml.load(f.read())\nprint data\n\n&gt;&gt; {False: {True: \"Flavor text for yes\", False: \"Flavor text for no}}\n</code></pre>\n\n<p>I did a quick check and found that <code>PyYAML</code> was doing this for <code>yes</code>, <code>no</code>, <code>true</code>, <code>false</code>, <code>on</code>, <code>off</code>. It only does this conversion if the keys are unquoted. Quoted values and keys will be passed fine. Looking for solutions, I found this behavior documented <a href=\"https://docs.saltstack.com/en/latest/topics/troubleshooting/yaml_idiosyncrasies.html\" rel=\"noreferrer\">here</a>. </p>\n\n<p>Although it might be helpful to others to know that quoting the keys will stop <code>PyYAML</code> from doing this, I don't have this option as I am not the author of these files and have written my code to touch the data as little as possible. </p>\n\n<p>Is there a workaround for this issue or a way to override the default conversion behavior in <code>PyYAML</code>? </p>\n"}, {"tags": ["python", "python-closures"], "answers": [{"tags": [], "owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "is_accepted": false, "score": 8, "last_activity_date": 1533026155, "last_edit_date": 1533026155, "creation_date": 1459982728, "answer_id": 36463629, "question_id": 36463498, "link": "https://stackoverflow.com/questions/36463498/what-dose-late-binding-closures-mean/36463629#36463629", "title": "What dose &quot;late binding closures&quot; mean?", "body": "<p>Notice this, you can create functions on runtime, more or less like <code>lambdas</code> in c++. So basically you are iterating over a list, making <code>n</code> take values <code>1,2 and 3</code></p>\n\n<pre><code>for n in [1, 2, 3]:\n    def func(x):\n        return n*x\n</code></pre>\n\n<p>so, by each iteration you are building a function named func, with takes a value and multiplies it for n. By appending it to the functions list you will have this functions stored, so you can iterate over the list to call the functions.</p>\n\n<pre><code>[function(2) for function in functions]\n</code></pre>\n\n<p>By doing this you call each of the functions stored with the value <code>2</code>, you would expect this to output <code>[2, 4, 6]</code> ([1*2, 2*2, 3*2]), but instead it returns <code>[6, 6, 6]</code>, WHY?, thats becouse every function use <code>n</code> for its computation, so they are not really doing <code>1*x, 2*x and 3*x</code> but actually <code>n*x</code> and since <code>n</code> is bonded in last time to <code>3</code> all functions are doing <code>3*2</code> wich becomes <code>6</code>.</p>\n\n<p>Play around with the python console to check it properly.</p>\n"}, {"comments": [{"owner": {"reputation": 227, "user_id": 6158370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8de3ebf8e6e37662954c89649aeffd?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo", "link": "https://stackoverflow.com/users/6158370/bobo"}, "edited": false, "score": 0, "creation_date": 1459983210, "post_id": 36463673, "comment_id": 60539218, "body": "But would this not yeild [2 4 6] instead of [6 6 6]"}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "reply_to_user": {"reputation": 227, "user_id": 6158370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8de3ebf8e6e37662954c89649aeffd?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo", "link": "https://stackoverflow.com/users/6158370/bobo"}, "edited": false, "score": 1, "creation_date": 1459983717, "post_id": 36463673, "comment_id": 60539379, "body": "Daniel&#39;s answer is correct - he caught something I didn&#39;t. They all refer to n, and since n has settled at a value of 2 at the end, all functions will behave in the exact same way."}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "reply_to_user": {"reputation": 227, "user_id": 6158370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8de3ebf8e6e37662954c89649aeffd?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo", "link": "https://stackoverflow.com/users/6158370/bobo"}, "edited": false, "score": 0, "creation_date": 1459984046, "post_id": 36463673, "comment_id": 60539488, "body": "I&#39;ve amended to mention the dependency on n, and am leaving the solution posted to clarify the connection to pointers in C++."}], "tags": [], "owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "is_accepted": false, "score": 2, "last_activity_date": 1459983943, "last_edit_date": 1459983943, "creation_date": 1459983017, "answer_id": 36463673, "question_id": 36463498, "link": "https://stackoverflow.com/questions/36463498/what-dose-late-binding-closures-mean/36463673#36463673", "title": "What dose &quot;late binding closures&quot; mean?", "body": "<p>In the language of C++, a pointer to the function is what's being appended to the list. After the <code>for</code> loop, <code>functions</code> contains pointers to three different functions (<code>func(x) = n * x</code>, <code>func(x) = n * x</code> and <code>func(x) = n * x</code>). Note the dependency on n. As n changes, so will the behavior of these functions, and they are all equivalent.</p>\n\n<p>In the second part of the code, the pointers are extracted from the list and each of the three functions is evaluated with an argument of <code>2</code>.</p>\n\n<p>Here's a further example to clarify. Imagine we do this:</p>\n\n<pre><code>&gt;&gt;&gt; functions\n[&lt;function func at 0x0239AA70&gt;, &lt;function func at 0x0239AAB0&gt;, &lt;function func at 0x0239AB30&gt;]\n&gt;&gt;&gt; g = functions[2]\n&gt;&gt;&gt; g\n&lt;function func at 0x0239AB30&gt;\n&gt;&gt;&gt; g(10)\n20\n&gt;&gt;&gt; g(100)\n200\n</code></pre>\n\n<p>What we're seeing in that first lines is that functions contains pointers to three different functions. The next line extracts the third pointer from the list (which refers to <code>func(x) = n * x</code>) and assigns it to g. Effectively, we have defined a function <code>g(x) = n * x</code> with this call. We can now evaluate <code>g</code> with arguments.</p>\n\n<p>Note that since all functions depend on <code>n</code>, you could change <code>n</code>, and the behavior would change.</p>\n\n<pre><code>&gt;&gt;&gt; n = 100\n&gt;&gt;&gt; g(10)\n1000\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 6158370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8de3ebf8e6e37662954c89649aeffd?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo", "link": "https://stackoverflow.com/users/6158370/bobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5958, "favorite_count": 4, "closed_date": 1459983176, "answer_count": 2, "score": 9, "last_activity_date": 1604276545, "creation_date": 1459981985, "last_edit_date": 1604276545, "question_id": 36463498, "link": "https://stackoverflow.com/questions/36463498/what-dose-late-binding-closures-mean", "closed_reason": "Duplicate", "title": "What dose &quot;late binding closures&quot; mean?", "body": "<p>I have a back-ground of C++ and trying to learn some python.</p>\n<p>Whilst i understand virtual functions for C++, I unfortunately do not understand what is meant by late binding of closures in python.</p>\n<p>Link: <a href=\"https://gist.github.com/deemson/8efabf56d67623ead804%20Link\" rel=\"nofollow noreferrer\">https://gist.github.com/deemson/8efabf56d67623ead804</a> (no longer works)</p>\n<p>Copy-pasted from a tutorial:</p>\n<pre><code>functions = []\nfor n in [1, 2, 3]:\n    def func(x):\n        return n*x\n    functions.append(func)\n\n# You would expect this to print [2, 4, 6]\nprint(\n    'calling a list of bad closures and output is: {}'\n    .format(str([function(2) for function in functions]))\n)\n</code></pre>\n<p>What exactly is happening here? When the function is appended in to the list, what values does it have? Can someone please simplify this code for me to understand?</p>\n"}, {"tags": ["python", "django", "django-mptt"], "comments": [{"owner": {"reputation": 7392, "user_id": 2548934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ox4uA.jpg?s=128&g=1", "display_name": "awwester", "link": "https://stackoverflow.com/users/2548934/awwester"}, "edited": false, "score": 0, "creation_date": 1459989760, "post_id": 36463448, "comment_id": 60541039, "body": "you copied the model code in the views.py section (please correct with your actual code in views.py)"}, {"owner": {"reputation": 7392, "user_id": 2548934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ox4uA.jpg?s=128&g=1", "display_name": "awwester", "link": "https://stackoverflow.com/users/2548934/awwester"}, "edited": false, "score": 0, "creation_date": 1459989792, "post_id": 36463448, "comment_id": 60541051, "body": "somewhere you have <code>tree</code> instead of <code>Tree</code> most likely"}, {"owner": {"reputation": 6411, "user_id": 1911548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf241a35c92275b823a07b995288c?s=128&d=identicon&r=PG", "display_name": "Sergey Gornostaev", "link": "https://stackoverflow.com/users/1911548/sergey-gornostaev"}, "edited": false, "score": 0, "creation_date": 1459997483, "post_id": 36463448, "comment_id": 60543102, "body": "Show the full stack trace"}, {"owner": {"reputation": 3114, "user_id": 5736576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3YBow.jpg?s=128&g=1", "display_name": "Ilya Bibik", "link": "https://stackoverflow.com/users/5736576/ilya-bibik"}, "edited": false, "score": 0, "creation_date": 1460043227, "post_id": 36463448, "comment_id": 60571542, "body": "I did update my question based on the request , sorry for original mistake."}], "answers": [{"tags": [], "owner": {"reputation": 3114, "user_id": 5736576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3YBow.jpg?s=128&g=1", "display_name": "Ilya Bibik", "link": "https://stackoverflow.com/users/5736576/ilya-bibik"}, "is_accepted": true, "score": 0, "last_activity_date": 1460051517, "creation_date": 1460051517, "answer_id": 36483701, "question_id": 36463448, "link": "https://stackoverflow.com/questions/36463448/global-name-from-django-mptt-is-not-defined/36483701#36483701", "title": "global name from django-mptt is not defined", "body": "<p>I have figured it out </p>\n\n<p>I had few problems :</p>\n\n<p>had to include in view.py</p>\n\n<pre><code>from item.models import Tree\nfrom django.template import RequestContext\n</code></pre>\n\n<p>and another issue was typo in the naming  as @awwester suggested </p>\n"}], "owner": {"reputation": 3114, "user_id": 5736576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3YBow.jpg?s=128&g=1", "display_name": "Ilya Bibik", "link": "https://stackoverflow.com/users/5736576/ilya-bibik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 36483701, "answer_count": 1, "score": 0, "last_activity_date": 1460051517, "creation_date": 1459981738, "last_edit_date": 1460043173, "question_id": 36463448, "link": "https://stackoverflow.com/questions/36463448/global-name-from-django-mptt-is-not-defined", "title": "global name from django-mptt is not defined", "body": "<p>So it must be something basic but I cant figure it out .</p>\n\n<p>I am trying to use django-mptt just following the tutorial </p>\n\n<p>created in models.py</p>\n\n<pre><code>    @with_author    \nclass Tree(MPTTModel):\n    name = models.CharField(max_length=50, unique=True)\n    parent = TreeForeignKey('self', null=True, blank=True, related_name='children', db_index=True)\n\n    class MPTTMeta:\n        order_insertion_by = ['name']\n</code></pre>\n\n<p>and the in views.py</p>\n\n<pre><code> def show_tree(request):\n     return render_to_response(\"item/tree.html\",\n                           {'nodes':Tree.objects.all()},\n                           context_instance=RequestContext(request))\n</code></pre>\n\n<p>But I cant figure out how to import the Tree from model into views</p>\n\n<p>i tried different combinations like </p>\n\n<pre><code>from myapp.models import Tree\nfrom myapp.MPTTModel import Tree\n</code></pre>\n\n<p>etc. but its is not working  and without importing Tree I am getting error </p>\n\n<pre><code>global name 'Tree' is not defined\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>File \"C:\\Users\\I812624\\dev\\mrp\\lib\\site-packages\\django\\core\\handlers\\base.py\" in get_response\n  132.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)\nFile \"C:\\Users\\I812624\\dev\\mrp\\src\\item\\views.py\" in show_tree\n  118.         {'nodes':Tree.objects.all()},context_instance=RequestContext(request))\n\nException Type: NameError at /item/tree/\nException Value: global name 'Tree' is not defined\n</code></pre>\n"}, {"tags": ["python", "django", "filter", "annotations"], "answers": [{"tags": [], "owner": {"reputation": 6569, "user_id": 1241619, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N9usn.jpg?s=128&g=1", "display_name": "Daniil Ryzhkov", "link": "https://stackoverflow.com/users/1241619/daniil-ryzhkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1459986289, "creation_date": 1459986289, "answer_id": 36464237, "question_id": 36463401, "link": "https://stackoverflow.com/questions/36463401/is-it-possible-to-send-a-field-name-as-a-variable-into-djangos-annotate/36464237#36464237", "title": "Is it possible to send a field name as a variable into Django&#39;s .annotate", "body": "<p>In this is example <code>LocTypeNum</code> is just a string. So you can just replace with variable:</p>\n\n<pre><code>somefield = \"some_field\"\nSomeModel.objects.all().aggregate(somename=Sum(F(somefield))\n</code></pre>\n\n<p>You can even path aggragetion name as varaiable:</p>\n\n<pre><code>SomeModel.objects.all().aggregate(**{somename: Sum(F(somefield)})\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5261937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/184be7e5c4f603a1a05e59760e8fdbe4?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra", "link": "https://stackoverflow.com/users/5261937/sandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "accepted_answer_id": 36464237, "answer_count": 1, "score": 1, "last_activity_date": 1459986289, "creation_date": 1459981492, "question_id": 36463401, "link": "https://stackoverflow.com/questions/36463401/is-it-possible-to-send-a-field-name-as-a-variable-into-djangos-annotate", "title": "Is it possible to send a field name as a variable into Django&#39;s .annotate", "body": "<p>Is it possible to send a field name as a variable?</p>\n\n<p>The following works (Note: myqso is a filtered queryset based on a model with a field called LocTypeNum):</p>\n\n<pre><code>myqsnew = myqso.annotate(newloctypenum=F('LocTypeNum')+10)\nmyqsop = [{'the_new_loctypenum':p.newloctypenum} for p in myqsnew]\n</code></pre>\n\n<p>But I want to send LocTypeNum in as a variable. Is there a better/faster method for making calculated fields and using variables as field names? Thanks!</p>\n"}, {"tags": ["python", "multithreading", "http", "concurrency", "urllib2"], "comments": [{"owner": {"reputation": 1871, "user_id": 4086968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zsjlM.png?s=128&g=1", "display_name": "reese0106", "link": "https://stackoverflow.com/users/4086968/reese0106"}, "edited": false, "score": 0, "creation_date": 1459980973, "post_id": 36463278, "comment_id": 60538468, "body": "@TarnayK&#225;lm&#225;n I am hoping to CC you here as you were the original author of the solution"}], "answers": [{"comments": [{"owner": {"reputation": 1871, "user_id": 4086968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zsjlM.png?s=128&g=1", "display_name": "reese0106", "link": "https://stackoverflow.com/users/4086968/reese0106"}, "edited": false, "score": 0, "creation_date": 1459985750, "post_id": 36463772, "comment_id": 60539990, "body": "This certainly looks simpler.  However, this does not seem to be working for me.  I got an error &quot;AttributeError: &#39;StdIn&#39; object has no attribute &#39;close&#39;&quot; so there seems to be some issue? Any idea what is going wrong here?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459987101, "post_id": 36463772, "comment_id": 60540363, "body": "I don&#39;t see how this example can cause that error. Do you have a couple of sample urls I can test with? Otherwise, if you have updated code that does fail, add that to your original question."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459987675, "post_id": 36463772, "comment_id": 60540506, "body": "I updated the example to wrap the pool in a function. This should make no difference for a thread pool but is how you should implement a process pool on windows. I also added some urls so you can just copy/paste to test."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459987843, "post_id": 36463772, "comment_id": 60540547, "body": "Mayte there is a problem... I was returning the <code>Response</code> object, not a simple status. See the change."}, {"owner": {"reputation": 1871, "user_id": 4086968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zsjlM.png?s=128&g=1", "display_name": "reese0106", "link": "https://stackoverflow.com/users/4086968/reese0106"}, "edited": false, "score": 0, "creation_date": 1459990454, "post_id": 36463772, "comment_id": 60541206, "body": "@tdelaney Okay, this does seem to be working now! I was able to switch &quot;success&quot; to return the results object and it seems to work really well.  From a performance perspective, if I am trying to make 100k+ API calls - would there be anything you would do differently to speed things up?"}, {"owner": {"reputation": 1871, "user_id": 4086968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zsjlM.png?s=128&g=1", "display_name": "reese0106", "link": "https://stackoverflow.com/users/4086968/reese0106"}, "edited": false, "score": 0, "creation_date": 1459992635, "post_id": 36463772, "comment_id": 60541743, "body": "@tdelaney this works very fast when I supply 100 urls, but when I tried to scale to 1000, it really slowed down (way more than 10x) and I am hoping to scale this to the order of 100k+ requests.  Can you think of any reason that this would not scale well beyond 100 requests?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1460000012, "post_id": 36463772, "comment_id": 60543716, "body": "I&#39;m not sure why, but some guesses.... python threads can thrash, you could do a 2 tiered thing w/ a process pool of the number of CPUs on your system where each process worker runs a thread pool of, say, 32 threads. For the pools, use <code>imap_unordered</code> instead of <code>map</code> and instead of holding a list in memory, write to files (1 file per process worker) and read them later."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1460000135, "post_id": 36463772, "comment_id": 60543749, "body": "You may have maxed your network bandwidth. If you send more than your pipe to the internet can handle, packets are dropped and TCP retries come into play. TCP fallbacks are pretty good at adjusting to network bandwidth at the expense of significant delays. The site you are hitting may be limiting how much it will send back."}], "tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 7, "last_activity_date": 1459987593, "last_edit_date": 1459987593, "creation_date": 1459983478, "answer_id": 36463772, "question_id": 36463278, "link": "https://stackoverflow.com/questions/36463278/combine-python-thread-results-into-one-list/36463772#36463772", "title": "Combine python thread results into one list", "body": "<p>Use a <code>ThreadPool</code> instead. It does the heavy lifting for you. Here is a working example that fetches a few urls.</p>\n\n<pre><code>import multiprocessing.pool\nconcurrent = 200 \n\ndef makeRequest(ourl):\n    try:\n        api_call = urlopen(ourl).read()\n        result = json.loads(api_call)\n        return \"success\", ourl\n    except:\n        return \"error\", ourl\n\ndef main():\n    api_calls = [\n        'http:http://jsonplaceholder.typicode.com/posts/{}'.format(i)\n        for i in range(1,5)]\n\n    # a thread pool that implements the process pool API.\n    pool = multiprocessing.pool.ThreadPool(processes=concurrent)\n    return_list = pool.map(makeRequest, api_calls, chunksize=1)\n    pool.close()\n    for status, data in return_list:\n        print(data)\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 1871, "user_id": 4086968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zsjlM.png?s=128&g=1", "display_name": "reese0106", "link": "https://stackoverflow.com/users/4086968/reese0106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2559, "favorite_count": 1, "accepted_answer_id": 36463772, "answer_count": 1, "score": 2, "last_activity_date": 1459987593, "creation_date": 1459980849, "last_edit_date": 1495541255, "question_id": 36463278, "link": "https://stackoverflow.com/questions/36463278/combine-python-thread-results-into-one-list", "title": "Combine python thread results into one list", "body": "<p>I am trying to modify the solution shown here: <a href=\"https://stackoverflow.com/questions/2632520/what-is-the-fastest-way-to-send-100-000-http-requests-in-python/24731721#24731721\">What is the fastest way to send 100,000 HTTP requests in Python?</a> except that instead of checking header status I am making an API request which returns a dictionary and I would like the end result of all of these API requests to be a list of all of the dictionaries.</p>\n\n<p>Here is my code -- consider that api_calls is a list that has each url to open for the json request...</p>\n\n<pre><code>from threading import Thread\nfrom Queue import Queue\n\nconcurrent = 200 \n\ndef doWork():\n    while True:\n        url = q.get()\n        result = makeRequest(url[0])\n        doSomethingWithResult(result, url)\n        q.task_done()\n\ndef makeRequest(ourl):\n    try:\n        api_call = urlopen(ourl).read()\n        result = json.loads(api_call)\n        return result, ourl\n    except:\n        return \"error\", ourl\n\ndef doSomethingWithResult(result, url):\n  print(url,result)\n\nq = Queue(concurrent * 2)\nfor i in range(concurrent):\n    t = Thread(target=doWork)\n    t.daemon = True\n    t.start()\ntry:\n    for url in api_calls:\n        q.put(url)\n    q.join()\nexcept KeyboardInterrupt:\n    sys.exit(1)\n</code></pre>\n\n<p>Like the example linked, this currently will succesfully print the url, result on each line.  What I would instead like to do is add the (url, result) to a list in each thread and then at the end join them into one master list.  I cannot figure out how to have this master list and join the results at the end.  Can anybody help with what I should modify in the doSomethingWithResult?  If I was doing one large loop, I would just have an empty list and I would append the result to the list after each API request, but I do not know how to mimick this now that I am using threads.  </p>\n\n<p>I expect that a common response will be to use <a href=\"https://en.wikipedia.org/wiki/Asynchronous_I/O\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Asynchronous_I/O</a> and if this is the suggestion, then I would appreciate somebody actually providing an example that accomplishes as much as the code I have linked above.</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 9391, "user_id": 717481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0292aeefc5c774d3acd0ca14914c5db2?s=128&d=identicon&r=PG", "display_name": "sparc_spread", "link": "https://stackoverflow.com/users/717481/sparc-spread"}, "edited": false, "score": 2, "creation_date": 1459980777, "post_id": 36463230, "comment_id": 60538392, "body": "The import statement should either be indented, or moved out of the function.  Indentation is syntactically significant in python.  In general import statements should not be in functions, they should be at the top of your file."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459980892, "post_id": 36463230, "comment_id": 60538439, "body": "Your example has an indentation error at <code>import csv</code> before making it to the syntax error. Please update to a runnable example that shows the error... including putting <code>&lt;= SYNTAX ERROR</code> into a comment. We want to run exactly what you run."}, {"owner": {"reputation": 509, "user_id": 4792633, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f53d4883f4afad93f350129a9f739b31?s=128&d=identicon&r=PG&f=1", "display_name": "oradbanj", "link": "https://stackoverflow.com/users/4792633/oradbanj"}, "edited": false, "score": 0, "creation_date": 1459980921, "post_id": 36463230, "comment_id": 60538447, "body": "Removed &quot;import csv&quot; statement. Still syntax error."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1459981005, "post_id": 36463230, "comment_id": 60538480, "body": "After removing the import statement there was no syntax error for me. What version of python are you using? (<code>import sys;print sys.version</code>). If you have something very old, it may not support <code>with</code> clauses."}, {"owner": {"reputation": 509, "user_id": 4792633, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f53d4883f4afad93f350129a9f739b31?s=128&d=identicon&r=PG&f=1", "display_name": "oradbanj", "link": "https://stackoverflow.com/users/4792633/oradbanj"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459981072, "post_id": 36463230, "comment_id": 60538503, "body": "@tdelaney : Version 3.5.0"}, {"owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "edited": false, "score": 0, "creation_date": 1459981088, "post_id": 36463230, "comment_id": 60538508, "body": "hopefully you didn&#39;t just delete the import statement. hopefully you placed it above the function definition, not indented."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 2, "creation_date": 1459981115, "post_id": 36463230, "comment_id": 60538516, "body": "With python 3.x, I would expect a syntax error at the <code>print row</code> line. Print is now a function <code>print(row)</code>. Is that where the problem is?"}, {"owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "edited": false, "score": 0, "creation_date": 1459981122, "post_id": 36463230, "comment_id": 60538521, "body": "obviously you need to import csv."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459981540, "post_id": 36463230, "comment_id": 60538698, "body": "You don&#39;t need semicolons in Python. Remove them forthwith!"}, {"owner": {"reputation": 509, "user_id": 4792633, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f53d4883f4afad93f350129a9f739b31?s=128&d=identicon&r=PG&f=1", "display_name": "oradbanj", "link": "https://stackoverflow.com/users/4792633/oradbanj"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459981712, "post_id": 36463230, "comment_id": 60538749, "body": "@MattDMo. Removed all semi-colons. Still error"}, {"owner": {"reputation": 509, "user_id": 4792633, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f53d4883f4afad93f350129a9f739b31?s=128&d=identicon&r=PG&f=1", "display_name": "oradbanj", "link": "https://stackoverflow.com/users/4792633/oradbanj"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459981743, "post_id": 36463230, "comment_id": 60538755, "body": "@tdelaney : Changed it to print(row). Still error."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459981846, "post_id": 36463230, "comment_id": 60538785, "body": "Can you post the full stack trace... it may have hints."}, {"owner": {"reputation": 509, "user_id": 4792633, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f53d4883f4afad93f350129a9f739b31?s=128&d=identicon&r=PG&f=1", "display_name": "oradbanj", "link": "https://stackoverflow.com/users/4792633/oradbanj"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459981898, "post_id": 36463230, "comment_id": 60538807, "body": "@tdelaney : $  ./csv.py   File &quot;./csv.py&quot;, line 8     with open(&#39;file.csv&#39;, &#39;r&#39;) as my_csv_file:             ^ SyntaxError: invalid syntax"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459981927, "post_id": 36463230, "comment_id": 60538815, "body": "Your shebang <code>#!&#47;usr&#47;bin&#47;python</code>.... that&#39;s python 2. Its only relevant if you run the program directly from the command line."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459982570, "post_id": 36463230, "comment_id": 60539032, "body": "Can you post the traceback as a code block in the exception itself? What you show us is exactly what we&#39;d expect for python 2.4. Did you add <code>import sys;print(sys.version)</code> to verify? As another aside, don&#39;t name your module &quot;csv.py&quot; because <code>import csv</code> will re-import your file instead of the system csv mode."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459982702, "post_id": 36463230, "comment_id": 60539074, "body": "@tdelaney already mentioned that in my answer :)"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459982731, "post_id": 36463230, "comment_id": 60539085, "body": "@MattDMo so you did! I can&#39;t keep up."}], "answers": [{"comments": [{"owner": {"reputation": 509, "user_id": 4792633, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f53d4883f4afad93f350129a9f739b31?s=128&d=identicon&r=PG&f=1", "display_name": "oradbanj", "link": "https://stackoverflow.com/users/4792633/oradbanj"}, "edited": false, "score": 0, "creation_date": 1459982566, "post_id": 36463492, "comment_id": 60539029, "body": "there were two errors : the shebang was incorrectly pointing to old version of Python (2.x). But more interesting is that the name of the file itself was causing the error. Once I renamed the file from csv.py to &quot;csv_test.py&quot;, it worked as expected. complete  $ ./csv.py     Traceback (most recent call last):     File &quot;./csv.py&quot;, line 3, in &lt;module&gt;import      csv   File &quot;csv.py&quot;, line 6, in &lt;module&gt;     reader = csv.reader(my_csv_file) AttributeError: module &#39;csv&#39; has no attribute &#39;reader&#39; $ mv csv.py ./csv_test.py $ ./csv_test.py [&#39;first_name \\tlast_name&#39;]"}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1459982832, "last_edit_date": 1459982832, "creation_date": 1459981942, "answer_id": 36463492, "question_id": 36463230, "link": "https://stackoverflow.com/questions/36463230/python-using-csv-to-read-a-file-syntax-error/36463492#36463492", "title": "Python. Using CSV to read a file. Syntax Error", "body": "<p>Your code:</p>\n\n<pre><code>with open('file.csv', 'r') as my_csv_file:\n    reader = csv.reader(my_csv_file)\n        for row in reader:\n            print ( row )\n</code></pre>\n\n<p>has incorrect indentation. It should be:</p>\n\n<pre><code>with open('file.csv') as my_csv_file: # the 'r' mode is implicit\n    reader = csv.reader(my_csv_file)\n    for row in reader: # this line shouldn't have been indented\n        print(row)\n</code></pre>\n\n<p>Additionally, the <code>#!/usr/bin/python</code> will run the script with Python 2, not Python 3. Your system may have a very old version of Python 2 (2.4 or previous) that doesn't recognize the <a href=\"https://www.python.org/dev/peps/pep-0343/\" rel=\"nofollow\"><code>with</code></a> context manager. If you <em>must</em> have a shebang, make it <code>#!/usr/bin/env python3.5</code> or something similar. Or, if you're not planning on setting the script as executable and running it as <code>./scriptname.py</code> or whatever, just get rid of it entirely.</p>\n\n<p>One more thing - don't name your file <code>csv.py</code>, as that will conflict with the <code>csv</code> module. Avoid naming files after any modules on your system. <code>csv_test.py</code> would be a better alternative, for example.</p>\n"}], "owner": {"reputation": 509, "user_id": 4792633, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f53d4883f4afad93f350129a9f739b31?s=128&d=identicon&r=PG&f=1", "display_name": "oradbanj", "link": "https://stackoverflow.com/users/4792633/oradbanj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1870, "favorite_count": 0, "closed_date": 1460003658, "accepted_answer_id": 36463492, "answer_count": 1, "score": -2, "last_activity_date": 1459982832, "creation_date": 1459980591, "last_edit_date": 1459981557, "question_id": 36463230, "link": "https://stackoverflow.com/questions/36463230/python-using-csv-to-read-a-file-syntax-error", "closed_reason": "Not suitable for this site", "title": "Python. Using CSV to read a file. Syntax Error", "body": "<p>The following script shows syntax error at line \"with open...\"</p>\n\n<pre><code>#!/usr/bin/python\n\nimport fileinput;\nimport  csv;\n\ndef read_csv_file ( file_name ):\n\n    with open('file.csv', 'r') as my_csv_file:\n        reader = csv.reader(my_csv_file)\n            for row in reader:\n                print ( row )\n\nread_csv_file();\n</code></pre>\n"}, {"tags": ["python", "r", "regression", "julia", "multinomial"], "comments": [{"owner": {"reputation": 1694, "user_id": 5075246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X9Eo_rN-1gc/AAAAAAAAAAI/AAAAAAAAACw/c06q3ZipvvM/photo.jpg?sz=128", "display_name": "Tom Breloff", "link": "https://stackoverflow.com/users/5075246/tom-breloff"}, "edited": false, "score": 0, "creation_date": 1459988125, "post_id": 36463072, "comment_id": 60540614, "body": "I&#39;ll be honest that I&#39;m a little confused what you&#39;re attempting.  Does your y data correspond to class labels 1/2/3?  If so, you probably want to fit a multinomal logistic regression to the &quot;one-hot&quot; matrix of y.  (i.e. y is a nx3 matrix of 0&#39;s and 1&#39;s where the y[i,j] is 1 when the ith class is j)."}, {"owner": {"reputation": 3860, "user_id": 803954, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2dc4da653d69b00d585db6b28ba0e247?s=128&d=identicon&r=PG", "display_name": "bdeonovic", "link": "https://stackoverflow.com/users/803954/bdeonovic"}, "reply_to_user": {"reputation": 1694, "user_id": 5075246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X9Eo_rN-1gc/AAAAAAAAAAI/AAAAAAAAACw/c06q3ZipvvM/photo.jpg?sz=128", "display_name": "Tom Breloff", "link": "https://stackoverflow.com/users/5075246/tom-breloff"}, "edited": false, "score": 0, "creation_date": 1460028676, "post_id": 36463072, "comment_id": 60559896, "body": "Thats exactly the case. I will give that a try. As I mentioned the documentation for these packages is quite lacking."}, {"owner": {"reputation": 3860, "user_id": 803954, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2dc4da653d69b00d585db6b28ba0e247?s=128&d=identicon&r=PG", "display_name": "bdeonovic", "link": "https://stackoverflow.com/users/803954/bdeonovic"}, "reply_to_user": {"reputation": 1694, "user_id": 5075246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X9Eo_rN-1gc/AAAAAAAAAAI/AAAAAAAAACw/c06q3ZipvvM/photo.jpg?sz=128", "display_name": "Tom Breloff", "link": "https://stackoverflow.com/users/5075246/tom-breloff"}, "edited": false, "score": 0, "creation_date": 1460057447, "post_id": 36463072, "comment_id": 60580362, "body": "For the Regression.jl package specifically states for multinomial regression: &quot;<a href=\"https://github.com/lindahua/Regression.jl\" rel=\"nofollow noreferrer\">y is a vector of class labels (values in 1:k)</a>&quot;. Similarly the Python SciKitLearn states that y should be &quot;<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html#sklearn.linear_model.LogisticRegression.fit\" rel=\"nofollow noreferrer\">array-like, shape (n_samples,)</a>&quot;"}, {"owner": {"reputation": 573, "user_id": 2684232, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/39c3075527874812ba31c0b303cfc1f5?s=128&d=identicon&r=PG&f=1", "display_name": "Gang Liang", "link": "https://stackoverflow.com/users/2684232/gang-liang"}, "edited": false, "score": 0, "creation_date": 1465597901, "post_id": 36463072, "comment_id": 62985337, "body": "Can you check which level each implementation picks as reference? Different baseline value would lead to different parameters -- even theoretically they are equivalent."}], "owner": {"reputation": 3860, "user_id": 803954, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2dc4da653d69b00d585db6b28ba0e247?s=128&d=identicon&r=PG", "display_name": "bdeonovic", "link": "https://stackoverflow.com/users/803954/bdeonovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460060336, "creation_date": 1459979821, "last_edit_date": 1460060336, "question_id": 36463072, "link": "https://stackoverflow.com/questions/36463072/julia-multinomial-regression-with-time-series-lagged-values", "title": "Julia: Multinomial Regression with time series lagged values", "body": "<p>I need to do some multinomial regression in Julia. In R I get the following result:</p>\n\n<pre><code>library(nnet)\ndata &lt;- read.table(\"Dropbox/scripts/timeseries.txt\",header=TRUE)\nmultinom(y~X1+X2,data)\n\n# weights:  12 (6 variable)\ninitial  value 10985.024274 \niter  10 value 10438.503738\nfinal  value 10438.503529 \nconverged\nCall:\nmultinom(formula = y ~ X1 + X2, data = data)\n\nCoefficients:\n  (Intercept)        X1        X2\n2   0.4877087 0.2588725 0.2762119\n3   0.4421524 0.5305649 0.3895339\n\nResidual Deviance: 20877.01 \nAIC: 20889.01 \n</code></pre>\n\n<p>Here is my <a href=\"https://www.dropbox.com/s/1h7uns55t34c8fr/timeseries.txt?dl=0\" rel=\"nofollow\">data</a></p>\n\n<p>My first attempt was using <a href=\"https://github.com/lindahua/Regression.jl\" rel=\"nofollow\">Regression.jl</a>. The documentation is quite sparse for this package so I am not sure which category is used as baseline, which parameters the resulting output corresponds to, etc. I filed an issue to ask about these things <a href=\"https://github.com/lindahua/Regression.jl\" rel=\"nofollow\">here</a>. </p>\n\n<pre><code>using DataFrames\nusing Regression\nimport Regression: solve, Options, predict\ndat = readtable(\"timeseries.txt\", separator='\\t')\nX = convert(Matrix{Float64},dat[:,2:3])\ny = convert(Vector{Int64},dat[:,1])\n\nret = solve(mlogisticreg(X',y,3), reg=ZeroReg(),  options=Options(verbosity=:iter))\n</code></pre>\n\n<p>the result is </p>\n\n<pre><code>julia&gt; ret.sol\n3x2 Array{Float64,2}:\n -0.573027  -0.531819\n  0.173453   0.232029\n  0.399575   0.29979 \n</code></pre>\n\n<p>but again, I am not sure what this corresponds to.</p>\n\n<p>Next I tried the Julia wrapper to Python's SciKitLearn:</p>\n\n<pre><code>using ScikitLearn\n@sk_import linear_model: LogisticRegression\n\nmodel = ScikitLearn.fit!(LogisticRegression(multi_class=\"multinomial\", solver = \"lbfgs\"), X, y)\nmodel[:coef_]\n3x2 Array{Float64,2}:\n -0.261902    -0.220771 \n -0.00453731   0.0540354\n  0.266439     0.166735 \n</code></pre>\n\n<p><s>but I have not figured out how to extract the coefficients from this model.</s> Updated with coefficients. These also don't look like the R results. </p>\n\n<p>Any help trying to replicate R's results would be appreciate (using whatever package!) </p>\n\n<p>Note the response variables are just the discretized time-lagged response i.e. </p>\n\n<pre><code>julia&gt; dat[1:3,:]\n3x3 DataFrames.DataFrame\n| Row | y | X1 | X2 |\n|-----|---|----|----|\n| 1   | 3 | 1  | 0  |\n| 2   | 3 | 0  | 1  |\n| 3   | 1 | 0  | 1  |\n</code></pre>\n\n<p>for row 2 you can see that the response (0, 1) means the previous observation was a 3. Similarly (1,0) means previous observation was a 2 and (0,0) means previous observation was a 1. </p>\n\n<p>Update:\nFor Regression.jl it seems it does not fit an intercept by default (and they call it \"bias\" instead of an intercept). By adding this term we get results very similar to python (not sure what the third column is though..)</p>\n\n<pre><code>julia&gt; ret = solve(mlogisticreg(X',y,3, bias=1.0), reg=ZeroReg(),  options=Options(verbosity=:iter))\njulia&gt; ret.sol\n3x3 Array{Float64,2}:\n -0.263149    -0.221923   -0.309949\n -0.00427033   0.0543008   0.177753\n  0.267419     0.167622    0.132196\n</code></pre>\n\n<p>UPDATE:\nSince the model coefficients are not identifiable I should not be expecting them to be the same acrossed these different implementations. However, the predicted probabilities should be the same, and in fact they are (using R, Regression.jl, or ScikitLearn). </p>\n"}, {"tags": ["python", "django", "http", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 318605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b6fe84d3b294cdcf533dcb937c70e05?s=128&d=identicon&r=PG", "display_name": "ZeroSoul13", "link": "https://stackoverflow.com/users/318605/zerosoul13"}, "is_accepted": false, "score": 0, "last_activity_date": 1459980176, "creation_date": 1459980176, "answer_id": 36463147, "question_id": 36463068, "link": "https://stackoverflow.com/questions/36463068/what-http-code-to-return-in-listapiview/36463147#36463147", "title": "What http code to return in ListAPIView?", "body": "<p>ListAPIView extends GenericAPIView, ListModelMixin</p>\n\n<p><a href=\"http://www.django-rest-framework.org/api-guide/generic-views/#listapiview\" rel=\"nofollow\">listapiview</a></p>\n\n<p>Take a look at the docs <a href=\"http://www.django-rest-framework.org/api-guide/generic-views/#listmodelmixin\" rel=\"nofollow\">http://www.django-rest-framework.org/api-guide/generic-views/#listmodelmixin</a> you can override the list method and return the error code of your choosing. Link here for example <a href=\"http://www.django-rest-framework.org/api-guide/generic-views/#examples\" rel=\"nofollow\">http://www.django-rest-framework.org/api-guide/generic-views/#examples</a></p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 3782148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9991116b97140859a7ebb0f939b8bae4?s=128&d=identicon&r=PG&f=1", "display_name": "User Rik", "link": "https://stackoverflow.com/users/3782148/user-rik"}, "is_accepted": true, "score": 0, "last_activity_date": 1460001737, "creation_date": 1460001737, "answer_id": 36466480, "question_id": 36463068, "link": "https://stackoverflow.com/questions/36463068/what-http-code-to-return-in-listapiview/36466480#36466480", "title": "What http code to return in ListAPIView?", "body": "<p>The code above could work if you were raising the DRF's ValidationError. The DRF ValidationError causes the view to return a <code>HTTP_400_BAD_REQUEST</code> status.</p>\n\n<p>It might be the APIException that is causing the 500. If you want to use th APIException make sure it sub-classes the ValidationError from DRF.</p>\n"}], "owner": {"reputation": 1435, "user_id": 384126, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d0aa2c60dd45164161c487355fbe11c3?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/384126/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 36466480, "answer_count": 2, "score": 0, "last_activity_date": 1460001737, "creation_date": 1459979795, "question_id": 36463068, "link": "https://stackoverflow.com/questions/36463068/what-http-code-to-return-in-listapiview", "title": "What http code to return in ListAPIView?", "body": "<p>I have a simple view that lists Events in django-rest-framework:</p>\n\n<pre><code>class EventListView(generics.ListAPIView):\n    serializer_class = EventListSerializer\n\n    def get_queryset(self):\n        user_position = self.request.query_params.get('position', '')\n        if not user_position or not re.match(r'^-?\\d+\\.\\d+,-?\\d+\\.\\d+$', user_position):\n            raise APIException('Position is absent or invalid')\n\n        return Event.objects.filter(...)\n</code></pre>\n\n<p>For this view, I need to validate that the <code>position</code> parameter is present and well formed. If it's not, I want to return an appropriate HTTP error code.</p>\n\n<p>As I do right now, in case of error, the API returns a 500 error code, which I think is bad.</p>\n\n<p>Is there a more specific HTTP error code I should return? I think status code 400 might be appropriate, but how can I return that code explicitly in my view?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "matplotlib", "plot", "axes"], "comments": [{"owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "edited": false, "score": 0, "creation_date": 1459981565, "post_id": 36462991, "comment_id": 60538705, "body": "matplotlib has a very diverse use of axes. You can add colored boxes and overlay text, search matplotlib add box, or add  a text box. <a href=\"http://matplotlib.org/users/text_intro.html\" rel=\"nofollow noreferrer\">matplotlib.org/users/text_intro.html</a>  this has great refrences as well:<a href=\"http://matplotlib.org/users/annotations_guide.html\" rel=\"nofollow noreferrer\">matplotlib.org/users/annotations_guide.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4901, "user_id": 3462321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dd0086ec4a53211d09387d975f55c8d3?s=128&d=identicon&r=PG&f=1", "display_name": "denvar", "link": "https://stackoverflow.com/users/3462321/denvar"}, "edited": false, "score": 0, "creation_date": 1460040737, "post_id": 36464859, "comment_id": 60569669, "body": "Thanks Han, but I need the text boxes outside the plot region in the axis part :)"}, {"owner": {"reputation": 4901, "user_id": 3462321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dd0086ec4a53211d09387d975f55c8d3?s=128&d=identicon&r=PG&f=1", "display_name": "denvar", "link": "https://stackoverflow.com/users/3462321/denvar"}, "edited": false, "score": 0, "creation_date": 1460050016, "post_id": 36464859, "comment_id": 60575882, "body": "Actually, ended up needing this for something else, thank you!"}], "tags": [], "owner": {"reputation": 3134, "user_id": 4918632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JX8vW.jpg?s=128&g=1", "display_name": "Han Zhengzu", "link": "https://stackoverflow.com/users/4918632/han-zhengzu"}, "is_accepted": false, "score": 1, "last_activity_date": 1459990561, "creation_date": 1459990561, "answer_id": 36464859, "question_id": 36462991, "link": "https://stackoverflow.com/questions/36462991/adding-colored-boxes-to-axes-in-pythons-matplotlib/36464859#36464859", "title": "Adding colored boxes to axes in Python&#39;s matplotlib", "body": "<pre><code>fig = plt.figure(figsize=(6,4))\nplt.plot(np.arange(0,7,1),np.arange(0,7,1),linestyle='--', marker='o', color='b')\nrect1 = plt.Rectangle((1.5,1.5),(0.7),(0.5), facecolor=\"grey\",edgecolor=\"black\",alpha=0.8)\nrect2 = plt.Rectangle((2.5,2.5),(0.7),(0.5), facecolor=\"yellow\",edgecolor=\"black\",alpha=0.8)\nrect3 = plt.Rectangle((3.5,3.5),(0.7),(0.5), facecolor=\"k\",edgecolor=\"black\",alpha=0.8)\nplt.gca().add_patch(rect1)\nplt.gca().add_patch(rect2)\nplt.gca().add_patch(rect3)\n\nplt.text(1.65,1.65,r\"Grey\",fontsize = 10,zorder = 5,color = 'k',fontweight = 'bold')\nplt.text(2.55,2.65,r\"Yellow\",fontsize = 10,zorder = 5,color = 'k',fontweight = 'bold')\nplt.text(3.555,3.65,r\"Black\",fontsize = 10,zorder = 5,color = 'white',fontweight = 'bold')  \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9HFM5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9HFM5.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 4901, "user_id": 3462321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dd0086ec4a53211d09387d975f55c8d3?s=128&d=identicon&r=PG&f=1", "display_name": "denvar", "link": "https://stackoverflow.com/users/3462321/denvar"}, "edited": false, "score": 0, "creation_date": 1460040750, "post_id": 36466547, "comment_id": 60569685, "body": "Thank you, this is perfect!"}], "tags": [], "owner": {"reputation": 4079, "user_id": 5285918, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/43d89ab985ec7bf11dec1adbac3827d4?s=128&d=identicon&r=PG&f=1", "display_name": "lanery", "link": "https://stackoverflow.com/users/5285918/lanery"}, "is_accepted": true, "score": 1, "last_activity_date": 1460003140, "last_edit_date": 1460003140, "creation_date": 1460002170, "answer_id": 36466547, "question_id": 36462991, "link": "https://stackoverflow.com/questions/36462991/adding-colored-boxes-to-axes-in-pythons-matplotlib/36466547#36466547", "title": "Adding colored boxes to axes in Python&#39;s matplotlib", "body": "<p>You probably want to go with matplotlib's <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.text\" rel=\"nofollow\">text()</a>\nfunction. Maybe something like this,</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.linspace(0, 1, 100)\ny = np.sin(2*np.pi * x)\n\nfig = plt.figure()\nax = fig.add_subplot(111)\nax.plot(x, y, 'o')\nax.set_xlim(-0.2, 1.2)\nax.set_ylim(-1.5, 1.5)\n\nx_ticks = ax.get_xticks()\ny_ticks = ax.get_yticks()\n# use len(x_ticks)-1 number of colors\ncolors = ['b', 'g', 'r', 'c', 'm', 'y', 'orange']\nfor i, x_tick in enumerate(x_ticks[:-1]):\n    ax.text(x_tick+0.03, y_ticks[0]-0.165, \"text %i\"%i,\n            bbox={'fc':colors[i], 'pad':10})\n</code></pre>\n\n<p>This code returns this <a href=\"http://i.stack.imgur.com/Bh0vs.png\" rel=\"nofollow\">image</a>. You can adjust the padding and x,y position as necessary to achieve the exact look you're going for.</p>\n"}], "owner": {"reputation": 4901, "user_id": 3462321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dd0086ec4a53211d09387d975f55c8d3?s=128&d=identicon&r=PG&f=1", "display_name": "denvar", "link": "https://stackoverflow.com/users/3462321/denvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 1, "accepted_answer_id": 36466547, "answer_count": 2, "score": 0, "last_activity_date": 1460003140, "creation_date": 1459979338, "last_edit_date": 1592644375, "question_id": 36462991, "link": "https://stackoverflow.com/questions/36462991/adding-colored-boxes-to-axes-in-pythons-matplotlib", "title": "Adding colored boxes to axes in Python&#39;s matplotlib", "body": "<p>Community,</p>\n<p>Say I have created a scatter plot with Python's matplotlib:</p>\n<pre><code>plt.scatter(x, y)\n</code></pre>\n<p>Let's say this is the data:\n<a href=\"https://i.stack.imgur.com/nLmpJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nLmpJ.png\" alt=\"enter image description here\" /></a></p>\n<p>Now, is there a way to add colored boxes on the axis (between given x-values, e.g.,: add a green box from x=-0.2 to x=0, add a ...) like this:\n<a href=\"https://i.stack.imgur.com/CjDUe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CjDUe.png\" alt=\"enter image description here\" /></a></p>\n<p>Including the text labels (at the mid-range I guess).</p>\n<p>I am not even sure how to get started on this one to be honest (besides making the scatter plot).</p>\n<p><strong>Question</strong>\nCan anyone at least direct me to a feature of matplotlib that does this (or any other Python package)?</p>\n<p>Your help is much appreciated.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 5222, "user_id": 892534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49b90815de67f6b55e6d87e34d82f746?s=128&d=identicon&r=PG", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/892534/chrisp"}, "is_accepted": false, "score": 3, "last_activity_date": 1459979413, "creation_date": 1459979413, "answer_id": 36463005, "question_id": 36462957, "link": "https://stackoverflow.com/questions/36462957/python-find-function-returning-error-in-text-game/36463005#36463005", "title": "Python .find() function returning error in Text Game", "body": "<p>You are assigning <code>choiceShopOne</code> to a function, rather than calling the function. You want <code>input().lower()</code> instead of <code>input().lower</code>. You make the same mistake with <code>choiceShopTwo</code> and <code>choiceShopThree</code>.</p>\n\n<p>In Python, <code>str.lower</code> is a method, not an attribute. You need to call the method with parentheses: <code>str.lower()</code> instead of <code>str.lower</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6169203, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LHbS-AfGfrw/AAAAAAAAAAI/AAAAAAAAAhw/5swn8sQCoX4/photo.jpg?sz=128", "display_name": "Arran Robinson", "link": "https://stackoverflow.com/users/6169203/arran-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1460015121, "answer_count": 1, "score": -2, "last_activity_date": 1459979977, "creation_date": 1459979222, "last_edit_date": 1459979977, "question_id": 36462957, "link": "https://stackoverflow.com/questions/36462957/python-find-function-returning-error-in-text-game", "closed_reason": "Not suitable for this site", "title": "Python .find() function returning error in Text Game", "body": "<p>I have a quick question about the <code>.find()</code> function in Python 3.5.1</p>\n\n<p>I have an isolated case of it not working in a specific if loop, and that code is just below: </p>\n\n<pre><code>import random\nimport time\nimport sys\n\nnames = [\"Bob\", \"Melissa\", \"Frank\", \"Mary\", \"John\", \"Denise\", \"Mark\", \"Holly\"]\n\nx = len(names)-1\nrandomNameGeneration = names[random.randint(0,x)]\nfavColors = [\"blue\",\"red\",\"green\",\"pink\",\"yellow\",\"purple\",\"black\"\\\n             , \"gold\", \"white\", \"silver\", \"orange\"]\ny = len(favColors)-1\nrandomColorGeneration = favColors[random.randint(0,y)]\nendingList = []\n\n# Stats =============================================================\n\nmoney = 100\nhealth = 100\nstamina = 100\nsanity = 100\ninfection = 0\nspeed = random.randint(4,18)\nattack = random.randint(4,18)\ndefense = random.randint(4,18)\naim = random.random()\ncharisma = random.randint(4,18)\nintelligence = random.randint(4,18)\nwisdom = random.randint(4,18)\n\ninventory = []\n\n\n\n# Functions =========================================================\n\ndef goto(linenum):\n    global line\n    line = linenum\n\n# Code for gameplay =================================================\nplayerGender = input(\"What is your gender? \", ).lower()\nplayerSexuality = input(\"What is your sexuality? \", ).lower()\nprint (\"Let's begin!\")\nprint(\"----------------------------------------------\")\n\n\nplayerName = input(\"What's your name? \",)\n\nprint(\"Well hello there \" + playerName + \"!\")\nprint(\"It's a pleasure to meet you, I am \" + randomNameGeneration+ \"!\")\nplayerFavColor = input(\"What's your favorite color? \", ).lower()\ncomFavColor = randomColorGeneration\n\n\nif comFavColor == playerFavColor:\n    print(\"Oh, \"+ playerFavColor + \" is my favorite color too!\")\nelse:\n    print(\"Cool! My favorite color is \" + comFavColor)\ntime.sleep(2)\nprint(\"[You are currently located in a cafe next to a shopping center]\")\ntime.sleep(1)\nprint(\"What do you want to do, \" + playerName + \"?\")\nprint(\"[1] Go to the mall\")\nprint(\"[2] Stay at the cafe\")\nchoiceOne = input().lower()\nprint (\"[Choice 1: \" + choiceOne+ \"]\")\n\nif choiceOne.find(\"1\") != -1 or choiceOne.find(\"go\") != -1 or choiceOne.find(\"mall\")!= -1:\n    print(\"Sure! Let's head off then!\")\n    time.sleep(3)\n    print(\"[You arrive at the mall]\")\n    choiceTwo = input(\"Shall we go in? \", ).lower()\n    if choiceTwo.find(\"yes\") != -1:\n        print(\"[You walk in]\")\n        time.sleep(2)\n        print(\"[The mall is bustling with people]\")\n        print(randomNameGeneration + \": Where to?\")\n        print(\"[1]The Home Goods store\")\n        print(\"[2]The Shoe store\")\n        print(\"[3]The Clothing store\")\n        print(\"[4]The Restaurant\")\n        choiceThree = input().lower()\n        if choiceThree.find(\"1\") != -1 or choiceThree.find(\"home goods\") != -1:\n            print(randomNameGeneration + \": Sure!\")\n            exitShop = False\n            while money != 0 or exitShop == False:\n                print(\"[You have: $\" + str(money)+ \"]\")\n                print(\"Cashier: What do you want to buy?\")\n                print(\"[1]Knife (+5 Attack, $25)\")\n                print(\"[2]Frying Pan (+8 Attack, $40)\")\n                print(\"[3]Pepper (Ingredient for crafting, $5)\")\n                print(\"[4]Exit Shop\")\n                choiceShopOne = input().lower\n                if choiceShopOne.find(\"1\") != -1 or choiceShopOne.find(\"knife\") != -1:\n                    money -= 25\n                    inventory += \"Knife\"\n                elif choiceShopOne.find(\"2\") != -1 or choiceShopOne.find(\"frying pan\") != -1:\n                    money -= 40\n                    inventory += \"Frying Pan\"\n                elif choiceShopOne.find(\"3\") != -1 or choiceShopOne.find(\"pepper\") != -1:\n                    money -= 5\n                    inventory += \"Pepper\"\n                else:\n                    exitShop = True\n\n        elif choiceThree.find(\"2\") != -1 or choiceThree.find(\"shoe\") != -1:\n            print(randomNameGeneration + \": Sure!\")\n            exitShop = False\n            while money != 0 or exitShop == False:\n                print(\"[You have: $\" + str(money)+ \"]\")\n                print(\"Cashier: What do you want to buy?\")\n                print(\"[1]Nikes (+10 Speed, $50)\")\n                print(\"[2]Clean Socks (+1 Defense, $5)\")\n                print(\"[3]Regular Shoes (+5 Speed, $25)\")\n                print(\"[4]Exit Shop\")\n                choiceShopTwo = input().lower\n                if choiceShopTwo.find(\"1\") != -1 or choiceShopTwo.find(\"nikes\") != -1:\n                    money -= 50\n                    inventory += \"Nikes\"\n                elif choiceShopTwo.find(\"2\") != -1 or choiceShopTwo.find(\"clean socks\") != -1:\n                    money -= 5\n                    inventory += \"Clean Socks\"\n                elif choiceShopTwo.find(\"2\") != -1 or choiceShopTwo.find(\"regular shoes\") != -1:\n                    money -= 25\n                    inventory += \"Regular Shoes\"\n                else:\n                    exitShop = True\n\n        elif choiceThree.find(\"3\") != -1 or choiceThree.find(\"clothing\") != -1:\n            print(randomNameGeneration + \": Sure!\")\n            exitShop = false\n            while money != 0 or exitShop == False:\n                print(\"[You have: $\" + str(money)+ \"]\")\n                print(\"Cashier: What do you want to buy?\")\n                print(\"[1]Nikes (+10 Speed, $50)\")\n                print(\"[2]Clean Socks (+1 Defense, $5)\")\n                print(\"[3]Regular Shoes (+5 Speed, $25)\")\n                print(\"[4]Exit Shop\")\n                choiceShopThree = input().lower\n                if choiceShopThree.find(\"1\") != -1 or choiceShopThree.find(\"Nikes\") != -1:\n                    money -= 50\n                    inventory += \"Nikes\"\n                elif choiceShopThree.find(\"2\") != -1 or choiceShopThree.find(\"Clean Socks\") != -1:\n                    money -= 5\n                    inventory += \"Clean Socks\"\n                elif choiceShopThree.find(\"2\") != -1 or choiceShopThree.find(\"Clean Socks\") != -1:\n                    money -= 25\n                    inventory += \"Regular Shoes\"\n                else:\n                    exitShop = True\n        else:\n            print(randomNameGeneration + \": Sure!\")\n            exitShop = false\n            while money != 0 or exitShop == False:\n                print(\"[You have: $\" + str(money)+ \"]\")\n                print(\"Cashier: What do you want to buy?\")\n                print(\"[1]Nikes (+10 Speed, $50)\")\n                print(\"[2]Clean Socks (+1 Defense, $5)\")\n                print(\"[3]Regular Shoes (+5 Speed, $25)\")\n                print(\"[4]Exit Shop\")\n                choiceShopFour = input().lower\n                if choiceShopFour.find(\"1\") != -1 or choiceShopFour.find(\"Nikes\") != -1:\n                    money -= 50\n                    inventory += \"Nikes\"\n                elif choiceShopFour.find(\"2\") != -1 or choiceShopFour.find(\"Clean Socks\") != -1:\n                    money -= 5\n                    inventory += \"Clean Socks\"\n                elif choiceShopFour.find(\"2\") != -1 or choiceShopFour.find(\"Clean Socks\") != -1:\n                    money -= 25\n                    inventory += \"Regular Shoes\"\n                else:\n                    exitShop = True\n\n\n    else:\n        print(\"[You sit on a bench outside of the mall]\")\n        time.sleep(2)\n\nelse:\n    print(\"That's fine with me!\")\n    print(\"Ending Got: Peaceful Cafe\")\n\nsys.exit()\n</code></pre>\n\n<p>The problem happens in the shop loops, whenever I select a choice, it returns </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Arran/AppData/Local/Programs/Python/Python35-32/Chat Sim.py\", line 94, in &lt;module&gt;\n    if choiceShopOne.find(\"1\") != -1 or choiceShopOne.find(\"knife\") != -1:\nAttributeError: 'builtin_function_or_method' object has no attribute 'find'\n</code></pre>\n"}, {"tags": ["python", "email", "google-app-engine"], "answers": [{"comments": [{"owner": {"reputation": 538, "user_id": 2842423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Qr12.gif?s=128&g=1", "display_name": "ciacicode", "link": "https://stackoverflow.com/users/2842423/ciacicode"}, "edited": false, "score": 0, "creation_date": 1460049306, "post_id": 36463976, "comment_id": 60575419, "body": "Thank you Chris, that was it!"}, {"owner": {"reputation": 7706, "user_id": 4058484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/uQgA5.png?s=128&g=1", "display_name": "Chetabahana", "link": "https://stackoverflow.com/users/4058484/chetabahana"}, "edited": false, "score": 0, "creation_date": 1496135447, "post_id": 36463976, "comment_id": 75524060, "body": "A <a href=\"https://stackoverflow.com/a/15465283/4058484\">regex</a> configuration will also work."}], "tags": [], "owner": {"reputation": 1577, "user_id": 4065182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3e28abd04df5a6679c79907d42ba91?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC73", "link": "https://stackoverflow.com/users/4065182/chrisc73"}, "is_accepted": true, "score": 2, "last_activity_date": 1459984550, "creation_date": 1459984550, "answer_id": 36463976, "question_id": 36462956, "link": "https://stackoverflow.com/questions/36462956/post-ah-mail-returning-404/36463976#36463976", "title": "&quot;POST /_ah/mail/.+&quot; returning 404", "body": "<p>Move the general handler </p>\n\n<pre><code>- url: .* \n</code></pre>\n\n<p>to after the specific handler</p>\n\n<pre><code>- url: /_ah/mail/info@egg-api.appspotmail.com\n</code></pre>\n\n<p>ie:</p>\n\n<pre><code>- url: /_ah/mail/info@egg-api.appspotmail.com # route everything to handle incoming\n  script: handle_incoming_email.app\n  login: admin\n- url: .*  # This regex directs all routes to main.app\n  script: main.app\n</code></pre>\n\n<p>Otherwise the general URL rule is applied first, resulting in a 404.</p>\n"}], "owner": {"reputation": 538, "user_id": 2842423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Qr12.gif?s=128&g=1", "display_name": "ciacicode", "link": "https://stackoverflow.com/users/2842423/ciacicode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 36463976, "answer_count": 1, "score": 0, "last_activity_date": 1459984550, "creation_date": 1459979209, "question_id": 36462956, "link": "https://stackoverflow.com/questions/36462956/post-ah-mail-returning-404", "title": "&quot;POST /_ah/mail/.+&quot; returning 404", "body": "<p>I have been reading on stack overflow and but so far I have not found a solution that would work for me. I want to be able to handle incoming email to my app and eventually work with attachments but I am facing an issue.</p>\n\n<p><strong>app.yaml</strong></p>\n\n<pre><code>application: egg-api\nruntime: python27\napi_version: 1\nthreadsafe: yes\n\nbuiltins:\n- remote_api: on\n\n# Activate email receiving\n\ninbound_services:\n- mail\n\n# This handler tells app engine how to route requests to a WSGI     application.\n- url: .*  # This regex directs all routes to main.app\n  script: main.app\n- url: /_ah/mail/info@egg-api.appspotmail.com # route everything to handle incoming\n  script: handle_incoming_email.app\n  login: admin\n# Third party libraries\nlibraries:\n- name: jinja2\n  version: latest\n- name: lxml\n  version: latest\n- name: webapp2\n  version: latest\n- name: MySQLdb\n  version: latest\n</code></pre>\n\n<p><strong>handle_incoming_email.py</strong></p>\n\n<pre><code>import logging\nimport webapp2\nfrom google.appengine.ext.webapp.mail_handlers import InboundMailHandler\nfrom google.appengine.api import mail\n\n\nclass LogSenderHandler(InboundMailHandler):\n    def receive(self, mail_message):\n        logging.info(\"Received a message from: \" + mail_message.sender)\n\n\napp = webapp2.WSGIApplication([LogSenderHandler.mapping()], debug=True)\n</code></pre>\n\n<p>After starting dev_appserver successfully:\nFrom <a href=\"http://localhost:8000/mail\" rel=\"nofollow\">http://localhost:8000/mail</a> I try to send an email to info@egg-api.appspotmail.com but I get:</p>\n\n<pre><code>INFO     2016-04-06 21:31:26,549 module.py:787] default: \"POST /_ah/mail/info%40egg-api.appspotmail.com HTTP/1.1\" 404 106\n</code></pre>\n\n<p>When I visit <a href=\"http://localhost:8080/_ah/login\" rel=\"nofollow\">http://localhost:8080/_ah/login</a> I have no clue what I am supposed to enter.</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["python", "regex", "file", "text", "io"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459979634, "post_id": 36462944, "comment_id": 60537943, "body": "You don&#39;t need a regex but you will need to write to a temporary file"}, {"owner": {"reputation": 47, "user_id": 6142422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f80ce44372a06da10b37b659fd4c66?s=128&d=identicon&r=PG&f=1", "display_name": "flec8", "link": "https://stackoverflow.com/users/6142422/flec8"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459979920, "post_id": 36462944, "comment_id": 60538058, "body": "thanks for the reply! Could you explain?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459980110, "post_id": 36462944, "comment_id": 60538135, "body": "You are looking for <code>Tags =...</code>?"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1459980199, "post_id": 36462944, "comment_id": 60538163, "body": "Text files are just a string of bytes going from the first character through to the last.  We see separators as newlines, but each is just one character in the file.  You can only add to the end of the file (append).  If you write to somewhere else you will just overwrite existing text on the next line."}], "answers": [{"tags": [], "owner": {"reputation": 6122, "user_id": 2197181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b8bfa78665dc670a7cbf3982432b2bb8?s=128&d=identicon&r=PG", "display_name": "JulienD", "link": "https://stackoverflow.com/users/2197181/juliend"}, "is_accepted": false, "score": 0, "last_activity_date": 1459980501, "creation_date": 1459980501, "answer_id": 36463207, "question_id": 36462944, "link": "https://stackoverflow.com/questions/36462944/python-write-to-specific-part-of-file-not-by-line-regex/36463207#36463207", "title": "Python - Write to specific part of file, not by line - Regex", "body": "<p>A dirty idea: you could read the line with <code>Tags = ...</code>, evaluate it, edit the list, then rewrite it:</p>\n\n<pre><code>exec('Tags = [\"newtag\"]')\nTags.append(\"othertag\")\nf.write('Tags = {}'.format(Tags))\n</code></pre>\n\n<p>where <code>f</code> is a new file where you write the edited version (or use a temp file as in the other answer).</p>\n\n<p>(Of course it is always dangerous to execute an arbitrary string, but that works if it is a one-time script.)</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 6142422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f80ce44372a06da10b37b659fd4c66?s=128&d=identicon&r=PG&f=1", "display_name": "flec8", "link": "https://stackoverflow.com/users/6142422/flec8"}, "edited": false, "score": 0, "creation_date": 1459982568, "post_id": 36463210, "comment_id": 60539031, "body": "This looks right but when I run it, the file is not written to. Not sure what I&#39;m doing wrong."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 47, "user_id": 6142422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f80ce44372a06da10b37b659fd4c66?s=128&d=identicon&r=PG&f=1", "display_name": "flec8", "link": "https://stackoverflow.com/users/6142422/flec8"}, "edited": false, "score": 0, "creation_date": 1459982615, "post_id": 36463210, "comment_id": 60539048, "body": "@flec8,. it is definitely right based on what you have provided. Are you sure you are using the correct string to match to and have no leading whitespace?"}, {"owner": {"reputation": 47, "user_id": 6142422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f80ce44372a06da10b37b659fd4c66?s=128&d=identicon&r=PG&f=1", "display_name": "flec8", "link": "https://stackoverflow.com/users/6142422/flec8"}, "edited": false, "score": 0, "creation_date": 1459982862, "post_id": 36463210, "comment_id": 60539121, "body": "ah you&#39;re right! what I have is   TitleThing ( Some info = 22   (More info = 22.2) &quot;Tags&quot; : [], )"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 47, "user_id": 6142422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f80ce44372a06da10b37b659fd4c66?s=128&d=identicon&r=PG&f=1", "display_name": "flec8", "link": "https://stackoverflow.com/users/6142422/flec8"}, "edited": false, "score": 0, "creation_date": 1459982888, "post_id": 36463210, "comment_id": 60539128, "body": "lol, then just use that in place of what is in the question, is that one line?"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 0, "last_activity_date": 1459983117, "last_edit_date": 1459983117, "creation_date": 1459980507, "answer_id": 36463210, "question_id": 36462944, "link": "https://stackoverflow.com/questions/36462944/python-write-to-specific-part-of-file-not-by-line-regex/36463210#36463210", "title": "Python - Write to specific part of file, not by line - Regex", "body": "<p>You need to write to a temporary file then overwrite the original.</p>\n\n<pre><code>from tempfile import NamedTemporaryFile\nfrom shutil import move\n\n\ndef add_new(new):\n    with open(\"check.txt\") as f, NamedTemporaryFile(\"w\",delete=False) as tmp:\n        for line in f:\n            if line.startswith(\"Tags =\"):\n                repl = \", {}]\".format(new) if \"[]\" not in line else \"{}]\".format(new)\n                tmp.write(line.replace(\"]\", repl))\n                tmp.writelines(f)\n                break\n            tmp.write(line)\n    move(tmp.name, \"check.txt\")\n</code></pre>\n\n<p>Then just pass in the new value:</p>\n\n<pre><code>In [3]: cat check.txt\nTitleThing (\nSome info = 22 \n\n(More info = 22.2)\nTags = []\n)\nIn [4]: add_new(\"newvalue\")\n\nIn [5]: cat check.txt\nTitleThing (\nSome info = 22 \n\n(More info = 22.2)\nTags = [newvalue]\n)\nIn [6]: add_new(\"newvalue2\")\n\nIn [7]: cat check.txt\nTitleThing (\nSome info = 22 \n\n(More info = 22.2)\nTags = [newvalue, newvalue2]\n)\n</code></pre>\n\n<p>If you wanted the new value at the start, you need to just change the logic slightly:</p>\n\n<pre><code>   repl = \"[{}, \".format(new) if \"[]\" not in line else \"[{}\".format(new)\n   tmp.write(line.replace(\"[\", repl))\n</code></pre>\n\n<p>Based on your comment change the if to:</p>\n\n<pre><code>if  '\"Tags\": [' in line:\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6142422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f80ce44372a06da10b37b659fd4c66?s=128&d=identicon&r=PG&f=1", "display_name": "flec8", "link": "https://stackoverflow.com/users/6142422/flec8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 36463210, "answer_count": 2, "score": 1, "last_activity_date": 1459983117, "creation_date": 1459979151, "question_id": 36462944, "link": "https://stackoverflow.com/questions/36462944/python-write-to-specific-part-of-file-not-by-line-regex", "title": "Python - Write to specific part of file, not by line - Regex", "body": "<p>What I would like to do is write in a value into a specific part of a file. This part can be anywhere in the file, but will appear only once, therefore I don't believe adding a line will solve it.</p>\n\n<p>What I have is essentially a text file with:</p>\n\n<pre><code>TitleThing (\nSome info = 22 \n\n(More info = 22.2)\nTags = [] \n)\n</code></pre>\n\n<p>What I would like to do is add a string to the file right inside of the [] after Tags =.</p>\n\n<p>Would looks like:</p>\n\n<pre><code>TitleThing (\nSome info = 22 \nOtherthing -- \"56.foo\"\n(More info = 22.2)\n\nTags = [\"newtag\"] \n)\n</code></pre>\n\n<p>The other issue is that there may be existing tags:</p>\n\n<pre><code>TitleThing (\nSome info = 22 \n\n(More info = 22.2)\nTags = [\"oldtag, othertag\"] \n)\n</code></pre>\n\n<p>In this situation I would like to add my \"newtag\" to the exiting list so that it appears first.</p>\n\n<p>I have start with:</p>\n\n<pre><code>tagRegex = re.compile(r'Tags = [(.*)]')\n</code></pre>\n\n<p>But I'm not sure how to proceed.</p>\n\n<p>Would love some help!</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "html", "django", "jinja2"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1459999369, "post_id": 36462937, "comment_id": 60543553, "body": "You might be passing a context variable also called <code>url</code> in  your <code>people</code> view."}, {"owner": {"reputation": 311, "user_id": 2057885, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d272y.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2057885/chris"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1460040509, "post_id": 36462937, "comment_id": 60569498, "body": "Interesting point.  I hadn&#39;t considered something like this.  I set this up in the <code>people</code> app with a url route like: <code>url(r&#39;^people-list&#47;&#39;, TemplateView.as_view(template_name=&quot;people_list.html&quot;)),</code>.  From <a href=\"https://github.com/django/django/blob/1.8/django/views/generic/base.py#L152\" rel=\"nofollow noreferrer\">Django source for TemplateView</a>, I don&#39;t see <code>TemplateView</code> adding a <code>url</code> context variable.  Using jinja, would anything else be adding context unexpectedly for just this view (it works fine in some other views)."}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 2057885, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d272y.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2057885/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1466520222, "creation_date": 1466520222, "answer_id": 37947581, "question_id": 36462937, "link": "https://stackoverflow.com/questions/36462937/url-function-in-jinja2-template-throws-attributeerror-in-django/37947581#37947581", "title": "url function in jinja2 template throws AttributeError in Django", "body": "<p><a href=\"https://stackoverflow.com/questions/36462937/url-function-in-jinja2-template-throws-attributeerror-in-django#comment60543553_36462937\">Selcuk had the right idea</a>.  I was using jinja templates, and the <code>kwargs</code> are added in automatically.  One of my <code>kwargs</code> was <code>&lt;url&gt;</code> and was over-riding the <code>url</code> extension I had added to the jinja environment.  Renaming the <code>kwarg</code> to something else solved the issue.</p>\n"}], "owner": {"reputation": 311, "user_id": 2057885, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d272y.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2057885/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 37947581, "answer_count": 1, "score": 1, "last_activity_date": 1466520222, "creation_date": 1459979111, "question_id": 36462937, "link": "https://stackoverflow.com/questions/36462937/url-function-in-jinja2-template-throws-attributeerror-in-django", "title": "url function in jinja2 template throws AttributeError in Django", "body": "<p>I have a <code>base.html</code> in <code>my_project/jinja2/</code> and it contains everything except the <code>&lt;body&gt;</code> for a site.  We then extend <code>base.html</code> as one does.</p>\n\n<p>In this example I am extending <code>base.html</code> from app <code>people</code> in a file at <code>my_project/people/jinja2/people/people_list.html</code> using something like this:</p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block content %}\n&lt;!-- Some html --&gt;\n{% endblock content %}\n</code></pre>\n\n<p>My <code>base.html</code> includes a link to the blog rss feed in the <code>&lt;head&gt;</code> like so:</p>\n\n<pre><code>&lt;link rel=\"alternate\" type=\"application/atom+xml\" title=\"Blog\" href=\"{{ url('blog:articles_feed') }}\" /&gt;\n</code></pre>\n\n<p>This works fine most places such as <code>my_project/jinja2/index.html</code> and <code>my_project/jinja2/blog_list.html</code> but in this 3rd app <code>people</code>, I am getting the following error at this same line of template code:</p>\n\n<pre><code>AttributeError: 'str' object has no attribute '__call__'\n</code></pre>\n\n<p>Since jinja2 has better debugging I can run python in werkzueg and see some potential details of what might be happening:</p>\n\n<pre><code>locals()\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>{\n    '_': {...},\n    'static': &lt; bound method StaticFilesStorage.url of &lt; django.contrib.staticfiles.storage.StaticFilesStorage object at 0x7f423ec3ebe0 &gt;&gt; ,\n    'joiner': &lt; class 'jinja2.utils.Joiner' &gt; ,\n    'request': &lt; WSGIRequest: GET '/case-studies/hog?__debugger__=yes&amp;cmd=locals()&amp;frm=139922493301984&amp;s=XfAagGnpxRWFBRRd0Uzk' &gt; ,\n    'page': None,\n    'csrf_input': &lt; django.utils.functional.lazy. &lt; locals &gt; .__proxy__ object at 0x7f423e8262e8 &gt; ,\n    'cycler': &lt; class 'jinja2.utils.Cycler' &gt; ,\n    'dict': &lt; class 'dict' &gt; ,\n    'absolute_url': &lt; function absolute_url at 0x7f423ece5b70 &gt; ,\n    'lipsum': &lt; function generate_lorem_ipsum at 0x7f423ebfc8c8 &gt; ,\n    'view': &lt; leaf.views.LeafTemplateView object at 0x7f423e820198 &gt; ,\n    'range': &lt; class 'range' &gt; ,\n    'ngettext': &lt; function ungettext at 0x7f42450547b8 &gt; ,\n    'gettext': &lt; function ugettext at 0x7f4245054730 &gt; ,\n    'absolute_root': &lt; function absolute_root at 0x7f423ece8268 &gt; ,\n    'datetime': &lt; class 'datetime.datetime' &gt; ,\n    'csrf_token': &lt; django.utils.functional.lazy. &lt; locals &gt; .__proxy__ object at 0x7f423e826400 &gt; ,\n    'url': 'people/all'\n}\n</code></pre>\n\n<p>I'm not sure if this is a correct assumption, but is <code>url</code> not being correctly added to the environment as a function, but a string instead?  It's in my jinja2.py file, and works elsewhere as expected in jinja2 templates.  What gives?</p>\n"}, {"tags": ["python", "csv", "text"], "comments": [{"owner": {"reputation": 47294, "user_id": 3885376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgeJ5.png?s=128&g=1", "display_name": "ROMANIA_engineer", "link": "https://stackoverflow.com/users/3885376/romania-engineer"}, "edited": false, "score": 1, "creation_date": 1459979215, "post_id": 36462935, "comment_id": 60537781, "body": "Don&#39;t you want to have <code>my_file_contents.replace(&#39;&amp;&#39;, &#39;,&#39;)</code> instead of <code>my_file_contents.replace(&#39;&amp;&#39;, &#39;&amp; &#39;).replace(&#39;,  &#39;, &#39;, &#39;)</code> and to check the result in csvfile.csv?"}], "answers": [{"tags": [], "owner": {"reputation": 37665, "user_id": 521034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1e92d5a4154a59c4dfb3217067fa74?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/521034/keith"}, "is_accepted": true, "score": 2, "last_activity_date": 1459979751, "last_edit_date": 1459979751, "creation_date": 1459979400, "answer_id": 36463001, "question_id": 36462935, "link": "https://stackoverflow.com/questions/36462935/ampersands-are-not-being-replaced-with-commas-in-python-text-file/36463001#36463001", "title": "Ampersands are not being replaced with commas in Python text file", "body": "<p>You're replacing the ampersand with an ampersand plus a space. </p>\n\n<p>Use this:</p>\n\n<pre><code>Python&gt; \"some &amp; text\".replace(\"&amp;\", \",\")\n</code></pre>\n\n<p>See <a href=\"https://docs.python.org/3/library/stdtypes.html?highlight=replace#str.replace\" rel=\"nofollow\">the docs</a>. </p>\n\n<p><em>Return a copy of the string with all occurrences of substring old replaced by new. If the optional argument count is given, only the first count occurrences are replaced.</em></p>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 5504999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l6HUN.jpg?s=128&g=1", "display_name": "Imtiaz Raqib", "link": "https://stackoverflow.com/users/5504999/imtiaz-raqib"}, "reply_to_user": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1459979809, "post_id": 36463013, "comment_id": 60538011, "body": "@zondo That makes sense, I actually did not know that. Thank you."}], "tags": [], "owner": {"reputation": 317, "user_id": 5504999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l6HUN.jpg?s=128&g=1", "display_name": "Imtiaz Raqib", "link": "https://stackoverflow.com/users/5504999/imtiaz-raqib"}, "is_accepted": false, "score": 0, "last_activity_date": 1459979779, "last_edit_date": 1459979779, "creation_date": 1459979443, "answer_id": 36463013, "question_id": 36462935, "link": "https://stackoverflow.com/questions/36462935/ampersands-are-not-being-replaced-with-commas-in-python-text-file/36463013#36463013", "title": "Ampersands are not being replaced with commas in Python text file", "body": "<p>Your <code>.replace()</code> parameters are wrong. Try this to replace \"&amp;\" and also \"&amp; \".</p>\n\n<pre><code>commafile.write(my_file_contents.replace('&amp;', ','))\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5859293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/549b088b5fc1609d302ea37dd7de1f81?s=128&d=identicon&r=PG&f=1", "display_name": "pulsar100", "link": "https://stackoverflow.com/users/5859293/pulsar100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "closed_date": 1460004022, "accepted_answer_id": 36463001, "answer_count": 2, "score": 0, "last_activity_date": 1459979779, "creation_date": 1459979093, "question_id": 36462935, "link": "https://stackoverflow.com/questions/36462935/ampersands-are-not-being-replaced-with-commas-in-python-text-file", "closed_reason": "Not suitable for this site", "title": "Ampersands are not being replaced with commas in Python text file", "body": "<p>Because ampersands are a delimiter in the file I am trying to process, I am attempting to replace all the instances of ampersand with commas in a Python text file, however the below code has no effect on the file.</p>\n\n<pre><code>commafile = open('/ampersandfile.txt')\nmy_file_contents = commafile.read()\ncommafile.close()\ncommafile = open('/csvfile.csv', 'w')\ncommafile.write(my_file_contents.replace('&amp;', '&amp; ').replace(',  ', ', '))\ncommafile.close()\n</code></pre>\n"}, {"tags": ["python", "jupyter", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 2643, "user_id": 925592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e3X1a.jpg?s=128&g=1", "display_name": "RufusVS", "link": "https://stackoverflow.com/users/925592/rufusvs"}, "edited": false, "score": 2, "creation_date": 1536167676, "post_id": 36562213, "comment_id": 91330487, "body": "I think the OP was referring to having multiple windows into the same file.  For instance, I am adding documentation cells at the top of my notebook, so I&#39;d like to keep that cell open while I use the search feature to find things I&#39;m documenting.   If I could open the same notebook under multiple tabs, that would probably do the trick."}, {"owner": {"reputation": 1755, "user_id": 3757757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhHJj.jpg?s=128&g=1", "display_name": "CrepeGoat", "link": "https://stackoverflow.com/users/3757757/crepegoat"}, "reply_to_user": {"reputation": 2643, "user_id": 925592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e3X1a.jpg?s=128&g=1", "display_name": "RufusVS", "link": "https://stackoverflow.com/users/925592/rufusvs"}, "edited": false, "score": 0, "creation_date": 1551116916, "post_id": 36562213, "comment_id": 96514135, "body": "@RufusVS can&#39;t you though? In the file browser mode, click the file you want to view, let it open up, then just click the same file again; then you&#39;ll have two browser tabs that you can move to separate side-by-side windows. I&#39;m not sure they synchronize their content (I mean that if you make changes in one I don&#39;t think the changes show in the other), but that might be unnecessary for the OP."}, {"owner": {"reputation": 2643, "user_id": 925592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e3X1a.jpg?s=128&g=1", "display_name": "RufusVS", "link": "https://stackoverflow.com/users/925592/rufusvs"}, "reply_to_user": {"reputation": 1755, "user_id": 3757757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhHJj.jpg?s=128&g=1", "display_name": "CrepeGoat", "link": "https://stackoverflow.com/users/3757757/crepegoat"}, "edited": false, "score": 0, "creation_date": 1551122824, "post_id": 36562213, "comment_id": 96516665, "body": "@CrepeGoat : I misread the OP.  It looks like meto was trying to get a side-by-side view of two cells for comparison, which is different from what I was looking for.  (OP did say split &quot;vertically&quot; which I glossed over).    I was looking more for a &quot;notebook split-screen editor&quot;,  which wouldn&#39;t work without synchronization between views.  Even a &quot;collapse all cells&quot; function might work for me. (only expanding the cells I was working with)"}, {"owner": {"reputation": 1755, "user_id": 3757757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhHJj.jpg?s=128&g=1", "display_name": "CrepeGoat", "link": "https://stackoverflow.com/users/3757757/crepegoat"}, "reply_to_user": {"reputation": 2643, "user_id": 925592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e3X1a.jpg?s=128&g=1", "display_name": "RufusVS", "link": "https://stackoverflow.com/users/925592/rufusvs"}, "edited": false, "score": 0, "creation_date": 1551146942, "post_id": 36562213, "comment_id": 96524750, "body": "@RufusVS gotcha. Well from my uninformed perspective, I imagine a synchronous multi-window feature isn\u2019t an outlandish request; go ahead and see if you can pitch it to the dev. team for future work, it\u2019d be a nice addition."}], "tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": false, "score": 3, "last_activity_date": 1460425577, "creation_date": 1460425577, "answer_id": 36562213, "question_id": 36462921, "link": "https://stackoverflow.com/questions/36462921/jupyter-notebook-split-screen-vertically-i-e-add-cell-horizontally/36562213#36562213", "title": "Jupyter notebook: split screen vertically (i.e. add cell horizontally)", "body": "<p>This is not possible at the moment (April 12th 2016), but there is a ticket in the Jupyter github issues that mentions that \"soon\" we will be able to open several notebooks in the same browser tab; That would allow for the side by side comparisons you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 501, "user_id": 11750716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IiXbVqFAnaA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdx4yeHN8qb7NUMtPjkoPD3q0DUEw/photo.jpg?sz=128", "display_name": "Jean Monet", "link": "https://stackoverflow.com/users/11750716/jean-monet"}, "is_accepted": false, "score": 4, "last_activity_date": 1583406572, "creation_date": 1583406572, "answer_id": 60544032, "question_id": 36462921, "link": "https://stackoverflow.com/questions/36462921/jupyter-notebook-split-screen-vertically-i-e-add-cell-horizontally/60544032#60544032", "title": "Jupyter notebook: split screen vertically (i.e. add cell horizontally)", "body": "<p>This is now possible in <a href=\"https://jupyterlab.readthedocs.io/en/stable/getting_started/installation.html\" rel=\"nofollow noreferrer\">JupyterLab</a>. See <a href=\"https://discourse.jupyter.org/t/seeking-suggestions-for-the-best-way-to-implement-a-split-view-jupyterlab-notebook-extension/2740/4\" rel=\"nofollow noreferrer\">this</a> example:</p>\n\n<blockquote>\n  <p>...there is a menu item to create a new side-by-side view of that same notebook that will remain synchronized with the other view:</p>\n  \n  <p><a href=\"https://i.stack.imgur.com/Zb63q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zb63q.png\" alt=\"enter image description here\"></a></p>\n</blockquote>\n\n<p>Note that JupyterLab will eventually replace Jupyter Notebook. See <a href=\"https://stackoverflow.com/a/56830184/11750716\">this</a> answer.</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 9981029, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qL6TjCJ5Zyc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfICz1UcLtC2yRizYnnEpxLaDMP8A/mo/photo.jpg?sz=128", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9981029/rahul"}, "is_accepted": false, "score": 0, "last_activity_date": 1591598440, "creation_date": 1591598440, "answer_id": 62256381, "question_id": 36462921, "link": "https://stackoverflow.com/questions/36462921/jupyter-notebook-split-screen-vertically-i-e-add-cell-horizontally/62256381#62256381", "title": "Jupyter notebook: split screen vertically (i.e. add cell horizontally)", "body": "<p>Yes, it is possible. Follow steps below.</p>\n\n<ol>\n<li>Install extensions</li>\n</ol>\n\n<pre><code>&gt;&gt;&gt; pip install jupyter_nbextensions_configurator jupyter_contrib_nbextensions\n&gt;&gt;&gt; jupyter contrib nbextension install --user\n&gt;&gt;&gt; jupyter nbextensions_configurator enable --user\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Enable Splitcell extension</p></li>\n<li><p>Open Jupyter notebook</p></li>\n<li>Go to nbextensions tab</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/744no.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/744no.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"5\">\n<li>search for splitcell extension and enable it</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/BbenX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BbenX.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"6\">\n<li>Use it via the icon on any notebook thereafter. </li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/1eHSP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1eHSP.png\" alt=\"enter image description here\"></a></p>\n\n<p>And don't forget to check out other awesome extensions. Enjoy. </p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 11875506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxdUD.png?s=128&g=1", "display_name": "etotheipi", "link": "https://stackoverflow.com/users/11875506/etotheipi"}, "is_accepted": false, "score": 0, "last_activity_date": 1603232170, "creation_date": 1603232170, "answer_id": 64454094, "question_id": 36462921, "link": "https://stackoverflow.com/questions/36462921/jupyter-notebook-split-screen-vertically-i-e-add-cell-horizontally/64454094#64454094", "title": "Jupyter notebook: split screen vertically (i.e. add cell horizontally)", "body": "<p>You can right-click a file tab, and select, &quot;New View for Notebook.&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/J1YBd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J1YBd.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 2449, "user_id": 2397318, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e98da1c8bd5fc26c80a02d99a8fe35f7?s=128&d=identicon&r=PG", "display_name": "meto", "link": "https://stackoverflow.com/users/2397318/meto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7544, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1603232170, "creation_date": 1459979054, "question_id": 36462921, "link": "https://stackoverflow.com/questions/36462921/jupyter-notebook-split-screen-vertically-i-e-add-cell-horizontally", "title": "Jupyter notebook: split screen vertically (i.e. add cell horizontally)", "body": "<p>Is it possible to add a cell on the side of another cell, splitting the screen vertically?\nThis seems very useful when comparing two lists of things.</p>\n\n<p>I don't see this options supported out of the box, so I am guessing it would require some extra js?</p>\n"}, {"tags": ["python", "numpy", "optimization"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459979511, "post_id": 36462909, "comment_id": 60537888, "body": "I remember there being an existing routine that does this or something very closely related, but I can&#39;t remember what it was. The simplicity of the sequence of <code>i</code> values means you could do this with explicit stride manipulation, if there isn&#39;t an existing routine."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459979864, "post_id": 36462909, "comment_id": 60538038, "body": "Wait, no, I was thinking of something else."}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1459980109, "post_id": 36462909, "comment_id": 60538134, "body": "Can you add an example that actually runs?"}], "answers": [{"comments": [{"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1459980138, "post_id": 36463056, "comment_id": 60538150, "body": "How is the performance of this?"}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1459980254, "post_id": 36463056, "comment_id": 60538180, "body": "Pretty cool. Do you see any more room for improvement?"}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1459980346, "post_id": 36463056, "comment_id": 60538222, "body": "My python says about your stride example: The slowest run took 6.84 times longer than the fastest. This could mean that an intermediate result is being cached. 100000 loops, best of 3: 9.66 &#181;s per loop. This makes the result suspicious"}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1459980651, "post_id": 36463056, "comment_id": 60538348, "body": "I mean that there is a large spread in the samples that come out of the stride routine. I do reproduce the huge performance increase, so your method is great."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1459980881, "post_id": 36463056, "comment_id": 60538434, "body": "@Chiel: The warning may be due to the array(s) being in the CPU cache. See <a href=\"http://stackoverflow.com/q/29759883/190597\">stackoverflow.com/q/29759883/190597</a>. Since I get the same warning for <code>using_loop</code> and <code>using_stride</code>, and they use the same arrays, I think the comparison is fair."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459987764, "post_id": 36463056, "comment_id": 60540522, "body": "Using <code>u.itemsize</code> for the strides has the issue of assuming the input is contiguous. It&#39;s more robust to take the stride from <code>u.strides</code>."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459988115, "post_id": 36463056, "comment_id": 60540611, "body": "@user2357112: Good point. Thanks for the correction."}, {"owner": {"reputation": 103, "user_id": 6169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8326486c22341fa5384239d9bcb56f3?s=128&d=identicon&r=PG&f=1", "display_name": "DOMiguel", "link": "https://stackoverflow.com/users/6169191/domiguel"}, "edited": false, "score": 0, "creation_date": 1460016903, "post_id": 36463056, "comment_id": 60551523, "body": "Thanks! Huge improvement."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 2, "last_activity_date": 1459988097, "last_edit_date": 1459988097, "creation_date": 1459979738, "answer_id": 36463056, "question_id": 36462909, "link": "https://stackoverflow.com/questions/36462909/how-to-set-matrix-columns-iteratively-and-fast/36463056#36463056", "title": "How to set matrix columns iteratively and fast?", "body": "<p>You could use <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.ndarray.strides.html\" rel=\"nofollow\"><code>stride.as_strided</code></a>:</p>\n\n<pre><code>import numpy.lib.stride_tricks as stride\n\ns = u.strides[0]\nH2 = stride.as_strided(u, shape=(N-q+1,q), strides=(s, s)).astype(complex)\n</code></pre>\n\n<p>Using <code>strides=(s, s)</code> is the key -- in particular, making the first stride <code>s</code> means that each row of <code>H2</code> advances the index into <code>u</code> by the number of bytes needed to advance one item. Hence the rows repeat, albeit shifted by one.</p>\n\n<hr>\n\n<p>For example,</p>\n\n<pre><code>import numpy as np\nimport numpy.lib.stride_tricks as stride\n\nN, q = 10**2, 6\nu = np.arange((N-q+1)*(N))\n\ndef using_loop(u):\n    H = np.zeros(shape=(N-q+1,q),dtype=complex)\n    for i in range(0,N-q+1):\n        H[i,:] = u[i:q+i]\n    return H\n\ndef using_stride(u):\n    s = u.strides[0]\n    H2 = stride.as_strided(u, shape=(N-q+1,q), strides=(s, s)).astype(complex)\n    return H2\n\nH = using_loop(u)\nH2 = using_stride(u)\nassert np.allclose(H, H2)\n</code></pre>\n\n<hr>\n\n<p>Since <code>stride.as_strided</code> avoids the Python <code>for-loop</code>, <code>using_stride</code> is faster than <code>using_loop</code>. The advantage grows as <code>N-q</code> (the number of iterations) increases.</p>\n\n<p>With N = 10**2 <code>using_stride</code> is 5x faster:</p>\n\n<pre><code>In [119]: %timeit using_loop(u)\n10000 loops, best of 3: 61.6 \u00b5s per loop\n\nIn [120]: %timeit using_stride(u)\n100000 loops, best of 3: 11.9 \u00b5s per loop\n</code></pre>\n\n<p>With N = 10**3 <code>using_stride</code> is 28x faster:</p>\n\n<pre><code>In [122]: %timeit using_loop(u)\n1000 loops, best of 3: 636 \u00b5s per loop\n\nIn [123]: %timeit using_stride(u)\n10000 loops, best of 3: 22.4 \u00b5s per loop\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8326486c22341fa5384239d9bcb56f3?s=128&d=identicon&r=PG&f=1", "display_name": "DOMiguel", "link": "https://stackoverflow.com/users/6169191/domiguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1459979919, "accepted_answer_id": 36463056, "answer_count": 1, "score": 0, "last_activity_date": 1459988097, "creation_date": 1459979013, "question_id": 36462909, "link": "https://stackoverflow.com/questions/36462909/how-to-set-matrix-columns-iteratively-and-fast", "closed_reason": "Duplicate", "title": "How to set matrix columns iteratively and fast?", "body": "<p>I have the following Python code:</p>\n\n<pre><code>H = np.zeros(shape=(N-q+1,q),dtype=complex)\nfor i in range(0,N-q+1):\n    H[i,:] = u[i:q+i]\n</code></pre>\n\n<p>where <em>N</em> and <em>q</em> are constants and <em>u</em> is a vector long enough so no out of bounds error would occur when <em>u[i:q+i]</em>.</p>\n\n<p>I have tried to optimize the code by using list comprehension,</p>\n\n<pre><code>H = np.asarray([u[i:q+i] for i in range(0,N-q+1)])\n</code></pre>\n\n<p>but <em>np.asarray()</em> makes it slower than previous code.</p>\n\n<p>Any idea in order to optimize the assignation of column values?</p>\n"}, {"tags": ["php", "python", "struct"], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 2071715, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Qd3wi.jpg?s=128&g=1", "display_name": "Myrtue", "link": "https://stackoverflow.com/users/2071715/myrtue"}, "is_accepted": false, "score": 0, "last_activity_date": 1459989607, "creation_date": 1459989607, "answer_id": 36464750, "question_id": 36462908, "link": "https://stackoverflow.com/questions/36462908/python-struct-on-windows/36464750#36464750", "title": "Python struct on windows", "body": "<p>It ended up being python gzip, that shiftet all bytes. Destroying the data.</p>\n"}], "owner": {"reputation": 196, "user_id": 2071715, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Qd3wi.jpg?s=128&g=1", "display_name": "Myrtue", "link": "https://stackoverflow.com/users/2071715/myrtue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459989607, "creation_date": 1459979013, "question_id": 36462908, "link": "https://stackoverflow.com/questions/36462908/python-struct-on-windows", "title": "Python struct on windows", "body": "<p>I have created a python program using struct, that saves data in files. The data consists of a header (300 chars) and data (36000 int float pairs). On ubuntu this works and i can unpack the data for my php setup.</p>\n\n<p>I unpack the data in php by loading the content into a string and using unpack. I quickly found that 1 pair off int float, consumed the same as 8 chars in the php string.</p>\n\n<p>when I then moved this to windows, the data didn't take as much space, and when i try to unpack them in php, they seem to get unaligned from the binary string quickly.</p>\n\n<p>Is there any way to get the struct in php to use the architecture to produce the same output as ubuntu?\nI have tried the alligment options with struct (&lt;,>,!,=).</p>\n\n<p>My ubuntu dev setup is 64bit and the server is also 64bit. I have tried using both 32bit python and 64bit python on the windows server.</p>\n"}, {"tags": ["python", "django", "testing", "automated-tests"], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 6161705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601064932b1e8a343ef6e7091defc20a?s=128&d=identicon&r=PG&f=1", "display_name": "stack user", "link": "https://stackoverflow.com/users/6161705/stack-user"}, "edited": false, "score": 1, "creation_date": 1600973615, "post_id": 36485158, "comment_id": 113266387, "body": "use double quotation marks is important here, doesn&#39;t work with <code>.&#47;manage.py test --pattern=&#39;blub_test.py&#39;</code>"}], "tags": [], "owner": {"reputation": 1939, "user_id": 4930607, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ab1470af1835821aec698e59fed72346?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4930607/tom"}, "is_accepted": true, "score": 0, "last_activity_date": 1460056330, "creation_date": 1460056330, "answer_id": 36485158, "question_id": 36462875, "link": "https://stackoverflow.com/questions/36462875/how-to-use-patterns-for-tests-in-django/36485158#36485158", "title": "how to use --patterns for tests in django", "body": "<p>Ok, so the key is quite simple, the file is not supposed to start with test. </p>\n\n<p>I named it <code>blub_test.py</code> and then called it with </p>\n\n<p><code>./manage.py test --pattern=\"blub_test.py\"</code></p>\n"}], "owner": {"reputation": 1939, "user_id": 4930607, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ab1470af1835821aec698e59fed72346?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4930607/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 36485158, "answer_count": 1, "score": 0, "last_activity_date": 1460056330, "creation_date": 1459978893, "question_id": 36462875, "link": "https://stackoverflow.com/questions/36462875/how-to-use-patterns-for-tests-in-django", "title": "how to use --patterns for tests in django", "body": "<p>I have a test file with tests in it which will not be called with the regular </p>\n\n<p><code>manage.py test</code></p>\n\n<p>command, only when I specifically tell django to do so. </p>\n\n<p>So my file lives in the same folder as <code>tests.py</code> and its name is <code>test_blub.py</code></p>\n\n<p>I tried it with </p>\n\n<p><code>manage.py test --pattern=\"test_*.py\"</code></p>\n\n<p>Any idea? </p>\n"}, {"tags": ["python", "csv", "pandas", "utf-8"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459979267, "post_id": 36462852, "comment_id": 60537801, "body": "<a href=\"http://stackoverflow.com/a/20670901/2141635\">stackoverflow.com/a/20670901/2141635</a>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459981500, "post_id": 36462852, "comment_id": 60538682, "body": "Using <code>df.apply(lambda x: pd.lib.infer_dtype(x.values))</code> does show  types as unicode and   mixed, if you look at the link above you will see what is happening"}], "answers": [{"tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": false, "score": 5, "last_activity_date": 1459978999, "creation_date": 1459978999, "answer_id": 36462904, "question_id": 36462852, "link": "https://stackoverflow.com/questions/36462852/how-to-read-utf-8-files-with-pandas/36462904#36462904", "title": "How to read UTF-8 files with Pandas?", "body": "<p>Use the <code>encoding</code> keyword with the appropriate parameter:</p>\n\n<pre><code>df = pd.read_csv('1459966468_324.csv', encoding='utf8')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1459980427, "post_id": 36462953, "comment_id": 60538262, "body": "It&#39;s because you have <code>nan</code> values. Try <code>df.dropna(subset=[&quot;text&quot;], inplace=True)</code> first then Sam&#39;s suggestion will convert the text column to unicode in the file you provided."}], "tags": [], "owner": {"reputation": 3190, "user_id": 5496634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207922765092562/picture?type=large", "display_name": "Sam", "link": "https://stackoverflow.com/users/5496634/sam"}, "is_accepted": true, "score": 28, "last_activity_date": 1563886204, "last_edit_date": 1563886204, "creation_date": 1459979186, "answer_id": 36462953, "question_id": 36462852, "link": "https://stackoverflow.com/questions/36462852/how-to-read-utf-8-files-with-pandas/36462953#36462953", "title": "How to read UTF-8 files with Pandas?", "body": "<p>As the other poster mentioned, you might try:</p>\n\n<pre><code>df = pd.read_csv('1459966468_324.csv', encoding='utf8')\n</code></pre>\n\n<p>However this could still leave you looking at 'object' when you print the dtypes. To confirm they are utf8, try this line after reading the CSV:</p>\n\n<pre><code>df.apply(lambda x: pd.lib.infer_dtype(x.values))\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>args            unicode\ndate         datetime64\nhost            unicode\nkwargs          unicode\noperation       unicode\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4446, "user_id": 5717589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebac146fb4581d2fdf6e788faf2fea15?s=128&d=identicon&r=PG&f=1", "display_name": "ptrj", "link": "https://stackoverflow.com/users/5717589/ptrj"}, "is_accepted": false, "score": 1, "last_activity_date": 1459988482, "creation_date": 1459988482, "answer_id": 36464552, "question_id": 36462852, "link": "https://stackoverflow.com/questions/36462852/how-to-read-utf-8-files-with-pandas/36464552#36464552", "title": "How to read UTF-8 files with Pandas?", "body": "<p>Pandas stores strings in <code>object</code>s. In python 3, all string are in unicode by default. So if you use python 3, your data is already in unicode (don't be mislead by type <code>object</code>).</p>\n\n<p>If you have python 2, then use <code>df = pd.read_csv('your_file', encoding = 'utf8')</code>. Then try for example <code>pd.lib.infer_dtype(df.iloc[0,0])</code> (I guess the first col consists of strings.)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9871683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08afaec597d21cbe1cc678b4deb04d3?s=128&d=identicon&r=PG&f=1", "display_name": "cefect", "link": "https://stackoverflow.com/users/9871683/cefect"}, "is_accepted": false, "score": 0, "last_activity_date": 1613528584, "creation_date": 1613528584, "answer_id": 66234883, "question_id": 36462852, "link": "https://stackoverflow.com/questions/36462852/how-to-read-utf-8-files-with-pandas/66234883#66234883", "title": "How to read UTF-8 files with Pandas?", "body": "<p>Looks like the location of this function has moved. This worked for me on 1.0.1:</p>\n<pre><code>df.apply(lambda x: pd.api.types.infer_dtype(x.values))\n</code></pre>\n"}], "owner": {"reputation": 6272, "user_id": 127508, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ptOi1.jpg?s=128&g=1", "display_name": "Istvan", "link": "https://stackoverflow.com/users/127508/istvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96027, "favorite_count": 8, "accepted_answer_id": 36462953, "answer_count": 4, "score": 23, "last_activity_date": 1613528584, "creation_date": 1459978792, "last_edit_date": 1466520621, "question_id": 36462852, "link": "https://stackoverflow.com/questions/36462852/how-to-read-utf-8-files-with-pandas", "title": "How to read UTF-8 files with Pandas?", "body": "<p>I have a UTF-8 file with twitter data and I am trying to read it into a Python data frame but I can only get an 'object' type instead of unicode strings:</p>\n\n<pre><code># file 1459966468_324.csv\n#1459966468_324.csv: UTF-8 Unicode English text\ndf = pd.read_csv('1459966468_324.csv', dtype={'text': unicode})\ndf.dtypes\ntext               object\nAirline            object\nname               object\nretweet_count     float64\nsentiment          object\ntweet_location     object\ndtype: object\n</code></pre>\n\n<p>What is the right way of reading and coercing UTF-8 data into unicode with Pandas?</p>\n\n<p>This does not solve the problem:</p>\n\n<pre><code>df = pd.read_csv('1459966468_324.csv', encoding = 'utf8')\ndf.apply(lambda x: pd.lib.infer_dtype(x.values))\n</code></pre>\n\n<p>Text file is here:\n<a href=\"https://raw.githubusercontent.com/l1x/nlp/master/1459966468_324.csv\" rel=\"noreferrer\">https://raw.githubusercontent.com/l1x/nlp/master/1459966468_324.csv</a></p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 642, "user_id": 1767229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14415f5518d60f594d74f6f093113ac5?s=128&d=identicon&r=PG", "display_name": "ZSH", "link": "https://stackoverflow.com/users/1767229/zsh"}, "edited": false, "score": 0, "creation_date": 1459980687, "post_id": 36463102, "comment_id": 60538362, "body": "Is there any way to modify a key within the merge function, like <code>pd.merge(left, right, left_on=key, right_on=key+1</code>?"}, {"owner": {"reputation": 3190, "user_id": 5496634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207922765092562/picture?type=large", "display_name": "Sam", "link": "https://stackoverflow.com/users/5496634/sam"}, "reply_to_user": {"reputation": 642, "user_id": 1767229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14415f5518d60f594d74f6f093113ac5?s=128&d=identicon&r=PG", "display_name": "ZSH", "link": "https://stackoverflow.com/users/1767229/zsh"}, "edited": false, "score": 0, "creation_date": 1460035122, "post_id": 36463102, "comment_id": 60564903, "body": "I am not aware of any way to do this, however, if you are interested I can show you some ways to execute pure SQL with dataframes. It can be slower (since it needs to invlove a database), but if you are proficient with SQL it might benefit you."}], "tags": [], "owner": {"reputation": 3190, "user_id": 5496634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207922765092562/picture?type=large", "display_name": "Sam", "link": "https://stackoverflow.com/users/5496634/sam"}, "is_accepted": true, "score": 2, "last_activity_date": 1459979948, "creation_date": 1459979948, "answer_id": 36463102, "question_id": 36462828, "link": "https://stackoverflow.com/questions/36462828/pandas-dataframe-self-join-on-key1-key1-and-key2-1-key2/36463102#36463102", "title": "Pandas DataFrame Self-Join on Key1 == Key1 and Key2 +1 == Key2", "body": "<p>There are definitely a lot of ways to tackle this problem. One way, if a bit clumsy, would be to create a new column and merge onto that, i.e.:</p>\n\n<pre><code>df.loc[:,'RecordOffset'] = df.record + 1\ndf = df.merge(df, left_on = ['person', 'record'], right_on = ['person', 'RecordOffset'], how = 'left')\n</code></pre>\n\n<p>Another way to do this might be a pivot, for example:</p>\n\n<pre><code>import datetime\ndf = pd.DataFrame({'person':[1,1,1,2,2,3,3,3],\n                  'record':[1,2,3,1,2,1,2,3],\n                  'date' : [datetime.date(2015, 8, i) for i in range(1,9 )]})\n\ndf.pivot('person', 'record', 'date')\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>record           1           2           3\nperson                                    \n1       2015-08-01  2015-08-02  2015-08-03\n2       2015-08-04  2015-08-05         NaN\n3       2015-08-06  2015-08-07  2015-08-08\n</code></pre>\n"}], "owner": {"reputation": 642, "user_id": 1767229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14415f5518d60f594d74f6f093113ac5?s=128&d=identicon&r=PG", "display_name": "ZSH", "link": "https://stackoverflow.com/users/1767229/zsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2125, "favorite_count": 0, "accepted_answer_id": 36463102, "answer_count": 1, "score": 1, "last_activity_date": 1459979948, "creation_date": 1459978684, "question_id": 36462828, "link": "https://stackoverflow.com/questions/36462828/pandas-dataframe-self-join-on-key1-key1-and-key2-1-key2", "title": "Pandas DataFrame Self-Join on Key1 == Key1 and Key2 +1 == Key2", "body": "<p>Is there a way to alter a key during <code>pandas.merge()</code>?</p>\n\n<p>I'm trying to join <code>data</code> to itself on <code>left.person == right.person</code> and <code>left.record +1 == right.record</code>, so I can fill delta with datetime difference <code>right.date - left.date</code>.</p>\n\n<p>I'm on <code>Python 3.5.1 | IPython 4.1.2 | Anaconda custom (64-bit) | Windows 7</code></p>\n\n<pre><code>In[38]: data.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 11185856 entries, 0 to 11185855\nData columns (total 4 columns):\nperson    int64\nrecord    int64\ndate      datetime64[ns]\ndelta     datetime64[ns]\ndtypes: datetime64[ns](2), int64(2)\nmemory usage: 341.4 MB\n\nIn[39]: data.head(5)\nOut[37]: \n   person  record       date delta\n0       1       1 2015-08-01   NaT\n1       1       2 2015-10-18   NaT\n2       1       3 2016-02-06   NaT\n3       2       1 2015-04-18   NaT\n4       2       2 2015-07-11   NaT\n</code></pre>\n\n<p>This was trivial for me in SQL, but after reading pages of pandas-docs on merging and concatenation I'm still not getting it.</p>\n"}, {"tags": ["python", "xml", "python-2.7", "encode"], "answers": [{"comments": [{"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "reply_to_user": {"reputation": 109, "user_id": 6167344, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ec15133b8d3fe1b7b5e18dae2a644206?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Iverson", "link": "https://stackoverflow.com/users/6167344/daniel-iverson"}, "edited": false, "score": 0, "creation_date": 1459978711, "post_id": 36462698, "comment_id": 60537570, "body": "See @MattDMo&#39;s answer."}], "tags": [], "owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "is_accepted": false, "score": 1, "last_activity_date": 1459978097, "creation_date": 1459978097, "answer_id": 36462698, "question_id": 36462612, "link": "https://stackoverflow.com/questions/36462612/strange-unicodeencodeerror-attributeerror-in-my-script/36462698#36462698", "title": "Strange UnicodeEncodeError/AttributeError in my script", "body": "<p>Your console has a default encoding of cp437, and cp437 is unable to represent the character <code>u'\\xae'</code>.</p>\n\n<pre><code>&gt;&gt;&gt; print (u'\\xae')\n\u00ae\n&gt;&gt;&gt; print (u'\\xae'.encode('utf-8'))\nb'\\xc2\\xae'\n&gt;&gt;&gt; print (u'\\xae'.encode('cp437'))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.5/encodings/cp437.py\", line 12, in encode\n    return codecs.charmap_encode(input,errors,encoding_map)\nUnicodeEncodeError: 'charmap' codec can't encode character '\\xae' in position 0: character maps to &lt;undefined&gt;\n</code></pre>\n\n<p>You can see that it's trying to convert to cp437 in the traceback:\n<code>File \"C:\\Python27\\lib\\encodings\\cp437.py\", line 12, in encode</code></p>\n\n<p>(I reproduced the problem in Python3.5, but it's the same issue in both versions of Python)</p>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 6167344, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ec15133b8d3fe1b7b5e18dae2a644206?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Iverson", "link": "https://stackoverflow.com/users/6167344/daniel-iverson"}, "edited": false, "score": 0, "creation_date": 1459978847, "post_id": 36462789, "comment_id": 60537625, "body": "Still getting the &quot;AttributeError: &#39;list&#39; object has no attribute &#39;encode&#39;&quot; with the new code"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 109, "user_id": 6167344, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ec15133b8d3fe1b7b5e18dae2a644206?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Iverson", "link": "https://stackoverflow.com/users/6167344/daniel-iverson"}, "edited": false, "score": 0, "creation_date": 1459978929, "post_id": 36462789, "comment_id": 60537668, "body": "@DanielYveson sorry, I didn&#39;t realize that <code>variants</code> was a list. See my edited answer above."}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1459978899, "last_edit_date": 1495540100, "creation_date": 1459978510, "answer_id": 36462789, "question_id": 36462612, "link": "https://stackoverflow.com/questions/36462612/strange-unicodeencodeerror-attributeerror-in-my-script/36462789#36462789", "title": "Strange UnicodeEncodeError/AttributeError in my script", "body": "<p><a href=\"https://stackoverflow.com/a/36462698/1426065\">snakecharmerb</a> <em>almost</em> got it, but missed the cause of your first error. Your code</p>\n\n<pre><code>print(prod, variants).encode('utf-8')\n</code></pre>\n\n<p>means you <code>print</code> the values of the <code>prod</code> and <code>variants</code> variables, then try to run the <code>encode()</code> function on the output of <code>print</code>. Unfortunately, <code>print()</code> (as a function in Python 2 and always in Python 3) returns <code>None</code>. To fix it, use the following instead:</p>\n\n<pre><code>print(prod.encode(\"utf-8\"), variants)\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 6167344, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ec15133b8d3fe1b7b5e18dae2a644206?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Iverson", "link": "https://stackoverflow.com/users/6167344/daniel-iverson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 36462789, "answer_count": 2, "score": 0, "last_activity_date": 1459978899, "creation_date": 1459977764, "question_id": 36462612, "link": "https://stackoverflow.com/questions/36462612/strange-unicodeencodeerror-attributeerror-in-my-script", "title": "Strange UnicodeEncodeError/AttributeError in my script", "body": "<p>Currently I am writing a script in Python 2.7 that works fine except for after running it for a few seconds it runs into an error: </p>\n\n<pre><code>Enter Shopify website URL (without HTTP):  store.highsnobiety.com\nScraping! Check log file @ z:\\shopify_output.txt to see output.\n!!! Also make sure to clear file every hour or so !!!\nCopper Bracelet - 3mm - Polished ['3723603267']\nTraceback (most recent call last):\n  File \"shopify_sitemap_scraper.py\", line 38, in &lt;module&gt;\n    print(prod, variants).encode('utf-8')\nAttributeError: 'NoneType' object has no attribute 'encode'\n</code></pre>\n\n<p>The script is to get data from a Shopify website and then print it to console. Code here:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import print_function\nfrom lxml.html import fromstring\nimport requests\nimport time\nimport sys\n\nreload(sys)\nsys.setdefaultencoding('utf-8')\n\n# Log file location, change \"z://shopify_output.txt\" to your location.\nlogFileLocation = \"z:\\shopify_output.txt\"\n\nlog = open(logFileLocation, \"w\")\n\n# URL of Shopify website from user input (for testing, just use store.highsnobiety.com during input)\nurl = 'http://' + raw_input(\"Enter Shopify website URL (without HTTP):  \") + '/sitemap_products_1.xml'\n\nprint ('Scraping! Check log file @ ' + logFileLocation + ' to see output.')\nprint (\"!!! Also make sure to clear file every hour or so !!!\")\nwhile True :\n\n    page = requests.get(url)\n    tree = fromstring(page.content)\n\n    # skip first url tag with no image:title\n    url_tags =  tree.xpath(\"//url[position() &gt; 1]\")\n\n    data = [(e.xpath(\"./image/title//text()\")[0],e.xpath(\"./loc/text()\")[0]) for e in  url_tags]\n\n    for prod, url in data:\n    # add xml extension to url\n        page = requests.get(url + \".xml\")\n        tree = fromstring(page.content)\n        variants = tree.xpath(\"//variants[@type='array']//id[@type='integer']//text()\")\n        print(prod, variants).encode('utf-8')\n</code></pre>\n\n<p>The most crazy part about it is that when I take out the <code>.encode('utf-8')</code> it gives me a UnicodeEncodeError seen here:</p>\n\n<pre><code>Enter Shopify website URL (without HTTP):  store.highsnobiety.com\nScraping! Check log file @ z:\\shopify_output.txt to see output.\n!!! Also make sure to clear file every hour or so !!!\nCopper Bracelet - 3mm - Polished ['3723603267']\nCopper Bracelet - 5mm - Brushed ['3726247811']\nCopper Bracelet - 7mm - Polished ['3726253635']\nHighsnobiety x EARLY - Leather Pouch ['14541472963', '14541473027', '14541473091']\nTraceback (most recent call last):\n  File \"shopify_sitemap_scraper.py\", line 38, in &lt;module&gt;\n    print(prod, variants)\n  File \"C:\\Python27\\lib\\encodings\\cp437.py\", line 12, in encode\n    return codecs.charmap_encode(input,errors,encoding_map)\nUnicodeEncodeError: 'charmap' codec can't encode character u'\\xae' in position 13: character maps to &lt;undefined&gt;'\n</code></pre>\n\n<p>Any ideas? Have no idea what else to try after hours of googling.</p>\n"}, {"tags": ["python", "join"], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1459985421, "post_id": 36462751, "comment_id": 60539888, "body": "Using <code>ar.append(int(arg))</code> will mean that <code>&quot; &quot;.join(ar)</code> won&#39;t work though. You could avoid the permanent conversion by leaving <code>ar</code> as <code>str</code>, and doing the sort as <code>ar.sort(key=int)</code> so it sorts on <code>int</code> values, while preserving the original <code>str</code>."}], "tags": [], "owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1459978968, "last_edit_date": 1459978968, "creation_date": 1459978310, "answer_id": 36462751, "question_id": 36462557, "link": "https://stackoverflow.com/questions/36462557/how-to-fix-this-number-sorting-python-code-so-that-it-works-correctly/36462751#36462751", "title": "how to fix this number sorting python code so that it works correctly", "body": "<p>I agree that the <code>join</code> line looks super funky.</p>\n\n<p><code>\" \".join(...)</code> will take a list (or any iterable) of arguments and create for you one string where all the arguments arguments are separated by one space.</p>\n\n<p>In this case I would just pass in your sorted list <code>ar</code>.</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport sys\nar=[]\nfor arg in sys.argv:\n    ar.append(arg)\n\nar.sort()\nprint \" \".join(ar)\n</code></pre>\n\n<p>Now we have two more problems:</p>\n\n<ul>\n<li>The first argument on the command line will be the name of your script. I'd use <code>sys.argv[1:]</code> instead of just <code>sys.argv</code>.</li>\n<li>You're sorting the strings that are passed in, and not the numbers. this will lead to a sort like <code>[1, 11, 13, 2, 3, 4, 5, 56, 9]</code>. To remedy this, I'd use <code>ar.append(int(arg))</code>.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1459985458, "post_id": 36464037, "comment_id": 60539903, "body": "Of course, since all the <code>x</code>s are <code>str</code>, you could skip the <code>str</code> conversion as well as the generator expression entirely and just use <code>ar</code> directly."}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1459985685, "post_id": 36464037, "comment_id": 60539969, "body": "@ShadowRanger: Oops!  I missed that.  I&#39;ve edited now."}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": false, "score": 1, "last_activity_date": 1459985667, "last_edit_date": 1495542245, "creation_date": 1459984901, "answer_id": 36464037, "question_id": 36462557, "link": "https://stackoverflow.com/questions/36462557/how-to-fix-this-number-sorting-python-code-so-that-it-works-correctly/36464037#36464037", "title": "how to fix this number sorting python code so that it works correctly", "body": "<p><code>'%s' % x for x in ar</code> is what is called a <a href=\"https://docs.python.org/2/reference/expressions.html#grammar-token-generator_expression\" rel=\"nofollow noreferrer\">generator expression</a>.  It generates a bunch of <code>'%s' % x</code> where <code>x</code> is defined as each item in <code>ar</code>.<code>\" \".join(...)</code> puts a space between each item given to <code>.join()</code>.  When the generator is given, it puts a space between each item the generator generates.  If <code>ar</code> is not a list of strings, the generator converts each item to a string.  Then, we use  <code>\" \".join(...)</code> to put a space between each of those strings.  <code>sys.argv</code> is always a list of strings, so you don't need that generator expression.  You could instead use <code>\" \".join(sys.argv)</code>.  According to <a href=\"https://stackoverflow.com/a/9061024/5827958\">this answer</a>, it would be more efficient to use a <a href=\"https://docs.python.org/2/tutorial/datastructures.html?highlight=list%20comprehension#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehension</a> anyway.  You would also use <code>str(x)</code> instead of <code>\"%s\"%x</code> just because it's easier to read.</p>\n"}], "owner": {"reputation": 3, "user_id": 2742389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/948594def1ce1407481d320a1a77c677?s=128&d=identicon&r=PG&f=1", "display_name": "user2742389", "link": "https://stackoverflow.com/users/2742389/user2742389"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36462751, "answer_count": 2, "score": 0, "last_activity_date": 1459985667, "creation_date": 1459977559, "last_edit_date": 1459979189, "question_id": 36462557, "link": "https://stackoverflow.com/questions/36462557/how-to-fix-this-number-sorting-python-code-so-that-it-works-correctly", "title": "how to fix this number sorting python code so that it works correctly", "body": "<p>This is regarding a number sorting program. I am not able to understand the syntax with the <code>join</code> line.</p>\n\n<pre><code>#!/usr/bin/env python\nimport sys\nar=[]\nfor arg in sys.argv:\n    ar.append(arg)  \nar.sort()\nprint \" \".join('%s'%x for x in ar)\n</code></pre>\n"}, {"tags": ["python", "output", "pyserial"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1459977592, "post_id": 36462508, "comment_id": 60537029, "body": "add more sleep ? or use a sentinal to wait for some sequence that signals it is done ?"}, {"owner": {"reputation": 161, "user_id": 1750194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff6f39fa5d21dbd3412510d7139fb4?s=128&d=identicon&r=PG", "display_name": "karmax", "link": "https://stackoverflow.com/users/1750194/karmax"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1459978174, "post_id": 36462508, "comment_id": 60537327, "body": "I try to increase sleep but I think is a problem of buffer. The best solution, maybe, is read line to line but I don&#39;t know how!!"}, {"owner": {"reputation": 2159, "user_id": 92200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcd1bf065d7964320f5e69ca1fe9120?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/92200/neil"}, "edited": false, "score": 1, "creation_date": 1459980076, "post_id": 36462508, "comment_id": 60538119, "body": "What is ser.read_all()? It&#39;s not listed in the pySerial API docs: <a href=\"https://pythonhosted.org/pyserial/pyserial_api.html\" rel=\"nofollow noreferrer\">pythonhosted.org/pyserial/pyserial_api.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 1750194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff6f39fa5d21dbd3412510d7139fb4?s=128&d=identicon&r=PG", "display_name": "karmax", "link": "https://stackoverflow.com/users/1750194/karmax"}, "is_accepted": true, "score": 1, "last_activity_date": 1460011010, "creation_date": 1460011010, "answer_id": 36468411, "question_id": 36462508, "link": "https://stackoverflow.com/questions/36462508/read-output-from-serial-with-pyserial/36468411#36468411", "title": "Read output from serial with pyserial.", "body": "<p>After a long night I found the solution!!</p>\n\n<pre><code>while 1:\n    serial_line = ser.readline()\n    dumpfile.write(str(serial_line))\n    print serial_line #for debug\n    if len(serial_line) == 0:\n      break\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 1750194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff6f39fa5d21dbd3412510d7139fb4?s=128&d=identicon&r=PG", "display_name": "karmax", "link": "https://stackoverflow.com/users/1750194/karmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3301, "favorite_count": 1, "accepted_answer_id": 36468411, "answer_count": 1, "score": 1, "last_activity_date": 1460011010, "creation_date": 1459977383, "question_id": 36462508, "link": "https://stackoverflow.com/questions/36462508/read-output-from-serial-with-pyserial", "title": "Read output from serial with pyserial.", "body": "<p>I have a problem with pyserial</p>\n\n<p>First, establish a connection: </p>\n\n<pre><code>ser = serial.Serial(\ndevice,\nbaudrate=115200,\nparity=serial.PARITY_NONE,\nstopbits=serial.STOPBITS_ONE,\nbytesize=serial.EIGHTBITS\n)\n</code></pre>\n\n<p>If I press a key a menu appear (I can't see this menu but I know if I press '1' obtain a dump of data):</p>\n\n<pre><code>0=Cfg\n1=Dump\n2=Erase\n3=Cal\nIn-&gt;  \n</code></pre>\n\n<p>In my code press '1':</p>\n\n<pre><code>cmd = \"1\"\nser.write(cmd.encode('ascii'))\n</code></pre>\n\n<p>So, when I press '1' the serial result is a very long list of number like this:</p>\n\n<pre><code>816 81e 81e\n828 820 820\n816 816 81a\n82a 826 824\n816 80e 81a\n81e 824 820\n820 81a 80e\n816 80e 81e\n82a 81c 824\n... and many other\n</code></pre>\n\n<p>I try to read the output with this command after 60 seconds:\n(60 seconds is about a time to scroll all row)</p>\n\n<pre><code>time.sleep(60)\ndumpfile.write(str(ser.read_all()))\n</code></pre>\n\n<p>But in dumpfile I have only few rows. \nHow I can read total output of serial?</p>\n"}, {"tags": ["python", "string", "python-3.x"], "comments": [{"owner": {"reputation": 5222, "user_id": 892534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49b90815de67f6b55e6d87e34d82f746?s=128&d=identicon&r=PG", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/892534/chrisp"}, "edited": false, "score": 0, "creation_date": 1459977836, "post_id": 36462497, "comment_id": 60537149, "body": "What does this have to do with <code>urllib</code>? I removed that tag. Also, you could replace unwanted characters using the <code>re</code> module."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6087660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca7d213a8d7847949e92a19335a54f6?s=128&d=identicon&r=PG&f=1", "display_name": "gedjnr", "link": "https://stackoverflow.com/users/6087660/gedjnr"}, "edited": false, "score": 0, "creation_date": 1459978468, "post_id": 36462747, "comment_id": 60537469, "body": "Thanks that is a great help!"}], "tags": [], "owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "is_accepted": true, "score": 0, "last_activity_date": 1459978289, "creation_date": 1459978289, "answer_id": 36462747, "question_id": 36462497, "link": "https://stackoverflow.com/questions/36462497/i-am-trying-to-count-the-number-of-time-a-word-appears-in-a-txt-file-using-pyth/36462747#36462747", "title": "I am trying to count the number of time a word appears in a .txt file using Python3", "body": "<p>The <code>strip</code> method of a python string only removes specified characters from the beginning and end of the string. Using the <code>translate</code> method instead would fix that. (This is the cause of outputs 3 and 4). Output one is caused by a different problem. If a word consisting of entirely characters in <code>strip</code> occurs, it gets included in the words dictionary under the empty string.</p>\n\n<p>Tweaked code:</p>\n\n<pre><code>import string\ndef unique_words2(filename):\n    words = {}\n    strip = string.whitespace + string.punctuation + string.digits + \"\\\"'\"\n    translation = {ord(bad):None for bad in strip} \n    for line in open(filename):\n        for word in line.lower().split():\n             word = word.translate(translation)\n             if word:\n                 words[word] = words.get(word, 0) + 1\n    for word in sorted(words):\n        print(\"{0} {1}\".format(word, words[word]))\n\nunique_words2(\"alice.txt\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "is_accepted": false, "score": 0, "last_activity_date": 1459978667, "creation_date": 1459978667, "answer_id": 36462823, "question_id": 36462497, "link": "https://stackoverflow.com/questions/36462497/i-am-trying-to-count-the-number-of-time-a-word-appears-in-a-txt-file-using-pyth/36462823#36462823", "title": "I am trying to count the number of time a word appears in a .txt file using Python3", "body": "<p>From <a href=\"https://docs.python.org/2/library/string.html\" rel=\"nofollow\">https://docs.python.org/2/library/string.html</a>:<br></p>\n\n<pre><code>string.split(s[, sep[, maxsplit]])\n</code></pre>\n\n<p>The words are separated by arbitrary strings of whitespace characters (space, tab, newline, return, formfeed)</p>\n\n<p>Replacing any other separator like '-' with a space should do the trick. No need to take care of repeated spaces since they will be treated as a single space.</p>\n\n<pre><code>def unique_words2(filename):\n    strip = string.whitespace + string.punctuation + string.digits + \"\\\"'\"\n    for line in open(filename):\n        separators = '-_|'\n        for sep in seperators:\n            line = line.replace(sep, ' ')\n\n        for word in line.lower().split():\n            word = word.strip(strip)\n            if word:\n                words[word] = words.get(word, 0) + 1\n    for word in sorted(words):\n        print(\"{0} {1}\".format(word, words[word]))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6087660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca7d213a8d7847949e92a19335a54f6?s=128&d=identicon&r=PG&f=1", "display_name": "gedjnr", "link": "https://stackoverflow.com/users/6087660/gedjnr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 36462747, "answer_count": 2, "score": 0, "last_activity_date": 1459981577, "creation_date": 1459977338, "last_edit_date": 1459981577, "question_id": 36462497, "link": "https://stackoverflow.com/questions/36462497/i-am-trying-to-count-the-number-of-time-a-word-appears-in-a-txt-file-using-pyth", "title": "I am trying to count the number of time a word appears in a .txt file using Python3", "body": "<p>I am trying to count the number of times a word appears in in a txt file. The program seems to work however I cannot stop it counting what I think is white space (the 60 in my result, which makes no sense as there is more than 60 spaces). Is there a way of stripping - and -- from the middle of words?</p>\n\n<pre><code>import string\n\nwords = {}\n\ndef unique_words2(filename):\n    strip = string.whitespace + string.punctuation + string.digits + \"\\\"'\"\n    for line in open(filename):\n        for word in line.lower().split():\n            if word == \" \":\n                continue\n            else:\n                word = word.strip(strip)\n                words[word] = words.get(word, 0) + 1\n    for word in sorted(words):\n        print(\"{0} {1}\".format(word, words[word]))\n\nunique_words2(\"alice.txt\")\n</code></pre>\n\n<p>the first 5 results show;</p>\n\n<pre><code> 60\na 627\na--i'm 1\na-piece 1\nabide 1\n</code></pre>\n\n<p>It is results like 1, 3 and 4 that I would like eliminate.</p>\n"}, {"tags": ["python", "distutils", "setup.py"], "answers": [{"tags": [], "owner": {"reputation": 346, "user_id": 9118285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7160a1a06c23a8718fdd016fe6ed5433?s=128&d=identicon&r=PG&f=1", "display_name": "MultiSkill", "link": "https://stackoverflow.com/users/9118285/multiskill"}, "is_accepted": false, "score": 3, "last_activity_date": 1513748192, "creation_date": 1513748192, "answer_id": 47899418, "question_id": 36462470, "link": "https://stackoverflow.com/questions/36462470/print-path-of-output-from-python-setup-py-sdist/47899418#47899418", "title": "Print path of output from python setup.py sdist", "body": "<p>It looks like you can do:</p>\n\n<pre><code>python setup.py sdist --formats=gztar\nFNAME=dist/`python setup.py --fullname`.tar.gz\necho $FNAME\n</code></pre>\n\n<p>Using the formats parameter to ensure that the file is going to be tar.gz\nHave checked this script on a setup.py with setup from setuptools. Should work with distutils too.\nYou can override the dist folder, have a look at:</p>\n\n<pre><code>python setup.py sdist --help\n</code></pre>\n"}], "owner": {"reputation": 1117, "user_id": 1667156, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f6c59ac66c560652cbdcee3f09865caa?s=128&d=identicon&r=PG", "display_name": "estobbart", "link": "https://stackoverflow.com/users/1667156/estobbart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1513748192, "creation_date": 1459977241, "question_id": 36462470, "link": "https://stackoverflow.com/questions/36462470/print-path-of-output-from-python-setup-py-sdist", "title": "Print path of output from python setup.py sdist", "body": "<p>Is there way to get the path of the tar file that <code>setup.py sdist</code> built? I know where it is, but I'm looking to script it without having to <code>ls dist/</code> etc. I'm ok to override the command too if theres a variable that distutils assigns it too, or a function that will return it.</p>\n"}, {"tags": ["python", "python-import", "argparse"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1459977480, "post_id": 36462438, "comment_id": 60536972, "body": "For starters, take a look at the <a href=\"https://docs.python.org/2/howto/argparse.html\" rel=\"nofollow noreferrer\">argparse tutorial</a>?"}, {"owner": {"reputation": 9282, "user_id": 4653485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a28879e28d6950aeed15712534f35a8d?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/4653485/j%c3%a9r%c3%b4me"}, "edited": false, "score": 0, "creation_date": 1459978279, "post_id": 36462438, "comment_id": 60537382, "body": "When asking a question, please try to specify what you tried and where you&#39;re stuck."}], "answers": [{"tags": [], "owner": {"reputation": 9282, "user_id": 4653485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a28879e28d6950aeed15712534f35a8d?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/4653485/j%c3%a9r%c3%b4me"}, "is_accepted": false, "score": 2, "last_activity_date": 1459980581, "last_edit_date": 1459980581, "creation_date": 1459977773, "answer_id": 36462613, "question_id": 36462438, "link": "https://stackoverflow.com/questions/36462438/command-line-options-and-importing-functions/36462613#36462613", "title": "Command line options and importing functions", "body": "<p>The use of <code>argparse</code> is straightforward.</p>\n\n<p>The trick is to import a module and one of its functions, both being provided as strings.</p>\n\n<pre><code>import argparse\n\nparser = argparse.ArgumentParser(description='Import stuff')\nparser.add_argument('--module')\nparser.add_argument('--function')\nargs = parser.parse_args()\n\nmodule = __import__(args.module)\nfunction = getattr(module, args.function)\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 5511290, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5f72f31dd2d04d8c9176d7355e49dd98?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty ayyy", "link": "https://stackoverflow.com/users/5511290/qwerty-ayyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1459981410, "creation_date": 1459977103, "last_edit_date": 1459981410, "question_id": 36462438, "link": "https://stackoverflow.com/questions/36462438/command-line-options-and-importing-functions", "title": "Command line options and importing functions", "body": "<p>I'm importing a function from a python module (using from python_file import function), then making use of that function in my system.</p>\n\n<p>My problem right now is that I want the user to specify the python file and function via the commandline using the argparse module. But I am not sure how to do this. Please can someone explain how to do this?</p>\n"}, {"tags": ["python", "python-2.7", "wxpython"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6160169"}, "edited": false, "score": 0, "creation_date": 1459983738, "post_id": 36463363, "comment_id": 60539390, "body": "I&#39;m sorry for my ignorance but how do I call self.dialog.GetValue() from outside that class? This is a great answer but I can&#39;t seem to integrate it."}, {"owner": {"reputation": 198, "user_id": 4621144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd780477e3604462ee7371703aa7903?s=128&d=identicon&r=PG&f=1", "display_name": "BretD", "link": "https://stackoverflow.com/users/4621144/bretd"}, "edited": false, "score": 0, "creation_date": 1460039712, "post_id": 36463363, "comment_id": 60568825, "body": "edited my answer to show you how to use it outside the class"}, {"owner": {"reputation": 198, "user_id": 4621144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd780477e3604462ee7371703aa7903?s=128&d=identicon&r=PG&f=1", "display_name": "BretD", "link": "https://stackoverflow.com/users/4621144/bretd"}, "edited": false, "score": 0, "creation_date": 1460060557, "post_id": 36463363, "comment_id": 60582178, "body": "Glad it worked! I also want to recommend getting &quot;wxPython 2.8 Application Development Cookbook&quot;. It&#39;s a great resource for developing with wxPython."}], "tags": [], "owner": {"reputation": 198, "user_id": 4621144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd780477e3604462ee7371703aa7903?s=128&d=identicon&r=PG&f=1", "display_name": "BretD", "link": "https://stackoverflow.com/users/4621144/bretd"}, "is_accepted": true, "score": 1, "last_activity_date": 1460039690, "last_edit_date": 1460039690, "creation_date": 1459981304, "answer_id": 36463363, "question_id": 36462432, "link": "https://stackoverflow.com/questions/36462432/get-user-input-from-a-dialog-before-showing-the-mainframe/36463363#36463363", "title": "Get user input from a dialog before showing the mainframe", "body": "<p>In your browser init create a dialog box, run ShowModal on it, and then get the input with dialog.GetValue</p>\n\n<pre><code>class MyBrowser(wx.Frame):\n    def __init__(self, parent, id):\n        wx.Frame.__init__(self, parent, id,\n                   style=wx.DEFAULT_FRAME_STYLE | wx.STAY_ON_TOP)\n        self.transparency = 255\n        self.dialog = wx.TextEntryDialog(None, message=\"Enter stuff\")\n        self.dialog.ShowModal()\n        print self.dialog.GetValue()\n        self.Bind(wx.EVT_CHAR_HOOK, self.onKey)\n</code></pre>\n\n<p>Obviously replace printing it with whatever you want to do with the value</p>\n\n<p>If you want to access it after instantiation of the MyBrowser object assign it as an instance variable rather than printing.</p>\n\n<pre><code>class MyBrowser(wx.Frame):\n    def __init__(self, parent, id):\n        wx.Frame.__init__(self, parent, id,\n                   style=wx.DEFAULT_FRAME_STYLE | wx.STAY_ON_TOP)\n        self.transparency = 255\n        self.dialog = wx.TextEntryDialog(None, message=\"Enter stuff\")\n        self.dialog.ShowModal()\n        self.dlg_val = self.dialog.GetValue()\n        self.Bind(wx.EVT_CHAR_HOOK, self.onKey)\n</code></pre>\n\n<p>Then use it further down</p>\n\n<pre><code>if __name__ == \"__main__\":\n    dialog = MyBrowser(None)\n    print dialog.dlg_val\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6160169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 36463363, "answer_count": 1, "score": 1, "last_activity_date": 1460039690, "creation_date": 1459977085, "last_edit_date": 1459977514, "question_id": 36462432, "link": "https://stackoverflow.com/questions/36462432/get-user-input-from-a-dialog-before-showing-the-mainframe", "title": "Get user input from a dialog before showing the mainframe", "body": "<p>I have wxPython GUI program that has to get an input from the user to run. I want to show the dialog before the main frame, store the input, close the dialog and then run the main program. Right now I am using raw_input instead. This is my code:</p>\n\n<pre><code>import wx\nimport wx.lib.iewin as iewin\nimport subprocess\n\nclass MyBrowser(wx.Frame):\n  def __init__(self, parent, id):\n    wx.Frame.__init__(self, parent, id, \n                       style=wx.DEFAULT_FRAME_STYLE | wx.STAY_ON_TOP)\n    self.transparency = 255\n\n    sizer = wx.BoxSizer(wx.VERTICAL)\n    self.browser =  iewin.IEHtmlWindow(self)\n    sizer.Add(self.browser, 1, wx.EXPAND, 10)\n\n    self.Bind(wx.EVT_CHAR_HOOK, self.onKey)\n\n  def SetTransparent(self, value):\n    self.transparency = value\n    wx.Frame.SetTransparent(self, value) \n\n  def GetTransparent(self):\n    return self.transparency   \n\n  def decreaseTransparency(self, e):\n    self.SetTransparent(self.GetTransparent() - 10) \n  def increaseTransparency(self, e):\n    self.SetTransparent(self.GetTransparent() + 10)  \n\n\n  def onKey(self, evt):\n    if evt.GetKeyCode() == wx.WXK_DOWN:\n      self.decreaseTransparency(self)\n    elif evt.GetKeyCode() == wx.WXK_UP:\n      self.increaseTransparency(self)\n    else:\n      evt.Skip()    \n\n  def load(self,uri):\n     self.browser.Navigate(uri)\n\n#starts livestreamer process\nresponse = raw_input(\"Livestreamers name:\\n\")\nlivestreamer = \"livestreamer twitch.tv/\"\nhost = subprocess.Popen(['livestreamer', 'twitch.tv/'+response, 'best'],    stdout=subprocess.PIPE)\n\nif __name__ == '__main__':\napp = wx.App()\ndialog = MyBrowser(None, -1)\ndialog.browser.Navigate(\"https://www.twitch.tv/\" + response+ \"/chat?popout=\")\ndialog.Show()\napp.MainLoop()\nhost.communicate()[0]\n</code></pre>\n\n<p>This is what I have in mind:\n<a href=\"http://i.stack.imgur.com/S5Zjb.png\" rel=\"nofollow\">dialog example</a></p>\n"}, {"tags": ["python", "wikipedia", "gensim"], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 10617194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2208ed559c9794a0fcc36e7fe4cd9289?s=128&d=identicon&r=PG&f=1", "display_name": "moli", "link": "https://stackoverflow.com/users/10617194/moli"}, "edited": false, "score": 0, "creation_date": 1583771719, "post_id": 36645273, "comment_id": 107220220, "body": "when I use this code I get the error NameError: name &#39;u&#39; is not defined"}], "tags": [], "owner": {"reputation": 65618, "user_id": 147019, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/wY0k3.jpg?s=128&g=1", "display_name": "Srikar Appalaraju", "link": "https://stackoverflow.com/users/147019/srikar-appalaraju"}, "is_accepted": false, "score": 1, "last_activity_date": 1460717719, "creation_date": 1460717719, "answer_id": 36645273, "question_id": 36462394, "link": "https://stackoverflow.com/questions/36462394/convert-wikipedia-dump-to-text-using-python-m-gensim-scripts-make-wiki/36645273#36645273", "title": "Convert Wikipedia dump to text using python -m gensim.scripts.make_wiki", "body": "<p>Not sure of the command line script, but the following works for me -</p>\n\n<pre><code>def parse_wiki(wiki_bz_file):\n    output = open('./wiki_text_dump.txt', 'w')\n    i = 0\n    wiki = WikiCorpus(wiki_bz_file, lemmatize=False, dictionary={}) #vocab dict not needed\n    for text in wiki.get_texts():\n        output.write(u.listToStr(chunk) + '\\n')\n        i = i + 1\n        if i%50000 == 0:\n            logger.info(\"Saved \" + str(i) + \" articles\")\n    output.close()\n    logger.info(\"Finished Saved \" + str(i) + \" articles\")\n    return\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6169094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06cb3bcb1384b6db9c51117e25e949fa?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Tabari", "link": "https://stackoverflow.com/users/6169094/armin-tabari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1795, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1495800543, "creation_date": 1459976935, "last_edit_date": 1459993720, "question_id": 36462394, "link": "https://stackoverflow.com/questions/36462394/convert-wikipedia-dump-to-text-using-python-m-gensim-scripts-make-wiki", "title": "Convert Wikipedia dump to text using python -m gensim.scripts.make_wiki", "body": "<p>I want to use gensim to convert Wikipedia dump to plain text using <code>python -m gensim.scripts.make_wiki</code> script.</p>\n\n<p>I use it as :</p>\n\n<pre><code>python -m gensim.scripts.make_wiki ./enwiki-latest-pages-articles.xml.bz2 ./results\n</code></pre>\n\n<p>gives me an error at the end:</p>\n\n<pre><code>2016-04-06 20:43:46,471 : INFO : storing corpus in Matrix Market format to ./results/_bow.mm\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/usr/local/lib/python2.7/dist-packages/gensim-0.12.3-py2.7-linux-x86_64.egg/gensim/scripts/make_wiki.py\", line 88, in &lt;module&gt;\n    MmCorpus.serialize(outp + '_bow.mm', wiki, progress_cnt=10000) # another ~9h\n  File \"/usr/local/lib/python2.7/dist-packages/gensim-0.12.3-py2.7-linux-x86_64.egg/gensim/corpora/indexedcorpus.py\", line 89, in serialize\n    offsets = serializer.save_corpus(fname, corpus, id2word, progress_cnt=progress_cnt, metadata=metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/gensim-0.12.3-py2.7-linux-x86_64.egg/gensim/corpora/mmcorpus.py\", line 49, in save_corpus\n    return matutils.MmWriter.write_corpus(fname, corpus, num_terms=num_terms, index=True, progress_cnt=progress_cnt, metadata=metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/gensim-0.12.3-py2.7-linux-x86_64.egg/gensim/matutils.py\", line 486, in write_corpus\n    mw = MmWriter(fname)\n  File \"/usr/local/lib/python2.7/dist-packages/gensim-0.12.3-py2.7-linux-x86_64.egg/gensim/matutils.py\", line 436, in __init__\n    self.fout = utils.smart_open(self.fname, 'wb+') # open for both reading and writing\n  File \"build/bdist.linux-x86_64/egg/smart_open/smart_open_lib.py\", line 111, in smart_open\nNotImplementedError: unknown file mode wb+\n</code></pre>\n\n<p>Does anybody know what is going on?</p>\n"}, {"tags": ["python", "database", "bash", "sqlite"], "comments": [{"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "reply_to_user": {"reputation": 537, "user_id": 4378982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gIzI8.jpg?s=128&g=1", "display_name": "xdola", "link": "https://stackoverflow.com/users/4378982/xdola"}, "edited": false, "score": 0, "creation_date": 1459977252, "post_id": 36462377, "comment_id": 60536852, "body": "Yes, the triple quote is for keeping the indentation if I understand well"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1459977395, "post_id": 36462377, "comment_id": 60536929, "body": "I&#39;m confused why you need <code>sed</code>"}, {"owner": {"reputation": 359, "user_id": 5920298, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50d69f6319126e73fd46c6b3833bc632?s=128&d=identicon&r=PG&f=1", "display_name": "KR29", "link": "https://stackoverflow.com/users/5920298/kr29"}, "edited": false, "score": 0, "creation_date": 1459977414, "post_id": 36462377, "comment_id": 60536936, "body": "Where are you creating the table?"}, {"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1459977589, "post_id": 36462377, "comment_id": 60537025, "body": "Cricket -&gt; I need sed to retrieve information in a file kr29 -&gt; I create the table into another py script. A link if you want to see : <a href=\"http://pastebin.com/uki1nguc\" rel=\"nofollow noreferrer\">pastebin.com/uki1nguc</a>"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1459978647, "post_id": 36462377, "comment_id": 60537532, "body": "<code>import os; print(os.path.abspath(&#39;stockage.db&#39;))</code>. I&#39;m guessing that&#39;s not the file you think it is."}, {"owner": {"reputation": 359, "user_id": 5920298, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50d69f6319126e73fd46c6b3833bc632?s=128&d=identicon&r=PG&f=1", "display_name": "KR29", "link": "https://stackoverflow.com/users/5920298/kr29"}, "edited": false, "score": 0, "creation_date": 1459978917, "post_id": 36462377, "comment_id": 60537662, "body": "How are you browsing the data? Are you using a sqlite browser? If yes then it displays the tables in alphbetical order. You are propbably only seeing your <code>alert</code> table. The dropdown menu will have the other table <code>sonde_cpu_reseau</code>"}, {"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1459979180, "post_id": 36462377, "comment_id": 60537768, "body": "Wayne -&gt; the print return the exact path I think it is.. KR29 -&gt; I use SQliteman and I see the both tables but empty.. Here is a screen of the software : <a href=\"http://hpics.li/324b533\" rel=\"nofollow noreferrer\">hpics.li/324b533</a>"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1459980741, "post_id": 36462377, "comment_id": 60538380, "body": "Make sure you do a <code>conn.close()</code>, otherwise changes may be lost.  See example here <a href=\"https://docs.python.org/2/library/sqlite3.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/sqlite3.html</a>"}, {"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1459981543, "post_id": 36462377, "comment_id": 60538699, "body": "cdarke --&gt; I try, but nothing more.. And i see the properties of stockage.db and I think the script never access the file because the date of &quot;Acccessed&quot; or &quot;Modified&quot; never change"}, {"owner": {"reputation": 359, "user_id": 5920298, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50d69f6319126e73fd46c6b3833bc632?s=128&d=identicon&r=PG&f=1", "display_name": "KR29", "link": "https://stackoverflow.com/users/5920298/kr29"}, "edited": false, "score": 0, "creation_date": 1459981730, "post_id": 36462377, "comment_id": 60538751, "body": "I have seen that SQliteman shows the table as empty when some of its values are missing. Use this browser instead <a href=\"http://sqlitebrowser.org/\" rel=\"nofollow noreferrer\">sqlitebrowser.org</a> . You should be able to see what values are missing. Other than that I dont see why the table is not populated"}, {"owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "edited": false, "score": 0, "creation_date": 1460132068, "post_id": 36462377, "comment_id": 60615906, "body": "KR29 --&gt; You&#39;re right, and thanks for the software. My sqlite Request was good but SQLiteman won&#39;t show the record if a column have a missing values.. The problem is fixed with SQLITEBROWSER thanks a lot"}], "owner": {"reputation": 531, "user_id": 3858619, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/071d7c1c182c8aeb3b5fa95c02b6a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan30", "link": "https://stackoverflow.com/users/3858619/nathan30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459977413, "creation_date": 1459976871, "question_id": 36462377, "link": "https://stackoverflow.com/questions/36462377/python-sqlite-3-insert-into-not-working", "title": "Python SQLITE 3 INSERT INTO not working", "body": "<p>I have this python script, when I run it I have no error but my database is always empty...</p>\n\n<pre><code>import sqlite3\nimport subprocess\n\nconn = sqlite3.connect('stockage.db')\ncursor = conn.cursor()\n\nfilename = '../Collecteur/collecteur_cpu_reseau.txt'\nproc_name = subprocess.check_output([\"sed\",\"-n\",r\"1p\",filename])\nproc_freq = subprocess.check_output([\"sed\",\"-n\",r\"2p\",filename])\nproc_core = subprocess.check_output([\"sed\",\"-n\",r\"3p\",filename])\nproc_hyperthreading = subprocess.check_output([\"sed\",\"-n\",r\"4p\",filename])\nproc_architecture = subprocess.check_output([\"sed\",\"-n\",r\"5p\",filename])\nproc_cache_L1 = subprocess.check_output([\"sed\",\"-n\",r\"6p\",filename])\nproc_cache_L2 = subprocess.check_output([\"sed\",\"-n\",r\"7p\",filename])\nproc_cache_L3 = subprocess.check_output([\"sed\",\"-n\",r\"8p\",filename])\nproc_virtualisation = subprocess.check_output([\"sed\",\"-n\",r\"9p\",filename])\nproc_load_average = subprocess.check_output([\"sed\",\"-n\",r\"10p\",filename])\nip_infos_addr_ipv4 = subprocess.check_output([\"sed\",\"-n\",r\"11p\",filename])\nip_infos_addr_ipv6 = subprocess.check_output([\"sed\",\"-n\",r\"12p\",filename])\nip_publique_addr = subprocess.check_output([\"sed\",\"-n\",r\"13p\",filename])\ncarte_reseau = subprocess.check_output([\"sed\",\"-n\",r\"14p\",filename])\n\ncursor.execute(\"\"\"\nINSERT INTO sonde_cpu_reseau(proc_name,proc_freq,proc_core,proc_hyperthreading,proc_architecture,proc_cache_L1,proc_cache_L2,proc_cache_L3,proc_virtualisation,proc_load_average,   ip_infos_addr_ipv4,ip_infos_addr_ipv6,ip_publique_addr,carte_reseau) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)\"\"\",(proc_name,proc_freq,proc_core,proc_hyperthreading,proc_architecture,proc_cache_L1,proc_cache_L2,proc_cache_L3,proc_virtualisation,proc_load_average,\n    ip_infos_addr_ipv4,ip_infos_addr_ipv6,ip_publique_addr,carte_reseau))\nconn.commit()\n</code></pre>\n\n<p>`</p>\n\n<p>Thanks in advance </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "edited": false, "score": 1, "creation_date": 1459977014, "post_id": 36462371, "comment_id": 60536713, "body": "It&#39;s very unclear to me what you want that second one to do. Can you explain in words and give a clear expected output, because tl;dr yes all of those things are possible (without magic :) )"}, {"owner": {"reputation": 3, "user_id": 6169008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEeI0.jpg?s=128&g=1", "display_name": "Ciprian Mandache", "link": "https://stackoverflow.com/users/6169008/ciprian-mandache"}, "reply_to_user": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "edited": false, "score": 0, "creation_date": 1459977242, "post_id": 36462371, "comment_id": 60536845, "body": "The idea is to automagically make the string1 value &#39;param1&#39; be recognized by the interpreter as the function&#39;s param1 parameter, no matter the order in which I pass the string1, string2 or string3 &#39;parameters&#39;."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459977538, "post_id": 36462371, "comment_id": 60537000, "body": "&quot;I&#39;m not interested in changing the function to support <code>**kwargs</code> by the way&quot; - whether the function is defined with a <code>**kwargs</code> parameter has no connection to whether you can pass it keyword arguments with <code>**kwargs</code>."}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "edited": false, "score": 1, "creation_date": 1459978702, "post_id": 36462371, "comment_id": 60537566, "body": "Okay, given that, I&#39;m voiting to close as a dup. I&#39;m sort of surprised there are so many answers here without a flag, this question, if I understand, seems to have many answers on SO <a href=\"http://stackoverflow.com/questions/1419046/python-normal-arguments-vs-keyword-arguments\">Python normal arguments vs. keyword arguments</a>"}], "answers": [{"comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459977374, "post_id": 36462462, "comment_id": 60536918, "body": "You could also do <code>params = [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]; foo(*params)</code> too..."}, {"owner": {"reputation": 3, "user_id": 6169008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEeI0.jpg?s=128&g=1", "display_name": "Ciprian Mandache", "link": "https://stackoverflow.com/users/6169008/ciprian-mandache"}, "edited": false, "score": 0, "creation_date": 1459977450, "post_id": 36462462, "comment_id": 60536955, "body": "This did the trick! Thank you very much!"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 3, "user_id": 6169008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEeI0.jpg?s=128&g=1", "display_name": "Ciprian Mandache", "link": "https://stackoverflow.com/users/6169008/ciprian-mandache"}, "edited": false, "score": 0, "creation_date": 1459977644, "post_id": 36462462, "comment_id": 60537046, "body": "@CiprianMandache If this answer <a href=\"http://stackoverflow.com/help/someone-answers\">addressed your problem</a>, please consider <a href=\"http://meta.stackexchange.com/questions/5234\">accepting it</a> by clicking on the check mark/tick to the left of the answer, turning it green. This marks the question as resolved to your satisfaction, and awards <a href=\"http://stackoverflow.com/help/whats-reputation\">reputation</a> both to you and the person who answered. There may be a time limit before you can mark the question as answered, but it is relatively short."}, {"owner": {"reputation": 3, "user_id": 6169008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEeI0.jpg?s=128&g=1", "display_name": "Ciprian Mandache", "link": "https://stackoverflow.com/users/6169008/ciprian-mandache"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459977811, "post_id": 36462462, "comment_id": 60537135, "body": "@MattDMo thanks for the info! I just joined so I&#39;m a newb."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 3, "user_id": 6169008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEeI0.jpg?s=128&g=1", "display_name": "Ciprian Mandache", "link": "https://stackoverflow.com/users/6169008/ciprian-mandache"}, "edited": false, "score": 0, "creation_date": 1459977878, "post_id": 36462462, "comment_id": 60537171, "body": "@CiprianMandache no prob. I figured as much, which is why I commented. Thanks for learning to be a good community member!"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 1, "last_activity_date": 1459977519, "last_edit_date": 1459977519, "creation_date": 1459977216, "answer_id": 36462462, "question_id": 36462371, "link": "https://stackoverflow.com/questions/36462371/use-string-or-dict-to-build-python-function-parameters/36462462#36462462", "title": "Use string or dict to build Python function parameters", "body": "<pre><code>params = {\n    'param1': 'val1',\n    'param2': 'val2',\n    'param3': 'val3'\n}\n\nfoo(**params) # Even ubener magic\n</code></pre>\n\n<p>this is known as unpacking a dictionary ...</p>\n"}, {"tags": [], "owner": {"reputation": 581, "user_id": 2004580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B8TbS.jpg?s=128&g=1", "display_name": "dbra", "link": "https://stackoverflow.com/users/2004580/dbra"}, "is_accepted": false, "score": 2, "last_activity_date": 1459977290, "creation_date": 1459977290, "answer_id": 36462484, "question_id": 36462371, "link": "https://stackoverflow.com/questions/36462371/use-string-or-dict-to-build-python-function-parameters/36462484#36462484", "title": "Use string or dict to build Python function parameters", "body": "<pre><code>&gt;&gt;&gt; def foo(param1, param2, param3):\n    print param1, param2, param3\n\n&gt;&gt;&gt; foo(*range(3))\n0 1 2\n&gt;&gt;&gt; foo(**dict(param1=1,param2=2,param3=3))\n1 2 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1459977761, "last_edit_date": 1495540241, "creation_date": 1459977761, "answer_id": 36462611, "question_id": 36462371, "link": "https://stackoverflow.com/questions/36462371/use-string-or-dict-to-build-python-function-parameters/36462611#36462611", "title": "Use string or dict to build Python function parameters", "body": "<p>As pointed out by <a href=\"https://stackoverflow.com/users/2329988/en-knight\">@en_Knight</a> these are possible to do</p>\n\n<p>Either: </p>\n\n<pre><code>foo(param1='val1',param2='val2',param3='val3')\n</code></pre>\n\n<p>or: </p>\n\n<pre><code>foo(**params)\n</code></pre>\n\n<p>If you want to only specify some of the variables you could give the function default variables(would not be so useful in this exact example):</p>\n\n<pre><code>def foo(param1='', param2='', param3=''):\n</code></pre>\n\n<p>then you could specify them in any order or omit some of them eg.</p>\n\n<pre><code>foo(param3=2,param1=2)\n</code></pre>\n\n<p>But if some of the variables are defined without referring to the argument name they need to be put first:</p>\n\n<pre><code>foo(3,param=4) #param1 = 3, param2 = '', param3 = 4\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6169008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEeI0.jpg?s=128&g=1", "display_name": "Ciprian Mandache", "link": "https://stackoverflow.com/users/6169008/ciprian-mandache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1460010580, "accepted_answer_id": 36462462, "answer_count": 3, "score": 0, "last_activity_date": 1459977761, "creation_date": 1459976863, "question_id": 36462371, "link": "https://stackoverflow.com/questions/36462371/use-string-or-dict-to-build-python-function-parameters", "closed_reason": "Duplicate", "title": "Use string or dict to build Python function parameters", "body": "<p>I've been busting my head for a while now with this.</p>\n\n<p>Given this function:</p>\n\n<pre><code>def foo(param1, param2, param3):\n    print 'param1 =', param1\n    print 'param2 =', param2\n    print 'param3 =', param3\n</code></pre>\n\n<p>is it possible to do something like this in Python?</p>\n\n<pre><code>string1 = 'param1'\nstring2 = 'param2'\nstring3 = 'param3'\n\nfoo(string1='val1', string2='val2', string3='val3') # Uber magic\n</code></pre>\n\n<p>or something like this?</p>\n\n<pre><code>params = {\n    'param1': 'val1',\n    'param2': 'val2',\n    'param3': 'val3'\n}\n\nfoo(params) # Even ubener magic\n</code></pre>\n\n<p>The result of all the magic should be the equivalent to calling</p>\n\n<pre><code>foo(param1='val1', param2='val2', param3='val3')\n</code></pre>\n\n<p>I'm not interested in changing the function to support <code>**kwargs</code> by the way.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "ubuntu", "tkinter", "python-3.5"], "comments": [{"owner": {"reputation": 317, "user_id": 5504999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l6HUN.jpg?s=128&g=1", "display_name": "Imtiaz Raqib", "link": "https://stackoverflow.com/users/5504999/imtiaz-raqib"}, "edited": false, "score": 0, "creation_date": 1459976679, "post_id": 36462296, "comment_id": 60536506, "body": "is the <code>tkinter</code> module placed within your python directory?"}, {"owner": {"reputation": 13, "user_id": 4642665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f42a12066c32ece8112d07614b023e?s=128&d=identicon&r=PG&f=1", "display_name": "radar", "link": "https://stackoverflow.com/users/4642665/radar"}, "reply_to_user": {"reputation": 317, "user_id": 5504999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l6HUN.jpg?s=128&g=1", "display_name": "Imtiaz Raqib", "link": "https://stackoverflow.com/users/5504999/imtiaz-raqib"}, "edited": false, "score": 0, "creation_date": 1459977368, "post_id": 36462296, "comment_id": 60536915, "body": "So it looks like there are two tkinter folders that relate to Python3.5:  1.) /test/Python-3.5.1/Lib/tkinter.  2.) Home/local/lib/python3.5/tkinter.  The /test/ directory is where I actually installed Python3.5 from."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1459977501, "post_id": 36462296, "comment_id": 60536985, "body": "Ubuntu includes an installation of Python, which does not include Tkinter, because that requires Tcl, which is not included with Ubuntu. If you installed a Python build that is bundled with Tcl, make sure that you are invoking the correct Python install (the one you installed, not the default)."}], "owner": {"reputation": 13, "user_id": 4642665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f42a12066c32ece8112d07614b023e?s=128&d=identicon&r=PG&f=1", "display_name": "radar", "link": "https://stackoverflow.com/users/4642665/radar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 620, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459978720, "creation_date": 1459976574, "last_edit_date": 1459978720, "question_id": 36462296, "link": "https://stackoverflow.com/questions/36462296/python-3-5-tkinter-wont-install-ubuntu", "title": "Python 3.5 tkinter won&#39;t install Ubuntu", "body": "<p>Trying to run a script written for Python3.5 on Ubuntu 64 bit.</p>\n\n<p>I'm 99% sure I installed Python3.5 correctly. It lives at /usr/local/bin. But I am getting this error when I try to run my script:</p>\n\n<pre><code>import tkinter as tk   # python3\n\nFile \"/usr/local/lib/python3.5/tkinter/__init__.py\", line 35, in &lt;module&gt;\nimport _tkinter # If this fails your Python may not be configured for Tk\n\nImportError: No module named '_tkinter'\n</code></pre>\n\n<p>I've tried many of the workarounds on here, but to no avail.</p>\n\n<pre><code>apt-get install python3-tk\n</code></pre>\n\n<p>Says it's up to date and </p>\n\n<pre><code>update-python-modules -a\n</code></pre>\n\n<p>seems to execute fine, so I really don't know why it's not finding tkinter...</p>\n\n<p>Thanks in advance.</p>\n\n<p>UPDATE: I just blew away the VM, so if someone could give me proper steps on installing Python3.5 + tkinter on Ubuntu 64-bit 14.04, that'd be awesome.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1459976704, "post_id": 36462257, "comment_id": 60536519, "body": "I don&#39;t think you can specify the dtypes in this manner, you can pass a single type such as <code>str</code> but a not a list of strings. The dtype will be inferred when you assign the column values. I think that it should be unneccessary to specify at all"}, {"owner": {"reputation": 1791, "user_id": 3294665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cjfRk.jpg?s=128&g=1", "display_name": "jimijazz", "link": "https://stackoverflow.com/users/3294665/jimijazz"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 3, "creation_date": 1517408834, "post_id": 36462257, "comment_id": 84084223, "body": "@EdChum that&#39;s true according to the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html\" rel=\"nofollow noreferrer\">docs</a>, I wonder though why is it that the constructor doesn&#39;t allow that... wouldn&#39;t it be more efficient to create an empty dataframe with the types from the beginning for allocation purposes?"}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1510172922, "post_id": 36463086, "comment_id": 81327434, "body": "What the heck are you talking about? Of course Pandas supports integer columns."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1510175425, "post_id": 36463086, "comment_id": 81328827, "body": "There does seem to be a problem with passing <code>dtype=int</code> with no data, though."}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1516588725, "post_id": 36463086, "comment_id": 83735133, "body": "This absolutely looks like a bug - is still the behavior in the latest release. Did you submit it?"}, {"owner": {"reputation": 439, "user_id": 5208670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e0eda29901be1adeb8a50845ecd4d?s=128&d=identicon&r=PG", "display_name": "Victor Uriarte", "link": "https://stackoverflow.com/users/5208670/victor-uriarte"}, "edited": false, "score": 0, "creation_date": 1517607234, "post_id": 36463086, "comment_id": 84179632, "body": "Its expected behavior, its listed on the caveats. Its due to there being no <code>nan</code> for <code>int</code>. You can read more about it on the <a href=\"https://pandas.pydata.org/pandas-docs/stable/gotchas.html#support-for-integer-na\" rel=\"nofollow noreferrer\">docs</a>"}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "reply_to_user": {"reputation": 439, "user_id": 5208670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e0eda29901be1adeb8a50845ecd4d?s=128&d=identicon&r=PG", "display_name": "Victor Uriarte", "link": "https://stackoverflow.com/users/5208670/victor-uriarte"}, "edited": false, "score": 1, "creation_date": 1518803657, "post_id": 36463086, "comment_id": 84668889, "body": "@VictorUriarte That doesn&#39;t explain why no int columns can be specified in the constructor. If you ask for a int column and later insert a nan, the right behaviour would be to promote the column to float, or raise an exception"}], "tags": [], "owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "is_accepted": false, "score": 2, "last_activity_date": 1459979873, "creation_date": 1459979873, "answer_id": 36463086, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/36463086#36463086", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>pandas doesn't offer pure integer column. You can either use float column and convert that column to integer as needed or treat it like an object. What you are trying to implement is not the way pandas is supposed to be used. But if you REALLY REALLY want that, you can get around the TypeError message by doing this.</p>\n\n<pre><code>df1 =  pd.DataFrame(index=['pbp'], columns=['str1','str2','str2'], dtype=str)\ndf2 =  pd.DataFrame(index=['pbp'], columns=['int1','int2'], dtype=int)\ndf3 =  pd.DataFrame(index=['pbp'], columns=['flt1','flt2'], dtype=float)\ndf = pd.concat([df1, df2, df3], axis=1)\n\n    str1 str2 str2 int1 int2  flt1  flt2\npbp  NaN  NaN  NaN  NaN  NaN   NaN   NaN\n</code></pre>\n\n<p>You can rearrange the col order as you like. But again, this is not the way pandas was supposed to be used.</p>\n\n<pre><code> df.dtypes\nstr1     object\nstr2     object\nstr2     object\nint1     object\nint2     object\nflt1    float64\nflt2    float64\ndtype: object\n</code></pre>\n\n<p>Note that int is treated as object.</p>\n"}, {"comments": [{"owner": {"reputation": 823, "user_id": 1332281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/viAke.jpg?s=128&g=1", "display_name": "Mike Jarvis", "link": "https://stackoverflow.com/users/1332281/mike-jarvis"}, "edited": false, "score": 1, "creation_date": 1520205209, "post_id": 36463264, "comment_id": 85208236, "body": "This is really the right answer.  Even fixing the TypeError, it&#39;s still not something that pandas bothered to implement.  You can&#39;t even copy a dtype from an existing compound-dtype DataFrame to start off a new empty DataFrame, which really seems like a valid use case."}, {"owner": {"reputation": 1705, "user_id": 2359802, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/2ceb6d955c1c7b08e13559750dbb2026?s=128&d=identicon&r=PG", "display_name": "Corey", "link": "https://stackoverflow.com/users/2359802/corey"}, "reply_to_user": {"reputation": 823, "user_id": 1332281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/viAke.jpg?s=128&g=1", "display_name": "Mike Jarvis", "link": "https://stackoverflow.com/users/1332281/mike-jarvis"}, "edited": false, "score": 1, "creation_date": 1527035117, "post_id": 36463264, "comment_id": 87969937, "body": "@MikeJarvis if you want to copy the dtypes of an existing frame, you can select 0 rows from that frame and have your empty DF with the same dtypes. For example <code>cpy = df.loc[[False]*len(df)]</code> should do the trick"}, {"owner": {"reputation": 417, "user_id": 2367401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17db559f7dc4475f34cabe7bf3552609?s=128&d=identicon&r=PG", "display_name": "Kyle Pena", "link": "https://stackoverflow.com/users/2367401/kyle-pena"}, "edited": false, "score": 2, "creation_date": 1568987360, "post_id": 36463264, "comment_id": 102461732, "body": "I don&#39;t know what it means for it to be the &quot;right answer&quot; if it doesn&#39;t work.  I think you&#39;re saying something like: &quot;I wish this worked&quot;."}], "tags": [], "owner": {"reputation": 4446, "user_id": 5717589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebac146fb4581d2fdf6e788faf2fea15?s=128&d=identicon&r=PG&f=1", "display_name": "ptrj", "link": "https://stackoverflow.com/users/5717589/ptrj"}, "is_accepted": false, "score": 12, "last_activity_date": 1544182927, "last_edit_date": 1544182927, "creation_date": 1459980778, "answer_id": 36463264, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/36463264#36463264", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>Just a remark.</p>\n\n<p>You can get around the Type Error using <code>np.dtype</code>:</p>\n\n<pre><code>pd.DataFrame(index = ['pbp'], columns = ['a','b'], dtype = np.dtype([('str','float')]))\n</code></pre>\n\n<p>but you get instead:</p>\n\n<pre><code>NotImplementedError: compound dtypes are not implementedin the DataFrame constructor\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3230, "user_id": 1940479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f80fec258f54f77453fe08f6da2954?s=128&d=identicon&r=PG", "display_name": "JaminSore", "link": "https://stackoverflow.com/users/1940479/jaminsore"}, "is_accepted": false, "score": 5, "last_activity_date": 1488824829, "last_edit_date": 1488824829, "creation_date": 1488820200, "answer_id": 42631521, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/42631521#42631521", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>I found this question after running into the same issue. I prefer the following solution (Python 3) for creating an empty DataFrame with <em>no index</em>.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\ndef make_empty_typed_df(dtype):\n    tdict = np.typeDict\n    types = tuple(tdict.get(t, t) for (_, t, *__) in dtype)\n    if any(t == np.void for t in types):\n        raise NotImplementedError('Not Implemented for columns of type \"void\"')\n    return pd.DataFrame.from_records(np.array([tuple(t() for t in types)], dtype=dtype)).iloc[:0, :]\n</code></pre>\n\n<p>Testing this out ...</p>\n\n<pre><code>from itertools import chain\n\ndtype = [('col%d' % i, t) for i, t in enumerate(chain(np.typeDict, set(np.typeDict.values())))]\ndtype = [(c, t) for (c, t) in dtype if (np.typeDict.get(t, t) != np.void) and not isinstance(t, int)]\n\nprint(make_empty_typed_df(dtype))\n</code></pre>\n\n<p><strong>Out:</strong></p>\n\n<pre><code>Empty DataFrame\n\nColumns: [col0, col6, col16, col23, col24, col25, col26, col27, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38, col39, col40, col41, col42, col43, col44, col45, col46, col47, col48, col49, col50, col51, col52, col53, col54, col55, col56, col57, col58, col60, col61, col62, col63, col64, col65, col66, col67, col68, col69, col70, col71, col72, col73, col74, col75, col76, col77, col78, col79, col80, col81, col82, col83, col84, col85, col86, col87, col88, col89, col90, col91, col92, col93, col95, col96, col97, col98, col99, col100, col101, col102, col103, col104, col105, col106, col107, col108, col109, col110, col111, col112, col113, col114, col115, col117, col119, col120, col121, col122, col123, col124, ...]\nIndex: []\n\n[0 rows x 146 columns]\n</code></pre>\n\n<p>And the datatypes ...</p>\n\n<pre><code>print(make_empty_typed_df(dtype).dtypes)\n</code></pre>\n\n<p><strong>Out:</strong></p>\n\n<pre><code>col0      timedelta64[ns]\ncol6               uint16\ncol16              uint64\ncol23                int8\ncol24     timedelta64[ns]\ncol25                bool\ncol26           complex64\ncol27               int64\ncol29             float64\ncol30                int8\ncol31             float16\ncol32              uint64\ncol33               uint8\ncol34              object\ncol35          complex128\ncol36               int64\ncol37               int16\ncol38               int32\ncol39               int32\ncol40             float16\ncol41              object\ncol42              uint64\ncol43              object\ncol44               int16\ncol45              object\ncol46               int64\ncol47               int16\ncol48              uint32\ncol49              object\ncol50              uint64\n               ...       \ncol144              int32\ncol145               bool\ncol146            float64\ncol147     datetime64[ns]\ncol148             object\ncol149             object\ncol150         complex128\ncol151    timedelta64[ns]\ncol152              int32\ncol153              uint8\ncol154            float64\ncol156              int64\ncol157             uint32\ncol158             object\ncol159               int8\ncol160              int32\ncol161             uint64\ncol162              int16\ncol163             uint32\ncol164             object\ncol165     datetime64[ns]\ncol166            float32\ncol167               bool\ncol168            float64\ncol169         complex128\ncol170            float16\ncol171             object\ncol172             uint16\ncol173          complex64\ncol174         complex128\ndtype: object\n</code></pre>\n\n<p>Adding an index gets tricky because there isn't a true missing value for most data types so they end up getting cast to some other type with a native missing value (e.g., <code>int</code>s are cast to <code>float</code>s or <code>object</code>s), but if you have complete data of the types you've specified, then you can always insert rows as needed, and your types will be respected. This can be accomplished with:</p>\n\n<pre><code>df.loc[index, :] = new_row\n</code></pre>\n\n<p>Again, as @Hun pointed out, this NOT how Pandas is intended to be used.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1510173443, "post_id": 45383353, "comment_id": 81327713, "body": "No need to put a bunch of dummy data in the columns when you could use empty arrays."}], "tags": [], "owner": {"reputation": 334, "user_id": 5627846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e17f23bcd2a60a78d1ec23250bc7ad34?s=128&d=identicon&r=PG&f=1", "display_name": "Eric G.", "link": "https://stackoverflow.com/users/5627846/eric-g"}, "is_accepted": false, "score": 2, "last_activity_date": 1501281690, "creation_date": 1501281690, "answer_id": 45383353, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/45383353#45383353", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>You can do this by passing a dictionary into the DataFrame constructor: </p>\n\n<pre><code>df = pd.DataFrame(index=['pbp'],\n                  data={'contract' : np.full(1, \"\", dtype=str),\n                        'starting_membership' : np.full(1, np.nan, dtype=float),\n                        'projected_membership' : np.full(1, np.nan, dtype=int)\n                       }\n                 )\n</code></pre>\n\n<p>This will <em>correctly</em> give you a dataframe that looks like: </p>\n\n<pre><code>     contract  projected_membership   starting_membership\npbp     \"\"             NaN           -9223372036854775808\n</code></pre>\n\n<p>With dtypes:</p>\n\n<pre><code>contract                 object\nprojected_membership    float64\nstarting_membership       int64\n</code></pre>\n\n<p>That said, there are two things to note:</p>\n\n<p>1) <code>str</code> isn't actually a type that a DataFrame column can handle; instead it falls back to the general case <code>object</code>. It'll still work properly.</p>\n\n<p>2) Why don't you see <code>NaN</code> under <code>starting_membership</code>? Well, <code>NaN</code> is only defined for floats; there is no \"None\" value for integers, so it casts <code>np.NaN</code> to an integer. If you want a different default value, you can change that in the <code>np.full</code> call.</p>\n"}, {"tags": [], "owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "is_accepted": false, "score": 23, "last_activity_date": 1536254227, "last_edit_date": 1536254227, "creation_date": 1516589115, "answer_id": 48374031, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/48374031#48374031", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>This really smells like a bug.</p>\n\n<p>Here's another (simpler) solution.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndef df_empty(columns, dtypes, index=None):\n    assert len(columns)==len(dtypes)\n    df = pd.DataFrame(index=index)\n    for c,d in zip(columns, dtypes):\n        df[c] = pd.Series(dtype=d)\n    return df\n\ndf = df_empty(['a', 'b'], dtypes=[np.int64, np.int64])\nprint(list(df.dtypes)) # int64, int64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1465, "user_id": 1245471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59ac87c816513b66bcf3b72e87ad1e54?s=128&d=identicon&r=PG", "display_name": "Anatoly Scherbakov", "link": "https://stackoverflow.com/users/1245471/anatoly-scherbakov"}, "edited": false, "score": 1, "creation_date": 1533568547, "post_id": 51255372, "comment_id": 90382832, "body": "I do not think that works because Pandas throws an error saying that <code>dict is unhashable type</code> (which is understandable). And, there is no mention of this format in documentation."}, {"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "reply_to_user": {"reputation": 1465, "user_id": 1245471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59ac87c816513b66bcf3b72e87ad1e54?s=128&d=identicon&r=PG", "display_name": "Anatoly Scherbakov", "link": "https://stackoverflow.com/users/1245471/anatoly-scherbakov"}, "edited": false, "score": 0, "creation_date": 1533582115, "post_id": 51255372, "comment_id": 90389558, "body": "I&#39;m actively using this in my code and it works great. I&#39;m using pandas 0.22.0, how about you?"}, {"owner": {"reputation": 78, "user_id": 2832987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f18948d766f26dba6a08afaf690bd398?s=128&d=identicon&r=PG&f=1", "display_name": "teemoleen", "link": "https://stackoverflow.com/users/2832987/teemoleen"}, "reply_to_user": {"reputation": 1465, "user_id": 1245471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59ac87c816513b66bcf3b72e87ad1e54?s=128&d=identicon&r=PG", "display_name": "Anatoly Scherbakov", "link": "https://stackoverflow.com/users/1245471/anatoly-scherbakov"}, "edited": false, "score": 0, "creation_date": 1576856883, "post_id": 51255372, "comment_id": 105041888, "body": "I also get the same problem as @AnatolyScherbakov.  I&#39;m using 0.23.0 . This seems like the most direct way if would work."}, {"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "edited": false, "score": 1, "creation_date": 1576869075, "post_id": 51255372, "comment_id": 105046350, "body": "I&#39;ve updated the above code to work with the most recent version of python and pandas. Hope it helps."}], "tags": [], "owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "is_accepted": false, "score": 17, "last_activity_date": 1606226994, "last_edit_date": 1606226994, "creation_date": 1531179526, "answer_id": 51255372, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/51255372#51255372", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>This is an old question, but I don't see a solid answer (although @eric_g was super close).</p>\n<p>You just need to create an empty dataframe with a dictionary of key:value pairs. The key being your column name, and the value being an empty data type.</p>\n<p>So in your example dataset, it would look as follows (pandas 0.25 and python 3.7):</p>\n<pre><code>variables = {'contract':'',\n             'state_and_county_code':'',\n             'state':'',\n             'county':'',\n             'starting_membership':int(),\n             'starting_raw_raf':float(),\n             'enrollment_trend':float(),\n             'projected_membership':int(),\n             'projected_raf':float()}\n\ndf = pd.DataFrame(variables, index=[])\n</code></pre>\n<p>In old pandas versions, one may have to do:</p>\n<pre><code>df = pd.DataFrame(columns=[variables])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13247, "user_id": 943773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/66a7a506ddac2514578a371a66c8d781?s=128&d=identicon&r=PG", "display_name": "ryanjdillon", "link": "https://stackoverflow.com/users/943773/ryanjdillon"}, "is_accepted": false, "score": 25, "last_activity_date": 1545123119, "last_edit_date": 1545123119, "creation_date": 1545121679, "answer_id": 53828986, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/53828986#53828986", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>You can do it like this</p>\n\n<pre><code>import numpy\nimport pandas\n\ndtypes = numpy.dtype([\n          ('a', str),\n          ('b', int),\n          ('c', float),\n          ('d', numpy.datetime64),\n          ])\ndata = numpy.empty(0, dtype=dtypes)\ndf = pandas.DataFrame(data)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": false, "score": 2, "last_activity_date": 1553792481, "creation_date": 1553792481, "answer_id": 55403181, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/55403181#55403181", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>I found the easiest workaround for me was to simply concatenate a list of empty series for each individual column:</p>\n\n<pre><code>import pandas as pd\n\ncolumns = ['contract',\n           'state_and_county_code',\n           'state',\n           'county',\n           'starting_membership',\n           'starting_raw_raf',\n           'enrollment_trend',\n           'projected_membership',\n           'projected_raf']\ndtype = ['str', 'str', 'str', 'str', 'int', 'float', 'float', 'int', 'float']\ndf = pd.concat([pd.Series(name=col, dtype=dt) for col, dt in zip(columns, dtype)], axis=1)\ndf.info()\n# &lt;class 'pandas.core.frame.DataFrame'&gt;\n# Index: 0 entries\n# Data columns (total 9 columns):\n# contract                 0 non-null object\n# state_and_county_code    0 non-null object\n# state                    0 non-null object\n# county                   0 non-null object\n# starting_membership      0 non-null int32\n# starting_raw_raf         0 non-null float64\n# enrollment_trend         0 non-null float64\n# projected_membership     0 non-null int32\n# projected_raf            0 non-null float64\n# dtypes: float64(3), int32(2), object(4)\n# memory usage: 0.0+ bytes\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 9927501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y6CAFowR8n4/AAAAAAAAAAI/AAAAAAAAABI/rDMWooec8iY/photo.jpg?sz=128", "display_name": "Simon Ejsing", "link": "https://stackoverflow.com/users/9927501/simon-ejsing"}, "edited": false, "score": 3, "creation_date": 1594314506, "post_id": 55488620, "comment_id": 111090143, "body": "I came to the same solution. You can define a schema for your data frame using a dict: <code>schema = { &#39;name&#39;: str, &#39;number&#39;: float, &#39;date&#39;: np.datetime64}   df = pd.DataFrame(columns=schema.keys()).astype(schema)</code>"}, {"owner": {"reputation": 51, "user_id": 5473613, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dlUCEcaEhgw/AAAAAAAAAAI/AAAAAAAAACQ/vxGAp77ozHI/photo.jpg?sz=128", "display_name": "Korhan", "link": "https://stackoverflow.com/users/5473613/korhan"}, "reply_to_user": {"reputation": 61, "user_id": 9927501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y6CAFowR8n4/AAAAAAAAAAI/AAAAAAAAABI/rDMWooec8iY/photo.jpg?sz=128", "display_name": "Simon Ejsing", "link": "https://stackoverflow.com/users/9927501/simon-ejsing"}, "edited": false, "score": 0, "creation_date": 1594315055, "post_id": 55488620, "comment_id": 111090406, "body": "@SimonEjsing yours is a more elegant solution, thanks for sharing"}], "tags": [], "owner": {"reputation": 51, "user_id": 5473613, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dlUCEcaEhgw/AAAAAAAAAAI/AAAAAAAAACQ/vxGAp77ozHI/photo.jpg?sz=128", "display_name": "Korhan", "link": "https://stackoverflow.com/users/5473613/korhan"}, "is_accepted": false, "score": 4, "last_activity_date": 1554273646, "creation_date": 1554273646, "answer_id": 55488620, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/55488620#55488620", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>My solution (without setting an index) is to initialize a dataframe with column names and specify data types using <code>astype()</code> method. </p>\n\n<pre><code>df = pd.DataFrame(columns=['contract',\n                     'state_and_county_code',\n                     'state',\n                     'county',\n                     'starting_membership',\n                     'starting_raw_raf',\n                     'enrollment_trend',\n                     'projected_membership',\n                     'projected_raf'])\ndf = df.astype( dtype={'contract' : str, \n                 'state_and_county_code': str,\n                 'state': str,\n                 'county': str,\n                 'starting_membership': int,\n                 'starting_raw_raf': float,\n                 'enrollment_trend': float,\n                 'projected_membership': int,\n                 'projected_raf': float})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 323, "user_id": 5811400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKznX.jpg?s=128&g=1", "display_name": "ruancomelli", "link": "https://stackoverflow.com/users/5811400/ruancomelli"}, "edited": false, "score": 0, "creation_date": 1585583149, "post_id": 59085030, "comment_id": 107804802, "body": "This answer also applies to non-empty dataframes, which is what I was looking for: <code>df = pd.DataFrame({&#39;x&#39;: [1, 2, 4], &#39;y&#39;: pd.Series([&#39;odd&#39;, &#39;even&#39;, &#39;even&#39;], dtype=&#39;category&#39;)})</code>"}, {"owner": {"reputation": 377, "user_id": 10396491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40XaG.png?s=128&g=1", "display_name": "Artur", "link": "https://stackoverflow.com/users/10396491/artur"}, "edited": false, "score": 0, "creation_date": 1599578853, "post_id": 59085030, "comment_id": 112813767, "body": "Kinda a lot to type but does exactly what I&#39;ve been meaning to do. Thanks!"}], "tags": [], "owner": {"reputation": 463, "user_id": 10319531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0919725e3b07c9a57b8d81c7698a6008?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/10319531/alberto"}, "is_accepted": false, "score": 41, "last_activity_date": 1574931581, "creation_date": 1574931581, "answer_id": 59085030, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/59085030#59085030", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>You can use the following:</p>\n\n<pre><code>df = pd.DataFrame({'a': pd.Series([], dtype='int'),\n                   'b': pd.Series([], dtype='str'),\n                   'c': pd.Series([], dtype='float')})\n</code></pre>\n\n<p>then if you call df you have</p>\n\n<pre><code>&gt;&gt;&gt; df \nEmpty DataFrame \nColumns: [a, b, c]\nIndex: []\n</code></pre>\n\n<p>and if you check its types</p>\n\n<pre><code>&gt;&gt;&gt; df.dtypes\na      int32\nb     object\nc    float64\ndtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 80615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4776f16a7f74ea7696af52ff00ec48e?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/80615/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1597043605, "last_edit_date": 1597043605, "creation_date": 1596971661, "answer_id": 63325604, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/63325604#63325604", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>Create Empty Dataframe in Pandas specifying column types</p>\n<p>I think this is perfect!!</p>\n<pre><code>import pandas as pd\n\nc1 = pd.Series(data=None, dtype='string', name='c1')\nc2 = pd.Series(data=None, dtype='bool', name='c2')\nc3 = pd.Series(data=None, dtype='float', name='c3')\nc4 = pd.Series(data=None, dtype='int', name='c4')\n\ndf = pd.concat([c1, c2, c3, c4], axis=1)\n\ndf.info('verbose')\n</code></pre>\n<p>We create columns as Series and give them the correct dtype, then we concat de Series into a DataFrame, and that's it</p>\n<p>We have the DataFrame constructor with dtypes!</p>\n<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;\nIndex: 0 entries\nData columns (total 4 columns):\n #   Column  Non-Null Count  Dtype  \n---  ------  --------------  -----  \n 0   c1      0 non-null      string \n 1   c2      0 non-null      bool   \n 2   c3      0 non-null      float64\n 3   c4      0 non-null      int32  \ndtypes: bool(1), float64(1), int32(1), string(1)\nmemory usage: 0.0+ bytes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 8365731, "user_type": "registered", "profile_image": "https://graph.facebook.com/818167921692443/picture?type=large", "display_name": "Jacek B\u0142ocki", "link": "https://stackoverflow.com/users/8365731/jacek-b%c5%82ocki"}, "is_accepted": false, "score": 1, "last_activity_date": 1609246254, "creation_date": 1609246254, "answer_id": 65492423, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types/65492423#65492423", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>Taking lists columns and dtype from your examle you can do the following:</p>\n<pre><code>cdt={i[0]: i[1] for i in zip(columns, dtype)}    # make column type dict\npdf=pd.DataFrame(columns=list(cdt))    # create empty dataframe\npdf=pdf.astype(cdt)                    # set desired column types\n</code></pre>\n<p>DataFrame doc says only a single dtype is allowed in constructor call.</p>\n"}], "owner": {"reputation": 5340, "user_id": 3507127, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1a19e510094ee1cb606319eb481e00c8?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/3507127/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86770, "favorite_count": 11, "answer_count": 12, "score": 80, "last_activity_date": 1609246254, "creation_date": 1459976440, "question_id": 36462257, "link": "https://stackoverflow.com/questions/36462257/create-empty-dataframe-in-pandas-specifying-column-types", "title": "Create Empty Dataframe in Pandas specifying column types", "body": "<p>I'm trying to create an empty data frame with an index and specify the column types. The way I am doing it is the following:</p>\n\n<pre><code>df = pd.DataFrame(index=['pbp'],columns=['contract',\n                                         'state_and_county_code',\n                                         'state',\n                                         'county',\n                                         'starting_membership',\n                                         'starting_raw_raf',\n                                         'enrollment_trend',\n                                         'projected_membership',\n                                         'projected_raf'],\n                                dtype=['str', 'str', 'str', 'str', 'int', 'float', 'float', 'int', 'float'])\n</code></pre>\n\n<p>However, I get the following error,</p>\n\n<pre><code>TypeError: data type not understood\n</code></pre>\n\n<p>What does this mean?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 1, "last_activity_date": 1459978348, "creation_date": 1459978348, "answer_id": 36462756, "question_id": 36462229, "link": "https://stackoverflow.com/questions/36462229/tensorflow-how-do-i-release-a-model-without-source-code/36462756#36462756", "title": "TensorFlow: How do I release a model without source code?", "body": "<p>The <a href=\"https://tensorflow.github.io/serving/\" rel=\"nofollow\">TensorFlow Serving</a> project is intended to make this use case straightforward (assuming that the end user is only using the model for inference, not training). TensorFlow Serving includes an <code>Exporter</code> class that takes your <code>tf.train.Saver</code>, the <code>tf.GraphDef</code> that defines your overall model, and a \"signature\" that describes the inputs to and output from your model.</p>\n\n<p>The <a href=\"https://tensorflow.github.io/serving/serving_basic\" rel=\"nofollow\">basics tutorial</a> has a good introduction to exporting your model.</p>\n"}, {"comments": [{"owner": {"reputation": 252, "user_id": 2689084, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1143557983/picture?type=large", "display_name": "Nicolai Anton Lynnerup", "link": "https://stackoverflow.com/users/2689084/nicolai-anton-lynnerup"}, "edited": false, "score": 0, "creation_date": 1488872581, "post_id": 38921538, "comment_id": 72412665, "body": "With your implementation, do you retrieve the correct weights from the trained model? I can only see that you get the input and output layers (<a href=\"https://github.com/falcondai/cifar10/blob/master/eval.py#L43\" rel=\"nofollow noreferrer\">github.com/falcondai/cifar10/blob/master/eval.py#L43</a> + <a href=\"https://github.com/falcondai/cifar10/blob/master/eval.py#L45\" rel=\"nofollow noreferrer\">github.com/falcondai/cifar10/blob/master/eval.py#L45</a>)"}, {"owner": {"reputation": 1229, "user_id": 1121123, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1da0791d967260e5f9d7ff002c01a356?s=128&d=identicon&r=PG", "display_name": "Falcon", "link": "https://stackoverflow.com/users/1121123/falcon"}, "reply_to_user": {"reputation": 252, "user_id": 2689084, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1143557983/picture?type=large", "display_name": "Nicolai Anton Lynnerup", "link": "https://stackoverflow.com/users/2689084/nicolai-anton-lynnerup"}, "edited": false, "score": 0, "creation_date": 1488891513, "post_id": 38921538, "comment_id": 72423965, "body": "@NicolaiAntonLynnerup yes, the saver takes care of loading the binary out of the checkpoint file for each variable. The lines you referred to retrieve the necessary input and output variables (rather than layers), so we can execute the graph in evaluation: think of them as the function signature, a visual classifier maps image -&gt; class logits. To put it in another way, without these variables (placeholders are variables too), we cannot construct this call: <a href=\"https://github.com/falcondai/cifar10/blob/master/eval.py#L67\" rel=\"nofollow noreferrer\">github.com/falcondai/cifar10/blob/master/eval.py#L67</a>"}], "tags": [], "owner": {"reputation": 1229, "user_id": 1121123, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1da0791d967260e5f9d7ff002c01a356?s=128&d=identicon&r=PG", "display_name": "Falcon", "link": "https://stackoverflow.com/users/1121123/falcon"}, "is_accepted": false, "score": 1, "last_activity_date": 1471476361, "last_edit_date": 1471476361, "creation_date": 1471015743, "answer_id": 38921538, "question_id": 36462229, "link": "https://stackoverflow.com/questions/36462229/tensorflow-how-do-i-release-a-model-without-source-code/38921538#38921538", "title": "TensorFlow: How do I release a model without source code?", "body": "<p>You can build a <code>Saver</code> from the MetaGraphDef (saved with checkpoints by default: those .meta files). and then use that Saver to restore your model. So users don't have to re-define your graph in their code. But then they still need to figure out the model signature (input, output variables). I solve this using <code>tf.Collection</code> (but i am interested to find better ways to do it as well). </p>\n\n<p>You can take a look at my example implementation (the <code>eval.py</code> evaluate a model without re-defining a model):</p>\n\n<ul>\n<li>reconstruct saver from meta graph <a href=\"https://github.com/falcondai/cifar10/blob/master/eval.py#L18\" rel=\"nofollow\">https://github.com/falcondai/cifar10/blob/master/eval.py#L18</a></li>\n<li>get input variables from collections <a href=\"https://github.com/falcondai/cifar10/blob/master/eval.py#L58\" rel=\"nofollow\">https://github.com/falcondai/cifar10/blob/master/eval.py#L58</a></li>\n<li>how to define your model <a href=\"https://github.com/falcondai/cifar10/blob/master/models/cp2f3d.py\" rel=\"nofollow\">https://github.com/falcondai/cifar10/blob/master/models/cp2f3d.py</a></li>\n</ul>\n"}], "owner": {"reputation": 1878, "user_id": 3251207, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fFPz4.png?s=128&g=1", "display_name": "YW P Kwon", "link": "https://stackoverflow.com/users/3251207/yw-p-kwon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1286, "favorite_count": 0, "accepted_answer_id": 36462756, "answer_count": 2, "score": 2, "last_activity_date": 1471476361, "creation_date": 1459976350, "last_edit_date": 1459978396, "question_id": 36462229, "link": "https://stackoverflow.com/questions/36462229/tensorflow-how-do-i-release-a-model-without-source-code", "title": "TensorFlow: How do I release a model without source code?", "body": "<p>I am using Tensorflow + Python.</p>\n\n<p>I am curious if I can release a saved Tensorflow model (architecture + trained variables) without detailed source code. I'm aware of <code>tf.train.Saver()</code>, but it looks to save only variables, and in order to restore/run them, a user needs to \"define\" the same architecture. </p>\n\n<p>For the testing/running purpose only, is there a way to release a saved {architecture+trained variables} without source code, so that a user can just cast a query and get a result?</p>\n"}, {"tags": ["python", "django", "django-admin"], "comments": [{"owner": {"reputation": 246, "user_id": 5770721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6faf141fbf2ced25b6a410d64d9ff15?s=128&d=identicon&r=PG", "display_name": "Anderson Lima", "link": "https://stackoverflow.com/users/5770721/anderson-lima"}, "edited": false, "score": 0, "creation_date": 1459986007, "post_id": 36462144, "comment_id": 60540065, "body": "You can not override the field? Like: is_superuser = models.BooleanField(&#39;your verbose here&#39;, default=False,         help_text=&#39;your help text here&#39;)?"}, {"owner": {"reputation": 226, "user_id": 5033855, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3HQpw.jpg?s=128&g=1", "display_name": "Flowneee", "link": "https://stackoverflow.com/users/5033855/flowneee"}, "reply_to_user": {"reputation": 246, "user_id": 5770721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6faf141fbf2ced25b6a410d64d9ff15?s=128&d=identicon&r=PG", "display_name": "Anderson Lima", "link": "https://stackoverflow.com/users/5770721/anderson-lima"}, "edited": false, "score": 0, "creation_date": 1459986657, "post_id": 36462144, "comment_id": 60540233, "body": "@AndersonLima Nope, <code>manage.py makemigrations</code> gives error <code>django.core.exceptions.FieldError: Local field &#39;is_superuser&#39; in class &#39;User&#39; clashes with field of similar name from base class &#39;PermissionsMixin&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 246, "user_id": 5770721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6faf141fbf2ced25b6a410d64d9ff15?s=128&d=identicon&r=PG", "display_name": "Anderson Lima", "link": "https://stackoverflow.com/users/5770721/anderson-lima"}, "is_accepted": true, "score": 2, "last_activity_date": 1459989420, "creation_date": 1459989420, "answer_id": 36464717, "question_id": 36462144, "link": "https://stackoverflow.com/questions/36462144/change-verbose-name-for-is-superuser-django/36464717#36464717", "title": "Change verbose_name for is_superuser Django", "body": "<p>You can inherit UserChangeForm, then, override superuser verbose and help_text, like this:</p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>from django.contrib.auth.forms import UserChangeForm\nclass MyUserChangeForm(UserChangeForm):\n    is_superuser = forms.BooleanField(label='My Verbose', help_text='My Help Text', initial=False, required=False)\n</code></pre>\n\n<p><strong>admin.py</strong></p>\n\n<pre><code>class CustomUserAdmin(UserAdmin):\n    form = MyUserChangeForm\n</code></pre>\n"}], "owner": {"reputation": 226, "user_id": 5033855, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3HQpw.jpg?s=128&g=1", "display_name": "Flowneee", "link": "https://stackoverflow.com/users/5033855/flowneee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 0, "accepted_answer_id": 36464717, "answer_count": 1, "score": 1, "last_activity_date": 1459989420, "creation_date": 1459976102, "question_id": 36462144, "link": "https://stackoverflow.com/questions/36462144/change-verbose-name-for-is-superuser-django", "title": "Change verbose_name for is_superuser Django", "body": "<p>I have a custom User model</p>\n\n<pre><code>class User(AbstractBaseUser, PermissionsMixin):\n    ...\n</code></pre>\n\n<p>Field <code>is_superuser</code> inherited from <code>PermissionsMixin</code>. Is there a possibility to change <code>verbose_name</code> and <code>help_text</code> for <code>is_superuser</code> to my own text without changing Django sources?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1459977206, "post_id": 36462100, "comment_id": 60536835, "body": "Creating a list of the values is problematic due to pandas wanting to convert this to a Series and align on index, could you try <code>df[&#39;list_of_b&#39;] = df[&#39;a&#39;].map(df.groupby(&#39;a&#39;)[&#39;b&#39;].apply(list))</code> for speed"}], "answers": [{"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 0, "last_activity_date": 1459977315, "creation_date": 1459977315, "answer_id": 36462492, "question_id": 36462100, "link": "https://stackoverflow.com/questions/36462100/creating-new-column-in-pandas-dataframe-with-a-list-of-values-from-another-colum/36462492#36462492", "title": "Creating new column in pandas dataframe with a list of values from another column without using &quot;groupby&quot;", "body": "<p>On a 4K row df I get the following:</p>\n\n<pre><code>In [29]:\ndf_group = df.groupby('a')\n\u200b\n%timeit df.apply(lambda row: df_group.get_group(row['a'])['b'].tolist(), axis=1)\n%timeit df['a'].map(df.groupby('a')['b'].apply(list))\n\n1 loops, best of 3: 4.37 s per loop\n100 loops, best of 3: 4.21 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1511, "user_id": 4816250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yttpQ.jpg?s=128&g=1", "display_name": "jvd10", "link": "https://stackoverflow.com/users/4816250/jvd10"}, "is_accepted": false, "score": 0, "last_activity_date": 1460052719, "last_edit_date": 1460052719, "creation_date": 1460052344, "answer_id": 36483961, "question_id": 36462100, "link": "https://stackoverflow.com/questions/36462100/creating-new-column-in-pandas-dataframe-with-a-list-of-values-from-another-colum/36483961#36483961", "title": "Creating new column in pandas dataframe with a list of values from another column without using &quot;groupby&quot;", "body": "<p>Just doing the grouping and then joining back to the original dataframe seems to be quite a bit faster:</p>\n\n<pre><code>def make_lists(df):\n    g = df.groupby('a')\n    def list_of_b(x):\n        return x.b.tolist()\n    return df.set_index('a').join(\n        pd.DataFrame(g.apply(list_of_b),\n                     columns=['list_of_b']),\n        rsuffix='_').reset_index()\n</code></pre>\n\n<p>This gives me <strong>192ms</strong> per loop with <strong>1M</strong> rows generated like this:</p>\n\n<pre><code>df1 = pd.DataFrame({'a':[1,2,2,4], 'b':[1,1,1,1]})\nlow = 1\nhigh = 10 \nsize = 1000000\ndf2 = pd.DataFrame({'a':np.random.randint(low,high,size),\n                    'b':np.random.randint(low,high,size)})\n\nmake_lists(df1)\nOut[155]:\n    a   b   list_of_b\n0   1   1   [1]\n1   2   1   [1, 1]\n2   2   1   [1, 1]\n3   4   1   [1]\nIn [156]:\n\n\n%%timeit\nmake_lists(df2)\n10 loops, best of 3: 192 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 2961394, "user_type": "registered", "profile_image": "https://graph.facebook.com/61001088/picture?type=large", "display_name": "A.R.Ferguson", "link": "https://stackoverflow.com/users/2961394/a-r-ferguson"}, "is_accepted": true, "score": 0, "last_activity_date": 1460059185, "creation_date": 1460059185, "answer_id": 36486047, "question_id": 36462100, "link": "https://stackoverflow.com/questions/36462100/creating-new-column-in-pandas-dataframe-with-a-list-of-values-from-another-colum/36486047#36486047", "title": "Creating new column in pandas dataframe with a list of values from another column without using &quot;groupby&quot;", "body": "<p>Shortest solution I can think of:</p>\n\n<pre><code>df = pd.DataFrame({'a':[1,2,2,4], 'b':[1,1,1,1]})\ndf.join(pd.Series(df.groupby(by='a').apply(lambda x: list(x.b)), name=\"list_of_b\"), on='a')\n\n   a  b    list_of_b\n0  1  1     [1]\n1  2  1  [1, 1]\n2  2  1  [1, 1]\n3  4  1     [1]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6168951, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156667026335005/picture?type=large", "display_name": "Scott Rothbarth", "link": "https://stackoverflow.com/users/6168951/scott-rothbarth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 36486047, "answer_count": 3, "score": 1, "last_activity_date": 1460059185, "creation_date": 1459975894, "last_edit_date": 1459976222, "question_id": 36462100, "link": "https://stackoverflow.com/questions/36462100/creating-new-column-in-pandas-dataframe-with-a-list-of-values-from-another-colum", "title": "Creating new column in pandas dataframe with a list of values from another column without using &quot;groupby&quot;", "body": "<p>I work with large datasets, making pandas group and groupby functions take a long time/use too much memory. I have heard some people say groupby can be slow, but am having trouble finding a better solution. </p>\n\n<p>If my dataframe has 2 columns similar to:</p>\n\n<pre><code>df = pd.DataFrame({'a':[1,2,2,4], 'b':[1,1,1,1]})\n\na     b     \n1     1     \n2     1     \n2     1      \n4     1     \n</code></pre>\n\n<p>I wish to return a list of values that match to a value in another column:</p>\n\n<pre><code>a     b     list_of_b\n1     1        [1]\n2     1        [1,1]\n2     1        [1,1]\n4     1        [1]\n</code></pre>\n\n<p>I currently use:</p>\n\n<pre><code>df_group = df.groupby('a')\ndf['list_of_b'] = df.apply(lambda row: df_group.get_group(row['a'])['b'].tolist(), axis=1)\n</code></pre>\n\n<p>The code above works for small stuff, but not on large dataframes ( df > 1,000,000 rows) Does anyone have a faster way to do this?</p>\n"}, {"tags": ["python", "python-2.7", "loops", "python-3.x", "while-loop"], "answers": [{"tags": [], "owner": {"reputation": 537, "user_id": 4378982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gIzI8.jpg?s=128&g=1", "display_name": "xdola", "link": "https://stackoverflow.com/users/4378982/xdola"}, "is_accepted": false, "score": 0, "last_activity_date": 1459976235, "creation_date": 1459976235, "answer_id": 36462191, "question_id": 36462059, "link": "https://stackoverflow.com/questions/36462059/the-print-of-while-loop-into-text-file/36462191#36462191", "title": "The print of while loop into text file", "body": "<p>First in Python 2.7 print is used without the bracket:</p>\n\n<pre><code>&gt;&gt;&gt; print \"hello world\"\nhello world\n</code></pre>\n\n<p>Then you should open the file outside the <code>while</code> loop.</p>\n\n<pre><code>out_file = open(\"test.txt\", \"w\")\ni = 0\nwhile n &lt; 9:\n   # do something here  \n\nout_file.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 3470136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1464f539404ceb3401efbd17f28ab31?s=128&d=identicon&r=PG", "display_name": "jesseops", "link": "https://stackoverflow.com/users/3470136/jesseops"}, "is_accepted": false, "score": 0, "last_activity_date": 1459976320, "creation_date": 1459976320, "answer_id": 36462220, "question_id": 36462059, "link": "https://stackoverflow.com/questions/36462059/the-print-of-while-loop-into-text-file/36462220#36462220", "title": "The print of while loop into text file", "body": "<p>Your issue is in redefining n. You start with n as an integer (<code>n = 0</code>), then turned it into a string (<code>n = str(n)</code>).</p>\n\n<p>Try this:</p>\n\n<pre><code>pwd = raw_input(\"Enter a word: \")\nn = 0\nprint(\"{} {}\".format(pwd, n))\nwith open(\"test.txt\", \"w\") as out:\n    while n &lt; 9:\n        out.write(\"{} {}\\n\".format(pwd, n))\n        n += 1\n</code></pre>\n\n<p>That should give you the output you expect, because you never redefine n.\nIf you want to be both python 2 and 3 compliant, add <code>from __future__ import print_statement</code> to the top of the script, which will allow your print() call to work properly.</p>\n"}, {"tags": [], "owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "is_accepted": false, "score": 0, "last_activity_date": 1459976471, "creation_date": 1459976471, "answer_id": 36462264, "question_id": 36462059, "link": "https://stackoverflow.com/questions/36462059/the-print-of-while-loop-into-text-file/36462264#36462264", "title": "The print of while loop into text file", "body": "<p>You have a few errors:</p>\n\n<ol>\n<li>You try to += 1 on a <code>str</code> object. That's a no-no.</li>\n<li>You open a file several times without closing it.</li>\n</ol>\n\n<p>Try taking advantage of the context manager that <code>open</code> uses with a while loop inside. Something like this:</p>\n\n<pre><code>pwd = raw_input(\"Enter a word: \")\nwith open(\"tesxt.txt\", \"w\") as fout:\n    n = 0\n    while n &lt;= 9:  # this will print 0-9. without the =, it will print 0-8\n        data = \"{} {}\".format(pwd, n)\n        print(data)\n        fout.write(\"{}\\n\".format(data))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6168997, "user_type": "registered", "profile_image": "https://graph.facebook.com/1793209557567866/picture?type=large", "display_name": "Gerardo Palmiotto", "link": "https://stackoverflow.com/users/6168997/gerardo-palmiotto"}, "edited": false, "score": 0, "creation_date": 1460030790, "post_id": 36462622, "comment_id": 60561454, "body": "And if I wanted put an list of name... How can I do? I&#39;am a beginner in python"}], "tags": [], "owner": {"reputation": 21, "user_id": 6009397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqCNO.jpg?s=128&g=1", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/6009397/jasmine"}, "is_accepted": false, "score": 0, "last_activity_date": 1459978168, "last_edit_date": 1459978168, "creation_date": 1459977808, "answer_id": 36462622, "question_id": 36462059, "link": "https://stackoverflow.com/questions/36462059/the-print-of-while-loop-into-text-file/36462622#36462622", "title": "The print of while loop into text file", "body": "<p>pwd = raw_input('Enter a word:')<br/>\nn = 0<br/>\nprint pwd, n<br/>\nwith open('tesxt.txt','w') as out_file:<br/>\n\n&nbsp;&nbsp;&nbsp;&nbsp;while n &lt; 9 :<br/>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n += 1<br/>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out_file.write('{} {}\\n'.format(pwd, n))</p>\n"}], "owner": {"reputation": 1, "user_id": 6168997, "user_type": "registered", "profile_image": "https://graph.facebook.com/1793209557567866/picture?type=large", "display_name": "Gerardo Palmiotto", "link": "https://stackoverflow.com/users/6168997/gerardo-palmiotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1459979045, "creation_date": 1459975766, "last_edit_date": 1459979045, "question_id": 36462059, "link": "https://stackoverflow.com/questions/36462059/the-print-of-while-loop-into-text-file", "title": "The print of while loop into text file", "body": "<p>I've done this in python. When I insert a word, it'll repeated with after a digit\nFor Example if I insert stack, it-ll print:</p>\n\n<pre><code>stack 1\nstack 2\nstack 3\nstack 4\nstack 5\nstack 6\nstack 7\nstack 8\nstack 9\n</code></pre>\n\n<p>I want that python to print the name and the digit in a file text. I searches but didn't find anything.</p>\n\n<p>Code:</p>\n\n<pre><code>pwd=raw_input(\"Enter a word:\")\nn=0\nn=str(n)\nprint (pwd,n)\nwhile n&lt;9:\n  out_file=open(\"tesxt.txt\",\"w\")\n  n+=1\n  out_file.write(pwd)\n  out_file.write(n)\nout_file.close()\n</code></pre>\n\n<p>I want that python to write the words that are generated from the loop.\nThx for the help</p>\n"}, {"tags": ["python", "qt", "pyqt", "decorator", "signals-slots"], "comments": [{"owner": {"reputation": 389, "user_id": 7771315, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/IJXln.jpg?s=128&g=1", "display_name": "Bo\u0161tjan Mejak", "link": "https://stackoverflow.com/users/7771315/bo%c5%a1tjan-mejak"}, "edited": false, "score": 1, "creation_date": 1509803908, "post_id": 36462003, "comment_id": 81172952, "body": "The use of @pyqtSignal() is deprecated. Use only @pyqtSlot(). Check the documentation how to use it the way it is intended. Don\u2019t reinvent the wheel. (If you ask me, @pyqtSlot() should be named as @pyQtSlot() to be consistent with the naming scheme of PyQt.)"}], "answers": [{"comments": [{"owner": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "edited": false, "score": 0, "creation_date": 1459995744, "post_id": 36463532, "comment_id": 60542602, "body": "My question then leads to: how to organize code, especially when dealing with many widgets. It seems sloppy to simply put a multitude of widgets in 1 main class."}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "reply_to_user": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "edited": false, "score": 0, "creation_date": 1459999102, "post_id": 36463532, "comment_id": 60543489, "body": "A typical application will have dozens of widgets, all contained in a single window or dialog. There&#39;s nothing sloppy about that. Take a look at the official Qt and PySide example applications. They&#39;ll give you an idea of how applications are organized."}, {"owner": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "edited": false, "score": 0, "creation_date": 1460033086, "post_id": 36463532, "comment_id": 60563173, "body": "Suppose I want to log the color change to a file. (What I want to do is log every signal for every widget and call an outside framework). I know I can therefore call the logging function within <code>setColor</code> but to call a function from the other framework I need to have <code>colorChanged</code> pass the <code>color</code> into <code>on_colorChanged</code>."}, {"owner": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "edited": false, "score": 0, "creation_date": 1460033661, "post_id": 36463532, "comment_id": 60563638, "body": "I made edits to your example class to show what it is I&#39;m trying to do."}, {"owner": {"reputation": 205, "user_id": 1137038, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02a58ca232c68fd0ea58491a52db4c6?s=128&d=identicon&r=PG", "display_name": "Lucky", "link": "https://stackoverflow.com/users/1137038/lucky"}, "edited": false, "score": 0, "creation_date": 1503572320, "post_id": 36463532, "comment_id": 78677406, "body": "tnx, it helped :)"}], "tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": true, "score": 9, "last_activity_date": 1459983126, "last_edit_date": 1495541751, "creation_date": 1459982174, "answer_id": 36463532, "question_id": 36462003, "link": "https://stackoverflow.com/questions/36462003/pyqt5-signal-slot-decorator-example/36463532#36463532", "title": "PyQt5 signal-slot decorator example", "body": "<blockquote>\n  <p>Why use the pyqtSlot() decorator at all when removing pyqtSlot(int)\n  has no effect on the code? Can you give an example of when it would be\n  necessary?</p>\n</blockquote>\n\n<p>Already addressed in your <a href=\"https://stackoverflow.com/questions/36434706/pyqt-proper-use-of-emit-and-pyqtsignal#comment60487785_36435321\">previous question</a>, but I'll re-iterate again.</p>\n\n<blockquote>\n  <p>Although PyQt4 allows any Python callable to be used as a slot when\n  connecting signals, it is sometimes necessary to explicitly mark a\n  Python method as being a Qt slot and to provide a C++ signature for\n  it. PyQt4 provides the pyqtSlot() function decorator to do this.</p>\n  \n  <p>Connecting a signal to a decorated Python method also has the\n  advantage of reducing the amount of memory used and is slightly\n  faster.</p>\n</blockquote>\n\n<p>Also, as addressed in your <a href=\"https://stackoverflow.com/a/36435321/1547004\">previous question</a>, <strong>you cannot create signals as instance variables, they must be class attributes</strong>.  </p>\n\n<p>This will never work</p>\n\n<pre><code>def setSignal(self,type):\n    self.signal = pyqtSignal(type)\n</code></pre>\n\n<p>It must be</p>\n\n<pre><code>class MyWidget(QWidget):\n    signal = pyqtSignal(int)\n</code></pre>\n\n<blockquote>\n  <p>Create a metaclass that allows for the implementation of many different types of QWidget subclasses.</p>\n</blockquote>\n\n<p>You cannot define a metaclass for <code>QObjects</code>, since they already use their own metaclass (this is what allows the signal magic to work).  However, you can still make a <code>QObject</code> subclass factory using the <a href=\"https://docs.python.org/2/library/functions.html#type\" rel=\"noreferrer\"><code>type</code></a> function.</p>\n\n<pre><code>def factory(QClass, cls_name, signal_type):\n    return type(cls_name, (QClass,), {'signal': pyqtSignal(signal_type)})\n\nMySlider = factory(QSlider, 'MySlider', int)\nself.sld = MySlider(Qt.Horizontal)\nself.sld.signal.connect(self.on_signal)\n</code></pre>\n\n<blockquote>\n  <p>Have the metaclass produce its own signal that can be called from outside the class.</p>\n</blockquote>\n\n<p>In short, don't do this.  You shouldn't be emitting signals from outside the class.  The factory example above isn't very useful, because you're not defining custom methods on those classes to emit those signals.  Typically, this is how you would utilize custom signals</p>\n\n<pre><code>class MyWidget(QWidget):\n    colorChanged = pyqtSignal()\n\n    def setColor(self, color):\n        self._color = color\n        self.colorChanged.emit()\n\n\nclass ParentWidget(QWidget):\n\n    def __init__(self):\n        ...\n        self.my_widget = MyWidget(self)\n        self.my_widget.colorChanged.connect(self.on_colorChanged)\n        # This will cause the colorChanged signal to be emitted, calling on_colorChanged\n        self.my_widget.setColor(Qt.blue)\n\n    def on_colorChanged(self):\n        # do stuff\n</code></pre>\n"}], "owner": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13114, "favorite_count": 5, "accepted_answer_id": 36463532, "answer_count": 1, "score": 8, "last_activity_date": 1568702571, "creation_date": 1459975593, "last_edit_date": 1459978824, "question_id": 36462003, "link": "https://stackoverflow.com/questions/36462003/pyqt5-signal-slot-decorator-example", "title": "PyQt5 signal-slot decorator example", "body": "<p>I am currently in the process of creating a class that produces a pyqtSignal(int) and pyqtSlot(int). The difficulty lies in creating a signal that emits a specific value.</p>\n\n<p>Suppose I want to produce something similar to the following simple example:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtCore import (Qt, pyqtSignal, pyqtSlot)\nfrom PyQt5.QtWidgets import (QWidget, QLCDNumber, QSlider,\n    QVBoxLayout, QApplication)\n\n\nclass Example(QWidget):\n\n    def __init__(self):\n        super().__init__()\n\n        self.initUI()\n\n    def printLabel(self, str):\n        print(str)\n\n    @pyqtSlot(int)\n    def on_sld_valueChanged(self, value):\n        self.lcd.display(value)\n        self.printLabel(value)\n\n    def initUI(self):\n\n        self.lcd = QLCDNumber(self)\n        self.sld = QSlider(Qt.Horizontal, self)\n\n        vbox = QVBoxLayout()\n        vbox.addWidget(self.lcd)\n        vbox.addWidget(self.sld)\n\n        self.setLayout(vbox)\n        self.sld.valueChanged.connect(self.on_sld_valueChanged)\n\n        self.setGeometry(300, 300, 250, 150)\n        self.setWindowTitle('Signal &amp; slot')\n        self.show()\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Example()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>My first question for the above code is:</p>\n\n<ul>\n<li>Why use the pyqtSlot() decorator at all when removing <code>pyqtSlot(int)</code> has no effect on the code?</li>\n<li>Can you give an example of when it would be necessary?</li>\n</ul>\n\n<p>For specific reasons, I would like to produce my own signal using the pyqtSignal() factory and am given decent documentation <a href=\"http://pyqt.sourceforge.net/Docs/PyQt5/signals_slots.html#defining-new-signals-with-pyqtsignal\" rel=\"noreferrer\">here</a>. The only problem however, is that the very <a href=\"http://pyqt.sourceforge.net/Docs/PyQt5/signals_slots.html#connecting-disconnecting-and-emitting-signals\" rel=\"noreferrer\">simple example</a> does not give a solid foundation for how to emit specific signals.</p>\n\n<p>Here is what I am trying to do but have found myself lost:</p>\n\n<ol>\n<li>Create a metaclass that allows for the implementation of many different types of QWidget subclasses.</li>\n<li>Have the metaclass produce its own signal that can be called from outside the class.</li>\n</ol>\n\n<p>This is what I am going for:</p>\n\n<pre><code>from PyQt5.QtWidgets import QPushButton, QWidget\nfrom PyQt5.QtCore import pyqtSignal, pyqtSlot\nfrom PyQt5.QtWidgets import QSlider\n\ndef template(Q_Type, name: str, *args):\n    class MyWidget(Q_Type):\n\n        def __init__(self) -&gt; None:\n            super().__init__(*args)\n            self._name = name\n\n        def setSignal(self,type):\n            self.signal = pyqtSignal(type)\n\n        def callSignal(self):\n            pass\n\n    return MyWidget\n</code></pre>\n\n<p>As you can see. I give the widget a name because I find this to be useful, and I also try to instantiate the QWidget from within the class to simplify code.</p>\n\n<p>This is how I would like a main class to produce the widgets from the first example:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtCore import (Qt, pyqtSignal, pyqtSlot)\nfrom PyQt5.QtWidgets import (QWidget, QLCDNumber, QSlider,\n    QVBoxLayout, QApplication)\n\n\nclass Example(QWidget):\n\n    def __init__(self):\n        super().__init__()\n\n        self.initUI()\n\n    def printLabel(self, str):\n        print(str)\n\n    @pyqtSlot(int)\n    def sld_valChanged(self, value):\n        self.lcd.display(value)\n        self.printLabel(value)\n\n    def initUI(self):\n\n        #instantiate the QWidgets through template class\n        self.lcd = template(QLCDNumber,'lcd_display')\n        self.sld = template(QSlider, 'slider', Qt.Horizontal)\n\n        #create signal\n        #self.sld.setSignal(int)\n\n        vbox = QVBoxLayout()\n        vbox.addWidget(self.lcd)\n        vbox.addWidget(self.sld)\n\n        self.setLayout(vbox)\n\n        #connect signal - this won't send the value of the slider\n        #self.sld.signal.connect(self.sld_valChanged)\n        self.sld.valueChanged.connect(self.sld_valChanged)\n\n        self.setGeometry(300, 300, 250, 150)\n        self.setWindowTitle('Signal &amp; slot')\n        self.show()\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Example()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>There are only 2 problems that need to be solved here:</p>\n\n<ol>\n<li>The template metaclass is set up incorrectly, and I am unable to instantiate the QWidget from within the metaclass. The <code>Q_Type</code> is telling me that its type is <code>PyQt5.QtCore.pyqtWrapperType</code> when it should be <code>PyQt5.QtWidgets.QSlider</code>.</li>\n<li>Even though I am creating a newSignal via the templated class, how do I get the <code>QSlider</code> to send the changed value that I want it to send. I believe this is where <code>emit()</code> comes into play but do not have enough knowledge as to how it is useful.\nI know I could make some sort of function call <code>self.sld.emit(35)</code> if I would like the signal to pass the value 35 to the slot function. The question becomes not how but where should I implement this function?</li>\n</ol>\n\n<p>I may be totally offbase and overthinking the solution, feel free to correct my code so that I can have my signal emit the value of the slider.</p>\n"}, {"tags": ["python", "arrays", "2d"], "comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1459975773, "post_id": 36461925, "comment_id": 60535929, "body": "What do you want as a result if you search for 2 and your list looks like this? <code>[[1,a,b],[2,x,d],[2,c,f]]</code>? Will you always search for the first element in these lists, or could you, say, search for <code>a</code>, too?"}, {"owner": {"reputation": 47, "user_id": 6168984, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ac1e3d8c01047e9f588565c275b9de9?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/6168984/allan"}, "reply_to_user": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1459980011, "post_id": 36461925, "comment_id": 60538098, "body": "the first element will be unique (a number used to identify the following elements), as for the second question: no - only the first element in used when searching for the group of elements"}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1459980245, "post_id": 36461925, "comment_id": 60538178, "body": "One more question then. Will the numbers be in order and with no gaps? For example, 1, 2, 3, ..., or could you get 1, 3, 10, or even 1, 4, 2, ...?"}, {"owner": {"reputation": 47, "user_id": 6168984, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ac1e3d8c01047e9f588565c275b9de9?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/6168984/allan"}, "reply_to_user": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1459980903, "post_id": 36461925, "comment_id": 60538444, "body": "it won&#39;t necessarily be in numerical order, it can be random. Thank you for asking but I have found a solution so a reply won&#39;t be necessary."}], "answers": [{"tags": [], "owner": {"reputation": 1057, "user_id": 4153464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/D55Mz.jpg?s=128&g=1", "display_name": "Work of Artiz", "link": "https://stackoverflow.com/users/4153464/work-of-artiz"}, "is_accepted": false, "score": 1, "last_activity_date": 1459975670, "creation_date": 1459975670, "answer_id": 36462030, "question_id": 36461925, "link": "https://stackoverflow.com/questions/36461925/python-extracting-elements-from-2d-array/36462030#36462030", "title": "Python | extracting elements from 2D array", "body": "<p>Maybe something like this ?</p>\n\n<pre><code>def search(arr2d, value):\n     for row in arr2d:\n         if row[0] == value:\n             return row\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 669, "user_id": 5802698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7203cec6d5c278002279ffae236ff5?s=128&d=identicon&r=PG&f=1", "display_name": "Sawel", "link": "https://stackoverflow.com/users/5802698/sawel"}, "is_accepted": true, "score": 1, "last_activity_date": 1459975715, "creation_date": 1459975715, "answer_id": 36462043, "question_id": 36461925, "link": "https://stackoverflow.com/questions/36461925/python-extracting-elements-from-2d-array/36462043#36462043", "title": "Python | extracting elements from 2D array", "body": "<p>You can do a simple <code>for</code> loop, and use the built-in <code>in</code> statement:</p>\n\n<pre><code>def retrieve_sub_array(element):\n for sub_array in array:\n  if element in sub_array:\n   return sub_array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12178, "user_id": 1388292, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mfJ7p.jpg?s=128&g=1", "display_name": "Jacques Gaudin", "link": "https://stackoverflow.com/users/1388292/jacques-gaudin"}, "is_accepted": false, "score": 1, "last_activity_date": 1459976639, "last_edit_date": 1459976639, "creation_date": 1459975718, "answer_id": 36462044, "question_id": 36461925, "link": "https://stackoverflow.com/questions/36461925/python-extracting-elements-from-2d-array/36462044#36462044", "title": "Python | extracting elements from 2D array", "body": "<p>Try something like :</p>\n\n<pre><code>def find(value, array):\n    for l in array:\n        if l[0]==value:\n            return l\n</code></pre>\n\n<p>or if you want to learn more :</p>\n\n<pre><code>array[list(zip(*array))[0].index(value)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2895, "user_id": 3412611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bPsp8.jpg?s=128&g=1", "display_name": "Tony Babarino", "link": "https://stackoverflow.com/users/3412611/tony-babarino"}, "is_accepted": false, "score": 1, "last_activity_date": 1459976232, "last_edit_date": 1459976232, "creation_date": 1459975743, "answer_id": 36462053, "question_id": 36461925, "link": "https://stackoverflow.com/questions/36461925/python-extracting-elements-from-2d-array/36462053#36462053", "title": "Python | extracting elements from 2D array", "body": "<p>You can use a dictionary if that fits in your problem:</p>\n\n<pre><code>&gt;&gt;&gt; dict={1:['a','b'],2:['x','d'],3:['c','f']}\n&gt;&gt;&gt; dict[2]\n['x', 'd']\n</code></pre>\n\n<p>It's more effective then searching linearly for the right index in every list.</p>\n"}], "owner": {"reputation": 47, "user_id": 6168984, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ac1e3d8c01047e9f588565c275b9de9?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/6168984/allan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "accepted_answer_id": 36462043, "answer_count": 4, "score": 2, "last_activity_date": 1459976639, "creation_date": 1459975272, "last_edit_date": 1459976253, "question_id": 36461925, "link": "https://stackoverflow.com/questions/36461925/python-extracting-elements-from-2d-array", "title": "Python | extracting elements from 2D array", "body": "<p>I am not even sure how to word my question due to me being quite new to python. The basic concept of what I want to accomplish is to be able to search for something in a 2D array and retrieve the right value as well as the values associated with that value (sorry for my bad explanation)</p>\n\n<p>e.g. </p>\n\n<p><code>array=[[1,a,b],[2,x,d],[3,c,f]]</code></p>\n\n<p>if the user wants to find <code>2</code>, I want the program to retrieve <code>[2,x,d]</code> and if possible, put that into a normal (1D) array. Likewise, if the user searches for <code>3</code>, the program should retrieve <code>[3,c,f]</code>.</p>\n\n<p>Thank you in advance (and if possible I want a solution that does not involve numpy)</p>\n"}, {"tags": ["python", "sql", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5589900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qg0ch.jpg?s=128&g=1", "display_name": "The Boat", "link": "https://stackoverflow.com/users/5589900/the-boat"}, "edited": false, "score": 0, "creation_date": 1459975865, "post_id": 36462041, "comment_id": 60535997, "body": "Thank you, works perfectly, apologies for my novice understanding of SQL."}], "tags": [], "owner": {"reputation": 5823, "user_id": 503099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gnC28.jpg?s=128&g=1", "display_name": "Forge", "link": "https://stackoverflow.com/users/503099/forge"}, "is_accepted": true, "score": 1, "last_activity_date": 1460013963, "last_edit_date": 1460013963, "creation_date": 1459975703, "answer_id": 36462041, "question_id": 36461901, "link": "https://stackoverflow.com/questions/36461901/sql-get-highest-score-of-three-columns-does-not-return-required-fields/36462041#36462041", "title": "SQL get highest score of three columns does not return required fields", "body": "<p>You should add <code>surname</code> and <code>forename</code> to selected fields together with <code>score1</code>, <code>score2</code> and <code>score3</code>. </p>\n\n<pre><code>cursor.execute('''SELECT surname, forename, score1, score2, score3\n...\n</code></pre>\n\n<p>Read more about the select query <a href=\"http://dev.mysql.com/doc/refman/5.7/en/select.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>There is a free interactive <code>SQL</code> course offered by <strong>Code Academy</strong>, check it out at <a href=\"https://www.codecademy.com/learn/learn-sql\" rel=\"nofollow\">https://www.codecademy.com/learn/learn-sql</a>.</p>\n"}], "owner": {"reputation": 27, "user_id": 5589900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qg0ch.jpg?s=128&g=1", "display_name": "The Boat", "link": "https://stackoverflow.com/users/5589900/the-boat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "accepted_answer_id": 36462041, "answer_count": 1, "score": 2, "last_activity_date": 1460013963, "creation_date": 1459975198, "last_edit_date": 1459977524, "question_id": 36461901, "link": "https://stackoverflow.com/questions/36461901/sql-get-highest-score-of-three-columns-does-not-return-required-fields", "title": "SQL get highest score of three columns does not return required fields", "body": "<p>I am trying to display the highest score from three columns and order them as such, it does order them by highest score per column but does not return the surname and forename. Below is a segment of the code.</p>\n\n<pre><code>import sqlite3\nconnection = sqlite3.connect(\"class1.db\")\ncursor = connection.cursor()\ncursor.execute('''SELECT score1, score2, score3,\n    CASE\n    WHEN score1 &gt;= score2 AND score1 &gt;= score3 THEN score1\n    WHEN score2 &gt;= score1 AND score2 &gt;= score3 THEN score2\n    WHEN score3 &gt;= score1 AND score3 &gt;= score2 THEN score3\n    ELSE score1\n    END AS high_score FROM class1 ORDER BY high_score DESC;''' )\nprint(\"Class 1:\")\nresult = cursor.fetchall() \nfor r in result:\n    print(r)\n</code></pre>\n\n<p>This is the data it should return:</p>\n\n<pre><code>Class 1:\n('Python', 'Monty', 5, 10, 7)\n</code></pre>\n\n<p>This is the data it returns:</p>\n\n<pre><code>Class 1:\n(5, 10, 7, 10)\n</code></pre>\n\n<p>I have no idea what the problem is and I am not brilliant with <code>SQL</code> syntax, any help would be appreciated. The columns containing 'Python' and 'monty' are called Surname and Forename respectively.</p>\n"}, {"tags": ["python", "pandas", "pip", "pytables"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4169705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a424202a4e651010cd4ae53c4708179e?s=128&d=identicon&r=PG&f=1", "display_name": "Jemme", "link": "https://stackoverflow.com/users/4169705/jemme"}, "edited": false, "score": 0, "creation_date": 1459975748, "post_id": 36461920, "comment_id": 60535911, "body": "This is the error: InstallationError: Command /usr/bin/python -c &quot;import setuptools, tokenize;__file__=&#39;/tmp/pip-build-1euVua/tables/setup.py&#39;;ex&zwnj;&#8203;ec(compile(getattr(t&zwnj;&#8203;okenize, &#39;open&#39;, open)(<b>file</b>).read().replace(&#39;\\r\\n&#39;, &#39;\\n&#39;), <b>file</b>, &#39;exec&#39;))&quot; install --record /tmp/pip-7AQAHv-record/install-record.txt --single-version-externally-managed --compile --user failed with error code 1 in /tmp/pip-build-1euVua/tables"}], "tags": [], "owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "is_accepted": false, "score": 0, "last_activity_date": 1459975259, "creation_date": 1459975259, "answer_id": 36461920, "question_id": 36461885, "link": "https://stackoverflow.com/questions/36461885/error-installing-tables-via-pip/36461920#36461920", "title": "Error installing tables via pip", "body": "<p>You can check the log pip has mentioned at /home/hudson/pg/fkgm22/.pip/pip.log to see what went wrong. I guess you will get a much more detailed error message which you can try to analyse.</p>\n"}], "owner": {"reputation": 103, "user_id": 4169705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a424202a4e651010cd4ae53c4708179e?s=128&d=identicon&r=PG&f=1", "display_name": "Jemme", "link": "https://stackoverflow.com/users/4169705/jemme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459975259, "creation_date": 1459975136, "question_id": 36461885, "link": "https://stackoverflow.com/questions/36461885/error-installing-tables-via-pip", "title": "Error installing tables via pip", "body": "<p>I'm tying to install tables as follows (I have no sudo permissions):</p>\n\n<pre><code>pip install --user tables\n</code></pre>\n\n<p>And I get the following error:</p>\n\n<pre><code>Command /usr/bin/python -c \"import setuptools, tokenize;__file__='/tmp/pip-build-pWg1M_/tables/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-mOibUT-record/install-record.txt --single-version-externally-managed --compile --user failed with error code 1 in /tmp/pip-build-pWg1M_/tables Storing debug log for failure in /home/hudson/pg/fkgm22/.pip/pip.log\n</code></pre>\n\n<p>I can install other packages with this method, but not tables... any idea?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "tkinter", "tkinter-canvas"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 3508907, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a2d8a5d676654b7eea181c632768b9b1?s=128&d=identicon&r=PG&f=1", "display_name": "Hexic", "link": "https://stackoverflow.com/users/3508907/hexic"}, "edited": false, "score": 0, "creation_date": 1459982614, "post_id": 36461946, "comment_id": 60539047, "body": "I think &#39;after&#39; is what I&#39;m looking for in regards to updating the window. Thanks for the help!"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 0, "last_activity_date": 1459975353, "creation_date": 1459975353, "answer_id": 36461946, "question_id": 36461841, "link": "https://stackoverflow.com/questions/36461841/python-tkinter-how-do-i-change-variables-from-outside-the-main-window-class/36461946#36461946", "title": "Python Tkinter - How do I change variables from outside the main window class?", "body": "<p>You are correct that code after <code>mainloop</code> doesn't run. It does, but only after the GUI has been destroyed. Tkinter is designed for the call to <code>mainloop</code> be the last (or very nearly last) line of executable code. Once it is called, all other work must be done as reaction to events. That is the essence of GUI programming.</p>\n\n<p>The answer to \"how do I go about changing the variables\" is simple: do it before you call <code>mainloop</code>, or do it in reaction to an event. For example, do it in a callback to a button, do it in a function bound to an event, or to a time-based event via <code>after</code>, and so on. </p>\n"}], "owner": {"reputation": 17, "user_id": 3508907, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a2d8a5d676654b7eea181c632768b9b1?s=128&d=identicon&r=PG&f=1", "display_name": "Hexic", "link": "https://stackoverflow.com/users/3508907/hexic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 36461946, "answer_count": 1, "score": 0, "last_activity_date": 1459975353, "creation_date": 1459975019, "question_id": 36461841, "link": "https://stackoverflow.com/questions/36461841/python-tkinter-how-do-i-change-variables-from-outside-the-main-window-class", "title": "Python Tkinter - How do I change variables from outside the main window class?", "body": "<p>Now i understand the concept of instance variables and classes, I've never had a problem with them before and I use them frequently. However when I make my MainWindow class, everything is peachy until i try accessing instance variables.</p>\n\n<p><a href=\"http://pastebin.com/tDs5EJhi\" rel=\"nofollow\">http://pastebin.com/tDs5EJhi</a> is the full code, but at this point it's just placing labels and frames and whatnot, no actual logic is going on. The window looks fine and nothing bad happens.</p>\n\n<p>My question comes to be when I try changing things inside of the window externally. I figured I could just make an instance of the class and change variables from there (namely instancevariable.ImageCanvas.itemconfig()) like i can normally, but Tkinter isn't being nice about it and I think it's a result of Tkinter's mainloop().</p>\n\n<p>Here's the tidbit of my class MainWindow() that i'm having trouble with (ln 207)</p>\n\n<pre><code>            ...\n            self.C4 = Tk.PhotoImage(file=\"temp.png\")\n            self.card4 = self.CardCanvas.create_image(120,46,image=self.C4, state=Tk.NORMAL)\n            #self.CardCanvas.itemconfig(4, state=Tk.HIDDEN) # &lt; It works here\n            ...\n        self.root.mainloop()\n\nwindow = MainWindow()\nwindow.CardCanvas.itemconfig(4, state=Tk.HIDDEN) # &lt; It doesn't work here\n</code></pre>\n\n<p>That's how i learned how to edit instance variables. When the window pops up, the itemconfig command doesn't actually apply like it would were it inside the class (or maybe it did and the window just didn't update?) and after closing the window I get this error:</p>\n\n<pre><code>_tkinter.TclError: invalid command name\n</code></pre>\n\n<p>which I assume is just because it's trying to apply a method to variables that don't exist anymore, now that the window has closed.</p>\n\n<p>So I guess here's my big question - I have a MainWindow class, and from what I can tell, nothing can be changed from outside of the class because the Tk.mainloop() is running and won't stop to let other code after it run, like the itemconfig. How do I go about changing those variables? Code after the instance variable declaration doesn't seem to run until the MainWindow() is closed.</p>\n"}, {"tags": ["python", "unit-testing", "flask"], "comments": [{"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1459978366, "post_id": 36461817, "comment_id": 60537417, "body": "you want access to request.get_data() in the unit test?"}, {"owner": {"reputation": 12191, "user_id": 237696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cUqoH.jpg?s=128&g=1", "display_name": "mr-sk", "link": "https://stackoverflow.com/users/237696/mr-sk"}, "edited": false, "score": 0, "creation_date": 1459985908, "post_id": 36461817, "comment_id": 60540032, "body": "There&#39;s no straight forward way to set the POST data (body), which is retrieved by request.get_data(). That&#39;s the one answer suggests using mocks/patch to patch that method and set the value."}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "edited": false, "score": 0, "creation_date": 1459987929, "post_id": 36461817, "comment_id": 60540572, "body": "If you stuff data to the body of the request and make a normal http post you are making this an integration test. You shouldn&#39;t care where or how get_data finds the data at runtime, only how that data will look like so you can test your function in isolation."}], "answers": [{"tags": [], "owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "is_accepted": false, "score": 0, "last_activity_date": 1459975567, "creation_date": 1459975567, "answer_id": 36461994, "question_id": 36461817, "link": "https://stackoverflow.com/questions/36461817/best-way-to-handle-flask-post-unit-test/36461994#36461994", "title": "Best way to handle flask POST unit test", "body": "<p>You can patch method get_data of the request object with a mock object that returns what you tell it to return. Something along the lines of:</p>\n\n<pre><code>from mock import patch\n\n@patch('flask.Request.get_data')\ndef test_route_post(self, get_deta_mock):\n    get_deta_mock.return_value = '{\"foo\": \"bar\"}'\n    result = route_post()\n    assert result['foo'] == 'bar'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": false, "score": 2, "last_activity_date": 1460008062, "creation_date": 1460008062, "answer_id": 36467653, "question_id": 36461817, "link": "https://stackoverflow.com/questions/36461817/best-way-to-handle-flask-post-unit-test/36467653#36467653", "title": "Best way to handle flask POST unit test", "body": "<p>Use the test client to post whatever data you need to the route.  If <code>data</code> is a string or bytes, Werkzeug sends the data directly, as bytes.</p>\n\n<pre><code>from flask import Flask, request\n\napp = Flask(__name__, static_folder=None)\n\n@app.route('/', methods=['POST'])\ndef index():\n    return request.get_data()\n\nc = app.test_client()\nr = c.post('/', data='Hello, World!')\nprint(r.data)  # b'Hello, World!'\n</code></pre>\n"}], "owner": {"reputation": 12191, "user_id": 237696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cUqoH.jpg?s=128&g=1", "display_name": "mr-sk", "link": "https://stackoverflow.com/users/237696/mr-sk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460008062, "creation_date": 1459974924, "last_edit_date": 1459977010, "question_id": 36461817, "link": "https://stackoverflow.com/questions/36461817/best-way-to-handle-flask-post-unit-test", "title": "Best way to handle flask POST unit test", "body": "<p>I have the following code, that accepts a POST request and processes it. </p>\n\n<p><em>index.py</em></p>\n\n<pre><code>@app.route('/route', methods=['POST'])\ndef route_post():\n    try:\n        data = request.get_data()\n        j = json.loads(data)\n    except Exception as e:\n    ...\n</code></pre>\n\n<p>Basically, I want access to request.get_data() so I can change the value. I'm invoking the test as shown below, which is dead simple. </p>\n\n<p><em>route_test.py:</em></p>\n\n<pre><code>def test_route():\n    assert((\"Bad Request\\r\\n\", 400) == route_post())\n</code></pre>\n\n<p>But doesn't allow me to set the value of request.get_data(). How can I do this?</p>\n"}, {"tags": ["python", "bash", "anaconda", "jupyter", "chroot"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459975916, "post_id": 36461772, "comment_id": 60536034, "body": "Try installing Anaconda in the chroot. You get a new version... but code isolation is kinda the point behind chroot anyway."}, {"owner": {"reputation": 113, "user_id": 5913774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2NphR.jpg?s=128&g=1", "display_name": "macurie", "link": "https://stackoverflow.com/users/5913774/macurie"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459976108, "post_id": 36461772, "comment_id": 60536161, "body": "@tdelaney What do you mean? Anaconda (miniconda) is installed in the chroot already."}], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": false, "score": 1, "last_activity_date": 1459980627, "creation_date": 1459980627, "answer_id": 36463241, "question_id": 36461772, "link": "https://stackoverflow.com/questions/36461772/activate-python-environment-in-chroot/36463241#36463241", "title": "Activate python environment in chroot", "body": "<p>There are two problems with this command</p>\n\n<pre><code>chroot $chroot_path /bin/bash source /miniconda/bin/activate py2 &amp;&amp; /miniconda/bin/conda install notebook ipykernel\n</code></pre>\n\n<p>First, <code>source</code> is a <code>bash</code> keyword, not an executable program. When you do <code>/bin/bash source /miniconda/bin/activate py2</code> you are trying to run a non-existent executable, which fails. Second, the part after the <code>&amp;&amp;</code> will only run after the chroot has been exited. Instead you can use <code>-c</code> to run the line as a script</p>\n\n<pre><code>chroot $chroot_path /bin/bash -c \"source /miniconda/bin/activate py2;/miniconda/bin/conda install notebook ipykernel\"\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5913774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2NphR.jpg?s=128&g=1", "display_name": "macurie", "link": "https://stackoverflow.com/users/5913774/macurie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459980627, "creation_date": 1459974769, "last_edit_date": 1459976303, "question_id": 36461772, "link": "https://stackoverflow.com/questions/36461772/activate-python-environment-in-chroot", "title": "Activate python environment in chroot", "body": "<p>I need to run commands in a Anaconda Python environment in a chroot with a bash script like this:</p>\n\n<pre><code># install miniconda\nchroot $chroot_path /bin/bash /miniconda.sh -f -b -p /miniconda\n\n# Install packages in py2 environment\nchroot $chroot_path /bin/bash source /miniconda/bin/activate py2 &amp;&amp; /miniconda/bin/conda install notebook ipykernel\n</code></pre>\n\n<p>But I get:</p>\n\n<pre><code>/bin/bash: source: No such file or directory\n</code></pre>\n\n<p>How do I make it work?</p>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1459975207, "post_id": 36461736, "comment_id": 60535596, "body": "Please post enough code to actually reproduce the result (but no more)."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1459975467, "post_id": 36461736, "comment_id": 60535742, "body": "Note that the code you do not show should use <code>string1 + string2</code> format. You need to show where this is done and how you print it out."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 2405926, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/dFXCN.jpg?s=128&g=1", "display_name": "RhysBuddy", "link": "https://stackoverflow.com/users/2405926/rhysbuddy"}, "edited": false, "score": 0, "creation_date": 1459976270, "post_id": 36462158, "comment_id": 60536255, "body": "thankyou you solved my problem, thanks everyone else who chipped in this was bugging me like crazy"}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 2, "last_activity_date": 1459976292, "last_edit_date": 1459976292, "creation_date": 1459976144, "answer_id": 36462158, "question_id": 36461736, "link": "https://stackoverflow.com/questions/36461736/extra-apostrophes-string-python/36462158#36462158", "title": "extra apostrophes string python", "body": "<pre><code>guessHistory[guessNum] = '[', compareWords(wordList[guessNum], password) , '/6 correct]'\n</code></pre>\n\n<p>By using commas you're creating a tuple with several elements, and tuples look ugly when printed. You can combine the pieces together into a single string using <code>str.format</code>:</p>\n\n<pre><code>guessHistory[guessNum] = '[{0}/6 correct]'.format(compareWords(wordList[guessNum], password))\n</code></pre>\n\n<p>This will look much better.</p>\n"}], "owner": {"reputation": 107, "user_id": 2405926, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/dFXCN.jpg?s=128&g=1", "display_name": "RhysBuddy", "link": "https://stackoverflow.com/users/2405926/rhysbuddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459976292, "creation_date": 1459974633, "last_edit_date": 1459976001, "question_id": 36461736, "link": "https://stackoverflow.com/questions/36461736/extra-apostrophes-string-python", "title": "extra apostrophes string python", "body": "<p>Whenever I replace one of the values in my array/list, the string that I try to replace it with gets extra apostrophes and or commas that I don't want. For example, I'm trying to assign index 2 of </p>\n\n<pre><code>guessHistory = ['','','','','','','','']\n</code></pre>\n\n<p>to the return value of this function:</p>\n\n<pre><code>def compareWords(word1, word2):\n    result = 0\n    if word1[0] == word2[0]:\n        result +=1\n    if word1[1] == word2[1]:\n        result += 1\n    if word1[2] == word2[2]:\n        result += 1\n    if word1[3] == word2[3]:\n        result += 1\n    if word1[4] == word2[4]:\n        result += 1\n    if word1[5] == word2[5]:\n        result += 1\n    print result, '/ 6 correct. \\n'\n    return result\n</code></pre>\n\n<p>I do this by </p>\n\n<pre><code>guessHistory[guessNum] = '[', compareWords(wordList[guessNum], password) , '/6 correct]'\n</code></pre>\n\n<p>and so i get this as a result<br>\n<a href=\"https://i.stack.imgur.com/fgkkW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fgkkW.png\" alt=\"example of text\"></a></p>\n\n<p>but id like it to be [3/6 correct] instead of ('[', 3, '/6 correct]')</p>\n\n<pre><code>guessHistoryIndex = 0\nfor index, item in enumerate(wordList, 1):\n    print index, ' )', item, '   ' , guessHistory[guessHistoryIndex]\n    guessHistoryIndex += 1\n</code></pre>\n\n<p>this is the loop that the index changes within</p>\n"}, {"tags": ["python", "django", "apache", "mod-wsgi"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1459975236, "post_id": 36461734, "comment_id": 60535615, "body": "Where is your actual Apache site configuration then? (And anyway, on Ubuntu, you shouldn&#39;t be editing apache2.conf at all.)"}, {"owner": {"reputation": 477, "user_id": 2714443, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000057063390/picture?type=large", "display_name": "Sebastian Smolorz", "link": "https://stackoverflow.com/users/2714443/sebastian-smolorz"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1459975807, "post_id": 36461734, "comment_id": 60535959, "body": "<code>&#47;etc&#47;apache2&#47;apache2.conf</code> Should I be loading the module in sites-enabled/000-default.conf?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1459975941, "post_id": 36461734, "comment_id": 60536054, "body": "No, you should be doing it by running a2enmod, but that is nothing to do with the problem. Please post the part of the Apache configuration where you actually configure your WSGI alias."}, {"owner": {"reputation": 477, "user_id": 2714443, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000057063390/picture?type=large", "display_name": "Sebastian Smolorz", "link": "https://stackoverflow.com/users/2714443/sebastian-smolorz"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1459976088, "post_id": 36461734, "comment_id": 60536151, "body": "Sorry, I&#39;m stupid, just edited my question"}], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 2714443, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000057063390/picture?type=large", "display_name": "Sebastian Smolorz", "link": "https://stackoverflow.com/users/2714443/sebastian-smolorz"}, "edited": false, "score": 0, "creation_date": 1459977765, "post_id": 36462409, "comment_id": 60537105, "body": "I have no idea what I did wrong but I edited some of your code and it now works! You&#39;re a star! I spent hours on this!"}, {"owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "edited": false, "score": 0, "creation_date": 1460042887, "post_id": 36462409, "comment_id": 60571266, "body": "It is also probably worth figuring out where your Apache logs are being written. They&#39;ll likely give you more detail than a 500, and are useful to include in questions like these. Good job getting it working."}], "tags": [], "owner": {"reputation": 36, "user_id": 3481141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21576479ce61a064bc03cdb0f859cf33?s=128&d=identicon&r=PG&f=1", "display_name": "user3481141", "link": "https://stackoverflow.com/users/3481141/user3481141"}, "is_accepted": true, "score": 2, "last_activity_date": 1459976993, "creation_date": 1459976993, "answer_id": 36462409, "question_id": 36461734, "link": "https://stackoverflow.com/questions/36461734/mod-wsgi-with-django-500-error/36462409#36462409", "title": "mod_wsgi with Django 500 error", "body": "<p>It sound like your apache configuration is giving you most of the problems.  Please try to write to a log file from within wsgi.py file and determine if the server atleast uses the correct wsgi file.</p>\n\n<p>For what it is worth I am attaching contents of a_django_site.conf  apache config file.  this file should be in /etc/apache2/sites-available  and should be enabled using sudo a2ensite a_django_site.conf thereafter reload and restart.</p>\n\n<pre><code>Define MY_IP=129.222.333.444\nWSGIPythonPath  /home/your_name/.virtualenvs/venv_proj_name/bin/python:/home/your_name/.virtualenvs/venv_proj_name/lib/python2.7/site-packages\n\n\n&lt;VirtualHost *:80&gt;\nServerAdmin root@localhost\nServerName {MY_IP}\nServerAlias http://{MY_IP}/\n\nDocumentRoot /usr/local/src/proj_dir\n\nAlias /static /usr/local/src/proj_dir/django_static/\nAlias /images /usr/local/src/proj_dir/stock/media/\nAlias /favicon.ico /usr/local/src/proj_dir/apache/favicon.png\n\nWSGIScriptAlias / /usr/local/src/proj_dir/proj_name/wsgi.py\n\n&lt;Directory /&gt;\n    Require all granted\n&lt;/Directory&gt;\n\nErrorLog ${APACHE_LOG_DIR}/error.log\n&lt;/VirtualHost&gt;\n</code></pre>\n"}], "owner": {"reputation": 477, "user_id": 2714443, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000057063390/picture?type=large", "display_name": "Sebastian Smolorz", "link": "https://stackoverflow.com/users/2714443/sebastian-smolorz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 0, "accepted_answer_id": 36462409, "answer_count": 1, "score": 1, "last_activity_date": 1459976993, "creation_date": 1459974628, "last_edit_date": 1459976065, "question_id": 36461734, "link": "https://stackoverflow.com/questions/36461734/mod-wsgi-with-django-500-error", "title": "mod_wsgi with Django 500 error", "body": "<p>I'm using Ubuntu 14.04, Apache 2.4, Python 2.7.6, Django 1.9.5 and mod_wsgi 4.5.1 installed from source.</p>\n\n<p>My folder structure looks like so:</p>\n\n<pre><code>project\n -site\n   -mysite\n      -apache\n         -wsgi.py\n</code></pre>\n\n<p>wsgi.py:</p>\n\n<pre><code>import os, sys\n\nfrom django.core.wsgi import get_wsgi_application\nsys.path.append('/home/me/project/site')\nsys.path.append('/home/me/project/site/mysite')\nos.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'\n\n\napplication = get_wsgi_application()\n</code></pre>\n\n<p>In my main /etc/apache2/sites-enabled/000-default.conf file I have only edited the following</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n\nServerAdmin webmaster@localhost\n    DocumentRoot /var/www/html\n    LoadModule wsgi_module /usr/lib/apache2/modules/mod_wsgi.so\n\n    WSGIScriptAlias / /home/seb/project/funel/mysite/apache/wsgi.py\n            &lt;Directory \"/home/seb/project/funel/mysite/apache\"&gt;\n                    Require all granted\n            &lt;/Directory&gt;\n\nErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>What am I doing wrong? I seem to be getting a 500 Internal Server Error even though restarting Apache doesn't show any problems.</p>\n"}, {"tags": ["python", "argparse"], "answers": [{"comments": [{"owner": {"reputation": 1809, "user_id": 1755155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/db3138f886c63075fdfc1efcf171fc39?s=128&d=identicon&r=PG", "display_name": "upendra", "link": "https://stackoverflow.com/users/1755155/upendra"}, "edited": false, "score": 0, "creation_date": 1459975078, "post_id": 36461765, "comment_id": 60535506, "body": "It worked after changing the input to args.input and similarly for output. This is great help!"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1459974750, "creation_date": 1459974750, "answer_id": 36461765, "question_id": 36461726, "link": "https://stackoverflow.com/questions/36461726/python-argparse-error/36461765#36461765", "title": "Python argparse error", "body": "<p>The arguments are parsed into a namespace object <code>args</code>.  You'll need to use <code>args.input</code> instead of <code>input</code>, which is a name already referring to a built-in function.  </p>\n\n<p>Similarly for opening the output file later on.  </p>\n"}, {"tags": [], "owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "is_accepted": false, "score": 2, "last_activity_date": 1459974814, "creation_date": 1459974814, "answer_id": 36461778, "question_id": 36461726, "link": "https://stackoverflow.com/questions/36461726/python-argparse-error/36461778#36461778", "title": "Python argparse error", "body": "<p>You never define the variable <code>input</code> anywhere, but then use it in your code. However, <code>input</code> is the name of a built in python function, resulting in this error instead of a <code>NameError</code>.</p>\n"}], "owner": {"reputation": 1809, "user_id": 1755155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/db3138f886c63075fdfc1efcf171fc39?s=128&d=identicon&r=PG", "display_name": "upendra", "link": "https://stackoverflow.com/users/1755155/upendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 36461765, "answer_count": 2, "score": 1, "last_activity_date": 1491326974, "creation_date": 1459974612, "last_edit_date": 1491326974, "question_id": 36461726, "link": "https://stackoverflow.com/questions/36461726/python-argparse-error", "title": "Python argparse error", "body": "<p>This is my first time using python's <code>argparse</code> and I am not sure where am I doing wrong. Here is my code:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport argparse\n\nparser = argparse.ArgumentParser(description='Example of argparse')\n\nparser.add_argument('-i','--input', help='Input fasta file', required=True)\nparser.add_argument('-o','--output', help='Output text file', required=True)\nargs = parser.parse_args()\n\ngenes = {} # empty list\n\nwith open(input, 'r') as fh_in:\n        for line in fh_in:\n                line = line.strip()\n                if line[0] == \"&gt;\":\n                        gene_names = line[1:]\n                        genes[gene_names] = ''\n                else:\n                        genes[gene_names]+=line\n\n\nfor (name,val) in genes.items():\n        with open(output, \"w\") as fh_out:\n                val = len(val)\n                fh_out.write('%s %s' % (name,val))\n                fh_out.write(\"\\n\")\n</code></pre>\n\n<p>And when i try to run it i get this error</p>\n\n<pre><code>python get_gene_length.py -i test_in.fa -o test_out.txt\nTraceback (most recent call last):\n  File \"get_gene_length.py\", line 13, in &lt;module&gt;\n    with open(input, 'r') as fh_in:\nTypeError: coercing to Unicode: need string or buffer, builtin_function_or_method found\n</code></pre>\n\n<p>Can anyone help me understand where should I make changes to the script to make it work?</p>\n"}, {"tags": ["python", "time", "arduino", "beagleboneblack", "uart"], "answers": [{"tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 0, "last_activity_date": 1459976505, "creation_date": 1459976505, "answer_id": 36462272, "question_id": 36461723, "link": "https://stackoverflow.com/questions/36461723/uart-data-transmission/36462272#36462272", "title": "UART Data Transmission", "body": "<blockquote>\n  <p>What I'm looking for is something that starts a timer of sorts and outputs the milliseconds that have elapsed since the start of the program </p>\n</blockquote>\n\n<pre><code>#!/usr/bin/env python\nfrom time import time as timer\n\nstart = timer() \n...\nelapsed_seconds = timer() - start\nelapsed_milliseconds = elapsed_seconds * 1000\n</code></pre>\n\n<p>If you have access to Python 3 then use:</p>\n\n<pre><code>from time import monotonic as timer\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/time.html#time.monotonic\" rel=\"nofollow\"><code>time.monotonic()</code></a> is not affected by system clock updates.</p>\n"}], "owner": {"reputation": 15, "user_id": 6062864, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/76eef2eb04e29a57e3b5af3c85edf43a?s=128&d=identicon&r=PG&f=1", "display_name": "boktor", "link": "https://stackoverflow.com/users/6062864/boktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459976505, "creation_date": 1459974598, "question_id": 36461723, "link": "https://stackoverflow.com/questions/36461723/uart-data-transmission", "title": "UART Data Transmission", "body": "<p>Currently, I'm hooking up sensors to an Arduino Mega and printing the readings through serial to a Beaglebone Black. I need the data to have timestamps in such a manner as seen in the Arduino's serial monitor. For instance: <a href=\"http://i.stack.imgur.com/aaL6M.png\" rel=\"nofollow\">arduino serial monitor</a>.</p>\n\n<p>For testing purposes, I'm simply telling the Arduino to continue printing the right column to the tx pin (but not the timestamp.) The beaglebone then receives that data through it's UART1 pins. What I've told the beaglebone to do is print a timestamp in milliseconds and then what it receives from the Arduino.\nWhat I get is this: <a href=\"http://i.stack.imgur.com/DlFoh.png\" rel=\"nofollow\">Beaglebone's output file</a>.</p>\n\n<p>Obviously, something is very wrong here. I'm getting values that should definitely not be anything other than 1, and the timestamps are not okay.</p>\n\n<p>The relevant parts of the code I wrote:</p>\n\n<pre><code>    z = 0\n    millis = lambda: int(float(time.time()))\n    sensorValue = 0\n    header = 'Sensor 1 output'\n    data.write(str(header))\n    data.write(str('\\n'))\n\nwhile z==0:\n    sensorValue = ser.read() #add more for more pins\n    data.write(str(float(time.clock()*1000)))\n    data.write('\\t')\n    data.write(sensorValue) # tosses what's coming in at pin to our file\n    data.write('\\n')\n</code></pre>\n\n<p>I'm pretty sure the time.time() function isn't right to use. What I'm looking for is something that starts a timer of sorts and outputs the milliseconds that have elapsed since the start of the program and the receipt of data from the RX pin. </p>\n\n<p>My question is does that even exist in Python? All I've been able to find is time.time() or time.clock() but those don't seem to work. The Arduino-IDE has a function called millis() that does exactly that, but it doesn't seem Python has an equivalent in terms of functionality.</p>\n"}, {"tags": ["python", "bash", "variables", "for-loop", "sed"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1459974840, "post_id": 36461713, "comment_id": 60535373, "body": "Single quotes don&#39;t interpolate variables, double quotes do."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1459975365, "post_id": 36461713, "comment_id": 60535690, "body": "Running <code>sed</code> N times is inefficient and going to give you many duplicate output lines (N copies of every line with <i>one</i> of each copy modified appropriately). If you just want to change <code>1.0</code> to <code>2.0</code> on lines that match those numbers (and presumably not others) there are better ways to do this."}, {"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1459975586, "post_id": 36461713, "comment_id": 60535814, "body": "@choroba : I have changed the script to: <code>sed &quot;s&#47;s${VARIABLE} line linewidth 1\\.0&#47;s${VARIABLE} line linewidth 2\\.0&#47;g&quot; .&#47;band-structure-calcite.agr</code> and it does not work"}, {"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1459975838, "post_id": 36461713, "comment_id": 60535981, "body": "@EtanReisner :... &quot; If you just want to change <code>1.0</code> to <code>2.0</code> on lines that match those numbers (and presumably not others)&quot; ... No, I would like to change the string <code>s17 line linewidth 1.0</code> by <code>s17 line linewidth 2.0</code>; <code>s18 line linewidth 1.0</code> by <code>s18 line linewidth 2.0</code> and so on as showed above. The integers that appear to the right of the string <code>s</code> change from <code>17</code> to <code>28</code>: <code>s17, s18, s19 ... s28</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1459975901, "post_id": 36461713, "comment_id": 60536022, "body": "Yes, but you aren&#39;t changing the <code>s##</code> part of the line just the <code>1.0</code> to <code>2.0</code>, no? So the rest of your matching, etc. isn&#39;t doing much unless there are <i>other</i> lines with <code>s##</code> values wher eyou <i>don&#39;t</i> want to change the <code>1.0</code>."}, {"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1459976457, "post_id": 36461713, "comment_id": 60536369, "body": "@EtanReisner : Yes, there are other lines with <code>s##</code> values where I don&#39;t want to change the <code>1.0</code>. That is why in the for loop I am only running from <code>17</code> to <code>28</code>"}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "edited": false, "score": 0, "creation_date": 1463585485, "post_id": 36462306, "comment_id": 62129958, "body": "Thanks for  your answer :)"}], "tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1459976610, "creation_date": 1459976610, "answer_id": 36462306, "question_id": 36461713, "link": "https://stackoverflow.com/questions/36461713/in-bash-a-sed-command-of-a-variable-inside-a-for-loop/36462306#36462306", "title": "In bash: a &quot;sed&quot; command of a $VARIABLE inside a for loop", "body": "<p>Make a regular expression with your numbers:</p>\n\n<pre><code>allnr=\"\"\nfor nr in {17..28}\ndo\n    allnr+=\"${nr}|\"\ndone\n# Debug: echo \"allnr=${allnr%|}\"\nsed -r 's/s('\"${allnr%|}\"') line linewidth 1\\.0/s\\1 line linewidth 2.0/g' ./band-structure-calcite.agr\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "edited": false, "score": 0, "creation_date": 1460048128, "post_id": 36462324, "comment_id": 60574794, "body": "Thanks a lot, it worked, but I need to understand the code...  the line: <code>echo &quot;s&#47;s$n line linewidth 1\\.0&#47;s$n line linewidth 2.0&#47;g&quot;</code>  prints:  <code>s&#47;s17 line linewidth 1\\.0&#47;s17 line linewidth 2\\.0&#47;g</code>              <code>s&#47;s18 line linewidth 1\\.0&#47;s18 line linewidth 2\\.0&#47;g</code>               <code>.</code>               <code>.</code>                             <code>.</code>  Then you finish the loop with <code>done</code> followed by <code>| sed -f- filename</code> . Now, what does  <code>| sed -f- filename</code> mean? Thanks again :)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "edited": false, "score": 0, "creation_date": 1460051360, "post_id": 36462324, "comment_id": 60576652, "body": "@DavidC.: It calls sed that interprets the output of the loop as its script."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1459976675, "creation_date": 1459976675, "answer_id": 36462324, "question_id": 36461713, "link": "https://stackoverflow.com/questions/36461713/in-bash-a-sed-command-of-a-variable-inside-a-for-loop/36462324#36462324", "title": "In bash: a &quot;sed&quot; command of a $VARIABLE inside a for loop", "body": "<p>Rather than running <code>sed</code> several times, generate a sed script in the loop and run it once:</p>\n\n<pre><code>for n in {17..28} ; do\n    echo \"s/s$n line linewidth 1\\.0/s$n line linewidth 2.0/g\"\ndone | sed -f- ./band-structure-calcite.agr &gt; changed.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "edited": false, "score": 0, "creation_date": 1463585456, "post_id": 36462906, "comment_id": 62129939, "body": "Thanks for your answer! +1!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1459979007, "creation_date": 1459979007, "answer_id": 36462906, "question_id": 36461713, "link": "https://stackoverflow.com/questions/36461713/in-bash-a-sed-command-of-a-variable-inside-a-for-loop/36462906#36462906", "title": "In bash: a &quot;sed&quot; command of a $VARIABLE inside a for loop", "body": "<p>Replace the loop with a regular expression in the address part of the sed command:</p>\n\n<pre><code>'/^s\\(\\(1[7-9]\\)\\|\\(2[0-8]\\)\\)\\s/ s/1\\.0$/2.0/' ./band-structure-calcite.agr\n</code></pre>\n\n<p>The regular expression (<code>/^s\\(\\(1[7-9]\\)\\|\\(2[0-8]\\)\\)\\s/</code>) matches lines beginning with s17, s18, ... or s28, followed by a space or tab, and <code>sed</code> applies the following <code>s/1\\.0$/2.0/</code> command only to those lines.  Other lines pass through unchanged.  The whole file is read through exactly once, and the output contains one output line per input line, unlike your original.</p>\n"}], "owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 36462324, "answer_count": 3, "score": 0, "last_activity_date": 1459979007, "creation_date": 1459974561, "last_edit_date": 1459976510, "question_id": 36461713, "link": "https://stackoverflow.com/questions/36461713/in-bash-a-sed-command-of-a-variable-inside-a-for-loop", "title": "In bash: a &quot;sed&quot; command of a $VARIABLE inside a for loop", "body": "<p>I have a file that has these lines:</p>\n\n<pre><code>s17 line linewidth 1.0\ns18 line linewidth 1.0\n.\n.\n.\ns28 line linewidth 1.0\n</code></pre>\n\n<p>I would like to replace these lines by:</p>\n\n<pre><code> s17 line linewidth 2.0\n s18 line linewidth 2.0\n .\n .\n .\n s28 line linewidth 2.0\n</code></pre>\n\n<p>I have written this code in bash:</p>\n\n<pre><code> #!/bin/bash\n for VARIABLE in {17..28}\n do\n   sed 's/s${VARIABLE} line linewidth 1\\.0/s${VARIABLE} line linewidth 2\\.0/g' ./band-structure-calcite.agr\n done\n</code></pre>\n\n<p>Then I run the code by making <code>bash change.sh &gt; changed.txt</code> but the file <code>changed.txt</code> does not contain these modifications.</p>\n\n<p>I would appreciate very much if you help me and explain me the syntax of your code answers as I am learning bash</p>\n"}, {"tags": ["python", "unit-testing", "pytest"], "answers": [{"tags": [], "owner": {"reputation": 987, "user_id": 4107796, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/04f749980bc28bc2f23547d739b38d85?s=128&d=identicon&r=PG&f=1", "display_name": "jack sexton", "link": "https://stackoverflow.com/users/4107796/jack-sexton"}, "is_accepted": true, "score": 10, "last_activity_date": 1460041265, "creation_date": 1460041265, "answer_id": 36480059, "question_id": 36461602, "link": "https://stackoverflow.com/questions/36461602/pytest-says-fixture-not-found-when-im-not-using-one/36480059#36480059", "title": "pytest says fixture not found when I&#39;m not using one", "body": "<pre><code>@pytest.mark.paramaterize\n</code></pre>\n\n<p>this is invalid and pytest throws an ambiguous error that makes no sense. This is caused by a spelling error...</p>\n\n<pre><code>@pytest.mark.parametrize\n</code></pre>\n\n<p>is the valid spelling. Stupidest bug I've pulled my hair out on.\nsee <a href=\"https://github.com/pytest-dev/pytest/issues/695\" rel=\"noreferrer\">github issue on this topic for more info.</a></p>\n"}], "owner": {"reputation": 987, "user_id": 4107796, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/04f749980bc28bc2f23547d739b38d85?s=128&d=identicon&r=PG&f=1", "display_name": "jack sexton", "link": "https://stackoverflow.com/users/4107796/jack-sexton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5213, "favorite_count": 0, "accepted_answer_id": 36480059, "answer_count": 1, "score": 3, "last_activity_date": 1460041265, "creation_date": 1459974236, "question_id": 36461602, "link": "https://stackoverflow.com/questions/36461602/pytest-says-fixture-not-found-when-im-not-using-one", "title": "pytest says fixture not found when I&#39;m not using one", "body": "<p>I'm trying to paramaterize test scenarios so I don't have to make seperate cases for each scenario like in xUnit style testing.</p>\n\n<p>Here is an example from pytest that I'm trying to replicate for my own usecase.</p>\n\n<pre><code>    from datetime import datetime, timedelta\n\ntestdata = [\n    (datetime(2001, 12, 12), datetime(2001, 12, 11), timedelta(1)),\n    (datetime(2001, 12, 11), datetime(2001, 12, 12), timedelta(-1)),\n]\n\n\n@pytest.mark.parametrize(\"a,b,expected\", testdata)\ndef test_timedistance_v0(a, b, expected):\n    diff = a - b\n    assert diff == expected\n</code></pre>\n\n<p>The above works just fine, But when I try to modify it for my use like seen below. I get an error that says \"dump\" fixture not found. I don't get what's happening. This is my first time using pytest so maybe I'm not getting something.</p>\n\n<pre><code>dump1 = load_dump(pathtodump1,pathtodump2) # load_dump can take multiple params\ndump2 = load_dump(pathtodump3)\n\nscenarios = [(dump1,{'prod_str':None}),\n             (dump2,{'prod_str':\"123\"})]\n\n@pytest.mark.paramaterize(\"dump,expected_meta\", scenarios)\ndef test_metadump_profiles(dump, expected_meta):\n        meta = dump.meta\n        assert meta.prod_str == expected_meta['prod_str']\n</code></pre>\n\n<p>This is the Error I get from pytest. I should also mention that when I debugged the test never runs, it fails somewhere in the paramaterize decorator.</p>\n\n<pre><code>========================================================================= ERRORS ==========================================================================\n________________________________________________________ ERROR at setup of test_metadump_profiles _________________________________________________________\nfile /x/x/x-x/x/x/x/x/x/x/test_x.py, line 81\n  @pytest.mark.paramaterize(\"dump,expect_meta\", scenarios)\n  def test_metadump_profiles(dump, expect_meta):\n        fixture 'dump' not found\n        available fixtures: capfd, capsys, recwarn, tmpdir_factory, tmpdir, monkeypatch, pytestconfig, record_xml_property, cache\n        use 'py.test --fixtures [testpath]' for help on them.\n\n\n.\n</code></pre>\n"}, {"tags": ["python", "ssl", "oauth2"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459977185, "post_id": 36461597, "comment_id": 60536823, "body": "Not sure of a fix but I tested your code with  <code>redirect_uri=&#39;http:&#47;&#47;localhost:80&#39;</code> locally and it does work so there is nothing wrong in the code logic itself"}], "owner": {"reputation": 21, "user_id": 6168893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868dc15bd1fcb435dcee5ed7da8c9a85?s=128&d=identicon&r=PG&f=1", "display_name": "Chris K", "link": "https://stackoverflow.com/users/6168893/chris-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 624, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1459974219, "creation_date": 1459974219, "question_id": 36461597, "link": "https://stackoverflow.com/questions/36461597/python-google-oauth2-ssl-error", "title": "Python/ Google OAuth2 ssl error", "body": "<p>Working through <a href=\"https://developers.google.com/api-client-library/python/guide/aaa_oauth#step1_get_authorize_url\" rel=\"nofollow\">the python google OAuth2 API</a> and am successfully receiving the redirect_uri with the code. I copy everything after \"code=\" in the returned URL and submit that to the step2.exchange(code) command but python shows the following error:</p>\n\n<blockquote>\n  <p>File \"C:\\Python34\\lib\\ssl.py\", line 810, in do_handshake\n      self._sslobj.do_handshake() ssl.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:600)</p>\n</blockquote>\n\n<p>My questions are as follows:</p>\n\n<p>1.) What is the correct format for the code? Simply all charactors after \"code=\" in the returned url?</p>\n\n<p>2.) What else could cause this error? I installed certifi 2015.04.28 as suggested elsewhere but this did not fix the problem.</p>\n\n<p>3.) Any other suggestions to fix?</p>\n\n<p>Code is as follows</p>\n\n<pre><code>from oauth2client.client import flow_from_clientsecrets\n\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\n\n\nflow = flow_from_clientsecrets('C:\\Python34\\client_secrets.json',\n                               scope='https://www.googleapis.com/auth/drive',\n                               redirect_uri='https://www.samtec.com)\nauth_uri = flow.step1_get_authorize_url()\n\n\n\n#open firefox, send auth_uri to the interwebs\ndriver = webdriver.Firefox()\ndriver.get(auth_uri)\n\nname=driver.find_element_by_name(\"Email\")\nname.send_keys(\"******\")\nname.send_keys(Keys.RETURN)\n\n#wait 10 seconds for the page to load before proceeding\n#driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);\ndriver.implicitly_wait(10)\npassw=driver.find_element_by_name(\"Passwd\")\npassw.send_keys(\"*******\")\npassw.send_keys(Keys.RETURN)\n\n\n#wait for page to load, approve access token\ndriver.implicitly_wait(10)\nallow=driver.find_element_by_id(\"submit_approve_access\")\nallow.send_keys(Keys.RETURN)\n\n#get the URL returned to the browser, get the returned code\nreturnedURL=driver.current_url\nif \"=\" in returnedURL:\n    param, code = returnedURL.split(\"=\",1)\n\n##remove white space\ncode=code.strip()\n\n##obtain he OAuth2 object/tokens\ncredentials = flow.step2_exchange(code) ##error occurs on this line\n</code></pre>\n\n<p>Using python 3.4.3</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 2, "creation_date": 1459973870, "post_id": 36461478, "comment_id": 60534835, "body": "<a href=\"http://stackoverflow.com/questions/2680902/python-django-global-variables\" title=\"python django global variables\">stackoverflow.com/questions/2680902/&hellip;</a>"}, {"owner": {"reputation": 189, "user_id": 3766332, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0e269cf62ccb1f6f9c22bcbd46a6f42b?s=128&d=identicon&r=PG&f=1", "display_name": "user3766332", "link": "https://stackoverflow.com/users/3766332/user3766332"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1459973940, "post_id": 36461478, "comment_id": 60534883, "body": "It seems to be tailored for a counter based global variable. I believe my requirement is slightly more complicated."}], "answers": [{"tags": [], "owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "is_accepted": false, "score": 1, "last_activity_date": 1459975634, "last_edit_date": 1459975634, "creation_date": 1459974452, "answer_id": 36461679, "question_id": 36461478, "link": "https://stackoverflow.com/questions/36461478/django-substitute-for-global-variable/36461679#36461679", "title": "Django substitute for global variable", "body": "<p><strong>Django does not provide any way, per se, of doing that</strong>. Using global variables is, most of the times, a bad idea. My suggestion comes in the following steps:</p>\n\n<ol>\n<li>If you are forced to store such values in memory, use a Singleton object instead of a plain global variable (on the end, you are assuming the same risks, or similar, so be wary).</li>\n<li>Declare methods to access the object and make the data available or store new values.</li>\n<li>Remember this approach may fail (actually not fail but become less efficient) in development since stuff can be reloaded.</li>\n<li>Remember to make those methods thread safe: my suggestion is you use a mutex.</li>\n</ol>\n\n<p>Remember that, in Python, either you store something in a member of a global reference, or declare a global variable. This is a minor adjustment of what you did:</p>\n\n<pre><code>def startLoading():\n    global p, songs\n    # If you don't acquire a mutex here, God will flood earth again\n    if not (p or songs):\n        p, songs = loadSongs()\n    # release the mutex\n    return p, songs\n</code></pre>\n\n<p>I always suggest having another reference to store everything (the singleton I told you later):</p>\n\n<pre><code>from a.certain.module import my_store\n\ndef startLoading():\n    # ACQUIRE MUTEX here\n    if not myStore.has_data():\n        my_store.set_data(loadSongs())\n    # RELEASE MUTEX here\n    return my_store.get_data()\n</code></pre>\n\n<p>What <code>get_data</code>, <code>set_data</code>, and <code>has_data</code> do is up to you. <strong>I still think storing global values is a terrible idea</strong> in particular if you use something like gunicorn and have several (2n+1) django processes attending clients. <strong>It is always preferrable an external process like memcache</strong> to achieve that. But if you insist, you have these guidelines.</p>\n"}, {"comments": [{"owner": {"reputation": 1811, "user_id": 442474, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1909bdc17f4be41e0089ae9838351a6a?s=128&d=identicon&r=PG", "display_name": "thedk", "link": "https://stackoverflow.com/users/442474/thedk"}, "edited": false, "score": 0, "creation_date": 1558692778, "post_id": 36462192, "comment_id": 99193349, "body": "Performance of serialization and sending huge dict will be terribly slow"}], "tags": [], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "is_accepted": false, "score": -1, "last_activity_date": 1459976236, "creation_date": 1459976236, "answer_id": 36462192, "question_id": 36461478, "link": "https://stackoverflow.com/questions/36461478/django-substitute-for-global-variable/36462192#36462192", "title": "Django substitute for global variable", "body": "<p>The most obvious way of doing this is to use Django Cache framework. You will need to add CACHES variable to your settings.py and then you can do something like this on project load</p>\n\n<pre>\nfrom django.conf import settings\nfrom django.core.cache import caches\n\ncache = caches['default']\nkey=settings.THEKEY # the cache key to access your dictionary\n\nthe_dict = generate_the_big_dict()\ncache.set(key, the_dict)\n</pre>\n\n<p>and in your views that need to access the dictionary you would do something like</p>\n\n<pre>\nfrom django.conf import settings\nfrom django.core.cache import caches\n\ncache = caches['default']\nkey=settings.THEKEY\n\nthe_dict = cache.get(key)\n</pre>\n\n<p>If you really only want to generate the key once, you can put the generation of it into the django app ready() method (relevant docs link <a href=\"https://docs.djangoproject.com/en/1.9/ref/applications/#django.apps.AppConfig.ready\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.9/ref/applications/#django.apps.AppConfig.ready</a>) and set some very large timeout value on it. Otherwise you might want to make sure somehow that you keep updating it before it expires.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.9/topics/cache/\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.9/topics/cache/</a></p>\n"}], "owner": {"reputation": 189, "user_id": 3766332, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0e269cf62ccb1f6f9c22bcbd46a6f42b?s=128&d=identicon&r=PG&f=1", "display_name": "user3766332", "link": "https://stackoverflow.com/users/3766332/user3766332"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1408, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1459976236, "creation_date": 1459973822, "question_id": 36461478, "link": "https://stackoverflow.com/questions/36461478/django-substitute-for-global-variable", "title": "Django substitute for global variable", "body": "<p>I am making a Django Web app which initalizes two large dictionaries when I load the home page. I would like this dictionary to be available to all views after being initialized first. I understand this could be done with Global variables. But how do this in Django without using Global Variable?</p>\n\n<pre><code>def startLoading():\n      p, songs = loadSongs()\n</code></pre>\n\n<p>I would like p and songs to be accessible and mutable from every view. </p>\n"}, {"tags": ["python", "arrays", "json", "list", "dictionary"], "comments": [{"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 1, "creation_date": 1459974183, "post_id": 36461382, "comment_id": 60535021, "body": "Are you doing this just for the purposes of printing?  Or do you actually want to marshall these datatypes into a serializable format for saving somewhere?"}], "answers": [{"comments": [{"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 0, "creation_date": 1459974121, "post_id": 36461506, "comment_id": 60534989, "body": "in simple terms what is this doing? I know it&#39;s a list comprehension but don&#39;t understand how it works"}, {"owner": {"reputation": 321, "user_id": 3667430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17186510756408297414add6227f088a?s=128&d=identicon&r=PG&f=1", "display_name": "WoodMath", "link": "https://stackoverflow.com/users/3667430/woodmath"}, "edited": false, "score": 0, "creation_date": 1459974573, "post_id": 36461506, "comment_id": 60535226, "body": "@Rob : YES! Its exactly what I&#39;m looking to do. Thank you. I suppose it wasn&#39;t an issue of <b>impliciit</b> vs <b>explicit</b> iteration but an issue of <b>inline</b> vs. <b>non-inline</b> iteration. That is I didn&#39;t want to write an explicit method (or anything beyond the <code>get</code> method&#39;s <code>return</code> statement) to iterate over the <code>foos</code> collection.)"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 321, "user_id": 3667430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17186510756408297414add6227f088a?s=128&d=identicon&r=PG&f=1", "display_name": "WoodMath", "link": "https://stackoverflow.com/users/3667430/woodmath"}, "edited": false, "score": 0, "creation_date": 1459974660, "post_id": 36461506, "comment_id": 60535276, "body": "@WoodMath - I&#39;m not sure what you mean by &quot;inline&quot; and &quot;non-inline&quot; iteration. If you mean a for loop (like <code>for x in foos: ...</code>), stay tuned. I&#39;ll add that one next."}, {"owner": {"reputation": 321, "user_id": 3667430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17186510756408297414add6227f088a?s=128&d=identicon&r=PG&f=1", "display_name": "WoodMath", "link": "https://stackoverflow.com/users/3667430/woodmath"}, "edited": false, "score": 0, "creation_date": 1459976202, "post_id": 36461506, "comment_id": 60536215, "body": "@Rob - What I meant by inline iteration was the statement <code>return {&#39;foos&#39;:[foo.get() for foo in self.foos]}</code>. Normally I&#39;ve done <code>for</code> loops as <code>for x in coll: x.get()], but </code>return {&#39;foos&#39;:[for foo in self.foos: foo.get()]}` is not valid python. Its one of these language specific nuances that is why I made the original post, as I need to alter how you think about common programming tasks. Thanks, again."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 2, "last_activity_date": 1459974778, "last_edit_date": 1459974778, "creation_date": 1459973915, "answer_id": 36461506, "question_id": 36461382, "link": "https://stackoverflow.com/questions/36461382/implicit-iteration-through-python-dictionary-elements/36461506#36461506", "title": "Implicit Iteration through Python dictionary elements", "body": "<p>This returns the result of <code>foo.get()</code> in the return value of bar.get(). Is this what you are asking for?</p>\n\n<pre><code>class bar:\n    ...\n    def get(self):\n        return {'foos':[foo.get() for foo in self.foos]}\n</code></pre>\n\n<p>Breaking down the <code>return</code> statement,</p>\n\n<pre><code>return (            # you know what this keyword does\n    {               # create a dict\n        'foos':     # with a key of \"foos\",\n        [           # and a value that is a list\n                    # (in this case, built from a list comprehension)\n            x.get() # each element is the result of calling .get()\n            for x in self.foos  # on each element of the \"foos\" list\n        ]           # end of list comprehension\n    }               # end of dict\n)                   # end of return expression\n</code></pre>\n\n<p>So, the return statement returns a <code>dict</code> with exactly one key-value pair. The key is the literal string <code>\"foos\"</code>. The value is a list composed of the result of calling <code>.get()</code> on each of the members of the <code>self.foos</code> list. (I changed the name of the loop variable and added parentheses to make life less confusing.)</p>\n\n<p>And here is the result:</p>\n\n<pre><code>{'x': 1, 'z': 3, 'y': 2}\n{'x': 4, 'z': 6, 'y': 5}\n{'foos': [{'x': 1, 'z': 3, 'y': 2}, {'x': 4, 'z': 6, 'y': 5}]}\n</code></pre>\n\n<p>A perfectly equivalent implementation of <code>bar.get()</code> could use an explicit <code>for</code> loop, as shown below. I only use the list comprehension because I find that code easier to read. If you find the below easier, use it instead.</p>\n\n<pre><code>def get(self):\n    result = []\n    for x in self.foos:\n        result.append(x.get())\n    return result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "is_accepted": false, "score": 0, "last_activity_date": 1459975158, "creation_date": 1459975158, "answer_id": 36461893, "question_id": 36461382, "link": "https://stackoverflow.com/questions/36461382/implicit-iteration-through-python-dictionary-elements/36461893#36461893", "title": "Implicit Iteration through Python dictionary elements", "body": "<p>If you are needing to use foo objects like lists, the best idea I can give you is to make foo iterable, this can easily be done like this:</p>\n\n<pre><code>class foo(object):\n    def __iter__(self):\n        for item in [self.x, self.y, self.z]:\n            yield item\n</code></pre>\n\n<p>This will then allow you to say things like <code>list(foo)</code></p>\n\n<p>when you need to convert an iterable object to JSON. You can also define what items (and their order) need to be iterated over in place of <code>[self.x, self.y, self.z]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1459975171, "creation_date": 1459975171, "answer_id": 36461896, "question_id": 36461382, "link": "https://stackoverflow.com/questions/36461382/implicit-iteration-through-python-dictionary-elements/36461896#36461896", "title": "Implicit Iteration through Python dictionary elements", "body": "<p>If you want to do it functionally without an explicit loop, you can use map:</p>\n\n<pre><code>class bar:\n    def __init__(self):\n        self.foos = []\n\n    def add(self, foo):\n        self.foos.append(foo)\n\n    def get(self):\n        return {'foos': list(map(foo.get, self.foos))}\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 3667430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17186510756408297414add6227f088a?s=128&d=identicon&r=PG&f=1", "display_name": "WoodMath", "link": "https://stackoverflow.com/users/3667430/woodmath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1459975171, "creation_date": 1459973486, "last_edit_date": 1495542250, "question_id": 36461382, "link": "https://stackoverflow.com/questions/36461382/implicit-iteration-through-python-dictionary-elements", "title": "Implicit Iteration through Python dictionary elements", "body": "<p>I am trying to figure out if there is an implicit way to iterate through list elements. Example: with the list <code>someList = ['a','b','c']</code> you do not need to write a <code>for</code> loop to iterate through the list printing elements when <code>print(someList)</code> does an <em>implicit</em> iteration.</p>\n\n<p>I have the following (simplified) python code:</p>\n\n<pre><code>class foo:\n    def __init__(self):\n        self.x=None\n        self.y=None\n        self.z=None\n\n    def set(self, x, y , z):\n        self.x = x\n        self.y = y\n        self.z = z\n\n    def get(self):\n        return {'x':self.x, 'y':self.y, 'z':self.z}\n\n\nclass bar:\n    def __init__(self):\n        self.foos=[]\n    def add(self, foo):\n        self.foos.append(foo)\n    def get(self):\n        return {'foos':self.foos}\n</code></pre>\n\n<p>Which are initialized using </p>\n\n<pre><code>f = foo()\nf.set(1,2,3)\n\ng = foo()\ng.set(4,5,6)\n\n\nh = bar()\nh.add(f)\nh.add(g)\n</code></pre>\n\n<p>Then calling</p>\n\n<pre><code>print(f.get())\nprint(g.get())\nprint(h.get())\n</code></pre>\n\n<p>which gives </p>\n\n<pre><code>{'z': 3, 'x': 1, 'y': 2}\n{'z': 6, 'x': 4, 'y': 5}\n{'foos': [&lt;__main__.foo object at 0x0000000003541748&gt;, &lt;__main__.foo object at 0x000000000358C630&gt;]}\n</code></pre>\n\n<p>What I'm ultimately looking to do is return a JSON like structure or Nested dictionary such that the returns of the <code>foo.get()</code> method are included in the call to <code>bar.get()</code>.</p>\n\n<p>I realize the array doesn't contain actual <code>foo</code> objects (only references to them). </p>\n\n<p>I thought about using <strong>iterators</strong> like they were explained at <a href=\"http://anandology.com/python-practice-book/iterators.html\" rel=\"nofollow noreferrer\">http://anandology.com/python-practice-book/iterators.html</a> . The problem with the example is that the items to be iterated over must be defined <em>within</em> the datastructure (i.e <code>foo</code>). The problem with including the iterator in the <code>bar</code> class is that <code>foos</code> list may not be the only collection to iterate over: I could have added collection <code>foos2</code> (but did not for simplicity)</p>\n\n<p>I considered the solution at <a href=\"https://stackoverflow.com/questions/14692690/access-python-nested-dictionary-items-via-a-list-of-keys\">Access nested dictionary items via a list of keys?</a> , but the <code>pprint</code> gives me something similar to my own code. I am also not certain use of the <code>reduce</code> function would apply to my situation.</p>\n\n<p>I also thought about doing <strong>operator overloading</strong> on the <code>print</code> function, but I'm not looking to get a string, just a data structure that easy to display but also navigate.</p>\n\n<p>Is there a <strong>easy way</strong> or <strong>correct way</strong> to do this? Am I using the correct data-structure (i.e. should I be using something other than nested lists)?</p>\n\n<p>I'm still new to Python so pleas be gentle.</p>\n"}, {"tags": ["python", "environment-variables"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459973322, "post_id": 36461324, "comment_id": 60534491, "body": "Did you logout and in after? Or  <code>source ~&#47;.bash_profile</code>"}, {"owner": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459973373, "post_id": 36461324, "comment_id": 60534516, "body": "@PadraicCunningham Yes. I shutdown the notebook and open it afterwards."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459973482, "post_id": 36461324, "comment_id": 60534578, "body": "Hmm, that should work."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459973707, "post_id": 36461324, "comment_id": 60534725, "body": "Try logout. If you open the notebook from your window manager but it hasn&#39;t been restarted, you are still using the old environment."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459973743, "post_id": 36461324, "comment_id": 60534750, "body": "@tdelaney, they have logged out and back in so that should not be the issue no?"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459973784, "post_id": 36461324, "comment_id": 60534780, "body": "@PadraicCunningham I think OP meant that s/he shut down the IPython Notebook and restarted it, not the notebook computer..."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459974026, "post_id": 36461324, "comment_id": 60534927, "body": "@MattDMo, ah ok, I asked if they had logged out, when I saw yes I presumed they had :)"}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459973743, "post_id": 36461356, "comment_id": 60534749, "body": "@PadraicCunningham I haven&#39;t tried creating <code>.env</code>.  It worked out. I&#39;m not sure why the <code>bash_profile</code> didn&#39;t work."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "edited": false, "score": 0, "creation_date": 1459973815, "post_id": 36461356, "comment_id": 60534803, "body": "@lizzie, I thought  you added to <code>~&#47;.bash_profille</code>  as per your question and comment?"}, {"owner": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459973920, "post_id": 36461356, "comment_id": 60534873, "body": "@PadraicCunningham I did add to my bash_profile. What I didn&#39;t have was the <code>.env</code> file."}, {"owner": {"reputation": 2797, "user_id": 5815127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d9591ca6b832b53f2f57f797502f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Till", "link": "https://stackoverflow.com/users/5815127/till"}, "reply_to_user": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "edited": false, "score": 0, "creation_date": 1459974011, "post_id": 36461356, "comment_id": 60534917, "body": "@lizzie the <code>.env</code> or the <code>bash_profile</code> work the same. You just have to source it somehow. But usually it is good to have a <code>.env</code> at the root of your project."}, {"owner": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "edited": false, "score": 0, "creation_date": 1459974052, "post_id": 36461356, "comment_id": 60534945, "body": "@Till Great to know!"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "edited": false, "score": 0, "creation_date": 1459974155, "post_id": 36461356, "comment_id": 60535004, "body": "@lizzie, you must not have  actually logged out, whatever is in <code>.profile</code> would have been executed on login and when you restarted a shell your .bash_profile would have run so there is no reason I know of that .env would work when the others didn&#39;t unless of course you did not do what I asked in my original comment"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "reply_to_user": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "edited": false, "score": 0, "creation_date": 1459975072, "post_id": 36461356, "comment_id": 60535500, "body": "@lizzie ... are you really using <code>bash</code>? My linux mint uses <code>dash</code> and <code>dash</code> uses .profile not .bash_profile. <code>ls -l &#47;bin&#47;sh</code> should tell you."}, {"owner": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1459975251, "post_id": 36461356, "comment_id": 60535628, "body": "@tdelaney the output from <code>ls -l &#47;bin&#47;sh</code> says wheel. I&#39;m using zshell AFAIK."}, {"owner": {"reputation": 2797, "user_id": 5815127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d9591ca6b832b53f2f57f797502f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Till", "link": "https://stackoverflow.com/users/5815127/till"}, "edited": false, "score": 0, "creation_date": 1459975521, "post_id": 36461356, "comment_id": 60535776, "body": "There is a link about loading <code>.bash_profile</code> with <code>zsh</code> : <a href=\"http://stackoverflow.com/questions/23233603/how-to-load-bash-profile-when-entering-bash-from-within-zsh\" title=\"how to load bash profile when entering bash from within zsh\">stackoverflow.com/questions/23233603/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2797, "user_id": 5815127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d9591ca6b832b53f2f57f797502f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Till", "link": "https://stackoverflow.com/users/5815127/till"}, "is_accepted": false, "score": 1, "last_activity_date": 1459973401, "creation_date": 1459973401, "answer_id": 36461356, "question_id": 36461324, "link": "https://stackoverflow.com/questions/36461324/is-there-a-way-to-not-expose-credentials-in-the-code/36461356#36461356", "title": "Is there a way to not expose credentials in the code?", "body": "<p>Try to create a file <code>.env</code> somewhere with in it :</p>\n\n<pre><code>export SNOW_USER=\"snow_user\"\nexport PASSWORD=\"password\"\n</code></pre>\n\n<p>and then source it :</p>\n\n<pre><code>source .env\n</code></pre>\n\n<p>Or just source you <code>bash_profile</code> file :</p>\n\n<pre><code>source ~/.bash_profile\n</code></pre>\n"}], "owner": {"reputation": 596, "user_id": 3561527, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/g0F5B.jpg?s=128&g=1", "display_name": "lizzie", "link": "https://stackoverflow.com/users/3561527/lizzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459973401, "creation_date": 1459973270, "question_id": 36461324, "link": "https://stackoverflow.com/questions/36461324/is-there-a-way-to-not-expose-credentials-in-the-code", "title": "Is there a way to not expose credentials in the code?", "body": "<p>I've been using ipython notebook and there are 2 information (<code>SNOW_USER</code> and <code>PASSWORD</code>) that I need to pass so I can connect to the database. I don't want to expose it for security reasons. </p>\n\n<p>I tried to set as <code>ENV VAR</code> (environmental variables) saving it on my <code>.bash_profile</code> and also on <code>.profile</code> using <code>export SNOW_USER='abc'</code> but it doesn't seem ipython can find it.</p>\n\n<pre><code>import os\nprint os.environ['SNOW_USER']\n</code></pre>\n\n<p>I also tried:</p>\n\n<pre><code>%env\n</code></pre>\n\n<p>But the variables are not showing there either.</p>\n\n<p>Any thoughts on how to do it?</p>\n"}, {"tags": ["python", "django", "django-urls"], "answers": [{"tags": [], "owner": {"reputation": 11236, "user_id": 2689986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3Y7wX.jpg?s=128&g=1", "display_name": "shad0w_wa1k3r", "link": "https://stackoverflow.com/users/2689986/shad0w-wa1k3r"}, "is_accepted": false, "score": 1, "last_activity_date": 1459974531, "creation_date": 1459974531, "answer_id": 36461706, "question_id": 36461306, "link": "https://stackoverflow.com/questions/36461306/django-with-urls-py-importing-app/36461706#36461706", "title": "Django with urls.py importing app", "body": "<p>It seems you have added <code>dorna</code> twice. You probably don't have to do that as can be seen from your <code>'^admin/'</code> route.</p>\n\n<p>Thus, <code>include('dorna.rest.v1.urls')</code> instead of <code>include('dorna.dorna.rest.v1.urls')</code> should work.</p>\n"}, {"comments": [{"owner": {"reputation": 502, "user_id": 1967667, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/717c8f935c00c2bc5a8c8318d23c21fa?s=128&d=identicon&r=PG", "display_name": "DoberDog", "link": "https://stackoverflow.com/users/1967667/doberdog"}, "edited": false, "score": 0, "creation_date": 1460035949, "post_id": 36462104, "comment_id": 60565591, "body": "This was part of the problem; I forgot to put in the initial situation before making the screenshot. Sorry.  The main problema was that i delete the <b>initial</b>.pyc in all the proyect."}], "tags": [], "owner": {"reputation": 4268, "user_id": 3896300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sXS6P.png?s=128&g=1", "display_name": "ahmed", "link": "https://stackoverflow.com/users/3896300/ahmed"}, "is_accepted": true, "score": 1, "last_activity_date": 1459975922, "creation_date": 1459975922, "answer_id": 36462104, "question_id": 36461306, "link": "https://stackoverflow.com/questions/36461306/django-with-urls-py-importing-app/36462104#36462104", "title": "Django with urls.py importing app", "body": "<p>The <code>urls.py</code> seem to be inside dorona folder, try to import rest directly:</p>\n\n<pre><code>(r'^v1/', include('rest.v1.urls')),\n</code></pre>\n"}], "owner": {"reputation": 502, "user_id": 1967667, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/717c8f935c00c2bc5a8c8318d23c21fa?s=128&d=identicon&r=PG", "display_name": "DoberDog", "link": "https://stackoverflow.com/users/1967667/doberdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 36462104, "answer_count": 2, "score": 0, "last_activity_date": 1459975922, "creation_date": 1459973196, "question_id": 36461306, "link": "https://stackoverflow.com/questions/36461306/django-with-urls-py-importing-app", "title": "Django with urls.py importing app", "body": "<p>My project was running; When cleaning .pyc, he stopped recognizing routes apps I created within it.\nThe directory structure is as follows and In the main urls.py, I have the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/piJCQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/piJCQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now I released the following error:</p>\n\n<pre><code>No module named dorna.rest.v1.urls\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "scikit-learn"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2760103"}, "edited": false, "score": 0, "creation_date": 1459976745, "post_id": 36461421, "comment_id": 60536544, "body": "what is each validation_score, is the default score defined as something particular?"}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1459976772, "post_id": 36461421, "comment_id": 60536562, "body": "by default it is accuracy"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2760103"}, "edited": false, "score": 0, "creation_date": 1459977043, "post_id": 36461421, "comment_id": 60536728, "body": "thanks @Lejlot, how can I switch that to mean average precision or something else?"}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1459977088, "post_id": 36461421, "comment_id": 60536759, "body": "read the docs for GridSearchCV, there is a <code>scoring</code> parameter"}], "tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": false, "score": 1, "last_activity_date": 1459973626, "creation_date": 1459973626, "answer_id": 36461421, "question_id": 36461289, "link": "https://stackoverflow.com/questions/36461289/how-to-get-accuracy-and-f1-score-from-each-fold-in-gridsearchcv/36461421#36461421", "title": "How to get accuracy and f1-score from each fold in GridSearchCV?", "body": "<p>Scores are located in <code>grid_scores_</code>, in particular in <code>cv_validation_scores</code>:</p>\n\n<blockquote>\n  <p><strong>grid_scores_</strong> : list of named tuples</p>\n  \n  <p>Contains scores for all parameter\n  combinations in param_grid. Each entry corresponds to one parameter\n  setting. Each named tuple has the attributes: </p>\n  \n  <ul>\n  <li>parameters, a dict of\n  parameter settings </li>\n  <li>mean_validation_score, the mean score over the\n  cross-validation folds </li>\n  <li>cv_validation_scores, the list of scores for\n  each fold</li>\n  </ul>\n</blockquote>\n\n<p>However you will not get two metrics. The whole point of such optimizers is to maximize some single metric/scorer function, thus only this thing is stored inside of an object. In order to get such, you will need to run it twice, each time with different score function.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2760103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459973626, "creation_date": 1459973100, "question_id": 36461289, "link": "https://stackoverflow.com/questions/36461289/how-to-get-accuracy-and-f1-score-from-each-fold-in-gridsearchcv", "title": "How to get accuracy and f1-score from each fold in GridSearchCV?", "body": "<p>I'm using the GridSearchCV object to train a classifier. I setup 5-fold validation parameter search and after calling fit(), I need to see the metrics for each fold's validation set, namely accuracy and f1-score. How can I do this?</p>\n\n<pre><code> clf = GridSearchCV(pipeline,\n                        param_grid=param_grid, \n                        n_jobs=1, \n                        cv=5,\n                        compute_training_score=True)\n</code></pre>\n\n<p>Note: </p>\n\n<ul>\n<li>I don't have a separate testing set to use so I can't just take the result of predict and do it with the standard metrics functions. </li>\n<li>using the clf.best_scores_ doesn't give the information I want, only the mean_validation_score and its standard deviation.</li>\n</ul>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1459973163, "post_id": 36461268, "comment_id": 60534406, "body": "I think what you want is a list"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 4, "creation_date": 1459973180, "post_id": 36461268, "comment_id": 60534424, "body": "Of course it does, you are adding the same key with a new value.  You also cannot have the output you desire, if you want multiple values per key use a list as the value and append each new dict"}, {"owner": {"reputation": 73, "user_id": 1492188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f98895a84777ea103279ba85139d62e7?s=128&d=identicon&r=PG", "display_name": "sat0408", "link": "https://stackoverflow.com/users/1492188/sat0408"}, "edited": false, "score": 0, "creation_date": 1459973784, "post_id": 36461268, "comment_id": 60534779, "body": "Thanks for the reply..i modified it as a list to get it working"}, {"owner": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "edited": false, "score": 0, "creation_date": 1459974562, "post_id": 36461268, "comment_id": 60535219, "body": "Output as <code>{&#39;bush_mod&#39;: {&#39;ana1_lin_001&#39;: {}},{&#39;ana2_lin_001&#39;: {}, &#39;ana2_lin_002&#39;: {}}}</code> is not valid in syntax."}], "answers": [{"tags": [], "owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "is_accepted": false, "score": -2, "last_activity_date": 1459973214, "creation_date": 1459973214, "answer_id": 36461308, "question_id": 36461268, "link": "https://stackoverflow.com/questions/36461268/append-a-dict-in-a-nested-dict-python/36461308#36461308", "title": "Append a dict in a nested dict python", "body": "<p>you need to use distinct keys for each element in the dict t... it is overriding because you used 'bush_mod' twice...</p>\n\n<p>you need to make t['bush_mod']= [] then append that list with things.</p>\n\n<pre><code>t['bush_mod'] = []\nt['bush_mod'].append(ana1)\nt['bush_mod'].append(ana2)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 1492188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f98895a84777ea103279ba85139d62e7?s=128&d=identicon&r=PG", "display_name": "sat0408", "link": "https://stackoverflow.com/users/1492188/sat0408"}, "edited": false, "score": 0, "creation_date": 1459974501, "post_id": 36461557, "comment_id": 60535188, "body": "This is exactly what i was looking for. Now i need not modify the rest of my code ;) Thank you"}], "tags": [], "owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1459974470, "last_edit_date": 1459974470, "creation_date": 1459974071, "answer_id": 36461557, "question_id": 36461268, "link": "https://stackoverflow.com/questions/36461268/append-a-dict-in-a-nested-dict-python/36461557#36461557", "title": "Append a dict in a nested dict python", "body": "<p>If you want to stick to nested dictionaries I think <code>dict.update</code> might be an option:</p>\n\n<pre><code>t = {}\nt['bush_mod']={}\n\nana1 = {}\nana1['ana1_lin_001']={}\n\nana2 = {}\nana2['ana2_lin_001'] = {}\nana2['ana2_lin_002'] = {}\n\nt['bush_mod'].update(ana1)\nt['bush_mod'].update(ana2)\n</code></pre>\n\n<p>Such that <code>t</code> is:</p>\n\n<pre><code>{'bush_mod': {'ana1_lin_001': {}, 'ana2_lin_001': {}, 'ana2_lin_002': {}}}\n</code></pre>\n\n<p><code>dict.update</code> here adds the keys-value pairs from <code>ana1</code> and <code>ana2</code> to the dictionary <code>t['bush_mod</code>]`</p>\n"}], "owner": {"reputation": 73, "user_id": 1492188, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f98895a84777ea103279ba85139d62e7?s=128&d=identicon&r=PG", "display_name": "sat0408", "link": "https://stackoverflow.com/users/1492188/sat0408"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 36461557, "answer_count": 2, "score": -3, "last_activity_date": 1459974470, "creation_date": 1459973031, "question_id": 36461268, "link": "https://stackoverflow.com/questions/36461268/append-a-dict-in-a-nested-dict-python", "title": "Append a dict in a nested dict python", "body": "<p>I would like to have a dictionary appended with new dictionaries.</p>\n\n<pre><code>t = {}\nt['bush_mod']={} # Toplevel\nana1 = {}\nana1['ana1_lin_001']={}\nt['bush_mod'] = ana1 # Add below Toplevel\n\nana2 = {}\nana2['ana2_lin_001'] = {}\nana2['ana2_lin_002'] = {}\n\nt['bush_mod'] = ana2 # Add below Toplevel\n</code></pre>\n\n<p>When I add <code>ana2</code> the dictionary <code>t</code> gets overwritten which i do not want.</p>\n\n<pre><code>OUT: {'bush_mod': {'ana2_lin_001': {}, 'ana2_lin_002': {}}}\n</code></pre>\n\n<p>I wanted to have <code>ana2</code> as the second dict (appended) below the Toplevel.</p>\n\n<pre><code>OUT: {'bush_mod': {'ana1_lin_001': {}},{'ana2_lin_001': {}, 'ana2_lin_002': {}}}\n</code></pre>\n\n<p>It would really be helpful if someone could help me with the syntax.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "loops", "if-statement", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 2170, "user_id": 5724920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75ab4d29ed9a0f64acc2b832344100bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/5724920/jason"}, "edited": false, "score": 0, "creation_date": 1459973389, "post_id": 36461250, "comment_id": 60534526, "body": "<code>c = + 2</code> is not valid Python, I also recommend you start using things like <code>x+=1</code> instead of <code>x = x + 1</code>."}, {"owner": {"reputation": 1774, "user_id": 3861449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fc5cffc01b789b8262766e32eddbcfd7?s=128&d=identicon&r=PG&f=1", "display_name": "zephyr", "link": "https://stackoverflow.com/users/3861449/zephyr"}, "edited": false, "score": 5, "creation_date": 1459973541, "post_id": 36461250, "comment_id": 60534615, "body": "This post really needs to be refined so that you&#39;re presenting a clear problem and question. As it stands, it seems more like rambling about what you&#39;re working on."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6166370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972b5bb5dfc1ba0f488c1feff1d32c3e?s=128&d=identicon&r=PG&f=1", "display_name": "MrT", "link": "https://stackoverflow.com/users/6166370/mrt"}, "edited": false, "score": 0, "creation_date": 1460010757, "post_id": 36461485, "comment_id": 60547708, "body": "Perfect reference, i added my code inside my loop and moved everything else outside."}, {"owner": {"reputation": 3, "user_id": 6166370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972b5bb5dfc1ba0f488c1feff1d32c3e?s=128&d=identicon&r=PG&f=1", "display_name": "MrT", "link": "https://stackoverflow.com/users/6166370/mrt"}, "edited": false, "score": 0, "creation_date": 1460011680, "post_id": 36461485, "comment_id": 60548207, "body": "Code works, And for everyone that wanted to know what i was trying to achieve is this.    a = 1     while a &lt; 20:         if a == 1:             logging.debug(line.split(PID_ANDROID)[a])             ip = os.popen(adbInput + line.split(PID_ANDROID)[a])             a = + 2             ip.close()             ip = os.popen(adbTap + &#39;56 584&#39;)  # tap scan             ip.close()             time.sleep(3)             grabBox90()          if a == 20:             break"}], "tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": true, "score": 0, "last_activity_date": 1459974596, "last_edit_date": 1459974596, "creation_date": 1459973848, "answer_id": 36461485, "question_id": 36461250, "link": "https://stackoverflow.com/questions/36461250/while-loop-calling-array-outside/36461485#36461485", "title": "while loop calling array outside", "body": "<p>It looks as if you should use a for loop with an initial index of 1 and a step size of 2. Alternatively, use the explicit debug statement for value 1 and then loop over the rest, starting at 3, to avoid the if test. If the remainder of the code is to increment by 1 instead of 2, then that allows you to do the initial skip properly while still having the loop.</p>\n\n<p>Instead of</p>\n\n<pre><code>c = 1\n#do my stuff\nwhile c &lt; 20:\n    if c == 1:\n        logging.debug(line.split(PID_ANDROID)[c])\n        c = + 2\n    else:\n        logging.debug('Moving on to a refresh')\n    # You do not incremennt c\n    # c += 2 should go here to increment every time\n</code></pre>\n\n<p>Python 2</p>\n\n<pre><code>for i in xrange(1,20,2):\n  # do your processing\n</code></pre>\n\n<p>Python 3</p>\n\n<pre><code>for i in range(1,20,2):\n  # do you processing\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1459974901, "post_id": 36461595, "comment_id": 60535403, "body": "Since he explicitly debugs on <code>c==1</code> and skips all the rest, this is not what he is asking for."}], "tags": [], "owner": {"reputation": 2435, "user_id": 1231055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k7x3R.png?s=128&g=1", "display_name": "Brad Campbell", "link": "https://stackoverflow.com/users/1231055/brad-campbell"}, "is_accepted": false, "score": 0, "last_activity_date": 1459974215, "creation_date": 1459974215, "answer_id": 36461595, "question_id": 36461250, "link": "https://stackoverflow.com/questions/36461250/while-loop-calling-array-outside/36461595#36461595", "title": "while loop calling array outside", "body": "<p>If you simply want to log every entry in <code>line</code> you could do:</p>\n\n<pre><code>entries = line.split(PID_ANDROID)\nfor e in entries[::2]:  # take every other element\n    logging.debug(e)\n</code></pre>\n\n<p>Iterating over the entries is \"more pythonic\".</p>\n"}], "owner": {"reputation": 3, "user_id": 6166370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972b5bb5dfc1ba0f488c1feff1d32c3e?s=128&d=identicon&r=PG&f=1", "display_name": "MrT", "link": "https://stackoverflow.com/users/6166370/mrt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1459987837, "accepted_answer_id": 36461485, "answer_count": 2, "score": -4, "last_activity_date": 1460001074, "creation_date": 1459972974, "last_edit_date": 1460001074, "question_id": 36461250, "link": "https://stackoverflow.com/questions/36461250/while-loop-calling-array-outside", "closed_reason": "Needs details or clarity", "title": "while loop calling array outside", "body": "<p>Ill start again and thank you all for replying.</p>\n\n<p>I have a log file, and i take the entry and remove all rubbish from it.\nthe array or list i am left with is this</p>\n\n<pre><code>23\n23.23.23.23\n45\n45.45.45.45\n100\n34.34.54.13\n</code></pre>\n\n<p>how i call each line i want is with this.</p>\n\n<pre><code>a = 1\nwhile a &lt; 18:\n    a = a + 2\n    #logging.debug(line.split(PID_ANDROID)[a])\n    countIP = a\n    trySomething()\n\n    if a == 20:\n        break\n</code></pre>\n\n<p>but i have to do things after i call it.\ni want to be able to use the first entry,</p>\n\n<pre><code>&gt; do something \n&gt; see if something is happening\n&gt; if its not goto 3rd entry\n&gt; try the same thing again.\n</code></pre>\n\n<p>this is what I am stuck on.\nbecause when I call it from inside something else and I use global to store.\npython tells me I cant us a str or turp. or with code below gives me a continues output of everything in the list.</p>\n\n<p>atm i have this code.</p>\n\n<pre><code>def trySomething():\nglobal countIP\nglobal LOG_SPLITER\n#logging.debug('Processing Number: %s' % (countIP,))\nlogging.debug(LOG_SPLITER.split(PID_ANDROID)[countIP])\ntime.sleep(.5)\nclearScreen()\n#grabBox90()\n#lineGoto()\n</code></pre>\n\n<p>my question is.\nhow can i do the loop, and pull out only one at a time to do something with it, and when i get to a finished loop goto the next one?</p>\n"}, {"tags": ["python", "windows", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 23416, "user_id": 3877338, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/300539394aa55b738b51e6769cca9b3e?s=128&d=identicon&r=PG&f=1", "display_name": "JohnE", "link": "https://stackoverflow.com/users/3877338/johne"}, "edited": false, "score": 1, "creation_date": 1459973668, "post_id": 36461222, "comment_id": 60534704, "body": "you probably want <code>expanding()</code> rather than <code>rolling()</code> and also need to sort to get things in ascending date order"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6168781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65f861e59fac5b13b49d7843fcde4f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Poly-AAAA", "link": "https://stackoverflow.com/users/6168781/poly-aaaa"}, "edited": false, "score": 1, "creation_date": 1459973634, "post_id": 36461394, "comment_id": 60534675, "body": "I want the number of days of rolling to be dynamic based on the number of previous records. So on 4-4 should have 5 rows, on 4-1 should use 4 rows, on 3-31 should use 3 rows."}, {"owner": {"reputation": 23416, "user_id": 3877338, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/300539394aa55b738b51e6769cca9b3e?s=128&d=identicon&r=PG&f=1", "display_name": "JohnE", "link": "https://stackoverflow.com/users/3877338/johne"}, "edited": false, "score": 1, "creation_date": 1459974119, "post_id": 36461394, "comment_id": 60534986, "body": "also need to sort b/c dates are currently reversed compared to what OP is asking for.  expanding only goes in one direction, I believe."}, {"owner": {"reputation": 23, "user_id": 6168781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65f861e59fac5b13b49d7843fcde4f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Poly-AAAA", "link": "https://stackoverflow.com/users/6168781/poly-aaaa"}, "edited": false, "score": 0, "creation_date": 1459974428, "post_id": 36461394, "comment_id": 60535149, "body": "Buzz light year to the rescue, didn&#39;t realize there was such a simple built in functionality, thank you."}], "tags": [], "owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "is_accepted": true, "score": 3, "last_activity_date": 1459973805, "last_edit_date": 1459973805, "creation_date": 1459973537, "answer_id": 36461394, "question_id": 36461222, "link": "https://stackoverflow.com/questions/36461222/pandas-rolling-std-with-window-using-all-previous-row-counts/36461394#36461394", "title": "Pandas Rolling_std with Window using all previous row counts", "body": "<p>With pandas 0.18, use the <code>Rolling</code> object. This is a 2-day rolling std:</p>\n\n<pre><code>df.rolling(2).std()\n</code></pre>\n\n<p>With prior version, the call would be:</p>\n\n<pre><code>df.rolling_std(2)\n</code></pre>\n\n<p>If the goal is to get the function applied from the beginning of the DataFrame down to the current line, then the object to use is <code>Expanding</code>:</p>\n\n<pre><code>df.expanding().std()\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6168781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65f861e59fac5b13b49d7843fcde4f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Poly-AAAA", "link": "https://stackoverflow.com/users/6168781/poly-aaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 1, "accepted_answer_id": 36461394, "answer_count": 1, "score": 2, "last_activity_date": 1459973805, "creation_date": 1459972866, "last_edit_date": 1459973273, "question_id": 36461222, "link": "https://stackoverflow.com/questions/36461222/pandas-rolling-std-with-window-using-all-previous-row-counts", "title": "Pandas Rolling_std with Window using all previous row counts", "body": "<p>I want to calculate the rolling_std for daily returns, using all records previous to the current row. How do i set the window to use the rolling count of the rows? For example: on <code>04-04</code>. I want to use all rows to calculate, on <code>04-01</code> I want to use all rows with date less than <code>04-01</code>. </p>\n\n<pre><code>Date        Daily       Std\n4/4/2016    -0.003087335    ?\n4/1/2016    0.006480923 ?\n3/31/2016   -0.001553158    ?\n3/30/2016   0.004351748 ?\n3/29/2016   0.009234222 ?\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "data-modeling", "feature-selection"], "answers": [{"comments": [{"owner": {"reputation": 1465, "user_id": 5615601, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4623daa5216184a4547d87c4f9b46682?s=128&d=identicon&r=PG&f=1", "display_name": "Uasthana", "link": "https://stackoverflow.com/users/5615601/uasthana"}, "edited": false, "score": 0, "creation_date": 1460035926, "post_id": 36461690, "comment_id": 60565575, "body": "That worked, can&#39;t believe how simple it was. Thank you so much!"}], "tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": true, "score": 2, "last_activity_date": 1459974480, "creation_date": 1459974480, "answer_id": 36461690, "question_id": 36461214, "link": "https://stackoverflow.com/questions/36461214/prediction-after-feature-selection-python/36461690#36461690", "title": "Prediction after feature selection python", "body": "<p>You should transform your prediction matrix through your feature selection too. So somewhere in your code you do</p>\n\n<pre><code>df = sel.fit_transform(X)\n</code></pre>\n\n<p>and before predicting</p>\n\n<pre><code>df_prediction = sel.transform(X_prediction)\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 5615601, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4623daa5216184a4547d87c4f9b46682?s=128&d=identicon&r=PG&f=1", "display_name": "Uasthana", "link": "https://stackoverflow.com/users/5615601/uasthana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 0, "accepted_answer_id": 36461690, "answer_count": 1, "score": 2, "last_activity_date": 1459974810, "creation_date": 1459972837, "last_edit_date": 1459974810, "question_id": 36461214, "link": "https://stackoverflow.com/questions/36461214/prediction-after-feature-selection-python", "title": "Prediction after feature selection python", "body": "<p>I am trying to build a predictive model using  python. The training and test data set  has over 400 variables. On using feature selection on training data set the number of variables are reduced to 180</p>\n\n<pre><code>from sklearn.feature_selection import VarianceThreshold\nsel = VarianceThreshold(threshold = .9)\n</code></pre>\n\n<p>and then I am training  a model using gradient boosting algorithm achieveing .84 AUC accuracy in cross validation.</p>\n\n<pre><code>from sklearn import ensemble\nfrom sklearn.cross_validation import train_test_split \nfrom sklearn.metrics import roc_auc_score as auc \ndf_fit, df_eval, y_fit, y_eval= train_test_split( df, y, test_size=0.2, random_state=1 )\nboosting_model = ensemble.GradientBoostingClassifier(n_estimators=100, max_depth=3, \n                                                    min_samples_leaf=100, learning_rate=0.1, \n                                                    subsample=0.5, random_state=1)\nboosting_model.fit(df_fit, y_fit)\n</code></pre>\n\n<p>But when I am trying to use this model to predict for prediction data set it is giving me error</p>\n\n<pre><code>predict_target = boosting_model.predict(df_prediction)\nError: Number of variables in prediction data set 'df_prediction' does not match the number of variables in the model\n</code></pre>\n\n<p>Which makes sense because total variables in testing data remains to be over 400. \nMy question is there anyway to bypass this problem and keep using feature selection for predictive modeling. Because if I remove it the accuracy of model drops down to .5 which is very poor.\nThanks! </p>\n"}, {"tags": ["python", "import", "stanford-nlp", "fractions"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459973104, "post_id": 36461153, "comment_id": 60534375, "body": "Do you have the right <code>progressbar</code> module, and did you make sure not to name any of your own files <code>progressbar.py</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": true, "score": 0, "last_activity_date": 1459974656, "creation_date": 1459974656, "answer_id": 36461744, "question_id": 36461153, "link": "https://stackoverflow.com/questions/36461153/ipython-from-progressbar-import-progressbar-error/36461744#36461744", "title": "Ipython from progressbar import ProgressBar Error", "body": "<p>The Github repo you linked to contains a file <code>progressbar.py</code>, which is an ancient (2006-era) version of <a href=\"https://pypi.python.org/pypi/progressbar\" rel=\"nofollow\"><code>progressbar</code></a>. <code>progressbar.py</code> contains a <code>Fraction</code> class, while the <code>progressbar</code> module does not. So, you'll need to change your code to point to the <code>progressbar.py</code> file from the Standford NLP Github repo.</p>\n"}], "owner": {"reputation": 13, "user_id": 6070984, "user_type": "registered", "profile_image": "https://graph.facebook.com/1000549576678863/picture?type=large", "display_name": "\u674e\u54c1\u4fcb", "link": "https://stackoverflow.com/users/6070984/%e6%9d%8e%e5%93%81%e4%bf%8b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 36461744, "answer_count": 1, "score": 0, "last_activity_date": 1459974656, "creation_date": 1459972639, "last_edit_date": 1459974324, "question_id": 36461153, "link": "https://stackoverflow.com/questions/36461153/ipython-from-progressbar-import-progressbar-error", "title": "Ipython from progressbar import ProgressBar Error", "body": "<p>I want to do something according to <a href=\"https://github.com/dasmith/stanford-corenlp-python\" rel=\"nofollow\">this github code</a>.</p>\n\n<pre><code>from progressbar import Progressbar, Fraction\nImportError: cannot import name 'Fraction'\n</code></pre>\n\n<p>I use ipython 2 or 3</p>\n"}, {"tags": ["python", "regex", "newline", "linefeed", "lf"], "answers": [{"comments": [{"owner": {"reputation": 2170, "user_id": 3479125, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/tcL0h.png?s=128&g=1", "display_name": "Ivan Borshchov", "link": "https://stackoverflow.com/users/3479125/ivan-borshchov"}, "edited": false, "score": 0, "creation_date": 1459972692, "post_id": 36461149, "comment_id": 60534150, "body": "Thanks! Yes <code>.</code> not matched <code>\\n</code> by default"}], "tags": [], "owner": {"reputation": 1889, "user_id": 1477364, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ded6e69660b0493583d054a8861fdefb?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/1477364/travis"}, "is_accepted": true, "score": 3, "last_activity_date": 1459972618, "creation_date": 1459972618, "answer_id": 36461149, "question_id": 36461090, "link": "https://stackoverflow.com/questions/36461090/python-regexp-n-issue/36461149#36461149", "title": "Python regexp \\n issue", "body": "<p>You need the <a href=\"https://docs.python.org/2/library/re.html#re.DOTALL\" rel=\"nofollow\">DOTALL</a> flag:</p>\n\n<pre><code>import re\nre.search(r'(.*?)\\r\\n(.+?)\\r\\n', 'aaa\\r\\r\\nb\\nc\\r\\n', flags=re.DOTALL).groups()\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>('aaa\\r', 'b\\nc')\n</code></pre>\n"}], "owner": {"reputation": 2170, "user_id": 3479125, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/tcL0h.png?s=128&g=1", "display_name": "Ivan Borshchov", "link": "https://stackoverflow.com/users/3479125/ivan-borshchov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 36461149, "answer_count": 1, "score": 0, "last_activity_date": 1459972647, "creation_date": 1459972376, "question_id": 36461090, "link": "https://stackoverflow.com/questions/36461090/python-regexp-n-issue", "title": "Python regexp \\n issue", "body": "<p>This searched ok:</p>\n\n<pre><code>&gt;&gt;&gt; re.search(r'(.*?)\\r\\n(.+?)\\r\\n', 'aaa\\r\\r\\nbbb\\r\\n').groups()\n('aaa\\r', 'bbb')\n</code></pre>\n\n<p>But when I replace one of three <code>b</code> to <code>\\n</code> it not searched:</p>\n\n<pre><code>&gt;&gt;&gt; re.search(r'(.*?)\\r\\n(.+?)\\r\\n', 'aaa\\r\\r\\nb\\nc\\r\\n').groups()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'NoneType' object has no attribute 'groups'\n</code></pre>\n\n<p>But I want to parse in second case:</p>\n\n<pre><code>('aaa\\r', 'b\\nc')\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 4, "creation_date": 1460039100, "post_id": 36461054, "comment_id": 60568302, "body": "Apparently, the problem lies in the fact, that Python cannot import .so modules from .zip files (<a href=\"https://docs.python.org/2/library/zipimport.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/zipimport.html</a>). This means I need to somehow unpack the zipfile on all the workers and then add the unpack location to the sys.path on all the workers. I&#39;ll try it out and see how it goes."}, {"owner": {"reputation": 2682, "user_id": 234233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1L2Zj.jpg?s=128&g=1", "display_name": "ramhiser", "link": "https://stackoverflow.com/users/234233/ramhiser"}, "edited": false, "score": 0, "creation_date": 1475103720, "post_id": 36461054, "comment_id": 66813888, "body": "I&#39;m having a similar issue. How did you resolve the problem?"}, {"owner": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "reply_to_user": {"reputation": 2682, "user_id": 234233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1L2Zj.jpg?s=128&g=1", "display_name": "ramhiser", "link": "https://stackoverflow.com/users/234233/ramhiser"}, "edited": false, "score": 1, "creation_date": 1475137727, "post_id": 36461054, "comment_id": 66825070, "body": "In the end I have convinced the administrators of the cluster to install the dependencies on the worker machines. Another solution would be to have a volume that is mounted on all the machines where the dependencies would reside. I don&#39;t know whether anything else can be done :-\\"}, {"owner": {"reputation": 2682, "user_id": 234233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1L2Zj.jpg?s=128&g=1", "display_name": "ramhiser", "link": "https://stackoverflow.com/users/234233/ramhiser"}, "edited": false, "score": 0, "creation_date": 1475172143, "post_id": 36461054, "comment_id": 66848433, "body": "I finally got it to work. I&#39;ll post an answer below."}], "answers": [{"comments": [{"owner": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 1, "creation_date": 1459973893, "post_id": 36461276, "comment_id": 60534861, "body": "I do not quite understand how this might help me with Spark and getting the dependencies to the worker nodes. Could you elaborate a bit more please? Thanks!"}, {"owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "reply_to_user": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 0, "creation_date": 1459978508, "post_id": 36461276, "comment_id": 60537478, "body": "If you download and add numpy to your project you can add the containing folder to the sys path and import it from there. It may not be the optimal solution considering the redundancy when you know that you have numpy on the nodes already but it provides that the nodes won&#39;t need to have it pre-installed."}], "tags": [], "owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "is_accepted": false, "score": 0, "last_activity_date": 1459973053, "last_edit_date": 1495535476, "creation_date": 1459973053, "answer_id": 36461276, "question_id": 36461054, "link": "https://stackoverflow.com/questions/36461054/i-cant-seem-to-get-py-files-on-spark-to-work/36461276#36461276", "title": "I can&#39;t seem to get --py-files on Spark to work", "body": "<p>You can locate all the .pys you need and add them relatively.\nsee <a href=\"https://stackoverflow.com/questions/279237/import-a-module-from-a-relative-path\">here</a>  for this explanation:</p>\n\n<pre><code>import os, sys, inspect\n # realpath() will make your script run, even if you symlink it :)\n cmd_folder = os.path.realpath(os.path.abspath(os.path.split(inspect.getfile( inspect.currentframe() ))[0]))\n if cmd_folder not in sys.path:\n     sys.path.insert(0, cmd_folder)\n\n # use this if you want to include modules from a subfolder\n cmd_subfolder = os.path.realpath(os.path.abspath(os.path.join(os.path.split(inspect.getfile( inspect.currentframe() ))[0],\"subfolder\")))\n if cmd_subfolder not in sys.path:\n     sys.path.insert(0, cmd_subfolder)\n\n # Info:\n # cmd_folder = os.path.dirname(os.path.abspath(__file__)) # DO NOT USE __file__ !!!\n # __file__ fails if script is called in different ways on Windows\n # __file__ fails if someone does os.chdir() before\n # sys.argv[0] also fails because it doesn't not always contains the path\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 0, "creation_date": 1475240443, "post_id": 39777410, "comment_id": 66877224, "body": "did it also work with dependencies that had native code and were provided as <code>.so</code> files? I remember that I had most problems with those. Anyhow, I&#39;ll try this once I get the chance and if it&#39;ll work I&#39;ll accept it."}, {"owner": {"reputation": 2682, "user_id": 234233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1L2Zj.jpg?s=128&g=1", "display_name": "ramhiser", "link": "https://stackoverflow.com/users/234233/ramhiser"}, "reply_to_user": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 0, "creation_date": 1475241165, "post_id": 39777410, "comment_id": 66877662, "body": "Good question. I did not have any issues with <code>.so</code> files, but that may be because my dependencies are built inside of a Docker container. My Spark workers are also running inside Docker containers via Kubernetes, which gives me some level of homogeneity. I&#39;ve started a <a href=\"https://github.com/ramhiser/spark-kubernetes\" rel=\"nofollow noreferrer\">Spark + Kubernetes project</a> to standardize solutions to this and other issues I&#39;ve encountered."}, {"owner": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 3, "creation_date": 1475245168, "post_id": 39777410, "comment_id": 66880310, "body": "The cluster I was trying to run on was homogenous as far as I know. The main issue was that Python does not allow dynamic import of <code>.so</code> files, although it is possible that Spark has overcome that somehow. I&#39;ll try it out and get back to you."}, {"owner": {"reputation": 2682, "user_id": 234233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1L2Zj.jpg?s=128&g=1", "display_name": "ramhiser", "link": "https://stackoverflow.com/users/234233/ramhiser"}, "reply_to_user": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 0, "creation_date": 1475260185, "post_id": 39777410, "comment_id": 66888572, "body": "Excellent. I&#39;d like to know if it work. I know that EMR on AWS is a typical deployment model for Spark, but I&#39;m finding certain issues are a bit easier to handle via Docker + Kubernetes because of the (nearly) guaranteed homogeneity."}, {"owner": {"reputation": 801, "user_id": 3996403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ac72bc8be04e0b000025abbb143f36?s=128&d=identicon&r=PG&f=1", "display_name": "Jussi Kujala", "link": "https://stackoverflow.com/users/3996403/jussi-kujala"}, "edited": false, "score": 0, "creation_date": 1504948296, "post_id": 39777410, "comment_id": 79220341, "body": "I tried these instructions in a clean Docker environment and they didn&#39;t resolve the issue."}, {"owner": {"reputation": 581, "user_id": 1501529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9lGp3.jpg?s=128&g=1", "display_name": "pippobaudos", "link": "https://stackoverflow.com/users/1501529/pippobaudos"}, "edited": false, "score": 3, "creation_date": 1531504535, "post_id": 39777410, "comment_id": 89636738, "body": "Has anyone been able in the meantime to find a resolution to import dependencies that have .so files in Spark? Thanks"}, {"owner": {"reputation": 3439, "user_id": 1887281, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xV9qF.jpg?s=128&g=1", "display_name": "devinbost", "link": "https://stackoverflow.com/users/1887281/devinbost"}, "edited": false, "score": 0, "creation_date": 1543973798, "post_id": 39777410, "comment_id": 94108126, "body": "Does it work if you use virtualenv like I described in my detailed example here: <a href=\"https://stackoverflow.com/questions/48770263/bundling-python3-packages-for-pyspark-results-in-missing-imports/53623903#53623903\" title=\"bundling python3 packages for pyspark results in missing imports\">stackoverflow.com/questions/48770263/&hellip;</a> ?"}, {"owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "edited": false, "score": 0, "creation_date": 1545860858, "post_id": 39777410, "comment_id": 94715039, "body": "If I pass two zip files I am getting an error like <code>Exception in thread &quot;main&quot; org.apache.spark.SparkException: Cannot load main class from JAR file:&#47;Users&#47;fra&#47;Documents&#47;testSmartMobility&#47;AnalysisResult&#47;s&zwnj;&#8203;park_dist&#47;test_spark&zwnj;&#8203;_submit-0.1-deps.zip \tat org.apache.spark.deploy.SparkSubmitArguments.error(SparkSubm&zwnj;&#8203;itArguments.scala:65&zwnj;&#8203;7) \tat org.apache.spark.deploy.SparkSubmitArguments.loadEnvironment&zwnj;&#8203;Arguments(SparkSubmi&zwnj;&#8203;tArguments.scala:221&zwnj;&#8203;) \tat org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)</code> has anyone experienced the same"}, {"owner": {"reputation": 24093, "user_id": 51167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/144ac0e81f73797307e5179df6ecd1f4?s=128&d=identicon&r=PG", "display_name": "vy32", "link": "https://stackoverflow.com/users/51167/vy32"}, "edited": false, "score": 10, "creation_date": 1548443180, "post_id": 39777410, "comment_id": 95557124, "body": "The fact that <code>--py-files</code> does not add it to <code>PYTHONPATH</code> is not just a source of confusion for you --- it seems to be a general problem!"}, {"owner": {"reputation": 329, "user_id": 3004162, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1385028297/picture?type=large", "display_name": "Cesare Iurlaro", "link": "https://stackoverflow.com/users/3004162/cesare-iurlaro"}, "edited": false, "score": 1, "creation_date": 1612873873, "post_id": 39777410, "comment_id": 116897186, "body": "Of all the possibile solutions I found online for this problem, this is the best. And still, It feels like an hack. They should really release an option similar to <code>--packages</code> also for python dependecies!"}], "tags": [], "owner": {"reputation": 2682, "user_id": 234233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1L2Zj.jpg?s=128&g=1", "display_name": "ramhiser", "link": "https://stackoverflow.com/users/234233/ramhiser"}, "is_accepted": false, "score": 81, "last_activity_date": 1475173327, "creation_date": 1475173327, "answer_id": 39777410, "question_id": 36461054, "link": "https://stackoverflow.com/questions/36461054/i-cant-seem-to-get-py-files-on-spark-to-work/39777410#39777410", "title": "I can&#39;t seem to get --py-files on Spark to work", "body": "<p>First off, I'll assume that your dependencies are listed in <code>requirements.txt</code>. To package and zip the dependencies, run the following at the command line:</p>\n\n<pre><code>pip install -t dependencies -r requirements.txt\ncd dependencies\nzip -r ../dependencies.zip .\n</code></pre>\n\n<p>Above, the <code>cd dependencies</code> command is crucial to ensure that the modules are the in the top level of the zip file. Thanks to <a href=\"http://blog.danielcorin.com/code/2015/11/10/pyspark.html\" rel=\"noreferrer\">Dan Corin's post</a> for heads up.</p>\n\n<p>Next, submit the job via:</p>\n\n<pre><code>spark-submit --py-files dependencies.zip spark_job.py\n</code></pre>\n\n<p>The <code>--py-files</code> directive sends the zip file to the Spark workers but does not add it to the <code>PYTHONPATH</code> (source of confusion for me). To add the dependencies to the <code>PYTHONPATH</code> to fix the <code>ImportError</code>, add the following line to the Spark job, <code>spark_job.py</code>:</p>\n\n<pre><code>sc.addPyFile(\"dependencies.zip\")\n</code></pre>\n\n<p>A caveat from <a href=\"http://blog.cloudera.com/blog/2015/09/how-to-prepare-your-apache-hadoop-cluster-for-pyspark-jobs/\" rel=\"noreferrer\">this Cloudera post</a>:</p>\n\n<blockquote>\n  <p>An assumption that anyone doing distributed computing with commodity\n  hardware must assume is that the underlying hardware is potentially\n  heterogeneous. A Python egg built on a client machine will be specific\n  to the client\u2019s CPU architecture because of the required C\n  compilation. Distributing an egg for a complex, compiled package like\n  NumPy, SciPy, or pandas is a brittle solution that is likely to fail\n  on most clusters, at least eventually.</p>\n</blockquote>\n\n<p>Although the solution above does not build an egg, the same guideline applies.</p>\n"}, {"comments": [{"owner": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "edited": false, "score": 0, "creation_date": 1520347403, "post_id": 39779271, "comment_id": 85271531, "body": "I always get <code>ImportError: No module named zipfile</code>. Any suggestions?"}, {"owner": {"reputation": 775, "user_id": 5391375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a1be327c10f7064297795b8c4ca24c5?s=128&d=identicon&r=PG&f=1", "display_name": "avrsanjay", "link": "https://stackoverflow.com/users/5391375/avrsanjay"}, "reply_to_user": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "edited": false, "score": 0, "creation_date": 1520619433, "post_id": 39779271, "comment_id": 85404651, "body": "@ivan_bilan you have to replace zipfile with the name of your zipfile."}, {"owner": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "edited": false, "score": 1, "creation_date": 1520806243, "post_id": 39779271, "comment_id": 85454932, "body": "yea, I did that. I wasn&#39;t able to do this using <code>sc.AddPyFile</code>, instead I loaded the whole venv using --archives. More details here: <a href=\"https://stackoverflow.com/questions/49132151/elephas-not-loaded-in-pyspark-no-module-named-elephas-spark-model\" title=\"elephas not loaded in pyspark no module named elephas spark model\">stackoverflow.com/questions/49132151/&hellip;</a>"}, {"owner": {"reputation": 723, "user_id": 3598769, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Spjbt.jpg?s=128&g=1", "display_name": "desaiankitb", "link": "https://stackoverflow.com/users/3598769/desaiankitb"}, "edited": false, "score": 5, "creation_date": 1531910633, "post_id": 39779271, "comment_id": 89770653, "body": "I am writing this maybe it is too late but might help someone. that module (folder) which you are trying to import must have a blank file with name <code>__init__.py</code> else this setup will not work. everything else in this answer is as perfect as its number of upvotes."}], "tags": [], "owner": {"reputation": 775, "user_id": 5391375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a1be327c10f7064297795b8c4ca24c5?s=128&d=identicon&r=PG&f=1", "display_name": "avrsanjay", "link": "https://stackoverflow.com/users/5391375/avrsanjay"}, "is_accepted": false, "score": 20, "last_activity_date": 1475180329, "creation_date": 1475180329, "answer_id": 39779271, "question_id": 36461054, "link": "https://stackoverflow.com/questions/36461054/i-cant-seem-to-get-py-files-on-spark-to-work/39779271#39779271", "title": "I can&#39;t seem to get --py-files on Spark to work", "body": "<ul>\n<li><p>First you need to pass your files through <B>--py-files</B> or <B>--files</B></p>\n\n<ul>\n<li>When you pass your zip/files with the above flags, basically your resources will be transferred to temporary directory created on HDFS just for the lifetime of that application.</li>\n</ul></li>\n<li><p>Now in your code, add those zip/files by using the following command</p>\n\n<p><code>sc.addPyFile(\"your zip/file\")</code></p>\n\n<ul>\n<li>what the above does is, it loads the files to the execution environment, like JVM.</li>\n</ul></li>\n<li><p>Now import your zip/file in your code with an alias like the following to start referencing it</p>\n\n<p><code>import zip/file as your-alias</code></p>\n\n<p>Note: You need not use file extension while importing, like <B>.py</B> at the end</p></li>\n</ul>\n\n<p>Hope this is useful.</p>\n"}, {"comments": [{"owner": {"reputation": 875, "user_id": 3306989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa4741e987347db5e89e39441dd4dc86?s=128&d=identicon&r=PG", "display_name": "blue", "link": "https://stackoverflow.com/users/3306989/blue"}, "edited": false, "score": 1, "creation_date": 1503420518, "post_id": 45360535, "comment_id": 78604251, "body": "What is the problem introduced by zipfile? What is the right way to create the zip?"}], "tags": [], "owner": {"reputation": 1295, "user_id": 1956030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8b41580ef774aef8a48f59707760b80?s=128&d=identicon&r=PG", "display_name": "Nathan Buesgens", "link": "https://stackoverflow.com/users/1956030/nathan-buesgens"}, "is_accepted": false, "score": 0, "last_activity_date": 1503702229, "last_edit_date": 1503702229, "creation_date": 1501187694, "answer_id": 45360535, "question_id": 36461054, "link": "https://stackoverflow.com/questions/36461054/i-cant-seem-to-get-py-files-on-spark-to-work/45360535#45360535", "title": "I can&#39;t seem to get --py-files on Spark to work", "body": "<p>Spark will also silently fail to load a zip archive that is created with the python <code>zipfile</code> module. Zip archives must be created using a zip utility.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 9708141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7114fa8222c87b405edf9d70dc0c3c2?s=128&d=identicon&r=PG&f=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/9708141/graham"}, "is_accepted": false, "score": 0, "last_activity_date": 1564717130, "last_edit_date": 1564717130, "creation_date": 1564710625, "answer_id": 57318962, "question_id": 36461054, "link": "https://stackoverflow.com/questions/36461054/i-cant-seem-to-get-py-files-on-spark-to-work/57318962#57318962", "title": "I can&#39;t seem to get --py-files on Spark to work", "body": "<p>Try to use  <code>--archives</code>  to archive your anaconda dir to each server\n and use <code>--conf spark.yarn.appMasterEnv.PYSPARK_PYTHON=</code>  to tell your spark server where is your python executor path in your anaconda dir.</p>\n\n<p>Our full config is this:</p>\n\n<pre><code>--conf spark.yarn.appMasterEnv.PYSPARK_PYTHON=./ANACONDA/anaconda-dependencies/bin/python \n\n--archives &lt;S3-path&gt;/anaconda-dependencies.zip#ANACONDA\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 0, "creation_date": 1600766094, "post_id": 63946800, "comment_id": 113183914, "body": "While not totally automated and probably not usable in an environment you don&#39;t manage yourself (such as a 3rd party cluster, which, if I recall correctly, was my original use-case) I think this answer is as good as it gets with dependency management of pyspark applications :-) Thanks!"}, {"owner": {"reputation": 1617, "user_id": 543836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eef0875ccac7db342208bc27a8b998?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/543836/dima"}, "reply_to_user": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 0, "creation_date": 1600802447, "post_id": 63946800, "comment_id": 113201707, "body": "@AndrejPalicka - thanks for accepting even though I am 4 years too late :D"}, {"owner": {"reputation": 1617, "user_id": 543836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eef0875ccac7db342208bc27a8b998?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/543836/dima"}, "reply_to_user": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "edited": false, "score": 0, "creation_date": 1600803014, "post_id": 63946800, "comment_id": 113201993, "body": "If you don&#39;t manage the cluster (and you can&#39;t ssh to the master node) you&#39;d have to run the <code>pip install</code> on another machine with the same OS as your cluster to get the right binaries. Then upload the zip to S3 or another filesystem your cluster can talk to. Then use <code>spark.yarn.dist.archives=s3:&#47;&#47;&lt;bucket&gt;&#47;dependencies.zip#deps</code> to download your dependencies and unzip."}], "tags": [], "owner": {"reputation": 1617, "user_id": 543836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eef0875ccac7db342208bc27a8b998?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/543836/dima"}, "is_accepted": true, "score": 6, "last_activity_date": 1600380783, "creation_date": 1600380783, "answer_id": 63946800, "question_id": 36461054, "link": "https://stackoverflow.com/questions/36461054/i-cant-seem-to-get-py-files-on-spark-to-work/63946800#63946800", "title": "I can&#39;t seem to get --py-files on Spark to work", "body": "<p>To get this dependency distribution approach to work with compiled extensions we need to do two things:</p>\n<ol>\n<li>Run the pip install on the same OS as your target cluster (preferably on the master node of the cluster). This ensures compatible binaries are included in your zip.</li>\n<li>Unzip your archive on the destination node. This is necessary since Python will not import compiled extensions from zip files. (<a href=\"https://docs.python.org/3.8/library/zipimport.html\" rel=\"noreferrer\">https://docs.python.org/3.8/library/zipimport.html</a>)</li>\n</ol>\n<p>Using the following script to create your dependencies zip will ensure that you are isolated from any packages already installed on your system.  This assumes virtualenv is installed and <code>requirements.txt</code> is present in your current directory, and outputs a <code>dependencies.zip</code> with all your dependencies at the root level.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>env_name=temp_env\n\n# create the virtual env\nvirtualenv --python=$(which python3) --clear /tmp/${env_name}\n\n# activate the virtual env\nsource /tmp/${env_name}/bin/activate\n\n# download and install dependencies\npip install -r requirements.txt\n\n# package the dependencies in dependencies.zip. the cd magic works around the fact that you can't specify a base dir to zip\n(cd /tmp/${env_name}/lib/python*/site-packages/ &amp;&amp; zip -r - *) &gt; dependencies.zip\n</code></pre>\n<p>The dependencies can now be deployed, unzipped, and included in the PYTHONPATH as so</p>\n<pre><code>spark-submit \\\n  --master yarn \\\n  --deploy-mode cluster \\\n  --conf 'spark.yarn.dist.archives=dependencies.zip#deps' \\\n  --conf 'spark.yarn.appMasterEnv.PYTHONPATH=deps' \\\n  --conf 'spark.executorEnv.PYTHONPATH=deps' \\\n.\n.\n.\n</code></pre>\n<p><strong>spark.yarn.dist.archives=dependencies.zip#deps</strong><br />\ndistributes your zip file and unzips it to a directory called <code>deps</code></p>\n<p><strong>spark.yarn.appMasterEnv.PYTHONPATH=deps</strong><br />\n<strong>spark.executorEnv.PYTHONPATH=deps</strong><br />\nincludes the <code>deps</code> directory in the PYTHONPATH for the master and all workers</p>\n<p><strong>--deploy-mode cluster</strong><br />\nruns the master executor on the cluster so it picks up the dependencies</p>\n"}], "owner": {"reputation": 829, "user_id": 193964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f74be526aaf03d13ddef92267725ebc1?s=128&d=identicon&r=PG", "display_name": "Andrej Palicka", "link": "https://stackoverflow.com/users/193964/andrej-palicka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47277, "favorite_count": 29, "accepted_answer_id": 63946800, "answer_count": 6, "score": 37, "last_activity_date": 1600380783, "creation_date": 1459972272, "last_edit_date": 1495540505, "question_id": 36461054, "link": "https://stackoverflow.com/questions/36461054/i-cant-seem-to-get-py-files-on-spark-to-work", "title": "I can&#39;t seem to get --py-files on Spark to work", "body": "<p>I'm having a problem with using Python on Spark. My application has some dependencies, such as numpy, pandas, astropy, etc. I cannot use virtualenv to create an environment with all dependencies, since the nodes on the cluster do not have any common mountpoint or filesystem, besides HDFS. Therefore I am stuck with using <code>spark-submit --py-files</code>. I package the contents of site-packages in a ZIP file and submit the job like with <code>--py-files=dependencies.zip</code> option (as suggested in <a href=\"https://stackoverflow.com/questions/29495435/easiest-way-to-install-python-dependencies-on-spark-executor-nodes\">Easiest way to install Python dependencies on Spark executor nodes?</a>). However, the nodes on cluster still do not seem to see the modules inside and they throw <code>ImportError</code> such as this when importing numpy.</p>\n\n<pre><code>File \"/path/anonymized/module.py\", line 6, in &lt;module&gt;\n    import numpy\nFile \"/tmp/pip-build-4fjFLQ/numpy/numpy/__init__.py\", line 180, in &lt;module&gt;   \nFile \"/tmp/pip-build-4fjFLQ/numpy/numpy/add_newdocs.py\", line 13, in &lt;module&gt;\nFile \"/tmp/pip-build-4fjFLQ/numpy/numpy/lib/__init__.py\", line 8, in &lt;module&gt;\n    #\nFile \"/tmp/pip-build-4fjFLQ/numpy/numpy/lib/type_check.py\", line 11, in &lt;module&gt;\nFile \"/tmp/pip-build-4fjFLQ/numpy/numpy/core/__init__.py\", line 14, in &lt;module&gt;\nImportError: cannot import name multiarray\n</code></pre>\n\n<p>When I switch to the virtualenv and use the local pyspark shell, everything works fine, so the dependencies are all there. Does anyone know, what might cause this problem and how to fix it?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "memory", "large-files"], "comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 1, "creation_date": 1459972374, "post_id": 36461053, "comment_id": 60533960, "body": "Even an <code>int</code> is an object with header and takes up more space than you might expect. Maybe you can use <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.loadtxt.html\" rel=\"nofollow noreferrer\"><code>numpy.loadtxt()</code></a>?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1459972649, "post_id": 36461053, "comment_id": 60534112, "body": "Why do you read the file three times?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1459972723, "post_id": 36461053, "comment_id": 60534164, "body": "Why do you need it all in memory at the same time?"}, {"owner": {"reputation": 710, "user_id": 347889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc0d4247b2318bdcd51417e2383952a?s=128&d=identicon&r=PG", "display_name": "Lauro Moura", "link": "https://stackoverflow.com/users/347889/lauro-moura"}, "edited": false, "score": 0, "creation_date": 1459972736, "post_id": 36461053, "comment_id": 60534169, "body": "Also, floats seems to take 24bytes of space per instance (check with <code>sys.getsizeof(float(0))</code>"}, {"owner": {"reputation": 1124, "user_id": 4248384, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/947900bc8be508007872c3d9d8ed83b1?s=128&d=identicon&r=PG&f=1", "display_name": "dada", "link": "https://stackoverflow.com/users/4248384/dada"}, "edited": false, "score": 0, "creation_date": 1459972763, "post_id": 36461053, "comment_id": 60534183, "body": "I did expect the process to use more memory than the actual size of my file, but I&#39;m surprised that it uses memory of about 6 times the size of the file ! This is annoying because I don&#39;t  think I have access to clusters with more than 200G of memory."}, {"owner": {"reputation": 710, "user_id": 347889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc0d4247b2318bdcd51417e2383952a?s=128&d=identicon&r=PG", "display_name": "Lauro Moura", "link": "https://stackoverflow.com/users/347889/lauro-moura"}, "edited": false, "score": 0, "creation_date": 1459972789, "post_id": 36461053, "comment_id": 60534199, "body": "Maybe using pandas (reading through <code>pandas.read_csv</code>?) would be better."}, {"owner": {"reputation": 1124, "user_id": 4248384, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/947900bc8be508007872c3d9d8ed83b1?s=128&d=identicon&r=PG&f=1", "display_name": "dada", "link": "https://stackoverflow.com/users/4248384/dada"}, "edited": false, "score": 0, "creation_date": 1459972938, "post_id": 36461053, "comment_id": 60534291, "body": "I will try to use &#39;readlines&#39; along with &#39;strip&#39; and &#39;split&#39; hoping my job will require less memory with those commands."}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "reply_to_user": {"reputation": 710, "user_id": 347889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc0d4247b2318bdcd51417e2383952a?s=128&d=identicon&r=PG", "display_name": "Lauro Moura", "link": "https://stackoverflow.com/users/347889/lauro-moura"}, "edited": false, "score": 0, "creation_date": 1459972940, "post_id": 36461053, "comment_id": 60534294, "body": "@LauroMoura Yeah. Between that and the list references for each element seems to pretty much add up."}, {"owner": {"reputation": 1124, "user_id": 4248384, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/947900bc8be508007872c3d9d8ed83b1?s=128&d=identicon&r=PG&f=1", "display_name": "dada", "link": "https://stackoverflow.com/users/4248384/dada"}, "edited": false, "score": 0, "creation_date": 1460429688, "post_id": 36461053, "comment_id": 60725891, "body": "Woud c++ be faster than python in reading the file ?"}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 347889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc0d4247b2318bdcd51417e2383952a?s=128&d=identicon&r=PG", "display_name": "Lauro Moura", "link": "https://stackoverflow.com/users/347889/lauro-moura"}, "edited": false, "score": 0, "creation_date": 1459973188, "post_id": 36461257, "comment_id": 60534431, "body": "Wouldn&#39;t this still read it in one go instead of lazily? I mean to become a generator wouldn&#39;t he need to <code>yield</code> the current value for each line?"}, {"owner": {"reputation": 710, "user_id": 347889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc0d4247b2318bdcd51417e2383952a?s=128&d=identicon&r=PG", "display_name": "Lauro Moura", "link": "https://stackoverflow.com/users/347889/lauro-moura"}, "edited": false, "score": 0, "creation_date": 1459973316, "post_id": 36461257, "comment_id": 60534486, "body": "See <a href=\"http://stackoverflow.com/questions/519633/lazy-method-for-reading-big-file-in-python\" title=\"lazy method for reading big file in python\">stackoverflow.com/questions/519633/&hellip;</a>"}, {"owner": {"reputation": 1124, "user_id": 4248384, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/947900bc8be508007872c3d9d8ed83b1?s=128&d=identicon&r=PG&f=1", "display_name": "dada", "link": "https://stackoverflow.com/users/4248384/dada"}, "edited": false, "score": 1, "creation_date": 1459973397, "post_id": 36461257, "comment_id": 60534529, "body": "Why would this reduce the amount of memory used by the process running my script ?"}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "edited": false, "score": 0, "creation_date": 1459973406, "post_id": 36461257, "comment_id": 60534534, "body": "Yes it will. 3rd option in the link above - &quot;If the file is line-based, the file object is already a lazy generator of lines&quot;."}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "edited": false, "score": 0, "creation_date": 1459974650, "post_id": 36461257, "comment_id": 60535271, "body": "Sorry just saw you asked why, it will reduce the amount of memory because you will reading line by line in memory. This is different than what you did because the list comprehension you used [x for x in f] iterates the file and reads the whole column in each variable. And not only that you are also reading the file 3 times for that. What I&#39;m suggesting is an improvement, although it seems using numpy - as Reti43 suggested - could be an even better solution."}], "tags": [], "owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "is_accepted": false, "score": 0, "last_activity_date": 1459973241, "last_edit_date": 1459973241, "creation_date": 1459972991, "answer_id": 36461257, "question_id": 36461053, "link": "https://stackoverflow.com/questions/36461053/python-loads-more-memory-than-the-actual-size-of-the-file/36461257#36461257", "title": "python loads more memory than the actual size of the file", "body": "<p>You need to read it line by line lazily using a generator. Try this:</p>\n\n<pre><code>col1 = []\ncol2 = []\ncol3 = []\n\nrowFormat = [col1, col2, col3]\n\nwith open('test', 'r') as f:\n    for line in f:\n        parts = line.split()\n        col1.append(float(parts[0]))\n        col2.append(float(parts[1]))\n        col3.append(float(parts[2]))\n        # if possible do something here to start seeing results immediately\n\ntupleFormat = zip(*rowFormat)\nfor ele in tupleFormat:\n    ### do something with ele\n</code></pre>\n\n<p>You can add your logic in the for loop so you don't wait for the whole process to finish.</p>\n"}, {"comments": [{"owner": {"reputation": 1124, "user_id": 4248384, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/947900bc8be508007872c3d9d8ed83b1?s=128&d=identicon&r=PG&f=1", "display_name": "dada", "link": "https://stackoverflow.com/users/4248384/dada"}, "edited": false, "score": 0, "creation_date": 1460306362, "post_id": 36461389, "comment_id": 60668705, "body": "Well, using &#39;np.loadtxt&#39; made my process use less memory, so I guess it&#39;s a solution. But I have a question : would it be faster to read the variable &#39;tupleFormat&#39; from a &#39;pickle&#39; representation in comparison with opening the file and reading it ? I notice that the pickle representation of &#39;tupleFormat&#39; is at least twice the size of my original file, but I don&#39;t know maybe reading it will be faster than opening the file ?"}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "reply_to_user": {"reputation": 1124, "user_id": 4248384, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/947900bc8be508007872c3d9d8ed83b1?s=128&d=identicon&r=PG&f=1", "display_name": "dada", "link": "https://stackoverflow.com/users/4248384/dada"}, "edited": false, "score": 0, "creation_date": 1460562643, "post_id": 36461389, "comment_id": 60804127, "body": "@dada What do you want to do with that data? Reading/loading off the hard drive is a slow process. If you need to load/check a lot of values many times, you&#39;re better off loading them in memory once unless that is a physical restriction."}], "tags": [], "owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "is_accepted": true, "score": 4, "last_activity_date": 1459975107, "last_edit_date": 1495541761, "creation_date": 1459973528, "answer_id": 36461389, "question_id": 36461053, "link": "https://stackoverflow.com/questions/36461053/python-loads-more-memory-than-the-actual-size-of-the-file/36461389#36461389", "title": "python loads more memory than the actual size of the file", "body": "<p>Python objects have a lot of overheard, e.g., reference count to the object and other stuff. That means that a Python float is more than 8 bytes. On my 32bit Python version, it is</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; print(sys.getsizeof(float(0))\n16\n</code></pre>\n\n<p>A list has its own overhead and then requires 4 bytes per element to store a reference to that object. So 100 floats in a list actually take up a size of</p>\n\n<pre><code>&gt;&gt;&gt; a = map(float, range(100))\n&gt;&gt;&gt; sys.getsizeof(a) + sys.getsizeof(a[0])*len(a)\n2036\n</code></pre>\n\n<p>Now, a numpy array is different. It has a little bit of overhead, but the raw data under the hood are stored like in C.</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; b = np.array(a)\n&gt;&gt;&gt; sys.getsizeof(b)\n848\n&gt;&gt;&gt; b.itemsize    # number of bytes per element\n8\n</code></pre>\n\n<p>So a Python float requires 20 bytes compared to 8 for numpy. And <a href=\"https://stackoverflow.com/questions/449560/how-do-i-determine-the-size-of-an-object-in-python\">64bit Python versions require even more</a>.</p>\n\n<p>So really, if you must load A LOT of data in memory, numpy is <em>one</em> way to go. Looking at the way you load the data, I assume it's in text format with 3 floats per row, split by an arbitrary number of spaces. In that case, you could simply will use <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.genfromtxt.html\" rel=\"nofollow noreferrer\"><code>numpy.genfromtxt()</code></a></p>\n\n<pre><code>data = np.genfromtxt(fname, autostrip=True)\n</code></pre>\n\n<p>You could also look for more options <a href=\"https://stackoverflow.com/questions/5264228/store-a-lot-of-data-inside-python\">here</a>, e.g., mmap, but I don't know much about it to say whether it'd be more appropriate for you.</p>\n"}, {"tags": [], "owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "is_accepted": false, "score": 0, "last_activity_date": 1459974419, "creation_date": 1459974419, "answer_id": 36461667, "question_id": 36461053, "link": "https://stackoverflow.com/questions/36461053/python-loads-more-memory-than-the-actual-size-of-the-file/36461667#36461667", "title": "python loads more memory than the actual size of the file", "body": "<p>Can you get by w/o <em>storing</em> every tuple?  I.e. can \"do something\" happen as you read in the file?   If so... try this:</p>\n\n<pre><code>#!/usr/bin/env python\nimport fileinput\nfor line in fileinput.FileInput('test.dat'):\n    ele = tuple((float(x) for x in line.strip().split()))\n    # Replace 'print' with your \"do something\".\n    # Note that ele is now a generator, not a tuple.  Wrap it in\n    # ele = tuple(ele) to get a tuple instead if you need it.\n    print ele\n</code></pre>\n\n<p>If not, maybe you can save some memory by choosing either the column format <em>or</em> the list of tuples format, but not BOTH, for example....</p>\n\n<pre><code>#!/usr/bin/env python\nimport fileinput\nelements = []\nfor line in fileinput.FileInput('test.dat'):\n    elements.append(tuple((float(x) for x in line.strip().split())))\n\nfor ele in elements:\n   # do something\n</code></pre>\n"}], "owner": {"reputation": 1124, "user_id": 4248384, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/947900bc8be508007872c3d9d8ed83b1?s=128&d=identicon&r=PG&f=1", "display_name": "dada", "link": "https://stackoverflow.com/users/4248384/dada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1166, "favorite_count": 2, "accepted_answer_id": 36461389, "answer_count": 3, "score": 1, "last_activity_date": 1459975107, "creation_date": 1459972266, "question_id": 36461053, "link": "https://stackoverflow.com/questions/36461053/python-loads-more-memory-than-the-actual-size-of-the-file", "title": "python loads more memory than the actual size of the file", "body": "<p>I have a 3 columns file of about 28Gb. I would like to read it with python and put its content in a list of 3D tuples. Here's the code I'm using : </p>\n\n<pre><code>f = open(filename)\ncol1 = [float(l.split()[0]) for l in f]\nf.seek(0)\ncol2 = [float(l.split()[1]) for l in f]\nf.seek(0)\ncol3 = [float(l.split()[2]) for l in f]\nf.close()\nrowFormat = [col1,col2,col3]\ntupleFormat = zip(*rowFormat)\nfor ele in tupleFormat: \n        ### do something with ele\n</code></pre>\n\n<p>There's no 'break' command in the for loop, meaning that I actually read the whole content of the file. When the script is being run, I notice from the 'htop' command that it takes 156G of virtual memory (VIRT column) and almost the same amount for the resident memory (RES column). Why is my script using 156G whereas the file size is only 28G ? </p>\n"}, {"tags": ["python", "datetime", "pandas", "timestamp", "time-series"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 2, "creation_date": 1459972195, "post_id": 36460886, "comment_id": 60533848, "body": "How do months map to the season?"}, {"owner": {"reputation": 89, "user_id": 5078889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nIWlp.jpg?s=128&g=1", "display_name": "DiamondDogs95", "link": "https://stackoverflow.com/users/5078889/diamonddogs95"}, "reply_to_user": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1460013686, "post_id": 36460886, "comment_id": 60549475, "body": "My observations (inputs) are all matchups from 1981 to 2015. The beginning of each season is around October and the regular season (before the playoffs) ends in mid-April. So the concerning months are the following: 09,10,11,12,01,02,03,04. Hope it helps you"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5078889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nIWlp.jpg?s=128&g=1", "display_name": "DiamondDogs95", "link": "https://stackoverflow.com/users/5078889/diamonddogs95"}, "edited": false, "score": 0, "creation_date": 1459975931, "post_id": 36461283, "comment_id": 60536045, "body": "To give you more information, my dataset is composed of the regular season schedule (from October to mid-April). Your code sounds pretty good but why does &quot;.apply(dateutil.parser.parse)&quot;?"}, {"owner": {"reputation": 9391, "user_id": 717481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0292aeefc5c774d3acd0ca14914c5db2?s=128&d=identicon&r=PG", "display_name": "sparc_spread", "link": "https://stackoverflow.com/users/717481/sparc-spread"}, "reply_to_user": {"reputation": 89, "user_id": 5078889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nIWlp.jpg?s=128&g=1", "display_name": "DiamondDogs95", "link": "https://stackoverflow.com/users/5078889/diamonddogs95"}, "edited": false, "score": 0, "creation_date": 1459976704, "post_id": 36461283, "comment_id": 60536521, "body": "Thx for accepting.  The <code>.apply(dateutil.parser.parse)</code> was just to set up the sample data to make the <code>schedule</code> column into a <code>datetime</code> type, which I assume was the type of your original dataset column too."}, {"owner": {"reputation": 89, "user_id": 5078889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nIWlp.jpg?s=128&g=1", "display_name": "DiamondDogs95", "link": "https://stackoverflow.com/users/5078889/diamonddogs95"}, "edited": false, "score": 0, "creation_date": 1459981837, "post_id": 36461283, "comment_id": 60538783, "body": "Yes! Thx for your help."}], "tags": [], "owner": {"reputation": 9391, "user_id": 717481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0292aeefc5c774d3acd0ca14914c5db2?s=128&d=identicon&r=PG", "display_name": "sparc_spread", "link": "https://stackoverflow.com/users/717481/sparc-spread"}, "is_accepted": true, "score": 1, "last_activity_date": 1459973401, "last_edit_date": 1459973401, "creation_date": 1459973076, "answer_id": 36461283, "question_id": 36460886, "link": "https://stackoverflow.com/questions/36460886/pandas-extracting-just-the-calendar-year-from-datetime-column/36461283#36461283", "title": "Pandas: Extracting just the Calendar Year from Datetime column", "body": "<p>From what you're saying, it seems like September is the breakpoint for NBA season year.  If so, your best bet would be to <code>apply</code> a custom <code>lambda</code>, like this one:</p>\n\n<pre><code>df[\"year\"] = df[\"schedule\"].apply (lambda x : x.year if x.month &lt; 9 else x.year + 1)\n</code></pre>\n\n<p>If you give me more info on NBA season months I can clean this up.</p>\n\n<p>Here's a test program yielding correct outputs for your sample:</p>\n\n<pre><code>import dateutil\n\ndf = DataFrame ({\n    \"schedule\" :\n    Series ([\n        \"2012-12-31\",\n        \"2013-01-01\",\n        \"2013-09-27\",\n        \"2014-04-06\"\n    ]).apply(dateutil.parser.parse)\n})\ndf[\"year\"] = df[\"schedule\"].apply (lambda x : x.year if x.month &lt; 9 else x.year + 1)\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dB2mv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dB2mv.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"http://pandas.pydata.org/pandas-docs/stable/basics.html#row-or-column-wise-function-application\" rel=\"nofollow noreferrer\">Here</a> is one of the places where the pandas documentation first begins to introduce using <code>lambda</code> functions with <code>apply</code>.</p>\n"}], "owner": {"reputation": 89, "user_id": 5078889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nIWlp.jpg?s=128&g=1", "display_name": "DiamondDogs95", "link": "https://stackoverflow.com/users/5078889/diamonddogs95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1421, "favorite_count": 0, "accepted_answer_id": 36461283, "answer_count": 1, "score": 2, "last_activity_date": 1459973401, "creation_date": 1459971684, "question_id": 36460886, "link": "https://stackoverflow.com/questions/36460886/pandas-extracting-just-the-calendar-year-from-datetime-column", "title": "Pandas: Extracting just the Calendar Year from Datetime column", "body": "<p>I have a Dataframe with a column alike the following column:</p>\n\n<pre><code>df['Schedule'] =\n...\n2012-12-31\n2013-01-01\n2013-01-02\n2013-01-03\n2013-01-04\n2013-01-05\n2013-01-06\n2013-01-07\n2013-01-08\n2013-01-09\n</code></pre>\n\n<p>And so on from 1981 to 2015. The elements of the column are pandas.tslib.Timestamp.</p>\n\n<p>I needed to create another column where I had to extract only the year.</p>\n\n<p>So I did the following command:</p>\n\n<pre><code>df['Year'] = df['Schedule'].dt.year\n</code></pre>\n\n<p>It partially worked because I need the years to match with the date from calendar year (my dataset is composed of matchups of a NBA season)/\nTo be clear instead of:</p>\n\n<pre><code>2012-12-31    2012\n2013-01-01    2013\n</code></pre>\n\n<p>I need:</p>\n\n<pre><code>2012-12-31    2013\n2013-01-01    2013\n...\n2013-09-27    2014\n...\n2014-04-06    2014    \n</code></pre>\n\n<p>Does anyone have an efficient way to solve this problem?</p>\n"}, {"tags": ["python", "multiprocessing", "bottle"], "comments": [{"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1459974071, "post_id": 36460853, "comment_id": 60534960, "body": "What error do you get? <b>Why</b> doesn&#39;t in work"}, {"owner": {"reputation": 6255, "user_id": 163757, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/01b44077976666b4de7a7f252248419b?s=128&d=identicon&r=PG", "display_name": "user163757", "link": "https://stackoverflow.com/users/163757/user163757"}, "reply_to_user": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1459975779, "post_id": 36460853, "comment_id": 60535938, "body": "i changed to this - result = pool.apply_async(callback,args=args).  but i get pickling error about the callback function"}, {"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1459976987, "post_id": 36460853, "comment_id": 60536700, "body": "Data sent from one process to another, in this case the callback function, needs to be <a href=\"https://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled\" rel=\"nofollow noreferrer\">picklable</a>. Only functions defined at the top level of a module can be pickled, not functions defined within functions or methods."}, {"owner": {"reputation": 1207, "user_id": 2745724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fa4af16ab5391105b75f58dab26a48cf?s=128&d=identicon&r=PG", "display_name": "Mounarajan", "link": "https://stackoverflow.com/users/2745724/mounarajan"}, "edited": false, "score": 0, "creation_date": 1476695184, "post_id": 36460853, "comment_id": 67437392, "body": "did u got solution for this question?"}], "owner": {"reputation": 6255, "user_id": 163757, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/01b44077976666b4de7a7f252248419b?s=128&d=identicon&r=PG", "display_name": "user163757", "link": "https://stackoverflow.com/users/163757/user163757"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459971558, "creation_date": 1459971558, "question_id": 36460853, "link": "https://stackoverflow.com/questions/36460853/python-bottle-framework-plugin-to-run-request-in-new-process-via-multiprocess", "title": "Python Bottle Framework - Plugin to Run Request in New Process (via multiprocessing)", "body": "<p>I have a fairly simple api built with the bottle framework.  One of the methods/routes in the api is CPU intensive.  For this reason, when this method is called, I would like to spawn a separate process with the standard Python multiprocessing module to side-step the GIL issues I currently see when the method is executed concurrently.</p>\n\n<p>I realize that if this approach is very bad for a number of reasons - but its what I have to deal with right now.  Snippet below doesnt work.</p>\n\n<pre><code>def run_in_new_process(callback):\n    def wrapper(*args, **kwargs):\n        pool = multiprocessing.Pool(processes=1)\n        result = pool.apply_async(callback, (*args, **kwargs))\n        return result.get()\n    return wrapper\n</code></pre>\n"}, {"tags": ["python", "gis", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 5195636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55ebfae10c91237639c3f81ab957a7f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hammond", "link": "https://stackoverflow.com/users/5195636/j-hammond"}, "edited": false, "score": 0, "creation_date": 1460032968, "post_id": 36468489, "comment_id": 60563083, "body": "Thanks you so much, that was exactly the help/clarity I was looking for."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 1, "last_activity_date": 1460011875, "last_edit_date": 1495541751, "creation_date": 1460011211, "answer_id": 36468489, "question_id": 36460766, "link": "https://stackoverflow.com/questions/36460766/syntax-error-with-psycopg-sql-query-over-a-wkb-string/36468489#36468489", "title": "Syntax error with psycopg SQL query over a WKB string", "body": "<p>First read <a href=\"https://stackoverflow.com/questions/7784148/understanding-repr-function-in-python\">Understanding repr( ) function in Python</a>. The string <code>coordWKB</code></p>\n\n<pre><code>'0106000020E6100000010000000103000000010000001200000017A84D0F39925EC083FC69A455C342400A1451BC48925EC0422CDC116B........'\n</code></pre>\n\n<p>does not include the single quotation marks, it is just how your python interpreter displays string values for your convenience. If it did include the single quotation marks, then it would be displayed as:</p>\n\n<pre><code>\"'0106000020E6100000010000000103000000010000001200000017A84D0F39925EC083FC69A455C342400A1451BC48925EC0422CDC116B........'\"\n</code></pre>\n\n<p>With this in mind given</p>\n\n<pre><code>cur.execute(\"SELECT ST_AsText(\" + coordWKB + \")\")\n</code></pre>\n\n<p>the resulting SQL will be:\n</p>\n\n<pre><code>SELECT ST_AsText(0106000020E6100000010000000103000000010000001200000017A84D0F39925EC083FC69A455C342400A1451BC48925EC0422CDC116B........)\n</code></pre>\n\n<p>It should be obvious that this is wrong.</p>\n\n<p>Next you should read the story of <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">little Bobby Tables</a> and <a href=\"http://initd.org/psycopg/docs/usage.html#the-problem-with-the-query-parameters\" rel=\"nofollow noreferrer\">\"the problem with the query parameters\"</a>. You should never include values in your SQL query by concatenating strings. That opens up the doors for <a href=\"https://en.wikipedia.org/wiki/SQL_injection\" rel=\"nofollow noreferrer\">SQL injection</a>. The values have to be properly escaped so that no additional SQL can be injected to your query. That is a job for your DB-API and all you have to do is instruct it with <a href=\"https://en.wikipedia.org/wiki/Prepared_statement\" rel=\"nofollow noreferrer\">placeholders</a>. From <a href=\"http://initd.org/psycopg/docs/usage.html\" rel=\"nofollow noreferrer\">basic usage of psycopg2</a>:</p>\n\n<pre><code># Pass data to fill a query placeholders and let Psycopg perform\n# the correct conversion (no more SQL injections!)\n&gt;&gt;&gt; cur.execute(\"INSERT INTO test (num, data) VALUES (%s, %s)\",\n...      (100, \"abc'def\"))\n</code></pre>\n\n<p>Do note that you do not format the query string yourself, but pass the value tuple as an argument to <code>cur.execute</code>. This way your original query should be written as:</p>\n\n<pre><code>cur.execute(\"SELECT ST_AsText(%s)\", (coordWKB,))\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 5195636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55ebfae10c91237639c3f81ab957a7f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hammond", "link": "https://stackoverflow.com/users/5195636/j-hammond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 36468489, "answer_count": 1, "score": 0, "last_activity_date": 1460012479, "creation_date": 1459971334, "last_edit_date": 1460012479, "question_id": 36460766, "link": "https://stackoverflow.com/questions/36460766/syntax-error-with-psycopg-sql-query-over-a-wkb-string", "title": "Syntax error with psycopg SQL query over a WKB string", "body": "<p>My code executes a simple SQL query to convert some WKB geometry to WKT.  I get my WKB geometry from an url request. The code looks like this:</p>\n\n<pre><code>url = 'http://..........'\nresponse = urllib2.urlopen(url).read()\nresponseJson = json.loads(response)\ncoordWKB = responseJson['wkb_geometry']\nprint(coordWKB)\ncur.execute(\"SELECT ST_AsText(\" + coordWKB + \")\")\n</code></pre>\n\n<p><code>coordWKB</code> looks like this: </p>\n\n<pre><code>'0106000020E6100000010000000103000000010000001200000017A84D0F39925EC083FC69A455C342400A1451BC48925EC0422CDC116B........'\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>psycopg2.ProgrammingError: syntax error at or near \"A84D0F39925EC083FC69A455C342400A1451BC48925EC0422CDC11................   \nLINE 1: ...000020E6100000010000000103000000010000001200000017A84D0F3992...\n</code></pre>\n\n<p>If I execute the code below it works:</p>\n\n<pre><code>cur.execute(\"select ST_AsText('0106000020E6100000010000000103000000010000001200000017A84D0F39925EC08.............')\")\n</code></pre>\n\n<p>I can't seem to figure out what's wrong with the WKB I'm passing the query. </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 2, "creation_date": 1459971659, "post_id": 36460763, "comment_id": 60533562, "body": "Depending on your needs, you can read up on <code>pickle</code>, <code>json</code>, <code>csv</code>, or <code>sqlite</code> and then go from there."}], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 347889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc0d4247b2318bdcd51417e2383952a?s=128&d=identicon&r=PG", "display_name": "Lauro Moura", "link": "https://stackoverflow.com/users/347889/lauro-moura"}, "is_accepted": false, "score": -1, "last_activity_date": 1459971793, "creation_date": 1459971793, "answer_id": 36460918, "question_id": 36460763, "link": "https://stackoverflow.com/questions/36460763/how-to-store-a-user-input-permanently-in-python/36460918#36460918", "title": "How to store a user input permanently in python", "body": "<p>Basically you want some kind of persistence for your data.</p>\n\n<p>Python has a bunch of modules to deal with it. Check: <a href=\"https://docs.python.org/2/library/persistence.html\" rel=\"nofollow\">https://docs.python.org/2/library/persistence.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "is_accepted": false, "score": 0, "last_activity_date": 1459972055, "creation_date": 1459972055, "answer_id": 36460991, "question_id": 36460763, "link": "https://stackoverflow.com/questions/36460763/how-to-store-a-user-input-permanently-in-python/36460991#36460991", "title": "How to store a user input permanently in python", "body": "<p>I think that you could save this in a list or dict and then use, pickle or cpickle(python 2x) for save in plain text</p>\n\n<p>this is very easy to use and fast</p>\n\n<pre><code>import pickle\npickle.dump(obj, file[, protocol])\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>pickle.load(file)\n</code></pre>\n\n<p>protocol could be 0 or 1</p>\n\n<blockquote>\n  <p>If the protocol parameter is omitted, protocol 0 is used. If protocol is specified as a negative value or HIGHEST_PROTOCOL, the highest protocol version will be used.</p>\n</blockquote>\n\n<p>see examples\n<a href=\"https://pymotw.com/2/pickle/\" rel=\"nofollow\">https://pymotw.com/2/pickle/</a></p>\n\n<p>and this is the official doc\n<a href=\"https://docs.python.org/2/library/pickle.html\" rel=\"nofollow\">https://docs.python.org/2/library/pickle.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 6168696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754841adf59fdf0ffbcba2a1668cafc?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix Jammr", "link": "https://stackoverflow.com/users/6168696/matrix-jammr"}, "edited": false, "score": 0, "creation_date": 1459977464, "post_id": 36461030, "comment_id": 60536967, "body": "can we make a separate function  for name pin and newamount"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "reply_to_user": {"reputation": 19, "user_id": 6168696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754841adf59fdf0ffbcba2a1668cafc?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix Jammr", "link": "https://stackoverflow.com/users/6168696/matrix-jammr"}, "edited": false, "score": 0, "creation_date": 1459977743, "post_id": 36461030, "comment_id": 60537091, "body": "@MatrixJammr Yes, that&#39;s certainly possible but I think it would be better to change it in a different way so you don&#39;t have to write a new function per customer detail. I&#39;ll edit the answer soon."}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "reply_to_user": {"reputation": 19, "user_id": 6168696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754841adf59fdf0ffbcba2a1668cafc?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix Jammr", "link": "https://stackoverflow.com/users/6168696/matrix-jammr"}, "edited": false, "score": 0, "creation_date": 1459980659, "post_id": 36461030, "comment_id": 60538354, "body": "@MatrixJammr Check the updated answer for another take on your script"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "reply_to_user": {"reputation": 19, "user_id": 6168696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754841adf59fdf0ffbcba2a1668cafc?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix Jammr", "link": "https://stackoverflow.com/users/6168696/matrix-jammr"}, "edited": false, "score": 0, "creation_date": 1459981621, "post_id": 36461030, "comment_id": 60538720, "body": "@MatrixJammr Did you downvote? Care to elaborate? You want a single function per customer/account detail? :-/"}, {"owner": {"reputation": 19, "user_id": 6168696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754841adf59fdf0ffbcba2a1668cafc?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix Jammr", "link": "https://stackoverflow.com/users/6168696/matrix-jammr"}, "edited": false, "score": 1, "creation_date": 1460036502, "post_id": 36461030, "comment_id": 60566026, "body": "i did not downvote  you awanswer is perfect i cant down vote cuz iam new  i dont even have 15 points of reputation iam sorry i think it some one else you  anwser is right and it helped me a lot thanks and really did not downvote you"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "reply_to_user": {"reputation": 19, "user_id": 6168696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754841adf59fdf0ffbcba2a1668cafc?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix Jammr", "link": "https://stackoverflow.com/users/6168696/matrix-jammr"}, "edited": false, "score": 0, "creation_date": 1460037161, "post_id": 36461030, "comment_id": 60566601, "body": "No problem - glad it worked :) It&#39;s just annoying when people down-vote without giving an explanation because I never know if I&#39;m missing something obvious or doing something stupid. We can all make mistakes and learn - if someone just cares to tell us what&#39;s wrong."}, {"owner": {"reputation": 848, "user_id": 5667136, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f9960a08b791ce05fa68979a8194777c?s=128&d=identicon&r=PG&f=1", "display_name": "MANA624", "link": "https://stackoverflow.com/users/5667136/mana624"}, "edited": false, "score": 2, "creation_date": 1460045889, "post_id": 36461030, "comment_id": 60573351, "body": "I downvoted you. Don&#39;t take it so personally. It&#39;s often said that SO is not a &quot;code-writing service&quot;, and that appears to be exactly what you&#39;ve done. I wouldn&#39;t care, but this is clearly a homework problem, and using a module like JSON is certainly not acceptable if that&#39;s not what their teacher wants and they can&#39;t explain it. If you can provide justification for why I&#39;m wrong, I will remove the downvote."}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "reply_to_user": {"reputation": 848, "user_id": 5667136, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f9960a08b791ce05fa68979a8194777c?s=128&d=identicon&r=PG&f=1", "display_name": "MANA624", "link": "https://stackoverflow.com/users/5667136/mana624"}, "edited": false, "score": 1, "creation_date": 1460049509, "post_id": 36461030, "comment_id": 60575540, "body": "@MANA624 Thanks for explaining :) It&#39;s not that I took it personal but I do worry that my code sucks and that I&#39;m too noob to see it. I&#39;m self-taught and don&#39;t study anything &quot;numerical&quot; so how would I know? SO is <i>my</i> professor! :P Anyway, you&#39;re right! Now that you mention it, it <i>does</i> look homework-ish, SO shouldn&#39;t be a code-writing service and the best justification I can give is that the json version will show OP a better approach to saving/loading small datasets than my previous answer did (it relied on list indices and seemed quite brittle). So keep the down-vote for now, I guess."}], "tags": [], "owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "is_accepted": true, "score": -1, "last_activity_date": 1460034850, "last_edit_date": 1460034850, "creation_date": 1459972179, "answer_id": 36461030, "question_id": 36460763, "link": "https://stackoverflow.com/questions/36460763/how-to-store-a-user-input-permanently-in-python/36461030#36461030", "title": "How to store a user input permanently in python", "body": "<p>Check the comments in the code...</p>\n\n<pre><code>print(\"***********WELCOME TO THE BANK OF LOSS**************\")\ndef make_an_acc():\n    print(\"by maing an account in our bank your sure to lose all you money\\n\")\n    print(\"plss enter your name\\n\")\n    newname = input(\"\\n\")\n    print(\"plss enter an insecure 4 digit code that can be hacked by any one \\n\")\n    newpin = int(input(\"\\n\"))\n    print(\"pls enter the amount you want to loss i mean deposit\\n\")\n    newamount = int(input(\"\\n\"))\n    # return the values, so they can be used outside the function\n    return [newname, newpin, newamount]\n\ndef datastore(newname):\n   \"\"\" you hand this function a newname and it writes it to a file \"\"\"\n    namefile = open(\"namelist\",\"wb\");\n    namefile.write(newname)\n    # close file after reading or writing\n    namefile.close()\n    # do the reading elsewhere - to store data, you don't need it\n    # so delete this for now: shi = namefile.read(); \n\n# you can now do this to get a list of three elements: \n# name, pin, balance:\ncustomer_details = make_an_acc()\n\n# customer name was the first element, so to store it in a file:\ndatastore(customer_details[0])\n</code></pre>\n\n<p>I didn't have time to make this shine but here's a quick 'n dirty re-write using dictionaries and json that'll allow you to make new customers, load existing, get customer details and typical things of that nature. Maybe it'll give you a little inspiration:</p>\n\n<pre><code>import json\n\ncustomers_file = \"customers.json\"\n\ncustomers_dict = {}\n\ndef load_customers(filename=customers_file):\n    \"\"\" you hand this function a filename and it returns a dictionary of all customers \"\"\"\n    with open(filename, \"r\") as customers_json:\n        return json.loads(customers_json.read())\n\ndef save_customers(customers_dict, filename=customers_file):\n    \"\"\" you hand this function a dictionary and a filename to save the customers \"\"\"\n    with open(filename, \"w\") as customers_json:\n        customers_json.write(json.dumps(customers_dict)) \n\ndef add_customer():\n    \"\"\" pretty much your existing code - just return a dictionary instead \"\"\"\n    print(\"by maing an account in our bank your sure to lose all you money\\n\")\n    print(\"plss enter your name\\n\")\n    newname = input(\"\\n\")\n    print(\"plss enter an insecure 4 digit code that can be hacked by any one \\n\")\n    newpin = int(input(\"\\n\"))\n    print(\"pls enter the amount you want to loss i mean deposit\\n\")\n    newamount = int(input(\"\\n\"))\n    # return the values, so they can be used outside the function\n    customer_dict = {\"name\":newname, \"pin\":newpin, \"balance\":newamount}\n    return customer_dict\n\ndef get_customer_details(customers):\n    import pprint\n    customer_name = input(\"Get details for which customer?\")\n    pprint.pprint(customers[customer_name])\n\n# load existing\ncustomers_dict = load_customers()\n# add new\nnew_customer = add_customer()\n# add single customer to \"master\" dictionary\ncustomers_dict[new_customer[\"name\"]] = new_customer\n# save all\nsave_customers(customers_dict)\n# get customer details by name\nget_customer_details(customers_dict)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6168696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754841adf59fdf0ffbcba2a1668cafc?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix Jammr", "link": "https://stackoverflow.com/users/6168696/matrix-jammr"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6150, "favorite_count": 0, "closed_date": 1459973764, "accepted_answer_id": 36461030, "answer_count": 3, "score": 0, "last_activity_date": 1541759794, "creation_date": 1459971323, "last_edit_date": 1541759794, "question_id": 36460763, "link": "https://stackoverflow.com/questions/36460763/how-to-store-a-user-input-permanently-in-python", "closed_reason": "Needs more focus", "title": "How to store a user input permanently in python", "body": "<p>I have a high school project to making a fake model of ATM in python how can I store user input permanently in a file and later use that</p>\n\n<p>Suppose I have new user and I want to store his name and pin and the money he deposit, how do I store it so that next time when the program run or the user comes back to check or take out the money and enters the pin or his name it can check using a if statement that the pin and name is correct and show him the details.</p>\n\n<p>I am thinking that when the user enter his name as a variable we store it in a file but I don't know how to exactly do it and after that how can we then run if statement on it again to check the pin is correct or not.</p>\n\n<pre><code>print(\"***********WELCOME TO THE BANK OF LOSS**************\")\ndef make_an_acc():\n    print(\"by maing an account in our bank your sure to lose all you money\\n\")\n    print(\"plss enter your name\\n\")\n    newname = input(\"\\n\")\n    print(\"plss enter an insecure 4 digit code that can be hacked by any one \\n\")\n    newpin = int(input(\"\\n\"))\n    print(\"pls enter the amount you want to loss i mean deposit\\n\")\n    newamount = int(input(\"\\n\"))\n\n def datastore():\n   def namelist:\n   namefile = open(\"namelist\",\"wb\");\n   namefile.write(newname)\n   shi = namefile.read(); `\n</code></pre>\n\n<p>I know my code is not complete but this is what I wrote</p>\n"}, {"tags": ["python", "angularjs", "django", "rest", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 1817, "user_id": 1544500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b4bb4899b045ff2151b03836e2c29ba?s=128&d=identicon&r=PG&f=1", "display_name": "user1544500", "link": "https://stackoverflow.com/users/1544500/user1544500"}, "is_accepted": true, "score": 0, "last_activity_date": 1460191646, "last_edit_date": 1495541262, "creation_date": 1460191646, "answer_id": 36514668, "question_id": 36460759, "link": "https://stackoverflow.com/questions/36460759/how-to-pass-object-id-from-angular-js-to-django-rest-framework/36514668#36514668", "title": "How to pass object ID from Angular.js to Django Rest Framework", "body": "<p>After carefully analyzing this point I started a new question about the serializer and id field which can be seen <a href=\"https://stackoverflow.com/questions/36473795/django-rest-framework-model-id-field-in-nested-relationship-serializer/36501622#36501622\">here</a> which I basically managed to eventually solve :) Ufff! </p>\n"}], "owner": {"reputation": 1817, "user_id": 1544500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b4bb4899b045ff2151b03836e2c29ba?s=128&d=identicon&r=PG&f=1", "display_name": "user1544500", "link": "https://stackoverflow.com/users/1544500/user1544500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 36514668, "answer_count": 1, "score": 0, "last_activity_date": 1460191646, "creation_date": 1459971295, "question_id": 36460759, "link": "https://stackoverflow.com/questions/36460759/how-to-pass-object-id-from-angular-js-to-django-rest-framework", "title": "How to pass object ID from Angular.js to Django Rest Framework", "body": "<p>Using Django Rest Framework I have defined two serializers: </p>\n\n<pre><code>class ServiceSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = ServiceType\n        fields = '__all__'\n\nclass CompanyShortListSerializer(serializers.ModelSerializer):\n\n    services = ServiceSerializer(many=True)\n\n    class Meta:\n        model = Company\n        fields = ( 'id','name', 'address', 'cost_per_patient', 'cost_per_month', 'renting_fee', 'services')\n</code></pre>\n\n<p>Where the ServiceType model consists of three fields: </p>\n\n<pre><code>class ServiceType(models.Model):\n     serviceName = EncryptedCharField(max_length=100, blank=True)\n     servicePrice = EncryptedFloatField(null=True, blank=True)\n     company = models.ForeignKey(Company, related_name = 'services')\n</code></pre>\n\n<p>No need to mention the Company model since it's not important here. </p>\n\n<p>Using Angular I would like to update companies by e.g. removing a given service from a defined Company. </p>\n\n<p>The data in my $http.PUT related to services looks like this: </p>\n\n<pre><code>services:Array[3]\n    0:Object\n        $$hashKey:\"object:26\"\n        company:49\n        id:67\n        serviceName:\"Terapia\"\n        servicePrice:100\n        __proto__:Object\n   *ommitting the others for brevity*\n</code></pre>\n\n<p>etc.</p>\n\n<p>Please <strong>note that the id is sent in this object</strong>. However when I try to do this: </p>\n\n<pre><code> def update(self, instance, validated_data):\n    # Updates and exisitng Company with several services \n    instance.name = validated_data['name']\n    instance.address = validated_data['address']\n    instance.cost_per_patient = validated_data['cost_per_patient']\n    instance.renting_fee = validated_data['renting_fee']\n\n    # create or update page instances that are in the request\n    for service in validated_data['services']:\n        updatedService = ServiceType(id=service['id'], serviceName = service['serviceName'], servicePrice = service['servicePrice'], company=instance)\n        updatedService.save()\n\n    return instance\n</code></pre>\n\n<p>The line <strong><code>id=service['id']</code> creates an error since <code>service</code> does not contain the id field</strong>. What this function receives is on Ordered Dictionary like this:</p>\n\n<pre><code>[ \nOrderedDict([(u'serviceName', u'Terapia'), (u'servicePrice', 100.0), (u'company ', &lt;Company: Test 1&gt;)]), \nOrderedDict([(u'serviceName', u'Terapia par'), (u'servicePrice', 150.0), (u'company', &lt;Company: Test 1&gt;)]), \nOrderedDict([(u'serviceName ', u'Terapia po angielsku'), (u'servicePrice', 120.0), (u'company', &lt;Company: Test 1&gt;)])\n] \n</code></pre>\n\n<p>What is wrong - why is the ID not passed to the serializer and how to fix that? \nThanks in advance for your help!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1459971842, "post_id": 36460758, "comment_id": 60533660, "body": "Can you give us a longer example? There are many ways to do it for the current example. Basically, we want to see whether the list is populated only by strings, or lists of lists with strings, etc."}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 3, "creation_date": 1459972027, "post_id": 36460758, "comment_id": 60533751, "body": "So far this looks like a duplicate. <a href=\"https://stackoverflow.com/questions/12453580/concatenate-item-in-list-to-strings-python\" title=\"concatenate item in list to strings python\">stackoverflow.com/questions/12453580/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1459971845, "creation_date": 1459971845, "answer_id": 36460937, "question_id": 36460758, "link": "https://stackoverflow.com/questions/36460758/combining-elements-of-a-list-in-python-to-a-single-element/36460937#36460937", "title": "Combining elements of a list in python to a single element", "body": "<pre><code>l2 = [','.join(l)]\n</code></pre>\n\n<p>There's not much point to wrapping this output in a list, though. It'd probably make more sense to just get the string:</p>\n\n<pre><code>joined_string = ','.join(l)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "is_accepted": false, "score": 0, "last_activity_date": 1459971846, "creation_date": 1459971846, "answer_id": 36460938, "question_id": 36460758, "link": "https://stackoverflow.com/questions/36460758/combining-elements-of-a-list-in-python-to-a-single-element/36460938#36460938", "title": "Combining elements of a list in python to a single element", "body": "<p>You can use <code>str.join</code></p>\n\n<pre><code>&gt;&gt;&gt; l = ['a','b']\n&gt;&gt;&gt; [', '.join(l)]\n['a, b']\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6168738, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59106ad4229f5e5ce08950ed6addeb24?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/6168738/ankit-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1459988606, "accepted_answer_id": 36460937, "answer_count": 2, "score": 0, "last_activity_date": 1459972086, "creation_date": 1459971287, "question_id": 36460758, "link": "https://stackoverflow.com/questions/36460758/combining-elements-of-a-list-in-python-to-a-single-element", "closed_reason": "Needs details or clarity", "title": "Combining elements of a list in python to a single element", "body": "<p>list:</p>\n\n<pre><code>['a','b']\n</code></pre>\n\n<p>Expected List:</p>\n\n<pre><code>['a,b']\n</code></pre>\n\n<p>Is there a pythonic way to do this?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 3, "last_activity_date": 1459971476, "creation_date": 1459971476, "answer_id": 36460829, "question_id": 36460751, "link": "https://stackoverflow.com/questions/36460751/transfer-a-pandas-data-table-to-text-file/36460829#36460829", "title": "Transfer a pandas data table to text file", "body": "<p>You can use <code>\\n</code> as the delimiter:</p>\n\n<pre><code>df.to_csv(\"test.txt\", header=False, index=False, sep = \"\\n\")\n</code></pre>\n\n<p>Out:</p>\n\n<pre><code>&gt;H97\nGGAGTCGG\n&gt;H80\nGAGGCTTAGTCCAG\n&gt;H85\nGAAGCCTTCGGAGA\n&gt;H91\nCTGTGCAGCCT\n&gt;H91094\nGCCTGGTCCAGCCT\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 0, "creation_date": 1459972146, "post_id": 36460985, "comment_id": 60533819, "body": "This is unrelated to OP&#39;s question"}], "tags": [], "owner": {"reputation": 114, "user_id": 2886653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EDrnc.jpg?s=128&g=1", "display_name": "lps", "link": "https://stackoverflow.com/users/2886653/lps"}, "is_accepted": false, "score": -1, "last_activity_date": 1459972034, "creation_date": 1459972034, "answer_id": 36460985, "question_id": 36460751, "link": "https://stackoverflow.com/questions/36460751/transfer-a-pandas-data-table-to-text-file/36460985#36460985", "title": "Transfer a pandas data table to text file", "body": "<p>Not sure how you intend to use it afterwards but that text file might be fairly useless if you want to load that DataFrame again. Writing it into a simple TXT file may be not structured enough. </p>\n\n<p>Why don't you save it as CSV file? This way you will be able to read it as such again.</p>\n\n<pre><code>df.to_csv(\"out.csv\")\n</code></pre>\n\n<p>and then you can load it </p>\n\n<pre><code>df = pandas.read_csv(\"out.csv\")\n</code></pre>\n"}], "owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 36460829, "answer_count": 2, "score": 1, "last_activity_date": 1459972034, "creation_date": 1459971253, "last_edit_date": 1459971996, "question_id": 36460751, "link": "https://stackoverflow.com/questions/36460751/transfer-a-pandas-data-table-to-text-file", "title": "Transfer a pandas data table to text file", "body": "<p>I have a sample data set:</p>\n\n<pre><code>import pandas as pd\n\ndf = {'ID': ['&gt;H97', '&gt;H80','&gt;H85','&gt;H91','&gt;H91094'],\n      'Sequence': ['GGAGTCGG','GAGGCTTAGTCCAG','GAAGCCTTCGGAGA', 'CTGTGCAGCCT', 'GCCTGGTCCAGCCT']}\n\n\ndf = pd.DataFrame(df)\n</code></pre>\n\n<p>the data set looks like this:</p>\n\n<pre><code>&gt;&gt;&gt; df\n        ID        Sequence\n0     &gt;H97        GGAGTCGG\n1     &gt;H80        GAGGCTTAGTCCAG\n2     &gt;H85        GAAGCCTTCGGAGA\n3     &gt;H91        CTGTGCAGCCT\n4     &gt;H91094     GCCTGGTCCAGCCT\n</code></pre>\n\n<p>I want to write to an <strong>output .txt file</strong> so that the file looks like:</p>\n\n<pre><code>&gt;H97 \nGGAGTCGG\n&gt;H80\nGAGGCTTAGTCCAG\n&gt;H85        \nGAAGCCTTCGGAGA\n&gt;H91        \nCTGTGCAGCCT\n&gt;H91094\nGCCTGGTCCAGCCT\n</code></pre>\n"}, {"tags": ["python", "pandas", "nltk"], "comments": [{"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 2, "creation_date": 1459972376, "post_id": 36460735, "comment_id": 60533963, "body": "Like, <code>pd.read_csv(&#39;1459966468_324.csv&#39;, encoding=&#39;utf8&#39;)</code> if your file is UTF8 ?"}, {"owner": {"reputation": 6272, "user_id": 127508, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ptOi1.jpg?s=128&g=1", "display_name": "Istvan", "link": "https://stackoverflow.com/users/127508/istvan"}, "reply_to_user": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 0, "creation_date": 1459978816, "post_id": 36460735, "comment_id": 60537608, "body": "Yes the file is UTF-8"}], "answers": [{"tags": [], "owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "is_accepted": true, "score": 1, "last_activity_date": 1460515318, "creation_date": 1460515318, "answer_id": 36587601, "question_id": 36460735, "link": "https://stackoverflow.com/questions/36460735/how-to-tokenize-unicode-text-with-nltk/36587601#36587601", "title": "How to tokenize unicode text with nltk?", "body": "<p>Use the <code>encoding</code> argument to tell pandas how to parse the file:</p>\n\n<pre><code>pd.read_csv('1459966468_324.csv', encoding='utf8')\n</code></pre>\n"}], "owner": {"reputation": 6272, "user_id": 127508, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ptOi1.jpg?s=128&g=1", "display_name": "Istvan", "link": "https://stackoverflow.com/users/127508/istvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 36587601, "answer_count": 1, "score": 0, "last_activity_date": 1460515318, "creation_date": 1459971216, "question_id": 36460735, "link": "https://stackoverflow.com/questions/36460735/how-to-tokenize-unicode-text-with-nltk", "title": "How to tokenize unicode text with nltk?", "body": "<p>I am trying to load a csv into a DataFrame and using it for NLP. I am getting a UnicodeDecodeError:</p>\n\n<pre><code>import pandas as pd\nimport nltk\ndf = DataFrame(pd.read_csv('1459966468_324.csv'))\ndf['tokenized_sents'] = df.apply(lambda row:nltk.word_tokenize(row['sentences']), axis=1)\n\n\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 29: ordinal not in range(128)\n</code></pre>\n\n<p>Is there a way to process Unicode text with </p>\n"}, {"tags": ["python", "python-requests", "postman", "icws"], "comments": [{"owner": {"reputation": 7159, "user_id": 877279, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5fa0544f9a87c652a5b5c1d4b401fcae?s=128&d=identicon&r=PG", "display_name": "Tyler Sebastian", "link": "https://stackoverflow.com/users/877279/tyler-sebastian"}, "edited": false, "score": 0, "creation_date": 1459987131, "post_id": 36460671, "comment_id": 60540369, "body": "are you sure <code>csrfToken</code> has a value at that point in the code?"}, {"owner": {"reputation": 1872, "user_id": 3651127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LZvG.png?s=128&g=1", "display_name": "dagrha", "link": "https://stackoverflow.com/users/3651127/dagrha"}, "edited": false, "score": 0, "creation_date": 1460050799, "post_id": 36460671, "comment_id": 60576366, "body": "You might need to use a <a href=\"http://docs.python-requests.org/en/latest/user/advanced/#session-objects\" rel=\"nofollow noreferrer\"><code>requests.session</code> object</a> so that your <code>csrfToken</code> persists across your requests"}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "edited": false, "score": 0, "creation_date": 1460246374, "post_id": 36460671, "comment_id": 60653051, "body": "The way you are sending the CSRF token with requests seems correct. If the token were invalid you would get a different error message (hopefully). So maybe the header key name <code>ININ-ICWS-CSRF-Token</code> isn&#39;t correct since the error tells you is missing? Is there any client that can make a successful request to this server so you can inspect the network traffic with your browser? Do you have access to the source of the server web app?"}, {"owner": {"reputation": 11, "user_id": 6168693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a612653478fb114506f8f361679e4c20?s=128&d=identicon&r=PG&f=1", "display_name": "R S Gill", "link": "https://stackoverflow.com/users/6168693/r-s-gill"}, "edited": false, "score": 0, "creation_date": 1460336625, "post_id": 36460671, "comment_id": 60679022, "body": "Thanks for all your replies. Turns out I was missing a cookie. I ended up using a session to get the cookie. Once I had the cookie, the post (modified to include the cookie) worked."}], "owner": {"reputation": 11, "user_id": 6168693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a612653478fb114506f8f361679e4c20?s=128&d=identicon&r=PG&f=1", "display_name": "R S Gill", "link": "https://stackoverflow.com/users/6168693/r-s-gill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 748, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1581880606, "creation_date": 1459971042, "last_edit_date": 1581880606, "question_id": 36460671, "link": "https://stackoverflow.com/questions/36460671/python-2-7-requests-get-with-header", "title": "Python 2.7 Requests GET with header", "body": "<p>I'm trying to send a header with a requests.get:</p>\n\n<pre><code>import requests\n\n\nurl = 'http://qp-nachorat2000:8018/icws/' + sessionID + '/status/user-statuses/Administrator' \nheader = {'ININ-ICWS-CSRF-Token': csrfToken} \npcRequest = requests.get(url, headers=header)\n</code></pre>\n\n<p>This results in a 400 response:</p>\n\n<pre><code>{u'errorCode': 2, \n u'message': u'A session CSRF token is needed for this request, but none was provided.', \n u'errorId': u'error.request.accessDenied.csrfToken.missing'}\n</code></pre>\n\n<p>The same GET works perfectly fine in Postman:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ecUQb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ecUQb.png\" alt=\"asdfd\"></a></p>\n\n<p>What am I missing? Any help would be appreciated.</p>\n"}, {"tags": ["python", "if-statement"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459971347, "post_id": 36460710, "comment_id": 60533393, "body": "if amountPaid.group(1):         shelfFile[str(name)+&#39;balance&#39;]+=float(amountPaid.group(2))     else:         shelfFile[str(name)+&#39;balance&#39;]-=float(amountPaid.group(2)). This is the actual code, so if I do the above that would produce a large line."}, {"owner": {"reputation": 2170, "user_id": 5724920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75ab4d29ed9a0f64acc2b832344100bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/5724920/jason"}, "reply_to_user": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459971405, "post_id": 36460710, "comment_id": 60533427, "body": "<code>shelfFile[str(name)+&#39;balance&#39;]+=float(amountPaid.group(2)) if amountPaid.group(1) else shelfFile[str(name)+&#39;balance&#39;]-=float(amountPaid.group(2))</code> :)"}, {"owner": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459971649, "post_id": 36460710, "comment_id": 60533556, "body": "Is it possible to reduce the length of the code?"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1459971767, "post_id": 36460710, "comment_id": 60533624, "body": "if it is difficult to read of too long, using the ternary notation, you should use a traditional multiline if / else, to improve readability"}, {"owner": {"reputation": 2170, "user_id": 5724920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75ab4d29ed9a0f64acc2b832344100bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/5724920/jason"}, "edited": false, "score": 0, "creation_date": 1459971788, "post_id": 36460710, "comment_id": 60533633, "body": "In that case, it&#39;s better to put it on four lines for readability&#39;s sake."}, {"owner": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459971981, "post_id": 36460710, "comment_id": 60533729, "body": "Thanks, I should concentrate more on readability :)"}], "tags": [], "owner": {"reputation": 2170, "user_id": 5724920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75ab4d29ed9a0f64acc2b832344100bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/5724920/jason"}, "is_accepted": true, "score": 4, "last_activity_date": 1459971169, "last_edit_date": 1495535313, "creation_date": 1459971169, "answer_id": 36460710, "question_id": 36460659, "link": "https://stackoverflow.com/questions/36460659/if-else-in-python/36460710#36460710", "title": "If/else in python", "body": "<p>Of course.</p>\n\n<pre><code>print(a+b if a==1 else a-b)\n</code></pre>\n\n<p>The word you're looking for is <a href=\"https://stackoverflow.com/questions/394809/does-python-have-a-ternary-conditional-operator\">ternary operator</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459971436, "post_id": 36460713, "comment_id": 60533449, "body": "if amountPaid.group(1):         shelfFile[str(name)+&#39;balance&#39;]+=float(amountPaid.group(2))     else:         shelfFile[str(name)+&#39;balance&#39;]-=float(amountPaid.group(2)). This is the actual code, so if I do the above that would produce a large line."}, {"owner": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459972038, "post_id": 36460713, "comment_id": 60533754, "body": "Thanks for the ideas :)"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "reply_to_user": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459972079, "post_id": 36460713, "comment_id": 60533779, "body": "@DeepakKrishna You are welcome. Don&#39;t forget to accept the answer that helped you as it indicates to other readers what you found helpful."}], "tags": [], "owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1459971565, "last_edit_date": 1459971565, "creation_date": 1459971176, "answer_id": 36460713, "question_id": 36460659, "link": "https://stackoverflow.com/questions/36460659/if-else-in-python/36460713#36460713", "title": "If/else in python", "body": "<p>You can do this using the ternary condition operator: </p>\n\n<pre><code>a = a + b if a == 1 else a - b\n</code></pre>\n\n<p>If <code>a == 1</code> is true, then a will hold the result of <code>a + b</code>, else it will hold the result of <code>a - b</code></p>\n\n<p>Demo: </p>\n\n<pre><code>a = 4\nb = 2\n\n# a should equal to 2\na = a + b if a == 1 else a - b\n</code></pre>\n\n<hr>\n\n<pre><code>a = 1\nb = 2\n\n# a should equal to 3\na = a + b if a == 1 else a - b\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "edited": false, "score": 0, "creation_date": 1459972008, "post_id": 36460811, "comment_id": 60533740, "body": "Thanks, that gave me many options to use in future :)"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1459973297, "last_edit_date": 1459973297, "creation_date": 1459971448, "answer_id": 36460811, "question_id": 36460659, "link": "https://stackoverflow.com/questions/36460659/if-else-in-python/36460811#36460811", "title": "If/else in python", "body": "<pre><code>a = a+b if a==1 else a-b\n</code></pre>\n\n<p>is the sane and reasonable person's approach, so here's the less sane version that more directly selects the <em>operation</em>, not the complete <em>expression</em> including operands, removing the need to repeat the operands in two places:</p>\n\n<pre><code>from operator import iadd, isub  # Like to += and -=, but you need to assign return\n\na = (iadd if a == 1 else isub)(a, b)\n</code></pre>\n\n<p>or even more concise/insane using <code>bool</code>s to index a <code>tuple</code>:</p>\n\n<pre><code>a = (isub, iadd)[a == 1](a, b)\n</code></pre>\n\n<p>To be clear, this is silly. Just use <code>a = a+b if a==1 else a-b</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 6168717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541c232c796e0cfe378f1a403113adc4?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Krishna", "link": "https://stackoverflow.com/users/6168717/deepak-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1459971663, "accepted_answer_id": 36460710, "answer_count": 3, "score": 2, "last_activity_date": 1459973297, "creation_date": 1459971003, "last_edit_date": 1459971034, "question_id": 36460659, "link": "https://stackoverflow.com/questions/36460659/if-else-in-python", "closed_reason": "Duplicate", "title": "If/else in python", "body": "<p>I know this might sound silly, but I want to know if there is a way like this to use.</p>\n\n<p>My code is:</p>\n\n<pre><code>print(a (+=) if a==1 else (-=) b)\n</code></pre>\n\n<p>What I want it to do is,</p>\n\n<pre><code>if a==1:\n    print(a+b) \nelse:\n    print(a-b)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 602297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c4bad0831b4812d0603471dbd75c21ff?s=128&d=identicon&r=PG", "display_name": "jpatton", "link": "https://stackoverflow.com/users/602297/jpatton"}, "edited": false, "score": 0, "creation_date": 1459975269, "post_id": 36460921, "comment_id": 60535635, "body": "Thanks! Kicking myself for not thinking to reset both indexes and go from there :) Fortunately, I don&#39;t have to worry about different years right now, but I think it&#39;s pretty clear how to do it if (when) it becomes necessary."}], "tags": [], "owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1459972126, "last_edit_date": 1459972126, "creation_date": 1459971795, "answer_id": 36460921, "question_id": 36460639, "link": "https://stackoverflow.com/questions/36460639/pandas-dataframe-groupby-a-timestamp-frequency-with-multiindex/36460921#36460921", "title": "Pandas DataFrame groupby a timestamp frequency with multiindex", "body": "<p>Assuming you want to group by the month, and not the year-month (e.g., 2012-03 and 2013-03 are in the same group), you could do this: </p>\n\n<ul>\n<li>Reset your index to that <code>dgg</code> and <code>timestamp</code> become regular columns</li>\n<li>the compute  month into it's own column, </li>\n<li>then group by <code>dgg</code> and <code>month</code>. </li>\n</ul>\n\n<p>That looks like this:</p>\n\n<pre><code>result = (\n    df.reset_index()\n      .assign(month=lambda x: x['timestamp'].dt.month)\n      .grouby(by=['dgg', 'month'])\n      .&lt;apply/agg/transform/filter&gt;(...)\n)\n</code></pre>\n"}], "owner": {"reputation": 396, "user_id": 602297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c4bad0831b4812d0603471dbd75c21ff?s=128&d=identicon&r=PG", "display_name": "jpatton", "link": "https://stackoverflow.com/users/602297/jpatton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 36460921, "answer_count": 1, "score": 2, "last_activity_date": 1459972126, "creation_date": 1459970957, "question_id": 36460639, "link": "https://stackoverflow.com/questions/36460639/pandas-dataframe-groupby-a-timestamp-frequency-with-multiindex", "title": "Pandas DataFrame groupby a timestamp frequency with multiindex", "body": "<p>I have a DataFrame with a MultiIndex (timestamp, dgg) like so:</p>\n\n<pre><code>In [1]: df.head()\nOut[1]: \n                   smos_vwc   map_vwc\ntimestamp  dgg                       \n2015-03-31 233862  0.195203  0.315370\n           233348  0.321409  0.271887\n           233349  0.272508  0.275955\n           233350  0.249663  0.279324\n           232833  0.269949  0.266547\n</code></pre>\n\n<p>The timestamps go on for many days. I'd like to group this data by month and dgg, but I'm not sure a good way to go about it. If I were grouping by month with a DataFrame with a normal index, I could do <code>df.groupby(df.index.month)</code> (or use <code>pd.TimeGrouper</code>), but a MultiIndex doesn't have the DatetimeIndex attributes.</p>\n\n<p>And just to throw it out there, if I don't care to keep around dgg, I can <code>df.reset_index(level='dgg').groupby(df.reset_index(level='dgg').index.month)</code>, but then I lose dgg grouping.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 2, "creation_date": 1459971045, "post_id": 36460637, "comment_id": 60533198, "body": "Lists and other mutable types cannot be dictionary keys. What do you want to do with this?"}, {"owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "reply_to_user": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1459971140, "post_id": 36460637, "comment_id": 60533257, "body": "@tzaman compare it with another dictionary similar to this to find indexes of elements in the two."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1459971407, "post_id": 36460637, "comment_id": 60533433, "body": "but you can use tuple : <code>{ tuple(k): v for v, k in enumerate(lst)}</code>"}, {"owner": {"reputation": 7789, "user_id": 2271269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d7CGe.jpg?s=128&g=1", "display_name": "Akshat Mahajan", "link": "https://stackoverflow.com/users/2271269/akshat-mahajan"}, "edited": false, "score": 0, "creation_date": 1459972305, "post_id": 36460637, "comment_id": 60533908, "body": "<a href=\"https://pypi.python.org/pypi/hashable_collections/1.1\" rel=\"nofollow noreferrer\">shameless plug for a hashable list implementation</a>. But note the other answers are probably better."}], "answers": [{"tags": [], "owner": {"reputation": 2367, "user_id": 3076091, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CrUBz.jpg?s=128&g=1", "display_name": "dnit13", "link": "https://stackoverflow.com/users/3076091/dnit13"}, "is_accepted": false, "score": 1, "last_activity_date": 1459971417, "creation_date": 1459971417, "answer_id": 36460801, "question_id": 36460637, "link": "https://stackoverflow.com/questions/36460637/python-convert-2d-list-to-dictionary/36460801#36460801", "title": "Python: Convert 2D list to dictionary", "body": "<p>Mutable types cannot be keys of a dictionary, but you can store tuples as dictionary keys for your purpose like this:</p>\n\n<pre><code>{tuple(k): v for v, k in enumerate(lst)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": true, "score": 2, "last_activity_date": 1459971425, "creation_date": 1459971425, "answer_id": 36460804, "question_id": 36460637, "link": "https://stackoverflow.com/questions/36460637/python-convert-2d-list-to-dictionary/36460804#36460804", "title": "Python: Convert 2D list to dictionary", "body": "<p>Lists are mutable, and thus cannot be used as dictionary keys. You could convert them to tuples if you want:</p>\n\n<pre><code>{tuple(k): v for v, k in enumerate(lst)}\n</code></pre>\n"}], "owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1424, "favorite_count": 1, "accepted_answer_id": 36460804, "answer_count": 2, "score": 0, "last_activity_date": 1569523466, "creation_date": 1459970953, "question_id": 36460637, "link": "https://stackoverflow.com/questions/36460637/python-convert-2d-list-to-dictionary", "title": "Python: Convert 2D list to dictionary", "body": "<p>I am trying to convert the following 2D list:</p>\n\n<pre><code>lst = [['A','B'],['C','D']]\n</code></pre>\n\n<p>To a dictionary like:</p>\n\n<pre><code>dict = {['A','B']:0, ['C','D']:1}\n</code></pre>\n\n<p>I have tried answers from other posts like the following:</p>\n\n<pre><code>{k: v for v, k in enumerate(lst)}\n</code></pre>\n\n<p>Which gives me this error:</p>\n\n<pre><code>unhashable type: 'list'\n</code></pre>\n\n<p>Any help is much appreciated. Thanks.</p>\n"}, {"tags": ["python", "opencv", "cluster-analysis"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1459971156, "post_id": 36460624, "comment_id": 60533272, "body": "Have a look <a href=\"http://docs.opencv.org/2.4/modules/contrib/doc/facerec/facerec_tutorial.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 107, "user_id": 5398292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6583b77f374f68a74246b811f35bffab?s=128&d=identicon&r=PG&f=1", "display_name": "N. Ruchers", "link": "https://stackoverflow.com/users/5398292/n-ruchers"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1459971401, "post_id": 36460624, "comment_id": 60533423, "body": "I may be mistaken but I think face recognition doesn&#39;t fit with what I want to do. I don&#39;t have any training set, I want to do this in an unsupervised way if it is possible."}], "answers": [{"tags": [], "owner": {"reputation": 1505, "user_id": 5589662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be6f0835f6ef0dd2bcb887780115ec2?s=128&d=identicon&r=PG&f=1", "display_name": "taarraas", "link": "https://stackoverflow.com/users/5589662/taarraas"}, "is_accepted": true, "score": 0, "last_activity_date": 1460140037, "creation_date": 1460140037, "answer_id": 36506736, "question_id": 36460624, "link": "https://stackoverflow.com/questions/36460624/cluster-groups-of-face-images/36506736#36506736", "title": "Cluster groups of face images", "body": "<p>To make clusters without having to specify the number of clusters you want to have at the end, you can use MST based clustering : <a href=\"https://sites.google.com/site/dataclusteringalgorithms/mst-based-clustering-algorithm\" rel=\"nofollow\">https://sites.google.com/site/dataclusteringalgorithms/mst-based-clustering-algorithm</a></p>\n\n<p>To have one cluster per person appearing in the video, you need to build better similarity function between faces. State-of-the-art face recognition systems uses Convolutional Neural Network approach. You can read more about it in Facebook article : <a href=\"https://www.cs.toronto.edu/~ranzato/publications/taigman_cvpr14.pdf\" rel=\"nofollow\">https://www.cs.toronto.edu/~ranzato/publications/taigman_cvpr14.pdf</a>. </p>\n"}], "owner": {"reputation": 107, "user_id": 5398292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6583b77f374f68a74246b811f35bffab?s=128&d=identicon&r=PG&f=1", "display_name": "N. Ruchers", "link": "https://stackoverflow.com/users/5398292/n-ruchers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 1, "accepted_answer_id": 36506736, "answer_count": 1, "score": 2, "last_activity_date": 1460140037, "creation_date": 1459970913, "last_edit_date": 1459971281, "question_id": 36460624, "link": "https://stackoverflow.com/questions/36460624/cluster-groups-of-face-images", "title": "Cluster groups of face images", "body": "<p>I have extracted faces from a video and I clustered them in big groups (each group contains faces from the same person, I did this using change of background detection). Now I want to cluster those groups into a smaller number of groups and to have, at the end, one cluster per person appearing in the video.</p>\n\n<p>At the moment I managed to cluster those groups using histograms of colors and K-means.\nThe problem is that when skin and hair color are too close for two different people, the clusters are bad. Which other features can I use for this? I tried DAISY descriptors but the results were not interesting.\nAlso I would like to make those clusters without having to specify the number of clusters I want to have at the end.</p>\n"}, {"tags": ["python", "google-app-engine"], "answers": [{"comments": [{"owner": {"reputation": 37598, "user_id": 153407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zoFYE.png?s=128&g=1", "display_name": "Dan McGrath", "link": "https://stackoverflow.com/users/153407/dan-mcgrath"}, "edited": false, "score": 0, "creation_date": 1459971694, "post_id": 36460866, "comment_id": 60533585, "body": "On a side, note, I&#39;ll flag the page you linked to for better clarification - if you&#39;ve always used the default module on automatic scaling, the page you linked assumes someone has knowledge on module configuration then it should."}, {"owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "edited": false, "score": 2, "creation_date": 1459974728, "post_id": 36460866, "comment_id": 60535306, "body": "I would add that there is no set limit on how long a task can run if you use basic or manual scaling, but instances do restart sometimes. So it&#39;s better to split your task into smaller sub-task, or implement a shutdown hook."}], "tags": [], "owner": {"reputation": 37598, "user_id": 153407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zoFYE.png?s=128&g=1", "display_name": "Dan McGrath", "link": "https://stackoverflow.com/users/153407/dan-mcgrath"}, "is_accepted": false, "score": 1, "last_activity_date": 1459971616, "creation_date": 1459971616, "answer_id": 36460866, "question_id": 36460604, "link": "https://stackoverflow.com/questions/36460604/gae-how-to-indicate-that-a-queue-will-run-for-hours/36460866#36460866", "title": "GAE How to indicate that a queue will run for hours?", "body": "<p>You'll need to configure a module to use basic or manual scaling, deploy your task handling code to an instance for that module.</p>\n\n<p>You can read more about configuring modules/versions/instances on the <a href=\"https://cloud.google.com/appengine/docs/python/modules/\" rel=\"nofollow\">App Engine Modules page for Python</a></p>\n"}], "owner": {"reputation": 35280, "user_id": 330867, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4c1796810a014e9ed1f3198c3edd103e?s=128&d=identicon&r=PG", "display_name": "Cyril N.", "link": "https://stackoverflow.com/users/330867/cyril-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459971616, "creation_date": 1459970800, "question_id": 36460604, "link": "https://stackoverflow.com/questions/36460604/gae-how-to-indicate-that-a-queue-will-run-for-hours", "title": "GAE How to indicate that a queue will run for hours?", "body": "<p>In the <a href=\"https://cloud.google.com/appengine/docs/python/taskqueue/overview-push#task_deadlines\" rel=\"nofollow\">documentation</a> indicate that a task :</p>\n\n<blockquote>\n  <p>Tasks targeted at an automatic scaled module must finish execution\n  within 10 minutes. If you have tasks that require more time or\n  computing resources, they can be sent to manual or basic scaling\n  modules, where they can run up to 24 hours.</p>\n</blockquote>\n\n<p>The link surrounding <em><a href=\"https://cloud.google.com/appengine/docs/python/taskqueue/overview-push#set_module\" rel=\"nofollow\">manual or basic scaling modules</a></em> talks about a target, but doesn't say more about how to have a task that runs for a day.</p>\n\n<p>You guessed my question :) How do I tell GAE that this specific task will be run for a day, not a minute ?</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 1889, "user_id": 1477364, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ded6e69660b0493583d054a8861fdefb?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/1477364/travis"}, "is_accepted": false, "score": 0, "last_activity_date": 1459971373, "creation_date": 1459971373, "answer_id": 36460779, "question_id": 36460570, "link": "https://stackoverflow.com/questions/36460570/python-selenium-options-drop-down/36460779#36460779", "title": "python Selenium options drop down", "body": "<p>These functions are properties of your <code>webdriver</code> instance. You need to do something like this:</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Firefox()\ndriver.get(\"http://www.python.org\")\ndriver.find_element_by_xpath(\"//select[@id='groupby1']/option[@value='ReportDate']\").click()\n</code></pre>\n\n<p>See the <a href=\"http://selenium-python.readthedocs.org/getting-started.html\" rel=\"nofollow\">getting started page</a> for examples.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6168648, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40719984b37253f43824275ddbe1dd66?s=128&d=identicon&r=PG&f=1", "display_name": "symn28", "link": "https://stackoverflow.com/users/6168648/symn28"}, "edited": false, "score": 0, "creation_date": 1459976219, "post_id": 36461017, "comment_id": 60536229, "body": "Here is the error message:     elem= Select(driver.find_element_by_id(&#39;groupby1&#39;)).select_by_valu&zwnj;&#8203;e(&#39;ReportDate&#39;) NameError: name &#39;Select&#39; is not defined. Is there something I need to import other than  from selenium import webdriver?"}, {"owner": {"reputation": 34075, "user_id": 5168011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb70c32e1e533e7c0cb2f9317a6b2aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/5168011/guy"}, "reply_to_user": {"reputation": 13, "user_id": 6168648, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40719984b37253f43824275ddbe1dd66?s=128&d=identicon&r=PG&f=1", "display_name": "symn28", "link": "https://stackoverflow.com/users/6168648/symn28"}, "edited": false, "score": 0, "creation_date": 1459976497, "post_id": 36461017, "comment_id": 60536394, "body": "@symn28 Did you import select? <code>from selenium.webdriver.support.ui import Select</code>"}, {"owner": {"reputation": 13, "user_id": 6168648, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40719984b37253f43824275ddbe1dd66?s=128&d=identicon&r=PG&f=1", "display_name": "symn28", "link": "https://stackoverflow.com/users/6168648/symn28"}, "edited": false, "score": 0, "creation_date": 1459976580, "post_id": 36461017, "comment_id": 60536438, "body": "I just did and now it works! Thank you for your help!"}], "tags": [], "owner": {"reputation": 34075, "user_id": 5168011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb70c32e1e533e7c0cb2f9317a6b2aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/5168011/guy"}, "is_accepted": true, "score": 0, "last_activity_date": 1459972149, "creation_date": 1459972149, "answer_id": 36461017, "question_id": 36460570, "link": "https://stackoverflow.com/questions/36460570/python-selenium-options-drop-down/36461017#36461017", "title": "python Selenium options drop down", "body": "<p><a href=\"http://selenium-python.readthedocs.org/api.html#module-selenium.webdriver.support.select\" rel=\"nofollow\">Select</a> doesn't have <code>click()</code>. Use it like this</p>\n\n<pre><code>Select(driver.find_element_by_id('groupby1')).select_by_value('ReportDate')\n# or by text\nSelect(driver.find_element_by_id('groupby1')).select_by_visible_text('ReportDate')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6168648, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40719984b37253f43824275ddbe1dd66?s=128&d=identicon&r=PG&f=1", "display_name": "symn28", "link": "https://stackoverflow.com/users/6168648/symn28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2304, "favorite_count": 0, "accepted_answer_id": 36461017, "answer_count": 2, "score": 0, "last_activity_date": 1459972149, "creation_date": 1459970689, "last_edit_date": 1459970771, "question_id": 36460570, "link": "https://stackoverflow.com/questions/36460570/python-selenium-options-drop-down", "title": "python Selenium options drop down", "body": "<p>I am new to python. I have a code in R that I am trying to replace with a python\nscript. I am running into issues getting python to select a value from a drop\ndown menu.</p>\n\n<p>This is the code in R that worked:</p>\n\n<pre><code>remDr$findElement(using = 'xpath', \"//select[@id = 'groupby1']/option[@value = 'ReportDate']\")$clickElement()\n</code></pre>\n\n<p>This is the HTML code: </p>\n\n<pre><code>select style=\"\" class=\"dropdown\" name=\"groupby1\" id=\"groupby1\" accesskey=\"\" waffle_affected_fields=\"\"\n\noption value=\"ReportData\"&gt;Report Date&lt;/option&gt;\n</code></pre>\n\n<p>here are a couple things I tried after searching how to do this in python and I\nkeep running into errors.</p>\n\n<pre><code>find_element_by_xpath(\"//select[@id='groupby1']/option[@value='ReportDate']\").click()\nNameError: name 'find_element_by_xpath' is not defined\n\nSelect(driver.find_element_by_css_selector(\"select#groupby1\")).select_by_value('ReportDate').click()\nNameError: name 'Select' is not defined\n</code></pre>\n\n<p>Any help is appropriated! </p>\n"}, {"tags": ["python", "ubuntu"], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 3262370, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/870798309e179d938a85e85c8c997759?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3262370/joshua"}, "edited": false, "score": 0, "creation_date": 1459976521, "post_id": 36461451, "comment_id": 60536411, "body": "This is what I was looking for!! I tried for i   in *.xlsx; do  libreoffice --headless --convert-to csv &quot;$i&quot; ; done but realized it was converting to odt format which was not compatible with what I was converting file for.Thanks you saved my face"}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "reply_to_user": {"reputation": 347, "user_id": 3262370, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/870798309e179d938a85e85c8c997759?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3262370/joshua"}, "edited": false, "score": 0, "creation_date": 1459976799, "post_id": 36461451, "comment_id": 60536577, "body": "@Joshua glad it helps. can you press the check mark to choose this as the correct answer:)"}, {"owner": {"reputation": 347, "user_id": 3262370, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/870798309e179d938a85e85c8c997759?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3262370/joshua"}, "edited": false, "score": 0, "creation_date": 1459977500, "post_id": 36461451, "comment_id": 60536984, "body": "Just a note: to avoid matching multiple files with *.xlsx file extensions which might convert unintended files and mess you up you can pass absolute path to glob.glob like glob.glob(/path/to/myxlsxfiles)"}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": true, "score": 1, "last_activity_date": 1459973746, "creation_date": 1459973746, "answer_id": 36461451, "question_id": 36460569, "link": "https://stackoverflow.com/questions/36460569/convert-a-batch-of-xlsx-to-xls-in-programmatically-using-python-in-ubuntu/36461451#36461451", "title": "Convert a batch of xlsx to xls in programmatically using python in ubuntu", "body": "<p>On Ubuntu, you can install <code>unoconv</code></p>\n\n<pre><code>sudo apt-get install unoconv\nunoconv -f xls test.xlsx\n</code></pre>\n\n<p>If you have multiple files to convert, try:</p>\n\n<pre><code>ls *xlsx | xargs unoconv -f xls\n</code></pre>\n\n<p><em>Alternatively</em>, you can wrap up the command by python script:</p>\n\n<pre><code>import glob\nimport os\n\nxlsx_files = glob.glob(\"*xlsx\")\nfor xlsx_file in xlsx_files:\n    os.system(\"unoconv -f xls {0}\".format(xlsx_file) )\n</code></pre>\n\n<p>My OS is Ubuntu 15.10\n<strong>Please backup your files and then try the command.</strong></p>\n"}], "owner": {"reputation": 347, "user_id": 3262370, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/870798309e179d938a85e85c8c997759?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3262370/joshua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 1, "accepted_answer_id": 36461451, "answer_count": 1, "score": -1, "last_activity_date": 1459973746, "creation_date": 1459970686, "last_edit_date": 1459971547, "question_id": 36460569, "link": "https://stackoverflow.com/questions/36460569/convert-a-batch-of-xlsx-to-xls-in-programmatically-using-python-in-ubuntu", "title": "Convert a batch of xlsx to xls in programmatically using python in ubuntu", "body": "<p>Does anyone know a simple procedure in python to convert a batch of <code>xlsx</code> files to <code>xls</code> using Python in an Ubuntu environment? </p>\n\n<p>I know of the command-line solution but I want an implementation from within a python script.</p>\n"}, {"tags": ["python", "python-2.7", "subprocess"], "comments": [{"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1459970952, "post_id": 36460482, "comment_id": 60533144, "body": "Have you looked at <a href=\"https://flask-testing.readthedocs.org/en/latest/#testing-with-liveserver\" rel=\"nofollow noreferrer\">Flask-Testing</a> ?"}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1460216747, "post_id": 36460482, "comment_id": 60643312, "body": "Uh. Turn it into an answer and I&#39;ll accept it."}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1460232411, "post_id": 36460482, "comment_id": 60648993, "body": "Glad that worked for you! done."}], "answers": [{"comments": [{"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1460156045, "post_id": 36461177, "comment_id": 60627772, "body": "Isn&#39;t Popen deprecated?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1460156339, "post_id": 36461177, "comment_id": 60627874, "body": "@ruipacheco, os.Popen, not subprocess.Popen, 99 percent of subprocess uses Popen"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1459972732, "creation_date": 1459972732, "answer_id": 36461177, "question_id": 36460482, "link": "https://stackoverflow.com/questions/36460482/launch-process-in-background-and-retrieve-output/36461177#36461177", "title": "Launch process in background and retrieve output", "body": "<p>You could use nohup with Popen:</p>\n\n<pre><code>from subprocess import Popen, check_call\n\nfrom os import devnull\n\np = Popen([\"nohup\", \"python\", \"test.py\"], stdout=open(devnull, \"w\"))\n\nimport time\n\nprint(p.pid)\nfor i in range(3):\n    print(\"In for\")\n    time.sleep(1)\n\ncheck_call(\"ps -ef | grep {} | grep -v grep\".format(p.pid), shell=True)\np.terminate()\ncheck_call(\"ps -ef | grep {} | grep -v grep\".format(p.pid), shell=True)\n</code></pre>\n\n<p>test.py:</p>\n\n<pre><code>import  time\nwhile True:\n    time.sleep(1)\n    print(\"Still alive\")\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>In [3]: from os import devnull\n\nIn [4]: p = Popen([\"nohup\", \"python\", \"b.py\"], stdout=open(devnull, \"w\"))\nnohup: ignoring input and redirecting stderr to stdout\nIn [5]: print(p.pid)\n28332\n\nIn [6]: for i in range(3):\n   ...:         print(\"In for\")\n   ...:         time.sleep(1)\n   ...:     \nIn for\nIn for\nIn for\n\nIn [7]: check_call(\"ps -ef | grep {} | grep -v grep\".format(p.pid), shell=True)\npadraic  28332 28301  1 20:55 pts/8    00:00:00 python test.py \nOut[7]: 0\n\nIn [8]: p.terminate()\n\nIn [9]: check_call(\"ps -ef | grep {} | grep -v grep\".format(p.pid), shell=True)\npadraic  28332 28301  0 20:55 pts/8    00:00:00 [python] &lt;defunct&gt;\nOut[9]: 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": true, "score": 1, "last_activity_date": 1460232377, "creation_date": 1460232377, "answer_id": 36522062, "question_id": 36460482, "link": "https://stackoverflow.com/questions/36460482/launch-process-in-background-and-retrieve-output/36522062#36522062", "title": "Launch process in background and retrieve output", "body": "<p>You may want to look at the <a href=\"https://flask-testing.readthedocs.org/en/latest/#testing-with-liveserver\" rel=\"nofollow\">Flask-Testing</a> library, which has support for running your flask server so you can do selenium tests against it. </p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 36522062, "answer_count": 2, "score": 3, "last_activity_date": 1460232377, "creation_date": 1459970440, "question_id": 36460482, "link": "https://stackoverflow.com/questions/36460482/launch-process-in-background-and-retrieve-output", "title": "Launch process in background and retrieve output", "body": "<p>I want to launch an instance of my Flask app in the background so I can run webdriver tests on it. For that I need to catch the output of the <code>&amp;</code> command so I can kill the process when the test ends.</p>\n\n<p>I've tried <code>subprocess.call()</code>, and <code>subprocess.check_output()</code> but I can't catch the process number of the first or background the process with the other. What else can I try?</p>\n"}, {"tags": ["python", "regex", "tokenize", "tweepy"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459970511, "post_id": 36460472, "comment_id": 60532885, "body": "You need to also specify the <code>re.U</code> flag. <code>re.IGNORECASE | re.VERBOSE | re.UNICODE</code>. Also note that <code>[\\w\\d_]+</code> = <code>\\w+</code>. Also, this <code>(?:(?:\\d+,?)+(?:\\.?\\d+)?)</code> looks fragile."}, {"owner": {"reputation": 532, "user_id": 5374161, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-2cZ0HIVtHj0/AAAAAAAAAAI/AAAAAAAAAHo/inZgqD1MqaM/photo.jpg?sz=128", "display_name": "Krishh", "link": "https://stackoverflow.com/users/5374161/krishh"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459970717, "post_id": 36460472, "comment_id": 60533013, "body": "@WiktorStribi\u017cew did that, but nothing changed."}, {"owner": {"reputation": 532, "user_id": 5374161, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-2cZ0HIVtHj0/AAAAAAAAAAI/AAAAAAAAAHo/inZgqD1MqaM/photo.jpg?sz=128", "display_name": "Krishh", "link": "https://stackoverflow.com/users/5374161/krishh"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459970861, "post_id": 36460472, "comment_id": 60533085, "body": "@WiktorStribi\u017cew I&#39;ll go through the regular expressions again later to optimise them and make them more robust, the regular expressions are working fine for now, I need to catch the unicode words."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1459971170, "post_id": 36460472, "comment_id": 60533283, "body": "Is it Python 2.7? Are you encoding the input texts as UTF8?"}, {"owner": {"reputation": 532, "user_id": 5374161, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-2cZ0HIVtHj0/AAAAAAAAAAI/AAAAAAAAAHo/inZgqD1MqaM/photo.jpg?sz=128", "display_name": "Krishh", "link": "https://stackoverflow.com/users/5374161/krishh"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459971240, "post_id": 36460472, "comment_id": 60533317, "body": "@WiktorStribi\u017cew Yes, it&#39;s python 2.7. and I have added <code># coding=utf-8</code> at the top if that&#39;s what you meant..."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1459971337, "post_id": 36460472, "comment_id": 60533385, "body": "No, something <a href=\"http://stackoverflow.com/questions/32863608/regex-python-with-unicode-japanese-character-issue/32868484#32868484\">like this</a>."}, {"owner": {"reputation": 532, "user_id": 5374161, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-2cZ0HIVtHj0/AAAAAAAAAAI/AAAAAAAAAHo/inZgqD1MqaM/photo.jpg?sz=128", "display_name": "Krishh", "link": "https://stackoverflow.com/users/5374161/krishh"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1459972513, "post_id": 36460472, "comment_id": 60534036, "body": "@WiktorStribi\u017cew I didn&#39;t do that, now it seems to be working the way I desired it to. Its still breaking at a few characters, but it&#39;s better than before! Thanks!"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1459974122, "post_id": 36460472, "comment_id": 60534988, "body": "You can post your solution BTW."}], "answers": [{"tags": [], "owner": {"reputation": 532, "user_id": 5374161, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-2cZ0HIVtHj0/AAAAAAAAAAI/AAAAAAAAAHo/inZgqD1MqaM/photo.jpg?sz=128", "display_name": "Krishh", "link": "https://stackoverflow.com/users/5374161/krishh"}, "is_accepted": true, "score": 0, "last_activity_date": 1459980002, "creation_date": 1459980002, "answer_id": 36463112, "question_id": 36460472, "link": "https://stackoverflow.com/questions/36460472/custom-word-tokenizer/36463112#36463112", "title": "Custom word tokenizer", "body": "<p>Turns out most of the unicode characters don't break if I declare the string as a unicode string. It still breaks at many words, but the performance is better.</p>\n\n<pre><code># coding=utf-8\n\ntweet = u\"Bar\u00e7a, que m\u00e1s veces ha jugado contra 10 en la historia https://twitter.com/7WUjZrMJah #UCL\"\n\nemoticons = r'(?:[:;=\\^\\-oO][\\-_\\.]?[\\)\\(\\]\\[\\-DPOp_\\^\\\\\\/])'\n\nregex_tweets = [\n    emoticons,\n    r'&lt;[^&gt;]+&gt;',      ## HTML TAGS\n    r'(?:@[\\w\\d_]+)',   ## @-mentions\n    r'(?:\\#[\\w]+)',  ## #HashTags\n    r'http[s]?://(?:[a-z]|[0-9]|[$-_@.&amp;+]|[!*\\(\\),]|(?:%[0-9a-f][0-9a-f]))+', # URLs\n    r\"(?:[a-z][a-z'\\-_]+[a-z])\", # words with - and '\n    r'(?:(?:\\d+,?)+(?:\\.?\\d+)?)',  ##numbers\n    r'(?:[\\w_]+)',   #other words\n    r'(?:\\S)'        ## normal text \n]\n\n#compiling regex\ntokens_re = re.compile(r'('+'|'.join(regex_tweets)+')' ,re.IGNORECASE | re.VERBOSE)\ntokens_re.findall(string)\n\n&gt;&gt;&gt;[u'Bar', u'\\xe7a', u',', u'que', u'm\\xe1s', u'veces', u'ha', u'jugado', u'contra', u'10', u'en', u'la', u'historia', u'https://twitter.com/7WUjZrMJah', u'#UCL']\n</code></pre>\n\n<p>It still tokenised <code>Bar\u00e7a</code> to <code>[u'Bar', u'\\xe7a']</code>, which is better than  <code>['Bar', '\\xc3', '\\xa7', 'a']</code>, but still not the original term <code>['Bar\\xc3\\xa7a']</code>. But it does work on many expressions.</p>\n"}], "owner": {"reputation": 532, "user_id": 5374161, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-2cZ0HIVtHj0/AAAAAAAAAAI/AAAAAAAAAHo/inZgqD1MqaM/photo.jpg?sz=128", "display_name": "Krishh", "link": "https://stackoverflow.com/users/5374161/krishh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 36463112, "answer_count": 1, "score": 2, "last_activity_date": 1459980002, "creation_date": 1459970403, "last_edit_date": 1459970908, "question_id": 36460472, "link": "https://stackoverflow.com/questions/36460472/custom-word-tokenizer", "title": "Custom word tokenizer", "body": "<p>I'm analyzing twitter data for sentiment analysis, and I need to tokenize tweets for my analysis.</p>\n\n<p>Let this be an example tweet: </p>\n\n<p><code>tweet = \"Bar\u00e7a, que m\u00e1s veces ha jugado contra 10 en la historia https://twitter.com/7WUjZrMJah #UCL\"</code></p>\n\n<p>The <code>nltk.word_tokenize()</code> tokenizes the tweets alright but breaks at links and hashtags.</p>\n\n<pre><code>word_tokenize(tweet)\n\n&gt;&gt;&gt; ['Bar\\xc3\\xa7a', ',', 'que', 'm\\xc3\\xa1s', 'veces', 'ha', 'jugado', 'contra', '10', 'en', 'la', 'historia', 'https', ':', '//twitter.com/7WUjZrMJah', '#', 'UCL']`\n</code></pre>\n\n<p>The unicode characters remain intact, but links are broken. I have designed a custom regex tokenizer, which is:</p>\n\n<pre><code>emoticons = r'(?:[:;=\\^\\-oO][\\-_\\.]?[\\)\\(\\]\\[\\-DPOp_\\^\\\\\\/])'\n\nregex_tweets = [\n    emoticons,\n    r'&lt;[^&gt;]+&gt;',      ## HTML TAGS\n    r'(?:@[\\w\\d_]+)',   ## @-mentions\n    r'(?:\\#[\\w]+)',  ## #HashTags\n    r'http[s]?://(?:[a-z]|[0-9]|[$-_@.&amp;+]|[!*\\(\\),]|(?:%[0-9a-f][0-9a-f]))+', # URLs\n    r\"(?:[a-z][a-z'\\-_]+[a-z])\", # words with - and '\n    r'(?:(?:\\d+,?)+(?:\\.?\\d+)?)',  ##numbers\n    r'(?:[\\w_]+)',   #other words\n    r'(?:\\S)'        ## normal text \n]\n\n#compiling regex\ntokens_re = re.compile(r'('+'|'.join(regex_tweets)+')' ,re.IGNORECASE | re.VERBOSE)\ntokens_re.findall(string)\n\n&gt;&gt;&gt; ['Bar', '\\xc3', '\\xa7', 'a', ',', 'que', 'm', '\\xc3', '\\xa1', 's', 'veces', 'ha', 'jugado', 'contra', '10', 'en', 'la', 'historia', 'https://twitter.com/7WUjZrMJah', '#UCL']\n</code></pre>\n\n<p>Now the hashtags and links appear the way I want them to, but breaks at unicode charachters (like Bar\u00e7a -> <code>['Bar', '\\xc3', '\\xa7', 'a']</code> instead of  <code>['Bar\\xc3\\xa7a']</code></p>\n\n<p><em>Is there any way I can <strong>integrate both of these</strong>??\nOr a regular expression that includes unicode characters??</em></p>\n\n<p>I have also tried <code>TweetTokenizer</code> from the <code>nltk.tokenize</code> library, but it wasn't very useful.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "is_accepted": false, "score": 6, "last_activity_date": 1459971093, "last_edit_date": 1459971093, "creation_date": 1459970511, "answer_id": 36460514, "question_id": 36460368, "link": "https://stackoverflow.com/questions/36460368/how-to-calculate-quantiles-in-a-pandas-multiindex-dataframe/36460514#36460514", "title": "How to calculate quantiles in a pandas multiindex DataFrame?", "body": "<p>Apply the <code>quantile</code> function by first grouping by your multiindex levels:</p>\n\n<pre><code>df.groupby(level=[0,1]).quantile()\n</code></pre>\n\n<p>The same result will work for the <code>median</code> function, so the following line is equivalent to your code <code>df.median(level=[0,1])</code>:</p>\n\n<pre><code>df.groupby(level=[0,1]).median()\n</code></pre>\n\n<p>Against the <code>GroupBy</code> object returned by <code>groupby</code> function, you have also the <code>agg</code> function that allows you to bulk several function calls at once, and the resulting dataframe will have several levels for the columns:</p>\n\n<pre><code>df.groupby(level=[0,1]).agg(['median', 'quantile'])\n</code></pre>\n"}], "owner": {"reputation": 820, "user_id": 2537486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8fb277c3c2e3d3e067bbb4ccc5cef13e?s=128&d=identicon&r=PG", "display_name": "germ", "link": "https://stackoverflow.com/users/2537486/germ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1311, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1459971093, "creation_date": 1459970062, "question_id": 36460368, "link": "https://stackoverflow.com/questions/36460368/how-to-calculate-quantiles-in-a-pandas-multiindex-dataframe", "title": "How to calculate quantiles in a pandas multiindex DataFrame?", "body": "<p>I have a pandas multiindex DataFrame, and I want to calculate the quantiles of its values over a specific index level. It's better to explain with an example. </p>\n\n<p>First, let's create the DataFrame:</p>\n\n<pre><code>import itertools\nimport pandas as pd\nimport numpy as np\n\nitem = ('A', 'B')\nitem_type = (0, 1, 2)\nlocation = range(5)\nidx = pd.MultiIndex.from_tuples(list(itertools.product(item, item_type, location)),names=('Item', 'Type', 'Location'))\ndf = pd.DataFrame(np.random.randn(len(idx), 3), index=idx,columns=('C1', 'C2', 'C3'))\ndf\n</code></pre>\n\n<p>Let's say we want to calculate a table of the median of the column values for each Item and Type over all locations. This is easy enough to do with the builtin .median method:</p>\n\n<pre><code>median_df = df.median(level=[0,1])\nmedian_df\n</code></pre>\n\n<p>This will produce a three-column DataFrame with multiindex=(Item, Type). It works for most common functions like .mean, .max, .min, etc. </p>\n\n<p>But it does not work for .quantile--strangely enough, quantile does not have the 'level' parameter.</p>\n\n<p>How can I calculate a given quantile in the same way as I did for the median, etc?</p>\n"}]