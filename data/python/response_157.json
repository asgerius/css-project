[{"tags": ["python", "beautifulsoup", "html-parsing"], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 63741, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2V1qI.png?s=128&g=1", "display_name": "faberfedor", "link": "https://stackoverflow.com/users/63741/faberfedor"}, "edited": false, "score": 0, "creation_date": 1515677971, "post_id": 48199416, "comment_id": 83397668, "body": "Thanks for pointing out my idiocy. Yeah, I know that&#39;s not how strings work. Just one of those things..."}], "tags": [], "owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "is_accepted": true, "score": 2, "last_activity_date": 1515642352, "last_edit_date": 1515642352, "creation_date": 1515641887, "answer_id": 48199416, "question_id": 48197987, "link": "https://stackoverflow.com/questions/48197987/beautifulsoup-is-not-parsing-td-data-properly/48199416#48199416", "title": "BeautifulSoup is not parsing &lt;td&gt; data properly", "body": "<p>You need to instead do something like this:</p>\n\n<pre><code>url = \"https://coinmarketcap.com/currencies/CRYPTO/historical-data/?\n      start=20171124&amp;end=20171130\"\nresponse = urllib2.urlopen(url.replace('CRYPTO', crypto['id']))\n</code></pre>\n\n<p>\u2026or to make more explicit what\u2019s happening:</p>\n\n<pre><code>url = \"https://coinmarketcap.com/currencies/CRYPTO/historical-data/?\n      start=20171124&amp;end=20171130\"\nnewurl = url.replace('CRYPTO', crypto['id'])\nresponse = urllib2.urlopen(newurl)\n</code></pre>\n\n<p>\u2026because as your code is now, your <code>url.replace('CRYPTO', crypto['id'])</code> on its own doesn\u2019t change anything; instead it just creates a new string but never does anything with that new string.</p>\n\n<p>Your code\u2019s not changing the <code>url</code> string, because that\u2019s not how <a href=\"https://docs.python.org/2/library/string.html#string.replace\" rel=\"nofollow noreferrer\"><code>string.replace(\u2026)</code></a> works \u2014 and not how Python strings work.</p>\n\n<p>So what\u2019s happening with your current code is that the <code>CRYPTO</code> substring in the URL isn\u2019t being replaced before you call <code>urllib2.urlopen(\u2026)</code> on it. Thus the results you get are from this URL:</p>\n\n<p><a href=\"https://coinmarketcap.com/currencies/CRYPTO/historical-data/?start=20171124&amp;end=20171130\" rel=\"nofollow noreferrer\">https://coinmarketcap.com/currencies/CRYPTO/historical-data/?start=20171124&amp;end=20171130</a></p>\n"}], "owner": {"reputation": 382, "user_id": 63741, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2V1qI.png?s=128&g=1", "display_name": "faberfedor", "link": "https://stackoverflow.com/users/63741/faberfedor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 48199416, "answer_count": 1, "score": 3, "last_activity_date": 1515642352, "creation_date": 1515628794, "question_id": 48197987, "link": "https://stackoverflow.com/questions/48197987/beautifulsoup-is-not-parsing-td-data-properly", "title": "BeautifulSoup is not parsing &lt;td&gt; data properly", "body": "<p>I'm attempting to parse <a href=\"https://coinmarketcap.com/currencies/bitcoin/historical-data/?start=20171124&amp;end=20171130\" rel=\"nofollow noreferrer\">this page</a> using BeatifulSoup4 with Python2.7.5. My code looks like this:</p>\n\n<pre><code>url = \"https://coinmarketcap.com/currencies/CRYPTO/historical-data/?\n      start=20171124&amp;end=20171130\"\nurl.replace('CRYPTO', crypto['id'])\nresponse = urllib2.urlopen(url)\n\ndata = response.read()\nsoup = BeautifulSoup(data, 'html5lib')\n\ntrs = soup.find(id=\"historical-data\").findAll('tr')\n</code></pre>\n\n<p>where CRYPTO is replaced by 'bitcoin', etc.</p>\n\n<p>Looking at the variables in PyCharm, everything looks good EXCEPT for the data in the table . Instead of seeing this:</p>\n\n<pre><code>&lt;tr class=\"text-right\"&gt;\n&lt;td class=\"text-left\"&gt;Nov 30, 2017&lt;/td&gt;\n&lt;td&gt;9906.79&lt;/td&gt;\n&lt;td&gt;10801.00&lt;/td&gt;\n&lt;td&gt;9202.05&lt;/td&gt;\n&lt;td&gt;10233.60&lt;/td&gt;\n&lt;td&gt;8,310,690,000&lt;/td&gt;\n&lt;td&gt;165,537,000,000&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>which is what Google Chrome's Inspect window and curl show me, BeautifulSoup shows me this:</p>\n\n<pre><code>&lt;tr class=\"text-right\"&gt;\n&lt;td class=\"text-left\"&gt;Nov 30, 2017&lt;/td&gt;\n&lt;td&gt;0.009829&lt;/td&gt;\n&lt;td&gt;0.013792&lt;/td&gt;\n&lt;td&gt;0.009351&lt;/td&gt;\n&lt;td&gt;0.013457&lt;/td&gt;\n&lt;td&gt;152&lt;/td&gt;\n&lt;td&gt;119,171&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Why are the numbers different?</p>\n\n<p>I have used urllib2 and requests. I have used response.text and response.read(). I have parsed using lxml and html5lib. I have tried different encoding such iso-8859 and ascii. Nothing works.</p>\n\n<p>How do I get the proper numbers to display?</p>\n"}, {"tags": ["python", "orm", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 2797, "user_id": 3273031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1697f6603d9950859ac4f728e6c32288?s=128&d=identicon&r=PG&f=1", "display_name": "slushy", "link": "https://stackoverflow.com/users/3273031/slushy"}, "is_accepted": true, "score": 1, "last_activity_date": 1518529251, "creation_date": 1518529251, "answer_id": 48768176, "question_id": 48197972, "link": "https://stackoverflow.com/questions/48197972/alternate-preprocessing-method-to-typedecorator-in-sqlalchemy/48768176#48768176", "title": "Alternate preprocessing method to TypeDecorator in SQLAlchemy", "body": "<p>Option 1, to use a <a href=\"https://docs.sqlalchemy.org/en/latest/orm/mapped_attributes.html?highlight=validate#sqlalchemy.orm.validates\" rel=\"nofollow noreferrer\">validator</a>, is correct. The <code>TypeDecorator</code> is more for actually modifying the type of the data -- e.g. pickling something to store it into the database as a string and the unpickling back to a class, seamlessly, for the user.</p>\n\n<p>The <code>@validates</code> decorator in this case is performing a validation on data of the same type. Instead of rejecting/flagging/logging unacceptably formatted data (probably the intended primary use case of validation), the function of your validator is to convert unacceptable data of the same type into acceptable data.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>import re\nfrom sqlalchemy import Column, Integer, Text\n#import sqlalchemy.types as types  ## Don't need this anymore\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import validates  ## This one for the validator\n\nBase = declarative_base()\n\nclass User(Base)\n    __tablename__ = 'User'\n    id = Column(Integer, primary_key=True)\n    name = Column(Text, unique=True)\n\n    @validates(\"name\")\n    def alpha_only(self, key, value):\n        return None if value is None else re.sub(r'[^A-Za-z\\-\\s]', '' , value.strip())\n\n    def __repr__(self):\n        return \"&lt;User(name='{}')&gt;\".format(self.name)\n</code></pre>\n"}], "owner": {"reputation": 2797, "user_id": 3273031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1697f6603d9950859ac4f728e6c32288?s=128&d=identicon&r=PG&f=1", "display_name": "slushy", "link": "https://stackoverflow.com/users/3273031/slushy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 48768176, "answer_count": 1, "score": 1, "last_activity_date": 1518529251, "creation_date": 1515628719, "question_id": 48197972, "link": "https://stackoverflow.com/questions/48197972/alternate-preprocessing-method-to-typedecorator-in-sqlalchemy", "title": "Alternate preprocessing method to TypeDecorator in SQLAlchemy", "body": "<p>I am using <code>sqlalchemy.types.TypeDecorator</code> to preprocess a text field before insertion into a database. It works great except when I am using the <code>like</code> expression with a comparator that contains percentages (e.g. <code>User.name.like('%bar%')</code>) because the percentages are stripped by the <code>process_bind_param()</code> before the query is executed.</p>\n\n<p>This makes me think that a <code>TypeDecorator</code> is not the correct approach to implement preprocessing directives. Is there either:</p>\n\n<ol>\n<li>An alternate way in SQLAlchemy to preprocess a column? (like a <a href=\"http://docs.sqlalchemy.org/en/latest/orm/mapped_attributes.html?highlight=validate#sqlalchemy.orm.validates\" rel=\"nofollow noreferrer\">validator</a>?)</li>\n<li>Or maybe a way to explicitly bypass <code>process_bind_param</code> when executing a query?</li>\n<li>Or is the workaround I am using (at the end of this post) -- to just use a direct SQL query and bypass the ORM -- the only option?</li>\n</ol>\n\n<p>Here is a minimal implementation of the augmented type:</p>\n\n<pre><code>import re\nfrom sqlalchemy import Column, Integer, Text\nimport sqlalchemy.types as types\nfrom sqlalchemy.ext.declarative import declarative_base\n\nclass AlphaOnlyText(types.TypeDecorator):\n    \"\"\"Replaces everything that's not A-Za-z or space with nothing.\"\"\"\n    impl = types.Text\n    def process_bind_param(self, text, dialect):\n        return None if text is None else re.sub(r'[^A-Za-z\\-\\s]', '' , text.strip())\n\n\nBase = declarative_base()\n\nclass User(Base):\n    __tablename__ = 'User'\n    id = Column(Integer, primary_key=True)\n    name = Column(AlphaOnlyText, unique=True)\n    def __repr__(self):\n        return \"&lt;User(name='{}')&gt;\".format(self.name)\n</code></pre>\n\n<p>Here's code to demonstrate working insertions and queries:</p>\n\n<pre><code>from sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\n\n# Create the database\nengine = create_engine('sqlite://', echo=True)\nBase.metadata.create_all(engine)\nSession = sessionmaker(bind=engine)\nsession = Session()\n\n# Add a row\nsession.add(User(name='foobar'))\n\n# Query the row\nsession.query(User).filter_by(name=='foobar').all()\n# [&lt;User(name='foobar')&gt;]\n</code></pre>\n\n<p>Here is where it fails -- when I use the <code>like</code> expression, the column's <code>process_bind_param</code> is run, stripping out the percentages before adding the filter to the query:</p>\n\n<pre><code>filter = User.name.like('%bar%')\nfilter.compile().params\n# {'name_1': '%bar%'}  &lt;-- The '%' are still here\n\nsession.query(User).filter(filter).all()\n# Nothing. (Percent symbols are stripped, so '%bar%' ==&gt; 'bar'.)\n#   If your engine was created with `echo=True`\n#   you can see this directly in the logging statements\n</code></pre>\n\n<p>If I bypass the ORM I can get what I want via direct SQL, but I don't want to require users to go this route.</p>\n\n<pre><code>query_template = \"SELECT * FROM user WHERE name LIKE :nm;\"\nsession.execute(query_template, {'nm':'%bar%'}).fetchall()\n# [(1, 'foobar')]\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "edited": false, "score": 0, "creation_date": 1515629222, "post_id": 48197948, "comment_id": 83377185, "body": "I don&#39;t think you can match both criteria at the same time. A regex for the first would be <code>\\b\\w+$</code> (which would slightly over-match if there&#39;s punctuation before the word) and the second one could use capture groups <code>&quot; (\\w+) .*$&quot;</code>"}, {"owner": {"reputation": 6814, "user_id": 1205745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a11ba35d089eaa7eeb31a15a7b93240c?s=128&d=identicon&r=PG", "display_name": "Dnaiel", "link": "https://stackoverflow.com/users/1205745/dnaiel"}, "reply_to_user": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "edited": false, "score": 0, "creation_date": 1515629725, "post_id": 48197948, "comment_id": 83377334, "body": "@Beefster thanks for the help, it turns out to be possible based on answer I accepted."}, {"owner": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "edited": false, "score": 1, "creation_date": 1515629857, "post_id": 48197948, "comment_id": 83377383, "body": "I realized after I said that that you meant &quot;either&quot; of the conditions."}, {"owner": {"reputation": 6814, "user_id": 1205745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a11ba35d089eaa7eeb31a15a7b93240c?s=128&d=identicon&r=PG", "display_name": "Dnaiel", "link": "https://stackoverflow.com/users/1205745/dnaiel"}, "reply_to_user": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "edited": false, "score": 0, "creation_date": 1515629904, "post_id": 48197948, "comment_id": 83377404, "body": "@Beefster get it, thanks, not clearer Q, I know, apologies for the english... ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 1, "creation_date": 1515629767, "post_id": 48198064, "comment_id": 83377349, "body": "or even better <code>(\\s?\\bco\\b\\s?)</code>"}, {"owner": {"reputation": 6814, "user_id": 1205745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a11ba35d089eaa7eeb31a15a7b93240c?s=128&d=identicon&r=PG", "display_name": "Dnaiel", "link": "https://stackoverflow.com/users/1205745/dnaiel"}, "reply_to_user": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1515629885, "post_id": 48198064, "comment_id": 83377394, "body": "@sKwa that one seems to fail in this case: re.sub(&#39;(\\s?\\bco\\b\\s?)&#39;, &#39; &#39;, &#39;my co sa&#39;)"}, {"owner": {"reputation": 2268, "user_id": 10872397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca60fd27093da844faa62ca04d0fa7da?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/10872397/rahul"}, "reply_to_user": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1515629966, "post_id": 48198064, "comment_id": 83377414, "body": "@sKwa: Optional space will skip even if it&#39;s present."}, {"owner": {"reputation": 6814, "user_id": 1205745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a11ba35d089eaa7eeb31a15a7b93240c?s=128&d=identicon&r=PG", "display_name": "Dnaiel", "link": "https://stackoverflow.com/users/1205745/dnaiel"}, "edited": false, "score": 0, "creation_date": 1515630452, "post_id": 48198064, "comment_id": 83377541, "body": "@Rahul lol &quot;coworker in my company are not so co operative. silly co&quot;"}, {"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "reply_to_user": {"reputation": 6814, "user_id": 1205745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a11ba35d089eaa7eeb31a15a7b93240c?s=128&d=identicon&r=PG", "display_name": "Dnaiel", "link": "https://stackoverflow.com/users/1205745/dnaiel"}, "edited": false, "score": 1, "creation_date": 1515630647, "post_id": 48198064, "comment_id": 83377585, "body": "@Dnaiel, I used in Rahul&#39;s feedle and it works in feedle O_o"}, {"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1515630681, "post_id": 48198064, "comment_id": 83377593, "body": "@Rahul, yeap, my bad"}], "tags": [], "owner": {"reputation": 2268, "user_id": 10872397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca60fd27093da844faa62ca04d0fa7da?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/10872397/rahul"}, "is_accepted": true, "score": 1, "last_activity_date": 1515630833, "last_edit_date": 1515630833, "creation_date": 1515629478, "answer_id": 48198064, "question_id": 48197948, "link": "https://stackoverflow.com/questions/48197948/replace-word-using-regex-with-specific-conditions/48198064#48198064", "title": "replace word using regex with specific conditions", "body": "<p>You can use <a href=\"https://www.regular-expressions.info/alternation.html\" rel=\"nofollow noreferrer\">alternation</a> to match both criteria using following regex.</p>\n\n<p><strong>Regex:</strong> <code>(?:\\sco\\s|\\sco$)</code></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><p><code>\\sco\\s</code> matches <code>co</code> preceded and succeed by a space.</p></li>\n<li><p><code>\\sco$</code> matches <code>co</code> at end preceded by a space.</p></li>\n</ul>\n\n<p><strong><a href=\"https://regex101.com/r/3B1m66/1/\" rel=\"nofollow noreferrer\">Regex101 Demo</a></strong></p>\n\n<p>In python:</p>\n\n<pre><code>import re\nstr = \"coworker in my company are not so co operative. silly co\"\nres = re.sub(r'(?:\\sco\\s|\\sco$)', ' ', str)\nprint(res)\n</code></pre>\n\n<p><strong>Result:</strong> <code>coworker in my company are not so operative. silly</code></p>\n\n<p><kbd><strong><a href=\"https://ideone.com/WAWQTM\" rel=\"nofollow noreferrer\">Ideone Demo</a></strong></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 3185, "user_id": 7031759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80DxZ.jpg?s=128&g=1", "display_name": "Skycc", "link": "https://stackoverflow.com/users/7031759/skycc"}, "is_accepted": false, "score": 0, "last_activity_date": 1515637612, "creation_date": 1515637612, "answer_id": 48198961, "question_id": 48197948, "link": "https://stackoverflow.com/questions/48197948/replace-word-using-regex-with-specific-conditions/48198961#48198961", "title": "replace word using regex with specific conditions", "body": "<p>you can use <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">lookahead</a> regex</p>\n\n<p><code>\\sco(?=$|\\s)</code></p>\n\n<p>explanation:</p>\n\n<ul>\n<li><code>space</code> follow by <code>co</code>, then assert what follow by <code>co</code> must be either\n<code>space</code> or <code>end of text</code></li>\n</ul>\n\n<p>python code</p>\n\n<pre><code>import re\ntxt = 'A co is mine, A column is mine, my column, my co'\nnew_txt = re.sub('\\sco(?=$|\\s)', '', txt)\n# 'A is mine, A column is mine, my column, my'\n</code></pre>\n"}], "owner": {"reputation": 6814, "user_id": 1205745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a11ba35d089eaa7eeb31a15a7b93240c?s=128&d=identicon&r=PG", "display_name": "Dnaiel", "link": "https://stackoverflow.com/users/1205745/dnaiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "accepted_answer_id": 48198064, "answer_count": 2, "score": 0, "last_activity_date": 1515641488, "creation_date": 1515628541, "last_edit_date": 1515641488, "question_id": 48197948, "link": "https://stackoverflow.com/questions/48197948/replace-word-using-regex-with-specific-conditions", "title": "replace word using regex with specific conditions", "body": "<p>How would I use the python \"re\" module to replace a word, i.e., <code>'co'</code> with an empty string, i.e., <code>''</code> in a given text, only if:</p>\n\n<ul>\n<li>the word is at the end of the text and there's a space before the word</li>\n<li>the word is not the final word in the text but there's a space at beginning, and then another space at the end of the word</li>\n</ul>\n\n<p>I.e., </p>\n\n<pre><code># word is not the final word in the text but there's a space at beginning, and then another space at the end of the word\ntxt = 'A co is mine'\ntxt_after_replace = 'A is mine'\ntxt = 'A column is mine'\ntxt_ater_replace = 'A column is mine'\n# word is the end of the text and there's a space before the word\ntxt = 'my co'\ntxt_after_replace = 'my'\ntxt = 'my column'\ntxt_after_replace = 'my column'\n</code></pre>\n\n<p>If I do: <code>txt.replace(' co', '')</code> these two cases will fail: <code>txt = 'my column', txt_ater_replace = 'A column is mine'</code>.  Since it won't check for the end of text right after the word or for a space in the text right after the word.</p>\n\n<p>I think the re.sub module would come to the rescue here but I'm unsure how.</p>\n\n<p>This should work for any general word, i.e., <code>'co'</code> in this case.</p>\n"}, {"tags": ["python", "ocr", "levenshtein-distance", "fuzzy-comparison"], "owner": {"reputation": 41, "user_id": 9201155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09e3724620f7f536fc988951a612a55?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Bell", "link": "https://stackoverflow.com/users/9201155/samuel-bell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1515628439, "creation_date": 1515628439, "question_id": 48197934, "link": "https://stackoverflow.com/questions/48197934/fuzzy-string-matching-for-common-multi-character-ocr-errors-in-python", "title": "fuzzy string matching for common multi-character OCR errors in python", "body": "<p>I'm trying to do some fuzzy matching on some OCR results, and I want to be able to factor in common OCR errors.  In particular, I'm matching streets to a database of streets.  I figured out how to down-weight common single-character substitution errors using the weighted-levenshtein package, but it seems to only work on single characters, when many of the most common errors are things like \"li\" to \"h\".</p>\n\n<p>Right now, \"Mam\" matches most closely to \"MAY ST,\" when I'd really like it to match to \"MAIN ST\" instead.  I'd like to be able to build something in that knows that \"IN\" and \"M\" often correspond because \"in\" gets read as \"m\" by the OCR.</p>\n\n<p>Here's the current code I'm working with (I'm down-weighting inserts because some of the streets I'm working with are abbreviated or missing \"St\", \"Ave\", etc.):</p>\n\n<pre><code>import numpy as np\nfrom weighted_levenshtein import lev, osa, dam_lev\n\ndef lratio(str1,str2):\n    insert_costs = 0.5*np.ones(128, dtype=np.float64)\n    delete_costs = np.ones(128, dtype=np.float64)\n    substitute_costs = np.ones((128, 128), dtype=np.float64)\n    substitute_costs[ord('O'), ord('0')] = 0.25\n    substitute_costs[ord('0'), ord('O')] = 0.25\n    substitute_costs[ord('I'), ord('T')] = 0.5\n    substitute_costs[ord('T'), ord('I')] = 0.5\n    ldistance = lev(str1, str2, insert_costs=insert_costs, delete_costs=delete_costs, substitute_costs=substitute_costs)\n    return (1.0 - float(ldistance) / float(len(str1) + len(str2))) * 100.0\n</code></pre>\n\n<p>I don't think there's a way to modify weighted-levenshtein for multi-character substitution.  But if there were, it would be great.  And I bet there's a package out there that has this capacity--possibly a package that has a library of common errors already built in.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning"], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 9214687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8983875d5dc6834cbb5dde4b5a19742?s=128&d=identicon&r=PG&f=1", "display_name": "yuji", "link": "https://stackoverflow.com/users/9214687/yuji"}, "is_accepted": false, "score": 0, "last_activity_date": 1515999854, "creation_date": 1515999854, "answer_id": 48258302, "question_id": 48197871, "link": "https://stackoverflow.com/questions/48197871/in-tensorflow-calculatin-spearman-instead-of-accuracy/48258302#48258302", "title": "In Tensorflow, calculatin Spearman instead of accuracy", "body": "<p>There is a Pearson correlation function in <code>tf.contrib</code> (<a href=\"https://www.tensorflow.org/api_docs/python/tf/contrib/metrics/streaming_pearson_correlation\" rel=\"nofollow noreferrer\">documentation</a>), so you could use:</p>\n\n<pre><code>pearson_r = tf.contrib.metrics.streaming_pearson_correlation(prediction, y)\n</code></pre>\n\n<p>Alternatively, you can use <code>tf.nn.moments</code> to calculate variance/covariance and compute the metrics by hand.</p>\n"}], "owner": {"reputation": 161, "user_id": 8834490, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2b579cc7ce5aaef47ffcd5cfa363183?s=128&d=identicon&r=PG&f=1", "display_name": "entropy", "link": "https://stackoverflow.com/users/8834490/entropy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526931655, "creation_date": 1515627886, "last_edit_date": 1526931655, "question_id": 48197871, "link": "https://stackoverflow.com/questions/48197871/in-tensorflow-calculatin-spearman-instead-of-accuracy", "title": "In Tensorflow, calculatin Spearman instead of accuracy", "body": "<p>How to calculate Spearman and also Pearson correlations instead of the accuracy, for example in the below code chunk?\n(For a complete code example, you can also answer over this tutotrial:\n<a href=\"http://adventuresinmachinelearning.com/convolutional-neural-networks-tutorial-tensorflow/\" rel=\"nofollow noreferrer\">http://adventuresinmachinelearning.com/convolutional-neural-networks-tutorial-tensorflow/</a>)</p>\n\n<p>Currently for accuracy, in summary, I use :</p>\n\n<pre><code>prediction = tf.nn.sigmoid(logits)\npreds = tf.equal(tf.argmax(y, 1), tf.argmax(prediction, 1))\naccuracy = tf.reduce_mean(tf.cast(preds, tf.float32))\nwith tf.Session() as sess:\n    t_acc= accuracy.eval(feed_dict={X: X_test, y: Y_test})\n</code></pre>\n\n<p>Along with t_acc, how to calculate Spearman and Pearson correlations. Specifically something like this would be fine:</p>\n\n<pre><code> rho, _ = scipy.stats.spearmanr(preds, actuals)\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 3064, "user_id": 2289710, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/057Jk.jpg?s=128&g=1", "display_name": "freude", "link": "https://stackoverflow.com/users/2289710/freude"}, "is_accepted": false, "score": 0, "last_activity_date": 1515628930, "last_edit_date": 1515628930, "creation_date": 1515628215, "answer_id": 48197910, "question_id": 48197857, "link": "https://stackoverflow.com/questions/48197857/differences-in-import-expressions/48197910#48197910", "title": "Differences in import expressions?", "body": "<p>A python script sees certain paths pointing to the the global default location like <code>site-packages</code> or <code>dist-packages</code> (you may find those directories in the python directory tree and <code>random</code> and <code>django</code> are located in one of them) or specified by the environment variable <code>PYTHONPATH</code>. Usually, <code>PYTHONPATH</code> includes your project directory (<em>actually you may add there whatever directory you want</em>). Your example suggests that the packages <code>django</code> as well as <code>apps</code> and <code>random</code> are located in those paths while <code>project</code> is not there. In python a package is represented by a directory containing <code>__init__.py</code> file as well as some other files representing modules. Now you may import modules from packages in those locations using relative paths like you have shown in your examples. </p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 9190971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aadd083d8727184b1a259af542c009a6?s=128&d=identicon&r=PG&f=1", "display_name": "jtimmons", "link": "https://stackoverflow.com/users/9190971/jtimmons"}, "is_accepted": true, "score": 1, "last_activity_date": 1515632576, "creation_date": 1515632576, "answer_id": 48198436, "question_id": 48197857, "link": "https://stackoverflow.com/questions/48197857/differences-in-import-expressions/48198436#48198436", "title": "Differences in import expressions?", "body": "<p>Welcome to the wild world of Python's import system!</p>\n\n<p>To expand on freude's answer a little bit, you've ran into one of the most consistently confusing portions of the Python language: relative vs absolute imports. While the import examples that you gave are syntactically fine, they hide some of the complexity what's going on behind the scenes. When you run:</p>\n\n<pre><code>from django.views.generic import TemplateView, ListView\n</code></pre>\n\n<p>Python searches through the PYTHONPATH (which you can see with something like <code>print(sys.path)</code>) for a package or module named <em>django</em>. It end up finding one somewhere among your installed libraries. Similarly, when you run:</p>\n\n<pre><code>from project.app.views import view \n</code></pre>\n\n<p>It searches those <em>same paths</em>, but instead finds the <em>project</em> package in the directory that the Python interpreter is currently executing in. However, if you had installed a library named <em>project</em>, how would it know which one you actually meant? This is generally solved by using <em>absolute</em> imports and by being explicit if you intend to use <em>relative</em> imports like this. If you wanted to be more precise in your example, you would specify that you wanted to import it <em>relative</em> to the current module by using a <code>.</code> - like so:</p>\n\n<pre><code>from .project.app.views import view    \n</code></pre>\n\n<p>You can even see this in action in an example in the <a href=\"https://docs.djangoproject.com/en/2.0/intro/tutorial01/\" rel=\"nofollow noreferrer\">django tutorial</a>.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time#14132912\">this classic answer</a> on the subject for more detailed information.</p>\n"}], "owner": {"reputation": 209, "user_id": 9121609, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1640890422640566/picture?type=large", "display_name": "William Karlsson", "link": "https://stackoverflow.com/users/9121609/william-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 48198436, "answer_count": 2, "score": 1, "last_activity_date": 1515632576, "creation_date": 1515627802, "last_edit_date": 1515632081, "question_id": 48197857, "link": "https://stackoverflow.com/questions/48197857/differences-in-import-expressions", "title": "Differences in import expressions?", "body": "<p>I have a question regarding the import//from statement in python.</p>\n\n<p>In my views.py file (Project/App/views.py) I have this line: </p>\n\n<pre><code>from django.views.generic import TemplateView, ListView\n</code></pre>\n\n<p>Why do I have to include 'django' in that line? Why is it not enough to specify which directory (views) that the generic file is located in? This is what I have done in many of my previous python-only scripts - an example being: </p>\n\n<pre><code>from random import foo\n</code></pre>\n\n<p>as well as in my current django url.py file. There, I have:</p>\n\n<pre><code>from app.views import view\n</code></pre>\n\n<p>Why don't I have to specify that further, like with the first example where 'django' is included in the path-specification? How come I don't have to write it like this:</p>\n\n<pre><code>from project.app.views import view\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "pandas", "plot"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1515627822, "creation_date": 1515627822, "answer_id": 48197861, "question_id": 48197803, "link": "https://stackoverflow.com/questions/48197803/preventing-1-level-value-of-pandas-df-column-from-being-plotted/48197861#48197861", "title": "Preventing 1 level/value of pandas df column from being plotted", "body": "<p>If you're not going to plot it, don't calculate it. Use <code>query</code>/boolean indexing/<code>eval</code>/<code>isin</code> and filter it out. </p>\n\n<pre><code>fig, ax = plt.subplots(figsize=(15,7)) \n\ndf.query('StimCat != \"C\"')\\\n  .groupby(['id','StimCat'])\\\n  .mean()['rt']\\\n  .unstack()\\\n  .plot.bar(ax=ax)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/djG4p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/djG4p.png\" alt=\"enter image description here\"></a></p>\n\n<p>If your aim is to exclude multiple such categories, try something like this - </p>\n\n<pre><code>cat_to_exclude = ['A', 'C'] # filter out categories A and C, for example\ndf = df.query('StimCat not in @cat_to_exclude')\n\ndf\n\n   id StimCat   rt\n1   1       B  657\n6   2       B  343\n7   2       B  264\n</code></pre>\n\n<p>And then perform the <code>groupby</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 9141863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2193ae18f0a6e7b5c61cd1065eb1d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Vanessa S.", "link": "https://stackoverflow.com/users/9141863/vanessa-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 48197861, "answer_count": 1, "score": 1, "last_activity_date": 1515627822, "creation_date": 1515627411, "question_id": 48197803, "link": "https://stackoverflow.com/questions/48197803/preventing-1-level-value-of-pandas-df-column-from-being-plotted", "title": "Preventing 1 level/value of pandas df column from being plotted", "body": "<p>I have just started using python for data visualization. I have searched google &amp; stackoverflow but was unable to find an answer to my problem. Hopefully you might be able to help:</p>\n\n<p>I have a pandas df with several data rows per person (id), and 2 other columns named StimCat (3 levels: A,B,C) &amp; rt (continuous values, reaction times) e.g. like this:</p>\n\n<pre><code>   id  StimCat rt\n0  1     A    596\n1  1     B    657\n2  1     C    200\n3  1     C    354\n4  1     A    164\n5  2     A    164\n6  2     B    343\n7  2     B    264\n8  2     A    456\n9  2     C    523 \n10 2     C    241\n</code></pre>\n\n<p>I wrote the following code to plot the mean data for each StimCat level grouped by id:</p>\n\n<pre><code>fig, ax = plt.subplots(figsize=(15,7))            \ndf.groupby(['id','StimCat']).mean()['rt'].unstack().plot.bar(ax=ax)\n</code></pre>\n\n<p>However, I actually only want to plot 2 out of 3 levels for StimCat, namely A and B, but omit level C from the plots entirely. </p>\n\n<p>Any hints on how I could do this? Or if such a question has been asked before (which I haven't found yet), you could hopefully point me to the respective entry? Thank you everyone!!!! I really appreciate it!</p>\n"}, {"tags": ["python", "c++", "memory-leaks", "cython", "valgrind"], "comments": [{"owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515648832, "post_id": 48197797, "comment_id": 83381705, "body": "I am not sure to look at with that option. I have updated Valgrind log in the problem description above."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515649458, "post_id": 48197797, "comment_id": 83381918, "body": "It looks like something inside of the python\u2019s shared library (possibly when loading?). But this is not the only leak, isn\u2019t it? Did you build your stuff in debug?"}, {"owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515652058, "post_id": 48197797, "comment_id": 83382893, "body": "On further debugging, I realized that leak is due to  &quot;import_array1(-1)&quot; call? Not sure how to fix it. This call is necessary to use numpy array in C."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515652419, "post_id": 48197797, "comment_id": 83383044, "body": "Then this is probably <code>PyArray_API</code>, don&#39;t think you could (or should) do something about it."}, {"owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515697718, "post_id": 48197797, "comment_id": 83410110, "body": "Looks like it is not a leak. Rather, the leak is reported due to a statically located block by import_array()"}], "owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515648908, "creation_date": 1515627361, "last_edit_date": 1515648908, "question_id": 48197797, "link": "https://stackoverflow.com/questions/48197797/memory-leak-in-using-python-api-pyarray-simplenewfromdata", "title": "Memory Leak in Using Python API PyArray_SimpleNewFromData", "body": "<p>I am not able to figure out cause of memory leak in the following code; Valgrind is reporting memory in on executing the following function. This might be happening due to my lack of understanding of Py_INCREF and Py_DECREF macros.</p>\n\n<p>Here the c++ code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Python.h&gt;\n#include \"numpy/arrayobject.h\"\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    PyObject *pName = NULL;\n    PyObject *pModule = NULL;\n    PyObject *pFunc = NULL;\n    PyObject *pArgs = NULL;\n    PyObject *pValue = NULL;\n    PyObject *vec = NULL;\n    PyObject *vec1 = NULL;\n\n    const char* script = \"TestScript\";\n    const char* function = \"test\";\n\n    Py_Initialize();\n    pName = PyUnicode_FromString(script);\n    pModule = PyImport_Import(pName);\n\n    // Deleting memory for object pName\n    Py_DECREF(pName);\n\n    import_array1(-1);\n\n    if (pModule != NULL) {\n        pFunc = PyObject_GetAttrString(pModule, function);\n\n        if (pFunc &amp;&amp; PyCallable_Check(pFunc)) {\n            // define a vector\n            double* v = new double[5];\n            v[0] = 1.0;\n            v[1] = 2.0;\n            v[2] = 3.0;             \n            v[3] = 4.0;             \n            v[4] = 5.0;\n\n            double* v1 = new double[5];\n            v1[0] = 1.0;\n            v1[1] = 2.0;\n            v1[2] = 3.0;                \n            v1[3] = 4.0;                \n            v1[4] = 5.0;\n\n            npy_intp vdim[] = { 5 };\n\n            vec = PyArray_SimpleNewFromData(1, vdim, (int)PyArray_DOUBLE, (void*)v);\n            vec1 = PyArray_SimpleNewFromData(1, vdim, (int)PyArray_DOUBLE, (void*)v1);\n\n            pArgs = PyTuple_New(2);\n            Py_INCREF(vec); // If I don't do this, I get segfault in Py_Finalize**\n            Py_INCREF(vec1); // If I don't do this, I get segfault in Py_Finalize**\n\n            PyTuple_SetItem(pArgs, 0, vec);\n            PyTuple_SetItem(pArgs, 1, vec1);\n\n\n            pValue = PyObject_CallObject(pFunc, pArgs);\n\n            Py_DECREF(pArgs);\n            Py_XDECREF(vec);\n            Py_XDECREF(vec1);\n\n            delete [] v;\n            delete [] v1;\n\n            if (pValue != NULL) {\n                printf(\"Result of call: %f\\n\", PyFloat_AsDouble(pValue));\n                Py_DECREF(pValue);\n            }\n\n            Py_DECREF(pFunc);\n        } else {\n            if (PyErr_Occurred()) {\n                PyErr_Print();\n                fprintf(stderr, \"Cannot find function \\\"%s\\\"\\n\", function);\n            }\n        }\n        Py_DECREF(pModule);\n    } else {\n        PyErr_Print();\n        return 1;\n    }\n\n    Py_Finalize();\n\n    return 0;\n}\n</code></pre>\n\n<p>Here the the Python function</p>\n\n<pre><code>def test(a, b):\n    print(\"Python::test\")\n    print(a)\n    print(b)\n\n    return 1\n</code></pre>\n\n<p>Here the summary of Valgrind report.</p>\n\n<pre><code>==81480== 154,839 bytes in 81 blocks are definitely lost in loss record 1,258 of 1,259\n==81480==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==81480==    by 0x4ED9777: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4EA81D8: PyUnicode_New (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4EABFDC: _PyUnicode_FromASCII (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FA073C: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4EE8038: PyCFunction_Call (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FF41B4: PyEval_EvalFrameEx (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FF4638: PyEval_EvalFrameEx (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x5084CAB: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x5084D82: PyEval_EvalCodeEx (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FEC9CA: PyEval_EvalCode (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FF967C: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==\n\n\n&gt; ==55233== \n&gt; ==55233== \n&gt; ==55233== HEAP SUMMARY:\n&gt; ==55233==     in use at exit: 2,642,149 bytes in 4,750 blocks\n&gt; ==55233==   total heap usage: 42,001 allocs, 37,251 frees, 34,675,848 bytes allocated\n&gt; ==55233== \n&gt; ==55233== LEAK SUMMARY:\n&gt; ==55233==    definitely lost: 157,656 bytes in 85 blocks\n&gt; ==55233==    indirectly lost: 0 bytes in 0 blocks\n&gt; ==55233==      possibly lost: 158,663 bytes in 90 blocks\n&gt; ==55233==    still reachable: 2,325,830 bytes in 4,575 blocks\n&gt; ==55233==         suppressed: 0 bytes in 0 blocks\n&gt; ==55233== Rerun with --leak-check=full to see details of leaked memory\n&gt; ==55233== \n&gt; ==55233== For counts of detected and suppressed errors, rerun with: -v\n&gt; ==55233== Use --track-origins=yes to see where uninitialised values come from\n&gt; ==55233== ERROR SUMMARY: 3460 errors from 123 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup", "python-requests"], "comments": [{"owner": {"reputation": 6659, "user_id": 7832176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5923d496015d26974109a16c7af1b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Keyur Potdar", "link": "https://stackoverflow.com/users/7832176/keyur-potdar"}, "edited": false, "score": 0, "creation_date": 1515648173, "post_id": 48197776, "comment_id": 83381514, "body": "What are you expecting as the output?"}, {"owner": {"reputation": 77, "user_id": 2816300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d50c9a6cc2a476fcb0a7276e3ce828?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2816300/kevin"}, "reply_to_user": {"reputation": 6659, "user_id": 7832176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5923d496015d26974109a16c7af1b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Keyur Potdar", "link": "https://stackoverflow.com/users/7832176/keyur-potdar"}, "edited": false, "score": 0, "creation_date": 1515798366, "post_id": 48197776, "comment_id": 83453006, "body": "I am trying to scrape the table from the website.  But I need the two name flavors in separate columns so that I can lookup scores by player name."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5236897"}, "is_accepted": false, "score": 1, "last_activity_date": 1515636945, "last_edit_date": 1515636945, "creation_date": 1515636384, "answer_id": 48198832, "question_id": 48197776, "link": "https://stackoverflow.com/questions/48197776/python-scraping-how-to-separate-multiple-attributes-in-one-cell-td/48198832#48198832", "title": "Python Scraping: How to separate multiple attributes in one cell (td)?", "body": "<p>try to use regex to match the tr</p>\n\n<pre><code>players = the_soup.findAll('tr',{'class':re.compile(\"player-overview\")})\nfor p in players:\n    name = p.find('a',{'class':'full-name'}).get_text()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6659, "user_id": 7832176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5923d496015d26974109a16c7af1b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Keyur Potdar", "link": "https://stackoverflow.com/users/7832176/keyur-potdar"}, "is_accepted": false, "score": 2, "last_activity_date": 1515648641, "creation_date": 1515648641, "answer_id": 48200327, "question_id": 48197776, "link": "https://stackoverflow.com/questions/48197776/python-scraping-how-to-separate-multiple-attributes-in-one-cell-td/48200327#48200327", "title": "Python Scraping: How to separate multiple attributes in one cell (td)?", "body": "<p>If you want the full name and short name, you can try this:</p>\n\n<pre><code>for td in row.find_all('td'):\n    full_name = td.find('a', {'class': 'full-name'}).text\n    short_name = td.find('a', {'class': 'short-name'}).text\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 2816300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d50c9a6cc2a476fcb0a7276e3ce828?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2816300/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515648641, "creation_date": 1515627189, "question_id": 48197776, "link": "https://stackoverflow.com/questions/48197776/python-scraping-how-to-separate-multiple-attributes-in-one-cell-td", "title": "Python Scraping: How to separate multiple attributes in one cell (td)?", "body": "<p>When scraping an HTML table, if a cell (td) in the table has multiple attributes (See HTML snippet for example) how can you separate the two and/or how could you select just one?</p>\n\n<p>HTML snippet:</p>\n\n<pre><code>&lt;td class=\"playerName md align-left pre in post\" style=\"display: table-cell;\"&gt;&lt;span ...&lt;/span&gt;\n&lt;a role=\"button\" class=\"full-name\"&gt;Dustin Johnson&lt;/a&gt;\n&lt;a role=\"button\" class=\"short-name\"&gt;D.  Johnson&lt;/a&gt;&lt;/td&gt;\n</code></pre>\n\n<p>Code I'm trying:</p>\n\n<pre><code>url = 'http://www.espn.com/golf/leaderboard?tournamentId=3742'\n\nreq = requests.get(url)\nsoup = bs4.BeautifulSoup(req.text,'lxml')\n\ntable = soup.find(id='leaderboard-view')\nheadings = [th.get_text() for th in table.find('tr').find_all('th')]\n\ndataset = []\n\nfor row in table.find_all('tr'):\n    a = [td.get_text() for td in row.find_all('td')]\n    dataset.append(a)\n</code></pre>\n\n<p>Any advice on how to either a) select just one of the names, or b) separate the cell in to two cells would be appreciated.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1515628258, "post_id": 48197747, "comment_id": 83376916, "body": "This feature isn&#39;t supported in the API as of yet. One ugly workaround would be using globals with your code."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515630453, "post_id": 48197747, "comment_id": 83377542, "body": "Or, use <code>lambda row: sum(row, 9, 3)</code> , i.e. use partial application...."}], "owner": {"reputation": 307, "user_id": 2540093, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/eca3dd6f6fc676c04406549d51c838bd?s=128&d=identicon&r=PG", "display_name": "spencerrecneps", "link": "https://stackoverflow.com/users/2540093/spencerrecneps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1515627016, "creation_date": 1515627016, "question_id": 48197747, "link": "https://stackoverflow.com/questions/48197747/how-can-i-use-pandas-apply-with-args-on-a-sparse-dataframe", "title": "How can I use pandas.apply with args on a sparse dataframe?", "body": "<p>Consider the following example:</p>\n\n<pre><code>def sum(row,c,d):\n    return row['A']+row['B']+c+d\n\ndf = pd.DataFrame(np.random.randint(0,100,size=(10, 2)), columns=list('AB'))\n</code></pre>\n\n<p>The following runs as expected:</p>\n\n<pre><code>&gt;&gt;&gt; df.apply(sum,axis=1,args=(9,3))\n0     59\n1    132\n2    138\n3    129\n4    115\n5    113\n6     99\n7     81\n8     80\n9    189\n</code></pre>\n\n<p>But converting to a sparse dataframe causes a TypeError:</p>\n\n<pre><code>&gt;&gt;&gt; df.to_sparse().apply(sum,axis=1,args=(9,3))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: apply() got an unexpected keyword argument 'args'\n</code></pre>\n\n<p>I don't see anything in the docs about apply() being handled differently for sparse vs dense dataframes. Is this a bug, or have I misunderstood something?</p>\n"}, {"tags": ["python", "matplotlib", "data-visualization"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1515628153, "post_id": 48197738, "comment_id": 83376888, "body": "Please always provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if you are experiencing undesired behaviour with a code."}], "answers": [{"comments": [{"owner": {"reputation": 2069, "user_id": 4386239, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-5YBlGTMysp8/AAAAAAAAAAI/AAAAAAAAAHE/I0tBoel4xHE/photo.jpg?sz=128", "display_name": "Paul Gowder", "link": "https://stackoverflow.com/users/4386239/paul-gowder"}, "edited": false, "score": 0, "creation_date": 1515628596, "post_id": 48197905, "comment_id": 83377007, "body": "Well, that was the solution, and thank you (sorry for not posting the whole data, I couldn&#39;t reproduce with simulated data, and the actual data was a lot.)  Out of curiosity, why does it have to be sorted for this to work?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 2069, "user_id": 4386239, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-5YBlGTMysp8/AAAAAAAAAAI/AAAAAAAAAHE/I0tBoel4xHE/photo.jpg?sz=128", "display_name": "Paul Gowder", "link": "https://stackoverflow.com/users/4386239/paul-gowder"}, "edited": false, "score": 0, "creation_date": 1515628986, "post_id": 48197905, "comment_id": 83377111, "body": "Try to shade some area between unsorted points with a pencil on paper. It will be chaotic. If you think about it, when shading something on paper your brain sorts the points somehow, such that it will give a continuous area. Same with the code: Trying to fill a polygon with x coordinates starting at 1, then 50, then 2, then 32 does make little sense."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 3, "last_activity_date": 1515630796, "last_edit_date": 1515630796, "creation_date": 1515628105, "answer_id": 48197905, "question_id": 48197738, "link": "https://stackoverflow.com/questions/48197738/matplotlib-fill-between-leaves-gaps/48197905#48197905", "title": "matplotlib fill_between leaves gaps", "body": "<p>One cannot know for sure because the question is missing the essential part, namely the data itself (see <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>). </p>\n\n<p>The strong suspicion here would however be that <strong>the data is not sorted</strong>. </p>\n\n<p>The (untested) solution would be to sort the data, </p>\n\n<pre><code>ax.plot(np.sort(x), fitted[np.argsort(x)])\nax.fill_between(np.sort(x), ci_low[np.argsort(x)], fitted[np.argsort(x)])\n</code></pre>\n\n<p>To understand why values need to be sorted, maybe a picture can tell more than a thousands words.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4ca5F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ca5F.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2069, "user_id": 4386239, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-5YBlGTMysp8/AAAAAAAAAAI/AAAAAAAAAHE/I0tBoel4xHE/photo.jpg?sz=128", "display_name": "Paul Gowder", "link": "https://stackoverflow.com/users/4386239/paul-gowder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 48197905, "answer_count": 1, "score": 1, "last_activity_date": 1515630796, "creation_date": 1515626943, "last_edit_date": 1515627476, "question_id": 48197738, "link": "https://stackoverflow.com/questions/48197738/matplotlib-fill-between-leaves-gaps", "title": "matplotlib fill_between leaves gaps", "body": "<p>I'm trying to recreate seaborn's <a href=\"https://seaborn.pydata.org/generated/seaborn.regplot.html?highlight=regplot#seaborn.regplot\" rel=\"nofollow noreferrer\">fill-only confidence interval plotting</a> in raw matplotlib.  In doing so, I'm running into strange behavior where the <code>fill_between</code> function leaves gaps between the stuff it's supposed to be filling.</p>\n\n<p>I'm using real-world data on this, but it's well-behaved data: the x values are on the range of about 0-15, and the y values on a range of about 25-85.  I'm using statsmodels to fit the line and generate the confidence intervals with essentially <a href=\"https://stackoverflow.com/questions/17559408/confidence-and-prediction-intervals-with-statsmodels\">the code from this prior SO</a>, and the fitted values as well as the upper and lower bounds of the confidence intervals are as they should be (the ranges are appropriate, etc.).  So there's nothing wrong with the data.</p>\n\n<p>Here's the relevant part of the code:</p>\n\n<pre><code>def make_plot(x, y):\n    fig = plt.figure(figsize=(12, 9))\n    ax = fig.add_subplot(1, 1, 1)\n    ax.plot(x, y, 'k.', ms=5)\n    ax.locator_params(nbins=3)\n    ax.spines['top'].set_visible(False)\n    ax.spines['right'].set_visible(False)\n    regline =  sm.OLS(y,sm.add_constant(x)).fit()\n    fitted = regline.fittedvalues\n    ax.plot(x, fitted, color=(0.2, 0.2, 0.2, 0.2), linewidth=2)\n    ci_low, ci_high = get_ci_values(regline)\n    ax.fill_between(x, ci_low, fitted, facecolor=(0.4, 0.4, 0.9, 0.2))\n    ax.fill_between(x, ci_high, fitted, facecolor=(0.9, 0.4, 0.4, 0.2))\n    return fig\n</code></pre>\n\n<p>The line fill works fine until it hits around x=10, y=50, and then it starts to leave bizarre gaps where it doesn't come all the way to the regression line.  Here's an example: </p>\n\n<p><a href=\"https://i.stack.imgur.com/avAQz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/avAQz.png\" alt=\"image with horrible gap\"></a></p>\n\n<p>What have I done wrong here?  I've tried a bunch of stuff, including: </p>\n\n<ul>\n<li><p>adding lines for the low and high confidence intervals</p></li>\n<li><p>adding <code>interpolate=True</code> to the <code>fill_between</code> calls</p></li>\n<li><p>adding <code>where=x&gt;0</code> to the <code>fill_between</code> calls</p></li>\n</ul>\n\n<p>but none of that makes any difference.</p>\n\n<p>I also note that seaborn <a href=\"https://github.com/mwaskom/seaborn/blob/master/seaborn/regression.py#L396\" rel=\"nofollow noreferrer\">manages</a> to make its beautiful fills using <code>fill_between</code>, using exactly the same strategy, and seaborn's plotting works correctly on the data I'm using...</p>\n"}, {"tags": ["python", "airflow", "apache-airflow"], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "edited": false, "score": 0, "creation_date": 1516324400, "post_id": 48254444, "comment_id": 83651129, "body": "&quot;schedule_interval=parent_dag.dag_id&quot; should that be parent_dag.schedule_interval? I read that if schedule_interval is @once, the sub dag won&#39;t run at all"}, {"owner": {"reputation": 8437, "user_id": 3314107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9bdb9cc374e313876de99a99d191ecd6?s=128&d=identicon&r=PG", "display_name": "stefanobaghino", "link": "https://stackoverflow.com/users/3314107/stefanobaghino"}, "reply_to_user": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "edited": false, "score": 0, "creation_date": 1516347365, "post_id": 48254444, "comment_id": 83657309, "body": "Fixed, thanks. Not sure of how, but the thing actually work when I tested it."}, {"owner": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "edited": false, "score": 0, "creation_date": 1516390796, "post_id": 48254444, "comment_id": 83682891, "body": "I tried using that, and got &quot;Broken DAG: [...] Timeout&quot; I haven&#39;t been able to find anything specific to that error.  Do you have any clues?"}, {"owner": {"reputation": 8437, "user_id": 3314107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9bdb9cc374e313876de99a99d191ecd6?s=128&d=identicon&r=PG", "display_name": "stefanobaghino", "link": "https://stackoverflow.com/users/3314107/stefanobaghino"}, "reply_to_user": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "edited": false, "score": 0, "creation_date": 1516399277, "post_id": 48254444, "comment_id": 83686878, "body": "Sorry, I just re-ran it and I don&#39;t see any error. I&#39;m using the <code>puckel&#47;docker-airflow:1.8.0</code> images to quickly test this."}], "tags": [], "owner": {"reputation": 8437, "user_id": 3314107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9bdb9cc374e313876de99a99d191ecd6?s=128&d=identicon&r=PG", "display_name": "stefanobaghino", "link": "https://stackoverflow.com/users/3314107/stefanobaghino"}, "is_accepted": false, "score": 4, "last_activity_date": 1516347324, "last_edit_date": 1516347324, "creation_date": 1515966009, "answer_id": 48254444, "question_id": 48197709, "link": "https://stackoverflow.com/questions/48197709/want-to-create-airflow-tasks-that-are-downstream-of-the-current-task/48254444#48254444", "title": "Want to create airflow tasks that are downstream of the current task", "body": "<p>Regarding your proposed solution, I don't think you can use XComs to achieve this, as they are only available to instances and not when you define the DAG (to the best of my knowledge).</p>\n\n<p>You can however use a <a href=\"https://airflow.apache.org/concepts.html#subdags\" rel=\"nofollow noreferrer\">SubDAG</a> to achieve your objective. The <code>SubDagOperator</code> gets a function which is going to be invoked when the operator is going to be executed and that generates a DAG, giving you a chance to dynamically create a sub-section of your workflow.</p>\n\n<p>You can test the idea using this simple example, which generates a random of tasks every time it's invoked:</p>\n\n<pre><code>import airflow\nfrom builtins import range\nfrom random import randint\nfrom airflow.operators.bash_operator import BashOperator\nfrom airflow.operators.subdag_operator import SubDagOperator\nfrom airflow.models import DAG\n\nargs = {\n    'owner': 'airflow',\n    'start_date': airflow.utils.dates.days_ago(2)\n}\n\ndag = DAG(dag_id='dynamic_dag', default_args=args)\n\ndef generate_subdag(parent_dag, dag_id, default_args):\n    # pseudo-randomly determine a number of tasks to be created\n    n_tasks = randint(1, 10)\n\n    subdag = DAG(\n        '%s.%s' % (parent_dag.dag_id, dag_id),\n        schedule_interval=parent_dag.schedule_interval,\n        start_date=parent_dag.start_date,\n        default_args=default_args\n    )\n    for i in range(n_tasks):\n        i = str(i)\n        task = BashOperator(task_id='echo_%s' % i, bash_command='echo %s' % i, dag=subdag)\n\n    return subdag\n\nsubdag_dag_id = 'dynamic_subdag'\n\nSubDagOperator(\n    subdag=generate_subdag(dag, subdag_dag_id, args),\n    task_id=subdag_dag_id,\n    dag=dag\n)\n</code></pre>\n\n<p>If you execute this you'll notice that in different runs SubDAGs are likely to contain a different number of tasks (I tested this with version 1.8.0). You can access the SubDAG view on the WebUI by accessing the graph view, clicking on the grey SubDAG node and then on \"Zoom into SubDAG\".</p>\n\n<p>You can use this concept by listing files and creating one task for each of those instead of just generating them in a random number like in the example. The tasks themselves can be arranged in parallel (as I did), sequentially or in any valid directed acyclic layout.</p>\n"}], "owner": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1516347324, "creation_date": 1515626771, "last_edit_date": 1516008340, "question_id": 48197709, "link": "https://stackoverflow.com/questions/48197709/want-to-create-airflow-tasks-that-are-downstream-of-the-current-task", "title": "Want to create airflow tasks that are downstream of the current task", "body": "<p>I'm mostly brand new to airflow.</p>\n\n<p>I have a two step process:</p>\n\n<ol>\n<li>Get all files that match a criteria</li>\n<li>Uncompress the files</li>\n</ol>\n\n<p>The files are half a gig compressed, and 2 - 3 gig when uncompressed.  I can easily have 20+ files to process at a time, which means uncompressing all of them can run longer than just about any reasonable timeout</p>\n\n<p>I could use XCom to get the results of step 1, but what I'd like to do is something like this:</p>\n\n<pre><code>def processFiles (reqDir, gvcfDir, matchSuffix):\n    theFiles = getFiles (reqDir, gvcfDir, matchSuffix)\n\n    for filePair in theFiles:\n        task = PythonOperator (task_id = \"Uncompress_\" + os.path.basename (theFile), \n                                python_callable = expandFile, \n                                op_kwargs = {'theFile': theFile}, \n                                dag = dag)\ntask.set_upstream (runThis)\n</code></pre>\n\n<p>The problem is that \"runThis\" is the PythonOperator that called processFiles, so it has to be declared after processFiles.</p>\n\n<p>Is there any way to make this work?</p>\n\n<p>Is this the reason that XCom exists, and I should dump this approach and go with XCom?</p>\n"}, {"tags": ["python", "python-2.7", "memory-management", "memory-leaks"], "answers": [{"tags": [], "owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "is_accepted": false, "score": 0, "last_activity_date": 1515627860, "creation_date": 1515627860, "answer_id": 48197867, "question_id": 48197676, "link": "https://stackoverflow.com/questions/48197676/where-is-the-ram-consumption/48197867#48197867", "title": "Where is the RAM consumption?", "body": "<p>I see similar although less extreme results running your code on a pickle of a list of about 275000 dictionaries:</p>\n\n<pre><code>before rss: 14.3086mb\nbefore vss: 83.2773mb\nmemory used by cache: 467.1687mb\nafter rss: 745.0195mb\nafter vss: 823.6133mb\n</code></pre>\n\n<p>I don't have an explanation for this, but I can tell you that just calling asizeof.asizeof(cache) increases memory usage for me by over 80 megabytes:</p>\n\n<pre><code>before rss: 14.3125mb\nbefore vss: 83.2773mb\nbefore asizeof rss: 663.1797mb\nbefore asizeof vss: 741.8008mb\nmemory used by cache: 467.1687mb\nafter asizeof rss: 745.0195mb\nafter asizeof vss: 823.6055mb\n</code></pre>\n\n<p>Perhaps if you do the same check it will help you narrow down the cause.</p>\n"}], "owner": {"reputation": 11, "user_id": 6104552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc822c5d997463eeb0011465d385fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Radeljak", "link": "https://stackoverflow.com/users/6104552/federico-radeljak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515627860, "creation_date": 1515626460, "question_id": 48197676, "link": "https://stackoverflow.com/questions/48197676/where-is-the-ram-consumption", "title": "Where is the RAM consumption?", "body": "<p>I'm having a problem of RAM consumption with Python 2.7. When I load a pickled object the memory usage of the python process is far more than the object size on RAM. \nHere is the code:</p>\n\n<pre><code>import dill\nimport time\nimport psutil\nfrom pympler import asizeof\n\nwith open('results/dynamic_cache_lru_0.250gb.pickle', 'rb') as fh:\n    cache = dill.load(fh)\n    print('memory used by cache: %.4fmb' % (asizeof.asizeof(cache) / 1024.0 / 1024))\n    mi = psutil.Process().memory_info()\n    print('rss: %.4fmb' % (mi[0] / 1024.0 / 1024))\n    print('vss: %.4fmb' % (mi[1] / 1024.0 / 1024))\n</code></pre>\n\n<p>And this is the output I get:  </p>\n\n<pre><code>memory used by cache: 247.1717mb\nrss: 905.2266mb\nvss: 949.2617mb\n</code></pre>\n\n<p>I don't know what is using that extra RAM or if it's being used by the object  itself, why it isn't counted as its size.</p>\n"}, {"tags": ["python", "python-3.x", "pygame", "pyglet"], "comments": [{"owner": {"reputation": 2851, "user_id": 8003790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439b528b13c53ea231f24bb46136c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "IMCoins", "link": "https://stackoverflow.com/users/8003790/imcoins"}, "edited": false, "score": 1, "creation_date": 1515626385, "post_id": 48197626, "comment_id": 83376424, "body": "It shouldn&#39;t be allowed to have 950 lines of code on a single page. xD"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1515626704, "post_id": 48197626, "comment_id": 83376506, "body": "You need a minimal example."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 2, "creation_date": 1515626726, "post_id": 48197626, "comment_id": 83376515, "body": "But my bet is your dependency changed its API."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1515626758, "post_id": 48197626, "comment_id": 83376518, "body": "Did you update the <code>pyglet</code> package recently?"}], "answers": [{"tags": [], "owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "is_accepted": true, "score": 0, "last_activity_date": 1515626882, "creation_date": 1515626882, "answer_id": 48197726, "question_id": 48197626, "link": "https://stackoverflow.com/questions/48197626/havent-changed-my-code-but-it-stopped-working-object-has-no-attribute-eos-lo/48197726#48197726", "title": "Haven&#39;t changed my code but it stopped working: `object has no attribute &#39;EOS_LOOP&#39;`", "body": "<p>It was <a href=\"https://pyglet.readthedocs.io/en/pyglet-1.2-maintenance/api/pyglet/media/pyglet.media.Player.html#pyglet.media.Player.EOS_LOOP\" rel=\"nofollow noreferrer\">deprecated as of at least 1.2.4</a>.</p>\n\n<p>This leads me to believe you're using a version in which the attribute was removed. You'll need to read the migration guide or fall back to an older version.</p>\n\n<p>This can be done by specifying the version with pip install:</p>\n\n<pre><code>pip3 install xyz==0.1.2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": false, "score": 2, "last_activity_date": 1515627252, "creation_date": 1515627252, "answer_id": 48197781, "question_id": 48197626, "link": "https://stackoverflow.com/questions/48197626/havent-changed-my-code-but-it-stopped-working-object-has-no-attribute-eos-lo/48197781#48197781", "title": "Haven&#39;t changed my code but it stopped working: `object has no attribute &#39;EOS_LOOP&#39;`", "body": "<p>The <code>EOS_LOOP</code> property was removed from the <code>Player</code> type in on March 7th, 2015 with <a href=\"https://bitbucket.org/pyglet/pyglet/commits/cf394d44c10e0dc053734ed5c9a3cbf762bd28ae\" rel=\"nofollow noreferrer\">this commit</a>.</p>\n\n<p>Before its removal, the constants were marked as deprecated:</p>\n\n<pre><code>#: The player will pause when it reaches the end of the stream.\n#:\n#: :deprecated: Use `SourceGroup.advance_after_eos`\nEOS_PAUSE = 'pause'\n\n#: The player will loop the current stream continuosly.\n#:\n#: :deprecated: Use `SourceGroup.loop`\nEOS_LOOP = 'loop'\n\n#: The player will move on to the next queued stream when it reaches the\n#: end of the current source.  If there is no source queued, the player\n#: will pause.\n#:\n#: :deprecated: Use `SourceGroup.advance_after_eos`\nEOS_NEXT = 'next'\n\n#: The player will stop entirely; valid only for ManagedSoundPlayer.\n#:\n#: :deprecated: Use `SourceGroup.advance_after_eos`\nEOS_STOP = 'stop'\n\n#: :deprecated:\n_eos_action = EOS_NEXT\n</code></pre>\n\n<p>So according to that, you are supposed to use <a href=\"https://pyglet.readthedocs.io/en/pyglet-1.3-maintenance/modules/media.html#pyglet.media.SourceGroup.loop\" rel=\"nofollow noreferrer\"><code>SourceGroup.loop</code></a> now.</p>\n\n<p>Since that change was in 2015, it\u2019s likely that since then there were also other changes. So you should consider upgrading your code to the new version.</p>\n"}], "owner": {"reputation": 721, "user_id": 5869848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/--I4rG6pYFuE/AAAAAAAAAAI/AAAAAAAABuw/a39znlggsIM/photo.jpg?sz=128", "display_name": "Max Li", "link": "https://stackoverflow.com/users/5869848/max-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 48197726, "answer_count": 2, "score": -1, "last_activity_date": 1515627252, "creation_date": 1515626092, "question_id": 48197626, "link": "https://stackoverflow.com/questions/48197626/havent-changed-my-code-but-it-stopped-working-object-has-no-attribute-eos-lo", "title": "Haven&#39;t changed my code but it stopped working: `object has no attribute &#39;EOS_LOOP&#39;`", "body": "<p>Here is my full code:</p>\n\n<p><a href=\"http://codr.io/tscumzc\" rel=\"nofollow noreferrer\">http://codr.io/tscumzc</a></p>\n\n<p>And the error occurs with a music player called <code>player</code>:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 915, in &lt;module&gt;\n    player.eos_action = player.EOS_LOOP\nAttributeError: 'Player' object has no attribute 'EOS_LOOP'\n</code></pre>\n\n<p>I can confirm that all of the sound files are in the directory and I have installed pyglet with pip3, pygame, etc.</p>\n\n<p>My game was working months ago but now that I'm coming back to it it is not working all of a sudden.</p>\n\n<p>The offending piece of code is only the player initialization and the EOS_LOOP part, since I tried only doing that in python3 in the terminal and it wouldn't work even with pyglet imported.</p>\n"}, {"tags": ["python", "sql", "hive", "odbc"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 5221819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153397342591348/picture?type=large", "display_name": "Joohun Lee", "link": "https://stackoverflow.com/users/5221819/joohun-lee"}, "edited": false, "score": 0, "creation_date": 1515630995, "post_id": 48197791, "comment_id": 83377663, "body": "thanks, with this change, it solves unidecodeError. but I have run into another issue as below. &gt;&gt;&gt; my_cursor.execute(my_query, var1) Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; pyodbc.ProgrammingError: (&#39;The SQL contains 0 parameter markers, but 1 parameters were supplied&#39;, &#39;HY000&#39;)"}], "tags": [], "owner": {"reputation": 21, "user_id": 4892612, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nBYgxQKPOcg/AAAAAAAAAAI/AAAAAAAADZg/MpKaLV9tE74/photo.jpg?sz=128", "display_name": "Charlie Bosson", "link": "https://stackoverflow.com/users/4892612/charlie-bosson"}, "is_accepted": false, "score": 2, "last_activity_date": 1515627312, "creation_date": 1515627312, "answer_id": 48197791, "question_id": 48197621, "link": "https://stackoverflow.com/questions/48197621/unicodedecodererrorascii-codec-cant-decode-when-querying-data-on-hive-with-p/48197791#48197791", "title": "UnicodedecoderError;&#39;ascii&#39; codec cant&#39; decode when querying data on hive with python", "body": "<p>The second apostrophe used as a single quote around %s is not an ASCII character. Replace the single quote characters with '':</p>\n\n<pre><code>my_query =  \"\"\"\n select *  from polaris_datasets.snmaster  where parent_pid rlike '%s'  and \ncreated_date &gt;=  \"2017-12-01 00:00:00\"\n \"\"\" \n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 5221819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153397342591348/picture?type=large", "display_name": "Joohun Lee", "link": "https://stackoverflow.com/users/5221819/joohun-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515627312, "creation_date": 1515626041, "question_id": 48197621, "link": "https://stackoverflow.com/questions/48197621/unicodedecodererrorascii-codec-cant-decode-when-querying-data-on-hive-with-p", "title": "UnicodedecoderError;&#39;ascii&#39; codec cant&#39; decode when querying data on hive with python", "body": "<p>I'm trying to pass variables to query for hive database but I have run into unicodedecoderError as below.</p>\n\n<p>Below is my codes.</p>\n\n<pre><code> import pyodbc\n import pandas as pd\n\n var1 = 'UCSB'\n my_connection = pyodbc.connect('DSN=MapR-64-Hive', autocommit=True)\n my_cursor = my_connection.cursor()\n my_query =  \"\"\"\n     select *  from polaris_datasets.snmaster  where parent_pid rlike \u2018%s\u2019  and created_date &gt;=  \"2017-12-01 00:00:00\"\n     \"\"\" \n\n my_cursor.execute(my_query,  var1)\n</code></pre>\n\n<p>and the Error is as below.</p>\n\n<pre><code> &gt;&gt;&gt; my_cursor.execute(my_query, var1)\n Traceback (most recent call last):\n   File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 70: ordinal not in range(128)\n</code></pre>\n\n<p>I'm not sure if this is syntax issue or encoding issue so I need to change somewhere?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 2, "creation_date": 1515626378, "post_id": 48197618, "comment_id": 83376418, "body": "HACK!!  df[df.eq(df.assign(**mydict)).all(1)]"}], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515627049, "post_id": 48197669, "comment_id": 83376591, "body": "Phew, lot of great options here. Will you add the <code>isin</code> one as well? I&#39;ll remove my answer."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1515627085, "post_id": 48197669, "comment_id": 83376604, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05, why do think that it would be better to have less answers? ;-)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1515626827, "last_edit_date": 1515626827, "creation_date": 1515626415, "answer_id": 48197669, "question_id": 48197618, "link": "https://stackoverflow.com/questions/48197618/how-to-search-for-a-row-in-a-dataframe-that-has-all-elements-expressed-by-a-dict/48197669#48197669", "title": "How to search for a row in a dataframe that has all elements expressed by a dictionary?", "body": "<p>Try this:</p>\n\n<pre><code>In [116]: qry = ' and '.join(['{} == \"{}\"'.format(k,v) for k,v in mydict.items() if k in df.columns.tolist()])\n\nIn [117]: df.query(qry)\nOut[117]:\n       prop1 prop2 prop3\ncombo1     X     Y     Z\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>In [121]: df.eval(qry)\nOut[121]:\ncombo1     True\ncombo2    False\ncombo3    False\ncombo4    False\ndtype: bool\n</code></pre>\n\n<p>Details:</p>\n\n<pre><code>In [119]: qry\nOut[119]: 'prop1 == \"X\" and prop2 == \"Y\" and prop3 == \"Z\"'\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>if your dict would contain only valid columns we could do the following:</p>\n\n<pre><code>In [137]: mydict2 = { 'prop1': 'X', 'prop2':'Y', 'prop3': 'Z'}\n\nIn [138]: df.eq(pd.Series(mydict2), axis=1)\nOut[138]:\n        prop1  prop2  prop3\ncombo1   True   True   True\ncombo2  False  False   True\ncombo3   True  False  False\ncombo4  False   True  False\n\nIn [139]: df.eq(pd.Series(mydict2), axis=1).all(1)\nOut[139]:\ncombo1     True\ncombo2    False\ncombo3    False\ncombo4    False\ndtype: bool\n</code></pre>\n\n<p>or using original dictionary:</p>\n\n<pre><code>In [141]: flt = pd.Series(mydict).loc[df.columns]\n\nIn [142]: flt\nOut[142]:\nprop1    X\nprop2    Y\nprop3    Z\ndtype: object\n\nIn [143]: df.eq(flt, axis=1).all(1)\nOut[143]:\ncombo1     True\ncombo2    False\ncombo3    False\ncombo4    False\ndtype: bool\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 390, "user_id": 2159357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb525a779e22f6d527ce47e7112e1e45?s=128&d=identicon&r=PG", "display_name": "Javier", "link": "https://stackoverflow.com/users/2159357/javier"}, "is_accepted": false, "score": 0, "last_activity_date": 1515626555, "creation_date": 1515626555, "answer_id": 48197687, "question_id": 48197618, "link": "https://stackoverflow.com/questions/48197618/how-to-search-for-a-row-in-a-dataframe-that-has-all-elements-expressed-by-a-dict/48197687#48197687", "title": "How to search for a row in a dataframe that has all elements expressed by a dictionary?", "body": "<p>Another option:</p>\n\n<pre><code>def dfRowMatchedMyDict(df,mydict):\n    cols = set(mydict) &amp; set(df.columns)\n    trues = np.zeros(len(df))\n    for column in cols:\n        trues += df[column] == mydict[column]\n\n    return trues == len(cols)\n</code></pre>\n\n<p>Out</p>\n\n<pre><code>dfRowMatchedMyDict(df,mydict)\n\ncombo1     True\ncombo2    False\ncombo3    False\ncombo4    False\nName: prop1, dtype: bool\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1515627646, "last_edit_date": 1515627646, "creation_date": 1515626886, "answer_id": 48197727, "question_id": 48197618, "link": "https://stackoverflow.com/questions/48197618/how-to-search-for-a-row-in-a-dataframe-that-has-all-elements-expressed-by-a-dict/48197727#48197727", "title": "How to search for a row in a dataframe that has all elements expressed by a dictionary?", "body": "<p><strong>Option 1</strong><br>\n<code>df.isin</code> + <code>df.all</code> - </p>\n\n<pre><code>df[df.isin(list(mydict.values())).all(1)]\n\n       prop1 prop2 prop3\ncombo1     X     Y     Z\n</code></pre>\n\n<hr>\n\n<p><strong>Option 2</strong><br>\nUsing piR's hack with <code>assign</code>, filter on valid columns only and test with <code>eq</code> - </p>\n\n<pre><code>df[df.eq(df.assign(**mydict)[df.columns]).all(1)]\n\n       prop1 prop2 prop3\ncombo1     X     Y     Z\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 8196202, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/16feda6e45056d6bb344d71ab47f33f3?s=128&d=identicon&r=PG&f=1", "display_name": "bwrabbit", "link": "https://stackoverflow.com/users/8196202/bwrabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 48197727, "answer_count": 3, "score": 2, "last_activity_date": 1515627646, "creation_date": 1515626019, "question_id": 48197618, "link": "https://stackoverflow.com/questions/48197618/how-to-search-for-a-row-in-a-dataframe-that-has-all-elements-expressed-by-a-dict", "title": "How to search for a row in a dataframe that has all elements expressed by a dictionary?", "body": "<p>I am trying to find out how to check if there is any row within my dataframe which has every item reflected in a dictionary. The dictionary may have more items which are not expressed in the dataframe rows. </p>\n\n<p>For example, </p>\n\n<pre><code>import pandas as pd\nvalidCombinations = { 'combo1':{ 'prop1': 'X', 'prop2':'Y', 'prop3': 'Z' },\n                      'combo2':{ 'prop1': 'U', 'prop3': 'Z' },\n                      'combo3':{ 'prop1': 'X', 'prop2':'X' },\n                      'combo4':{ 'prop1': 'X', 'prop2':'Y', 'prop3': 'U' }\n                    }\ndf = pd.DataFrame.from_dict( { k: validCombinations[k]\n                               for k in validCombinations.keys() },                              \n                             orient='index')\nprint df\n&gt;&gt;\n        prop1 prop2 prop3\ncombo1     X     Y     Z\ncombo2     U   NaN     Z\ncombo3     X     X   NaN\ncombo4     X     Y     U\n\nmydict = { 'prop1': 'X', 'prop2':'Y', 'prop3': 'Z', 'prop4': 'V' }\n</code></pre>\n\n<p>I now want a function that returns True or False depending on whether a complete row from df was expressed by mydict,</p>\n\n<pre><code>dfRowMatchedMyDict( df, mydict)\n--&gt; this should return True since combo1 in df has all items expressed in mydict \n</code></pre>\n\n<p>I am really not sure if I should be converting mydict to a dataframe first, or how to go about solving this in a clean way?</p>\n"}, {"tags": ["python", "csv", "dictionary", "itertools", "ordereddictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515625976, "post_id": 48197549, "comment_id": 83376290, "body": "&quot;But, since the output is exhausted I can&#39;t print, use it more than once to debug it.&quot; ... did you try putting it into some container, like a <code>list</code> instead of printing?"}, {"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515626213, "post_id": 48197549, "comment_id": 83376362, "body": "@sKwa: Oops! Typo fixed now."}, {"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515626280, "post_id": 48197549, "comment_id": 83376383, "body": "@juanpa.arrivillaga: I have tried doing that. But, I am not able give it a fix. Also, any downstream analyses is just keeping it as an iterator. Any suggestions."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515626323, "post_id": 48197549, "comment_id": 83376398, "body": "What exactly have you tried? It looks like you seem to understand how to iterate over a group-by iterator, so, can&#39;t you just populate a with the results?"}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 0, "creation_date": 1515626382, "post_id": 48197549, "comment_id": 83376419, "body": "&quot;how to I convert it into non iter-type data&quot; cast is to <code>list()</code> to preserve the contents of the iterator."}, {"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1515626551, "post_id": 48197549, "comment_id": 83376469, "body": "do you know how generators works and what is it <i>lazy initialization</i>?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1515626628, "post_id": 48197549, "comment_id": 83376480, "body": "@sKwa There are no generators here..."}, {"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515626686, "post_id": 48197549, "comment_id": 83376498, "body": "I just started learning about generators and iterators, but I can&#39;t seem to work the fix. I have tried using list() to print the output. But, how do I save it as another object."}, {"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515626726, "post_id": 48197549, "comment_id": 83376514, "body": "@juanpa.arrivillaga, yeap you are right, but it works in the same way."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515626873, "post_id": 48197549, "comment_id": 83376550, "body": "@everestial007 it sounds like you need to go to Python basics. <code>list</code> doesn&#39;t print things, it turns an iterable into a list object. You can assign the result to a variable if you want to keep it around"}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 0, "creation_date": 1515629003, "post_id": 48197549, "comment_id": 83377117, "body": "Since results are grouped by <code>&quot;idx2&quot;</code>, do you really want this entry repeated in the results?"}], "answers": [{"comments": [{"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515628173, "post_id": 48197714, "comment_id": 83376893, "body": "thanks @juanpa. I was now trying to access the data (grouped_data) in a forloop. <code>for x, y in grouped_data:     print(x)</code> But i get this error message <code>for x, y in grouped_data: ValueError: not enough values to unpack (expected 2, got 1)</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515628274, "post_id": 48197714, "comment_id": 83376919, "body": "@everestial007 You are asking how to iterate over a dictionary (<code>OrderedDict</code> objects <i>are</i> <code>dict</code> objects) see <a href=\"https://stackoverflow.com/questions/3294889/iterating-over-dictionaries-using-for-loops\">this question</a>"}, {"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515628275, "post_id": 48197714, "comment_id": 83376920, "body": "Now, from the whole ordered dict, I am trying to access nested <code>OrderedDict</code> and the <code>keys:values</code> for further processing."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515628368, "post_id": 48197714, "comment_id": 83376950, "body": "@everestial007 they are <i>dictionaries</i>. Consider <code>grouped_data[&#39;6&#39;][&#39;pos&#39;]</code>"}, {"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515628701, "post_id": 48197714, "comment_id": 83377029, "body": "That worked but I don&#39;t seem to understand the output. <code>for k, v in grouped_data[&#39;6&#39;][&#39;pos&#39;]:     print(k)</code> outputs: 1 1 2. I don&#39;t see what is is outputting."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515628784, "post_id": 48197714, "comment_id": 83377051, "body": "@everestial007 look, I&#39;m not trying to be mean, but do you understand how dictionaries work? I&#39;m pretty sure that expression will error out. <code>grouped_data[&#39;6&#39;][&#39;pos&#39;]</code> returns a <i>list</i> that is from index <code>&#39;6&#39;</code> and is the grouped <code>&#39;pos&#39;</code> fields..."}, {"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515629007, "post_id": 48197714, "comment_id": 83377122, "body": "I only briefly understand how dictionary work. What you have done just flew over my head. I will try to comprehend it. But, I don&#39;t seem to where is that <code>1 1 2</code> coming from. There is no such values in index &#39;6&#39;. Anyway it&#39;s fine."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515629606, "post_id": 48197714, "comment_id": 83377303, "body": "@everestial007 try <code>print(grouped_data[&#39;6&#39;])</code> then try <code>print(grouped_data[&#39;6&#39;][&#39;pos&#39;]</code>"}, {"owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "edited": false, "score": 0, "creation_date": 1515630489, "post_id": 48197714, "comment_id": 83377550, "body": "@pylang: Thanks for being nice. Well, I got that this time. Also, i realized that I can iterate over using <code>for k, v in grouped_data.items():     print(k, v)</code>"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 1, "last_activity_date": 1515627948, "last_edit_date": 1515627948, "creation_date": 1515626826, "answer_id": 48197714, "question_id": 48197549, "link": "https://stackoverflow.com/questions/48197549/convert-csv-dictreader-object-to-non-iter-type-data-and-merge-values-by-keys/48197714#48197714", "title": "Convert csv.DictReader object to non-iter type data and merge values by keys", "body": "<p>So, as for your first problem, you can simply materialize a list:</p>\n\n<pre><code>In [9]: raw_data='''pos\\tidx1\\tval1\\tidx2\\tval2\n    ...: 11\\t4\\tC\\t6\\tA\n    ...: 15\\t4\\tA\\t6\\tT\n    ...: 23\\t4\\tT\\t6\\tT\n    ...: 28\\t4\\tA\\t3\\tG\n    ...: 34\\t4\\tG\\t3\\tC\n    ...: 41\\t4\\tC\\t4\\tT\n    ...: 51\\t4\\tC\\t4\\tC'''\n\nIn [10]: data_stream = csv.DictReader(io.StringIO(raw_data), delimiter=\"\\t\")\n\nIn [11]: grouped = itertools.groupby(data_stream, key=lambda x:x['idx2'])\n\nIn [12]: data = [(k,list(g)) for k,g in grouped] # order is important, so use a list\n\nIn [13]: data\nOut[13]:\n[('6',\n  [{'idx1': '4', 'idx2': '6', 'pos': '11', 'val1': 'C', 'val2': 'A'},\n   {'idx1': '4', 'idx2': '6', 'pos': '15', 'val1': 'A', 'val2': 'T'},\n   {'idx1': '4', 'idx2': '6', 'pos': '23', 'val1': 'T', 'val2': 'T'}]),\n ('3',\n  [{'idx1': '4', 'idx2': '3', 'pos': '28', 'val1': 'A', 'val2': 'G'},\n   {'idx1': '4', 'idx2': '3', 'pos': '34', 'val1': 'G', 'val2': 'C'}]),\n ('4',\n  [{'idx1': '4', 'idx2': '4', 'pos': '41', 'val1': 'C', 'val2': 'T'},\n   {'idx1': '4', 'idx2': '4', 'pos': '51', 'val1': 'C', 'val2': 'C'}])]\n</code></pre>\n\n<p>As for your second problem, try something like:</p>\n\n<pre><code>In [15]: import collections\n\nIn [16]: def accumulate(data):\n    ...:     acc = collections.OrderedDict()\n    ...:     for d in data:\n    ...:         for k,v in d.items():\n    ...:             acc.setdefault(k,[]).append(v)\n    ...:     return acc\n    ...:\n\nIn [17]: grouped_data = {k:accumulate(d) for k,d in data}\n\nIn [18]: grouped_data\nOut[18]:\n{'3': OrderedDict([('pos', ['28', '34']),\n              ('idx2', ['3', '3']),\n              ('val2', ['G', 'C']),\n              ('val1', ['A', 'G']),\n              ('idx1', ['4', '4'])]),\n '4': OrderedDict([('pos', ['41', '51']),\n              ('idx2', ['4', '4']),\n              ('val2', ['T', 'C']),\n              ('val1', ['C', 'C']),\n              ('idx1', ['4', '4'])]),\n '6': OrderedDict([('pos', ['11', '15', '23']),\n              ('idx2', ['6', '6', '6']),\n              ('val2', ['A', 'T', 'T']),\n              ('val1', ['C', 'A', 'T']),\n              ('idx1', ['4', '4', '4'])])}\n</code></pre>\n\n<p>Note, I used list (and dict) comprehensions. They are work similarly. The list comprehension is equivalent to:</p>\n\n<pre><code>data = []\nfor k, g in grouped:\n    data.append((k, list(g))\n</code></pre>\n\n<p>And for good measure, here's the equivalent to a dict-comprehension, although I'm using an OrderedDict, since in any case, order seems to be important:</p>\n\n<pre><code>In [20]: grouped_data = collections.OrderedDict()\n\nIn [21]: for k, d in data:\n    ...:     grouped_data[k] = accumulate(d)\n    ...:\n\nIn [22]: grouped_data\nOut[22]:\nOrderedDict([('6',\n              OrderedDict([('val2', ['A', 'T', 'T']),\n                           ('val1', ['C', 'A', 'T']),\n                           ('pos', ['11', '15', '23']),\n                           ('idx2', ['6', '6', '6']),\n                           ('idx1', ['4', '4', '4'])])),\n             ('3',\n              OrderedDict([('val2', ['G', 'C']),\n                           ('val1', ['A', 'G']),\n                           ('pos', ['28', '34']),\n                           ('idx2', ['3', '3']),\n                           ('idx1', ['4', '4'])])),\n             ('4',\n              OrderedDict([('val2', ['T', 'C']),\n                           ('val1', ['C', 'C']),\n                           ('pos', ['41', '51']),\n                           ('idx2', ['4', '4']),\n                           ('idx1', ['4', '4'])]))])\n</code></pre>\n\n<p>Note, we can do everything in a single pass, avoiding creating unnecessary data-structures:</p>\n\n<pre><code>import itertools, io, csv, collections\n\ndata_stream = csv.DictReader(io.StringIO(raw_data), delimiter=\"\\t\")\ngrouped = itertools.groupby(data_stream, key=lambda x:x['idx2'])\n\ndef accumulate(data):\n    acc = collections.OrderedDict()\n    for d in data:\n        for k,v in d.items():\n            acc.setdefault(k,[]).append(v)\n    return acc\n\ngrouped_data = collections.OrderedDict()\nfor k, g in grouped:\n    grouped_data[k] = accumulate(g)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515627027, "post_id": 48197730, "comment_id": 83376586, "body": "*nitpick: these aren&#39;t generators."}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515627200, "post_id": 48197730, "comment_id": 83376638, "body": "I debated using the term iterator, but perhaps you are right."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515627307, "post_id": 48197730, "comment_id": 83376671, "body": "Don&#39;t believe me? <code>import types; print(isinstance(input_file, types.GeneratorType))</code>"}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515627349, "post_id": 48197730, "comment_id": 83376683, "body": "I don&#39;t doubt you.  Good catch.  Thanks."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515627393, "post_id": 48197730, "comment_id": 83376697, "body": "I understand it&#39;s incredibly pedantic, but ever since the introduction of coroutines, generators have become much more than mere handy ways of writing iterators."}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515627451, "post_id": 48197730, "comment_id": 83376712, "body": "Iron sharpens iron.  I appreciate the review."}], "tags": [], "owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "is_accepted": false, "score": 1, "last_activity_date": 1515630265, "last_edit_date": 1592644375, "creation_date": 1515626903, "answer_id": 48197730, "question_id": 48197549, "link": "https://stackoverflow.com/questions/48197549/convert-csv-dictreader-object-to-non-iter-type-data-and-merge-values-by-keys/48197730#48197730", "title": "Convert csv.DictReader object to non-iter type data and merge values by keys", "body": "<p><strong>Given</strong></p>\n<pre><code>import io\nimport csv\nimport itertools as it\nimport collections as ct    \n\ndata=&quot;&quot;&quot;pos\\tidx1\\tval1\\tidx2\\tval2\n11\\t4\\tC\\t6\\tA\n15\\t4\\tA\\t6\\tT\n23\\t4\\tT\\t6\\tT\n28\\t4\\tA\\t3\\tG\n34\\t4\\tG\\t3\\tC\n41\\t4\\tC\\t4\\tT\n51\\t4\\tC\\t4\\tC&quot;&quot;&quot;\n</code></pre>\n<p><em>Part I</em></p>\n<blockquote>\n<p>how to I convert it into non iter-type data</p>\n</blockquote>\n<p><strong>Code</strong></p>\n<p>Here's how to retain data from the iterators - simply cast it to a list:</p>\n<pre><code>&gt;&gt;&gt; input_file = list(csv.DictReader(io.StringIO(data), delimiter = &quot;\\t&quot;))\n&gt;&gt;&gt; input_file\n[{'idx1': '4', 'idx2': '6', 'pos': '11', 'val1': 'C', 'val2': 'A'},\n {'idx1': '4', 'idx2': '6', 'pos': '15', 'val1': 'A', 'val2': 'T'},\n {'idx1': '4', 'idx2': '6', 'pos': '23', 'val1': 'T', 'val2': 'T'},\n {'idx1': '4', 'idx2': '3', 'pos': '28', 'val1': 'A', 'val2': 'G'},\n {'idx1': '4', 'idx2': '3', 'pos': '34', 'val1': 'G', 'val2': 'C'},\n {'idx1': '4', 'idx2': '4', 'pos': '41', 'val1': 'C', 'val2': 'T'},\n {'idx1': '4', 'idx2': '4', 'pos': '51', 'val1': 'C', 'val2': 'C'}]\n</code></pre>\n<p>Or use a list comprehension:</p>\n<pre><code>&gt;&gt;&gt; file_blocks = [(k, list(g)) for k, g in it.groupby(input_file, key=lambda x: x[&quot;idx2&quot;])]\n&gt;&gt;&gt; file_blocks\n[('6',\n  [{'idx1': '4', 'idx2': '6', 'pos': '11', 'val1': 'C', 'val2': 'A'},\n   {'idx1': '4', 'idx2': '6', 'pos': '15', 'val1': 'A', 'val2': 'T'},\n   {'idx1': '4', 'idx2': '6', 'pos': '23', 'val1': 'T', 'val2': 'T'}]),\n ('3',\n  [{'idx1': '4', 'idx2': '3', 'pos': '28', 'val1': 'A', 'val2': 'G'},\n   {'idx1': '4', 'idx2': '3', 'pos': '34', 'val1': 'G', 'val2': 'C'}]),\n ('4',\n  [{'idx1': '4', 'idx2': '4', 'pos': '41', 'val1': 'C', 'val2': 'T'},\n   {'idx1': '4', 'idx2': '4', 'pos': '51', 'val1': 'C', 'val2': 'C'}])]\n</code></pre>\n<p>Now you can reuse data from <code>input_file</code> and <code>file_blocks</code>.</p>\n<hr />\n<p><em>Part II</em></p>\n<blockquote>\n<p>how can I process this groupby object further to merge the values to a list that have common keys within same group/blocks...</p>\n<p>Something like orderedDict, defaultDict where the order of the way the data is read is preserved</p>\n</blockquote>\n<pre><code>def collate_data(data):\n    &quot;&quot;&quot;Yield an OrderedDict of merged dictionaries from `data`.&quot;&quot;&quot;\n    for idx, item in data:\n        results = ct.OrderedDict()\n        dd = ct.defaultdict(list)\n        for dict_ in item:\n            for k, v in dict_.items():\n                dd[k].append(v)\n        results[idx] = dd\n        yield results\n    \n\nlist(collate_data(file_blocks))\n</code></pre>\n<p>Output</p>\n<pre><code>[OrderedDict([('6',\n               defaultdict(list,\n                           {'idx1': ['4', '4', '4'],\n                            'idx2': ['6', '6', '6'],\n                            'pos': ['11', '15', '23'],\n                            'val1': ['C', 'A', 'T'],\n                            'val2': ['A', 'T', 'T']}))]),\n OrderedDict([('3',\n               defaultdict(list,\n                           {'idx1': ['4', '4'],\n                            'idx2': ['3', '3'],\n                            'pos': ['28', '34'],\n                            'val1': ['A', 'G'],\n                            'val2': ['G', 'C']}))]),\n OrderedDict([('4',\n               defaultdict(list,\n                           {'idx1': ['4', '4'],\n                            'idx2': ['4', '4'],\n                            'pos': ['41', '51'],\n                            'val1': ['C', 'C'],\n                            'val2': ['T', 'C']}))])]\n</code></pre>\n<p>The order of the <code>itertools.groupby()</code> elements is maintained by a <code>collections.OrderedDict()</code>.  The order of values across the lines of the file (see the dicts in <code>input_file</code>) is preserved by the list inside the <code>collections.defaultdict()</code> object.</p>\n"}], "owner": {"reputation": 4137, "user_id": 6346698, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c20ab6d6a6597a7be342a662a0d42e6b?s=128&d=identicon&r=PG&f=1", "display_name": "everestial007", "link": "https://stackoverflow.com/users/6346698/everestial007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 48197714, "answer_count": 2, "score": 2, "last_activity_date": 1515630265, "creation_date": 1515625608, "last_edit_date": 1515627190, "question_id": 48197549, "link": "https://stackoverflow.com/questions/48197549/convert-csv-dictreader-object-to-non-iter-type-data-and-merge-values-by-keys", "title": "Convert csv.DictReader object to non-iter type data and merge values by keys", "body": "<p>In my data:</p>\n\n<pre><code>myData='''pos\\tidx1\\tval1\\tidx2\\tval2\n11\\t4\\tC\\t6\\tA\n15\\t4\\tA\\t6\\tT\n23\\t4\\tT\\t6\\tT\n28\\t4\\tA\\t3\\tG\n34\\t4\\tG\\t3\\tC\n41\\t4\\tC\\t4\\tT\n51\\t4\\tC\\t4\\tC'''\n</code></pre>\n\n<p>I read the this data with header as keys, csv.DictReader.</p>\n\n<pre><code>import csv\nimport itertools\n\ninput_file = csv.DictReader(io.StringIO(myData), delimiter = '\\t')\n# which produces an iterator\n\n''' Now, I want to group this dictionary by idx2, where\nidx2 values is the main key and other have values merged into list that have same keys'''\n\n# This groupby method give me\nfile_blocks = itertools.groupby(input_file, key=lambda x: x['idx2'])\n\n# I can print this as\nfor index, blocks in file_blocks:\n    print(index, list(blocks))\n\n6 [{'val2': 'A', 'val1': 'C', 'idx1': '4', 'pos': '11', 'idx2': '6'}, {'val2': 'T', 'val1': 'A', 'idx1': '4', 'pos': '15', 'idx2': '6'}, {'val2': 'T', 'val1': 'T', 'idx1': '4', 'pos': '23', 'idx2': '6'}]\n3 [{'val2': 'G', 'val1': 'A', 'idx1': '4', 'pos': '28', 'idx2': '3'}, {'val2': 'C', 'val1': 'G', 'idx1': '4', 'pos': '34', 'idx2': '3'}]\n4 [{'val2': 'T', 'val1': 'C', 'idx1': '4', 'pos': '41', 'idx2': '4'}, {'val2': 'C', 'val1': 'C', 'idx1': '4', 'pos': '51', 'idx2': '4'}]\n\nBut, since the output is exhausted I can't print, use it more than once to debug it.\n</code></pre>\n\n<p>So, \nproblem #1: how to I convert it into non iter-type data.</p>\n\n<p>Problem #2: how can I process this groupby object further to merge the values to a list that have common keys within same group/blocks.</p>\n\n<pre><code>Something like orderedDict, defaultDict where the order of the way the data is read is preserved:\n\n{'6': defaultdict(&lt;class 'list'&gt;, {'pos': [11, 15, 23], 'idx1': [4, 4, 4], 'val1': ['C', 'A', 'T'], 'idx2': [6, 6, 6], 'val2': ['A', 'T', 'T']})}\n{'3': .....\n{'4': .....\n</code></pre>\n\n<h2>Some of the fixes I tried:</h2>\n\n<p>I rather thought I could prepare a keys:[values] by unique keys before grouping:</p>\n\n<pre><code>update_dict = {}\nfor lines in input_file:\nprint(type(lines))\nfor k, v in lines:\n    update_dict['idx2'] = lines[k,v]\n</code></pre>\n\n<p>Other thing I tried was to se if I can merge the data inside the grouped object:\n    new_groupBy = {}\n    for index, blocks in file_blocks:\n        print(index, list(blocks))\n            for x in blocks:\n                for k, v in x:\n                do something for new_groupBy</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 4, "creation_date": 1515625809, "post_id": 48197527, "comment_id": 83376229, "body": "Can&#39;t you just <code>import sys</code>, then access <code>sys.argv</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 4041, "user_id": 6464893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ea27dceecb0bd4d178259bf19ad5ef7e?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/6464893/harrison"}, "edited": false, "score": 0, "creation_date": 1515628243, "post_id": 48197696, "comment_id": 83376910, "body": "Yes... this will work within foo, which I said I know, but my question is asking how I can get the execution arguments from foo IN logger"}, {"owner": {"reputation": 1844, "user_id": 4844024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9de342e1ce408f4874eac3f019efb33?s=128&d=identicon&r=PG&f=1", "display_name": "mad.meesh", "link": "https://stackoverflow.com/users/4844024/mad-meesh"}, "reply_to_user": {"reputation": 4041, "user_id": 6464893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ea27dceecb0bd4d178259bf19ad5ef7e?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/6464893/harrison"}, "edited": false, "score": 0, "creation_date": 1515628622, "post_id": 48197696, "comment_id": 83377012, "body": "um.. as far as a i know, which ever script is the parent (executed from the command line with the args) will have the args. so just save them into variables and then pass them into any other module that needs them. ie, you have a script <code>logger</code> with a function <code>get_args(args)</code> and then in script <code>foo</code> that imports <code>logger</code> you just call <code>logger.get_args(parsed_args)</code> where <code>parsed_args</code> are the args collected using the sys module."}, {"owner": {"reputation": 4041, "user_id": 6464893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ea27dceecb0bd4d178259bf19ad5ef7e?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/6464893/harrison"}, "edited": false, "score": 0, "creation_date": 1515629024, "post_id": 48197696, "comment_id": 83377127, "body": "Just got on my computer and tried this. Wow... never would have expected it to work that way haha. I totally overlooked that as being an option so much so that I didn&#39;t even bother trying it. Sheesh."}, {"owner": {"reputation": 1844, "user_id": 4844024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9de342e1ce408f4874eac3f019efb33?s=128&d=identicon&r=PG&f=1", "display_name": "mad.meesh", "link": "https://stackoverflow.com/users/4844024/mad-meesh"}, "reply_to_user": {"reputation": 4041, "user_id": 6464893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ea27dceecb0bd4d178259bf19ad5ef7e?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/6464893/harrison"}, "edited": false, "score": 0, "creation_date": 1515629157, "post_id": 48197696, "comment_id": 83377172, "body": "meh, i do that all the time. glad it worked for you though, cheers!"}], "tags": [], "owner": {"reputation": 1844, "user_id": 4844024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9de342e1ce408f4874eac3f019efb33?s=128&d=identicon&r=PG&f=1", "display_name": "mad.meesh", "link": "https://stackoverflow.com/users/4844024/mad-meesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1515626633, "creation_date": 1515626633, "answer_id": 48197696, "question_id": 48197527, "link": "https://stackoverflow.com/questions/48197527/get-system-arguments-from-calling-file/48197696#48197696", "title": "Get system arguments from calling file", "body": "<p>import the <code>sys</code> module and check <code>sys.argv[]</code>:</p>\n\n<pre><code>import sys\n\nif len(sys.argv) &gt; 1: # sys.argv[0] == the script name so we start from index 1\n    for arg in sys.argv:\n        print arg\n</code></pre>\n\n<p>and from the command line:</p>\n\n<pre><code>~$ python my_script.py some_arg some_other_arg\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>~$ my_script.py\n~$ some_arg\n~$ some_other_arg\n</code></pre>\n"}], "owner": {"reputation": 4041, "user_id": 6464893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ea27dceecb0bd4d178259bf19ad5ef7e?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/6464893/harrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 48197696, "answer_count": 1, "score": 0, "last_activity_date": 1515628741, "creation_date": 1515625473, "question_id": 48197527, "link": "https://stackoverflow.com/questions/48197527/get-system-arguments-from-calling-file", "title": "Get system arguments from calling file", "body": "<p>Let's assume that I have a simple file named <code>foo</code>:</p>\n\n<pre><code>from logger import Logger\n\n\ndef foo_func():\n    foo = Logger()\n\n\nif __name__ == '__main__':\n    foo_func()\n</code></pre>\n\n<p><code>foo</code> is being launched with a system argument, for example, like this: <code>python foo.py --site=QA</code></p>\n\n<p>I have another file named <code>logger</code>:</p>\n\n<pre><code>import inspect\n\nclass Logger:\n\n    def __init__(self):\n\n        frame = inspect.currentframe()\n        caller = inspect.getouterframes(frame)[-1][1]\n\n        self.app_name = caller.rsplit('/', 1)[-1].split('.py')[0]\n\n        print self.app_name\n</code></pre>\n\n<p>The way that it currently works, <code>self.app_name</code> is succesfully giving me <code>foo</code>, which is the name of the calling file, but how can I ALSO obtain the argument, which would be <code>--site=QA</code> that foo is being called with?</p>\n\n<p>I know that I can just pass the system arguments when initializing the instance of Logger, however, I would really like to obtain them in a different manner. Is this possible?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1515625515, "post_id": 48197501, "comment_id": 83376121, "body": "No, it isn&#39;t a bug, it&#39;s a <i>catastrophic backtracking</i> caused by your pattern design."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1515625520, "post_id": 48197501, "comment_id": 83376123, "body": "You have a pathological regex. Look that up. You probably want <code>[a-z]+(-+[a-z]+)*$</code>."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1515625872, "post_id": 48197501, "comment_id": 83376254, "body": "Click on <i>regex debugger</i> to see what happens: <a href=\"https://regex101.com/r/SbeoHB/1\" rel=\"nofollow noreferrer\">regex101.com/r/SbeoHB/1</a>"}], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1515631553, "post_id": 48197545, "comment_id": 83377799, "body": "Note that it&#39;s always a bad design because the second <code>[a-z]+</code> generates a lot of backtracking steps at each group repetition. Look at Ryan pattern design that is from far more efficient."}, {"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1515689509, "post_id": 48197545, "comment_id": 83405565, "body": "@CasimiretHippolyte agreed"}], "tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": true, "score": 4, "last_activity_date": 1515625585, "creation_date": 1515625585, "answer_id": 48197545, "question_id": 48197501, "link": "https://stackoverflow.com/questions/48197501/regular-expression-freezes/48197545#48197545", "title": "Regular expression freezes", "body": "<pre><code>re.compile(\"([a-z]+-[a-z]+)+$\")\n</code></pre>\n\n<p>will work better for what it looks like you are trying to do. The regex you provided is called <a href=\"https://www.regular-expressions.info/catastrophic.html\" rel=\"nofollow noreferrer\">pathological</a>, because <code>-*</code> causes it to run away with an absurd amount of possibilities.</p>\n\n<p>If you really want multiple hyphens, <code>-+</code> is fine too.</p>\n"}], "owner": {"reputation": 3542, "user_id": 1093674, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d67b951d3ef8e9d79b4c62e3a3c52b4e?s=128&d=identicon&r=PG", "display_name": "Cristhian Boujon", "link": "https://stackoverflow.com/users/1093674/cristhian-boujon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 48197545, "answer_count": 1, "score": 1, "last_activity_date": 1515625585, "creation_date": 1515625250, "question_id": 48197501, "link": "https://stackoverflow.com/questions/48197501/regular-expression-freezes", "title": "Regular expression freezes", "body": "<p>I have the following regex:</p>\n\n<pre><code>pattern = re.compile(\"([a-z]+-*[a-z]+)+$\")\n</code></pre>\n\n<p>But when I run:</p>\n\n<pre><code>pattern.match(\"departamento-de-archipielago-de-san-andres-providencia-y-santa-catalina\")\n</code></pre>\n\n<p>The line doesn't finish, that is, the program freezes.</p>\n\n<p>I have tried with:</p>\n\n<pre><code>pattern.match(\"departamento-de-archipielago-de-san-andres-providencia-y-\")\n</code></pre>\n\n<p>and it doesn't work </p>\n\n<p>finally, I have tried with:</p>\n\n<pre><code>pattern.match(\"departamento-de-archipielago-de-san-andres-providencia-y\")\n</code></pre>\n\n<p>And that does work!\nI don't understand what is wrong here. Is it a bug?</p>\n\n<p>I'm using python 3.5.2</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515624951, "post_id": 48197398, "comment_id": 83375920, "body": "You applied <code>float</code> to the elements of <code>a</code>, which are 2-item lists.  You need to apply it to the elements of each of <i>those</i> lists.  How variable is your nested list structure?"}, {"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1515625219, "post_id": 48197398, "comment_id": 83376017, "body": "<code>a = [list(map(float, x)) for x in a]</code>"}, {"owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "edited": false, "score": 0, "creation_date": 1515625234, "post_id": 48197398, "comment_id": 83376026, "body": "Remember that maps and list comprehensions are very similar processes. Try both and see which you prefer."}], "answers": [{"tags": [], "owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1515625059, "creation_date": 1515625059, "answer_id": 48197463, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48197463#48197463", "title": "python number formatting in list values", "body": "<p>For nested data, use a nested <a href=\"https://docs.python.org/3/glossary.html#term-list-comprehension\" rel=\"nofollow noreferrer\">list comprehension</a>:</p>\n\n<pre><code>&gt;&gt;&gt; a = [['1312.98680732', 14.28625384], ['1312.98680735', 20.303], ['1312.98680736', 9.78438636]]\n&gt;&gt;&gt; [[float(x) for x in group] for group in a]\n[[1312.98680732, 14.28625384], [1312.98680735, 20.303], [1312.98680736, 9.78438636]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7975, "user_id": 5660517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1iIxK.jpg?s=128&g=1", "display_name": "Ronan Boiteau", "link": "https://stackoverflow.com/users/5660517/ronan-boiteau"}, "is_accepted": false, "score": 0, "last_activity_date": 1515625114, "creation_date": 1515625114, "answer_id": 48197472, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48197472#48197472", "title": "python number formatting in list values", "body": "<p>If it's always the first element of your secondary list which is a string, then you could iterate through your first list (<code>a</code>) and for each list inside <code>a</code>, convert the first item to <code>float</code>, like this:</p>\n\n<pre><code>for item in a:\n    item[0] = float(item[0])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1515625122, "creation_date": 1515625122, "answer_id": 48197475, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48197475#48197475", "title": "python number formatting in list values", "body": "<p>You can use a list comprehension to go through the old list and generate a new one. Use list unpacking to separate the list of two values at each outer list location.</p>\n\n<pre><code>a = [[float(s), v] for s,v in a]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": false, "score": 1, "last_activity_date": 1515625134, "creation_date": 1515625134, "answer_id": 48197477, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48197477#48197477", "title": "python number formatting in list values", "body": "<pre><code>list(map(lambda l: list(map(float, l)), a))\n</code></pre>\n\n<p>if you do not want to use list comprehensions</p>\n"}, {"tags": [], "owner": {"reputation": 24870, "user_id": 146077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/IvgEc.jpg?s=128&g=1", "display_name": "Kirk Broadhurst", "link": "https://stackoverflow.com/users/146077/kirk-broadhurst"}, "is_accepted": false, "score": 0, "last_activity_date": 1515625138, "creation_date": 1515625138, "answer_id": 48197479, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48197479#48197479", "title": "python number formatting in list values", "body": "<p><code>a</code> is a list of lists. You want to cast the first item in those inner lists to a float. You can do this with list comprehension.</p>\n\n<pre><code>[[float(item[0]), item[1]] for item in a]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "is_accepted": false, "score": 0, "last_activity_date": 1515625172, "creation_date": 1515625172, "answer_id": 48197486, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48197486#48197486", "title": "python number formatting in list values", "body": "<p>This will work:</p>\n\n<pre><code>a = [[float(n) for n in b] for b in value[\"a\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1515627289, "creation_date": 1515627289, "answer_id": 48197789, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48197789#48197789", "title": "python number formatting in list values", "body": "<p>You could also try using <code>isinstance()</code>:</p>\n\n<pre><code>a = [[float(x) if isinstance(x, str) else x for x in lst] for lst in a]\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>[[1312.98680732, 14.28625384], [1312.98680735, 20.303], [1312.98680736, 9.78438636]]\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9158931"}, "is_accepted": false, "score": 0, "last_activity_date": 1515773834, "creation_date": 1515773834, "answer_id": 48230120, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values/48230120#48230120", "title": "python number formatting in list values", "body": "<p>something like this ?</p>\n\n<pre><code>a = [['1312.98680732', 14.28625384],\n     ['1312.98680735', 20.303],\n     ['1312.98680736', 9.78438636]]\n\n\nprint(list(map(lambda x:list(map(lambda y:float(y),x)),a)))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[[1312.98680732, 14.28625384], [1312.98680735, 20.303], [1312.98680736, 9.78438636]]\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 6645147, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abd430c28d5723dbd5062d845c9742d5?s=128&d=identicon&r=PG&f=1", "display_name": "Hyder Tom", "link": "https://stackoverflow.com/users/6645147/hyder-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 8, "score": 2, "last_activity_date": 1515773834, "creation_date": 1515624753, "last_edit_date": 1515625042, "question_id": 48197398, "link": "https://stackoverflow.com/questions/48197398/python-number-formatting-in-list-values", "title": "python number formatting in list values", "body": "<p>Here is the list </p>\n\n<pre><code> value = {'a': [['1312.98680732', 14.28625384], \n                ['1312.98680735', 20.303], \n                ['1312.98680736', 9.78438636]], \n          'b': [['1307.00000001', 0.02968967], \n                ['1307.00000000', 1.948], \n                ['1306.53301802', 0.02]], \n          'c': 0, \n          'd': 226843654} \n</code></pre>\n\n<p>I am able to extract and get </p>\n\n<pre><code>a = [['1312.98680732', 14.28625384], \n     ['1312.98680735', 20.303], \n     ['1312.98680736', 9.78438636]]\n</code></pre>\n\n<p>However I need to convert the quoted values from string to float.</p>\n\n<p>Desired output: </p>\n\n<pre><code>a = [[1312.98680732, 14.28625384], \n     [1312.98680735, 20.303], \n     [1312.98680736, 9.78438636]]\n</code></pre>\n\n<p>I tried <code>list(map(float, a)</code> but it is working only if I have one value.</p>\n"}, {"tags": ["python", "string", "bots", "discord"], "comments": [{"owner": {"reputation": 13, "user_id": 9201064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e88592565ca1e15caa68fbc5d227a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Karia Wolfhunter", "link": "https://stackoverflow.com/users/9201064/karia-wolfhunter"}, "reply_to_user": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 0, "creation_date": 1515625365, "post_id": 48197383, "comment_id": 83376073, "body": "I use a different bot script to test what I want to do than the one on my normal discord server, so the only code missing is the importing of discord/asyncio/random/etc and the client.run on the bottom."}, {"owner": {"reputation": 1604, "user_id": 442859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ecb6761cd7c9d2a1b876f8195af2ca1?s=128&d=identicon&r=PG", "display_name": "Snark", "link": "https://stackoverflow.com/users/442859/snark"}, "edited": false, "score": 0, "creation_date": 1515625526, "post_id": 48197383, "comment_id": 83376125, "body": "Can you post the entire stack trace?"}, {"owner": {"reputation": 13, "user_id": 9201064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e88592565ca1e15caa68fbc5d227a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Karia Wolfhunter", "link": "https://stackoverflow.com/users/9201064/karia-wolfhunter"}, "edited": false, "score": 0, "creation_date": 1515625781, "post_id": 48197383, "comment_id": 83376219, "body": "Nevermind figured out how to edit, added it to original post. Sorry I didn&#39;t think to post it :("}, {"owner": {"reputation": 1604, "user_id": 442859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ecb6761cd7c9d2a1b876f8195af2ca1?s=128&d=identicon&r=PG", "display_name": "Snark", "link": "https://stackoverflow.com/users/442859/snark"}, "edited": false, "score": 0, "creation_date": 1515625864, "post_id": 48197383, "comment_id": 83376252, "body": "Whoops, sorry for the red herring, I am fairly certain it&#39;s the 3rd line. If you drop the &quot;(pass_context=True&quot; you should get thigs to work."}, {"owner": {"reputation": 13, "user_id": 9201064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e88592565ca1e15caa68fbc5d227a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Karia Wolfhunter", "link": "https://stackoverflow.com/users/9201064/karia-wolfhunter"}, "edited": false, "score": 0, "creation_date": 1515626810, "post_id": 48197383, "comment_id": 83376530, "body": "Taking that out changed it to:   <code>File &quot;nyola.py&quot;, line 11, in on_message     if &quot;buy me&quot; in message.content(): TypeError: &#39;str&#39; object is not callable</code> which I don&#39;t get :( because that&#39;s the same exact line now I&#39;ve used for all my bot&#39;s things so far and it worked perfectly.till now."}, {"owner": {"reputation": 1604, "user_id": 442859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ecb6761cd7c9d2a1b876f8195af2ca1?s=128&d=identicon&r=PG", "display_name": "Snark", "link": "https://stackoverflow.com/users/442859/snark"}, "edited": false, "score": 0, "creation_date": 1515626964, "post_id": 48197383, "comment_id": 83376576, "body": "Drop the parentheses. The parentheses are known as &quot;function call&quot;. I still don&#39;t think this&#39;ll work, but it should be a new error"}, {"owner": {"reputation": 13, "user_id": 9201064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e88592565ca1e15caa68fbc5d227a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Karia Wolfhunter", "link": "https://stackoverflow.com/users/9201064/karia-wolfhunter"}, "edited": false, "score": 0, "creation_date": 1515627276, "post_id": 48197383, "comment_id": 83376663, "body": "Ahhh. Okay so I did that and then went and took out the next line (async def...) and changed it to quote = message.content and I got: Ignoring exception in on_message Traceback (most recent call last):   File &quot;/usr/local/lib/python3.6/site-packages/discord/client.py&quot;, line 307, in _run_event     yield from getattr(self, event)(*args, **kwargs)   File &quot;nyola.py&quot;, line 22, in on_message     client.send_message(message.channel, format(buyquotes[var], new_quote)) ValueError: Invalid format specifier"}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 442859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ecb6761cd7c9d2a1b876f8195af2ca1?s=128&d=identicon&r=PG", "display_name": "Snark", "link": "https://stackoverflow.com/users/442859/snark"}, "is_accepted": true, "score": 1, "last_activity_date": 1515625590, "last_edit_date": 1515625590, "creation_date": 1515625203, "answer_id": 48197490, "question_id": 48197383, "link": "https://stackoverflow.com/questions/48197383/python-discord-bot-on-message-split-and-change/48197490#48197490", "title": "Python discord bot - on message split and change", "body": "<pre><code>message.content\n</code></pre>\n\n<p>Appears to be a string according to the docs <a href=\"https://github.com/Rapptz/discord.py/blob/async/discord/message.py\" rel=\"nofollow noreferrer\">https://github.com/Rapptz/discord.py/blob/async/discord/message.py</a> here. This means the passing of an argument and the two parentheses are superflous and you can drop them.</p>\n"}, {"tags": [], "owner": {"reputation": 607, "user_id": 3648890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fd952c77b8227881c7cc798e01018a?s=128&d=identicon&r=PG&f=1", "display_name": "NinjaKitty", "link": "https://stackoverflow.com/users/3648890/ninjakitty"}, "is_accepted": false, "score": 3, "last_activity_date": 1515627625, "creation_date": 1515627625, "answer_id": 48197832, "question_id": 48197383, "link": "https://stackoverflow.com/questions/48197383/python-discord-bot-on-message-split-and-change/48197832#48197832", "title": "Python discord bot - on message split and change", "body": "<p>There's a few things you need to understand here:</p>\n\n<p><code>on_message()</code> is an event that simply passes you the entire Message object.</p>\n\n<p>Secondly, it's <code>message.content</code> for the string of the message. Don't use a function call <code>()</code>. </p>\n\n<p>Third, you shouldn't be creating a new <code>async def</code> inside of <code>on_message</code>. If you really just want to respond to a message that says \"buy me,\" here is an example of responding to someone who starts their message with \"buy me.\" Since I'm not 100% sure what exactly your end goal is, I'm simply going to give you an example you can build off of:</p>\n\n<pre><code>@client.event\nasync def on_message(msg):\n    if msg.content.startswith(\"buy me\"):\n        responses = ['meh', 'no thanks brudda']\n        choice = random.choice(responses)\n        await client.send_message(msg.channel, choice)\n</code></pre>\n\n<p>On a side note: This seems like you're using the \"async\" version of discord.py. You should think about moving to the \"rewrite\" library which is going to change a lot of these API calls. Also, you should be using <code>commands.ext</code>, but considering you don't have a good grasp on Python yet, using <code>on_message()</code> should be good enough.</p>\n\n<p>There's a lot more to say about your code in its current state, but this should be enough to push you in the right direction.</p>\n"}], "owner": {"reputation": 13, "user_id": 9201064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e88592565ca1e15caa68fbc5d227a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Karia Wolfhunter", "link": "https://stackoverflow.com/users/9201064/karia-wolfhunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4606, "favorite_count": 0, "accepted_answer_id": 48197490, "answer_count": 2, "score": 1, "last_activity_date": 1515664961, "creation_date": 1515624649, "last_edit_date": 1515664961, "question_id": 48197383, "link": "https://stackoverflow.com/questions/48197383/python-discord-bot-on-message-split-and-change", "title": "Python discord bot - on message split and change", "body": "<p>I'm new to coding and I got ambitious and started writing a discord bot that's triggered via the message content, and I've managed a few simple working commands with random answers, but when talking to my friend I got the idea of using part of a message sent from the user as part of the message sent back by the bot... Well, I'm a train wreck when it comes to python obviously because I can't figure out what I'm doing wrong in the code below:</p>\n\n<pre><code>@client.event\nasync def on_message(message):\n     if \"buy me\" in message.content(pass_context=True):\n        async def quote(ctx):\n           split_parts = quote.split(' ') # splits the content by the space, making a list\n           # split_parts[0] would be \"buy\"\n           # split_parts[0] would be \"me\"\n           # etc\n          split_parts.pop(0)\n          split_parts.pop(0)\n          new_quote = \" \".join(split_parts)\n          buyquotes = [\"Buying you\", \"No, I will not buy you\"] #etc\n          var = int(random.random() * len(buyquotes))\n          await client.send_message(message.channel, \"{0} {1}\".format(buyquotes[var], new_quote))\n</code></pre>\n\n<p>Everything loads up fine but when I try to trigger the bot it tells me TypeError: 'str' is not a callable object, I've looked around and found some similar questions (to which I've tried to fix my error based on the answer) but I have absolutely no idea what I did wrong (or if what I'm trying to do is even possible). Any help would be much appreciated, I'd love to know if something like this can actually work.</p>\n\n<pre><code>Ignoring exception in on_message\nTraceback (most recent call last):\n File \"/usr/local/lib/python3.6/site-packages/discord/client.py\", line 307, in _run_event\n    yield from getattr(self, event)(*args, **kwargs)\n  File \"nyola.py\", line 11, in on_message\n    if \"buy me\" in message.content(pass_context=True):\nTypeError: 'str' object is not callable\n</code></pre>\n\n<p>Just adding this in: My objective was to try and take a message like \"buy me a TV\" trigger the bot with the \"buy me\" words, delete the words \"buy me\" and then add the remaining words to the end of the bot's message so instead of \"buying you\" it would be \"buying you a tv\"</p>\n\n<p>Now that this is resolved:</p>\n\n<pre><code>if \"buy me\" in message.content:\n       quote = message.content\n       split_parts = quote.split(' ') # splits the content by the space, making a list\n       # split_parts[0] would be \"buy\"\n       # split_parts[0] would be \"me\"\n       # etc\n       split_parts.pop(0)\n       split_parts.pop(0)\n       new = \" \".join(split_parts)\n       buyquotes = [\"Buying you\", \"Contacting Amazon looking to buy you\", \"No, I will not buy you\", \"You can't have\", \"There is no need for\", \"I am not buying you\",\"I can't believe you would ask me for\"]\n       var = int(random.random() * len(buyquotes))\n       await client.send_message(message.channel, \"{0} {1}\".format(buyquotes[var], new))\n</code></pre>\n\n<p>Had multiple errors in the original code, it works now, it's not perfect, but it works.</p>\n"}, {"tags": ["python", "django", "for-loop", "django-templates", "date-conversion"], "comments": [{"owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1515624689, "post_id": 48197354, "comment_id": 83375829, "body": "What type is the userdata.birth_date"}, {"owner": {"reputation": 519, "user_id": 1807809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ma2zT.jpg?s=128&g=1", "display_name": "Damodar Dahal", "link": "https://stackoverflow.com/users/1807809/damodar-dahal"}, "reply_to_user": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1515648845, "post_id": 48197354, "comment_id": 83381710, "body": "<code>userdata.birth_date</code> will give you an object instance (either <code>datetime</code> or <code>date</code> or whatever you&#39;re using). <code>userdata.birth_date|date:&quot;d&quot;</code> will convert the date into a <code>str</code> instance for you. However, you need the actual day value, which is the <code>int</code> instance that you need. I agree with @Splatmistro answer."}, {"owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "reply_to_user": {"reputation": 519, "user_id": 1807809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ma2zT.jpg?s=128&g=1", "display_name": "Damodar Dahal", "link": "https://stackoverflow.com/users/1807809/damodar-dahal"}, "edited": false, "score": 0, "creation_date": 1515665767, "post_id": 48197354, "comment_id": 83390097, "body": "Why thank you @DamodarDahal"}], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 8747207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-R1BCkXtE1t4/AAAAAAAAAAI/AAAAAAAAABk/04aQ8PYOW6s/photo.jpg?sz=128", "display_name": "Sergio Mendez", "link": "https://stackoverflow.com/users/8747207/sergio-mendez"}, "edited": false, "score": 0, "creation_date": 1515686122, "post_id": 48197426, "comment_id": 83403246, "body": "Thank you very much. I use this with the year and month. It works!"}, {"owner": {"reputation": 737, "user_id": 8747207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-R1BCkXtE1t4/AAAAAAAAAAI/AAAAAAAAABk/04aQ8PYOW6s/photo.jpg?sz=128", "display_name": "Sergio Mendez", "link": "https://stackoverflow.com/users/8747207/sergio-mendez"}, "edited": false, "score": 0, "creation_date": 1515778292, "post_id": 48197426, "comment_id": 83444777, "body": "Yes, it work for day but also I used with month and year and It works too. Thank you"}], "tags": [], "owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "is_accepted": false, "score": 0, "last_activity_date": 1515624873, "creation_date": 1515624873, "answer_id": 48197426, "question_id": 48197354, "link": "https://stackoverflow.com/questions/48197354/convert-str-to-int-in-django-template/48197426#48197426", "title": "Convert str to int in django template", "body": "<p>Have you tried:</p>\n\n<pre><code>{% if i == userdata.birth_date.day %}\n  &lt;option value=\"{{ i }}\" selected&gt;{{ i }}&lt;/option&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 8747207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-R1BCkXtE1t4/AAAAAAAAAAI/AAAAAAAAABk/04aQ8PYOW6s/photo.jpg?sz=128", "display_name": "Sergio Mendez", "link": "https://stackoverflow.com/users/8747207/sergio-mendez"}, "edited": false, "score": 0, "creation_date": 1515686082, "post_id": 48200813, "comment_id": 83403217, "body": "Thank you very much. It Works!"}], "tags": [], "owner": {"reputation": 3852, "user_id": 1093174, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/60193a09c2dbf673aaf91518ceef5de8?s=128&d=identicon&r=PG", "display_name": "David Lam", "link": "https://stackoverflow.com/users/1093174/david-lam"}, "is_accepted": true, "score": 4, "last_activity_date": 1515651257, "creation_date": 1515651257, "answer_id": 48200813, "question_id": 48197354, "link": "https://stackoverflow.com/questions/48197354/convert-str-to-int-in-django-template/48200813#48200813", "title": "Convert str to int in django template", "body": "<p>you can use the <code>add</code> filter with an argument of 0 to coerce it to an integer e.g.</p>\n\n<pre><code>{% if i == userdata.birth_date|date:\"d\"|add:0 %}\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 8747207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-R1BCkXtE1t4/AAAAAAAAAAI/AAAAAAAAABk/04aQ8PYOW6s/photo.jpg?sz=128", "display_name": "Sergio Mendez", "link": "https://stackoverflow.com/users/8747207/sergio-mendez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3579, "favorite_count": 0, "accepted_answer_id": 48200813, "answer_count": 2, "score": 1, "last_activity_date": 1515651257, "creation_date": 1515624551, "question_id": 48197354, "link": "https://stackoverflow.com/questions/48197354/convert-str-to-int-in-django-template", "title": "Convert str to int in django template", "body": "<p>I need to convert the a date day to int to compare with other value in the template.</p>\n\n<p>Something like this:</p>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>def userEdit(request):\n    userdata = user.objects.get(id=request.session['user_id'])\n    dic.update({'userdata':userdata, 'dayrange': range(1,32)})\n    return render(request, 'my_app/userEdit.html', dic)\n</code></pre>\n\n<p><strong>my_app/userEdit.html</strong></p>\n\n<pre><code>&lt;select name=\"day\"&gt;\n  {% for i in dayrange %}\n    {% if i == userdata.birth_date|date:\"d\" %}\n      &lt;option value=\"{{ i }}\" selected&gt;{{ i }}&lt;/option&gt;\n    {% else %}\n      &lt;option value=\"{{ i }}\"&gt;{{ i }}&lt;/option&gt;\n    {% endif %}\n  {% endfor %}\n&lt;/select&gt;\n</code></pre>\n\n<p>I need to convert userdata.birth_date|date:\"d\" to int and then compare with the \"i\" variable in the for loop. Please help</p>\n"}, {"tags": ["python", "python-3.x", "debugging", "pdb"], "comments": [{"owner": {"reputation": 1676, "user_id": 1903430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ZBVUf.png?s=128&g=1", "display_name": "fx-kirin", "link": "https://stackoverflow.com/users/1903430/fx-kirin"}, "edited": false, "score": 0, "creation_date": 1548737650, "post_id": 48197324, "comment_id": 95638472, "body": "There is work around to execute the command likc this. <code>eval(&quot;(lambda: x)()&quot;, vars())</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1572, "user_id": 2633673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d679947da4dbefaf08b9bc97e1ca7acf?s=128&d=identicon&r=PG", "display_name": "dhokas", "link": "https://stackoverflow.com/users/2633673/dhokas"}, "edited": false, "score": 0, "creation_date": 1515625529, "post_id": 48197521, "comment_id": 83376127, "body": "Is this specific to Python 3? I do not observe the issue with Python 2."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 1572, "user_id": 2633673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d679947da4dbefaf08b9bc97e1ca7acf?s=128&d=identicon&r=PG", "display_name": "dhokas", "link": "https://stackoverflow.com/users/2633673/dhokas"}, "edited": false, "score": 2, "creation_date": 1515625573, "post_id": 48197521, "comment_id": 83376140, "body": "@dhokas: List comprehensions aren&#39;t evaluated in a nested scope in Python 2. I believe you&#39;ll still see it with genexps and dict/set comprehensions in Python 2, though."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1515625394, "creation_date": 1515625394, "answer_id": 48197521, "question_id": 48197324, "link": "https://stackoverflow.com/questions/48197324/all-variables-are-undefined-in-python-debugger/48197521#48197521", "title": "all variables are undefined in python debugger", "body": "<p>This happens because list comprehensions are (mostly) evaluated in a nested scope, and nested scopes created in pdb can't access the local variables of the scope being inspected. They can access globals, though, and when you launch pdb immediately after opening Python, you're running it in a global scope, so the <code>abc</code> you create is global.</p>\n\n<p>This also happens with list comprehensions in <code>exec</code> and in class statements. Unfortunately, there isn't really a better workaround than \"don't use list comprehensions there\".</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1534548396, "post_id": 51903541, "comment_id": 90758775, "body": "<code>[locals()[&#39;abc&#39;] for _ in range(2)]</code> doesn&#39;t work - the workarounds involving <code>locals()</code> need to call <code>locals</code> in the outer scope, not inside the comprehension&#39;s scope."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534549447, "post_id": 51903541, "comment_id": 90758941, "body": "@user2357112 Oops, you&#39;re right; you need to pass in a locals dict; I&#39;ll edit."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 4, "last_activity_date": 1534549495, "last_edit_date": 1534549495, "creation_date": 1534544776, "answer_id": 51903541, "question_id": 48197324, "link": "https://stackoverflow.com/questions/48197324/all-variables-are-undefined-in-python-debugger/51903541#51903541", "title": "all variables are undefined in python debugger", "body": "<p>This is filed as <a href=\"https://bugs.python.org/issue21161\" rel=\"nofollow noreferrer\">b.p.o. issue #21161</a>, but closed as \"won't fix\".</p>\n\n<p>The root issue is exactly what <a href=\"https://stackoverflow.com/a/48197521/908494\">user2357112's answer</a> says: Comprehensions<sup>1</sup> work by defining and then running a hidden nested function, but functions defined in pdb inside a frame aren't real nested functions and can't access variables from the frame's scope.</p>\n\n<p>There are workarounds (some of which are mentioned in the b.p.o issue, or places linked from that issue), but they're all just clever variations on one of these:</p>\n\n<ul>\n<li><code>(lambda abc: [abc for _ in range(2)])(abc)</code> (In other words, define a function and explicitly pass the locals' values as arguments instead of capturing them.)</li>\n<li><code>[abc_ for abc_ in [abc] for _ in range(2)]</code> (In other words, use the fact that the outermost iterable is an argument.<sup>2</sup>)</li>\n<li><code>[loc['abc'] for loc in [locals()] for _ in range(2)]</code> (In other words, use <code>locals()['name']</code> instead of <code>name</code>, and get the locals passed as above.)</li>\n<li>Use <code>exec</code> plus any of the known just-as-horrible workarounds for comprehensions in <code>exec</code>.</li>\n<li>Don't use a comprehension, as user2357112 suggests.</li>\n</ul>\n\n<hr>\n\n<p><sub>1. In Python 2.x, this is not true for list comprehensions, only set and dict comprehensions and generator expressions. But Python 3 changed list comprehensions to make them consistent with the others.</sub></p>\n\n<p><sub>2. The hidden nested function for a comprehension captures <em>almost</em> all names from the enclosing scope\u2014but the outermost iterable (the one in the first <code>for</code>) is special; it's actually a parameter to the hidden function, and the expression is evaluated in the enclosing scope and passed as the argument value.</sub></p>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 396865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfb66b3f2dd1e0e43e184b9cb639aab?s=128&d=identicon&r=PG", "display_name": "programmer", "link": "https://stackoverflow.com/users/396865/programmer"}, "edited": false, "score": 0, "creation_date": 1616050007, "post_id": 53126050, "comment_id": 117882417, "body": "This works ! \u8c22\u8c22 \ud83d\ude4f"}], "tags": [], "owner": {"reputation": 2490, "user_id": 6254131, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b80db6d219fc6d9f5887e710fd353912?s=128&d=identicon&r=PG&f=1", "display_name": "Panfeng Li", "link": "https://stackoverflow.com/users/6254131/panfeng-li"}, "is_accepted": false, "score": 5, "last_activity_date": 1541194345, "creation_date": 1541194345, "answer_id": 53126050, "question_id": 48197324, "link": "https://stackoverflow.com/questions/48197324/all-variables-are-undefined-in-python-debugger/53126050#53126050", "title": "all variables are undefined in python debugger", "body": "<p>You could try the following code:</p>\n\n<pre><code>(Pdb) !import code; code.interact(local=vars())\nPython 3.6.6 |Anaconda, Inc.| (default, Jun 28 2018, 17:14:51) \n[GCC 7.2.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n(InteractiveConsole)\n&gt;&gt;&gt; [abc for _ in range(2)]\n</code></pre>\n\n<p>Use Ctrl-D to return to the regular pdb prompt.</p>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 396865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfb66b3f2dd1e0e43e184b9cb639aab?s=128&d=identicon&r=PG", "display_name": "programmer", "link": "https://stackoverflow.com/users/396865/programmer"}, "edited": false, "score": 0, "creation_date": 1616050035, "post_id": 56083375, "comment_id": 117882425, "body": "Thanks a lot for this simplified version \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 1436, "user_id": 3066972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee784dcb5e3afadd6b5cae7949a5f5?s=128&d=identicon&r=PG&f=1", "display_name": "ssnobody", "link": "https://stackoverflow.com/users/3066972/ssnobody"}, "is_accepted": false, "score": 3, "last_activity_date": 1557514458, "creation_date": 1557514458, "answer_id": 56083375, "question_id": 48197324, "link": "https://stackoverflow.com/questions/48197324/all-variables-are-undefined-in-python-debugger/56083375#56083375", "title": "all variables are undefined in python debugger", "body": "<p>Similar to Panfeng Li's answer, but a simpler way to do this is to use <code>interact</code> in pdb.</p>\n\n<p>What follows is an example of pdb failing and <code>interact</code> working in the same context.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>Python 3.6.3 (default, Oct  4 2017, 06:09:05)\n[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; def do_comp():\n...   abc = 3\n...   import pdb; pdb.set_trace()\n...\n&gt;&gt;&gt; do_comp()\n--Return--\n&gt; &lt;stdin&gt;(3)do_comp()-&gt;None\n(Pdb) [abc for _ in range(2)]\n*** NameError: name 'abc' is not defined\n(Pdb) interact\n*interactive*\n&gt;&gt;&gt; [abc for _ in range(2)]\n[3, 3]\n</code></pre>\n"}], "owner": {"reputation": 1572, "user_id": 2633673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d679947da4dbefaf08b9bc97e1ca7acf?s=128&d=identicon&r=PG", "display_name": "dhokas", "link": "https://stackoverflow.com/users/2633673/dhokas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1311, "favorite_count": 2, "accepted_answer_id": 48197521, "answer_count": 4, "score": 2, "last_activity_date": 1557514458, "creation_date": 1515624365, "question_id": 48197324, "link": "https://stackoverflow.com/questions/48197324/all-variables-are-undefined-in-python-debugger", "title": "all variables are undefined in python debugger", "body": "<p>I'm facing a very strange issue on Python 3.6. In the middle of my code, I call <code>import pdb; pdb.set_trace()</code> to debug some code.</p>\n\n<p>And then I'm not able to debug properly, for instance:</p>\n\n<pre><code>(Pdb) abc = 3\n(Pdb) [abc for _ in range(2)]\n*** NameError: name 'abc' is not defined\n(Pdb) [abc, abc]\n[3, 3]\n</code></pre>\n\n<p>It seems like whenever I use list comprehensions, there is an issue of variable not defined. However, if I call the debugger right after I open Python, I do not observe this behavior, everything runs fine.</p>\n\n<p>Any ideas why I'm having this issue?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 3, "creation_date": 1515624313, "post_id": 48197302, "comment_id": 83375679, "body": "Use <code>b = a[indices]</code>"}, {"owner": {"reputation": 529, "user_id": 4917819, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/88fd9d88ee00dc809c1e6277ab3c1a22?s=128&d=identicon&r=PG&f=1", "display_name": "Johiasburg Frowell", "link": "https://stackoverflow.com/users/4917819/johiasburg-frowell"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1515683538, "post_id": 48197302, "comment_id": 83401486, "body": "@eyllanesc Ah, that does work, but not for multidimensional arrays (or at least it does not work as expected).  I was hoping for something that could be scaled to multidimensional arrays (although not stated).  I will edit the question."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1515683595, "post_id": 48197302, "comment_id": 83401532, "body": "multidimensional arrays: <code>b = a[indicesx, indicesy]</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1515683741, "post_id": 48197302, "comment_id": 83401628, "body": "Do not modify this question, your question is duplicated and the example that shows shows it. Create a new question, but before that check if it has not been asked before and we will mark it to close again if so and probably also downvotes."}], "owner": {"reputation": 529, "user_id": 4917819, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/88fd9d88ee00dc809c1e6277ab3c1a22?s=128&d=identicon&r=PG&f=1", "display_name": "Johiasburg Frowell", "link": "https://stackoverflow.com/users/4917819/johiasburg-frowell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1515624542, "answer_count": 0, "score": 0, "last_activity_date": 1515624504, "creation_date": 1515624248, "question_id": 48197302, "link": "https://stackoverflow.com/questions/48197302/numpy-equivalent-of-ai-for-i-in-indices", "closed_reason": "Duplicate", "title": "Numpy equivalent of a[i] for i in indices", "body": "<p>What is a way to use NumPy to create a new list that consists of a desired subset of the elements of another list?</p>\n\n<pre><code>indices = [0,2,1,1]\na = [8,7,6,5,4]\nb = [a[i] for i in indices] # returns [8,6,7,7]\n</code></pre>\n\n<p>I'm looking for a single function, if possible.  Something like this:</p>\n\n<pre><code>import numpy as np\nindices = np.array([0,2,1,1])\na = np.array([8,7,6,5,4])\nb = np.get_selected_elements(a, indices)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 0, "creation_date": 1515648565, "post_id": 48198745, "comment_id": 83381628, "body": "Just perfect. Thanks @cpc for the solution."}], "tags": [], "owner": {"reputation": 124, "user_id": 5773513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b1fea89ee2c0ca4f936836f24bac5d6?s=128&d=identicon&r=PG&f=1", "display_name": "cpc", "link": "https://stackoverflow.com/users/5773513/cpc"}, "is_accepted": true, "score": 3, "last_activity_date": 1515635548, "creation_date": 1515635548, "answer_id": 48198745, "question_id": 48197250, "link": "https://stackoverflow.com/questions/48197250/unable-to-append-data-to-a-worksheet-in-an-excel-file-using-openpyxl/48198745#48198745", "title": "Unable to append data to a worksheet in an excel file using openpyxl", "body": "<p>The modifications are still in the memory. Add <a href=\"http://openpyxl.readthedocs.io/en/default/tutorial.html#saving-to-a-file\" rel=\"nofollow noreferrer\"><code>wb.save(\"new file.xlsx\")</code></a> at the end of the code.</p>\n"}], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 0, "accepted_answer_id": 48198745, "answer_count": 1, "score": 0, "last_activity_date": 1515635548, "creation_date": 1515623924, "question_id": 48197250, "link": "https://stackoverflow.com/questions/48197250/unable-to-append-data-to-a-worksheet-in-an-excel-file-using-openpyxl", "title": "Unable to append data to a worksheet in an excel file using openpyxl", "body": "<p>How can I append data to my existing worksheet using openpyxl? I've created a scraper in python which is able to grab titles and links from a webpage. I wish to write them in an excel file using openpyxl. However, my scraper neither writes those newly populated data in the excel file nor throws an error? Where am I going wrong? Thanks in advance to take a look into it.</p>\n\n<p>Here is my try:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nfrom openpyxl import load_workbook\n\nwb = load_workbook(\"scraper.xlsx\")\nws = wb.worksheets[0]\n\nres = requests.get(\"https://www.yify-torrent.org/search/1080p/\")\nsoup = BeautifulSoup(res.text, 'lxml')\nfor item in soup.select(\".mv\"):\n    name = item.select(\"a\")[0].text\n    link = item.select(\"a\")[0]['href']\n    ws.append([name,link])\n</code></pre>\n"}, {"tags": ["python", "multithreading", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9201081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1859732814337246/picture?type=large", "display_name": "Luan Devecchi", "link": "https://stackoverflow.com/users/9201081/luan-devecchi"}, "edited": false, "score": 0, "creation_date": 1515626943, "post_id": 48197389, "comment_id": 83376569, "body": "Hi, I&#39;ve think I badly formed my question. What I want to do is:  I have a function that does a publishing request for my api, eg:  postdata = {&#39;login&#39;: login, &#39;password&#39;: password}  requests.post (&#39;myapi&#39;, data = postdata)  and then I print the result.  The problem is that I need to do this more than a hundred times, and it takes a lot for me to test one by one (I use the open (&#39;file&#39;) because of this)  What I need is for it to send more than one request at a time and I have no clue how to do this, and thanks for the response."}, {"owner": {"reputation": 2207, "user_id": 2744663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Pqgmd.png?s=128&g=1", "display_name": "Flight Odyssey", "link": "https://stackoverflow.com/users/2744663/flight-odyssey"}, "reply_to_user": {"reputation": 3, "user_id": 9201081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1859732814337246/picture?type=large", "display_name": "Luan Devecchi", "link": "https://stackoverflow.com/users/9201081/luan-devecchi"}, "edited": false, "score": 0, "creation_date": 1515634769, "post_id": 48197389, "comment_id": 83378520, "body": "Yeah, that should be exactly what the above does, if I&#39;m understanding you correctly. Assuming that <code>myfunction</code> does the publishing request for your api, the code above will send up to 4 requests at a time (or more if you change the <code>processes=4</code>)"}, {"owner": {"reputation": 3, "user_id": 9201081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1859732814337246/picture?type=large", "display_name": "Luan Devecchi", "link": "https://stackoverflow.com/users/9201081/luan-devecchi"}, "edited": false, "score": 0, "creation_date": 1515667016, "post_id": 48197389, "comment_id": 83390977, "body": "hi! the problem is that i need to send each line from the file (don&#39;t need to be in order) and each line is different, the txt file is (for example): fulano:detal cicrano:deltora23  I need to send each line faster, like 5 lines at a time, is it possible?"}, {"owner": {"reputation": 2207, "user_id": 2744663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Pqgmd.png?s=128&g=1", "display_name": "Flight Odyssey", "link": "https://stackoverflow.com/users/2744663/flight-odyssey"}, "reply_to_user": {"reputation": 3, "user_id": 9201081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1859732814337246/picture?type=large", "display_name": "Luan Devecchi", "link": "https://stackoverflow.com/users/9201081/luan-devecchi"}, "edited": false, "score": 0, "creation_date": 1515681725, "post_id": 48197389, "comment_id": 83400222, "body": "Sorry, I still don&#39;t understand how that is different from what the code above does? <code>dabify</code> will run on each line, in several parallel processes, and you can modify it to do whatever you want with each line."}], "tags": [], "owner": {"reputation": 2207, "user_id": 2744663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Pqgmd.png?s=128&g=1", "display_name": "Flight Odyssey", "link": "https://stackoverflow.com/users/2744663/flight-odyssey"}, "is_accepted": true, "score": 1, "last_activity_date": 1515624670, "creation_date": 1515624670, "answer_id": 48197389, "question_id": 48197248, "link": "https://stackoverflow.com/questions/48197248/multi-threading-function/48197389#48197389", "title": "Multi-Threading Function", "body": "<p>Yes, this is quite straightforward with the <a href=\"https://docs.python.org/2/library/multiprocessing.html\" rel=\"nofollow noreferrer\">multiprocessing</a> package.</p>\n\n<p>You'll need a function that can be called directly on each <code>dab</code> in <code>lista</code>, something like:</p>\n\n<pre><code>def dabify(dab):\n    sdab = dab.split(':')\n    login = sdab[0]\n    senha = sdab[1]\n    myfunction(login,senha)\n</code></pre>\n\n<p>Then, you can use a multiprocessing pool to call <code>dabify</code> on each element of <code>lista</code>:</p>\n\n<pre><code>from multiprocessing import Pool\npool = Pool(processes=4) # specify number of processes\nfor result in pool.imap_unordered(dabify, lista):\n    # do something with the result here if you want\n    pass\n</code></pre>\n\n<p>Note that the order that the API gets called is no longer guaranteed.</p>\n"}], "owner": {"reputation": 3, "user_id": 9201081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1859732814337246/picture?type=large", "display_name": "Luan Devecchi", "link": "https://stackoverflow.com/users/9201081/luan-devecchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 48197389, "answer_count": 1, "score": 0, "last_activity_date": 1515624670, "creation_date": 1515623914, "question_id": 48197248, "link": "https://stackoverflow.com/questions/48197248/multi-threading-function", "title": "Multi-Threading Function", "body": "<p>I'm using Python 3 to send a request to my API.</p>\n\n<p>I read a file and for each line I use the function</p>\n\n<pre><code>lista = open('mylist.txt', 'r').readlines()\nlista = [dab.replace('\\n', '') for dab in lista]\n\nfor dab in lista:\n    sdab = dab.split(':')\n    login = sdab[0]\n    senha = sdab[1]\n    myfunction(login,senha)\n</code></pre>\n\n<p>myfunction just does a request to my api.</p>\n\n<p>is it possible, for example, after taking the number of rows from the file to make threads and send the contents of each line to the function?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1515624464, "post_id": 48197234, "comment_id": 83375731, "body": "So many ways without looping :)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1515624527, "post_id": 48197234, "comment_id": 83375760, "body": "It is called unnest in R :-)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1515625208, "post_id": 48197234, "comment_id": 83376013, "body": "For any interested parties out there, I&#39;ve timed everyone&#39;s answer <a href=\"https://stackoverflow.com/a/48197395/4909087\">here</a>."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1544540738, "post_id": 48197234, "comment_id": 94307226, "body": "related <a href=\"https://stackoverflow.com/questions/53218931/how-do-i-unnest-explode-a-column-in-a-pandas-dataframe\" title=\"how do i unnest explode a column in a pandas dataframe\">stackoverflow.com/questions/53218931/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 7, "last_activity_date": 1515624205, "creation_date": 1515624205, "answer_id": 48197296, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/48197296#48197296", "title": "Unnest (explode) a Pandas Series", "body": "<pre><code>In [86]: df.col1.str.extractall(r'(.)') \\\n           .reset_index(level=1, drop=True) \\\n           .join(df['col2']) \\\n           .reset_index(drop=True)\nOut[86]:\n   0  col2\n0  a     1\n1  s     1\n2  d     1\n3  f     1\n4  x     2\n5  y     2\n6  q     3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 8, "last_activity_date": 1515624238, "creation_date": 1515624238, "answer_id": 48197299, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/48197299#48197299", "title": "Unnest (explode) a Pandas Series", "body": "<pre><code>pd.DataFrame([(letter, i) \n              for letters, i in zip(df['col1'], df['col2']) \n              for letter in letters],\n             columns=df.columns)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1020, "user_id": 5403632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L1_DVj5uYSg/AAAAAAAAAAI/AAAAAAAABMw/LOuPEP17RZM/photo.jpg?sz=128", "display_name": "Modem Rakesh goud", "link": "https://stackoverflow.com/users/5403632/modem-rakesh-goud"}, "edited": false, "score": 0, "creation_date": 1592922773, "post_id": 48197300, "comment_id": 110594829, "body": "I have been searching for more than 15 mins for this line..  &#39;&#39;&#39;df.col1=df.col1.apply(list)&#39;&#39;&#39;"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1020, "user_id": 5403632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L1_DVj5uYSg/AAAAAAAAAAI/AAAAAAAABMw/LOuPEP17RZM/photo.jpg?sz=128", "display_name": "Modem Rakesh goud", "link": "https://stackoverflow.com/users/5403632/modem-rakesh-goud"}, "edited": false, "score": 0, "creation_date": 1592922808, "post_id": 48197300, "comment_id": 110594851, "body": "@ModemRakeshgoud yw : -) and FYI <a href=\"https://stackoverflow.com/questions/53218931/how-to-unnest-explode-a-column-in-a-pandas-dataframe/53218939#53218939\" title=\"how to unnest explode a column in a pandas dataframe\">stackoverflow.com/questions/53218931/&hellip;</a>"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 8, "last_activity_date": 1515624239, "creation_date": 1515624239, "answer_id": 48197300, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/48197300#48197300", "title": "Unnest (explode) a Pandas Series", "body": "<p>Trick from the <code>list</code> :-)</p>\n\n<pre><code>df.col1=df.col1.apply(list)\ndf\nOut[489]: \n           col1  col2\n0  [a, s, d, f]     1\n1        [x, y]     2\n2           [q]     3\npd.DataFrame({'col1':np.concatenate(df.col1.values),'col2':df.col2.repeat(df.col1.apply(len))})\nOut[490]: \n  col1  col2\n0    a     1\n0    s     1\n0    d     1\n0    f     1\n1    x     2\n1    y     2\n2    q     3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 7, "last_activity_date": 1515624348, "creation_date": 1515624348, "answer_id": 48197321, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/48197321#48197321", "title": "Unnest (explode) a Pandas Series", "body": "<p>One more:)</p>\n\n<pre><code>df.set_index('col2').col1.apply(lambda x: pd.Series(list(x))).stack()\\\n.reset_index(1,drop = True).reset_index(name = 'col1')\n\n    col2    col1\n0   1       a\n1   1       s\n2   1       d\n3   1       f\n4   2       x\n5   2       y\n6   3       q\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1515626096, "post_id": 48197395, "comment_id": 83376326, "body": "All solutions is nice here, I will mark it down for dup :-),As we discussed before , pandas should adding a small api  for unnesting :-)"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 16, "last_activity_date": 1515654575, "last_edit_date": 1515654575, "creation_date": 1515624711, "answer_id": 48197395, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/48197395#48197395", "title": "Unnest (explode) a Pandas Series", "body": "<p>Using <code>list</code> + <code>str.join</code> and <code>np.repeat</code> -</p>\n\n<pre><code>pd.DataFrame(\n{\n     'col1' : list(''.join(df.col1)), \n     'col2' : df.col2.values.repeat(df.col1.str.len(), axis=0)\n})\n\n  col1  col2\n0    a     1\n1    s     1\n2    d     1\n3    f     1\n4    x     2\n5    y     2\n6    q     3\n</code></pre>\n\n<hr>\n\n<p>A generalised solution for <em>any number of columns</em> is easily achievable, without much change to the solution -</p>\n\n<pre><code>i = list(''.join(df.col1))\nj = df.drop('col1', 1).values.repeat(df.col1.str.len(), axis=0)\n\ndf = pd.DataFrame(j, columns=df.columns.difference(['col1']))\ndf.insert(0, 'col1', i)\n\ndf\n\n  col1 col2\n0    a    1\n1    s    1\n2    d    1\n3    f    1\n4    x    2\n5    y    2\n6    q    3\n</code></pre>\n\n<hr>\n\n<p><strong>Performance</strong></p>\n\n<pre><code>df = pd.concat([df] * 100000, ignore_index=True)\n</code></pre>\n\n<p></p>\n\n<pre><code># MaxU's solution\n\n%%timeit\ndf.col1.str.extractall(r'(.)') \\\n           .reset_index(level=1, drop=True) \\\n           .join(df['col2']) \\\n           .reset_index(drop=True)\n\n1 loop, best of 3: 1.98 s per loop\n</code></pre>\n\n<p></p>\n\n<pre><code># piRSquared's solution\n\n%%timeit\npd.DataFrame(\n     [[x] + b for a, *b in df.values for x in a],\n     columns=df.columns\n)\n\n1 loop, best of 3: 1.68 s per loop\n</code></pre>\n\n<p></p>\n\n<pre><code># Wen's solution\n\n%%timeit\nv = df.col1.apply(list)\npd.DataFrame({'col1':np.concatenate(v.values),'col2':df.col2.repeat(v.apply(len))})\n\n1 loop, best of 3: 835 ms per loop\n</code></pre>\n\n<p></p>\n\n<pre><code># Alexander's solution\n\n%%timeit\npd.DataFrame([(letter, i) \n              for letters, i in zip(df['col1'], df['col2']) \n              for letter in letters],\n             columns=df.columns)\n\n1 loop, best of 3: 316 ms per loop\n</code></pre>\n\n<p></p>\n\n<pre><code>%%timeit\npd.DataFrame(\n{\n     'col1' : list(''.join(df.col1)), \n     'col2' : df.col2.values.repeat(df.col1.str.len(), axis=0)\n})\n\n10 loops, best of 3: 124 ms per loop\n</code></pre>\n\n<p>I tried timing Vaishali's, but it took too long on this dataset. </p>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515654207, "post_id": 48201433, "comment_id": 83383795, "body": "This is great. Currently, it takes <code>1 loop, best of 3: 1.68 s per loop</code>. I&#39;ll add timings for all your options once they&#39;re done."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515654240, "post_id": 48201433, "comment_id": 83383809, "body": "I&#39;ll stick to this one"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515654591, "post_id": 48201433, "comment_id": 83383958, "body": "Ah, in that case, added timing result to my answer!"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 4, "last_activity_date": 1515654102, "creation_date": 1515654102, "answer_id": 48201433, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/48201433#48201433", "title": "Unnest (explode) a Pandas Series", "body": "<p>General solution with a list comprehension and clever unpacking:</p>\n\n<pre><code>pd.DataFrame(\n    [[x] + b for a, *b in df.values for x in a],\n    columns=df.columns\n)\n\n  col1  col2\n0    a     1\n1    s     1\n2    d     1\n3    f     1\n4    x     2\n5    y     2\n6    q     3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2238, "user_id": 2681088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5I395.png?s=128&g=1", "display_name": "pdm", "link": "https://stackoverflow.com/users/2681088/pdm"}, "is_accepted": false, "score": 0, "last_activity_date": 1562800674, "creation_date": 1562800674, "answer_id": 56979753, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/56979753#56979753", "title": "Unnest (explode) a Pandas Series", "body": "<p>You can also try to <a href=\"https://docs.python.org/3/library/itertools.html#itertools.chain\" rel=\"nofollow noreferrer\">itertools.chain</a> and <a href=\"https://docs.python.org/3/library/itertools.html#itertools.repeat\" rel=\"nofollow noreferrer\">itertools.repeat</a> functions to achieve similar results. </p>\n\n<p>An example would be</p>\n\n<pre><code>import pandas as pd\nfrom itertools import chain, repeat\n\nd = {'col1': ['asdf', 'xy', 'q'], 'col2': [1, 2, 3]}\n\nexpanded_d = {\n    \"col1\": list(chain(*[list(item) for item in d[\"col1\"]])),\n    \"col2\": list(chain(*[list(repeat(d[\"col2\"][idx], len(list(d[\"col1\"][idx])))) for idx in range(len(d[\"col1\"])) ]))\n    }\n\nresult = pd.DataFrame(data=expanded_d)\n\n  col1  col2\n0    a     1\n1    s     1\n2    d     1\n3    f     1\n4    x     2\n5    y     2\n6    q     3\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 9800, "user_id": 6660373, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/311604349184855/picture?type=large", "display_name": "Pygirl", "link": "https://stackoverflow.com/users/6660373/pygirl"}, "is_accepted": false, "score": 1, "last_activity_date": 1582274738, "creation_date": 1582274738, "answer_id": 60334984, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series/60334984#60334984", "title": "Unnest (explode) a Pandas Series", "body": "<p><strong>Using Explode (pandas>=0.25)</strong></p>\n\n<pre><code>df = pd.DataFrame({'col1': ['asdf', 'xy', 'q'], 'col2': [1, 2, 3]})\n\ndf.col1=df.col1.apply(list)\ndf = df.explode('col1')\n</code></pre>\n\n<p><strong>Result:</strong></p>\n\n<pre><code>  col1  col2\n0   a   1\n0   s   1\n0   d   1\n0   f   1\n1   x   2\n1   y   2\n2   q   3\n</code></pre>\n"}], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2619, "favorite_count": 8, "accepted_answer_id": 48197395, "answer_count": 8, "score": 15, "last_activity_date": 1582274738, "creation_date": 1515623807, "last_edit_date": 1551402566, "question_id": 48197234, "link": "https://stackoverflow.com/questions/48197234/unnest-explode-a-pandas-series", "title": "Unnest (explode) a Pandas Series", "body": "<p>I have:</p>\n\n<pre><code>df = pd.DataFrame({'col1': ['asdf', 'xy', 'q'], 'col2': [1, 2, 3]})\n\n   col1  col2\n0  asdf     1\n1    xy     2\n2     q     3\n</code></pre>\n\n<p>I'd like to take the \"combinatoric product\" of each letter from the strings in <code>col1</code>, with each elementwise int in <code>col2</code>.  I.e.:</p>\n\n<pre><code>  col1  col2\n0    a    1\n1    s    1\n2    d    1\n3    f    1\n4    x    2\n5    y    2\n6    q    3\n</code></pre>\n\n<p>Current method:</p>\n\n<pre><code>from itertools import product\n\npieces = []\nfor _, s in df.iterrows():\n    letters = list(s.col1)\n    prods = list(product(letters, [s.col2]))\n    pieces.append(pd.DataFrame(prods))\n\npd.concat(pieces)\n</code></pre>\n\n<p>Any more efficient workarounds?</p>\n"}, {"tags": ["python", "machine-learning", "artificial-intelligence", "jupyter-notebook", "data-science"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1515623857, "post_id": 48197227, "comment_id": 83375499, "body": "It contains the parameters of a model. That can be anything. For instance a <i>decision tree</i>, or the weights of a <i>neural network</i>, etc."}, {"owner": {"reputation": 211, "user_id": 3066798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb186c19590ad16f8cbe778f3cbcc2f0?s=128&d=identicon&r=PG&f=1", "display_name": "byte-crunch", "link": "https://stackoverflow.com/users/3066798/byte-crunch"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1515624108, "post_id": 48197227, "comment_id": 83375603, "body": "I&#39;ve heard &quot;It contains the parameters&quot; in many articles and blogs and it makes sense for something like a linear regression, but taking a chatbot for instance, and I&#39;m loading all these intents, am I building a parameters file of some sort? How does all this text make it into parameters? What is the deployable?"}, {"owner": {"reputation": 211, "user_id": 3066798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb186c19590ad16f8cbe778f3cbcc2f0?s=128&d=identicon&r=PG&f=1", "display_name": "byte-crunch", "link": "https://stackoverflow.com/users/3066798/byte-crunch"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1515624438, "post_id": 48197227, "comment_id": 83375722, "body": "also, if I&#39;m creating a chatbot where I feed in a bunch of expected questions, and provide responses , whats the purpose of training a model? Can&#39;t you select a response from a database entry that matches closely to an inputed intent? Just trying to understand it better anyway.."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515624517, "post_id": 48197227, "comment_id": 83375754, "body": "You need to narrow this down. There is no one answer if you want concrete specifics. I.e. if you are working with simple regression models, this could be as simple a sequence of coefficients."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1515624562, "post_id": 48197227, "comment_id": 83375776, "body": "@byte-crunch: the idea of <i>training</i> a model is that you do not decide what the answer is, but that models (usually based on statistics) calcuate what the most likely answer should be."}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 442859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ecb6761cd7c9d2a1b876f8195af2ca1?s=128&d=identicon&r=PG", "display_name": "Snark", "link": "https://stackoverflow.com/users/442859/snark"}, "is_accepted": false, "score": 0, "last_activity_date": 1515627573, "creation_date": 1515627573, "answer_id": 48197823, "question_id": 48197227, "link": "https://stackoverflow.com/questions/48197227/data-science-model-and-training-understanding/48197823#48197823", "title": "Data Science Model and Training - Understanding", "body": "<p>It depends on the model. For example linear regression, training will give you the coefficients of the slope and the intercept (generally). These are the \"model parameters\". When deployed, traditionally, these coefficients get fed into a different algorithm (literally y=mx+b), and then when queried \"what should y be, when I have x\", it responds with the appropriate value.</p>\n\n<p>Kmeans clustering on the other hand the \"parameters\" are vectors, and the predict algorithm calculates distance from a vector given to the algorithm, and then returns the closest cluster - note often times these clusters are post processed, so the predict algorithm will say \"shoes\" not \"[1,2,3,5]\", which is again an example of how these things change in the wild.</p>\n\n<p>Deep learning returns a list of edge weights for a graph, various parametric systems (as in maximum likelihood estimation), return the coefficients to describe a particular distribution, for example uniform distribution is number of buckets, Gaussian/Normal distribution is mean and variance, other more complicated ones have even more, for example skew and conditional probabilities.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5051298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93938fcd995153c4aac20c801e49a5d?s=128&d=identicon&r=PG&f=1", "display_name": "Vikash Prasad", "link": "https://stackoverflow.com/users/5051298/vikash-prasad"}, "is_accepted": false, "score": 0, "last_activity_date": 1529491708, "creation_date": 1529491708, "answer_id": 50946421, "question_id": 48197227, "link": "https://stackoverflow.com/questions/48197227/data-science-model-and-training-understanding/50946421#50946421", "title": "Data Science Model and Training - Understanding", "body": "<p>A trained model(pickled) or whatever you want to use, contains the features on which it has been trained at least. Take for example a simple distance based model, you design a model based on the fact that (x1,x2,x3,x4) features are important and if any point if comes into contact with the model should give back the calculated distance based on which you draw insights or conclusions. \nSimilarly for chatbots, you train based on ner-crf, whatever features you want. As soon as a text comes into contact with the model, the features are extracted based on the model and insights/conclusions are drawn. Hope it was helpful !! I tried explaining the Feyman way.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9730182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abc7413bafe4f16fc2df1fc06c6bcc49?s=128&d=identicon&r=PG&f=1", "display_name": "Aniruddha", "link": "https://stackoverflow.com/users/9730182/aniruddha"}, "is_accepted": false, "score": 1, "last_activity_date": 1547447318, "creation_date": 1547447318, "answer_id": 54176655, "question_id": 48197227, "link": "https://stackoverflow.com/questions/48197227/data-science-model-and-training-understanding/54176655#54176655", "title": "Data Science Model and Training - Understanding", "body": "<p>A trained model will contain the <em>value of its parameters</em>. If you tuned only a few parameters, then only they will contain the new adjusted value. Unchanged parameters will store the default value.</p>\n"}], "owner": {"reputation": 211, "user_id": 3066798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb186c19590ad16f8cbe778f3cbcc2f0?s=128&d=identicon&r=PG&f=1", "display_name": "byte-crunch", "link": "https://stackoverflow.com/users/3066798/byte-crunch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "protected_date": 1569233898, "answer_count": 3, "score": -1, "last_activity_date": 1569233869, "creation_date": 1515623787, "question_id": 48197227, "link": "https://stackoverflow.com/questions/48197227/data-science-model-and-training-understanding", "title": "Data Science Model and Training - Understanding", "body": "<p>Coming from a programming background where you write code, test, deploy, run.. I'm trying to wrap my head around the concept of \"training a model\" or a \"trained model\" in data science, and deploying that trained model. </p>\n\n<p>I'm not really concerned about the deployment environment, automation, etc.. I'm trying to understand the deployment unit.. a trained model. What does a trained model look like on a file system, what does it contain? </p>\n\n<p>I understand the concept of training a model, and splitting a set of data into a training set and testing set, but lets say I have a notebook (python / jupyter) and I load in some data, split between training/testing data, and run an algorithm to \"train\" my model. What is my deliverable under the hood? While I'm training a model I'd think there'd be a certain amount of data being stored in memory.. so how does that become part of the trained model? It obviously can't contain all the data used for training; so for instance if I'm training a chatbot agent (retrieval-based), what is actually happening as part of that training after I'd add/input examples of user questions or \"intents\" and what is my deployable as far as a trained model? Does this trained model contain some sort of summation of data from training or array of terms, how large (deployable size) can it get?</p>\n\n<p>While the question may seem relatively simple \"what is a trained model\", how would I explain it to a devops tech in simple terms? This is an \"IT guy interested in data science trying to understand the tangible unit of a trained model in a discussion with a data science guy\". </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "graph", "networkx"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1515623778, "post_id": 48197199, "comment_id": 83375472, "body": "Here <code>&#39;a&#39;</code> and <code>&#39;c&#39;</code> are connected directly as well, so removing <code>&#39;b&#39;</code> will not remove the connection between <code>&#39;a&#39;</code> and <code>&#39;c&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "edited": false, "score": 0, "creation_date": 1515633874, "post_id": 48197318, "comment_id": 83378358, "body": "Yeah that was my guess too but was not sure why <code>node_connectivity </code> and <code>minimum_node_cut </code> do not use the same method to be consistent."}, {"owner": {"reputation": 48, "user_id": 3896436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e62236c97781547e4b11685e0811535?s=128&d=identicon&r=PG&f=1", "display_name": "jpapadakis", "link": "https://stackoverflow.com/users/3896436/jpapadakis"}, "reply_to_user": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "edited": false, "score": 0, "creation_date": 1515678506, "post_id": 48197318, "comment_id": 83397971, "body": "I&#39;m sure they do, but what set of vertices should <code>minimum_node_cut</code> report? The correct solution is either {a, b} <i>or</i> {b, c} which include either the source or destination."}], "tags": [], "owner": {"reputation": 48, "user_id": 3896436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e62236c97781547e4b11685e0811535?s=128&d=identicon&r=PG&f=1", "display_name": "jpapadakis", "link": "https://stackoverflow.com/users/3896436/jpapadakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1515624672, "last_edit_date": 1515624672, "creation_date": 1515624336, "answer_id": 48197318, "question_id": 48197199, "link": "https://stackoverflow.com/questions/48197199/networkx-minimum-node-cut-and-node-connectivity/48197318#48197318", "title": "networkx minimum_node_cut and node_connectivity", "body": "<p>From the documentation:</p>\n\n<p><code>networkx.minimum_node_cut</code> - If source and target nodes are provided, this function returns the set of nodes of minimum cardinality that, if removed, would destroy all paths among source and target in G. </p>\n\n<p><code>networkx.node_connectivity</code> - If source and target nodes are provided, this function returns the local node connectivity: the minimum number of nodes that must be removed to break all paths from source to target in G.</p>\n\n<p>The first returns a set of nodes that when removed will break local connectivity, the second returns the minimum number of nodes needed to be  removed to break local connectivity. </p>\n\n<p>It seems to me that the set returned by <code>networkx.minimum_node_cut</code> excludes the source and target nodes as the removal of either would trivially break connectivity between them. <code>networkx.node_connectivity</code> rightfully reports that 2 nodes must be removed to break local connectivity.</p>\n"}], "owner": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 486, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1515624672, "creation_date": 1515623640, "question_id": 48197199, "link": "https://stackoverflow.com/questions/48197199/networkx-minimum-node-cut-and-node-connectivity", "title": "networkx minimum_node_cut and node_connectivity", "body": "<p>I am using networkx and here is my network. </p>\n\n<pre><code>import networkx as nx\nG = nx.from_edgelist([['a','b'], ['b','c'], ['c','a']])\nnx.draw_networkx(G)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ghG3J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ghG3J.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can you please tell me why <code>minimum_node_cut</code> returns <code>b</code>, whereas <code>node_connectivity</code> returns <code>2</code>?</p>\n\n<pre><code>nx.minimum_node_cut(G, 'a', 'c')\n{'b'}\n\nnx.node_connectivity(G, 'a', 'c')\n2\n</code></pre>\n\n<p>I was expecting length of <code>minimum_node_cut</code> would equal to <code>node_connectivity</code>.</p>\n"}, {"tags": ["python", "arrays", "dictionary", "keyerror"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515623910, "post_id": 48197173, "comment_id": 83375529, "body": "Python isn&#39;t pass-by-value. You put a list in the dict, and then you wipe <i>that list</i>. The dict is now holding a reference to an empty list."}, {"owner": {"reputation": 11, "user_id": 9095996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bb89ce19264728e54d3e3361e0680c1?s=128&d=identicon&r=PG&f=1", "display_name": "badcoder", "link": "https://stackoverflow.com/users/9095996/badcoder"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515624022, "post_id": 48197173, "comment_id": 83375572, "body": "@user2357112 oh, how can I fix that problem? I can&#39;t not delete the list, or else the list would just grow bigger each time, correct?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515624142, "post_id": 48197173, "comment_id": 83375615, "body": "Make a copy? You&#39;ve got more problems than that, though."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515624164, "post_id": 48197173, "comment_id": 83375622, "body": "Why are you even using a global <code>foundwords</code> variable, anyway?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1515624377, "post_id": 48197173, "comment_id": 83375699, "body": "<code>wordsDict.setdefault(words[i], foundwords)</code> doesn&#39;t store a copy. It stores <i>the actual list</i>. Which you empty on the next line."}, {"owner": {"reputation": 11, "user_id": 9095996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bb89ce19264728e54d3e3361e0680c1?s=128&d=identicon&r=PG&f=1", "display_name": "badcoder", "link": "https://stackoverflow.com/users/9095996/badcoder"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515624773, "post_id": 48197173, "comment_id": 83375852, "body": "@user2357112 Because I used it in several functions, I don&#180;t know where to put it."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515624905, "post_id": 48197173, "comment_id": 83375902, "body": "There is no reason to share that variable across functions."}, {"owner": {"reputation": 11, "user_id": 9095996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bb89ce19264728e54d3e3361e0680c1?s=128&d=identicon&r=PG&f=1", "display_name": "badcoder", "link": "https://stackoverflow.com/users/9095996/badcoder"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515625426, "post_id": 48197173, "comment_id": 83376091, "body": "@user2357112 ok, i&#39;ll fix that, thank you so much!"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515633509, "post_id": 48197173, "comment_id": 83378284, "body": "@user2357112: Pedantically, Python <b>is</b> pass-by-value. Practically no language I can think of would silenly copy a data structure like a list when storing in a mapping structure. (C++ might do it, depending on your exact code, but in idiomatic code the vector object would likely be shared even in C++.)"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1515633658, "post_id": 48197173, "comment_id": 83378318, "body": "My favorite explanation of what&#39;s actually happening here: <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1515634532, "post_id": 48197173, "comment_id": 83378475, "body": "@DanielPryden: It&#39;s pass-by-value if you go by the Java &quot;pass by value but you have to keep in mind that the value you&#39;re passing is a reference, not the actual object&quot; terminology, but calling that &quot;pass by value&quot; without any qualification or explanation is more confusing than helpful, and when you add the explanation, the &quot;pass by value&quot; part doesn&#39;t really add to the explanation."}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515634744, "post_id": 48197173, "comment_id": 83378514, "body": "@user2357112. Meh. I could be convinced that &quot;call-by-value&quot; and &quot;not call-by-value&quot; are equally misleading here, albeit for different reasons. If you want clarity, use a term with the correct semantics: &quot;call-by-object-sharing&quot;."}], "owner": {"reputation": 11, "user_id": 9095996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bb89ce19264728e54d3e3361e0680c1?s=128&d=identicon&r=PG&f=1", "display_name": "badcoder", "link": "https://stackoverflow.com/users/9095996/badcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1515624386, "answer_count": 0, "score": 0, "last_activity_date": 1515623473, "creation_date": 1515623473, "question_id": 48197173, "link": "https://stackoverflow.com/questions/48197173/python-setdefault-erases-content-in-lists-when-dictionary-referenced-in-other-fu", "closed_reason": "Duplicate", "title": "Python setdefault erases content in lists when dictionary referenced in other function", "body": "<pre><code>import random\nfoundwords = []\nwordsDict = {}\n\n#opens file and creates array words with all words as a seperate string item\nwith open(\"text\", \"r\") as file:\n    words = file.read().replace('\\n',' ').split(' ')\n\n#puts the words after all occurances of word in the list foundwords and returns it (read the code, it makes more sense than how I explain it)\ndef findwords(word):\n    for g in range(len(words) - 1):\n        if words[g] == word:\n            if not words[g + 1] == '':\n                foundwords.append(words[g + 1].lower())\n    return foundwords\n\n#uses the previous function on all words in the sample text and adds the list foundwords as a value with the word as a key\nfor i in range(len(words) - 1):\n    foundwords = findwords(words[i])\n    wordsDict.setdefault(words[i], foundwords)\n    del foundwords[:]   \n\n#chooses a random word from the foundwords list and returns it\ndef nextword(word):\n    wordList = wordsDict[word]\n    new = wordList[random.choice(wordList)]\n    return new\n\n#this is the function that runs. it creates the final list with a random word and calls the function above with that random word.\ndef assemble():\n    final = [random.choice(words).capitalize()]\n    final.append(nextword(final[-1]).lower())\n    print(final)\n\nassemble()\n</code></pre>\n\n<p>I'm in need of help on this project again! </p>\n\n<p>This is a markov chain project. Each paragraph has a seperate function and I've labelled each of them.</p>\n\n<p>I'm currently getting a KeyError that looks like this:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"main.py\", line 31, in &lt;module&gt;\n    assemble()\n  File \"main.py\", line 28, in assemble\n    final.append(nextword(final[-1]).lower())\n  File \"main.py\", line 22, in nextword\n    wordList = wordsDict[word]\nKeyError: 'He' #&lt;-- or whatever random word was chosen\n</code></pre>\n\n<p>I've concluded that the foundwords list is empty. The thing is that they are filled in the foundwords function and the for loop, but the lists are empty in the dictionary when called in the nextword function.\nHow can I fix this problem?</p>\n\n<p>I'm a beginner programmer, so if my code is inefficient, that's why. Please feel free to correct me, feedback is appreciated!</p>\n"}, {"tags": ["python", "html", "django", "web"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 1, "creation_date": 1515623246, "post_id": 48197104, "comment_id": 83375271, "body": "Is there a reason you don&#39;t have the CSS etc in the html templates themselves?"}, {"owner": {"reputation": 3594, "user_id": 5992118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/21UQh.png?s=128&g=1", "display_name": "dahrens", "link": "https://stackoverflow.com/users/5992118/dahrens"}, "edited": false, "score": 1, "creation_date": 1515623924, "post_id": 48197104, "comment_id": 83375536, "body": "Have you tried reading <a href=\"https://docs.djangoproject.com/en/2.0/\" rel=\"nofollow noreferrer\">the documentation</a>? No need for luck - you afterwards just know how it works. ;) The term you are looking for is <a href=\"https://docs.djangoproject.com/en/2.0/howto/static-files/\" rel=\"nofollow noreferrer\">static files</a>."}], "answers": [{"tags": [], "owner": {"reputation": 510, "user_id": 8264778, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-Xih5pMwsCYs/AAAAAAAAAAI/AAAAAAAADiA/zezkRyJkEUE/photo.jpg?sz=128", "display_name": "amdan", "link": "https://stackoverflow.com/users/8264778/amdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1515629146, "creation_date": 1515629146, "answer_id": 48198025, "question_id": 48197104, "link": "https://stackoverflow.com/questions/48197104/connecting-css-js-etc-files-to-my-django-rendered-html-webpage/48198025#48198025", "title": "Connecting css, js, etc files to my Django rendered HTML webpage", "body": "<p>The good way to do your imports is to indicate the right directory </p>\n\n<pre><code>TEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'portfolio' 'templates'),\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n</code></pre>\n\n<p>then from your HTML files, load and import statics\nput this code in the top of your html page <code>{% load static %}</code>\nand : <code>&lt;link rel=\"stylesheet\" href=\"{% static \"css/styles.css\" %}\" /&gt;</code>\nsame syntax for the links of images and javascript</p>\n"}], "owner": {"reputation": 1, "user_id": 7933767, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208580375047599/picture?type=large", "display_name": "Jonathan MacPherson", "link": "https://stackoverflow.com/users/7933767/jonathan-macpherson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515629146, "creation_date": 1515623120, "question_id": 48197104, "link": "https://stackoverflow.com/questions/48197104/connecting-css-js-etc-files-to-my-django-rendered-html-webpage", "title": "Connecting css, js, etc files to my Django rendered HTML webpage", "body": "<p>I'm trying to render my HTML webpage and I'm having some issues. </p>\n\n<p>Here is my views.py file:</p>\n\n<pre><code>from django.shortcuts import render\n\ndef index(request):\n    return render(request, 'index.html')\n</code></pre>\n\n<p>Here is the TEMPLATES portion of my settings.py file:</p>\n\n<pre><code>TEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': ['portfolio/PersonalSite',\n                 'portfolio/PersonalSite/css/bootstrap.min.css',\n                 'portfolio/PersonalSite/css/styles.css',\n                 'portfolio/PersonalSite/js/scripts.min.js',\n                 'portfolio/PersonalSite/files',\n                 'portfolio/PersonalSite/libs/font-awesome/css/font-awesome.min.css',\n                 'portfolio/PersonalSite/images/Guelph_Hacks_Logo.jpg',\n                 'portfolio/PersonalSite/images/Tilt.jpg',\n                ],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n</code></pre>\n\n<p><strong>As you can see I tried to fix the problem by adding all the individual missing paths here but no luck unfortunately :(</strong></p>\n\n<p>and here outputted error message:</p>\n\n<pre><code>Django version 2.0.1, using settings 'mysite.settings'\nStarting development server at http://127.0.0.1:8000/\nQuit the server with CONTROL-C.\n[10/Jan/2018 16:54:41] \"GET / HTTP/1.1\" 200 10678\nNot Found: /libs/font-awesome/css/font-awesome.min.css\n[10/Jan/2018 16:54:42] \"GET /libs/font-awesome/css/font-awesome.min.css HTTP/1.1\" 404 2178\nNot Found: /css/styles.css\n[10/Jan/2018 16:54:42] \"GET /css/styles.css HTTP/1.1\" 404 2094\nNot Found: /css/bootstrap.min.css\n[10/Jan/2018 16:54:42] \"GET /css/bootstrap.min.css HTTP/1.1\" 404 2115\nNot Found: /images/Guelph_Hacks_Logo.jpg\nNot Found: /js/scripts.min.js\n[10/Jan/2018 16:54:42] \"GET /images/Guelph_Hacks_Logo.jpg HTTP/1.1\" 404 2136\n[10/Jan/2018 16:54:42] \"GET /js/scripts.min.js HTTP/1.1\" 404 2103\nNot Found: /images/Tilt.jpg\n[10/Jan/2018 16:54:42] \"GET /images/Tilt.jpg HTTP/1.1\" 404 2097\nNot Found: /j_icon.jpeg\n[10/Jan/2018 16:54:42] \"GET /j_icon.jpeg HTTP/1.1\" 404 2085\n</code></pre>\n\n<p>If anyone could shed a little light on how I can properly fix this issue I would greatly appreciate it!</p>\n"}, {"tags": ["python", "numpy", "scipy", "sparse-matrix"], "answers": [{"comments": [{"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 1, "creation_date": 1515653993, "post_id": 48197932, "comment_id": 83383709, "body": "Cool.  This answer also is a very good way of explianing the purpose of the <code>indices</code>/<code>indptr</code> convention used in both <code>cs*</code> data formats"}, {"owner": {"reputation": 603, "user_id": 4085463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a7c9883338293ab5fc63d5b0d6e166?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4085463/john"}, "edited": false, "score": 0, "creation_date": 1558036361, "post_id": 48197932, "comment_id": 98978013, "body": "I tried this on a bag-of-words  dataset 127,000 rows / instances and 241,000 features / columns / independent variables and most of the correlations were right but some were double their correlation (like -0.12 instead of -0.06) and others were &quot;nan&quot; compared to np.corrcoef(X[:,feature],y), but otherwise this is a really fast solution."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 603, "user_id": 4085463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a7c9883338293ab5fc63d5b0d6e166?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4085463/john"}, "edited": false, "score": 0, "creation_date": 1558068801, "post_id": 48197932, "comment_id": 98985386, "body": "@John I can get similar errors by making the sparse matrix so sparse that some columns are empty. Could you check for this in your data set?"}, {"owner": {"reputation": 603, "user_id": 4085463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a7c9883338293ab5fc63d5b0d6e166?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4085463/john"}, "edited": false, "score": 0, "creation_date": 1558364630, "post_id": 48197932, "comment_id": 99067837, "body": "@Paul You&#39;re most certainly correct. The columns were empty causing the nan&#39;s. By the way this method works great for screening a large number of features in seconds."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 6, "last_activity_date": 1515630391, "last_edit_date": 1515630391, "creation_date": 1515628410, "answer_id": 48197932, "question_id": 48197097, "link": "https://stackoverflow.com/questions/48197097/correlation-between-array-and-sparse-matrix/48197932#48197932", "title": "Correlation between array and sparse matrix", "body": "<p>Using sparsity you can easily gain a speedup of >50x:</p>\n\n<pre><code>import numpy as np\nfrom scipy.sparse import rand as r1\nfrom numpy.random import rand as r2\nfrom time import time\n\nnp.random.seed(1000)\n\nnrow,ncol = 5000,4000\nx = r1(nrow, ncol, format='csc', density=.05)\ny = (r2(nrow)&lt;=.6).astype(int)\n\nt = []\nt.append(time())\ncorrel = [np.corrcoef(np.asarray(x[:,n].todense()).reshape(-1), y)[0,1] for n in xrange(ncol)]\n\nt.append(time())\n\nyy = y - y.mean()\nxm = x.mean(axis=0).A.ravel()\nys = yy / np.sqrt(np.dot(yy, yy))\nxs = np.sqrt(np.add.reduceat(x.data**2, x.indptr[:-1]) - nrow*xm*xm)\n\ncorrel2 = np.add.reduceat(x.data * ys[x.indices], x.indptr[:-1]) / xs\n\nt.append(time())\n\nprint 'results equal --', np.allclose(correl, correl2)\nprint 'run time (sec) -- OP: {}, new: {}'.format(*np.diff(t))\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>results equal -- True\nrun time (sec) -- OP: 1.38134884834, new: 0.0178880691528\n</code></pre>\n\n<p>Explanation: To be able to take advantage of sparsity we standardise y which is dense anyway. And then compute the raw correlation between x and y. Because y is already zero-mean at this point the mean of x is nixed. It therefore remains to divide by the standard deviation of x. Here too we can avoid going through a dense matrix by calculating the raw 2nd moment and subtracting the squared mean.</p>\n\n<p>Implementation detail: Please note that I have taken the liberty of switching to <code>csc</code> which is more suitable here. We use <code>np.add.reduceat</code> to perform the sums along the 'ragged' columns in a vectorized fashion. <code>indices</code> from the <code>csc</code> representation of the sparse matrix is convenient for selecting the elements of y corresponding to nonzero elements in x.</p>\n"}], "owner": {"reputation": 817, "user_id": 2789334, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/d40f9bc01c45a08c93623b85f1463ef3?s=128&d=identicon&r=PG&f=1", "display_name": "ironv", "link": "https://stackoverflow.com/users/2789334/ironv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 2, "accepted_answer_id": 48197932, "answer_count": 1, "score": 3, "last_activity_date": 1558364608, "creation_date": 1515623071, "last_edit_date": 1515630464, "question_id": 48197097, "link": "https://stackoverflow.com/questions/48197097/correlation-between-array-and-sparse-matrix", "title": "Correlation between array and sparse matrix", "body": "<p>I have a sparse matrix (x) and an array (y).  I would like to compute the correlation between each column in the matrix and the array.  Shown below is a very simple approach which is slow.  I was hoping somebody would have a faster/better approach.</p>\n\n<pre><code>import numpy as np\nfrom scipy.sparse import rand as r1\nfrom numpy.random import rand as r2\n\nnp.random.seed(1000)\n\nnrow,ncol = 50000,4000\nx = r1(nrow, ncol, format='csr', density=.05)\ny = (r2(nrow)&lt;=.6).astype(int)\n\ncorrel = [(n,np.corrcoef(np.asarray(x[:,n].todense()).reshape(-1), y)[0,1]) for n in xrange(ncol)]\nprint correl[:10]\n</code></pre>\n"}, {"tags": ["python", "robot"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9200920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12e8f792fd9ffa3dbbeb347de033909?s=128&d=identicon&r=PG&f=1", "display_name": "MiTo", "link": "https://stackoverflow.com/users/9200920/mito"}, "edited": false, "score": 0, "creation_date": 1515771399, "post_id": 48197218, "comment_id": 83440839, "body": "Thank you very much. That worked for the part that reads form an external file but I think there is a bug in the part where opens the file and reads the line. It does that all at once meaning that even if I change the param file there are"}, {"owner": {"reputation": 33, "user_id": 9200920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12e8f792fd9ffa3dbbeb347de033909?s=128&d=identicon&r=PG&f=1", "display_name": "MiTo", "link": "https://stackoverflow.com/users/9200920/mito"}, "edited": false, "score": 0, "creation_date": 1515771744, "post_id": 48197218, "comment_id": 83441031, "body": "It does that all at once meaning that even if I change the param file there are instructions already calculated and just queued.  Is there a way to read one line at the time? Would I need some sort of callback function?"}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "reply_to_user": {"reputation": 33, "user_id": 9200920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12e8f792fd9ffa3dbbeb347de033909?s=128&d=identicon&r=PG&f=1", "display_name": "MiTo", "link": "https://stackoverflow.com/users/9200920/mito"}, "edited": false, "score": 0, "creation_date": 1515789787, "post_id": 48197218, "comment_id": 83449951, "body": "@MiTo: What do you mean by &quot;there are instructions already calculated and just queued&quot;?"}], "tags": [], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": false, "score": 1, "last_activity_date": 1515623738, "creation_date": 1515623738, "answer_id": 48197218, "question_id": 48197083, "link": "https://stackoverflow.com/questions/48197083/python-dynamically-change-a-variable-inside-loop-from-exterior/48197218#48197218", "title": "Python dynamically change a variable inside loop from exterior", "body": "<p>You need to pick a format for storing the configuration on disk and then re-read the configuration file periodically. I would write some sort of container object to handle all of this transparently:</p>\n\n<pre><code>import os\n\nfrom datetime import datetime, timedelta\n\nSENTINEL = object()\n\nclass DynamicConfiguration(object):\n    def __init__(self, filename):\n        self.filename = filename\n        self.attributes = {}\n\n        self.last_modification = 0\n        self.last_reload_attempt = datetime(1900, 1, 1)\n\n    def reload_file(self):\n        mtime = os.path.getmtime(self.filename)\n\n        if mtime &lt;= self.last_modification:\n            return\n\n        self.last_modification = mtime\n\n        with open(self.filename, 'r'):\n            self.attributes = ...  # somehow populate them\n\n    def get(self, key, default=SENTINEL):\n        if datetime.now() - self.last_reload_attempt &gt;= timedelta(seconds=5):\n            self.reload_file()\n            self.last_reload_attempt = datetime.now()\n\n        if default is SENTINEL:\n            return self.attributes[key]\n        else:\n            return self.attributes.get(key, default)\n</code></pre>\n\n<p>Then, you can just use it like this:</p>\n\n<pre><code>config = DynamicConfiguration('configuration.something')\n\n...\n\nrobot.setSpeed(speed_linear=config.get('speed_normal', 5))\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9200920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12e8f792fd9ffa3dbbeb347de033909?s=128&d=identicon&r=PG&f=1", "display_name": "MiTo", "link": "https://stackoverflow.com/users/9200920/mito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515623738, "creation_date": 1515623006, "question_id": 48197083, "link": "https://stackoverflow.com/questions/48197083/python-dynamically-change-a-variable-inside-loop-from-exterior", "title": "Python dynamically change a variable inside loop from exterior", "body": "<p>I am making a python program to control robotic arms that basically reads a machine file previously generated and sends instructions to the robot via TCP/IP in a for loop reading lines and a basic switch structure.</p>\n\n<p>I am declaring some parameters at the beginning of python like:</p>\n\n<pre><code>speed_normal = 5 # mm/s\nacc_normal = 1 # mm/s2\nwait_time = 1000 # ms\n</code></pre>\n\n<p>Then I open and read the instruction file:</p>\n\n<pre><code>for index,filename in enumerate(glob.glob(os.path.join(directory, '*.moi')))\n\n    with open(filename) as f:\n        cmd_list = f.read().splitlines()\n\n        for cmd_line in cmd_list:\n            bits = cmd_line.split(';')\n</code></pre>\n\n<p>One of the switch cases changes the speed of the robot:</p>\n\n<pre><code>        elif bits[0] == 'sp':\n            print('Speed Instruction',bits[1])\n\n            if bits[1] == 0:\n\n                robot.setSpeed(speed_linear=speed_normal)\n</code></pre>\n\n<p>So my question is, how could I change the variable <code>speed_normal</code> during the execution of the program, let's say from an external file that works as a sort of \"control panel\"? So if, without stopping the program, I would like to change it to 20 mm/s? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "dask"], "comments": [{"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1515624117, "post_id": 48197032, "comment_id": 83375608, "body": "probably this is not using the threaded scheduler."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1515780491, "post_id": 48197032, "comment_id": 83445871, "body": "Doesn&#39;t really work. shape/chunks are lost after using <code>delayed</code>, even if I use the <code>nout</code> keyword of <code>delayed</code>. I guess I have to write a custom function over dask graph."}], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1515944014, "post_id": 48250420, "comment_id": 83484722, "body": "I tried converting B to a numpy array, but that didn&#39;t work for me because I want lazy evaluation for B."}], "tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": false, "score": 1, "last_activity_date": 1515939148, "creation_date": 1515939148, "answer_id": 48250420, "question_id": 48197032, "link": "https://stackoverflow.com/questions/48197032/get-item-in-dask-array-by-one-index-in-another-dask-array/48250420#48250420", "title": "Get item in dask array by one index in another dask array", "body": "<p>This is very difficult to do in general because any element in B may refer to any element in A.  I don't see any way to make this computationally efficient.  If B is small then you could convert it into a numpy array, and then this would work fine.  If B is not fine then you're trying to do something that is very very hard.</p>\n\n<p>It may be that the shuffling algorithms in dask.dataframe could help you if your problem fits that data model.  This would look more like a dataframe join.</p>\n"}], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526930721, "creation_date": 1515622739, "last_edit_date": 1526930721, "question_id": 48197032, "link": "https://stackoverflow.com/questions/48197032/get-item-in-dask-array-by-one-index-in-another-dask-array", "title": "Get item in dask array by one index in another dask array", "body": "<p><code>A</code> and <code>B</code> are two dask arrays. <code>B</code> only contains a single integer.\nHow to find <code>A[B]</code>?</p>\n\n<p>The following code seems to work. Is there a better way?</p>\n\n<pre><code>import dask.array as da\nfrom dask import delayed\nimport numpy as np\nidx = da.from_array(np.array([0]), 1) + 10\ny = da.arange(12, chunks = 2)\nidx2 = delayed(np.ravel)(idx)\nz = delayed(da.take)(y, idx2)\nprint(z)\nprint(z.compute())\n</code></pre>\n"}, {"tags": ["python", "pandas", "rename"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1515622563, "creation_date": 1515622563, "answer_id": 48196994, "question_id": 48196956, "link": "https://stackoverflow.com/questions/48196956/cant-set-column-name-from-index-to-strindex-string-pandas-python/48196994#48196994", "title": "Can&#39;t set column name from index to str(index) + string (Pandas, Python)", "body": "<p>Try this:</p>\n\n<pre><code>scaledf = scaledf.rename(columns=lambda c:scalename + str(c) if c in oldCols else c)\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 2831637, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ebc0179a0bf564819688f8998866eb49?s=128&d=identicon&r=PG&f=1", "display_name": "Korzak", "link": "https://stackoverflow.com/users/2831637/korzak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 48196994, "answer_count": 1, "score": 0, "last_activity_date": 1515622961, "creation_date": 1515622347, "last_edit_date": 1515622460, "question_id": 48196956, "link": "https://stackoverflow.com/questions/48196956/cant-set-column-name-from-index-to-strindex-string-pandas-python", "title": "Can&#39;t set column name from index to str(index) + string (Pandas, Python)", "body": "<p>I need to change the names of a subset of columns in a dataframe from whatever number they are to that number plus a string suffix.  I know there is a function to add a suffix, but it doesn't seem to work on just indices.</p>\n\n<p>I create a list with all the column indices in it, then run a loop that, for each item in that list, it renames the dataframe column that matches the list item to the same number, plus the suffix string.</p>\n\n<pre><code>        if scalename == \"CDR\":\n        print(scaledf.columns.tolist())\n        oldCols = scaledf.columns[7:].tolist()\n        for f in range(len(oldCols)):\n            changeCol = int(oldCols[f])\n            print(changeCol)\n            scaledf.rename(columns = {changeCol:scalename + str(changeCol)})\n        print(scaledf.columns)\n</code></pre>\n\n<p>This doesn't work.</p>\n\n<p>The code will print out the column names, and prints out every item, but it does not rename the columns.  It doesn't throw errors, it just doesn't work.  I've tried variation after variation, and gotten all kinds of other errors, but this error-free code does nothing.  It just runs, and doesn't rename anything.</p>\n\n<p>Any help would be seriously appreciated!  Thank you.</p>\n\n<hr>\n\n<p>Adding sample of list: </p>\n\n<pre><code>45\n52\n54\n55\n59\n60\n61\n66\n67\n68\n69\n73\n74\n75\n80\n81\n82\n94\n101\n103\n104\n108\n110\n115\n116\n117\n129\n136\n138\n139\n143\n144\n145\n150\n151\n157\n158\n159\n171\n178\n180\n181\n185\n186\n187\n192\n193\n199\n200\n201\n213\n220\n222\n223\n227\n228\n229\n234\n235\n236\n</code></pre>\n"}, {"tags": ["python", "elasticsearch"], "answers": [{"tags": [], "owner": {"reputation": 820, "user_id": 7657658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e251e55e5c6fd25300b7410d8e368e?s=128&d=identicon&r=PG&f=1", "display_name": "MCMZL", "link": "https://stackoverflow.com/users/7657658/mcmzl"}, "is_accepted": false, "score": 1, "last_activity_date": 1515662671, "creation_date": 1515662671, "answer_id": 48203533, "question_id": 48196940, "link": "https://stackoverflow.com/questions/48196940/elasticsearch-scroll-upper-limit-python-api/48203533#48203533", "title": "Elasticsearch scroll upper limit - python api", "body": "<p>To me if you only want the first 100K you should narrow your query in the first place. That wills speed up your process. You can add a filter on date for example. </p>\n\n<p>Regarding the code I do not know other way than using the counter. I would just correct the indentation and remove the if statement for readability.</p>\n\n<pre><code>es_query = {\"query\": {\"function_score\": {\"functions\": [{\"random_score\": {\"seed\": \"1234\"}}]}}}\nes = Elasticsearch(ADDRESS, port=PORT)\n\n\nresult = es.search(\n    index=\"INDEX\", \n    doc_type=\"DOC_TYPE\", \n    body=es_query,\n    size=2000,\n    scroll=\"1m\")\n\ndata = []\nfor hit in result[\"hits\"][\"hits\"]:\n    for d in hit[\"_source\"][\"attributes\"][\"data_of_interest\"]:\n        data.append(d)\n        do_something(*args)\n\nscroll_id = result['_scroll_id']\nscroll_size = result[\"hits\"][\"total\"]\n\ni = 0\nwhile(scroll_size &gt; 0 &amp; i &lt; 100000):\n\n    print(\"Scrolling ({})...\".format(i))\n\n    result = es.scroll(scroll_id=scroll_id, scroll=\"1m\")\n    scroll_id = result[\"_scroll_id\"]\n    scroll_size = len(result['hits']['hits'])\n\n    # data = [] why redefining the list ? \n    for hit in result[\"hits\"][\"hits\"]:\n        for d in hit[\"_source\"][\"attributes\"][\"data_of_interest\"]:\n            data.append(d)\n            do_something(*args)\n    i ++\n</code></pre>\n"}], "owner": {"reputation": 1904, "user_id": 2605262, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a5d81ecf2f500b5a9856140a1b2e372?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/2605262/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1515662671, "creation_date": 1515622288, "question_id": 48196940, "link": "https://stackoverflow.com/questions/48196940/elasticsearch-scroll-upper-limit-python-api", "title": "Elasticsearch scroll upper limit - python api", "body": "<p>Is there a way using the python api to set an upper limit to the number of documents that are retrieved if we scroll in chunks of a specific size. So let's say I want a maximum of 100K documents being scrolled in chunks of 2K, where there are over 10Mil documents available. </p>\n\n<p>I've implemented a counter like object but I want to know if there is a more natural solution. </p>\n\n<pre><code>es_query = {\"query\": {\"function_score\": {\"functions\": [{\"random_score\": {\"seed\": \"1234\"}}]}}}\nes = Elasticsearch(ADDRESS, port=PORT)\n\n\nresult = es.search(\n    index=\"INDEX\", \n    doc_type=\"DOC_TYPE\", \n    body=es_query,\n    size=2000,\n    scroll=\"1m\")\n\ndata = []\nfor hit in result[\"hits\"][\"hits\"]:\n    for d in hit[\"_source\"][\"attributes\"][\"data_of_interest\"]:\n        data.append(d)\n        do_something(*args)\n\n\nscroll_id = result['_scroll_id']\nscroll_size = result[\"hits\"][\"total\"]\n\ni = 0\nwhile(scroll_size&gt;0):\n    if i % 10000 == 0:\n        print(\"Scrolling ({})...\".format(i))\n\n    result = es.scroll(scroll_id=scroll_id, scroll=\"1m\")\n    scroll_id = result[\"_scroll_id\"]\n    scroll_size = len(result['hits']['hits'])\n\ndata = []\nfor hit in result[\"hits\"][\"hits\"]:\n    for d in hit[\"_source\"][\"attributes\"][\"data_of_interest\"]:\n        data.append(d)\n        do_something(*args)\n\ni += 1\nif i == 100000:\n    break\n</code></pre>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515622412, "post_id": 48196907, "comment_id": 83374932, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described.  This code is hardly minimal, and fails to run for lack of <code>moon.png</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515622515, "post_id": 48196907, "comment_id": 83374971, "body": "When I comment out that line, and the other two that reference <code>image1</code>, I get no error; the game hangs with a white screen."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1515622670, "post_id": 48196907, "comment_id": 83375045, "body": "You have reversed <code>self</code> and <code>screen</code> in your method definitions. <code>self</code> always comes first. Thus, what you are trying to use as <code>self</code> (the <code>Reindeer</code> object) is actually the <code>pygame.Surface</code> object, and vice versa. <i>As the error message says,</i> the <code>Surface</code> object does not have a <code>y</code> attribute."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1515622726, "creation_date": 1515622726, "answer_id": 48197028, "question_id": 48196907, "link": "https://stackoverflow.com/questions/48196907/why-do-my-move-methods-not-work/48197028#48197028", "title": "Why do my move methods not work?", "body": "<p>I finally dug down to it, by (sigh) reading the code.  You have your method parameters in the wrong order: the first parameter is, by definition, the invoking object.  Switch your method signatures:</p>\n\n<pre><code>def moveDown(self, screen):\n</code></pre>\n\n<p>... and the same for all others.</p>\n"}], "owner": {"reputation": 119, "user_id": 8849802, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wuJhK6VTAEg/AAAAAAAAAAI/AAAAAAAABN0/uxqQx_1g8UM/photo.jpg?sz=128", "display_name": "Aditya Mehrotra", "link": "https://stackoverflow.com/users/8849802/aditya-mehrotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 48197028, "answer_count": 1, "score": -1, "last_activity_date": 1515622729, "creation_date": 1515622073, "last_edit_date": 1515622729, "question_id": 48196907, "link": "https://stackoverflow.com/questions/48196907/why-do-my-move-methods-not-work", "title": "Why do my move methods not work?", "body": "<p>When I run the following code, I get this error</p>\n\n<pre><code>reindeer.moveUp(screen)\n\nFile \"C:\\Users\\adity\\Desktop\\Python\\CPT.py\", line 38, in moveUp\n\nself.y = self.y - 3\nAttributeError: 'pygame.Surface' object has no attribute 'y'\n</code></pre>\n\n<p>I want to move the rectangle up or down every time the user presses w or s using methods in the reindeer class. Is it because of something wrong with the methods?</p>\n\n<p>Why does the program not know what y is? I assigned it in the list of attributes for the class.</p>\n\n<pre><code>import pygame\n\n# Define some colors\nBLACK = (0, 0, 0)\nWHITE = (255, 255, 255)\nGREEN = (0, 255, 0)\nRED = (255, 0, 0)\n\npygame.init()\n\n# Set the width and height of the screen [width, height]\nsize = (1000, 800)\nscreen = pygame.display.set_mode(size)\n\npygame.display.set_caption(\"My Game\")\n\n# Loop until the user clicks the close button.\ndone = False\n# Used to manage how fast the screen updates\nclock = pygame.time.Clock()\nscreen.fill(WHITE)\nclass Reindeer():\n    def __init__(self): \n        self.color = (255,0,0)\n        self.y_move = 3\n        self.x = 100\n        self.y = 100\n        self.width = 100\n        self.length = 100\n    def draw(screen, self):\n        pygame.draw.rect(screen, color, [self.x,self.y,self.width,self.length], 0)\n    def moveDown(screen, self):\n        self.y = self.y + 3\n        pygame.draw.rect(screen, self.color, [self.x,self.y,self.width, self.length], 0)\n    def moveUp(screen, self):\n        self.y = self.y - 3\n        pygame.draw.rect(screen, self.color, [self.x,self.y,self.width,self.length], 0)\nreindeer = Reindeer()\n# -------- Main Program Loop -----------\nwhile not done:\n    # --- Main event loop\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_w:\n                reindeer.moveDown(screen)\n            elif event.key == pygame.K_s:\n                reindeer.moveUp(screen)\n\n\n    pygame.display.flip()\n\n\n    clock.tick(60)\n\npygame.quit()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "console-application", "pyinstaller", "py2exe"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1515623077, "post_id": 48196885, "comment_id": 83375207, "body": "If the script runs normally (invoking <i>Python</i> on it), it should run from <i>py2exe</i> bundle. You&#39;re doing smth wrong. It&#39;s also possible embedding <i>Python</i>; You could take a look at <a href=\"https://stackoverflow.com/questions/39539089/what-files-are-required-for-py-initialize-to-run\" title=\"what files are required for py initialize to run\">stackoverflow.com/questions/39539089/&hellip;</a>, or <a href=\"https://stackoverflow.com/questions/47942845/calling-python-function-with-parametrs-from-c-project-visual-studio\" title=\"calling python function with parametrs from c project visual studio\">stackoverflow.com/questions/47942845/&hellip;</a>, for more details but (both are on <i>Win</i>) but that&#39;s pretty much what <i>py2exe</i> does."}], "answers": [{"tags": [], "owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "is_accepted": false, "score": 0, "last_activity_date": 1515623841, "last_edit_date": 1515623841, "creation_date": 1515623226, "answer_id": 48197121, "question_id": 48196885, "link": "https://stackoverflow.com/questions/48196885/how-to-package-a-python-3-console-application-as-a-windows-binary/48197121#48197121", "title": "How to package a Python 3 console application as a windows binary?", "body": "<p>It is hard to know for sure but have you checked that all of the required dependencies for your project are either in the same folder as the created executable or (at least) in your path?</p>\n\n<p>The other alternative that I am aware of (and use) is cx_Freeze. This particular exe builder has cross platform support. </p>\n\n<p>cx_Freeze will attempt to automatically find all dependent python modules and include them in the final build. I imagine that the other two options work in the same manner. Packages that cannot be automatically located and binary dependencies (eg dlls, sos) must be explicitly specified in the build configuration scripts.</p>\n\n<p>One method I have for debugging for missing dependencies is to manually copy the suspected missing dependency into the same folder as the .exe to see if it fixes the issue. If it does then I will specify it in the build configuration script.</p>\n\n<p>See <a href=\"https://cx-freeze.readthedocs.io/en/latest/distutils.html\" rel=\"nofollow noreferrer\">https://cx-freeze.readthedocs.io/en/latest/distutils.html</a> for cx_Freeze documentation, in particular section titled build_exe.</p>\n\n<p>Here is a good example of a non-trival setup.py for cx_Freeze: <a href=\"http://www.pythonexample.com/code/cx_freeze-setup/\" rel=\"nofollow noreferrer\">http://www.pythonexample.com/code/cx_freeze-setup/</a></p>\n"}], "owner": {"reputation": 65, "user_id": 4567986, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/eec48c22f8f525d9d77c7a3481811c10?s=128&d=identicon&r=PG&f=1", "display_name": "volf", "link": "https://stackoverflow.com/users/4567986/volf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515623841, "creation_date": 1515622001, "question_id": 48196885, "link": "https://stackoverflow.com/questions/48196885/how-to-package-a-python-3-console-application-as-a-windows-binary", "title": "How to package a Python 3 console application as a windows binary?", "body": "<p>I am doing <a href=\"http://pythonpracticeprojects.com/lisp.html\" rel=\"nofollow noreferrer\">this</a> practice project to implement a LISP interpreter in Python, using help from <a href=\"http://norvig.com/lispy.html\" rel=\"nofollow noreferrer\">here</a>. I wanted to create an exe file for the project, executing which would start a REPL. \nI tried using py2exe and pyInstaller but an error is thrown when I execute the output binary, saying that this script cannot run.\nWhere did I go wrong with my approach and what alternative ways can I use?\nThank you.</p>\n"}, {"tags": ["python", "boto3"], "comments": [{"owner": {"reputation": 4918, "user_id": 795876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c5d0d7600171a1ae7adadca3287dafa4?s=128&d=identicon&r=PG", "display_name": "fsenart", "link": "https://stackoverflow.com/users/795876/fsenart"}, "edited": false, "score": 1, "creation_date": 1557579708, "post_id": 48196784, "comment_id": 98817665, "body": "Use virtual-hosted style S3 urls: <a href=\"https://stackoverflow.com/a/56090535/795876\">stackoverflow.com/a/56090535/795876</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "is_accepted": true, "score": 3, "last_activity_date": 1515711451, "last_edit_date": 1515711451, "creation_date": 1515628339, "answer_id": 48197923, "question_id": 48196784, "link": "https://stackoverflow.com/questions/48196784/get-url-of-public-accessible-s3-object-using-boto3-without-expiration-or-securit/48197923#48197923", "title": "Get url of public accessible s3 object using boto3 without expiration or security info", "body": "<p>The best solution I found is still to use the <code>generate_presigned_url</code>, just that the <code>Client.Config.signature_version</code> needs to be set to <code>botocore.UNSIGNED</code>.</p>\n\n<p>The following returns the public link without the signing stuff.</p>\n\n<pre><code>config.signature_version = botocore.UNSIGNED\nboto3.client('s3', config=config).generate_presigned_url('get_object', ExpiresIn=0, Params={'Bucket': bucket, 'Key': key})\n</code></pre>\n\n<p>The relevant discussions on the boto3 repository are:</p>\n\n<ul>\n<li><a href=\"https://github.com/boto/boto3/issues/110\" rel=\"nofollow noreferrer\">https://github.com/boto/boto3/issues/110</a></li>\n<li><a href=\"https://github.com/boto/boto3/issues/169\" rel=\"nofollow noreferrer\">https://github.com/boto/boto3/issues/169</a></li>\n<li><a href=\"https://github.com/boto/boto3/issues/1415\" rel=\"nofollow noreferrer\">https://github.com/boto/boto3/issues/1415</a></li>\n</ul>\n"}], "owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2154, "favorite_count": 0, "accepted_answer_id": 48197923, "answer_count": 1, "score": 2, "last_activity_date": 1515711451, "creation_date": 1515621537, "last_edit_date": 1515621950, "question_id": 48196784, "link": "https://stackoverflow.com/questions/48196784/get-url-of-public-accessible-s3-object-using-boto3-without-expiration-or-securit", "title": "Get url of public accessible s3 object using boto3 without expiration or security info", "body": "<p>Running a line like:</p>\n\n<pre><code>s3_obj = boto3.resource('s3').Object(bucket, key)\ns3_obj.meta.client.generate_presigned_url('get_object', ExpiresIn=0, Params={'Bucket':bucket,'Key':key})\n</code></pre>\n\n<p>Yields a result like:</p>\n\n<pre><code>https://my-bucket.s3.amazonaws.com/my-key/my-object-name?AWSAccessKeyId=SOMEKEY&amp;Expires=SOMENUMBER&amp;x-amz-security-token=SOMETOKEN\n</code></pre>\n\n<p>For an s3 object with <code>public-read</code> ACL, all the GET params are unnecessary.</p>\n\n<p>I could cheat and use rewrite the URL without the GET params but that feels unclean and hacky.</p>\n\n<p>How do I use boto3 to provide me with just the public link, e.g. <code>https://my-bucket.s3.amazonaws.com/my-key/my-object-name</code>? In other words, how do I skip the signing step in <code>generate_presigned_url</code>? I don't see anything like a <code>generated_unsigned_url</code> function.</p>\n"}, {"tags": ["python", "python-3.x", "python-3.6", "python-asyncio"], "comments": [{"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 3, "creation_date": 1515622015, "post_id": 48196720, "comment_id": 83374777, "body": "What about <code>break</code> or <code>continue</code>?"}, {"owner": {"reputation": 4040, "user_id": 6293857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V50TV.png?s=128&g=1", "display_name": "Rob Truxal", "link": "https://stackoverflow.com/users/6293857/rob-truxal"}, "reply_to_user": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1515622427, "post_id": 48196720, "comment_id": 83374940, "body": "...oh woah yeah <code>break</code> cuz I&#39;m in a <code>while</code> loop...(&gt;_&lt;) thank you."}], "answers": [{"comments": [{"owner": {"reputation": 4040, "user_id": 6293857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V50TV.png?s=128&g=1", "display_name": "Rob Truxal", "link": "https://stackoverflow.com/users/6293857/rob-truxal"}, "edited": false, "score": 0, "creation_date": 1515622736, "post_id": 48197013, "comment_id": 83375076, "body": "My bad. That should be an <code>await</code>."}], "tags": [], "owner": {"reputation": 27029, "user_id": 1113207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UWak6.jpg?s=128&g=1", "display_name": "Mikhail Gerasimov", "link": "https://stackoverflow.com/users/1113207/mikhail-gerasimov"}, "is_accepted": false, "score": 0, "last_activity_date": 1515622639, "creation_date": 1515622639, "answer_id": 48197013, "question_id": 48196720, "link": "https://stackoverflow.com/questions/48196720/how-to-break-out-of-a-asyncio-coroutine-without-using-the-return-statement/48197013#48197013", "title": "How to break out of a asyncio coroutine without using the `return` statement?", "body": "<p>JFYI, I guess, you're doing something wrong.</p>\n\n<pre><code>yield from a_volitile_async_generator(x)\n</code></pre>\n\n<p>If <code>a_volitile_async_generator</code> is a real async generator, it won't work: you <a href=\"https://www.python.org/dev/peps/pep-0525/#asynchronous-yield-from\" rel=\"nofollow noreferrer\">can't use</a> <code>yield from</code> with it.</p>\n"}, {"comments": [{"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 0, "creation_date": 1515850460, "post_id": 48240352, "comment_id": 83462981, "body": "Added mainly because OP&#39;s self-answer got deleted, and comments are fragile."}], "tags": [], "owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "is_accepted": true, "score": 2, "last_activity_date": 1515850302, "creation_date": 1515850302, "answer_id": 48240352, "question_id": 48196720, "link": "https://stackoverflow.com/questions/48196720/how-to-break-out-of-a-asyncio-coroutine-without-using-the-return-statement/48240352#48240352", "title": "How to break out of a asyncio coroutine without using the `return` statement?", "body": "<p>As <a href=\"https://stackoverflow.com/questions/48196720/how-to-break-out-of-a-asyncio-coroutine-without-using-the-return-statement/48196983#comment83374777_48196720\">mentioned</a> by @dirn in the comments, you can replace your <code>raise StopAsyncIteration</code> line with a simple <code>break</code>:</p>\n\n<pre><code>async def f(x, result_queue, *, loop=loop):\n    while _some_condition() is True:\n        try:\n            foo_var = await a_volitile_async_generator(x)\n        except Exception:\n            print('it broked')\n            break\n        await result_queue.put(foo_var)\n</code></pre>\n"}], "owner": {"reputation": 4040, "user_id": 6293857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V50TV.png?s=128&g=1", "display_name": "Rob Truxal", "link": "https://stackoverflow.com/users/6293857/rob-truxal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3110, "favorite_count": 0, "accepted_answer_id": 48240352, "answer_count": 2, "score": 2, "last_activity_date": 1515850302, "creation_date": 1515621235, "last_edit_date": 1515622706, "question_id": 48196720, "link": "https://stackoverflow.com/questions/48196720/how-to-break-out-of-a-asyncio-coroutine-without-using-the-return-statement", "title": "How to break out of a asyncio coroutine without using the `return` statement?", "body": "<p>I'm having a bit of trouble deciding how to break out of this coroutine if the <code>except</code> statement catches. Normally, I would just use:  </p>\n\n<pre><code>def f(x):\n    try:\n        foo_var = next(a_volitile_generator(x))\n    except Exception:\n        print('it broked')\n        return\n    yield foo_var\n</code></pre>\n\n<p>However! I'm going to spawn a gazillion of these generator funcs, make them coroutines, and finally <code>Future</code>ize them &amp; load them into an event-loop. Here's the issue:  </p>\n\n<pre><code>loop = asyncio.get_event_loop()\nqueue = asyncio.Queue(maxsize=100)\n\nasync def f(x, result_queue, *, loop=loop):\n    while _some_condition() is True:\n        try:\n            foo_var = await a_volitile_async_generator(x)\n        except Exception:\n            print('it broked')\n            # HELP BELOW\n            raise StopAsyncIteration # &lt;--ONLY OPTION????????\n        await result_queue.put(foo_var)\n</code></pre>\n\n<p>returning anything <strong>into the event-loop</strong> is a no-no in <code>asyncio</code> because you'll break everything...even if that value is <code>None</code>.  </p>\n\n<p>Aside from that, let's also say I'd like to avoid raising <code>StopAsyncIteration</code>...I'm trying to figure out if that's the only way to do this or if I have other options:</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1515621293, "post_id": 48196707, "comment_id": 83374467, "body": "Is that date column in the index?"}, {"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1515621471, "post_id": 48196707, "comment_id": 83374550, "body": "will you ever have the same Stock listed more than twice?"}, {"owner": {"reputation": 549, "user_id": 7390912, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3eb330777ef0544fd6b328f6550eb66c?s=128&d=identicon&r=PG&f=1", "display_name": "MysterioProgrammer91", "link": "https://stackoverflow.com/users/7390912/mysterioprogrammer91"}, "edited": false, "score": 0, "creation_date": 1515621498, "post_id": 48196707, "comment_id": 83374560, "body": "Not for the same date"}, {"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1515621518, "post_id": 48196707, "comment_id": 83374566, "body": "but for different dates?"}], "answers": [{"comments": [{"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1515677812, "post_id": 48196820, "comment_id": 83397565, "body": "Another one of those Pandas functions that are super helpful that you don&#39;t know is there! Wen, can you add the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.shift.html\" rel=\"nofollow noreferrer\">documentation</a> to your answer?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1515678914, "post_id": 48196820, "comment_id": 83398218, "body": "@MattR Yes you are right , I should added at beginning . :-)"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 6, "last_activity_date": 1515678954, "last_edit_date": 1515678954, "creation_date": 1515621688, "answer_id": 48196820, "question_id": 48196707, "link": "https://stackoverflow.com/questions/48196707/finding-out-the-previous-index-value-of-a-value-in-a-column-in-pandas/48196820#48196820", "title": "Finding out the previous index value of a value in a column in pandas", "body": "<p>You can using <em><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.shift.html\" rel=\"nofollow noreferrer\">shift</a></em> </p>\n\n<pre><code>df['New']=df.reset_index().groupby('Stock')['index'].shift().values\ndf\nOut[472]: \n              Stock       New\n02/10/17        IBM       NaN\n02/10/17      Apple       NaN\n02/10/17     Google       NaN\n02/10/17  Microsoft       NaN\n02/10/17     Lenova       NaN\n02/10/17   Nintendo       NaN\n02/10/17       Sony       NaN\n02/10/17    Toshiba       NaN\n03/10/17        IBM  02/10/17\n03/10/17      Apple  02/10/17\n03/10/17     Google  02/10/17\n03/10/17  Microsoft  02/10/17\n03/10/17     Lenova  02/10/17\n03/10/17   Nintendo  02/10/17\n03/10/17       Sony  02/10/17\n03/10/17        BMW       NaN\n03/10/17   Mercedes       NaN\n04/10/17    Toshiba  02/10/17\n</code></pre>\n"}], "owner": {"reputation": 549, "user_id": 7390912, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3eb330777ef0544fd6b328f6550eb66c?s=128&d=identicon&r=PG&f=1", "display_name": "MysterioProgrammer91", "link": "https://stackoverflow.com/users/7390912/mysterioprogrammer91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 48196820, "answer_count": 1, "score": -2, "last_activity_date": 1515678954, "creation_date": 1515621175, "question_id": 48196707, "link": "https://stackoverflow.com/questions/48196707/finding-out-the-previous-index-value-of-a-value-in-a-column-in-pandas", "title": "Finding out the previous index value of a value in a column in pandas", "body": "<p>For a column \"stock\" in a pandas dataframe, I want to add a column called last_index which gives the value of the index value before for a given Stock:</p>\n\n<p>Input:</p>\n\n<pre><code>           Stock\n02/10/17    IBM\n02/10/17    Apple\n02/10/17    Google\n02/10/17    Microsoft\n02/10/17    Lenova\n02/10/17    Nintendo\n02/10/17    Sony\n02/10/17    Toshiba\n03/10/17    IBM\n03/10/17    Apple\n03/10/17    Google\n03/10/17    Microsoft\n03/10/17    Lenova\n03/10/17    Nintendo\n03/10/17    Sony\n03/10/17    BMW\n03/10/17    Mercedes\n04/10/17    Toshiba\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>               Stock    Last_index\n02/10/17    IBM \n02/10/17    Apple   \n02/10/17    Google  \n02/10/17    Microsoft   \n02/10/17    Lenova  \n02/10/17    Nintendo    \n02/10/17    Sony    \n02/10/17    Toshiba \n03/10/17    IBM         02/10/17\n03/10/17    Apple       02/10/17\n03/10/17    Google      02/10/17\n03/10/17    Microsoft   02/10/17\n03/10/17    Lenova      02/10/17\n03/10/17    Nintendo    02/10/17\n03/10/17    Sony        02/10/17\n03/10/17    BMW \n03/10/17    Mercedes    \n04/10/17    Toshiba     02/10/17\n</code></pre>\n\n<p>Many thanks.</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "regression"], "answers": [{"tags": [], "owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "is_accepted": true, "score": 2, "last_activity_date": 1515621221, "creation_date": 1515621221, "answer_id": 48196716, "question_id": 48196672, "link": "https://stackoverflow.com/questions/48196672/result-for-regression-not-correct/48196716#48196716", "title": "Result for Regression not correct", "body": "<p>Looks like you're getting the right X,Y coordinates, you're just plotting them out of order. Try <code>plt.scatter</code> instead of <code>plt.plot</code> to get just points instead of lines, to verify this. If you still want lines, you can pair-wise sort in the following way:</p>\n\n<pre><code>points = zip(x_train, y_learned)\npoints = sorted(points, key=lambda p: p[0])\nx_plot, y_plot = zip(*points)\nplt.plot(x_plot, y_plot, 'r')\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8047895, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-hxOSm4LQTVA/AAAAAAAAAAI/AAAAAAAAAA0/dR4OSPHOJHg/photo.jpg?sz=128", "display_name": "Maxung", "link": "https://stackoverflow.com/users/8047895/maxung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 48196716, "answer_count": 1, "score": 1, "last_activity_date": 1515622073, "creation_date": 1515621030, "last_edit_date": 1515622073, "question_id": 48196672, "link": "https://stackoverflow.com/questions/48196672/result-for-regression-not-correct", "title": "Result for Regression not correct", "body": "<p>I'm a beginner in machine learning (ML) and can't figure out why my regression is incorrect or not plotting correctly. This is what I have currently and most is taken from previous examples of a book which I'm working with. Would be nice if somebody could also explain where the formula for the cost function comes from.</p>\n\n<pre><code>import time\nimport csv\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import train_test_split\nimport tensorflow as tf\nimport numpy as np\n\n\ndef read_csv(filepath, bucket=7):\n\n    days_in_year = 365\n\n    freq = {}\n    for period in range(0, int(days_in_year / bucket)):\n        freq[period] = 0\n\n    with open(filepath, 'r') as csvfile:\n        csvreader = csv.reader(csvfile)\n        csvreader.__next__()\n        for row in csvreader:\n            if row[0] == '':\n                continue\n            t = time.strptime(row[0], \"%m/%d/%Y\")\n            if t.tm_year == 2014 and t.tm_yday &lt; (days_in_year-1):\n                freq[int(t.tm_yday / bucket)] += 1\n    print(\"finished reading input\")\n    return freq\n\n\nfreq = read_csv(\"311_data.csv\")\n\nx_dataset = list(freq.keys())\ny_dataset = list(freq.values())\n\nprint(x_dataset)\nprint(y_dataset)\n\n\ndef normalize(data):\n    y = np.empty(len(data))\n    count = 0\n    for x in data:\n        y[count] = (x-min(data))/(max(data)-min(data))\n        count += 1\n    return y\n\n\nx_dataset = normalize(x_dataset)\ny_dataset = normalize(y_dataset)\n\n(x_train, x_test, y_train, y_test) = train_test_split(x_dataset, y_dataset, train_size=0.7, test_size=0.3)\n\nlearning_rate = 0.01\ntraining_epochs = 40\nnum_coeffs = 9\nreg_lambda = 0.\n\nX = tf.placeholder(tf.float32)\nY = tf.placeholder(tf.float32)\n\n\ndef model(X, w):\n    terms = []\n    for i in range(num_coeffs):\n        term = tf.multiply(w[i], tf.pow(X, i))\n        terms.append(term)\n    return tf.add_n(terms)\n\n\nw = tf.Variable([0.] * num_coeffs, name=\"parameters\")\ny_model = model(X, w)\n\ncost = tf.div(tf.add(tf.reduce_sum(tf.square(Y-y_model)), tf.multiply(reg_lambda, tf.reduce_sum(tf.square(w)))),\n          2*x_train.size)\n\ntrain_op = tf.train.GradientDescentOptimizer(learning_rate).minimize(cost)\n\nsess = tf.Session()\ninit = tf.global_variables_initializer()\nsess.run(init)\n\nfor reg_lambda in np.linspace(0, 1, 100):\n    for epoch in range(training_epochs):\n            sess.run(train_op, feed_dict={X: x_train, Y: y_train})\n    final_cost = sess.run(cost, feed_dict={X: x_test, Y: y_test})\n    print('reg lambda ', reg_lambda)\n    print('final cost ', final_cost)\n\nw_val = sess.run(w)\nprint(w_val)\nsess.close()\n\nplt.scatter(x_train, y_train)\ny_learned = 0\n\nfor i in range(num_coeffs):\n    y_learned += w_val[i] * np.power(x_train, i)\n\nplt.plot(x_train, y_learned, 'r')\nplt.show()\n</code></pre>\n\n<p>And that is my result when plotting:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Qpr6y.png\" alt=\"plotting result\"></p>\n"}, {"tags": ["python", "python-3.x", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "edited": false, "score": 0, "creation_date": 1515622549, "post_id": 48196947, "comment_id": 83374985, "body": "He wants to toggle between fullscreen and not. Taking out the else statement would surely break the toggle."}], "tags": [], "owner": {"reputation": 57, "user_id": 8693370, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BCzU6yXT6zM/AAAAAAAAAAI/AAAAAAAAAHk/PGg7dkNHh8Q/photo.jpg?sz=128", "display_name": "v0rtex", "link": "https://stackoverflow.com/users/8693370/v0rtex"}, "is_accepted": false, "score": 0, "last_activity_date": 1515622316, "creation_date": 1515622316, "answer_id": 48196947, "question_id": 48196655, "link": "https://stackoverflow.com/questions/48196655/fullscreen-toggle-seems-to-instantly-go-back-again/48196947#48196947", "title": "Fullscreen toggle seems to instantly go back again", "body": "<p>I assume this is inside your loop. If so, every time the game refreshes, it will check for an input, and when it sees that K_1 is not pressed, fullscreen will be disabled again. You'd have to constantly hold done K_1. You need to just remove the else.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9200871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x9B5r.jpg?s=128&g=1", "display_name": "J Kroes", "link": "https://stackoverflow.com/users/9200871/j-kroes"}, "edited": false, "score": 1, "creation_date": 1515626184, "post_id": 48197055, "comment_id": 83376350, "body": "Thanks a lot. It was indeed triggering multiple times within the same pressing. Using KEYUP fixed that problem."}], "tags": [], "owner": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "is_accepted": true, "score": 0, "last_activity_date": 1515622884, "creation_date": 1515622884, "answer_id": 48197055, "question_id": 48196655, "link": "https://stackoverflow.com/questions/48196655/fullscreen-toggle-seems-to-instantly-go-back-again/48197055#48197055", "title": "Fullscreen toggle seems to instantly go back again", "body": "<p>It looks like you're checking each frame to see if your event key (<code>K_1</code>) is being held. Instead, you probably want to check for a KEY_UP or KEY_DOWN event. I'm not familiar with pygame - but I assume you could probably get that sort of information out of your <code>event</code> variable.</p>\n\n<p>Alternatively, keep a variable that detects when you're still holding the key - which may look something like this:</p>\n\n<pre><code># outside of the loop code\nholding_fullscreen = false\n\n# inside the loop code\nif event.key == K_1:\n    if not holding_fullscreen:\n        holding_fullscreen = true\n        if not fullscreen:  # more pythonic version of fullscreen == False\n            # set fullscreen\n        else:\n            # set windowed\nelse:\n    holding_fullscreen = False\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9200871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x9B5r.jpg?s=128&g=1", "display_name": "J Kroes", "link": "https://stackoverflow.com/users/9200871/j-kroes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 48197055, "answer_count": 2, "score": 1, "last_activity_date": 1515622884, "creation_date": 1515620938, "last_edit_date": 1515621125, "question_id": 48196655, "link": "https://stackoverflow.com/questions/48196655/fullscreen-toggle-seems-to-instantly-go-back-again", "title": "Fullscreen toggle seems to instantly go back again", "body": "<p>I'm new to python and i was trying to let the 1-button on the keyboard toggle fullscreen in an application using pygame. Somehow the else: statement causes it to instantly go back to windowed mode again. At least that is my understanding. Can anyone enlighten me why that happens and care to give an alternative method?\nThis is the code:</p>\n\n<pre><code># screen = pygame.display.set_mode((1024, 768))\n# fullscreen = False\nif event.key == K_1:\n    if fullscreen == False:\n        pygame.display.set_mode((1024, 768), FULLSCREEN)\n        fullscreen = True\n    else:\n        pygame.display.set_mode((1024, 768))\n        fullscreen = False\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1515620726, "post_id": 48196586, "comment_id": 83374213, "body": "it would be helpful to see what you tried and why the result was unsatisfactory."}], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1515622600, "post_id": 48196777, "comment_id": 83375007, "body": "Nice and succinct !"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 2, "last_activity_date": 1515621865, "last_edit_date": 1515621865, "creation_date": 1515621513, "answer_id": 48196777, "question_id": 48196586, "link": "https://stackoverflow.com/questions/48196586/pandas-groupby-selecting-only-two-values-based-on-2-groups-and-converting-rest-t/48196777#48196777", "title": "Pandas groupby selecting only two values based on 2 groups and converting rest to 0", "body": "<p>Do a <code>cumcount</code> grouped by <code>date(index)</code> and <code>Fruit</code>, then zero out rows where the count is larger than <code>1</code>:</p>\n\n<pre><code>df['QuanityTrimmed'] = df.Quantity.where(df.groupby([df.index, df.Fruit]).cumcount() &lt; 2, 0)\n\nprint(df)\n#          Fruit  Quantity  QuanityTrimmed\n#01/02/10  Apple         4               4\n#01/02/10  Apple         6               6\n#01/02/10  Apple        12               0\n#01/02/10   Pear         7               7\n#01/02/10  Grape         8               8\n#01/02/10  Grape         5               5\n#02/02/10  Apple         2               2\n#02/02/10  Fruit         6               6\n#02/02/10   Pear         8               8\n#02/02/10   Pear         5               5\n#02/02/10  Apple         2               2\n#02/02/10  Apple         2               0\n</code></pre>\n"}], "owner": {"reputation": 549, "user_id": 7390912, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3eb330777ef0544fd6b328f6550eb66c?s=128&d=identicon&r=PG&f=1", "display_name": "MysterioProgrammer91", "link": "https://stackoverflow.com/users/7390912/mysterioprogrammer91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 48196777, "answer_count": 1, "score": 0, "last_activity_date": 1515621865, "creation_date": 1515620663, "question_id": 48196586, "link": "https://stackoverflow.com/questions/48196586/pandas-groupby-selecting-only-two-values-based-on-2-groups-and-converting-rest-t", "title": "Pandas groupby selecting only two values based on 2 groups and converting rest to 0", "body": "<p>This is following on from my question here which was answered: <a href=\"https://stackoverflow.com/questions/48126766/pandas-groupby-selecting-only-one-value-based-on-2-groups-and-converting-rest-to\">Pandas groupby selecting only one value based on 2 groups and converting rest to 0</a></p>\n\n<p>I have a pandas data frame which has a datetime index which looks like this:</p>\n\n<p>df =</p>\n\n<pre><code>           Fruit    Quantity\n01/02/10    Apple   4\n01/02/10    Apple   6\n01/02/10    Apple   12\n01/02/10    Pear    7\n01/02/10    Grape   8\n01/02/10    Grape   5\n02/02/10    Apple   2\n02/02/10    Fruit   6\n02/02/10    Pear    8\n02/02/10    Pear    5\n02/02/10    Apple   2\n02/02/10    Apple   2\n</code></pre>\n\n<p>Now for each date and for each fruit I only want two values (preferably the top two) and the rest of the fruit for the date to remain zero. So desired output is as follows:</p>\n\n<pre><code>           Fruit    Quantity\n01/02/10    Apple   4\n01/02/10    Apple   6\n01/02/10    Apple   0\n01/02/10    Pear    7\n01/02/10    Grape   8\n01/02/10    Grape   5\n02/02/10    Apple   2\n02/02/10    Fruit   6\n02/02/10    Pear    8\n02/02/10    Pear    5\n02/02/10    Apple   2\n02/02/10    Apple   0\n</code></pre>\n\n<p>This is only a small example, but my main data frame has over 3 million rows and the fruit are not necessarily in order per date.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "numpy", "math"], "comments": [{"owner": {"reputation": 158, "user_id": 8839826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66bea9627c2ee99a5b7320e7ca1ddc14?s=128&d=identicon&r=PG&f=1", "display_name": "George_E -old", "link": "https://stackoverflow.com/users/8839826/george-e-old"}, "edited": false, "score": 0, "creation_date": 1515620743, "post_id": 48196567, "comment_id": 83374226, "body": "Can you not use absolute value? That will just make it positive, no if statements required"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515620807, "post_id": 48196567, "comment_id": 83374256, "body": "What package are you using for complex numbers?  It&#39;s not the native Python <code>complex</code> package, as that doesn&#39;t provide <code>imag()</code> as a function.  That directly uses <code>a.imag</code> for both LHS and RHS references."}, {"owner": {"reputation": 881, "user_id": 3071449, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Cextz.jpg?s=128&g=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/3071449/mac"}, "reply_to_user": {"reputation": 158, "user_id": 8839826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66bea9627c2ee99a5b7320e7ca1ddc14?s=128&d=identicon&r=PG&f=1", "display_name": "George_E -old", "link": "https://stackoverflow.com/users/8839826/george-e-old"}, "edited": false, "score": 0, "creation_date": 1515621288, "post_id": 48196567, "comment_id": 83374464, "body": "@George_E That doesn&#39;t really solve my problem as the real part still needs to be whatever it is. I don&#39;t use them separately. But I still need the imaginary part to be always positive. So I basically need to go inside q, change the negative imaginaries to positive and then use q elsewhere. If that makes sense"}], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 3071449, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Cextz.jpg?s=128&g=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/3071449/mac"}, "edited": false, "score": 0, "creation_date": 1515621536, "post_id": 48196623, "comment_id": 83374585, "body": "Hi That&#39;s seems to sort it, somewhat... What is the -1 and 1 in line 36 mean ?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 881, "user_id": 3071449, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Cextz.jpg?s=128&g=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/3071449/mac"}, "edited": false, "score": 1, "creation_date": 1515621666, "post_id": 48196623, "comment_id": 83374643, "body": "@Mac, we are multiplying the <code>image</code> part of complex numbers to <code>1</code> if it&#39;s not negative (i.e. it remains the same) or to <code>-1</code> if it&#39;s negative"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1515620800, "creation_date": 1515620800, "answer_id": 48196623, "question_id": 48196567, "link": "https://stackoverflow.com/questions/48196567/how-to-find-negative-imaginary-parts-of-values-in-an-array-then-turning-them-to/48196623#48196623", "title": "How to find negative imaginary parts of values in an array then turning them to positive?", "body": "<p>IIUC:</p>\n\n<pre><code>In [35]: a = np.array([1+1j, 2-2j, 3+3j, 4-4j])\n\nIn [36]: a.imag *= np.where(a.imag &lt; 0, -1, 1)\n\nIn [37]: a\nOut[37]: array([ 1.+1.j,  2.+2.j,  3.+3.j,  4.+4.j])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32943, "user_id": 765226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/b0Qnm.jpg?s=128&g=1", "display_name": "Alexis Olson", "link": "https://stackoverflow.com/users/765226/alexis-olson"}, "reply_to_user": {"reputation": 881, "user_id": 3071449, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Cextz.jpg?s=128&g=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/3071449/mac"}, "edited": false, "score": 0, "creation_date": 1515637696, "post_id": 48196705, "comment_id": 83379136, "body": "@Mac Not very familiar enough with python so I&#39;ll have to say no. :("}], "tags": [], "owner": {"reputation": 32943, "user_id": 765226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/b0Qnm.jpg?s=128&g=1", "display_name": "Alexis Olson", "link": "https://stackoverflow.com/users/765226/alexis-olson"}, "is_accepted": false, "score": 0, "last_activity_date": 1515621165, "creation_date": 1515621165, "answer_id": 48196705, "question_id": 48196567, "link": "https://stackoverflow.com/questions/48196567/how-to-find-negative-imaginary-parts-of-values-in-an-array-then-turning-them-to/48196705#48196705", "title": "How to find negative imaginary parts of values in an array then turning them to positive?", "body": "<p>You can't redefine a function that way. It would be like saying</p>\n\n<pre><code>sqrt(x) = 2*sqrt(x)\n</code></pre>\n\n<p>What you can do is reassign the value of <code>a</code> (not <code>imag(a)</code>).</p>\n\n<pre><code>if imag(a) &lt; 0\n    a = a - 2*imag(a)*j\n</code></pre>\n\n<p>For example, if <code>a = 3 - 5j</code>, then it would give you</p>\n\n<pre><code>3 - 5j - 2(-5)j = 3 + 5j\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64, "user_id": 5112950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc43d3050ceee22333f7a59774dfced6?s=128&d=identicon&r=PG&f=1", "display_name": "Keji Li", "link": "https://stackoverflow.com/users/5112950/keji-li"}, "reply_to_user": {"reputation": 881, "user_id": 3071449, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Cextz.jpg?s=128&g=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/3071449/mac"}, "edited": false, "score": 0, "creation_date": 1515682633, "post_id": 48196971, "comment_id": 83400884, "body": "@Mac I guess if you don&#39;t include it in a code block then copypaste destroys python indentation..."}], "tags": [], "owner": {"reputation": 64, "user_id": 5112950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc43d3050ceee22333f7a59774dfced6?s=128&d=identicon&r=PG&f=1", "display_name": "Keji Li", "link": "https://stackoverflow.com/users/5112950/keji-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1515682585, "last_edit_date": 1515682585, "creation_date": 1515622424, "answer_id": 48196971, "question_id": 48196567, "link": "https://stackoverflow.com/questions/48196567/how-to-find-negative-imaginary-parts-of-values-in-an-array-then-turning-them-to/48196971#48196971", "title": "How to find negative imaginary parts of values in an array then turning them to positive?", "body": "<p>It appears to be faster than doing subtraction. For a full function:</p>\n\n<pre><code>import numpy as np\n\ndef imag_abs(x):\n    mask = x.imag &lt; 0\n    x[mask] = np.conj(x[mask])\n    return x\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 3071449, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Cextz.jpg?s=128&g=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/3071449/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 48196623, "answer_count": 3, "score": 1, "last_activity_date": 1515682585, "creation_date": 1515620564, "last_edit_date": 1515620932, "question_id": 48196567, "link": "https://stackoverflow.com/questions/48196567/how-to-find-negative-imaginary-parts-of-values-in-an-array-then-turning-them-to", "title": "How to find negative imaginary parts of values in an array then turning them to positive?", "body": "<p>I have a function <code>a=x*V</code> where <code>x</code> assumes thousands of values as <code>x = arange(1,1000,0.1)</code> and <code>V</code> is a combination of other constants. These make <code>a</code> always complex (has nonzero real and imaginary parts). However, because <code>a</code> depends on other values, the <code>imag(a)</code> can be negative for some <code>x</code>'s. </p>\n\n<p>For what I am doing, however, I need <code>imag(a)</code> to be always positive, so I need to take the negative values and turn them into positive.  </p>\n\n<p>I have tried doing</p>\n\n<pre><code>if imag(a)&lt;0:\n    imag(a) = -1*imag(a)\n</code></pre>\n\n<p>That didn't seem to work because it gives me the error: <code>SyntaxError: Can't assign to function call</code>. I thought it was because it's an array so I tried <code>any()</code> and <code>all()</code>, but that didn't work either. </p>\n\n<p>I'm out of options now.</p>\n"}, {"tags": ["python", "module"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515620717, "post_id": 48196564, "comment_id": 83374206, "body": "There is no vanilla support for this in Python, as far as I know. I don&#39;t really understand why it would be necessary. Generally, automatically doing stuff is not the Python way. Explicit is better than implicit...."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1515620805, "post_id": 48196564, "comment_id": 83374254, "body": "You only need to import those things that you will be invoking.  If you want function <code>A</code>, but it depends on function <code>B</code>, you only need <code>from functions import A</code>."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1515620911, "post_id": 48196564, "comment_id": 83374304, "body": "<code>from useful_functions import *</code>?"}, {"owner": {"reputation": 2345, "user_id": 2348290, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b56fe07ccae6b4215b14ff7825a15cac?s=128&d=identicon&r=PG", "display_name": "jeffpkamp", "link": "https://stackoverflow.com/users/2348290/jeffpkamp"}, "edited": false, "score": 0, "creation_date": 1515621427, "post_id": 48196564, "comment_id": 83374532, "body": "Wow, Patrick Haugh is right.  Python automatically includes functions that are referenced... This is why I love python."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515622339, "post_id": 48196564, "comment_id": 83374902, "body": "@jeffpkamp OH so you meant in <code>my_module_with_B</code> you already import and use <code>A</code> from <code>useful_functions</code>? Yeah, no need to re-import that.  Note, when you <code>import useful_functions</code> <i>everything</i> in that module gets executed, including it&#39;s own import statements."}], "owner": {"reputation": 2345, "user_id": 2348290, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b56fe07ccae6b4215b14ff7825a15cac?s=128&d=identicon&r=PG", "display_name": "jeffpkamp", "link": "https://stackoverflow.com/users/2348290/jeffpkamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515623487, "creation_date": 1515620557, "last_edit_date": 1515623487, "question_id": 48196564, "link": "https://stackoverflow.com/questions/48196564/python-ensure-necessary-functions-are-imported-with-dependent-functions", "title": "python Ensure necessary functions are imported with dependent functions", "body": "<p>I have a python module I am writing with some generally useful functions that I import individually.  However, some of these functions will require helper functions that are shared between them.  Rather than copying the helper function into each main function that is dependent on it, is there a way I can ensure that the helper function is always imported with its dependent functions.</p>\n\n<p>for example I have function A  which generates an array for functions B,C, and D.  </p>\n\n<p>For example if I had a module named \nUseful_functions which had:</p>\n\n<pre><code>def a(n):\n    return n*5\n\ndef b(n):\n     return a(n)\n</code></pre>\n\n<p>in my script where I use the functions I could just do</p>\n\n<pre><code> from useful_functions import A,B\n</code></pre>\n\n<p>however I am looking for something like an <code>include a</code> statement that will ensure that if B,C, or D is ever imported then A will also be imported automatically.    </p>\n"}, {"tags": ["python", "numpy", "random", "probability"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1515620885, "post_id": 48196536, "comment_id": 83374293, "body": "Well you would have constant time in the first example if you choose randomly to define the boundary to be less than, or greater than, the initially picked value. Rather than assume it&#39;s greater than."}, {"owner": {"reputation": 1002, "user_id": 6464041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312ddefd8d15fec8ff6b0f12d7522454?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor Fekete", "link": "https://stackoverflow.com/users/6464041/g%c3%a1bor-fekete"}, "edited": false, "score": 0, "creation_date": 1515622692, "post_id": 48196536, "comment_id": 83375056, "body": "What would happen if you generate both of them again when they are equal?"}], "answers": [{"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515621627, "post_id": 48196711, "comment_id": 83374623, "body": "Consider the 0-9 range, as shown in the posted data.  wlog, assume that the first number is 5.  For the second number, we roll a D9, numbered 0-8 ... but we map <code>5</code> (the number already chosen) to <code>9</code>.  The second numbers are evenly balanced."}, {"owner": {"reputation": 133, "user_id": 9200746, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XTNWhU6yYVA/AAAAAAAAAAI/AAAAAAAAADI/25si_cw4sLc/photo.jpg?sz=128", "display_name": "Adel Redjimi", "link": "https://stackoverflow.com/users/9200746/adel-redjimi"}, "edited": false, "score": 0, "creation_date": 1515621830, "post_id": 48196711, "comment_id": 83374720, "body": "I don&#39;t think it&#39;s biased to the last item, and it is virtually rebuilding the index list with <code>x</code> removed."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1515622309, "post_id": 48196711, "comment_id": 83374895, "body": "@roganjosh Yes, and for all pairs where <code>x != y</code>, <code>y</code> is guaranteed <i>not</i> to be <code>9</code>. The <i>probability</i> for <code>y</code> being <code>9</code> is <i>exactly</i> the same as for any other allowed value."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1515623074, "post_id": 48196711, "comment_id": 83375204, "body": "I see it now and hang my head in shame :P"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1515632009, "post_id": 48196711, "comment_id": 83377929, "body": "Just curious: How would you generalize that from <code>2</code> to <code>k</code> numbers?"}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1515656093, "post_id": 48196711, "comment_id": 83384671, "body": "@PaulPanzer, I don&#39;t really see a way to expand this version to <code>k</code> values, you&#39;d probably need to do something like <code>np.argpartition(np.random.rand(n), k)[:k] + 1</code>"}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1515658130, "post_id": 48196711, "comment_id": 83385571, "body": "@PaulPanzer actually I was able to extend it to <code>k</code> values.  See below."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1515658369, "post_id": 48196711, "comment_id": 83385680, "body": "@DanielF I&#39;ve seen Divakar using that once or twice. Why the plus one?"}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1515658503, "post_id": 48196711, "comment_id": 83385729, "body": "@PaulPanzer Because I&#39;m jetlagged and mixed up the ouput format of <code>np.randint</code>"}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1515660233, "post_id": 48196711, "comment_id": 83386613, "body": "@PaulPanzer I now also added a generalization for my approach, but instead you could also just use <code>random.sample</code> with a <code>range</code>..."}], "tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": true, "score": 8, "last_activity_date": 1515669374, "last_edit_date": 1515669374, "creation_date": 1515621194, "answer_id": 48196711, "question_id": 48196536, "link": "https://stackoverflow.com/questions/48196536/uniformly-generating-random-pairs-of-different-integers/48196711#48196711", "title": "Uniformly generating random pairs of different integers", "body": "<p>How about this?</p>\n\n<pre><code>x = np.random.randint(low=0, high=nbr_values)\ny = np.random.randint(low=0, high=nbr_values - 1)\nif y == x:\n    y = nbr_values\n</code></pre>\n\n<p>The value for <code>x</code> is equally distributed among all the possible values, and the value for <code>y</code> is equally distributed among all the <em>remaining</em> values, with the current value for <code>x</code> standing in as the maximum value (could also be the minimum value, just use <code>low=1</code> in this case).</p>\n\n<p>Graphical approximation:</p>\n\n<pre><code>range                 0 - - - - - - - - - - - - - MAX\ndistribution for x    + + + + + + + + + + + + + + +\nrandom value for x                x\ndistribution for y    + + + + + +   + + + + + + + +\n                                  \\--------------&gt;\n</code></pre>\n\n<p>Random distribution of 1,000,000 pairs in range <code>0..5</code></p>\n\n<pre><code>0       33425   33147   33411   33340   33365\n33206   0       33537   33568   33679   33317\n33307   33284   0       33423   33121   33189\n33235   33303   32970   0       33347   33316\n33233   33946   33257   33272   0       33504\n33517   33203   33394   33221   32963   0\n</code></pre>\n\n<hr>\n\n<p>Instead of swapping <code>x</code> with <code>max</code>, we could also shift all the values for <code>y</code> if <code>y &gt;= x</code>, i.e. <code>if y &gt;= x: y += 1</code>, yielding the same distribution. This way, the above could also be generalized to more than two values, by comparing the current value to all the previous values and shifting it up accordingly. This requires sorting the drawn values, though, so complexity is a bit higher, about O(k\u00b2logk).</p>\n\n<pre><code>def draw(low, high, k):\n    drawn = []\n    for i in range(k):\n        y = random.randint(low, high - i)\n        for x in sorted(drawn):\n            if y &gt;= x:\n                y += 1\n        drawn.append(y)\n    return drawn\n</code></pre>\n\n<p>Tested this again with small values for <code>low</code> and <code>high</code> and 1,000,000 iterations, and the results look correct.</p>\n\n<p>Or, you could just use <a href=\"https://docs.python.org/3/library/random.html#random.sample\" rel=\"nofollow noreferrer\"><code>random.sample(range(low, high+1), k)</code></a>. I don't know how exactly this is implemented, but it is very fast, even for large values for upper bound and <code>k</code> close to the maximum number of values.</p>\n"}, {"comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1515659102, "post_id": 48202487, "comment_id": 83386023, "body": "Can&#39;t find fault with that (unless k is quite large)."}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1515659358, "post_id": 48202487, "comment_id": 83386151, "body": "@PaulPanzer, yeah I checked speed and it seems to be faster than <code>argpartition</code> as long as k &lt; .4n"}], "tags": [], "owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "is_accepted": false, "score": 4, "last_activity_date": 1515661171, "last_edit_date": 1515661171, "creation_date": 1515658595, "answer_id": 48202487, "question_id": 48196536, "link": "https://stackoverflow.com/questions/48196536/uniformly-generating-random-pairs-of-different-integers/48202487#48202487", "title": "Uniformly generating random pairs of different integers", "body": "<p>I extended the method of @tobias_k above to <code>k</code> values.</p>\n\n<pre><code>def uni_repl(n, k, s = 1000):\n    x = np.empty((k, s), dtype = int)\n    for i in range(k):\n        x[i] = np.random.randint(low = 0, high = n - k + i + 1, size = s)\n    for i in range(1, k):\n        x[:i][x[:i] == x[i]] = n - k + i\n    return x\n</code></pre>\n\n<p>testing:</p>\n\n<pre><code>test = np.zeros((5,5,5))\n\nnp.add.at(test, list(uni_repl(5, 3)), 1)\n\ntest\nOut[85]: \narray([[[     0.,      0.,      0.,      0.,      0.],\n        [     0.,      0.,  16304.,  16767.,  16622.],\n        [     0.,  16418.,      0.,  16631.,  16517.],\n        [     0.,  16688.,  16607.,      0.,  16495.],\n        [     0.,  16663.,  16544.,  16877.,      0.]],\n\n       [[     0.,      0.,  16736.,  16767.,  16668.],\n        [     0.,      0.,      0.,      0.,      0.],\n        [ 16862.,      0.,      0.,  16634.,  16632.],\n        [ 16791.,      0.,  16689.,      0.,  16557.],\n        [ 16566.,      0.,  16843.,  16864.,      0.]],\n\n       [[     0.,  16737.,      0.,  16638.,  16437.],\n        [ 16741.,      0.,      0.,  16545.,  16617.],\n        [     0.,      0.,      0.,      0.,      0.],\n        [ 16804.,  16923.,      0.,      0.,  16598.],\n        [ 16756.,  16850.,      0.,  16778.,      0.]],\n\n       [[     0.,  16777.,  16675.,      0.,  16760.],\n        [ 16454.,      0.,  16792.,      0.,  16669.],\n        [ 16476.,  16709.,      0.,      0.,  16677.],\n        [     0.,      0.,      0.,      0.,      0.],\n        [ 16680.,  16863.,  16640.,      0.,      0.]],\n\n       [[     0.,  16459.,  16446.,  16756.,      0.],\n        [ 16637.,      0.,  16626.,  16756.,      0.],\n        [ 16481.,  16773.,      0.,  16762.,      0.],\n        [ 16754.,  16531.,  16681.,      0.,      0.],\n        [     0.,      0.,      0.,      0.,      0.]]])\n</code></pre>\n\n<p>Compared to a method using <code>np.argpartition</code>, this seems to be faster as long as <code>k &lt; 0.4 * n</code></p>\n\n<pre><code>def uni_part(n, k, s = 1000):\n    x = np.random.rand(n, s)\n    return np.argpartition(x, k, axis = 0)[:k]\n\n%timeit uni_part(100, 40)\n100 loops, best of 3: 3.93 ms per loop\n\n%timeit uni_repl(100, 40)\n100 loops, best of 3: 3.76 ms per loop\n\n%timeit uni_part(100, 10)\n100 loops, best of 3: 3.55 ms per loop\n\n%timeit uni_repl(100, 10)\n1000 loops, best of 3: 425 \u00b5s per loop\n\n%timeit uni_part(100, 50)\n100 loops, best of 3: 4.08 ms per loop\n\n%timeit uni_repl(100, 50)\n100 loops, best of 3: 4.89 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 451, "user_id": 2379045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c62c868ace14fce772659f8162dfd2?s=128&d=identicon&r=PG", "display_name": "ybeltukov", "link": "https://stackoverflow.com/users/2379045/ybeltukov"}, "is_accepted": false, "score": 0, "last_activity_date": 1542228535, "creation_date": 1542228535, "answer_id": 53308496, "question_id": 48196536, "link": "https://stackoverflow.com/questions/48196536/uniformly-generating-random-pairs-of-different-integers/53308496#53308496", "title": "Uniformly generating random pairs of different integers", "body": "<p>Starting from Numpy 1.7.0 you can use <code>np.choice</code> with <code>replace=False</code>:</p>\n\n<pre><code>np.random.choice(10, 2, replace=False)\narray([2, 6])\n</code></pre>\n\n<p>Here is the distribution of 10000 samples:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hEK5d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hEK5d.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 133, "user_id": 9200746, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XTNWhU6yYVA/AAAAAAAAAAI/AAAAAAAAADI/25si_cw4sLc/photo.jpg?sz=128", "display_name": "Adel Redjimi", "link": "https://stackoverflow.com/users/9200746/adel-redjimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 1, "accepted_answer_id": 48196711, "answer_count": 3, "score": 3, "last_activity_date": 1542228535, "creation_date": 1515620438, "question_id": 48196536, "link": "https://stackoverflow.com/questions/48196536/uniformly-generating-random-pairs-of-different-integers", "title": "Uniformly generating random pairs of different integers", "body": "<h2>Task:</h2>\n\n<ul>\n<li>Generate a pair of random numbers <code>(i,j)</code> (order doesn't matter: <code>(i,j)</code> is equivalent to <code>(j,i)</code>).</li>\n<li>The pair must consist of two distinct values: <code>i != j</code></li>\n<li>Pairs must be uniformly distributed. In other words, the probability is the same for all the possible pairs.</li>\n<li>Do this at a constant time.</li>\n</ul>\n\n<h2>1st attempt</h2>\n\n<p>Constant time? <strong>YES</strong>. Uniformly distributed? <strong>NO</strong></p>\n\n<pre><code>x = np.random.randint(low=0, high=10 - 1)\ny = np.random.randint(low=x + 1, high=10)\n</code></pre>\n\n<p>Visualizing the samples (by disregarding the order) :</p>\n\n<p><a href=\"https://i.stack.imgur.com/jR7Be.png\" rel=\"nofollow noreferrer\">Samples visualization (not uniformly distributed)</a></p>\n\n<p>You can easily the effect of restricting the <code>y</code> to be larger than <code>x</code>, meaning higher pairs have higher probability (opacity here expresses density).</p>\n\n<h1>2nd attempt</h1>\n\n<p>Constant time? <strong>NO</strong>. Uniformly distributed? <strong>YES</strong></p>\n\n<pre><code>x = np.random.randint(low=0, high=nbr_values)\ny = np.random.randint(low=0, high=nbr_values)\n\nwhile x == y:\n  y = np.random.randint(low=0, high=nbr_values)\n</code></pre>\n\n<p>Visualizing the samples:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8JC7J.png\" rel=\"nofollow noreferrer\">Samples visualization (uniformly distributed)</a></p>\n\n<p><em>PS: it's not a homework, I'm experimenting with stochastic optimization techniques that use random neighbor generation using a swap operation.</em></p>\n"}, {"tags": ["python", "python-2.7", "raspberry-pi3", "pyvisa"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9200915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfd49077daba8021f29a65878e6d043?s=128&d=identicon&r=PG&f=1", "display_name": "Sakulas", "link": "https://stackoverflow.com/users/9200915/sakulas"}, "is_accepted": false, "score": 0, "last_activity_date": 1515665437, "creation_date": 1515665437, "answer_id": 48204460, "question_id": 48196521, "link": "https://stackoverflow.com/questions/48196521/pyvisa-py-on-raspberry-pi-attributeerror-module-object-has-no-attribute-reso/48204460#48204460", "title": "pyvisa-py on raspberry pi AttributeError: &#39;module&#39; object has no attribute &#39;ResourceManager&#39;", "body": "<p>\"In python 2.7, the import system will always use files in the working directory over the one in site-packages and as your file is named pyvisa.py when importing visa.py it picks your own module instead of the 'real' pyvisa module.\"MatthieuDartiailh from github</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 2596079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01WLN.jpg?s=128&g=1", "display_name": "Chad", "link": "https://stackoverflow.com/users/2596079/chad"}, "is_accepted": false, "score": 1, "last_activity_date": 1587075111, "creation_date": 1587075111, "answer_id": 61260910, "question_id": 48196521, "link": "https://stackoverflow.com/questions/48196521/pyvisa-py-on-raspberry-pi-attributeerror-module-object-has-no-attribute-reso/61260910#61260910", "title": "pyvisa-py on raspberry pi AttributeError: &#39;module&#39; object has no attribute &#39;ResourceManager&#39;", "body": "<p>visa.py module does not have ResourceManager() you must instead use pyvsa.py</p>\n\n<pre><code>import pyvisa\n\nrm = pyvisa.ResourceManager('@py')\na=rm.list_resources()\nprint(a)\n</code></pre>\n\n<p>There will be no error if you run this code, you should be able to print whatever instrument is connected.</p>\n"}], "owner": {"reputation": 1, "user_id": 9200915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfd49077daba8021f29a65878e6d043?s=128&d=identicon&r=PG&f=1", "display_name": "Sakulas", "link": "https://stackoverflow.com/users/9200915/sakulas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1587075111, "creation_date": 1515620400, "question_id": 48196521, "link": "https://stackoverflow.com/questions/48196521/pyvisa-py-on-raspberry-pi-attributeerror-module-object-has-no-attribute-reso", "title": "pyvisa-py on raspberry pi AttributeError: &#39;module&#39; object has no attribute &#39;ResourceManager&#39;", "body": "<p>py on a raspberry pi with python 2.7.9 and pip 1.5.6. I installed and uninstalled pyvisa and pyvisa-py several times, but the problems stay. I connected the KEITHLEY Multimeter 2000 per R232 to USB with the Raspberry.</p>\n\n<p>When I run the basic Code:\n<code>\nimport visa\nrm = visa.ResourceManager('@py')\na=rm.list_resources()\nprint(a)\n</code>\nI receive:\n<code>\nTraceback (most recent call last):\n  File \"pyvisa.py\", line 1, in &lt;module&gt;\n    import visa\n  File \"/usr/local/lib/python2.7/dist-packages/visa.py\", line 16, in &lt;module&gt;\n    from pyvisa import logger, __version__, log_to_screen, constants\n  File \"/home/pi/pyvisa.py\", line 2, in &lt;module&gt;\n    rm = visa.ResourceManager('@py')\nAttributeError: 'module' object has no attribute 'ResourceManager'\n</code></p>\n\n<p>as well when I try</p>\n\n<p><code>python -m visa info</code></p>\n\n<p><code>\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/usr/local/lib/python2.7/dist-packages/visa.py\", line 16, in &lt;module&gt;\n    from pyvisa import logger, __version__, log_to_screen, constants\n  File \"pyvisa.py\", line 1, in &lt;module&gt;\n    import visa\n  File \"/usr/local/lib/python2.7/dist-packages/visa.py\", line 16, in &lt;module&gt;\n    from pyvisa import logger, __version__, log_to_screen, constants\nImportError: cannot import name logger\n</code>\nOn the other hand i can't upgrade, because the requirements are already up-to-date.\n<code>\npip install pyvisa-py --upgrade\nRequirement already up-to-date: pyvisa-py in /usr/local/lib/python2.7/dist-packages\nRequirement already up-to-date: pyvisa&gt;=1.8 in /usr/local/lib/python2.7/dist-packages (from pyvisa-py)\nRequirement already up-to-date: enum34 in /usr/local/lib/python2.7/dist-packages (from pyvisa&gt;=1.8-&gt;pyvisa-py)\n</code>\nI would be very thankfull if somebody could help me with this issue.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515620589, "post_id": 48196510, "comment_id": 83374145, "body": "Can I have 5-10 rows of your input? That would help."}, {"owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515621035, "post_id": 48196510, "comment_id": 83374362, "body": "I just added it @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515621120, "post_id": 48196510, "comment_id": 83374390, "body": "Can you open it in notepad or sublime text and copy along with the delimiters?"}, {"owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515621204, "post_id": 48196510, "comment_id": 83374433, "body": "Done! Now is it okey? @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515621448, "post_id": 48196510, "comment_id": 83374538, "body": "Okay, and where do you want this output to go?"}, {"owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515621531, "post_id": 48196510, "comment_id": 83374576, "body": "I just added the output I want! @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1515622683, "last_edit_date": 1515622683, "creation_date": 1515621646, "answer_id": 48196815, "question_id": 48196510, "link": "https://stackoverflow.com/questions/48196510/taking-the-sum-and-mean-of-multiple-columns-and-appending-the-result-as-a-single/48196815#48196815", "title": "Taking the sum and mean of multiple columns and appending the result as a single row", "body": "<p>Define your sum columns and mean columns - </p>\n\n<pre><code>s = ['Subastas', 'Impresiones_exchange', 'Importe_a_pagar_a_medio']\nm = ['Fill_rate', 'ECPM_medio']\n</code></pre>\n\n<p>Next, slice and compute - </p>\n\n<pre><code>i = df1[s].sum()\ni\n\nSubastas                   26823038.00\nImpresiones_exchange         143590.00\nImporte_a_pagar_a_medio          63.74\ndtype: float64\n</code></pre>\n\n<p></p>\n\n<pre><code>j = df1[m].mean()\nj\n\nFill_rate     0.606\nECPM_medio    0.450\ndtype: float64\n</code></pre>\n\n<p>Concatenate the two - </p>\n\n<pre><code>v = pd.concat([i, j])\nv\n\nSubastas                   2.682304e+07\nImpresiones_exchange       1.435900e+05\nImporte_a_pagar_a_medio    6.374000e+01\nFill_rate                  6.060000e-01\nECPM_medio                 4.500000e-01\ndtype: float64\n</code></pre>\n\n<p>And reshape your output - </p>\n\n<pre><code>df = pd.DataFrame(v.values[:, None].T, index=['Total'], columns=v.index)\ndf\n\n         Subastas  Impresiones_exchange  Importe_a_pagar_a_medio  Fill_rate  \\\nTotal  26823038.0              143590.0                    63.74      0.606   \n\n       ECPM_medio  \nTotal        0.45 \n</code></pre>\n\n<p>To write to an existing CSV, use the <code>a</code>ppend mode - </p>\n\n<pre><code>df.to_csv('file.csv', mode='a')\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 48196815, "answer_count": 1, "score": 0, "last_activity_date": 1515623096, "creation_date": 1515620355, "last_edit_date": 1515623096, "question_id": 48196510, "link": "https://stackoverflow.com/questions/48196510/taking-the-sum-and-mean-of-multiple-columns-and-appending-the-result-as-a-single", "title": "Taking the sum and mean of multiple columns and appending the result as a single row", "body": "<p>I read a csv file and I want to create a new row with some results as a <code>sum()</code>for 3 columns and a <code>mean()</code> for the rest columns. The problem is that my output is something like this:</p>\n\n<pre><code>Total                   1596260396              \nTotal2                      30453841            \nTota3                           3.024863813     \nTotal4                              19742.04    \nTotal5                                  0.733696498\n</code></pre>\n\n<p>And I\u00b4m looking for this:</p>\n\n<pre><code>Total 1596260396 30453841 3.024863813 19742.04 0.733696498\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code># encoding=utf8  \nfrom io import StringIO\nimport pandas as pd\nimport os\nfrom pandas import ExcelWriter\nimport sys\nreload(sys)\nsys.setdefaultencoding('utf-8')\n\ndf1 = pd.read_csv(\"este_mes.csv\", sep=',')\ndf1.loc['Total'] = pd.Series(df1['Subastas'].sum(), index = ['Subastas'])\ndf1.loc['Total2'] = pd.Series(df1['Impresiones_exchange'].sum(), index = ['Impresiones_exchange'])\ndf1.loc['Tota3'] = pd.Series(df1['Fill_rate'].mean(), index = ['Fill_rate'])\ndf1.loc['Total4'] = pd.Series(df1['Importe_a_pagar_a_medio'].sum(), index = ['Importe_a_pagar_a_medio'])\ndf1.loc['Total5'] = pd.Series(df1['ECPM_medio'].mean(), index = ['ECPM_medio'])\n</code></pre>\n\n<p>Some rows of my csv:</p>\n\n<pre><code>Cliente,Fecha,Status,cl_fecha,Subastas,Impresiones_exchange,Fill_rate,Importe_a_pagar_a_medio,ECPM_medio\njjj,01/01/2017,Alerta Fillrate - Revenue - Imp Vendidas,jjj_01/01/2017,2277331,25843,1.13,10.36,0.4\njjj,02/01/2017,Alerta Fillrate -- Incremento Revenue - Imp Vendidas - Subastadas,jjj_02/01/2017,6747816,42957,0.64,17.9,0.42\njjj,03/01/2017,Alerta Fillrate - Revenue - Imp Vendidas:  aumento eCPM-- CRITICO,jjj_03/01/2017,6397915,27926,0.44,13.1,0.47\njjj,04/01/2017,Estable: descenso Revenue e Imp Vendidas,jjj_04/01/2017,5764124,22940,0.4,11.14,0.49\njjj,05/01/2017,Estable,jjj_05/01/2017,5635852,23924,0.42,11.24,0.47\n</code></pre>\n\n<p>Output I want:</p>\n\n<pre><code>Cliente,Fecha,Status,cl_fecha,Subastas,Impresiones_exchange,Fill_rate,Importe_a_pagar_a_medio,ECPM_medio\n    jjj,01/01/2017,Alerta Fillrate - Revenue - Imp Vendidas,jjj_01/01/2017,2277331,25843,1.13,10.36,0.4\n    jjj,02/01/2017,Alerta Fillrate -- Incremento Revenue - Imp Vendidas - Subastadas,jjj_02/01/2017,6747816,42957,0.64,17.9,0.42\n    jjj,03/01/2017,Alerta Fillrate - Revenue - Imp Vendidas:  aumento eCPM-- CRITICO,jjj_03/01/2017,6397915,27926,0.44,13.1,0.47\n    jjj,04/01/2017,Estable: descenso Revenue e Imp Vendidas,jjj_04/01/2017,5764124,22940,0.4,11.14,0.49\n    jjj,05/01/2017,Estable,jjj_05/01/2017,5635852,23924,0.42,11.24,0.47\n\n    Total 1596260396 30453841 3.024863813 19742.04 0.733696498\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 2, "last_activity_date": 1515620437, "creation_date": 1515620437, "answer_id": 48196535, "question_id": 48196497, "link": "https://stackoverflow.com/questions/48196497/min-max-over-numbers-and-strings-in-row/48196535#48196535", "title": "Min/Max over numbers and strings in row", "body": "<p>You can get this done with a little <code>iloc</code> slicing magic. </p>\n\n<pre><code>df['Max'] = df.iloc[:, 1:].max(axis=1)\ndf['Min'] = df.iloc[:, 1:].min(axis=1)\ndf['Max - Min'] = df['Max'] - df['Min']\n</code></pre>\n\n<p></p>\n\n<pre><code>df    \n    County  Year1  Year2  Year3  Year4    Max    Min  Max - Min\n1  Autauga  54660  55253  51253  56253  56253  51253       5000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "is_accepted": true, "score": 2, "last_activity_date": 1515631600, "last_edit_date": 1515631600, "creation_date": 1515620676, "answer_id": 48196590, "question_id": 48196497, "link": "https://stackoverflow.com/questions/48196497/min-max-over-numbers-and-strings-in-row/48196590#48196590", "title": "Min/Max over numbers and strings in row", "body": "<p>You can also specify that you only want to do it on numerical elements.</p>\n\n<pre><code>df['Max'] = df.max(axis=1, numeric_only=True)\ndf['Min'] = df.min(axis=1, numeric_only=True)\ndf['Max - Min'] = df['Max'] - df['Min']\n\n# if you only need \"Max - Min\"\ndf['Max - Min'] = df.max(1, numeric_only=True) - df.min(1, numeric_only=True)\n</code></pre>\n\n<p>By default, <code>max</code> function will try to use everything. With the extra argument, it will only includes columns that contains floats, int, and boolean values in the calculation. Read more about it at <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.max.html\" rel=\"nofollow noreferrer\"><code>DataFrame.max</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "edited": false, "score": 0, "creation_date": 1515621367, "post_id": 48196708, "comment_id": 83374503, "body": "Could you tell me does the double aster ** does?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "edited": false, "score": 0, "creation_date": 1515621421, "post_id": 48196708, "comment_id": 83374529, "body": "@Tai, <a href=\"https://stackoverflow.com/questions/36901/what-does-double-star-asterisk-and-star-asterisk-do-for-parameters\" title=\"what does double star asterisk and star asterisk do for parameters\">stackoverflow.com/questions/36901/&hellip;</a>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "edited": false, "score": 0, "creation_date": 1515621533, "post_id": 48196708, "comment_id": 83374580, "body": "@Tai, you are welcome. I thought it would be too much for a comment, so i decided to give you a link to the comprehensive answer..."}, {"owner": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "edited": false, "score": 0, "creation_date": 1515621614, "post_id": 48196708, "comment_id": 83374620, "body": "Sure sure. I thought it was something specific to pandas at first, but I now I know."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1515621175, "creation_date": 1515621175, "answer_id": 48196708, "question_id": 48196497, "link": "https://stackoverflow.com/questions/48196497/min-max-over-numbers-and-strings-in-row/48196708#48196708", "title": "Min/Max over numbers and strings in row", "body": "<p>IIUC:</p>\n\n<pre><code>In [43]: df = df.assign(**{'Max-Min':df.max(1)-df.min(1)})\n\nIn [44]: df\nOut[44]:\n    County  Year1  Year2  Year3  Year4  Max-Min\n1  Autauga  54660  55253  51253  56253     5000\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 4502870, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f5199961d9ce85bb0f7f0d296e59e24e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4502870/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 48196590, "answer_count": 3, "score": 1, "last_activity_date": 1515631600, "creation_date": 1515620309, "question_id": 48196497, "link": "https://stackoverflow.com/questions/48196497/min-max-over-numbers-and-strings-in-row", "title": "Min/Max over numbers and strings in row", "body": "<p>I am having a long dataset and would like to get min/max values in a row:</p>\n\n<pre><code>    County   Year1   Year2   Year3   Year4\n1   Autauga  54660   55253   51253   56253       \n</code></pre>\n\n<p>Output should look like</p>\n\n<pre><code>    County   Year1   Year2   Year3   Year4   Min     Max    Max-Min\n1   Autauga  54660   55253   51253   56253   51253   56253  5000\n</code></pre>\n\n<p>My first shot yielded a string as max value (I've read about all the reasons on the forum):</p>\n\n<pre><code>df['Max'] = df.max(axis=1)\n</code></pre>\n\n<p>1) How can I exclude my first column so the max function runs correctly (I still need the county in my output)?</p>\n\n<p>2) How can I run the max,min functions AND calc the difference of each value in one go? </p>\n\n<p>Cheers,\nP</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1515620112, "post_id": 48196419, "comment_id": 83373899, "body": "&quot;more pythonic (oneliner maybe) &quot; just in general, do not consider one-liners synonymous with pythonic"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1515620370, "post_id": 48196419, "comment_id": 83374033, "body": "... but of course, you could do: <code>df[~logic].append(df[logic].sum(), ignore_index=True)</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515620888, "post_id": 48196419, "comment_id": 83374294, "body": "Err, didn&#39;t see the requirement for dropping those other rows :-("}, {"owner": {"reputation": 756, "user_id": 9200834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c85e3004a3a7d7166b21229b30a5db?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/9200834/pythonnoob"}, "edited": false, "score": 0, "creation_date": 1515622412, "post_id": 48196419, "comment_id": 83374931, "body": "What about by using the &#180;apply&#180; or &#180;agg&#180; function?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515623126, "post_id": 48196419, "comment_id": 83375233, "body": "@PythonNoob Nope, juan&#39;s solution is the best."}], "owner": {"reputation": 756, "user_id": 9200834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c85e3004a3a7d7166b21229b30a5db?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/9200834/pythonnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1515620737, "creation_date": 1515619966, "question_id": 48196419, "link": "https://stackoverflow.com/questions/48196419/pandas-conditional-computation-based-on-multiple-columns", "title": "Pandas conditional computation based on multiple columns", "body": "<p>Considering this dataframe:</p>\n\n<pre><code>data = {'A':[1.5, 2, 3, 4], 'B':[3, 5, 8, 7], 'C':['abc', 'def', 'zyw', 'lol'], 'D':['AAA', 'AAA', 'BBB', 'CCC']}\n\ndf = pd.DataFrame(data)\n</code></pre>\n\n<p>I'd like to compute the sum of the <code>A</code> column based on condition <code>x &lt;= 2.5 &amp; D == 'AAA'</code> and append the result to the same dataframe, but without the rows that match the condition. The strings should be concatenated.</p>\n\n<p>So, I came up with this:</p>\n\n<pre><code>logic = (df['A'] &lt;= 2.5) &amp; (df['D'] == 'AAA')\ndf_1 = df[logic].sum()\ndf_2 = df[~logic]\ndf_2.append(df_1, ignore_index=True)\n</code></pre>\n\n<p>returning</p>\n\n<pre><code>    A   B   C       D\n0   3.0 8   zyw    BBB\n1   4.0 7   lol    CCC\n2   3.5 8   abcdef AAAAAA\n</code></pre>\n\n<p>Is there any other, more pythonic (oneliner maybe) solution?</p>\n"}, {"tags": ["python", "module"], "comments": [{"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1515620552, "post_id": 48196412, "comment_id": 83374120, "body": "That&#39;s not how you define a function <code>def custom_function:</code>"}], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1515620951, "post_id": 48196631, "comment_id": 83374321, "body": "This means running the script <code>launcher.py</code> will only work when executing from within the same directory.  Not ideal."}, {"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1515621236, "post_id": 48196631, "comment_id": 83374442, "body": "Hmm, what do you exactly mean? How is your solution different in that manner?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1515621353, "post_id": 48196631, "comment_id": 83374500, "body": "Try your approach and see.  Unless you execute from the same directory as the script is contained in, this will also fail with an <code>ImportError</code>."}, {"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1515621533, "post_id": 48196631, "comment_id": 83374581, "body": "I&#39;m launching <code>launcher.py</code> from a different directory and it looks fine, or did I get you wrong?"}], "tags": [], "owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "is_accepted": false, "score": -1, "last_activity_date": 1515620974, "last_edit_date": 1515620974, "creation_date": 1515620829, "answer_id": 48196631, "question_id": 48196412, "link": "https://stackoverflow.com/questions/48196412/trouble-with-custom-imports-python3/48196631#48196631", "title": "trouble with custom imports Python3", "body": "<p>Actually, if you just put an empty file called <code>__init__.py</code> file, python will treat the directory as a package and you can import it with the dot notation.</p>\n\n<pre><code>__init__.py\ncustom_module2.py\ncustom_module.py\n</code></pre>\n\n<p>then from launcher.py</p>\n\n<pre><code>from folder.custom_module import custom_function\ncustom_function()\n</code></pre>\n\n<blockquote>\n  <p>The <strong>init</strong>.py files are required to make Python treat the directories as containing packages; this is done to prevent directories with a common name, such as string, from unintentionally hiding valid modules that occur later on the module search path. In the simplest case, <strong>init</strong>.py can just be an empty file, but it can also execute initialization code for the package or set the <strong>all</strong> variable, described later.</p>\n</blockquote>\n\n<p>Source: <a href=\"https://docs.python.org/3/tutorial/modules.html#Packages\" rel=\"nofollow noreferrer\">https://docs.python.org/3/tutorial/modules.html#Packages</a></p>\n"}], "owner": {"reputation": 9, "user_id": 8073074, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0OqkQIOqMW4/AAAAAAAAAAI/AAAAAAAAA5k/fIhv4MmXjvM/photo.jpg?sz=128", "display_name": "Card Wallets", "link": "https://stackoverflow.com/users/8073074/card-wallets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525500760, "creation_date": 1515619928, "last_edit_date": 1525500760, "question_id": 48196412, "link": "https://stackoverflow.com/questions/48196412/trouble-with-custom-imports-python3", "title": "trouble with custom imports Python3", "body": "<p>I am trying to import my own files in Python3. My directory looks like this:</p>\n\n<pre><code>/path/folder/__init__.py\n/path/folder/custom_module2.py\n/path/folder/custom_module.py\n/path/launcher.py\n</code></pre>\n\n<p>init:</p>\n\n<pre><code>import custom_module\n</code></pre>\n\n<p>custom_module:</p>\n\n<pre><code>import custom_module2\ndef custom_function:\n    custom_module2.custom_function()\n    print('world')\n</code></pre>\n\n<p>custom_module2:</p>\n\n<pre><code>def custom_function2:\n    print('hello')\n</code></pre>\n\n<p>launcher:</p>\n\n<pre><code>import folder\ncustom_function()\n</code></pre>\n\n<p>it says that there is no module named custom_module</p>\n"}, {"tags": ["python", "pandas", "dataframe", "rolling-computation", "future-warning"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1515619904, "post_id": 48196381, "comment_id": 83373806, "body": "did you try to follow Pandas&#39;s advise from the warning?"}, {"owner": {"reputation": 77, "user_id": 9134690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e737e23884c3bf62870c310b39f041?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Abbase", "link": "https://stackoverflow.com/users/9134690/mohamed-abbase"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1515620372, "post_id": 48196381, "comment_id": 83374034, "body": "yes but got the following error TypeError: rolling() missing 1 required positional argument: &#39;self&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9134690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e737e23884c3bf62870c310b39f041?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Abbase", "link": "https://stackoverflow.com/users/9134690/mohamed-abbase"}, "edited": false, "score": 0, "creation_date": 1515621113, "post_id": 48196588, "comment_id": 83374388, "body": "thanks for your replay, i got this error  ( AttributeError: module &#39;pandas&#39; has no attribute &#39;rolling&#39;)"}, {"owner": {"reputation": 334, "user_id": 3022514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a2302d9dd378cafecbeec0f2dd8474?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick O&#39;Connor", "link": "https://stackoverflow.com/users/3022514/patrick-oconnor"}, "edited": false, "score": 1, "creation_date": 1515621424, "post_id": 48196588, "comment_id": 83374531, "body": "You should be calling the series and not Pandas itself, so <code>df2[&#39;High&#39;].rolling(window = 9).max()</code>"}, {"owner": {"reputation": 77, "user_id": 9134690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e737e23884c3bf62870c310b39f041?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Abbase", "link": "https://stackoverflow.com/users/9134690/mohamed-abbase"}, "reply_to_user": {"reputation": 334, "user_id": 3022514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a2302d9dd378cafecbeec0f2dd8474?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick O&#39;Connor", "link": "https://stackoverflow.com/users/3022514/patrick-oconnor"}, "edited": false, "score": 1, "creation_date": 1515622778, "post_id": 48196588, "comment_id": 83375091, "body": "@PatrickO&#39;Connor now it works great .. great thanks for you all brothers"}], "tags": [], "owner": {"reputation": 864, "user_id": 8412492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1119c8288d05e5935ec8bc4e11e9c04?s=128&d=identicon&r=PG&f=1", "display_name": "emmet02", "link": "https://stackoverflow.com/users/8412492/emmet02"}, "is_accepted": true, "score": 2, "last_activity_date": 1516093217, "last_edit_date": 1516093217, "creation_date": 1515620673, "answer_id": 48196588, "question_id": 48196381, "link": "https://stackoverflow.com/questions/48196381/pandas-dataframe-rolling-max-futurewarning-error/48196588#48196588", "title": "Pandas Dataframe rolling_max futurewarning error", "body": "<p>Change the pd.rolling_max() method calls to .rolling().max() etc etc</p>\n\n<p>Same for mins.</p>\n\n<pre><code>pd.rolling_max(df2['High'], window=9)\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>df2['High'].rolling(window=9).max()\n</code></pre>\n\n<p>The deprecation warning suggests exactly this, that the rolling_min and rolling_max functions will not be supported in future versions of pandas.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 9134690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e737e23884c3bf62870c310b39f041?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Abbase", "link": "https://stackoverflow.com/users/9134690/mohamed-abbase"}, "edited": false, "score": 0, "creation_date": 1515756792, "post_id": 48196960, "comment_id": 83432376, "body": "it&#39;s better for me to use one line command, but unfortunately it didn&#39;t worked for me, i got KeyError: &#39;tenkan_sen&#39; .. i tried df2[tenkan_sen] = df2.rolling(9).max().eval(&quot;tenkan_sen=(High+Low)/2&quot;, inplace=False) but did&#39;t work .. also tried to replace False with True but also error ..  if you can provide another formatting .. i will be happy"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1515758324, "last_edit_date": 1515758324, "creation_date": 1515622359, "answer_id": 48196960, "question_id": 48196381, "link": "https://stackoverflow.com/questions/48196381/pandas-dataframe-rolling-max-futurewarning-error/48196960#48196960", "title": "Pandas Dataframe rolling_max futurewarning error", "body": "<p>IIUC you can do something like this:</p>\n\n<pre><code>res = df2.rolling(9).max().eval(\"tenkan_sen=(High+Low)/2\", inplace=False)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>In [66]: res\nOut[66]:\n      BaseVolume     Close      High       Low      Open            TimeStamp        Volume  tenkan_sen\n0            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:10:00           NaN         NaN\n1            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:15:00           NaN         NaN\n2            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:20:00           NaN         NaN\n3            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:25:00           NaN         NaN\n4            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:30:00           NaN         NaN\n5            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:35:00           NaN         NaN\n6            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:40:00           NaN         NaN\n7            NaN       NaN       NaN       NaN       NaN  2017-12-21T22:45:00           NaN         NaN\n8      12.435173  0.001025  0.001034  0.001017  0.001034  2017-12-21T22:50:00  12186.096426    0.001026\n9      12.435173  0.001025  0.001027  0.001017  0.001020  2017-12-21T22:55:00  12186.096426    0.001022\n...          ...       ...       ...       ...       ...                  ...           ...         ...\n5750    2.671288  0.000850  0.000850  0.000842  0.000844  2018-01-10T21:20:00   3193.127754    0.000846\n5751    2.671288  0.000850  0.000850  0.000841  0.000842  2018-01-10T21:25:00   3193.127754    0.000846\n5752    2.671288  0.000850  0.000850  0.000841  0.000842  2018-01-10T21:30:00   3193.127754    0.000846\n5753    2.368549  0.000850  0.000850  0.000841  0.000842  2018-01-10T21:35:00   2816.322385    0.000846\n5754    3.649176  0.000850  0.000850  0.000841  0.000842  2018-01-10T21:40:00   4386.363763    0.000846\n5755    3.649176  0.000850  0.000850  0.000841  0.000842  2018-01-10T21:45:00   4386.363763    0.000846\n5756    3.649176  0.000850  0.000850  0.000840  0.000842  2018-01-10T21:50:00   4386.363763    0.000845\n5757    3.649176  0.000842  0.000842  0.000839  0.000842  2018-01-10T21:55:00   4386.363763    0.000840\n5758    7.082856  0.000842  0.000842  0.000839  0.000841  2018-01-10T22:00:00   8535.312485    0.000840\n5759    7.082856  0.000841  0.000842  0.000839  0.000841  2018-01-10T22:05:00   8535.312485    0.000840\n\n[5760 rows x 8 columns]\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9134690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e737e23884c3bf62870c310b39f041?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Abbase", "link": "https://stackoverflow.com/users/9134690/mohamed-abbase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3368, "favorite_count": 0, "accepted_answer_id": 48196588, "answer_count": 2, "score": 2, "last_activity_date": 1550444868, "creation_date": 1515619764, "last_edit_date": 1550444868, "question_id": 48196381, "link": "https://stackoverflow.com/questions/48196381/pandas-dataframe-rolling-max-futurewarning-error", "title": "Pandas Dataframe rolling_max futurewarning error", "body": "<p>i have a python pandas code to parse url Json data from api to dataframe </p>\n\n<pre><code>import pandas as pd\nimport json\nimport urllib.request\nimport os\nfrom pandas import DataFrame\n\n    with urllib.request.urlopen(\n                            \"https://bittrex.com/Api/v2.0/pub/market/GetTicks?marketName=BTC-WAVES&amp;tickInterval=fiveMin\") as URL:\n        data = json.loads(URL.read().decode())\n        df2 = pd.DataFrame(data=data['result'])\n        df2.rename(columns={'BV': 'BaseVolume', 'C': 'Close', 'H': 'High', 'L': 'Low', 'O': 'Open', 'T': 'TimeStamp','V': 'Volume'}, inplace=True)\n\n    high_prices = df2['High']\n    close_prices = df2['Close']\n    low_prices = df2['Low']\n    TimeStamp = df2.index\n    nine_period_high = pd.rolling_max(df2['High'], window=9)\n    nine_period_low = pd.rolling_min(df2['Low'], window=9)\n    df2['tenkan_sen'] = (nine_period_high + nine_period_low) /2\n\n    # Kijun-sen (Base Line): (26-period high + 26-period low)/2))\n    period26_high = pd.rolling_max(high_prices, window=26)\n    period26_low = pd.rolling_min(low_prices, window=26)\n    df2['kijun_sen'] = (period26_high + period26_low) / 2\n\n    # Senkou Span A (Leading Span A): (Conversion Line + Base Line)/2))\n    df2['senkou_span_a'] = ((df2['tenkan_sen'] + df2['kijun_sen']) / 2).shift(26)\n\n    # Senkou Span B (Leading Span B): (52-period high + 52-period low)/2))\n    period52_high = pd.rolling_max(high_prices, window=52)\n    period52_low = pd.rolling_min(low_prices, window=52)\n    df2['senkou_span_b'] = ((period52_high + period52_low) / 2).shift(26)\n\nprint('df2')\nprint('DONE')\n</code></pre>\n\n<p>it works perfect to me except this error (Not: it doesn't effect result, but i am worry from this future warning.</p>\n\n<pre><code>FutureWarning: pd.rolling_max is deprecated for Series and will be removed in a future version, replace with \n    Series.rolling(window=9,center=False).max()\n  nine_period_high = pd.rolling_max(df2['High'], window=9)\n</code></pre>\n\n<p>and the same error always repeated with all rolling_max and rolling_min in all script.</p>\n\n<p>any body can help please.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515620065, "post_id": 48196365, "comment_id": 83373881, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described.  I&#39;m fixing your indentation error; you also have undefined symbols."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515620208, "post_id": 48196365, "comment_id": 83373943, "body": "@Prune mentioned MCVE for a reason.  What is <code>Equity_list</code> or <code>Look</code>? Your description of the procedure is also not really clear to explain, what you try to achieve with your procedure."}, {"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515620294, "post_id": 48196365, "comment_id": 83373995, "body": "@Prune I just edited the undefined symbol. Thank you for editing the indent. I tried to explain the problem as much as possible in the statement above the code. Please help me with this."}, {"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "reply_to_user": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1515620347, "post_id": 48196365, "comment_id": 83374021, "body": "@Piinthesky I just edited the undefined &quot;Equity_list&quot;. Thank you"}, {"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1515620673, "post_id": 48196365, "comment_id": 83374187, "body": "@Prune I edited the description as well. Please let me know what is unclear and I will explain again. Please help me with this. Thank you"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1515621293, "post_id": 48196365, "comment_id": 83374468, "body": "Again, we should be able to paste your posted code into a text file and reproduce the problem you described.  Fix the execution crash."}, {"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "reply_to_user": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1515621306, "post_id": 48196365, "comment_id": 83374475, "body": "@Piinthesky can you please help me with this? I really need help. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "edited": false, "score": 0, "creation_date": 1515621747, "post_id": 48196751, "comment_id": 83374676, "body": "JimmyCarlos Thank you very much for the detailed explanation. I assigned Look = 0. Sorry, I had forgotten this one. In your answer, in the last if I want to compare abc[index] &gt;= max(abc[Look:inde]). Look with be increased everytime startequity is reassigned."}, {"owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "reply_to_user": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "edited": false, "score": 0, "creation_date": 1515621892, "post_id": 48196751, "comment_id": 83374741, "body": "Try running the code in the last grey box in my answer. :-)"}, {"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "edited": false, "score": 0, "creation_date": 1515622548, "post_id": 48196751, "comment_id": 83374984, "body": "JimmyCarlos I ran your code, this is mostly what I am looking for. Except the scorelist is missing one 0 at the fourth place from end. The list len should be 10. Also, for the third if statement if abc[index] &gt;=max(startequity:abc[index-1]). would you please take a look one more time? Thank you"}, {"owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "reply_to_user": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "edited": false, "score": 1, "creation_date": 1515623083, "post_id": 48196751, "comment_id": 83375214, "body": "There you go, fixed! Have a nice day."}, {"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "edited": false, "score": 0, "creation_date": 1515623287, "post_id": 48196751, "comment_id": 83375287, "body": "JimmyCarlos: Thank you so very much. I really appreciate your time explaining and helping me with the code. This makes me more interested to learn. Thank you again. Have a nice day"}], "tags": [], "owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "is_accepted": false, "score": 2, "last_activity_date": 1515623045, "last_edit_date": 1515623045, "creation_date": 1515621411, "answer_id": 48196751, "question_id": 48196365, "link": "https://stackoverflow.com/questions/48196365/how-to-create-a-new-list-by-comparing-each-index-value-with-max-of-previous-valu/48196751#48196751", "title": "How to create a new list by comparing each index value with max of previous values?", "body": "<p>Well done for your starting attempts and being brave enough to ask for help. Let's see here...</p>\n\n<p>Look hasn't been defined.</p>\n\n<p>max(); must have at least one element or it raises an exception, crashing Python. Having a line like this would work:</p>\n\n<pre><code>if index == 0:\n    scorelist = scorelist + [0]\n    continue\n</code></pre>\n\n<p>I have put a \"continue\" in that block. Continue tells Python to forget about everything else in the loop and just move on the next cycle in the for loop.</p>\n\n<p>Of note, the following 3 lines all add an element to the end of the list, but it is good convention to use the same notation throughout your code:</p>\n\n<pre><code>scorelist = scorelist + [0]\nscorelist.append(0)\nscorelist += [0]\n</code></pre>\n\n<p>Final code (Edited Version):</p>\n\n<pre><code>abc= [150,110,120,0,0,160,120,-200,140,150]\n\nscore = 0\nscorelist=[]\n\nfor (index, item) in list(enumerate(abc)):\n    if index == 0:\n        scorelist.append(0)\n        continue\n\n    if abc[index] &lt; abc[index-1]:\n        scorelist.append(0)\n        score = 0\n\n    else:\n        score = score + 1\n        scorelist.append((score))\n\nprint(scorelist)\n</code></pre>\n\n<p>This returns [0, 0, 1, 0, 1, 2, 0, 0, 1, 2] as asked in the question.</p>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "edited": false, "score": 0, "creation_date": 1515623078, "post_id": 48197042, "comment_id": 83375209, "body": "Piinthesky, Thank you for the explanation and your code. I really appreciate it. JimmyCarlos answer is very close to what I am looking for. Thank you again"}], "tags": [], "owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1515623334, "last_edit_date": 1515623334, "creation_date": 1515622793, "answer_id": 48197042, "question_id": 48196365, "link": "https://stackoverflow.com/questions/48196365/how-to-create-a-new-list-by-comparing-each-index-value-with-max-of-previous-valu/48197042#48197042", "title": "How to create a new list by comparing each index value with max of previous values?", "body": "<p>I am still not 100% clear, what you try to do. But I guess the output is supposed to be the following: If the previous element in <code>abc</code> is larger or non-existent, then assign zero, otherwise increase the number by one.</p>\n\n<p>This is at least, what this code does: </p>\n\n<pre><code>abc= [150,110,120,0,0,160,120,-200,140,150]\n\nres = [0]\nfor i in [[1, 0][u - v &lt; 0] for u, v in zip(abc[1:], abc[:-1])]:\n    if i == 0:\n        count = 0\n    else:\n        count += 1\n    res.append(count)\n\nprint(res)\n</code></pre>\n\n<p>Explanation: \n<code>[[1, 0][u - v &lt; 0] for u, v in zip(abc[1:], abc[:-1])]</code> is a list comprehension that assigns <code>0</code> or <code>1</code> depending on the comparison with the previous element. This excludes the first element, for which the score is set to <code>0</code>.\nThe <code>for loop</code> then ignores <code>0</code> and substitutes a series like <code>1,1,1...</code> with <code>1,2,3...</code></p>\n"}], "owner": {"reputation": 275, "user_id": 8280454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/030971d103cd0b8128440041bfd2af9f?s=128&d=identicon&r=PG&f=1", "display_name": "A.S", "link": "https://stackoverflow.com/users/8280454/a-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "closed_date": 1515673108, "answer_count": 2, "score": 0, "last_activity_date": 1515623334, "creation_date": 1515619709, "last_edit_date": 1515621558, "question_id": 48196365, "link": "https://stackoverflow.com/questions/48196365/how-to-create-a-new-list-by-comparing-each-index-value-with-max-of-previous-valu", "closed_reason": "Needs details or clarity", "title": "How to create a new list by comparing each index value with max of previous values?", "body": "<p>Below is a list abc.In the first loop, I check if preceeding element is greater than the first element(start_equity) or not. If yes, i reassign the current element = start_equity and do the chek from that index of current element. The problem is for second loop. In the second loop, I want to compare value of index to max value of previous elements and if the condition is met score should be appended to scorelist. Please somebody help me with this. I have minimum knowledge in python.</p>\n\n<pre><code>abc= [150,110,120,0,0,160,120,-200,140,150]\n\n\ncount= 0\nLook = 0\nscore = 0\nscorelist=[]\n\n\nstartequity =  abc[0]\nfor (index, item) in list(enumerate(abc)):\n    if abc[index] &lt; startequity:\n        startequity = abc[index]\n        Look = Look + 1\n        scorelist = scorelist + [0]\n\n    if abc[index] &gt; max(abc[Look:index]):\n        count = count + 1\n        score = score + count\n        scorelist.append((score))\n</code></pre>\n\n<p>Desired answer is scorelist = [0, 0, 1, 0, 1,2, 0,0, 1, 2]</p>\n"}, {"tags": ["python", "ibm-cloud-infrastructure"], "answers": [{"comments": [{"owner": {"reputation": 844, "user_id": 6158618, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/be0fd6bf3448b482073b0bcdd2f8d781?s=128&d=identicon&r=PG&f=1", "display_name": "bitscuit", "link": "https://stackoverflow.com/users/6158618/bitscuit"}, "edited": false, "score": 0, "creation_date": 1515687222, "post_id": 48209989, "comment_id": 83404019, "body": "Is there any way to have the VM request contain 3 disks with the first 2 being local and then the third being a SAN? I know you can request the third disk after the VM has been requested with placeOrder(order), but I would prefer it if I can get the third disk along with the VM request rather than afterwards."}, {"owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "reply_to_user": {"reputation": 844, "user_id": 6158618, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/be0fd6bf3448b482073b0bcdd2f8d781?s=128&d=identicon&r=PG&f=1", "display_name": "bitscuit", "link": "https://stackoverflow.com/users/6158618/bitscuit"}, "edited": false, "score": 0, "creation_date": 1515687966, "post_id": 48209989, "comment_id": 83404533, "body": "Yep it is possible you need to use the placeOrder  method to order the VM  instead the current one you are using"}, {"owner": {"reputation": 374, "user_id": 7010574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09babd02f45e9bc790869382d795a8c9?s=128&d=identicon&r=PG", "display_name": "silveiralexf", "link": "https://stackoverflow.com/users/7010574/silveiralexf"}, "edited": false, "score": 0, "creation_date": 1543426936, "post_id": 48209989, "comment_id": 93919309, "body": "and what about the size? I&#39;m trying some bigger disks but the value does not seems to be recognized.... trying a single 500GB disk for instance also fails"}, {"owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "edited": false, "score": 0, "creation_date": 1543502758, "post_id": 48209989, "comment_id": 93949977, "body": "you need to use getcreateObjectOptions method to get all available sizes for the disk see <a href=\"https://softlayer.github.io/article/vsiflavors/\" rel=\"nofollow noreferrer\">softlayer.github.io/article/vsiflavors</a> if the disk size is not list you will not be able to created, but if the size is available it probably is an issue"}], "tags": [], "owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "is_accepted": true, "score": 1, "last_activity_date": 1515682783, "creation_date": 1515682783, "answer_id": 48209989, "question_id": 48196315, "link": "https://stackoverflow.com/questions/48196315/requesting-softlayer-vm-with-python-api-unable-to-find-price-for-block-device-3/48209989#48209989", "title": "Requesting SoftLayer VM with Python API Unable to Find Price for Block Device 3", "body": "<p>The error is because your configuration <code>'local_disk': True,</code> the device 3 (or disk 3) only is available for dedicated hosts or non-local disk, if you change it to <code>'local_disk': False</code>, it should work.</p>\n"}], "owner": {"reputation": 844, "user_id": 6158618, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/be0fd6bf3448b482073b0bcdd2f8d781?s=128&d=identicon&r=PG&f=1", "display_name": "bitscuit", "link": "https://stackoverflow.com/users/6158618/bitscuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 48209989, "answer_count": 1, "score": 0, "last_activity_date": 1515682783, "creation_date": 1515619532, "question_id": 48196315, "link": "https://stackoverflow.com/questions/48196315/requesting-softlayer-vm-with-python-api-unable-to-find-price-for-block-device-3", "title": "Requesting SoftLayer VM with Python API Unable to Find Price for Block Device 3", "body": "<p>I am trying to request a SoftLayer VM with the Python API, but I am getting an error when the vsi includes 3 disks.</p>\n\n<p>Error:</p>\n\n<pre><code>SoftLayer.exceptions.SoftLayerAPIError: SoftLayerAPIError(SoftLayer_Exception_NotFound): Unable to find a price for block device 3.\n</code></pre>\n\n<p>Here is the vsi:</p>\n\n<pre><code>new_vsi = {\n        'domain': domain,\n        'hostname': hostname + str(n),\n        'datacenter': datacenter,\n        'dedicated': False,\n        'private': False,\n        'cpus': number_of_cpus,\n        'os_code' : u'UBUNTU_LATEST_64', \n        'hourly': is_hourly_billed,\n        'disks': ['100','200', '100'],\n        'local_disk': True,\n        'memory': 16384,\n        'private_vlan': privatevlan,\n        'public_vlan': publicvlan,\n        'nic_speed':1000\n}\n</code></pre>\n\n<p>If I only have two disks in the list there won't be any errors, but if I add a third disk to the list I will get the above error. I have tried various values for the third disk, including: 25, 100, 150, 200, and 300.</p>\n"}, {"tags": ["python", "machine-learning", "logistic-regression", "rfe"], "comments": [{"owner": {"reputation": 1075, "user_id": 2808975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bdd21b3ffb734455c989c0157dec9c?s=128&d=identicon&r=PG&f=1", "display_name": "offbyone", "link": "https://stackoverflow.com/users/2808975/offbyone"}, "edited": false, "score": 0, "creation_date": 1515625297, "post_id": 48196282, "comment_id": 83376051, "body": "Can you post the full stack trace?"}], "owner": {"reputation": 11, "user_id": 9200772, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4-ldPlB9ZXA/AAAAAAAAAAI/AAAAAAAAAF0/MO_eCaEjnpc/photo.jpg?sz=128", "display_name": "Maria F Cadena", "link": "https://stackoverflow.com/users/9200772/maria-f-cadena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1515619340, "creation_date": 1515619340, "question_id": 48196282, "link": "https://stackoverflow.com/questions/48196282/admitted-data-type-in-rfe-to-keep-features-in-a-logistic-regression", "title": "Admitted data type in RFE to keep features in a logistic regression", "body": "<p>I'm trying to build a logistic regression in python with a dataset that contains continuous features and some binary features.</p>\n\n<p>In order to choose the features that I will include in the model I am using RFE. So basically I have this code</p>\n\n<pre><code>y=HRData['left']\ncollist = HRData.columns.tolist()\ncollist.remove('left')\nX=HRData[collist]\nmodel = LogisticRegression()\nrfe = RFE(model, 10)\nfit = rfe.fit(HRData[X], HRData[y])\n</code></pre>\n\n<p>where y contains 1's and 0's and X has either int or float data.</p>\n\n<h2>When I try to fit the model with RFE I keep getting this:</h2>\n\n<pre><code>/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py in \n_getitem_frame(self, key)\n   2033     def _getitem_frame(self, key):\n   2034         if key.values.size and not is_bool_dtype(key.values):\n-&gt; 2035             raise ValueError('Must pass DataFrame with boolean values only')\n   2036         return self.where(key)\n   2037 \n</code></pre>\n\n<h2>       ValueError: Must pass DataFrame with boolean values only</h2>\n\n<p>So I am not sure if this function only admits data frames with boolean values since I've seen examples with continuous variables. </p>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515619463, "post_id": 48196275, "comment_id": 83373628, "body": "Does order matter? For example, is adam - molly different from molly - adam?"}, {"owner": {"reputation": 71, "user_id": 9175091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60db18d01c09e4770f119c6166f4dc24?s=128&d=identicon&r=PG&f=1", "display_name": "ERS", "link": "https://stackoverflow.com/users/9175091/ers"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515619639, "post_id": 48196275, "comment_id": 83373690, "body": "no, in this case the order doesn&#39;t matter!"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1515620593, "last_edit_date": 1515620593, "creation_date": 1515620220, "answer_id": 48196476, "question_id": 48196275, "link": "https://stackoverflow.com/questions/48196275/pandas-dataframe-pairwise-connections-as-new-columns-based-on-unique-id/48196476#48196476", "title": "Pandas DataFrame - &#39;pairwise&#39; connections as new columns based on unique id", "body": "<p>Let's use itertools.combiniations:</p>\n\n<pre><code>from itertools import combinations\n\ndf.groupby('id')['name']\\\n  .apply(lambda x: pd.DataFrame((i for i in combinations(x.values,2))))\\\n  .reset_index().drop('level_1',axis=1)\\\n  .rename(columns={0:'name_x',1:'name_y'})\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   id name_x name_y\n0   2  james   adam\n1   8  susan  james\n2  10   adam  molly\n3  10   adam    Bob\n4  10  molly    Bob\n5  12  molly  james\n6  12  molly   Gary\n7  12  james   Gary\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "is_accepted": false, "score": 0, "last_activity_date": 1515620324, "creation_date": 1515620324, "answer_id": 48196500, "question_id": 48196275, "link": "https://stackoverflow.com/questions/48196275/pandas-dataframe-pairwise-connections-as-new-columns-based-on-unique-id/48196500#48196500", "title": "Pandas DataFrame - &#39;pairwise&#39; connections as new columns based on unique id", "body": "<p>Another option with <code>itertools.combinations</code> would be the following:</p>\n\n<pre><code>In [30]: from itertools import combinations\n\nIn [31]: df.groupby('id').name.apply(lambda group: list(combinations(group, 2))).apply(pd.Series).stack().reset_index(level=1, drop=True).apply(pd.Series).rename(columns={0: 'name_x', 1: 'name_y'})\nOut[31]:\n   name_x name_y\nid\n2   james   adam\n8   susan  james\n10   adam  molly\n10   adam    Bob\n10  molly    Bob\n12  molly  james\n12  molly   Gary\n12  james   Gary\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9175091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60db18d01c09e4770f119c6166f4dc24?s=128&d=identicon&r=PG&f=1", "display_name": "ERS", "link": "https://stackoverflow.com/users/9175091/ers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1515620593, "creation_date": 1515619306, "question_id": 48196275, "link": "https://stackoverflow.com/questions/48196275/pandas-dataframe-pairwise-connections-as-new-columns-based-on-unique-id", "title": "Pandas DataFrame - &#39;pairwise&#39; connections as new columns based on unique id", "body": "<p>I have a data frame that looks like this:</p>\n\n<pre><code>        id  name\n    0   12  molly\n    1   12  james\n    2   10  adam\n    3   8   susan\n    4   10  molly\n    5   9   pete\n    6   2   james\n    7   10  Bob\n    8   8   james\n    9   2   adam\n    10  12  Gary\n</code></pre>\n\n<p>I want to create 'pairwise' columns based on the id number with cols 'name_x' and 'name_y' where both names have the same id like this:</p>\n\n<pre><code>    id  name_x  name_y\n0   12  molly   james\n1   12  molly   gary\n2   12  gary    james\n3   10  adam    molly\n4   10  adam    Bob\n5   10  molly   Bob\n6   8   susan   james\n7   2   james   adam\n</code></pre>\n\n<p>I know there must be a solution for this somewhere but I can't think of the correct terminology to find it!</p>\n"}, {"tags": ["python", "pyspark", "apache-spark-sql", "spark-dataframe"], "comments": [{"owner": {"reputation": 1432, "user_id": 4975401, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/iMJ4a.jpg?s=128&g=1", "display_name": "zemekeneng", "link": "https://stackoverflow.com/users/4975401/zemekeneng"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1515619321, "post_id": 48196203, "comment_id": 83373563, "body": "I am worried about taking the performance hit from the row-wise python operation."}], "answers": [{"comments": [{"owner": {"reputation": 1432, "user_id": 4975401, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/iMJ4a.jpg?s=128&g=1", "display_name": "zemekeneng", "link": "https://stackoverflow.com/users/4975401/zemekeneng"}, "edited": false, "score": 0, "creation_date": 1515627332, "post_id": 48196865, "comment_id": 83376676, "body": "The keys don&#39;t change very often in my case, so precomputing the keys might give me a performance gain, I will try it out. Thanks @pault"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 1432, "user_id": 4975401, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/iMJ4a.jpg?s=128&g=1", "display_name": "zemekeneng", "link": "https://stackoverflow.com/users/4975401/zemekeneng"}, "edited": false, "score": 0, "creation_date": 1515628479, "post_id": 48196865, "comment_id": 83376983, "body": "Happy to help. Please do share the performance results. I&#39;m curious to see how the various methods stack up against each other."}, {"owner": {"reputation": 1432, "user_id": 4975401, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/iMJ4a.jpg?s=128&g=1", "display_name": "zemekeneng", "link": "https://stackoverflow.com/users/4975401/zemekeneng"}, "edited": false, "score": 0, "creation_date": 1515705000, "post_id": 48196865, "comment_id": 83413503, "body": "No noticeable performance difference. However, this is still useful for folk on spark &lt;1.6 because of union all. See here: <a href=\"https://stackoverflow.com/questions/38650568/spark-1-5-2-org-apache-spark-sql-analysisexception-unresolved-operator-union\" title=\"spark 1 5 2 org apache spark sql analysisexception unresolved operator union\">stackoverflow.com/questions/38650568/&hellip;</a>"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 1432, "user_id": 4975401, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/iMJ4a.jpg?s=128&g=1", "display_name": "zemekeneng", "link": "https://stackoverflow.com/users/4975401/zemekeneng"}, "edited": false, "score": 0, "creation_date": 1515705126, "post_id": 48196865, "comment_id": 83413558, "body": "But are these methods faster than <code>udf</code>? Or did you mean that these methods had no performance difference than <code>udf</code>?"}, {"owner": {"reputation": 1432, "user_id": 4975401, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/iMJ4a.jpg?s=128&g=1", "display_name": "zemekeneng", "link": "https://stackoverflow.com/users/4975401/zemekeneng"}, "edited": false, "score": 0, "creation_date": 1515718256, "post_id": 48196865, "comment_id": 83418064, "body": "I would have to put together a more rigorous test to see, I will get back to you :)"}, {"owner": {"reputation": 313, "user_id": 12368632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d1f281b1cd70a281c7b98ec69d602e?s=128&d=identicon&r=PG&f=1", "display_name": "jgtrz", "link": "https://stackoverflow.com/users/12368632/jgtrz"}, "edited": false, "score": 0, "creation_date": 1590709327, "post_id": 48196865, "comment_id": 109791115, "body": "@pault, great explanation. I would like to apply what you mention here in my question. Can you take a look at it as well? <a href=\"https://stackoverflow.com/questions/62070186/pyspark-mapping-values-from-different-dataframes?noredirect=1#comment109790263_62070186\" title=\"pyspark mapping values from different dataframes\">stackoverflow.com/questions/62070186/&hellip;</a>"}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": true, "score": 3, "last_activity_date": 1515625419, "last_edit_date": 1515625419, "creation_date": 1515621891, "answer_id": 48196865, "question_id": 48196203, "link": "https://stackoverflow.com/questions/48196203/add-a-new-key-value-pair-to-a-spark-maptype-column/48196865#48196865", "title": "Add a new key/value pair to a Spark MapType column", "body": "<p>Here is one way to do it without <code>udf</code> if you know the keys ahead of time. Use the <code>create_map</code> function. As to whether or not this is more performant, I don't know.</p>\n\n<pre><code>from pyspark.sql.functions import col, lit, create_map\n\ndf.select(\n    create_map(\n        lit('other_field'),\n        col('other_field'),\n        lit('akey'),\n        col('payload')['akey']\n    )\n).show(n=1, truncate=False)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>+-----------------------------------------------------+\n|map(other_field, other_field, akey, payload['akey']) |\n+-----------------------------------------------------+\n|Map(other_field -&gt; this should be in, akey -&gt; aValue)|\n+-----------------------------------------------------+\n</code></pre>\n\n<h1>Update</h1>\n\n<p>Here is a way to do it without having to hardcode the dictionary keys. Unfortunately it involves one <code>collect()</code> operation. </p>\n\n<h3>Mockup some data</h3>\n\n<p>Firstly, let's modify your original dataframe to include one more key-value pair in the <code>MapType()</code> field.</p>\n\n<pre><code>from pyspark.sql.functions import col, lit, create_map\nimport datetime\nrdd = sc.parallelize(\n    [\n        [\n            datetime.datetime.now(),\n            'this should be in',\n            {'akey': 'aValue', 'bkey': 'bValue'}\n        ]\n    ]\n)\ndf = rdd.toDF(fields)\ndf.show(n=1, truncate=False)\n</code></pre>\n\n<p>Which creates the following:</p>\n\n<pre><code>+--------------------------+-----------------+-----------------------------------+\n|timestamp                 |other_field      |payload                            |\n+--------------------------+-----------------+-----------------------------------+\n|2018-01-10 17:37:58.859603|this should be in|Map(bkey -&gt; bValue, akey -&gt; aValue)|\n+--------------------------+-----------------+-----------------------------------+\n</code></pre>\n\n<h3>Get the map's keys</h3>\n\n<p>Using <code>explode()</code> and <code>collect()</code>, you can get the keys as so:</p>\n\n<pre><code>from pyspark.sql.functions import explode\n\nkeys = [\n    x['key'] for x in (df.select(explode(\"payload\"))\n                        .select(\"key\")\n                        .distinct()\n                        .collect())\n]\n</code></pre>\n\n<h3>Create a new map with all of the fields</h3>\n\n<p>Now use <code>create_map</code> as above, but use the information from <code>keys</code> to create the key-value pairs dynamically. I used <code>reduce(add, ...)</code> because <code>create_map</code> expects the inputs to be key-value pairs in order- I couldn't think of another way to flatten the list.</p>\n\n<pre><code>from operator import add\ndf.select(\n    create_map\n    (\n        *([lit('other_field'), col('other_field')] + reduce(add, [[lit(k), col('payload').getItem(k)] for k in keys]))\n    )\n).show(n=1, truncate=False)\n</code></pre>\n\n<h3>Final result:</h3>\n\n<pre><code>+---------------------------------------------------------------------------+\n|map(other_field, other_field, akey, payload['akey'], bkey, payload['bkey'])|\n+---------------------------------------------------------------------------+\n|Map(other_field -&gt; this should be in, akey -&gt; aValue, bkey -&gt; bValue)      |\n+---------------------------------------------------------------------------+\n</code></pre>\n\n<h1>References</h1>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/41288622/pyspark-create-maptype-column-from-existing-columns\">pyspark: Create MapType Column from existing columns\n</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/36869134/pyspark-converting-a-column-of-type-map-to-multiple-columns-in-a-dataframe\">PySpark converting a column of type 'map' to multiple columns in a dataframe\n</a></p></li>\n</ol>\n"}], "owner": {"reputation": 1432, "user_id": 4975401, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/iMJ4a.jpg?s=128&g=1", "display_name": "zemekeneng", "link": "https://stackoverflow.com/users/4975401/zemekeneng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5539, "favorite_count": 1, "accepted_answer_id": 48196865, "answer_count": 1, "score": 3, "last_activity_date": 1515625419, "creation_date": 1515618961, "question_id": 48196203, "link": "https://stackoverflow.com/questions/48196203/add-a-new-key-value-pair-to-a-spark-maptype-column", "title": "Add a new key/value pair to a Spark MapType column", "body": "<p>I have a Dataframe with a MapType field.</p>\n\n<pre><code>&gt;&gt;&gt; from pyspark.sql.functions import *\n&gt;&gt;&gt; from pyspark.sql.types import *\n&gt;&gt;&gt; fields = StructType([\n...         StructField('timestamp',      TimestampType(), True),\n...         StructField('other_field',    StringType(), True),\n...         StructField('payload',        MapType(\n...                                         keyType=StringType(),\n...                                         valueType=StringType()),\n...                                                     True),   ])\n&gt;&gt;&gt; import datetime\n&gt;&gt;&gt; rdd = sc.parallelize([[datetime.datetime.now(), 'this should be in', {'akey': 'aValue'}]])\n&gt;&gt;&gt; df = rdd.toDF(fields)\n&gt;&gt;&gt; df.show()\n+--------------------+-----------------+-------------------+\n|           timestamp|      other_field|            payload|\n+--------------------+-----------------+-------------------+\n|2018-01-10 12:56:...|this should be in|Map(akey -&gt; aValue)|\n+--------------------+-----------------+-------------------+\n</code></pre>\n\n<p>I would like to add the <code>other_field</code> as a key in the <code>payload</code> field.</p>\n\n<p>I know I can use a udf:</p>\n\n<pre><code>&gt;&gt;&gt; def _add_to_map(name, value, map_field):\n...     map_field[name] = value\n...     return map_field\n...\n&gt;&gt;&gt; add_to_map = udf(_add_to_map, MapType(StringType(),StringType()))\n&gt;&gt;&gt; df.select(add_to_map(lit('other_field'), 'other_field', 'payload')).show(1, False)\n+------------------------------------------------------+\n|PythonUDF#_add_to_map(other_field,other_field,payload)|\n+------------------------------------------------------+\n|Map(other_field -&gt; this should be in, akey -&gt; aValue) |\n+------------------------------------------------------+\n</code></pre>\n\n<p>Is there a way to do this <em>without</em> a <code>udf</code>?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 4, "creation_date": 1515619079, "post_id": 48196195, "comment_id": 83373462, "body": "Take a look at <a href=\"https://stackoverflow.com/questions/2386714/why-is-import-bad\">stackoverflow.com/questions/2386714/why-is-import-bad</a>"}, {"owner": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 0, "creation_date": 1515619194, "post_id": 48196195, "comment_id": 83373513, "body": "The second import is better in case some libraries have the same function names -- it keeps the namespaces separate and clear."}], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 2249155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4jbea.png?s=128&g=1", "display_name": "neophlegm", "link": "https://stackoverflow.com/users/2249155/neophlegm"}, "is_accepted": false, "score": 1, "last_activity_date": 1515619145, "creation_date": 1515619145, "answer_id": 48196240, "question_id": 48196195, "link": "https://stackoverflow.com/questions/48196195/the-difference-between-np-function-and-function/48196240#48196240", "title": "The difference between np.function and function", "body": "<p>It's a matter of neatness but also consistency: you might have multiple functions with the same name from different modules (for instance there's a function called \"random\" in Numpy, but also in other packages like SciPy) so it's important to denote which exact function you're using from which exact module. <a href=\"https://shahriar.svbtle.com/importing-star-in-python\" rel=\"nofollow noreferrer\">This link</a> has a great explanation and makes the point about code readability as well.</p>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 4, "last_activity_date": 1515619504, "last_edit_date": 1515619504, "creation_date": 1515619201, "answer_id": 48196250, "question_id": 48196195, "link": "https://stackoverflow.com/questions/48196195/the-difference-between-np-function-and-function/48196250#48196250", "title": "The difference between np.function and function", "body": "<p>The difference is easy: <code>from numpy import *</code> imports all names from the top-level NumPy module into your current \"module\" (namespace). <code>import numpy as np</code> will just make that top-level NumPy module available if you use <code>np.xxx</code>.</p>\n\n<p>However there is one reason why you shouldn't use <code>from any_module import *</code>: It may just overwrite existing names. For example NumPy has its own <code>any</code>, <code>max</code>, <code>all</code> and <code>min</code> functions, which will happily shadow the built-in Python <code>any</code>, <code>max</code>, ... functions (a <em>very</em> common \"gotcha\"). </p>\n\n<p>My advise: Avoid <code>from numpy import *</code> even if it seems like less effort than typing <code>np.</code> all the time!</p>\n"}], "owner": {"reputation": 45, "user_id": 9182682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234abd9fa1d34e969a90dba7a7f1c021?s=128&d=identicon&r=PG&f=1", "display_name": "TSobhy", "link": "https://stackoverflow.com/users/9182682/tsobhy"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "closed_date": 1515619342, "accepted_answer_id": 48196250, "answer_count": 2, "score": 1, "last_activity_date": 1515619507, "creation_date": 1515618929, "last_edit_date": 1515619210, "question_id": 48196195, "link": "https://stackoverflow.com/questions/48196195/the-difference-between-np-function-and-function", "closed_reason": "Duplicate", "title": "The difference between np.function and function", "body": "<p>We can import numpy and use its functions directly as:</p>\n\n<pre><code>from numpy import *\n\na = arraay([1,2,3]) # and it works well.\n</code></pre>\n\n<p>Why do some people use the following method?</p>\n\n<pre><code>import numpy as np\n\na= np.array([1,2,3])\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1515619211, "last_edit_date": 1515619211, "creation_date": 1515619109, "answer_id": 48196235, "question_id": 48196188, "link": "https://stackoverflow.com/questions/48196188/write-rows-into-new-dataframes/48196235#48196235", "title": "Write rows into new dataframes", "body": "<p><strong>Option 1</strong><br>\n<code>groupby</code> </p>\n\n<pre><code>orgs = []\nfor _, g in df.groupby('organisation', as_index=False):\n    orgs.append(g)\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>orgs = [g for _, g in df.groupby('organization', as_index=False)]\n</code></pre>\n\n<p>Now, <code>orgs</code> is a list of dataframes, one for each org.</p>\n\n<p>Alternatively, if you want the result as a <code>dict</code>, use - </p>\n\n<pre><code>orgs = {i : g for i, g in df.groupby('organization', as_index=False)}\n</code></pre>\n\n<p>Now, to access the dataframe for <code>org1</code>, call <code>orgs['org1']</code>.</p>\n\n<hr>\n\n<p><strong>Option 2</strong><br>\nAnother option would be filtering using <code>pd.Series.unique</code> - </p>\n\n<pre><code>orgs = []\nfor o in df.organization.unique():\n    orgs.append(df.query('organization == @o'))\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>orgs = [df.query('organization == @o') for o in df.organization.unique()]\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>orgs = { o : df.query('organization == @o') for o in df.organization.unique()}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9200666, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lnfnIgTeol4/AAAAAAAAAAI/AAAAAAAAAgo/85ZwKT7FYss/photo.jpg?sz=128", "display_name": "Matt Youngberg", "link": "https://stackoverflow.com/users/9200666/matt-youngberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1515619277, "accepted_answer_id": 48196235, "answer_count": 1, "score": 2, "last_activity_date": 1515619211, "creation_date": 1515618910, "question_id": 48196188, "link": "https://stackoverflow.com/questions/48196188/write-rows-into-new-dataframes", "closed_reason": "Duplicate", "title": "Write rows into new dataframes", "body": "<p>New programmer with pandas here. I'm working on separating rows withing a pandas dataframe into new dataframes. I have a dataframe that looks something like this:</p>\n\n<pre><code>In [1]: print (df)\n\n       first_name                    email      organization\n0            Brad           brad@gmail.com              org1 \n1           Jared          jared@gmail.com              org2 \n2          Daniel         daniel@gmail.com              org3\n3         Michael        michael@gmail.com              org1 \n4           Jaime          jaime@gmail.com              org2 \n</code></pre>\n\n<p>What I want to do is go through each row in the dataframe, identify which organization the row belongs to (eg. Brad belongs to org1, Daniel belongs to org3), and then I want to write that row into a new dataframe. In this case, I'd want to have 3 new dataframes, each of which would look like the following:</p>\n\n<p>Org1:</p>\n\n<pre><code>In [3]: print (org1)\n\n       first_name                    email      organization\n0            Brad           brad@gmail.com              org1\n1         Michael        michael@gmail.com              org1 \n</code></pre>\n\n<p>Org2:</p>\n\n<pre><code>In [4]: print (org2)\n\n       first_name                    email      organization\n0           Jared          jared@gmail.com              org2 \n1           Jaime          jaime@gmail.com              org2 \n</code></pre>\n\n<p>Org3:</p>\n\n<pre><code>In [3]: print (org3)\n\n       first_name                    email      organization\n0          Daniel         daniel@gmail.com              org3\n</code></pre>\n\n<p>How would I create a loop that iterates through each row in my original dataframe, identify the dataframe to write to through the value in a specific column, and then actually writes it to the dataframe?</p>\n\n<p>The first time that the loops encounters the value, I would want it to create a brand new dataframe. After that, any subsequent rows with the same value should get added to it-- not create a new one entirely. Any help (and wisdom for understanding how loops work in regards to dataframes) would be greatly appreciated.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1515619232, "post_id": 48196122, "comment_id": 83373525, "body": "This question doesn&#39;t make much sense. If you want to save <code>points</code> on the model, it needs to be a field. If not, why do you want to &quot;send&quot; it to the model? What exactly are you doing with those points?"}, {"owner": {"reputation": 47, "user_id": 8935916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/76bce44d83676e2fc9aa43267d39ffe0?s=128&d=identicon&r=PG&f=1", "display_name": "grilam14", "link": "https://stackoverflow.com/users/8935916/grilam14"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1515619443, "post_id": 48196122, "comment_id": 83373620, "body": "I want to be able to store them so I can print the 10 most recently searched tickers and their points on a page. I am getting pretty much all of my information from a tutorial so my set of tools is limited. Is there an easier way to store and retrieve the tickers along with their respective points?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 8935916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/76bce44d83676e2fc9aa43267d39ffe0?s=128&d=identicon&r=PG&f=1", "display_name": "grilam14", "link": "https://stackoverflow.com/users/8935916/grilam14"}, "edited": false, "score": 0, "creation_date": 1515622869, "post_id": 48196424, "comment_id": 83375123, "body": "The new error that goes along with it now is OperationalError at /add (1054, &quot;Unknown column &#39;points&#39; in &#39;field list&#39;&quot;). Sounds like a mysql error now."}, {"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "reply_to_user": {"reputation": 47, "user_id": 8935916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/76bce44d83676e2fc9aa43267d39ffe0?s=128&d=identicon&r=PG&f=1", "display_name": "grilam14", "link": "https://stackoverflow.com/users/8935916/grilam14"}, "edited": false, "score": 0, "creation_date": 1515624825, "post_id": 48196424, "comment_id": 83375872, "body": "Did you remember to <code>python manage.py makemigrations; python manage.py migrate</code>?"}, {"owner": {"reputation": 47, "user_id": 8935916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/76bce44d83676e2fc9aa43267d39ffe0?s=128&d=identicon&r=PG&f=1", "display_name": "grilam14", "link": "https://stackoverflow.com/users/8935916/grilam14"}, "edited": false, "score": 0, "creation_date": 1515625158, "post_id": 48196424, "comment_id": 83375992, "body": "Yes, django.db.utils.OperationalError: (1054, &quot;Unknown column &#39;senty_score.points&#39; in &#39;field list&#39;&quot;) i tried it again just in case and ended up with close to the same error when i ran the site."}], "tags": [], "owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1515619978, "creation_date": 1515619978, "answer_id": 48196424, "question_id": 48196122, "link": "https://stackoverflow.com/questions/48196122/how-can-i-move-data-from-views-py-to-a-models-py-in-python-django-in-this-case/48196424#48196424", "title": "How can I move data from views.py to a models.py in python/django in this case?", "body": "<p>Just put the points into the score object when you create it.</p>\n\n<p>In views.py, use the following line when you create the <code>score</code> object:</p>\n\n<pre><code>sc = score(ticker=ticker, points=pts)\n</code></pre>\n\n<p>And in models.py, use the following field in your score model:</p>\n\n<pre><code>class score(models.Model):\n\n    ticker = models.CharField(max_length=10)\n    points = models.IntegerField()\n    created_at = models.DateTimeField(default=datetime.now, blank=True)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 8935916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/76bce44d83676e2fc9aa43267d39ffe0?s=128&d=identicon&r=PG&f=1", "display_name": "grilam14", "link": "https://stackoverflow.com/users/8935916/grilam14"}, "edited": false, "score": 0, "creation_date": 1515623343, "post_id": 48196454, "comment_id": 83375310, "body": "That worked after the migration. Now I just have some kind of Mysql error: Unknown column &#39;points&#39; in &#39;field list&#39;&quot; This was a python question but do you know how to resolve that?"}, {"owner": {"reputation": 139, "user_id": 2145872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0611b851822c74d716444ad6054dca7?s=128&d=identicon&r=PG", "display_name": "Matthew Dumas", "link": "https://stackoverflow.com/users/2145872/matthew-dumas"}, "reply_to_user": {"reputation": 47, "user_id": 8935916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/76bce44d83676e2fc9aa43267d39ffe0?s=128&d=identicon&r=PG&f=1", "display_name": "grilam14", "link": "https://stackoverflow.com/users/8935916/grilam14"}, "edited": false, "score": 0, "creation_date": 1515627167, "post_id": 48196454, "comment_id": 83376626, "body": "I&#39;ve found that sometimes the SQL migrations fail due to SQL server issues. Look at the migration file and try to run the SQL manually. If it gives you an error you might have to manually add the column to the table using your SQL interface."}], "tags": [], "owner": {"reputation": 139, "user_id": 2145872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0611b851822c74d716444ad6054dca7?s=128&d=identicon&r=PG", "display_name": "Matthew Dumas", "link": "https://stackoverflow.com/users/2145872/matthew-dumas"}, "is_accepted": false, "score": 0, "last_activity_date": 1515620138, "creation_date": 1515620138, "answer_id": 48196454, "question_id": 48196122, "link": "https://stackoverflow.com/questions/48196122/how-can-i-move-data-from-views-py-to-a-models-py-in-python-django-in-this-case/48196454#48196454", "title": "How can I move data from views.py to a models.py in python/django in this case?", "body": "<p>It looks like you're just trying to find a way to store the points in a score board. If that's true, then you should just add the score as an integer/decimal field and let the model handle storage for you.</p>\n\n<p>Something like this:\n<Code></p>\n\n<p>class score(models.Model):</p>\n\n<pre><code>ticker = models.CharField(max_length=10)\npoints = models.DecimalField(max_digits=3, decimal_places=1)\ncreated_at = models.DateTimeField(default=datetime.now, blank=True)\n</code></pre>\n\n<p></code></p>\n\n<p>Or for integer:</p>\n\n<p><Code>\nclass score(models.Model):</p>\n\n<pre><code>ticker = models.CharField(max_length=10)\npoints = models.IntegerField()\ncreated_at = models.DateTimeField(default=datetime.now, blank=True)\n</code></pre>\n\n<p></code></p>\n"}], "owner": {"reputation": 47, "user_id": 8935916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/76bce44d83676e2fc9aa43267d39ffe0?s=128&d=identicon&r=PG&f=1", "display_name": "grilam14", "link": "https://stackoverflow.com/users/8935916/grilam14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515620138, "creation_date": 1515618568, "last_edit_date": 1515619468, "question_id": 48196122, "link": "https://stackoverflow.com/questions/48196122/how-can-i-move-data-from-views-py-to-a-models-py-in-python-django-in-this-case", "title": "How can I move data from views.py to a models.py in python/django in this case?", "body": "<p>I put these files in the order the data travels. First the user submits a ticker via Charfield on the add file. Then the add function creates an instance of the score class by submitting the ticker value, which works. I also calculate points in add, but I can't figure out a way to send points to the class in models also. </p>\n\n<p>All of the examples I've seen on StackOverflow usually have variables in the class being related to some CharField or ForeignKey. So it possible to send points to score()?</p>\n\n<p>I also know scoreCalculate works.</p>\n\n<p>The error this code generates:</p>\n\n<pre><code>File \"~/models.py\", line 6, in score\n    points;     \n\nNameError: name 'points' is not defined\n</code></pre>\n\n<p>Of course it isn't defined, I'm just not sure what to define it as.</p>\n\n<p>add.html</p>\n\n<pre><code>&lt;form action=\"{% url 'add' %}\" method=\"post\"&gt;\n{% csrf_token %}\n\n    &lt;label for=\"ticker\"&gt;Ticker&lt;/label&gt;&lt;br /&gt;\n    &lt;input type=\"text\" name=\"ticker\" id=\"ticker\"/&gt;\n    &lt;br&gt;&lt;br&gt;\n    &lt;input type=\"submit\" value=\"submit\" /&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render, redirect\nfrom django.http import HttpResponse\n\nfrom .models import score\nfrom Rssfeed import scoreCalculate\n\ndef add(request):\n    if(request.method == 'POST'):\n        ticker = request.POST['ticker']\n\n        pts = scoreCalculate(ticker=ticker)\n        sc = score(ticker = ticker)\n\n        sc.save()\n\n        return redirect('/')\n    else:\n        return render(request, 'add.html')\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\nfrom datetime import datetime\n\nclass score(models.Model):\n\n    ticker = models.CharField(max_length=10)\n    points; #not sure what to put here\n    created_at = models.DateTimeField(default=datetime.now, blank=True)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 302, "user_id": 4901058, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1826d3df04ea20da72b29b50be6a054a?s=128&d=identicon&r=PG&f=1", "display_name": "tormond", "link": "https://stackoverflow.com/users/4901058/tormond"}, "edited": false, "score": 2, "creation_date": 1515618784, "post_id": 48196115, "comment_id": 83373337, "body": "Looks like all you need to do is merge on id."}, {"owner": {"reputation": 1102, "user_id": 5660197, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/97df5665e51bcf688208167c32a7bb4e?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/5660197/tony"}, "edited": false, "score": 0, "creation_date": 1515618868, "post_id": 48196115, "comment_id": 83373375, "body": "Can you not merge or join all the dataframes and then drop what you don&#39;t need?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515622834, "post_id": 48196115, "comment_id": 83375109, "body": "If my answer did not solve your problem, please let me know."}], "answers": [{"comments": [{"owner": {"reputation": 3091, "user_id": 1918832, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b927490da8d7227dd7bd824afc475c21?s=128&d=identicon&r=PG", "display_name": "Jaswanth Kumar", "link": "https://stackoverflow.com/users/1918832/jaswanth-kumar"}, "edited": false, "score": 1, "creation_date": 1515625195, "post_id": 48196194, "comment_id": 83376007, "body": "Thanks, this worked perfectly. Although I need to watch out for few case mismatches. I converted the index to lower case and tried it again. Very efficient!"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1515618928, "creation_date": 1515618928, "answer_id": 48196194, "question_id": 48196115, "link": "https://stackoverflow.com/questions/48196115/pandas-mapping-columns-from-multiple-dataframes/48196194#48196194", "title": "Pandas mapping columns from multiple dataframes", "body": "<p>First, set <code>name</code> as the index for <code>df2</code>. </p>\n\n<pre><code>dfmap = df2.set_index(\"name\").uuid\ndfmap\n\nname\nThe Dark Knight      m1\nPulp Fiction         m2\nSchindler\u2019s List     m3\nChristopher Nolan    d1\nChristian Bale       a1\nQuentin Tarantino    d2\nJohn Travolta        a2\nSteven Spielberg     d3\nLiam Neeson          a3\nName: uuid, dtype: object\n</code></pre>\n\n<p>We'll use this series object to map keys to values in <code>df</code>. Next, call <code>map</code>/<code>replace</code> twice - </p>\n\n<pre><code>df['mid'] = df.Movie.map(dfmap)\ndf['cid'] = df.Cast.map(dfmap)\n\ndf\n\n               Movie               Cast mid cid\nid                                             \n0    The Dark Knight  Christopher Nolan  m1  d1\n1    The Dark Knight     Christian Bale  m1  a1\n2       Pulp Fiction  Quentin Tarantino  m2  d2\n3       Pulp Fiction      John Travolta  m2  a2\n4   Schindler\u2019s List   Steven Spielberg  m3  d3\n</code></pre>\n"}], "owner": {"reputation": 3091, "user_id": 1918832, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b927490da8d7227dd7bd824afc475c21?s=128&d=identicon&r=PG", "display_name": "Jaswanth Kumar", "link": "https://stackoverflow.com/users/1918832/jaswanth-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 48196194, "answer_count": 1, "score": 0, "last_activity_date": 1515618928, "creation_date": 1515618545, "question_id": 48196115, "link": "https://stackoverflow.com/questions/48196115/pandas-mapping-columns-from-multiple-dataframes", "title": "Pandas mapping columns from multiple dataframes", "body": "<p>I have a dataframe (FinalDF) which looks like this</p>\n\n<pre><code>id | Movie | Cast\n0   The Dark Knight Christopher Nolan\n1   The Dark Knight Christian Bale\n2   Pulp Fiction    Quentin Tarantino\n3   Pulp Fiction    John Travolta\n4   Schindler\u2019s List    Steven Spielberg\n5   Schindler\u2019s List    Liam Neeson\n</code></pre>\n\n<p>and Movie names are mapped to IDs like this in movie_cast_DF</p>\n\n<pre><code>id | name | uuid\n-------------------------\n 1 | The Dark Knight        | m1\n 2 | Pulp Fiction           | m2\n 3 | Schindler\u2019s List       | m3\n 4 | Christopher Nolan      | d1\n 5 | Christian Bale         | a1\n 6 | Quentin Tarantino      | d2\n 7 | John Travolta          | a2\n 8 | Steven Spielberg       | d3\n 9 | Liam Neeson            | a3\n</code></pre>\n\n<p>I need to map the ids in the columns like this in FinalDF</p>\n\n<pre><code>id  | Movie |   Cast |  mid     | cid\n------------------------------------------------------------------\n0   The Dark Knight     Christopher Nolan       m1      d1\n1   The Dark Knight     Christian Bale          m1      a1\n2   Pulp Fiction        Quentin Tarantino       m2      d2\n3   Pulp Fiction        John Travolta           m2      a2\n4   Schindler\u2019s List    Steven Spielberg        m3      d3\n5   Schindler\u2019s List    Liam Neeson             m3      a3\n</code></pre>\n\n<p>I tried using following method:</p>\n\n<pre><code>def getID(x):\n    try:\n        return movie_cast_DF[movie_cast_DF['name'].str.contains(x.lower(), case=False)]['uuid'].values[0]\n    except:\n        return None\nFinalDF['mid'] = FinalDF['Movie'].apply(getID)\nFinalDF['cid'] = FinalDF['Cast'].apply(getID)\nFinalDF.head()\n</code></pre>\n\n<p>Is there any efficient and faster way to do the mapping?</p>\n"}, {"tags": ["python", "json", "bash", "curl", "gitlab-ci"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1515618647, "post_id": 48196080, "comment_id": 83373265, "body": "You should be able to trivially remove curl, bash, JSON and Gitlab from all of this to produce a minimal and complete example. That said, check out <code>jq</code>, which is a processor for JSON."}, {"owner": {"reputation": 15, "user_id": 7193815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d896c74183c0f2934cf07cff7ef9bcae?s=128&d=identicon&r=PG&f=1", "display_name": "LearnUntillDeath", "link": "https://stackoverflow.com/users/7193815/learnuntilldeath"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1515618794, "post_id": 48196080, "comment_id": 83373341, "body": "@UlrichEckhardt...I dont want the build systems to install another dependency so I dropped that idea. Thanks."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1515619844, "post_id": 48196080, "comment_id": 83373777, "body": "BTW, what&#39;s the goal of this loop? Is there a reason you want to run <code>curl</code> four times, rather than just running it once and reading the results into four elements of a shell array?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1515619880, "post_id": 48196080, "comment_id": 83373793, "body": "As dependencies go, <code>jq</code> is pretty lightweight; it&#39;s a single statically linked executable. It&#39;s hard to justify using anything else over <code>curl &#39;...&#39; | jq -r &#39;.[1:5][]|.stage&#39;</code> (no shell loop needed, assuming you don&#39;t really need to run <code>curl</code> 4 times)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1515619974, "post_id": 48196080, "comment_id": 83373836, "body": "<i>nod</i> -- and if you want to, say, treat the individual results in shell separately, that&#39;s easily done with <code>mapfile -t stages &lt; &lt;(curl ... | jq ...)</code> to put them into <code>${stages[0]}</code>, <code>${stages[1]}</code>, etc. Same is possible with Python just as much as jq."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1515619367, "post_id": 48196132, "comment_id": 83373586, "body": "I don&#39;t recommend building the Python command dynamically like this; rather, pass <code>$i</code> via a command-line argument. <code>python -c &#39;import sys, json; print(json.load(sys.stdin)[sys.argv[1]][&quot;stage&quot;])&#39; &quot;$i&quot;</code>."}, {"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1515619728, "post_id": 48196132, "comment_id": 83373723, "body": "@chepner Agreed. Edited."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1515619886, "post_id": 48196132, "comment_id": 83373795, "body": "BTW, I wonder if the OP would be better served by Python code that prints the results for all four stages one line at a time, and reads that into a bash array in a single pass rather than needing to run four identical <code>curl</code> commands to extract separate elements from the same array."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1515620087, "post_id": 48196132, "comment_id": 83373893, "body": "(Depending on the details of the data structure, it might need to be <code>int(sys.argv[1])</code> rather than leaving that as a string; OP didn&#39;t really provide enough detail to say)."}, {"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1515620249, "post_id": 48196132, "comment_id": 83373972, "body": "@CharlesDuffy Yes. Given OP has accepted the answer, i guess we can assume they are take it from here (probably) :)"}, {"owner": {"reputation": 15, "user_id": 7193815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d896c74183c0f2934cf07cff7ef9bcae?s=128&d=identicon&r=PG&f=1", "display_name": "LearnUntillDeath", "link": "https://stackoverflow.com/users/7193815/learnuntilldeath"}, "edited": false, "score": 0, "creation_date": 1515620932, "post_id": 48196132, "comment_id": 83374313, "body": "@CharlesDuffy...I would love to hear about the solution you mentioned in your first comment. Regarding storing the stages into an array in single go. Can you please let me know what details you need, I can provide. I would love to see the solution."}], "tags": [], "owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "is_accepted": true, "score": 0, "last_activity_date": 1515619837, "last_edit_date": 1515619837, "creation_date": 1515618631, "answer_id": 48196132, "question_id": 48196080, "link": "https://stackoverflow.com/questions/48196080/how-to-pipe-json-output-of-curl-to-query-a-json-value-using-python/48196132#48196132", "title": "How to pipe JSON output of curl to query a JSON value using python", "body": "<p>In <code>bash</code> (and other shells), variables are not expanded when put inside single quotes.</p>\n\n<p>Better approach than my original (as @chepner pointed out), pass the shell variable as command line argument to <code>python</code> command itself:</p>\n\n<pre><code>curl ... | python -c \\\n   'import sys, json; print(json.load(sys.stdin)[sys.argv[1]][\"stage\"])' \"$i\"\n</code></pre>\n\n<p><strong>Original:</strong></p>\n\n<p>You can get around by using double quotes like:</p>\n\n<pre><code>curl ... | python -c \\\n            'import sys, json; print(json.load(sys.stdin)['\"$i\"'][\"stage\"])'\n</code></pre>\n\n<p>i.e. terminating the single quote just before variable reference, and continuing afterwards.</p>\n"}], "owner": {"reputation": 15, "user_id": 7193815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d896c74183c0f2934cf07cff7ef9bcae?s=128&d=identicon&r=PG&f=1", "display_name": "LearnUntillDeath", "link": "https://stackoverflow.com/users/7193815/learnuntilldeath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2076, "favorite_count": 0, "accepted_answer_id": 48196132, "answer_count": 1, "score": 0, "last_activity_date": 1515619837, "creation_date": 1515618388, "question_id": 48196080, "link": "https://stackoverflow.com/questions/48196080/how-to-pipe-json-output-of-curl-to-query-a-json-value-using-python", "title": "How to pipe JSON output of curl to query a JSON value using python", "body": "<p>I am writing a bash script where the curl command returns a JSON array of objects and then I need to filter the required values out of those objects. So I need to iterate through the objects to check then and parse them and finally get the result.</p>\n\n<p>But inside my bash script if I do something like,</p>\n\n<pre><code>for i in 1 2 3 4\n    do\n        curl -XGET 'https://gitlab.com/user/api/v4/projects/1/pipelines/1/jobs' | python -c 'import sys, json; print(json.load(sys.stdin)[$i][\"stage\"])'\n    done\n</code></pre>\n\n<p>I get the following error: </p>\n\n<pre><code>File \"&lt;string&gt;\", line 1\n    import sys, json; print($i)\n                            ^\nSyntaxError: invalid syntax\n100  3016  100  3016    0     0  18748      0 --:--:-- --:--:-- --:--:-- 19210\n(23) Failed writing body\n</code></pre>\n\n<p>Everything Ok if I remove the python part after the pipe, but why can't I use python in combination with curl ? what am I doing wrong here ?</p>\n"}, {"tags": ["python", "django", "pagination"], "comments": [{"owner": {"reputation": 135, "user_id": 4691204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z0fJSJ6FR40/AAAAAAAAAAI/AAAAAAAAFL4/41h9_3Sj5jg/photo.jpg?sz=128", "display_name": "anmaxvl", "link": "https://stackoverflow.com/users/4691204/anmaxvl"}, "edited": false, "score": 0, "creation_date": 1515619356, "post_id": 48196024, "comment_id": 83373582, "body": "Have you read the docs <a href=\"https://docs.djangoproject.com/en/2.0/topics/pagination/#using-paginator-in-a-view\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.0/topics/pagination/&hellip;</a>? The example in the docs is using only one model, in your case you would have to handle the corner cases, that may arise here."}, {"owner": {"reputation": 25, "user_id": 9074021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTPD6Sgld_0/AAAAAAAAAAI/AAAAAAAAABs/MS4YrhlIx6M/photo.jpg?sz=128", "display_name": "Gaurav Bhagat", "link": "https://stackoverflow.com/users/9074021/gaurav-bhagat"}, "reply_to_user": {"reputation": 135, "user_id": 4691204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z0fJSJ6FR40/AAAAAAAAAAI/AAAAAAAAFL4/41h9_3Sj5jg/photo.jpg?sz=128", "display_name": "anmaxvl", "link": "https://stackoverflow.com/users/4691204/anmaxvl"}, "edited": false, "score": 0, "creation_date": 1515621520, "post_id": 48196024, "comment_id": 83374569, "body": "I have read the docs but the problem arises I have 3 querysets as you can see and I dont know how to paginate them together"}, {"owner": {"reputation": 3061, "user_id": 6396981, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1W4ME.png?s=128&g=1", "display_name": "binpy", "link": "https://stackoverflow.com/users/6396981/binpy"}, "edited": false, "score": 0, "creation_date": 1515621772, "post_id": 48196024, "comment_id": 83374686, "body": "might help you.. <a href=\"https://djangosnippets.org/snippets/10575/\" rel=\"nofollow noreferrer\">djangosnippets.org/snippets/10575</a>"}, {"owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "edited": false, "score": 1, "creation_date": 1515621773, "post_id": 48196024, "comment_id": 83374687, "body": "You should rephrase your question to reflect your specific requirement. Good Q and A is also helpful for others. ;)"}, {"owner": {"reputation": 135, "user_id": 4691204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z0fJSJ6FR40/AAAAAAAAAAI/AAAAAAAAFL4/41h9_3Sj5jg/photo.jpg?sz=128", "display_name": "anmaxvl", "link": "https://stackoverflow.com/users/4691204/anmaxvl"}, "reply_to_user": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "edited": false, "score": 0, "creation_date": 1515622148, "post_id": 48196024, "comment_id": 83374827, "body": "As @allcaps mentioned, you need to specify what you need. You could obviously create 3 <code>Paginator</code>s, set the page sizes and return the corresponding page for each one of them and then handle cases when (for example) <code>Category</code> doesn&#39;t have the next page but <code>Image</code> and <code>Video</code> do, etc."}], "answers": [{"tags": [], "owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "is_accepted": false, "score": 0, "last_activity_date": 1515660150, "last_edit_date": 1515660150, "creation_date": 1515622564, "answer_id": 48196995, "question_id": 48196024, "link": "https://stackoverflow.com/questions/48196024/how-do-i-paginate-in-django/48196995#48196995", "title": "How do I paginate in django?", "body": "<p>As of Django 1.11 It\u2019s possible to combine queries across different tables using the <a href=\"https://docs.djangoproject.com/en/1.11/ref/models/querysets/#django.db.models.query.QuerySet.union\" rel=\"nofollow noreferrer\">SQL union operator</a>. </p>\n\n<pre><code>&gt;&gt;&gt; qs1 = Author.objects.values_list('name')\n&gt;&gt;&gt; qs2 = Entry.objects.values_list('headline')\n&gt;&gt;&gt; qs1.union(qs2).order_by('name')\n</code></pre>\n\n<p>Now jou can feed <code>qs1</code> into a <a href=\"https://docs.djangoproject.com/en/1.11/topics/pagination/#django.core.paginator.Paginator\" rel=\"nofollow noreferrer\">Paginator</a>.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.11/topics/pagination/#using-paginator-in-a-view\" rel=\"nofollow noreferrer\">The documentations shows how to implement this in a view</a>. I'm not going to copy paste examples. Just read the documentation on pagination.</p>\n"}], "owner": {"reputation": 25, "user_id": 9074021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTPD6Sgld_0/AAAAAAAAAAI/AAAAAAAAABs/MS4YrhlIx6M/photo.jpg?sz=128", "display_name": "Gaurav Bhagat", "link": "https://stackoverflow.com/users/9074021/gaurav-bhagat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515660150, "creation_date": 1515618159, "question_id": 48196024, "link": "https://stackoverflow.com/questions/48196024/how-do-i-paginate-in-django", "title": "How do I paginate in django?", "body": "<p>Here is the code of the views.py</p>\n\n<pre><code>def view_images(request):\n    return render_to_response('gallery/index.html',{\n        'categories': Category.objects.all(),\n        'images': Image.objects.all(),\n        'video': Video.objects.all()\n    })\n</code></pre>\n\n<p>I know its a messy way to code but I want to paginate this code</p>\n"}, {"tags": ["python", "python-3.x", "time"], "comments": [{"owner": {"reputation": 2616, "user_id": 6689249, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lhuuxYmUlKY/AAAAAAAAAAI/AAAAAAAAAE4/2AOKlbKhtRg/photo.jpg?sz=128", "display_name": "aiven", "link": "https://stackoverflow.com/users/6689249/aiven"}, "edited": false, "score": 2, "creation_date": 1515618234, "post_id": 48196000, "comment_id": 83373052, "body": "I&#39;ve got another result <code>&gt;&gt;&gt;&gt; time() - time() -1.9073486328125e-06</code>. Maybe your computer is too fast (:"}, {"owner": {"reputation": 20333, "user_id": 774078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/seSXR.png?s=128&g=1", "display_name": "Sterling Archer", "link": "https://stackoverflow.com/users/774078/sterling-archer"}, "edited": false, "score": 1, "creation_date": 1515618252, "post_id": 48196000, "comment_id": 83373061, "body": "Is it 0.0 every run?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1515618272, "post_id": 48196000, "comment_id": 83373080, "body": "By the way, doing <code>[time.time() for _ in range(50)]</code> generates about ~11 unique timestamps on my machine."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1515618297, "post_id": 48196000, "comment_id": 83373092, "body": "it depends on the time slices the operating system uses. <code>time.time() - time.time() -&gt; -9.5367431640625e-07</code>."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1515618317, "post_id": 48196000, "comment_id": 83373108, "body": "I tried this on Python 2 and got 0.0 result about 1 out of every 3-4 tries.  But I tried 20+ times on Python 3 and never got 0.0."}, {"owner": {"reputation": 81, "user_id": 9023147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7377ecc337bd1315f3600884f7f89cfd?s=128&d=identicon&r=PG&f=1", "display_name": "NPE_Exception", "link": "https://stackoverflow.com/users/9023147/npe-exception"}, "reply_to_user": {"reputation": 20333, "user_id": 774078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/seSXR.png?s=128&g=1", "display_name": "Sterling Archer", "link": "https://stackoverflow.com/users/774078/sterling-archer"}, "edited": false, "score": 0, "creation_date": 1515618495, "post_id": 48196000, "comment_id": 83373188, "body": "@SterlingArcher I performed this:  <code>for x in range(100):     print(time.time() - time.time())</code>  And it returned 0.0 every time. This is Python 3.6.4, running on Windows 10 64bit."}, {"owner": {"reputation": 3294, "user_id": 2190251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9318640992144436a6b04d07eb947933?s=128&d=identicon&r=PG", "display_name": "FelixEnescu", "link": "https://stackoverflow.com/users/2190251/felixenescu"}, "edited": false, "score": 0, "creation_date": 1515618681, "post_id": 48196000, "comment_id": 83373277, "body": "Confirm on Win7 64 bits, Python 3.6.0 (from Anaconda). May be is Windows related?"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1515619032, "post_id": 48196000, "comment_id": 83373440, "body": "I am getting <code>time.time() - time.time()</code> -&gt; <code>-9.5367431640625e-07</code> on my Mac with Python 3.4.5 in general but once in a while it gives me <code>0.0</code>"}, {"owner": {"reputation": 110538, "user_id": 1219006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M1ZlR.jpg?s=128&g=1", "display_name": "jamylak", "link": "https://stackoverflow.com/users/1219006/jamylak"}, "edited": false, "score": 0, "creation_date": 1515620658, "post_id": 48196000, "comment_id": 83374180, "body": "<code>&gt;&gt;&gt; [time.time() - time.time() for i in range(10)]</code> <code>[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -9.5367431640625e-07, 0.0, 0.0, 0.0]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9023147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7377ecc337bd1315f3600884f7f89cfd?s=128&d=identicon&r=PG&f=1", "display_name": "NPE_Exception", "link": "https://stackoverflow.com/users/9023147/npe-exception"}, "edited": false, "score": 0, "creation_date": 1515619182, "post_id": 48196073, "comment_id": 83373507, "body": "Thank you, I believe <b>close enough together</b> is what is happening in my case."}], "tags": [], "owner": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 3, "last_activity_date": 1515618339, "creation_date": 1515618339, "answer_id": 48196073, "question_id": 48196000, "link": "https://stackoverflow.com/questions/48196000/why-is-time-time-time-time-0-0/48196073#48196073", "title": "Why is time.time() - time.time() = 0.0?", "body": "<p>The resolution of the timer isn't unlimited; it goes up by small amounts periodically. If the two calls are close enough together, you will see a zero value. If you tried a large number of such calls, you would probably find that the difference is zero most of the time, and some number of microseconds the rest of the time, depending on your particular system's speed, hardware details, and kernel implementation.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 9023147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7377ecc337bd1315f3600884f7f89cfd?s=128&d=identicon&r=PG&f=1", "display_name": "NPE_Exception", "link": "https://stackoverflow.com/users/9023147/npe-exception"}, "edited": false, "score": 0, "creation_date": 1515619246, "post_id": 48196176, "comment_id": 83373530, "body": "Thank you, I think this function is the best way I could have understood what was happening."}], "tags": [], "owner": {"reputation": 751, "user_id": 625444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f59fc2e5fe801722a06429d61e38a0a?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/625444/zak"}, "is_accepted": false, "score": 1, "last_activity_date": 1515618842, "creation_date": 1515618842, "answer_id": 48196176, "question_id": 48196000, "link": "https://stackoverflow.com/questions/48196000/why-is-time-time-time-time-0-0/48196176#48196176", "title": "Why is time.time() - time.time() = 0.0?", "body": "<p>Not Always, just depends on your cpu scheduling and the clock:</p>\n\n<pre><code>n, d = 0, 0.0\nwhile d == 0.0:\n     d = time.time() - time.time()\n     n += 1\nprint(n, d)\n\n26096 -0.0010001659393310547\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "is_accepted": false, "score": 0, "last_activity_date": 1515618845, "creation_date": 1515618845, "answer_id": 48196178, "question_id": 48196000, "link": "https://stackoverflow.com/questions/48196000/why-is-time-time-time-time-0-0/48196178#48196178", "title": "Why is time.time() - time.time() = 0.0?", "body": "<p>Python's time.time() generates the amount of time since the epoch, measured in thirds of a microsecond, a unit I like to call deltas. This means there are 3 million deltas in every second. </p>\n\n<p>Like a clock only reports time to the nearest second, python will only report time to the nearest delta. So if your code can complete before the time moves onto the next delta, it will report as 0.0!</p>\n"}, {"comments": [{"owner": {"reputation": 352, "user_id": 439905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d73b3f65f1c3479983efdb0c3e116eb4?s=128&d=identicon&r=PG", "display_name": "Jacob Lee", "link": "https://stackoverflow.com/users/439905/jacob-lee"}, "edited": false, "score": 0, "creation_date": 1534867792, "post_id": 48196198, "comment_id": 90855818, "body": "Do you happen to know which systems do not provide better precision that 1 second?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 352, "user_id": 439905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d73b3f65f1c3479983efdb0c3e116eb4?s=128&d=identicon&r=PG", "display_name": "Jacob Lee", "link": "https://stackoverflow.com/users/439905/jacob-lee"}, "edited": false, "score": 0, "creation_date": 1534871922, "post_id": 48196198, "comment_id": 90857810, "body": "@JacobLee: I&#39;m not sure if this is what the docs are referring to, but depending on how Windows is configured, it <a href=\"https://docs.microsoft.com/en-us/windows-server/networking/windows-time-service/support-boundary\" rel=\"nofollow noreferrer\">may only provide 1 second accuracy</a>. (That link was found via, <a href=\"https://stackoverflow.com/questions/27253216/configure-windows-time-with-high-sub-seconds-precision\">this question</a>.)"}, {"owner": {"reputation": 352, "user_id": 439905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d73b3f65f1c3479983efdb0c3e116eb4?s=128&d=identicon&r=PG", "display_name": "Jacob Lee", "link": "https://stackoverflow.com/users/439905/jacob-lee"}, "edited": false, "score": 0, "creation_date": 1534962414, "post_id": 48196198, "comment_id": 90896466, "body": "Thanks for looking into that. The accuracy of a measured interval t2 - t1 will depend on the stability of the clock and the clock&#39;s precision or resolution (the smallest time increment), but not on whether time1 and time2 &quot;true&quot; clock times wrt an authoritative clock. Of course, Python could run on a wide variety of systems, and time.time() depends on the system dependent C program of that name, so it could just be an open-ended caveat."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": false, "score": 2, "last_activity_date": 1515618950, "creation_date": 1515618950, "answer_id": 48196198, "question_id": 48196000, "link": "https://stackoverflow.com/questions/48196000/why-is-time-time-time-time-0-0/48196198#48196198", "title": "Why is time.time() - time.time() = 0.0?", "body": "<p>Per the <a href=\"https://docs.python.org/3/library/time.html#time.time\" rel=\"nofollow noreferrer\">docs on <code>time.time</code></a>:</p>\n\n<blockquote>\n  <p>... even though the time is always returned as a floating point number, <strong>not all systems provide time with a better precision than 1 second</strong>.</p>\n</blockquote>\n\n<p>(my emphasis). For Python3.3+ use <a href=\"https://docs.python.org/3/library/time.html#time.perf_counter\" rel=\"nofollow noreferrer\"><code>time.perf_counter</code></a> instead.\nOr for Python3.2 or older, or for backwards compatibility, use\n<a href=\"https://docs.python.org/3.2/library/timeit.html#timeit.default_timer\" rel=\"nofollow noreferrer\"><code>timeit.default_timer</code></a>, which attempts to pick the most accurate clock for your\nsystem.</p>\n"}], "owner": {"reputation": 81, "user_id": 9023147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7377ecc337bd1315f3600884f7f89cfd?s=128&d=identicon&r=PG&f=1", "display_name": "NPE_Exception", "link": "https://stackoverflow.com/users/9023147/npe-exception"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1954, "favorite_count": 1, "accepted_answer_id": 48196073, "answer_count": 4, "score": 1, "last_activity_date": 1515618950, "creation_date": 1515618083, "question_id": 48196000, "link": "https://stackoverflow.com/questions/48196000/why-is-time-time-time-time-0-0", "title": "Why is time.time() - time.time() = 0.0?", "body": "<pre><code>Python 3.6.4 (v3.6.4:d48eceb, Dec 19 2017, 06:54:40) [MSC v.1900 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;\n&gt;&gt;&gt; import time\n&gt;&gt;&gt; time.time() - time.time()\n0.0\n</code></pre>\n\n<p>Why is this the case? From my simple understanding, this function returns the system clock in seconds since the epoch at the exact time of the call. But shouldn't the two calls to time.time() return slightly different floats?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 3, "creation_date": 1515618241, "post_id": 48195993, "comment_id": 83373056, "body": "This looks like a bug..."}, {"owner": {"reputation": 1102, "user_id": 5660197, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/97df5665e51bcf688208167c32a7bb4e?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/5660197/tony"}, "edited": false, "score": 1, "creation_date": 1515618918, "post_id": 48195993, "comment_id": 83373392, "body": "Why would it unpack the double list, but not unpack the single element list?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1515619510, "post_id": 48195993, "comment_id": 83373645, "body": "I&#39;m still not sure I&#39;d expect assignment to a single column to unpack values of strings. If you specify multiple columns with an equal number of values, then the best bet is that you want to unpack. If I <i>wanted</i> a list in that column, how else could I do it with this syntax? Just don&#39;t give a single-item list. I can see it both ways."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1515623760, "post_id": 48195993, "comment_id": 83375468, "body": "It would be great if you can submit it in github pandas"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5453014"}, "is_accepted": false, "score": 0, "last_activity_date": 1515636926, "last_edit_date": 1515636926, "creation_date": 1515632240, "answer_id": 48198393, "question_id": 48195993, "link": "https://stackoverflow.com/questions/48195993/unexpectedly-assign-in-pandas-by-df-loc-and-single-element-list/48198393#48198393", "title": "Unexpectedly assign in pandas by df.loc and single-element list", "body": "<p>It seems that assigning values by a list is not recommended.</p>\n\n<p>c.f <a href=\"https://github.com/pandas-dev/pandas/issues/16864\" rel=\"nofollow noreferrer\">https://github.com/pandas-dev/pandas/issues/16864</a></p>\n\n<p>Instead I will use element-wise method as follows:</p>\n\n<pre><code>for i, v in enumerate([\"X\", \"Y\", \"Z\"]):\n    df.loc[0, [\"A\", \"B\", \"C\"]][i] = v\n</code></pre>\n\n<p>Thanks for all comments!</p>\n\n<p>EDIT:</p>\n\n<p>The above code does NOT work. It can't replace values in df. (But it works if \n<em>df.loc[0, [\"A\", \"B\", \"C\"]]</em> is replaced by pd.Series.)</p>\n\n<p>the revised code is</p>\n\n<pre><code>for c, v in zip([\"A\", \"B\", \"C\"], [\"X\", \"Y\", \"Z\"]):\n    df.loc[0, c] = v\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5453014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 797, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1515636926, "creation_date": 1515618045, "question_id": 48195993, "link": "https://stackoverflow.com/questions/48195993/unexpectedly-assign-in-pandas-by-df-loc-and-single-element-list", "title": "Unexpectedly assign in pandas by df.loc and single-element list", "body": "<p>When I assign new value to DataFrame by df.loc method and a list containing single element, pandas behaves not the way I expected.</p>\n\n<p>For example (in python 3.6 and pandas 0.22.0):</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame([[1,2,3]],columns=[\"A\", \"B\", \"C\"])\n\n# a list has two or more elements\ndf.loc[0, [\"A\", \"B\"]] = [\"X\", \"Y\"]\ndf\n   A  B  C\n0  X  Y  3\n\n# a list has single element\ndf.loc[0, [\"C\"]] = [\"Z\"]\n</code></pre>\n\n<p>as I expected</p>\n\n<pre><code>df\n   A  B  C\n0  X  Y  Z\n</code></pre>\n\n<p>but the result is</p>\n\n<pre><code>df\n   A  B    C\n0  X  Y  [Z]\n</code></pre>\n\n<p>Is this behavior according to pandas' implementation?</p>\n\n<p>I want to assign values the same way independently of how much elements a list has.</p>\n"}, {"tags": ["python", "tensorflow", "word-embedding"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 5458277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddd825391eaadb4a94e873bc2ca2f0?s=128&d=identicon&r=PG&f=1", "display_name": "packybear", "link": "https://stackoverflow.com/users/5458277/packybear"}, "edited": false, "score": 0, "creation_date": 1515783298, "post_id": 48216791, "comment_id": 83447093, "body": "Thanks for your comment! I realized this after I posted the question... However, I still need help in how to deal with this problem..."}, {"owner": {"reputation": 3064, "user_id": 2289710, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/057Jk.jpg?s=128&g=1", "display_name": "freude", "link": "https://stackoverflow.com/users/2289710/freude"}, "reply_to_user": {"reputation": 367, "user_id": 5458277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddd825391eaadb4a94e873bc2ca2f0?s=128&d=identicon&r=PG&f=1", "display_name": "packybear", "link": "https://stackoverflow.com/users/5458277/packybear"}, "edited": false, "score": 0, "creation_date": 1515791547, "post_id": 48216791, "comment_id": 83450653, "body": "I have added more explanations, I hope it helps"}, {"owner": {"reputation": 367, "user_id": 5458277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddd825391eaadb4a94e873bc2ca2f0?s=128&d=identicon&r=PG&f=1", "display_name": "packybear", "link": "https://stackoverflow.com/users/5458277/packybear"}, "edited": false, "score": 0, "creation_date": 1515877656, "post_id": 48216791, "comment_id": 83471137, "body": "Thanks, it helps :) But I think I still need to look for other solutions for my problem; not by comparing values from tensors, but maybe use NaN or other methods to directly implement this computation. Please let me know if you have any more comments and I really appreciate your help!"}], "tags": [], "owner": {"reputation": 3064, "user_id": 2289710, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/057Jk.jpg?s=128&g=1", "display_name": "freude", "link": "https://stackoverflow.com/users/2289710/freude"}, "is_accepted": true, "score": 1, "last_activity_date": 1515792057, "last_edit_date": 1515792057, "creation_date": 1515709481, "answer_id": 48216791, "question_id": 48195979, "link": "https://stackoverflow.com/questions/48195979/tensorflow-compare-an-indexed-value-in-a-tensor-with-an-integer-for-if-conditio/48216791#48216791", "title": "Tensorflow, compare an indexed value in a tensor with an integer for if condition", "body": "<p>I think it will be helpful to understand how to get values from the Tensorflow tensor. Take a look on the accepted answer <a href=\"https://stackoverflow.com/questions/33633370/how-to-print-the-value-of-a-tensor-object-in-tensorflow\">here</a>. Remember that Tensorflow may be seen as a symbolic language, so <code>tf.Tensor</code> is a symbol which tales certain values while evaluating within a session, not when it is defined or stack with other operations. </p>\n\n<p>If you want to make a comparison within a graph, use tensorflow special functions for tensors comparisons like <code>tf.equal</code>, <code>tf.less</code> etc. For instace, I compare the first element of a tensor <code>a</code> with another constant tensor b:</p>\n\n<pre><code># Here is an example of two tensors\na = tf.constant([[1.0, 0.0], [0.0, 1.0], [1.0, 0.0], [0.0, 1.0]])\nb = tf.constant(1, dtype=tf.float32)\n\n# generate a tensor representing a result of comparison\nc = tf.equal(a[0, 0], b)\n# Evaluate the output tensor in a session\nprint(tf.Session().run(c))\n</code></pre>\n\n<p>The output is True </p>\n\n<p>Also, you may try to extract values of the tensor as follows:</p>\n\n<pre><code># Here is an example of the tensor\na = tf.constant([[1.0, 0.0], [0.0, 1.0], [1.0, 0.0], [0.0, 1.0]])\n\n# Evaluate the tensor in a session\nprint(tf.Session().run(a))\n</code></pre>\n\n<p>What is done here is conversion of the tf tensor into an numpy array, which you may process in any desired way. </p>\n"}], "owner": {"reputation": 367, "user_id": 5458277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddd825391eaadb4a94e873bc2ca2f0?s=128&d=identicon&r=PG&f=1", "display_name": "packybear", "link": "https://stackoverflow.com/users/5458277/packybear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2461, "favorite_count": 0, "accepted_answer_id": 48216791, "answer_count": 1, "score": 0, "last_activity_date": 1515792057, "creation_date": 1515617959, "last_edit_date": 1515709106, "question_id": 48195979, "link": "https://stackoverflow.com/questions/48195979/tensorflow-compare-an-indexed-value-in-a-tensor-with-an-integer-for-if-conditio", "title": "Tensorflow, compare an indexed value in a tensor with an integer for if condition", "body": "<p>I am using <strong>TensorFlow</strong> to do a customized embedding training similar to continuous bag of words (CBOW) model. However, unlike 'CBOW', which has a fixed length sliding window, my sliding window can be considered as flexible. Here is the problem:</p>\n\n<p>Let's say, the embedding is word embedding. For word t, I have a tensor showing indexes of its context words: [-1, 1, 2, -1]. The maximum window size is 4, so the length of the vector is 4. But sometimes I do not have 4 context words for a word, so I use '-1' to mean 'no word in this position', and other integers are the index of a word. I also have an 'embedding' tensor, which is the embeddings for all the words.   </p>\n\n<p>What I am trying to do is to get the average embedding for the context words in order to represent the context. For example, if the context words are [-1, 1, 2, -1], I would get (1 * (embedding for word 1) + 2 * (embedding for word 2) ) / 2. I just need to neglect all the -1.</p>\n\n<p>So in my code, I try to loop through the context word tensor to compare each value with -1 and use an if condition to control if I would add the embedding of this context word. I tried different ways for this, but always get 'TypeError: Using a <code>tf.Tensor</code> as a Python <code>bool</code> is not allowed.'</p>\n\n<p>Is there a way to solve this problem? Or even better, is there a better representation of positions with no words so I can compute more efficiently (Tried to use NaN but also get a lot of troubles...)?</p>\n\n<p>Thanks a lot for the help and hopefully I have a clear description of the problem.</p>\n"}, {"tags": ["python", "plotly"], "answers": [{"tags": [], "owner": {"reputation": 12368, "user_id": 5924562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCWoZ.jpg?s=128&g=1", "display_name": "Naren Murali", "link": "https://stackoverflow.com/users/5924562/naren-murali"}, "is_accepted": true, "score": 0, "last_activity_date": 1515650593, "creation_date": 1515650593, "answer_id": 48200689, "question_id": 48195931, "link": "https://stackoverflow.com/questions/48195931/multi-layer-plot-in-plolty/48200689#48200689", "title": "Multi-layer Plot in plolty", "body": "<p>You should be aware of the concept of traces, where we can place two types of charts in the same graph. To see the concept in action refer <a href=\"https://plot.ly/python/graphing-multiple-chart-types/\" rel=\"nofollow noreferrer\">Multiple Chart Types in Same Graph</a>. Just as a starting point please refer the below code snippet which does what you want.</p>\n\n<pre><code>from plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\nimport plotly.graph_objs as go\nfrom datetime import datetime\ninit_notebook_mode(connected=True)\n\ntrace0 = go.Scatter(\n    x=[1, 2, 3, 4],\n    y=[10, 11, 12, 13],\n    mode='markers',\n    marker=dict(\n        size=[40, 60, 80, 100],\n    )\n)\ntrace1 = go.Scatter(\n    x = [1, 2, 3, 4],\n    y = [10, 11, 12, 13],\n    line = dict(\n        color = ('rgb(22, 96, 167)'),\n        width = 4,\n        dash = 'line')\n)\n\ndata = [trace0, trace1]\niplot(data, filename='bubblechart-size')\n</code></pre>\n\n<p>The line that you require can also be generated using plotly shapes. Please read more about this <a href=\"https://plot.ly/python/shapes/\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7930903"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 48200689, "answer_count": 1, "score": 0, "last_activity_date": 1515650593, "creation_date": 1515617764, "question_id": 48195931, "link": "https://stackoverflow.com/questions/48195931/multi-layer-plot-in-plolty", "title": "Multi-layer Plot in plolty", "body": "<p>Can we plot another layer of plot over a visualization using plotly through python.?</p>\n\n<p>I am trying to join two points over a bubble chart. </p>\n"}, {"tags": ["python", "pytest", "gettext"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1515618729, "post_id": 48195889, "comment_id": 83373312, "body": "Why are you installing with &quot;gettext&quot; as the domain?  What guide are you following?"}, {"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1515619119, "post_id": 48195889, "comment_id": 83373483, "body": "I&#39;m using &quot;gettext&quot; as the domain because &quot;_&quot; breaks whenever somethings like <code>for _ in range(10):</code> exists."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1515619339, "post_id": 48195889, "comment_id": 83373573, "body": "@Jones <code>for call in repeat(function, 10): call(parameters)</code>"}, {"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "edited": false, "score": 0, "creation_date": 1515621679, "post_id": 48195889, "comment_id": 83374651, "body": "I&#39;m working in a fairly large existing codebase, and since assigning unused variables to <code>_</code> is a fairly common pattern, you can probably imagine how long it would take to change every instance of it. Do you honestly think using <code>_()</code> instead of <code>gettext()</code> would fix this issue?"}], "answers": [{"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": true, "score": 1, "last_activity_date": 1515676179, "creation_date": 1515676179, "answer_id": 48207909, "question_id": 48195889, "link": "https://stackoverflow.com/questions/48195889/gettext-breaks-pytest-tests/48207909#48207909", "title": "gettext breaks pytest tests", "body": "<p>You could write a custom fixture that will mimic the l10n installation in the test suite.</p>\n\n<h3>Example</h3>\n\n<p>I have tried to recreate your issue in a module named <code>spam.py</code>:</p>\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code># spam.py\nimport logging\n\n\nlogging.basicConfig(level=logging.INFO)\nLOGGER = logging.getLogger(__name__)\n\n\ndef eggs():\n    LOGGER.info(gettext('message'))\n\n\nif __name__ == '__main__':\n    import gettext as g\n    trans = g.translation('spam', 'locale', fallback=True)\n    trans.install('gettext')\n\n    eggs()\n</code></pre>\n\n<p>Running the program yields as expected:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>$ python spam.py\nINFO:__main__:message\n</code></pre>\n\n<p>Now here's a test for <code>spam.eggs</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># test_spam.py\n\nimport spam\n\ndef test_eggs(caplog):\n    spam.eggs()\n    assert len(caplog.records) == 1\n</code></pre>\n\n<p>The test fails as expected:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ pytest test_spam.py\n================================ test session starts ==============================\nplatform darwin -- Python 3.6.3, pytest-3.3.1, py-1.5.2, pluggy-0.6.0\nrootdir: /Users/hoefling/projects/private/stackoverflow/so-48195889, inifile:\nplugins: forked-0.2, xdist-1.20.1, mock-1.6.3, hypothesis-3.44.4\ncollected 1 item\n\ntest_spam.py F                                                                                                                             [100%]\n\n==================================== FAILURES =====================================\n____________________________________ test_eggs ____________________________________\n\ncaplog = &lt;_pytest.logging.LogCaptureFixture object at 0x1056ba0b8&gt;\n\n    def test_eggs(caplog):\n&gt;       spam.eggs()\n\ntest_spam.py:4:\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def eggs():\n&gt;       LOGGER.info(gettext('message'))\nE       NameError: name 'gettext' is not defined\n\nspam.py:9: NameError\n============================ 1 failed in 0.07 seconds =============================\n</code></pre>\n\n<h3>Solution</h3>\n\n<p>In the root dir, create a <code>conftest.py</code>. In there, implement a fixture that will automatically run once when a test session starts:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># conftest.py\n\nimport pytest\n\n@pytest.fixture(scope='session', autouse=True)\ndef install_l10n():\n    import gettext as g\n    trans = g.translation('spam', 'locale', fallback=True)\n    trans.install('gettext')\n</code></pre>\n\n<p>The test will pass now:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ pytest test_spam.py\n================================ test session starts ==============================\nplatform darwin -- Python 3.6.3, pytest-3.3.1, py-1.5.2, pluggy-0.6.0\nrootdir: /Users/hoefling/projects/private/stackoverflow/so-48195889, inifile:\nplugins: forked-0.2, xdist-1.20.1, mock-1.6.3, hypothesis-3.44.4\ncollected 1 item\n\ntest_spam.py .                                                                                                                             [100%]\n\n============================ 1 passed in 0.01 seconds =============================\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 48207909, "answer_count": 1, "score": 3, "last_activity_date": 1515676179, "creation_date": 1515617584, "last_edit_date": 1515617924, "question_id": 48195889, "link": "https://stackoverflow.com/questions/48195889/gettext-breaks-pytest-tests", "title": "gettext breaks pytest tests", "body": "<p>I'm working on internationalizing a Python tool.</p>\n\n<p>Following Python's docs, I initialize <code>gettext</code> at startup as such:</p>\n\n<pre><code>trans = gettext.translation(domain, 'locale', fallback=True)\ntrans.install('gettext')\n</code></pre>\n\n<p>And changed logging calls from:</p>\n\n<pre><code>logger.debug('message')\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>logger.debug(gettext('message'))\n</code></pre>\n\n<p>The issue is as follows. Since my unit tests run against individual methods/functions, <code>gettext</code> hasn't been installed, and <code>gettext()</code> isn't available. We get an error like this:</p>\n\n<pre><code>&gt;       logger.debug(gettext('message'))\nE       NameError: name 'gettext' is not defined\n</code></pre>\n\n<p>How does one test code internationalized with Python's <code>gettext</code> module?</p>\n"}, {"tags": ["python", "data-science", "xgboost"], "comments": [{"owner": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 1, "creation_date": 1515619471, "post_id": 48195863, "comment_id": 83373633, "body": "Training models can take a ton of time with certain data sets -- agnostic of machine learning model. For XGBoost, training time will vary depending on your hyperparameters so your training time doesn&#39;t seem unreseasonable to me. The long training times are why some people have worked hard on developing optimization techniques for &#39;smarter&#39; hyperparameter tuning (vs using a grid search)."}, {"owner": {"reputation": 61, "user_id": 9200690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618ed9501bd2bf723914e89e1220a769?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/9200690/justin"}, "reply_to_user": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 1, "creation_date": 1515619840, "post_id": 48195863, "comment_id": 83373774, "body": "I am using hyper-prarameters: XGBRegressor(learning_rate = 0.1,max_depth = 5,n_estimators = 1165,subsample=0.8,colsample_bytree=0.8,seed=27). I use n_estimators 1165 because it is returned by xgboost.train as best iterations. Also change nthread from 1 to 4 and it doesn&#39;t improve performace at all. How multithreading works for xgboost?"}, {"owner": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 0, "creation_date": 1515620144, "post_id": 48195863, "comment_id": 83373914, "body": "To clarify here, hyperparameters are just another name for the model&#39;s parameters. Just about every model has some parameters (often called hyperparameters) that the user can tune or adjust. With my previous comment, I was mentioning that certain hyperparameters can make training take longer. For example, if the case of XGBoost, if you have more trees that are grown deeper, this will slow down the training process vs having less trees that are shallow (such a &#39;stumps&#39;)."}, {"owner": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 0, "creation_date": 1515620338, "post_id": 48195863, "comment_id": 83374012, "body": "Increasing the number of threads doesn&#39;t improve performance is a bit unclear. Do you mean predictive performance of the model or performance of the model&#39;s runtime? From my understanding, XGBoost uses OpenMP for parallel processing: <a href=\"https://en.wikipedia.org/wiki/OpenMP\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/OpenMP</a>. Check out this page for more detailed info on multithreading in XGBoost: <a href=\"https://machinelearningmastery.com/best-tune-multithreading-support-xgboost-python/\" rel=\"nofollow noreferrer\">machinelearningmastery.com/&hellip;</a>"}, {"owner": {"reputation": 61, "user_id": 9200690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618ed9501bd2bf723914e89e1220a769?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/9200690/justin"}, "reply_to_user": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 0, "creation_date": 1515620442, "post_id": 48195863, "comment_id": 83374061, "body": "I mean the model training time is not improved after changing nthread from 1 to 4"}, {"owner": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 0, "creation_date": 1515620830, "post_id": 48195863, "comment_id": 83374268, "body": "First thought if training time is not decreasing, check your install of XGBoost to ensure you have the multithreading installed/enabled. Some time ago I installed XGBoost on Windows without multithreading support so I would start there."}, {"owner": {"reputation": 61, "user_id": 9200690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618ed9501bd2bf723914e89e1220a769?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/9200690/justin"}, "reply_to_user": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 0, "creation_date": 1515621753, "post_id": 48195863, "comment_id": 83374681, "body": "I really can&#39;t tell if the version I installed is enabled with multithreading or not. Can you give me a hint? XGBoost v0.6 is installed with conda"}], "owner": {"reputation": 61, "user_id": 9200690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618ed9501bd2bf723914e89e1220a769?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/9200690/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5782, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1515621140, "creation_date": 1515617476, "last_edit_date": 1515621140, "question_id": 48195863, "link": "https://stackoverflow.com/questions/48195863/xgboost-running-slow-on-my-machine-is-it-normal", "title": "XGBoost running slow on my machine, is it normal?", "body": "<p>I am using XGBoost to train 1 million rows and ~15 features from Kaggle project Rossmann Store Sales. It appears very slow. It took 30 mins to train model with no parameter tuning. If I run GridSearchCV to train model with 3 folds and 6 learning rate values, it will take more than 10 hours to return. As it is my first time to use XGBoost, I don't know if this is normal or not. I can't imagine how many days it will take to tune all the parameters of XGBoost model.\nPlease help me.</p>\n\n<p>The model prarameters: XGBRegressor(learning_rate = 0.1,max_depth = 5,n_estimators = 1165,subsample=0.8,colsample_bytree=0.8,seed=27). I use n_estimators 1165 because it is returned by xgboost.train as best iterations. Also change nthread from 1 to 4 and it doesn't improve performace at all. </p>\n\n<p>My computer configuration is;\nCPU:intel i7 6500U (2cores 4threads)\nMemory: 8GB\nOS: windows 10</p>\n\n<p>Thanks!\nJustin</p>\n"}, {"tags": ["python", "string", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515617514, "post_id": 48195857, "comment_id": 83372695, "body": "Please help me understand why your dataframes are not inside a list to begin with."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1515617720, "post_id": 48195857, "comment_id": 83372805, "body": "Also, there is an answer to your question, but it would be giving you what you want, not what you need (the two are different). It would be good to start with how these dataframes are created."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1515617861, "post_id": 48195857, "comment_id": 83372865, "body": "1st There is way to create the list of df .2nd Base on my knowledge I can not find a way to convert the list of string to list of df (even have, it will be overkilled)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1515617946, "post_id": 48195857, "comment_id": 83372911, "body": "@Wen Actually, really the only (filthy) way of doing it is by querying <code>globals</code>. But it should be avoided in favour of better programming practices."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515617991, "post_id": 48195857, "comment_id": 83372931, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 yeah, global, variable will do it"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515618265, "post_id": 48195857, "comment_id": 83373074, "body": "For starters, when generating the dataframes, you should put them inside a list, or a dictionary."}], "owner": {"reputation": 9, "user_id": 9200698, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215296045457090/picture?type=large", "display_name": "Camille Steger", "link": "https://stackoverflow.com/users/9200698/camille-steger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1515618005, "answer_count": 0, "score": 0, "last_activity_date": 1515618352, "creation_date": 1515617440, "last_edit_date": 1515618352, "question_id": 48195857, "link": "https://stackoverflow.com/questions/48195857/convert-list-of-strings-to-a-list-of-variables-dataframes", "closed_reason": "Duplicate", "title": "Convert list of strings to a list of variables (dataframes)", "body": "<p>I have multiple dataframes (e.g. df0, df1, df2, df3) that I need to iterate through, but the number of dataframes is arbitrary and is variable to change when I run this script on different datasets. I need to produce a list of these dataframes (using a loop):</p>\n\n<pre><code>dfs = [df0,df1,df2,df3]\n</code></pre>\n\n<p>So far this is what I have...</p>\n\n<pre><code>dfs = []\nfor i in range(4):\n    dfs.append('df'+str(i))\n</code></pre>\n\n<p>However, this returns:</p>\n\n<pre><code>dfs = ['df0', 'df1', 'df2', 'df3']\n</code></pre>\n\n<p>Is there a way to convert this list of strings into a list of dataframes? Or another way to write the loop, perhaps?</p>\n\n<p>The goal is to create an excel document that is printable. I need to take a dataframe with 24 columns and any number of rows (from 5 entries to over 100). Because it needs to be printable, I have to split the dataframe into multiple dataframes, each with column labels and 3 rows per page, with one dataframe on each page. Since the number of dataframes I need to produce is dependent on the number of rows in the original dataframe, it involved producing the dataframes uniquely in a loop. Here's the code I used to produce the dataframes: </p>\n\n<pre><code> og = pd.ExcelFile(file).parse('Sheet1')\n\n sheets = int(len(og)/3)\n if (len(og)%3) != 0:\n     sheets = sheets + 1\n\nframes = [og.loc[i*3:(3*i + 2)] for i in range(sheets)]\n\nfor i in range(len(frames)):\n     exec('df' +str(i)+ '= frames[i].transpose()')\n</code></pre>\n"}, {"tags": ["python", "arrays", "multithreading", "performance", "data-analysis"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1515617608, "post_id": 48195845, "comment_id": 83372750, "body": "Multithreading is a dead-end, don&#39;t pursue it. Potentially multiprocessing, but the ideal approach would be vectorization of your loops."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1515617703, "post_id": 48195845, "comment_id": 83372795, "body": "For that reason, I want to tag this as numpy but it looks like you&#39;re just using python lists (despite saying you have np arrays)?"}, {"owner": {"reputation": 329, "user_id": 8229169, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dd117fc5a51d77c073c3fb2ebfb8deb8?s=128&d=identicon&r=PG&f=1", "display_name": "hopieman", "link": "https://stackoverflow.com/users/8229169/hopieman"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1515617899, "post_id": 48195845, "comment_id": 83372881, "body": "actually at this point i&#39;m not using numpy, just pandas than return a list. @roganjosh how can I use vectorization of loops?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1515618203, "post_id": 48195845, "comment_id": 83373039, "body": "Then the question is pretty confused. You could use a rolling window on your series, keeping it in pandas. Your example should be representative of what you&#39;re trying to do but, at a guess, you don&#39;t want to pull this data out as a python list."}, {"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "edited": false, "score": 0, "creation_date": 1515618234, "post_id": 48195845, "comment_id": 83373053, "body": "&quot;pandas that return a list&quot;, do you mean a Pandas Series? If so, that behaves very similarly to a numpy array"}, {"owner": {"reputation": 433, "user_id": 9146867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543110d37c750d6870d6ed2dead76fda?s=128&d=identicon&r=PG&f=1", "display_name": "rmilletich", "link": "https://stackoverflow.com/users/9146867/rmilletich"}, "edited": false, "score": 0, "creation_date": 1515619805, "post_id": 48195845, "comment_id": 83373762, "body": "Just to add some additional info here -- may help here or for a future problem with speed. If you can stick with numpy consider using numba for just in time compiling: <a href=\"https://numba.pydata.org/\" rel=\"nofollow noreferrer\">numba.pydata.org</a>"}, {"owner": {"reputation": 329, "user_id": 8229169, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dd117fc5a51d77c073c3fb2ebfb8deb8?s=128&d=identicon&r=PG&f=1", "display_name": "hopieman", "link": "https://stackoverflow.com/users/8229169/hopieman"}, "edited": false, "score": 0, "creation_date": 1515622293, "post_id": 48195845, "comment_id": 83374890, "body": "I did edit my ideia, hope you can undestand better now, There is anyway of do this with pandas library like create another column or something"}, {"owner": {"reputation": 329, "user_id": 8229169, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dd117fc5a51d77c073c3fb2ebfb8deb8?s=128&d=identicon&r=PG&f=1", "display_name": "hopieman", "link": "https://stackoverflow.com/users/8229169/hopieman"}, "edited": false, "score": 0, "creation_date": 1515625153, "post_id": 48195845, "comment_id": 83375988, "body": "I compiled it in Numba, just simple compile, and it improved by 5 seconds the script..224.94061994552612 seconds"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1515677706, "post_id": 48195845, "comment_id": 83397492, "body": "I am not sure if that code really does what it is intended for. For example your first calculation (y=0,numberOfEntries=30,i=1) means that you are accessing the element -29... Is this really intended?"}, {"owner": {"reputation": 329, "user_id": 8229169, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dd117fc5a51d77c073c3fb2ebfb8deb8?s=128&d=identicon&r=PG&f=1", "display_name": "hopieman", "link": "https://stackoverflow.com/users/8229169/hopieman"}, "edited": false, "score": 0, "creation_date": 1515690609, "post_id": 48195845, "comment_id": 83406253, "body": "yes it is! because i want to compare actual element[y] to last [30values]"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1515618159, "creation_date": 1515618159, "answer_id": 48196025, "question_id": 48195845, "link": "https://stackoverflow.com/questions/48195845/speed-up-python-loop-append/48196025#48196025", "title": "Speed up Python Loop append", "body": "<p>First, I would turn the <code>while</code> loop to a <code>for</code> loop, since <code>i</code> is now incremented faster.</p>\n\n<pre><code>for i in range(1,condition):\n</code></pre>\n\n<p>Now, since <code>y</code> doesn't change within your inner loop, you can optimize your computation from:</p>\n\n<pre><code>x = ((float(array[y-(numberOfEntries-i)])-array[y-numberOfEntries])/abs(close[y-numberOfEntries]))*100.00\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>x = (float(array[y-(numberOfEntries-i)])-array[y-numberOfEntries]) * z\n</code></pre>\n\n<p>where <code>z</code> is precomputed <em>before</em> the <code>while/for</code> loop as:</p>\n\n<pre><code>    z = 100.00 / abs(close[y-numberOfEntries])\n</code></pre>\n\n<p>why?</p>\n\n<ul>\n<li>first, <code>z</code> is pre-computed so no computation of <code>abs</code> and access to <code>close</code> array</li>\n<li>second, <code>z</code> is the inverse of the value to divide, so you can multiply by it. Multiplication is way faster than division.</li>\n<li>third: no more division by zero is possible since you're no longer dividing. The zerodiv can occur on <code>z</code> outside the loop, and has to be handled accordingly (wrap the whole z + loop thing in <code>try/except</code> and set result to <code>x= 0.00000001</code> when it occurs, it should be equivalent)</li>\n</ul>\n\n<p>so your inner loop could be:</p>\n\n<pre><code>try:\n    z = 100.00 / abs(close[y-numberOfEntries])\n    for i in range(1,condition):\n        x = (float(array[y-(numberOfEntries-i)])-array[y-numberOfEntries]) * z\nexcept ZeroDivisionError:\n    x = 0.00000001\npattern.append(x)\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 8229169, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dd117fc5a51d77c073c3fb2ebfb8deb8?s=128&d=identicon&r=PG&f=1", "display_name": "hopieman", "link": "https://stackoverflow.com/users/8229169/hopieman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515626610, "creation_date": 1515617402, "last_edit_date": 1515626610, "question_id": 48195845, "link": "https://stackoverflow.com/questions/48195845/speed-up-python-loop-append", "title": "Speed up Python Loop append", "body": "<p>Hello I have an huge list of values, I want to to find all n values pattern like list[0:30], list[1:31]. And to each value compare percentage to the first, like percentage_change(array[0],array[1]),  percentage_change(array[0],array[2]), all the way till the end of pattern.\nAfter this, I want to store all the 30 values patterns in an array of patterns to compare to other values in the future.</p>\n\n<p>To do so I have to build a function:\nTo this function, 30 values can be changed to any of my choices by change variable numberOfEntries\nFor each pattern, I do the mean of the 10 next outcomes and store it in an array of outcomes with the same index</p>\n\n<pre><code>#end point is the end of array\n#inputs (array, numberOfEntries)\n#outPut(list of Patterns, list of outcomes)\n\ny=0\ncondition= numberOfEntries+1\n#each pattern list\npattern=[]\n#list of patterns\nPatterns=[] \n#outcomes array\noutcomes=[]\n\n\n\nwhile (y&lt;len(array)):\n    i=1\n    while(i&lt;condition):\n\n        #this is percentage change function, I have built it inside to gain speed. Try is used because possibility of 0 division\n        try:\n            x = ((float(array[y-(numberOfEntries-i)])-array[y-numberOfEntries])/abs(array[y-numberOfEntries]))*100.00\n            if x == 0.0:\n                x=0.000000001\n        except:\n            x= 0.00000001\n        i+=1\n        pattern.append(x)\n #here is the outcomes\n     outcomeRange = array[y+5:y+15]\n     outcome.append(outcomeRange)\n     Patterns.append(pattern)\n     #clean pattern array\n     pattern=[]\n     y+=1\n</code></pre>\n\n<p>Doing this to an 8559 values array, which is small for the quantity of data I have took me 229.6792. </p>\n\n<p>There is a way of adapt this to multithreading or an way of improve this speed? </p>\n\n<p>EDIT: </p>\n\n<p>To explain better, I have this ohlc data: </p>\n\n<pre><code>                     open      high       low     close      volume\nTimeStamp                                                            \n2016-08-20 15:50:00  0.003008  0.003008  0.002995  0.003000    6.351215\n2016-08-20 15:55:00  0.003000  0.003008  0.003000  0.003008    6.692174\n2016-08-20 16:00:00  0.003008  0.003009  0.002996  0.003001   10.813029\n2016-08-20 16:05:00  0.003001  0.003000  0.002991  0.002991    4.368509\n2016-08-20 16:10:00  0.002991  0.002993  0.002989  0.002990    6.662944\n2016-08-20 16:15:00  0.002990  0.003015  0.002989  0.003015    8.495640\n</code></pre>\n\n<p>I extract this as </p>\n\n<pre><code>array=df['close'].values\n</code></pre>\n\n<p>Then I apply this array to the function and it will return a list full of lists like this for this particular set of values, </p>\n\n<pre><code>[0.26, 0.03, -0.03, -0.04, ,0.005]\n</code></pre>\n\n<p>This are percent changes from each row to the begin of the sample, and this is what I call a pattern. I can choose how much entries can have a pattern.</p>\n\n<p>Hope I'm more clear now...</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1515617373, "post_id": 48195828, "comment_id": 83372619, "body": "do you have a question?"}, {"owner": {"reputation": 389, "user_id": 1324154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/amVGV.png?s=128&g=1", "display_name": "yanddam", "link": "https://stackoverflow.com/users/1324154/yanddam"}, "reply_to_user": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1515617513, "post_id": 48195828, "comment_id": 83372693, "body": "how can i improve this algorithm. and optimize the number of swap"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1515617824, "post_id": 48195828, "comment_id": 83372844, "body": "<a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "is_accepted": true, "score": 1, "last_activity_date": 1515618265, "creation_date": 1515618265, "answer_id": 48196050, "question_id": 48195828, "link": "https://stackoverflow.com/questions/48195828/bubblesort-python-swap-in-two-directions/48196050#48196050", "title": "BubbleSort python swap in two directions", "body": "<p>Bonjour, votre code est bon! Going back to english now, some small fixes needed:</p>\n\n<p>The f-=1 and d+=1 need to move indentation.</p>\n\n<p>The ranges need to change to (d,f,1) and (f,d,-1)</p>\n\n<p>Final Code:</p>\n\n<pre><code>def bubbleSort_UpDown(alist,ite):\n    up=True\n    d=0\n    f=len(alist)-1\n    while d&lt;f :\n        if up==True :\n            for i in range(d,f,1):\n                ite+=1\n                if alist[i]&gt;alist[i+1]:\n                    alist[i+1],alist[i]=alist[i],alist[i+1]\n            f-=1\n            up=False\n        else:\n            for i in range(f,d,-1):\n                ite+=1\n                if alist[i]&lt;alist[i-1]:\n                    alist[i-1],alist[i]=alist[i],alist[i-1]\n            d+=1\n            up=True\n    print(\"debut\",d)\n    print(\"fin\",f)\n\n    return ite\n\nL=[10,9,8,7,6,5,4,3,2,1,0]\n\nprint(\"UnSorted list:\", L)\niterr=bubbleSort_UpDown(L,0)\nprint(\"Sorted list:\", L)\nprint(iterr)\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 1324154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/amVGV.png?s=128&g=1", "display_name": "yanddam", "link": "https://stackoverflow.com/users/1324154/yanddam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 48196050, "answer_count": 1, "score": 1, "last_activity_date": 1516163809, "creation_date": 1515617339, "last_edit_date": 1516163809, "question_id": 48195828, "link": "https://stackoverflow.com/questions/48195828/bubblesort-python-swap-in-two-directions", "title": "BubbleSort python swap in two directions", "body": "<p>an example of Bubblesort algorithm with python\nthis algorithm sorts the elements of the list in two directions</p>\n\n<pre><code>def bubbleSort_UpDown(alist,ite):\n    up=True\n    d=0\n    f=len(alist)-1\n    while d&lt;f :\n        if up==True :\n            for i in range(f):\n                ite+=1\n                if alist[i]&gt;alist[i+1]:\n                    alist[i+1],alist[i]=alist[i],alist[i+1]\n                    f-=1\n            up=False\n        else:\n            for i in range(f,d+1,-1):\n                ite+=1\n                if alist[i]&lt;alist[i-1]:\n                    alist[i-1],alist[i]=alist[i],alist[i-1]\n                d+=1\n            up=True\n    print(\"debut\",d)\n    print(\"fin\",f)\n\n    return ite\n\nL=[10,9,8,7,6,5,4,3,2,1,0]\n\nprint(\"UnSorted list:\", L)\niterr=bubbleSort_UpDown(L,0)\nprint(\"Sorted list:\", L)\nprint(iterr)\n</code></pre>\n\n<p>iterr print numbers of swap</p>\n\n<p>Question: how can i improve this algorithm. and optimize the number of swap?</p>\n"}, {"tags": ["javascript", "jquery", "python", "ajax", "django"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1515617840, "post_id": 48195813, "comment_id": 83372853, "body": "So do you know why you&#39;re getting <code>NoneType</code> for <code>end</code> and/or <code>begin</code>?"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "reply_to_user": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1515618306, "post_id": 48195813, "comment_id": 83373100, "body": "No that&#39;s part of the question... I know the request gets to the view but i don&#39;t understand the errors that occure then"}], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 2, "last_activity_date": 1515618590, "creation_date": 1515618590, "answer_id": 48196124, "question_id": 48195813, "link": "https://stackoverflow.com/questions/48195813/ajax-request-to-django-view-not-returning-response/48196124#48196124", "title": "Ajax request to django view not returning response", "body": "<p><code>args</code> and <code>kwargs</code> in a view are for arguments that are passed in the URL and captured in the URL pattern. You don't have any of these; your Ajax is sending the values in the GET querystring. So you need to get them from <code>request.GET</code>. Also note, the values will be strings, so you need to convert them to ints.</p>\n\n<pre><code>begin = int(request.GET['begin'])\nend = int(request.GET['end'])\n</code></pre>\n\n<p>The other error is explained in the error message itself; you can't order after slicing. You should do it before.</p>\n"}], "owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515618590, "creation_date": 1515617271, "question_id": 48195813, "link": "https://stackoverflow.com/questions/48195813/ajax-request-to-django-view-not-returning-response", "title": "Ajax request to django view not returning response", "body": "<p>I'm making a website where I want to load user submitted comments on elements and I want to be able to dynamically display them and not have the webpage have to load them all at once. so I setup this ajax request function: </p>\n\n<pre><code>function loadcomments(){\n   $.ajax({\n        url: '/ajax/getcomments/',\n        data: {\n            'identifier': {{ identifier }}\n            'begin': 0,\n            'end': 30\n        },\n        dataType: 'json',\n        success: function (data) {\n            alert(data.comments);\n        }\n   });\n};\n</code></pre>\n\n<p>And a view to respond to that request:</p>\n\n<pre><code>def obtain_comments(request, *args, **kwargs):\n    begin = kwargs.get('begin');\n    end = kwargs.get('end');\n    comments = end - begin\n    all_before = Comment.objects.order_by('-uploaded')[:end]\n    data = {\n        'comments': all_before.order_by('uploaded')[:comments]\n    }\n    return JsonResponse(data)\n</code></pre>\n\n<p>But I'm not getting a response. I'm not seeing any errors inside the browser console, however in the django runserver terminal I see: </p>\n\n<pre><code>Internal Server Error: /ajax/getcomments/\nTraceback (most recent call last):\n  File \"/home/trie/Desktop/django/venv/lib/python3.5/site-packages/django/core/handlers/exception.py\", line 35, in inner\n    response = get_response(request)\n  File \"/home/trie/Desktop/django/venv/lib/python3.5/site-packages/django/core/handlers/base.py\", line 128, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/home/trie/Desktop/django/venv/lib/python3.5/site-packages/django/core/handlers/base.py\", line 126, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/home/trie/Desktop/django/vidmiotest/player/views.py\", line 64, in obtain_comments\n    comments = end - begin\nTypeError: unsupported operand type(s) for -: 'NoneType' and 'NoneType'\n</code></pre>\n\n<p>or if I set begin and end to a fixed value instead of kwargs:</p>\n\n<pre><code>Internal Server Error: /ajax/getcomments/\nTraceback (most recent call last):\n  File \"/home/trie/Desktop/django/venv/lib/python3.5/site-packages/django/core/handlers/exception.py\", line 35, in inner\n    response = get_response(request)\n  File \"/home/trie/Desktop/django/venv/lib/python3.5/site-packages/django/core/handlers/base.py\", line 128, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/home/trie/Desktop/django/venv/lib/python3.5/site-packages/django/core/handlers/base.py\", line 126, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/home/trie/Desktop/django/vidmiotest/player/views.py\", line 67, in obtain_comments\n    'comments': all_before.order_by('uploaded')[:comments]\n  File \"/home/trie/Desktop/django/venv/lib/python3.5/site-packages/django/db/models/query.py\", line 1012, in order_by\n    \"Cannot reorder a query once a slice has been taken.\"\nAssertionError: Cannot reorder a query once a slice has been taken.\n</code></pre>\n\n<p>I tried removing the element Identifier from the 'obtain_comments' view so I would get any comments in the database. I'm however expecting the view to respond 1 comment I manually inserted into the database.</p>\n\n<p>inside <code>urls.py</code> i defined the url like this:</p>\n\n<pre><code>path('ajax/getcomments/', obtain_comments),\n</code></pre>\n\n<p>Why am I not geting a response?</p>\n"}, {"tags": ["python", "date", "selenium", "bdd"], "comments": [{"owner": {"reputation": 1872, "user_id": 2425654, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/q5XPD.jpg?s=128&g=1", "display_name": "thebadguy", "link": "https://stackoverflow.com/users/2425654/thebadguy"}, "edited": false, "score": 0, "creation_date": 1515645068, "post_id": 48195796, "comment_id": 83380608, "body": "please add html of you website"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1515700483, "post_id": 48195796, "comment_id": 83411468, "body": "What is your expected date format?"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1515700520, "post_id": 48195796, "comment_id": 83411490, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/311627/how-to-print-date-in-a-regular-format-in-python\">How to print date in a regular format in Python?</a>"}, {"owner": {"reputation": 71, "user_id": 6411007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08fddba00cd445d475131933433abc03?s=128&d=identicon&r=PG&f=1", "display_name": "Varus", "link": "https://stackoverflow.com/users/6411007/varus"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1515706575, "post_id": 48195796, "comment_id": 83414245, "body": "@JeffC I am expecting to input it in mm-dd-YY format."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1515706636, "post_id": 48195796, "comment_id": 83414278, "body": "The link I posted above has a number of examples. You should be able to use one of them to get the output you want."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6411007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08fddba00cd445d475131933433abc03?s=128&d=identicon&r=PG&f=1", "display_name": "Varus", "link": "https://stackoverflow.com/users/6411007/varus"}, "edited": false, "score": 0, "creation_date": 1515706532, "post_id": 48197897, "comment_id": 83414224, "body": "I will give this a try and report back, I appreciate you taking the time to reply."}, {"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "reply_to_user": {"reputation": 71, "user_id": 6411007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08fddba00cd445d475131933433abc03?s=128&d=identicon&r=PG&f=1", "display_name": "Varus", "link": "https://stackoverflow.com/users/6411007/varus"}, "edited": false, "score": 0, "creation_date": 1516147818, "post_id": 48197897, "comment_id": 83568614, "body": "Did this work for you? I can update my answer if there are any other exceptions occurring."}], "tags": [], "owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1515628060, "creation_date": 1515628060, "answer_id": 48197897, "question_id": 48195796, "link": "https://stackoverflow.com/questions/48195796/passing-todays-date-for-a-date-picker-field-in-selenium-using-python/48197897#48197897", "title": "Passing today&#39;s date for a date picker field in Selenium using Python", "body": "<p>You need to use <code>strftime</code> to format your date.</p>\n\n<pre><code>import datetime from datetime\n\nelement.send_keys(datetime.strftime(currentdate, '%m-%d-%Y'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 114, "user_id": 9758581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tcqSc.jpg?s=128&g=1", "display_name": "Arun Sasi", "link": "https://stackoverflow.com/users/9758581/arun-sasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1604918274, "creation_date": 1604918274, "answer_id": 64749996, "question_id": 48195796, "link": "https://stackoverflow.com/questions/48195796/passing-todays-date-for-a-date-picker-field-in-selenium-using-python/64749996#64749996", "title": "Passing today&#39;s date for a date picker field in Selenium using Python", "body": "<p>Here we need to define the locator for the calendar field to accept data dynamically as below.</p>\n<pre><code>calendar = &quot;//p[contains(.,'{}')]&quot;\n</code></pre>\n<p>and then use the below code to fetch today's date and select the appropriate date</p>\n<pre><code>import datetime\ncurrent_day = datetime.datetime.now().day\ndriver.find_element_by_xpath(calendar.format(current_day).click\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 6411007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08fddba00cd445d475131933433abc03?s=128&d=identicon&r=PG&f=1", "display_name": "Varus", "link": "https://stackoverflow.com/users/6411007/varus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2656, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1604918274, "creation_date": 1515617226, "last_edit_date": 1515619029, "question_id": 48195796, "link": "https://stackoverflow.com/questions/48195796/passing-todays-date-for-a-date-picker-field-in-selenium-using-python", "title": "Passing today&#39;s date for a date picker field in Selenium using Python", "body": "<p>I am trying enter today's date into a date picker field rather than just click the <code>today</code> button and below is how my code is set up, but not able to do so. I am using BDD framework.</p>\n\n<p>And I input todays date </p>\n\n<pre><code>@When('I input todays date')\ndef step_impl(context):\n    value_paystub_dateOfPayStub(context.webdriver)\n\nGetting element of said date picker:\ndef get_dateOfPaystub(driver):\n    element = None\n    try:\n        element = WebDriverWait(driver, 70).until(\n            EC.visibility_of_element_located(\n                (By.XPATH, \"//input[@id='chl.CustomerFinancials.primaryFinancialsForm.paystub.6134.DateOfPaystub']\"))\n        )\n    except TimeoutException:\n        logger.error(\"Date of Paystub element was not found\")\n    return element\n\nTrying to enter today's date:\ndef value_paystub_dateOfPayStub(driver):\n    currentdate = datetime.datetime.today()\n    try:\n        element = get_dateOfPaystub(driver)\n        element.send_keys()  # to set focus on the selector\n        element.send_keys(currentdate, \"%m-%d-%Y\")\n    except Exception:\n        logger.error(\"Unable to enter value into Paystub Employer Name field\")\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "logging", "logstash", "elastic-stack"], "answers": [{"comments": [{"owner": {"reputation": 1565, "user_id": 11277952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4df745b0605bf8cda35a1c441c988e?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda", "link": "https://stackoverflow.com/users/11277952/amanda"}, "edited": false, "score": 0, "creation_date": 1588588012, "post_id": 48197310, "comment_id": 108945695, "body": "Is there something for kibana?"}, {"owner": {"reputation": 11010, "user_id": 24820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b817e15137200f1101221f9a6c5c5c6d?s=128&d=identicon&r=PG", "display_name": "sebthebert", "link": "https://stackoverflow.com/users/24820/sebthebert"}, "reply_to_user": {"reputation": 1565, "user_id": 11277952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4df745b0605bf8cda35a1c441c988e?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda", "link": "https://stackoverflow.com/users/11277952/amanda"}, "edited": false, "score": 0, "creation_date": 1588689007, "post_id": 48197310, "comment_id": 108990967, "body": "@Amanda What do you mean &quot;for Kibana&quot; ? Kibana is the Web interface to request Elastic Search, you don&#39;t send logs to Kibana..."}], "tags": [], "owner": {"reputation": 11010, "user_id": 24820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b817e15137200f1101221f9a6c5c5c6d?s=128&d=identicon&r=PG", "display_name": "sebthebert", "link": "https://stackoverflow.com/users/24820/sebthebert"}, "is_accepted": true, "score": 6, "last_activity_date": 1515624279, "creation_date": 1515624279, "answer_id": 48197310, "question_id": 48195759, "link": "https://stackoverflow.com/questions/48195759/how-to-configure-native-python-logging-library-with-logstash-and-elastic/48197310#48197310", "title": "How to configure native python logging library with logstash and elastic?", "body": "<p>You should use <a href=\"https://github.com/vklochan/python-logstash\" rel=\"noreferrer\">python-logstash</a> module.</p>\n\n<p>Its usage is documented in the <a href=\"https://github.com/vklochan/python-logstash#usage\" rel=\"noreferrer\">README</a>.</p>\n\n<pre><code>import logging\nimport logstash\nimport sys\n\nhost = 'localhost'\n\ntest_logger = logging.getLogger('python-logstash-logger')\ntest_logger.setLevel(logging.INFO)\ntest_logger.addHandler(logstash.LogstashHandler(host, 5959, version=1))\n# test_logger.addHandler(logstash.TCPLogstashHandler(host, 5959, version=1))\n\ntest_logger.error('python-logstash: test logstash error message.')\ntest_logger.info('python-logstash: test logstash info message.')\ntest_logger.warning('python-logstash: test logstash warning message.')\n</code></pre>\n"}], "owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5125, "favorite_count": 3, "accepted_answer_id": 48197310, "answer_count": 1, "score": 3, "last_activity_date": 1515624279, "creation_date": 1515617076, "question_id": 48195759, "link": "https://stackoverflow.com/questions/48195759/how-to-configure-native-python-logging-library-with-logstash-and-elastic", "title": "How to configure native python logging library with logstash and elastic?", "body": "<p>I'm new to the ELK stack and am trying to learn how to configure the native python logging function to update my Elastic DB with the help of LogStash. The resources I've found haven't been too clear to me, and I was wondering if anyone on here could help me with the basic steps. Am I on the right track in starting with these couple steps?</p>\n\n<ol>\n<li>Setup of Config File for LogStash</li>\n<li>Retrieve a 'logger' [logging.getLogger()] and add a Logstash Handler to it where the host is the Elastic DB URL?</li>\n<li>Next steps?</li>\n</ol>\n\n<p>Any help would be greatly appreciated, thanks.</p>\n"}, {"tags": ["python", "pandas", "postal-code"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 2, "creation_date": 1515617198, "post_id": 48195758, "comment_id": 83372513, "body": "Happy Coding. SO  is about fixing <i>your</i> Code - not implementing your ideas.  Please go over <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and  <a href=\"https://stackoverflow.com/help/on-topic\">on-topic</a> again and if you have questions provide  your code as <a href=\"https://stackoverflow.com/help/mcve\">mvce</a> For questions about panda, start with providing your dataframe including testdata <i>and</i> show your expected &amp; gotten results. Try to solve it yourself first."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1515617394, "post_id": 48195758, "comment_id": 83372630, "body": "<code>I was wondering if anyone could help me extracting area and sector in Python using pandas?</code> Yes, someone can help you."}], "owner": {"reputation": 1, "user_id": 9200713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/108109bf7e82baa797f00f00078d09d7?s=128&d=identicon&r=PG&f=1", "display_name": "AtreyeeB", "link": "https://stackoverflow.com/users/9200713/atreyeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515617361, "creation_date": 1515617075, "last_edit_date": 1515617361, "question_id": 48195758, "link": "https://stackoverflow.com/questions/48195758/extract-area-and-sector-from-uk-postcode-python", "title": "Extract area and sector from uk postcode python", "body": "<p>I was wondering if anyone could help me extracting area and sector in Python using pandas? </p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1515617172, "post_id": 48195735, "comment_id": 83372502, "body": "I would first try to disable the antivirus during installation"}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 9198426, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tCFAH.jpg?s=128&g=1", "display_name": "Irakli", "link": "https://stackoverflow.com/users/9198426/irakli"}, "is_accepted": false, "score": 0, "last_activity_date": 1515617271, "creation_date": 1515617271, "answer_id": 48195812, "question_id": 48195735, "link": "https://stackoverflow.com/questions/48195735/anaconda-installation-ungtz-dll-error/48195812#48195812", "title": "Anaconda Installation: ungtz.dll error", "body": "<p>Turn off Firewall and antivirus and try with run Administrator,or others versions</p>\n"}], "owner": {"reputation": 11, "user_id": 6432106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04a90ee66d5463fb7dc957cebe533e6b?s=128&d=identicon&r=PG&f=1", "display_name": "Ronit", "link": "https://stackoverflow.com/users/6432106/ronit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515617271, "creation_date": 1515616946, "question_id": 48195735, "link": "https://stackoverflow.com/questions/48195735/anaconda-installation-ungtz-dll-error", "title": "Anaconda Installation: ungtz.dll error", "body": "<p>I tried to install Anaconda using the normal python 3.5 windows 64-bit .exe file. Every time I run the installation, all the extraction in it fails due to error of some ungtz.dll file as shown in the picture. Even my Antivirus detects that file as a Trojan and repairs it.So after the installation ends there is not Anaconda Prompt and other such software.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yag22.jpg\" rel=\"nofollow noreferrer\">Anaconda Installation Problem</a></p>\n\n<p>Can anyone help and suggest how I go about successfully installing anaconda?</p>\n"}, {"tags": ["python", "django", "nginx", "gunicorn", "collectstatic"], "answers": [{"comments": [{"owner": {"reputation": 1962, "user_id": 1067213, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/7vHjc.jpg?s=128&g=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/1067213/tony"}, "edited": false, "score": 1, "creation_date": 1515617559, "post_id": 48195769, "comment_id": 83372724, "body": "You are right! I would like to upgrade to the newer version but running pip install --upgrade python wont do the work. I think I need to re create the virtualenv"}, {"owner": {"reputation": 117, "user_id": 7301680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SceCT.jpg?s=128&g=1", "display_name": "akkk3", "link": "https://stackoverflow.com/users/7301680/akkk3"}, "edited": false, "score": 0, "creation_date": 1610522232, "post_id": 48195769, "comment_id": 116156985, "body": "Thanks, I have python 3.9 but had this issue, but followed your answer and it&#39;s solved now!"}], "tags": [], "owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "is_accepted": true, "score": 7, "last_activity_date": 1515617720, "last_edit_date": 1515617720, "creation_date": 1515617097, "answer_id": 48195769, "question_id": 48195727, "link": "https://stackoverflow.com/questions/48195727/running-collectstatic-on-server-attributeerror-posixpath-object-has-no-attr/48195769#48195769", "title": "Running collectstatic on server : AttributeError: &#39;PosixPath&#39; object has no attribute &#39;startswith&#39;", "body": "<p>You're using Python 3.5. Support for <a href=\"https://docs.python.org/3/library/pathlib.html\" rel=\"noreferrer\">Path objects</a> in the os module <a href=\"https://docs.python.org/3/whatsnew/3.6.html#whatsnew36-pep519\" rel=\"noreferrer\">was added in Python 3.6</a>. You can:</p>\n\n<ul>\n<li><p>either upgrade to Python 3.6; or</p></li>\n<li><p>avoid using Path objects:</p>\n\n<pre><code>BASE_DIR = os.path.abspath(os.path.join(__file__, '../../../'))\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static')\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3887, "user_id": 1076965, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lpCol.jpg?s=128&g=1", "display_name": "Arindam Roychowdhury", "link": "https://stackoverflow.com/users/1076965/arindam-roychowdhury"}, "is_accepted": false, "score": 4, "last_activity_date": 1600153014, "last_edit_date": 1600153014, "creation_date": 1556018141, "answer_id": 55809981, "question_id": 48195727, "link": "https://stackoverflow.com/questions/48195727/running-collectstatic-on-server-attributeerror-posixpath-object-has-no-attr/55809981#55809981", "title": "Running collectstatic on server : AttributeError: &#39;PosixPath&#39; object has no attribute &#39;startswith&#39;", "body": "<p>This was my earlier settings . I am using Python 3.5. Django 2.1.</p>\n<pre><code>BASE_DIR = Path(__file__).resolve().parent.parent.parent\nSTATIC_ROOT = BASE_DIR / 'static'\n</code></pre>\n<p>I changed just one thing:</p>\n<pre><code>STATIC_ROOT = str(BASE_DIR / 'static')\n</code></pre>\n<p>It worked fine.</p>\n"}], "owner": {"reputation": 1962, "user_id": 1067213, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/7vHjc.jpg?s=128&g=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/1067213/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8378, "favorite_count": 0, "accepted_answer_id": 48195769, "answer_count": 2, "score": 4, "last_activity_date": 1600153014, "creation_date": 1515616913, "last_edit_date": 1515617226, "question_id": 48195727, "link": "https://stackoverflow.com/questions/48195727/running-collectstatic-on-server-attributeerror-posixpath-object-has-no-attr", "title": "Running collectstatic on server : AttributeError: &#39;PosixPath&#39; object has no attribute &#39;startswith&#39;", "body": "<p>After deploying on a server on digital ocean using nginx, gunicorn, django, and virtualenv, I try to use collectstatic:</p>\n\n<pre><code>python manage.py collectstatic --settings=config.settings.production\n</code></pre>\n\n<p>As you can see I have multiple setting files. One base, one local and one production setting file. Below is the error:</p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"manage.py\", line 22, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/core/management/__init__.py\", line 363, in execute_from_command_line\n    utility.execute()\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/core/management/__init__.py\", line 355, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/core/management/base.py\", line 283, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/core/management/base.py\", line 330, in execute\n    output = self.handle(*args, **options)\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py\", line 173, in handle\n    if self.is_local_storage() and self.storage.location:\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/utils/functional.py\", line 239, in inner\n    return func(self._wrapped, *args)\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/utils/functional.py\", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"/home/tony/vp/vpenv/lib/python3.5/site-packages/django/core/files/storage.py\", line 283, in location\n    return abspathu(self.base_location)\n  File \"/home/tony/vp/vpenv/lib/python3.5/posixpath.py\", line 357, in abspath\n    if not isabs(path):\n  File \"/home/tony/vp/vpenv/lib/python3.5/posixpath.py\", line 64, in isabs\n    return s.startswith(sep)\nAttributeError: 'PosixPath' object has no attribute 'startswith'\n</code></pre>\n\n<p>my <code>production.py</code> settings file contains the following:</p>\n\n<pre><code>MEDIA_ROOT = BASE_DIR / 'media'\nMEDIA_URL = 'media/'\nSTATIC_ROOT = BASE_DIR / 'static'\n</code></pre>\n\n<p>my base dir is as follows (imported from the base setting file):</p>\n\n<pre><code>BASE_DIR = Path(__file__).resolve().parent.parent.parent\n</code></pre>\n\n<p>What could be the cause?</p>\n"}, {"tags": ["python", "syntax-error"], "comments": [{"owner": {"reputation": 1922, "user_id": 8868108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNHxq.png?s=128&g=1", "display_name": "Green", "link": "https://stackoverflow.com/users/8868108/green"}, "edited": false, "score": 0, "creation_date": 1515617403, "post_id": 48195724, "comment_id": 83372637, "body": "A thumb rule in python,because python doesn&#39;t have a compiler  it run the code on the fly. The fact you see a syntax error in a certain place only mean that the program expected something else. There is also a good chance the problem started before(like here when the problem was in the &quot;in&quot;)"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 2766304, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1377608788/picture?type=large", "display_name": "Josh Eblin", "link": "https://stackoverflow.com/users/2766304/josh-eblin"}, "edited": false, "score": 0, "creation_date": 1515617263, "post_id": 48195782, "comment_id": 83372557, "body": "This fixed it. Apparently I had misunderstood list comprehensions"}], "tags": [], "owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "is_accepted": true, "score": 1, "last_activity_date": 1515617288, "last_edit_date": 1515617288, "creation_date": 1515617137, "answer_id": 48195782, "question_id": 48195724, "link": "https://stackoverflow.com/questions/48195724/syntax-error-at-end-of-return-line/48195782#48195782", "title": "Syntax Error - ] at end of return line", "body": "<p>Your list comprehension syntax is incorrect. Perhaps, you meant to use (assuming <code>l</code> is an iterable):</p>\n\n<pre><code>[x for x in l if isinstance(x, int)]\n</code></pre>\n\n<p>Which is equivalent to:</p>\n\n<pre><code>out = []\nfor x in l:\n    if isinstance(x, int):\n        out.append(x) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1756, "user_id": 9181800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/069abbeb340ea68e4436e9e97aa9c7bb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyCarlos", "link": "https://stackoverflow.com/users/9181800/jimmycarlos"}, "is_accepted": false, "score": 1, "last_activity_date": 1515617264, "creation_date": 1515617264, "answer_id": 48195810, "question_id": 48195724, "link": "https://stackoverflow.com/questions/48195724/syntax-error-at-end-of-return-line/48195810#48195810", "title": "Syntax Error - ] at end of return line", "body": "<p>An easy mistake to make, but stay at it! List Comprehensions are really useful ways to help shorten code. The last line should read:</p>\n\n<pre><code>return [x for x in l if isinstance(x, int)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 2766304, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1377608788/picture?type=large", "display_name": "Josh Eblin", "link": "https://stackoverflow.com/users/2766304/josh-eblin"}, "edited": false, "score": 1, "creation_date": 1515698342, "post_id": 48195989, "comment_id": 83410405, "body": "The top explanation of how to do list comprehensions is beyond helpful. I had always struggled with them, but that makes it so much easier. The bottom explanation is really helpful as well. Thanks!"}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 1, "last_activity_date": 1515618394, "last_edit_date": 1515618394, "creation_date": 1515618038, "answer_id": 48195989, "question_id": 48195724, "link": "https://stackoverflow.com/questions/48195724/syntax-error-at-end-of-return-line/48195989#48195989", "title": "Syntax Error - ] at end of return line", "body": "<p>If you already have the explicit loop it's actually easy to convert it to a comprehension.</p>\n\n<p>So if you have:</p>\n\n<pre><code>newList = []\nfor x in l:\n    if isinstance(x, int):\n        newList.append(x)\n</code></pre>\n\n<p>Then just remove the <code>newlist = []</code> and put everything inside a <code>[...]</code>:</p>\n\n<pre><code>[\nfor x in l:\n    if isinstance(x, int):\n        newList.append(x)\n]\n</code></pre>\n\n<p>The next step is to move the actual element that is being appended at the front and remove the <code>:</code></p>\n\n<pre><code>[\nx\nfor x in l\n    if isinstance(x, int)\n]\n</code></pre>\n\n<p>That would already work, but generally you also remove the newlines:</p>\n\n<pre><code>[x for x in l if isinstance(x, int)]\n</code></pre>\n\n<p>At least that's how I started \"learning\" comprehensions, maybe it's also helpful for you.</p>\n\n<hr>\n\n<p>The reason why you're code throws the SyntaxError is because it looks like a \"ternary\" expression that is missing the <code>else</code> clause. The ternary looks like this:</p>\n\n<pre><code>expression1 if condition else expression2\n</code></pre>\n\n<p>In your case the expression1 is <code>x in l</code>, the condition is <code>if isinstance(x, int)</code> and you're missing the <code>else expression2</code>. And this \"ternary\" in your case would be wrapped in a list (resulting in a length-one list - if you intended that). For example:</p>\n\n<pre><code>&gt;&gt;&gt; l = [1, 2, 3]\n&gt;&gt;&gt; [1 in l if isinstance(1, int) else None]\n[True]\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 2766304, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1377608788/picture?type=large", "display_name": "Josh Eblin", "link": "https://stackoverflow.com/users/2766304/josh-eblin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 3, "accepted_answer_id": 48195782, "answer_count": 3, "score": 3, "last_activity_date": 1515618394, "creation_date": 1515616879, "question_id": 48195724, "link": "https://stackoverflow.com/questions/48195724/syntax-error-at-end-of-return-line", "title": "Syntax Error - ] at end of return line", "body": "<pre><code>def filter_list(l):\n##newList = []\n##for x in l:\n##    if isinstance(x, int):\n##        newList.append(x)\n##return newList\n\nreturn [x in l if isinstance(x, int)]\n                                    ^\n</code></pre>\n\n<p>Apologies if this is a duplicate, but I didn't see any other syntax error posts that helped. The commented code works, and the uncommented code gives me a syntax error on the last ]. I believe the list comprehension is correct, but I'm not necessarily here to ask that. Why am I getting a syntax error on the ]?</p>\n"}, {"tags": ["python", "urllib"], "comments": [{"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1515619874, "post_id": 48195711, "comment_id": 83373791, "body": "Why don&#39;t you open the file in binary mode and write <code>resp.read()</code> without decoding it?"}], "answers": [{"tags": [], "owner": {"reputation": 1376, "user_id": 6190930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dfbba9c5af37b4eb37bc508a355fda7?s=128&d=identicon&r=PG", "display_name": "pgngp", "link": "https://stackoverflow.com/users/6190930/pgngp"}, "is_accepted": false, "score": 0, "last_activity_date": 1526950569, "creation_date": 1526950569, "answer_id": 50458358, "question_id": 48195711, "link": "https://stackoverflow.com/questions/48195711/how-to-solve-this-error-charmap-codec-cant-encode-character-u200e-in-posi/50458358#50458358", "title": "How to solve this error?-&#39;charmap&#39; codec can&#39;t encode character &#39;\\u200e&#39; in position 158023: character maps to &lt;undefined&gt;", "body": "<p>When I tried your program, I didn't get the actual error you were getting. Instead, I was getting <code>SyntaxError: EOL while scanning string literal</code>. After I modified the code, it seemed to be working. Here's the updated code:</p>\n\n<pre><code>import re\nimport urllib.request\n\nurl = \"http://www.google.com/finance?q=\"\nstock = input(\"Enter the stock you want to search=\")\nurl1 = url + stock\nprint(url1)\n\ntry:\n    req = urllib.request.Request(url1)\n    req.add_header('User-Agent', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)')\n    req.add_header('User-Agent', 'AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132')\n    req.add_header('User-Agent', 'Safari/537.36')\n    resp = urllib.request.urlopen(req)\n    respdata = resp.read()\n    respdata1 = respdata.decode(\"utf-8\")\n    f = open(\"webdata.txt\", \"w\")\n    f.write(str(respdata1))\n    f.close()\nexcept Exception as e:\n    print(str(e))\n</code></pre>\n\n<p>When I ran this code, it created <code>webdata.txt</code>. However, the contents do not contain the stock price of the company. Instead, it contains the output that you would get when you do a google search for the company. So you might want to modify the URL that you use for querying.</p>\n"}], "owner": {"reputation": 11, "user_id": 7196286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86181d7511430fb5688bd108bb967a56?s=128&d=identicon&r=PG&f=1", "display_name": "pswalia4u", "link": "https://stackoverflow.com/users/7196286/pswalia4u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526950569, "creation_date": 1515616800, "last_edit_date": 1526945493, "question_id": 48195711, "link": "https://stackoverflow.com/questions/48195711/how-to-solve-this-error-charmap-codec-cant-encode-character-u200e-in-posi", "title": "How to solve this error?-&#39;charmap&#39; codec can&#39;t encode character &#39;\\u200e&#39; in position 158023: character maps to &lt;undefined&gt;", "body": "<p>I am using python 3.6.3\nand the code which i was running is-</p>\n\n<pre><code>import re\nimport urllib.request\n#https://www.google.com/finance?q=\nurl=\"http://www.google.com/finance?q=\"\nstock=input(\"Enter the stock you want to search=\")\nurl1=url+stock\nprint(url1)\ntry:\n    headers={}\n    headers['User-Agent']=\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) \n    AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 \n    Safari/537.36\"\n    req=urllib.request.Request(url1,headers=headers)\n    resp=urllib.request.urlopen(req)\n    respdata=resp.read()\n    respdata1=respdata.decode(\"utf-8\")\n    f=open(\"webdata.txt\",\"w\")\n    f.write(str(respdata1))\n    f.close()\nexcept Exception as e:\n    print(str(e))\n</code></pre>\n\n<p>This program shows the current stock price of any company.</p>\n"}, {"tags": ["python", "neural-network", "keras"], "comments": [{"owner": {"reputation": 2616, "user_id": 6689249, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lhuuxYmUlKY/AAAAAAAAAAI/AAAAAAAAAE4/2AOKlbKhtRg/photo.jpg?sz=128", "display_name": "aiven", "link": "https://stackoverflow.com/users/6689249/aiven"}, "edited": false, "score": 0, "creation_date": 1515617996, "post_id": 48195701, "comment_id": 83372933, "body": "what are shapes of your <code>x_training</code>, <code>y_training</code> and <code>np_inputRN</code>? what dataset are you using (is it some public one)? How can you explain using <code>kernel_initializer=&#39;random_normal&#39;</code> for first layer? also use can use <code>input_shape=13</code> and <code>optimizer=&#39;adam&#39;</code>. Are you sure that you make predictions on different data?"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1515619516, "post_id": 48195701, "comment_id": 83373646, "body": "Training for just one epoch is not going to get you very far."}, {"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1515623248, "post_id": 48195701, "comment_id": 83375273, "body": "If you are performing a classification - I&#39;d advice also to change the loss to <code>binary_crossentropy</code>"}, {"owner": {"reputation": 1, "user_id": 9200552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153dace17cdac74d8fd190445a575ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Oliveira", "link": "https://stackoverflow.com/users/9200552/felipe-oliveira"}, "reply_to_user": {"reputation": 2616, "user_id": 6689249, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lhuuxYmUlKY/AAAAAAAAAAI/AAAAAAAAAE4/2AOKlbKhtRg/photo.jpg?sz=128", "display_name": "aiven", "link": "https://stackoverflow.com/users/6689249/aiven"}, "edited": false, "score": 0, "creation_date": 1515673758, "post_id": 48195701, "comment_id": 83395073, "body": "@Aiven , the dataset is not public. It is a selection from simulations that I&#39;ve done using Energy Plus using random values for the openings status. Also, for the first layer I&#39;ve used it because I found it on a book, and I was experimenting it. And I have added the information that you ask in the &quot;Ask&quot; section above."}, {"owner": {"reputation": 1, "user_id": 9200552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153dace17cdac74d8fd190445a575ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Oliveira", "link": "https://stackoverflow.com/users/9200552/felipe-oliveira"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1515674277, "post_id": 48195701, "comment_id": 83395411, "body": "@MatiasValdenegro I am experimenting different scenarios, do you suggest any particular value for it?"}, {"owner": {"reputation": 1, "user_id": 9200552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153dace17cdac74d8fd190445a575ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Oliveira", "link": "https://stackoverflow.com/users/9200552/felipe-oliveira"}, "reply_to_user": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1515674494, "post_id": 48195701, "comment_id": 83395543, "body": "@MarcinMo\u017cejko I am not performing a classification because my problem is not divided in classes, would it be helpful in my case?"}, {"owner": {"reputation": 2616, "user_id": 6689249, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lhuuxYmUlKY/AAAAAAAAAAI/AAAAAAAAAE4/2AOKlbKhtRg/photo.jpg?sz=128", "display_name": "aiven", "link": "https://stackoverflow.com/users/6689249/aiven"}, "edited": false, "score": 0, "creation_date": 1515709565, "post_id": 48195701, "comment_id": 83415572, "body": "so it&#39;s regression task and you are trying to output embeddings?"}, {"owner": {"reputation": 1, "user_id": 9200552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153dace17cdac74d8fd190445a575ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Oliveira", "link": "https://stackoverflow.com/users/9200552/felipe-oliveira"}, "edited": false, "score": 0, "creation_date": 1515788846, "post_id": 48195701, "comment_id": 83449581, "body": "Yes, that&#39;s the task. Do you have any idea on how to improve my NN?"}, {"owner": {"reputation": 191, "user_id": 6604134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da9b3c4dfd18f9069d53a1f4e3590595?s=128&d=identicon&r=PG&f=1", "display_name": "jokol", "link": "https://stackoverflow.com/users/6604134/jokol"}, "edited": false, "score": 0, "creation_date": 1574787292, "post_id": 48195701, "comment_id": 104351243, "body": "did you find a solution ?"}], "owner": {"reputation": 1, "user_id": 9200552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153dace17cdac74d8fd190445a575ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Oliveira", "link": "https://stackoverflow.com/users/9200552/felipe-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515673238, "creation_date": 1515616755, "last_edit_date": 1515673238, "question_id": 48195701, "link": "https://stackoverflow.com/questions/48195701/keras-keeps-the-same-prediction-for-different-inputs", "title": "Keras: keeps the same prediction for different inputs", "body": "<p>I am learning how to use keras and I keep getting some problems. I will try to be as much specific as possible.</p>\n\n<p>My task: I am trying to create a neural network to predict opening status for a domestic residence. </p>\n\n<p>I have a dataset with 524729 examples. I use 70% as training set and 30% as test set. I am reaching 70+% of acc in my tests but for some reason every time that I try to predict an output I get the same values.</p>\n\n<p>Right now, I have the following topology: </p>\n\n<pre><code>model = Sequential()\nmodel.add(Dense(15, input_shape=(13, ), kernel_initializer='random_normal'))\nmodel.add(Dense(15, activation='softplus'))\nmodel.add(Dense(15, activation='softplus'))\nmodel.add(Dense(10, activation='sigmoid'))\nmodel.summary()\n\nsgd = optimizers.SGD(lr=0.1, decay=1e-6, momentum=0.3, nesterov=True)\n\n\nmodel.compile(optimizer=sgd, loss='mean_squared_error', metrics=['mae', 'acc'])\n\nmodel.fit(X_training, Y_training, validation_data=(X_test, Y_test), epochs=1, batch_size=32)\n</code></pre>\n\n<p>and I use:</p>\n\n<pre><code>model.predict(np_inputRN, verbose=0)\n</code></pre>\n\n<p>to predict the output but for some reason I keep getting the same values.</p>\n\n<pre><code>0.0172018650919,0.498908281326,0.984391093254,0.485811322927,0.480756670237,0.984736263752,0.536143004894,0.475958675146,0.494080305099,0.488458126783\n</code></pre>\n\n<p>Can some one help me?</p>\n\n<p>==========================================================================\n@Aiven :</p>\n\n<pre><code>Data Set: 524729\nTest Set[30%]: 157418\nTraining Set [70%]: 367310\nX_training.shape: (367311, 13)\nY_training.shape: (367311, 10)\nX_test.shape: (157419, 13)\nY_test.shape: (157419, 10)\n\nnp_inputRN.shape: (1, 13)\n</code></pre>\n"}, {"tags": ["python", "twisted", "autobahn", "crossbar"], "comments": [{"owner": {"reputation": 50035, "user_id": 341583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf9edfdcf79bd399f9b077b815dece35?s=128&d=identicon&r=PG", "display_name": "sscirrus", "link": "https://stackoverflow.com/users/341583/sscirrus"}, "reply_to_user": {"reputation": 45723, "user_id": 18243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/607cfd4a5b41fe6c886c978128b9c03e?s=128&d=identicon&r=PG", "display_name": "Jean-Paul Calderone", "link": "https://stackoverflow.com/users/18243/jean-paul-calderone"}, "edited": false, "score": 0, "creation_date": 1515708400, "post_id": 48195639, "comment_id": 83415120, "body": "@Jean-PaulCalderone While the other question may have a similar answer to this one, these questions are not indicating the same symptoms. This question mentions nothing about a websocket ping timeout, so I don&#39;t think it&#39;s the right decision to call this a duplicate."}], "answers": [{"tags": [], "owner": {"reputation": 45723, "user_id": 18243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/607cfd4a5b41fe6c886c978128b9c03e?s=128&d=identicon&r=PG", "display_name": "Jean-Paul Calderone", "link": "https://stackoverflow.com/users/18243/jean-paul-calderone"}, "is_accepted": true, "score": 0, "last_activity_date": 1515760171, "creation_date": 1515760171, "answer_id": 48226333, "question_id": 48195639, "link": "https://stackoverflow.com/questions/48195639/autobahnpython-twisted-publish-floods-messages-after-script-is-finished/48226333#48226333", "title": "AutobahnPython + Twisted &#39;Publish&#39; floods messages after script is finished", "body": "<blockquote>\n  <p>What reasons are there for publish to not happen instantaneously?</p>\n</blockquote>\n\n<p>The reactor has to get a chance to run for I/O to happen.  The example code doesn't let the reactor run because it keeps execution in a <code>while</code> loop in user code for a long time.</p>\n"}], "owner": {"reputation": 50035, "user_id": 341583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf9edfdcf79bd399f9b077b815dece35?s=128&d=identicon&r=PG", "display_name": "sscirrus", "link": "https://stackoverflow.com/users/341583/sscirrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 48226333, "answer_count": 1, "score": 0, "last_activity_date": 1515760171, "creation_date": 1515616550, "question_id": 48195639, "link": "https://stackoverflow.com/questions/48195639/autobahnpython-twisted-publish-floods-messages-after-script-is-finished", "title": "AutobahnPython + Twisted &#39;Publish&#39; floods messages after script is finished", "body": "<p>I have a Python script that sometimes runs a process that lasts ~5-60 seconds. During this time, ten calls to <code>session.publish()</code> <em>are ignored until the script is done.</em> As soon as the script finishes, all ten messages are published in a flood.</p>\n\n<p>I have corroborated this by opening the Crossbar.io router in debug mode, and it shows logs corresponding to the published messages after the time is over (not during its run as expected).</p>\n\n<p>The script in question is long, complex and includes a combined frontend and backend for Crossbar/Twisted/AutobahnPython. I feel I would risk misreporting the problem if I tried to condense and include it here.</p>\n\n<p><b>What reasons are there for publish to not happen instantaneously?</b></p>\n\n<p>A couple of unsuccessful tries so far:</p>\n\n<ul>\n<li><a href=\"https://github.com/crossbario/autobahn-python/issues/120\" rel=\"nofollow noreferrer\">Source</a>: Twisted needs 'non-blocking code'. So, I try to incorporate <code>reactor.callLater</code> but without success (I also don't really know how to do this for a <code>publish</code> event).</li>\n<li>I looked into the <a href=\"https://stackoverflow.com/a/28463266/341583\">idea of using Pool</a> to spawn workers to perform the publish.</li>\n<li>The AutobahnPython repo doesn't seem to have any examples that really include this kind of situation.</li>\n</ul>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "mysql", "django", "orm", "inner-join"], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 1, "last_activity_date": 1515618276, "creation_date": 1515618276, "answer_id": 48196055, "question_id": 48195601, "link": "https://stackoverflow.com/questions/48195601/how-to-make-a-double-inner-join-in-django/48196055#48196055", "title": "How to make a double Inner Join in django?", "body": "<p>You should not be thinking in these terms. You should be thinking in terms of how you get the objects that you want. In your case, you want the Need objects that refer to the candidates offers. So:</p>\n\n<pre><code>needs = Need.objects.filter(offer__candidate=request.session['candidate_id'])\n</code></pre>\n\n<p>Now you can iterate through needs and get <code>need.country.country_name</code> and <code>need.city.city_name</code>; this will be inefficient, because it will cause a query on each access, so we can add <code>select_related</code> to the query:</p>\n\n<pre><code>needs = needs.select_related('country', 'city')\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 8747207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-R1BCkXtE1t4/AAAAAAAAAAI/AAAAAAAAABk/04aQ8PYOW6s/photo.jpg?sz=128", "display_name": "Sergio Mendez", "link": "https://stackoverflow.com/users/8747207/sergio-mendez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 48196055, "answer_count": 1, "score": 0, "last_activity_date": 1515618276, "creation_date": 1515616320, "question_id": 48195601, "link": "https://stackoverflow.com/questions/48195601/how-to-make-a-double-inner-join-in-django", "title": "How to make a double Inner Join in django?", "body": "<p>I have a django aplication that have to show the country name and the city name of a \"need\" in the list of candidate.\nTo explain this better I have the next picture:\n<a href=\"https://i.stack.imgur.com/B0Vf9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B0Vf9.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, here is the process:\nFirst, someone posts a \"need\" with their respective country and city.\nThe city and the country are in diferent model.</p>\n\n<p>Then, the candidate can make an offer to resolve that need.</p>\n\n<p>I want to see in a list, all the offers I send to the need (just 1 offer to 1 need) but in my html template I want to display the name of the country and the city of the need.</p>\n\n<p>Here is my <strong>models.py</strong></p>\n\n<pre><code>class requiter (models.Model):\n    requiter_name = models.CharField(max_length=200, null=True)\n\nclass country (models.Model):\n    country_name = models.CharField(max_length=200, null=True)\n\nclass city (models.Model):\n    city_name = models.CharField(max_length=200, null=True)\n\nclass candidate (models.Model):\n    full_name=models.CharField(max_length=230, null=True)\n\nclass need(models.Model):\n    requiter = models.ForeignKey(requiter, on_delete=models.CASCADE, null=True)\n    title= models.CharField(max_length=300, null=True)\n    description=models.TextField(null=True)\n    country=models.ForeignKey(country, on_delete=models.CASCADE, null=True)\n    city=models.ForeignKey(city, on_delete=models.CASCADE, null=True)\n\nclass offer(models.Model):\n    need = models.ForeignKey(need, on_delete=models.CASCADE, null=True)\n    candidate = models.ForeignKey(candidate, on_delete=models.CASCADE, null=True)\n</code></pre>\n\n<p>and here is my <strong>views.py</strong></p>\n\n<pre><code>def candidateprofile(request):\n    candata = candidate.objects.get(id=request.session['account_id'])\n    #HERE IS WHERE I WANT TO TAKE ALL THE OFFERS THAT THE CANDIDATE MADE, AND THE NAME OF THE COUNTRY AND CITY IN THE NEEDS\n    myoffers = offer.objects.filter(candidate_id = request.session['account_id'] )\n    #??????\n    dic.update({'candata': candata, 'jobapplies': jobapplies})\n    return render(request, 'my_app/candidateProfile.html', dic)\n</code></pre>\n\n<p>In SQL the equivalent is next:</p>\n\n<pre><code>SELECT o.need_id, n.title, r.recruiter_name, c.country_name, y.city_name FROM offer AS o\nINNER JOIN need AS n ON o.need_id = n.id\nINNER JOIN requiter AS r ON n.recruiter_id = r.id\nINNER JOIN country AS c ON n.country_id = c.id\nINNER JOIN city AS y ON n.city_id = y.id\nWHERE o.candidate_id = sended_parameter\n</code></pre>\n\n<p>But I don't know how to do it in django. Please Help!</p>\n"}, {"tags": ["python", "nltk"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 3347391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1b79a348aeeb57d0d91bd722a631c3?s=128&d=identicon&r=PG&f=1", "display_name": "Grumpybeard", "link": "https://stackoverflow.com/users/3347391/grumpybeard"}, "edited": false, "score": 0, "creation_date": 1515833347, "post_id": 48218610, "comment_id": 83458955, "body": "That&#39;s so very useful and a good guide to building up the complexity of the sentence.  Part of the difficulty I find is mapping the grammer types I see when I tokenize, e.g. [(&#39;show&#39;, &#39;VB&#39;), (&#39;me&#39;, &#39;PRP&#39;), (&#39;the&#39;, &#39;DT&#39;), (&#39;movies&#39;, &#39;NNS&#39;), to the types used in the fcfg, any tips on that?  I also note you used FeatureEarleyChartParser whereas in the op I used parse - what is the difference between the two?  Thank-you!!!"}], "tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": false, "score": 0, "last_activity_date": 1515723706, "last_edit_date": 1515723706, "creation_date": 1515723115, "answer_id": 48218610, "question_id": 48195584, "link": "https://stackoverflow.com/questions/48195584/nltk-fcfg-grammar-parser-out-of-index/48218610#48218610", "title": "NLTK fcfg grammar parser out of index", "body": "<p>To debug the grammar, start small and grow your rules. </p>\n\n<h1>Lets start from underspecified VP and feature-structured V and N</h1>\n\n<pre><code>from nltk import grammar, parse\nfrom nltk.parse.generate import generate\n\ng = \"\"\"\nVP -&gt; V N\nV[SEM='SELECT'] -&gt; 'show'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<p>[out]:</p>\n\n<pre><code>[Tree(VP[], [Tree(V[SEM='SELECT'], ['show']), Tree(N[SEM='title FROM films'], ['movies'])])]\n</code></pre>\n\n<h1>Now, lets add the determiner.</h1>\n\n<pre><code>g = \"\"\"\nVP -&gt; V NP\nNP[SEM=(?det + ?n)] -&gt; DT[SEM=?det] N[SEM=?n]\nDT[SEM=''] -&gt; 'the'\nV[SEM='SELECT'] -&gt; 'show'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show the movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<p>[out]:</p>\n\n<pre><code>[Tree(VP[], [Tree(V[SEM='SELECT'], ['show']), Tree(NP[SEM=(, title FROM films)], [Tree(DT[SEM=''], ['the']), Tree(N[SEM='title FROM films'], ['movies'])])])]\n</code></pre>\n\n<h1>Then we add the pronoun.</h1>\n\n<p>We want to parse the sentence \"show me the movie\" as </p>\n\n<pre><code>S[ VP[show me] NP[the movie] ]\n</code></pre>\n\n<p>so we have to change how our TOP to <code>S -&gt; VP NP</code>.</p>\n\n<pre><code>g = \"\"\"\nS -&gt; VP NP\nVP[SEM=(?v + ?pro)] -&gt; V[SEM=?v] PRO[SEM=?pro]\nNP[SEM=(?det + ?n)] -&gt; DT[SEM=?det] N[SEM=?n]\nV[SEM='SELECT'] -&gt; 'show'\nPRO[SEM=''] -&gt; 'me'\nDT[SEM=''] -&gt; 'the'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show me the movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<p>[out]:</p>\n\n<pre><code>[Tree(S[], [Tree(VP[SEM=(SELECT, )], [Tree(V[SEM='SELECT'], ['show']), Tree(PRO[SEM=''], ['me'])]), Tree(NP[SEM=(, title FROM films)], [Tree(DT[SEM=''], ['the']), Tree(N[SEM='title FROM films'], ['movies'])])])]\n</code></pre>\n\n<h1>Here comes the mystery</h1>\n\n<p>Our TOP rule is underspecified for now, but if we specify both the left-hand-side (LHS) and right-hand-side (RHS), we see that it doesn't work:</p>\n\n<pre><code>g = \"\"\"\nS[SEM=(?vp + WHERE + ?np)] -&gt; VP[SEM=?vp] NP[SEM=?np]\n\nVP[SEM=(?v + ?pro)] -&gt; V[SEM=?v] PRO[SEM=?pro]\nNP[SEM=(?det + ?n)] -&gt; DT[SEM=?det] N[SEM=?n]\n\nV[SEM='SELECT'] -&gt; 'show'\nPRO[SEM=''] -&gt; 'me'\nDT[SEM=''] -&gt; 'the'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show me the movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<p>Even if we remove the <code>WHERE</code> semantics, we see that it didn't parse:</p>\n\n<pre><code>g = \"\"\"\nS[SEM=(?vp + ?np)] -&gt; VP[SEM=?vp] NP[SEM=?np]\n\nVP[SEM=(?v + ?pro)] -&gt; V[SEM=?v] PRO[SEM=?pro]\nNP[SEM=(?det + ?n)] -&gt; DT[SEM=?det] N[SEM=?n]\n\nV[SEM='SELECT'] -&gt; 'show'\nPRO[SEM=''] -&gt; 'me'\nDT[SEM=''] -&gt; 'the'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show me the movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<p>[out]:</p>\n\n<pre><code>[]\n</code></pre>\n\n<p>But if we specify only the RHS, it parses:</p>\n\n<pre><code>g = \"\"\"\nS -&gt; VP[SEM=?vp] NP[SEM=?np]\n\nVP[SEM=(?v + ?pro)] -&gt; V[SEM=?v] PRO[SEM=?pro]\nNP[SEM=(?det + ?n)] -&gt; DT[SEM=?det] N[SEM=?n]\n\nV[SEM='SELECT'] -&gt; 'show'\nPRO[SEM=''] -&gt; 'me'\nDT[SEM=''] -&gt; 'the'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show me the movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<p>[out]:</p>\n\n<pre><code>[Tree(S[], [Tree(VP[SEM=(SELECT, )], [Tree(V[SEM='SELECT'], ['show']), Tree(PRO[SEM=''], ['me'])]), Tree(NP[SEM=(, title FROM films)], [Tree(DT[SEM=''], ['the']), Tree(N[SEM='title FROM films'], ['movies'])])])]\n</code></pre>\n\n<p>The same works when we specify only the LHS:</p>\n\n<pre><code>g = \"\"\"\nS[SEM=(?vp + WHERE + ?np)] -&gt; VP NP\n\nVP[SEM=(?v + ?pro)] -&gt; V[SEM=?v] PRO[SEM=?pro]\nNP[SEM=(?det + ?n)] -&gt; DT[SEM=?det] N[SEM=?n]\n\nV[SEM='SELECT'] -&gt; 'show'\nPRO[SEM=''] -&gt; 'me'\nDT[SEM=''] -&gt; 'the'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show me the movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<p>[out]:</p>\n\n<pre><code>[Tree(S[SEM=(?vp+WHERE+?np)], [Tree(VP[SEM=(SELECT, )], [Tree(V[SEM='SELECT'], ['show']), Tree(PRO[SEM=''], ['me'])]), Tree(NP[SEM=(, title FROM films)], [Tree(DT[SEM=''], ['the']), Tree(N[SEM='title FROM films'], ['movies'])])])]\n</code></pre>\n\n<h1>Lets recap</h1>\n\n<p>We can specify the non-terminals as we have done for NP and VP but what makes the TOP (i.e. <code>S -&gt; VP NP</code>) special?</p>\n\n<p>What if we hack grammar and just give a unary branch up from?</p>\n\n<pre><code>g = \"\"\"\nS -&gt; SP\nSP[SEM=(?vp + WHERE + ?np)] -&gt; VP[SEM=?vp] NP[SEM=?np]\n\nVP[SEM=(?v + ?pro)] -&gt; V[SEM=?v] PRO[SEM=?pro]\nNP[SEM=(?det + ?n)] -&gt; DT[SEM=?det] N[SEM=?n]\n\nV[SEM='SELECT'] -&gt; 'show'\nPRO[SEM=''] -&gt; 'me'\nDT[SEM=''] -&gt; 'the'\nN[SEM='title FROM films'] -&gt; 'movies'\n\"\"\"\n\nmy_grammar =  grammar.FeatureGrammar.fromstring(g)\n\nparser = parse.FeatureEarleyChartParser(my_grammar)\ntrees = parser.parse('show me the movies'.split())\nprint (list(trees)) \n</code></pre>\n\n<h1>It parsed!</h1>\n\n<p>[out]:</p>\n\n<pre><code>[Tree(S[], [Tree(SP[SEM=(SELECT, , WHERE, , title FROM films)], [Tree(VP[SEM=(SELECT, )], [Tree(V[SEM='SELECT'], ['show']), Tree(PRO[SEM=''], ['me'])]), Tree(NP[SEM=(, title FROM films)], [Tree(DT[SEM=''], ['the']), Tree(N[SEM='title FROM films'], ['movies'])])])])]\n</code></pre>\n\n<p>Someone should raise this question/issue to the NLTK github repo. It looks like it might be a special feature to protect the TOP rule or a bug =)</p>\n"}], "owner": {"reputation": 161, "user_id": 3347391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1b79a348aeeb57d0d91bd722a631c3?s=128&d=identicon&r=PG&f=1", "display_name": "Grumpybeard", "link": "https://stackoverflow.com/users/3347391/grumpybeard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554794204, "creation_date": 1515616262, "last_edit_date": 1592644375, "question_id": 48195584, "link": "https://stackoverflow.com/questions/48195584/nltk-fcfg-grammar-parser-out-of-index", "title": "NLTK fcfg grammar parser out of index", "body": "<p>I'm new to NLTK.  Trying to transform &quot;show me the movies&quot; into a simple SQL SELECT statement &quot;SELECT title from films&quot;.</p>\n<p>I believe the sentence is (VP + NP) with VP(V + PRO) and NP(DET + N). However I have no doubt the .fcfg grammar I'm setting up is incorrect, I'm getting the following index error on &quot;anwser = trees&quot;, with trees being empty.</p>\n<p>How to correct the .fcfg?</p>\n<blockquote>\n<p>IndexError: list index out of range</p>\n<p>Process finished with exit code 1</p>\n</blockquote>\n<p>Parser</p>\n<pre><code>% start S\nS[SEM=(?np + WHERE + ?vp)] -&gt; NP[SEM=?np] VP[SEM=?vp]\nVP[SEM=(?v + ?pro)] -&gt; V[SEM=?v] PRO[SEM=?pro]\nNP[SEM=(?det + ?n)] -&gt; Det[SEM=?det] N[SEM=?n]\nDet[SEM=''] -&gt; 'the'\nPRO[SEM=''] -&gt; 'me'\nN[SEM='title FROM films'] -&gt; 'movies'\nV[SEM='SELECT'] -&gt; 'show'\n</code></pre>\n<p>Python code</p>\n<pre><code>from nltk import load_parser\ncp = load_parser('parser3.fcfg')\nquery = 'show me the movies'\ntrees = list(cp.parse(query.split()))\nprint(trees)\nanswer = trees[0].label()['SEM']\nanswer = [s for s in answer if s]\nq = ' '.join(answer)\nprint(q)\n</code></pre>\n"}, {"tags": ["python", "pandas", "pivot"], "comments": [{"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1515616510, "post_id": 48195562, "comment_id": 83372200, "body": "what denotes &quot;top 10&quot;? Also - please print <code>df.head(5)</code> and add it here. it seems like what you gave us is all the column names and their first value. It will also help if you only give us the columns that are necessary to provide the desired result."}, {"owner": {"reputation": 610, "user_id": 1603548, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b43d6fccb959595a1c491e0572db6f45?s=128&d=identicon&r=PG", "display_name": "jacob", "link": "https://stackoverflow.com/users/1603548/jacob"}, "reply_to_user": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1515658914, "post_id": 48195562, "comment_id": 83385920, "body": "&quot;top 10&quot; refers to the 10 most frequent employers. In other words: <code>df.groupby(&#39;employer_name&#39;).size().head(10)</code>"}], "owner": {"reputation": 610, "user_id": 1603548, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b43d6fccb959595a1c491e0572db6f45?s=128&d=identicon&r=PG", "display_name": "jacob", "link": "https://stackoverflow.com/users/1603548/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515616181, "creation_date": 1515616181, "question_id": 48195562, "link": "https://stackoverflow.com/questions/48195562/display-the-most-frequent-value-for-several-columns-in-a-pivot-like-table", "title": "display the most frequent value for _several_ columns in a pivot like table?", "body": "<p>How do I display the most frequent value for <em>several</em> columns in a pivot like table? </p>\n\n<p>I want the table to mimic the one on page 43 in this <a href=\"https://www.foreignlaborcert.doleta.gov/pdf/OFLC_Annual_Report_FY2016.pdf\" rel=\"nofollow noreferrer\">report</a>. \nIn other words: I want to get a table of the top 10 employers, showing the following table:</p>\n\n<hr>\n\n<p><strong>Employer;  Certified positions;  % of certified positions;  Top work state for that employer;  Top occupation for that employer.</strong></p>\n\n<p>Deloitte; 163000; 14%;  Pennsylvania;  Computer Systems analysts</p>\n\n<p>Price water; 54000; 5%;  California;  Accountants</p>\n\n<hr>\n\n<p>(Sorry the markdown table did not format as it should).</p>\n\n<p>This is a <a href=\"https://pandas.pydata.org/pandas-docs/stable/groupby.html\" rel=\"nofollow noreferrer\">split/apply/combine</a> type of action. </p>\n\n<p>I try doing the above with the following code:</p>\n\n<pre><code># select the cols in the table \ncols = ['employer_name', 'case_status', 'worksite_state', 'soc_name']\n# decide which aggregation function each col shoudl have in the table \nagg_dict = {'employer_name':'count', 'case_status':'most_frequent', \n                  'worksite_state':'most_frequent', 'soc_name':'most_frequent'}\n# select rows the case_status is certified\nrows = df.case_status == CERTIFIED\n# print out the table \ndf[rows].groupby('employer_name')[cols].agg(agg_dict).sort_values(by='employer_name').head(10)\n</code></pre>\n\n<p>Below is the first row of the dataset. </p>\n\n<p><code>\nindex                                                   352027\ncase_number                                 I-200-14111-816263\ncase_status                                          CERTIFIED\ncase_submitted                             2014-04-21 16:49:19\ndecision_date                              2014-04-25 22:00:47\nemployer_city                                     PHILADELPHIA\nemployer_name                          DELOITTE CONSULTING LLP\nemployer_postal_code                                     19103\nemployment_end_date                        2017-04-22 00:00:00\nemployment_start_date                      2014-04-22 00:00:00\nfull_time_position                                           Y\njob_title                                    SENIOR CONSULTANT\nnaic_code                                                54161\nprevailing_wage                                         110094\npw_source_other                        OFLC ONLINE DATA CENTER\npw_source_year                                            2013\npw_unit_of_pay                                            Year\npw_wage_source                                             OES\nsoc_code                                               15-1133\nsoc_name                 Software Developers, Systems Software\ntotal_workers                                                1\nvisa_class                                                H-1B\nwage_rate_of_pay_from                                   115800\nwage_rate_of_pay_to                                        NaN\nwage_unit_of_pay                                          Year\nworksite_city                                         SAN JOSE\nworksite_state                                      California\n</code></p>\n"}, {"tags": ["python", "subprocess"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1515617536, "post_id": 48195552, "comment_id": 83372706, "body": "I&#39;d love to answer but I can&#39;t... All I can say is that implementations of os.system and subprocess.call are completely different: <a href=\"https://github.com/python/cpython/blob/master/Lib/subprocess.py\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/master/Lib/subprocess.py</a> vs <a href=\"https://hg.python.org/cpython/file/v2.7.3/Modules/posixmodule.c\" rel=\"nofollow noreferrer\">hg.python.org/cpython/file/v2.7.3/Modules/posixmodule.c</a>."}], "owner": {"reputation": 24851, "user_id": 15690, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b152494ea58b7d2dc840468b3aa4b77a?s=128&d=identicon&r=PG", "display_name": "blueyed", "link": "https://stackoverflow.com/users/15690/blueyed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1515616133, "creation_date": 1515616133, "question_id": 48195552, "link": "https://stackoverflow.com/questions/48195552/why-are-atexit-handlers-not-executed-with-subprocess-but-os-system", "title": "Why are atexit handlers not executed with subprocess, but os.system?", "body": "<p><a href=\"https://docs.python.org/3.6/library/subprocess.html#replacing-os-system\" rel=\"nofollow noreferrer\">https://docs.python.org/3.6/library/subprocess.html#replacing-os-system</a> states that <code>os.system()</code> can be replaced with <code>subprocess.call(\u2026, shell=True)</code>, but I've noticed two differences when calling a Python program with them:</p>\n\n<ol>\n<li><p><code>atexit</code> is not triggered in case of using <kbd>Ctrl</kbd>-<kbd>c</kbd> with <code>subprocess</code> for the inner program.</p></li>\n<li><p><code>KeyboardInterrupt</code> is not raiised when using <code>subprocess</code> in the outer program.</p></li>\n</ol>\n\n<p>I think this is related how signals are handled across/for the subprocess, but using <code>restore_signals=True</code> or <code>restore_signals=False</code> did not have an effect.</p>\n\n<p>Is there a better way than calling <code>atexit._run_exitfuncs()</code> manually?</p>\n\n<p>Test program:</p>\n\n<pre><code>import atexit\nimport os\nimport subprocess\nimport sys\nimport time\n\nif int(os.environ.get('RUN_MAIN', 0)):\n    atexit.register(lambda: print('atexit inner'))\n\n    print('sub, press Ctrl-C')\n    try:\n        time.sleep(60)\n    except KeyboardInterrupt:\n        # atexit._run_exitfuncs()\n        print('kbd: inner')\n\nelse:\n    atexit.register(lambda: print('atexit outer'))\n\n    print('== with os.system')\n    try:\n        print(os.system('env RUN_MAIN=1 %s t-atexit.py' % sys.executable))\n    except KeyboardInterrupt:\n        print('kbd: outer1')\n\n    print('== with subprocess.call')\n    try:\n        subprocess.call(\n            ['env', 'RUN_MAIN=1', sys.executable, 't-atexit.py'],\n        )\n    except KeyboardInterrupt:\n        print('kbd: outer2')\n\n    print('== with subprocess.call (shell=True)')\n    try:\n        subprocess.call(\n            'env RUN_MAIN=1 %s t-atexit.py' % sys.executable,\n            shell=True,\n        )\n    except KeyboardInterrupt:\n        print('kbd: outer3')\n\n    print('exit outer')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>== with os.system                      \nsub, press Ctrl-C\n^Ckbd: inner\natexit inner\n0\n== with subprocess.call\nsub, press Ctrl-C\n^Ckbd: inner\nkbd: outer2\n== with subprocess.call (shell=True)\nsub, press Ctrl-C\n^Ckbd: inner\nkbd: outer3\nexit outer\natexit outer\n</code></pre>\n\n<p>I've noticed this with Django's runserver, which uses a subprocess (and thread) when it uses the (default) feature to reload on changed files: in this case an <code>atexit</code> handler installed in the subprocess (via <code>pdbrc</code>) is not executed.</p>\n"}, {"tags": ["python", "multithreading", "hardware", "freebsd"], "comments": [{"owner": {"reputation": 3604, "user_id": 1293320, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/46e53d5316367e80cd4572e8b8b88d95?s=128&d=identicon&r=PG", "display_name": "Lucas Holt", "link": "https://stackoverflow.com/users/1293320/lucas-holt"}, "edited": false, "score": 0, "creation_date": 1515621239, "post_id": 48195549, "comment_id": 83374443, "body": "Do you have a limit on the number of connections with postgresql? that could explain why it falls over with larger numbers."}, {"owner": {"reputation": 67, "user_id": 8241626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec268b9ab23933cbc664a54e345e64dc?s=128&d=identicon&r=PG", "display_name": "user8241626", "link": "https://stackoverflow.com/users/8241626/user8241626"}, "reply_to_user": {"reputation": 3604, "user_id": 1293320, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/46e53d5316367e80cd4572e8b8b88d95?s=128&d=identicon&r=PG", "display_name": "Lucas Holt", "link": "https://stackoverflow.com/users/1293320/lucas-holt"}, "edited": false, "score": 0, "creation_date": 1515774769, "post_id": 48195549, "comment_id": 83442853, "body": "postgresql configuration seems like a promising avenue, but unfortunately maxconnections was 100 and raising it to 200 made no difference (even though not even 100 should have been used before)."}, {"owner": {"reputation": 67, "user_id": 8241626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec268b9ab23933cbc664a54e345e64dc?s=128&d=identicon&r=PG", "display_name": "user8241626", "link": "https://stackoverflow.com/users/8241626/user8241626"}, "reply_to_user": {"reputation": 3604, "user_id": 1293320, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/46e53d5316367e80cd4572e8b8b88d95?s=128&d=identicon&r=PG", "display_name": "Lucas Holt", "link": "https://stackoverflow.com/users/1293320/lucas-holt"}, "edited": false, "score": 0, "creation_date": 1515966541, "post_id": 48195549, "comment_id": 83491622, "body": "a little more info: when killing the process the following will be seen: <code>Error in atexit._run_exitfuncs:     Traceback (most recent call last):       File &quot;&#47;usr&#47;local&#47;lib&#47;python3.6&#47;multiprocessing&#47;popen_fork.py&quot;, line 35, in poll     pid, sts = os.waitpid(self.pid, flag)     KeyboardInterrupt</code>"}, {"owner": {"reputation": 4470, "user_id": 1884363, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DmTLe.jpg?s=128&g=1", "display_name": "sudo", "link": "https://stackoverflow.com/users/1884363/sudo"}, "edited": false, "score": 0, "creation_date": 1517873760, "post_id": 48195549, "comment_id": 84263536, "body": "I wonder if you&#39;ll have the same problem using a <code>Queue</code> instead of a <code>manager</code> list."}, {"owner": {"reputation": 4470, "user_id": 1884363, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DmTLe.jpg?s=128&g=1", "display_name": "sudo", "link": "https://stackoverflow.com/users/1884363/sudo"}, "edited": false, "score": 0, "creation_date": 1517874226, "post_id": 48195549, "comment_id": 84263664, "body": "You never close your <code>dbconnection</code> at the end. This isn&#39;t a problem by itself, but psycopg2 closes it for you in the <code>del</code> method, which would run after your print, so I&#39;d try explicitly doing <code>dbconnection.close()</code> and <code>del dbconnection</code> before you print &quot;finished search&quot; to see if it&#39;s hanging on closing the DB connection."}], "owner": {"reputation": 67, "user_id": 8241626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec268b9ab23933cbc664a54e345e64dc?s=128&d=identicon&r=PG", "display_name": "user8241626", "link": "https://stackoverflow.com/users/8241626/user8241626"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517868247, "creation_date": 1515616126, "last_edit_date": 1517868247, "question_id": 48195549, "link": "https://stackoverflow.com/questions/48195549/freebsd-multithreaded-python-intermittent-failures-to-return-from-function", "title": "FreeBSD + multithreaded python = *intermittent* failures to return from function [Ryzen incompatibility?]", "body": "<p>[UPDATED: 'fix' is disable SMT in BIOS; i.e. something very ugly is going on: FreeBSD vs Ryzen]</p>\n\n<p>This one has me scratching my head. The following code intermittently fails on FreeBSD 11.1 + python 3.6.4 + postgresql 10.1 + Ryzen 1600x. This is all happening inside of a Flask app, but I do not think that that is relevant.</p>\n\n<p>The problem does not occur with this code with macOS + python 3.6.4 + postgresql 10.1.</p>\n\n<p>The code does not seem to fail ever if <code>workers &lt;= 4</code>. It will fail randomly if <code>workers &gt;= 5</code>. It will take &lt; 20 tries to induce a failure. </p>\n\n<p>Success will yield the list of finds, of course. You will also see a copy of <code>finished search</code> for every worker: 4x, 6x, 10x, ... You will also see a single <code>RETURNED FROM SEARCH</code>.</p>\n\n<p>Failure means you never get the list returned. But you will see a copy of <code>finished search</code> for every worker: 4x, 6x, 10x, ... And so <code>workonsearch()</code> really does seem to have completely finished. Nevertheless you will <em>not</em> see <code>RETURNED FROM SEARCH</code> as the result returns to <code>threadedsearcher()</code></p>\n\n<p>A stripped down version of the code in question:</p>\n\n<pre><code>def threadedsearcher(searchobject):\n\n    managedlistoffinds = manager.list()\n    searchlist = manager.list(searchobject.tosearch)\n\n    workers = 6\n\n    jobs = [Process(target=workonsearch, args=(managedlistoffinds, searchlist, lookingfor))\n                for i in range(workers)]      \n    for j in jobs:\n        j.start()\n    for j in jobs:\n        j.join()\n    print('RETURNED FROM SEARCH')\nreturn managedlistoffinds\n\n\ndef workonsearch(managedlistoffinds, searchlist, lookingfor):\n\n    dbconnection = setconnection()\n    curs = dbconnection.cursor()\n    so = searchobject\n\n    while searchlist:\n        try:\n            table = searchlist.pop()\n        except IndexError:\n            table = None\n            searchlist = None\n\n        if table:\n            newfinds = mysearch(lookingfor, table)\n            managedlistoffinds += newfinds\n\n    dbconnection.commit()\n    curs.close()\n    print('finished search')\n    return managedlistoffinds\n</code></pre>\n"}, {"tags": ["python", "tkinter", "treeview", "ttk"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 3, "creation_date": 1515617291, "post_id": 48195505, "comment_id": 83372571, "body": "This should be easy to find out with a little test. Why not create a treeview, then create a loop that creates a few million items to see what happens?"}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 7385015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDOad.png?s=128&g=1", "display_name": "Alec White", "link": "https://stackoverflow.com/users/7385015/alec-white"}, "is_accepted": true, "score": 1, "last_activity_date": 1515674904, "creation_date": 1515674904, "answer_id": 48207480, "question_id": 48195505, "link": "https://stackoverflow.com/questions/48195505/can-tkinter-ttk-treeview-iid-overflow/48207480#48207480", "title": "Can Tkinter ttk.treeview iid overflow?", "body": "<p>After some testing I discovered iids are not just three digit hexadecimals but can be up to five. I say up to five because in my testing I hit a memory error before I could exhaust the amount of unique iids. I was getting iids like \"IEA600\" before I hit memory issues.</p>\n\n<p>One memory error was \"unable to realloc 3145736 bytes\" when deleting just under a million children from the treeview.</p>\n"}], "owner": {"reputation": 172, "user_id": 7385015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDOad.png?s=128&g=1", "display_name": "Alec White", "link": "https://stackoverflow.com/users/7385015/alec-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 48207480, "answer_count": 1, "score": 1, "last_activity_date": 1515674904, "creation_date": 1515615912, "question_id": 48195505, "link": "https://stackoverflow.com/questions/48195505/can-tkinter-ttk-treeview-iid-overflow", "title": "Can Tkinter ttk.treeview iid overflow?", "body": "<p>I am using tkinter and specifically the ttk.treeview widget to display tuples. I do a lot of inserting and was wondering if the iid (item identifier) can overflow or how it is handled. I hypothesize that the maximum iid is 0xFFF which is equivalent to 4095 base 10 given that they are formatted as string like \"I001.\" If they do overflow how can I reuse/delete an iid?  </p>\n"}, {"tags": ["python", "multithreading", "python-multithreading"], "comments": [{"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 2, "creation_date": 1515616085, "post_id": 48195453, "comment_id": 83372011, "body": "Almost all of your code (except for the irrelevant <code>time.sleep(.5)</code>) is cpu bound. Once you start more processes then your cpu cores you should expect 100% cpu eaten."}, {"owner": {"reputation": 7, "user_id": 8592605, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ff6048489f165a72328097749c00eda6?s=128&d=identicon&r=PG&f=1", "display_name": "Andres123", "link": "https://stackoverflow.com/users/8592605/andres123"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1515616433, "post_id": 48195453, "comment_id": 83372168, "body": "However if I run multiprocessing etc 100, It doesn&#39;t eat the CPU that much at all until the _thread runs. So might be a issue on _thread?"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 1, "creation_date": 1515616752, "post_id": 48195453, "comment_id": 83372314, "body": "Python also doesn&#39;t allow true native threads (yes, thread is implemented as a native thread, but the GIL effectively forces execution in one thread). It just allows parallelism within the single process Python runs in. <code>multiprocess</code> allows you to use multiple cores. If your task is CPU-bound, you&#39;re not going to get speed-ups with multi-threading."}, {"owner": {"reputation": 7, "user_id": 8592605, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ff6048489f165a72328097749c00eda6?s=128&d=identicon&r=PG&f=1", "display_name": "Andres123", "link": "https://stackoverflow.com/users/8592605/andres123"}, "reply_to_user": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1515617220, "post_id": 48195453, "comment_id": 83372526, "body": "@AlexanderHuszagh Oh so in that case, What could I do if I change up the whole thing in that case? Like what would be the best suggestions to do?"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1515617923, "post_id": 48195453, "comment_id": 83372899, "body": "@Andres123 Cython is a great tool, C/C++-extensions also exist, and so is <code>multiprocessing</code>. I personally like Cython with the <code>nogil</code> keyword a lot, if you&#39;re willing to compile code. If not, just use <code>multiprocessing</code>. Just a reminder that on Windows, there is no effective copy-on-write for <code>os.fork</code>, so it must completely copy the existing process, so your code may be slower using <code>multiprocessing</code> on Windows than the single process vversion."}, {"owner": {"reputation": 7, "user_id": 8592605, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ff6048489f165a72328097749c00eda6?s=128&d=identicon&r=PG&f=1", "display_name": "Andres123", "link": "https://stackoverflow.com/users/8592605/andres123"}, "edited": false, "score": 0, "creation_date": 1515618271, "post_id": 48195453, "comment_id": 83373079, "body": "Oh you are right! But as you can see I do have multiprocessing and it works fine. However in my def Checker is where the issue is coming, if I remove the _thread then it will just run 1 and wait until its finished and then run another processing. but what I want is that it should run all of them together. Thats why im using the _thread. But maybe there is another way than just _thread?"}], "owner": {"reputation": 7, "user_id": 8592605, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ff6048489f165a72328097749c00eda6?s=128&d=identicon&r=PG&f=1", "display_name": "Andres123", "link": "https://stackoverflow.com/users/8592605/andres123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533893951, "creation_date": 1515615690, "last_edit_date": 1533893951, "question_id": 48195453, "link": "https://stackoverflow.com/questions/48195453/python-run-thread-with-low-cpu-usage", "title": "Python - Run _thread with low CPU usage", "body": "<p>I have recently finally was able to run multiprocessing with _thread and I really thought it was the perfect script as I wanted but of course, it was not.  </p>\n\n<p><strong>The issue:</strong> The issue is that it takes a lot of CPU usage when I run threads of 10. Which means I can't run concurrently a lot of tasks. (Race condition?)</p>\n\n<p><strong>What I want</strong></p>\n\n<p>Basically what I'm looking for the script to run the thread without using a lot of CPU usage: <a href=\"https://i.imgur.com/pZHDtYL.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/pZHDtYL.png</a> - to run all the threads concurrently (at the same time as the picture) without taking a lot of CPU usage - If I do 10000 maybe it should kill my CPU but running etc 10 threads shouldn't take that much!</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def text():\n    text = \"\"\"\n\n   Hello stack!\n\n      \"\"\"\n\n    print(text)\n    sys.exit()\n\n\ndef Checker(thread):\n    global prod\n    prod = int(thread) + 1\n    _thread.start_new_thread(text, ())\n    print('Profile-{} starting thread...'.format(prod))\n    text()\n\n\ndef main():\n\n    while True:\n        try:\n            accounts_num = int(input(Fore.WHITE + 'How many text do you wanna run? [NUMBERS] \\n' + Fore.RESET))\n        except ValueError:\n            print(Fore.RED + \"Stop being stupid\" + Fore.RESET)\n            continue\n        else:\n            jobs = []\n\n            for i in range(0, accounts_num):\n                p = multiprocessing.Process(target=Checker, args=(str(i),))\n                jobs.append(p)\n                time.sleep(.5)\n                p.start()\n\n            for p in jobs:\n                p.join()\n\n            sys.exit()\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>The issue is sitting at <code>_thread.start_new_thread(text, ())</code> where when this starts, It starts to eat up the CPU.   </p>\n"}, {"tags": ["python", "image-recognition", "grayscale", "cv2", "image-editing"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 9143040, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208141052243508/picture?type=large", "display_name": "Drew Wilkins", "link": "https://stackoverflow.com/users/9143040/drew-wilkins"}, "is_accepted": true, "score": 0, "last_activity_date": 1515634650, "creation_date": 1515634650, "answer_id": 48198650, "question_id": 48195442, "link": "https://stackoverflow.com/questions/48195442/editing-out-part-of-an-image-in-python/48198650#48198650", "title": "Editing out part of an image in python", "body": "<p>Well I figured out a solution before anyone replied, so here's what I came up with.  I was on the right track by replacing each pixel with the median, but I instead utilized some numpy array magic and iterated over just the rows instead of the rows and columns.  I also applied the method to the color image in BGR instead of black and white:</p>\n\n<pre><code>def remove_ship(colorImage):\n\n    imageHeight, imageWidth, channel= colorImage.shape\n    bkgd= colorImage\n    highFactor= 1.05\n    lowFactor= .95\n    for row in range(0, imageHeight):\n        bRow= np.array(bkgd[row, :, 0])\n        gRow= np.array(bkgd[row, :, 1])\n        rRow= np.array(bkgd[row, :, 2])\n        noBlack= np.where(bRow != 0) # exclude the 0's in the array to find the true median.\n        black= np.where(bRow == 0)   # collect the indices of the blacks to recolor them black later\n        bMedian= np.median(bRow[noBlack])\n        bReplace= np.where(bRow &gt; int(highFactor * bMedian))\n        bReplace= np.append(bReplace, [np.where(bRow &lt; int(lowFactor * bMedian))])\n        bRow[bReplace]= bMedian\n        bRow[black]= 0 \n        bkgd[row, :, 0]= bRow\n\n        gMedian= np.median(gRow[noBlack])\n        gReplace= np.where(gRow &gt; int(highFactor * gMedian))\n        gReplace= np.append(gReplace, [np.where(gRow &lt; int(lowFactor * gMedian))])\n        gRow[gReplace]= gMedian\n        gRow[black]= 0\n        bkgd[row, :, 1]= gRow\n\n        rMedian= np.median(rRow[noBlack])\n        rReplace= np.where(rRow &gt; int(highFactor * rMedian))\n        rReplace= np.append(rReplace, [np.where(rRow &lt; int(lowFactor * rMedian))])\n        rRow[rReplace]= rMedian\n        rRow[black]= 0\n        bkgd[row, :, 2]= rRow\n</code></pre>\n\n<p>If anyone has a better, more efficient, or elegant solution, I'd still love to be educated.</p>\n"}], "owner": {"reputation": 55, "user_id": 9143040, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208141052243508/picture?type=large", "display_name": "Drew Wilkins", "link": "https://stackoverflow.com/users/9143040/drew-wilkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 48198650, "answer_count": 1, "score": 0, "last_activity_date": 1515634650, "creation_date": 1515615656, "question_id": 48195442, "link": "https://stackoverflow.com/questions/48195442/editing-out-part-of-an-image-in-python", "title": "Editing out part of an image in python", "body": "<p>I have a collection of images featuring ships on or near the horizon in open ocean.  I am trying to create an image that removes the ship(s) from the image while leaving most of the background intact.  My initial attempt was to scan each row and column of the blurred image in black and white and replace the value in it with the median of the row if the value exceeds a certain threshold:</p>\n\n<pre><code>colorImage= cv2.imread(path,1)  # where path is the directory to my image\ngray = cv2.cvtColor(colorImage, cv2.COLOR_BGR2GRAY)\ngray= cv2.GaussianBlur(gray, (21,21), 0)\nbkgd= gray\nimageHeight, imageWidth= bkgd.shape\n\nfor row in range(0, imageHeight):\n    for column in range(0, imageWidth):\n        if bkgd[row, column] &gt; 100:\n            bkgd[row, column]= int(np.median(bkgd[row]))\n</code></pre>\n\n<p>100 is an arbitrary value that I chose that closely resembles the minimum value the sky would be in a blurred b/w image, thus leaving all the noise from the ocean intact (desired for comparing the original with the ship to the one without).  This process slow and produces erratic results when there is noise from clouds in the sky.  Is there a better method available in cv2 or some other library to accomplish what I'm trying to produce?</p>\n"}, {"tags": ["python", "windows", "cmd", "anaconda", "conda"], "answers": [{"comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1515683919, "post_id": 48195423, "comment_id": 83401746, "body": "Whether you need to run as an administrator depends on whether you installed for all users or only for your user. In the latter case, you do not need to run Anaconda prompt as an administrator to install/update packages (and, in fact, you <b>should not</b> run as an administrator in that case because it will mess up the file permissions)"}], "tags": [], "owner": {"reputation": 458, "user_id": 4918319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e58ac7eed99205689f05302387ce383?s=128&d=identicon&r=PG", "display_name": "Post169", "link": "https://stackoverflow.com/users/4918319/post169"}, "is_accepted": true, "score": 1, "last_activity_date": 1515700539, "last_edit_date": 1515700539, "creation_date": 1515615547, "answer_id": 48195423, "question_id": 48195422, "link": "https://stackoverflow.com/questions/48195422/errors-with-conda-commands-on-windows-10/48195423#48195423", "title": "Errors with conda commands on Windows 10", "body": "<p>First thing, you're right that those commands are not intended for the IPython console. Second, there is a good reason they are not working in the cmd.exe Command Prompt.</p>\n\n<p>They are actually intended to be given to the Anaconda Prompt. On Windows, start typing \"Anaconda Prompt\" and, if you have Anaconda correctly installed, you should see an icon very similar to that of cmd.exe, except the \"C:_\" on the black background will be grey instead of white. That is where these commands are to be given.</p>\n\n<p>If you are not sure which user/users Anaconda was installed for, it may take some extra time. If it was installed for all, or you're not sure, then you should go ahead and left-click the icon. If it was installed for you, everything should go fine, at least as far as permissions go.</p>\n\n<p>If it was not installed for you, then it will at first seem to be obeying you when you command it to modify the software. It will fetch the metadata, tell you that these things will be installed or updated, and then ask you <code>Proceed ([y]/n)?</code> And <em>then</em>, after you type in <code>y</code> and hit Enter, it will tell you <code>CondaIOError: IO error: Missing write permissions in: C:\\Program Files\\Anaconda3</code>. <em>Now</em> you know, you need to open the Anaconda Prompt by right-clicking the icon and clicking \"Run as administrator\". <em>Then</em> you can type in your <code>conda install</code>... or <code>conda update</code>... command and see it carried out.\n (This might only be possible if your Windows account is an administrator account; if that is true and you're not an administrator, you'll probably need to ask someone who has an administrator account for help.)</p>\n\n<p><em>Credit to users on <a href=\"https://groups.google.com/a/continuum.io/forum/#!topic/conda/GPXzqgANcaI\" rel=\"nofollow noreferrer\" title=\"Google Groups\">Google Groups</a> for showing this solution.</em></p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5654431, "user_type": "registered", "profile_image": "https://graph.facebook.com/942428762491821/picture?type=large", "display_name": "Ankur Kumar", "link": "https://stackoverflow.com/users/5654431/ankur-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1558293252, "creation_date": 1558293252, "answer_id": 56211183, "question_id": 48195422, "link": "https://stackoverflow.com/questions/48195422/errors-with-conda-commands-on-windows-10/56211183#56211183", "title": "Errors with conda commands on Windows 10", "body": "<p>Just Run Command Prompt with Admin permission then it will install desired package and will work perfectly</p>\n"}], "owner": {"reputation": 458, "user_id": 4918319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e58ac7eed99205689f05302387ce383?s=128&d=identicon&r=PG", "display_name": "Post169", "link": "https://stackoverflow.com/users/4918319/post169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "accepted_answer_id": 48195423, "answer_count": 2, "score": 0, "last_activity_date": 1558293252, "creation_date": 1515615547, "question_id": 48195422, "link": "https://stackoverflow.com/questions/48195422/errors-with-conda-commands-on-windows-10", "title": "Errors with conda commands on Windows 10", "body": "<p>I'm getting started on Python 2.7, using the Anaconda package and its Spyder IDE, but when I find out that something I want to do requires that I execute a command that starts with the word \"conda\", I have terrible trouble.</p>\n\n<p>I first assumed that those were commands to type in the IPython console in Spyder, but instead of executing what I commanded, it told me <code>NameError: name 'conda' is not defined</code>.</p>\n\n<p>I also tried the Windows Command Prompt (cmd.exe), but it told me <code>conda is not recognized as an internal or external command</code>. Some results when I googled that claimed that I had to add one of the Anaconda-related folders to Windows' Path, so I tried that, but still no good.</p>\n\n<p>How can I carry out <code>conda</code> commands on Windows 10?</p>\n"}, {"tags": ["python", "numpy", "keras"], "answers": [{"comments": [{"owner": {"reputation": 3994, "user_id": 622097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7VG7S.png?s=128&g=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/622097/arnold"}, "edited": false, "score": 0, "creation_date": 1515620643, "post_id": 48195941, "comment_id": 83374175, "body": "Thank you! I noticed that when I feed a train generator into the model my GPU is not 100% utilized, that&#39;s why I want to experiment with in-memory augmentation. I will try to use the save_to_dir for inspection."}], "tags": [], "owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1515617788, "creation_date": 1515617788, "answer_id": 48195941, "question_id": 48195376, "link": "https://stackoverflow.com/questions/48195376/how-to-augment-data-in-memory/48195941#48195941", "title": "How to augment data in-memory?", "body": "<p>Your code should work. But note that you do not need to manually assemble the dataset as you're doing in the for-loop. <code>flow()</code> will simply yield batches indefinitely (i. e. until your <code>model.train_generator()</code> stops).</p>\n\n<p>You can check the generated samples by saving them in files. Simply use the following parameter to <code>flow()</code>:  </p>\n\n<blockquote>\n  <p><strong>save_to_dir:</strong> None or str (default: None). This allows you to optimally\n  specify a directory to which to save the augmented pictures being\n  generated (useful for visualizing what you are doing).</p>\n</blockquote>\n"}], "owner": {"reputation": 3994, "user_id": 622097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7VG7S.png?s=128&g=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/622097/arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1515623608, "creation_date": 1515615336, "last_edit_date": 1515623608, "question_id": 48195376, "link": "https://stackoverflow.com/questions/48195376/how-to-augment-data-in-memory", "title": "How to augment data in-memory?", "body": "<p>I try to understand Keras data generators for augmenting the data. What I want is an in-memory augmentation of the data. Inspired by <a href=\"https://stackoverflow.com/questions/45612884/saving-keras-augmented-data-as-a-numpy-array\">this answer</a> I tried some code myself and came up with this:</p>\n\n<pre><code>datagen = ImageDataGenerator(\n    rotation_range=40,\n    width_shift_range=0.2,\n    height_shift_range=0.2,\n    shear_range=0.2,\n    zoom_range=0.2,\n    horizontal_flip=True,)\n\nX_data = [X_train]\ny_data = [y_train]\nextra_factor = 3\nbatch_size = X_train.shape[0]\nfor i in range (extra_factor):\n    for X_batch, y_batch in datagen.flow(X_train, y_train, \n                                         batch_size=batch_size, shuffle=True,\n                                         seed=41\n                                        ):\n        X_data.append(X_batch)\n        y_data.append(y_batch)\n        break\n\nX_data = np.concatenate(X_data)\ny_data = np.concatenate(y_data)\nprint ('X_data.shape =', X_data.shape, 'type =', X_data.dtype)\nprint ('X_data.shape =', y_data.shape, 'type =', y_data.dtype)\n</code></pre>\n\n<p>In order to ensure that in any case the original data is in the training set I initialized the data list with the original data, but maybe this is superfluous. Does this code yield an array with really different data? I have no way of checking this, except that I see that the shape is increased as might be expected.</p>\n"}, {"tags": ["python", "database", "search", "sqlite"], "comments": [{"owner": {"reputation": 186087, "user_id": 575376, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/LnDUq.gif?s=128&g=1", "display_name": "juergen d", "link": "https://stackoverflow.com/users/575376/juergen-d"}, "edited": false, "score": 1, "creation_date": 1515615425, "post_id": 48195361, "comment_id": 83371639, "body": "Remove the <code>%</code>."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1515615645, "post_id": 48195361, "comment_id": 83371743, "body": "Why not just index the column based on username? Faster lookups and prevents duplication? <a href=\"http://www.sqlitetutorial.net/sqlite-index/\" rel=\"nofollow noreferrer\">sqlitetutorial.net/sqlite-index</a>"}, {"owner": {"reputation": 3909, "user_id": 50003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6703354d2d48c2e605bbe68ab1ff65ff?s=128&d=identicon&r=PG", "display_name": "Gnudiff", "link": "https://stackoverflow.com/users/50003/gnudiff"}, "edited": false, "score": 0, "creation_date": 1515616431, "post_id": 48195361, "comment_id": 83372166, "body": "By using %username% check you are preventing anyone using a username which is part of existing username. Ie if I have registered user &quot;Tomas123&quot; you can&#39;t anymore register user &quot;Tom&quot;. Also you should compare uppercased both usernames to avoid registering &quot;tom&quot;, &quot;ToM&quot; etc if &quot;Tom&quot; already exists"}], "answers": [{"comments": [{"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 3, "user_id": 9161453, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r9JGr6lDTwQ/AAAAAAAAAAI/AAAAAAAAAEg/GOxeNESDkrY/photo.jpg?sz=128", "display_name": "Victoria Worthington", "link": "https://stackoverflow.com/users/9161453/victoria-worthington"}, "edited": false, "score": 0, "creation_date": 1515616751, "post_id": 48195539, "comment_id": 83372313, "body": "@VictoriaWorthington glad to help!"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 0, "last_activity_date": 1515616496, "last_edit_date": 1515616496, "creation_date": 1515616086, "answer_id": 48195539, "question_id": 48195361, "link": "https://stackoverflow.com/questions/48195361/searching-for-string-in-sqlite-database/48195539#48195539", "title": "Searching for string in sqlite database", "body": "<p>Remove each <code>'%'</code> and the <code>()</code>s from the parameter specification. Instead of <code>'%'</code>, provide a tuple:</p>\n\n<pre><code>def NameInUse(Username):\n   data = list(sqlite3.connect('tablename.db').cursor().execute('SELECT * FROM Users WHERE UserId = ?', (username,)))\n   return bool(data)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9161453, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r9JGr6lDTwQ/AAAAAAAAAAI/AAAAAAAAAEg/GOxeNESDkrY/photo.jpg?sz=128", "display_name": "Victoria Worthington", "link": "https://stackoverflow.com/users/9161453/victoria-worthington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 48195539, "answer_count": 1, "score": 0, "last_activity_date": 1522666387, "creation_date": 1515615257, "last_edit_date": 1522666387, "question_id": 48195361, "link": "https://stackoverflow.com/questions/48195361/searching-for-string-in-sqlite-database", "title": "Searching for string in sqlite database", "body": "<p>I am currently making a login system for a project I am doing. I want to have Username as a unique identifier and I want to query the table to make sure it isn't already in use. When I print <code>IdExists</code> it returns 'none' even when the username is already in use. Any way for me to query the database and then get a true/false or something that tells me if the username exists? Thank you.</p>\n\n<pre><code>def NameInUse(Username):\ncursor.execute('SELECT * FROM Users WHERE UserID =(?)',('%'+Username+'%',))\nIdExists=cursor.fetchone()\nif IdExists==True:\n    LoginScrn.addLabel('Error','Username already in use')\n    return True\nelse\n    return False   \n</code></pre>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 2, "creation_date": 1515615292, "post_id": 48195350, "comment_id": 83371562, "body": "What is your desired output?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1515615808, "post_id": 48195350, "comment_id": 83371846, "body": "your code currently removes elements from a list while iterating on it. Don&#39;t do that."}, {"owner": {"reputation": 3, "user_id": 9074345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1VZU.jpg?s=128&g=1", "display_name": "ddickenson", "link": "https://stackoverflow.com/users/9074345/ddickenson"}, "edited": false, "score": 0, "creation_date": 1515617527, "post_id": 48195350, "comment_id": 83372702, "body": "Jean-Francois, Why is that?  The idea is that I want to verify that each element in the list is a full 8 pieces of data.  Then any element that is not (should only be the last one) gets popped.  That bit of code is in a much larger loop that builds many of these lists and appends them to a single large list at the end.  The whole thing is ugly, it&#39;s CLI scraping so it won&#39;t be able to be pretty but I&#39;m interested in &quot;better ways&quot; to accomplish it.  right now that code is working though."}, {"owner": {"reputation": 3, "user_id": 9074345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1VZU.jpg?s=128&g=1", "display_name": "ddickenson", "link": "https://stackoverflow.com/users/9074345/ddickenson"}, "edited": false, "score": 0, "creation_date": 1515617810, "post_id": 48195350, "comment_id": 83372841, "body": "Ajax1234:  added desired output above"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1515619369, "post_id": 48195350, "comment_id": 83373589, "body": "@ddickenson because it is a common source of bugs unless you know exactly what you are doing."}, {"owner": {"reputation": 3, "user_id": 9074345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1VZU.jpg?s=128&g=1", "display_name": "ddickenson", "link": "https://stackoverflow.com/users/9074345/ddickenson"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515621568, "post_id": 48195350, "comment_id": 83374602, "body": "@juanpa.arrivillaga Any suggestion as to best practices to accomplish the same thing?  Would it be something like:  Store the len() of each element in another list and use that to choose the elements to pop AFTER the loop is finished or something?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1515621609, "post_id": 48195350, "comment_id": 83374617, "body": "@ddickenson I don&#39;t know what you are doing, but generally, you create a new list."}], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1515618101, "creation_date": 1515618101, "answer_id": 48196007, "question_id": 48195350, "link": "https://stackoverflow.com/questions/48195350/append-data-to-the-beginning-of-each-entry-in-a-2d-list/48196007#48196007", "title": "Append data to the beginning of each entry in a 2d list", "body": "<p>You can try this:</p>\n\n<pre><code>l1 = ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0', '20', '0:00', '', '1', '0', '0', '0', '0', '0', '1']\nl2 = [(0, ['Check In', '', '1607-584-4547', 'Avail', '10:48', '3', '1', '1']), (1, ['Check In', '', '1607-584-4514', 'Avail', '10:49', '2', '1', '12']), (2, ['Check Out', '', '1607-584-4580', 'Avail', '10:46', '2', '0', '3']), (3, ['Check Out', '', '1607-115-4068', 'AUX', '10:49', '0', '0', '8'])]\nfinal_list = [(a, l1[:4]+b) for a, b in l2]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[(0, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0', 'Check In', '', '1607-584-4547', 'Avail', '10:48', '3', '1', '1']), \n(1, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0', 'Check In', '', '1607-584-4514', 'Avail', '10:49', '2', '1', '12']), \n(2, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0', 'Check Out', '', '1607-584-4580', 'Avail', '10:46', '2', '0', '3']), \n(3, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0', 'Check Out', '', '1607-115-4068', 'AUX', '10:49', '0', '0', '8'])]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9074345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1VZU.jpg?s=128&g=1", "display_name": "ddickenson", "link": "https://stackoverflow.com/users/9074345/ddickenson"}, "edited": false, "score": 0, "creation_date": 1515622358, "post_id": 48196324, "comment_id": 83374911, "body": "This seems to have added an extra layer in there.  Rather than just adding the values it now gives as an example of the first record:   (0, (0, [&#39;284&#39;, &#39;17:15 WED JAN 10 2018&#39;, &#39;LourdesUrologyA&#39;, &#39;0&#39;, &#39;Ashleigh Nelson&#39;, &#39;&#39;, &#39;1607-101-2904&#39;, &#39;AUX&#39;, &#39;16:21&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;]))  It looks like it&#39;s become a 3d array now"}, {"owner": {"reputation": 3, "user_id": 968131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fef7750936f0d8142acd95d2b9d216?s=128&d=identicon&r=PG", "display_name": "pedrormjunior", "link": "https://stackoverflow.com/users/968131/pedrormjunior"}, "reply_to_user": {"reputation": 3, "user_id": 9074345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1VZU.jpg?s=128&g=1", "display_name": "ddickenson", "link": "https://stackoverflow.com/users/9074345/ddickenson"}, "edited": false, "score": 0, "creation_date": 1515623017, "post_id": 48196324, "comment_id": 83375180, "body": "It should not happen, check if you are making it correctly."}], "tags": [], "owner": {"reputation": 3, "user_id": 968131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fef7750936f0d8142acd95d2b9d216?s=128&d=identicon&r=PG", "display_name": "pedrormjunior", "link": "https://stackoverflow.com/users/968131/pedrormjunior"}, "is_accepted": false, "score": 0, "last_activity_date": 1515619560, "creation_date": 1515619560, "answer_id": 48196324, "question_id": 48195350, "link": "https://stackoverflow.com/questions/48195350/append-data-to-the-beginning-of-each-entry-in-a-2d-list/48196324#48196324", "title": "Append data to the beginning of each entry in a 2d list", "body": "<p>Supposing your second list is</p>\n\n<pre><code>agentdata1 = [\n    (0, ['Check In', '', '1607-584-4547', 'Avail', '10:48', '3', '1', '1']),\n    (1, ['Check In', '', '1607-584-4514', 'Avail', '10:49', '2', '1', '12']),\n    (2, ['Check Out', '', '1607-584-4580', 'Avail', '10:46', '2', '0', '3']),\n    (3, ['Check Out', '', '1607-115-4068', 'AUX', '10:49', '0', '0', '8'])\n]\n</code></pre>\n\n<p>And your first list is</p>\n\n<pre><code>list1 = ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0',\n         '20', '0:00', '', '1', '0', '0', '0', '0', '0', '1']\n</code></pre>\n\n<p>First we separate the first four elements of list 1:</p>\n\n<pre><code>four_elements_list1 = list1[:4]\n</code></pre>\n\n<p>Now, there are two possible approaches:</p>\n\n<ol>\n<li><p>The more intuitive is:</p>\n\n<pre><code>result = []\nfor element, value in agentdata1:\n    result.append((element, four_elements_list1 + value))\n</code></pre></li>\n<li><p>The more compact is:</p>\n\n<pre><code>result = map(lambda (element, value): (element, four_elements_list1 + value), agentdata1)\n</code></pre>\n\n<p>You can find more information about <a href=\"https://docs.python.org/2/reference/expressions.html#lambda\" rel=\"nofollow noreferrer\">lambda functions</a> to understand it better.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 0, "last_activity_date": 1515619680, "creation_date": 1515619680, "answer_id": 48196356, "question_id": 48195350, "link": "https://stackoverflow.com/questions/48195350/append-data-to-the-beginning-of-each-entry-in-a-2d-list/48196356#48196356", "title": "Append data to the beginning of each entry in a 2d list", "body": "<p>If you want to modify the list in-place, just use list-slicing. First, set up the data:</p>\n\n<pre><code>l2 = [(0, ['Check In', '', '1607-584-4547', 'Avail', '10:48', '3', '1', '1']),\n      (1, ['Check In', '', '1607-584-4514', 'Avail', '10:49', '2', '1', '12']),\n      (2, ['Check Out', '', '1607-584-4580', 'Avail', '10:46', '2', '0', '3']),\n      (3, ['Check Out', '', '1607-115-4068', 'AUX', '10:49', '0', '0', '8'])]\n\nl1 = ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0', '20', '0:00', '', '1', '0', '0', '0', '0', '0', '1']\n</code></pre>\n\n<p>And now, a simple for-loop:</p>\n\n<hr>\n\n<pre><code>for _, sub in l2:\n    sub[:0] = l1[:4]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9074345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1VZU.jpg?s=128&g=1", "display_name": "ddickenson", "link": "https://stackoverflow.com/users/9074345/ddickenson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 48196356, "answer_count": 3, "score": 0, "last_activity_date": 1515619680, "creation_date": 1515615223, "last_edit_date": 1515618013, "question_id": 48195350, "link": "https://stackoverflow.com/questions/48195350/append-data-to-the-beginning-of-each-entry-in-a-2d-list", "title": "Append data to the beginning of each entry in a 2d list", "body": "<p>I've got two lists.  One is a normal list the other is a 2d list.  I need to take 4 entries from list 1 and add them (preferably in a certain order like pushing them) to the front of each entry on the second 2d list.</p>\n\n<p>I need the first four pieces of list one below</p>\n\n<pre><code>['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0', '20', '0:00', '', '1', '0', '0', '0', '0', '0', '1']\n</code></pre>\n\n<p>added to each \"values\" entry in list two...</p>\n\n<pre><code>(0, ['Check In', '', '1607-584-4547', 'Avail', '10:48', '3', '1', '1'])\n(1, ['Check In', '', '1607-584-4514', 'Avail', '10:49', '2', '1', '12'])\n(2, ['Check Out', '', '1607-584-4580', 'Avail', '10:46', '2', '0', '3'])\n(3, ['Check Out', '', '1607-115-4068', 'AUX', '10:49', '0', '0', '8'])\n</code></pre>\n\n<p>I'm already iterating through list 2 in order to shave off a few tabs that cause 1-4 element groups after the end of the \"real data\" like this:</p>\n\n<pre><code>    for element, value in enumerate(agentdata1):\n        if len(value) != 8:\n            agentdata1.pop(element) \n</code></pre>\n\n<p>My thought was that still inside the for loop but outside the if statement I could \"push\" these values onto the list.  I've messed around with list.insert and list.append but haven't had any joy yet.  Thanks in advance.</p>\n\n<p>The desired output is below:</p>\n\n<pre><code>(0, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0','Check In', '', '1607-584-4547', 'Avail', '10:48', '3', '1', '1'])\n(1, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0','Check In', '', '1607-584-4514', 'Avail', '10:49', '2', '1', '12'])\n(2, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0','Check Out', '', '1607-584-4580', 'Avail', '10:46', '2', '0', '3'])\n(3, ['15', '15:09 WED JAN 10 2018', 'Endcrinology', '0','Check Out', '', '1607-115-4068', 'AUX', '10:49', '0', '0', '8'])\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1515616834, "post_id": 48195294, "comment_id": 83372350, "body": "My understanding is yes, they are copied to each node. Unfortunately, I cannot provide any documentation to back this up. I will add that you don&#39;t <i>have</i> to zip the files, you can also specify <code>.py</code> files (I believe comma separated, but it could be space) in the <code>--py-files</code> argument."}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1515624319, "post_id": 48195294, "comment_id": 83375680, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/24686474/6910411\">shipping python modules in pyspark to other nodes?</a>"}], "owner": {"reputation": 1637, "user_id": 3724464, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/TwFbe.jpg?s=128&g=1", "display_name": "timbram", "link": "https://stackoverflow.com/users/3724464/timbram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515614946, "creation_date": 1515614946, "question_id": 48195294, "link": "https://stackoverflow.com/questions/48195294/does-spark-submit-send-zipped-python-scripts-to-all-nodes-in-the-cluster", "title": "Does spark-submit send zipped python scripts to all nodes in the cluster?", "body": "<p>I am confused about the behavior of spark-submit and the online docs are not leading me to the answer.  Say I have a Python driver program that depends on some additional modules I have written. In order to work I have to zip those modules up and include the zipped file with my spark-submit command.  Do those modules get distributed to each node in the cluster?  </p>\n"}, {"tags": ["python", "conv-neural-network", "mxnet"], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 8304617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db78156e2ab78d13e802c09c8fc23e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Yatong", "link": "https://stackoverflow.com/users/8304617/yatong"}, "is_accepted": false, "score": 1, "last_activity_date": 1515648781, "creation_date": 1515648781, "answer_id": 48200350, "question_id": 48195293, "link": "https://stackoverflow.com/questions/48195293/error-in-loading-cnn-model-for-text-classification-prediction/48200350#48200350", "title": "Error in loading CNN model for text classification prediction", "body": "<p>For data_shapes it should be:</p>\n\n<pre><code>data_shapes=[('data', (50,56))]\n</code></pre>\n\n<p>with 50 being batch_size and 56 being sentence_size / sequence_length. </p>\n"}], "owner": {"reputation": 95, "user_id": 8304617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db78156e2ab78d13e802c09c8fc23e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Yatong", "link": "https://stackoverflow.com/users/8304617/yatong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515648781, "creation_date": 1515614944, "last_edit_date": 1515615300, "question_id": 48195293, "link": "https://stackoverflow.com/questions/48195293/error-in-loading-cnn-model-for-text-classification-prediction", "title": "Error in loading CNN model for text classification prediction", "body": "<p>I am very new to Convolutional Neural Network and I basically followed this example: <a href=\"https://mxnet.incubator.apache.org/tutorials/nlp/cnn.html?highlight=convolutional\" rel=\"nofollow noreferrer\">https://mxnet.incubator.apache.org/tutorials/nlp/cnn.html?highlight=convolutional</a> in training my data. </p>\n\n<p>Now I run and had the .params and .json file, I was trying to load the model using this code: </p>\n\n<pre><code>sym, arg_params, aux_params = mx.model.load_checkpoint('cnn', 9)\nmod = mx.mod.Module(symbol=sym, context=mx.cpu(), label_names=None)\nmod.bind(for_training=False, data_shapes=[('data', (1,51))], \n         label_shapes=mod._label_shapes)\nmod.set_params(arg_params, aux_params, allow_missing=True)\n</code></pre>\n\n<p>but it always shows an error like this: </p>\n\n<blockquote>\n  <p>MXNetError: Error in operator reshape4: [11:59:49]\n  src/operator/tensor/./matrix_op-inl.h:182: Check failed: oshape.Size()\n  == dshape.Size() Target shape size is different to source. Target: 255000 Source: 2550</p>\n</blockquote>\n\n<p>I am not sure which part did I do wrong.</p>\n"}, {"tags": ["python", "numpy", "scipy"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "is_accepted": false, "score": 0, "last_activity_date": 1515624498, "creation_date": 1515624498, "answer_id": 48197348, "question_id": 48195277, "link": "https://stackoverflow.com/questions/48195277/writing-lognormal-function-in-python/48197348#48197348", "title": "Writing lognormal function in python", "body": "<p>Indeed, <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.lognorm.html\" rel=\"nofollow noreferrer\">SciPy documentation says</a></p>\n\n<blockquote>\n  <p>A common parametrization for a lognormal random variable Y is in terms of the mean, mu, and standard deviation, sigma, of the unique normally distributed random variable X such that exp(X) = Y. This parametrization corresponds to setting s = sigma and scale = exp(mu).</p>\n</blockquote>\n\n<p>So let's set it as such: </p>\n\n<pre><code>def lognorm1(x, mu, sigma):\n    ANS = sp.lognorm(s=sigma, scale=exp(mu)).ppf(x)\n    return ANS\n\ncurve_fit(lognorm1, x, y)\n</code></pre>\n\n<p>Now the parameters returned by <code>curve_fit</code> have the meaning of the mean and standard deviation of the underlying normal distribution.</p>\n"}], "owner": {"reputation": 576, "user_id": 4504877, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b559095215902fb25dd589bfa6f3f76f?s=128&d=identicon&r=PG&f=1", "display_name": "user33484", "link": "https://stackoverflow.com/users/4504877/user33484"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515624498, "creation_date": 1515614904, "last_edit_date": 1515615325, "question_id": 48195277, "link": "https://stackoverflow.com/questions/48195277/writing-lognormal-function-in-python", "title": "Writing lognormal function in python", "body": "<p>I'm trying to write an inverse lognormal function in python:</p>\n\n<pre><code>import numpy as np\nimport scipy.stats as sp\nfrom scipy.optimize import curve_fit\n\ndef lognorm1(x,s,scale):\n    ANS = sp.lognorm(s,scale=scale).ppf(x)\n    return ANS\n\ncurve_fit(lognorm1,x,y)\n</code></pre>\n\n<p>I have no troubles fitting the curve, however the scale paramater is the exponential of what LOGNORM.INV function is on excel. I know I can just log the scale parameter at the end, but is there anyway to rewrite the function so that I don't have to do this everytime?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1515615008, "post_id": 48195276, "comment_id": 83371418, "body": "don&#39;t use regexes to parse XML/HTML. use a proper parser like <code>lxml</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1515615055, "post_id": 48195276, "comment_id": 83371444, "body": "note that you could post-process your result with <code>strip</code>"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 5, "creation_date": 1515615099, "post_id": 48195276, "comment_id": 83371470, "body": "<a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">H\u0368\u034a\u033d\u0305\u033e\u030e\u0321\u0338\u032a\u032fE\u033e\u035b\u036a\u0344\u0300\u0301\u0327\u0358\u032c\u0329 \u0367\u033e\u036c\u0327\u0336\u0328\u0331\u0339\u032d\u032fC\u036d\u030f\u0365\u036e\u035f\u0337\u0319\u0332\u031d\u0356O\u036e\u034f\u032e\u032a\u031d\u034dM\u034a\u0312\u031a\u036a\u0369\u036c\u031a\u035c\u0332\u0316E\u0311\u0369\u034c\u035d\u0334\u031f\u031f\u0359\u031eS\u036f\u033f\u0314\u0328\u0340\u0325\u0345\u032b\u034e\u032d</a>"}], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 2, "last_activity_date": 1515616096, "creation_date": 1515616096, "answer_id": 48195542, "question_id": 48195276, "link": "https://stackoverflow.com/questions/48195276/query-about-regular-expression/48195542#48195542", "title": "Query about regular expression", "body": "<p>You can use a combination of a parser and a regular expression:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport re\n\nrx = re.compile(r'''\n    ^\n    (?P&lt;country&gt;\\w+)\\s*\n    (?P&lt;player1&gt;.+)[\\n\\r]\n    (?P&lt;player2&gt;.+)''', re.MULTILINE | re.VERBOSE)\n\nsoup = BeautifulSoup(your_string_here, 'lxml')\n\nplayers = [\"{} - {}, {}\".format(m.group('country'), m.group('player1').strip(), m.group('player2').strip()) \n            for item in soup.select('ul &gt; li')\n            for m in rx.finditer(item.text)]\nprint(players)\n</code></pre>\n\n<p>Which yields</p>\n\n<pre><code>['Australia - Steven smith, David Warner', 'Bangladesh - Mashrafe Mortaza, Tamim Iqbal', 'England - Eoin Morgan, Jos Buttler']\n</code></pre>\n"}], "owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1515615778, "accepted_answer_id": 48195542, "answer_count": 1, "score": 1, "last_activity_date": 1515616096, "creation_date": 1515614901, "last_edit_date": 1515615116, "question_id": 48195276, "link": "https://stackoverflow.com/questions/48195276/query-about-regular-expression", "closed_reason": "Needs more focus", "title": "Query about regular expression", "body": "<p>So,I'm given an HTML file which includes some country name and two players from that country. I have to read that html file and show the country and players name in a specific format using regular expression. </p>\n\n<p>The HTML code is given below:</p>\n\n<pre><code>&lt;ul&gt;\n&lt;li&gt;\nAustralia\n    &lt;ol&gt;\n    &lt;li&gt; Steven smith &lt;/li&gt;\n    &lt;li&gt; David Warner &lt;/li&gt;\n    &lt;/ol&gt;\n&lt;/li&gt;\n&lt;li&gt;\nBangladesh\n    &lt;ol&gt;\n    &lt;li&gt; Mashrafe Mortaza &lt;/li&gt;\n    &lt;li&gt; Tamim Iqbal  &lt;/li&gt;\n    &lt;/ol&gt;\n&lt;/li&gt;\n&lt;li&gt;\nEngland\n    &lt;ol&gt;\n    &lt;li&gt; Eoin Morgan &lt;/li&gt;\n    &lt;li&gt; Jos Buttler &lt;/li&gt;\n    &lt;/ol&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>I have to show it in this format:</p>\n\n<pre><code>Australia - Steven Smith, David Warner\nBangladesh - Mashrafe Mortaza, Tamim Iqbal\nEngland - Eoin Morgan, Jos Buttler\n</code></pre>\n\n<p>I've tried something but haven't got so far. This is what I've been able to come up with so far:</p>\n\n<pre><code>&gt;&gt; with open(\"test.html\",\"r\") as f:\n      text = f.read()\n&gt;&gt; import re\n&gt;&gt; pq = re.findall(r'^&lt;li&gt;\\n(.+?)\\n\\t&lt;ol&gt;\\n\\t&lt;li&gt;(.+?)&lt;/li&gt;\\n\\t&lt;li&gt;(.+?)\n               &lt;/li&gt;$',text,re.M)\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<pre><code>[('Australia', ' Steven smith ', ' David Warner '),\n('Bangladesh', ' Mashrafe Mortaza ', ' Tamim Iqbal  '),\n('England', ' Eoin Morgan ', ' Jos Buttler ')]\n</code></pre>\n\n<p>This is not what I wanted. The country names seems to be fine. But the players name contain the tabs. I'm new at regular expression and I'm not entirely sure what to do here. Any help would be appreciated. </p>\n"}, {"tags": ["python", "django", "django-models", "django-forms", "django-views"], "answers": [{"tags": [], "owner": {"reputation": 824, "user_id": 5784892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXvVq.jpg?s=128&g=1", "display_name": "Nick Cuevas", "link": "https://stackoverflow.com/users/5784892/nick-cuevas"}, "is_accepted": false, "score": 0, "last_activity_date": 1593703080, "creation_date": 1593703080, "answer_id": 62699667, "question_id": 48195232, "link": "https://stackoverflow.com/questions/48195232/anonymoususer-error-when-non-admin-users-log-in-django/62699667#62699667", "title": "&quot;AnonymousUser&quot; Error When Non-Admin Users Log In - Django", "body": "<p>Try using the methods that the BaseClass provides. That will prevent you from making unexpected errors.</p>\n<p>You can use super() for that purpose.</p>\n"}], "owner": {"reputation": 143, "user_id": 8978269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10155547887108197/picture?type=large", "display_name": "Will Dpard", "link": "https://stackoverflow.com/users/8978269/will-dpard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1593703080, "creation_date": 1515614684, "question_id": 48195232, "link": "https://stackoverflow.com/questions/48195232/anonymoususer-error-when-non-admin-users-log-in-django", "title": "&quot;AnonymousUser&quot; Error When Non-Admin Users Log In - Django", "body": "<p>When I try to login users registered through my AbstractBaseUser model I get the error: </p>\n\n<p>'AnonymousUser' object has no attribute '_meta'</p>\n\n<p>Which highlights the code:</p>\n\n<p>login(request, user)</p>\n\n<p>However, if the user is an admin there is no problem, leaving me to believe that the problem isn't with the 'login_view', but a problem with how the user is tagged (so to speak) when they are registered with AbstractBaseUser.</p>\n\n<p>Any help would be much appreciated!</p>\n\n<p>Here is my code:</p>\n\n<p>Models.py</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import (\n    AbstractBaseUser, BaseUserManager, PermissionsMixin\n)\n\nclass UserManager(BaseUserManager):\n    def create_user(self, first_name, last_name, email, password=None, is_active=True, is_staff=False, is_admin=False):\n        if not first_name:\n            raise ValueError(\"Users must enter their first name\")\n\n        if not last_name:\n            raise ValueError(\"Users must enter their last name\")\n\n        if not email:\n            raise ValueError(\"Users must enter an email\")\n\n        if not password:\n            raise ValueError(\"Users must enter a password\")\n\n        user_obj = self.model(\n            first_name = first_name,\n            last_name = last_name,\n            email = self.normalize_email(email),\n        )\n        user_obj.set_password(password) #set and change password?\n        user_obj.admin = is_admin\n        user_obj.staff = is_staff\n        user_obj.active = is_active\n        user_obj.save(using=self._db)\n        return user_obj\n\n    def create_superuser(self, first_name, last_name, email, password=None):\n        user = self.create_user(\n            first_name,\n            last_name,\n            email,\n            password=password,\n            is_staff=True,\n            is_admin=True\n        )\n        return user\n\nclass User(AbstractBaseUser, PermissionsMixin):\n    first_name = models.CharField(max_length=255, blank=True, null=True)\n    last_name = models.CharField(max_length=255, blank=True, null=True)\n    email = models.EmailField(max_length=255, unique=True)\n    timestamp = models.DateTimeField(auto_now_add=True, auto_now=False)\n    active = models.BooleanField(default=True) #can login\n    staff = models.BooleanField(default=False) #staff not superuser\n    admin = models.BooleanField(default=False) #superuser\n\n    USERNAME_FIELD = 'email'\n\n    REQUIRED_FIELDS = ['first_name', 'last_name']\n\n    objects = UserManager()\n\n    def __str__(self):\n        return self.email\n\n    def get_first_name(self):\n        return self.email\n\n    def get_last_name(self):\n        return self.email\n\n\n    def get_short_name(self):\n        return self.email\n\n    def has_perm(self, perm, obj=None):\n        return True\n\n    def has_module_perms(self, app_label):\n        return True\n\n    @property\n    def is_staff(self):\n        return self.staff\n\n    @property\n    def is_admin(self):\n        return self.admin\n\n    @property\n    def is_active(self):\n        return self.active\n</code></pre>\n\n<p>Forms.py</p>\n\n<pre><code>from django import forms\nfrom django.contrib.auth import (\n    authenticate,\n    get_user_model,\n    login,\n    logout,\n    )\nfrom django.contrib.auth.forms import ReadOnlyPasswordHashField\nfrom django.contrib.auth.models import User, Group\n\nUser = get_user_model()\n\nclass UserAdminCreationForm(forms.ModelForm):\n    password1 = forms.CharField(label='Password', widget=forms.PasswordInput)\n\n    class Meta:\n        model = User\n        fields = ('first_name', 'last_name', 'email')\n\n    def save(self, commit=True):\n        user = super(UserAdminCreationForm, self).save(commit=False)\n        user.set_password(self.cleaned_data[\"password1\"])\n        if commit:\n            user.save()\n        return user\n\n\nclass UserAdminChangeForm(forms.ModelForm):\n    password = ReadOnlyPasswordHashField()\n\n    class Meta:\n        model = User\n        fields = ('email', 'first_name', 'last_name', 'password', 'admin')\n\n    def clean_password(self):\n        return self.initial[\"password\"]\n\nclass LoginForm(forms.Form):\n    username = forms.CharField(label='Email')\n    password = forms.CharField(widget=forms.PasswordInput)\n</code></pre>\n\n<p>Views.py</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.contrib.auth.models import User, Group\nfrom django.contrib.auth import (\n    authenticate,\n    get_user_model,\n    login,\n    logout,\n    )\nfrom django.shortcuts import redirect\nfrom .forms import UserAdminCreationForm, LoginForm\n\ndef register_view(request):\n\n    form = UserAdminCreationForm(request.POST or None)\n    if form.is_valid():\n        user = form.save(commit=False)\n        password = form.cleaned_data.get('password')\n        user.set_password(password)\n        user.save()\n        user.groups.add(Group.objects.get(name='customers'))\n        login(request, user)\n\n    context = {\n        \"form\": form,\n    }\n\n    return render (request, \"register.html\", context)\n\ndef login_view(request):\n\n    form = LoginForm(request.POST or None)\n    if form.is_valid():\n        username = form.cleaned_data.get(\"username\")\n        password = form.cleaned_data.get(\"password\")\n        user = authenticate(username=username, password=password)\n        login(request, user)\n\n    context = {\n        \"form\": form,\n    }\n\n    return render (request, \"login.html\", context)\n</code></pre>\n"}]