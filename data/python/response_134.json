[{"tags": ["python", "django", "session", "oauth-2.0"], "comments": [{"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501718873, "post_id": 45472767, "comment_id": 77906549, "body": "The main problem is you are comparing 2 session variables to each other, Since after you oauth they are set to the same value, under what circumstance will they not be the same value? (if stored in cookie, what stops a client from just making sure  they give you 2 identical values). Session variables share the same persistence in the same storage. What you need is to store one value that the client will present and another value that persists across sessions on the server to compare."}, {"owner": {"reputation": 69, "user_id": 8304026, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f50314c86393c206668d1945008db670?s=128&d=identicon&r=PG&f=1", "display_name": "John M. Kovachi", "link": "https://stackoverflow.com/users/8304026/john-m-kovachi"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501718995, "post_id": 45472767, "comment_id": 77906577, "body": "Agreed. I will change that. But you do not think there is a problem with storing session variables themselves? That&#39;s the main issue I&#39;m concerned with."}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501719111, "post_id": 45472767, "comment_id": 77906604, "body": "one of the values will <i>have</i> to be a &quot;session variable&quot; otherwise you wouldn&#39;t be able to stay logged in..."}, {"owner": {"reputation": 69, "user_id": 8304026, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f50314c86393c206668d1945008db670?s=128&d=identicon&r=PG&f=1", "display_name": "John M. Kovachi", "link": "https://stackoverflow.com/users/8304026/john-m-kovachi"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501719329, "post_id": 45472767, "comment_id": 77906667, "body": "Couldn&#39;t I pass the token into the response header? Or I thought I could use django&#39;s auth system to avoid messing with session variables"}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501720452, "post_id": 45472767, "comment_id": 77906913, "body": "Sorry, not following, not sure how putting oauth token into response header helps you, since it&#39;s the browser that gets the response...."}, {"owner": {"reputation": 69, "user_id": 8304026, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f50314c86393c206668d1945008db670?s=128&d=identicon&r=PG&f=1", "display_name": "John M. Kovachi", "link": "https://stackoverflow.com/users/8304026/john-m-kovachi"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501723760, "post_id": 45472767, "comment_id": 77907571, "body": "Nevermind, then. Basically, I would just like to know if storing an access token in a session variable is secure."}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501725290, "post_id": 45472767, "comment_id": 77907945, "body": "It would depend on what security you&#39;re looking for. Only risk revolves around sessions stored in cookies when using <code>SESSION_ENGINE = django.contrib.sessions.backends.signed_cookies</code> which are crypto signed that invalidates the cookie variable if not modified by django (but client can read the its oauth token). But for all session backends, session ID is stored in cookie."}], "owner": {"reputation": 69, "user_id": 8304026, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f50314c86393c206668d1945008db670?s=128&d=identicon&r=PG&f=1", "display_name": "John M. Kovachi", "link": "https://stackoverflow.com/users/8304026/john-m-kovachi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 482, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501719221, "creation_date": 1501718345, "last_edit_date": 1501719221, "question_id": 45472767, "link": "https://stackoverflow.com/questions/45472767/are-django-session-variables-secure", "title": "Are django session variables secure?", "body": "<p>I am creating an app for use in our organization that will login users based on their Office 365 credentials using OAuth2.0. I am fetching an access token that I will store in a session variable. Here is an example of what I am doing: </p>\n\n<pre><code>@never_cache\ndef authorization(request):\n    microsoft = OAuth2Session(client_id,scope=scope,redirect_uri=redirect_uri)\n    token = \"\"\n    try:\n        users = 'https://graph.microsoft.com/v1.0/me' ##msgraph query url- \n        ##This query is purelyjust used to \n        ##authenticate user!\n        token = microsoft.fetch_token(token_url,client_secret=client_secret,code=request.GET.get('code', '')) ##Code is the authorization code present\n        ##in request URL\n        header = {'Authorization': 'Bearer ' + token['access_token']}\n        response = requests.get(url = users, headers = header)\n\n        if int(response.status_code) != 200: ##if status code is not 200, then authentication failed. Redirect to login.\n            print ('Not validated. Return to login.')\n            request.session.flush()\n            return redirect('http://localhost:8000/login')\n    except Exception as e:\n        print ('User not does not have authentication rights')\n        request.session.flush()\n        return redirect('http://localhost:8000/login')\n\n    request.session['oauth_state'] = 'authorized'\n    response = HttpResponseRedirect('http://localhost:8000/search')\n    return response\n</code></pre>\n\n<p>I am then using this to check if 'oauth_state' is set to 'authorized'. However, I may change this so that the token is used to query the MS Graph API in each function in order to check if the user has proper permissions or not. Here's an example of what I am doing:</p>\n\n<pre><code>def search(request):\n        try:\n            if (str(request.session['oauth_state']) != 'authorized'):\n                print ('Not authorized')\n                request.session.flush()\n                return redirect('http://localhost:8000/login')\n        except Exception as e:\n            print ('Not authorized')\n            request.session.flush()\n            return redirect('http://localhost:8000/login')\n    &lt;rest of code&gt;\n</code></pre>\n\n<p>How insecure is this? Should I possibly be passing in the token to the response header? Or should I get rid of this method, and use django's standard auth and login system? I really appreciated the benefits of OAuth2.0, but if this method compromises our security, I might scrap it.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1501718126, "post_id": 45472735, "comment_id": 77906365, "body": "Is this Python 2?"}], "owner": {"reputation": 109, "user_id": 8131036, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10212019697160125/picture?type=large", "display_name": "Craig A Gomez", "link": "https://stackoverflow.com/users/8131036/craig-a-gomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1501718089, "answer_count": 0, "score": 1, "last_activity_date": 1501718043, "creation_date": 1501718043, "question_id": 45472735, "link": "https://stackoverflow.com/questions/45472735/simple-input-error", "closed_reason": "Duplicate", "title": "Simple input error", "body": "<p>having a issue with a input error\nJust giving them options of what they wanna input instead of yes or no\ncode:</p>\n\n<pre><code>def getMode():\n    while True:\n        print('do you wish to encrypt or decrypt a message?')\n        mode = input().lower()\n        if mode in [ 'encrypt', 'e', 'decrypt', 'd']:\n            return mode\n         else:\n            print('Enter either \"encrypt or \"e\" or \"decrypt\", \"d\".')\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/gomcrai/pythings/caesarCipher.py\", line 46, in &lt;module&gt;\n    mode = getMode()\n  File \"/Users/gomcrai/pythings/caesarCipher.py\", line 8, in getMode\n    mode = input().lower()\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nNameError: name 'e' is not defined\n</code></pre>\n\n<p>Only thing happening on line 46 is the function is being called</p>\n"}, {"tags": ["python", "python-2.7", "google-maps"], "answers": [{"tags": [], "owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "is_accepted": false, "score": 0, "last_activity_date": 1501740295, "creation_date": 1501740295, "answer_id": 45476066, "question_id": 45472681, "link": "https://stackoverflow.com/questions/45472681/plotting-latitudes-longitudes-in-python/45476066#45476066", "title": "Plotting latitudes / longitudes in Python", "body": "<p>You need widget extensions enabled for your jupyter installation.\nEnable it by running in your terminal:</p>\n\n<pre><code>$ jupyter nbextension enable --py --sys-prefix widgetsnbextension\n</code></pre>\n\n<p>Also, tell jupyter to load the gmaps extension with:</p>\n\n<pre><code>$ jupyter nbextension enable --py --sys-prefix gmaps\n</code></pre>\n\n<h2>Reference:</h2>\n\n<ul>\n<li><a href=\"http://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/Distributing%20Jupyter%20Extensions%20as%20Python%20Packages.html\" rel=\"nofollow noreferrer\">nbextensions</a></li>\n<li><a href=\"http://jupyter-gmaps.readthedocs.io/en/latest/install.html\" rel=\"nofollow noreferrer\">http://jupyter-gmaps.readthedocs.io/en/latest/install.html</a></li>\n</ul>\n"}], "owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1501740295, "creation_date": 1501717722, "question_id": 45472681, "link": "https://stackoverflow.com/questions/45472681/plotting-latitudes-longitudes-in-python", "title": "Plotting latitudes / longitudes in Python", "body": "<p>I want to plot few latitudes / longitudes in the Google maps using python. I tried to use the iPython JuPyter notebook. I have tried the following packages,</p>\n\n<pre><code>import gmaps\nimport gmaps.datasets\nimport gmaps.geojson_geometries\n\ngmaps.configure(api_key=\"API key\")\n\nlocations = gmaps.datasets.load_dataset(\"taxi_rides\")\n\nfig = gmaps.figure()\nfig.add_layer(gmaps.heatmap_layer(locations))\nfig\n</code></pre>\n\n<p>I am getting the following as output</p>\n\n<p><a href=\"https://i.stack.imgur.com/ypGfd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ypGfd.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>if I try the same thing in iPython shell, I get the following</p>\n\n<p><a href=\"https://i.stack.imgur.com/QjVFZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QjVFZ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I am not able to view the images which has been plotted. </p>\n\n<p>I tried other packages such as,</p>\n\n<pre><code>import gmplot\n\ngmap = gmplot.GoogleMapPlotter(37.428, -122.145, 16)\n\ngmap.draw(\"mymap.html\")\n</code></pre>\n\n<p>But didnt get any output from the package. </p>\n\n<p>Can anybody help me in plotting the points in google maps ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1501717361, "post_id": 45472598, "comment_id": 77906185, "body": "Have you tried <code>pip install winrandom</code>?  <a href=\"https://pypi.python.org/pypi/winrandom/1.2\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/winrandom/1.2</a>"}, {"owner": {"reputation": 14571, "user_id": 1669996, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/89e5a1861e6429b8f5d3cc45900b98ae?s=128&d=identicon&r=PG", "display_name": "casillas", "link": "https://stackoverflow.com/users/1669996/casillas"}, "reply_to_user": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1501717611, "post_id": 45472598, "comment_id": 77906230, "body": "@kichik, please see update."}, {"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501718128, "post_id": 45472598, "comment_id": 77906366, "body": "Looks like it may have been resolved, but PyPI is out of date: <a href=\"https://github.com/dlitz/pycrypto/issues/110\" rel=\"nofollow noreferrer\">github.com/dlitz/pycrypto/issues/110</a>"}, {"owner": {"reputation": 14571, "user_id": 1669996, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/89e5a1861e6429b8f5d3cc45900b98ae?s=128&d=identicon&r=PG", "display_name": "casillas", "link": "https://stackoverflow.com/users/1669996/casillas"}, "reply_to_user": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501718264, "post_id": 45472598, "comment_id": 77906405, "body": "@CoryMadden How should I handle to get correct package, sorry I am newbie on python. Thanks a lot already for digging into the issue and bring it up."}, {"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508178969, "post_id": 45472598, "comment_id": 80499430, "body": "@hotspring: I have set bounty on this."}, {"owner": {"reputation": 4589, "user_id": 5612096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51821186ffde540f4d10b86544ca1a7d?s=128&d=identicon&r=PG", "display_name": "Adirio", "link": "https://stackoverflow.com/users/5612096/adirio"}, "edited": false, "score": 0, "creation_date": 1508242100, "post_id": 45472598, "comment_id": 80525752, "body": "@hotspring <code>self.id_version</code> seems not to be defined, so it is returning <code>None</code>. The when you try to compare <code>None &gt;= &quot;2.10.90&quot;</code>, it gives you a <code>TypeError</code> as <code>None</code>&#39;s type (<code>NoneType</code>) doesn&#39;t have a greater or equal than method for <code>str</code>s. The problem probably is that <code>self.id_version</code> should be defined before."}, {"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "reply_to_user": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 1, "creation_date": 1508467025, "post_id": 45472598, "comment_id": 80631006, "body": "@ZeroPiraeus : I got stuck on this and spent some reps on bounty.  What other course of action do I have?  I asked a question and was told this question was an exact duplicate.  Right now, I contemplating not using Python.  Do you want to promote Python or not?  Yours is an unhelpful comment."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 2, "creation_date": 1508534659, "post_id": 45472598, "comment_id": 80662708, "body": "@SMeaden You should keep in mind that Zero&#39;s comment is explaining why the question is poorly formatted and that this is in fact a helpful comment. The idea is to move the screen shot track back error into the the question as readable text rather than a screen shot, as screen shots do not allow for copy paste during the troubleshooting of your problem. No one here wants to type out the track back error when searching up possible issues/answer. The how to ask link is very helpful as it provides a question format that will result in the best kind of replies/answers."}, {"owner": {"reputation": 1731, "user_id": 2780744, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d8gAs.jpg?s=128&g=1", "display_name": "chasmani", "link": "https://stackoverflow.com/users/2780744/chasmani"}, "edited": false, "score": 0, "creation_date": 1508708603, "post_id": 45472598, "comment_id": 80706032, "body": "I cannot see the code, only unloaded images."}, {"owner": {"reputation": 1731, "user_id": 2780744, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d8gAs.jpg?s=128&g=1", "display_name": "chasmani", "link": "https://stackoverflow.com/users/2780744/chasmani"}, "edited": false, "score": 0, "creation_date": 1508708951, "post_id": 45472598, "comment_id": 80706147, "body": "Why are you using a proxy to connect to github?"}], "answers": [{"comments": [{"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508775718, "post_id": 46825854, "comment_id": 80735220, "body": "In my version of <code>nt.py</code> Line actually reads <code>from Crypto.Random.OSRNG import winrandom</code> .  Please advise."}, {"owner": {"reputation": 7592, "user_id": 840582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/R97cw.png?s=128&g=1", "display_name": "Chen A.", "link": "https://stackoverflow.com/users/840582/chen-a"}, "reply_to_user": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508840623, "post_id": 46825854, "comment_id": 80762707, "body": "Do you have <code>winrandom.py</code> in <code>crypto\\Random\\OSRNG</code> ? Try change to according to my answer and see if it helps"}, {"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508861203, "post_id": 46825854, "comment_id": 80777656, "body": "Same again, <code>c:\\Program Files\\Anaconda3\\Lib\\site-package\\Crypto\\Util\\winrandom.py</code> (no other copies of winrandom.py found) also reads <code>from Crypto.Random.OSRNG.winrandom import *</code>"}], "tags": [], "owner": {"reputation": 7592, "user_id": 840582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/R97cw.png?s=128&g=1", "display_name": "Chen A.", "link": "https://stackoverflow.com/users/840582/chen-a"}, "is_accepted": true, "score": 4, "last_activity_date": 1508402801, "last_edit_date": 1508402801, "creation_date": 1508402355, "answer_id": 46825854, "question_id": 45472598, "link": "https://stackoverflow.com/questions/45472598/typeerror-not-supported-between-instances-of-nonetype-and-str/46825854#46825854", "title": "TypeError: &#39;&gt;=&#39; not supported between instances of &#39;NoneType&#39; and &#39;str&#39;", "body": "<p>It seems this is a common issue with pycrypto. This is a bug, but the project doesn't seem to be updated in the last couple years.</p>\n\n<p>Digging over the issue, (<a href=\"https://github.com/andrewcooke/simple-crypt/issues/17\" rel=\"nofollow noreferrer\">https://github.com/andrewcooke/simple-crypt/issues/17</a>)\nIt seems the poblem is solved by doing an edit to the import statement in <code>crypto\\Random\\OSRNG\\nt.py</code>:</p>\n\n<pre><code>import winrandom\n\nto\n\nfrom . import winrandom\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508762259, "post_id": 46852096, "comment_id": 80726253, "body": "I am using VS2017 Community Edition, in the Packages pane I pasted your command but get the following error <code>Collecting git+https:&#47;&#47;github.com&#47;dlitz&#47;pycrypto.git   Cloning https:&#47;&#47;github.com&#47;dlitz&#47;pycrypto.git to c:\\users\\smeaden\\appdata\\local\\temp\\pip-os9_ijcy-build Requirement already satisfied: pip in c:\\program files\\python36\\lib\\site-packages Collecting install   Could not find a version that satisfies the requirement install (from versions: ) No matching distribution found for install</code>"}, {"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508775413, "post_id": 46852096, "comment_id": 80735058, "body": "Sorry, does not work error message <code>----- Installing &#39;pip uninstall pycrypto&#39; ----- Requirement already satisfied: pip in c:\\program files\\python36\\lib\\site-packages Collecting uninstall   Could not find a version that satisfies the requirement uninstall (from versions: ) No matching distribution found for uninstall ----- Failed to install &#39;pip uninstall pycrypto&#39; -----</code>"}, {"owner": {"reputation": 649, "user_id": 6068036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fd50bb5fbc12d1bb7ead7e318f5e1b?s=128&d=identicon&r=PG", "display_name": "AlexM", "link": "https://stackoverflow.com/users/6068036/alexm"}, "reply_to_user": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508780236, "post_id": 46852096, "comment_id": 80737731, "body": "This issue might be coming from trying to install/uninstall from within the VS2017 packages pane. Try running the pip commands from cmd.exe."}, {"owner": {"reputation": 649, "user_id": 6068036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fd50bb5fbc12d1bb7ead7e318f5e1b?s=128&d=identicon&r=PG", "display_name": "AlexM", "link": "https://stackoverflow.com/users/6068036/alexm"}, "reply_to_user": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508855594, "post_id": 46852096, "comment_id": 80773514, "body": "Alternatively, you can use the VS2017 Packages Pane and install from GitHub using &quot;git+<a href=\"https://github.com/dlitz/pycrypto.git\" rel=\"nofollow noreferrer\">github.com/dlitz/pycrypto.git</a>&quot;. That Packages Pane is basically a GUI for &quot;pip install&quot; from the command line. If you get an error, try &quot;git+<a href=\"https://github.com/dlitz/pycrypto.git#egg=pycrypto\" rel=\"nofollow noreferrer\">github.com/dlitz/pycrypto.git#egg=pycrypto</a>&quot;."}, {"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508861297, "post_id": 46852096, "comment_id": 80777728, "body": "Please use single quotes to delimit the command you&#39;re inviting me to run.  It changes the typeface."}, {"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1508862360, "post_id": 46852096, "comment_id": 80778334, "body": "Well we&#39;re going round in circles now, that failed because could not find <code>winrand.c</code> which OP has highlighted."}], "tags": [], "owner": {"reputation": 649, "user_id": 6068036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fd50bb5fbc12d1bb7ead7e318f5e1b?s=128&d=identicon&r=PG", "display_name": "AlexM", "link": "https://stackoverflow.com/users/6068036/alexm"}, "is_accepted": false, "score": 1, "last_activity_date": 1508512221, "creation_date": 1508512221, "answer_id": 46852096, "question_id": 45472598, "link": "https://stackoverflow.com/questions/45472598/typeerror-not-supported-between-instances-of-nonetype-and-str/46852096#46852096", "title": "TypeError: &#39;&gt;=&#39; not supported between instances of &#39;NoneType&#39; and &#39;str&#39;", "body": "<p>As Vinny mentioned, this issue is known and solved in Pycrypto, but PyPi still delivers an old release of Pycrytpto. You can instead install the latest release directly from the GitHub repository by using:</p>\n\n<pre><code>pip install git+https://github.com/dlitz/pycrypto.git\n</code></pre>\n"}], "owner": {"reputation": 14571, "user_id": 1669996, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/89e5a1861e6429b8f5d3cc45900b98ae?s=128&d=identicon&r=PG", "display_name": "casillas", "link": "https://stackoverflow.com/users/1669996/casillas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5028, "favorite_count": 0, "accepted_answer_id": 46825854, "answer_count": 2, "score": 6, "last_activity_date": 1508746842, "creation_date": 1501717030, "last_edit_date": 1501719415, "question_id": 45472598, "link": "https://stackoverflow.com/questions/45472598/typeerror-not-supported-between-instances-of-nonetype-and-str", "title": "TypeError: &#39;&gt;=&#39; not supported between instances of &#39;NoneType&#39; and &#39;str&#39;", "body": "<p>I have been able to install <code>pycrypto</code> as follows, followed the given <a href=\"https://stackoverflow.com/questions/41843266/microsoft-windows-python-3-6-pycrypto-installation-error/41843310#41843310\">answer</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/KiLsB.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KiLsB.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But when I debug the project, then getting the following issue which seems to be related <code>Crypto</code>.</p>\n\n<blockquote>\n  <p>ModuleNotFoundError: No module named 'winrandom'</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/q0T6o.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/q0T6o.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><code>aut\\token.py</code> line 3 is</p>\n\n<pre><code>from jose.jwt import get_unverified_claims\n</code></pre>\n\n<p><strong>UPDATE:1</strong></p>\n\n<p>Then, I have run <code>pip install winrandom</code> and get the following error.</p>\n\n<blockquote>\n  <p>TypeError: '>=' not supported between instances of 'NoneType' and\n  'str'</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/n7QoZ.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/n7QoZ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>UPDATE:2</strong></p>\n\n<p>When I rung the proposed command <code>pip install --proxy http://XXXX:80 git+https://github.com/dlitz/pycrypto.git</code> with proxy(required) in the working environment, then I get a connection refused error as follows.</p>\n\n<p><a href=\"https://i.stack.imgur.com/oLRkO.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oLRkO.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-2.7", "proxy", "ftp"], "comments": [{"owner": {"reputation": 1956, "user_id": 2027146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mrrIp.jpg?s=128&g=1", "display_name": "Milk", "link": "https://stackoverflow.com/users/2027146/milk"}, "edited": false, "score": 0, "creation_date": 1501720509, "post_id": 45472577, "comment_id": 77906924, "body": "Can you update your question with the error stack trace?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1501771314, "post_id": 45473356, "comment_id": 77935985, "body": "Thanks for your input.  I will try to implement this today and will get back to you with the results!"}, {"owner": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1501798924, "post_id": 45473356, "comment_id": 77952417, "body": "I think we may have a slight miscommunication.  When I started to insert the code into the module, I realized that we are missing the FTP address (section #2).   So I wanted to reconvey the intended sequence of events."}, {"owner": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1501800174, "post_id": 45473356, "comment_id": 77952786, "body": "Sorry, got cut off due to time limit.  Anyway, the miscommunication is my fault.  The FTP server is not ours, it belongs to our vendor and we have no control over it.  Our corporate IT department has done something to limit outgoing FTP requests from behind our firewall and that is why I need a way to circumvent the limitation using our proxy server instead.  I&#39;ve used the proxy server effectively with an FTP client (FileZilla) so I know once I can get the Proxy initialized it can pass through."}, {"owner": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1501800441, "post_id": 45473356, "comment_id": 77952867, "body": "Therefore, here is the sequence I believe needs to be followed: 1) Create proxy event handler (using officeproxy.com) no authentication is required yet at this point.  2) Create FTP handler to info which consists of  a) FTP address [ftp.cal.com], b) User [papa] and c) PW [tango123] to log in to FTP server.  IOW, the authentication takes place AFTER the proxy is initialized.  I hope this clarifies it some."}, {"owner": {"reputation": 637, "user_id": 2892227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TAVni.jpg?s=128&g=1", "display_name": "kevdoran", "link": "https://stackoverflow.com/users/2892227/kevdoran"}, "reply_to_user": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1501800615, "post_id": 45473356, "comment_id": 77952915, "body": "Oh I see now. Let me work on that a bit and update my answer."}, {"owner": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1501800700, "post_id": 45473356, "comment_id": 77952945, "body": "Awesome!  Thanks."}, {"owner": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1502056406, "post_id": 45473356, "comment_id": 78033910, "body": "Hi @kevdoran - any luck on your revised answer?   Cheers!"}, {"owner": {"reputation": 637, "user_id": 2892227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TAVni.jpg?s=128&g=1", "display_name": "kevdoran", "link": "https://stackoverflow.com/users/2892227/kevdoran"}, "reply_to_user": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "edited": false, "score": 0, "creation_date": 1502200714, "post_id": 45473356, "comment_id": 78099975, "body": "@pelampe been busy the past few days, but about to have some downtime I can use to setup a test environment to mimic this and update the client code. Cheers!"}, {"owner": {"reputation": 553, "user_id": 349168, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/46955fd47a47d084e9bf9f989b26ac5a?s=128&d=identicon&r=PG", "display_name": "haltman", "link": "https://stackoverflow.com/users/349168/haltman"}, "edited": false, "score": 0, "creation_date": 1518807283, "post_id": 45473356, "comment_id": 84670656, "body": "@kevdoran can you pls do an example of your point 2 thanks in advance"}], "tags": [], "owner": {"reputation": 637, "user_id": 2892227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TAVni.jpg?s=128&g=1", "display_name": "kevdoran", "link": "https://stackoverflow.com/users/2892227/kevdoran"}, "is_accepted": false, "score": 0, "last_activity_date": 1501724118, "last_edit_date": 1501724118, "creation_date": 1501723724, "answer_id": 45473356, "question_id": 45472577, "link": "https://stackoverflow.com/questions/45472577/setting-up-proxy-with-ftp-with-python/45473356#45473356", "title": "Setting up proxy with ftp with Python", "body": "<p>Note, I found some <a href=\"https://stackoverflow.com/questions/1293518/proxies-in-python-ftp-application\">similar</a> <a href=\"https://stackoverflow.com/questions/11768214/python-download-a-file-over-an-ftp-server\">questions</a> on SO, but as the OP requested a detailed, beginner-level answer, I decided to post this. </p>\n\n<p>To clarify, here is my understanding of what you want to accomplish:</p>\n\n<ul>\n<li>You have an FTP server behind a proxy. </li>\n<li>The FTP server requires user/password credentials, but the proxy itself does not.</li>\n</ul>\n\n<p>One option is to use the <code>ftplib</code> package. One of the great advantages of a popular language such as Python is the wide selection of packages the that provide good implementations of specific functionality. In this case, an ftp client:</p>\n\n<pre><code>import ftplib  # 1\n\nftp = ftplib.FTP(\"officeproxy.com:8080\")  # 2\nftp.set_debuglevel(1)  # 3\nftp.login(\"papa\", \"tango123\")  # 4\n\nfilename = \"hello.txt\"\nf = open(filename, 'wb')  # 5 \nftp.retrbinary(\"RETR \" + filename , f.write)  # 6\n\nf.close()   # cleanup file handle\nftp.quit()  # cleanup ftp client \n</code></pre>\n\n<p>Here is what the code is doing:</p>\n\n<ol>\n<li>Import the <code>ftplib</code> package.</li>\n<li>Connect to the FTP server through the proxy. The way I have written it assume that the proxy is setup to forward the FTP protocol on the port specified (8080 in your example). <em>If this is not the case, this will not work.</em></li>\n<li>Enable debug logging. From <a href=\"https://docs.python.org/2/library/ftplib.html#ftplib.FTP.set_debuglevel\" rel=\"nofollow noreferrer\">the ftplib documentation</a>:</li>\n</ol>\n\n<blockquote>\n  <p><code>FTP.set_debuglevel(level)</code>:  <code>0</code>, produces no debugging output... <code>1</code> produces a moderate amount of debugging output... <code>2</code> or higher produces the maximum amount of debugging output</p>\n</blockquote>\n\n<ol start=\"4\">\n<li>Login to the FTP server using user=\"papa\", passwd=\"tango123\". Again, this is from the <a href=\"https://docs.python.org/2/library/ftplib.html#ftplib.FTP.login\" rel=\"nofollow noreferrer\">ftplib documentation for login()</a></li>\n<li><a href=\"https://docs.python.org/2/library/functions.html#open\" rel=\"nofollow noreferrer\">Open a local file</a> for writing the contents of file you are about to retrieve from the FTP server. The first argument is the filename for the file you want to save to (it can be anything, I decided to use the same filename as the filename on the FTP server). The second argument is the <em>mode</em> you want to open the file as, which is a string of flags: w = 'write mode', b = 'binary mode', because we are going to retrieve the file as binary and write it as binary.</li>\n<li>I recommend you read the <a href=\"https://docs.python.org/2/library/ftplib.html#ftplib.FTP.retrbinary\" rel=\"nofollow noreferrer\">ftplib documentation for retrbinary</a>. This is a bit tricky to understand at first. The first argument, <code>\"RETR\" +  filename</code> is the command to send to the FTP server, in this case <code>RETR hello.txt</code>. The second argument, <code>f.write</code> is the <em>callback</em> function you want the <code>ftp.retrbinary</code> function to call whenever it has a block of data from the server. In its implementation, whenever <code>retrbinary</code> has data, it will call <code>f.write(data)</code> where <code>data</code> is the latest block of data it has. To understand more how callbacks work in Python, see <a href=\"https://www.import.io/post/introduction-to-asynchronous-apis-in-python/\" rel=\"nofollow noreferrer\">Introduction to Asynchronous APIs in Python</a></li>\n</ol>\n\n<p>I hope this works for you, and I hope the answer is detailed enough that you understand how it works. If it does not work, please post the stack trace output for the error you get.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9424409, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156594968022573/picture?type=large", "display_name": "Martin Lundholm", "link": "https://stackoverflow.com/users/9424409/martin-lundholm"}, "is_accepted": false, "score": 0, "last_activity_date": 1534428474, "creation_date": 1534428474, "answer_id": 51879035, "question_id": 45472577, "link": "https://stackoverflow.com/questions/45472577/setting-up-proxy-with-ftp-with-python/51879035#51879035", "title": "Setting up proxy with ftp with Python", "body": "<p>The question is a little bit out-dated, but I didn't find any recent solution myself so I figured I would provide the solution I found. In my case the office proxy requires credentials so those are included in the solution. I would presume that you can just remove the proxy_user and proxy_passwd if your proxy does not require credentials. The code I got working in Python 3.6 is:</p>\n\n<pre><code>from ftplib import FTP\n\nftp = FTP(\"officeproxy.com\")\nftp.set_debuglevel(1)\nftp.login(user='ftp_user@ftp_host proxy_user', passwd='ftp_passwd', acct='proxy_passwd')\n\n# Do whatever you need on the FTP server here\n\nftp.quit()\n</code></pre>\n\n<p>I hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11577008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1772377643b275d5dd11dc159ef9bcee?s=128&d=identicon&r=PG&f=1", "display_name": "Doey", "link": "https://stackoverflow.com/users/11577008/doey"}, "is_accepted": false, "score": 0, "last_activity_date": 1570522686, "creation_date": 1570522686, "answer_id": 58282569, "question_id": 45472577, "link": "https://stackoverflow.com/questions/45472577/setting-up-proxy-with-ftp-with-python/58282569#58282569", "title": "Setting up proxy with ftp with Python", "body": "<p>Adding this as it's one of the top results and struggled to find a solution.</p>\n\n<p>If your proxy is a <strong>HTTP proxy</strong> and you need to <strong>authenticate</strong> it then this is how:</p>\n\n<pre><code>import socks\nimport socket\n\nsocks.set_default_proxy(socks.HTTP, \n        proxy_host, \n        proxy_port, \n        username=proxy_username, \n        password=proxy_password\n)\nsocket.socket = socks.socksocket\nftp = FTP(ftp_host)\nftp.set_debuglevel(1) \nftp.login(\n        user=ftp_user,\n        passwd=ftp_password\n)\n</code></pre>\n\n<p>Otherwise for a <strong>FTP Proxy</strong> Martin's answer works. You can see the behaviour in FileZilla for FTP proxies too and that'll help to code for your requirements</p>\n\n<p>Hope this helps someone!</p>\n"}], "owner": {"reputation": 31, "user_id": 8408059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc5d567046a7312141b4bf07cc3e9d0?s=128&d=identicon&r=PG&f=1", "display_name": "pelampe", "link": "https://stackoverflow.com/users/8408059/pelampe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4357, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1570522686, "creation_date": 1501716904, "last_edit_date": 1508070224, "question_id": 45472577, "link": "https://stackoverflow.com/questions/45472577/setting-up-proxy-with-ftp-with-python", "title": "Setting up proxy with ftp with Python", "body": "<p>We are trying to develop a Python module that will hit an FTP server and download files to my local machine. When we try to run the FTP portion of the module it is timing out.</p>\n\n<p>We have a proxy server (let's call it \"officeproxy.com:8080\") to handle this and when using an FTP client like FileZilla or Windows Explorer to access FTP sites we are successful.</p>\n\n<p>Let's call the ftp site \"ftp.cal.com\".  User name is \"papa\".  Password is \"tango123\".</p>\n\n<p>So far we have:</p>\n\n<pre><code>Proxy = officeproxy.com:8080\n\nFTP = ftp.cal.com\n\nUser = papa\n\nPW = tango123 \n</code></pre>\n\n<p>The above are not real entities so if you want to swap them out for real ones, be my guest.</p>\n\n<p>I need a module to first load the proxy service then run the FTP portion.</p>\n\n<p>I am running Python 2.7.</p>\n\n<p>I have searched around and have this code so far.  The OP said it is just a short module to test connection to FTP and read one file.</p>\n\n<p>(Note: I have intentionally put <code>#</code> in a lot of places to show when I don't know to fill in, or other reasons):</p>\n\n<pre><code>import urllib2\n# I have filled in the proxy info\nproxy_host = 'officeproxy.com:8080'\n\n# I don't think this needs any modification, right?  \nproxy_handler = urllib2.ProxyHandler({'ftp': proxy_host})\n\n# ditto here \nproxy_auth_handler = urllib2.ProxyBasicAuthHandler() \n\n# now here is where I am unsure what to put; \n# also, I really need FTP user and FTP password, and NOT Proxy... \n# so what do I need to change here?\nproxy_auth_handler.add_password(None, proxy_host, proxy_user, proxy_passwd) \nopener_thru_proxy = urllib2.build_opener(proxy_handler, proxy_auth_handler)\n\n# I filled in this part\nconn = opener_thru_proxy.open('ftp://ftp.cal.com/hello.txt') \n\n# I don't believe I need to change this, right?\nprint conn.read()\n</code></pre>\n"}, {"tags": ["python", "optimization", "scikit-learn", "classification", "svm"], "comments": [{"owner": {"reputation": 2787, "user_id": 2507197, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2ltLG.jpg?s=128&g=1", "display_name": "Alter", "link": "https://stackoverflow.com/users/2507197/alter"}, "edited": false, "score": 0, "creation_date": 1501717175, "post_id": 45472516, "comment_id": 77906146, "body": "If you are also looking at anomaly detection, perhaps Isolation Forests are worth a look? They have the advantage of being fast and unsupervised, they&#39;ve also performed favourably to state of the art algorithms - Liu (2008). Isolation Forests"}, {"owner": {"reputation": 2787, "user_id": 2507197, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2ltLG.jpg?s=128&g=1", "display_name": "Alter", "link": "https://stackoverflow.com/users/2507197/alter"}, "edited": false, "score": 0, "creation_date": 1501718202, "post_id": 45472516, "comment_id": 77906387, "body": "I should mention that there is an sklearn implementation in <code>sklearn.ensembles</code>, which makes it easy to use"}, {"owner": {"reputation": 791, "user_id": 1434495, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7737865536963b9e349ca1cce716084a?s=128&d=identicon&r=PG", "display_name": "Flair", "link": "https://stackoverflow.com/users/1434495/flair"}, "reply_to_user": {"reputation": 2787, "user_id": 2507197, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2ltLG.jpg?s=128&g=1", "display_name": "Alter", "link": "https://stackoverflow.com/users/2507197/alter"}, "edited": false, "score": 0, "creation_date": 1501718630, "post_id": 45472516, "comment_id": 77906497, "body": "Ah I wanted to use both novelty detection and outlier detection since my training class only consists of one class, and I am unsure if that class is an outlier or an inlier compare to the other class. (I am only doing binary classifier.) But if Isolation Forests are faster, then I might as well."}], "answers": [{"comments": [{"owner": {"reputation": 791, "user_id": 1434495, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7737865536963b9e349ca1cce716084a?s=128&d=identicon&r=PG", "display_name": "Flair", "link": "https://stackoverflow.com/users/1434495/flair"}, "edited": false, "score": 0, "creation_date": 1501779221, "post_id": 45473171, "comment_id": 77941853, "body": "But would you happen to know an efficient solution for novelty detection? edit: I am using these definitions: <a href=\"http://scikit-learn.org/stable/modules/outlier_detection.html\" rel=\"nofollow noreferrer\">scikit-learn.org/stable/modules/outlier_detection.html</a>"}, {"owner": {"reputation": 2787, "user_id": 2507197, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2ltLG.jpg?s=128&g=1", "display_name": "Alter", "link": "https://stackoverflow.com/users/2507197/alter"}, "reply_to_user": {"reputation": 791, "user_id": 1434495, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7737865536963b9e349ca1cce716084a?s=128&d=identicon&r=PG", "display_name": "Flair", "link": "https://stackoverflow.com/users/1434495/flair"}, "edited": false, "score": 1, "creation_date": 1501780820, "post_id": 45473171, "comment_id": 77942820, "body": "I don&#39;t. But a brief search landed me with this for <a href=\"http://scikit-learn.org/stable/modules/neighbors.html#k-d-tree\" rel=\"nofollow noreferrer\">nearest neighbors</a> (distance). I&#39;m sure a lot of other methods in that paper will have sklearn implementations, after that it&#39;s just checking their computational complexity."}], "tags": [], "owner": {"reputation": 2787, "user_id": 2507197, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2ltLG.jpg?s=128&g=1", "display_name": "Alter", "link": "https://stackoverflow.com/users/2507197/alter"}, "is_accepted": false, "score": 0, "last_activity_date": 1501722071, "creation_date": 1501722071, "answer_id": 45473171, "question_id": 45472516, "link": "https://stackoverflow.com/questions/45472516/how-to-optimize-scikit-one-class-training-time/45473171#45473171", "title": "How to optimize SciKit one-class training time?", "body": "<p>I'm <em>very</em> junior in this field, so take this with a grain of salt. </p>\n\n<p>Isolation Forests appear to be an efficient solution for outlier detection. They have been shown to perform well against other popular algorithms [Liu, 2008]. Also, One-class SVMs are somewhat susceptible to anomalies according to scikit learn. The anomalies in your Class 1 could overlap with Class 2 and cause data to be mislabeled... perhaps taking subsets of your samples and using them to create an ensemble of SVMs could avoid this (and still save you time, depending on the size of the subsets), but Isolation Forests naturally do this.</p>\n\n<p>For further reading, this seems like a good reference paper on the topic\n<a href=\"http://www.robots.ox.ac.uk/~davidc/pubs/NDreview2014.pdf\" rel=\"nofollow noreferrer\">http://www.robots.ox.ac.uk/~davidc/pubs/NDreview2014.pdf</a></p>\n\n<p>It mentions clustering and distance methods which may be applicable in your case. I think it's best to do a lot of reading and make sure you understand the different strengths/weaknesses of the algorithms. Especially since I'm in the process of doing that and really can't give solid advice even if I knew the specifics of your problem.   </p>\n\n<p>Note re:distance based algorithms. I know some are optimized, but I think the general complaint is that they have high computation complexity. Many clustering/distance/probability based algorithms also have weaknesses dealing with high dimensionality data. </p>\n"}], "owner": {"reputation": 791, "user_id": 1434495, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7737865536963b9e349ca1cce716084a?s=128&d=identicon&r=PG", "display_name": "Flair", "link": "https://stackoverflow.com/users/1434495/flair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501722071, "creation_date": 1501716499, "question_id": 45472516, "link": "https://stackoverflow.com/questions/45472516/how-to-optimize-scikit-one-class-training-time", "title": "How to optimize SciKit one-class training time?", "body": "<p>Essentially my questions is the same as <a href=\"https://stackoverflow.com/questions/41715835/scikit-one-class-svm-classifier-training-time-increases-exponentially-with-size/45472297\">SciKit One-class SVM classifier training time increases exponentially with size of training data</a>, but no one has figured out the problem.</p>\n\n<p>It seems to run fine for somewhere in the 10s of thousands, but 100s of thousands take very long. And I want to run it on 10s of millions, but I don't want to wait a day and a half (maybe even more) for nothing to come of it. Is there a faster way about it, or should I use something else?</p>\n"}, {"tags": ["python", "dictionary", "python-3.6", "counting"], "answers": [{"comments": [{"owner": {"reputation": 1043, "user_id": 7535419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CaK1i.png?s=128&g=1", "display_name": "MarkS", "link": "https://stackoverflow.com/users/7535419/marks"}, "edited": false, "score": 0, "creation_date": 1501717942, "post_id": 45472551, "comment_id": 77906315, "body": "I actually found that myself a few minutes later, however, the code is still broke.  After I make that change the error changes to:  AttributeError: &#39;int&#39; object has no attribute &#39;append&#39;"}, {"owner": {"reputation": 1043, "user_id": 7535419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CaK1i.png?s=128&g=1", "display_name": "MarkS", "link": "https://stackoverflow.com/users/7535419/marks"}, "edited": false, "score": 0, "creation_date": 1501719482, "post_id": 45472551, "comment_id": 77906703, "body": "Ignore.  I used Counter() to solve the problem.  Thanks."}], "tags": [], "owner": {"reputation": 2677, "user_id": 1193893, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fac953e47b56a0f867ca82bc19ed681f?s=128&d=identicon&r=PG", "display_name": "aldo", "link": "https://stackoverflow.com/users/1193893/aldo"}, "is_accepted": false, "score": 0, "last_activity_date": 1501716708, "creation_date": 1501716708, "answer_id": 45472551, "question_id": 45472513, "link": "https://stackoverflow.com/questions/45472513/typeerror-iterating-over-items-in-a-dictionary/45472551#45472551", "title": "TypeError iterating over items in a dictionary", "body": "<p>On the line...</p>\n\n<pre><code>for hobby in people['hobbies']:\n</code></pre>\n\n<p>you are passing the string <code>'hobbies'</code> as an index to the list <code>people</code>.  Perhaps you intended this instead...</p>\n\n<pre><code>for hobby in d['hobbies']:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 0, "last_activity_date": 1501757697, "creation_date": 1501757697, "answer_id": 45482178, "question_id": 45472513, "link": "https://stackoverflow.com/questions/45472513/typeerror-iterating-over-items-in-a-dictionary/45482178#45482178", "title": "TypeError iterating over items in a dictionary", "body": "<p>There are two problems in your code:</p>\n\n<ul>\n<li>You probably wanted to get the <code>'hobbies'</code> from <code>d</code> and not from <code>people</code> (which is a list).</li>\n<li>You don't add lists in case there's no entry in your <code>data</code> but then try to append to it.</li>\n</ul>\n\n<p>Fixing these it would look like this:</p>\n\n<pre><code>people = [{'name': 'John', 'age': 47, 'hobbies': ['Python', 'cooking', 'reading']},\n          {'name': 'Mary', 'age': 16, 'hobbies': ['horses', 'cooking', 'art']},\n          {'name': 'Bob', 'age': 14, 'hobbies': ['Python', 'piano', 'cooking']},\n          {'name': 'Sally', 'age': 11, 'hobbies': ['biking', 'cooking']},\n          {'name': 'Mark', 'age': 54, 'hobbies': ['hiking', 'camping', 'Python', 'chess']},\n          {'name': 'Alisa', 'age': 52, 'hobbies': ['camping', 'reading']},\n          {'name': 'Megan', 'age': 21, 'hobbies': ['lizards', 'reading']},\n          {'name': 'Amanda', 'age': 19, 'hobbies': ['turtles']},\n          ]\n\ndata = {}\nfor d in people:\n    for hobby in d['hobbies']:\n        if hobby not in data:\n            data[hobby] = [1]\n        else:\n            data[hobby].append(1)\n\nfor key, value in data.items():\n    print(key + ':', end=' ')\n    sumvalues = 0\n    for elem in value:\n        sumvalues += elem\n    print(sumvalues)\n</code></pre>\n\n<p>However that's a lot of code for something that is already covered (and in a more performant way) by <a href=\"https://docs.python.org/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>collections.Counter</code></a>:</p>\n\n<pre><code>from collections import Counter\ncnts = Counter(hobby for d in people for hobby in d['hobbies'])\nfor hobby, cnt in cnts.items():\n    print('{}: {}'.format(hobby, cnt))\n</code></pre>\n\n<p>which prints:</p>\n\n<pre><code>Python: 3\ncooking: 4\nreading: 3\nhorses: 1\nart: 1\npiano: 1\nbiking: 1\nhiking: 1\ncamping: 2\nchess: 1\nlizards: 1\nturtles: 1\n</code></pre>\n\n<p>You can also use the <a href=\"https://docs.python.org/library/collections.html#collections.Counter.most_common\" rel=\"nofollow noreferrer\"><code>most_common</code></a> method of the Counter to get it sorted in descending order:</p>\n\n<pre><code>for hobby, cnt in Counter(hobby for d in people for hobby in d['hobbies']).most_common():\n    print('{}: {}'.format(hobby, cnt))\n</code></pre>\n"}], "owner": {"reputation": 1043, "user_id": 7535419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CaK1i.png?s=128&g=1", "display_name": "MarkS", "link": "https://stackoverflow.com/users/7535419/marks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1501757757, "creation_date": 1501716490, "last_edit_date": 1501757757, "question_id": 45472513, "link": "https://stackoverflow.com/questions/45472513/typeerror-iterating-over-items-in-a-dictionary", "title": "TypeError iterating over items in a dictionary", "body": "<p>I have a list of dictionaries in which each dictionary also contains a list of items(hobbies).</p>\n\n<p>I am simply wanting to add up how many of each hobby there are and put the results into a new dictionary.</p>\n\n<p>My results should look like: <code>{'Python': '3', 'cooking': '4', 'reading': '3', ... }</code>.</p>\n\n<p>The hobby followed by the total number of times it exists.</p>\n\n<p>This is my code:</p>\n\n<pre><code>people = [{'name': 'John', 'age': 47, 'hobbies': ['Python', 'cooking', 'reading']},\n          {'name': 'Mary', 'age': 16, 'hobbies': ['horses', 'cooking', 'art']},\n          {'name': 'Bob', 'age': 14, 'hobbies': ['Python', 'piano', 'cooking']},\n          {'name': 'Sally', 'age': 11, 'hobbies': ['biking', 'cooking']},\n          {'name': 'Mark', 'age': 54, 'hobbies': ['hiking', 'camping', 'Python', 'chess']},\n          {'name': 'Alisa', 'age': 52, 'hobbies': ['camping', 'reading']},\n          {'name': 'Megan', 'age': 21, 'hobbies': ['lizards', 'reading']},\n          {'name': 'Amanda', 'age': 19, 'hobbies': ['turtles']},\n          ]\n\n\ndata = {}\nfor d in people:\n    for hobby in people['hobbies']:\n        if hobby not in data:\n            data[hobby] = int(1)\n        else:\n            data[hobby].append(int(1))\n\nfor key, value in data.items():\n    print(key + ':', end=' ')\n    sumvalues = 0\n    for elem in value:\n        sumvalues += elem\n    print(sumvalues)\n</code></pre>\n\n<p>When I run it I get:</p>\n\n<pre><code>TypeError: list indices must be integers or slices, not str\n</code></pre>\n\n<p>Not sure what is generating the error.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501720053, "post_id": 45472478, "comment_id": 77906835, "body": "Will you look at that... an exact duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 858, "user_id": 8242299, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0cd6940dc9864484d7a6e71ad804dd89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas.mac", "link": "https://stackoverflow.com/users/8242299/thomas-mac"}, "edited": false, "score": 0, "creation_date": 1501717539, "post_id": 45472542, "comment_id": 77906212, "body": "I get ValueError: could not convert string to float: N/A  .... is there a way to ignore Nan values?"}, {"owner": {"reputation": 858, "user_id": 8242299, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0cd6940dc9864484d7a6e71ad804dd89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas.mac", "link": "https://stackoverflow.com/users/8242299/thomas-mac"}, "edited": false, "score": 0, "creation_date": 1501717693, "post_id": 45472542, "comment_id": 77906249, "body": "there are 500 rows in the df, guess theres one thats NA"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 858, "user_id": 8242299, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0cd6940dc9864484d7a6e71ad804dd89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas.mac", "link": "https://stackoverflow.com/users/8242299/thomas-mac"}, "edited": false, "score": 0, "creation_date": 1501718010, "post_id": 45472542, "comment_id": 77906336, "body": "I updated the second version using <code>pd.to_numeric</code> to include a parameter setting that forces things it can&#39;t parse to <code>np.nan</code>.  It should work with <code>NA</code> now."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501718192, "post_id": 45472542, "comment_id": 77906382, "body": "I&#39;m convinced regex is overkill here. Can we do without it?"}, {"owner": {"reputation": 858, "user_id": 8242299, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0cd6940dc9864484d7a6e71ad804dd89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas.mac", "link": "https://stackoverflow.com/users/8242299/thomas-mac"}, "edited": false, "score": 0, "creation_date": 1501718290, "post_id": 45472542, "comment_id": 77906415, "body": "w/o regex it brings error: ValueError: invalid literal for float(): 3.08B"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1501718296, "post_id": 45472542, "comment_id": 77906420, "body": "One way to find out... you gonna test it... My 3 &amp; 4 year olds have legos they want me to help them build"}, {"owner": {"reputation": 858, "user_id": 8242299, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0cd6940dc9864484d7a6e71ad804dd89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas.mac", "link": "https://stackoverflow.com/users/8242299/thomas-mac"}, "edited": false, "score": 0, "creation_date": 1501718313, "post_id": 45472542, "comment_id": 77906424, "body": "w/ the &#39;coerce&#39; edit it now shows an empty df"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 858, "user_id": 8242299, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0cd6940dc9864484d7a6e71ad804dd89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas.mac", "link": "https://stackoverflow.com/users/8242299/thomas-mac"}, "edited": false, "score": 0, "creation_date": 1501718388, "post_id": 45472542, "comment_id": 77906445, "body": "@thomas.mac Whoops, fixed"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 5, "last_activity_date": 1501718374, "last_edit_date": 1501718374, "creation_date": 1501716644, "answer_id": 45472542, "question_id": 45472478, "link": "https://stackoverflow.com/questions/45472478/converting-characters-to-numerical-values-in-a-dataframe/45472542#45472542", "title": "Converting characters to numerical values in a dataframe", "body": "<p>Use <code>replace</code> with <code>regex=True</code> and use replacement strings that emulate scientific notation.  Then use <code>astype(float)</code> or <code>pd.to_numeric</code>.</p>\n\n<pre><code>df[df.Market_Cap.replace(dict(B='E9', M='E6'), regex=True).astype(float) &gt;= 100E6]\n\n     Market_Cap      PE\nAAN       3.25B   23.60\nAAPL    819.30B   18.44\nACIW      2.63B  103.15\n</code></pre>\n\n<hr>\n\n<p>Equivalently</p>\n\n<pre><code>dct = dict(B='E9', M='E6')\nnum = pd.to_numeric(df.Market_Cap.replace(dct, regex=True), 'coerce')\ndf[num &gt;= 100E6]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 2, "last_activity_date": 1501716800, "creation_date": 1501716800, "answer_id": 45472563, "question_id": 45472478, "link": "https://stackoverflow.com/questions/45472478/converting-characters-to-numerical-values-in-a-dataframe/45472563#45472563", "title": "Converting characters to numerical values in a dataframe", "body": "<p>Alternatively, specify a <code>mapping</code> and then substitute with <code>str.map</code>:</p>\n\n<pre><code>In [723]: mapping\nOut[723]: {'B': 1000000000, 'K': 1000, 'M': 1000000}\n\nIn [724]: df[df['Market Cap'].str[:-1].astype(float) * df['Market Cap'].str[-1].map(mapping) &gt; 100e6]\nOut[724]: \n     Market Cap      PE\nAAN       3.25B   23.60\nAAPL    819.30B   18.44\nACIW      2.63B  103.15\n</code></pre>\n"}], "owner": {"reputation": 858, "user_id": 8242299, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0cd6940dc9864484d7a6e71ad804dd89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas.mac", "link": "https://stackoverflow.com/users/8242299/thomas-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1501720043, "accepted_answer_id": 45472542, "answer_count": 2, "score": 1, "last_activity_date": 1501720019, "creation_date": 1501716162, "last_edit_date": 1501720019, "question_id": 45472478, "link": "https://stackoverflow.com/questions/45472478/converting-characters-to-numerical-values-in-a-dataframe", "closed_reason": "Duplicate", "title": "Converting characters to numerical values in a dataframe", "body": "<p>I have a df called 'XLK':</p>\n\n<pre><code>       Market Cap   PE  \nAAN     3.25B      23.6 \nAAPL    819.30B    18.44    \nACFN    6.18M      2.1  \nACIW    2.63B      103.15   \n</code></pre>\n\n<p>I just want the market cap for values > 100 million, so expected output is: </p>\n\n<pre><code>       Market Cap   PE  \nAAN     3.25B      23.6 \nAAPL    819.30B    18.44    \nACIW    2.63B      103.15   \n</code></pre>\n\n<p>I've tried converting the letters to the appropriate 0's with no success:</p>\n\n<pre><code>XLK['Market Cap'].replace('M','000000')\nXLK.drop[XLK_quote['Market Cap'] &lt; '100M'].index\n</code></pre>\n"}, {"tags": ["python", "google-app-engine", "sha-3"], "answers": [{"tags": [], "owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "is_accepted": true, "score": 1, "last_activity_date": 1501717074, "creation_date": 1501717074, "answer_id": 45472609, "question_id": 45472459, "link": "https://stackoverflow.com/questions/45472459/how-can-you-create-a-sha-3-256-hash-in-python-on-the-google-app-engine/45472609#45472609", "title": "How can you create a SHA-3-256 Hash in Python on The Google App Engine?", "body": "<p><a href=\"https://github.com/coruus/py-keccak/blob/master/fips202/keccak.py\" rel=\"nofollow noreferrer\">py-keccak</a> uses numpy which is supported by <a href=\"https://cloud.google.com/appengine/docs/standard/python/tools/built-in-libraries-27\" rel=\"nofollow noreferrer\">appengine</a>.</p>\n\n<p>There is <a href=\"https://github.com/moshekaplan/python-sha3/blob/master/python_sha3.py\" rel=\"nofollow noreferrer\">another one</a> without numpy requirement.</p>\n"}], "owner": {"reputation": 340, "user_id": 315684, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/b0e93939b2b70418ec82b4d3e69eb97b?s=128&d=identicon&r=PG", "display_name": "Some Guy Trying To Do Math", "link": "https://stackoverflow.com/users/315684/some-guy-trying-to-do-math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 45472609, "answer_count": 1, "score": 1, "last_activity_date": 1501717074, "creation_date": 1501716003, "question_id": 45472459, "link": "https://stackoverflow.com/questions/45472459/how-can-you-create-a-sha-3-256-hash-in-python-on-the-google-app-engine", "title": "How can you create a SHA-3-256 Hash in Python on The Google App Engine?", "body": "<p>Having a lot of problems getting an SHA-3 256 Hash working under Python in the Google App Engine. </p>\n\n<p>Speed isn't really the issue just something that is either written in Pure Python or use the third party libraries support by the Google App Engine.</p>\n"}, {"tags": ["python", "enthought"], "answers": [{"tags": [], "owner": {"reputation": 5775, "user_id": 1988991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a4ae5d937c20301fb9442597a6d0ee?s=128&d=identicon&r=PG", "display_name": "Jonathan March", "link": "https://stackoverflow.com/users/1988991/jonathan-march"}, "is_accepted": false, "score": 0, "last_activity_date": 1502128542, "creation_date": 1502128542, "answer_id": 45552942, "question_id": 45472447, "link": "https://stackoverflow.com/questions/45472447/canopy-doesnt-start-after-seamless-installation/45552942#45552942", "title": "Canopy doesn&#39;t start after seamless installation", "body": "<p>a) The article that you reference is Windows-specific, but certainly on any OS, PYTHONPATH and PYTHONHOME should never be be pointing to any Python distribution. See <a href=\"https://support.enthought.com/hc/en-us/articles/204469160-How-do-I-set-PYTHONPATH-and-other-environment-variables-for-Canopy-\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<p>b) If the <code>canopy</code> command is literally <em>not recognized</em> (vs being recognized but not starting as expected), then that at least is probably a generic \"how do I start an executable?\" issue, with typical answers being \"Put its path in your PATH environment variable\" or \"reference the executable directly by its full path\".</p>\n"}], "owner": {"reputation": 1, "user_id": 8404890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abfea21fa24681413c07caf35a62e19a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniele Ottolina", "link": "https://stackoverflow.com/users/8404890/daniele-ottolina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1502128542, "creation_date": 1501715898, "last_edit_date": 1501757284, "question_id": 45472447, "link": "https://stackoverflow.com/questions/45472447/canopy-doesnt-start-after-seamless-installation", "title": "Canopy doesn&#39;t start after seamless installation", "body": "<p>I read almost every post on the subject on the forum, but I was not able to fix this annoying problem. I've a fresh Canopy 2.1.3 installation on Fedora 26. Nothing happens whether I try to execute it via GUI or command line ('canopy' is not recognized even as a command!).</p>\n\n<p>I'm clueless, I suppose the issue may be with the environmental variables PYTHONPATH and PYTHONHOME (Fedora ships with its own Python distribution by RedHat), but I have not been able to fix the problem in the past two hours.\n<a href=\"https://support.enthought.com/hc/en-us/articles/204469810-Windows-Canopy-shortcut-in-Start-menu-doesn-t-do-anything\" rel=\"nofollow noreferrer\">Here</a> is the reference from Enthought itself I'm referring to.</p>\n\n<p>What puzzles me is that in the previous Fedora releases I did not experience such problems at all when executing Canopy for the first time.</p>\n"}, {"tags": ["python", "neural-network", "deep-learning", "keras", "keras-2"], "comments": [{"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "edited": false, "score": 0, "creation_date": 1515668604, "post_id": 45472440, "comment_id": 83392035, "body": "Did you find anything?"}], "owner": {"reputation": 95, "user_id": 8022054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf45367552943b8f02d960dede5191?s=128&d=identicon&r=PG&f=1", "display_name": "aniromi", "link": "https://stackoverflow.com/users/8022054/aniromi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1361, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1501743300, "creation_date": 1501715849, "last_edit_date": 1501743300, "question_id": 45472440, "link": "https://stackoverflow.com/questions/45472440/implementing-adversarial-training-in-keras", "title": "Implementing adversarial training in keras", "body": "<p>I would like to implement an adversarial network with a classifier whose output is connected to an adversary that has to guess a specific feature of the inputs to the classifier (a nuisance parameter) based on the output of the classifier (a detailed description of such an adversarial network can be found in this paper: <a href=\"https://arxiv.org/pdf/1611.01046.pdf\" rel=\"nofollow noreferrer\">learning to pivot with adversarial networks</a></p>\n\n<p>The model will then be trained like this:</p>\n\n<ol>\n<li>train the adversary on a batch (the classifier will be fixed)</li>\n<li>freeze the adversary</li>\n<li>train the whole model while the adversary is frozen on a batch</li>\n<li>unfreeze the adversary</li>\n<li>repeat for the other batches</li>\n<li>shuffle and repeat for other epochs</li>\n</ol>\n\n<p>When training the adversary I want the loss function to be categorical crossentropy, and when training the whole model, I want it to be the loss function of the classifier (a binary crossentropy loss) minus the loss of the adversary times a parameter: <code>L_c() - b * L_a()</code>.</p>\n\n<p>Most of the adversarial training codes that I've seen are trained in Keras using  train_on_batch. However since I already have a lot of code setup with another sequential model, and I would like to reuse it, I was wondering if there is a way to implement this model and train it with model.fit in Keras.</p>\n\n<p>What I was thinking of doing was to setup the model using Keras functional API with the classifier input as its input and the classifier and adversary outputs as its outputs. I would also compile the model as an adversary model with only a single output. For example:</p>\n\n<pre><code>classifier_input = Input(shape=(10,))\nx = Dense(50, activation='tanh')(classifier_input)\nx = Dense(25, activation='tanh')(x)\nx = Dense(5, activation='tanh')(x)\nclassifier_output = Dense(1, activation='sigmoid')(x)\n\nx = Dense(30, activation='tanh')(classifier_output)\nx = Dense(15, activation='tanh')(x)\nx = Dense(5, activation='tanh')(x)\nadversary_output = Dense(3, activation='sgimoid')(x)\n\nadversary = Model(inputs=classifier_input , outputs=adversary_output)\nadversary.compile(optimizer='Adamax', loss='categorical_crossentropy', metrics=['accuracy'])\n\nfinal_model = Model(inputs=classifier_input,outputs=[classifier_output,adversary_output])\nfinal_model.compile(optimizer='Adamax', \n              loss=['binary_crossentropy', 'categorical_crossentropy'], \n              loss_weights=[1.0, -0.1], metrics=['accuracy'])\n</code></pre>\n\n<p>And then I want to setup a Callback that will train the adversary (after freezing the layers in the classifier) in on_batch_begin, and then the training of final_model will be done using model.fit code (I will freeze adversary and unfreeze the classifier layers in on_batch_begin right before the training of final_model begins).</p>\n\n<p>But then I don't know if it is possible to pass the current batch as an argument to on_batch_begin. Would I have to setup my own batches in the Callback or can the batch be passed by model.fit?</p>\n\n<p>Is there a better way of doing adversarial training while still using model.fit?</p>\n"}, {"tags": ["python", "directory"], "comments": [{"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 1, "creation_date": 1501716252, "post_id": 45472425, "comment_id": 77905933, "body": "Use the absolute path."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1501716750, "post_id": 45472425, "comment_id": 77906056, "body": "<code>os.path.getctime(folder)</code> -&gt; <code>os.path.getctime(directory + folder)</code>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1501717463, "post_id": 45472425, "comment_id": 77906199, "body": "The error message doesn&#39;t include any of the lines of code you show."}, {"owner": {"reputation": 13, "user_id": 8408364, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345891575508562/picture?type=large", "display_name": "thedesignergr", "link": "https://stackoverflow.com/users/8408364/thedesignergr"}, "edited": false, "score": 0, "creation_date": 1501749639, "post_id": 45472425, "comment_id": 77918516, "body": "the error was irrelevant to the other files, that&#39;s why i didn&#39;t add them. It just needed the absolute path. Thanks m8s"}], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 1971010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff2f37508434b17c2e2982f9baa5e5c?s=128&d=identicon&r=PG", "display_name": "taleporos", "link": "https://stackoverflow.com/users/1971010/taleporos"}, "is_accepted": true, "score": 0, "last_activity_date": 1501748993, "creation_date": 1501748993, "answer_id": 45478841, "question_id": 45472425, "link": "https://stackoverflow.com/questions/45472425/no-such-file-or-directory-error-using-getctime/45478841#45478841", "title": "No such file or directory error using getctime()", "body": "<p>Just add the whole path:</p>\n\n<pre><code>creation_times = [(folder, os.path.getctime(directory+folder)) for folder in folders]\ncreation_times.sort(key=lambda x: x[1])  # sort by creation time\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8408364, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345891575508562/picture?type=large", "display_name": "thedesignergr", "link": "https://stackoverflow.com/users/8408364/thedesignergr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 1, "accepted_answer_id": 45478841, "answer_count": 1, "score": -1, "last_activity_date": 1501748993, "creation_date": 1501715767, "last_edit_date": 1501717257, "question_id": 45472425, "link": "https://stackoverflow.com/questions/45472425/no-such-file-or-directory-error-using-getctime", "title": "No such file or directory error using getctime()", "body": "<p>I am trying to find the last created folder name, using python:</p>\n\n<pre><code>directory = mx.get_env('WORKDIR')+'/Benchmarks/SPECjvm2008/SPECjvm2008/r\u200c\u200besults/'\nfolders = os.walk(directory).next()[1]\ncreation_times = [(folder, os.path.getctime(folder)) for folder in folders]\ncreation_times.sort(key=lambda x: x[1])  # sort by creation time\n</code></pre>\n\n<p>But I am getting the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  File \"/home/taleporos/.jenkins/workspace/MaxineBench/graal/mxtool/mx.py\", line 3588, in &lt;module&gt;\n    main()\n  File \"/home/taleporos/.jenkins/workspace/MaxineBench/graal/mxtool/mx.py\", line 3577, in main\n    retcode = c(command_args)\n  File \"/home/taleporos/.jenkins/workspace/MaxineBench/maxine/mxmaxine/commands.py\", line 432, in specjvmregression\n    dirfinder('specjvm')\n  File \"/home/taleporos/.jenkins/workspace/MaxineBench/maxine/mxmaxine/commands.py\", line 394, in dirfinder\n    print 'Folder: ', [(folder, os.path.getctime(folder)) for folder in folders]\n  File \"/usr/lib/python2.7/genericpath.py\", line 72, in getctime\n    return os.stat(filename).st_ctime\nOSError: [Errno 2] No such file or directory: 'SPECjvm2008.002'\n</code></pre>\n"}, {"tags": ["python", "keyerror"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 3, "creation_date": 1501716034, "post_id": 45472421, "comment_id": 77905881, "body": "basically it&#39;s saying the environment variables in the OS assigned to <code>&#39;myUsername&#39;</code> or <code>&#39;myPassword&#39;</code> have not yet been set. On <code>cmd</code> terminal, try <code>echo %myUsername%</code> and <code>echo %myPassword%</code>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1501719955, "post_id": 45472421, "comment_id": 77906811, "body": "To correct the error @downshift pointed out, at the <code>cmd</code> prompt you will need to <code>set myUsername=something</code> (and/or <code>set myPassword=somethingelse</code>) which will set them temporarily. To set them permanently on Windows, you can define the environment variable(s) and their values is the Settings | Control Panel | System | Advanced system settings, where there&#39;s an &quot;Environment Variables...&quot; button."}, {"owner": {"reputation": 367, "user_id": 6715660, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206455859106844/picture?type=large", "display_name": "Lasheen Lartey", "link": "https://stackoverflow.com/users/6715660/lasheen-lartey"}, "edited": false, "score": 0, "creation_date": 1501746823, "post_id": 45472421, "comment_id": 77916532, "body": "Thanks for the responses. Sorry, but I&#39;m a complete beginner to python and setting environment variables. I would like to set this variable permanently, so do I need to set as a &#39;user variables for user&#39; or &#39;system variables&#39;. Also  do I just simply add new and type myUsername as variable name and &quot;32rqwefrwaf33f&quot; as variable value. Or does a seperate document need to be made."}, {"owner": {"reputation": 367, "user_id": 6715660, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206455859106844/picture?type=large", "display_name": "Lasheen Lartey", "link": "https://stackoverflow.com/users/6715660/lasheen-lartey"}, "edited": false, "score": 0, "creation_date": 1501760759, "post_id": 45472421, "comment_id": 77926856, "body": "I&#39;ve got it working no worries thanks"}], "owner": {"reputation": 367, "user_id": 6715660, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206455859106844/picture?type=large", "display_name": "Lasheen Lartey", "link": "https://stackoverflow.com/users/6715660/lasheen-lartey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 10446, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1501715748, "creation_date": 1501715748, "question_id": 45472421, "link": "https://stackoverflow.com/questions/45472421/raise-keyerrorkey-from-none", "title": "raise KeyError(key) from None", "body": "<p>I am getting an error message and have no idea how to proceed, the error message is displayed below. I have downloaded all necessary tools for it to run however it seems to be having a problem with the keys. I have inputted them right however to keep my account private I have substituted the account username and password hidden. Thanks in advance</p>\n\n<pre><code>C:\\Users\\User\\Downloads\\real-time-intrinio-python-master\\real-time-intrinio-python-master&gt; python realtime.py AAPL \nUsing Ticker: AAPL \nTraceback (most recent call last):\n  File \"realtime.py\", line 18, in &lt;module&gt;\n     r=requests.get(auth_url, headers={\"Authorization\": \"Basic %s\" % base64.b64encode(os.environ['myUsername'] + \":\" + os.environ['myPassword'])}) \n  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\os.py\", line 669, in __getitem__\n     raise KeyError(key) from None \nKeyError: 'myUsername'\n</code></pre>\n\n<p>This is the code I am using and line 18 is \"r=requests.get(auth_url, headers...\"</p>\n\n<pre><code>import websocket\nimport _thread\nimport time\nimport requests\nimport base64\nimport json\nimport sys\nimport os\nfrom requests.auth import HTTPBasicAuth\n\ntry:\n    print (\"Using Ticker: \" + str(sys.argv[1]))\nexcept:\n    print (\"Please include ticker as first argument\")\n    sys.exit()\n\nauth_url = \"https://realtime.intrinio.com/auth\";\nr=requests.get(auth_url, headers={\"Authorization\": \"Basic %s\" % base64.b64encode(os.environ['7641353c8540cd7c795c96f097185c26'] + \":\" + os.environ['c15d32295cf254ab57d5523c5bf95f80'])})\n\nsocket_target = \"wss://realtime.intrinio.com/socket/websocket?token=%s\" % (r.text)\n\ndef on_message(ws, message):\n    try:\n        result = json.loads(message)\n        print (result[\"payload\"])\n    except:\n        print (message)\n\ndef on_error(ws, error):\n    print (\"###ERROR### \" + error)\n\ndef on_close(ws):\n    print (\"###CONNECTION CLOSED###\")\n\ndef on_open(ws):\n    def run(*args):\n        security = \"iex:securities:\" + str(sys.argv[1]).upper()\n        message = json.dumps({\"topic\": security,\"event\": \"phx_join\",\"payload\": {},\"ref\": \"1\"})\n        ws.send(message)\n    thread.start_new_thread(run, ())\n\n\nwebsocket.enableTrace(True)\nws = websocket.WebSocketApp(socket_target, on_message = on_message, on_error = on_error, on_close = on_close)\nws.on_open = on_open\nws.run_forever()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 23416, "user_id": 3877338, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/300539394aa55b738b51e6769cca9b3e?s=128&d=identicon&r=PG&f=1", "display_name": "JohnE", "link": "https://stackoverflow.com/users/3877338/johne"}, "edited": false, "score": 0, "creation_date": 1501723922, "post_id": 45472410, "comment_id": 77907603, "body": "Works fine for me using pandas 0.20.1.  Not sure why you would be getting that error message"}], "answers": [{"tags": [], "owner": {"reputation": 537, "user_id": 7816681, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/11b33f230693b9a58d7308f78c77223f?s=128&d=identicon&r=PG&f=1", "display_name": "Suresh Raja", "link": "https://stackoverflow.com/users/7816681/suresh-raja"}, "is_accepted": false, "score": 0, "last_activity_date": 1501730129, "last_edit_date": 1501730129, "creation_date": 1501729503, "answer_id": 45474109, "question_id": 45472410, "link": "https://stackoverflow.com/questions/45472410/valueerror-during-combine-concat-operations-of-two-pandas-dataframes-to-glue-a/45474109#45474109", "title": "ValueError during Combine (Concat) operations of two Pandas DataFrames to glue additional columns", "body": "<p>I realize the issue now. I had duplicate indices on both my dataframes (that really did not show in the example above). My index in both data frames was \"Sample_ID\" and I really want those duplicate rows in my data. Therefore, here is what I ended up doing for both the data frames, df1 and df2, one at a time before doing \"concat\":</p>\n\n<pre><code>Sample_ID=df.index.values\ndf=df.reset_index(drop=True)\ndf['Sample_ID']=Sample_ID\n</code></pre>\n\n<p>And then, I did the concat like here:</p>\n\n<pre><code>Merged_df=pd.concat([df1,df2],axis=1)\n</code></pre>\n\n<p>Then it worked!</p>\n"}], "owner": {"reputation": 537, "user_id": 7816681, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/11b33f230693b9a58d7308f78c77223f?s=128&d=identicon&r=PG&f=1", "display_name": "Suresh Raja", "link": "https://stackoverflow.com/users/7816681/suresh-raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501730129, "creation_date": 1501715684, "last_edit_date": 1501716526, "question_id": 45472410, "link": "https://stackoverflow.com/questions/45472410/valueerror-during-combine-concat-operations-of-two-pandas-dataframes-to-glue-a", "title": "ValueError during Combine (Concat) operations of two Pandas DataFrames to glue additional columns", "body": "<p>I have two data frames as shown below (showing only a couple rows. here). When I do the following:</p>\n\n<pre><code>pd.concat([df1,df2],axis=1)\n</code></pre>\n\n<p>I get the following error that is a ValueError as noted below. I have provided the two data frames that I am combining below to be able to replicate my issue. I am currently running Pandas version 0.20.3.</p>\n\n<pre><code>ValueError: Shape of passed values is (100, 41), indices imply (100, 34)\n</code></pre>\n\n<p>I am not sure what the issue is, thanks for reading my post.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>Sample_ID,NaX,MgX,AlX,SiX,PX,SX,ClX,ArX,KX,CaX,ScX,TiX,VX,CrX,MnX,FeX,CoX,NiX,CuX,ZnX,GaX,GeX,AsX,SeX,BrX,RbX,SrX,MoX,AgX,CdX,SnX,SbX,TeX,IX,CsX,BaX,LaX,CeX,SmX,WX,HgX,PbX,BiX,F,Cl,SO4,NO3,PO4,OCX,ECX\r\n87,10.725746036140102,0.0,0.07261398719691106,0.5645407440981668,0.054658528544583966,7.662756030743126,0.6353063752573382,,2.6024853011372926,2.7424322582804304,0.0,0.00681251225338293,0.003432661212944887,0.027867928031861798,0.032911299506265444,0.10065618879804547,0.0,0.023637833214063562,0.011253847761208545,0.040769453175283896,0.010493381277109984,0.0,0.0004964156215643375,0.0,0.029732127121353407,0.019154249568232466,0.012399828504607068,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.1637115347712177,0.0,0.0,0.0,0.0,0.0,0.002429267935314843,0.0,0.5085779643234895,1.9102879673157627,176.34116754164242,1.578544065477313,0.1576303633916417,10.037629488375918,7.740915086053255\r\n88,10.736308070641469,0.0,0.07937368927778717,0.42939951265315196,0.05956987458772049,8.048270290043089,0.9627294447997737,,2.902447080976169,3.482830876826389,0.001267444140164266,0.03691431058228424,0.007488482461470538,0.02910368606852196,0.040325847726226396,0.11190475554200331,0.0,0.029520886431326027,0.013223667195713842,0.05830243044755624,0.010466976190856564,0.0,0.0004911346043136531,0.0,0.03509235963079812,0.022750622315948574,0.01617047482159576,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.008021865203789667,0.0,0.0,0.0,0.0037389602134845846,0.0,0.3782061849227544,0.1518159100550295,0.0,0.42525524770157946,0.0,12.028572991883953,8.35404118885772\r\n286,0.0,0.7250836685189738,0.6268567476562432,19.703475362303653,0.3058765191596428,4.056877451975788,0.8011303169288299,,8.101080462549932,1.5806084631298534,0.0010033932776300437,0.02232814093589382,0.0026352276080915363,0.0038181754722448513,0.12452638677113913,0.16334186356366978,0.0,0.011222161657704439,0.012563540039378285,0.10614844673875728,0.011713296262018091,0.0,0.0011987909159053684,0.0,0.005809118975752885,0.0354356257520926,0.013477156023746694,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0037495222479859533,0.0,0.3746855067556315,0.13810660264668706,0.0,0.40615823582536703,0.0,0.898829136066492,0.25771364183340073</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>Sample_ID,NaU,MgU,AlU,SiU,PU,SU,ClU,ArU,KU,CaU,ScU,TiU,VU,CrU,MnU,FeU,CoU,NiU,CuU,ZnU,GaU,GeU,AsU,SeU,BrU,RbU,SrU,MoU,AgU,CdU,SnU,SbU,TeU,IU,CsU,BaU,LaU,CeU,SmU,WU,HgU,PbU,BiU,FU,ClU,SO4U,NO3U,PO4U,OCU,ECU\r\n87,1.0194198489852335,0.0,0.003858856699020478,0.002418376010244413,0.00010916518701732756,0.007981852744327911,0.00042660280364963403,,0.0037123282280921883,0.0061975832384126685,0.0,0.00018575430466629458,0.00020779857121534524,0.00022244053455793694,0.000448113503393954,0.0006630148474327544,,0.0006727884955266499,0.0003196042031614733,7.580606419322902e-05,0.00035938350870231466,,0.0001103812637594452,,0.0003076902201744425,7.034706777428547e-05,0.00015976237933797543,,,,,,,,,,,0.0,,,,9.1207054999905e-05,,0.0210954298720446,0.47739999604201944,3.333354579661071,0.1111663019433814,0.019313942463642982,1.1891126335398214,1.7667352479080924\r\n88,1.0204237090039288,0.0,0.00421808117718384,0.0018394588717771116,0.00011897423280729031,0.00838342080107218,0.0006464645977167771,,0.004140210215420995,0.007870799433339409,0.00015158306425998205,0.0010065291392382938,0.0004533205753590147,0.0002323042990238375,0.0005490684711033748,0.0007371083219884607,,0.0008402340683632646,0.00037554618710292315,0.00010840659957166428,0.0003584791717403059,,0.00010920699499604687,,0.0003631619028524282,8.355532615705042e-05,0.00020834429537175506,,,,,,,,,,,0.0016572745295978877,,,,0.0001403795542172451,,0.015687706921837238,0.03794030852909965,0.0,0.029947883181016374,0.0,1.4249707189002216,1.9066710933727737\r\n286,0.0,0.11967400354196656,0.03331245746718042,0.08440562108720212,0.0006109031528544552,0.0042258161806979335,0.0005379521638707356,,0.011555826911309693,0.0035719943448043745,0.0001200032592058191,0.0006088133334334059,0.00015952536467147272,3.0476503029256854e-05,0.0016955257397351464,0.001075920736153992,,0.0003194091941452482,0.00035679887344962217,0.0001973707111766714,0.00040116387634712335,,0.0002665590092914262,,6.01170945278662e-05,0.00013014304515176608,0.00017364292677619819,,,,,,,,,,,0.0,,,,0.00014077610663028816,,0.01554167185035046,0.034514216016106464,0.0,0.02860300834674594,0.0,0.10648022845713559,0.05881885666387972</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "git"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8396159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e165d39b817a8a586fb638817a09678?s=128&d=identicon&r=PG&f=1", "display_name": "emillyrock", "link": "https://stackoverflow.com/users/8396159/emillyrock"}, "edited": false, "score": 0, "creation_date": 1501724893, "post_id": 45472728, "comment_id": 77907851, "body": "I figured that might be the issue (if I&#39;m understanding you correctly) so I have been running the code on a new copy of the repo each time. The error only pops up when it gets part way through the commits (i.e. it works fine and makes the appropriate copy up until a specific commit)."}, {"owner": {"reputation": 7791, "user_id": 7200715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7JB53.jpg?s=128&g=1", "display_name": "Arount", "link": "https://stackoverflow.com/users/7200715/arount"}, "reply_to_user": {"reputation": 77, "user_id": 8396159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e165d39b817a8a586fb638817a09678?s=128&d=identicon&r=PG&f=1", "display_name": "emillyrock", "link": "https://stackoverflow.com/users/8396159/emillyrock"}, "edited": false, "score": 0, "creation_date": 1501745984, "post_id": 45472728, "comment_id": 77916013, "body": "Is the specific commit the last one ? It&#39;s the main problem, you list <b>all</b> commits and try to revert to the previous each time - So each time you touch the point where there is only 1 commit left, so you can not revert to the previous"}], "tags": [], "owner": {"reputation": 7791, "user_id": 7200715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7JB53.jpg?s=128&g=1", "display_name": "Arount", "link": "https://stackoverflow.com/users/7200715/arount"}, "is_accepted": false, "score": 0, "last_activity_date": 1501718353, "last_edit_date": 1501718353, "creation_date": 1501718021, "answer_id": 45472728, "question_id": 45472397, "link": "https://stackoverflow.com/questions/45472397/how-to-make-a-copy-of-github-repository-at-each-commit-using-gitpython-package-i/45472728#45472728", "title": "How to make a copy of GitHub repository at each commit using GitPython package in Python", "body": "<p><code>'fatal: Failed to resolve 'HEAD~1' as a valid revision.'</code> means git can not find previous commit, this happend only when any previous commit exists.</p>\n\n<p>This is surelly because you run your script several times.</p>\n\n<p>GitPython interact with your repository in the exact same way you would by command-line, so if you run a script that reset the whole repository to the first commit - your repository would store one single commit.</p>\n\n<p>So, the next time you will run it - nothing will happend except this error.</p>\n\n<p>I advise you to clone an existing repository in a temporary directory first, like:</p>\n\n<pre><code>import git\ngit.Git().clone(\"git://foobar.git\", \"path/to/cloned_repo\")\n</code></pre>\n\n<p>Or from local directory (if you don't need online repos):</p>\n\n<pre><code>git.Git().clone(\"path/to/source_repo/\", \"path/to/cloned_repo\")\n</code></pre>\n\n<hr>\n\n<p><em>ps:</em></p>\n\n<pre><code>commits = list(repo.iter_commits('master'))\nfor c in commits:\n</code></pre>\n\n<p>Would be as well like:</p>\n\n<pre><code>for commit in repo.iter_commits('master'):\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 8396159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e165d39b817a8a586fb638817a09678?s=128&d=identicon&r=PG&f=1", "display_name": "emillyrock", "link": "https://stackoverflow.com/users/8396159/emillyrock"}, "edited": false, "score": 0, "creation_date": 1501770178, "post_id": 45474017, "comment_id": 77934921, "body": "thanks for the comprehensive response! running <code>git archive</code> is so much simpler and fixed the problem. new to python and i had previously received suggestions to use GitPython but running the terminal command is so much simpler. thanks so much!"}], "tags": [], "owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "is_accepted": true, "score": 2, "last_activity_date": 1501728729, "creation_date": 1501728729, "answer_id": 45474017, "question_id": 45472397, "link": "https://stackoverflow.com/questions/45472397/how-to-make-a-copy-of-github-repository-at-each-commit-using-gitpython-package-i/45474017#45474017", "title": "How to make a copy of GitHub repository at each commit using GitPython package in Python", "body": "<p>Before I even start on an answer, I will say: it is not clear to me why you are doing any of this at all.  You could, for instance, use <code>git archive</code> to create a tar or zip file of any given commit.  For instance:</p>\n\n<pre><code>git archive -o foo.tar v2.3.1\n</code></pre>\n\n<p>makes a <code>foo.tar</code> file out of the revision tagged <code>v2.3.1</code>.  To make many tar or zip files out of all the revisions reachable from <code>master</code>, you could write:</p>\n\n<pre><code>git rev-list master | while read hash; do\n    git archive -o /path/to/$hash.zip $hash\ndone\n</code></pre>\n\n<p>and be done with it.</p>\n\n<hr>\n\n<blockquote>\n  <p>Might this error be because of a merge?</p>\n</blockquote>\n\n<p>Yes, it might.</p>\n\n<blockquote>\n  <p>If so, how do I get around it such that I can get all the commits in the master branch of the repo?</p>\n</blockquote>\n\n<p>Beware: the commits in <code>master</code> likely include many commits that are also in other branches.</p>\n\n<p>When you do this:</p>\n\n<blockquote>\n<pre><code>commits = list(repo.iter_commits('master'))\n</code></pre>\n</blockquote>\n\n<p>you get a full list of every commit that is <em>reachable from</em> the name <code>master</code>, starting with the most recent.  Suppose <code>master</code> points to commit in a graph that looks like this one, for instance.  Instead of each actual commit hash ID, I'll use a single uppercase letter to represent the commits:</p>\n\n<pre><code>A--B--C------G   &lt;-- master\n    \\       /\n     D--E--F   &lt;--- develop\n</code></pre>\n\n<p>This repository has seven (count them!) commits.  All seven commits are on, i.e., <em>reachable from</em>, branch <code>master</code>.  Six of the seven commits are on branch <code>develop</code>.  The name <code>master</code> identifies commit <code>G</code>, which is a merge commit.  The name <code>develop</code> identifies commit <code>F</code>, which is not.</p>\n\n<p>When you do <em>this:</em></p>\n\n<blockquote>\n<pre><code>    repo.head.reset('HEAD~1', index = True, working_tree = True)\n</code></pre>\n</blockquote>\n\n<p>you have Python tell Git to resolve the <em>current</em> commit, which is one of these seven, to its <em>first parent</em>, and then <em>change</em> the repository's idea of \"current commit\" to the commit you just found.  Let's say that you start out with <code>HEAD</code> (the current commit) being commit <code>G</code>.  Then <code>HEAD~1</code> is commit <code>C</code>.</p>\n\n<p>Here things get a bit complicated.  The <code>repo.head</code> object represents Git's own <code>HEAD</code>, which is always one of two different items.  In this case, though, it's pretty clearly a symbolic reference, pointing to <code>master</code>.  I have not tested this out but it seems virtually certain that GitPython faithfully reproduces Git's own behavior here, and does the equivalent of <code>git reset</code> with one of <code>--soft</code>, <code>--mixed</code>, or <code>--hard</code> depending on your parameters, and yours are those for <code>--hard</code> (curiously the command shown failing here uses <code>--mixed</code>; either your code doesn't match your posting, or more likely, GitPython uses an extra step).  So what this ends up doing is making the name <code>master</code> point to the newly selected commit <code>C</code>:</p>\n\n<pre><code>A--B--C   &lt;-- master\n \\\n  D--E--F   &lt;-- develop\n</code></pre>\n\n<p>Where did commit <code>G</code> go?  Well, nowhere really, but it's now \"lost\": it is hard to find, and after an expiration period, it will be really removed entirely.  So commit <code>G</code> is effectively <em>gone</em>.  (It could be resurrected, if we know its hash: we could force <code>master</code> to point to it again with another <code>git reset</code> or equivalent.  Your list of commits in variable <code>commits</code> still lists its hash, so that's one of many ways we could find and resurrect it.)</p>\n\n<p>You now do your main loop body code, working with commit <code>C</code>:</p>\n\n<blockquote>\n<pre><code>sha = c.name_rev.split()[0] \nshutil.copytree(repo_path, destination_path)\n</code></pre>\n</blockquote>\n\n<p>You've gone through one of the seven commits in your list, making a copy of commit <code>C</code> while thinking it was commit <code>G</code> (the first commit in <code>repo.iter_commits('master')</code> is commit <code>G</code> since that's the one <code>master</code> points-to).</p>\n\n<p>You are now ready to loop around to work on the second.  The <em>repository</em>, however, now has just six commits, and <code>master</code> points to commit <code>C</code>.  You now do another <code>git reset --hard</code>, erasing commit <code>C</code> from the picture, leaving us with:</p>\n\n<pre><code>A--B   &lt;-- master\n    \\\n     D--E--F   &lt;-- develop\n</code></pre>\n\n<p>Now you do something with commit <code>B</code> (while the <code>c</code> in <code>for c in commits</code> is on the second commit of the seven, listed in some order\u2014it's not clear what order <code>repo.iter_commits</code> uses, but it probably runs <code>git rev-list</code> and hence gets the default order; if so, see the <code>git rev-list</code> documentation).</p>\n\n<p>Now you do another <code>git reset --hard</code>.  This time, commit <code>B</code> is <em>not</em> forgotten: commit <code>D</code> remembers it.  But <code>master</code> winds up pointing to commit <code>A</code>:</p>\n\n<pre><code>A   &lt;-- master\n \\\n  B--D--E--F   &lt;-- develop\n</code></pre>\n\n<p>You do your thing with commit <code>A</code>, while the <code>for c in commits</code> is on the third commit of seven.</p>\n\n<p>Now you ask Git to find <code>A</code>'s first parent commit ... but <code>A</code> doesn't <em>have</em> a first parent, or any parent at all.  Commit <code>A</code> is the first commit ever made; it's a <em>root commit</em>.  At this point, <code>git reset</code> simply fails.  You've iterated over the four commits that are reachable from <code>master</code> by following only the first-parent links.  The other three commits that are reachable from <code>master</code> require, at one point, following the <em>second</em> parent.  You have also removed two of the four commits you visited; two remain only because they're reachable from another name.</p>\n\n<p>Note that you could have the same graph but <em>without</em> the name <code>develop</code> any more:</p>\n\n<pre><code>A--B--C------G   &lt;-- master\n    \\       /\n     D--E--F\n</code></pre>\n\n<p>In this case, the first <code>git reset</code> that wipes out <code>G</code> also wipes out access to the <code>D-E-F</code> chain, because <code>G</code> was the <em>key</em> to that access: it's now <code>G^2</code>, which is the <em>second</em> parent of commit <code>G</code>, that finds <code>F</code>.  It's <code>F</code> that finds <code>E</code>, and <code>E</code> that finds <code>D</code>; so losing <code>G</code> loses all of these, and this winds up leaving just:</p>\n\n<pre><code>A--B--C   &lt;-- master\n</code></pre>\n\n<p>visible.  (As before, all the \"erased\" commits stick around for a grace period, and can be resurrected as long as you can find them again.)</p>\n\n<blockquote>\n  <p>... how do I get around it</p>\n</blockquote>\n\n<p>Use a completely different algorithm, and/or choose your commits wisely.  Just because there are seven (or whatever other number) of commits that are <em>reachable</em> from some branch name, does not mean that all seven (or whatever) are linked as <em>first parents</em>.</p>\n\n<p>Note that even in a completely linear setup, such as:</p>\n\n<pre><code>A--B   &lt;-- master\n</code></pre>\n\n<p>you will have a list of two commits (in the order <code>B</code> then <code>A</code>), but you can only run <code>git reset HEAD~1</code> <em>once</em>, to step back from <code>B</code> to <code>A</code>.  Once you are on <code>A</code>, you cannot step back again.  You must step back one fewer times than you do things with commits, in this situation.  You should also do your thing, whatever it is, with the commit <em>first</em>.</p>\n\n<p>It's not immediately obvious to me how GitPython deals with a \"detached HEAD\", though if you want to access files directly from Python code there's not that much point to using a detached HEAD.  But if you're going to run <code>shutils.copytree</code> you might as well just write this whole thing in shell script, which is far simpler: Git is full of shell scripts, and is designed to work well with them, and requires a shell interpreter to exist in order for Git to function at all, so that if you have Git, you have a shell interpreter.</p>\n"}], "owner": {"reputation": 77, "user_id": 8396159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e165d39b817a8a586fb638817a09678?s=128&d=identicon&r=PG&f=1", "display_name": "emillyrock", "link": "https://stackoverflow.com/users/8396159/emillyrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 45474017, "answer_count": 2, "score": 1, "last_activity_date": 1501728729, "creation_date": 1501715581, "question_id": 45472397, "link": "https://stackoverflow.com/questions/45472397/how-to-make-a-copy-of-github-repository-at-each-commit-using-gitpython-package-i", "title": "How to make a copy of GitHub repository at each commit using GitPython package in Python", "body": "<p>I've been trying to make a copy of a GitHub repository at each commit in its history using the GitPython package in Python and am running into this error when it gets partway through my code. </p>\n\n<pre><code>git.exc.GitCommandError: Cmd('git') failed due to: exit code(128)\ncmdline: git reset --mixed HEAD~1 --\nstderr: 'fatal: Failed to resolve 'HEAD~1' as a valid revision.'\n</code></pre>\n\n<p>This is the code that I've been running:</p>\n\n<pre><code>from git import *\nimport os, shutil\n\nrepo = Repo(repo_path)\ncommits = list(repo.iter_commits('master'))\nfor c in commits:\n    # reset to previous commit\n    repo.head.reset('HEAD~1', index = True, working_tree = True)\n    # unique SHA key\n    sha = c.name_rev.split()[0] \n    shutil.copytree(repo_path, destination_path)\n</code></pre>\n\n<p>Might this error be because of a merge? If so, how do I get around it such that I can get all the commits in the master branch of the repo?</p>\n"}, {"tags": ["python", "json", "google-apps-script", "google-sheets"], "owner": {"reputation": 49, "user_id": 3100151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb96451232d61bbabd93f46aec493dea?s=128&d=identicon&r=PG&f=1", "display_name": "user3100151", "link": "https://stackoverflow.com/users/3100151/user3100151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501715435, "creation_date": 1501715435, "question_id": 45472384, "link": "https://stackoverflow.com/questions/45472384/parse-json-to-google-spreadsheet-python", "title": "Parse JSON to Google Spreadsheet Python", "body": "<p>I am trying to call the Pairs Info from ShapeShift API to Google SpreadSheet. </p>\n\n<p>I call: <a href=\"https://shapeshift.io/marketinfo/\" rel=\"nofollow noreferrer\">https://shapeshift.io/marketinfo/</a></p>\n\n<p>which is supposed to return a JSON similar to this:</p>\n\n<pre><code>[\n{\n    \"rate\": \"787.32227488\",\n    \"limit\": 0.74761076,\n    \"pair\": \"BTC_ICN\",\n    \"maxLimit\": 0.93451345,\n    \"min\": 0.0004924,\n    \"minerFee\": 0.2\n},\n{\n    \"rate\": \"0.00122699\",\n    \"limit\": 607.31986909,\n    \"pair\": \"ICN_BTC\",\n    \"maxLimit\": 759.14983636,\n    \"min\": 3.15955766,\n    \"minerFee\": 0.002\n},\n{\n    \"rate\": \"57.83625391\",\n    \"limit\": 0.74761076,\n    \"pair\": \"BTC_MLN\",\n    \"maxLimit\": 0.93451345,\n    \"min\": 0.000102,\n    \"minerFee\": 0.003\n}\n</code></pre>\n\n<p>I want the data to populate my spreadsheet this way:</p>\n\n<p>rate   limit   pair   maxLimit   min   minerFee\n...     ...     ...    ....       ...    ...</p>\n\n<p>Here what I have so far:</p>\n\n<p>class Data(ShapeShiftAPI):\n    def <strong>init</strong>(self):</p>\n\n<pre><code>    ShapeShiftAPI.__init__(self)\n\n    scope = ['https://spreadsheets.google.com/feeds']\n    credentials = ServiceAccountCredentials.from_json_keyfile_name('config.json', scope)\n    gc = gspread.authorize(credentials)\n\n    wks = gc.open(\"data_test\").sheet1\n\n    cell_list = wks.range('A1')\n    data = self.return_shapeshift_pairs_info()\n    obj = json.loads(data)\n\n    for cell in cell_list:\n        cell.value = data\n    wks.update_cells(cell_list)\n\n if __name__ == '__main__':\n     app = Data()\n</code></pre>\n\n<p>If I do: <strong>print(self.return_shapeshift_pairs_info())</strong> </p>\n\n<p>It returns all available ShapeShift coins symbols</p>\n\n<p>But I can update it to my google spreadsheet. I need help how to get get the data to the right cell.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 4, "creation_date": 1501715547, "post_id": 45472380, "comment_id": 77905760, "body": "<code>product =  data[i][j]</code> maybe. But you&#39;ve hard-coded the ranges for <code>i</code> and <code>j</code>."}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 3, "creation_date": 1501715581, "post_id": 45472380, "comment_id": 77905771, "body": "<code>i</code> is going to be an integer (from 0 to 19). So, what would <code>i[j]</code> be?"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1501715687, "post_id": 45472380, "comment_id": 77905792, "body": "might be <code>data[i][j]</code> and <code>data[i][j+k]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5641111, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-niXU--sKEj8/AAAAAAAAAAI/AAAAAAAABH0/bO05ZbwaoF4/photo.jpg?sz=128", "display_name": "skiller185", "link": "https://stackoverflow.com/users/5641111/skiller185"}, "edited": false, "score": 0, "creation_date": 1501716314, "post_id": 45472409, "comment_id": 77905951, "body": "Thank you so much! That was a big help."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 1, "last_activity_date": 1501715683, "creation_date": 1501715683, "answer_id": 45472409, "question_id": 45472380, "link": "https://stackoverflow.com/questions/45472380/cant-resolve-error-int-object-is-not-subscriptable/45472409#45472409", "title": "cant resolve Error: &#39;int&#39; object is not subscriptable", "body": "<p>You need to apply the subscriptions sequentially not nested. So you should use:</p>\n\n<pre><code>data[i][j]\ndata[i][j+k]\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>data[i[j]]\ndata[i[j+k]]\n</code></pre>\n\n<p>Leading to the following (working) code:</p>\n\n<pre><code>maxProduct = 0\nproduct = 0\nfor i in range(20):\n    for j in range(16):\n        product = data[i][j]\n        for k in range(1,4):\n            product *= data[i][j+k]\n        if(product &gt; maxProduct):\n            maxProduct = product\nprint(maxProduct)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "is_accepted": false, "score": 0, "last_activity_date": 1501716348, "creation_date": 1501716348, "answer_id": 45472493, "question_id": 45472380, "link": "https://stackoverflow.com/questions/45472380/cant-resolve-error-int-object-is-not-subscriptable/45472493#45472493", "title": "cant resolve Error: &#39;int&#39; object is not subscriptable", "body": "<p>If you are in a 2D data structure, like your <code>data</code> and want to access it via <code>for</code>-loops, the right way would be</p>\n\n<pre><code>for i in range(height):\n    for j in range(width):\n        some operation using data[i][j]\n</code></pre>\n\n<p>In your case, you can determine the height and width with <code>len</code>.\nAlso notice the <code>data[i][j]</code>. If you type <code>data[i[j]]</code>, Python will try to use the <code>j</code>th element of <code>i</code> as the index of <code>data</code>.</p>\n\n<p>This will make your code run, but not solve the actual problem, because you'll have to check diagonals and verticals as well iirc.</p>\n"}], "owner": {"reputation": 13, "user_id": 5641111, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-niXU--sKEj8/AAAAAAAAAAI/AAAAAAAABH0/bO05ZbwaoF4/photo.jpg?sz=128", "display_name": "skiller185", "link": "https://stackoverflow.com/users/5641111/skiller185"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 1, "accepted_answer_id": 45472409, "answer_count": 2, "score": 0, "last_activity_date": 1501716348, "creation_date": 1501715397, "question_id": 45472380, "link": "https://stackoverflow.com/questions/45472380/cant-resolve-error-int-object-is-not-subscriptable", "title": "cant resolve Error: &#39;int&#39; object is not subscriptable", "body": "<p>I am trying to solve Project Euler's question 11 using Python 3.6.2. Whenever I try to run the code I have written, and it throws the error:</p>\n\n<pre><code>Traceback (most recent call last):\n    File \"E:/Euler11.py\", line 6, in &lt;module&gt;\n        product = data[i[j]]\nTypeError: 'int' object is not subscriptable\n</code></pre>\n\n<p>the code being:</p>\n\n<pre><code>data = list([[8,2,22,97,38,15,00,40,00,75,4,5,7,78,52,12,50,77,91,8],[49,49,99,40,17,81,18,57,60,87,17,40,98,43,69,48,4,56,62,00],[81,49,31,73,55,79,14,29,93,71,40,67,53,88,30,3,49,13,36,65],[52,70,95,23,4,60,11,42,69,24,68,56,1,32,56,74,37,2,36,91],[22,31,16,71,51,67,63,89,41,92,36,54,22,40,40,28,66,33,13,80],[24,47,32,60,99,3,45,2,44,75,33,53,78,36,84,20,35,17,12,50],[32,98,81,28,64,23,67,10,26,38,40,67,59,54,70,66,18,38,64,70],[67,26,20,68,2,62,12,20,95,63,94,39,63,8,40,91,66,49,94,21],[24,55,58,5,66,73,99,26,97,17,78,78,96,83,14,88,34,89,63,72],[21,36,23,9,75,00,76,44,20,45,35,14,00,61,33,97,34,31,33,95],[78,17,53,28,22,75,31,67,15,94,3,80,4,62,16,14,9,53,56,92],[16,39,5,42,96,35,31,47,55,58,88,24,00,17,54,25,36,29,85,57],[86,56,00,48,35,71,89,7,5,44,44,37,44,60,21,58,51,54,17,58],[19,80,81,68,5,94,47,69,28,73,92,13,86,52,17,77,4,89,55,40],[4,52,8,83,97,35,99,16,7,97,59,32,16,26,26,79,33,27,98,66],[88,36,68,87,58,62,20,75,3,46,33,67,46,55,12,32,63,93,53,69],[4,42,16,73,38,25,39,11,24,94,72,18,8,46,29,32,40,62,76,36],[20,69,36,41,72,30,23,88,34,62,99,69,82,67,59,85,74,4,36,16],[20,73,35,29,78,31,90,1,74,31,49,71,48,86,81,16,23,57,5,54],[1,70,54,71,83,51,54,69,16,92,33,48,61,43,52,1,89,19,67,48]])\nmaxProduct = 0\nproduct = 0\nfor i in range(20):\n    for j in range(16):\n        product = data[i[j]]\n        for k in range(1,4):\n            product *= data[i[j+k]]\n        if(product &gt; maxProduct):\n            maxProduct = product\nprint(maxProduct)\n</code></pre>\n\n<p>I'd greatly appreciate any help in explaining to me what I've done wrong.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501715766, "post_id": 45472366, "comment_id": 77905812, "body": "check your <code>dtypes</code>..."}, {"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501715809, "post_id": 45472366, "comment_id": 77905829, "body": "I just posted the type in response to piRSquared. They&#39;re Decimal"}], "answers": [{"comments": [{"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501715778, "post_id": 45472415, "comment_id": 77905820, "body": "They&#39;re Decimals. <code>In [251]: type(df.transaction_amount.iloc[0]) Out[251]: decimal.Decimal</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 2, "creation_date": 1501715878, "post_id": 45472415, "comment_id": 77905843, "body": "@CoryMadden Ok, so that implies that your <i>columns</i> are <code>dtype=object</code>. Are you using <code>decimal.Decimal</code> because you need the precision?"}, {"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501715938, "post_id": 45472415, "comment_id": 77905859, "body": "@juanpa.arrivillaga Yes, it&#39;s money. I&#39;m able to  get the correct results when I call it in other manners, but I&#39;d like to do it in a simpler manner."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501716068, "post_id": 45472415, "comment_id": 77905886, "body": "@CoryMadden well, right off the bat I hope you realize your efficiency is going to be screwed. But, basically, <code>numpy</code> vectorized <code>.sum</code> isn&#39;t going to handle <code>decimal.Decimal</code> objects. Write your own <code>_sum</code> function, heck, or maybe even the built-in <code>sum</code> will do."}, {"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501716289, "post_id": 45472415, "comment_id": 77905942, "body": "Ha! It&#39;s the transaction_amount column making it so damn slow. I can&#39;t believe I didn&#39;t make that connection. Well, I guess I already have the solution to my problem in my post..."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1501715921, "last_edit_date": 1501715921, "creation_date": 1501715711, "answer_id": 45472415, "question_id": 45472366, "link": "https://stackoverflow.com/questions/45472366/how-can-i-sum-two-different-columns-at-once-where-one-contains-decimal-objects-i/45472415#45472415", "title": "How can I sum two different columns at once where one contains Decimal objects in pandas?", "body": "<p>When I run </p>\n\n<pre><code>df.groupby(['pk', 'name']).sum()\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>              price  quantity  transaction_amount\npk name                                          \n48 Product 1    2.0         5                 5.0\n63 Product 2    3.0         6                 6.0\n</code></pre>\n\n<p>Which indicates to me that your <code>price</code> and <code>transaction_amount</code> are objects.</p>\n"}, {"comments": [{"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501715991, "post_id": 45472453, "comment_id": 77905868, "body": "I&#39;ve tried that, too, but it gives me the same result."}], "tags": [], "owner": {"reputation": 372, "user_id": 7817870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a53ac1ae984436a6857021f9e15380?s=128&d=identicon&r=PG&f=1", "display_name": "Wonjin", "link": "https://stackoverflow.com/users/7817870/wonjin"}, "is_accepted": false, "score": 1, "last_activity_date": 1501715967, "creation_date": 1501715967, "answer_id": 45472453, "question_id": 45472366, "link": "https://stackoverflow.com/questions/45472366/how-can-i-sum-two-different-columns-at-once-where-one-contains-decimal-objects-i/45472453#45472453", "title": "How can I sum two different columns at once where one contains Decimal objects in pandas?", "body": "<p>You can specify the columns to sum like this.</p>\n\n<pre><code>df.groupby(['pk','name'])['quantity','transaction_amount'].sum()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501716837, "post_id": 45472533, "comment_id": 77906075, "body": "Thanks, this was indeed the problem. I wasn&#39;t making the connection to the Decimal type being relevant at all."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 2, "creation_date": 1501716901, "post_id": 45472533, "comment_id": 77906087, "body": "@CoryMadden <code>pandas</code> / <code>numpy</code> is built around <i>primitive arrays</i>, with fixed-size numeric types. While it works with <code>objects</code>, don&#39;t expect the built-in routines to play nice. And definitely don&#39;t expect it to be fast. Although, at least you keep the relative expressiveness and ease of <i>writing</i> pandas code."}, {"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501717233, "post_id": 45472533, "comment_id": 77906156, "body": "I thought numpy was good for financial data, thus maintaining decimal places. I&#39;d be ok casting it as a float, but it loses its accuracy."}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1501717852, "post_id": 45472533, "comment_id": 77906290, "body": "As far as I know, <code>sum</code>, <code>np.sum</code> and <code>&#39;sum&#39;</code> are treated equally. The thing that makes this work is that you explicitly say that you want to take the sum of that column whereas groupby.sum excludes columns of object dtype. <code>df.groupby([&#39;pk&#39;, &#39;name&#39;]).sum(numeric_only=False)</code> should also work in this case."}, {"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1501875723, "post_id": 45472533, "comment_id": 77990065, "body": "@ayhan I&#39;m glad I looked back at this question. SO didn&#39;t alert me to it. This fixes it perfectly. Since I was thinking of Decimals as &quot;numeric&quot; I didn&#39;t try that."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 2, "last_activity_date": 1501717139, "last_edit_date": 1501717139, "creation_date": 1501716599, "answer_id": 45472533, "question_id": 45472366, "link": "https://stackoverflow.com/questions/45472366/how-can-i-sum-two-different-columns-at-once-where-one-contains-decimal-objects-i/45472533#45472533", "title": "How can I sum two different columns at once where one contains Decimal objects in pandas?", "body": "<p>Since you are using <code>decimal.Decimal</code> objects, the <code>numpy.sum</code> won't handle your objects. So, simply defer to the built-in <code>sum</code>:</p>\n\n<pre><code>In [18]: df\nOut[18]:\n   pk price       name  quantity transaction_amount\n0  48   1.0  Product 1         1                1.0\n1  48   1.0  Product 1         4                4.0\n2  63   1.0  Product 2         2                2.0\n3  63   1.0  Product 2         3                3.0\n4  63   1.0  Product 2         1                1.0\n\nIn [19]: df.groupby(['pk', 'name']).aggregate({\n    ...:     \"quantity\":np.sum,\n    ...:     \"price\":sum,\n    ...:     \"transaction_amount\":sum\n    ...: })\nOut[19]:\n             price  quantity transaction_amount\npk name\n48 Product 1   2.0         5                5.0\n63 Product 2   3.0         6                6.0\n</code></pre>\n\n<p>Note, this will be slow, but it's the price you have to pay for using <code>object</code> dtype columns.</p>\n"}], "owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 45472533, "answer_count": 3, "score": 2, "last_activity_date": 1501717256, "creation_date": 1501715299, "last_edit_date": 1501717256, "question_id": 45472366, "link": "https://stackoverflow.com/questions/45472366/how-can-i-sum-two-different-columns-at-once-where-one-contains-decimal-objects-i", "title": "How can I sum two different columns at once where one contains Decimal objects in pandas?", "body": "<p>I have a dataframe that I want to aggregate the sums for for two different columns. Here is a <code>df.head(5)</code> of my original dataframe.</p>\n\n<pre><code>   price           name  quantity transaction_amount\npk                                                  \n48  1.00      Product 1         1               1.00\n48  1.00      Product 1         4               4.00\n63  1.00      Product 2         2               2.00\n63  1.00      Product 2         3               3.00\n63  1.00      Product 2         1               1.00\n</code></pre>\n\n<p>I want to group them by <code>pk</code>, which is the database primary key of the products and get the sums of the <code>transaction_amount</code> column and the <code>quantity</code> amount columns. But when I do <code>df.groupby(['pk', 'name']).sum()</code> I get this:</p>\n\n<pre><code>                          quantity\npk name                           \n48 Product 1                   543\n63 Product 2                 17234\n38 Product 3                  4014\n39 Product 4                 11053\n40 Product 5                 13406\n</code></pre>\n\n<p>Where's the <code>transaction_amount</code> column? <code>transaction_amount</code> is the <code>quantity</code> in the transaction and <code>price</code> of that item in that transaction. This can change per transaction if there's a discount applied or whatever. We need to record what was charged for the item at the time of purchase. So my desired outcome will have the <code>quantity</code>(total quantity), <code>transaction_amounts</code>(total amount), <code>name</code>, and <code>pk</code> like this:</p>\n\n<pre><code>                          quantity  transaction_amount\npk name                           \n48 Product 1                   543              543.00\n63 Product 2                 17234           89,000.93\n38 Product 3                  4014            2,000.32\n39 Product 4                 11053           25,000.36\n40 Product 5                 13406            6,000.12\n</code></pre>\n\n<p>I read the <a href=\"http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.sum.html#pandas.DataFrame.sum\" rel=\"nofollow noreferrer\">documentation for <code>.sum()</code></a> and none of the options work well for me. If I drop the <code>price</code> column and run <code>.sum(level=0)</code> it takes a long time. Look at the times of these two different methods(the faster one only sums the <code>quantity</code> column).</p>\n\n<pre><code>In [237]: %%timeit\n     ...: df.groupby(['pk', 'name']).sum(level=0)\n     ...: \n1 loop, best of 3: 3.04 s per loop\n\nIn [239]: %%timeit\n     ...: df.groupby(['pk', 'name']).sum()\n     ...: \n     ...: \n10 loops, best of 3: 42.4 ms per loop\n</code></pre>\n\n<p>The results are similar for <code>.sum(axis=1)</code>, too.</p>\n"}, {"tags": ["python", "unit-testing", "pydev"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1501715053, "post_id": 45472309, "comment_id": 77905641, "body": "What is the file name?"}, {"owner": {"reputation": 5185, "user_id": 679240, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c6c18851c01fa33057f636caea371047?s=128&d=identicon&r=PG", "display_name": "Haroldo_OK", "link": "https://stackoverflow.com/users/679240/haroldo-ok"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1501715738, "post_id": 45472309, "comment_id": 77905803, "body": "The filename is &quot;test.py&quot;"}], "owner": {"reputation": 5185, "user_id": 679240, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c6c18851c01fa33057f636caea371047?s=128&d=identicon&r=PG", "display_name": "Haroldo_OK", "link": "https://stackoverflow.com/users/679240/haroldo-ok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501716875, "creation_date": 1501714890, "last_edit_date": 1501716875, "question_id": 45472309, "link": "https://stackoverflow.com/questions/45472309/unit-test-runs-okay-when-invoked-manually-but-are-completely-ignored-by-pydev", "title": "Unit test runs okay when invoked manually, but are completely ignored by PyDev", "body": "<p>I have a made a simple unit test like this:</p>\n\n<pre><code>import unittest\n\nclass TestParsing(unittest.TestCase):\n\n    def test_vgm_1_01(self):\n        self.assertEqual('foo'.upper(), 'FOO')\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>If I run it through PyDev's <code>Run As -&gt; Python Run</code>, that is, if I run it as a normal program, relying on direct invocation of <code>unittest.main()</code>, it works exactly as expected:</p>\n\n<pre><code>.\n----------------------------------------------------------------------\nRan 1 test in 0.001s\n\nOK\n</code></pre>\n\n<p>On the other hand, if it is executed via <code>Run As -&gt; Python unit-test</code>, it simply does not work:</p>\n\n<pre><code>Finding files... done.\nImporting test modules ... done.\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>Does anyone have an idea of why wouldn't this be working as expected?</p>\n\n<p>The current PyDev project is available at <a href=\"https://github.com/haroldo-ok/vgmparse/tree/support-vgm-1.01\" rel=\"nofollow noreferrer\">https://github.com/haroldo-ok/vgmparse/tree/support-vgm-1.01</a></p>\n"}, {"tags": ["python", "numpy", "tensorflow", "object-detection"], "comments": [{"owner": {"reputation": 1542, "user_id": 8229032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7d1iIrAY034/AAAAAAAAAAI/AAAAAAAAAA8/B5pncLBxNS4/photo.jpg?sz=128", "display_name": "Jonathan Huang", "link": "https://stackoverflow.com/users/8229032/jonathan-huang"}, "edited": false, "score": 0, "creation_date": 1501716587, "post_id": 45472300, "comment_id": 77906015, "body": "Can you say what error you get when you write <code>num_detections.size</code>?"}, {"owner": {"reputation": 1311, "user_id": 633621, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fc080f856247bf207521247b697982b?s=128&d=identicon&r=PG", "display_name": "alfredo138923", "link": "https://stackoverflow.com/users/633621/alfredo138923"}, "reply_to_user": {"reputation": 1542, "user_id": 8229032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7d1iIrAY034/AAAAAAAAAAI/AAAAAAAAAA8/B5pncLBxNS4/photo.jpg?sz=128", "display_name": "Jonathan Huang", "link": "https://stackoverflow.com/users/8229032/jonathan-huang"}, "edited": false, "score": 0, "creation_date": 1501716706, "post_id": 45472300, "comment_id": 77906041, "body": "It returns  <code>1</code> but the detected objects are more than one."}, {"owner": {"reputation": 1542, "user_id": 8229032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7d1iIrAY034/AAAAAAAAAAI/AAAAAAAAAA8/B5pncLBxNS4/photo.jpg?sz=128", "display_name": "Jonathan Huang", "link": "https://stackoverflow.com/users/8229032/jonathan-huang"}, "edited": false, "score": 0, "creation_date": 1501717904, "post_id": 45472300, "comment_id": 77906304, "body": "Try num_detections[0]?"}, {"owner": {"reputation": 1311, "user_id": 633621, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fc080f856247bf207521247b697982b?s=128&d=identicon&r=PG", "display_name": "alfredo138923", "link": "https://stackoverflow.com/users/633621/alfredo138923"}, "reply_to_user": {"reputation": 1542, "user_id": 8229032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7d1iIrAY034/AAAAAAAAAAI/AAAAAAAAAA8/B5pncLBxNS4/photo.jpg?sz=128", "display_name": "Jonathan Huang", "link": "https://stackoverflow.com/users/8229032/jonathan-huang"}, "edited": false, "score": 0, "creation_date": 1501770304, "post_id": 45472300, "comment_id": 77935029, "body": "num_detections always return <code>1</code> as size. To get the number of objects detected I used boxes.shape[0] with a condition about score precision. Thanks for you help"}, {"owner": {"reputation": 5359, "user_id": 582917, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/98a347823cd1db90af884b227a29c29e?s=128&d=identicon&r=PG", "display_name": "CMCDragonkai", "link": "https://stackoverflow.com/users/582917/cmcdragonkai"}, "edited": false, "score": 0, "creation_date": 1520465357, "post_id": 45472300, "comment_id": 85331598, "body": "It appears that you actually need to count the number of bounding boxes after passing it through a non-maximum suppression function. I don&#39;t know what the <code>num_detections</code> is supposed to represent."}, {"owner": {"reputation": 869, "user_id": 5252807, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c450edfed672155562bf4ee91a8c71bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ozlu", "link": "https://stackoverflow.com/users/5252807/ozlu"}, "edited": false, "score": 0, "creation_date": 1530823274, "post_id": 45472300, "comment_id": 89380794, "body": "You can find source code of the TensorFlow Object Counting API that is an open source framework built on top of TensorFlow that makes it easy to develop object counting systems: <a href=\"https://github.com/ahmetozlu/tensorflow_object_counting_api\" rel=\"nofollow noreferrer\">github.com/ahmetozlu/tensorflow_object_counting_api</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7175314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6cecc45d8d806f5ddb82ef8a01b8bc?s=128&d=identicon&r=PG&f=1", "display_name": "KLH", "link": "https://stackoverflow.com/users/7175314/klh"}, "is_accepted": false, "score": 1, "last_activity_date": 1521056454, "creation_date": 1521056454, "answer_id": 49286421, "question_id": 45472300, "link": "https://stackoverflow.com/questions/45472300/count-number-of-objects-detected-using-tensorflow-object-detection-api/49286421#49286421", "title": "Count number of objects detected using tensorflow object detection api", "body": "<p>I've been doing a similar process but a different workflow.  I rewrote the tutorial code in the object_detection notebook like below.  It captures the output of the detection boxes, class, and probability and disregards any of the image processing past the inference.  For my situation, I dump the results into a JSON file and import them into another program to complete my analysis (determine numbers of detections) but if python is your thing I'd think you could process \"myResults\" to get your answer.</p>\n\n<pre><code>myResults = collections.defaultdict(list)\nfor image_path in TEST_IMAGE_PATHS:\n  if os.path.exists(image_path):  \n    image = Image.open(image_path)\n    # the array based representation of the image will be used later in order to prepare the\n    # result image with boxes and labels on it.\n    image_np = load_image_into_numpy_array(image)\n    # Expand dimensions since the model expects images to have shape: [1, None, None, 3]\n    image_np_expanded = np.expand_dims(image_np, axis=0)\n    # Actual detection.\n    output_dict = run_inference_for_single_image(image_np, detection_graph)\n    # Visualization of the results of a detection.\n    op=get_scores(\n      output_dict['detection_boxes'],\n      output_dict['detection_classes'],\n      output_dict['detection_scores'],\n      category_index,\n      min_score_thresh=.2)\n    myResults[image_path].append(op)  \n</code></pre>\n"}], "owner": {"reputation": 1311, "user_id": 633621, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fc080f856247bf207521247b697982b?s=128&d=identicon&r=PG", "display_name": "alfredo138923", "link": "https://stackoverflow.com/users/633621/alfredo138923"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2228, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1521056454, "creation_date": 1501714860, "last_edit_date": 1501716797, "question_id": 45472300, "link": "https://stackoverflow.com/questions/45472300/count-number-of-objects-detected-using-tensorflow-object-detection-api", "title": "Count number of objects detected using tensorflow object detection api", "body": "<p>I'm a newbie to tensorflow. I'm confused about how to count the number of objects detected using the <strong>TensorFlow Object Detection API</strong>?</p>\n\n<pre><code># Score is shown on the result image, together with the class label.\n\nscores = detection_graph.get_tensor_by_name('detection_scores:0')\nclasses = detection_graph.get_tensor_by_name('detection_classes:0')\nnum_detections = detection_graph.get_tensor_by_name('num_detections:0')\n\nif image_np_expanded is not None:\n    # Actual detection.\n    (boxes, scores, classes, num_detections) = sess.run(\n        [boxes, scores, classes, num_detections],\n        feed_dict={image_tensor: image_np_expanded}\n    )\n</code></pre>\n\n<p>As <strong>num_detections</strong> is a <em>numpy.ndarray</em> I have tried to retrieve it's lenght but does not work.</p>\n\n<pre><code>num_detections.size\n&gt;&gt; 1\n</code></pre>\n\n<p>Neither using the tensor lenght:</p>\n\n<pre><code>tf.size(num_detections, out_type=tf.int32)\n&gt;&gt; 1\n</code></pre>\n\n<p>In my case the number of detected objects are more than one.</p>\n"}, {"tags": ["python", "xml", "python-3.x", "csv", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8407621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5eba9a0be1782732d191a5c1f2b1dcfe?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/8407621/saeed"}, "edited": false, "score": 0, "creation_date": 1501777452, "post_id": 45472420, "comment_id": 77940624, "body": "Worked perfectly for me. Thanks."}], "tags": [], "owner": {"reputation": 1010, "user_id": 8396779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/441f976dff6c2f09bf7978386959717a?s=128&d=identicon&r=PG&f=1", "display_name": "Unatiel", "link": "https://stackoverflow.com/users/8396779/unatiel"}, "is_accepted": true, "score": 2, "last_activity_date": 1501716167, "last_edit_date": 1501716167, "creation_date": 1501715740, "answer_id": 45472420, "question_id": 45472242, "link": "https://stackoverflow.com/questions/45472242/how-can-i-parse-nested-xml-with-the-same-name-of-childs-to-csv/45472420#45472420", "title": "How can I parse nested xml (with the same name of childs) to CSV?", "body": "<p>Since you have a <code>&lt;sensorEvents&gt;</code> tag containing 3 <code>&lt;sensorEvents&gt;</code>, the first <code>&lt;sensorEvents&gt;</code> shadows the children <code>&lt;sensorEvents&gt;</code> in <code>&lt;sensorEvents&gt;</code>.</p>\n\n<p>This means </p>\n\n<pre><code>    for Sensorevents in Item.findall('sensorEvents'):\n</code></pre>\n\n<p>Will loop only once per</p>\n\n<pre><code>&lt;sensorEvents&gt;\n    &lt;sensorEvents&gt;\n        &lt;avgSped&gt;48.55647532226298&lt;/avgSped&gt;\n        &lt;completed&gt;true&lt;/completed&gt;\n    &lt;/sensorEvents&gt;\n    &lt;sensorEvents&gt;\n        &lt;avgSped&gt;39.53368357145088&lt;/avgSped&gt;\n        &lt;completed&gt;true&lt;/completed&gt;\n    &lt;/sensorEvents&gt;\n    &lt;sensorEvents&gt;\n        &lt;avgSped&gt;41.41160105233052&lt;/avgSped&gt;\n        &lt;completed&gt;true&lt;/completed&gt;\n    &lt;/sensorEvents&gt;\n&lt;/sensorEvents&gt;\n</code></pre>\n\n<p>Then </p>\n\n<pre><code>    avgSped_ = Sensorevents.find('sensorEvents').find('avgSped').text\n    row.append(avgSped_)\n\n    completed_ = Sensorevents.find('sensorEvents').find('completed').text\n</code></pre>\n\n<p>Gets the data for <strong>the first tag only</strong>.</p>\n\n<p>You should try</p>\n\n<pre><code>for Item in root.findall('item'):\n    for root_Sensorevents in Item.findall('sensorEvents'):\n        for Sensorevents in root_Sensorevents.findall('sensorEvents'):\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": false, "score": 0, "last_activity_date": 1501785270, "creation_date": 1501785270, "answer_id": 45492038, "question_id": 45472242, "link": "https://stackoverflow.com/questions/45472242/how-can-i-parse-nested-xml-with-the-same-name-of-childs-to-csv/45492038#45492038", "title": "How can I parse nested xml (with the same name of childs) to CSV?", "body": "<p>You could also consider using the lxml library because with it you can search by xpath expressions which often make for simpler code.</p>\n\n<p>Here, the xpath expression <code>.//sensorEvents/sensorEvents</code> says look for <code>sensorEvents</code> elements anywhere in the document and then look for the <code>sensorEvents</code> elements <em>immediately under</em> these.</p>\n\n<p>Once you have these it's often a simple matter to write expressions for attributes of the elements, as shown.</p>\n\n<pre><code>&gt;&gt;&gt; from lxml import etree\n&gt;&gt;&gt; tree = etree.parse('temp2.xml')\n&gt;&gt;&gt; inner_sensorEvents = tree.xpath('.//sensorEvents/sensorEvents')\n&gt;&gt;&gt; for inner_sensorEvent in inner_sensorEvents:\n...     inner_sensorEvent.find('avgSped').text, inner_sensorEvent.find('completed').text\n... \n('48.55647532226298', 'true')\n('39.53368357145088', 'true')\n('41.41160105233052', 'true')\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8407621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5eba9a0be1782732d191a5c1f2b1dcfe?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/8407621/saeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 1, "accepted_answer_id": 45472420, "answer_count": 2, "score": 1, "last_activity_date": 1501785270, "creation_date": 1501714426, "last_edit_date": 1501714597, "question_id": 45472242, "link": "https://stackoverflow.com/questions/45472242/how-can-i-parse-nested-xml-with-the-same-name-of-childs-to-csv", "title": "How can I parse nested xml (with the same name of childs) to CSV?", "body": "<p>I am very new to Python, I searched a lot but I could not find the solution. I want to parse the following xml file to a csv file.</p>\n\n<pre><code>&lt;List&gt;\n  &lt;item&gt;\n     &lt;id&gt;5939c5e20d82880efce93933&lt;/id&gt;\n     &lt;sensorEvents&gt;\n        &lt;sensorEvents&gt;\n            &lt;avgSped&gt;48.55647532226298&lt;/avgSped&gt;\n            &lt;completed&gt;true&lt;/completed&gt;\n        &lt;/sensorEvents&gt;\n        &lt;sensorEvents&gt;\n            &lt;avgSped&gt;39.53368357145088&lt;/avgSped&gt;\n            &lt;completed&gt;true&lt;/completed&gt;\n        &lt;/sensorEvents&gt;\n        &lt;sensorEvents&gt;\n            &lt;avgSped&gt;41.41160105233052&lt;/avgSped&gt;\n            &lt;completed&gt;true&lt;/completed&gt;\n        &lt;/sensorEvents&gt;\n     &lt;/sensorEvents&gt;\n  &lt;/item&gt;\n\n  .\n  .\n  .\n  .\n\n&lt;/List&gt;\n</code></pre>\n\n<p>The code that I wrote is this:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport csv\ntree = ET.parse(\"my_xml_file.xml\")\nroot = tree.getroot()\nf = open('my_csv_file.csv', 'w')\ncsvwriter = csv.writer(f)\n\nhead = ['ID','avgSped','completed']\ncsvwriter.writerow(head)\n\nfor Item in root.findall('item'):\n\n    for Sensorevents in Item.findall('sensorEvents'):\n\n\n        row = []\n        id_ = Item.find('id').text\n        row.append(id_)\n\n        avgSped_ = Sensorevents.find('sensorEvents').find('avgSped').text\n        row.append(avgSped_)\n\n        completed_ = Sensorevents.find('sensorEvents').find('completed').text\n        row.append(completed_)\n\n        csvwriter.writerow(row)\n\n\nf.close()\n</code></pre>\n\n<p>And the result is this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/qB1gu.png\" alt=\"enter image description here\"></p>\n\n<p>There are 3 sensorEvents but my code just captures the first one. How can I modify the code to read all of the sensorEvents? \nAny help is really appreciated.</p>\n"}, {"tags": ["python", "itertools", "cartesian-product"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1501714307, "post_id": 45472214, "comment_id": 77905457, "body": "Itertools does not use that much memory. It is the fact that you convert it to a list. <code>itertools</code> works lazily."}], "answers": [{"comments": [{"owner": {"reputation": 1728, "user_id": 4420797, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uPAoqbuB0jM/AAAAAAAAAAI/AAAAAAAABSo/dpT-k2C_ddM/photo.jpg?sz=128", "display_name": "Khawar Islam", "link": "https://stackoverflow.com/users/4420797/khawar-islam"}, "edited": false, "score": 0, "creation_date": 1611634934, "post_id": 45472264, "comment_id": 116508461, "body": "I am also facing a memory issue. Help required  <a href=\"https://stackoverflow.com/questions/65855793/memory-leakage-issue-in-python-list\" title=\"memory leakage issue in python list\">stackoverflow.com/questions/65855793/&hellip;</a>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1501714631, "creation_date": 1501714631, "answer_id": 45472264, "question_id": 45472214, "link": "https://stackoverflow.com/questions/45472214/itertools-product-uses-too-much-memory/45472264#45472264", "title": "itertools product uses too much memory", "body": "<p>The problem is not with <code>itertools</code>: itertools works lazily: it produces iterables. The problem is that you first want to put all these elements in a list. As a result all the combinations have to exist at the same time. This obviously requires more memory than doing this in an iterative way since in the latter case, the memory of a previous combination can be reused.</p>\n\n<p>If you thus want to print all combinations, <em>without storing them</em>, you can use:</p>\n\n<pre><code>with open(in_file) as f:\n        lis = list(f)\nfor x in itertools.product(*map(set, zip(*map(str.split, lis)))):\n    print(' '.join(x))\n</code></pre>\n\n<p>In case you want to store them, you can limit the number by using <code>itertools.islice</code>:</p>\n\n<pre><code><b>from itertools import islice, product</b>\n\nX = []\nwith open(in_file) as f:\n        lis = list(f)\nX += [' '.join(x) for x in <b>islice(</b>product(*map(set, zip(*map(str.split, lis))))<b>,1000000)</b>])</code></pre>\n\n<p>Here we thus limit the number of products to 1'000'000.</p>\n"}], "owner": {"reputation": 690, "user_id": 2966421, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ddSNR.jpg?s=128&g=1", "display_name": "badner", "link": "https://stackoverflow.com/users/2966421/badner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 45472264, "answer_count": 1, "score": 3, "last_activity_date": 1501715065, "creation_date": 1501714242, "last_edit_date": 1501715065, "question_id": 45472214, "link": "https://stackoverflow.com/questions/45472214/itertools-product-uses-too-much-memory", "title": "itertools product uses too much memory", "body": "<p>I only have two sentences that I want to produce variations and compute the leveshtein distance of, but when trying to produce this list with itertools even my 64GB RAM machine gets overloaded. </p>\n\n<p>Is there a way to limit this, even if I have to limit it to a certain number of combinations.</p>\n\n<p>here is my code so far:</p>\n\n<pre><code>from __future__ import print_function\nimport itertools\nimport sys\n\nin_file = sys.argv[1]\nX = []\n\n\nwith open(in_file) as f:\n        lis = list(f)\nX.append([' '.join(x) for x in itertools.product(*map(set, zip(*map(str.split, lis))))])\n\nfor x in X:\n        print x\n</code></pre>\n"}, {"tags": ["python", "regex", "regex-group"], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 2, "last_activity_date": 1501713954, "creation_date": 1501713954, "answer_id": 45472178, "question_id": 45472112, "link": "https://stackoverflow.com/questions/45472112/a-good-and-preferably-fast-way-to-format-iupac-nomenclature-in-python/45472178#45472178", "title": "A good (and preferably fast) way to format IUPAC nomenclature in Python", "body": "<p>Use the lookahead feature to select the dashes followed by digits:</p>\n\n<pre><code>s = \"2_3_7_8_TETRACHLORODIBENZO_P_DIOXIN_EXPOSURE\"\ns = re.sub(r\"_(?=\\d)\", \",\" ,s)\n#'2,3,7,8_TETRACHLORODIBENZO_P_DIOXIN_EXPOSURE'\ns = re.sub(r\"_\", \"-\" ,s)\n#'2,3,7,8-TETRACHLORODIBENZO-P-DIOXIN-EXPOSURE'\n</code></pre>\n\n<p>(You still have to do the locants, but it looks like you already know how to handle them.)</p>\n"}], "owner": {"reputation": 749, "user_id": 3143742, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/36806326/picture?type=large", "display_name": "Chris vCB", "link": "https://stackoverflow.com/users/3143742/chris-vcb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 45472178, "answer_count": 1, "score": 0, "last_activity_date": 1501713954, "creation_date": 1501713509, "question_id": 45472112, "link": "https://stackoverflow.com/questions/45472112/a-good-and-preferably-fast-way-to-format-iupac-nomenclature-in-python", "title": "A good (and preferably fast) way to format IUPAC nomenclature in Python", "body": "<p>I have a large data set that contains a number of IUPAC organic chemical nomenclature formatted like this:</p>\n\n<p><code>2_3_7_8_TETRACHLORODIBENZO_P_DIOXIN_EXPOSURE</code></p>\n\n<p>I would need to be able to translate this to the standard IUPAC form, to wit:</p>\n\n<p><code>2,3,7,8-tetrachlorodibenzo-p-dioxin exposure</code></p>\n\n<p>There is a limited list of what single characters would be part of the chemical name (e.g. <code>P</code> in the above case) and in any case that isn't, <code>_</code> would be replaced by <code>[blank space]</code>. However, what I'm struggling with is to differentiate in regex the cases where <code>_</code> is replaced by <code>-</code> and where it's replaced by <code>,</code>. I'm using regex replacements with named regexes and a function to replace them. The capture regex for locants is</p>\n\n<p><code>(?P&lt;locants&gt;((^|\\s)\\d{1,2}\\s){1,6})</code> (note that in this case, <code>_</code>s have already been replaced by blank spaces, hence the prevalence of <code>\\s</code> rather than <code>_</code>)</p>\n\n<p>But how do I go about writing something to make sure that the space after 2, 3 and 7 is replaced by <code>,</code> but the one after 8 is replaced by <code>-</code>?</p>\n"}, {"tags": ["python", "python-3.x", "pygame"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1501713680, "post_id": 45472070, "comment_id": 77905268, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}], "answers": [{"tags": [], "owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "is_accepted": false, "score": 1, "last_activity_date": 1501713648, "creation_date": 1501713648, "answer_id": 45472133, "question_id": 45472070, "link": "https://stackoverflow.com/questions/45472070/pygame-module-errors-with-collsions/45472133#45472133", "title": "Pygame module errors with collsions", "body": "<p><code>pygame.sprite.groupcollide</code> first two arguments are of type <code>pygame.sprite.Group</code>, but you're giving it a <code>list</code> and a <code>Player</code>.</p>\n\n<p>So, instead of <code>enemies = []</code> and <code>enemies.append(enemy1)</code>, you should try <code>enemies = Group()</code> and <code>enemies.add(enemy1)</code>. Other changes may be necessary. Similarly for the player. Try looking into the <a href=\"https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.groupcollide\" rel=\"nofollow noreferrer\">pygame documentation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 8341601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zFtk0piZJR8/AAAAAAAAAAI/AAAAAAAAAC8/Q-GHcBhG5Yw/photo.jpg?sz=128", "display_name": "TOTAL TRASH", "link": "https://stackoverflow.com/users/8341601/total-trash"}, "edited": false, "score": 0, "creation_date": 1501795127, "post_id": 45472138, "comment_id": 77950979, "body": "Novice mistakes i guess. Thanks for the answer it helped a lot."}], "tags": [], "owner": {"reputation": 818, "user_id": 5463666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0GCSsX1WQ04/AAAAAAAAAAI/AAAAAAAAABY/fLxnxtbonBs/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/5463666/chris"}, "is_accepted": false, "score": 4, "last_activity_date": 1501713661, "creation_date": 1501713661, "answer_id": 45472138, "question_id": 45472070, "link": "https://stackoverflow.com/questions/45472070/pygame-module-errors-with-collsions/45472138#45472138", "title": "Pygame module errors with collsions", "body": "<p>Your error is happening here:</p>\n\n<p><code>hitregistry = pygame.sprite.groupcollide(enemies, player, True, True)</code></p>\n\n<p><code>groupcollide()</code> requires two Sprite Groups as arguments. You're using it correctly when you are doing <code>enemies</code> versus <code>bullets</code>, but here you are passing it <code>enemies</code> (a Group) and <code>player</code> (not a Group).  You probably want to use <code>spritecollide()</code> instead, which tests a Sprite versus a Group:</p>\n\n<p><code>hitregistry = pygame.sprite.spritecollide(player, enemies, True)</code></p>\n\n<p>Also, why do you have <code>all_sprites.add(player)</code> inside your <code>while</code> loop? You are adding the player to the group every frame...</p>\n"}], "owner": {"reputation": 15, "user_id": 8341601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zFtk0piZJR8/AAAAAAAAAAI/AAAAAAAAAC8/Q-GHcBhG5Yw/photo.jpg?sz=128", "display_name": "TOTAL TRASH", "link": "https://stackoverflow.com/users/8341601/total-trash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1501713661, "creation_date": 1501713234, "last_edit_date": 1501713488, "question_id": 45472070, "link": "https://stackoverflow.com/questions/45472070/pygame-module-errors-with-collsions", "title": "Pygame module errors with collsions", "body": "<p>I've been working on a shmup game for quite some time.  One of the issues that I get constantly are with collisions. The thing is, my code appears to be totally correct, but I'm getting errors from the pygame module itself!</p>\n\n<p>Example:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/home/pi/shooter_modified(1).py\", line 101, in &lt;module&gt;\n  hitregistry = pygame.sprite.groupcollide(enemies, player, True, True)\nFile \"/usr/lib/python3/dist-packages/pygame/sprite.py\", line 1549, in groupcollide\n  for s in groupa.sprites():\nAttributeError: 'list' object has no attribute 'sprites'\n</code></pre>\n\n<p>Is this some sort of issue with my own code or and issue with the pygame module itself? \nHere's my code:</p>\n\n<pre><code>import pygame,random,os\nfrom pygame.locals import *\n'initialize pygame'\npygame.init()\n'set variables'\nred = (255,0,0)\ngreen = (0,255,0)\nblue = (0,0,255)\nblack = (0,0,0)\nwhite = (255,255,255)\nwidth = 1280\nheight = 720\n'create window'\nscreen =  pygame.display.set_mode((1280,720))\nclock = pygame.time.Clock()\n'sprite groups'\nall_sprites = pygame.sprite.Group()\nbullets = pygame.sprite.Group()\nenemies = pygame.sprite.Group()\npygame.display.set_caption(\"kamikaze base defense\")\n'classes'\n\nclass Player(pygame.sprite.Sprite):\n    def __init__(self):\n        self.x, self.y = pygame.mouse.get_pos()\n        pygame.sprite.Sprite.__init__(self)\n        #self.image = pygame.Surface((32,32))++--3\n        #$self.image.fill((green))\n        self.image = pygame.image.load(\"vehicle.png\")\n        self.image.set_colorkey(white)\n        self.rect = self.image.get_rect()\n        self.rect.center = (width/2,700)\n        self.speed = 0\n    def update(self):\n        self.keypress = pygame.key.get_pressed()\n        if self.keypress[pygame.K_a]:\n            self.speed = 3\n            self.rect.x -= self.speed\n        if self.keypress[pygame.K_d]:\n            self.speed = 3\n            self.rect.x += self.speed\n\n        #self.rect.x += 1\n        if self.rect.left &gt; width:\n            self.rect.right = 0\n        if self.rect.right &lt; 0:\n            self.rect.left = 1280\n    def shoot(self):\n        bullet = Bullet(self.rect.centerx,self.rect.top)\n        all_sprites.add(bullet)\nclass Enemy(pygame.sprite.Sprite):\n    def __init__(self):\n        pygame.sprite.Sprite.__init__(self)\n        self.image = pygame.image.load(\"missile.png\")\n        self.rect = self.image.get_rect()\n        self.rect.x = random.randrange(50,width)\n        self.rect.y = random.randrange(-100,-40)\n        self.speedy = random.randrange(1,5)\n        self.speedx = random.randrange(0,3)\n    def update(self):\n        self.rect.y = self.rect.y + self.speedy\n        self.rect.x = self.rect.x + self.speedx\n        if self.rect.top &gt; height:\n            self.rect.x = random.randrange(50,width)\n            self.rect.y = random.randrange(-200,-100) \n            self.speedy = random.randrange(1,6)            \nclass Bullet(pygame.sprite.Sprite):\n    def __init__(self):\n        pygame.sprite.Sprite.__init__(self)\n        self.image = pygame.Surface((5,10))\n        self.image.fill(red)\n        self.rect = self.image.get_rect()\n        self.speedy = -5\n    def update(self):\n        self.rect.y -= 5\n        if self.rect.bottom &lt; 0:\n            self.kill()\n\n\nenemies = []\nplayer = Player()\nenemy1 = Enemy()\nenemy2 = Enemy()\nenemy3 = Enemy()\nenemy4 = Enemy()\nall_sprites.add(enemy1)\nall_sprites.add(enemy2)\nall_sprites.add(enemy3)\nall_sprites.add(enemy4)\nenemies.append(enemy1)\nenemies.append(enemy2)\nenemies.append(enemy3)\nenemies.append(enemy4)\npygame.init()\nwhile True:\n    pygame.event.pump()\n    'main loop'   \n    all_sprites.add(player)\n    screen.fill(black)\n    all_sprites.draw(screen)\n    hitregistry = pygame.sprite.groupcollide(enemies, player, True, True)\n    if hitregistry:\n        print(\"hit!\")\n        pygame.quit()\n    for event in pygame.event.get():\n        if event.type == pygame.MOUSEBUTTONDOWN:\n            bullet = Bullet()\n            bullet.rect.x = player.rect.x +50\n            bullet.rect.y = player.rect.y\n            all_sprites.add(bullet)\n            bullets.add(bullet)\n    bullets.draw(screen)\n    bullethits = pygame.sprite.groupcollide(enemies,bullets,True,True)\n    if bullethits:\n       print(\"hit!\")\n</code></pre>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy", "parametric-equations"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1501713752, "post_id": 45472016, "comment_id": 77905284, "body": "Implicitly correcting your indentation and typo: your <code>t_parameter()</code> function returns a 2D array (albeit 1 in one dimension), because you return <code>np.array([t])</code>. Thus, <code>d</code> is two dimensional and <code>d[i]</code> is an array instead of a scalar. Just return <code>t</code> from <code>t_parameter()</code> and you&#39;ll be good to go."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1501713831, "post_id": 45472016, "comment_id": 77905315, "body": "Note that NumPy has a <a href=\"https://docs.scipy.org/doc/numpy-1.12.0/reference/generated/numpy.random.uniform.html#numpy.random.uniform\" rel=\"nofollow noreferrer\">vectorised uniform random routine</a>. You can simply do <code>d = np.random.uniform(-10, 10, n)</code> and remove the whole <code>t_parameter()</code> function."}], "owner": {"reputation": 29, "user_id": 8066389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TnLSKtyO3rY/AAAAAAAAAAI/AAAAAAAAAfo/2ruoDHfiblo/photo.jpg?sz=128", "display_name": "Andrew Diaz", "link": "https://stackoverflow.com/users/8066389/andrew-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501714462, "creation_date": 1501712918, "question_id": 45472016, "link": "https://stackoverflow.com/questions/45472016/random-line-segments-using-parametric-equations", "title": "Random line segments using parametric equations", "body": "<p>I am trying to crate a program that randomly generates line segments using parametric equations. What I have created kinds of does the job, but instead of the lines being disconnected from one another they form one continues line. This is what I have written in python.</p>\n\n<pre><code>enter import numpy as np \nimport random as rand \nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\n\nfig = plt.figure()\n\nax = fig.gca(projection='3d')\n\nax.set_aspect(\"equal\")  \n\nnpoints = 10\n\nV = np.zeros(npoints)\n\ndef point1 (npoints):\nx0 = np.zeros(npoints)\ny0 = np.zeros(npoints)\nz0 = np.zeros(npoints)\n\n\nfor k in range (npoints):\n    theta = rand.uniform(0.0, np.pi)\n    phi = rand.uniform(0.0, (2 * np.pi)) \n    x0[k] = 10 * np.sin(phi) * np.cos(theta)\n    y0[k] = 10 * np.sin(phi) * np.sin(theta)\n    z0[k] = 10 * np.cos(theta)\nreturn np.array([x0,y0,z0])\n\n\ndef point2 (npoints):\nx1 = np.zeros(npoints)\ny1 = np.zeros(npoints)\nz1 = np.zeros(npoints)\n\nfor j in range (npoints):\n    theta = rand.uniform(0.0, np.pi)\n    phi = rand.uniform(0.0, (2 * np.pi)) \n    x1[j] = 10 * np.sin(phi) * np.cos(theta)\n    y1[j] = 10 * np.sin(phi) * np.sin(theta)\n    z1[j] = 10 * np.cos(theta)\nreturn np.array([x1,y1,z1])\n\nn = 10\n\ndef t_parameter(n):\nt = np.zeros(n)\n\nfor i in range (n):\n    t[i] = rand.uniform(-10,10)\nreturn np.array([t])\n\np1 = point1(npoints)\n\np2 = point2(npoints)\n\nV  = p2-p1\n\nd = t_paramiter(n)\n\nLx = d*V[0]+p1[0]\nLy = d*V[1]+p1[1]\nLz = d*V[2]+p1[2]\n\nax.plot_wireframe(Lx,Ly,Lz)\n</code></pre>\n\n<p>When I run the code this is what is generated <a href=\"https://i.stack.imgur.com/PeDz8.png\" rel=\"nofollow noreferrer\">plot of what is generated</a>. What I would like to code to do is keep the values of the initial point and direction vector constant while just updating the d with random values.</p>\n\n<p>I have tried doing something like this </p>\n\n<pre><code>Lx = np.zeros(npoints)\nLy = np.zeros(npoints)\nLz = np.zeros(npoints)\n\nfor i in range (n):\n\nLx[i] = d[i]*V[i]+p1[i]\nLy[i] = d[i]*V[i]+p1[i]\nLz[i] = d[i]*V[i]+p1[i]\n</code></pre>\n\n<p>but I get an error \"setting an array element with a sequence\".</p>\n"}, {"tags": ["python", "pty"], "answers": [{"tags": [], "owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "is_accepted": true, "score": 0, "last_activity_date": 1504587618, "last_edit_date": 1504587618, "creation_date": 1504532929, "answer_id": 46038465, "question_id": 45472013, "link": "https://stackoverflow.com/questions/45472013/how-to-force-a-pty-spawn-launched-application-to-cleanly-exit/46038465#46038465", "title": "How to force a pty.spawn() launched application to cleanly exit?", "body": "<p>You can <a href=\"https://docs.python.org/2/library/os.html\" rel=\"nofollow noreferrer\"><em>wait()</em></a> the exited process like this:</p>\n\n<pre><code>pty.spawn(\"cmd\")    # it returns nothing\nos.wait()\n</code></pre>\n\n<p>You can also set a SIGCHLD handler so exited child processes can be automatically <em>wait</em>ed.</p>\n\n<pre><code>def sig_child(signum, bt):\n    os.waitpid(-1, os.WNOHANG)\n\nsignal.signal(SIGCHLD, sig_child)\n\npty.spawn(\"cmd\")\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3158527, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000683040463/picture?type=large", "display_name": "user3158527", "link": "https://stackoverflow.com/users/3158527/user3158527"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 46038465, "answer_count": 1, "score": 0, "last_activity_date": 1504587618, "creation_date": 1501712907, "last_edit_date": 1501717730, "question_id": 45472013, "link": "https://stackoverflow.com/questions/45472013/how-to-force-a-pty-spawn-launched-application-to-cleanly-exit", "title": "How to force a pty.spawn() launched application to cleanly exit?", "body": "<p>I'm developing a simple service that binds to a port and spawns a pty for an application, <code>dup()</code>ing <code>STDIN</code>, <code>STDOUT</code>, and <code>STDERR</code> to the socket, so that the socket takes control over the <code>pty</code>:</p>\n\n<pre><code>prevOutFd = os.dup(1)\nprevInFd = os.dup(0)\nprevErrFd = os.dup(2)\nwhile 1:\n    #wait to accept a connection - blocking call\n    conn, addr = s.accept()\n    logging.info('Connected with ' + addr[0] + ':' + str(addr[1]))\n    # redirect stdout, stdin and stderr to socket fd\n    os.dup2(conn.fileno(),0)\n    os.dup2(conn.fileno(),1)\n    os.dup2(conn.fileno(),2)\n    p=pty.spawn(\"/usr/sbin/pppd\")\n    # redirect stdout, stdin and stderr back to original fds\n    os.dup2(prevOutFd, 0)\n    os.dup2(prevInFd, 1)\n    os.dup2(prevErrFd, 2)\n    logging.info(\"Closing connection....\")\n    conn.close()\n</code></pre>\n\n<p>This works just fine, except for when the client abruptly kills the connection.\nThe server handles it just fine, but the spawned application is left defunct in the system:</p>\n\n<p><code>root      9820  0.1  0.0      0     0 ?        Zs   16:19   0:00 [pppd] &lt;defunct&gt;</code></p>\n\n<p>I believe the solution is to either wait for the application to finish OR cleanly shut it down.\nHowever, <code>pty</code> does not seem to have a <code>close()</code> method of some sort.</p>\n\n<p>Anyone know how to cleanly shut a <code>pty.spawn()</code>ed application?</p>\n"}, {"tags": ["python", "django", "atom-editor"], "comments": [{"owner": {"reputation": 1629, "user_id": 6634981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cf7315d5991470e856d27c9248ae25b?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Afonso", "link": "https://stackoverflow.com/users/6634981/carlos-afonso"}, "edited": false, "score": 0, "creation_date": 1501712913, "post_id": 45471983, "comment_id": 77905016, "body": "Try searching in all files of your project. In Atom you can do it pressing <code>ctrl+shift+f</code>"}, {"owner": {"reputation": 423, "user_id": 6258794, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d8dbbfaca41968578a0ac400db919300?s=128&d=identicon&r=PG&f=1", "display_name": "PythonReactor", "link": "https://stackoverflow.com/users/6258794/pythonreactor"}, "reply_to_user": {"reputation": 1629, "user_id": 6634981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cf7315d5991470e856d27c9248ae25b?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Afonso", "link": "https://stackoverflow.com/users/6634981/carlos-afonso"}, "edited": false, "score": 0, "creation_date": 1501713256, "post_id": 45471983, "comment_id": 77905145, "body": "WHOA. I overlooked such a simple tool... Thanks Carlos! Edit: I would like to point out though that this does not show me what filenames have this naming convention, that search only shows me what line inside what files that string appears. Still good enough for my current predicament!"}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 6258794, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d8dbbfaca41968578a0ac400db919300?s=128&d=identicon&r=PG&f=1", "display_name": "PythonReactor", "link": "https://stackoverflow.com/users/6258794/pythonreactor"}, "edited": false, "score": 0, "creation_date": 1501713818, "post_id": 45472151, "comment_id": 77905306, "body": "Thank you Carlos, a concise answer that takes care of just what I need."}], "tags": [], "owner": {"reputation": 1629, "user_id": 6634981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cf7315d5991470e856d27c9248ae25b?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Afonso", "link": "https://stackoverflow.com/users/6634981/carlos-afonso"}, "is_accepted": true, "score": 1, "last_activity_date": 1501713726, "creation_date": 1501713726, "answer_id": 45472151, "question_id": 45471983, "link": "https://stackoverflow.com/questions/45471983/finding-where-a-filename-is-used-in-django/45472151#45472151", "title": "Finding Where a Filename is Used in Django", "body": "<p>You can use ctrl+shift+f in atom.</p>\n\n<p>Additionally, if you're using linux you can use the command in the root of your project:</p>\n\n<pre><code>$ find . -type f -name '*.py' -exec sed -i 's/django_//g' {} \\;\n</code></pre>\n\n<p>That will get all python files in your project and remove the <code>django_</code> prefix from occurances found in those files. If you want to specify a folder replace the <code>.</code> after <code>find</code> by the folder name.</p>\n"}], "owner": {"reputation": 423, "user_id": 6258794, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d8dbbfaca41968578a0ac400db919300?s=128&d=identicon&r=PG&f=1", "display_name": "PythonReactor", "link": "https://stackoverflow.com/users/6258794/pythonreactor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 45472151, "answer_count": 1, "score": 0, "last_activity_date": 1501713726, "creation_date": 1501712682, "question_id": 45471983, "link": "https://stackoverflow.com/questions/45471983/finding-where-a-filename-is-used-in-django", "title": "Finding Where a Filename is Used in Django", "body": "<p>I am currently working on a project in Django (1.9) and used a filename convention that was suitable for my needs. Such a need was rebuilding the entire site using Django, and using the same filenames but with 'django_' in front.</p>\n\n<p>Example: <code>home.py</code> became <code>django_home.py</code></p>\n\n<p>Not that this explanation or example is necessary, just wanted everyone to see just what I am talking about. Anywho, I am now done transitioning over to Django and want to get rid of the <code>django_</code> in front of the filenames.</p>\n\n<p><strong>Question</strong>: How can I see what functions are using my filenames? I am currently using Atom as my IDE, maybe that has a tool? I can manually go through all my files and see what is affected (change names and see what comes up as an error in the dev server?) but I would love a more autonomous way of doing this.</p>\n"}, {"tags": ["python", "spotipy"], "answers": [{"tags": [], "owner": {"reputation": 1248, "user_id": 2178599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lwyJC.jpg?s=128&g=1", "display_name": "23k", "link": "https://stackoverflow.com/users/2178599/23k"}, "is_accepted": true, "score": 1, "last_activity_date": 1501715887, "last_edit_date": 1501715887, "creation_date": 1501713062, "answer_id": 45472039, "question_id": 45471960, "link": "https://stackoverflow.com/questions/45471960/spotify-delete-access-token-created-with-none-value/45472039#45472039", "title": "Spotify - delete access token created with None value", "body": "<p>The cache should be stored in a file at the root directory (where the python file gets executed). </p>\n\n<p>It's named <code>.cache-{username}</code>. Make sure that you have hidden files turned on or else you probably won't see it.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7830303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 1, "accepted_answer_id": 45472039, "answer_count": 1, "score": 1, "last_activity_date": 1549909778, "creation_date": 1501712546, "last_edit_date": 1501712854, "question_id": 45471960, "link": "https://stackoverflow.com/questions/45471960/spotify-delete-access-token-created-with-none-value", "title": "Spotify - delete access token created with None value", "body": "<p>I am trying to delete my Spotify access token generated with a None value, which broke at my second connection attempt.</p>\n\n<p>I got this snippet from here --> <a href=\"https://github.com/plamere/spotipy/issues/176#issuecomment-307632735\" rel=\"nofollow noreferrer\">github thread</a>, used to clear the cached token:</p>\n\n<pre><code>import os\nfrom json.decoder import JSONDecodeError\n\nscope = &lt;whatever_youwant&gt;\ntry:\n    token = util.prompt_for_user_token(username, scope, client_id, client_secret, redirect_uri)\nexcept (AttributeError, JSONDecodeError):\n    os.remove(f\".cache-{username}\")\n    token = util.prompt_for_user_token(username, scope, client_id, client_secret, redirect_uri)\n</code></pre>\n\n<p>but I get syntax error here:</p>\n\n<pre><code>os.remove(f\".cache-{username}\")\n</code></pre>\n\n<p>where is my token cached? how can I delete it as to regain access?</p>\n"}, {"tags": ["python", "ocr", "tesseract", "pillow"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1501713516, "post_id": 45471929, "comment_id": 77905234, "body": "That&#39;s a pretty crappy-quality image. I wouldn&#39;t expect much out of the OCR to be anything other than junk."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1501714993, "post_id": 45471929, "comment_id": 77905624, "body": "Did the unicode version of <code>text</code> actually contain all the same characters you&#39;re seeing in the output? I&#39;m not sure why the <code>encode</code> call is necessary. Are you using Python 2 or Python 3?"}, {"owner": {"reputation": 545, "user_id": 4087009, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/daea0aa6bc8ac56265a6e4744bdb8fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Lynch", "link": "https://stackoverflow.com/users/4087009/ed-lynch"}, "edited": false, "score": 0, "creation_date": 1501716163, "post_id": 45471929, "comment_id": 77905914, "body": "Have to call encode to avoid an error, not sure how to check the python type but it looks like it is just a hard to read image."}], "owner": {"reputation": 545, "user_id": 4087009, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/daea0aa6bc8ac56265a6e4744bdb8fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Lynch", "link": "https://stackoverflow.com/users/4087009/ed-lynch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1005, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501713291, "creation_date": 1501712389, "last_edit_date": 1592644375, "question_id": 45471929, "link": "https://stackoverflow.com/questions/45471929/weird-characters-from-tesseract", "title": "Weird characters from tesseract", "body": "<p>When I run this python code on windows 10:</p>\n<pre><code>from PIL import Image\nimport pytesseract\npytesseract.pytesseract.tesseract_cmd = 'C:/Program Files (x86)/Tesseract-OCR/tesseract'\nim = Image.open(&quot;news.png&quot;)\n\ntext = pytesseract.image_to_string(im, lang='eng')\n\nprint(text.encode(&quot;utf-8&quot;))\n</code></pre>\n<p><a href=\"https://s-media-cache-ak0.pinimg.com/originals/e2/1b/ee/e21bee5457751fc5aa84b62e5d72c061.png\" rel=\"nofollow noreferrer\">On this image.</a></p>\n<p>I get this printed:</p>\n<pre><code>    THE MN HERALD gm:-                                 \n                                                   \n} HEAT INVASIUN SIAHIHI                            \n                                                   \nBuile\u2229\u00bc\u00fcns Gen. Eisenhower Bares Landings in France\n                                                   \ndtmmv\u0393\u00c7\u00ff By Both Sea, Air from Le Havre North;     \n                                                   \nMSW \\ Fierce Fight at Caen, Dunlaerque Rocked      \n                                                   \nEM?\u0393\u00c7\u00a5 7 , w W! Paratroops Hit Nazis               \n'k AWMWM In Pre-Dawn Assaults                      \n                                                   \nswam HEADQUARTERS\u0393\u00c7\u00ff ALLIED EXPE                   \nmmmkv poms. Im a (API\u0393\u00c7\u00f6\u0393\u00c7\u00ffAmcrfwl.                \nmm m: Canadian lmvm'umlldm mum anu:                \nma mm, launrmn: m. mm: wwmmmxlfmy                  \naprn m hum mm mm mm m&quot; supra&quot;!                     \nmummy, c&quot;. 1mm 17' 5mm\u0393\u00c7\u00a5, m... \u0393\u00c7\u00a3we              \nm mm mm\u252c\u2557; mm mu \u0393\u00c7\u00a3mm nun m Gar                   \nman mmlm n\u252c\u2557 m: can                                \n                                                   \nu. mm, which                                       \nmm&quot; m nnmmntl                                      \n(mum                                               \n(ammunlaur N. 1;                                   \nr m: cwmand 07 Cm. Elunhown MM                     \nm: Yam: :unpurltd by gm, m\u252c\u2557 Mm. mm.               \n(mm, Mind mm m, mm. m m mum                        \n\u252c\u2557 man \u252c\u00bd2mm                                       \n                                                \n.m and \u0393\u00c7\u00a3a [um                                    \n72 A M. Cvunmfch                                   \nmwmnmummmn.\u0393\u00c7\u00d6                                    \n</code></pre>\n<p>Any ideas why I am getting this weird output, is this a limitation with tesseract or am I been dumb?</p>\n<p>Thanks, Ed.</p>\n"}, {"tags": ["python", "web-scraping", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "is_accepted": false, "score": 0, "last_activity_date": 1501737404, "creation_date": 1501737404, "answer_id": 45475386, "question_id": 45471882, "link": "https://stackoverflow.com/questions/45471882/scrapy-reporting-0-pages-crawled/45475386#45475386", "title": "Scrapy reporting 0 pages crawled", "body": "<p>Seems like the products are retrieved by AJAX (see related: <a href=\"https://stackoverflow.com/questions/8550114/can-scrapy-be-used-to-scrape-dynamic-content-from-websites-that-are-using-ajax\">Can scrapy be used to scrape dynamic content from websites that are using AJAX?</a>).<br>\nIf you open up browsers webinspector, select network tab and look for XHR requests when the page loads, you can see this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dJi0x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dJi0x.png\" alt=\"firebug network\"></a></p>\n\n<p>Seems like a <code>POST</code> type request is being made with categories, filter etc. and a <code>json</code> of products is returned. You can reverse engineer it and replicate it in scrapy.</p>\n"}], "owner": {"reputation": 1, "user_id": 8407736, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947822538788809/picture?type=large", "display_name": "Jonathon Miller", "link": "https://stackoverflow.com/users/8407736/jonathon-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1501879263, "creation_date": 1501712100, "last_edit_date": 1501879263, "question_id": 45471882, "link": "https://stackoverflow.com/questions/45471882/scrapy-reporting-0-pages-crawled", "title": "Scrapy reporting 0 pages crawled", "body": "<p>I'm trying to scrape the prices for shoes on the website in the code. I have no idea of knowing if my syntax is even correct. I could really use some help. </p>\n\n<pre><code>from scrapy.spider import BaseSpider\nfrom scrapy import Field\nfrom scrapy import Item\nfrom scrapy.selector import HtmlXPathSelector\n\ndef Yeezy(Item):\n price = Field()\n\n\nclass YeezySpider(BaseSpider):\n  name = \"yeezy\"\n  allowed_domains = [\"https://www.grailed.com/\"]\n  start_url = ['https://www.grailed.com/feed/0Qu8Gh1qHQ?page=2']\n\ndef parse(self, response):\n    hxs = HtmlXPathSelector(response)\n    price = hxs.css('.listing-price .sub-title:nth-child(1) span').extract()\n    items = []\n    for price in price:\n        item = Yeezy()\n        item[\"price\"] = price.select(\".listing-price .sub-title:nth-child(1) span\").extract()\n        items.append(item)\n    yield item\n</code></pre>\n\n<p>The code is reporting this to the console:</p>\n\n<pre><code>ScrapyDeprecationWarning: YeezyScrape.spiders.yeezy_spider.YeezySpider     inherits from deprecated class scrapy.spider.BaseSpider, please inherit from      scrapy.spider.Spider. (warning only on first subclass, there may be others)\n  class YeezySpider(BaseSpider):\n2017-08-02 14:45:25-0700 [scrapy] INFO: Scrapy 0.25.1 started (bot: YeezyScrape)\n2017-08-02 14:45:25-0700 [scrapy] INFO: Optional features available: ssl,     http11\n2017-08-02 14:45:25-0700 [scrapy] INFO: Overridden settings:     {'NEWSPIDER_MODULE': 'YeezyScrape.spiders', 'SPIDER_MODULES':     ['YeezyScrape.spiders'], 'BOT_NAME': 'YeezyScrape'}   \n2017-08-02 14:45:25-0700 [scrapy] INFO: Enabled extensions: LogStats,     TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState\n2017-08-02 14:45:26-0700 [scrapy] INFO: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, MetaRefreshMiddleware, HttpCompressionMiddleware, RedirectMiddleware, CookiesMiddleware, ChunkedTransferMiddleware, DownloaderStats\n2017-08-02 14:45:26-0700 [scrapy] INFO: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware\n2017-08-02 14:45:26-0700 [scrapy] INFO: Enabled item pipelines: \n2017-08-02 14:45:26-0700 [yeezy] INFO: Spider opened\n2017-08-02 14:45:26-0700 [yeezy] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-08-02 14:45:26-0700 [scrapy] DEBUG: Telnet console listening on     127.0.0.1:6023\n2017-08-02 14:45:26-0700 [scrapy] DEBUG: Web service listening on 127.0.0.1:6080\n2017-08-02 14:45:26-0700 [yeezy] INFO: Closing spider (finished)\n2017-08-02 14:45:26-0700 [yeezy] INFO: Dumping Scrapy stats:\n{'finish_reason': 'finished',\n 'finish_time': datetime.datetime(2017, 8, 2, 21, 45, 26, 127000),\n 'log_count/DEBUG': 2,\n 'log_count/INFO': 7,\n 'start_time': datetime.datetime(2017, 8, 2, 21, 45, 26, 125000)}\n2017-08-02 14:45:26-0700 [yeezy] INFO: Spider closed (finished)\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>At first I thought it was a problem with the css elements I entered but now I'm not so sure. This is my first time trying a project like this, I could really use some insight. Thank you in advance. </p>\n\n<p>EDIT:  So I tried simulating an xhr request in my code by following another example. This is what I have:</p>\n\n<pre><code>import scrapy\nfrom scrapy.http import FormRequest\nfrom scrapy.selector import HtmlXPathSelector\n#from YeezyScrape import YeezyscrapeItem\n\n\nclass YeezySpider(scrapy.Spider):\n    name = \"yeezy\"\n    allowed_domains = [\"www.grailed.com\"]\n    start_url = [\"https://www.grailed.com/feed/0Qu8Gh1qHQ?page=2\"]\n\n    def parse(self, response):\n        for i in range(0,2):\n            yield FormRequest(url = 'https://mnrwefss2q-\ndsn.algolia.net/1/indexes/Listing_production/query?x-algolia-\nagent=Algolia%20for%20vanilla%20JavaScript%203.21.1&amp;x-algolia-application-\nid=MNRWEFSS2Q&amp;x-algolia-api-key=a3a4de2e05d9e9b463911705fb6323ad', \nmethod=\"post\", formdata={\"params\":\"query:boost\nfilters:(strata:'basic' OR strata:'grailed' OR strata:'hype') AND \n(category_path:'footwear.slip_ons' OR category_path:'footwear.sandals' OR \ncategory_path:'footwear.lowtop_sneakers' OR category_path:'footwear.leather' \nOR category_path:'footwear.hitop_sneakers' OR \ncategory_path:'footwear.formal_shoes' OR category_path:'footwear.boots') AND \n(marketplace:grailed)\nhitsPerPage:40\nfacets [\"strata\",\"size\",\"category\",\"category_size\",\n \"category_path\",\"category_path_size\",\n\"category_path_root_size\",\"price_i\",\"designers.id\",\n\"location\",\"marketplace\"] \npage:2\"}, callback=self.data_parse())\n\ndef data_parse(self, response):\n    hxs = HtmlXPathSelector(response)\n    prices = hxs.xpath(\"//p\").extract()\n    for prices in prices:\n        price = prices.select(\"a/text()\").extract()\n        print price\n</code></pre>\n\n<p>I had to reformat things a little to fit the indentation differences between Python and Stackoverflow.</p>\n\n<p>These are the logs reported in the terminal, again thanks for the help:</p>\n\n<pre><code>C:\\Python27\\python.exe C:/Python27/Lib/site-packages/scrapy/cmdline.py crawl yeezy -o price.json\n2017-08-04 13:23:27-0700 [scrapy] INFO: Scrapy 0.25.1 started (bot: YeezyScrape)\n2017-08-04 13:23:27-0700 [scrapy] INFO: Optional features available: ssl, http11\n2017-08-04 13:23:27-0700 [scrapy] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'YeezyScrape.spiders', 'FEED_FORMAT': 'json', 'SPIDER_MODULES': ['YeezyScrape.spiders'], 'FEED_URI': 'price.json', 'BOT_NAME': 'YeezyScrape'}\n2017-08-04 13:23:27-0700 [scrapy] INFO: Enabled extensions: FeedExporter, LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState\n2017-08-04 13:23:27-0700 [scrapy] INFO: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, MetaRefreshMiddleware, HttpCompressionMiddleware, RedirectMiddleware, CookiesMiddleware, ChunkedTransferMiddleware, DownloaderStats\n2017-08-04 13:23:27-0700 [scrapy] INFO: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware\n2017-08-04 13:23:27-0700 [scrapy] INFO: Enabled item pipelines: \n2017-08-04 13:23:27-0700 [yeezy] INFO: Spider opened\n2017-08-04 13:23:28-0700 [yeezy] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-08-04 13:23:28-0700 [scrapy] DEBUG: Telnet console listening on 127.0.0.1:6023\n2017-08-04 13:23:28-0700 [scrapy] DEBUG: Web service listening on 127.0.0.1:6080\n2017-08-04 13:23:28-0700 [yeezy] INFO: Closing spider (finished)\n2017-08-04 13:23:28-0700 [yeezy] INFO: Dumping Scrapy stats:\n    {'finish_reason': 'finished',\n     'finish_time': datetime.datetime(2017, 8, 4, 20, 23, 28, 3000),\n     'log_count/DEBUG': 2,\n     'log_count/INFO': 7,\n     'start_time': datetime.datetime(2017, 8, 4, 20, 23, 28, 1000)}\n2017-08-04 13:23:28-0700 [yeezy] INFO: Spider closed (finished)\n\nProcess finished with exit code 0\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "filter", "mask"], "owner": {"reputation": 1055, "user_id": 8322295, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mx0gd.jpg?s=128&g=1", "display_name": "Jim421616", "link": "https://stackoverflow.com/users/8322295/jim421616"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501717813, "creation_date": 1501712051, "last_edit_date": 1501717813, "question_id": 45471879, "link": "https://stackoverflow.com/questions/45471879/using-an-image-as-a-mask-for-another-image", "title": "Using an image as a mask for another image", "body": "<p>I've asked this question already, but I've given it a go since. Here's my \ncode, with a doc string to show what I'm trying to do.</p>\n\n<pre><code>\"\"\"\nw1_w2_filter_mask2.py\nUse xbulge-mask.fits image file as a mask for W1 and W2 bands\nand compute the median in patches where the image is not masked\n\"\"\"\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom astropy.io import fits\nfrom scipy.ndimage.filters import generic_filter as gf\n\n#   Open data files\nhdulist = fits.open('xbulge-w1.fits')\nw1data = hdulist[0].data\nhdulist2 = fits.open('xbulge-w2.fits')\nw2data = hdulist2[0].data\n\nhdulistmask = fits.open('xbulge-mask.fits')\nmaskdata = hdulistmask[0].data\n\n#   Define physical shape of filter patch\ndef patch_filter(image_data, radius):\n    kernel = np.zeros((2*radius+1, 2*radius+1))\n    y, x = np.ogrid[-radius:radius+1, -radius:radius+1]\n    patch = x**2 + y**2 &lt;= radius**2\n    kernel[patch] = 1                \n    filtered_image = gf(image_data, np.median, footprint = kernel)\n    return filtered_image\n\n#   Apply mask to image files\nmx1 = np.ma.masked_array(w1data, mask=maskdata)\nmx2 = np.ma.masked_array(w2data, mask=maskdata)\n\n#   Pass median filtering patch across masked image\nradius = 25\nw1masked_filtered = patch_filter(mx1, radius)\nw2masked_filtered = patch_filter(mx2, radius)\n</code></pre>\n\n<p>When I print or imshow the masked, filtered array, it has the same effect as when I don't apply the mask image, i.e. (load mask -> load image -> apply mask -> filter in patches) has the same effect as (load image -> filter in patches).</p>\n\n<p>Can anyone see what I'm missing?</p>\n"}, {"tags": ["python", "image", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5988824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DvCSn.png?s=128&g=1", "display_name": "FLCL", "link": "https://stackoverflow.com/users/5988824/flcl"}, "edited": false, "score": 0, "creation_date": 1501712749, "post_id": 45471932, "comment_id": 77904954, "body": "Just got it! Thanks you"}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 2, "last_activity_date": 1501712414, "creation_date": 1501712414, "answer_id": 45471932, "question_id": 45471847, "link": "https://stackoverflow.com/questions/45471847/tkinter-display-two-images-side-by-side/45471932#45471932", "title": "Tkinter, Display Two Images Side-By-Side", "body": "<p>You are using \"self.render\" for both image objects. So when you make one the other gets garbage collected. Use unique names.</p>\n\n<pre><code>self.render1 = ImageTk.PhotoImage(load) \nself.image1 = self.canvas.create_image((w / 2, h / 2), image=self.render1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 5988824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DvCSn.png?s=128&g=1", "display_name": "FLCL", "link": "https://stackoverflow.com/users/5988824/flcl"}, "is_accepted": false, "score": 0, "last_activity_date": 1501712706, "creation_date": 1501712706, "answer_id": 45471986, "question_id": 45471847, "link": "https://stackoverflow.com/questions/45471847/tkinter-display-two-images-side-by-side/45471986#45471986", "title": "Tkinter, Display Two Images Side-By-Side", "body": "<p>Just figured it out! Just had to create a new <code>render</code> in my second else statements. Labeled as <code>render2</code></p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import *\nfrom tkinter import filedialog\nfrom PIL import Image, ImageTk\nimport os\n\nclass Window(Frame):\n    def __init__(self, master=None):\n        Frame.__init__(self, master)\n\n        self.master = master\n        self.pos = []\n        self.master.title(\"BMP Image GUI\")\n        self.pack(fill=BOTH, expand=1)\n\n        menu = Menu(self.master)\n        self.master.config(menu=menu)\n\n        # File Bar\n        file = Menu(menu)\n        file.add_command(label=\"Open Image 1\", command=self.openImage1)\n        file.add_command(label=\"Open Image 2\", command=self.openImage2)\n        menu.add_cascade(label=\"File\", menu=file)\n\n        self.canvas = tk.Canvas(self)\n        self.canvas.pack(fill=tk.BOTH, expand=True)\n        self.image = None\n        self.image2 = None\n\n    def openImage1(self):\n        filename = filedialog.askopenfilename(initialdir=os.getcwd(),title=\"Select BMP File\",\n                                              filetypes=[(\"BMP Files\",\"*.bmp\")])\n        if not filename:\n            return\n        load = Image.open(filename)\n        load = load.resize((960, 720), Image.ANTIALIAS)\n\n        if self.image is None:\n            w, h = load.size\n            width, height = root.winfo_screenmmwidth(), root.winfo_screenheight()\n            self.render = ImageTk.PhotoImage(load)\n            self.image = self.canvas.create_image((w / 2, h / 2), image=self.render)\n            root.geometry(\"%dx%d\" % (w, h))\n        else:\n            w, h = load.size\n            width, height = root.winfo_screenmmwidth(), root.winfo_screenheight()\n            root.geometry(\"%dx%d\" % (width, height))\n            self.canvas.move(self.image, 960, 0)\n            self.render2 = ImageTk.PhotoImage(load)\n            self.image2 = self.canvas.create_image((w / 2, h / 2), image=self.render2)\n\n    def openImage2(self):\n        filename = filedialog.askopenfilename(initialdir=os.getcwd(), title=\"Select BMP File\",\n                                              filetypes=[(\"BMP Files\", \"*.bmp\")])\n        if not filename:\n            return\n        load = Image.open(filename)\n        load = load.resize((960, 720), Image.ANTIALIAS)\n\n        if self.image is None:\n            w, h = load.size\n            self.render = ImageTk.PhotoImage(load)\n            self.image = self.canvas.create_image((w / 2, h / 2), image=self.render)\n            root.geometry(\"%dx%d\" % (w, h))\n        else:\n            w, h = load.size\n            width, height = root.winfo_screenmmwidth(), root.winfo_screenheight()\n            root.geometry(\"%dx%d\" % (width, height))\n            self.render2 = ImageTk.PhotoImage(load)\n            self.image2 = self.canvas.create_image((w / 2, h / 2), image=self.render2)\n            self.canvas.move(self.image2, 960, 0)\n\nroot = tk.Tk()\nroot.geometry(\"%dx%d\" % (300, 300))\nroot.title(\"BMP Image GUI\")\napp = Window(root)\napp.pack(fill=tk.BOTH, expand=1)\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5988824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DvCSn.png?s=128&g=1", "display_name": "FLCL", "link": "https://stackoverflow.com/users/5988824/flcl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4125, "favorite_count": 0, "accepted_answer_id": 45471932, "answer_count": 2, "score": 1, "last_activity_date": 1501712706, "creation_date": 1501711836, "last_edit_date": 1501712259, "question_id": 45471847, "link": "https://stackoverflow.com/questions/45471847/tkinter-display-two-images-side-by-side", "title": "Tkinter, Display Two Images Side-By-Side", "body": "<p>I am trying to have two BMP images displayed side by side using Tkinter. Once the second image is opened, the first image should reposition itself to the left, and the second image position itself to the right. When I try to do this, the other image goes missing or is replaced. How would I go about doing this? Also, my screen monitor is 1920 x 1080, so image resizing may vary. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import *\nfrom tkinter import filedialog\nfrom PIL import Image, ImageTk\nimport os\n\nclass Window(Frame):\n    def __init__(self, master=None):\n        Frame.__init__(self, master)\n\n        self.pos = []\n        self.master.title(\"BMP Image GUI\")\n        self.pack(fill=BOTH, expand=1)\n\n        menu = Menu(self.master)\n        self.master.config(menu=menu)\n\n        # File Bar\n        file = Menu(menu)\n        file.add_command(label=\"Open Image 1\", command=self.openImage1)\n        file.add_command(label=\"Open Image 2\", command=self.openImage2)\n        menu.add_cascade(label=\"File\", menu=file)\n\n        self.canvas = tk.Canvas(self)\n        self.canvas.pack(fill=tk.BOTH, expand=True)\n        self.image = None  \n        self.image2 = None  \n\n    #Image 1\n    def openImage1(self):\n        filename = filedialog.askopenfilename(initialdir=os.getcwd(),title=\"Select BMP File\",\n                                              filetypes=[(\"BMP Files\",\"*.bmp\")])\n        if not filename:\n            return \n        load = Image.open(filename)\n        load = load.resize((960, 720), Image.ANTIALIAS)\n\n        if self.image is None: \n            w, h = load.size\n            width, height = root.winfo_screenmmwidth(), root.winfo_screenheight()\n            self.render = ImageTk.PhotoImage(load)  \n            self.image = self.canvas.create_image((w / 2, h / 2), image=self.render)\n            root.geometry(\"%dx%d\" % (w, h))\n        else:\n            w, h = load.size\n            width, height = root.winfo_screenmmwidth(), root.winfo_screenheight()\n            root.geometry(\"%dx%d\" % (width, height))\n            self.canvas.move(self.image, 960, 0)\n            self.render = ImageTk.PhotoImage(load) \n            self.image2 = self.canvas.create_image((w / 2, h / 2), image=self.render)\n\n    # Image 2\n    def openImage2(self):\n        filename = filedialog.askopenfilename(initialdir=os.getcwd(), title=\"Select BMP File\",\n                                              filetypes=[(\"BMP Files\", \"*.bmp\")])\n        if not filename:\n            return \n        load = Image.open(filename)\n        load = load.resize((960, 720), Image.ANTIALIAS)\n\n        if self.image is None:  \n            w, h = load.size\n            self.render = ImageTk.PhotoImage(load)  \n            self.image = self.canvas.create_image((w / 2, h / 2), image=self.render)\n            root.geometry(\"%dx%d\" % (w, h))\n        else:\n            w, h = load.size\n            width, height = root.winfo_screenmmwidth(), root.winfo_screenheight()\n            root.geometry(\"%dx%d\" % (width, height))\n            self.render = ImageTk.PhotoImage(load)  \n            self.image2 = self.canvas.create_image((w / 2, h / 2), image=self.render)\n            self.canvas.move(self.image2, 960, 0)\n\nroot = tk.Tk()\nroot.geometry(\"%dx%d\" % (300, 300))\nroot.title(\"BMP Image GUI\")\napp = Window(root)\napp.pack(fill=tk.BOTH, expand=1)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "anaconda", "digital-ocean"], "comments": [{"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1501711972, "post_id": 45471844, "comment_id": 77904686, "body": "Have you tried <a href=\"https://github.com/ContinuumIO/docker-images/issues/49\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 231, "user_id": 7238026, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da2174c97efff5f8d084d927c4e6a681?s=128&d=identicon&r=PG&f=1", "display_name": "DominikS", "link": "https://stackoverflow.com/users/7238026/dominiks"}, "reply_to_user": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1501713255, "post_id": 45471844, "comment_id": 77905143, "body": "@FredrikPihl I&#39;ve now directly installed Python3, and the desired packages with pip, which works fine. Thanks for the link, anyway!"}, {"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1501713324, "post_id": 45471844, "comment_id": 77905166, "body": "Glad you solved it!"}], "owner": {"reputation": 231, "user_id": 7238026, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da2174c97efff5f8d084d927c4e6a681?s=128&d=identicon&r=PG&f=1", "display_name": "DominikS", "link": "https://stackoverflow.com/users/7238026/dominiks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501711812, "creation_date": 1501711812, "question_id": 45471844, "link": "https://stackoverflow.com/questions/45471844/error-while-importing-matplotlib-in-anaconda", "title": "Error while importing matplotlib in Anaconda", "body": "<p>I frequently use Digitaloceans service to run longer Python scripts on the cloud. I use the standard settings for my droplet (Ubuntu 16.04.2 x64, 2GB memory, 40 GB disk space). \nOnce the remote machine is running, I install <a href=\"https://repo.continuum.io/archive/Anaconda3-4.4.0-Linux-x86_64.sh\" rel=\"nofollow noreferrer\">Anaconda</a>. This works nicely, and I follow precisely the same steps every time.</p>\n\n<p>Now I never had problems importing matplotlib before. This time, importing matplotlib throws an error:\n<code>ImportError: libGL.so.1: cannot open shared object file</code>\nUninstalling and reinstalling it using <code>conda</code> did not change anything. </p>\n\n<p>Does anyone experience a similar problem, or knows a solution to this?</p>\n"}, {"tags": ["python", "centos"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1501712695, "post_id": 45471817, "comment_id": 77904942, "body": "XFS supports file modification time. If you create a backup and never change it (because why would you), then the last modification time is a proxy for the creation time."}, {"owner": {"reputation": 173, "user_id": 6327124, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a90a8e9e4fa289b6161fc80fa6d60dfd?s=128&d=identicon&r=PG&f=1", "display_name": "ITnewbie", "link": "https://stackoverflow.com/users/6327124/itnewbie"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1501713507, "post_id": 45471817, "comment_id": 77905229, "body": "@DYZ Thanks for the quick response. Yes, I have tried to use os.path.getmtime to get modification time. I&#39;m just curious if there is any library or module that can do this feature already? Just in case the modification time has been modified."}], "owner": {"reputation": 173, "user_id": 6327124, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a90a8e9e4fa289b6161fc80fa6d60dfd?s=128&d=identicon&r=PG&f=1", "display_name": "ITnewbie", "link": "https://stackoverflow.com/users/6327124/itnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501711689, "creation_date": 1501711689, "question_id": 45471817, "link": "https://stackoverflow.com/questions/45471817/python-centos-get-file-creation-time-in-xfs", "title": "Python: centos get file creation time in xfs", "body": "<p>I have a Python script to create backup files automatically every day. </p>\n\n<p>I want the script to check hard drive space and delete the oldest file automatically if space is not enough.</p>\n\n<p>I named the backup file by date and convert the date to the timestamp to judge the oldest file.(the file with the smallest timestamp will be deleted)</p>\n\n<p>It works currently. But I was wondering if there is another way to reach out the feature more effectively or efficiently?</p>\n\n<p>The file system is XFS. I googled some research, looks like the XFS file system cannot store creation time.</p>\n"}, {"tags": ["python", "apache-spark", "docker", "apache-kafka"], "comments": [{"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501711898, "post_id": 45471793, "comment_id": 77904663, "body": "actually Python is/should be slower than Java, unless in specific cases where you&#39;re running in PyPy (this assumes that your application stays up long enough to compensate for jvm startup time). According to <a href=\"https://stackoverflow.com/questions/30662084/fail-to-create-sparkcontext\">Fail to create SparkContext</a> you should create a single Spark Context and each SC can have multiple streaming contexts."}, {"owner": {"reputation": 11, "user_id": 4625136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80d125e74e71400e049afff9a9bc079a?s=128&d=identicon&r=PG&f=1", "display_name": "claywd", "link": "https://stackoverflow.com/users/4625136/claywd"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501713955, "post_id": 45471793, "comment_id": 77905349, "body": "@cowbert they were running in spark-shell. I am submitting this job to spark so I wouldn&#39;t think the SparkContext would be shared."}, {"owner": {"reputation": 11, "user_id": 4625136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80d125e74e71400e049afff9a9bc079a?s=128&d=identicon&r=PG&f=1", "display_name": "claywd", "link": "https://stackoverflow.com/users/4625136/claywd"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501717164, "post_id": 45471793, "comment_id": 77906144, "body": "@cowbert gave it a shot anyways and it was a no go. There wasn&#39;t any recognized syntax for conf = new SparkConf() with the error marker set at &quot;new&quot;. Must be something else. I was wondering about the port though. Do you know how to specify the ui.port?"}], "owner": {"reputation": 11, "user_id": 4625136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80d125e74e71400e049afff9a9bc079a?s=128&d=identicon&r=PG&f=1", "display_name": "claywd", "link": "https://stackoverflow.com/users/4625136/claywd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1501711590, "creation_date": 1501711590, "question_id": 45471793, "link": "https://stackoverflow.com/questions/45471793/processing-data-streaming-through-kafka-using-spark-and-programming-in-python", "title": "Processing data streaming through kafka using Spark and programming in Python", "body": "<p>All in all I have to start by saying its been a bit of journey and this question probably requires you to have been where I am already. Okay diving in. </p>\n\n<p>So I made a docker container with everything I need to submit jobs to spark (installed on this container), that are written in python. I kick them off with supervisor, pipe the console output to a log for troubleshooting purposes, and basically I want to run multiple scripts to account for multiple scenarios streaming into a single kafka topic. </p>\n\n<p>Why do I want to do this? I am using Telegraf to collect metrics and sending all the metrics from multiple instances into a single topic in kafka named \"telegraf\". I know.... its very creative. Also, splitting up the topics based on a given instance is irrelevant right now because all the different metrics come in for each instance so I still gotta process them differently.</p>\n\n<p>Anyways so to give you an example, Telegraf collects some docker stats I want, two of which are \"docker_container_cpu\" and \"docker_container_mem\". Now My current solution is to have my script process the metric data differently based on the metric that is coming in. However, what I want to do is write lots and lots of scripts to each account for different scenarios that may be streaming into kafka. So one script for docker_container_cpu and another for docker_container_mem. Both of these would be listening to the kafka topic, both jobs submitted and running simultaneously. </p>\n\n<pre><code>command=bash -c \"spark-submit --jars $SPARK_HOME/jars/spark-streaming_2.11-$SPARK_VERSION.jar,$SPARK_HOME/jars/spark-streaming-kafka-0-8-assembly_2.11-$SPARK_VERSION.jar $SPARK_HOME/scripts/aggregateCPU.py localhost:32181 telegraf &amp;&gt; $SPARK_HOME/logs/cpu.log &amp;\"\n\ncommand=bash -c \" sleep 30s; spark-submit --jars $SPARK_HOME/jars/spark-streaming_2.11-$SPARK_VERSION.jar,$SPARK_HOME/jars/spark-streaming-kafka-0-8-assembly_2.11-$SPARK_VERSION.jar $SPARK_HOME/scripts/aggregateMem.py localhost:32181 telegraf &amp;&gt; $SPARK_HOME/logs/mem.log &amp;\"\n</code></pre>\n\n<p>So whats the problem you ask?</p>\n\n<p>This.....</p>\n\n<pre><code>    bash-4.3# cat logs/mem.log\n17/08/02 19:31:59 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n17/08/02 19:32:02 WARN Utils: Service 'SparkUI' could not bind on port 4040. Attempting port 4041.\n17/08/02 19:32:02 WARN Utils: Service 'SparkUI' could not bind on port 4041. Attempting port 4042.\n17/08/02 19:32:02 WARN Utils: Service 'SparkUI' could not bind on port 4042. Attempting port 4043.\n17/08/02 19:32:02 WARN Utils: Service 'SparkUI' could not bind on port 4043. Attempting port 4044.\n</code></pre>\n\n<p>I get these errors whenever I try to submit both jobs. </p>\n\n<p>So... In case you are wondering how you might reproduce my code, here is the snippet you will find relevant. </p>\n\n<pre><code>def setupKafkaStream():\nsc = SparkContext(appName=\"PythonStreamingDirectKafkaWordCount\")\nssc = StreamingContext(sc, 10)\n\nbrokers, topic = sys.argv[1:]\nkvs = KafkaUtils.createStream(ssc, brokers, \"spark-streaming-consumer\", {topic: 1})\nkvs.foreachRDD(handler)\n\nssc.start()\nssc.awaitTermination()\nreturn kafkaStream\n</code></pre>\n\n<p>Both scripts create the \"Spark Streaming Context\" so obviously this is a problem. I just don't know why yet. I want to utilize the power of spark cluster processing for all these metrics so my plan was to have multiple scripts subscribing to the relevant topic and then spark could split up the job as it sees fit. </p>\n\n<p>I'm wondering if I am limited to one \"Spark Streaming Context\" or if this thing is as powerful as I thought. </p>\n\n<p>PS: if any spark maintainers are listening, thank you for rewriting the whole library in scala, now lets make a bigger leap and rewrite it all using python. :) we love python. Java, no matter how a big a facelift (eh hmm... scala), is slow in comparison. </p>\n"}, {"tags": ["python", "win32com"], "answers": [{"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1501718583, "post_id": 45472139, "comment_id": 77906486, "body": "Your answer is about as clear as the linked MS documentation."}, {"owner": {"reputation": 13, "user_id": 8408129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ee2b5967d62f918ca92cbe104bcd45?s=128&d=identicon&r=PG&f=1", "display_name": "jibbers", "link": "https://stackoverflow.com/users/8408129/jibbers"}, "edited": false, "score": 0, "creation_date": 1501803475, "post_id": 45472139, "comment_id": 77953639, "body": "Worked perfectly! Thank you for the detailed answer and the background VBA documentation."}], "tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": true, "score": 1, "last_activity_date": 1501768854, "last_edit_date": 1501768854, "creation_date": 1501713664, "answer_id": 45472139, "question_id": 45471785, "link": "https://stackoverflow.com/questions/45471785/links-break-when-copying-excel-sheets-with-win32com/45472139#45472139", "title": "Links break when copying Excel sheets with win32com", "body": "<p><em>Edit in response to @martineau 's downvote of the answer and of the (admittedly unsatisfactory) Microsoft documentation.</em></p>\n\n<p>I think you haven't been able to find out how to do this because you have been looking in the wrong place. Your question really has little to do with Python or with <code>win32com</code>. </p>\n\n<p>This line</p>\n\n<pre><code>xl = win32com.client.gencache.EnsureDispatch('Excel.Application')\n</code></pre>\n\n<p>fires up a COM client called <code>xl</code> that talks to <code>excel.exe</code>. Your variable <code>xl</code> is a thin Python wrapper around a Microsoft COM object that can call Excel VBA functions. When you type <code>xl.</code>, everything after the dot is expected to be a VBA object or method. Any value (other than strings and floats) that you get back from a call is a VBA object in a thin Python wrapper. Python conventions do not necessarily apply to such objects.</p>\n\n<p>So to find out about what functions you need to call, you need to be looking at the <a href=\"https://msdn.microsoft.com/en-us/vba/excel-vba/articles/workbook-breaklink-method-excel\" rel=\"nofollow noreferrer\">Excel VBA documentation</a>. One difficulty with that documentation is that it assumes you are writing VBA, not Python. The other is that it isn't all that well-written.</p>\n\n<p>The VBA method you need is <code>Workbook.BreakLink()</code>.</p>\n\n<p>Call it after copying the original workbook and before saving the copy, like this (I'm using your dummy filename here, don't expect it to actually work without fixing that):</p>\n\n<pre><code>wb.Worksheets([\"Target Sheet\"]).Copy(Before=nwb.Worksheets(1))\nnwb.BreakLink(Name=r\"C:\\Users\\me\\dummy.xlsx\", Type=1)\nnwb.SaveAs(newfile)\n</code></pre>\n\n<p>The name of the link is the filename it points to, and the type of the link is <code>1</code> (for a link to an Excel spreadsheet). In this case you know the name of the link source (since you just made a copy of it) so there is no need to ask what the filename is, but in the general case you need to call <code>Workbook.LinkSources()</code> to find out what they are, and break them one by one.</p>\n"}], "owner": {"reputation": 13, "user_id": 8408129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ee2b5967d62f918ca92cbe104bcd45?s=128&d=identicon&r=PG&f=1", "display_name": "jibbers", "link": "https://stackoverflow.com/users/8408129/jibbers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 45472139, "answer_count": 1, "score": 1, "last_activity_date": 1501768854, "creation_date": 1501711573, "last_edit_date": 1501718086, "question_id": 45471785, "link": "https://stackoverflow.com/questions/45471785/links-break-when-copying-excel-sheets-with-win32com", "title": "Links break when copying Excel sheets with win32com", "body": "<p>I am trying to use win32com to copy a worksheet from my workbook to a new workbook. The code is working fine but the cell formulas in the new book point back to the original book. I would like to break the links in the new book so that these formulas are replaced with raw numbers. This is trivial to do in Excel but I haven't been able to find out how to do it using the win32com client in Python.</p>\n\n<p>Here is a snippet of my code:</p>\n\n<pre><code>import win32com.client\n\nxl = win32com.client.gencache.EnsureDispatch('Excel.Application')\nxl.Visible = True\n\n#Open &amp; Refresh Spreadsheet\nwb = xl.Workbooks.Open(r\"C:\\Users\\me\\dummy.xlsx\") #Dummy path\nprint(\"Refreshing data...\")\nwb.RefreshAll()\n\n#Create new book and copy target sheet over\nprint(\"Opening new workbook\")\nnwb = xl.Workbooks.Add()\nnewfile = r\"C:\\Users\\me\\dummy2.xlsx\"\nwb.Worksheets([\"Target Sheet\"]).Copy(Before=nwb.Worksheets(1))\nnwb.SaveAs(newfile)\n</code></pre>\n\n<p>This code works fine but in the saved \"dummy2\" file each of the cells containing formulas reference the original sheet. How can I break the links in the new book and/or copy values only from the original book?</p>\n"}, {"tags": ["python", "matplotlib"], "owner": {"reputation": 6525, "user_id": 936083, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dace92a4c0b65a1f52abbabd294ca1a8?s=128&d=identicon&r=PG", "display_name": "Casey Kuball", "link": "https://stackoverflow.com/users/936083/casey-kuball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1501711431, "creation_date": 1501711431, "question_id": 45471756, "link": "https://stackoverflow.com/questions/45471756/major-tick-labels-on-10-week-increments-minor-ticks-on-2-week-increments", "title": "Major tick labels on 10 week increments, minor ticks on 2 week increments", "body": "<p>I am trying to set up a graph to show some data over time, and I want to show specific dates as the x-axis major and minor ticks.  I am trying to set up Major ticks every 10 weeks of time, and Minor ticks every 2 weeks of time.</p>\n\n<p>The problem I am running into is that the minor and major ticks line up every 5th tick.  Is it possible to remove the minor ticks where there is a major tick?</p>\n\n<p>My code:</p>\n\n<pre><code>tenw_locator = matplotlib.dates.WeekdayLocator(matplotlib.dates.MO, interval=10)\ntwow_locator = matplotlib.dates.WeekdayLocator(matplotlib.dates.MO, interval=2)\n\nax.xaxis.set_major_locator(tenw_locator)\nax.xaxis.set_major_formatter(matplotlib.dates.AutoDateFormatter(tenw_locator))\nax.xaxis.set_minor_locator(twow_locator)\nax.xaxis.set_minor_formatter(matplotlib.dates.AutoDateFormatter(twow_locator))\n\nplt.setp(ax.xaxis.get_majorticklabels(), rotation=70)\nplt.setp(ax.xaxis.get_minorticklabels(), rotation=90)\n</code></pre>\n\n<p>The problem is that because the major tick labels are rotated differently, they overlap with the minor tick labels.</p>\n\n<p>I am looking at the <code>ax.xaxis.set_ticks</code> function, but it would mean manually calculating the minor tick dates, as it would need to exclude every 5th 2-week increment.</p>\n\n<p>Does matplotlib support any way to hide the minor tick labels where there are major tick labels?</p>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 4, "creation_date": 1501711266, "post_id": 45471683, "comment_id": 77904450, "body": "We can&#39;t see your JSON, but it&#39;s clear that one of the items you&#39;re referencing with <code>[]</code> does not exist. (That&#39;s the only possible reason for <i>index out of range</i> errors in any language.) Inspect your values and make sure they match what you&#39;re trying to read with all of those <code>Project[][][]</code> references."}, {"owner": {"reputation": 21, "user_id": 4847460, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fwzuf3LhhO0/AAAAAAAAAAI/AAAAAAAAB-s/0PmbTH4p9zk/photo.jpg?sz=128", "display_name": "fergalom", "link": "https://stackoverflow.com/users/4847460/fergalom"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1501771788, "post_id": 45471683, "comment_id": 77936410, "body": "excellent, thanks! Yes, one of the Project[][][] is not completed sometimes, code modified to accept this and apply a null value"}], "owner": {"reputation": 21, "user_id": 4847460, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fwzuf3LhhO0/AAAAAAAAAAI/AAAAAAAAB-s/0PmbTH4p9zk/photo.jpg?sz=128", "display_name": "fergalom", "link": "https://stackoverflow.com/users/4847460/fergalom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1133, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501752544, "creation_date": 1501711067, "last_edit_date": 1501752544, "question_id": 45471683, "link": "https://stackoverflow.com/questions/45471683/python-mysql-indexerror-list-index-out-of-range", "title": "Python MySQL IndexError: list index out of range", "body": "<p>Getting an <code>IndexError: list index out of range Error</code>. New to Python, complete beginner and would appreciate some help to understand whats wrong. </p>\n\n<p>Getting json from a timesheet api which i need to save to a mysql database</p>\n\n<pre><code>import requests\nimport urllib2\nfrom urllib2 import urlopen\nimport json \nimport mysql.connector\n\nsite = 'https://api.site.com/Projects/?version=5'\nhdr = {'Authorization': 'WRAP access_token=\"TOKEN\"', 'Accept': 'application/json'}\n\nreq = urllib2.Request(site, headers=hdr)\ntry:\n     page = urllib2.urlopen(req)\nexcept urllib2.HTTPError, e:\n     print e.fp.read()\n\nresponse = urllib2.urlopen(req).read()\njson_obj = json.loads(response.decode ('utf8'))\n\nconn = mysql.connector.connect(host = \"HOST_IP\",\n                   user = \"USER\",\n                   passwd = \"PASS\",\n                   db = \"DB\",\n                   port=3306,\n                   collation=\"utf8mb4_unicode_ci\")\n\ncursor = conn.cursor ()\n\nfor Project in json_obj[\"Projects\"]:\n     cursor.execute(\"\"\"\n            INSERT INTO project \n                (ID, Client_Name, Name, BusSector, ProjCat, SageCode)\n            VALUES \n                (%s, %s, %s, %s, %s, %s) \n            ON DUPLICATE KEY UPDATE\n               Name = VALUES(Client_Name),\n               Name = VALUES(Name),\n                Name = VALUES(BusSector),\n                Name = VALUES(ProjCat),\n                Name = VALUES(SageCode);\n                       \"\"\",(Project[\"ID\"],Project[\"Client\"][\"Name\"],Project[\"Name\"],Project[\"CustomFields\"][0][\"Values\"][0],Project[\"CustomFields\"][2][\"Values\"][0],Project[\"CustomFields\"][1][\"Values\"][0])     \n                      )\nconn.commit()\ncursor.close()\nconn.close() \n</code></pre>\n\n<p>The output from Traceback is:</p>\n\n<pre><code>line 52, in &lt;module&gt;  \"\"\",(Project[\"ID\"],Project[\"Client\"][\"Name\"],Project[\"Name\"],Project[\"CustomFields\"][0][\"Values\"][0],Project[\"CustomFields\"][2][\"Values\"][0],Project[\"CustomFields\"][1][\"Values\"][0])\n</code></pre>\n"}, {"tags": ["python", "mongodb", "pymongo"], "comments": [{"owner": {"reputation": 2968, "user_id": 602525, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/632b2a27e178851a53bf7b264bf2a7ea?s=128&d=identicon&r=PG", "display_name": "user602525", "link": "https://stackoverflow.com/users/602525/user602525"}, "edited": false, "score": 1, "creation_date": 1501716614, "post_id": 45471673, "comment_id": 77906021, "body": "It&#39;s hard to tell without really understanding the requirements. Its possible your initial assumption of needing to modify all of the docs in this manner is incorrect."}, {"owner": {"reputation": 3105, "user_id": 1276363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a5631d388d78ae813dc36095355cae?s=128&d=identicon&r=PG", "display_name": "donghyun208", "link": "https://stackoverflow.com/users/1276363/donghyun208"}, "reply_to_user": {"reputation": 2968, "user_id": 602525, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/632b2a27e178851a53bf7b264bf2a7ea?s=128&d=identicon&r=PG", "display_name": "user602525", "link": "https://stackoverflow.com/users/602525/user602525"}, "edited": false, "score": 0, "creation_date": 1501751296, "post_id": 45471673, "comment_id": 77919817, "body": "You&#39;re right. I didn&#39;t post working code because I&#39;m more interested in generally applicable design patterns than a specific solution."}], "answers": [{"tags": [], "owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "is_accepted": true, "score": 4, "last_activity_date": 1501716618, "creation_date": 1501716618, "answer_id": 45472538, "question_id": 45471673, "link": "https://stackoverflow.com/questions/45471673/pymongo-how-to-update-many-without-using-update-operators/45472538#45472538", "title": "PyMongo: How to update_many without using update operators?", "body": "<p>You can still apply bulk updates which is kinda similar to performing batch transactions in SQL databases (but without rollback so be careful). This is subtly documented but it is via the <code>bulk_write</code> method present on <code>pymongo.Collection</code> objects. The basic methodology is to manually aggregate your update operations by creating UpdateOne instances and putting them into a list. Then when you are ready to write to the db you call <code>bulk_write</code></p>\n\n<p>as a rudimentary example based on your current code:</p>\n\n<pre><code>from pymongo import UpdateOne\n\ndef modify_doc(doc):\n    // modify doc in place\n    return modified_doc\n\nbulk_updates = []\n\nfor doc in db.collection.find({}):\n    mod_doc = modify_doc(doc)\n    bulk_updates.append(UpdateOne({'_id': mod_doc._id}, mod_doc))\n\ndb.collection.bulk_write(bulk_updates)\n</code></pre>\n\n<p>For more Operations you can use with the bulk_write method here is the documentation link: <a href=\"http://api.mongodb.com/python/current/api/pymongo/operations.html\" rel=\"nofollow noreferrer\">http://api.mongodb.com/python/current/api/pymongo/operations.html</a></p>\n"}], "owner": {"reputation": 3105, "user_id": 1276363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a5631d388d78ae813dc36095355cae?s=128&d=identicon&r=PG", "display_name": "donghyun208", "link": "https://stackoverflow.com/users/1276363/donghyun208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 0, "accepted_answer_id": 45472538, "answer_count": 1, "score": 1, "last_activity_date": 1501716618, "creation_date": 1501711031, "question_id": 45471673, "link": "https://stackoverflow.com/questions/45471673/pymongo-how-to-update-many-without-using-update-operators", "title": "PyMongo: How to update_many without using update operators?", "body": "<p>What's the best way to update multiple documents when the modification cannot be directly expressed using update operators?</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>def modify_doc(doc):\n    // modify doc in place\n    return modified_doc\n\nfor doc in db.collection.find({}):\n    mod_doc = modify_doc(doc)\n    collection.replace_one({'_id': mod_doc._id}, new_doc)\n</code></pre>\n\n<p>I was also considering:</p>\n\n<pre><code>def get_update_instructions(doc):\n    mod_doc = modify_doc(doc)\n    // take diff between doc and mod_doc and create update_instructions\n    return update_instructions\n\nfor doc in db.collection.find({}):\n    update_instructions = get_update_instructions(doc)\n    collection.update_one({'_id': mod_doc._id}, update_instructions)\n</code></pre>\n\n<p>Is there a better way?</p>\n"}, {"tags": ["python", "nltk", "text-mining", "sentence"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1501712988, "post_id": 45471668, "comment_id": 77905052, "body": "You may want to train <code>PunktTokenizer</code> to improve its accuracy, see <a href=\"https://stackoverflow.com/questions/21160310/training-data-format-for-nltk-punkt\" title=\"training data format for nltk punkt\">stackoverflow.com/questions/21160310/&hellip;</a>"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1501749134, "post_id": 45471668, "comment_id": 77918169, "body": "Sentence boundary detection is hard to do without understanding what you read (so, for any computer program). If you train a new model, it may or may not perform as well as the one supplied with the nltk-- be prepared to evaluate both and compare. Unless you have text with strange punctuation/space conventions, the best approach is simply to live with imperfect results. How often does this happen, and how much do the mistakes <i>really</i> impact your practical goals?"}], "owner": {"reputation": 21, "user_id": 8408117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9700e1cd52d3efed7eac3d43cf5a1f2?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Dixie", "link": "https://stackoverflow.com/users/8408117/matt-dixie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501711010, "creation_date": 1501711010, "question_id": 45471668, "link": "https://stackoverflow.com/questions/45471668/nltk-sentence-tokenzier-punctuation-followed-by-double-quotes-issue", "title": "NLTK Sentence Tokenzier: Punctuation Followed by Double Quotes Issue", "body": "<p>NLTK PunktSentenceTokenizer doesn't find the end of sentence properly.</p>\n\n<pre><code>from nltk.tokenize.punkt import PunktSentenceTokenizer, PunktParameters\npunkt_param = PunktParameters()\npunkt_param.abbrev_types.add(['dr', 'vs', 'mr', 'mrs', 'prof', 'inc', 'rev'])\nsentence_splitter = PunktSentenceTokenizer(punkt_param)\nsentence_splitter.tokenize(u'In that paper, \"Has Financial Development Made the World Riskier?\", Rajan \"argued that disaster might loom.\" ')\n</code></pre>\n\n<p>Ouput:</p>\n\n<pre><code>[u'In that paper, \"Has Financial Development Made the World Riskier?\"',\n u', Rajan \"argued that disaster might loom.\"']\n</code></pre>\n\n<p>another one:</p>\n\n<pre><code>sentence_splitter.tokenize(u'Don \"Don C.\" Crowley')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[u'Don \"Don C.\"', u'Crowley']\n</code></pre>\n\n<p>Both inputs should not be split into two sentences. Is there any way to handle this?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1501710840, "creation_date": 1501710840, "answer_id": 45471633, "question_id": 45471562, "link": "https://stackoverflow.com/questions/45471562/reorganizing-extraneous-data-in-pandas/45471633#45471633", "title": "Reorganizing extraneous data in pandas", "body": "<p>You need <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.pivot.html\" rel=\"nofollow noreferrer\"><code>df.pivot</code></a>:</p>\n\n<pre><code>In [606]: df.pivot(index='Name', columns='Mealtime', values='Food')\nOut[606]: \nMealtime  1:00 pm 6:00 pm 8:00 am\nName                             \nJake      burrito   salad  coffee\nJohn        salad   pasta  cereal\nSara       panini   steak  yogurt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501711929, "post_id": 45471680, "comment_id": 77904670, "body": "Nice... planning to include a large dataset test?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501712878, "post_id": 45471680, "comment_id": 77905002, "body": "The defaultdict approach did better than I thought! Colour me impressed."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501712971, "post_id": 45471680, "comment_id": 77905044, "body": "All your solutions are so nice. I&#39;m out of upvotes, looks like I&#39;ll have to go reverse some more down votes xD"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501713077, "post_id": 45471680, "comment_id": 77905079, "body": "You seem to be the prolific down-voter (-: I don&#39;t want to be on your bad side."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501713174, "post_id": 45471680, "comment_id": 77905112, "body": "Naw... I have just as many downvotes as the next guy... it&#39;s just that... if I were to reverse an upvote, that person would lose 10 points, but reversing a down vote means +2 to that person and +1 to me and then +10 to you, so it&#39;s a win all around :)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501713274, "post_id": 45471680, "comment_id": 77905150, "body": "<a href=\"https://stackoverflow.com/users/4909087/c%E1%B4%8F%CA%9F%E1%B4%85s%E1%B4%98%E1%B4%87%E1%B4%87%E1%B4%85?tab=votes&amp;sort=downvote\"><b>Your DownVotes</b></a>  Mind you, I don&#39;t have permissions to see it."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501713406, "post_id": 45471680, "comment_id": 77905190, "body": "839^/607v according to that link. Guess I really need to relax a bit."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501713452, "post_id": 45471680, "comment_id": 77905210, "body": "No, I was always hoping there existed someone who counter balanced my niceness... you&#39;re the one (-:"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501713622, "post_id": 45471680, "comment_id": 77905257, "body": "I&#39;m sure there are grumps on here who&#39;ve <i>upvoted</i> 103 times out of 6,802. :p"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501713904, "post_id": 45471680, "comment_id": 77905335, "body": "My new <b>Option 0</b> kills it"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501714510, "post_id": 45471680, "comment_id": 77905508, "body": "I&#39;ve kinda got it, and it&#39;s really neat. Quick question. Can&#39;t you just do: <code>v = df.Food.values.reshape(un.size, um.size)</code>?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501714752, "post_id": 45471680, "comment_id": 77905568, "body": "Yes, for purposes of creating a new empty array because we can&#39;t just reshape because we don&#39;t know the order the names and mealtimes occur in.  Also, it&#39;s coincidence that this problem is well behaved in that we have all combinations of mealtimes and names represented and only once."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1501714580, "last_edit_date": 1501714580, "creation_date": 1501711061, "answer_id": 45471680, "question_id": 45471562, "link": "https://stackoverflow.com/questions/45471562/reorganizing-extraneous-data-in-pandas/45471680#45471680", "title": "Reorganizing extraneous data in pandas", "body": "<p><strong>Option 0</strong><br>\n<code>numpy</code> slicing with <code>pd.factorize</code>  </p>\n\n<p>I'm going to use <code>pd.factorize</code> to produce integer values for each unique <code>'Name'</code> and <code>'Mealtime'</code>.  Along side it, I get the unique values as well.  Each integer value ends up corresponding to the element in that integer position within the unique value array.  </p>\n\n<p>Now I know the number of unique names and unique mealtimes, so I know the size of my eventual pivoted array.  So I create an empty one that will await to have values assigned.</p>\n\n<p>Since I factorized and the factors are integer positions, I can use those to slice my empty array for assignment purposes... so I do.  I finally, put it all together with a new shiny dataframe.  </p>\n\n<pre><code>fn, un = pd.factorize(df.Name.values)\nfm, um = pd.factorize(df.Mealtime.values)\nv = np.empty((un.size, um.size), dtype=object)\nv[fn, fm] = df.Food.values\npd.DataFrame(v, un, um)\n\n     8:00 am  1:00 pm 6:00 pm\nJohn  cereal    salad   pasta\nSara  yogurt   panini   steak\nJake  coffee  burrito   salad\n</code></pre>\n\n<hr>\n\n<p><strong>Option 1</strong><br>\nUsing <code>set_index</code>/<code>unstack</code></p>\n\n<pre><code>df.set_index(['Name', 'Mealtime']).Food.unstack()\n\nMealtime  1:00 pm 6:00 pm 8:00 am\nName                             \nJake      burrito   salad  coffee\nJohn        salad   pasta  cereal\nSara       panini   steak  yogurt\n</code></pre>\n\n<hr>\n\n<p><strong>Option 2</strong><br>\nUsing <code>defaultdict</code>  </p>\n\n<pre><code>from collections import defaultdict\n\nd = defaultdict(dict)\n[d[m].setdefault(n, f) for n, m, f in df.values];\npd.DataFrame(d)\n\n      1:00 pm 6:00 pm 8:00 am\nJake  burrito   salad  coffee\nJohn    salad   pasta  cereal\nSara   panini   steak  yogurt\n</code></pre>\n\n<hr>\n\n<p><strong>Option 3</strong><br>\nBrute Force  </p>\n\n<pre><code>out = pd.DataFrame(index=df.Name.unique(), columns=df.Mealtime.unique())\n[out.set_value(n, m, f) for n, m, f in df.values]\nout\n\n     8:00 am  1:00 pm 6:00 pm\nJohn  cereal    salad   pasta\nSara  yogurt   panini   steak\nJake  coffee  burrito   salad\n</code></pre>\n\n<hr>\n\n<p><strong>Timing</strong><br>\nConclusion: use <code>pivot</code> for larger data with pure pandas.  Hard to beat its simplicity and ability to get the job done in this scenario.  But if you want to pivot with reckless speed, try <strong>Option 0</strong>.  </p>\n\n<pre><code>%%timeit\nfn, un = pd.factorize(df.Name.values)\nfm, um = pd.factorize(df.Mealtime.values)\nv = np.empty((un.size, um.size), dtype=object)\nv[fn, fm] = df.Food.values\npd.DataFrame(v, un, um)\n\n%timeit df.set_index(['Name', 'Mealtime']).Food.unstack()\n%timeit df.pivot('Name', 'Mealtime', 'Food')\n%timeit d = defaultdict(dict); [d[m].setdefault(n, f) for n, m, f in df.values]; pd.DataFrame(d)\n%timeit out = pd.DataFrame(index=df.Name.unique(), columns=df.Mealtime.unique()); [out.set_value(n, m, f) for n, m, f in df.values]; out\n</code></pre>\n\n<p><em>Small data</em>  </p>\n\n<pre><code>1000 loops, best of 3: 300 \u00b5s per loop\n1000 loops, best of 3: 1.82 ms per loop\n1000 loops, best of 3: 1.11 ms per loop\n1000 loops, best of 3: 541 \u00b5s per loop\n1000 loops, best of 3: 656 \u00b5s per loop\n</code></pre>\n\n<p><em>Larger data</em>  </p>\n\n<pre><code>from string import ascii_letters\n\nfoods = np.array([\n    'cereal', 'salad', 'pasta', 'yogurt',\n    'panini', 'steak', 'coffee', 'burrito'\n], dtype=object)\ntimes = pd.date_range(\n    pd.datetime.now().date(), periods=24, freq='H'\n).strftime('%-I:00 %p')\nnames = list(ascii_letters)\n\nidx = pd.MultiIndex.from_product([names, times], names=['Name', 'Mealtime'])\ndf = pd.DataFrame(dict(\n    Food=np.random.choice(foods, idx.size),\n), idx).reset_index()\n\n1000 loops, best of 3: 383 \u00b5s per loop\n1000 loops, best of 3: 1.99 ms per loop\n1000 loops, best of 3: 1.34 ms per loop\n100 loops, best of 3: 2.78 ms per loop\n100 loops, best of 3: 6.6 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 8407976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8bd1cacc61992a68051fb4288f7c11?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/8407976/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 45471633, "answer_count": 2, "score": 2, "last_activity_date": 1503897806, "creation_date": 1501710530, "last_edit_date": 1503897806, "question_id": 45471562, "link": "https://stackoverflow.com/questions/45471562/reorganizing-extraneous-data-in-pandas", "title": "Reorganizing extraneous data in pandas", "body": "<p>I have a dataframe organized like this...</p>\n\n<pre><code>**Name** | **Mealtime** | **Food**  \nJohn | 8:00 am | cereal  \nJohn | 1:00 pm | salad  \nJohn | 6:00 pm | pasta  \nSara | 8:00 am | yogurt  \nSara | 1:00 pm | panini  \nSara | 6:00 pm | steak  \nJake | 8:00 am | coffee  \nJake | 1:00 pm | burrito  \nJake | 6:00 pm | salad\n</code></pre>\n\n<p>And I need it to be organized like this</p>\n\n<pre><code>____| 8:00 am | 1:00 pm | 6:00 pm  \nJohn | cereal | salad | pasta  \nSara | yogurt | panini | steak  \nJake | coffee | burrito | salad\n</code></pre>\n\n<p>How would I go about doing that? Note that I am not looking for an aesthetic change. Eventually I would like to select rows of data to feed into a for loop in such a way as the name can be determined from the specific food entry. For example, having grabbed the \"1:00 pm\" column, \"salad\" would direct me to John. But if I had grabbed the \"6:00 pm\" column, \"salad\" would direct me to Jake.</p>\n"}, {"tags": ["python", "json", "parsing", "anaconda", "python-collections"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501710581, "post_id": 45471539, "comment_id": 77904168, "body": "What issue are you encountering? I don&#39;t know what you mean by &quot;everything in json.load seems to be geared toward dictionary content&quot;... but the <code>json</code> module handles any valid JSON just fine."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1501710706, "post_id": 45471539, "comment_id": 77904219, "body": "Aaand the problem is <i>this isn&#39;t valid JSON</i> because of the extra comma. Try copy-pasting it into <a href=\"https://jsonlint.com/\" rel=\"nofollow noreferrer\">jsonlint.com</a> and clicking validate."}, {"owner": {"reputation": 119, "user_id": 5302926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0fJeA_MS7Bk/AAAAAAAAAAI/AAAAAAAABXA/ye7zt4ntwF4/photo.jpg?sz=128", "display_name": "Jason Thurston", "link": "https://stackoverflow.com/users/5302926/jason-thurston"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501710983, "post_id": 45471539, "comment_id": 77904344, "body": "I&#39;m sorry,  I tried to create a simplified version of my json data for this post and I accidentally left in the comma.  I&#39;ve edited them out in the post."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501711175, "post_id": 45471539, "comment_id": 77904418, "body": "Ok, but now this loads just fine. Again <b>what exactly is the issue you are encountering</b>? You&#39;ve simply vaguely stated &quot;Json.load does not seem to even work with a array of dictionaries.&quot; but that is <b>definitely not true</b>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501711337, "post_id": 45471539, "comment_id": 77904477, "body": "Indeed, I&#39;ve put your example data into a file, and used your exact code and it runs as expected..."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501711473, "post_id": 45471539, "comment_id": 77904524, "body": "Also, please consider that &quot;it doesn&#39;t work&quot; <a href=\"https://meta.stackexchange.com/questions/147616/what-do-you-mean-it-doesnt-work\">really isn&#39;t an adequate problem specification</a>"}], "answers": [{"tags": [], "owner": {"reputation": 868, "user_id": 8398505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68440257a73de217ac3529653e000ad?s=128&d=identicon&r=PG&f=1", "display_name": "Dror Av.", "link": "https://stackoverflow.com/users/8398505/dror-av"}, "is_accepted": false, "score": 0, "last_activity_date": 1501710886, "creation_date": 1501710886, "answer_id": 45471645, "question_id": 45471539, "link": "https://stackoverflow.com/questions/45471539/python-json-load-decoding-list-of-objects/45471645#45471645", "title": "Python JSON load / decoding list of objects", "body": "<p>The <code>json</code> file is not valid, delete the last comma (',') in each dictionay. after which it will work fine :)</p>\n\n<pre><code>[\n    {\n        \"bar1\":  \"foobar1-1\",\n        \"bar2\":  \"foobar1-2\",\n        \"bar3\":  \"foobar1-3\"\n    },\n    {\n        \"bar1\":  \"foobar2-1\",\n        \"bar2\":  \"foobar2-2\",\n        \"bar3\":  \"foobar2-3\"\n    }\n]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1501712743, "post_id": 45471914, "comment_id": 77904953, "body": "<code>open(&#39;whatever.json&#39;, encoding=&#39;utf-16&#39;)</code> or maybe <code>&#39;utf-16-le&#39;</code> or <code>&#39;utf-16-be&#39;</code>, but you should always know your encoding. If you actually included the error in your post, that would have been a clue, but everyone was left to guess."}, {"owner": {"reputation": 119, "user_id": 5302926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0fJeA_MS7Bk/AAAAAAAAAAI/AAAAAAAABXA/ye7zt4ntwF4/photo.jpg?sz=128", "display_name": "Jason Thurston", "link": "https://stackoverflow.com/users/5302926/jason-thurston"}, "reply_to_user": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1501717440, "post_id": 45471914, "comment_id": 77906195, "body": "Sorry, this is my 1st python program.  I barely know how to use the Visual Studio 2017 IDE, the error seemed so ominous that I thought it had no value   Plus the DOS pop-up windows is a pain to copy and paste from..    BTW, the IDE doesn&#39;t show &quot;encoding&quot; as a parameter when it shows me options as I start typing a comma and then &quot;e&quot; but I added it anyway and it worked!  Thank You!"}], "tags": [], "owner": {"reputation": 119, "user_id": 5302926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0fJeA_MS7Bk/AAAAAAAAAAI/AAAAAAAABXA/ye7zt4ntwF4/photo.jpg?sz=128", "display_name": "Jason Thurston", "link": "https://stackoverflow.com/users/5302926/jason-thurston"}, "is_accepted": false, "score": 1, "last_activity_date": 1501712323, "creation_date": 1501712323, "answer_id": 45471914, "question_id": 45471539, "link": "https://stackoverflow.com/questions/45471539/python-json-load-decoding-list-of-objects/45471914#45471914", "title": "Python JSON load / decoding list of objects", "body": "<p>Wow this is embarrassing.  I just copied and pasted my code from this post to double check it and it worked.  I inspected the new file and saw that it is ASCII.  The original file that I've had a problem with for 2 days is UTF-16.  I converted the UTF-16 to ASCII and it json.load works!   So it's a problem with the file type.  I guess I just have to figure out how to get the json.load to understand UTF-16 files!</p>\n"}], "owner": {"reputation": 119, "user_id": 5302926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0fJeA_MS7Bk/AAAAAAAAAAI/AAAAAAAABXA/ye7zt4ntwF4/photo.jpg?sz=128", "display_name": "Jason Thurston", "link": "https://stackoverflow.com/users/5302926/jason-thurston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2430, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501712323, "creation_date": 1501710441, "last_edit_date": 1501710750, "question_id": 45471539, "link": "https://stackoverflow.com/questions/45471539/python-json-load-decoding-list-of-objects", "title": "Python JSON load / decoding list of objects", "body": "<p>I'm trying figure out how to load file called foo.json with this content:</p>\n\n<pre><code>[\n    {\n        \"bar1\":  \"foobar1-1\",\n        \"bar2\":  \"foobar1-2\",\n        \"bar3\":  \"foobar1-3\"\n    },\n    {\n        \"bar1\":  \"foobar2-1\",\n        \"bar2\":  \"foobar2-2\",\n        \"bar3\":  \"foobar2-3\"\n    }\n]\n</code></pre>\n\n<p>Code I've tried:</p>\n\n<pre><code> with open('foo.json') as data_file:    \n    print(data_file)\n    data = json.load(data_file)\n    print(data)\n</code></pre>\n\n<p>Everything I've seen parsing json with json.load seems to be geared toward dictionary content but this json represents an array of objects or an array of dictionaries.  Json.load does not seem to even work with a array of dictionaries.  Perhaps I need to use a different json parsing library for this.   Any help is appreciated.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 1254, "user_id": 1552998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e4ee1163c3c9a053d1ca5244c0ffc88?s=128&d=identicon&r=PG", "display_name": "stormfield", "link": "https://stackoverflow.com/users/1552998/stormfield"}, "edited": false, "score": 0, "creation_date": 1501758503, "post_id": 45471984, "comment_id": 77925241, "body": "I would need to process cell# wise since I thought I can multiprocess the read part to speed things up. So came up with a variation of your approach"}, {"owner": {"reputation": 1254, "user_id": 1552998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e4ee1163c3c9a053d1ca5244c0ffc88?s=128&d=identicon&r=PG", "display_name": "stormfield", "link": "https://stackoverflow.com/users/1552998/stormfield"}, "edited": false, "score": 0, "creation_date": 1501759373, "post_id": 45471984, "comment_id": 77925848, "body": "pastebin <a href=\"https://pastebin.com/5ritxZWF\" rel=\"nofollow noreferrer\">link</a>. FYI i know that is not how multiprocecssing works ,but wanted to illustrate similar approach.  @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 : Thanks for your answer please let me know if this approach is also fine."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1254, "user_id": 1552998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e4ee1163c3c9a053d1ca5244c0ffc88?s=128&d=identicon&r=PG", "display_name": "stormfield", "link": "https://stackoverflow.com/users/1552998/stormfield"}, "edited": false, "score": 1, "creation_date": 1501771010, "post_id": 45471984, "comment_id": 77935697, "body": "@stormfield Breaking up the merge operation will probably be slower because pandas has a lot of speed boosts that you may forego. I&#39;m not sure but it might be slower. Feel free to mark accepted of this helped."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1501712695, "creation_date": 1501712695, "answer_id": 45471984, "question_id": 45471522, "link": "https://stackoverflow.com/questions/45471522/join-dataframe-with-matrix-output-using-pandas/45471984#45471984", "title": "Join dataframe with matrix output using pandas", "body": "<p><em>Step 1:</em> Concatenate your inputs with <code>pd.concat</code> and merge with <code>inp_df</code> using  <code>df.merge</code></p>\n\n<pre><code>In [641]: out_df = pd.concat([matrix_df1, matrix_df2]).merge(inp_df)\n</code></pre>\n\n<p><em>Step 2:</em> Create the <code>distance</code> column with <code>df.apply</code> by using <code>A</code>'s values to index into the correct column</p>\n\n<pre><code>In [642]: out_df.assign(distance=out_df.apply(lambda x: x[str(int(x['A']))], axis=1))\\\n                                          [['A', 'B', 'cell', 'distance', 'avg_distance']]\nOut[642]: \n     A    B  cell  distance  avg_distance\n0  100  200     1       7.5         52.00\n1  115  270     1      53.0         50.00\n2  115  266     1      84.0         57.00\n3  145  255     2      74.9         53.47\n</code></pre>\n"}], "owner": {"reputation": 1254, "user_id": 1552998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e4ee1163c3c9a053d1ca5244c0ffc88?s=128&d=identicon&r=PG", "display_name": "stormfield", "link": "https://stackoverflow.com/users/1552998/stormfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 45471984, "answer_count": 1, "score": 0, "last_activity_date": 1501714722, "creation_date": 1501710354, "last_edit_date": 1501714722, "question_id": 45471522, "link": "https://stackoverflow.com/questions/45471522/join-dataframe-with-matrix-output-using-pandas", "title": "Join dataframe with matrix output using pandas", "body": "<p>I am trying to translate the input dataframe (inp_df) to output dataframe (out_df) using the the data from the cell based intermediate dataframe (matrix_df) as shown below.</p>\n\n<p>There are several cell number based files with distance values shown in matrix_df .</p>\n\n<p>The program iterates by cell &amp; fetches data from appropriate file so each time matrix_df will have the data for all rows of the current cell# that we are iterating for in inp_df.</p>\n\n<pre><code>inp_df\nA       B           cell\n100     200         1\n115     270         1\n145     255         2\n115     266         1\n\nmatrix_df (cell_1.csv)\nB           100     115     199     avg_distance\n200         7.5     80.7    67.8        52\n270         6.8     53      92          50\n266         58      84      31          57\n\nmatrix_df (cell_2.csv)\nB            145    121     166     avg_distance\n255          74.9   77.53   8       53.47\n\n\n\nout_df dataframe\nA       B           cell    distance    avg_distance\n100     200         1       7.5         52\n115     270         1       53          50\n145     255         2       74.9        53.47\n115     266         1       84          57\n</code></pre>\n\n<p>My current thought process for each cell# based data is </p>\n\n<ol>\n<li>use a apply function to go row by row</li>\n<li>then use a join based on column B in the inp_df with with matrix_df, where the matrix df is somehow translated into a tuple of column name, distance &amp; average distance.</li>\n</ol>\n\n<p>But I am looking for a pandonic way of doing this since my approach will slow down when there are millions of rows in the input. I am specifically looking for core logic inside an iteration to fetch the matches, since in each cell the number of columns in matrix_df would vary</p>\n\n<p>If its any help the matrix files is the distance based outputs from <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html\" rel=\"nofollow noreferrer\">sklearn.metrics.pairwise.pairwise_distances</a> . </p>\n\n<p><strong>NB:</strong> In inp_df the value of column B is unique and values of column A may or may not be unique</p>\n\n<p>Also the matrix_dfs first column was empty &amp; i had renamed it with the following code for easiness in understanding since it was a header-less matrix output file.</p>\n\n<pre><code>dist_df = pd.read_csv(mypath,index_col=False)\ndist_df.rename(columns={'Unnamed: 0':'B'}, inplace=True)\u200b\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "iterator", "django-views"], "answers": [{"comments": [{"owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "edited": false, "score": 0, "creation_date": 1501748505, "post_id": 45471586, "comment_id": 77917701, "body": "Thanks Moses you&#39;re a star!"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1501710620, "creation_date": 1501710620, "answer_id": 45471586, "question_id": 45471518, "link": "https://stackoverflow.com/questions/45471518/django-looping-through-zipped-lists-twice/45471586#45471586", "title": "Django, Looping Through Zipped Lists Twice", "body": "<p>Well, you can create a single list from the iterator and pass only that to your template context:</p>\n\n<pre><code>def malware(request):\n    lst, dictofvms = listofvms()\n    lst = list(lst)\n    malwarelist = listofmalware()\n    return render(request, 'malware.html', {\"malwarelist\": malwarelist, \n                                            \"lst\": lst})\n</code></pre>\n\n<p>Notice, how I've avoided using <code>list</code> as the name of the list to not shadow the built-in list function which is required to create a list from the iterator object.</p>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 2276559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/56ce55768795b5014b857fe90ddc7163?s=128&d=identicon&r=PG", "display_name": "Philip Southwell", "link": "https://stackoverflow.com/users/2276559/philip-southwell"}, "edited": false, "score": 0, "creation_date": 1541207909, "post_id": 45471595, "comment_id": 93149657, "body": "This is the simplest solution once you are in this situation"}], "tags": [], "owner": {"reputation": 59, "user_id": 7638302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5f6a8e38f446f390cf9b51b9c600d5?s=128&d=identicon&r=PG&f=1", "display_name": "artbn", "link": "https://stackoverflow.com/users/7638302/artbn"}, "is_accepted": false, "score": 2, "last_activity_date": 1501710669, "creation_date": 1501710669, "answer_id": 45471595, "question_id": 45471518, "link": "https://stackoverflow.com/questions/45471518/django-looping-through-zipped-lists-twice/45471595#45471595", "title": "Django, Looping Through Zipped Lists Twice", "body": "<p>The result of using <code>zip</code> is a <code>zip object</code> and not a list. Once you iterate through a <code>zip object</code> it is exhausted and you cannot iterate through it again.</p>\n\n<p>A solution to this is to convert your zipped object to a list which can be iterated over multiple times like such:</p>\n\n<p><code>mylist = list(zip(vmarray, uuidarray))</code></p>\n"}], "owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 45471586, "answer_count": 2, "score": 0, "last_activity_date": 1501710669, "creation_date": 1501710341, "question_id": 45471518, "link": "https://stackoverflow.com/questions/45471518/django-looping-through-zipped-lists-twice", "title": "Django, Looping Through Zipped Lists Twice", "body": "<p>So in essence the problem that I have is I cannot iterate through a zipped list twice. I've tried to copy the zipped list twice .</p>\n\n<pre><code>list = zip(vmarray, uuidarray)\n</code></pre>\n\n<p>This is where the list containing the vm's, in the view portion of the code is instantiated.</p>\n\n<pre><code>def malware(request):\n     list, dictofvms = listofvms()\n     listcopy = iter(list)\n     list, listcopy = tee(listcopy)\n     malwarelist = listofmalware()\n\nreturn render(request, 'malware.html', {\"malwarelist\": malwarelist, \"list\": list, \"listcopy\": listcopy})\n</code></pre>\n\n<p>This is the part of the code that transmits the request through to the actual webpage.</p>\n\n<p>Now when accessing it in the code when i loop through the malware list. It only allows me to loop through the list once, due to it being zipped/ an iterator. If there's any way that I can loop through the items that'd be fantastic. (there must be something simple) [i'm probably just being stupid]</p>\n\n<pre><code>  {% for malware in malwarelist %}\n{{ malware }}\n\n      {% for vm, uuid in list %}\n          {{ vm }}\n   {% endfor %}\n\n\n\n          {% for vm, uuid in listcopy %}\n      {{ vm }}\n   {% endfor %}\n\n\n\n\n\n\n  {% endfor %}\n</code></pre>\n"}, {"tags": ["python", "numpy", "optimization", "scipy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1501710937, "post_id": 45471476, "comment_id": 77904324, "body": "Step 1: figure out the correct Jacobian, because that&#39;s clearly not it."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1501710969, "post_id": 45471476, "comment_id": 77904337, "body": "(As in, before even writing any code, figure out what the mathematically correct Jacobian matrix would be.)"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1501711011, "post_id": 45471476, "comment_id": 77904355, "body": "How about diagonalizing the Jacobian; return a 2d array, <code>np.diag(out)</code>?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1501711141, "post_id": 45471476, "comment_id": 77904401, "body": "Are you trying to optimize a function of a scalar? You&#39;ll probably be better served just calling <code>scipy.optimize.root</code> in a loop."}, {"owner": {"reputation": 458, "user_id": 6431877, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a41974b6e6c58ec1a3345ecc3ed508dc?s=128&d=identicon&r=PG", "display_name": "46_and_2", "link": "https://stackoverflow.com/users/6431877/46-and-2"}, "edited": false, "score": 0, "creation_date": 1501711281, "post_id": 45471476, "comment_id": 77904453, "body": "Yes, I am trying to optimize a function of a scaler. If I pass in a list of initial guesses and then a list of args it gives me exactly what I am looking for. I just need a way to figure out how to pass in the jacobian as well. A loop will mostly likely make the code less efficient, right?"}, {"owner": {"reputation": 458, "user_id": 6431877, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a41974b6e6c58ec1a3345ecc3ed508dc?s=128&d=identicon&r=PG", "display_name": "46_and_2", "link": "https://stackoverflow.com/users/6431877/46-and-2"}, "edited": false, "score": 0, "creation_date": 1501711340, "post_id": 45471476, "comment_id": 77904478, "body": "The actual problem has thousands of data points at which I seek the root. That is why I want to get this to work."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1501711623, "post_id": 45471476, "comment_id": 77904569, "body": "SciPy is not vectorizing <code>scipy.optimize.root</code> over your guesses; it is treating your function as a multidimensional function with 5 inputs and 5 outputs, whose Jacobian should have 25 entries. If you try to find 5000 roots this way, it will expect a 25 million entry Jacobian. This is unlikely to be efficient. I recommend using a single-dimensional solver, probably <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.brentq.html#scipy.optimize.brentq\" rel=\"nofollow noreferrer\"><code>scipy.optimize.brentq</code></a>, and searching for one root at a time."}, {"owner": {"reputation": 458, "user_id": 6431877, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a41974b6e6c58ec1a3345ecc3ed508dc?s=128&d=identicon&r=PG", "display_name": "46_and_2", "link": "https://stackoverflow.com/users/6431877/46-and-2"}, "edited": false, "score": 0, "creation_date": 1501711812, "post_id": 45471476, "comment_id": 77904636, "body": "Okay. Let me try that."}], "owner": {"reputation": 458, "user_id": 6431877, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a41974b6e6c58ec1a3345ecc3ed508dc?s=128&d=identicon&r=PG", "display_name": "46_and_2", "link": "https://stackoverflow.com/users/6431877/46-and-2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1219, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501711033, "creation_date": 1501710166, "last_edit_date": 1501710509, "question_id": 45471476, "link": "https://stackoverflow.com/questions/45471476/python-scipy-how-to-find-multiple-roots-of-an-equation-by-passing-in-the-jaco", "title": "python (scipy): How to find multiple roots of an equation by passing in the jacobian as well", "body": "<p><strong>Problem Statement:</strong></p>\n\n<p>Consider the following code.</p>\n\n<pre><code>import numpy as np\nfrom scipy import optimize\n\ndef func(x, y):\n    out = 2 * np.arccos(1-x) - np.sin(2 * np.arccos(1- x)) - y\n    return out\n\ndef jac(x,y):\n    out = 4 * np.sin(np.arccos(1 - x))\n    return out\n\ninitial_guesses = np.array([0.25, 0.75, 1, 1.25, 1.5])\nargs = (1, 2, 3, 4, 5,)\nmultiple_roots = optimize.root(func, x0 = initial_guesses, method='hybr', \n                                                          args=(args,))\n</code></pre>\n\n<p>Everything works fine. </p>\n\n<p><strong>Passing in the Jacobian</strong></p>\n\n<p>But I also want to pass in the <code>jacobian</code> I calculated above as well. When I do:</p>\n\n<pre><code>initial_guesses = [0.25, 0.75, 1, 1.25, 1.5]\nargs = (1, 2, 3, 4, 5,)\nmultiple_sol_with_jac = optimize.root(func, x0 = initial_guesses, method='hybr', \n                                      args=(args,), jac=jac)\n</code></pre>\n\n<p><strong>Error:</strong> </p>\n\n<p>It gives me the following error\n<code>TypeError: fsolve: there is a mismatch between the input and output shape of the 'fprime' argument 'jac'.Shape should be (5, 5) but it is (5,)</code></p>\n\n<p>A similar question was asked <a href=\"http://TypeError:%20fsolve:%20there%20is%20a%20mismatch%20between%20the%20input%20and%20output%20shape%20of%20the%20&#39;fprime&#39;%20argument%20&#39;jac&#39;.Shape%20should%20be%20(5,%205)%20but%20it%20is%20(5,)\" rel=\"nofollow noreferrer\">here</a>. But it does not address passing in the <code>jacobian</code> when using <code>scipy.optimize.root</code> to find multiple roots.</p>\n\n<p><strong>Attempt:</strong>\nObviously we want to account now for the fact that we have a list of points at which we seek roots. So the jacobian needs to be appropriately modified to output a matrix rather than a scaler. I tried doing <code>jac = [jac] * 5</code> but it doesn't work.</p>\n\n<p><strong>Question</strong>:\nHow do I pass in the <code>jacobian</code> appropriately in this case?</p>\n"}, {"tags": ["python", "pandas", "merge", "inner-join"], "comments": [{"owner": {"reputation": 3325, "user_id": 4941166, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c2c1101a15e12b67c110510ec6641128?s=128&d=identicon&r=PG&f=1", "display_name": "WNG", "link": "https://stackoverflow.com/users/4941166/wng"}, "edited": false, "score": 0, "creation_date": 1501710397, "post_id": 45471466, "comment_id": 77904094, "body": "what result does your code give ?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501710566, "post_id": 45471466, "comment_id": 77904161, "body": "@MaxU What I don&#39;t understand is that this code does indeed give the correct result."}, {"owner": {"reputation": 1173, "user_id": 2021466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a70525a26ca51df8330157670d958a1?s=128&d=identicon&r=PG", "display_name": "mannaroth", "link": "https://stackoverflow.com/users/2021466/mannaroth"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501710608, "post_id": 45471466, "comment_id": 77904181, "body": "@MaxU They are slightly different although they represent the same thing - one is a non-null int64 while the other is int64. Could that be the issue?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501710612, "post_id": 45471466, "comment_id": 77904184, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05, i think it&#39;s because of duplicates in the <code>x</code> column"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501710671, "post_id": 45471466, "comment_id": 77904203, "body": "@MaxU You mean in OP&#39;s actual data?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501710689, "post_id": 45471466, "comment_id": 77904211, "body": "@mannaroth, do you have duplicates in the &quot;joining&quot; column - <code>x</code> in your sample DFs?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501710700, "post_id": 45471466, "comment_id": 77904216, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05, yep"}, {"owner": {"reputation": 1173, "user_id": 2021466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a70525a26ca51df8330157670d958a1?s=128&d=identicon&r=PG", "display_name": "mannaroth", "link": "https://stackoverflow.com/users/2021466/mannaroth"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501711009, "post_id": 45471466, "comment_id": 77904354, "body": "@MaxU - no, all items in the joining column &#39;x&#39; are unique. I&#39;m puzzled by this behavior, it should definitely work and yet it does not."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501711157, "post_id": 45471466, "comment_id": 77904409, "body": "@mannaroth, can you try to post <b>reproducible</b> sample data sets?"}, {"owner": {"reputation": 1173, "user_id": 2021466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a70525a26ca51df8330157670d958a1?s=128&d=identicon&r=PG", "display_name": "mannaroth", "link": "https://stackoverflow.com/users/2021466/mannaroth"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501711294, "post_id": 45471466, "comment_id": 77904463, "body": "@MaxU I have a few million rows in total. How can I provide such an example?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501711724, "post_id": 45471466, "comment_id": 77904606, "body": "@mannaroth, can you post an output of: <code>print(foo.shape, foo[&#39;x&#39;].nunique()); print(bar.shape, bar[&#39;x&#39;].nunique())</code>?"}, {"owner": {"reputation": 1173, "user_id": 2021466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a70525a26ca51df8330157670d958a1?s=128&d=identicon&r=PG", "display_name": "mannaroth", "link": "https://stackoverflow.com/users/2021466/mannaroth"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501712011, "post_id": 45471466, "comment_id": 77904695, "body": "@MaxU (307677, 8) 307677   (5862863, 6) 306106"}, {"owner": {"reputation": 1173, "user_id": 2021466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a70525a26ca51df8330157670d958a1?s=128&d=identicon&r=PG", "display_name": "mannaroth", "link": "https://stackoverflow.com/users/2021466/mannaroth"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1501712083, "post_id": 45471466, "comment_id": 77904725, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/150880/discussion-between-mannaroth-and-maxu\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1501712570, "creation_date": 1501712570, "answer_id": 45471964, "question_id": 45471466, "link": "https://stackoverflow.com/questions/45471466/pandas-inner-merge-join-returning-all-rows/45471964#45471964", "title": "Pandas inner merge/join returning all rows", "body": "<p>Usually it means that you have duplicates in the column(s) used for joining, resulting in cartesian product.</p>\n\n<p>Demo:</p>\n\n<pre><code>In [35]: foo\nOut[35]:\n   x  y  z\n0  a  1  2\n1  b  3  4\n2  c  5  6\n3  d  7  8\n\nIn [36]: bar\nOut[36]:\n   x  j  i\n0  a  9  0\n1  b  9  0\n2  a  9  0\n3  a  9  0\n4  b  9  0\n\nIn [37]: pd.merge(foo, bar)\nOut[37]:\n   x  y  z  j  i\n0  a  1  2  9  0\n1  a  1  2  9  0\n2  a  1  2  9  0\n3  b  3  4  9  0\n4  b  3  4  9  0\n</code></pre>\n"}], "owner": {"reputation": 1173, "user_id": 2021466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a70525a26ca51df8330157670d958a1?s=128&d=identicon&r=PG", "display_name": "mannaroth", "link": "https://stackoverflow.com/users/2021466/mannaroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 45471964, "answer_count": 1, "score": 2, "last_activity_date": 1501712570, "creation_date": 1501710108, "last_edit_date": 1501711876, "question_id": 45471466, "link": "https://stackoverflow.com/questions/45471466/pandas-inner-merge-join-returning-all-rows", "title": "Pandas inner merge/join returning all rows", "body": "<p>I'm trying to merge two data frames based on a column present in both, keeping only the intersection of the two sets.</p>\n\n<p>The desired result is:</p>\n\n<pre><code> foo           bar            foobar\nx y z        x j i           x y z j i\na 1 2        a 9 0           a 1 2 9 0\nb 3 4        b 9 0           b 3 4 9 0 \nc 5 6        c 9 0           c 5 6 9 0\nd 7 8        e 9 0           \n             f 9 0 \n</code></pre>\n\n<p>My code that does not produce the desired result is:</p>\n\n<pre><code>pd.merge(foo, bar, how='inner', on='x')\n</code></pre>\n\n<p>Instead, the code seems to return:</p>\n\n<pre><code> foo           bar            foobar\nx y z        x j i           x y z j i\na 1 2        a 9 0           a 1 2 9 0\nb 3 4        b 9 0           b 3 4 9 0 \nc 5 6        c 9 0           c 5 6 9 0\nd 7 8        e 9 0           e * * 9 0\n             f 9 0           f * * 9 0\n</code></pre>\n\n<p>(where * represents an NaN)</p>\n\n<p>Where am I going wrong? I've already reached the third Google page trying to fix this an nothing works. Whatever I do I get an outer join, with all rows in both sets. </p>\n"}, {"tags": ["python", "pandas", "dictionary", "dataframe", "replace"], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 11673440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rsHS.jpg?s=128&g=1", "display_name": "Aravinda_gn", "link": "https://stackoverflow.com/users/11673440/aravinda-gn"}, "edited": false, "score": 0, "creation_date": 1605667850, "post_id": 45471464, "comment_id": 114719600, "body": "&#39;replace&#39; can be used too&#39;   df[&#39;subid&#39;] = df[&#39;subid&#39;].replace(d)"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 5, "last_activity_date": 1501710096, "creation_date": 1501710096, "answer_id": 45471464, "question_id": 45471427, "link": "https://stackoverflow.com/questions/45471427/replace-values-in-a-column-based-on-a-dictionary-pandas/45471464#45471464", "title": "Replace values in a column based on a dictionary (Pandas)", "body": "<p>First, to facilitate quick replacement, create a flat dictionary. Don't use a <code>defaultdict</code>.</p>\n\n<pre><code>d = {}\nwith open('subject_ID_dict.csv') as f:\n    for line in f:\n        k, v = map(int, line.split())\n        d[k] = v\n</code></pre>\n\n<p>Next, use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html\" rel=\"noreferrer\"><code>df.map</code></a> to transform your <code>subid</code> column.</p>\n\n<pre><code>df['subid'] = df['subid'].map(d)\n</code></pre>\n"}], "owner": {"reputation": 997, "user_id": 4289314, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b2d813d4f448dc118468f2a2d69d29d6?s=128&d=identicon&r=PG&f=1", "display_name": "Maria", "link": "https://stackoverflow.com/users/4289314/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2398, "favorite_count": 0, "accepted_answer_id": 45471464, "answer_count": 1, "score": 3, "last_activity_date": 1501710267, "creation_date": 1501709934, "last_edit_date": 1501710267, "question_id": 45471427, "link": "https://stackoverflow.com/questions/45471427/replace-values-in-a-column-based-on-a-dictionary-pandas", "title": "Replace values in a column based on a dictionary (Pandas)", "body": "<p>I have a text file (subject_ID_dict.csv) that contains subject # mappings, like this:</p>\n\n<pre><code>30704   703\n30705   849\n30714   682\n30720   699\n30727   105\n30729   708\n30739   707\n30757   854\n30758   710\n30763   724\n30771   715\n30773   99\n30777   719\n30779   717\n30798   728\n30805   732\n30809   727\n30831   734\n30838   736\n30868   735\n30908   742\n30929   115\n30942   747\n30944   743\n30993   745\n31006   116\n31018   113\n31040   758\n31055   756\n31057   755\n31058   754\n31068   760\n31091   885\n31147   764\n31193   765\n31196   767\n31202   766\n31209   117\n31235   118\n31268   772\n31275   771\n40017   -88\n40018   542\n40021   557\n40023   28\n</code></pre>\n\n<p>I want to load this as a dictionary and use it to replace values in the first column in data.csv. So 40023 would become 28, for example.</p>\n\n<p>Here is the code I have:</p>\n\n<pre><code>import pandas as pd\nfrom collections import defaultdict\n\n# load text file where we want to replace things\ndf = pd.read_csv('data.csv', header=0)\n\n# make dictionary\nd = defaultdict(list)\nwith open('subject_ID_dict.csv') as f:\n    for line in f:\n        line=str(line)\n        k, v = map(int, line.split())\n        d[k].append(v)\nprint df['subid'].replace(d, inplace=True)\n</code></pre>\n\n<p>when I print d, I get this (snippet because it's quite long):</p>\n\n<pre><code>defaultdict(&lt;type 'list'&gt;, {30720: [699], 30727: [105], 30729: [708], 30739: [707], 70319: [7066], 30757: [854], 30758: [710], 30763: [724], 30771: [715], 30773: [99], 70514: [7052], 30777: [719], 30779: [717], 70721: [-88], 70405: [-88], 30798: [728], 50331: [503310], 30805: [732], 30809: [727], 70674: [7080], 30831: [734], 30838: [736], \n</code></pre>\n\n<p>How can I remap the \"subjid\" column of data.csv using my dictionary, d, from subject_ID_dict.csv?</p>\n"}, {"tags": ["python", "python-3.4"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6272805, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9d503ee8962cfb70581bf0086dcf7114?s=128&d=identicon&r=PG&f=1", "display_name": "Manan Patel", "link": "https://stackoverflow.com/users/6272805/manan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1502351924, "last_edit_date": 1502351924, "creation_date": 1501710885, "answer_id": 45471644, "question_id": 45471417, "link": "https://stackoverflow.com/questions/45471417/how-to-extract-values-when-there-are-two-matches-in-a-string/45471644#45471644", "title": "How to extract values when there are two matches in a string", "body": "<p>Can be done using <code>findall()</code> function</p>\n\n<pre><code>pat = re.compile(r'[drwxr-]+[\\s0-9]+(\\w+)[ 0-9 \\w]+[:0-9]+ (\\S+)')\nfor (name, file) in re.findall(pat, output):\n    print(name, file)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6272805, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9d503ee8962cfb70581bf0086dcf7114?s=128&d=identicon&r=PG&f=1", "display_name": "Manan Patel", "link": "https://stackoverflow.com/users/6272805/manan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502351924, "creation_date": 1501709884, "last_edit_date": 1501709989, "question_id": 45471417, "link": "https://stackoverflow.com/questions/45471417/how-to-extract-values-when-there-are-two-matches-in-a-string", "title": "How to extract values when there are two matches in a string", "body": "<p>I am running linux <code>ls -la | grep 'Jul  6'</code> command to grep the file names</p>\n\n<p>I am using re \n<code>[drwxr-]+[\\s0-9]+(\\w+)[ 0-9 \\w]+[:0-9]+ (\\S+)</code></p>\n\n<p>to catch two values, id and filename in this case 'mwhat' and 'scripts' in the first statement</p>\n\n<pre><code>drwxr-xr-x 15 mwhat 24500 4096 Jul 6 21:04 scripts\ndrwxr-xr-x 15 araza 24500 4096 Jul 6 21:04 IMAGEs\n</code></pre>\n\n<p>And then use group to catch them,</p>\n\n<pre><code>name = str(out.group(1))\nfile = str(out.group(2))\n</code></pre>\n\n<p>this works fine till I have 1 entry in the <code>ls</code> output. How can I handle more than 1 entry as mentioned in my output about?</p>\n\n<p>Purpose of the script is to fetch files from the location as per the date, if there are more than 1 entry for the date it should not fail</p>\n"}, {"tags": ["python", "unicode", "escaping"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1501710128, "post_id": 45471401, "comment_id": 77903998, "body": "That would not be a valid representation of the string. So you really need that you will have to implement it yourself."}, {"owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1501710323, "post_id": 45471401, "comment_id": 77904072, "body": "How can the definition line, in the python code, of the string as in <code>s=&quot;ab&#233;cd\\r\\t\\n&quot;</code> not be afterwards considered a valid representation of itself? I would even argue that it&#39;s its prime representation."}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1501710580, "post_id": 45471401, "comment_id": 77904167, "body": "In Python 2 it would at least be required to be marked as unicode with the <code>u</code>. Forgetting it usually end in troubles."}, {"owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1501710722, "post_id": 45471401, "comment_id": 77904227, "body": "Actually that&#39;s incorrect, you don&#39;t have to use the prefixing <code>u</code> if you declare the encoding after the shebang or if you are typing into ipython."}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1501711446, "post_id": 45471401, "comment_id": 77904513, "body": "That&#39;s a very common misconception about encodings in Python 2."}, {"owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1501712261, "post_id": 45471401, "comment_id": 77904786, "body": "What is a misconception? I maintain: you don&#39;t have to place a <code>u</code> character if you have the line <code># -*- coding: utf-8 -*-</code> in the same file or if you are using an interactive prompt."}, {"owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1501752123, "post_id": 45471401, "comment_id": 77920493, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/150927/discussion-between-xapple-and-klaus-d\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "edited": false, "score": 0, "creation_date": 1501710454, "post_id": 45471507, "comment_id": 77904116, "body": "But that&#39;s the whole point: to get an absolutely exhaustive list of all control sequences. The code you propose doesn&#39;t solve the problem and is not valid python because of the triple period on line 1."}, {"owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "edited": false, "score": 0, "creation_date": 1501711052, "post_id": 45471507, "comment_id": 77904367, "body": "I see now that you edited your answer and included the <code>\\s</code> option from the <code>re</code> package. I hadn&#39;t thought of that. It appears <code>\\s</code> is simply equivalent to any of: <code>\\t\\n\\r\\f\\v</code>. Is that all the control sequences there are?"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 1, "last_activity_date": 1501710472, "last_edit_date": 1501710472, "creation_date": 1501710288, "answer_id": 45471507, "question_id": 45471401, "link": "https://stackoverflow.com/questions/45471401/print-escaped-representation-of-a-unicode-string/45471507#45471507", "title": "Print escaped representation of a unicode string", "body": "<pre><code>mappings = {\"\\r\":\"\\\\r\",\"\\n\",\"\\\\n\",\"\\t\",\"\\\\t\",...}\nprint( \"\".join(mappings.get(ltr,ltr) for ltr in my_string))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>escaped = \"\\r\\n\\t...\"\nprint(\"\".join(repr(ltr) if ltr in escaped else ltr for ltr in my_string))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>print(re.sub(\"(\\s)\",lambda m:repr(m.group(0)),my_string)\n</code></pre>\n"}], "owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501710472, "creation_date": 1501709800, "last_edit_date": 1501710145, "question_id": 45471401, "link": "https://stackoverflow.com/questions/45471401/print-escaped-representation-of-a-unicode-string", "title": "Print escaped representation of a unicode string", "body": "<p>Similar questions have been asked on stackoverflow, but none of the answers deal with the possibility of having a string with accented characters (e.g. \u00e0\u00e9\u00ef) and special  characters (e.g. tab or carriage return) at the same time.</p>\n\n<p>Take the following 2.7 python function:</p>\n\n<pre><code>def print_escaped(string):\n    print 1, type(string)\n    print 2, string\n    print 3, repr(string)\n    print 4, string.encode('string_escape')\n    print 5, string.decode('utf-8')\n    print 6, string.decode('utf-8').encode('unicode_escape')\n    print 7, repr(string.decode('utf-8'))\n</code></pre>\n\n<p>When called with the input <code>ab\u00e9cd\\r\\t\\n</code> it will print:</p>\n\n<pre><code>1 &lt;type 'str'&gt;\n2 ab\u00e9cd\n\n3 'ab\\xc3\\xa9cd\\r\\t\\n'\n4 ab\\xc3\\xa9cd\\r\\t\\n\n5 ab\u00e9cd\n\n6 ab\\xe9cd\\r\\t\\n\n7 u'ab\\xe9cd\\r\\t\\n'\n</code></pre>\n\n<p>How can I print this string on the screen as simply <code>ab\u00e9cd\\r\\t\\n</code> ? I want to escape all control sequences but leave all \"normal\" readable codepoints untouched.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 8290376, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b5ebcb3ab0b52f1e8382d4aa6e67ff44?s=128&d=identicon&r=PG&f=1", "display_name": "codeninja", "link": "https://stackoverflow.com/users/8290376/codeninja"}, "edited": false, "score": 0, "creation_date": 1501765413, "post_id": 45471862, "comment_id": 77930614, "body": "thank you so much! Curious, why did you flip the dictionary around?"}], "tags": [], "owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "is_accepted": true, "score": 1, "last_activity_date": 1501767786, "last_edit_date": 1501767786, "creation_date": 1501711964, "answer_id": 45471862, "question_id": 45471351, "link": "https://stackoverflow.com/questions/45471351/loop-over-dataframe-columns-to-check-against-dictionary-keys/45471862#45471862", "title": "Loop over dataframe columns to check against dictionary keys", "body": "<p>Try the following:</p>\n\n<pre><code>import pandas as pd\nimport io\n\n\nexample = {'Fools':'Car','Red':'Car','Merc':'Car',\n           'Tesla':'Car','Doritos':'Food',\n           'Spiders':'Food','Reddy':'Food',\n           'Tomball':'Food', 'Lays':'Food', 'Contortion': 'Food'}\n\n# Flip the example dictionary around (keys become values and values become keys)\nvalue_dict = {}\nfor k, v in example.items():\n    value_dict.setdefault(v, [])\n    value_dict[v].append(k)\n\ntext = u\"\"\"WM          WH         WP           LC_REF\nTesla     Doritos     Spiders       DT 17 1C\nMerc      Lays        Contortion    DT 17 1C\nLambo     Finale        NaN         DT 17 1C\nReddy       Red         NaN         DT 17 1C\nTomball     Fools       NaN         DT 17 1C\"\"\"\n\ndf1 = pd.read_table(io.StringIO(text), header=0, sep=\"\\s{2,}\", engine='python')\n# Melt the dataframe first\ndf2 = pd.melt(df1, id_vars=['LC_REF'], value_name='vals', var_name='Category')\n\n# Get your dataframe for Food\nfood_df = df2.loc[df2.vals.isin(value_dict.get('Food'))].groupby(['LC_REF', 'Category']).apply(lambda x: ', '.join(x.vals)).reset_index()\nprint(food_df)\n\n#      LC_REF Category                    0\n# 0  DT 17 1C       WH        Doritos, Lays\n# 1  DT 17 1C       WM       Reddy, Tomball\n# 2  DT 17 1C       WP  Spiders, Contortion\n\n# Get your dataframe for Car\ncar_df = df2.loc[df2.vals.isin(value_dict.get('Car'))].groupby(['LC_REF', 'Category']).apply(lambda x: ', '.join(x.vals)).reset_index()\nprint(car_df)\n\n#      LC_REF Category            0\n# 0  DT 17 1C       WH   Red, Fools\n# 1  DT 17 1C       WM  Tesla, Merc\n</code></pre>\n\n<p>Some guiding steps:</p>\n\n<ol>\n<li><p>Flip around the <code>example</code> dictionary: keys to a list of values and values to keys. Doing this helps with searching for items. You put all the items related <code>Food</code> in one list and the items related to <code>Car</code> in another list. This way, if you want to check if a column contains <code>Food</code> items, all you have to do is use the <code>.isin</code> method of a pandas <code>Series</code> object and supply the list of <code>Food</code> items. Analogously, you'd follow the same procedure when looking for <code>Car</code> items.</p></li>\n<li><p><code>pd.melt</code> the starting dataframe (<code>df1</code>). This puts the dataframe in the shape (from wide to long) that is conducive for the subsequent operations.</p></li>\n<li><p>Use boolean indexing to get rows whose <code>vals</code> column contains either <code>Food</code> or <code>Car</code> items.</p></li>\n<li><p>Use a <code>group-by</code> operation on columns <code>LC_REF</code> and <code>Category</code> and then join the items in the <code>vals</code> column.</p></li>\n</ol>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 379, "user_id": 8290376, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b5ebcb3ab0b52f1e8382d4aa6e67ff44?s=128&d=identicon&r=PG&f=1", "display_name": "codeninja", "link": "https://stackoverflow.com/users/8290376/codeninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 45471862, "answer_count": 1, "score": 1, "last_activity_date": 1501767786, "creation_date": 1501709540, "question_id": 45471351, "link": "https://stackoverflow.com/questions/45471351/loop-over-dataframe-columns-to-check-against-dictionary-keys", "title": "Loop over dataframe columns to check against dictionary keys", "body": "<p>Hi all so I have a dataframe:</p>\n\n<pre><code>df1\n   WM          WH         WP           LC_REF\n0 Tesla     Doritos     Spiders        DT 17 1C\n1 Merc      Lays        Contortion     DT 17 1C\n2 Lambo     Finale        NaN          DT 17 1C\n3 Reddy       Red         NaN          DT 17 1C\n4 Tomball     Fools       NaN          DT 17 1C\n</code></pre>\n\n<p>and a dictionary </p>\n\n<pre><code>example = {'Fools':'Car','Red':'Car','Merc':'Car','Tesla':'Car','Doritos':'Food','Spiders':'Food','Reddy':'Food','Tomball':'Food'}\n</code></pre>\n\n<p>I wanted to know the most efficient way to check each item in every column, and then group the columns, such that if the column value matches to the value 'Car' or 'Food' then the desired output is:</p>\n\n<pre><code>df2 if key matches Car\n\n  LC_REF    vals        Category\n0 DT 17 1C  Merc,Tesla    WM\n1 DT 17 1C  Red, Fools    WH\n\n\ndf3 if key matches Food\n\n  LC_REF    vals                 Category\n0 DT 17 1C  Reddy,Tomball          WM\n1 DT 17 1C  Doritos, Lays          WH\n2 DT 17 1C  Spiders, Contortion    WP\n</code></pre>\n\n<p>So far</p>\n\n<pre><code>df = df.groupby('LC_REF',sort=False).agg(lambda x: ','.join(x.astype(str).str.upper()).replace(' ','')).stack().rename_axis(('LC_REF','a')).reset_index(name='vals')\n</code></pre>\n\n<p>is my code to group them but I am struggling with how to correctly separate them. Any help with this complex problem would be great.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "edited": false, "score": 0, "creation_date": 1501748217, "post_id": 45471197, "comment_id": 77917480, "body": "May I ask why I get downvoted? Is my question too simple or ill posed?"}], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "edited": false, "score": 0, "creation_date": 1501709507, "post_id": 45471272, "comment_id": 77903770, "body": "Is there also a simple workaround as <code>a[1,:,: :4]</code> in case I would want to take <code>a[1,:,[0,1,3]]</code> etc. (i.e. all except one value in the last index)"}, {"owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "edited": false, "score": 0, "creation_date": 1501709677, "post_id": 45471272, "comment_id": 77903828, "body": "Perfect, thanks very useful and easy to understand, thanks!"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 4, "last_activity_date": 1501709579, "last_edit_date": 1501709579, "creation_date": 1501709196, "answer_id": 45471272, "question_id": 45471197, "link": "https://stackoverflow.com/questions/45471197/python-multi-dimensional-notation-transpose-automatically/45471272#45471272", "title": "Python multi-dimensional notation transpose automatically", "body": "<p>This is an example of mixed basic and advanced indexing, as discussed in <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#combining-advanced-and-basic-indexing\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#combining-advanced-and-basic-indexing</a></p>\n\n<p>The slice dimension has been appended to the end.</p>\n\n<p>With one scalar index this is a marginal case for the ambiguity described there.  It's been discussed in previous SO questions and one or more bug/issues.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36207850/numpy-sub-array-assignment-with-advanced-mixed-indexing\">Numpy sub-array assignment with advanced, mixed indexing</a></p>\n\n<p>In this case you can replace the range with a slice, and get the expected order:</p>\n\n<pre><code>In [215]: a[1,:,range(4)].shape\nOut[215]: (4, 5)               # slice dimension last\nIn [216]: a[1,:,:4].shape\nOut[216]: (5, 4)\nIn [219]: a[1][:,[0,1,3]].shape\nOut[219]: (5, 3)\n</code></pre>\n"}], "owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 45471272, "answer_count": 1, "score": 0, "last_activity_date": 1501709579, "creation_date": 1501708847, "last_edit_date": 1501709025, "question_id": 45471197, "link": "https://stackoverflow.com/questions/45471197/python-multi-dimensional-notation-transpose-automatically", "title": "Python multi-dimensional notation transpose automatically", "body": "<p>I have the following minimal example:</p>\n\n<pre><code>a = np.zeros((5,5,5))\na[1,1,:] = [1,1,1,1,1]\nprint(a[1,:,range(4)])\n</code></pre>\n\n<p>I would expect as output an array with 5 rows and 4 columns, where we have ones on the second row. Instead it is an array with 4 rows and 5 columns with ones on the second column. What is happening here, and what can I do to get the output I expected?</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 4061346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VxCk1.png?s=128&g=1", "display_name": "Youssof H.", "link": "https://stackoverflow.com/users/4061346/youssof-h"}, "edited": false, "score": 0, "creation_date": 1614241045, "post_id": 45490472, "comment_id": 117326721, "body": "Hey Justin, your code is hard to understand. An explantion would be great. I have recognized that you didn&#39;t apply 3&#215;3 subgrids check, therfore the result is wrong. Make sure to know what a sudoku is generated of at <a href=\"https://en.wikipedia.org/wiki/Sudoku\" rel=\"nofollow noreferrer\">Sudoku - Wikipedia</a>."}], "tags": [], "owner": {"reputation": 303, "user_id": 4820012, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N_oT-55XkKE/AAAAAAAAAAI/AAAAAAAAGD8/p82YDrN7nZo/photo.jpg?sz=128", "display_name": "Justin Malinchak", "link": "https://stackoverflow.com/users/4820012/justin-malinchak"}, "is_accepted": false, "score": 1, "last_activity_date": 1501779959, "last_edit_date": 1501779959, "creation_date": 1501779597, "answer_id": 45490472, "question_id": 45471152, "link": "https://stackoverflow.com/questions/45471152/how-to-create-a-sudoku-puzzle-in-python/45490472#45490472", "title": "How to create a Sudoku puzzle in Python", "body": "<p>This should work.</p>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code>def sudoku(size):\n    import time\n    start_time=time.time()\n\n    import sys\n    import random as rn\n    mydict = {}\n    n = 0\n    print '--started calculating--'\n    while len(mydict) &lt; 9:\n        n += 1\n        x = range(1, size+1)\n        testlist = rn.sample(x, len(x))\n\n        isgood = True\n        for dictid,savedlist in mydict.items():\n            if isgood == False:\n                break\n            for v in savedlist:\n                if testlist[savedlist.index(v)] == v:\n                    isgood = False\n                    break\n\n        if isgood == True:\n            isgoodafterduplicatecheck = True\n            mod = len(mydict) % 3\n            dsavedlists = {}\n            dtestlists = {}\n            dcombindedlists = {}\n            for a in range(1,mod + 1):\n                savedlist = mydict[len(mydict) - a]               \n                for v1 in savedlist:\n                    modsavedlists = (savedlist.index(v1) / 3) % 3\n                    dsavedlists[len(dsavedlists)] = [modsavedlists,v1]\n                for t1 in testlist:\n                    modtestlists = (testlist.index(t1) / 3) % 3\n                    dtestlists[len(dtestlists)] = [modtestlists,t1]\n                for k,v2 in dsavedlists.items():\n                    dcombindedlists[len(dcombindedlists)] = v2\n                    dcombindedlists[len(dcombindedlists)] = dtestlists[k]\n            vsave = 0\n            lst1 = []\n            for k, vx in dcombindedlists.items():\n                vnew = vx[0]\n                if not vnew == vsave:\n                    lst1 = []\n                    lst1.append(vx[1])\n                else:\n                    if vx[1] in lst1:\n                        isgoodafterduplicatecheck = False\n                        break\n                    else:\n                        lst1.append(vx[1])\n                vsave = vnew\n\n            if isgoodafterduplicatecheck == True:\n\n                mydict[len(mydict)] = testlist\n                print 'success found', len(mydict), 'row'   \n\n    print '--finished calculating--'\n    total_time = time.time()-start_time\n    return mydict, n, total_time\n\nreturn_dict, total_tries, amt_of_time = sudoku(9)\nprint ''\nprint '--printing output--'\nfor n,v in return_dict.items():\n    print n,v\nprint 'process took',total_tries,'tries in', round(amt_of_time,2), 'secs'\nprint '-------------------'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 572, "user_id": 4339987, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_FtDudLYxfA/AAAAAAAAAAI/AAAAAAAAAVo/eh3agaDbnYg/photo.jpg?sz=128", "display_name": "lirtosiast", "link": "https://stackoverflow.com/users/4339987/lirtosiast"}, "edited": false, "score": 0, "creation_date": 1564284972, "post_id": 56350886, "comment_id": 100977311, "body": "I don&#39;t see why you need to input x, e, f separately-- e and f should be calculated from x, and you can even calculate x from the length of the array."}, {"owner": {"reputation": 303, "user_id": 4967582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0183f4b3f6c8b2affc93dbecf25e72?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Wells", "link": "https://stackoverflow.com/users/4967582/travis-wells"}, "reply_to_user": {"reputation": 572, "user_id": 4339987, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_FtDudLYxfA/AAAAAAAAAAI/AAAAAAAAAVo/eh3agaDbnYg/photo.jpg?sz=128", "display_name": "lirtosiast", "link": "https://stackoverflow.com/users/4339987/lirtosiast"}, "edited": false, "score": 0, "creation_date": 1564285119, "post_id": 56350886, "comment_id": 100977326, "body": "@lirtosiast I know its strange, but this best I got. I just started learning python. If there was a hint you can give me then I could take into consideration improving the code. By the way I just edited the answer. The code is working. Reducing inputs would be helpful."}, {"owner": {"reputation": 572, "user_id": 4339987, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_FtDudLYxfA/AAAAAAAAAAI/AAAAAAAAAVo/eh3agaDbnYg/photo.jpg?sz=128", "display_name": "lirtosiast", "link": "https://stackoverflow.com/users/4339987/lirtosiast"}, "edited": false, "score": 0, "creation_date": 1564288520, "post_id": 56350886, "comment_id": 100977673, "body": "Sure, some tips on improving this answer in no particular order: (0) Specify what this does, i.e. creates an n^2 by n^2 Sudoku grid when provided a permutation of n elements; (1) the comment about constant time is a bit strange, as it&#39;s impossible to output n^4 of anything in constant time; (2) Indentation is weird. Use 4 spaces per indent level and don&#39;t randomly use extra indentation with comments; (3) just input <code>n</code> and remove <code>x</code>, <code>f</code>, and <code>e</code>, replacing <code>x</code> and <code>f</code> with <code>n</code> and <code>e</code> with <code>n**2</code>, (5) you never mentioned what m is, and the proof that it&#39;s O(n^4) is trivial anyway."}, {"owner": {"reputation": 303, "user_id": 4967582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0183f4b3f6c8b2affc93dbecf25e72?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Wells", "link": "https://stackoverflow.com/users/4967582/travis-wells"}, "reply_to_user": {"reputation": 572, "user_id": 4339987, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_FtDudLYxfA/AAAAAAAAAAI/AAAAAAAAAVo/eh3agaDbnYg/photo.jpg?sz=128", "display_name": "lirtosiast", "link": "https://stackoverflow.com/users/4339987/lirtosiast"}, "edited": false, "score": 0, "creation_date": 1564291673, "post_id": 56350886, "comment_id": 100978065, "body": "@lirtosiast Right now, its not possible in my skillset. I&#39;m self-taught. So I&#39;m not able to follow the formal method. Thank you, this will help clarify it."}, {"owner": {"reputation": 303, "user_id": 4967582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0183f4b3f6c8b2affc93dbecf25e72?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Wells", "link": "https://stackoverflow.com/users/4967582/travis-wells"}, "reply_to_user": {"reputation": 572, "user_id": 4339987, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_FtDudLYxfA/AAAAAAAAAAI/AAAAAAAAAVo/eh3agaDbnYg/photo.jpg?sz=128", "display_name": "lirtosiast", "link": "https://stackoverflow.com/users/4339987/lirtosiast"}, "edited": false, "score": 0, "creation_date": 1564292127, "post_id": 56350886, "comment_id": 100978111, "body": "@lirtosiast m is defined in the proof by the way."}], "tags": [], "owner": {"reputation": 303, "user_id": 4967582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0183f4b3f6c8b2affc93dbecf25e72?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Wells", "link": "https://stackoverflow.com/users/4967582/travis-wells"}, "is_accepted": false, "score": 1, "last_activity_date": 1564291613, "last_edit_date": 1564291613, "creation_date": 1559082868, "answer_id": 56350886, "question_id": 45471152, "link": "https://stackoverflow.com/questions/45471152/how-to-create-a-sudoku-puzzle-in-python/56350886#56350886", "title": "How to create a Sudoku puzzle in Python", "body": "<p>If your goal is to create <em>9 x 9</em> Sudoku, then why not a simpler program?\n    Works on any of <em>n^2 x n^2</em> (boards) in poly-time. To create a puzzle, you may have to remove elements manually. Guaranteeing one solution requires some backtracking. Poly-time is what you want for larger n^2 x n^2 Sudoku Latin-Squares. </p>\n\n<pre><code>#Provide a list of non-repeating n-elements to output a valid sudoku grid.\n#this code runs on python3\nprint('enter with [1,2,3...] brackets')\ntup = input()[1:-1].split(',')\n    #Input required to map out valid n x m or n^2 x n^2 Sudoku Grid\nx = input('Enter mapping valid Sudoku eg. 3 for 9 x 9:')\ne = input('Enter 9 for 9 x 9 ...12 for 12 x 12:')\nf = input('Enter 3 if its a 9 x 9 ... n^2 x n^2:')\nx = int(x)\ne = int(e)\nf = int(f)\n    #Manipulation of Elements to prepare valid grid\nsquares = []\nfor i in range(len(tup)):\n      squares.append(tup[i:] + tup[:i])\n\n        #Everything below here is just printing\nfor s in range(x):\n          for d in range(0,e,f):\n            for si in range(s,e,f):\n              for li in range(d,d+f):\n                print(squares[si][li], end = '')\n            print('')\n\n#Remember that if you want\n#to create a single board of n^2 x n^2\n#you need to edit the below\n#for a valid grid\n#for example\n#a 9 x 9 \n#would be a 3 x 3\n#and so on.\n</code></pre>\n\n<p><strong>No repeating elements!</strong>\nFor grids larger than 9 x 9 please use additonal brackets for readablity. eg. [[01],[02],[03],....]\nAlso, please remember that you need to know multiplication to output a properly mapped n^2 x n^2. For example, a 25 x 25\nshould be a 5 x 5 for the inputs as follows</p>\n\n<p>For x, x = 5</p>\n\n<p>For e, e = 25</p>\n\n<p>for f, f = 5</p>\n\n<p>Also, I had a buddy who helped me convert my algorithm into this python code for my amateur Sudoku project. Thanks to that Reddit user.</p>\n\n<p>By the way, it's actually O(m^2) time.\n<a href=\"https://i.imgur.com/VvXh4bA.png\" rel=\"nofollow noreferrer\">Proof</a></p>\n\n<p>Thank you Reddit buddy for the help.</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 5289646, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BpDQMXfaRY4/AAAAAAAAAAI/AAAAAAAAASs/V7hO9qty8zQ/photo.jpg?sz=128", "display_name": "Johnny Gasyna", "link": "https://stackoverflow.com/users/5289646/johnny-gasyna"}, "edited": false, "score": 0, "creation_date": 1575327382, "post_id": 56581709, "comment_id": 104521444, "body": "base * (r % base) + r // base + c) % side  :  So how does this part of the algorithm work exactly?  I tried to unpack it but could you try and describe in plain english what this is doing, and how it mathematically works in the context of the for loops to create unique rows and columns? ( I understand the syntax of mod and floor etc, just wondering how you came up with this part of the algorithm ) ."}, {"owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "reply_to_user": {"reputation": 399, "user_id": 5289646, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BpDQMXfaRY4/AAAAAAAAAAI/AAAAAAAAASs/V7hO9qty8zQ/photo.jpg?sz=128", "display_name": "Johnny Gasyna", "link": "https://stackoverflow.com/users/5289646/johnny-gasyna"}, "edited": false, "score": 2, "creation_date": 1576074899, "post_id": 56581709, "comment_id": 104781241, "body": "The objective is to place numbers 1 through 9 with a rotation on each line that will ensure no repetitions within columns and blocks. This produces a valid solution starting with 1,2,3... on the first line.  Everything else is just randomization of that baseline solution by shuffling rows, columns and numbers.  To see the base pattern produced by the formula, you can change the shuffle() function to return the original range as is."}, {"owner": {"reputation": 399, "user_id": 5289646, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BpDQMXfaRY4/AAAAAAAAAAI/AAAAAAAAASs/V7hO9qty8zQ/photo.jpg?sz=128", "display_name": "Johnny Gasyna", "link": "https://stackoverflow.com/users/5289646/johnny-gasyna"}, "edited": false, "score": 0, "creation_date": 1576167241, "post_id": 56581709, "comment_id": 104819715, "body": "Yes that is helpful, It looks like the array index follows the pattern 0,3,6,1,4,7,2,5,8 (or 1,4,7,2,5,8,3,6,9 if you ignore 0 based), do you think its possible to simplify the formula base * (r % base) + r // base + c) % side to achieve this indexing pattern?"}, {"owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "reply_to_user": {"reputation": 399, "user_id": 5289646, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BpDQMXfaRY4/AAAAAAAAAAI/AAAAAAAAASs/V7hO9qty8zQ/photo.jpg?sz=128", "display_name": "Johnny Gasyna", "link": "https://stackoverflow.com/users/5289646/johnny-gasyna"}, "edited": false, "score": 2, "creation_date": 1576178188, "post_id": 56581709, "comment_id": 104824776, "body": "For a 9x9, you could build an offset array for rows: <code>offsets = [0,3,6,1,4,7,2,5,8]</code> and then use it with a simpler formula <code>(offsets[r]+c)%9</code> in the comprehension.  BTW this technique gives very fast results but it can only generate a subset (roughly 3x10^12) of the 6x10^21 possible solution board.  Valid variations of the offsets table will produce additional board patterns."}, {"owner": {"reputation": 243, "user_id": 566134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/yHEru.png?s=128&g=1", "display_name": "WhyWhat", "link": "https://stackoverflow.com/users/566134/whywhat"}, "edited": false, "score": 0, "creation_date": 1587757823, "post_id": 56581709, "comment_id": 108645792, "body": "What is &quot;a baseline valid solution&quot; ?? WHy isn~t that explained in the response?  =&gt; -1"}, {"owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "reply_to_user": {"reputation": 243, "user_id": 566134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/yHEru.png?s=128&g=1", "display_name": "WhyWhat", "link": "https://stackoverflow.com/users/566134/whywhat"}, "edited": false, "score": 1, "creation_date": 1587758671, "post_id": 56581709, "comment_id": 108646185, "body": "@WhyWhat, calm down. The baseline valid solution is a simple sudoku board that is valid ( lines, columns and blocks have all 9 numbers).  It can be generated by placing the numbers sequentially on the first line and then shifting them by one on the next line and by two on the 3rd line.  Then similar shifting on subsequent lines taking into account the block constraints.  This is what the <code>pattern(r,c)</code> function does (see all comments above)"}, {"owner": {"reputation": 80, "user_id": 9434762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Viktor Stefanov", "link": "https://stackoverflow.com/users/9434762/viktor-stefanov"}, "edited": false, "score": 0, "creation_date": 1611695269, "post_id": 56581709, "comment_id": 116533143, "body": "I know that i&#39;m quite late, but I am pondering upon this problem now and I am struggling to grasp the idea of randomizing the rows and columns. I get the shift 0, 1, 2 becomes 3, 4, 5, so all the blocks, cols and rows have unique 1-9, but why isn&#39;t the part where you call shuffle(rBase) breaking this? Can you elaborate please?"}, {"owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "edited": false, "score": 1, "creation_date": 1611701630, "post_id": 56581709, "comment_id": 116535400, "body": "rBase represents block numbers (0..base) and row/column numbers within a block.  You can shuffle rows and columns within a block and you can shuffle blocks within the board without breaking integrity.  This is why the row numbers and column numbers are formed by combining a block number with a row/col number <i>within</i> that group. (e.g. <code>g*base + r</code>)"}, {"owner": {"reputation": 80, "user_id": 9434762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Viktor Stefanov", "link": "https://stackoverflow.com/users/9434762/viktor-stefanov"}, "edited": false, "score": 0, "creation_date": 1611761671, "post_id": 56581709, "comment_id": 116555582, "body": "I get that. You say that you can shuffle rows and columns within a block. But isn&#39;t rows = shuffle([i for i in range(9)]) theoretically the same as g*base + r? It will return a shuffled list of range(0, 9)? I am having a hard time to grasp this concept, the pattern function is clear to me, could you explain further?"}, {"owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "edited": false, "score": 1, "creation_date": 1611761983, "post_id": 56581709, "comment_id": 116555755, "body": "Not really. <code>for r in shuffle(rBase)</code> in the comprehension only shuffles the 3 rows of the current group <code>g</code> between themselves.  Shuffling across the whole (9 row) range would break integrity between blocks.  In other words, we can swap rows 0 and 2 but not rows 1 and 3 because that would move numbers across horizontal blocks 0 and 1 possibly creating duplicates within these blocks."}, {"owner": {"reputation": 80, "user_id": 9434762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Viktor Stefanov", "link": "https://stackoverflow.com/users/9434762/viktor-stefanov"}, "edited": false, "score": 0, "creation_date": 1611763080, "post_id": 56581709, "comment_id": 116556365, "body": "Ahhh yes I had much difficulty understanding the concept of that but I seem to have gotten it. BTW your number removing code generates &#39;imperfect&#39; boards - with more than 1 solution. Can you give me some tips on how to generate a &#39;perfect&#39; board. I tried removing a number and checking if there is only 1 solution but it doesn&#39;t work - probably implementation error tho. Any suggestions?"}, {"owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "reply_to_user": {"reputation": 80, "user_id": 9434762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Viktor Stefanov", "link": "https://stackoverflow.com/users/9434762/viktor-stefanov"}, "edited": false, "score": 1, "creation_date": 1611766685, "post_id": 56581709, "comment_id": 116557996, "body": "@Viktor Stefanov, see my latest EDIT"}], "tags": [], "owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "is_accepted": true, "score": 17, "last_activity_date": 1611768129, "last_edit_date": 1611768129, "creation_date": 1560432764, "answer_id": 56581709, "question_id": 45471152, "link": "https://stackoverflow.com/questions/45471152/how-to-create-a-sudoku-puzzle-in-python/56581709#56581709", "title": "How to create a Sudoku puzzle in Python", "body": "<p>You can generate a random sudoku solution board where all numbers are filled in and then remove some of them to create the puzzle.  This will ensure that the puzzle always has a solution.  Making sure that it has exactly one solution is a bit more challenging (hint: you must leave at least 17 numbers for a 9x9 sudoku)</p>\n<p>The algorithm below will generate a NxN random sudoku solution board instantly for N &lt; 1000.</p>\n<pre><code>base  = 3\nside  = base*base\n\n# pattern for a baseline valid solution\ndef pattern(r,c): return (base*(r%base)+r//base+c)%side\n\n# randomize rows, columns and numbers (of valid base pattern)\nfrom random import sample\ndef shuffle(s): return sample(s,len(s)) \nrBase = range(base) \nrows  = [ g*base + r for g in shuffle(rBase) for r in shuffle(rBase) ] \ncols  = [ g*base + c for g in shuffle(rBase) for c in shuffle(rBase) ]\nnums  = shuffle(range(1,base*base+1))\n\n# produce board using randomized baseline pattern\nboard = [ [nums[pattern(r,c)] for c in cols] for r in rows ]\n\nfor line in board: print(line)\n\n[6, 2, 5, 8, 4, 3, 7, 9, 1]\n[7, 9, 1, 2, 6, 5, 4, 8, 3]\n[4, 8, 3, 9, 7, 1, 6, 2, 5]\n[8, 1, 4, 5, 9, 7, 2, 3, 6]\n[2, 3, 6, 1, 8, 4, 9, 5, 7]\n[9, 5, 7, 3, 2, 6, 8, 1, 4]\n[5, 6, 9, 4, 3, 2, 1, 7, 8]\n[3, 4, 2, 7, 1, 8, 5, 6, 9]\n[1, 7, 8, 6, 5, 9, 3, 4, 2]\n</code></pre>\n<p>You can then remove some of the numbers from the sudoku solution to create the puzzle:</p>\n<pre><code>squares = side*side\nempties = squares * 3//4\nfor p in sample(range(squares),empties):\n    board[p//side][p%side] = 0\n\nnumSize = len(str(side))\nfor line in board: print(&quot;[&quot;+&quot;  &quot;.join(f&quot;{n or '.':{numSize}}&quot; for n in line)+&quot;]&quot;)\n\n[6  .  .  .  .  3  .  .  1]\n[.  9  .  .  .  .  .  .  3]\n[4  .  3  .  .  .  6  .  .]\n[.  .  .  5  9  .  2  .  6]\n[.  .  .  .  .  .  .  .  .]\n[.  .  7  .  .  .  .  .  4]\n[.  .  .  .  .  .  1  7  .]\n[.  .  2  .  .  8  .  .  .]\n[.  .  8  .  .  .  .  4  2]\n</code></pre>\n<p>For 4x4 up to 36x36 puzzles, you could make a nicer print of the board like this:</p>\n<pre><code>def expandLine(line):\n    return line[0]+line[5:9].join([line[1:5]*(base-1)]*base)+line[9:13]\nline0  = expandLine(&quot;\u2554\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2557&quot;)\nline1  = expandLine(&quot;\u2551 . \u2502 . \u2551 . \u2551&quot;)\nline2  = expandLine(&quot;\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u2562&quot;)\nline3  = expandLine(&quot;\u2560\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2563&quot;)\nline4  = expandLine(&quot;\u255a\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u255d&quot;)\n\nsymbol = &quot; 1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;\nnums   = [ [&quot;&quot;]+[symbol[n] for n in row] for row in board ]\nprint(line0)\nfor r in range(1,side+1):\n    print( &quot;&quot;.join(n+s for n,s in zip(nums[r-1],line1.split(&quot;.&quot;))) )\n    print([line2,line3,line4][(r%side==0)+(r%base==0)])\n\n\u2554\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2557\n\u2551 6 \u2502   \u2502   \u2551   \u2502   \u2502 3 \u2551   \u2502   \u2502 1 \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502 9 \u2502   \u2551   \u2502   \u2502   \u2551   \u2502   \u2502 3 \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551 4 \u2502   \u2502 3 \u2551   \u2502   \u2502   \u2551 6 \u2502   \u2502   \u2551\n\u2560\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2563\n\u2551   \u2502   \u2502   \u2551 5 \u2502 9 \u2502   \u2551 2 \u2502   \u2502 6 \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502   \u2502   \u2551   \u2502   \u2502   \u2551   \u2502   \u2502   \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502   \u2502 7 \u2551   \u2502   \u2502   \u2551   \u2502   \u2502 4 \u2551\n\u2560\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2563\n\u2551   \u2502   \u2502   \u2551   \u2502   \u2502   \u2551 1 \u2502 7 \u2502   \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502   \u2502 2 \u2551   \u2502   \u2502 8 \u2551   \u2502   \u2502   \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502   \u2502 8 \u2551   \u2502   \u2502   \u2551   \u2502 4 \u2502 2 \u2551\n\u255a\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u255d\n</code></pre>\n<p><strong>[EDIT]</strong></p>\n<p>Here are some additional information on the shuffling process ...</p>\n<p>Shuffling rows is broken down in groups of 3 rows.  It is ok to swap groups as a whole but we can't swap rows across groups without breaking the integrity of the blocks. (the same reasoning applies to columns)</p>\n<p>For example:</p>\n<pre><code>0 [6, 2, 5,  8, 4, 3,  7, 9, 1] \\                 -|\n1 [7, 9, 1,  2, 6, 5,  4, 8, 3] |  group 0 -|     -| r in shuffle(rBase) \n2 [4, 8, 3,  9, 7, 1,  6, 2, 5] /           |     -|\n                                            |\n3 [8, 1, 4,  5, 9, 7,  2, 3, 6] \\           |     -|\n4 [2, 3, 6,  1, 8, 4,  9, 5, 7] |  group 1 -| *   -| r in shuffle(rBase)\n5 [9, 5, 7,  3, 2, 6,  8, 1, 4] /           |     -|\n                                            |\n6 [5, 6, 9,  4, 3, 2,  1, 7, 8] \\           |     -|\n7 [3, 4, 2,  7, 1, 8,  5, 6, 9] |  group 2 -|     -| r in shuffle(rBase)\n8 [1, 7, 8,  6, 5, 9,  3, 4, 2] /                 -|\n\n                                * for g in shuffle(rBase)\n</code></pre>\n<p>We can swap groups 0,1,2 by moving all 3 of their rows at the same time:</p>\n<pre><code>3 [8, 1, 4,  5, 9, 7,  2, 3, 6] \\           |     -|\n4 [2, 3, 6,  1, 8, 4,  9, 5, 7] |  group 1 -|     -| r in shuffle(rBase)\n5 [9, 5, 7,  3, 2, 6,  8, 1, 4] /           |     -|\n                                            |\n6 [5, 6, 9,  4, 3, 2,  1, 7, 8] \\           |     -|\n7 [3, 4, 2,  7, 1, 8,  5, 6, 9] |  group 2 -| *   -| r in shuffle(rBase)\n8 [1, 7, 8,  6, 5, 9,  3, 4, 2] /                 -|\n                                            |\n0 [6, 2, 5,  8, 4, 3,  7, 9, 1] \\           |     -|\n1 [7, 9, 1,  2, 6, 5,  4, 8, 3] |  group 0 -|     -| r in shuffle(rBase) \n2 [4, 8, 3,  9, 7, 1,  6, 2, 5] /           |     -|\n\n                                * for g in shuffle(rBase)\n</code></pre>\n<p>And we can swap between the 3 rows of a group (e.g. 3,4,5) ...</p>\n<pre><code>0 [6, 2, 5,  8, 4, 3,  7, 9, 1] \\                 -|\n1 [7, 9, 1,  2, 6, 5,  4, 8, 3] |  group 0 -|     -| r in shuffle(rBase) \n2 [4, 8, 3,  9, 7, 1,  6, 2, 5] /           |     -|\n                                            |\n5 [9, 5, 7,  3, 2, 6,  8, 1, 4] \\           |     -|\n4 [2, 3, 6,  1, 8, 4,  9, 5, 7] |  group 1 -| *   -| r in shuffle(rBase)\n3 [8, 1, 4,  5, 9, 7,  2, 3, 6] /           |     -|\n                                            |\n6 [5, 6, 9,  4, 3, 2,  1, 7, 8] \\           |     -|\n7 [3, 4, 2,  7, 1, 8,  5, 6, 9] |  group 2 -|     -| r in shuffle(rBase)\n8 [1, 7, 8,  6, 5, 9,  3, 4, 2] /                 -|\n\n                                * for g in shuffle(rBase)\n</code></pre>\n<p>We CANNOT swap rows across groups (e.g. 1 &lt;--&gt; 3):</p>\n<pre><code>0 [6, 2, 5,  8, 4, 3,  7, 9, 1] \\                 -|\n3 [8, 1, 4,  5, 9, 7,  2, 3, 6] |  group 0 -|     -| r in shuffle(rBase) \n2 [4, 8, 3,  9, 7, 1,  6, 2, 5] /           |     -|\n                                            |\n1 [7, 9, 1,  2, 6, 5,  4, 8, 3] \\           |     -|\n4 [2, 3, 6,  1, 8, 4,  9, 5, 7] |  group 1 -| *   -| r in shuffle(rBase)\n5 [9, 5, 7,  3, 2, 6,  8, 1, 4] /           |     -|\n                                            |\n6 [5, 6, 9,  4, 3, 2,  1, 7, 8] \\           |     -|\n7 [3, 4, 2,  7, 1, 8,  5, 6, 9] |  group 2 -|     -| r in shuffle(rBase)\n8 [1, 7, 8,  6, 5, 9,  3, 4, 2] /                 -|\n\n                                * for g in shuffle(rBase)\n</code></pre>\n<p><em>See the duplicate 8 in the top left block, duplicate 7 below that, etc.</em></p>\n<p><strong>Single solution puzzle</strong></p>\n<p>In order to generate a sudoku puzzle with only one solution you will need a solver function that can tell you if there are more than one solution.  The strategy I would suggest is to start with 75% (or more) of the numbers removed, then check that there is only one solution.  If there is more than one solution, put back a number and check again.  You can put back a number at a random position or select a position where the solutions differ (which will converge faster to a single solution puzzle)</p>\n<p>First write a solver that will generate all solutions that it finds (ideally as a generator because we only need the first 2).  Here's a simple one:</p>\n<pre><code>def shortSudokuSolve(board):\n    size    = len(board)\n    block   = int(size**0.5)\n    board   = [n for row in board for n in row ]      \n    span    = { (n,p): { (g,n)  for g in (n&gt;0)*[p//size, size+p%size, 2*size+p%size//block+p//size//block*block] }\n                for p in range(size*size) for n in range(size+1) }\n    empties = [i for i,n in enumerate(board) if n==0 ]\n    used    = set().union(*(span[n,p] for p,n in enumerate(board) if n))\n    empty   = 0\n    while empty&gt;=0 and empty&lt;len(empties):\n        pos        = empties[empty]\n        used      -= span[board[pos],pos]\n        board[pos] = next((n for n in range(board[pos]+1,size+1) if not span[n,pos]&amp;used),0)\n        used      |= span[board[pos],pos]\n        empty     += 1 if board[pos] else -1\n        if empty == len(empties):\n            solution = [board[r:r+size] for r in range(0,size*size,size)]\n            yield solution\n            empty -= 1\n</code></pre>\n<p>Starting with a <code>solution</code> variable with all numbers present and <code>board</code> variable containing the puzzle with 3/4 of numbers cleared, you can add numbers back to the board until there is only one way to solve it:</p>\n<pre><code>solution=[[9, 5, 3, 1, 6, 7, 4, 2, 8],\n          [4, 2, 8, 3, 5, 9, 7, 6, 1],\n          [7, 6, 1, 8, 2, 4, 9, 5, 3],\n          [5, 8, 4, 9, 3, 6, 2, 1, 7],\n          [6, 3, 9, 7, 1, 2, 5, 8, 4],\n          [2, 1, 7, 4, 8, 5, 6, 3, 9],\n          [3, 4, 5, 6, 9, 1, 8, 7, 2],\n          [8, 7, 2, 5, 4, 3, 1, 9, 6],\n          [1, 9, 6, 2, 7, 8, 3, 4, 5]]    \nboard=[ [0, 0, 0, 0, 0, 0, 0, 0, 8],\n        [0, 2, 0, 0, 5, 0, 7, 6, 0],\n        [0, 6, 0, 0, 0, 0, 0, 0, 3],\n        [5, 0, 0, 0, 0, 0, 2, 0, 7],\n        [0, 3, 0, 0, 1, 0, 0, 0, 0],\n        [2, 0, 0, 4, 0, 0, 0, 3, 0],\n        [0, 0, 0, 6, 0, 0, 0, 0, 0],\n        [8, 0, 0, 0, 0, 0, 0, 0, 0],\n        [1, 0, 0, 2, 7, 0, 0, 4, 0]]\n    \nimport random\nfrom itertools import islice\nwhile True:\n    solved  = [*islice(shortSudokuSolve(board),2)]\n    if len(solved)==1:break\n    diffPos = [(r,c) for r in range(9) for c in range(9)\n               if solved[0][r][c] != solved[1][r][c] ] \n    r,c = random.choice(diffPos)\n    board[r][c] = solution[r][c]\n</code></pre>\n<p>output:</p>\n<pre><code>\u2554\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2557\n\u2551   \u2502   \u2502   \u2551   \u2502   \u2502 7 \u2551   \u2502   \u2502 8 \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502 2 \u2502   \u2551   \u2502 5 \u2502   \u2551 7 \u2502 6 \u2502   \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502 6 \u2502   \u2551 8 \u2502   \u2502 4 \u2551   \u2502   \u2502 3 \u2551\n\u2560\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2563\n\u2551 5 \u2502   \u2502   \u2551   \u2502   \u2502   \u2551 2 \u2502   \u2502 7 \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551   \u2502 3 \u2502   \u2551   \u2502 1 \u2502   \u2551   \u2502   \u2502   \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551 2 \u2502   \u2502   \u2551 4 \u2502   \u2502   \u2551   \u2502 3 \u2502   \u2551\n\u2560\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2563\n\u2551   \u2502 4 \u2502   \u2551 6 \u2502   \u2502   \u2551   \u2502   \u2502   \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551 8 \u2502   \u2502   \u2551   \u2502   \u2502   \u2551 1 \u2502   \u2502 6 \u2551\n\u255f\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2562\n\u2551 1 \u2502   \u2502   \u2551 2 \u2502 7 \u2502   \u2551   \u2502 4 \u2502   \u2551\n\u255a\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u255d\n</code></pre>\n<p><em>Note that this will work in a reasonable time for 9x9 sudoku boards but you will need a much better/faster solver function for larger boards</em></p>\n"}, {"comments": [{"owner": {"reputation": 2053, "user_id": 1070692, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6c067ae814632f20d74fefea8b715d44?s=128&d=identicon&r=PG", "display_name": "Hemant Singh Rathore", "link": "https://stackoverflow.com/users/1070692/hemant-singh-rathore"}, "edited": false, "score": 0, "creation_date": 1617284515, "post_id": 66902773, "comment_id": 118266085, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/28662255\">From Review</a>"}], "tags": [], "owner": {"reputation": 11, "user_id": 15381766, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-As9dnTbkTas/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm6BzLwU3gVtG4WKcfNtea-CfHHoA/s96-c/photo.jpg?sz=128", "display_name": "zerozero nine", "link": "https://stackoverflow.com/users/15381766/zerozero-nine"}, "is_accepted": false, "score": -2, "last_activity_date": 1617292953, "last_edit_date": 1617292953, "creation_date": 1617272672, "answer_id": 66902773, "question_id": 45471152, "link": "https://stackoverflow.com/questions/45471152/how-to-create-a-sudoku-puzzle-in-python/66902773#66902773", "title": "How to create a Sudoku puzzle in Python", "body": "<p>First, randomly create a completed sudoku solution. This part require to have a sudoku solver.</p>\n<p>From the sudoku solution, constantly remove numbers at random locations. For each removal, check if the sudoku is still valid. That is, the sudoku has a unique solution. This part needs to find out if there is more than one solution. It is another version of sudoku solver.</p>\n<p>If not, we put back the number and try another location. The process keeps going until all locations have tried.</p>\n<pre><code>import random\nimport numpy as np\n\ndef PossibleValueAtPosition(pz:[], row:int, col:int):\n    r=row//3*3\n    c=col//3*3\n    return {1,2,3,4,5,6,7,8,9}.difference(set(pz[r:r+3,c:c+3].flat)).difference(set(pz[row,:])).difference(set(pz[:,col]))\n\ndef Solution_Count(pz:[], n:int, Nof_solution:int):\n    if Nof_solution&gt;1:\n        return Nof_solution\n    if n&gt;=81:\n        Nof_solution+=1\n        return Nof_solution\n    (row,col) = divmod(n,9)\n    if pz[row][col]&gt;0:\n        Nof_solution = Solution_Count(pz, n+1, Nof_solution)\n    else:\n        l = PossibleValueAtPosition(pz, row,col)\n        for v in l:\n            pz[row][col] = v\n            Nof_solution = Solution_Count(pz, n+1, Nof_solution)\n            pz[row][col] = 0\n    return Nof_solution \n\ndef SudokuSolver(pz:[], n:int):\n    if n==81:\n        return True\n    (row,col) = divmod(n,9)\n    if pz[row][col]&gt;0:\n        if SudokuSolver(pz, n+1):\n            return True\n    else:\n        l = list(PossibleValueAtPosition(pz, row,col))\n        random.shuffle(l)\n        for v in l:\n            pz[row][col] = v\n            if SudokuSolver(pz, n+1):\n                return True\n            pz[row][col] = 0\n    return False\n\ndef DigHoles(pz:[], randomlist:[], n:int, nof_holes:int):\n    if n&gt;=81 or nof_holes&gt;=64:\n        return\n    (row,col) = divmod(randomlist[n],9)\n    if pz[row][col]&gt;0:\n        pz_check=pz.copy()\n        pz_check[row][col]=0\n        Nof_solution = Solution_Count(pz_check, 0, 0)\n        if Nof_solution==1:\n            pz[row][col]=0\n            nof_holes+=1\n            print(pz)\n            print(&quot;{} zeros&quot;.format(nof_holes))\n            print()\n    DigHoles(pz, randomlist, n+1, nof_holes)\n\ndef main():\n    puzzle = np.zeros((9,9), dtype=int)\n    SudokuSolver(puzzle, 0)\n    print(puzzle, &quot;--------- Answer\\n&quot;)\n    randomlist = list(range(81))\n    random.shuffle(randomlist)\n    DigHoles(puzzle, randomlist, 0, 0)\n\nif __name__ == &quot;__main__&quot;:\n    main()\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 4820012, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N_oT-55XkKE/AAAAAAAAAAI/AAAAAAAAGD8/p82YDrN7nZo/photo.jpg?sz=128", "display_name": "Justin Malinchak", "link": "https://stackoverflow.com/users/4820012/justin-malinchak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21483, "favorite_count": 2, "accepted_answer_id": 56581709, "answer_count": 4, "score": 3, "last_activity_date": 1617292953, "creation_date": 1501708636, "last_edit_date": 1501747512, "question_id": 45471152, "link": "https://stackoverflow.com/questions/45471152/how-to-create-a-sudoku-puzzle-in-python", "title": "How to create a Sudoku puzzle in Python", "body": "<p>Goal is to create a 9x9 Sudoku matrix in Python.</p>\n\n<p>So I got this far.  But I cannot seem to get the program to get the interior contingent boxes correct.</p>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code>def sudoku(size):\n    import random as rn\n    mydict = {}\n    n = 0\n    while len(mydict) &lt; 9:\n        n += 1\n        x = range(1, size+1)\n        testlist = rn.sample(x, len(x))\n\n        isgood = True\n        for dictid,savedlist in mydict.items():\n            if isgood == False:\n                break\n            for v in savedlist:\n                if testlist[savedlist.index(v)] == v:\n                    isgood = False\n                    break\n        if isgood == True:\n            #print 'success', testlist\n            mydict[len(mydict)] = testlist\n    return mydict, n\n\nreturn_dict, total_tries = sudoku(9)\nfor n,v in return_dict.items():\n    print n,v\nprint 'in',total_tries,'tries'\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pysftp"], "answers": [{"comments": [{"owner": {"reputation": 11257, "user_id": 10197418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/be8Y6.jpg?s=128&g=1", "display_name": "MrFuppes", "link": "https://stackoverflow.com/users/10197418/mrfuppes"}, "edited": false, "score": 0, "creation_date": 1592554784, "post_id": 45472261, "comment_id": 110472712, "body": "Just noted that this will fail for leap days, e.g. Feb 29, since year defaults to 1900. Maybe add the year to the <code>input_date</code> string instead of using <code>replace</code> to overcome this."}], "tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": false, "score": 0, "last_activity_date": 1501714590, "creation_date": 1501714590, "answer_id": 45472261, "question_id": 45471143, "link": "https://stackoverflow.com/questions/45471143/pysftp-get-files-based-on-modification-date/45472261#45472261", "title": "Pysftp. Get files based on Modification Date", "body": "<p>You can parse the date string you get back from the ftp directory listing like this:</p>\n\n<pre><code>import datetime\ninput_date = \"02 Aug 02:42\"\nparsed_date = datetime.datetime.strptime(input_date,\"%d %b %H:%M\").replace(year=2017)\nprint(f\"{parsed_date:%Y%m%d}\")\n</code></pre>\n\n<p>Output is <code>20170802</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7964389, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxK-ko5ngEE/AAAAAAAAAAI/AAAAAAAAAB4/ACHsDH-OX8g/photo.jpg?sz=128", "display_name": "Vladimir Morozov", "link": "https://stackoverflow.com/users/7964389/vladimir-morozov"}, "is_accepted": false, "score": 1, "last_activity_date": 1565620494, "creation_date": 1565620494, "answer_id": 57463234, "question_id": 45471143, "link": "https://stackoverflow.com/questions/45471143/pysftp-get-files-based-on-modification-date/57463234#57463234", "title": "Pysftp. Get files based on Modification Date", "body": "<p>I have a substitute for it:</p>\n\n<pre><code>def unix2human(unixtime, fmt = \"%Y-%m-%d\"):\n    try:\n        return datetime.utcfromtimestamp(int(unixtime)).strftime(fmt)\n    except Exception as e:\n        log.warning(\"Failed to convert unixtime string '{}' :: {}\".format(unixtime, e))\n        return None\n</code></pre>\n\n<p>So your code will look like:</p>\n\n<pre><code>for attr in s.listdir_attr(\"ENTOUT_709_Payers_20170802024203.csv\"):\n    print(unix2human(attr.st_mtime))\n</code></pre>\n\n<p>where <em>st_mtime</em> is the built-in pysftp method</p>\n"}], "owner": {"reputation": 11, "user_id": 7799368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ad56fb6a4a07db65b7548f2ee6583c?s=128&d=identicon&r=PG&f=1", "display_name": "Marshall Jones", "link": "https://stackoverflow.com/users/7799368/marshall-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3153, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565620494, "creation_date": 1501708595, "last_edit_date": 1501711688, "question_id": 45471143, "link": "https://stackoverflow.com/questions/45471143/pysftp-get-files-based-on-modification-date", "title": "Pysftp. Get files based on Modification Date", "body": "<p>I'm trying to write a script to retrieve files from an SFTP server if the modification date is less than 24 hours.\nThis is my attempt so far:</p>\n\n<pre><code>cnopts = sftp.CnOpts()\ncnopts.hostkeys = None\ns = sftp.Connection(host=host, username=username, password=password, port=port, cnopts=cnopts)\ns.cwd(r\"/Outbox\")\nfor attr in s.listdir_attr(\"ENTOUT_709_Payers_20170802024203.csv\"):\n    print(attr)\n</code></pre>\n\n<p>Here are the results...</p>\n\n<pre><code>?rw-rw-rw- 1 0 0 8339 02 Aug 02:42 ENTOUT_709_Payers_20170802024203.csv\n</code></pre>\n\n<p>How would I retrieve <code>\"02 Aug 02:42\"</code> in the format of <code>%Y%M%d?</code> </p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5", "mdichild"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501708791, "post_id": 45471122, "comment_id": 77903400, "body": "what is <code>MainUi</code> and <code>self</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "edited": false, "score": 0, "creation_date": 1502134914, "post_id": 45471473, "comment_id": 78069011, "body": "Thank you for the response! That seemed to do the trick!! Any idea why it is now saying &quot;QWaitCondition: Destroyed while threads are still waiting&quot; when I close the main window?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "edited": false, "score": 0, "creation_date": 1502136603, "post_id": 45471473, "comment_id": 78069870, "body": "If the code is like the one I show you should not have that problem, but give me information I can not tell you anymore."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1501710155, "creation_date": 1501710155, "answer_id": 45471473, "question_id": 45471122, "link": "https://stackoverflow.com/questions/45471122/pyqt5-mdi-sub-window-close/45471473#45471473", "title": "PYQT5 Mdi sub window close", "body": "<p>The X button closes the QMdiSubWindow, not the widget inscribed on it, so the button should close the subwindow:</p>\n\n<pre><code>your_QPushButton.clicked.connect(your_QMdiSubWindow.close)\n</code></pre>\n\n<p>Complete Example:</p>\n\n<pre><code>class MainWindow(QtWidgets.QMainWindow):\n    def __init__(self, parent=None):\n        QtWidgets.QMainWindow.__init__(self, parent)\n        self.centralwidget = QtWidgets.QWidget(self)\n        self.setCentralWidget(self.centralwidget)\n        self.centralwidget.setLayout(QtWidgets.QVBoxLayout(self.centralwidget))\n\n        self.mdiArea = QtWidgets.QMdiArea(self.centralwidget)\n        self.centralwidget.layout().addWidget(self.mdiArea)\n\n        subWindow = QtWidgets.QMdiSubWindow(self)\n\n        widget = QtWidgets.QWidget()\n        widget.setLayout(QtWidgets.QVBoxLayout())\n        btn = QtWidgets.QPushButton(\"close\", widget) \n        widget.layout().addWidget(btn)\n\n        btn.clicked.connect(subWindow.close)\n\n        subWindow.setWidget(widget)\n        subWindow.setObjectName(\"New_Window\")\n        subWindow.setWindowTitle(\"New SubWindow\")\n        self.mdiArea.addSubWindow(subWindow)\n\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = MainWindow()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3237, "favorite_count": 0, "accepted_answer_id": 45471473, "answer_count": 1, "score": 0, "last_activity_date": 1501710155, "creation_date": 1501708522, "last_edit_date": 1501708601, "question_id": 45471122, "link": "https://stackoverflow.com/questions/45471122/pyqt5-mdi-sub-window-close", "title": "PYQT5 Mdi sub window close", "body": "<p>hopefully I have a simple question. I would like to close the <code>MDI subwindow</code> with a push of a button within the window instead of closing it with the <code>x</code> at the top. I have another file with a few classes that has all of the information about the window that is opening up in the MDI area. I have tried <code>self.close()</code> but that leaves the window open and clears all of the widgets from the window. I will post the code below for how I am adding the subwindow to the MDI area. Thank you for all of your advice and help.</p>\n\n<pre><code>subWindow = QtWidgets.QMdiSubWindow()\nNew_Window = NewMDIWindow()\nsubWindow.setWidget(New_Window)\nsubWindow.setObjectName(\"New_Window\")\nsubWindow.setWindowTitle(\"New SubWindow\")\nself.MainUi.mdiArea.addSubWindow(subWindow )\n\nsubWindow.show()\n</code></pre>\n"}, {"tags": ["python", "scrapy", "scrapy-spider"], "comments": [{"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1501739104, "post_id": 45471102, "comment_id": 77911891, "body": "What you are encountering here is called web sessions. Some websites store your whole session in a cookie so if two of your request chains share the same cookie you will encounter weird behaviour. Could you provide website link? The general solutions are either keep track of the cookies manually or preferrably if possible to disable them completely."}, {"owner": {"reputation": 113, "user_id": 4573609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f831e6117cc3f3ebef1bc29ff5d833db?s=128&d=identicon&r=PG&f=1", "display_name": "fckbo", "link": "https://stackoverflow.com/users/4573609/fckbo"}, "reply_to_user": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1501966055, "post_id": 45471102, "comment_id": 78012717, "body": "Home Page: <a href=\"https://www.legifrance.gouv.fr/affichCode.do?cidTexte=LEGITEXT000006072026&amp;dateTexte=20170728\" rel=\"nofollow noreferrer\">legifrance.gouv.fr/&hellip;</a>."}, {"owner": {"reputation": 113, "user_id": 4573609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f831e6117cc3f3ebef1bc29ff5d833db?s=128&d=identicon&r=PG&f=1", "display_name": "fckbo", "link": "https://stackoverflow.com/users/4573609/fckbo"}, "reply_to_user": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1501966259, "post_id": 45471102, "comment_id": 78012772, "body": "Base url: <a href=\"https://www.legifrance.gouv.fr/\" rel=\"nofollow noreferrer\">legifrance.gouv.fr</a> and here is an exemple of a link to a list of article processed by parse1 <a href=\"https://www.legifrance.gouv.fr/affichCode.do;jsessionid=2CE73B0A4B1D110867205568C4A2C260.tpdila22v_1?idSectionTA=LEGISCTA000020871602&amp;cidTexte=LEGITEXT000006072026&amp;dateTexte=20170728\" rel=\"nofollow noreferrer\">legifrance.gouv.fr/&hellip;</a>"}, {"owner": {"reputation": 113, "user_id": 4573609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f831e6117cc3f3ebef1bc29ff5d833db?s=128&d=identicon&r=PG&f=1", "display_name": "fckbo", "link": "https://stackoverflow.com/users/4573609/fckbo"}, "reply_to_user": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1501966371, "post_id": 45471102, "comment_id": 78012800, "body": "So yes you&#39;re right there are sessions being managed here with jessionid but I&#39;m not sure to understand why when there are more than one concurrent requests in // it explains why responses received by parse1 would not sometimes corespond to the requested url"}], "owner": {"reputation": 113, "user_id": 4573609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f831e6117cc3f3ebef1bc29ff5d833db?s=128&d=identicon&r=PG&f=1", "display_name": "fckbo", "link": "https://stackoverflow.com/users/4573609/fckbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501708438, "creation_date": 1501708438, "question_id": 45471102, "link": "https://stackoverflow.com/questions/45471102/pb-with-scrapy-when-concurrent-requests-1", "title": "Pb with scrapy when CONCURRENT_REQUESTS &gt; 1", "body": "<p>I'm a newbie on python and thus on scrapy (tools to crawl website written in python...) too, hope someone can shed some lights on my way... I just wrote a spider consisting on 2 parsing fonctions:\n  - the first parsing function to parse the start page I'm crawling &amp; which contains chapters &amp; sub-chapters with 7 levels, some of the chapters at various level pointing ( to articles or lists of articles\n  - the second parsing function is there to parse the articles or list of articles and is invoked as the call back of scrapy.Request(...)\nThe objective of this spider is to create a sort of big DOM of the entire content with the chapters, sub-chapters, articles &amp; their content.</p>\n\n<p>I have a problem in the second function which seems to receive sometime responses that do not correspond the content located at the url used when invoking scrapy.Request. This problem disappeared when setting CONCURRENT_REQUESTS to 1. I initially thought that this was due to some multi-threading / non-re-entrant functions pb but found that I had no re-entrances issue and read afterwards that scrapy was actually not multi-threaded... so I cannot figure out where my pb comes from. </p>\n\n<p>Here a snippet of my code</p>\n\n<pre><code>#---------------------------------------------\n# Init part:\n#---------------------------------------------\nimport scrapy\nfrom scrapy import signals\nfrom xml.etree.ElementTree import Element, SubElement, Comment, tostring\nfrom scrapy.exceptions import CloseSpider\n\ntop = Element('top')\ncurChild = top\n\nclass mytest(scrapy.Spider):\n    name = 'lfb'\n\n#\n# This is what make my code working but I don't know why !!! \n# Ideally would like to benefit from the speed of having several concurrent\n# requests when crawling &amp; parsing \n#\n    custom_settings = {\n        'CONCURRENT_REQUESTS': '1',\n    }\n\n#\n# This section is just here to be able to do something when the spider closes\n# In this case I want to print the DOM I've created.\n    @classmethod\n    def from_crawler(cls, crawler, *args, **kwargs):\n        spider = super(mytest, cls).from_crawler(crawler, *args, **kwargs)\n        crawler.signals.connect(spider.spider_closed, signal=signals.spider_closed)\n        return spider\n\n    def spider_closed(self, spider):\n        print (\"Spider closed - !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\")\n#this is to print the DOM created at the end\n        print tostring(top)\n\n    def parse(self, response):\n        pass\n\n\n    def start_requests(self):\n        level = 0\n        print \"Start parsing legifrance level set to %d\" % level\n# This is to print the DOM which is empty (or almost - just the top element in there)\n        print tostring(top)\n        yield scrapy.Request(\"&lt;Home Page&gt;\", callback=self.parse)\n\n#----------------------------------------------\n# First parsing function - Parsing the Home page - this one works fine (I think)\n#----------------------------------------------\n    def parse(self, response):\n        for sel in response.xpath('//span'):\n            cl = sel.xpath(\"@class\").extract()\n            desc = sel.xpath('text()').extract()\n#\n# Do some stuff here depending on the class (cl) of 'span' which corresponds \n# to either one of the # 7 levels of chapters &amp; sub-chapters or to list of\n# articles attached to a sub-chapters. To simplify I'm just putting here the \n# code corresponding to the handling of list of articles (cl == codeLienArt)\n#           ...\n#           ...\n        if cl == [unicode('codeLienArt')]: \n            art_plink= sel.css('a::attr(\"href\")').extract()\n            artLink= \"&lt;Base URL&gt;\"+str(unicode(art_plink[0]))\n#\n# curChild points to the element in the DOM to which the list of articles\n# should be attached. Pass it in the request meta, in order for the second\n# parsing function to place the articles &amp; their content at the right place\n# in the DOM\n#\n            thisChild = curChild\n#\n# print for debug - thisChild.text contains the heading of the sub-chapter\n# to which the list of articles that will be processed by parse1 should be\n# attached.\n#\n            print \"follow link cl:%s art:%s for %s\" % (cl, sel.xpath('a/text()').extract(), thisChild.text )\n#\n# get the list of articles following artLink &amp; pass the response to the second parsing function \n# (I know it's called parse1 :-)\n#\n            yield scrapy.Request(artLink, callback=self.parse1, meta={ 'element': thisChild })\n\n#-------------------\n# This is the second parsing function that parses list of Articles &amp; their content\n# format is basically one or several articles, each being presented(simplified) as\n# &lt; div class=\"Articles\"&gt;\n#   &lt;div class=\"titreArt\"&gt; Title here&lt;/div&gt;\n#   &lt;div class=\"corpsArt\"&gt; Sometime some text and often a list of paragraph    &lt;p&gt;sentences&lt;/p&gt;\" &gt;&lt;/div&gt;\n#  &lt;/div&gt;\n#-------------------\n    def parse1(self, resp):\n    print \"enter parse1\"\n    numberOfArticles= 0\n    for selArt in resp.xpath('//div[@class=\"article\"]'):\n#\n# This is where I see the problem when CONCURRENT_REQUESTS &gt; 1, sometimes\n# the response points to a page that is not the page that was requested in\n# the previous parsing function...\n#\n        clArt = selArt.xpath('.//div[@class=\"titreArt\"]/text()').extract()\n        print clArt\n        numberOfArticles += 1\n        childArt = SubElement(resp.meta['element'], 'Article')\n        childArt.text =str(unicode(\"%s\" % clArt[0]))\n        corpsArt = selArt.xpath('.//div[@class=\"corpsArt\"]/text()').extract()\n        print \"corpsArt=%s\" % corpsArt\n        temp = ''\n        for corpsItem in corpsArt:\n            if corpsItem != '\\n':\n                temp += corpsItem\n\n        if temp != '':\n            childCorps =  SubElement(childArt, 'p')\n            childCorps.text = temp\n            print \"corpsArt is not empty %s\" % temp\n        for paraArt in selArt.xpath('.//div[@class=\"corpsArt\"]//p/text()').extract():\n            childPara = SubElement(childArt, 'p')\n            childPara.text = paraArt\n            print \"childPara.text=%s\" % childPara.text\n\n    print \"link followed %s (%d)\" % (resp.url,numberOfArticles)\n    print \"leave parse1\"\n    yield\n</code></pre>\n"}, {"tags": ["python", "sqlite", "flask"], "answers": [{"tags": [], "owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "is_accepted": false, "score": 5, "last_activity_date": 1501710653, "last_edit_date": 1501710653, "creation_date": 1501709751, "answer_id": 45471393, "question_id": 45471074, "link": "https://stackoverflow.com/questions/45471074/flask-tutorial-why-do-we-use-the-app-context-for-the-db-connection/45471393#45471393", "title": "Flask tutorial: Why do we use the app context for the DB connection?", "body": "<p>It's badly documented. But basically the whole point of the app context is to abstract app-specific-but-persistent-across-request data objects (ostensibly to allow multi-tenant applications that are all separate instances of <code>Flask</code> without tying everything to request context). In any case, <code>flask.g</code> is the app context-specific dict for the current app context. This way you can call <code>get_db()</code> on the very first request, shove the resulting connection object into <code>g</code> and then use <code>g.dbconn</code> later on in the app, which doesn't get killed on each request (presumably you want to use the same connection on each page access). I like to think of <code>flask.g</code> is like a class (well the app, in this case) instance of <code>globals()</code>.</p>\n\n<p>See also: <a href=\"http://flask.pocoo.org/docs/0.12/appcontext/#app-context\" rel=\"nofollow noreferrer\">http://flask.pocoo.org/docs/0.12/appcontext/#app-context</a></p>\n"}], "owner": {"reputation": 300, "user_id": 6249098, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/992875000801055/picture?type=large", "display_name": "Matthew Chatham", "link": "https://stackoverflow.com/users/6249098/matthew-chatham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1805, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1501710653, "creation_date": 1501708326, "question_id": 45471074, "link": "https://stackoverflow.com/questions/45471074/flask-tutorial-why-do-we-use-the-app-context-for-the-db-connection", "title": "Flask tutorial: Why do we use the app context for the DB connection?", "body": "<p>I'm studying the <a href=\"http://flask.pocoo.org/docs/0.12/tutorial/dbcon/#tutorial-dbcon\" rel=\"noreferrer\">Flask tutorial</a> and am confused about the usage of the app context for connecting to the database. On the page, the author says:</p>\n\n<blockquote>\n  <p>Creating and closing database connections all the time is very\n  inefficient, so you will need to keep it around for longer. Because\n  database connections encapsulate a transaction, you will need to make\n  sure that only one request at a time uses the connection.</p>\n</blockquote>\n\n<p>However, it seems that creating and closing the connection is exactly what is accomplished by the code. We have a view <code>get_db</code> that connects to the database, returns a connection object, and adds it to the app context if not present. We also have a <code>close_db</code> view that closes the connection object when the app context is torn down.</p>\n\n<p>My understanding of what's happening here is as follows: A user connects to the app's home page, establishing a connection with the database and then closing it. Each time the user makes a request to the page (e.g., posting a new blog entry), a new connection is established with the database and then closed when the request is completed. So what's the value of using the app context at all? Why not just directly create and close a connection for each request?</p>\n\n<p>Maybe I am misunderstanding something here -- any insight appreciated!</p>\n"}, {"tags": ["python", "html", "forms", "input"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1501709433, "post_id": 45471049, "comment_id": 77903733, "body": "You can&#39;t do anything after the return statement."}], "answers": [{"comments": [{"owner": {"reputation": 1544, "user_id": 3598519, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1312410247/picture?type=large", "display_name": "Sam Bobel", "link": "https://stackoverflow.com/users/3598519/sam-bobel"}, "edited": false, "score": 0, "creation_date": 1501708958, "post_id": 45471139, "comment_id": 77903505, "body": "Agreed. Some frameworks make simple things more difficult, but Flask is really easy to work with."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1501709324, "post_id": 45471139, "comment_id": 77903699, "body": "They are already clearly using a framework, web.py, and just as clearly have set the /hello route to point to the Index handler."}], "tags": [], "owner": {"reputation": 887, "user_id": 1429776, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nGt0C.jpg?s=128&g=1", "display_name": "mmenschig", "link": "https://stackoverflow.com/users/1429776/mmenschig"}, "is_accepted": true, "score": -1, "last_activity_date": 1501708585, "creation_date": 1501708585, "answer_id": 45471139, "question_id": 45471049, "link": "https://stackoverflow.com/questions/45471049/python-html-writing-form-data-to-a-file/45471139#45471139", "title": "Python HTML writing form data to a file", "body": "<p>You're performing a POST request on <code>/hello</code> with this line.</p>\n\n<pre><code>&lt;form action=\"/hello\"&gt;\n</code></pre>\n\n<p>However, you haven't defined a controller for this route. As a result, nothing happens.</p>\n\n<p>Either make a POST on <code>/Index</code> or create a handler for <code>/hello</code></p>\n\n<p>Also, I would highly recommend a framework for this. Something small, like <a href=\"http://flask.pocoo.org/\" rel=\"nofollow noreferrer\">Flask</a>.</p>\n"}], "owner": {"reputation": 69, "user_id": 8383872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bpyGC.jpg?s=128&g=1", "display_name": "sjannette", "link": "https://stackoverflow.com/users/8383872/sjannette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 45471139, "answer_count": 1, "score": 0, "last_activity_date": 1501708585, "creation_date": 1501708211, "question_id": 45471049, "link": "https://stackoverflow.com/questions/45471049/python-html-writing-form-data-to-a-file", "title": "Python HTML writing form data to a file", "body": "<p>Trying to write a simple app that:</p>\n\n<ol>\n<li><p>Presents an html form to get to get input data (a greeting and a name).</p></li>\n<li><p>Displays the data in the browser, and then (here is the part I cannot figure out)</p></li>\n<li><p>Saves the input form data to a simple .txt file</p></li>\n</ol>\n\n<p>Here is the python code:</p>\n\n<pre><code>import web\n\nurls = (\n    '/hello', 'Index'\n)\n\napp = web.application(urls, globals())\n\nrender = web.template.render('templates/', base='layout')\n\n\nclass Index(object):\n    def GET(self):\n        return render.hello_form() # returns form to browser\n\n    def POST(self): # gets name and greeting data back\n        form = web.input(name=\"Nobody\", greet=\"Hello\")\n        greeting = \"%s ... %s\" % (form.greet, form.name)\n        return render.index(greeting = greeting) #displays index.html\n        with open ('projects/forms/ninja.txt)', 'w') as out_file:\n        out_file.write(form.getValue(\"greet\"))\n        out_file.write(form.getValue(\"name\"))\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>\n\n<p>Here is the hmtl form:</p>\n\n<pre><code>&lt;h1&gt;this is hello_form&lt;/h1&gt;\n\n&lt;form action=\"/hello\" method=\"POST\"&gt;\n    A Greeting: &lt;br&gt;\n    &lt;input type=\"text\" name=\"greet\"&gt;\n    &lt;br/&gt;\n    Your Name: &lt;br&gt;\n    &lt;input type=\"text\" name=\"name\"&gt;\n    &lt;br/&gt;\n   &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I have searched other answers, including this one:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19562790/how-to-store-html-form-data-into-file\">how to store html form data into file</a></p>\n\n<p>But I cannot seem to find the information to get this going.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 1, "creation_date": 1501708753, "post_id": 45471040, "comment_id": 77903376, "body": "I really think you should split it up into different lines and get the matches that way."}], "answers": [{"comments": [{"owner": {"reputation": 4103, "user_id": 4832296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mqql.jpg?s=128&g=1", "display_name": "Cory Madden", "link": "https://stackoverflow.com/users/4832296/cory-madden"}, "edited": false, "score": 0, "creation_date": 1501710200, "post_id": 45471461, "comment_id": 77904019, "body": "This didn&#39;t work for me. <code>ValueError: need more than 1 value to unpack</code>"}, {"owner": {"reputation": 3628, "user_id": 6802252, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/93aac7d4f79b7275d62dc21cfe248ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Moondra", "link": "https://stackoverflow.com/users/6802252/moondra"}, "edited": false, "score": 0, "creation_date": 1501713090, "post_id": 45471461, "comment_id": 77905085, "body": "I see.  I was hoping there was an elegant way to do it with one of RE&#39;s group methods."}, {"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 0, "creation_date": 1501727547, "post_id": 45471461, "comment_id": 77908416, "body": "It probably is possible. It will feel chalenging to get to it,  and fun, but I doubt it could be called &quot;elegant&quot; :-)"}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 1, "last_activity_date": 1501710087, "creation_date": 1501710087, "answer_id": 45471461, "question_id": 45471040, "link": "https://stackoverflow.com/questions/45471040/slightly-complex-usage-of-backrefrencing-in-python-regular-expressions/45471461#45471461", "title": "Slightly complex usage of backrefrencing in Python Regular Expressions", "body": "<p>So - this is a nice \"puzzle trivia\" to do if you want to do it with regexps (and I might even give it a try later) - but all in allyou will have fragile code - it won't work if your input data format change a bit, and it will be a maintenance nightmare.</p>\n\n<p>Now, the \"steady\" way: pick that string - split it at \",\" - then split each segment at the \":\", strip each component, and create a Python dictionary out of that. Then it is trivial to use a dictionary comprehension expression to extract your desired data:</p>\n\n<pre><code>def get_first_accolade(text):\n    parts = text.split(\",\")\n    data = {}\n    for item in parts:\n         key, value = item.split(\",\")\n         data[key.strip()] = value.strip()\n    result = {key: value for key, value in data.items() if value == data[\"first\"]}\n    return result\n</code></pre>\n"}], "owner": {"reputation": 3628, "user_id": 6802252, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/93aac7d4f79b7275d62dc21cfe248ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Moondra", "link": "https://stackoverflow.com/users/6802252/moondra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501710087, "creation_date": 1501708163, "question_id": 45471040, "link": "https://stackoverflow.com/questions/45471040/slightly-complex-usage-of-backrefrencing-in-python-regular-expressions", "title": "Slightly complex usage of backrefrencing in Python Regular Expressions", "body": "<p>Here is my string:</p>\n\n<pre><code>string ='First: Michael, Second: Dennis, Third: Michael, \\nAssists: Michael, Scoring: Michael, Rebounds: Peter, Steals: Dennis'\n</code></pre>\n\n<p>This strings holds many items which represent an accolade and their recipient. I'm attempting to first determine who was the winner of the \n'first' accolade, and then pull out all other items involving that recipient.</p>\n\n<p>So in this case, we check who the winner of the first recipient is (Michael), and\nthen we pull out all of the accolades (along with the name Michael) involving Michael.</p>\n\n<p>So the result should be something like: </p>\n\n<p>'First: Michael, Third: Michael, Assists: Michael, Scoring: Michael'</p>\n\n<p>I was trying to utilize back refrencing along with look-arounds, but it got a little messy</p>\n\n<pre><code>import re\nstring ='First: Michael, Second: Dennis, Third: Michael, \\nAssists: Michael, Scoring: Michael, Rebounds: Peter, Steals: Dennis'\nre.findall('(?=First: (\\w+)), (?=\\w+: \\w+, )|(\\w+: \\1,)+', string)\n</code></pre>\n"}, {"tags": ["python", "variables", "if-statement", "variable-assignment"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 5, "creation_date": 1501708180, "post_id": 45471020, "comment_id": 77903114, "body": "Use a dictionary: <code>{0: &#39;Voltage Dropout&#39;, 1: &#39;Voltage Restored&#39;, ...}</code>."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1501708259, "post_id": 45471020, "comment_id": 77903140, "body": "You could also use a list <code>[&#39;Voltage Dropout&#39;, &#39;Voltage Restored&#39;, ...]</code>."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1501708276, "post_id": 45471020, "comment_id": 77903152, "body": "Rather than add a new answer, there must be a decent dupe for this that goes into some detail? I can find some but they&#39;re not covering it in great detail"}, {"owner": {"reputation": 57, "user_id": 8115276, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c9ad02fd4375572fe5bc17efc5088234?s=128&d=identicon&r=PG&f=1", "display_name": "DRauch", "link": "https://stackoverflow.com/users/8115276/drauch"}, "edited": false, "score": 0, "creation_date": 1501708523, "post_id": 45471020, "comment_id": 77903258, "body": "Let me know if you find a dupe. Like you said, the ones I could find were not very detailed. Also, was not quite sure what to search for."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1501708821, "post_id": 45471020, "comment_id": 77903420, "body": "Just replace all your <code>if</code> and <code>elif</code> with a single line of <code>stat = my_dict.get(alarm, &quot;not found&quot;)</code> and define <code>my_dict</code> beforehand like I did in my first comment e.g. <code>my_dict = {0: &#39;Voltage Dropout&#39;, 1: &#39;Voltage Restored&#39;, ...}</code>. I&#39;m just looking for the canonical dupe."}], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 8207355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b97cf1b0439fe13dd27c8f4c3ee0f9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Craig", "link": "https://stackoverflow.com/users/8207355/sam-craig"}, "is_accepted": true, "score": 1, "last_activity_date": 1501709131, "creation_date": 1501709131, "answer_id": 45471263, "question_id": 45471020, "link": "https://stackoverflow.com/questions/45471020/python3-x-variable-assignment-for-different-cases/45471263#45471263", "title": "Python3.x: Variable Assignment for Different Cases", "body": "<p>Some answers brought up dictionaries, but it sounds like you want a little more in-depth explanation, which hopefully I can provide. Dictionaries are similar to lists, except you define a key and a value for each element in the dictionary. Then you can retrieve the value given the key. In your case, it would look something like</p>\n\n<pre><code>alarm = int(byte_3[1:8], 2)\nstat_dictionary = {0:'Voltage Dropout',1:'Voltage Restored',2:'Probe Started',3:'Probe Completed',4:'Cashbox Removed',5:'Cashbox Restored'}\nif byte_3[0] == '1':\n    print_string += 'Alarm '\n    print(print_string+stat_dictionary[alarm]\n</code></pre>\n\n<p>You could replace the stat_dictionary with a list and have the same function, but a dictionary is, imo, more clear.</p>\n"}], "owner": {"reputation": 57, "user_id": 8115276, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c9ad02fd4375572fe5bc17efc5088234?s=128&d=identicon&r=PG&f=1", "display_name": "DRauch", "link": "https://stackoverflow.com/users/8115276/drauch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 45471263, "answer_count": 1, "score": 0, "last_activity_date": 1501709131, "creation_date": 1501708096, "last_edit_date": 1501708210, "question_id": 45471020, "link": "https://stackoverflow.com/questions/45471020/python3-x-variable-assignment-for-different-cases", "title": "Python3.x: Variable Assignment for Different Cases", "body": "<p>I am attempting to assign different values to a variable depending on another variable. I have used <code>if...else</code> statements to do so. I am wondering if there is a more efficient/simpler way to accomplish this. </p>\n\n<p>I am excluding lots of my code. I am analyzing data sets line by line where <code>column[3]</code> can be any number.</p>\n\n<p>My code:</p>\n\n<pre><code>byte_3 = format(column[3], 'b').zfill(8)\nalarm = int(byte_3[1:8], 2)\nif byte_3[0] == '1':\n    print_string += 'Alarm '\n        if alarm == 0:\n            stat = 'Voltage Dropout'\n        elif alarm == 1:\n            stat = 'Voltage Restored'\n        elif alarm == 2:\n            stat = 'Probe Started'\n        elif alarm == 3:\n            stat = 'Probe Completed'\n        elif alarm == 4:\n            stat = 'Cashbox Removed'\n        elif alarm == 5:\n            stat = 'Cashbox Restored'\n    print(print_string + stat)\n</code></pre>\n\n<p>I would like for <code>stat</code> to change depending on the value assigned to <code>alarm</code>. Is it possible to accomplish this in a different fashion? The majority of the values assigned to <code>alarm</code> will be whole integers in 1-26 where each individual integer will change the assignment of <code>stat</code> i.e. if <code>alarm</code> is 0, I expect <code>stat</code> to be <code>Voltage Dropout</code> or if <code>alarm</code> becomes 4 I expect <code>stat</code> to be <code>Cashbox Removed</code></p>\n"}, {"tags": ["python", "regex", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501708741, "post_id": 45471012, "comment_id": 77903368, "body": "Not sure how this can be sped up... performance tuning might depend on your actual data."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1583241211, "post_id": 45471012, "comment_id": 107043488, "body": "Are all  you regexps generic like that or are all of them specific?  The two regexps you showed can be shrunk to a single one - <code>regex = r&#39;\\b[st]\\w+&#39;</code>"}], "owner": {"reputation": 150, "user_id": 1655694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3f71c644b59fe5da1dda1a53276ad5?s=128&d=identicon&r=PG", "display_name": "Axel", "link": "https://stackoverflow.com/users/1655694/axel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1501853826, "creation_date": 1501708063, "last_edit_date": 1501853826, "question_id": 45471012, "link": "https://stackoverflow.com/questions/45471012/identifying-list-of-regex-expressions-in-pandas-column", "title": "Identifying list of regex expressions in Pandas column", "body": "<p>I have a large pandas dataframe. A column contains text broken down into sentences, one sentence per row. I need to check the sentences for the presence of terms used in various ontologies. Some of the ontologies are fairly large and have more than 100.000 entries. In addition some of the ontologies contain molecule names with hyphens, commas, and other characters that may or may not be present in the text to be examined, hence, the need for regular expressions. </p>\n\n<p>I came up with the code below, but it's not fast enough to deal with my data. Any suggestions are welcome.\nThank you!</p>\n\n<pre><code>import pandas as pd                                                             \nimport re                                                                       \n\n\nsentences = [\"\"\"There is no point in driving yourself mad trying to stop        \n             yourself going mad\"\"\",                                             \n             \"The ships hung in the sky in much the same way that bricks don\u2019t\"]\n\nsentence_number = list(range(0, len(sentences)))                                \nd = {'sentence' : sentences, 'number' : sentence_number}                        \n\ndf = pd.DataFrame(d)                                                            \n\nregexes = ['\\\\bt\\\\w+', '\\\\bs\\\\w+']                                             \n\nbig_regex = '|'.join(regexes)                                                   \ncompiled_regex = re.compile(big_regex, re.I)                                    \n\ndf['found_regexes'] = df.sentence.str.findall(compiled_regex)\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 2, "creation_date": 1501709922, "post_id": 45471009, "comment_id": 77903917, "body": "Use after_cancel() to cancel the previous after() call <a href=\"http://effbot.org/tkinterbook/widget.htm\" rel=\"nofollow noreferrer\">effbot.org/tkinterbook/widget.htm</a>  I would suggest that you wait something like 1/10 of a second and issue another after_cancel() in case you hit the small spot where the program is in the function, but above the after() statement."}], "answers": [{"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1501710984, "post_id": 45471567, "comment_id": 77904345, "body": "There&#39;s no reason to do <code>self.after(0, self.countdown)</code>. Just call it directly: <code>self.countdown()</code>."}, {"owner": {"reputation": 3, "user_id": 7864706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30301781d2d18723455b65fcb2440077?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Folie", "link": "https://stackoverflow.com/users/7864706/romeo-folie"}, "edited": false, "score": 0, "creation_date": 1501711354, "post_id": 45471567, "comment_id": 77904483, "body": "This is great. Thank you all very much"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1501711893, "post_id": 45471567, "comment_id": 77904661, "body": "@BryanOakley That&#39;s a good point. I used <code>after</code> to delay actually running <code>countdown</code> until the mainloop starts. The benefit in this case is pretty negligible, though."}, {"owner": {"reputation": 3, "user_id": 7864706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30301781d2d18723455b65fcb2440077?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Folie", "link": "https://stackoverflow.com/users/7864706/romeo-folie"}, "edited": false, "score": 0, "creation_date": 1502119159, "post_id": 45471567, "comment_id": 78060340, "body": "Can I ask a follow up question here or do I have to ask it separately?"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "reply_to_user": {"reputation": 3, "user_id": 7864706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30301781d2d18723455b65fcb2440077?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Folie", "link": "https://stackoverflow.com/users/7864706/romeo-folie"}, "edited": false, "score": 0, "creation_date": 1502123610, "post_id": 45471567, "comment_id": 78063126, "body": "@RomeoFolie What is the question?"}, {"owner": {"reputation": 3, "user_id": 7864706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30301781d2d18723455b65fcb2440077?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Folie", "link": "https://stackoverflow.com/users/7864706/romeo-folie"}, "edited": false, "score": 0, "creation_date": 1502204239, "post_id": 45471567, "comment_id": 78102850, "body": "@FamousJameous I want to know how I can implement start, pause, and reset features on a running countdown? Any ideas on that?"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "reply_to_user": {"reputation": 3, "user_id": 7864706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30301781d2d18723455b65fcb2440077?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Folie", "link": "https://stackoverflow.com/users/7864706/romeo-folie"}, "edited": false, "score": 0, "creation_date": 1502213488, "post_id": 45471567, "comment_id": 78108676, "body": "@RomeoFolie I could try to add that to this answer, but I think you will get a better, more complete answer by asking in a new post. I would suggest you give it a try yourself first and then post your code/requirements/problems. I&#39;ll keep an eye out for it."}], "tags": [], "owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "is_accepted": false, "score": 0, "last_activity_date": 1501773541, "last_edit_date": 1501773541, "creation_date": 1501710539, "answer_id": 45471567, "question_id": 45471009, "link": "https://stackoverflow.com/questions/45471009/setting-up-tkinter-label-to-display-countdown-timer/45471567#45471567", "title": "Setting up tkinter label to display countdown timer", "body": "<p>Here is one possible solution. This one moves the <code>countdown</code> function into the <code>Application</code> class and makes it free-running. Then I added a class attribute to track the current time left and just decrement that to 0. This does have the downside that it could take almost a second to show the new count.</p>\n\n<pre><code>from tkinter import *\nfrom threading import Event\n\nclass Application(Frame):\n    def __init__(self,master):\n        super(Application,self).__init__(master)\n        self.pack()\n        self.createWidgets()\n        self._count = 0\n        self.countdown()\n\n    def createWidgets(self):\n\n        self.labelvariable = StringVar()\n\n        self.thelabel = Label(self,textvariable = self.labelvariable,font=('Helvetica',50))\n        self.thelabel.pack(side=TOP)\n\n        self.firstButton = Button(self,text=\"pomodoro\",command=self.pomodoro)\n        self.firstButton.pack(side=LEFT)\n\n        self.secondButton = Button(self,text=\"short break\",command=self.shortBreak)\n        self.secondButton.pack(side=LEFT)\n\n        self.thirdButton = Button(self,text=\"long break\",command=self.longBreak)\n        self.thirdButton.pack(side=LEFT)\n\n    def pomodoro(self):\n        self._count = 1500\n\n    def shortBreak(self):\n        self._count = 300\n\n    def longBreak(self):\n        self._count = 600\n\n    def countdown(self):\n        mins,secs = divmod(self._count,60)\n        timeformat = \"{0:02d}:{1:02d}\".format(mins,secs)\n        app.labelvariable.set(timeformat)\n        if self._count &gt; 0:\n            self._count -= 1\n        root.after(1000,self.countdown)\n\n\n\nif __name__ == '__main__':\n    root = Tk()\n    root.title(\"Timer\")\n    app = Application(root)\n    root.mainloop()\n</code></pre>\n\n<hr>\n\n<p>Here is another option based on Curly Joe's <a href=\"https://stackoverflow.com/questions/45471009/setting-up-tkinter-label-to-display-countdown-timer/45471567?noredirect=1#comment77903917_45471009\">comment</a>. This one uses <code>after_cancel</code> to stop the currently running countdown by cancelling the next alarm. It has the benefit that the new countdown starts immediately.</p>\n\n<pre><code>from tkinter import *\n\n\nclass Application(Frame):\n    def __init__(self,master):\n        super(Application,self).__init__(master)\n        self.pack()\n        self.createWidgets()\n        self._alarm_id = None\n\n    def createWidgets(self):\n\n        self.labelvariable = StringVar()\n        self.labelvariable.set(\"25:00\")\n\n        self.thelabel = Label(self,textvariable = self.labelvariable,font=('Helvetica',50))\n        self.thelabel.pack(side=TOP)\n\n        self.firstButton = Button(self,text=\"pomodoro\",command=self.pomodoro)\n        self.firstButton.pack(side=LEFT)\n\n        self.secondButton = Button(self,text=\"short break\",command=self.shortBreak)\n        self.secondButton.pack(side=LEFT)\n\n        self.thirdButton = Button(self,text=\"long break\",command=self.longBreak)\n        self.thirdButton.pack(side=LEFT)\n\n    def pomodoro(self):\n        if self._alarm_id is not None:\n            self.master.after_cancel(self._alarm_id)\n        self.countdown(1500)\n\n    def shortBreak(self):\n        if self._alarm_id is not None:\n            self.master.after_cancel(self._alarm_id)\n        self.countdown(300)\n\n    def longBreak(self):\n        if self._alarm_id is not None:\n            self.master.after_cancel(self._alarm_id)\n        self.countdown(600)\n\n    def countdown(self, timeInSeconds):\n        mins,secs = divmod(timeInSeconds, 60)\n        timeformat = \"{0:02d}:{1:02d}\".format(mins, secs)\n        app.labelvariable.set(timeformat)\n        self._alarm_id = self.master.after(1000, self.countdown, timeInSeconds-1)\n\n\nif __name__ == '__main__':\n    root = Tk()\n    root.title(\"Timer\")\n    app = Application(root)\n    root.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7864706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30301781d2d18723455b65fcb2440077?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Folie", "link": "https://stackoverflow.com/users/7864706/romeo-folie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501773541, "creation_date": 1501708051, "last_edit_date": 1501708240, "question_id": 45471009, "link": "https://stackoverflow.com/questions/45471009/setting-up-tkinter-label-to-display-countdown-timer", "title": "Setting up tkinter label to display countdown timer", "body": "<p>I'm trying to make a pomodoro timer which will display different countdowns on click of one of three button options. </p>\n\n<p>The problem here is that every time I click a button after previously clicking one, the label struggles with which of the timers to display. It tries to display both timer countdowns at the same time. </p>\n\n<p>I need the label to stop displaying the first button's timer countdown when I click on another button. Here's my code:</p>\n\n<pre><code>from tkinter import *\n\nclass Application(Frame):\n    def __init__(self,master):\n        super(Application,self).__init__(master)\n        self.pack()\n        self.createWidgets()\n\n    def createWidgets(self):\n\n        self.labelvariable = StringVar()\n        self.labelvariable.set(\"25:00\")\n\n        self.thelabel = Label(self,textvariable = self.labelvariable,font=('Helvetica',50))\n        self.thelabel.pack(side=TOP)\n\n        self.firstButton = Button(self,text=\"pomodoro\",command=self.pomodoro)\n        self.firstButton.pack(side=LEFT)\n\n        self.secondButton = Button(self,text=\"short break\",command=self.shortBreak)\n        self.secondButton.pack(side=LEFT)\n\n        self.thirdButton = Button(self,text=\"long break\",command=self.longBreak)\n        self.thirdButton.pack(side=LEFT)\n\n    def pomodoro(self):\n        countdown(1500)\n\n    def shortBreak(self):\n        countdown(300)\n\n    def longBreak(self):\n        countdown(600)\n\n\n\n\n\ndef countdown(timeInSeconds):\n    mins,secs = divmod(timeInSeconds,60)\n    timeformat = \"{0:02d}:{1:02d}\".format(mins,secs)\n    app.labelvariable.set(timeformat)\n    root.after(1000,countdown,timeInSeconds-1)\n\n\n\nif __name__ == '__main__':\n    root = Tk()\n    root.title(\"Timer\")\n    app = Application(root)\n    root.mainloop()\n</code></pre>\n"}, {"tags": ["python", "generator"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501709513, "post_id": 45471003, "comment_id": 77903775, "body": "This looks way overcomplicated. Why is a <code>staticmethod</code> being called on an instance? Why can\u2019t the builder be folded into <code>Obj</code> without any <code>__next__</code> shenanigans? Can <code>PartX</code> set the attributes itself?"}, {"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501721400, "post_id": 45471003, "comment_id": 77907107, "body": "@Ryan Having each <code>Part</code> set attributes would lead to lots of code redundancy (object iteration order is not just a Thing during creation). The static method might be overridden and/or delegated to in child classes, so it gets called. Folding builder into the class would lead to a massive class definition module (the <code>Part</code> logic is ~400 lines across 7 modules, the builder logic-which I&#39;m still implementing-  is probably going to be around 150 lines across 2 modules, maybe three). In short: I&#39;m trying to keep things as simple as simple as possible while keeping logic separate from structure."}, {"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501721976, "post_id": 45471003, "comment_id": 77907232, "body": "@Ryan but you&#39;re right: it&#39;s totally complicated. It&#39;s my first time really making use of the idea of generators acting as mini i/o machines so it&#39;s possible I&#39;ve gone a little overboard with the idea, but the problem (creating a simple API for writing, reading, and manipulation of a complex FORTRAN data structure that I have no control over) seems to justify it. Could easily be wrong. I&#39;m not a professional developer."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501723024, "post_id": 45471003, "comment_id": 77907434, "body": "Re: \u201cobject iteration order is not just a Thing during creation\u201d: if the format is complicated enough that it needs arbitrary Python code to read it, it\u2019s going to need arbitrary Python code to write it or whatever else (i.e. implement a serializer and deserializer). If you can find a restricted way of defining the structure that a generic de/serializer can use, that\u2019s the other option. But I don\u2019t see how creating a custom generator type would make the first part shorter."}, {"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501723682, "post_id": 45471003, "comment_id": 77907559, "body": "@Ryan I understand - in fact I wrote a totally separate text file read/write package to handle the text (I put it on pypi for the hell of it- called it <code>parmatter</code>; relies heavily on the <code>parse</code> module) so to focus on the logic. I have not looked at any existing serializers, but I&#39;d need to bridge between an existing serializer and the actual file format anyway. There is also the issue of manipulating the object using a piece of the serialization- ie, one character of one input file line changes &quot;mid stream&quot;. My thought was that injecting data into the object &quot;mid stream&quot; makes things easier."}, {"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501724017, "post_id": 45471003, "comment_id": 77907621, "body": "@Ryan I suppose you&#39;re right though- whatever object the generator logic resides in, it is going to be about the same length. In the past I have just had a hard time remembering my own APIs, and an API that isn&#39;t obvious isn&#39;t a good API. This idea of just injecting the data directly into the object seemed like an obvious thing and easy for me to understand 6-12 months from now when the object specification is modified."}, {"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501724276, "post_id": 45471003, "comment_id": 77907690, "body": "And btw: <code>_start_iter</code> above is simplified; the real one receives an argument so iteration can begin at any point in the logic; by default it starts at the beginning."}], "owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501722413, "creation_date": 1501708013, "last_edit_date": 1501722413, "question_id": 45471003, "link": "https://stackoverflow.com/questions/45471003/user-defined-generator-like-object-you-can-send-into-and-yield-from", "title": "user-defined generator-like object you can send into and yield from", "body": "<p>I would like to be able to \"send\" and \"receive\" data into\nand from an object similar to how you can do so with a generator. </p>\n\n<hr>\n\n<h2>Why</h2>\n\n<p>First, an explanation. It would be nice to be able to do this because I have an object type that I'll call <code>Obj</code>, whose instances must be incrementally created and distilled. I have implemented the incremental object iteration sequence as a series of generators; I did this because the object is a very \"choose your own adventure\" type of thing, with different paths forking depending on what came before, and each logic step can be complicated and potentially changed in the future. One part of the logic looks kind of like this (it's much more complicated): </p>\n\n<pre><code># objiter module\n\ndef PartX(obj):\n    # obj does not yet have attr8\n    yield 'PartX'\n    # obj now has attr8\n    if obj.attr1 == 1:\n        yield from PartY(obj)\n    if obj.attr1 == 2:\n        yield from PartZ(obj)\n\ndef PartY(obj):\n    yield 'PartY'\n\ndef PartZ(obj):\n    # obj does not yet have Z\n    yield from PartZ1\n    # obj now has Z\n    if hasattr(obj.Z, 'zattr1'):\n        yield from PartZ1\n    if hasattr(obj.Z, 'zattr2'):\n        yield from PartZ2\n</code></pre>\n\n<p>The object iteration sequence can be kicked off by the <code>start_iter</code> method. Each yielded string from the incremental logic is paired with a line from an input file. </p>\n\n<p>There is a <code>Builder</code> class which is a descriptor; it receives data and actually makes the incremental changes to the <code>Obj</code> instance. The data is created by each line (from the input file) and label (from the incremental logic generators) using the <code>get_data</code> method. </p>\n\n<p>Here is a basic representation: </p>\n\n<pre><code>from .objiter import PartA\nfrom .parse import parse_line\n\n\nclass Obj():\n    # builder is a descriptor and context manager, used below  in load_file\n    builder = Builder()\n    @staticmethod\n    def get_data(line, label):\n        '''Makes data out of a line, label pair.'''\n        parse_line(line, label)\n    def _start_iter(self):\n        '''Kick off object incremental logic.'''\n        # begin incremental logic\n        yield from PartA(self)\n    @classmethod\n    def load_file(cls, file_lines):\n        '''Construct an instance from an input file.'''\n        self = Obj() # an \"empty\" object\n        iter_logic = self._start_iter()\n        # start object creation\n        with self.builder as obj_builder:\n            for line, label in zip(lines, iter_logic):\n                data = obj.get_data(line, label)\n                obj_builder.send(data, label)\n        # object creation complete\n</code></pre>\n\n<h2>What I would like to do</h2>\n\n<p>It would be nice to be able to simply <em>inject data directly</em> into- and receive data from- the object instance rather than using the <code>builder</code> descriptor instance. My preferred solution would allow me to write code like this (see last couple of lines): </p>\n\n<pre><code>            for line, label in zip(lines, iter_logic):\n                data = obj.get_data(line, label)\n                self.send(data, label)\n                more_data = next(self)\n</code></pre>\n\n<p>I could do something like the following: </p>\n\n<pre><code>    def send(self, data, label):\n        self.handle_data(data, label)\n    def __next__(self):\n        return &lt;some_data&gt;\n</code></pre>\n\n<p>However, this doesn't allow the desired behavior, which is to stay inside of a logic sequence and pass control back to the code calling the object's <code>next</code> or <code>send</code> methods. </p>\n\n<h2>What I've tried</h2>\n\n<p>Right now, these are both illegal: </p>\n\n<pre><code>class C(FunctionType): pass\nclass C(GeneratorType): pass\n</code></pre>\n\n<p>So you can't make \"generator-like\" objects. I have considered a context manager which returns a generator, like so: </p>\n\n<pre><code>    def generate_me(self):\n        '''The logic of handling commands and data.'''\n        while True:\n            command = yield\n            &lt;handle the command by sending/receiving data&gt;\n    def __enter__(self):\n        self.generator = self.generate_me()\n        return self.generator\n    def __exit__(self, owner, value, tb):\n        self.generator.close()\n        del self.generator\n</code></pre>\n\n<p>Then I can do: </p>\n\n<pre><code>obj = Obj()\nwith obj as obj_gen:\n    obj_gen.send(data)\n    data = next(obj_gen)\n</code></pre>\n\n<p>This is all well and good, but it's still just a way of creating a separate generator with a little bit nicer syntax. </p>\n\n<p>Is there a way to get real, actual generator behavior working in a user-defined object? </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501709667, "post_id": 45470991, "comment_id": 77903823, "body": "I think this might have something to do with the period being set to &#39;M&#39;... possibly."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501709798, "post_id": 45470991, "comment_id": 77903872, "body": "If it had something to do with that, then why would <code>sp.iloc[0].end_time</code> produce the result I was expecting but <code>sp.dt.end_time.iloc[0]</code> not?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501709902, "post_id": 45470991, "comment_id": 77903912, "body": "I&#39;m not well versed with date questions... I usually avoid them like the plague, so please don&#39;t be too annoyed by my ignorance :p"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501710096, "post_id": 45470991, "comment_id": 77903985, "body": "Your uncomfortableness comes through in your interpretation that I&#39;m annoyed.  On the contrary, I&#39;m just keeping you on point (-:"}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1501979874, "post_id": 45470991, "comment_id": 78015404, "body": "Did you bug report this? Just looks like an inconsistency to me."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1501979969, "post_id": 45470991, "comment_id": 78015419, "body": "@Mitch yes I did."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1501979999, "post_id": 45470991, "comment_id": 78015422, "body": "@piRSquared Ahh and I just found it. Awesome, thanks!"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 2, "creation_date": 1502271827, "post_id": 45470991, "comment_id": 78132879, "body": "Issue reported on <a href=\"https://github.com/pandas-dev/pandas/issues/17157\" rel=\"nofollow noreferrer\">github</a> now"}], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1501707968, "creation_date": 1501707968, "question_id": 45470991, "link": "https://stackoverflow.com/questions/45470991/using-pd-series-dt-end-time-produces-different-timestamps-than-it-should", "title": "Using pd.Series.dt.end_time produces different Timestamps than it should", "body": "<p>Consider the series of datetimes</p>\n\n<pre><code>s = pd.Series(pd.to_datetime(['2010-08-05']))\ns\n\n0   2010-08-05\ndtype: datetime64[ns]\n</code></pre>\n\n<p>I want to create a series of period objects and get at the <code>end_time</code> attribute.</p>\n\n<pre><code>sp = s.dt.to_period('M')\nsp\n\n0   2010-08\ndtype: object\n</code></pre>\n\n<p>Now, I access the <code>end_time</code> attribute.</p>\n\n<pre><code>sp.dt.end_time\n\n0   2010-08-31\ndtype: datetime64[ns]\n</code></pre>\n\n<p>I was almost satisfied until I realized that the <code>end_time</code> should be <code>Timestamp('2010-08-31 23:59:59.999999999')</code> and not <code>Timestamp('2010-08-31 00:00:00')</code></p>\n\n<p>Ok, so I compared</p>\n\n<pre><code>sp.iloc[0].end_time\n\nTimestamp('2010-08-31 23:59:59.999999999')\n</code></pre>\n\n<hr>\n\n<pre><code>sp.dt.end_time.iloc[0]\n\nTimestamp('2010-08-31 00:00:00')\n</code></pre>\n\n<hr>\n\n<pre><code>sp.iloc[0].end_time == sp.dt.end_time.iloc[0]\n\nFalse\n</code></pre>\n\n<hr>\n\n<p>This makes no sense to me.  Clearly, the periods are correct.  How can I get <code>pd.Series.dt.end_time</code> to return the right thing?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 887, "user_id": 1429776, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nGt0C.jpg?s=128&g=1", "display_name": "mmenschig", "link": "https://stackoverflow.com/users/1429776/mmenschig"}, "edited": false, "score": 0, "creation_date": 1501708353, "post_id": 45470972, "comment_id": 77903189, "body": "For clarification, it might be helpful if you provided a few rows of your dataframe."}], "answers": [{"tags": [], "owner": {"reputation": 1307, "user_id": 5854178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVece.jpg?s=128&g=1", "display_name": "Jason Spradlin", "link": "https://stackoverflow.com/users/5854178/jason-spradlin"}, "is_accepted": false, "score": 0, "last_activity_date": 1501708084, "creation_date": 1501708084, "answer_id": 45471018, "question_id": 45470972, "link": "https://stackoverflow.com/questions/45470972/pandas-contains-method-doesnt-recognize/45471018#45471018", "title": "Pandas contains() method doesn&#39;t recognize &#39;$&#39;", "body": "<p>It looks like Pandas <code>contains</code> method excepts a regular expression, in which case <code>$</code> is used to signify the end of a line.  You'll probably want to escape your <code>$</code> with a <code>\\</code>, so your code would be <code>apts = apts[~apts.Price.str.contains('\\$1')]</code></p>\n"}, {"tags": [], "owner": {"reputation": 573, "user_id": 7246002, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_yk5ii4EVIw/AAAAAAAAAAI/AAAAAAAABsw/Wt_DVyhUGig/photo.jpg?sz=128", "display_name": "TheDetective", "link": "https://stackoverflow.com/users/7246002/thedetective"}, "is_accepted": false, "score": 1, "last_activity_date": 1501708122, "creation_date": 1501708122, "answer_id": 45471028, "question_id": 45470972, "link": "https://stackoverflow.com/questions/45470972/pandas-contains-method-doesnt-recognize/45471028#45471028", "title": "Pandas contains() method doesn&#39;t recognize &#39;$&#39;", "body": "<p><code>$</code> is a metacharacter that has a special meaning. You need to escape it to match it literally. From <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.contains.html\" rel=\"nofollow noreferrer\">here</a> you can see it relies on regex.</p>\n\n<pre><code>apts = apts[~apts.Price.str.contains('\\$1')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1501709723, "creation_date": 1501709723, "answer_id": 45471386, "question_id": 45470972, "link": "https://stackoverflow.com/questions/45470972/pandas-contains-method-doesnt-recognize/45471386#45471386", "title": "Pandas contains() method doesn&#39;t recognize &#39;$&#39;", "body": "<p>In addition to escaping the <code>'$'</code> with <code>'\\$'</code>, it's important to know that you can turn regular expression use off with <code>regex=False</code></p>\n\n<p>Consider the sample dataframe <code>apts</code></p>\n\n<pre><code>apts = pd.DataFrame(dict(Price=['2,000', '$1,000', '1000', '$14']))\n\n    Price\n0   2,000\n1  $1,000\n2    1000\n3     $14\n</code></pre>\n\n<p>Then using <code>regex=False</code></p>\n\n<pre><code>apts[apts.Price.str.contains('$', regex=False)]\n\n   Price\n0  2,000\n2   1000\n</code></pre>\n"}], "owner": {"reputation": 658, "user_id": 5244410, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/c2e125721f74672d38c5dcd66aaf5bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wprins", "link": "https://stackoverflow.com/users/5244410/wprins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1501709723, "creation_date": 1501707912, "question_id": 45470972, "link": "https://stackoverflow.com/questions/45470972/pandas-contains-method-doesnt-recognize", "title": "Pandas contains() method doesn&#39;t recognize &#39;$&#39;", "body": "<p>I am removing rows from a dataframe that match exactly <code>$1</code> under a particular column.</p>\n\n<p>I do this with</p>\n\n<pre><code>apts = apts[~apts.Price.str.contains('$1')]\n</code></pre>\n\n<p>This doesn't remove any rows. But I know I have rows with <code>$1</code> under the Price column.</p>\n\n<p>For example, this returns true:</p>\n\n<pre><code>if str(apts.ix[8193]['Price']) == '$1':\n    print('True')\n</code></pre>\n\n<p>Any idea whats going on here?</p>\n"}, {"tags": ["python", "web-scraping", "pdfminer"], "comments": [{"owner": {"reputation": 24739, "user_id": 1790644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1a2a40ddbc52508d5b53e9879961251?s=128&d=identicon&r=PG", "display_name": "Matt Clark", "link": "https://stackoverflow.com/users/1790644/matt-clark"}, "edited": false, "score": 1, "creation_date": 1501707986, "post_id": 45470964, "comment_id": 77903014, "body": "Even when viewing a PDF in the web-browser, you download a copy to your local cache. Your browser just still shows you the remote URL, even though what you are looking at has been saved to disk in your browser&#39;s tmp directory. Why not just do the same?"}], "answers": [{"comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1501708715, "post_id": 45471106, "comment_id": 77903353, "body": "This answer also requires that you import io. Now, how would I go about extracting the text from this file object f?"}, {"owner": {"reputation": 868, "user_id": 8398505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68440257a73de217ac3529653e000ad?s=128&d=identicon&r=PG&f=1", "display_name": "Dror Av.", "link": "https://stackoverflow.com/users/8398505/dror-av"}, "reply_to_user": {"reputation": 1956, "user_id": 2027146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mrrIp.jpg?s=128&g=1", "display_name": "Milk", "link": "https://stackoverflow.com/users/2027146/milk"}, "edited": false, "score": 0, "creation_date": 1501710342, "post_id": 45471106, "comment_id": 77904078, "body": "Edited the answer to give a more complete one, thanks @Milk for the link and the second part."}], "tags": [], "owner": {"reputation": 868, "user_id": 8398505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68440257a73de217ac3529653e000ad?s=128&d=identicon&r=PG&f=1", "display_name": "Dror Av.", "link": "https://stackoverflow.com/users/8398505/dror-av"}, "is_accepted": true, "score": 3, "last_activity_date": 1501710294, "last_edit_date": 1501710294, "creation_date": 1501708441, "answer_id": 45471106, "question_id": 45470964, "link": "https://stackoverflow.com/questions/45470964/python-extracting-text-from-webpage-pdf/45471106#45471106", "title": "Python - Extracting text from webpage PDF", "body": "<p>You can download the file as a byte stream with <code>requests</code> wrapping it with <code>io.BytesIO()</code>, just so:</p>\n\n<pre><code>import io\n\nimport requests\nfrom pyPdf import PdfFileReader\n\nurl = 'http://www.arkansasrazorbacks.com/wp-content/uploads/2017/02/Miami-Ohio-Game-2.pdf'\n\nr = requests.get(url)\nf = io.BytesIO(r.content)\n\nreader = PdfFileReader(f)\ncontents = reader.getPage(0).extractText().split('\\n')\n</code></pre>\n\n<p><code>f</code> is a file like object you can use just like you opened a PDF file. this way the file is only in the memory and never saved locally.</p>\n\n<p>In order to get text from the PDF file you can use PyPdf.</p>\n"}], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5603, "favorite_count": 3, "accepted_answer_id": 45471106, "answer_count": 1, "score": 3, "last_activity_date": 1501710294, "creation_date": 1501707861, "question_id": 45470964, "link": "https://stackoverflow.com/questions/45470964/python-extracting-text-from-webpage-pdf", "title": "Python - Extracting text from webpage PDF", "body": "<p>So I have come across a few posts that deal with converting PDF's to HTML or converting them to text, however they all deal with doing so from a file saved to the computer. Is there a way to extract the text from a webpage PDF without downloading the PDF file itself (as I will be doing so for a large number of files by iterating through a list of URL's)?</p>\n\n<p>I am also curious which is the best library to achieve this with. pdfkit, pdf2txt, pdfminer, etc.?</p>\n\n<p>Here is an example website with the format I will be dealing with: <a href=\"http://www.arkansasrazorbacks.com/wp-content/uploads/2017/02/Miami-Ohio-Game-2.pdf\" rel=\"nofollow noreferrer\">http://www.arkansasrazorbacks.com/wp-content/uploads/2017/02/Miami-Ohio-Game-2.pdf</a></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1501709438, "post_id": 45470945, "comment_id": 77903740, "body": "I think this is a bug listed at this link: <a href=\"https://github.com/pandas-dev/pandas/issues/16679\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/16679</a>"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 2690051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2089177f46ad4f05142cacc832656c2?s=128&d=identicon&r=PG&f=1", "display_name": "user2690051", "link": "https://stackoverflow.com/users/2690051/user2690051"}, "edited": false, "score": 1, "creation_date": 1501773404, "post_id": 45471372, "comment_id": 77937715, "body": "Thank you, Scott. Good to know the bug has been reported. I came up with the same workaround yesterday. Best regards."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1501709661, "creation_date": 1501709661, "answer_id": 45471372, "question_id": 45470945, "link": "https://stackoverflow.com/questions/45470945/aggregating-with-multiple-functions-with-axis-1/45471372#45471372", "title": "Aggregating with multiple functions with axis=1", "body": "<p>I think this is a bug listed on <a href=\"https://github.com/pandas-dev/pandas/issues/16679\" rel=\"nofollow noreferrer\">Pandas-Dev GitHub</a>:</p>\n\n<p>However, there is a workaround:</p>\n\n<pre><code>tsdf.T.agg(['min','max','mean']).T\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>                 min       max      mean\n2000-01-01  0.187605  1.707985  0.874033\n2000-01-02 -1.156725  1.121996 -0.009986\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 2690051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2089177f46ad4f05142cacc832656c2?s=128&d=identicon&r=PG&f=1", "display_name": "user2690051", "link": "https://stackoverflow.com/users/2690051/user2690051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 45471372, "answer_count": 1, "score": 1, "last_activity_date": 1501720451, "creation_date": 1501707747, "last_edit_date": 1501720451, "question_id": 45470945, "link": "https://stackoverflow.com/questions/45470945/aggregating-with-multiple-functions-with-axis-1", "title": "Aggregating with multiple functions with axis=1", "body": "<p>What is the best way to aggregate a data frame across columns (axis=1) applying multiple functions?</p>\n\n<p>Applying a list of functions works as expected with the default axis=0:</p>\n\n<pre><code>In [7]: tsdf = pd.DataFrame(np.random.randn(2, 3), columns=['A', 'B', 'C'],\n                            index=pd.date_range('1/1/2000', periods=2))\n   ...: tsdf\n\nOut[7]:\n                   A         B         C\n2000-01-01 -0.496619  0.282351  0.222707\n2000-01-02  1.185002 -0.988669 -2.300515\n\nIn [8]: tsdf.agg(['min', 'max', 'mean'])\nOut[8]:\n             A         B         C\nmin  -0.496619 -0.988669 -2.300515\nmax   1.185002  0.282351  0.222707\nmean  0.344191 -0.353159 -1.038904\n</code></pre>\n\n<p>But fails when using axis=1: </p>\n\n<pre><code>In [9]: tsdf.agg(['min', 'max', 'mean'], axis=1)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-9-ad4197b17943&gt; in &lt;module&gt;()\n----&gt; 1 tsdf.agg(['min', 'max', 'mean'], axis=1)\n\nc:\\python34\\lib\\site-packages\\pandas\\core\\frame.py in aggregate(self, func, axis, *args, **kwargs)\n   4152                 pass\n   4153         if result is None:\n-&gt; 4154             return self.apply(func, axis=axis, args=args, **kwargs)\n   4155         return result\n   4156\n\nc:\\python34\\lib\\site-packages\\pandas\\core\\frame.py in apply(self, func, axis, broadcast, raw, reduce, args, **kwds)\n   4260                         f, axis,\n   4261                         reduce=reduce,\n-&gt; 4262                         ignore_failures=ignore_failures)\n   4263             else:\n   4264                 return self._apply_broadcast(f, axis)\n\nc:\\python34\\lib\\site-packages\\pandas\\core\\frame.py in _apply_standard(self, func, axis, ignore_failures, reduce)\n   4356             try:\n   4357                 for i, v in enumerate(series_gen):\n-&gt; 4358                     results[i] = func(v)\n   4359                     keys.append(v.name)\n   4360             except Exception as e:\n\nTypeError: (\"'list' object is not callable\", 'occurred at index 2000-01-01 00:00:00')\n</code></pre>\n\n<p>Is there anything I am missing? I thought (naively) that the axes were treated more or less symmetrically. What is the best way to apply multiple aggregation functions with axis=1?</p>\n\n<p>Thanks,\nAlex</p>\n"}, {"tags": ["python", "django", "admin"], "answers": [{"comments": [{"owner": {"reputation": 1674, "user_id": 3453836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Fhy9.jpg?s=128&g=1", "display_name": "R&#225;fagan", "link": "https://stackoverflow.com/users/3453836/r%c3%a1fagan"}, "edited": false, "score": 0, "creation_date": 1501769806, "post_id": 45471640, "comment_id": 77934589, "body": "How can I use this in a NestedStackedInline?"}, {"owner": {"reputation": 1510, "user_id": 5157209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UyTN.jpg?s=128&g=1", "display_name": "Anton Shurashov", "link": "https://stackoverflow.com/users/5157209/anton-shurashov"}, "reply_to_user": {"reputation": 1674, "user_id": 3453836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Fhy9.jpg?s=128&g=1", "display_name": "R&#225;fagan", "link": "https://stackoverflow.com/users/3453836/r%c3%a1fagan"}, "edited": false, "score": 0, "creation_date": 1501770194, "post_id": 45471640, "comment_id": 77934938, "body": "It doesn&#39;t depend on <code>NestedStackedInline</code>. If you set <code>search_fields</code> for the <code>Course</code> admin page it will be showed also on <a href=\"https://i.stack.imgur.com/w3Sjn.png\" rel=\"nofollow noreferrer\">this screen</a>"}, {"owner": {"reputation": 1674, "user_id": 3453836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Fhy9.jpg?s=128&g=1", "display_name": "R&#225;fagan", "link": "https://stackoverflow.com/users/3453836/r%c3%a1fagan"}, "edited": false, "score": 0, "creation_date": 1502113412, "post_id": 45471640, "comment_id": 78056379, "body": "You&#39;re alright. The only limitation is set the queryset for this view, but for filters and search this also apply. Thanks!"}], "tags": [], "owner": {"reputation": 1510, "user_id": 5157209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UyTN.jpg?s=128&g=1", "display_name": "Anton Shurashov", "link": "https://stackoverflow.com/users/5157209/anton-shurashov"}, "is_accepted": false, "score": 1, "last_activity_date": 1501711200, "last_edit_date": 1501711200, "creation_date": 1501710878, "answer_id": 45471640, "question_id": 45470908, "link": "https://stackoverflow.com/questions/45470908/how-to-customize-django-admin-search-results-in-many-to-many-fields/45471640#45471640", "title": "How to customize django admin search results in many to many fields", "body": "<p><code>self.model</code> is not <code>QuerySet</code> or a model, use the model directly:</p>\n\n<pre><code>class PresentialModuleCourseInline(NestedStackedInline):\n     model = Course.modules.through\n     raw_id_fields = ('module_course',)\n     extra = 1\n\n     def get_queryset(self, request):\n        return Course.objects.filter(module_course__type_course=ModuleCourse.PRESENTIAL)\n</code></pre>\n\n<p>For searching set <code>search_fields</code> for your <code>CourseAdmin</code>:</p>\n\n<pre><code>class CourseAdmin(admin.ModelAdmin):\n    search_fields = ('title',)  # your search fields here\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 5322399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQTVm.jpg?s=128&g=1", "display_name": "Lucas Paim", "link": "https://stackoverflow.com/users/5322399/lucas-paim"}, "is_accepted": true, "score": 1, "last_activity_date": 1502112167, "creation_date": 1502112167, "answer_id": 45548011, "question_id": 45470908, "link": "https://stackoverflow.com/questions/45470908/how-to-customize-django-admin-search-results-in-many-to-many-fields/45548011#45548011", "title": "How to customize django admin search results in many to many fields", "body": "<p>To make filter in <code>ForeignKeyRawIdWidget</code> (lupe) you need to add a limit_choices_to the widget, it add a query param to filter in popup page like <code>?type_course=online</code></p>\n\n<p>Sample:</p>\n\n<pre><code>class PresentialModuleCourseInline(NestedStackedInline):\n\"\"\"Module Course Presential Stacked Inline\"\"\"\nmodel = Course.modules.through\nextra = 1\nraw_id_fields = ('module_course', )\n\ndef get_formset(self, request, obj=None, **kwargs):\n    form = super().get_formset(request, obj, **kwargs)\n    field = form.form.base_fields['module_course']\n    field.widget.rel.limit_choices_to =\\\n        {'type_course': ModuleCourse.PRESENTIAL}\n    return form\n</code></pre>\n"}], "owner": {"reputation": 1674, "user_id": 3453836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Fhy9.jpg?s=128&g=1", "display_name": "R&#225;fagan", "link": "https://stackoverflow.com/users/3453836/r%c3%a1fagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1089, "favorite_count": 1, "accepted_answer_id": 45548011, "answer_count": 2, "score": 1, "last_activity_date": 1502112167, "creation_date": 1501707602, "last_edit_date": 1501769696, "question_id": 45470908, "link": "https://stackoverflow.com/questions/45470908/how-to-customize-django-admin-search-results-in-many-to-many-fields", "title": "How to customize django admin search results in many to many fields", "body": "<p>I trying to filter the list shown when I use the lupe in many to many fields (image bellow).\nMaybe a text search would be interesting too.</p>\n\n<p>Any help?</p>\n\n<p><a href=\"https://i.stack.imgur.com/w3Sjn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w3Sjn.png\" alt=\"django lupe search result example\"></a>\n<a href=\"https://i.stack.imgur.com/tF0Tx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tF0Tx.png\" alt=\"django admin stacked inline example\"></a></p>\n\n<p>Here's the code:</p>\n\n<pre><code>class PresentialModuleCourseInline(NestedStackedInline):\n    \"\"\"Module Course Presential Stacked Inline\"\"\"\n     model = Course.modules.through\n     raw_id_fields = ('module_course',)\n     extra = 1\n\n     def get_queryset(self, request):\n        return self.model.objects.filter(\n           module_course__type_course=ModuleCourse.PRESENTIAL)  # Doesn't work\n</code></pre>\n"}, {"tags": ["python", "file-io", "filesystems", "glob"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1501707575, "post_id": 45470892, "comment_id": 77902803, "body": "<code>\\t</code> is the tab character so glob has nothing to scan."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1501707616, "post_id": 45470892, "comment_id": 77902827, "body": "Use <code>r&#39;&#39;</code> if you don&#39;t want backslashes to have any special meaning."}, {"owner": {"reputation": 65, "user_id": 8305015, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/85ede072b27e5f0f96a30b734ac3106e?s=128&d=identicon&r=PG&f=1", "display_name": "Icee", "link": "https://stackoverflow.com/users/8305015/icee"}, "edited": false, "score": 0, "creation_date": 1501712634, "post_id": 45470892, "comment_id": 77904920, "body": "Thanks guys! I got it."}], "answers": [{"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1501707831, "post_id": 45470921, "comment_id": 77902923, "body": "Just FYI, Windows is perfectly happy to use forward slashes to separate path segments, and if you do that all your worries go away."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1501707895, "post_id": 45470921, "comment_id": 77902965, "body": "@kindall true for <code>glob</code>, but for some DOS commands (when performing system calls) &quot;/&quot; is seen an option so you have to use backslash. And the interest of pasting a literal path is to avoid to escape or convert to slashes."}, {"owner": {"reputation": 65, "user_id": 8305015, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/85ede072b27e5f0f96a30b734ac3106e?s=128&d=identicon&r=PG&f=1", "display_name": "Icee", "link": "https://stackoverflow.com/users/8305015/icee"}, "edited": false, "score": 0, "creation_date": 1501708455, "post_id": 45470921, "comment_id": 77903229, "body": "Thank you so much!! I never would have thought of that!"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1501708081, "last_edit_date": 1501708081, "creation_date": 1501707671, "answer_id": 45470921, "question_id": 45470892, "link": "https://stackoverflow.com/questions/45470892/inconsistent-glob-glob-results/45470921#45470921", "title": "Inconsistent glob.glob results", "body": "<p>in <code>techFiles = glob.glob(\".\\techfile\\*.tcl\")</code>, <code>\\t</code> is interpreted as a tabulation char (other \"problematic chars are <code>\\b</code>, <code>\\v</code>, <code>\\a</code>, <code>\\x</code>, <code>\\b</code>, <code>\\f</code>, <code>\\U</code>, <code>\\</code> followed by a digit, ... I may forget some)</p>\n\n<p>So the path is invalid and <code>glob.glob</code> returns nothing.</p>\n\n<p>Your other path contains <code>\\l</code> and <code>\\*</code> which doesn't correspond to any escape sequence, so it is not interpreted and kind of works.</p>\n\n<p>To pass string literals as Windows paths, always use raw prefix, it's simpler than escaping each backslash:</p>\n\n<pre><code>techFiles = glob.glob(r\".\\techfile\\*.tcl\")\n</code></pre>\n\n<p>Slightly off-topic: there's a lot of code examples here with capitalized directory names: ex <code>glob.glob(\".\\Techfile\\Backlog\\*.tcl\")</code>, and I always wondered if it was mere luck, or if most people still don't get this <code>\\t</code> issue and find a workaround by capitalizing, since Windows paths are case-insensitive...</p>\n"}], "owner": {"reputation": 65, "user_id": 8305015, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/85ede072b27e5f0f96a30b734ac3106e?s=128&d=identicon&r=PG&f=1", "display_name": "Icee", "link": "https://stackoverflow.com/users/8305015/icee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 990, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501708081, "creation_date": 1501707539, "question_id": 45470892, "link": "https://stackoverflow.com/questions/45470892/inconsistent-glob-glob-results", "title": "Inconsistent glob.glob results", "body": "<p>Can anyone tell me why this command works:</p>\n\n<pre><code>lefs = glob.glob(\".\\lef\\*.lef\")\n</code></pre>\n\n<p>but this doesnt?</p>\n\n<pre><code>techFiles = glob.glob(\".\\techfile\\*.tcl\")\n</code></pre>\n\n<p>I have to add the extra backslash in order for it to work:</p>\n\n<pre><code>techFiles = glob.glob(\".\\\\techfile\\*.tcl\")\n</code></pre>\n\n<p>The other line works fine with no extra backslash..\nThese are just simple files with different extensions.</p>\n\n<p>All files exists and are in the correct directory.</p>\n"}, {"tags": ["python", "decorator"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1501707708, "post_id": 45470883, "comment_id": 77902876, "body": "Would you be okay with just doing <code>self.method = self.foo.decorator(self.method)</code> in <code>__init__</code>?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1501707803, "post_id": 45470883, "comment_id": 77902914, "body": "You need to use <code>@Foo(some_value).decorator</code>, since you don&#39;t have an instance of <code>Foo</code> on which to call <code>decorator</code> otherwise."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1501707888, "post_id": 45470883, "comment_id": 77902963, "body": "What are you actually trying to <i>achieve</i> here? The short answer is that instance attributes don&#39;t exist until you have an instance, which cannot be while you&#39;re still creating the class."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501708053, "post_id": 45470883, "comment_id": 77903049, "body": "@TianchengLiu: Well, that\u2019d be because the decorator is incorrect too; it should return <code>wrapper</code>."}, {"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501708073, "post_id": 45470883, "comment_id": 77903065, "body": "@TianchengLiu you need to <code>return wrapper</code> in decorator from @Ryan suggestion."}, {"owner": {"reputation": 459, "user_id": 5867094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-m5-GzcQNl4g/AAAAAAAAAAI/AAAAAAAAAAA/bMoBI8fpZ6k/photo.jpg?sz=128", "display_name": "Tiancheng Liu", "link": "https://stackoverflow.com/users/5867094/tiancheng-liu"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501708473, "post_id": 45470883, "comment_id": 77903238, "body": "@Ryan sorry for that mistake. Your idea works although it doesn&#39;t look like a decorator. I know this is how Python implement its decorator grammar sugar. But expand it make a little bit weird"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501708612, "post_id": 45470883, "comment_id": 77903305, "body": "It doesn\u2019t look like a decorator because it\u2019s not a decorator. You can\u2019t use a decorator before it exists. If the result is a little bit weird, that\u2019s because the goal is a little bit weird. What are you actually trying to accomplish?"}, {"owner": {"reputation": 459, "user_id": 5867094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-m5-GzcQNl4g/AAAAAAAAAAI/AAAAAAAAAAA/bMoBI8fpZ6k/photo.jpg?sz=128", "display_name": "Tiancheng Liu", "link": "https://stackoverflow.com/users/5867094/tiancheng-liu"}, "edited": false, "score": 0, "creation_date": 1501708765, "post_id": 45470883, "comment_id": 77903384, "body": "Exactly same on what I said. Actually the decorator should be some log feature like method to monitor a series method."}], "owner": {"reputation": 459, "user_id": 5867094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-m5-GzcQNl4g/AAAAAAAAAAI/AAAAAAAAAAA/bMoBI8fpZ6k/photo.jpg?sz=128", "display_name": "Tiancheng Liu", "link": "https://stackoverflow.com/users/5867094/tiancheng-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501708199, "creation_date": 1501707499, "last_edit_date": 1501708199, "question_id": 45470883, "link": "https://stackoverflow.com/questions/45470883/can-an-instance-method-be-a-decorator-to-another-method-of-different-class", "title": "Can an instance method be a decorator to another method of different class", "body": "<pre><code>class Foo():\n    def __init__(self, a):\n        self.a = a \n\n\n    def decorator(self, method):\n        def wrapper(*args, **kws):\n            if self.a == 'a' :\n                return method(*args, **kws)  \n            else:\n                print ('cannot find attr a') \n            return wrapper    \n\nclass Bar():\n    def __init__(self, b):\n        self.b = b\n        self.foo = Foo(b)\n\n    @self.foo.decorator\n    def method(self):\n        print (self.b) \n\nbar = Bar('a')\nbar.method()   \n</code></pre>\n\n<p>In this case, I want to use an instance method to decorate another method in another class. Each of decorator or method to be decorated have to access some instance variable. So they cannot be separate from given class or even be a static method. Of course, my code doesn't work since I do not define <code>'self'</code> in @ sentence. Could anyone give me some advice to implement it or this is just a blind alley?</p>\n"}, {"tags": ["python", "arrays", "matplotlib", "heatmap", "seaborn"], "comments": [{"owner": {"reputation": 5360, "user_id": 5103802, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/889904984390190/picture?type=large", "display_name": "Vin&#237;cius Figueiredo", "link": "https://stackoverflow.com/users/5103802/vin%c3%adcius-figueiredo"}, "edited": false, "score": 0, "creation_date": 1501711489, "post_id": 45470882, "comment_id": 77904530, "body": "I know you said you&#39;ve looked into a lot of questions, but please take a look at <a href=\"https://stackoverflow.com/a/45273661/5103802\">this one</a>. I answered this a while ago, it seems to be what you want, 3 1D arrays into a heatmap."}, {"owner": {"reputation": 61, "user_id": 8332914, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211990392613213/picture?type=large", "display_name": "Bobby Hollingsworth", "link": "https://stackoverflow.com/users/8332914/bobby-hollingsworth"}, "reply_to_user": {"reputation": 5360, "user_id": 5103802, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/889904984390190/picture?type=large", "display_name": "Vin&#237;cius Figueiredo", "link": "https://stackoverflow.com/users/5103802/vin%c3%adcius-figueiredo"}, "edited": false, "score": 1, "creation_date": 1501713706, "post_id": 45470882, "comment_id": 77905275, "body": "This is absolutely perfect, thanks!"}, {"owner": {"reputation": 61, "user_id": 8332914, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211990392613213/picture?type=large", "display_name": "Bobby Hollingsworth", "link": "https://stackoverflow.com/users/8332914/bobby-hollingsworth"}, "reply_to_user": {"reputation": 5360, "user_id": 5103802, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/889904984390190/picture?type=large", "display_name": "Vin&#237;cius Figueiredo", "link": "https://stackoverflow.com/users/5103802/vin%c3%adcius-figueiredo"}, "edited": false, "score": 0, "creation_date": 1501730923, "post_id": 45470882, "comment_id": 77909105, "body": "@Vin&#237;ciusAguiar -- would it be possible to get more discrete colors (remove the contour shading)?"}, {"owner": {"reputation": 61, "user_id": 8332914, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211990392613213/picture?type=large", "display_name": "Bobby Hollingsworth", "link": "https://stackoverflow.com/users/8332914/bobby-hollingsworth"}, "reply_to_user": {"reputation": 5360, "user_id": 5103802, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/889904984390190/picture?type=large", "display_name": "Vin&#237;cius Figueiredo", "link": "https://stackoverflow.com/users/5103802/vin%c3%adcius-figueiredo"}, "edited": false, "score": 0, "creation_date": 1501733597, "post_id": 45470882, "comment_id": 77909746, "body": "Such as a heatmap representation: <a href=\"http://seaborn.pydata.org/generated/seaborn.heatmap.html\" rel=\"nofollow noreferrer\">seaborn.pydata.org/generated/seaborn.heatmap.html</a>"}, {"owner": {"reputation": 5360, "user_id": 5103802, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/889904984390190/picture?type=large", "display_name": "Vin&#237;cius Figueiredo", "link": "https://stackoverflow.com/users/5103802/vin%c3%adcius-figueiredo"}, "edited": false, "score": 0, "creation_date": 1501735161, "post_id": 45470882, "comment_id": 77910277, "body": "I don&#39;t think I understand your question right, but if I do understood it I&#39;m afraid I can&#39;t help you, it would be good asking another question or digging into matplotlib&#39;s docs."}, {"owner": {"reputation": 61, "user_id": 8332914, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211990392613213/picture?type=large", "display_name": "Bobby Hollingsworth", "link": "https://stackoverflow.com/users/8332914/bobby-hollingsworth"}, "reply_to_user": {"reputation": 5360, "user_id": 5103802, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/889904984390190/picture?type=large", "display_name": "Vin&#237;cius Figueiredo", "link": "https://stackoverflow.com/users/5103802/vin%c3%adcius-figueiredo"}, "edited": false, "score": 0, "creation_date": 1501819507, "post_id": 45470882, "comment_id": 77957096, "body": "@Vin&#237;ciusAguiar: I mean more of a heatmap representation like so, however, I have data in 3 columns rather than a 2-D array! <a href=\"https://marcinkula.files.wordpress.com/2011/10/f1_heatmap1.png\" rel=\"nofollow noreferrer\">marcinkula.files.wordpress.com/2011/10/f1_heatmap1.png</a>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1501863269, "post_id": 45470882, "comment_id": 77983729, "body": "If I understand correctly, you just need to use <code>arr = arr.reshape(-1,37,3)</code>: in that case <code>arr[...,0]</code> are your 2d X indices, <code>arr[...,1]</code> are your 2d <code>Y</code> indices, and <code>arr[...,2]</code> are your 2d Z indices. Your favourite heatmap plotter (<code>pyplot.pcolormesh</code>, <code>seaborn.heatmap</code>, etc.) will most likely accept these arrays, give or take a few transposes to get your axes right. And don&#39;t call that <code>df</code>: <code>np.loadtxt</code> will give you a numpy array; none of this has anything to do with pandas dataframes."}], "answers": [{"tags": [], "owner": {"reputation": 1866, "user_id": 8248753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0Och.jpg?s=128&g=1", "display_name": "error", "link": "https://stackoverflow.com/users/8248753/error"}, "is_accepted": true, "score": 6, "last_activity_date": 1502625092, "creation_date": 1502625092, "answer_id": 45660022, "question_id": 45470882, "link": "https://stackoverflow.com/questions/45470882/x-y-z-array-data-to-heatmap/45660022#45660022", "title": "X Y Z array data to heatmap", "body": "<p>If I understand you correctly you have three columns with X and Y denoting the position of a value Z. </p>\n\n<p>Consider the following example. There are three columns: X and Y contain positional information (categories in this case) and Z contains the values for shading the heatmap.</p>\n\n<pre><code>x = np.array(['a','b','c','a','b','c','a','b','c'])\ny = np.array(['a','a','a','b','b','b','c','c','c'])\nz = np.array([0.3,-0.3,1,0.5,-0.25,-1,0.25,-0.23,0.25])\n</code></pre>\n\n<p>Then we create a dataframe from these columns and transpose them (so x,y and z actually become columns). Give column names and make sure Z_value is a number.</p>\n\n<pre><code>df = pd.DataFrame.from_dict(np.array([x,y,z]).T)\ndf.columns = ['X_value','Y_value','Z_value']\ndf['Z_value'] = pd.to_numeric(df['Z_value'])\n</code></pre>\n\n<p>resulting in this dataframe.</p>\n\n<pre><code>X_value Y_value Z_value\n0   a   a   0.30\n1   b   a   -0.30\n2   c   a   1.00\n3   a   b   0.50\n4   b   b   -0.25\n5   c   b   -1.00\n6   a   c   0.25\n7   b   c   -0.23\n8   c   c   0.25\n</code></pre>\n\n<p>From this you cannot create a heatmap, however by calling <code>df.pivot('Y_value','X_value','Z_value')</code> you pivot the dataframe to a form that can be used for a heatmap. </p>\n\n<pre><code>pivotted= df.pivot('Y_value','X_value','Z_value')\n</code></pre>\n\n<p>The resulting dataframe looks like this.</p>\n\n<pre><code>X_value a   b   c\nY_value         \na   0.30    -0.30   1.00\nb   0.50    -0.25   -1.00\nc   0.25    -0.23   0.25\n</code></pre>\n\n<p>You can then feed <code>pivotted</code> to the <code>sns.heatmap</code> to create your heatmap.</p>\n\n<pre><code>sns.heatmap(pivotted,cmap='RdBu')\n</code></pre>\n\n<p>Resulting in this heatmap.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DiDYM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DiDYM.png\" alt=\"enter image description here\"></a></p>\n\n<p>You may need to make some adjustments to the code for your precise needs. But since I had no example data to go from I needed to make my own example.</p>\n"}], "owner": {"reputation": 61, "user_id": 8332914, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211990392613213/picture?type=large", "display_name": "Bobby Hollingsworth", "link": "https://stackoverflow.com/users/8332914/bobby-hollingsworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11773, "favorite_count": 2, "accepted_answer_id": 45660022, "answer_count": 1, "score": 5, "last_activity_date": 1502625092, "creation_date": 1501707497, "last_edit_date": 1501707820, "question_id": 45470882, "link": "https://stackoverflow.com/questions/45470882/x-y-z-array-data-to-heatmap", "title": "X Y Z array data to heatmap", "body": "<p>I couldn't quite find a consensus answer for this question or one that fits my needs -- I have data in three columns of a text file: X, Y, and Z. Columns are tab-deliminated. I would like to make a heatmap representation of these data with Python where X and Y positions are shaded by the value in Z, which ranges from 0 to 1 (a discrete probability of X and Y). I was trying seaborn's heatmap package and matplotlib's pcolormesh, but unfortunately these need 2D data arrays. </p>\n\n<p>My data runs through X from 1 to 37 for constant y then iterates by 0.1 in the y. y max fluctuates based on the data set, but ymin is always 0.</p>\n\n<p>[X Y Z] row1[1...37   0.0000    Zvalue], row2[1...37   0.1000    Zvalue] etc.</p>\n\n<pre><code>import numpy as np\nfrom numpy import *\nimport pandas as pd\nimport seaborn as sns\nsns.set()\n\ndf = np.loadtxt(open(\"file.txt\", \"rb\"), delimiter=\"\\t\").astype(\"float\")\n</code></pre>\n\n<p>Any tips for next steps?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501707915, "post_id": 45470849, "comment_id": 77902973, "body": "you dont want something like this <code>aa@# or bb#@</code> but <code>##</code> is also duplicated isnt it?"}, {"owner": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501708031, "post_id": 45470849, "comment_id": 77903039, "body": "no i mean that a,b can&#39;t be duplicated #or @ can be duplicated"}, {"owner": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501708358, "post_id": 45470849, "comment_id": 77903190, "body": "if a,b and in total added chars that i want to add can be duplicate problem was solved !"}], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "edited": false, "score": 0, "creation_date": 1501850360, "post_id": 45489282, "comment_id": 77974834, "body": "it&#39;s important to use <b>permute_unique</b> against <b>permutation</b> BIF because <b>permutation</b> will repeat  <code>@@1 , ##1 </code> and any pass that contain duplicated word but in <b>permute_unique</b> this bug will be fixed"}], "tags": [], "owner": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "is_accepted": true, "score": 0, "last_activity_date": 1501777710, "last_edit_date": 1501777710, "creation_date": 1501775972, "answer_id": 45489282, "question_id": 45470849, "link": "https://stackoverflow.com/questions/45470849/working-with-permutationed-list-making-pass-word-list/45489282#45489282", "title": "working with Permutationed list (making pass_word list)", "body": "<p>i solved my problem , my idea : first of all i generate all posiable permutation of added chars**(#,@)** and save them to a list and then create another list and save specific chars <strong>(a,b)</strong> to it now we have to list just we need to merge them and in finally use <code>permute_unique function</code></p>\n\n<pre><code> def permute_unique(nums):\n        perms = [[]]\n        for n in nums:\n            new_perm = []\n            for perm in perms:\n                for i in range(len(perm) + 1):\n                    new_perm.append(perm[:i] + [n] + perm[i:])\n                    # handle duplication\n                    if i &lt; len(perm) and perm[i] == n: break\n            perms = new_perm\n        return perms\n\n\n\n   l= list(itertools.combinations_with_replacement(algorithm,3))\n\n    for i in l:\n     i = i+tuple(s) # merge \n     master_list.append(i) \n\nprint(list(permute_unique))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "edited": false, "score": 0, "creation_date": 1501849833, "post_id": 45489493, "comment_id": 77974496, "body": "i think it&#39;s a little bug in your code : do this : <code>special=&quot;a&quot;</code>, <code>added=&quot;@#</code> and then  ` [&#39;&#39;.join(p)       for a in itertools.combinations_with_replacement(added, 2)       for p in itertools.permutations(a + tuple(special))] ` you will see this result : ` &#39;@@a&#39;, &#39;@a@&#39;, &#39;@@a&#39;, &#39;@a@&#39;, &#39;a@@&#39;, &#39;a@@&#39;, &#39;@#a&#39;, &#39;@a#&#39;, &#39;#@a&#39;, &#39;#a@&#39;, &#39;a@#&#39;, &#39;a#@&#39;, &#39;##a&#39;, &#39;#a#&#39;, &#39;##a&#39;, &#39;#a#&#39;, &#39;a##&#39;, &#39;a##&#39;]` as you can ses @@a  repeated , that&#39;s because you used <b>permutation</b> BIF of python , it&#39;s better to use my function to fix this a little bug"}, {"owner": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "edited": false, "score": 0, "creation_date": 1501851304, "post_id": 45489493, "comment_id": 77975476, "body": "the another way is use <b>Set</b> to fix this <code>(set([&#39;&#39;.join(p)       for a in itertools.combinations_with_replacement(a, 2)       for p in itertools.permutations(a + tuple(s))])) result would be : ([&#39;@a@&#39;, &#39;a##&#39;, &#39;@@a&#39;, &#39;@a#&#39;, &#39;a@#&#39;, &#39;a@@&#39;, &#39;@#a&#39;, &#39;a#@&#39;, &#39;#a#&#39;, &#39;#@a&#39;, &#39;#a@&#39;, &#39;##a&#39;])</code>"}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "reply_to_user": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "edited": false, "score": 0, "creation_date": 1501851455, "post_id": 45489493, "comment_id": 77975587, "body": "@keyvanvafaee Sure, forgot about duplicates in the permutations. Just pass the result through a <code>set</code> (once is enough, though)."}], "tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1501851410, "last_edit_date": 1501851410, "creation_date": 1501776621, "answer_id": 45489493, "question_id": 45470849, "link": "https://stackoverflow.com/questions/45470849/working-with-permutationed-list-making-pass-word-list/45489493#45489493", "title": "working with Permutationed list (making pass_word list)", "body": "<p>You can just combine the <code>combinations_with_replacement</code> of the \"added\" chars with all the <code>permutations</code> of those combinations and the \"special\" characters:</p>\n\n<pre><code>&gt;&gt;&gt; special = \"ab\"\n&gt;&gt;&gt; added = \"@#\"\n&gt;&gt;&gt; [''.join(p) \n     for a in itertools.combinations_with_replacement(added, 2) \n     for p in itertools.permutations(a + tuple(special))]\n['@@ab',\n '@@ba',\n '@a@b',\n ...\n 'a@b@',\n 'ab@@',\n ...\n '#@ab',\n '#@ba',\n ...\n 'ba##',\n 'ba##']\n</code></pre>\n\n<p>If you want to prevent duplicates, pass the inner <code>permuations</code> through a <code>set</code>:</p>\n\n<pre><code>&gt;&gt;&gt; [''.join(p) \n     for a in itertools.combinations_with_replacement(added, 2) \n     for p in set(itertools.permutations(a + tuple(special)))]\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 8275041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqTcm.png?s=128&g=1", "display_name": "keyvan vafaee", "link": "https://stackoverflow.com/users/8275041/keyvan-vafaee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 45489282, "answer_count": 2, "score": 1, "last_activity_date": 1501926980, "creation_date": 1501707362, "last_edit_date": 1501926980, "question_id": 45470849, "link": "https://stackoverflow.com/questions/45470849/working-with-permutationed-list-making-pass-word-list", "title": "working with Permutationed list (making pass_word list)", "body": "<p>i want to create a pass_word list let's assume i have created a Permutationed list for example : </p>\n\n<pre><code>@@\n@#\n#@\n##\n</code></pre>\n\n<p>and then i want to add another chars to it (for ex : a,b) <strong>a,b is named special chars</strong> in this code <strong>and #@ are added chars</strong> </p>\n\n<p>so i want finally get this list :</p>\n\n<pre><code>ab@@ , ab@#,ab#@,ab## , ba@@, .... a@#b,...,b##a , ... , ba##\n</code></pre>\n\n<blockquote>\n  <p>Note : I don't want any special characters get duplicated for ex i\n  don't want <code>aa@# or bb#@</code> (<code>a,b</code> can't be duplicated  because they are\n  <em>special chars</em> <code>#or @</code> can be duplicated because they are <em>added chars</em> )</p>\n</blockquote>\n\n<p>codes :</p>\n\n<pre><code>    master_list=[]\nl=[]\n\nl= list(itertools.combinations_with_replacement('@#',2)) # get me this list :[(@,@),(@,#),(#,@),(#,#)]\n\n\nfor i in l:\n i = i+tuple(s)  # adding special char(1 in this example) to created list\n master_list.append(i)\n\n\nprint (master_list) # now i have this list : [(@,@,1),(@,#,1),....(#,#,1)\n</code></pre>\n\n<p><strong>now if i can get all <em>permutation</em> of <code>master_list</code> my problem can be solved but i can't do that</strong>  </p>\n"}, {"tags": ["python", "django", "http", "python-requests", "django-urls"], "comments": [{"owner": {"reputation": 5528, "user_id": 466066, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0ed1a417e659f1205cac821201ca0e9b?s=128&d=identicon&r=PG", "display_name": "Jose Cherian", "link": "https://stackoverflow.com/users/466066/jose-cherian"}, "edited": false, "score": 0, "creation_date": 1501709020, "post_id": 45470843, "comment_id": 77903536, "body": "see this : <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/default/#django.contrib.auth.decorators.login_required\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.11/topics/auth/default/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1510, "user_id": 5157209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UyTN.jpg?s=128&g=1", "display_name": "Anton Shurashov", "link": "https://stackoverflow.com/users/5157209/anton-shurashov"}, "is_accepted": true, "score": 0, "last_activity_date": 1501709330, "creation_date": 1501709330, "answer_id": 45471305, "question_id": 45470843, "link": "https://stackoverflow.com/questions/45470843/how-to-hide-get-requests-from-also-being-displayed-on-web/45471305#45471305", "title": "How to hide GET requests from also being displayed on web", "body": "<p>By default all your views in django are public, but it's easy to make them protected by <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/default/#the-raw-way\" rel=\"nofollow noreferrer\">checking <code>request.user</code></a> or <a href=\"https://docs.djangoproject.com/en/1.11/topics/auth/default/#the-login-required-decorator\" rel=\"nofollow noreferrer\">using a <code>login_required</code> decorator</a>.</p>\n"}], "owner": {"reputation": 41, "user_id": 6867965, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-yiJvEPJmY1o/AAAAAAAAAAI/AAAAAAAABtM/Xev3WFkTvqc/photo.jpg?sz=128", "display_name": "4rsenal", "link": "https://stackoverflow.com/users/6867965/4rsenal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 45471305, "answer_count": 1, "score": 0, "last_activity_date": 1501709330, "creation_date": 1501707337, "question_id": 45470843, "link": "https://stackoverflow.com/questions/45470843/how-to-hide-get-requests-from-also-being-displayed-on-web", "title": "How to hide GET requests from also being displayed on web", "body": "<p>So I'm working on a django project, and one of the objectives is to allow a separate python script to make a HTTP request (using Requests library) to get json data <strong>after</strong> being authenticated. This works fine, the problem is that if I directly go the url the request.get object uses, I can see all of the data (without any user authentication being involved). This makes my authentication process pointless, as the data is easily visible by simply going to the url. So how would I hide the data on the web side from being viewed, but still allow a GET request to pull the data to my script?</p>\n\n<p>On a side note, I already have a authentication system for the web interface portion of my project (which displays the data). I've tried putting it behind that but to no success.</p>\n\n<pre><code>import json, requests, _mysql\nlogin_attempt = requests.post('http://127.0.0.1:8000/m_app/data_login/', \n{'username': 'test', 'password': 'password1234'})\nif login_attempt.content.decode('UTF-8') == 'Successful':\n    print('Logged in.')\nelse:\n    print('Not logged in.')\ncookies = dict(sessionid=login_attempt.cookies.get('sessionid'))\ndata = requests.get('http://127.0.0.1:8000/m_app/load/data', #if I type this URL in, I see the data \ncookies=cookies)\nprint(data.content) #prints desired data\n</code></pre>\n"}, {"tags": ["python", "list", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1501707405, "post_id": 45470840, "comment_id": 77902719, "body": "<code>i</code> is an auto-incrementing integer. <code>h</code> is the item in the enumerated list."}, {"owner": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1501707437, "post_id": 45470840, "comment_id": 77902733, "body": "i thought <code>i</code> gives the index??"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1501707500, "post_id": 45470840, "comment_id": 77902770, "body": "So, you want <code>dfs[1].loc[:, &#39;var2&#39;]</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1501707525, "post_id": 45470840, "comment_id": 77902779, "body": "<code>for x, y in enumerate([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])</code>.... <code>x</code> will take the values 0, 1, 2 and <code>y</code> will take the values <code>a</code>, <code>b</code>, <code>c</code>."}, {"owner": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "edited": false, "score": 0, "creation_date": 1501707600, "post_id": 45470840, "comment_id": 77902815, "body": "@COLDSPEED, <code>dfs[1].loc[:, &#39;var2&#39;]</code> this gives all the DataFrames, but I need just the second DataFrame"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501707660, "post_id": 45470840, "comment_id": 77902854, "body": "@i.n.n.m dfs[1] gives the second, if <code>dfs</code> is your list"}, {"owner": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "edited": false, "score": 0, "creation_date": 1501707747, "post_id": 45470840, "comment_id": 77902894, "body": "@COLDSPEED yes, I was missing <code>[1]</code>, now it works charm!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501707921, "post_id": 45470840, "comment_id": 77902975, "body": "@i.n.n.m Added an explanation as to why your code didn&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "edited": false, "score": 0, "creation_date": 1501707938, "post_id": 45470916, "comment_id": 77902985, "body": "@COLDSPEED <code>column = h[&#39;var2&#39;]</code> how do I access the second DF?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "edited": false, "score": 0, "creation_date": 1501707994, "post_id": 45470916, "comment_id": 77903017, "body": "@i.n.n.m Modified my answer. But I don&#39;t recommend you do that. use one of the above 3 methods."}, {"owner": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "edited": false, "score": 0, "creation_date": 1501708184, "post_id": 45470916, "comment_id": 77903116, "body": "@COLDSPEED yes, this explains now why it throws a type error. what if I have to loop through it and plot them for each <code>DF</code>s <code>var2</code> values?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "edited": false, "score": 1, "creation_date": 1501708468, "post_id": 45470916, "comment_id": 77903235, "body": "@i.n.n.m I am not well versed with plotting. But you&#39;d probably plot each one in the loop (remove the if i == 1 and break) and then plt.show() at the end."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1501707964, "last_edit_date": 1501707964, "creation_date": 1501707630, "answer_id": 45470916, "question_id": 45470840, "link": "https://stackoverflow.com/questions/45470840/access-a-column-of-df-that-is-in-list-in-pandas/45470916#45470916", "title": "Access a column of DF that is in list in Pandas", "body": "<p>Assuming <code>dfs</code> is your list of dataframes.</p>\n\n<p><em>Option 1:</em> Direct indexing:</p>\n\n<pre><code>var2 = dfs[1]['var2']\n</code></pre>\n\n<p><em>Option 2:</em> Using <code>df.loc</code> (explicit):</p>\n\n<pre><code>var2 = dfs[1].loc[:, 'var2']\n</code></pre>\n\n<hr>\n\n<p><em>Option 3:</em> Using <code>df.iloc</code> (index based - implicit):</p>\n\n<pre><code>var2 = dfs[1].iloc[:, 1]  # assuming `var2` is the second column\n</code></pre>\n\n<hr>\n\n<h3>What's wrong with your code?</h3>\n\n<p><code>enumerate</code> returns an (index, item) tuple at each iteration. So, in your code, <code>i</code> is the index and <code>h</code> is the element (dataframe).</p>\n\n<pre><code>for i, h in enumerate(dfs):\n    for col in i[1]:\n        colum = col['var2']\n</code></pre>\n\n<p><code>i[1]</code> will throw a <code>TypeError</code> error. You would need </p>\n\n<pre><code>for i, h in enumerate(dfs):\n    if i == 1:\n        column = h['var2']\n        break\n</code></pre>\n\n<p>If you need only the data frame, you can drop the loop and just use <code>dfs[1]</code>.</p>\n"}], "owner": {"reputation": 2301, "user_id": 6626093, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IQ4b8.jpg?s=128&g=1", "display_name": "i.n.n.m", "link": "https://stackoverflow.com/users/6626093/i-n-n-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 0, "accepted_answer_id": 45470916, "answer_count": 1, "score": 0, "last_activity_date": 1501707964, "creation_date": 1501707323, "last_edit_date": 1501707494, "question_id": 45470840, "link": "https://stackoverflow.com/questions/45470840/access-a-column-of-df-that-is-in-list-in-pandas", "title": "Access a column of DF that is in list in Pandas", "body": "<p>I have a list of DataFrames and I would like to access one or multiple columns of a particular DataFrame.\nList of DataFrames (dfs):</p>\n\n<pre><code>[                   \nvar1       var1  \n14.171250  13.593813\n13.578317  13.595329\n10.301850  13.598456\n9.930217   12.682156\n6.192517   13.561943\n10.89585  13.565149\n6.197983   13.572509,  \n\nvar1       var2    \n2.456183  5.907528\n5.052017  5.955731\n5.960000  5.972480\n8.039317  5.984608\n7.559217  5.985348\n6.933633  5.979438,\n\nvar1       var1  \n14.171250  23.593813\n23.578317  23.595329\n56.301850  23.580139\n90.930217  22.365676\n89.192517  33.561943\n86.23654   53.565149\n90.63659   13.572509,  \n...]\n</code></pre>\n\n<p>Now, I would like to access <code>var2</code> column in my second DataFrame. </p>\n\n<p>I tried the following,</p>\n\n<pre><code>for i, h in enumerate(dfs):\n    for col in i[1]:\n        colum = col['var2']\nprint(colum)\n</code></pre>\n\n<p>Above code does not work. How can I access <code>var2</code> of the second indexed DataFrame? </p>\n"}, {"tags": ["python", "arrays", "numpy", "networkx", "itertools"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1501707253, "post_id": 45470768, "comment_id": 77902656, "body": "As long as the &quot;goal is to preform this function on every pair combinations in an array.&quot; then there <i>is no faster way</i>. Fundamentally, you are forced to use a quadratic algorithm. You aren&#39;t going to get much faster than <code>itertools.combinations</code> in Python..."}, {"owner": {"reputation": 59, "user_id": 7638302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5f6a8e38f446f390cf9b51b9c600d5?s=128&d=identicon&r=PG&f=1", "display_name": "artbn", "link": "https://stackoverflow.com/users/7638302/artbn"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501707432, "post_id": 45470768, "comment_id": 77902729, "body": "I see, I was hoping that there might be a way to vectorize the problem or something along those lines? Possibly some intelligent mathematical approach?"}, {"owner": {"reputation": 345, "user_id": 2249155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4jbea.png?s=128&g=1", "display_name": "neophlegm", "link": "https://stackoverflow.com/users/2249155/neophlegm"}, "edited": false, "score": 1, "creation_date": 1501707644, "post_id": 45470768, "comment_id": 77902845, "body": "Not unless there&#39;s some kind of correlation underpinning the values that you could use to slim down the number of calculations required. Otherwise you&#39;d probably be interested in parallelisation, rather than vectorisation."}, {"owner": {"reputation": 59, "user_id": 7638302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5f6a8e38f446f390cf9b51b9c600d5?s=128&d=identicon&r=PG&f=1", "display_name": "artbn", "link": "https://stackoverflow.com/users/7638302/artbn"}, "reply_to_user": {"reputation": 345, "user_id": 2249155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4jbea.png?s=128&g=1", "display_name": "neophlegm", "link": "https://stackoverflow.com/users/2249155/neophlegm"}, "edited": false, "score": 0, "creation_date": 1501707831, "post_id": 45470768, "comment_id": 77902924, "body": "@neophlegm   Interesting. If I was to take a parallel route, how would I approach it?"}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 2, "creation_date": 1501708037, "post_id": 45470768, "comment_id": 77903041, "body": "@artbn My guess would be to use <code>processes</code>, since for <code>CPU</code> intensive tasks, <code>python</code> threads might not be very useful."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 345, "user_id": 2249155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4jbea.png?s=128&g=1", "display_name": "neophlegm", "link": "https://stackoverflow.com/users/2249155/neophlegm"}, "edited": false, "score": 0, "creation_date": 1501708676, "post_id": 45470768, "comment_id": 77903329, "body": "@neophlegm Vectorization will not change the underlying complexity of your algorithm, it will only shave off (albeit sometimes dramatically in the case of <code>numpy</code> vs vanilla Python) constant factors."}, {"owner": {"reputation": 6354, "user_id": 1562285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be3cbb95b7e672fc8135509aa37b589?s=128&d=identicon&r=PG", "display_name": "Maarten Fabr&#233;", "link": "https://stackoverflow.com/users/1562285/maarten-fabr%c3%a9"}, "edited": false, "score": 1, "creation_date": 1501769825, "post_id": 45470768, "comment_id": 77934604, "body": "what might save some memory is not creating the list, and iterating over the combinations directly  (<code>for x, y in itertools.combinations(array,2): create_edge(x, y, network)</code>)"}, {"owner": {"reputation": 59, "user_id": 7638302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5f6a8e38f446f390cf9b51b9c600d5?s=128&d=identicon&r=PG&f=1", "display_name": "artbn", "link": "https://stackoverflow.com/users/7638302/artbn"}, "reply_to_user": {"reputation": 6354, "user_id": 1562285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be3cbb95b7e672fc8135509aa37b589?s=128&d=identicon&r=PG", "display_name": "Maarten Fabr&#233;", "link": "https://stackoverflow.com/users/1562285/maarten-fabr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1501770029, "post_id": 45470768, "comment_id": 77934791, "body": "@Maarten Fabr&#233;   Didn&#39;t think of that. Thanks will try it out!"}], "owner": {"reputation": 59, "user_id": 7638302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5f6a8e38f446f390cf9b51b9c600d5?s=128&d=identicon&r=PG&f=1", "display_name": "artbn", "link": "https://stackoverflow.com/users/7638302/artbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501769521, "creation_date": 1501707047, "last_edit_date": 1501769521, "question_id": 45470768, "link": "https://stackoverflow.com/questions/45470768/fast-way-to-preform-a-function-on-all-pair-combinations-of-elements-in-an-array", "title": "Fast way to preform a function on all pair combinations of elements in an array", "body": "<p>Here is a simplified version of a function that I have:</p>\n\n<pre><code>def create_edge(a,b,network=G):\n    weight = calculate_weight(matrix[a],matrix[b])\n    network.addedge(array[a],array[b], weight = weight)\n</code></pre>\n\n<p>Basically it takes two matrix row-indices, calculates the weight between the two rows and then adds it as the weight for the edge between two nodes.</p>\n\n<p>My goal is to preform this function on every pair combinations in an array. What I mean by this is that if I have an array as such:</p>\n\n<p><code>array = np.array(['A','B','C','D'])</code></p>\n\n<p>to preform these functions:</p>\n\n<pre><code>create_edge('A','B')\ncreate_edge('A','C')\ncreate_edge('A','D')\ncreate_edge('B','C')\ncreate_edge('B','D')\ncreate_edge('C','D')\n</code></pre>\n\n<p>The catch is my array is large! It contains roughly 15000 elements. This means it is very slow. I'm wondering if there is a quick way to do this?</p>\n\n<hr>\n\n<p>What I have tried so far:</p>\n\n<p>To prevent a <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XYproblem</a>. I probably should note that I don't necessarily need it to be pair combinations as B->A and A->B are the same, I just gathered it would be faster after doing this:</p>\n\n<pre><code>def create_network(network):\n    for i in range(len(array)):\n        for j in range(len(array)):\n            create_edge(i,j,network)\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code>comb = list(itertools.combinations(array,2))\n\ndef create_network(network):\n    for i in range(len(comb)):\n         create_edge(comb[i][0],comb[i][1], network)\n</code></pre>\n\n<p>Either case was too slow. I understand that's likely due to the size of my array but I'm sure there is a faster/more effective/better method to do this.</p>\n"}, {"tags": ["python", "django", "templates", "model"], "answers": [{"tags": [], "owner": {"reputation": 2759, "user_id": 2217516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a535610ddfa849990fc141d4ac5600fe?s=128&d=identicon&r=PG", "display_name": "Robert Townley", "link": "https://stackoverflow.com/users/2217516/robert-townley"}, "is_accepted": false, "score": 0, "last_activity_date": 1501707304, "creation_date": 1501707304, "answer_id": 45470832, "question_id": 45470715, "link": "https://stackoverflow.com/questions/45470715/possible-to-call-other-model-through-foreign-key-in-templates-django/45470832#45470832", "title": "possible to call other model through foreign key in templates? django", "body": "<p>You can use the \"backward relation\" between S and T by doing something like <code>t.s_set.all():</code></p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward</a></p>\n\n<p>This can be accessed from the template as well:</p>\n\n<pre><code>{% for t in t_objs %}\n    {{t.name}}\n    {% for s in t.s_set.all %}\n      {{ s.boo }}\n    {% endfor %}\n    &lt;p&gt;The total count of S for this T is {{ t.s_set|length }}&lt;/p&gt;\n{% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501707304, "creation_date": 1501706812, "question_id": 45470715, "link": "https://stackoverflow.com/questions/45470715/possible-to-call-other-model-through-foreign-key-in-templates-django", "title": "possible to call other model through foreign key in templates? django", "body": "<p>let's say I have two models</p>\n\n<pre><code>class T(models.Model):\n    name = model.Charfield(max_length=12)\n\nclass S(models.Model):\n    tt = model.ForeignKey(T)\n    boo = model.Boolean(default=False)\n</code></pre>\n\n<p>when I use this...<code>t_objs= T.objects.all()</code> then in my template I know I can loop and use</p>\n\n<pre><code>{% for t in t_objs %}\n    {{t.name}}\n</code></pre>\n\n<p>and so on....but what if I want to get how many I can use <code>t_objs</code> to find how many <code>S</code> each <code>t</code> has and also pull out info of <code>S</code></p>\n\n<p>is this possible though?</p>\n"}, {"tags": ["python", "jinja2", "python-3.4", "template-engine"], "answers": [{"comments": [{"owner": {"reputation": 1335, "user_id": 932855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0v5RK.jpg?s=128&g=1", "display_name": "Oisin", "link": "https://stackoverflow.com/users/932855/oisin"}, "edited": false, "score": 1, "creation_date": 1530986089, "post_id": 51176590, "comment_id": 89431555, "body": "This won&#39;t work in a Python3 namespaced package which I&#39;m using so will need to dig into this more."}, {"owner": {"reputation": 1335, "user_id": 932855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0v5RK.jpg?s=128&g=1", "display_name": "Oisin", "link": "https://stackoverflow.com/users/932855/oisin"}, "edited": false, "score": 1, "creation_date": 1530988696, "post_id": 51176590, "comment_id": 89432152, "body": "I went back and RTFM <a href=\"http://jinja.pocoo.org/docs/2.10/api\" rel=\"nofollow noreferrer\">jinja.pocoo.org/docs/2.10/api</a> . With python 3.6.5 on my mac loader=PackageLoader(&#39;my_pkg&#39;, &#39;templates&#39;) worked without import errors inside my namespaced package."}], "tags": [], "owner": {"reputation": 1335, "user_id": 932855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0v5RK.jpg?s=128&g=1", "display_name": "Oisin", "link": "https://stackoverflow.com/users/932855/oisin"}, "is_accepted": false, "score": 1, "last_activity_date": 1530716595, "creation_date": 1530716595, "answer_id": 51176590, "question_id": 45470681, "link": "https://stackoverflow.com/questions/45470681/jinja-packageloader-raises-unregistered-loader-type-on-python-3/51176590#51176590", "title": "Jinja PackageLoader raises &quot;unregistered loader type&quot; on Python 3", "body": "<p>This is a bit of a hack as I hit this myself. I switched to using the Jinja2 FileSystemLoader instead of the PackageLoader on Python 3.</p>\n\n<pre><code>from jinja2 import FileSystemLoader\nfrom my_pkg import templates\n\ntemplates = Environment(\n    loader=FileSystemLoader(templates.__path__[0])\n)\n</code></pre>\n\n<p>This worked for me on Python3. One gotcha/caveat is my_pkg needs the setuptools setup(zip_safe=False, ...). This would decompress the packages and templates from its zipped package so the FileSystemLoader could find them.</p>\n"}], "owner": {"reputation": 174, "user_id": 6784817, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uCrcbvrttis/AAAAAAAAAAI/AAAAAAAAAZ8/l0VVo_p7T9A/photo.jpg?sz=128", "display_name": "Walid Mujahid \u0648\u0644\u064a\u062f \u0645\u062c\u0627\u0647\u062f", "link": "https://stackoverflow.com/users/6784817/walid-mujahid-%d9%88%d9%84%d9%8a%d8%af-%d9%85%d8%ac%d8%a7%d9%87%d8%af"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1530716595, "creation_date": 1501706711, "last_edit_date": 1501904999, "question_id": 45470681, "link": "https://stackoverflow.com/questions/45470681/jinja-packageloader-raises-unregistered-loader-type-on-python-3", "title": "Jinja PackageLoader raises &quot;unregistered loader type&quot; on Python 3", "body": "<p>I was playing with around with the <a href=\"http://jinja.pocoo.org/docs/2.9/api/#basics\" rel=\"nofollow noreferrer\">jinja basics</a>.</p>\n\n<pre><code>from jinja2 import Environment, PackageLoader, select_autoescape\nenv = Environment(\n    loader=PackageLoader('yourapplication', 'templates'),\n    autoescape=select_autoescape(['html', 'xml']\n)\n</code></pre>\n\n<p>Then I do:</p>\n\n<pre><code>template = env.get_template('some_dir_in_templates/mytemplate.html')\n</code></pre>\n\n<p>which works in Python 2 just fine - I believe this is to be expected since I understand that there are bugs when using with python 3 ... something I fear is the case here. </p>\n\n<p>But when I run the later code in Python 3 I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.4/dist-packages/jinja2/environment.py\", line 830, in get_template\n    return self._load_template(name, self.make_globals(globals))\n  File \"/usr/local/lib/python3.4/dist-packages/jinja2/environment.py\", line 804, in _load_template\n    template = self.loader.load(self, name, globals)\n  File \"/usr/local/lib/python3.4/dist-packages/jinja2/loaders.py\", line 113, in load\n    source, filename, uptodate = self.get_source(environment, name)\n  File \"/usr/local/lib/python3.4/dist-packages/jinja2/loaders.py\", line 234, in get_source\n    if not self.provider.has_resource(p):\n  File \"/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py\", line 1455, in has_resource\n    return self._has(self._fn(self.module_path, resource_name))\n  File \"/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py\", line 1505, in _has\n    \"Can't perform this operation for unregistered loader type\"\nNotImplementedError: Can't perform this operation for unregistered loader type\n</code></pre>\n\n<p>Are there any solutions or workarounds in order to fix or make this function in Python 3.4.3?</p>\n\n<p>I am using Jinja 2.9.6</p>\n"}, {"tags": ["python", "h2o", "svmlight"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1501757981, "post_id": 45470674, "comment_id": 77924880, "body": "Can you show your complete code and some sample data?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1501758121, "post_id": 45470674, "comment_id": 77924969, "body": "And maybe try renaming the file to <code>&quot;fname.svmlight&quot;</code>."}, {"owner": {"reputation": 347, "user_id": 2912888, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9aece97ee3cd8be2a507cad176de17bc?s=128&d=identicon&r=PG&f=1", "display_name": "user90772", "link": "https://stackoverflow.com/users/2912888/user90772"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1501765294, "post_id": 45470674, "comment_id": 77930503, "body": "The example data are as shown, importing the file takes ages, but when I convert these in small indexes it seems to work ok."}, {"owner": {"reputation": 347, "user_id": 2912888, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9aece97ee3cd8be2a507cad176de17bc?s=128&d=identicon&r=PG&f=1", "display_name": "user90772", "link": "https://stackoverflow.com/users/2912888/user90772"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1502185816, "post_id": 45470674, "comment_id": 78088750, "body": "Is this something that is planned to be fixed?"}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 2912888, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9aece97ee3cd8be2a507cad176de17bc?s=128&d=identicon&r=PG&f=1", "display_name": "user90772", "link": "https://stackoverflow.com/users/2912888/user90772"}, "edited": false, "score": 0, "creation_date": 1502383340, "post_id": 45610449, "comment_id": 78197824, "body": "Thank you for reporting it. I think this is the point of sparse arrays, to save memory by using only index:value combinations. This is a valid svmlight format, you can try to parse it on scikit-learn for example. It should not matter if the index is 1, 100 or 1,000,000.Thanks for the prompt reply again!"}], "tags": [], "owner": {"reputation": 24189, "user_id": 841830, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/thtU5.jpg?s=128&g=1", "display_name": "Darren Cook", "link": "https://stackoverflow.com/users/841830/darren-cook"}, "is_accepted": false, "score": 0, "last_activity_date": 1502359079, "creation_date": 1502359079, "answer_id": 45610449, "question_id": 45470674, "link": "https://stackoverflow.com/questions/45470674/python-h2o-svmlight-data/45610449#45610449", "title": "Python h2o svmlight data", "body": "<p>Your three lines of svmlight is like a virus! According to <code>top</code> the java process is as close to 800% CPU (8-core machine) as it can get. After 45m of cpu effort (5-6 mins wall clock) I had to use <code>kill -9</code> on it to get my machine back.</p>\n\n<p>Even if your type of file is not officially supported, I think the fact that it brings down a machine makes it a serious bug, so I've reported it here: <a href=\"https://0xdata.atlassian.net/browse/PUBDEV-4798\" rel=\"nofollow noreferrer\">https://0xdata.atlassian.net/browse/PUBDEV-4798</a></p>\n\n<p>BTW, you can find a unit test showing use of smvlight here:\n<a href=\"https://github.com/h2oai/h2o-3/blob/30f382efac687be3959a253d975cb48c341c92b4/h2o-r/tests/testdir_misc/runit_parser_type.R\" rel=\"nofollow noreferrer\">https://github.com/h2oai/h2o-3/blob/30f382efac687be3959a253d975cb48c341c92b4/h2o-r/tests/testdir_misc/runit_parser_type.R</a></p>\n"}], "owner": {"reputation": 347, "user_id": 2912888, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9aece97ee3cd8be2a507cad176de17bc?s=128&d=identicon&r=PG&f=1", "display_name": "user90772", "link": "https://stackoverflow.com/users/2912888/user90772"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502359079, "creation_date": 1501706679, "last_edit_date": 1501764844, "question_id": 45470674, "link": "https://stackoverflow.com/questions/45470674/python-h2o-svmlight-data", "title": "Python h2o svmlight data", "body": "<p>I have an svmlight-formatted file with values of the form:</p>\n\n<p><code>92.91 18256731:1 71729421:1 72329637:1 83328561:1 118265976:1 134892759:1 198163358:1 352348616:1 526943048:1\n5.30 102156934:1 134892759:1 198163358:1 254112843:1 262373758:1 512748316:1 526943048:1\n22.00 32172600:1 72329637:1 118265976:1 134892759:1 198163358:1 411824213:1 443226486:1 445371412:1 526943048:1</code></p>\n\n<p>I am trying to import this in h2o using <code>h2o.import_file(fname.svmlight)</code></p>\n\n<p>Does h2o support high dimensional sparse binary features?</p>\n\n<p>Do I need to convert the hashed values in some indexes for this to work?</p>\n"}, {"tags": ["python", "ocr", "tesseract", "pillow"], "comments": [{"owner": {"reputation": 1271, "user_id": 4465743, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-Dqf3p5-NRus/AAAAAAAAAAI/AAAAAAAAAJQ/3vdHWzXKiqI/photo.jpg?sz=128", "display_name": "Rajan Chauhan", "link": "https://stackoverflow.com/users/4465743/rajan-chauhan"}, "edited": false, "score": 0, "creation_date": 1501706809, "post_id": 45470667, "comment_id": 77902411, "body": "The file is not acessible. Keep the news.jpg in the same folder in which your script resides."}, {"owner": {"reputation": 545, "user_id": 4087009, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/daea0aa6bc8ac56265a6e4744bdb8fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Lynch", "link": "https://stackoverflow.com/users/4087009/ed-lynch"}, "reply_to_user": {"reputation": 1271, "user_id": 4465743, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-Dqf3p5-NRus/AAAAAAAAAAI/AAAAAAAAAJQ/3vdHWzXKiqI/photo.jpg?sz=128", "display_name": "Rajan Chauhan", "link": "https://stackoverflow.com/users/4465743/rajan-chauhan"}, "edited": false, "score": 0, "creation_date": 1501706940, "post_id": 45470667, "comment_id": 77902474, "body": "It is in the same file."}, {"owner": {"reputation": 1271, "user_id": 4465743, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-Dqf3p5-NRus/AAAAAAAAAAI/AAAAAAAAAJQ/3vdHWzXKiqI/photo.jpg?sz=128", "display_name": "Rajan Chauhan", "link": "https://stackoverflow.com/users/4465743/rajan-chauhan"}, "edited": false, "score": 0, "creation_date": 1501706943, "post_id": 45470667, "comment_id": 77902479, "body": "Please provide the location of your news.jpg in your question including full path of it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501707032, "post_id": 45470667, "comment_id": 77902528, "body": "it&#39;s not a problem of .jpg."}, {"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1501707067, "post_id": 45470667, "comment_id": 77902554, "body": "How are you running Python? From the command prompt? Or some IDE?"}, {"owner": {"reputation": 545, "user_id": 4087009, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/daea0aa6bc8ac56265a6e4744bdb8fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Lynch", "link": "https://stackoverflow.com/users/4087009/ed-lynch"}, "edited": false, "score": 0, "creation_date": 1501707126, "post_id": 45470667, "comment_id": 77902579, "body": "The path is <code>C:\\Users\\test\\Documents\\Projects\\TesseractTest</code> but so is the script&#39;s."}, {"owner": {"reputation": 545, "user_id": 4087009, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/daea0aa6bc8ac56265a6e4744bdb8fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Lynch", "link": "https://stackoverflow.com/users/4087009/ed-lynch"}, "edited": false, "score": 0, "creation_date": 1501707199, "post_id": 45470667, "comment_id": 77902625, "body": "Running from command prompt."}], "owner": {"reputation": 545, "user_id": 4087009, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/daea0aa6bc8ac56265a6e4744bdb8fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Lynch", "link": "https://stackoverflow.com/users/4087009/ed-lynch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1501707064, "answer_count": 0, "score": 0, "last_activity_date": 1501706644, "creation_date": 1501706644, "question_id": 45470667, "link": "https://stackoverflow.com/questions/45470667/simple-tesseract-script-throwing-error", "closed_reason": "Duplicate", "title": "Simple tesseract script throwing error", "body": "<pre><code>from PIL import Image\nimport pytesseract\nim = Image.open(\"news.jpg\")\n\ntext = pytesseract.image_to_string(im, lang='eng')\n\nprint(text)\n</code></pre>\n\n<p>So the code above throws this error:</p>\n\n<pre><code>Traceback (most recent call last):                                                              \n  File \"C:\\Users\\test\\Documents\\Projects\\TesseractTest\\main.py\", line 6, in &lt;module&gt;            \n    text = pytesseract.image_to_string(im, lang='eng')                                          \n  File \"C:\\Python27\\lib\\site-packages\\pytesseract\\pytesseract.py\", line 122, in image_to_string \n    config=config)                                                                              \n  File \"C:\\Python27\\lib\\site-packages\\pytesseract\\pytesseract.py\", line 46, in run_tesseract    \n    proc = subprocess.Popen(command, stderr=subprocess.PIPE)                                    \n  File \"C:\\Python27\\lib\\subprocess.py\", line 711, in __init__                                   \n    errread, errwrite)                                                                          \n  File \"C:\\Python27\\lib\\subprocess.py\", line 959, in _execute_child                             \n    startupinfo)                                                                                \nWindowsError: [Error 2] The system cannot find the file specified   \n</code></pre>\n\n<p>The news.jpg is present and I'm running this on windows 10.</p>\n\n<p>Thanks, Ed.                            </p>\n"}, {"tags": ["python", "sql", "python-3.x", "sqlite"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1501707030, "post_id": 45470647, "comment_id": 77902527, "body": "An aside, I think your previous question (and its answer) has sent you down a bit of a wrong path here. You&#39;re hard-coding only the <code>james</code> entry so if you get your syntax to work, it won&#39;t stop you having duplicates of the other entries. Beyond your 3 test entries, this approach will become untenable."}], "answers": [{"tags": [], "owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "is_accepted": false, "score": 0, "last_activity_date": 1501707402, "creation_date": 1501707402, "answer_id": 45470856, "question_id": 45470647, "link": "https://stackoverflow.com/questions/45470647/sqlite3-operationalerror-trying-to-stop-duplication-of-results/45470856#45470856", "title": "sqlite3.OperationalError - Trying to stop duplication of results", "body": "<p>sqlite does not support <code>where</code> clauses on insert statements. I believe what you want to do will be to add a <code>unique</code> constraint to the table and use <code>insert or ignore</code>.</p>\n\n<pre><code>c.execute('CREATE TABLE IF NOT EXISTS myTestTable(name TEXT, age REAL, address TEXT, UNIQUE(name, age, address))') \n\nc.execute(\"INSERT OR IGNORE INTO myTestTable VALUES('James', 45, 'Home')\")\n</code></pre>\n\n<p>See below for details:</p>\n\n<ul>\n<li><p><a href=\"https://sqlite.org/lang_createtable.html\" rel=\"nofollow noreferrer\">https://sqlite.org/lang_createtable.html</a></p></li>\n<li><p><a href=\"https://sqlite.org/lang_insert.html\" rel=\"nofollow noreferrer\">https://sqlite.org/lang_insert.html</a></p></li>\n</ul>\n\n<p>This will also be a scalable solution, avoiding the problem @raganjosh points out. However, you will likely want to handle the duplication in way that notifies users.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8371286"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501707402, "creation_date": 1501706556, "question_id": 45470647, "link": "https://stackoverflow.com/questions/45470647/sqlite3-operationalerror-trying-to-stop-duplication-of-results", "title": "sqlite3.OperationalError - Trying to stop duplication of results", "body": "<p>I want this code to create one table and only print one list each time rather than printing multiple (the results from when it was run before). How what I fix this code so the WHERE NOT EXISTS code actually works.</p>\n\n<p>The errors I have are:</p>\n\n<pre><code>Traceback (most recent call last):\nline 33, in &lt;module&gt;\ndata_entry()\nline 14, in data_entry\nc.execute(\"INSERT INTO myTestTable VALUES('James', 45, 'Home') WHERE NOT EXISTS (SELECT 1 FROM myTestTable WHERE name ='james' AND age =45 AND address ='school')\") \nsqlite3.OperationalError: near \"WHERE\": syntax error \n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>import sqlite3 \n\nconn = sqlite3.connect('dbtest.db') \n\nc = conn.cursor() \n\nparam = \"School\" \n\n\ndef create_table():\n    c.execute('CREATE TABLE IF NOT EXISTS myTestTable(name TEXT, age REAL, address TEXT)') \n\ndef data_entry():\n    c.execute(\"INSERT INTO myTestTable VALUES('James', 45, 'Home') WHERE NOT EXISTS (SELECT 1 FROM myTestTable WHERE name ='james' AND age =45 AND address ='school')\")\n    c.execute(\"INSERT INTO myTestTable VALUES('Jeff', 16, 'School') WHERE NOT EXISTS (SELECT 1 FROM myTestTable WHERE name ='james' AND age =45 AND address ='school')\")\n    c.execute(\"INSERT INTO myTestTable VALUES('Bob', 14, 'School') WHERE NOT EXISTS (SELECT 1 FROM myTestTable WHERE name ='james' AND age =45 AND address ='school')\")\n    c.execute(\"INSERT INTO myTestTable VALUES('Jack', 15, 'School') WHERE NOT EXISTS (SELECT 1 FROM myTestTable WHERE name ='james' AND age =45 AND address ='school')\")\n    conn.commit()\n\ndef query1():\n    c.execute(\"SELECT * FROM myTestTable WHERE address = ?\",(param,)) \n    while True:\n        row=c.fetchone()\n        if row == None:\n            break\n        print(row)\n\n    c.close()\n    conn.close()\n\ncreate_table()\n\ndata_entry()\n\nquery1()\n</code></pre>\n"}, {"tags": ["python", "dictionary", "counter"], "comments": [{"owner": {"reputation": 1213, "user_id": 8134032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b185eace7b99bb80d233c6d9d8fc308?s=128&d=identicon&r=PG&f=1", "display_name": "jacoblaw", "link": "https://stackoverflow.com/users/8134032/jacoblaw"}, "edited": false, "score": 0, "creation_date": 1501706465, "post_id": 45470581, "comment_id": 77902238, "body": "are all the values equal to 1?"}, {"owner": {"reputation": 346, "user_id": 5339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e914752731143a7de3f3e7738206be?s=128&d=identicon&r=PG&f=1", "display_name": "lpiner", "link": "https://stackoverflow.com/users/5339255/lpiner"}, "edited": false, "score": 0, "creation_date": 1501706518, "post_id": 45470581, "comment_id": 77902267, "body": "Maybe you mean <code>ipos[taux] += 1</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1508, "user_id": 6405985, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/78736a4802ae6a766a28829994cd7fff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Wang", "link": "https://stackoverflow.com/users/6405985/peter-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1501706524, "creation_date": 1501706524, "answer_id": 45470640, "question_id": 45470581, "link": "https://stackoverflow.com/questions/45470581/increment-dictionary-in-a-loop/45470640#45470640", "title": "Increment dictionary in a loop:", "body": "<p>You want to use a defaultdict:</p>\n\n<pre><code>tipos = defaultdict(int)\np= re.compile ('bridge kernel:.*:')\nwith open (sys.argv[1], 'r') as f:\n    for line in f:\n        match = p.search(line)\n        if match:\n            taux=(line.split(\":\") [3])\n            tipos[taux] += 1\nprint (tipos)\n</code></pre>\n\n<p>You have it imported there but you didn't use it</p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501707339, "post_id": 45470653, "comment_id": 77902689, "body": "<code>collections.Counter</code> is even better to count elements."}, {"owner": {"reputation": 3187, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1502130134, "post_id": 45470653, "comment_id": 78066598, "body": "@Jean-Fran&#231;oisFabre Thanks - good pointer. I updated the answer."}], "tags": [], "owner": {"reputation": 3187, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "is_accepted": true, "score": 1, "last_activity_date": 1502130085, "last_edit_date": 1502130085, "creation_date": 1501706575, "answer_id": 45470653, "question_id": 45470581, "link": "https://stackoverflow.com/questions/45470581/increment-dictionary-in-a-loop/45470653#45470653", "title": "Increment dictionary in a loop:", "body": "<p>As for the version of your code, you never increase the number of counts of taux in tipos, so they should all be one. And yes, defaultdicts will help, since they automatically instantiate missing dictionary entries with the type you pass in. The general defaultdict counting pattern is as follows:</p>\n\n<pre><code>a = defaultdict(int)\na['asdf'] += 1\n# a['asdf'] will now be 1, since it updates from 0\n</code></pre>\n\n<p>EDIT: Including @Jean-Fran\u00e7oisFabre comment, I want to point out that the <code>collections</code> module comes with an object specifically designed to count anything hashable - Counter. From the looks of things, it relies on much of the same backend, so performance should be similar, but it comes with some nice little extras (like the <code>most_common(number_of_most_common_elements)</code> method. This can be used like a defaultdict, but without the dedicated <code>(int)</code> argument:</p>\n\n<pre><code>a = Counter()\na['asdf'] += 1\n# a['asdf'] will now be 1, since it updates from 0\n</code></pre>\n\n<p>In general, each argument passed will correspond to a default value. That means that you could do the following as well:</p>\n\n<pre><code>a = defaultdict(int)\nprint(a['asdf'])  # will print 0\na = defaultdict(float)\nprint(a['asdf'])  # will print 0.0\na = defaultdict(list)\nprint(a['asdf'])  # will print [], and is particularly useful if you want a dict of lists, since you don't need to check whether your key already exists in the dict\n</code></pre>\n\n<p>as for your code, this means that you want:</p>\n\n<pre><code>tipos=defaultdict(int)\np= re.compile ('bridge kernel:.*:')\nwith open (sys.argv[1], 'r') as f:\n    for line in f:\n        match = p.search(line)\n        if match:\n            taux=(line.split(\":\") [3])\n            tipos[taux]+=1\nprint (tipos)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8373007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f9a61dec568da6e5831bcf76a333cf?s=128&d=identicon&r=PG&f=1", "display_name": "inu86", "link": "https://stackoverflow.com/users/8373007/inu86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 45470653, "answer_count": 2, "score": 0, "last_activity_date": 1502130085, "creation_date": 1501706294, "last_edit_date": 1501706317, "question_id": 45470581, "link": "https://stackoverflow.com/questions/45470581/increment-dictionary-in-a-loop", "title": "Increment dictionary in a loop:", "body": "<p>I need to count how many times a given number os text patterns appears in a log file and store this in a dictionary.</p>\n\n<p>My problem is that my code is counting all entries of the file to every kind of text pattern.</p>\n\n<p>The log file looks like this:</p>\n\n<p>What i doing wrong?</p>\n\n<pre><code>&gt;Feb  1 00:00:02 bridge kernel: INBOUND TCP: IN=br0 PHYSIN=eth0 OUT=br0 &gt;PHYSOUT=eth1 SRC=XXX.XXX.XXX.XXX DST=XXX.XXX.XXX.XXX LEN=40 TOS=0x00 &gt;PREC=0x00 TTL=110 ID=12973 PROTO=TCP SPT=220 DPT=6129 WINDOW=16384 RES=0x00 &gt;SYN URGP=0  \n&gt;Feb  1 00:00:02 bridge kernel: INBOUND TCP: IN=br0 PHYSIN=eth0 OUT=br0 &gt;PHYSOUT=eth1 SRC=XXX.XXX.XXX.XXX DST=XXX.XXX.XXX.XXX LEN=40 TOS=0x00 &gt;PREC=0x00 TTL=113 ID=27095 PROTO=TCP SPT=220 DPT=6129 WINDOW=16384 RES=0x00 &gt;SYN URGP=0\n</code></pre>\n\n<p>My code is this at the moment:</p>\n\n<pre><code>#!//usr/bin/python3\n\nimport sys\nimport os\nimport re\nfrom collections import defaultdict\n\n    tipos={}\n    p= re.compile ('bridge kernel:.*:')\n    with open (sys.argv[1], 'r') as f:\n        for line in f:\n            match = p.search(line)\n            if match:\n                taux=(line.split(\":\") [3])\n                tipos[taux]=1\n    print (tipos)\n</code></pre>\n\n<p>The code doesn't give an error, but all key have the save value.</p>\n\n<p>I've read about <code>defaultdict</code> and <code>Counters</code> but couldn't make them work.</p>\n\n<p>Help me, please.</p>\n"}, {"tags": ["python", "oracle", "csv", "oracle11g"], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 7631188, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/56e8ad901ffbc1bba7095bb7d76069d0?s=128&d=identicon&r=PG&f=1", "display_name": "PriyalChaudhari", "link": "https://stackoverflow.com/users/7631188/priyalchaudhari"}, "edited": false, "score": 0, "creation_date": 1501708809, "post_id": 45470619, "comment_id": 77903410, "body": "I didnt the part where you said for loop is not needed. ? How to do that exactly"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 277, "user_id": 7631188, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/56e8ad901ffbc1bba7095bb7d76069d0?s=128&d=identicon&r=PG&f=1", "display_name": "PriyalChaudhari", "link": "https://stackoverflow.com/users/7631188/priyalchaudhari"}, "edited": false, "score": 0, "creation_date": 1501708866, "post_id": 45470619, "comment_id": 77903450, "body": "<code>list(lines)</code> just creates the list of lines, like if you did a loop + append. But faster and shorter. I rewrote my version of your <code>Create_list</code>"}, {"owner": {"reputation": 277, "user_id": 7631188, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/56e8ad901ffbc1bba7095bb7d76069d0?s=128&d=identicon&r=PG&f=1", "display_name": "PriyalChaudhari", "link": "https://stackoverflow.com/users/7631188/priyalchaudhari"}, "edited": false, "score": 0, "creation_date": 1501771996, "post_id": 45470619, "comment_id": 77936582, "body": "Thanks the problem solved. I was reading my headers as well hence data was not inserted in to csv"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1501706431, "creation_date": 1501706431, "answer_id": 45470619, "question_id": 45470545, "link": "https://stackoverflow.com/questions/45470545/while-inserting-data-to-oracle-from-csv-file-using-python-getting-error-ora-0172/45470619#45470619", "title": "while inserting data to oracle from csv file using python getting error ORA-01722: invalid number", "body": "<p>You have a title line in your csv file, which is not part of the numerical data. You have to skip it using <code>next(reader)</code> just after mapping the <code>csv.reader</code> on the file handle.</p>\n\n<p>Aside: use a context manager to ensure the file will be closed, and, no need for a loop, just convert the row iterator to a list (when the first line has been skipped) to read all the lines (will be faster)</p>\n\n<pre><code>def Create_list():\n    with open(\"Query_result_combined.csv\",\"r\") as f:\n       reader = csv.reader(f)\n       next(reader)  # skips title line\n       return list(lines)  # directly iterate on the rest of the lines\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 7631188, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/56e8ad901ffbc1bba7095bb7d76069d0?s=128&d=identicon&r=PG&f=1", "display_name": "PriyalChaudhari", "link": "https://stackoverflow.com/users/7631188/priyalchaudhari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 45470619, "answer_count": 1, "score": 0, "last_activity_date": 1501706431, "creation_date": 1501706184, "question_id": 45470545, "link": "https://stackoverflow.com/questions/45470545/while-inserting-data-to-oracle-from-csv-file-using-python-getting-error-ora-0172", "title": "while inserting data to oracle from csv file using python getting error ORA-01722: invalid number", "body": "<p>I am trying to load data to oracle table. <a href=\"https://stackoverflow.com/questions/45447835/loading-csv-file-contents-to-oracle-using-cx-oracle-and-getting-select-keyword-e\">here</a> is my previous question where i have posted whole code how I am doing that . </p>\n\n<p>this is the code:</p>\n\n<pre><code>def Create_list():\nreader = csv.reader(open(\"Query_result_combined.csv\",\"r\"))\nlines=[]\nprint(\"Creating a list\")\nfor line in reader:\n    lines.append(line)\nreturn lines\n\n\ndef Insert_data():\n#connection logic goes here \nprint(\"Connecting Now!!\")\n#conn = cx_Oracle.connect(connstr)\ncon = cx_Oracle.connect(db_user,db_password,db_connection_name)\nprint(\"Connected to Oracle!!\")\nlines=Create_list()\ncur=con.cursor()\nprint(\"Inserting data\")\nfor line in lines:\n    cur.execute(\"INSERT INTO A608232_QUERY_RESULT (InteractionId,QueryId,Score,StartOffsetInMs,EndOffsetInMs,SpeakerRole,QueryIdentity,SpeakerId) VALUES(:1,:2,:3,:4,:5,:6,:7,:8)\",line)\ncon.commit ()\ncur.close()\nprint(\"completed\")\n</code></pre>\n\n<p>So i rectified all aproches suggested in answer to my question so that error has been solved now i am getting this new error <code>ORA-01722: invalid number</code>.</p>\n\n<p>when i loaded the data directly in to oracle using import option that data is getting loaded. When i am trying to read the same file in this code and trying to push the data i am getting this error. </p>\n\n<p>I print lines[:1] and lines[:2] this is the output I get:</p>\n\n<pre><code>[['InteractionId', 'QueryId', 'Score', 'StartOffsetInMs', 'EndOffsetInMs', \n'SpeakerRole', 'QueryIdentity', 'SpeakerId']]\n[['InteractionId', 'QueryId', 'Score', 'StartOffsetInMs', 'EndOffsetInMs', \n'SpeakerRole', 'QueryIdentity', 'SpeakerId'], ['34118470', '27', '45.63345', \n'89900', '90980', 'U', 'e54fd492-8877-4534-997b-9dbe9a8fbd74', '']]\n Inserting data\n</code></pre>\n\n<p>can someone please point out the mistake that i am doing in the code</p>\n"}, {"tags": ["python", "datetime", "datetime-format", "tweepy"], "answers": [{"tags": [], "owner": {"reputation": 1648, "user_id": 8360167, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b2nsDFjjgeY/AAAAAAAAAAI/AAAAAAAAFYk/A_O1NkoyPpE/photo.jpg?sz=128", "display_name": "elf", "link": "https://stackoverflow.com/users/8360167/elf"}, "is_accepted": false, "score": 1, "last_activity_date": 1501707486, "creation_date": 1501707486, "answer_id": 45470876, "question_id": 45470538, "link": "https://stackoverflow.com/questions/45470538/python-tweepy-how-to-compare-and-change-times/45470876#45470876", "title": "Python &amp; Tweepy - How to compare and change times.", "body": "<p>I think you need to convert the twitter date to a timestamp:</p>\n\n<pre><code>import time\n\nts = time.strftime('%Y-%m-%d %H:%M:%S', time.strptime(tweet['created_at'],'%a %b %d %H:%M:%S +0000 %Y'))\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 1302551, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a424f12a746bc7afd940cadad187370?s=128&d=identicon&r=PG", "display_name": "WolVes", "link": "https://stackoverflow.com/users/1302551/wolves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501707486, "creation_date": 1501706166, "question_id": 45470538, "link": "https://stackoverflow.com/questions/45470538/python-tweepy-how-to-compare-and-change-times", "title": "Python &amp; Tweepy - How to compare and change times.", "body": "<p>I am trying to create a number of constraints for some other code based on twitter handle sets.</p>\n\n<p>I am having issues with the following code because:</p>\n\n<pre><code>TypeError: can't compare datetime.datetime to str\n</code></pre>\n\n<p>It seems that even though I have changed Last_Post to a datetime object initially, when i compare it to datetime.datetime.today() it is converting to string. Yes, I have checked the to ensure that Last_post is converting properly. Im not really sure what is going on. Help?</p>\n\n<pre><code>for handle in handles:\n    try:\n        user = api.get_user(handle)\n        #print json.dumps(user, indent = 4)\n        verified = user[\"verified\"]\n        name = user['name']\n        language = user['lang']\n        follower_count = user['followers_count']\n        try:\n            last_post = user['status']['created_at']\n            last_post = datetime.strptime(last_post, '%a %b %d %H:%M:%S +0000 %Y')\n        except: \n            last_post = \"User has not posted ever\"\n        location = user['location']\n\n        location_ch = location_check(location)\n\n        if location_ch is not \"United States\":\n            location_output.append(False)\n        else:\n            location_output.append(True)\n\n        new_sum.append(follower_count)\n\n        if language is not \"en\":\n            lang_output.append(False)\n        else:\n            lang_output.append(True)\n\n        if datetime.datetime.today() - datetime.timedelta(days=30) &gt; last_post:\n            recency.append(False)\n        else:\n            recency.append(True)\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1501711998, "post_id": 45470495, "comment_id": 77904689, "body": "<code>argmin</code> may help"}], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 6848466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6084f710614f73f37b94f6fb5bb42711?s=128&d=identicon&r=PG&f=1", "display_name": "Professor_Joykill", "link": "https://stackoverflow.com/users/6848466/professor-joykill"}, "is_accepted": false, "score": 0, "last_activity_date": 1501706466, "creation_date": 1501706466, "answer_id": 45470630, "question_id": 45470495, "link": "https://stackoverflow.com/questions/45470495/finding-minimum-value-across-multiple-python-lists-and-printing-which-list-it-ca/45470630#45470630", "title": "Finding minimum value across multiple python lists and printing which list it came from", "body": "<p>Unless you need to use numpy you could just use the built-in <code>min(list)</code> function:</p>\n\n<pre><code>john = [5, 7, 6, 4, 7, 5, 4, 4, 4]\ndylan = [4, 4, 3, 5, 5, 4, 5, 4, 5]\nnate = [5, 4, 7, 4, 5, 4, 5, 4, 4]\ncurt = [4, 6, 8, 4, 6, 3, 5, 4, 4]\npeople = [john, dylan, nate, curt]\n\nmin = 1000\nfor i in people:\n    if min(i) &lt; min:\n        min = min(i)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5278890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf8d40af6e2fdd81185d6887cbadaff?s=128&d=identicon&r=PG", "display_name": "paras360", "link": "https://stackoverflow.com/users/5278890/paras360"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501706466, "creation_date": 1501706012, "question_id": 45470495, "link": "https://stackoverflow.com/questions/45470495/finding-minimum-value-across-multiple-python-lists-and-printing-which-list-it-ca", "title": "Finding minimum value across multiple python lists and printing which list it came from", "body": "<p>I have multiple lists and I'd like to perform three operations to them. The first, is to find the lowest value, element wise, through each list. </p>\n\n<p>Then I'd like to print out the respective list that houses that element </p>\n\n<p>Then I'd like to perform basic mathematical operations to the counts</p>\n\n<pre><code>john = [5, 7, 6, 4, 7, 5, 4, 4, 4]\ndylan = [4, 4, 3, 5, 5, 4, 5, 4, 5]\nnate = [5, 4, 7, 4, 5, 4, 5, 4, 4]\ncurt = [4, 6, 8, 4, 6, 3, 5, 4, 4]\n\nstacked_arrays = np.dstack((john, dylan, nate, curt))\nmin_of_stack = stacked_arrays.min(2)\nprint min_of_stack\n\n[[4 4 3 4 5 3 4 4 4]]\n</code></pre>\n\n<p>So I am at the point where I know which is the value that is the min amongst the 4 lists, but I don't know how to figure out which min is the least. In the event that there are multiple lists where the least value is housed, then I'd like to not print anything. </p>\n\n<p>Any ideas or thoughts to a better way to approach this? Thanks</p>\n"}, {"tags": ["python", "selenium", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "reply_to_user": {"reputation": 21, "user_id": 5257734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e7d9d35fbdf74708d54e9371fab174?s=128&d=identicon&r=PG&f=1", "display_name": "ads", "link": "https://stackoverflow.com/users/5257734/ads"}, "edited": false, "score": 0, "creation_date": 1501707988, "post_id": 45470764, "comment_id": 77903016, "body": "@ads always glad to help, if the answer is correct please remember to select it ;)"}, {"owner": {"reputation": 21, "user_id": 5257734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e7d9d35fbdf74708d54e9371fab174?s=128&d=identicon&r=PG&f=1", "display_name": "ads", "link": "https://stackoverflow.com/users/5257734/ads"}, "edited": false, "score": 0, "creation_date": 1501708390, "post_id": 45470764, "comment_id": 77903198, "body": "I tried upvoting the answer. But it is saying&quot; Thanks for the feedback! Votes cast by those with less than 15 reputation are recorded, but do not change the publicly displayed post score&quot;"}, {"owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "reply_to_user": {"reputation": 21, "user_id": 5257734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e7d9d35fbdf74708d54e9371fab174?s=128&d=identicon&r=PG&f=1", "display_name": "ads", "link": "https://stackoverflow.com/users/5257734/ads"}, "edited": false, "score": 0, "creation_date": 1501714284, "post_id": 45470764, "comment_id": 77905450, "body": "@ads <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work/#answer-5235\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>. Yeah you will have this 15 Points fast, you could try to answer some easy questions, next time when someone has a problem like this copy the code and try to make it work and post it ;-)"}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "reply_to_user": {"reputation": 21, "user_id": 5257734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e7d9d35fbdf74708d54e9371fab174?s=128&d=identicon&r=PG&f=1", "display_name": "ads", "link": "https://stackoverflow.com/users/5257734/ads"}, "edited": false, "score": 0, "creation_date": 1501729052, "post_id": 45470764, "comment_id": 77908747, "body": "@ads you should still be able to mark the question as best answer by clicking the hollow check mark under the down vote"}], "tags": [], "owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "is_accepted": true, "score": 0, "last_activity_date": 1501707368, "last_edit_date": 1501707368, "creation_date": 1501707043, "answer_id": 45470764, "question_id": 45470490, "link": "https://stackoverflow.com/questions/45470490/web-scraping-of-website-in-python/45470764#45470764", "title": "web scraping of website in python", "body": "<p>You have to wait a second or two when you click the input field. Like:</p>\n\n<pre><code>from selenium import webdriver\nchrome_path = r\"C:\\Users\\vick\\Desktop\\python_1\\chromedriver.exe\"\ndriver = webdriver.Chrome(chrome_path)\ndriver.get(\"https://www.theice.com/marketdata/reports/180\")\ntry: \n   driver.find_element_by_xpath('/html/body/div[3]/div/div[2]/div/div/div[2]/button').click()\nexcept:\n      pass\n\ndriver.find_element_by_xpath('//*[@id=\"seriesNameAndRunCode_chosen\"]/a/span').click()\ndriver.find_element_by_xpath('//*[@id=\"seriesNameAndRunCode_chosen\"]/div/ul/li[5]').click()\ndriver.find_element_by_xpath('//*[@id=\"reportDate\"]').clear()\ndriver.find_element_by_xpath('//*[@id=\"reportDate\"]').send_keys(\"27-Jul-2017\") \ndriver.find_element_by_xpath('//*[@id=\"selectForm\"]/input').click()\ndriver.execute_script(\"window.scrollTo(0, document.body.scrollHeight)/2;\")\ntime.sleep(2) #here is the part where you should wait. \nprint(driver.find_element_by_xpath('//*[@id=\"report-content\"]/div/div/table/tbody/tr[10]/td[2]').get_attribute('innerHTML'))\n</code></pre>\n\n<p>Option B is to wait until the element has been loaded:</p>\n\n<pre><code>from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.common.exceptions import TimeoutException\n\n....\ndriver.execute_script(\"window.scrollTo(0,document.body.scrollHeight)/2;\")\ntimeout = 5\ntry:\n    element_present = EC.presence_of_element_located((By.ID, 'report-content'))\n    WebDriverWait(driver, timeout).until(element_present)\nexcept TimeoutException:\n    print \"Timed out waiting for page to load\"\n......\nprint(driver.find_element_by_xpath('//*[@id=\"report-content\"]/div/div/table/tbody/tr[10]/td[2]').get_attribute('innerHTML'))\n</code></pre>\n\n<p>In the first case Python waits 2 seconds and than continues. \nIn the second case the Webdriver waits until the element is loaded (for maximal 5 seconds)</p>\n\n<p>Tried the code and it works. Hope that helped. </p>\n"}], "owner": {"reputation": 21, "user_id": 5257734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e7d9d35fbdf74708d54e9371fab174?s=128&d=identicon&r=PG&f=1", "display_name": "ads", "link": "https://stackoverflow.com/users/5257734/ads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 45470764, "answer_count": 1, "score": 0, "last_activity_date": 1501707368, "creation_date": 1501706000, "last_edit_date": 1501706573, "question_id": 45470490, "link": "https://stackoverflow.com/questions/45470490/web-scraping-of-website-in-python", "title": "web scraping of website in python", "body": "<p>On the below mentioned website, When I select date as 27 jun-2017 and Series/Run rates as \"USD RATES 1100\". After submitting it, rates opens below on that page. Till this point I am able to do it programitically. But I need 10 year rate(answer is 2.17) of above mentioned date and rate combination. Can some one please tell me what error I am making in the last line of the code.</p>\n\n<p><a href=\"https://www.theice.com/marketdata/reports/180\" rel=\"nofollow noreferrer\">https://www.theice.com/marketdata/reports/180</a></p>\n\n<pre><code>from selenium import webdriver\nchrome_path = r\"C:\\Users\\vick\\Desktop\\python_1\\chromedriver.exe\"\ndriver = webdriver.Chrome(chrome_path)\ndriver.get(\"https://www.theice.com/marketdata/reports/180\")\ntry: \n   driver.find_element_by_xpath('/html/body/div[3]/div/div[2]/div/div/\n   div[2]/button').click()\nexcept:\n      pass\n\ndriver.find_element_by_xpath('//*\n[@id=\"seriesNameAndRunCode_chosen\"]/a/span').click()\ndriver.find_element_by_xpath('//*\n[@id=\"seriesNameAndRunCode_chosen\"]/div/ul/li[5]').click()\ndriver.find_element_by_xpath('//*[@id=\"reportDate\"]').clear()\ndriver.find_element_by_xpath('//*[@id=\"reportDate\"]').send_keys(\"27-Jul-\n2017\") \ndriver.find_element_by_xpath('//*[@id=\"selectForm\"]/input').click()\ndriver.execute_script(\"window.scrollTo(0, document.body.scrollHeight)/2;\")\nprint(driver.find_element_by_xpath('//*[@id=\"report-\ncontent\"]/div/div/table/tbody/tr[10]/td[2]').get_attribute('innerHTML'))\n</code></pre>\n\n<p>Error I am getting in last line:\nNoSuchElementException: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@id=\"report-content\"]/div/div/table/tbody/tr[10]/td[2]\"}</p>\n\n<p>Thankyou for the help</p>\n"}, {"tags": ["python", "jwt", "pyjwt"], "comments": [{"owner": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "edited": false, "score": 0, "creation_date": 1501747335, "post_id": 45470433, "comment_id": 77916883, "body": "What exactly do you mean with &#39;does not work&#39;? What kind of error do you get? Can you pls. add the generated token to your question"}, {"owner": {"reputation": 87, "user_id": 6110297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUeGH.gif?s=128&g=1", "display_name": "Michael Eltham", "link": "https://stackoverflow.com/users/6110297/michael-eltham"}, "reply_to_user": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "edited": false, "score": 0, "creation_date": 1501774320, "post_id": 45470433, "comment_id": 77938388, "body": "jps thanks for taking the time to reply. Have added an example and answer to question &#39;does not work&#39; above. Let me know if I was clear enough. If not will try to explain more."}, {"owner": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "edited": false, "score": 0, "creation_date": 1501833342, "post_id": 45470433, "comment_id": 77963069, "body": "I think I figured out how it works. What still confuses me is that your jwt.io generated token above works. Please let me know if my answer works for you."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6110297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUeGH.gif?s=128&g=1", "display_name": "Michael Eltham", "link": "https://stackoverflow.com/users/6110297/michael-eltham"}, "edited": false, "score": 0, "creation_date": 1502203171, "post_id": 45501146, "comment_id": 78101962, "body": "jps, Thanks for reply. However it still didn&#39;t crack it..   The endpoint expects a Base64 encoded version of the Password. So your method 1: direct secret 2. decode the encoded version of &#39;secret&#39;. Both does not work..    Do you know if the jet.encode -- does any encoding on the &#39;secret&#39;"}, {"owner": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "reply_to_user": {"reputation": 87, "user_id": 6110297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUeGH.gif?s=128&g=1", "display_name": "Michael Eltham", "link": "https://stackoverflow.com/users/6110297/michael-eltham"}, "edited": false, "score": 0, "creation_date": 1502223479, "post_id": 45501146, "comment_id": 78114112, "body": "as shown above, the jwt.encode does no encoding or decoding on the secret. If you provide a plain text secret as in a) you get the same result as on jwt.io when you paste the plain text secret there. And if you provide an encoded secret you have to decode it before you pass it to jwt.encode, again same result as on jwt.io. I guess ( I don&#39;t know your endpoint) that the error is on the endpoint side. Probably a similar problem regarding the handling of encoded or unencoded secrets. Pls. read my answer carefully and also provide more information in your question."}, {"owner": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "reply_to_user": {"reputation": 87, "user_id": 6110297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUeGH.gif?s=128&g=1", "display_name": "Michael Eltham", "link": "https://stackoverflow.com/users/6110297/michael-eltham"}, "edited": false, "score": 0, "creation_date": 1503041687, "post_id": 45501146, "comment_id": 78459233, "body": "have you been able to solve it? Would be fair to get an update after I invested some time to help."}], "tags": [], "owner": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "is_accepted": false, "score": 6, "last_activity_date": 1501834462, "last_edit_date": 1501834462, "creation_date": 1501833233, "answer_id": 45501146, "question_id": 45470433, "link": "https://stackoverflow.com/questions/45470433/python-jwt-library-pyjwt-trouble-signing-with-hs256-hmac-using-sha-256-hash-al/45501146#45501146", "title": "Python JWT library PyJWT trouble signing with HS256 - HMAC using SHA-256 hash algorithm", "body": "<p>The error here is the <code>base64.b64encode</code>in your python statement.\nYou are not supposed to encode the secret before you pass it to <code>jwt.encode</code>. I think the jwt.io debugger is a bit misleading in this regard:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7NvYy.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7NvYy.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The idea here is, that you have a secret that is stored in base64 encoded format somewhere and the jwt.io debugger will decode your secret when you tell him that it is encoded.</p>\n\n<p>As you can check easily in <code>idle</code>:</p>\n\n<pre><code>&gt;&gt;&gt; base64.b64encode('secret')\n'c2VjcmV0'\n</code></pre>\n\n<p>And if you paste the encoded secret to the secret field on jwt.io and check the checkbox as shown in the picture above, you'll get the following token:</p>\n\n<blockquote>\n  <p>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJjbGllbnRfaWQiLCJhdWQiOiJodHRwczovL2xvZ2luLmdvb2dsZS5jb20vb2F1dGgiLCJzdWIiOiJBY2NvdW50TlVtYmVyLlFUVlIiLCJleHAiOiIxNTAxODYwMDg5IiwibmJmIjoiMTUwMTU5NDI0NyJ9.Nk6oCKBlT9lh4rtJZzF8JuyEsiH_HBaa3UhUx3DbWeI</p>\n</blockquote>\n\n<p>which is identical to the output of the follwing python programs:</p>\n\n<p>a) when you provide a secret directly, not encoded:</p>\n\n<pre><code>code = jwt.encode({'sub':'AccountNUmber.QTVR','nbf':'1501594247','exp':'1501860089', 'iss': 'client_id', 'aud': 'https://login.google.com/oauth'}, \n                  'secret', algorithm='HS256')\n</code></pre>\n\n<p>b) when you provide an encoded secret:</p>\n\n<pre><code>code = jwt.encode({'sub':'AccountNUmber.QTVR','nbf':'1501594247','exp':'1501860089', 'iss': 'client_id', 'aud': 'https://login.google.com/oauth'},\n                  base64.b64decode('c2VjcmV0'), algorithm='HS256')\n</code></pre>\n\n<p>This should work. </p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 9747429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lwNzl.jpg?s=128&g=1", "display_name": "Rostom Recrucified", "link": "https://stackoverflow.com/users/9747429/rostom-recrucified"}, "is_accepted": false, "score": 0, "last_activity_date": 1533983591, "creation_date": 1533983591, "answer_id": 51798780, "question_id": 45470433, "link": "https://stackoverflow.com/questions/45470433/python-jwt-library-pyjwt-trouble-signing-with-hs256-hmac-using-sha-256-hash-al/51798780#51798780", "title": "Python JWT library PyJWT trouble signing with HS256 - HMAC using SHA-256 hash algorithm", "body": "<p>there is  an error in documentation, I checked the source code of this library</p>\n\n<pre><code>class PyJWT(PyJWS):\n    header_type = 'JWT'\n\n    @staticmethod\n    def _get_default_options():\n        # type: () -&gt; Dict[str, bool]\n        return {\n            'verify_signature': True,\n            'verify_exp': True,\n            'verify_nbf': True,\n            'verify_iat': True,\n            'verify_aud': True,\n            'verify_iss': True,\n            'require_exp': False,\n            'require_iat': False,\n            'require_nbf': False\n        }\n\n    def encode(self,\n               payload,  # type: Union[Dict, bytes]\n               key,  # type: str\n               algorithm='HS256',  # type: str\n               headers=None,  # type: Optional[Dict]\n               json_encoder=None  # type: Optional[Callable]\n               ):\n        # Check that we get a mapping\n        if not isinstance(payload, Mapping):\n            raise TypeError('Expecting a mapping object, as JWT only supports '\n                            'JSON objects as payloads.')\n\n        # Payload\n        for time_claim in ['exp', 'iat', 'nbf']:\n            # Convert datetime to a intDate value in known time-format claims\n            if isinstance(payload.get(time_claim), datetime):\n                payload[time_claim] = timegm(payload[time_claim].utctimetuple())  # type: ignore\n\n        json_payload = json.dumps(\n            payload,\n            separators=(',', ':'),\n            cls=json_encoder\n        ).encode('utf-8')\n\n        return super(PyJWT, self).encode(\n            json_payload, key, algorithm, headers, json_encoder\n        )\n</code></pre>\n\n<p>So the solution be will</p>\n\n<pre><code>from jwt.api_jwt import PyJWT\n\n\npayload = {\n    'id': 5,\n    'email': 'ASDASDA'\n}\n\nkey = 'secret'\n\njwt_Obj=PyJWT()\njwt_token = jwt_Obj.encode( payload=payload,key= key )\ndecode_token=jwt_Obj.decode(jwt_token,key=key)\n\nprint (jwt_token)\nprint(decode_token)\n</code></pre>\n\n<p>Output should or (must) be \n b'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6IkFTREFTREEiLCJpZCI6NX0.-Woz4Crgi5KZj_D99eGaKxY4VxosY7r_e7HTD9JaDqE'</p>\n\n<p>{'email': 'ASDASDA', 'id': 5}</p>\n"}], "owner": {"reputation": 87, "user_id": 6110297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUeGH.gif?s=128&g=1", "display_name": "Michael Eltham", "link": "https://stackoverflow.com/users/6110297/michael-eltham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3593, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1533983591, "creation_date": 1501705788, "last_edit_date": 1501835841, "question_id": 45470433, "link": "https://stackoverflow.com/questions/45470433/python-jwt-library-pyjwt-trouble-signing-with-hs256-hmac-using-sha-256-hash-al", "title": "Python JWT library PyJWT trouble signing with HS256 - HMAC using SHA-256 hash algorithm", "body": "<p>Trying to generate a JWT token using the <code>PyJWT</code> library. </p>\n\n<p>When I use the below program to generate the JWT token - the token does not work. </p>\n\n<p>However when I use the website <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a>  with the same details - the token works. Is there something that I'm missing. </p>\n\n<p>I need python generate the token properly so I can automate some API's that need this token. </p>\n\n<p>Python program: </p>\n\n<pre><code>import jwt\nimport base64\n\ncode = jwt.encode({'sub':'String','nbf':'1501594247',\n                   'exp':'1501767047', 'iss': 'string', 'aud': 'String'},\n       base64.b64encode('secret'), algorithm='HS256')\nprint code\n</code></pre>\n\n<p>Example: </p>\n\n<pre><code>code = jwt.encode({'sub':'AccountNUmber.QTVR','nbf':'1501594247','exp':'1501860089', 'iss': 'client_id', 'aud': 'https://login.google.com/oauth'},\n                  base64.b64encode('secret'), algorithm='HS256')\n</code></pre>\n\n<p>Result:</p>\n\n<blockquote>\n  <p>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJjbGllbnRfaWQiLCJhdWQiOiJodHRwczovL2xvZ2luLmdvb2dsZS5jb20vb2F1dGgiLCJzdWIiOiJBY2NvdW50TlVtYmVyLlFUVlIiLCJleHAiOiIxNTAxODYwMDg5IiwibmJmIjoiMTUwMTU5NDI0NyJ9.dRUUQYJ-RmxgoExwPyrvHPzX9SsxcpX1rOWlhisxNsg</p>\n</blockquote>\n\n<p>Token generated by <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a> :</p>\n\n<blockquote>\n  <p>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJjbGllbnRfaWQiLCJhdWQiOiJodHRwczovL2xvZ2luLmdvb2dsZS5jb20vb2F1dGgiLCJzdWIiOiJBY2NvdW50TlVtYmVyLlFUVlIiLCJleHAiOiIxNTAxODYwMDg5IiwibmJmIjoiMTUwMTU5NDI0NyJ9.INp-ZnnL8Uj7MIwLYmpZtGyTyZG-oqZRNW8iZ145jVs</p>\n</blockquote>\n\n<p>The token generated by <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a>  works when I call the endpoint. And I get a status code 200 (Success).</p>\n\n<p>However when I use the token generated from my program it gives 'Invalid Token' - 400 (Bad Request).   </p>\n"}, {"tags": ["python", "excel", "for-loop", "if-statement", "continue"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1501705908, "post_id": 45470424, "comment_id": 77901922, "body": "<code>else: pass</code> is completely pointless, you should leave it out."}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 3, "creation_date": 1501705920, "post_id": 45470424, "comment_id": 77901928, "body": "<code>test_run_type_value = &#39;3&#39;</code>  against <code>test_run_type_value == 3</code>"}], "answers": [{"tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": false, "score": -1, "last_activity_date": 1501706731, "creation_date": 1501706731, "answer_id": 45470687, "question_id": 45470424, "link": "https://stackoverflow.com/questions/45470424/python-skip-an-iteration-in-a-for-loop-if-a-condition-is-true/45470687#45470687", "title": "Python: Skip an Iteration in a For Loop if a condition is true", "body": "<pre><code>test_run_type_value = '1'\n</code></pre>\n\n<p>This sets <code>test_run_type_value</code> to the <strong>string</strong> value <code>'1'</code>.</p>\n\n<pre><code>if test_run_type_value == 1 \u2026\n</code></pre>\n\n<p>This compares <code>test_run_type_value</code> to the <strong>integer</strong> value <code>1</code>.</p>\n\n<p>So you are basically comparing strings and integers here, and those are never equal:</p>\n\n<pre><code>&gt;&gt;&gt; '1' == 1\nFalse\n</code></pre>\n\n<p>So decide on whether you want to use a string, or an integer. E.g. if you assign <code>1</code>, it should work fine:</p>\n\n<pre><code>test_run_type_value = 1 # no quotes =&gt; int!\n</code></pre>\n\n<p>Btw. you do not need to do this:</p>\n\n<pre><code>else:\n    pass\n</code></pre>\n\n<p>Simply don\u2019t include an else, and nothing will be done if the condition is not true:</p>\n\n<pre><code>if test_run_type_value == 3 and sanity_check == \"False\":\n    continue\nif test_run_type_value == 2 and smoke_check == \"False\":\n    continue\nif test_run_type_value == 1 and regression_check == \"False\":\n    continue\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5196010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-14WaLmjgunY/AAAAAAAAAAI/AAAAAAAAADQ/qGOi_1rgJ0w/photo.jpg?sz=128", "display_name": "Ken Villarruel", "link": "https://stackoverflow.com/users/5196010/ken-villarruel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4472, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501706731, "creation_date": 1501705757, "question_id": 45470424, "link": "https://stackoverflow.com/questions/45470424/python-skip-an-iteration-in-a-for-loop-if-a-condition-is-true", "title": "Python: Skip an Iteration in a For Loop if a condition is true", "body": "<p>I have written a Python script that reads in values from an Excel worksheet and iterates through the rows.</p>\n\n<p>However, I would like the program to skip a row if a certain condition is met.</p>\n\n<p>I have an xml file that has a value that determines the run type. In the python code, I have written an If / Else block to convert the value to a number (see below)</p>\n\n<pre><code># If / Else to convert test_run_type text to a value\nif test_run_type == \"Regression\":\n    test_run_type_value = '1'\nelif test_run_type == \"Smoke\":\n    test_run_type_value = '2'\nelif test_run_type == \"Sanity\":\n    test_run_type_value = '3'\n</code></pre>\n\n<p>Next, I have the for loop which iterates through the rows (see code below)</p>\n\n<pre><code># Open Test Scenario Workbook; Instantiate worksheet object\nwb = xlrd.open_workbook(os.path.join(test_case_directory, Product + '.xlsx'))\nsh = wb.sheet_by_index(0)\n\n## Begin For Loop to iterate through Test Scenarios\n        i = 1\n        rows = sh.nrows\n        empty_cell = False\n        for x in range(1, sh.nrows):\n\n            cell_val = sh.cell(i, 0).value\n            if cell_val == '':\n                # If Cell Value is empty, set empty_cell to True\n                empty_cell = True\n            else:\n                # If Cell Value is NOT empty, set empty_cell to False\n                empty_cell = False\n\n\n            regression_check = sh.cell_value(i, 3)\n            smoke_check = sh.cell_value(i, 4)\n            sanity_check = sh.cell_value(i, 5)\n\n            # If / Else Section to check if a test needs to be run\n            #### Program is running ALL rows &amp; NOT skipping rows\n\n            if test_run_type_value == 3 and sanity_check == \"False\":\n                    continue\n            else:\n                pass\n\n            if test_run_type_value == 2 and smoke_check == \"False\":\n                    continue\n            else:\n                pass\n\n            if test_run_type_value == 1 and regression_check == \"False\":\n                    continue\n            else:\n                pass\n</code></pre>\n\n<p>The Problem: My expectation is that the program will skip a row if one of the following scenarios occur in a row.</p>\n\n<ul>\n<li>test_run_type_value is \"3\" and sanity_check equals False</li>\n<li>test_run_type_value is \"2\" and smoke_check equals False</li>\n<li>test_run_type_value is \"1\" and regression_check equals False</li>\n</ul>\n\n<p>However, the program is NOT skipping any of the rows.</p>\n\n<p>I took a screenshot of the Excel sheet.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QxHqN.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>Based on the worksheet (see attached image), the program should skip the first row when the test_run_type_value is \"3\" but it is not. The program iterates through all the rows (even when the test_run_type_value is 1, 2 or 3)</p>\n\n<p>Thanks in Advance</p>\n\n<p>Ken</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1501706195, "creation_date": 1501706195, "answer_id": 45470550, "question_id": 45470373, "link": "https://stackoverflow.com/questions/45470373/extract-words-surrounding-a-word-and-inserting-results-in-a-dataframe-column/45470550#45470550", "title": "Extract words surrounding a word and inserting results in a dataframe column", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html\" rel=\"nofollow noreferrer\"><strong><code>pd.Series.str.extract</code></strong></a></p>\n\n<pre><code>pat = '(?P&lt;before&gt;(?:\\w+\\W+){,3})products\\W+(?P&lt;after&gt;(?:\\w+\\W+){,3})'\nnew = df.text.str.extract(pat, expand=True)\n\nnew\n\n               before                     after\n0  Company sells its   worldwide through its...\n</code></pre>\n\n<p>You can create a new dataframe with new columns</p>\n\n<pre><code>df.assign(**new)\n\n  company  year                                               text                     after              before\n0   Apple  2016  The Company sells its products worldwide throu...  worldwide through its...  Company sells its \n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8407304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e35a950a0b6f37b0e58090f3f3c2e5?s=128&d=identicon&r=PG&f=1", "display_name": "mteavan", "link": "https://stackoverflow.com/users/8407304/mteavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 1, "accepted_answer_id": 45470550, "answer_count": 1, "score": 2, "last_activity_date": 1501706746, "creation_date": 1501705572, "last_edit_date": 1501706192, "question_id": 45470373, "link": "https://stackoverflow.com/questions/45470373/extract-words-surrounding-a-word-and-inserting-results-in-a-dataframe-column", "title": "Extract words surrounding a word and inserting results in a dataframe column", "body": "<p>I have a dataframe, <code>df</code>, with 3 columns as follows:</p>\n\n<pre><code>company | year | text  \nApple   | 2016 |\"The Company sells its products worldwide through its...\"  \n</code></pre>\n\n<p>I would like to search for \"products\" in <code>df['text']</code> and extract the 3 words before and after \"products\" and insert the 3 words before and after into two columns in the data frame, <code>df['before']</code> and <code>df['after']</code>, respectively.</p>\n\n<p>This is what I have done so far:</p>\n\n<pre><code>m = re.search(r'((?:\\w+\\W+){,3})(products)\\W+((?:\\w+\\W+){,3})', df['text'])       \nmerge['searchText'])    \nif m:\n    l = [ x.strip().split() for x in m.groups()]\ndf['left'], df['right'] = l[0], l[2]  \n</code></pre>\n\n<p>However, I am getting this message:</p>\n\n<blockquote>\n  <p>TypeError: expected string or buffer</p>\n</blockquote>\n\n<p>How can I make it work?</p>\n"}, {"tags": ["python", "python-3.x", "sqlalchemy", "pyodbc"], "answers": [{"comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501705960, "post_id": 45470394, "comment_id": 77901955, "body": "Thanks! I get an error that <code>pyodbc.ProgrammingError: (&#39;42000&#39;, &quot;[42000] [Microsoft][ODBC Driver 13 for SQL Server][SQL Server]The EXECUTE permission was denied on the object &#39;GetAdvMedianTrailing30Days&#39;, database &#39;XXX&#39;, schema &#39;dbo&#39;. (229) (SQLExecDirectW)&quot;)</code>. How can I resolve this?"}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501706041, "post_id": 45470394, "comment_id": 77901998, "body": "Does the user you are using sqlalchemy to log into the server with have the necessary permissions to execute <code>GetAdvMedianTrailing30Days</code> in that database?"}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501706165, "post_id": 45470394, "comment_id": 77902064, "body": "Will have to ask my team :P . The github link you posted is really helpful, since my stored proc returns values I will have to convert it into a <code>SQL</code> statement I think. Thanks again!"}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501706346, "post_id": 45470394, "comment_id": 77902158, "body": "The error you are getting implies the problem is permissions on the db server, not related to python."}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1501706761, "post_id": 45470394, "comment_id": 77902389, "body": "yeah, i thought so too. I will have to look into <code>SQL</code> permissions for the user I am using."}, {"owner": {"reputation": 119, "user_id": 5226996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae12e7d58b7dfd1a9696a600ddc57948?s=128&d=identicon&r=PG&f=1", "display_name": "langbourne", "link": "https://stackoverflow.com/users/5226996/langbourne"}, "edited": false, "score": 0, "creation_date": 1596626150, "post_id": 45470394, "comment_id": 111870177, "body": "Does seem a shame that you have to use cursors/recordsets in Python when interacting with MS SQL Server.  I am not an expert but it seems much more elegant in C# with Command Objects."}], "tags": [], "owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "is_accepted": true, "score": 5, "last_activity_date": 1501714104, "last_edit_date": 1501714104, "creation_date": 1501705630, "answer_id": 45470394, "question_id": 45470352, "link": "https://stackoverflow.com/questions/45470352/python-sqlalchemy-calling-stored-procedure/45470394#45470394", "title": "Python sqlalchemy calling stored procedure", "body": "<p>From <a href=\"https://github.com/mkleehammer/pyodbc/wiki/Calling-Stored-Procedures\" rel=\"nofollow noreferrer\">https://github.com/mkleehammer/pyodbc/wiki/Calling-Stored-Procedures</a>, <code>pyodbc</code> does not implement <code>.callproc()</code> method on the connection object. You must execute the sp using a SQL call (<code>.execute(\"{CALL GetAdvMedianTrailing30Days}\")</code>).</p>\n\n<p>(This isn't really a SQLAlchemy question since you are leaking the abstraction down to make a DB-API call using <code>pyodbc</code>)</p>\n"}], "owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2952, "favorite_count": 0, "accepted_answer_id": 45470394, "answer_count": 1, "score": 3, "last_activity_date": 1501714104, "creation_date": 1501705513, "last_edit_date": 1501705833, "question_id": 45470352, "link": "https://stackoverflow.com/questions/45470352/python-sqlalchemy-calling-stored-procedure", "title": "Python sqlalchemy calling stored procedure", "body": "<p>I am trying to call a <code>stored procedure</code> from <code>python</code> using <code>sqlalchemy</code>. The code I have is as follows:</p>\n\n<pre><code>@database_connection_wrapper\ndef get_adv(connection):\n    ''' get the adv using a stored proc from the database '''\n\n    connection.callproc(\"GetAdvMedianTrailing30Days\")\n    results = list(connection.fetchall())\n    print(results)\n</code></pre>\n\n<p>I get the following error:\n<code>AttributeError: 'pyodbc.Connection' object has no attribute 'callproc'</code></p>\n\n<p>I followed the instructions on the official documentation but that did not make a difference. </p>\n\n<p>I am on <code>python 3.5</code></p>\n\n<p>Is there a different way to call <code>stored procedures</code>?</p>\n"}, {"tags": ["python", "sockets"], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1501706273, "creation_date": 1501706273, "answer_id": 45470574, "question_id": 45470348, "link": "https://stackoverflow.com/questions/45470348/find-socket-responsible-for-timeout/45470574#45470574", "title": "Find socket responsible for timeout?", "body": "<p>As far as I can tell, there's nothing in the <code>socket.timeout</code> exception object that identifies the socket. So you need to keep track of which socket you're reading from, that will be the one that timed out:</p>\n\n<pre><code>try:\n    cursock = sock1\n    data = sock1.recv(bufsize)\n    cursock = conn\n    data1 = conn.recv(bufsize)\nexcept socket.timeout, e:\n    print cursock\n</code></pre>\n\n<p>Or you could wrap <code>try/except</code> around each <code>recv</code> call. You could put this into a helper function:</p>\n\n<pre><code>def try_recv(sock, bufsize, flags=0):\n    try:\n        return sock.recv(bufsize, flag)\n    except socket.timeout, e:\n        print sock\n</code></pre>\n"}], "owner": {"reputation": 376, "user_id": 4398724, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/94968fb03f6a8988d1c55ec828ae1b65?s=128&d=identicon&r=PG&f=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4398724/tai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 45470574, "answer_count": 1, "score": 0, "last_activity_date": 1501706273, "creation_date": 1501705508, "last_edit_date": 1501705989, "question_id": 45470348, "link": "https://stackoverflow.com/questions/45470348/find-socket-responsible-for-timeout", "title": "Find socket responsible for timeout?", "body": "<pre><code>sock1.settimeout(2)\nconn.settimeout(1) #conn comes from sock1\nexcept socket.timeout, e:\n    print &lt;responsible socket&gt;\n</code></pre>\n\n<p>Is there a way to distinguish the socket responsible for the timeout?\nPerhaps I'm doing something wrong if I have two sockets that are timing out.</p>\n"}, {"tags": ["python", "traceback", "inspect"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 2, "creation_date": 1501705638, "post_id": 45470346, "comment_id": 77901753, "body": "Can you use <a href=\"https://www.python.org/dev/peps/pep-3155/\" rel=\"nofollow noreferrer\"><code>__qualname__</code></a>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1501705803, "post_id": 45470346, "comment_id": 77901863, "body": "<a href=\"https://stackoverflow.com/questions/10973362/python-logging-function-name-file-name-line-number-using-a-single-file\" title=\"python logging function name file name line number using a single file\">stackoverflow.com/questions/10973362/&hellip;</a>"}, {"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1501705828, "post_id": 45470346, "comment_id": 77901877, "body": "@mgilson given the python2.x syntax in the question I&#39;d guess not?"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 0, "creation_date": 1501705987, "post_id": 45470346, "comment_id": 77901969, "body": "@AnthonySottile -- Yeah, I was just coming to that conclusion myself -- though there is an (imperfect) substitute on pypi (<a href=\"https://pypi.python.org/pypi/qualname/\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/qualname</a>)"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 0, "creation_date": 1501706497, "post_id": 45470346, "comment_id": 77902253, "body": "@AnthonySottile -- Also, from <code>frame</code> objects, I don&#39;t think you actually have a reference back to the function object -- Only it&#39;s name."}, {"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1501706665, "post_id": 45470346, "comment_id": 77902347, "body": "@mgilson indeed, there&#39;s <code>f_code</code> but that&#39;s only the code object (a function object contains code + some other things)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1501707060, "post_id": 45470346, "comment_id": 77902547, "body": "@mgilson holy hell: &quot;This module uses source code inspection to figure out how (nested) classes and functions are defined in order to determine the qualified names for them. That means parsing the source file, and traversing the AST (abstract syntax tree). This sounds very hacky, and it is, but the Python interpreter itself does not have the necessary information, so this justifies extreme measures.&quot;"}, {"owner": {"reputation": 459, "user_id": 1022047, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/974d69bf8e6a7af2ed8f7e29192ddd14?s=128&d=identicon&r=PG", "display_name": "Julien REINAULD", "link": "https://stackoverflow.com/users/1022047/julien-reinauld"}, "edited": false, "score": 0, "creation_date": 1501753588, "post_id": 45470346, "comment_id": 77921627, "body": "@everyone: yes, as of today, I use python 2.7.12 (default python on Ubuntu 16.04.2). Would python3 allow me to do what I need?"}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1503673474, "post_id": 45470346, "comment_id": 78727428, "body": "@JulienREINAULD: In your question &quot;displays&quot; and &quot;instead of&quot; are swapped, isn&#39;t it?"}, {"owner": {"reputation": 459, "user_id": 1022047, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/974d69bf8e6a7af2ed8f7e29192ddd14?s=128&d=identicon&r=PG", "display_name": "Julien REINAULD", "link": "https://stackoverflow.com/users/1022047/julien-reinauld"}, "reply_to_user": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1504019357, "post_id": 45470346, "comment_id": 78843491, "body": "@LaurentLAPORTE Hum I don&#39;t think so. I wish the full name instead of the leaf name"}], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 1022047, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/974d69bf8e6a7af2ed8f7e29192ddd14?s=128&d=identicon&r=PG", "display_name": "Julien REINAULD", "link": "https://stackoverflow.com/users/1022047/julien-reinauld"}, "edited": false, "score": 0, "creation_date": 1501753191, "post_id": 45470729, "comment_id": 77921323, "body": "You are correct.  However, what I am really trying to achieve (sorry I did not asked that explicitely in my question) is to retrieve the class name from traceback, without the need to pass it as an argument to my &#39;log&#39; function."}], "tags": [], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "is_accepted": false, "score": -1, "last_activity_date": 1501706866, "creation_date": 1501706866, "answer_id": 45470729, "question_id": 45470346, "link": "https://stackoverflow.com/questions/45470346/python-how-to-get-the-full-name-of-the-function-i-am-in/45470729#45470729", "title": "Python: how to get the *full* name of the function I am in", "body": "<p>The <a href=\"https://docs.python.org/2/library/inspect.html\" rel=\"nofollow noreferrer\">inspect</a> module is very powerful, and can be used in a similar fashion to the way you use <code>traceback</code> to get the name of the function, and probably also the class name. But you can simply make use of the fact that you have the <code>self</code> instance variable, which knows of its own type/class:</p>\n\n<pre><code>import inspect\n\nclass cls(object):\n    def f1(self):\n        this_class_name = type(self).__name__\n        this_func_name = inspect.currentframe().f_code.co_name\n        print(this_class_name, this_func_name)\n\nmycls = cls()\nmycls.f1()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 1022047, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/974d69bf8e6a7af2ed8f7e29192ddd14?s=128&d=identicon&r=PG", "display_name": "Julien REINAULD", "link": "https://stackoverflow.com/users/1022047/julien-reinauld"}, "is_accepted": false, "score": 0, "last_activity_date": 1503671557, "last_edit_date": 1503671557, "creation_date": 1503666092, "answer_id": 45882068, "question_id": 45470346, "link": "https://stackoverflow.com/questions/45470346/python-how-to-get-the-full-name-of-the-function-i-am-in/45882068#45882068", "title": "Python: how to get the *full* name of the function I am in", "body": "<p>So I finally came up this method:</p>\n\n<pre><code>#!/usr/bin/env python3\n\ndef log(message):\n    import inspect\n    import gc\n    code = inspect.currentframe().f_back.f_code\n    func = [obj for  obj in  gc.get_referrers(code) if inspect.isfunction(obj)][0]\n    print(func.__qualname__, message)\n</code></pre>\n\n<p>It needs python3 so that __qualname__ can be used.</p>\n"}], "owner": {"reputation": 459, "user_id": 1022047, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/974d69bf8e6a7af2ed8f7e29192ddd14?s=128&d=identicon&r=PG", "display_name": "Julien REINAULD", "link": "https://stackoverflow.com/users/1022047/julien-reinauld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1356, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1503671557, "creation_date": 1501705507, "last_edit_date": 1501753377, "question_id": 45470346, "link": "https://stackoverflow.com/questions/45470346/python-how-to-get-the-full-name-of-the-function-i-am-in", "title": "Python: how to get the *full* name of the function I am in", "body": "<p>Is there a way so that the following code:</p>\n\n<pre><code>import traceback\n\ndef log(message):\n    print \"%s: %s\" %(traceback.extract_stack()[0:-1][-1][2], message)\n\ndef f1():\n    log(\"hello\")\n\nclass cls(object):\n    def f1(self):\n        log(\"hi there\")\n\nf1()\nmycls = cls()\nmycls.f1()\n</code></pre>\n\n<p>displays:</p>\n\n<pre><code>f1: hello\ncls.f1: hi there\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>f1: hello\nf1: hi there\n</code></pre>\n\n<p>?</p>\n\n<p>I tried to use module 'inspect' but was not successful...</p>\n\n<p>Julien</p>\n\n<blockquote>\n  <p>EDIT:</p>\n  \n  <p>The point here is for 'log' function to be able to retrieve its caller\n  name on its own (using traceback, inspect, or any mean necessary).</p>\n  \n  <p>I do not want to pass the class name, or anything else than 'message'\n  to the 'log' function.</p>\n</blockquote>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 571, "user_id": 4869583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4db2bb044ba0df998da9501b8107a13?s=128&d=identicon&r=PG&f=1", "display_name": "Huang", "link": "https://stackoverflow.com/users/4869583/huang"}, "is_accepted": true, "score": 3, "last_activity_date": 1501707648, "last_edit_date": 1501707648, "creation_date": 1501707334, "answer_id": 45470842, "question_id": 45470328, "link": "https://stackoverflow.com/questions/45470328/pandas-get-days-in-a-between-two-two-dates-from-a-particular-month/45470842#45470842", "title": "Pandas get days in a between two two dates from a particular month", "body": "<p>There is a solution:\nget a date list by <code>pd.date_range</code> between <code>start</code> and <code>end</code> dates, and then check how many date has the same <code>year</code> and <code>month</code> with the target month.</p>\n\n<pre><code>def overlap(x):\n    md = pd.to_datetime(x[2])\n    cand =  [(ad.year, ad.month) for ad in pd.date_range(x[0], x[1])]\n    return len([x for x in cand if x ==(md.year, md.month)])\ndf1[\"Days in Month\"]= df1.apply(overlap, axis=1)\n</code></pre>\n\n<p>You'll get:</p>\n\n<pre><code>   start date end date date       Month  Days in Month\n0  2017-01-01    2017-06-01  2016-01-01              0\n1  2015-03-02    2016-02-10  2016-02-01             10\n2  2011-01-02    2018-02-10  2016-03-01             31\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8407927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcc98520c55f78b2fcc53c5e6641a98?s=128&d=identicon&r=PG&f=1", "display_name": "Moyataka", "link": "https://stackoverflow.com/users/8407927/moyataka"}, "is_accepted": false, "score": 1, "last_activity_date": 1501711654, "creation_date": 1501711654, "answer_id": 45471804, "question_id": 45470328, "link": "https://stackoverflow.com/questions/45470328/pandas-get-days-in-a-between-two-two-dates-from-a-particular-month/45471804#45471804", "title": "Pandas get days in a between two two dates from a particular month", "body": "<p>You can convert your cell to datetime by</p>\n\n<p><code>df = df.applymap(lambda x: pd.to_datetime(x))</code></p>\n\n<p>Then find intersection days with function</p>\n\n<pre><code>def intersectionDaysInMonth(start, end, month):\n    end_month = month.replace(month=month.month + 1)\n    if month &lt;= start &lt;= end_month:\n        return end_month - start\n    if month &lt;= end &lt;= end_month:\n        return end - month\n    if start &lt;= month &lt; end_month &lt;= end:\n        return end_month - month\n\n    return pd.to_timedelta(0)\n</code></pre>\n\n<p>Then apply</p>\n\n<pre><code>df['Days in Month'] = df.apply(lambda row: intersectionDaysInMonth(*row).days, axis=1)\n</code></pre>\n"}], "owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 45470842, "answer_count": 2, "score": 0, "last_activity_date": 1501711654, "creation_date": 1501705463, "question_id": 45470328, "link": "https://stackoverflow.com/questions/45470328/pandas-get-days-in-a-between-two-two-dates-from-a-particular-month", "title": "Pandas get days in a between two two dates from a particular month", "body": "<p>I have a <code>pandas</code> dataframe with three columns. A start and end date and a month. </p>\n\n<p>I would like to add a column for how many days within the month are between the two dates. I started doing something with <code>apply</code>, the <code>calendar</code> library and some math, but it started to get really complex. I bet <code>pandas</code> has a simple solution, but am struggling to find it.</p>\n\n<p>Input:</p>\n\n<pre><code>import pandas as pd\ndf1 = pd.DataFrame(data=[['2017-01-01', '2017-06-01', '2016-01-01'],\n                         ['2015-03-02', '2016-02-10', '2016-02-01'],\n                         ['2011-01-02', '2018-02-10', '2016-03-01']],\n                  columns=['start date', 'end date date', 'Month'])\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>   start date end date date       Month  Days in Month\n0  2017-01-01    2017-06-01  2016-01-01              0\n1  2015-03-02    2016-02-10  2016-02-01             10\n2  2011-01-02    2018-02-10  2016-03-01             31\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 3, "creation_date": 1501705659, "post_id": 45470303, "comment_id": 77901762, "body": "OP mentions querysets so they&#39;re probably after: <code>dict(queryset.values_list(&#39;week&#39;, &#39;avg&#39;))</code>..."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 1, "creation_date": 1501706152, "post_id": 45470303, "comment_id": 77902058, "body": "@JonClements: thanks. I added this to the answer with a brief explanation :)."}, {"owner": {"reputation": 381, "user_id": 8407856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ftL2ZzBDVj4/AAAAAAAAAAI/AAAAAAAAATM/pQe_j6jzDY4/photo.jpg?sz=128", "display_name": "Priyam Mohanty", "link": "https://stackoverflow.com/users/8407856/priyam-mohanty"}, "edited": false, "score": 0, "creation_date": 1501720453, "post_id": 45470303, "comment_id": 77906914, "body": "This is fantastic and very simple! Thank you very much."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 8, "last_activity_date": 1501706002, "last_edit_date": 1501706002, "creation_date": 1501705379, "answer_id": 45470303, "question_id": 45470281, "link": "https://stackoverflow.com/questions/45470281/python-converting-python-dictionary-values-to-respective-key-value-pairs/45470303#45470303", "title": "python - Converting python dictionary values to respective key-value pairs", "body": "<p>Simply use <em>dictionary comprehension</em>:</p>\n\n<pre><code>{ d['week'] : d['avg'] for d in data }\n</code></pre>\n\n<p>Where <code>data</code> is your list of dictionaries. This produces:</p>\n\n<pre><code>&gt;&gt;&gt; { d['week'] : d['avg'] for d in data }\n{29: 137.6, 30: 138.6, 31: 138.06666666666666}\n</code></pre>\n\n<p>The dictionary comprehension will thus iterate through <code>data</code>, and for every element <code>d</code> (a dictionary), it will associate <code>d['week']</code> (key) with <code>d['avg']</code> (value) in the result.</p>\n\n<p>In case it is not a list of dictionaries, but still a queryset, you should - like <a href=\"https://stackoverflow.com/questions/45470281/python-converting-python-dictionary-values-to-respective-key-value-pairs/45470303?noredirect=1#comment77901762_45470303\">@JonClemens says</a> - use the following expression:</p>\n\n<pre><code>dict(queryset.values_list('week','avg'))\n</code></pre>\n\n<p>Here <code>values_list('week','avg')</code> will construct an iterable of 2-tuples that contain the week as first element, and the average as second element. If the <code>dict(..)</code> constructor obtains an iterable of 2-tuples, it will construct a dictionary where the first element of every tuple is the key, and the second element of the tuple the associated value.</p>\n"}], "owner": {"reputation": 381, "user_id": 8407856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ftL2ZzBDVj4/AAAAAAAAAAI/AAAAAAAAATM/pQe_j6jzDY4/photo.jpg?sz=128", "display_name": "Priyam Mohanty", "link": "https://stackoverflow.com/users/8407856/priyam-mohanty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 45470303, "answer_count": 1, "score": 1, "last_activity_date": 1501706002, "creation_date": 1501705307, "question_id": 45470281, "link": "https://stackoverflow.com/questions/45470281/python-converting-python-dictionary-values-to-respective-key-value-pairs", "title": "python - Converting python dictionary values to respective key-value pairs", "body": "<p>Currently I am working with Django querysets and am getting a result like this:</p>\n\n<pre><code>[{'week': 29, 'avg': 137.6}, {'week': 30, 'avg': 138.6}, {'week': 31, 'avg': 138.06666666666666}]\n</code></pre>\n\n<p>As you can see, its a list of dictionaries.</p>\n\n<p>I want to deal with simply:</p>\n\n<pre><code>{29: 137.6, 30: 138.6, 31: 138.066}\n</code></pre>\n\n<p>I'm having some trouble looping my head through all this. Any help would be appreciated.\nThank you.</p>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 1616, "user_id": 3025740, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d177badf7471ff190ad8d0592c00abb1?s=128&d=identicon&r=PG", "display_name": "C&#233;dric Van Rompay", "link": "https://stackoverflow.com/users/3025740/c%c3%a9dric-van-rompay"}, "edited": false, "score": 0, "creation_date": 1505222432, "post_id": 45470226, "comment_id": 79317381, "body": "I&#39;m wondering if creating a decorated function and re-binding it to the &#39;requests&#39; module is doable/suitable"}, {"owner": {"reputation": 21358, "user_id": 1977620, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/lvWfj.jpg?s=128&g=1", "display_name": "Max Malysh", "link": "https://stackoverflow.com/users/1977620/max-malysh"}, "reply_to_user": {"reputation": 1616, "user_id": 3025740, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d177badf7471ff190ad8d0592c00abb1?s=128&d=identicon&r=PG", "display_name": "C&#233;dric Van Rompay", "link": "https://stackoverflow.com/users/3025740/c%c3%a9dric-van-rompay"}, "edited": false, "score": 0, "creation_date": 1505224503, "post_id": 45470226, "comment_id": 79319005, "body": "@C&#233;dricVanRompay what you&#39;ve described is called &quot;monkey patching&quot;, and usually it&#39;s something to be avoided"}], "answers": [{"tags": [], "owner": {"reputation": 21358, "user_id": 1977620, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/lvWfj.jpg?s=128&g=1", "display_name": "Max Malysh", "link": "https://stackoverflow.com/users/1977620/max-malysh"}, "is_accepted": true, "score": 30, "last_activity_date": 1501705181, "creation_date": 1501705181, "answer_id": 45470227, "question_id": 45470226, "link": "https://stackoverflow.com/questions/45470226/requests-always-call-raise-for-status/45470227#45470227", "title": "Requests \u2014 always call raise_for_status", "body": "<p>Create a session with a hook:</p>\n\n<pre><code>session = requests.Session()\nsession.hooks = {\n   'response': lambda r, *args, **kwargs: r.raise_for_status()\n}\n\nx = session.get(url1)\ny = session.delete(url2)\nz = session.post(url3, data={'foo': 'bar'})\n</code></pre>\n"}], "owner": {"reputation": 21358, "user_id": 1977620, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/lvWfj.jpg?s=128&g=1", "display_name": "Max Malysh", "link": "https://stackoverflow.com/users/1977620/max-malysh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2715, "favorite_count": 3, "accepted_answer_id": 45470227, "answer_count": 1, "score": 19, "last_activity_date": 1531087808, "creation_date": 1501705181, "last_edit_date": 1531087808, "question_id": 45470226, "link": "https://stackoverflow.com/questions/45470226/requests-always-call-raise-for-status", "title": "Requests \u2014 always call raise_for_status", "body": "<p>I'd like to remove the repeated <code>x.raise_for_status()</code> lines:</p>\n\n<pre><code>x = requests.get(url1)\nx.raise_for_status()\n\ny = requests.delete(url2)\ny.raise_for_status()\n\nz = requests.post(url3, data={'foo': 'bar'})\nz.raise_for_status()\n</code></pre>\n\n<p>How can I call <code>raise_for_status()</code> automatically? </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1501705918, "post_id": 45470313, "comment_id": 77901927, "body": "I missed the leaving <code>False</code> rows null part (-:"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 12, "last_activity_date": 1501705398, "creation_date": 1501705398, "answer_id": 45470313, "question_id": 45470219, "link": "https://stackoverflow.com/questions/45470219/set-values-based-on-df-query/45470313#45470313", "title": "Set values based on df.query?", "body": "<p>AFAIK <code>df.query()</code> returns a new DF, so try the following approach:</p>\n\n<pre><code>In [146]: df.loc[df.eval(criteria), 'd'] = 1\n\nIn [147]: df\nOut[147]:\n          a         b         c    d\n0  0.175155  0.221811  0.808175  1.0\n1  0.069033  0.484528  0.841618  1.0\n2  0.174685  0.648299  0.904037  1.0\n3  0.292404  0.423220  0.897146  1.0\n4  0.169869  0.395967  0.590083  1.0\n5  0.574394  0.804917  0.746797  NaN\n6  0.642173  0.252437  0.847172  NaN\n7  0.073629  0.821715  0.859776  1.0\n8  0.999789  0.833708  0.230418  NaN\n9  0.028163  0.666961  0.582713  NaN\n</code></pre>\n"}], "owner": {"reputation": 2051, "user_id": 6883295, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Opjo7.jpg?s=128&g=1", "display_name": "cfort", "link": "https://stackoverflow.com/users/6883295/cfort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3498, "favorite_count": 0, "accepted_answer_id": 45470313, "answer_count": 1, "score": 8, "last_activity_date": 1583448002, "creation_date": 1501705156, "question_id": 45470219, "link": "https://stackoverflow.com/questions/45470219/set-values-based-on-df-query", "title": "Set values based on df.query?", "body": "<p>I'd like to set the value of a column based on a query. I could probably use <code>.where</code> to accomplish this, but the criteria for <code>.query</code> are strings which are easier for me to maintain, especially when the criteria become complex.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nnp.random.seed(51723)\ndf = pd.DataFrame(np.random.rand(n, 3), columns=list('abc'))\n</code></pre>\n\n<p>I'd like to make a new column, d, and set the value to 1 where these criteria are met:</p>\n\n<pre><code>criteria = '(a &lt; b) &amp; (b &lt; c)'\n</code></pre>\n\n<p>Among other things, I've tried:</p>\n\n<pre><code>df['d'] = np.nan\ndf.query(criteria).loc[:,'d'] = 1\n</code></pre>\n\n<p>But that seems to do nothing except giving the <code>SettingWithCopyWarning</code> even though I'm using <code>.loc</code> </p>\n\n<p>And passing <code>inplace</code> like this:</p>\n\n<pre><code>df.query(criteria, inplace=True).loc[:,'d'] = 1\n</code></pre>\n\n<p>Gives <code>AttributeError: 'NoneType' object has no attribute 'loc'</code></p>\n"}, {"tags": ["python", "dictionary", "while-loop", "linked-list"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501705975, "post_id": 45470207, "comment_id": 77901958, "body": "&quot;I know that dictionaries behave weirdly...&quot; Nope. <b>All Python objects behave in this way</b>. Also, Python doesn&#39;t have pointers."}, {"owner": {"reputation": 432, "user_id": 8402427, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6377f77c32066029c46eed228e1e71e4?s=128&d=identicon&r=PG&f=1", "display_name": "DrJessop", "link": "https://stackoverflow.com/users/8402427/drjessop"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501706067, "post_id": 45470207, "comment_id": 77902012, "body": "If that&#39;s the case, then can you explain to me why ptr=ptr[&#39;next&#39;] doesn&#39;t affect the linked list?"}, {"owner": {"reputation": 432, "user_id": 8402427, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6377f77c32066029c46eed228e1e71e4?s=128&d=identicon&r=PG&f=1", "display_name": "DrJessop", "link": "https://stackoverflow.com/users/8402427/drjessop"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501706119, "post_id": 45470207, "comment_id": 77902044, "body": "@juanpa.arrivillaga Also, they are &quot;pretend pointers.&quot; It&#39;s more for the sake of understanding them for future courses in Java and C."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501706148, "post_id": 45470207, "comment_id": 77902055, "body": "Because <i>assignment is not mutation</i>. You are simply assigning the value of <code>ptr[&#39;next&#39;]</code> to <code>ptr</code>. Please read Ned Batchelder&#39;s <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">Facts and Myths about Python names and values</a>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501706190, "post_id": 45470207, "comment_id": 77902075, "body": "Java doesn&#39;t have pointers either, and I don&#39;t really see how this would help you understand C pointers. For the sake of understanding, you should understand that <i>Python doesn&#39;t have pointers</i>."}, {"owner": {"reputation": 432, "user_id": 8402427, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6377f77c32066029c46eed228e1e71e4?s=128&d=identicon&r=PG&f=1", "display_name": "DrJessop", "link": "https://stackoverflow.com/users/8402427/drjessop"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1501706312, "post_id": 45470207, "comment_id": 77902142, "body": "@juanpa.arrivillaga Well, this is for a course, and I guess this is the easiest way to teach linked lists in an introductory programming course without delving into O.O.P. I know, it&#39;s silly, but thank you for the read."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1501706468, "post_id": 45470207, "comment_id": 77902240, "body": "I don&#39;t think it&#39;s particularly silly for a course that doesn&#39;t want to get into writing classes. But anyways, I also suggest reading <a href=\"http://foobarnbaz.com/2012/07/08/understanding-python-variables/\" rel=\"nofollow noreferrer\">this link</a>. The analogy that python variables act like name-tags whereas in languages like C, variables act like boxes that hold values, is a good mental model."}], "owner": {"reputation": 432, "user_id": 8402427, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6377f77c32066029c46eed228e1e71e4?s=128&d=identicon&r=PG&f=1", "display_name": "DrJessop", "link": "https://stackoverflow.com/users/8402427/drjessop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502212359, "creation_date": 1501705098, "last_edit_date": 1502212359, "question_id": 45470207, "link": "https://stackoverflow.com/questions/45470207/logic-behind-linked-lists-using-dictionaries-and-procedural-programming-python", "title": "Logic Behind Linked Lists Using Dictionaries and Procedural Programming - Python 3", "body": "<p>I have successfully created a function that moves a node at a particular index to the front of a linked list, however I have some questions about the logic. First of all, my code is presented below:</p>\n\n<pre><code>def movePos(lst, index):\n    counter=0\n    ptr=lst\n    new_node={}\n    while counter != (index-1):\n        ptr=ptr['next']\n        counter+=1\n    new_node['data']=ptr['next']['data']\n    ptr['next']=ptr['next']['next']\n    new_node['next'] = lst\n    return new_node\n</code></pre>\n\n<p>If I have a linked list like:</p>\n\n<pre><code>myList={'data': 10, 'next': \n{'data': 9, 'next':\n{'data': 7, 'next':\n{'data': 4, 'next': None}}}}\n\n&gt;&gt;&gt;movePos(myList, 2)\n{'data': 7, 'next': \n{'data': 10, 'next': \n{'data': 9, 'next': \n{'data': 4, 'next': None}}}}\n</code></pre>\n\n<p>I know that dictionaries behave weirdly in that if I have dictA={1:1} and dictB=dictA, if I change dictB, then it changes dictA. But with pointers, given that you are setting them equal to the list, when you are reassigning the pointer in the loop, why is it that the original linked list isn't losing a bunch of data values? If ptr=ptr['next'], why then isn't lst=lst['next']?\nExample:</p>\n\n<pre><code>&gt;&gt;&gt;a={'data':1,'next':{'data':4,'next':None}}\n&gt;&gt;&gt;b=a\n&gt;&gt;&gt;b=b['next']\n&gt;&gt;&gt;print(b)\n{'data':4, 'next': None}\n&gt;&gt;&gt;print(a)\n{'data':1,'next':{'data':4,'next':None}}\n&gt;&gt;&gt;b['data']=5\n&gt;&gt;&gt;print(a)\n{'data':1,'next':{'data':5,'next':None}}\n</code></pre>\n"}, {"tags": ["python", "dictionary", "python-internals"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1501705109, "post_id": 45470198, "comment_id": 77901465, "body": "Which version? All?"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501705192, "post_id": 45470198, "comment_id": 77901519, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 Yup. That&#39;s why I didn&#39;t add any version specific tags. :-)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501705481, "post_id": 45470198, "comment_id": 77901662, "body": "<code>d.clear()</code> does resize, though"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501705664, "post_id": 45470198, "comment_id": 77901766, "body": "Yeah... the answer to the &quot;why&quot; would involve a bit of speculation - obviously the authors felt the benefits would not justify the complexity required to implement it and the performance impacts as a result of it."}, {"owner": {"reputation": 1271, "user_id": 4465743, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-Dqf3p5-NRus/AAAAAAAAAAI/AAAAAAAAAJQ/3vdHWzXKiqI/photo.jpg?sz=128", "display_name": "Rajan Chauhan", "link": "https://stackoverflow.com/users/4465743/rajan-chauhan"}, "edited": false, "score": 0, "creation_date": 1501706651, "post_id": 45470198, "comment_id": 77902342, "body": "This is because of Amortisation. Changing the size only when there is a deletion of upto half elements and adding twice memory when previous memory allocation becomes full. It helps in reducing the overall cost of operation in allocating memory again and again. Since in list we have consecutive memory. So if we resize list on each insertion it will become too costly operation so if present allocated memory become full size of existing list is just doubled. Same stratergy is used in deletion."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 1271, "user_id": 4465743, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-Dqf3p5-NRus/AAAAAAAAAAI/AAAAAAAAAJQ/3vdHWzXKiqI/photo.jpg?sz=128", "display_name": "Rajan Chauhan", "link": "https://stackoverflow.com/users/4465743/rajan-chauhan"}, "edited": false, "score": 3, "creation_date": 1501707018, "post_id": 45470198, "comment_id": 77902512, "body": "@RajanChauhan: I think you&#39;ve missed something. Both lists and dicts use a resize strategy that amortizes the cost of resizes, but dicts <i>don&#39;t</i> resize on deletion. The question is about why dicts don&#39;t resize on deletion, not about the amortization strategy."}], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1501705469, "post_id": 45470280, "comment_id": 77901658, "body": "To add on to this, it seems evident that the authors hedged their bets on the fact that resizing on deletion would not have any tangible benefits unless a large amount of items were deleted in which case, it was assumed the dictionary would eventually be discarded."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1501705767, "post_id": 45470280, "comment_id": 77901836, "body": "I glossed over the dictnotes and completely missed the <i>resize thrashing or memory fragmentation</i>, I need sleep. Thanks. As an aside: any idea what resize thrashing is exactly?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1501705867, "post_id": 45470280, "comment_id": 77901899, "body": "@JimFasarakisHilliard: Resizing up and down over and over. Also an issue for lists, but they seem to have decided that the tradeoff went one way for dicts and the other way for lists, possibly due to the comparative expense of a dict resize or the ways they thought dicts and lists were used in practice."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1501705977, "post_id": 45470280, "comment_id": 77901961, "body": "Personally, I&#39;ve always wondered how much practical relevance the empty-by-pop scenario actually has."}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1501706280, "post_id": 45470280, "comment_id": 77902124, "body": "@user2357112 wouldn&#39;t it be about the same as empty a list by pop scenario? But it&#39;s unlikely that dict sizes would reach the same size as lists in the wild."}, {"owner": {"reputation": 1271, "user_id": 4465743, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-Dqf3p5-NRus/AAAAAAAAAAI/AAAAAAAAAJQ/3vdHWzXKiqI/photo.jpg?sz=128", "display_name": "Rajan Chauhan", "link": "https://stackoverflow.com/users/4465743/rajan-chauhan"}, "edited": false, "score": 0, "creation_date": 1501706715, "post_id": 45470280, "comment_id": 77902365, "body": "Amortization is the word for it."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 12, "last_activity_date": 1501705773, "last_edit_date": 1501705773, "creation_date": 1501705307, "answer_id": 45470280, "question_id": 45470198, "link": "https://stackoverflow.com/questions/45470198/why-dont-dictionaries-resize-after-deletions/45470280#45470280", "title": "Why don&#39;t dictionaries resize after deletions?", "body": "<p>This is somewhat explained in <a href=\"https://github.com/python/cpython/blob/master/Objects/dictnotes.txt\" rel=\"noreferrer\"><code>Objects/dictnotes.txt</code></a>, a companion file containing various notes on the dict implementation:</p>\n\n<blockquote>\n  <p>Dictionary operations involving only a single key can be O(1) unless\n  resizing is possible.  By checking for a resize only when the\n  dictionary can grow (and may <em>require</em> resizing), other operations\n  remain O(1), and the odds of resize thrashing or memory fragmentation\n  are reduced. In particular, an algorithm that empties a dictionary by\n  repeatedly invoking .pop will see no resizing, which might not be\n  necessary at all because the dictionary is eventually discarded\n  entirely.</p>\n</blockquote>\n\n<p>One important consideration is that shrinking a list's buffer is really easy, while shrinking a dict's internal hash table is a much more complex operation.</p>\n"}], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 2, "accepted_answer_id": 45470280, "answer_count": 1, "score": 8, "last_activity_date": 1501718758, "creation_date": 1501705052, "last_edit_date": 1501718758, "question_id": 45470198, "link": "https://stackoverflow.com/questions/45470198/why-dont-dictionaries-resize-after-deletions", "title": "Why don&#39;t dictionaries resize after deletions?", "body": "<p>Apparently deleting entries in a dictionary doesn't trigger any resizes. A resize is triggered only after you add an entry. </p>\n\n<p>This can be seen from the following:</p>\n\n<pre><code># Drastic example, nobody does such \n# things with dicts FWIK\nfrom sys import getsizeof\n\nd = {i:i for i in range(100)}\nprint(getsizeof(d))  # 4704\nfor i in range(100):\n    del d[i]  # similarly with pop\nprint(getsizeof(d))  # 4704\nd[0] = 1 # triggers resize\n</code></pre>\n\n<p>as well as from <a href=\"https://stackoverflow.com/questions/20906435/does-dictionary-do-resize-when-we-delete-an-item\">a question on SO</a> (from what I've found). <code>set</code>s behave in a similar fashion, which is to be expected to fall in line with what dicts do.</p>\n\n<p><code>list</code>s, on the other hand, resize when the the new size becomes half of that already allocated; this is stated in a <a href=\"https://github.com/python/cpython/blob/master/Objects/listobject.c#L39\" rel=\"nofollow noreferrer\"><code>list_resize</code> comment</a>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Bypass realloc() when a previous overallocation is large enough\n   to accommodate the newsize.  If the newsize falls lower than half\n   the allocated size, then proceed with the realloc() to shrink the list.\n*/\n</code></pre>\n\n<p>Why is it that dictionaries (and, indirectly, sets) don't employ a similar trick and instead wait for a new entry to be inserted? The behaviour described applies for Python 2.7 and 3.x (up until Python 3.7.0a0).</p>\n"}, {"tags": ["python", "python-3.x", "sh", "raspbian", "raspberry-pi3"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501705149, "post_id": 45470186, "comment_id": 77901490, "body": "<code>hours_to_completion dec,int_ = math.modf(hours_to_completion)</code> ?? missing assignment?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501705264, "post_id": 45470186, "comment_id": 77901553, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that isolates the specific problem (with a minimal dependency set so others can run it) rather than dumping all your code."}], "owner": {"reputation": 1, "user_id": 8407721, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WY-ufBsMuIA/AAAAAAAAAAI/AAAAAAAAAGg/DM0jtK6AjaM/photo.jpg?sz=128", "display_name": "Churtamos", "link": "https://stackoverflow.com/users/8407721/churtamos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501705016, "creation_date": 1501705016, "question_id": 45470186, "link": "https://stackoverflow.com/questions/45470186/when-running-shell-command-python-script-only-runs-halfway-before-stopping", "title": "When running shell command, python script only runs halfway before stopping", "body": "<p>I created a python 3 script that takes user input for various numbers using easygui then calculates a time based off those numbers then creates a timer GUI from tkinter. That script runs just fine. However, I created an sh file to essentially make the script executable from the desktop of the Raspberry Pi 3 but it only runs the easygui part of the scrip (where the user inputs numbers). After the last number is input, the dialog box closes, as expected, but the timer window never opens. </p>\n\n<p>My shell file is as follows:</p>\n\n<pre><code>#!/bin/bash\n\ncd /home/pi/Desktop/Python/easygui-0.97/easygui\npython potential.py\n</code></pre>\n\n<p>The rest of my code (the python script named \"potential\")</p>\n\n<pre><code>from partsperhour import hours_to_completion\nfrom partsperhour import part_number\nfrom partsperhour import cycle_time\nfrom partsperhour import cavities\nfrom partsperhour import work_order_amount\n\n\nimport math\nhours_to_completion\ndec,int_ = math.modf(hours_to_completion)\ndec_=dec*60\n\n\nstr1=str(int(int_))\nstr2=\":\"\nstr3=str(int(dec_))\nstr4=\"00\"\nstr5=\"0\"\n\n\n\nimport tkinter as tk\nfrom tkinter import ttk\nfrom tkinter import *\n\ndef update_timeText():\n    if (state):\n        global timer\n        timer[2] -= 1\n        if (timer[2] &lt;= 0 and timer[1] &lt;=0):\n             timer[2] = 59\n             timer[1] -= 1\n             timer[1] = 59\n             timer[0] -= 1\n        if (timer[2] &lt;= 0 and timer[0] !=0 and timer[1] &gt;0):\n             timer[1] -= 1\n             timer[2] = 59\n        if (timer[2] &lt;= 0 and timer[0] &lt;=0 and timer[1] &gt;0):\n             timer[1] -= 1\n             timer[2] = 59\n\n        if (timer[1] &lt;= 0 and timer[0] &lt;= 0):\n             timer[2] = 59    \n\n        if (timer[0] !=0 and timer[1] != 0 and timer[2] == 0):\n             timer[2] =59\n             timer[1] -=1\n             timer[2] -=1\n        if (timer[0] ==0 and timer[1] ==0):\n            timer[2] -=1\n\n\n\n\n\n\n\n\n        timeString = pattern.format(timer[0], timer[1], timer[2])\n        timeText.configure(text=timeString)\n    root.after(1000, update_timeText)\n\n\n\n\n\ndef start():\n    global state\n    state = True\n\ndef pause():\n    global state\n    state = False\n\ndef reset():\n    global timer\n    timer = [int(int_), int(dec_), 0] #change values here\n    timeText.configure(str1+str2+str5+str3+str2+str4) #change values here\n\ndef exist():\n    root.destroy()\n\nstate = False\n\n\n\npartstr=str(part_number)\npartstr2=\"Hours until \"\npartstr3=\" is finished\"\nroot = tk.Tk()\nroot.wm_title(partstr2+partstr+partstr3)\n\ntimer = [int(int_), int(dec_), 0] #change values here for reset\npattern = '{0:02d}:{1:02d}:{2:02d}'\n\ntimeText = ttk.Label(root, text=str1+str2+str5+str3+str2+str4, font=\n(\"Helvetica\", 100)) #change values here\ntimeText.pack()\n\nstartButton = tk.Button(root, text='Start', command=start, height = 2, width \n= 10,bg = \"green\",font=('Helvetica MS',15),borderwidth = 4,relief=RIDGE)\nstartButton.pack(side=\"left\")\n\npauseButton = tk.Button(root, text='Pause', command=pause, height = 2, width \n= 10,bg = \"yellow\",font=('Helvetica MS',15),borderwidth = 4,relief=RIDGE)\npauseButton.pack(side=\"left\")\n\nresetButton = tk.Button(root, text='Reset', command=reset, height = 2, width \n= 10,bg = \"red\",font=('Helvetica MS',15),borderwidth = 4,relief=RIDGE)\nresetButton.pack(side=\"right\")\n\nquitButton = tk.Button(root, text='Exit', command=exist, height = 2, width = \n10,bg = \"red\",font=('Helvetica MS',15),borderwidth = 4,relief=RIDGE)\nquitButton.pack(side=\"right\")\n\nw = Label(root, text=\"Part No. \"+partstr, font = \"Times 16 bold\")\nw.pack()\n\n\nw2 = Label(root, text=\"Cycle Time: \"+cycle_time+\" sec\", font = \"Times 16 \nbold\")\nw2.pack()\n\n\nw3 = Label(root, text=\"Number of Cavities: \"+cavities, font = \"Times 16 \nbold\")\nw3.pack()\n\n\nw4 = Label(root, text=\"Total work order amount: \"+work_order_amount, font = \n\"Times 16 bold\")\nw4.pack()\n\n\n\n\n\nupdate_timeText()\nroot.mainloop()\n</code></pre>\n\n<p>The partsperhour values it is pulling from can be seen here:</p>\n\n<pre><code>import tkinter\nfrom tkinter import ttk\ndef main():\n    root = tkinter.Tk()\n    numpad = NumPad(root)\n    root.mainloop()\n\n\n\n\nimport easygui as eg\n\nmessage1 = \"Enter the part number\"\npart_number = eg.enterbox(message1, \"Part Number\",)  \n\nmessage2 = \"Enter the cycle time in seconds\"\ncycle_time = eg.enterbox(message2, \"Cycle time\",)\n\nmessage3 = \"Enter the number of cavities\"\ncavities = eg.enterbox(message3, \"Cavities\",) #User inputs the number of \ncavities\n\nmessage4 = \"Enter the total number required from Work Order\"\nwork_order_amount = eg.enterbox(message4, \"Work Order Amount\",) #total \nnumber of parts needed\n\nparts_per_hour = (3600/float(cycle_time))*int(cavities) #calculates how many \nparts will be produced in 1 hour\n\nhours_to_completion = int(work_order_amount)/int(parts_per_hour) #calculates \nhow many hours in total it will take\n\neg.msgbox(hours_to_completion, \"Hours until complete\")\n</code></pre>\n\n<p>So, essentially when I run the sh file it will perform all the actions from the partsperhour code but after that final box pops up and the user presses \"OK\" the timer does not show up at all. It is worth mentioning that if I were to run the module through IDLE 3 everything works as intended. It is only when I'm trying to use the shell file on the Desktop.</p>\n\n<p>I'm not the most experienced with python but I feel as if I've gotten pretty far with this. If there is anyone that has some input that would be great!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1501705844, "post_id": 45470163, "comment_id": 77901884, "body": "if you change <code>end -1c</code> to <code>end</code> does it help? I believe the <code>-1c</code> takes away the last line from the end count."}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1501705899, "post_id": 45470163, "comment_id": 77901916, "body": "@SierraMountainTech: no. the problem is that if the last line is not visible, dlineinfo returns None."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1501705928, "post_id": 45470163, "comment_id": 77901933, "body": "Ah ok. I will see what I can figure out. It would be helpful if this was set up as a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1501706086, "post_id": 45470163, "comment_id": 77902021, "body": "@SierraMountainTech: the above code is stripped from my application. I&#39;ll go ahead and create a stand alone app that shows the issue... will post it once done"}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1501738254, "post_id": 45470163, "comment_id": 77911481, "body": "@SierraMountainTech: examples is posted, appreciate your help"}], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 4084269, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1dyyRxuVJ2Y/AAAAAAAAAAI/AAAAAAAAAPg/Ie0n46FZeUY/photo.jpg?sz=128", "display_name": "Josselin", "link": "https://stackoverflow.com/users/4084269/josselin"}, "is_accepted": false, "score": 1, "last_activity_date": 1502398101, "last_edit_date": 1502398101, "creation_date": 1502380403, "answer_id": 45618330, "question_id": 45470163, "link": "https://stackoverflow.com/questions/45470163/tkinter-text-how-to-calculate-the-height-of-a-dynamic-string/45618330#45618330", "title": "Tkinter.text - How to calculate the height of a dynamic string?", "body": "<p>I don't know of any built-in method that returns the total number of lines (<strong><em>including wrapped lines</em></strong>) in a tkinter <code>Text</code> widget.</p>\n\n<p>However, you can manually calculate this number by comparing the lengths of the unbroken strings in the Text widget to the Text widget's exact width (minus padding). This is what the <code>LineCounter</code> class below does:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kl4i2.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kl4i2.gif\" alt=\"Screenshot\"></a></p>\n\n<pre><code># python 2.x\n# from tkFont import Font\n\n# python 3.x\nfrom tkinter.font import Font\n\nclass LineCounter():\n    def __init__(self):\n        \"\"\"\" This class can count the total number of lines (including wrapped\n        lines) in a tkinter Text() widget \"\"\"\n\n    def count_total_nb_lines(self, textWidget):\n        # Get Text widget content and split it by unbroken lines\n        textLines = textWidget.get(\"1.0\", \"end-1c\").split(\"\\n\")\n        # Get Text widget wrapping style\n        wrap = text.cget(\"wrap\")\n        if wrap == \"none\":\n            return len(textLines)\n        else:\n            # Get Text widget font\n            font = Font(root, font=textWidget.cget(\"font\"))\n            totalLines_count = 0\n            maxLineWidth_px = textWidget.winfo_width() - 2*text.cget(\"padx\") - 1\n            for line in textLines:\n                totalLines_count += self.count_nb_wrapped_lines_in_string(line,\n                                                    maxLineWidth_px, font, wrap)\n            return totalLines_count\n\n    def count_nb_wrapped_lines_in_string(self, string, maxLineWidth_px, font, wrap):\n        wrappedLines_count = 1\n        thereAreCharsLeftForWrapping = font.measure(string) &gt;= maxLineWidth_px\n        while thereAreCharsLeftForWrapping:\n            wrappedLines_count += 1\n            if wrap == \"char\":\n                string = self.remove_wrapped_chars_from_string(string, \n                                                        maxLineWidth_px, font)\n            else:\n                string = self.remove_wrapped_words_from_string(string, \n                                                        maxLineWidth_px, font)\n            thereAreCharsLeftForWrapping = font.measure(string) &gt;= maxLineWidth_px\n        return wrappedLines_count\n\n    def remove_wrapped_chars_from_string(self, string, maxLineWidth_px, font):\n        avgCharWidth_px = font.measure(string)/float(len(string))\n        nCharsToWrap = int(0.9*maxLineWidth_px/float(avgCharWidth_px))\n        wrapLine_isFull = font.measure(string[:nCharsToWrap]) &gt;= maxLineWidth_px\n        while not wrapLine_isFull:\n            nCharsToWrap += 1\n            wrapLine_isFull = font.measure(string[:nCharsToWrap]) &gt;= maxLineWidth_px\n        return string[nCharsToWrap-1:]\n\n    def remove_wrapped_words_from_string(self, string, maxLineWidth_px, font):\n        words = string.split(\" \")\n        nWordsToWrap = 0\n        wrapLine_isFull = font.measure(\" \".join(words[:nWordsToWrap])) &gt;= maxLineWidth_px\n        while not wrapLine_isFull:\n            nWordsToWrap += 1\n            wrapLine_isFull = font.measure(\" \".join(words[:nWordsToWrap])) &gt;= maxLineWidth_px\n        if nWordsToWrap == 1:\n            # If there is only 1 word to wrap, this word is longer than the Text\n            # widget width. Therefore, wrapping switches to character mode\n            return self.remove_wrapped_chars_from_string(string, maxLineWidth_px, font)\n        else:\n            return \" \".join(words[nWordsToWrap-1:])\n</code></pre>\n\n<p><strong>Example of use</strong>:</p>\n\n<pre><code>import tkinter as tk\n\nroot = tk.Tk()\ntext = tk.Text(root, wrap='word')\ntext.insert(\"1.0\", \"The total number of lines in this Text widget is \" + \n            \"determined accurately, even when the text is wrapped...\")\nlineCounter = LineCounter()\nlabel = tk.Label(root, text=\"0 lines\", foreground=\"red\")\n\ndef show_nb_of_lines(evt):\n    nbLines = lineCounter.count_total_nb_lines(text)\n    if nbLines &lt; 2:\n        label.config(text=\"{} line\".format(nbLines))\n    else:\n        label.config(text=\"{} lines\".format(nbLines))\n\nlabel.pack(side=\"bottom\")\ntext.pack(side=\"bottom\", fill=\"both\", expand=True)\ntext.bind(\"&lt;Configure&gt;\", show_nb_of_lines)\ntext.bind(\"&lt;KeyRelease&gt;\", show_nb_of_lines)\n\nroot.mainloop()\n</code></pre>\n\n<p><strong>In your specific case</strong>, the height of the wrapped text in your <code>ScrolledText</code> can be determined in <code>update_text()</code> as follows:</p>\n\n<pre><code>from tkinter.font import Font\nlineCounter = LineCounter()\n...\nclass GUI():\n    ...\n    def update_text(self, description):\n        ...\n        nbLines = lineCounter.count_total_nb_lines(self.field_description)\n        font = Font(font=self.field_description.cget(\"font\"))\n        lineHeight = font.metrics(\"linespace\")\n        text_height = nbLines * lineHeight \n        ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3343, "user_id": 3159059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1PGj.jpg?s=128&g=1", "display_name": "Gary02127", "link": "https://stackoverflow.com/users/3159059/gary02127"}, "is_accepted": false, "score": 0, "last_activity_date": 1608909175, "creation_date": 1608909175, "answer_id": 65449299, "question_id": 45470163, "link": "https://stackoverflow.com/questions/45470163/tkinter-text-how-to-calculate-the-height-of-a-dynamic-string/65449299#65449299", "title": "Tkinter.text - How to calculate the height of a dynamic string?", "body": "<p>You know the number of lines in your Text. And you can tell when a line is off the scrolled region when <code>dlineinfo</code> returns None. So go through each line and &quot;see&quot; it, to make sure it's visible before you run the <code>dlineinfo()</code> call on it. Then sum them all up, and that's the minimum new height you need for the lines to all appear at the current width. From the height of a line's bbox and the height of the biggest font in the line, you can determine if the line is wrapped, and if so, how many times, if you care about that. The trick is to then use <code>paneconfig()</code> to modify the <em>height</em> of the paned window. Even if the child window would resize automatically normally, the paned window will not. It must be told to resize through the <code>paneconfig()</code> call.</p>\n<p>If you &quot;see&quot; each line before measuring, you'll get all the measurements. And &quot;seeing&quot; each line shouldn't be a big deal since you intend to show them all at the end anyway.</p>\n"}], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1245, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1608909175, "creation_date": 1501704937, "last_edit_date": 1501707218, "question_id": 45470163, "link": "https://stackoverflow.com/questions/45470163/tkinter-text-how-to-calculate-the-height-of-a-dynamic-string", "title": "Tkinter.text - How to calculate the height of a dynamic string?", "body": "<p>I have a <code>Text</code> widget that holds a custom string that contains <code>\\n</code> chars (multiple lines).</p>\n\n<p>The widget is placed within a vertical <code>panedwindow</code> which I want to adjust the <code>panedwindow</code>'s sash to display the whole string in the <code>Text</code> widget.</p>\n\n<p>The string is dynamic by nature (which means, it is being updated by other methods in my application). </p>\n\n<p>As the <code>Text</code> widget is configured with <code>wrap='word'</code>, how can I calculate the string height in pixels to adjust the sash accordingly?</p>\n\n<p>I tried to use <code>text.dlineInfo('end -1c')[1] + text.dlineinfo('end -1c')[3]</code> (for line's y coordinate + height) after the string was loaded to the widget. The problem is that if the last line is not visible, then dlineinfo returns <code>none</code>.</p>\n\n<p>I also tried to use <code>Font.measure</code> routine, but this doesn't include wrap aspects of the <code>Text</code> widget.</p>\n\n<p>Here is a Minimal, Complete, and Verifiable example:</p>\n\n<pre><code>import tkinter\n\nfrom tkinter import scrolledtext\n\nclass GUI():\n        def __init__(self, master):\n                self.master = master\n\n                self.body_frame = tkinter.PanedWindow(self.master, orient='vertical', sashwidth=4)\n                self.body_frame.pack(expand=1, fill='both')\n\n                self.canvas_frame = tkinter.Frame(self.body_frame)\n                self.description_frame = tkinter.Frame(self.body_frame)\n                self.body_frame.add(self.canvas_frame, sticky='nsew')\n                self.body_frame.add(self.description_frame, sticky='nsew')\n\n                tkinter.Button(self.canvas_frame, text='Update Text', command = lambda : self.update_text(\"\"\" \n                A very long string with new lines\n                A very long string with new lines\n                A very long string with new lines\n                A very long string with new lines\n                A very long string with new lines\n                A very long string with new lines\n                \"\"\")).pack(fill='x')\n\n                self.field_description = scrolledtext.ScrolledText(self.description_frame, width=20, wrap='word')\n                self.field_description.pack(expand=1, fill='both')\n\n                self.master.update()\n                self.body_frame.sash_place(0,0,self.body_frame.winfo_height() - 50)     # force sash to be lower\n\n        def update_text(self, description):\n                self.field_description.delete('1.0', 'end')\n                self.field_description.insert('1.0', description)\n\n                height = self.body_frame.winfo_height()\n                lastline_index = self.field_description.index('end - 1c')\n                text_height = self.field_description.dlineinfo(lastline_index)[1] + \\\n                              self.field_description.dlineinfo(lastline_index)[3]\n                self.body_frame.sash_place(0, 0, height - text_height)\n\nroot = tkinter.Tk()\n\nmy_gui = GUI(root)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-imaging-library", "pillow", "perlin-noise"], "comments": [{"owner": {"reputation": 1594, "user_id": 2391370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7356a0c14524580872e815a4d5b2b269?s=128&d=identicon&r=PG", "display_name": "Tammo Heeren", "link": "https://stackoverflow.com/users/2391370/tammo-heeren"}, "edited": false, "score": 1, "creation_date": 1501705368, "post_id": 45470148, "comment_id": 77901610, "body": "I think you may want to condense it down to a more specific section of code. Looks to me like the color mapping isn&#39;t working for you. It seem like things are overflowing. Instead of random numbers, feed in a know number and see if the calculation results in something you would expect."}, {"owner": {"reputation": 49, "user_id": 5509888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f7b7667f5cad14cccc667c89adf11c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_P", "link": "https://stackoverflow.com/users/5509888/jack-p"}, "reply_to_user": {"reputation": 1594, "user_id": 2391370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7356a0c14524580872e815a4d5b2b269?s=128&d=identicon&r=PG", "display_name": "Tammo Heeren", "link": "https://stackoverflow.com/users/2391370/tammo-heeren"}, "edited": false, "score": 0, "creation_date": 1501705480, "post_id": 45470148, "comment_id": 77901661, "body": "@Tammo Heeren I&#39;ve checked the perlin noise function already, and with known test data it does return the correct value. It could be my color mapping, but again it&#39;s the fact that every column has the same colour throughout it"}, {"owner": {"reputation": 49, "user_id": 5509888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f7b7667f5cad14cccc667c89adf11c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_P", "link": "https://stackoverflow.com/users/5509888/jack-p"}, "reply_to_user": {"reputation": 1594, "user_id": 2391370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7356a0c14524580872e815a4d5b2b269?s=128&d=identicon&r=PG", "display_name": "Tammo Heeren", "link": "https://stackoverflow.com/users/2391370/tammo-heeren"}, "edited": false, "score": 0, "creation_date": 1501705769, "post_id": 45470148, "comment_id": 77901841, "body": "When I enter Perlin(1,y,3) vs Perlin (1,q, 3), it returns the same value, so it could be in my implementation of Perlin... (p, q are decimals)"}, {"owner": {"reputation": 1594, "user_id": 2391370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7356a0c14524580872e815a4d5b2b269?s=128&d=identicon&r=PG", "display_name": "Tammo Heeren", "link": "https://stackoverflow.com/users/2391370/tammo-heeren"}, "edited": false, "score": 1, "creation_date": 1501706082, "post_id": 45470148, "comment_id": 77902016, "body": "That should probably not happen, but explains what you see in that there is no variation in y."}, {"owner": {"reputation": 49, "user_id": 5509888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f7b7667f5cad14cccc667c89adf11c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_P", "link": "https://stackoverflow.com/users/5509888/jack-p"}, "reply_to_user": {"reputation": 1594, "user_id": 2391370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7356a0c14524580872e815a4d5b2b269?s=128&d=identicon&r=PG", "display_name": "Tammo Heeren", "link": "https://stackoverflow.com/users/2391370/tammo-heeren"}, "edited": false, "score": 0, "creation_date": 1503766169, "post_id": 45470148, "comment_id": 78754168, "body": "I&#39;ve decided to opt for a prewritten Simplex noise algorithm - Perlin noise does have inherent streakyness, however it shouldnt be this prominent. Thanks anyway :D"}], "owner": {"reputation": 49, "user_id": 5509888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f7b7667f5cad14cccc667c89adf11c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_P", "link": "https://stackoverflow.com/users/5509888/jack-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1501705547, "creation_date": 1501704874, "last_edit_date": 1501705547, "question_id": 45470148, "link": "https://stackoverflow.com/questions/45470148/perlin-noise-looks-streaky-and-not-coherent", "title": "Perlin noise looks streaky and not coherent", "body": "<p>Now that my perlin generator is 'working' I created noise, to find that it is nothing like what I see on the internets...\nMy noise:\n<a href=\"https://i.stack.imgur.com/8vLxt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8vLxt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Notice the streaks:\n<a href=\"https://i.stack.imgur.com/CajUN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CajUN.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I am aiming to get (obviously with corresponding colour):\n<a href=\"https://i.stack.imgur.com/Hj84Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hj84Z.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/8vLxt.png\" rel=\"nofollow noreferrer\">1</a>: \nWhy does mine look so noisy and nasty?</p>\n\n<p>Code (sorry for no stub, the Perlin noise makes up most of the program so it's important to include the full program):</p>\n\n<pre><code>    from PIL import Image\nfrom tkinter import filedialog\nfrom random import randint, random\n\n#Initialise width / height\nwidth = 625\nheight = 625\n\n#Import gradient picture - 200*1 image used to texture perlin noise\n#R,G,B,Alpha\ngradient = Image.open(\"image.png\")\ngradlist = list(gradient.getdata())\n\n#Create new image\nimg = Image.new('RGBA', (width, height), color=(255, 255, 255, 255))\n\n#Perlin noise modules --------------------------------------------------------------------------------------------------------\n\n#Modules\nfrom random import sample\nfrom math import floor\n\np = sample([x for x in range(0, (width * height))], (width * height)) * 2\n\n#Antialising\ndef fade(t):\n    retval = 6*(t**5) - 15*(t**4) + 10*(t**3)\n    return retval\n\n#Linear interpolation\ndef lerp(t,a,b):\n    retval = a + (t * (b - a))\n    return retval\n\n#Clever bitwise hash stuff - picks a unit vector from 12 possible - (1,1,0),(-1,1,0),(1,-1,0),(-1,-1,0),(1,0,1),(-1,0,1),(1,0,-1),(-1,0,-1),(0,1,1),(0,-1,1),(0,1,-1),(0,-1,-1)\ndef grad(hash, x, y, z):\n    h = hash % 15\n    if h &lt; 8:\n        u = x\n    else:\n        u = y\n    if h &lt; 4:\n        v = y\n    elif h in (12, 14):\n        v = x\n    else:\n        v = z\n    return (u if (h &amp; 1) == 0 else -u) + (v if (h &amp; 2) == 0 else -v)\n\n#Perlin function\ndef perlin(x,y,z):\n    ix = int(floor(x)) &amp; 255\n    iy = int(floor(y)) &amp; 255\n    iz = int(floor(z)) &amp; 255\n    x -= int(floor(x))\n    y -= int(floor(y))\n    z -= int(floor(z))\n    u = fade(x)\n    v = fade(y)\n    w = fade(z)\n    #Complicated hash stuff\n    A = p[ix] + iy\n    AA = p[A] + iz\n    AB = p[A + 1] + iz\n    B = p[ix + 1] + iy\n    BA = p[B] + iz\n    BB = p[B + 1] + iz\n    return -lerp(w, lerp(v, lerp(u, grad(p[AA], x, y, z),grad(p[BA], x - 1, y, z)),lerp(u, grad(p[AB], x, y - 1, z),grad(p[BB], x - 1, y - 1, z))),lerp(v, lerp(u, grad(p[AA + 1], x, y, z - 1),grad(p[BA + 1], x - 1, y, z - 1)), lerp(u, grad(p[AB + 1], x, y - 1, z - 1),grad(p[BB + 1], x - 1, y - 1, z - 1))))\n\n\ndef octavePerlin(x,y,z,octaves,persistence):\n    total = 0\n    frequency = 1\n    amplitude = 1\n    maxValue = 0\n    for x in range(octaves):\n        total += perlin(x * frequency, y * frequency, z * frequency) * amplitude\n        maxValue += amplitude\n        amplitude *= persistence\n        frequency *= 2\n    return total / maxValue\n\nz = random()\nimg.putdata([gradlist[int(octavePerlin((x + random() - 0.5) / 1000, (y + random() - 0.5) / 1000, z, 4, 2) * 100 + 100)] for x in range(width) for y in range(height)])\nimg.save(filedialog.asksaveasfilename() + \".png\", \"PNG\")\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3237, "user_id": 4626788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-d5Ate3B4CBg/AAAAAAAAAAI/AAAAAAAACGo/9xaOH3aF-y8/photo.jpg?sz=128", "display_name": "Neeraj Kumar", "link": "https://stackoverflow.com/users/4626788/neeraj-kumar"}, "edited": false, "score": 0, "creation_date": 1501704968, "post_id": 45470139, "comment_id": 77901397, "body": "it&#39;s not flag it&#39;s a user table field in django"}, {"owner": {"reputation": 1409, "user_id": 3848720, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/aOWBm.png?s=128&g=1", "display_name": "tdsymonds", "link": "https://stackoverflow.com/users/3848720/tdsymonds"}, "edited": false, "score": 0, "creation_date": 1501751071, "post_id": 45470139, "comment_id": 77919633, "body": "As per the comment above, it&#39;s a field in the user model. Please provide more details about what you&#39;re trying to do, as there may be a way to help but you&#39;ve given us very limited information to go on. Thanks"}], "owner": {"reputation": 71, "user_id": 2230794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b7e2179f6837a12aae6aa778371f72?s=128&d=identicon&r=PG", "display_name": "nicholaspoz", "link": "https://stackoverflow.com/users/2230794/nicholaspoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501704853, "creation_date": 1501704853, "question_id": 45470139, "link": "https://stackoverflow.com/questions/45470139/can-you-change-the-name-of-the-django-admin-is-staff-flag", "title": "can you change the name of the Django admin &#39;is_staff&#39; flag", "body": "<p>I need to change the name of the is_staff flag in django admin.</p>\n"}]