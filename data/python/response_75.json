[{"tags": ["python", "apache-spark", "pyspark", "spark-dataframe"], "answers": [{"tags": [], "owner": {"reputation": 526, "user_id": 6305170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFCyw.jpg?s=128&g=1", "display_name": "dfernig", "link": "https://stackoverflow.com/users/6305170/dfernig"}, "is_accepted": false, "score": 0, "last_activity_date": 1489779580, "creation_date": 1489779580, "answer_id": 42865859, "question_id": 37847697, "link": "https://stackoverflow.com/questions/37847697/pyspark-merging-lists-which-are-in-dataframe-column/42865859#42865859", "title": "Pyspark: Merging lists which are in dataframe column", "body": "<p>You are trying to solve the connected components problem. I'd take a look at the <a href=\"https://graphframes.github.io/user-guide.html#connected-components\" rel=\"nofollow noreferrer\">GraphFrames docs</a>.</p>\n"}], "owner": {"reputation": 2152, "user_id": 6326739, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8da8de491899a4fddf6cd2435518cc87?s=128&d=identicon&r=PG&f=1", "display_name": "sjishan", "link": "https://stackoverflow.com/users/6326739/sjishan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1489779580, "creation_date": 1466035058, "question_id": 37847697, "link": "https://stackoverflow.com/questions/37847697/pyspark-merging-lists-which-are-in-dataframe-column", "title": "Pyspark: Merging lists which are in dataframe column", "body": "<p>I have a dataframe as shown below. I want to merge the lists if they have atleast one same value. It is okay to take any of the component number. For example, <strong>[1,2]</strong> and <strong>[1,4,9]</strong> has <strong>1</strong> as common value. So both will be merged to <strong>[1,2,4,9]</strong>. Now <strong>[1,2]</strong> has component number <strong>80</strong> and and <strong>[1,4,9]</strong> has component number <strong>30</strong>. For <strong>[1,2,4,9]</strong> it is okay to have any one of them as component number. In the example given below, I have considered <strong>30</strong>.</p>\n\n<p><img src=\"https://i.imgur.com/dHJMmoy.png\" alt=\"\"></p>\n\n<p>It is possible to have a solution using dataframe or rdd operation avoiding as much iteration as possible? Thanks.</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 2211, "user_id": 1667840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a0eb2aabd323d1e50b4f8fe0caf59b1?s=128&d=identicon&r=PG&f=1", "display_name": "gidim", "link": "https://stackoverflow.com/users/1667840/gidim"}, "edited": false, "score": 3, "creation_date": 1466036087, "post_id": 37847654, "comment_id": 63155436, "body": "see <a href=\"http://stackoverflow.com/questions/6269765/what-does-the-b-character-do-in-front-of-a-string-literal\" title=\"what does the b character do in front of a string literal\">stackoverflow.com/questions/6269765/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 6467600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4743a954d7398b3cc628515cb2f968b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Chang", "link": "https://stackoverflow.com/users/6467600/michael-chang"}, "reply_to_user": {"reputation": 2211, "user_id": 1667840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a0eb2aabd323d1e50b4f8fe0caf59b1?s=128&d=identicon&r=PG&f=1", "display_name": "gidim", "link": "https://stackoverflow.com/users/1667840/gidim"}, "edited": false, "score": 0, "creation_date": 1466046616, "post_id": 37847654, "comment_id": 63157682, "body": "Thank you for your help!"}], "owner": {"reputation": 21, "user_id": 6467600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4743a954d7398b3cc628515cb2f968b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Chang", "link": "https://stackoverflow.com/users/6467600/michael-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "closed_date": 1466062940, "answer_count": 0, "score": 0, "last_activity_date": 1466035911, "creation_date": 1466034734, "last_edit_date": 1466035911, "question_id": 37847654, "link": "https://stackoverflow.com/questions/37847654/tensorflow-setup-issue", "closed_reason": "Duplicate", "title": "TensorFlow Setup Issue", "body": "<p>I just setup TensorFlow on my MacBook Pro (El Capitan) and ran the installation test suggested on the website. This is what shows up:</p>\n\n<pre><code>hello = tf.constant('Hello, TensorFlow!')\nsess = tf.Session()\nprint(sess.run(hello))\n</code></pre>\n\n<blockquote>\n  <p><strong>b'Hello, TensorFlow!'</strong></p>\n</blockquote>\n\n<p>Are the \"b\" and quotations around Hello, TensorFlow a result of something wrong done during installation? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1466034807, "post_id": 37847647, "comment_id": 63155173, "body": "I can&#39;t reproduce this issue in Python 2.7.9. <code>&quot;Ant&#243;nio&quot;[5:7]</code> gives <code>&quot;io&quot;</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466034884, "post_id": 37847647, "comment_id": 63155192, "body": "Python 2 or Python 3? Also, to do this properly and understand the solution, you may need to read up on exactly what a &quot;character&quot; is. The <a href=\"http://unicode.org/faq/char_combmark.html\" rel=\"nofollow noreferrer\">Unicode FAQ</a> may be a good starting point, particularly <a href=\"http://unicode.org/faq/char_combmark.html#7\" rel=\"nofollow noreferrer\">&quot;How are characters counted...&quot;</a>."}, {"owner": {"reputation": 3485, "user_id": 1483503, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/652348761699d4193e073409caa287d6?s=128&d=identicon&r=PG", "display_name": "mljrg", "link": "https://stackoverflow.com/users/1483503/mljrg"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466035315, "post_id": 37847647, "comment_id": 63155284, "body": "@user2357112 Nice link. But what is the Python 2.7.11 API for counting the characters correctly and get the right substring? Note that I am reading the lines from a file that I opened via <code>open(file, mode = &#39;rU&#39;)</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466035624, "post_id": 37847647, "comment_id": 63155341, "body": "@mljrg: &quot;Correctly&quot; is complicated and depends on what concept of &quot;character&quot; you&#39;re dealing with. You might even need a third-party module, such as <a href=\"http://uniseg-python.readthedocs.io/en/latest/graphemecluster.html\" rel=\"nofollow noreferrer\"><code>uniseg.graphemecluster</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 3485, "user_id": 1483503, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/652348761699d4193e073409caa287d6?s=128&d=identicon&r=PG", "display_name": "mljrg", "link": "https://stackoverflow.com/users/1483503/mljrg"}, "edited": false, "score": 0, "creation_date": 1466035158, "post_id": 37847672, "comment_id": 63155258, "body": "ok, but what if the string is a line read from a file? I cannot do that you suggest. Is there a way to convert the line to Unicode? This is not working when I open the file with this: <code>open(file, mode = &#39;rU&#39;)</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1466035182, "post_id": 37847672, "comment_id": 63155263, "body": "This may still produce unexpected results with combining characters. If that <code>&#243;</code> is a regular <code>o</code> and a combining acute accent, it&#39;ll still show up as two characters to <code>len</code> and slicing."}, {"owner": {"reputation": 30464, "user_id": 203568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914a7c50b970346e442b3e4b0a7e73f8?s=128&d=identicon&r=PG", "display_name": "bgporter", "link": "https://stackoverflow.com/users/203568/bgporter"}, "edited": false, "score": 0, "creation_date": 1466087330, "post_id": 37847672, "comment_id": 63181399, "body": "Yep, Unicode in Python 2.x is problematic. When working with file data, you need to know what its encoding was, and then decode from that encoding (on disk) into Unicode (in memory). The clearest explanation I&#39;ve read is Ned Batchelder&#39;s &#39;Pragmatic Unicode&#39; -- <a href=\"http://nedbatchelder.com/text/unipain.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/unipain.html</a>"}], "tags": [], "owner": {"reputation": 30464, "user_id": 203568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914a7c50b970346e442b3e4b0a7e73f8?s=128&d=identicon&r=PG", "display_name": "bgporter", "link": "https://stackoverflow.com/users/203568/bgporter"}, "is_accepted": false, "score": 2, "last_activity_date": 1466034893, "creation_date": 1466034893, "answer_id": 37847672, "question_id": 37847647, "link": "https://stackoverflow.com/questions/37847647/string-slicing-not-working-for-accented-characters/37847672#37847672", "title": "String slicing not working for accented characters", "body": "<p>In Python 2.7, strings and unicode strings are different objects. To declare a Unicode string literal, prefix it with a <code>u</code>:</p>\n\n<pre><code>Python 2.7.10 (default, Oct 23 2015, 19:19:21)\n[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; s = \"Ant\u00f3nio\"\n&gt;&gt;&gt; len(s)\n8\n&gt;&gt;&gt; s2 = u\"Ant\u00f3nio\"\n&gt;&gt;&gt; len(s2)\n7\n&gt;&gt;&gt; s[5:7]\n'ni'\n&gt;&gt;&gt; s2[5:7]\nu'io'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3485, "user_id": 1483503, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/652348761699d4193e073409caa287d6?s=128&d=identicon&r=PG", "display_name": "mljrg", "link": "https://stackoverflow.com/users/1483503/mljrg"}, "is_accepted": true, "score": 1, "last_activity_date": 1466037444, "creation_date": 1466037444, "answer_id": 37848028, "question_id": 37847647, "link": "https://stackoverflow.com/questions/37847647/string-slicing-not-working-for-accented-characters/37848028#37848028", "title": "String slicing not working for accented characters", "body": "<p>I finally found the answer to my problem. I just have to read the text file like this:</p>\n\n<pre><code>import codecs\nwith codecs.open(ficheiro, encoding='utf-8') as fin:\n    for line in fin:\n       ...  # then here line[5:7] will work correctly for \"Ant\u00f3nio\" and \"Antonio\"\n</code></pre>\n\n<p>Thanks to Derek Dohler who wrote <a href=\"https://www.azavea.com/blog/2014/03/24/solving-unicode-problems-in-python-2-7/\" rel=\"nofollow\" title=\"Solving unicode problems in Python 2.7\">Solving Unicode Problems in Python 2.7</a></p>\n"}], "owner": {"reputation": 3485, "user_id": 1483503, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/652348761699d4193e073409caa287d6?s=128&d=identicon&r=PG", "display_name": "mljrg", "link": "https://stackoverflow.com/users/1483503/mljrg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 37848028, "answer_count": 2, "score": 0, "last_activity_date": 1466037444, "creation_date": 1466034694, "last_edit_date": 1466034926, "question_id": 37847647, "link": "https://stackoverflow.com/questions/37847647/string-slicing-not-working-for-accented-characters", "title": "String slicing not working for accented characters", "body": "<p>String slicing in Python 2.7 is very useful to get a substring. This works nicely for ASCII characters, for example</p>\n\n<pre><code>&gt;&gt;&gt; s = \"Antonio\"\n&gt;&gt;&gt; s[5:7]\n'io'\n</code></pre>\n\n<p>but fails in the presence of accented characters, for example</p>\n\n<pre><code>&gt;&gt;&gt; s = \"Ant\u00f3nio\"\n&gt;&gt;&gt; s[5:7]\n'ni'\n</code></pre>\n\n<p>What is the safe way to get the correct substring irrespective of the characters present in the original string?</p>\n\n<p><strong>UPDATE</strong> My configuration info is the following:</p>\n\n<pre><code>Python 2.7.11 (v2.7.11:6d1b6a68f775, Dec  5 2015, 12:54:16) \n[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "django", "generics", "view", "model"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 1, "creation_date": 1466036163, "post_id": 37847610, "comment_id": 63155449, "body": "please also add your model"}], "answers": [{"tags": [], "owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "is_accepted": true, "score": 2, "last_activity_date": 1466038959, "last_edit_date": 1466038959, "creation_date": 1466038475, "answer_id": 37848160, "question_id": 37847610, "link": "https://stackoverflow.com/questions/37847610/how-can-i-access-the-elements-of-a-foreign-set-for-a-model-in-djangos-get-conte/37848160#37848160", "title": "How can I access the elements of a foreign set for a model in Django&#39;s get_context_data method?", "body": "<p>You are referring to the <em>model</em>, you need to refer to the <em>instance</em> (the object for which the view is showing the details) as relations are for instances and not models. You can get the instance with <code>self.get_object()</code>:</p>\n\n<pre><code>def get_context_data(self, **kwargs):\n    context = super(QuizDetail, self).get_context_data(**kwargs)\n    obj = self.get_object()\n    passed_questions = obj.quizquestion_set.filter(...)\n    return context\n</code></pre>\n"}], "owner": {"reputation": 1161, "user_id": 1693475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoB22.jpg?s=128&g=1", "display_name": "phantomraa", "link": "https://stackoverflow.com/users/1693475/phantomraa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1502, "favorite_count": 0, "accepted_answer_id": 37848160, "answer_count": 1, "score": 1, "last_activity_date": 1466038959, "creation_date": 1466034462, "last_edit_date": 1466038040, "question_id": 37847610, "link": "https://stackoverflow.com/questions/37847610/how-can-i-access-the-elements-of-a-foreign-set-for-a-model-in-djangos-get-conte", "title": "How can I access the elements of a foreign set for a model in Django&#39;s get_context_data method?", "body": "<p>I have a generic <code>DetailView</code> in Django 1.9.7, which uses my model <code>Quiz</code> to show a super-time-saving no-hassle view (thank you Django). However, I'm struggling to access a related foreign key set on my <code>Quiz</code> object (a set of <code>QuizQuestion</code> objects). My model is as follows:</p>\n\n<pre><code>class QuizQuestion(models.Model):\n    quiz = models.ForeignKey(Quiz, on_delete=models.CASCADE)\n    question = models.ForeignKey(Question, on_delete=models.CASCADE)\n    question_index = models.IntegerField()\n    user_answer_text = models.CharField(max_length=1000)\n    date_answered = models.DateTimeField(null=True)\n    user_is_correct = models.NullBooleanField()\n\n    def __str__(self):\n        return self.user_answer_text\n</code></pre>\n\n<p>Here's my view:</p>\n\n<pre><code>class QuizDetail(generic.DetailView):\nmodel = Quiz\n\ndef get_context_data(self, **kwargs):\n    context = super(QuizDetail, self).get_context_data(**kwargs)\n\n    # Pass/fail chart\n    passed_questions = self.model.quizquestion_set.objects.filter(user_is_correct=True)\n\n    # ...\n\n    return context\n</code></pre>\n\n<p>This gives me <strong>'ReverseManyToOneDescriptor' object has no attribute 'objects'</strong>.</p>\n\n<p>I'm not sure if trying to get the related objects using the <code>_set</code> is preferable to scooting around the long way and asking for <code>QuizQuestion.objects.filter(...)</code>, but I'm operating on the basis that it is. Please correct me if I'm mistaken :)</p>\n\n<p><code>self.model.quizquestion_set.filter(user_is_correct=True)</code> gives: <strong>''ReverseManyToOneDescriptor' object has no attribute 'filter''</strong></p>\n\n<p><code>passed_questions = self.model.quizquestion_set.all()</code> gives <strong>'ReverseManyToOneDescriptor' object has no attribute 'all'</strong></p>\n\n<p><em>P.S. I find it quite obvious that I am relatively new to Django - apologies for any silly mistakes.</em></p>\n"}, {"tags": ["python", "sockets"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466035099, "post_id": 37847601, "comment_id": 63155243, "body": "Please <a href=\"https://stackoverflow.com/posts/37847601/edit\">edit</a> your question and add the <b>full text</b> of any errors or tracebacks, including line numbers that match up to the code you posted. &quot;Abbreviating&quot; may remove vital information. Also, please post the <b>exact</b> code you&#39;re running - don&#39;t comment out sections you&#39;re running in reality. You really also should get rid of all those extraneous <code>pass</code> statements."}, {"owner": {"reputation": 33, "user_id": 3525626, "user_type": "registered", "profile_image": "https://graph.facebook.com/631555173/picture?type=large", "display_name": "ThePeter", "link": "https://stackoverflow.com/users/3525626/thepeter"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466036116, "post_id": 37847601, "comment_id": 63155440, "body": "The abbreviations were to simply remove the imported threading.py file lines. There was only one pass statement that I left in there accidentally -- chat_input has not been written."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466036313, "post_id": 37847601, "comment_id": 63155469, "body": "<b>PLEASE DO NOT POST TEXT AS IMAGES</b>. Copy and paste the text into your question. Images are not searchable, and can not be interpreted by screen readers for those with visual impairments. Use the <a href=\"https://stackoverflow.com/posts/37847601/edit\">edit</a> link to modify your question. See <a href=\"http://meta.stackoverflow.com/a/285557/1426065\">this</a> for more information."}, {"owner": {"reputation": 33, "user_id": 3525626, "user_type": "registered", "profile_image": "https://graph.facebook.com/631555173/picture?type=large", "display_name": "ThePeter", "link": "https://stackoverflow.com/users/3525626/thepeter"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466037188, "post_id": 37847601, "comment_id": 63155677, "body": "Now is everything up to par for you?"}], "owner": {"reputation": 33, "user_id": 3525626, "user_type": "registered", "profile_image": "https://graph.facebook.com/631555173/picture?type=large", "display_name": "ThePeter", "link": "https://stackoverflow.com/users/3525626/thepeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466036710, "creation_date": 1466034376, "last_edit_date": 1466036710, "question_id": 37847601, "link": "https://stackoverflow.com/questions/37847601/python-chat-server-with-threads-and-multiclients", "title": "Python Chat Server with Threads and multiclients", "body": "<p>My goal is to take a provided framework python file and add the functionality to make a <strong>chat server</strong> that handles multiple clients. I have done edits in the chat_output, server, and client functions.</p>\n\n<p>First step is to get the client to connect without issues.\nThen I would need to add a raw_input() call so that a user can type something, send it to the server, and then have the server sendall() to the clients.</p>\n\n<pre><code>import socket\nimport time\n\ndef timestamp():\n    result = int(time.time())\n    return result\n\n\nclass Stream(object):\n    \" abstract \"\n    def write(self,data):\n        pass\n    def read(self):\n        pass\n\nclass TCPStream(Stream):\n    def __init__(self,the_socket):\n        self.s = the_socket\n        self.address = None\n    def read(self,amount=None):\n        if amount is None:\n            return self.s.recv(4096)\n        else:\n            return self.s.recv(amount)\n    def set_address(self,address):\n        self.address = address\n    def get_address(self):\n        return self.address\n    def write(self,data):\n        self.s.sendall(data)\n    def __del__(self):\n        self.s.close()\n    def shutdown(self):\n        self.s.shutdown(socket.SHUT_WR)\n\nclass Socket(object):\n    pass\n\nclass TCPBaseSocket(Socket):\n    def __init__(self,port):\n        self.s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n        self.port = port\n\nclass TCPReceivingSocket(TCPBaseSocket):\n    def __init__(self,port,address=''):\n        super().__init__(port)\n        self.s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n        self.s.bind((address,self.port))\n        self.s.listen(1)\n    def connection(self):\n        sc, sockname = self.s.accept()\n        result = TCPStream(sc)\n        result.set_address(sockname)\n        return result\n\nclass TCPSendingSocket(TCPBaseSocket):\n    def __init__(self,port,address):\n        super().__init__(port)\n        self.s.connect((address,port))\n        self._stream = TCPStream(self.s)\n        self._stream.set_address((address,port))\n    def stream(self):\n        return self._stream\n\nif __name__ == \"__main__\":\n    import argparse\n    import threading\n    import sys\n\n    def chat_input(stream):\n        \"\"\"\n            Enter your code here, shouldn't need to be more than 10 lines of code\n        \"\"\"\n\n        pass\n\n    def chat_output(stream):        \n        \"\"\"\n        Enter your code here, shouldn't need to be more than 10 lines of code\n        \"\"\"\n\n        #stream = TCPStream(stream)\n        s = TCPStream(stream)\n        while True:\n            data = s.read()    #s.recv(4096)\n            if not data:\n                print(\"Disconnected from chat server\")\n                break\n            #stream.write(data)      #sendall(data)\n\n\n\n    def server(interface,port):\n        \"\"\"\n        Enter your code here, shouldn't need to be more than 10 lines of code\n        \"\"\"\n\n        tsc = TCPReceivingSocket(port, interface)\n        print(\"Server is running.....\\n\")\n\n        addr = tsc.connection().get_address()\n        print(addr, \" is now connected!\\n\")\n\n\n        server_input_thread = threading.Thread(target = chat_input, args = (tsc,))\n        server_output_thread = threading.Thread(target = chat_output, args = (tsc,))\n\n        server_input_thread.start()\n        server_output_thread.start()\n        server_input_thread.join()\n        server_output_thread.join()\n\n    def client(interface,port):\n        \"\"\"\n        Enter your code here, shouldn't need to be more than 10 lines of code\n        \"\"\"\n        tsc = TCPSendingSocket(port, interface)\n\n\n        client_input_thread = threading.Thread(target = chat_input, args=(tsc,))\n        client_output_thread = threading.Thread(target = chat_output, args=(tsc,))\n\n        client_input_thread.start()\n        client_output_thread.start()\n        client_input_thread.join()\n        client_output_thread.join()\n\n    choices = {'client':client,'server':server}\n    parser = argparse.ArgumentParser(description='Chat via TCP')\n    parser.add_argument('role',choices=choices,help=\"which role to take\")\n    parser.add_argument('host',help='interface the server listens at; host the client sends to')\n    parser.add_argument('-p',metavar='PORT',type=int,default=1060,help='TCP port (default 1060)')\n    args = parser.parse_args()\n    function=choices[args.role]\n    function(args.host,args.p)\n</code></pre>\n\n<p>For those who are running this, use the command line:</p>\n\n<blockquote>\n  <p>python3 [filename].py server localhost</p>\n  \n  <p>python3 [filename].py client localhost</p>\n</blockquote>\n\n<hr>\n\n<p>When I run:\nThe server connects. Now how do I work with the TCPStream object? The parameter is supposed to be passed a 'stream' object but it's a TCPR/Ssocket</p>\n\n<p>Server:</p>\n\n<pre><code>E:\\School\\CSIS\\440\\Assignment7&gt;py talk.py server localhost\nServer is running.....\n\n('127.0.0.1', 53829)  is now connected!\n\nException in thread Thread-2:\nTraceback (most recent call last):\n  File \"E:\\School\\Python\\lib\\threading.py\", line 914, in _bootstrap_inner\n    self.run()\n  File \"E:\\School\\Python\\lib\\threading.py\", line 862, in run\n    self._target(*self._args, **self._kwargs)\n  File \"talk.py\", line 85, in chat_output\n    data = s.read()    #s.recv(4096)\n  File \"talk.py\", line 22, in read\n    return self.s.recv(4096)\nAttributeError: 'TCPReceivingSocket' object has no attribute 'recv'\n\nException ignored in: &lt;bound method TCPStream.__del__ of &lt;__main__.TCPStream obj\nect at 0x010B68B0&gt;&gt;\nTraceback (most recent call last):\n  File \"talk.py\", line 32, in __del__\n    self.s.close()\nAttributeError: 'TCPReceivingSocket' object has no attribute 'close'\n\nE:\\School\\CSIS\\440\\Assignment7&gt;\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>E:\\School\\CSIS\\440\\Assignment7&gt;py talk.py client localhost\nException in thread Thread-2:\nTraceback (most recent call last):\n  File \"E:\\School\\Python\\lib\\threading.py\", line 914, in _bootstrap_inner\n    self.run()\n  File \"E:\\School\\Python\\lib\\threading.py\", line 862, in run\n    self._target(*self._args, **self._kwargs)\n  File \"talk.py\", line 85, in chat_output\n    data = s.read()    #s.recv(4096)\n  File \"talk.py\", line 22, in read\n    return self.s.recv(4096)\nAttributeError: 'TCPSendingSocket' object has no attribute 'recv'\n\nException ignored in: &lt;bound method TCPStream.__del__ of &lt;__main__.TCPStream obj\nect at 0x00C068F0&gt;&gt;\nTraceback (most recent call last):\n  File \"talk.py\", line 32, in __del__\n    self.s.close()\nAttributeError: 'TCPSendingSocket' object has no attribute 'close'\n\nE:\\School\\CSIS\\440\\Assignment7&gt;\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "is_accepted": false, "score": 3, "last_activity_date": 1466034026, "creation_date": 1466034026, "answer_id": 37847551, "question_id": 37847531, "link": "https://stackoverflow.com/questions/37847531/gender-input-loop-keeps-repeating-even-if-i-enter-m-or-f/37847551#37847551", "title": "gender input loop keeps repeating even if I enter &quot;m&quot; or &quot;f&quot;", "body": "<p>Just say <code>gender</code> is <code>m</code>. Look at this statement:</p>\n\n<pre><code>while gender != 'm' or gender != 'f':\n</code></pre>\n\n<p>Is <code>gender!='m'</code>? No. <code>Or</code>... Is <code>gender!='f'</code>? Yes! OK, keep <code>while</code>ing!</p>\n\n<p>You don't want <code>or</code>, you want <code>and</code></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1592750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GWfiE.png?s=128&g=1", "display_name": "R&#233;mi Lepage", "link": "https://stackoverflow.com/users/1592750/r%c3%a9mi-lepage"}, "is_accepted": false, "score": 0, "last_activity_date": 1466034076, "creation_date": 1466034076, "answer_id": 37847559, "question_id": 37847531, "link": "https://stackoverflow.com/questions/37847531/gender-input-loop-keeps-repeating-even-if-i-enter-m-or-f/37847559#37847559", "title": "gender input loop keeps repeating even if I enter &quot;m&quot; or &quot;f&quot;", "body": "<p>Because of this line :\n<code>while gender != 'm' or gender != 'f':</code></p>\n\n<p>Use instead :\n<code>while gender != 'm' and gender != 'f':</code> </p>\n\n<p><code>gender</code> cannot simultaneously contain 'm' and 'f'</p>\n"}, {"tags": [], "owner": {"reputation": 917, "user_id": 5759063, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-1eAgvsus1Fk/AAAAAAAAAAI/AAAAAAAAAGw/i5CaZxtNOug/photo.jpg?sz=128", "display_name": "Sreejith Menon", "link": "https://stackoverflow.com/users/5759063/sreejith-menon"}, "is_accepted": false, "score": 0, "last_activity_date": 1466034136, "creation_date": 1466034136, "answer_id": 37847571, "question_id": 37847531, "link": "https://stackoverflow.com/questions/37847531/gender-input-loop-keeps-repeating-even-if-i-enter-m-or-f/37847571#37847571", "title": "gender input loop keeps repeating even if I enter &quot;m&quot; or &quot;f&quot;", "body": "<p>The basic fundamental </p>\n\n<p>True or True : True</p>\n\n<p><strong>True or False : True</strong></p>\n\n<p><strong>False or True : True</strong></p>\n\n<p>False or False : False</p>\n\n<p>You have to continue asking for input as long as both the conditions are not satisfied.</p>\n\n<p>Or has to be replaced by 'and'.</p>\n"}, {"tags": [], "owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "is_accepted": false, "score": 0, "last_activity_date": 1466034629, "creation_date": 1466034629, "answer_id": 37847635, "question_id": 37847531, "link": "https://stackoverflow.com/questions/37847531/gender-input-loop-keeps-repeating-even-if-i-enter-m-or-f/37847635#37847635", "title": "gender input loop keeps repeating even if I enter &quot;m&quot; or &quot;f&quot;", "body": "<p>Try:   </p>\n\n<pre><code>gender = raw_input('m/f?')\n\nwhile True: \n    print(\"Type 'm' or 'f'\") \n    gender = raw_input('m/f? ') \n    if gender=='m' or gender=='f':\n        break\n\nif gender == 'm': \n    gender = 'him' \nelif gender == 'f': \n    gender = 'her' \n</code></pre>\n\n<p>print(\"It read {}\".format(gender))</p>\n"}, {"tags": [], "owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1466034801, "creation_date": 1466034801, "answer_id": 37847661, "question_id": 37847531, "link": "https://stackoverflow.com/questions/37847531/gender-input-loop-keeps-repeating-even-if-i-enter-m-or-f/37847661#37847661", "title": "gender input loop keeps repeating even if I enter &quot;m&quot; or &quot;f&quot;", "body": "<p>There's a number of answers already, but I think the most Pythonic way, which also eliminates the AND/OR confusion is, and is easily extendable if you want to add, say, <code>o</code> for <code>other</code></p>\n\n<pre><code>while gender not in 'mf':\n</code></pre>\n\n<p>That is, while <code>gender</code> is not present in the list of genders.</p>\n"}, {"tags": [], "owner": {"reputation": 391, "user_id": 5112633, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1086561054690729/picture?type=large", "display_name": "init fail", "link": "https://stackoverflow.com/users/5112633/init-fail"}, "is_accepted": false, "score": 0, "last_activity_date": 1466035003, "creation_date": 1466035003, "answer_id": 37847687, "question_id": 37847531, "link": "https://stackoverflow.com/questions/37847531/gender-input-loop-keeps-repeating-even-if-i-enter-m-or-f/37847687#37847687", "title": "gender input loop keeps repeating even if I enter &quot;m&quot; or &quot;f&quot;", "body": "<p>In your while, you are checking to see if either the string gender does not equal 'm' OR 'f', which will always be the case because it cannot be both.</p>\n\n<p>Change or to and to fix this.</p>\n"}], "owner": {"reputation": 33, "user_id": 6472011, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_eBuSm_7Q7Q/AAAAAAAAAAI/AAAAAAAAABU/ktT5cQtYq28/photo.jpg?sz=128", "display_name": "11swallowedinthesea", "link": "https://stackoverflow.com/users/6472011/11swallowedinthesea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1466035003, "creation_date": 1466033862, "last_edit_date": 1466034383, "question_id": 37847531, "link": "https://stackoverflow.com/questions/37847531/gender-input-loop-keeps-repeating-even-if-i-enter-m-or-f", "title": "gender input loop keeps repeating even if I enter &quot;m&quot; or &quot;f&quot;", "body": "<p>If it's not m or f, repeat prompt until it's either or. I typed m or f, but the loop keeps repeating. Why? </p>\n\n<pre><code>gender = input('m/f? ')\n\nwhile gender != 'm' or gender != 'f': \n    print(\"Type 'm' or 'f'\") \n    gender = input('m/f? ') \nif gender == 'm': \n    gender = 'him' \nelif gender == 'f': \n    gender = 'her' \n\nprint(\"It read {}\".format(gender))\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 2368226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e58e0e12106ebf9067a1acd01ddf1505?s=128&d=identicon&r=PG", "display_name": "megadarkfriend", "link": "https://stackoverflow.com/users/2368226/megadarkfriend"}, "edited": false, "score": 0, "creation_date": 1466034986, "post_id": 37847638, "comment_id": 63155218, "body": "This doesn&#39;t give me the missing value. I want a row for the missing value to be added whose Value will be NaN"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 187, "user_id": 2368226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e58e0e12106ebf9067a1acd01ddf1505?s=128&d=identicon&r=PG", "display_name": "megadarkfriend", "link": "https://stackoverflow.com/users/2368226/megadarkfriend"}, "edited": false, "score": 0, "creation_date": 1466035102, "post_id": 37847638, "comment_id": 63155245, "body": "I believe this takes care of that."}, {"owner": {"reputation": 187, "user_id": 2368226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e58e0e12106ebf9067a1acd01ddf1505?s=128&d=identicon&r=PG", "display_name": "megadarkfriend", "link": "https://stackoverflow.com/users/2368226/megadarkfriend"}, "edited": false, "score": 0, "creation_date": 1466035247, "post_id": 37847638, "comment_id": 63155273, "body": "You are correct, the values had not persisted. Thanks for the solution"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1466035092, "last_edit_date": 1466035092, "creation_date": 1466034654, "answer_id": 37847638, "question_id": 37847521, "link": "https://stackoverflow.com/questions/37847521/reindex-sorted-pandas-dataframe/37847638#37847638", "title": "reindex sorted pandas dataframe", "body": "<p>Try this:</p>\n\n<pre><code>df.set_index(['Column A', 'Column B', 'Date']).unstack().stack(dropna=False).sort_index(level=[2, 0]).reset_index()\n\n   Column A  Column B        Date  Value\n0         A         1  2011-01-01   10.0\n1         B         1  2011-01-01   10.0\n2         A         2  2011-01-01   10.0\n3         B         2  2011-01-01   10.0\n4         A         1  2011-01-02   10.0\n5         B         1  2011-01-02   10.0\n6         A         2  2011-01-02   10.0\n7         B         2  2011-01-02   10.0\n8         A         1  2011-01-03   10.0\n9         B         1  2011-01-03   10.0\n10        A         2  2011-01-03    NaN\n11        B         2  2011-01-03   10.0\n</code></pre>\n\n<h3>Note: row 10 has the missing value NaN</h3>\n"}], "owner": {"reputation": 187, "user_id": 2368226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e58e0e12106ebf9067a1acd01ddf1505?s=128&d=identicon&r=PG", "display_name": "megadarkfriend", "link": "https://stackoverflow.com/users/2368226/megadarkfriend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 37847638, "answer_count": 1, "score": 1, "last_activity_date": 1478652360, "creation_date": 1466033821, "last_edit_date": 1478652360, "question_id": 37847521, "link": "https://stackoverflow.com/questions/37847521/reindex-sorted-pandas-dataframe", "title": "reindex sorted pandas dataframe", "body": "<p>I have a dataframe like so:</p>\n\n<pre><code>    Column A    Column B    Date       Value\n1          A           1   2011-01-01   10\n2          B           1   2011-01-01   10\n3          A           2   2011-01-01   10\n4          B           2   2011-01-01   10\n5          A           1   2011-01-02   10\n6          B           1   2011-01-02   10\n7          A           2   2011-01-02   10\n8          B           2   2011-01-02   10\n9          A           1   2011-01-03   10\n10         B           1   2011-01-03   10\n11         B           2   2011-01-03   10\n</code></pre>\n\n<p>I want to find missing dates for every value of A and B (in this case, it would be A, date: 2011-01-03), and insert NaN there. I tried the reindex function:</p>\n\n<pre><code>df.sort_values(['Column A','Column B'],ascending = [True,True], inplace = True)\ndf.index = range(1,len(df)+1)\ndates = pd.date_range('2011-01-01','2011-01-03')\ndf = df.reindex(dates, fill_value = None)\nprint df\n</code></pre>\n\n<p>But it gives me NaN in every column. Does anyone have any suggestions as to how I can flag these missing values?</p>\n"}, {"tags": ["python", "pandas", "multi-index"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 0, "last_activity_date": 1466033817, "creation_date": 1466033817, "answer_id": 37847518, "question_id": 37847499, "link": "https://stackoverflow.com/questions/37847499/use-level-of-pandas-index-as-a-part-of-an-output-file-name/37847518#37847518", "title": "Use level of pandas index as a part of an output file name", "body": "<p>run this to get a better idea:</p>\n\n<pre><code>for index, row in df.head().iterrows():\n    print \"Site: {}, Survey_Date {}\".format(*index)\n</code></pre>\n\n<p>Essentially, the <code>index</code> variable is a tuple with each level of the multiindex.  Access the level you want with <code>index[0]</code> for <code>'Site'</code> or <code>index[1]</code> for <code>'Survey_Date'</code></p>\n"}], "owner": {"reputation": 2214, "user_id": 2864250, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/svmFB.jpg?s=128&g=1", "display_name": "dubbbdan", "link": "https://stackoverflow.com/users/2864250/dubbbdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 37847518, "answer_count": 1, "score": 1, "last_activity_date": 1466033817, "creation_date": 1466033628, "question_id": 37847499, "link": "https://stackoverflow.com/questions/37847499/use-level-of-pandas-index-as-a-part-of-an-output-file-name", "title": "Use level of pandas index as a part of an output file name", "body": "<p>I am trying to loop through a data frame using </p>\n\n<pre><code>for index, row in df.iterrows():\n   #Do Stuff\n</code></pre>\n\n<p>I have a pandas data frame that looks like:</p>\n\n<pre><code>                  pt_ID Easting Northing         Attribute\nSite  Survey_Date                                         \nM006R 2004-12-30   1019  245473   651608  WE              \n      2004-12-30   1038  245563   651543  WE              \n      2004-12-30   1017  245471   651593  WE              \n      2004-12-30   1021  245482   651616  WE              \n      2004-12-30   1023  245478   651604  WE              \n      2004-12-30   1049  245665   651498  WE              \n      2004-12-30   1020  245477   651614  WE              \n      2004-12-30   1041  245577   651528  WE              \n      2004-12-30   1040  245574   651535  WE              \n      2004-12-30   1037  245552   651544  WE   \n</code></pre>\n\n<p>As can bee seen I have a multindex using <code>Site</code> and <code>Survey_Date</code>.  As It loops through the dataframe I would like to use the <code>Survey_Date</code> as a part of and output file name and have no idea how to access it as it loops through the data frame.  </p>\n\n<p>For example I would like an output filename of:</p>\n\n<p><code>outfilename = 'test_' + Survey_Date + '.extention'</code></p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["python", "ipython", "jupyter"], "answers": [{"tags": [], "owner": {"reputation": 3091, "user_id": 5216568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225663323c2b087d3ddb423f21c8c456?s=128&d=identicon&r=PG&f=1", "display_name": "kikocorreoso", "link": "https://stackoverflow.com/users/5216568/kikocorreoso"}, "is_accepted": true, "score": 6, "last_activity_date": 1466077386, "creation_date": 1466077386, "answer_id": 37858179, "question_id": 37847440, "link": "https://stackoverflow.com/questions/37847440/starting-jupyter-notebook-programmatically-from-another-notebook/37858179#37858179", "title": "Starting jupyter notebook programmatically from another notebook", "body": "<p>If I suppose you know the url for the notebook you want to open you could open it in the following way:</p>\n\n<p>This code should be a code cell in your notebook:</p>\n\n<pre><code>%%javascript\nwindow.open('http://localhost:8888/notebooks/Name_of_the_notebook.ipynb')\n</code></pre>\n\n<p>If you don't know the complete path (url) to the notebook you should, at least, know the name of the notebook you created. In this case you could do:</p>\n\n<pre><code>%%javascript\nvar name_of_the_notebook = 'Name_of_the_notebook.ipynb'\nvar url = window.location.href.split('/')\nvar newurl = url[0] + '//'\nfor (var i = 1; i &lt; url.length - 1; i++) {\n    console.log(url[i], newurl)\n    newurl += url[i] + '/'\n}\nnewurl += name_of_the_notebook\nwindow.open(newurl)\n</code></pre>\n\n<p>Maybe the browser will ask if you want to open the new tab.</p>\n"}, {"comments": [{"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 0, "creation_date": 1573833922, "post_id": 52540611, "comment_id": 104028586, "body": "can you please write in more details how to do that? simple copy-paste does not work (as expected)"}], "tags": [], "owner": {"reputation": 2481, "user_id": 173003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40f539b01da60e0ec61eeb3fd107c81e?s=128&d=identicon&r=PG", "display_name": "Aristide", "link": "https://stackoverflow.com/users/173003/aristide"}, "is_accepted": false, "score": 1, "last_activity_date": 1538062776, "creation_date": 1538062776, "answer_id": 52540611, "question_id": 37847440, "link": "https://stackoverflow.com/questions/37847440/starting-jupyter-notebook-programmatically-from-another-notebook/52540611#52540611", "title": "Starting jupyter notebook programmatically from another notebook", "body": "<p>The answer of kikocorreoso should open the specified notebook at launch. When this is not required or desirable, you can simply create a clickable link (even relative) in a Markdown cell, <em>i.e.</em>:</p>\n\n<pre><code>Click to open your [notebook](../others/name_of_the_notebook.ipynb).\n</code></pre>\n"}], "owner": {"reputation": 2062, "user_id": 399111, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/59ec67ecc4c11d01cb34de124f9fc278?s=128&d=identicon&r=PG", "display_name": "MARK", "link": "https://stackoverflow.com/users/399111/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 2, "accepted_answer_id": 37858179, "answer_count": 2, "score": 5, "last_activity_date": 1538062776, "creation_date": 1466033046, "question_id": 37847440, "link": "https://stackoverflow.com/questions/37847440/starting-jupyter-notebook-programmatically-from-another-notebook", "title": "Starting jupyter notebook programmatically from another notebook", "body": "<p>Is it possible to start another notebook from the current notebook? I know how to create and save the current notebook but I cannot launch another notebook from the current one.\n%run does not work while starting another notebook</p>\n"}, {"tags": ["python", "dicom", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 3245, "user_id": 5575382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057515498825ff836584c58442d8d99c?s=128&d=identicon&r=PG&f=1", "display_name": "kritzel_sw", "link": "https://stackoverflow.com/users/5575382/kritzel-sw"}, "is_accepted": false, "score": 0, "last_activity_date": 1466490439, "creation_date": 1466490439, "answer_id": 37936986, "question_id": 37847414, "link": "https://stackoverflow.com/questions/37847414/viewing-dicom-image-with-bokeh/37936986#37936986", "title": "Viewing dicom image with Bokeh", "body": "<p>Not being an expert in python, I have had a glance at pydicom's capabilities in handling pixel data. I figured out that pixel_array is the value of the pixel-data attribute of the DICOM dataset <strong>as is</strong> and pydicom does not offer any functionality to convert it into some standard format which can be handled uniformly. This means you will have to convert it to RGB in most cases which is a quite compilcated and error-prone task.</p>\n\n<p>Things to consider in this:</p>\n\n<ul>\n<li>The encoding (Big/Little Endian, various compression methods like JPEG, JPEG-LS, RLE, ZIP) - DICOM attribute (0002,0010) TransferSyntaxUID</li>\n<li>The type of pixeldata (Grayscale, RGB, ...) - DICOM attribute (0028,0004) PhotometricInterpretation, (0028,0103) PixelRepresentation</li>\n<li>In case of color images: are the values encoded colur by plane (RRRRR,.....GGGGG,.....BBBBB) or colour by pixel as you expect it to be (RGB RGB...)</li>\n<li>The bit depth and which bits are used for actual pixel data values (0028,0100) BitsAllocated, (0028,0101) BitsStored, (0028,0102) Highbit.</li>\n<li>are the pixel data values really the values to be displayed or are they indices to a colour/grayscale lookup table (0028,3000) ModalityLUTSequence, (0028,3002) LUTDescriptor, (0028,3003) LUTExplanation, (0028,3004) ModalityLUTType, (0028,3006) LUTData.</li>\n</ul>\n\n<p>Scary, isn't it? For some modern image classes like Enhanced MR, there is even more than that.</p>\n\n<p>However, if you constrain to a particular type of image (e.g. Computed Radiography). limitations to the above mentioned apply that make your life a bit easier. </p>\n\n<p>If you would post a DICOM dump of the image header I could give you some hints how to display that particular image.</p>\n\n<p>HTH</p>\n\n<p>kritzel</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 74123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61bf07cd28662264ec1b22d15d716344?s=128&d=identicon&r=PG", "display_name": "bastula", "link": "https://stackoverflow.com/users/74123/bastula"}, "is_accepted": false, "score": 0, "last_activity_date": 1468374490, "creation_date": 1468374490, "answer_id": 38341405, "question_id": 37847414, "link": "https://stackoverflow.com/questions/37847414/viewing-dicom-image-with-bokeh/38341405#38341405", "title": "Viewing dicom image with Bokeh", "body": "<p>What you need to do is map the pixel data returned from pixel_array to RGB space. Usually that is done using a look up table (LUT). Take a look at the functions GetImage and GetLUTValue in the <a href=\"https://github.com/dicompyler/dicompyler-core/blob/master/dicompylercore/dicomparser.py\" rel=\"nofollow\">dicomparser</a> module in the <a href=\"https://github.com/dicompyler/dicompyler-core\" rel=\"nofollow\">dicompyler-core</a> library.</p>\n\n<p>In GetLUTValue it maps the data to an 8-bit greyscale image. If you want to use a different LUT, you would need to map the color space accordingly.</p>\n"}], "owner": {"reputation": 143, "user_id": 6308014, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30fe541dce7e603fca8417615a43c952?s=128&d=identicon&r=PG&f=1", "display_name": "sutartmelson", "link": "https://stackoverflow.com/users/6308014/sutartmelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 609, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1468451267, "creation_date": 1466032830, "last_edit_date": 1468451267, "question_id": 37847414, "link": "https://stackoverflow.com/questions/37847414/viewing-dicom-image-with-bokeh", "title": "Viewing dicom image with Bokeh", "body": "<p>I'm trying to set the graph background to a dicom image. I followed <a href=\"http://bokeh.pydata.org/en/0.11.1/docs/gallery/image_rgba.html\" rel=\"nofollow\">this example</a>, but the image data given from <code>dicom.pixel_array</code> isn't RGBA. I'm not sure how to convert it, either. I'm also not sure what exactly bokeh is expecting. I've tried finding specifics in the documentation, but not such luck. </p>\n\n<pre><code>from bokeh.plotting import figure, show, output_file\nimport dicom\nimport numpy as np\n\n\npath = \"/pathToDicomImage.dcm\"\ndata = dicom.read_file(path)\nimg = data.pixel_array\n\np = figure(x_range=(0,10), y_range=(0,10))\n\n# must give a vector of images\np.image_rgba(image=[img], x=0, y=0, dw=10, dh=10)\n\noutput_file(\"image_rgba.html\", title=\"image_rgba.py example\")\n\nshow(p) \n</code></pre>\n\n<p>This code doesnt give me any errors, but it doesn't display anything. Maybe the pixel array doesn't have alpha data, so <code>alpha</code> defaults to <code>0</code>? I'm not sure. Also, I can't quite figure out how to test it. </p>\n\n<p><strong>SOLVED</strong></p>\n\n<p>As was pointed out, I just needed to map the pixel data to rgba space. for this instance, it means duplicating the data to each channel, and setting alpha all the way.</p>\n\n<pre><code>def dicom_image_to_RGBA(image_data):\n    rows = len(image_data)\n    cols = rows\n    img = np.empty((rows,cols), dtype=np.uint32)\n    view = img.view(dtype=np.uint8).reshape((rows, cols, 4))\n    for i in range(0,rows):\n        for j in range(0,cols):\n            view[i][j][0] = image_data[i][j]\n            view[i][j][1] = image_data[i][j]\n            view[i][j][2] = image_data[i][j]\n            view[i][j][3] = 255\n    return img\n</code></pre>\n"}, {"tags": ["python", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 980, "user_id": 5401777, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207823338127007/picture?type=large", "display_name": "fedterzi", "link": "https://stackoverflow.com/users/5401777/fedterzi"}, "edited": false, "score": 0, "creation_date": 1466032894, "post_id": 37847386, "comment_id": 63154684, "body": "Just to be sure, in which line the interpreter stops?"}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 1, "creation_date": 1466032909, "post_id": 37847386, "comment_id": 63154691, "body": "Please provide the full stack trace."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466032958, "post_id": 37847386, "comment_id": 63154697, "body": "Are you using requests? if so just use <code>resp.json()</code> if you want json"}, {"owner": {"reputation": 18474, "user_id": 971141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33bad53cc72fd2873b4bd5b426fcc4c1?s=128&d=identicon&r=PG", "display_name": "David Ferenczy Rogo\u017ean", "link": "https://stackoverflow.com/users/971141/david-ferenczy-rogo%c5%bean"}, "edited": false, "score": 0, "creation_date": 1466034845, "post_id": 37847386, "comment_id": 63155181, "body": "Please add the traceback to the question to preserve the formatting. It&#39;s unreadable in the comment."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1466094243, "post_id": 37847386, "comment_id": 63186227, "body": "How is <code>inter</code> initialized?  The error code implies it is a Unicode string and you are using Python 2.  On Python 2 that Unicode string is implicitly encoded using the default <code>ascii</code> codec to a byte string because <code>.decode()</code> only works on byte strings.  Please provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 21, "user_id": 6471969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82995479839cfc2ebeba7c6ecfad9e1?s=128&d=identicon&r=PG&f=1", "display_name": "user6471969", "link": "https://stackoverflow.com/users/6471969/user6471969"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1466100206, "post_id": 37847386, "comment_id": 63189691, "body": "@MarkTolonen: I started encoding without having an extra step of decoding. Now, i get an invalid escape sequence error."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6471969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82995479839cfc2ebeba7c6ecfad9e1?s=128&d=identicon&r=PG&f=1", "display_name": "user6471969", "link": "https://stackoverflow.com/users/6471969/user6471969"}, "edited": false, "score": 0, "creation_date": 1466122583, "post_id": 37870511, "comment_id": 63199192, "body": "this helps me in cleaning the escape characters. However, I also want to write the unicode data to the downstream databases. When i try reading the files written by this code, it encounters unicode characters such as      <code>XTREME on June 23\\u201325</code>"}, {"owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "reply_to_user": {"reputation": 21, "user_id": 6471969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82995479839cfc2ebeba7c6ecfad9e1?s=128&d=identicon&r=PG&f=1", "display_name": "user6471969", "link": "https://stackoverflow.com/users/6471969/user6471969"}, "edited": false, "score": 0, "creation_date": 1466283713, "post_id": 37870511, "comment_id": 63256022, "body": "<code>json.loads</code> will convert the <code>\\u2013</code> input into character U+2013 En Dash <code>\u2013</code> fine."}], "tags": [], "owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "is_accepted": true, "score": 1, "last_activity_date": 1466116779, "creation_date": 1466116779, "answer_id": 37870511, "question_id": 37847386, "link": "https://stackoverflow.com/questions/37847386/unicode-api-response-throwing-error-ascii-codec-cant-encode-character-u-u20/37870511#37870511", "title": "Unicode API response throwing error &#39;&#39;ascii&#39; codec can&#39;t encode character u&#39;\\u2019&#39; in position 22462&#39;", "body": "<pre><code>inter = resp.text\nstring_e = inter#.decode('utf-8')\nencoded_data = final.encode('utf-8')\n</code></pre>\n\n<p>The <code>text</code> property is a Unicode character string, decoded from the original bytes using whatever encoding the Requests module guessed might be in use from the HTTP headers.</p>\n\n<p>You probably don't want that; JSON has its own ideas about what the encoding should be, so you should let the JSON decoder do that by taking the raw response bytes from <code>resp.content</code> and passing them straight to <code>json.loads</code>.</p>\n\n<p>What's more, Requests has a shortcut method to do the same: <code>resp.json()</code>.</p>\n\n<pre><code>final = string_e.replace('\\\\n', ' ').replace('\\\\t', ' ').replace('\\\\r', ' ')#.replace('\\\\ ',' ')\n</code></pre>\n\n<p>Trying to do this on the JSON-string-literal formatted input is a bad idea: you will miss some valid escapes, and incorrectly unescape others. Your actual error is nothing to do with Unicode at all, it's that this replacement is mangling the input. For example consider the input JSON:</p>\n\n<pre><code>{\"message\": \"Open the file C:\\\\newfolder\\\\text.txt\"}\n</code></pre>\n\n<p>after replacement:</p>\n\n<pre><code>{\"message\": \"Open the file C:\\ ewfolder\\ ext.txt\"}\n</code></pre>\n\n<p>which is clearly not valid JSON.</p>\n\n<p>Instead of trying to operate on the JSON-encoded string, you should let <code>json</code> decode the input and then filter any strings you have in the structured output. This may involve using a recursive function to walk down into each level of the data looking for strings to filter. eg</p>\n\n<pre><code>def clean(data):\n    if isinstance(data, basestring):\n        return data.replace('\\n', ' ').replace('\\t', ' ').replace('\\r', ' ')\n    if isinstance(data, list):\n        return [clean(item) for item in data]\n    if isinstance(data, dict):\n        return {clean(key): clean(value) for (key, value) in data.items()}\n    return data\n\ncleaned_data = clean(resp.json())\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6471969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82995479839cfc2ebeba7c6ecfad9e1?s=128&d=identicon&r=PG&f=1", "display_name": "user6471969", "link": "https://stackoverflow.com/users/6471969/user6471969"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 37870511, "answer_count": 1, "score": 1, "last_activity_date": 1546788765, "creation_date": 1466032669, "last_edit_date": 1546788765, "question_id": 37847386, "link": "https://stackoverflow.com/questions/37847386/unicode-api-response-throwing-error-ascii-codec-cant-encode-character-u-u20", "title": "Unicode API response throwing error &#39;&#39;ascii&#39; codec can&#39;t encode character u&#39;\\u2019&#39; in position 22462&#39;", "body": "<p>I am making an API call and the response has unicode characters. Loading this response into a file throws the following error:</p>\n\n<pre><code>'ascii' codec can't encode character u'\\u2019' in position 22462\n</code></pre>\n\n<p>I've tried all combinations of decode and encode ('utf-8').</p>\n\n<p>Here is the code:</p>\n\n<pre><code>url = \"https://%s?start_time=%s&amp;include=metric_sets,users,organizations,groups\" % (api_path, start_epoch)\nwhile url != None and url != \"null\" :\njson_filename = \"%s/%s.json\" % (inbound_folder, start_epoch)\ntry:\n    resp = requests.get(url,\n                        auth=(api_user, api_pwd),\n                        headers={'Content-Type': 'application/json'})\n\nexcept requests.exceptions.RequestException as e:\n    print \"|********************************************************|\"\n    print e\n    return \"Error: {}\".format(e)\n    print \"|********************************************************|\"\n    sys.exit(1)\n\ntry:\n    total_records_extracted = total_records_extracted + rec_cnt\n    jsonfh = open(json_filename, 'w')\n    inter = resp.text\n    string_e = inter#.decode('utf-8')\n    final = string_e.replace('\\\\n', ' ').replace('\\\\t', ' ').replace('\\\\r', ' ')#.replace('\\\\ ',' ')\n    encoded_data = final.encode('utf-8')\n    cleaned_data = json.loads(encoded_data)\n    json.dump(cleaned_data, jsonfh, indent=None)\n    jsonfh.close()\nexcept ValueError as e:\n    tb = traceback.format_exc()\n    print tb\n    print \"|********************************************************|\"\n    print  e\n    print \"|********************************************************|\"\n    sys.exit(1)\n</code></pre>\n\n<p>Lot of developers have faced this issue. a lot of places have asked to use <code>.decode('utf-8')</code> or having a <code># _*_ coding:utf-8 _*_</code> at the top of python. </p>\n\n<p>It is still not helping. </p>\n\n<p>Can someone help me with this issue? </p>\n\n<p>Here is the trace:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/Users/SM/PycharmProjects/zendesk/zendesk_tickets_api.py\", line 102, in main\ncleaned_data = json.loads(encoded_data)\nFile \"/Users/SM/anaconda/lib/python2.7/json/__init__.py\", line 339, in loads\nreturn _default_decoder.decode(s)\nFile \"/Users/SM/anaconda/lib/python2.7/json/decoder.py\", line 364, in decode\nobj, end = self.raw_decode(s, idx=_w(s, 0).end())\nFile \"/Users/SM/anaconda/lib/python2.7/json/decoder.py\", line 380, in raw_decode\nobj, end = self.scan_once(s, idx)\nValueError: Invalid \\escape: line 1 column 2826494 (char 2826493)\n\n|********************************************************|\nInvalid \\escape: line 1 column 2826494 (char 2826493)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1466032434, "post_id": 37847312, "comment_id": 63154554, "body": "<code>is</code> is a Python keyword operator, and the expression evaluates to <code>True</code>/<code>False</code>"}, {"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1466032469, "post_id": 37847312, "comment_id": 63154567, "body": "you need quotes around &#39;name is&quot;: print (&quot;name is bob&quot;)"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1466036791, "post_id": 37847312, "comment_id": 63155577, "body": "Please <b><i>do not</i></b> change your entire question. If you have another one, just click on the <code>Ask Question</code> button at the top right of the page. Changing the question makes all of the answers look incorrect, because they don&#39;t answer the question as displayed."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1466032480, "creation_date": 1466032480, "answer_id": 37847360, "question_id": 37847312, "link": "https://stackoverflow.com/questions/37847312/trying-to-identify-the-errors-and-provide-the-python-code-that-accomplishes-the/37847360#37847360", "title": "Trying to identify the errors and provide the python code that accomplishes the task", "body": "<p>You're doing fine, except that I expect the last line should read</p>\n\n<pre><code>print (\"name is:\", name)\n</code></pre>\n\n<p>The original checks to see whether the name is \"Bob\", printing either <strong>True</strong> or <strong>False</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3566502, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/63eff431f893bbdd00807b94d4727955?s=128&d=identicon&r=PG&f=1", "display_name": "user3566502", "link": "https://stackoverflow.com/users/3566502/user3566502"}, "is_accepted": false, "score": 0, "last_activity_date": 1466033824, "creation_date": 1466033824, "answer_id": 37847523, "question_id": 37847312, "link": "https://stackoverflow.com/questions/37847312/trying-to-identify-the-errors-and-provide-the-python-code-that-accomplishes-the/37847523#37847523", "title": "Trying to identify the errors and provide the python code that accomplishes the task", "body": "<p>print (\"name is: \", name) is the correct syntax</p>\n"}], "owner": {"reputation": 1, "user_id": 6471938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329da5bce26b2b0cb125b23a5edf2d99?s=128&d=identicon&r=PG&f=1", "display_name": "PythonRookie", "link": "https://stackoverflow.com/users/6471938/pythonrookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1466036660, "creation_date": 1466032195, "last_edit_date": 1466036660, "question_id": 37847312, "link": "https://stackoverflow.com/questions/37847312/trying-to-identify-the-errors-and-provide-the-python-code-that-accomplishes-the", "title": "Trying to identify the errors and provide the python code that accomplishes the task", "body": "<pre><code>age = 3\nname = age\nif age = \"Bob\"\nprint(name is: age)\n</code></pre>\n\n<p>I have to find the errors in this such as \"<code>if age =</code> should be <code>if age ==</code>\" and finish the code to accomplish the task. </p>\n\n<p>For the errors I have located the following \"<code>if age =</code> should be <code>if age ==</code> and I also believe that <code>name = age</code> doesn't make sense as it should be <code>name = Bob</code> as well as <code>(name is: age)</code> should be <code>(name is: \"Bob\")</code>. </p>\n\n<p>Please let me know if I correct in my findings of these mistakes and let me know what else I am missing.</p>\n\n<p>Lastly the code I am using to finish accomplish it is as follows</p>\n\n<pre><code>name = input(\"Enter name:\")\nage = float(input(\"Enter age:\"))\n\nif age == 3:\n    print(name is \"Bob\")\n</code></pre>\n\n<p>This however just gives me a false statement if I enter 3 for the name, please help me</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6471958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f7430088b5d740174bf77a5a72fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bmm", "link": "https://stackoverflow.com/users/6471958/bmm"}, "edited": false, "score": 0, "creation_date": 1466033644, "post_id": 37847411, "comment_id": 63154866, "body": "unfortunately that doesnt seem to have solved the problem, i think the issue mught have to do with the location of &quot;for r in arange(2,4,0.1):&quot; line, but im not sure"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "reply_to_user": {"reputation": 57, "user_id": 6471958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f7430088b5d740174bf77a5a72fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bmm", "link": "https://stackoverflow.com/users/6471958/bmm"}, "edited": false, "score": 0, "creation_date": 1466033836, "post_id": 37847411, "comment_id": 63154924, "body": "@BrigidMaloney perhaps you can give more details about what you want to plot (which variables against which variables). I&#39;ve been looking at your code for a while now, but I have absolutely no idea what you could be interested in."}, {"owner": {"reputation": 57, "user_id": 6471958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f7430088b5d740174bf77a5a72fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bmm", "link": "https://stackoverflow.com/users/6471958/bmm"}, "edited": false, "score": 0, "creation_date": 1466035578, "post_id": 37847411, "comment_id": 63155336, "body": "for every value of x defined as xnp1, which i want to use as my y value, i want to plot an r within the range, as the x value, which is why i added a hold(True) in order to allow the points that fall on the same location to be plotted over instead of being erased, so multiple values could be achieved for each value of r"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "reply_to_user": {"reputation": 57, "user_id": 6471958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f7430088b5d740174bf77a5a72fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bmm", "link": "https://stackoverflow.com/users/6471958/bmm"}, "edited": false, "score": 0, "creation_date": 1466036749, "post_id": 37847411, "comment_id": 63155566, "body": "@BrigidMaloney perhaps the code I&#39;ve edited in is what you&#39;re looking for? Notice the changes to the indentation."}], "tags": [], "owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1466036697, "last_edit_date": 1466036697, "creation_date": 1466032811, "answer_id": 37847411, "question_id": 37847297, "link": "https://stackoverflow.com/questions/37847297/plotting-a-sequence-results-in-valueerror-x-and-y-must-have-same-first-dimens/37847411#37847411", "title": "plotting a sequence results in: &quot;ValueError: x and y must have same first dimension&quot;", "body": "<p>You're trying to plot <code>xn</code> (the dependent variable, aka \"the y-data\") versus <code>rplot</code> (the independent variable, aka \"the x-data\").</p>\n\n<p>From your code, you'll see that <code>xn</code> refers to the last item in the array <code>x</code>, so it is a <em>single</em> scalar. <code>rplot</code> however is as long as the array <code>x</code>, because you made it such:</p>\n\n<pre><code>rplot = 0*xa + r\n</code></pre>\n\n<p>It's like plotting the number \"1\" to more than one x-value (like <code>[1, 2, 3]</code>). You can see that this is confusing, right? </p>\n\n<p>It's not clear what exactly you want to plot (which variables against which other variables), but this post does answer why you're getting that error. Perhaps it'll help you in finding out what you really want to plot.</p>\n\n<p>Based on the received comment, you might be looking for this code:</p>\n\n<pre><code>hold(True)\nx = [0.5]\nfor r in arange(2,4,0.1):\n    for _ in range(170):\n        xn = x[-1]\n        x.append( r*xn*(1 - xn) )\n    rplot = np.full(len(x), r)            \n    plot(rplot, x, \".\")\nshow()\n</code></pre>\n\n<p>It plots, for every <code>r</code> within the <code>range(2, 4, .1)</code> an array of points, which depend on that value. The array of points for that particular value of <code>r</code> all have the same ordinate, which is <code>r</code>. It looks like stripes.</p>\n"}], "owner": {"reputation": 57, "user_id": 6471958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f7430088b5d740174bf77a5a72fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Bmm", "link": "https://stackoverflow.com/users/6471958/bmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466036697, "creation_date": 1466032078, "last_edit_date": 1466032363, "question_id": 37847297, "link": "https://stackoverflow.com/questions/37847297/plotting-a-sequence-results-in-valueerror-x-and-y-must-have-same-first-dimens", "title": "plotting a sequence results in: &quot;ValueError: x and y must have same first dimension&quot;", "body": "<p>I'm a beginner here and I'm experiencing a problem when I'm trying to plot a sequence:</p>\n\n<p>My code gives me this error message:\n\"ValueError: x and y must have same first dimension\"</p>\n\n<pre><code>hold(True)\nx=[0.5]\nfor r in arange(2,4,0.1):\n    for i in range(170):\n        xn= x[-1]\n        xnp1 = r*xn*(1-xn)\n        x.append(xnp1)\n        xa=array(x)   \n        rplot=0*xa+r\nplot (rplot, xn,\".\")\nshow()\n</code></pre>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466032603, "post_id": 37847254, "comment_id": 63154602, "body": "the post is to <code>https:&#47;&#47;www.howdens.com&#47;process&#47;searchLocationsNear.php</code>, it uses latitude and longitude,if I input London -&gt; <code>https:&#47;&#47;www.howdens.com&#47;process&#47;searchLocationsNear.php?lat=&zwnj;&#8203;51.5073509&amp;lon=-0.12&zwnj;&#8203;775829999998223&amp;dist&zwnj;&#8203;ance=1000&amp;units=MILE&zwnj;&#8203;S</code>"}, {"owner": {"reputation": 351, "user_id": 6058203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b4f300880f0dd82f0cec4ec4e487ed74?s=128&d=identicon&r=PG&f=1", "display_name": "nevster", "link": "https://stackoverflow.com/users/6058203/nevster"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466035347, "post_id": 37847254, "comment_id": 63155288, "body": "@PadraicCunningham Thank you for that Padraic.  May I ask how I would incorporate that in my code.  I tried <code>yield FormRequest.from_response(response, url=&quot;https:&#47;&#47;www.howdens.com&#47;process&#47;searchLocationsNear.php&zwnj;&#8203;&quot;, formxpath=&#39;&#47;&#47;*[@id=&quot;addressForm&quot;]&#39;, formdata={&#39;address&#39;:&#39;London&#39;}, callback=self.parse_dir_contents)</code>  . . . . . though that did not seem to work"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466035937, "post_id": 37847254, "comment_id": 63155407, "body": "I did that in the browser, if you look under the xhr tab in chrome dev tools, you can see what happens.  pretty sure the coordinates are gotten using google maps so replicating would not be totally straight forward. Getting late in the night here but if you don&#39;t get a solution overnight I will have a proper look when I get a chance tomorrow"}, {"owner": {"reputation": 351, "user_id": 6058203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b4f300880f0dd82f0cec4ec4e487ed74?s=128&d=identicon&r=PG&f=1", "display_name": "nevster", "link": "https://stackoverflow.com/users/6058203/nevster"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466280812, "post_id": 37847254, "comment_id": 63255389, "body": "@PadraicCunningham Thank you for that Padraic.  I struggled to fully replicate how the site gets hold of the longitude and latitude for a postcode - hence, i adjusted my code above to search by longitude and latitude using the <a href=\"https://www.howdens.com/process/searchLocationsNear.php\" rel=\"nofollow noreferrer\">howdens.com/process/searchLocationsNear.php</a> that you pointed me in the direction of."}], "owner": {"reputation": 351, "user_id": 6058203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b4f300880f0dd82f0cec4ec4e487ed74?s=128&d=identicon&r=PG&f=1", "display_name": "nevster", "link": "https://stackoverflow.com/users/6058203/nevster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1466031846, "creation_date": 1466031846, "question_id": 37847254, "link": "https://stackoverflow.com/questions/37847254/python-scrapy-formrequest-not-giving-correct-url", "title": "python scrapy formrequest not giving correct url", "body": "<p>I am attempting to scrap some address data from the Howdens website.  However, to do that I need to enter some form data to find the local depot near a postcode of my choice.</p>\n\n<p>The start url is \"<a href=\"https://www.howdens.com/about-us/contact-your-local-depot/\" rel=\"nofollow\">https://www.howdens.com/about-us/contact-your-local-depot/</a>\"</p>\n\n<p>and the source code is:</p>\n\n<pre><code>&lt;form id=\"addressForm\" _lpchecked=\"1\"&gt;\n        &lt;label for=\"address\"&gt;\n            Enter your Postcode / Town:\n            &lt;i id=\"searchNearest\" class=\"icon-search depot-search\"&gt;&lt;/i&gt;\n            &lt;input name=\"address\" id=\"address\" class=\"address-input\" value=\"\" \"\"=\"\"&gt;\n        &lt;/label&gt;\n        &lt;div id=\"add_matches\" class=\"noDisplay\"&gt;\n            &lt;strong&gt;Multiple results found for your input address. Please select one and search again:&lt;/strong&gt;\n            &lt;select id=\"add_sel\" onchange=\"document.getElementById('address').value=this.options[this.selectedIndex].value;\"&gt;&lt;/select&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n\n        &lt;/p&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>The python code I am attempting to use is:</p>\n\n<pre><code>import scrapy\n\nfrom scrapy.http import FormRequest, Request\nfrom Howdens.items import HowdensItem\n\nclass howdensSpider(scrapy.Spider):\n    name = \"howdens\"\n    allowed_domains = [\"www.howdens.com\"]\n    start_urls = [\n        \"https://www.howdens.com/about-us/contact-your-local-depot/\",\n    ]\n\n    def parse(self, response):\n        yield FormRequest.from_response(response, formxpath='//*[@id=\"addressForm\"]', formdata={'address':'W3'}, callback=self.parse_dir_contents)\n\n    def parse_dir_contents(self, response):\n        for sel in response.xpath('//*[@id=\"sidebar\"]'):\n            item = HowdensItem()\n            item['name'] = sel.xpath('./h2/text()').extract()\n            item['address'] = sel.xpath('./p/text()').extract()\n            yield item\n</code></pre>\n\n<p>So far, the problems all reside at the FormRequest line.  It returns a url of \"<a href=\"https://www.howdens.com/about-us/contact-your-local-depot/?address=W3\" rel=\"nofollow\">https://www.howdens.com/about-us/contact-your-local-depot/?address=W3</a>\" instead of submitting the request to the site to return a more detailed url.</p>\n\n<p>any guidance as to where I am going wrong would be greatfully received?</p>\n"}, {"tags": ["python", "oracle", "ubuntu", "cx-oracle", "query-notifications"], "comments": [{"owner": {"reputation": 739, "user_id": 4163768, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JKXht4IxpzU/AAAAAAAAAAI/AAAAAAAAA94/82XKnW1fGZo/photo.jpg?sz=128", "display_name": "Lingster", "link": "https://stackoverflow.com/users/4163768/lingster"}, "edited": false, "score": 0, "creation_date": 1531993258, "post_id": 37847251, "comment_id": 89809420, "body": "Hi, has CQN been enabled on the oracle server? Your non-sys user will need to be enabled for cqn notifications, eg <code>GRANT CHANGE NOTIFICATION TO user_name; </code>. If that has been done, when you run your python script, perform an insert/update/delete in your mytab table, do you see any output from the python script?"}], "answers": [{"tags": [], "owner": {"reputation": 739, "user_id": 4163768, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JKXht4IxpzU/AAAAAAAAAAI/AAAAAAAAA94/82XKnW1fGZo/photo.jpg?sz=128", "display_name": "Lingster", "link": "https://stackoverflow.com/users/4163768/lingster"}, "is_accepted": false, "score": 0, "last_activity_date": 1532001615, "creation_date": 1532001615, "answer_id": 51422176, "question_id": 37847251, "link": "https://stackoverflow.com/questions/37847251/cx-oracle-continuous-query-notification/51422176#51422176", "title": "cx_Oracle Continuous Query Notification", "body": "<p>Has CQN been enabled on the oracle server? </p>\n\n<p>Your non-sys user will need to be enabled for cqn notifications, eg:</p>\n\n<p><code>\nGRANT EXECUTE ON DBMS_CQ_NOTIFICATION TO user_name;\nGRANT CHANGE NOTIFICATION TO user_name;\n</code></p>\n\n<p>If that has been done, when you run your python script, perform an insert/update/delete in your mytab table, do you see any output from the python script? see here for more details: \n<a href=\"https://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_cqn.htm#CHEIFAEJ\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_cqn.htm#CHEIFAEJ</a></p>\n"}], "owner": {"reputation": 21, "user_id": 6471921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff743c18912c7c5390e609d665e3e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Manrique", "link": "https://stackoverflow.com/users/6471921/carlos-manrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 994, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1532001615, "creation_date": 1466031826, "last_edit_date": 1466632530, "question_id": 37847251, "link": "https://stackoverflow.com/questions/37847251/cx-oracle-continuous-query-notification", "title": "cx_Oracle Continuous Query Notification", "body": "<p>i'm using an Amazon Work Space and i use a VPN to connect via SSH Ubuntu 16.04 instance. I use python to do a connection an Oracle Database 11g, i need to use cx_Oracle Continuous Query Notification and i founded this code looking on the internet from this page <a href=\"http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/oow10/python_db/python_db.htm\" rel=\"nofollow\">http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/oow10/python_db/python_db.htm</a>:</p>\n\n<pre><code>import cx_Oracle \n\n\ndef DCNCallback(message): \n    print \"Notification:\" \n    for tab in message.tables: \n        print \"Table:\", tab.name\n        for row in tab.rows: \n            if row.operation &amp; cx_Oracle.OPCODE_INSERT: \n                print \"INSERT of rowid:\", row.rowid\n            if row.operation &amp; cx_Oracle.OPCODE_DELETE: \n                print \"DELETE of rowid:\", row.rowid\n            if row.operation &amp; cx_Oracle.OPCODE_UPDATE: \n                print \"UPDATE of rowid:\", row.rowid\n\ncon = cx_Oracle.Connection(\"pythonhol/welcome@localhost/orcl\",\n                       events = True) \nsubscriptionInsDel = con.subscribe(callback = DCNCallback, \n       operations = cx_Oracle.OPCODE_INSERT | cx_Oracle.OPCODE_DELETE \n                    | cx_Oracle.OPCODE_UPDATE, \n       rowids = True) \nsubscriptionInsDel.registerquery('select * from mytab') \nraw_input(\"Hit Enter to conclude this demo\\n\") \n</code></pre>\n\n<p>I copied this example and tried to run on my Ubuntu instance, it does not have any error but when i insert/update/deleted some row on the oracle database nothing happened on the Ubuntu terminal.</p>\n\n<p>What can i do ?</p>\n"}, {"tags": ["python", "matplotlib", "tiff"], "comments": [{"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 1, "creation_date": 1466034150, "post_id": 37847238, "comment_id": 63155022, "body": "Can you upload the image or give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that generates said image? There are issues known with photo viewer opening large tiffs, which you can easily find more about on the internet. If you&#39;re unsure, just post the code or the image."}, {"owner": {"reputation": 12860, "user_id": 1168043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IBdCH.jpg?s=128&g=1", "display_name": "cphlewis", "link": "https://stackoverflow.com/users/1168043/cphlewis"}, "edited": false, "score": 0, "creation_date": 1466053688, "post_id": 37847238, "comment_id": 63159656, "body": "also, can you try it/have someone else try it on a different OS with a different viewer?"}], "owner": {"reputation": 1427, "user_id": 5162520, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e1b32faa01a76ded6683fa2ec7215d53?s=128&d=identicon&r=PG&f=1", "display_name": "Forklift17", "link": "https://stackoverflow.com/users/5162520/forklift17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466031743, "creation_date": 1466031743, "question_id": 37847238, "link": "https://stackoverflow.com/questions/37847238/cant-save-matplotlib-images-to-a-readable-tif-format", "title": "Can&#39;t save Matplotlib images to a readable .tif format", "body": "<p>I'm having trouble saving my Matplotlib plots to a readable .tiff format. The file itself does save, but when I double-click on it on the folder, I get the following error in Windows Photo Viewer:</p>\n\n<p>\"Windows Photo Viewer can't open this picture because either Photo Viewer doesn't support this file format, or you don't have the latest updates to Photo Viewer.\"</p>\n\n<p>But attempted workarounds such as trying to load the file with Paint or Photo do not work. I get the feeling that the file is not saving correctly. (The image displays just fine and can be saved as a .gif just fine.) How do I resolve this?</p>\n"}, {"tags": ["python", "c++", "opencv", "julia", "feature-detection"], "comments": [{"owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466045934, "post_id": 37847201, "comment_id": 63157566, "body": "What happens if you replace <code>print(matches[1])</code> with <code>print(matches)</code>?"}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "reply_to_user": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466105829, "post_id": 37847201, "comment_id": 63192707, "body": "<code>print(matches)</code> in the Julia example gives the following:  (I also put it in the question)  Julia  <code>Any[PyObject &lt;DMatch 0x7ff58c290f90&gt; PyObject &lt;DMatch 0x7ff58c290fb0&gt;     PyObject &lt;DMatch 0x7ff58c290fd0&gt; PyObject &lt;DMatch 0x7ff58c2bc030&gt; \u2026     PyObject &lt;DMatch 0x7ff58c24be10&gt; PyObject &lt;DMatch 0x7ff58c24be30&gt;     PyObject &lt;DMatch 0x7ff58c24be50&gt; PyObject &lt;DMatch 0x7ff58c24be70&gt;]</code>"}, {"owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466129279, "post_id": 37847201, "comment_id": 63200526, "body": "Thanks. Answered below."}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "reply_to_user": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466183607, "post_id": 37847201, "comment_id": 63228631, "body": "@FengyangWang Thank you very much!"}], "answers": [{"tags": [], "owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "is_accepted": true, "score": 1, "last_activity_date": 1466129270, "creation_date": 1466129270, "answer_id": 37872032, "question_id": 37847201, "link": "https://stackoverflow.com/questions/37847201/opencv-dmatch-objects-in-python-and-julia-dont-match/37872032#37872032", "title": "OpenCV, DMatch objects in Python and Julia don&#39;t match", "body": "<p>PyCall will convert nested lists in Python to two-dimensional arrays in Julia. For instance,</p>\n\n<pre><code>julia&gt; pyeval(\"[[1, 2], [3, 4]]\")\n2\u00d72 Array{Any,2}:\n 1  2\n 3  4\n</code></pre>\n\n<p>This means that to access the first row, as you tried <code>matches[1]</code> for, you need <code>matches[1,:]</code>. To access the first element of the first row, try <code>matches[1,1]</code>.</p>\n\n<p>When you do <code>matches[1]</code>, Julia gives you the first element in matches, which in this case is the first column of the first row.</p>\n\n<p>(Note that when printed, two dimensional arrays are usually aligned and elements are separated by spaces, while one dimensional arrays are not aligned and elements are separated by commas. This is a good way to tell.)</p>\n"}], "owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 37872032, "answer_count": 1, "score": 2, "last_activity_date": 1466129270, "creation_date": 1466031512, "last_edit_date": 1466106051, "question_id": 37847201, "link": "https://stackoverflow.com/questions/37847201/opencv-dmatch-objects-in-python-and-julia-dont-match", "title": "OpenCV, DMatch objects in Python and Julia don&#39;t match", "body": "<p>I'm trying to implement a feature matching method using OpenCV, but the translation from a Python version to Julia does not match up:</p>\n\n<p>The methods are exactly the same and use the same images for processing. (<code>[:method]</code> is just standard convention for accessing a specific type of method in Julia, so don't be fooled! Also, Julia indexing starts at 1, not 0, so these two sets of print statements <em>should</em> yield the same result, but they don't.)</p>\n\n<p><strong>Julia version:</strong></p>\n\n<pre><code>query = cv2.imread(\"images/q1.jpg\",0)\ntrain = cv2.imread(\"images/q2.jpg\",0) \n\norb = cv2.ORB_create()\n\nkp1 = orb[:detect](query)\nkp1, des1 = orb[:compute](query, kp1)\n\nkp2 = orb[:detect](train)\nkp2, des2 = orb[:compute](train, kp2)\n\nbf = cv2.BFMatcher()\nmatches = bf[:knnMatch](des1, des2, k=2)\n\nprint(matches[1])\nprint(matches[1][:distance])\n</code></pre>\n\n<p>prints the below. Only one DMatch object is stored in <code>matches</code>.</p>\n\n<pre><code>PyObject &lt;DMatch 0x7fac68b2be50&gt;\n305.0639343261719\n</code></pre>\n\n<p><strong>Python version:</strong></p>\n\n<pre><code>query = cv2.imread('images/q1.jpg',0)       \ntrain = cv2.imread('images/q2.jpg',0)\n\norb = cv2.ORB_create()\n\nkp1 = orb.detect(query)\nkp1, des1 = orb.compute(query, kp1)\n\nkp2 = orb.detect(train)\nkp2, des2 = orb.compute(train, kp2)\n\nbf = cv2.BFMatcher()\nmatches = bf.knnMatch(des1, des2, k=2)\n\nprint(matches[0])\nprint(matches[0][0].distance)\n</code></pre>\n\n<p>prints the below. Two DMatch objects are stored in <code>matches</code></p>\n\n<pre><code>[&lt;DMatch 0x7f0266a47a70&gt;, &lt;DMatch 0x7f0266a47c50&gt;]\n305.0639343261719\n</code></pre>\n\n<p>My question is, why is only one DMatch object stored in the <code>matches</code> that I created with Julia, but two are stored in the one I created with Python, [<strong>NOTE</strong>: I need both DMatch objects to successfully implement feature matching, so the Python one is correct!] and how can I fix the problem? </p>\n\n<p>Any help is much appreciated.</p>\n\n<p>EDIT:\nwriting <code>print(matches)</code> for both examples gives the following:  </p>\n\n<p>In Julia:</p>\n\n<pre><code>Any[PyObject &lt;DMatch 0x7ff58c290f90&gt; PyObject &lt;DMatch 0x7ff58c290fb0&gt;\n    PyObject &lt;DMatch 0x7ff58c290fd0&gt; PyObject &lt;DMatch 0x7ff58c2bc030&gt;\n\u2026\n    PyObject &lt;DMatch 0x7ff58c24be10&gt; PyObject &lt;DMatch 0x7ff58c24be30&gt;\n    PyObject &lt;DMatch 0x7ff58c24be50&gt; PyObject &lt;DMatch 0x7ff58c24be70&gt;]\n</code></pre>\n\n<p>In Python:             </p>\n\n<p><code>[[&lt;DMatch 0x7fcda37c5730&gt;, &lt;DMatch 0x7fcda37c5830&gt;], [&lt;DMatch 0x7fcda37c5650&gt;, &lt;DMatch 0x7fcda37c5610&gt;],... [&lt;DMatch 0x7fcda375f5d0&gt;, &lt;DMatch 0x7fcda375f5f0&gt;], [&lt;DMatch 0x7fcda375f610&gt;, &lt;DMatch 0x7fcda375f630&gt;]]</code></p>\n"}, {"tags": ["python", "google-app-engine", "curl", "google-identity-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 2076, "user_id": 2416097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/saeab.png?s=128&g=1", "display_name": "bgenchel", "link": "https://stackoverflow.com/users/2416097/bgenchel"}, "edited": false, "score": 0, "creation_date": 1466126006, "post_id": 37851551, "comment_id": 63199866, "body": "I&#39;m not sure this is what I&#39;m looking for. The verify password route itself requires some kind of candidate token from a different provider? And it doesn&#39;t seem to allow you to create new accounts."}, {"owner": {"reputation": 1939, "user_id": 2221455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d87faf24d81c4c1050b815f9715fff?s=128&d=identicon&r=PG", "display_name": "Jin Liu", "link": "https://stackoverflow.com/users/2221455/jin-liu"}, "reply_to_user": {"reputation": 2076, "user_id": 2416097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/saeab.png?s=128&g=1", "display_name": "bgenchel", "link": "https://stackoverflow.com/users/2416097/bgenchel"}, "edited": false, "score": 0, "creation_date": 1466451819, "post_id": 37851551, "comment_id": 63311879, "body": "VerifyPassword only requires a local password for your users. You could manually batch upload the testing accounts as illustrated by <a href=\"https://github.com/googlesamples/identity-toolkit-python/blob/master/gitkit_command_tool.py\" rel=\"nofollow noreferrer\">github.com/googlesamples/identity-toolkit-python/blob/master&zwnj;&#8203;/&hellip;</a>."}], "tags": [], "owner": {"reputation": 1939, "user_id": 2221455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d87faf24d81c4c1050b815f9715fff?s=128&d=identicon&r=PG", "display_name": "Jin Liu", "link": "https://stackoverflow.com/users/2221455/jin-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1466058952, "creation_date": 1466058952, "answer_id": 37851551, "question_id": 37847164, "link": "https://stackoverflow.com/questions/37847164/programmatic-requests-to-google-identity-toolkit/37851551#37851551", "title": "Programmatic Requests to Google Identity Toolkit", "body": "<p>Google Identity Toolkit has a REST API that you can call from your server: <a href=\"https://developers.google.com/identity/toolkit/web/reference/relyingparty/verifyPassword\" rel=\"nofollow\">https://developers.google.com/identity/toolkit/web/reference/relyingparty/verifyPassword</a>. A Google server API Key is needed in the request URL like <a href=\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=\" rel=\"nofollow\">https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=</a>{YOUR_API_KEY}. You can refer to <a href=\"https://support.google.com/cloud/answer/6158862?hl=en&amp;ref_topic=6262490\" rel=\"nofollow\">this page</a> to obtain an API Key from Google Developer Console.</p>\n"}], "owner": {"reputation": 2076, "user_id": 2416097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/saeab.png?s=128&g=1", "display_name": "bgenchel", "link": "https://stackoverflow.com/users/2416097/bgenchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466058952, "creation_date": 1466031320, "question_id": 37847164, "link": "https://stackoverflow.com/questions/37847164/programmatic-requests-to-google-identity-toolkit", "title": "Programmatic Requests to Google Identity Toolkit", "body": "<p>I'm working on a webapp that uses Google Identity Toolkit for login. We're coming to a point where we need to perform load tests and we definitely want our tests to encompass the whole of our system flow; we want to make sure GITKit doesn't end up being a bottleneck. </p>\n\n<p>However, since GITKit seems to be only useable as a front end component, we haven't been able to figure out a way to include GITKit either in load tests or unit tests, instead extracting Google's GTokens from server logs after a human user has logged in and placing them in an accessible location until expiration, at which point they are replaced.</p>\n\n<p>This has been very cumbersome, and it certainly won't work for load testing where we need to sprout thousands of users at the same time.</p>\n\n<p>Does anyone know a way to programmatically make requests to a GITKit server/log in with GITKit, either through the command line or in a language (preferably python). Thanks!</p>\n"}, {"tags": ["python", "node.js", "mqtt"], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 3398622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a251612226c7c82644d80169837e954b?s=128&d=identicon&r=PG&f=1", "display_name": "macvag", "link": "https://stackoverflow.com/users/3398622/macvag"}, "edited": false, "score": 0, "creation_date": 1466072551, "post_id": 37854081, "comment_id": 63170709, "body": "Thank you! I created different topics for sending the values, and now I am able to control the flow of my program."}], "tags": [], "owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "is_accepted": true, "score": 0, "last_activity_date": 1466072604, "last_edit_date": 1466072604, "creation_date": 1466066467, "answer_id": 37854081, "question_id": 37847157, "link": "https://stackoverflow.com/questions/37847157/mqtt-between-python-and-node-js-sends-only-one-message/37854081#37854081", "title": "mqtt between python and node.js sends only one message", "body": "<p>You're using the same topic for both control and output.</p>\n\n<p>So after receiving a message with <code>Start</code> your code publishes <code>1</code> to the <code>main/app</code> topic and this is immediately received by the python code in <code>on_message</code> and sets <code>message</code> to <code>1</code></p>\n\n<p>So the next time round the loop <code>message</code> is <code>1</code> so none of the if statements match.</p>\n"}], "owner": {"reputation": 371, "user_id": 3398622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a251612226c7c82644d80169837e954b?s=128&d=identicon&r=PG&f=1", "display_name": "macvag", "link": "https://stackoverflow.com/users/3398622/macvag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "accepted_answer_id": 37854081, "answer_count": 1, "score": 0, "last_activity_date": 1521623375, "creation_date": 1466031273, "question_id": 37847157, "link": "https://stackoverflow.com/questions/37847157/mqtt-between-python-and-node-js-sends-only-one-message", "title": "mqtt between python and node.js sends only one message", "body": "<p>I am new to mqtt and python system and I am trying to do some heavy computations in python and send the results to a node.js server.</p>\n\n<p>Every time I run node.js script i get only one result. Here is my simple \ncode:</p>\n\n<p>simple_mqtt.py</p>\n\n<pre><code>message = \"Hello\"\nx=0\ndef add():\n    global x\n    x = x + 1\n\ndef on_publish(client, userdata, mid):\n    print(\"mid: \"+str(mid))\n\ndef on_connect(client, userdata, flags, rc):\n    print(\"Connected with result code \"+str(rc))\n    client.subscribe(\"main/app\")\n\ndef on_message(client, userdata, msg):\n    global message\n    message = msg.payload\n\nclient = paho.Client()\nclient.on_connect = on_connect\nclient.on_message = on_message\nclient.on_publish = on_publish\nclient.connect(\"192.168.2.4\", 1883)\nclient.loop_start()\nwhile True:\n    if message==\"Start\":\n        print message\n        add()\n        client.publish(\"main/app\",x)\n    elif message==\"Stop\":\n        print message\n        client.publish(\"main/app\",\"Ended\")\n    time.sleep(1)\n</code></pre>\n\n<p>and the node.js:</p>\n\n<pre><code>var mqtt    = require('mqtt');\nvar client  = mqtt.connect('mqtt://192.168.2.4:1883');\n\nclient.on('connect', function () {\n  client.subscribe('main/app');\n  client.publish('main/app', 'Start');\n});\nclient.on('message', function (topic, message) {\n  // message is Buffer\n  console.log(message.toString());\n});\n</code></pre>\n\n<p>What I have to modify to get continuous responses from the python until I send the message \"Stop\"? </p>\n"}, {"tags": ["python", "pandas", "dataframe", "nan"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466031492, "post_id": 37847150, "comment_id": 63154284, "body": "proximity can vary column by column.  are you certain a row will either be all NaN or None?"}, {"owner": {"reputation": 5493, "user_id": 1248073, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8ILOh.jpg?s=128&g=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/1248073/curious"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466031638, "post_id": 37847150, "comment_id": 63154331, "body": "Good point! yes, we can assume that a certain row is either all NaNs or none; otherwise, perhaps it&#39;s possible to have proximity per column ? Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1466032084, "creation_date": 1466032084, "answer_id": 37847299, "question_id": 37847150, "link": "https://stackoverflow.com/questions/37847150/pandas-getting-the-distance-to-the-row-used-to-fill-the-missing-na-values/37847299#37847299", "title": "Pandas: Getting the distance to the row used to fill the missing/na values", "body": "<p>You can use this:</p>\n\n<pre><code>def prox(series):\n    groupby_idx = series.notnull().cumsum()\n    groupby = series.groupby(groupby_idx)\n    return groupby.apply(lambda x: pd.Series(range(len(x)))).values\n\nprox(df1.A)\n\narray([0, 0, 1, 2], dtype=int64)\n</code></pre>\n\n<p>then assign to df1:</p>\n\n<pre><code>df1['Proximity'] = prox(df1.A)\n\nprint df1.ffill()\n\n     A    B    C  Proximity\n0  0.0  0.0  0.0          0\n1  1.0  2.0  3.0          0\n2  1.0  2.0  3.0          1\n3  1.0  2.0  3.0          2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1202, "user_id": 2786064, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ca5524efb5a1ed1d24426dd51e8f599?s=128&d=identicon&r=PG&f=1", "display_name": "Kapil Sharma", "link": "https://stackoverflow.com/users/2786064/kapil-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1466032891, "creation_date": 1466032891, "answer_id": 37847422, "question_id": 37847150, "link": "https://stackoverflow.com/questions/37847150/pandas-getting-the-distance-to-the-row-used-to-fill-the-missing-na-values/37847422#37847422", "title": "Pandas: Getting the distance to the row used to fill the missing/na values", "body": "<p>May be something like this:</p>\n\n<pre><code>In[1]: df = pd.DataFrame({\"A\": [1, np.nan, np.nan], \"B\": [2, np.nan, np.nan]})\n\nIn[2]: df.ix[df.B.isnull(), 'distance'] = 1\n\nIn[3]: df.distance = df.distance.cumsum()\n\nIn[4]: df\nOut[4]: \n     A    B  distance\n0  1.0  2.0       NaN\n1  NaN  NaN       1.0\n2  NaN  NaN       2.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1466038607, "creation_date": 1466038607, "answer_id": 37848183, "question_id": 37847150, "link": "https://stackoverflow.com/questions/37847150/pandas-getting-the-distance-to-the-row-used-to-fill-the-missing-na-values/37848183#37848183", "title": "Pandas: Getting the distance to the row used to fill the missing/na values", "body": "<p>You could use <code>.cumsum()</code> so that each <code>notnull</code> block value gets a unique 'id', <code>.groupby()</code> the result and use <code>.cumcount()</code>, which assigns <code>0</code> to all <code>notnull</code> values and consecutive counts to <code>null</code> values::</p>\n\n<pre><code>df['proximity'] = df.groupby(df.notnull().all(axis=1).cumsum()).cumcount()\n</code></pre>\n\n<p>Some sample data:</p>\n\n<pre><code>df = pd.DataFrame(np.random.randint(0, 10, size=(100, 3)), columns=list('ABC'))\ndf.loc[np.random.choice(np.arange(100), 50)] = np.nan\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>      A    B    C  proximity\n0   5.0  5.0  3.0          0\n1   2.0  3.0  1.0          0\n2   0.0  2.0  4.0          0\n3   NaN  NaN  NaN          1\n4   NaN  NaN  NaN          2\n5   5.0  3.0  5.0          0\n6   NaN  NaN  NaN          1\n7   6.0  7.0  8.0          0\n8   1.0  5.0  2.0          0\n9   NaN  NaN  NaN          1\n10  5.0  9.0  6.0          0\n11  NaN  NaN  NaN          1\n12  7.0  8.0  8.0          0\n13  7.0  7.0  5.0          0\n14  4.0  9.0  5.0          0\n15  NaN  NaN  NaN          1\n16  2.0  9.0  8.0          0\n17  NaN  NaN  NaN          1\n18  NaN  NaN  NaN          2\n19  8.0  6.0  7.0          0\n20  8.0  2.0  0.0          0\n21  1.0  3.0  1.0          0\n22  0.0  3.0  9.0          0\n23  8.0  3.0  9.0          0\n24  NaN  NaN  NaN          1\n25  9.0  3.0  6.0          0\n26  NaN  NaN  NaN          1\n27  9.0  0.0  8.0          0\n28  0.0  4.0  9.0          0\n29  8.0  8.0  3.0          0\n..  ...  ...  ...        ...\n70  NaN  NaN  NaN          1\n71  NaN  NaN  NaN          2\n72  4.0  9.0  4.0          0\n73  8.0  2.0  6.0          0\n74  2.0  8.0  2.0          0\n75  3.0  3.0  6.0          0\n76  0.0  9.0  1.0          0\n77  8.0  0.0  8.0          0\n78  3.0  0.0  6.0          0\n79  2.0  4.0  6.0          0\n80  4.0  2.0  4.0          0\n81  1.0  5.0  2.0          0\n82  5.0  4.0  2.0          0\n83  NaN  NaN  NaN          1\n84  NaN  NaN  NaN          2\n85  1.0  2.0  8.0          0\n86  3.0  2.0  8.0          0\n87  4.0  1.0  2.0          0\n88  2.0  8.0  0.0          0\n89  2.0  2.0  6.0          0\n90  7.0  5.0  9.0          0\n91  0.0  6.0  8.0          0\n92  NaN  NaN  NaN          1\n93  9.0  5.0  8.0          0\n94  NaN  NaN  NaN          1\n95  NaN  NaN  NaN          2\n96  NaN  NaN  NaN          3\n97  1.0  4.0  2.0          0\n98  NaN  NaN  NaN          1\n99  7.0  2.0  5.0          0\n</code></pre>\n"}], "owner": {"reputation": 5493, "user_id": 1248073, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8ILOh.jpg?s=128&g=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/1248073/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1466038607, "creation_date": 1466031242, "question_id": 37847150, "link": "https://stackoverflow.com/questions/37847150/pandas-getting-the-distance-to-the-row-used-to-fill-the-missing-na-values", "title": "Pandas: Getting the distance to the row used to fill the missing/na values", "body": "<p>I will do my best to explain this.</p>\n\n<p>I have a pandas dataframe and I am trying to get the distance to the row which was used to fill a row of <code>nan</code> values in the same dataframe.</p>\n\n<p>To elaborate, say I have the following dataframe (<code>df</code>) that contains 2 rows of <code>nan</code> values,</p>\n\n<pre><code>     A    B    C\n0  0.0  0.0  0.0\n1  1.0  2.0  3.0\n2  NaN  NaN  NaN\n3  NaN  NaN  NaN\n</code></pre>\n\n<p>Using the forward fill <code>df.fillna(method='ffill')</code>, I get the following dataframe,</p>\n\n<pre><code>     A    B    C\n0  0.0  0.0  0.0\n1  1.0  2.0  3.0\n2  1.0  2.0  3.0\n3  1.0  2.0  3.0\n</code></pre>\n\n<p>I would like to have another column (let's call it <code>Proximity</code>) in the dataframe that contains the distance  to the row from which it filled its nan values, in this example, it should be,</p>\n\n<pre><code>     A    B    C  Proximity\n0  0.0  0.0  0.0  0.0\n1  1.0  2.0  3.0  0.0\n2  1.0  2.0  3.0  1.0\n3  1.0  2.0  3.0  2.0\n</code></pre>\n\n<p>Row 2's Proximity is 1, since it used the row above it to fill its own <code>nan</code> values.</p>\n\n<p>Row 3's Proximity is 2, since it used the row above it by two levels to fill its own <code>nan</code> values.</p>\n\n<p>Row 1 is already filled, therefore, the row it used to fill its own <code>nan</code> values is zero because it doesn't have any <code>nan</code> values.</p>\n\n<p>Is there a way I can compute that <code>Proximity</code> column efficiently ?</p>\n\n<p>By efficiently, I mean without using <code>for</code> loops.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "numpy", "unique"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1466032246, "post_id": 37847053, "comment_id": 63154512, "body": "If the input is <code>[ 1.1,  1.3,  1.5,  2. ,  2.1,  2.5,  2.9]</code>, what must be the output for that tolerance of <code>0.3</code>?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1466032994, "post_id": 37847053, "comment_id": 63154706, "body": "And also, would be the input be always sorted?"}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 7, "last_activity_date": 1466033590, "last_edit_date": 1466033590, "creation_date": 1466031076, "answer_id": 37847116, "question_id": 37847053, "link": "https://stackoverflow.com/questions/37847053/uniquify-an-array-list-with-a-tolerance-in-python-uniquetol-equivalent/37847116#37847116", "title": "uniquify an array/list with a tolerance in python (uniquetol equivalent)", "body": "<p>With <code>A</code> as the input array and <code>tol</code> as the tolerance value, we could have a vectorized approach with <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/user/basics.broadcasting.html\" rel=\"noreferrer\"><code>NumPy broadcasting</code></a>, like so -</p>\n\n<pre><code>A[~(np.triu(np.abs(A[:,None] - A) &lt;= tol,1)).any(0)]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [20]: A = np.array([2.1,  1.3 , 1.9 , 1.1 , 2.0 , 2.5 , 2.9])\n\nIn [21]: tol = 0.3\n\nIn [22]: A[~(np.triu(np.abs(A[:,None] - A) &lt;= tol,1)).any(0)]\nOut[22]: array([ 2.1,  1.3,  2.5,  2.9])\n</code></pre>\n\n<p>Notice <code>1.9</code> being gone because we had <code>2.1</code> within the tolerance of <code>0.3</code>. Then, <code>1.1</code> gone for <code>1.3</code> and <code>2.0</code> for <code>2.1</code>.</p>\n\n<p>Please note that this would create a unique array with \"chained-closeness\" check. As an example :</p>\n\n<pre><code>In [91]: A = np.array([ 1.1,  1.3,  1.5,  2. ,  2.1,  2.2, 2.35, 2.5,  2.9])\n\nIn [92]: A[~(np.triu(np.abs(A[:,None] - A) &lt;= tol,1)).any(0)]\nOut[92]: array([ 1.1,  2. ,  2.9])\n</code></pre>\n\n<p>Thus, <code>1.3</code> is gone because of <code>1.1</code> and <code>1.5</code> is gone because of <code>1.3</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "is_accepted": false, "score": 2, "last_activity_date": 1466098860, "last_edit_date": 1466098860, "creation_date": 1466096256, "answer_id": 37865218, "question_id": 37847053, "link": "https://stackoverflow.com/questions/37847053/uniquify-an-array-list-with-a-tolerance-in-python-uniquetol-equivalent/37865218#37865218", "title": "uniquify an array/list with a tolerance in python (uniquetol equivalent)", "body": "<p>In pure Python 2, I wrote the following:</p>\n\n<pre><code>a = [1.1, 1.3, 1.9, 2.0, 2.5, 2.9]                                              \n\n# Per http://fr.mathworks.com/help/matlab/ref/uniquetol.html                                                                                    \ntol = max(map(lambda x: abs(x), a)) * 0.3                                       \n\na.sort()                                                                        \n\nresults = [a.pop(0), ]                                                          \n\nfor i in a:\n    # Skip items within tolerance.                                                                     \n    if abs(results[-1] - i) &lt;= tol:                                             \n        continue                                                                \n    results.append(i)                                                           \n\nprint a                                                                         \nprint results\n</code></pre>\n\n<p>Which results in</p>\n\n<pre><code>[1.3, 1.9, 2.0, 2.5, 2.9]\n[1.1, 2.0, 2.9]\n</code></pre>\n\n<p>Which is what the spec seems to agree with, but isn't consistent with your example.</p>\n\n<p>If I just set the tolerance to <code>0.3</code> instead of <code>max(map(lambda x: abs(x), a)) * 0.3</code>, I get:</p>\n\n<pre><code>[1.3, 1.9, 2.0, 2.5, 2.9]\n[1.1, 1.9, 2.5, 2.9]\n</code></pre>\n\n<p>...which is consistent with your example.</p>\n"}], "owner": {"reputation": 2016, "user_id": 3464212, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/264463d9c7633203f515ebcc44b9a1da?s=128&d=identicon&r=PG", "display_name": "Covich", "link": "https://stackoverflow.com/users/3464212/covich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1905, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1470066506, "creation_date": 1466030681, "last_edit_date": 1470066506, "question_id": 37847053, "link": "https://stackoverflow.com/questions/37847053/uniquify-an-array-list-with-a-tolerance-in-python-uniquetol-equivalent", "title": "uniquify an array/list with a tolerance in python (uniquetol equivalent)", "body": "<p>I want to find the unique elements of an array in a certain range of tolerance</p>\n\n<p>For instance, for an array/list</p>\n\n<pre><code>[1.1 , 1.3 , 1.9 , 2.0 , 2.5 , 2.9]\n</code></pre>\n\n<p>Function will return </p>\n\n<pre><code>[1.1 , 1.9 , 2.5 , 2.9]\n</code></pre>\n\n<p>If the tolerance is <code>0.3</code></p>\n\n<p>at bit like the MATLAB function \n<a href=\"http://fr.mathworks.com/help/matlab/ref/uniquetol.html\" rel=\"noreferrer\">http://mathworks.com/help/matlab/ref/uniquetol.html</a>\n(but this function uses a relative tolerance, an absolute one can be sufficient)\nWhat is the pythonic way to implement it ? (<code>numpy</code> is privilegied)</p>\n"}, {"tags": ["python", "active-directory", "passwords", "ldap", "python-3.5"], "comments": [{"owner": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "edited": false, "score": 0, "creation_date": 1466099390, "post_id": 37847042, "comment_id": 63189171, "body": "I also looked at <a href=\"http://stackoverflow.com/questions/20875708/how-can-i-change-password-for-domain-userwindows-active-directory-using-python?rq=1\" title=\"how can i change password for domain userwindows active directory using python\">stackoverflow.com/questions/20875708/&hellip;</a> however the server I am attempting to interact with is not using any certificates or SSL."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "edited": false, "score": 0, "creation_date": 1466426018, "post_id": 37890705, "comment_id": 63295456, "body": "ok so my code has changed a bit since i posted, and i added a variable that stores a single users DN (which is what i assume you were telling me to do with dn = conn.entries[0].entry_get_dn()) so I will try the extend method today."}, {"owner": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "edited": false, "score": 0, "creation_date": 1466427295, "post_id": 37890705, "comment_id": 63296350, "body": "So i tried the conn.extend.microsoft.modify_password(dn, None, new_password) method modified slightly for my DN variable name... seems to be working as it does not give an error, however the password does not appear to be getting changed... i am confused how that can execute without throwing an exception, yet doesnt seem to be setting the password?  Also, how to I manipulate the &quot;change password on next logon&quot; flag? I will edit my question with my current code block."}, {"owner": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "edited": false, "score": 0, "creation_date": 1466451606, "post_id": 37890705, "comment_id": 63311774, "body": "So after some more intense Googling ive been seeing that apparently AD wont actually change a password like this unless it is through an SSL connection or something? Is this accurate, and if so.... how can I enable this if the server is not using certificates or anything? :/"}, {"owner": {"reputation": 1325, "user_id": 2804335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea225b55ab6bfbf8d715ae756d32eb?s=128&d=identicon&r=PG&f=1", "display_name": "cannatag", "link": "https://stackoverflow.com/users/2804335/cannatag"}, "reply_to_user": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "edited": false, "score": 1, "creation_date": 1466480437, "post_id": 37890705, "comment_id": 63320289, "body": "Try with<code>use_ssl=True</code> while defining the server object."}, {"owner": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "edited": false, "score": 0, "creation_date": 1466503166, "post_id": 37890705, "comment_id": 63331360, "body": "ive tried the following with both specifying the port as well as not, with no luck:  server = ldap3.Server(&#39;host.com&#39;, port = 636, use_ssl = True) conn = Connection(server, user=&#39;%s@host.com&#39; %zid, password = &quot;password&quot;, authentication=NTLM, auto_bind=True)"}, {"owner": {"reputation": 1325, "user_id": 2804335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea225b55ab6bfbf8d715ae756d32eb?s=128&d=identicon&r=PG&f=1", "display_name": "cannatag", "link": "https://stackoverflow.com/users/2804335/cannatag"}, "reply_to_user": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "edited": false, "score": 0, "creation_date": 1468068913, "post_id": 37890705, "comment_id": 63982763, "body": "You can&#39;t change the password if the connection is not encrypted. You must configure the AD server to use a certificate."}, {"owner": {"reputation": 43703, "user_id": 10583, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3891f38e5165127cac92a4e9e4aba688?s=128&d=identicon&r=PG", "display_name": "Josh Smeaton", "link": "https://stackoverflow.com/users/10583/josh-smeaton"}, "edited": false, "score": 0, "creation_date": 1473055461, "post_id": 37890705, "comment_id": 65981072, "body": "Is ssl also a requirement for using <code>ModifyPassword</code> on OpenLDAP? I should probably ask my own question for this, and still might."}, {"owner": {"reputation": 43703, "user_id": 10583, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3891f38e5165127cac92a4e9e4aba688?s=128&d=identicon&r=PG", "display_name": "Josh Smeaton", "link": "https://stackoverflow.com/users/10583/josh-smeaton"}, "edited": false, "score": 0, "creation_date": 1473057745, "post_id": 37890705, "comment_id": 65981835, "body": "I&#39;ve asked a specific question regarding openldap here: <a href=\"http://stackoverflow.com/questions/39325089/changing-userpassword-in-openldap-using-ldap3-library\" title=\"changing userpassword in openldap using ldap3 library\">stackoverflow.com/questions/39325089/&hellip;</a>"}, {"owner": {"reputation": 113, "user_id": 9560663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-09ZKGhLmwzo/AAAAAAAAAAI/AAAAAAAAASQ/Slyl0B1kXi8/photo.jpg?sz=128", "display_name": "Ryan", "link": "https://stackoverflow.com/users/9560663/ryan"}, "edited": false, "score": 0, "creation_date": 1600982312, "post_id": 37890705, "comment_id": 113269759, "body": "Please note that the <a href=\"https://ldap3.readthedocs.io/en/latest/microsoft.html\" rel=\"nofollow noreferrer\">docs</a> state that the format should actually be:    <code>conn.extend.microsoft.modify_password(dn, new_password)</code>"}], "tags": [], "owner": {"reputation": 1325, "user_id": 2804335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea225b55ab6bfbf8d715ae756d32eb?s=128&d=identicon&r=PG&f=1", "display_name": "cannatag", "link": "https://stackoverflow.com/users/2804335/cannatag"}, "is_accepted": false, "score": 4, "last_activity_date": 1466199378, "creation_date": 1466199378, "answer_id": 37890705, "question_id": 37847042, "link": "https://stackoverflow.com/questions/37847042/changing-active-directory-user-password-in-python-3-x/37890705#37890705", "title": "Changing Active Directory user password in Python 3.x", "body": "<p>ldap3 contains a specific method for changing AD password, just add the following after you generated a new password:</p>\n\n<p><code>\ndn = conn.entries[0].entry_get_dn()  # supposing you got back a single entry\nconn.extend.microsoft.modify_password(dn, None, new_password)\n</code></p>\n\n<p>This should properly encode the password and store it in AD.</p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 11810350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2aecb38e76cafa74638c87e7c2402c6?s=128&d=identicon&r=PG", "display_name": "user138278", "link": "https://stackoverflow.com/users/11810350/user138278"}, "edited": false, "score": 0, "creation_date": 1564609367, "post_id": 44176967, "comment_id": 101092293, "body": "worked like a charm and tested on active directory server running windows 2012"}], "tags": [], "owner": {"reputation": 76, "user_id": 4924488, "user_type": "registered", "profile_image": "https://graph.facebook.com/851591181544118/picture?type=large", "display_name": "Tamas Tobi", "link": "https://stackoverflow.com/users/4924488/tamas-tobi"}, "is_accepted": false, "score": 3, "last_activity_date": 1495704495, "creation_date": 1495704495, "answer_id": 44176967, "question_id": 37847042, "link": "https://stackoverflow.com/questions/37847042/changing-active-directory-user-password-in-python-3-x/44176967#44176967", "title": "Changing Active Directory user password in Python 3.x", "body": "<p>This code is working with Windows 2012 R2 AD:</p>\n\n<p>First, install latest ldap3:</p>\n\n<p>sudo pip3 install ldap</p>\n\n<pre><code>#!/usr/bin/python3\n\nimport ldap3\n\nSERVER='127.0.0.1'\nBASEDN=\"DC=domain,DC=com\"\nUSER=\"user_domain_login_name@domain.com\"\nCURREENTPWD=\"current_password\"\nNEWPWD=\"new_password\"\n\nSEARCHFILTER='(&amp;(userPrincipalName='+USER+')(objectClass=person))'\n\nUSER_DN=\"\"\nUSER_CN=\"\"\n\nldap_server = ldap3.Server(SERVER, get_info=ldap3.ALL)\nconn = ldap3.Connection(ldap_server, USER, CURREENTPWD, auto_bind=True)\nconn.start_tls()\nprint(conn)\n\nconn.search(search_base = BASEDN,\n         search_filter = SEARCHFILTER,\n         search_scope = ldap3.SUBTREE,\n         attributes = ['cn', 'givenName', 'userPrincipalName'],\n         paged_size = 5)\n\nfor entry in conn.response:\n    if entry.get(\"dn\") and entry.get(\"attributes\"):\n        if entry.get(\"attributes\").get(\"userPrincipalName\"):\n            if entry.get(\"attributes\").get(\"userPrincipalName\") == USER:\n                USER_DN=entry.get(\"dn\")\n                USER_CN=entry.get(\"attributes\").get(\"cn\")\n\nprint(\"Found user:\", USER_CN)\n\nif USER_DN:\n    print(USER_DN)\n    print(ldap3.extend.microsoft.modifyPassword.ad_modify_password(conn, USER_DN, NEWPWD, CURREENTPWD,  controls=None))\nelse:\n    print(\"User DN is missing!\")\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6471811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104009587137248/picture?type=large", "display_name": "woundjuice", "link": "https://stackoverflow.com/users/6471811/woundjuice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7550, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1563574816, "creation_date": 1466030632, "last_edit_date": 1495535489, "question_id": 37847042, "link": "https://stackoverflow.com/questions/37847042/changing-active-directory-user-password-in-python-3-x", "title": "Changing Active Directory user password in Python 3.x", "body": "<p>I am trying to make a Python script that will open an LDAP connection to a server running AD, take a search entry (in this case a name), search for that entry and change that users password to a randomly generated password (as well as set the option to change password on logon) and then send them an automated secure email containing the new temporary password.</p>\n\n<p>So far I have been able to connect to the server, and search for a single DN which returns. The temporary password is being generated, and an email is being sent (although the password is not hashed, and the email is not secure yet). However, I cannot find any information on where to go from here. </p>\n\n<p>I have found <a href=\"https://stackoverflow.com/questions/33712874/change-windows-user-password-with-python/33713119#33713119\">Change windows user password with python</a> however I see that this does not play well with AD, and the other LDAP in Python documentation I have been finding seems to be outdated from 2.x and no longer works. The documentation for ldap3 (<a href=\"https://media.readthedocs.org/pdf/ldap3/stable/ldap3.pdf\" rel=\"nofollow noreferrer\">https://media.readthedocs.org/pdf/ldap3/stable/ldap3.pdf</a>) also doesnt seem to really mention anything for it, and exhaustive Googling has been fruitless. I am new to this kind of programming having only low level or academic knowledge previously, so this has been a bit frustrating but Python is my strongest language.</p>\n\n<p>----------------EDITED CODE TO CURRENT STATUS-----------------------</p>\n\n<pre><code>#Takes input for name which will be used for search criterion\nzid = input(\"ZID: \")\nzid = str(zid).lower()\nprint(zid)\n\n#Binds session to the server and opens a connection\ntry:\n    server = ldap3.Server('ldap://&lt;IP_Address&gt;', get_info=all)\n    conn = ldap3.Connection(server, '%s@something.com' %zid, password = \"&lt;something&gt;\", auto_bind=True) \n    print(\"Successfully bound to server.\\n\")\nexcept:\n    print(\"Unsucessful initialization of &lt;IP_Address&gt;\")\n    try:\n        server = ldap3.Server('ldap://&lt;IP_Address&gt;', get_info=all)\n        conn = ldap3.Connection(server, '%s@something.com' %zid, password = \"&lt;something&gt;\", auto_bind=True) \n        print(\"Successfully bound to server.\\n\")\n    except:\n        print(\"Unsucessful initialization of &lt;IP_Address&gt;\")\n        try:\n            server = ldap3.Server('ldap://&lt;IP_Address&gt;', get_info=all)\n            conn = ldap3.Connection(server, '%s@something.com', password = \"&lt;something&gt;\", auto_bind=True) %zid \n            print(\"Successfully bound to server.\\n\")\n        except:\n            print(\"Unsucessful initialization of &lt;IP_Address&gt;\")\n            sys.exit(0)\n\n#Searches and prints LDAP entries\ntry:\n    base_dn = 'DC=&lt;something&gt;,DC=&lt;something&gt;,DC=&lt;something&gt;,DC=&lt;something&gt;,DC=com'\n    zid_filter = '(sAMAccountName=%s)' %zid\n    conn.search(base_dn, zid_filter, attributes=['mail'])\n\n    #i.e. \"DN: CN=&lt;First Last&gt;,OU=&lt;something&gt;, DC= &lt;something&gt;\n    user_dn = str(conn.entries)\n\n    #i.e. \"CN=&lt;First Last&gt;\"\n    front = user_dn.find('C')\n    back = user_dn.find(',')\n    user_cn = user_dn[front:back]\n\n    #i.e. \"&lt;First Last&gt;\"\n    display_name = user_cn[3:]\n\n    #i.e. \"first.last@&lt;something&gt;.com\"\n    raw_email = str(conn.entries)\n    front = raw_email.find('mail: ')\n    back = raw_email.find('@&lt;something&gt;.com')\n    user_email = raw_email[front + 6:back] + '@&lt;something&gt;.com'\nexcept:\n    print(\"Could not search entries\")\n\n#Generates random 12 digit alpha-numeric password\ntry:\n    new_password = ''.join(random.SystemRandom().choice(string.ascii_letters + string.digits) for _ in range(12))\n    print(new_password)\n    print(\"New password successfully generated\")\nexcept:\n    print(\"New password could not be generated\")\n\n\n#Set and replace AD Password\ntry:\n    conn.extend.microsoft.modify_password(user_dn, None, new_password)\n    print (\"Active Directory password was set successfully!\")\nexcept:\n    print('Error setting AD password')\n    sys.exit(0)\n</code></pre>\n\n<hr>\n\n<p>Any suggestions on how to get/set the user password and hash the password for security purposes during this whole ordeal? For the email I imagine I can force it to use HTTPS and that would be sufficient, but the connection to the server passing the new_password to I would like to secure.</p>\n"}, {"tags": ["python", "sockets", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 811, "user_id": 537670, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/024cfbb9590804bc862ff53bcc452d84?s=128&d=identicon&r=PG", "display_name": "user537670", "link": "https://stackoverflow.com/users/537670/user537670"}, "edited": false, "score": 0, "creation_date": 1466031514, "post_id": 37847004, "comment_id": 63154295, "body": "I am seeing the issue even when I am trying to open google.com page"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5943740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3OiggEeI_6Y/AAAAAAAAAAI/AAAAAAAAAGY/qo21gKSZn7Q/photo.jpg?sz=128", "display_name": "\u90ed\u53e4\u6587\u5b57", "link": "https://stackoverflow.com/users/5943740/%e9%83%ad%e5%8f%a4%e6%96%87%e5%ad%97"}, "is_accepted": false, "score": -1, "last_activity_date": 1466737407, "last_edit_date": 1466737407, "creation_date": 1466732891, "answer_id": 38004470, "question_id": 37847004, "link": "https://stackoverflow.com/questions/37847004/connectionreseterror-winerror-10054-while-trying-to-access-a-website-using-se/38004470#38004470", "title": "ConnectionResetError: [WinError 10054] while trying to access a website using Selenium Webdriver Python code", "body": "<p>I had the same problem. Then I use the other versions of Firefox like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9iRq7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9iRq7.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then solve the problem.</p>\n"}], "owner": {"reputation": 811, "user_id": 537670, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/024cfbb9590804bc862ff53bcc452d84?s=128&d=identicon&r=PG", "display_name": "user537670", "link": "https://stackoverflow.com/users/537670/user537670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 778, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466737407, "creation_date": 1466030382, "question_id": 37847004, "link": "https://stackoverflow.com/questions/37847004/connectionreseterror-winerror-10054-while-trying-to-access-a-website-using-se", "title": "ConnectionResetError: [WinError 10054] while trying to access a website using Selenium Webdriver Python code", "body": "<p>i am new to Selenium Web Driver and I am trying to access a specific website via Selenium Webdriver using python. i am getting the below error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 9, in &lt;module&gt;\n    driver = webdriver.Firefox()\n  File \"C:\\Python34\\lib\\site-packages\\selenium\\webdriver\\firefox\\webdriver.py\", line 85, in __init__\n    keep_alive=True)\n  File \"C:\\Python34\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 90, in __init__\n    self.start_session(desired_capabilities, browser_profile)\n  File \"C:\\Python34\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 177, in start_session\n    response = self.execute(Command.NEW_SESSION, capabilities)\n  File \"C:\\Python34\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 234, in execute\n    response = self.command_executor.execute(driver_command, params)\n  File \"C:\\Python34\\lib\\site-packages\\selenium\\webdriver\\remote\\remote_connection.py\", line 401, in execute\n    return self._request(command_info[0], url, body=data)\n  File \"C:\\Python34\\lib\\site-packages\\selenium\\webdriver\\remote\\remote_connection.py\", line 432, in _request\n    resp = self._conn.getresponse()\n  File \"C:\\Python34\\lib\\http\\client.py\", line 1172, in getresponse\n    response.begin()\n  File \"C:\\Python34\\lib\\http\\client.py\", line 351, in begin\n    version, status, reason = self._read_status()\n  File \"C:\\Python34\\lib\\http\\client.py\", line 313, in _read_status\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\n  File \"C:\\Python34\\lib\\socket.py\", line 371, in readinto\n    return self._sock.recv_into(b)\nConnectionResetError: [WinError 10054] An existing connection was forcibly closed by the remote host\n</code></pre>\n\n<p>Error seems to point to me to Python socket error, but i am not sure how I can rectify it.</p>\n\n<p>My code below:</p>\n\n<pre><code>import socket, sys\nimport errno\nfrom selenium import webdriver\nfrom selenium.common.exceptions import TimeoutException\nfrom selenium.webdriver.support.ui import WebDriverWait \nfrom selenium.webdriver.support import expected_conditions as EC \n\n\ndriver = webdriver.Firefox()\ndriver.get(\"http://xx.xx.xx.xx:9191\")\nprint (driver.title)\n\ntry:\n  WebDriverWait(driver, 10).until(EC.title_contains(\"manager\"))\n  print (driver.title)\n\nfinally:\n    driver.quit()\n</code></pre>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1466050144, "post_id": 37846992, "comment_id": 63158511, "body": "Show your model please"}, {"owner": {"reputation": 539, "user_id": 5166521, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xgFqd.jpg?s=128&g=1", "display_name": "allardbrain", "link": "https://stackoverflow.com/users/5166521/allardbrain"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1466096474, "post_id": 37846992, "comment_id": 63187475, "body": "@e4c5 I added a snippet from my models.py."}, {"owner": {"reputation": 539, "user_id": 5166521, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xgFqd.jpg?s=128&g=1", "display_name": "allardbrain", "link": "https://stackoverflow.com/users/5166521/allardbrain"}, "reply_to_user": {"reputation": 24142, "user_id": 3955830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f57e29619783576502a620f47ad2e3b?s=128&d=identicon&r=PG", "display_name": "solarissmoke", "link": "https://stackoverflow.com/users/3955830/solarissmoke"}, "edited": false, "score": 0, "creation_date": 1466096484, "post_id": 37846992, "comment_id": 63187481, "body": "@solarissmoke In researching this problem, I of course read through the SO question you&#39;ve linked to as a possible duplicate. The difference between our posts is that my ImageFileField simply doesn&#39;t show up in the rendering of the form in HTML, whereas the other person wants to customize an ImageFileField that already shows up. I&#39;m seeking help with how to get my ImageFileField to render. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 5166521, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xgFqd.jpg?s=128&g=1", "display_name": "allardbrain", "link": "https://stackoverflow.com/users/5166521/allardbrain"}, "edited": false, "score": 0, "creation_date": 1466126132, "post_id": 37865483, "comment_id": 63199883, "body": "Thank you, @e4c5, you are correct. I got the field type mixed up. I ended up referencing the HTML source code for a solution. I appreciate your help with this!"}, {"owner": {"reputation": 539, "user_id": 5166521, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xgFqd.jpg?s=128&g=1", "display_name": "allardbrain", "link": "https://stackoverflow.com/users/5166521/allardbrain"}, "edited": false, "score": 0, "creation_date": 1466126806, "post_id": 37865483, "comment_id": 63200014, "body": "Thanks, @e4c5, I just upvoted your answer. I&#39;m unable to &quot;accept&quot; the answer I provided until tomorrow, per the error message."}], "tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": false, "score": 1, "last_activity_date": 1466097161, "creation_date": 1466097161, "answer_id": 37865483, "question_id": 37846992, "link": "https://stackoverflow.com/questions/37846992/django-clearableinputfield-in-form-doesnt-render-in-html/37865483#37865483", "title": "Django ClearableInputField in form doesn&#39;t render in HTML", "body": "<p>By default django <code>ModelForm</code> uses <code>django.forms.ImageField</code> and not <code>ClearableInputField</code> for <code>django.db.ImageField</code> as revealed at <a href=\"https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/#field-types\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/#field-types</a></p>\n\n<p>And I do believe you actually meant <a href=\"https://docs.djangoproject.com/en/1.9/ref/forms/widgets/#clearablefileinput\" rel=\"nofollow\">ClearableFileInput</a>  </p>\n\n<blockquote>\n  <p>ClearableFileInput\u00b6\n  class ClearableFileInput File upload input: ,\n  with an additional checkbox input to clear the field\u2019s value, if the\n  field is not required and has initial data.</p>\n</blockquote>\n\n<p>How you can make use of it is by changing the widget in the class meta</p>\n\n<pre><code>class PostForm(forms.ModelForm):\n\n    class Meta:\n        model = Items\n        fields = ('title', 'description', 'image_file')\n        widgets = {\n            'name': ClearableFileInput(),\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 539, "user_id": 5166521, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xgFqd.jpg?s=128&g=1", "display_name": "allardbrain", "link": "https://stackoverflow.com/users/5166521/allardbrain"}, "is_accepted": false, "score": 1, "last_activity_date": 1466126083, "creation_date": 1466126083, "answer_id": 37871653, "question_id": 37846992, "link": "https://stackoverflow.com/questions/37846992/django-clearableinputfield-in-form-doesnt-render-in-html/37871653#37871653", "title": "Django ClearableInputField in form doesn&#39;t render in HTML", "body": "<p>I ended up using the Chrome tool to inspect the HTML source for the page that rendered correctly (but ugly), and used that as a guide to custom build the form in HTML to my liking. This is what I needed to add into my HTML form to get it right:</p>\n\n<pre><code>            {% if item.image_file %}\n            Currently:\n            &lt;a href=\"{{item.image_file.url}}\"&gt; {{item.image_file.url}}&lt;/a&gt;\n            &lt;input id=\"image_file-clear_id\" name=\"image_file-clear\" type=\"checkbox\" /&gt; &lt;label for=\"image_file-clear_id\"&gt;Clear&lt;/label&gt;&lt;br /&gt;Change: &lt;input id=\"id_image_file\" name=\"image_file\" type=\"file\" /&gt;&lt;/p&gt;\n            {% endif %}\n\n            {% if not item.image_file %}\n            &lt;input id=\"id_image_file\" name=\"image_file\" type=\"file\" /&gt;&lt;/p&gt;\n            {% endif %}\n</code></pre>\n"}], "owner": {"reputation": 539, "user_id": 5166521, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xgFqd.jpg?s=128&g=1", "display_name": "allardbrain", "link": "https://stackoverflow.com/users/5166521/allardbrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "closed_date": 1466979297, "answer_count": 2, "score": 1, "last_activity_date": 1466126083, "creation_date": 1466030350, "last_edit_date": 1466096200, "question_id": 37846992, "link": "https://stackoverflow.com/questions/37846992/django-clearableinputfield-in-form-doesnt-render-in-html", "closed_reason": "Duplicate", "title": "Django ClearableInputField in form doesn&#39;t render in HTML", "body": "<p>I'm working on a web app that has photo upload functionality. I created a ModelForm to gather minimal user info plus a photo, and when I render it in HTML as <code>{{ form.as_p }}</code>, the field that allows the user to upload an image shows up just fine. The problem is, the form doesn't look good.</p>\n\n<p>I need to be able to manually render the form in order to make it look better. I have written the HTML for this, and everything looks right except for the ImageFileField. Only the label gets rendered, not the upload button, checkbox to clear the file, etc.</p>\n\n<p><strong>What do I need to do to get the ImageFileField from the ModelForm to render correctly in my custom HTML?</strong> I've looked at the Django docs up and down, looked here on SO and can't find anyone else who's had this issue. Many thanks in advance!</p>\n\n<p><a href=\"https://i.stack.imgur.com/uSCQj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uSCQj.jpg\" alt=\"Manually rendered HTML for ModelForm\"></a></p>\n\n<p><strong>forms.py snippet</strong></p>\n\n<pre><code>class PostForm(forms.ModelForm):\n\n    class Meta:\n        model = Items\n        fields = ('title', 'description', 'image_file')\n</code></pre>\n\n<p><strong>new_item.html snippet</strong></p>\n\n<pre><code>&lt;form enctype=\"multipart/form-data\" method=\"post\" action=\"\" class=\"post-form\"&gt;\n\n    {% csrf_token %}\n\n    {{ form.non_field_errors }}\n\n    &lt;div class=\"fieldWrapper\"&gt;\n        {{ form.title.errors }}\n        &lt;label for=\"{{ form.title.id_for_label }}\"&gt;Title:&lt;/label&gt;&lt;br&gt;\n        {{ form.title }}\n    &lt;/div&gt;&lt;br&gt;\n\n    &lt;div class=\"fieldWrapper\"&gt;\n        {{ form.description.errors }}\n        &lt;label for=\"{{ form.description.id_for_label }}\"&gt;Description:    &lt;/label&gt;&lt;br&gt;\n        {{ form.description }}\n    &lt;/div&gt;&lt;br&gt;\n\n    &lt;div class=\"fieldWrapper\"&gt;\n        {{ form.image_field.errors }}\n        &lt;label for=\"{{ form.image_field.id_for_label }}\"&gt;Image (optional):&lt;/label&gt;&lt;br&gt;\n        {{ form.image_field }}\n    &lt;/div&gt;\n\n    &lt;button type=\"submit\" class=\"save btn btn-default\"&gt;Save&lt;/button&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>models.py snippet</strong></p>\n\n<pre><code>class Items(models.Model):\n\n    title = models.CharField(max_length=1000, null=False)\n    description = models.TextField(max_length=1000, null=False)\n    image_file = models.ImageField(max_length=1000,\n                                   blank=True,\n                                   default='',\n                                   null=True,\n                                   upload_to='item_photos')\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "plot", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4793847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d3c775d7fe7fecf27d87c14af47d1390?s=128&d=identicon&r=PG&f=1", "display_name": "Doctor White", "link": "https://stackoverflow.com/users/4793847/doctor-white"}, "edited": false, "score": 0, "creation_date": 1466031093, "post_id": 37847100, "comment_id": 63154171, "body": "Thank you. I found that the index is not integers. Is there any easy way to convert my indexes to integers?"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1466031184, "last_edit_date": 1466031184, "creation_date": 1466030983, "answer_id": 37847100, "question_id": 37846945, "link": "https://stackoverflow.com/questions/37846945/create-continuous-graph-using-matplotlib-and-pandas/37847100#37847100", "title": "Create continuous graph using matplotlib and pandas", "body": "<p>When I construct the dataframe as such:</p>\n\n<pre><code>df = pd.DataFrame([[22, 90, 98],\n                   [50, 06, 56],\n                   [60, 58, 44],\n                   [30, 62, 00]],\n                  index=pd.Index([7, 8, 23, 49], name='MyIndexex'),\n                  columns=['column1', 'column2', 'column3'])\n\nprint df\n\n           column1  column2  column3\nMyIndexex                           \n7               22       90       98\n8               50        6       56\n23              60       58       44\n49              30       62        0\n</code></pre>\n\n<p>then plot:</p>\n\n<pre><code>df.plot()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/IwP1g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IwP1g.png\" alt=\"enter image description here\"></a></p>\n\n<p>I suspect your index is not what you think it is.</p>\n\n<p>To force your index to be integers do:</p>\n\n<pre><code>df.index = df.index.astype(int)\ndf.plot()\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4793847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d3c775d7fe7fecf27d87c14af47d1390?s=128&d=identicon&r=PG&f=1", "display_name": "Doctor White", "link": "https://stackoverflow.com/users/4793847/doctor-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 37847100, "answer_count": 1, "score": 1, "last_activity_date": 1466031184, "creation_date": 1466030156, "last_edit_date": 1466030751, "question_id": 37846945, "link": "https://stackoverflow.com/questions/37846945/create-continuous-graph-using-matplotlib-and-pandas", "title": "Create continuous graph using matplotlib and pandas", "body": "<p>I have a dataframe like this.</p>\n\n<pre><code>             column1    column2     column3\n  MyIndexes\n  7          22         90           98\n  8          50         06           56\n  23         60         58           44\n  49         30         62           00\n</code></pre>\n\n<p>I am using df.plot to plot a line chart. The problem is that using df.plot() treats the index as categorical data and plots graph for each of them (7, 8, 23 and 49). However I want these to be treated as numeric values and have a graph with even xticks and then plot these points into the graph. How will I be able to do that?</p>\n"}, {"tags": ["python", "generics", "typing"], "comments": [{"owner": {"reputation": 40406, "user_id": 336527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a57f523157ebdf6e5a9662d2e8754b9?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/336527/max"}, "edited": false, "score": 0, "creation_date": 1492397370, "post_id": 37846924, "comment_id": 73945485, "body": "This works with the current versioon of mypy. It was probably not fully supported at the time you tried it."}], "owner": {"reputation": 409, "user_id": 3524689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a7001abae6178fa88c866751cabc26ea?s=128&d=identicon&r=PG", "display_name": "salotz", "link": "https://stackoverflow.com/users/3524689/salotz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1492427868, "creation_date": 1466030050, "last_edit_date": 1492427868, "question_id": 37846924, "link": "https://stackoverflow.com/questions/37846924/deriving-generic-types-with-fewer-arguments-in-python-3", "title": "Deriving Generic types with fewer arguments in python 3", "body": "<p>I have code where I define a generic class with two type variables:</p>\n\n<pre><code>Selected = ty.TypeVar('Selected')\nSelectionIDs = ty.TypeVar('SelectionIDs')\nclass GenericSelection(col.UserDict, ty.Mapping[SelectionIDs, Selected]):\n    def __init__(self):\n        super().__init__()\n</code></pre>\n\n<p>Then I want to derive a subclass of the previous generic class in which I want to specify one of the type variables as a sequence of integers (an index in this case).</p>\n\n<pre><code>class IndexedSelection(GenericSelection[int, Selected]):\n    def __init__(self):\n        super().__init__()\n</code></pre>\n\n<p>Then I want to define Selected type variable to be a specific type of object, say <code>str</code>, which according to the <a href=\"https://docs.python.org/3/library/typing.html#user-defined-generic-types\" rel=\"nofollow noreferrer\">documentation</a> and <a href=\"https://www.python.org/dev/peps/pep-0483/#defining-and-using-generic-types\" rel=\"nofollow noreferrer\">PEP 483</a> this is allowed.</p>\n\n<pre><code>class StrSelection(IndexedSelection[str]):\n    def __init__(self, strings: ty.Sequence[str], sel: ty.Sequence[int]):\n        super().__init__()\n        for sel_idx in sel:\n            self[sel_idx] = strings[sel_idx]\n</code></pre>\n\n<p>However, I get the error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n/home/salotz/Dropbox/tutorials/python_types/typing_class.py in &lt;module&gt;()\n     47         super().__init__()\n     48 \n---&gt; 49 class StrSelection(IndexedSelection[str]):\n     50     def __init__(self, strings: ty.Sequence[str], sel: ty.Sequence[int]):\n     51         super().__init__()\n\n/home/salotz/anaconda3/lib/python3.5/typing.py in __getitem__(self, params)\n    968             if len(params) != len(self.__parameters__):\n    969                 raise TypeError(\"Cannot change parameter count from %d to %d\" %\n--&gt; 970                                 (len(self.__parameters__), len(params)))\n    971             for new, old in zip(params, self.__parameters__):\n    972                 if isinstance(old, TypeVar):\n\nTypeError: Cannot change parameter count from 2 to 1\n</code></pre>\n\n<p>Maybe I'm misunderstanding the role of the Generic type, as there isn't a whole lot of examples around. Am I missing something to get this to work?</p>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 1932, "user_id": 1450754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d260a34500731e79502ef0fa47fa5f?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t Latinier", "link": "https://stackoverflow.com/users/1450754/beno%c3%aet-latinier"}, "edited": false, "score": 0, "creation_date": 1466113868, "post_id": 37846913, "comment_id": 63196666, "body": "Is there a reason why you would not want to give the data to classB at instantiate time? Or a reference to classA, or a reference to a shared structure... To answer more directly, having classB to access the self of classA kind of implies that classB should be declared inside classA as a static attribute."}, {"owner": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "edited": false, "score": 2, "creation_date": 1466114088, "post_id": 37846913, "comment_id": 63196747, "body": "Any reason you can&#39;t pass the <code>self</code> from <code>classA</code> as a parameter to <code>Bfunc1</code>?  Oh and BTW, your class definitions are wrong - I presume there is no hierarchy here and so you mean to inherit from <code>object</code>, not <code>self</code>."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1466193948, "post_id": 37846913, "comment_id": 63233641, "body": "<i>Is it possible to <code>inspect</code> the scope of the calling function and retrieve the variable <code>self</code> from the locals of that frame</i>: Yes, <i>Is it a good idea</i>: <b>no!</b> what if something else called <code>classB.Bfunc1()</code> and did not have a <code>self</code> instance in the calling scope?"}], "owner": {"reputation": 503, "user_id": 1539348, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c2dceabd34e081e05c0fea37c69e05b3?s=128&d=identicon&r=PG", "display_name": "user1539348", "link": "https://stackoverflow.com/users/1539348/user1539348"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466187296, "creation_date": 1466029987, "last_edit_date": 1466187296, "question_id": 37846913, "link": "https://stackoverflow.com/questions/37846913/python-is-it-possible-from-within-an-instantiated-class-function-to-view-the", "title": "Python - Is it possible from within an instantiated class function to view the &#39;self&#39; of the calling method?", "body": "<pre><code>class classB(object):\n    def Bfunc1(self):\n        \"from here how can I access the 'self' of the calling class?\"\n\nclass classA(object):\n    def __init__(self):\n        self._threadLocal = threading.local()\n\n    def func1(self):\n        self._threadLocal.x = 'stuff'\n        cb = classB()\n        cb.Bfunc1() &lt;---\n</code></pre>\n\n<p>I am trying to see if I can retrieve certain data stored in the threadlocal from a classA through classB instance. My problem is that the 'self' reference is bounded to that class instantiated. Is this possible?</p>\n"}, {"tags": ["java", "python", "class", "oop"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1466029938, "post_id": 37846814, "comment_id": 63153834, "body": "You can access a class variable with <code>Class.attribute</code> from inside a method of the class just like you can from outside the class."}, {"owner": {"reputation": 189, "user_id": 2312304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/35c7b78e2b7e42f8f46c259729f1d0cd?s=128&d=identicon&r=PG&f=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2312304/barry"}, "edited": false, "score": 0, "creation_date": 1466030052, "post_id": 37846814, "comment_id": 63153879, "body": "This SO post from the past likely answers your question too: <a href=\"http://stackoverflow.com/questions/68645/static-class-variables-in-python\" title=\"static class variables in python\">stackoverflow.com/questions/68645/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6158787"}, "edited": false, "score": 0, "creation_date": 1466030491, "post_id": 37846900, "comment_id": 63154003, "body": "Thanks, this all works (I was going to say that you still have to use self in the method arguments, but I tried it without and it works fine, even though it gives me a red underline) I did try this earlier with Thing as the prefix, but I guess it didn&#39;t work because I was also changing the self in the method arguments to Thing as well."}, {"owner": {"reputation": 4722, "user_id": 1170207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b71f9d5ae0b1574cbd07efb7ae926f8?s=128&d=identicon&r=PG", "display_name": "Jan Christoph Terasa", "link": "https://stackoverflow.com/users/1170207/jan-christoph-terasa"}, "edited": false, "score": 2, "creation_date": 1466080596, "post_id": 37846900, "comment_id": 63176018, "body": "<code>getCounter</code> is not an instance method, but a class method, hence you don&#39;t need (and want) <code>self</code> to be the first argument. Be careful, that contrary to most other OO languages <code>a</code> and <code>b</code> will have their own <code>counter</code> variable, so <code>a.counter</code> is different from <code>Thing.counter</code>!"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 2, "last_activity_date": 1466029925, "creation_date": 1466029925, "answer_id": 37846900, "question_id": 37846814, "link": "https://stackoverflow.com/questions/37846814/python-static-class-variables-like-in-java/37846900#37846900", "title": "Python: static class variables like in Java?", "body": "<pre><code>class Thing:\n    counter = 0\n\n    def __init__(self):\n        Thing.counter += 1\n\n    def getCounter():\n        return Thing.counter\n</code></pre>\n\n<p>Example</p>\n\n<pre><code>&gt;&gt;&gt; a = Thing()\n&gt;&gt;&gt; b = Thing()\n&gt;&gt;&gt; Thing.getCounter()\n2\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6158787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "accepted_answer_id": 37846900, "answer_count": 1, "score": 4, "last_activity_date": 1466029925, "creation_date": 1466029452, "question_id": 37846814, "link": "https://stackoverflow.com/questions/37846814/python-static-class-variables-like-in-java", "title": "Python: static class variables like in Java?", "body": "<p>In Java, I can give a class a static variable, here it's counter.\nI'm incrementing it in the constructor, which gives it the purpose of keeping track of how many objects have been instantiated from this class</p>\n\n<pre><code>class Thing\n{\n    private static int counter;\n\n    public Thing()\n    {\n        counter++;\n    }\n\n    public static int getCounter()\n    {\n        return counter;\n    }\n\n}\n</code></pre>\n\n<p>I could then use counter by using (inside of main, or wherever)</p>\n\n<pre><code>int counter = Thing.getCounter()\n</code></pre>\n\n<p>Is there any way of doing this in Python? I know you can essentially have static class variables/attributes by not giving them an underscore prefix, and then accessing them through Class.attribute (rather than Object.attribute or Object.get_attribute), but is there any way to use a static variable within the class itself, just like I did with the Java example where I used a static class variable inside the constructor? It would make sense for there to be a keyword like 'self' for this, although if there is I've not figured it out</p>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 1, "user_id": 1114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FFE8V.gif?s=128&g=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/1114/jeremy"}, "edited": false, "score": 1, "creation_date": 1466029393, "post_id": 37846771, "comment_id": 63153669, "body": "You cannot perform mathematical operations on a <code>range()</code> as a whole. Nor on Python&#39;s standard array (list) objects. It&#39;s not supported. numpy matrix objects do support those operations, in some form (I&#39;m not sure about the syntax). You may want to use those instead."}, {"owner": {"reputation": 11, "user_id": 6471861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f6c18ea7a8bcb6f9137457f13c2a7f?s=128&d=identicon&r=PG&f=1", "display_name": "Grace Lawrence", "link": "https://stackoverflow.com/users/6471861/grace-lawrence"}, "reply_to_user": {"reputation": 1, "user_id": 1114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FFE8V.gif?s=128&g=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/1114/jeremy"}, "edited": false, "score": 0, "creation_date": 1466029766, "post_id": 37846771, "comment_id": 63153780, "body": "So if I then make my range t=np.array([1,5]) and then pass that to my function, it tells me that it can only convert length-1 arrays to scalar?"}], "answers": [{"tags": [], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "is_accepted": false, "score": 0, "last_activity_date": 1466029323, "creation_date": 1466029323, "answer_id": 37846794, "question_id": 37846771, "link": "https://stackoverflow.com/questions/37846771/unsupported-operands-for-range-and-float-what-am-i-doing-wrong/37846794#37846794", "title": "Unsupported operands for range and float, what am I doing wrong?", "body": "<p><code>t</code> is a range type. Python is telling you that you can't subtract a <code>range</code> and a float. In other words, <code>t-152.5</code> is what's causing your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 2473, "user_id": 4546885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dacef57bea7081f99b51bd3cfe448b35?s=128&d=identicon&r=PG", "display_name": "Sebastian Hoffmann", "link": "https://stackoverflow.com/users/4546885/sebastian-hoffmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1466029470, "creation_date": 1466029470, "answer_id": 37846817, "question_id": 37846771, "link": "https://stackoverflow.com/questions/37846771/unsupported-operands-for-range-and-float-what-am-i-doing-wrong/37846817#37846817", "title": "Unsupported operands for range and float, what am I doing wrong?", "body": "<p>As the error states, the binary <code>-</code> operator needs to numbers and can't work with a iterable.</p>\n\n<p>Use <strong>list comprehension</strong> to achieve this behaviour:</p>\n\n<pre><code>V_esc = [232+15*math.cos((2*math.pi)*(t-152.5/365.25)) for t in range(5)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 917, "user_id": 5759063, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-1eAgvsus1Fk/AAAAAAAAAAI/AAAAAAAAAGw/i5CaZxtNOug/photo.jpg?sz=128", "display_name": "Sreejith Menon", "link": "https://stackoverflow.com/users/5759063/sreejith-menon"}, "is_accepted": false, "score": 0, "last_activity_date": 1466033902, "creation_date": 1466033902, "answer_id": 37847537, "question_id": 37846771, "link": "https://stackoverflow.com/questions/37846771/unsupported-operands-for-range-and-float-what-am-i-doing-wrong/37847537#37847537", "title": "Unsupported operands for range and float, what am I doing wrong?", "body": "<p>The main thing to keep in mind here is that \n<code>t = range(5)</code> returns an iterable object. That is, it basically contains the ability to return numbers from 0 to 4.</p>\n\n<p>You can verify this by the following piece of code:</p>\n\n<pre><code>for i in t:\n    print(i)    \n0\n1\n2\n3\n4\n</code></pre>\n\n<p>So you cannot basically perform any binary operation on two objects that are heterogenous. The operator '+' acts as addition for numeric types and for lists, they act as append operator. \nAlso called Dynamic Typing Interlude in python. (In simple words, run time polymorphism.)</p>\n\n<p>So in your case you have to iterate through the entire range one by one.</p>\n\n<p>By old-school method:</p>\n\n<pre><code>V_esc = []\nfor i in t:\n    V_esc.append(232 + 15*math.cos((2*math.pi) * (i-152.5/365.25)))\n\n\nV_esc\nOut[25]: \n[218.96948865910474,\n 218.96948865910474,\n 218.96948865910474,\n 218.96948865910474,\n 218.9694886591047]\n</code></pre>\n\n<p>If you want to show off your python list comprehension skills:</p>\n\n<pre><code>t = range(5)\nV_esc = [232 + 15*math.cos((2*math.pi) * (i-152.5/365.25)) for i in t]\n\nV_esc\nOut[21]: \n[218.96948865910474,\n 218.96948865910474,\n 218.96948865910474,\n 218.96948865910474,\n 218.9694886591047]\n</code></pre>\n\n<p>Or even better:</p>\n\n<pre><code>V_esc = [232+15*math.cos((2*math.pi)*(t-152.5/365.25)) for t in range(5)]\n\nV_esc\nOut[23]: \n[218.96948865910474,\n 218.96948865910474,\n 218.96948865910474,\n 218.96948865910474,\n 218.9694886591047]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6471861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f6c18ea7a8bcb6f9137457f13c2a7f?s=128&d=identicon&r=PG&f=1", "display_name": "Grace Lawrence", "link": "https://stackoverflow.com/users/6471861/grace-lawrence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466033902, "creation_date": 1466029202, "last_edit_date": 1466029359, "question_id": 37846771, "link": "https://stackoverflow.com/questions/37846771/unsupported-operands-for-range-and-float-what-am-i-doing-wrong", "title": "Unsupported operands for range and float, what am I doing wrong?", "body": "<p>I'm trying to pass a range of numbers to a function and have that function then give me an array of numbers back. This is my code and the error I've received. \nI'm brand new to python, so this might be a silly question. \n<img src=\"https://i.stack.imgur.com/TwIwp.jpg\" alt=\"This is my snippet of code\"></p>\n"}, {"tags": ["python", "jenkins", "setuptools"], "answers": [{"tags": [], "owner": {"reputation": 883, "user_id": 1330434, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb3a229bb021331eac027f657549e7c5?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/1330434/srikanth"}, "is_accepted": true, "score": 0, "last_activity_date": 1466031388, "creation_date": 1466031388, "answer_id": 37847174, "question_id": 37846755, "link": "https://stackoverflow.com/questions/37846755/pythonsetup-py-upload-error-code-on-linux/37847174#37847174", "title": "python`setup.py upload` error code on Linux", "body": "<p>After some research, I discovered this is a bug in <code>distutils</code>. See <a href=\"https://bugs.python.org/issue21722\" rel=\"nofollow\">https://bugs.python.org/issue21722</a> <code>teach distutils \"upload\" to exit with code != 0 when error occurs</code></p>\n\n<p>This was patched and backported to python 2.7.7</p>\n\n<p>I was running python 2.7.6 on my Linux machine, and 2.7.10 on my Mac, which was the reason for the discrepancy that I noted.</p>\n"}], "owner": {"reputation": 883, "user_id": 1330434, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb3a229bb021331eac027f657549e7c5?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/1330434/srikanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 37847174, "answer_count": 1, "score": 1, "last_activity_date": 1466031388, "creation_date": 1466029117, "last_edit_date": 1466030226, "question_id": 37846755, "link": "https://stackoverflow.com/questions/37846755/pythonsetup-py-upload-error-code-on-linux", "title": "python`setup.py upload` error code on Linux", "body": "<p>I'm trying to publish a python package from jenkins. When publishing to an already published version, I see:</p>\n\n<p><code>Submitting dist/mylib-0.2.13.tar.gz to http://mypypiserver/api/pypi/pypi-release-local\nUpload failed (403): Forbidden</code></p>\n\n<p>However, the shell script that calls this is unable to determine that an error occured, because setup.py doesn't exit with an error code in this case. Is this a bug, or am I using <code>setuptools</code> incorrectly?</p>\n\n<p>I'm on <code>setuptools</code> version 23.0.0, but can also reproduce with versions 20.2.2 and 21.0.0. Curiously, this doesn't happen on OS X. </p>\n"}, {"tags": ["python", "django", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "is_accepted": true, "score": 6, "last_activity_date": 1466070203, "creation_date": 1466070203, "answer_id": 37855526, "question_id": 37846721, "link": "https://stackoverflow.com/questions/37846721/django-typeerror-modelbase-object-is-not-iterable/37855526#37855526", "title": "Django TypeError: &#39;ModelBase&#39; object is not iterable", "body": "<p>In your first migration:</p>\n\n<pre><code>migrations.CreateModel(\n    name='ReputationAction',\n    ...\n    bases=(models.Model),\n),\n</code></pre>\n\n<p>You need to change <code>bases=(models.Model),</code> to <code>bases=(models.Model,),</code> (note the extra comma). This will make <code>bases</code> a tuple containing the base <code>Model</code> class, rather than just the model class. </p>\n\n<p>I'm not sure how your migrations would get into this state. Did you change the migrations manually? You might want to upgrade Django to the latest 1.8.x version, maybe there was a bug that has since been fixed. </p>\n"}], "owner": {"reputation": 7760, "user_id": 1631608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kGTUi.jpg?s=128&g=1", "display_name": "Glyn Jackson", "link": "https://stackoverflow.com/users/1631608/glyn-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8707, "favorite_count": 0, "accepted_answer_id": 37855526, "answer_count": 1, "score": 2, "last_activity_date": 1504129263, "creation_date": 1466028944, "last_edit_date": 1504129263, "question_id": 37846721, "link": "https://stackoverflow.com/questions/37846721/django-typeerror-modelbase-object-is-not-iterable", "title": "Django TypeError: &#39;ModelBase&#39; object is not iterable", "body": "<p>I'm struggling to debug a vague error message in <strong>Django</strong> when executing any migration command:</p>\n\n<pre><code>Operations to perform:\n  Synchronize unmigrated apps: rest_framework_docs, staticfiles, django_coverage, django_extensions, storages, corsheaders, gis, templated_email, rest_framework, django_mptt_admin, opbeat.contrib.django, grappelli, permissions, django_nose, django_markdown, messages, common\n  Apply all migrations: contenttypes, auth, badges, reputation, geodata,  comments, sites, users, votes, watchers, library, sessions, admin, oauth2_provider\nSynchronizing apps without migrations:\n  Creating tables...\n    Running deferred SQL...\n  Installing custom SQL...\nRunning migrations:\n  No migrations to apply.\n\n    Traceback (most recent call last):\n      File \"manage.py\", line 10, in &lt;module&gt;\n        execute_from_command_line(sys.argv)\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/core/management/__init__.py\", line 354, in execute_from_command_line\n        utility.execute()\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/core/management/__init__.py\", line 346, in execute\n        self.fetch_command(subcommand).run_from_argv(self.argv)\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/core/management/base.py\", line 394, in run_from_argv\n        self.execute(*args, **cmd_options)\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/core/management/base.py\", line 445, in execute\n        output = self.handle(*args, **options)\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/core/management/commands/migrate.py\", line 205, in handle\n        executor.loader.project_state(),\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/db/migrations/loader.py\", line 353, in project_state\n        return self.graph.make_state(nodes=nodes, at_end=at_end, real_apps=list(self.unmigrated_apps))\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/db/migrations/graph.py\", line 231, in make_state\n        project_state = self.nodes[node].mutate_state(project_state, preserve=False)\n      File \"/Users/user/Documents/workspace/app-api/env/lib/python3.4/site-packages/django/db/migrations/migration.py\", line 83, in mutate_state\n        operation.state_forwards(self.app_label, new_state)\n      File \"/Users/user/Documents/workspace/user-api/env/lib/python3.4/site-packages/django/db/migrations/operations/models.py\", line 52, in state_forwards\n        tuple(self.bases),\n    TypeError: 'ModelBase' object is not iterable\n</code></pre>\n\n<p>I've tracked the problem down to one of my apps, removing it clears the error. However, the error above does not help me understand the issue.  Runserver works fine with no errors output.</p>\n\n<p>The error is being generated from this line in Django: <a href=\"https://github.com/django/django/blob/master/django/db/migrations/operations/models.py#L83\" rel=\"nofollow noreferrer\">https://github.com/django/django/blob/master/django/db/migrations/operations/models.py#L83</a></p>\n\n<p>What does this error relate to? The app itself does not generate any errors and runs fine, the app which gives this error is <code>reputation</code>.</p>\n\n<p>Environment:</p>\n\n<pre><code>pillow==3.2.0\nDjango==1.8.7\npsycopg2\nSphinx==1.2.3\ndjango-mptt==0.7.2\nsphinx_rtd_theme==0.1.6\ndjango_extensions==1.3.3\ndjango-mptt-admin==0.2.1\ndjango-debug-toolbar==1.4\ndjangorestframework==3.3.3\ndjango-oauth-toolkit==0.8.1\nrest_condition==1.0.1\ngevent==1.1rc3\ngunicorn==19.3.0\ndjango-cors-headers==1.1.0\ndjango-simple-email-confirmation==0.12\nitsdangerous==0.24\ndjango-grappelli==2.7.1\nnumpy==1.11.0\n</code></pre>\n\n<p>reputation migrations:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\n\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n        ('contenttypes', '0002_remove_content_type_name'),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Reputation',\n            fields=[\n                ('created', django_extensions.db.fields.CreationDateTimeField(default=django.utils.timezone.now, blank=True, editable=False, verbose_name='created')),\n                ('modified', django_extensions.db.fields.ModificationDateTimeField(default=django.utils.timezone.now, blank=True, editable=False, verbose_name='modified')),\n                ('id', models.UUIDField(primary_key=True, unique=True,\n                ('reputation', models.PositiveIntegerField(default=0)),\n                ('dimension', models.CharField(max_length=2, blank=True, null=True)),\n                ('user', models.ForeignKey(to=settings.AUTH_USER_MODEL, related_name='reputation_set')),\n            ],\n            options={\n                'verbose_name': 'Reputation',\n            },\n        ),\n        migrations.CreateModel(\n            name='ReputationAction',\n            fields=[\n                ('created', django_extensions.db.fields.CreationDateTimeField(default=django.utils.timezone.now, blank=True, editable=False, verbose_name='created')),\n                ('modified', django_extensions.db.fields.ModificationDateTimeField(default=django.utils.timezone.now, blank=True, editable=False, verbose_name='modified')),\n                ('id', models.UUIDField(primary_key=True, unique=True, \n                ('action_type', models.CharField(max_length=10, blank=True, null=True)),\n                ('value', models.IntegerField(default=0)),\n                ('capped', models.BooleanField(default=0)),\n                ('object_id', models.UUIDField()),\n                ('content_type', models.ForeignKey(to='contenttypes.ContentType')),\n                ('originating_user', models.ForeignKey(related_name='originating_user', to=settings.AUTH_USER_MODEL, null=True)),\n                ('user', models.ForeignKey(to=settings.AUTH_USER_MODEL, related_name='target_user')),\n            ],\n            options={\n                'verbose_name': 'Reputation Action',\n            },\n            bases=(models.Model),\n        ),\n    ]\n</code></pre>\n\n<p>2:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\n\nfrom django.db import models, migrations\nfrom django.conf import settings\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('reputation', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AlterField(\n            model_name='reputationaction',\n            name='user',\n            field=models.ForeignKey(to=settings.AUTH_USER_MODEL, related_name='reputation_action'),\n        ),\n    ]\n</code></pre>\n\n<p>3</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\n\nfrom django.db import migrations, models\n\n\ndef dedupe_reputation_actions(apps, schema_editor):\n    Reputation = apps.get_model('reputation', 'Reputation')\n\n    qs = Reputation.objects.all().values('user', 'dimension')\\\n        .annotate(total=models.Count('user'))\\\n        .filter(total__gt=1)\n\n    for dupe in qs:\n        reps = list(Reputation.objects.filter(user=dupe['user'], dimension=dupe['dimension']))\n\n        for rep in reps[1:]:\n            rep.delete()\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('reputation', '0002_auto_20151117_1108'),\n    ]\n\n    operations = [\n        migrations.RunPython(dedupe_reputation_actions)\n    ]\n</code></pre>\n\n<p>4</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('reputation', '0003_auto_20160302_1749'),\n    ]\n\n    operations = [\n        migrations.AlterUniqueTogether(\n            name='reputation',\n            unique_together=set([('user', 'dimension')]),\n        ),\n    ]\n</code></pre>\n"}, {"tags": ["python", "dependencies", "build-process"], "answers": [{"tags": [], "owner": {"reputation": 561, "user_id": 3115144, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DUMjM.png?s=128&g=1", "display_name": "Benjamin Dean", "link": "https://stackoverflow.com/users/3115144/benjamin-dean"}, "is_accepted": false, "score": 1, "last_activity_date": 1466030239, "creation_date": 1466030239, "answer_id": 37846965, "question_id": 37846702, "link": "https://stackoverflow.com/questions/37846702/getting-dependencies-in-a-python-development-environment/37846965#37846965", "title": "Getting dependencies in a Python development environment", "body": "<p>I guess <a href=\"https://pip.pypa.io/en/stable/user_guide/#requirements-files\" rel=\"nofollow\">requirements.txt</a> is what you are looking for. For example, PyCharm IDE will definitely see it as a dependency list.</p>\n"}, {"comments": [{"owner": {"reputation": 1390, "user_id": 1240051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ARZko.jpg?s=128&g=1", "display_name": "0cd", "link": "https://stackoverflow.com/users/1240051/0cd"}, "edited": false, "score": 0, "creation_date": 1466031978, "post_id": 37846989, "comment_id": 63154434, "body": "Thanks! I found some more related useful links -  <a href=\"http://www.pindi.us/blog/automating-pip-and-virtualenv-shell-scripts\" rel=\"nofollow noreferrer\">pindi.us/blog/automating-pip-and-virtualenv-shell-scripts</a>, <a href=\"https://pip.pypa.io/en/stable/user_guide/#requirements-files\" rel=\"nofollow noreferrer\">pip.pypa.io/en/stable/user_guide/#requirements-files</a>, <a href=\"https://pip.pypa.io/en/stable/reference/pip_install/#requirements-file-format\" rel=\"nofollow noreferrer\">pip.pypa.io/en/stable/reference/pip_install/&hellip;</a>, <a href=\"https://pip.pypa.io/en/stable/reference/pip_install/#requirement-specifiers\" rel=\"nofollow noreferrer\">pip.pypa.io/en/stable/reference/pip_install/&hellip;</a>, and <a href=\"http://docs.python-guide.org/en/latest/shipping/packaging/#personal-pypi\" rel=\"nofollow noreferrer\">docs.python-guide.org/en/latest/shipping/packaging/&hellip;</a>"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "reply_to_user": {"reputation": 1390, "user_id": 1240051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ARZko.jpg?s=128&g=1", "display_name": "0cd", "link": "https://stackoverflow.com/users/1240051/0cd"}, "edited": false, "score": 0, "creation_date": 1466032585, "post_id": 37846989, "comment_id": 63154596, "body": "Welcome! Thanks for adding those links as they may help others that find your question, Cheers! :)"}], "tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": true, "score": 1, "last_activity_date": 1466030344, "creation_date": 1466030344, "answer_id": 37846989, "question_id": 37846702, "link": "https://stackoverflow.com/questions/37846702/getting-dependencies-in-a-python-development-environment/37846989#37846989", "title": "Getting dependencies in a Python development environment", "body": "<p>This is managed by <a href=\"http://docs.python-guide.org/en/latest/dev/virtualenvs/\" rel=\"nofollow\">virtualenv</a> and the <code>pip install -r requirements.txt</code> command. More info here: <a href=\"http://docs.python-guide.org/en/latest/dev/virtualenvs/\" rel=\"nofollow\">Virtual Environments</a></p>\n"}], "owner": {"reputation": 1390, "user_id": 1240051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ARZko.jpg?s=128&g=1", "display_name": "0cd", "link": "https://stackoverflow.com/users/1240051/0cd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 37846989, "answer_count": 2, "score": 0, "last_activity_date": 1466030344, "creation_date": 1466028862, "question_id": 37846702, "link": "https://stackoverflow.com/questions/37846702/getting-dependencies-in-a-python-development-environment", "title": "Getting dependencies in a Python development environment", "body": "<p>When working with JVM languages a pattern commonly followed is to use a build system (ant+ivy / maven / gradle), where using a build file, the dependencies of your code can be defined. The build system is able to fetch these dependencies when you build your code. Moreover IDEs like Eclipse/IntelliJ are also able to read these build files and continuously build/verify your code as you write it.</p>\n\n<p>How is something similar done while developing in Python? While there may not necessarily be a build step, I want a developer to be able to checkout my code and then run a single bootstrap command that will setup a virtualenv and pull in any thirdy-party dependencies necessary to run the code. I could include some sort of a script to do this, but I am wondering if there is a tool to do this? Most of my search so far has led me to packaging tools, which are more for distribution to end-user than for this purpose (or so I understand). </p>\n"}, {"tags": ["python", "django", "celery"], "answers": [{"tags": [], "owner": {"reputation": 1184, "user_id": 6254917, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-rF3f2YtC_zU/AAAAAAAAAAI/AAAAAAAAABY/cQgE97Fmg28/photo.jpg?sz=128", "display_name": "Ankush Raghuvanshi", "link": "https://stackoverflow.com/users/6254917/ankush-raghuvanshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1466032150, "creation_date": 1466032150, "answer_id": 37847305, "question_id": 37846683, "link": "https://stackoverflow.com/questions/37846683/how-to-create-periodictask-in-celery-and-django-for-an-specific-model-instance/37847305#37847305", "title": "how to create periodictask in celery and django for an specific model instance", "body": "<p>You can try the following:</p>\n\n<p>1) Add a field 'last_activity' to your model which automatically updates the timestamp of the last activity day of the user.</p>\n\n<p>2) Now create a task which will run after 45 days of the first instance. It will check for all the users whether the timestamp of last_activity_day is 45 days older or not. If it is, then it will delete the user.</p>\n\n<p>But its only the first 45 days you can save the processing for. After that you need to run the task everyday i.e., on 46th day, 47th day, 48th day and so on to detect those users whose last_activity was on day 2, day 3 and so on.</p>\n\n<p>Hence its better to run a daily task as you yourself mentioned.</p>\n"}], "owner": {"reputation": 11, "user_id": 4052156, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1814126506/picture?type=large", "display_name": "Juan Sebastian Eljach", "link": "https://stackoverflow.com/users/4052156/juan-sebastian-eljach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466032150, "creation_date": 1466028799, "question_id": 37846683, "link": "https://stackoverflow.com/questions/37846683/how-to-create-periodictask-in-celery-and-django-for-an-specific-model-instance", "title": "how to create periodictask in celery and django for an specific model instance", "body": "<p>I have a Django model Person:</p>\n\n<pre><code>class Person(models.Model):\n    first_name = models.CharField(max_length=100, blank=False, null=False)\n    last_name = models.CharField(max_length=100, blank=False, null=False)\n    cellphone = models.CharField(max_length=20)\n    phone = models.CharField(max_length=15)\n    email = models.EmailField()\n</code></pre>\n\n<p>and a model called Activity, which tracks throught a ForeignKey field the activities registered to a Person</p>\n\n<p>I need to validate if a Person have not made any activity in 45 days so I can delete her from the database</p>\n\n<p>I thought that a Celery PeriodicTasks could be a solution, but this tasks would have to run every day and query every person in the database to make the validation.</p>\n\n<p>Is there a way to create an specific scheduled tasks for every Person instance that runs in 45 days after the instance is saved in the database for the first time?</p>\n"}, {"tags": ["python", "arrays", "numpy", "vectorization"], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "is_accepted": false, "score": 0, "last_activity_date": 1466030260, "creation_date": 1466030260, "answer_id": 37846968, "question_id": 37846676, "link": "https://stackoverflow.com/questions/37846676/vectorization-adding-numpy-arrays-without-loops/37846968#37846968", "title": "Vectorization - Adding numpy arrays without loops?", "body": "<p>Firstly, your code seems to work in general if you transpose <code>X</code>. For example:</p>\n\n<pre><code>c = array([[ 1,  2,  3],\n           [ 4,  5,  6],\n           [ 7,  8,  9],\n           [10, 11, 12]])\nX = array([[10, 15, 20,  5],\n           [ 1,  2,  6, 23]]).transpose()\ny = array([1, 2])\n\nc[:,y] += X\nprint c\n#OUTPUT:\n#[[ 1 12  4]\n# [ 4 20  8]\n# [ 7 28 15]\n# [10 16 35]]\n</code></pre>\n\n<p>However, it doesn't work when there are any duplicate columns in <code>y</code>, like in your specific example. I believe this is because <code>c[:, [1,1]]</code> will generate an array with two columns, each having the slice <code>c[:, 1]</code>. Both of these slices point to the same part of c, and so when the addition happens on each, they are both read, then the corresponding part of <code>X</code> is added to each, then they are written back, meaning the last one to be written back is the final value. I don't believe numpy will let you vectorize an operation like this because it fundamentally can't be. This requires editing one column at a time, saving back it's value, and then editing it again later.</p>\n\n<p>You might have to settle for no duplicates, or otherwise implement something like an accumulator.</p>\n"}, {"comments": [{"owner": {"reputation": 58707, "user_id": 110026, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/dce2259ff9b547103d54acf1ea622314?s=128&d=identicon&r=PG", "display_name": "Jaime", "link": "https://stackoverflow.com/users/110026/jaime"}, "edited": false, "score": 1, "creation_date": 1466063176, "post_id": 37847591, "comment_id": 63164438, "body": "I don&#39;t know if it is more clear, but because <code>.T</code> returns a view, you can get the same result by transposing everything, which leads to a simpler indexing, i.e. <code>np.add.at(c.T, y, X)</code> produces the same effect."}, {"owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "edited": false, "score": 0, "creation_date": 1466105054, "post_id": 37847591, "comment_id": 63192307, "body": "Thank you for the excerpt on universal functions, very useful!"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1466034254, "creation_date": 1466034254, "answer_id": 37847591, "question_id": 37846676, "link": "https://stackoverflow.com/questions/37846676/vectorization-adding-numpy-arrays-without-loops/37847591#37847591", "title": "Vectorization - Adding numpy arrays without loops?", "body": "<p>My first thought when I saw your desired calculation, was to just sum the 2 rows of <code>X</code>, and add that to the 2nd column of <code>c</code>:</p>\n\n<pre><code>In [636]: c = array([[ 1,  2,  3],\n           [ 4,  5,  6],\n           [ 7,  8,  9],\n           [10, 11, 12]])\n\nIn [637]: c[:,1]+=X.sum(axis=0)\n\nIn [638]: c\nOut[638]: \narray([[ 1, 13,  3],\n       [ 4, 22,  6],\n       [ 7, 34,  9],\n       [10, 39, 12]])\n</code></pre>\n\n<p>But if we want to work from a general index like <code>y</code>, we need a special <code>bufferless</code> operation - that is if there are duplicates in <code>y</code>:</p>\n\n<pre><code>In [639]: c = array([[ 1,  2,  3],\n           [ 4,  5,  6],\n           [ 7,  8,  9],\n           [10, 11, 12]])\n\nIn [641]: np.add.at(c,(slice(None),y),X.T)\n\nIn [642]: c\nOut[642]: \narray([[ 1, 13,  3],\n       [ 4, 22,  6],\n       [ 7, 34,  9],\n       [10, 39, 12]])\n</code></pre>\n\n<p>You need to look up <code>.at</code> in the numpy docs.</p>\n\n<p>in Ipython <code>add.at?</code> shows me the doc that includes:</p>\n\n<blockquote>\n  <p>Performs unbuffered in place operation on operand 'a' for elements\n  specified by 'indices'. For addition ufunc, this method is equivalent to\n  <code>a[indices] += b</code>, except that results are accumulated for elements that\n  are indexed more than once. For example, <code>a[[0,0]] += 1</code> will only\n  increment the first element once because of buffering, whereas\n  <code>add.at(a, [0,0], 1)</code> will increment the first element twice.</p>\n</blockquote>\n\n<p>With a different <code>y</code> it still works</p>\n\n<pre><code>In [645]: np.add.at(c,(slice(None),[0,2]),X.T)\n\nIn [646]: c\nOut[646]: \narray([[11,  2,  4],\n       [19,  5,  8],\n       [27,  8, 15],\n       [15, 11, 35]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "is_accepted": false, "score": 0, "last_activity_date": 1466039876, "creation_date": 1466039876, "answer_id": 37848351, "question_id": 37846676, "link": "https://stackoverflow.com/questions/37846676/vectorization-adding-numpy-arrays-without-loops/37848351#37848351", "title": "Vectorization - Adding numpy arrays without loops?", "body": "<p>This is the solution I came up with:</p>\n\n<pre><code>def my_func(c, X, y):\n    cc = np.zeros((len(y), c.shape[0], c.shape[1]))\n    cc[range(len(y)), :, y] = X\n    return c + np.sum(cc, 0)\n</code></pre>\n\n<p>The following interactive session demonstrates how it works:</p>\n\n<pre><code>&gt;&gt;&gt; my_func(c, X, y)\narray([[  1.,  13.,   3.],\n       [  4.,  22.,   6.],\n       [  7.,  34.,   9.],\n       [ 10.,  39.,  12.]])\n&gt;&gt;&gt; y2 = np.array([0, 2])\n&gt;&gt;&gt; my_func(c, X, y2)\narray([[ 11.,   2.,   4.],\n       [ 19.,   5.,   8.],\n       [ 27.,   8.,  15.],\n       [ 15.,  11.,  35.]])\n</code></pre>\n"}], "owner": {"reputation": 1442, "user_id": 2158231, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9afbedbfc248cfa56dfff84a0cc6dfd3?s=128&d=identicon&r=PG&f=1", "display_name": "jlcv", "link": "https://stackoverflow.com/users/2158231/jlcv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 37847591, "answer_count": 3, "score": 2, "last_activity_date": 1466039876, "creation_date": 1466028746, "question_id": 37846676, "link": "https://stackoverflow.com/questions/37846676/vectorization-adding-numpy-arrays-without-loops", "title": "Vectorization - Adding numpy arrays without loops?", "body": "<p>So I have the following numpy arrays:</p>\n\n<pre><code>c = array([[ 1,  2,  3],\n           [ 4,  5,  6],\n           [ 7,  8,  9],\n           [10, 11, 12]])\nX = array([[10, 15, 20,  5],\n           [ 1,  2,  6, 23]])\ny = array([1, 1])\n</code></pre>\n\n<p>I am trying to add each <code>1x4</code> row in the <code>X</code> array to one of the columns in <code>c</code>. The <code>y</code> array specifies which column. The above example, means that we are adding both rows in the <code>X</code> array to column <code>1</code> of c. That is, we should expect the result of:</p>\n\n<pre><code>     c = array([[ 1,  2+10+1,  3],  =  array([[ 1,  13,  3],\n                [ 4,  5+15+2,  6],            [ 4,  22,  6],\n                [ 7,  8+20+6,  9],            [ 7,  34,  9],\n                [10, 11+5+23, 12]])           [10,  39, 12]])  \n</code></pre>\n\n<p>Does anyone know how I can do this without any loops? I tried <code>c[:,y] += X</code> but it seems like this only adds the second row of <code>X</code> to column <code>1</code> of <code>c</code> once. With that being said, it should be noted that <code>y</code> does not necessarily have to be <code>[1,1]</code>, it can also be <code>[0,1]</code>. In this case, we would add the first row of <code>X</code> to column <code>0</code> of <code>c</code> and the second row of <code>X</code> to column <code>1</code> of <code>c</code>.</p>\n"}, {"tags": ["python", "signal-processing"], "comments": [{"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1466040043, "post_id": 37846664, "comment_id": 63156309, "body": "Will the amplitudes of the sine waves to be added always be equal? If yes, that simplifies things greatly..."}, {"owner": {"reputation": 109, "user_id": 4679153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cda0a03b37f218d948c5058cb711548?s=128&d=identicon&r=PG&f=1", "display_name": "rahul saxena", "link": "https://stackoverflow.com/users/4679153/rahul-saxena"}, "reply_to_user": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1466057247, "post_id": 37846664, "comment_id": 63161044, "body": "No, this is just for the generalization. but still how would you proceed if the amplitudes are same."}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1466121817, "post_id": 37846664, "comment_id": 63199027, "body": "With equal amplitude waves, you can get an easy closed expression for the sum, which is given as the product of a rapidly varying sinewave and a slowly varying sine wave (see <a href=\"http://hyperphysics.phy-astr.gsu.edu/hbase/audio/sumdif.html\" rel=\"nofollow noreferrer\">ref1</a>). From there getting the timesteps at which the rapidly varying factor reaches extrema is trivial (and not a programming problem, but a mathematical one). The only thing that puzzles me is the black dots in the figure you&#39;ve attached: it seems to be the phase (argument) of smt, but that isn&#39;t clear. Also, the vertical lines in the figure don&#39;t align with"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1466121972, "post_id": 37846664, "comment_id": 63199064, "body": "... the extrema of the sum. So whoever made that was guessing at those locations or plotting something different from what you&#39;re asking. Can you elaborate on what you want to add to the figure other than what you already have? So, I guess the green envelope (easy, see the ref), but what are those black dots?"}, {"owner": {"reputation": 109, "user_id": 4679153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cda0a03b37f218d948c5058cb711548?s=128&d=identicon&r=PG&f=1", "display_name": "rahul saxena", "link": "https://stackoverflow.com/users/4679153/rahul-saxena"}, "reply_to_user": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1466139430, "post_id": 37846664, "comment_id": 63202847, "body": "green envelope is not the issue.... So basically those black dots refers to value of phase at which the peaks in each resultant(sum) wave appear."}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1466155608, "post_id": 37846664, "comment_id": 63210903, "body": "How do you define the phase of the sum of two sines? Using phasors, the <i>angle</i> of the sum, observed at the local maxima of the sum, <a href=\"http://picpaste.com/figure_1-mvEWhGHb.png\" rel=\"nofollow noreferrer\">doesn&#39;t remotely look like that</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3364, "user_id": 1525423, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xkRry.png?s=128&g=1", "display_name": "Finwood", "link": "https://stackoverflow.com/users/1525423/finwood"}, "is_accepted": true, "score": 2, "last_activity_date": 1466356867, "creation_date": 1466356867, "answer_id": 37909857, "question_id": 37846664, "link": "https://stackoverflow.com/questions/37846664/phase-at-which-peak-of-interference-pattern-occurs-after-adding-2-sine-waves/37909857#37909857", "title": "Phase at which peak of interference pattern occurs after adding 2 sine waves", "body": "<p>Use the <a href=\"http://docs.scipy.org/doc/scipy-0.17.0/reference/generated/scipy.signal.hilbert.html\" rel=\"nofollow noreferrer\">Hilbert Transform</a> to calculate the <em>Analytic Signal</em> and hence the <a href=\"https://en.wikipedia.org/wiki/Analytic_signal#Envelope_and_instantaneous_phase\" rel=\"nofollow noreferrer\">envelope and instantaneous phase</a>:</p>\n\n<pre><code>import numpy as np\nfrom scipy import signal\nimport matplotlib.pyplot as plt\n\nt = np.arange(0, 2, 0.01)\n\na1, f1, phi1 = 1, 10, 0\na2, f2, phi2 = 1, 11.5, 0\ns1 = a1 * np.cos(2 * np.pi * f1 * t + phi1)\ns2 = a2 * np.cos(2 * np.pi * f2 * t + phi2)\n\n\nfig, (axsum, ax1, ax2) = plt.subplots(3, sharex=True, figsize=(10,8))\n\naxsum.plot(t, s1+s2, 'k')\naxsum.set_ylabel(\"sum\")\n\nax1.plot(t, s1, 'b')\nax1.set_ylabel(\"signal 1\")\n\nax2.plot(t, s2, 'r')\nax2.set_ylabel(\"signal 2\")\nax2.set_xlabel(\"time in s\")\n\n\nsum_analytic = signal.hilbert(s1+s2)\naxsum.plot(t, np.abs(sum_analytic), 'g', lw=2)\nfor ix in signal.argrelmax(np.abs(sum_analytic))[0]:\n    axsum.axvline(t[ix], color='r', lw=2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oJ0Cm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oJ0Cm.png\" alt=\"envelope of signal\"></a></p>\n\n<hr>\n\n<p>You might want to take a look at a <a href=\"http://docs.scipy.org/doc/numpy-dev/user/quickstart.html\" rel=\"nofollow noreferrer\">NumPy tutorial</a>, all your list comprehensions weren't necessary, for example.</p>\n"}], "owner": {"reputation": 109, "user_id": 4679153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cda0a03b37f218d948c5058cb711548?s=128&d=identicon&r=PG&f=1", "display_name": "rahul saxena", "link": "https://stackoverflow.com/users/4679153/rahul-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 37909857, "answer_count": 1, "score": 0, "last_activity_date": 1466356867, "creation_date": 1466028687, "question_id": 37846664, "link": "https://stackoverflow.com/questions/37846664/phase-at-which-peak-of-interference-pattern-occurs-after-adding-2-sine-waves", "title": "Phase at which peak of interference pattern occurs after adding 2 sine waves", "body": "<p>Given 2 sine waves, I calculate the resultant sine waves by adding them. Now I want to calculate phase at which peaks of the interference pattern occurs.</p>\n\n<p>here is the plot generated by me:\n<img src=\"https://i.stack.imgur.com/3HFnr.png\" alt=\"enter image description here\"> </p>\n\n<p>and here is the image I am trying to create. I want to draw the subplot A:\n<a href=\"https://i.stack.imgur.com/aPN7H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aPN7H.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the script used by me:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nw_s = 10*2*np.pi\nw_d = 11.5*2*np.pi\na_s = 1\na_d = 1\nphi_d = 0\n\nx =np.arange(0,2,0.01)\n\nv_s = [a_s*np.cos(w_s*t) for t in np.arange(0,2,0.01)]\nv_d = [a_d*np.cos(w_d*t + phi_d) for t in np.arange(0,2,0.01)]\nresultant = [sum(i) for i in zip(v_s, v_d)]\n\nf, (ax1, ax2,ax3) = plt.subplots(3, sharex=True, sharey=True)\nax1.plot(x,resultant,'k')\nax1.set_ylabel('sum')\nax2.plot(x, v_d,'b')\nax2.set_ylabel('dendrite')\nax3.plot(x, v_s,'r')\nax3.set_ylabel('soma')\nf.subplots_adjust(hspace=0)\nplt.setp([a.get_xticklabels() for a in f.axes[:-1]], visible=False)\nplt.setp([a.get_yticklabels() for a in f.axes[:3]], visible=False)\nplt.xlabel('Time(s)')\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "sorting", "dictionary", "nested", "defaultdict"], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 1165419, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d42aa0d6ef112f8d7b613de03cbb89e1?s=128&d=identicon&r=PG", "display_name": "user1165419", "link": "https://stackoverflow.com/users/1165419/user1165419"}, "edited": false, "score": 0, "creation_date": 1466090990, "post_id": 37846746, "comment_id": 63184107, "body": "Hey jsbueno, thanks for your response. I tried the above and i think there&#39;s a problem grabbing the &#39;date&#39; key <code>dates = list(item[&quot;date&quot;].iteritems()) TypeError: list indices must be integers, not str</code> (I tried with .items same thing). For some reason it&#39;s not recognizing the key value and thinking it&#39;s a list indice. Any idea on how I can get the key?"}, {"owner": {"reputation": 513, "user_id": 1165419, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d42aa0d6ef112f8d7b613de03cbb89e1?s=128&d=identicon&r=PG", "display_name": "user1165419", "link": "https://stackoverflow.com/users/1165419/user1165419"}, "edited": false, "score": 0, "creation_date": 1466096970, "post_id": 37846746, "comment_id": 63187773, "body": "I played around with it a bit more and did this <code>dates = list(item[0][1][&quot;date&quot;].items())</code> but as you imagine, this only gets the first result only. I think I need a lambda function to iterate over the [0][1] but haven&#39;t been able to figure it out with the examples I&#39;ve seen."}, {"owner": {"reputation": 513, "user_id": 1165419, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d42aa0d6ef112f8d7b613de03cbb89e1?s=128&d=identicon&r=PG", "display_name": "user1165419", "link": "https://stackoverflow.com/users/1165419/user1165419"}, "edited": false, "score": 0, "creation_date": 1466104721, "post_id": 37846746, "comment_id": 63192142, "body": "Sort&#39;ve figured it out, using a for loop and then sorting it there. Thanks for the help/guidance!"}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": true, "score": 0, "last_activity_date": 1466029692, "last_edit_date": 1466029692, "creation_date": 1466029076, "answer_id": 37846746, "question_id": 37846632, "link": "https://stackoverflow.com/questions/37846632/sort-nested-defaultdict-within-a-list-of-dictionaries/37846746#37846746", "title": "sort nested defaultdict within a list of dictionaries", "body": "<p>The <code>key</code>parameter to sort or sorted can be any callable. This callable should return objects taht are directly comparable with Python's <code>==</code> and <code>&lt;=</code> operators. There is no need for the object passed as <code>key</code> to be the callable returned by <code>itemgetter</code> or some other complicated construct.</p>\n\n<p>There is no need for it to be a short - one expression function - that can be in a lambda as well.</p>\n\n<p>So, just define a function, let it have the size it has to - to retrieve the attributes you want to compare on. If there are more than one value, return a sequence with those values. Pass this function on the <code>key</code> named parameter to <code>sort</code>.</p>\n\n<p>I am not certain if I can figure out how you ant to order your keys/values inside your <code>date</code> nested dir, but it could be something along:</p>\n\n<pre><code>def sort_key(item):\n    dates = list(item[\"date\"].items())\n    # the key in the lambda bellow will get \n    # tuples with the datetime and subdictionary for each date:\n\n    dates.sort(key=lambda inner_date: (inner_date[0], sorted(inner_date[1][\"hour\"].keys())\n    return dates\n</code></pre>\n\n<p>Note that you need the inner sorting in rder to have your keys respecting the \"hour\" values as well - I did that by making each key on the sort of each \"date\" of each of your list items return a tuple where the first element is the \"date\" itself used as key, the second, a sorted list of the values showing up in the counter (but not the count for each value)  .</p>\n\n<p>If this secondary key is too complex to fit in a lambda, just create another function for it. These functions will only be called once for each item in the outer list you are sorting, so your performance should still be ok.</p>\n"}], "owner": {"reputation": 513, "user_id": 1165419, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d42aa0d6ef112f8d7b613de03cbb89e1?s=128&d=identicon&r=PG", "display_name": "user1165419", "link": "https://stackoverflow.com/users/1165419/user1165419"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 37846746, "answer_count": 1, "score": 0, "last_activity_date": 1466029692, "creation_date": 1466028545, "question_id": 37846632, "link": "https://stackoverflow.com/questions/37846632/sort-nested-defaultdict-within-a-list-of-dictionaries", "title": "sort nested defaultdict within a list of dictionaries", "body": "<p>Having trouble wrapping my head around how to order this list which consists of nested defaultdicts. I was able to sort by 'registration' key and the 'classes' value with this;</p>\n\n<pre><code>sorted(dict1.items(), key=itemgetter(1), reverse=True)\n</code></pre>\n\n<p>Which produced;</p>\n\n<p><code>[('registration', {'count': 11, 'classes': Counter({'class1': 5, 'class2': 5, 'class3': 1}), 'date': defaultdict(&lt;function date_record at 0x7fc173646500&gt;, {datetime.date(2016, 6, 7): {'count': 1, 'hour': Counter({16: 1})}, datetime.date(2016, 6, 6): {'count': 10, 'hour': Counter({16: 5, 14: 2, 8: 1, 10: 1, 12: 1})}})})]</code></p>\n\n<p>However now I'm trying to sort by 'date' which is a nested defaultdict. I'm trying to order by the date chronologically (from - to) and then finally, order the 'hour' Counter() chronologically (for reference; 8 = 8am, and 16 = 4pm). </p>\n\n<p>So the above defaultdict should look like this;</p>\n\n<p><code>[('registration', {'count': 11, 'classes': Counter({'class1': 5, 'class2': 5, 'class3': 1}), 'date': defaultdict(&lt;function date_record at 0x7fc173646500&gt;, {datetime.date(2016, 6, 6): {'count': 10, 'hour': Counter({16: 5, 14: 2, 12: 1, 10: 1, 8: 1})}, datetime.date(2016, 6, 7): {'count': 1, 'hour': Counter({16: 1, 14: 4})}})})]</code></p>\n\n<p>I'm just having trouble figuring out how to access the defaultdict. Any guidance on how I can access it within a sort?</p>\n"}, {"tags": ["python", "redis", "rabbitmq", "celery"], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 3601501, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5b4441e16c2311c6ea679e7600bccc3e?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Knuckle", "link": "https://stackoverflow.com/users/3601501/nick-knuckle"}, "is_accepted": false, "score": 1, "last_activity_date": 1466035988, "creation_date": 1466035988, "answer_id": 37847830, "question_id": 37846630, "link": "https://stackoverflow.com/questions/37846630/celery-received-unregistered-task-of-type-asyncresult-hash/37847830#37847830", "title": "Celery: Received unregistered task of type &lt;AsyncResult: [hash]&gt;", "body": "<p>I've determined the problem, and it's from using group.</p>\n\n<p>By passing the chain signature an argument, it's automatically applied asynchronously. By using group, I'm grouping the asyncResult object, which doesn't make any sense. I've altered the execution thusly:</p>\n\n<pre><code>def run_process(self, resource_generator, chain_signature):\n    for resources in resource_generator:\n        chain_signature(resources)\n</code></pre>\n\n<p>This effectively does what I wanted anyway.</p>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 96, "user_id": 3601501, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5b4441e16c2311c6ea679e7600bccc3e?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Knuckle", "link": "https://stackoverflow.com/users/3601501/nick-knuckle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466035988, "creation_date": 1466028533, "last_edit_date": 1495542179, "question_id": 37846630, "link": "https://stackoverflow.com/questions/37846630/celery-received-unregistered-task-of-type-asyncresult-hash", "title": "Celery: Received unregistered task of type &lt;AsyncResult: [hash]&gt;", "body": "<p>In all of the similar problems I've seen on stackOverflow:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/9769496/celery-received-unregistered-task-of-type-run-example\">Celery Received unregistered task of type (run example)</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12108639/getting-error-received-unregistered-task-of-type-mytasks-add\">getting error Received unregistered task of type &#39;mytasks.add&#39;</a></li>\n<li><a href=\"https://stackoverflow.com/questions/25385601/received-unregistered-task-for-celery\">Received unregistered task for celery</a></li>\n<li><a href=\"https://serverfault.com/questions/416888/celery-daemon-receives-unregistered-tasks\">https://serverfault.com/questions/416888/celery-daemon-receives-unregistered-tasks</a></li>\n<li><a href=\"https://github.com/duointeractive/sea-cucumber/issues/15\" rel=\"nofollow noreferrer\">https://github.com/duointeractive/sea-cucumber/issues/15</a></li>\n</ul>\n\n<p>the error states the name of the task that's unregistered. I'm having a different issue. The name of the task isn't being displayed, but rather <code>Received unregistered task of type &lt;AsyncResult: e8018fcb-cd15-4dca-ae6d-6eb906055f13&gt;</code>, resulting in <code>KeyError: &lt;AsyncResult: e8018fcb-cd15-4dca-ae6d-6eb906055f13&gt;</code>. </p>\n\n<p>Here's my traceback:</p>\n\n<pre><code>KeyError: &lt;AsyncResult: 4aca05f8-14c6-4a25-988a-ff605a27871d&gt;\n[2016-06-15 14:11:46,016: ERROR/MainProcess] Received unregistered task of type &lt;AsyncResult: e8018fcb-cd15-4dca-ae6d-6eb906055f13&gt;.\nThe message has been ignored and discarded.\n\nDid you remember to import the module containing this task?\nOr maybe you are using relative imports?\n\nThe full contents of the message body was:\n{'utc': True, 'chord': None, 'args': [], 'retries': 0, 'expires': None, 'task': &lt;AsyncResult: e8018fcb-cd15-4dca-ae6d-6eb906055f13&gt;, 'callbacks': None, 'errbacks': None, 'timelimit': (None, None), 'taskset': 'a6e8d1c0-c75b-471e-b21f-af8492592aeb', 'kwargs': {}, 'eta': None, 'id': '0dffed5f-3090-417c-a9ec-c99e11bc9579'} (568b)\nTraceback (most recent call last):\nFile \"/Users/me/Developer/virtualenvironments/project_name/lib/python2.7/site-packages/celery/worker/consumer.py\", line 456, in on_task_received\nstrategies[name](message, body,\nKeyError: &lt;AsyncResult: e8018fcb-cd15-4dca-ae6d-6eb906055f13&gt;\n</code></pre>\n\n<p>My celery app is including the file where my only 3 tasks are:</p>\n\n<p>app/celery_app.py:</p>\n\n<pre><code>celery_app = Celery('app',\n         broker='amqp://ip',  # RabbitMQ\n         backend='redis://ip', #Redis\n         include=['app.tasks.assets'])\n\ncelery_app.conf.update(\nCELERY_DEFAULT_QUEUE = 'local_testing',\nCELERY_TASK_RESULT_EXPIRES=86400,  # 24 hours\nCELERY_ROUTES={\n    'app.tasks.assets.list_assets': {'queue': 'gatherAPI'},\n    'app.tasks.assets.massage_assets': {'queue':'computation'},\n    'app.tasks.assets.save_assets': {'queue':'database_writes'},\n}\n</code></pre>\n\n<p>)</p>\n\n<p>app/tasks/assets.py:</p>\n\n<pre><code>from __future__ import absolute_import\nfrom celery import current_app\n\n@current_app.task(name='app.tasks.assets.list_assets')\ndef list_assets(*args, **kwargs):\n    print \"list assets\"\n\n@current_app.task(name='app.tasks.assets.massage_assets')\ndef massage_assets(assets):\n    print \"massaging assets\"\n\n@current_app.task(name='app.tasks.assets.save_assets', ignore_result=True)\ndef save_assets(assets):\n    print \"saving assets...\"\n</code></pre>\n\n<p>These errors occur <em>only</em> in the queues \"celery\" (which I'm not using) and \"local_testing\". </p>\n\n<p><strong>The appropriate queues for all of these tasks print out and work as intended</strong>, but somehow, the queues named \"celery\" and \"local_testing\" are filling up (same queue size) and spitting out nothing but this traceback over and over again.</p>\n\n<p>Here's how I'm calling the tasks...</p>\n\n<p>app/processes/processes.py:</p>\n\n<pre><code>from celery import group\nclass Process(object):\n    def run_process(self, resource_generator, chain_signature):\n        tasks = []\n        for resources in resource_generator:\n            tasks.append(chain_signature(resources))\n        group(tasks)()\n</code></pre>\n\n<p>app/processes/assets.py:</p>\n\n<pre><code>from __future__ import absolute_import\n\nfrom app.processes.processes import Process\nfrom app.indexes.asset import AssetIndex\nfrom app.tasks.assets import *\n\nclass AssetProcess(Process):\n    def run(self):\n        Process.run_process(self,\n                            resource_generator=AssetIndex.asset_generator(),\n                            chain_signature=(\n                                list_assets.s() | \n                                massage_assets.s() | \n                                save_assets.s()))\n</code></pre>\n\n<p>Again, the default queue is set to \"local_testing\", so I'm not sure how anything's being piped to the \"celery\" queue. The traceback I'm getting is also fairly unhelpful.</p>\n\n<p>I'm launching the celery worker (with the \"celery\" queue, or with the local_testing queue (-Q local_testing)) from the directory above app/, like so: </p>\n\n<p><code>celery -A app.celery_app worker -l info -n worker3.%h</code></p>\n\n<p>Any help is greatly appreciated.</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["python", "text", "python-imaging-library", "draw"], "owner": {"reputation": 41, "user_id": 4534938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68e68e42c94f819a439cac18d1c655c?s=128&d=identicon&r=PG&f=1", "display_name": "DaZeller", "link": "https://stackoverflow.com/users/4534938/dazeller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466028076, "creation_date": 1466028076, "question_id": 37846542, "link": "https://stackoverflow.com/questions/37846542/pil-imagedraw-draw-text-prevent-the-text-running-out-of-the-scope", "title": "PIL.ImageDraw.Draw.text prevent the text running out of the scope", "body": "<p>I'm trying to \"draw\" text onto pitures with a python script using PIL.</p>\n\n<p>The code looks like following:</p>\n\n<pre><code>    text = TextBoxDedication.get(\"1.0\",END).split(\"\\n\")\n\n    # Text auf dem Hintergund platzieren\n    lineCnt = 0\n    for line in text:\n        draw = ImageDraw.Draw(BackgroundDummy)\n        draw.text((IMG_POSITIONS[4][0],IMG_POSITIONS[4][1]+80*lineCnt), line, font=font)\n        print draw.size\n        lineCnt = lineCnt +1\n\n    BackgroundDummy = BackgroundDummy.resize(IMG_SIZES[2])\n    photo = ImageTk.PhotoImage(BackgroundDummy)\n</code></pre>\n\n<p>The Problem is: if the text results in a overlay which is to wide the text reaches the right border of the picture below.</p>\n\n<p>Does someone see a possibility to have a kind of \"auto-newline\" if the text would be to wide?</p>\n\n<p>Or can I at least determine the resulting size (in px) of a given text to estimate if it would fit onto the background or not?</p>\n\n<p>thanks a lot in advance!</p>\n\n<p>BR DaZeller</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 0, "creation_date": 1466030081, "post_id": 37846515, "comment_id": 63153890, "body": "Your example only does one insert. Are you saying running this code multiple times doesn&#39;t work?"}, {"owner": {"reputation": 236, "user_id": 3255497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931534bfb071e604b48ee5d09804a076?s=128&d=identicon&r=PG", "display_name": "grromrell", "link": "https://stackoverflow.com/users/3255497/grromrell"}, "reply_to_user": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 0, "creation_date": 1466088231, "post_id": 37846515, "comment_id": 63182031, "body": "Correct. Now the data variable is a list the contains many records, but the next time I try to run this it fails."}], "answers": [{"tags": [], "owner": {"reputation": 236, "user_id": 3255497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931534bfb071e604b48ee5d09804a076?s=128&d=identicon&r=PG", "display_name": "grromrell", "link": "https://stackoverflow.com/users/3255497/grromrell"}, "is_accepted": true, "score": 1, "last_activity_date": 1466724326, "creation_date": 1466724326, "answer_id": 38003430, "question_id": 37846515, "link": "https://stackoverflow.com/questions/37846515/sqlalchemy-rollback-in-mssql-on-inserts/38003430#38003430", "title": "SQLAlchemy Rollback in MSSQL on Inserts", "body": "<p>It turns out that when there is an error in the transaction SQLAlchemy will still rollback, whether you set reset_on_return to \"commit\" or not. I was attempting to insert np.nan values from a pandas dataframe, causing the error.</p>\n"}], "owner": {"reputation": 236, "user_id": 3255497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931534bfb071e604b48ee5d09804a076?s=128&d=identicon&r=PG", "display_name": "grromrell", "link": "https://stackoverflow.com/users/3255497/grromrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 38003430, "answer_count": 1, "score": 1, "last_activity_date": 1466724326, "creation_date": 1466027933, "question_id": 37846515, "link": "https://stackoverflow.com/questions/37846515/sqlalchemy-rollback-in-mssql-on-inserts", "title": "SQLAlchemy Rollback in MSSQL on Inserts", "body": "<p>I am trying to do multiple inserts to a MSSQL database by directly using the SqlAlchemy engine. </p>\n\n<pre><code>table = metadata.tables['TestTable']\nins = table.insert()\nwith engine.begin() as conn:\n    conn.execute(ins, data)\n</code></pre>\n\n<p>The first insert will work not problem. The second insert will attempt to run then execute a rollback, which will then fail with the following error:</p>\n\n<pre><code>sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('25000', '[25000' [FreeTDS][SQL Server]The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. (3903)(SQLEndTran)')\n</code></pre>\n\n<p>I have already altered the behavior of the queue pool to use reset_on_return=\"commit\" so I am at a loss for why this is happening. Any ideas on how to allow multiple inserts?</p>\n"}, {"tags": ["python", "sympy"], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 6468775, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LuVQun3DD10/AAAAAAAAAAI/AAAAAAAABXg/SBDdrW3Q9nw/photo.jpg?sz=128", "display_name": "ilmorez", "link": "https://stackoverflow.com/users/6468775/ilmorez"}, "edited": false, "score": 0, "creation_date": 1466057937, "post_id": 37848326, "comment_id": 63161381, "body": "thanks. I should have thought about the 100! that&#39;s just a number I want. I just substitute <code>Sum</code> with <code>Product</code> and expected it to get me something different than an exception. But what if I <b>DON&#39;T</b> know in advance the upper limit (see edited question)?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 188, "user_id": 6468775, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LuVQun3DD10/AAAAAAAAAAI/AAAAAAAABXg/SBDdrW3Q9nw/photo.jpg?sz=128", "display_name": "ilmorez", "link": "https://stackoverflow.com/users/6468775/ilmorez"}, "edited": false, "score": 0, "creation_date": 1466078798, "post_id": 37848326, "comment_id": 63174705, "body": "I&#39;ve added a workaround for the case when the limits are variable. It tries to mimic the code path followed by <code>Sum</code> and simply adds an analogous method for <code>Product</code>."}, {"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "edited": false, "score": 0, "creation_date": 1466186580, "post_id": 37848326, "comment_id": 63230146, "body": "This <code>_print_Product</code> should be added to SymPy itself."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 4, "last_activity_date": 1466078844, "last_edit_date": 1466078844, "creation_date": 1466039702, "answer_id": 37848326, "question_id": 37846492, "link": "https://stackoverflow.com/questions/37846492/sympy-cannot-lambdify-product/37848326#37848326", "title": "SymPy cannot lambdify Product", "body": "<h2>When the limits of the <code>Product</code> are known in advance</h2>\n\n<p>You could work around the problem by calling <code>.doit()</code> to expand the <code>Product</code> into its component parts:</p>\n\n<pre><code>In [104]: s = sy.Product(x[i], (i, 1, 10)); s\nOut[104]: Product(x[i], (i, 1, 10))\n\nIn [105]: s.doit()\nOut[105]: x[1]*x[2]*x[3]*x[4]*x[5]*x[6]*x[7]*x[8]*x[9]*x[10]\n</code></pre>\n\n<hr>\n\n<p>For example,</p>\n\n<pre><code>import sympy as sy\nfrom sympy.tensor import IndexedBase, Idx\nimport numpy as np\n\nx = sy.IndexedBase('x')\ni = sy.symbols('i', cls=Idx)\ns = sy.Product(x[i], (i, 1, 10))\ns_lambda = sy.lambdify(sy.DeferredVector('x'), s.doit(), 'numpy')\nprint(s_lambda(np.arange(11)))\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>3628800\n</code></pre>\n\n<hr>\n\n<p>However, if you use <code>.doit()</code> with <code>sy.Product(x[i], (i, 1, 100))</code> then you'll get an arithmetic overflow since <code>np.arange(101)</code> has dtype <code>int32</code> or <code>int64</code> (depending on your OS) and the product <code>100!</code></p>\n\n<pre><code>In [109]: math.factorial(100)\nOut[109]: 93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000\n</code></pre>\n\n<p>is too large be stored in either an <code>int32</code> or <code>int64</code> array value.</p>\n\n<pre><code>In [118]: np.iinfo('int64').max\nOut[118]: 9223372036854775807\n\nIn [119]: np.iinfo('int64').max &lt; math.factorial(100)\nOut[119]: True\n</code></pre>\n\n<p>Thus,</p>\n\n<pre><code>s = sy.Product(x[i], (i, 1, 100))\ns_lambda = sy.lambdify(sy.DeferredVector('x'), s.doit(), 'numpy')\nprint(s_lambda(np.arange(101)))\n</code></pre>\n\n<p>raises a </p>\n\n<pre><code>RuntimeWarning: overflow encountered in long_scalars\n</code></pre>\n\n<p>and erroneously prints <code>0</code>.</p>\n\n<hr>\n\n<p>If you change the input from an array of dtype <code>int64</code> to a list of Python <code>int</code>s then \nthe product can be computed correctly:</p>\n\n<pre><code>import sympy as sy\nfrom sympy.tensor import IndexedBase, Idx\nimport numpy as np\n\nx = sy.IndexedBase('x')\ni = sy.symbols('i', cls=Idx)\ns = sy.Product(x[i], (i, 1, 100))\ns_lambda = sy.lambdify(sy.DeferredVector('x'), s.doit(), 'numpy')\nprint(s_lambda(np.arange(101).tolist()))\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000\n</code></pre>\n\n<hr>\n\n<h2>When the limits of the <code>Product</code> are <em>not</em> known in advance</h2>\n\n<p>The work-around\n(AFAICS) becomes more complicated. If you use a debugger to trace the code path\nfollowed when <code>Sum</code> is used you'll find that\n<a href=\"https://github.com/sympy/sympy/blob/master/sympy/printing/lambdarepr.py#L44\" rel=\"nofollow\"><code>LambdaPrinter._print_Sum</code></a>\nis called to convert <code>Sum(x[i], (i, 0, n))</code> to the expression <code>builtins.sum(x[i] for\ni in range(0, n+1))</code>.</p>\n\n<p>If we add a <code>_print_Product</code> method to <code>NumPyPrinter</code> (a subclass of <code>LambdaPrinter</code>), \nthen we can get <code>lambdify</code> to successfully convert <code>Product</code> into an expression that NumPy can evaluate:</p>\n\n<pre><code>import sympy as sy\nfrom sympy.tensor import IndexedBase, Idx\nimport numpy as np\nimport sympy.printing.lambdarepr as SPL\n\ndef _print_Product(self, expr):\n    loops = (\n        'for {i} in range({a}, {b}+1)'.format(\n            i=self._print(i),\n            a=self._print(a),\n            b=self._print(b))\n        for i, a, b in expr.limits)\n    return '(prod([{function} {loops}]))'.format(\n        function=self._print(expr.function),\n        loops=' '.join(loops))\nSPL.NumPyPrinter._print_Product = _print_Product\n\nx = sy.IndexedBase('x')\ni = sy.symbols('i', cls=Idx)\nn = sy.symbols('n', integer=True, positive=True)\ns = sy.Product(x[i], (i, 1, n))\ns_lambda = sy.lambdify((sy.DeferredVector('x'), n), s, 'numpy')\nprint(s_lambda(np.arange(101), 5))\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>120\n</code></pre>\n"}], "owner": {"reputation": 188, "user_id": 6468775, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LuVQun3DD10/AAAAAAAAAAI/AAAAAAAABXg/SBDdrW3Q9nw/photo.jpg?sz=128", "display_name": "ilmorez", "link": "https://stackoverflow.com/users/6468775/ilmorez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 1, "accepted_answer_id": 37848326, "answer_count": 1, "score": 4, "last_activity_date": 1466078844, "creation_date": 1466027831, "last_edit_date": 1466077247, "question_id": 37846492, "link": "https://stackoverflow.com/questions/37846492/sympy-cannot-lambdify-product", "title": "SymPy cannot lambdify Product", "body": "<p>I'm using SymPy 1.0 and Python 2.7. I want to compute the sum of first 100 integer numbers:</p>\n\n<p>This code runs succesfully</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sympy as sy\nfrom sympy.tensor import IndexedBase, Idx\nimport numpy as np\n\nx = sy.IndexedBase('x')\ni = sy.symbols('i', cls=Idx)\ns = sy.Sum(x[i], (i, 0, 100))\ns_lambda = sy.lambdify(sy.DeferredVector('x'), s, 'numpy')\ns_lambda(np.arange(101))\n</code></pre>\n\n<p>And gives <code>5050</code> as expected. But when I try to do the same with a <code>Product</code> instead of a <code>Sum</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sympy as sy\nfrom sympy.tensor import IndexedBase, Idx\nimport numpy as np\n\nx = sy.IndexedBase('x')\ni = sy.symbols('i', cls=Idx)\ns = sy.Product(x[i], (i, 0, 100))\ns_lambda = sy.lambdify(sy.DeferredVector('x'), s, 'numpy')\ns_lambda(np.arange(101))\n</code></pre>\n\n<p>I got a <code>NameError: global name 'Product' is not defined</code>\nWhat am I doing wrong? Is there a workaround to get what I want?</p>\n\n<p>Edit 1:\nAnd what if I don't know in advance the limit of the <code>Product</code>. Let's say something like</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sympy as sy\nfrom sympy.tensor import IndexedBase, Idx\nimport numpy as np\n\nx = sy.IndexedBase('x')\ni = sy.symbols('i', cls=Idx)\nn = sy.symbols('n', integer=True, positive=True)\ns = sy.Product(x[i], (i, 0, n))\ns_lambda = sy.lambdify((sy.DeferredVector('x'), n) s.doit(), 'numpy')\ns_lambda(np.arange(101), 5)\n</code></pre>\n\n<p>Edit 2:\nI'm trying to find a workaround. <code>NameError: global name 'Product' is not defined</code> error is given because of this:\n</p>\n\n<pre><code>lambdastr((sy.DeferredVector('x'), n), p)\n</code></pre>\n\n<p>That gives:</p>\n\n<pre><code>lambda x,n: (Product(x[i], (i, 0, n)))\n</code></pre>\n\n<p>While for the <code>Sum</code> we got a working lambda function:</p>\n\n<pre><code>lambda x,n: ((builtins.sum(x[i] for i in range(0, n+1))))\n</code></pre>\n\n<p>At this point the problem revolves around the definition of the <code>Product</code> function. According to the manual I can inject via a <code>dict</code> my definition of a function\n</p>\n\n<pre><code>def my_prod(a, b):\n    # my implementation\n    pass\n\nmy_fun = {\"Product\" : my_prod}\nf = sy.lambdify((sy.DeferredVector('x'), n), p, modules=['numpy', my_fun])\nf([1,2,3,4,5], 2)\n</code></pre>\n\n<p>Problem is, <code>list indices must be integers, not Symbol</code> error is raised when I try to use the lambdified function <code>f</code>. I guess this is due to <code>i</code> that is a symbol while it is supposed to be an integer. I can't understand why it's not passed the actual <code>integer</code> before trying to call <code>my_prod</code> as it is for the <code>Sum</code> case.</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1466027737, "post_id": 37846421, "comment_id": 63153103, "body": "It&#39;s probably better to produce the full traceback (or at least a little more - you&#39;re missing a line number, for instance)."}, {"owner": {"reputation": 7143, "user_id": 1398915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/v1nEp.jpg?s=128&g=1", "display_name": "PepperoniPizza", "link": "https://stackoverflow.com/users/1398915/pepperonipizza"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1466027937, "post_id": 37846421, "comment_id": 63153180, "body": "@WayneWerner edited"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1466028277, "post_id": 37846421, "comment_id": 63153288, "body": "Where in the world are you getting this traceback from? A typical Python traceback looks more like <a href=\"https://gist.github.com/cde927a49804ec9944dd7d92ade3667d\" rel=\"nofollow noreferrer\">gist.github.com/cde927a49804ec9944dd7d92ade3667d</a> - Also, the only references in this traceback are to SQLAlchemy code, unless <code>&quot;&lt;string&gt;&quot;, line 1, in &lt;lambda&gt;</code> references your code. That seems super sketchy though."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1466068773, "post_id": 37846421, "comment_id": 63168103, "body": "You&#39;re probably passing garbage to <a href=\"http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.update\" rel=\"nofollow noreferrer\"><code>update()</code></a>. It expects a dictionary of attribute names, mapped attributes or SQL expressions as keys and literal values or sql expressions as values. Unless <code>change.new</code> happens to be exactly that, but we cannot know since you&#39;ve not included an <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>."}], "owner": {"reputation": 7143, "user_id": 1398915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/v1nEp.jpg?s=128&g=1", "display_name": "PepperoniPizza", "link": "https://stackoverflow.com/users/1398915/pepperonipizza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3283, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466027885, "creation_date": 1466027531, "last_edit_date": 1466027885, "question_id": 37846421, "link": "https://stackoverflow.com/questions/37846421/compileerror-unconsumed-column-names", "title": "CompileError: Unconsumed column names", "body": "<p>I have a conditional that takes care of updating or deleting a model based on changes on a model and an operation. </p>\n\n<pre><code>if change.operation == 'UPDATE':\n    db.query(model).filter_by(id=change.old_record_id).update(change.new)\nelif change.operation == 'DELETE':\n    db.query(model).filter_by(id=change.old_record_id).delete()\n\ndb.commit()\n</code></pre>\n\n<p>When my code reaches this point it gives:\n<code>sqlalchemy.exc:CompileError: Unconsumed column names: subscribers</code></p>\n\n<p>I am declaring my engine in this function:</p>\n\n<pre><code>def make_session(connection_string):\n    engine = create_engine(connection_string, echo=False, convert_unicode=True,\n                           pool_size=20, max_overflow=20)\n    Session = scoped_session(sessionmaker(bind=engine))\n    return Session, engine\n</code></pre>\n\n<p><strong>Full traceback</strong></p>\n\n<p>The error points to the line 2 of my example, where the update happens</p>\n\n<pre><code>File \".../site-packages/sqlalchemy/orm/query.py\", line 2851, in update\nFile \".../site-packages/sqlalchemy/orm/persistence.py\", line 897, in exec_\nFile \".../site-packages/sqlalchemy/orm/persistence.py\", line 995, in _do_exec\nFile \".../site-packages/sqlalchemy/orm/session.py\", line 1021, in execute\nFile \".../site-packages/sqlalchemy/engine/base.py\", line 841, in execute\nFile \".../site-packages/sqlalchemy/sql/elements.py\", line 322, in _execute_on_connection\nFile \".../site-packages/sqlalchemy/engine/base.py\", line 931, in _execute_clauseelement\nFile \"&lt;string&gt;\", line 1, in &lt;lambda&gt;\nFile \".../site-packages/sqlalchemy/sql/elements.py\", line 493, in compile\nFile \".../site-packages/sqlalchemy/sql/elements.py\", line 499, in _compiler\nFile \".../site-packages/sqlalchemy/sql/compiler.py\", line 395, in __init__\nFile \".../site-packages/sqlalchemy/sql/compiler.py\", line 199, in __init__\nFile \".../site-packages/sqlalchemy/sql/compiler.py\", line 222, in process\nFile \".../site-packages/sqlalchemy/sql/visitors.py\", line 80, in _compiler_dispatch\nFile \".../site-packages/sqlalchemy/sql/compiler.py\", line 1814, in visit_update\nFile \".../site-packages/sqlalchemy/sql/compiler.py\", line 2225, in _get_colparams\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "random", "tuples"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1466027501, "post_id": 37846381, "comment_id": 63153011, "body": "Why the list inside a list with tuples? Why not <code>[(&#39;1&#39;, &#39;E&#39;), (&#39;2&#39;, &#39;K&#39;)]</code>?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1466027678, "post_id": 37846381, "comment_id": 63153088, "body": "Your <code>x &gt; MF</code> test can never pass if <code>MF</code> is a string, because Python 2 always sorts numbers before other types (so <code>2 &gt; &quot;0.5&quot;</code> is always <i>false</i>). Are you sure you didn&#39;t pass in <code>0.5</code> <i>without</i> the quotes?"}, {"owner": {"reputation": 187, "user_id": 3805057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001813437238/picture?type=large", "display_name": "user3805057", "link": "https://stackoverflow.com/users/3805057/user3805057"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1466031205, "post_id": 37846381, "comment_id": 63154202, "body": "Yes I didn&#39;t pass , here I just mentioned it for giving example. Thanks"}, {"owner": {"reputation": 187, "user_id": 3805057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001813437238/picture?type=large", "display_name": "user3805057", "link": "https://stackoverflow.com/users/3805057/user3805057"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1466031325, "post_id": 37846381, "comment_id": 63154231, "body": "I want to put it in nested list because later I want to extract  based on list of tubles."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 3805057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001813437238/picture?type=large", "display_name": "user3805057", "link": "https://stackoverflow.com/users/3805057/user3805057"}, "edited": false, "score": 0, "creation_date": 1466061068, "post_id": 37846397, "comment_id": 63163168, "body": "As your suggestion I created list of tuples by this line: mut.append(tuple(str(pos)+res). Then I got list of tuples as follows  mut=[(&#39;G&#39;, &#39;1&#39;, &#39;E&#39;), (&#39;G&#39;, &#39;2&#39;, &#39;K&#39;)]. Finally , I put this list into another list by mutation_combinations = chain.from_iterable([list(combinations([mut], 1))])"}, {"owner": {"reputation": 187, "user_id": 3805057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001813437238/picture?type=large", "display_name": "user3805057", "link": "https://stackoverflow.com/users/3805057/user3805057"}, "edited": false, "score": 0, "creation_date": 1466061563, "post_id": 37846397, "comment_id": 63163459, "body": "Its working with adding another line -&gt; mutation_combinations = chain.from_iterable([list(combinations([mut], 1))]. I updated my correct script"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 0, "last_activity_date": 1466028581, "last_edit_date": 1466028581, "creation_date": 1466027427, "answer_id": 37846397, "question_id": 37846381, "link": "https://stackoverflow.com/questions/37846381/how-to-join-a-consecutive-tuples-by-comma-in-nested-list/37846397#37846397", "title": "How to join a consecutive tuples by comma in nested list?", "body": "<p>You are appending a tuple <em>inside a list</em>:</p>\n\n<pre><code>mut.append([tuple(str(pos)+res)])\n</code></pre>\n\n<p>Remove the <code>[...]</code> brackets; these create your nested list objects, you don't need it:</p>\n\n<pre><code>mut.append(tuple(str(pos)+res))\n</code></pre>\n\n<p>Rather than concatenate characters then convert the string back to a tuple, just create the tuple directly:</p>\n\n<pre><code>mut.append((str(pos), res))\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 3805057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001813437238/picture?type=large", "display_name": "user3805057", "link": "https://stackoverflow.com/users/3805057/user3805057"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "accepted_answer_id": 37846397, "answer_count": 1, "score": 0, "last_activity_date": 1466061415, "creation_date": 1466027375, "last_edit_date": 1466061415, "question_id": 37846381, "link": "https://stackoverflow.com/questions/37846381/how-to-join-a-consecutive-tuples-by-comma-in-nested-list", "title": "How to join a consecutive tuples by comma in nested list?", "body": "<p>I have a four inputs values from user as follows:</p>\n\n<pre><code>numbers[1, 2]\nnumbersLetters={'E': 1,'K': 2}\nRandomFrequency=\"0.5\"\n</code></pre>\n\n<p>Here, My aim is to randomize the numbers list and get the random no which has > 0.5.</p>\n\n<p>Then, get the letter of selected random no from numbersLetters dictionary.</p>\n\n<p>Finally, append all the matched random no along with respective letter in single tuples inside the list of another list.</p>\n\n<p>Expected OUPUT something like this:</p>\n\n<pre><code>[[('1', 'E'), ('2', 'K')]]\n</code></pre>\n\n<p>WHAT I get:</p>\n\n<pre><code>[[('1', 'E')], [('2', 'K')]]\n</code></pre>\n\n<p>My script</p>\n\n<pre><code>import random\n\ndef randomMutation(numbers,numbersLetters,MF):\n    mut=[]\n    for res,pos in numbersLetters.iteritems():\n        r = random.choice([x for x in numbers if x &gt; MF])\n        if pos==r:\n            fp=int(pos)-1\n            mut.append([tuple(str(pos)+res)])\n    print mut\n\nif __name__ == '__main__':\n    randomMutation([1, 2],{'E': 1,'K': 2},\"0.5\")\n</code></pre>\n\n<p>I got an answer:</p>\n\n<pre><code>import random\n\ndef randomMutation(numbers,numbersLetters,MF):\n    mut=[]\n    for res,pos in numbersLetters.iteritems():\n        r = random.choice([x for x in numbers if x &gt; MF])\n        if pos==r:\n            fp=int(pos)-1\n            mut.append((tuple(str(pos)+res)))#changes\n    if not mut:\n        print \"The possibility of random positions is not available for given thresold value ( &gt; \"+ str(MF)+\")\"\n    else:\n        mutation_combinations = chain.from_iterable([list(combinations([mut], 1))])\n\nif __name__ == '__main__':\n    randomMutation([1, 2],{'E': 1,'K': 2},\"0.5\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "global", "local"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 2, "creation_date": 1466027462, "post_id": 37846357, "comment_id": 63153001, "body": "Read <a href=\"http://pandas.pydata.org/pandas-docs/stable/overview.html#mutability-and-copying-of-data\" rel=\"nofollow noreferrer\">this</a>. If you need an independent copy of your DF use this method: <code>df2 = df.copy()</code>"}, {"owner": {"reputation": 10228, "user_id": 2327821, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/57fa1b45f0d65360236c8ba7fc0feefb?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2327821/michael"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1466027746, "post_id": 37846357, "comment_id": 63153108, "body": "So adding a column is one of the only things that can change the global DataFrame??? Seems like mutability should be an all or nothing affair for a particular type of object absent an explicit declaration. They don&#39;t even list out the other attributes that are mutable! Nevertheless, thanks for the explanation."}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 7, "last_activity_date": 1498682422, "last_edit_date": 1498682422, "creation_date": 1466027958, "answer_id": 37846522, "question_id": 37846357, "link": "https://stackoverflow.com/questions/37846357/why-does-this-dataframe-modification-within-function-change-global-outside-funct/37846522#37846522", "title": "Why Does this DataFrame Modification within Function Change Global Outside Function?", "body": "<p>from <a href=\"http://pandas.pydata.org/pandas-docs/stable/overview.html#mutability-and-copying-of-data\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p><strong>Mutability and copying of data</strong></p>\n  \n  <p>All pandas data structures are value-mutable (the values they contain can be altered) but not always\n  size-mutable. The length of a Series cannot be changed, but, for\n  example, columns can be inserted into a DataFrame. However, the vast\n  majority of methods produce new objects and leave the input data\n  untouched. In general, though, we like to <strong>favor immutability</strong> where\n  sensible.</p>\n</blockquote>\n\n<p>Here is another example, showing values (cell's) mutability:</p>\n\n<pre><code>In [21]: df\nOut[21]:\n   a  b  c\n0  3  2  0\n1  3  3  1\n2  4  0  0\n3  2  3  2\n4  0  4  4\n\nIn [22]: df2 = df\n\nIn [23]: df2.loc[0, 'a'] = 100\n\nIn [24]: df\nOut[24]:\n     a  b  c\n0  100  2  0\n1    3  3  1\n2    4  0  0\n3    2  3  2\n4    0  4  4\n</code></pre>\n\n<p><code>df2</code> is a reference to <code>df</code></p>\n\n<pre><code>In [28]: id(df) == id(df2)\nOut[28]: True\n</code></pre>\n\n<p>Your function, that won't mutate the argument DF:</p>\n\n<pre><code>def adding_var_inside_function(df):\n    df = df.copy()\n    df['value'] = 0\n    return df\n\nIn [30]: df\nOut[30]:\n     a  b  c\n0  100  2  0\n1    3  3  1\n2    4  0  0\n3    2  3  2\n4    0  4  4\n\nIn [31]: adding_var_inside_function(df)\nOut[31]:\n     a  b  c  value\n0  100  2  0      0\n1    3  3  1      0\n2    4  0  0      0\n3    2  3  2      0\n4    0  4  4      0\n\nIn [32]: df\nOut[32]:\n     a  b  c\n0  100  2  0\n1    3  3  1\n2    4  0  0\n3    2  3  2\n4    0  4  4\n</code></pre>\n"}], "owner": {"reputation": 10228, "user_id": 2327821, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/57fa1b45f0d65360236c8ba7fc0feefb?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2327821/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2419, "favorite_count": 6, "answer_count": 1, "score": 5, "last_activity_date": 1498682422, "creation_date": 1466027260, "question_id": 37846357, "link": "https://stackoverflow.com/questions/37846357/why-does-this-dataframe-modification-within-function-change-global-outside-funct", "title": "Why Does this DataFrame Modification within Function Change Global Outside Function?", "body": "<p>Why does the function below change the global <code>DataFrame</code> named <code>df</code>? Shouldn't it just change a local <code>df</code> within the function, but not the global <code>df</code>?</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame()\n\ndef adding_var_inside_function(df):\n    df['value'] = 0\n\nprint(df.columns) # Index([], dtype='object')\nadding_var_inside_function(df)\nprint(df.columns) # Index([u'value'], dtype='object')\n</code></pre>\n"}, {"tags": ["python", "html"], "comments": [{"owner": {"reputation": 14088, "user_id": 4642212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f858afc6f98f72ca7d617da224a28db7?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Simon", "link": "https://stackoverflow.com/users/4642212/sebastian-simon"}, "edited": false, "score": 1, "creation_date": 1466027346, "post_id": 37846355, "comment_id": 63152952, "body": "Use <code>text.replace(&quot;&lt;&quot;, &quot;&amp;lt;&quot;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": true, "score": 3, "last_activity_date": 1466028030, "creation_date": 1466028030, "answer_id": 37846536, "question_id": 37846355, "link": "https://stackoverflow.com/questions/37846355/preventing-conflict-between-math-symbols-and-html-code/37846536#37846536", "title": "preventing conflict between math symbols and html code", "body": "<p>Use <code>xml.sax.saxutils.escape</code> function:</p>\n\n<pre><code>import xml.sax.saxutils\nescaped = xml.sax.saxutils.escape(text)\n</code></pre>\n\n<p>This will Escape '&amp;', '&lt;', and '>' in the text string.</p>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "is_accepted": false, "score": 0, "last_activity_date": 1466028298, "creation_date": 1466028298, "answer_id": 37846586, "question_id": 37846355, "link": "https://stackoverflow.com/questions/37846355/preventing-conflict-between-math-symbols-and-html-code/37846586#37846586", "title": "preventing conflict between math symbols and html code", "body": "<p>HTML has several characters with special meanings (including angle brackets), and is also usually represented in ASCII, so a good way to represent these types of special characters are needed. </p>\n\n<p>In HTML, escape sequences are used to represent them. For example, a <code>&amp;</code> character is represented by the named escape sequence <code>&amp;amp;</code> or the numerical escape sequence <code>&amp;#38;</code>. Only the most common special characters have named escape sequences.</p>\n\n<p>Here's a <a href=\"http://www.ascii.cl/htmlcodes.htm\" rel=\"nofollow\">good</a> list of sequences.</p>\n"}], "owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 37846536, "answer_count": 2, "score": 0, "last_activity_date": 1466028298, "creation_date": 1466027250, "question_id": 37846355, "link": "https://stackoverflow.com/questions/37846355/preventing-conflict-between-math-symbols-and-html-code", "title": "preventing conflict between math symbols and html code", "body": "<p>I want to present text out of math publications and every now and then I get something like </p>\n\n<pre><code>O(1/N_f) Corrections to the Thirring Model in 2&lt;d&lt;4&lt;\n</code></pre>\n\n<p>The last part will be misinterpreted as html. I have to paste this text directly on the website allowing html. The reason why I need to allow html is that I use elasticsearch and I want to highlight the search results (elasticsearch puts  tags in the text). So can't just prevent html interpretation of the text. </p>\n\n<p>However, I can pre-process the text to prevent any conflict. For example above all conflict is avoided by using </p>\n\n<pre><code>text.replace('&lt;', \" &lt; \")\n</code></pre>\n\n<p>in python. However, this is far from optimal since\n1. It will introduce spaces even when they are not needed\n2. It only accounts for this particular collision between math symbols and html\nSince I figure I am not the first person who encounters this I was wondering whether there is a general solution for such a problem?</p>\n"}, {"tags": ["python", "python-3.x", "cryptography", "caesar-cipher"], "comments": [{"owner": {"reputation": 1450, "user_id": 6216811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c3f4852b869530a7fcca4d2f1d615e?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6216811/david"}, "edited": false, "score": 0, "creation_date": 1466027266, "post_id": 37846301, "comment_id": 63152919, "body": "The code will be the same as encryption, except you lookup in shiftedAlphabet and replace with the relevant position in alphabet."}], "answers": [{"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 0, "last_activity_date": 1466027319, "creation_date": 1466027319, "answer_id": 37846371, "question_id": 37846301, "link": "https://stackoverflow.com/questions/37846301/i-am-building-a-caesar-cipher-for-my-school-project-and-would-like-to-know-how-t/37846371#37846371", "title": "I am building a caesar cipher for my school project and would like to know how the decryption part would work", "body": "<p>Caesar cyphers are symmetric - you just need to apply the same logic backwards - find the index in the ciphered text and get that index from the plain alphabet:</p>\n\n<pre><code>plain = ''\nfor eachletter in cipertext:\n    position = shiftedAlphabet.index(eachletter)\n    shiftedLetter = alphabet[position]\n    plain = plain + shiftedLetter\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6471770"}, "edited": false, "score": 0, "creation_date": 1466028441, "post_id": 37846464, "comment_id": 63153342, "body": "Thanks for the suggestions - I appreciate it. Nevertheless, how would i include the decryption and shift code?"}, {"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "edited": false, "score": 0, "creation_date": 1466028607, "post_id": 37846464, "comment_id": 63153391, "body": "The code you posted works by using a shifted alphabet and indexes. In order to make this work on an arbitrary shift, the alphabet must be shifted by that much. If you think about it, shifting the alphabet 3 to the left, just takes the first 3 characters of the alphabet and puts them in the back. <code>abcd.....xyz</code> -&gt; <code>def....xyzabc</code>. Think about string splicing and how you could do this."}, {"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "edited": false, "score": 0, "creation_date": 1466028833, "post_id": 37846464, "comment_id": 63153483, "body": "Additionally, for the decryption, you&#39;d do the same thing with a shifted alphabet, but instead of shifting to the left, you&#39;d shift to the right: <code>abc..xyz</code> -&gt; <code>xyzabc...uvw</code>. I&#39;m not going to write code for you though, because as far as I can tell that&#39;s you&#39;re assignment. Just giving some food for thought."}], "tags": [], "owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "is_accepted": false, "score": 0, "last_activity_date": 1466027707, "creation_date": 1466027707, "answer_id": 37846464, "question_id": 37846301, "link": "https://stackoverflow.com/questions/37846301/i-am-building-a-caesar-cipher-for-my-school-project-and-would-like-to-know-how-t/37846464#37846464", "title": "I am building a caesar cipher for my school project and would like to know how the decryption part would work", "body": "<p>So there are a couple issues with the code you've posted already. There are some minor syntax errors I can overlook, but there are also some logical errors. </p>\n\n<p>Your second prompt to the user asks how many shifts they would like to make, yet the shifted alphabet you use for your program always shifts from <code>'a'</code> to <code>'j'</code>. What happens if the use enters a shift that's not <code>9</code>?</p>\n\n<p>On another note, what happens when the input plaintext has a character that is not in the alphabet? When you do .index(eachletter), it will return -1. How will that cause your cipher to behave?</p>\n\n<p>Finally, it appears your instructor would like to be able to press <code>'e'</code> or <code>'d'</code> at any time to encrypt or decrypt, however right now if a user tries to decrypt at the beginning, <code>I don't understand</code> is printed. Same problem with decrypt at the end. Also, you will probably need to ask for a shift when you decrypt as well.</p>\n\n<p>My last piece of advice is to think about what a Caesar cipher is. You merely rotate letters. If the input is <code>a cat</code> and the shift is <code>2</code>, you get <code>c ecv</code>. To decrypt, you simply need to rotate each letter backwards the same amount, <code>2</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6471770"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466028598, "creation_date": 1466027071, "last_edit_date": 1466028598, "question_id": 37846301, "link": "https://stackoverflow.com/questions/37846301/i-am-building-a-caesar-cipher-for-my-school-project-and-would-like-to-know-how-t", "title": "I am building a caesar cipher for my school project and would like to know how the decryption part would work", "body": "<p>I am writing in Python 3.4 and have so far programmed this:</p>\n\n<pre><code>plaintext = \"\"\nprint (\"Do you want to encrypt or decrypt a phrase?\")\nanswer = input(\"Type e for encrypt or d for decrypt and hit 'Enter'.\").lower()\nif answer == (\"e\") or answer == (\"encrypt\"):\n    plaintext = input(\"Enter the phrase you would like to encrypt:\")\nelse:\n    print(\"I don't understand\")\n\nshift = int(input(\"How many shifts would you like to make?\")\n\nalphabet = \"abcdefghijklmnopqrstuvwxyz\"\nshiftedAlphabet = \"jklmnopqrstuvwxyzabcdefghi\"\nciphertext = \"\"\n\n\nfor eachletter in plaintext:\n    position = alphabet.index(eachletter)\n    shiftedLetter = shiftedAlphabet[position]\n    ciphertext = ciphertext + shiftedLetter\n\n\nprint(ciphertext)\n\n\nif answer == (\"d\") or answer == (\"decrypt\")\n    ciphertext = input(\"Enter the phrase you would like to decrypt:\"\nelse:\n    print(\"mmmm okay\")\n\nshiftedAlphabet -  \n</code></pre>\n\n<p>I don't how to program the decryption part (please note: I would like the code relatively simple and would like it to be similar to that above).</p>\n"}, {"tags": ["python", "memory"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1466028624, "post_id": 37846284, "comment_id": 63153402, "body": "It doesn&#39;t sound like you need to read the whole thing into memory. You should describe the structure of your data more clearly and what the result you are looking for is."}], "answers": [{"comments": [{"owner": {"reputation": 1165, "user_id": 3533419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a738a5f192993aa41d8d384b672d3db?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/3533419/null"}, "edited": false, "score": 0, "creation_date": 1466028386, "post_id": 37846507, "comment_id": 63153326, "body": "Okay. So what do you propose?"}, {"owner": {"reputation": 455, "user_id": 1238367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e961c5522c9878b8395ba21baf032d6?s=128&d=identicon&r=PG", "display_name": "user1238367", "link": "https://stackoverflow.com/users/1238367/user1238367"}, "reply_to_user": {"reputation": 1165, "user_id": 3533419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a738a5f192993aa41d8d384b672d3db?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/3533419/null"}, "edited": false, "score": 1, "creation_date": 1466028715, "post_id": 37846507, "comment_id": 63153436, "body": "In general you shouldn&#39;t read huge files into the memory in one piece unless you have to. But if you do, use generators instead of lists."}, {"owner": {"reputation": 19943, "user_id": 114795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75cc8b57acc4841f83c3f5ccea0091f?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Korobov", "link": "https://stackoverflow.com/users/114795/mikhail-korobov"}, "edited": false, "score": 1, "creation_date": 1466029233, "post_id": 37846507, "comment_id": 63153607, "body": "Note that <code>sys.getsizeof([&#39;a&#39;, &#39;b&#39;])</code> doesn&#39;t return an amount of memory this data structure is using - it returns the memory allocated for list, not including its elements. It requires 80+50+50=180 bytes."}], "tags": [], "owner": {"reputation": 455, "user_id": 1238367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e961c5522c9878b8395ba21baf032d6?s=128&d=identicon&r=PG", "display_name": "user1238367", "link": "https://stackoverflow.com/users/1238367/user1238367"}, "is_accepted": false, "score": 1, "last_activity_date": 1466027900, "creation_date": 1466027900, "answer_id": 37846507, "question_id": 37846284, "link": "https://stackoverflow.com/questions/37846284/why-does-text-representation-as-a-list-consume-so-much-memory/37846507#37846507", "title": "Why does text representation as a list consume so much memory?", "body": "<p>Lists and strings are objects and objects have properties that take memory space. You can check the size of the objects and the overhead with <code>sys.getsizeof</code>:</p>\n\n<pre><code>&gt;&gt;&gt; sys.getsizeof('')\n49\n&gt;&gt;&gt; sys.getsizeof('abcd')\n53\n&gt;&gt;&gt; sys.getsizeof([])\n64\n&gt;&gt;&gt; sys.getsizeof(['a'])\n72\n&gt;&gt;&gt; sys.getsizeof(['a', 'b'])\n80\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1165, "user_id": 3533419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a738a5f192993aa41d8d384b672d3db?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/3533419/null"}, "edited": false, "score": 0, "creation_date": 1466028859, "post_id": 37846654, "comment_id": 63153492, "body": "This seems to be promising. However, nothing changes and the laptop still crashes. You&#39;ve probably reduces the memory consumption, but it is still too large."}, {"owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "reply_to_user": {"reputation": 1165, "user_id": 3533419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a738a5f192993aa41d8d384b672d3db?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/3533419/null"}, "edited": false, "score": 0, "creation_date": 1466029375, "post_id": 37846654, "comment_id": 63153662, "body": "Edited to eliminate duplicate words if you&#39;re not interested in duplicates"}], "tags": [], "owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1466029325, "last_edit_date": 1466029325, "creation_date": 1466028650, "answer_id": 37846654, "question_id": 37846284, "link": "https://stackoverflow.com/questions/37846284/why-does-text-representation-as-a-list-consume-so-much-memory/37846654#37846654", "title": "Why does text representation as a list consume so much memory?", "body": "<p>You are keeping multiple representations of the data in memory at the same time. The file buffer in <code>readlines()</code>, also <code>sentences</code> and again when you are building the list to return. To reduce memory, process the file a line at a time. Only <code>words</code> will then hold the entire contents of the file. </p>\n\n<pre><code>def get_tokenized_text(file_name):\n    words = []\n    f = open(file_name,'rt')\n    for line in f:\n        words.extend( x for x in line.strip().split(' ') if x not in words)\n    return words\n\nwords = get_tokenized_text('book.txt')\nprint words\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1165, "user_id": 3533419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a738a5f192993aa41d8d384b672d3db?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/3533419/null"}, "edited": false, "score": 0, "creation_date": 1466028976, "post_id": 37846659, "comment_id": 63153536, "body": "Thanks for this detailed explanation. Does this mean that I am on the looser side and just need to provide more memory? Or is there a ploy to solve this problem?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1165, "user_id": 3533419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a738a5f192993aa41d8d384b672d3db?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/3533419/null"}, "edited": false, "score": 0, "creation_date": 1466029327, "post_id": 37846659, "comment_id": 63153645, "body": "It depends on exactly what you&#39;re trying to do.  Your best bet is probably to find a different way to represent your data.  For example, you would be far better off if you didn&#39;t insist on holding the whole thing in memory at once.  You might be enough better off if you just represented the sentences as single strings instead of lists, splitting individual sentences as needed instead of pre-splitting all of them.  Ultimately, you have your disk.  You could always read from disk as needed and process a line at a time instead of slurping the whole file into memory."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1466028672, "creation_date": 1466028672, "answer_id": 37846659, "question_id": 37846284, "link": "https://stackoverflow.com/questions/37846284/why-does-text-representation-as-a-list-consume-so-much-memory/37846659#37846659", "title": "Why does text representation as a list consume so much memory?", "body": "<blockquote>\n  <p>Why? The text should occupy about 335 MB.</p>\n</blockquote>\n\n<p>Supposing that the text is encoded in UTF-8 or one of the various single-byte encodings -- which is likely -- the text itself does occupy a bit more than 335 MB in Python 2, but at least twice as much and maybe four times as much in Python 3, depending on your implementation.  This is because Python 3 strings are Unicode strings by default, and they are represented internally with either two or four bytes per character.</p>\n\n<blockquote>\n  <p>Even if I'd been generous and I'd approved let's say four times as much memory just for administration stuff, there is no reason for memory congestion.</p>\n</blockquote>\n\n<p>But there is.  Each Python object has relatively substantial overhead.  In CPython 3.4, for example, there is a refcount, a pointer to a type object, a couple of additional pointers linking the objects together into a doubly-linked list, and type-specific additional data.  Almost all of that is overhead.  Ignoring the type-specific data, just the three pointers and the refcount represent 32 bytes of overhead per object in a 64-bit build.</p>\n\n<p>Strings have an additional length, hashcode, data pointer, and flags, for about 24 more bytes per object (again assuming a 64-bit build).</p>\n\n<p>If your words average 6 characters then each one takes about 6 bytes in your text file, but about 68 bytes as a Python object (maybe as little as 40-ish bytes in a 32-bit Python).  That doesn't count the overhead of the lists, which likely add at least 8 bytes per word and 8 more per sentence.</p>\n\n<p>So yes, an expansion of a factor of 12 or more does not seem at all unlikely.</p>\n\n<blockquote>\n  <p>Is there any memory leak that I oversee right now?</p>\n</blockquote>\n\n<p>Unlikely.  Python does a pretty good job of tracking objects and collecting garbage.  You do not generally see memory leaks in pure Python codes.</p>\n"}, {"tags": [], "owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1466061157, "creation_date": 1466061157, "answer_id": 37852246, "question_id": 37846284, "link": "https://stackoverflow.com/questions/37846284/why-does-text-representation-as-a-list-consume-so-much-memory/37852246#37852246", "title": "Why does text representation as a list consume so much memory?", "body": "<p>My first answer attempted to reduce memory usage by not keeping intermediate lists in memory at the same time. \nBut that still did not manage to squeeze the whole data structure into 4GB of RAM. </p>\n\n<p>With this approach, using a 40MB text file made up of Project Gutenberg books as test data, the data requirement is reduced from 270 to 55 MB.\nA 355 MB input file would then take an estimated 500MB memory, which hopefully would fit.</p>\n\n<p>This approach builds a dictionary of unique words and assigns a unique integer token to each one (<code>word_dict</code>).\nThen the list of sentences <code>word_tokens</code> uses the integer token instead of the word itself.\nThen <code>word_dict</code> has its keys and values swapped so that the integer tokens in <code>word_tokens</code> can be used to lookup the corresponding word.</p>\n\n<p>I'm using 32-bit Python which uses a lot less memory then 64-bit Python, because the pointers are half the size.</p>\n\n<p>To get the total size of containers like list &amp; dictionary, I've used code from <a href=\"http://code.activestate.com/recipes/577504/\" rel=\"nofollow\">http://code.activestate.com/recipes/577504/</a> by Raymond Hettinger.\nIt includes not just the container itself but sub-containers and the bottom level items they point to.</p>\n\n<pre><code>import sys, os, fnmatch, datetime, time, re\n\n# Original approach\ndef get_tokenized_text(file_name):\n    words = []\n    f = open(file_name,'rt')\n    for line in f:\n        words.append( line.strip().split(' ') )\n    return words\n\n# Two step approach\n# 1. Build a dictionary of unique words in the file indexed with an integer\n\ndef build_dict(file_name):\n    dict = {}\n    n = 0\n    f = open(file_name,'rt')\n    for line in f:\n        words = line.strip().split(' ')\n        for w in words:\n            if not w in dict:\n                dict[w] = n\n                n = n + 1\n    return dict\n\n# 2. Read the file again and build list of sentence-words but using the integer indexes instead of the word itself\n\ndef read_with_dict(file_name):\n    tokens = []\n    f = open(file_name,'rt')\n    for line in f:\n        words = line.strip().split(' ')\n        tokens.append( dict[w] for w in words )\n    return tokens\n\n\n# Adapted from http://code.activestate.com/recipes/577504/ by Raymond Hettinger \nfrom itertools import chain\nfrom collections import deque\n\ndef total_size(o, handlers={}):\n    \"\"\" Returns the approximate memory footprint an object and all of its contents.\n\n    Automatically finds the contents of the following builtin containers and\n    their subclasses:  tuple, list, deque, dict, set and frozenset.\n    To search other containers, add handlers to iterate over their contents:\n\n        handlers = {SomeContainerClass: iter,\n                    OtherContainerClass: OtherContainerClass.get_elements}\n\n    \"\"\"\n    dict_handler = lambda d: chain.from_iterable(d.items())\n    all_handlers = {tuple: iter,\n                    list: iter,\n                    deque: iter,\n                    dict: dict_handler,\n                    set: iter,\n                    frozenset: iter,\n                   }\n    all_handlers.update(handlers)     # user handlers take precedence\n    seen = set()                      # track which object id's have already been seen\n    default_size = sys.getsizeof(0)       # estimate sizeof object without __sizeof__\n\n    def sizeof(o):\n        if id(o) in seen:       # do not double count the same object\n            return 0\n        seen.add(id(o))\n        s = sys.getsizeof(o, default_size)\n\n        for typ, handler in all_handlers.items():\n            if isinstance(o, typ):\n                s += sum(map(sizeof, handler(o)))\n                break\n        return s\n    return sizeof(o)\n\n# Display your Python configurstion? 32-bit Python takes about half the memory of 64-bit\nimport platform\nprint platform.architecture(), sys.maxsize          # ('32bit', 'WindowsPE') 2147483647\n\nfile_name = 'LargeTextTest40.txt'                   # 41,573,429 bytes\n\n# I ran this only for a size comparison - don't run it on your machine\n# words = get_tokenized_text(file_name)\n# print len(words), total_size(words)               # 962,632  268,314,991\n\nword_dict = build_dict(file_name)\nprint len(word_dict), total_size(word_dict)         # 185,980  13,885,970\n\nword_tokens = read_with_dict(file_name)\nprint len(word_tokens), total_size(word_tokens)     # 962,632  42,370,804\n\n# Reverse the dictionary by swapping key and value so the integer token can be used to lookup corresponding word\nword_dict.update( dict((word_dict[k], k) for k in word_dict) )\n</code></pre>\n"}], "owner": {"reputation": 1165, "user_id": 3533419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a738a5f192993aa41d8d384b672d3db?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/3533419/null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1466061157, "creation_date": 1466026988, "question_id": 37846284, "link": "https://stackoverflow.com/questions/37846284/why-does-text-representation-as-a-list-consume-so-much-memory", "title": "Why does text representation as a list consume so much memory?", "body": "<p>I have a 335 MB large text file. The entire text is tokenized. Each token is separated by a whitespace. I want to represent each sentence as a list of words while the entire text is a list of sentences. This means that I'll get a list of lists.</p>\n\n<p>I use this simple peace of code to load the text into my main memory:</p>\n\n<pre><code>def get_tokenized_text(file_name):\n    tokens = list()\n    with open(file_name,'rt') as f:\n        sentences = f.readlines()\n\n    return [sent.strip().split(' ') for sent in sentences]\n</code></pre>\n\n<p>Unfortunately, this method consumes so much memory that my laptop always crashes. I have 4 GB RAM, but it is congested after about five seconds.</p>\n\n<p>Why? The text should occupy about 335 MB. Even if I'd been generous and I'd approved let's say four times as much memory just for administration stuff, there is no reason for memory congestion. Is there any memory leak that I oversee right now? </p>\n"}, {"tags": ["python", "unicode", "utf-8", "encode", "mojibake"], "comments": [{"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 2, "creation_date": 1466026998, "post_id": 37846237, "comment_id": 63152823, "body": "What are you trying to do?"}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1466027186, "post_id": 37846237, "comment_id": 63152885, "body": "Do those lists contain UTF-8 bytes?  If so, how/why are they stored in <code>unicode</code> objects?"}, {"owner": {"reputation": 1559, "user_id": 6065920, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b25c1982647085298b38eedf797c0d1?s=128&d=identicon&r=PG&f=1", "display_name": "ldevyataykina", "link": "https://stackoverflow.com/users/6065920/ldevyataykina"}, "reply_to_user": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1466027215, "post_id": 37846237, "comment_id": 63152896, "body": "@SLaks, I write it in my question. Usually I use <code>encode(&#39;utf-8&#39;)</code>, and I try <code>val[0].decode(&#39;latin1&#39;).decode(&#39;cp1251&#39;)</code>, but it doesn&#39;t help in my problem"}, {"owner": {"reputation": 1559, "user_id": 6065920, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b25c1982647085298b38eedf797c0d1?s=128&d=identicon&r=PG&f=1", "display_name": "ldevyataykina", "link": "https://stackoverflow.com/users/6065920/ldevyataykina"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1466027418, "post_id": 37846237, "comment_id": 63152980, "body": "@jwodder, I took url like <code>https:&#47;&#47;yandex.ru&#47;touchsearch?clid=1906591&amp;text=%D0%BC%D0%B0&zwnj;&#8203;%D1%82%D1%87%20%D0%B&zwnj;&#8203;8%D1%82%D0%B0%D0%BB%&zwnj;&#8203;D0%B8%D1%8F%20-%20%D&zwnj;&#8203;0%B8%D1%81%D0%BF%D0%&zwnj;&#8203;B0%D0%BD%D0%B8%D1%8F&zwnj;&#8203;%20%D0%B5%D0%B2%D1%8&zwnj;&#8203;0%D0%BE%202012&amp;lr=21&zwnj;&#8203;3&amp;redircnt=146584982&zwnj;&#8203;6.1</code> and next <code>get2 = urlparse(url)             dict2 = parse_qs(get2[4])             val = dict2[&#39;text&#39;]</code>, I get search request from url and I want to decode that"}, {"owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "edited": false, "score": 0, "creation_date": 1466118227, "post_id": 37846237, "comment_id": 63198139, "body": "<code>dict2[&#39;text&#39;]</code> gives you the byte string <code>&#39;\\xd0\\xbc\\xd0\\xb0\\xd1\\x82\\xd1\\x87...&#39;</code>, not a Unicode string as above. To turn that into <code>u&#39;\\xd0\\xbc\\xd0\\xb0\\xd1\\x82\\xd1\\x87...&#39;</code> you must have decoded using a Latin-1 encoding (ISO-8859-1 or Windows code page 1252), instead of UTF-8."}], "answers": [{"comments": [{"owner": {"reputation": 1559, "user_id": 6065920, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b25c1982647085298b38eedf797c0d1?s=128&d=identicon&r=PG&f=1", "display_name": "ldevyataykina", "link": "https://stackoverflow.com/users/6065920/ldevyataykina"}, "edited": false, "score": 0, "creation_date": 1466027752, "post_id": 37846334, "comment_id": 63153111, "body": "Thank you for detailed explanation!"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 3, "last_activity_date": 1466027192, "creation_date": 1466027192, "answer_id": 37846334, "question_id": 37846237, "link": "https://stackoverflow.com/questions/37846237/how-encode-strings-using-python/37846334#37846334", "title": "How encode strings using python", "body": "<p>You have a <a href=\"https://en.wikipedia.org/wiki/Mojibake\" rel=\"nofollow\">Mojibake</a>; text decoded using the wrong codec.</p>\n\n<p>You have what looks like it was decoded or Latin-1 or Windows codepage 1252, while it should have been decoded as UTF-8 instead.</p>\n\n<p>Either reverse the encoding manually, or use the excellent <a href=\"https://ftfy.readthedocs.io/en/latest/\" rel=\"nofollow\"><code>ftfy</code> package</a> to do it for you:</p>\n\n<pre><code>&gt;&gt;&gt; import ftfy\n&gt;&gt;&gt; data = [u'\\xd0\\xbc\\xd1\\x82\\xd1\\x81 \\xd0\\xbe\\xd1\\x84\\xd0\\xb8\\xd1\\x86\\xd0\\xb8\\xd0\\xb0\\xd0\\xbb\\xd1\\x8c\\xd0\\xbd\\xd1\\x8b\\xd0\\xb9 \\xd1\\x81\\xd0\\xb0\\xd0\\xb9\\xd1\\x82']\n&gt;&gt;&gt; ftfy.ftfy(data[0])\nu'\\u043c\\u0442\\u0441 \\u043e\\u0444\\u0438\\u0446\\u0438\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u0441\\u0430\\u0439\\u0442'\n&gt;&gt;&gt; print ftfy.ftfy(data[0])\n\u043c\u0442\u0441 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442\n</code></pre>\n\n<p>Manually, you'd re-encode as Latin-1:</p>\n\n<pre><code>&gt;&gt;&gt; data[0].encode('latin1')\n'\\xd0\\xbc\\xd1\\x82\\xd1\\x81 \\xd0\\xbe\\xd1\\x84\\xd0\\xb8\\xd1\\x86\\xd0\\xb8\\xd0\\xb0\\xd0\\xbb\\xd1\\x8c\\xd0\\xbd\\xd1\\x8b\\xd0\\xb9 \\xd1\\x81\\xd0\\xb0\\xd0\\xb9\\xd1\\x82'\n&gt;&gt;&gt; data[0].encode('latin1').decode('utf8')\nu'\\u043c\\u0442\\u0441 \\u043e\\u0444\\u0438\\u0446\\u0438\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u0441\\u0430\\u0439\\u0442'\n&gt;&gt;&gt; print data[0].encode('latin1').decode('utf8')\n\u043c\u0442\u0441 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442\n</code></pre>\n\n<p>Note that you have a list with one <code>unicode</code> object in it. You may want to study up on Python and Unicode; I recommend the following documents:</p>\n\n<ul>\n<li><p><a href=\"http://nedbatchelder.com/text/unipain.html\" rel=\"nofollow\">Pragmatic Unicode</a> by Ned Batchelder</p></li>\n<li><p><a href=\"http://joelonsoftware.com/articles/Unicode.html\" rel=\"nofollow\">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a> by Joel Spolsky</p></li>\n<li><p>The <a href=\"http://docs.python.org/2/howto/unicode.html\" rel=\"nofollow\">Python Unicode HOWTO</a></p></li>\n</ul>\n\n<p>These will help you understand when to encode and when to decode, and what codec to use.</p>\n"}], "owner": {"reputation": 1559, "user_id": 6065920, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b25c1982647085298b38eedf797c0d1?s=128&d=identicon&r=PG&f=1", "display_name": "ldevyataykina", "link": "https://stackoverflow.com/users/6065920/ldevyataykina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 37846334, "answer_count": 1, "score": 1, "last_activity_date": 1536145808, "creation_date": 1466026773, "last_edit_date": 1536145808, "question_id": 37846237, "link": "https://stackoverflow.com/questions/37846237/how-encode-strings-using-python", "title": "How encode strings using python", "body": "<p>I have lists with element</p>\n\n<pre><code>[u'\\xd0\\xbc\\xd1\\x82\\xd1\\x81 \\xd0\\xbe\\xd1\\x84\\xd0\\xb8\\xd1\\x86\\xd0\\xb8\\xd0\\xb0\\xd0\\xbb\\xd1\\x8c\\xd0\\xbd\\xd1\\x8b\\xd0\\xb9 \\xd1\\x81\\xd0\\xb0\\xd0\\xb9\\xd1\\x82']\n[u'\\xd0\\xbc\\xd1\\x82\\xd1\\x81 \\xd0\\xbe\\xd1\\x84\\xd0\\xb8\\xd1\\x86\\xd0\\xb8\\xd0\\xb0\\xd0\\xbb\\xd1\\x8c\\xd0\\xbd\\xd1\\x8b\\xd0\\xb9 \\xd1\\x81\\xd0\\xb0\\xd0\\xb9\\xd1\\x82']\n</code></pre>\n\n<p>I try to convert it using</p>\n\n<pre><code>val[0].encode('utf-8')\n</code></pre>\n\n<p>And got after it</p>\n\n<pre><code>\u00d0\u00bc\u00d1\u00d1 \u00d0\u00be\u00d1\u00d0\u00b8\u00d1\u00d0\u00b8\u00d0\u00b0\u00d0\u00bb\u00d1\u00d0\u00bd\u00d1\u00d0\u00b9 \u00d1\u00d0\u00b0\u00d0\u00b9\u00d1\n\u00d0\u00bc\u00d1\u00d1 \u00d0\u00be\u00d1\u00d0\u00b8\u00d1\u00d0\u00b8\u00d0\u00b0\u00d0\u00bb\u00d1\u00d0\u00bd\u00d1\u00d0\u00b9 \u00d1\u00d0\u00b0\u00d0\u00b9\u00d1\n</code></pre>\n\n<p>What I do wrong?</p>\n"}, {"tags": ["python", "lambda", "intersection"], "comments": [{"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1466026814, "post_id": 37846222, "comment_id": 63152744, "body": "What have you tried? Can you show us a minimum working set of code that demonstrates your question and what you are trying to accomplish?"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 3, "creation_date": 1466026888, "post_id": 37846222, "comment_id": 63152776, "body": "Could you provide an example of what you are trying to do? This sounds a bit counter intuitive of using sets since part of an object being unique in a set is that is has a unique <code>__hash__</code>."}, {"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "edited": false, "score": 0, "creation_date": 1466029148, "post_id": 37846222, "comment_id": 63153579, "body": "Even mathematically this doesn&#39;t make sense. A set is defined as having no duplicates. Essentially all elements in a set is not equal to each other, therefore to be in a set, an equality comparison between all elements must already exist.  If you could explain what you&#39;re trying to accomplish more, it might make your motive in these intersections clearer!"}], "answers": [{"tags": [], "owner": {"reputation": 914, "user_id": 460282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b4265ed7ecd0b9cd67653fb5264a24?s=128&d=identicon&r=PG", "display_name": "Jomel Imperio", "link": "https://stackoverflow.com/users/460282/jomel-imperio"}, "is_accepted": false, "score": 1, "last_activity_date": 1466034096, "creation_date": 1466034096, "answer_id": 37847563, "question_id": 37846222, "link": "https://stackoverflow.com/questions/37846222/python-intersection-with-custom-equality/37847563#37847563", "title": "Python intersection with custom equality", "body": "<p>One approach would be to write your own subclass of <code>Set</code> and implement custom comparisons that way. Then, you'd just have to create a new instance of the custom \"keyed set\" per \"equality\" that you want to get an intersection of your elements using.</p>\n\n<p>For instance: <a href=\"http://code.activestate.com/recipes/576932-sets-with-a-custom-equalityuniqueness-function/\" rel=\"nofollow\">http://code.activestate.com/recipes/576932-sets-with-a-custom-equalityuniqueness-function/</a></p>\n"}, {"comments": [{"owner": {"reputation": 152, "user_id": 6421539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3670de2c372e2bfdcde4f38fba253b01?s=128&d=identicon&r=PG&f=1", "display_name": "PraMiD", "link": "https://stackoverflow.com/users/6421539/pramid"}, "edited": false, "score": 0, "creation_date": 1466457236, "post_id": 37855480, "comment_id": 63314477, "body": "Thanks for this detailed and very useful answer!!"}], "tags": [], "owner": {"reputation": 2251, "user_id": 4806820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9aa62bad386d0c2ce92c7d0dca2a69f6?s=128&d=identicon&r=PG&f=1", "display_name": "code_onkel", "link": "https://stackoverflow.com/users/4806820/code-onkel"}, "is_accepted": true, "score": 6, "last_activity_date": 1466070728, "last_edit_date": 1466070728, "creation_date": 1466070101, "answer_id": 37855480, "question_id": 37846222, "link": "https://stackoverflow.com/questions/37846222/python-intersection-with-custom-equality/37855480#37855480", "title": "Python intersection with custom equality", "body": "<p><strong>Preface</strong></p>\n\n<p>What you are trying to do makes perfect mathematical sense by using the right terms. The \"equalities\" you are referring to are actually <a href=\"https://en.wikipedia.org/wiki/Equivalence_relation\" rel=\"noreferrer\">equivalence relations</a>. Basically an equicalenve relation describes a condition that must be met in order to identify two elements of a set as \"equivalent\".</p>\n\n<p>An equivalence relation disjointly decomposes a set into so called equivalence classes. Each equivalence class is a subset that contains all elements of the original set which are pairwise equivalent with respect to the equivalence relation.</p>\n\n<p>Equality itself is a special case of an equivalence relation. Each equivalance class of the equality relation contains only one element since each element of a set only equals itself.</p>\n\n<p><em>Excursion:</em> This is a source of confusion when speaking of <em>object equality</em> in object oriented languages. In Mathematics, an object (i.e. the member of a set) exists only once (it only equals itself). In object oriented programming however, there is the distinction of identity and equality. There can be objects of different identity (Python: <code>a is b</code> evaluates to false) that are equal (<code>a == b</code> evaluates to true), for example the <code>float</code> <code>2.0</code> and the <code>int</code> <code>2</code>. That means, that Python's <code>__eq__</code> functions implements a default equivalence relation on the set of all Python objects which is called \"equality\". <em>End of Excursion</em></p>\n\n<p>One more important thing about any equivalence class is, that it can be represented by a single arbitrary member (called a \"representative\"). This implies that you only need to check the relation against one known representative of an equivalence class to decide if an element belongs to that equivalence class. This will be exploited in the code below.</p>\n\n<p><strong>Answer to the Question</strong></p>\n\n<p>Corresponding to your question we have the following setup. We have two sets <code>A</code> and <code>B</code> which are actually subsets of a larger set <code>M</code>. For <code>M</code> there are many different equivalence relations and for each of those, we need to \"intersect\" <code>A</code> and <code>B</code> \"with respect to the equivalence relation\" somehow.</p>\n\n<p>The only way this makes sense, is to replace the members of <code>A</code> and <code>B</code> by their equivalence classes and to check which equivanlence classes do occur in both projections.</p>\n\n<p>This is easier than it sounds: Recipe for intersection with respect to one equivalence relation:</p>\n\n<ol>\n<li>Group the elements of <code>A</code> (and <code>B</code> respectively) such that each group consists of pairwise equivalent elements. (These groups resemble the equivalence classes)</li>\n<li>For each group <code>G</code> of <code>A</code>, check if there is a group <code>H</code> of <code>B</code> such that elements of <code>G</code> and <code>H</code> are equivalent. If yes, <code>G</code> and <code>H</code> belong to the same equivalence class, i.e. that equivalence class is a member of the intersection.</li>\n</ol>\n\n<p>Note that the wanted output actually depends on your use case. You could e.g. use the list of all unions of matching <code>G</code>s and <code>H</code>s (this is what is impemented below). Alternatively, you could choose the first member of <code>G</code> (or <code>H</code>) if you are only interested in an arbitrary element of each equivalence class in the intersection. (This is demonstrated in the <code>__main__</code> section as <code>[c[0] for c in intersection]</code>.)</p>\n\n<p>The code sample below implements a naive intersection as described above using lists (not sets or representatives) which works with any object and any equivalence relation. The <code>Intersector</code> class takes a function with two arguments that returns true if the two arguments are equivalent.</p>\n\n<p>I assume that you can make easy optimisations for your use case to save loops and comparisons.</p>\n\n<p><em>Important note:</em> Of course you need to verify that your \"equalities\" are acutal equivalence relations (Reflexivity, Symmetry, Transitivity, see wiki link above).</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>from __future__ import print_function\n\nclass Intersector(object):\n    def __init__(self, relation):\n        self.relation = relation\n\n    def intersect(self, a, b):\n        a_classes = self.get_equivalence_classes(a)\n        print('Groups of A:', a_classes)\n        b_classes = self.get_equivalence_classes(b)\n        print('Groups of B:', b_classes)\n        return self.intersect_classes(a_classes, b_classes)\n\n    def get_equivalence_classes(self, elements):\n        eq_classes = []\n        for element in elements:\n            match = False\n            for eq_class in eq_classes:\n                if self.relation(element, eq_class[0]):\n                    eq_class.append(element)\n                    match = True\n                    break\n\n            if not match:\n                eq_classes.append([element])\n        return eq_classes\n\n    def intersect_classes(self, a, b):\n        def search_in_B(g):\n            for h in b:\n                if self.relation(g[0], h[0]):\n                    return h\n        result = []\n        for g in a:\n            h = search_in_B(g)\n            if h is not None:\n                result.append(g+h)\n        print('Intersection:', result)\n        return result\n\n\nif __name__ == '__main__':\n    A = set([4, 2, 1, 7, 0])\n    B = set([1, 13, 23, 12, 62, 101, 991, 1011, 1337, 66, 666])\n\n    print('A:', A)\n    print('B:', B)\n    print(79*'-')\n\n    print('Intersection with respect to the relation:')\n    print('a and b have the same remainder divided by 5')\n    intersection = Intersector(lambda x, y : x % 5 == y % 5).intersect(A, B)\n    reduced = [c[0] for c in intersection]\n    print('Intersection reduced to representatives:', reduced)\n\n    print(79*'-')\n\n    print('Intersection with respect to the relation:')\n    print('a and b have the same remainder divided by 7')\n    intersection = Intersector(lambda x, y : x % 7 == y % 7).intersect(A, B)\n    reduced = [c[0] for c in intersection]\n    print('Intersection reduced to representatives:', reduced)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>A: set([0, 1, 2, 4, 7])\nB: set([1, 66, 101, 12, 13, 1011, 23, 1337, 666, 62, 991])\n-------------------------------------------------------------------------------\nIntersection with respect to the relation:\na and b have the same remainder divided by 5\nGroups of A: [[0], [1], [2, 7], [4]]\nGroups of B: [[1, 66, 101, 1011, 666, 991], [12, 1337, 62], [13, 23]]\nIntersection: [[1, 1, 66, 101, 1011, 666, 991], [2, 7, 12, 1337, 62]]\nIntersection reduced to representatives: [1, 2]\n-------------------------------------------------------------------------------\nIntersection with respect to the relation:\na and b have the same remainder divided by 7\nGroups of A: [[0, 7], [1], [2], [4]]\nGroups of B: [[1, 666], [66, 101, 1011], [12], [13, 62], [23], [1337], [991]]\nIntersection: [[0, 7, 1337], [1, 1, 666], [2, 23], [4, 991]]\nIntersection reduced to representatives: [0, 1, 2, 4]\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 6421539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3670de2c372e2bfdcde4f38fba253b01?s=128&d=identicon&r=PG&f=1", "display_name": "PraMiD", "link": "https://stackoverflow.com/users/6421539/pramid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 4, "accepted_answer_id": 37855480, "answer_count": 2, "score": 5, "last_activity_date": 1466070728, "creation_date": 1466026689, "question_id": 37846222, "link": "https://stackoverflow.com/questions/37846222/python-intersection-with-custom-equality", "title": "Python intersection with custom equality", "body": "<p>I want to build the intersection of two python sets, but i need to have a custom equality to do this.\nIs there a way to specify \"equaliy\" directly when doing the intersection? For example due to a lambda-expressions?</p>\n\n<p>I know there is way by overriding <strong>eq</strong>, but i have to do several intersections on the same classes with different \"equalities\".</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "multithreading", "nginx", "flask", "uwsgi"], "answers": [{"tags": [], "owner": {"reputation": 217, "user_id": 6701599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ihw-taH00ZU/AAAAAAAAAAI/AAAAAAAAAoA/LVhK_HfOlx4/photo.jpg?sz=128", "display_name": "Fernando Coelho", "link": "https://stackoverflow.com/users/6701599/fernando-coelho"}, "is_accepted": false, "score": 8, "last_activity_date": 1471466035, "last_edit_date": 1471466035, "creation_date": 1470948801, "answer_id": 38905953, "question_id": 37846202, "link": "https://stackoverflow.com/questions/37846202/nginx-python-uwsgi-kill-issue/38905953#38905953", "title": "NGINX - Python - UWSGI kill issue", "body": "<p>I know the question is a bit old, but I had the same problem and Google got me here, so I will answer for anyone who gets here in the same boat.</p>\n\n<p>The problem seems to be caused by the \"--enable-threads\" option, we have several applications running with uwsgi and flask and only the one with this option has the problem.</p>\n\n<p>If what you want is to have the uwsgi process dying faster, you can add this options:</p>\n\n<p>reload-mercy = <em>int</em></p>\n\n<p>worker-reload-mercy = <em>int</em></p>\n\n<p>They will cause the uwsgi to force the process to quit after <em>int</em> seconds.</p>\n\n<p>On the other hand, if all you need is to reload the uwsgi, try just sending a SIGHUP signal. This will cause the uwsgi to reload its children.</p>\n\n<p><strong>POST NOTE:</strong> Seems I had spoken too soon, using SIGHUP also hangs sometimes. I am using the mercy options to avoid the hanging to take too long.</p>\n\n<p>Also, I found the issue report on uwsgi github, if anyone wants to follow it:</p>\n\n<p><a href=\"https://github.com/unbit/uwsgi/issues/844\" rel=\"noreferrer\">https://github.com/unbit/uwsgi/issues/844</a></p>\n"}], "owner": {"reputation": 1088, "user_id": 2298002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7YtRg.jpg?s=128&g=1", "display_name": "greenhouse", "link": "https://stackoverflow.com/users/2298002/greenhouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3483, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1471466035, "creation_date": 1466026600, "last_edit_date": 1466028953, "question_id": 37846202, "link": "https://stackoverflow.com/questions/37846202/nginx-python-uwsgi-kill-issue", "title": "NGINX - Python - UWSGI kill issue", "body": "<p>Hello fellow engineers attempting to change the world!\n... and anyone who is willing to help : )</p>\n\n<p>After adding a runloop code in python, uwsgi seems to be taking longer to kill</p>\n\n<hr>\n\n<h2>setup</h2>\n\n<ul>\n<li>python flask</li>\n<li>running on nginx with uwsgi </li>\n<li>using a psql database</li>\n</ul>\n\n<hr>\n\n<h2>issue</h2>\n\n<p>stopping uwsgi used to be very quick.\nrecently i integrated a background thread to periodically check the database and make changes if needed, every 60 seconds. </p>\n\n<p>this seems to be working just fine, except now every time i try to kill uwsgi, it takes a long time.</p>\n\n<ul>\n<li>'seems' like the longer i leave the server running, the longer it takes to die,  </li>\n<li>or maybe it always just gets killed after the current 60 second loop ends? (i'm not sure my visual inspection supports this)</li>\n<li>sounds like a leak?</li>\n</ul>\n\n<hr>\n\n<h2>here is the code i recently added</h2>\n\n<pre><code>################################\n## deploy.ini module .py file ##\n################################\nfrom controllers import runloop\nfrom flask import Flask\nfrom flask import request, redirect,Response\napp = Flask(__name__)\n\nrunloop.startrunloop()\n\nif __name__ == '__main__':\n    app.run() #app.run(debug=True)\n\n################################\n## runloop.py ##\n################################\n\n### initialize run loop ###\n## code ref: http://stackoverflow.com/a/22900255/2298002\n# \"Your additional threads must be initiated from the same app that is called by the WSGI server.\n# 'The example below creates a background thread that executes every 5 seconds and manipulates data\n#    structures that are also available to Flask routed functions.\"\n#####################################################################\n\nPOOL_TIME = 60 #Seconds\n\n# variables that are accessible from anywhere\ncommonDataStruct = {}\n# lock to control access to variable\ndataLock = threading.Lock()\n# thread handler\nyourThread = threading.Thread()\n\ndef startrunloop():\n    logfuncname = 'runloop.startrunloop'\n    logging.info(' &gt;&gt; %s &gt;&gt; ENTER ' % logfuncname)\n\n    def interrupt():\n        logging.info(' %s &gt;&gt;&gt;&gt; interrupt() ' % logfuncname)\n\n        global yourThread\n        yourThread.cancel()\n\n    def loopfunc():\n        logging.info(' %s &gt;&gt;&gt; loopfunc() ' % logfuncname)\n\n        global commonDataStruct\n        global yourThread\n\n        with dataLock:\n            # Do your stuff with commonDataStruct Here\n\n            # function that performs at most 15 db queries (right now)\n            # this function will perform many times more db queries in production \n            auto_close_dws()\n\n        # Set the next thread to happen\n        yourThread = threading.Timer(POOL_TIME, loopfunc, ())\n        yourThread.start()\n\n    def initfunc():\n        # Do initialisation stuff here\n        logging.info(' %s &gt;&gt; initfunc() ' % logfuncname)\n\n        global yourThread\n        # Create your thread\n        yourThread = threading.Timer(POOL_TIME, loopfunc, ())\n        yourThread.start()\n\n    # Initiate\n    initfunc()\n    # When you kill Flask (SIGTERM), clear the trigger for the next thread\n    atexit.register(interrupt)\n</code></pre>\n\n<hr>\n\n<h2>additional info (all flask requests work just fine):</h2>\n\n<p>i start server with:</p>\n\n<pre><code>$ nginx\n</code></pre>\n\n<p>and stop with:</p>\n\n<pre><code>$ nginx -s stop\n</code></pre>\n\n<p>i start uwsgi with:</p>\n\n<pre><code>$ uwsgi \u2014enable-threads \u2014ini deploy.ini\n</code></pre>\n\n<p>i stop uwsgi to make python changes with: </p>\n\n<pre><code>ctrl + c (if in the foreground)\n</code></pre>\n\n<p>otherwise i stop uwsgi with:</p>\n\n<pre><code>$ killall -s INT uwsgi\n</code></pre>\n\n<p>then after making changes to the python code, i start uwsgi again with:</p>\n\n<pre><code>$ uwsgi \u2014enable-threads \u2014ini deploy.ini\n</code></pre>\n\n<p>the following is an example nginx output when i try to kill:</p>\n\n<pre><code>^CSIGINT/SIGQUIT received...killing workers...\nFri May  6 00:50:39 2016 - worker 1 (pid: 49552) is taking too much time to die...NO MERCY !!!\nFri May  6 00:50:39 2016 - worker 2 (pid: 49553) is taking too much time to die...NO MERCY !!!\n</code></pre>\n\n<hr>\n\n<p>any help or hints is greatly appreciated. please let me know if i need to be more clear with anything or if i\u2019m missing any details.</p>\n\n<p>thanks!\neric</p>\n"}, {"tags": ["python", "c++", "qt", "pyqt", "qgraphicsitem"], "comments": [{"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 2251, "user_id": 3477005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/x9tik.jpg?s=128&g=1", "display_name": "Daniele Pantaleone", "link": "https://stackoverflow.com/users/3477005/daniele-pantaleone"}, "edited": false, "score": 0, "creation_date": 1466087986, "post_id": 37846195, "comment_id": 63181851, "body": "@DanielePantaleone I somewhat agree. The way I solved it is a bit different though. I am posting my answer in case it could be useful."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1466108661, "post_id": 37846195, "comment_id": 63194227, "body": "Exactly. Posting a good solution to a dupe has it&#39;s own perks. But if you post it to the original question (if you are sure that it is a new merit-able answer) then you might get more views to that (older questions with more views index more on Google Search). Take note the next time."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1466108783, "post_id": 37846195, "comment_id": 63194305, "body": "@BhargavRao Great! Thanks for the advice - will post in orginal."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1466108934, "post_id": 37846195, "comment_id": 63194382, "body": "Don&#39;t do so now. Keep that in mind the next time."}], "answers": [{"tags": [], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "is_accepted": false, "score": 1, "last_activity_date": 1466093515, "last_edit_date": 1495535358, "creation_date": 1466089602, "answer_id": 37862953, "question_id": 37846195, "link": "https://stackoverflow.com/questions/37846195/resizing-qgraphicsitem-based-on-position-of-child-resizer-item/37862953#37862953", "title": "Resizing QGraphicsItem based on position of child &#39;resizer&#39; item", "body": "<p>I ended converting the <code>Resizer</code> class to a subclass of <code>QGraphicsObject</code>. It turns out it was possible to reimplement the paint method (even though my auto-completion did not find it previously). </p>\n\n<p><code>Resizer.itemChange</code> now emits a signal which is assigned to the <code>resize</code> method in the parent <code>Box</code> class which uses the position change information from the resizer to adjust the rect of the box.</p>\n\n<p>This way, the resizer can be resused for other items as well, without having to re-implement mouse press/move/release events as in the answer provided <a href=\"https://stackoverflow.com/questions/34429632/resize-a-qgraphicsitem-with-the-mouse/34442054#34442054\">here</a>.</p>\n\n<pre><code>import sys\nfrom PyQt4.QtGui import *\nfrom PyQt4.QtCore import *\n\nclass Box(QGraphicsRectItem):\n\n    def __init__(self, position, rect=QRectF(0, 0, 100, 50), parent=None, scene=None):\n        super().__init__(rect, parent, scene)\n\n        self.setFlag(QGraphicsItem.ItemIsSelectable, True)\n        self.setFlag(QGraphicsItem.ItemIsMovable, True)\n        self.setFlag(QGraphicsItem.ItemIsFocusable, True)\n        self.setFlag(QGraphicsItem.ItemSendsGeometryChanges, True)\n\n        self.setPos(position)\n\n        self.resizer = Resizer(parent=self)\n        resizerWidth = self.resizer.rect.width() / 2\n        resizerOffset = QPointF(resizerWidth, resizerWidth)\n        self.resizer.setPos(self.rect().bottomRight() - resizerOffset)\n        self.resizer.resizeSignal.connect(self.resize)\n\n    def paint(self, painter, option, widget=None):\n        pen = QPen()\n        pen.setColor(Qt.black)\n        painter.setPen(pen)\n        painter.setBrush(Qt.transparent)\n        painter.drawRect(self.rect())\n\n    @pyqtSlot()\n    def resize(self, change):\n        self.setRect(self.rect().adjusted(0, 0, change.x(), change.y()))\n        self.prepareGeometryChange()\n        self.update()\n\n\nclass Resizer(QGraphicsObject):\n\n    resizeSignal = pyqtSignal(QPointF)\n\n    def __init__(self, rect=QRectF(0, 0, 10, 10), parent=None):\n        super().__init__(parent)\n\n        self.setFlag(QGraphicsItem.ItemIsMovable, True)\n        self.setFlag(QGraphicsItem.ItemIsSelectable, True)\n        self.setFlag(QGraphicsItem.ItemSendsGeometryChanges, True)\n        self.rect = rect\n\n    def boundingRect(self):\n        return self.rect\n\n    def paint(self, painter, option, widget=None):\n        if self.isSelected():\n            pen = QPen()\n            pen.setStyle(Qt.DotLine)\n            painter.setPen(pen)\n        painter.drawEllipse(self.rect)\n\n    def itemChange(self, change, value):\n        if change == QGraphicsItem.ItemPositionChange:\n            if self.isSelected():\n                self.resizeSignal.emit(value - self.pos())\n        return value\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n\n    view = QGraphicsView()\n    scene = QGraphicsScene()\n    scene.setSceneRect(0, 0, 500, 1000)\n    view.setScene(scene)\n\n    box = Box(QPointF(50, 50), scene=scene)\n\n    view.show()\n\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "closed_date": 1466108508, "answer_count": 1, "score": 1, "last_activity_date": 1466093515, "creation_date": 1466026556, "last_edit_date": 1592644375, "question_id": 37846195, "link": "https://stackoverflow.com/questions/37846195/resizing-qgraphicsitem-based-on-position-of-child-resizer-item", "closed_reason": "Duplicate", "title": "Resizing QGraphicsItem based on position of child &#39;resizer&#39; item", "body": "<p>I'm trying to create a minimal QGraphicsItem that acts as a resizer to its parent. I think I'm nearly there but am drawing a blank and how to convey its position to the parent item when it is being moved. What I am going for looks something like this (without the text):</p>\n<p><a href=\"https://i.stack.imgur.com/9xieK.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9xieK.gif\" alt=\"enter image description here\" /></a></p>\n<p>And here is a self contained example of what I have so far:</p>\n<pre><code>import sys\nfrom PyQt4.QtGui import *\nfrom PyQt4.QtCore import *\n\n\nclass Resizer(QGraphicsEllipseItem):\n\n    def __init__(self, rect=QRectF(0, 0, 10, 10), parent=None, scene=None):\n        super().__init__(rect, parent, scene)\n\n        self.setFlag(QGraphicsItem.ItemIsMovable, True)\n\n    def mousePressEvent(self, mouseEvent):\n        self.resize = True\n        self.initialPos = self.scenePos()\n        self.setSelected(True)\n\n    def mouseMoveEvent(self, mouseEvent):\n        if self.resize:\n            self.currentPos = self.scenePos()\n            self.change = self.initialPos - self.currentPos\n        super().mouseMoveEvent(mouseEvent)\n\n    def mouseReleaseEvent(self, mouseEvent):\n        self.resize = False\n        self.setSelected(False)\n\n\nif __name__ == &quot;__main__&quot;:\n\n    app = QApplication(sys.argv)\n\n    view = QGraphicsView()\n    scene = QGraphicsScene()\n    scene.setSceneRect(0, 0, 500, 500)\n    view.setScene(scene)\n\n    rect = QRectF(100, 100, 150, 50)\n    box = QGraphicsRectItem(rect)\n\n    scene.addItem(box)\n\n    resizer = Resizer(parent=box)\n    resizerWidth = resizer.rect().width() / 2\n    resizerOffset = QPointF(resizerWidth, resizerWidth)\n    resizer.setPos(box.rect().bottomRight() - resizerOffset)\n\n    view.show()\n\n    sys.exit(app.exec_())\n</code></pre>\n<p>So how can I convey <code>self.change</code> in the <code>mouseMoveEvent</code> to the parent in a way that the parent is resized as the <code>Resizer</code> is being moved? Any other suggestions are welcome.</p>\n<p>I've tried converting the <code>Resizer</code> to a subclass of <code>QGraphicsObject</code> so that it could emit a signal on <code>mouseMoveEvent</code>, but <code>QGraphicsObject</code> does not have a paint method and I am unsure on how to display the <code>Resizer</code> on the scene.</p>\n<p>Any advice on this is welcome.</p>\n"}, {"tags": ["python", "facebook", "api"], "comments": [{"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "edited": false, "score": 0, "creation_date": 1466026419, "post_id": 37846114, "comment_id": 63152562, "body": "It&#39;s probably same as <a href=\"http://stackoverflow.com/questions/4777518/gae-and-facebook-connect-how-to-get-age-and-gender-of-user\" title=\"gae and facebook connect how to get age and gender of user\">stackoverflow.com/questions/4777518/&hellip;</a>"}, {"owner": {"reputation": 127, "user_id": 4281863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9475433ddc4dd870ea4f24239563d?s=128&d=identicon&r=PG&f=1", "display_name": "dimos", "link": "https://stackoverflow.com/users/4281863/dimos"}, "reply_to_user": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "edited": false, "score": 0, "creation_date": 1466026569, "post_id": 37846114, "comment_id": 63152631, "body": "I also found this item, but it does not use code of facebook-sdk for python and the link is broken"}, {"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "edited": false, "score": 0, "creation_date": 1466027543, "post_id": 37846114, "comment_id": 63153033, "body": "The token has to be a valid token and scope in the url like here <a href=\"https://github.com/adidonato/facebook-network-graph/blob/master/fb-graph-generator.py\" rel=\"nofollow noreferrer\">github.com/adidonato/facebook-network-graph/blob/master/&hellip;</a>"}, {"owner": {"reputation": 4782, "user_id": 101130, "user_type": "registered", "profile_image": "https://graph.facebook.com/690267162/picture?type=large", "display_name": "WizKid", "link": "https://stackoverflow.com/users/101130/wizkid"}, "edited": false, "score": 0, "creation_date": 1466065155, "post_id": 37846114, "comment_id": 63165654, "body": "You need to ask for the field gender"}, {"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1466068628, "post_id": 37846114, "comment_id": 63167998, "body": "Well then go look up how you specify the fields with whatever python script/sdk you are using in the documentation for it."}, {"owner": {"reputation": 127, "user_id": 4281863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9475433ddc4dd870ea4f24239563d?s=128&d=identicon&r=PG&f=1", "display_name": "dimos", "link": "https://stackoverflow.com/users/4281863/dimos"}, "edited": false, "score": 0, "creation_date": 1466106785, "post_id": 37846114, "comment_id": 63193269, "body": "I have looked at the documentation, but there is not actually a very good one with examples, even on the official documentations. Unfortunately!!"}, {"owner": {"reputation": 127, "user_id": 4281863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9475433ddc4dd870ea4f24239563d?s=128&d=identicon&r=PG&f=1", "display_name": "dimos", "link": "https://stackoverflow.com/users/4281863/dimos"}, "edited": false, "score": 0, "creation_date": 1466112432, "post_id": 37846114, "comment_id": 63196110, "body": "the answer is on this item: <a href=\"http://stackoverflow.com/questions/16669977/request-fields-in-python-facebook-sdk#\" title=\"request fields in python facebook sdk%23\">stackoverflow.com/questions/16669977/&hellip;</a>"}], "owner": {"reputation": 127, "user_id": 4281863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9475433ddc4dd870ea4f24239563d?s=128&d=identicon&r=PG&f=1", "display_name": "dimos", "link": "https://stackoverflow.com/users/4281863/dimos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466026188, "creation_date": 1466026188, "question_id": 37846114, "link": "https://stackoverflow.com/questions/37846114/get-additional-info-from-facebook-sdk-using-python", "title": "get additional info from facebook-sdk using python", "body": "<p>I am using python to get info data from facebook api.\nI use the following code:</p>\n\n<pre><code>import facebook\nimport requests\ntoken = 'mytoken'\ngraph = facebook.GraphAPI(token)\n\n\nprofile=graph.get_object(\"me\")\n</code></pre>\n\n<p>but only the name and the id are returned. Thus i cannot use the command</p>\n\n<pre><code>profile[\"gender\"]\n</code></pre>\n\n<p>in order to get the user's gender.\nHow can i fix that?</p>\n\n<p>thank you!!</p>\n"}, {"tags": ["python", "security", "token"], "comments": [{"owner": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "edited": false, "score": 0, "creation_date": 1466026828, "post_id": 37846097, "comment_id": 63152752, "body": "Can you give some context? What do you mean with &quot;can&#39;t be found easily&quot;? Should a user of your online service (if you work on one) not be able to see a token? Or should it not be in memory so it can&#39;t be found if someone physically takes your pc?"}], "answers": [{"tags": [], "owner": {"reputation": 4542, "user_id": 6266254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c148a45646163ce44ec52a8107007e7d?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Hacker", "link": "https://stackoverflow.com/users/6266254/bubble-hacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1466026868, "creation_date": 1466026868, "answer_id": 37846257, "question_id": 37846097, "link": "https://stackoverflow.com/questions/37846097/generate-token-for-an-action/37846257#37846257", "title": "Generate token for an action", "body": "<p>What you can do is have a code that generates a random 32 bit string from just letters (Upper case and lower case) and numbers and save it in the DB with a expire time (A few hours will be enough).</p>\n\n<p>This way even if the \"hacker\" starts brute force by the time he is even close, the token will be expired and he will have to start from the beggening. </p>\n\n<p><strong>Note:</strong></p>\n\n<p>If you want to make it even stronger you can also use special characters in your token.</p>\n"}, {"tags": [], "owner": {"reputation": 203, "user_id": 1080867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5gj3m.jpg?s=128&g=1", "display_name": "Nguy\u1ec5n Th&#225;i S\u01a1n", "link": "https://stackoverflow.com/users/1080867/nguy%e1%bb%85n-th%c3%a1i-s%c6%a1n"}, "is_accepted": false, "score": 1, "last_activity_date": 1466027228, "creation_date": 1466027228, "answer_id": 37846347, "question_id": 37846097, "link": "https://stackoverflow.com/questions/37846097/generate-token-for-an-action/37846347#37846347", "title": "Generate token for an action", "body": "<blockquote>\n<pre><code>def generate_key(number=20):  \n    result = binascii.hexlify(os.urandom(number))  \n    return result  \n</code></pre>\n</blockquote>\n\n<p>md5(username + password_hash + a_random_string) + generate_key(). I think it's strong as you expected. Actually I usually use generate_key only. I find it strong enough.</p>\n"}, {"tags": [], "owner": {"reputation": 458, "user_id": 4560196, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/939953392711965/picture?type=large", "display_name": "Thomas Montagnoni", "link": "https://stackoverflow.com/users/4560196/thomas-montagnoni"}, "is_accepted": false, "score": 0, "last_activity_date": 1466112517, "creation_date": 1466112517, "answer_id": 37869630, "question_id": 37846097, "link": "https://stackoverflow.com/questions/37846097/generate-token-for-an-action/37869630#37869630", "title": "Generate token for an action", "body": "<p>Thanks for your responses.\nIn fact i can't have an expire time.\nThis is something someone can buy, we give him a token and with this token he will be able to do an action. So i can't use a expiry time. I think i need something very strong and unique. </p>\n\n<pre><code>inascii.hexlify(os.urandom(number))\n</code></pre>\n\n<p>Can this code hold uniqueness ? </p>\n"}], "owner": {"reputation": 458, "user_id": 4560196, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/939953392711965/picture?type=large", "display_name": "Thomas Montagnoni", "link": "https://stackoverflow.com/users/4560196/thomas-montagnoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 37846257, "answer_count": 3, "score": 0, "last_activity_date": 1466112517, "creation_date": 1466026150, "question_id": 37846097, "link": "https://stackoverflow.com/questions/37846097/generate-token-for-an-action", "title": "Generate token for an action", "body": "<p>I need to generate a token that will allow someone to do a unique action.\nThe difficulty is that nobody must find this token and do the action of someone else. Using python i would like to know if generating a random token is enough or not ? Can someone tell me what is necessary for generating a strong token that can't be found easily </p>\n\n<p>Thank you for your help !</p>\n"}, {"tags": ["python", "bash", "jenkins"], "answers": [{"comments": [{"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1466026655, "post_id": 37846157, "comment_id": 63152679, "body": "If its just 4 packages, I&#39;d personally go with the unrolled version (Four <code>easy_install</code> commands in a sequence) -- Clean and readable."}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "reply_to_user": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1466026715, "post_id": 37846157, "comment_id": 63152701, "body": "@SuperSaiyan True, I would properly do the same. But I have no idea about how <code>easy_install</code> works, and OP explicit says: <code>I don&#39;t want to write 4 lines manually to install each package.</code>"}, {"owner": {"reputation": 107, "user_id": 1746529, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0690e2eafe7cad709c4b6c1a4ca2deda?s=128&d=identicon&r=PG", "display_name": "Alok", "link": "https://stackoverflow.com/users/1746529/alok"}, "edited": false, "score": 0, "creation_date": 1466027515, "post_id": 37846157, "comment_id": 63153021, "body": "Thanks @andlrc for your answer. Is there a way I can instruct my script to &#39;install this particular package last; for others order doesn&#39;t matter&#39;?"}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "reply_to_user": {"reputation": 107, "user_id": 1746529, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0690e2eafe7cad709c4b6c1a4ca2deda?s=128&d=identicon&r=PG", "display_name": "Alok", "link": "https://stackoverflow.com/users/1746529/alok"}, "edited": false, "score": 0, "creation_date": 1466027854, "post_id": 37846157, "comment_id": 63153151, "body": "@Alok Something like this might work: <code>for package in [^p]* p[^y]* py*;</code>"}], "tags": [], "owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "is_accepted": false, "score": 0, "last_activity_date": 1466026398, "creation_date": 1466026398, "answer_id": 37846157, "question_id": 37846093, "link": "https://stackoverflow.com/questions/37846093/loop-over-a-directory-and-run-easy-install-on-packages-in-a-particular-order/37846157#37846157", "title": "Loop over a directory and run easy_install on packages in a particular order", "body": "<p>Something like this might work:</p>\n\n<pre><code>for package in m* pb* s* py*; do\n    easy_install \"$package\"\ndone\n</code></pre>\n\n<p>The above assumes that you are in a directory that contains those four files, and that <code>easy_install</code> requires a filename as first and only argument. </p>\n\n<p>Basically the variable <code>package</code> will be assigned in this order:</p>\n\n<pre><code>multy_key_dict-2.0.3.tar.gz\npbr-1.10.0.tar.gz\nsix-1.10.0.tar.gz\npython-jenkins-0.4.12.tar.gz\n</code></pre>\n\n<p>I hope you get the point of this <code>for</code> loop.</p>\n"}], "owner": {"reputation": 107, "user_id": 1746529, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0690e2eafe7cad709c4b6c1a4ca2deda?s=128&d=identicon&r=PG", "display_name": "Alok", "link": "https://stackoverflow.com/users/1746529/alok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1466030187, "creation_date": 1466026133, "last_edit_date": 1466030187, "question_id": 37846093, "link": "https://stackoverflow.com/questions/37846093/loop-over-a-directory-and-run-easy-install-on-packages-in-a-particular-order", "title": "Loop over a directory and run easy_install on packages in a particular order", "body": "<p>I am fairly new to bash scripting.</p>\n\n<p>I have a bash script which must run offline (should work without internet). The script untars a xyz.tar.gz file and performs easy_install on a bunch of python packages which are .tar.gz files themselves. The 4 packages I am installing are:</p>\n\n<pre><code>multi_key_dict-2.0.3.tar.gz\npbr-1.10.0.tar.gz\npython-jenkins-0.4.12.tar.gz\nsix-1.10.0.tar.gz\n</code></pre>\n\n<p>The problem is, six-1.10.0.tar.gz is a dependency for python-jenkins package. When I run the script, it tries to install these packages in alphabetical order; thus trying to install python-jenkins before six. Since there is no internet to get dependent packages, it fails. (Note that it is my requirement that I use easy_install over pip and the host machine should work offline)</p>\n\n<p>How do I write the script in such a way that it installs rest of the 3 packages before it installs python-jenkins? I don't want to write 4 lines manually to install each package.</p>\n"}, {"tags": ["python", "unzip", "zipfile"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1466026260, "post_id": 37846085, "comment_id": 63152487, "body": "<a href=\"http://stackoverflow.com/questions/1690993/zip-file-with-ppmd-compression-programmatically-unzip\" title=\"zip file with ppmd compression programmatically unzip\">stackoverflow.com/questions/1690993/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 2962477, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc51dd73de008b0a3e11752e5b708c24?s=128&d=identicon&r=PG&f=1", "display_name": "merimini", "link": "https://stackoverflow.com/users/2962477/merimini"}, "edited": false, "score": 0, "creation_date": 1466031967, "post_id": 37846187, "comment_id": 63154430, "body": "thank you @Dietrich Epp, I need to run the Python code in a Unix terminal server so I can only use the 2nd solution that you suggested. Do you know any resources that would help me to add PPMd support?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 17, "user_id": 2962477, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc51dd73de008b0a3e11752e5b708c24?s=128&d=identicon&r=PG&f=1", "display_name": "merimini", "link": "https://stackoverflow.com/users/2962477/merimini"}, "edited": false, "score": 0, "creation_date": 1466034053, "post_id": 37846187, "comment_id": 63154987, "body": "@merimini: What are you talking about?  <code>subprocess</code> works fine from the terminal."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 0, "last_activity_date": 1466026527, "creation_date": 1466026527, "answer_id": 37846187, "question_id": 37846085, "link": "https://stackoverflow.com/questions/37846085/python-unzip-large-file-notimplementederror-compression-type-98/37846187#37846187", "title": "Python unzip large file - NotImplementedError: compression type 98", "body": "<p>Python's <code>zipfile</code> module does not support PPMd compression--see <a href=\"http://bugs.python.org/issue14366\" rel=\"nofollow\">issue 14366</a> (emphasis added):</p>\n\n<blockquote>\n  <p>I think we should add the ability to register new codecs. <strong>Support for PPMd, jpeg and WavPack is unlikely to emerge in the Python in the foreseeable future,</strong> but users of third-party libraries (such as PIL), will use the new codecs as needed.</p>\n</blockquote>\n\n<p>There are only two options:</p>\n\n<ul>\n<li><p>Use an external zip program from Python, and the <code>subprocess</code> module.  The <code>p7zip</code> program would do the job nicely.</p></li>\n<li><p>Modify Python to add PPMd support to the <code>zipfile</code> module.</p></li>\n</ul>\n\n<p>Keep in mind that PPMd is an extremely uncommon codec to use, so most programs (including regular <code>unzip</code>) do not support it at all.</p>\n"}], "owner": {"reputation": 17, "user_id": 2962477, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc51dd73de008b0a3e11752e5b708c24?s=128&d=identicon&r=PG&f=1", "display_name": "merimini", "link": "https://stackoverflow.com/users/2962477/merimini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1476, "favorite_count": 0, "accepted_answer_id": 37846187, "answer_count": 1, "score": 0, "last_activity_date": 1466026527, "creation_date": 1466026075, "question_id": 37846085, "link": "https://stackoverflow.com/questions/37846085/python-unzip-large-file-notimplementederror-compression-type-98", "title": "Python unzip large file - NotImplementedError: compression type 98", "body": "<p>I am using following Python code to unzip the files</p>\n\n<pre><code>import zipfile\nzfile = zipfile.ZipFile(input_file_path)\nzfile.extractall(output_path)\n</code></pre>\n\n<p>However, when I try to unzip a larger file. It throws the following error.</p>\n\n<blockquote>\n  <p>NotImplementedError: compression type 98 (ppmd)</p>\n</blockquote>\n\n<p>How should I fix this error?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 587990, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0893e3a055bb4c7d4d97697f01e3d9fe?s=128&d=identicon&r=PG", "display_name": "XO39", "link": "https://stackoverflow.com/users/587990/xo39"}, "edited": false, "score": 0, "creation_date": 1466267627, "post_id": 37846324, "comment_id": 63251513, "body": "Actually I got it working with <code>get_xpath</code> just after I posted my question, but I was too tired to come back and check for answers. Anyway, you got it right. Thanks :)"}], "tags": [], "owner": {"reputation": 25709, "user_id": 429982, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2626843a1f8617b05b650b92b01ca63d?s=128&d=identicon&r=PG", "display_name": "Gerrat", "link": "https://stackoverflow.com/users/429982/gerrat"}, "is_accepted": true, "score": 2, "last_activity_date": 1466027157, "creation_date": 1466027157, "answer_id": 37846324, "question_id": 37846006, "link": "https://stackoverflow.com/questions/37846006/how-to-check-for-unfound-value-with-add-xpath-in-scrapy-and-set-item-value-to-a/37846324#37846324", "title": "How to check for unfound value with add_xpath in scrapy and set item value to a default value?", "body": "<p>The source for <code>ItemLoader</code> is <a href=\"https://github.com/scrapy/scrapy/blob/master/scrapy/loader/__init__.py\" rel=\"nofollow\">here</a>.  The <code>add_xpath</code> method doesn't return anything (and so by default it returns <code>None</code>, so your <code>if</code> statement will always be <code>False</code>). </p>\n\n<p>There does appear to be a <code>get_xpath</code> method that would appear to do what you want (check if the element exists).</p>\n"}], "owner": {"reputation": 466, "user_id": 587990, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0893e3a055bb4c7d4d97697f01e3d9fe?s=128&d=identicon&r=PG", "display_name": "XO39", "link": "https://stackoverflow.com/users/587990/xo39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 37846324, "answer_count": 1, "score": 0, "last_activity_date": 1466027157, "creation_date": 1466025743, "last_edit_date": 1495535638, "question_id": 37846006, "link": "https://stackoverflow.com/questions/37846006/how-to-check-for-unfound-value-with-add-xpath-in-scrapy-and-set-item-value-to-a", "title": "How to check for unfound value with add_xpath in scrapy and set item value to a default value?", "body": "<p>Let's say I have this code:</p>\n\n<pre><code>def parse(self, response)\n    l = ItemLoader(item=MyItem(), response=response\n    l.add_xpath('title', '//*[@id=\"title\"]/text()', MapCompose(str.strip, str.title)\n    l.add_xpath('price', '//*[@id=\"price\"]/text()', MapCompose(lambda i: i.replace(',', ''), float), re = '[,.0-9]')\n\n    return l.load_item()\n</code></pre>\n\n<p>I want to check if no element found, in that case set a default value with <code>l.add_value</code>, for example (I tried doing this):</p>\n\n<pre><code>    if l.add_xpath('price', '//*[@id=\"price\"]/text()', MapCompose(lambda i: i.replace(',', ''), float), re = '[,.0-9]'):\n        l.add_value('available', 1)\n    else:\n        l.add_value('price', 0)\n        l.add_value('available', 0)\n</code></pre>\n\n<p>But I got odd results (<a href=\"https://stackoverflow.com/q/37842939/587990\">see discussion here</a>).<br>\nAny ideas to achieve that?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "opencv", "flow"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6756468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffa5ccf5fe3bd07611f765121eda4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Habeck", "link": "https://stackoverflow.com/users/6756468/michael-habeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1472129482, "last_edit_date": 1472129482, "creation_date": 1472123072, "answer_id": 39143571, "question_id": 37845944, "link": "https://stackoverflow.com/questions/37845944/how-to-compute-emd-flow-by-using-cv-calcemd2-opencv/39143571#39143571", "title": "how to compute emd flow by using cv.CalcEMD2 (opencv)?", "body": "<p>Here is some python code that computes EMD and the flow for two mixtures of Gaussians. I hope that helps.</p>\n\n<pre><code>\"\"\"\nCompute earth mover's distance (EMD) to compare two mixtures of Gaussians\n\nRequires: numpy, cv2, csb\n\"\"\"\nimport numpy as np, cv2\nfrom csb.numeric import log_sum_exp\n\nclass GMM(object):\n    \"\"\"\n    1d mixture of Gaussians\n    \"\"\"\n    def __init__(self, K):\n        \"\"\"\n        K: number of components\n        \"\"\"\n        self.mu = np.zeros(K)\n        self.sigma = np.ones(K)\n        self.w = np.ones(K)\n        self.w/= self.w.sum()\n\n    @property\n    def K(self):\n        return len(self.mu)\n\n    def log_prob(self, x):\n        logp = - 0.5 * np.subtract.outer(x, self.mu)**2 / self.sigma**2. \\\n           - 0.5 * np.log(2*np.pi*self.sigma**2) + np.log(self.w)\n\n        return log_sum_exp(logp.T,0)\n\n    def __call__(self, x, normed=True):\n\n        logp = self.log_prob(x)\n        if np.iterable(x) and normed:\n            logp -= log_sum_exp(logp)\n\n        return np.exp(logp)\n\n    def randomize(self, mu_range=(-10, 10.), sigma_range=(0.1, 5.)):\n\n        self.mu[...] = np.random.uniform(*mu_range, size=self.K)\n        self.sigma[...] = np.random.uniform(*sigma_range, size=self.K)\n        self.w[...] = np.random.random(self.K)\n        self.w /= self.w.sum()\n\ndef make_signature(x, p):\n\n    P = np.transpose([p,x])\n    P64 = cv2.cv.fromarray(np.array(P.tolist()))\n    P32 = cv2.cv.CreateMat(P64.rows, P64.cols, cv2.cv.CV_32FC1)\n    cv2.cv.Convert(P64, P32)\n\n    return P32\n\ndef calc_emd(q, p, x):\n\n    Q = make_signature(x, q)\n    P = make_signature(x, p)\n\n    flow = cv2.cv.CreateMat(len(q), len(p), cv2.cv.CV_32F)\n    cv2.cv.Set(flow, 0.)\n\n    return cv2.cv.CalcEMD2(P, Q, cv2.cv.CV_DIST_L2, flow=flow), np.asarray(flow[:,:])\n\nif __name__ == '__main__':\n\n    x = np.linspace(-10., 10., 100)\n\n    ## create two mixtures of Gaussians with 3 and 5 components\n\n    f = GMM(3)\n    g = GMM(5)\n\n    f.randomize()\n    g.randomize()\n\n    ## evaluate mixtures on 1d grid\n\n    q = f(x)\n    p = g(x)\n\n    ## compute EMD and flow\n\n    emd, F = calc_emd(q, p, x)\n\n    ## check marginals\n\n    print np.fabs(F.sum(0) - q).max(), np.fabs(F.sum(1)-p).max()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6471691, "user_type": "registered", "profile_image": "https://graph.facebook.com/1756574857897918/picture?type=large", "display_name": "Yifei", "link": "https://stackoverflow.com/users/6471691/yifei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 781, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472129482, "creation_date": 1466025508, "question_id": 37845944, "link": "https://stackoverflow.com/questions/37845944/how-to-compute-emd-flow-by-using-cv-calcemd2-opencv", "title": "how to compute emd flow by using cv.CalcEMD2 (opencv)?", "body": "<p>I know MATLAB and C can compute EMD flow. However, I am trying to use python (opencv) to compute the EMD flow by using function cv.CalcEMD2. Is there any chance if anyone can give me an example using cv.CalcEMD2 or any function to get EMD flow please?</p>\n"}, {"tags": ["python", "git", "gitpython"], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 3659858, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d08446d44613da420066f3a6e2668dca?s=128&d=identicon&r=PG", "display_name": "etlsh", "link": "https://stackoverflow.com/users/3659858/etlsh"}, "edited": false, "score": 0, "creation_date": 1466173450, "post_id": 37848510, "comment_id": 63222699, "body": "thanks but using the git module to exactly command is just the same as sub process. ill go deeper into pygit2 but the module seems like he lacks the things i need ( or its very difficult to achieve them)"}], "tags": [], "owner": {"reputation": 7927, "user_id": 640243, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1bc2a4586e13fc428ab40605fb4514ac?s=128&d=identicon&r=PG", "display_name": "DavidN", "link": "https://stackoverflow.com/users/640243/davidn"}, "is_accepted": false, "score": -2, "last_activity_date": 1466041067, "creation_date": 1466041067, "answer_id": 37848510, "question_id": 37845888, "link": "https://stackoverflow.com/questions/37845888/use-gitpython-to-checkout-a-new-branch-and-push-to-remote/37848510#37848510", "title": "Use GitPython to Checkout a new branch and push to remote", "body": "<p>gitypython looks like it provides both low and level access to git but you can invoke git commands, see <a href=\"http://gitpython.readthedocs.io/en/stable/reference.html#module-git.cmd\" rel=\"nofollow\">http://gitpython.readthedocs.io/en/stable/reference.html#module-git.cmd</a>. </p>\n\n<p>Alternately, consider using <a href=\"http://www.pygit2.org/\" rel=\"nofollow\">http://www.pygit2.org/</a> instead, <a href=\"http://www.pygit2.org/\" rel=\"nofollow\">http://www.pygit2.org/</a> for higher level access. Some examples here <a href=\"http://www.pygit2.org/recipes.html\" rel=\"nofollow\">http://www.pygit2.org/recipes.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 5466193, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7bfee18e0dc608ed5248ef2f9178d581?s=128&d=identicon&r=PG&f=1", "display_name": "BharathKumarMurugan", "link": "https://stackoverflow.com/users/5466193/bharathkumarmurugan"}, "is_accepted": false, "score": 8, "last_activity_date": 1503462817, "creation_date": 1503462817, "answer_id": 45830704, "question_id": 37845888, "link": "https://stackoverflow.com/questions/37845888/use-gitpython-to-checkout-a-new-branch-and-push-to-remote/45830704#45830704", "title": "Use GitPython to Checkout a new branch and push to remote", "body": "<p>I've done something like creating a txt in a remote branch from newly created branch and commit, push to remote. Here's my code</p>\n\n<pre><code>import git\nimport datetime\nimport os\nfrom time import *\nfrom os import path\nfrom git import Repo\n\ndef commit_files():\n    if repo != None:\n        new_branch = 'your_new_branch'\n        current = repo.create_head(new_branch)\n        current.checkout()\n        master = self.repo.heads.master\n        repo.git.pull('origin', master)\n        #creating file\n        dtime = strftime('%d-%m-%Y %H:%M:%S', localtime())\n        with open(self.local_repo_path + path.sep + 'lastCommit' + '.txt', 'w') as f:\n            f.write(str(dtime))\n        if not path.exists(self.local_repo_path):\n            os.makedirs(self.local_repo_path)\n        print('file created---------------------')\n\n        if repo.index.diff(None) or repo.untracked_files:\n\n            repo.git.add(A=True)\n            repo.git.commit(m='msg')\n            repo.git.push('--set-upstream', 'origin', current)\n            print('git push')\n        else:\n            print('no changes')\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 3659858, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d08446d44613da420066f3a6e2668dca?s=128&d=identicon&r=PG", "display_name": "etlsh", "link": "https://stackoverflow.com/users/3659858/etlsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7935, "favorite_count": 3, "answer_count": 2, "score": 6, "last_activity_date": 1582309241, "creation_date": 1466025294, "last_edit_date": 1582309241, "question_id": 37845888, "link": "https://stackoverflow.com/questions/37845888/use-gitpython-to-checkout-a-new-branch-and-push-to-remote", "title": "Use GitPython to Checkout a new branch and push to remote", "body": "<p>Given a <code>repo</code> from GitPython, how can I create a new local branch, add some files, and push it to remote using GitPython?</p>\n\n<p>To create a <code>repo</code>:</p>\n\n<pre><code>from git import *\n\ncurr_dir = os.path.dirname(os.path.realpath(__file__))\nrepo = Repo(curr_dir)\n</code></pre>\n\n<p>For now, I'm just using <code>subprocess</code>:</p>\n\n<pre><code>def publish_changes_to_git(commit_msg):\n    curr_time = time.time()\n    ts = datetime.datetime.fromtimestamp(curr_time).strftime('%Y-%m-%d-%H-%M-%S')\n    branch_name = \"auto-commit-{ts}\".format(ts=ts)\n    subprocess.check_output([\"git\", \"checkout\", \"-b\", branch_name])\n    subprocess.check_output([\"git\", \"add\", SOME_PATH])\n    subprocess.check_output(\n        [\"git\", \"commit\", \"-m\", \"auto-git-commit: {msg}\".format(msg=commit_msg)])\n</code></pre>\n"}, {"tags": ["python", "performance", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1466026423, "post_id": 37845884, "comment_id": 63152566, "body": "What dtypes does your DF have before casting? Do you have NaN&#39;s in your numeric columns?"}, {"owner": {"reputation": 103, "user_id": 1336945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cafae7bb97f2e69b266b8672e9f187a?s=128&d=identicon&r=PG", "display_name": "Alan H&#246;ng", "link": "https://stackoverflow.com/users/1336945/alan-h%c3%b6ng"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1466029917, "post_id": 37845884, "comment_id": 63153828, "body": "before casting all columns in the subset have np.int64 as dtype. There are no NaN&#39;s."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 1336945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cafae7bb97f2e69b266b8672e9f187a?s=128&d=identicon&r=PG", "display_name": "Alan H&#246;ng", "link": "https://stackoverflow.com/users/1336945/alan-h%c3%b6ng"}, "edited": false, "score": 0, "creation_date": 1466031704, "post_id": 37847177, "comment_id": 63154352, "body": "Humm tried it casting from float to int and the other way round too. Also tried without loc as suggested by you (didn&#39;t include it on the picture though) but still slow."}, {"owner": {"reputation": 103, "user_id": 1336945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cafae7bb97f2e69b266b8672e9f187a?s=128&d=identicon&r=PG", "display_name": "Alan H&#246;ng", "link": "https://stackoverflow.com/users/1336945/alan-h%c3%b6ng"}, "edited": false, "score": 0, "creation_date": 1466032341, "post_id": 37847177, "comment_id": 63154531, "body": "I added the benchmark to the question. Thanks for the info about copy I was unsure of how exactly it works :)"}, {"owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "reply_to_user": {"reputation": 103, "user_id": 1336945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cafae7bb97f2e69b266b8672e9f187a?s=128&d=identicon&r=PG", "display_name": "Alan H&#246;ng", "link": "https://stackoverflow.com/users/1336945/alan-h%c3%b6ng"}, "edited": false, "score": 0, "creation_date": 1466032643, "post_id": 37847177, "comment_id": 63154616, "body": "My timing was off, this is slower than I&#39;d hope (you still shouldn&#39;t use <code>loc</code> for casting).  It&#39;s a bit of hack, but I&#39;ve updated my answer with something that&#39;s faster and will make an issue."}, {"owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "reply_to_user": {"reputation": 103, "user_id": 1336945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cafae7bb97f2e69b266b8672e9f187a?s=128&d=identicon&r=PG", "display_name": "Alan H&#246;ng", "link": "https://stackoverflow.com/users/1336945/alan-h%c3%b6ng"}, "edited": false, "score": 0, "creation_date": 1466033111, "post_id": 37847177, "comment_id": 63154743, "body": "Also, for future reference, post copy-paste-able code, rather than images."}, {"owner": {"reputation": 103, "user_id": 1336945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cafae7bb97f2e69b266b8672e9f187a?s=128&d=identicon&r=PG", "display_name": "Alan H&#246;ng", "link": "https://stackoverflow.com/users/1336945/alan-h%c3%b6ng"}, "edited": false, "score": 0, "creation_date": 1466036542, "post_id": 37847177, "comment_id": 63155516, "body": "Neat solution :). Didn&#39;t know how to paste notebook code + output into SO.. I&#39;m at work so had to do it fast. Will do next time. Thanks!"}], "tags": [], "owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "is_accepted": true, "score": 1, "last_activity_date": 1466032635, "last_edit_date": 1466032635, "creation_date": 1466031401, "answer_id": 37847177, "question_id": 37845884, "link": "https://stackoverflow.com/questions/37845884/pandas-setting-column-subset-slow/37847177#37847177", "title": "Pandas setting column subset slow", "body": "<p>There was just a doc note added about this - see <a href=\"http://pandas-docs.github.io/pandas-docs-travis/basics.html#astype\" rel=\"nofollow\">here</a>.</p>\n\n<p>Basically you don't want to use <code>loc</code> when casting - instead do:</p>\n\n<pre><code>df[f] = df[f].astype(float)\n</code></pre>\n\n<p>Also, fyi the <code>copy=False</code> doesn't do any harm here, but it doesn't do any good either - going from ints to floats you're going to have to allocate a new array.</p>\n\n<p>Edit - this was slower than I thought.  Here's something of a workaround:</p>\n\n<pre><code>In [61]: df = pd.DataFrame(np.random.randint(0,1000, size=(10000, 1026)))\n\nIn [62]: f = list(range(1024))\n\nIn [63]: def cast(s):\n    ...:     if s.name in f:\n    ...:         return s.astype(float)\n    ...:     else:\n    ...:         return s\n\nIn [64]: %timeit df.apply(cast)\n1 loop, best of 3: 389 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 1336945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cafae7bb97f2e69b266b8672e9f187a?s=128&d=identicon&r=PG", "display_name": "Alan H&#246;ng", "link": "https://stackoverflow.com/users/1336945/alan-h%c3%b6ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "accepted_answer_id": 37847177, "answer_count": 1, "score": 1, "last_activity_date": 1466032635, "creation_date": 1466025278, "last_edit_date": 1466032276, "question_id": 37845884, "link": "https://stackoverflow.com/questions/37845884/pandas-setting-column-subset-slow", "title": "Pandas setting column subset slow", "body": "<p>I had to cast a subset of columns of a big DataFrame in pandas... it was very slow. So I made a few tests and discovered that the casting itself is done very fast. But Pandas seems to be slow when attributing the newly casted values to the old DataFrame. </p>\n\n<p>I then came up with another solution performing a join and avoiding attributing to a column subset which runs pretty fast.</p>\n\n<p>Why is pandas so slow? Might this be a bug? Can anyone reproduce the results?</p>\n\n<p><a href=\"https://i.stack.imgur.com/s9zHY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s9zHY.png\" alt=\"slow pandas\"></a></p>\n\n<h2>Edit:</h2>\n\n<p>More tests and the code used to produce the DataFrame.</p>\n\n<p><a href=\"https://i.stack.imgur.com/H4Vw2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H4Vw2.png\" alt=\"slow pandas 2\"></a></p>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 3, "creation_date": 1466025492, "post_id": 37845872, "comment_id": 63152143, "body": "put that in a function and add a <code>yield i</code> as last instruction of the loop. That would be a generator, which you can iterate"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 6, "creation_date": 1466026033, "post_id": 37845872, "comment_id": 63152391, "body": "Watch out - incrementing by steps doesn&#39;t work very well with floating-point rounding constraints. You&#39;re likely to have boundary errors."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 1, "creation_date": 1466026208, "post_id": 37845872, "comment_id": 63152472, "body": "@njzk2 - <code>yield</code> should be the <b>first</b> instruction in his loop, where the <code># do something</code> is now. His first value needs to be <code>.01</code>."}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1466058819, "post_id": 37845872, "comment_id": 63161841, "body": "<a href=\"https://docs.python.org/2/library/decimal.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/decimal.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1466027054, "post_id": 37846008, "comment_id": 63152840, "body": "yeah fixed that now too, jeez my head just isn&#39;t in it today."}], "tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": false, "score": 3, "last_activity_date": 1466026975, "last_edit_date": 1466026975, "creation_date": 1466025749, "answer_id": 37846008, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop/37846008#37846008", "title": "Variable step in a for loop", "body": "<p>You could have a nested loop, the outer one that iterates over the precision and inner one that is just <code>range(1,10)</code>:</p>\n\n<pre><code>for precision in (0.01, 0.1, 1):\n    for i in range(1,10):\n        i*=precision\n        print(i)\n</code></pre>\n\n<p>However floats are probably not going to work in this case as this shows values like <code>0.30000000000000004</code> on my machine, for precise decimal values you would want to use the <a href=\"https://docs.python.org/3/library/decimal.html\" rel=\"nofollow\"><code>decimal</code></a> module:</p>\n\n<pre><code>import decimal\nfor precision in (\"0.01\", \"0.1\", \"1\"):\n    for i in range(1,10):\n        i*=decimal.Decimal(precision)\n        print(i)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5158, "user_id": 1829930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00937426fde9e00fe46a57043c00eeb?s=128&d=identicon&r=PG", "display_name": "Robin Krahl", "link": "https://stackoverflow.com/users/1829930/robin-krahl"}, "is_accepted": false, "score": 3, "last_activity_date": 1466025755, "creation_date": 1466025755, "answer_id": 37846010, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop/37846010#37846010", "title": "Variable step in a for loop", "body": "<p>One approach would be to use two loops:  one for the order of magnitude, and one for the values from 1 to 9:</p>\n\n<pre><code>for exp in range(-2, 1):\n    for i in range(1, 10):\n        print(\"{:.2f}\".format(i * 10 ** exp))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3558, "user_id": 1732563, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b51d68c0232ecc9de87719a203ccb428?s=128&d=identicon&r=PG", "display_name": "Sean Perry", "link": "https://stackoverflow.com/users/1732563/sean-perry"}, "edited": false, "score": 0, "creation_date": 1466038669, "post_id": 37846018, "comment_id": 63155980, "body": "This mostly works. You do get odd results like <code>0.30000000000000004</code> though."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 3558, "user_id": 1732563, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b51d68c0232ecc9de87719a203ccb428?s=128&d=identicon&r=PG", "display_name": "Sean Perry", "link": "https://stackoverflow.com/users/1732563/sean-perry"}, "edited": false, "score": 1, "creation_date": 1466038870, "post_id": 37846018, "comment_id": 63156025, "body": "Of course. That&#39;s the nature of floating-point arithmetic. <code>0.3</code> isn&#39;t  representable in a <code>float</code>."}, {"owner": {"reputation": 3558, "user_id": 1732563, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b51d68c0232ecc9de87719a203ccb428?s=128&d=identicon&r=PG", "display_name": "Sean Perry", "link": "https://stackoverflow.com/users/1732563/sean-perry"}, "edited": false, "score": 1, "creation_date": 1466038944, "post_id": 37846018, "comment_id": 63156039, "body": "Yup, no surprise on my part. I made this comment for the OP."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1466050392, "post_id": 37846018, "comment_id": 63158579, "body": "You can get slightly better results at the expense of a slight bit of clarity by using division instead of multiplication: <code>for j in 100., 10., 1.: for i in range(1, 10): yield i &#47; j</code>. It doesn&#39;t matter much. The important thing is to avoid floating-point steps, and you&#39;re already doing that."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 21, "last_activity_date": 1466025801, "creation_date": 1466025801, "answer_id": 37846018, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop/37846018#37846018", "title": "Variable step in a for loop", "body": "<p>A special-purse generator function might be the right way to go. This would effectively separate the boring part (getting the list of numbers right) from the interesting part (the <code># do something</code> in your example).</p>\n\n<pre><code>def my_range():\n    for j in .01, .1, 1.:\n        for i in range(1, 10, 1):\n            yield i * j\n\nfor x in my_range():\n    print x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": false, "score": 1, "last_activity_date": 1466025959, "creation_date": 1466025959, "answer_id": 37846054, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop/37846054#37846054", "title": "Variable step in a for loop", "body": "<p>You could do something like:</p>\n\n<pre><code>import numpy as np\nlist1 = np.arange(0.01, 0.1, 0.01)\nlist2 = np.arange(0.1, 1, 0.1)\nlist3 = np.arange(1, 10, 1)\ni_list = np.concatenate((list1, list2, list3))  # note the double parenthesis\nfor i in i_list:\n    ...\n</code></pre>\n\n<p>Basically you create the entire list of values that you need up front, <code>i_list</code>, then just iterate through them in your <code>for</code> loop.</p>\n"}, {"comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 3, "creation_date": 1466027413, "post_id": 37846358, "comment_id": 63152979, "body": "You don&#39;t need the assignment. OP wants to use this to drive a loop: <code>for x in (i*j for j in (.01, .1, 1.) for i in range(1,10)): print x</code>"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1466033574, "post_id": 37846358, "comment_id": 63154850, "body": ":( it seems pretty contrived to have 3 <code>for</code> statements in a single line. I preferred it the other way."}], "tags": [], "owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "is_accepted": false, "score": 3, "last_activity_date": 1466028163, "last_edit_date": 1466028163, "creation_date": 1466027261, "answer_id": 37846358, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop/37846358#37846358", "title": "Variable step in a for loop", "body": "<p>Just a single line of code through list comprehension - </p>\n\n<pre><code>for k in [i*j for j in (0.01, 0.1, 1) for i in range(1, 10)]\n</code></pre>\n\n<p>Can't be more pythonic!</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2508324"}, "edited": false, "score": 2, "creation_date": 1466047844, "post_id": 37847024, "comment_id": 63157953, "body": "Numpy is way overkill for this problem"}, {"owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "edited": false, "score": 0, "creation_date": 1466086523, "post_id": 37847024, "comment_id": 63180768, "body": "Yes, my code can be regarded as kind of overkill if you just need to print out the numbers (BTW, mine isn&#39;t the only one NumPy-based solution proposed here). However, if the <code># do something</code> block involves a call to a time-consuming function which takes the generated values as argument, I think the vectorized code might be more efficient. Anyway, it is simply another possible approach that some users of SO could find useful."}], "tags": [], "owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "is_accepted": false, "score": 2, "last_activity_date": 1466030496, "creation_date": 1466030496, "answer_id": 37847024, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop/37847024#37847024", "title": "Variable step in a for loop", "body": "<p>Just in case you wished to replace the loop with <strong>vectorized</strong> code...</p>\n\n<pre><code>In [63]: np.ravel(10.**np.arange(-2, 1)[:,None] * np.arange(1, 10)[None,:])\nOut[64]: \narray([ 0.01,  0.02,  0.03,  0.04,  0.05,  0.06,  0.07,  0.08,  0.09,\n        0.1 ,  0.2 ,  0.3 ,  0.4 ,  0.5 ,  0.6 ,  0.7 ,  0.8 ,  0.9 ,\n        1.  ,  2.  ,  3.  ,  4.  ,  5.  ,  6.  ,  7.  ,  8.  ,  9.  ])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466050489, "post_id": 37848235, "comment_id": 63158605, "body": "Like any other assignment, <code>+=</code> assignments are statements in Python; you can&#39;t <code>yield</code> them."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466051510, "post_id": 37848235, "comment_id": 63158925, "body": "@user2357112: Right, fixed."}], "tags": [], "owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "is_accepted": false, "score": 2, "last_activity_date": 1466051497, "last_edit_date": 1466051497, "creation_date": 1466039017, "answer_id": 37848235, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop/37848235#37848235", "title": "Variable step in a for loop", "body": "<p>I'd recommend a generator function as well, but if the steps are not such convenient powers of each other I'd write it like</p>\n\n<pre><code>def my_range():\n    i = 0\n    while i &lt; 0.1:\n        i += 0.01\n        yield i\n    while i &lt; 1:\n        i += 0.1\n        yield i\n    while i &lt; 10:\n        i += 1\n        yield i\n\nfor x in my_range():\n    print x\n</code></pre>\n\n<p>It might be a bit more repetitive, but illustrates much better what is going on and that the yielded values are monotonically increasing (regardless what numbers you put in).</p>\n\n<p>If it gets too repetitive, use</p>\n\n<pre><code>def my_range():\n    i = 0\n    for (end, step) in [(0.1, 0.01), (1, 0.1), (10, 1)]:\n        while i &lt; end:\n            i += step\n            yield i\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 4848525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4PHcYsi5BUM/AAAAAAAAAAI/AAAAAAAAAnE/K4_9FWBfOW4/photo.jpg?sz=128", "display_name": "volc_nerd", "link": "https://stackoverflow.com/users/4848525/volc-nerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3919, "favorite_count": 2, "answer_count": 7, "score": 21, "last_activity_date": 1467308646, "creation_date": 1466025240, "last_edit_date": 1467308646, "question_id": 37845872, "link": "https://stackoverflow.com/questions/37845872/variable-step-in-a-for-loop", "title": "Variable step in a for loop", "body": "<p>I am trying to loop between 0.01 and 10, but between 0.01 and 0.1 use 0.01 as the step, then between 0.1 and 1.0 use 0.1 as step, and between 1.0 and 10.0 use 1.0 as step.</p>\n\n<p>I have the while loop code written, but want to make it more pythonic.</p>\n\n<pre><code>i = 0.01\nwhile i &lt; 10:\n   # do something\n   print i\n   if i &lt; 0.1:\n       i += 0.01\n   elif i &lt; 1.0:\n       i += 0.1\n   else:\n       i += 1\n</code></pre>\n\n<p>This will produce </p>\n\n<pre><code>0.01, 0.02, 0.03, 0.04, 0.05, 0.06, 0.07, 0.08, 0.09, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 2, 3, 4, 5, 6, 7, 8, 9\n</code></pre>\n"}, {"tags": ["python", "indexing", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 894, "user_id": 1271862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41cd9d62abfb60c7c47872eb7a2357c9?s=128&d=identicon&r=PG", "display_name": "glormph", "link": "https://stackoverflow.com/users/1271862/glormph"}, "edited": false, "score": 0, "creation_date": 1466071101, "post_id": 37854143, "comment_id": 63169721, "body": "Thanks, using pysqlite from PyPI instead of the python std library sqlite3 (v.2.6.0) module fixes this. Unfortunately I&#39;m on python3 and the pysqlite package is not available (yet). <a href=\"http://stackoverflow.com/a/23414147/1271862\">stackoverflow.com/a/23414147/1271862</a>"}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 1, "last_activity_date": 1466066634, "creation_date": 1466066634, "answer_id": 37854143, "question_id": 37845854, "link": "https://stackoverflow.com/questions/37845854/python-sqlite3-not-using-index-with-like/37854143#37854143", "title": "Python sqlite3 not using index with LIKE", "body": "<p>The <a href=\"http://www.sqlite.org/optoverview.html#like_opt\" rel=\"nofollow\">documentation</a> says:</p>\n\n<blockquote>\n  <p>If the right-hand side is a <a href=\"http://www.sqlite.org/lang_expr.html#varparam\" rel=\"nofollow\">parameter</a> that is bound to a string, then this optimization is only attempted if the <a href=\"http://www.sqlite.org/c3ref/stmt.html\" rel=\"nofollow\">prepared statement</a> containing the expression was compiled with <a href=\"http://www.sqlite.org/c3ref/prepare.html\" rel=\"nofollow\">sqlite3_prepare_v2()</a> or <a href=\"http://www.sqlite.org/c3ref/prepare.html\" rel=\"nofollow\">sqlite3_prepare16_v2()</a>. The LIKE optimization is not attempted if the right-hand side is a <a href=\"http://www.sqlite.org/lang_expr.html#varparam\" rel=\"nofollow\">parameter</a> and the statement was prepared using <a href=\"http://www.sqlite.org/c3ref/prepare.html\" rel=\"nofollow\">sqlite3_prepare()</a> or <a href=\"http://www.sqlite.org/c3ref/prepare.html\" rel=\"nofollow\">sqlite3_prepare16()</a>.</p>\n</blockquote>\n\n<p>Old versions of the pysqlite module use <code>sqlite3_prepare()</code>.</p>\n"}], "owner": {"reputation": 894, "user_id": 1271862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41cd9d62abfb60c7c47872eb7a2357c9?s=128&d=identicon&r=PG", "display_name": "glormph", "link": "https://stackoverflow.com/users/1271862/glormph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 37854143, "answer_count": 1, "score": 0, "last_activity_date": 1466066634, "creation_date": 1466025146, "question_id": 37845854, "link": "https://stackoverflow.com/questions/37845854/python-sqlite3-not-using-index-with-like", "title": "Python sqlite3 not using index with LIKE", "body": "<p>I have a table with a single column, which I query in two ways:</p>\n\n<ul>\n<li><code>SELECT * FROM sequences WHERE seqs=\"blablabla\"</code></li>\n<li><code>SELECT * FROM sequences WHERE seqs LIKE \"blablabla%\"</code></li>\n</ul>\n\n<p>For these queries to use an index I seem to need two indices (one for each query type), as such:</p>\n\n<ul>\n<li><code>CREATE INDEX test_nocol ON sequences(seqs)</code> for the first query.</li>\n<li><code>CREATE INDEX seqs_index ON sequences(seqs COLLATE NOCASE)</code> for the second query.</li>\n</ul>\n\n<p>That's all nice, but then I add python3's sqlite3 module, and start querying there instead, which works with raw strings, but when I use parameter bindings the <code>COLLATE</code> index is suddenly no longer used:</p>\n\n<pre><code>&gt;&gt;&gt; sql = 'explain query plan\\n select seqs from sequences where seqs=\"blabla\"'\n&gt;&gt;&gt; c3.execute(sql).fetchall()\n[(0, 0, 0, 'SEARCH TABLE sequences USING COVERING INDEX test_nocol (seqs=?)')]\n&gt;&gt;&gt; sql = 'explain query plan\\n select seqs from sequences where seqs=?'\n&gt;&gt;&gt; c3.execute(sql, ('hahahah',)).fetchall()\n[(0, 0, 0, 'SEARCH TABLE sequences USING COVERING INDEX test_nocol (seqs=?)')]\n&gt;&gt;&gt; sql = 'explain query plan\\n select seqs from sequences where seqs like \"hahahah%\"'\n&gt;&gt;&gt; c3.execute(sql).fetchall()\n[(0, 0, 0, 'SEARCH TABLE sequences USING COVERING INDEX seqs_index (seqs&gt;? AND seqs&lt;?)')]\n&gt;&gt;&gt; sql = 'explain query plan\\n select seqs from sequences where seqs like ?'\n&gt;&gt;&gt; c3.execute(sql, ('hahahah',)).fetchall()\n[(0, 0, 0, 'SCAN TABLE sequences')]\n</code></pre>\n\n<p>What am I doing wrong here? Since this is a serialization backend and not a webapp DB, I guess the threat when using raw strings is less severe, but I'd much rather use the proper SQL formatting.</p>\n"}, {"tags": ["python", "numpy", "python-c-api", "python-c-extension"], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466090564, "creation_date": 1466025076, "last_edit_date": 1466090564, "question_id": 37845839, "link": "https://stackoverflow.com/questions/37845839/c-extension-with-integer-numpy-array-as-argument", "title": "C extension with integer &amp; numpy array as argument", "body": "<p>I want to create a c extension to python that takes one integer, and two numpy array as argument. How to do that?</p>\n\n<p>Thank you.</p>\n\n<p>This works:</p>\n\n<pre><code>#include \"Python.h\"\n#include \"numpy/arrayobject.h\"\n\nstatic PyObject* test4 (PyObject *self, PyObject *args)\n{\n    int m;\n    if (!PyArg_ParseTuple(args, \"i\", m))\n    {\n        return NULL;\n    }\n}\n</code></pre>\n\n<p>This also works:</p>\n\n<pre><code>#include \"Python.h\"\n#include \"numpy/arrayobject.h\"\n\nstatic PyObject* test4 (PyObject *self, PyObject *args)\n{\n    PyArrayObject *a_array\n    PyArrayObject *ja_array\n    if (!PyArg_ParseTuple(args, \"O!O!\", \n                            &amp;PyArray_Type, &amp;a_array,\n                            &amp;PyArray_Type, &amp;ja_array))\n    {\n        return NULL;\n    }\n}\n</code></pre>\n\n<p>The following dont work:</p>\n\n<pre><code>#include \"Python.h\"\n#include \"numpy/arrayobject.h\"\n\nstatic PyObject* test4 (PyObject *self, PyObject *args)\n{\n    PyArrayObject *a_array\n    PyArrayObject *ja_array\n    int m;\n    if (!PyArg_ParseTuple(args, \"iO!O!\", \n                            &amp;m,\n                            &amp;PyArray_Type, &amp;a_array,\n                            &amp;PyArray_Type, &amp;ja_array))\n    {\n        return NULL;\n    }\n}\n</code></pre>\n\n<p>The error that I get upon compiling is:</p>\n\n<pre><code>error: expression must have integral type\n            &amp;a_array\n            ^\n</code></pre>\n\n<p>I can pass the integer into the function as a numpy array... but things should be simpler.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 1, "creation_date": 1466025279, "post_id": 37845819, "comment_id": 63152042, "body": "Give us a sample input and output (in plain text, not screenshots, so we can copy)"}, {"owner": {"reputation": 4542, "user_id": 6266254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c148a45646163ce44ec52a8107007e7d?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Hacker", "link": "https://stackoverflow.com/users/6266254/bubble-hacker"}, "edited": false, "score": 0, "creation_date": 1466025469, "post_id": 37845819, "comment_id": 63152128, "body": "There is also a <code>tk_4</code>, shouldn&#39;t that be the one to end up in the list?"}, {"owner": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "reply_to_user": {"reputation": 4542, "user_id": 6266254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c148a45646163ce44ec52a8107007e7d?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Hacker", "link": "https://stackoverflow.com/users/6266254/bubble-hacker"}, "edited": false, "score": 0, "creation_date": 1466030477, "post_id": 37845819, "comment_id": 63153998, "body": "@BubbleHacker I realise it&#39;s hard to see, but that tk_4 is a different shot -de05_019  (the green circled part is different.).  So for that shot, it would indeed be in the final list since all the other de05_019 have a lower tk_ number."}, {"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1466607050, "post_id": 37845819, "comment_id": 63389340, "body": "Updated my answer based on the latest dataset that wasn&#39;t working. Now they both work."}, {"owner": {"reputation": 9307, "user_id": 705086, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbeee3d76a35f9de8847f36ee51c28a2?s=128&d=identicon&r=PG", "display_name": "Dima Tisnek", "link": "https://stackoverflow.com/users/705086/dima-tisnek"}, "edited": false, "score": 0, "creation_date": 1466607323, "post_id": 37845819, "comment_id": 63389551, "body": "You want a <code>set()</code>. Yes it&#39;s that simple :)"}, {"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1466608872, "post_id": 37845819, "comment_id": 63390653, "body": "Set ensures uniqueness <i>only</i>, you&#39;d still have to track the highest take. The comparison could be simplified if you just sorted the original list though."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "edited": false, "score": 0, "creation_date": 1466486136, "post_id": 37845981, "comment_id": 63321873, "body": "Thanks @Bahrom.  I can&#39;t tell what part of the code sorts by the take number.  Can you explain that to me? I&#39;m trying it with a different data set and it&#39;s not yielding the shot with the highest take number."}, {"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "reply_to_user": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "edited": false, "score": 0, "creation_date": 1466486173, "post_id": 37845981, "comment_id": 63321885, "body": "Can  you post the data set you&#39;re trying with?"}, {"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "reply_to_user": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "edited": false, "score": 0, "creation_date": 1466486772, "post_id": 37845981, "comment_id": 63322099, "body": "@samusugiru ill update tomorrow morning with more details/explanation, getting late here today, sorry!"}, {"owner": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "edited": false, "score": 0, "creation_date": 1466569291, "post_id": 37845981, "comment_id": 63364524, "body": "Updated original post. In the code there are only two unique shots, in the second, tk_13 is not ending up in the final list."}, {"owner": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "edited": false, "score": 0, "creation_date": 1466662034, "post_id": 37845981, "comment_id": 63411895, "body": "Thank you @Bahrom, that works like a dream.  I understand it all except the lambda bit.  Could you help me understand? (I&#39;m also googling everything I can find on lambda)"}, {"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "reply_to_user": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "edited": false, "score": 0, "creation_date": 1466688648, "post_id": 37845981, "comment_id": 63429818, "body": "That lambda is the key function used to compare two entries in <a href=\"https://docs.python.org/2/library/functions.html#max\" rel=\"nofollow noreferrer\">max</a>"}], "tags": [], "owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1466688608, "last_edit_date": 1466688608, "creation_date": 1466025656, "answer_id": 37845981, "question_id": 37845819, "link": "https://stackoverflow.com/questions/37845819/python-unique-list-based-on-part-of-file-path/37845981#37845981", "title": "Python: Unique list (based on part of file path)", "body": "<p>One way would be to create a dictionary and keep reassigning the keys, so you only end up with the last value in the directory:</p>\n\n<pre><code>import os\n\nraw_list1 = [\n    'D:\\\\\\\\de05\\\\de05_019\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n    'D:\\\\\\\\de05\\\\de05_019\\\\postvis\\\\tk_3\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n    'D:\\\\\\\\de05\\\\de05_019\\\\postvis\\\\tk_4\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n    'D:\\\\\\\\de05\\\\de05_019\\\\postvis\\\\tk_1\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n    'D:\\\\\\\\tw05\\\\tw05_036\\\\postvis\\\\tk_9\\\\blasts\\\\tb205_tw05_036.POSTVIS.mov',\n    'D:\\\\\\\\tw05\\\\tw05_036\\\\postvis\\\\tk_13\\\\blasts\\\\tb205_tw05_036.POSTVIS.mov'\n]\nraw_list2 = [\n    'D:\\\\de05\\\\de05_001\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_001.POSTVIS.mov',\n    'D:\\\\de05\\\\de05_001\\\\postvis\\\\tk_3\\\\blasts\\\\tb205_de05_001.POSTVIS.mov',\n    'D:\\\\de05\\\\de05_002\\\\postvis\\\\tk_1\\\\blasts\\\\tb205_de05_002.POSTVIS.mov',\n    'D:\\\\de05\\\\de05_017\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_017.POSTVIS.mov',\n    'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n    'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_3\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n    'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_4\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n    'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_1\\\\blasts\\\\tb205_de05_019.POSTVIS.mov',\n]\n\ndef path_split(p, folders=None):\n    folders = folders or []\n    head, tail = os.path.split(p)\n    if not tail:\n        return folders\n    return path_split(head, [tail] + folders)\n\nfor raw_list in (raw_list1, raw_list2):\n    results = {}\n\n    for p in raw_list:\n        # Split your path accordingly\n        # For something simple you could have just done s.split('\\\\'), but since we're working with paths, we might as well use os.path.split\n        shot1, shot2, folder1, take, folder2, file_name = path_split(p)\n        # If something like 'de05_019' defines your shot, make that the key\n        key = shot2\n        # Extract the take number into an integer\n        new_take_num = int(take.split('_')[-1])\n        # Try finding the take you already stored (default to Nones)\n        existing_take_num, existing_path = results.get(key, (None, None))\n        # See if the new take is bigger than the existing one, based on the take number.\n        # Lambda is there for comparison, meaning I'm only comparing the take numbers, not the paths. I'll link the docs to max in the comments.\n        value = max((existing_take_num, existing_path), (new_take_num, p), key=lambda take_num_and_path: take_num_and_path[0])\n        # Assign the value (which is either the existing take, or the new take)\n        results[key] = value\n\n    for res in sorted(results.values()):\n        print res\n    print '*' * 80\n</code></pre>\n\n<p>This outputs (you could also just <code>print res[1]</code> to only print the path):</p>\n\n<pre><code>(4, 'D:\\\\\\\\de05\\\\de05_019\\\\postvis\\\\tk_4\\\\blasts\\\\tb205_de05_019.POSTVIS.mov')\n(13, 'D:\\\\\\\\tw05\\\\tw05_036\\\\postvis\\\\tk_13\\\\blasts\\\\tb205_tw05_036.POSTVIS.mov')\n********************************************************************************\n(1, 'D:\\\\de05\\\\de05_002\\\\postvis\\\\tk_1\\\\blasts\\\\tb205_de05_002.POSTVIS.mov')\n(2, 'D:\\\\de05\\\\de05_017\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_017.POSTVIS.mov')\n(3, 'D:\\\\de05\\\\de05_001\\\\postvis\\\\tk_3\\\\blasts\\\\tb205_de05_001.POSTVIS.mov')\n(4, 'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_4\\\\blasts\\\\tb205_de05_019.POSTVIS.mov')\n********************************************************************************\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4997108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8cZGf.png?s=128&g=1", "display_name": "samusugiru", "link": "https://stackoverflow.com/users/4997108/samusugiru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 37845981, "answer_count": 1, "score": 0, "last_activity_date": 1466688608, "creation_date": 1466024990, "last_edit_date": 1466030422, "question_id": 37845819, "link": "https://stackoverflow.com/questions/37845819/python-unique-list-based-on-part-of-file-path", "title": "Python: Unique list (based on part of file path)", "body": "<p>Sorry; I know there are a thousand 'make unique list' threads. I've tried to solve this on my own, or to hack another \"make unique list\" solution, but I've been unsuccessful with my not amazing python skills.</p>\n\n<p>I have a list of video file names (these are shots in a movie).  For any given shot I want to remove duplicates, based on part of the path (circled in red in the image below); only the one with the highest <strong>tk_</strong>value  should end up in the final list.</p>\n\n<p><em>e.g  In the image below, for shot <strong>de05_001</strong> only <strong>tk_3</strong> should end up in the list.</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/Ux60I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ux60I.png\" alt=\"enter image description here\"></a></p>\n\n<p>Input (with duplicates):</p>\n\n<pre><code>raw_list = ['D:\\\\de05\\\\de05_001\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_001.POSTVIS.mov', \n'D:\\\\de05\\\\de05_001\\\\postvis\\\\tk_3\\\\blasts\\\\tb205_de05_001.POSTVIS.mov', \n'D:\\\\de05\\\\de05_002\\\\postvis\\\\tk_1\\\\blasts\\\\tb205_de05_002.POSTVIS.mov', \n'D:\\\\de05\\\\de05_017\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_017.POSTVIS.mov', \n'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_019.POSTVIS.mov', \n'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_3\\\\blasts\\\\tb205_de05_019.POSTVIS.mov', \n'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_4\\\\blasts\\\\tb205_de05_019.POSTVIS.mov', \n'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_1\\\\blasts\\\\tb205_de05_019.POSTVIS.mov', ]\n</code></pre>\n\n<p>Output (duplicates removed, only highest tk_ numbers remain):</p>\n\n<pre><code>outputList = ['D:\\\\de05\\\\de05_001\\\\postvis\\\\tk_3\\\\blasts\\\\tb205_de05_001.POSTVIS.mov', \n'D:\\\\de05\\\\de05_002\\\\postvis\\\\tk_1\\\\blasts\\\\tb205_de05_002.POSTVIS.mov', \n'D:\\\\de05\\\\de05_017\\\\postvis\\\\tk_2\\\\blasts\\\\tb205_de05_017.POSTVIS.mov', \n'D:\\\\de05\\\\de05_019\\\\postvis\\\\tk_4\\\\blasts\\\\tb205_de05_019.POSTVIS.mov', ]\n</code></pre>\n\n<p>Any help would be great. Thank you.</p>\n"}, {"tags": ["python", "c++", "boost"], "owner": {"reputation": 11, "user_id": 5675558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f2cb18d18478d3321e520519032b96?s=128&d=identicon&r=PG&f=1", "display_name": "Okan Adal\u0131", "link": "https://stackoverflow.com/users/5675558/okan-adal%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507472972, "creation_date": 1466024817, "last_edit_date": 1507472972, "question_id": 37845781, "link": "https://stackoverflow.com/questions/37845781/boost-python-shared-library-issue-in-specific-case", "title": "Boost python shared library issue in specific case", "body": "<p>I am trying to extend my c++ library which is created using qtcreator to python with boost::python. I create a setup.py like following:</p>\n\n<pre><code>from distutils.core import setup\nfrom distutils.extension import Extension \nmodule1 = Extension('FOO',\n        include_dirs = ['/usr/include/python3.4', '/home/user/cppProjects/FOOLib','/usr/include', '/usr/local/lib/python3.4/dit-packages'],\n        libraries = ['python3.4', 'boost_python-py34', 'boost_thread', 'boost_system', 'FOOLib'],\n        library_dirs = ['/usr/lib/x86_64-linux-gnu/', '/usr/lib/python3.4/config-3.4m-x86_64-linux-gnu/','/home/skywalker/cppProjects/build-FOO-Desktop-Debug/'],       \n        sources = ['pythonprovider.cpp'],\n        extra_compile_args=['-std=c++11'])\nsetup(name=\"PackageName\",\next_modules=[module1])\n</code></pre>\n\n<p>and Bar.h </p>\n\n<pre><code>class Bar\n{\n   public:\n     Bar(boost::python::list args)\n     {\n       ...\n     }\n\n     static void SetN(int n)\n     {\n          Bar::N = n;\n     }\n     static int N;\n};\n</code></pre>\n\n<p>and Bar.cpp</p>\n\n<pre><code>int Bar::N;\n</code></pre>\n\n<p>pythonprovider.cpp is</p>\n\n<pre><code>BOOST_PYTHON_MODULE(FOO)\n{\n   class_&lt;Bar&gt;(\"Bar\", init&lt;list&gt;());\n}\n</code></pre>\n\n<p>Compiling the library and using in c++ app is working fine.\nI am typing the following code in terminal and installation of python module is working fine.</p>\n\n<pre><code>sudo python3 setup.py install\n</code></pre>\n\n<p>Including the package in python like</p>\n\n<pre><code>from FOO import *\n</code></pre>\n\n<p>working fine. But when i modify the pythonprovider.cpp with static method</p>\n\n<pre><code>BOOST_PYTHON_MODULE(FOO)\n{\n   class_&lt;Bar&gt;(\"Bar\", init&lt;list&gt;())\n      .def(\"SetN\", &amp;Bar::SetN)\n      .staticmethod(\"SetN\");\n}\n</code></pre>\n\n<p>compiling and installation working fine but importing the module assert an error</p>\n\n<p>ImportError: libFOO.so.1: cannot open shared object file: No such file or directory</p>\n\n<p>This happen to me before. When i move to body of constructor from cpp file to header file problem is solved but in this case it is not solve my problem.</p>\n"}, {"tags": ["python", "python-imaging-library"], "answers": [{"comments": [{"owner": {"reputation": 2315, "user_id": 6327658, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/H7mTI.jpg?s=128&g=1", "display_name": "fabda01", "link": "https://stackoverflow.com/users/6327658/fabda01"}, "edited": false, "score": 0, "creation_date": 1466025695, "post_id": 37845893, "comment_id": 63152234, "body": "Thanks! Worked perfectly. Only thing I noticed is that both files need to be the same mode (can&#39;t blend greyscale with RGB). Any idea on how to ignore background colors?"}, {"owner": {"reputation": 2315, "user_id": 6327658, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/H7mTI.jpg?s=128&g=1", "display_name": "fabda01", "link": "https://stackoverflow.com/users/6327658/fabda01"}, "edited": false, "score": 0, "creation_date": 1466026962, "post_id": 37845893, "comment_id": 63152803, "body": "Doesn&#39;t seem the prettiest way to do it, but if you convert to grayscale then convert back to RGB, it stay grayscale, but in a RGB mode."}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 7, "last_activity_date": 1466025313, "creation_date": 1466025313, "answer_id": 37845893, "question_id": 37845689, "link": "https://stackoverflow.com/questions/37845689/how-to-change-opacity-of-image-and-merge-with-another-image-in-python/37845893#37845893", "title": "How to change opacity of image and merge with another image in Python", "body": "<p>You have to use <code>blend</code> function from <code>PIL.Image</code>:</p>\n\n<pre><code>from PIL import Image\nbg = Image.open(\"1.jpg\")\nfg = Image.open(\"2.jpg\")\n# set alpha to .7\nImage.blend(bg, fg, .7).save(\"out.png\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QR1Nk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QR1Nk.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2315, "user_id": 6327658, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/H7mTI.jpg?s=128&g=1", "display_name": "fabda01", "link": "https://stackoverflow.com/users/6327658/fabda01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3608, "favorite_count": 2, "accepted_answer_id": 37845893, "answer_count": 1, "score": 5, "last_activity_date": 1466027525, "creation_date": 1466024430, "last_edit_date": 1466027525, "question_id": 37845689, "link": "https://stackoverflow.com/questions/37845689/how-to-change-opacity-of-image-and-merge-with-another-image-in-python", "title": "How to change opacity of image and merge with another image in Python", "body": "<p>I've been looking up on how to put two picture together, turning the top one to around 50% transparent.</p>\n\n<p>So far, I managed to find this:</p>\n\n<pre><code>from PIL import Image\n\ndef merge():\n    background = Image.open(\"ib.jpg\")\n    background = background .convert('L') #only foreground color matters\n    foreground = Image.open(\"if.jpg\")\n\n    background.paste(foreground, (0, 0), foreground)\n    background.show()\n</code></pre>\n\n<p>But it only outputs a blank image. </p>\n\n<p>Both are same sizes.</p>\n\n<p>ib.jpg:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KKJ4p.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KKJ4p.jpg\" alt=\"ib.jpg\"></a></p>\n\n<p>if.jpg:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0e979.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0e979.jpg\" alt=\"if.jpg\"></a></p>\n\n<p>desired output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SYOGF.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SYOGF.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Any tips for a way to do this either with a RGB or RGBA file? I should be dealing with both types (some, in fact, have alpha layer).</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "datetime", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "is_accepted": false, "score": 0, "last_activity_date": 1466025417, "creation_date": 1466025417, "answer_id": 37845918, "question_id": 37845617, "link": "https://stackoverflow.com/questions/37845617/group-by-interval-of-datetime-using-pandas/37845918#37845918", "title": "Group by interval of datetime using pandas", "body": "<p>you need to <code>set_index</code> first\ncheck that <code>df.index</code> is a <strong>Datetimeindex</strong>. If not, that's the cause of the error</p>\n"}, {"comments": [{"owner": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "edited": false, "score": 0, "creation_date": 1466029002, "post_id": 37845960, "comment_id": 63153542, "body": "It delete url to next second"}, {"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "reply_to_user": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "edited": false, "score": 0, "creation_date": 1466030630, "post_id": 37845960, "comment_id": 63154040, "body": "Sorry had overlooked some detail in your question - see update now including <code>&#39;id&#39;</code> and <code>&#39;subdomain&#39;</code>."}, {"owner": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "edited": false, "score": 0, "creation_date": 1466106393, "post_id": 37845960, "comment_id": 63193050, "body": "It looks very well! I want ask you, if I have domain, that I don&#39;t want to consider, I want to see all visits, Is it possible to do?"}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1466030595, "last_edit_date": 1466030595, "creation_date": 1466025573, "answer_id": 37845960, "question_id": 37845617, "link": "https://stackoverflow.com/questions/37845617/group-by-interval-of-datetime-using-pandas/37845960#37845960", "title": "Group by interval of datetime using pandas", "body": "<p>You need to parse <code>data</code> using <code>pd.to_datetime()</code> with appropriate <code>format</code> settings and use the result as <code>index</code>. Then <code>.groupby()</code> while resampling to <code>5Min</code> intervals:</p>\n\n<pre><code>df.index = pd.to_datetime(df.data, format='%d/%b/%Y:%H:%M:%S')\ndf.groupby(pd.TimeGrouper('5Min')).apply(lambda x: x.groupby(['id', 'subdomain']).first())\n\n                                                           data  \\\ndata                id    subdomain                               \n2016-06-13 06:25:00 3845  api.weather.com  13/Jun/2016:06:27:27   \n                    30055 api.weather.com  13/Jun/2016:06:27:26   \n                          facebook.com     13/Jun/2016:06:27:28   \n\n                                                                                         url  \\\ndata                id    subdomain                                                            \n2016-06-13 06:25:00 3845  api.weather.com  https://api.weather.com/v1/geocode/54.970001/7...   \n                    30055 api.weather.com  https://api.weather.com/v1/geocode/55.740002/3...   \n                          facebook.com                                  https://facebook.com   \n\n                                            size        domain  \ndata                id    subdomain                             \n2016-06-13 06:25:00 3845  api.weather.com  30055   weather.com  \n                    30055 api.weather.com   3929   weather.com  \n                          facebook.com      4005  facebook.com \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "edited": false, "score": 0, "creation_date": 1466028906, "post_id": 37846118, "comment_id": 63153505, "body": "I need to get url that use at first in every 5 minute to every id"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "edited": false, "score": 0, "creation_date": 1466029161, "post_id": 37846118, "comment_id": 63153585, "body": "You can use: <code>df1.groupby(pd.TimeGrouper(&quot;5Min&quot;)).agg({&quot;url&quot;: &quot;first&quot;})</code>."}, {"owner": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "edited": false, "score": 0, "creation_date": 1466029429, "post_id": 37846118, "comment_id": 63153682, "body": "but it is to all id, I need to consider that"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "edited": false, "score": 0, "creation_date": 1466029888, "post_id": 37846118, "comment_id": 63153815, "body": "oh, I see, there was a typo in your question, but that makes sense: <code>df1.groupby([pd.TimeGrouper(&quot;5Min&quot;), &quot;id&quot;]).agg({&quot;url&quot;: &quot;first&quot;})</code>"}], "tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": false, "score": 1, "last_activity_date": 1466026212, "creation_date": 1466026212, "answer_id": 37846118, "question_id": 37845617, "link": "https://stackoverflow.com/questions/37845617/group-by-interval-of-datetime-using-pandas/37846118#37846118", "title": "Group by interval of datetime using pandas", "body": "<p>Note to convert to datetime you can pass the following format:</p>\n\n<pre><code>df['data'] = pd.to_datetime(df['data'], format=\"%d/%b/%Y:%H:%M:%S\")\n</code></pre>\n\n<p>Now you can use the groupby:</p>\n\n<pre><code>In [11]: df1 = df.set_index(\"data\")\n\nIn [12]: df1.groupby(pd.TimeGrouper(\"5Min\")).sum()\nOut[12]:\n                         id   size\ndata\n2016-06-13 06:25:00  124065  45748\n</code></pre>\n\n<p>This is better written as a resample:</p>\n\n<pre><code>In [13]: df1.resample(\"5Min\").sum()\nOut[13]:\n                         id   size\ndata\n2016-06-13 06:25:00  124065  45748\n</code></pre>\n"}], "owner": {"reputation": 3190, "user_id": 6327741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/57b6e60a268c3e89c02373202feb7265?s=128&d=identicon&r=PG&f=1", "display_name": "Arseniy Krupenin", "link": "https://stackoverflow.com/users/6327741/arseniy-krupenin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2333, "favorite_count": 0, "accepted_answer_id": 37845960, "answer_count": 3, "score": 5, "last_activity_date": 1466030595, "creation_date": 1466024166, "question_id": 37845617, "link": "https://stackoverflow.com/questions/37845617/group-by-interval-of-datetime-using-pandas", "title": "Group by interval of datetime using pandas", "body": "<p>I have data </p>\n\n<pre><code>data    id  url size    domain  subdomain\n13/Jun/2016:06:27:26    30055   https://api.weather.com/v1/geocode/55.740002/37.610001/aggregate.json?apiKey=e45ff1b7c7bda231216c7ab7c33509b8&amp;products=conditionsshort,fcstdaily10short,fcsthourly24short,nowlinks  3929    weather.com api.weather.com\n13/Jun/2016:06:27:26    30055   https://api.weather.com/v1/geocode/54.720001/20.469999/aggregate.json?apiKey=e45ff1b7c7bda231216c7ab7c33509b8&amp;products=conditionsshort,fcstdaily10short,fcsthourly24short,nowlinks  3845    weather.com api.weather.com\n13/Jun/2016:06:27:27    3845    https://api.weather.com/v1/geocode/54.970001/73.370003/aggregate.json?apiKey=e45ff1b7c7bda231216c7ab7c33509b8&amp;products=conditionsshort,fcstdaily10short,fcsthourly24short,nowlinks  30055   weather.com api.weather.com\n13/Jun/2016:06:27:27    30055   https://api.weather.com/v1/geocode/59.919998/30.219999/aggregate.json?apiKey=e45ff1b7c7bda231216c7ab7c33509b8&amp;products=conditionsshort,fcstdaily10short,fcsthourly24short,nowlinks  3914    weather.com api.weather.com\n13/Jun/2016:06:27:28    30055   https://facebook.com    4005    facebook.com    facebook.com\n</code></pre>\n\n<p>I need to group it with interval 5 minutes. \nDesire output</p>\n\n<pre><code> data   id  url size    domain  subdomain\n13/Jun/2016:06:27:26    30055   https://api.weather.com/v1/geocode/55.740002/37.610001/aggregate.json?apiKey=e45ff1b7c7bda231216c7ab7c33509b8&amp;products=conditionsshort,fcstdaily10short,fcsthourly24short,nowlinks  3929    weather.com api.weather.com\n13/Jun/2016:06:27:27    3845    https://api.weather.com/v1/geocode/54.970001/73.370003/aggregate.json?apiKey=e45ff1b7c7bda231216c7ab7c33509b8&amp;products=conditionsshort,fcstdaily10short,fcsthourly24short,nowlinks  30055   weather.com api.weather.com\n13/Jun/2016:06:27:28    30055   https://facebook.com    4005    facebook.com    facebook.com\n</code></pre>\n\n<p>I need to groupby <code>id, subdomain</code> and establish interval <code>5min</code>\nI try use </p>\n\n<pre><code>print df.groupby([df['data'],pd.TimeGrouper(freq='Min')])\n</code></pre>\n\n<p>to group first with minute, but it return <code>TypeError: Only valid with DatetimeIndex, TimedeltaIndex or PeriodIndex, but got an instance of 'RangeIndex'</code></p>\n"}, {"tags": ["python", "classification", "cross-validation", "xgboost"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4454384, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/756937784/picture?type=large", "display_name": "Pierpaolo Necchi", "link": "https://stackoverflow.com/users/4454384/pierpaolo-necchi"}, "edited": false, "score": 1, "creation_date": 1466029002, "post_id": 37846661, "comment_id": 63153543, "body": "This solved my problem. I previously tried to set <code>num_class</code> in the XGBClassifier initialization but it didn&#39;t recognize the argument. Many thanks!"}, {"owner": {"reputation": 4712, "user_id": 2468113, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1552a75f9fd4f6850d3bedc930597b68?s=128&d=identicon&r=PG", "display_name": "sapo_cosmico", "link": "https://stackoverflow.com/users/2468113/sapo-cosmico"}, "edited": false, "score": 1, "creation_date": 1473633891, "post_id": 37846661, "comment_id": 66205012, "body": "I don&#39;t follow, when I add that to the param grid I get  <code>ValueError: Invalid parameter num_class for estimator XGBClassifier. Check the list of available parameters with </code>estimator.get_params().keys().`"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6996876"}, "reply_to_user": {"reputation": 4712, "user_id": 2468113, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1552a75f9fd4f6850d3bedc930597b68?s=128&d=identicon&r=PG", "display_name": "sapo_cosmico", "link": "https://stackoverflow.com/users/2468113/sapo-cosmico"}, "edited": false, "score": 0, "creation_date": 1473663621, "post_id": 37846661, "comment_id": 66211633, "body": "@sapo_cosmico this error doesn&#39;t come from XGBoost but from Sklearn and in the Sklearn XGB API you do not need to specify the num_class parameter explicitly. Anyway this is not the appropriate post for your comment: ask a separate question and delete the above comment from here."}, {"owner": {"reputation": 5443, "user_id": 4068678, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-swupfdjNFhY/AAAAAAAAAAI/AAAAAAAAACI/4mU53lBQFrQ/photo.jpg?sz=128", "display_name": "LetsPlayYahtzee", "link": "https://stackoverflow.com/users/4068678/letsplayyahtzee"}, "edited": false, "score": 1, "creation_date": 1476817477, "post_id": 37846661, "comment_id": 67503659, "body": "I think this answer doesn&#39;t adequately face the issue, how is someone supposed to set the parameter is not explained. The error related to the sklearn wrapper but a lot of people have that issue and the solution is not apparent."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6996876"}, "reply_to_user": {"reputation": 5443, "user_id": 4068678, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-swupfdjNFhY/AAAAAAAAAAI/AAAAAAAAACI/4mU53lBQFrQ/photo.jpg?sz=128", "display_name": "LetsPlayYahtzee", "link": "https://stackoverflow.com/users/4068678/letsplayyahtzee"}, "edited": false, "score": 4, "creation_date": 1476868400, "post_id": 37846661, "comment_id": 67523874, "body": "@LetsPlayYahtzee <code>how is someone supposed to set the parameter is not explained</code> This way: <code>xgb_param[\u2018num_class\u2019] = k #k = number of classes</code> and that&#39;s the answer to the original question. <code>The error related to the sklearn</code> <b>Not</b> the error in the <b>OP question</b>, but the error in <b>another one&#39;s comment</b>."}, {"owner": {"reputation": 4723, "user_id": 2145138, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/96d2ac643babeaa845716a6448b5b2ed?s=128&d=identicon&r=PG", "display_name": "MTT", "link": "https://stackoverflow.com/users/2145138/mtt"}, "edited": false, "score": 2, "creation_date": 1476997359, "post_id": 37846661, "comment_id": 67597725, "body": "This is totally wrong answer! API (<a href=\"http://xgboost.readthedocs.io/en/latest//python/python_api.html#module-xgboost.sklearn\" rel=\"nofollow noreferrer\">xgboost.readthedocs.io/en/latest//python/&hellip;</a>) is saying {num_class} is not part of the parameters! How he set it up?"}, {"owner": {"reputation": 589, "user_id": 3408299, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/0HP9u.jpg?s=128&g=1", "display_name": "RockTheStar", "link": "https://stackoverflow.com/users/3408299/rockthestar"}, "reply_to_user": {"reputation": 4723, "user_id": 2145138, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/96d2ac643babeaa845716a6448b5b2ed?s=128&d=identicon&r=PG", "display_name": "MTT", "link": "https://stackoverflow.com/users/2145138/mtt"}, "edited": false, "score": 1, "creation_date": 1484292921, "post_id": 37846661, "comment_id": 70459133, "body": "@MTT yes, I am confused too."}, {"owner": {"reputation": 447, "user_id": 7421447, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155038341366414/picture?type=large", "display_name": "Michael Schroter", "link": "https://stackoverflow.com/users/7421447/michael-schroter"}, "edited": false, "score": 0, "creation_date": 1554945314, "post_id": 37846661, "comment_id": 97939504, "body": "@user6996876 So, just to make things clear you need to change <code>xgb_param = alg.get_xgb_params()</code> (thrid line inside the function) to <code>xgb_param[\u2018num_class\u2019] = k</code>. Would you be able to check this please.   Thanks   Michael"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6996876"}, "is_accepted": true, "score": 3, "last_activity_date": 1466028678, "creation_date": 1466028678, "answer_id": 37846661, "question_id": 37845920, "link": "https://stackoverflow.com/questions/37845920/cross-validation-on-xgbclassifier-for-multiclass-classification-in-python/37846661#37846661", "title": "Cross-validation on XGBClassifier for multiclass classification in python", "body": "<p>You have to add the parameter \u2018num_class\u2019 to the xgb_param dictionary. This is also mentioned in the parameters description and in a comment from the link you provided above.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://statistics.stackexchange.com", "http://crossvalidated.com"], "markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1288900046, "open_beta_date": 1280170800, "closed_beta_date": 1279566000, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/stats/Img/apple-touch-icon@2.png", "twitter_account": "StackStats", "favicon_url": "https://cdn.sstatic.net/Sites/stats/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/stats/Img/apple-touch-icon.png", "audience": "people interested in statistics, machine learning, data analysis, data mining, and data visualization", "site_url": "https://stats.stackexchange.com", "api_site_parameter": "stats", "logo_url": "https://cdn.sstatic.net/Sites/stats/Img/logo.png", "name": "Cross Validated", "site_type": "main_site"}, "on_date": 1466025423, "question_id": 219083}, "owner": {"reputation": 165, "user_id": 4454384, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/756937784/picture?type=large", "display_name": "Pierpaolo Necchi", "link": "https://stackoverflow.com/users/4454384/pierpaolo-necchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11266, "favorite_count": 5, "accepted_answer_id": 37846661, "answer_count": 1, "score": 5, "last_activity_date": 1466028678, "creation_date": 1466024063, "last_edit_date": 1466026860, "question_id": 37845920, "link": "https://stackoverflow.com/questions/37845920/cross-validation-on-xgbclassifier-for-multiclass-classification-in-python", "title": "Cross-validation on XGBClassifier for multiclass classification in python", "body": "<p>I'm trying to perform cross-validation on a XGBClassifier for a multi-class classification problem using the following code adapted from <a href=\"http://www.analyticsvidhya.com/blog/2016/03/complete-guide-parameter-tuning-xgboost-with-codes-python/\" rel=\"noreferrer\">http://www.analyticsvidhya.com/blog/2016/03/complete-guide-parameter-tuning-xgboost-with-codes-python/</a></p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport xgboost as xgb\nfrom xgboost.sklearn import  XGBClassifier\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn import cross_validation, metrics\nfrom sklearn.grid_search import GridSearchCV\n\n\ndef modelFit(alg, X, y, useTrainCV=True, cvFolds=5, early_stopping_rounds=50):\n    if useTrainCV:\n        xgbParams = alg.get_xgb_params()\n        xgTrain = xgb.DMatrix(X, label=y)\n        cvresult = xgb.cv(xgbParams,\n                      xgTrain,\n                      num_boost_round=alg.get_params()['n_estimators'],\n                      nfold=cvFolds,\n                      stratified=True,\n                      metrics={'mlogloss'},\n                      early_stopping_rounds=early_stopping_rounds,\n                      seed=0,\n                      callbacks=[xgb.callback.print_evaluation(show_stdv=False),                                                               xgb.callback.early_stop(3)])\n\n        print cvresult\n        alg.set_params(n_estimators=cvresult.shape[0])\n\n    # Fit the algorithm\n    alg.fit(X, y, eval_metric='mlogloss')\n\n    # Predict\n    dtrainPredictions = alg.predict(X)\n    dtrainPredProb = alg.predict_proba(X)\n\n    # Print model report:\n    print \"\\nModel Report\"\n    print \"Classification report: \\n\"\n    print(classification_report(y_val, y_val_pred))\n    print \"Accuracy : %.4g\" % metrics.accuracy_score(y, dtrainPredictions)\n    print \"Log Loss Score (Train): %f\" % metrics.log_loss(y, dtrainPredProb)\n    feat_imp = pd.Series(alg.booster().get_fscore()).sort_values(ascending=False)\n    feat_imp.plot(kind='bar', title='Feature Importances')\n    plt.ylabel('Feature Importance Score')\n\n\n# 1) Read training set\nprint('&gt;&gt; Read training set')\ntrain = pd.read_csv(trainFile)\n\n# 2) Extract target attribute and convert to numeric\nprint('&gt;&gt; Preprocessing')\ny_train = train['OutcomeType'].values\nle_y = LabelEncoder()\ny_train = le_y.fit_transform(y_train)\ntrain.drop('OutcomeType', axis=1, inplace=True)\n\n# 4) Extract features and target from training set\nX_train = train.values\n\n# 5) First classifier\nxgb = XGBClassifier(learning_rate =0.1,\n                    n_estimators=1000,\n                    max_depth=5,\n                    min_child_weight=1,\n                    gamma=0,\n                    subsample=0.8,\n                    colsample_bytree=0.8,\n                    scale_pos_weight=1,\n                    objective='multi:softprob',\n                    seed=27)\n\nmodelFit(xgb, X_train, y_train)\n</code></pre>\n\n<p>where <code>y_train</code> contains labels from 0 to 4. However, when I run this code I get the following error from the <code>xgb.cv</code> function <code>xgboost.core.XGBoostError: value 0for Parameter num_class should be greater equal to 1</code>. On the XGBoost doc I read that in the multiclass case xgb extrapolates the number of classes from the labels in the target vector, so I don't understand what is going on.  </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1466024208, "post_id": 37845582, "comment_id": 63151501, "body": "What&#39;s the end goal? You can do <code>i = l1.index(4)</code> and then <code>l1[i+1]</code> but this only gives you back index for the first match (<code>[&#39;a&#39;, &#39;b&#39;, &#39;a&#39;].index(&#39;a&#39;)</code> is <code>0</code>). What are you trying to do?"}, {"owner": {"reputation": 81, "user_id": 6019061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1924d4fddebd7f04738dee1ca50f7b62?s=128&d=identicon&r=PG&f=1", "display_name": "siddpro", "link": "https://stackoverflow.com/users/6019061/siddpro"}, "reply_to_user": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1466024507, "post_id": 37845582, "comment_id": 63151682, "body": "I want to print i th element and using that its index i want to print i+1 th element"}, {"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1466024572, "post_id": 37845582, "comment_id": 63151716, "body": "What if <code>i</code>th element is the last one?"}, {"owner": {"reputation": 1932, "user_id": 3991782, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/cobzl.jpg?s=128&g=1", "display_name": "gr1zzly be4r", "link": "https://stackoverflow.com/users/3991782/gr1zzly-be4r"}, "edited": false, "score": 1, "creation_date": 1466024651, "post_id": 37845582, "comment_id": 63151748, "body": "This question is confusing to me. I would think that you&#39;d want <code>print l1[l1[index]]</code> but I don&#39;t think that that&#39;s what you want?"}, {"owner": {"reputation": 81, "user_id": 6019061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1924d4fddebd7f04738dee1ca50f7b62?s=128&d=identicon&r=PG&f=1", "display_name": "siddpro", "link": "https://stackoverflow.com/users/6019061/siddpro"}, "edited": false, "score": 0, "creation_date": 1466024723, "post_id": 37845582, "comment_id": 63151788, "body": "thats the other thing but i asked this question to perform some other task where i dont have to worry about this condition"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1466025133, "post_id": 37845582, "comment_id": 63151974, "body": "I don&#39;t get it, what is wrong with the code example you have? if you want to show the element in index 3 then do <code>index=3</code>, and <code>index2</code> will be the element after... What are you having trouble with?"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6019061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1924d4fddebd7f04738dee1ca50f7b62?s=128&d=identicon&r=PG&f=1", "display_name": "siddpro", "link": "https://stackoverflow.com/users/6019061/siddpro"}, "edited": false, "score": 0, "creation_date": 1466024847, "post_id": 37845769, "comment_id": 63151836, "body": "well let me try this one"}], "tags": [], "owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "is_accepted": true, "score": 0, "last_activity_date": 1466025047, "last_edit_date": 1466025047, "creation_date": 1466024763, "answer_id": 37845769, "question_id": 37845582, "link": "https://stackoverflow.com/questions/37845582/list-iteration-using-index-of-the-list-element/37845769#37845769", "title": "list iteration using index of the list element", "body": "<p>Here's an approach using <a href=\"https://docs.python.org/3/library/functions.html#enumerate\" rel=\"nofollow\"><code>enumerate</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; l1 = [1, 2, 3, 4, 5]\n&gt;&gt;&gt; for i, elem in enumerate(l1):\n...     print 'Current', elem\n...     try:\n...         print 'Next', l1[i+1]\n...     except IndexError:\n...         print '%d is the last item in the list' % elem\n...         \n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>Current 1\nNext 2\nCurrent 2\nNext 3\nCurrent 3\nNext 4\nCurrent 4\nNext 5\nCurrent 5\nNext 5 is the last item in the list\n&gt;&gt;&gt; \n</code></pre>\n\n<p>You could also start enumerating at index 1 and not add to index when looking up the next item:</p>\n\n<pre><code>&gt;&gt;&gt; for i, elem in enumerate(l1, start=1):\n...     print 'Current', elem\n...     try:\n...         print 'Next', l1[i]\n...     except IndexError:\n...         print '%d is the last item in the list' % elem\n...         \nCurrent 1\nNext 2\nCurrent 2\nNext 3\nCurrent 3\nNext 4\nCurrent 4\nNext 5\nCurrent 5\nNext 5 is the last item in the list\n&gt;&gt;&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 1, "creation_date": 1466025197, "post_id": 37845841, "comment_id": 63152001, "body": "Maybe OP will, in explaining why this is wrong, shed more light on his requirement."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1466025089, "creation_date": 1466025089, "answer_id": 37845841, "question_id": 37845582, "link": "https://stackoverflow.com/questions/37845582/list-iteration-using-index-of-the-list-element/37845841#37845841", "title": "list iteration using index of the list element", "body": "<blockquote>\n  <p>I want program to get the 2nd element i.e 3 and using its index i want to find 3rd element.</p>\n</blockquote>\n\n<pre><code>i = 1         # Get the 2nd element\nprint l1[i+1] # Using its index find the 3rd element.\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6019061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1924d4fddebd7f04738dee1ca50f7b62?s=128&d=identicon&r=PG&f=1", "display_name": "siddpro", "link": "https://stackoverflow.com/users/6019061/siddpro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 37845769, "answer_count": 2, "score": -4, "last_activity_date": 1466025089, "creation_date": 1466024045, "question_id": 37845582, "link": "https://stackoverflow.com/questions/37845582/list-iteration-using-index-of-the-list-element", "title": "list iteration using index of the list element", "body": "<p>I want to access list items in a specific way. for an example</p>\n\n<pre><code>l1 =[1,2,3,4,5]\n</code></pre>\n\n<p>now i want to access 3rd element in the list i.e 4 but i want the result in specific way.</p>\n\n<p>I want program to get the 2nd element i.e 3 and using its index i want to find 3rd element.</p>\n\n<p>in short </p>\n\n<pre><code>print l1[index]\n\nindex2 = index+1\n\nprint l1[index2]\n</code></pre>\n\n<p>how can i accomplish this task? is there any other efficient way to do this task?</p>\n\n<p>thank you</p>\n"}, {"tags": ["python", "oop"], "answers": [{"tags": [], "owner": {"reputation": 885, "user_id": 2746752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/adc5762c7d5b7e1e6168721bae570432?s=128&d=identicon&r=PG&f=1", "display_name": "user2746752", "link": "https://stackoverflow.com/users/2746752/user2746752"}, "is_accepted": false, "score": 1, "last_activity_date": 1466023957, "creation_date": 1466023957, "answer_id": 37845556, "question_id": 37845523, "link": "https://stackoverflow.com/questions/37845523/instantiating-a-class-in-python-and-error-points-at-variable-name/37845556#37845556", "title": "Instantiating a class in python and error points at variable name", "body": "<p>You forgot a ')' at the end of this line:</p>\n\n<pre><code>def sigmoid(z):\n    return 1/(1+np.exp(-z)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50, "user_id": 5037424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee354a180524ea0300ffcf1df9659ae2?s=128&d=identicon&r=PG&f=1", "display_name": "chrishorton", "link": "https://stackoverflow.com/users/5037424/chrishorton"}, "edited": false, "score": 0, "creation_date": 1466024476, "post_id": 37845557, "comment_id": 63151671, "body": "Perfect, solved my problem thank you!"}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1466023957, "creation_date": 1466023957, "answer_id": 37845557, "question_id": 37845523, "link": "https://stackoverflow.com/questions/37845523/instantiating-a-class-in-python-and-error-points-at-variable-name/37845557#37845557", "title": "Instantiating a class in python and error points at variable name", "body": "<p>This line</p>\n\n<pre><code>    return 1/(1+np.exp(-z)\n</code></pre>\n\n<p>Is missing a close parenthesis. Try this:</p>\n\n<pre><code>    return 1/(1+np.exp(-z))\n</code></pre>\n\n<p>Often times, otherwise unexplainable \"syntax error\" messages are the result of errors in the <em>previous</em> line(s).</p>\n"}], "owner": {"reputation": 50, "user_id": 5037424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee354a180524ea0300ffcf1df9659ae2?s=128&d=identicon&r=PG&f=1", "display_name": "chrishorton", "link": "https://stackoverflow.com/users/5037424/chrishorton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1467278828, "accepted_answer_id": 37845557, "answer_count": 2, "score": -1, "last_activity_date": 1466024083, "creation_date": 1466023829, "last_edit_date": 1466023900, "question_id": 37845523, "link": "https://stackoverflow.com/questions/37845523/instantiating-a-class-in-python-and-error-points-at-variable-name", "closed_reason": "Not suitable for this site", "title": "Instantiating a class in python and error points at variable name", "body": "<p>I am following a youtube tutorial on creating a neural network. I came across this error while attempting to instantiate my class to check that everything was working </p>\n\n<pre><code>  File \"neuralnet.py\", line 24\n  n = Neural_Network(X)\n  ^\n  SyntaxError: invalid syntax \n</code></pre>\n\n<p>My code is here,</p>\n\n<pre><code>class Neural_Network(object):\n\n    def __init__(self):\n        self.inputLayerSize = 2\n        self.outputLayerSize = 1\n        self.hiddenLayerSize = 3\n        self.W1 = np.random.randn(self.inputLayerSize, \\\n                                  self.hiddenLayerSize)\n        self.W2 = np.random.randn(self.hiddenLayerSize, \\\n                                  self.outputLayerSize)\n\n    def forward(self, X):\n        # Propogation\n        self.z2 = np.dot(X, self.W1)\n        self.a2 = self.sigmoid(self.z2)\n        self.z3 = np.dot(self.a2, self.W2)\n        yHat = self.sigmoid(self.z3)\n        return yHat\n\n    def sigmoid(z):\n        return 1/(1+np.exp(-z)\n\n    n = Neural_Network()\n    yHat = NN.forward(X)\n    print(yHat)\n</code></pre>\n\n<p>It's probably something that I'm missing. I attempted to pass X into the instantiation of n and it still didn't work. I am using python 2.X.</p>\n"}, {"tags": ["python", "class", "wxpython", "attributeerror"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466024101, "post_id": 37845520, "comment_id": 63151432, "body": "You&#39;re forgetting to use <code>self</code> all over the place."}, {"owner": {"reputation": 63, "user_id": 6390214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5fbbc3d6c50884c8138ddd769d6c55bd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Elkman", "link": "https://stackoverflow.com/users/6390214/alex-elkman"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466024557, "post_id": 37845520, "comment_id": 63151709, "body": "Ohh gotcha... yeah I find it a bit confusing when I need to use self and when I don&#39;t. Can you provide me with an explanation? I changed the objects to have self in front and it now works. Appreciate your insight."}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1466025211, "post_id": 37845520, "comment_id": 63152007, "body": "See <a href=\"http://stackoverflow.com/questions/2709821/what-is-the-purpose-of-self-in-python\">What is the purpose of self in Python?</a>"}, {"owner": {"reputation": 63, "user_id": 6390214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5fbbc3d6c50884c8138ddd769d6c55bd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Elkman", "link": "https://stackoverflow.com/users/6390214/alex-elkman"}, "edited": false, "score": 0, "creation_date": 1466026351, "post_id": 37845520, "comment_id": 63152523, "body": "Thanks I&#39;ll give that a read."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 6390214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5fbbc3d6c50884c8138ddd769d6c55bd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Elkman", "link": "https://stackoverflow.com/users/6390214/alex-elkman"}, "is_accepted": true, "score": 0, "last_activity_date": 1466026401, "creation_date": 1466026401, "answer_id": 37846158, "question_id": 37845520, "link": "https://stackoverflow.com/questions/37845520/wxpython-attribute-error-class-has-no-attribute-class-object/37846158#37846158", "title": "wxPython: Attribute Error *class* has no attribute *class_object*", "body": "<p>As pointed out by @user2357112, I had failed to use 'self' correctly to reference the objects within my Class. </p>\n\n<p>For more information, see the link provided by @rrauenza in the comments section above.</p>\n"}], "owner": {"reputation": 63, "user_id": 6390214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5fbbc3d6c50884c8138ddd769d6c55bd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Elkman", "link": "https://stackoverflow.com/users/6390214/alex-elkman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 37846158, "answer_count": 1, "score": 1, "last_activity_date": 1466026401, "creation_date": 1466023815, "question_id": 37845520, "link": "https://stackoverflow.com/questions/37845520/wxpython-attribute-error-class-has-no-attribute-class-object", "title": "wxPython: Attribute Error *class* has no attribute *class_object*", "body": "<p>I am aware this might be considered a 'repeat question' however, I haven't found a similar question that answers my predicament, all the other folks with the same error had different looking code organization than mine.</p>\n\n<p>I made a class for my dateFrame window and put a button in it, and OnClick() I want to call GetValue() from toCtrl and fromCtrl, but for some reason I keep getting attribute errors. Not sure where I've went wrong. OnClick() should be in the correct scope of the class to work with the objects from it.</p>\n\n<p>Keep getting error:</p>\n\n<pre><code>AttributeError: 'dateFrame' object has no attribute 'toCtrl'\n</code></pre>\n\n<p>Here is my class dateFrame():</p>\n\n<pre><code>class dateFrame(wx.Frame):\n    global toText, fromText\n    def __init__(self):\n\n\n        wx.Frame.__init__(self, None, -1, 'Date Search', size=(350, 150))\n        panel = wx.Panel(self, -1) \n        fromLabel = wx.StaticText(panel, -1, \"From Date:\", (300, 500), (110, -1), wx.ALIGN_CENTER)\n        fromCtrl = wx.TextCtrl(panel, -1, \"Example: 1/11/11\", style=wx.TE_CENTRE, size=(150, -1))\n\n        toLabel = wx.StaticText(panel, -1, \"To Date:\", (100, 200), (110, -1), wx.ALIGN_CENTER)\n\n\n        toCtrl = wx.TextCtrl(panel, -1, \"Example: 2/22/22\", style=wx.TE_CENTRE, size=(150, -1))\n        sizer = wx.FlexGridSizer(cols=2, rows = 3, hgap=6, vgap=6)\n        sizer.AddMany([fromLabel, fromCtrl, toLabel, toCtrl])\n\n        #sizer1.AddStretchSpacer(1)\n        #sizer1.Add(panel, 0, wx.ALIGN_CENTER)\n        #sizer1.AddStretchSpacer(1)\n        #self.SetSizer(sizer1)\n\n        panel.SetSizer(sizer)    \n\n        b = wx.Button(panel, 10, \"Search\", (120, 70))\n        panel.Bind(wx.EVT_BUTTON, self.OnClick, b)\n        b.SetDefault()\n        b.SetSize(b.GetBestSize())\n\n\n    def OnClick(self, event):\n        global frame, dFrame\n        toText = self.toCtrl.GetValue()\n        fromText = self.fromCtrl.GetValue()\n\n        frame.Destroy()\n        frame = TestFrame(None, sys.stdout)\n        frame.Show(True)\n        dFrame.Destroy()\n</code></pre>\n"}, {"tags": ["python", "file", "python-3.x"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1466023936, "post_id": 37845489, "comment_id": 63151340, "body": "I have a feeling this might be an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> and that you may do well by looking into data serialization modules like <a href=\"https://docs.python.org/2/library/json.html\" rel=\"nofollow noreferrer\"><code>json</code></a> or <a href=\"https://docs.python.org/2/library/pickle.html#module-pickle\" rel=\"nofollow noreferrer\"><code>pickle</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 6364767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/igxoH.jpg?s=128&g=1", "display_name": "Artemis", "link": "https://stackoverflow.com/users/6364767/artemis"}, "is_accepted": true, "score": 1, "last_activity_date": 1466026294, "last_edit_date": 1466026294, "creation_date": 1466025984, "answer_id": 37846061, "question_id": 37845489, "link": "https://stackoverflow.com/questions/37845489/python-3-how-to-add-text-to-chosen-line-in-a-txt-document-using-append/37846061#37846061", "title": "Python 3 how to add text to chosen line in a txt document using append", "body": "<p>The best way to store data to store some kind of user informations is Serialization. You have several modules including Pickle (which serialize the object into a binary file, and later can deserialize this object by reading the file, giving you the exact same object as it was before serialization), or Json.</p>\n\n<p>If you're looking for a good solution, but still want to be able to clearly read data (Since Pickle is storing the data as a binary entity object, you can't read it clearly), use JSON.</p>\n\n<p>It's very simple for this basic use :</p>\n\n<p>If you have for example this same structure as you showed before:</p>\n\n<pre><code>User 1 scores:\n15,\nUser 2 scores:\n20,\n</code></pre>\n\n<p>You can make it as a dictionary, for example like that:</p>\n\n<pre><code>scores = {\n    'User 1': 15,\n    'User 2': 20,\n}\n</code></pre>\n\n<p>Which makes it even easier to edit and use, since to access the User 1 score, all you need to type is <code>scores['User 1']</code>.</p>\n\n<p>Now, for the serialization part of this dictionary, to save it into a file, you can obtain a serialized string representing the dict using the <code>json.dumps(&lt;your array&gt;)</code> function. Used like that:</p>\n\n<pre><code>import json\ndictionary = { 'User 1': 15, 'User 2': 20 }\nprint(json.dumps(dictionary))\n</code></pre>\n\n<p>The print will show you how it's represented. As a JSON compliant file.\nYou just need a simple <code>file.write()</code> to save it, and a <code>file.read()</code> to retrieve it.</p>\n\n<p>(After test, using json.dumps on your example give me that: <code>{\"User 2\": 20, \"User 1\": 15}</code>)</p>\n\n<p>To retrieve that data, you'll need to use the <code>json.loads(&lt;json string&gt;)</code> function.</p>\n\n<pre><code>import json\n# As you can see, string representation of json.\ndictionary = json.loads(\"{\"User 2\": 20, \"User 1\": 15}\")\n</code></pre>\n\n<p>Your dict is now loaded &amp; saved !</p>\n\n<p>More infos on File IO here: <a href=\"http://www.tutorialspoint.com/python3/python_files_io.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/python3/python_files_io.htm</a></p>\n\n<p>More infos on JSON Python native API here: <a href=\"https://docs.python.org/3/library/json.html\" rel=\"nofollow\">https://docs.python.org/3/library/json.html</a></p>\n\n<p>Hope that helps !</p>\n\n<p>EDIT:</p>\n\n<p>For your information, Python native file IO module only give 1 function to change the position of the read buffer in the file, and that function is <code>file.seek()</code> function, that moves you into a specific byte in the file. (you need to pass the byte address as a function parameter, for example <code>file.seek(0, 0)</code> will position you at the beginning of the file). </p>\n\n<p>You can get your position in the file using <code>file.tell()</code> function.</p>\n"}], "owner": {"reputation": 180, "user_id": 6471455, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1GbUP.jpg?s=128&g=1", "display_name": "Jared Parker", "link": "https://stackoverflow.com/users/6471455/jared-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 37846061, "answer_count": 1, "score": 0, "last_activity_date": 1466026300, "creation_date": 1466023721, "last_edit_date": 1466026300, "question_id": 37845489, "link": "https://stackoverflow.com/questions/37845489/python-3-how-to-add-text-to-chosen-line-in-a-txt-document-using-append", "title": "Python 3 how to add text to chosen line in a txt document using append", "body": "<p>In my document I would like to add scores to a chosen line using:</p>\n\n<pre><code>file = open('scores.txt', 'a')\n</code></pre>\n\n<p>because I don't want to add all the lines to a list and change that one line.\nI'm basically asking if you can add something to <code>.write()</code> or <code>.writelines()</code> to choose the line that it writes onto. If not, any other ways? If not, maybe a simple way of adding to a list then changing a line.</p>\n\n<p>basically what the txt document looks like:</p>\n\n<pre><code>User 1 scores:\n15,\nUser 2 Scores:\n20,\n</code></pre>\n"}, {"tags": ["python", "mysql", "django"], "comments": [{"owner": {"reputation": 689, "user_id": 1143558, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/No4RD.png?s=128&g=1", "display_name": "Ljubisa Livac", "link": "https://stackoverflow.com/users/1143558/ljubisa-livac"}, "edited": false, "score": 0, "creation_date": 1466024250, "post_id": 37845480, "comment_id": 63151523, "body": "{{ profile.projects_set.all }} ?"}, {"owner": {"reputation": 241, "user_id": 6441317, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5db019360f29c7bfcce7ad10db19847d?s=128&d=identicon&r=PG&f=1", "display_name": "Catherine", "link": "https://stackoverflow.com/users/6441317/catherine"}, "reply_to_user": {"reputation": 689, "user_id": 1143558, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/No4RD.png?s=128&g=1", "display_name": "Ljubisa Livac", "link": "https://stackoverflow.com/users/1143558/ljubisa-livac"}, "edited": false, "score": 0, "creation_date": 1466024328, "post_id": 37845480, "comment_id": 63151588, "body": "@LjubisaLivac that makes nothing appear..."}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1466025833, "post_id": 37845480, "comment_id": 63152299, "body": "It should be <code>profile.projects.all</code> or <code>projects.profile_set.all</code> for the reverse."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 6441317, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5db019360f29c7bfcce7ad10db19847d?s=128&d=identicon&r=PG&f=1", "display_name": "Catherine", "link": "https://stackoverflow.com/users/6441317/catherine"}, "edited": false, "score": 0, "creation_date": 1466033943, "post_id": 37846048, "comment_id": 63154955, "body": "Thanks for your helpful answer- would you happen to know how to solve this one?  <a href=\"https://stackoverflow.com/questions/37847454/issues-using-angular-with-django-rest-framework-displaying-information-from-sql\" title=\"issues using angular with django rest framework displaying information from sql\">stackoverflow.com/questions/37847454/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "is_accepted": true, "score": 1, "last_activity_date": 1466027487, "last_edit_date": 1466027487, "creation_date": 1466025938, "answer_id": 37846048, "question_id": 37845480, "link": "https://stackoverflow.com/questions/37845480/having-trouble-accessing-certain-information-from-my-database-with-many-to-many/37846048#37846048", "title": "Having trouble accessing certain information from my database with many to many relationships with django", "body": "<p>When you see <code>[&lt;Project: ___ &gt;]</code>, you're seeing a list of projects.  You need to iterate over them or flatten them somehow.</p>\n\n<p>Turn this into a <code>&lt;ul&gt;</code></p>\n\n<pre><code>&lt;ul&gt;\n{% for project in profile.projects.all %}\n    &lt;li&gt;{{ project.name }}&lt;/li&gt;\n{% endfor %}\n&lt;/ul&gt;\n</code></pre>\n\n<p>You might find it worth the time learning how to do introspection in Python and Django.  It's really handy!!  I recommend installing <code>ipython</code> so that Django's <code>manage.py shell</code> is much friendlier to use.</p>\n\n<p>At the shell prompt you can import your models and load a sample object: <code>profile = mymodels.Profile.objects.get.latest('id')</code> and then use <code>tab</code> or <code>dir()</code> to examine the object's attributes.</p>\n"}], "owner": {"reputation": 241, "user_id": 6441317, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5db019360f29c7bfcce7ad10db19847d?s=128&d=identicon&r=PG&f=1", "display_name": "Catherine", "link": "https://stackoverflow.com/users/6441317/catherine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 37846048, "answer_count": 1, "score": 2, "last_activity_date": 1466027487, "creation_date": 1466023675, "question_id": 37845480, "link": "https://stackoverflow.com/questions/37845480/having-trouble-accessing-certain-information-from-my-database-with-many-to-many", "title": "Having trouble accessing certain information from my database with many to many relationships with django", "body": "<p>I'm working with Django REST Framework and a SQL database that has some many to many relationships, which is making hard to display information from the database in my app.  The relevant tables are:</p>\n\n<p>user: id, password, last_login, is_superuser, username, first_name, last_name, email, is_staff, is_active, date_joined</p>\n\n<p>profile: id, user_id, user_organization_id</p>\n\n<p>organization: id, organization_name</p>\n\n<p>profile_projects: id, profile_id, project_id</p>\n\n<p>project: id, project_name</p>\n\n<p>My problem is with getting projects to display on my profiles page properly.  Profiles and projects are many to many, which is why they have their own separate table.  </p>\n\n<p>This is the relevant code from <code>models.py</code></p>\n\n<pre><code>class Project(models.Model):\n    id = models.AutoField(primary_key=True)\n    project_name = models.CharField(max_length = 30)\n\n    def __str__(self):\n        return \"%s\" % self.project_name\n\nclass Profile(models.Model):\n    id = models.AutoField(primary_key=True)\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    user_organization = models.ForeignKey(Organization, on_delete=models.CASCADE)\n    projects = models.ManyToManyField(Project)\n\n    def __str__(self):\n        return \"%s's profile\" % self.user\n</code></pre>\n\n<p>And then my <code>profile.html</code> template is:</p>\n\n<pre><code>{% load staticfiles %}\n{% load rest_framework %}\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://bootswatch.com/yeti/bootstrap.min.css\"/&gt;\n    &lt;script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js\"&gt;&lt;/script&gt;\n    &lt;title&gt;{{profile.user.first_name}}'s Profile&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;{{profile.user.get_full_name}}&lt;/h1&gt;\n    &lt;h2&gt;{{profile.user_organization.organization_name}}&lt;/h2&gt;\n    &lt;h3&gt;Projects&lt;/h3&gt;\n    {{profile.projects.all}}\n    &lt;h3&gt;Email&lt;/h3&gt;\n    {{profile.user.email}}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>With my sample user John Doe, who works for Organization 'Company' on Project 'fun',\neverything on his profile page displays correctly except under Projects it  has <code>[&lt;Project: fun&gt;]</code>.  I've tried a whole host of things and these are the results I'm getting:</p>\n\n<p><code>{{ profile.projects }}</code> in my template yields 'app.Project.None' on the webpage (app being the name of my Django app)</p>\n\n<p><code>{{ profile.projects.name }}</code> yields 'None'</p>\n\n<p><code>{{ profile.projects.all.name }}</code> doesn't make anything show up.  So I know that I am close but how do I get the <code>[&lt;Project: ___ &gt;]</code> to not show up around the project name?  I think the issue is stemming from the fact that profile_projects is many to many because all the other pieces of information are one to one or one to many.  </p>\n\n<p>Also my sample users currently only have 1 project each, I will worry about adding and displaying multiple projects per profile once I get everything working with just 1 project.</p>\n"}, {"tags": ["python", "operators", "symbols"], "comments": [{"owner": {"reputation": 14509, "user_id": 160868, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a0456c5a7309a1ffd33d2c4b0da4e51e?s=128&d=identicon&r=PG", "display_name": "Kristina Brooks", "link": "https://stackoverflow.com/users/160868/kristina-brooks"}, "edited": false, "score": 0, "creation_date": 1466023865, "post_id": 37845445, "comment_id": 63151306, "body": "I&#39;m confused, wouldn&#39;t <code>X += Y</code> be essentially <code>X = X + Y</code> unless it&#39;s being overloaded by the library you&#39;re using?"}, {"owner": {"reputation": 203, "user_id": 5930907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RqfFR.jpg?s=128&g=1", "display_name": "Mc Tor", "link": "https://stackoverflow.com/users/5930907/mc-tor"}, "reply_to_user": {"reputation": 14509, "user_id": 160868, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a0456c5a7309a1ffd33d2c4b0da4e51e?s=128&d=identicon&r=PG", "display_name": "Kristina Brooks", "link": "https://stackoverflow.com/users/160868/kristina-brooks"}, "edited": false, "score": 0, "creation_date": 1466029453, "post_id": 37845445, "comment_id": 63153690, "body": "Ah yes that&#39;s right thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 5930907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RqfFR.jpg?s=128&g=1", "display_name": "Mc Tor", "link": "https://stackoverflow.com/users/5930907/mc-tor"}, "edited": false, "score": 3, "creation_date": 1466029505, "post_id": 37845498, "comment_id": 63153706, "body": "this table is quite the gem! thank you for clearing it up!"}, {"owner": {"reputation": 145, "user_id": 11093851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c4345b1d8b2ecb672807543de2ff77?s=128&d=identicon&r=PG&f=1", "display_name": "N997", "link": "https://stackoverflow.com/users/11093851/n997"}, "edited": false, "score": 0, "creation_date": 1553308520, "post_id": 37845498, "comment_id": 97347829, "body": "beautiful :) I was looking for a table like this"}, {"owner": {"reputation": 2361, "user_id": 649133, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f8ad5660952c0c68d30a686d78ec31a2?s=128&d=identicon&r=PG", "display_name": "gwideman", "link": "https://stackoverflow.com/users/649133/gwideman"}, "edited": false, "score": 1, "creation_date": 1563062350, "post_id": 37845498, "comment_id": 100577271, "body": "What is the meaning of all the &quot;AND&quot;s in the leftmost column of this table? Is it somehow supposed to mean &quot;and assign&quot;? It&#39;s quite confusing, because, being capitalized, might refer to the AND operator. Except Python&#39;s AND operator is lowercase. Hmmm."}], "tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": true, "score": 47, "last_activity_date": 1466023736, "creation_date": 1466023736, "answer_id": 37845498, "question_id": 37845445, "link": "https://stackoverflow.com/questions/37845445/and-symbols-in-python/37845498#37845498", "title": "^=, -= and += symbols in Python", "body": "<p>As almost any modern language, python has <a href=\"http://python-reference.readthedocs.io/en/latest/docs/operators/#assignment-operators\" rel=\"noreferrer\">Assignment Operators</a>\nso they can use them every time you want to assign a value to a variable after doing some arithmetic or logical operation, both (assignment and operation)are expressed compact way in one statement....</p>\n\n<p><a href=\"https://i.stack.imgur.com/M2aFu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/M2aFu.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11864299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b337352f4cfa184cb9e06f4116fa8ce6?s=128&d=identicon&r=PG&f=1", "display_name": "Oliari", "link": "https://stackoverflow.com/users/11864299/oliari"}, "is_accepted": false, "score": 1, "last_activity_date": 1591305798, "last_edit_date": 1591305798, "creation_date": 1564582729, "answer_id": 57292959, "question_id": 37845445, "link": "https://stackoverflow.com/questions/37845445/and-symbols-in-python/57292959#57292959", "title": "^=, -= and += symbols in Python", "body": "<p>When you compute <code>X = X + Y</code> you are actually returning the sum of <code>X</code> and <code>Y</code> into a new variable, which, in your example, overwrites the previous value of <code>X</code>. When you use an assignment operator in the form of <code>X += 1</code>, the value <code>1</code> is directly summed on the current value of <code>X</code>, without returning the result in a new variable. Take a look at the code below:</p>\n\n<pre><code>&gt;&gt;&gt; V = np.arange(10)\n&gt;&gt;&gt; view = V[3:]        # view is just a subspace (reference) of the V array\n&gt;&gt;&gt; print(V);print(view)\n[0 1 2 3 4 5 6 7 8 9]\n[3 4 5 6 7 8 9] \n&gt;&gt;&gt; view = view + 3     # add view to a constant in a new variable \n&gt;&gt;&gt; print(V);print(view)\n[0 1 2 3 4 5 6 7 8 9]\n[ 6  7  8  9 10 11 12]\n&gt;&gt;&gt; view = V[3:]\n&gt;&gt;&gt; view += 3           # here you actually modify the value of V\n&gt;&gt;&gt; print(V);print(view)\n[ 0  1  2  6  7  8  9 10 11 12]\n[ 6  7  8  9 10 11 12]\n</code></pre>\n\n<p>You can also look for the documentation of <code>numpy.ndarray.base</code> to check if an array is actually a reference of another array.</p>\n"}], "owner": {"reputation": 203, "user_id": 5930907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RqfFR.jpg?s=128&g=1", "display_name": "Mc Tor", "link": "https://stackoverflow.com/users/5930907/mc-tor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103158, "favorite_count": 10, "accepted_answer_id": 37845498, "answer_count": 2, "score": 20, "last_activity_date": 1591305798, "creation_date": 1466023559, "last_edit_date": 1591297332, "question_id": 37845445, "link": "https://stackoverflow.com/questions/37845445/and-symbols-in-python", "title": "^=, -= and += symbols in Python", "body": "<p>I am quite experienced with Python, but recently, when I was looking at the solutions for the <a href=\"https://www.codility.com/\" rel=\"nofollow noreferrer\">codility</a> sample tests I encountered the operators <code>-=</code>, <code>+=</code>, <code>^=</code> and I am unable to figure out what they do. Perhaps could anyone explain the context in which they are used?</p>\n"}, {"tags": ["python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 2572, "user_id": 469111, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/D7E4Z.png?s=128&g=1", "display_name": "ohrstrom", "link": "https://stackoverflow.com/users/469111/ohrstrom"}, "edited": false, "score": 0, "creation_date": 1466024346, "post_id": 37845389, "comment_id": 63151593, "body": "How do your models look like? What is <code>user_ID</code>? Why do you not use the convenient way like <code>qs.filter(user__pk=user.pk)</code>?"}, {"owner": {"reputation": 7694, "user_id": 4859910, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-juTEf22w0kM/AAAAAAAAAAI/AAAAAAAAAM4/flPY0PSE0z4/photo.jpg?sz=128", "display_name": "anjaneyulubatta505", "link": "https://stackoverflow.com/users/4859910/anjaneyulubatta505"}, "edited": false, "score": 0, "creation_date": 1466042923, "post_id": 37845389, "comment_id": 63156950, "body": "@manch  try this:   picture_obj.contest_set.all()  you will get all contests related to this picture object."}, {"owner": {"reputation": 9166, "user_id": 686016, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/YGjz2.jpg?s=128&g=1", "display_name": "wobbily_col", "link": "https://stackoverflow.com/users/686016/wobbily-col"}, "reply_to_user": {"reputation": 7694, "user_id": 4859910, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-juTEf22w0kM/AAAAAAAAAAI/AAAAAAAAAM4/flPY0PSE0z4/photo.jpg?sz=128", "display_name": "anjaneyulubatta505", "link": "https://stackoverflow.com/users/4859910/anjaneyulubatta505"}, "edited": false, "score": 0, "creation_date": 1466069265, "post_id": 37845389, "comment_id": 63168437, "body": "@AnjaneyuluBatta, that will work for individual objects, but not on a queryset."}, {"owner": {"reputation": 7694, "user_id": 4859910, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-juTEf22w0kM/AAAAAAAAAAI/AAAAAAAAAM4/flPY0PSE0z4/photo.jpg?sz=128", "display_name": "anjaneyulubatta505", "link": "https://stackoverflow.com/users/4859910/anjaneyulubatta505"}, "reply_to_user": {"reputation": 9166, "user_id": 686016, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/YGjz2.jpg?s=128&g=1", "display_name": "wobbily_col", "link": "https://stackoverflow.com/users/686016/wobbily-col"}, "edited": false, "score": 1, "creation_date": 1466069662, "post_id": 37845389, "comment_id": 63168721, "body": "@wobbily_col yeah! you are right. we can loop over and get all the Contest objects."}], "answers": [{"tags": [], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "is_accepted": false, "score": 0, "last_activity_date": 1466025328, "creation_date": 1466025328, "answer_id": 37845897, "question_id": 37845389, "link": "https://stackoverflow.com/questions/37845389/get-a-queryset-from-a-queryset/37845897#37845897", "title": "Get a queryset from a queryset", "body": "<p>I assume that your models look something like this</p>\n\n<pre>\nclass Contest(Model):\n    ... something ...\n\nclass Picture(Model):\n    user = ForeignKey(User)\n    contest = ForeignKey(Contest)\n    ... something ...\n</pre>\n\n<p>So, <code>Picture.objects.filter(user=user)</code> gives you pictures by a particular user (don't have to specify _id, filters operate on model objects just fine). And to get contests with pictures by a particular user you can do </p>\n\n<pre>\npics_by_user = Picture.objects.filter(user=user)\ncontests_by_user = Contest.objects.filter(id__in=pics_by_user.values_list('contest', flat=True))\n</pre>\n\n<p>There might be an easier way though</p>\n"}, {"tags": [], "owner": {"reputation": 12189, "user_id": 2062318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78a27bedd2d3c0cded7b342858475dab?s=128&d=identicon&r=PG", "display_name": "Todor", "link": "https://stackoverflow.com/users/2062318/todor"}, "is_accepted": true, "score": 2, "last_activity_date": 1466027711, "creation_date": 1466027711, "answer_id": 37846465, "question_id": 37845389, "link": "https://stackoverflow.com/questions/37845389/get-a-queryset-from-a-queryset/37846465#37846465", "title": "Get a queryset from a queryset", "body": "<p>You just need to follow the <a href=\"https://docs.djangoproject.com/en/1.9/topics/db/queries/#lookups-that-span-relationships\" rel=\"nofollow\">reverse relations</a>.</p>\n\n<pre><code>user_contests = Contest.objects.filter(picture__user=user)\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 6366115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36139299593e131078422e82ed18a9d5?s=128&d=identicon&r=PG&f=1", "display_name": "manchakowski", "link": "https://stackoverflow.com/users/6366115/manchakowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37846465, "answer_count": 2, "score": 1, "last_activity_date": 1466027711, "creation_date": 1466023322, "question_id": 37845389, "link": "https://stackoverflow.com/questions/37845389/get-a-queryset-from-a-queryset", "title": "Get a queryset from a queryset", "body": "<p>I have a queryset from <code>Picture.objects.filter(user_ID=user)</code>. The Picture model has \"contest_ID\" as a foreign key. </p>\n\n<p>I'm looking to get a queryset of Contests which have Pictures, so from the queryset I already have, how do I pull a list of Contest objects?</p>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 1, "creation_date": 1466023497, "post_id": 37845380, "comment_id": 63151121, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10048069/what-is-the-most-pythonic-way-to-pop-a-random-element-from-a-list\">What is the most pythonic way to pop a random element from a list?</a>"}, {"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 0, "creation_date": 1466023533, "post_id": 37845380, "comment_id": 63151138, "body": "Your code should work. Are you sure your <code>QuestionX</code> objects are working as you expect?"}, {"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 0, "creation_date": 1466023559, "post_id": 37845380, "comment_id": 63151157, "body": "You&#39;re recreating the <code>questionList</code> every time round the loop!"}], "answers": [{"tags": [], "owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "is_accepted": true, "score": 1, "last_activity_date": 1466027000, "last_edit_date": 1466027000, "creation_date": 1466023579, "answer_id": 37845449, "question_id": 37845380, "link": "https://stackoverflow.com/questions/37845380/removing-function-from-randomly-shuffled-list-using-random-shuffle-python/37845449#37845449", "title": "Removing function from randomly shuffled list using random.shuffle (Python)", "body": "<p>You're recreating the <code>questionList</code> every time round the loop!</p>\n\n<p>Try this:</p>\n\n<pre><code>questionList = [Question1, Question2, Question3, Question4, Question5]\nrandom.shuffle(questionList)\nfor q in questionList:\n    print(q())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2709, "user_id": 5189673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a1a8d2328d31cdd52ed37dee8d91d4?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/5189673/leon"}, "is_accepted": false, "score": 1, "last_activity_date": 1466024479, "last_edit_date": 1466024479, "creation_date": 1466023722, "answer_id": 37845490, "question_id": 37845380, "link": "https://stackoverflow.com/questions/37845380/removing-function-from-randomly-shuffled-list-using-random-shuffle-python/37845490#37845490", "title": "Removing function from randomly shuffled list using random.shuffle (Python)", "body": "<p>The problem is that you always set the <code>questionList</code> in the while loop, replacing it each time with a freshly filled version with all questions. If you move it out of the loop it should work fine.</p>\n\n<p>Also, shuffling once is enough, so you can also move that out of the loop too.</p>\n\n<p>In addition, <code>while 1</code> will never stop, which will raise an error once all questions are removed. If you use <code>while questionList</code> instead the loop will stop once all questions are used up:\n</p>\n\n<pre><code>questionList = [Question1, Question2, Question3, Question4, Question5]\nrandom.shuffle(questionList)\nwhile questionList:\n    print(questionList.pop()())\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 6461887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1c86b40d82632d8e645ed5d1c3ef89?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/6461887/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 37845449, "answer_count": 2, "score": 2, "last_activity_date": 1466027000, "creation_date": 1466023285, "last_edit_date": 1466023439, "question_id": 37845380, "link": "https://stackoverflow.com/questions/37845380/removing-function-from-randomly-shuffled-list-using-random-shuffle-python", "title": "Removing function from randomly shuffled list using random.shuffle (Python)", "body": "<p>So, recently I've had trouble getting random.shuffle to randomly pick and execute a function from a list. I've been able to get that process working but now I want the questions to be removed from the list once they're picked. I'll show you the code that should work in theory, but just randomly picks questions and repeats them.</p>\n\n<pre><code>while 1:\n    questionList = [Question1, Question2, Question3, Question4, Question5]\n    random.shuffle(questionList)\n    print(questionList.pop()())\n</code></pre>\n\n<p>If you have any idea of how to get the result I'm looking for, don't be afraid to comment or add a new answer!</p>\n\n<p>~Cheers!</p>\n"}, {"tags": ["python", "geopy"], "answers": [{"comments": [{"owner": {"reputation": 1139, "user_id": 3934271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/648a452f413925929c1f39cf3c45dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3934271/jas"}, "edited": false, "score": 0, "creation_date": 1466025703, "post_id": 37845606, "comment_id": 63152239, "body": "You are right, it will return the list. But the list of all the possible location.  [Location(Vancouver, Greater Vancouver Regional District, British Columbia, Canada, (49.2608944, -123.1139382, 0.0)), Location(Vancouver, Clark County, Washington, United States of America, (45.6306954, -122.6744556, 0.0)), Location(Vancouver, Clark County, Washington, United States of America, (45.6306954, -122.6744556, 0.0)), Location(Vancouver, San Antonio del Tequendama, Cundinamarca, Colombia, (4.585473, -74.3518472, 0.0)), ....It would need further processing. no other easier way ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1139, "user_id": 3934271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/648a452f413925929c1f39cf3c45dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3934271/jas"}, "edited": false, "score": 0, "creation_date": 1466027436, "post_id": 37845606, "comment_id": 63152987, "body": "In the docs there&#39;s this example: location = geolocator.geocode(&quot;175 5th Avenue NYC&quot;). I don&#39;t know geolocator API but I suppose that geolocator.geocode(d[&#39;city&#39;]+ &quot; &quot; + d[&#39;country&#39;]) would work (1 string with city + country instead of a 2 parameter call which I cannot match in the documentation)"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1466027691, "last_edit_date": 1466027691, "creation_date": 1466024112, "answer_id": 37845606, "question_id": 37845361, "link": "https://stackoverflow.com/questions/37845361/how-to-pass-city-and-country-to-geocode/37845606#37845606", "title": "how to pass city and country to geocode", "body": "<p>In the documentation it is stated that geolocator.geocode can return 0,1 or more values.\nThe method can return a list, hence the error message when you try to access it as a single structure element.\nOr iterate through the list and append to listofobjs2 as much as needed.</p>\n\n<p>You cannot be sure of getting exactly 1 location match. But why passing 2 parameters? I would combine them in a string like in the docs example:</p>\n\n<p>\"some address NYC\". So if you put your request like this:</p>\n\n<p>d['city']+\" \"+d['country']</p>\n\n<p>it would match the example much better</p>\n\n<p><a href=\"https://geopy.readthedocs.io/en/1.10.0/\" rel=\"nofollow\">https://geopy.readthedocs.io/en/1.10.0/</a></p>\n"}], "owner": {"reputation": 1139, "user_id": 3934271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/648a452f413925929c1f39cf3c45dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3934271/jas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 37845606, "answer_count": 1, "score": 1, "last_activity_date": 1466027691, "creation_date": 1466023210, "last_edit_date": 1466024953, "question_id": 37845361, "link": "https://stackoverflow.com/questions/37845361/how-to-pass-city-and-country-to-geocode", "title": "how to pass city and country to geocode", "body": "<p>I want to make sure I get the lat and lng for right city. For e.g there is Sydney in Australia and Sydney in Canada. This works fine</p>\n\n<pre><code>for d in listofobjs:\n    location = geolocator.geocode(d['city'])\n    d2 = {\n        'username': d['username'],\n        'latitude': location.latitude,\n        'longitude': location.longitude\n    }\n    listofobjs2.append(d2)\n</code></pre>\n\n<p>But I get an error if I try location like this instead</p>\n\n<pre><code>location = geolocator.geocode(d['city'],d['country'])\n</code></pre>\n\n<p>I get an error when I try to read latitude from locatoion <br></p>\n\n<pre><code>AttributeError: 'list' object has no attribute 'latitude'\n</code></pre>\n\n<p>Is it possible to pass both city and country to geocode ?</p>\n"}, {"tags": ["python", "django", "user-interface", "authentication"], "answers": [{"tags": [], "owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "is_accepted": false, "score": 0, "last_activity_date": 1466031477, "creation_date": 1466031477, "answer_id": 37847190, "question_id": 37845352, "link": "https://stackoverflow.com/questions/37845352/django-user-login-and-authentication-is-not-working/37847190#37847190", "title": "Django User-Login and authentication is not working", "body": "<p>Im going to share another approach to manage authentication in django assuming you already have a login html template (with username and password inputs inside a form with post action) , a user form and a home template , this would be the authentication views .py :</p>\n\n<pre><code>from django.shortcuts import render, get_object_or_404\nfrom django.http import HttpResponseRedirect\nfrom django.views.generic import View\nfrom django.core.urlresolvers import reverse\nfrom django.contrib import messages\nfrom django.contrib.auth import login, authenticate, logout\nfrom ..form import UsersForm\n\n\nclass LoginView(View):\n\n    template_name = ['yourtemplatedirectory/login.html', 'yourtemplatedirectory/home.html']\n\n    def get(self, request, *args, **kwargs):\n        form = UsersForm()\n        if request.user.is_authenticated():\n            return render(request, self.template_name[1])\n        return render(request, self.template_name[0])\n\n    def post(self, request, *args, **kwargs):\n        username = request.POST['username']\n        password = request.POST['password']\n        user = authenticate(username = username, password = password)\n        if user is not None:\n            login(request, user)\n            if user.is_active:\n                return render(request, self.template_name[ 1 ])\n        else:\n            messages.add_message(\n                request, messages.ERROR, \"Invalid username or password\"\n                )\n            return HttpResponseRedirect(reverse( 'yourapp:login' ))\n\n\ndef LogoutView(request):\n    logout(request)\n    return HttpResponseRedirect(reverse( 'yourapp:home' ))\n</code></pre>\n\n<p>Just call the respective url from login and logout buttons and that's it. Hope it helps !!</p>\n"}, {"comments": [{"owner": {"reputation": 2546, "user_id": 1471385, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bc528511f7e273c0a1420dcbb5bc3975?s=128&d=identicon&r=PG", "display_name": "jonprasetyo", "link": "https://stackoverflow.com/users/1471385/jonprasetyo"}, "edited": false, "score": 0, "creation_date": 1466071734, "post_id": 37856025, "comment_id": 63170153, "body": "its also good to do debug mode on your ide - we can quickly see if username or password has any value at all. Or you can simple print it out on your terminal"}, {"owner": {"reputation": 21, "user_id": 5911722, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-HQfr60c1Or4/AAAAAAAAAAI/AAAAAAAAAI0/_vGOmmt0VUY/photo.jpg?sz=128", "display_name": "Vivek sinha", "link": "https://stackoverflow.com/users/5911722/vivek-sinha"}, "edited": false, "score": 0, "creation_date": 1466187671, "post_id": 37856025, "comment_id": 63230717, "body": "Bro thanks for reply but if you&#39;re thinking that I didn&#39;t try this method then you are wrong..as already tried with all general methods but getting failed so posted here..:)..BTW thanks"}], "tags": [], "owner": {"reputation": 2546, "user_id": 1471385, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bc528511f7e273c0a1420dcbb5bc3975?s=128&d=identicon&r=PG", "display_name": "jonprasetyo", "link": "https://stackoverflow.com/users/1471385/jonprasetyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1466071504, "creation_date": 1466071504, "answer_id": 37856025, "question_id": 37845352, "link": "https://stackoverflow.com/questions/37845352/django-user-login-and-authentication-is-not-working/37856025#37856025", "title": "Django User-Login and authentication is not working", "body": "<p>Change from </p>\n\n<pre><code>username = request.GET.get('username', '')\npassword = request.GET.get('password', '')\n</code></pre>\n\n<p>to</p>\n\n<pre><code>username = request.POST.get('username', '')\npassword = request.POST.get('password', '')\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5911722, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-HQfr60c1Or4/AAAAAAAAAAI/AAAAAAAAAI0/_vGOmmt0VUY/photo.jpg?sz=128", "display_name": "Vivek sinha", "link": "https://stackoverflow.com/users/5911722/vivek-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1408, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1466071504, "creation_date": 1466023171, "question_id": 37845352, "link": "https://stackoverflow.com/questions/37845352/django-user-login-and-authentication-is-not-working", "title": "Django User-Login and authentication is not working", "body": "<p>I am creating a simple user-login page using Django and after get login redirecting to home page.But its always redirecting to unauthorized option given in app's views.py (i.e Invalid Details). Please check and help me.</p>\n\n<p>Project name:login and App name: index</p>\n\n<pre><code>views.py\n\n\nfrom django.shortcuts import render_to_response\nfrom django.contrib import auth\nfrom django.http import HttpResponseRedirect, HttpResponse\nfrom django.contrib.auth.decorators import login_required\nfrom django.contrib.auth import authenticate, login, logout\nfrom django.core.context_processors import csrf\n\n# Create your views here.\n\ndef login(request):\n    c = {}\n    c.update(csrf(request))\n    return render_to_response('login.html', c)\n\ndef auth(request):\n    username = request.GET.get('username', '')\n    password = request.GET.get('password', '')\n    user = authenticate(username=username, password=password)\n\n    if user is not None:\n            if user.is_active:\n                    login(request, user)\n                    return HttpResponseRedirect(\"/home/\")\n            else:\n                    return HttpResponse(\"Bad request\")\n    else:\n            return HttpResponse(\"Invalid details\")\n\n  @login_required\n  def home(request):\n       return render_to_response('home.html') \n\n\n App urls.py\n\nfrom django.conf.urls import url\nfrom django.contrib import admin\nfrom django.contrib.auth.views import login, logout\nfrom . import views\n\nurlpatterns = [\n   url(r'^admin/', admin.site.urls),\n   url(r'^$', views.login, name='login'),\n   url(r'^auth/$', views.auth, name='auth'),\n  url(r'^home/$', views.home, name='home'),\n]\n\n\nProject's: urls.py:\n\nfrom django.conf.urls import url, include\nfrom django.contrib import admin\n\nurlpatterns = [\n     url(r'^admin/', admin.site.urls),\n     url(r'^', include('index.urls')),\n  ]\n</code></pre>\n\n<p>Templates:</p>\n\n<pre><code> login.html\n\n {% block content %}\n\n {% if form.errors %}\n&lt;p class=\"error\"&gt;Sorry, that's not a valid username or password&lt;/p&gt;\n{% endif %}\n\n &lt;form action=\"/auth/\" method=\"post\"&gt;{% csrf_token %}\n  &lt;label for=\"username\"&gt;User name:&lt;/label&gt;\n &lt;input type=\"text\" name=\"username\" value=\"\" id=\"username\"&gt;\n &lt;label for=\"password\"&gt;Password:&lt;/label&gt;\n &lt;input type=\"password\" name=\"password\" value=\"\" id=\"password\"&gt;\n\n &lt;input type=\"submit\" value=\"login\" /&gt;\n &lt;input type=\"hidden\" name=\"next\" value=\"{{ next|escape }}\" /&gt;\n &lt;/form&gt;\n\n{% endblock %}\n\nhome.html\n\n{% block content %}\n\n&lt;h1&gt;Hello Vivek&lt;/h1&gt;\n\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 2, "creation_date": 1466023666, "post_id": 37845338, "comment_id": 63151214, "body": "Its worth noting that the parentheses around <code>x</code> in your examples is not doing anything. <code>yield</code> is a keyword, not a function."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1466024161, "post_id": 37845338, "comment_id": 63151462, "body": "Don&#39;t use <code>yield</code> in a comprehension. It does something crazy that&#39;s never what you want, and it should really be a syntax error."}, {"owner": {"reputation": 9656, "user_id": 5378816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2de735170fb38dcd62375ac3a9f8ecc?s=128&d=identicon&r=PG&f=1", "display_name": "VPfB", "link": "https://stackoverflow.com/users/5378816/vpfb"}, "edited": false, "score": 1, "creation_date": 1598950863, "post_id": 37845338, "comment_id": 112615233, "body": "Epilogue: yield in a comprehension became a syntax error in 3.8"}], "answers": [{"comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1466300796, "post_id": 37845447, "comment_id": 63259438, "body": "if you meant <code>(x for x in xlist)</code> literally then <code>iter(xlist)</code>  should be used instead."}, {"owner": {"reputation": 1515, "user_id": 833093, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05917fed26d7519fae8318f78d14592a?s=128&d=identicon&r=PG", "display_name": "Thomas Grainger", "link": "https://stackoverflow.com/users/833093/thomas-grainger"}, "edited": false, "score": 0, "creation_date": 1551182352, "post_id": 37845447, "comment_id": 96538975, "body": "you probably want <code>yield from xlist</code>"}], "tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": false, "score": 11, "last_activity_date": 1516453101, "last_edit_date": 1516453101, "creation_date": 1466023575, "answer_id": 37845447, "question_id": 37845338, "link": "https://stackoverflow.com/questions/37845338/yieldx-vs-yieldx-parentheses-around-yield-in-python/37845447#37845447", "title": "yield(x) vs. (yield(x)): parentheses around yield in python", "body": "<p>The <a href=\"https://docs.python.org/3/reference/simple_stmts.html#the-yield-statement\" rel=\"noreferrer\"><code>yield</code> keyword</a> can be used in two ways: As a statement, and as an expression.</p>\n\n<p>The most common use is as a statement within generator functions, usually on its own line and all. It can be used like this:</p>\n\n<pre><code>yield &lt;expr&gt;\nyield from &lt;expr&gt;\n</code></pre>\n\n<p>The yield expression however can be used wherever expressions are allowed. However, they require a special syntax:</p>\n\n<pre><code>(yield &lt;expr&gt;)\n(yield from &lt;expr&gt;)\n</code></pre>\n\n<p>As you can see, the parentheses are part of the syntax to make <code>yield</code> work as an expression. So it\u2019s syntactically not allowed to use the <code>yield</code> keyword as an expression without parentheses. That\u2019s why you need to use parentheses in the list comprehension.</p>\n\n<p>That being said, if you want to use list comprehension syntax to create a generator, you should use the generator expression syntax instead:</p>\n\n<pre><code>(x for x in xlist)\n</code></pre>\n\n<p>Note the parentheses instead of the square brackets to turn this from a list comprehension into a generator expression.</p>\n\n<hr>\n\n<p>Note that <a href=\"https://bugs.python.org/issue10544\" rel=\"noreferrer\">starting with Python 3.7</a>, <code>yield</code> expressions are deprecated within comprehensions and generator expressions (apart from within the iterable of the left-most <code>for</code> clause), to ensure that comprehensions are properly evaluated. Starting with Python 3.8, this will then cause a syntax error.</p>\n\n<p>This makes the exact list comprehension in the question a deprecated usage:</p>\n\n<pre><code>&gt;&gt;&gt; [(yield(x)) for x in xlist]\n&lt;stdin&gt;:1: DeprecationWarning: 'yield' inside list comprehension\n&lt;generator object &lt;listcomp&gt; at 0x000002E06BC1F1B0&gt;\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 6205397, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff2a90faa5b27c204ced0d63900e8ece?s=128&d=identicon&r=PG&f=1", "display_name": "GoGo", "link": "https://stackoverflow.com/users/6205397/gogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1375, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1516453101, "creation_date": 1466023122, "last_edit_date": 1466253750, "question_id": 37845338, "link": "https://stackoverflow.com/questions/37845338/yieldx-vs-yieldx-parentheses-around-yield-in-python", "title": "yield(x) vs. (yield(x)): parentheses around yield in python", "body": "<p>Using Python 3.4, I get <code>SyntaxError: invalid syntax</code> here:</p>\n\n<pre><code>&gt;&gt;&gt; xlist = [1,2,3,4,5]\n&gt;&gt;&gt; [yield(x) for x in xlist]\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>But this generates a generator object:</p>\n\n<pre><code>&gt;&gt;&gt; [(yield(x)) for x in xlist]\n&lt;generator object &lt;listcomp&gt; at 0x00000076CC8E5DB0&gt;\n</code></pre>\n\n<p>Are round brackets around yield required?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 4175920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/KGDmG.jpg?s=128&g=1", "display_name": "Empario", "link": "https://stackoverflow.com/users/4175920/empario"}, "edited": false, "score": 0, "creation_date": 1466116713, "post_id": 37845780, "comment_id": 63197657, "body": "Thanks but I was looking for a solution without importing anything other than standard libraries."}, {"owner": {"reputation": 2214, "user_id": 2607571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898b3ca6cbc371e33421d40a3ef20c49?s=128&d=identicon&r=PG", "display_name": "Simon Kirsten", "link": "https://stackoverflow.com/users/2607571/simon-kirsten"}, "reply_to_user": {"reputation": 392, "user_id": 4175920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/KGDmG.jpg?s=128&g=1", "display_name": "Empario", "link": "https://stackoverflow.com/users/4175920/empario"}, "edited": false, "score": 0, "creation_date": 1466118830, "post_id": 37845780, "comment_id": 63198317, "body": "@Empario This is not possible without any packages"}, {"owner": {"reputation": 392, "user_id": 4175920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/KGDmG.jpg?s=128&g=1", "display_name": "Empario", "link": "https://stackoverflow.com/users/4175920/empario"}, "edited": false, "score": 0, "creation_date": 1466119572, "post_id": 37845780, "comment_id": 63198531, "body": "some solution by using time, calendar, datetime packages"}], "tags": [], "owner": {"reputation": 2214, "user_id": 2607571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898b3ca6cbc371e33421d40a3ef20c49?s=128&d=identicon&r=PG", "display_name": "Simon Kirsten", "link": "https://stackoverflow.com/users/2607571/simon-kirsten"}, "is_accepted": true, "score": 2, "last_activity_date": 1467130866, "last_edit_date": 1467130866, "creation_date": 1466024817, "answer_id": 37845780, "question_id": 37845327, "link": "https://stackoverflow.com/questions/37845327/changing-time-from-utc-to-pdt/37845780#37845780", "title": "Changing time from UTC to PDT", "body": "<p>Using the python package <a href=\"http://crsmithdev.com/arrow/\" rel=\"nofollow\"><code>arrow</code></a> this simple script can be used:</p>\n\n<pre><code>import arrow\n\nfmt = \"YYYY-MM-DD HH:mm:ss Z\"\n\ntime = arrow.get(\"2016-06-15 23:27:52 +0000\", fmt)\ntime = time.to(\"US/Pacific\")\n\nprint(time.format(fmt))\n</code></pre>\n\n<p><code>2016-06-15 16:27:52 -0700</code></p>\n\n<p>Install arrow with <code>pip install arrow</code></p>\n\n<p>Edit: If you do not want to use the <code>arrow</code> package:</p>\n\n<pre><code>import time\nimport calendar\n\nfmt = \"%Y-%m-%d %H:%M:%S \"\n\nt = calendar.timegm(time.strptime(\"2016-06-15 23:27:52 +0000\", fmt + \"+0000\"))\nt -= 8 * 60 * 60\n\ns = time.strftime(fmt + \"-0700\", time.gmtime(t))\n\nprint(s)\n</code></pre>\n\n<p>Note, that this is horrible code and if you use this in production you will definitely get fired from your job, so just install the <code>arrow</code> package!</p>\n"}], "owner": {"reputation": 392, "user_id": 4175920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/KGDmG.jpg?s=128&g=1", "display_name": "Empario", "link": "https://stackoverflow.com/users/4175920/empario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 37845780, "answer_count": 1, "score": 2, "last_activity_date": 1467130866, "creation_date": 1466023075, "question_id": 37845327, "link": "https://stackoverflow.com/questions/37845327/changing-time-from-utc-to-pdt", "title": "Changing time from UTC to PDT", "body": "<p>This is what I have:</p>\n\n<pre><code>pat = '%Y-%m-%d %H:%M:%S +0000'\nmy_time = time.strptime(task_time, pattern)\n</code></pre>\n\n<p>But, how can I change the timezone from:</p>\n\n<pre><code> my_time:\n 2016-06-15 23:27:52 +0000\n</code></pre>\n\n<p>to a different timezone:</p>\n\n<pre><code>PDT\n</code></pre>\n\n<p>or</p>\n\n<pre><code>-0700\n</code></pre>\n\n<p>So the result is:</p>\n\n<pre><code>result = 2016-06-15 16:27:52 -0700\n</code></pre>\n"}, {"tags": ["python", "performance", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 1851, "user_id": 2789717, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XdQcC.jpg?s=128&g=1", "display_name": "Pedro Braz", "link": "https://stackoverflow.com/users/2789717/pedro-braz"}, "edited": false, "score": 1, "creation_date": 1466024269, "post_id": 37845567, "comment_id": 63151537, "body": "I see you edited your post.  Typically, put that as a consideration from the start.  I&#39;ll check for you."}, {"owner": {"reputation": 1851, "user_id": 2789717, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XdQcC.jpg?s=128&g=1", "display_name": "Pedro Braz", "link": "https://stackoverflow.com/users/2789717/pedro-braz"}, "edited": false, "score": 0, "creation_date": 1466024728, "post_id": 37845567, "comment_id": 63151790, "body": "Agreed with your edit. It&#39;s still pretty weird that this is not a native behavior. I&#39;ll look for a feature request section or something"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 1851, "user_id": 2789717, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XdQcC.jpg?s=128&g=1", "display_name": "Pedro Braz", "link": "https://stackoverflow.com/users/2789717/pedro-braz"}, "edited": false, "score": 0, "creation_date": 1466026152, "post_id": 37845567, "comment_id": 63152448, "body": "I edited the post with a much better solution.  Though less intuitive."}, {"owner": {"reputation": 1851, "user_id": 2789717, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XdQcC.jpg?s=128&g=1", "display_name": "Pedro Braz", "link": "https://stackoverflow.com/users/2789717/pedro-braz"}, "edited": false, "score": 0, "creation_date": 1466026386, "post_id": 37845567, "comment_id": 63152544, "body": "Thanks, that works. Still I think there should be a native option to do so. I&#39;ll take a look at the code. Though I have no hope that I&#39;ll be able to make it myself."}, {"owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 1, "creation_date": 1466066635, "post_id": 37845567, "comment_id": 63166647, "body": "BTW, this solution will not give the correct answer if you have duplicate values in the index (which is of course not necessarily the case in the OPs application), although that is probably solvable by using iloc instead of loc."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466066950, "post_id": 37845567, "comment_id": 63166842, "body": "Great comments.  I prefer yours and Merlin&#39;s answers.  But I enjoyed trying to make the solution faster."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1466026096, "last_edit_date": 1466026096, "creation_date": 1466023989, "answer_id": 37845567, "question_id": 37845306, "link": "https://stackoverflow.com/questions/37845306/pandas-multiindex-groupby-retaining-index-levels/37845567#37845567", "title": "Pandas MultiIndex groupby retaining index levels", "body": "<p>This will get it done:</p>\n\n<pre><code>def get_slice(df):\n    l0, l1 = df.index.levels\n    b0, b1 = df.index.labels\n\n    n = len(l0)\n    myslice = range(n)\n\n    for i in myslice:\n        myslice[i] = (l0[i], l1[b1[b0 == i][-1]])\n\n    return df.loc[myslice]\n</code></pre>\n\n<p>Timed</p>\n\n<pre><code>%%timeit\nget_slice(df)\n\n1000 loops, best of 3: 458 \u00b5s per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466029963, "post_id": 37846647, "comment_id": 63153840, "body": "If you track the edits to mine and op&#39;s posts, you&#39;ll see op is interested in performance. We went through a number of solutions similar to this one.  Use timeit to compare."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466035528, "post_id": 37846647, "comment_id": 63155326, "body": "Sorry, I meant that the op is looking for efficiency.  You may very well find a better solution.  Maybe even one that looks like something I tried already.  However, you should consider timing your solution as part of the solution.  Otherwise, it isn&#39;t obvious how your answer stacks up.  If it was a better solution, I&#39;d hope the op would select yours over mine.  I wasn&#39;t clear with my last comment.  I was in a hurry to get to a meeting."}], "tags": [], "owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466028626, "creation_date": 1466028626, "answer_id": 37846647, "question_id": 37845306, "link": "https://stackoverflow.com/questions/37845306/pandas-multiindex-groupby-retaining-index-levels/37846647#37846647", "title": "Pandas MultiIndex groupby retaining index levels", "body": "<p>Try This:: <code>reset_index()</code></p>\n\n<pre><code>df = pd.DataFrame([['A', 1, 3],\n                   ['A', 2, 4],\n                   ['A', 3, 6],\n                   ['B', 1, 9],\n                   ['B', 2, 10],\n                   ['B', 4, 6]],\n                  columns=pd.Index(['Name', 'Date', 'Value'], name='ColumnName')\n                 ).set_index(['Name', 'Date'])\n\ndf = df.reset_index()\ndf2 = df.groupby([\"Name\"])[\"Name\",\"Date\",\"Value\" ].last()\ndf2.set_index(['Name', 'Date'], inplace=True)\n\n#            Value\n# Name Date       \n# A    3         6\n# B    4         6\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466029981, "post_id": 37846655, "comment_id": 63153850, "body": "If you track the edits to mine and op&#39;s posts, you&#39;ll see op is interested in performance. We went through a number of solutions similar to this one.  Use timeit to compare."}, {"owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466066448, "post_id": 37846655, "comment_id": 63166536, "body": "I added some comparisons. It&#39;s true it is faster (although I suspect that if the number of groups becomes larger, the difference will be smaller)."}, {"owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466113288, "post_id": 37846655, "comment_id": 63196439, "body": "@piRSquared I found an even simpler solution, and faster as well!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1466113415, "post_id": 37846655, "comment_id": 63196497, "body": "That&#39;s a good one.  Thing is, I already upvoted you on this answer.  Can&#39;t do it twice ;-)"}], "tags": [], "owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "is_accepted": true, "score": 6, "last_activity_date": 1466113523, "last_edit_date": 1466113523, "creation_date": 1466028651, "answer_id": 37846655, "question_id": 37845306, "link": "https://stackoverflow.com/questions/37845306/pandas-multiindex-groupby-retaining-index-levels/37846655#37846655", "title": "Pandas MultiIndex groupby retaining index levels", "body": "<p>By using <code>tail(1)</code> instead of <code>last()</code> on the groupby object, you get the desired behaviour:</p>\n\n<pre><code>In [22]: df.groupby(level='Name').tail(1)\nOut[22]:\nColumnName  Value\nName Date\nA    3          6\nB    4          6\n</code></pre>\n\n<p>This is because <code>tail</code> acts like a 'filter' method, keeping the original index intact (but only returning certain rows, in this case the last row of each group). <code>last</code> does not do this, because this method will give you the last non-NaN value for each column in each group, not necessarily returning original rows.</p>\n\n<hr>\n\n<p>OLD ANSWER (using <code>last</code>): You can rather simply achieve this using <code>groupby</code> by making the index level you want to retain in the groupby as a column:</p>\n\n<pre><code>In [44]: df.reset_index(level='Date').groupby(level=0).last()\nOut[44]:\nColumnName  Date  Value\nName\nA              3      6\nB              4      6\n</code></pre>\n\n<p>And afterwards you can set it back as the index to obtain the desired result:</p>\n\n<pre><code>In [46]: df.reset_index(level='Date').groupby(level=0).last().set_index('Date', append=True)\nOut[46]:\nColumnName  Value\nName Date\nA    3          6\nB    4          6\n</code></pre>\n\n<hr>\n\n<p>Since there was asked about performance, it is true that the groupby solution is slower on the example dataframe:</p>\n\n<pre><code>In [96]: %timeit get_slice(df)\n1000 loops, best of 3: 879 \u00b5s per loop\n\nIn [97]: %timeit df.reset_index(level='Date').groupby(level='Name').last().set_index('Date', append=True)\n100 loops, best of 3: 3.75 ms per loop\n\nIn [220]: %timeit df.groupby(level='Name').tail(1)\n1000 loops, best of 3: 1.04 ms per loop\n</code></pre>\n\n<p>But if you look at a bigger example dataframe, the difference is already much smaller (and the <code>last</code> method is even faster):</p>\n\n<pre><code>In [83]: df1 = pd.DataFrame(\n             {'Value':np.random.randint(100, size=len(string.letters)*100)}, \n             index=pd.MultiIndex.from_product([list(string.letters), range(100)],\n                                              names=['Name', 'Date']))\n\nIn [84]: df1\nOut[84]:\n           Value\nName Date\na    0        13\n     1         9\n     2        11\n     3        16\n...          ...\nZ    96       15\n     97       20\n     98       40\n     99       91\n\n[5200 rows x 1 columns]\n\nIn [85]: %timeit get_slice(df1)\n100 loops, best of 3: 3.24 ms per loop\n\nIn [86]: %timeit df1.reset_index(level='Date').groupby(level='Name').last().set_index('Date', append=True)\n100 loops, best of 3: 4.69 ms per loop\n\nIn [218]: %timeit df1.groupby(level='Name').tail(1)\n1000 loops, best of 3: 1.66 ms per loop\n</code></pre>\n\n<p>It will depend on the exact application of course, but in many cases such difference in performance won't be significant.</p>\n"}], "owner": {"reputation": 1851, "user_id": 2789717, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XdQcC.jpg?s=128&g=1", "display_name": "Pedro Braz", "link": "https://stackoverflow.com/users/2789717/pedro-braz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2540, "favorite_count": 1, "accepted_answer_id": 37846655, "answer_count": 3, "score": 5, "last_activity_date": 1466113523, "creation_date": 1466023026, "last_edit_date": 1466047036, "question_id": 37845306, "link": "https://stackoverflow.com/questions/37845306/pandas-multiindex-groupby-retaining-index-levels", "title": "Pandas MultiIndex groupby retaining index levels", "body": "<p>After research I have found no similar questions on this or any other forum.</p>\n\n<p>I'm grouping a MultiIndex dataframe by its inner level. The thing is, after grouping by I still want to know which were the \"chosen values\" on this inner index. </p>\n\n<p>So I have something of the sort</p>\n\n<pre><code>df = pd.DataFrame([['A', 1, 3],\n                   ['A', 2, 4],\n                   ['A', 3, 6],\n                   ['B', 1, 9],\n                   ['B', 2, 10],\n                   ['B', 4, 6]],\n                  columns=pd.Index(['Name', 'Date', 'Value'], name='ColumnName')\n                 ).set_index(['Name', 'Date'])\n\nColumnName         Value\nName    Date\nA        1           3\n         2           4\n         3           6 \nB        1           9\n         2           10\n         4           6\n</code></pre>\n\n<p>What I wanted is</p>\n\n<pre><code>ColumnName         Value\nName    Date\nA        3           6\nB        4           6\n</code></pre>\n\n<p>What I was capable of doing was using this command:</p>\n\n<pre><code>df.groupby(level=('Name')).last()\n</code></pre>\n\n<p>was retrieving this:</p>\n\n<pre><code>ColumnName         Value\nName    \nA                    6\nB                    6\n</code></pre>\n\n<p>Or, by using this command:</p>\n\n<pre><code>df.groupby(level=('Name','Date')).last()\n</code></pre>\n\n<p>retrieving an error.</p>\n\n<p>Keep in mind that this is a performance sensitive application.</p>\n\n<p>Thoughts ?</p>\n\n<p>EDIT: Meanwhile I did submit a <a href=\"https://github.com/pydata/pandas/issues/13455\" rel=\"nofollow\">feature request at GitHub</a> </p>\n"}, {"tags": ["python", "python-2.7", "rows"], "comments": [{"owner": {"reputation": 1, "user_id": 6471601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60cf9ce4e1510143294d1095acbf7a90?s=128&d=identicon&r=PG&f=1", "display_name": "juliab", "link": "https://stackoverflow.com/users/6471601/juliab"}, "edited": false, "score": 0, "creation_date": 1466023077, "post_id": 37845301, "comment_id": 63150933, "body": "need same dimensions to plot"}, {"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 2, "creation_date": 1466023139, "post_id": 37845301, "comment_id": 63150957, "body": "So, what is the question?"}], "answers": [{"tags": [], "owner": {"reputation": 468, "user_id": 3232626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0f0e00df340ce3630c945129d3f033f8?s=128&d=identicon&r=PG&f=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/3232626/bernie"}, "is_accepted": false, "score": 0, "last_activity_date": 1466023621, "creation_date": 1466023621, "answer_id": 37845468, "question_id": 37845301, "link": "https://stackoverflow.com/questions/37845301/number-of-rows-in-two-files-different-make-equal-by-deleting-from-end/37845468#37845468", "title": "number of rows in two files different--&gt; make equal by deleting from end", "body": "<p>It's pretty simple.</p>\n\n<pre><code>data = data[:max(rownum, rownum2)]\ndata2 = data2[:max(rownum, rownum2)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2214, "user_id": 2607571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898b3ca6cbc371e33421d40a3ef20c49?s=128&d=identicon&r=PG", "display_name": "Simon Kirsten", "link": "https://stackoverflow.com/users/2607571/simon-kirsten"}, "is_accepted": false, "score": 0, "last_activity_date": 1466023754, "creation_date": 1466023754, "answer_id": 37845504, "question_id": 37845301, "link": "https://stackoverflow.com/questions/37845301/number-of-rows-in-two-files-different-make-equal-by-deleting-from-end/37845504#37845504", "title": "number of rows in two files different--&gt; make equal by deleting from end", "body": "<p>Do you need to save the new data? If so this will do the job and the files must not even be in csv format:</p>\n\n<pre><code>with open(filename1, \"rb\") as f:\n    f1lines = f.readlines()\n\nwith open(filename2, \"rb\") as f:\n    f2lines = f.readlines()\n\nlength = min(len(f1lines), len(f2lines))\nf1lines = f1lines[:length]\nf2lines = f2lines[:length]\n\nwith open(filename1, \"wb\") as f:\n    for line in f1lines:\n        f.write(line)\n\nwith open(filename2, \"wb\") as f:\n    for line in f2lines:\n        f.write(line)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6471601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60cf9ce4e1510143294d1095acbf7a90?s=128&d=identicon&r=PG&f=1", "display_name": "juliab", "link": "https://stackoverflow.com/users/6471601/juliab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466023754, "creation_date": 1466022992, "last_edit_date": 1466023124, "question_id": 37845301, "link": "https://stackoverflow.com/questions/37845301/number-of-rows-in-two-files-different-make-equal-by-deleting-from-end", "title": "number of rows in two files different--&gt; make equal by deleting from end", "body": "<pre><code> with open(filename,\"r\") as f:\n       reader = csv.reader(f,delimiter = \",\")\n       data = list(reader)\n       rownum = len(data)\n with open(filename2,\"r\") as f:\n       reader2 = csv.reader2(f,delimiter = \",\")\n       data2 = list(reader2)\n       rownum2 = len(data)\n\n if rownum &gt; rownum2:\n       delete(rownum until rownum = rownum2 at end)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1466023211, "post_id": 37845273, "comment_id": 63150994, "body": "Post the function."}, {"owner": {"reputation": 1347, "user_id": 4622470, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6015804f9937b6231b4b0022d70b5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Rohanil", "link": "https://stackoverflow.com/users/4622470/rohanil"}, "edited": false, "score": 0, "creation_date": 1466023533, "post_id": 37845273, "comment_id": 63151139, "body": "I can not find any problem. It should work. It works for me. Check locals() again just before running final print."}, {"owner": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "edited": false, "score": 0, "creation_date": 1466023710, "post_id": 37845273, "comment_id": 63151228, "body": "It&#39;s still there. These three print statements are in a row. Just posted the whole function."}, {"owner": {"reputation": 1347, "user_id": 4622470, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6015804f9937b6231b4b0022d70b5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Rohanil", "link": "https://stackoverflow.com/users/4622470/rohanil"}, "edited": false, "score": 0, "creation_date": 1466024311, "post_id": 37845273, "comment_id": 63151569, "body": "are you sure that above 2 print statements printing the same message which you have mentioned? Use <code>print([locals()[k] for k in [&#39;allpre&#39;]])</code> for 3rd statement. If still doesn&#39;t work try removing second print statement."}], "answers": [{"comments": [{"owner": {"reputation": 1347, "user_id": 4622470, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6015804f9937b6231b4b0022d70b5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Rohanil", "link": "https://stackoverflow.com/users/4622470/rohanil"}, "edited": false, "score": 0, "creation_date": 1466023663, "post_id": 37845321, "comment_id": 63151210, "body": "this will create generator object"}], "tags": [], "owner": {"reputation": 377, "user_id": 6237060, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hy8Tj.jpg?s=128&g=1", "display_name": "Reinier Hern&#225;ndez", "link": "https://stackoverflow.com/users/6237060/reinier-hern%c3%a1ndez"}, "is_accepted": false, "score": 0, "last_activity_date": 1466023060, "creation_date": 1466023060, "answer_id": 37845321, "question_id": 37845273, "link": "https://stackoverflow.com/questions/37845273/why-is-my-call-to-a-variable-that-exists-in-the-local-scope-not-working-in-pytho/37845321#37845321", "title": "Why is my call to a variable that exists in the local scope not working in Python?", "body": "<p>Try whitout [] in your print</p>\n\n<pre><code>print(locals()[k] for k in ['allpre'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1466024000, "creation_date": 1466024000, "answer_id": 37845572, "question_id": 37845273, "link": "https://stackoverflow.com/questions/37845273/why-is-my-call-to-a-variable-that-exists-in-the-local-scope-not-working-in-pytho/37845572#37845572", "title": "Why is my call to a variable that exists in the local scope not working in Python?", "body": "<p>You're on Python 3, where a list comprehension has its own scope with its own local variables. <code>allpre</code> is not one of the comprehension's local variables.</p>\n"}, {"comments": [{"owner": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "edited": false, "score": 0, "creation_date": 1466024517, "post_id": 37845576, "comment_id": 63151687, "body": "I put these print statements in to troubleshoot. The final line of the function is <code>return {k:[op(eval(k)) for op in [mean,median,min,max,len,stdev]] for k in [&#39;allpre&#39;,&#39;allpost&#39;,&#39;allch&#39;,&#39;allpctch&#39;]}</code>. Is there a way to get this comprehension to access the function&#39;s namespace?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "reply_to_user": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "edited": false, "score": 0, "creation_date": 1466024901, "post_id": 37845576, "comment_id": 63151858, "body": "In general, you shouldn&#39;t need to be passing variable names around. But since you need the names to be the keys of the output dictionary, you can&#39;t skip them completely. Maybe you could pass the values directly along with their names, rather and not need <code>eval</code>? Untested: <code>return {k: op(v) for op in [[mean,median,min,max,len,stdev]] for k, v in [(&#39;allpre&#39;, allpre),(&#39;allpost&#39;, allpost), (&#39;allch&#39;, allch), (&#39;allpctch&#39;, allpctch)]}</code> Better might be to return just a sequence of values, where the order implies which value is which."}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 1, "last_activity_date": 1477475442, "last_edit_date": 1477475442, "creation_date": 1466024015, "answer_id": 37845576, "question_id": 37845273, "link": "https://stackoverflow.com/questions/37845273/why-is-my-call-to-a-variable-that-exists-in-the-local-scope-not-working-in-pytho/37845576#37845576", "title": "Why is my call to a variable that exists in the local scope not working in Python?", "body": "<p>Calling <code>locals</code> from within a list comprehension won't work the way you expect it to (in Python 3). That's because the main body of the list comprehension gets run within its own local namespace, just like it was a function returning a list. You can see this in your traceback, where <code>&lt;listcomp&gt;</code> shows up as one of the stack levels.</p>\n\n<p>In Python 2, list comprehensions didn't do this (but generator expressions did). A side effect of their old behavior was that the iteration variable (e.g. <code>k</code>) would \"leak\" out into the surrounding namespace, which was often very unexpected. List comprehensions can also break when they're run at the top level of a class, as the class variables previously defined won't be accessible to the comprehension function (since classes don't have scopes).</p>\n"}, {"tags": [], "owner": {"reputation": 455, "user_id": 1238367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e961c5522c9878b8395ba21baf032d6?s=128&d=identicon&r=PG", "display_name": "user1238367", "link": "https://stackoverflow.com/users/1238367/user1238367"}, "is_accepted": false, "score": 2, "last_activity_date": 1466069095, "last_edit_date": 1495535248, "creation_date": 1466024528, "answer_id": 37845709, "question_id": 37845273, "link": "https://stackoverflow.com/questions/37845273/why-is-my-call-to-a-variable-that-exists-in-the-local-scope-not-working-in-pytho/37845709#37845709", "title": "Why is my call to a variable that exists in the local scope not working in Python?", "body": "<p>List comprehensions have their local scope since Python 3.0. This was to prevent <a href=\"https://stackoverflow.com/a/4199355/1238367\">scope leak</a>.</p>\n\n<p><a href=\"https://docs.python.org/3.0/whatsnew/3.0.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.0/whatsnew/3.0.html</a></p>\n\n<blockquote>\n  <p>[...] note that list comprehensions have different semantics: they are closer to syntactic sugar for a generator expression inside a list() constructor, and in particular the loop control variables are no longer leaked into the surrounding scope.</p>\n</blockquote>\n"}], "owner": {"reputation": 4643, "user_id": 6382434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92373f448d7e3959af9cfb1d836ad4c3?s=128&d=identicon&r=PG&f=1", "display_name": "LMc", "link": "https://stackoverflow.com/users/6382434/lmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 37845576, "answer_count": 4, "score": 2, "last_activity_date": 1477475442, "creation_date": 1466022893, "last_edit_date": 1466023968, "question_id": 37845273, "link": "https://stackoverflow.com/questions/37845273/why-is-my-call-to-a-variable-that-exists-in-the-local-scope-not-working-in-pytho", "title": "Why is my call to a variable that exists in the local scope not working in Python?", "body": "<p>This code is part of a function. When I run the function line by line with the proper arguments, it runs fine, but when I call the function it doesn't seem to work. The following three lines of code and their output are from the function call:</p>\n\n<pre><code>print(locals().keys())\ndict_keys(['allpost', 'allpre', 'pre', 'post'])\n</code></pre>\n\n<p>You can see that 'allpre' exists in my local scope. This line of code, also in the function, works as well:</p>\n\n<pre><code>print(locals()['allpre'])\n[15.0, 12.0, 10.0, 6.0, 12.0, 8.0, 5.0, 3.0]\n</code></pre>\n\n<p>But for some reason this code doesn't work:</p>\n\n<pre><code>print([locals()[k] for k in ['allpre']])\nTraceback (most recent call last):\nFile \"prepost.py\", line 85, in &lt;module&gt;      parentinfantstats=delete.bystats(mod='parentinfant',assessment=\".*pii[1-3]plus\",dta=sortFiltbyMod.copy())\nFile \"/mnt/m/safecare/prepost/delete.py\", line 37, in bystats\nprint([locals()[k] for k in ['allpre']])\nFile \"/mnt/m/safecare/prepost/delete.py\", line 37, in &lt;listcomp&gt;\nprint([locals()[k] for k in ['allpre']])\nKeyError: 'allpre'\n</code></pre>\n\n<p>Does anyone have a suggestion for what the problem might be? I would post an example, but can't seem to duplicate the problem. </p>\n\n<p>This is the whole function:</p>\n\n<pre><code>import re\nfrom statistics import mean,median,stdev\n\ndef bystats(*,mod,assessment,dta):\n    varz=dta[mod]               \n    alab=[i for i in varz if re.match(assessment.lower(),i.lower())]\n    alab.insert(0,'prepost')\n    alab.insert(0,'cact_familycodenormalized')\n    alst=[varz[i] for i in alab] # [ID,prepost,assessment]\n    bymodprepost=[list(row) for row in zip(*alst) if row[1] in [1,2]] # [ID,prepost,assessment] if prepost 1 or 2\n    bymodpost=[i for i in bymodprepost if i[1]==2] # [ID,prepost,assessment] if prepost was 2 (post)\n    bymodpre=[i for i in bymodprepost if i[0] in [ids[0] for ids in bymodpost] and i[1]==1] # [ID,prepost,assessment] if ID had a post test\n\n    allpre,allpost,allch,allpctch=[],[],[],[]\n    for pre in bymodpre:\n        post=[i for i in bymodpost if i[0].upper().strip()==pre[0].upper().strip()][0] # find matching post test\n        if any([True for i in pre[2:]+post[2:] if float(i)&lt;0]): continue # cannot have negative number\n        sumpre=sum([float(i) for i in pre[2:]]) # sum of pre test assessments\n        allpre.append(sumpre)\n        sumpost=sum([float(i) for i in post[2:]]) # sum post test assessments\n        allpost.append(sumpost)\n        ch=sumpost-sumpre       # change from pre to post\n        allch.append(ch)\n        pctch=round(ch/sumpre*100,1) # percent change from pre to post\n        allpctch.append(pctch)\n    print(locals().keys())\n    print(locals()['allpre'])\n    print(locals()[k] for k in ['allpre'])\n</code></pre>\n\n<p>And this is the function call:                     </p>\n\n<pre><code>parentinfantstats=delete.bystats(mod='parentinfant',assessment=\".*pii[1-3]plus\",dta=sortFiltbyMod.copy())\n</code></pre>\n"}, {"tags": ["python", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 0, "last_activity_date": 1466025400, "creation_date": 1466025400, "answer_id": 37845916, "question_id": 37845269, "link": "https://stackoverflow.com/questions/37845269/pygame-paint-a-class-polygon-from-a-different-module/37845916#37845916", "title": "Pygame: paint a Class polygon from a different module", "body": "<p>You need to create an instance of the <code>Polygon</code> class, not just try to call methods on the class directly:</p>\n\n<pre><code>poly = Polygon() # call the class to create an instance; put this in your setup code \n\npoly.draw() # put this in your main loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1466041025, "last_edit_date": 1466041025, "creation_date": 1466028998, "answer_id": 37846731, "question_id": 37845269, "link": "https://stackoverflow.com/questions/37845269/pygame-paint-a-class-polygon-from-a-different-module/37846731#37846731", "title": "Pygame: paint a Class polygon from a different module", "body": "<p>Classes only define a \"template\" for a certain type of object. To actually create an object (or \"instance\") of that type, the class must be called and passed any data needed to complete its definition as arguments. Not hardcoding the data into the class itself will allow you to create more than one instance of the class and each one can have different attributes depending on what values are given \u2014 such as color, shape, position, etc \u2014 when it's created.</p>\n\n<p>With that in mind, I would change your code as follows. It still only has one polygon, but more could easily be added now just by calling <code>Polygon()</code> multiple times and storing the instances returned so their <code>draw()</code> method can be called when necessary.</p>\n\n<p>File <code>Objects.py</code>:</p>\n\n<pre><code>import pygame\n\nclass Polygon:\n    def __init__(self, *puntos):\n        self.puntos = puntos\n\n    def draw(self, surface):\n        \"\"\" Draw the shape on the surface. \"\"\"\n        pygame.draw.polygon(surface, (255, 0, 255), self.puntos)\n\n    def cursors(self):\n        pass\n</code></pre>\n\n<p>Main game module file:</p>\n\n<pre><code>from Objects import Polygon\nimport pygame\nimport sys\n\nclass Kernel:\n    def __init__(self):\n         pygame.init()\n         self.screen_size = (800,  600)\n         self.bg_color = (120, 120, 250)\n         self.fps = 60\n         self.screen = pygame.display.set_mode(self.screen_size)\n         self.clock = pygame.time.Clock()\n         self.polygon = Polygon((200, 30), (250, 80), (225, 130), (175, 130),\n                                (150 ,80))  # define shape here, not in class\n\n    def handle_input(self):\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                pygame.quit()\n                sys.exit()\n\n    def update(self):\n        capition = \"Music Art - FPS: {:.2f}\".format(self.clock.get_fps())\n        pygame.display.set_caption(capition)\n\n    def render(self):\n        self.screen.fill(self.bg_color)\n\n    def main_loop(self):\n        while True:\n            self.handle_input()\n            self.update()\n            self.render()\n            self.polygon.draw(self.screen)\n            pygame.display.flip()\n            self.clock.tick(self.fps)\n\nif __name__ == '__main__':\n    module_game = Kernel()\n    module_game.main_loop()\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 6238414, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-TpEkjb5u_Aw/AAAAAAAAAAI/AAAAAAAAABU/L2xX9kQx0RM/photo.jpg?sz=128", "display_name": "Carlos Azuaje", "link": "https://stackoverflow.com/users/6238414/carlos-azuaje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 37846731, "answer_count": 2, "score": 1, "last_activity_date": 1466041025, "creation_date": 1466022880, "question_id": 37845269, "link": "https://stackoverflow.com/questions/37845269/pygame-paint-a-class-polygon-from-a-different-module", "title": "Pygame: paint a Class polygon from a different module", "body": "<p><strong>History:</strong>\n<em>Achievement not understand what is wrong with my code, first time you use a class to create a figure.</em></p>\n\n<p><em>I have a module where is the Polygon class in it have the following code:</em></p>\n\n<pre><code>import pygame\n\nclass Polygon:\n    def __init__(self,):\n         self.list_puntos = [(200, 30), (250, 80), (225, 130), (175, 130),(150 ,80)]\n         self.image = pygame.Surface((32, 36))\n         self.image.fill((255, 255, 255))\ndef draw(self):\n    self.pygame.draw.polygon(self.image, (255, 0, 255), self.list_puntos)\n\ndef cursors(self):\n    pass\n</code></pre>\n\n<p><em>I have a Kernel with the following code:</em></p>\n\n<pre><code> import sys\n import pygame\n from Objects import Polygon\n\n\n\n call_polygon = Polygon\n\n\n\n\n\n\nclass Kernel:\n    def __init__(self):\n         pygame.init()\n\n         self.screen_size = (800,  600)\n         self.bg_color = (120, 120, 250)\n         self.fps = 60\n         self.screen = pygame.display.set_mode(self.screen_size)\n         self.clock = pygame.time.Clock()\n\n\n\n    def handle_input(self):\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n    def update(self):\n        capition = \"Music Art - FPS: {:.2f}\".format(self.clock.get_fps())\n        pygame.display.set_caption(capition)\n\n    def render(self):\n        self.screen.fill(self.bg_color)\n\n\n\n    def main_loop(self):\n\n        while True:\n            self.handle_input()\n            self.update()\n            self.render()\n            call_polygon.draw()\n  \"\"\"TypeError: unbound method draw() must be called with Polygon instance   as first argument (got nothing instead)\"\"\"\n\n\n\n            pygame.display.flip()\n            self.clock.tick(self.fps)\n\n\n\n    if __name__ == '__main__':\n             Module_game = Kernel()\n             Module_game.main_loop()\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "gnuplot", "visualization"], "comments": [{"owner": {"reputation": 1581, "user_id": 5227791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVf5M.jpg?s=128&g=1", "display_name": "ryanmc", "link": "https://stackoverflow.com/users/5227791/ryanmc"}, "edited": false, "score": 0, "creation_date": 1466023406, "post_id": 37845256, "comment_id": 63151074, "body": "You should be able to accomplish this with matplot3d.. example form site: <a href=\"http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html\" rel=\"nofollow noreferrer\">matplotlib.org/mpl_toolkits/mplot3d/tutorial.html</a>.  Once you run plt.show() you can drag the perspective and then save."}, {"owner": {"reputation": 123, "user_id": 6470668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c074cb0d6f5e6ef89ff03ec04af1096?s=128&d=identicon&r=PG&f=1", "display_name": "crestmods", "link": "https://stackoverflow.com/users/6470668/crestmods"}, "reply_to_user": {"reputation": 1581, "user_id": 5227791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVf5M.jpg?s=128&g=1", "display_name": "ryanmc", "link": "https://stackoverflow.com/users/5227791/ryanmc"}, "edited": false, "score": 0, "creation_date": 1466023926, "post_id": 37845256, "comment_id": 63151335, "body": "@ryanmc : When I drag in those plots I only change the viewing angles, not the position of the viewing point. I have edited to clarify that I want the latter. Or am I missing something?"}, {"owner": {"reputation": 8028, "user_id": 3581217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9103199ae078d2112c1f021a839bea7?s=128&d=identicon&r=PG", "display_name": "Bart", "link": "https://stackoverflow.com/users/3581217/bart"}, "edited": false, "score": 0, "creation_date": 1466023927, "post_id": 37845256, "comment_id": 63151338, "body": "Based on your edit; I don&#39;t understand the difference between <i>&quot;move the viewing point&quot;</i> and <i>&quot;change the viewing angles&quot;</i>."}, {"owner": {"reputation": 8028, "user_id": 3581217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9103199ae078d2112c1f021a839bea7?s=128&d=identicon&r=PG", "display_name": "Bart", "link": "https://stackoverflow.com/users/3581217/bart"}, "edited": false, "score": 0, "creation_date": 1466023961, "post_id": 37845256, "comment_id": 63151352, "body": "Or do you mean including e.g. zooming into the data?"}, {"owner": {"reputation": 123, "user_id": 6470668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c074cb0d6f5e6ef89ff03ec04af1096?s=128&d=identicon&r=PG&f=1", "display_name": "crestmods", "link": "https://stackoverflow.com/users/6470668/crestmods"}, "reply_to_user": {"reputation": 8028, "user_id": 3581217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9103199ae078d2112c1f021a839bea7?s=128&d=identicon&r=PG", "display_name": "Bart", "link": "https://stackoverflow.com/users/3581217/bart"}, "edited": false, "score": 0, "creation_date": 1466024132, "post_id": 37845256, "comment_id": 63151449, "body": "@Bart : If we think of the computer screen as the screen of the camera, I am referring to moving or turning the camera respectively."}], "answers": [{"tags": [], "owner": {"reputation": 1750, "user_id": 6113363, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6fc1418f618f7e37d14c816a144fcc30?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Solid", "link": "https://stackoverflow.com/users/6113363/tom-solid"}, "is_accepted": false, "score": 1, "last_activity_date": 1466052936, "creation_date": 1466052936, "answer_id": 37850158, "question_id": 37845256, "link": "https://stackoverflow.com/questions/37845256/plotting-a-point-cloud-and-moving-the-camera/37850158#37850158", "title": "Plotting a point cloud and moving the camera", "body": "<p>When you change the viewing angles it's like moving your head on an equidistant shell seeing continuously the center of the image/screen/object.</p>\n\n<p>What you said is moving your head in the x-y plane looking fixedly ahead so the content (the screen/object) shifts out from your sight. It is easy in <code>Gnuplot</code> with <code>set origin</code> like</p>\n\n<pre><code>set origin -0.25,0\nsplot exp(-x**2)*exp(-y**2)*sin(x)**2 with pm3d notitle\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MFMFc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MFMFc.png\" alt=\"enter image description here\"></a></p>\n\n<p>simply shifts the camera.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1jYDP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1jYDP.png\" alt=\"enter image description here\"></a></p>\n\n<p>What you have <em>mean</em> (I think) is step left (or right or jump or...) with your player but this changes not just the viewing point but also the viewed content. You can achieve it with <code>xrange</code> and <code>yrange</code>:</p>\n\n<pre><code>splot [-5:15] exp(-x**2)*exp(-y**2)*sin(x)**2 with pm3d notitle\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9qhmj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9qhmj.png\" alt=\"enter image description here\"></a></p>\n\n<p>Of course the changing of the x/y ranges depends on the current viewing angles what you have to calculate outside of <code>Gnuplot</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 6470668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c074cb0d6f5e6ef89ff03ec04af1096?s=128&d=identicon&r=PG&f=1", "display_name": "crestmods", "link": "https://stackoverflow.com/users/6470668/crestmods"}, "edited": false, "score": 0, "creation_date": 1466515967, "post_id": 37890119, "comment_id": 63340359, "body": "Thanks for the off-topic advice! (and the answer, of course) Worked out great for me."}], "tags": [], "owner": {"reputation": 1957, "user_id": 1635909, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/o26hX.png?s=128&g=1", "display_name": "Joce", "link": "https://stackoverflow.com/users/1635909/joce"}, "is_accepted": true, "score": 0, "last_activity_date": 1466196213, "creation_date": 1466196213, "answer_id": 37890119, "question_id": 37845256, "link": "https://stackoverflow.com/questions/37845256/plotting-a-point-cloud-and-moving-the-camera/37890119#37890119", "title": "Plotting a point cloud and moving the camera", "body": "<p>No, gnuplot cannot <em>really</em> move the viewing point, for the good reason that the viewing point is at infinity: all you can do is set an angle and magnification (using <code>set view</code>) and an offset within the viewing window (with <code>set origin</code>).  That means, you can move the viewing point on a sphere at infinity, but not among the points you're plotting.</p>\n\n<p>(Question 2 is off-topic as a software advice, but you're looking for a rendering software such as paraview)</p>\n"}], "owner": {"reputation": 123, "user_id": 6470668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c074cb0d6f5e6ef89ff03ec04af1096?s=128&d=identicon&r=PG&f=1", "display_name": "crestmods", "link": "https://stackoverflow.com/users/6470668/crestmods"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 0, "accepted_answer_id": 37890119, "answer_count": 2, "score": 2, "last_activity_date": 1466196213, "creation_date": 1466022805, "last_edit_date": 1466023986, "question_id": 37845256, "link": "https://stackoverflow.com/questions/37845256/plotting-a-point-cloud-and-moving-the-camera", "title": "Plotting a point cloud and moving the camera", "body": "<p>I have a list of points given by their x, y, z coordinates. I would like to plot these points on a computer. I have managed to do this with gnuplot and with the python library matplotlib separately. However for these two solutions, it seems hard to change the 'viewing point', or the point from which the projection of the 3D point cloud to the 2D screen is done.</p>\n\n<p>1) Is there any easy way to, preferably continuously, move the viewing point in gnuplot (the splot command) or with matplotlib (the plot command)?</p>\n\n<p>2) What other libraries are there for which this is an easy task?</p>\n\n<p>EDIT: I want to <em>move</em> the viewing point (like the player in an first-person shooter, say), not change the viewing angles.</p>\n"}, {"tags": ["python", "emacs", "spacemacs"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 422661, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a73218b65723945471ac6df38e588bbe?s=128&d=identicon&r=PG", "display_name": "dbrodie", "link": "https://stackoverflow.com/users/422661/dbrodie"}, "edited": false, "score": 0, "creation_date": 1466336328, "post_id": 37870728, "comment_id": 63265801, "body": "As mentioned in the edit, your guess was close but still correct. The indentation was actually two hard tabs and not 8 spaces, but setting the python-indent-offset to 4 did fix it. now I just need to figure out why dtrt-indent is setting the values improperly. If you have any suggestions I would appreciate it."}, {"owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "reply_to_user": {"reputation": 61, "user_id": 422661, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a73218b65723945471ac6df38e588bbe?s=128&d=identicon&r=PG", "display_name": "dbrodie", "link": "https://stackoverflow.com/users/422661/dbrodie"}, "edited": false, "score": 0, "creation_date": 1466463018, "post_id": 37870728, "comment_id": 63316497, "body": "I took a look at the source code for <code>dtrt-mode</code> (<code>C-h f dtrt-mode</code>, click on <code>dtrt-indent.el</code>). It looks like it inherits from <code>standard-indent</code> so try putting <code>(setq standard-indent 4)</code> in your <code>.emacs</code>."}], "tags": [], "owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "is_accepted": true, "score": 5, "last_activity_date": 1466118066, "creation_date": 1466118066, "answer_id": 37870728, "question_id": 37845243, "link": "https://stackoverflow.com/questions/37845243/python-indentation-in-spacemacs-with-hard-tabs-is-off/37870728#37870728", "title": "Python indentation in Spacemacs with hard tabs is off", "body": "<p>Try <code>M-x whitespace-mode</code> and repeat this experiment. What do you see? Did you indent with spaces or with tabs?</p>\n\n<p>I'm guessing you'll see something like this:</p>\n\n<pre><code>def\u00b7func():\n\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\n\u00bb   print\u00b7'line'\n</code></pre>\n\n<p>This would mean you have <code>python-indent-offset</code> set to 8, <code>indent-tabs-mode</code> set to nil (aka indent with spaces), and <code>tab-width</code> set to 4.</p>\n\n<p>If that's not the case, what are the values of those variables (<code>C-h v python-indent-offset</code>, etc.)?</p>\n\n<p>If that <em>is</em> the case, you can fix the problem by running</p>\n\n<pre><code>(setq-default python-indent-offset 4)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 422661, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a73218b65723945471ac6df38e588bbe?s=128&d=identicon&r=PG", "display_name": "dbrodie", "link": "https://stackoverflow.com/users/422661/dbrodie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3150, "favorite_count": 0, "accepted_answer_id": 37870728, "answer_count": 1, "score": 1, "last_activity_date": 1466332830, "creation_date": 1466022767, "last_edit_date": 1466332830, "question_id": 37845243, "link": "https://stackoverflow.com/questions/37845243/python-indentation-in-spacemacs-with-hard-tabs-is-off", "title": "Python indentation in Spacemacs with hard tabs is off", "body": "<p>Let me preface by saying that I am a relatively new emacs/spacemacs convert from vim, so my my knowledge is still pretty basic.</p>\n\n<p>I have spacemacs set up with the python layer, with the additional package of dtrt-indent listed in dotspacemacs-additional-packages. And setting</p>\n\n<pre><code>(dtrt-indent-mode t)\n</code></pre>\n\n<p>in the dotspacemacs/user-config. I need the dtrt-indent as I am working on a few projects (in python and lua) where I am not the one who sets the indentation rules.</p>\n\n<p>This configuration works fine for python files with soft-tabs of varying length. This configuration also works for lua files that have hard tabs. </p>\n\n<p>When I open a python file indented with hard tabs something seems to get messed up, it appears to think that the indentation is two hard tabs. Meaning, if I have code like this (pretend that the 4 spaces are tabs):</p>\n\n<pre><code>def func():|  &lt;--- Cursor\n    print 'line'\n</code></pre>\n\n<p>and press enter, I get:</p>\n\n<pre><code>def func():\n        |  &lt;--- Cursor\n    print 'line'\n</code></pre>\n\n<p>The status line prints dtrt-indent's message saying:</p>\n\n<pre><code>Note: indent-tabs-mode adjusted to t\n</code></pre>\n\n<p>Note: As stated I'm pretty new at this, and my spacemacs configuration is pretty sparse. There is nothing else in my user-config, I have not custom layers, I don't even have any additional packages other than dtrt-indent.</p>\n\n<p>EDIT:</p>\n\n<p>python-indent-offset is set to 8</p>\n\n<p>indent-tabs-mode is set to t</p>\n\n<p>tab-width is set to 4</p>\n"}, {"tags": ["python", "django", "http-status-code-404", "openshift", "wsgi"], "comments": [{"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466192270, "post_id": 37845189, "comment_id": 63232809, "body": "Can I write something in .htaccess ?"}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466401564, "post_id": 37845189, "comment_id": 63281865, "body": "What is the apache configuration for static folder ? This location is fixed in apache ?"}], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466103816, "post_id": 37845388, "comment_id": 63191732, "body": "I tried your post @dmitryro but it does not solve my issue"}, {"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "reply_to_user": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466104715, "post_id": 37845388, "comment_id": 63192138, "body": "Please update your wsgi.py and manage.py and see what specific error messages you&#39;re getting, if amy"}], "tags": [], "owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "is_accepted": false, "score": 0, "last_activity_date": 1466023907, "last_edit_date": 1466023907, "creation_date": 1466023319, "answer_id": 37845388, "question_id": 37845189, "link": "https://stackoverflow.com/questions/37845189/static-files-on-openshift-with-django/37845388#37845388", "title": "Static files on Openshift with Django", "body": "<p>in your settings.py make sure you have:  </p>\n\n<pre><code>import os\nimport sys\n\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n\nSTATICFILES_DIRS = (os.path.join(BASE_DIR, 'static_files'),\n                   )  # create static_files dir and place there your static  \n                      # files to be collected, as static is the destination\n                      # directory of your local and other Django \n                      # modules static files \n\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static', )\nSTATIC_URL = 'http://yourdomain.com/static/'\n</code></pre>\n\n<p>once done run </p>\n\n<pre><code> ./manage.py collectstatic \n</code></pre>\n\n<p>make sure you have tree like</p>\n\n<pre><code> yourproject+\n            |\n            +-yourproject\n            |           | \n            |           +urls.py  \n            |           |\n            |           +settings.py\n            |           |\n            |           +wsgi.py\n            |\n            +manage.py\n            |\n            +static_files\n            |\n            +static\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466108587, "post_id": 37867675, "comment_id": 63194188, "body": "My <b>wsgi.py is good</b>. I haven&#39;t to use <code>.&#47;manage.py collectstatic</code> if my static folder is already full ?"}, {"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "reply_to_user": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466108758, "post_id": 37867675, "comment_id": 63194288, "body": "You HAVE to use it as the static is where files are TAKEN, not where they are initially placed. The philosophy of Django to collect files from all over the known places in your OS and place them into static."}, {"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "reply_to_user": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466108857, "post_id": 37867675, "comment_id": 63194346, "body": "STATICFILES_FINDERS = [     &#39;django.contrib.staticfiles.finders.FileSystemFinder&#39;,     &#39;django.contrib.staticfiles.finders.AppDirectoriesFinder&#39;, ]    # this is used by Django to check static files and set them in STATIC_ROOT"}, {"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "reply_to_user": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466108998, "post_id": 37867675, "comment_id": 63194414, "body": "collectstatic makes sure your static files are up to date and are reachable by Django."}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466109924, "post_id": 37867675, "comment_id": 63194903, "body": "Thanks @dmitryro but even if I launch the command I can&#39;t reach my static files"}, {"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "reply_to_user": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466110078, "post_id": 37867675, "comment_id": 63195001, "body": "Try specifying it explicitly as STATICFILES_DIRS = &#39;/your_location_from_root/static&#39;"}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466110790, "post_id": 37867675, "comment_id": 63195374, "body": "I put the absolute path in STATICFILES_DIRS and STATIC_ROOT without success"}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1466146699, "post_id": 37867675, "comment_id": 63205658, "body": "I have to access to my static file by <code>http:&#47;&#47;yourdomain.com&#47;static&#47;...</code> ?"}], "tags": [], "owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "is_accepted": false, "score": 0, "last_activity_date": 1466104668, "creation_date": 1466104668, "answer_id": 37867675, "question_id": 37845189, "link": "https://stackoverflow.com/questions/37845189/static-files-on-openshift-with-django/37867675#37867675", "title": "Static files on Openshift with Django", "body": "<p>You also need to make sure your manage.py is modified to be:</p>\n\n<pre><code>import os\nimport sys\n\nif __name__ == \"__main__\":\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"yourproject.settings\")\n\n    from django.core.management import execute_from_command_line  \n\n    execute_from_command_line(sys.argv)\n</code></pre>\n\n<p>and wsgi.py to be</p>\n\n<pre><code>import os\n\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"yourproject.settings\")\n\napplication = get_wsgi_application()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "is_accepted": true, "score": 0, "last_activity_date": 1468587172, "last_edit_date": 1468587172, "creation_date": 1467357847, "answer_id": 38139439, "question_id": 37845189, "link": "https://stackoverflow.com/questions/37845189/static-files-on-openshift-with-django/38139439#38139439", "title": "Static files on Openshift with Django", "body": "<p>In the <strong>wsgi.py</strong> I have to have\n<code>\nsys.path.append(os.path.join(os.environ['OPENSHIFT_REPO_DIR']))\nos.environ['DJANGO_SETTINGS_MODULE' ] = 'project.settings.app'\n</code>\nand in my <strong>settings.py</strong>\n<code>\nSTATIC_ROOT = os.path.join(os.getenv('OPENSHIFT_REPO_DIR'), 'wsgi/static', )\nSTATIC_URL = '/static/'\n</code>\nAnd the filesystem of my website\n<code>\nrepo\n project\n  ...\n wsgi\n  static\n wsgi.py\n</code></p>\n"}], "owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 38139439, "answer_count": 3, "score": 1, "last_activity_date": 1468587172, "creation_date": 1466022547, "last_edit_date": 1495542153, "question_id": 37845189, "link": "https://stackoverflow.com/questions/37845189/static-files-on-openshift-with-django", "title": "Static files on Openshift with Django", "body": "<p>I can't found my static files like css, js and picture. I get 404 error page.</p>\n\n<p>In my <strong>settings django</strong> I have</p>\n\n<pre><code>STATIC_ROOT = '/var/lib/openshift/*id*/app-root/repo/*project*/*app*' \nSTATIC_URL = '/static/'\n</code></pre>\n\n<p>and my filesystem are</p>\n\n<pre><code> - project\n   - app\n     - wsgi.py\n     - static # I also tried to move this folder in wsgi folder\n       - css\n         - base.css\n     - ... \n</code></pre>\n\n<p>I tried to move the <strong>static folder</strong> in <strong>wsgi folder created before</strong>.\nI also tried to move <strong>my static folder or wsgi folder in data</strong> folder of openshift without success.</p>\n\n<p>I follow few help posts from Stackoverflow without found my answer</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/24595223/static-files-on-openshift-django\">Static files on OpenShift Django</a></li>\n<li><a href=\"https://stackoverflow.com/questions/22660304/serving-django-static-files-in-openshift\">Serving Django static files in OpenShift</a></li>\n</ul>\n\n<p>Can you help me to configure my static folder ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "is_accepted": true, "score": 1, "last_activity_date": 1466094443, "creation_date": 1466094443, "answer_id": 37864661, "question_id": 37845130, "link": "https://stackoverflow.com/questions/37845130/load-data-on-startup/37864661#37864661", "title": "Load data on startup", "body": "<p>It seems that what I am looking for doesn't exist. Django trusts the user to deal with migrations and such and doesn't check the database on load. So there is no place in the system where you can load some data on system start and be sure that you can actually load it. What I ended up doing is loading the data in ready(), but do a sanity check first by doing MyModel.objects.exist() in a try: except: block and returning if there was an exception. This is not ideal, but I haven't found any other way.</p>\n"}], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 37864661, "answer_count": 1, "score": 1, "last_activity_date": 1466094443, "creation_date": 1466022315, "question_id": 37845130, "link": "https://stackoverflow.com/questions/37845130/load-data-on-startup", "title": "Load data on startup", "body": "<p>I have a file with a bunch of data common between several projects. The data needs to be loaded into the Django database. The file doesn't change that much, so loading it once on server start is sufficient. Since the file is shared between multiple projects, I do not have full control over the format, so I cannot convert this into a fixture or something.</p>\n\n<p>I tried loading it in ready(), but then I run into a problem when creating a new database or migrating an existing database, since apparently ready() is called before migrations are complete and I get errors from using models that do not have underlying tables. I tried to set it in class_prepared signal handler, but the loading process uses more than one model, so I cannot really be sure all required model classes are prepared. Also it seems that ready() is not called when running tests, so unit tests fail because the data is missing. What is the right place to do something like this?</p>\n"}, {"tags": ["python", "jenkins", "setuptools", "pypi"], "comments": [{"owner": {"reputation": 3162, "user_id": 3756593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c5kio.jpg?s=128&g=1", "display_name": "Rik", "link": "https://stackoverflow.com/users/3756593/rik"}, "edited": false, "score": 0, "creation_date": 1498139848, "post_id": 37845125, "comment_id": 76385843, "body": "If you run it in docker, it would make it a whole lot easier, because you can set the <code>HOME</code> var for the container and mount a custom <code>&#47;pypirc</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 2, "last_activity_date": 1480458829, "creation_date": 1480458829, "answer_id": 40877033, "question_id": 37845125, "link": "https://stackoverflow.com/questions/37845125/custom-location-for-pypirc-file/40877033#40877033", "title": "Custom location for .pypirc file", "body": "<p>In the last version of <code>setuptools</code> (version 29.0.1), the <code>.pypirc</code> file is loaded from the <code>$HOME</code> directory (or <code>%USERPROFILE%</code> on Windows).</p>\n\n<p>This is done in the <code>setuptools.package_index.PyPIConfig</code> class. See the <a href=\"https://github.com/pypa/setuptools/blob/master/setuptools/package_index.py#L997\" rel=\"nofollow noreferrer\">source code</a> on GitHub:</p>\n\n<pre><code>class PyPIConfig(configparser.RawConfigParser):\n    def __init__(self):\n        \"\"\"\n        Load from ~/.pypirc\n        \"\"\"\n        defaults = dict.fromkeys(['username', 'password', 'repository'], '')\n        configparser.RawConfigParser.__init__(self, defaults)\n\n        rc = os.path.join(os.path.expanduser('~'), '.pypirc')\n        if os.path.exists(rc):\n            self.read(rc)\n</code></pre>\n\n<p>So, the only solution I see is to temporary redefine the <code>HOME</code> environment variable before running the Jenkins job.</p>\n"}, {"tags": [], "owner": {"reputation": 4387, "user_id": 673271, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/8skfj.png?s=128&g=1", "display_name": "mattmilten", "link": "https://stackoverflow.com/users/673271/mattmilten"}, "is_accepted": false, "score": 7, "last_activity_date": 1497869217, "creation_date": 1497869217, "answer_id": 44628510, "question_id": 37845125, "link": "https://stackoverflow.com/questions/37845125/custom-location-for-pypirc-file/44628510#44628510", "title": "Custom location for .pypirc file", "body": "<p>You might want to check out <a href=\"https://pypi.python.org/pypi/twine\" rel=\"noreferrer\">twine</a>. This tool allows you to specify a custom <code>.pypirc</code> file via the option <code>--config-file</code></p>\n"}, {"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": false, "score": 7, "last_activity_date": 1499855994, "last_edit_date": 1499855994, "creation_date": 1499855102, "answer_id": 45055061, "question_id": 37845125, "link": "https://stackoverflow.com/questions/37845125/custom-location-for-pypirc-file/45055061#45055061", "title": "Custom location for .pypirc file", "body": "<p>This is doable by overloading the default command classes used for communication with the PyPI or your custom repository server. This can be done in your <code>setup.py</code> script. Let the code do the talk first:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># this is your project's setup.py script\n\nimport os\nfrom distutils.command.register import register as register_orig\nfrom distutils.command.upload import upload as upload_orig\n\nfrom setuptools import setup\n\n\nclass register(register_orig):\n\n    def _get_rc_file(self):\n        return os.path.join('.', '.pypirc')\n\nclass upload(upload_orig):\n\n    def _get_rc_file(self):\n        return os.path.join('.', '.pypirc')\n\nsetup(\n    name='myproj',\n    ...\n    cmdclass={\n        'register': register,\n        'upload': upload,\n    }\n)\n</code></pre>\n\n<p>Now, if you call e.g.</p>\n\n<pre><code>$ python setup.py sdist register upload\n</code></pre>\n\n<p>the server credentials will be taken from <code>.pypirc</code> in the project directory instead of the default <code>~/.pypirc</code> one.</p>\n\n<p>So basically, all you need to do is to replace the <code>register</code> and <code>upload</code> commands with your own implementations. These implementations redefine the <code>_get_rc_file</code> method with your own logic. After that, don't forget to adjust the <code>cmd_class</code> argument in your <code>setup</code> function so your own command classes are used instead of the standard ones.</p>\n\n<p>Of course, as both classes redefine the same method, you could prettify the code by e.g. writing a mixin class and reusing it etc etc. Also, if you are uploading the sphinx docs to PyPI via <code>upload_docs</code> command, you have to overload it the same way. Anyway, you should get the basic idea of command overloading from the snippet above.</p>\n"}], "owner": {"reputation": 883, "user_id": 1330434, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb3a229bb021331eac027f657549e7c5?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/1330434/srikanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11848, "favorite_count": 3, "answer_count": 3, "score": 16, "last_activity_date": 1499855994, "creation_date": 1466022299, "question_id": 37845125, "link": "https://stackoverflow.com/questions/37845125/custom-location-for-pypirc-file", "title": "Custom location for .pypirc file", "body": "<p>Does <code>setuptools</code> allow for the <code>.pypirc</code> file to be specified in a custom location rather than <code>$HOME/.pypirc</code>? I'm setting up a jenkins job to publish to an internal repository, and want the <code>.pypirc</code> file to be inside the job's workspace.</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning"], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 5505224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153115641946046/picture?type=large", "display_name": "Rajesh Mappu", "link": "https://stackoverflow.com/users/5505224/rajesh-mappu"}, "edited": false, "score": 0, "creation_date": 1492486778, "post_id": 37845081, "comment_id": 73981961, "body": "This answer got me clear more than the one linked in the question."}], "tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": false, "score": 13, "last_activity_date": 1466022171, "creation_date": 1466022171, "answer_id": 37845081, "question_id": 37844998, "link": "https://stackoverflow.com/questions/37844998/what-does-tf-app-flags-do-why-we-need-that/37845081#37845081", "title": "what does tf.app.flags do? why we need that?", "body": "<p>This is google's way for parsing arguments from the commandline.  Have a look at <a href=\"https://github.com/google/python-gflags\" rel=\"noreferrer\">python-gflags</a>.  As far as I'm aware, google is the primary user of this commandline parsing library.  The rest of the world uses <a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"noreferrer\"><code>argparse</code></a> these days.</p>\n\n<p>But basically, the \"tl;dr;\" is that you're right -- They are setting up global data.  However, it's global data that can be fiddled with via the commandline.</p>\n"}], "owner": {"reputation": 8045, "user_id": 6379348, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/150f21e880b86f48e82e95af7d9f3c40?s=128&d=identicon&r=PG&f=1", "display_name": "zesla", "link": "https://stackoverflow.com/users/6379348/zesla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9313, "favorite_count": 1, "closed_date": 1466023375, "answer_count": 1, "score": 9, "last_activity_date": 1466022531, "creation_date": 1466021907, "last_edit_date": 1466022531, "question_id": 37844998, "link": "https://stackoverflow.com/questions/37844998/what-does-tf-app-flags-do-why-we-need-that", "closed_reason": "Duplicate", "title": "what does tf.app.flags do? why we need that?", "body": "<p>I'm reading the tensorflow tutorial file <code>fully_connected_feed.py</code>  which contains the following code. I do not understand what those mean.  Why do we need that? It seems that it's just defining some global variables. Why not just define those directly? Any help is  appreciated. thanks</p>\n\n<pre><code>flags = tf.app.flags\nFLAGS = flags.FLAGS\nflags.DEFINE_float('learning_rate', 0.01, 'Initial learning rate.')\nflags.DEFINE_integer('max_steps', 2000, 'Number of steps to run trainer.')\nflags.DEFINE_integer('hidden1', 128, 'Number of units in hidden layer 1.')\nflags.DEFINE_integer('hidden2', 32, 'Number of units in hidden layer 2.')\nflags.DEFINE_integer('batch_size', 100, 'Batch size.  '\n                     'Must divide evenly into the dataset sizes.')\nflags.DEFINE_string('train_dir', 'data', 'Directory to put the training data.')\nflags.DEFINE_boolean('fake_data', False, 'If true, uses fake data '\n                     'for unit testing.')\n</code></pre>\n"}, {"tags": ["python", "anaconda", "spyder"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1466021930, "post_id": 37844969, "comment_id": 63150358, "body": "What do you mean by <i>&#39;working on&#39;</i>? Do you mean running? <code>sys.argv[0]</code> gives the name of the script which was run as an entry point to the running process. See <a href=\"https://docs.python.org/2/library/sys.html#sys.argv\" rel=\"nofollow noreferrer\">the docs</a>"}, {"owner": {"reputation": 2615, "user_id": 5235265, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/1Yl71.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5235265/gabriel"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1466021998, "post_id": 37844969, "comment_id": 63150388, "body": "sorry, yes I mean the code I&#39;m running."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466022108, "post_id": 37844969, "comment_id": 63150445, "body": "<code>getcwd()</code> is the working directory. That&#39;s a completely different thing from the directory your code is in. Why do you expect them to be the same?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1466022123, "post_id": 37844969, "comment_id": 63150451, "body": "Are you in an interactive prompt? <code>ipython</code> is Interactive Python. The script to start the prompt process is the one you quote above. It looks as though you aren&#39;t running your script."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466022157, "post_id": 37844969, "comment_id": 63150466, "body": "<i>nod</i>. If your question is where the current module&#39;s source came from, that&#39;s a <b>completely</b> different question."}, {"owner": {"reputation": 9384, "user_id": 5493302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Bl41CqZhT5I/AAAAAAAAAAI/AAAAAAAAdzI/ALmG0mBJCSk/photo.jpg?sz=128", "display_name": "Tomasz Jakub Rup", "link": "https://stackoverflow.com/users/5493302/tomasz-jakub-rup"}, "edited": false, "score": 0, "creation_date": 1466022209, "post_id": 37844969, "comment_id": 63150497, "body": "How You run the code?"}, {"owner": {"reputation": 2615, "user_id": 5235265, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/1Yl71.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5235265/gabriel"}, "edited": false, "score": 0, "creation_date": 1466022354, "post_id": 37844969, "comment_id": 63150574, "body": "I&#39;m running the code in Spyder."}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 2, "creation_date": 1466022669, "post_id": 37844969, "comment_id": 63150738, "body": "Looks like <code>ipython</code>/<code>spyder</code> is wrapping your script.  You could fall back to <code>__file__</code>, but it gives you the filename of the current module.  Each py file will give you its name, so you would need to only reference your main module&#39;s <code>__file__</code>."}, {"owner": {"reputation": 2615, "user_id": 5235265, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/1Yl71.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5235265/gabriel"}, "reply_to_user": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1466023925, "post_id": 37844969, "comment_id": 63151334, "body": "thanks @rrauenza but I didn&#39;t understand your comment"}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 1, "creation_date": 1466023984, "post_id": 37844969, "comment_id": 63151368, "body": "<a href=\"http://stackoverflow.com/questions/9271464/what-does-the-file-wildcard-mean-do/9271617\" title=\"what does the file wildcard mean do\">stackoverflow.com/questions/9271464/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9384, "user_id": 5493302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Bl41CqZhT5I/AAAAAAAAAAI/AAAAAAAAdzI/ALmG0mBJCSk/photo.jpg?sz=128", "display_name": "Tomasz Jakub Rup", "link": "https://stackoverflow.com/users/5493302/tomasz-jakub-rup"}, "is_accepted": true, "score": 2, "last_activity_date": 1466024061, "creation_date": 1466024061, "answer_id": 37845591, "question_id": 37844969, "link": "https://stackoverflow.com/questions/37844969/sys-argv0-is-not-showing-the-name-of-file-in-python/37845591#37845591", "title": "sys.argv[0] is not showing the name of file in python", "body": "<p><code>argv</code> contain a list of command line arguments passed to python script. <code>argv[0]</code> is the script name. <a href=\"https://docs.python.org/2/library/sys.html#sys.argv\" rel=\"nofollow\">doc</a></p>\n\n<p>IDE like Spyder / PyCharm doesn't run the script direct. It's run the wrapper that run Your script.</p>\n\n<p>In this case Spyder run the <code>start_ipython_kernel.py</code> script that get a Your script name as a parameter and run it.</p>\n\n<p>If You need a script name use a <code>__file__</code> var.</p>\n"}], "owner": {"reputation": 2615, "user_id": 5235265, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/1Yl71.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5235265/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 899, "favorite_count": 0, "accepted_answer_id": 37845591, "answer_count": 1, "score": 3, "last_activity_date": 1466024061, "creation_date": 1466021802, "question_id": 37844969, "link": "https://stackoverflow.com/questions/37844969/sys-argv0-is-not-showing-the-name-of-file-in-python", "title": "sys.argv[0] is not showing the name of file in python", "body": "<p>If I understand correctly, When typing sys.argv[0] it shows the name of the .py file one is working on. But when I  do this, it shows me a different name: </p>\n\n<pre><code>sys.argv[0]\n'C:\\\\Anaconda\\\\lib\\\\site-packages\\\\spyderlib\\\\widgets\\\\externalshell\\\\start_ipython_kernel.py' \n</code></pre>\n\n<p>The real name of the file is <em>'Ra x 13 arima.py'</em> and its located in <em>'C:\\Users\\infantjo\\Documents\\Python Scripts\\Projects\\Work in Progress'</em></p>\n\n<p>The current directory  is:</p>\n\n<pre><code>os.getcwd()\n'C:\\\\Users\\\\infantjo\\\\Documents\\\\Python Scripts\\\\Projects'\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>(Im using Python 2.7.11 in Spyder 2.3.8 installed with Anaconda 2.3.0, 64bit).   </p>\n"}, {"tags": ["python", "md5", "hashlib"], "answers": [{"tags": [], "owner": {"reputation": 2214, "user_id": 2607571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898b3ca6cbc371e33421d40a3ef20c49?s=128&d=identicon&r=PG", "display_name": "Simon Kirsten", "link": "https://stackoverflow.com/users/2607571/simon-kirsten"}, "is_accepted": true, "score": 12, "last_activity_date": 1466022956, "last_edit_date": 1466022956, "creation_date": 1466022307, "answer_id": 37845128, "question_id": 37844962, "link": "https://stackoverflow.com/questions/37844962/python-how-to-create-a-16-character-long-digest-using-hashlib-md5-algorithm/37845128#37845128", "title": "Python: How to create a 16 character long digest using hashlib.md5 algorithm?", "body": "<p><em>\"an optional second argument which, if true, returns a smaller hash of length 16 instead of the normal 32 character long hash.\"</em></p>\n\n<p>This is not true: The second parameter <a href=\"http://php.net/manual/en/function.md5.php\" rel=\"noreferrer\"><code>$raw_output</code></a> specifies whether the output should be <a href=\"https://en.wikipedia.org/wiki/Hexadecimal\" rel=\"noreferrer\">hexadecimal</a> (hex) encoded or in a raw <a href=\"https://en.wikipedia.org/wiki/Binary_number\" rel=\"noreferrer\">binary</a> string. The hash length does not change but rather the length of the encoded string.</p>\n\n<pre><code>import hashlib\n\ndigest = hashlib.md5(\"asdf\").digest() # 16 byte binary\nhexdigest = hashlib.md5(\"asdf\").hexdigest() # 32 character hexadecimal\n</code></pre>\n\n<p>The first should only be used inside your code and not presented to the user as it will contain unprintable characters. That's why you should always use the <code>hexdigest</code> function if you want to present the hash to a user.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11757599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHG5C.jpg?s=128&g=1", "display_name": "klvntrn", "link": "https://stackoverflow.com/users/11757599/klvntrn"}, "is_accepted": false, "score": 1, "last_activity_date": 1562647906, "creation_date": 1562647906, "answer_id": 56945538, "question_id": 37844962, "link": "https://stackoverflow.com/questions/37844962/python-how-to-create-a-16-character-long-digest-using-hashlib-md5-algorithm/56945538#56945538", "title": "Python: How to create a 16 character long digest using hashlib.md5 algorithm?", "body": "<p>A note for those trying to get the hash in Python 3:</p>\n\n<p>Because Unicode-objects must be encoded before hashing with <code>hashlib</code> and because strings in Python 3 are Unicode by default (unlike Python 2), you'll need to encode the string using the <code>.encode</code> method. Using the example above, and assuming utf-8 encoding:</p>\n\n<pre><code>import hashlib\n\ndigest = hashlib.md5(\"asdf\".encode(\"utf-8\")).digest() # 16 byte binary\nhexdigest = hashlib.md5(\"asdf\".encode(\"utf-8\")).hexdigest() # 32 character hexadecimal\n</code></pre>\n"}], "owner": {"reputation": 7533, "user_id": 1531173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100003240952503/picture?type=large", "display_name": "Adil Malik", "link": "https://stackoverflow.com/users/1531173/adil-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6751, "favorite_count": 1, "accepted_answer_id": 37845128, "answer_count": 2, "score": 4, "last_activity_date": 1562647906, "creation_date": 1466021779, "last_edit_date": 1466069042, "question_id": 37844962, "link": "https://stackoverflow.com/questions/37844962/python-how-to-create-a-16-character-long-digest-using-hashlib-md5-algorithm", "title": "Python: How to create a 16 character long digest using hashlib.md5 algorithm?", "body": "<p><a href=\"http://php.net/manual/en/function.md5.php\" rel=\"nofollow\">Php's md5 function</a> takes an optional second argument which, if true, returns a smaller hash of length 16 instead of the normal 32 character long hash.</p>\n\n<p>How can we do the same using python's <code>hashlib.md5</code>.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 3, "last_activity_date": 1466021575, "creation_date": 1466021575, "answer_id": 37844888, "question_id": 37844874, "link": "https://stackoverflow.com/questions/37844874/how-to-use-returned-seperated-lists-of-function-in-python/37844888#37844888", "title": "how to use returned seperated lists of function in python?", "body": "<p>You can <a href=\"https://stackoverflow.com/questions/354883/how-do-you-return-multiple-values-in-python\">unpack</a> the returned variables</p>\n\n<pre><code>lst, dct = links(url)\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5915328, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-_l97xRUHjgg/AAAAAAAAAAI/AAAAAAAAE-c/Fz6ZxK8K_yg/photo.jpg?sz=128", "display_name": "Saeb Molaee", "link": "https://stackoverflow.com/users/5915328/saeb-molaee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 37844888, "answer_count": 1, "score": 0, "last_activity_date": 1466022191, "creation_date": 1466021519, "last_edit_date": 1466022191, "question_id": 37844874, "link": "https://stackoverflow.com/questions/37844874/how-to-use-returned-seperated-lists-of-function-in-python", "title": "how to use returned seperated lists of function in python?", "body": "<p>hi i have a function which returns a list and a dictionary.\nif functions renturns one thing i know how to use that.\nbut how i can use returned list and dict of function?</p>\n\n<p>my code is :</p>\n\n<pre><code>def links(url):\n    __url = str(url)  # find_dl_url()\n    __page = requests.get(__url)\n    __page_content = bs4.BeautifulSoup(__page.content)\n    __links = __page_content.select('a[href*=\".mkv\"]')\n    __dict = {}\n    __sorted_dict = {}\n    __list = []\n    for links in __links:\n        __dict[links.string] = links.get('href')\n        __list.append(links.string)\n    __list = sorted(__list)\n    print(__list)\n    print(__dict)\n    return  __list, __dict\n</code></pre>\n\n<p>if function returnes just one list i could write:</p>\n\n<pre><code>list=links(url)\n</code></pre>\n\n<p>but how i can get both of list and dictionary?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 8, "creation_date": 1466021560, "post_id": 37844870, "comment_id": 63150161, "body": "Yeah, that&#39;s not how split works. You should really read the docs and see what each argument does. <code>name = email.split(&#39;@&#39;)[0].split(&#39;.&#39;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2214, "user_id": 2607571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898b3ca6cbc371e33421d40a3ef20c49?s=128&d=identicon&r=PG", "display_name": "Simon Kirsten", "link": "https://stackoverflow.com/users/2607571/simon-kirsten"}, "is_accepted": true, "score": 4, "last_activity_date": 1466022634, "last_edit_date": 1466022634, "creation_date": 1466021922, "answer_id": 37845000, "question_id": 37844870, "link": "https://stackoverflow.com/questions/37844870/getting-name-from-the-email-address-in-python/37845000#37845000", "title": "Getting name from the email address in python", "body": "<p>Use the following:</p>\n\n<pre><code>email = \"some.name@somehost.com\"\n\nname, _, _ = email.partition(\"@\")  # returns before @, @, and after @\nsplitname = name.split(\".\")        # splits on .\n\nprint(splitname)\n</code></pre>\n\n<p><code>[\"some\", \"name\"]</code></p>\n"}], "owner": {"reputation": 390, "user_id": 6271251, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZDDT7.png?s=128&g=1", "display_name": "Ekaterina1234", "link": "https://stackoverflow.com/users/6271251/ekaterina1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1336, "favorite_count": 0, "accepted_answer_id": 37845000, "answer_count": 1, "score": -2, "last_activity_date": 1466022634, "creation_date": 1466021495, "last_edit_date": 1466022520, "question_id": 37844870, "link": "https://stackoverflow.com/questions/37844870/getting-name-from-the-email-address-in-python", "title": "Getting name from the email address in python", "body": "<p>I have a text file in which there are email addresses in the following format:</p>\n\n<pre><code>some.name@somehost.com\n</code></pre>\n\n<p>or</p>\n\n<pre><code>some_name@somehost\n</code></pre>\n\n<p>How can I split the string to get some &amp; name? I tried the following code, but it appears I can only use one character (just the <strong>@</strong> or just the <strong>.</strong>).Is there a way to do it in one statement? Thanks.</p>\n\n<pre><code>name = email.split('@', '.')\n</code></pre>\n"}, {"tags": ["python", "multithreading", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 2709, "user_id": 5189673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a1a8d2328d31cdd52ed37dee8d91d4?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/5189673/leon"}, "is_accepted": true, "score": 3, "last_activity_date": 1466021657, "creation_date": 1466021657, "answer_id": 37844919, "question_id": 37844857, "link": "https://stackoverflow.com/questions/37844857/only-one-thread-is-starting-python/37844919#37844919", "title": "Only one thread is starting python", "body": "<p>The problem is how you pass the functions to the threads. You call them instead of passing the callable. You can fix that by removing the brackets <code>()</code>:</p>\n\n<pre><code>print(\"thread two\")\nthreadTwo = Thread(target=mainLoop)\nprint(\"thread one\")\nthreadOne = Thread(target=pingGetterLoop)\n</code></pre>\n\n<p>As both functions contain a endless loop, you never get past calling the first one, which then loops forever.</p>\n"}], "owner": {"reputation": 725, "user_id": 6471494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-SXQm_pFE0xo/AAAAAAAAAAI/AAAAAAAAB1k/-FJy_c6A6v4/photo.jpg?sz=128", "display_name": "Marc Frame", "link": "https://stackoverflow.com/users/6471494/marc-frame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 971, "favorite_count": 0, "accepted_answer_id": 37844919, "answer_count": 1, "score": 1, "last_activity_date": 1466021657, "creation_date": 1466021451, "question_id": 37844857, "link": "https://stackoverflow.com/questions/37844857/only-one-thread-is-starting-python", "title": "Only one thread is starting python", "body": "<pre><code>def pingGetterLoop():\n    while(1):\n        pingGetter()\n\ndef mainLoop():\n    root.mainloop()\n\n\nprint(\"thread two\")\nthreadTwo = Thread(target = mainLoop())\nprint(\"thread one\")\nthreadOne = Thread(target = pingGetterLoop())\n\nthreadOne.start()\nthreadTwo.start()\n</code></pre>\n\n<p>for some reason threadTwo never starts and the output is always threadOne but when I switch the positioning of threadTwo over threadOne then threadOne doesn't run. I suppose it is the way they are getting into queue but, I don't know how to fix it.</p>\n"}, {"tags": ["python", "syntax"], "comments": [{"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1466022116, "post_id": 37844762, "comment_id": 63150448, "body": "Your subject doesn&#39;t match your question.  Can you fix?"}], "answers": [{"tags": [], "owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "is_accepted": false, "score": 1, "last_activity_date": 1466022138, "last_edit_date": 1466022138, "creation_date": 1466021677, "answer_id": 37844928, "question_id": 37844762, "link": "https://stackoverflow.com/questions/37844762/how-can-i-fix-this-batch-file-to-write-in-a-text-file-in-spaces/37844928#37844928", "title": "How can I fix this batch file to write in a text file in spaces?", "body": "<ul>\n<li>Your code is a python script, not a batch file.</li>\n<li><code>#{my_name}</code> is meaningless in Python (it is from Ruby)</li>\n<li><code>def variable()</code> def-ines a function called <code>variable</code>.</li>\n</ul>\n\n<p>Replace <code>#{my_name}</code> with <code>my_name</code> in your <code>if</code> statement,  replace <code>myName(Jacob)</code> with <code>myName(\"Jacob\")</code>, and your code will work.</p>\n"}, {"tags": [], "owner": {"reputation": 1975, "user_id": 925172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e13526fc3620f73cef2b975255802c?s=128&d=identicon&r=PG", "display_name": "Russell Young", "link": "https://stackoverflow.com/users/925172/russell-young"}, "is_accepted": false, "score": 0, "last_activity_date": 1466022233, "creation_date": 1466022233, "answer_id": 37845099, "question_id": 37844762, "link": "https://stackoverflow.com/questions/37844762/how-can-i-fix-this-batch-file-to-write-in-a-text-file-in-spaces/37845099#37845099", "title": "How can I fix this batch file to write in a text file in spaces?", "body": "<p>This works for me:</p>\n\n<pre><code>    def myName(my_name):        #What does this do?\n      myName = input(\"What is my name? \")\n      if myName == my_name:\n        print \"Correct!\"\n      else:             #Gives invalid syntax error!\n        print \"In-Correct!\"\n    myName('Jacob')\n</code></pre>\n\n<p>I'm never done Python before, but tried this out at <a href=\"http://www.tutorialspoint.com/execute_python_online.php\" rel=\"nofollow\">http://www.tutorialspoint.com/execute_python_online.php</a> which is pretty handy!</p>\n\n<p>You have to put the input value in quotes, eg. \"Jacob\" else it treats it as a variable.</p>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 4352312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6hps.gif?s=128&g=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/4352312/marcos"}, "is_accepted": false, "score": 0, "last_activity_date": 1466023149, "creation_date": 1466023149, "answer_id": 37845343, "question_id": 37844762, "link": "https://stackoverflow.com/questions/37844762/how-can-i-fix-this-batch-file-to-write-in-a-text-file-in-spaces/37845343#37845343", "title": "How can I fix this batch file to write in a text file in spaces?", "body": "<p>You are on the right track, but like the alert says, the syntax is invalid.</p>\n\n<p>First, in python the end of an if-conditional is denoted by a colon(:)</p>\n\n<p>Second, hashtags(pound symbol, etc.) are always interpreted as the start of a single line comment.</p>\n\n<p>Finally, using the <code>def</code> keyword denotes that you are creating a function. </p>\n\n<p>so in your first line</p>\n\n<pre><code>if(myName == #{my_Name}):\n</code></pre>\n\n<p>everything after the hashtag is ignored for the line. Which to the interpreter means that there is a missing closing parenthesi, a missing colon, and the other side of the equality test is missing.</p>\n\n<p>Also to get the correct result, you want to remove the curly brackets that are surrounding \"my_name\" otherwise it will always be false since you will essentially be creating a dictionary with the undefined element named my_name</p>\n\n<p>Incorrect behavior:</p>\n\n<pre><code>&gt;&gt;&gt; def myName(my_name):        #What does this do?\n        myName = input(\"What is my name? \")\n        if(myName == {my_name}):\n            print (\"Correct!\")\n        else:             #Gives invalid syntax error!\n            print (\"In-Correct!\")\n\n\n&gt;&gt;&gt; bob = \"bob\"\n&gt;&gt;&gt; myName(bob)\nWhat is my name? bob\nIn-Correct!\n</code></pre>\n\n<p>Correct Behavior:</p>\n\n<pre><code>def myName(my_name):        #What does this do?\n        myName = input(\"What is my name? \")\n        if(myName == my_name):\n            print (\"Correct!\")\n        else:             #Gives invalid syntax error!\n            print (\"In-Correct!\")\n\n\n&gt;&gt;&gt; bob = \"bob\"\n&gt;&gt;&gt; myName(\"bob\")\nWhat is my name? bob\nCorrect!\n&gt;&gt;&gt; myName(\"bob\")\nWhat is my name? phil\nIn-Correct!\n</code></pre>\n\n<p>Since you are just starting, I would recommend learning the basic syntax of Python before anything.</p>\n\n<p><a href=\"https://www.codecademy.com/courses/introduction-to-python-6WeG3/0/1?curriculum_id=4f89dab3d788890003000096\" rel=\"nofollow\">Code Academy: Python Syntax</a></p>\n\n<p><a href=\"http://www.tutorialspoint.com/python/python_dictionary.htm\" rel=\"nofollow\">TutorialsPoint: Python Syntax</a></p>\n\n<p>After that you can learn to utilize the more powerful features that this language provides.</p>\n"}], "owner": {"reputation": 1, "user_id": 6451902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b322734f70756da98224eb2e3a104ad?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Trujillo", "link": "https://stackoverflow.com/users/6451902/jacob-trujillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1466023149, "creation_date": 1466021140, "last_edit_date": 1466022389, "question_id": 37844762, "link": "https://stackoverflow.com/questions/37844762/how-can-i-fix-this-batch-file-to-write-in-a-text-file-in-spaces", "title": "How can I fix this batch file to write in a text file in spaces?", "body": "<p>I need help with fixing my code. I don't know whats wrong with it but it gives me an invalid syntax error on the else: command, Please be as simple as possible, and not be too complicated, I'm new to this. </p>\n\n<pre><code>def myName(my_name):        #What does this do?\n    myName = input(\"What is my name? \")\n    if(myName == #{my_name}):\n        print (\"Correct!\")\n    else:             #Gives invalid syntax error!\n        print (\"In-Correct!\")\n\nmyName(Jacob)\n</code></pre>\n\n<p>Oh and what does the def variable() do?</p>\n"}, {"tags": ["python", "multithreading", "session", "sqlalchemy", "gunicorn"], "answers": [{"comments": [{"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1466178839, "post_id": 37845889, "comment_id": 63226087, "body": "I did what you said, and I put self.session = db.Session() in the <b>init</b> function for a new APIResource(Resource) class, but I&#39;m having the same problem...  I add something to the database and delete it in separate threads, but the adding thread remembers the thing."}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "reply_to_user": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1466184613, "post_id": 37845889, "comment_id": 63229180, "body": "@Scott You&#39;re saying you have multiple threads <i>within the same request</i>?"}, {"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1466186214, "post_id": 37845889, "comment_id": 63229963, "body": "No.  Just the gunicorn threads.  I think the problem with this solution is that I need to tear down the session at the end of the request somewhere."}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "reply_to_user": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1466186550, "post_id": 37845889, "comment_id": 63230132, "body": "@Scott Well, yes. You weren&#39;t doing that before? Again, I highly recommend using flask-sqlalchemy, as it takes care of that for you."}, {"owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 0, "creation_date": 1563767624, "post_id": 37845889, "comment_id": 100793518, "body": "@univerio I&#39;m having trouble understanding what the effective difference between <code>scoped_session(session_factory)</code> and <code>scoped_session(session_factory, scopefunc=flask._app_ctx_stack.__ident_func__)</code> is. In the former, we are using thread local storage - each thread that calls <code>Session()</code> will get it&#39;s own session. Each request to the Flask will create a new thread and thus get it&#39;s own session.  Why isn&#39;t this effectively the same as the latter?"}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "reply_to_user": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 0, "creation_date": 1564017443, "post_id": 37845889, "comment_id": 100895346, "body": "@MatthewMoisen &quot;Each request to the Flask will create a new thread and thus get it&#39;s own session.&quot; This is not (necessarily) true. WSGI does not define a threading model."}, {"owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 0, "creation_date": 1564022719, "post_id": 37845889, "comment_id": 100896195, "body": "@univerio If I&#39;m running the Gunicorn <code>sync</code> worker_class, is it necessarily true?"}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "reply_to_user": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 0, "creation_date": 1564111559, "post_id": 37845889, "comment_id": 100930950, "body": "@MatthewMoisen I could be wrong, but I don&#39;t think so. The <code>sync</code> worker is just a single thread, so you just share the same <code>Session</code> object between requests if you don&#39;t use a proper <code>scopefunc</code>."}], "tags": [], "owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "is_accepted": false, "score": 3, "last_activity_date": 1466025299, "creation_date": 1466025299, "answer_id": 37845889, "question_id": 37844704, "link": "https://stackoverflow.com/questions/37844704/flask-sqlalchemy-sessions-out-of-sync/37845889#37845889", "title": "Flask SQLAlchemy sessions out of sync", "body": "<p>Please use flask-sqlalchemy if you're using flask, it takes care of the lifecycle of the session for you.</p>\n\n<p>If you insist on doing it yourself, the correct pattern is to create a session for each request instead of having a global session. You should be doing</p>\n\n<pre><code>Session = scoped_session(session_factory, scopefunc=flask._app_ctx_stack.__ident_func__)\nreturn Session\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>Session = scoped_session(session_factory)\nreturn Session()\n</code></pre>\n\n<p>And do</p>\n\n<pre><code>session = Session()\n</code></pre>\n\n<p>every time you need a session. By virtue of the <code>scoped_session</code> and the <code>scopefunc</code>, this will return you a different session in each request, but the same session in the same request.</p>\n"}, {"comments": [{"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 2, "creation_date": 1466184323, "post_id": 37886182, "comment_id": 63229015, "body": "<code>scoped_session</code> does not handle multiple threads like this. As soon as you have multiple threads you&#39;re going to run into trouble."}, {"owner": {"reputation": 341, "user_id": 1098628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cda1714f36e46deec4371de7af85bad?s=128&d=identicon&r=PG&f=1", "display_name": "alextsil", "link": "https://stackoverflow.com/users/1098628/alextsil"}, "edited": false, "score": 1, "creation_date": 1612685360, "post_id": 37886182, "comment_id": 116839781, "body": "You need to connect in a per-process fashion, eg 4 procs = 4 DB connections and open Sessions in a per-request fashion 1 request = 1 new Session."}, {"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "reply_to_user": {"reputation": 341, "user_id": 1098628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cda1714f36e46deec4371de7af85bad?s=128&d=identicon&r=PG&f=1", "display_name": "alextsil", "link": "https://stackoverflow.com/users/1098628/alextsil"}, "edited": false, "score": 0, "creation_date": 1612722084, "post_id": 37886182, "comment_id": 116849602, "body": "@alextsil &quot;connect in a per-process fashion&quot; so <code>db.connectSQLAlchemy()</code> creates both a connection AND a session?"}, {"owner": {"reputation": 341, "user_id": 1098628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cda1714f36e46deec4371de7af85bad?s=128&d=identicon&r=PG&f=1", "display_name": "alextsil", "link": "https://stackoverflow.com/users/1098628/alextsil"}, "edited": false, "score": 0, "creation_date": 1612766108, "post_id": 37886182, "comment_id": 116858798, "body": "@Him No, you need to run the <code>create_engine</code> inside an <code>@app.before.server_start</code> listener and then <code>create new session</code> inside an <code>@app.before_request</code> listener. (The naming is not precise but you get the idea.) This way each worker will get its own connection pool and each request will get its own session."}], "tags": [], "owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "is_accepted": false, "score": -1, "last_activity_date": 1466180500, "creation_date": 1466180500, "answer_id": 37886182, "question_id": 37844704, "link": "https://stackoverflow.com/questions/37844704/flask-sqlalchemy-sessions-out-of-sync/37886182#37886182", "title": "Flask SQLAlchemy sessions out of sync", "body": "<p>Figured it out.  What I did was to add a setup and teardown to the request in my app's __init__.py:</p>\n\n<pre><code>@app.before_request\ndef startup_session():\n    db.session = db.connectSQLAlchemy()\n\n@app.teardown_request\ndef shutdown_session(exception=None): \n    db.session.close()\n</code></pre>\n\n<p>still using the global session object in my db module:</p>\n\n<pre><code>db.py:\n\n....\nsession = None\n....\n</code></pre>\n\n<p>The <code>scoped_session</code> handles the different threads, I think... </p>\n\n<p>Please advise if this is a terrible way to do this for some reason.  =c)</p>\n"}], "owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1913, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466180500, "creation_date": 1466020938, "question_id": 37844704, "link": "https://stackoverflow.com/questions/37844704/flask-sqlalchemy-sessions-out-of-sync", "title": "Flask SQLAlchemy sessions out of sync", "body": "<p>I have a Flask REST API, running with a gunicorn/nginx stack.  There is global SQLAlchemy session set up once for each thread that the API runs on.  I set up an endpoint /test/ for running the unit tests for the API.  One test makes a POST request to add something to the database, then has a finally: clause to clean up:</p>\n\n<pre><code>def test_something():\n    try:\n        url = \"http://myposturl\"\n        data = {\"content\" : \"test post\"}\n        headers = {'content-type': 'application/json'}\n        result = requests.post(url, json=data, headers=headers).json()\n        validate(result, myschema)\n    finally:\n        db.sqlsession.query(MyTable).filter(MyTable.content == \"test post\").delete()\n        db.sqlsession.commit()\n</code></pre>\n\n<p>The problem is that the thread to which the POST request is made now has a \"test post\" object in its session, but the database has no such object because the thread on which the tests ran deleted that thing from the database.  So when I make a GET request to the server, about 1 in 4 times (I have 4 gunicorn workers), I get the \"test post\" object, and 3 in 4 times I do not.  This is because the threads each have their own session object, and they are getting out of sync, but I don't really know what to do about it....</p>\n\n<p>Here is my setup for my SQLAlchemy session:</p>\n\n<pre><code>def connectSQLAlchemy():\n    import sqlalchemy\n    import sqlalchemy.orm\n    engine = sqlalchemy.create_engine(connection_string(DBConfig.USER, DBConfig.PASSWORD, DBConfig.HOST, DBConfig.DB))\n    session_factory = sqlalchemy.orm.sessionmaker(bind=engine)\n    Session = sqlalchemy.orm.scoped_session(session_factory)\n    return Session()\n\n# Create a global session for everyone\nsqlsession = connectSQLAlchemy()\n</code></pre>\n"}, {"tags": ["python", "arrays", "csv"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1466021559, "post_id": 37844637, "comment_id": 63150160, "body": "You need to indent the body of the first loop."}, {"owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "edited": false, "score": 0, "creation_date": 1466022014, "post_id": 37844637, "comment_id": 63150397, "body": "This question is unclear, can you clarify what you want a bit more thoroughly?"}, {"owner": {"reputation": 1, "user_id": 6471410, "user_type": "registered", "profile_image": "https://graph.facebook.com/1155931231095699/picture?type=large", "display_name": "Ahmed Dimo", "link": "https://stackoverflow.com/users/6471410/ahmed-dimo"}, "edited": false, "score": 0, "creation_date": 1466061849, "post_id": 37844637, "comment_id": 63163645, "body": "i have a list  that contains 210 diffrent value that i load through &quot;ngrains&quot; file. then an other file &quot;data&quot; contains 250*250 elements, i want to look at each element of &quot;data&quot; see if it&#39;s equal to first element of &quot;ngrains&quot; if so replace it by one if not put zero instead. then the array of 250*250 that i get containing eather zeros or ones  i want to put it in an other list of arrays (phi0ex). and so on with all values in &quot;ngrains&quot; i hope i explained it well, thanks"}, {"owner": {"reputation": 1, "user_id": 6471410, "user_type": "registered", "profile_image": "https://graph.facebook.com/1155931231095699/picture?type=large", "display_name": "Ahmed Dimo", "link": "https://stackoverflow.com/users/6471410/ahmed-dimo"}, "edited": false, "score": 0, "creation_date": 1466073861, "post_id": 37844637, "comment_id": 63171516, "body": "i found the solution thank you guys for showing intrest, accully the function where() do the iteration it self (that i did&#39;nt know) there is no need to put it in an other loop, only the loop over &quot;ngrains will do the trick&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6471410, "user_type": "registered", "profile_image": "https://graph.facebook.com/1155931231095699/picture?type=large", "display_name": "Ahmed Dimo", "link": "https://stackoverflow.com/users/6471410/ahmed-dimo"}, "is_accepted": false, "score": 0, "last_activity_date": 1466076196, "creation_date": 1466076196, "answer_id": 37857742, "question_id": 37844637, "link": "https://stackoverflow.com/questions/37844637/create-a-loop-inside-a-loop-in-python/37857742#37857742", "title": "create a loop inside a loop in python", "body": "<p>i found the solution thank you guys for showing intrest, accully the function where() do the iteration it self (that i did'nt know) there is no need to put it in an other loop, only the loop over \"ngrains will do the trick.</p>\n\n<pre><code>data=loadtxt('data.csv',delimiter=',')\ndata1=data.transpose()\nngrains=loadtxt('nombre_grain.csv',delimiter=',')\nphi0ex=len(ngrains)*[zeros(shape(250))]\n\nfor k in range(len(ngrains)):\n    print ngrains[k]    \n    phi0ex[k]=where(data1==ngrains[k],1,0)\n\nprint phi0ex\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6471410, "user_type": "registered", "profile_image": "https://graph.facebook.com/1155931231095699/picture?type=large", "display_name": "Ahmed Dimo", "link": "https://stackoverflow.com/users/6471410/ahmed-dimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1466076196, "creation_date": 1466020687, "question_id": 37844637, "link": "https://stackoverflow.com/questions/37844637/create-a-loop-inside-a-loop-in-python", "title": "create a loop inside a loop in python", "body": "<p>i am trying to use this program to get a list (phi0ex) of 211 arrays each array contains 251*251 elements \nall what i get is a list of arrays of 251 elements, please help</p>\n\n<pre><code>data=loadtxt('data.csv',delimiter=',')\ndata1=data.transpose()\nngrains=loadtxt('nombre_grain.csv',delimiter=',')\nphi0ex1=211*[zeros(shape(251*251))]\ngr1=zeros(shape=(251,251))\nfor k in range(0,len(ngrains)):\nfor i,j in enumerate(data1):\n    for s in range(0,251):\n        gr1[i]=where(s==ngrains[k],1,0)\nphi0ex1[k]=gr1\nprint phi0ex1\n</code></pre>\n\n#\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "is_accepted": true, "score": 0, "last_activity_date": 1466024265, "creation_date": 1466024265, "answer_id": 37845640, "question_id": 37844631, "link": "https://stackoverflow.com/questions/37844631/getting-wrong-answer-on-codechef/37845640#37845640", "title": "Getting Wrong answer on codechef", "body": "<p>You are not handling this case:</p>\n\n<p><em>Input:</em> 10 10.01</p>\n\n<p><em>Output:</em> -0.4900000000000002</p>\n\n<p><code>y&gt;x</code> is not sufficient for testing for account underflow.</p>\n\n<p>Also, if you are submitting your code as Python2, <code>input()</code> behaves differently in Python2 than Python3.</p>\n"}], "owner": {"reputation": 91, "user_id": 6153087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6edb8d2f8d1611663371f2720c98a3?s=128&d=identicon&r=PG&f=1", "display_name": "user6153087", "link": "https://stackoverflow.com/users/6153087/user6153087"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 37845640, "answer_count": 1, "score": -1, "last_activity_date": 1466027909, "creation_date": 1466020657, "last_edit_date": 1466027909, "question_id": 37844631, "link": "https://stackoverflow.com/questions/37844631/getting-wrong-answer-on-codechef", "title": "Getting Wrong answer on codechef", "body": "<p>Pooja would like to withdraw X $US from an ATM. The cash machine will only accept the transaction if X is a multiple of 5, and Pooja's account balance has enough cash to perform the withdrawal transaction (including bank charges). For each successful withdrawal the bank charges 0.50 $US. Calculate Pooja's account balance after an attempted transaction.</p>\n\n<p><strong>Input</strong></p>\n\n<p>Positive integer 0 &lt; X &lt;= 2000 - the amount of cash which Pooja wishes to withdraw.</p>\n\n<p>Nonnegative number 0&lt;= Y &lt;= 2000 with two digits of precision - Pooja's initial account balance.</p>\n\n<p><strong>Output</strong></p>\n\n<p>Output the account balance after the attempted transaction, given as a number with two digits of precision. If there is not enough money in the account to complete the transaction, output the current bank balance.</p>\n\n<p><strong>Example - Successful Transaction</strong></p>\n\n<p><em>Input:</em>\n30 120.00</p>\n\n<p><em>Output:</em>\n89.50</p>\n\n<p><strong>Example - Incorrect Withdrawal Amount (not multiple of 5)</strong></p>\n\n<p><em>Input:</em>\n42 120.00</p>\n\n<p><em>Output:</em>\n120.00</p>\n\n<p><strong>Example - Insufficient Funds</strong></p>\n\n<p><em>Input:</em>\n300 120.00</p>\n\n<p><em>Output:</em>\n120.00</p>\n\n<p>I ran the code based on the test cases given, I got them right , but when i submitted the solution it says \"wrong answer\". Please help.</p>\n\n<pre><code>y=0\nx=0\nbalance=0\nx,y=map(float, input().split())\nx=int(x)\nif(0&lt;=y&lt;=2000 and 0&lt;x&lt;=2000 and y&gt;x):\n    if(x%5==0):\n        balance=y-x-(0.50)\n    else:\n        balance=y\nelse:\n    balance=y\nprint(balance)\n</code></pre>\n"}, {"tags": ["python", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1466112319, "last_edit_date": 1495535335, "creation_date": 1466112319, "answer_id": 37869585, "question_id": 37844626, "link": "https://stackoverflow.com/questions/37844626/mechanize-typeerror-nonetype-object-does-not-support-item-assignment/37869585#37869585", "title": "Mechanize: TypeError: &#39;NoneType&#39; object does not support item assignment", "body": "<p>You're doing it wrongly. You need to select a <code>form</code>, only then can you assign values to the form controls.</p>\n\n<p>Do you have a <code>menu_dispatch_form</code>? Then use <code>br.select_form(\"menu_dispatch_form\")</code> to select the form. To add data to the form, you should assign values to the form controls. <a href=\"http://www.pythonforbeginners.com/cheatsheet/python-mechanize-cheat-sheet\" rel=\"nofollow noreferrer\">This</a> and <a href=\"https://stackoverflow.com/questions/4720470/using-python-and-mechanize-to-submit-form-data-and-authenticate\">this</a> should help you with finding and assigning values to form controls.</p>\n"}], "owner": {"reputation": 541, "user_id": 5817865, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c6f9b141f15a61f408b991a5c116b118?s=128&d=identicon&r=PG&f=1", "display_name": "otteheng", "link": "https://stackoverflow.com/users/5817865/otteheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1614959443, "creation_date": 1466020640, "last_edit_date": 1466110956, "question_id": 37844626, "link": "https://stackoverflow.com/questions/37844626/mechanize-typeerror-nonetype-object-does-not-support-item-assignment", "title": "Mechanize: TypeError: &#39;NoneType&#39; object does not support item assignment", "body": "<p>Trying to fill in a form in order to get the average prices of goods in a city.  </p>\n\n<pre><code>basket = br.open('http://www.numbeo.com/cost-of-living/')\nread_it = basket.read()\n\n# Select form\nfor form in br.forms():\n    print '%r %r %s' % (form.name, form.attrs.get('id'), form.action)\n    for control in form.controls:\n        print ' ', control.type, control.name, repr(control.value)\n\nbr.form['menu_dispatch_form'] = 'Washington, DC, United States'\nbr.submit()\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"Trip cost calculator/trip costs calculator.py\", line 50, in &lt;module&gt;\n    br.form['menu_dispatch_form'] = 'Washington, DC, United States'\nTypeError: 'NoneType' object does not support item assignment\n</code></pre>\n\n<p>There's no form name but I thought I could use the form id instead. I found this <a href=\"http://rhodesmill.org/brandon/chapters/screen-scraping/\" rel=\"nofollow\">website</a> that was helpful but unlike their example I don't have any <code>text</code> to put in the <code>br.form[]</code>. Anyone know what's going on?</p>\n"}, {"tags": ["python", "arrays", "numpy", "memory", "out-of-memory"], "comments": [{"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1466026822, "post_id": 37844596, "comment_id": 63152750, "body": "You shouldn&#39;t have to create an array with all 1&#39;s, you should just be able to do: <code>new_array = my_array - 1</code>"}, {"owner": {"reputation": 327, "user_id": 4698935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98ad2196941c084591504158bc28e4a1?s=128&d=identicon&r=PG&f=1", "display_name": "Lelo", "link": "https://stackoverflow.com/users/4698935/lelo"}, "reply_to_user": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1466026958, "post_id": 37844596, "comment_id": 63152797, "body": "Well, I wanted 1- my_array, and That&#39;s what I&#39;m doing originally"}, {"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1466027186, "post_id": 37844596, "comment_id": 63152884, "body": "my bad, I just saw that. Why not just use arrays instead of casting them to matrices? I&#39;m not sure about the internals but a copy of the data is probably happening in there. Just keep them as arrays and then use <code>np.dot(dtm_lsa, dtm_lsa.T)</code> ?"}, {"owner": {"reputation": 327, "user_id": 4698935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98ad2196941c084591504158bc28e4a1?s=128&d=identicon&r=PG&f=1", "display_name": "Lelo", "link": "https://stackoverflow.com/users/4698935/lelo"}, "reply_to_user": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1466027672, "post_id": 37844596, "comment_id": 63153084, "body": "Do you think matrices taking more memory?"}, {"owner": {"reputation": 327, "user_id": 4698935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98ad2196941c084591504158bc28e4a1?s=128&d=identicon&r=PG&f=1", "display_name": "Lelo", "link": "https://stackoverflow.com/users/4698935/lelo"}, "reply_to_user": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1466027696, "post_id": 37844596, "comment_id": 63153090, "body": "The problem is that it&#39;s occupationally happening, so can&#39;t test for sure"}, {"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1466027783, "post_id": 37844596, "comment_id": 63153124, "body": "I think that once its created it shouldn&#39;t matter, but in the process of creating the matrix numpy might be doing a full copy. It starts as an np.arrray -&gt; np.matrix -&gt; np.array. Just keep it as array"}, {"owner": {"reputation": 327, "user_id": 4698935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98ad2196941c084591504158bc28e4a1?s=128&d=identicon&r=PG&f=1", "display_name": "Lelo", "link": "https://stackoverflow.com/users/4698935/lelo"}, "reply_to_user": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1466029255, "post_id": 37844596, "comment_id": 63153614, "body": "I tried it but still having the error"}], "owner": {"reputation": 327, "user_id": 4698935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98ad2196941c084591504158bc28e4a1?s=128&d=identicon&r=PG&f=1", "display_name": "Lelo", "link": "https://stackoverflow.com/users/4698935/lelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1484, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466108103, "creation_date": 1466020495, "question_id": 37844596, "link": "https://stackoverflow.com/questions/37844596/avoid-memory-error-when-dealing-with-large-arrays", "title": "Avoid &#39;Memory Error&quot; when dealing with large arrays", "body": "<p>I'm facing sometimes <code>Memory Error</code>, sometimes it goes through fine and sometimes it pops up.. Specifically when trying to subtract large array by one. I tried many ways to do this subtraction, is there any way to avoid this? and is my other code parts will also sometime arise this error?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>def home(request):\n    if request.method==\"POST\":\n        img = UploadForm(request.POST, request.FILES)\n        no_clus = int(request.POST.get('num_clusters', 10))\n        if img.is_valid():\n\n            paramFile =io.TextIOWrapper(request.FILES['pic'].file)\n            portfolio1 = csv.DictReader(paramFile)\n\n            users = []\n\n            users = [row[\"BASE_NAME\"] for row in portfolio1]\n            print(len(users))\n\n            my_list = users\n            vectorizer = CountVectorizer()\n            dtm = vectorizer.fit_transform(my_list)\n\n            lsa = TruncatedSVD(n_components=100)\n            dtm_lsa = lsa.fit_transform(dtm)\n            dtm_lsa = Normalizer(copy=False).fit_transform(dtm_lsa)\n            dist1 = (1- np.asarray(numpy.asmatrix(dtm_lsa) * numpy.asmatrix(dtm_lsa).T))\n            # print(1-similarity)\n            k = len(my_list)\n         #   dist1 = (1- similarity)\n            # dist1=similarity\n            # dist1.astype(float)\n            #print(dist1)\n            # print(cosine_similarity(tfidf_matrix[3:4], tfidf_matrix))\n            # float dist = 1 - similarity;\n            data2 = np.asarray(dist1)\n            arr_3d = data2.reshape((1, k, k))\n            # arr_3d= 1- arr_3d\n            #print(arr_3d)\n\n            no_cluster = number_cluster(len(my_list))\n            print(no_cluster)\n            for i in range(len(arr_3d)):\n                # print (i+1910)\n                # km = AgglomerativeClustering(n_clusters=no_clus, linkage='ward').fit(arr_3d[i])\n                km = AgglomerativeClustering(n_clusters=no_cluster, linkage='average').fit(arr_3d[i])\n                # km = AgglomerativeClustering(n_clusters=no_clus, linkage='complete').fit(arr_3d[i])\n                # km = MeanShift()\n                # km = KMeans(n_clusters=no_clus, init='k-means++')\n                # km = MeanShift()\n                #  km = km.fit(arr_3d[i])\n                # print km\n                labels = km.labels_\n\n            csvfile = settings.MEDIA_ROOT +'\\\\'+ 'images\\\\export.csv'\n\n            csv_input = pd.read_csv(csvfile, encoding='latin-1')\n            csv_input['cluster_ID'] = labels\n            csv_input['BASE_NAME'] = my_list\n            csv_input.to_csv(settings.MEDIA_ROOT +'/'+ 'output.csv', index=False)\n            clus_groups = list()\n            for j in range(no_cluster):\n                # print(\" cluster no %i:%s\" % (j, [my_list[i] for i, x in enumerate(labels) if x == j]))\n                list_of_ints = ([my_list[i] for i, x in enumerate(labels) if x == j])\n                clus_groups.append('  '.join(list_of_ints))\n            vectorizer = CountVectorizer()\n            dtm = vectorizer.fit_transform(my_list)\n\n            lsa = TruncatedSVD(n_components=100)\n            dtm_lsa = lsa.fit_transform(dtm)\n            dtm_lsa = Normalizer(copy=False).fit_transform(dtm_lsa)\n            dist1 = (1 - np.asarray(numpy.asmatrix(dtm_lsa) * numpy.asmatrix(dtm_lsa).T))\n           # similarity = np.asarray(numpy.asmatrix(dtm_lsa) * numpy.asmatrix(dtm_lsa).T)\n            k = len(my_list)\n          #  dist1 = 1 - similarity\n\n            data2 = np.asarray(dist1)\n            arr_3d = data2.reshape((1, k, k))\n            # arr_3d= 1- arr_3d\n\n            #no_clus = 5\n           # no_clus=get_name(request)\n            for i in range(len(arr_3d)):\n                # print (i+1910)\n                # km = AgglomerativeClustering(n_clusters=no_clus, linkage='ward').fit(arr_3d[i])\n                # km = AgglomerativeClustering(n_clusters=no_clus, linkage='average').fit(arr_3d[i])\n                # km = AgglomerativeClustering(n_clusters=no_clus, linkage='complete').fit(arr_3d[i])\n                km = KMeans(n_clusters=no_clus, init='k-means++')\n                km = km.fit(arr_3d[i])\n                # print km\n                labels2 = km.labels_\n                # error = km.inertia_\n                print(labels2)\n\n            labels = labels.tolist()\n            labels2 = labels2.tolist()\n            # new=list()\n\n\n            csv_input = pd.read_csv(settings.MEDIA_ROOT +'/'+ 'output.csv',encoding='latin-1')\n            labels1 = csv_input['cluster_ID']\n            new_list = []\n            for k in labels1:\n                new_list.append(labels2[k])  # lookup the value in list2 at the index given by list1\n\n            print(new_list)\n            print(len(new_list))\n            csv_input = pd.read_csv(settings.MEDIA_ROOT +'/'+ 'output.csv',encoding='latin-1')\n            csv_input['cluster_ID'] = labels\n            csv_input['BASE_NAME'] = my_list\n            csv_input['User_Map'] = new_list\n            csv_input.to_csv(settings.MEDIA_ROOT + '/' + 'output1.csv', index=False)\n            #filename= settings.MEDIA_ROOT +'/'+ 'output.csv'\n            send_file(request)\n           # my_list = portfolio\n            #save_file('output1.csv')\n          #  csv(request)\n          #  return HttpResponseRedirect(reverse('labels'))\n            return render(request, 'new.html', {'labels': labels})\n    else:\n        img=UploadForm()\n    images=Upload.objects.all()\n    return render(request,'new.html',{'form':img,'images':images})\n</code></pre>\n\n<p>the <code>error</code> is when trying to do <code>dist1 = (1- np.asarray(numpy.asmatrix(dtm_lsa) * numpy.asmatrix(dtm_lsa).T))</code> .. I also tried to create new array with all ones with the same size and then subtract.. How should I modify this to prevent this error? Note that the user interface that will run this code can be operated on any pc!</p>\n"}, {"tags": ["python", "django", "templates"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1466020610, "post_id": 37844535, "comment_id": 63149668, "body": "It sounds like you&#39;re looking for the <a href=\"https://docs.djangoproject.com/en/1.9/ref/templates/builtins/#include\" rel=\"nofollow noreferrer\">include tag</a>."}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1466020658, "post_id": 37844535, "comment_id": 63149700, "body": "See also this discussion of mixing <code>extends</code> and <code>include</code>: <a href=\"http://stackoverflow.com/questions/1408925/django-templates-include-and-extends\" title=\"django templates include and extends\">stackoverflow.com/questions/1408925/&hellip;</a>"}, {"owner": {"reputation": 9, "user_id": 5700934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2555ff66a32afd2a3ccf492f9b2e6f58?s=128&d=identicon&r=PG&f=1", "display_name": "rolsn", "link": "https://stackoverflow.com/users/5700934/rolsn"}, "reply_to_user": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1466022697, "post_id": 37844535, "comment_id": 63150752, "body": "Thanks, @PeterDeGlopper. Issue resolved. The problem was I was trying to extend the parent from inside the child, not realizing the child should be nothing but blocks."}], "owner": {"reputation": 9, "user_id": 5700934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2555ff66a32afd2a3ccf492f9b2e6f58?s=128&d=identicon&r=PG&f=1", "display_name": "rolsn", "link": "https://stackoverflow.com/users/5700934/rolsn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "closed_date": 1466020809, "answer_count": 0, "score": 0, "last_activity_date": 1466020287, "creation_date": 1466020287, "question_id": 37844535, "link": "https://stackoverflow.com/questions/37844535/django-is-it-possible-to-call-a-template-from-inside-another-template", "closed_reason": "Duplicate", "title": "Django: Is it possible to call a template from inside another template?", "body": "<p>Not sure if what I'm asking for is impossible or if I'm misunderstanding the way Django templates work.</p>\n\n<p>Let's say I have a template named <code>base.html</code>. This contains things that should be included in all templates: meta tags, css, titles, etc.</p>\n\n<p>I then have a route named <code>main</code> that calls <code>main.html</code> which extends <code>base.html</code>. All good so far.</p>\n\n<p>Inside of <code>main.html</code> I have a <code>{% for %}</code> loop. For organizational reasons I'd like each of the items being iterated through to be rendered with their own separate template which would be saved in a different file, and that presumably would inherit all of <code>main.html</code>'s context attributes. Hence, calling a template from another template.</p>\n\n<p>I want to do this because the template that would render each iterated item (let's call it <code>cards.html</code>) will get pretty large and it would simply be easier to break it off into its own file.</p>\n\n<p>Is this possible to do? From what I've been able to tell Django's templates inherit going backwards, that is, you call the child template which extends the parent which might extend another parent. In this case, <code>cards.html</code> will never render because no one can ever call it.</p>\n"}]