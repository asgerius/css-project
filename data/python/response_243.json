[{"tags": ["python", "tensorflow", "loss-function"], "comments": [{"owner": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1567642984, "post_id": 57796880, "comment_id": 102026928, "body": "I think the problem lies in your training process rather than the loss function."}, {"owner": {"reputation": 1, "user_id": 6181351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182849485067105/picture?type=large", "display_name": "Omer Ashkenazi", "link": "https://stackoverflow.com/users/6181351/omer-ashkenazi"}, "reply_to_user": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1567685562, "post_id": 57796880, "comment_id": 102042134, "body": "so why if i use specific the loss=tf.keras.losses.sparse_categorical_crossentropy it work?"}, {"owner": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1567696434, "post_id": 57796880, "comment_id": 102048524, "body": "The loss is prebuilt in Keras. So why create a custom loss function?"}, {"owner": {"reputation": 1, "user_id": 6181351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182849485067105/picture?type=large", "display_name": "Omer Ashkenazi", "link": "https://stackoverflow.com/users/6181351/omer-ashkenazi"}, "reply_to_user": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1567697677, "post_id": 57796880, "comment_id": 102049191, "body": "I want to check if I can use custom loss function and be sure it work so I use the same function to be sure it won\u2019t break anything and then use my own loss function."}], "owner": {"reputation": 1, "user_id": 6181351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182849485067105/picture?type=large", "display_name": "Omer Ashkenazi", "link": "https://stackoverflow.com/users/6181351/omer-ashkenazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567641578, "creation_date": 1567641578, "question_id": 57796880, "link": "https://stackoverflow.com/questions/57796880/custom-loss-function-tensorflow", "title": "Custom loss function tensorflow", "body": "<p>I'm try to test custom loss function. </p>\n\n<p>i test how the network is learning base on tf loss function, and past it by me.\nthe result show that the network dont learn if i pass the function.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nimport matplotlib.pyplot as plt\n\nmnist = tf.keras.datasets.mnist\n(x_train, y_train),(x_test, y_test) = mnist.load_data()\nx_train, x_test = x_train / 255.0, x_test / 255.0\n\ndef loss(y_true, y_pred):\n  return tf.keras.losses.sparse_categorical_crossentropy(y_true, y_pred)\n\nmodel = tf.keras.models.Sequential([\n  tf.keras.layers.Flatten(input_shape=(28, 28)),\n  tf.keras.layers.Dense(128, activation='relu'),\n  tf.keras.layers.Dropout(0.2),\n  tf.keras.layers.Dense(10, activation='softmax')\n])\n\nmodel.compile(optimizer='adam',\n              loss=loss,\n              metrics=['accuracy'])\n\nmodel.fit(x_train, y_train, epochs=7)\nmodel.evaluate(x_test, y_test)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nimport matplotlib.pyplot as plt\n\nmnist = tf.keras.datasets.mnist\n(x_train, y_train),(x_test, y_test) = mnist.load_data()\nx_train, x_test = x_train / 255.0, x_test / 255.0\n\ndef loss(y_true, y_pred):\n  return tf.keras.losses.sparse_categorical_crossentropy(y_true, y_pred)\n\nmodel = tf.keras.models.Sequential([\n  tf.keras.layers.Flatten(input_shape=(28, 28)),\n  tf.keras.layers.Dense(128, activation='relu'),\n  tf.keras.layers.Dropout(0.2),\n  tf.keras.layers.Dense(10, activation='softmax')\n])\n\nmodel.compile(optimizer='adam',\n              loss=tf.keras.losses.sparse_categorical_crossentropy,\n              metrics=['accuracy'])\n\nmodel.fit(x_train, y_train, epochs=7)\nmodel.evaluate(x_test, y_test)\n</code></pre>\n\n<p>for the first code:\nEpoch 1/7</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>60000/60000 [==============================] - 4s 66us/sample - loss: 0.3035 - acc: 0.1015\nEpoch 2/7\n60000/60000 [==============================] - 4s 66us/sample - loss: 0.1481 - acc: 0.0994\nEpoch 3/7\n60000/60000 [==============================] - 4s 69us/sample - loss: 0.1097 - acc: 0.0990\nEpoch 4/7\n60000/60000 [==============================] - 4s 67us/sample - loss: 0.0875 - acc: 0.0991\nEpoch 5/7\n60000/60000 [==============================] - 4s 66us/sample - loss: 0.0770 - acc: 0.0989\nEpoch 6/7\n60000/60000 [==============================] - 4s 66us/sample - loss: 0.0665 - acc: 0.0991\nEpoch 7/7\n60000/60000 [==============================] - 4s 66us/sample - loss: 0.0598 - acc: 0.0988\n10000/10000 [==============================] - 0s 36us/sample - loss: 0.0692 - acc: 0.0993\n</code></pre>\n\n<p>for the second code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Epoch 1/7\n60000/60000 [==============================] - 4s 65us/sample - loss: 0.3002 - acc: 0.9119\nEpoch 2/7\n60000/60000 [==============================] - 4s 63us/sample - loss: 0.1458 - acc: 0.9561\nEpoch 3/7\n60000/60000 [==============================] - 4s 64us/sample - loss: 0.1066 - acc: 0.9680\nEpoch 4/7\n60000/60000 [==============================] - 4s 64us/sample - loss: 0.0875 - acc: 0.9727\nEpoch 5/7\n60000/60000 [==============================] - 4s 68us/sample - loss: 0.0738 - acc: 0.9768\nEpoch 6/7\n60000/60000 [==============================] - 4s 64us/sample - loss: 0.0662 - acc: 0.9787\nEpoch 7/7\n60000/60000 [==============================] - 4s 64us/sample - loss: 0.0575 - acc: 0.9817\n10000/10000 [==============================] - 0s 35us/sample - loss: 0.0630 - acc: 0.9814\n</code></pre>\n\n<p>and its look like the loss is update but the acc is not learning from custom loss function</p>\n"}, {"tags": ["python", "excel"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 11971202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79ea1c16d46c2b3cd19330817b7106eb?s=128&d=identicon&r=PG&f=1", "display_name": "bashar", "link": "https://stackoverflow.com/users/11971202/bashar"}, "edited": false, "score": 0, "creation_date": 1567695125, "post_id": 57801702, "comment_id": 102047791, "body": "When modified [148] to  [148:], the results change, all data after position 496 is printed in the field 148!"}, {"owner": {"reputation": 1082, "user_id": 715239, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96c26230e324cbacff58e61452951409?s=128&d=identicon&r=PG", "display_name": "Artog", "link": "https://stackoverflow.com/users/715239/artog"}, "reply_to_user": {"reputation": 115, "user_id": 11971202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79ea1c16d46c2b3cd19330817b7106eb?s=128&d=identicon&r=PG&f=1", "display_name": "bashar", "link": "https://stackoverflow.com/users/11971202/bashar"}, "edited": false, "score": 0, "creation_date": 1567713547, "post_id": 57801702, "comment_id": 102055850, "body": "Well, if you dont use an end index you will get the rest of the content. if you only need one index <code>i</code>, you can use <code>row[i:i+1]</code>"}], "tags": [], "owner": {"reputation": 1082, "user_id": 715239, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96c26230e324cbacff58e61452951409?s=128&d=identicon&r=PG", "display_name": "Artog", "link": "https://stackoverflow.com/users/715239/artog"}, "is_accepted": false, "score": 1, "last_activity_date": 1567673226, "creation_date": 1567673226, "answer_id": 57801702, "question_id": 57796862, "link": "https://stackoverflow.com/questions/57796862/python-error-string-index-out-of-range/57801702#57801702", "title": "Python error: &quot; string index out of range\u201d", "body": "<p>You get this error because the string <code>row</code> isn't long enough, i.e. there is no index <code>496</code>. </p>\n\n<p>The reason why the rest of the lines are working is because slicing doesn't throw error on out-of-bounds indices, its just returns an empty list:</p>\n\n<pre><code>&gt;&gt;&gt; a = \"1234\"\n&gt;&gt;&gt; a[4:]\n''\n&gt;&gt;&gt; a[4]\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIndexError: string index out of range\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 11971202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79ea1c16d46c2b3cd19330817b7106eb?s=128&d=identicon&r=PG&f=1", "display_name": "bashar", "link": "https://stackoverflow.com/users/11971202/bashar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1567674679, "answer_count": 1, "score": 0, "last_activity_date": 1567673226, "creation_date": 1567641365, "last_edit_date": 1567642468, "question_id": 57796862, "link": "https://stackoverflow.com/questions/57796862/python-error-string-index-out-of-range", "closed_reason": "Not suitable for this site", "title": "Python error: &quot; string index out of range\u201d", "body": "<p>This code works correctly but gives this error: </p>\n\n<pre><code>ws.write(row_idx, 148, row[496])\nIndexError: string index out of range\n</code></pre>\n\n<p>Before executing this line, the code is working correctly, and when you add it gives this error.</p>\n\n<p>Please, I do not want any change in the results when running the code, just want to solve this problem! </p>\n\n<p>How to fix this error?</p>\n\n<pre><code>import xlwt\nimport io\nbook = xlwt.Workbook()\nws = book.add_sheet('First Sheet')  # Add a sheet\nwith io.open(\"data.txt\", mode=\"r\", encoding=\"utf-8\") as f:\nfor row_idx, row in enumerate(f):\nrow = row.rstrip() \n\n    ws.write(row_idx, 0, row[0:8])\n    ws.write(row_idx, 1, row[9:19])\n    ws.write(row_idx, 2, row[20:21])\n    ws.write(row_idx, 3, row[22:24])\n    ws.write(row_idx, 4, row[25:26])\n    ws.write(row_idx, 5, row[27:28])\n    ws.write(row_idx, 6, row[29:32])\n    ws.write(row_idx, 7, row[33:37])\n    ws.write(row_idx, 8, row[38:40])\n    ws.write(row_idx, 9, row[41:43])\n    ws.write(row_idx, 10, row[44:46])\n    ws.write(row_idx, 11, row[47:51])\n    ws.write(row_idx, 12, row[52:56])\n    ws.write(row_idx, 13, row[57:58])\n    ws.write(row_idx, 14, row[59:63])\n    ws.write(row_idx, 15, row[64:65])\n    ws.write(row_idx, 16, row[66:70])\n    ws.write(row_idx, 17, row[71:72])\n    ws.write(row_idx, 18, row[73:74])\n    ws.write(row_idx, 19, row[75:76])\n    ws.write(row_idx, 20, row[77:78])\n    ws.write(row_idx, 21, row[79:82])\n    ws.write(row_idx, 22, row[83:85])\n    ws.write(row_idx, 23, row[86:88])\n    ws.write(row_idx, 24, row[89:90])\n    ws.write(row_idx, 25, row[91:93])\n    ws.write(row_idx, 26, row[94:96])\n    ws.write(row_idx, 27, row[97:110])\n    ws.write(row_idx, 28, row[111:113])\n    ws.write(row_idx, 29, row[114:118])\n    ws.write(row_idx, 30, row[119:120])\n    ws.write(row_idx, 31, row[121:122])\n    ws.write(row_idx, 32, row[123:124])\n    ws.write(row_idx, 33, row[125:126])\n    ws.write(row_idx, 34, row[127:130])\n    ws.write(row_idx, 35, row[131:134])\n    ws.write(row_idx, 36, row[135:138])\n    ws.write(row_idx, 37, row[139:141])\n    ws.write(row_idx, 38, row[142:145])\n    ws.write(row_idx, 39, row[146:149])\n    ws.write(row_idx, 40, row[150:153])\n    ws.write(row_idx, 41, row[154:157])\n    ws.write(row_idx, 42, row[158:161])\n    ws.write(row_idx, 43, row[162:165])\n    ws.write(row_idx, 44, row[166:169])\n    ws.write(row_idx, 45, row[170:172])\n    ws.write(row_idx, 46, row[173:175])\n    ws.write(row_idx, 47, row[176:178])\n    ws.write(row_idx, 48, row[179:181])\n    ws.write(row_idx, 49, row[182:183])\n    ws.write(row_idx, 50, row[184:185])\n    ws.write(row_idx, 51, row[186:188])\n    ws.write(row_idx, 52, row[189:195])\n    ws.write(row_idx, 53, row[196:202])\n    ws.write(row_idx, 54, row[203:209])\n    ws.write(row_idx, 55, row[210:212])\n    ws.write(row_idx, 56, row[213:214])\n    ws.write(row_idx, 57, row[215:216])\n    ws.write(row_idx, 58, row[217:219])\n    ws.write(row_idx, 59, row[220])\n    ws.write(row_idx, 60, row[221:222])\n    ws.write(row_idx, 61, row[223:225])\n    ws.write(row_idx, 62, row[226:228])\n    ws.write(row_idx, 63, row[229:230])\n    ws.write(row_idx, 64, row[231:232])\n    ws.write(row_idx, 65, row[233:234])\n    ws.write(row_idx, 66, row[235:237])\n    ws.write(row_idx, 67, row[238:350])\n    ws.write(row_idx, 68, row[251:252])\n    ws.write(row_idx, 69, row[253:255])\n    ws.write(row_idx, 70, row[256:260])\n    ws.write(row_idx, 71, row[261:266])\n    ws.write(row_idx, 72, row[267:271])\n    ws.write(row_idx, 73, row[272:276])\n    ws.write(row_idx, 74, row[277:282])\n    ws.write(row_idx, 75, row[283:286])\n    ws.write(row_idx, 76, row[287:290])\n    ws.write(row_idx, 77, row[291:292])\n    ws.write(row_idx, 78, row[293])\n    ws.write(row_idx, 79, row[294:296])\n    ws.write(row_idx, 80, row[297:299])\n    ws.write(row_idx, 81, row[300:303])\n    ws.write(row_idx, 82, row[304:305])\n    ws.write(row_idx, 83, row[306:307])\n    ws.write(row_idx, 84, row[308:309])\n    ws.write(row_idx, 85, row[310:311])\n    ws.write(row_idx, 86, row[312:314])\n    ws.write(row_idx, 87, row[315:317])\n    ws.write(row_idx, 88, row[318:319])\n    ws.write(row_idx, 89, row[320:321])\n    ws.write(row_idx, 90, row[322:323])\n    ws.write(row_idx, 91, row[324:325])\n    ws.write(row_idx, 92, row[326:331])\n    ws.write(row_idx, 93, row[332:335])\n    ws.write(row_idx, 94, row[336:341])\n    ws.write(row_idx, 95, row[342:347])\n    ws.write(row_idx, 96, row[348:349])\n    ws.write(row_idx, 97, row[350:351])\n    ws.write(row_idx, 98, row[352:353])\n    ws.write(row_idx, 99, row[354:356])\n    ws.write(row_idx, 100, row[357:359])\n    ws.write(row_idx, 101, row[360:361])\n    ws.write(row_idx, 102, row[362:363])\n    ws.write(row_idx, 103, row[364:365])\n    ws.write(row_idx, 104, row[366:367])\n    ws.write(row_idx, 105, row[368:369])\n    ws.write(row_idx, 106, row[370:371])\n    ws.write(row_idx, 107, row[372:373])\n    ws.write(row_idx, 108, row[374:375])\n    ws.write(row_idx, 109, row[376:378])\n    ws.write(row_idx, 110, row[379:382])\n    ws.write(row_idx, 111, row[383:386])\n    ws.write(row_idx, 112, row[387:390])\n    ws.write(row_idx, 113, row[391:394])\n    ws.write(row_idx, 114, row[395:398])\n    ws.write(row_idx, 115, row[399:402])\n    ws.write(row_idx, 116, row[403:404])\n    ws.write(row_idx, 117, row[405:409])\n    ws.write(row_idx, 118, row[410:411])\n    ws.write(row_idx, 119, row[412:416])\n    ws.write(row_idx, 120, row[417:418])\n    ws.write(row_idx, 121, row[419:422])\n    ws.write(row_idx, 122, row[423:426])\n    ws.write(row_idx, 123, row[427:430])\n    ws.write(row_idx, 124, row[431:434])\n    ws.write(row_idx, 125, row[435:437])\n    ws.write(row_idx, 126, row[438:440])\n    ws.write(row_idx, 127, row[441:443])\n    ws.write(row_idx, 128, row[444:446])\n    ws.write(row_idx, 129, row[447:450])\n    ws.write(row_idx, 130, row[451:454])\n    ws.write(row_idx, 131, row[455:458])\n    ws.write(row_idx, 132, row[459:460])\n    ws.write(row_idx, 133, row[461:462])\n    ws.write(row_idx, 134, row[463:467])\n    ws.write(row_idx, 135, row[468:469])\n    ws.write(row_idx, 136, row[470:471])\n    ws.write(row_idx, 137, row[472:473])\n    ws.write(row_idx, 138, row[474:475])\n    ws.write(row_idx, 139, row[476:477])\n    ws.write(row_idx, 140, row[478:480])\n    ws.write(row_idx, 141, row[481])\n    ws.write(row_idx, 142, row[482:484])\n    ws.write(row_idx, 143, row[485])\n    ws.write(row_idx, 144, row[486:488])\n    ws.write(row_idx, 145, row[489])\n    ws.write(row_idx, 146, row[490:492])\n    ws.write(row_idx, 147, row[493:495])\n    ws.write(row_idx, 148, row[496])#string index out fo range!\n    ws.write(row_idx, 149, row[497:500])\n    ws.write(row_idx, 150, row[501:506])\n    ws.write(row_idx, 151, row[507:512])\n    ws.write(row_idx, 152, row[513:518])\n    ws.write(row_idx, 153, row[519:524])\n    ws.write(row_idx, 154, row[525:526])\n    ws.write(row_idx, 155, row[527:528])\n    ws.write(row_idx, 156, row[529:530])\n    ws.write(row_idx, 157, row[531:533])\n    ws.write(row_idx, 158, row[534:535])\n    ws.write(row_idx, 159, row[536:537])\n\nbook.save(\"newconvert.xls\")\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2956, "user_id": 2207924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d97be4271939adcd1eec201cd777f57?s=128&d=identicon&r=PG", "display_name": "JeffUK", "link": "https://stackoverflow.com/users/2207924/jeffuk"}, "edited": false, "score": 0, "creation_date": 1567641337, "post_id": 57796849, "comment_id": 102026637, "body": "If the only differentiation is the path.. why not just call C:\\Users\\joonhwan.lee\\AppData\\Local\\Programs\\Python\\Python37&zwnj;&#8203;\\python.exe directly?"}, {"owner": {"reputation": 480, "user_id": 884268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aff1a3aebd1b58120593c28b26de4405?s=128&d=identicon&r=PG", "display_name": "Joonhwan", "link": "https://stackoverflow.com/users/884268/joonhwan"}, "reply_to_user": {"reputation": 2956, "user_id": 2207924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d97be4271939adcd1eec201cd777f57?s=128&d=identicon&r=PG", "display_name": "JeffUK", "link": "https://stackoverflow.com/users/2207924/jeffuk"}, "edited": false, "score": 0, "creation_date": 1567643349, "post_id": 57796849, "comment_id": 102026990, "body": "@JeffUK Hmm. maybe I should be able to run the script itself(using *.py file association with py.exe using shebang line) or in a more portable way regardless of python installed path difference.... and there should be several environment variables(like PYTHONPATH) pre-configured correctly, I think. Please comments."}], "answers": [{"tags": [], "owner": {"reputation": 2956, "user_id": 2207924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d97be4271939adcd1eec201cd777f57?s=128&d=identicon&r=PG", "display_name": "JeffUK", "link": "https://stackoverflow.com/users/2207924/jeffuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1567683406, "creation_date": 1567683406, "answer_id": 57804635, "question_id": 57796849, "link": "https://stackoverflow.com/questions/57796849/py-launcher-in-windows-selecting-a-specific-python-installationall-of-them-sa/57804635#57804635", "title": "py launcher in Windows : Selecting a specific python installation(all of them same version of 3.7-64)", "body": "<p>If your script is written for a specific instance of python you can add a 'Shebang' line, which windows will respect if you call the code from the command line</p>\n\n<p>I.e.</p>\n\n<p>37-32.py:</p>\n\n<pre><code>#!C:\\Python37-32\\python.exe\nimport sys\nprint (sys.version)\n</code></pre>\n\n<p>36-32.py:</p>\n\n<pre><code>#!C:\\Python36-32\\python.exe\nimport sys\nprint (sys.version)\n</code></pre>\n\n<blockquote>\n  <p>c:\\test>36-32.py</p>\n  \n  <p>3.6.0 (v3.6.0:41df79263a11, Dec 23 2016, 07:18:10) [MSC v.1900 32 bit (Intel)]</p>\n  \n  <p>c:\\test>37-32.py</p>\n  \n  <p>3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 21:26:53) [MSC v.1916 32 bit (Intel)]</p>\n</blockquote>\n"}], "owner": {"reputation": 480, "user_id": 884268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aff1a3aebd1b58120593c28b26de4405?s=128&d=identicon&r=PG", "display_name": "Joonhwan", "link": "https://stackoverflow.com/users/884268/joonhwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 726, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567683406, "creation_date": 1567641184, "question_id": 57796849, "link": "https://stackoverflow.com/questions/57796849/py-launcher-in-windows-selecting-a-specific-python-installationall-of-them-sa", "title": "py launcher in Windows : Selecting a specific python installation(all of them same version of 3.7-64)", "body": "<p>I installed python 3.7x from python.org and then anaconda distribution. </p>\n\n<p>Now if I run <code>py -0p</code></p>\n\n<pre><code>Installed Pythons found by py Launcher for Windows\n -3.7-64        D:\\ProgramData\\Anaconda3\\python.exe *\n -3.7-64        C:\\Users\\joonhwan.lee\\AppData\\Local\\Programs\\Python\\Python37\\python.exe\n</code></pre>\n\n<p>As you can see they are all same version. How do I select a specific one?</p>\n\n<p>It seems to me than I only can select a specific python installation only by version number. </p>\n\n<pre><code>\u03bb py --help                                                                                \nPython Launcher for Windows Version 3.7.3150.1013                                          \n\nusage:                                                                                     \npy [launcher-args] [python-args] script [script-args]                                      \n\nLauncher arguments:                                                                        \n\n-2     : Launch the latest Python 2.x version                                              \n-3     : Launch the latest Python 3.x version                                              \n-X.Y   : Launch the specified Python version                                               \n     The above all default to 64 bit if a matching 64 bit python is present.               \n-X.Y-32: Launch the specified 32bit Python version                                         \n-X-32  : Launch the latest 32bit Python X version                                          \n-X.Y-64: Launch the specified 64bit Python version                                         \n-X-64  : Launch the latest 64bit Python X version                                          \n-0  --list       : List the available pythons                                              \n-0p --list-paths : List with paths                                                         \n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "elasticsearch"], "answers": [{"comments": [{"owner": {"reputation": 2152, "user_id": 6326739, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8da8de491899a4fddf6cd2435518cc87?s=128&d=identicon&r=PG&f=1", "display_name": "sjishan", "link": "https://stackoverflow.com/users/6326739/sjishan"}, "edited": false, "score": 0, "creation_date": 1567642493, "post_id": 57796867, "comment_id": 102026839, "body": "How often should I run forcemerge? It appears to block insertion operation."}, {"owner": {"reputation": 50094, "user_id": 278836, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6441baaefcb6a417d11375d96ca21d56?s=128&d=identicon&r=PG", "display_name": "Andrew White", "link": "https://stackoverflow.com/users/278836/andrew-white"}, "reply_to_user": {"reputation": 2152, "user_id": 6326739, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8da8de491899a4fddf6cd2435518cc87?s=128&d=identicon&r=PG&f=1", "display_name": "sjishan", "link": "https://stackoverflow.com/users/6326739/sjishan"}, "edited": false, "score": 0, "creation_date": 1569422953, "post_id": 57796867, "comment_id": 102593840, "body": "forcemerge does not block insertion and the deciding on when is very load dependent."}], "tags": [], "owner": {"reputation": 50094, "user_id": 278836, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6441baaefcb6a417d11375d96ca21d56?s=128&d=identicon&r=PG", "display_name": "Andrew White", "link": "https://stackoverflow.com/users/278836/andrew-white"}, "is_accepted": true, "score": 1, "last_activity_date": 1567641482, "creation_date": 1567641482, "answer_id": 57796867, "question_id": 57796827, "link": "https://stackoverflow.com/questions/57796827/aws-elasticsearch-bulk-insert-latency-increased-drastically/57796867#57796867", "title": "AWS Elasticsearch Bulk Insert Latency Increased drastically", "body": "<p>This isn't particularly surprising but it's going to be hard to give you a full answer simply because there are so many variables. Some things to consider:</p>\n\n<ol>\n<li>Reindexing documents is very expensive since it involves a delete first</li>\n<li>As indexes get bigger the overhead of performing segment merges also goes up</li>\n<li>As indexes get bigger, maintaining doc values and global ordinals gets more expensive</li>\n<li>You are running on burstable t2 instances and so may be running out of CPU or IO credits</li>\n<li>You don't mention doing optimization/force-merges which <em>may</em> help if you have lots of deleted/outdated documents</li>\n</ol>\n"}], "owner": {"reputation": 2152, "user_id": 6326739, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8da8de491899a4fddf6cd2435518cc87?s=128&d=identicon&r=PG&f=1", "display_name": "sjishan", "link": "https://stackoverflow.com/users/6326739/sjishan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 57796867, "answer_count": 1, "score": 0, "last_activity_date": 1567641482, "creation_date": 1567641017, "last_edit_date": 1567641420, "question_id": 57796827, "link": "https://stackoverflow.com/questions/57796827/aws-elasticsearch-bulk-insert-latency-increased-drastically", "title": "AWS Elasticsearch Bulk Insert Latency Increased drastically", "body": "<p>I am using AWS Elasticsearch on a <strong>t2.small node and 10gb EBS volume</strong>. Every 5 minutes I am indexing about 5000 documents*. For each document I am manually passing the unique ID. Since most of the documents gets updated so <strong>for almost all documents there could be version 2 or 3</strong>. </p>\n\n<p>It is also worth mentioning that everyday I am running a <code>delete_by_query</code> operation to delete documents older than one week.</p>\n\n<p>Generally the latency for bulk insert is less than 1 second. But suddenly today after two weeks of testing within just few hours the latency increased up to <strong>3 minutes just to bulk insert 5000 documents</strong>. </p>\n\n<p>I am using elasticsearch-py and awsauth.</p>\n\n<p>I checked the AWS Cluster health statistics. It seems the Old Garbage Collection Time increased drastically since the problem of bulk insert latency stated. It appears there could be correlation between these.</p>\n\n<p><a href=\"https://i.stack.imgur.com/gY0ay.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gY0ay.png\" alt=\"enter image description here\"></a></p>\n\n<p>How to deal with this issue? Is this because of maintaining multiple versions of the documents or use of deletion by query?</p>\n"}, {"tags": ["python", "pytest"], "comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567641904, "post_id": 57796825, "comment_id": 102026742, "body": "Make a helper function from that <code>test_method</code>, the same one but without test_ prefix, and create test_method_1 that calls it with <code>Impl1()</code> argument, and so on."}, {"owner": {"reputation": 1, "user_id": 12022344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efZmBAFq_6c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyGsRv_t2gIfHm8lpi9mAzzGaj3g/photo.jpg?sz=128", "display_name": "mike0sv", "link": "https://stackoverflow.com/users/12022344/mike0sv"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567670075, "post_id": 57796825, "comment_id": 102033791, "body": "Actually I have 60+ tests. Moreover, I want to be able to add tests to test_impl.py, so that those tests automatically were added to each implementation test set"}, {"owner": {"reputation": 1310, "user_id": 4045754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DBrYm.png?s=128&g=1", "display_name": "yeniv", "link": "https://stackoverflow.com/users/4045754/yeniv"}, "edited": false, "score": 0, "creation_date": 1567676775, "post_id": 57796825, "comment_id": 102037272, "body": "You can use <code>pytest_generate_tests</code> hook to pass in dynamically generated values to the fixture. This hook gets called before test collection and execution. You can write some custom code in it e.g. based on the command line args and construct the list of params to parametrize the fixture. Take a look at <a href=\"https://docs.pytest.org/en/latest/example/parametrize.html#deferring-the-setup-of-parametrized-resources\" rel=\"nofollow noreferrer\">this example</a> where the db fixture is parametrized with a list. The list in example is hardcoded but you could put in some logic to build it dynamically."}, {"owner": {"reputation": 1, "user_id": 12022344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efZmBAFq_6c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyGsRv_t2gIfHm8lpi9mAzzGaj3g/photo.jpg?sz=128", "display_name": "mike0sv", "link": "https://stackoverflow.com/users/12022344/mike0sv"}, "edited": false, "score": 0, "creation_date": 1568044185, "post_id": 57796825, "comment_id": 102140848, "body": "Finally worked this out, posted as an answer. Thanks for the help"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12022344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efZmBAFq_6c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyGsRv_t2gIfHm8lpi9mAzzGaj3g/photo.jpg?sz=128", "display_name": "mike0sv", "link": "https://stackoverflow.com/users/12022344/mike0sv"}, "is_accepted": true, "score": 0, "last_activity_date": 1568044156, "creation_date": 1568044156, "answer_id": 57857317, "question_id": 57796825, "link": "https://stackoverflow.com/questions/57796825/is-it-possible-to-dynamically-update-parametrized-fixtures-params/57857317#57857317", "title": "Is it possible to dynamically update parametrized fixture&#39;s params?", "body": "<p>Finally worked this out, however not sure if this is reliable solution.\nin <code>test/common/test_common.py</code> I put my tests:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def test_method(instance: Interface):\n    assert type(instance.method()) == int\n</code></pre>\n\n<p>in <code>tests/common/conftest.py</code> I have interesting stuff:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>THIS_PACKAGE = 'tests/common/'\n\ndef create_instance_hooks(meta_fixture, name):\n    tests_node_id = os.path.join(THIS_PACKAGE, '{}.py'.format(name))\n\n    def pytest_runtest_protocol(item, nextitem):\n        split = item.nodeid.split('::')\n        filename, *test_name = split\n        if filename == tests_node_id and 'instance' in item.fixturenames:\n            func_name = meta_fixture.__name__\n            meta = tuple(item.session._fixturemanager._arg2fixturedefs[func_name])\n            item._request._arg2fixturedefs['instance'] = meta\n\n    @pytest.hookimpl(hookwrapper=True)\n    def pytest_collect_file(path, parent):\n        outcome = yield\n        result = outcome.get_result()\n\n        if parent.parent is None:\n            result.append(\n                DoctestModule(os.path.join(parent.fspath, THIS_PACKAGE, 'conftest.py'), parent,\n                              nodeid=os.path.join(THIS_PACKAGE, '{}_conf.py'.format(name))))\n\n            result.append(Module(os.path.join(parent.fspath, THIS_PACKAGE, 'test_common.py'), parent,\n                                 nodeid=tests_node_id))\n\n    return pytest_runtest_protocol, pytest_collect_file\n</code></pre>\n\n<p>and in <code>tests/impl1/conftest.py</code> I have</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@pytest.fixture\ndef impl1_instance():\n    return Impl1()\n\n\npytest_runtest_protocol, pytest_collect_file = create_instance_hooks(impl1_instance, 'impl1')\n</code></pre>\n\n<p>and in <code>tests/impl2/conftest.py</code> I have</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@pytest.fixture\ndef impl2_instance():\n    return Impl2()\n\n\npytest_runtest_protocol, pytest_collect_file = create_instance_hooks(impl2_instance, 'impl2')\n</code></pre>\n\n<p>So basically when <code>tests/implN</code> tests are collected, <code>pytest_collect_file</code> hook adds tests from <code>tests/common/test_common.py</code>\nand then when they are run, <code>pytest_runtest_protocol</code> hook adds <code>implN_instance</code> fixture as instance fixture. So, if I run just impl1 or impl2, one set of tests are run, and if I run just pytest tests, there are two sets of tests with appropriate fixtures</p>\n"}], "owner": {"reputation": 1, "user_id": 12022344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efZmBAFq_6c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyGsRv_t2gIfHm8lpi9mAzzGaj3g/photo.jpg?sz=128", "display_name": "mike0sv", "link": "https://stackoverflow.com/users/12022344/mike0sv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57857317, "answer_count": 1, "score": 0, "last_activity_date": 1568044156, "creation_date": 1567641002, "last_edit_date": 1567641531, "question_id": 57796825, "link": "https://stackoverflow.com/questions/57796825/is-it-possible-to-dynamically-update-parametrized-fixtures-params", "title": "Is it possible to dynamically update parametrized fixture&#39;s params?", "body": "<p>I want to run the same set of tests on multiple fixture values, but I don't want to \"hardcode\" those values in fixture definition. </p>\n\n<p>My use-case is an interface with multiple implementations and I want to run the same tests on each implementation.</p>\n\n<p>For example, my_code.py </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Interface:\n   def method():\n      pass\n\nclass Impl1(Interface):\n   def method():\n      return 1\n\nclass Impl2(Interface):\n   def method():\n      return 2\n</code></pre>\n\n<p>test_interface.py:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def test_method(instance: Interface):\n    assert type(instance.method()) == int\n</code></pre>\n\n<p>test_impl1.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from my_code import Impl1\n@pytest.fixture\ndef instance():\n    return Impl1()\n</code></pre>\n\n<p>test_impl2.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from my_code import Impl2\n@pytest.fixture\ndef instance():\n    return Impl2()\n</code></pre>\n\n<p>Obviously this code does not work (because fixture \"instance\" is not found). I can write something like this in conftest.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@pytest.fixture(params=[Impl1(), Impl2()])\ndef instance(request):\n   return requst.param\n</code></pre>\n\n<p>but I want to be able to run test_impl1.py to only test Impl1. Also, if I ever going to write Impl3, I dont want to change conftest.py, I want to just add simple test_impl3.py\nAnd what if my implementation is in completely other package?</p>\n\n<p>In short, I want to reuse my tests for each value from a list of fixtures, but I want to change this list of fixtures in runtime (e.g. depending on available implementations)</p>\n"}, {"tags": ["python", "recursion"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 9975719, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157622353727178/picture?type=large", "display_name": "Sean Mahoney", "link": "https://stackoverflow.com/users/9975719/sean-mahoney"}, "edited": false, "score": 1, "creation_date": 1567681014, "post_id": 57799300, "comment_id": 102039504, "body": "Thank you sir. Very enlightening stuff. Do you have a blog or youtube channel where you teach programming?"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "reply_to_user": {"reputation": 111, "user_id": 9975719, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157622353727178/picture?type=large", "display_name": "Sean Mahoney", "link": "https://stackoverflow.com/users/9975719/sean-mahoney"}, "edited": false, "score": 1, "creation_date": 1567693338, "post_id": 57799300, "comment_id": 102046763, "body": "Nope, just here (although doing more learning than teaching). Nice to see you&#39;re digging into this book and asking interesting questions! Also, I forgot to answer your second question--see update."}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 1, "last_activity_date": 1567695905, "last_edit_date": 1567695905, "creation_date": 1567663603, "answer_id": 57799300, "question_id": 57796821, "link": "https://stackoverflow.com/questions/57796821/follow-up-question-to-recursive-function-that-solves-all-possible-ways-to-achiev/57799300#57799300", "title": "Follow up question to recursive function that solves all possible ways to achieve a certain number of points in a game", "body": "<p>The second and third versions work <strong>accidentally</strong> based on <a href=\"https://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument\">the surprising behavior of Python default arguments</a>:</p>\n\n<pre><code>&gt;&gt;&gt; def foo(bar=[]):\n...     bar.append(42)\n...     return bar\n...\n&gt;&gt;&gt; foo()\n[42]\n&gt;&gt;&gt; foo()\n[42, 42]\n&gt;&gt;&gt; foo()\n[42, 42, 42]\n</code></pre>\n\n<p>What happened? Well, when <code>foo</code> was defined, <code>bar = []</code> was created. Future calls do <em>not</em> set <code>bar</code> to a new empty list as might be expected, but rather assign <code>bar</code> to an alias of the original list, which keeps accumulating <code>42</code>s.</p>\n\n<p>This is pretty counter-intuitive, because we'd generally expect functions like this to be stateless and work like:</p>\n\n<pre><code>&gt;&gt;&gt; def foo(bar=\"\"):\n...     bar += \"42\"\n...     return bar\n...\n&gt;&gt;&gt; foo()\n'42'\n&gt;&gt;&gt; foo()\n'42'\n&gt;&gt;&gt; foo()\n'42'\n</code></pre>\n\n<p>Now let's move <code>foo</code> to an inner function of <code>baz</code>:</p>\n\n<pre><code>&gt;&gt;&gt; def baz():\n...     def foo(bar=[]):\n...         bar.append(42)\n...         return bar\n...     return foo()\n...\n&gt;&gt;&gt; baz()\n[42]\n&gt;&gt;&gt; baz()\n[42]\n&gt;&gt;&gt; baz()\n[42]\n</code></pre>\n\n<p>It turns out that in this case, <code>foo</code> is created from scratch on every call of <code>baz</code>, along with its <code>bar = []</code> list. When <code>baz</code> returns, <code>foo</code> is destroyed because it's just a local variable in <code>baz</code>'s stack frame, along with <code>bar</code>.</p>\n\n<p>To make this more obvious, here's an experiment:</p>\n\n<pre><code>&gt;&gt;&gt; def foo(bar=print(\"bar defined\")): pass\n...\nbar defined\n&gt;&gt;&gt; foo()\n&gt;&gt;&gt; foo()\n&gt;&gt;&gt; foo()\n</code></pre>\n\n\n\n<pre><code>&gt;&gt;&gt; def baz():\n...     def foo(bar=print(\"bar defined\")): pass\n...\n&gt;&gt;&gt; baz()\nbar defined\n&gt;&gt;&gt; baz()\nbar defined\n&gt;&gt;&gt; baz()\nbar defined\n</code></pre>\n\n<p>The prints should make it pretty clear what's going on. But if not, here's a recursive version that is similar to your function in that it builds a result list across stack frames by \"abusing\" aliasing on a default parameter:</p>\n\n<pre><code>&gt;&gt;&gt; def foo(i=4, bar=[]):\n...     if i:\n...         bar.append(i)\n...         return foo(i - 1)\n...     return bar\n...\n&gt;&gt;&gt; foo()\n[4, 3, 2, 1]\n</code></pre>\n\n<p>but it fails in, say, JS:</p>\n\n<pre><code>&gt; const foo = (i=4, bar=[]) =&gt; {\n... if (i) {\n..... bar.push(i);\n..... return foo(i - 1);\n..... }\n... return bar;\n... };\nundefined\n&gt; foo();\n[]\n</code></pre>\n\n<p>and Ruby:</p>\n\n<pre><code>irb(main):023:0&gt; def foo(i=4, bar=[])\nirb(main):024:1&gt;   if i &gt; 0\nirb(main):025:2&gt;     bar.push(i)\nirb(main):026:2&gt;     return foo(i - 1)\nirb(main):027:2&gt;   end\nirb(main):028:1&gt;   return bar\nirb(main):029:1&gt; end\n=&gt; :foo\nirb(main):030:0&gt; foo\n=&gt; []\n</code></pre>\n\n<p>where each call to <code>foo()</code> that is missing the <code>bar</code> parameter gets a fresh array (list) assigned to <code>bar</code>. I can show other language examples, but take my word that Python is pretty much unique in its treatment of objects as default parameters.</p>\n\n<p>With all this in mind, the \"correct\" recursive call should be <code>score_finder(points - val, scores, result)</code> (akin to <code>return foo(i - 1, bar)</code>--try this out on the JS/Ruby versions if you want), which fills in the default argument for <code>result</code> after the function has been called once.</p>\n\n<p>This explains my motivation for writing the original code as I did--I just skipped all of the strangeness by avoiding the default <code>def foo(bar=[])</code> pattern entirely (it's OK for primitives like <code>def foo(bar=42)</code> though).</p>\n\n<hr>\n\n<p>As for your second question, <code>scores + [val]</code> <em>seems</em> cleaner, because there's no <code>append</code>/<code>pop</code>/<code>[:]</code>, but it's actually slower and more memory-intensive. Instead of creating one list that gets passed around the call stack by reference (and copied from beginning to end only when a result is ready), <code>find_scoring3</code> creates a whole new list for every recursive call frame (a lot of extra work). This also means <code>find_scoring3</code> is doing an unnecessary copy (<code>scores[:]</code>--try dropping the slice).</p>\n\n<p>A drawback of Python is that it offers a lot of O(n) list operations that are easy to (ab)use, like <code>[:]</code>, <code>in list</code>, <code>list + []</code> that can blow the time complexity up if used incorrectly.</p>\n"}], "owner": {"reputation": 111, "user_id": 9975719, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157622353727178/picture?type=large", "display_name": "Sean Mahoney", "link": "https://stackoverflow.com/users/9975719/sean-mahoney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57799300, "answer_count": 1, "score": 0, "last_activity_date": 1567695905, "creation_date": 1567640941, "question_id": 57796821, "link": "https://stackoverflow.com/questions/57796821/follow-up-question-to-recursive-function-that-solves-all-possible-ways-to-achiev", "title": "Follow up question to recursive function that solves all possible ways to achieve a certain number of points in a game", "body": "<p>Original question (which has been solved): Assuming a simplified football scoring system where you can score {2, 3, 7} points, what are all the possible ways that you can score given a number of points?</p>\n\n<p>Link to that question <a href=\"https://stackoverflow.com/questions/57779421/calculating-all-possible-ways-to-score-in-a-football-game-recursively\">here</a></p>\n\n<p>I am trying to wrap my head around the way these recursive functions maintain the score and results variable in the code below.</p>\n\n<p>Code solution (by ggorlen):</p>\n\n<pre><code>def find_scoring(points, ways_to_score=[2, 3, 7]):\n    def score_finder(points, scores, result):\n        if points == 0:\n            result.append(scores[:])\n        elif points &gt; 0:\n            for val in ways_to_score:\n                scores.append(val)\n                score_finder(points - val, scores, result)\n                scores.pop()\n\n        return result\n\n    return score_finder(points, [], [])\n</code></pre>\n\n<p>This works beautifully, and fully answered my original question. But after reading some problems in Elements of Programming Interviews (Python), I decided to play around with the way I pass the results and scores list. I emulated a technique by the author by not passing results list every time I call the function recursively, but instead assign a default value of the empty list:</p>\n\n<pre><code>def find_scoring2(points, ways_to_score=[2, 3, 7]):\n    def score_finder(points, scores, result = []):\n        if points == 0:\n            result.append(scores[:])\n        elif points &gt; 0:\n            for val in ways_to_score:\n                scores.append(val)\n                score_finder(points - val, scores)\n                scores.pop()\n        return result\n    return score_finder(points, [])\n</code></pre>\n\n<p>This produced the same results and the idea came from EPI page 235 (generating balanced parentheses).</p>\n\n<p>I then decided to change the way the scores variable was created to get rid of the need to pop from the list. I didn't understand the code, but again I copied the idea from the same book.</p>\n\n<pre><code>def find_scoring3(points, ways_to_score=[2, 3, 7]):\n    def score_finder(points, scores, result = []):\n        if points == 0:\n            result.append(scores[:])\n        elif points &gt; 0:\n            for val in ways_to_score:\n                #scores.append(val)\n                score_finder(points - val, scores + [val])\n                #scores.pop()\n\n        return result\n\n    return score_finder(points, [])\n</code></pre>\n\n<p>So my questions are:\n1. How do I wrap my head around the results variable being set to the empty list each time, and still producing the right solution? Is there some video or reference that would help me see how this works?\n2. Why does the behavior of the scores variable change when I switch from appending, to just adding a value to my list?</p>\n"}, {"tags": ["python", "python-2.7", "utf-8", "character-encoding"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1567641927, "post_id": 57796784, "comment_id": 102026746, "body": "There&#39;s example <code>UnicodeReader</code> and <code>UnicodeWriter</code> classes in the Python 2.x <code>csv</code> module&#39;s <a href=\"https://docs.python.org/2/library/csv.html#examples\" rel=\"nofollow noreferrer\">documentation</a> that might help."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1567642497, "post_id": 57796784, "comment_id": 102026840, "body": "@martineau you&#39;ll probably also need to put a BOM at the front of the file so that software like Excel will properly read the UTF-8."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1567644987, "post_id": 57796784, "comment_id": 102027294, "body": "@mark: Good point. Fortunately there&#39;s some <a href=\"https://docs.python.org/2/library/codecs.html#codecs.BOM\" rel=\"nofollow noreferrer\">BOM constants</a> defined in the <code>codecs</code> module that ought to make doing that fairly easy."}, {"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "edited": false, "score": 0, "creation_date": 1567657023, "post_id": 57796784, "comment_id": 102029295, "body": "Hello both. Thanks for answer. I&#39;m new to Python and I don&#39;t understand what BOM is. Thanks for the link shared but is a kind difficult for me since there is no an example there. May you show some example in what I&#39;d need to do please."}], "owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568045577, "creation_date": 1567640572, "last_edit_date": 1568045577, "question_id": 57796784, "link": "https://stackoverflow.com/questions/57796784/how-to-correctly-put-extended-ascii-characters-into-a-csv-file", "title": "How to correctly put extended ASCII characters into a CSV file?", "body": "<p>I'm trying to write some data in an array that contains extended ASCII characters to a CSV file. Below I made an small example of the code I'm using on real file.</p>\n\n<p>The array <code>text_array</code> represents an array containing only one row.</p>\n\n<pre><code>import csv\n\ntext_array = [[\"\u00c1\",\"\u00c2\",\"\u00c6\",\"\u00c7\",\"\u00d6\",\"\u00d7\",\"\u00d8\",\"\u00d9\",\"\u00de\",\"\u00df\",\"\u00e1\",\"\u00e2\",\"\u00e3\",\"\u00e4\",\"\u00e5\",\"\u00e6\"]]\n\nwith open(\"/Files/out.csv\", \"wb\") as f:\n    writer = csv.writer(f)\n    writer.writerows(text_array)    \n</code></pre>\n\n<p>The output I'm getting on CSV file is wrong, showing these characters.</p>\n\n<pre><code>\u00c3   \u00c3\u201a  \u00c3\u2020  \u00c3\u2021  \u00c3\u2013  \u00c3\u2014  \u00c3\u02dc  \u00c3\u2122  \u00c3\u017e  \u00c3\u0178  \u00c3\u00a1  \u00c3\u00a2  \u00c3\u00a3  \u00c3\u00a4  \u00c3\u00a5  \u00c3\u00a6\n</code></pre>\n\n<p>I found that the code below fixes the issue in Python 3.4 but I'm working on Python 2.7.</p>\n\n<pre><code>c = csv.writer(open(\"Out.csv\", 'w',  newline='', encoding='utf-8'))\n</code></pre>\n\n<p>How can I fix this?</p>\n\n<p><strong>UPDATE</strong>\nI receive some links as comments, but is a kind of difficult for me to understand what is needed to do to fix this issue. May someone show some example please.</p>\n"}, {"tags": ["python", "python-3.x", "selenium", "csv"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12005386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b2fef22dccf6945ee766491ef7f8d9?s=128&d=identicon&r=PG&f=1", "display_name": "Salma Madini", "link": "https://stackoverflow.com/users/12005386/salma-madini"}, "edited": false, "score": 0, "creation_date": 1567716079, "post_id": 57796910, "comment_id": 102056759, "body": "That&#39;s exactly what i&#39;m looking for !  Thank you so much ! But i had some errors, the first one is : while i = 0:    SyntaxError: invalid syntax"}, {"owner": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "reply_to_user": {"reputation": 3, "user_id": 12005386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b2fef22dccf6945ee766491ef7f8d9?s=128&d=identicon&r=PG&f=1", "display_name": "Salma Madini", "link": "https://stackoverflow.com/users/12005386/salma-madini"}, "edited": false, "score": 0, "creation_date": 1567825351, "post_id": 57796910, "comment_id": 102090417, "body": "Hi, I just edited my post, I was writing this very fast and didn&#39;t realize you actually have to use double equal signs when comparing a variable and a integer. Make sure to change that!"}, {"owner": {"reputation": 3, "user_id": 12005386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b2fef22dccf6945ee766491ef7f8d9?s=128&d=identicon&r=PG&f=1", "display_name": "Salma Madini", "link": "https://stackoverflow.com/users/12005386/salma-madini"}, "edited": false, "score": 0, "creation_date": 1567977284, "post_id": 57796910, "comment_id": 102118844, "body": "Thank you so much for your help Bob, now the code is running , it opens browser with facebook , select email input and then error : Username = df.username NameError: name &#39;df&#39; is not defined"}], "tags": [], "owner": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "is_accepted": true, "score": 1, "last_activity_date": 1567889860, "last_edit_date": 1567889860, "creation_date": 1567641905, "answer_id": 57796910, "question_id": 57796767, "link": "https://stackoverflow.com/questions/57796767/how-to-import-csv-file-and-send-keys-python-selenium/57796910#57796910", "title": "How to import csv file and send keys (Python Selenium)", "body": "<p>I actually went on the Facebook website and pulled the source codes and wrote a little something extra quickly to log you in to the website</p>\n\n<pre><code>import pandas as pd\nfrom selenium import webdriver\n# Open Browser and go to facebook logging page\nbrowser = webdriver.Chrome(r'C:\\Users\\Hamza\\Desktop\\Python\\chromedriver')\nbrowser.get('https://facebook.com')\n# Import csv file \ndata = pd.read_excel (r'C:\\Users\\Hamza\\Desktop\\testcsv.xlsx')\ni = 0\nwhile i == 0:\n    a = 0\n    Username = df.username\n    Password = df.password\n\n    # Sends username\n    id_box = driver.find_element_by_class_id('email')\n    id_box.send_keys(Username[a])\n    # Sends password\n    Pass_box = driver.find_element_by_class_name('pass')\n    Pass_box.send_keys(Password[a])\n    # Click login\n    Send = driver.find_element_by_css_selector(\"u_0_3\")\n    Send.click()\n\n    try:\n        test = driver.find_element_by_class_name('pass')\n        id_box.clear()\n        Pass_box.clear()\n    except:\n        print(\"logged in\")\n        break\n    a = a + 1\n</code></pre>\n\n<p>However this is assuming that your csv files has the files saved in columns named username and password, so you might have to tweak it    </p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 13066232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiZKiei8r38nIzUadCzk3WuIR-4Cc8yt6nDCjuFqA=k-s128", "display_name": "Israr Awan", "link": "https://stackoverflow.com/users/13066232/israr-awan"}, "is_accepted": false, "score": 0, "last_activity_date": 1611433915, "last_edit_date": 1611433915, "creation_date": 1611433271, "answer_id": 65863992, "question_id": 57796767, "link": "https://stackoverflow.com/questions/57796767/how-to-import-csv-file-and-send-keys-python-selenium/65863992#65863992", "title": "How to import csv file and send keys (Python Selenium)", "body": "<p>The best way to do this in my opinion is to open the CSV file in dict().\nHere's my code it may help you guys. Ignore detail this is nothing just the file I'm working on.</p>\n<pre><code>with open('C:\\Users\\Hamza\\Desktop\\testcsv.csv','rt')as f:\n    data = csv.DictReader(f)\n    for detail in data:\n        numberOfBedrooms=detail['numberOfBedrooms']\n        numberOfBathrooms=detail['numberOfBathrooms']\n        pricePerMonth=detail['pricePerMonth']\n        adress=detail['adress']\n        description=detail['description']\n        square_feet=detail['square_feet']\n        bedrooms = driver.find_element_by_xpath('//*[@id=&quot;jsc_c_12&quot; or text()=&quot;Number \n        of bathrooms&quot;]')\n        bedrooms.send_keys(numberOfBathrooms)\n        \n       \n</code></pre>\n<p>Loop through your data and store the data you want in variable then use variable to sendeys. Just like I did in example bedrooms.send_keys(numberOfBathrooms)</p>\n"}], "owner": {"reputation": 3, "user_id": 12005386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b2fef22dccf6945ee766491ef7f8d9?s=128&d=identicon&r=PG&f=1", "display_name": "Salma Madini", "link": "https://stackoverflow.com/users/12005386/salma-madini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 57796910, "answer_count": 2, "score": 0, "last_activity_date": 1611433915, "creation_date": 1567640445, "question_id": 57796767, "link": "https://stackoverflow.com/questions/57796767/how-to-import-csv-file-and-send-keys-python-selenium", "title": "How to import csv file and send keys (Python Selenium)", "body": "<p>I'm trying to create a script that :</p>\n\n<ul>\n<li>Open Browser\n-> Go to a website (logging page)\n-> Auto Logging (filling up email and password details from csv file )\n-> Close Tab\n-> Re open again the website\n-> Re Auto logging but with the second account (filling up details from csv file SECOND ROW ) .</li>\n</ul>\n\n<p>...\nRe do the same tasks 50 times (From account 1 to 50 for example) </p>\n\n<pre><code>import pandas as pd\nfrom selenium import webdriver\n\n//Open Browser and go to facebook logging page\nbrowser = webdriver.Chrome(r'C:\\Users\\Hamza\\Desktop\\Python\\chromedriver')\nbrowser.get('https://facebook.com')\n\n//Import csv file \ndata = pd.read_excel (r'C:\\Users\\Hamza\\Desktop\\testcsv.xlsx')\n</code></pre>\n"}, {"tags": ["python", "json", "pyodbc"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 11017814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69fe7cae782c75a10d31f14f12bf788?s=128&d=identicon&r=PG&f=1", "display_name": "more09", "link": "https://stackoverflow.com/users/11017814/more09"}, "edited": false, "score": 0, "creation_date": 1567657679, "post_id": 57796822, "comment_id": 102029449, "body": "thanks for the explanation @OluwafemiSule. x.grpnm worked , but now I&#39;m getting only the last list (in our case bedroom list) in the response (and not the kitchen and toys list). Am I missing something in code ?    And how do I get full json response under &quot;summary&quot; dictionary."}, {"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "reply_to_user": {"reputation": 49, "user_id": 11017814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69fe7cae782c75a10d31f14f12bf788?s=128&d=identicon&r=PG&f=1", "display_name": "more09", "link": "https://stackoverflow.com/users/11017814/more09"}, "edited": false, "score": 1, "creation_date": 1567658696, "post_id": 57796822, "comment_id": 102029686, "body": "move the initialisation of the dictionary outside of the loop"}, {"owner": {"reputation": 49, "user_id": 11017814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69fe7cae782c75a10d31f14f12bf788?s=128&d=identicon&r=PG&f=1", "display_name": "more09", "link": "https://stackoverflow.com/users/11017814/more09"}, "edited": false, "score": 0, "creation_date": 1567878918, "post_id": 57796822, "comment_id": 102100767, "body": "Thanks a lot @OluwafemiSule.Initilization of dict outside the loop worked.  Moving further I had a need to pass the value for one of the column (by putting into variable and use the variable in rest of program) out of the selected columns in cursor.execute query."}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "reply_to_user": {"reputation": 49, "user_id": 11017814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69fe7cae782c75a10d31f14f12bf788?s=128&d=identicon&r=PG&f=1", "display_name": "more09", "link": "https://stackoverflow.com/users/11017814/more09"}, "edited": false, "score": 0, "creation_date": 1567880711, "post_id": 57796822, "comment_id": 102101178, "body": "@more09 - That is a different issue. You should <a href=\"https://stackoverflow.com/questions/ask\">ask a new question</a>."}, {"owner": {"reputation": 49, "user_id": 11017814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69fe7cae782c75a10d31f14f12bf788?s=128&d=identicon&r=PG&f=1", "display_name": "more09", "link": "https://stackoverflow.com/users/11017814/more09"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1567881539, "post_id": 57796822, "comment_id": 102101341, "body": "@GordThompson , sure will post a new question. Since it was related to same flow of code, so continued the discussion here."}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "reply_to_user": {"reputation": 49, "user_id": 11017814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69fe7cae782c75a10d31f14f12bf788?s=128&d=identicon&r=PG&f=1", "display_name": "more09", "link": "https://stackoverflow.com/users/11017814/more09"}, "edited": false, "score": 0, "creation_date": 1567882513, "post_id": 57796822, "comment_id": 102101594, "body": "@more09 - Your new question can include a link to this question for context."}], "tags": [], "owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "is_accepted": true, "score": 2, "last_activity_date": 1567882164, "last_edit_date": 1567882164, "creation_date": 1567640969, "answer_id": 57796822, "question_id": 57796766, "link": "https://stackoverflow.com/questions/57796766/how-to-dynamically-build-json-from-the-database-rows/57796822#57796822", "title": "How to dynamically build json from the database rows?", "body": "<p><code>x</code> is a <code>pyodbc.Row</code> object. \nDictionary keys must be hashable. Immutable objects like string, int, tuple, implement the hash protocol.</p>\n\n<p>Use the <code>grpnm</code> attribute of <code>x</code> which if it's a primitive should be hashable.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>results_ps = {}\n\nfor x in data:\n    # ...\n    results_ps[x.grpnm] = out\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 11017814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69fe7cae782c75a10d31f14f12bf788?s=128&d=identicon&r=PG&f=1", "display_name": "more09", "link": "https://stackoverflow.com/users/11017814/more09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 57796822, "answer_count": 1, "score": 0, "last_activity_date": 1567882164, "creation_date": 1567640443, "last_edit_date": 1567880772, "question_id": 57796766, "link": "https://stackoverflow.com/questions/57796766/how-to-dynamically-build-json-from-the-database-rows", "title": "How to dynamically build json from the database rows?", "body": "<p>I want to dynamically build the json. Data in the back end database table looks like below for one customer. ('grpnm' and 'description' from below can be different for other customer)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>custid | grpnm | description | quantity | rate | amount\n1 | toys | abc | 100 | 5.5 | 550\n1 | toys | def | 10 | 4 | 40\n1 | kitchen| abc | 5 | 3 | 15\n1 | kitchen | def | 20 | 4.5 | 90\n1 | bedroom | xyz | 10 | 5 | 50\n</code></pre>\n\n<p>I have tried creating the dictionary but getting error and no luck with final JSON response</p>\n\n<pre><code>custid = 1\nconn = pyodbc.connect(connection_string)\ncursor = conn.cursor()\n# get distinct grpnm for given customer\ncursor.execute(\"select distinct grpnm from table where custid=?\", custid)\ndata = cursor.fetchall()\nfor x in data:\n    results_ps = {}\n    out = []\n\n    cursor.execute(\"SELECT description,quantity,rate,amount FROM table where custid=? and grpnm=?\", custid, x)\n    columns = [column[0] for column in cursor.description]\n    for row in cursor:\n#        print(row)\n        out.append(dict(zip(columns, row)))\n    results_ps[x] = out   # TypeError: unhashable type: 'pyodbc.Row'\n    #print(out)\n    print(results_ps)\n\nsummary = json.dumps(results_ps, indent=4)\nprint(summary)\n</code></pre>\n\n<p>So based on the custid passed through api, the expected json format for response should as:</p>\n\n<pre><code>\"summary\": {\n            \"toys\": [{\n                \"description\": \"abc\",\n                \"quantity\": 100,\n                \"rate\": 5.5,\n                \"amount\": 550\n            },\n            {\n                \"description\": \"def\",\n                \"quantity\": 10,\n                \"rate\": 4,\n                \"amount\": 40\n            }],\n            \"kitchen\": [{\n                    \"description\": \"abc\",\n                    \"quantity\": 5,\n                    \"rate\": 3,\n                    \"amount\": 15\n                },\n                {\n                    \"description\": \"def\",\n                    \"quantity\": 20,\n                    \"rate\": 4.5,\n                    \"amount\": 90\n                }\n            ],\n            \"bedroom\": [{\n                    \"description\": \"xyz\",\n                    \"quantity\": 10,\n                    \"rate\": 5,\n                    \"amount\": 50\n                }],\n            \"toysSubtotal\": \"\",\n            \"kitchenSubtotal\": \"\" ,\n            \"bedroomSubtotal\": \"\"\n        }\n</code></pre>\n"}, {"tags": ["python", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11869856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AwhElGcZ5Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2sjdpVX1bepn8s0_xNpdsAXxZGw/photo.jpg?sz=128", "display_name": "Pedro Jesus", "link": "https://stackoverflow.com/users/11869856/pedro-jesus"}, "edited": false, "score": 1, "creation_date": 1567657743, "post_id": 57798378, "comment_id": 102029463, "body": "Thanks for you answer, but I have a doubt, for example the group green only has 2 items, then it should be has a value of 0.5 not 0.2"}, {"owner": {"reputation": 25, "user_id": 11869856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AwhElGcZ5Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2sjdpVX1bepn8s0_xNpdsAXxZGw/photo.jpg?sz=128", "display_name": "Pedro Jesus", "link": "https://stackoverflow.com/users/11869856/pedro-jesus"}, "edited": false, "score": 1, "creation_date": 1567657981, "post_id": 57798378, "comment_id": 102029517, "body": "I mean, the value in the dataframe is the percentage for each group. For instance, Delhi black, is 2/6"}], "tags": [], "owner": {"reputation": 1735, "user_id": 10008771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d64a2e41bc1f6bb8cb10fd7ec9fb3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Aung", "link": "https://stackoverflow.com/users/10008771/edward-aung"}, "is_accepted": true, "score": 0, "last_activity_date": 1567658249, "last_edit_date": 1567658249, "creation_date": 1567657203, "answer_id": 57798378, "question_id": 57796754, "link": "https://stackoverflow.com/questions/57796754/create-dataframe-of-percentage-of-each-group/57798378#57798378", "title": "Create dataframe of percentage of each group", "body": "<p>First merge these columns single column: </p>\n\n<pre><code>all_items = pd.concat([df.ITEM_1, df.ITEM_2])\nall_items\nOut[8]: \nID\n279      Delhi\n224     Kanpur\n221      Delhi\n329    Kannauj\n333      Delhi\n279        Msc\n224     Kanpur\n221     Kanpur\n329        Phd\n333     Kanpur\ndtype: object\n</code></pre>\n\n<p>Then, merge it back to df:</p>\n\n<pre><code>temp_df = pd.concat([df[[\"GROUP\"]].copy(), df[[\"GROUP\"]].copy()])\ntemp_df[\"ITEM\"] = all_items\ntemp_df.reset_index(inplace=True)\ntemp_df[\"temp_col\"] = 1\ntemp_df\nOut[15]: \n    ID  GROUP     ITEM  temp_col\n0  279  BLACK    Delhi         1\n1  224  BLACK   Kanpur         1\n2  221   BLUE    Delhi         1\n3  329  GREEN  Kannauj         1\n4  333  BLACK    Delhi         1\n5  279  BLACK      Msc         1\n6  224  BLACK   Kanpur         1\n7  221   BLUE   Kanpur         1\n8  329  GREEN      Phd         1\n9  333  BLACK   Kanpur         1\n</code></pre>\n\n<p>Pivote it finally, </p>\n\n<pre><code>my_pivot = temp_df.pivot_table(values=\"temp_col\", index=\"GROUP\", columns=\"ITEM\", aggfunc=np.sum, fill_value=0)\nmy_pivot = my_pivot / len(df)\n# my_pivot / len (df) # &lt;-- changing this to\nto_div = my_pivot.aggregate(np.sum, axis=1) # &lt;-- this and\nmy_pivot = my_pivot.div(to_div, axis=0) # &lt;-- this\nOut[31]: \n    ITEM      Delhi  Kannauj  Kanpur       Msc  Phd\nGROUP                                          \nBLACK  0.333333      0.0     0.5  0.166667  0.0\nBLUE   0.500000      0.0     0.5  0.000000  0.0\nGREEN  0.000000      0.5     0.0  0.000000  0.5\n</code></pre>\n\n<p>Done. </p>\n"}], "owner": {"reputation": 25, "user_id": 11869856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AwhElGcZ5Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2sjdpVX1bepn8s0_xNpdsAXxZGw/photo.jpg?sz=128", "display_name": "Pedro Jesus", "link": "https://stackoverflow.com/users/11869856/pedro-jesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 57798378, "answer_count": 1, "score": 0, "last_activity_date": 1567658249, "creation_date": 1567640295, "last_edit_date": 1567656876, "question_id": 57796754, "link": "https://stackoverflow.com/questions/57796754/create-dataframe-of-percentage-of-each-group", "title": "Create dataframe of percentage of each group", "body": "<p>I have the following dataframe, </p>\n\n<pre><code>\u00b4data = {'ID':[279, 224, 221, 329, 333],\n    'GROUP':['BLACK', 'BLACK', 'BLUE', 'GREEN','BLACK'],\n    'ITEM_1':['Delhi', 'Kanpur', 'Delhi', 'Kannauj', 'Delhi'],\n    'ITEM_2':['Msc', 'Kanpur', 'Kanpur', 'Phd', 'Kanpur']}\u00b4\n\n\u00b4df = pd.DataFrame(data)\u00b4\n\u00b4df = df.set_index('ID')\u00b4\n\n ID  Group    Item_1   Item_2\n279    A      Delhi    Msc\n224    A      Kanpur   Kanpur        \n221    B      Delhi    Kanpur    \n329    C      Kannauj  Phd\n333    A      Delhi    Kanpur\n</code></pre>\n\n<p>How can create the following dataframe, with the row equal to differents items and columns with the group, i.e.,</p>\n\n<pre><code>            Delhi      KANPUR       Kannauj    Msc      Phd                  \n   A         2/6%       3/6%         0%       1/6%      0%\n   B         1/2%       1/2%         0%        0%       0%\n   C           0%         0%       1/2%        0%     1/2%\n</code></pre>\n\n<p>I mean, construct a dataframe with percentaje respect to the total of each group. Any idea will be appreciated. I thouhg use groupby(['GROUP']) and .apply(lambda r: r/r.sum(), axis=1), but is not how I need this dataframe</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "function", "data-science"], "answers": [{"comments": [{"owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1567644011, "post_id": 57796841, "comment_id": 102027103, "body": "thanks, but I wanted to also filter by the color column"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1567644957, "post_id": 57796841, "comment_id": 102027288, "body": "can you give your expected output?"}, {"owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1567646694, "post_id": 57796841, "comment_id": 102027544, "body": "expected output is added just like your answer, except it would be for a certain color I could pick instead of the overall df"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1567647123, "post_id": 57796841, "comment_id": 102027591, "body": "The expected output doesn&#39;t quite make sense to me. Where are the other colors and there is no processed for Green but why do you put 0.333 for Green-Processed?"}, {"owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1567647624, "post_id": 57796841, "comment_id": 102027674, "body": "I gave a sample of the data, meaning there are a lot of other rows in the df I updated the sample dataset, sorry!"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1567647756, "post_id": 57796841, "comment_id": 102027698, "body": "No worries. How would you handle other colors? Can you give a minimal and complete input and output example?"}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 1, "last_activity_date": 1567648085, "last_edit_date": 1567648085, "creation_date": 1567641094, "answer_id": 57796841, "question_id": 57796741, "link": "https://stackoverflow.com/questions/57796741/creating-function-to-filter-and-calculate-division-of-rows-based-on-filter/57796841#57796841", "title": "Creating function to filter and calculate division of rows based on filter?", "body": "<p>You can use groupby and len():</p>\n\n<pre><code>df.groupby(by='Status').apply(lambda x: len(x)/len(df))\n\nStatus\nCancelled    0.666667\nProcessed    0.333333\ndtype: float64\n</code></pre>\n\n<p>Breakdown by both Status and Color:</p>\n\n<pre><code>cc = df.groupby(by='Color').ID.count()\ndf.groupby(by=['Color', 'Status']).apply(lambda x: len(x)/cc.loc[x.Color.iloc[0]])\n\nColor  Status   \nBlue   Cancelled    0.666667\n       Processed    0.333333\nGreen  Cancelled    0.666667\n       Processed    0.333333\nRed    Processed    1.000000\ndtype: float64\n</code></pre>\n"}], "owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57796841, "answer_count": 1, "score": 0, "last_activity_date": 1567648085, "creation_date": 1567640186, "last_edit_date": 1567647682, "question_id": 57796741, "link": "https://stackoverflow.com/questions/57796741/creating-function-to-filter-and-calculate-division-of-rows-based-on-filter", "title": "Creating function to filter and calculate division of rows based on filter?", "body": "<p>I have a df such as below:</p>\n\n<p>I am using simple code such as below: that filters columns in the <strong>df</strong> and then I calculate simple math based on value of the column,\nso if the column values is cancelled, processing, and complete; I want to calculate the % or number of rows that were cancelled of the entire df or all the rows.</p>\n\n<p>df looks like:</p>\n\n<pre><code>   ID |    Status    |   Color\n   555    Cancelled     Green\n   434    Processed     Red   \n   212    Cancelled     Blue\n   121    Cancelled     Green\n   242    Cancelled     Blue\n   352    Processed     Green\n   343    Processed     Blue\n</code></pre>\n\n<p>The Code Im currently using is:</p>\n\n<pre><code>df[df['Color'] == 'Green']\n\ndf[(df['Status']=='Cancelled') &amp; (df['Color']=='Green')]\n</code></pre>\n\n<p>Meaning for each different type of color I manually first filter the df to get the # of rows, then double filter it below to get the number of rows or orders cancelled then manually divide that # but he # of just green rows.</p>\n\n<p>If I wanted to create a function where I can insert the color name and the status and do the math that way in a simple function what would be the best approach for that?</p>\n\n<p>Expected Output would be something like:</p>\n\n<pre><code> Status      Green\nCancelled    0.666667\nProcessed    0.333333\ndtype: float64\n</code></pre>\n\n<p>Thanks so much!</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "macos"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 11846355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ZHB1L52_vg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resucErnduibDvhNCwqo9TDHBa_eA/photo.jpg?sz=128", "display_name": "cocoo84hh", "link": "https://stackoverflow.com/users/11846355/cocoo84hh"}, "edited": false, "score": 0, "creation_date": 1567640549, "post_id": 57796731, "comment_id": 102026501, "body": "@wcarhat it did not work. I get a ParseError:  Error tokenizing data. C error: Expected 1 fields in line 7, saw 2"}, {"owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "reply_to_user": {"reputation": 181, "user_id": 11846355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ZHB1L52_vg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resucErnduibDvhNCwqo9TDHBa_eA/photo.jpg?sz=128", "display_name": "cocoo84hh", "link": "https://stackoverflow.com/users/11846355/cocoo84hh"}, "edited": false, "score": 0, "creation_date": 1567640664, "post_id": 57796731, "comment_id": 102026520, "body": "@cocoo84hh I would argue that it did work - with this new error it sounds like your code can open the file, but it is a pandas parsing issue, indicating that the initial error is solved. In regards to the <code>ParseError</code>, is your CSV formatted correctly?"}], "tags": [], "owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "is_accepted": false, "score": 0, "last_activity_date": 1567640030, "creation_date": 1567640030, "answer_id": 57796731, "question_id": 57796706, "link": "https://stackoverflow.com/questions/57796706/cannot-import-local-file-with-pd-read-csv-on-mac/57796731#57796731", "title": "Cannot import local file with pd.read_csv on Mac", "body": "<p>Your <code>Desktop</code> is actually located in your user space (your home folder, abbreviated with <code>~</code>, which expands to <code>/Users/&lt;username&gt;</code>). Replace your path with:</p>\n\n<pre><code>~/Desktop/Python/download.csv\n</code></pre>\n\n<p>Like so:</p>\n\n<pre><code>df = pd.read_csv('~/Desktop/Python/download.csv')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 11846355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ZHB1L52_vg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resucErnduibDvhNCwqo9TDHBa_eA/photo.jpg?sz=128", "display_name": "cocoo84hh", "link": "https://stackoverflow.com/users/11846355/cocoo84hh"}, "is_accepted": false, "score": 1, "last_activity_date": 1567640662, "creation_date": 1567640662, "answer_id": 57796795, "question_id": 57796706, "link": "https://stackoverflow.com/questions/57796706/cannot-import-local-file-with-pd-read-csv-on-mac/57796795#57796795", "title": "Cannot import local file with pd.read_csv on Mac", "body": "<p>I figured it out: df = pd.read_csv('~/Desktop/Python/download.csv',error_bad_lines=False)</p>\n"}], "owner": {"reputation": 181, "user_id": 11846355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ZHB1L52_vg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resucErnduibDvhNCwqo9TDHBa_eA/photo.jpg?sz=128", "display_name": "cocoo84hh", "link": "https://stackoverflow.com/users/11846355/cocoo84hh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2005, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567659046, "creation_date": 1567639809, "last_edit_date": 1567659046, "question_id": 57796706, "link": "https://stackoverflow.com/questions/57796706/cannot-import-local-file-with-pd-read-csv-on-mac", "title": "Cannot import local file with pd.read_csv on Mac", "body": "<p>I have a download.csv file stored in a folder \"Python\" on my local Desktop. Now, I open my Jupyter Notebook locally and want to read this file. I use:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('Desktop/Python/download.csv')\ndf.head()\n</code></pre>\n\n<p>However, it gives me an error: </p>\n\n<blockquote>\n  <p>FileNotFoundError: [Errno 2] File b'Desktop/Python/download.csv' does\n  not exist: b'Desktop/Python/download.csv'</p>\n</blockquote>\n\n<p>What needs to change here?</p>\n"}, {"tags": ["python", "pip", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 4837, "user_id": 761963, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe86307b8e3f4af414e8c1c653e974ca?s=128&d=identicon&r=PG", "display_name": "Jorge Orpinel", "link": "https://stackoverflow.com/users/761963/jorge-orpinel"}, "edited": false, "score": 0, "creation_date": 1580060450, "post_id": 57796702, "comment_id": 105965303, "body": "p.s. you can install a hook script in the <code>files</code> section of <code>.ebextensions</code> as expleined in <a href=\"https://blog.eq8.eu/article/aws-elasticbeanstalk-hooks.html\" rel=\"nofollow noreferrer\">blog.eq8.eu/article/aws-elasticbeanstalk-hooks.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1214, "user_id": 3674263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/uYfWy.jpg?s=128&g=1", "display_name": "CodeSpent", "link": "https://stackoverflow.com/users/3674263/codespent"}, "edited": false, "score": 0, "creation_date": 1567714900, "post_id": 57797991, "comment_id": 102056340, "body": "Could you show me an example of this? I did read that but I&#39;m confused on execution. I tried using <code>files</code>, but that fails each time. Would I need a separate .config file to assume proper order?"}, {"owner": {"reputation": 1330, "user_id": 897566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25469e7be52f30eaf59078d9b7499889?s=128&d=identicon&r=PG", "display_name": "juanmhidalgo", "link": "https://stackoverflow.com/users/897566/juanmhidalgo"}, "reply_to_user": {"reputation": 1214, "user_id": 3674263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/uYfWy.jpg?s=128&g=1", "display_name": "CodeSpent", "link": "https://stackoverflow.com/users/3674263/codespent"}, "edited": false, "score": 1, "creation_date": 1567725973, "post_id": 57797991, "comment_id": 102059183, "body": "No, I don&#39;t have an example at hand.  Can you update your question adding what you tried using <code>files</code>? Another option that worked for me was to use Docker instead of the python option. It&#39;s really easy to use and you have `more control over the packages you install."}, {"owner": {"reputation": 1214, "user_id": 3674263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/uYfWy.jpg?s=128&g=1", "display_name": "CodeSpent", "link": "https://stackoverflow.com/users/3674263/codespent"}, "edited": false, "score": 0, "creation_date": 1567728053, "post_id": 57797991, "comment_id": 102059586, "body": "I did end up going to Docker route not long after this. I did figure out preinit, however, it still failed. I&#39;ll update my question and you can pop it in your answer for future readers."}], "tags": [], "owner": {"reputation": 1330, "user_id": 897566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25469e7be52f30eaf59078d9b7499889?s=128&d=identicon&r=PG", "display_name": "juanmhidalgo", "link": "https://stackoverflow.com/users/897566/juanmhidalgo"}, "is_accepted": true, "score": 2, "last_activity_date": 1567653508, "creation_date": 1567653508, "answer_id": 57797991, "question_id": 57796702, "link": "https://stackoverflow.com/questions/57796702/upgrade-pip-via-ebextensions/57797991#57797991", "title": "Upgrade pip via .ebextensions", "body": "<p>Did you try to use the <code>preinit</code> hook?</p>\n\n<p><a href=\"https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/custom-platform-hooks.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/custom-platform-hooks.html</a></p>\n\n<blockquote>\n  <p>When an instance is launched, Elastic Beanstalk runs preinit, appdeploy, and postinit, in this order. On subsequent deployments to running instances, Elastic Beanstalk runs appdeploy hooks. configdeploy hooks are run when a user updates instance software configuration settings. restartappserver hooks are run only when the user initiates an application server restart. </p>\n</blockquote>\n\n<p>According to the documentation:</p>\n\n<blockquote>\n  <p>Place scripts that you want hooks to trigger in one of the subfolders of the /opt/elasticbeanstalk/hooks/ folder. </p>\n</blockquote>\n"}], "owner": {"reputation": 1214, "user_id": 3674263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/uYfWy.jpg?s=128&g=1", "display_name": "CodeSpent", "link": "https://stackoverflow.com/users/3674263/codespent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 0, "accepted_answer_id": 57797991, "answer_count": 1, "score": 3, "last_activity_date": 1567728609, "creation_date": 1567639772, "last_edit_date": 1567728609, "question_id": 57796702, "link": "https://stackoverflow.com/questions/57796702/upgrade-pip-via-ebextensions", "title": "Upgrade pip via .ebextensions", "body": "<p>I'm trying to upgrade pip to possibly resolve a <code>dist-info directory not found</code> error, but my deployment appears to just totally ignore any attempts to. Is it possible that installation of requirements happens before any .ebextensions scripts &amp; that's why I'm seeing no progress? If so at what point could I upgrade pip?</p>\n\n<p>I understand I could SSH in, but I don't want to do this for every deploy.</p>\n\n<p><strong>01_upgrade_pip.config</strong></p>\n\n<pre><code>commands:\n  01_upgrade_pip:\n    command: /opt/python/run/venv/bin/pip install --upgrade pip\n    ignoreErrors: false\n</code></pre>\n\n<p>Is everything correct here or have the resources I've been following since been deprecated or something?</p>\n\n<p>I have tried including the command in my packages.config as well hoping that'd allow the upgrade to occur first, but still just no indication that it was even acknowledged.</p>\n\n<pre><code>packages:\n  yum:\n    git: []\n\ncommands:\n  01_upgrade_pip:\n    command: /opt/python/run/venv/bin/pip install --upgrade pip\n    ignoreErrors: false\n</code></pre>\n\n<p>I won't include logs for now unless someone requests something specific. Currently all that's relevant there is the same <code>dist-info directory not found</code> error alongside the alert that I'm using pip version 9 when 19 is available (confirming no upgrade is occurring).</p>\n\n<p><strong>Update for Answer Below</strong>\nThe solution as mentioned below was to use a preinit script.</p>\n\n<p>In <strong>/opt/elasticbeanstalk/hooks/preinit/08upgradepip.sh</strong>:</p>\n\n<pre><code>python3 -m pip install --upgrade pip\n</code></pre>\n"}, {"tags": ["python", "pandas", "date", "datetime", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 8908698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1hnHS.jpg?s=128&g=1", "display_name": "Janman", "link": "https://stackoverflow.com/users/8908698/janman"}, "edited": false, "score": 0, "creation_date": 1567646210, "post_id": 57796748, "comment_id": 102027483, "body": "Awesome, thanks! How do I look something like this up?"}], "tags": [], "owner": {"reputation": 1838, "user_id": 1060828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y6Z4V.jpg?s=128&g=1", "display_name": "arowell", "link": "https://stackoverflow.com/users/1060828/arowell"}, "is_accepted": true, "score": 1, "last_activity_date": 1567640748, "last_edit_date": 1567640748, "creation_date": 1567640235, "answer_id": 57796748, "question_id": 57796673, "link": "https://stackoverflow.com/questions/57796673/switching-month-numbers-to-month-names-on-x-axis-of-histogram-matplotlib/57796748#57796748", "title": "Switching month numbers to month names on x-axis of histogram matplotlib", "body": "<p>Use %B in the DateFormatter to get month names instead of the month numbers that %m gives. You can also use %b to get abbreviated names.</p>\n"}, {"tags": [], "owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "is_accepted": false, "score": 1, "last_activity_date": 1567642212, "creation_date": 1567642212, "answer_id": 57796936, "question_id": 57796673, "link": "https://stackoverflow.com/questions/57796673/switching-month-numbers-to-month-names-on-x-axis-of-histogram-matplotlib/57796936#57796936", "title": "Switching month numbers to month names on x-axis of histogram matplotlib", "body": "<p>just need to replace the month format in mdates.DateFormatter:</p>\n\n<pre><code>#fig = plt.figure(figsize=(12,6))\n#s = fig.add_subplot(111)\n#s.hist(mydata,bins=120,stacked=True, color=mycolors, alpha=1)\n#s.xaxis.set_major_locator(mdates.MonthLocator())\n\ns.xaxis.set_major_formatter(mdates.DateFormatter('%b'))\nOR\ns.xaxis.set_major_formatter(mdates.DateFormatter('%B'))\n\n#s.legend(legend)\n</code></pre>\n\n<p>B = long name\nb = abbreviated name</p>\n"}], "owner": {"reputation": 47, "user_id": 8908698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1hnHS.jpg?s=128&g=1", "display_name": "Janman", "link": "https://stackoverflow.com/users/8908698/janman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 57796748, "answer_count": 2, "score": 0, "last_activity_date": 1567642212, "creation_date": 1567639459, "question_id": 57796673, "link": "https://stackoverflow.com/questions/57796673/switching-month-numbers-to-month-names-on-x-axis-of-histogram-matplotlib", "title": "Switching month numbers to month names on x-axis of histogram matplotlib", "body": "<p>I have a histogram with data points over one year. Everything works well, except that the month get displayed as a number. I would like to display them with their names. Instead of \"01\" it should say \"January\" (also slightly rotated, but I can do that myself.)\nHow do I tell maplotlib to use the month names?</p>\n\n<p>I already looked in the documentation and other posts, but couldn't make it work.</p>\n\n<p>My code:</p>\n\n<pre><code>fig = plt.figure(figsize=(12,6))\ns = fig.add_subplot(111)\ns.hist(mydata,bins=120,stacked=True, color=mycolors, alpha=1)\ns.xaxis.set_major_locator(mdates.MonthLocator())\ns.xaxis.set_major_formatter(mdates.DateFormatter('%m'))\ns.legend(legend)\n</code></pre>\n\n<p>With <code>mydata</code> being a list of dataframes of shape (n,1).\nI am new to matplotlib and don't fully understand what is happening in <code>s.xaxis.set_major_formatter(mdates.DateFormatter('%m'))</code> but my guess is this line needs to be modified?</p>\n\n<p>My Code results in the following Graph:</p>\n\n<p><img src=\"https://i.imgur.com/bx2xCPT.jpg[/img]\" alt=\"The Graph with month numbers instead of names\">\nAny help is greatly appreciated :)</p>\n"}, {"tags": ["python", "python-3.x", "windows", "tkinter"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567640380, "post_id": 57796655, "comment_id": 102026474, "body": "You can get the screen height and width using the universal <code>winfo_screenheight()</code> and <code>winfo_screenwidth()</code> methods. Here&#39;s some <a href=\"http://web.archive.org/web/20190222214221id_/http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/universal.html\" rel=\"nofollow noreferrer\">documentation</a>."}, {"owner": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567644652, "post_id": 57796655, "comment_id": 102027229, "body": "Those, I have, that isn&#39;t a problem. The problem is that if I set a window size to that, the actual size I get is that <i>plus</i> the size of the title bar and border. (AKA - the window is too big.)"}, {"owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 2, "creation_date": 1567650104, "post_id": 57796655, "comment_id": 102028071, "body": "Try <code>window.state(&#39;zoomed&#39;)</code>."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1567674519, "post_id": 57796655, "comment_id": 102036039, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13424598/python-tk-window-get-x-y-geometry-coordinates-without-top-of-window\">Python tk window get x, y, geometry/coordinates without top of window</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1567708757, "post_id": 57796655, "comment_id": 102053879, "body": "@acw1668: Using <code>window.state(&#39;zoomed&#39;)</code> doesn&#39;t do anything."}, {"owner": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "edited": false, "score": 0, "creation_date": 1567716719, "post_id": 57796655, "comment_id": 102056984, "body": "Duplicate: Not quite a duplicate of that other question. That question was about getting the x &amp; y of a window without it&#39;s decorations, and on top of that, the answer wasn&#39;t really spelled out or newbie-friendly, and was missing details. This question is about how to size a window into an exact space on screen, since tkinter&#39;s dimensions don&#39;t factor in the window decor. I think this question is the next evolutionary step after that question, now that I think about it."}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "edited": false, "score": 0, "creation_date": 1567715849, "post_id": 57810206, "comment_id": 102056693, "body": "Screen size: Oh, no, that part I had - the code in the sample above gets the usable size of the screen (the height of the screen minus what the windows taskbar takes up, and the width of the screen), and that part works fine. What was screwing things up is that no matter what size you set your window height and width to, you&#39;d get a larger window that you specify since the title bar and borders aren&#39;t factored in. You can say you want a 500x500 window, and the <i>inside</i> of the window will be that, but the whole window will be bigger."}, {"owner": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "edited": false, "score": 0, "creation_date": 1567715887, "post_id": 57810206, "comment_id": 102056703, "body": "As for the optimizations: Whoa. I&#39;m definitely not up to that level yet, but I&#39;ll be keeping this in mind when I get better. Thank you! :-)"}, {"owner": {"reputation": 13, "user_id": 12016352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05333307470f1cf7adaade16c3aefa8a?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Rajczakowski", "link": "https://stackoverflow.com/users/12016352/adam-rajczakowski"}, "reply_to_user": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "edited": false, "score": 0, "creation_date": 1567783420, "post_id": 57810206, "comment_id": 102079686, "body": "You can rid of the task bar if that&#39;s what you want. <code>window.overrideredirect(True)</code> will get rid of the task bar. You need to press alt+f4 to exit though."}, {"owner": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "edited": false, "score": 0, "creation_date": 1567790647, "post_id": 57810206, "comment_id": 102082701, "body": "Well, no, that wasn&#39;t what I was looking for, but that&#39;s extremely interesting to know on it&#39;s own! I think that&#39;ll be handy sometime in the future; thank you! :-)"}], "tags": [], "owner": {"reputation": 13, "user_id": 12016352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05333307470f1cf7adaade16c3aefa8a?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Rajczakowski", "link": "https://stackoverflow.com/users/12016352/adam-rajczakowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1567784093, "last_edit_date": 1567784093, "creation_date": 1567703628, "answer_id": 57810206, "question_id": 57796655, "link": "https://stackoverflow.com/questions/57796655/how-do-i-create-a-new-python-tkinter-window-so-fits-exactly-in-the-available-des/57810206#57810206", "title": "How do I create a new python tkinter window so fits exactly in the available desktop area, but isn&#39;t maximized?", "body": "<p>Instead of using <code>monitorInfo</code> you can use <code>winfo_screedwidth()</code> and <code>winfo_screenheight()</code>.</p>\n\n<p>This is how to do it:</p>\n\n<pre><code>windowWidth = window.winfo_screenwidth\nwindowHeight = window.winfo_screenheight\n\nwindow.geometry(\"%sx%s\" %(screenWidth, screenHeight)\n</code></pre>\n\n<p>You can use <code>window.overrideredirect(True)</code> to get rid of the task bar. It will also get rid of the bar at the top, so you will have to use alt+f4 to exit out of the window.</p>\n\n<p>Also, these options are optional but will certainly make your code more clear and efficient by getting rid of possible errors which may occur when doing certain tasks with the code.</p>\n\n<p>--You can stop reading if you want to--</p>\n\n<p>Instead of <code>from tkinter import Tk</code> use <code>import tkinter as tk</code>. This means you can write <code>tk.widget</code> and not having to write out every widget you use. Also, if you use <code>from tkinter import *</code> you can use <code>import tkinter as tk</code> instead as it groups all attributes into <code>tk</code>. It will certainly clean up the attributes, and you will not having them together with all of the built in attributes</p>\n\n<p>Also, get all of your widgets into a <code>class</code>. You can do this like so:</p>\n\n<pre><code>class Name(tk.Frame):\n</code></pre>\n\n<p>Inside it you need to write the <code>__init__</code> function:</p>\n\n<pre><code>def __init__(self, master, **kwargs): #Feel free to add any extra parameters\n</code></pre>\n\n<p>Inside the <code>__init__</code> function you write:</p>\n\n<pre><code>super().__init__(master, **kwargs)\n</code></pre>\n\n<p>The class makes your code neat and tidy while the <code>__init__</code> and <code>super()</code> are needed for whenever you make a function.</p>\n\n<p>Also, you can use the <code>__name__ == \"__main__\"</code> if condition to stop the code from running when importing it to another script.</p>\n\n<p>This is how to do this:</p>\n\n<pre><code>def func_name():\n    root = tk.Tk()\n    #Add any root titles, geometry or any other configurations here\n    app = Window(root) #Instead of Window, replace it with your class name\n    app.pack(fill=tk.BOTH, expand=True)\n    #Add any app configurations here\n    root.mainloop()\n\nif __name__ == \"__main__\":\n    func_name()\n</code></pre>\n\n<p>All these features, you can include to make your code neater.</p>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "is_accepted": true, "score": 0, "last_activity_date": 1567715598, "creation_date": 1567715598, "answer_id": 57812632, "question_id": 57796655, "link": "https://stackoverflow.com/questions/57796655/how-do-i-create-a-new-python-tkinter-window-so-fits-exactly-in-the-available-des/57812632#57812632", "title": "How do I create a new python tkinter window so fits exactly in the available desktop area, but isn&#39;t maximized?", "body": "<p>I GOT IT! The trick is that as long as the window's visible (even if it's somewhere offscreen), you can do this:</p>\n\n<pre><code>titlebarHeight = window.winfo_rooty() - window.winfo_y()\nborderSize= window.winfo_rootx() - window.winfo_x()\n</code></pre>\n\n<p>And once you have those, you can adjust your desired window width and height to correct for the title bar and borders like this:</p>\n\n<pre><code>WindowWidth = WindowWidth - (borderSize * 2)\nWindowHeight = (WindowHeight - titlebarHeight) - borderSize\n</code></pre>\n\n<p>So, the code that ended up working in the end is this (which is complete - copy and paste this into your editor of choice and it should run as-is):</p>\n\n<pre><code>#Get screen height and width WITHOUT including the taskbar.\n#This part works fine - I've tested the result and it's good.\nfrom win32api import GetMonitorInfo, MonitorFromPoint\nmonitorInfo = GetMonitorInfo(MonitorFromPoint((0,0)))\nworkArea = monitorInfo.get(\"Work\")\nscreenAvailableWidth = workArea[2]\nscreenAvailableHeight = workArea[3]\n\n#Create a tkinter window\nfrom tkinter import Tk \nwindow = Tk()\n\n#Set new window height &amp; width\n#--------------------------------------------\n#-----   HERE. This is what changed:    -----\n#--------------------------------------------\n#Make window visible so we can get some geometry\nwindow.update_idletasks()\n#Calculate title bar and border size\ntitlebarHeight = window.winfo_rooty() - window.winfo_y()\nborderSize= window.winfo_rootx() - window.winfo_x()\n\n#Start with full available screen\nwindowWidth = screenAvailableWidth\nwindowHeight = screenAvailableHeight\n\n#Adjust for title bar and borders\nwindowWidth = windowWidth - (borderSize * 2 )\nwindowHeight = (windowHeight - titlebarHeight) - borderSize\n#--------------------------------------------\n\n#Show debug info\nprint(\"\")\nprint(\"screenAvailableWidth:\",screenAvailableWidth,\n      \" screenAvailableHeight:\",screenAvailableHeight)\nprint(\"windowWidth:\\t\",windowWidth,\" windowHeight:\\t\",windowHeight)\n\n#Set the new window to upper left corner and height &amp;\n# width of screen (after adjustment)\nwindow.geometry(\"{}x{}+0+0\".format(windowWidth,windowHeight))\n\n#Show the window\nwindow.mainloop()\n</code></pre>\n\n<p>(The breakthrough was examining all the properties mentioned in the suspected duplicate question (and it's comments and replies) here: <a href=\"https://stackoverflow.com/questions/13424598/tkinter-window-get-x-y-geometry-coordinates-without-top-of-window\">tkinter window get x, y, geometry/coordinates without top of window</a>\nThat question didn't really put the pieces together in a newbie-friendly way, nor did it have any usable sample code, so hopefully this will be of use to someone else in the future.)</p>\n\n<p>To everyone who commented and offered solutions for me, thank you! I really appreciate you taking the time to do so. :-)</p>\n"}], "owner": {"reputation": 178, "user_id": 11058699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRCyk.png?s=128&g=1", "display_name": "CyberTaco", "link": "https://stackoverflow.com/users/11058699/cybertaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 57812632, "answer_count": 2, "score": 1, "last_activity_date": 1567784093, "creation_date": 1567639310, "question_id": 57796655, "link": "https://stackoverflow.com/questions/57796655/how-do-i-create-a-new-python-tkinter-window-so-fits-exactly-in-the-available-des", "title": "How do I create a new python tkinter window so fits exactly in the available desktop area, but isn&#39;t maximized?", "body": "<p>(Environment: Windows, Python 3)</p>\n\n<p>My problem is that using .geometry to set a height &amp; width sets the height &amp; width of the space inside the window - the title bar and window border make it larger. Below is my code so far. As you'll see, even though I have it create a window that's the exact size of the available screen area, the window ends up being too big because the title bar and borders aren't accounted for when setting the size.</p>\n\n<p>See that \"what needs to change here\" part? What do those two statements need to be changed to or replaced with, that's simple? (If you have it right, the window should fit exactly in the available space on your desktop, with title bar and borders clearly visible.)</p>\n\n<p>Please keep it simple - I'm still new to all of this. :-)</p>\n\n<pre><code>#Important variables:\n#screenAvailableWidth, screenAvailableHeight: Height &amp; width of\n#                                              screen without\n#                                              taskbar\n#windowWidth, windowHeight: Height &amp; width of new window to create\n#window: Object of class Tk() from tkinter.\n\n#Get screen height and width WITHOUT including the taskbar.\n#This part works fine - I've tested the result and it's good.\nfrom win32api import GetMonitorInfo, MonitorFromPoint\nmonitorInfo = GetMonitorInfo(MonitorFromPoint((0,0)))\nworkArea = monitorInfo.get(\"Work\")\nscreenAvailableWidth = workArea[2]\nscreenAvailableHeight = workArea[3]\n\n#Create a tkinter window\nfrom tkinter import Tk \nwindow = Tk()\n\n#Set new window height &amp; width\n#--------------------------------------------\n#----- HERE. What needs to change here? -----\n#--------------------------------------------\nwindowWidth = screenAvailableWidth\nwindowHeight = screenAvailableHeight\n#--------------------------------------------\n\n#Show debug info\nprint(\"\")\nprint(\"screenAvailableWidth:\",screenAvailableWidth,\n      \" screenAvailableHeight:\",screenAvailableHeight)\nprint(\"windowWidth:\\t\",windowWidth,\" windowHeight:\\t\",windowHeight)\n\n#Set the new window to upper left corner and height &amp;\n# width of screen\nwindow.geometry(\"{}x{}+0+0\".format(windowWidth,windowHeight))\n\n#Show the window\nwindow.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "recursion"], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1567639660, "last_edit_date": 1567639660, "creation_date": 1567639457, "answer_id": 57796672, "question_id": 57796638, "link": "https://stackoverflow.com/questions/57796638/recursion-results-in-nested-lists/57796672#57796672", "title": "Recursion results in nested lists", "body": "<p>You return an item, not a list when <code>len(n) == 1</code>. You are also concatenating the two lists incorrectly. Try this:</p>\n\n<pre><code>def frisbeeSort(n):\n    index = n.index(min(n))\n    if len(n) == 1:\n        return [n[0]]\n    else:\n        n[0:index + 1] = n[index::-1]\n        n = [n[0]] + frisbeeSort(n[1:])\n    return n\n\nlist1 = [12, 42, 34, 12, 76, 45, 13, 98, 234, 1]\nprint(frisbeeSort(list1))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[1, 12, 12, 13, 34, 42, 45, 76, 98, 234]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "is_accepted": false, "score": 0, "last_activity_date": 1567639882, "creation_date": 1567639882, "answer_id": 57796716, "question_id": 57796638, "link": "https://stackoverflow.com/questions/57796638/recursion-results-in-nested-lists/57796716#57796716", "title": "Recursion results in nested lists", "body": "<p>When you write <code>[n[0], frisbeeSort(n[1:])]</code>, it creates a two-element list in which the first element is <code>n[0]</code> and the second one is the value returned from <code>frisbeeSort(n[1:])</code> (which is a list). If you want to join them into a flat list, you can write <code>[n[0]] + frisbeeSort(n[1:])</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 12022338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc76ca5b335190c521a5de88adf5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "IonicGolem36", "link": "https://stackoverflow.com/users/12022338/ionicgolem36"}, "edited": false, "score": 0, "creation_date": 1567910560, "post_id": 57798534, "comment_id": 102105700, "body": "could you please explain what exactly changes the original list instead of returning a sorted list?"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 13, "user_id": 12022338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc76ca5b335190c521a5de88adf5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "IonicGolem36", "link": "https://stackoverflow.com/users/12022338/ionicgolem36"}, "edited": false, "score": 0, "creation_date": 1567919607, "post_id": 57798534, "comment_id": 102106873, "body": "@IonicGolem36, I&#39;ve added some explanation of this to my answer -- let me know if you still have questions."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 2, "last_activity_date": 1567919563, "last_edit_date": 1567919563, "creation_date": 1567658445, "answer_id": 57798534, "question_id": 57796638, "link": "https://stackoverflow.com/questions/57796638/recursion-results-in-nested-lists/57798534#57798534", "title": "Recursion results in nested lists", "body": "<blockquote>\n  <p>I would like to recursively alter the original list instead of using a\n  temp list</p>\n</blockquote>\n\n<p>Although the accepted answer addresses the \"nested list\" issue, I don't believe it addresses the above expectation.  That is, if you do:</p>\n\n<pre><code>list1 = [12, 42, 34, 12, 76, 45, 13, 98, 234, 1]\nprint(frisbeeSort(list1))\nprint(list1)\n</code></pre>\n\n<p>You get:</p>\n\n<pre><code>&gt; python3 test.py\n[1, 12, 12, 13, 34, 42, 45, 76, 98, 234]\n[1, 234, 98, 13, 45, 76, 12, 34, 42, 12]\n&gt;\n</code></pre>\n\n<p>Where <code>list1</code> is altered but remains unsorted.  Here's one way to go about the problem of sorting the list in-place using the OP's algorithm:</p>\n\n<pre><code>def frisbeeSort(n, start=0):\n    if start &lt; len(n):\n        index = n.index(min(n[start:]), start)\n        n[start:index + 1] = n[start:index + 1][::-1]\n        frisbeeSort(n, start + 1)\n\nlist1 = [12, 42, 34, 12, 76, 45, 13, 98, 234, 1]\nfrisbeeSort(list1)\nprint(list1)\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>&gt; python3 test.py\n[1, 12, 12, 13, 34, 42, 45, 76, 98, 234]\n&gt;\n</code></pre>\n\n<blockquote>\n  <p>could you please explain what exactly changes the original list\n  instead of returning a sorted list?</p>\n</blockquote>\n\n<p>There are two things that allow this to happen.  First, the (defaulted) second <code>start</code> argument:</p>\n\n<pre><code>def frisbeeSort(n, start=0):\n</code></pre>\n\n<p>which allows us to preserve the initial elements that are sorted on the recursive call:</p>\n\n<pre><code> frisbeeSort(n, start + 1)\n</code></pre>\n\n<p>and tells us where to begin our new minimum search:</p>\n\n<pre><code> index = n.index(min(n[start:]), start)\n</code></pre>\n\n<p>etc.  Second, the assignment back into the array itself:</p>\n\n<pre><code>n[start:index + 1] = n[start:index + 1][::-1]\n</code></pre>\n\n<p>We're replacing the remaining unsorted elements with the same values reversed.  The temporary array on right gets tossed and the original gets updated.</p>\n"}], "owner": {"reputation": 13, "user_id": 12022338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc76ca5b335190c521a5de88adf5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "IonicGolem36", "link": "https://stackoverflow.com/users/12022338/ionicgolem36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 57796672, "answer_count": 3, "score": 1, "last_activity_date": 1567919563, "creation_date": 1567639165, "last_edit_date": 1567658456, "question_id": 57796638, "link": "https://stackoverflow.com/questions/57796638/recursion-results-in-nested-lists", "title": "Recursion results in nested lists", "body": "<p>Running my function <code>frisbeeSort()</code> always results in the list being sorted but with each item being in a nested list. I would like to recursively alter the original list instead of using a temp list.</p>\n\n<pre><code>def frisbeeSort(n):\n    index = n.index(min(n))\n    if len(n) == 1:\n        return n[0]\n    else:\n        n[0:index + 1] = n[index::-1]\n        n = [n[0], frisbeeSort(n[1:])]\n    return n\n\nlist1 = [12, 42, 34, 12, 76, 45, 13, 98, 234, 1]\n</code></pre>\n\n<p>I expect </p>\n\n<pre><code>[1, 12, 12, 13, 34, 42, 45, 76, 98, 234]\n</code></pre>\n\n<p>but I keep getting</p>\n\n<pre><code>[1, [12, [12, [13, [34, [42, [45, [76, [98, 234]]]]]]]]]\n</code></pre>\n"}, {"tags": ["python", "azure", "virtual-machine", "azure-runbook"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 11776950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b7e5c5f60cc264741dccd2e51a611b5?s=128&d=identicon&r=PG&f=1", "display_name": "tt1997", "link": "https://stackoverflow.com/users/11776950/tt1997"}, "edited": false, "score": 0, "creation_date": 1567705764, "post_id": 57797443, "comment_id": 102052707, "body": "Thanks! This did exactly what I needed it to do!"}], "tags": [], "owner": {"reputation": 23089, "user_id": 9773937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUlzf.jpg?s=128&g=1", "display_name": "Charles Xu", "link": "https://stackoverflow.com/users/9773937/charles-xu"}, "is_accepted": true, "score": 2, "last_activity_date": 1567648594, "last_edit_date": 1567648594, "creation_date": 1567648089, "answer_id": 57797443, "question_id": 57796635, "link": "https://stackoverflow.com/questions/57796635/how-to-check-if-a-virtual-machine-is-running-using-python/57797443#57797443", "title": "How to check if a virtual machine is running using Python", "body": "<p>The Azure SDK <code>azure.mgmt.compute</code> that you used is right. You just need to get the VM state inside that information. The code below:</p>\n\n<pre><code>vm = compute_client.virtual_machines.get('v-chaxu-ChinaCXPTeam', 'azureUbuntu18', expand='instanceView')\n\n# These are the statuses of the VM about the event execution status and the vm state, the vm state is the second one.\nstatuses = vm.instance_view.statuses\nprint(statuses[1].display_status)\n</code></pre>\n\n<p>The output here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bjBJN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bjBJN.png\" alt=\"enter image description here\"></a></p>\n\n<p>For more details, see the <a href=\"https://docs.microsoft.com/en-us/python/api/azure-mgmt-compute/azure.mgmt.compute.v2019_03_01.models.virtualmachine?view=azure-python#variables\" rel=\"nofollow noreferrer\">instance_view in VM information</a>.</p>\n\n<p>Or you can also get the instance_view directly and the code below:</p>\n\n<pre><code>instance_view = compute_client.virtual_machines.instance_view('v-chaxu-ChinaCXPTeam', 'azureUbuntu18')\nprint(instance_view.statuses[1].display_status)\n</code></pre>\n\n<p>The output is also the same as above. For more details, see the function <a href=\"https://docs.microsoft.com/en-us/python/api/azure-mgmt-compute/azure.mgmt.compute.v2019_03_01.operations.virtualmachinesoperations?view=azure-python#instance-view-resource-group-name--vm-name--custom-headers-none--raw-false----operation-config-\" rel=\"nofollow noreferrer\">instance_view(resource_group_name, vm_name, custom_headers=None, raw=False, **operation_config)</a>.</p>\n"}], "owner": {"reputation": 107, "user_id": 11776950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b7e5c5f60cc264741dccd2e51a611b5?s=128&d=identicon&r=PG&f=1", "display_name": "tt1997", "link": "https://stackoverflow.com/users/11776950/tt1997"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1477, "favorite_count": 1, "accepted_answer_id": 57797443, "answer_count": 1, "score": 1, "last_activity_date": 1567648594, "creation_date": 1567639130, "question_id": 57796635, "link": "https://stackoverflow.com/questions/57796635/how-to-check-if-a-virtual-machine-is-running-using-python", "title": "How to check if a virtual machine is running using Python", "body": "<p>I am writing a python runbook to be able to start or stop a Virtual machine. If the VM is running, I would like to stop it. If it is not running, I would like to turn it on. I need to write an if condition to do this but I don't know how to get the status of my Virtual machine in azure so I can make the comparison.</p>\n\n<p>I tried using the following:</p>\n\n<pre><code>compute_client.virtual_machines.get(resourceGroupName, vmName, expand = 'instanceview')\n</code></pre>\n\n<p>But when I print this, I don't see how to access the status of the Virtual machine. </p>\n\n<p>This is my script code:</p>\n\n<pre><code>import os\nfrom azure.mgmt.compute import ComputeManagementClient\nimport azure.mgmt.resource\nimport automationassets\n\nimport sys\n\nresourceGroupName = str(sys.argv[1])\nvmName = str(sys.argv[2])\n\ndef get_automation_runas_credential(runas_connection):\n    from OpenSSL import crypto\n    import binascii\n    from msrestazure import azure_active_directory\n    import adal\n\n    # Get the Azure Automation RunAs service principal certificate\n    cert = automationassets.get_automation_certificate(\"AzureRunAsCertificate\")\n    pks12_cert = crypto.load_pkcs12(cert)\n    pem_pkey = crypto.dump_privatekey(crypto.FILETYPE_PEM,pks12_cert.get_privatekey())\n\n    # Get run as connection information for the Azure Automation service principal\n    application_id = runas_connection[\"ApplicationId\"]\n    thumbprint = runas_connection[\"CertificateThumbprint\"]\n    tenant_id = runas_connection[\"TenantId\"]\n\n    # Authenticate with service principal certificate\n    resource =\"https://management.core.windows.net/\"\n    authority_url = (\"https://login.microsoftonline.com/\"+tenant_id)\n    context = adal.AuthenticationContext(authority_url)\n    return azure_active_directory.AdalAuthentication(\n    lambda: context.acquire_token_with_client_certificate(\n            resource,\n            application_id,\n            pem_pkey,\n            thumbprint)\n    )\n\n# Authenticate to Azure using the Azure Automation RunAs service principal\nrunas_connection = automationassets.get_automation_connection(\"AzureRunAsConnection\")\nazure_credential = get_automation_runas_credential(runas_connection)\n\n# Initialize the compute management client with the RunAs credential and specify the subscription to work against.\ncompute_client = ComputeManagementClient(\n    azure_credential,\n    str(runas_connection[\"SubscriptionId\"])\n)\n\nprintMe = compute_client.virtual_machines.get(resourceGroupName, vmName, expand = 'instanceview')\nprint(printMe)\n\n#Start the VM if not running:\n\nprint('\\n' + 'Starting the ' + ' ' + vmName + ' ' + 'in ' + ' ' + resourceGroupName)\nasync_vm_start = compute_client.virtual_machines.start(\n  resourceGroupName, vmName)\nasync_vm_start.wait()\n\n\n\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567639366, "post_id": 57796627, "comment_id": 102026296, "body": "Right: if you type in anything except <code>pounds</code>, then <code>pc</code> is undefined when you reach the following statement.  What else are you expecting to happen?  It looks like you need to work through a tutorial on input checking.  Then, be more careful with your program logic."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567639415, "post_id": 57796627, "comment_id": 102026304, "body": "Most of all, code only a few lines at a time.  You&#39;ve written about 30 lines of code here without testing to see whether the first 5 do what you expect."}, {"owner": {"reputation": 9, "user_id": 11991678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFlHs.jpg?s=128&g=1", "display_name": "Morenz", "link": "https://stackoverflow.com/users/11991678/morenz"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567639440, "post_id": 57796627, "comment_id": 102026309, "body": "Yeah true. school assignment is due today haha"}, {"owner": {"reputation": 9, "user_id": 11991678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFlHs.jpg?s=128&g=1", "display_name": "Morenz", "link": "https://stackoverflow.com/users/11991678/morenz"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567639477, "post_id": 57796627, "comment_id": 102026316, "body": "i&#39;ll go back though the basics and ask for help from someone else."}, {"owner": {"reputation": 9, "user_id": 11991678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFlHs.jpg?s=128&g=1", "display_name": "Morenz", "link": "https://stackoverflow.com/users/11991678/morenz"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567639525, "post_id": 57796627, "comment_id": 102026326, "body": "thanks for responding, at least :)"}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 0, "creation_date": 1567639740, "post_id": 57796627, "comment_id": 102026358, "body": "Hint: Store the result of <code>input</code> in a variable. Then, use that variable instead of <code>pc</code> with an <code>if</code>-<code>elif</code> block. For example, <code>s = input(...)</code>, then <code>if s == &quot;pounds&quot;: ... elif s == &quot;kilograms&quot;: ...</code> You may also want to handle input that is not <code>&quot;pounds&quot;</code> or <code>&quot;kilograms&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 11991678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFlHs.jpg?s=128&g=1", "display_name": "Morenz", "link": "https://stackoverflow.com/users/11991678/morenz"}, "edited": false, "score": 1, "creation_date": 1567639616, "post_id": 57796679, "comment_id": 102026339, "body": "Yeah I realized how stupid my question was just after posting it. Thanks for responding though :)"}], "tags": [], "owner": {"reputation": 491, "user_id": 4225094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/roMY0.jpg?s=128&g=1", "display_name": "Josh Desmond", "link": "https://stackoverflow.com/users/4225094/josh-desmond"}, "is_accepted": false, "score": 0, "last_activity_date": 1567639511, "creation_date": 1567639511, "answer_id": 57796679, "question_id": 57796627, "link": "https://stackoverflow.com/questions/57796627/how-to-stop-python-from-running-certain-if-code-when-the-variable-value-doesn/57796679#57796679", "title": "How to stop python from running certain &#39;if&#39; code when the variable value doesn&#39;t match", "body": "<p>There is a 'bug' in your code.</p>\n\n<p>The variable <code>pc</code> is only defined if the first prompt  <code>== 'pounds'</code>. Therefor, you are getting the error message <code>pc is not defined</code> on line 7, because it is only defined if you type in 'pounds'.</p>\n"}, {"tags": [], "owner": {"reputation": 2123, "user_id": 4732620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9MNs.jpg?s=128&g=1", "display_name": "TheLazyScripter", "link": "https://stackoverflow.com/users/4732620/thelazyscripter"}, "is_accepted": false, "score": 0, "last_activity_date": 1567640388, "creation_date": 1567640388, "answer_id": 57796761, "question_id": 57796627, "link": "https://stackoverflow.com/questions/57796627/how-to-stop-python-from-running-certain-if-code-when-the-variable-value-doesn/57796761#57796761", "title": "How to stop python from running certain &#39;if&#39; code when the variable value doesn&#39;t match", "body": "<pre><code>while True: #generic while statement, only way to exit is break\n    choice = input(\"Would you like to convert to pounds or kilograms: \") #store our choice in a variable for later\n    if choice == 'pounds':\n        kilograms = float(input(\"Enter the amount of kilograms:  \"))\n        pounds = kilograms / 2.205\n        print('The amount of killograms you entered is ', kilograms,\n                  ' This is ', pounds, ' pounds ')\n\n    elif choice == \"kilograms\": #use an elif and define a different specific statement\n        pounds = float(input(\"Enter the amount of pounds:  \"))\n        kilograms = pounds * 2.2\n        grams = kilograms * 1000\n\n        print('The amount of pounds you entered is ', pounds,\n                  ' This is ', kilograms, ' kilograms ', 'and', grams,\n                  'grams' )\n\n    elif choice == \"quit\":\n        print(\"Goodbye!\")\n        break #use break to break out of a loop\n\n    else: #use an else to define a generic statement\n        print \"%s is not a valid choice\"%choice\n        continue #use continue to return to the beginning of the loop without doing anything after\n\n    do_continue = input('Do you want to go again? (y/n) ')\n    if do_continue == 'y':\n        pass #do nothing and continue\n\n    elif do_continue == 'n':\n        print(\"Goodbye!\")\n        break\n\n    else:\n        print(\"What language is that? We will go again anyways!\")\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11991678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFlHs.jpg?s=128&g=1", "display_name": "Morenz", "link": "https://stackoverflow.com/users/11991678/morenz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567640388, "creation_date": 1567639092, "last_edit_date": 1592644375, "question_id": 57796627, "link": "https://stackoverflow.com/questions/57796627/how-to-stop-python-from-running-certain-if-code-when-the-variable-value-doesn", "title": "How to stop python from running certain &#39;if&#39; code when the variable value doesn&#39;t match", "body": "<p>Trying to create a decision menu in python 2.7.</p>\n<p>Can't get the options to be individual and not in order.</p>\n<p>anything other than <code>if</code> gives syntax error</p>\n<blockquote>\n<p>pc = pound conversion</p>\n<p>kc = kilogram conversion</p>\n</blockquote>\n<pre class=\"lang-py prettyprint-override\"><code>cont = 1\nwhile cont == 1:\n\n    if input(&quot;Would you like to convert to pounds or kilograms?&quot;) == 'pounds':\n        pc = 1\n\n    if pc == 1:\n        kilograms = float(input(&quot;Enter the amount of kilograms:  &quot;))\n        pounds = kilograms / 2.205\n\n        print('The amount of pounds you entered is ', kilograms,\n                  ' This is ', pounds, ' pounds ')\n        pc = 0\n        if input('Do you want to go again? (y/n) ') == 'n':\n            cont = 0\n\n    if input(&quot;Would you like to convert to pounds or kilograms?&quot;) == &quot;kilograms&quot;:\n        kc = 1\n\n    if kc == 1:\n        pounds = float(input(&quot;Enter the amount of pounds:  &quot;))\n        kilograms = pounds * 2.2\n        grams = kilograms * 1000\n\n        print('The amount of pounds you entered is ', pounds,\n                  ' This is ', kilograms, ' kilograms ', 'and', grams,\n                  'grams' )\n        kc = 0\n\n    if input('Do you want to go again? (y/n) ') == 'n':\n        cont = 0\n</code></pre>\n<p>typing in <code>kilograms</code> when first prompted gives &quot;pc is not defined&quot;</p>\n<p>And the program only properly' runs if you type in <code>pounds</code> first, <code>kilograms</code> second</p>\n"}, {"tags": ["python", "while-loop", "conditional-statements", "schedule"], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 10227573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c17aa93d551835239dce8a724211d337?s=128&d=identicon&r=PG&f=1", "display_name": "MarkD", "link": "https://stackoverflow.com/users/10227573/markd"}, "is_accepted": false, "score": 1, "last_activity_date": 1575439869, "creation_date": 1575439869, "answer_id": 59169894, "question_id": 57796626, "link": "https://stackoverflow.com/questions/57796626/how-to-use-schedule-module-with-a-conditional-while-loop-in-python/59169894#59169894", "title": "How to use Schedule module with a conditional while loop in Python", "body": "<p>Move the conditional statement into the printjob function, and do not use nested while loop (code here switches between business hours and non business hours). schedule tasks run continuously, but your function if-statement only runs during your defined business hours. Here running at 1minute interval (testing odd vs even minutes), you can spec your own business hours:</p>\n\n<pre><code>import datetime as dt\nimport schedule, time\nfrom datetime import datetime\n\ndef printJob():\n    week = dt.datetime.today().weekday()\n    timestamp = time.strftime(\"%Y%m%d-%H%M\")\n    if week &lt; 5 and datetime.now().minute % 2 ==0:  # in range(9,17):\n        print(f\"business hours test...EVEN minutes... {timestamp}\\n\")\n        # your business hours function here...\n    else:\n        print(f'go home...test... ODD minutes... {timestamp}\\n')\n\nschedule.every(1).minute.do(printJob)\n\nwhile True:\n    schedule.run_pending()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9210398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677f4ee87b0956c7cc729f6081eb6722?s=128&d=identicon&r=PG&f=1", "display_name": "Matt O.", "link": "https://stackoverflow.com/users/9210398/matt-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575439869, "creation_date": 1567639081, "question_id": 57796626, "link": "https://stackoverflow.com/questions/57796626/how-to-use-schedule-module-with-a-conditional-while-loop-in-python", "title": "How to use Schedule module with a conditional while loop in Python", "body": "<p>I'm trying to use the Schedule module to run a task during specific days of the week and specific hours, basically business hours. The while loop will work when the condition is true but once it's false it will not run again to see if the time frame still applies. I would have to restart the script for it to work.</p>\n\n<p>I'm pretty new to Python and self taught. This is my first time posting here so please correct me if I've formatted this badly or haven't included enough information. I've tried scouring the forums to get around this particular issue I'm having but haven't found an answer; I'm probably searching wrong. It may be a simple issue but I've been wracking my brain for a few days. This is a small test portion of code that I'm trying to use for another script. Other people have recommended Cron but since this is going into a larger script, I only need a section of it to run on a task and not the whole thing.</p>\n\n<pre><code>from datetime import datetime as dt\nimport schedule\nimport time\n\ndef weekdayJob(x, i=None):\n    week = dt.today().weekday()\n    if i is not None and week &lt; 5 and dt.now().hour in range(9,17):\n        schedule.every(i).minutes.do(x)\n\ndef printJob():\n    timestamp = time.strftime(\"%Y%m%d-%H%M\")\n    print(f\"test {timestamp}\\n\")\n\n\nweekdayJob(printJob, 5)\n\nwhile True:\n    schedule.run_pending()\n    time.sleep(5)\n</code></pre>\n\n<p>I've also tried</p>\n\n<pre><code>from datetime import datetime as dt\nimport schedule\nimport time\n\ndef weekdayJob(x, i=None):\n    week = dt.today().weekday()\n    if i is not None and week &lt; 5 and dt.now().hour in range(9,17):\n        schedule.every(i).minutes.do(x)\n\ndef printJob():\n    timestamp = time.strftime(\"%Y%m%d-%H%M\")\n    print(f\"test {timestamp}\\n\")\n\nx = 1\nwhile x == 1:\n    weekdayJob(printJob, 1)\n    time.sleep(5)\n    while True:\n        schedule.run_pending()\n        time.sleep(5)\n</code></pre>\n\n<p>I figured that putting the scheduled job in the while loop would make it constantly check to see if the conditional statement was true but that doesn't seem the case. How would I make it so this script is constantly checking if weekdayJob is within the desired time frame so I don't have to restart the script.</p>\n"}, {"tags": ["python", "python-3.x", "pyqt5"], "comments": [{"owner": {"reputation": 165, "user_id": 6934384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhvgz.png?s=128&g=1", "display_name": "Nick PV", "link": "https://stackoverflow.com/users/6934384/nick-pv"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567640567, "post_id": 57796604, "comment_id": 102026505, "body": "that&#39;s why I said there &quot;don&#39;t be rude&quot; ... However, I meant simple for implementation, in a few lines of code or widget settings change at QtDesigner &quot;more elegant way&quot; and here (<a href=\"https://stackoverflow.com/questions/40469607/how-to-copy-paste-multiple-items-form-qtableview-created-by-qstandarditemmodel\" title=\"how to copy paste multiple items form qtableview created by qstandarditemmodel\">stackoverflow.com/questions/40469607/&hellip;</a>) it&#39;s implemented for table View not for tableWidget"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567641027, "post_id": 57796604, "comment_id": 102026572, "body": "1) Place irrelevant information such as; &quot;Hello&quot;, &quot;Thanks&quot;, &quot;Don&#39;t be rude&quot;, etc. in a question is deleted in an edition because it does not write anything in your post 2) I have not been rude, and if you consider that someone has been including me Then report it to a moderator and if he considers that if he went rude with you then that person will be sanctioned, so are the SO rules, you have been here for 2 years and you should know them."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567641155, "post_id": 57796604, "comment_id": 102026599, "body": "3) The code you provide in your question has nothing to do with Qt Designer, 4) A part of your code that is commented already detects Ctrl + C and Ctrl + V so you just have to place the copySelection method in your class and call it when appropriate by changing only <code>self.tableView</code> to <code>self</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567641231, "post_id": 57796604, "comment_id": 102026613, "body": "5) If your question would show an attempt and where you would clearly indicate where you are stuck then in that case it would be a different question, but in your current case it is duplicated of what I indicated."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567641334, "post_id": 57796604, "comment_id": 102026634, "body": "6) QTableWidget inherits from QTableView so that any solution of QTableView is also a solution to QTableWidgets, the opposite is not valid."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567641777, "post_id": 57796604, "comment_id": 102026720, "body": "7) Qt does not implement multicopy natively, so it\u2019s your job to implement it."}, {"owner": {"reputation": 165, "user_id": 6934384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhvgz.png?s=128&g=1", "display_name": "Nick PV", "link": "https://stackoverflow.com/users/6934384/nick-pv"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567643065, "post_id": 57796604, "comment_id": 102026940, "body": "Then sorry me, just after 2 years I used to that that this community is very emotional.   3) That code was just a sample (for reference) 5) I&#39;m asking for alternative way, because I don&#39;t know how to integrate that specific solution for my project  6) I have entire program where I&#39;m using tablewidget, so I don&#39;t want to replace it with tableview   7) I did not know that there no multicopy natively, (this is part of the question as well), I expected that there some option to make it work in (select - copy) way like textbox."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567643426, "post_id": 57796604, "comment_id": 102027007, "body": "So your question should be: <i>I have this code where I have tried to do what this publication X, Y and Z points out and I am stuck in A, B and C, what should I modify to make it work?, etc</i>, ask for a solution alternative is unproductive since the solution already exists, your problem is not that there is no solution but that in your particular code you do not know how to implement it. I recommend you take the time to edit your question. That you do not know how to implement something does not imply asking for another alternative solution."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567643549, "post_id": 57796604, "comment_id": 102027027, "body": "Your alternative solution request is like saying: &quot;I don&#39;t know how to put a wheel to my car, someone could give me something else (stone, ball, etc.) to place it instead of the wheel&quot;"}, {"owner": {"reputation": 165, "user_id": 6934384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhvgz.png?s=128&g=1", "display_name": "Nick PV", "link": "https://stackoverflow.com/users/6934384/nick-pv"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567645100, "post_id": 57796604, "comment_id": 102027311, "body": "Not all the questions just with one answer, sometimes second or third answer here on the stack may be better than the most liked one. It happens to me a million times. And I&#39;m asking not for a wheel or ball but I&#39;m asking for more suitable by shape and color pice of cotton to tailor the hole in a blanket. and that piece which is on the table just not suitable, simple as that. Sometimes somebody can simply shoot with a brilliant solution which is easy to modify for whoever needs."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567645200, "post_id": 57796604, "comment_id": 102027328, "body": "Well, there is only what you see, there is no magic solution unfortunately."}, {"owner": {"reputation": 165, "user_id": 6934384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhvgz.png?s=128&g=1", "display_name": "Nick PV", "link": "https://stackoverflow.com/users/6934384/nick-pv"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567646057, "post_id": 57796604, "comment_id": 102027461, "body": "Hope is still in my heart. I&#39;m coming here to ask as for the last chance and last-resort after I googled everything, No luck this time, unfortunately."}], "owner": {"reputation": 165, "user_id": 6934384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhvgz.png?s=128&g=1", "display_name": "Nick PV", "link": "https://stackoverflow.com/users/6934384/nick-pv"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1296, "favorite_count": 1, "closed_date": 1567639018, "answer_count": 0, "score": 0, "last_activity_date": 1567638968, "creation_date": 1567638842, "last_edit_date": 1567638968, "question_id": 57796604, "link": "https://stackoverflow.com/questions/57796604/how-to-copy-entries-from-pyqt5-qtablewidget-entire-table-to-clipboard-with-simpl", "closed_reason": "Duplicate", "title": "How to copy entries from PyQT5 QTableWidget entire table to clipboard with simple mouse selection and Ctrl+C?", "body": "<p>Is there any simple way to make some settings change at PyQT Designer for QTableWidget on ui form that I'll become able to copy from the table with the simple selections (extended selection mode) and Ctrl+C standard copy procedure. </p>\n\n<p>By default even with multi-selection after Ctrl+C it copying to clipboard only last selected value, which is not good.</p>\n\n<p><a href=\"https://i.stack.imgur.com/i9eIg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i9eIg.png\" alt=\"enter image description here\"></a></p>\n\n<p>Quick sample code:</p>\n\n<pre><code>from PyQt5.QtWidgets import QMainWindow, QApplication, QWidget, QAction, QTableWidget, QTableWidgetItem, QVBoxLayout\nfrom PyQt5.QtGui import QIcon\nfrom PyQt5.QtCore import pyqtSlot\nimport sys\n\ndata = {'col1': ['1', '2', '3', '4'],\n        'col2': ['1', '2', '1', '3'],\n        'col3': ['1', '1', '2', '1']}\n\n\nclass TableView(QTableWidget):\n    def __init__(self, data, *args):\n        QTableWidget.__init__(self, *args)\n        self.data = data\n        self.setData()\n        self.resizeColumnsToContents()\n        self.resizeRowsToContents()\n\n\n    def setData(self):\n        horHeaders = []\n        for n, key in enumerate(sorted(self.data.keys())):\n            horHeaders.append(key)\n            for m, item in enumerate(self.data[key]):\n                newitem = QTableWidgetItem(item)\n                self.setItem(m, n, newitem)\n        self.setHorizontalHeaderLabels(horHeaders)\n\n    # def keyPressEvent(self, event):\n    #     clipboard = QApplication.clipboard()\n    #     if event.matches(QKeySequence.Copy):\n    #         print('Ctrl + C')\n    #         clipboard.setText(\"some text\")\n    #     if event.matches(QKeySequence.Paste):\n    #         print(clipboard.text())\n    #         print('Ctrl + V')\n    #     QTableView.keyPressEvent(self, event)\n\n\ndef main(args):\n    app = QApplication(args)\n    table = TableView(data, 4, 3)\n    table.show()\n    sys.exit(app.exec_())\n\n\nif __name__ == \"__main__\":\n    main(sys.argv)\n</code></pre>\n\n<p>I have seen many kinda similar questions (<a href=\"https://stackoverflow.com/questions/42030309/pyqt-qtableview-qsqltablemodel-copy-and-paste-all-selected-rows-or-columns\">Here</a>,  <a href=\"https://stackoverflow.com/questions/21682261/paste-in-the-field-of-qtableview\">Or here</a>, <a href=\"https://stackoverflow.com/questions/40469607/how-to-copy-paste-multiple-items-form-qtableview-created-by-qstandarditemmodel/40473855#40473855\">Or here</a>, <a href=\"https://stackoverflow.com/questions/52358258/pyqt5-qtablewidget-cell-select-save-and-copy\">Or even here</a>)  but all of those answers are so clumsy \nand I don't believe that for such simple operation I need to implement another class with slots. I hope that somebody knows more elegante way, make it as easy as it implemented by default at lineEdit widget.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 7, "creation_date": 1567638717, "post_id": 57796554, "comment_id": 102026178, "body": "Python can, and does, compare strings like that.  Your code does not print output in all cases, only those in which the three strings are in alphabetical or reverse alphabetical order.  Please clarify your problem."}, {"owner": {"reputation": 11, "user_id": 10952350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CslGv.jpg?s=128&g=1", "display_name": "Simon F.-Smith", "link": "https://stackoverflow.com/users/10952350/simon-f-smith"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567638951, "post_id": 57796554, "comment_id": 102026223, "body": "Hello @Prune thank you for your answer! If I add an else it will print what&#39;s in else but even when I give names in alphabetical order like Alexander, Bernard, Caroline it goes in the else while it should go in the first if statement."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567639073, "post_id": 57796554, "comment_id": 102026239, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified."}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567639351, "post_id": 57796554, "comment_id": 102026293, "body": "@Prune you found the issue; it&#39;s that he doesn&#39;t have an <code>else</code> clause."}], "answers": [{"tags": [], "owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "is_accepted": true, "score": 1, "last_activity_date": 1567638964, "creation_date": 1567638964, "answer_id": 57796616, "question_id": 57796554, "link": "https://stackoverflow.com/questions/57796554/check-if-3-string-inputs-are-in-alphabetical-order/57796616#57796616", "title": "Check if 3 string inputs are in alphabetical order", "body": "<p>Python can compare strings with <code>&lt;</code> and <code>&gt;</code>: <a href=\"https://docs.python.org/3/tutorial/datastructures.html#comparing-sequences-and-other-types\" rel=\"nofollow noreferrer\">https://docs.python.org/3/tutorial/datastructures.html#comparing-sequences-and-other-types</a></p>\n\n<p>The problem is you are only printing for the cases of:</p>\n\n<ul>\n<li>strings are in alphabetical order</li>\n<li>strings are in reverse alphabetical order</li>\n</ul>\n\n<p>Instead, try this:</p>\n\n<pre><code>if name_1 &lt; name_2 and name_2 &lt; name_3:\n    print(\"The names are in alphabetical order.\")\nelse:\n    print(\"The names are not in alphabetical order.\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "edited": false, "score": 2, "creation_date": 1567639743, "post_id": 57796686, "comment_id": 102026359, "body": "The question says lists are not allowed"}, {"owner": {"reputation": 81, "user_id": 4896913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f26a14387f44b4d12ec96455f5322af?s=128&d=identicon&r=PG&f=1", "display_name": "philo", "link": "https://stackoverflow.com/users/4896913/philo"}, "reply_to_user": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "edited": false, "score": 0, "creation_date": 1567639882, "post_id": 57796686, "comment_id": 102026383, "body": "my bad @wcarhart"}], "tags": [], "owner": {"reputation": 81, "user_id": 4896913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f26a14387f44b4d12ec96455f5322af?s=128&d=identicon&r=PG&f=1", "display_name": "philo", "link": "https://stackoverflow.com/users/4896913/philo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567639774, "last_edit_date": 1567639774, "creation_date": 1567639625, "answer_id": 57796686, "question_id": 57796554, "link": "https://stackoverflow.com/questions/57796554/check-if-3-string-inputs-are-in-alphabetical-order/57796686#57796686", "title": "Check if 3 string inputs are in alphabetical order", "body": "<p>you could use lists, add the names in a list and compare.</p>\n\n<pre><code>n = ['paul', 'mike', 'julie']\nz = n.copy()\nn.sort()\n# compare the lists\nn == z\n# you should have False\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2328, "user_id": 3589122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XIwKQ.jpg?s=128&g=1", "display_name": "GordonAitchJay", "link": "https://stackoverflow.com/users/3589122/gordonaitchjay"}, "is_accepted": false, "score": 0, "last_activity_date": 1567639863, "creation_date": 1567639863, "answer_id": 57796712, "question_id": 57796554, "link": "https://stackoverflow.com/questions/57796554/check-if-3-string-inputs-are-in-alphabetical-order/57796712#57796712", "title": "Check if 3 string inputs are in alphabetical order", "body": "<p>In Python, comparisons can be chained, so there should be no need to use <code>and</code>.</p>\n\n<p>Use an <code>else</code> statement, instead of an <code>elif</code> statement for when they aren't in alphabetical order.</p>\n\n<pre><code>&gt;&gt;&gt; name_1 = \"Aaron\"\n&gt;&gt;&gt; name_2 = \"Alice\"\n&gt;&gt;&gt; name_3 = \"Bob\"\n&gt;&gt;&gt; if name_1 &lt; name_2 &lt; name_3:\n    print(\"The names are in alphabetical order.\")\nelse:\n    print(\"The names are not in alphabetical order.\")\n\n\nThe names are in alphabetical order.\n</code></pre>\n\n<p>Also note that capitalization matters:</p>\n\n<p><code>\"aaron\" &gt; \"Alice\"</code> is True, and <code>\"aaron\" &gt; \"Aaron\"</code> is also True.</p>\n\n<p>To get around this, make everything lower case for the comparisons:</p>\n\n<pre><code>&gt;&gt;&gt; name_1 = \"aaron\"\n&gt;&gt;&gt; if name_1 &lt; name_2 &lt; name_3:\n    print(\"The names are in alphabetical order.\")\nelse:\n    print(\"The names are not in alphabetical order.\")\n\n\nThe names are not in alphabetical order.\n&gt;&gt;&gt; if name_1.lower() &lt; name_2.lower() &lt; name_3.lower():\n    print(\"The names are in alphabetical order.\")\nelse:\n    print(\"The names are not in alphabetical order.\")\n\n\nThe names are in alphabetical order.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "is_accepted": false, "score": 1, "last_activity_date": 1567639985, "creation_date": 1567639985, "answer_id": 57796728, "question_id": 57796554, "link": "https://stackoverflow.com/questions/57796554/check-if-3-string-inputs-are-in-alphabetical-order/57796728#57796728", "title": "Check if 3 string inputs are in alphabetical order", "body": "<p>You can compare multiple things at the same time by chaining them.  This also avoids your incomplete implementation of <code>else</code> (your elif doesn't match all non-alphabetical cases).</p>\n\n<pre><code>name_1, name_2, name_3 = 'a', 'b', 'c'\n\nalphabetical = name_1 &lt; name_2 &lt; name_3\na_str = '' alphabetical else ' not'\nprint('The names are%s in alphabetical order' % a_str)\n</code></pre>\n\n<p>This prints <code>The names are in alphabetical order</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10952350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CslGv.jpg?s=128&g=1", "display_name": "Simon F.-Smith", "link": "https://stackoverflow.com/users/10952350/simon-f-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 57796616, "answer_count": 4, "score": -2, "last_activity_date": 1567639985, "creation_date": 1567638440, "question_id": 57796554, "link": "https://stackoverflow.com/questions/57796554/check-if-3-string-inputs-are-in-alphabetical-order", "title": "Check if 3 string inputs are in alphabetical order", "body": "<p>I need to ask for 3 names and compare them after to see if they have been given in alphabetical order or not.</p>\n\n<p>I tried things like if (name_1 &lt; name 2) and (name_2 &lt; name_3) but python cannot compare strings like that. It's a first prog course so we cannot use a list since it has not been teached yet.</p>\n\n<pre><code>...Three inputs to ask for 3 names here...\n\nif (name_1 &lt; name_2) and (name_2 &lt; name_3):\n    print(\"The names are in alphabetical order.\")\nelif (name_1 &gt; name_2) and (name_2 &gt; name_3):\n    print(\"The names are not in alphabetical order.\")\n</code></pre>\n\n<p>I get no errors but also no results.</p>\n"}, {"tags": ["python", "list", "tuples"], "answers": [{"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": true, "score": 1, "last_activity_date": 1567639009, "creation_date": 1567639009, "answer_id": 57796619, "question_id": 57796550, "link": "https://stackoverflow.com/questions/57796550/how-can-i-exclude-certain-columns-from-a-list-of-tuples/57796619#57796619", "title": "How can I exclude certain &#39;columns&#39; from a list of tuples?", "body": "<p>You can exclude the last column in a list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; l = [('Brandon Park', 57, 43), ('Heritage', 29, 20)]\n&gt;&gt;&gt; [(name, customer) for name, customer, online_customer in l]\n[('Brandon Park', 57), ('Heritage', 29)]\n</code></pre>\n\n<p>As you can see the last column <code>online_customer</code> is not included in the final result, and new tuples with <code>(name, customer)</code> are only included. </p>\n"}], "owner": {"reputation": 465, "user_id": 10792871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfe87300c31cd9539d8d2cb015a76fb4?s=128&d=identicon&r=PG&f=1", "display_name": "324", "link": "https://stackoverflow.com/users/10792871/324"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57796619, "answer_count": 1, "score": 0, "last_activity_date": 1567639033, "creation_date": 1567638409, "last_edit_date": 1567639033, "question_id": 57796550, "link": "https://stackoverflow.com/questions/57796550/how-can-i-exclude-certain-columns-from-a-list-of-tuples", "title": "How can I exclude certain &#39;columns&#39; from a list of tuples?", "body": "<p>Hopefully this is pretty simple to solve (I'm pretty new to this). I have a dataset of different regions. Here is a sample</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name                 Customers     Online Customers\nBrandon Park         57            43\nHeritage             29            20\nBetween the Hills    33            12\n...\n</code></pre>\n\n<p>This is stored in a list of tuples (i.e., \n<code>[(Brandon Park, 57, 43), (Heritage, 29, 20), ...]</code></p>\n\n<p>I want to have a list of tuples that excluded the Online Customers section, so that my list of tuples becomes <code>[(Brandon Park, 57), (Heritage, 29), ...]</code> (notice there are only two entries in each tuple now).</p>\n\n<p>I've tried various things, but none of them are getting me to the correct answer (many errors)!</p>\n"}, {"tags": ["python", "python-imaging-library"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 5, "creation_date": 1567641142, "post_id": 57796535, "comment_id": 102026594, "body": "You can determine the size of rendered text using the <a href=\"https://pillow.readthedocs.io/en/stable/reference/ImageFont.html#PIL.ImageFont.PIL.ImageFont.ImageFont.getsize\" rel=\"nofollow noreferrer\"><code>ImageFont.getsize()</code></a> method. You should be able to use that and the size of the image itself to figure-out where to put the text so it&#39;s aligned the way you want."}, {"owner": {"reputation": 301, "user_id": 1448371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9525b8bbb51283b1b093818b84d86eb8?s=128&d=identicon&r=PG", "display_name": "user1448371", "link": "https://stackoverflow.com/users/1448371/user1448371"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567666348, "post_id": 57796535, "comment_id": 102032075, "body": "Could you please elaborate a bit more on how this can be applied with this particular example. @martineau"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1567671994, "post_id": 57796535, "comment_id": 102034700, "body": "If the width of the text in pixels from <code>getsize()</code> was <code>txtw</code>, and the width of the image was <code>imgw</code>, then to right align the text the value of the expression <code>imgw-txtw</code> should be used as the X coordinate of the top left corner of the text in the call to <a href=\"https://pillow.readthedocs.io/en/stable/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.ImageDraw.text\" rel=\"nofollow noreferrer\"><code>ImageDraw.text()</code></a> \u2014 assuming the image is wider than the text."}], "owner": {"reputation": 301, "user_id": 1448371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9525b8bbb51283b1b093818b84d86eb8?s=128&d=identicon&r=PG", "display_name": "user1448371", "link": "https://stackoverflow.com/users/1448371/user1448371"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 746, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567641072, "creation_date": 1567638264, "question_id": 57796535, "link": "https://stackoverflow.com/questions/57796535/right-align-text-with-pil", "title": "Right-align text with PIL?", "body": "<p>I've an Arabic text and want to move the text to the upper right corner in the image.</p>\n\n<p>I did try using <code>align='right'</code> in the code also tried <code>direction=rtl</code> but it shows an empty area of the image on the right top corner. </p>\n\n<blockquote>\n  <p>If you want to try the code make sure to Install <a href=\"https://github.com/HOST-Oman/libraqm\" rel=\"nofollow noreferrer\">libraqm</a> &amp; <a href=\"https://github.com/python-pillow/Pillow/blob/master/depends/install_raqm.sh\" rel=\"nofollow noreferrer\">raqm</a></p>\n</blockquote>\n\n<pre><code>from PIL import Image, ImageDraw, ImageFont, ImageFilter\nimport textwrap\n\n#configuration\nfont_size=36\nwidth=3840\nheight=390\nback_ground_color=(255,255,255)\nfont_size=80\nfont_color=(0,0,0)\ntext = \" \u0648\u0623\u064a\u0636\u0627 \u0647\u0630\u0627 \u0627\u0644\u0646\u0635\u062d \u0645\u062d\u0628\u0648\u0628 \u062c\u062f\u0627 \u062c\u062f\u0627 \u0644\u0630\u0644\u0643 \u0627\u0646\u0627 \u0623\u0641\u0636\u0644\u0647\u0647\u0630\u0627 \u0627\u0644\u0646\u0635 \u0645\u0643\u062a\u0648\u0628 \u0628\u0627\u0644\u0644\u063a\u0629\u0645\u0643\u062a\u0648\u0628 \u0628\u0627\u0644\u0644\u063a\u0629\u0645\u0643\u062a\u0648\u0628 \u0628\u0627\u0644\u0644\u063a\u0629\u0645\u0643\u062a\u0648\u0628 \u0628\u0627\u0644\u0644\u063a\u0629\u0645\u0643\u062a\u0648\u0628 \u0628\u0627\u0644\u0644\u063a\u0629 \u0645\u0643\u062a\u0648\u0628 \u0628\u0627\u0644\u0644\u063a\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0648\u0647\u0648 \u0648\u0627\u0636\u062d \u0628\u0634\u0643\u0644 \u062c\u0645\u064a\u0644\"\nwrapped = textwrap.fill(text, 100)\nim  =  Image.new ( \"RGB\", (width,height), back_ground_color )\ndraw  =  ImageDraw.Draw ( im )\nunicode_font = ImageFont.truetype(\"Sahel.ttf\", font_size)\ndraw.text ( (0,0),  wrapped, font=unicode_font, fill=font_color,spacing=30,direction='rtl',align='right',features='rtla')\nim.save('text.png')\n</code></pre>\n\n<p><img src=\"https://i.imgur.com/YIKQm5t.png\" alt=\"example of output image\"></p>\n"}, {"tags": ["python", "css", "flask", "jinja2"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1567638579, "post_id": 57796532, "comment_id": 102026158, "body": "Which rules in particular are not being applied? Have you inspected the element in devtools? Is there a problem in loading the stylesheet? Lots of things you can look at yourself which we can&#39;t really answer for you."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1567640004, "post_id": 57796532, "comment_id": 102026410, "body": "Just saw the edit. I think you need to share the actual HTML that&#39;s output. Could the <code>title</code> property perhaps contain some HTML content (it seems Jinja doesn&#39;t escape HTML by default) that may be invalid and cause the browser to close the <code>p</code> tag before you are expecting? As I said, this can only really be solved by looking at what HTML you&#39;re actually getting."}, {"owner": {"reputation": 1062, "user_id": 5934705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dc3d236d4b6b7934f86f36ad0152bc?s=128&d=identicon&r=PG&f=1", "display_name": "Fnguyen", "link": "https://stackoverflow.com/users/5934705/fnguyen"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1567670591, "post_id": 57796532, "comment_id": 102034014, "body": "The app is here: <a href=\"http://flaskrtest3.herokuapp.com/gemuese/suggestion\" rel=\"nofollow noreferrer\">flaskrtest3.herokuapp.com/gemuese/suggestion</a> notice the difference to <a href=\"http://flaskrtest3.herokuapp.com/gemuese/getrecipe\" rel=\"nofollow noreferrer\">flaskrtest3.herokuapp.com/gemuese/getrecipe</a>"}, {"owner": {"reputation": 1062, "user_id": 5934705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dc3d236d4b6b7934f86f36ad0152bc?s=128&d=identicon&r=PG&f=1", "display_name": "Fnguyen", "link": "https://stackoverflow.com/users/5934705/fnguyen"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1567671549, "post_id": 57796532, "comment_id": 102034465, "body": "@RobinZigmond  As to styles not applied it is everything in the intro headline as seen above, so padding/font/size. Other style elements like list format, background work in all cases."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1567680816, "post_id": 57796532, "comment_id": 102039405, "body": "thanks for the link - that makes it clear that this isn&#39;t a CSS issue. Look at the generated HTML, and you&#39;ll see that the <code>&lt;p class=&quot;intro&quot;&gt;</code> simply isn&#39;t there at all. This means it can&#39;t have been generated from that particular template. Perhaps there is an error in your backend code, eg in the routes?"}, {"owner": {"reputation": 1062, "user_id": 5934705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dc3d236d4b6b7934f86f36ad0152bc?s=128&d=identicon&r=PG&f=1", "display_name": "Fnguyen", "link": "https://stackoverflow.com/users/5934705/fnguyen"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1567706726, "post_id": 57796532, "comment_id": 102053082, "body": "@RobinZigmond thanks you are 100% right, my return_template function used two different templates based on return-type (string vs. list), I was expecting all functions to return as string but this was not the case (some returned as [string], which is obviously a list). If you want to put this up as an answer I mark it as solved."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1567707303, "post_id": 57796532, "comment_id": 102053319, "body": "I don&#39;t feel able to post an answer because I didn&#39;t come up with anything, and indeed it was impossible for anyone seeing your question to be able to answer it, because the actual cause was in code you didn&#39;t share. I am happy to have helped point you in the right direction to enable you to figure out the cause yourself. I will vote to close the question though because it will not likely be of any help to others in the future."}], "owner": {"reputation": 1062, "user_id": 5934705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dc3d236d4b6b7934f86f36ad0152bc?s=128&d=identicon&r=PG&f=1", "display_name": "Fnguyen", "link": "https://stackoverflow.com/users/5934705/fnguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567671130, "creation_date": 1567638248, "last_edit_date": 1567671130, "question_id": 57796532, "link": "https://stackoverflow.com/questions/57796532/difference-in-css-outcome-between-static-and-jinja2-html", "title": "Difference in css outcome between static and jinja2 html", "body": "<p>I am using <code>Flask</code> and therefore <code>Jinja2</code> to dynamically create a web page.</p>\n\n<p>When I use the <code>render_template</code> function the resulting web pages pick up my css styles normally and do as I expect with some strange exceptions.</p>\n\n<p>For example, the following css and html code is working 100% as intended:</p>\n\n<p>CSS:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.intro {\n  font-family: monospace;\n  font-size: 24px;\n  color: #455934;\n  padding-top: 30px;\n  padding-right: 50px;\n  padding-bottom: 5px;\n  padding-left: 50px;\n}\n</code></pre>\n\n<p>HTML:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p class ='intro'&gt;\n    Hello\n&lt;/p&gt;\n</code></pre>\n\n<p>However when using a ``Jinja2``` template:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p class ='intro'&gt;\n    {{title}}\n&lt;/p&gt;\n</code></pre>\n\n<p>The css style for this class is ignored.</p>\n\n<p>This is not true for any other styles in the same css file and template, for reference the whole template looks like this and the styles for div containers, background, etc. work as intended:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;link rel= \"stylesheet\" type= \"text/css\" href= \"{{ url_for('static',filename='gemuese_style.css') }}\"&gt;\n        &lt;title&gt;{{title}}&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div class=\"outer\"&gt;\n            &lt;div class=\"middle\"&gt;\n                &lt;div class=\"inner\"&gt;\n                    &lt;p class ='intro'&gt;\n                        {{title}}\n                    &lt;/p&gt;\n                        &lt;ul&gt;\n                            &lt;li&gt;{{result}}&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Some testing has shown me that the style seems to work depending on the variable jinja renders. The template is rendered based on the output of different functions who generally return a list of a string and another list. The string is then used to fill in the {{title}} part where the css is failing.</p>\n\n<p>For some functions it does work but I am not sure why because there is no difference in the return format. </p>\n\n<p>Edit2:</p>\n\n<p>Look at the difference between <a href=\"http://flaskrtest3.herokuapp.com/gemuese/suggestion\" rel=\"nofollow noreferrer\">This rendered template </a> and <a href=\"http://flaskrtest3.herokuapp.com/gemuese/getrecipe\" rel=\"nofollow noreferrer\">this one.</a></p>\n"}, {"tags": ["python", "pandas", "dataframe", "subclassing"], "comments": [{"owner": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "edited": false, "score": 0, "creation_date": 1567811851, "post_id": 57796464, "comment_id": 102088835, "body": "From the docs, GroupBy returns a DataFrameGroupBy or SeriesGroupBy object. Resample returns a Resampler object"}, {"owner": {"reputation": 135, "user_id": 1586222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a0039fd6297d8373492864a65253a1?s=128&d=identicon&r=PG", "display_name": "grge", "link": "https://stackoverflow.com/users/1586222/grge"}, "reply_to_user": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "edited": false, "score": 0, "creation_date": 1567812942, "post_id": 57796464, "comment_id": 102089012, "body": "Right, so, one option would be to subclass DataFrameGroupBy as well, and then somehow tell pandas to use the correct constructor when calling groupby on instances of MyDataFrame? Perhaps I could override groupby in my subclass, but then I would need to do the same for other aggregation methods (e.g. rolling, resample, expanding). It just seems like there might be an officially &quot;intended&quot; solution to this problem."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 1586222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a0039fd6297d8373492864a65253a1?s=128&d=identicon&r=PG", "display_name": "grge", "link": "https://stackoverflow.com/users/1586222/grge"}, "edited": false, "score": 0, "creation_date": 1567823171, "post_id": 57829581, "comment_id": 102090196, "body": "Thanks. It certainly does appear that this functionality is not yet supported. Further evidence for this is that GeoPandas, which makes quite advanced use of DataFrame subclassing, has the same behaviour. Re. the sentence &quot;pandas couldn&#39;t possibly know how to make a compatible Series&quot;, I don&#39;t think this is insurmountable. If the subclass object or class was passed into the DataFrameGroupBy, then it could use the <code>_constructor_sliced</code> (see <a href=\"https://pandas.pydata.org/pandas-docs/stable/development/extending.html#override-constructor-properties\" rel=\"nofollow noreferrer\">here</a>) method to create a compatible Series type."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 135, "user_id": 1586222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a0039fd6297d8373492864a65253a1?s=128&d=identicon&r=PG", "display_name": "grge", "link": "https://stackoverflow.com/users/1586222/grge"}, "edited": false, "score": 0, "creation_date": 1567824246, "post_id": 57829581, "comment_id": 102090301, "body": "@grge wow, that is a nice find! If that&#39;s the case, a solution that could potentially make its way as a PR is just to store the type that the groupby operation was completed on, and use those methods instead of hardcoding it. I would suggest opening up an issue on <a href=\"https://github.com/pandas-dev/pandas\" rel=\"nofollow noreferrer\">pandas-dev</a>."}, {"owner": {"reputation": 135, "user_id": 1586222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a0039fd6297d8373492864a65253a1?s=128&d=identicon&r=PG", "display_name": "grge", "link": "https://stackoverflow.com/users/1586222/grge"}, "edited": false, "score": 0, "creation_date": 1567828796, "post_id": 57829581, "comment_id": 102090800, "body": "I raised an issue here: <a href=\"https://github.com/pandas-dev/pandas/issues/28330\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/28330</a>"}, {"owner": {"reputation": 397, "user_id": 10134077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a299c17537a3e0a6327b177b2007fec?s=128&d=identicon&r=PG&f=1", "display_name": "pandichef", "link": "https://stackoverflow.com/users/10134077/pandichef"}, "edited": false, "score": 0, "creation_date": 1586923114, "post_id": 57829581, "comment_id": 108304193, "body": "I&#39;m struggling with this issue now and see that the PR was apparently never merged into master.  @alkasm, would you recommend monkey patching this commit into my project for the time being: <a href=\"https://github.com/alkasm/pandas/commit/63936681803da0138489b5b537a926bb98b7b2c1\" rel=\"nofollow noreferrer\">github.com/alkasm/pandas/commit/&hellip;</a>"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 397, "user_id": 10134077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a299c17537a3e0a6327b177b2007fec?s=128&d=identicon&r=PG&f=1", "display_name": "pandichef", "link": "https://stackoverflow.com/users/10134077/pandichef"}, "edited": false, "score": 1, "creation_date": 1586936550, "post_id": 57829581, "comment_id": 108308620, "body": "@pandichef annoyingly after I worked on the commit I was asked to shuffle my tests around, at which point my commits became hugely incongruent with a big refactor of group-by things, and afterwards I could not figure out how to easily fix the behavior in all cases (see here: <a href=\"https://github.com/pandas-dev/pandas/pull/28573#issuecomment-553862758\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/pull/28573#issuecomment-5538627&zwnj;&#8203;58</a>). You should just be able to cast the dataframe back to your subclassed type, which seems easier to maintain than a stale attempted contribution fork tbh."}, {"owner": {"reputation": 397, "user_id": 10134077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a299c17537a3e0a6327b177b2007fec?s=128&d=identicon&r=PG&f=1", "display_name": "pandichef", "link": "https://stackoverflow.com/users/10134077/pandichef"}, "edited": false, "score": 0, "creation_date": 1586967354, "post_id": 57829581, "comment_id": 108326256, "body": "@alkasm The problem with &quot;casting the dataframe back to the subclassed type&quot; is that it doesn&#39;t preserve dynamically created object attributes e.g., an attribute that contains column formats for df.to_html.  Have you ever come across this?  If so, how would you solve this problem?"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 397, "user_id": 10134077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a299c17537a3e0a6327b177b2007fec?s=128&d=identicon&r=PG&f=1", "display_name": "pandichef", "link": "https://stackoverflow.com/users/10134077/pandichef"}, "edited": false, "score": 1, "creation_date": 1586978985, "post_id": 57829581, "comment_id": 108332935, "body": "@pandichef Hm, that does add complexity. Of course you can still cast and add the attributes again but that&#39;s definitely brittle. This isn&#39;t a good location for this discussion, though I&#39;m happy to chat more---send me an email (check my Github)! I can possibly try to pick up this PR again."}], "tags": [], "owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "is_accepted": true, "score": 4, "last_activity_date": 1567851232, "last_edit_date": 1567851232, "creation_date": 1567813361, "answer_id": 57829581, "question_id": 57796464, "link": "https://stackoverflow.com/questions/57796464/pandas-groupby-resample-etc-for-subclassed-dataframe/57829581#57829581", "title": "Pandas groupby, resample, etc for subclassed DataFrame", "body": "<p>I don't know if it's a \"bug\" per-se, but I agree that it should be changed regardless. If you take a look at some of the <a href=\"https://github.com/pandas-dev/pandas/blob/ac693331400bce4747c63aa76c53c6e3488933ae/pandas/core/groupby/generic.py\" rel=\"nofollow noreferrer\">source code</a> for groupby-type objects, you'll see a lot of hardcoded <code>return DataFrame(...)</code> and <code>return Series(...)</code>. </p>\n\n<p>As you rightfully pointed out, Pandas objects have three methods to be used to construct new versions of themselves: </p>\n\n<ul>\n<li><code>_construct()</code> to create objects of the same type </li>\n<li><code>_construct_sliced()</code> to create a series-like object from a dataframe-like object</li>\n<li><code>_construct_expanddim()</code> to create a dataframe-like object from a series-like object</li>\n</ul>\n\n<p>These can be used instead of the hardcoded types in <code>core/groupby/generic.py</code>, which is easy to do since the groupby objects store the starting <code>NDFrame</code> as the attribute <code>obj</code>.</p>\n\n<p>A branch with these changes implemented can be found on my fork here: <a href=\"https://github.com/alkasm/pandas/tree/groupby-preserve-subclass\" rel=\"nofollow noreferrer\">https://github.com/alkasm/pandas/tree/groupby-preserve-subclass</a></p>\n"}], "owner": {"reputation": 135, "user_id": 1586222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a0039fd6297d8373492864a65253a1?s=128&d=identicon&r=PG", "display_name": "grge", "link": "https://stackoverflow.com/users/1586222/grge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 1, "accepted_answer_id": 57829581, "answer_count": 1, "score": 6, "last_activity_date": 1606907935, "creation_date": 1567637498, "last_edit_date": 1606907935, "question_id": 57796464, "link": "https://stackoverflow.com/questions/57796464/pandas-groupby-resample-etc-for-subclassed-dataframe", "title": "Pandas groupby, resample, etc for subclassed DataFrame", "body": "<p><strong>Note:</strong> The thread below prompted a pull request which was eventually merged into <a href=\"https://github.com/pandas-dev/pandas/pull/33884/files/a70c21a357a8e7084b3ad13ab0d3f514f9f6205e#diff-e22941b6a11284fa71150dd4e82d90c47632049bbbc0da165665e97b122a024c\" rel=\"nofollow noreferrer\">v1.10</a>. This issue is now resolved.</p>\n<p>I'm using a subclassed DataFrame so that I can have more convenient access to some transformation methods and metadata particular to my use-case. Most of the DataFrame operations work as expected, in that they return an instance of the subclass, rather than an instance of <code>pandas.DataFrame</code>. However, aggregation operations like <code>DataFrame.groupby</code> and <code>DataFrame.resample</code> seem to mess this up.</p>\n<p>Is this a bug, or have a missed something when defining my subclass?</p>\n<p>Below is a minimal example, tested on pandas 0.25.1:</p>\n<pre class=\"lang-py prettyprint-override\"><code>class MyDataFrame(pd.DataFrame):\n    @property\n    def _constructor(self):\n        return MyDataFrame\n\ndates = pd.date_range('2019', freq='D', periods=365)\nmy_df = MyDataFrame(range(len(dates)), index=dates)\n\nassert isinstance(my_df, MyDataFrame)\n# Success!\n\nassert isinstance(my_df.diff(), MyDataFrame)\n# Success!\n\nassert isinstance(my_df.sample(10), MyDataFrame)\n# Success!\n\nassert isinstance(my_df[:10], MyDataFrame)\n# Success!\n\nassert isinstance(my_df.resample(&quot;D&quot;).sum(), MyDataFrame)\n# AssertionError\n\nassert isinstance(my_df.groupby(df.index.month).sum(), MyDataFrame)\n# AssertionError\n</code></pre>\n"}, {"tags": ["python", "sql", "xml", "database"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "is_accepted": false, "score": 0, "last_activity_date": 1567638401, "creation_date": 1567638401, "answer_id": 57796548, "question_id": 57796437, "link": "https://stackoverflow.com/questions/57796437/pulling-xml-from-an-api-and-saving-to-sql-database-with-python/57796548#57796548", "title": "Pulling XML from an API and saving to SQL database with Python", "body": "<p><a href=\"https://stackoverflow.com/questions/10128921/xml-to-mysql-using-python\">This</a> might be what you're looking for. </p>\n\n<p>Will the XML files only contain new database records? Or will they contain records that could be duplicates, and are you trying to avoid duplication? If so, does each record in your SQL database have a unique identifier you could easily search and match up to eliminate duplication from the XML?</p>\n\n<p>I believe you can grab data from the XML files using the following</p>\n\n<pre><code># load XML doc\n# Open SQL Connection\nfor child in root:\n    date = child.get('date')\n    value = child.get('value')\n    # enter variables into SQL server\n</code></pre>\n\n<p>Within your loop, add each individual record to your SQL as you iterate through the XML.</p>\n\n<p>(I'm fairly new to this as well, so I hope this does more help than harm!)</p>\n"}], "owner": {"reputation": 1, "user_id": 11820759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbd941865f51c14d3f042043f869a5d?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/11820759/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567638401, "creation_date": 1567637291, "question_id": 57796437, "link": "https://stackoverflow.com/questions/57796437/pulling-xml-from-an-api-and-saving-to-sql-database-with-python", "title": "Pulling XML from an API and saving to SQL database with Python", "body": "<p>Not a programmer- could use some help with understanding/best practice for bringing xml files into a SQL database. Here's some code and commentary to understand where I'm at now:</p>\n\n<pre><code>import pyodbc\nimport requests\nimport xml.etree.ElementTree as ET\n</code></pre>\n\n<p>Grabbing the XML file from the API:</p>\n\n<pre><code>requestURL = 'myURL.com'\nresponse = requests.get(requestURL)\n</code></pre>\n\n<p>This is where I start losing understanding. Mostly pieced together from various tutorials:</p>\n\n<pre><code>root = ET.fromstring(response.text)\ntree = ET.ElementTree(root)\nfor child in root:\n    print(child.attrib)\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<pre><code>{'date': '1986-01-02', 'value': '0.90'}\n{'date': '1986-01-03', 'value': '0.99'}\n{'date': '1986-01-06', 'value': '1.07'}\n...\n</code></pre>\n\n<p>Now I login into the database I want to write the information above into:</p>\n\n<pre><code>#establish connection with server\nconn = pyodbc.connect(driver='{SQL Server}', \n                  server=myServer, \n                  database=myDatabase,\n                  user=myUsername,\n                  password=myPassword)\n\ncursor = conn.cursor()\ncursor.execute('SELECT * FROM mySeries WHERE series_id = myID')\n\nfor row in cursor:\n    print(row)\n</code></pre>\n\n<p>Output looks like this:</p>\n\n<pre><code>(myID, '1986-01-02', Decimal('0.90'))\n(myID, '1986-01-03', Decimal('0.99'))\n(myID, '1986-01-06', Decimal('1.07'))\n...\n</code></pre>\n\n<p>So the next step is checking the database to see what data points I'm missing (new data added daily) and appending data onto the end of the series. I'm pretty sure I should be using SQL in python to accomplish that, but I'm just a little confused on the best way to write the XML data into the database.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11936556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gqfqrqbenbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcidMXzP2axyPqVzxMNL8CdczbniQ/photo.jpg?sz=128", "display_name": "Jason Brown", "link": "https://stackoverflow.com/users/11936556/jason-brown"}, "edited": false, "score": 0, "creation_date": 1567696897, "post_id": 57798790, "comment_id": 102048788, "body": "It&#39;s still giving the same messages."}], "tags": [], "owner": {"reputation": 1960, "user_id": 8794009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccd25f099164f92cd183cd1d019a753?s=128&d=identicon&r=PG&f=1", "display_name": "Wim Hermans", "link": "https://stackoverflow.com/users/8794009/wim-hermans"}, "is_accepted": false, "score": 1, "last_activity_date": 1567660329, "creation_date": 1567660329, "answer_id": 57798790, "question_id": 57796382, "link": "https://stackoverflow.com/questions/57796382/file-frozen-importlib-bootstrap-line-1006-in-gcd-import-error/57798790#57798790", "title": "File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1006, in _gcd_import error", "body": "<p>You can try to set your IMAGES_STORE like this:</p>\n\n<pre><code>IMAGES_STORE = r'C:\\Users\\jliv3\\PycharmProjects\\Instagram\\instagramscraper\\instagramscraper\\spiders\\test'\n</code></pre>\n\n<p>This way the '\\U' will be treated as literal characters, which is what you need here.</p>\n"}], "owner": {"reputation": 11, "user_id": 11936556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gqfqrqbenbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcidMXzP2axyPqVzxMNL8CdczbniQ/photo.jpg?sz=128", "display_name": "Jason Brown", "link": "https://stackoverflow.com/users/11936556/jason-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3999, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567660329, "creation_date": 1567636666, "last_edit_date": 1592644375, "question_id": 57796382, "link": "https://stackoverflow.com/questions/57796382/file-frozen-importlib-bootstrap-line-1006-in-gcd-import-error", "title": "File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1006, in _gcd_import error", "body": "<p>I made a simple crawler that's supposed to get and download the images from an instagram profile but I keep getting this error message.</p>\n<p>I tried following this tutorial <a href=\"https://docs.scrapy.org/en/latest/topics/media-pipeline.html\" rel=\"nofollow noreferrer\">https://docs.scrapy.org/en/latest/topics/media-pipeline.html</a></p>\n<pre><code>#instagarm_spider.py\n\nclass InstagramSpider(scrapy.Spider):\n    name = 'ig'\n\n    start_urls = [\n        'https://www.instagram.com/kyliejenner/'\n    ]\n    def parse(self, response):\n        image_urls = scrapy.Field()\n        images = scrapy.Field()\n        yield {'image_urls': image_urls,\n               'images': images}\n\n</code></pre>\n<h1>settings.py</h1>\n<pre><code>BOT_NAME = 'instagramscraper' SPIDER_MODULES = ['instagramscraper.spiders'] \n\nNEWSPIDER_MODULE = 'instagramscraper.spiders' \n\nITEM_PIPELINES = { 'scrapy.pipelines.images.ImagesPipeline': 1 } \n\nIMAGES_STORE = \n\n'C:\\Users\\jliv3\\PycharmProjects\\Instagram\\instagramscraper\\instagramscraper\\sp\n\niders\\test'\n</code></pre>\n<p>Here are all the error messages I recieved.</p>\n<pre><code> File &quot;C:\\Users\\jliv3\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py&quot;, \n\nline 193, in _run_module_as_main\n\n    &quot;__main__&quot;, mod_spec)\n\n  File &quot;C:\\Users\\jliv3\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py&quot;, \n\nline 85, in _run_code\n\n    exec(code, run_globals)\n\n  File \n\n&quot;C:\\Users\\jliv3\\PycharmProjects\\Instagram\\venv\\Scripts\\scrapy.exe\\__main__.py&quot;\n\n, line 9, in &lt;module&gt;\n\n  File &quot;c:\\users\\jliv3\\pycharmprojects\\instagram\\venv\\lib\\site-\n\npackages\\scrapy\\cmdline.py&quot;, line 114, in execute\n\n    settings = get_project_settings()\n\n  File &quot;c:\\users\\jliv3\\pycharmprojects\\instagram\\venv\\lib\\site-\n\npackages\\scrapy\\utils\\project.py&quot;, line 68, in get_project_settings\n    \nsettings.setmodule(settings_module_path, priority='project')\n \n File &quot;c:\\users\\jliv3\\pycharmprojects\\instagram\\venv\\lib\\site-\n\npackages\\scrapy\\settings\\__init__.py&quot;, line 294, in setmodule\n    \nmodule = import_module(module)\n  \nFile \n\n&quot;C:\\Users\\jliv3\\AppData\\Local\\Programs\\Python\\Python37\\lib\\importlib\\__init__.\n\npy&quot;, line 127, in import_module\n    \nreturn _bootstrap._gcd_import(name[level:], package, level)\n  \nFile &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1006, in _gcd_import\n \nFile &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 983, in _find_and_load\n  \nFile &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 967, in _find_and_load_unlocked\n  \nFile &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 677, in _load_unlocked\n  \nFile &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 724, in exec_module\n  \nFile &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 860, in get_code\n  \nFile &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 791, in source_to_code\n  \nFile &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 219, in _call_with_frames_removed\n  \nFile \n\n&quot;C:\\Users\\jliv3\\PycharmProjects\\Instagram\\instagramscraper\\instagramscraper\\se\n\nttings.py&quot;, line 70\n    \nIMAGES_STORE = \n\n'C:\\Users\\jliv3\\PycharmProjects\\Instagram\\instagramscraper\\instagramscraper\\spiders\\test'\n                  ^\nSyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in position 2-3: truncated \\UXXXXXXXX escape\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 11063448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33cb9a2713ecd16a23f70df764e0d559?s=128&d=identicon&r=PG&f=1", "display_name": "Quicksilver", "link": "https://stackoverflow.com/users/11063448/quicksilver"}, "reply_to_user": {"reputation": 61, "user_id": 11968385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fee68761350ebe7b79b4b671d67abfdd?s=128&d=identicon&r=PG&f=1", "display_name": "vspadotto", "link": "https://stackoverflow.com/users/11968385/vspadotto"}, "edited": false, "score": 0, "creation_date": 1567638323, "post_id": 57796418, "comment_id": 102026111, "body": "If you could upvote and mark your preferred answer as accepted, that would be greatly appreciated."}], "tags": [], "owner": {"reputation": 71, "user_id": 11063448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33cb9a2713ecd16a23f70df764e0d559?s=128&d=identicon&r=PG&f=1", "display_name": "Quicksilver", "link": "https://stackoverflow.com/users/11063448/quicksilver"}, "is_accepted": true, "score": 0, "last_activity_date": 1567637040, "creation_date": 1567637040, "answer_id": 57796418, "question_id": 57796372, "link": "https://stackoverflow.com/questions/57796372/how-to-drop-a-row-in-pandas-only-if-it-exists-in-the-dataframe/57796418#57796418", "title": "How to drop a row in Pandas only if it exists in the DataFrame", "body": "<p>From <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<pre><code>gross_sales_2018_pivot = gross_sales_2018_pivot.drop('(UnSpecified)', axis=0, errors='ignore')   \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1174, "user_id": 3406189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWSmF.jpg?s=128&g=1", "display_name": "grofte", "link": "https://stackoverflow.com/users/3406189/grofte"}, "is_accepted": false, "score": 0, "last_activity_date": 1592300663, "creation_date": 1592300663, "answer_id": 62405589, "question_id": 57796372, "link": "https://stackoverflow.com/questions/57796372/how-to-drop-a-row-in-pandas-only-if-it-exists-in-the-dataframe/62405589#62405589", "title": "How to drop a row in Pandas only if it exists in the DataFrame", "body": "<p>gross_sales_2018_pivot = gross_sales_2018_pivot.loc[<em>condition for not unspecified</em>, :]</p>\n\n<p>Example:</p>\n\n<p><code>gross_sales_2018_pivot = gross_sales_2018_pivot.loc[gross_sales_2018_pivot['important_col'] != 'trash', :]</code></p>\n"}], "owner": {"reputation": 61, "user_id": 11968385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fee68761350ebe7b79b4b671d67abfdd?s=128&d=identicon&r=PG&f=1", "display_name": "vspadotto", "link": "https://stackoverflow.com/users/11968385/vspadotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 57796418, "answer_count": 2, "score": 1, "last_activity_date": 1592300663, "creation_date": 1567636559, "question_id": 57796372, "link": "https://stackoverflow.com/questions/57796372/how-to-drop-a-row-in-pandas-only-if-it-exists-in-the-dataframe", "title": "How to drop a row in Pandas only if it exists in the DataFrame", "body": "<p>I have a DataFrame that sometimes has a row called (UnSpecified) and sometimes don't. When I try to drop the row by the name and it doesn't exist I get a \"(UnSpecified) not found in axis\" error. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>### sales 2018 ###\n\nsales_2018 = pd.read_csv('sales 2018.csv')\n\n# gross sales\n\ngross_sales_2018_pivot = pd.DataFrame(pd.pivot_table(sales_2018, values=['GROSS SALES'], index=['DAYPARTNAME'], columns=['DAY OF WEEK'], aggfunc=np.sum))\n\ngross_sales_2018_pivot = gross_sales_2018_pivot.drop('(UnSpecified)', axis=0)                       \n\ngross_sales_2018_pivot.to_excel(writer, sheet_name='overall')\nwriter.save()\n</code></pre>\n\n<p>How can I create a loop to make it ignore/pass the error if there is no (UnSpecified) row?</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 3, "creation_date": 1567636506, "post_id": 57796328, "comment_id": 102025765, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Without it it is hard or impossible to tell what you are trying to do and where the specific issue is."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567639456, "post_id": 57796328, "comment_id": 102026312, "body": "I don&#39;t think <code>cv2.VideoCapture()</code> is what you would want to use to read a <b>file</b> \u2014 isn&#39;t it for capturing images from a camera?"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1567671075, "post_id": 57796328, "comment_id": 102034225, "body": "@martineau See <a href=\"https://docs.opencv.org/2.4/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-videocapture\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/highgui/doc/&hellip;</a> for OP&#39;s use case."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1567676431, "post_id": 57796328, "comment_id": 102037089, "body": "@uneven_mark: Hmm, thanks, unfortunately the documentation is as clear as mud..."}], "answers": [{"comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1567671155, "post_id": 57796641, "comment_id": 102034262, "body": "Neither is <code>os.listdir</code> returning an ordered list, nor does OP want to call <code>VideoCapture</code> to be called for each image, see <a href=\"https://docs.opencv.org/2.4/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-videocapture\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/highgui/doc/&hellip;</a>"}, {"owner": {"reputation": 653, "user_id": 7876832, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8026603fd9d461598f867990a8eefbd2?s=128&d=identicon&r=PG&f=1", "display_name": "ParalysisByAnalysis", "link": "https://stackoverflow.com/users/7876832/paralysisbyanalysis"}, "edited": false, "score": 0, "creation_date": 1567693938, "post_id": 57796641, "comment_id": 102047133, "body": "Your file system has the list sorted already....but assuming for whatever reason it&#39;s sorted descending, it&#39;s as easy as adding <code>.sort</code> function."}], "tags": [], "owner": {"reputation": 653, "user_id": 7876832, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8026603fd9d461598f867990a8eefbd2?s=128&d=identicon&r=PG&f=1", "display_name": "ParalysisByAnalysis", "link": "https://stackoverflow.com/users/7876832/paralysisbyanalysis"}, "is_accepted": false, "score": -1, "last_activity_date": 1567694071, "last_edit_date": 1567694071, "creation_date": 1567639197, "answer_id": 57796641, "question_id": 57796328, "link": "https://stackoverflow.com/questions/57796328/how-can-i-read-images-from-a-folder-starting-from-image-10-for-example-with-vid/57796641#57796641", "title": "How can I read images from a folder, starting from image 10 for example with VideoCapture()?", "body": "<p>This should work:   </p>\n\n<pre><code>import os\n\nfolder = os.listdir()\nfolder = sorted(folder)\nstart_pos = [i for i,x in enumerate(folder) if x == 'image10.jpg'][0]\n\nfor i in range(start_pos,len(folder)):\n    cap=cv2.VideoCapture(folder[i]) #or whatever the cv2 function is...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12022238, "user_type": "registered", "profile_image": "https://graph.facebook.com/1309076119249429/picture?type=large", "display_name": "Salmitta AI", "link": "https://stackoverflow.com/users/12022238/salmitta-ai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1567694071, "creation_date": 1567636146, "last_edit_date": 1567654485, "question_id": 57796328, "link": "https://stackoverflow.com/questions/57796328/how-can-i-read-images-from-a-folder-starting-from-image-10-for-example-with-vid", "title": "How can I read images from a folder, starting from image 10 for example with VideoCapture()?", "body": "<p>I want to read a sequence of images from a folder. \nI found: </p>\n\n<pre><code>cap=cv2.VideoCapture(\"in%6d.jpg\")\n</code></pre>\n\n<p>But I must start from <code>image10</code> and not from the first. </p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python", "python-3.x", "google-sheets", "gspread"], "comments": [{"owner": {"reputation": 28156, "user_id": 1026, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ea331e778d54effc15b5fbc694bc8232?s=128&d=identicon&r=PG", "display_name": "Nickolay", "link": "https://stackoverflow.com/users/1026/nickolay"}, "edited": false, "score": 0, "creation_date": 1567643784, "post_id": 57796269, "comment_id": 102027054, "body": "What&#39;s the value of <code>sheet_name</code>? Do you really get different results by calling <code>get_all_values()</code> on the same sheet obtained via <code>.sheet1</code> and <code>.worksheet(sheet_name)</code>?? As <code>get_all_values</code> <a href=\"https://github.com/burnash/gspread/blob/50c5d888bd1f8ba1d2800bdfa7cf6cd785852c24/gspread/models.py#L580\" rel=\"nofollow noreferrer\">is quite simple</a> I&#39;d compare the <code>title</code> of the sheet in the two cases. // Do you use Python 3 and the latest version of gspread?"}, {"owner": {"reputation": 377, "user_id": 8119069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6a766ca13f4aabb48bdea491947bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorEvil", "link": "https://stackoverflow.com/users/8119069/doctorevil"}, "reply_to_user": {"reputation": 28156, "user_id": 1026, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ea331e778d54effc15b5fbc694bc8232?s=128&d=identicon&r=PG", "display_name": "Nickolay", "link": "https://stackoverflow.com/users/1026/nickolay"}, "edited": false, "score": 0, "creation_date": 1567669321, "post_id": 57796269, "comment_id": 102033397, "body": "sheet_name is a string. I&#39;m pretty sure I&#39;m doing everything right. I edited my question and added a screenshot. You can see that row_values returns normally, but get_all_values doesn&#39;t and get_all_records returns an error. I&#39;m using Python 3 and I installed gspread yesterday, so it should be the latest version."}, {"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 1, "creation_date": 1567671134, "post_id": 57796269, "comment_id": 102034254, "body": "In my environment, I couldn&#39;t replicate your situation. So I would like to propose other method. gspread can directly use Sheets API. Using this, how about using spreadsheets.values.get? The method is <a href=\"https://gspread.readthedocs.io/en/latest/api.html#gspread.models.Spreadsheet.values_get\" rel=\"nofollow noreferrer\"><code>values_get</code></a>. And the sample script is this. <code>print(client.open_by_key(spreadsheetId).values_get(sheetName&zwnj;&#8203;))</code> At first, please set <code>spreadsheetId</code> and <code>sheetName</code>. If this also didn&#39;t work for your situation, I apologize. At that time, can you provide a sample Spreadsheet for replicating your issue?"}, {"owner": {"reputation": 377, "user_id": 8119069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6a766ca13f4aabb48bdea491947bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorEvil", "link": "https://stackoverflow.com/users/8119069/doctorevil"}, "edited": false, "score": 0, "creation_date": 1567673402, "post_id": 57796269, "comment_id": 102035421, "body": "Doesn&#39;t work. First sheet returns fine, but others are missing &quot;values&quot; key. <a href=\"https://i.ibb.co/0hH1W62/first-sheet.png\" rel=\"nofollow noreferrer\">i.ibb.co/0hH1W62/first-sheet.png</a>  <a href=\"https://i.ibb.co/f03FH0w/any-other-sheet.png\" rel=\"nofollow noreferrer\">i.ibb.co/f03FH0w/any-other-sheet.png</a>"}, {"owner": {"reputation": 377, "user_id": 8119069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6a766ca13f4aabb48bdea491947bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorEvil", "link": "https://stackoverflow.com/users/8119069/doctorevil"}, "edited": false, "score": 0, "creation_date": 1567673699, "post_id": 57796269, "comment_id": 102035574, "body": "Maybe it could have something to do with scopes? Before I added auth/drive scope, I couldn&#39;t even get a list of sheets or anything. <a href=\"https://i.ibb.co/QFL4zd9/scopes.png\" rel=\"nofollow noreferrer\">i.ibb.co/QFL4zd9/scopes.png</a>"}, {"owner": {"reputation": 28156, "user_id": 1026, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ea331e778d54effc15b5fbc694bc8232?s=128&d=identicon&r=PG", "display_name": "Nickolay", "link": "https://stackoverflow.com/users/1026/nickolay"}, "edited": false, "score": 0, "creation_date": 1567677863, "post_id": 57796269, "comment_id": 102037853, "body": "The <code>get_all_records()</code> error is a bug exposed by get_all_values() returning an empty list (<a href=\"https://github.com/burnash/gspread/commit/1580376c6509d9e919973e84903aa50c5ab1a525\" rel=\"nofollow noreferrer\">fixed in the dev version</a>). <code>row_values(1)</code> <a href=\"https://github.com/burnash/gspread/blob/50c5d888bd1f8ba1d2800bdfa7cf6cd785852c24/gspread/models.py#L663\" rel=\"nofollow noreferrer\">makes</a> a request with <code>X101!A1:1</code> as the range, while <code>get_all_values</code> <a href=\"https://github.com/burnash/gspread/blob/50c5d888bd1f8ba1d2800bdfa7cf6cd785852c24/gspread/models.py#L588\" rel=\"nofollow noreferrer\">requests</a> a <code>X101</code> range. Perhaps it&#39;s getting confused for a cell reference?"}, {"owner": {"reputation": 377, "user_id": 8119069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6a766ca13f4aabb48bdea491947bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorEvil", "link": "https://stackoverflow.com/users/8119069/doctorevil"}, "edited": false, "score": 1, "creation_date": 1567686073, "post_id": 57796269, "comment_id": 102042398, "body": "OK, I guess I managed to do what I was looking for with something like ws.range(&quot;A1:C&quot;+str(end_row)). That end_row is usually row_count of the sheet."}, {"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 1, "creation_date": 1567724215, "post_id": 57796269, "comment_id": 102058854, "body": "Thank you for replying. I noticed your replying just now. I apologize for this. The method of <code>values_get</code> directly use Sheets API. Although I&#39;m not sure whether this is the direct solution, for example, how about <code>print(client.open_by_key(spreadsheetId).values_get(&quot;&#39;X101&#39;&quot;)&zwnj;&#8203;)</code>?"}, {"owner": {"reputation": 377, "user_id": 8119069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6a766ca13f4aabb48bdea491947bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorEvil", "link": "https://stackoverflow.com/users/8119069/doctorevil"}, "edited": false, "score": 0, "creation_date": 1567760077, "post_id": 57796269, "comment_id": 102067938, "body": "No need to apologize. I found a solution that might be even better than to get an entire sheet, since I just need first 3 columns in the sheet. If you want to recreate this, it seems like you can just by creating sheets with names like &quot;X101&quot;, &quot;X102&quot; etc., since it might be a problem with names."}], "answers": [{"tags": [], "owner": {"reputation": 28156, "user_id": 1026, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ea331e778d54effc15b5fbc694bc8232?s=128&d=identicon&r=PG", "display_name": "Nickolay", "link": "https://stackoverflow.com/users/1026/nickolay"}, "is_accepted": true, "score": 1, "last_activity_date": 1567714727, "creation_date": 1567714727, "answer_id": 57812479, "question_id": 57796269, "link": "https://stackoverflow.com/questions/57796269/gspread-get-all-values-returns-an-empty-list/57812479#57812479", "title": "gspread - get_all_values() returns an empty list", "body": "<p><code>gspread</code> doesn't work well with sheets with names that could be confused as a cell reference in the A1 notation (like <code>X101</code> and <code>AT8</code> in your case).</p>\n\n<p><a href=\"https://github.com/burnash/gspread/issues/554\" rel=\"nofollow noreferrer\">https://github.com/burnash/gspread/issues/554</a> is an older issue that describes the underlying problem (the symptoms in that issue are different, but I'm pretty sure the root problem is the same).</p>\n\n<p>I'll copy the workaround with <a href=\"https://stackoverflow.com/questions/57796269/gspread-get-all-values-returns-an-empty-list#comment102042398_57796269\">providing a range</a>, that you've discovered yourself:</p>\n\n<blockquote>\n  <p><code>ws.range(\"A1:C\"+str(end_row))</code> That <code>end_row</code> is usually <code>row_count</code> of the sheet. </p>\n</blockquote>\n"}], "owner": {"reputation": 377, "user_id": 8119069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6a766ca13f4aabb48bdea491947bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorEvil", "link": "https://stackoverflow.com/users/8119069/doctorevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "accepted_answer_id": 57812479, "answer_count": 1, "score": 1, "last_activity_date": 1567714727, "creation_date": 1567635449, "last_edit_date": 1567669156, "question_id": 57796269, "link": "https://stackoverflow.com/questions/57796269/gspread-get-all-values-returns-an-empty-list", "title": "gspread - get_all_values() returns an empty list", "body": "<p>If I call a sheet by name, get_all_values function will always give me an empty list for a sheet that is definitely not empty. </p>\n\n<pre><code>import gspread\n\nsheet = workbook.worksheet(sheet_name)\nall_rows_list = sheet.get_all_values()\n</code></pre>\n\n<p>The only time get_all_values seems to return like it should is if I do the following:</p>\n\n<pre><code>all_rows_list = workbook.sheet1.get_all_values()\n</code></pre>\n\n<p>But the above works just for the first sheet and for no other, which is kind of useless for a workbook with more sheets.</p>\n\n<p><br/>What always works is reading row by row like</p>\n\n<pre><code>one_row_list = sheet.row_values(1) # first row \n</code></pre>\n\n<p><br/>But the problem is that I'm trying to read a relatively big workbook with lots of sheets to figure out where I'm supposed to start writing, and it looks like reading row by row triggers \"RESOURCES EXHAUSTED\" error very fast.\n<br/><br/>So, am I doing something wrong or is get_all_values broken in gspread?</p>\n\n<p><strong>EDIT:</strong>\nAdded a screenshot.<a href=\"https://i.stack.imgur.com/QYlGS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QYlGS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "regex", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 1880, "user_id": 284511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02af94441ca54b5cab7d4ca8bfff83c?s=128&d=identicon&r=PG", "display_name": "fringd", "link": "https://stackoverflow.com/users/284511/fringd"}, "is_accepted": false, "score": 0, "last_activity_date": 1567635307, "creation_date": 1567635307, "answer_id": 57796255, "question_id": 57796219, "link": "https://stackoverflow.com/questions/57796219/need-regex-for-comma-followed-by-space-then-state-abbreviation/57796255#57796255", "title": "Need Regex for Comma followed by space then State Abbreviation", "body": "<p>/, (PA|FL|...)/i</p>\n\n<p>I'll leave the remaining 48 states as an exercise for the reader ;)</p>\n"}, {"tags": [], "owner": {"reputation": 420, "user_id": 11984497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wObKM.png?s=128&g=1", "display_name": "LTPCGO", "link": "https://stackoverflow.com/users/11984497/ltpcgo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567635664, "creation_date": 1567635664, "answer_id": 57796286, "question_id": 57796219, "link": "https://stackoverflow.com/questions/57796219/need-regex-for-comma-followed-by-space-then-state-abbreviation/57796286#57796286", "title": "Need Regex for Comma followed by space then State Abbreviation", "body": "<pre><code>/(?: (?:A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])(?:,| ))|(?:, (?:A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])(?:,| ))/i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17225, "user_id": 2823719, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/TWgf9.jpg?s=128&g=1", "display_name": "Booboo", "link": "https://stackoverflow.com/users/2823719/booboo"}, "edited": false, "score": 0, "creation_date": 1567637501, "post_id": 57796317, "comment_id": 102025974, "body": "I have two questions/comments: (1) Doesn&#39;t <code>(?:,\\s+)?</code> require at least one space following the comma? So it only matches <code>&#39;,FL&#39;</code> without <code>(?:,\\s+)?</code> matching the <code>,</code> (the group was optional). Which means you will also match <code>FL</code> in <code>AFLCIO</code> and that can&#39;t be desirable. (2) Which state&#39;s abbreviation is  AE? Is this a territory? There are other &quot;states&quot; I don&#39;t recognize."}, {"owner": {"reputation": 5399, "user_id": 3248412, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3yGCF.jpg?s=128&g=1", "display_name": "vs97", "link": "https://stackoverflow.com/users/3248412/vs97"}, "reply_to_user": {"reputation": 17225, "user_id": 2823719, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/TWgf9.jpg?s=128&g=1", "display_name": "Booboo", "link": "https://stackoverflow.com/users/2823719/booboo"}, "edited": false, "score": 0, "creation_date": 1567638493, "post_id": 57796317, "comment_id": 102026142, "body": "@RonaldAaronson Thank you for your comment, fixed both points."}, {"owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "edited": false, "score": 0, "creation_date": 1567709438, "post_id": 57796317, "comment_id": 102054143, "body": "@vs97 Thanks so much!!  I&#39;m trying to figure out how to set the -i flag.  Can  you teach me how?"}, {"owner": {"reputation": 5399, "user_id": 3248412, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3yGCF.jpg?s=128&g=1", "display_name": "vs97", "link": "https://stackoverflow.com/users/3248412/vs97"}, "reply_to_user": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "edited": false, "score": 0, "creation_date": 1567711184, "post_id": 57796317, "comment_id": 102054885, "body": "@mrphysics If you are using re.compile, then e.g. - re.compile(r&#39;<i>expression-here</i>&#39;,                 re.I (capital i)). Also this answer might be useful - <a href=\"https://stackoverflow.com/questions/500864/case-insensitive-regular-expression-without-re-compile\" title=\"case insensitive regular expression without re compile\">stackoverflow.com/questions/500864/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "edited": false, "score": 0, "creation_date": 1567712227, "post_id": 57796317, "comment_id": 102055341, "body": "@vs97 re.IGNORECASE doesn&#39;t work.  I have:  text = &quot;....&quot; match = re.search(r&#39;expression&#39;, text, re.IGNORECASE) if match:     text = text.replace(match.group(), &#39;[State]&#39;)  The change is not made if I have something like New York, ny"}, {"owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "edited": false, "score": 1, "creation_date": 1567716280, "post_id": 57796317, "comment_id": 102056829, "body": "Figured it out.  Just add (?i) at the very beginning of the regex code."}], "tags": [], "owner": {"reputation": 5399, "user_id": 3248412, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3yGCF.jpg?s=128&g=1", "display_name": "vs97", "link": "https://stackoverflow.com/users/3248412/vs97"}, "is_accepted": true, "score": 1, "last_activity_date": 1567638454, "last_edit_date": 1567638454, "creation_date": 1567635964, "answer_id": 57796317, "question_id": 57796219, "link": "https://stackoverflow.com/questions/57796219/need-regex-for-comma-followed-by-space-then-state-abbreviation/57796317#57796317", "title": "Need Regex for Comma followed by space then State Abbreviation", "body": "<p>Check this expression out:</p>\n\n<pre><code>(?&lt;!\\w)(?:,\\s+)?(?:A[LKZR]|C[AOT]|DE|FL|GA|HI|I[ADLN]|K[SY]|LA|M[EDAINSOT]|N[EVHJMYCD]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY]),?\\s?(?!\\w)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/5uAhjy/5\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p>This expression is quite long, so let me explain by parts:</p>\n\n<pre><code> (?&lt;!\\w)           # Make sure state not preceeded by text\n (?:,\\s+)?         # Optionally match if followed by a , and several whitespace\n (?:A[LKZR]        # Start matching every combination of US state. Use -i flag to ignore case.\n |\n  C[AOT]           # E.g. this will match CA/CO/CT\n |                 # or\n  DE               # DE\n |                 # or\n  FL               # etc...\n |\n  GA\n |\n  HI\n |\n  I[ADLN]\n |\n  K[SY]\n |\n  LA\n |\n  M[EDAINSOT]\n |\n  N[EVHJMYCD]\n |\n  O[HKR]\n |\n  PA\n |\n  RI\n |\n  S[CD]\n |\n  T[NX]\n |\n  UT\n |\n  V[AT]\n |\n  W[AIVY])\n ,?               # Match if , at the end\n \\s?              # Match if whitespace at the end (was in your examples)\n (?!\\w)           # Make sure state is not succeeded by letters\n</code></pre>\n\n<p>Dont forget to set the <strong>-i</strong> flag, which will ignore letter case.</p>\n"}], "owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "closed_date": 1567638114, "accepted_answer_id": 57796317, "answer_count": 3, "score": -1, "last_activity_date": 1567715162, "creation_date": 1567635008, "last_edit_date": 1567715162, "question_id": 57796219, "link": "https://stackoverflow.com/questions/57796219/need-regex-for-comma-followed-by-space-then-state-abbreviation", "closed_reason": "Needs more focus", "title": "Need Regex for Comma followed by space then State Abbreviation", "body": "<p>I'm very new to regex and I'm trying to find instances of any of the following:</p>\n\n<pre><code>\", FL,\"\n\" FL \"\n\" FL,\"\n\", FL \"\n</code></pre>\n\n<p>where FL can be any US state abbreviation, upper or lower case. (I know some of the above probably overlap.)  Which leads me to the second part of my question:\nHow do I write regex code that searches for all of the above, and for every US state abbreviation?\n(Why am I being asked to edit the question to be more specific?  What's the point of making two posts when both are very related to each other?  You may answer one or both questions if you wish. @The Fourth Bird)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1567635120, "post_id": 57796210, "comment_id": 102025451, "body": "Welcome to StackOverflow. Please read and follow the posting guidelines in the help documentation, as suggested when you created this account. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, complete, verifiable example</a> applies here. We cannot effectively help you until you post your MCVE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified. You have not demonstrated any problem."}, {"owner": {"reputation": 73, "user_id": 1247874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd017c6b3469816d027ada7a37d431bf?s=128&d=identicon&r=PG", "display_name": "Aymen", "link": "https://stackoverflow.com/users/1247874/aymen"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567635570, "post_id": 57796210, "comment_id": 102025550, "body": "I added the problem. Thanks for the comment."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567635763, "post_id": 57796210, "comment_id": 102025586, "body": "You added part of the error message, and output that doesn&#39;t match your code.  I&#39;ll wait for you to finish the posting."}, {"owner": {"reputation": 73, "user_id": 1247874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd017c6b3469816d027ada7a37d431bf?s=128&d=identicon&r=PG", "display_name": "Aymen", "link": "https://stackoverflow.com/users/1247874/aymen"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567636401, "post_id": 57796210, "comment_id": 102025747, "body": "I added all of the output."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 1247874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd017c6b3469816d027ada7a37d431bf?s=128&d=identicon&r=PG", "display_name": "Aymen", "link": "https://stackoverflow.com/users/1247874/aymen"}, "edited": false, "score": 0, "creation_date": 1567636988, "post_id": 57796365, "comment_id": 102025869, "body": "It works to find the string. But how to know its index in the list?"}], "tags": [], "owner": {"reputation": 420, "user_id": 11984497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wObKM.png?s=128&g=1", "display_name": "LTPCGO", "link": "https://stackoverflow.com/users/11984497/ltpcgo"}, "is_accepted": true, "score": 1, "last_activity_date": 1567638028, "last_edit_date": 1567638028, "creation_date": 1567636509, "answer_id": 57796365, "question_id": 57796210, "link": "https://stackoverflow.com/questions/57796210/finding-a-string-and-the-index-of-the-string-into-list-from-a-file/57796365#57796365", "title": "Finding a string and the index of the string into list from a file", "body": "<p>4.35 doesn't exist in your list, because it's checking the whole string against each element.  Instead, you want to search for that string in each list element.  For that, you can use any, and grab each element from the list as so:</p>\n\n<pre><code>if any(\"4.35\" in el for el in cont):\n</code></pre>\n\n<p>If you just want to print the index in question,</p>\n\n<pre><code>print [i for i, el in enumerate(cont) if \"4.35\" in el]\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 1247874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd017c6b3469816d027ada7a37d431bf?s=128&d=identicon&r=PG", "display_name": "Aymen", "link": "https://stackoverflow.com/users/1247874/aymen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 2, "accepted_answer_id": 57796365, "answer_count": 1, "score": -2, "last_activity_date": 1567638028, "creation_date": 1567634932, "last_edit_date": 1567637206, "question_id": 57796210, "link": "https://stackoverflow.com/questions/57796210/finding-a-string-and-the-index-of-the-string-into-list-from-a-file", "title": "Finding a string and the index of the string into list from a file", "body": "<p>I am trying to find a string inside a txt file after converting it into a list and also I want to know the index of that string.</p>\n\n<p>The txt file contain the following:</p>\n\n<blockquote>\n  <h1>captcp 2010-2013 Hagen Paul Pfeifer and others (c)</h1>\n  \n  <h1><a href=\"http://research.protocollabs.com/captcp/\" rel=\"nofollow noreferrer\">http://research.protocollabs.com/captcp/</a></h1>\n  \n  <h1>total data (goodput): 33016186 byte (264.13 Mbit)</h1>\n  \n  <h1>throughput (goodput): 543805.43 byte/s (4.35 Mbit/s)</h1>\n</blockquote>\n\n<p>I tried the following code:</p>\n\n<pre><code>fo=open ('B_rand.txt', \"r\")\ncont=fo.readlines()\nprint(cont)\nif '4.35' in cont:\n        print(\"yes:\", cont.index('4.35')\n else:\n        print(\"No\")\n</code></pre>\n\n<p>Output: \n['# captcp 2010-2013 Hagen Paul Pfeifer and others (c)\\n', '# <a href=\"http://research.protocollabs.com/captcp/\" rel=\"nofollow noreferrer\">http://research.protocollabs.com/captcp/</a>\\n', '# total data (goodput): 33016186 byte (264.13 Mbit)\\n', '# throughput (goodput): 543805.43 byte/s (4.35 Mbit/s)\\n']\nNo\nTraceback (most recent call last):\n  File \"find.py\", line 9, in \n    index = cont.index('4.35')\nValueError: '4.35' is not in list</p>\n\n<p>I am expecting to find (4.35) with its index.</p>\n"}, {"tags": ["python", "error-handling"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1567635359, "post_id": 57796199, "comment_id": 102025511, "body": "It seems that you are running your code on some online Python interpreter or submitted it to some site. In such a case there will be a time limit for the program to run. This is not an error message Python itself would give you. Please clarify in the question."}], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 10532452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5537605973a6e26bb07101b96a136f49?s=128&d=identicon&r=PG&f=1", "display_name": "NegativeChameleon", "link": "https://stackoverflow.com/users/10532452/negativechameleon"}, "is_accepted": false, "score": 1, "last_activity_date": 1567635389, "creation_date": 1567635389, "answer_id": 57796264, "question_id": 57796199, "link": "https://stackoverflow.com/questions/57796199/why-do-i-have-this-error-program-shut-down-for-using-13-cpu-seconds/57796264#57796264", "title": "Why do I have this error (program shut down for using 13 cpu seconds)", "body": "<p>Your program gets stuck in</p>\n\n<pre><code>while y &lt; 5:\n     sum_odd.append(y)\n</code></pre>\n\n<p>because you initialized <code>y</code> to 0 and never change it, hence the condition <code>y &lt; 5</code> is always true.</p>\n"}], "owner": {"reputation": 11, "user_id": 10067506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y0o7i.png?s=128&g=1", "display_name": "Islam Khairy", "link": "https://stackoverflow.com/users/10067506/islam-khairy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1567635389, "creation_date": 1567634843, "last_edit_date": 1567635003, "question_id": 57796199, "link": "https://stackoverflow.com/questions/57796199/why-do-i-have-this-error-program-shut-down-for-using-13-cpu-seconds", "title": "Why do I have this error (program shut down for using 13 cpu seconds)", "body": "<p>I am still learning python, and I wrote a code that takes a list of numbers and adds the odd numbers.<br>\nIf there are more than 5 odd numbers, add only the first 5 numbers, but if there isn't, add them all.<br>\nHere is the code </p>\n\n<pre><code>num_list = [422, 136, 524, 85, 96, 719, 85, 92, 10, \n17, 312, 542, 87, 23, 86, 191, 116, 35, 173, 45, 149, \n59, 84, 69, 113, 166]\nodd_nums =list()\nsum_odd = list () \nx, y, z = 0, 0, 0 \nfor i in num_list :\n    if i%2 != 0 :\n        odd_nums.append(i) \n\nif len(odd_nums) &gt;5 :\n    while y &lt; 5 :\n        sum_odd.append(y)\n    z=sum(sum_odd) \n    print (z)\n\nelse :\n    x=sum(odd_nums)\n    print (x) \n</code></pre>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 360, "user_id": 9101283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DgMyBG2RrcY/AAAAAAAAAAI/AAAAAAAAAAc/FkIpYgFU3Us/photo.jpg?sz=128", "display_name": "Aryan Jain", "link": "https://stackoverflow.com/users/9101283/aryan-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1567640686, "creation_date": 1567640686, "answer_id": 57796797, "question_id": 57796187, "link": "https://stackoverflow.com/questions/57796187/how-to-assign-values-to-given-indices-to-an-array-and-average-on-repeated-indice/57796797#57796797", "title": "How to assign values to given indices to an array and average on repeated indices?", "body": "<p>You could do this using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\">np.where</a>. </p>\n\n<pre><code>import numpy as np\na = np.array([0, 0, 0, 0, 0]).astype('float64')\nind = np.array([1, 1, 2, 3])\nb = np.array([2, 3, 4, 5])\n\nfor i in set(ind):\n    a[i] = np.mean(b[np.where(ind == i)])\n</code></pre>\n\n<p>Would result in:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>In [5]: a\nOut[5]: array([0. , 2.5, 4. , 5. , 0. ])\n</code></pre>\n\n<p>You are essentially finding all indices of <code>ind</code> where the value of <code>ind[index]</code> is equal to <code>i</code> and then obtaining the mean of the values at those indices in <code>b</code> and assigning that mean to <code>a[i]</code>. Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1567645578, "creation_date": 1567645578, "answer_id": 57797215, "question_id": 57796187, "link": "https://stackoverflow.com/questions/57796187/how-to-assign-values-to-given-indices-to-an-array-and-average-on-repeated-indice/57797215#57797215", "title": "How to assign values to given indices to an array and average on repeated indices?", "body": "<p>Here is a vectorized method. The actual logic is close to your own solution.</p>\n\n<pre><code>n,d = (np.bincount(ind,x,a.size) for x in (b,None))\nvalid = d!=0\nnp.copyto(a,np.divide(n,d,where=valid),where=valid)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1567648271, "creation_date": 1567648271, "answer_id": 57797462, "question_id": 57796187, "link": "https://stackoverflow.com/questions/57796187/how-to-assign-values-to-given-indices-to-an-array-and-average-on-repeated-indice/57797462#57797462", "title": "How to assign values to given indices to an array and average on repeated indices?", "body": "<pre><code>In [56]: a = np.zeros(5) \n    ...: hit = np.zeros_like(a) \n    ...: for i in range(ind.size): \n    ...:     hit[ind[i]] += 1 \n    ...:     a[ind[i]] += b[i] \n\nIn [57]: a                                                                                                   \nOut[57]: array([0., 5., 4., 5., 0.])\nIn [58]: hit                                                                                                 \nOut[58]: array([0., 2., 1., 1., 0.])\n</code></pre>\n\n<p>The mention of duplicate indices brings to mind the <code>.at</code> ufunc method:</p>\n\n<pre><code>In [59]: a = np.zeros(5)                                                                                     \nIn [60]: a = np.zeros(5) \n    ...: hit = np.zeros_like(a) \n    ...: np.add.at(a,ind,b) \n    ...: np.add.at(hit,ind,1)                                                                                                      \nIn [61]: a                                                                                                   \nOut[61]: array([0., 5., 4., 5., 0.])\nIn [62]: hit                                                                                                 \nOut[62]: array([0., 2., 1., 1., 0.])\n</code></pre>\n\n<p>This isn't quite as fast as <code>a[ind]=b</code>, but faster than your loop.</p>\n\n<p><code>np.bincount</code> might well be better for this task, but this <code>add.at</code> is worth knowing and testing.</p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.at.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.at.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "is_accepted": false, "score": 0, "last_activity_date": 1567655283, "creation_date": 1567655283, "answer_id": 57798162, "question_id": 57796187, "link": "https://stackoverflow.com/questions/57796187/how-to-assign-values-to-given-indices-to-an-array-and-average-on-repeated-indice/57798162#57798162", "title": "How to assign values to given indices to an array and average on repeated indices?", "body": "<p>This might not necessarily be cleaner or faster, but here's an alternative that I think is easy to read:</p>\n\n<pre><code>a = [[] for _ in range(5)]\nfor i, x in zip(ind, b):\n    a[i].append(x)\n[np.mean(x) if len(x) else 0 for x in a]\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7753650, "user_type": "registered", "profile_image": "https://graph.facebook.com/451683121852206/picture?type=large", "display_name": "Zi-ang Yan", "link": "https://stackoverflow.com/users/7753650/zi-ang-yan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1567655283, "creation_date": 1567634769, "question_id": 57796187, "link": "https://stackoverflow.com/questions/57796187/how-to-assign-values-to-given-indices-to-an-array-and-average-on-repeated-indice", "title": "How to assign values to given indices to an array and average on repeated indices?", "body": "<p>Is there a neat way to assign values to given indices in an array, and average values in repeated indices?\nFor example:</p>\n\n<pre><code>a = np.array([0, 0, 0, 0, 0])\nind = np.array([1, 1, 2, 3])\nb = np.array([2, 3, 4, 5])\n</code></pre>\n\n<p>and I want to assign values in array b to array a at corresponding indices indicated in 'ind', and a[1] should be average of 2 and 3.</p>\n\n<p>I can try a for-loop:</p>\n\n<pre><code>hit = np.zeros_like(a)\nfor i in range(ind.size):\n    hit[ind[i]] += 1\n    a[ind[i]] += b[i]\na = a / hit   \n</code></pre>\n\n<p>But this code looks dirty. Is there any better way to do the job?</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1567635056, "last_edit_date": 1567635056, "creation_date": 1567634649, "answer_id": 57796164, "question_id": 57796125, "link": "https://stackoverflow.com/questions/57796125/remove-last-digit-from-string-depending-on-length/57796164#57796164", "title": "Remove last digit from String depending on length", "body": "<p>You can filter first on the string length:</p>\n\n<pre><code>condition = df[4].astype(str).str.len() &gt; 5\ndf.loc[condition, 4]=df.loc[condition, 4].astype(str).str[:-1]\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; df\n           4\n0          1\n1         11\n2        111\n3       1111\n4      11111\n5     111111\n6    1111111\n7   11111111\n8  111111111\n&gt;&gt;&gt; condition = df[4].astype(str).str.len() &gt; 5\n&gt;&gt;&gt; df.loc[condition, 4]=df.loc[condition, 4].astype(str).str[:-1]\n&gt;&gt;&gt; df\n          4\n0         1\n1        11\n2       111\n3      1111\n4     11111\n5     11111\n6    111111\n7   1111111\n8  11111111\n</code></pre>\n\n<p>If these are natural integers, it is however more efficient to divide by 10:</p>\n\n<pre><code>condition = df[4].astype(str).str.len() &gt; 5\ndf.loc[condition, 4]=df.loc[condition, 4] // 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11932640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xy8SvDafCDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdgv3NWF7UAyAEfuPTLppqMCxdeUg/photo.jpg?sz=128", "display_name": "abdo elrhman", "link": "https://stackoverflow.com/users/11932640/abdo-elrhman"}, "is_accepted": false, "score": -1, "last_activity_date": 1567634930, "creation_date": 1567634930, "answer_id": 57796209, "question_id": 57796125, "link": "https://stackoverflow.com/questions/57796125/remove-last-digit-from-string-depending-on-length/57796209#57796209", "title": "Remove last digit from String depending on length", "body": "<p>cause [-1]removes last numbers or change number to -1 \ntry <code>str df[4]=-1</code></p>\n"}, {"tags": [], "owner": {"reputation": 416, "user_id": 7204688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsRaS.jpg?s=128&g=1", "display_name": "Felix Quehl", "link": "https://stackoverflow.com/users/7204688/felix-quehl"}, "is_accepted": false, "score": 0, "last_activity_date": 1567851859, "last_edit_date": 1567851859, "creation_date": 1567677206, "answer_id": 57802859, "question_id": 57796125, "link": "https://stackoverflow.com/questions/57796125/remove-last-digit-from-string-depending-on-length/57802859#57802859", "title": "Remove last digit from String depending on length", "body": "<h1>Accessing Elements of a Collection</h1>\n\n<pre><code>&gt;&gt;&gt; x = \"123456\"\n\n# get element at index from start\n&gt;&gt;&gt; x[0]\n'1'\n\n# get element at index from end\n&gt;&gt;&gt; x[-1]\n'6'\n\n# get range of elements from n-index to m-index\n&gt;&gt;&gt; x[0:3]\n'123'\n&gt;&gt;&gt; x[1:-2]\n'234'\n&gt;&gt;&gt; x[-4:-2]\n'34'\n\n# get range from/to index with open end/start\n&gt;&gt;&gt; x[:-2]\n'1234'\n&gt;&gt;&gt; x[4:]\n'56'\n\n</code></pre>\n\n<h1>List Comprehension Syntax</h1>\n\n<p>I haven't see the <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">pythons list comprehension syntax</a> which really cool and easy. </p>\n\n<pre><code># input data frame with variable string length 1 to n\ndf = [\n    'a',\n    'ab',\n    'abc',\n    'abcd',\n    'abcdf',\n    'abcdfg',\n    'abcdfgh',\n    'abcdfghi',\n    'abcdfghij',\n    'abcdfghijk',\n    'abcdfghijkl',\n    'abcdfghijklm'\n]\n\n# using list comprehension syntax: [element for element in collection]\ndf_new = [\n    # short hand if syntax: value_a if True else value_b\n    r if len(r) &lt;= 5 else r[0:5] \n    for r in df \n]\n</code></pre>\n\n<p>Now <code>df_new</code> contains only string up to a length of 5:</p>\n\n<pre><code>[\n 'a',\n 'ab',\n 'abc',\n 'abcd',\n 'abcdf',\n 'abcdf',\n 'abcdf',\n 'abcdf',\n 'abcdf',\n 'abcdf',\n 'abcdf',\n 'abcdf'\n]\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11948485, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I3WUAagC62g/AAAAAAAAAAI/AAAAAAAAmro/36hK5VKwvlA/photo.jpg?sz=128", "display_name": "Sophon", "link": "https://stackoverflow.com/users/11948485/sophon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 57796164, "answer_count": 3, "score": 1, "last_activity_date": 1567851859, "creation_date": 1567634426, "question_id": 57796125, "link": "https://stackoverflow.com/questions/57796125/remove-last-digit-from-string-depending-on-length", "title": "Remove last digit from String depending on length", "body": "<p>I am trying to remove the last digit in the df[4] string if the string is over 5 digits.</p>\n\n<p>I tried adding .str[:-1] to df[4]=df[4].astype(str) this removes the last digit from every string in the dataframe. </p>\n\n<pre><code>df[3]=df[3].astype(str)\ndf[4]=df[4].astype(str).str[:-1]\ndf[5]=df[5].astype(str)\n</code></pre>\n\n<p>I tried several different combinations of if statements but none have worked. \nI'm new to python and pandas so any help is appreciated</p>\n"}, {"tags": ["python", "python-3.x", "pyqtgraph"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567703650, "post_id": 57796096, "comment_id": 102051873, "body": "Instead of publishing the solution in your publication it is best that you publish an answer, and that you mark it as correct in 2 days, that is the way to do it here."}], "answers": [{"comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1567638798, "post_id": 57796530, "comment_id": 102026195, "body": "From what I understood the OP wants to fill in color the grids, not the window."}, {"owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567643938, "post_id": 57796530, "comment_id": 102027090, "body": "@eyllanesc, I think you&#39;re right. From the docs it looks like there is no way to fill in the individual facets."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567644066, "post_id": 57796530, "comment_id": 102027120, "body": "Exactly, for that reason the OP is asking that question"}, {"owner": {"reputation": 677, "user_id": 7422287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cdec3381e5e2b304be75816e1923ffc2?s=128&d=identicon&r=PG&f=1", "display_name": "New2coding", "link": "https://stackoverflow.com/users/7422287/new2coding"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567668212, "post_id": 57796530, "comment_id": 102032899, "body": "@eyllanesc, you are right, my aim is to fill just the grid with custom color, I will have to implement paint() or some other method on my own, that&#39;s why I asked for help here."}], "tags": [], "owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "is_accepted": false, "score": 0, "last_activity_date": 1567638192, "creation_date": 1567638192, "answer_id": 57796530, "question_id": 57796096, "link": "https://stackoverflow.com/questions/57796096/how-to-set-color-of-area-surrounded-by-glgriditem-in-pyqtgraph/57796530#57796530", "title": "How to set color of area surrounded by GLGridItem in PyQtgraph", "body": "<p>Use <a href=\"http://pyqtgraph.org/documentation/3dgraphics/glviewwidget.html\" rel=\"nofollow noreferrer\">setBackgroundColor</a>: </p>\n\n<pre><code>import pyqtgraph.opengl as gl\nimport numpy as np\nimport itertools\n\nfrom PyQt5.QtWidgets import (QApplication, QMainWindow)\nfrom PyQt5 import QtGui\n\napp = QApplication.instance()\nif app is None:\n    app = QtGui.QApplication([])\nw = gl.GLViewWidget()\nw.setBackgroundColor('b')\nw.opts['distance'] = 20\nw.show()\n\ngrid = gl.GLGridItem(size = QtGui.QVector3D(3,3,1), color=(1,1,0,1))\nw.addItem(grid)\n\nif __name__ == '__main__':\n    import sys\n    if (sys.flags.interactive != 1) or not hasattr(QtCore, 'PYQT_VERSION'):\n        QtGui.QApplication.instance().exec_()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Dae3M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dae3M.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also, for future questions, snippets are strongly discouraged in favor of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimum, Reproducible Example</a> (or MRE). I've added some extra imports to make the code run.</p>\n"}], "owner": {"reputation": 677, "user_id": 7422287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cdec3381e5e2b304be75816e1923ffc2?s=128&d=identicon&r=PG&f=1", "display_name": "New2coding", "link": "https://stackoverflow.com/users/7422287/new2coding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1567703482, "creation_date": 1567634188, "last_edit_date": 1567703482, "question_id": 57796096, "link": "https://stackoverflow.com/questions/57796096/how-to-set-color-of-area-surrounded-by-glgriditem-in-pyqtgraph", "title": "How to set color of area surrounded by GLGridItem in PyQtgraph", "body": "<p>After some changes of the GLGridItem.py I am able to set its color but still fail to fill the area surrounded with the grid with custom color.</p>\n\n<p>This is the snipped of my code:</p>\n\n<pre><code>from pyqtgraph.Qt import QtCore, QtGui\nimport pyqtgraph.opengl as gl\nimport numpy as np\n\n\napp = QtGui.QApplication.instance()\nif app is None:\n    app = QtGui.QApplication([])\nw = gl.GLViewWidget()\nw.opts['distance'] = 20\nw.show()\n\ngrid = gl.GLGridItem(size = QtGui.QVector3D(3,3,1), color=(1,1,0,1))\nw.addItem(grid)\n\nif __name__ == '__main__':\n    import sys\n    if (sys.flags.interactive != 1) or not hasattr(QtCore, 'PYQT_VERSION'):\n        QtGui.QApplication.instance().exec_()\n</code></pre>\n\n<p>It currently draws following grid:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0TbYp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0TbYp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any idea how to achieve this (for e.g. the area surrounded by the grid should be blue)?</p>\n\n<p>Edit:</p>\n\n<p>If one is happy with using zero-height GLBarGraphItem() for drawing area of given color, the following might be a way to go:</p>\n\n<pre><code>from pyqtgraph.Qt import QtCore, QtGui\nimport pyqtgraph.opengl as gl\nimport numpy as np\nimport itertools\n\napp = QtGui.QApplication.instance()\nif app is None:\n    app = QtGui.QApplication([])\nw = gl.GLViewWidget()\nw.opts['distance'] = 20\nw.show()\n\nsize, pos = np.empty((1,1,3)), np.empty((1,1,3))\nsize[...,0:2], pos[...,0:2] = 3, -1.5\nsize[...,2], pos[...,2] = 0, 0\n\narea = gl.GLBarGraphItem(pos, size)\narea.setColor((0., 0., 1., 1.))\n\ngrid = gl.GLGridItem(size = QtGui.QVector3D(3,3,1), color=(1,1,0,1))\nw.addItem(grid)\nw.addItem(area)\n\nif __name__ == '__main__':\n    import sys\n    if (sys.flags.interactive != 1) or not hasattr(QtCore, 'PYQT_VERSION'):\n        QtGui.QApplication.instance().exec_()\n</code></pre>\n\n<p>It actually produces the following outcome:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3XdhS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3XdhS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "time-series", "statsmodels"], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 9092889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdcfa1328c907f18e402e88ad3a726ae?s=128&d=identicon&r=PG&f=1", "display_name": "KWx", "link": "https://stackoverflow.com/users/9092889/kwx"}, "is_accepted": true, "score": 0, "last_activity_date": 1567642414, "creation_date": 1567642414, "answer_id": 57796960, "question_id": 57796041, "link": "https://stackoverflow.com/questions/57796041/hourly-time-series-forecast/57796960#57796960", "title": "Hourly time series forecast", "body": "<p>You are creating a correct index on a dataframe called <em>ts_data</em>, but you are fitting your model on a different dataframe called <em>train</em>.</p>\n\n<p>Try looking at the index of the <em>train</em> dataframe and see if it is in the right format.</p>\n"}], "owner": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 57796960, "answer_count": 1, "score": 0, "last_activity_date": 1567642414, "creation_date": 1567633936, "question_id": 57796041, "link": "https://stackoverflow.com/questions/57796041/hourly-time-series-forecast", "title": "Hourly time series forecast", "body": "<p>I'm taking a course on <a href=\"https://www.udemy.com/python-for-time-series-data-analysis/learn/lecture/13773072#overview\" rel=\"nofollow noreferrer\">Udemy</a> to learn a little bit of Time Series prediction and I'm trying to run this piece of code, with hourly data from one year:</p>\n\n<pre><code>from statsmodels.tsa.holtwinters import ExponentialSmoothing\n\nmodel = ExponentialSmoothing(train['count'],trend='add',seasonal='add',seasonal_periods=12).fit()\n</code></pre>\n\n<p>But once I run this:</p>\n\n<pre><code>predictions = model.forecast(24) \n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>ValueWarning: No supported index is available. Prediction results will be given with an integer index beginning at <code>start</code>.\n    ValueWarning)</p>\n</blockquote>\n\n<p>Which makes me hard to plot the data for comparison, since the index type mismatches between the test data and prediction. </p>\n\n<p>This is how I create the index:</p>\n\n<pre><code>idx = pd.date_range(ts_data.index.min(), ts_data.index.max(), freq='H')\nts_data = ts_data.reindex(idx, fill_value=0)\nts_data.sort_index(inplace=True)\nts_data.head(10)\n\n    count\ndate    \n2018-11-19 02:00:00 70.0\n2018-11-19 03:00:00 84.0\n2018-11-19 04:00:00 98.0\n2018-11-19 05:00:00 89.0\n2018-11-19 06:00:00 87.0\n2018-11-19 07:00:00 76.0\n2018-11-19 08:00:00 58.0\n2018-11-19 09:00:00 36.0\n2018-11-19 10:00:00 38.0\n2018-11-19 11:00:00 17.0\n</code></pre>\n\n<p>I wonder why the forecast method doesn't return the proper index.</p>\n"}, {"tags": ["python", "sockets", "bluetooth", "pybluez"], "comments": [{"owner": {"reputation": 22165, "user_id": 784318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df367a962f1cc17d3d8b3a1c304d5581?s=128&d=identicon&r=PG", "display_name": "Besi", "link": "https://stackoverflow.com/users/784318/besi"}, "edited": false, "score": 0, "creation_date": 1578759681, "post_id": 57795971, "comment_id": 105547359, "body": "I am facing this problem too, have you had some luck resolving this issue. I found another <a href=\"https://www.spinics.net/lists/linux-bluetooth/msg14798.html\" rel=\"nofollow noreferrer\">unresolved thread</a>"}, {"owner": {"reputation": 41, "user_id": 6843477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dde42cc3004695c3b51d4ffee92679e?s=128&d=identicon&r=PG&f=1", "display_name": "David Martins", "link": "https://stackoverflow.com/users/6843477/david-martins"}, "reply_to_user": {"reputation": 22165, "user_id": 784318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df367a962f1cc17d3d8b3a1c304d5581?s=128&d=identicon&r=PG", "display_name": "Besi", "link": "https://stackoverflow.com/users/784318/besi"}, "edited": false, "score": 0, "creation_date": 1579174534, "post_id": 57795971, "comment_id": 105681348, "body": "I ended up giving up on this issue. I do believe it is a problem with the rpi bluetooth module itself (I have heard that it is giving some problems). This kind of problem does not occur with other computers..."}, {"owner": {"reputation": 22165, "user_id": 784318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df367a962f1cc17d3d8b3a1c304d5581?s=128&d=identicon&r=PG", "display_name": "Besi", "link": "https://stackoverflow.com/users/784318/besi"}, "edited": false, "score": 0, "creation_date": 1579479664, "post_id": 57795971, "comment_id": 105769511, "body": "You could try updating bluez to a newer version. However I ended up using a UART Bluetooth LE profile for exchanging data between the pi and an iPhone App. <a href=\"https://scribles.net/updating-bluez-on-raspberry-pi-from-5-43-to-5-50/\" rel=\"nofollow noreferrer\">scribles.net/updating-bluez-on-raspberry-pi-from-5-43-to-5-5&zwnj;&#8203;0</a>"}], "owner": {"reputation": 41, "user_id": 6843477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dde42cc3004695c3b51d4ffee92679e?s=128&d=identicon&r=PG&f=1", "display_name": "David Martins", "link": "https://stackoverflow.com/users/6843477/david-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567633520, "creation_date": 1567633520, "question_id": 57795971, "link": "https://stackoverflow.com/questions/57795971/after-accepting-a-connection-my-stream-socket-gives-the-error-103-after-just-30", "title": "After accepting a connection, my STREAM socket gives the error 103 after just 30 seconds", "body": "<p>I am trying the develop a program (in python 3) in which it is possible to transfer a certain amount of data from a computer to another with bluetooth (using pybluez). After a client connects to the device, for some reason, the server side of the application raises a BluetoothError exception after around 30 seconds. It raises the following exception:</p>\n\n<p>bluetooth.btcommon.BluetoothError: (103, 'Software caused connection abort')</p>\n\n<p>I thought that I could be something in my code, so I decided to do a simpler version, in order to test it. I got the exact same error.</p>\n\n<p>The following code is the simpler version I talked about previously.</p>\n\n<p>This is the server side</p>\n\n<pre><code>from bluetooth import *\n\nx = BluetoothSocket(RFCOMM)\nprint(\"bind\")\nx.bind((\"\", 1))\nprint(\"listen\")\nx.listen(1)\nprint(\"accepting\")\nconn, _ = x.accept()\nprint(\"reading\")\nprint(conn.recv(256).decode('utf-8'))\nprint(\"closing\")\nconn.close()\nx.close()\n</code></pre>\n\n<p>This is the client side</p>\n\n<pre><code>from bluetooth import * \nx = BluetoothSocket(RFCOMM)\nx.connect((&lt;addr&gt;,1))\n</code></pre>\n\n<p>NOTE: the client side is not executed from a file, but writen directly in the python shell</p>\n\n<p>After putting the server side script running on a regular computer and the client side script on a raspberry pi 3 with raspbian I get the BluetoothError after 30 seconds. The exception is raised on the line:</p>\n\n<pre><code>print(conn.recv(256).decode('utf-8'))\n</code></pre>\n\n<p>During this time I am able to send messages from one side to another. No matter what I do, after 30 seconds, the exception is raised.</p>\n\n<p>I have no idea of what is happening. I am going to try with another computer with the client script, but it is getting complicated (windows, am I right :p).</p>\n"}, {"tags": ["python", "pandas", "directory", "jupyter-notebook", "save"], "comments": [{"owner": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "edited": false, "score": 0, "creation_date": 1567633290, "post_id": 57795923, "comment_id": 102025059, "body": "What have you tried? Try giving an example of code you have tried and why it isn&#39;t working."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567635781, "post_id": 57795923, "comment_id": 102025588, "body": "You are using Python 3 (which you <i>should</i> be using) but your code is written for Python 2. <code>raw_input</code> doesn&#39;t exist in Python 3, it is just simply <code>input</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567635836, "post_id": 57795923, "comment_id": 102025603, "body": "Although actually, not sure why you would use <code>input</code>/<code>raw_input</code>, that&#39;s for taking user input. It looks like you just want those strings..."}, {"owner": {"reputation": 9, "user_id": 12022005, "user_type": "registered", "profile_image": "https://graph.facebook.com/2406505169387439/picture?type=large", "display_name": "Charlotte Hallett", "link": "https://stackoverflow.com/users/12022005/charlotte-hallett"}, "edited": false, "score": 0, "creation_date": 1567640385, "post_id": 57795923, "comment_id": 102026475, "body": "Thank you for your help! This code ended up doing what I needed to do:  export_csv = df.to_csv (r&#39;C:\\Users\\Ron\\Desktop\\export_dataframe.csv&#39;, index = None, header=True) #Don&#39;t forget to add &#39;.csv&#39; at the end of the path"}], "answers": [{"tags": [], "owner": {"reputation": 556, "user_id": 10671246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RGCjZMD-Fno/AAAAAAAAAAI/AAAAAAAAPdQ/adV6fj4Rs8U/photo.jpg?sz=128", "display_name": "Prachiti Prakash Prabhu", "link": "https://stackoverflow.com/users/10671246/prachiti-prakash-prabhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1567637880, "creation_date": 1567637880, "answer_id": 57796506, "question_id": 57795923, "link": "https://stackoverflow.com/questions/57795923/how-to-save-csv-file-to-a-directory-with-a-new-file-name/57796506#57796506", "title": "How to save .csv file to a directory with a new file name", "body": "<p>Just remove the <code>raw_input</code></p>\n\n<pre><code>import os.path\n\nsave_path = '/Users/ccheddar/Class700/Homework/Data/Working'\n\nname_of_file = \"Cityline_Calls_for_Service.csv\"\n\ncompleteName = os.path.join(save_path, name_of_file) \n\nfile1 = open(completeName, \"w\")\n\ntoFile = \"syr_service.csv\"\n\nfile1.write(toFile)\n\nfile1.close()\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12022005, "user_type": "registered", "profile_image": "https://graph.facebook.com/2406505169387439/picture?type=large", "display_name": "Charlotte Hallett", "link": "https://stackoverflow.com/users/12022005/charlotte-hallett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1567637880, "creation_date": 1567633211, "last_edit_date": 1567635750, "question_id": 57795923, "link": "https://stackoverflow.com/questions/57795923/how-to-save-csv-file-to-a-directory-with-a-new-file-name", "title": "How to save .csv file to a directory with a new file name", "body": "<p>I am in Jupiter Lab working with a notebook. I need to use pandas/python code to save a .csv file to my computer under a specific directory, with a new name. </p>\n\n<p>Problem is as follows: \nSave the data in your 'working' directory and name it \"Data Problem 1\"</p>\n\n<p>I've tried numerous codes but this is one that seems like it should work. </p>\n\n<pre><code>import os.path\n\nsave_path = '/Users/ccheddar/Class700/Homework/Data/Working'\n\nname_of_file = raw_input(\"Cityline_Calls_for_Service.csv\")\n\ncompleteName = os.path.join(save_path, name_of_file) \n\nfile1 = open(completeName, \"w\")\n\ntoFile = raw_input(\"syr_service.csv\")\n\nfile1.write(toFile)\n\nfile1.close()\n</code></pre>\n\n<p>I keep getting the error message: </p>\n\n<pre><code>NameError                                 Traceback (most recent call last)\n&lt;ipython-input-40-f34c54969f7c&gt; in &lt;module&gt;\n      3 save_path = '/Users/ccheddar/Class700/Homework/Data/Working'\n      4 \n----&gt; 5 name_of_file = raw_input(\"Cityline_Calls_for_Service.csv\")\n      6 \n      7 completeName = os.path.join(save_path, name_of_file)\n\nNameError: name 'raw_input' is not defined\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "dns", "urllib", "urllib3"], "comments": [{"owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "edited": false, "score": 0, "creation_date": 1567670188, "post_id": 57795877, "comment_id": 102033840, "body": "Can you resolve (<code>dig</code>/<code>host</code>) the hostname used in your script? Is that actual backtrace, because it appears your <code>requests.get()</code> call is directed to <code>someserver.com</code> which sounds possible wrong / example code?"}, {"owner": {"reputation": 398, "user_id": 556076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32925c5101a9310ee7dc13859ca4e60b?s=128&d=identicon&r=PG", "display_name": "JuanXarg", "link": "https://stackoverflow.com/users/556076/juanxarg"}, "reply_to_user": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "edited": false, "score": 0, "creation_date": 1567705066, "post_id": 57795877, "comment_id": 102052449, "body": "Indeed it is example code. My actual code uses an internal domain name that I cannot publish here. But yes, dig and nslookup can resolve the name."}], "owner": {"reputation": 398, "user_id": 556076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32925c5101a9310ee7dc13859ca4e60b?s=128&d=identicon&r=PG", "display_name": "JuanXarg", "link": "https://stackoverflow.com/users/556076/juanxarg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1567637543, "creation_date": 1567632887, "last_edit_date": 1567637543, "question_id": 57795877, "link": "https://stackoverflow.com/questions/57795877/statically-built-python-code-cannot-resolve-dns-names", "title": "Statically built python code cannot resolve DNS names", "body": "<p>I'm trying to deploy code to a server to which I don't have root access. So the solution I was thinking was to deploy using <a href=\"https://www.pyinstaller.org/\" rel=\"nofollow noreferrer\">pyinstaller</a> and <a href=\"https://github.com/JonathonReinhart/staticx\" rel=\"nofollow noreferrer\">staticx</a>.</p>\n\n<p>My code runs in python 3.7, in a nutshell, does something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nresponse = requests.get('http://example.com/api/action')\n# Do something with the response\n</code></pre>\n\n<p>When I run it in my environment, even after \"building\" with <code>pyinstaller</code> and <code>staticx</code>, it works flawlessly.</p>\n\n<p>However, when I try to deploy it (the server is running Red Hat Enterprise Linux Server release 7.4, which does not have python 3), I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"site-packages/urllib3/connection.py\", line 160, in _new_conn\n  File \"site-packages/urllib3/util/connection.py\", line 57, in create_connection\n  File \"socket.py\", line 748, in getaddrinfo\nsocket.gaierror: [Errno -2] Name or service not known\n\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"site-packages/urllib3/connectionpool.py\", line 603, in urlopen\n  File \"site-packages/urllib3/connectionpool.py\", line 355, in _make_request\n  File \"http/client.py\", line 1229, in request\n  File \"http/client.py\", line 1275, in _send_request\n  File \"http/client.py\", line 1224, in endheaders\n  File \"http/client.py\", line 1016, in _send_output\n  File \"http/client.py\", line 956, in send\n  File \"site-packages/urllib3/connection.py\", line 183, in connect\n  File \"site-packages/urllib3/connection.py\", line 169, in _new_conn\nurllib3.exceptions.NewConnectionError: &lt;urllib3.connection.HTTPConnection object at 0x7f912ca96f28&gt;: Failed to establish a new connection: [Errno -2] Name or service not known\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"site-packages/requests/adapters.py\", line 449, in send\n  File \"site-packages/urllib3/connectionpool.py\", line 641, in urlopen\n  File \"site-packages/urllib3/util/retry.py\", line 399, in increment\nurllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='someserver.com', port=80): Max retries exceeded with url: /api/action (Caused by NewConnectionError('&lt;urllib3.connection.HTTPConnection object at 0x7f912ca96f28&gt;: Failed to establish a new connection: [Errno -2] Name or service not known'))\n</code></pre>\n\n<p>Everything works if I use IP addresses instead of domains. Unfortunately, it's not a possibility because I have to hit an proxy that uses hosts. Also IP addresses may change in the future.</p>\n\n<p>The server resolves names perfectly fine if I use <code>nslookup</code> or <code>ping</code>.</p>\n\n<p>Any ideas why this could be happening? Any alternatives on how I could deploy my code in a way that it works in the remote server may also be a valid answer. Note however:</p>\n\n<ul>\n<li>I have no root access and requesting the installation of python3, any libs or any other package such as docker, etc would most likely be rejected by my customer</li>\n<li>The server can resolve external names, such as <code>google.com</code> but does not have access to the outer internet (the code is ment to work on internal servers, with internal DNS such as <code>someserver.mycustomer.example</code>)</li>\n</ul>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "edited": false, "score": 0, "creation_date": 1567633052, "post_id": 57795867, "comment_id": 102025005, "body": "Can you check the contents of <code>soup</code> to verify its the html you are expecting?"}, {"owner": {"reputation": 37, "user_id": 11986342, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H1YWjbVE21U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdT-0s_EPKXsQz0iBEb4CrQRQft3g/photo.jpg?sz=128", "display_name": "Rino Sula", "link": "https://stackoverflow.com/users/11986342/rino-sula"}, "reply_to_user": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "edited": false, "score": 0, "creation_date": 1567633361, "post_id": 57795867, "comment_id": 102025085, "body": "Yeah, i checked it is the html i am expecting"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1567633446, "post_id": 57795867, "comment_id": 102025102, "body": "Please <a href=\"https://stackoverflow.com/posts/57795867/edit\">edit</a> your question and add the fill traceback from the error to it."}, {"owner": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "edited": false, "score": 0, "creation_date": 1567633457, "post_id": 57795867, "comment_id": 102025105, "body": "Based on the error you have, it means that <code>soup</code> is unable to find an element with an id equal to &quot;priceblock_ourprice&quot;"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10732646"}, "is_accepted": false, "score": 0, "last_activity_date": 1567634476, "creation_date": 1567634476, "answer_id": 57796137, "question_id": 57795867, "link": "https://stackoverflow.com/questions/57795867/amazon-price-web-scraping-problem-with-python-requests-and-bs4/57796137#57796137", "title": "amazon price web scraping problem with python, requests and bs4", "body": "<p>I could not find <code>priceblock_ourprice</code> in the page you are scraping with.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\nurl = \"https://www.amazon.de/Sony-DigitalKamera-Touch-Display-Vollformatsensor-KartenSlots/dp/B07B4L1PQ8/ref=sr_1_3?keywords=sony+a7&amp;qid=1561393494&amp;s=gateway&amp;sr=8-3\"\nheaders = {\"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36\"}\npage = requests.get(url, headers=headers)\nsoup = BeautifulSoup(page.content, 'html.parser')\ntitle = soup.find('span', {'id': 'productTitle'}).text\nprint(title.strip())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 11986342, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H1YWjbVE21U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdT-0s_EPKXsQz0iBEb4CrQRQft3g/photo.jpg?sz=128", "display_name": "Rino Sula", "link": "https://stackoverflow.com/users/11986342/rino-sula"}, "edited": false, "score": 0, "creation_date": 1567635893, "post_id": 57796273, "comment_id": 102025617, "body": "Should i post the entire code , maybe it is another problem"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 37, "user_id": 11986342, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H1YWjbVE21U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdT-0s_EPKXsQz0iBEb4CrQRQft3g/photo.jpg?sz=128", "display_name": "Rino Sula", "link": "https://stackoverflow.com/users/11986342/rino-sula"}, "edited": false, "score": 0, "creation_date": 1567635902, "post_id": 57796273, "comment_id": 102025621, "body": "But I have just run on my laptop and it returns me above output. Check if you are blocking by firewall or something."}], "tags": [], "owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "is_accepted": false, "score": 0, "last_activity_date": 1567635490, "creation_date": 1567635490, "answer_id": 57796273, "question_id": 57795867, "link": "https://stackoverflow.com/questions/57795867/amazon-price-web-scraping-problem-with-python-requests-and-bs4/57796273#57796273", "title": "amazon price web scraping problem with python, requests and bs4", "body": "<p>Just change the user-agent to Mozilla only and try the below code.</p>\n\n<pre><code>url=\"https://www.amazon.de/Sony-DigitalKamera-Touch-Display-Vollformatsensor-KartenSlots/dp/B07B4L1PQ8/ref=sr_1_3?keywords=sony+a7&amp;qid=1561393494&amp;s=gateway&amp;sr=8-3\"\nheaders={\"User-Agent\":\"Mozilla/5.0\"}\npage=requests.get(url,headers=headers)\nsoup=BeautifulSoup(page.content,'html.parser')\ntitle=soup.find(id=\"productTitle\").get_text()\nprice=soup.find(id=\"priceblock_ourprice\").get_text()\nprice=price.replace(',','')\nconverted_price=float(price[0:6])\nprint(converted_price)\nprint(title.strip())\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>1.9213\nSony Alpha 7M3 E-Mount Vollformat Digitalkamera ILCE-7M3 (24,2 Megapixel, 7,6cm (3 Zoll) Touch-Display, Exmor R CMOS Vollformatsensor, XGA OLED Sucher, 2 Kartenslots, nur Geh\u00e4use) schwarz\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11986342, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H1YWjbVE21U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdT-0s_EPKXsQz0iBEb4CrQRQft3g/photo.jpg?sz=128", "display_name": "Rino Sula", "link": "https://stackoverflow.com/users/11986342/rino-sula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567635490, "creation_date": 1567632774, "last_edit_date": 1567633121, "question_id": 57795867, "link": "https://stackoverflow.com/questions/57795867/amazon-price-web-scraping-problem-with-python-requests-and-bs4", "title": "amazon price web scraping problem with python, requests and bs4", "body": "<p>So I have written a piece of code that gets information about a product in amazon and I have made it possible to get the price and set a condition.If the condition of the price is met I will send a message using gmail to myself.The problem is when I use the code to get the price it says</p>\n\n<p><code>'NoneType' object has no attribute 'get_text'</code></p>\n\n<p>This is my code. Not the full part of it, but only gathering information about the product:</p>\n\n<pre><code>url=\"https://www.amazon.de/Sony-DigitalKamera-Touch-Display-Vollformatsensor-KartenSlots/dp/B07B4L1PQ8/ref=sr_1_3?keywords=sony+a7&amp;qid=1561393494&amp;s=gateway&amp;sr=8-3\"\nheaders={\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36\"}\npage=requests.get(url,headers=headers)\nsoup=BeautifulSoup(page.content,'html.parser')\ntitle=soup.find(id=\"productTitle\").get_text()\nprice=soup.find(id=\"priceblock_ourprice\").get_text()\nconverted_price=float(price[0:6])\nprint(converted_price)\nprint(title.strip())\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "pytorch", "linear-regression"], "answers": [{"comments": [{"owner": {"reputation": 746, "user_id": 11520760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e8299df2e833690cfd0a9af7029dcb?s=128&d=identicon&r=PG&f=1", "display_name": "basilisk", "link": "https://stackoverflow.com/users/11520760/basilisk"}, "edited": false, "score": 0, "creation_date": 1567676417, "post_id": 57797710, "comment_id": 102037085, "body": "it&#39;s wierd, I tried yesterday to minimize the learning rate but I didn&#39;t get a good result too, and now it works! can you tell me what do you specifically mean with first order optimizer ?"}, {"owner": {"reputation": 314, "user_id": 4809029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06b000eeff305776cda24110eb1166e3?s=128&d=identicon&r=PG&f=1", "display_name": "ostrichgroomer", "link": "https://stackoverflow.com/users/4809029/ostrichgroomer"}, "reply_to_user": {"reputation": 746, "user_id": 11520760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e8299df2e833690cfd0a9af7029dcb?s=128&d=identicon&r=PG&f=1", "display_name": "basilisk", "link": "https://stackoverflow.com/users/11520760/basilisk"}, "edited": false, "score": 0, "creation_date": 1567695876, "post_id": 57797710, "comment_id": 102048214, "body": "A first order optimizer like gradient descent only uses first order derivative information when taking a step. You compare this to a second order solver like newton&#39;s method, which calculates the hessian. The latter takes better steps but scales more poorly to high dimensional spaces. Consider this link, for example: <a href=\"https://math.stackexchange.com/questions/2201384/what-is-the-definition-of-a-first-order-method\" title=\"what is the definition of a first order method\">math.stackexchange.com/questions/2201384/&hellip;</a>"}], "tags": [], "owner": {"reputation": 314, "user_id": 4809029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06b000eeff305776cda24110eb1166e3?s=128&d=identicon&r=PG&f=1", "display_name": "ostrichgroomer", "link": "https://stackoverflow.com/users/4809029/ostrichgroomer"}, "is_accepted": true, "score": 0, "last_activity_date": 1567650698, "creation_date": 1567650698, "answer_id": 57797710, "question_id": 57795861, "link": "https://stackoverflow.com/questions/57795861/why-gradient-descent-doesnt-work-as-expected-with-pytorch/57797710#57797710", "title": "why Gradient Descent doesn&#39;t work as expected with pytorch", "body": "<p>Your learning rate is too large. The model takes a few steps in the right direction, but it can't land on an actually good minimizer and henceforth zigzags around it. If you try <code>lr=0.001</code> instead,  your performance will be much better. This is why it's often useful to decay your learning rate over time when using first order optimizers.</p>\n"}], "owner": {"reputation": 746, "user_id": 11520760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e8299df2e833690cfd0a9af7029dcb?s=128&d=identicon&r=PG&f=1", "display_name": "basilisk", "link": "https://stackoverflow.com/users/11520760/basilisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 57797710, "answer_count": 1, "score": 0, "last_activity_date": 1567650698, "creation_date": 1567632715, "question_id": 57795861, "link": "https://stackoverflow.com/questions/57795861/why-gradient-descent-doesnt-work-as-expected-with-pytorch", "title": "why Gradient Descent doesn&#39;t work as expected with pytorch", "body": "<p>so I'm starting with Pytorch and tried to start with an easy Linear Regression Example. Actually I made an easy Implementation of Linear Regression with Pytorch to calculate the equation 2*x+1 but the loss stay stuck at 120 and there is a Problem with Gradient Descent because it doesn't converge to a small loss value. I don't know why this is happening and it made me crazy because I don't see what's wrong. actually this example should be very easy to solve. this is the Code I'm using</p>\n\n<pre><code>import torch\nimport torch.nn.functional as F\nfrom torch.utils.data import TensorDataset, DataLoader\nimport numpy as np\n\nX = np.array([i for i in np.arange(1, 20)]).reshape(-1, 1)\nX = torch.tensor(X, dtype=torch.float32, requires_grad=True)\ny = np.array([2*i+1 for i in np.arange(1, 20)]).reshape(-1, 1)\ny = torch.tensor(y, dtype=torch.float32, requires_grad=True)\nprint(X.shape, y.shape)\n\nclass LR(torch.nn.Module):\n    def __init__(self, n_features, n_hidden1, n_out):\n        super(LR, self).__init__()\n        self.linear = torch.nn.Linear(n_features, n_hidden1)\n\n        self.predict = torch.nn.Linear(n_hidden1, n_out)\n\n    def forward(self, x):\n        x = F.relu(self.linear(x))\n        x = self.predict(x)\n        return x\n\nmodel = LR(1, 10, 1)\noptimizer = torch.optim.SGD(model.parameters(), lr=0.01)\nloss_fn = torch.nn.MSELoss()\n\ndef train(epochs=100):\n    for e in range(epochs):\n\n        pred = model(X)\n        loss = loss_fn(pred, y)\n        optimizer.zero_grad()\n        loss.backward()\n        optimizer.step()\n        print(f\"epoch: {e} and loss= {loss}\")\n</code></pre>\n\n<p>desired output is a small loss value and that the model train to give a good prediction later.</p>\n"}, {"tags": ["python", "cmake", "setuptools"], "comments": [{"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568127771, "post_id": 57795839, "comment_id": 102171979, "body": "&quot;<i>The directory (simply named after the version of Blender API) has to exist in the same directory as the Python executable.</i>&quot;   Can you expand on the reason why this has to be this way?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "reply_to_user": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568132254, "post_id": 57795839, "comment_id": 102174320, "body": "@sinoroc because the C code that builds into the <code>.pyd</code> module adds the hard-coded path <code>&quot;.&#47;2.79&#47;scripts&#47;modules&quot;</code> to the top of sys.path, and tries to import <code>bpy_types</code> from there, else error. <a href=\"https://github.com/TylerGubala/blenderpy/issues/13#issuecomment-417777002\" rel=\"nofollow noreferrer\">Related</a>"}, {"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568139278, "post_id": 57795839, "comment_id": 102177246, "body": "Oh... Hard-coded, not nice. But, does it look for <code>bpy_types</code> only in this hard coded directory or in the whole <code>sys.path</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "reply_to_user": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568158644, "post_id": 57795839, "comment_id": 102183258, "body": "@sinoroc Fairly sure it&#39;s fixed function technically; Blender uses the <code>GHOST</code> library to find many filesystem paths, but the issue occurs around <a href=\"https://github.com/sobotka/blender/blob/760dbd1cbf56e13b0a827afb6f7784fa46fff9b4/source/blender/python/intern/bpy.c#L397\" rel=\"nofollow noreferrer\">the instantiation of the <code>bpy</code> Python module object in the C runtime code</a>. Instantiation of the types module (who needs to be in the specific scripts directory) occurs <a href=\"https://github.com/sobotka/blender/blob/760dbd1cbf56e13b0a827afb6f7784fa46fff9b4/source/blender/python/intern/bpy.c#L389\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 1, "creation_date": 1568194197, "post_id": 57795839, "comment_id": 102194382, "body": "Alright... I can&#39;t help with the C code, but it feels like the issue has to be solved in the C code and not in the setuptools packaging. Seems weird to me that things are expected to be found there. Anyway, have you tried the <code>data_files</code> option of setuptools? This should allow you to install files directly into <code>sys.prefix</code> which seems to be what you need."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "reply_to_user": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568204579, "post_id": 57795839, "comment_id": 102199744, "body": "@sinroc Allegedly Blender 3 could be a Python module, but that is far, far down the line. I am just trying to support it as extant and document the shortcomings. Thanks for your patience."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "edited": false, "score": 0, "creation_date": 1568203202, "post_id": 57886115, "comment_id": 102198993, "body": "Sorry, but if it&#39;s not <code>wheel</code> compatible it doesn&#39;t help me. I&#39;ve added that to my question. Thanks for your help so far."}, {"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568205884, "post_id": 57886115, "comment_id": 102200519, "body": "I haven&#39;t tried it, but if I read the documentation right, only the absolute paths are incompatible with wheels. Relative paths should be fine. They are relative to <code>sys.prefix</code> and since <code>sys.prefix</code> points usually one level above the Python binary, that should be fine for your use case. Am I missing something here?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "edited": false, "score": 0, "creation_date": 1568207961, "post_id": 57886115, "comment_id": 102201763, "body": "Apologies, I think I was the one missing the point! I&#39;m going to try that and see."}, {"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568208621, "post_id": 57886115, "comment_id": 102202134, "body": "You could start by adding <code>data_files=[(&#39;mydata&#39;, [&#39;setup.py&#39;],)],</code> to your <code>setuptools.setup</code> function call, build a wheel, install it and see if you can find <code>mydata&#47;setup.py</code> somewhere in <code>sys.prefix</code>. In your case the difficult part will be to compute the actual target directory (<code>mydata</code> in my example), it will depend on the platform (Linux, Windows, etc.), if it&#39;s in a virtual environment or not, if it&#39;s a global or local install and so on. Also check what happens on uninstall."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "edited": false, "score": 0, "creation_date": 1568254799, "post_id": 57886115, "comment_id": 102218681, "body": "Oh, I&#39;m not sure that is going to work; since it won&#39;t be consistent even on the same platform (Windows <code>venv</code> different than system install) and the purpose is to supply a <code>wheel</code>"}, {"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1568278688, "post_id": 57886115, "comment_id": 102226453, "body": "True. Have you had the chance to actually try it? Is there any chance that this folder is being looked up in <code>sys.prefix</code> instead of next to Python interpreter binary? Could you eventually provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? If <code>data_files</code> truly isn&#39;t good enough, then I suggest to pack this as <code>package_data</code> and provide a custom <i>post-install</i> script or <i>entry-point</i> clever enough to copy the <code>package_data</code> to the right place, the users should run this once before actually using your package: <a href=\"https://stackoverflow.com/a/24749871/11138259\">stackoverflow.com/a/24749871/11138259</a> - I wouldn&#39;t try to pack everything as <code>setuptools</code> command."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "edited": false, "score": 0, "creation_date": 1568531452, "post_id": 57886115, "comment_id": 102298467, "body": "Judging by the source code of the GHOST library, this <i>may</i> work if I build it as a portable app from <code>cmake</code> but I have yet to attempt this. I&#39;ll see if I have enough time to try this tomarro, thanks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "edited": false, "score": 0, "creation_date": 1568730206, "post_id": 57886115, "comment_id": 102362429, "body": "This is exactly what I will have to do. Thank for your time and apologies that I didn&#39;t see your update soon enough to award you the bounty"}], "tags": [], "owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "is_accepted": true, "score": 0, "last_activity_date": 1568655014, "last_edit_date": 1568655014, "creation_date": 1568194299, "answer_id": 57886115, "question_id": 57795839, "link": "https://stackoverflow.com/questions/57795839/setuptools-eager-resources-to-executable-directory/57886115#57886115", "title": "setuptools &quot;eager_resources&quot; to executable directory", "body": "<p>Maybe try the <a href=\"https://docs.python.org/3/distutils/setupscript.html#installing-additional-files\" rel=\"nofollow noreferrer\"><code>data_files</code> option of <code>distutils</code>/<code>setuptools</code></a>.</p>\n\n<p>You could start by adding <code>data_files=[('mydata', ['setup.py'],)],</code> to your <code>setuptools.setup</code> function call. Build a wheel, then install it and see if you can find <code>mydata/setup.py</code> somewhere in your <code>sys.prefix</code>.</p>\n\n<p>In your case the difficult part will be to compute the actual target directory (<code>mydata</code> in this example). It will depend on the platform (Linux, Windows, etc.), <s>if it's in a virtual environment or not, if it's a global or local install</s> (not actually feasible with wheels currently, see update below) and so on.</p>\n\n<p>Finally of course, check that everything gets removed cleanly on uninstall. It's a bit unnecessary when working with virtual environments, but very important in case of a global installation.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>Looks like your use case requires a custom step at <em>install time</em> of your package (since the location of the binary for the Python interpreter relative to <code>sys.prefix</code> can not be known in advance). This can not be done currently with <em>wheels</em>. You have seen it yourself in this <a href=\"https://github.com/pypa/packaging-problems/issues/64\" rel=\"nofollow noreferrer\">discussion</a>.</p>\n\n<p>Knowing this, my recommendation would be to follow the advice from <em>Jan Vlcinsky</em> in his comment for his answer to this question:\n<a href=\"https://stackoverflow.com/questions/24263774/post-install-script-after-installing-a-wheel/24749871#comment41929643_24749871\">Post install script after installing a wheel</a>.</p>\n\n<ul>\n<li><p>Add an extra <code>setuptools</code> console entry point to your package (let's call it <code>bpyconfigure</code>).</p></li>\n<li><p>Instruct the users of your package to run it immediately after installing your package (<code>pip install bpy &amp;&amp; bpyconfigure</code>).</p></li>\n<li><p>The purpose of <code>bpyconfigure</code> should be clearly stated (in the documentation and maybe also as a notice shown in the console right after starting <code>bpyconfigure</code>) since it would write into locations of the file system where <code>pip install</code> does not usually write.</p></li>\n<li><p><code>bpyconfigure</code> should figure out where is the Python interpreter, and where to write the extra data.</p></li>\n<li><p>The extra data to write should be packaged as <code>package_data</code>, so that it can be found with <code>pkg_resources</code>.</p></li>\n<li><p>Of course <code>bpyconfigure --uninstall</code> should be available as well!</p></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6767685"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 57886115, "answer_count": 1, "score": 6, "last_activity_date": 1568655014, "creation_date": 1567632518, "last_edit_date": 1568203133, "question_id": 57795839, "link": "https://stackoverflow.com/questions/57795839/setuptools-eager-resources-to-executable-directory", "title": "setuptools &quot;eager_resources&quot; to executable directory", "body": "<p>I maintain a Python utility that allows <code>bpy</code> to be installable as a Python module. Due to the hugeness of the spurce code, and the length of time it takes to download the libraries, I have chosen to provide this module as a <code>wheel</code>.</p>\n\n<p>Unfortunately, platform differences and Blender runtime expectations makes support for this tricky at times.</p>\n\n<p>Currently, one of my big goals is to get the Blender addon scripts directory to install into the correct location. The directory (simply named after the version of Blender API) has to exist in the same directory as the Python executable.</p>\n\n<p>Unfortunately the way that <code>setuptools</code> works (or at least the way that I have it configured) the 2.79 directory is not always placed as a sibling to the Python executable. It fails on Windows platforms outside of virtual environments.</p>\n\n<p>However, I noticed in <code>setuptools</code> documentation that you can specify <code>eager_resources</code> that supposedly guarantees the location of extracted files.</p>\n\n<p><a href=\"https://setuptools.readthedocs.io/en/latest/setuptools.html#automatic-resource-extraction\" rel=\"noreferrer\">https://setuptools.readthedocs.io/en/latest/setuptools.html#automatic-resource-extraction</a>\n<a href=\"https://setuptools.readthedocs.io/en/latest/pkg_resources.html#resource-extraction\" rel=\"noreferrer\">https://setuptools.readthedocs.io/en/latest/pkg_resources.html#resource-extraction</a></p>\n\n<p>There was a lot of hand waving and jargon in the documentation, and 0 examples. I'm really confused as to how to structure my <code>setup.py</code> file in order to guarantee the resource extraction. Currently, I just label the whole <code>2.79</code> directory as \"scripts\" in my <code>setuptools</code> <code>Extension</code> and ship it.</p>\n\n<p>Is there a way to write my <code>setup.py</code> and package my module so as to guarantee the <code>2.79</code> directory's location is the same as the currently running python executable when someone runs</p>\n\n<p><code>py -3.6.8-32 -m pip install bpy</code></p>\n\n<p>Besides simply \"hacking it in\"? I was considering writing a <code>install_requires</code> module that would simply move it if possible but that is mangling with the user's file system and kind of hacky. However it's the route I am going to go if this proves impossible.</p>\n\n<p>Here is the original issue for anyone interested.</p>\n\n<p><a href=\"https://github.com/TylerGubala/blenderpy/issues/13\" rel=\"noreferrer\">https://github.com/TylerGubala/blenderpy/issues/13</a></p>\n\n<p>My build process is identical to the process descsribed in my answer here</p>\n\n<p><a href=\"https://stackoverflow.com/a/51575996/6767685\">https://stackoverflow.com/a/51575996/6767685</a></p>\n"}, {"tags": ["python", "bokeh"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12022003, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA5Ylv5XBp1w-8e7otsrQ6tyMAZHGNVr-wihiFw2w=k-s128", "display_name": "qamarf", "link": "https://stackoverflow.com/users/12022003/qamarf"}, "edited": false, "score": 0, "creation_date": 1567646938, "post_id": 57796772, "comment_id": 102027572, "body": "I&#39;ve tried using a python callback as you describe, but I get the error message: ` WARNING:bokeh.embed.util: You are generating standalone HTML/JS output, but trying to use real Python callbacks (i.e. with on_change or on_event). This combination cannot work. ` Is this because I&#39;m trying to do this in colaboratory? Is there a way to run a Bokeh server there?"}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "reply_to_user": {"reputation": 1, "user_id": 12022003, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA5Ylv5XBp1w-8e7otsrQ6tyMAZHGNVr-wihiFw2w=k-s128", "display_name": "qamarf", "link": "https://stackoverflow.com/users/12022003/qamarf"}, "edited": false, "score": 0, "creation_date": 1567650134, "post_id": 57796772, "comment_id": 102028080, "body": "Are you passing a <i>function</i> to <code>show</code>? Bokeh server apps in the notebook have their own particular necessary way to be arranged. Assuming you are using the latest Bokeh, your code should look like this example: <a href=\"https://github.com/bokeh/bokeh/blob/master/examples/howto/server_embed/notebook_embed.ipynb\" rel=\"nofollow noreferrer\">github.com/bokeh/bokeh/blob/master/examples/howto/server_emb&zwnj;&#8203;ed/&hellip;</a> As for colab, I have no idea, you will just have to try. Supporting regular notebooks and Jupyter lab is already a difficult burden, the project does not have resources to support colab in any official way."}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "reply_to_user": {"reputation": 1, "user_id": 12022003, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA5Ylv5XBp1w-8e7otsrQ6tyMAZHGNVr-wihiFw2w=k-s128", "display_name": "qamarf", "link": "https://stackoverflow.com/users/12022003/qamarf"}, "edited": false, "score": 0, "creation_date": 1567650267, "post_id": 57796772, "comment_id": 102028106, "body": "BTW the fact that you were in colab (an unusual situation) was important, and should have been included in the original question. (It may be the entire reason things don&#39;t work in this case) As well as the relevant versions. If you are using an older version of Bokeh you may need to refer to an older version of that example notebook, for instance, since the latest version of the example notebook may use newer features that your version of Bokeh does not have. Questions should <i>always</i> have version information listed."}], "tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": false, "score": 0, "last_activity_date": 1567640467, "creation_date": 1567640467, "answer_id": 57796772, "question_id": 57795833, "link": "https://stackoverflow.com/questions/57795833/how-to-append-coordinates-from-bokeh-tap-event-to-a-python-object/57796772#57796772", "title": "How to append coordinates from Bokeh Tap event to a python object?", "body": "<p>There is no way to append to coordinates to a python object with code like above, because that code is generating standalone output (i.e. it is using \"show\"). Standalone output is pure static HTML and Bokeh JSON that is sent to browser, without any sort of connection to any Python process. If you want to connect Bokeh visualizations to a real running Python process, <a href=\"https://docs.bokeh.org/en/latest/docs/user_guide/server.html\" rel=\"nofollow noreferrer\">that is what the Bokeh server is for</a>.</p>\n\n<p>If you run a Bokeh server application, then you can use <code>on_event</code> with a real python callback to run whatever python code you want with the Tap even values:</p>\n\n<pre><code>def callback(event):\n    # use event['x'], event['y'], event['sx'], event['sy']\n\np.on_event(Tap, callback)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12022003, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA5Ylv5XBp1w-8e7otsrQ6tyMAZHGNVr-wihiFw2w=k-s128", "display_name": "qamarf", "link": "https://stackoverflow.com/users/12022003/qamarf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567640467, "creation_date": 1567632469, "question_id": 57795833, "link": "https://stackoverflow.com/questions/57795833/how-to-append-coordinates-from-bokeh-tap-event-to-a-python-object", "title": "How to append coordinates from Bokeh Tap event to a python object?", "body": "<p>In the example below, I am trying to get the x and y coordinates that appear in the Div next to the plot when the bokeh plot is Tapped to be appended to the data dictionary coordList in their respective list.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfrom bokeh.io import show, output_notebook\nfrom bokeh.plotting import figure\nfrom bokeh.models import CustomJS, Div\nfrom bokeh.layouts import column, row\nfrom bokeh.events import Tap\n\ncoordList = dict(x=[], y=[])\n\noutput_notebook()\n\ndef display_event(div, attributes=[], style = 'float:left;clear:left;font_size=10pt'):\n    \"Build a suitable CustomJS to display the current event in the div model.\"\n    return CustomJS(args=dict(div=div), code=\"\"\"\n        var attrs = %s; var args = [];\n        for (var i = 0; i&lt;attrs.length; i++) {\n            args.push(Number(cb_obj[attrs[i]]).toFixed(2));\n        }\n        var line = \"&lt;span style=%r&gt;(\" + args.join(\", \") + \")&lt;/span&gt;\\\\n\";\n        var text = div.text.concat(line);\n        var lines = text.split(\"\\\\n\")\n        if (lines.length &gt; 35)\n            lines.shift();\n        div.text = lines.join(\"\\\\n\");\n    \"\"\" % (attributes, style))\n\nx = np.random.random(size=4000) * 100\ny = np.random.random(size=4000) * 100\nradii = np.random.random(size=4000) * 1.5\ncolors = [\"#%02x%02x%02x\" % (int(r), int(g), 150) for r, g in zip(50+2*x, 30+2*y)]\n\np = figure(tools=\"pan,wheel_zoom,zoom_in,zoom_out,reset\")\np.scatter(x, y, radius=np.random.random(size=4000) * 1.5,\n          fill_color=colors, fill_alpha=0.6, line_color=None)\n\ndiv = Div(width=400, height=p.plot_height)\nlayout = row(p, div)\n\npoint_attributes = ['x', 'y']\n\np.js_on_event(Tap, display_event(div, attributes=point_attributes))\n\nshow(layout)\n</code></pre>\n\n<p>I'm not sure how the coordinates are saved and how to access them and append them to the lists.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1567632612, "post_id": 57795823, "comment_id": 102024846, "body": "can you give a clear example of what you want? ideally follow the instructions to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1567633443, "post_id": 57795823, "comment_id": 102025101, "body": "Looks like you only need a boolean mask, df.filter, or df.query, but as others have said it&#39;s tough to know."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10463911, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ln-ykqYIXoc/AAAAAAAAAAI/AAAAAAAAAJg/FB1WR7YpFvE/photo.jpg?sz=128", "display_name": "edgar lenin lizarraga gastelum", "link": "https://stackoverflow.com/users/10463911/edgar-lenin-lizarraga-gastelum"}, "edited": false, "score": 0, "creation_date": 1567634118, "post_id": 57795968, "comment_id": 102025242, "body": "Thanks sr, I was stupidly doing it as a series instead of the df. Thanks again"}], "tags": [], "owner": {"reputation": 3734, "user_id": 3496038, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/MdpH5.jpg?s=128&g=1", "display_name": "Zach Gates", "link": "https://stackoverflow.com/users/3496038/zach-gates"}, "is_accepted": true, "score": 0, "last_activity_date": 1567633501, "creation_date": 1567633501, "answer_id": 57795968, "question_id": 57795823, "link": "https://stackoverflow.com/questions/57795823/find-a-string-in-a-column-but-return-the-value-in-a-different-column-under-the-s/57795968#57795968", "title": "find a string in a column but return the value in a different column under the same row", "body": "<p>You can use a <code>for</code> loop with <code>iterrows</code> to check if any row's <code>Car</code> contains <code>Audi</code>.</p>\n\n<pre><code>for index, row in cars.iterrows():\n    if 'Audi' in row.Car:\n        print(row.Price)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 2255479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hFBeY.png?s=128&g=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/2255479/kyle"}, "is_accepted": false, "score": 1, "last_activity_date": 1567633801, "creation_date": 1567633801, "answer_id": 57796020, "question_id": 57795823, "link": "https://stackoverflow.com/questions/57795823/find-a-string-in-a-column-but-return-the-value-in-a-different-column-under-the-s/57796020#57796020", "title": "find a string in a column but return the value in a different column under the same row", "body": "<p>You can use boolean indexing with pandas.</p>\n\n<pre><code>df[df['Car'].str.contains('Audi')]['Price']\n</code></pre>\n\n<p>To break it down:</p>\n\n<pre><code>    df['Car']                                   # Select Car column\n    df['Car'].str.contains('Audi')              # Check if the value for each row contains Audi\n    df[df['Car'].str.contains('Audi')]          # Select rows where contains Audi is true\n    df[df['Car'].str.contains('Audi')]['Price'] # Select the price column only\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 164, "user_id": 8734248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e433d2f752fba091b0801874b09b6?s=128&d=identicon&r=PG", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/8734248/rahul-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1567634072, "creation_date": 1567634072, "answer_id": 57796072, "question_id": 57795823, "link": "https://stackoverflow.com/questions/57795823/find-a-string-in-a-column-but-return-the-value-in-a-different-column-under-the-s/57796072#57796072", "title": "find a string in a column but return the value in a different column under the same row", "body": "<p>Don't go for string comparision you can directly use <code>pd.groupby()</code> function like this :</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nlistt = [['VW','blue',2014,20000],\n         ['Audi','red',2015,30000],\n         ['BMW','black',2019,90000],\n         ['Audi','white',2011,70000]]\nmy_df = pd.DataFrame(listt)\nmy_df.columns=(['Car','Color','Year','Price'])\n\ngrouped_data = my_df.groupby('Car')\ngrouped_data.get_group(\"Audi\")\n</code></pre>\n\n<p>OutPut :</p>\n\n<pre><code>    Car  Color  Year  Price\n1  Audi    red  2015  30000\n3  Audi  white  2011  70000\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10463911, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ln-ykqYIXoc/AAAAAAAAAAI/AAAAAAAAAJg/FB1WR7YpFvE/photo.jpg?sz=128", "display_name": "edgar lenin lizarraga gastelum", "link": "https://stackoverflow.com/users/10463911/edgar-lenin-lizarraga-gastelum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 57795968, "answer_count": 3, "score": 0, "last_activity_date": 1567634072, "creation_date": 1567632416, "last_edit_date": 1567632695, "question_id": 57795823, "link": "https://stackoverflow.com/questions/57795823/find-a-string-in-a-column-but-return-the-value-in-a-different-column-under-the-s", "title": "find a string in a column but return the value in a different column under the same row", "body": "<p>I have a df like this:</p>\n\n<pre><code>Car | Color | Year | Price\nVW  | blue  | 2014 | 20,000\nAudi| red   | 2017 | 30,000\n</code></pre>\n\n<p>I am using IF for this as this table is not exactly my real df, just need an idea. </p>\n\n<p>I need the price of the vehicle if the selection is Audi lets say.</p>\n\n<p>I am looking for s substring in a string but I just need the cost of one specific column in the exact row where the substring was found.</p>\n\n<p>I am using:</p>\n\n<pre><code>for x in cars['Car']:\n   if \"Audi\" in x:\n      #Just need the row in column 'Price'\n      print(??)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "rest", "api", "httprequest"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 3, "creation_date": 1567632695, "post_id": 57795810, "comment_id": 102024877, "body": "look into requests"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11922956, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KIo4bcK8pkc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regywFCVhOy_ejKtbI8B9GFwkGwHQ/photo.jpg?sz=128", "display_name": "satya veni", "link": "https://stackoverflow.com/users/11922956/satya-veni"}, "edited": false, "score": 0, "creation_date": 1567702997, "post_id": 57796586, "comment_id": 102051613, "body": "Thank you, however we are not passing any authentication, do we need to mention that authentication ie, client-id &amp;client-secret in  JSON header?"}, {"owner": {"reputation": 653, "user_id": 7876832, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8026603fd9d461598f867990a8eefbd2?s=128&d=identicon&r=PG&f=1", "display_name": "ParalysisByAnalysis", "link": "https://stackoverflow.com/users/7876832/paralysisbyanalysis"}, "reply_to_user": {"reputation": 17, "user_id": 11922956, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KIo4bcK8pkc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regywFCVhOy_ejKtbI8B9GFwkGwHQ/photo.jpg?sz=128", "display_name": "satya veni", "link": "https://stackoverflow.com/users/11922956/satya-veni"}, "edited": false, "score": 0, "creation_date": 1567741539, "post_id": 57796586, "comment_id": 102061883, "body": "So you&#39;d have to look at the API documentation if it exists to see what data is required for your request. By looking at your url, I&#39;d say it&#39;s a REST API and some of those require you to pass some sort of authentication (whether basic or an OAuth or token of some sort).  You can try sending a request without any authentication key values and then review your status code and content and the API may tell you if you need to login first."}], "tags": [], "owner": {"reputation": 653, "user_id": 7876832, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8026603fd9d461598f867990a8eefbd2?s=128&d=identicon&r=PG&f=1", "display_name": "ParalysisByAnalysis", "link": "https://stackoverflow.com/users/7876832/paralysisbyanalysis"}, "is_accepted": false, "score": 0, "last_activity_date": 1567638682, "creation_date": 1567638682, "answer_id": 57796586, "question_id": 57795810, "link": "https://stackoverflow.com/questions/57795810/sending-an-http-api-request-in-python-and-get-json-data-to-csv-format/57796586#57796586", "title": "Sending an HTTP API Request in Python and get json data to csv format", "body": "<p>Assigning your url to a <code>URL</code> variable, and your json to a <code>JSON</code> variable, you could try:</p>\n\n<pre><code>import requests\nresponse = requests.post(url=URL, json=JSON)\nprint(response.content)\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11922956, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KIo4bcK8pkc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regywFCVhOy_ejKtbI8B9GFwkGwHQ/photo.jpg?sz=128", "display_name": "satya veni", "link": "https://stackoverflow.com/users/11922956/satya-veni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567638682, "creation_date": 1567632337, "question_id": 57795810, "link": "https://stackoverflow.com/questions/57795810/sending-an-http-api-request-in-python-and-get-json-data-to-csv-format", "title": "Sending an HTTP API Request in Python and get json data to csv format", "body": "<p>I have HTTP URL and API request body, i need to post the request using python and get output in json and  convert into csv file.\nAs i am new to this python, couldn't succeed. Can any one please help me on this.</p>\n\n<p>URL: as below\nhttp://{{WEBURL}}:{{WEBPORT}}/{{TENANT_ID}}/api/requesttrackingservice/get</p>\n\n<p>API body as below</p>\n\n<pre><code>{\n  \"params\": {\n    \"query\": {\n      \"filters\": {\n        \"typesCriterion\": [\n          \"tasksummaryobject\"\n        ], \n\n        \"propertiesCriterion\": [\n          {\n            \"modifiedDate\": {\n              \"gte\": \"2019-08-26T06:00:00.000-0500\",\n               \"lte\": \"2019-08-30T19:00:00.000-0500\",\n              \"type\": \"_DATETIME\"\n            }\n          }\n        ],\n            \"attributesCriterion\": [\n          {\n            \"connectIntegrationType\": {\n              \"eq\": \"ENTITY_IMPORT\"\n            }\n          },\n            {\n            \"profileName\": {\n              \"eq\": \"sys_import_data_json_eventhub_task_base\"\n            }\n          }\n        ]\n      }\n    },\n    \"fields\": {\n      \"attributes\": [\n        \"status\",\"totalRecordsProcessed\",\"totalRecordsCreate\",\"totalRecordsupdate\",\"totalRecordsDelete\",\"filetype\"\n      ],\n      \"relationships\": [\n        \"_ALL\"\n      ]\n    },\n    \"options\": {\n      \"maxRecords\": 1000\n    }\n\n  }\n}\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 3, "creation_date": 1567632419, "post_id": 57795787, "comment_id": 102024775, "body": "For reference, <a href=\"https://docs.python.org/3/library/re.html#match-objects\" rel=\"nofollow noreferrer\">here</a> are the docs for <code>re.Match</code>.  You&#39;ll want to add capture groups and then use the <a href=\"https://docs.python.org/3/library/re.html#re.Match.group\" rel=\"nofollow noreferrer\"><code>group</code></a> method to extract the text from each group."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1567632486, "post_id": 57795787, "comment_id": 102024799, "body": "I am not entirely sure where your exact problem lies. Your question might benefit from a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 2, "creation_date": 1567632486, "post_id": 57795787, "comment_id": 102024800, "body": "Python docs about the &quot;re&quot; module also explain Match objects. By the way: A Python dict can&#39;t contain the same key multiple times."}], "answers": [{"comments": [{"owner": {"reputation": 721, "user_id": 6075349, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/27d97643ffe05247df76cb8b492f6728?s=128&d=identicon&r=PG&f=1", "display_name": "FlyingPickle", "link": "https://stackoverflow.com/users/6075349/flyingpickle"}, "edited": false, "score": 1, "creation_date": 1567635767, "post_id": 57795893, "comment_id": 102025587, "body": "This is fantastic. I am bookmarking this link :) Thanks!"}], "tags": [], "owner": {"reputation": 8795, "user_id": 6852937, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/211bc0d1a4dd35c36879f21e33511f68?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Elrico", "link": "https://stackoverflow.com/users/6852937/andre-elrico"}, "is_accepted": false, "score": 3, "last_activity_date": 1567633011, "creation_date": 1567633011, "answer_id": 57795893, "question_id": 57795787, "link": "https://stackoverflow.com/questions/57795787/extracting-lines-matching-keywords-python/57795893#57795893", "title": "extracting lines matching keywords python", "body": "<p>There we go:</p>\n\n<p><a href=\"https://regex101.com/r/UTdN6B/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/UTdN6B/1</a></p>\n\n<p>use <code>^Car: (.*)|.*</code> as pattern and <code>\\1</code> as substitute also <code>gm</code> as flags.</p>\n"}], "owner": {"reputation": 721, "user_id": 6075349, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/27d97643ffe05247df76cb8b492f6728?s=128&d=identicon&r=PG&f=1", "display_name": "FlyingPickle", "link": "https://stackoverflow.com/users/6075349/flyingpickle"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1567639589, "answer_count": 1, "score": -3, "last_activity_date": 1567633011, "creation_date": 1567632190, "last_edit_date": 1567632811, "question_id": 57795787, "link": "https://stackoverflow.com/questions/57795787/extracting-lines-matching-keywords-python", "closed_reason": "Needs details or clarity", "title": "extracting lines matching keywords python", "body": "<p>I have a text file in the following format:</p>\n\n<pre><code>Car: Replace:Brakes&lt;10\nCar: Renew: Engine=100000\nTruck: Renew: Engine=1000\nTruck: Replace: Brakes&lt;504\n</code></pre>\n\n<p>I am looking to write a regex to parse this file and extract only the lines with <code>Car</code> in it and also only extract values after Car and return them as a python dictionary.</p>\n\n<p>So my output would look like</p>\n\n<pre><code>'Replace' :' Brakes&lt;10'\n'Renew' : 'Engine=100000'\n</code></pre>\n\n<p>Any inputs on how I can achieve this?\nI tried.</p>\n\n<pre><code>re.search\n</code></pre>\n\n<p>but get a re.Match object which I am not sure how to interpret.\nThank you!</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "data-science"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 1, "creation_date": 1567632504, "post_id": 57795764, "comment_id": 102024810, "body": "hi, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1567634236, "post_id": 57795764, "comment_id": 102025271, "body": "@Yuca Thanks!, I added desired output"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1567634369, "post_id": 57795764, "comment_id": 102025299, "body": "<code>df[&#39;new_col&#39;] = np.where(df[&#39;a_time&#39;] &gt; df[&#39;b_time&#39;], &#39;Early&#39;, &#39;Late&#39;).mask(df[&#39;time_a&#39;].isna())</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1567634469, "post_id": 57796120, "comment_id": 102025325, "body": "Thanks for the response, so run the code I have then run the code you showed in the next line below?"}], "tags": [], "owner": {"reputation": 3366, "user_id": 10140310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd7db6049277b9a6c8392247ff6aceb1?s=128&d=identicon&r=PG&f=1", "display_name": "political scientist", "link": "https://stackoverflow.com/users/10140310/political-scientist"}, "is_accepted": true, "score": 2, "last_activity_date": 1567634382, "creation_date": 1567634382, "answer_id": 57796120, "question_id": 57795764, "link": "https://stackoverflow.com/questions/57795764/new-column-value-based-on-two-columns-in-df-and-possible-nan-value/57796120#57796120", "title": "New column value based on two columns in df and possible NaN Value", "body": "<p>You could use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.isnat.html\" rel=\"nofollow noreferrer\"><code>numpy.isnat</code></a> to fix it. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df['new_col'] = np.where(df['a_time'] &gt; df['b_time'], 'Early', 'Late')\n\ndf.loc[(np.isnat(df['a_time']) | np.isnat(df['b_time'])), 'new_col'] = np.NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1567640529, "creation_date": 1567640529, "answer_id": 57796774, "question_id": 57795764, "link": "https://stackoverflow.com/questions/57795764/new-column-value-based-on-two-columns-in-df-and-possible-nan-value/57796774#57796774", "title": "New column value based on two columns in df and possible NaN Value", "body": "<p>You may do it with <code>np.select</code></p>\n\n<pre><code>df['new_column'] = np.select([df.isna().any(1), df.time_a &gt; df.time_b], [pd.NaT, 'Early'], 'Late')\n\nOut[923]:\n                   time_a              time_b new_column\n0 2019-08-19 22:25:26.133 2019-08-19 23:00:00  Late\n1 NaT                     2019-08-19 22:00:00  NaT\n2 2019-08-19 23:00:00.000 2019-08-19 20:00:00  Early\n</code></pre>\n"}], "owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57796120, "answer_count": 2, "score": 0, "last_activity_date": 1567640529, "creation_date": 1567632026, "last_edit_date": 1567634217, "question_id": 57795764, "link": "https://stackoverflow.com/questions/57795764/new-column-value-based-on-two-columns-in-df-and-possible-nan-value", "title": "New column value based on two columns in df and possible NaN Value", "body": "<p>I am trying to create a new column based on a condition of two column timestamps such as below,</p>\n\n<pre><code>def time_delta(df):\nif df['a_time'] &gt; df['b_time']:\n    res = 'Early'\nelse:\n    res = 'Late'\nreturn res \n</code></pre>\n\n<p>or </p>\n\n<pre><code>df['new_col'] = np.where(df['a_time'] &gt; df['b_time'], 'Early', 'Late')\n</code></pre>\n\n<p>But the a_time column sometimes has a NaN value, I want the result or value in the new column if the a_time is NaN to be NaN as well how can I do this or tweak what I have for this?</p>\n\n<p>Desired Output</p>\n\n<pre><code>     time_a           |         time_b          | new_column\n2019-08-19 22:25:26.133   2019-08-19 23:00:00.000    Before_b\n       NaN                2019-08-19 22:00:00.000     NaN\n2019-08-19 23:00:00.000   2019-08-19 20:00:00.000    After_b\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 1, "creation_date": 1567632381, "post_id": 57795750, "comment_id": 102024759, "body": "That&#39;s very basic access of dicts and lists. <code>data[&#39;Body&#39;][&#39;MpesaReceiptNumber&#39;]</code> will give you an <i>obvious</i> <code>KeyError</code> exception. Simply work your way down the main dictionary one dict/list at a time until you can access the value you want. Maybe a <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber duck</a> can help."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1567632746, "post_id": 57795750, "comment_id": 102024893, "body": "Nothing about this is specific to JSON -- the data could just be Python literals and not JSON and all, and you&#39;d have the same problem."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1567632563, "creation_date": 1567632563, "answer_id": 57795847, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json/57795847#57795847", "title": "How can I extract data from json", "body": "<p>The problem is that you have a list of <code>dict</code>s you need to search first:</p>\n\n<pre><code>&gt;&gt;&gt; for obj in data['Body']['stkCallback']['CallbackMetadata']['Item']:\n...   print(obj)\n...\n{'Name': 'Amount', 'Value': 1.0}\n{'Name': 'MpesaReceiptNumber', 'Value': 'NBN52K8A1J'}\n{'Name': 'Balance'}\n{'Name': 'TransactionDate', 'Value': 20190223144807}\n{'Name': 'PhoneNumber', 'Value': 254725696042}\n</code></pre>\n\n<p>One possibility is</p>\n\n<pre><code>&gt;&gt;&gt; [x['Value'] for x in data['Body']['stkCallback']['CallbackMetadata']['Item'] if x['Name'] == 'MpesaReceiptNumber'][0]\n'NBN52K8A1J'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 10455236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Od64GCiwQtQ/AAAAAAAAAAI/AAAAAAAAAFU/x51L1okjhP0/photo.jpg?sz=128", "display_name": "Wagole Musa", "link": "https://stackoverflow.com/users/10455236/wagole-musa"}, "edited": false, "score": 0, "creation_date": 1567638142, "post_id": 57795874, "comment_id": 102026078, "body": "Thanks so much for help."}], "tags": [], "owner": {"reputation": 134, "user_id": 6675896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7375bcc4a9116e002f5569fde03ae8d9?s=128&d=identicon&r=PG&f=1", "display_name": "Nello", "link": "https://stackoverflow.com/users/6675896/nello"}, "is_accepted": false, "score": 0, "last_activity_date": 1567632868, "creation_date": 1567632868, "answer_id": 57795874, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json/57795874#57795874", "title": "How can I extract data from json", "body": "<p>Just use the library json. Then you can print its inner elements   </p>\n\n<p>import json</p>\n\n<pre><code>json_data = '{\"Body\":{\"stkCallback\":{\"MerchantRequestID\":\"22531-976234-1\",\"CheckoutRequestID\":\"ws_CO_DMZ_250600506_23022019144745852\",\"ResultCode\":0,\"ResultDesc\":\"The service request is processed successfully.\",\"CallbackMetadata\":{\"Item\":[{\"Name\":\"Amount\",\"Value\":1.00},{\"Name\":\"MpesaReceiptNumber\",\"Value\":\"NBN52K8A1J\"},{\"Name\":\"Balance\"},{\"Name\":\"TransactionDate\",\"Value\":20190223144807},{\"Name\":\"PhoneNumber\",\"Value\":254725696042}]}}}}'\na = json.loads(json_data)\nprint(a[\"Body\"][\"stkCallback\"][\"CallbackMetadata\"][\"Item\"][1][\"Value\"])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 11625059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx9z7.jpg?s=128&g=1", "display_name": "alphazeta", "link": "https://stackoverflow.com/users/11625059/alphazeta"}, "is_accepted": false, "score": 0, "last_activity_date": 1567633462, "last_edit_date": 1567633462, "creation_date": 1567633159, "answer_id": 57795915, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json/57795915#57795915", "title": "How can I extract data from json", "body": "<p>If you parse the json you will notice that the path to the data is not simply ['Body']['MpesaReceiptNumber']. In fact you have a list of dicts inside ['Item'] that needs to be searched.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pjsN0.png\" rel=\"nofollow noreferrer\">Parsed data tree</a></p>\n\n<p>One suggestion is to run the following code to find the data you are looking for:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import json\njson_data = '{\"Body\":{\"stkCallback\":{\"MerchantRequestID\":\"22531-976234-1\",\"CheckoutRequestID\":\"ws_CO_DMZ_250600506_23022019144745852\",\"ResultCode\":0,\"ResultDesc\":\"The service request is processed successfully.\",\"CallbackMetadata\":{\"Item\":[{\"Name\":\"Amount\",\"Value\":1.00},{\"Name\":\"MpesaReceiptNumber\",\"Value\":\"NBN52K8A1J\"},{\"Name\":\"Balance\"},{\"Name\":\"TransactionDate\",\"Value\":20190223144807},{\"Name\":\"PhoneNumber\",\"Value\":254725696042}]}}}}'\ndata = (json.loads(json_data))\n\nlist_data = data['Body']['stkCallback']['CallbackMetadata']['Item']\n\n# Returns:\n# [{'Name': 'Amount', 'Value': 1.0}, {'Name': 'MpesaReceiptNumber', 'Value':'NBN52K8A1J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20190223144807}, {'Name': 'PhoneNumber', 'Value': 254725696042}]\n\n# Now find Name: 'MpesaReceiptNumber' inside the dict list\nfind_it = next(item for item in list_data if item[\"Name\"] == \"MpesaReceiptNumber\")\nfind_it = find_it['Value']\n\nprint (find_it)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>NBN52K8A1J\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12022012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iD2Dk.jpg?s=128&g=1", "display_name": "NateCraft", "link": "https://stackoverflow.com/users/12022012/natecraft"}, "is_accepted": false, "score": 0, "last_activity_date": 1567633160, "creation_date": 1567633160, "answer_id": 57795916, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json/57795916#57795916", "title": "How can I extract data from json", "body": "<p>You were almost there just have to get the the key value pair itself from the dicts and check if it is the name you wanted:</p>\n\n<pre><code>data = json.loads(json_data)\nlist_data = data['Body'][\"stkCallback\"]['CallbackMetadata']['Item']\nvar: str\n\nfor x in list_data:\n    if x['Name'] == 'MpesaReceiptNumber':\n       var = x['Value']\n       break\n\nprint(var)\n</code></pre>\n\n<p>You can use this in the future easily by replacing the if check with the name of something else so you can grab the value depending on a variable.</p>\n"}, {"tags": [], "owner": {"reputation": 7932, "user_id": 1164104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4584a376a0c422377280586120494bbd?s=128&d=identicon&r=PG", "display_name": "Doobeh", "link": "https://stackoverflow.com/users/1164104/doobeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1567633397, "creation_date": 1567633397, "answer_id": 57795954, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json/57795954#57795954", "title": "How can I extract data from json", "body": "<p>I find using pprint to get the shape of the data structure is helpful when you're learning how to navigate it all out.</p>\n\n<pre><code>import json\nimport pprint\n\njson_data = '{\"Body\":{\"stkCallback\":{\"MerchantRequestID\":\"22531-976234-1\",\"CheckoutRequestID\":\"ws_CO_DMZ_250600506_23022019144745852\",\"ResultCode\":0,\"ResultDesc\":\"The service request is processed successfully.\",\"CallbackMetadata\":{\"Item\":[{\"Name\":\"Amount\",\"Value\":1.00},{\"Name\":\"MpesaReceiptNumber\",\"Value\":\"NBN52K8A1J\"},{\"Name\":\"Balance\"},{\"Name\":\"TransactionDate\",\"Value\":20190223144807},{\"Name\":\"PhoneNumber\",\"Value\":254725696042}]}}}}'\ndata = json.loads(json_data)\n\npprint.pprint(data)\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>{'Body': {'stkCallback': {'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1.0},\n                                                        {'Name': 'MpesaReceiptNumber', 'Value': 'NBN52K8A1J'},\n                                                        {'Name': 'Balance'},\n                                                        {'Name': 'TransactionDate', 'Value': 20190223144807},\n                                                        {'Name': 'PhoneNumber', 'Value': 254725696042}]},\n                          'CheckoutRequestID': 'ws_CO_DMZ_250600506_23022019144745852',\n                          'MerchantRequestID': '22531-976234-1',\n                          'ResultCode': 0,\n                          'ResultDesc': 'The service request is processed successfully.'}}}\n</code></pre>\n\n<p>So you should be able to see that <code>data[\"Body\"][\"stkCallback\"][\"CallbackMetadata\"][\"Item\"]</code> gets to to the depth you need for your data.</p>\n\n<pre><code> &gt;&gt;&gt; pprint.pprint(data[\"Body\"][\"stkCallback\"][\"CallbackMetadata\"][\"Item\"])\n\n [{'Name': 'Amount', 'Value': 1.0},\n {'Name': 'MpesaReceiptNumber', 'Value': 'NBN52K8A1J'},\n {'Name': 'Balance'},\n {'Name': 'TransactionDate', 'Value': 20190223144807},\n {'Name': 'PhoneNumber', 'Value': 254725696042}]\n</code></pre>\n\n<p>So next you need to iterate through that list and find a match (if one exists) for the <code>MpesaReceiptNumber</code> key.</p>\n\n<pre><code>receipt_no = None\nfor item in data[\"Body\"][\"stkCallback\"][\"CallbackMetadata\"][\"Item\"]:\n    if item.get('Name') == 'MpesaReceiptNumber':\n        receipt_no = item.get('Value')\n\nprint(f\"The receipt # is: {receipt_no}\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2033, "user_id": 174514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziJ7S.jpg?s=128&g=1", "display_name": "aks", "link": "https://stackoverflow.com/users/174514/aks"}, "is_accepted": false, "score": 0, "last_activity_date": 1567634430, "creation_date": 1567634430, "answer_id": 57796127, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json/57796127#57796127", "title": "How can I extract data from json", "body": "<p>Use <code>jq</code>.  </p>\n\n<p>First off, it can \"pretty print\" any JSON data.</p>\n\n<p>Put the value of <code>json_data</code> into a file <code>test.json</code>, and then show the formatted output of the JSON data with:</p>\n\n<pre><code>$ jq &lt;test.json\n{\n  \"Body\": {\n    \"stkCallback\": {\n      \"MerchantRequestID\": \"22531-976234-1\",\n      \"CheckoutRequestID\": \"ws_CO_DMZ_250600506_23022019144745852\",\n      \"ResultCode\": 0,\n      \"ResultDesc\": \"The service request is processed successfully.\",\n      \"CallbackMetadata\": {\n        \"Item\": [\n          {\n            \"Name\": \"Amount\",\n            \"Value\": 1\n          },\n          {\n            \"Name\": \"MpesaReceiptNumber\",\n            \"Value\": \"NBN52K8A1J\"\n          },\n          {\n            \"Name\": \"Balance\"\n          },\n          {\n            \"Name\": \"TransactionDate\",\n            \"Value\": 20190223144807\n          },\n          {\n            \"Name\": \"PhoneNumber\",\n            \"Value\": 254725696042\n          }\n        ]\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Next, to extract values, a selector path needs to be given on the <code>jq</code> command line:</p>\n\n<pre><code>jq '.Body.stkCallback.CallbackMetadata.Item|.[]|select(.Name == \"MpesaReceiptNumber\")|.Value' test.json\n\"NBN52K8A1J\"\n</code></pre>\n\n<p>Now to make this sequence easier to understand, let's break it down component by component.</p>\n\n<p>To extract and return only the <code>.Body</code>:</p>\n\n<pre><code>$ jq '.Body' &lt;test.json\n{\n  \"stkCallback\": {\n    \"MerchantRequestID\": \"22531-976234-1\",\n    \"CheckoutRequestID\": \"ws_CO_DMZ_250600506_23022019144745852\",\n    \"ResultCode\": 0,\n    \"ResultDesc\": \"The service request is processed successfully.\",\n    \"CallbackMetadata\": {\n      \"Item\": [\n        {\n          \"Name\": \"Amount\",\n          \"Value\": 1\n        },\n        {\n          \"Name\": \"MpesaReceiptNumber\",\n          \"Value\": \"NBN52K8A1J\"\n        },\n        {\n          \"Name\": \"Balance\"\n        },\n        {\n          \"Name\": \"TransactionDate\",\n          \"Value\": 20190223144807\n        },\n        {\n          \"Name\": \"PhoneNumber\",\n          \"Value\": 254725696042\n        }\n      ]\n    }\n  }\n}\n</code></pre>\n\n<p>Now let's fetch the <code>stkCallback</code> component:</p>\n\n<pre><code>$ jq '.Body.stkCallback' &lt;test.json\n{\n  \"MerchantRequestID\": \"22531-976234-1\",\n  \"CheckoutRequestID\": \"ws_CO_DMZ_250600506_23022019144745852\",\n  \"ResultCode\": 0,\n  \"ResultDesc\": \"The service request is processed successfully.\",\n  \"CallbackMetadata\": {\n    \"Item\": [\n      {\n        \"Name\": \"Amount\",\n        \"Value\": 1\n      },\n      {\n        \"Name\": \"MpesaReceiptNumber\",\n        \"Value\": \"NBN52K8A1J\"\n      },\n      {\n        \"Name\": \"Balance\"\n      },\n      {\n        \"Name\": \"TransactionDate\",\n        \"Value\": 20190223144807\n      },\n      {\n        \"Name\": \"PhoneNumber\",\n        \"Value\": 254725696042\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>Ok, now the <code>callbackMetadata</code>:</p>\n\n<pre><code>$ jq '.Body.stkCallback.CallbackMetadata' &lt;test.json\n{\n  \"Item\": [\n    {\n      \"Name\": \"Amount\",\n      \"Value\": 1\n    },\n    {\n      \"Name\": \"MpesaReceiptNumber\",\n      \"Value\": \"NBN52K8A1J\"\n    },\n    {\n      \"Name\": \"Balance\"\n    },\n    {\n      \"Name\": \"TransactionDate\",\n      \"Value\": 20190223144807\n    },\n    {\n      \"Name\": \"PhoneNumber\",\n      \"Value\": 254725696042\n    }\n  ]\n}\n</code></pre>\n\n<p>Next, the <code>Item</code> part:</p>\n\n<pre><code>$ jq '.Body.stkCallback.CallbackMetadata.Item' &lt;test.json\n[\n  {\n    \"Name\": \"Amount\",\n    \"Value\": 1\n  },\n  {\n    \"Name\": \"MpesaReceiptNumber\",\n    \"Value\": \"NBN52K8A1J\"\n  },\n  {\n    \"Name\": \"Balance\"\n  },\n  {\n    \"Name\": \"TransactionDate\",\n    \"Value\": 20190223144807\n  },\n  {\n    \"Name\": \"PhoneNumber\",\n    \"Value\": 254725696042\n  }\n]\n</code></pre>\n\n<p>Notice that the result is an <em>array</em> of list items?  Let's filter the data <em>out</em> of the array:</p>\n\n<pre><code>$ jq '.Body.stkCallback.CallbackMetadata.Item|.[]' &lt;test.json\n{\n  \"Name\": \"Amount\",\n  \"Value\": 1\n}\n{\n  \"Name\": \"MpesaReceiptNumber\",\n  \"Value\": \"NBN52K8A1J\"\n}\n{\n  \"Name\": \"Balance\"\n}\n{\n  \"Name\": \"TransactionDate\",\n  \"Value\": 20190223144807\n}\n{\n  \"Name\": \"PhoneNumber\",\n  \"Value\": 254725696042\n}\n</code></pre>\n\n<p>Now the result is just the list of tuples, each with a \"Name\" and \"Value\".  So, let's select just the one we (you) wanted:</p>\n\n<pre><code>$ jq '.Body.stkCallback.CallbackMetadata.Item|.[]|select(.Name == \"MpesaReceiptNumber\")' &lt;test.json\n{\n  \"Name\": \"MpesaReceiptNumber\",\n  \"Value\": \"NBN52K8A1J\"\n}\n</code></pre>\n\n<p>Cool.  We've got the tuple we wanted.  Let's extract just the value now:</p>\n\n<pre><code>$ jq '.Body.stkCallback.CallbackMetadata.Item|.[]|select(.Name == \"MpesaReceiptNumber\")|.Value' &lt;test.json\n\"NBN52K8A1J\"\n</code></pre>\n\n<p>And, there you go.</p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1567638061, "creation_date": 1567638061, "answer_id": 57796524, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json/57796524#57796524", "title": "How can I extract data from json", "body": "<p>Simplest way to get the value associated with a specific <code>CallbackMetadata</code> item name:</p>\n\n<pre><code>json_string = '''\n    {\n        \"Body\": {\n            \"stkCallback\": {\n               ...\n    }\n'''\n\njson_data = json.loads(json_string)\n\nfor item in json_data[\"Body\"][\"stkCallback\"][\"CallbackMetadata\"][\"Item\"]:\n    if item[\"Name\"] == \"MpesaReceiptNumber\":\n        print(item[\"Value\"])  # -&gt; NBN52K8A1J\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10455236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Od64GCiwQtQ/AAAAAAAAAAI/AAAAAAAAAFU/x51L1okjhP0/photo.jpg?sz=128", "display_name": "Wagole Musa", "link": "https://stackoverflow.com/users/10455236/wagole-musa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 7, "score": -2, "last_activity_date": 1567638061, "creation_date": 1567631930, "last_edit_date": 1567636941, "question_id": 57795750, "link": "https://stackoverflow.com/questions/57795750/how-can-i-extract-data-from-json", "title": "How can I extract data from json", "body": "<p>I want to extract code from JSON format.</p>\n\n<pre><code>import json\njson_data = '''\n    {\n        \"Body\": {\n            \"stkCallback\": {\n                \"MerchantRequestID\": \"22531-976234-1\",\n                \"CheckoutRequestID\": \"ws_CO_DMZ_250600506_23022019144745852\",\n                \"ResultCode\": 0,\n                \"ResultDesc\": \"The service request is processed successfully.\",\n                \"CallbackMetadata\": {\n                    \"Item\": [\n                        {\n                            \"Name\": \"Amount\",\n                            \"Value\": 1.0\n                        },\n                        {\n                            \"Name\": \"MpesaReceiptNumber\",\n                            \"Value\": \"NBN52K8A1J\"\n                        },\n                        {\n                            \"Name\": \"Balance\"\n                        },\n                        {\n                            \"Name\": \"TransactionDate\",\n                            \"Value\": 20190223144807\n                        },\n                        {\n                            \"Name\": \"PhoneNumber\",\n                            \"Value\": 254725696042\n                        }\n                    ]\n                }\n            }\n        }\n    }\n'''\n\njson_da = data['Body']\nlist_data = data['Body']['MpesaReceiptNumber']\nprint (json_da)\nprint (list_data)\n</code></pre>\n\n<p>I want to print this: <code>NBN52K8A1J</code></p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 6246, "user_id": 1914781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/466ea7ff3957320de91dd7a2bc0ad4f9?s=128&d=identicon&r=PG", "display_name": "lucky1928", "link": "https://stackoverflow.com/users/1914781/lucky1928"}, "edited": false, "score": 0, "creation_date": 1567694772, "post_id": 57799012, "comment_id": 102047601, "body": "Great answer! It&#39;s very beautiful code! sounds like I can not put datetime object to df.ix[count], but need to convert it with pd.to_datetime as your code! But what&#39;s the reason it doesn&#39;t work?"}], "tags": [], "owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "is_accepted": true, "score": 1, "last_activity_date": 1567661819, "creation_date": 1567661819, "answer_id": 57799012, "question_id": 57795721, "link": "https://stackoverflow.com/questions/57795721/python-select-sub-array-with-timedelta-differ/57799012#57799012", "title": "python select sub array with timedelta differ", "body": "<p>If I understand you correctly, you want to drop rows whose time is too close to the previous row. Try this:</p>\n\n<pre><code>lst = [\n    \"09-04 11:55:05.011 5\",\n    \"09-04 11:55:15.011 2\",\n    \"09-04 11:55:16.011 3\",\n    \"09-04 11:55:20.011 4\",\n    \"09-04 11:55:25.011 4\",\n    \"09-04 11:55:30.011 4\",\n    \"09-04 11:55:35.011 4\",\n    \"09-04 11:55:40.011 4\",\n    \"09-04 11:55:45.011 9\",\n    \"09-04 11:55:50.011 9\",\n    \"09-04 11:55:55.011 9\",\n    \"09-04 11:56:00.011 9\",\n    \"09-04 11:56:05.011 7\",\n    \"09-04 11:56:15.011 8\",\n]\n\ndf = pd.DataFrame(lst)[0].str.extract(r'(?P&lt;Date&gt;.+) (?P&lt;Value&gt;\\d+)', expand=True)\ndf['Date'] = pd.to_datetime(df['Date'], format='%m-%d %H:%M:%S.%f')\ndf['Value'] = pd.to_numeric(df['Value'])\n\nthreshold = pd.Timedelta(seconds=5)\nmask = df['Date'].diff() &gt;= threshold\ndf[mask].plot('Date', 'Value')\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sFu58.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sFu58.png\" alt=\"Output\"></a></p>\n\n<p>Beware that this code only compares a row to the previous one. If you have a long series of rows with small gaps (say, 2 seconds) in-between, you will end up with a large missing range. Consider <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html\" rel=\"nofollow noreferrer\"><code>resample</code></a> to normalize all your observations in an interval.</p>\n"}], "owner": {"reputation": 6246, "user_id": 1914781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/466ea7ff3957320de91dd7a2bc0ad4f9?s=128&d=identicon&r=PG", "display_name": "lucky1928", "link": "https://stackoverflow.com/users/1914781/lucky1928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 57799012, "answer_count": 1, "score": 1, "last_activity_date": 1567661819, "creation_date": 1567631702, "question_id": 57795721, "link": "https://stackoverflow.com/questions/57795721/python-select-sub-array-with-timedelta-differ", "title": "python select sub array with timedelta differ", "body": "<p>When I try to get a sub array by datetime delta as below:</p>\n\n<pre><code>dx = dx[(dx[['ts']].diff() &gt; threshold).any(axis=1)]\n</code></pre>\n\n<p>It should remove the too near labels in below example but it doesn't work.</p>\n\n<p>Full code:</p>\n\n<pre><code>#!/usr/bin/env python\nimport re\nimport pandas as pd\nimport numpy as np\nfrom datetime import datetime,timedelta\nimport matplotlib.pyplot as plt\n\ndef str2dt(tstr):\n    return datetime.strptime(tstr, '%m-%d %H:%M:%S.%f')\n\ndef plotme():\n    lst = [\n    \"09-04 11:55:05.011 5\",\n    \"09-04 11:55:15.011 2\",\n    \"09-04 11:55:16.011 3\",\n    \"09-04 11:55:20.011 4\",\n    \"09-04 11:55:25.011 4\",\n    \"09-04 11:55:30.011 4\",\n    \"09-04 11:55:35.011 4\",\n    \"09-04 11:55:40.011 4\",\n    \"09-04 11:55:45.011 9\",\n    \"09-04 11:55:50.011 9\",\n    \"09-04 11:55:55.011 9\",\n    \"09-04 11:56:00.011 9\",\n    \"09-04 11:56:05.011 7\",\n    \"09-04 11:56:15.011 8\",\n    ]\n    scorelst = []\n    tslst = []\n    index = np.arange(1) # array of numbers for the number of samples\n    df = pd.DataFrame(columns=[\"ts\",\"score\"], index=index)\n    count = 0\n    tsregex = \"\\d+-\\d+ \\d+:\\d+:\\d+.\\d+\"\n    for line in lst:\n        m = re.search(\"(%s).* (\\d+)\"%(tsregex),line)\n        if m:\n            tstr = m.group(1)\n            tsdt = str2dt(tstr)\n            tslst.append(tsdt)\n            score = int(m.group(2))\n            scorelst.append(score)\n            df.ix[count] = [tsdt,score]\n            count += 1\n    fig, ax = plt.subplots(figsize=(12,6))\n    ax.plot(df['ts'],df['score'],label = \"score\")  \n\n    cols = [\"score\"]\n    dfl = df[(df[cols].shift() != df[cols]).any(axis=1)]\n    dfr = df[(df[cols].shift(-1) != df[cols]).any(axis=1)]\n    dx = pd.concat([dfl,dfr],ignore_index=True)\n    dx = dx.sort_values(['ts'])\n    threshold = timedelta(seconds=5) \n    print dx[['ts']].diff()\n    print dx[['ts']].diff() &gt; threshold\n    dx = dx[(dx[['ts']].diff() &gt; threshold).any(axis=1)]\n    fig.autofmt_xdate()\n    ax.xaxis.set_ticks(np.array(dx['ts']))\n    #ax.yaxis.set_ticks(delta['score'])\n    ax.yaxis.grid(True)\n    ax.spines['right'].set_visible(False)\n    ax.spines['top'].set_visible(False)\n    plt.show()\n    return\n\nplotme()\n</code></pre>\n\n<p>Output:\n<a href=\"https://i.stack.imgur.com/VjcSt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VjcSt.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "class", "enums"], "comments": [{"owner": {"reputation": 7592, "user_id": 840582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/R97cw.png?s=128&g=1", "display_name": "Chen A.", "link": "https://stackoverflow.com/users/840582/chen-a"}, "edited": false, "score": 2, "creation_date": 1567634449, "post_id": 57795713, "comment_id": 102025316, "body": "Why would you need to use <code>description</code> dict in the first place? <code>MyAnotherEnum(3).value</code> would return <code>ccc</code>, while <code>MyAnotherEnum[&#39;ccc&#39;]</code> returns 3"}, {"owner": {"reputation": 614, "user_id": 3526083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ccf9e14a0738d582cbecc2983d48be?s=128&d=identicon&r=PG&f=1", "display_name": "Nath", "link": "https://stackoverflow.com/users/3526083/nath"}, "edited": false, "score": 0, "creation_date": 1567637071, "post_id": 57795713, "comment_id": 102025882, "body": "can explain more what your wanting to achieve with your enum class.. as chen says it doesn&#39;t seem like any extension of enum is needed for your use case"}, {"owner": {"reputation": 308, "user_id": 548123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898d9f81cdbf03b818c90f640c8cc2a3?s=128&d=identicon&r=PG", "display_name": "Allan Deamon", "link": "https://stackoverflow.com/users/548123/allan-deamon"}, "edited": false, "score": 0, "creation_date": 1567697647, "post_id": 57795713, "comment_id": 102049178, "body": "I have enums that have the id (the number) and the name of the enum. Some times, I need a verbose description of this enums. For this case, there is this way I found for encapsulating it without losing the Enum protocol/api."}, {"owner": {"reputation": 308, "user_id": 548123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898d9f81cdbf03b818c90f640c8cc2a3?s=128&d=identicon&r=PG", "display_name": "Allan Deamon", "link": "https://stackoverflow.com/users/548123/allan-deamon"}, "edited": false, "score": 0, "creation_date": 1567697839, "post_id": 57795713, "comment_id": 102049290, "body": "The point is there a lot of new cases that the description name is the same as the name, so instead of creating this duplication of code every new Enum, the ideia is to create a programmatically way to make the descriptions to be the names of the enum itself. And when needed, override the description manually when it&#39;s different."}], "answers": [{"tags": [], "owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "is_accepted": false, "score": 3, "last_activity_date": 1568132151, "last_edit_date": 1568132151, "creation_date": 1568071096, "answer_id": 57862226, "question_id": 57795713, "link": "https://stackoverflow.com/questions/57795713/create-property-for-enum-class-in-python/57862226#57862226", "title": "Create property for Enum class in Python", "body": "<p>If you are using Python 3.6+ the stdlib <code>Enum</code> will do; otherwise, you'll need to use the <a href=\"https://pypi.org/project/aenum/\" rel=\"nofollow noreferrer\"><code>aenum</code></a><sup>1</sup> library.  In both cases you'll need a to create your own <code>_generate_next_value_</code> method:</p>\n\n<pre><code>def _generate_next_value_(name, start, count, last_values):\n    return start+count, name\n</code></pre>\n\n<ul>\n<li>name is the name of the member</li>\n<li>start is the start value for the enumeration (defaults to 1)</li>\n<li>count is the number of members so far</li>\n<li>last_values is a list of the member values so far</li>\n</ul>\n\n<p>and borrow <code>classproperty</code> from <a href=\"https://stackoverflow.com/a/42252767/208880\">this answer</a>:</p>\n\n<pre><code>class classproperty:\n\n    def __init__(self, func):\n        self._func = func\n\n    def __get__(self, obj, owner):\n        return self._func(owner)\n</code></pre>\n\n<p>If using <code>aenum</code> (my favorite), the base class will look like:</p>\n\n<pre><code>from aenum import Enum, auto\n\nclass DescriptionEnum(Enum):\n    _init_ = 'value description'\n\n    @staticmethod\n    def _generate_next_value_(name, start, count, last_values):\n        return start+count, name\n\n    @classproperty\n    def description(cls):\n        return {\n            e.value: e.description\n            for e in cls\n            }\n    print(description)\n</code></pre>\n\n<p>If using Python 3.6 and the stdlib <code>Enum</code> the base class will look like:</p>\n\n<pre><code>from enum import Enum, auto\n\nclass DescriptionEnum(Enum):\n\n    def __new__(cls, value, description):\n        obj = object.__new__(cls)\n        obj._value_ = value\n        obj.description = description\n        return obj\n\n    def _generate_next_value_(name, start, count, last_values):\n        print('generating value', start+count, name)\n        return start+count, name\n\n    @classproperty\n    def description(cls):\n        return {\n            e.value: e.description\n            for e in cls\n            }\n</code></pre>\n\n<p>The difference between those two base classes is the <code>_init_</code> line vs. the <code>__new__</code> method.  In both cases, your final class would be:</p>\n\n<pre><code>class MyAnotherEnum(DescriptionEnum):\n    aaa = auto()\n    bbb = auto()\n    ccc = auto()\n</code></pre>\n\n<p>and in use:</p>\n\n<pre><code>&gt;&gt;&gt; print(list(MyAnotherEnum))\n    [&lt;MyAnotherEnum.aaa: 1&gt;, &lt;MyAnotherEnum.bbb: 2&gt;, &lt;MyAnotherEnum.ccc: 3&gt;]\n\n&gt;&gt;&gt; print(MyAnotherEnum.bbb)\n    MyAnotherEnum.bbb\n\n&gt;&gt;&gt; print(MyAnotherEnum.bbb.description)\n    bbb\n\n&gt;&gt;&gt; print(MyAnotherEnum.description)\n    {1: 'aaa', 2: 'bbb', 3: 'ccc'}\n\n&gt;&gt;&gt; print(MyAnotherEnum.description[2])\n    bbb\n</code></pre>\n\n<p>While your <code>Enum</code>s didn't have it, this new one has a <code>description</code> property for each member, as well as for the <code>Enum</code> as a whole.  One advantage of this is you can use the same base class for both enums whose name is the description, and enums whose description is specified:</p>\n\n<pre><code>class MyNormalEnum(DescriptionEnum):\n    aaa = 1, 'howdy'\n    bbb = 2, 'bye'\n    ccc = 3, 'whatever'\n</code></pre>\n\n<p>and in use:</p>\n\n<pre><code>&gt;&gt;&gt; print(list(MyNormalEnum))\n    [&lt;MyNormalEnum.aaa: 1&gt;, &lt;MyNormalEnum.bbb: 2&gt;, &lt;MyNormalEnum.ccc: 3&gt;]\n\n&gt;&gt;&gt; print(MyNormalEnum.bbb)\n    MyNormalEnum.bbb\n\n&gt;&gt;&gt; print(MyNormalEnum.bbb.description)\n    bye\n\n&gt;&gt;&gt; print(MyNormalEnum.description)\n    {1: 'howdy', 2: 'bye', 3: 'whatever'}\n\n&gt;&gt;&gt; print(MyNormalEnum.description[2])\n    bye\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup> Disclosure:  I am the author of the <a href=\"https://docs.python.org/3/library/enum.html\" rel=\"nofollow noreferrer\">Python stdlib <code>Enum</code></a>, the <a href=\"https://pypi.python.org/pypi/enum34\" rel=\"nofollow noreferrer\"><code>enum34</code> backport</a>, and the <a href=\"https://pypi.python.org/pypi/aenum\" rel=\"nofollow noreferrer\">Advanced Enumeration (<code>aenum</code>)</a>  library.</p>\n"}], "owner": {"reputation": 308, "user_id": 548123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898d9f81cdbf03b818c90f640c8cc2a3?s=128&d=identicon&r=PG", "display_name": "Allan Deamon", "link": "https://stackoverflow.com/users/548123/allan-deamon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1568132151, "creation_date": 1567631650, "last_edit_date": 1567698465, "question_id": 57795713, "link": "https://stackoverflow.com/questions/57795713/create-property-for-enum-class-in-python", "title": "Create property for Enum class in Python", "body": "<p>I had to create a extra mapping in an Enum to save additional information, like an verbose description of each enum case, but without losing the Enum classes properties. Ex:</p>\n\n<pre><code>class MyEnumBase:\n    description = {\n        1: 'Description 1',\n        2: 'This is anover description',\n        3: 'la la la',\n    }\n\nclass MyEnum(MyEnumBase, Enum):\n    First = 1\n    Second = 2\n    Third = 3\n</code></pre>\n\n<p>So I access it like this:\n<code>MyEnum.description[3] ==  'la la la'</code>.</p>\n\n<p>How can I extend the Enum class so in the cases where the descriptions are the same as the enum name, it would populate this dictionary with the names of the fields?</p>\n\n<p>Eg:</p>\n\n<pre><code>class MyAnotherEnum(CustomEnumBase):\n    aaa = 1\n    bbb = 2\n    ccc = 3\n</code></pre>\n\n<p>so that <code>MyAnotherEnum.description[3] == 'ccc'</code>, auto generating the <code>description</code> property for every Enum created from this <code>CustomEnumBase</code>.</p>\n\n<p>I tried to extend the <code>Enum</code> class but all the things I've tried failed. I was thinking something like this:</p>\n\n<pre><code>class CustomEnumBase:\n    @property\n    def names(cls):\n        return {\n            id:member.name\n            for id, member in cls._value2member_map_.items()\n        }\n</code></pre>\n\n<p>There are 2 restrictions:</p>\n\n<ol>\n<li><p>It should extend python Enum classes, so the places where an Enum is expected it behaves correctly. There are some third party codes that rely on this.</p></li>\n<li><p>It should keep access to the description as a mapping, as this protocol is already expected and used in the codebase. So changing it to <code>MyAnotherEnum.description()[id]</code> is not viable, as it expect a mapping (dict), not a function.</p></li>\n</ol>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "deep-learning"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 8922090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16dbb20ebff592b71ce42ec290a40b3?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/8922090/josh"}, "edited": false, "score": 0, "creation_date": 1605194603, "post_id": 57812490, "comment_id": 114581503, "body": "Were you able to get to the bottom of this yourself.  I&#39;m in a similar situation and haven&#39;t found anything online to help.  The .h5 file shows a nice graph in <a href=\"https://netron.app/\" rel=\"nofollow noreferrer\">Netron</a>, but when I convert it to pb (or just save it as a pb instead of h5) it is completely different in Netron.  Just wondering if you got anywhere with this.  <a href=\"https://stackoverflow.com/questions/64794378/input-output-nodes-in-tensorflow-model-are-unrecognizable-from-original-build\">Here</a> is my inquire on this."}, {"owner": {"reputation": 396, "user_id": 5510818, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/vPZef.png?s=128&g=1", "display_name": "vade", "link": "https://stackoverflow.com/users/5510818/vade"}, "reply_to_user": {"reputation": 139, "user_id": 8922090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16dbb20ebff592b71ce42ec290a40b3?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/8922090/josh"}, "edited": false, "score": 0, "creation_date": 1605984420, "post_id": 57812490, "comment_id": 114823197, "body": "Yea, I switched to PyTorch. I know its not helpful but christ TF is a mess."}], "tags": [], "owner": {"reputation": 396, "user_id": 5510818, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/vPZef.png?s=128&g=1", "display_name": "vade", "link": "https://stackoverflow.com/users/5510818/vade"}, "is_accepted": false, "score": 0, "last_activity_date": 1567714804, "creation_date": 1567714804, "answer_id": 57812490, "question_id": 57795697, "link": "https://stackoverflow.com/questions/57795697/tf-keras-h5-to-tensorflow-pb-resulting-pb-lacks-output-node-even-though-input/57812490#57812490", "title": "tf.keras h5 to Tensorflow pb - resulting pb lacks output node even though input clearly has it?", "body": "<p>So, it appears that tf 2.0 resolve this bug (see <a href=\"https://github.com/tensorflow/tensorflow/issues/26809\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/26809</a>) , which is unhelpful because 1.14 can export to a valid protobuf (which I need, I can't use the SaveModel new format in 2.0 since coreML converters can't read it, and onnx converters die on this saved model for some other reason) - so this entire endeavor appears to be a dead end.</p>\n\n<p>Can one seriously not export TF 2.0 Keras model to a Protobuffers compatible with 1.14 runtime? </p>\n"}], "owner": {"reputation": 396, "user_id": 5510818, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/vPZef.png?s=128&g=1", "display_name": "vade", "link": "https://stackoverflow.com/users/5510818/vade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 702, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567714804, "creation_date": 1567631537, "question_id": 57795697, "link": "https://stackoverflow.com/questions/57795697/tf-keras-h5-to-tensorflow-pb-resulting-pb-lacks-output-node-even-though-input", "title": "tf.keras h5 to Tensorflow pb - resulting pb lacks output node even though input clearly has it?", "body": "<p>I am using Google Collab, training a sequence model (NASNet) with a custom output. I export my model to an h5 using the <code>model.save()</code> method. I use a separate ipynb to load my h5 and convert it to a pb, however, my resulting pb lacks a named output node, and I cannot get predictions from my resulting model.</p>\n\n<p>My model sequence definition:</p>\n\n<pre><code>model = tf.keras.Sequential([\n  base_model,\n  tf.keras.layers.GlobalAveragePooling2D(),\n  tf.keras.layers.Dense(num_labels, activation = 'sigmoid', name=\"output\")])\n\nmodel.summary()\n</code></pre>\n\n<p>I am able to make compile my model, train, and make predictions in collab. </p>\n\n<p>I export my model like so:</p>\n\n<pre><code>model.save(model_path)\n</code></pre>\n\n<p>To convert to Tensorflow PB, I use a new ipynb and am able to 'successfully' run the conversion (ie, it doesn't fail).</p>\n\n<p>The conversion code seems widely used elsewhere. Here it is:</p>\n\n<pre><code>import tensorflow as tf\nimport tensorflow.keras.backend as K\n\nK.set_learning_phase(0)\n\nrestored_model = tf.keras.models.load_model(model_path)\nprint(restored_model.outputs)\nprint(restored_model.inputs)\n\ndef freeze_session(session, keep_var_names=None, output_names=None, clear_devices=True):\n    \"\"\"\n    Freezes the state of a session into a pruned computation graph.\n\n    Creates a new computation graph where variable nodes are replaced by\n    constants taking their current value in the session. The new graph will be\n    pruned so subgraphs that are not necessary to compute the requested\n    outputs are removed.\n    @param session The TensorFlow session to be frozen.\n    @param keep_var_names A list of variable names that should not be frozen,\n                          or None to freeze all the variables in the graph.\n    @param output_names Names of the relevant graph outputs.\n    @param clear_devices Remove the device directives from the graph for better portability.\n    @return The frozen graph definition.\n    \"\"\"\n    from tensorflow.python.framework.graph_util import convert_variables_to_constants\n    graph = session.graph\n    with graph.as_default():\n        freeze_var_names = list(set(v.op.name for v in tf.global_variables()).difference(keep_var_names or []))\n        output_names = output_names or []\n        output_names += [v.op.name for v in tf.global_variables()]\n        # Graph -&gt; GraphDef ProtoBuf\n        input_graph_def = graph.as_graph_def()\n        if clear_devices:\n            for node in input_graph_def.node:\n                node.device = \"\"\n        frozen_graph = convert_variables_to_constants(session, input_graph_def,\n                                                      output_names, freeze_var_names)\n        return frozen_graph\n\n\n\n\nfrozen_graph = freeze_session(K.get_session(),\n                              output_names=[out.op.name for out in restored_model.outputs], \n                             clear_devices=True)\n\ntf.train.write_graph(frozen_graph, \"/tmp\", model_name+\".pb\", as_text=False)\n\noutput_model_name = model_name + \".pb\"\noutput_model_path = \"/tmp/\" + output_model_name\n</code></pre>\n\n<p>This resulting pb appears well formed at first glance, but Netron and other tooling indicates it has no final output node in the graph.</p>\n\n<p>I am able to verify my tf.keras h5 model has inputs and outputs in my first ipynb via:</p>\n\n<pre><code>print(model.input.op.name)\nprint(model.output.op.name)\n</code></pre>\n\n<p>Which returns:</p>\n\n<pre><code>NASNet_input\noutput/Identity\n</code></pre>\n\n<p>And when I load my saved h5 in prep to convert to Tensorflow protobuff, I also check the inout and output names:</p>\n\n<pre><code>print(restored_model.outputs)\nprint(restored_model.inputs)\n</code></pre>\n\n<p>Which returns in TF naming convention:</p>\n\n<pre><code>[&lt;tf.Tensor 'output/Sigmoid:0' shape=(?, 229) dtype=float32&gt;]\n[&lt;tf.Tensor 'NASNet_input:0' shape=(?, 224, 224, 3) dtype=float32&gt;]\n</code></pre>\n\n<p>So clearly my h5 appears to have an output node named 'output' - as confirmed in Netron when I inspect the H5. </p>\n\n<p>Why does my conversion code appear to be removing the output node in the pb graph?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "web-scraping", "scrapy", "amazon"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1567650741, "post_id": 57795692, "comment_id": 102028172, "body": "I can&#39;t tell what you&#39;;re doing but you shouldn&#39;t be using Tor for this."}, {"owner": {"reputation": 1, "user_id": 12009950, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208966679713703/picture?type=large", "display_name": "Andrea Casettari", "link": "https://stackoverflow.com/users/12009950/andrea-casettari"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1567664876, "post_id": 57795692, "comment_id": 102031486, "body": "Using TOR just for testing purpose and to compare with other vendors\u2019s services."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 1, "creation_date": 1567666631, "post_id": 57795692, "comment_id": 102032220, "body": "Well it sounds like the providers are the issue. Just benchmark each one and consider finding a different one as well."}, {"owner": {"reputation": 1, "user_id": 12009950, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208966679713703/picture?type=large", "display_name": "Andrea Casettari", "link": "https://stackoverflow.com/users/12009950/andrea-casettari"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1567667746, "post_id": 57795692, "comment_id": 102032692, "body": "Just discovered that we were using same IP instead changing it on each request. Now we are looking how to ask new IP each time (these services should work just like this)"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 1, "creation_date": 1567668558, "post_id": 57795692, "comment_id": 102033046, "body": "Those services rotate ips for you. You just connect to the proxy and it will send it through a random upstream ip."}], "answers": [{"tags": [], "owner": {"reputation": 599, "user_id": 446440, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/586d46ac6cd092111651e2d51669e326?s=128&d=identicon&r=PG", "display_name": "ferran87", "link": "https://stackoverflow.com/users/446440/ferran87"}, "is_accepted": false, "score": 0, "last_activity_date": 1578824290, "creation_date": 1578824290, "answer_id": 59702840, "question_id": 57795692, "link": "https://stackoverflow.com/questions/57795692/scrapy-extremely-slow-probably-bottleneck/59702840#59702840", "title": "Scrapy extremely slow: probably bottleneck", "body": "<p>Amazon, like other big websites, is using IA to detect the incoming requests. It means that if you are requesting a lot of traffic to the same \"logical\" order on the same website, they will detect you and try to ban you (even if you are using other proxies).</p>\n\n<p>Try to separate and do it on different servers. Instead of using only one big server, use several small servers.</p>\n\n<p>My recommendations:</p>\n\n<ol>\n<li>Use proxies that are reliable (different providers)</li>\n<li>Use random time to request every URL (just to confuse the detection algorithm and to avoid being identified as the same user using different IP)</li>\n<li>Use different agents too (rotating)</li>\n<li>Be nice to the site you are going to scrape. See <code>robots.txt</code> file to know more</li>\n<li>If you are scraping a list of elements in Amazon (for instance, the top products sell in books category), don't scrape it sequentially. Pick up randomly to scrape that list of products in order to be unpredictable</li>\n<li>Use a good structure to scrape (parallelizing). I suggest use:\n\n<ul>\n<li>Store the URLs to scrape in Redis</li>\n<li>Use differents ScrapyD servers to run horizontal scraping</li>\n<li>Use monitoring system to review logs, to review errors and manage the servers</li>\n</ul></li>\n</ol>\n\n<p>I hope it helps!</p>\n"}], "owner": {"reputation": 1, "user_id": 12009950, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208966679713703/picture?type=large", "display_name": "Andrea Casettari", "link": "https://stackoverflow.com/users/12009950/andrea-casettari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578824290, "creation_date": 1567631511, "question_id": 57795692, "link": "https://stackoverflow.com/questions/57795692/scrapy-extremely-slow-probably-bottleneck", "title": "Scrapy extremely slow: probably bottleneck", "body": "<p>I need help to find the bottleneck with my scrapy/python based scraper.</p>\n\n<p>We are scraping products from Amazon (Italy at the moment) but we are struggling with overall requests throughput.\nWe are using backconnect rotating proxies: StormProxies (50 threads plan) + Proxyrotator (100 threads) + TOR but even 250+ available threads we can scrape only 1/2 URLs per second...\nWe are running it on OVH dedicated server, 8 core x 16GB ram, redis celery and docker as additional tools</p>\n\n<p>I am an IT technician, the software is developed by my indian dev guy, if you need additional info or code just ask!</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1567631456, "post_id": 57795642, "comment_id": 102024498, "body": "Can you share the <code>urls.py</code> and the view that is triggered by <code>&#47;</code>?"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 1, "creation_date": 1567631481, "post_id": 57795642, "comment_id": 102024503, "body": "We need your <code>urls.py</code> and views to point at error. You haven&#39;t set that name &quot;dashboard&quot; to a corresponding url regex and a view."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1567631637, "post_id": 57795642, "comment_id": 102024558, "body": "<a href=\"https://stackoverflow.com/q/38390177/1216776\">stackoverflow.com/q/38390177/1216776</a>"}, {"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "edited": false, "score": 0, "creation_date": 1567632151, "post_id": 57795642, "comment_id": 102024698, "body": "Please, share your <code>urls.py</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8815, "user_id": 4468021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NVYBZ.jpg?s=128&g=1", "display_name": "Clarity", "link": "https://stackoverflow.com/users/4468021/clarity"}, "is_accepted": true, "score": 1, "last_activity_date": 1567668446, "creation_date": 1567668446, "answer_id": 57800426, "question_id": 57795642, "link": "https://stackoverflow.com/questions/57795642/noreversematch-at-reverse-for-dashboard-not-found-dashboard-is-not-a-vali/57800426#57800426", "title": "NoReverseMatch at / Reverse for &#39;dashboard&#39; not found. &#39;dashboard&#39; is not a valid view function or pattern name", "body": "<p>In your template you link to <code>{% url 'dashboard' %}</code>, however in your <code>urls.py</code> you don't have a route for it. You can add it like this:</p>\n\n<pre><code> path('dashboard/', /* dashboard view here */, name='dashboard'), \n</code></pre>\n\n<p>Alternatively, if you have a <code>dashboard</code> app:</p>\n\n<pre><code> path('dashboard/', include('pages.urls'), name='dashboard'), \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12021873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe684f509ae4a3e26181d5d515da92c0?s=128&d=identicon&r=PG&f=1", "display_name": "piddi", "link": "https://stackoverflow.com/users/12021873/piddi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 57800426, "answer_count": 1, "score": 0, "last_activity_date": 1567668446, "creation_date": 1567631205, "last_edit_date": 1567666598, "question_id": 57795642, "link": "https://stackoverflow.com/questions/57795642/noreversematch-at-reverse-for-dashboard-not-found-dashboard-is-not-a-vali", "title": "NoReverseMatch at / Reverse for &#39;dashboard&#39; not found. &#39;dashboard&#39; is not a valid view function or pattern name", "body": "<p>I am beginner in django, I have started the course of it last week and got stuck into this error from last two days. Seeking for the help to get out from that mess I have made. </p>\n\n<p>I am not able to open the dashboard of my site don't know what has happened.\nI have been searching for this from last two days. Still haven't got anything.</p>\n\n<p>Environment:</p>\n\n<pre><code>    Request Method: GET\n    Request URL: http://127.0.0.1:8000/\n\n    Django Version: 2.2.3\n    Python Version: 3.7.3\n    Installed Applications:\n    ['pages.apps.PagesConfig',\n     'listings.apps.ListingsConfig',\n     'realtors.apps.RealtorsConfig',\n     'accounts.apps.AccountsConfig',\n     'django.contrib.admin',\n     'django.contrib.auth',\n     'django.contrib.contenttypes',\n     'django.contrib.sessions',\n     'django.contrib.messages',\n     'django.contrib.staticfiles',\n     'django.contrib.humanize']\n    Installed Middleware:\n    ['django.middleware.security.SecurityMiddleware',\n     'django.contrib.sessions.middleware.SessionMiddleware',\n     'django.middleware.common.CommonMiddleware',\n     'django.middleware.csrf.CsrfViewMiddleware',\n     'django.contrib.auth.middleware.AuthenticationMiddleware',\n     'django.contrib.messages.middleware.MessageMiddleware',\n     'django.middleware.clickjacking.XFrameOptionsMiddleware']\n</code></pre>\n\n<p>Template error:</p>\n\n<pre><code>    In template C:\\Users\\kamal jeet singh\\wproject\\kt\\webproject\\Template\\partials\\_nav.html, error at line 50\n       Reverse for 'dashboard' not found. 'dashboard' is not a valid view function or pattern name.\n       40 : \n       41 :         &lt;ul class=\"navbar-nav ml-auto\"&gt;\n       42 :           {% if user.is_authenticated %}\n       43 :             &lt;li\n       44 :             {% if 'dashboard' in request.path %}\n       45 :               class=\"nav-item active mr-3\"\n       46 :             {% else %}\n       47 :               class=\"nav-item mr-3\"\n       48 :             {% endif %}\n       49 :             &gt;\n       50 :               &lt;a class=\"nav-link\" href=\" {% url 'dashboard' %} \"&gt;\n       51 :                 Welcome {{ user.username }}, \"Dashboard\" &lt;/a&gt;\n       52 :             &lt;/li&gt;\n       53 :             &lt;li class=\"nav-item mr-3\" &gt;\n       54 :               &lt;a href=\"javascript:{document.getElementById('logout').submit()}\" class=\"nav-link\"&gt;\n       55 :                 &lt;i class=\"fas fa-sign-out-alt\"&gt;&lt;/i&gt; Logout\n       56 :               &lt;/a&gt;\n       57 :               &lt;form action=\"{% url 'logout' %}\" method=\"POST\" id=\"logout\"&gt;\n       58 :                 {% csrf_token %}\n       59 :                 &lt;input type=\"hidden\"&gt;\n       60 :               &lt;/form&gt;\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\core\\handlers\\exception.py\" in inner\n      34.             response = get_response(request)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\core\\handlers\\base.py\" in _get_response\n      115.                 response = self.process_exception_by_middleware(e, request)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\core\\handlers\\base.py\" in _get_response\n      113.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\webproject\\pages\\views.py\" in index\n      21.     return render(request, 'pages/index.html', context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\shortcuts.py\" in render\n      36.     content = loader.render_to_string(template_name, context, request, using=using)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\loader.py\" in render_to_string\n      62.     return template.render(context, request)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\backends\\django.py\" in render\n      61.             return self.template.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render\n      171.                     return self._render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in _render\n      163.         return self.nodelist.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render\n      937.                 bit = node.render_annotated(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render_annotated\n      904.             return self.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\loader_tags.py\" in render\n      150.             return compiled_parent._render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in _render\n      163.         return self.nodelist.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render\n      937.                 bit = node.render_annotated(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render_annotated\n      904.             return self.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\loader_tags.py\" in render\n      188.             return template.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render\n      173.                 return self._render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in _render\n      163.         return self.nodelist.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render\n      937.                 bit = node.render_annotated(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render_annotated\n      904.             return self.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\defaulttags.py\" in render\n      309.                 return nodelist.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render\n      937.                 bit = node.render_annotated(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\base.py\" in render_annotated\n      904.             return self.render(context)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\template\\defaulttags.py\" in render\n      443.             url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\urls\\base.py\" in reverse\n      90.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))\n\n    File \"C:\\Users\\kamal jeet singh\\wproject\\kt\\lib\\site-packages\\django\\urls\\resolvers.py\" in _reverse_with_prefix\n      668.         raise NoReverseMatch(msg)\n\n    Exception Type: NoReverseMatch at /\n    Exception Value: Reverse for 'dashboard' not found. 'dashboard' is not a valid view function or pattern name.\n\nException Type: NoReverseMatch at /\n    Exception Value: Reverse for 'dashboard' not found. 'dashboard' is not a valid view function or pattern name.\n</code></pre>\n\n<p>Urls.py</p>\n\n<pre><code>from django.contrib import admin\nfrom django.urls import path, include\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    path('', include('pages.urls')),\n    path('listings/', include('listings.urls')),\n    path('admin/', admin.site.urls),\n] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "hadoop", "pyspark", "hbase"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 7835401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c6ae6fee0f30c193b44101176c0986d?s=128&d=identicon&r=PG&f=1", "display_name": "Teja Parimi", "link": "https://stackoverflow.com/users/7835401/teja-parimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1567640617, "creation_date": 1567640617, "answer_id": 57796791, "question_id": 57795623, "link": "https://stackoverflow.com/questions/57795623/spark-pyspark-integration-with-hbase/57796791#57796791", "title": "spark/pyspark integration with HBase", "body": "<p>1)<strong>Is it possible to connect Spark 2.4.3 connect to a remote HBase 1.3.2 server?</strong> </p>\n\n<blockquote>\n  <p>Yes it is possible. you can connect either using Hbase client or\n  using shc-core as well.</p>\n</blockquote>\n\n<p>2) <strong>java.lang.NoSuchMethodError: org.json4s.jackson.JsonMethods$.parse(Lorg/json4s/JsonInput;Z)Lorg/json4s/JsonAST$JValue;</strong></p>\n\n<blockquote>\n  <p>This means there is one more json4s jar with different version. Check\n  the full stack trace. from which class it's being called. remove the\n  additional jar.</p>\n</blockquote>\n\n<p>3) <strong>Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hbase.client.TableDescriptor</strong></p>\n\n<blockquote>\n  <p>This jar shc-core-1.1.3-2.4-s_2.11.jar Uses hbase version >=2.0 in\n  which TableDescriptor Class has been introduced. In Hbase 1.3.2\n  version there is no such class instead it has HTableDescriptor. If you\n  wish to work with latest shc-core version, you have you use hbase\n  version >=2.0,  If you your hbase version &lt; 2.0 then use compatible\n  shc-core version ( &lt;= v1.1.2-2.2)</p>\n</blockquote>\n\n<p>4)<strong>I know this shc-core version works with Spark 2.3.3 but what are my alternative options for 2.4+ ?</strong></p>\n\n<blockquote>\n  <p>shc-core is pretty much straight forward one. it works with any 2.4\n  as well. it will provide sql plan for spark on how to convert\n  different type columns to bytes  (back and forth ). Make sure you are\n  picking right jar for your hbase one.</p>\n</blockquote>\n"}], "owner": {"reputation": 35, "user_id": 10970478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b48190baa178dae5dc1a3f797e0bfc69?s=128&d=identicon&r=PG&f=1", "display_name": "noypikobe24", "link": "https://stackoverflow.com/users/10970478/noypikobe24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567640617, "creation_date": 1567631076, "question_id": 57795623, "link": "https://stackoverflow.com/questions/57795623/spark-pyspark-integration-with-hbase", "title": "spark/pyspark integration with HBase", "body": "<p>Is it possible to connect Spark 2.4.3 connect to a remote HBase 1.3.2 server? </p>\n\n<p>I've tried using this version:</p>\n\n<p><a href=\"https://repo.hortonworks.com/content/repositories/releases/com/hortonworks/shc-core/1.1.1-2.1-s_2.11/\" rel=\"nofollow noreferrer\">https://repo.hortonworks.com/content/repositories/releases/com/hortonworks/shc-core/1.1.1-2.1-s_2.11/</a></p>\n\n<p>but there seems to be a compatibility issue: </p>\n\n<p>java.lang.NoSuchMethodError: org.json4s.jackson.JsonMethods$.parse(Lorg/json4s/JsonInput;Z)Lorg/json4s/JsonAST$JValue;</p>\n\n<pre><code>spark-submit --packages com.hortonworks:shc-core:1.1.1-2.1-s_2.11 --repositories http://repo.hortonworks.com/content/groups/public/ /hbase-read.py\n</code></pre>\n\n<p>read.py is just a simple read for testing:</p>\n\n<pre><code>from pyspark.sql import SQLContext, SparkSession\n\nspark = SparkSession \\\n        .builder \\\n        .appName(\"test\") \\\n        .enableHiveSupport() \\\n        .getOrCreate() \n\nsc = spark.sparkContext\nsqlc = SQLContext(sc)\ndata_source_format='org.apache.spark.sql.execution.datasources.hbase'\n\n\ncatalog = ''.join(\"\"\"{\n    \"table\":{\"namespace\":\"default\", \"name\":\"testtable\"},\n    \"rowkey\":\"key\",\n    \"columns\":{\n        \"col0\":{\"cf\":\"rowkey\", \"col\":\"key\", \"type\":\"string\"},\n        \"col1\":{\"cf\":\"cf\", \"col\":\"col1\", \"type\":\"string\"}\n    }\n}\"\"\".split())\n\ndf = sqlc.read.options(catalog=catalog).format(data_source_format).load()\ndf.show()\n</code></pre>\n\n<p>I know this shc-core version works with Spark 2.3.3 but what are my alternative options for 2.4+ ? </p>\n\n<p>I've built from shc-core from source but when I reference the jar, I receive this error: </p>\n\n<p>Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hbase.client.TableDescriptor</p>\n\n<p>even though I've referenced all the necessary jars:</p>\n\n<pre><code>spark-submit --jars /shc/core/target/shc-core-1.1.3-2.4-s_2.11.jar,/hbase-jars/hbase-client-1.3.2.jar /hbase-read.py\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1567631389, "post_id": 57795601, "comment_id": 102024465, "body": "<code>df.pivot_table(index=&#39;Product&#39;, columns=&#39;Store&#39;, aggfunc=&#39;count&#39;)</code>"}], "owner": {"reputation": 1111, "user_id": 8618380, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/10211660306718142/picture?type=large", "display_name": "Alessandro Ceccarelli", "link": "https://stackoverflow.com/users/8618380/alessandro-ceccarelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1567631382, "answer_count": 0, "score": 1, "last_activity_date": 1567631493, "creation_date": 1567630922, "question_id": 57795601, "link": "https://stackoverflow.com/questions/57795601/count-the-number-of-times-a-pair-of-value-occurs-in-a-dartaframe", "closed_reason": "Duplicate", "title": "Count the number of times a pair of value occurs in a Dartaframe", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>print(df)\n\nProduct      Store    Quantity_Sold\n   A          NORTH          10\n   A          NORTH          5\n   A          SOUTH          8\n\n   B          SOUTH          8\n   B          SOUTH          5\n\n(...)\n</code></pre>\n\n<p>I would like to count the number of times the same pair of product and store is present; to illustrate:</p>\n\n<pre><code>print(final_df)\n\nProduct      Store       count\n   A          NORTH        2\n   A          SOUTH        1\n\n   B          SOUTH        2\n\n(...)\n</code></pre>\n\n<p>I tried with:</p>\n\n<pre><code>df[\"Product\"].value_counts()\n</code></pre>\n\n<p>But it only works with single columns. How can I create final_df?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 352, "user_id": 4669458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUvHx.png?s=128&g=1", "display_name": "Kevin Troy", "link": "https://stackoverflow.com/users/4669458/kevin-troy"}, "edited": false, "score": 0, "creation_date": 1567631208, "post_id": 57795591, "comment_id": 102024394, "body": "Do you have missing values in your data?  In pandas dataframes, only float-type columns may have missing data."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1567631274, "post_id": 57795591, "comment_id": 102024419, "body": "It&#39;s probably because you have <code>None</code> or <code>nan</code> in your column. In which case, the column type is always <code>float</code>."}, {"owner": {"reputation": 352, "user_id": 4669458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUvHx.png?s=128&g=1", "display_name": "Kevin Troy", "link": "https://stackoverflow.com/users/4669458/kevin-troy"}, "edited": false, "score": 0, "creation_date": 1567631507, "post_id": 57795591, "comment_id": 102024516, "body": "Also, be aware that instead of astype(int) pandas will work better if you use astype(np.int64) (or np.int32, np.int16, etc. depending on what&#39;s appropriate for your data)"}], "answers": [{"comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1567631434, "post_id": 57795647, "comment_id": 102024489, "body": "I believe OP already tried <code>astype(int)</code> and it did not work."}, {"owner": {"reputation": 393, "user_id": 7700802, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ade1368521f15e2a728422f50ac96b88?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfy", "link": "https://stackoverflow.com/users/7700802/wolfy"}, "edited": false, "score": 0, "creation_date": 1567631503, "post_id": 57795647, "comment_id": 102024514, "body": "I did not set df = df.astype(int) originally, this now works"}], "tags": [], "owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "is_accepted": true, "score": 1, "last_activity_date": 1567631229, "creation_date": 1567631229, "answer_id": 57795647, "question_id": 57795591, "link": "https://stackoverflow.com/questions/57795591/deleting-decimals-from-a-pandas-dataframe/57795647#57795647", "title": "Deleting decimals from a pandas dataframe", "body": "<p>You need to re-assign <code>dataframe</code>\n(which is, what I suppose your error is):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df = pd.DataFrame(data={\"col\": [24.00, 2.00, 3.00]})\n&gt;&gt;&gt; df.dtypes\ncol    float64\ndtype: object\n&gt;&gt;&gt; df\n    col\n0  24.0\n1   2.0\n2   3.0\n&gt;&gt;&gt; df=df.astype(int)\n&gt;&gt;&gt; df\n   col\n0   24\n1    2\n2    3\n&gt;&gt;&gt; df.dtypes\ncol    int32\ndtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "is_accepted": false, "score": 1, "last_activity_date": 1567631636, "creation_date": 1567631636, "answer_id": 57795710, "question_id": 57795591, "link": "https://stackoverflow.com/questions/57795591/deleting-decimals-from-a-pandas-dataframe/57795710#57795710", "title": "Deleting decimals from a pandas dataframe", "body": "<p>You can solve this by setting the pandas <code>option</code>, <code>precision</code> to 0.</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame(data={\"col\": [24.00, 2.00, 3.00]})\nprint(df)\n    col\n0  24.0\n1   2.0\n2   3.0\npd.set_option('precision',0)\nprint(df)\n   col\n0   24\n1    2\n2    3\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 7700802, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ade1368521f15e2a728422f50ac96b88?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfy", "link": "https://stackoverflow.com/users/7700802/wolfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 57795647, "answer_count": 2, "score": 0, "last_activity_date": 1567631636, "creation_date": 1567630861, "question_id": 57795591, "link": "https://stackoverflow.com/questions/57795591/deleting-decimals-from-a-pandas-dataframe", "title": "Deleting decimals from a pandas dataframe", "body": "<p>I have numbers such as </p>\n\n<pre><code>24.00\n\n2.00\n\n3.00\n</code></pre>\n\n<p>I want to have </p>\n\n<pre><code>24 \n\n2 \n\n3\n</code></pre>\n\n<p>I have used .astype(int), round() but I keep getting the former. How do I get this to work?</p>\n"}, {"tags": ["python", "linux", "scons", "gem5"], "comments": [{"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1567648688, "post_id": 57795567, "comment_id": 102027840, "body": "Would be helpful if you include a URL to the gem5 project&#39;s website and/or repo"}, {"owner": {"reputation": 11, "user_id": 12021943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a193c9d0e2e461188ae69482ef026700?s=128&d=identicon&r=PG&f=1", "display_name": "CoderBo", "link": "https://stackoverflow.com/users/12021943/coderbo"}, "reply_to_user": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1567650200, "post_id": 57795567, "comment_id": 102028090, "body": "<a href=\"https://github.com/gem5/gem5\" rel=\"nofollow noreferrer\">Gem5 Project Repo</a>"}, {"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1567713748, "post_id": 57795567, "comment_id": 102055915, "body": "Can you add output from scons -v ?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12021943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a193c9d0e2e461188ae69482ef026700?s=128&d=identicon&r=PG&f=1", "display_name": "CoderBo", "link": "https://stackoverflow.com/users/12021943/coderbo"}, "edited": false, "score": 0, "creation_date": 1567650046, "post_id": 57797502, "comment_id": 102028062, "body": "Thanks for the response @bdbaddog. After fixing the syntax error a similar one is raised in the SConstruct script for gem5. It seems as though the script is written in python2 syntax but is being ran through the python3 interpreter. After speaking to some friends who followed the same steps on Ubuntu based machines and encountered no problems, this bug seems to only affect Arch Based Linux distributions. I&#39;ll continue researching the problem and add the solution here for posterity."}, {"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "reply_to_user": {"reputation": 11, "user_id": 12021943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a193c9d0e2e461188ae69482ef026700?s=128&d=identicon&r=PG&f=1", "display_name": "CoderBo", "link": "https://stackoverflow.com/users/12021943/coderbo"}, "edited": false, "score": 0, "creation_date": 1567713790, "post_id": 57797502, "comment_id": 102055926, "body": "I&#39;d guess Arch based linux distros shipping scons installed with py3.  You can create a virtualenv with py2.7 and then pip install scons there and give it a try?"}], "tags": [], "owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "is_accepted": false, "score": 0, "last_activity_date": 1567648654, "creation_date": 1567648654, "answer_id": 57797502, "question_id": 57795567, "link": "https://stackoverflow.com/questions/57795567/scons-throwing-syntax-errors-when-building-gem5-simulator-on-manjaro-arch-linu/57797502#57797502", "title": "Scons Throwing Syntax Errors when Building gem5 Simulator on Manjaro (Arch) Linux", "body": "<p>The problem you are seeing looks like it should only happen with Python 3.5+ and SCons 3.0.0+</p>\n\n<pre><code>*** Error loading site_init file './site_scons/site_init.py':\n  File \"./site_scons/site_init.py\", line 52\n\n    except SystemExit, e:\n\n                     ^\n\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>site_scons/site_init.py is a file in the package you downloaded to build and is using a form of python's except statement not allowed by python 3+.</p>\n\n<p>Change it to:</p>\n\n<pre><code>except SystemExit as e:\n</code></pre>\n\n<p>See: <a href=\"https://docs.python.org/3/tutorial/errors.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/tutorial/errors.html</a> for more info on python 3 and exceptions.</p>\n\n<p>Note you should probably make a pull request or send a patch to the gem project once you resolve that and any other issues you run into.</p>\n"}], "owner": {"reputation": 11, "user_id": 12021943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a193c9d0e2e461188ae69482ef026700?s=128&d=identicon&r=PG&f=1", "display_name": "CoderBo", "link": "https://stackoverflow.com/users/12021943/coderbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 823, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567650355, "creation_date": 1567630736, "last_edit_date": 1567650355, "question_id": 57795567, "link": "https://stackoverflow.com/questions/57795567/scons-throwing-syntax-errors-when-building-gem5-simulator-on-manjaro-arch-linu", "title": "Scons Throwing Syntax Errors when Building gem5 Simulator on Manjaro (Arch) Linux", "body": "<p>I need to setup a gem5 simulator for a computer architecture class. After downloading all the dependencies for Scons and running the build command for the ALPHA simulator, python throws a syntax error (shown below) flagging the use of a comma during the creation of a SystemExit exception. </p>\n\n<p>To remedy this I tried running scons with python2 and python3. I even tried running my assignment in a virtual machine to no avail. Can someone familiar with Scons explain where this error is coming from and how to remedy it. It would be greatly appreciated.</p>\n\n<p>Command Ran:</p>\n\n<pre><code>scons build/ALPHA/gem5.opt -j4\n</code></pre>\n\n<p>Error Message:</p>\n\n<pre><code>*** Error loading site_init file './site_scons/site_init.py':\n  File \"./site_scons/site_init.py\", line 52\n\n    except SystemExit, e:\n\n                     ^\n\nSyntaxError: invalid syntax\n\n</code></pre>\n\n<p>OS: Manjaro Linux x86_64 </p>\n\n<p>Kernel: 4.19.66-1-MANJARO </p>\n\n<p>Python3 Version: Python 3.7.4</p>\n\n<p>Python2 Version: Python 2.7.16</p>\n\n<p>Latest Version of Scons</p>\n\n<p><strong>Edit</strong></p>\n\n<p><a href=\"https://www.mail-archive.com/gem5-dev@gem5.org/msg31011.html#\" rel=\"nofollow noreferrer\">Here's</a> a link to an archived conversation about the problem. It comes frustratingly close to providing a solution, but it's all I've found on the issue thus far. The search continues. </p>\n"}, {"tags": ["python", "pandas", "selenium", "google-chrome", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 1, "creation_date": 1567631277, "post_id": 57795565, "comment_id": 102024421, "body": "please indent your code properly. Also, explain what &quot;doesn&#39;t work&quot; entails. Are there error messages? If so, include the stack trace."}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 9092889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdcfa1328c907f18e402e88ad3a726ae?s=128&d=identicon&r=PG&f=1", "display_name": "KWx", "link": "https://stackoverflow.com/users/9092889/kwx"}, "is_accepted": false, "score": 0, "last_activity_date": 1567643168, "creation_date": 1567643168, "answer_id": 57797011, "question_id": 57795565, "link": "https://stackoverflow.com/questions/57795565/selenium-with-webdriver-error-printing-null-in-nonetype-case/57797011#57797011", "title": "Selenium with webdriver error &amp; printing null in NoneType case", "body": "<p>You are calling 'get_text' twice. You have put in an error check for one of them but not the other. </p>\n\n<pre><code>for item in list_soup: \n    name.append(item.find('a').get_text())    #&lt;--- you may also need to check item for not None here\n    url_add.append(urljoin(url_base, item.find('a')['href'])) \n    if item is not None: \n        period.append(item.find(class_='period').get_text())   #&lt;--- you are checking item for not None here\n        strong.append(item.find('strong')) \n        term.append(item.find(class_='term')) \n    else: \n        print(\"null\")\n</code></pre>\n\n<p>Or, perhaps you are checking the wrong thing. You might need to check  <code>item.find(class_='period') is not None</code> rather than just <code>if item is not None</code>. </p>\n"}], "owner": {"reputation": 39, "user_id": 10710153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N7JnklE7ujk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jAvvKFEKyl2QZ-ysOurlOGnqDZYQ/mo/photo.jpg?sz=128", "display_name": "fairy starlight", "link": "https://stackoverflow.com/users/10710153/fairy-starlight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567643168, "creation_date": 1567630727, "question_id": 57795565, "link": "https://stackoverflow.com/questions/57795565/selenium-with-webdriver-error-printing-null-in-nonetype-case", "title": "Selenium with webdriver error &amp; printing null in NoneType case", "body": "<p>I want to crowling in a bank site but google chrome driver doesn't work.\nAnd I want to print as 'null' if the type is 'NoneType' \nI wrote this code in jupyter notebook(anaconda3).</p>\n\n<p>I tried to solve this problem using 'if...else...'</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nfrom urllib.request import urlopen\n\nfrom selenium import webdriver \n\ndriver = webdriver.Chrome('./chromedriver.exe') html_dr = driver.execute_script('return document.body.innerHTML') #question\n\nurl_base = 'https://www.kebhana.com/cont/mall/mall08/mall0805/index.jsp?_menuNo=62608'\n\nhtml = urlopen(url_base) soup = BeautifulSoup(html, \"html.parser\")\n\nsoup\n\nprint(soup.find_all('li', 'item type1'))\n\nlen(soup.find_all('li', 'item type1'))\n\nfrom urllib.request import urljoin\n\nname = [] url_add = [] period = [] strong = [] term = []\n\nlist_soup = soup.find_all('li', 'item type1')\n\nfor item in list_soup: name.append(item.find('a').get_text()) url_add.append(urljoin(url_base, item.find('a')['href'])) #question # # #'NoneType' object has no attribute 'get_text' #if item is not None: #period.append(item.find(class_='period').get_text()) #strong.append(item.find('strong')) #term.append(item.find(class_='term')) #else: #print(\"null\")\n\nurl_add[:5]\n\nname[:5]\n\nperiod[:23]\n\nstrong[:23]\n\nimport pandas as pd\n\ndata = {'Name':name, 'URL':url_add} df = pd.DataFrame(data) df.head() df.to_csv('./hana_list.csv', sep=',', encoding='EUC-KR')\n\ndf['URL'][0]\n\nhtml = urlopen(df['URL'][0]) soup_tmp = BeautifulSoup(html, \"html.parser\") soup_tmp\n\nprint(soup_tmp.find('dl', 'prodcutInfo'))\n\nprint(soup_tmp.find('div', 'exist_table'))\n\nprint(soup_tmp.find(class_='tbl_tbldiv'))\n</code></pre>\n\n<p>'NoneType' object has no attribute 'get_text'</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 11585258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d1d4afcfd7e2318bfbdb91673b5370?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/11585258/tommy"}, "edited": false, "score": 0, "creation_date": 1567631436, "post_id": 57795595, "comment_id": 102024491, "body": "Thanks this works. But, i didn&#39;t understand what <code>transform(&#39;any&#39;)</code> is doing here"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 495, "user_id": 11585258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d1d4afcfd7e2318bfbdb91673b5370?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/11585258/tommy"}, "edited": false, "score": 0, "creation_date": 1567631549, "post_id": 57795595, "comment_id": 102024525, "body": "<code>transform</code> applies the function (<code>&#39;any&#39;</code>) on the whole group, and returns the same value to <b>all</b> rows within that group. In this case, if <code>any</code> item is in the list, all rows in that group are marked as <code>True</code>."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1567630887, "creation_date": 1567630887, "answer_id": 57795595, "question_id": 57795544, "link": "https://stackoverflow.com/questions/57795544/filter-all-rows-from-groupby-object/57795595#57795595", "title": "Filter all rows from groupby object", "body": "<p>You can do something like this:</p>\n\n<pre><code>s = (df['Item'].isin(item_list)\n       .groupby([df['InvoiceNo'], df['CategoryNo']])\n       .transform('any')\n    )\n\ndf[s]\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 11585258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d1d4afcfd7e2318bfbdb91673b5370?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/11585258/tommy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 57795595, "answer_count": 1, "score": 1, "last_activity_date": 1567631667, "creation_date": 1567630621, "question_id": 57795544, "link": "https://stackoverflow.com/questions/57795544/filter-all-rows-from-groupby-object", "title": "Filter all rows from groupby object", "body": "<p>I have a dataframe like below</p>\n\n<pre><code>+-----------+------------+---------------+------+-----+-------+\n| InvoiceNo | CategoryNo | Invoice Value | Item | Qty | Price |\n+-----------+------------+---------------+------+-----+-------+\n|         1 |          1 |            77 |  128 |   1 |    10 |\n|         1 |          1 |            77 |  101 |   1 |    11 |\n|         1 |          2 |            77 |  105 |   3 |    12 |\n|         1 |          3 |            77 |  129 |   2 |    10 |\n|         2 |          1 |            21 |  145 |   1 |     9 |\n|         2 |          2 |            21 |  130 |   1 |    12 |\n+-----------+------------+---------------+------+-----+-------+\n</code></pre>\n\n<p>I want to filter the entire group, if any of the items in the list <code>item_list = [128,129,130]</code> is present in that group, after grouping by <code>'InvoiceNo' &amp;'CategoryNo'</code>.</p>\n\n<p>My desired out put is as below</p>\n\n<pre><code>+-----------+------------+---------------+------+-----+-------+\n| InvoiceNo | CategoryNo | Invoice Value | Item | Qty | Price |\n+-----------+------------+---------------+------+-----+-------+\n|         1 |          1 |            77 |  128 |   1 |    10 |\n|         1 |          1 |            77 |  101 |   1 |    11 |\n|         1 |          3 |            77 |  129 |   2 |    10 |\n|         2 |          2 |            21 |  130 |   1 |    12 |\n+-----------+------------+---------------+------+-----+-------+\n</code></pre>\n\n<p>I know how to filter a dataframe using <code>isin()</code>. But, not sure how to do it with <code>groupby()</code></p>\n\n<p>so far i have tried below</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv('data.csv')\n\nitem_list = [128,129,130]\n\ndf.groupby(['InvoiceNo','CategoryNo'])['Item'].isin(item_list)\n</code></pre>\n\n<p>but nothing happens. please guide me how to solve this issue.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1567630554, "post_id": 57795509, "comment_id": 102024175, "body": "Presumably by <code>stack.isEmpty</code> you mean <code>stack.isEmpty()</code>"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1567630600, "post_id": 57795509, "comment_id": 102024189, "body": "<code>elif char not in opening and closing</code> isn&#39;t what you meant either"}, {"owner": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1567630976, "post_id": 57795509, "comment_id": 102024321, "body": "@leafcudde The correct syntax of the <code>elif</code> @khelwood is referring to is:  <code>elif not char in opening and not char in closing:</code>"}, {"owner": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1567631365, "post_id": 57795509, "comment_id": 102024453, "body": "@khelwood Thanks for calling out my errors. Total brainfart"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "reply_to_user": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "edited": false, "score": 0, "creation_date": 1567631434, "post_id": 57795509, "comment_id": 102024490, "body": "@fendall No problem. Always very happy to point out other people&#39;s errors."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1567632666, "post_id": 57795509, "comment_id": 102024865, "body": "You&#39;re only ever putting opening brackets onto the stack, then you&#39;re popping them off and comparing them to closing brackets. <code>[</code> does not equal <code>]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 0, "last_activity_date": 1567719441, "last_edit_date": 1567719441, "creation_date": 1567633441, "answer_id": 57795959, "question_id": 57795509, "link": "https://stackoverflow.com/questions/57795509/while-checking-if-brackets-are-balanced-i-am-getting-incorrect-result-i-e-i/57795959#57795959", "title": "While checking if brackets are balanced, I am getting incorrect result (i.e., I know input string is balanced, but output is unbalanced)", "body": "<p>First:</p>\n\n<pre><code>if stack.isEmpty or ...\n</code></pre>\n\n<p><code>stack.isEmpty</code> is effectively always true. You need to <em>call</em> the method: <code>stack.isEmpty()</code>.</p>\n\n<p>Second:</p>\n\n<pre><code>elif char not in opening and closing:\n</code></pre>\n\n<p>The <code>and closing</code> part is also effectively always true, but in this case it is irrelevant because you already know at this point that <code>char</code> is not in <code>closing</code>. You should omit <code>and closing</code> entirely.</p>\n\n<p>Third:</p>\n\n<pre><code>... or char != stack.pop():\n</code></pre>\n\n<p><code>char</code> can never be equal to <code>stack.pop()</code> because at this point you know that <code>char</code> is a closing bracket, and <code>stack</code> only contains opening brackets. You need some logic associating each closing bracket with its opening counterpart.</p>\n"}], "owner": {"reputation": 1, "user_id": 10729102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a869c0b95b82f44b6d2c172cceccb9b3?s=128&d=identicon&r=PG&f=1", "display_name": "leafcudder", "link": "https://stackoverflow.com/users/10729102/leafcudder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567719441, "creation_date": 1567630409, "last_edit_date": 1567719395, "question_id": 57795509, "link": "https://stackoverflow.com/questions/57795509/while-checking-if-brackets-are-balanced-i-am-getting-incorrect-result-i-e-i", "title": "While checking if brackets are balanced, I am getting incorrect result (i.e., I know input string is balanced, but output is unbalanced)", "body": "<p>I am newly studying data structures and algos. Im having trouble understanding why when implementing a Stack and using it to check if brackets are balanced, I am not getting the desired output (i.e. the input string is balanced but im getting the string is unbalanced).</p>\n\n<pre><code>class Stack(object): \n    def __init__(self):\n        self.items = []\n\n    def __str__(self):\n        return str(self.items)\n\n    def isEmpty(self):\n         return self.items == []\n\n    def push(self, item):\n         self.items.append(item)\n\n    def pop(self):\n        return self.items.pop()    \n\ndef isMatched(brackets):\n    opening = ('(', '[','{')\n    closing = (')', ']', '}')\n    stack = Stack()\n\n    for char in brackets:\n        if char in opening:\n            stack.push(char)\n        elif char in closing:\n            if stack.isEmpty or char != stack.pop():\n                #print('The brackets currently in the stack are: {}'.format(char), sep = ', ') \n                return False\n        elif char not in opening and closing:\n            raise ValueError('Unknown character {char}'.format(char=char))\n\n    if not stack.isEmpty():\n        return False\n    return True\n\n\nstring = \"[]()\"\nprint(string, \"-\", \"Balanced\" if isMatched(string) else \"Unbalanced\")   \n\n</code></pre>\n"}, {"tags": ["python", "django", "psycopg2"], "comments": [{"owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "edited": false, "score": 0, "creation_date": 1567647722, "post_id": 57795456, "comment_id": 102027688, "body": "I&#39;ve typically just added the path to <code>pg_config</code> to <code>$PATH</code> before doing <code>pip install psycopg2</code>. Or make a symlink: <code>ln -s &#47;var&#47;lib&#47;pgsql&#47;10.1&#47;bin&#47;pg_config &#47;usr&#47;sbin&#47;pg_config</code>. What distro are you using under the hood?"}, {"owner": {"reputation": 159, "user_id": 6152767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10209510778347957/picture?type=large", "display_name": "Ethan Fox", "link": "https://stackoverflow.com/users/6152767/ethan-fox"}, "reply_to_user": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "edited": false, "score": 0, "creation_date": 1567688967, "post_id": 57795456, "comment_id": 102044070, "body": "@FlipperPA I am using the <code>python:3.7.4-slim</code> docker image- I believe underlying Linux distro is debian"}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 6152767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10209510778347957/picture?type=large", "display_name": "Ethan Fox", "link": "https://stackoverflow.com/users/6152767/ethan-fox"}, "is_accepted": true, "score": 0, "last_activity_date": 1567690005, "creation_date": 1567690005, "answer_id": 57806574, "question_id": 57795456, "link": "https://stackoverflow.com/questions/57795456/no-module-named-psycopg2-extensions-despite-having-psycopg2-binary/57806574#57806574", "title": "No module named &#39;psycopg2.extensions&#39; despite having &#39;psycopg2-binary&#39;", "body": "<p>I determined that I was overcomplicating the problem by 'solutioning'-- I falsely thought the best approach was to use <code>psycopg2-binary</code> because I couldn't figure out the correct dependencies.  After a little bit of digging I was able to figure out that <code>psyocopg2</code> will work with the <code>python:3.7.4-slim</code> image (among others - I'm sure this cascades to other distros as well) by running the following prior to <code>pip install</code>:</p>\n\n<pre><code>apt-get update &amp;&amp; apt-get -y install libpq-dev gcc\n</code></pre>\n\n<p>It appears that this is all that's needed to use <code>psycopg2</code> as opposed to the binary.</p>\n"}], "owner": {"reputation": 159, "user_id": 6152767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10209510778347957/picture?type=large", "display_name": "Ethan Fox", "link": "https://stackoverflow.com/users/6152767/ethan-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 57806574, "answer_count": 1, "score": 1, "last_activity_date": 1567690005, "creation_date": 1567630120, "last_edit_date": 1567634133, "question_id": 57795456, "link": "https://stackoverflow.com/questions/57795456/no-module-named-psycopg2-extensions-despite-having-psycopg2-binary", "title": "No module named &#39;psycopg2.extensions&#39; despite having &#39;psycopg2-binary&#39;", "body": "<p>I am trying to develop a Django project leveraging <code>psycopg2</code> but when i deploy in a Docker container on <code>python:3.7.4-slim</code> I was running into the 'no pg_config' issue, so I determined the best way to proceed after some digging is to go with <code>psycopg2-binary</code> since since that seems to be the recommended way to go forward.</p>\n\n<p>Only problem now is that when I try to run the command <code>python manage.py &lt;...&gt;</code> from local I'm getting the error:</p>\n\n<p><code>ModuleNotFoundError: No module named 'psycopg2.extensions'</code></p>\n\n<p>I'm not sure how to proceed, since <code>psycopg2</code> works fine locally but we are going to end up containerizing this resource and having it sit in a k8s cluster so I was fairly certain the binary library was the right way to go.  Has anyone figured out a solution to pull in <code>psycopg2.extensions</code> without sacrificing the integrity of using the binary distribution?</p>\n\n<p>My main gripe is i don't understand why <code>psycopg2</code> would come with this <code>extensions</code> module, while <code>binary</code> would not, and at this point it feels like the workaround is to brute-force stash <code>extensions</code> somewhere locally in my repository just have it called that way, although I feel like there has got to be a more intuitive workaround.</p>\n\n<p>It's also entirely possible I misunderstood the use of <code>psycopg2</code> vs binary, and I should be using the former when I deploy and I'm not aware of what dependencies it requires in a linux environment?</p>\n\n<p>Happy to provide more context as-needed.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "plot", "bar-chart", "stacked-chart"], "comments": [{"owner": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "edited": false, "score": 1, "creation_date": 1567630236, "post_id": 57795407, "comment_id": 102024068, "body": "I suppose you want the sum of sales and not the count. So just replace <code>.count()</code> with <code>.sum()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1567630553, "creation_date": 1567630553, "answer_id": 57795535, "question_id": 57795407, "link": "https://stackoverflow.com/questions/57795407/pandas-groupby-plot-stacking-amount-of-rows-per-group-by-not-actual-values/57795535#57795535", "title": "pandas.groupby().plot() stacking amount of rows per group by, not actual values", "body": "<p>Similar to commented: </p>\n\n<pre><code>(df.groupby(['week','transaction_type'])['sale_count']\n   .sum().unstack('transaction_type')\n   .plot.bar(stacked=True)\n)\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/x2lhY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x2lhY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "is_accepted": false, "score": 0, "last_activity_date": 1567631397, "creation_date": 1567631397, "answer_id": 57795678, "question_id": 57795407, "link": "https://stackoverflow.com/questions/57795407/pandas-groupby-plot-stacking-amount-of-rows-per-group-by-not-actual-values/57795678#57795678", "title": "pandas.groupby().plot() stacking amount of rows per group by, not actual values", "body": "<p>@Quang Hoang's answer is correct and should be accepted and upvoted. This is just a note about formatting code. I guess it will be better to get rid of extra round brackets and move legend outside as in the following code</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.groupby(['week','transaction_type'])['sale_count']\\\n   .sum().unstack('transaction_type')\\\n   .plot.bar(stacked=True, rot=0)\\\n   .legend(bbox_to_anchor=(1.3, 1.0));\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gttHf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gttHf.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 12021895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f29e5bf5008bf31ffeca3c88304b367?s=128&d=identicon&r=PG&f=1", "display_name": "IAmVeryConnorSimmons", "link": "https://stackoverflow.com/users/12021895/iamveryconnorsimmons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567631397, "creation_date": 1567629871, "last_edit_date": 1567631000, "question_id": 57795407, "link": "https://stackoverflow.com/questions/57795407/pandas-groupby-plot-stacking-amount-of-rows-per-group-by-not-actual-values", "title": "pandas.groupby().plot() stacking amount of rows per group by, not actual values", "body": "<p>I'm trying to create a stacked bar-graph which shows two transaction types for a customer. The graph is sorted into columns by week.\nSample code within my code structure is below: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>%matplotlib inline\nimport pandas as pd\nvalues = [('1','2019-07-28','retail',11),\n          ('1','2019-07-28','wholesale',18),\n          ('1','2019-08-04','retail',7),\n          ('1','2019-08-04','wholesale',12),\n          ('1','2019-08-11','retail',6),\n          ('1','2019-08-11','wholesale',16)]\n\ncolumns = ['customer_id','week',\n           'transaction_type',\n           'sale_count']\n\ndf = pd.DataFrame(values, columns=columns)\n\ndf.groupby(['week','transaction_type']).size()\\\n  .unstack()\\\n  .plot(sort_columns='week',\n        kind='bar', stacked=True);\n</code></pre>\n\n<p>The result I'm getting is a row count for each transaction_type as either 1 or 2 </p>\n\n<p>current: \n<img src=\"https://i.stack.imgur.com/ucv2H.png\" alt=\"result_im_currently_getting\"></p>\n\n<p>What I need is a stacked bar graph that gives the sum of sale_count for each date listed in week like the one below</p>\n\n<p>expected: </p>\n\n<p><img src=\"https://i.stack.imgur.com/jDrNn.png\" alt=\"result_im_trying_to_get\"></p>\n\n<p>Can anyone tell me what I'm doing wrong here?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "join"], "answers": [{"comments": [{"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1567635214, "post_id": 57796196, "comment_id": 102025469, "body": "I will try that tomorrow! They <i>should</i> strings given their format. The info method shows they are, but the join says different!"}], "tags": [], "owner": {"reputation": 957, "user_id": 10740966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07256f72861352f5f9d0b5d82936f9e1?s=128&d=identicon&r=PG&f=1", "display_name": "manwithfewneeds", "link": "https://stackoverflow.com/users/10740966/manwithfewneeds"}, "is_accepted": false, "score": -1, "last_activity_date": 1567634830, "creation_date": 1567634830, "answer_id": 57796196, "question_id": 57795399, "link": "https://stackoverflow.com/questions/57795399/trouble-with-df-join-valueerror-you-are-trying-to-merge-on-object-and-int64/57796196#57796196", "title": "Trouble with df.join(): ValueError: You are trying to merge on object and int64 columns", "body": "<p>Why don't you astype(str) to both reqid columns and see if it's still an issue.  </p>\n"}, {"comments": [{"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1568247213, "post_id": 57897641, "comment_id": 102217240, "body": "This is exactly the kind of answer I was looking for, you&#39;ll have your bounty awarded in 18hrs from now. Thanks a lot."}], "tags": [], "owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "is_accepted": true, "score": 21, "last_activity_date": 1568242778, "last_edit_date": 1568242778, "creation_date": 1568241486, "answer_id": 57897641, "question_id": 57795399, "link": "https://stackoverflow.com/questions/57795399/trouble-with-df-join-valueerror-you-are-trying-to-merge-on-object-and-int64/57897641#57897641", "title": "Trouble with df.join(): ValueError: You are trying to merge on object and int64 columns", "body": "<p>The problem here is a <strong>misconception of how join works</strong>: when you say <code>the_big_df.join(df_to_join,on='reqid')</code> it <em>does not mean</em> join on <code>the_big_df.reqid == df_to_join.reqid</code> as one would assume at first glance, but rather join on <code>the_big_df.reqid == df_to_join.index</code>. As <code>requid</code> is of type <code>object</code> and the index is of type <code>int64</code> you get the error.</p>\n\n<p>See the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.join.html\" rel=\"noreferrer\">docs for <strong><code>join</code></strong></a>:</p>\n\n<blockquote>\n  <p>Join columns with other DataFrame either on index or on a key column.<br>\n  ...<br>\n  <strong>on</strong> : str, list of str, or array-like, optional<br>\n  Column or index level name(s) in the caller to join on the index in other, otherwise joins index-on-index.</p>\n</blockquote>\n\n<p>Look at the following example:</p>\n\n<pre><code>df1 = pd.DataFrame({'id1': [1, 2], 'val1': [11,12]})\ndf2 = pd.DataFrame({'id2': [3, 4], 'val2': [21,22]})\nprint(df1)\n#   id1  val1\n#0    1    11\n#1    2    12\nprint(df2)\n#   id2  val2\n#0    3    21\n#1    4    22\n\n# join on df1.id1 (int64) == df2.index (int64) \nprint(df1.join(df2, on='id1'))\n#   id1  val1  id2  val2\n#0    1    11  4.0  22.0\n#1    2    12  NaN   NaN\n\n# now df3 same as df1 but id3 as object:\ndf3 = pd.DataFrame({'id3': ['1', '2'], 'val1': [11,12]})\n\n# try to join on df3.id3 (object) == df2.index (int64) \ndf3.join(df2, on='id3')\n#ValueError: You are trying to merge on object and int64 columns. If you wish to proceed you should use pd.concat\n</code></pre>\n\n<p><hr>\nPlease note: the above is for a modern versions of pandas. Version 20.3 gave the following result:</p>\n\n<pre><code>&gt;&gt;&gt; df3.join(df2, on='id3')\n  id3  val1  id2  val2\n0   1    11  NaN   NaN\n1   2    12  NaN   NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 414, "user_id": 8495644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b74Kd.jpg?s=128&g=1", "display_name": "Aadil Srivastava", "link": "https://stackoverflow.com/users/8495644/aadil-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1618918570, "creation_date": 1618918570, "answer_id": 67178137, "question_id": 57795399, "link": "https://stackoverflow.com/questions/57795399/trouble-with-df-join-valueerror-you-are-trying-to-merge-on-object-and-int64/67178137#67178137", "title": "Trouble with df.join(): ValueError: You are trying to merge on object and int64 columns", "body": "<p>Use <code>pandas.DataFrame.merge</code>.</p>\n<p>See the <a href=\"https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.merge.html\" rel=\"nofollow noreferrer\">docs for merge</a></p>\n"}], "owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5332, "favorite_count": 2, "accepted_answer_id": 57897641, "answer_count": 3, "score": 5, "last_activity_date": 1618918570, "creation_date": 1567629832, "last_edit_date": 1567630191, "question_id": 57795399, "link": "https://stackoverflow.com/questions/57795399/trouble-with-df-join-valueerror-you-are-trying-to-merge-on-object-and-int64", "title": "Trouble with df.join(): ValueError: You are trying to merge on object and int64 columns", "body": "<blockquote>\n  <p>None of these questions adress the issue: <a href=\"https://stackoverflow.com/questions/55278728/trouble-with-left-joining-tables-pandas-valueerror-you-are-trying-to-merge-on\">Question 1</a> and <a href=\"https://stackoverflow.com/questions/53645882/pandas-merging-101\">Question 2</a> nor could I find the answer in pandas documentation.</p>\n</blockquote>\n\n<p>Hello, I am trying to find the underlying cause for this error:</p>\n\n<pre><code>ValueError: You are trying to merge on object and int64 columns.\n</code></pre>\n\n<p>I know I can work around this problem using pandas <code>concat</code> or <code>merge</code> function, but I am trying to understand the cause for the error. The question is: Why do I get this <code>ValueError</code>?</p>\n\n<p>Here's the output of the <code>head(5)</code> and <code>info()</code> on both dataframes that are used.</p>\n\n<p><code>print(the_big_df.head(5))</code> Output: </p>\n\n<pre><code>  account  apt  apt_p  balance       date  day    flag  month  reps     reqid  year\n0  AA0420    0    0.0  -578.30 2019-03-01    1       1      3    10  82f2d761  2019\n1  AA0420    0    0.1  -578.30 2019-03-02    2       1      3    10  82f2d761  2019\n2  AA0420    0    0.1  -578.30 2019-03-03    3       1      3    10  82f2d761  2019\n3  AA0421    0    0.1  -607.30 2019-03-04    4       1      3    10  82f2d761  2019\n4  AA0421    0    0.1  -610.21 2019-03-05    5       1      3    10  82f2d761  2019\n</code></pre>\n\n<p><code>print(the_big_df.info())</code> Output:</p>\n\n<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 36054 entries, 0 to 36053\nData columns (total 11 columns):\naccount        36054 non-null object\napt            36054 non-null int64\napt_p          36054 non-null float64\nbalance        36054 non-null float64\ndate           36054 non-null datetime64[ns]\nday            36054 non-null int64\nflag           36054 non-null int64\nmonth          36054 non-null int64\nreps           36054 non-null int32\nreqid          36054 non-null object\nyear           36054 non-null int64\ndtypes: datetime64[ns](1), float64(2), int32(1), int64(5), object(2)\nmemory usage: 3.2+ MB\n</code></pre>\n\n<p>Here's the dataframe I'm passing to the <code>join()</code>; <code>print(df_to_join.head(5))</code>:</p>\n\n<pre><code>      reqid     id\n0  54580f39  13301\n1  3ba905c0  77114\n2  5f2d80da  13302\n3  a1478e98  77115\n4  9b09854b  78598\n</code></pre>\n\n<p><code>print(df_to_join.info())</code> Output:</p>\n\n<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 14332 entries, 0 to 14331\nData columns (total 2 columns):\nreqid    14332 non-null object\ndni      14332 non-null object\n</code></pre>\n\n<p>The exact next line after the 4 prints stated above is:</p>\n\n<pre><code>the_max_df = the_big_df.join(df_to_join,on='reqid')\n</code></pre>\n\n<p>And the output is, as stated above:</p>\n\n<pre><code>ValueError: You are trying to merge on object and int64 columns. If you wish to proceed you should use pd.concat\n</code></pre>\n\n<p>Why does this happen, when before it is clearly stated that column <code>reqid</code> is an object in both dataframes? Thanks.</p>\n"}, {"tags": ["python", "matplotlib", "graph", "charts"], "answers": [{"tags": [], "owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "is_accepted": true, "score": 0, "last_activity_date": 1567629098, "creation_date": 1567629098, "answer_id": 57795293, "question_id": 57795223, "link": "https://stackoverflow.com/questions/57795223/how-do-i-plot-a-line-graph-based-off-the-type-column-i-want-a-line-for-a-and/57795293#57795293", "title": "How do I plot a line graph based off the &#39;Type&#39; column? I want a line for A and line for B based off the &#39;Price&#39; Column", "body": "<p>You can try:</p>\n\n<pre><code>df.pivot(columns = 'Type').interpolate().plot()\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 11535011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0fa28492994da28951d0fe6f7e5ffbb?s=128&d=identicon&r=PG&f=1", "display_name": "muchappreciated", "link": "https://stackoverflow.com/users/11535011/muchappreciated"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12, "favorite_count": 0, "accepted_answer_id": 57795293, "answer_count": 1, "score": -1, "last_activity_date": 1567629098, "creation_date": 1567628683, "question_id": 57795223, "link": "https://stackoverflow.com/questions/57795223/how-do-i-plot-a-line-graph-based-off-the-type-column-i-want-a-line-for-a-and", "title": "How do I plot a line graph based off the &#39;Type&#39; column? I want a line for A and line for B based off the &#39;Price&#39; Column", "body": "<p>How would I create a line chart that has a line for A and line for B based off the common dates that are in the index?</p>\n\n<pre><code>df = pd.DataFrame({'Type':['A','A','B','B','A','A','B','B'],'Price':[12,14,11,15,17,15,9,16]}, index=['2019-01-02', '2019-01-03','2019-01-04','2019-01-05','2019-01-06','2019-01-07','2019-01-08','2019-01-09'])\n</code></pre>\n"}, {"tags": ["python", "django", "logging"], "answers": [{"comments": [{"owner": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1567646917, "post_id": 57795392, "comment_id": 102027568, "body": "Because some times there are can be some more log entries before it reaches to this point of LoggerGate. And assume before the code in this file it will also execute some other code where there can also be some logging entries. Generally settings.py is executed in the beginnging. Is there any way we can get the instance used in settings.py in the later places"}, {"owner": {"reputation": 2080, "user_id": 10013232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae968965022a2718fa707aba3046e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Cappelli", "link": "https://stackoverflow.com/users/10013232/gabriel-cappelli"}, "reply_to_user": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1567654234, "post_id": 57795392, "comment_id": 102028770, "body": "You can keep the instance of LoggerGate in a different module and import it, e.g:  from utils import logger_gate  . Or you can make everything inside LoggerGate a class method and pass LoggerGate instead of an instance."}, {"owner": {"reputation": 2080, "user_id": 10013232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae968965022a2718fa707aba3046e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Cappelli", "link": "https://stackoverflow.com/users/10013232/gabriel-cappelli"}, "reply_to_user": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1567654288, "post_id": 57795392, "comment_id": 102028784, "body": "I would not recommend this, but you can also loop the loggers filters and find the instance there:   for filter in logger_database.filters:     if isinstance(filter, LoggerGate):         filter.start()"}, {"owner": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1567655958, "post_id": 57795392, "comment_id": 102029071, "body": "I got this same answer asked in a different way. <a href=\"https://stackoverflow.com/a/57497507/2897115\">stackoverflow.com/a/57497507/2897115</a>. But then i wanted to know what happens when i mix multiple filters since there is not way i can find the instance. But  <code>for filter in logger_database.filters: if isinstance(filter, LoggerGate): filter.start()</code> looks made things more clear. and also Sraw&#39;s explanation of why other filters does not work when someone is False = <code>filter works in seq, record is passed to each filter one by one. And will stop at the one returns a zero. So as  StartFilter returns 0, it will directly drop all records.</code>"}, {"owner": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1567656128, "post_id": 57795392, "comment_id": 102029104, "body": "I want to put everything in settings.py. I will try to use the filter instance. Thank you"}, {"owner": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1567696604, "post_id": 57795392, "comment_id": 102048618, "body": "I discovered that settings.py runs twice before the surver starts. I feel so because when i put the logger config in my settings.py two filters are created. I have to delete all the previous filters whenever its getting initiated again."}], "tags": [], "owner": {"reputation": 2080, "user_id": 10013232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae968965022a2718fa707aba3046e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Cappelli", "link": "https://stackoverflow.com/users/10013232/gabriel-cappelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1567629780, "creation_date": 1567629780, "answer_id": 57795392, "question_id": 57795153, "link": "https://stackoverflow.com/questions/57795153/python-logging-can-we-added-multiple-filters-to-the-logger-and-which-one-is-co/57795392#57795392", "title": "python: logging: can we added multiple filters to the logger and which one is considered", "body": "<p>Create only one filter and use it's instance to control if logs should be accepted or not.</p>\n\n<pre><code>from logging import getLogger\n\nclass LoggerGate(object):\n\n    def __init__(self):\n        self.started = False\n\n    def start(self):\n        self.started = True\n\n    def stop(self):\n        self.started = False\n\n    def filter(self, record):\n        \"\"\"\n        Determine if the specified record is to be logged.\n\n        Returns True is this LoggerGate is started, False otherwise.\n        \"\"\"\n        return self.started\n\n\nlogger_database = getLogger(\"log_testing\")\nlogger_gate = LoggerGate()\nlogger_database.addFilter(logger_gate)\n\nlogger_database.critical('this is not logged')\nlogger_gate.start()\nlogger_database.critical('this is logged')\nlogger_gate.stop()\nlogger_database.critical('this is not logged')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "is_accepted": false, "score": 1, "last_activity_date": 1567631879, "creation_date": 1567631879, "answer_id": 57795742, "question_id": 57795153, "link": "https://stackoverflow.com/questions/57795153/python-logging-can-we-added-multiple-filters-to-the-logger-and-which-one-is-co/57795742#57795742", "title": "python: logging: can we added multiple filters to the logger and which one is considered", "body": "<p>Gabriel C gives a great solution. And to explain more, <code>filter</code> works in sequence, which means the record is passed to each filter one by one. And will stop at the one returns a zero. So as your <code>StartFilter</code> returns <code>0</code>, it will directly drop all records.</p>\n"}], "owner": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 57795392, "answer_count": 2, "score": 2, "last_activity_date": 1567697842, "creation_date": 1567628220, "last_edit_date": 1567697842, "question_id": 57795153, "link": "https://stackoverflow.com/questions/57795153/python-logging-can-we-added-multiple-filters-to-the-logger-and-which-one-is-co", "title": "python: logging: can we added multiple filters to the logger and which one is considered", "body": "<p>I am trying to understand how multiple Filters (one defined in config and other in the code) in Python logging work.</p>\n\n<p>I am working on a Django project and below is my logger config in settings.py</p>\n\n<p>My goal is to <code>switch on</code> and <code>switch off</code> the logger whenever i want. So using filters i am trying to switch off the logger by returning False (0)</p>\n\n<p>1) Switch off the logger in the starting</p>\n\n<pre><code>class StartFilter(object):\n    def filter(self, record):\n        \"\"\"\n        Determine if the specified record is to be logged.\n\n        Is the specified record to be logged? Returns 0 for no, nonzero for\n        yes. If deemed appropriate, the record may be modified in-place.\n        \"\"\"\n        return 0\n\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'formatters': {\n        'verbose': {\n            'format': '%(levelname)s %(funcName)s() %(pathname)s[:%(lineno)s] %(name)s \\n%(message)s'\n        }\n    },\n    'handlers': {\n        'console': {\n            'level': 'DEBUG',\n            'formatter': 'verbose',\n            'class': 'logging.StreamHandler',\n        },\n    },\n    'filters': {\n        'myfilter': {\n            '()': StartFilter,\n        }\n    },\n    'loggers': {\n        'log_testing': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n            'filters': ['myfilter']\n        },\n    }\n}\n</code></pre>\n\n<p>I have added the filter to the logger. <code>'filters': ['myfilter']</code></p>\n\n<p>2) Switch on and off the logger in the views.py file where i want the logging to be seen</p>\n\n<pre><code># to switch on logger\nclass LoggerGateStart(object):\n    def filter(self, record):\n        \"\"\"\n        Determine if the specified record is to be logged.\n\n        Is the specified record to be logged? Returns 0 for no, nonzero for\n        yes. If deemed appropriate, the record may be modified in-place.\n        \"\"\"\n        return 1\n\n# to switch off logger\nclass LoggerGateStop(object):\n    def filter(self, record):\n        \"\"\"\n        Determine if the specified record is to be logged.\n\n        Is the specified record to be logged? Returns 0 for no, nonzero for\n        yes. If deemed appropriate, the record may be modified in-place.\n        \"\"\"\n        return 0\n\nimport logging\nlogger = logging.getLogger(\"log_testing\")\n\n\n...\nlogging.debug(\"Some text Before)  # i dont want this to be logged\n...\n\n\n\ngatestart = LoggerGateStart()\nlogger_database.addFilter(gatestart)\n\n...\nlogging.debug(\"Some text)  # i want this to be logged\n...\n\ngatestop = LoggerGateStop()\nlogger_database.addFilter(gatestop)\n\n...\nlogging.debug(\"Some text after\")  # i dont want this to be logged even \nif it exist\n...\n</code></pre>\n\n<p>I found its not working this way. It considers the StartFilter only and not consider LoggerGateStart or LoggerGateStop and does not print any log to the console</p>\n\n<p>How can i do this</p>\n\n<p><strong>ANSWER I USED BASED ON THE ANSWER OF Gabriel C</strong> </p>\n\n<p>My goal was to log sql using django <a href=\"https://docs.djangoproject.com/en/2.2/topics/logging/#django-db-backends\" rel=\"nofollow noreferrer\">django.db.backends</a>. But the problem with it is that it will log all the sqls. I want to log only sqls in a particular section of a code or whereever i want to see the sqls. So the following way i could do it.</p>\n\n<p>logging config inside settings.py:</p>\n\n<pre><code># Filter class to stop or start logging for \"django.db.backends\"\nclass LoggerGate:\n    def __init__(self, state='closed'):\n        # We found that the settings.py runs twice and the filters are created twice. So we have to keep only one. So we delete all the previous filters before we create the new one\n        import logging\n        logger_database = logging.getLogger(\"django.db.backends\")\n        try:\n            for filter in logger_database.filters:\n                logger_database.removeFilter(filter)\n        except Exception as e:\n            pass\n        self.state = state\n\n    def open(self):\n        self.state = 'open'\n\n    def close(self):\n        self.state = 'closed'\n\n    def filter(self, record):\n        \"\"\"\n        Determine if the specified record is to be logged.\n\n        Is the specified record to be logged? Returns 0/False for no, nonzero/True for\n        yes. If deemed appropriate, the record may be modified in-place.\n        \"\"\"\n        return self.state == 'open'\n\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'handlers': {\n        'sql': {\n            'class': 'logging.StreamHandler',\n            'level': 'DEBUG',\n        }\n    },\n    'filters': {\n        'myfilter': {\n            '()': LoggerGate,\n        }\n    },\n    'loggers': {\n        'django.db.backends': {\n            'handlers': ['sql'],\n            'level': 'DEBUG',\n            'propagate': False,\n            'filters': ['myfilter']\n        }\n    }\n}\n</code></pre>\n\n<p>Then in the views.py</p>\n\n<pre><code>import logging\nlogger = logging.getLogger(__name__)\nlogger_database = logging.getLogger(\"django.db.backends\")\n\ndef test1(request):\n\n\n    logger_database.filters[0].open()\n    #Will allow priting of sql satatements from here\n\n    from django import db\n    user_set = User.objects.all()\n\n    for user in user_set: # Here sql is executed and is printed to console\n        pass\n    #Will stop priting of sql satatements after this\n    logger_database.filters[0].close()\n\n    from django import db\n    user_set = User.objects.all()\n\n    for user in user_set:  # Here sql is executed and is not printed to console\n        pass\n\n    now = datetime.datetime.now()\n    html = \"&lt;html&gt;&lt;body&gt;Internal purpose&lt;/body&gt;&lt;/html&gt;\"\n    return HttpResponse(html)\n</code></pre>\n\n<p>If one wants to print the sql in formatted and colorful way use this in the settings.py</p>\n\n<pre><code># SQL formatter to be used for the handler used in logging \"django.db.backends\"\nclass SQLFormatter(logging.Formatter):\n    def format(self, record):\n\n        # Check if Pygments is available for coloring \n        try:\n            import pygments\n            from pygments.lexers import SqlLexer\n            from pygments.formatters import TerminalTrueColorFormatter\n        except ImportError:\n            pygments = None\n\n        # Check if sqlparse is available for indentation\n        try:\n            import sqlparse\n        except ImportError:\n            sqlparse = None\n\n        # Remove leading and trailing whitespaces\n        sql = record.sql.strip()\n\n        if sqlparse:\n            # Indent the SQL query\n            sql = sqlparse.format(sql, reindent=True)\n\n        if pygments:\n            # Highlight the SQL query\n            sql = pygments.highlight(\n                sql,\n                SqlLexer(),\n                #TerminalTrueColorFormatter(style='monokai')\n                TerminalTrueColorFormatter()\n            )\n\n        # Set the record's statement to the formatted query\n        record.statement = sql\n        return super(SQLFormatter, self).format(record)\n\n\n\n\n# Filter class to stop or start logging for \"django.db.backends\"\nclass LoggerGate:\n    def __init__(self, state='closed'):\n        # We found that the settings.py runs twice and the filters are created twice. So we have to keep only one. So we delete all the previous filters before we create the new one\n        import logging\n        logger_database = logging.getLogger(\"django.db.backends\")\n        try:\n            for filter in logger_database.filters:\n                logger_database.removeFilter(filter)\n        except Exception as e:\n            pass\n        self.state = state\n\n    def open(self):\n        self.state = 'open'\n\n    def close(self):\n        self.state = 'closed'\n\n    def filter(self, record):\n        \"\"\"\n        Determine if the specified record is to be logged.\n\n        Is the specified record to be logged? Returns 0/False for no, nonzero/True for\n        yes. If deemed appropriate, the record may be modified in-place.\n        \"\"\"\n        return self.state == 'open'\n\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'formatters': {\n        'sql': {\n            '()': SQLFormatter,\n            'format': '[%(duration).3f] %(statement)s',\n        }\n    },\n    'handlers': {\n        'sql': {\n            'class': 'logging.StreamHandler',\n            'formatter': 'sql',\n            'level': 'DEBUG',\n        }\n    },\n    'filters': {\n        'myfilter': {\n            '()': LoggerGate,\n        }\n    },\n    'loggers': {\n        'django.db.backends': {\n            'handlers': ['sql'],\n            'level': 'DEBUG',\n            'propagate': False,\n            'filters': ['myfilter']\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "json", "csv"], "comments": [{"owner": {"reputation": 76, "user_id": 7733772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XmY.png?s=128&g=1", "display_name": "Lane Terry", "link": "https://stackoverflow.com/users/7733772/lane-terry"}, "edited": false, "score": 0, "creation_date": 1567629063, "post_id": 57795071, "comment_id": 102023628, "body": "Seems like an issue with either pulling the data from your response.json file or the data itself. Could you share the contents of this file? Also, I would recommend loading data from a file this way instead <code>with open(&#39;&#47;response.json&#39;) as infile:     ipInfo = json.load(infile)</code>"}, {"owner": {"reputation": 63, "user_id": 9790019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5c181a83ae76d318026432b23792b0?s=128&d=identicon&r=PG&f=1", "display_name": "m_lloyd", "link": "https://stackoverflow.com/users/9790019/m-lloyd"}, "edited": false, "score": 0, "creation_date": 1567629932, "post_id": 57795071, "comment_id": 102023949, "body": "Okay, I&#39;ve added a small portion of response.json. When printing ipInfo, it shows the contents of the json file."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1567635894, "post_id": 57795071, "comment_id": 102025618, "body": "Do you understand what a <code>list</code> is, and how to index it?  And how that&#39;s different from a <code>dict</code>"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9790019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5c181a83ae76d318026432b23792b0?s=128&d=identicon&r=PG&f=1", "display_name": "m_lloyd", "link": "https://stackoverflow.com/users/9790019/m-lloyd"}, "edited": false, "score": 0, "creation_date": 1567692390, "post_id": 57795689, "comment_id": 102046208, "body": "that did the trick, thanks! As I&#39;m still learning lists and dictionaries through Python, I was confusing myself on how to solve this."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1567632722, "last_edit_date": 1567632722, "creation_date": 1567631504, "answer_id": 57795689, "question_id": 57795071, "link": "https://stackoverflow.com/questions/57795071/when-trying-to-convert-a-json-file-to-csv-i-get-the-following-error-typeerror/57795689#57795689", "title": "When trying to convert a JSON file to CSV, I get the following error: TypeError: list indices must be integers or slices, not str", "body": "<p>From the sample input you added to your question, it appears that the JSON file contains a <em>list</em> of JSON <em>objects</em> \u2014 as opposed to being a large single object \u2014 which get turned into a Python list of dictionaries by <code>json.load()</code>....and because of that, you should use a <a href=\"https://docs.python.org/3/library/csv.html#csv.DictWriter\" rel=\"nofollow noreferrer\"><code>csv.DictWriter</code></a> instead of a <code>csv.writer</code> to write the CSV output file.</p>\n\n<p>So here's what I think would be the way to do what you want:</p>\n\n<pre><code>import csv\nimport json\n\nfieldnames = (\"allocation_id\", \"association_id\", \"domain\", \"id\", \"is_active\",\n              \"network_interface_id\", \"network_interface_owner_id\",\n              \"private_ip_address\", \"public_ip\")\n\nwith open('./response.json') as infile:\n    ipInfo = json.load(infile)\n\nwith open(\"./response.csv\", \"w\", newline='') as outfile:\n    writer = csv.DictWriter(outfile, fieldnames)\n    writer.writeheader()\n    writer.writerows(ipInfo)\n</code></pre>\n\n<p>Note that if you didn't want to hardcode the fieldnames into your code as shown, you could probably extract them from the first object dictionary in the returned list like this:</p>\n\n<pre><code>    fieldnames = ipInfo[0].keys()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "is_accepted": false, "score": 0, "last_activity_date": 1567631589, "creation_date": 1567631589, "answer_id": 57795705, "question_id": 57795071, "link": "https://stackoverflow.com/questions/57795071/when-trying-to-convert-a-json-file-to-csv-i-get-the-following-error-typeerror/57795705#57795705", "title": "When trying to convert a JSON file to CSV, I get the following error: TypeError: list indices must be integers or slices, not str", "body": "<p>As shown in the JSON, <code>ipInfo</code> is not a dict, but a list of dicts - one for each desired line in the CSV, presumably.</p>\n\n<p>You can make the <code>csv</code> module do more of the work for you, by using the provided <code>DictWriter</code> and telling it what the headers are:</p>\n\n<pre><code>with open(\"/response.csv\", \"w\") as outfile: \n    dw = csv.DictWriter(outfile, fields=[\n        \"allocation_id\", \"association_id\", \"domain\", \"id\", \"is_active\",\n        \"network_interface_id\", \"network_interface_owner_id\",\n        \"private_ip_address\", \"public_ip\"\n    ])\n    dw.writeheader()\n    dw.writerows(ipInfo) # N.B. writerows, plural\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9790019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5c181a83ae76d318026432b23792b0?s=128&d=identicon&r=PG&f=1", "display_name": "m_lloyd", "link": "https://stackoverflow.com/users/9790019/m-lloyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57795689, "answer_count": 2, "score": -1, "last_activity_date": 1567632722, "creation_date": 1567627039, "last_edit_date": 1567630202, "question_id": 57795071, "link": "https://stackoverflow.com/questions/57795071/when-trying-to-convert-a-json-file-to-csv-i-get-the-following-error-typeerror", "title": "When trying to convert a JSON file to CSV, I get the following error: TypeError: list indices must be integers or slices, not str", "body": "<p>So, I have a JSON file that I've extracted from my instance of CloudHealth. I want to take the contents of the file and dump it into a CSV file. When I try to do this, I get an error that list indices must be integers or slices, not str. I have seen multiple people ask this question, but the answers never seem to actually work or often don't make sense. Am I supposed to explicitly call something an integer?</p>\n\n<p>I've tried using for loops to iterate through each line. I've also tried using writerow with the column headers and JSON values. Below is my current version of my script.</p>\n\n<p>Here is a portion of the JSON file:</p>\n\n<pre><code>[\n    {\n        \"allocation_id\": \"eipalloc-0fd72e57a49a91e83\",\n        \"association_id\": \"eipassoc-019ab2294484f268d\",\n        \"domain\": \"vpc\",\n        \"id\": 6116033436809,\n        \"is_active\": true,\n        \"network_interface_id\": \"eni-06441888c03f4afc2\",\n        \"network_interface_owner_id\": \"375497951801\",\n        \"private_ip_address\": \"xxx.xxx.xxx.xxx\",\n        \"public_ip\": \"xxx.xxx.xxx.xxx\"\n     },\n]\n\n</code></pre>\n\n<pre><code>import csv, json\n\nwith open('/response.json') as infile:\n    ipInfo = json.loads(infile.read())\n\nwith open(\"/response.csv\", \"w\") as outfile: \n    f = csv.writer(outfile)\n    f.writerow([\"allocation_id\", \"association_id\", \"domain\", \"id\", \"is_active\", \"network_interface_id\", \"network_interface_owner_id\", \"private_ip_address\", \"public_ip\"])\n    f.writerow([ipInfo[\"allocation_id\"], ipInfo[\"association_id\"], ipInfo[\"domain\"], ipInfo[\"id\"], ipInfo[\"is_active\"], ipInfo[\"network_interface_id\"], ipInfo[\"network_interface_owner_id\"], ipInfo[\"private_ip_address\"], ipInfo[\"public_ip\"]])\n</code></pre>\n\n<p>Right now, the headers for CSV file are added, but the column content is not.</p>\n\n<p>This is the error that I see:</p>\n\n<pre><code>TypeError: list indices must be integers or slices, not str\n</code></pre>\n"}, {"tags": ["python", "pandas", "csv"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4748908, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204269189957898/picture?type=large", "display_name": "Sven Onderbeke", "link": "https://stackoverflow.com/users/4748908/sven-onderbeke"}, "edited": false, "score": 0, "creation_date": 1567630840, "post_id": 57795338, "comment_id": 102024272, "body": "Perfectly solved my problem and increases readability and efficiency, thanks a lot!"}, {"owner": {"reputation": 100, "user_id": 10981558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSgBE.jpg?s=128&g=1", "display_name": "Jhirschibar", "link": "https://stackoverflow.com/users/10981558/jhirschibar"}, "reply_to_user": {"reputation": 25, "user_id": 4748908, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204269189957898/picture?type=large", "display_name": "Sven Onderbeke", "link": "https://stackoverflow.com/users/4748908/sven-onderbeke"}, "edited": false, "score": 0, "creation_date": 1567713650, "post_id": 57795338, "comment_id": 102055891, "body": "@SvenOnderbeke I&#39;m glad that solved the problem. If you&#39;re happy with it, feel free to formally mark my response as one that answered your button (it will mark it with a green check mark) and to upvote my response"}], "tags": [], "owner": {"reputation": 100, "user_id": 10981558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSgBE.jpg?s=128&g=1", "display_name": "Jhirschibar", "link": "https://stackoverflow.com/users/10981558/jhirschibar"}, "is_accepted": true, "score": 0, "last_activity_date": 1567629451, "creation_date": 1567629451, "answer_id": 57795338, "question_id": 57795070, "link": "https://stackoverflow.com/questions/57795070/joining-dataframes-in-panda-problem-with-special-characters/57795338#57795338", "title": "Joining dataframes in panda problem with special characters", "body": "<p>I would recommend joining the two tables using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html\" rel=\"nofollow noreferrer\">df.merge()</a>, then you can join the two dataframes like you would sql tables. </p>\n\n<p>Make sure you join on='Code'. You can specify either a left or inner join, and then you can avoid messy, painful, slow iterations with the pandas dfs.</p>\n\n<p>For example:</p>\n\n<pre><code>df_sales = df_sales[[\"Code\",\"Sum(Quantity)\"]]\ndf_inv = df_inv.drop(['Brand Name', 'Name'], axis=1)\n#once you make sure you have the columns you want, go ahead and join them\n\ndf_sales = df_sales.merge(df_inv, how='left', on='Code')\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4748908, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204269189957898/picture?type=large", "display_name": "Sven Onderbeke", "link": "https://stackoverflow.com/users/4748908/sven-onderbeke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57795338, "answer_count": 1, "score": 1, "last_activity_date": 1567629451, "creation_date": 1567627020, "last_edit_date": 1592644375, "question_id": 57795070, "link": "https://stackoverflow.com/questions/57795070/joining-dataframes-in-panda-problem-with-special-characters", "title": "Joining dataframes in panda problem with special characters", "body": "<p>I have two CSV-files:</p>\n<p>&quot;inventory.csv&quot; with columns <em>'Code', ... , 'Sum(Quantity)'</em></p>\n<p>&quot;sales.csv&quot; with columns <em>'Code', -many other columns-</em></p>\n<p>the column 'Code' from sales contains a certain productcode (a string)</p>\n<p>for example: '6ES7 122-1BB10-0AA0'</p>\n<p>each 'Code' from sales.csv exists in inventory.csv (which is not true the other way around)</p>\n<p>My goal is to make a dataframe with the following columns:</p>\n<p>'Code', 'Sum(Quantity)', -many other colums-</p>\n<p>I have written some code that somewhat achieves this (shown below) but it returns the following error:</p>\n<p>IndexError: single positional indexer is out-of-bounds</p>\n<p><b>part of sales.csv:</b></p>\n<p>Code; ... ; ... ; 'Sum(Quantity)'</p>\n<blockquote>\n<p>...</p>\n<p>SSD 2.5&quot; 32GB SATA III;Onbekend;SSD;4;</p>\n<p>6SE7018-0EP50-Z (Z=C23+F01+G91);Siemens;Masterdrive MC;4;</p>\n<p>QS30LLPCQ;Banner;3071378;4;</p>\n<p>6ES5 318-8MB12;Siemens;Interface Module : ET200U;4;</p>\n<p>...</p>\n</blockquote>\n<p><b>part of inventory.csv:</b></p>\n<p>Code; -many other columns-</p>\n<blockquote>\n<p>...</p>\n<p>6SE7018-0EP50-Z;Siemens;Masterdrive MC;0;0;0;0;0;0;0;1;</p>\n<p>6SE7018-0EP50-Z (Z=C23+F01+G91);Siemens;Masterdrive MC;0;0;0;0;0;0;0;0;</p>\n<p>6SE7018-0EP50-Z (Z=L20);Siemens;Masterdrive MC;0;0;1;0;0;0;0;0;</p>\n<p>6SE7018-0EP60;Siemens;Masterdrive VC;0;0;0;0;0;0;0;0;</p>\n<p>...</p>\n</blockquote>\n<p>The error occurs when searching for '6SE7018-0EP50-Z (Z=C23+F01+G91)' in inventory.csv so I guess it is because one of the following signs: ()+=</p>\n<p>The code that I used is below:</p>\n<pre><code>import pandas as pd\n\nfilename_sales = &quot;sales.csv&quot;\nfilename_inv = &quot;inventory.csv&quot;\n\ndf_sales = pd.read_csv(filename_sales, sep=';')\ndf_inv = pd.read_csv(filename_inv, sep=';')\n\n#throws away unneeded columns\ndf_sales = df_sales[[&quot;Code&quot;,&quot;Sum(Quantity)&quot;]]\ndf_inv = df_inv.drop(['Brand Name', 'Name'], axis=1)\n\ndf_out = pd.DataFrame()\n\n\nfor index, row in df_sales.iterrows():\n   temp = df_inv[df_inv['Code'].str.contains(row[&quot;Code&quot;])].iloc[0] \n   temp[&quot;Sum(Quantity)&quot;] = row['Sum(Quantity)']\n   df_out = df_out.append(temp)\n\nprint(df_out)\n</code></pre>\n<ul>\n<li>How could I avoid/solve this error?</li>\n<li>Is this the appropriate way to join these df's into what I want?</li>\n</ul>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "edited": false, "score": 3, "creation_date": 1567627147, "post_id": 57795058, "comment_id": 102023228, "body": "<code>sorted(winners, key=lambda x: int(x.split(&#39;,&#39;)[0]), reverse=True)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11092, "user_id": 3066077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666991815/picture?type=large", "display_name": "DarrylG", "link": "https://stackoverflow.com/users/3066077/darrylg"}, "is_accepted": true, "score": 2, "last_activity_date": 1567628166, "last_edit_date": 1567628166, "creation_date": 1567627591, "answer_id": 57795109, "question_id": 57795058, "link": "https://stackoverflow.com/questions/57795058/how-do-i-sort-a-list-of-elements-into-numeric-order-when-i-have-a-mix-of-integer/57795109#57795109", "title": "How Do I Sort A List Of Elements Into Numeric Order When I Have A Mix Of Integers And Strings?", "body": "<pre><code>winners = [\"13, John\", \"8, Max\", \"15, Smith\", \"4, Bob\"]\n\n# Use function key to control sort order\nwinners.sort(reverse=True, key=lambda x: int(x.split(',')[0]))\nprint(winners) # Result ['15, Smith', '13, John', '8, Max', '4, Bob']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "edited": false, "score": 0, "creation_date": 1567643536, "post_id": 57795640, "comment_id": 102027025, "body": "Your function will work if you just return <code>int(x)</code>."}], "tags": [], "owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "is_accepted": false, "score": 0, "last_activity_date": 1567631199, "creation_date": 1567631199, "answer_id": 57795640, "question_id": 57795058, "link": "https://stackoverflow.com/questions/57795058/how-do-i-sort-a-list-of-elements-into-numeric-order-when-i-have-a-mix-of-integer/57795640#57795640", "title": "How Do I Sort A List Of Elements Into Numeric Order When I Have A Mix Of Integers And Strings?", "body": "<blockquote>\n  <p>a list of elements which contain both integers and strings</p>\n</blockquote>\n\n<p>You don't have such a list; your list contains strings, and those strings happen to include comma-separated pairs of values, such that the first value is the <em>string representation of</em> an integer.</p>\n\n<p>We can easily write a function that parses one of such strings to produce the corresponding pair (tuple):</p>\n\n<pre><code>def parse(item):\n    x, y = item.split(',')\n    return int(x), y\n</code></pre>\n\n<p>Then we can use this to sort the list according to the results of such parsing, by using the <code>key</code> argument of the built-in <code>sort</code>:</p>\n\n<pre><code>winners.sort(reverse=true, key=parse)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11466474, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ob64cWWyHwM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfkC-ZcCG0AeG3A_Z9nzVrER41jww/mo/photo.jpg?sz=128", "display_name": "Danny Morton", "link": "https://stackoverflow.com/users/11466474/danny-morton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57795109, "answer_count": 2, "score": 0, "last_activity_date": 1567631199, "creation_date": 1567626975, "question_id": 57795058, "link": "https://stackoverflow.com/questions/57795058/how-do-i-sort-a-list-of-elements-into-numeric-order-when-i-have-a-mix-of-integer", "title": "How Do I Sort A List Of Elements Into Numeric Order When I Have A Mix Of Integers And Strings?", "body": "<p>I would like to order a list of elements which contain both integers and strings. I would like to order the list so that the biggest score comes first.</p>\n\n<p>The list looks like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>winners = [\"13, John\", \"8, Max\", \"15, Smith\", \"4, Bob\"]\n</code></pre>\n\n<p>I have tried sorting the list in reverse with:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>winners.sort(reverse = True)\n</code></pre>\n\n<p>However, that did not work</p>\n\n<p>I want the list to be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>winners = [\"15, Smith\", \"13, John\", \"8, Max\", \"4, Bob\"]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1567627652, "post_id": 57795055, "comment_id": 102023290, "body": "There is no need for the <code>score</code> variable. If they guess correctly simply add 1 to <code>totalScore</code> else do nothing."}], "answers": [{"tags": [], "owner": {"reputation": 4377, "user_id": 3244542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d97462f60717863214b3efca87c24?s=128&d=identicon&r=PG&f=1", "display_name": "CasualDemon", "link": "https://stackoverflow.com/users/3244542/casualdemon"}, "is_accepted": false, "score": 1, "last_activity_date": 1567628950, "last_edit_date": 1567628950, "creation_date": 1567628642, "answer_id": 57795216, "question_id": 57795055, "link": "https://stackoverflow.com/questions/57795055/i-cant-get-the-points-in-my-game-to-add-up/57795216#57795216", "title": "I can&#39;t get the points in my game to add up", "body": "<p>Each time you are setting <code>score</code> to 0, you are overwriting the previous <code>score</code>. What you want to do instead of <code>score = totalScore + 1</code> (or 0) is simply <code>totalScore += 1</code>  (same as <code>totalScore = totalScore + 1</code>) </p>\n\n<pre><code>import random\n\ntotalScore = 0\n\n\nlp = input ('Lets play the guessing game! \\nPress Enter to start')\nif (lp== \"\"):\n    print (\"Score\\n_____\")\n\nx1 = int(input(\"No.1 Type a number between 0 and 5\"))\nif (x1 !=(random.randint(0,5))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\nelse:\n    input(\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    totalScore += 1\nx2 = int(input(\"No.2 Type a number between 0 and 10\"))\nif (x2 !=(random.randint(0,10))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    totalScore += 1\n\nx3 = int(input(\"No.1 Type a number between 0 and 15\"))\nif (x3 !=(random.randint(0,15))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    totalScore += 1\n\nx4 = int(input(\"No.1 Type a number between 0 and 20\"))\nif (x4 !=(random.randint(0,20))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    totalScore += 1\n\nx5 = int(input(\"No.1 Type a number between 0 and 25\"))\nif (x5 !=(random.randint(0,25))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    totalScore += 1\n\nprint (\"Total Score:\")\nprint (totalScore)\n</code></pre>\n\n<p>Example output: </p>\n\n<pre><code>Score\n_____\n+1\n+0\n+1\n+0\n+0\nTotal Score:\n2\n</code></pre>\n\n<p>In the example above I also removed the superfluous <code>score = totalScore + 0</code> as adding 0 to a integer does nothing. </p>\n\n<p>Thanks for the codeskulptor link to make working with the code super easy!</p>\n"}], "owner": {"reputation": 1, "user_id": 12021806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97207037ba583efdce6e39208db539c5?s=128&d=identicon&r=PG&f=1", "display_name": "SmallsJr", "link": "https://stackoverflow.com/users/12021806/smallsjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567628950, "creation_date": 1567626960, "question_id": 57795055, "link": "https://stackoverflow.com/questions/57795055/i-cant-get-the-points-in-my-game-to-add-up", "title": "I can&#39;t get the points in my game to add up", "body": "<p>I am making a guessing game and I can't get the score to say anything but 0</p>\n\n<p>I googled it and it came up with a formula that didn't work, so I came here.</p>\n\n<p>Just in case the code looks weird, here's a link:\n<a href=\"http://www.codeskulptor.org/#user46_Rn6mbqc2fxzXniV.py\" rel=\"nofollow noreferrer\">http://www.codeskulptor.org/#user46_Rn6mbqc2fxzXniV.py</a></p>\n\n<pre><code>import random\n\ntotalScore = 0\n\n\nlp = input ('Lets play the guessing game! \\nPress Enter to start')\nif (lp== \"\"):\n    print (\"Score\\n_____\")\n\nx1 = int(input(\"No.1 Type a number between 0 and 5\"))\nif (x1 !=(random.randint(0,5))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\n    score = totalScore + 0\nelse:\n    input(\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\nx2 = int(input(\"No.2 Type a number between 0 and 10\"))\nif (x2 !=(random.randint(0,10))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\n    score = totalScore + 0\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    score = totalScore + 1\n\nx3 = int(input(\"No.1 Type a number between 0 and 15\"))\nif (x3 !=(random.randint(0,15))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\n    score = totalScore + 0\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    score = totalScore + 1\n\nx4 = int(input(\"No.1 Type a number between 0 and 20\"))\nif (x4 !=(random.randint(0,20))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\n    score = totalScore + 0\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    score = totalScore + 1\n\nx5 = int(input(\"No.1 Type a number between 0 and 25\"))\nif (x5 !=(random.randint(0,25))):\n    input(\"Incorrect   :/\\n Press Enter to move on\")\n    print (\"+0\")\n    score = totalScore + 0\nelse:\n    input (\"Correct!\\n Press Enter to move on\")\n    print (\"+1\")\n    score = totalScore + 1\n\ntotalScore = score\n\nprint (\"Total Score:\")\nprint (totalScore)\n</code></pre>\n\n<p>I am trying to get the game to add all points earned and show them at the end.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1567629377, "post_id": 57794979, "comment_id": 102023750, "body": "So, your full date format is a consistent width?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1567629570, "post_id": 57794979, "comment_id": 102023828, "body": "Please update the test data in this question with all possible formats of test."}], "answers": [{"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 2, "creation_date": 1567628414, "post_id": 57795084, "comment_id": 102023405, "body": "<code>df1[&#39;rest_of_log&#39;] = &#39;Info:&#39; + df1[&#39;rest_of_log&#39;]</code>  no need for the map.  Just add the string."}, {"owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "edited": false, "score": 1, "creation_date": 1567628544, "post_id": 57795084, "comment_id": 102023433, "body": "to quote OP: &quot;I would just use Info: to separate but sometimes it is a different word.&quot;"}, {"owner": {"reputation": 3064, "user_id": 11971785, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tm3RpH5aT9s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqnZceaddibCeBqwQbb0SmiR6prw/photo.jpg?sz=128", "display_name": "Andreas", "link": "https://stackoverflow.com/users/11971785/andreas"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1567628838, "post_id": 57795084, "comment_id": 102023550, "body": "@Scott Boston, Thank you wasn&#39;t aware of that."}, {"owner": {"reputation": 3064, "user_id": 11971785, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tm3RpH5aT9s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqnZceaddibCeBqwQbb0SmiR6prw/photo.jpg?sz=128", "display_name": "Andreas", "link": "https://stackoverflow.com/users/11971785/andreas"}, "reply_to_user": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "edited": false, "score": 0, "creation_date": 1567628980, "post_id": 57795084, "comment_id": 102023604, "body": "@Christian Sloper, oh you are right, thank you for pointing that out. I had overread that. Adjusted my answer."}], "tags": [], "owner": {"reputation": 3064, "user_id": 11971785, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tm3RpH5aT9s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqnZceaddibCeBqwQbb0SmiR6prw/photo.jpg?sz=128", "display_name": "Andreas", "link": "https://stackoverflow.com/users/11971785/andreas"}, "is_accepted": false, "score": 2, "last_activity_date": 1567628931, "last_edit_date": 1567628931, "creation_date": 1567627108, "answer_id": 57795084, "question_id": 57794979, "link": "https://stackoverflow.com/questions/57794979/pandas-separate-log-file-into-2-columns-after-space-and-first-4-consecutive-nume/57795084#57795084", "title": "Pandas separate log file into 2 columns after space and first 4 consecutive numeric values", "body": "<p>Why not simply split on \"Info:\" ?</p>\n\n<p>df = df[\"test\"].str.split(\"Info:\", expand = True) </p>\n\n<p>the full code would be:</p>\n\n<pre><code>df[\"test\"] = df[\"test\"].map(lambda x: \" \".join(x.split()) #removes double whitespaces\ndf[[\"date\", \"rest_of_log\"]] = df[\"test\"].str.split(\"Info:\", n=1, expand = True)\ndf[\"rest_of_log\"] = 'Info:' + df1['rest_of_log'] #comment from Scott Boston\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2116, "user_id": 9795720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p2kjJTpOXtI/AAAAAAAAAAI/AAAAAAAAAKc/XnZfe29QBhw/photo.jpg?sz=128", "display_name": "kantal", "link": "https://stackoverflow.com/users/9795720/kantal"}, "edited": false, "score": 0, "creation_date": 1567629320, "post_id": 57795093, "comment_id": 102023723, "body": "It will fail on such an entry like &quot;Wed Sep 4 10:32:45 2019 Info: MID 1234  etc&quot;."}, {"owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "reply_to_user": {"reputation": 2116, "user_id": 9795720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p2kjJTpOXtI/AAAAAAAAAAI/AAAAAAAAAKc/XnZfe29QBhw/photo.jpg?sz=128", "display_name": "kantal", "link": "https://stackoverflow.com/users/9795720/kantal"}, "edited": false, "score": 0, "creation_date": 1567629434, "post_id": 57795093, "comment_id": 102023777, "body": "are you sure? I am testing your example and it works with that."}, {"owner": {"reputation": 2116, "user_id": 9795720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p2kjJTpOXtI/AAAAAAAAAAI/AAAAAAAAAKc/XnZfe29QBhw/photo.jpg?sz=128", "display_name": "kantal", "link": "https://stackoverflow.com/users/9795720/kantal"}, "edited": false, "score": 0, "creation_date": 1567630207, "post_id": 57795093, "comment_id": 102024053, "body": "Please check my code above (and delete it thereafter). Am I wrong?"}, {"owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "reply_to_user": {"reputation": 2116, "user_id": 9795720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p2kjJTpOXtI/AAAAAAAAAAI/AAAAAAAAAKc/XnZfe29QBhw/photo.jpg?sz=128", "display_name": "kantal", "link": "https://stackoverflow.com/users/9795720/kantal"}, "edited": false, "score": 0, "creation_date": 1567630475, "post_id": 57795093, "comment_id": 102024149, "body": "Checked.. agreed there was a problem. Updated regex to be lazy instead of greedy"}], "tags": [], "owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "is_accepted": true, "score": 4, "last_activity_date": 1567630928, "last_edit_date": 1567630928, "creation_date": 1567627190, "answer_id": 57795093, "question_id": 57794979, "link": "https://stackoverflow.com/questions/57794979/pandas-separate-log-file-into-2-columns-after-space-and-first-4-consecutive-nume/57795093#57795093", "title": "Pandas separate log file into 2 columns after space and first 4 consecutive numeric values", "body": "<p>If you want you can look into regular expressions for this:</p>\n\n<pre><code>import re as voodoo\n\np = voodoo.compile('(.*? [0-9]{4}) (.*)')\nm = p.match(\"Wed Sep 4 10:32:45 2019 Info: Begin Logfile\")\nprint(m.group(1))\nprint(m.group(2))\n</code></pre>\n\n<p>yields:</p>\n\n<pre><code>Wed Sep 4 10:32:45 2019\nInfo: Begin Logfile\n</code></pre>\n\n<p>in pandas this can be done like this:</p>\n\n<pre><code>df= pd.DataFrame({\"logtxt\": [\"Wed Sep 4 10:32:45 2019 Info: Begin Logfile\"]})\ndf[\"logtxt\"].str.extract('^(.*? [0-9]{4}) (.*)$')\n</code></pre>\n\n<p>which yields:</p>\n\n<pre><code>    0                       1\n0   Wed Sep 4 10:32:45 2019 Info: Begin Logfile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "edited": false, "score": 0, "creation_date": 1567629493, "post_id": 57795336, "comment_id": 102023800, "body": "OP says there is different number of characters depending on day of week"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "edited": false, "score": 0, "creation_date": 1567629545, "post_id": 57795336, "comment_id": 102023817, "body": "Explain?  It best if you put all your test cases in your question."}, {"owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "edited": false, "score": 1, "creation_date": 1567629597, "post_id": 57795336, "comment_id": 102023837, "body": "I am not op, but as far as i understand one testcase is : &quot;Wed Sep 4 10:32:45 2019&quot; and another is &quot;Wed Sep 14 10:32:45 2019&quot;"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1567630118, "last_edit_date": 1567630118, "creation_date": 1567629441, "answer_id": 57795336, "question_id": 57794979, "link": "https://stackoverflow.com/questions/57794979/pandas-separate-log-file-into-2-columns-after-space-and-first-4-consecutive-nume/57795336#57795336", "title": "Pandas separate log file into 2 columns after space and first 4 consecutive numeric values", "body": "<p>Use named groups with regex:</p>\n\n<pre><code>df1['test'].str.extract('^(?P&lt;date&gt;\\w+\\s\\w+\\s\\d{1,2}\\s\\d{2}:\\d{2}:\\d{2}\\s\\d{4})\\s(?P&lt;rest_of_log&gt;.*)$')\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57795093, "answer_count": 3, "score": 0, "last_activity_date": 1567630928, "creation_date": 1567626551, "question_id": 57794979, "link": "https://stackoverflow.com/questions/57794979/pandas-separate-log-file-into-2-columns-after-space-and-first-4-consecutive-nume", "title": "Pandas separate log file into 2 columns after space and first 4 consecutive numeric values", "body": "<p>I am working with email log files and each row is a log in a pandas dataframe with a field name 'test'.  I am trying to split this column into two columns separating the date from the rest of the log.  Currently I am doing it a sloppy way by separating on the first 6 spaces then joining the date back together.  I would just use <code>Info:</code> to separate but sometimes it is a different word.  And I don't want to use 2019 because the year will change.  And in the log file the date has 2 spaces when the day of the week is &lt;10 and one space when it is >=10.  So I would like to split into 2 columns after a space and first 4 consecutive numeric values.   How can I do this more efficiently? </p>\n\n<pre><code>df\n    test\n0   Wed Sep 4 10:32:45 2019 Info: Begin Logfile\n1   Wed Sep 4 10:32:45 2019 Info: Version:  ...\n2   Wed Sep 4 10:32:45 2019 Info: Time offse...\n3   Wed Sep 4 10:32:44 2019 Info: MID 105174...\n4   Wed Sep 4 10:32:44 2019 Info: MID 105174...\n5   Wed Sep 4 10:32:44 2019 Info: MID 105174...\n\ndf = df[\"test\"].str.split(\" \", 6, expand = True) \ndf['date'] = df[0] + ' ' + df[1] + ' ' + df[2] + ' ' + df[3] + ' ' + df[4] + ' ' + df[5]\ndf['rest_of_log'] = df[6]\ndf2 = df[['date','rest_of_log']]\n\ndf2\n    date                       rest_of_log\n0   Wed Sep 4 10:32:45 2019    Info: Begin ...\n1   Wed Sep 4 10:32:45 2019    Info: Versio...\n2   Wed Sep 4 10:32:45 2019    Info: Time ...\n3   Wed Sep 4 10:32:44 2019    Info: MID 1...\n4   Wed Sep 4 10:32:44 2019    Info: MID 1...\n5   Wed Sep 4 10:32:44 2019    Info: MID 1...\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "apache-kafka", "apache-kafka-connect", "confluent-platform"], "comments": [{"owner": {"reputation": 439, "user_id": 2986044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6c9a0583352e3cd4184aabdfacbbbdad?s=128&d=identicon&r=PG&f=1", "display_name": "franzke", "link": "https://stackoverflow.com/users/2986044/franzke"}, "edited": false, "score": 0, "creation_date": 1567630406, "post_id": 57794973, "comment_id": 102024134, "body": "Kafka Connect is a tool to sink data from a topic to a location (database, file system) or to source data from a data store to a topic.  Are you looking to take data from a topic and save it somewhere?"}, {"owner": {"reputation": 582, "user_id": 5825656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236386d605aa96f3712de0f3c1d9bc16?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Davis", "link": "https://stackoverflow.com/users/5825656/robin-davis"}, "reply_to_user": {"reputation": 439, "user_id": 2986044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6c9a0583352e3cd4184aabdfacbbbdad?s=128&d=identicon&r=PG&f=1", "display_name": "franzke", "link": "https://stackoverflow.com/users/2986044/franzke"}, "edited": false, "score": 0, "creation_date": 1567632204, "post_id": 57794973, "comment_id": 102024714, "body": "@franzke Yes, in this case the _work() method is writing the message into a custom database."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1567632403, "post_id": 57794973, "comment_id": 102024769, "body": "And your custom database is not here? <a href=\"https://www.confluent.io/hub/\" rel=\"nofollow noreferrer\">confluent.io/hub</a>"}, {"owner": {"reputation": 582, "user_id": 5825656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236386d605aa96f3712de0f3c1d9bc16?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Davis", "link": "https://stackoverflow.com/users/5825656/robin-davis"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1567632427, "post_id": 57794973, "comment_id": 102024783, "body": "@cricket_007 Affirmative. I think basically I need to implement my own connector, similar to what is in that list."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1567632594, "post_id": 57794973, "comment_id": 102024839, "body": "Well, that would be done using Java, not Python. <a href=\"https://docs.confluent.io/current/connect/devguide.html\" rel=\"nofollow noreferrer\">docs.confluent.io/current/connect/devguide.html</a>"}, {"owner": {"reputation": 582, "user_id": 5825656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236386d605aa96f3712de0f3c1d9bc16?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Davis", "link": "https://stackoverflow.com/users/5825656/robin-davis"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1567633149, "post_id": 57794973, "comment_id": 102025023, "body": "@cricket_007 Is there some sort of generic Connector that will just give me JSON or something?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1567633349, "post_id": 57794973, "comment_id": 102025080, "body": "There is a datagen connector <a href=\"https://www.confluent.io/blog/easy-ways-generate-test-data-kafka\" rel=\"nofollow noreferrer\">confluent.io/blog/easy-ways-generate-test-data-kafka</a>"}], "owner": {"reputation": 582, "user_id": 5825656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236386d605aa96f3712de0f3c1d9bc16?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Davis", "link": "https://stackoverflow.com/users/5825656/robin-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567626529, "creation_date": 1567626529, "question_id": 57794973, "link": "https://stackoverflow.com/questions/57794973/rewrite-logic-using-kafka-balanced-consumer-to-instead-use-kafka-connect-sink", "title": "Rewrite logic using kafka balanced consumer to instead use Kafka Connect Sink", "body": "<p>I have some application logic, written in Python using pykafka, that is doing something like this:</p>\n\n<pre><code>    consumer = self.get_balanced_consumer()\n    while True:\n        msg = consumer.consume(block=False)\n        if not msg:\n            break\n        self._work(msg)\n        consumer.commit_offsets()\n</code></pre>\n\n<p>What is the equivalent logic using the Kafka Connect API?</p>\n"}, {"tags": ["python", "function", "text"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1567626629, "post_id": 57794972, "comment_id": 102023039, "body": "just declare an empty string and append to it"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1567626711, "post_id": 57794972, "comment_id": 102023073, "body": "Or make a list to append your strings to."}], "answers": [{"comments": [{"owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "edited": false, "score": 0, "creation_date": 1567629087, "post_id": 57795034, "comment_id": 102023642, "body": "I updated the code portion of my question, this would be an empty string right? And then just append... And return the list? Thanks."}], "tags": [], "owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "is_accepted": true, "score": 0, "last_activity_date": 1567626846, "creation_date": 1567626846, "answer_id": 57795034, "question_id": 57794972, "link": "https://stackoverflow.com/questions/57794972/python-function-to-return-strings/57795034#57795034", "title": "Python function to return strings", "body": "<blockquote>\n  <p>is it possible to create like an empty list</p>\n</blockquote>\n\n<p>Of course; <code>[]</code> is a newly created empty list, and then you can give it a name like anything else.</p>\n\n<blockquote>\n  <p>to compile/append strings?</p>\n</blockquote>\n\n<p>Sure; use the normal list operations, like <code>.append</code>. This solves the original problem as well:</p>\n\n<blockquote>\n  <p>is it possible to return multiple strings (instead of printing) if any of the conditions are TRUE?</p>\n</blockquote>\n\n<p>Build up the list of strings you want to return, and then return the list.</p>\n\n<p>(This is, incidentally, a Good Idea; in general you want your functions to return useful data rather than directly printing stuff - that way, the calling code can do something else with that data, and you can <em>avoid</em> the printing if there's something better to do.)</p>\n"}, {"tags": [], "owner": {"reputation": 387, "user_id": 10380766, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCKrY.png?s=128&g=1", "display_name": "Hofbr", "link": "https://stackoverflow.com/users/10380766/hofbr"}, "is_accepted": false, "score": 0, "last_activity_date": 1567630617, "last_edit_date": 1567630617, "creation_date": 1567629108, "answer_id": 57795295, "question_id": 57794972, "link": "https://stackoverflow.com/questions/57794972/python-function-to-return-strings/57795295#57795295", "title": "Python function to return strings", "body": "<p>You can definitely set an empty string and use a for loop to record the data. Though I'm imagining what you want to do is cycle through several sets of data and append certain results.</p>\n\n<p>I don't think plugging all of that into a function is the best way to do that.</p>\n\n<p>Maybe change your function to something like:</p>\n\n<pre><code>def check_fans(fansData):\n   count = fansData.history.count()\n   std = fansData.history.std()\n   maxy = fansData.history.max()\n   mean = fansData.history.mean()\n   low = fansData.history.min()\n\n\nresults = [] \n\nfluxIssue = 'there appears to be fluctuations in the fan speed data like the PID is hunting, std is {}, {}'\n\nmeanHigh = 'the supply fan speed mean is over 90% like the fan isnt building static, mean value recorded is {}, {}'\n\nmeanLow = 'the supply fan speed mean is under 50% like there is duct blockage/looks odd, mean value recorded is {}, {}'\n\nFor data in list_of_data:\n    check_fans(data)\n    if check_fans.std &gt; 5:\n        results.append(fluxIssue.format(check_fans.std, check_fans.count))\n    if check_fans.mean &gt; 90:\n        results.append(meanHigh.format(check_fans.mean, check_fans.count))\n    elif check_fans.mean &lt; 50:\n        results.append(meanLow.format(check_fans.mean, check_fans.count))\n    else:\n        continue\n\nprint(results)\n</code></pre>\n\n<p>I would likely recommend using a dictionary though. you'll end up with a  big string of numbers which I don't thinks will be very helpful for any kind of analytics</p>\n"}], "owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57795034, "answer_count": 2, "score": 0, "last_activity_date": 1567630617, "creation_date": 1567626528, "last_edit_date": 1567629009, "question_id": 57794972, "link": "https://stackoverflow.com/questions/57794972/python-function-to-return-strings", "title": "Python function to return strings", "body": "<p>I use a script to retrieve data values from a building automation system (script isnt shown for that) and I am curious to create a function that can return strings based on summary statistics of the data.</p>\n\n<p>Two part question, Im only printing values as shown below but is it possible to return multiple strings (instead of printing) if any of the conditions are TRUE?</p>\n\n<p>This next question maybe silly, but is it possible to create like an empty list to compile/append strings? Im curious to play around with text analytics if I could compile a large amount of data.</p>\n\n<p><strong><em>UPDATED CODE BELOW</em></strong></p>\n\n<pre><code>def check_fans(fansData):\n\n    fan_strings = []\n\n    count = fansData.history.count()\n    std = fansData.history.std()\n    maxy = fansData.history.max()\n    mean = fansData.history.mean()\n    low = fansData.history.min()\n\n\n    if std &gt; 5:\n        fluxIssue = f'there appears to be fluctuations in the fan speed data like the PID is hunting, std is {std}, {count}'\n        fan_strings.append(fluxIssue)\n    if mean &gt; 90:\n        meanHigh = f'the supply fan speed mean is over 90% like the fan isnt building static, mean value recorded is {mean}, {count}'\n        fan_strings.append(meanHigh)\n    if mean &lt; 50:\n        meanLow = f'the supply fan speed mean is under 50% like there is duct blockage/looks odd, mean value recorded is {mean}, {count}'\n        fan_strings.append(meanLow)\n\n    return fan_strings\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1567628431, "post_id": 57794939, "comment_id": 102023409, "body": "In short, if you create a class instance and don&#39;t save it in a variable it will be garbage collected by the python interpreter."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567628547, "post_id": 57794939, "comment_id": 102023435, "body": "You instantiate it in both approaches. One just gives it a name to keep it in the namespace."}], "owner": {"reputation": 21, "user_id": 12021719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2295808abcdbb7ac8db05e73611898cf?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12021719/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1567628353, "answer_count": 0, "score": 2, "last_activity_date": 1567626806, "creation_date": 1567626349, "last_edit_date": 1567626806, "question_id": 57794939, "link": "https://stackoverflow.com/questions/57794939/why-do-you-have-to-instantiate-the-matplotlib-animation-funcanimation-for-it-to", "closed_reason": "Duplicate", "title": "Why do you have to instantiate the matplotlib.animation.FuncAnimation for it to work?", "body": "<p>So I was following Corey Schafer's video tutorial <a href=\"https://youtu.be/Ercd-Ip5PfQ?t=318\" rel=\"nofollow noreferrer\">link</a> and got confused as to why we need to create a variable for the FuncAnimation Class.</p>\n\n<p>Basically why I need to do this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>ani = FuncAnimation(plt.gcf(), animate,interval=1000)\n</code></pre>\n\n<p>instead of this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>FuncAnimation(plt.gcf(), animate,interval=1000)\n</code></pre>\n\n<p>The code works only if I create the variable,and I am just confused as to why we need create it in the first place, especially since it is not used. All the other code examples Ive seen that use the FuncAnimation class also set it to a variable.If I could get some clarification on why its necessary it would be greatly appreciated.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport random\nfrom itertools import count\nimport pandas as pd \nimport matplotlib.pyplot as plt \nfrom matplotlib.animation import FuncAnimation\nimport matplotlib\nplt.style.use('fivethirtyeight')\n\nx_vals = []\ny_vals = []\n\n\nindex = count()\n\ndef animate(i):\n    x_vals.append(next(index))\n    y_vals.append(random.randint(0, 5))\n\n    plt.cla()\n\n    plt.plot(x_vals,y_vals)\n\n\n\nani = FuncAnimation(plt.gcf(), animate,interval=1000)\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>My intuition makes me think this should work, but instead nothing get plotted</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport random\nfrom itertools import count\nimport pandas as pd \nimport matplotlib.pyplot as plt \nfrom matplotlib.animation import FuncAnimation\nimport matplotlib\nplt.style.use('fivethirtyeight')\n\nx_vals = []\ny_vals = []\n\n\nindex = count()\n\ndef animate(i):\n    x_vals.append(next(index))\n    y_vals.append(random.randint(0, 5))\n\n    plt.cla()\n\n    plt.plot(x_vals,y_vals)\n\n\n\nFuncAnimation(plt.gcf(), animate,interval=1000)\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1567626902, "post_id": 57794913, "comment_id": 102023134, "body": "Yes, it doesn&#39;t shrink the pool. Basically I don&#39;t see a point to do so. So I believe there is no such implementation in Python."}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 2, "creation_date": 1567626986, "post_id": 57794913, "comment_id": 102023165, "body": "Please explain the problem you are trying to solve instead of asking for a ready solution for your idea of solving the problem."}], "owner": {"reputation": 7955, "user_id": 1255356, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LSG5g.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1255356/pablo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567626175, "creation_date": 1567626175, "question_id": 57794913, "link": "https://stackoverflow.com/questions/57794913/does-pythons-threadpoolexecutor-shrink-a-thread-pool-eventually", "title": "Does Python&#39;s ThreadPoolExecutor shrink a thread pool eventually?", "body": "<p>I am looking for a Thread Pool implementation in Python that is able to dynamically grow/shrink the number of threads that it's using. Looking at <code>ThreadPoolExecutor</code>, it doesn't seem like it shrinks dynamically. See the <a href=\"https://github.com/python/cpython/blob/master/Lib/concurrent/futures/thread.py#L70-L110\" rel=\"nofollow noreferrer\">worker thread code</a>.</p>\n\n<p>Is there an alternative that will allow idle threads to die if there's no work to match them? Is there a bug to track this feature for the existing executor?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1567626648, "post_id": 57794894, "comment_id": 102023050, "body": "Can you share the view where you use this form?"}, {"owner": {"reputation": 2983, "user_id": 8629753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RYMtk.jpg?s=128&g=1", "display_name": "adder", "link": "https://stackoverflow.com/users/8629753/adder"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1567627048, "post_id": 57794894, "comment_id": 102023190, "body": "@WillemVanOnsem I edited the question."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1567627393, "creation_date": 1567627393, "answer_id": 57795102, "question_id": 57794894, "link": "https://stackoverflow.com/questions/57794894/initial-value-not-showing-up-in-decimalfield/57795102#57795102", "title": "Initial value not showing up in DecimalField", "body": "<p>You should not use <code>request.GET</code> here as a source of data, since then it will try to parse the data out of a (likely non-existing) querystring. If you want to create an empty non-bounded form, you construct it <em>without</em> data:</p>\n\n<pre><code>def product_create_view(request):\n    if request.method == &quot;POST&quot;:\n        form = RawProductForm(request.POST)\n        if form.is_valid():\n            print(form.cleaned_data)\n            Product.objects.create(**form.cleaned_data)\n        else:\n            print(form.errors)\n    else:\n        <b>form = RawProductForm()</b>\n    context = {\n        &quot;form&quot;: form\n    }\n    return render(request, &quot;products/product_create.html&quot;, context)</code></pre>\n\n<p>That being said, your code has some additional problems. If the creation is successful with a POST request, it is better to redirect, and implement the <a href=\"https://en.wikipedia.org/wiki/Post/Redirect/Get\" rel=\"nofollow noreferrer\"><em>Post/Redirect/Get</em> pattern [wiki]</a>. Furthermore you probably here should use a <a href=\"https://docs.djangoproject.com/en/dev/topics/forms/modelforms/\" rel=\"nofollow noreferrer\"><strong><code>ModelForm</code></strong></a>, this will ensure that the creation of the model object (here a <code>Product</code>) is done correctly.</p>\n"}], "owner": {"reputation": 2983, "user_id": 8629753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RYMtk.jpg?s=128&g=1", "display_name": "adder", "link": "https://stackoverflow.com/users/8629753/adder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 57795102, "answer_count": 1, "score": 0, "last_activity_date": 1567627393, "creation_date": 1567626048, "last_edit_date": 1567627036, "question_id": 57794894, "link": "https://stackoverflow.com/questions/57794894/initial-value-not-showing-up-in-decimalfield", "title": "Initial value not showing up in DecimalField", "body": "<p>I have a form with a <code>DecimalField</code> and I have set the initial value like so:</p>\n\n<pre><code>class RawProductForm(forms.Form):\n    title = forms.CharField(label=\"\")\n    description = forms.CharField(required=False)\n    price = forms.DecimalField(initial=199.99)\n</code></pre>\n\n<p>Here is the view:</p>\n\n<pre><code>from django.shortcuts import render\nfrom .forms import ProductForm, RawProductForm\nfrom .models import Product\n\ndef product_create_view(request):\n    form = RawProductForm(request.GET)\n    if request.method == \"POST\":\n        form = RawProductForm(request.POST)\n        if form.is_valid():\n            print(form.cleaned_data)\n            Product.objects.create(**form.cleaned_data)\n        else:\n            print(form.errors)\n\n    context = {\n        \"form\": form\n    }\n    return render(request, \"products/product_create.html\", context)\n</code></pre>\n\n<p>However, the initial value is not showing up when I render the page:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Pye7M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pye7M.png\" alt=\"screenshot\"></a></p>\n\n<p>What could be the issue?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1567626286, "post_id": 57794843, "comment_id": 102022914, "body": "You assign totally different things to your variable."}], "answers": [{"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 6, "last_activity_date": 1567626623, "last_edit_date": 1567626623, "creation_date": 1567626277, "answer_id": 57794927, "question_id": 57794843, "link": "https://stackoverflow.com/questions/57794843/why-does-subprocess-popen-behave-differently-as-a-single-statement/57794927#57794927", "title": "Why does subprocess.popen behave differently as a single statement?", "body": "<p><code>returncode</code> is an attribute of <code>Popen</code>, not of the tuple returned by <code>communicate()</code>.</p>\n\n<p>Therefore <code>my_variable.returncode</code> works, because <code>my_variable</code> is the <code>Popen</code> instance.</p>\n\n<p>On the other hand <code>subprocess.Popen(...).communicate().returncode</code> doesn't work, because, while <code>subprocess.Popen(...)</code> is the <code>Popen</code> instance, <code>subprocess.Popen(...).communicate()</code> evaluates to a tuple <code>(None, None)</code> returned by <code>communicate</code>, not the <code>Popen</code> instance it was called on.\nThe tuple does not have an attribute <code>returncode</code> as the error message tells you.</p>\n\n<p>Your problem is merely a confusion of what <code>communicate()</code> returns. It does not return the <code>Popen</code> instance that it was called on. This is not an issue of the inner workings or semantics of <code>Popen</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10537330"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 57794927, "answer_count": 1, "score": 0, "last_activity_date": 1567626623, "creation_date": 1567625783, "question_id": 57794843, "link": "https://stackoverflow.com/questions/57794843/why-does-subprocess-popen-behave-differently-as-a-single-statement", "title": "Why does subprocess.popen behave differently as a single statement?", "body": "<p>When attempting a subprocess.Popen call to get the return code of a command, I get different results depending on whether I break the call up into distinct statements or not. I'm not tied up on making it work as a single statement anymore, but I am not able to articulate why this is the case and want to know more (if it's possible to get a single statement then obviously all the better).</p>\n\n<p>What I wanted to do was the following:</p>\n\n<pre><code>my_variable = subprocess.Popen(\n  'ip addr show ens192 | grep master',\n  shell=True).communicate().returncode\n</code></pre>\n\n<p>Which yields:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'tuple' object has no attribute 'returncode'\n</code></pre>\n\n<p>However when I take the same logic and break it across several lines, it works:</p>\n\n<pre><code>&gt;&gt;&gt; my_variable = subprocess.Popen('ip addr show ens192 | grep master', shell=True)\n&gt;&gt;&gt; my_variable.communicate()\n(None, None)\n&gt;&gt;&gt; my_variable.returncode\n1\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Why is this? This is not behavior I'm used to with Python and I am guessing it has something to do with how it is running the command under the hood.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1567626251, "post_id": 57794807, "comment_id": 102022904, "body": "You can change the function&#39;s <code>__doc__</code> attribute from the outside, actually from everywhere where you have a reference to the function."}, {"owner": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1567626671, "post_id": 57794807, "comment_id": 102023058, "body": "@KlausD hm so I would need to do it outside the method... like @changeDoc(API.FOO.bar) decorator that takes a method to get the doc from and decorates a method to change the doc for?"}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "edited": false, "score": 0, "creation_date": 1567627106, "post_id": 57795030, "comment_id": 102023212, "body": "Is there any fancy way for the decorator to know what the function is calling and use that <b>doc</b> or do I need to explicitly pass the decorator the method to get the doc from?"}, {"owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "reply_to_user": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "edited": false, "score": 0, "creation_date": 1567630084, "post_id": 57795030, "comment_id": 102024010, "body": "I edited, although I&#39;m not in front of a computer so may not be perfect"}], "tags": [], "owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "is_accepted": true, "score": 1, "last_activity_date": 1567632266, "last_edit_date": 1567632266, "creation_date": 1567626834, "answer_id": 57795030, "question_id": 57794807, "link": "https://stackoverflow.com/questions/57794807/editing-doc-within-a-flat-method/57795030#57795030", "title": "Editing __doc__ within a flat method?", "body": "<p>If you implement the change to doc as a  decorator on your function it will run at import time.</p>\n\n<pre><code>def change_doc(function):\n        function.__doc__=\"my text\"\n        return function\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "is_accepted": false, "score": 1, "last_activity_date": 1567629393, "creation_date": 1567629393, "answer_id": 57795330, "question_id": 57794807, "link": "https://stackoverflow.com/questions/57794807/editing-doc-within-a-flat-method/57795330#57795330", "title": "Editing __doc__ within a flat method?", "body": "<p>So the general idea is that you want to be able to take <code>API.FOO.bar</code> and make a named wrapper for it. No problem, although it takes a bit of out-of-box thinking. The key idea here is to understand that decorators can also be used as normal functions, transforming one function into another:</p>\n\n<pre><code>def wrap_api(method):\n    result = click.command(method)\n    result.__doc__ = method.__doc__\n    return method\n</code></pre>\n\n<p>And now we can create our wrappers:</p>\n\n<pre><code>hello = wrap_api(API.FOO.bar)\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 6770307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtG9W.jpg?s=128&g=1", "display_name": "bison", "link": "https://stackoverflow.com/users/6770307/bison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57795030, "answer_count": 2, "score": 0, "last_activity_date": 1567632266, "creation_date": 1567625643, "last_edit_date": 1567629774, "question_id": 57794807, "link": "https://stackoverflow.com/questions/57794807/editing-doc-within-a-flat-method", "title": "Editing __doc__ within a flat method?", "body": "<p>I am trying to make a super thin cli wrapper around an api I wrote. It seems like the <code>__doc__</code> dunder attr is set at import time. </p>\n\n<pre><code>&gt;&gt;&gt; def foo():\n...     \"\"\"\n...     doc\n...     \"\"\"\n...     pass\n...\n&gt;&gt;&gt; foo.__doc__\n'\\n\\tdoc\\n\\t'\n</code></pre>\n\n<p>I found that I can change the <code>__doc__</code> within the method</p>\n\n<pre><code>&gt;&gt;&gt; def foo():\n...     foo.__doc__ = \"new doc\"\n...\n&gt;&gt;&gt; foo.__doc__\n&gt;&gt;&gt; foo()\n&gt;&gt;&gt; foo.__doc__\n'new doc'\n</code></pre>\n\n<p>But this requires the method to be run.</p>\n\n<p>I am writing a <a href=\"https://click.palletsprojects.com/en/7.x/\" rel=\"nofollow noreferrer\">click</a> tool and this allows <code>file.py --help</code> to print the doc. However, because this is a thin wrapper, it would be nice to just edit the <code>__doc__</code> to be the same as the doc whatever method it calls internally. </p>\n\n<blockquote>\n  <p>API.py</p>\n</blockquote>\n\n<pre><code>class FOO:\n    def bar():\n        \"\"\"\n        Some long doc string\n        \"\"\"\n        pass\n</code></pre>\n\n<blockquote>\n  <p>cli.py</p>\n</blockquote>\n\n<pre><code>import click\n\nimport API\n\n@click.command()\ndef hello():\n    \"\"\"\n    not what I want\n    \"\"\"\n    hello.__doc__ = API.FOO.bar.__doc__\n    API.FOO.bar()\n\n\nif __name__ == '__main__':\n    print(hello.__doc__)\n    hello()\n    print(API.FOO.bar.__doc__)\n</code></pre>\n\n<p>I get the below... when running <code>pyhton3.6 cli.py</code></p>\n\n<pre><code>not what I want\n\n\nSome long doc string\n</code></pre>\n\n<p>And when I run <code>python3.6 cli.py --help</code></p>\n\n<pre><code>Usage: cli.py [OPTIONS]\n\n  not what I want\n\nOptions:\n  --help  Show this message and exit.\n</code></pre>\n\n<p>Is there any way to inject the doc string from the imported method into the click method? Maybe a decorator resolves at import time but I am not sure how that might be done. Thanks.</p>\n"}, {"tags": ["python", "visual-studio-code", "python-unittest"], "answers": [{"tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": true, "score": 2, "last_activity_date": 1567703475, "last_edit_date": 1567703475, "creation_date": 1567631157, "answer_id": 57795634, "question_id": 57794804, "link": "https://stackoverflow.com/questions/57794804/visual-studio-code-only-runs-first-test-function-in-unittest-module/57795634#57795634", "title": "Visual studio code only runs first test function in unittest module", "body": "<p>An issue is created about that: <a href=\"https://github.com/microsoft/vscode-python/issues/4567\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-python/issues/4567</a>.</p>\n\n<p>I guess you should report this quite simple example there as it's easily reproducible.</p>\n\n<p>Btw, I've been able to reproduce the error on Ubuntu 18.04.3.</p>\n"}], "owner": {"reputation": 45, "user_id": 9482667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4dbedfbf89423137a8faeff26f601a4?s=128&d=identicon&r=PG&f=1", "display_name": "thornmesa", "link": "https://stackoverflow.com/users/9482667/thornmesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 57795634, "answer_count": 1, "score": 4, "last_activity_date": 1567703475, "creation_date": 1567625634, "last_edit_date": 1567625881, "question_id": 57794804, "link": "https://stackoverflow.com/questions/57794804/visual-studio-code-only-runs-first-test-function-in-unittest-module", "title": "Visual studio code only runs first test function in unittest module", "body": "<p>When I run a python unittest module in the Test window on Visual Studio Code, only the first test function in the test class runs. Is this a bug in VS Code or did I configure this wrong? How can I get all the tests in a module to run when I click the run button?</p>\n\n<p>I've made sure that my tests are discovered properly. I can also successfully run each test individually and by clicking \"run all tests\". The problem only occurs when I click the \"run\" button at the module level in the test window:</p>\n\n<p><img src=\"https://i.stack.imgur.com/A1IFx.png\" alt=\"test window\"></p>\n\n<p>Folder structure is</p>\n\n<ul>\n<li>unittestproblem\n\n<ul>\n<li>mycode.py</li>\n<li>tests\n\n<ul>\n<li>test_mycode.py</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>Here's my code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import unittest\n\nfrom mycode import MyClass\n\nclass TestMycode(unittest.TestCase):\n    def test_foo(self):\n        bar = MyClass().foo(1)\n        self.assertEqual(bar, 2)\n\n    def test_fooAgain(self):\n        bar = MyClass().foo(2)\n        self.assertEqual(bar, 3)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>class MyClass():\n    def foo(self,x):\n        return x + 1\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1567625972, "post_id": 57794780, "comment_id": 102022801, "body": "Please give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2621, "user_id": 4441404, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FkE0zIOGauU/AAAAAAAAAAI/AAAAAAAAAGc/7UEKz6Dw2Ic/photo.jpg?sz=128", "display_name": "tituszban", "link": "https://stackoverflow.com/users/4441404/tituszban"}, "is_accepted": false, "score": 0, "last_activity_date": 1567626304, "creation_date": 1567626304, "answer_id": 57794932, "question_id": 57794780, "link": "https://stackoverflow.com/questions/57794780/look-if-a-string-starts-with-the-ending-characters-of-another-string/57794932#57794932", "title": "Look if a string starts with the ending characters of another string?", "body": "<p>You can for how long the two match, and concatenate from there:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>s=\"12345678\"\nb=\"156789\"\n\n\nlongest_match = 0\nfor i in range(1, min(len(s), len(b))):\n    if s[-i:] == b[:i]:\n        longest_match = i\n\nif longest_match &gt; 0:\n    o = s + b[longest_match:]\n    print(o)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 401, "user_id": 8521888, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/141657dc5abd5858003e5e313f379bba?s=128&d=identicon&r=PG&f=1", "display_name": "Steveman30290", "link": "https://stackoverflow.com/users/8521888/steveman30290"}, "edited": false, "score": 0, "creation_date": 1567636339, "post_id": 57796015, "comment_id": 102025736, "body": "Noobie (and also not OP) but what kind of slicing is that in the second if statement (the s[i::])"}], "tags": [], "owner": {"reputation": 332, "user_id": 11939397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lyUM.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/11939397/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1572310992, "last_edit_date": 1572310992, "creation_date": 1567633776, "answer_id": 57796015, "question_id": 57794780, "link": "https://stackoverflow.com/questions/57794780/look-if-a-string-starts-with-the-ending-characters-of-another-string/57796015#57796015", "title": "Look if a string starts with the ending characters of another string?", "body": "<p>This works for me:</p>\n\n<pre><code>s=\"12345678\"\nb=\"56789\"\nfor i in range(len(s)):\n    if s[i] == b[0]:\n        if s[i::] in b[0:len(s[i::])]:\n            print('Found')\n</code></pre>\n\n<p>This works even if the string <code>s</code> repeats. What I am doing is going around, for the length of <code>s</code> and then seeing if <code>s[i]</code> is equal to the first char in <code>b</code>. I then look to see if the rest of <code>s</code> is, either <code>b</code> or is in <code>b</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 11635355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e22c087454b7b6f26142bdd2c53b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Luffy123", "link": "https://stackoverflow.com/users/11635355/luffy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 57796015, "answer_count": 2, "score": -2, "last_activity_date": 1572310992, "creation_date": 1567625541, "last_edit_date": 1567626101, "question_id": 57794780, "link": "https://stackoverflow.com/questions/57794780/look-if-a-string-starts-with-the-ending-characters-of-another-string", "title": "Look if a string starts with the ending characters of another string?", "body": "<p>I want to see if ending of one string is similar to starting of another string</p>\n\n<p>if i have a string \n<code>a=\"12345678\"</code> and\n<code>b=\"56789\"</code>\ni want to update a as 123456789</p>\n\n<p>these two strings are in a list</p>\n\n<pre><code>s=\"12345678\"\nb=\"56789\"\n</code></pre>\n\n<p>o/p:</p>\n\n<pre><code>s=123456789\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "algorithm", "graph-databases"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1567629359, "post_id": 57794766, "comment_id": 102023745, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips on debugging your code."}], "answers": [{"comments": [{"owner": {"reputation": 2855, "user_id": 1240649, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35a6f4ba2c16792398851d1db61fc9c9?s=128&d=identicon&r=PG", "display_name": "Wayneio", "link": "https://stackoverflow.com/users/1240649/wayneio"}, "edited": false, "score": 0, "creation_date": 1567632975, "post_id": 57795291, "comment_id": 102024980, "body": "Thanks! Any reason you&#39;d use a set instead of a list?"}, {"owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "reply_to_user": {"reputation": 2855, "user_id": 1240649, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35a6f4ba2c16792398851d1db61fc9c9?s=128&d=identicon&r=PG", "display_name": "Wayneio", "link": "https://stackoverflow.com/users/1240649/wayneio"}, "edited": false, "score": 1, "creation_date": 1567633351, "post_id": 57795291, "comment_id": 102025081, "body": "it is possible to have duplicate elements in a list, but not in a set"}], "tags": [], "owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "is_accepted": true, "score": 0, "last_activity_date": 1567629090, "creation_date": 1567629090, "answer_id": 57795291, "question_id": 57794766, "link": "https://stackoverflow.com/questions/57794766/why-does-this-graph-route-repeat/57795291#57795291", "title": "Why does this graph route repeat", "body": "<p>The problem is here:</p>\n\n<pre><code>if node not in path:\n    # Search the paths of that new node\n    newpaths = find_all_paths(node, end, path)\n# Append new path to paths\nfor newpath in newpaths:\n    paths.append(newpath)\n</code></pre>\n\n<p>if <code>node</code> is already in <code>path</code>, the old <code>newpaths</code> will be used. All you need is to move the for loop under the if statement:</p>\n\n<pre><code>if node not in path:\n    # Search the paths of that new node\n    newpaths = find_all_paths(node, end, path)\n    # Append new path to paths\n    for newpath in newpaths:\n        paths.append(newpath)\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>if node not in path:\n    # Search the paths of that new node\n    paths += find_all_paths(node, end, path)\n</code></pre>\n\n<p>Also, I would recommend using <code>defaultdict(set)</code> instead of lists.</p>\n"}], "owner": {"reputation": 2855, "user_id": 1240649, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35a6f4ba2c16792398851d1db61fc9c9?s=128&d=identicon&r=PG", "display_name": "Wayneio", "link": "https://stackoverflow.com/users/1240649/wayneio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57795291, "answer_count": 1, "score": 0, "last_activity_date": 1567629090, "creation_date": 1567625493, "question_id": 57794766, "link": "https://stackoverflow.com/questions/57794766/why-does-this-graph-route-repeat", "title": "Why does this graph route repeat", "body": "<p>I have been learning graph algorithms in Python, and am wondering why I am getting a repeated path in results.</p>\n\n<p>This is my code</p>\n\n<pre><code>from collections import defaultdict\n\nour_graph = defaultdict(list)\n\n\ndef run_graph():\n    print('Creating Graph...')\n    add_edges(\"London\", \"Barcelona\")\n    add_edges(\"Barcelona\", \"Madrid\")\n    add_edges(\"Madrid\", \"Ottawa\")\n    add_edges(\"Madrid\", \"Berlin\")\n    add_edges(\"London\", \"Ottawa\")\n\n    print('\\nOur Graph:')\n    print(our_graph)\n\n    print('\\nEdges:')\n    print(list_edges())\n\n    print('\\nTesting Paths To Invalid Nodes:')\n    print(find_all_paths(\"LDN\", \"Ottawa\"))\n    print(find_all_paths(\"London\", \"X\"))\n\n    print('\\nTesting Paths To Valid Nodes:')\n    print(find_all_paths(\"London\", \"Ottawa\"))\n    print('---')\n    print(find_all_paths(\"London\", \"Berlin\"))\n\n\ndef add_edges(a, b):\n    our_graph[a].append(b)\n    our_graph[b].append(a)\n\n\ndef list_edges():\n    edges = []\n    for node in our_graph:\n        for next_node in our_graph[node]:\n            edges.append((node, next_node))\n    return edges\n\n\ndef find_all_paths(start, end, path=[]):\n    # If there isn't a node with that name\n    if our_graph[start] == [] or our_graph[end] == []:\n        return 'Can\\'t find nodes ' + start + \" \" + end\n    else:\n        # create a path\n        path = path + [start]\n        # If start node is the end\n        if start == end:\n            return [path]\n        paths = []\n        newpaths = []\n        # For each node\n        for node in our_graph[start]:\n            # If node not already in saved path\n            if node not in path:\n                # Search the paths of that new node\n                newpaths = find_all_paths(node, end, path)\n            # Append new path to paths\n            for newpath in newpaths:\n                paths.append(newpath)\n        return paths\n\n\nif __name__ == '__main__':\n    run_graph()\n</code></pre>\n\n<p>The result I get from <code>print(find_all_paths(\"London\", \"Berlin\"))</code></p>\n\n<p>is </p>\n\n<pre><code>[['London', 'Barcelona', 'Madrid', 'Berlin'], ['London', 'Ottawa', 'Madrid', 'Berlin'], ['London', 'Ottawa', 'Madrid', 'Berlin']]\n</code></pre>\n\n<p>As you can see the route London-Ottawa-Madrid-Berlin is repeated. Can you explain why?</p>\n"}, {"tags": ["python", "python-3.x", "browsermob-proxy", "browsermob"], "comments": [{"owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 0, "creation_date": 1567629329, "post_id": 57794746, "comment_id": 102023730, "body": "overriding built-in dict doesn&#39;t look like a good idea"}, {"owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 0, "creation_date": 1567629647, "post_id": 57794746, "comment_id": 102023852, "body": "can you post output of <code>ls -l &quot;&#47;Users&#47;ishandutta2007&#47;Downloads&#47;browsermob-proxy-2.1.4&#47;bin&#47;&zwnj;&#8203;browsermob-proxy&quot;</code>?"}, {"owner": {"reputation": 12410, "user_id": 865220, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7d3b1b447b8ec429be00d231c2360e9e?s=128&d=identicon&r=PG", "display_name": "ishandutta2007", "link": "https://stackoverflow.com/users/865220/ishandutta2007"}, "reply_to_user": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 0, "creation_date": 1567646706, "post_id": 57794746, "comment_id": 102027548, "body": "@Marat updated the question as per your ask"}, {"owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 0, "creation_date": 1567687766, "post_id": 57794746, "comment_id": 102043344, "body": "I wanted to make sure the binary is readable and executable by you, and it is. Do you run it from under your account?"}, {"owner": {"reputation": 12410, "user_id": 865220, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7d3b1b447b8ec429be00d231c2360e9e?s=128&d=identicon&r=PG", "display_name": "ishandutta2007", "link": "https://stackoverflow.com/users/865220/ishandutta2007"}, "reply_to_user": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 0, "creation_date": 1569258067, "post_id": 57794746, "comment_id": 102530157, "body": "after your comment tried <code>chmod 777 full&#47;path&#47;to&#47;file</code> but didn&#39;t help"}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 1812371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5570203214d8810accc86338223730?s=128&d=identicon&r=PG&f=1", "display_name": "Celso Jr", "link": "https://stackoverflow.com/users/1812371/celso-jr"}, "is_accepted": false, "score": 0, "last_activity_date": 1613454470, "creation_date": 1613454470, "answer_id": 66219260, "question_id": 57794746, "link": "https://stackoverflow.com/questions/57794746/what-should-be-the-path-of-browsermob-proxy-when-installed-as-pypi-package/66219260#66219260", "title": "What should be the path of browsermob-proxy when installed as pypi package", "body": "<p>Try to add the actual directory to the PATH</p>\n<pre><code>echo 'export PATH=$PATH:/Users/ishandutta2007/Downloads/browsermob-proxy-2.1.4/bin' &gt;&gt; ~/.bashrc\n</code></pre>\n<p>This way you don't have to specify the path arg on the Server instance manually</p>\n<pre><code>from browsermobproxy import Server\ndict = {'port': 8090}\nserver = Server(options=dict)\n</code></pre>\n"}], "owner": {"reputation": 12410, "user_id": 865220, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7d3b1b447b8ec429be00d231c2360e9e?s=128&d=identicon&r=PG", "display_name": "ishandutta2007", "link": "https://stackoverflow.com/users/865220/ishandutta2007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1613454470, "creation_date": 1567625367, "last_edit_date": 1567646579, "question_id": 57794746, "link": "https://stackoverflow.com/questions/57794746/what-should-be-the-path-of-browsermob-proxy-when-installed-as-pypi-package", "title": "What should be the path of browsermob-proxy when installed as pypi package", "body": "<p>$<code>pip install browsermob-proxy</code></p>\n\n<p>Downloaded and extracted the binary from <a href=\"https://bmp.lightbody.net\" rel=\"nofollow noreferrer\">https://bmp.lightbody.net</a> to <code>/Users/ishandutta2007/Downloads/browsermob-proxy-2.1.4/</code></p>\n\n<pre><code>from browsermobproxy import Server\ndict = {'port': 8090}\nserver = Server(options=dict)\nserver = Server(path=\"/Users/ishandutta2007/Downloads/browsermob-proxy-2.1.4/bin/browsermob-proxy\", options=dict)\n</code></pre>\n\n<blockquote>\n  <p>Browsermob-Proxy binary couldn't be found in path\n  provided: browsermob-proxy</p>\n</blockquote>\n\n<p>Following:\n<a href=\"https://github.com/AutomatedTester/browsermob-proxy-py\" rel=\"nofollow noreferrer\">https://github.com/AutomatedTester/browsermob-proxy-py</a></p>\n\n<p>$ <code>ls -l \"/Users/ishandutta2007/Downloads/browsermob-proxy-2.1.4/bin\"</code></p>\n\n<pre><code>total 16\n-rwxr--r--@ 1 ishandutta2007  staff   781B Dec 26  2016 browsermob-proxy*\n-rwxr--r--@ 1 ishandutta2007  staff   2.7K Dec 24  2016 browsermob-proxy.bat*\ndrwxrwxr-x@ 3 ishandutta2007  staff   102B Sep  5 01:07 conf/\n</code></pre>\n\n<p>$ <code>ls -l \"/Users/ishandutta2007/Downloads/browsermob-proxy-2.1.4/bin/browsermob-proxy\"</code></p>\n\n<pre><code>-rwxr--r--@ 1 ishandutta2007  staff   781B Dec 26  2016 /Users/ishandutta2007/Downloads/browsermob-proxy-2.1.4/bin/browsermob-proxy*\n</code></pre>\n"}, {"tags": ["python", "pandas", "datetime", "time-series"], "comments": [{"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1567625390, "post_id": 57794718, "comment_id": 102022581, "body": "Hi AlexaB, do you mind to share a <a href=\"/help/mcve\">mcve</a>?"}, {"owner": {"reputation": 57, "user_id": 11197948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OywPbfPOYIQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI93ry9Zv12uVjE-UjyqfuNBadbA/mo/photo.jpg?sz=128", "display_name": "AlexaB", "link": "https://stackoverflow.com/users/11197948/alexab"}, "reply_to_user": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1567631784, "post_id": 57794718, "comment_id": 102024602, "body": "I have updated with what I hope is an mcve!"}, {"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1567632178, "post_id": 57794718, "comment_id": 102024708, "body": "can you post the expected output? Do you want to calculate that formula for every columns?"}, {"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1567780359, "post_id": 57794718, "comment_id": 102078096, "body": "Hi @AlexaB, was my answer somehow useful?"}, {"owner": {"reputation": 57, "user_id": 11197948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OywPbfPOYIQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI93ry9Zv12uVjE-UjyqfuNBadbA/mo/photo.jpg?sz=128", "display_name": "AlexaB", "link": "https://stackoverflow.com/users/11197948/alexab"}, "reply_to_user": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 1, "creation_date": 1567869651, "post_id": 57794718, "comment_id": 102098576, "body": "Hi rpanai. I had a little trouble following your last line of code (I am new to this!). It was useful in the sense of moving me towards using numpy. in the end I used the below code, which is not dissimilar to yours.  a = df[&#39;A&#39;] a + (1*np.arange(1, a.shape[0]+1))/a.shape"}, {"owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "edited": false, "score": 0, "creation_date": 1568027429, "post_id": 57794718, "comment_id": 102131915, "body": "the last line serves only to add <code>x</code> to every columns of <code>df</code>. Given that df shape is <code>N x 4</code> while <code>x</code>&#39;s shape is <code>N x 1</code> i just made 4 copies of <code>x</code>. If you found my answer helpful consider to upvote it too."}], "answers": [{"tags": [], "owner": {"reputation": 8523, "user_id": 4819376, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/744923bfd6e28c59c787a3efaeec02ca?s=128&d=identicon&r=PG", "display_name": "rpanai", "link": "https://stackoverflow.com/users/4819376/rpanai"}, "is_accepted": true, "score": 0, "last_activity_date": 1567632601, "creation_date": 1567632601, "answer_id": 57795852, "question_id": 57794718, "link": "https://stackoverflow.com/questions/57794718/how-do-i-use-timeseries-index-within-lambda-function/57795852#57795852", "title": "How do I use timeseries index within lambda function", "body": "<p>IIUC you can first calculate  value in index of timeseries x (1/ length of timeseries) and then add the value in <code>df</code> as</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport numpy as np\n\ndates = pd.date_range(start='2018-10-01', periods=365)\n\ndf = pd.DataFrame(np.random.randint(0,100,size=(365, 4)),\n                  columns=list('ABCD'), index=dates)\n# You can't use index in df as they are datetime\nx = np.arange(len(df)) * 1/len(df)\n# You need this trick as broadcasting is not working\n# In this case\nres = np.array([x]*4).T + df.values\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11197948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OywPbfPOYIQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI93ry9Zv12uVjE-UjyqfuNBadbA/mo/photo.jpg?sz=128", "display_name": "AlexaB", "link": "https://stackoverflow.com/users/11197948/alexab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 57795852, "answer_count": 1, "score": 0, "last_activity_date": 1567634675, "creation_date": 1567625233, "last_edit_date": 1567634675, "question_id": 57794718, "link": "https://stackoverflow.com/questions/57794718/how-do-i-use-timeseries-index-within-lambda-function", "title": "How do I use timeseries index within lambda function", "body": "<p>I need to use the index location of a timeseries in a lambda function. The lambda function needs to use the location of the index in the transformation. Similar to the question raised in this question: <a href=\"https://stackoverflow.com/questions/35481061/can-i-use-index-information-inside-the-map-function/35481114\">Can I use index information inside the map function?</a> but using a pandas dataframe with DateTime as index.</p>\n\n<p>The equation I am looking to get out of the lambda function is:</p>\n\n<p>position of value in index of timeseries x (1/ length of timeseries) + value</p>\n\n<p>The point of this function is to add a linear trend to the timeseries. The output I expect is an increase of +1 by the end of the timeseries relative to the first time step. </p>\n\n<p>My thought so far has been to use a combination of the enumerate and get_loc functions like so:</p>\n\n<pre><code>dates = pd.date_range(start='2018-10-01', end='2019-09-30', freq='D')\ndf = pd.DataFrame(np.random.randint(0,100,size=(365, 4)), columns=list('ABCD'), index=dates)\n\na = df['A']\ntest = map(lambda (idx, val): df.index.get_loc(idx) * (1/len(df.index)) + val, enumerate(a))\n</code></pre>\n\n<p>I get the following error message:</p>\n\n<pre><code>File \"&lt;ipython-input-6-8fb927ed0ecd&gt;\", line 8\ntest = map(lambda (idx, val): df.index.get_loc(idx) * (1/len(df.index)) + val, enumerate(a))\n                  ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 430, "user_id": 10509886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jztmg.png?s=128&g=1", "display_name": "JDunken", "link": "https://stackoverflow.com/users/10509886/jdunken"}, "edited": false, "score": 4, "creation_date": 1567625311, "post_id": 57794642, "comment_id": 102022549, "body": "And the error occurs on line? I&#39;m guessing that df_jobs isn&#39;t what you&#39;re expecting."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1567641766, "post_id": 57794642, "comment_id": 102026717, "body": "I&#39;m guessing one of the <code>item</code> calls is raising this issue. But which?  What&#39;s the indexing result before that call?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12021676, "user_type": "registered", "profile_image": "https://graph.facebook.com/172375977256416/picture?type=large", "display_name": "Raghubir Singh", "link": "https://stackoverflow.com/users/12021676/raghubir-singh"}, "edited": false, "score": 0, "creation_date": 1567703891, "post_id": 57795059, "comment_id": 102051966, "body": "I have four jobs . J1: 2 MB , J2:1, J3:4, J4:5. I am trying to find out the time of all jobs with the equations in the above code. I have tried print (MD_ID, comp_time) but It didn&#39;t solve the issue"}, {"owner": {"reputation": 562, "user_id": 7236360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e296355c433577cc7d39fb2c9f4860e0?s=128&d=identicon&r=PG&f=1", "display_name": "ShayneLoyd", "link": "https://stackoverflow.com/users/7236360/shayneloyd"}, "reply_to_user": {"reputation": 1, "user_id": 12021676, "user_type": "registered", "profile_image": "https://graph.facebook.com/172375977256416/picture?type=large", "display_name": "Raghubir Singh", "link": "https://stackoverflow.com/users/12021676/raghubir-singh"}, "edited": false, "score": 0, "creation_date": 1567711916, "post_id": 57795059, "comment_id": 102055205, "body": "Are you looking for the total of all the jobs?"}, {"owner": {"reputation": 1, "user_id": 12021676, "user_type": "registered", "profile_image": "https://graph.facebook.com/172375977256416/picture?type=large", "display_name": "Raghubir Singh", "link": "https://stackoverflow.com/users/12021676/raghubir-singh"}, "edited": false, "score": 0, "creation_date": 1567774976, "post_id": 57795059, "comment_id": 102075186, "body": "Yes, Individuals time of all the jobs"}, {"owner": {"reputation": 562, "user_id": 7236360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e296355c433577cc7d39fb2c9f4860e0?s=128&d=identicon&r=PG&f=1", "display_name": "ShayneLoyd", "link": "https://stackoverflow.com/users/7236360/shayneloyd"}, "reply_to_user": {"reputation": 1, "user_id": 12021676, "user_type": "registered", "profile_image": "https://graph.facebook.com/172375977256416/picture?type=large", "display_name": "Raghubir Singh", "link": "https://stackoverflow.com/users/12021676/raghubir-singh"}, "edited": false, "score": 0, "creation_date": 1567820691, "post_id": 57795059, "comment_id": 102089985, "body": "Ahh, I think; I see the issue we are using the pandas object incorrectly. I will correct the above code. If that doesn&#39;t solve the issue; you may need to provide some sample data for me to evaluate the code further."}, {"owner": {"reputation": 1, "user_id": 12021676, "user_type": "registered", "profile_image": "https://graph.facebook.com/172375977256416/picture?type=large", "display_name": "Raghubir Singh", "link": "https://stackoverflow.com/users/12021676/raghubir-singh"}, "edited": false, "score": 0, "creation_date": 1568038157, "post_id": 57795059, "comment_id": 102137647, "body": "Here I am getting this error now:   job_size = job[&#39;JOB SIZE&#39;].item() AttributeError: &#39;long&#39; object has no attribute &#39;item&#39;"}, {"owner": {"reputation": 562, "user_id": 7236360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e296355c433577cc7d39fb2c9f4860e0?s=128&d=identicon&r=PG&f=1", "display_name": "ShayneLoyd", "link": "https://stackoverflow.com/users/7236360/shayneloyd"}, "reply_to_user": {"reputation": 1, "user_id": 12021676, "user_type": "registered", "profile_image": "https://graph.facebook.com/172375977256416/picture?type=large", "display_name": "Raghubir Singh", "link": "https://stackoverflow.com/users/12021676/raghubir-singh"}, "edited": false, "score": 0, "creation_date": 1568042114, "post_id": 57795059, "comment_id": 102139893, "body": "You probably don&#39;t need the .item() method at all. Whenever you provide the key for a dictionary it returns the dictionaries item. You are probably performing that .item() method on your data value. I will correct the above code to reflect this."}], "tags": [], "owner": {"reputation": 562, "user_id": 7236360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e296355c433577cc7d39fb2c9f4860e0?s=128&d=identicon&r=PG&f=1", "display_name": "ShayneLoyd", "link": "https://stackoverflow.com/users/7236360/shayneloyd"}, "is_accepted": false, "score": 0, "last_activity_date": 1568042242, "last_edit_date": 1568042242, "creation_date": 1567626975, "answer_id": 57795059, "question_id": 57794642, "link": "https://stackoverflow.com/questions/57794642/how-do-i-check-that-array-size/57795059#57795059", "title": "How do I check that array size?", "body": "<p>I don't know if I understand fully, but I'm fairly certain this will take away your scalar error and should give you what you were trying to get out of the dictionaries. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for index, job in df_jobs.iterrows():\n    job_size = job['JOB SIZE']\n    MD_ID = job['MD ID']\n    md_proc_speed = job['PROCESSOR']\n    comp_time = float(job_size * 1024 * 1024 * 8) / (0.00227 * md_proc_speed)\n</code></pre>\n\n<p>I'm not sure what exactly you are looking to print, but perhaps this will help.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for index, job in df_jobs.iterrows():\n    job_size = job['JOB SIZE']\n    MD_ID = job['MD ID']\n    md_proc_speed = job['PROCESSOR']\n    comp_time = float(job_size * 1024 * 1024 * 8) / (0.00227 * md_proc_speed)\n    print(MD_ID, comp_time)\n</code></pre>\n\n<p>For a total time.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>total_comp_time = 0\nfor index, job in df_jobs.iterrows():\n    job_size = job['JOB SIZE']\n    MD_ID = job['MD ID']\n    md_proc_speed = job['PROCESSOR']\n    comp_time = float(job_size * 1024 * 1024 * 8) / (0.00227 * md_proc_speed)\n    print(MD_ID, comp_time)\n    total_comp_time += comp_time\nprint(total_comp_time)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12021676, "user_type": "registered", "profile_image": "https://graph.facebook.com/172375977256416/picture?type=large", "display_name": "Raghubir Singh", "link": "https://stackoverflow.com/users/12021676/raghubir-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568042242, "creation_date": 1567624887, "last_edit_date": 1567625104, "question_id": 57794642, "link": "https://stackoverflow.com/questions/57794642/how-do-i-check-that-array-size", "title": "How do I check that array size?", "body": "<p>I am trying to print all the time of Jobs with pandas. </p>\n\n<pre><code>import pandas as pd\n\nfile_name = 'cases/case1_1md_2mec_4jobs.xlsx'\nxl = pd.ExcelFile(file_name)\n\ndf_jobs = xl.parse('Jobs')\ndf_mecs = xl.parse('MECs')\ndf_links = xl.parse('Links')\ndf_mds =   xl.parse('MD')\n\n\ndf_sol_time = pd.DataFrame(columns={'Jobs','Time'})\nfor job in df_jobs:\n    job_size = df_jobs['JOB SIZE'][df_jobs['ID'] == job].item()\n    MD_ID = df_jobs['MD ID'][df_jobs['ID'] == job].item()\n    md_proc_speed = df_mds['PROCESSOR'][df_mds['MD ID'] == MD_ID].item()\n    comp_time = float(job_size * 1024 * 1024 * 8) / (0.00227 * md_proc_speed)\n</code></pre>\n\n<p>I am getting this message:</p>\n\n<blockquote>\n  <p>Can only convert an array of size 1 to a python scalar</p>\n</blockquote>\n"}, {"tags": ["python", "django", "heroku", "fonts", "python-imaging-library"], "comments": [{"owner": {"reputation": 11, "user_id": 12021389, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5_4Z6bEJBZ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNDLOeTFAHvZ_skGR3veRJB_8ifA/photo.jpg?sz=128", "display_name": "Peter Casey", "link": "https://stackoverflow.com/users/12021389/peter-casey"}, "edited": false, "score": 0, "creation_date": 1567633010, "post_id": 57794602, "comment_id": 102024990, "body": "Note: the scales directory is also the git directory pushed to Heroku."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12021389, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5_4Z6bEJBZ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNDLOeTFAHvZ_skGR3veRJB_8ifA/photo.jpg?sz=128", "display_name": "Peter Casey", "link": "https://stackoverflow.com/users/12021389/peter-casey"}, "is_accepted": false, "score": 1, "last_activity_date": 1567638382, "creation_date": 1567638382, "answer_id": 57796547, "question_id": 57794602, "link": "https://stackoverflow.com/questions/57794602/using-ttf-font-file-in-pillow-within-a-django-app-hosted-on-heroku/57796547#57796547", "title": "Using .ttf font file in Pillow within a django app hosted on Heroku", "body": "<p>I was able to solve this by ensuring that the file path was specific to the Heroku environment. </p>\n\n<p>agencyb = ImageFont.truetype(\"/app/AGENCYB.TTF\", 13)</p>\n"}], "owner": {"reputation": 11, "user_id": 12021389, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5_4Z6bEJBZ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNDLOeTFAHvZ_skGR3veRJB_8ifA/photo.jpg?sz=128", "display_name": "Peter Casey", "link": "https://stackoverflow.com/users/12021389/peter-casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567638382, "creation_date": 1567624666, "question_id": 57794602, "link": "https://stackoverflow.com/questions/57794602/using-ttf-font-file-in-pillow-within-a-django-app-hosted-on-heroku", "title": "Using .ttf font file in Pillow within a django app hosted on Heroku", "body": "<p>I am setting up my first web application via the Django framework. This application takes data supplied by an html form and generates an image using Pillow. this image features text drawn on top of it, and I would like to use a particular .ttf file when generating the text. The font is used just fine when I run the app locally (via manage.py runserver), however, when running on Heroku an \"OSError\" occurs as it \"cannot open resource\". </p>\n\n<h1>Location of font file in directories.</h1>\n\n<p>scales is the Django root folder. scales1 is a package I wrote containing image generation logic. The scales_app folder contains the view for which the image is generated.</p>\n\n<p>scales/AGENCYB.ttf</p>\n\n<p>scales/scales1/AGENCYB.ttf</p>\n\n<p>scales/static/fonts/AGENCYB.ttf</p>\n\n<p>scales/scales_app/AGENCYB.ttf</p>\n\n<p>The Heroku app builds just fine and can be visited via web browser.\n<a href=\"https://guit-proj-1.herokuapp.com/scales/SelectBoard\" rel=\"nofollow noreferrer\">https://guit-proj-1.herokuapp.com/scales/SelectBoard</a></p>\n\n<p>Clicking the \"Gen Board\" button will elicit the traceback below. Note that the application was fully functional when the default font for pillow was used. However, the font did not look acceptable for my application.</p>\n\n<p>I have tried placing the font file in all places where it might be relevant including the root directory of the Django app, the python package where the image generation logic is stored, and in a static/fonts/ directory.</p>\n\n<h1>Attempt to import font</h1>\n\n<p><code>agencyb = ImageFont.truetype(\"AGENCYB.ttf\", 13)\n font = agencyb</code></p>\n\n<p>(\"/AGENCYB.ttf\" was tried as the filename as well, only serving to break functionality of the app when run locally.) </p>\n\n<h1>Traceback</h1>\n\n<p>File \"/app/.heroku/python/lib/python3.7/site-packages/django/core/handlers/exception.py\" in inner\n  34.             response = get_response(request)</p>\n\n<p>File \"/app/.heroku/python/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\n  115.                 response = self.process_exception_by_middleware(e, request)</p>\n\n<p>File \"/app/.heroku/python/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\n  113.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)</p>\n\n<p>File \"/app/scales_app/views.py\" in GenBoard\n  40.     img = scales.gen_board(scale, tunings)</p>\n\n<p>File \"/app/scales1/scales.py\" in gen_board\n  276.     img = draw_board(fretboard_w_scale)</p>\n\n<p>File \"/app/scales1/scales.py\" in draw_board\n  140.     arial = ImageFont.truetype(\"/AGENCYB.ttf\", 13)</p>\n\n<p>File \"/app/.heroku/python/lib/python3.7/site-packages/PIL/ImageFont.py\" in truetype\n  546.         return freetype(font)</p>\n\n<p>File \"/app/.heroku/python/lib/python3.7/site-packages/PIL/ImageFont.py\" in freetype\n  543.         return FreeTypeFont(font, size, index, encoding, layout_engine)</p>\n\n<p>File \"/app/.heroku/python/lib/python3.7/site-packages/PIL/ImageFont.py\" in <strong>init</strong>\n  161.                 font, size, index, encoding, layout_engine=layout_engine</p>\n\n<p>Exception Type: OSError at /scales/GenBoard\nException Value: cannot open resource</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1567624844, "post_id": 57794598, "comment_id": 102022376, "body": "Precompute noise, add it to each image in parallel?"}, {"owner": {"reputation": 39, "user_id": 7702081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c8dc258695c5e32d03d9bc17311fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Lello_Lelli", "link": "https://stackoverflow.com/users/7702081/lello-lelli"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1567663048, "post_id": 57794598, "comment_id": 102030869, "body": "Don&#39;t think I can, the noise is dependent on each pixel values, for example if channel R (RGB) is 255 and the random noise would be a +1, I discard that noise because 255-&gt;0 is too much"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1567682410, "post_id": 57794598, "comment_id": 102040275, "body": "Then precompute noise and the image is then the sum or the max channel."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7702081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c8dc258695c5e32d03d9bc17311fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Lello_Lelli", "link": "https://stackoverflow.com/users/7702081/lello-lelli"}, "edited": false, "score": 0, "creation_date": 1567663388, "post_id": 57795477, "comment_id": 102030977, "body": "I change pixel by pixel because I only change one random channel (RGB) and if the noise (-1 or +1) would lead into overflow (255 + 1-&gt;0 or 0 - 1--&gt;255) I discard it. I&#39;ll see if I can vectorize it anyway"}], "tags": [], "owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "is_accepted": true, "score": 1, "last_activity_date": 1567630236, "creation_date": 1567630236, "answer_id": 57795477, "question_id": 57794598, "link": "https://stackoverflow.com/questions/57794598/best-method-to-add-noise-on-tf-dataset-images-on-the-fly/57795477#57795477", "title": "Best method to add noise on tf.dataset images &quot;on the fly&quot;", "body": "<p>The biggest overhead here is pixel operations (double for loop). Vectorizing it should result in substantial speedup:</p>\n\n<pre><code>noise_magnitude = 10\n...\n    img_max_value = img_to_numpy.max() * np.ones(img_to_numpy.shape)\n    for _ in range (0, 5):\n        # depending on range of values, you might want to adjust noise magnitude\n        noise = np.random.randint(0, noise_magnitude, img_to_numpy.shape)\n        # after adding noise, clip values exceeding max values\n        yield np.maximum(img_to_numpy + noise, img_max_value)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7702081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c8dc258695c5e32d03d9bc17311fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Lello_Lelli", "link": "https://stackoverflow.com/users/7702081/lello-lelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1033, "favorite_count": 0, "accepted_answer_id": 57795477, "answer_count": 1, "score": 1, "last_activity_date": 1567667696, "creation_date": 1567624641, "last_edit_date": 1567667696, "question_id": 57794598, "link": "https://stackoverflow.com/questions/57794598/best-method-to-add-noise-on-tf-dataset-images-on-the-fly", "title": "Best method to add noise on tf.dataset images &quot;on the fly&quot;", "body": "<p>After training a model (image classification) I would like to see how it performs differently when I evaluate a proper image and various noised versions of it.</p>\n\n<p>The type of noise I'm thinking is a random change in pixels value, I tried with this approach:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># --Inside the generator function that I provide to model.predict_generator--\n# dataset is a numpy array with denoised images path\ndt = tf.data.Dataset.from_generator(lambda: image_generator(dataset), output_types=(tf.float32))\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>def image_generator_(image_paths):\n    for path in image_paths:\n        # im is keras.preprocessing image\n        img = im.load_img(path,\n                          color_mode='rgb',\n                          target_size=(224,224))\n\n        img_to_numpy = np.array(img)\n\n        for _ in range (0, 5):\n            tmp_numpy_image = img_to_numpy.copy()\n            for i in range(tmp_numpy_image.shape[0]): \n                for j in range(tmp_numpy_image.shape[1]):\n                    # add noise\n                    tmp_numpy_image.shape[i][j] = ...\n            yield tmp_numpy_image\n</code></pre>\n\n<p>This process works fine but it is very slow. I also use dataset.batch and dataset.prefetch on <strong>dt</strong> and I didn't found a combination for their values that reduces the algorithm time</p>\n\n<p>Is there a smarter way to do it? I tried by yielding not noised images and to add the noise later inside dataset.map. The problem is that inside map I have to manipulate tensors and I didn't found a way to change each pixel value</p>\n\n<hr>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>I used @Marat approach and it worked like a charm, the whole process went from 20-30 hours to minutes. My noise was a simple +-1 but I didn't want to go in overflow (255+1 = 0 in uint8) and therefore I only had to use numpy masks</p>\n\n<pre><code>...\ntmp_numpy_image = img_to_numpy.copy()\n\nnoise = np.random.randint(-1, 1, img_to_numpy.shape)\n\n# tmp_numpy_imag will become of type int32\ntmp_numpy_image = tmp_numpy_image + noise\n\nnp.putmask(tmp_numpy_image, tmp_numpy_image &lt; 0, 0)\nnp.putmask(tmp_numpy_image, tmp_numpy_image &gt; 255, 255)\n\ntmp_numpy_image = tmp_numpy_image.astype('uint8') \n\nyield tmp_numpy_image\n</code></pre>\n"}, {"tags": ["python", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 156, "user_id": 1034251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3hQX1.jpg?s=128&g=1", "display_name": "ByteArts", "link": "https://stackoverflow.com/users/1034251/bytearts"}, "edited": false, "score": 0, "creation_date": 1583710083, "post_id": 57794753, "comment_id": 107198556, "body": "Just be sure to set both Window.minimum_width and Window.minimum_height -- if you only set one it will be ignored."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1567625414, "creation_date": 1567625414, "answer_id": 57794753, "question_id": 57794578, "link": "https://stackoverflow.com/questions/57794578/how-to-set-minimal-window-size-to-kivy-application/57794753#57794753", "title": "How to set minimal window size to kivy application?", "body": "<p>You have to use the Window object:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.core.window import Window\n\nWindow.minimum_height = 400\nWindow.minimum_width = 400\n\n\nclass MyApp(App):\n    def build(self):\n        return Button(text=\"Hello World\")\n\n\nif __name__ in (\"__android__\", \"__main__\"):\n    MyApp().run()\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7836951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6dec4629433c73b894c4ca3c084215a?s=128&d=identicon&r=PG&f=1", "display_name": "Roman B.", "link": "https://stackoverflow.com/users/7836951/roman-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 57794753, "answer_count": 1, "score": 1, "last_activity_date": 1567625414, "creation_date": 1567624523, "question_id": 57794578, "link": "https://stackoverflow.com/questions/57794578/how-to-set-minimal-window-size-to-kivy-application", "title": "How to set minimal window size to kivy application?", "body": "<p>I try to set a minimum width and height to my kivy app.\nI want it resizable with min size restriction.</p>\n\n<p>In the kivy doc I read about <code>WindowBase</code> class which has parameters <code>minimum_height</code> &amp; <code>minimum_width</code>.</p>\n\n<p>WindowBase description: <a href=\"https://kivy.org/doc/stable/api-kivy.core.window.html\" rel=\"nofollow noreferrer\">https://kivy.org/doc/stable/api-kivy.core.window.html</a></p>\n\n<p>How can I set the min size restriction to the basic window which <code>App</code> class creates automatically?</p>\n"}, {"tags": ["python", "multithreading", "python-multithreading"], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "is_accepted": false, "score": 1, "last_activity_date": 1567625365, "creation_date": 1567625365, "answer_id": 57794745, "question_id": 57794561, "link": "https://stackoverflow.com/questions/57794561/stopping-all-threads-working-on-queue-with-a-keyboard-interrupt/57794745#57794745", "title": "Stopping all threads working on queue with a Keyboard interrupt", "body": "<p>By calling <code>q.join()</code>, you are just waiting for the threads to end. You need to be able to tell a thread (from the main thread) to stop its execution.</p>\n\n<p>A good way to do this is to change the implementation of your worker. Instead of being a function, it should be a class that inherits from threading.Thread.</p>\n\n<p>You can give the <code>Worker</code> an attribute that can be changed from the main thread that tells it to stop doing work.</p>\n\n<pre><code>import threading\nclass Worker(threading.Thread):\n    def __init__(self, queue):\n        self.keep_doing_work = True\n        self.q = queue\n        threading.Thread.__init__(self)\n\n    def run(self):\n        while self.keep_doing_work is True:\n            item = self.q.get()\n            self.do_work(item)\n            q.task_done()\n\n    def do_work(smth):\n        print(\"{}\\r\".format(smth))\n\nnum_worker_threads = 10\n\nmy_threads = []\n\ntry:\n    for i in range(num_worker_threads):\n        t = Worker()\n        my_threads.append(t)\n        t.start()\n\nexcept KeyboardInterrupt:\n    for t in my_threads:\n        t.keep_doing_work = False   \n\n</code></pre>\n"}], "owner": {"reputation": 11016, "user_id": 113678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cmgpF.png?s=128&g=1", "display_name": "DataGreed", "link": "https://stackoverflow.com/users/113678/datagreed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567625365, "creation_date": 1567624438, "question_id": 57794561, "link": "https://stackoverflow.com/questions/57794561/stopping-all-threads-working-on-queue-with-a-keyboard-interrupt", "title": "Stopping all threads working on queue with a Keyboard interrupt", "body": "<p>I have the following code:</p>\n\n<pre><code>from Queue import Queue\nfrom threading import Thread\n\nnum_worker_threads = 10\n\n# some items to work on\ndef source():\n    return xrange(400)\n\n# the actual work to be done\ndef do_work(smth):\n    # some really heavy task here\n    print(\"{}\\r\".format(smth))\n\n# worker that retrieves data from queue and executes work\ndef worker():\n    while True:\n        item = q.get()\n        do_work(item)\n        q.task_done()\n\nq = Queue()\nfor i in range(num_worker_threads):\n     t = Thread(target=worker)  #use args to pass args\n     t.daemon = True\n     t.start()\n\n# queues items to work on\nfor item in source():\n    q.put(item)\n\n# blocks until work is finished\nq.join()  \n</code></pre>\n\n<p>How do I stop all threads when I press Ctrl+C? When I do it, the program execution continues.</p>\n\n<p>I've seen similar questions on StackOverflow, but they don't use <code>join()</code>. </p>\n\n<p>I am confused on what exactly I should wrap with <code>try..except</code> here and how should I stop the threads?</p>\n"}, {"tags": ["python", "sorting"], "answers": [{"tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": false, "score": 0, "last_activity_date": 1567632944, "last_edit_date": 1567632944, "creation_date": 1567625034, "answer_id": 57794672, "question_id": 57794543, "link": "https://stackoverflow.com/questions/57794543/how-is-this-key-working-in-sorting-to-make-a-maximum-number-from-elements-in-an/57794672#57794672", "title": "How is this key working in sorting to make a maximum number from elements in an array", "body": "<p>That <code>* 10</code> does nothing as your list is sorted <strong>alphabetically</strong> (by returning string value from callback <code>str(x)</code>). That means that even sole string <code>7</code> comes before <code>67676767676767676767</code>.</p>\n\n<p>If you remove that string converting and do just <code>return x * 10</code> then your biggest number will remain the biggest after multiplied by 10 and so your printed value will start with 67.</p>\n\n<p>Edit: Regarding your comment in another answer, sorting alphabetically in computer languages means sorting by current character position in ASCII table (let's forget unicode or other charsets for now):</p>\n\n<p><a href=\"https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html\" rel=\"nofollow noreferrer\">https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html</a></p>\n\n<pre>Dec  = Decimal Value\nChar = Character\n\n'5' has the int value 53\nif we write '5'-'0' it evaluates to 53-48, or the int 5\nif we write char c = 'B'+32; then c stores 'b'\n\n\nDec  Char                           Dec  Char     Dec  Char     Dec  Char\n---------                           ---------     ---------     ----------\n  0  NUL (null)                      32  SPACE     64  @         96  `\n  1  SOH (start of heading)          33  !         65  A         97  a\n  2  STX (start of text)             34  \"         66  B         98  b\n  3  ETX (end of text)               35  #         67  C         99  c\n  4  EOT (end of transmission)       36  $         68  D        100  d\n  5  ENQ (enquiry)                   37  %         69  E        101  e\n  6  ACK (acknowledge)               38  &amp;         70  F        102  f\n  7  BEL (bell)                      39  '         71  G        103  g\n  8  BS  (backspace)                 40  (         72  H        104  h\n  9  TAB (horizontal tab)            41  )         73  I        105  i\n 10  LF  (NL line feed, new line)    42  *         74  J        106  j\n 11  VT  (vertical tab)              43  +         75  K        107  k\n 12  FF  (NP form feed, new page)    44  ,         76  L        108  l\n 13  CR  (carriage return)           45  -         77  M        109  m\n 14  SO  (shift out)                 46  .         78  N        110  n\n 15  SI  (shift in)                  47  /         79  O        111  o\n 16  DLE (data link escape)          48  0         80  P        112  p\n 17  DC1 (device control 1)          49  1         81  Q        113  q\n 18  DC2 (device control 2)          50  2         82  R        114  r\n 19  DC3 (device control 3)          51  3         83  S        115  s\n 20  DC4 (device control 4)          52  4         84  T        116  t\n 21  NAK (negative acknowledge)      53  5         85  U        117  u\n 22  SYN (synchronous idle)          54  6         86  V        118  v\n 23  ETB (end of trans. block)       55  7         87  W        119  w\n 24  CAN (cancel)                    56  8         88  X        120  x\n 25  EM  (end of medium)             57  9         89  Y        121  y\n 26  SUB (substitute)                58  :         90  Z        122  z\n 27  ESC (escape)                    59  ;         91  [        123  {\n 28  FS  (file separator)            60  &lt;         92  \\        124  |\n 29  GS  (group separator)           61  =         93  ]        125  }\n 30  RS  (record separator)          62  &gt;         94  ^        126  ~\n 31  US  (unit separator)            63  ?         95  _        127  DEL\n</pre>\n\n<p>So if you have two strings \"67\" and \"7\" then Python checks the first character and finds that 55 is greater than 54 and so puts <strong>string</strong> \"7\" before \"67\" (reversed order == descending).</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 11249334, "user_type": "registered", "profile_image": "https://graph.facebook.com/2231107863616653/picture?type=large", "display_name": "Rochak Kunwar", "link": "https://stackoverflow.com/users/11249334/rochak-kunwar"}, "edited": false, "score": 0, "creation_date": 1567629242, "post_id": 57794717, "comment_id": 102023692, "body": "Can you explain how  &#39;67676767676767676767&#39; is less than &#39;7777777777&#39;  I am confused about that part? And thank you for your explanation."}, {"owner": {"reputation": 506, "user_id": 10863327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e1604b54844ca72235865e7bb3bf1ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Parsons", "link": "https://stackoverflow.com/users/10863327/kyle-parsons"}, "edited": false, "score": 0, "creation_date": 1567709144, "post_id": 57794717, "comment_id": 102054012, "body": "Strings are sorted lexicographically.  The character <code>&#39;7&#39;</code> is later lexicographically than the character <code>&#39;6&#39;</code>.  By the same reasoning, the string <code>&#39;zero&#39;</code> is later lexicographically than the string <code>&#39;yesterday&#39;</code> even though <code>&#39;yesterday&#39;</code> is a longer string."}], "tags": [], "owner": {"reputation": 791, "user_id": 9093112, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GEcJ1.png?s=128&g=1", "display_name": "Serhii", "link": "https://stackoverflow.com/users/9093112/serhii"}, "is_accepted": false, "score": 0, "last_activity_date": 1567625228, "creation_date": 1567625228, "answer_id": 57794717, "question_id": 57794543, "link": "https://stackoverflow.com/questions/57794543/how-is-this-key-working-in-sorting-to-make-a-maximum-number-from-elements-in-an/57794717#57794717", "title": "How is this key working in sorting to make a maximum number from elements in an array", "body": "<p>Key it a function that serves as a key for the sort comparison.<br>\nIf <code>arr = [23, 45, 65, 66, 7, 4, 67]</code> pass to your <code>func</code> it will be as:          </p>\n\n<pre><code>[\n    \"23232323232323232323\",\n    \"45454545454545454545\",\n    \"65656565656565656565\",\n    \"66666666666666666666\",\n    \"7777777777\",\n    \"4444444444\",\n    \"67676767676767676767\",\n]\n</code></pre>\n\n<p>Try it sort</p>\n\n<pre><code>In [1]: sorted(str_list)                                                                       \nOut[1]: \n['23232323232323232323',\n '4444444444',\n '45454545454545454545',\n '65656565656565656565',\n '66666666666666666666',\n '67676767676767676767',\n '7777777777']\n\nIn [2]: sorted(str_list, reverse=True)                                                         \nOut[2]: \n['7777777777',\n '67676767676767676767',\n '66666666666666666666',\n '65656565656565656565',\n '45454545454545454545',\n '4444444444',\n '23232323232323232323']\n</code></pre>\n\n<p>so '7777777777' it was <code>7</code> in your list <code>arr</code> because </p>\n\n<pre><code>In [3]: str(7) * 10                                                                           \nOut[3]: '7777777777'\n</code></pre>\n\n<p>etc<br>\nAnyway, please use <a href=\"http://www.pythontutor.com\" rel=\"nofollow noreferrer\">http://www.pythontutor.com</a> for understanding how it works.</p>\n"}], "owner": {"reputation": 29, "user_id": 11249334, "user_type": "registered", "profile_image": "https://graph.facebook.com/2231107863616653/picture?type=large", "display_name": "Rochak Kunwar", "link": "https://stackoverflow.com/users/11249334/rochak-kunwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567632944, "creation_date": 1567624337, "question_id": 57794543, "link": "https://stackoverflow.com/questions/57794543/how-is-this-key-working-in-sorting-to-make-a-maximum-number-from-elements-in-an", "title": "How is this key working in sorting to make a maximum number from elements in an array", "body": "<p>I have this code but I am not able to understand how it is working. It is arranging the numbers in an array in such a way that concatenating of numbers makes the biggest number. I just don't understand how that key is working.</p>\n\n<pre><code>def fucn(x):\n    print(str(x) * 10)\n    return str(x) * 10\n\n\narr = [23, 45, 65, 66, 7, 4, 67]\nResult = sorted(arr, key=fucn, reverse=True)\nprint('\\n' + ''.join([str(i) for i in Result]))\n</code></pre>\n"}, {"tags": ["python", "github", "heroku", "flask"], "comments": [{"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1567635286, "post_id": 57794521, "comment_id": 102025491, "body": "If those are your real database credentials you should invalidate them <b><i>immediately</i></b>. They are forever compromised, and you need to generate new ones. Editing them out of your question is <i><b>not enough</b></i>."}, {"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1567635801, "post_id": 57794521, "comment_id": 102025593, "body": "Do you have a <code>Procfile</code>? What&#39;s in it?"}, {"owner": {"reputation": 3, "user_id": 11599533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4330a17f9841060a99584f85d9f0c8f6?s=128&d=identicon&r=PG&f=1", "display_name": "DMH", "link": "https://stackoverflow.com/users/11599533/dmh"}, "reply_to_user": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1567687753, "post_id": 57794521, "comment_id": 102043335, "body": "I do, the procfile contains 1 line which is &quot;web: python app.py&quot;"}, {"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1567698586, "post_id": 57794521, "comment_id": 102049685, "body": "Does it run if you replace <code>host=os.environ.get(&#39;IP&#39;)</code> with <code>host=&#39;0.0.0.0&#39;</code> in your <code>app.run()</code>? Heroku doesn&#39;t typically set an <code>IP</code> environment variable, so we typically just listen on all available IP addresses."}, {"owner": {"reputation": 3, "user_id": 11599533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4330a17f9841060a99584f85d9f0c8f6?s=128&d=identicon&r=PG&f=1", "display_name": "DMH", "link": "https://stackoverflow.com/users/11599533/dmh"}, "reply_to_user": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1567725284, "post_id": 57794521, "comment_id": 102059062, "body": "Chris thank you so much that seems to have worked and it is running - Can&#39;t believe i never caught on to that, if I could upvote the answer i would!"}], "answers": [{"tags": [], "owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "is_accepted": true, "score": 0, "last_activity_date": 1567728725, "creation_date": 1567728725, "answer_id": 57814256, "question_id": 57794521, "link": "https://stackoverflow.com/questions/57794521/heroku-h10-boot-timeout-even-though-im-using-the-port-environment-variable/57814256#57814256", "title": "Heroku H10 boot timeout even though I&#39;m using the PORT environment variable", "body": "<p>You're trying to listen on whatever IP address is given by the <code>IP</code> environment variable, but this isn't something that Heroku provides. Try listening on all available IP addresses with <code>0.0.0.0</code> instead:</p>\n\n<pre><code>if __name__ == '__main__':\n    app.run(host='0.0.0.0',\n            port=int(os.environ.get('PORT')),\n            debug=True)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11599533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4330a17f9841060a99584f85d9f0c8f6?s=128&d=identicon&r=PG&f=1", "display_name": "DMH", "link": "https://stackoverflow.com/users/11599533/dmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57814256, "answer_count": 1, "score": -1, "last_activity_date": 1567728885, "creation_date": 1567624194, "last_edit_date": 1567728885, "question_id": 57794521, "link": "https://stackoverflow.com/questions/57794521/heroku-h10-boot-timeout-even-though-im-using-the-port-environment-variable", "title": "Heroku H10 boot timeout even though I&#39;m using the PORT environment variable", "body": "<p>I built a Flask app with Cloud 9 around 6 months ago that I'm trying to run on Heroku.</p>\n\n<p>I pushed the code to GitHub, and then followed steps to get this onto Heroku. However, whenever I try to deploy this the app fails and I get an application error:</p>\n\n<pre><code>2019-09-04T19:05:14.000000+00:00 app[api]: Build succeeded\n2019-09-04T19:06:11.452568+00:00 heroku[web.1]: State changed from starting to crashed\n2019-09-04T19:06:11.352975+00:00 heroku[web.1]: Error R10 (Boot timeout) -&gt; Web process failed to bind to $PORT within 60 seconds of launch\n2019-09-04T19:06:11.353092+00:00 heroku[web.1]: Stopping process with SIGKILL\n2019-09-04T19:06:11.442403+00:00 heroku[web.1]: Process exited with status 137\n2019-09-04T19:06:14.530145+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=programplanner.herokuapp.com request_id=4ae3d531-3fbb-4e9d-94da-39318e81ebec fwd=\"86.177.219.206\" dyno= connect= service= status=503 bytes= protocol=https\n2019-09-04T19:06:15.165632+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=programplanner.herokuapp.com request_id=d6b266be-4232-4a87-9ecc-90a756dd91d2 fwd=\"86.177.219.206\" dyno= connect= service= status=503 bytes= protocol=https\n</code></pre>\n\n<p>Here is my <code>app.py</code> file:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nfrom flask import Flask, render_template, redirect, request, url_for\nfrom flask_pymongo import PyMongo\nfrom bson.objectid import ObjectId\n\napp = Flask(__name__)\napp.config[\"MONGO_DBNAME\"] = 'tv-planner'\napp.config[\n    \"MONGO_URI\"] = 'mongodb://&lt;user&gt;:&lt;password&gt;@ds125723.mlab.com:25723/tv-planner'\n\nmongo = PyMongo(app)\n\n\n@app.route('/')\n@app.route('/get_programs')\ndef get_programs():\n    return render_template(\"programs.html\",\n                           programs=mongo.db.programs.find())\n\n\n@app.route('/add_program')\ndef add_program():\n    return render_template('addprogram.html',\n                           categories=mongo.db.categories.find())\n\n\n@app.route('/insert_program', methods=['POST'])\ndef insert_program():\n    programs = mongo.db.programs\n    programs.insert_one(request.form.to_dict())\n    return redirect(url_for('get_programs'))\n\n\n@app.route('/edit_program/&lt;program_id&gt;')\ndef edit_program(program_id):\n    the_program = mongo.db.programs.find_one({\"_id\": ObjectId(program_id)})\n    all_categories = mongo.db.categories.find()\n    return render_template('editprogram.html', program=the_program,\n                           categories=all_categories)\n\n\n@app.route('/update_program/&lt;program_id&gt;', methods=['POST'])\ndef update_program(program_id):\n    programs = mongo.db.programs\n    programs.update({'_id': ObjectId(program_id)},\n                    {\n                        'program_name': request.form.get['program_name'],\n                        'category_name': request.form.get['category_name'],\n                        'program_description': request.form.get[\n                            'program_description'],\n                        'date_on': request.form.get['date_on'],\n                        'must_watch': request.form.get['must_watch']\n                    })\n    return redirect(url_for('get_programs'))\n\n\n@app.route('/delete_program/&lt;program_id&gt;')\ndef delete_program(program_id):\n    mongo.db.programs.remove({'_id': ObjectId(program_id)})\n    return redirect(url_for('get_programs'))\n\n\n@app.route('/get_categories')\ndef get_categories():\n    return render_template('categories.html',\n                           categories=mongo.db.categories.find())\n\n\n@app.route('/edit_category/&lt;category_id&gt;')\ndef edit_category(category_id):\n    return render_template('editcategory.html',\n                           category=mongo.db.categories.find_one(\n                               {'_id': ObjectId(category_id)}))\n\n\n@app.route('/update_category/&lt;category_id&gt;', methods=['POST'])\ndef update_category(category_id):\n    mongo.db.categories.update(\n        {'_id': ObjectId(category_id)},\n        {'category_name': request.form['category_name']})\n    return redirect(url_for('get_categories'))\n\n\n@app.route('/delete_category/&lt;category_id&gt;')\ndef delete_category(category_id):\n    mongo.db.categories.remove({'_id': ObjectId(category_id)})\n    return redirect(url_for(\"get_categories\"))\n\n\n@app.route('/insert_category', methods=['POST'])\ndef insert_category():\n    categories = mongo.db.categories\n    category_doc = {'category_name': request.form['category_name']}\n    categories.insert_one(category_doc)\n    return redirect(url_for('get_categories'))\n\n\n@app.route('/new_category')\ndef new_category():\n    return render_template('addcategory.html')\n\n\nif __name__ == '__main__':\n    app.run(host=os.environ.get('IP'),\n            port=int(os.environ.get('PORT')),\n            debug=True)\n</code></pre>\n\n<p>My <code>Procfile</code> contains</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>web: python app.py\n</code></pre>\n"}, {"tags": ["python", "android", "python-3.x", "kivy", "kivy-language"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 11910474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54650cbaa94dd290791e897ad975256b?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Nocturne", "link": "https://stackoverflow.com/users/11910474/dark-nocturne"}, "edited": false, "score": 0, "creation_date": 1567701851, "post_id": 57795146, "comment_id": 102051132, "body": "Oh my gosh, where my eyes is ?"}], "tags": [], "owner": {"reputation": 104, "user_id": 7501543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212386791369988/picture?type=large", "display_name": "ahackit", "link": "https://stackoverflow.com/users/7501543/ahackit"}, "is_accepted": true, "score": 1, "last_activity_date": 1567628203, "creation_date": 1567628203, "answer_id": 57795146, "question_id": 57794502, "link": "https://stackoverflow.com/questions/57794502/mdlabels-stacked-in-one-place-one-above-another/57795146#57795146", "title": "MDLabels stacked in one place (one above another)", "body": "<p>Woops, looks like a simple mistake. Your indentation on KV Lang is incorrect. You didn't nest your labels into BoxLayout correctly.</p>\n\n<pre><code>    AnchorLayout:\n    anchor_y: 'top'\n    BoxLayout:\n        orientation: 'vertical'\n        size_hint: 0.95, 0.5\n        padding: [0, 0, 0, 0]\n        spacing: dp(5)\n        pos_hint: {'center_x': 0.5, 'center_y': 0.5}\n        MDLabel:\n            font_size: dp(12)\n            text: '123'\n        MDLabel:\n            font_size: dp(22)\n            text: '456'\"\"\"\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11910474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54650cbaa94dd290791e897ad975256b?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Nocturne", "link": "https://stackoverflow.com/users/11910474/dark-nocturne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 57795146, "answer_count": 1, "score": 0, "last_activity_date": 1567628203, "creation_date": 1567624096, "question_id": 57794502, "link": "https://stackoverflow.com/questions/57794502/mdlabels-stacked-in-one-place-one-above-another", "title": "MDLabels stacked in one place (one above another)", "body": "<p>I've some problems with multiple MDLabels in BoxLayout (that is contains by AnchorLayout), so all the MDLabel objects are stacked in one place on the screen!</p>\n\n<p>I dont know how to make them centered and grouped like a list (with spacing and e.g.)</p>\n\n<p>Please, help me with solving that problem!\nThanks a lot and sorry for bad english.</p>\n\n<p>There is my main.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from kivy.app import App\nfrom kivymd.theming import ThemeManager\nfrom kivymd.label import MDLabel\nfrom kivy.uix.screenmanager import Screen\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.anchorlayout import AnchorLayout\nfrom kivy.metrics import dp, sp, pt\n\ndef toast(text):\n    from kivymd.toast.kivytoast import toast\n\n    toast(text)\n\nclass MyScreen(Screen):\n\n    def __init__(self, **kwargs):\n        super().__init__(**kwargs)\n\n        self.menu_items = [\n                {\n                    \"viewclass\": \"MDMenuItem\",\n                    \"text\": \"text%d\" % i,\n                    \"callback\": self.callback,\n                }\n                for i in range(1, 3)\n            ]\n\n        self.menu_button = None\n\n    def change_variable(self, value):\n        print(\"\\nvalue=\", value)\n        self.VARIABLE = value\n        print(\"\\tself.VARIABLE=\", self.VARIABLE)\n\n    def callback(self, *args):\n        toast(args[0])\n\nclass MainApp(App):\n    title = \"KivyMD MDDropdownMenu Demo\"\n    theme_cls = ThemeManager()\n\n    def build(self):\n        return MyScreen()\n\n\nif __name__ == \"__main__\":\n    MainApp().run()\n</code></pre>\n\n<p>And there is my main.kv file contains:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#:import MDDropdownMenu kivymd.menus.MDDropdownMenu\n#:import MDRaisedButton kivymd.button.MDRaisedButton\n#:import MDLabel kivymd.label.MDLabel\n\n&lt;MDMenuItem&gt;:\n    on_release:\n        app.root.change_variable(self.text)\n        app.root.menu_button.text = self.text\n\n&lt;MyScreen&gt;:\n    name: 'myscrn'\n    AnchorLayout:\n        anchor_y: 'center'\n        BoxLayout:\n            orientation: 'vertical'\n            size_hint: 0.1, 0.5\n            pos_hint: {'center_x': 0.5, 'center_y': 0.5}\n            spacing: dp(10)\n            MDRaisedButton:\n                id: mainbutton\n                size_hint: None, None\n                size: 3 * dp(48), dp(48)\n                text: 'MDButton1'\n                pos_hint: {'center_x': 0.5, 'center_y': 0.5}\n                opposite_colors: True\n                on_release:\n                    root.menu_button = mainbutton\n                    MDDropdownMenu(items=root.menu_items, width_mult=4).open(self)\n            MDRaisedButton:\n                id: secondbutton\n                size_hint: None, None\n                size: 3 * dp(48), dp(48)\n                text: 'MDButton2'\n                pos_hint: {'center_x': 0.5, 'center_y': 0.5}\n                opposite_colors: True\n                on_release:\n                    root.menu_button = secondbutton\n                    MDDropdownMenu(items=root.menu_items, width_mult=4).open(self)\n    AnchorLayout:\n        anchor_y: 'top'\n        BoxLayout:\n            orientation: 'vertical'\n            size_hint: 0.95, 0.5\n            padding: [0, 0, 0, 0]\n            spacing: dp(5)\n            pos_hint: {'center_x': 0.5, 'center_y': 0.5}\n        MDLabel:\n            font_size: dp(12)\n            text: '123'\n        MDLabel:\n            font_size: dp(22)\n            text: '456'\n</code></pre>\n"}, {"tags": ["python", "django", "reactjs", "django-rest-framework", "django-serializer"], "answers": [{"tags": [], "owner": {"reputation": 1695, "user_id": 885397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bapS.png?s=128&g=1", "display_name": "jlapoutre", "link": "https://stackoverflow.com/users/885397/jlapoutre"}, "is_accepted": false, "score": 0, "last_activity_date": 1567684802, "creation_date": 1567684802, "answer_id": 57805017, "question_id": 57794490, "link": "https://stackoverflow.com/questions/57794490/how-to-set-permissions-to-only-post-data-for-api-react-django-rest-framework/57805017#57805017", "title": "How to set permissions to only POST data for API (React + Django Rest Framework)", "body": "<p>You could derive your view from <code>APIView</code> insetad and only implement a post method, like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from rest_framework.views import APIView\n\nclass QuestionsViewSet(APIView):\n    permission_classes = (permissions.AllowAny,)\n\n    def post(self, request, format=None):\n        serializer = QuestionsSerializer(data=request.data)\n        if serializer.is_valid():\n            serializer.save()\n            return Response({'status': 'OK'})\n        return Response(serializer.errors, status=400)\n\n</code></pre>\n\n<p>Reference: <a href=\"https://www.django-rest-framework.org/api-guide/views/\" rel=\"nofollow noreferrer\">https://www.django-rest-framework.org/api-guide/views/</a></p>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 10485296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca56249b96378458496e752b69d0126?s=128&d=identicon&r=PG&f=1", "display_name": "ArcMech", "link": "https://stackoverflow.com/users/10485296/arcmech"}, "edited": false, "score": 0, "creation_date": 1568578047, "post_id": 57946146, "comment_id": 102308630, "body": "Thank you, I&#39;ll try it in neariest future."}], "tags": [], "owner": {"reputation": 101, "user_id": 10979187, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wfo8xOAP2xs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNKasK70i7rQ19IBTAu0ScKffhlYQ/mo/photo.jpg?sz=128", "display_name": "HabibUllah Khan", "link": "https://stackoverflow.com/users/10979187/habibullah-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1568565608, "creation_date": 1568565608, "answer_id": 57946146, "question_id": 57794490, "link": "https://stackoverflow.com/questions/57794490/how-to-set-permissions-to-only-post-data-for-api-react-django-rest-framework/57946146#57946146", "title": "How to set permissions to only POST data for API (React + Django Rest Framework)", "body": "<p>You can create your own custom permission class, </p>\n\n<pre><code>from rest_framework.permissions import BasePermission\n\nclass PostOnlyPermissions(BasePermssion):\n    def has_permission(self, request, view):\n        if self.action in ('create', ): // for POST method the action in DRF is create\n            return True\n        return False\n</code></pre>\n\n<p>And then simply call permission class in ViewSets</p>\n\n<pre><code>class QuestionsViewSet(viewsets.ModelViewSet):\n    permission_classes = (PostOnlyPermissions, )\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 10485296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca56249b96378458496e752b69d0126?s=128&d=identicon&r=PG&f=1", "display_name": "ArcMech", "link": "https://stackoverflow.com/users/10485296/arcmech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1260, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1568565608, "creation_date": 1567624048, "question_id": 57794490, "link": "https://stackoverflow.com/questions/57794490/how-to-set-permissions-to-only-post-data-for-api-react-django-rest-framework", "title": "How to set permissions to only POST data for API (React + Django Rest Framework)", "body": "<p>I'm writing my blog with React as Frontend and DRF as a backend. I've made two API's - one is made for posts and second one is made for data contained in Contact Form. To obtain posts I'm using axios and the Django permission is set to <code>IsAdmin</code> - it means only admin can change post and this is fine.</p>\n\n<p>The second one is a problem - if I change a permission to <code>AllowAny</code> it causes that Anonymous user can POST their data and... they can view it. If I change it to <code>IsAdminUser</code> none of users can POST their data. I need to know how I can store people's data safe (they can only POST data, and they are NOT allowed to view my API for contact form.)</p>\n\n<p>Contact.js</p>\n\n<pre><code>const Contact = () =&gt; {\n  return (\n    &lt;section&gt;\n      &lt;Formik\n        validate\n        initialValues={{\n          firstName: \"\",\n          email: \"\",\n        }}\n        onSubmit={values =&gt; {\n          setTimeout(() =&gt; {\n            axios\n              .post(\"http://127.0.0.1:8000/api/questions/\", values)\n              .then(res =&gt; {\n                alert(\"Sent\", res.data);\n              })\n              .catch(err =&gt; {\n                alert(err);\n              });\n            // console.log(JSON.stringify(values, null, 2));\n          }, 500);\n        }}\n        render={() =&gt; (\n          &lt;Form&gt;\n            &lt;label htmlFor=\"firstName\"&gt;Name&lt;/label&gt;\n            &lt;Field name=\"firstName\" placeholder=\"Name\" required /&gt;\n\n            &lt;label htmlFor=\"email\"&gt;Email&lt;/label&gt;\n            &lt;Field\n              name=\"email\"\n              placeholder=\"email@acme.com\"\n              type=\"email\"\n              required\n            /&gt;\n            &lt;button type=\"submit\"&gt;Submit&lt;/button&gt;\n          &lt;/Form&gt;\n        )}\n      /&gt;\n    &lt;/section&gt;\n  );\n};\n\n</code></pre>\n\n<p>api.py</p>\n\n<pre><code>class QuestionsViewSet(viewsets.ModelViewSet):\n    queryset = Questions.objects.all()\n    permission_classes = [\n        permissions.AllowAny\n    ]\n\n    serializer_class = QuestionsSerializer\n</code></pre>\n\n<p>I've mentioned before I can't change <code>permission_classes</code> to <code>permissions.AllowAny</code> because everyone can view a list of people who have submited my contact form. And I can't change it to <code>IsAdminUser</code> because contact form doesn't work then. </p>\n\n<p>The question: is there any function or class that allow anonymous user to POST their data without permission to view my API?</p>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 2, "last_activity_date": 1567624430, "creation_date": 1567624430, "answer_id": 57794558, "question_id": 57794481, "link": "https://stackoverflow.com/questions/57794481/django-queryset-interpolation-for-a-previous-next-instance-function/57794558#57794558", "title": "Django queryset interpolation for a previous / next instance function", "body": "<p>Use a dictionary with kwargs expansion.</p>\n\n<pre><code>return Picture.objects.filter(**{f\"id__{gt_or_lt}\": instance.id})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 11468748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e99ab401dd203703cdb9375b1814eb?s=128&d=identicon&r=PG&f=1", "display_name": "PersonPr7", "link": "https://stackoverflow.com/users/11468748/personpr7"}, "edited": false, "score": 0, "creation_date": 1567625367, "post_id": 57794645, "comment_id": 102022571, "body": "Interesting. I see that you&#39;ve imported Q but I don&#39;t see where it&#39;s used in the function. I&#39;m probably missing something very obvious as I&#39;m only vaguely familiar with Q."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 59, "user_id": 11468748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e99ab401dd203703cdb9375b1814eb?s=128&d=identicon&r=PG&f=1", "display_name": "PersonPr7", "link": "https://stackoverflow.com/users/11468748/personpr7"}, "edited": false, "score": 1, "creation_date": 1567625444, "post_id": 57794645, "comment_id": 102022598, "body": "@PersonPr7: sorry, that was something for another answer. The <code>Q</code> is not necessary here :)"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1567625427, "last_edit_date": 1567625427, "creation_date": 1567624893, "answer_id": 57794645, "question_id": 57794481, "link": "https://stackoverflow.com/questions/57794481/django-queryset-interpolation-for-a-previous-next-instance-function/57794645#57794645", "title": "Django queryset interpolation for a previous / next instance function", "body": "<p>You can use dictionary expansion, like <a href=\"https://stackoverflow.com/a/57794558/67579\">@DanielRoseman</a> suggests. But that will still not per se render the previous, or next item. If for example the model has an <a href=\"https://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.ordering\" rel=\"nofollow noreferrer\"><strong><code>ordering</code></strong> option [Django-doc]</a>, then it is possible that the order is different than on the <code>id</code>. Furthermore, for the previous one, you will need to reverse the ordering.</p>\n\n<p>Furthermore depending on the situation, you might want to prevent that <code>seek_instance</code> can be given a different lookup, like <code>'in'</code> for example.</p>\n\n<p>We can thus use an <code>if &hellip; elif &hellip; else</code> here to branch on the item we wish to retrieve, and raise a <code>ValueError</code> in case you use some other lookup:</p>\n\n<pre><code>def seek_instance(lt_or_gt, instance):\n    try:\n        if lt_or_gt == 'lt':\n            return Picture.objects.filter(pk__lt=instance.pk).order_by('-pk').first()\n        elif lt_or_gt == 'gt':\n            return Picture.objects.filter(pk__gt=instance.pk).order_by('pk').first()\n        else:\n            raise ValueError(&quot;Should be 'lt' or 'gt'&quot;)\n    except Picture.DoesNotExist:\n        return instance</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11468748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e99ab401dd203703cdb9375b1814eb?s=128&d=identicon&r=PG&f=1", "display_name": "PersonPr7", "link": "https://stackoverflow.com/users/11468748/personpr7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57794558, "answer_count": 2, "score": 1, "last_activity_date": 1567625427, "creation_date": 1567624006, "question_id": 57794481, "link": "https://stackoverflow.com/questions/57794481/django-queryset-interpolation-for-a-previous-next-instance-function", "title": "Django queryset interpolation for a previous / next instance function", "body": "<p>Writing a dry function that returns either previous or next instances of a given instance.</p>\n\n<p>This function return previous instances:</p>\n\n<pre><code>def previous(instance):\n    try:\n        return Picture.objects.filter(id__lt=instance.id).first()\n    except Picture.DoesNotExist:\n        return instance\n</code></pre>\n\n<p>I want to create an abstracted function which returns either the previous or the next instance using an additional <code>gt_or_lt</code> argument. The problem lies in interpolating that argument into the <code>filter(id__gt_or_lt)</code>.</p>\n\n<pre><code>def seek_instance(gt_or_lt, instance):\n    try:\n        return Picture.objects.filter(id__gt_or_lt=instance.id).first()\n    except Picture.DoesNotExist:\n        return instance\n</code></pre>\n\n<p>I've tried:</p>\n\n<pre><code>return Picture.objects.filter(id__gt_or_lt = instance.id).first()\nseek_instance(\"gt\", instance)\n</code></pre>\n\n<pre><code>return Picture.objects.filter(id__f\"{gt_or_lt}\" = instance.id).first()\nseek_instance(\"gt\", instance)\n</code></pre>\n\n<pre><code>return Picture.objects.filter(f\"{gt_or_lt}\" = instance.id).first()\n</code></pre>\n\n<pre><code>return Picture.objects.filter(gt_or_lt = instance.id).first()\nseek(\"id__gt\", instance)\n</code></pre>\n\n<p>All fail with their respective errors.</p>\n"}, {"tags": ["python", "json", "dataframe"], "comments": [{"owner": {"reputation": 144, "user_id": 9599442, "user_type": "registered", "profile_image": "https://graph.facebook.com/1945368878809064/picture?type=large", "display_name": "Aaron Arima", "link": "https://stackoverflow.com/users/9599442/aaron-arima"}, "edited": false, "score": 0, "creation_date": 1567629115, "post_id": 57794478, "comment_id": 102023656, "body": "what kind of object is this dataframe? Are you using pandas?"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10382395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4142002d4581221e34f88e5d69d77607?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/10382395/nik"}, "edited": false, "score": 0, "creation_date": 1567626930, "post_id": 57794565, "comment_id": 102023151, "body": "I did the following changes in the code   <code>for value, each in dataframe[[&#39;all&#39;, &#39;id&#39;]]:     if value &gt;= 1:         for each in dataframe[&#39;id&#39;]:             url1 = &quot;https:&#47;&#47;mywebsite&#47;new&#47;&quot;+str(each)+str(alert)             response1 = requests.get(url=url1, headers=headers, params=querystring1).json()             print(response1)             print(&quot;New ID :&quot; +str(each))</code>  Getting error <b>too many values to unpack (expected 2)</b>"}], "tags": [], "owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "is_accepted": false, "score": 0, "last_activity_date": 1567624452, "creation_date": 1567624452, "answer_id": 57794565, "question_id": 57794478, "link": "https://stackoverflow.com/questions/57794478/python-dataframes-looping-and-executing-the-api-calls/57794565#57794565", "title": "Python - Dataframes looping and executing the API Calls", "body": "<p>You have a nested loop here. \nThus you are iterating through all values in <code>dataframe['id']</code> for every value in <code>dataframe['all']</code>.</p>\n\n<p>You need to iterate through values in both <code>id</code> and <code>all</code> columns in one loop.</p>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 10382395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4142002d4581221e34f88e5d69d77607?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/10382395/nik"}, "is_accepted": false, "score": 0, "last_activity_date": 1567629319, "creation_date": 1567629319, "answer_id": 57795325, "question_id": 57794478, "link": "https://stackoverflow.com/questions/57794478/python-dataframes-looping-and-executing-the-api-calls/57795325#57795325", "title": "Python - Dataframes looping and executing the API Calls", "body": "<p>Figured it out:</p>\n\n<p>The following code worked for me.</p>\n\n<pre><code>for index, value in dataframe.iterrows():\n    if value['all'] &gt; 0:\n        url1 = \"https://mywebsite/new/\"+str(value['id'])+str(alert)\n        response1 = requests.get(url=url1, headers=headers, params=querystring1).json()\n        print(response1)\n        print(\"New ID :\" +str(value['id']))\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 10382395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4142002d4581221e34f88e5d69d77607?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/10382395/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567629319, "creation_date": 1567623999, "question_id": 57794478, "link": "https://stackoverflow.com/questions/57794478/python-dataframes-looping-and-executing-the-api-calls", "title": "Python - Dataframes looping and executing the API Calls", "body": "<p>New to python and trying to execute series of API based on the output of previous API and in this process I am having a problem with the following issue.  </p>\n\n<p>I have some values in the dataframes, I want to loop through the dataframes based on a condition(all is greater than or equal to 1) and take the id(satisfying the condition) from the dataframes and execute an API URL</p>\n\n<p><strong>DataFrame</strong></p>\n\n<pre><code>Index | id | all\n0     | 1  | 1\n1     | 2  | 0\n2     | 3  | 5\n3     | 4  | 2\n4     | 5  | 0\n5     | 6  | 0\n6     | 7  | 3\n7     | 8  | 4\n</code></pre>\n\n<p><strong>Code</strong></p>\n\n<pre><code>alert = '/alert'\n\nfor value in dataframe['all']:\n    if value &gt;= 1:\n        for each in dataframe['id']:\n            url1 = \"https://mywebsite/new/\"+str(each)+str(alert)\n            response1 = requests.get(url=url1, headers=headers, params=querystring1).json()\n            print(response1)\n            print(\"New ID :\" +str(each))\n    else:\n        print(\"No alerts id are :\" +str(value))\n</code></pre>\n\n<p>The issue is I am getting the response but it is not going through the condition, it is displaying response for <code>id</code> 2 &amp; 6 which has <code>all</code> value as 0 and the loop never breaks as well.  </p>\n\n<p>Could any one please let me know what mistake I am doing</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 1, "creation_date": 1567623994, "post_id": 57794463, "comment_id": 102022014, "body": "HI, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1567624550, "post_id": 57794463, "comment_id": 102022236, "body": "<code>sorted(k, key=lambda s: &#39;_last&#39; in s)</code> ?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1567624835, "post_id": 57794463, "comment_id": 102022371, "body": "@rafaelc yup, it seems that&#39;s all OP wants"}], "answers": [{"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 1, "last_activity_date": 1567625057, "creation_date": 1567625057, "answer_id": 57794677, "question_id": 57794463, "link": "https://stackoverflow.com/questions/57794463/make-a-column-in-multiple-files-the-last-based-on-word-in-column-header/57794677#57794677", "title": "Make a column in multiple files the last based on word in column header", "body": "<p>You can use:</p>\n\n<pre><code>columns=df.columns.tolist()\ncolumns.append(columns.pop([df.columns.tolist().index(key) for key in df.columns if 'last' in key][0]))\ndf.reindex(columns=columns)\n</code></pre>\n\n<p>the name containing the last one is deleted and alfinal is added.</p>\n"}], "owner": {"reputation": 197, "user_id": 10331210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ec46715d1b41cce4ff28915359322f?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/10331210/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 57794677, "answer_count": 1, "score": 0, "last_activity_date": 1567625057, "creation_date": 1567623947, "last_edit_date": 1567624217, "question_id": 57794463, "link": "https://stackoverflow.com/questions/57794463/make-a-column-in-multiple-files-the-last-based-on-word-in-column-header", "title": "Make a column in multiple files the last based on word in column header", "body": "<p>I have a folder with multiple files, and all have a column header named <code>something_last</code>. I would like to make any column with <code>_last</code> in it, the last column of each dataframe in the folder. Given that the <code>_last</code> column is at various indices depending on the df, a solution that doesn't include the key word has not worked for me.</p>\n\n<p>This is what I have:</p>\n\n<p><code>df_1</code></p>\n\n<pre><code>column_1        column_last          column_2           column_3\n    a                b                 c                  d\n</code></pre>\n\n<p><code>df_2</code></p>\n\n<pre><code>column_1        column_2          something_last          column_3\n    a                b                 c                  d\n</code></pre>\n\n<p>This is what I would like:\n<code>df_1</code></p>\n\n<pre><code>column_1        column_2          column_3           column_last\n    a                c                 d                  b\n</code></pre>\n\n<p><code>df_2</code></p>\n\n<pre><code>column_1        column_2          column_3          something_last\n    a                b                 d                  c\n</code></pre>\n"}, {"tags": ["python", "pyspark", "ftp", "stringio", "pyspark-dataframes"], "comments": [{"owner": {"reputation": 144, "user_id": 9599442, "user_type": "registered", "profile_image": "https://graph.facebook.com/1945368878809064/picture?type=large", "display_name": "Aaron Arima", "link": "https://stackoverflow.com/users/9599442/aaron-arima"}, "edited": false, "score": 0, "creation_date": 1567624282, "post_id": 57794442, "comment_id": 102022127, "body": "Have you tried using <code>coalesce</code> instead of <code>repartition</code>? <code>df.coalesce(1).write.csv(file_buffer,mode=&quot;overwrite&quot;, header=True)</code>"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 1, "creation_date": 1567661155, "post_id": 57794442, "comment_id": 102030302, "body": "How can you <i>&quot;write to S3 with the above mentioned method&quot;</i>, if the object does not have the method that you are calling?"}], "owner": {"reputation": 193, "user_id": 9642695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0284d65d5a6cd1c53d56656fb0a869a7?s=128&d=identicon&r=PG&f=1", "display_name": "C.Tomas", "link": "https://stackoverflow.com/users/9642695/c-tomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1567660831, "creation_date": 1567623866, "last_edit_date": 1567660831, "question_id": 57794442, "link": "https://stackoverflow.com/questions/57794442/pyspark-write-spark-dataframe-as-single-partitioned-csv-to-stringio-for-ftp", "title": "pyspark write spark dataframe as single partitioned csv to stringio for ftp", "body": "<p>I would like to write a spark dataframe to stringIO as a single partitioned csv. This singled-partioned csv is then supposed to be sent to another server using ftp.</p>\n\n<p>the following line does not seem to work:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.repartition(1).write.csv(file_buffer,mode=\"overwrite\", header=True)\n</code></pre>\n\n<p>The output is the following error:</p>\n\n<pre><code>py4j.protocol.Py4JError: An error occurred while calling o148.csv. Trace:\npy4j.Py4JException: Method csv([class java.util.ArrayList]) does not exist\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom ftplib import FTP\nimport StringIO\n\nfile_buffer = StringIO.StringIO()\ndf.repartition(1).write.csv(file_buffer,mode=\"overwrite\", header=True)\n\nftp = FTP()\nftp.connect(host, 21)\nftp.login(user=user, passwd=pw)\nftp.storbinary('test.csv', file_buffer)\nftp.quit()\n\n</code></pre>\n\n<p>I've also tried <code>df.coalesce(1).write.csv(file_buffer,mode=\"overwrite\", header=True)</code>. However, that returns the same error.\nBtw, I can principally write to S3 with the above mentioned method.\nMany thanks in advance!</p>\n"}, {"tags": ["python", "pandas", "numpy", "random"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 0, "last_activity_date": 1567708441, "last_edit_date": 1567708441, "creation_date": 1567626607, "answer_id": 57794986, "question_id": 57794402, "link": "https://stackoverflow.com/questions/57794402/how-can-randomly-select-records-of-a-data-frame-based-on-values-of-a-column-of-t/57794986#57794986", "title": "How can randomly select records of a data frame based on values of a column of that data frame, while there are some conditions as well?", "body": "<p>IIUC, I think you can do this without loops using a groupby statement:</p>\n\n<pre><code> new_df = df.groupby('rank', group_keys=False)\\\n            .apply(lambda x: x.sample(x.iloc[0, x.columns.get_loc('MI')]))\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11287088, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O5Q-BmNON-o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re7Vbd99PXHqaov5qI_q_HRIVe6sA/mo/photo.jpg?sz=128", "display_name": "dekaz", "link": "https://stackoverflow.com/users/11287088/dekaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57794986, "answer_count": 1, "score": 2, "last_activity_date": 1567708441, "creation_date": 1567623659, "last_edit_date": 1567625508, "question_id": 57794402, "link": "https://stackoverflow.com/questions/57794402/how-can-randomly-select-records-of-a-data-frame-based-on-values-of-a-column-of-t", "title": "How can randomly select records of a data frame based on values of a column of that data frame, while there are some conditions as well?", "body": "<p>I have a dataset like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AA89W.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AA89W.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>df\n</code></pre>\n\n<p>I want to select <code>\"MI\"</code> number of samples and add to another dataframe. For instance: if Ranking = 0, I want to randomly select MI=2 rows. or if Ranking = 1, I want to select MI=5 rows.\nThis is my code,but it does not work</p>\n\n<pre><code>All_M=pd.DataFrame()\nA= df['Ranking'].min()\n\nfor i in range(0 , len(df)):\n    x6 = df[(df['Ranking'] == A)].apply(lambda x:x.sample(int(df[\"MI\"][i])).reset_index(drop=True))\n    All_M= x6.append(All_M)\n    A = A + 1 \n</code></pre>\n"}, {"tags": ["python", "multithreading", "performance", "operating-system"], "comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1567623757, "post_id": 57794380, "comment_id": 102021921, "body": "Python isn&#39;t very compatible with multithreading because of how it is implemented. There are very specific uses where multithreading gives a significant boost in performance. It has something to do with the GIL, you can find more info <a href=\"https://medium.com/practo-engineering/threading-vs-multiprocessing-in-python-7b57f224eadb\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1567626337, "post_id": 57794380, "comment_id": 102022932, "body": "@JuanC, Your comment would make more sense if you said &quot;multiprocessing&quot; instead of &quot;multithreading.&quot; Multiple threads in a CPython program can do pretty much everything that multiple threads in any other language can do except use more than one CPU at the same time. That&#39;s what the GIL prevents."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1567626485, "post_id": 57794380, "comment_id": 102022988, "body": "@\u05e2\u05d5\u05de\u05e8 \u05e9\u05e9\u05d5\u05e0\u05d9, It never makes sense to write <code>t.join()</code> on the very next line after <code>t.start()</code>.  The <i>entire point</i> of creating a new thread is to let the caller to do something else while the thread is running (i.e., after the <code>start()</code> call and before the <code>join()</code> call.)"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1567630866, "post_id": 57794380, "comment_id": 102024279, "body": "@SolomonSlow so the Medium article is wrong?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 1, "creation_date": 1567631804, "post_id": 57794380, "comment_id": 102024606, "body": "@JuanC, I see nothing wrong in that article, but I made a mistake when I said, &quot;multiprocessing.&quot; I forgot, Python programmers use that word in a specific way, namely, to describe a single Python app that is composed of several cooperating processes. Python is &quot;very compatible with&quot; multiprocessing in that sense. But &quot;multiprocessing&quot; more generally means <i>any</i> technique for exploiting multiple CPUs on a single host. Python threads are not useful as a means to achieve multi-processing in the broader sense, but they <i>are</i> useful for pretty much all of the other reasons people use threads."}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1567632902, "post_id": 57794380, "comment_id": 102024951, "body": "Thanks, that clarifies it! I&#39;ll need to study a bit to really grasp the differences, but I trust your knowledge"}], "answers": [{"tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 1, "last_activity_date": 1567625238, "last_edit_date": 1567625238, "creation_date": 1567624382, "answer_id": 57794552, "question_id": 57794380, "link": "https://stackoverflow.com/questions/57794380/python-why-doesnt-multithreading-increase-the-speed-of-my-code/57794552#57794552", "title": "Python - Why doesn&#39;t multithreading increase the speed of my code?", "body": "<p>The primary reason you aren't seeing any performance improvements with multiple threads is because your program only enables one thread to do anything useful at a time.  The other thread is always blocked.</p>\n\n<p>Two things:</p>\n\n<p>Remove the print statement that's invoked inside the lock.  print statements drastically impact performance and timing. Also, the I/O channel to stdout is essentially single threaded, so you've built another implicit lock into your code. So let's just remove the print statement.</p>\n\n<p>Use a proper sleep technique instead of \"spin locking\" and counting up from 0 to 30000. That's just going to burn a core needlessly.</p>\n\n<p>Try this as your main loop</p>\n\n<pre><code>while True:\n    arr_lock.acquire()\n    if len(arr) &gt; 0:\n        item = arr.pop(0)\n        arr_lock.release()\n        time.sleep(0)\n    else:\n        arr_lock.release()\n        break\n</code></pre>\n\n<p>This should run slightly better...  I would even advocate getting the sleep statement out altogether so you can just let each thread have a full quantum.</p>\n\n<p>However, because each thread is either doing \"nothing\" (sleeping or blocked on acquire) or just doing a single pop call on the array while in the lock, the majority of the time spent is going to be in the acquire/release calls instead of actually operating on the array.  Hence, multiple threads aren't going to make your program run faster.</p>\n"}], "owner": {"reputation": 41, "user_id": 11233814, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3vwFaDDcZes/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcHJdwcJVl13dbdrblj25-MHffXWA/mo/photo.jpg?sz=128", "display_name": "\u05e2\u05d5\u05de\u05e8 \u05e9\u05e9\u05d5\u05e0\u05d9", "link": "https://stackoverflow.com/users/11233814/%d7%a2%d7%95%d7%9e%d7%a8-%d7%a9%d7%a9%d7%95%d7%a0%d7%99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 57794552, "answer_count": 1, "score": 0, "last_activity_date": 1567625955, "creation_date": 1567623572, "last_edit_date": 1567625955, "question_id": 57794380, "link": "https://stackoverflow.com/questions/57794380/python-why-doesnt-multithreading-increase-the-speed-of-my-code", "title": "Python - Why doesn&#39;t multithreading increase the speed of my code?", "body": "<p>I tried improving my code by running this with and without using two threads:</p>\n\n<pre><code>from threading import Lock\nfrom threading import Thread\nimport time\n\nstart_time = time.clock()\n\narr_lock = Lock()\n\narr = range(5000)\n\ndef do_print():\n    # Disable arr access to other threads; they will have to wait if they need to read\n    a = 0\n    while True:\n        arr_lock.acquire()\n        if len(arr) &gt; 0:\n            item = arr.pop(0)\n            print item\n            arr_lock.release()\n            b = 0\n            for a in range(30000):\n                b = b + 1\n        else:\n            arr_lock.release()\n            break\nthread1 = Thread(target=do_print)\nthread1.start()\nthread1.join()\n\nprint time.clock() - start_time, \"seconds\"\n</code></pre>\n\n<p>When running 2 threads my code's run time increased. Does anyone know why this happened, or perhaps know a different way to increase the performance of my code?</p>\n"}, {"tags": ["python", "coordinate-transformation"], "comments": [{"owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "edited": false, "score": 2, "creation_date": 1567623827, "post_id": 57794357, "comment_id": 102021949, "body": "It looks OK to me. You can&#39;t expect 1e-16 level precision with native python."}], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 4163389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626cfc1b7435e70d4f40692aa573dbb4?s=128&d=identicon&r=PG", "display_name": "urquiza", "link": "https://stackoverflow.com/users/4163389/urquiza"}, "edited": false, "score": 0, "creation_date": 1567624573, "post_id": 57794497, "comment_id": 102022244, "body": "Excelent! I knew some fresh eyes to the code would readily detect the damned bug! Thank you, sir."}, {"owner": {"reputation": 803, "user_id": 9680548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104964776639740/picture?type=large", "display_name": "Todd Burus", "link": "https://stackoverflow.com/users/9680548/todd-burus"}, "reply_to_user": {"reputation": 277, "user_id": 4163389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626cfc1b7435e70d4f40692aa573dbb4?s=128&d=identicon&r=PG", "display_name": "urquiza", "link": "https://stackoverflow.com/users/4163389/urquiza"}, "edited": false, "score": 0, "creation_date": 1567625891, "post_id": 57794497, "comment_id": 102022770, "body": "No problem. I thought the code looked good too, so I figured it was something in the execution. Easy mistake."}], "tags": [], "owner": {"reputation": 803, "user_id": 9680548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104964776639740/picture?type=large", "display_name": "Todd Burus", "link": "https://stackoverflow.com/users/9680548/todd-burus"}, "is_accepted": true, "score": 2, "last_activity_date": 1567625917, "last_edit_date": 1567625917, "creation_date": 1567624063, "answer_id": 57794497, "question_id": 57794357, "link": "https://stackoverflow.com/questions/57794357/why-does-this-python-code-gives-the-wrong-answer-when-converting-between-cartesi/57794497#57794497", "title": "Why does this python code gives the wrong answer when converting between cartesian and spherical coordinates?", "body": "<p>It looks like you flipped your transformations for theta and phi. Try this.</p>\n\n<pre><code>def Cartesian2Spherical(p):\n    # p = (x,y,z)\n    # theta  in (0,pi) and phi in (0,2pi)\n    x,y,z = p\n    r = np.sqrt(x*x+y*y+z*z)\n    phi = np.arctan2(y,x)  # Inclination\n    theta = np.arccos(z/r)  # Azimuth\n    q = np.array([r,theta,phi])\n    return q\n\ndef Spherical2Cartesian(q):\n    # q = (r,theta,phi)\n    # theta  in (0,pi) and phi in (0,2pi)\n    r,theta,phi = q\n    SinTheta = np.sin(theta)\n    CosTheta = np.cos(theta)\n    SinPhi = np.sin(phi)\n    CosPhi = np.cos(phi)\n    rSinTheta = r*SinTheta\n    x = rSinTheta*CosPhi\n    y = rSinTheta*SinPhi\n    z = r*CosTheta\n    p  = np.array([x,y,z])\n    return p\n\np = (1,1,1) \n\nprint(Spherical2Cartesian(Cartesian2Spherical(p)))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1. 1. 1.]\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 4163389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626cfc1b7435e70d4f40692aa573dbb4?s=128&d=identicon&r=PG", "display_name": "urquiza", "link": "https://stackoverflow.com/users/4163389/urquiza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 1, "accepted_answer_id": 57794497, "answer_count": 1, "score": 2, "last_activity_date": 1567625917, "creation_date": 1567623420, "question_id": 57794357, "link": "https://stackoverflow.com/questions/57794357/why-does-this-python-code-gives-the-wrong-answer-when-converting-between-cartesi", "title": "Why does this python code gives the wrong answer when converting between cartesian and spherical coordinates?", "body": "<p>So I set up two functions in python3.4, <code>Cartesian2Spherical</code> and <code>Spherical2Cartesian</code>, in order to help me convert a point between cartesian ans spherical coordinate systems as part of an application that required lots of such coordinate transformations. Here is the code for the functions. I am using <a href=\"https://en.wikipedia.org/wiki/Spherical_coordinate_system\" rel=\"nofollow noreferrer\">this Wikipedia article</a> as my source for the transformations.</p>\n\n<pre><code>def Cartesian2Spherical(p):\n    # p = (x,y,z)\n    # theta  in (0,pi) and phi in (0,2pi)\n    x,y,z = p\n    r = np.sqrt(x*x+y*y+z*z)\n    theta = arctan2(y,x)  # Inclination\n    phi = arccos(z/r)  # Azimuth\n    q = np.array([r,theta,phi])\n    return q\n\ndef Spherical2Cartesian(q):\n    # q = (r,theta,phi)\n    # theta  in (0,pi) and phi in (0,2pi)\n    r,theta,phi = q\n    SinTheta = sin(theta)\n    CosTheta = cos(theta)\n    SinPhi = sin(phi)\n    CosPhi = cos(phi)\n    rSinTheta = r*SinTheta\n    x = rSinTheta*CosPhi\n    y = rSinTheta*SinPhi\n    z = r*CosTheta\n    p  = np.array([x,y,z])\n    return p\n</code></pre>\n\n<p>As you can see, they are pretty straightforward. Even though the code is so simple, however, I still got weird results from them during several test runs. Eventually my bug hunt came to a halt when I decided to do a simple test with these functions: I asked python to print some point <code>p</code> followed by <code>Spherical2Cartesian(Cartesian2Spherical(p))</code> and the result was this:</p>\n\n<pre><code>  [1.11022302e-16 1.47224319e+00 2.22044605e-16]\n  [9.01488953e-17 1.47224319e+00 9.01488953e-17]\n</code></pre>\n\n<p>for one I am happy for having tracked the bug down, but now I am very confused because I have no clue as to what could possibly be wrong in such a simple piece of code. Could someone be kind enough to walk me through this?</p>\n"}, {"tags": ["python", "pandas", "vectorization"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567623519, "post_id": 57794317, "comment_id": 102021826, "body": "I think your example is too simplistic. Presumably you have either a gizmo creation date or a gizmo expiry date? Sort the df first by gizmo identifier (name/product code/whatever) and have the secondary sort condition be the date. When you want a gizmo, sort the df, <code>groupby(gizmo_identifier)</code> and take take <code>first()</code>. Do you have such fields? What you have shown is too high-level to differentiate between gizmos of the same type"}, {"owner": {"reputation": 587, "user_id": 9286067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18968e2d0447bf89aebd02ee9b480b1f?s=128&d=identicon&r=PG&f=1", "display_name": "skoeb", "link": "https://stackoverflow.com/users/9286067/skoeb"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567623773, "post_id": 57794317, "comment_id": 102021927, "body": "@roganjosh, In reality this isn&#39;t about a product at all, it&#39;s for a webapp that helps entities plan for a renewable-energy policy. The policy provides entities with one &#39;credit&#39; for each unit of renewable-energy purchased. Entities are required to hand over a number of credits every year. Credits expire after two years. Because some entities will require millions of credits, and this will run on a small webserver, avoiding a long-df is preferable."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567623840, "post_id": 57794317, "comment_id": 102021957, "body": "My continued use of &quot;gizmo&quot; implies that I don&#39;t really care what it is, because the principle should be the same. That info doesn&#39;t help me understand the problem any better. Please address the points I made in the first question, or I think your question doesn&#39;t actually encapsulate the real issue here"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567624040, "post_id": 57794317, "comment_id": 102022033, "body": "Because now I wonder where you&#39;re storing gizmo data. Probably MySQL/Postgres? In that case, the whole issue of a large DF would be avoided by pushing the filtering down into SQL"}, {"owner": {"reputation": 587, "user_id": 9286067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18968e2d0447bf89aebd02ee9b480b1f?s=128&d=identicon&r=PG&f=1", "display_name": "skoeb", "link": "https://stackoverflow.com/users/9286067/skoeb"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567624154, "post_id": 57794317, "comment_id": 102022080, "body": "There is no gizmo data. Annual production/sales totals are the most discrete representation we have. There is no differentiation between gizmos besides the year they were created (not even the date). This is all in pandas."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567624536, "post_id": 57794317, "comment_id": 102022228, "body": "If that is the lowest level of granularity then why don&#39;t you just pick credits that were awarded last year? A simple filter on the data by the year it was created, and whether it was assigned or not. I can&#39;t see anything further you think you could be doing?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567624638, "post_id": 57794317, "comment_id": 102022273, "body": "It also can&#39;t all be in some dataframe on a web server. The entire dataset can&#39;t be sitting in memory, and memory alone. A single server crash would wipe out millions of datapoints. You&#39;re getting that data from some kind of disk storage, whether a CSV or a database. Surely?"}, {"owner": {"reputation": 587, "user_id": 9286067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18968e2d0447bf89aebd02ee9b480b1f?s=128&d=identicon&r=PG&f=1", "display_name": "skoeb", "link": "https://stackoverflow.com/users/9286067/skoeb"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567624866, "post_id": 57794317, "comment_id": 102022382, "body": "The core of this question is assessing how to work with a df where rows are <i>aggregations</i> (here, they are years), there is no underlying df with one row per gizmo/credit."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567625388, "post_id": 57794317, "comment_id": 102022580, "body": "&quot;Because some entities will require millions of credits, and this will run on a small webserver, avoiding a long-df is preferable&quot;. If you&#39;re only dealing with <i>aggregations by year</i> then how could you possibly have a long df unless you&#39;d been selling credits for millions of years? This all seems contradictory. It seems I can&#39;t follow what you&#39;re doing sorry so it&#39;s best I back out."}], "owner": {"reputation": 587, "user_id": 9286067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18968e2d0447bf89aebd02ee9b480b1f?s=128&d=identicon&r=PG&f=1", "display_name": "skoeb", "link": "https://stackoverflow.com/users/9286067/skoeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1567623223, "creation_date": 1567623223, "question_id": 57794317, "link": "https://stackoverflow.com/questions/57794317/calculating-a-first-in-first-out-inventory-with-expiration-in-pandas", "title": "Calculating a First In First Out inventory with expiration in pandas", "body": "<p>Say that you are the owner of a factory that makes gizmos, and you are trying to plan your inventory for future years. You have a forecast of sales (that ranges between 1 and 5 gizmos per year). And your factory produces 4 gizmos every year.</p>\n\n<p>We can take the cumulative sum of the difference between gizmos produced and gizmos sold in order to find the inventory in any year:</p>\n\n<pre><code>    # --- Initialize df --- \n    df = pd.DataFrame({'year':list(range(2010,2020,1)),\n                       'gizmos_made':[4]*10,\n                       'gizmos_sold':[2,3,2,1,5,2,2,3,4,2]})\n    df = df.set_index('year')\n\n    # --- Calculate yearly inventory changes --- \n    df['gizmo_inventory'] = (df['gizmos_made'] - df['gizmos_sold']).cumsum()\n\n    df\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/NV7Ph.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NV7Ph.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, lets say that the gizmos actually expire after two years (that is, a gizmo produced in 2018 will expire in 2020). The customer does not care if they receive a gizmo that is brand-new or about to expire, but we are always trying to get the oldest gizmos made out of the warehouse first. </p>\n\n<p>What is an efficient (preferably vectorized or mapped) method of doing this? </p>\n\n<p>I have a very long-winded implementation that creates an <code>inventory</code> column filled with lists of years (one for each gizmo) and then pulls out the oldest gizmos from each list in a loop. This is not scalable though, as in reality, I need to deploy this in a case with millions of gizmos. </p>\n"}]