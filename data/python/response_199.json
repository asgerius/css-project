[{"tags": ["python", "python-3.x", "multithreading", "networking"], "comments": [{"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1541031849, "post_id": 53093477, "comment_id": 93084044, "body": "I don&#39;t see a logical issue (yet), so maybe it&#39;s a technological detail.  I also don&#39;t understand clearly enough what it is you expect to see and what you see instead.  Maybe you could provide this information (by extending your post)?"}, {"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1541031953, "post_id": 53093477, "comment_id": 93084061, "body": "Btw, <code>_thread</code> is normally not used on high-level programs.  Consider using module <code>threading</code> instead.  It provides a nice <code>Thread</code> class which is easier to handle than the <code>_thread</code> stuff."}, {"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1541032147, "post_id": 53093477, "comment_id": 93084097, "body": "I tried your code and couldn&#39;t reproduce the issue.  Everything looks exactly as I would expect it with this code (i. e. the prompt doesn&#39;t get shifted down when data arriving through a connection is printed, etc.)."}, {"owner": {"reputation": 308, "user_id": 10588548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b550512336a5d7d12b12a50bce00692?s=128&d=identicon&r=PG&f=1", "display_name": "Halloween", "link": "https://stackoverflow.com/users/10588548/halloween"}, "reply_to_user": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1541034926, "post_id": 53093477, "comment_id": 93084629, "body": "@Alfe Are you using Python 3.7.1? I know the specific version probably doesn&#39;t matter. I will update my post with more information"}], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 10588548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b550512336a5d7d12b12a50bce00692?s=128&d=identicon&r=PG&f=1", "display_name": "Halloween", "link": "https://stackoverflow.com/users/10588548/halloween"}, "edited": false, "score": 0, "creation_date": 1541037512, "post_id": 53094198, "comment_id": 93085142, "body": "Any way to find out that information? I had a version of my program running properly on 2.x. I converted things to 3.x and in the process I must have removed something important. But I have this pretty much barebones as much as I can and I am just not to sure what it could be."}, {"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "reply_to_user": {"reputation": 308, "user_id": 10588548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b550512336a5d7d12b12a50bce00692?s=128&d=identicon&r=PG&f=1", "display_name": "Halloween", "link": "https://stackoverflow.com/users/10588548/halloween"}, "edited": false, "score": 0, "creation_date": 1541037605, "post_id": 53094198, "comment_id": 93085164, "body": "Not sure how much you can tell portably. See <a href=\"https://docs.python.org/3/library/readline.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/readline.html</a> for baseline."}, {"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1541087838, "post_id": 53094198, "comment_id": 93105004, "body": "It&#39;s a Windows issue.  Avoid using <code>input()</code> then.  If you use a straight forward <code>sys.stdin.readline()</code> no readline library will interfere with your input.  You will have the default editing options then, probably nothing more fancy than backspace.  No cursor keys, etc.  But at least it will leave your cursor where it was placed by the other threads."}, {"owner": {"reputation": 308, "user_id": 10588548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b550512336a5d7d12b12a50bce00692?s=128&d=identicon&r=PG&f=1", "display_name": "Halloween", "link": "https://stackoverflow.com/users/10588548/halloween"}, "edited": false, "score": 0, "creation_date": 1541116853, "post_id": 53094198, "comment_id": 93117108, "body": "Well this is the answer. I started to think awhile ago that I needed to test it on Linux. Always ran into some sort of roadblock setting the environment up and gave up and figured if it worked on Windows before then I should be able to get it to work. Turns out I should have pushed harder and save myself 3 days of work. After all, this program is going to be running on Unix only anyways so I should have started it on Unix. Chalk it up as a lesson learned. Submit it and I will accept it as an answer. And again thank you for your help."}], "tags": [], "owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "is_accepted": false, "score": 2, "last_activity_date": 1541037156, "creation_date": 1541037156, "answer_id": 53094198, "question_id": 53093477, "link": "https://stackoverflow.com/questions/53093477/do-python-threads-print-to-a-different-buffer-than-the-main-thread/53094198#53094198", "title": "Do Python threads print to a different buffer than the main thread?", "body": "<p>The answer to your question in the subject line (about buffering for <code>sys.stdout</code>, to which <code>print</code> writes by default) is essentially no: each thread talks to the same <code>sys.stdout</code> object, which just has one buffer in general, though of course you can alter <code>sys.stdout</code> if you like, and you can supply <code>file=whatever</code> arguments to <code>print()</code>.</p>\n\n<p>This specific part, however, is explainable:</p>\n\n<blockquote>\n  <p>But when I try to type anything in the console, the text that is on my console that came from the socket gets removed. I want to keep everything from the socket to remain on the screen.</p>\n</blockquote>\n\n<p>Python's input reader goes through a <code>readline</code> library by default.  There are multiple different readline libraries with varying behavior, but most of them provide input history, line editing, and other fancy features.  They tend to <em>implement</em> these fancy features by moving the cursor around in your terminal window\u2014assuming you're using some kind of terminal window in the first place\u2014and using \"clear to end of line\" operations at times.  These operations will often interfere with, and overwrite or erase, other output that occurs before, during, and/or after these fancy tricks.</p>\n\n<p>The precise details vary, quite a lot, based on your OS, terminal emulator, and which readline library your Python is using.</p>\n"}], "owner": {"reputation": 308, "user_id": 10588548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b550512336a5d7d12b12a50bce00692?s=128&d=identicon&r=PG&f=1", "display_name": "Halloween", "link": "https://stackoverflow.com/users/10588548/halloween"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1541037156, "creation_date": 1541030273, "last_edit_date": 1541035371, "question_id": 53093477, "link": "https://stackoverflow.com/questions/53093477/do-python-threads-print-to-a-different-buffer-than-the-main-thread", "title": "Do Python threads print to a different buffer than the main thread?", "body": "<p>I have a project I am working on but I have brought out the problem into a small sample code below. I first create a socket and then spawn a thread to accept connections (so I can have multiple clients connect). When I receive a connection, I then spawn another thread that will listen on that connection. I am also in a loop that gives me a prompt where I can enter anything, and it will print it back out to me.</p>\n\n<p>The issue lies when I recieve something through the socket. It will print to the screen. But when I try to type anything in the console, the text that is on my console that came from the socket gets removed. I want to keep everything from the socket to remain on the screen.</p>\n\n<pre><code>import sys\nimport socket\nfrom _thread import *\n\ndef recv_data(conn):\n    while True:\n        data = conn.recv(256)\n        print(data)\n\ndef accept_clients(sock):\n    while True:\n        conn, addr = sock.accept()\n        print(\"\\nConnected with %s:%s\\n\" % (addr[0], str(addr[1])))\n        start_new_thread(recv_data, (conn,))\n\ndef start_socket(ip, port):\n    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    print(\"Socket created\")\n\n    try:\n        port = int(port)\n    except ValueError:\n        print(\"Invalid port number.\")\n        return\n\n    try:\n        sock.bind((ip, int(port)))\n    except socket.error as msg:\n        print(\"Bind failed. Error Code : %s\" % (msg))\n        return\n\n    print(\"Socket bind complete\")\n    sock.listen(5)\n    print(\"Socket now listening\")\n\n    start_new_thread(accept_clients, (sock,))\n\ndef get_input():\n    while True:\n        data = input(\"cmd&gt; \")\n        print(data)\n\n\nstart_socket('localhost', 5555) \nget_input() \n</code></pre>\n\n<p>Pictures can be found here of what it is doing: <a href=\"https://imgur.com/a/hCWznfE\" rel=\"nofollow noreferrer\">https://imgur.com/a/hCWznfE</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Uiu2e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uiu2e.png\" alt=\"I started the server and typed in the prompt (cmd&gt;). It takes my input and prints it back to me.\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tvk7a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tvk7a.png\" alt=\"Now I used netcat and connected to the server. The server shows that a client was connected.\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Or5Yz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Or5Yz.png\" alt=\"I use netcat to send messages to the server, and the server displays.\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/RF9RQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RF9RQ.png\" alt=\"I go back to the server and start to type and the strings from the client are removed and I am back at the prompt.\"></a></p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1541030490, "post_id": 53093493, "comment_id": 93083751, "body": "Nice, but I think that needs a bit of explanation!"}, {"owner": {"reputation": 65, "user_id": 8940784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060fd18252bd072dda4ceb60b83fb552?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Collier", "link": "https://stackoverflow.com/users/8940784/caleb-collier"}, "edited": false, "score": 0, "creation_date": 1541030543, "post_id": 53093493, "comment_id": 93083763, "body": "Yes, that does work but I am not familiar with Counter. Could you explain what that does?"}], "tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 5, "last_activity_date": 1541032089, "last_edit_date": 1541032089, "creation_date": 1541030411, "answer_id": 53093493, "question_id": 53093472, "link": "https://stackoverflow.com/questions/53093472/how-do-you-return-duplicate-values-in-a-list-of-lists/53093493#53093493", "title": "How do you return duplicate values in a list of lists?", "body": "<p>You could use <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\">Counter</a>:</p>\n\n<pre><code>from collections import Counter\n\nmy_list = [[5, 5, 4, 6, 5, 6], [6, 7, 5, 8, 4], [2, 1, 3, 9, 8]]\n\nresult = [[k for k, v in counts.items() if v &gt; 1] for counts in map(Counter, my_list)]\nprint(result)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[[5, 6], [], []]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Counter creates a dictionary where the keys are the values of the each of the inner lists and the values are the counts of each element. For example:</p>\n\n<pre><code>Counter([5, 5, 4, 6, 5, 6])\n</code></pre>\n\n<p>creates the following object:</p>\n\n<pre><code>Counter({5: 3, 6: 2, 4: 1})\n</code></pre>\n\n<p>then <code>items</code> returns a list of tuples, using the same example as above it will be:</p>\n\n<pre><code>[(4, 1), (5, 3), (6, 2)]\n</code></pre>\n\n<p>then using a <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehension</a> get only those values with count above 1.</p>\n"}, {"tags": [], "owner": {"reputation": 700, "user_id": 6274595, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/fbccb62f5faf92749bd3183879fbd21e?s=128&d=identicon&r=PG&f=1", "display_name": "PL200", "link": "https://stackoverflow.com/users/6274595/pl200"}, "is_accepted": true, "score": 2, "last_activity_date": 1541031634, "last_edit_date": 1541031634, "creation_date": 1541030748, "answer_id": 53093530, "question_id": 53093472, "link": "https://stackoverflow.com/questions/53093472/how-do-you-return-duplicate-values-in-a-list-of-lists/53093530#53093530", "title": "How do you return duplicate values in a list of lists?", "body": "<p>List comprehension works really well for this</p>\n\n<pre><code>my_list = [[5,5,4,6,5,6], [6,7,5,8,4],[2,1,3,9,8]]\n\nduplicates = [list(set([value for value in sublist if sublist.count(value) &gt; 1])) for sublist in my_list]\n\nprint(duplicates)\n</code></pre>\n\n<p>This gives an <strong>output</strong> of:</p>\n\n<pre><code>[[5, 6], [], []]\n</code></pre>\n\n<p>What's happening is we're looping through the three lists in 'my_list'. Whenever the 'count' of that value is bigger than 1 in that sublist, we're retaining it. </p>\n\n<p>We're then converting to a set, which removes any duplicates (otherwise we'd still have three instances of '5', and two instances of '6', afterwards).</p>\n\n<p>Converting this to a set (and then back to a list) will remove any duplicates, leaving us with only the multiple occurring values we're after.</p>\n"}], "owner": {"reputation": 65, "user_id": 8940784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060fd18252bd072dda4ceb60b83fb552?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Collier", "link": "https://stackoverflow.com/users/8940784/caleb-collier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 53093530, "answer_count": 2, "score": -2, "last_activity_date": 1541032089, "creation_date": 1541030259, "question_id": 53093472, "link": "https://stackoverflow.com/questions/53093472/how-do-you-return-duplicate-values-in-a-list-of-lists", "title": "How do you return duplicate values in a list of lists?", "body": "<p>I am trying to return duplicate values in a list of lists. Say I create a list</p>\n\n<pre><code>my_list = [[5,5,4,6,5,6], [6,7,5,8,4],[2,1,3,9,8]]\n</code></pre>\n\n<p>I want to return every list with each duplicate value in that list. The expected output would be</p>\n\n<pre><code>[[5,6],[],[]]\n</code></pre>\n\n<p>I'm thinking I need to use a nested for loop to access each number inside that list.</p>\n\n<pre><code>for alist in my_list:\n    for number in alist:\n        pass\n</code></pre>\n\n<p>I am also thinking about using a membership statement to see if it's in there more than once, but I'm not sure  if I'm implementing that correctly</p>\n"}, {"tags": ["python", "python-3.x", "csv"], "comments": [{"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "edited": false, "score": 0, "creation_date": 1541030457, "post_id": 53093463, "comment_id": 93083739, "body": "Do you mean that the exact same code worked with commas, but now it does not work with pipes?"}], "answers": [{"comments": [{"owner": {"reputation": 838, "user_id": 10552640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29ea973ff7557ba6510ef47518c9051?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/10552640/gary"}, "edited": false, "score": 0, "creation_date": 1541034091, "post_id": 53093535, "comment_id": 93084459, "body": "This is what I was looking for. Thanks a lot!"}], "tags": [], "owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "is_accepted": true, "score": 3, "last_activity_date": 1541037354, "last_edit_date": 1541037354, "creation_date": 1541030787, "answer_id": 53093535, "question_id": 53093463, "link": "https://stackoverflow.com/questions/53093463/prevent-string-from-splitting-on-comma-when-writing-a-csv-file/53093535#53093535", "title": "prevent string from splitting on comma when writing a csv file", "body": "<p>csv will automatically split any string on a <code>,</code> into multiple fields. In order to avoid this, you need to enclose your string containing a <code>,</code> within quotes,</p>\n\n<pre><code>Output_File.write('\"{}\",\"{}\",\"{}\"'.format(restaurant, names[i], review[i]))\n</code></pre>\n\n<p>This way you can still make it <code>,</code> delimited. </p>\n\n<p>You can also replace <code>,</code> with any other character as a delimiter.</p>\n"}], "owner": {"reputation": 838, "user_id": 10552640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29ea973ff7557ba6510ef47518c9051?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/10552640/gary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3991, "favorite_count": 0, "accepted_answer_id": 53093535, "answer_count": 1, "score": 3, "last_activity_date": 1541037354, "creation_date": 1541030186, "last_edit_date": 1541037178, "question_id": 53093463, "link": "https://stackoverflow.com/questions/53093463/prevent-string-from-splitting-on-comma-when-writing-a-csv-file", "title": "prevent string from splitting on comma when writing a csv file", "body": "<p>I am trying to write into a csv file 3 things : </p>\n\n<p><code>Restaurant,Name and Review</code>. </p>\n\n<p><code>Review</code> is a paragraph and contains <code>commas</code> in itself. When i write the file, I am getting the wrong output as the final csv file is splitting into columns based on the commas in the review column. </p>\n\n<p>For example, if review was \"food here is great, do try!\" , this string value should come in one cell in the csv file. </p>\n\n<p>However, csv file separates it into 2 cells, one before the comma and one after. </p>\n\n<p>To counter this, I am trying to make my file <code>pipe</code> delimited. </p>\n\n<p>However, I am unable to get the output. Below is my code. Please help!</p>\n\n<pre><code>names : list containing names of those who wrote a review\nrestaurant : restaurant name\nreview : list containing reviews\n\nOutput_File = open(restaurant+'.csv', 'w')\nOutput_File.write(\"Restaurant | Name | Review | \\n\")\nfor i in range(0, final):\n    Output_File.write(restaurant + '|' + names[i] + '|' + review[i] + '\\n')\nOutput_File.close()\n</code></pre>\n"}, {"tags": ["python", "altair"], "answers": [{"comments": [{"owner": {"reputation": 2970, "user_id": 1144085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d993682d7644f6709d4c810665e0f070?s=128&d=identicon&r=PG", "display_name": "ejain", "link": "https://stackoverflow.com/users/1144085/ejain"}, "edited": false, "score": 0, "creation_date": 1541985616, "post_id": 53210090, "comment_id": 93394297, "body": "If you zoom in, the red area consists of lots of vertical lines (one per x value in the data), so that wouldn&#39;t work if there were gaps in the data... <code>mark_rect</code> on the other hand does work, but appears to be overlaid once for each value, so ends up being solid even with a low opacity value..."}], "tags": [], "owner": {"reputation": 1934, "user_id": 7404750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1lT7.jpg?s=128&g=1", "display_name": "FlorianGD", "link": "https://stackoverflow.com/users/7404750/floriangd"}, "is_accepted": true, "score": 2, "last_activity_date": 1542014573, "last_edit_date": 1542014573, "creation_date": 1541688312, "answer_id": 53210090, "question_id": 53093402, "link": "https://stackoverflow.com/questions/53093402/how-to-plot-y-axis-bands-in-altair-charts/53210090#53210090", "title": "How to plot y-axis bands in Altair charts?", "body": "<p>I think the problem when you give a value with <code>alt.value</code> is that you specify the value in pixels starting from the top of the graph : it is not mapped to the data.</p>\n\n<p>In the initial answer, with <code>mark_rule</code>, it would'nt create a clean band but a lot of vertical stripes, so here is a way to correctly plot a band.</p>\n\n<p>First solution is to create a brand new data frame for the band, and layer that on top of the bars:</p>\n\n<pre><code>import altair as alt\nimport pandas as pd\nfrom vega_datasets import data\n\nweather = data('seattle_weather')\nband_df = pd.DataFrame([{'x_min': weather.date.min(),\n                         'x_max': weather.date.max(),\n                         'y_min': 20,\n                         'y_max': 50}])\n\nbars = alt.Chart(weather).mark_bar().encode(\n    x=alt.X('date:T'),\n    y=alt.Y('precipitation:Q', title=\"Precipitation\")\n)\n\nband_2 = alt.Chart(band_df).mark_rect(color='firebrick', opacity=0.3).encode(\n    x='x_min:T',\n    x2='x_max:T',\n    y='y_min:Q',\n    y2='y_max:Q'\n)\n\nalt.layer(bars, band_2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VRPF0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VRPF0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Second option, if you do not want/cannot create a dataframe, is to use <code>transform_calculate</code>, and manually specify <code>x</code> and <code>x2</code> in the band chart:</p>\n\n<pre><code>bars = alt.Chart().mark_bar().encode(\n    x=alt.X('date:T', title='Date'),\n    y=alt.Y('precipitation:Q', title=\"Precipitation\")\n)\n\nband_3 = alt.Chart().mark_rect(color='firebrick', opacity=0.3).encode(\n    x='min(date):T',\n    x2='max(date):T',\n    y='y_min:Q',\n    y2='y_max:Q'\n).transform_calculate(y_min='20', y_max='50')\n\nalt.layer(bars, band_3, data=data.seattle_weather.url)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JRANy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JRANy.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Initial answer</strong></p>\n\n<p>I would do 2 things to mimic the highchart example you gave. First, use a <code>transform_calculate</code> to set <code>y_min</code> and <code>y_max</code> values. And second, I'll use <code>mark_rule</code> so that the band span on the X axis where there are values. (I also added some opacity and changed the order of the layers so that the band is behind the bars.)</p>\n\n<pre><code>import altair as alt\nfrom vega_datasets import data\n\nweather = data.seattle_weather.url\n\nchart = alt.Chart().encode(\n    alt.X(\"date:T\")\n)\n\nbars = chart.mark_bar().encode(\n    y='precipitation:Q'\n)\n\nband = chart.mark_rule(color='firebrick',\n                       opacity=0.3).encode(\n    y=alt.Y('y_min:Q'),\n    y2=alt.Y('y_max:Q')\n).transform_calculate(y_min=\"20\",\n                      y_max=\"50\")\n\n\nalt.layer(band, bars, data=weather)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aJ9qJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aJ9qJ.png\" alt=\"altair_plot_with_band\"></a></p>\n"}], "owner": {"reputation": 2970, "user_id": 1144085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d993682d7644f6709d4c810665e0f070?s=128&d=identicon&r=PG", "display_name": "ejain", "link": "https://stackoverflow.com/users/1144085/ejain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 1, "accepted_answer_id": 53210090, "answer_count": 1, "score": 1, "last_activity_date": 1542014573, "creation_date": 1541029630, "last_edit_date": 1541029952, "question_id": 53093402, "link": "https://stackoverflow.com/questions/53093402/how-to-plot-y-axis-bands-in-altair-charts", "title": "How to plot y-axis bands in Altair charts?", "body": "<p>Can Altair plot bands on the y axis, similar to <a href=\"https://www.highcharts.com/stock/demo/yaxis-plotbands\" rel=\"nofollow noreferrer\">this Highcharts example</a>?</p>\n\n<p>The docs have <a href=\"https://altair-viz.github.io/gallery/selection_layer_bar_month.html\" rel=\"nofollow noreferrer\">an example</a> showing how to draw a line on the y axis, but adapting the example to use <code>plot_rect</code> to draw a band instead doesn't quite work:</p>\n\n<pre><code>import altair as alt\nfrom vega_datasets import data\n\nweather = data.seattle_weather.url\n\nchart = alt.Chart(weather).encode(\n    alt.X(\"date:T\")\n)\n\nbars = chart.mark_bar().encode(\n    y='precipitation:Q'\n)\n\nband = chart.mark_rect().encode(\n    y=alt.value(20),\n    y2=alt.value(50),\n    color=alt.value('firebrick')\n)\n\nalt.layer(bars, band)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BCzXU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BCzXU.png\" alt=\"plot_rect with fixed y and y2\"></a></p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541030664, "post_id": 53093347, "comment_id": 93083788, "body": "<code>polygon</code> has not been added to the axes. Instead <code>collection</code> is the artist in the axes. At this point you need to decide: Do you really need a <code>PatchCollection</code> or are you happy with updating the patch (without collection). Unfortunately the solutions would be very different, so it would help to know more about the purpose of this."}, {"owner": {"reputation": 852, "user_id": 2047110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e0574581ed2d55fe55d16d0ca75441f?s=128&d=identicon&r=PG", "display_name": "Henrique Ferrolho", "link": "https://stackoverflow.com/users/2047110/henrique-ferrolho"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541035781, "post_id": 53093347, "comment_id": 93084804, "body": "I am happy with updating the patch for now, but am very curious to know how to do it if I had to plot multiple patches too."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541036781, "post_id": 53093347, "comment_id": 93085007, "body": "I suppose in the case of a collection you need to fall back to subclass <code>PatchCollection</code> as shown <a href=\"https://stackoverflow.com/questions/10903554/matplotlib-change-a-patch-in-patchcollection\">here</a>."}, {"owner": {"reputation": 852, "user_id": 2047110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e0574581ed2d55fe55d16d0ca75441f?s=128&d=identicon&r=PG", "display_name": "Henrique Ferrolho", "link": "https://stackoverflow.com/users/2047110/henrique-ferrolho"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541082085, "post_id": 53093347, "comment_id": 93101704, "body": "@ImportanceOfBeingErnest I have tried that example but the plot only displays the last state of the collection. I want to be able to show it as it changes, frame by frame. For some reason none of <code>plt.draw()</code>, <code>fig.canvas.draw()</code>, or <code>fig.canvas.flush_events()</code> seem to make it work..."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541082700, "post_id": 53093347, "comment_id": 93102046, "body": "To create an animation you may use the <code>FuncAnimation</code> class."}, {"owner": {"reputation": 852, "user_id": 2047110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e0574581ed2d55fe55d16d0ca75441f?s=128&d=identicon&r=PG", "display_name": "Henrique Ferrolho", "link": "https://stackoverflow.com/users/2047110/henrique-ferrolho"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541082760, "post_id": 53093347, "comment_id": 93102078, "body": "I can&#39;t use this because I have no control over the rate at which <code>callback()</code> is called..."}, {"owner": {"reputation": 852, "user_id": 2047110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e0574581ed2d55fe55d16d0ca75441f?s=128&d=identicon&r=PG", "display_name": "Henrique Ferrolho", "link": "https://stackoverflow.com/users/2047110/henrique-ferrolho"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541082853, "post_id": 53093347, "comment_id": 93102135, "body": "@ImportanceOfBeingErnest nevermind, I think I got it to work by enabling <code>plt.ion()</code>!"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541082904, "post_id": 53093347, "comment_id": 93102171, "body": "Ok, would it be possible to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the issue? Possibly you can use a <code>button_press_event</code> to trigger the callback for that purpose."}, {"owner": {"reputation": 852, "user_id": 2047110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e0574581ed2d55fe55d16d0ca75441f?s=128&d=identicon&r=PG", "display_name": "Henrique Ferrolho", "link": "https://stackoverflow.com/users/2047110/henrique-ferrolho"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541083103, "post_id": 53093347, "comment_id": 93102281, "body": "@ImportanceOfBeingErnest working on it! Will answer this question when ready :)"}], "answers": [{"tags": [], "owner": {"reputation": 852, "user_id": 2047110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e0574581ed2d55fe55d16d0ca75441f?s=128&d=identicon&r=PG", "display_name": "Henrique Ferrolho", "link": "https://stackoverflow.com/users/2047110/henrique-ferrolho"}, "is_accepted": true, "score": 1, "last_activity_date": 1541084375, "creation_date": 1541084375, "answer_id": 53103861, "question_id": 53093347, "link": "https://stackoverflow.com/questions/53093347/dynamically-update-plot-of-patches-without-artistanimations-in-matplotlib/53103861#53103861", "title": "Dynamically update plot of patches without ArtistAnimations in matplotlib", "body": "<p>OK, I modified <a href=\"https://stackoverflow.com/questions/10903554/matplotlib-change-a-patch-in-patchcollection\">this example</a> slightly (which makes use of an <code>UpdatablePatchCollection</code>) and it works now.</p>\n\n<p>Here is a working minimal example:</p>\n\n<pre><code>%matplotlib notebook  # Use this on Jupyter Notebooks\n\nimport matplotlib.collections as mcollections\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nimport time\n\n\nclass UpdatablePatchCollection(mcollections.PatchCollection):\n    def __init__(self, patches, *args, **kwargs):\n        self.patches = patches\n        mcollections.PatchCollection.__init__(self, patches, *args, **kwargs)\n\n    def get_paths(self):\n        self.set_paths(self.patches)\n        return self._paths\n\n\nplt.ion()\n\nrect = mpl.patches.Rectangle((0,0),1,1)\ncollection = UpdatablePatchCollection([rect])\n\nfig, ax = plt.subplots()\n\nax.set_xlim(0,5)\nax.set_ylim(0,3)\n\nax.add_artist(collection)\n\n\ndef update_plot(i):\n    rect.set_xy((i,1))\n\n    fig.canvas.draw()\n    fig.canvas.flush_events()\n\n\nfor i in range(5):\n    time.sleep(0.5)\n    update_plot(i)\n</code></pre>\n\n<p>This part is important to \"<em>render</em>\" each frame.</p>\n\n<pre><code>fig.canvas.draw()\nfig.canvas.flush_events()\n</code></pre>\n\n<p>And notice the important <code>plt.ion()</code> call. Without it, the plot will not interactively animate the changes to the patch collection.</p>\n"}], "owner": {"reputation": 852, "user_id": 2047110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2e0574581ed2d55fe55d16d0ca75441f?s=128&d=identicon&r=PG", "display_name": "Henrique Ferrolho", "link": "https://stackoverflow.com/users/2047110/henrique-ferrolho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 53103861, "answer_count": 1, "score": 1, "last_activity_date": 1541084375, "creation_date": 1541029062, "question_id": 53093347, "link": "https://stackoverflow.com/questions/53093347/dynamically-update-plot-of-patches-without-artistanimations-in-matplotlib", "title": "Dynamically update plot of patches without ArtistAnimations in matplotlib", "body": "<p>I have an external service that, every now and then, triggers the function <code>callback(points)</code> \u2014 check the code below \u2014 in order to update a <strong>Polygon</strong> patch being plotted with <code>matplotlib</code>.</p>\n\n<pre><code>fig, ax = plt.subplots()\n\npolygon = Polygon([[0, 0]])\n\npatches = []\npatches.append(polygon)\n\ncollection = PatchCollection(patches, animated=True, alpha=0.4)\n\nax.add_collection(collection)\nax.autoscale_view(True)\n\nplt.show()\n\n\ndef callback(points):\n    polygon.set_xy(points)\n\n    fig.canvas.draw()\n    fig.canvas.flush_events()\n</code></pre>\n\n<p>However, this is not working... The plot is not being updated. Are <code>canvas.draw</code> and <code>canvas.flush_events</code> not the right things to call?</p>\n\n<p>I have seen other examples on the web which use <code>ArtistAnimation</code> but I cannot use this since I cannot simulate my inputs; rather, they are coming from the external service that calls <code>callback()</code>.</p>\n\n<p>How can I make this work? Thanks!</p>\n"}, {"tags": ["python", "substitution", "prometheus"], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "edited": false, "score": 0, "creation_date": 1541176372, "post_id": 53093407, "comment_id": 93139535, "body": "I tried this and it didn&#39;t work. Are you talking C or C++? I created a simple list ([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;]) and when I try print *list, it comes back with invalid syntax. I&#39;m out of hot water since I found another solution, but would still be nice to know how to do it for future reference. Thx."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "edited": false, "score": 1, "creation_date": 1541180641, "post_id": 53093407, "comment_id": 93141616, "body": "Nope this is python! The <code>*</code> operator unpacks a list or tuple but works only when passed as a function argument. See here for more details: <a href=\"https://stackoverflow.com/questions/2921847/what-does-the-star-operator-mean\" title=\"what does the star operator mean\">stackoverflow.com/questions/2921847/&hellip;</a> I also updated my answer with a small example."}], "tags": [], "owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "is_accepted": true, "score": 2, "last_activity_date": 1541180738, "last_edit_date": 1541180738, "creation_date": 1541029675, "answer_id": 53093407, "question_id": 53093336, "link": "https://stackoverflow.com/questions/53093336/how-to-use-variable-in-parenthesis-verbatim/53093407#53093407", "title": "How to use variable in parenthesis verbatim", "body": "<p>This is exactly where the <code>*</code> comes in handy. It unpacks the values of a list.</p>\n\n<p>Try:</p>\n\n<pre><code>list_of_labels = list(labels.values())\ng.labels(*list_of_labels).set(val)\n</code></pre>\n\n<p>Here's an example of how <code>*</code> works in python</p>\n\n<pre><code>def f(a, b):\n    print a, b\n\ntup = (\"Hello\", \"there\")\n\nf(*tup)\n# prints \"Hello there\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "edited": false, "score": 0, "creation_date": 1541176610, "post_id": 53093873, "comment_id": 93139642, "body": "Thx for your input. This won&#39;t work as the label list can vary in size. Sometimes it might be 2 parameters, sometimes more. That&#39;s why I was looking for a more flexible approach."}], "tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": false, "score": 0, "last_activity_date": 1541033954, "creation_date": 1541033954, "answer_id": 53093873, "question_id": 53093336, "link": "https://stackoverflow.com/questions/53093336/how-to-use-variable-in-parenthesis-verbatim/53093873#53093873", "title": "How to use variable in parenthesis verbatim", "body": "<p>another solution is just to unpack on the fly:</p>\n\n<pre><code>hostname, ipaddr = labels.values()\ng.labels(hostname, ipaddr).set(val)\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 53093407, "answer_count": 2, "score": 1, "last_activity_date": 1541180738, "creation_date": 1541028994, "question_id": 53093336, "link": "https://stackoverflow.com/questions/53093336/how-to-use-variable-in-parenthesis-verbatim", "title": "How to use variable in parenthesis verbatim", "body": "<p>I have a strange problem and was hoping to find a solution here. I am using push_to_gateway module to allow Prometheus to scape some data. There are 2 steps to the process:</p>\n\n<p>1) declare a variable as like so:</p>\n\n<pre><code>g = Gauge(ctr, '', ['host', 'ip'], registry=registry)\n</code></pre>\n\n<p>host and ip are labels used in the Prometheus DB. registry isn't relevant to my problem.</p>\n\n<p>2) Populate the data:</p>\n\n<pre><code>g.labels(hostname, ipaddr).set(val)\n</code></pre>\n\n<p>hostname and ipaddr are the variables containing values</p>\n\n<p>When you look at the data in Prometheus,  you'll see something like:</p>\n\n<pre><code>ctr{hostname=\"node1\",ip=\"1.1.1.1\"} -1 \n</code></pre>\n\n<p>Since I have thousands of counters to import into Prometheus, and all of them have different sets of labels, I want to create an ordereddict containing the labels and their values while parsing the data and using that to generate 1) and 2). Filling part 1) is easy. I just type:</p>\n\n<pre><code>g = Gauge(ctr, '', list(labels.keys()), registry=registry)\n</code></pre>\n\n<p>The line is expecting a list, and it gets a list.</p>\n\n<p>But how can I fill in part 2) since the g.labels is expecting the hostname and ipaddr seperated by a ',' (ie not a list). If I do list(labels.values()), then it shows up as a list inside the parenthesis and that doesn't work. I need the list(labels.values()) to expand to exactly 'node1','1.1.1.1' inside the parenthesis for this to work, and I have no clue how to do it (if at all possible) so that 2) looks like:</p>\n\n<pre><code>g.labels('node1', '1.1.1.1').set(val)\n</code></pre>\n\n<p>Thx</p>\n"}, {"tags": ["python", "import", "module"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541029361, "post_id": 53093308, "comment_id": 93083535, "body": "Your error appears to be completely unrelated to the rest of your question."}, {"owner": {"reputation": 2779, "user_id": 3403428, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3fb1fae9a6a4388a14ddd0411f072b42?s=128&d=identicon&r=PG&f=1", "display_name": "DJMcCarthy12", "link": "https://stackoverflow.com/users/3403428/djmccarthy12"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541029427, "post_id": 53093308, "comment_id": 93083546, "body": "I thought that as well, but it is for sure failing during the line where I import yaml, so was thinking maybe I missed something and the module isn&#39;t importing properly."}, {"owner": {"reputation": 254, "user_id": 4869107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51301129584adcec939774922e9d2be2?s=128&d=identicon&r=PG&f=1", "display_name": "Colby Hunter", "link": "https://stackoverflow.com/users/4869107/colby-hunter"}, "edited": false, "score": 0, "creation_date": 1541029447, "post_id": 53093308, "comment_id": 93083551, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11436777/is-there-a-way-to-embed-dependencies-within-a-python-script\">Is there a way to embed dependencies within a python script?</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541029540, "post_id": 53093308, "comment_id": 93083565, "body": "The first thing you should do is include the full traceback"}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "edited": false, "score": 0, "creation_date": 1541029911, "post_id": 53093308, "comment_id": 93083624, "body": "Can you update your question to show us the full stack trace and error message?"}, {"owner": {"reputation": 2779, "user_id": 3403428, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3fb1fae9a6a4388a14ddd0411f072b42?s=128&d=identicon&r=PG&f=1", "display_name": "DJMcCarthy12", "link": "https://stackoverflow.com/users/3403428/djmccarthy12"}, "reply_to_user": {"reputation": 254, "user_id": 4869107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51301129584adcec939774922e9d2be2?s=128&d=identicon&r=PG&f=1", "display_name": "Colby Hunter", "link": "https://stackoverflow.com/users/4869107/colby-hunter"}, "edited": false, "score": 0, "creation_date": 1541030254, "post_id": 53093308, "comment_id": 93083696, "body": "Unfortunately the code I&#39;m writing is getting plugged into a larger project, and everything I&#39;m writing is wrapped in a try/except. I realize that hinders the ability to answer the question - sorry about that. perhaps I can make use of @ColbyHunter&#39;s suggestion and try using eggs. Thanks for all the responses guys."}], "owner": {"reputation": 2779, "user_id": 3403428, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3fb1fae9a6a4388a14ddd0411f072b42?s=128&d=identicon&r=PG&f=1", "display_name": "DJMcCarthy12", "link": "https://stackoverflow.com/users/3403428/djmccarthy12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541028763, "creation_date": 1541028763, "question_id": 53093308, "link": "https://stackoverflow.com/questions/53093308/import-local-copy-of-python-module", "title": "Import local copy of python module", "body": "<p>I have a basic question about how to package a python script with a local copy of a module, in this case the <code>yaml</code> module, so that i can run it on another machine and not have to download/install the module.</p>\n\n<p>I tried taking the 'yaml' directory from the repo on github, putting it in the root of my python script, and simply running an import statement, but that doesn't seem to work; when i run <code>import yaml</code> or <code>from yaml import load</code>, my script fails with exception <code>unexpected token '='</code>.</p>\n\n<p>I'm sure that I'm missing something obvious, but I wasn't able to find a clear answer by looking around for a bit. Any help would be appreciated.</p>\n"}, {"tags": ["python", "html", "beautifulsoup", "web-crawler", "instagram"], "comments": [{"owner": {"reputation": 3844, "user_id": 833881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856cdb57da6d0b4758d597d30602fcd8?s=128&d=identicon&r=PG", "display_name": "kungphu", "link": "https://stackoverflow.com/users/833881/kungphu"}, "edited": false, "score": 1, "creation_date": 1541042804, "post_id": 53093262, "comment_id": 93086156, "body": "You may want to look into <a href=\"https://selenium-python.readthedocs.io/waits.html\" rel=\"nofollow noreferrer\"><code>WebdriverWait</code></a> to make sure the driver is giving the page enough time to load."}, {"owner": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1541049227, "post_id": 53093262, "comment_id": 93087308, "body": "just wait until some element load finish. But you may try several time on different locate function"}], "owner": {"reputation": 11, "user_id": 10588479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ROVvpCnpjMY/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAxx_4wLaocjqmcL6sFrKXYsKCvnw/mo/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/10588479/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1580597509, "creation_date": 1541028426, "last_edit_date": 1580597509, "question_id": 53093262, "link": "https://stackoverflow.com/questions/53093262/no-data-retrieved-from-instagram", "title": "No data retrieved from instagram", "body": "<p>Since Instagram API is not working, I am trying to crawl information of a given hashtag. On the search page of Hash-Tag, it has Ajax embedded, so I followed rules online to look for url where the data is retrieved. Then I have the following link.</p>\n\n<p><a href=\"https://www.instagram.com/graphql/query/?query_hash=f92f56d47dc7a55b606908374b43a314&amp;variables=%7B%22tag_name%22%3A%22cancun%22%2C%22show_ranked%22%3Afalse%2C%22first%22%3A20%2C%22after%22%3A%22QVFENlVELW9hZjlJVWU1RWd6anpWdGNsYkVwU3M5TzUtaDlRN3VoRHlwU1EwWWRBZ2t6TFkzbEl1M3RRcmItd0JKbVBiM2pLUXZpT0JzNWp3dFhIcElfWg%3D%3D%22%7D\" rel=\"nofollow noreferrer\">https://www.instagram.com/graphql/query/?query_hash=f92f56d47dc7a55b606908374b43a314&amp;variables=%7B%22tag_name%22%3A%22cancun%22%2C%22show_ranked%22%3Afalse%2C%22first%22%3A20%2C%22after%22%3A%22QVFENlVELW9hZjlJVWU1RWd6anpWdGNsYkVwU3M5TzUtaDlRN3VoRHlwU1EwWWRBZ2t6TFkzbEl1M3RRcmItd0JKbVBiM2pLUXZpT0JzNWp3dFhIcElfWg%3D%3D%22%7D</a></p>\n\n<p>However, When I am trying crawl that page using Urlopen, Instagram blocked my crawler. I tried to use User-Agent to get around it, and it is not working.\nThen I tried to use Webdriver to fake the browser, it gets around the blockage, but I don't get anything from the crawling. \nDoes anyone know what is wrong with that.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from bs4 import BeautifulSoup\nfrom selenium import webdriver\n\noptions = webdriver.ChromeOptions()\noptions.add_argument('headless') \ndriver.get(url)\npagesource = driver.page_source\nbsObj = BeautifulSoup(pagesource,'html.parser')\nprint(bsObj.prettify())\n</code></pre>\n\n<p>Appreciate any Help!</p>\n"}, {"tags": ["python", "signal-processing", "detection", "timing", "pyaudio"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 1, "creation_date": 1541058952, "post_id": 53093247, "comment_id": 93090368, "body": "Whether on Windows or Linux PC/Raspberry Pi, expecting sub-millisecond timing accuracy from user-space applications (i.e. not just Python) you are going to be disappointed because your PC has many things to do and is aimed at human-scale responsiveness. The simple limitation is your operating system. But if the audio sampling itself has dedicated hardware then perhaps by carefully tracking the time when samples were taken and keeping this information with the sample, when your code detects a peak this can be related to when the samples were taken to calculate an \u201cactual\u201d time for the event."}, {"owner": {"reputation": 61, "user_id": 4301873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPrjW.jpg?s=128&g=1", "display_name": "Terraviper-5", "link": "https://stackoverflow.com/users/4301873/terraviper-5"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1541086453, "post_id": 53093247, "comment_id": 93104171, "body": "@barny So switching to C++ and giving process high priority would probably not help either? I&#39;m not sure how the sampling is done, you mean if I use external soundcard instead of integrated one it might have an impact on timing? Main reason I used PC instead of a microcontroller is because I was planning on using an algorithm for peak detection that can be a bit challenging for MCU to complete in desired time interval."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1541101374, "post_id": 53093247, "comment_id": 93111895, "body": "Unlikely high priority will make much difference, all user-space apps will be interrupted by everything going on with interrupt-driven I/O to disks, USB, etc. I don\u2019t know how soundcards do sampling but yes I\u2019d have thought it should be possible for them to relate the detection time to the sample. Did you try calculating the timing based on the samples rather than when your code detects the peak?"}, {"owner": {"reputation": 61, "user_id": 4301873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPrjW.jpg?s=128&g=1", "display_name": "Terraviper-5", "link": "https://stackoverflow.com/users/4301873/terraviper-5"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1541184965, "post_id": 53093247, "comment_id": 93143426, "body": "@barny Yes, thank you, I now based timing on samples rather than time library and results are already much more accurate, down to a millisecond"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4301873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPrjW.jpg?s=128&g=1", "display_name": "Terraviper-5", "link": "https://stackoverflow.com/users/4301873/terraviper-5"}, "edited": false, "score": 0, "creation_date": 1541177761, "post_id": 53106633, "comment_id": 93140307, "body": "Thank you for this in-depth explanation. I have changed the algorithm accordingly and am now using sound card&#39;s timing and larger chunks. I will post results in after original question to be able to explain what I did with code sample and add results"}, {"owner": {"reputation": 61, "user_id": 4301873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPrjW.jpg?s=128&g=1", "display_name": "Terraviper-5", "link": "https://stackoverflow.com/users/4301873/terraviper-5"}, "edited": false, "score": 0, "creation_date": 1541178355, "post_id": 53106633, "comment_id": 93140602, "body": "My intention was to present user with real-time data, but not every millisecond, but just so often that it looks real-time to a human eye. It was my mistake to confuse accuracy and real-time responsiveness, thank you for clearing that up"}, {"owner": {"reputation": 60033, "user_id": 102302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd9c8a33bbb45d398ad8777e619c7a3?s=128&d=identicon&r=PG", "display_name": "tom10", "link": "https://stackoverflow.com/users/102302/tom10"}, "reply_to_user": {"reputation": 61, "user_id": 4301873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPrjW.jpg?s=128&g=1", "display_name": "Terraviper-5", "link": "https://stackoverflow.com/users/4301873/terraviper-5"}, "edited": false, "score": 0, "creation_date": 1541262300, "post_id": 53106633, "comment_id": 93159793, "body": "@Terraviper-5: Great to hear it all worked, and thanks for posting the fix and resulting data. As you may know, and if needed, your analysis will run much faster using numpy (but that would be a separate question, of course)."}], "tags": [], "owner": {"reputation": 60033, "user_id": 102302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd9c8a33bbb45d398ad8777e619c7a3?s=128&d=identicon&r=PG", "display_name": "tom10", "link": "https://stackoverflow.com/users/102302/tom10"}, "is_accepted": true, "score": 4, "last_activity_date": 1541108280, "last_edit_date": 1541108280, "creation_date": 1541094376, "answer_id": 53106633, "question_id": 53093247, "link": "https://stackoverflow.com/questions/53093247/how-to-get-accurate-timing-using-microphone-in-python/53106633#53106633", "title": "How to get accurate timing using microphone in python", "body": "<p>The reason you're not getting the right timing for the beats is that you're missing chunks of the audio data.  That is, <strong>the chunks are being read by the soundcard, but you're not collecting the data before it's overwritten with the next chunk</strong>.</p>\n\n<p>First, though, for this problem you need to distinguish between the ideas of <strong>timing accuracy</strong> and <strong>real-time response</strong>.</p>\n\n<p>The timing accuracy of a sound card should be very good, much better than a ms, and you should be able to capture all of this accuracy in the data you read from the soundcard.  The real-time responsiveness of your computer's OS should be very bad, much worse than a ms.  <strong>That is, you should easily be able to identify audio events (such as beats) to within a ms, but not identify them at the time they happen (instead, 30-200ms later depending on your system).</strong>  This arrangement usually works for computers because general human perception of the timing of events is much greater than a ms (except for rare specialized percepetual systems, like comparing auditory events between the two ears, etc).</p>\n\n<p>The specific problem with your code is that <code>CHUNKS</code> is much too small for the OS to query the sound card at each sample.  You have it at 32, so at 44100Hz, the OS needs to get to the sound card every 0.7ms, which is too short of a time for a computer that's tasked with doing many other things.  If you OS doesn't get the chunk before the next one comes in, the original chunk is overwritten and lost.</p>\n\n<p>To get this working so it's consistent with the constraints above, make <code>CHUNKS</code> much larger than <code>32</code>, and more like <code>1024</code> (as in the PyAudio examples).  Depending on your computer and what it's doing, even that my not be long enough.</p>\n\n<p>If this type of approach won't work for you, you will probably need a dedicated real-time system like an Arduino.  (Generally, though, this isn't necessary, so think twice before you decide that you need to use the Arduino.  Usually, when I've seen people need true real-time it's when trying to do something very quantitave interactive with the human, like flash a light, have the person tap a button, flash another light, have the person tap another button, etc, to measure response times.)</p>\n"}], "owner": {"reputation": 61, "user_id": 4301873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPrjW.jpg?s=128&g=1", "display_name": "Terraviper-5", "link": "https://stackoverflow.com/users/4301873/terraviper-5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 1, "accepted_answer_id": 53106633, "answer_count": 1, "score": 3, "last_activity_date": 1541279643, "creation_date": 1541028288, "last_edit_date": 1541279643, "question_id": 53093247, "link": "https://stackoverflow.com/questions/53093247/how-to-get-accurate-timing-using-microphone-in-python", "title": "How to get accurate timing using microphone in python", "body": "<p>I'm trying to make beat detection using PC microphone and then with timestamp of beat calculate distance between multiple successive beats. I have chosen python because there is plenty of material available and it's quick to develop. By searching the internet I have come up with this simple code (no advanced peak detection or anything yet, this comes later if need be):</p>\n\n<pre><code>import pyaudio\nimport struct\nimport math\nimport time\n\n\nSHORT_NORMALIZE = (1.0/32768.0)\n\n\ndef get_rms(block):\n    # RMS amplitude is defined as the square root of the\n    # mean over time of the square of the amplitude.\n    # so we need to convert this string of bytes into\n    # a string of 16-bit samples...\n\n    # we will get one short out for each\n    # two chars in the string.\n    count = len(block)/2\n    format = \"%dh\" % (count)\n    shorts = struct.unpack(format, block)\n\n    # iterate over the block.\n    sum_squares = 0.0\n    for sample in shorts:\n        # sample is a signed short in +/- 32768.\n        # normalize it to 1.0\n        n = sample * SHORT_NORMALIZE\n        sum_squares += n*n\n\n    return math.sqrt(sum_squares / count)\n\n\nCHUNK = 32\nFORMAT = pyaudio.paInt16\nCHANNELS = 1\nRATE = 44100\n\np = pyaudio.PyAudio()\n\nstream = p.open(format=FORMAT,\n                channels=CHANNELS,\n                rate=RATE,\n                input=True,\n                frames_per_buffer=CHUNK)\n\nelapsed_time = 0\nprev_detect_time = 0\n\nwhile True:\n    data = stream.read(CHUNK)\n    amplitude = get_rms(data)\n    if amplitude &gt; 0.05:  # value set by observing graphed data captured from mic\n        elapsed_time = time.perf_counter() - prev_detect_time\n        if elapsed_time &gt; 0.1:  # guard against multiple spikes at beat point\n            print(elapsed_time)\n            prev_detect_time = time.perf_counter()\n\ndef close_stream():\n  stream.stop_stream()\n  stream.close()\n  p.terminate()\n</code></pre>\n\n<p>The code works pretty good in silence, and I have been pretty satisfied the first two moments I ran it, but then I tried how accurate it was and I was a little bit less satisfied. To test this I used two methods: phone with metronome set to 60bpm (emits tic toc sounds into microphone) and an Arduino hooked to a beeper, which is triggered at 1Hz rate by accurate Chronodot RTC. The beeper beeps into microphone, triggering a detection. With both methods results look similar (numbers represent distance between two beat detections in seconds):</p>\n\n<pre><code>0.9956681643835616\n1.0056331689497717\n0.9956100091324198\n1.0058207853881278\n0.9953449497716891\n1.0052103013698623\n1.0049350136986295\n0.9859074337899543\n1.004996383561644\n0.9954095342465745\n1.0061518904109583\n0.9953025753424658\n1.0051235068493156\n1.0057199634703196\n0.984839305936072\n1.00610396347032\n0.9951862648401821\n1.0053146301369864\n0.9960100821917806\n1.0053391780821919\n0.9947373881278523\n1.0058608219178105\n1.0056580091324214\n0.9852110319634697\n1.0054473059360731\n0.9950465753424638\n1.0058237077625556\n0.995704694063928\n1.0054566575342463\n0.9851026118721435\n1.0059882374429243\n1.0052523835616398\n0.9956161461187207\n1.0050863926940607\n0.9955758173515932\n1.0058052968036577\n0.9953960913242028\n1.0048014611872205\n1.006336876712325\n0.9847434520547935\n1.0059712876712297\n</code></pre>\n\n<p>Now I'm pretty confident that at least Arduino is accurate to 1 msec (which is targeted accuracy). The results tend to be off by +- 5msec, but now and then even 15ms, which is unacceptable. Is there a way to achieve greater accuracy or is this limitation of python / soundcard / something else? Thank you!</p>\n\n<p>EDIT:\nAfter incorporating tom10 and barny's suggestions into the code, the code looks like this:</p>\n\n<pre><code>import pyaudio\nimport struct\nimport math\nimport psutil\nimport os\n\n\ndef set_high_priority():\n    p = psutil.Process(os.getpid())\n    p.nice(psutil.HIGH_PRIORITY_CLASS)\n\n\nSHORT_NORMALIZE = (1.0/32768.0)\n\n\ndef get_rms(block):\n    # RMS amplitude is defined as the square root of the\n    # mean over time of the square of the amplitude.\n    # so we need to convert this string of bytes into\n    # a string of 16-bit samples...\n\n    # we will get one short out for each\n    # two chars in the string.\n    count = len(block)/2\n    format = \"%dh\" % (count)\n    shorts = struct.unpack(format, block)\n\n    # iterate over the block.\n    sum_squares = 0.0\n    for sample in shorts:\n        # sample is a signed short in +/- 32768.\n        # normalize it to 1.0\n        n = sample * SHORT_NORMALIZE\n        sum_squares += n*n\n\n    return math.sqrt(sum_squares / count)\n\n\nCHUNK = 4096\nFORMAT = pyaudio.paInt16\nCHANNELS = 1\nRATE = 44100\nRUNTIME_SECONDS = 10\n\nset_high_priority()\n\np = pyaudio.PyAudio()\n\nstream = p.open(format=FORMAT,\n                channels=CHANNELS,\n                rate=RATE,\n                input=True,\n                frames_per_buffer=CHUNK)\n\nelapsed_time = 0\nprev_detect_time = 0\nTIME_PER_CHUNK = 1000 / RATE * CHUNK\nSAMPLE_GROUP_SIZE = 32  # 1 sample = 2 bytes, group is closest to 1 msec elapsing\nTIME_PER_GROUP = 1000 / RATE * SAMPLE_GROUP_SIZE\n\nfor i in range(0, int(RATE / CHUNK * RUNTIME_SECONDS)):\n    data = stream.read(CHUNK)\n    time_in_chunk = 0\n    group_index = 0\n    for j in range(0, len(data), (SAMPLE_GROUP_SIZE * 2)):\n        group = data[j:(j + (SAMPLE_GROUP_SIZE * 2))]\n        amplitude = get_rms(group)\n        amplitudes.append(amplitude)\n        if amplitude &gt; 0.02:\n            current_time = (elapsed_time + time_in_chunk)\n            time_since_last_beat = current_time - prev_detect_time\n            if time_since_last_beat &gt; 500:\n                print(time_since_last_beat)\n                prev_detect_time = current_time\n        time_in_chunk = (group_index+1) * TIME_PER_GROUP\n        group_index += 1\n    elapsed_time = (i+1) * TIME_PER_CHUNK\n\nstream.stop_stream()\nstream.close()\np.terminate()\n</code></pre>\n\n<p>With this code I achieved the following results (units are this time milliseconds instead of seconds):</p>\n\n<pre><code>999.909297052154\n999.9092970521542\n999.9092970521542\n999.9092970521542\n999.9092970521542\n1000.6349206349205\n999.9092970521551\n999.9092970521524\n999.9092970521542\n999.909297052156\n999.9092970521542\n999.9092970521542\n999.9092970521524\n999.9092970521542\n</code></pre>\n\n<p>Which, if I didn't make any mistake, looks a lot better than before and has achieved sub-millisecond accuracy. I thank tom10 and barny for their help.</p>\n"}, {"tags": ["python", "list", "indexing"], "comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1541028487, "post_id": 53093244, "comment_id": 93083293, "body": "This is a dictionary not a list. That aside, just do <code>for i in s[&#39;5ogb.pdb&#39;]: print(i[0])</code>"}, {"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541028499, "post_id": 53093244, "comment_id": 93083300, "body": "your original object is <code>dict</code> of <code>list</code> not a <code>list</code>"}], "answers": [{"tags": [], "owner": {"reputation": 305, "user_id": 4451640, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de3ec20fa1bb40b072f6d8187ae1971d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4451640/tyler"}, "is_accepted": false, "score": 0, "last_activity_date": 1541028503, "creation_date": 1541028503, "answer_id": 53093273, "question_id": 53093244, "link": "https://stackoverflow.com/questions/53093244/indexing-a-list-in-python-and-looping-through-these/53093273#53093273", "title": "Indexing a list in python and looping through these", "body": "<p>You currently have a dictionary that has one key-value pair. Get the list by saying <code>dict[key]</code> and you can loop through it with like this:</p>\n\n<pre><code>for list1, list2 in zip(dict[key][0], dict[key][1]):\n    #more code\n</code></pre>\n\n<p><code>zip()</code> lets you iterate through both lists at the same time.</p>\n"}, {"tags": [], "owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "is_accepted": true, "score": 2, "last_activity_date": 1541029094, "last_edit_date": 1541029094, "creation_date": 1541028647, "answer_id": 53093292, "question_id": 53093244, "link": "https://stackoverflow.com/questions/53093244/indexing-a-list-in-python-and-looping-through-these/53093292#53093292", "title": "Indexing a list in python and looping through these", "body": "<p>You can just loop through your <code>dict</code> (yes its a dictionary not a `list), and print first item,</p>\n\n<pre><code>x = {'5ogb.pdb': [[['ASN', 15.0, 'A'], 8.0], [['ASN', 26.0, 'A'], 12.0]]} \nfor list_object in x['5ogb.pdb']:\n        print(list_object[0])\n\n# output,\n['ASN', 15.0, 'A']\n['ASN', 26.0, 'A']\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 9518837, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Haj Sai", "link": "https://stackoverflow.com/users/9518837/haj-sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 53093292, "answer_count": 2, "score": 1, "last_activity_date": 1541029094, "creation_date": 1541028268, "question_id": 53093244, "link": "https://stackoverflow.com/questions/53093244/indexing-a-list-in-python-and-looping-through-these", "title": "Indexing a list in python and looping through these", "body": "<p>I have a list:</p>\n\n<pre><code>{'5ogb.pdb': [[['ASN', 15.0, 'A'], 8.0], [['ASN', 26.0, 'A'], 12.0]]} \n</code></pre>\n\n<p>and I am trying to loop through the:</p>\n\n<pre><code>['ASN', 15.0, 'A'] and ['ASN', 26.0, 'A']\n</code></pre>\n\n<p>How do I index to be able to loop through only these values?</p>\n"}, {"tags": ["python", "memory", "readline", "sampling"], "answers": [{"comments": [{"owner": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "edited": false, "score": 0, "creation_date": 1541031984, "post_id": 53093349, "comment_id": 93084066, "body": "Thank you for the clear explanation! Unfortunately, this approach resulted in the same memory error..."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "edited": false, "score": 0, "creation_date": 1541033970, "post_id": 53093349, "comment_id": 93084436, "body": "Ah, I think I found the error. I ran just this line in my interpreter and the memory usage spiked <code>samples = random.sample(range(1, 264000000), 1000)</code>. Try my edited code instead. I also updated my answer with a reason as to why this line might cause a memory error."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "edited": false, "score": 0, "creation_date": 1541039158, "post_id": 53093349, "comment_id": 93085486, "body": "Actually, are you running python2 or python3?"}, {"owner": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "edited": false, "score": 0, "creation_date": 1541064765, "post_id": 53093349, "comment_id": 93092726, "body": "I use Python 3. Still, the process starts using over 6GB of RAM (out of the 8 that I have), then it starts to slow down, until it throws another memory error..."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "edited": false, "score": 0, "creation_date": 1541092603, "post_id": 53093349, "comment_id": 93107651, "body": "Ok, in python3 <code>samples = random.sample(range(1, 264000000), 1000)</code> should be fine anyway. That runs quickly on my machine. Was original comment regarded python2 which uses more naive <code>range</code> function. I&#39;m going to access a larger machine today to run some tests, I&#39;ll respond again later."}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "edited": false, "score": 0, "creation_date": 1541092655, "post_id": 53093349, "comment_id": 93107669, "body": "It may be helpful to know at what line in your program you get the error? Could you edit your response to include the full error output?"}, {"owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "reply_to_user": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "edited": false, "score": 0, "creation_date": 1541096759, "post_id": 53093349, "comment_id": 93109723, "body": "What type of system are you on (Windows?) Also looks like you&#39;re running iPython Notebooks, correct?"}], "tags": [], "owner": {"reputation": 784, "user_id": 6064179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a75261a58000618815040627fab24c?s=128&d=identicon&r=PG&f=1", "display_name": "killian95", "link": "https://stackoverflow.com/users/6064179/killian95"}, "is_accepted": false, "score": 0, "last_activity_date": 1541033985, "last_edit_date": 1541033985, "creation_date": 1541029078, "answer_id": 53093349, "question_id": 53093236, "link": "https://stackoverflow.com/questions/53093236/python-sampling-using-readline-gives-memory-error/53093349#53093349", "title": "python sampling using readline gives memory error", "body": "<p>So it looks like this line causes a huge memory spike:</p>\n\n<pre><code>samples = random.sample(range(1, 264000000), 1000)\n</code></pre>\n\n<p>My guess is that this call forces python to create all 264M ints in that range before it can do the sampling. Try this code instead for sampling in the same range without replacement:</p>\n\n<pre><code>from random import randint\n\nfile = \"input.txt\"\noutput = open(\"output.txt\", \"w+\", encoding = \"utf-8\")\n\nsamples = set()\nwhile len(samples) &lt; 1000:\n    random_num = randint(0, 264000000)\n    if random_num not in samples:\n        samples.add(random_num)\n\nwith open(file, encoding = \"utf-8\") as fp:\n    count = 0\n    for line in fp:\n        if count in samples:\n            output.write(line)\n            samples.remove(count)\n        count += 1\n\n        if not samples: break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "is_accepted": true, "score": 0, "last_activity_date": 1541437577, "creation_date": 1541437577, "answer_id": 53158985, "question_id": 53093236, "link": "https://stackoverflow.com/questions/53093236/python-sampling-using-readline-gives-memory-error/53158985#53158985", "title": "python sampling using readline gives memory error", "body": "<p>SOLVED</p>\n\n<p>I finally solved the problem: all code here works properly,\nthe range issue is indeed only present in versions prior to 3.0,\nwhere it should be xrange(1, 264000000).</p>\n\n<p>The input file was constructed in a different code file,\nwhere it was written as follows:</p>\n\n<pre><code>with open(file, encoding = \"utf-8\", errors = 'ignore') as fp:  \nline = fp.readline()\n    while line:\n        input_line = line.split(sep=\"\\t\")\n        output.write(input_line[1] + \",\" + input_line[2])\n        line = fp.readline()\n</code></pre>\n\n<p>The problem here is that this code does not construct a file with lines, but just adds information to the first line. Therefore, the whole file was read as one big line, instead of as a file with a lot of lines to iterate over.</p>\n\n<p>Thanks a lot for your help and my sincere apologies for the fact that the problem was situated elsewhere in my project.</p>\n"}], "owner": {"reputation": 62, "user_id": 7797646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8143656cb60a5b9c41507071026990bd?s=128&d=identicon&r=PG&f=1", "display_name": "MilanV", "link": "https://stackoverflow.com/users/7797646/milanv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 53158985, "answer_count": 2, "score": 1, "last_activity_date": 1541437577, "creation_date": 1541028194, "last_edit_date": 1541093931, "question_id": 53093236, "link": "https://stackoverflow.com/questions/53093236/python-sampling-using-readline-gives-memory-error", "title": "python sampling using readline gives memory error", "body": "<p>I tried to sample a data file with over 260 million lines, creating an evenly distributed sample with a fixed size of 1000 samples.</p>\n\n<p>What I did was the following:</p>\n\n<pre><code>import random\n\nfile = \"input.txt\"\noutput = open(\"output.txt\", \"w+\", encoding = \"utf-8\")\n\nsamples = random.sample(range(1, 264000000), 1000)\nsamples.sort(reverse=False)\n\nwith open(file, encoding = \"utf-8\") as fp:\n    line = fp.readline()\n    count = 0\n    while line:\n        if count in samples:\n            output.write(line)\n            samples.remove(count)\n        count += 1\n        line = fp.readline()\n</code></pre>\n\n<p>This code resulted in a memory error, with no further description. How come this code can give a memory error? </p>\n\n<p>As far as I know it should read my file line by line. The file is 28.4GB, so it can't be read as a whole, which is why I resorted to the readline() approach. How could I fix this, so that the whole file can be processed, regardless of its size?\\</p>\n\n<p>EDIT:\nThe latest attempts throw this error, which is practically identical to each of the prior error messages I have gotten so far</p>\n\n<pre><code>MemoryError                               Traceback (most recent call last)\n&lt;ipython-input-1-a772dad1ea5a&gt; in &lt;module&gt;()\n     12 with open(file, encoding = \"utf-8\") as fp:\n     13     count = 0\n---&gt; 14     for line in fp:\n     15         if count in samples:\n     16             output.write(line)\n\n~\\Anaconda3\\lib\\codecs.py in decode(self, input, final)\n    320         # decode input (taking the buffer into account)\n    321         data = self.buffer + input\n--&gt; 322         (result, consumed) = self._buffer_decode(data, self.errors, final)\n    323         # keep undecoded input until the next call\n    324         self.buffer = data[consumed:]\n\nMemoryError: \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "winapi", "pywin32"], "comments": [{"owner": {"reputation": 113, "user_id": 3005834, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1244772661/picture?type=large", "display_name": "Bro Nicholas", "link": "https://stackoverflow.com/users/3005834/bro-nicholas"}, "edited": false, "score": 0, "creation_date": 1541029912, "post_id": 53093233, "comment_id": 93083625, "body": "This question has an answer <a href=\"https://stackoverflow.com/a/52959617/3005834\">here</a>"}, {"owner": {"reputation": 311, "user_id": 8228163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CspQu.png?s=128&g=1", "display_name": "DADi590", "link": "https://stackoverflow.com/users/8228163/dadi590"}, "reply_to_user": {"reputation": 113, "user_id": 3005834, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1244772661/picture?type=large", "display_name": "Bro Nicholas", "link": "https://stackoverflow.com/users/3005834/bro-nicholas"}, "edited": false, "score": 0, "creation_date": 1541030578, "post_id": 53093233, "comment_id": 93083770, "body": "Actually that&#39;s a mixed answer (written by me) from 2 other answers, but that only gets the paths from files on Windows Explorer windows, not from the desktop (as it isn&#39;t a window). I can&#39;t make it get them from the desktop."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541056606, "post_id": 53093233, "comment_id": 93089527, "body": "The desktop is just an Explorer window, and provides a programming interface. It boils down to calling <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shobjidl_core/nf-shobjidl_core-ifolderview-items\" rel=\"nofollow noreferrer\">IFolderView::Items</a>, filtering on the <code>SVGIO_SELECTION</code> flag. Most of the code required is presented in this blog entry: <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20130318-00/?p=4933\" rel=\"nofollow noreferrer\">Manipulating the positions of desktop icons</a>. You&#39;ll want to use a Python module that exposes COM in a natural way."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1541058745, "post_id": 53093233, "comment_id": 93090308, "body": "From the 2nd link that IInspectable posted, you need to translate the code of &quot;FindDesktopFolderView()&quot; to python. Once you have the view object, you can use <a href=\"https://stackoverflow.com/a/43968304/7571258\">my code</a> to enumerate the selected files of the view object (starting from comment <i>&quot;# Get an IDataObject that contains the items of the view&quot;</i>)."}], "owner": {"reputation": 311, "user_id": 8228163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CspQu.png?s=128&g=1", "display_name": "DADi590", "link": "https://stackoverflow.com/users/8228163/dadi590"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1541030698, "creation_date": 1541028157, "last_edit_date": 1541030698, "question_id": 53093233, "link": "https://stackoverflow.com/questions/53093233/get-selected-files-on-desktop-in-windows-7", "title": "get selected files on desktop in Windows (7)", "body": "<p>Can someone tell me how I can get all the selected files on Windowsd desktop in Python? I've been searching for a way to do it and I can't find anyone. The only one I found is for C#, but I don't code in C#, so I don't even know if it works: <a href=\"https://stackoverflow.com/questions/19095199/get-list-of-selected-files-from-windows-desktop\">Get list of selected files from Windows Desktop</a> (if someone understands it and could explain/convert it, that'd be appreciated too). I've found something very near of this, but I can only make it get the number of seleted files, not their path, as I'd like:</p>\n\n<pre><code>import ctypes\nfrom commctrl import LVM_GETITEMCOUNT,LVM_GETSELECTEDCOUNT\n#The LVM_GETITEMCOUNT came with the script, I got the other one from Microsoft documentation about SendMessage(), and both are near, but none returns the paths, only numbers\nimport pywintypes\nimport win32gui\n\nGetShellWindow = ctypes.windll.user32.GetShellWindow\n\ndef get_desktop():\n    \"\"\"Get the window of the icons, the desktop window contains this window\"\"\"\n    shell_window = GetShellWindow()\n    shell_dll_defview = win32gui.FindWindowEx(shell_window, 0, \"SHELLDLL_DefView\", \"\")\n    if shell_dll_defview == 0:\n        sys_listview_container = []\n        try:\n            win32gui.EnumWindows(_callback, sys_listview_container)\n        except pywintypes.error as e:\n            if e.winerror != 0:\n                raise\n        sys_listview = sys_listview_container[0]\n    else:\n        sys_listview = win32gui.FindWindowEx(shell_dll_defview, 0, \"SysListView32\", \"FolderView\")\n    return sys_listview\n\ndef _callback(hwnd, extra):\n    class_name = win32gui.GetClassName(hwnd)\n    if class_name == \"WorkerW\":\n        child = win32gui.FindWindowEx(hwnd, 0, \"SHELLDLL_DefView\", \"\")\n        if child != 0:\n            sys_listview = win32gui.FindWindowEx(child, 0, \"SysListView32\", \"FolderView\")\n            extra.append(sys_listview)\n            return False\n    return True\n\ndef get_item_count(window):\n    return win32gui.SendMessage(window, LVM_GETSELECTEDCOUNT)\n\ndesktop = get_desktop()\nprint(get_item_count(desktop))\n</code></pre>\n\n<p>I've searched on the commands that can be sent to a window, but I didn't find anyone to get the path of the selected items (maybe I missed one?).</p>\n\n<p>A way I found of getting the selected files from Windows Explorer windows, but now from the desktop: <a href=\"https://stackoverflow.com/a/21250927/8228163\">https://stackoverflow.com/a/21250927/8228163</a>.</p>\n\n<p>Any help (with any Windows, preferably 7) is much appreciated. Thanks in advance!</p>\n"}, {"tags": ["python", "matplotlib", "candlestick-chart"], "comments": [{"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 0, "creation_date": 1541028409, "post_id": 53093216, "comment_id": 93083277, "body": "If you run the <i>exact</i> same code they are do you get the same result that the article does? If not then you might be using different versions of the various libraries.."}, {"owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "reply_to_user": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 0, "creation_date": 1541028521, "post_id": 53093216, "comment_id": 93083306, "body": "I use the exact same code that generates the candlestick chart"}, {"owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "reply_to_user": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 0, "creation_date": 1541028587, "post_id": 53093216, "comment_id": 93083331, "body": "I can&#39;t seem to understand why the x-axis is so crammed for me. Thank you @DavidG for trying to help me."}, {"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 0, "creation_date": 1541028865, "post_id": 53093216, "comment_id": 93083397, "body": "Can you edit your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> i.e. a piece of code we can run to reproduce the problem?"}, {"owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "reply_to_user": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 0, "creation_date": 1541030113, "post_id": 53093216, "comment_id": 93083663, "body": "Hello @DavidG. I have put what I could . I know it does not appear minimal but I didn&#39;t know how to shorted it further because I am clueless about what is causing the problem and have put my code. I apologize if this is not brief."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541031437, "post_id": 53093216, "comment_id": 93083954, "body": "Note that the code uses the current date, <code>datetime.date.today()</code>, so running it at different times, <i>may</i>  lead to different results. To be sure to see the same image as on the website you would need to replace the <code>end</code> date with the date on which the website has been made (not sure if that date is known though)."}, {"owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541031991, "post_id": 53093216, "comment_id": 93084067, "body": "Thanks @ImportanceOfBeingErnest but the dates are still crammed. I think date must be after March 2018 from the chart on the web but when I try it, it still looks crammed."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541033001, "post_id": 53093216, "comment_id": 93084253, "body": "So the difference results from the line <code>if plotdat.index[-1] - plotdat.index[0] &lt; pd.Timedelta(&#39;730 days&#39;):</code> This is apparently True for you, but was False when the plot on the website was created."}, {"owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "edited": false, "score": 0, "creation_date": 1541033624, "post_id": 53093216, "comment_id": 93084384, "body": "Ah! I see I will alter the line of code and see what I get."}, {"owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "edited": false, "score": 0, "creation_date": 1541033872, "post_id": 53093216, "comment_id": 93084424, "body": "But the interval of the chart (X Axis) appears to be days and not eevry three months like on the website."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541037093, "post_id": 53093216, "comment_id": 93085064, "body": "If you arrive in the <code>else</code> clause, it will be automatic (hence some 10 intervals along the axis). If you arrive in the <code>if</code> clause, it will be set to days."}, {"owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "edited": false, "score": 0, "creation_date": 1541038651, "post_id": 53093216, "comment_id": 93085385, "body": "So what should I change it to? %m?? Maybe"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541075071, "post_id": 53093216, "comment_id": 93097851, "body": "You can simply remove the if/else and only keep what&#39;s inside <code>else</code>."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "is_accepted": true, "score": 0, "last_activity_date": 1541042025, "creation_date": 1541042025, "answer_id": 53094738, "question_id": 53093216, "link": "https://stackoverflow.com/questions/53093216/candlestick-chart-in-python-x-axis-appears-crammed/53094738#53094738", "title": "Candlestick chart in Python X-Axis appears crammed", "body": "<p>I can't seem to understand this but after re-copying the code and shutting down Spyder and re-starting, it appears to work now. Thank you to @ImportanceOfBeingEarnest and @DavidG for helping me with this. </p>\n"}], "owner": {"reputation": 111, "user_id": 10339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3dcbed9bb2679366351ac32bdbf739?s=128&d=identicon&r=PG&f=1", "display_name": "AnalysisNerd", "link": "https://stackoverflow.com/users/10339255/analysisnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 53094738, "answer_count": 1, "score": 0, "last_activity_date": 1541042025, "creation_date": 1541027964, "last_edit_date": 1541030772, "question_id": 53093216, "link": "https://stackoverflow.com/questions/53093216/candlestick-chart-in-python-x-axis-appears-crammed", "title": "Candlestick chart in Python X-Axis appears crammed", "body": "<p>I am running code from the following website : </p>\n\n<p><a href=\"https://ntguardian.wordpress.com/2018/07/17/stock-data-analysis-python-v2/\" rel=\"nofollow noreferrer\">https://ntguardian.wordpress.com/2018/07/17/stock-data-analysis-python-v2/</a></p>\n\n<p>which generates a candle chart. I have run similar code in Spyder and the only amendments I have made to the code are </p>\n\n<pre><code>import numpy as np\nfrom matplotlib.dates import DateFormatter, WeekdayLocator,DayLocator,MONDAY\nfrom mpl_finance import candlestick_ohlc\nfrom matplotlib.dates import date2num\n</code></pre>\n\n<p>Their chart looks like this on the webpage:\n<img src=\"https://i.stack.imgur.com/yjufN.png\" alt=\"Their chart looks like this on the webpage\"></p>\n\n<p>This is my chart when I run it in Spyder\n<img src=\"https://i.stack.imgur.com/RtKKP.png\" alt=\"This is my chart when I run it in Spyder\"></p>\n\n<p>I can't seem to understand why when I haven't altered the code why I would see such a stark difference.</p>\n\n<p>Is there some quirk in Spyder that creates this proble or do I need to have a few more lines of code?</p>\n\n<p>Please help me with this as I am new to matplotlib.</p>\n\n<p>Thanks a lot and really appreciate your help with this. </p>\n\n<p>My overall code</p>\n\n<pre><code> import pandas as pd\n import numpy as np\n\n pd.set_option('display.max_rows', 500)\n pd.set_option('display.max_columns', 500)\n pd.set_option('display.width', 1000)\n\n\n\n import quandl\n import datetime\n\n # We will look at stock prices over the past year, starting at January \n\n start = datetime.datetime(2016,1,1)\n end =datetime.date.today()\n\n #Fist define the security for which you are extracting the Series\n s = \"AAPL\"\n apple = quandl.get(\"WIKI/\" + s, start_date=start, end_date=end)\n\n print (type(apple))\n\n print (apple.head())\n\n #print (apple.tail())\n\n import matplotlib\n import matplotlib.pyplot as plt\n import pylab\n\n #Lines of Code for Jupyter\n # This line is necessary for the plot to appear in a Jupyter notebook\n #%matplotlib inline\n # Control the default size of figures in this Jupyter notebook\n #%pylab inline\n\n\n pylab.rcParams['figure.figsize'] = (15, 9)  # Change the size of plots\n\n print (apple[\"Adj. Close\"].plot(grid = True))\n\n from matplotlib.dates import DateFormatter, WeekdayLocator, DayLocator, \n MONDAY\n from mpl_finance import candlestick_ohlc\n from matplotlib.dates import date2num\n\n\n def pandas_candlestick_ohlc(dat, stick = \"day\", adj = False, otherseries = \n     None):\n\"\"\"\n:param dat: pandas DataFrame object with datetime64 index, and float columns \n\"Open\", \"High\", \"Low\", and \"Close\", likely created via DataReader from \n\"yahoo\"\n:param stick: A string or number indicating the period of time covered by a \nsingle candlestick. Valid string inputs include \"day\", \"week\", \"month\", and \n\"year\", (\"day\" default), and any numeric input indicates the number of \n trading days included in a period\n:param adj: A boolean indicating whether to use adjusted prices\n:param otherseries: An iterable that will be coerced into a list, containing \nthe columns of dat that hold other series to be plotted as lines\n\nThis will show a Japanese candlestick plot for stock data stored in dat, \nalso plotting other series if passed.\n\"\"\"\nmondays = WeekdayLocator(MONDAY)        # major ticks on the mondays\nalldays = DayLocator()              # minor ticks on the days\ndayFormatter = DateFormatter('%d')      # e.g., 12\n\n# Create a new DataFrame which includes OHLC data for each period specified \nby stick input\nfields = [\"Open\", \"High\", \"Low\", \"Close\"]\nif adj:\n    fields = [\"Adj. \" + s for s in fields]\ntransdat = dat.loc[:,fields]\ntransdat.columns = pd.Index([\"Open\", \"High\", \"Low\", \"Close\"])\nif (type(stick) == str):\n    if stick == \"day\":\n        plotdat = transdat\n        stick = 1 # Used for plotting\n    elif stick in [\"week\", \"month\", \"year\"]:\n        if stick == \"week\":\n            transdat[\"week\"] = pd.to_datetime(transdat.index).map(lambda x: \n    x.isocalendar()[1]) # Identify weeks\n        elif stick == \"month\":\n            transdat[\"month\"] = pd.to_datetime(transdat.index).map(lambda x: \n    x.month) # Identify months\n        transdat[\"year\"] = pd.to_datetime(transdat.index).map(lambda x: \n    x.isocalendar()[0]) # Identify years\n        grouped = transdat.groupby(list(set([\"year\",stick]))) # Group by \n    year and other appropriate variable\n        plotdat = pd.DataFrame({\"Open\": [], \"High\": [], \"Low\": [], \"Close\": \n    []}) # Create empty data frame containing what will be plotted\n        for name, group in grouped:\n            plotdat = plotdat.append(pd.DataFrame({\"Open\": group.iloc[0,0],\n                                        \"High\": max(group.High),\n                                        \"Low\": min(group.Low),\n                                        \"Close\": group.iloc[-1,3]},\n                                       index = [group.index[0]]))\n        if stick == \"week\": stick = 5\n        elif stick == \"month\": stick = 30\n        elif stick == \"year\": stick = 365\n\n  elif (type(stick) == int and stick &gt;= 1):\n    transdat[\"stick\"] = [np.floor(i / stick) for i in \n  range(len(transdat.index))]\n    grouped = transdat.groupby(\"stick\")\n    plotdat = pd.DataFrame({\"Open\": [], \"High\": [], \"Low\": [], \"Close\": []}) \n# Create empty data frame containing what will be plotted\n    for name, group in grouped:\n        plotdat = plotdat.append(pd.DataFrame({\"Open\": group.iloc[0,0],\n                                    \"High\": max(group.High),\n                                    \"Low\": min(group.Low),\n                                    \"Close\": group.iloc[-1,3]},\n                                   index = [group.index[0]]))\n\nelse:\n    raise ValueError('Valid inputs to argument \"stick\" include the strings \"day\", \"week\", \"month\", \"year\", or a positive integer')\n\n\n# Set plot parameters, including the axis object ax used for plotting\nfig, ax = plt.subplots()\nfig.subplots_adjust(bottom=0.2)\nif plotdat.index[-1] - plotdat.index[0] &lt; pd.Timedelta('730 days'):\n    weekFormatter = DateFormatter('%b %d')  # e.g., Jan 12\n    ax.xaxis.set_major_locator(mondays)\n    ax.xaxis.set_minor_locator(alldays)\nelse:\n    weekFormatter = DateFormatter('%b %d, %Y')\nax.xaxis.set_major_formatter(weekFormatter)\n\nax.grid(True)\n\n# Create the candelstick chart\ncandlestick_ohlc(ax, list(zip(list(date2num(plotdat.index.tolist())), \nplotdat[\"Open\"].tolist(), plotdat[\"High\"].tolist(),\n                  plotdat[\"Low\"].tolist(), plotdat[\"Close\"].tolist())),\n                  colorup = \"black\", colordown = \"red\", width = stick * .4)\n\n# Plot other series (such as moving averages) as lines\nif otherseries != None:\n    if type(otherseries) != list:\n        otherseries = [otherseries]\n    dat.loc[:,otherseries].plot(ax = ax, lw = 1.3, grid = True)\n\nax.xaxis_date()\nax.autoscale_view()\nplt.setp(plt.gca().get_xticklabels(), rotation=45, \nhorizontalalignment='right')\n\nplt.show()\n\npandas_candlestick_ohlc(apple, adj=True, stick=\"month\")\n</code></pre>\n"}, {"tags": ["python", "function", "directory"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9862492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f298bf33667080ead75774d6e7b97e52?s=128&d=identicon&r=PG&f=1", "display_name": "Mdot", "link": "https://stackoverflow.com/users/9862492/mdot"}, "edited": false, "score": 0, "creation_date": 1541135345, "post_id": 53108320, "comment_id": 93120733, "body": "I am able to import it, but I am not able to call it after importing it. I receive, &quot;The module callback is not callable&quot;"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "reply_to_user": {"reputation": 9, "user_id": 9862492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f298bf33667080ead75774d6e7b97e52?s=128&d=identicon&r=PG&f=1", "display_name": "Mdot", "link": "https://stackoverflow.com/users/9862492/mdot"}, "edited": false, "score": 0, "creation_date": 1541202822, "post_id": 53108320, "comment_id": 93148884, "body": "Edit the original question to say what OS are you using.  Show the import statement and the resulting traceback, copied and pasted, then formatted as code."}, {"owner": {"reputation": 9, "user_id": 9862492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f298bf33667080ead75774d6e7b97e52?s=128&d=identicon&r=PG&f=1", "display_name": "Mdot", "link": "https://stackoverflow.com/users/9862492/mdot"}, "edited": false, "score": 0, "creation_date": 1541204654, "post_id": 53108320, "comment_id": 93149162, "body": "Ok, I changed it. I am using Windows 10."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "reply_to_user": {"reputation": 9, "user_id": 9862492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f298bf33667080ead75774d6e7b97e52?s=128&d=identicon&r=PG&f=1", "display_name": "Mdot", "link": "https://stackoverflow.com/users/9862492/mdot"}, "edited": false, "score": 0, "creation_date": 1541242803, "post_id": 53108320, "comment_id": 93154929, "body": "You were supposed to edit your question, not my answer.  I took what you tried to add to my answer and added it to your question, and will add to my answer."}], "tags": [], "owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1541243145, "last_edit_date": 1541243145, "creation_date": 1541101372, "answer_id": 53108320, "question_id": 53093204, "link": "https://stackoverflow.com/questions/53093204/i-am-trying-to-call-a-function-that-i-manually-created-in-python-saved-in-the/53108320#53108320", "title": "I am trying to call a function that I manually created in Python &amp; saved in the lib directory. How can I do this?", "body": "<p>If you put <code>BinarySearch.py in</code>.../Pythonxy/Lib<code>(to use the Windows name), use</code>import BinarySearch<code>, just like you would use</code>import abc<code>for</code>Lib/abc.py<code>and so on for other built-in modules in</code>/Lib`.</p>\n\n<p>[It would generally be better to call the file <code>binary_search.py</code> and reserve CamelCase names for classes.  It would also be better to put your files in <code>Lib/site-packages</code> or in a directory in your user directory.  But these are other issues.]</p>\n\n<p>None of this has anything in particular to do with IDLE as such.</p>\n\n<p>Edit: Now that you can import the module, you must call the function within the module.  If the function is also called <code>BinarySearch</code>:</p>\n\n<pre><code>BinarySearch.BinarySearch()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>from BinarySearch import BinarySearch  # import the function from the module\nBinarySearch()\n</code></pre>\n\n<p>I presume, though, that the function needs an argument or two.  </p>\n\n<p>[It would be less confusing if the module and function have different names, such as module <code>binsearch</code> (file <code>binsearch.py</code>) and function <code>binary_search</code>.]</p>\n"}], "owner": {"reputation": 9, "user_id": 9862492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f298bf33667080ead75774d6e7b97e52?s=128&d=identicon&r=PG&f=1", "display_name": "Mdot", "link": "https://stackoverflow.com/users/9862492/mdot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541243145, "creation_date": 1541027852, "last_edit_date": 1541242681, "question_id": 53093204, "link": "https://stackoverflow.com/questions/53093204/i-am-trying-to-call-a-function-that-i-manually-created-in-python-saved-in-the", "title": "I am trying to call a function that I manually created in Python &amp; saved in the lib directory. How can I do this?", "body": "<p>I created a Binary Search Function in Python, and saved it as a .py file to the lib directory associated with Python Idle. How can I successfully call this function after importing it?</p>\n\n<p>I receive an error when trying to call the function after adding parameters. </p>\n\n<p>Error I receive:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"&lt;pyshell#11&gt;\", line 1, in &lt;module&gt;\n  from lib import BinarySearch\nModuleNotFoundError: No module named 'lib'\n</code></pre>\n\n<p>EDIT: Using Windows 10, error I receive after correcting import statement:</p>\n\n<pre><code>import BinarySearch\nTraceback (most recent call last):\nFile \"&lt;pyshell#41&gt;\", line 1, in &lt;module&gt;\n  BinarySearch()\nTypeError: 'module' object is not callable\n</code></pre>\n"}, {"tags": ["python", "mysql", "mysql-connector-python", "mysql-8.0"], "comments": [{"owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "edited": false, "score": 0, "creation_date": 1541406804, "post_id": 53093152, "comment_id": 93191861, "body": "how do you get MySQL Utilities installed, via the installer from oracle website?"}, {"owner": {"reputation": 5606, "user_id": 1955871, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XiFZh.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/1955871/rob"}, "reply_to_user": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "edited": false, "score": 0, "creation_date": 1541430151, "post_id": 53093152, "comment_id": 93204268, "body": "@georgexsh Edited installation information into the question. On Windows, we use the Oracle installer. On Amazon Linux we use yum. Thanks!"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1541435225, "post_id": 53093152, "comment_id": 93207248, "body": "To be honest, it&#39;d be much easier for you to a) install Python 2.7, b) install mysql-connector (download from Oracle) then c) git clone the utilities project and run <code>python setup.py install</code> in the project directory. You probably have to <a href=\"https://github.com/mysql/mysql-utilities/pull/37/files\" rel=\"nofollow noreferrer\">apply a bug fix</a> that Oracle has been ignoring (see the <a href=\"https://github.com/mysql/mysql-utilities/issues/36\" rel=\"nofollow noreferrer\">bug report</a> as to why you need this)."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1541435419, "post_id": 53093152, "comment_id": 93207352, "body": "The alternative is to install cx_Freeze, the Microsoft Visual C++ compiler 9.0 for Python 2.7 package, get the mysql-connector source code and the mysql client headers, and then follow the instructions in the <a href=\"https://github.com/mysql/mysql-utilities/blob/08276b2258bf9739f53406b354b21195ff69a261/package.py\" rel=\"nofollow noreferrer\"><code>package.py</code> script</a> in the <code>mysql-utilities</code> distribution to put this all together, then cross your fingers and run <code>python package.py build</code> and hope that whatever that outputs can be useful somewhere. And then also install the MS Visual C++ redestributable package."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1541435450, "post_id": 53093152, "comment_id": 93207374, "body": "(See <a href=\"https://cx-freeze.readthedocs.io/en/latest/faq.html#microsoft-visual-c-redistributable-package\" rel=\"nofollow noreferrer\">cx-freeze.readthedocs.io/en/latest/&hellip;</a> for the latter, <a href=\"https://cx-freeze.readthedocs.io/en/latest/distutils.html#distutils-commands\" rel=\"nofollow noreferrer\">cx-freeze.readthedocs.io/en/latest/&hellip;</a> for the <code>package.py</code> commands)."}, {"owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "edited": false, "score": 0, "creation_date": 1541848183, "post_id": 53093152, "comment_id": 93362647, "body": "&quot;we do not have standalone python installed&quot; do you able to install a python under windows?"}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "is_accepted": false, "score": 2, "last_activity_date": 1541994915, "last_edit_date": 1541994915, "creation_date": 1541845606, "answer_id": 53238022, "question_id": 53093152, "link": "https://stackoverflow.com/questions/53093152/mysql-utilities-with-mysql-8-server/53238022#53238022", "title": "MySQL Utilities with MySQL 8 Server", "body": "<p>I have managed to run <code>mysqldiff.py</code> against mysql 8, with <a href=\"https://github.com/georgexsh/mysql-utilities/commits/master\" rel=\"nofollow noreferrer\">some patches</a>:</p>\n\n<p>clone the patched source code and enter its dir:</p>\n\n<pre><code>$ git clone https://github.com/georgexsh/mysql-utilities.git\n</code></pre>\n\n<p>create a <a href=\"https://virtualenv.pypa.io/en/latest/\" rel=\"nofollow noreferrer\">virtualenv</a> and activate it:</p>\n\n<pre><code>$ virtualenv -p python2 venv\n$ . venv/bin/activate\n</code></pre>\n\n<p>install the newer mysql connector:</p>\n\n<pre><code>(venv) $ pip install mysql-connector-python&gt;=8.0\n</code></pre>\n\n<p>install mysql-utilities to the current virtualenv:</p>\n\n<pre><code>(venv) $ pip install .\n</code></pre>\n\n<p>now mysqldiff.py is able to run. if you want to run without activate virtualenv, you use its full path:</p>\n\n<pre><code>/path/to/mysql-utilities/venv/bin/mysqldiff.py\n</code></pre>\n\n<p>steps under windows are mostly the same, except virtualenv activation:</p>\n\n<pre><code>venv\\Scripts\\activate.bat\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2280, "user_id": 2358222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6cnol.jpg?s=128&g=1", "display_name": "Studocwho", "link": "https://stackoverflow.com/users/2358222/studocwho"}, "edited": false, "score": 1, "creation_date": 1548099848, "post_id": 54296483, "comment_id": 95413918, "body": "Please don&#39;t post answers that do not attempt to answer the original question. If you are having the same trouble, read the other answers and do abit more research first, if you&#39;re still stuck by all means post a new question with all relevant details. Non-answers will be voted to be removed."}, {"owner": {"reputation": 368, "user_id": 10306808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r99NiB90yh4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPYrdDvyaLIDp3-LlHfdbKdeVgDfg/mo/photo.jpg?sz=128", "display_name": "rgaraisayev", "link": "https://stackoverflow.com/users/10306808/rgaraisayev"}, "edited": false, "score": 0, "creation_date": 1548101774, "post_id": 54296483, "comment_id": 95414732, "body": "I added explanation how to do it"}, {"owner": {"reputation": 601, "user_id": 300978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f4b02ef0cd7a2d44c64922440b684f5?s=128&d=identicon&r=PG", "display_name": "brohjoe", "link": "https://stackoverflow.com/users/300978/brohjoe"}, "edited": false, "score": 1, "creation_date": 1564054942, "post_id": 54296483, "comment_id": 100909981, "body": "That you so much rgaraisayev.  Your solution worked!  I&#39;ve been working on this for two days now and it&#39;s finally resolved.  God Bless you!  After I got rid of the &#39;sha256_authentication&#39; issue, I had a &quot;Permission Denied: &#39;version_check&#39; issue in mysql utilities &#39;tools.py&#39;, but I got that resolved with another SO savior.  I&#39;m recovering my file structure.  StackOverflow Rocks big time and it&#39;s getting better and better!  If I could give you 10 points I would.  Thank you so much!!!"}, {"owner": {"reputation": 368, "user_id": 10306808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r99NiB90yh4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPYrdDvyaLIDp3-LlHfdbKdeVgDfg/mo/photo.jpg?sz=128", "display_name": "rgaraisayev", "link": "https://stackoverflow.com/users/10306808/rgaraisayev"}, "edited": false, "score": 0, "creation_date": 1564080161, "post_id": 54296483, "comment_id": 100923192, "body": "glad it helped you. Thank you for your gratitude"}], "tags": [], "owner": {"reputation": 368, "user_id": 10306808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r99NiB90yh4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPYrdDvyaLIDp3-LlHfdbKdeVgDfg/mo/photo.jpg?sz=128", "display_name": "rgaraisayev", "link": "https://stackoverflow.com/users/10306808/rgaraisayev"}, "is_accepted": false, "score": 1, "last_activity_date": 1548101656, "last_edit_date": 1548101656, "creation_date": 1548098247, "answer_id": 54296483, "question_id": 53093152, "link": "https://stackoverflow.com/questions/53093152/mysql-utilities-with-mysql-8-server/54296483#54296483", "title": "MySQL Utilities with MySQL 8 Server", "body": "<p>I encountered same problem and looked into mysql python connector code and added class for caching_sha2_password. It works for me now.</p>\n\n<p><strong>1.</strong> To fix the issue download source code for mysql-python-connector from Mysql official website, then install python  (any version). </p>\n\n<p><strong>2.</strong> unzip downloaded mysql-python-connector zip file, and inside you will find setup.py</p>\n\n<p><strong>3.</strong> Open terminal and type <code>python setup.py install</code></p>\n\n<p><strong>4.</strong> build folder will be created in current folder. Go to build/mysql/ and copy authentication.py file</p>\n\n<p><strong>5.</strong> open  Mysql Utilities ->> bin ->> library.zip, and find mysql connector- > mysql > authentication.pyc file and delete i and paste authentication.py file you copied earlier.</p>\n\n<p><strong>6.</strong> DONE !</p>\n\n<p>If you dont want to mess with it, you can download ready files from this link</p>\n\n<p>Here is the link for files and explanation. </p>\n\n<p><a href=\"https://github.com/rgaraisayev/mysqldiff\" rel=\"nofollow noreferrer\">https://github.com/rgaraisayev/mysqldiff</a></p>\n"}], "owner": {"reputation": 5606, "user_id": 1955871, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XiFZh.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/1955871/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1548101656, "creation_date": 1541027444, "last_edit_date": 1541430091, "question_id": 53093152, "link": "https://stackoverflow.com/questions/53093152/mysql-utilities-with-mysql-8-server", "title": "MySQL Utilities with MySQL 8 Server", "body": "<p>As part of our build process, we use the <code>mysqldiff</code> utility (invoked from maven) to validate our database migration scripts by comparing a freshly-built copy of the schema to a version of the schema created from a baseline plus our migration script. This all works fine with MySQL 5.7.</p>\n\n<p>We are looking to upgrade to MySQL 8.0.13. The database user has been configured to use <code>mysql_native_password</code>. When we run our build, we are getting this error from <code>mysqldiff</code>:</p>\n\n<pre><code>ERROR: Authentication plugin 'caching_sha2_password' is not supported\n</code></pre>\n\n<p>We understand that this error is due to the fact that the utility is using an old version of mysql-python-connector. We also understand that the answer might be as simple as upgrading the connector version, but we don't know how to go about trying that.</p>\n\n<p>The MySQL Utilities can be found at <a href=\"https://github.com/mysql/mysql-utilities\" rel=\"noreferrer\">https://github.com/mysql/mysql-utilities</a>.</p>\n\n<p>On Windows 10, we install using the Oracle windows installer. On Amazon Linux, we install with yum.</p>\n\n<p>NOTE:</p>\n\n<ol>\n<li>The MySQL Utilities appear to be based on an embedded python2.7 installation (we do not have standalone python installed on any of the development or build machines).</li>\n<li>We do not have python expertise, so detailed steps will be helpful if we are mucking with the embedded python stuff.</li>\n<li>We need to solve this problem both on Windows 10 and Amazon Linux.</li>\n</ol>\n\n<p>How do we work around this error so that we can use mysqldiff with a MySQL 8.0.13 server on Windows 10 and Amazon Linux? </p>\n\n<p>If the answer is simply to upgrade the connector, what are the detailed steps for doing that? </p>\n\n<p>Are there server installation/configuration changes we can make to support clients connecting with old drivers?</p>\n"}, {"tags": ["python", "python-3.x", "range", "directory"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1541027741, "post_id": 53093121, "comment_id": 93083111, "body": "That is what nested loops do. You will want to look up <code>enumerate</code>."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "is_accepted": false, "score": 0, "last_activity_date": 1541027900, "creation_date": 1541027900, "answer_id": 53093210, "question_id": 53093121, "link": "https://stackoverflow.com/questions/53093121/python-use-count-in-list/53093210#53093210", "title": "Python use count in list", "body": "<p>This is exactly what a nested loop will do.</p>\n\n<p>Check the outputs of the loops independently:</p>\n\n<p>It says you have 2 files the directory.</p>\n\n<p>So this is the first thing you want to look at. Because if the output is supposed to be one, it's counting another thing inside dirs. What is it counting? Debug it by printing the loops separately.</p>\n\n<p>Also, for the next problem you can solve it by hardcoding an innocent <code>+1</code></p>\n\n<pre><code>print(item + 1, file)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 8591286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cbed2ef58edb6645b4c93f0677b0bbb?s=128&d=identicon&r=PG&f=1", "display_name": "peter", "link": "https://stackoverflow.com/users/8591286/peter"}, "edited": false, "score": 1, "creation_date": 1541030617, "post_id": 53093219, "comment_id": 93083776, "body": "Wauw, thanks for all of that, made my day alot easier"}], "tags": [], "owner": {"reputation": 6400, "user_id": 786593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ca3156e5785370494410fc80f28a79?s=128&d=identicon&r=PG", "display_name": "wp-overwatch.com", "link": "https://stackoverflow.com/users/786593/wp-overwatch-com"}, "is_accepted": true, "score": 2, "last_activity_date": 1541035076, "last_edit_date": 1592644375, "creation_date": 1541028009, "answer_id": 53093219, "question_id": 53093121, "link": "https://stackoverflow.com/questions/53093121/python-use-count-in-list/53093219#53093219", "title": "Python use count in list", "body": "<h2>How a Loop inside a Loop works</h2>\n<p>I think there you have a misunderstanding in what happens when you put a loop inside a loop, so let me explain that first.</p>\n<p>If you have, for example</p>\n<pre><code>for item_a in ['a', 'b']:\n  for item_b in ['1', '2']:\n    print(item_a + item_b)\n</code></pre>\n<p>then your output would be:</p>\n<blockquote>\n<p>a1</p>\n<p>a2</p>\n<p>b1</p>\n<p>b2</p>\n</blockquote>\n<p>The code would start in the <code>a</code> loop first, and then it would go over both items in the inner loop. Once finished, the next item in the outer loop is <code>b</code>, and then it will go over both items in the inner loop again.</p>\n<p>If you want to keep track of how many items you've gone over in your loop, you could do so with this type of pattern:</p>\n<pre><code>count = 0\nfor item_a in ['a', 'b']:\n  count = count + 1\n  print( str(count) + item_a)\n</code></pre>\n<p>This results in</p>\n<blockquote>\n<p>1a</p>\n<p>2a</p>\n</blockquote>\n<p>But there is a shortcut. You can use a nifty function called <a href=\"https://docs.python.org/3/library/functions.html#enumerate\" rel=\"nofollow noreferrer\">enumerate</a> to get the count of each item in the for loop.</p>\n<pre><code>for count, item_a in enumerate(['a', 'b']):\n  print( str(count) + item_a)\n</code></pre>\n<p>Which will also give you</p>\n<blockquote>\n<p>1a</p>\n<p>2a</p>\n</blockquote>\n<hr />\n<h2>Solution to your problem</h2>\n<p>With all this said, you can create your list of files like so</p>\n<pre><code># First we loop over os.walk to get the files in the current directory and all sub-directories\nfor root, dirs, files in os.walk(path):\n\n   # And then using enumerate, we can consolidate those two for loops into one loop that properly counts everything\n   for item, file in enumerate(files):\n      print(item, os.path.join(root, file))\n</code></pre>\n<p>And if you don't care about sub-directories, you can just do</p>\n<pre><code>for item, file in enumerate(os.listdir(path)):\n  print(item, file)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 584, "user_id": 3794266, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001394080479/picture?type=large", "display_name": "feebarscevicius", "link": "https://stackoverflow.com/users/3794266/feebarscevicius"}, "is_accepted": false, "score": 1, "last_activity_date": 1541028087, "creation_date": 1541028087, "answer_id": 53093226, "question_id": 53093121, "link": "https://stackoverflow.com/questions/53093121/python-use-count-in-list/53093226#53093226", "title": "Python use count in list", "body": "<p>It's not quite clear what you want with your code. What's that <code>count</code> for?</p>\n\n<p>Maybe this is what you want:</p>\n\n<pre><code>import os\n\npath = '/etc/NetworkManager/system-connections/'\ndirs = os.listdir(path)\n\nfor num, file in enumerate(dirs):\n  print(num+1, file)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196, "user_id": 2071715, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Qd3wi.jpg?s=128&g=1", "display_name": "Myrtue", "link": "https://stackoverflow.com/users/2071715/myrtue"}, "is_accepted": false, "score": 1, "last_activity_date": 1541028172, "creation_date": 1541028172, "answer_id": 53093234, "question_id": 53093121, "link": "https://stackoverflow.com/questions/53093121/python-use-count-in-list/53093234#53093234", "title": "Python use count in list", "body": "<p>I'm not sure what count is supposed to do here, but if you want the files in the directory (not subdirectories) you just need os.listdir. </p>\n\n<pre><code>import os\npath = '/etc/NetworkManager/system-connections/'\ndirs = os.listdir(path)\n\nfor i in range(len(dirs)):\n    print(i + 1, dirs[i])\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 8591286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cbed2ef58edb6645b4c93f0677b0bbb?s=128&d=identicon&r=PG&f=1", "display_name": "peter", "link": "https://stackoverflow.com/users/8591286/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 53093219, "answer_count": 4, "score": 0, "last_activity_date": 1541035076, "creation_date": 1541027132, "last_edit_date": 1592644375, "question_id": 53093121, "link": "https://stackoverflow.com/questions/53093121/python-use-count-in-list", "title": "Python use count in list", "body": "<p>I want to make a list of all of my saved wifi files, with a number in front of each file but my output is not what I what from my code.</p>\n<pre><code>import os,\npath = '/etc/NetworkManager/system-connections/'\ndirs = os.listdir(path)\ncount = sum([len(files) for r, d, files in os.walk(path)])\n\nfor file in dirs:\n   for item in range(count):\n   print(item, file)\n</code></pre>\n<p><strong>Expected output:</strong></p>\n<blockquote>\n<p>1 wifi-test</p>\n<p>2 androidAP</p>\n<p>3 androidAPtest</p>\n</blockquote>\n<p><strong>output now:</strong></p>\n<blockquote>\n<p>0 wifi-test</p>\n<p>1 androidAP</p>\n<p>2 androidAPtest</p>\n<p>0 wifi-test</p>\n<p>1 androidAP</p>\n<p>2 androidAPtest</p>\n</blockquote>\n<p>and then it starts over</p>\n"}, {"tags": ["python", "sql", "sql-server", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8947782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/go9Zq.jpg?s=128&g=1", "display_name": "E.Ostler", "link": "https://stackoverflow.com/users/8947782/e-ostler"}, "edited": false, "score": 0, "creation_date": 1541086311, "post_id": 53093249, "comment_id": 93104090, "body": "I&#39;ll test that out and see what happens"}, {"owner": {"reputation": 5, "user_id": 8947782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/go9Zq.jpg?s=128&g=1", "display_name": "E.Ostler", "link": "https://stackoverflow.com/users/8947782/e-ostler"}, "edited": false, "score": 0, "creation_date": 1541087910, "post_id": 53093249, "comment_id": 93105051, "body": "When I do that I get an odbc.ProgrammingError: (&#39;The SQL contains 0 parameter markers but 1 parameters were supplied&#39;, &#39;HY000&#39;)"}], "tags": [], "owner": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "is_accepted": false, "score": 0, "last_activity_date": 1541028298, "creation_date": 1541028298, "answer_id": 53093249, "question_id": 53093114, "link": "https://stackoverflow.com/questions/53093114/why-is-pandas-returning-an-empty-dataframe-from-this-sql-query-when-where-clause/53093249#53093249", "title": "why is pandas returning an empty dataframe from this sql query when WHERE clause is used?", "body": "<p>Does it work if you put the \"?\" into quotes?</p>\n\n<p>Note that if the backend is postgres, you must use simple quotes</p>\n"}], "owner": {"reputation": 5, "user_id": 8947782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/go9Zq.jpg?s=128&g=1", "display_name": "E.Ostler", "link": "https://stackoverflow.com/users/8947782/e-ostler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 737, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1541087756, "creation_date": 1541027081, "last_edit_date": 1541087756, "question_id": 53093114, "link": "https://stackoverflow.com/questions/53093114/why-is-pandas-returning-an-empty-dataframe-from-this-sql-query-when-where-clause", "title": "why is pandas returning an empty dataframe from this sql query when WHERE clause is used?", "body": "<p>I have a python program that uses pandas to write them to a csv, one of the column values I use as the file folder name. One of my columns contains dates in a column that is CAST as just a date in the format of 2018-10-31 and I need the program to generate files for today only. When I add an AND clause with CAST(GETDATE() AS DATE) or CONVERT(DATE, GETDATE()) it returns an empty dataframe, when I remove the AND it works just fine, but builds a CSV containing all of the info for all dates in the table. </p>\n\n<p>my error:</p>\n\n<pre><code>Empty DataFrame\nColumns: [ ScheduleDate,  Vendor, note, WOGFileFolder]\nIndex: []\nTraceback (most recent call last):\n  File \"testing.py\", line 85, in &lt;module&gt;\n    WOG_folder = pickups_df.at[0, 'WOGFileFolder']\n  File \"File Path Redacted\", line 2141, in __getitem__\n    key = self._convert_key(key)\n  File \"File Path Redacted\", line 2227, in _convert_key\n    raise ValueError(\"At based indexing on an non-integer \"\nValueError: At based indexing on an non-integer index can only have non-integer indexers\n</code></pre>\n\n<p>my code: </p>\n\n<pre><code>stmt_vendor = \"\"\"\nSELECT DISTINCT\nVendor\nFROM SOME_DB..SOME_TABLE;\"\"\"\ncur.execute(stmt_vendor)\npartners = cur.fetchall()\n\nfor partner in partners:\nstmt_vendor_pickup_list = \"\"\"\nSELECT \n    ScheduleDate\n    , Vendor\n    , note\n    , WOGFileFolder\nFROM SOME_DB..SOME_TABLE\nWHERE Vendor = ?\nAND ScheduleDate = CAST(GETDATE() AS DATE\nORDER BY ScheduleDate;\"\"\"\npickups_df = pd.read_sql_query(stmt_vendor_pickup_list, conn, params= partner)\nlogger.infor(pickups_df)\nWOG_folder = pickups_df.at[0, 'WOGFileFolder']\n\nvendor_dir = 'FILE_PATH_REDACTED' + WOG_folder\n\nif not os.path.exists(vendor_dir):\n    os.mkdir(vendor_dir)\n    logger.info(\"CREATED DIR FOR: \" + WOG_folder)\nelse:\n    logger.info(\"DIR FOR \" + WOG_folder + \" ALREADY EXISTS\")\n\npickup_file_name = WOG_folder + '_testing.csv'\n</code></pre>\n\n<p>and then the program continues on to build the CSV using this info.</p>\n"}, {"tags": ["python", "python-3.x", "duplicates", "bigdata"], "comments": [{"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 1, "creation_date": 1541027195, "post_id": 53093095, "comment_id": 93082957, "body": "that&#39;s going to be very slow using lists!  maybe try making <code>a</code> a <code>set()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 286757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/amfPK.jpg?s=128&g=1", "display_name": "direct00", "link": "https://stackoverflow.com/users/286757/direct00"}, "edited": false, "score": 0, "creation_date": 1541046274, "post_id": 53093140, "comment_id": 93086756, "body": "The input file is plain text, with one item per line separated by a return. Thanks for the ideas!"}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "reply_to_user": {"reputation": 382, "user_id": 286757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/amfPK.jpg?s=128&g=1", "display_name": "direct00", "link": "https://stackoverflow.com/users/286757/direct00"}, "edited": false, "score": 0, "creation_date": 1541047113, "post_id": 53093140, "comment_id": 93086888, "body": "How about <code>words = open(&quot;online.txt&quot;, &quot;rt&quot;).read().replace(&quot;\\r&quot;,&quot;&quot;).split(&quot;\\n&quot;)</code> - this will at least read the file in one big chunk, and give you a list of words.  It&#39;s hard to say if it will be faster than what you have already."}], "tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": true, "score": 1, "last_activity_date": 1541027313, "creation_date": 1541027313, "answer_id": 53093140, "question_id": 53093095, "link": "https://stackoverflow.com/questions/53093095/slow-list-parsing-with-python3-7-for-duplicate-item-removal/53093140#53093140", "title": "Slow list parsing with python3.7 for duplicate item removal", "body": "<p>The problem is with a simple list, python has to search through every entry each time before adding a new one.</p>\n\n<p>You could try a python dictionary or a set instead of a list.  These data structures are faster for determining if an entry exists already.</p>\n\n<p>Simply change your code:</p>\n\n<pre><code>a = {}  # set\nx = {}\n\nwith open(\"online.txt\") as file:\n    for l in file:\n        if l in a:\n            print('duplicate')\n            print(l)\n        else:\n            x.add(l.strip())  # add to the set\n        a.add(l)\n</code></pre>\n\n<p>You don't specify your input file-format, but there may be speed increases possibly by loading the whole data-set into a giant string, then splitting it up with python functions, rather than manually like you do here.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1541447280, "post_id": 53161165, "comment_id": 93212762, "body": "Note that the explicit loop is unnecessary and slower than just letting Python do the work. <code>set</code> takes an arbitrary iterable as an argument and can consume it, deduping as it goes. Just remove the original definition of <code>x</code> and the loop, replacing both with just do <code>x = set(file)</code> and you get the same result, but <i>much</i> faster."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1541447445, "post_id": 53161165, "comment_id": 93212824, "body": "If you need to preserve order, as of 3.6 in CPython, 3.7 as a language guarantee, <code>dict</code>s preserve insertion order (first insertion; duplicates get ignored), and <code>dict.fromkeys</code> works very similarly to the <code>set</code> constructor otherwise. So <code>x = dict.fromkeys(file)</code> would get you a <code>dict</code> with the unique keys in the same order they were first seen (on earlier versions of Python, you&#39;d have to use <code>collections.OrderedDict.fromkeys</code>)."}, {"owner": {"reputation": 382, "user_id": 286757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/amfPK.jpg?s=128&g=1", "display_name": "direct00", "link": "https://stackoverflow.com/users/286757/direct00"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1541449649, "post_id": 53161165, "comment_id": 93213774, "body": "@ShadowRanger, using your version took 133.60 seconds, vs 173.72 seconds with the explicit loop. Also simplified the code nicely."}], "tags": [], "owner": {"reputation": 382, "user_id": 286757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/amfPK.jpg?s=128&g=1", "display_name": "direct00", "link": "https://stackoverflow.com/users/286757/direct00"}, "is_accepted": false, "score": 0, "last_activity_date": 1541447074, "creation_date": 1541447074, "answer_id": 53161165, "question_id": 53093095, "link": "https://stackoverflow.com/questions/53093095/slow-list-parsing-with-python3-7-for-duplicate-item-removal/53161165#53161165", "title": "Slow list parsing with python3.7 for duplicate item removal", "body": "<p>In the end, here's the code I used to remove duplicates:</p>\n\n<pre><code>x = set([])\n\nwith open(\"all.txt\") as file:\n    for l in file:\n       x.add(l)\n\n    print('count of array: ')\n    print(len(x))\n</code></pre>\n"}], "owner": {"reputation": 382, "user_id": 286757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/amfPK.jpg?s=128&g=1", "display_name": "direct00", "link": "https://stackoverflow.com/users/286757/direct00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 53093140, "answer_count": 2, "score": 1, "last_activity_date": 1541447074, "creation_date": 1541026948, "question_id": 53093095, "link": "https://stackoverflow.com/questions/53093095/slow-list-parsing-with-python3-7-for-duplicate-item-removal", "title": "Slow list parsing with python3.7 for duplicate item removal", "body": "<p>I'm trying to remove duplicate items from a large text file containing 250 million items at 4.4 Gigabytes.</p>\n\n<p>I was impressed to see that I could load this file into a python list in just a few minutes with the following code:</p>\n\n<pre><code>x = []\n\nwith open(\"online.txt\") as file:\n    for l in file:\n       x.append(l)\n\n    print('count of array: ')\n    print(len(x))\n</code></pre>\n\n<p>But when I tried to simply check to make sure the next item doesn't exist before added it to an array, it's taking many hours to finish. I feel like I'm missing something simple that would really speed this up.</p>\n\n<p>Here's the code I used to check for duplicate items:</p>\n\n<pre><code>a = []\nx = []\n\nwith open(\"online.txt\") as file:\n    for l in file:\n        if l in a:\n            print('duplicate')\n            print(l)\n        else:\n            x.append(l.strip())\n        a.append(l)\n\n    print('with duplicates: ');\n    print(len(a))\n    print('without duplicates: ')\n    print(len(x))\n</code></pre>\n\n<p>This is running on a server with 64 Gigs of ram and modern dual xeon processors.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "is_accepted": false, "score": 0, "last_activity_date": 1541027174, "creation_date": 1541027174, "answer_id": 53093128, "question_id": 53093093, "link": "https://stackoverflow.com/questions/53093093/how-to-accept-multiple-answers-in-1-variable/53093128#53093128", "title": "how to accept multiple answers in 1 variable", "body": "<p>You could create a list with possible answers of the user:</p>\n\n<p>got_list = ['got', 'Game of Thrones', 'GOT']</p>\n\n<p>Then:</p>\n\n<pre><code>while guess not in got_list and guess_cout &lt; 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10588467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BMHzLhNsHeI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCLYwyM1i9md7TRd5QwkuMtr_OFHA/mo/photo.jpg?sz=128", "display_name": "Icaro Aguiar Perez", "link": "https://stackoverflow.com/users/10588467/icaro-aguiar-perez"}, "is_accepted": false, "score": 0, "last_activity_date": 1541027842, "creation_date": 1541027842, "answer_id": 53093202, "question_id": 53093093, "link": "https://stackoverflow.com/questions/53093093/how-to-accept-multiple-answers-in-1-variable/53093202#53093202", "title": "how to accept multiple answers in 1 variable", "body": "<p>Instead of iterating through the whole list manually and doing the comparison with  <code>for x in list...</code> you could also use the <code>in</code> operator:</p>\n\n<p><code>if x in list return True</code> or even better just return the <code>in</code> comparison straight up <code>return x in list</code>, just keep in mind that for string comparison letter casing does come into play and you should either use <code>'string'.upper()'</code> or <code>'string'.lower()</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 10504394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6HoQQMQxY64/AAAAAAAAAAI/AAAAAAAAAsY/FfsAHWbASeQ/photo.jpg?sz=128", "display_name": "Toad", "link": "https://stackoverflow.com/users/10504394/toad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1541027842, "creation_date": 1541026945, "last_edit_date": 1541027031, "question_id": 53093093, "link": "https://stackoverflow.com/questions/53093093/how-to-accept-multiple-answers-in-1-variable", "title": "how to accept multiple answers in 1 variable", "body": "<p>im trying to get users to input different strings for Fav_show that can trigger the correct show. i've tried <code>Fav_show = (\"game of thrones\", \"GOT\")</code> and <code>Fav_show = (\"game of thrones\" or \"GOT\")</code> but my script makes <code>guess != Fav_show</code> if i enter game of thrones/GOT, how would I got about making <code>guess = Fav_show</code> for multiple answers.   </p>\n\n<pre><code>Fav_show = (\"game of thrones\")\nguess = \"\"\nguess_count = 0\nguess_limit = 0\nguess_a_show = False\n\nif raw_input == \"whats your favourite tv show\":\n    guess_a_show = input(\"you have to take a guess, okay? \")\n    if guess_a_show == \"okay\":\n        print(\"take a guess, you have 5 chances \")\n        while guess != Fav_show and guess_count &lt; 1:\n</code></pre>\n\n<p>Sorry I'm new to python, and I've tried looking around for about 30-45 mins, but maybe I'm looking at the wrong places</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1541026887, "post_id": 53093075, "comment_id": 93082886, "body": "%s expects a string and your passing a DataFrame"}, {"owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541039046, "post_id": 53093075, "comment_id": 93085463, "body": "you could iterate through the columns to get what you&#39;re after"}, {"owner": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "edited": false, "score": 0, "creation_date": 1541189168, "post_id": 53093075, "comment_id": 93145073, "body": "I got you. Thanks a lot!!"}], "answers": [{"tags": [], "owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1541079539, "creation_date": 1541079539, "answer_id": 53102458, "question_id": 53093075, "link": "https://stackoverflow.com/questions/53093075/how-to-obtain-output-files-labeled-with-dictionary-keys/53102458#53102458", "title": "How to obtain output files labeled with dictionary keys", "body": "<p>Iterating through columns will get output.</p>\n\n<pre><code>def Price_frequency(df):\n    for col in df.columns[2:]\n        frequency=df.groupby(col).size()/len(df)\n\n    return frequency.reset_index().to_csv(\"Output_%s.txt\" %(col),sep='\\t')\n</code></pre>\n\n<p>Reference: <a href=\"https://stackoverflow.com/questions/51408351/pandas-iterate-through-columns-and-starting-at-one-column\">Pandas: Iterate through columns and starting at one column</a></p>\n\n<p>Note: haven't gotten to test this yet</p>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1541462385, "last_edit_date": 1541462385, "creation_date": 1541462084, "answer_id": 53163974, "question_id": 53093075, "link": "https://stackoverflow.com/questions/53093075/how-to-obtain-output-files-labeled-with-dictionary-keys/53163974#53163974", "title": "How to obtain output files labeled with dictionary keys", "body": "<p>A couple of points:</p>\n\n<ol>\n<li><code>%s</code> requires you to input a string. But in Python 3.6+ you can use formatted string literals, which you may find more readable.</li>\n<li>Your function doesn't need to return anything here. You are using it to output csv files in a loop. Don't feel the need to add a <code>return</code> statement if it doesn't serve a purpose.</li>\n</ol>\n\n<p>So you can do the following:</p>\n\n<pre><code>def price_frequency(df_dict, df_name, keys=['Price']):\n    frequency = df_dict[df_name].groupby(keys).size() / len(df_dict[df_name].index)\n    frequency.reset_index().to_csv(f'Output_{df_name}.txt', sep='\\t')\n\ndf_dict = {'A': df1, 'B': df2, 'C': df3}\n\nfor df_name in df:\n    price_frequency(df_dict, df_name, keys=['Price'])\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 53163974, "answer_count": 2, "score": 0, "last_activity_date": 1541462385, "creation_date": 1541026751, "question_id": 53093075, "link": "https://stackoverflow.com/questions/53093075/how-to-obtain-output-files-labeled-with-dictionary-keys", "title": "How to obtain output files labeled with dictionary keys", "body": "<p>I am  a python/pandas user and I have a multiple dataframe like df1, df2,df3....\nI want to name them as A, B, C, ... thus I wrote as below.</p>\n\n<pre><code>df_dict = {\"A\":df1, \"B\":df2,'C':df3,....}\n</code></pre>\n\n<p>Each dataframe has \"Price\" column and I want to know the output from the following formula.</p>\n\n<pre><code>frequency=df.groupby(\"Price\").size()/len(df)\n</code></pre>\n\n<p>I made the following definition and want to obtain outputs from each dataframe.</p>\n\n<pre><code>def Price_frequency(df,keys=[\"Price\"]):\n    frequency=df.groupby(keys).size()/len(df)\n    return frequency.reset_index().to_csv(\"Output_%s.txt\" %(df),sep='\\t')\n</code></pre>\n\n<p>As a first trial, I did \n    Price_frequency(df1,keys=[\"Price\"])\nbut this did not work. It seems %s is wrong.</p>\n\n<p>Ideally, I want output files named as \"Output_A.txt\", \"Output_B.txt\"...\nIf you could help me, I would be grateful for that very much.</p>\n"}, {"tags": ["python", "performance", "numpy"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1541027526, "post_id": 53093073, "comment_id": 93083053, "body": "I think you forgot to include the test for native multiplication..."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1541029256, "post_id": 53093073, "comment_id": 93083504, "body": "A small portion of the overhead is probably related to the pairwise summation implementation. Only a small portion, though - <code>prod</code> doesn&#39;t do the pairwise thing, as far as I&#39;m aware, and <code>prod</code> runs in about 5/6 the time of <code>sum</code> in my tests. I <i>think</i> NumPy is also using SIMD for the <code>+</code> and not the <code>sum</code>, but I&#39;m not yet sure."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 1, "creation_date": 1541029312, "post_id": 53093073, "comment_id": 93083518, "body": "your &quot;Multiplication&quot; is doing something different\u2026 the others just use <code>p1</code> and basically ignore <code>p2</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1541029773, "post_id": 53093073, "comment_id": 93083604, "body": "I believe most of the overhead is a combination of 1) using a general binary reduction implementation for the <code>sum</code>, where <code>+</code> gets to completely avoid looping in the axis-1 direction, and 2) NumPy not optimizing the outer loop for the <code>sum</code> as well as the loop for the <code>+</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1541030142, "post_id": 53093073, "comment_id": 93083670, "body": "<a href=\"https://github.com/numpy/numpy/blob/v1.15.3/numpy/core/src/umath/loops.c.src#L1662\" rel=\"nofollow noreferrer\">Here&#39;s the source</a> for the pairwise summation routine. The number of elements summed is small enough that the routine should immediately go into the straightforward non-pairwise loop case, but the code path still seems to have some overhead over the code path used for things like <code>prod</code>. As previously stated, this is only a small portion of the overhead relative to <code>+</code>."}, {"owner": {"reputation": 1098, "user_id": 5547936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6559860d61d089ce179ce0879074a4d?s=128&d=identicon&r=PG&f=1", "display_name": "beesleep", "link": "https://stackoverflow.com/users/5547936/beesleep"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541030196, "post_id": 53093073, "comment_id": 93083683, "body": "@SamMason  edited. Now, there should be the same number of operations. Still surprizing that * is roughtly as fast as +"}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 2, "creation_date": 1541030377, "post_id": 53093073, "comment_id": 93083724, "body": "@beesleep Multiplication and addition aren&#39;t that different in floating point; If anything, multiplication is a bit easier. It&#39;s different for integers of course."}, {"owner": {"reputation": 1098, "user_id": 5547936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6559860d61d089ce179ce0879074a4d?s=128&d=identicon&r=PG&f=1", "display_name": "beesleep", "link": "https://stackoverflow.com/users/5547936/beesleep"}, "reply_to_user": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1541030517, "post_id": 53093073, "comment_id": 93083757, "body": "@Cubic, I didn&#39;t know that, thanks !"}, {"owner": {"reputation": 1098, "user_id": 5547936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6559860d61d089ce179ce0879074a4d?s=128&d=identicon&r=PG&f=1", "display_name": "beesleep", "link": "https://stackoverflow.com/users/5547936/beesleep"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1541031320, "post_id": 53093073, "comment_id": 93083931, "body": "@user2357112, the big difference is when using axis argument... (of course)."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 1, "creation_date": 1541031845, "post_id": 53093073, "comment_id": 93084040, "body": "That is so weird, mainly because axis should return a memory-view of non-contiguous elements (this is hardly optimized code, because you&#39;re being very cache-unfriendly here). In fact, I can ~10x difference in the performance of the code just by changing <code>p1 = np.random.rand(10000, 2)</code> to <code>p1 = np.random.rand(2, 10000)</code> and <code>p1.sum(axis=1)</code> to <code>p1.sum(axis=0)</code>."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 1, "creation_date": 1541053270, "post_id": 53093073, "comment_id": 93088355, "body": "@AlexanderHuszagh, changing the <code>order</code> to &#39;F&#39; (with a copy if needed) also gives the faster times."}, {"owner": {"reputation": 1098, "user_id": 5547936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6559860d61d089ce179ce0879074a4d?s=128&d=identicon&r=PG&f=1", "display_name": "beesleep", "link": "https://stackoverflow.com/users/5547936/beesleep"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1541073711, "post_id": 53093073, "comment_id": 93097207, "body": "@hpaulj, Im&#39; considering changing the way I store the coordinates from [[x, y], [x, y], ...] to [[x, x, ...][y, y,...], or do what you suggest"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1541091924, "post_id": 53093073, "comment_id": 93107278, "body": "@hpaulj Yeah, using a fortran order would be way faster as well (because it&#39;s all about how the performance deals with memory alignment)."}], "answers": [{"comments": [{"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1541033017, "post_id": 53093729, "comment_id": 93084260, "body": "Although a good guess, NumPy doesn&#39;t actually have to duplicate the array of floats. NumPy has an extensive memory view system, which allows it to store an array with a reference-counted pointer to the original buffer, the start, the length, and the stride. To create an axis or do fancy indexing, no data duplications are <b>ever</b> necessary... You can verify this by checking <code>a = np.arange(100); b = a[::-1]; a.ctypes.data == b.ctypes.data</code>, which checks if the pointers to the start of the arrays <code>a</code> and <code>b</code> are the same, and it will print true."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1541033254, "post_id": 53093729, "comment_id": 93084317, "body": "You can also verify this by the same code, except with setting a value: <code>a = np.arange(100); b = a[::-1]; a[4] = 5; b[2]</code>, which will print 5, despite the value normally being 4."}, {"owner": {"reputation": 348, "user_id": 10501472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lJuq3.jpg?s=128&g=1", "display_name": "mevers303", "link": "https://stackoverflow.com/users/10501472/mevers303"}, "reply_to_user": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1541033296, "post_id": 53093729, "comment_id": 93084327, "body": "So the overhead doesn&#39;t come from splitting the array, but the addition function can indeed add the arrays in parallel, correct?  Which is faster than a ton of calls to reduce."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1541033645, "post_id": 53093729, "comment_id": 93084387, "body": "Honestly I&#39;d have to check the implementation to be sure, but it would surprise me if NumPy did it that way. Seems extremely inefficient, since it could just double the stride, increment 1 pointer by 8, call a highly optimized C add routine, and call it a day in both cases (obviously, it must do a lot more work, since indexing (especially fancy indexing) and working with potentially multi-dimensional arrays is quite complex)."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 1, "creation_date": 1541034025, "post_id": 53093729, "comment_id": 93084445, "body": "Wait... You&#39;re actually right. It calls reduce under the hood. Not 10,000 time, but still... Mind blown... <a href=\"https://github.com/numpy/numpy/blob/9d0225b800df3c2b0bffee9960df87b15527509c/numpy/core/src/multiarray/calculation.c#L519\" rel=\"nofollow noreferrer\">github.com/numpy/numpy/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 348, "user_id": 10501472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lJuq3.jpg?s=128&g=1", "display_name": "mevers303", "link": "https://stackoverflow.com/users/10501472/mevers303"}, "is_accepted": false, "score": 0, "last_activity_date": 1541033028, "last_edit_date": 1541033028, "creation_date": 1541032597, "answer_id": 53093729, "question_id": 53093073, "link": "https://stackoverflow.com/questions/53093073/why-is-numpy-sum-10-times-slower-than-the-operator/53093729#53093729", "title": "Why is numpy sum 10 times slower than the + operator?", "body": "<p>Well for .sum() with axis vs without, with the axis has to generate an array of floats as long as your input, with an element for each row.  This means that it has to call <a href=\"https://docs.python.org/3/library/functools.html#functools.reduce\" rel=\"nofollow noreferrer\">reduce()</a> 10,000 times along axis=1.  Without the axis argument it calculates the sum of every element into a single float, which is just one call to reduce through the flat representation of the array.</p>\n\n<p>I'm not sure why the manual add function is faster, and I don't feel like digging through the source code but I think I have a pretty good guess.  I believe that that the overhead comes from it having to perform reduce across axis=1 for each row, so 10,000 separate calls to reduce.  In the manual add function, the axis split is performed just a single time when defining the parameters of the \"+\" function, and then each element of the split columns can be added together in parallel.</p>\n"}, {"comments": [{"owner": {"reputation": 9216, "user_id": 613246, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09cd8fb3ecae7d982c5bb0e1081dcf69?s=128&d=identicon&r=PG", "display_name": "Eelco Hoogendoorn", "link": "https://stackoverflow.com/users/613246/eelco-hoogendoorn"}, "edited": false, "score": 1, "creation_date": 1541073494, "post_id": 53095569, "comment_id": 93097110, "body": "Interesting, and slightly surprising to me as well. I would have expected some overhead, but not this much. Almost makes it seem worth it to implement a special case trivial reduction if the axis size is under some treshold."}, {"owner": {"reputation": 1098, "user_id": 5547936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6559860d61d089ce179ce0879074a4d?s=128&d=identicon&r=PG&f=1", "display_name": "beesleep", "link": "https://stackoverflow.com/users/5547936/beesleep"}, "edited": false, "score": 0, "creation_date": 1541073874, "post_id": 53095569, "comment_id": 93097285, "body": "I agree it feels surprising. I noticed the same kind of overhead 10 x with linspace over arange"}], "tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": true, "score": 14, "last_activity_date": 1541074089, "last_edit_date": 1541074089, "creation_date": 1541049676, "answer_id": 53095569, "question_id": 53093073, "link": "https://stackoverflow.com/questions/53093073/why-is-numpy-sum-10-times-slower-than-the-operator/53095569#53095569", "title": "Why is numpy sum 10 times slower than the + operator?", "body": "<p>The main difference is larger overhead when <code>a.sum(axis=1)</code> is calculated. Calculating a reduction (in this case <code>sum</code>) is not a trivial matter:</p>\n\n<ul>\n<li>one has to take the round-off errors into account and thus uses <a href=\"https://en.wikipedia.org/wiki/Pairwise_summation\" rel=\"noreferrer\">pairwise summation</a> to reduce it.</li>\n<li>tiling is important for bigger arrays, as it makes the most out of the available cache</li>\n<li>In order to be able to use the SIMD-instructions/out-of-order execution abilities of modern CPUs one should calculate multiple rows in parallel</li>\n</ul>\n\n<p>I have discussed the topics above in more details for example <a href=\"https://stackoverflow.com/a/49393485/5769463\">here</a> and <a href=\"https://stackoverflow.com/a/48362111/5769463\">here</a>.</p>\n\n<p>However, all this is not needed and not better than a naive summation if there are only two elements to add - you get the same result but with much less overhead and faster.</p>\n\n<p>For only 1000 elements, the overhead of calling numpy functionality is probably higher than actually doing these 1000 additions (or multiplications for that matter, because on modern CPUs pipelined additions/multiplications have the same cost) -as you can see, that for 10^4 the running time is only about 2 times higher, a sure sign that overhead plays a bigger role for 10^3! In <a href=\"https://stackoverflow.com/a/42591263/5769463\">this answer</a> the impact of overhead and cache misses is investigated in more details.</p>\n\n<p>Let's take a look at profiler-result to see whether the theory above holds (I use <a href=\"https://en.wikipedia.org/wiki/Perf_(Linux)\" rel=\"noreferrer\"><code>perf</code></a>):</p>\n\n<p>For <code>a.sum(axis=1)</code>:</p>\n\n<pre><code>  17,39%  python   umath.cpython-36m-x86_64-linux-gnu.so       [.] reduce_loop\n  11,41%  python   umath.cpython-36m-x86_64-linux-gnu.so       [.] pairwise_sum_DOUBLE\n   9,78%  python   multiarray.cpython-36m-x86_64-linux-gnu.so  [.] npyiter_buffered_reduce_iternext_ite\n   9,24%  python   umath.cpython-36m-x86_64-linux-gnu.so       [.] DOUBLE_add\n   4,35%  python   python3.6                                   [.] _PyEval_EvalFrameDefault\n   2,17%  python   multiarray.cpython-36m-x86_64-linux-gnu.so  [.] _aligned_strided_to_contig_size8_src\n   2,17%  python   python3.6                                   [.] lookdict_unicode_nodummy\n   ...\n</code></pre>\n\n<p>The overhead of using <code>reduce_loop</code>, <code>pairwise_sum_DOUBLE</code> is dominating.</p>\n\n<p>For <code>a[:,0]+a[:,1])</code>:</p>\n\n<pre><code>   7,24%  python   python3.6                                   [.] _PyEval_EvalF\n   5,26%  python   python3.6                                   [.] PyObject_Mall\n   3,95%  python   python3.6                                   [.] visit_decref\n   3,95%  python   umath.cpython-36m-x86_64-linux-gnu.so       [.] DOUBLE_add\n   2,63%  python   python3.6                                   [.] PyDict_SetDef\n   2,63%  python   python3.6                                   [.] _PyTuple_Mayb\n   2,63%  python   python3.6                                   [.] collect\n   2,63%  python   python3.6                                   [.] fast_function\n   2,63%  python   python3.6                                   [.] visit_reachab\n   1,97%  python   python3.6                                   [.] _PyObject_Gen\n</code></pre>\n\n<p>As expected: Python overhead plays a big role, a simple <code>DOUBLE_add</code> is used.</p>\n\n<hr>\n\n<p>There are less overhead when calling <code>a.sum()</code></p>\n\n<ul>\n<li>for once,  <code>reduce_loop</code> isn't called for every row but only once, which means considerable less overhead.</li>\n<li>no new resulting arrays are created, there is no longer need to write 1000 doubles to the memory.</li>\n</ul>\n\n<p>so it can be expected, that <code>a.sum()</code> is faster (despite the fact, that 2000 and not 1000 addition must be made - but as we have seen it is mostly about overhead and the actual work - the additions aren't responsible for the big share of the running time).</p>\n\n<hr>\n\n<p>Data obtaining by running:</p>\n\n<pre><code>perf record python run.py\nperf report\n</code></pre>\n\n<p>and </p>\n\n<pre><code>#run.py\nimport numpy as np\na=np.random.rand(1000,2)\n\nfor _ in range(10000):\n  a.sum(axis=1)\n  #a[:,0]+a[:,1]\n</code></pre>\n"}], "owner": {"reputation": 1098, "user_id": 5547936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6559860d61d089ce179ce0879074a4d?s=128&d=identicon&r=PG&f=1", "display_name": "beesleep", "link": "https://stackoverflow.com/users/5547936/beesleep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2733, "favorite_count": 2, "accepted_answer_id": 53095569, "answer_count": 2, "score": 15, "last_activity_date": 1570712605, "creation_date": 1541026739, "last_edit_date": 1570712605, "question_id": 53093073, "link": "https://stackoverflow.com/questions/53093073/why-is-numpy-sum-10-times-slower-than-the-operator", "title": "Why is numpy sum 10 times slower than the + operator?", "body": "<p>I noticed that very strangely, np.sum is 10x slower than a hand written sum.</p>\n\n<p><strong>np.sum with axis:</strong></p>\n\n<pre><code>p1 = np.random.rand(10000, 2)\ndef test(p1):\n    return p1.sum(axis=1)\n%timeit test(p1)\n</code></pre>\n\n<blockquote>\n  <p>186 \u00b5s \u00b1 4.21 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)</p>\n</blockquote>\n\n<p><strong>np.sum without axis:</strong></p>\n\n<pre><code>p1 = np.random.rand(10000, 2)\ndef test(p1):\n    return p1.sum()\n%timeit test(p1)\n</code></pre>\n\n<blockquote>\n  <p>17.9 \u00b5s \u00b1 236 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)</p>\n</blockquote>\n\n<p><strong>+:</strong></p>\n\n<pre><code>p1 = np.random.rand(10000, 2)\ndef test(p1):\n    return p1[:,0] + p1[:,1]\n%timeit test(p1)\n</code></pre>\n\n<blockquote>\n  <p>15.8 \u00b5s \u00b1 328 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)</p>\n</blockquote>\n\n<p><strong>Multiplication:</strong></p>\n\n<pre><code>p1 = np.random.rand(10000, 2)\ndef test(p1):\n    return p1[:,0]*p1[:,1]\n%timeit test(p1)\n</code></pre>\n\n<blockquote>\n  <p>15.7 \u00b5s \u00b1 701 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)</p>\n</blockquote>\n\n<p>I don't see any reason for this. Any idea why? My numpy version is <code>1.15.3</code>.</p>\n\n<p>EDIT: \nwith 10000000:</p>\n\n<pre><code>np.sum (with axis): 202 ms (5 x)\nnp.sum (without axis): 12 ms\n+ : 46 ms (1 x)\n* : 44.3 ms \n</code></pre>\n\n<p>So I guess there is some overhead playing around, to some extent...</p>\n"}, {"tags": ["python", "python-3.x", "pytest"], "answers": [{"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": true, "score": 3, "last_activity_date": 1541035688, "creation_date": 1541035688, "answer_id": 53094052, "question_id": 53093072, "link": "https://stackoverflow.com/questions/53093072/how-can-i-find-what-fixtures-a-test-uses/53094052#53094052", "title": "How can I find what fixtures a test uses?", "body": "<p>Each item stores the list of used fixtures in the <code>fixturenames</code> attribute. the check is thus quite simple:</p>\n\n<pre><code>def pytest_collection_modifyitems(items):\n    for item in items:\n        if 'spark_fixture' in item.fixturenames:\n            item.add_marker(pytest.mark.spark)\n</code></pre>\n"}], "owner": {"reputation": 7965, "user_id": 503826, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/610f9ec2a3482c1706afb5a79d766219?s=128&d=identicon&r=PG", "display_name": "kelloti", "link": "https://stackoverflow.com/users/503826/kelloti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 53094052, "answer_count": 1, "score": 5, "last_activity_date": 1552847537, "creation_date": 1541026728, "last_edit_date": 1541035728, "question_id": 53093072, "link": "https://stackoverflow.com/questions/53093072/how-can-i-find-what-fixtures-a-test-uses", "title": "How can I find what fixtures a test uses?", "body": "<p>I want to automatically mark tests based on which fixtures they use. For instance, if a test uses a fixture named <code>spark</code>, I'd like to add a marker called <code>uses_spark</code> so that I can automatically ignore them.</p>\n\n<p>I know I can use <code>pytest_collection_modifyitems</code> in <code>conftest.py</code> to add markers.</p>\n\n<pre><code>def pytest_collection_modifyitems(items):\n  for item in items:\n    if uses_spark_fixture(item):\n      item.add_marker(pytest.mark.spark)\n\ndef uses_spark_fixture(item):\n  ???\n</code></pre>\n\n<p>How do I implement <code>uses_spark_fixture</code>?</p>\n"}, {"tags": ["python", "django", "django-urls", "django-2.0"], "comments": [{"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 3, "creation_date": 1541026755, "post_id": 53093045, "comment_id": 93082845, "body": "You must have an <code>app_name</code> variable in each of the modules you include that way. (<code>apps.alumno.urls</code> etc.) You don&#39;t need app_name in the root urls.py."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1541026891, "post_id": 53093045, "comment_id": 93082889, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48608894/specifying-a-namespace-in-include-without-providing-an-app-name\">&#39;Specifying a namespace in include() without providing an app_name&#39;</a>"}, {"owner": {"reputation": 53, "user_id": 9028145, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YqGfxAOs6g0/AAAAAAAAAAI/AAAAAAAAAD0/irtE1Um76UQ/photo.jpg?sz=128", "display_name": "Mexa Fireg", "link": "https://stackoverflow.com/users/9028145/mexa-fireg"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1541027286, "post_id": 53093045, "comment_id": 93082991, "body": "Thank you that was the problem. Have an excellent day."}], "answers": [{"tags": [], "owner": {"reputation": 625, "user_id": 10428938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7bzhA.jpg?s=128&g=1", "display_name": "Anoop Kumar", "link": "https://stackoverflow.com/users/10428938/anoop-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1541048854, "creation_date": 1541048854, "answer_id": 53095474, "question_id": 53093045, "link": "https://stackoverflow.com/questions/53093045/i-can-not-run-server-django-2-0/53095474#53095474", "title": "I can not run server Django 2.0", "body": "<p>The error describes the resolution please remove app name from the urls.py as below</p>\n\n<pre><code>urlpatterns = [\nurl(r'^admin/', admin.site.urls),\nurl(r'^alumno/', include ('alumno.urls', namespace=\"alumno\")),\nurl(r'^grupo/', include ('grupo.urls', namespace=\"grupo\")),\n]\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9028145, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YqGfxAOs6g0/AAAAAAAAAAI/AAAAAAAAAD0/irtE1Um76UQ/photo.jpg?sz=128", "display_name": "Mexa Fireg", "link": "https://stackoverflow.com/users/9028145/mexa-fireg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541048854, "creation_date": 1541026544, "question_id": 53093045, "link": "https://stackoverflow.com/questions/53093045/i-can-not-run-server-django-2-0", "title": "I can not run server Django 2.0", "body": "<p>Hello I'm having a problem when trying to run server from an Django 2.0 old project.</p>\n\n<p>this is the error:</p>\n\n<pre><code>      File \"/usr/lib/python3.7/site-packages/django/urls/conf.py\", line 39, in include\n    'Specifying a namespace in include() without providing an app_name \ndjango.core.exceptions.ImproperlyConfigured: Specifying a namespace in include() without providing an app_name is not supported. Set the app_name attribute in the included module, or pass a 2-tuple containing the list of patterns and app_name instead.'\n</code></pre>\n\n<p>this is my urls.py</p>\n\n<pre><code>from django.conf.urls import url, include\nfrom django.contrib import admin\nfrom apps.sysgrub.views import LoginUser, LogoutUser\n\napp_name = 'apps'\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^alumno/', include ('apps.alumno.urls', namespace=\"alumno\")),\n    url(r'^grupo/', include ('apps.grupo.urls', namespace=\"grupo\")),\n    url(r'^maestro/', include ('apps.maestro.urls', namespace=\"maestro\")),\n    url(r'^rol/', include ('apps.rol.urls', namespace=\"rol\")),\n    url(r'^sysgrub/', include ('apps.sysgrub.urls', namespace=\"sysgrub\")),\n    url(r'^$', LoginUser),\n    url(r'^logout/$', LogoutUser),\n]\n</code></pre>\n\n<p>and my urls by app</p>\n\n<pre><code>urlpatterns = [\nurl(r'^index$', index),\nurl(r'^horarios$', horarios),\nurl(r'^listar$', Alumno_grupoList.as_view(), name='alumno_listar'),\nurl(r'^agregar$', AlumnoCreate.as_view(), name='add_student'),\n\n]\n</code></pre>\n\n<p>thank you so much for your help greetings.</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 198, "user_id": 5705804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09190055a3506e4d475590cfbd593733?s=128&d=identicon&r=PG&f=1", "display_name": "Jhovanny Uribe", "link": "https://stackoverflow.com/users/5705804/jhovanny-uribe"}, "edited": false, "score": 1, "creation_date": 1541026756, "post_id": 53093037, "comment_id": 93082846, "body": "Your CSV as separator uses comma? Or semicolon (, or ;)"}, {"owner": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "reply_to_user": {"reputation": 198, "user_id": 5705804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09190055a3506e4d475590cfbd593733?s=128&d=identicon&r=PG&f=1", "display_name": "Jhovanny Uribe", "link": "https://stackoverflow.com/users/5705804/jhovanny-uribe"}, "edited": false, "score": 0, "creation_date": 1541026958, "post_id": 53093037, "comment_id": 93082902, "body": "No, the numbers over 1000 in a column have commas like 1,089. I need 1089. And I need to change this inside the csv before it&#39;s imported and joined to another table in the Python script."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1541027280, "post_id": 53093037, "comment_id": 93082986, "body": "Bill: What separator character is used <i>between</i> the numbers in each row? If it&#39;s a comma, then it will beimpossible to tell which ones are part of a column with a number &gt; 1000 in it and which commas are separating the numbers. Please <a href=\"https://stackoverflow.com/posts/53093037/edit\">edit</a> you question and show what a few rows of the input file look like. This issue can be avoided if the numbers have quotes surrounding them."}, {"owner": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "edited": false, "score": 0, "creation_date": 1541027557, "post_id": 53093037, "comment_id": 93083061, "body": "Ah, Ok. I see what you&#39;re getting at"}], "answers": [{"tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": false, "score": 0, "last_activity_date": 1541028758, "creation_date": 1541028758, "answer_id": 53093307, "question_id": 53093037, "link": "https://stackoverflow.com/questions/53093037/remove-1000s-separator-from-column-in-csv/53093307#53093307", "title": "Remove 1000&#39;s separator from column in CSV?", "body": "<p>maybe something like this?</p>\n\n<pre><code>import re\nfrom sys import stdout\n\nisnum = re.compile('^[0-9, ]+$')\nnon = re.compile('[, ]')\n\nfd = StringIO()\nout = csv.writer(fd)\nout.writerow(['foo','1,000,000',19])\nout.writerow(['bar','1,234,567',20])\n\nfd.seek(0)\ninp = csv.reader(fd)\nout = csv.writer(stdout)\nfor row in inp:\n    for i, x in enumerate(row):\n        if isnum.match(x):\n            row[i] = float(non.sub('', x))\n    out.writerow(row)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "edited": false, "score": 0, "creation_date": 1541096732, "post_id": 53093568, "comment_id": 93109707, "body": "Thank you. The simplest solution is to have the field formatted as a float to begin with."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "edited": false, "score": 0, "creation_date": 1541099201, "post_id": 53093568, "comment_id": 93110876, "body": "Bill: It&#39;s fairly obvious that the problem wouldn&#39;t exist if the input csv was formatted differently, but you never mentioned that was even a possibility in your question\u2014which makes me wonder why you bothered asking it at all..."}, {"owner": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "edited": false, "score": 0, "creation_date": 1541100989, "post_id": 53093568, "comment_id": 93111724, "body": "I actually don&#39;t know if it&#39;s possible. I don&#39;t know anything about Tririga or how it outputs reports. The csv comes to me from a different department. I can easliy reformat the fields in Excel, but I need this process to be totally automated."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "edited": false, "score": 0, "creation_date": 1541101442, "post_id": 53093568, "comment_id": 93111920, "body": "Bill: I see...in that case, my answer (and perhaps one or more of the others) will do what you need in an automated way. I suggest you read <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "edited": false, "score": 0, "creation_date": 1541102366, "post_id": 53093568, "comment_id": 93112328, "body": "Bill: Thanks, however I suggest you do talk to someone in the other department because I strongly suspect the output could be formatted differently (although I know zip about Tririga). The reason is that the less preprocessing there needs to be done to first, the better off you&#39;ll be (i.e. less chance of it breaking later as well as less code to maintain)."}, {"owner": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "edited": false, "score": 1, "creation_date": 1541443370, "post_id": 53093568, "comment_id": 93210985, "body": "I was able to solve this by converting the csv to a geodatabase table (this is a GIS process) and reformatting the fields."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 0, "last_activity_date": 1541099028, "last_edit_date": 1541099028, "creation_date": 1541031128, "answer_id": 53093568, "question_id": 53093037, "link": "https://stackoverflow.com/questions/53093037/remove-1000s-separator-from-column-in-csv/53093568#53093568", "title": "Remove 1000&#39;s separator from column in CSV?", "body": "<p>As I mentioned in a comment, this can only be done if the input csv file is formatted in a way that will allow the commas in the numbers to be differentiated from the commas <em>between</em> each one of them.</p>\n\n<p>Here's an example of one way it could be done (by quoting all the values):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7,123.6\",\"8\",\"9\"\n\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"1,000\",\"8\",\"9\"\n\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"20,000\",\"8\",\"9\"\n</code></pre>\n\n<p>Here's code that will do what you want. It uses the <code>locale.atof</code> function to simplify cleaning up the number:</p>\n\n<pre><code>import csv\nimport locale\n\n# Set local to someplace that uses a comma for the thousands separator.\nlocale.setlocale(locale.LC_ALL, 'English_US.1252')\n\nRoomReport = r'RoomReport.csv'\ncleaned_report = r'RoomReport_cleaned.csv'\nnew_values_list = []\n\nwith open(RoomReport, \"r\", newline='') as inp:\n    for row in csv.reader(inp):\n        if \",\" in row[7]:\n            row[7] = int(round(locale.atof(row[7])))\n\n        new_values_list.append(row)\n\n# Create cleaned-up output file.\nwith open(cleaned_report, \"w\", newline='') as outp:\n    csv.writer(outp, quoting=csv.QUOTE_ALL).writerows(new_values_list)\n</code></pre>\n\n<p>The <code>RoomReport_cleaned.csv</code> it creates from the example input will contain this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7124\",\"8\",\"9\"\n\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"1000\",\"8\",\"9\"\n\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"20000\",\"8\",\"9\"\n</code></pre>\n\n<p>Note that since the values in the output no longer have commas embedded in them, the quoting all fields is not longer necessary\u2014so could be left out by <strong>not</strong> specifying <code>csv.QUOTE_ALL</code>.</p>\n"}], "owner": {"reputation": 137, "user_id": 7607167, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9e15042983c51611c2f8f21d0e3662f4?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Hambone", "link": "https://stackoverflow.com/users/7607167/bill-hambone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 53093568, "answer_count": 2, "score": -2, "last_activity_date": 1541099028, "creation_date": 1541026496, "last_edit_date": 1541027581, "question_id": 53093037, "link": "https://stackoverflow.com/questions/53093037/remove-1000s-separator-from-column-in-csv", "title": "Remove 1000&#39;s separator from column in CSV?", "body": "<p>I have a Python script where I'm importing a csv that has commas in values over 1000. These values are strings in the csv. I need to remove the commas from the values, and convert the strings to rounded floats inside the csv before it's imported into Python. </p>\n\n<p>I've tried appending all the new values to a list to use the <code>csv.writer</code>, but I haven't been able to figure out how to have the writer only replace the values in the column that have commas. Here's what I have so far. :</p>\n\n<pre><code>import csv\n\nRoomReport = r'path_to_csv'\nnew_values_list = []\n\nf = open(RoomReport, \"r\")\nreader = csv.reader(f)\nwriter = csv.writer(f)\n\nfor row in reader:\n     useable_area = row[7]\n\n     if \",\" in useable_area:\n         useable_area_no_comma = useable_area.replace(\",\",\"\")\n         useable_area_rounded = int(round(float(useable_area_no_comma)))\n         new_values_list.append(useable_area_rounded)\n\n\nf.close()\n</code></pre>\n"}, {"tags": ["python", "debugging", "zip", "pdb"], "answers": [{"tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 5, "last_activity_date": 1541027695, "creation_date": 1541027695, "answer_id": 53093188, "question_id": 53093005, "link": "https://stackoverflow.com/questions/53093005/debug-in-a-function-cannot-list-zipped-objects/53093188#53093188", "title": "Debug in a function: cannot list zipped objects?", "body": "<p><code>list</code> is a built-in command in the debugging shell:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(Pdb) help list\nl(ist) [first [,last] | .]\n\n        List source code for the current file.  Without arguments,\n        list 11 lines around the current line or continue the previous\n        listing.  With . as argument, list 11 lines around the current\n        line.  With one argument, list 11 lines starting at that line.\n        With two arguments, list the given range; if the second\n        argument is less than the first, it is a count.\n\n        The current line in the current frame is indicated by \"-&gt;\".\n        If an exception is being debugged, the line where the\n        exception was originally raised or propagated is indicated by\n        \"&gt;&gt;\", if it differs from the current line.\n</code></pre>\n\n<p>So when you type</p>\n\n<pre><code>(Pdb) list(zip(first, other))\n</code></pre>\n\n<p>it tries to interpret that as a command passed to pdb. Instead you want to execute (or <code>p</code>rint) an expression in python:</p>\n\n<pre><code>(Pdb) list(zip(first, other))\n*** Error in argument: '(zip(first, other))'\n(Pdb) !list(zip(first, other))\n[('p', 'k'), ('a', 'a'), ('l', 'l'), ('e', 'e')]\n(Pdb) p list(zip(first, other))\n[('p', 'k'), ('a', 'a'), ('l', 'l'), ('e', 'e')]\n</code></pre>\n"}], "owner": {"reputation": 1193, "user_id": 8720421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e5efd22e89df0cf3da81c53850dbfb?s=128&d=identicon&r=PG&f=1", "display_name": "thinkvantagedu", "link": "https://stackoverflow.com/users/8720421/thinkvantagedu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 1, "accepted_answer_id": 53093188, "answer_count": 1, "score": 4, "last_activity_date": 1541027695, "creation_date": 1541026252, "question_id": 53093005, "link": "https://stackoverflow.com/questions/53093005/debug-in-a-function-cannot-list-zipped-objects", "title": "Debug in a function: cannot list zipped objects?", "body": "<p>I'm trying to debug a function <code>one_away</code> like this:</p>\n\n<pre><code>import pdb\n\n\ndef is_one_away(first: str, other: str) -&gt; bool:\n\n    skip_diff = {\n        -1: lambda i: (i, i + 1),\n        1: lambda i: (i + 1, i),\n        0: lambda i: (i + 1, i + 1)\n    }\n    try:\n        skip = skip_diff[len(first) - len(other)]\n    except KeyError:\n        return False\n    pdb.set_trace()\n    for i, (l1, l2) in enumerate(zip(first, other)):\n        if l1 != l2:\n            i -= 1\n            break\n</code></pre>\n\n<p>And to call it I write:</p>\n\n<pre><code>import one_away\none_away.is_one_away('pale', 'kale')\n</code></pre>\n\n<p>When running to <code>pdb.set_trace()</code>, I'd like to see the result of <code>zip(first ,other)</code>. So I write:</p>\n\n<pre><code>(Pdb) &gt;? list(zip(first, other))\n*** Error in argument: '(zip(first, other))'\n</code></pre>\n\n<p>But if in Python console, it works:</p>\n\n<pre><code>&gt;&gt;&gt;list(zip('pale', 'kale'))\n[('p', 'k'), ('a', 'a'), ('l', 'l'), ('e', 'e')]\n</code></pre>\n\n<p>Why?</p>\n"}, {"tags": ["python", "python-3.x", "mayavi", "mayavi.mlab"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1541031099, "post_id": 53092966, "comment_id": 93083878, "body": "<code>cylinder = cylinder(...)</code> will lead to an <code>UnboundLocalError</code> since <code>cylinder</code> is qualified to be a local name due to its appearance on the left-hand side, but it is seen on the right-hand-side before getting assigned. Don&#39;t shadow names like that, especially nonlocal ones. Write something like <code>cyl = cylinder(radius=1, lenth=2)</code>."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1541032463, "post_id": 53092966, "comment_id": 93084151, "body": "I&#39;ve noticed that with more than a year and a half of activity here and 8 questions you haven&#39;t accepted any answers on your posts, nor have you given any feedback to answerers bsaed on a cursory glance at a few of those questions. Please consider accepting answers to your older questions, because this signals that your problem is solved and it also gives reputation both to you and the answerer. See also <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">How does accepting work?</a>."}, {"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1541033243, "post_id": 53092966, "comment_id": 93084316, "body": "Okay, thanks I&#39;ll do that."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541031329, "post_id": 53093551, "comment_id": 93083934, "body": "thank you-- I actually found a way before getting back to this:   <code>dataset = mayavi.tools.pipeline.get_vtk_src(cylinder.mesh)[0]</code>  on the next line do  <code>datapoints = dataset.points.to_array()</code>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541031409, "post_id": 53093551, "comment_id": 93083952, "body": "@physicsmajor if you have access to <code>cylinder.mesh</code> then you have access to <code>cylinder.x</code>, <code>cylinder.y</code> and <code>cylinder.z</code>. What am I missing?"}, {"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541033116, "post_id": 53093551, "comment_id": 93084280, "body": "My goal was to construct a list of coordinates for each point, which would be a list of tuples. Although I had access to <code>cylinder.x</code>,<code>cylinder.y</code>, and <code>cylinder.z</code>, I had trouble constructing the list of unique coordinates since <code>cylinder.x</code>/<code>cylinder.y</code>/<code>cylinder.z</code> are nested arrays. I am sure it can be done using nested for loops, but it&#39;s been a while... It also might be more efficient to extract from the pipeline since mayavi has already constructed the data I needed (not as a list of tuples, but as an array of coordinate arrays, which is good enough) so I don&#39;t have to write extra code."}, {"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541033168, "post_id": 53093551, "comment_id": 93084294, "body": "Would you agree?"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541033207, "post_id": 53093551, "comment_id": 93084306, "body": "@physicsmajor I believe what you&#39;re looking for is <code>zip(cylinder.x.ravel(), cylinder.y.ravel(), cylinder.z.ravel())</code>. Or this put inside <code>list()</code> if you don&#39;t just want to iterate over them once."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541033568, "post_id": 53093551, "comment_id": 93084371, "body": "Or <code>np.array([cylinder.x.ravel(), cylinder.y.ravel(), cylinder.z.ravel()]).T</code> if you&#39;re happy with a 2d array."}, {"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 1, "creation_date": 1541034243, "post_id": 53093551, "comment_id": 93084489, "body": "It seems like <code>list(zip(cylinder.x.ravel(), cylinder.y.ravel(), cylinder.z.ravel()))</code> is exactly what I was looking for-- thank you!"}, {"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541105266, "post_id": 53093551, "comment_id": 93113554, "body": "how come when I try to get the list of coordinates for a cross-section only (that is when length = 0), I get a lot of duplicates?"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 1, "creation_date": 1541106366, "post_id": 53093551, "comment_id": 93113960, "body": "@physicsmajor because in that case you&#39;re probably using <code>np.mgrid[0:2*pi*50j, 0:0:50j]</code>, which along the second variable is similar to <code>np.linspace(0,0,50)</code> which contains 50 zeros. If you want a cross-section you don&#39;t want a 2d set of data, only a 1d set. Instead of creating a new 2d grid with <code>length=0</code> you should be looking at an <code>x==x0</code> subset of your 2d grid. So the corresponding points are <code>inds = x==0; x_section = x[inds]; y_section = y[inds], z_section = z[inds]</code>, for instance. Does this answer your question?"}, {"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1541106818, "post_id": 53093551, "comment_id": 93114128, "body": "Yes. I also fixed it by doing <code>phi, x0 = np.mgrid[0:np.pi:50j, 0:length:1j]</code>, with length = 0, which gives me the same thing"}, {"owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1542749423, "post_id": 53093551, "comment_id": 93678943, "body": "Hello-- I have a question. How would I be able to change the color of each point? I would like to scan or loop through each (x,y,z) point and pass it to some predetermined function that will check if it satisfies some given condition, if so then it&#39;s color must be changed. Is there a way to access the current scalar/color information and change it?"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "edited": false, "score": 0, "creation_date": 1542758285, "post_id": 53093551, "comment_id": 93681926, "body": "@physicsmajor changing the colour of an existing plot is probably possible but complicated, and I&#39;d have to look well into it to figure out how. Creating a plot with the right colours on the other hand is very easy, just pass a fourth array as an argument to <code>points3d</code> with the same shape as the coordinates, and this will be used to look up colours from the colourmap. You can do stuff like <code>c = np.where(self.x &lt; self.z, 0, 1)</code> to create a binary array which would give you two colours in the plot: one where the array <code>c</code> is <code>0</code> and the other where it&#39;s <code>1</code>."}], "tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 1, "last_activity_date": 1541030924, "creation_date": 1541030924, "answer_id": 53093551, "question_id": 53092966, "link": "https://stackoverflow.com/questions/53092966/extracting-data-from-mayavi-pipeline-specifically-coordinates-for-a-point-def/53093551#53093551", "title": "Extracting data from Mayavi pipeline -- specifically coordinates for a point-defined-surface", "body": "<p>All the data you pass to mayavi will be present in the corresponding data source. I'd note, however, that I wouldn't think that you'd often want to reverse-engineer your data from the pipeline, since it was you who passed those data in the first place (so you should be able to keep track of that data without having to dig down into the low-level vtk machinery).</p>\n\n<p>Anyway, assuming that you only have a single scene and a single data source in your pipeline:</p>\n\n<pre><code>engine = mlab.get_engine()\nsource = engine.scenes[0].children[0]\n# choose a scene among engine.scenes if necessary\n# choose a source among engine.scenes[0] if necessary\n\npoints_data = np.array(source.data.points)\n</code></pre>\n\n<p>In your specific example you passed three arrays of shape <code>(50,50)</code> to <code>points3d</code>. What we get for <code>points_data</code> is an array of shape <code>(2500,3)</code>. Suspicious. Sure enough, we can reshape it into the appropriate shape in order to reconstruct the original data:</p>\n\n<pre><code>x,y,z = points_data.T\n# x,y,z have shape (2500,) now, no way to know the \"true\" original shape\n\n# if we know what their shape _should_ be, we can fix that too:\nx,y,z = points.data.reshape(50,50,3).transpose(2,0,1)\n\n# compare to the original data\nradius,length = 1,2\nphi, x0 = np.mgrid[0:np.pi:50j, 0:length:50j]\nz0 = radius * np.sin(phi)\ny0 = radius * np.cos(phi)\nprint(np.array_equal(x, x0)) # True\nprint(np.array_equal(y, y0)) # True\nprint(np.array_equal(z, z0)) # True\n</code></pre>\n\n<p>Since the multidimensional structure of the input arrays is irrelevant to mayavi, I don't expect we can reconstruct the original <code>x,y,z</code> arrays with the right <em>shape</em> from the pipeline. If I were mayavi I'd <code>ravel</code> all the input arrays losing all possible multidimensional structure, and I'm pretty sure that's exactly what happens.</p>\n"}], "owner": {"reputation": 197, "user_id": 4539551, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xnhIU.jpg?s=128&g=1", "display_name": "CrypticParadigm", "link": "https://stackoverflow.com/users/4539551/crypticparadigm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 53093551, "answer_count": 1, "score": 2, "last_activity_date": 1541030924, "creation_date": 1541025901, "question_id": 53092966, "link": "https://stackoverflow.com/questions/53092966/extracting-data-from-mayavi-pipeline-specifically-coordinates-for-a-point-def", "title": "Extracting data from Mayavi pipeline -- specifically coordinates for a point-defined-surface", "body": "<p>I am running a script to create a cylindrical surface defined by a set of points. I am using Mayavi to render the visualizations. For the following script, how could I find the coordinates of each point? It seems like Mayavi is doing this behind the scenes in the data pipeline, but I am not too sure how to extract it. Alternatively, I tried doing nested for loops, but I haven't figured out the correct algorithm... I will keep trying in the meantime. However, if someone knows how to extract them from the Mayavi pipeline, that would be great since I won't have to add any more computation time.</p>\n\n<pre><code>import numpy as np\nimport mayavi\nfrom mayavi import mlab\n\nclass cylinder:\n  def __init__(self, radius, length):\n    phi, x = np.mgrid[0:np.pi:50j, 0:length:50j]\n    self.z = radius * np.sin(phi)\n    self.y = radius * np.cos(phi)\n    self.x = x\n    self.mesh = mlab.points3d(self.x,self.y,self.z, mode = 'point')\n\n\ndef main():\n  cylinder = cylinder(radius=1,length=2)\n  mayavi.mlab.axes()\n  mlab.show()\n\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "csv", "dictionary", "python-requests"], "comments": [{"owner": {"reputation": 1635, "user_id": 1381241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6464fd26eb57b7c8cd28694a30a19adb?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/1381241/sumit"}, "edited": false, "score": 0, "creation_date": 1541025812, "post_id": 53092936, "comment_id": 93082573, "body": "split the columns value in Excel into different columns like: [ID, gender, first name, last name] based on &#39;.&#39; and spaces,  and then read the columns in Python?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541025853, "post_id": 53092936, "comment_id": 93082585, "body": "If everything is in a single column, it&#39;s not really a CSV, it&#39;s just a plain text file."}, {"owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541025868, "post_id": 53092936, "comment_id": 93082591, "body": "I am not allowed to do changes in the csv file."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541025888, "post_id": 53092936, "comment_id": 93082596, "body": "<code>\\ufeff</code> should not be in the CSV. I&#39;m poop with encoding issues, though"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541025895, "post_id": 53092936, "comment_id": 93082599, "body": "You need to parse the text yourself. A regular expression might be useful for this."}, {"owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541026047, "post_id": 53092936, "comment_id": 93082646, "body": "I got no idea where /ufeff come from. It&#180;s not in the .csv file."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541026306, "post_id": 53092936, "comment_id": 93082734, "body": "I presume <code>\\ufeff</code> is in the file, have a look using <code>hexdump -C filename.csv</code>"}, {"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541027261, "post_id": 53092936, "comment_id": 93082979, "body": "can you paste the content of your entire csv file?"}, {"owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541027596, "post_id": 53092936, "comment_id": 93083069, "body": "It&#180;s just as in the question."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541026820, "post_id": 53093034, "comment_id": 93082871, "body": "Traceback (most recent call last): line 11, in &lt;module&gt;     d[splitted[0]] = &#39; &#39;.join(splitted[1].split(&#39; &#39;)[1:1]) IndexError: list index out of range"}, {"owner": {"reputation": 1635, "user_id": 1381241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6464fd26eb57b7c8cd28694a30a19adb?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/1381241/sumit"}, "reply_to_user": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541027007, "post_id": 53093034, "comment_id": 93082919, "body": "looks like your data is formatted incorrectly.. this character: <code>\\ufeff</code>"}, {"owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541027848, "post_id": 53093034, "comment_id": 93083141, "body": "Try it in excel. Column A, row 1: male Bob West / row 2: female Hannah South  / row 3: male Bruce North.   Still get the list index out of range."}], "tags": [], "owner": {"reputation": 1635, "user_id": 1381241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6464fd26eb57b7c8cd28694a30a19adb?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/1381241/sumit"}, "is_accepted": false, "score": 0, "last_activity_date": 1541027305, "last_edit_date": 1541027305, "creation_date": 1541026453, "answer_id": 53093034, "question_id": 53092936, "link": "https://stackoverflow.com/questions/53092936/how-do-i-convert-a-csv-file-with-one-column-to-a-dictionary-in-python/53093034#53093034", "title": "How do I convert a csv file with one column to a dictionary in Python?", "body": "<p>This should work for the given input:</p>\n\n<h1>data.csv:</h1>\n\n<pre><code>1.male Bob West,\n2.female Hannah South,\n3.male Bruce North,\n</code></pre>\n\n<h1>Code:</h1>\n\n<pre><code>import csv\n\nreader = csv.reader(open(\"data.csv\"))\n\nd = {}\n\nfor row in reader:\n  splitted = row[0].split('.')\n  # print splitted[0]\n  # print ' '.join(splitted[1].split(' ')[1:])\n  d[splitted[0]] = ' '.join(splitted[1].split(' ')[1:])\n\nprint(d)\n</code></pre>\n\n<h1>Output</h1>\n\n<pre><code>{'1': 'Bob West', '3': 'Bruce North', '2': 'Hannah South'}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541026842, "post_id": 53093062, "comment_id": 93082875, "body": "Traceback (most recent call last): , line 8, in &lt;module&gt;     m = re.match(r&#39;^([0-9]+)\\.(male|female) (.*)$&#39;, line) NameError: name &#39;re&#39; is not defined"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "reply_to_user": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541029142, "post_id": 53093062, "comment_id": 93083469, "body": "<code>re</code> is a standard module in Python"}, {"owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "edited": false, "score": 0, "creation_date": 1541030145, "post_id": 53093062, "comment_id": 93083671, "body": "Dont work for me. Traceback (most recent call last):    line 7, in &lt;module&gt;     m = re.match(r&#39;^(male|female) (.*)$&#39;, line)   File &quot;/Library/Frameworks/Python.framework/Versions/3.7/lib/pytho&zwnj;&#8203;n3.7/re.py&quot;, line 173, in match     return _compile(pattern, flags).match(string) TypeError: expected string or bytes-like object"}], "tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": false, "score": 0, "last_activity_date": 1541026854, "last_edit_date": 1541026854, "creation_date": 1541026626, "answer_id": 53093062, "question_id": 53092936, "link": "https://stackoverflow.com/questions/53092936/how-do-i-convert-a-csv-file-with-one-column-to-a-dictionary-in-python/53093062#53093062", "title": "How do I convert a csv file with one column to a dictionary in Python?", "body": "<p>as per Simit, but using regular expressions and realising that your <code>1.</code> and <code>A</code> and <code>B</code> are you just trying to explain Excel cell and column identifiers</p>\n\n<pre><code>import re, csv\n\nreader = csv.reader(open(\"data.csv\"))\n\nout = {}\nfor i, line in enumerate(reader, 1):\n    m = re.match(r'^(male|female) (.*)$', line)\n    if not m:\n        print(f\"error processing {repr(line)}\")\n        continue\n    out[i] = m[2]\n\nprint(out)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "is_accepted": true, "score": 1, "last_activity_date": 1541027514, "last_edit_date": 1541027514, "creation_date": 1541026784, "answer_id": 53093077, "question_id": 53092936, "link": "https://stackoverflow.com/questions/53092936/how-do-i-convert-a-csv-file-with-one-column-to-a-dictionary-in-python/53093077#53093077", "title": "How do I convert a csv file with one column to a dictionary in Python?", "body": "<p>You can use dict comprehension and enumerate the <code>csv</code> object,</p>\n\n<pre><code>import csv\n\nreader = csv.reader(open(\"filename.csv\"))\n\nx = {num+1:name[0].split(\" \",1)[-1].rstrip() for (num, name) in enumerate(reader)}\nprint(x)\n\n# output,\n{1: 'Bob West', 2: 'Hannah South', 3: 'Bruce North'}\n</code></pre>\n\n<p>Or you can do it without using <code>csv</code> module simply by reading the file,</p>\n\n<pre><code>with open(\"filename.csv\", 'r') as t:\n    next(t) # skip first line\n    x = {num+1:name.split(\" \",1)[-1].strip() for (num, name) in enumerate(t)}\n\nprint(x)\n\n# output,\n{1: 'Bob West', 2: 'Hannah South', 3: 'Bruce North'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10321532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8b7de4373c5364b36357bfdf618de?s=128&d=identicon&r=PG&f=1", "display_name": "sweeetperson", "link": "https://stackoverflow.com/users/10321532/sweeetperson"}, "is_accepted": false, "score": -2, "last_activity_date": 1541032758, "last_edit_date": 1541032758, "creation_date": 1541027029, "answer_id": 53093106, "question_id": 53092936, "link": "https://stackoverflow.com/questions/53092936/how-do-i-convert-a-csv-file-with-one-column-to-a-dictionary-in-python/53093106#53093106", "title": "How do I convert a csv file with one column to a dictionary in Python?", "body": "<pre><code>import cv with open('Employee_address.txt', mode='r') as CSV_file:\n    csv_reader= csv.DirectReader(csv_file)\n    life_count=0\n    for row in csv_reader:\n        if line_count==0:\n            print(f'columns names are {\",\".join()}')\n            line += 1\n            print(f'\\t{row[\"name\"]} works in the {row[\"department\"]} department, and lives in{row[\"living address\"]}.line_count +=1 print(f'Processed {line_count} lines.')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 925, "user_id": 2258013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/htFkd.jpg?s=128&g=1", "display_name": "Polkaguy6000", "link": "https://stackoverflow.com/users/2258013/polkaguy6000"}, "is_accepted": false, "score": 0, "last_activity_date": 1541027244, "creation_date": 1541027244, "answer_id": 53093135, "question_id": 53092936, "link": "https://stackoverflow.com/questions/53092936/how-do-i-convert-a-csv-file-with-one-column-to-a-dictionary-in-python/53093135#53093135", "title": "How do I convert a csv file with one column to a dictionary in Python?", "body": "<p>I like to use Pandas for stuff like this. You can use Pandas to import it and then export it to a dict.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv('test.csv',header=-1)\n# Creates new columns in the dataframe based on the rules of the question\ndf['Name']=df[0].str.split(' ',1).str.get(1)\ndf['ID'] = df[0].str.split('.',1).str.get(0)\n</code></pre>\n\n<p>The dataframe should have three columns:</p>\n\n<ul>\n<li>0 - This is the raw data.</li>\n<li>Name - The name as defined in the problem.</li>\n<li>ID - The number that comes before the period.</li>\n</ul>\n\n<p>I didn't include gender, but it really won't fit into the dict. I'm also assuming your data does not have a header.</p>\n\n<p>The next part converts your pandas dataframe to a dict in the output that you want.</p>\n\n<pre><code>output_dict = dict()\nfor i in range(len(df[['ID','Name']])):\n    output_dict[df.iloc[i]['ID']] = df.iloc[i]['Name']\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10470153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559cd08b5a09a2d7b5b03f34cd43f00f?s=128&d=identicon&r=PG&f=1", "display_name": "gmanread", "link": "https://stackoverflow.com/users/10470153/gmanread"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 1, "accepted_answer_id": 53093077, "answer_count": 5, "score": 3, "last_activity_date": 1541032758, "creation_date": 1541025678, "question_id": 53092936, "link": "https://stackoverflow.com/questions/53092936/how-do-i-convert-a-csv-file-with-one-column-to-a-dictionary-in-python", "title": "How do I convert a csv file with one column to a dictionary in Python?", "body": "<p>I need some help with a assignment for python. \nThe task is to convert a .csv file to a dictionary, and do some changes. The problem is that the .csv file only got 1 column, but 3 rows. </p>\n\n<p>The .csv file looks like this in excel</p>\n\n<pre><code>             A                         B\n\n1.male Bob West\n2.female Hannah South\n3.male Bruce North\n</code></pre>\n\n<p>So everything is in column A. </p>\n\n<p>My code looks so far like this:</p>\n\n<pre><code>import csv\nreader = csv.reader(open(\"filename.csv\"))\nd={}\nfor row in reader:\n    d[row[0]]=row[0:]\nprint(d)\n</code></pre>\n\n<p>And the output</p>\n\n<pre><code>{'\\ufeffmale Bob West': ['\\ufeffmale Bob West'], 'female Hannah South': \n['female Hannah South'], 'male Bruce North': ['male Bruce North']}\n</code></pre>\n\n<p>but I want     </p>\n\n<pre><code>{1 : Bob West, 2 : Hannah South, 3 : Bruce North}\n</code></pre>\n\n<p>The male/female should be changed with ID, (1,2,3). And i don\u00b4t know how to figure out the 1 column thing. </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1541029237, "post_id": 53092924, "comment_id": 93083499, "body": "The first 3 conditions don&#39;t seem to make any sense whatsoever...."}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1541029441, "post_id": 53092924, "comment_id": 93083548, "body": "Agreed.  What I am getting at is that in the context of say a .groupby([&#39;id&#39;]) create an indicator column on each record where (df[&#39;atr1&#39;] == df[&#39;atr1&#39;]) &amp; (df[&#39;atr2&#39;] == df[&#39;atr2&#39;]) &amp; (df[&#39;orig_date&#39;] &lt; df[&#39;fix_date&#39;])"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1541031272, "post_id": 53092924, "comment_id": 93083916, "body": "It still doesn&#39;t make sense unfortunately, I&#39;m not sure how that code would get you to your expected output. Can you explain?"}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1541092329, "post_id": 53092924, "comment_id": 93107495, "body": "@coldspeed Apologies again for the confusion.  I think Eric Wang&#39;s answer is on the right track.  I think a groupby on id, atr1, atr2 and then a transform compatible operation to check the date logic to produce the indicator is the best way forward.  I&#39;m working on my end as well."}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1541104811, "post_id": 53092924, "comment_id": 93113362, "body": "Eric Wang&#39;s answer works for me.  A vectorized approach would be great though."}], "answers": [{"comments": [{"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1541030480, "post_id": 53093306, "comment_id": 93083749, "body": "unfortunately, the date comparison does not seem to work as intended.  thanks for the contribution.,"}, {"owner": {"reputation": 543, "user_id": 8431101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb3dba23180ab706c7234b2a0694b2e?s=128&d=identicon&r=PG&f=1", "display_name": "Pinyi Wang", "link": "https://stackoverflow.com/users/8431101/pinyi-wang"}, "reply_to_user": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1541033130, "post_id": 53093306, "comment_id": 93084288, "body": "@Pylander So are you trying to compare the &#39;orig_date&#39; and &#39;fix_date&#39; of the rows that have same &#39;id&#39;, &#39;atr1&#39;, and &#39;atr2&#39;?"}, {"owner": {"reputation": 543, "user_id": 8431101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb3dba23180ab706c7234b2a0694b2e?s=128&d=identicon&r=PG&f=1", "display_name": "Pinyi Wang", "link": "https://stackoverflow.com/users/8431101/pinyi-wang"}, "reply_to_user": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1541034037, "post_id": 53093306, "comment_id": 93084448, "body": "@Pylander I&#39;ve updated my answer with my best guess of what you are trying to get. Let me know if this solves your problem."}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1541092175, "post_id": 53093306, "comment_id": 93107410, "body": "This seems to be more on track I think.  I had to substitute np.isnat since that is a datetime value.  Now I am encountering an &quot;TypeError: invalid type promotion&quot;"}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1541095891, "post_id": 53093306, "comment_id": 93109307, "body": "I managed to get this to run by substituting pd.isnull() for np.isnat().  First run seemed to produce duplicate records.  Double checking now."}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1541104739, "post_id": 53093306, "comment_id": 93113332, "body": "This would appear to work as intended.  Thanks for your help."}], "tags": [], "owner": {"reputation": 543, "user_id": 8431101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb3dba23180ab706c7234b2a0694b2e?s=128&d=identicon&r=PG&f=1", "display_name": "Pinyi Wang", "link": "https://stackoverflow.com/users/8431101/pinyi-wang"}, "is_accepted": true, "score": 1, "last_activity_date": 1541033940, "last_edit_date": 1541033940, "creation_date": 1541028749, "answer_id": 53093306, "question_id": 53092924, "link": "https://stackoverflow.com/questions/53092924/python-groupby-with-boolean-mask/53093306#53093306", "title": "Python Groupby with Boolean Mask", "body": "<p>I think this should work:</p>\n\n<pre><code>df['failed_part_ind'] = df.apply(lambda row: 1 if ((row['id'] == row['id']) &amp;\n                                                (row['atr1'] == row['atr1']) &amp;\n                                                (row['atr2'] == row['atr2']) &amp;\n                                                (row['orig_date'] &lt; row['fix_date']))\n                                            else 0, axis=1) \n</code></pre>\n\n<p><strong>Update:</strong> I think this is what you want:</p>\n\n<pre><code>import numpy as np\ndef f(g):\n    min_fix_date = g['fix_date'].min()\n    if np.isnan(min_fix_date):\n        g['failed_part_ind'] = 0\n    else:\n        g['failed_part_ind'] = g['orig_date'].apply(lambda d: 1 if d &lt; min_fix_date else 0)\n    return g\n\ndf.groupby(['id', 'atr1', 'atr2']).apply(lambda g: f(g))\n</code></pre>\n"}], "owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "accepted_answer_id": 53093306, "answer_count": 1, "score": 0, "last_activity_date": 1541092672, "creation_date": 1541025571, "last_edit_date": 1541092672, "question_id": 53092924, "link": "https://stackoverflow.com/questions/53092924/python-groupby-with-boolean-mask", "title": "Python Groupby with Boolean Mask", "body": "<p>I have a pandas dataframe with the following general format:</p>\n\n<pre><code>id,atr1,atr2,orig_date,fix_date\n1,bolt,l,2000-01-01,nan\n1,screw,l,2000-01-01,nan\n1,stem,l,2000-01-01,nan\n2,stem,l,2000-01-01,nan\n2,screw,l,2000-01-01,nan\n2,stem,l,2001-01-01,2001-01-01\n3,bolt,r,2000-01-01,nan\n3,stem,r,2000-01-01,nan\n3,bolt,r,2001-01-01,2001-01-01\n3,stem,r,2001-01-01,2001-01-01\n</code></pre>\n\n<p>This result would be the following:</p>\n\n<pre><code>id,atr1,atr2,orig_date,fix_date,failed_part_ind\n1,bolt,l,2000-01-01,nan,0\n1,screw,l,2000-01-01,nan,0\n1,stem,l,2000-01-01,nan,0\n2,stem,l,2000-01-01,nan,1\n2,screw,l,2000-01-01,nan,0\n2,stem,l,2001-01-01,2001-01-01,0\n3,bolt,r,2000-01-01,nan,1\n3,stem,r,2000-01-01,nan,1\n3,bolt,r,2001-01-01,2001-01-01,0\n3,stem,r,2001-01-01,2001-01-01,0\n</code></pre>\n\n<p>Any tips or tricks most welcome!</p>\n\n<p><strong>Update2:</strong></p>\n\n<p>A better way to describe what I need to accomplish is that in a <code>.groupby(['id','atr1','atr2'])</code> to create a new indicator column where the following criteria are met for records within the groups:</p>\n\n<pre><code>(df['orig_date'] &lt; df['fix_date'])\n</code></pre>\n"}, {"tags": ["python", "google-cloud-platform", "google-natural-language"], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "is_accepted": false, "score": 0, "last_activity_date": 1541026544, "last_edit_date": 1541026544, "creation_date": 1541026146, "answer_id": 53092993, "question_id": 53092916, "link": "https://stackoverflow.com/questions/53092916/attributeerror-languageserviceclient-object-has-no-attribute-classify-text/53092993#53092993", "title": "AttributeError: &#39;LanguageServiceClient&#39; object has no attribute &#39;classify_text&#39;", "body": "<p>Try:</p>\n\n<pre><code>categories = client.classify_text(document)\ncat = categories.categories\n</code></pre>\n\n<p>That's basic debugging, I know.</p>\n\n<p>You could also comment out the declaration for a document and do this:</p>\n\n<pre><code>document = {}\n</code></pre>\n\n<p>And check if it's throwing the same error.</p>\n\n<p>Since it should return either way a <code>ClassifyTextResponse</code>, maybe this will start dividing the problem in parts. Better to attack one by one in these cases.</p>\n"}, {"tags": [], "owner": {"reputation": 1392, "user_id": 7542939, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f576076529fe0426bd507e74c35ee79a?s=128&d=identicon&r=PG&f=1", "display_name": "snapcrack", "link": "https://stackoverflow.com/users/7542939/snapcrack"}, "is_accepted": true, "score": 1, "last_activity_date": 1541053192, "creation_date": 1541053192, "answer_id": 53096121, "question_id": 53092916, "link": "https://stackoverflow.com/questions/53092916/attributeerror-languageserviceclient-object-has-no-attribute-classify-text/53096121#53096121", "title": "AttributeError: &#39;LanguageServiceClient&#39; object has no attribute &#39;classify_text&#39;", "body": "<p>The version I was using, 0.29, was deprecated. The current version is 1.1 and the correct function is the following:</p>\n\n<pre><code>def classify(text, verbose=True):\n    \"\"\"Classify the input text into categories. \"\"\"\n\n    language_client = language.LanguageServiceClient()\n\n    document = language.types.Document(\n        content=text,\n        type=language.enums.Document.Type.PLAIN_TEXT)\n    response = language_client.classify_text(document)\n    categories = response.categories\n\n    result = {}\n\n    for category in categories:\n        # Turn the categories into a dictionary of the form:\n        # {category.name: category.confidence}, so that they can\n        # be treated as a sparse vector.\n        result[category.name] = category.confidence\n\n    if verbose:\n        print(text)\n        for category in categories:\n            print(u'=' * 20)\n            print(u'{:&lt;16}: {}'.format('category', category.name))\n            print(u'{:&lt;16}: {}'.format('confidence', category.confidence))\n\n    return result\n</code></pre>\n\n<p>That function is found <a href=\"https://cloud.google.com/natural-language/docs/classify-text-tutorial\" rel=\"nofollow noreferrer\">here</a>, but the function I mistakenly used is found <a href=\"https://cloud.google.com/natural-language/docs/classifying-text#language-classify-content-python\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 1392, "user_id": 7542939, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f576076529fe0426bd507e74c35ee79a?s=128&d=identicon&r=PG&f=1", "display_name": "snapcrack", "link": "https://stackoverflow.com/users/7542939/snapcrack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 1, "accepted_answer_id": 53096121, "answer_count": 2, "score": 1, "last_activity_date": 1541053192, "creation_date": 1541025522, "question_id": 53092916, "link": "https://stackoverflow.com/questions/53092916/attributeerror-languageserviceclient-object-has-no-attribute-classify-text", "title": "AttributeError: &#39;LanguageServiceClient&#39; object has no attribute &#39;classify_text&#39;", "body": "<p>I'm trying to classify some text and have the following code:</p>\n\n<pre><code>from google.cloud import language\nfrom google.cloud.language import enums\nfrom google.cloud.language import types\n\n\ndef classify_text(text):\n    \"\"\"Classifies content categories of the provided text.\"\"\"\n    client = language.LanguageServiceClient()\n\n    if isinstance(text, six.binary_type):\n        text = text.decode('utf-8')\n\n    document = types.Document(\n        content=text.encode('utf-8'),\n        type=enums.Document.Type.PLAIN_TEXT)\n\n    categories = client.classify_text(document).categories\n\n    for category in categories:\n        print(u'=' * 20)\n        print(u'{:&lt;16}: {}'.format('name', category.name))\n        print(u'{:&lt;16}: {}'.format('confidence', category.confidence))\n</code></pre>\n\n<p>But when I call: <code>classify_text('Hello')</code>, I get:</p>\n\n<p><code>AttributeError: 'LanguageServiceClient' object has no attribute 'classify_text'</code></p>\n\n<p>I can't seem to find any questions here on SO about this error. Does anyone know what's happening here?</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541033590, "post_id": 53092859, "comment_id": 93084377, "body": "There is no &quot;known solution&quot; to this, because it&#39;s a pretty special requirement. Usually you want the axes to have an equal distance."}, {"owner": {"reputation": 677, "user_id": 6539761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd166af8a35bd0912f2597f05bc9995?s=128&d=identicon&r=PG&f=1", "display_name": "djakubosky", "link": "https://stackoverflow.com/users/6539761/djakubosky"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541035952, "post_id": 53092859, "comment_id": 93084833, "body": "I would agree that generally people want axes to be equally spaced, but constrained layout already has exactly the behavior desired! The main issue I&#39;m having is that &quot;wspace&quot; and&quot;hspace&quot; can&#39;t be set in inches, was hopeful that there could be some work around."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541036265, "post_id": 53092859, "comment_id": 93084902, "body": "Mhh, suppose they could be set in inches, that wouldn&#39;t solve the problem of the <b>un</b>equal spacing between different subplots required here, right? Or did I misunderstand the question?"}, {"owner": {"reputation": 677, "user_id": 6539761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd166af8a35bd0912f2597f05bc9995?s=128&d=identicon&r=PG&f=1", "display_name": "djakubosky", "link": "https://stackoverflow.com/users/6539761/djakubosky"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1541038133, "post_id": 53092859, "comment_id": 93085269, "body": "what I&#39;m saying is that constrained_layout actually does solve this problem, and spaces them equally as desired (inclusive of texts), but I don&#39;t have the ability, like in tight_layout h_pad and w_pad, to set the spacing between plots in inches/points. (thats the only reason I&#39;m using tight_layout instead)"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1541039954, "post_id": 53092859, "comment_id": 93085622, "body": "The difference between <code>tight_layout</code> and <code>constrainedlayout</code> is that <code>constrainedlayout</code> does not care about any subplot parameters, it will simple shift the elements around until everything fits. But you can set padding for constrained layout as well, see <a href=\"https://matplotlib.org/tutorials/intermediate/constrainedlayout_guide.html#padding-and-spacing\" rel=\"nofollow noreferrer\">padding-and-spacing</a>. Not sure if that is what you&#39;re after?"}], "owner": {"reputation": 677, "user_id": 6539761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd166af8a35bd0912f2597f05bc9995?s=128&d=identicon&r=PG&f=1", "display_name": "djakubosky", "link": "https://stackoverflow.com/users/6539761/djakubosky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541025164, "creation_date": 1541025164, "question_id": 53092859, "link": "https://stackoverflow.com/questions/53092859/equally-spacing-matplotlib-gridspec-plots-with-consideration-of-axes-ticklabels", "title": "Equally spacing matplotlib Gridspec plots with consideration of axes/ticklabels/titles", "body": "<p>I use matplotlib to make publication quality panels of plots, and something important to me is the precise spacing between axes, including their texts.  Gridspec and tightlayout (h_pad, w_pad) work well when all of my plots have the same size fonts and contain xlabel/ylabel (or not).  However, if one plot in a panel has an xlabel, all plots in the gridspec will be spaced to this distance (the maximum distance between any two plots needed to achieve the pad requested).  I would like plots to have equal distances apart with consideration of their texts. I have found that constrained layout can sometimes produce the desired behavior, however the arguments hspace and wspace control plot distancing in hard to understand units of \"fraction of subplot size\", and I haven't worked out how to set a wspace or hspace to produce and precise inches of padding I want.  (I want subplots to have the same distances between plots/texts, regardless of figsize or subplot dimensions when I make different figures).</p>\n\n<p>My only solution has been to create separate gridspecs for plots with different labeling patterns (with or without xlabels for example), and place them on the plots using gs.tightlayout with a rect argument, taking into account the spacing I desire- this also requires aligning the gridspecs etc.  </p>\n\n<p>Is there any known solution for consistent inches of padding between subplots (inclusive of text)?    </p>\n\n<pre><code>import matplotlib as mpl\nimport matplotlib.pyplot as plt\n\n# equal spacing\nfig =plt.figure(figsize=(4,8), constrained_layout=False)\ngs = mpl.gridspec.GridSpec(3, 1, \n                       figure =fig,\n                        height_ratios = [1,1,1,], hspace=0, wspace=0)\n\nax1 = fig.add_subplot(gs[0])\nax2 = fig.add_subplot(gs[1])\nax3 = fig.add_subplot(gs[2])\n\nmpl.gridspec.rcParams['font.size'] = 72\n# pad 1/4 an inch\ngs.tight_layout(fig, h_pad=0.25, w_pad=0, pad = 0.25)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BTilw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BTilw.png\" alt=\"enter image description here\"></a></p>\n\n<p>Unequal spacing</p>\n\n<pre><code>fig =plt.figure(figsize=(4,8), constrained_layout=False)\ngs = mpl.gridspec.GridSpec(3, 1, \n                       figure =fig,\n                        height_ratios = [1,1,1,], hspace=0, wspace=0)\n\nax1 = fig.add_subplot(gs[0])\n\nax2 = fig.add_subplot(gs[1])\nax3 = fig.add_subplot(gs[2])\n\nax2.set_xlabel('testing', fontsize = 20)\n# setting this param so that I know how big the pad should be in inches (fonsize % units used for h_pad) 72 pt = 1 inch \nmpl.gridspec.rcParams['font.size'] = 72\n# pad 1/4 an inch\ngs.tight_layout(fig, h_pad=0.25, w_pad=0, pad = 0.25)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JsqiO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JsqiO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Desired output looks like this\n<a href=\"https://i.stack.imgur.com/2N1y0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2N1y0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "linux", "flask", "redhat"], "answers": [{"tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": false, "score": 0, "last_activity_date": 1541025486, "creation_date": 1541025486, "answer_id": 53092907, "question_id": 53092810, "link": "https://stackoverflow.com/questions/53092810/how-to-make-flask-app-up-and-running-after-server-restart/53092907#53092907", "title": "How to make Flask app up and running after server restart?", "body": "<p>have you looked at <code>supervisord</code>?  it works reasonably well and handles restarting processes automatically if they fail as well as looking after error logs nicely</p>\n"}, {"tags": [], "owner": {"reputation": 89167, "user_id": 3571, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b1d6ed6863a3b4aab3565f1f9625f156?s=128&d=identicon&r=PG", "display_name": "codeape", "link": "https://stackoverflow.com/users/3571/codeape"}, "is_accepted": false, "score": 0, "last_activity_date": 1541112582, "last_edit_date": 1541112582, "creation_date": 1541029409, "answer_id": 53093383, "question_id": 53092810, "link": "https://stackoverflow.com/questions/53092810/how-to-make-flask-app-up-and-running-after-server-restart/53093383#53093383", "title": "How to make Flask app up and running after server restart?", "body": "<p>I don't know much about RedHat, but it <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/migration_planning_guide/sect-networking-upstart\" rel=\"nofollow noreferrer\">looks like</a> RedHat can use <a href=\"https://www.digitalocean.com/community/tutorials/the-upstart-event-system-what-it-is-and-how-to-use-it\" rel=\"nofollow noreferrer\">upstart</a> for managing services.</p>\n\n<p>So one way to accomplish this is: Configure an upstart job to start the gunicorn process on boot. </p>\n\n<p>An upstart job file (saved in <code>/etc/init/mysuperwebapp.conf</code>) would look like:</p>\n\n<pre><code>description \"My flask app served by gunicorn\"                                                                                                                                 \nstart on runlevel [2345]\nstop on runlevel [!2345]\nchdir /p/ath/to/directory\nexec /path/to/virtualenv/bin/gunicorn ...\n</code></pre>\n\n<p>To manually start the job:</p>\n\n<pre><code>$ sudo service mysuperwebapp start\n</code></pre>\n\n<p>Upstart documentation: <a href=\"http://upstart.ubuntu.com/cookbook/\" rel=\"nofollow noreferrer\">http://upstart.ubuntu.com/cookbook/</a></p>\n"}], "owner": {"reputation": 8627, "user_id": 5285068, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/8967c033e617a2fb6f7d8fd7b5a12eb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5285068/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 516, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541112582, "creation_date": 1541024816, "question_id": 53092810, "link": "https://stackoverflow.com/questions/53092810/how-to-make-flask-app-up-and-running-after-server-restart", "title": "How to make Flask app up and running after server restart?", "body": "<p>What is the recommended way to run Flask app (e.g. via Gunicorn?) and how to make it up and running automatically after linux server (redhat) restart?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1541025384, "post_id": 53092878, "comment_id": 93082464, "body": "No, you mustn&#39;t use two levels of selection, especially when it can be done with 1."}, {"owner": {"reputation": 380, "user_id": 8691088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c074844dcac4a1964da233eea825d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma Borland", "link": "https://stackoverflow.com/users/8691088/jemma-borland"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1541025474, "post_id": 53092878, "comment_id": 93082494, "body": "I\u2019ve amended my answer to only use one level of selection."}, {"owner": {"reputation": 43, "user_id": 10567630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d508f3352a810eb99665935444a1db32?s=128&d=identicon&r=PG", "display_name": "anayisse", "link": "https://stackoverflow.com/users/10567630/anayisse"}, "edited": false, "score": 0, "creation_date": 1541080733, "post_id": 53092878, "comment_id": 93101020, "body": "hello!! It works perfectly now but to verifiy 2 colums value .. I TRYIED This but it doesn&#39;t work  ....<code>df.loc[df[&quot;column3&quot;]== &quot;value&quot; &amp; df[&quot;column1&quot;] == &quot;value2&quot;, [&#39;column2&#39;]]</code> .. Have you any ideas please"}], "tags": [], "owner": {"reputation": 380, "user_id": 8691088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c074844dcac4a1964da233eea825d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma Borland", "link": "https://stackoverflow.com/users/8691088/jemma-borland"}, "is_accepted": false, "score": 0, "last_activity_date": 1541025433, "last_edit_date": 1541025433, "creation_date": 1541025297, "answer_id": 53092878, "question_id": 53092801, "link": "https://stackoverflow.com/questions/53092801/clause-where-python-using-dataframe/53092878#53092878", "title": "Clause Where Python using dataframe", "body": "<p>You can use <code>.loc</code> and a conditional statement on a Dataframe to select out relevant information, similar to a where clause. You can pull out your desired column(s) using a second argument to <code>loc</code>, e.g.</p>\n\n<pre><code>df.loc[df[column3]==\u201cvalue\u201d, [column2]]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10567630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d508f3352a810eb99665935444a1db32?s=128&d=identicon&r=PG", "display_name": "anayisse", "link": "https://stackoverflow.com/users/10567630/anayisse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1541025344, "answer_count": 1, "score": -1, "last_activity_date": 1541025433, "creation_date": 1541024757, "question_id": 53092801, "link": "https://stackoverflow.com/questions/53092801/clause-where-python-using-dataframe", "closed_reason": "Duplicate", "title": "Clause Where Python using dataframe", "body": "<p>what is the pandas equivalent of</p>\n\n<p><code>SELECT Column2 \nFROM DF\nWHERE column3 =\"value\"</code></p>\n\n<p>when we are using dataframe please</p>\n\n<p>THANK YOU</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 9683621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664aa0a25ca29505ded990d5d9c8e94b?s=128&d=identicon&r=PG&f=1", "display_name": "Samira Kumar", "link": "https://stackoverflow.com/users/9683621/samira-kumar"}, "edited": false, "score": 0, "creation_date": 1541025181, "post_id": 53092834, "comment_id": 93082400, "body": "Worked like a charm.. Thanks for the quick response."}, {"owner": {"reputation": 1506, "user_id": 10359765, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F-1Wf-K-dWQ/AAAAAAAAAAI/AAAAAAAAACA/ub8XVyLGxHM/photo.jpg?sz=128", "display_name": "MoltenMuffins", "link": "https://stackoverflow.com/users/10359765/moltenmuffins"}, "edited": false, "score": 1, "creation_date": 1541032433, "post_id": 53092834, "comment_id": 93084142, "body": "Hello Samira, welcome to Stack Overflow! If you found that coldspeed&#39;s answer solved your issue, please mark it as accepted!"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1541025267, "last_edit_date": 1541025267, "creation_date": 1541024945, "answer_id": 53092834, "question_id": 53092789, "link": "https://stackoverflow.com/questions/53092789/pandas-create-a-new-column-by-comparing-2-columns-in-2-different-data-frames/53092834#53092834", "title": "Pandas: Create a new column by comparing 2 columns in 2 different data frames", "body": "<p>Traditionally, this would need a merge, but I think you can take advantage of pandas' index aligned arithmetic to do this a bit faster.</p>\n\n<pre><code>x = df2.set_index('Source')\ny = df1.set_index('Target').rename_axis('Source')\ny.columns = x.columns\n\nx.add(y.reindex(x.index), fill_value=0).reset_index()\n\n   Source  out_degree\n0       1         4.0\n1       2         5.0\n2       3         5.0\n3       4        29.0\n4       5        58.0\n</code></pre>\n\n<p>The \"traditional\" SQL way of solving this would be using merge:</p>\n\n<pre><code>v = df1.merge(df2, left_on='Target', right_on='Source', how='right')\ndct = dict(\n    Source=v['Source'],\n    out_degree=v['in_degree'].add(v['out_degree'], fill_value=0)) \n\npd.DataFrame(dct).sort_values('Source')\n\n   Source  out_degree\n3       1         4.0\n0       2         5.0\n4       3         5.0\n1       4        29.0\n2       5        58.0\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 9683621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664aa0a25ca29505ded990d5d9c8e94b?s=128&d=identicon&r=PG&f=1", "display_name": "Samira Kumar", "link": "https://stackoverflow.com/users/9683621/samira-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 53092834, "answer_count": 1, "score": 1, "last_activity_date": 1541025267, "creation_date": 1541024692, "question_id": 53092789, "link": "https://stackoverflow.com/questions/53092789/pandas-create-a-new-column-by-comparing-2-columns-in-2-different-data-frames", "title": "Pandas: Create a new column by comparing 2 columns in 2 different data frames", "body": "<p>I've 2 data frames in pandas. </p>\n\n<p>in_degree:</p>\n\n<pre><code>    Target  in_degree\n0   2   1\n1   4   24\n2   5   53\n3   6   98\n4   7   34\n</code></pre>\n\n<p>out_degree</p>\n\n<pre><code> Source out_degree\n0   1   4\n1   2   4\n2   3   5\n3   4   5\n4   5   5\n</code></pre>\n\n<p>By comparing 2 columns, I'd like to create a new data frame which should add columns \"in_degree\" and \"out_degree\" and display the result. </p>\n\n<p>The Sample output should look like</p>\n\n<pre><code> Source/Target  out_degree\n0   1   4\n1   2   5\n2   3   5\n3   4   29\n4   5   58\n</code></pre>\n\n<p>Any help would be appreciated. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "nmap"], "comments": [{"owner": {"reputation": 1175, "user_id": 1175455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gpIG.jpg?s=128&g=1", "display_name": "Harry Cutts", "link": "https://stackoverflow.com/users/1175455/harry-cutts"}, "edited": false, "score": 0, "creation_date": 1541025847, "post_id": 53092781, "comment_id": 93082584, "body": "I&#39;m not sure whether this is the root cause, but you&#39;re missing some brackets on the second line. It should be <code>ns = nmap.PortScanner()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 10294689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ace5f1e6d8a8387d0290f1eeffef00?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_P", "link": "https://stackoverflow.com/users/10294689/alex-p"}, "edited": false, "score": 0, "creation_date": 1541062187, "post_id": 53093060, "comment_id": 93091616, "body": "Thank you very much. This truly did the trick. I must have looked at my code and compared it so many times but the parenthesis, I did not even notice."}], "tags": [], "owner": {"reputation": 1175, "user_id": 1175455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gpIG.jpg?s=128&g=1", "display_name": "Harry Cutts", "link": "https://stackoverflow.com/users/1175455/harry-cutts"}, "is_accepted": true, "score": 2, "last_activity_date": 1541026617, "creation_date": 1541026617, "answer_id": 53093060, "question_id": 53092781, "link": "https://stackoverflow.com/questions/53092781/why-does-my-scan-function-from-the-python-nmap-module-show-str-attribute-erro/53093060#53093060", "title": "Why does my .scan function from the Python-NMAP module show &#39;str&#39; Attribute Error?", "body": "<p>(Since posting <a href=\"https://stackoverflow.com/questions/53092781/why-does-my-scan-function-from-the-python-nmap-module-show-str-attribute-erro#comment93082584_53092781\">my comment</a> I've become convinced that it is the root cause, so posting as an answer.)</p>\n\n<p>You're missing some brackets on the second line. It should read:</p>\n\n<pre><code>ns = nmap.PortScanner()\n</code></pre>\n\n<p>As it is, you're storing the <code>PortScanner</code> class in <code>ns</code>, as opposed to an object of that class. This means that when you call <code>ns.scan</code> its first parameter (which it's expecting to be <code>self</code>, the <code>PortScanner</code> object with an <code>_nmap_path</code> attribute) is actually a string, which doesn't have the attribute. The same reason is behind your editor's warning about the <code>self</code> parameter not being filled, too.</p>\n"}], "owner": {"reputation": 1445, "user_id": 10294689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ace5f1e6d8a8387d0290f1eeffef00?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_P", "link": "https://stackoverflow.com/users/10294689/alex-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 53093060, "answer_count": 1, "score": 2, "last_activity_date": 1541026617, "creation_date": 1541024599, "question_id": 53092781, "link": "https://stackoverflow.com/questions/53092781/why-does-my-scan-function-from-the-python-nmap-module-show-str-attribute-erro", "title": "Why does my .scan function from the Python-NMAP module show &#39;str&#39; Attribute Error?", "body": "<p>I installed first the nmap module in PyCharm but received as many others the error for my nmap.PortScanner function. </p>\n\n<p>Therefore, I uninstalled nmap and installed <strong>python-nmap</strong>. </p>\n\n<p>Now, I have however the problem with executing the command:</p>\n\n<pre><code>import nmap\nns = nmap.PortScanner\nns.scan('My.IP.Add.ress', '1-1024', '-v')\nprint(ns.scaninfo())\n</code></pre>\n\n<p>I get for the second line the error message:\n<strong>AttributeError: 'str' object has no attribute '_nmap_path'</strong></p>\n\n<p>However, watching all examples of this, show precisely these lines of code. \nCan somebody please explain what is happening? </p>\n\n<p>My editor also shows for ns.scaninfo() a warning that the parameter 'self' is not filled. Again, this is not what the examples show. I am very confused by this.</p>\n\n<p>As always, thank you very much for your help!</p>\n"}, {"tags": ["python", "sympy", "equation", "equation-solving"], "comments": [{"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1541027962, "post_id": 53092738, "comment_id": 93083176, "body": "I can duplicate the example provided in the Mathematica documentation using Sympy, albeit somewhat inelegantly using solve. If you want details please let me know."}, {"owner": {"reputation": 21, "user_id": 10588351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c36eceb842e0d018dfe4a667b6e4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Kulkarni", "link": "https://stackoverflow.com/users/10588351/kshitij-kulkarni"}, "reply_to_user": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1541028692, "post_id": 53092738, "comment_id": 93083351, "body": "Hi Bill, yes certainly! Will you be able to comment or write it as an answer? Thanks."}, {"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1541033484, "post_id": 53092738, "comment_id": 93084353, "body": "What about solving the first equation for <i>t</i>, plugging it into <i>Y</i> and then simplifying it? (There may very well be a better solution; I&#39;m not very familiar with sympy)"}], "answers": [{"tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": false, "score": 2, "last_activity_date": 1541043293, "creation_date": 1541043293, "answer_id": 53094889, "question_id": 53092738, "link": "https://stackoverflow.com/questions/53092738/eliminate-a-variable-to-relate-two-functions-in-python-using-sympy/53094889#53094889", "title": "Eliminate a variable to relate two functions in Python using SymPy", "body": "<p>I refer to this example from the 'Scope' section of <a href=\"https://reference.wolfram.com/language/ref/Eliminate.html\" rel=\"nofollow noreferrer\">https://reference.wolfram.com/language/ref/Eliminate.html</a>.</p>\n\n<p>Eliminate[2 x + 3 y + 4 z == 1 &amp;&amp; 9 x + 8 y + 7 z == 2, z]</p>\n\n<pre><code>&gt;&gt;&gt; from sympy import *\n&gt;&gt;&gt; var('x y z')\n(x, y, z)\n&gt;&gt;&gt; solve(2*x+3*y+4*z-1, z)\n[-x/2 - 3*y/4 + 1/4]\n&gt;&gt;&gt; solve(9*x+8*y+7*z-2, z)\n[-9*x/7 - 8*y/7 + 2/7]\n&gt;&gt;&gt; (-9*x/7 - 8*y/7 + Rational(2,7))-(-x/2 - 3*y/4 + Rational(1,4)).simplify()\n-11*x/14 - 11*y/28 + 1/28\n&gt;&gt;&gt; 28*((-9*x/7 - 8*y/7 + Rational(2,7))-(-x/2 - 3*y/4 + Rational(1,4)).simplify())\n-22*x - 11*y + 1\n</code></pre>\n\n<ul>\n<li>Solve each equation for <code>z</code>.</li>\n<li>Subtract one expression for <code>z</code> from the other.</li>\n<li>Note only that numeric fractions need to be coded \u2014 I've used <code>Rational</code> because I forget other methods \u2014 so that fractional arithmetic is used.</li>\n<li>I multiply through to get rid of the denominators.</li>\n<li>This approach will work only for the elimination of a single variable. I haven't considered the second and subsequent examples.</li>\n</ul>\n\n<p>I hope this is useful.</p>\n"}, {"tags": [], "owner": {"reputation": 10115, "user_id": 1089161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61e106a28e171b4407171702b182759f?s=128&d=identicon&r=PG", "display_name": "smichr", "link": "https://stackoverflow.com/users/1089161/smichr"}, "is_accepted": false, "score": 3, "last_activity_date": 1541525792, "creation_date": 1541525792, "answer_id": 53177124, "question_id": 53092738, "link": "https://stackoverflow.com/questions/53092738/eliminate-a-variable-to-relate-two-functions-in-python-using-sympy/53177124#53177124", "title": "Eliminate a variable to relate two functions in Python using SymPy", "body": "<p>Here is a lightly tested simple routine</p>\n\n<pre><code>def eliminate(eqs, z):\n    \"\"\"return eqs with parameter z eliminated from each equation; the first\n    element in the returned list will be the definition of z that was used\n    to eliminate z from the other equations.\n\n    Examples\n    ========\n\n    &gt;&gt;&gt; eqs = [Eq(2*x + 3*y + 4*z, 1),\n    ...        Eq(9*x + 8*y + 7*z, 2)]\n    &gt;&gt;&gt; eliminate(eqs, z)\n    [Eq(z, -x/2 - 3*y/4 + 1/4), Eq(11*x/2 + 11*y/4 + 7/4, 2)]\n    &gt;&gt;&gt; Eq(y,solve(_[1], y)[0])\n    Eq(y, -2*x + 1/11)\n    \"\"\"\n    from sympy.solvers.solveset import linsolve\n    Z = Dummy()\n    rv = []\n    for i, e in enumerate(eqs):\n        if z not in e.free_symbols:\n            continue\n        e = e.subs(z, Z)\n        if z in e.free_symbols:\n            break\n        try:\n            s = linsolve([e], Z)\n            if s:\n                zi = list(s)[0][0]\n                rv.append(Eq(z, zi))\n                rv.extend([eqs[j].subs(z, zi)\n                    for j in range(len(eqs)) if j != i])\n                return rv\n        except ValueError:\n            continue\n    raise ValueError('only a linear parameter can be eliminated')\n</code></pre>\n\n<p>There is a more complex routine at <a href=\"https://github.com/sympy/sympy/issues/2720\" rel=\"nofollow noreferrer\">this issue</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 9235907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fea4f9361339b4bb0c2ee0943dfb332?s=128&d=identicon&r=PG&f=1", "display_name": "butterwagon", "link": "https://stackoverflow.com/users/9235907/butterwagon"}, "is_accepted": false, "score": 1, "last_activity_date": 1577298138, "creation_date": 1577298138, "answer_id": 59480896, "question_id": 53092738, "link": "https://stackoverflow.com/questions/53092738/eliminate-a-variable-to-relate-two-functions-in-python-using-sympy/59480896#59480896", "title": "Eliminate a variable to relate two functions in Python using SymPy", "body": "<p>Suppose you wanted to solve the equations  </p><p><img src=\"https://latex.codecogs.com/gif.latex?%5Cbegin%7Balign*%7Dz&space;&amp;=&space;%5Csin%5Ctheta&space;%5C%5C&space;z_o&space;&amp;=&space;%5Ccos%5Ctheta%5Cend%7Balign*%7D\" alt=\"eqs\"> </p><p>for <img src=\"https://latex.codecogs.com/gif.latex?z_o\" alt=\"z_o\"> as a function of <img src=\"https://latex.codecogs.com/gif.latex?z\" alt=\"z\">. This can be done by solving for <em>both</em> <img src=\"https://latex.codecogs.com/gif.latex?z_o\" alt=\"z_o\"> <em>and</em> <img src=\"https://latex.codecogs.com/gif.latex?%5Ctheta\" alt=\"theta\">: </p>\n\n<pre><code>solve(\n    [\n        Eq(z, sin(theta)),\n        Eq(z_o, cos(theta))\n    ],\n    [z_o, theta],\n    dict=True\n)\n</code></pre>\n\n<p>which yields  </p><p> <img src=\"https://latex.codecogs.com/gif.latex?$$%5Cleft[&space;%5Cleft%5C%7B&space;%5Ctheta&space;:&space;%5Cpi&space;-&space;%5Ctextrm%7Basin%7D%7B%5Cleft(z&space;%5Cright)%7D,&space;%5C&space;z_%7Bo%7D&space;:&space;-&space;%5Csqrt%7B1&space;-&space;z%5E%7B2%7D%7D%5Cright%5C%7D,&space;%5C&space;%5Cleft%5C%7B&space;%5Ctheta&space;:&space;%5Ctextrm%7Basin%7D%7B%5Cleft(z&space;%5Cright)%7D,&space;%5C&space;z_%7Bo%7D&space;:&space;%5Csqrt%7B1&space;-&space;z%5E%7B2%7D%7D%5Cright%5C%7D%5Cright]$$\" alt=\"res\">  </p><p>\nYou can then throw away the result for <img src=\"https://latex.codecogs.com/gif.latex?%5Ctheta\" alt=\"theta\"> and use the rest. </p><p>This doesn't work for all situations - it requires that the intermediate variable be something that sympy could solve for directly.</p>\n"}], "owner": {"reputation": 21, "user_id": 10588351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c36eceb842e0d018dfe4a667b6e4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Kulkarni", "link": "https://stackoverflow.com/users/10588351/kshitij-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1577298138, "creation_date": 1541024333, "question_id": 53092738, "link": "https://stackoverflow.com/questions/53092738/eliminate-a-variable-to-relate-two-functions-in-python-using-sympy", "title": "Eliminate a variable to relate two functions in Python using SymPy", "body": "<p>I have two equations that are parametrized by a variable \"t\". These look like:</p>\n\n<pre><code>X = p(t) \nY = q(t)\n</code></pre>\n\n<p>where p and q are polynomials in t. I want to use Python's SymPy library to eliminate the t variable and express Y = F(X) for some function X. I have tried using solve() in SymPy but this is not working too well. I know that Maple and Mathematica both have eliminate() functions that can accomplish this, but I wanted to know if Python might have a general function that does this. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 116, "user_id": 10548467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLQSq.png?s=128&g=1", "display_name": "pawloka", "link": "https://stackoverflow.com/users/10548467/pawloka"}, "edited": false, "score": 0, "creation_date": 1541024430, "post_id": 53092732, "comment_id": 93082170, "body": "<code>response = int()</code> doesn&#39;t cast anything, change it to <code>response = int(response)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10577980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1f376f10057392dfc4638d8f916fc2?s=128&d=identicon&r=PG&f=1", "display_name": "DrizzyThaCoder2Account", "link": "https://stackoverflow.com/users/10577980/drizzythacoder2account"}, "edited": false, "score": 0, "creation_date": 1541025506, "post_id": 53092820, "comment_id": 93082505, "body": "thanks mate, had to change around some things but know it works fine. :)"}, {"owner": {"reputation": 2723, "user_id": 1683626, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/18b0c699d43b77a23ab85f774f809bc9?s=128&d=identicon&r=PG", "display_name": "Jozef Cechovsky", "link": "https://stackoverflow.com/users/1683626/jozef-cechovsky"}, "reply_to_user": {"reputation": 43, "user_id": 10577980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1f376f10057392dfc4638d8f916fc2?s=128&d=identicon&r=PG&f=1", "display_name": "DrizzyThaCoder2Account", "link": "https://stackoverflow.com/users/10577980/drizzythacoder2account"}, "edited": false, "score": 0, "creation_date": 1541057735, "post_id": 53092820, "comment_id": 93089934, "body": "you&#39;re welcome you can edit my answer and mark it as solved"}], "tags": [], "owner": {"reputation": 2723, "user_id": 1683626, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/18b0c699d43b77a23ab85f774f809bc9?s=128&d=identicon&r=PG", "display_name": "Jozef Cechovsky", "link": "https://stackoverflow.com/users/1683626/jozef-cechovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1541024867, "creation_date": 1541024867, "answer_id": 53092820, "question_id": 53092732, "link": "https://stackoverflow.com/questions/53092732/how-to-sort-input-in-a-python-age-sorting-program/53092820#53092820", "title": "How to sort input in a python age sorting program", "body": "<p>You have to sort dictionary before <code>for</code> cycle. Inside for cycle type of variable <code>response</code> is string and you can't sort it. </p>\n\n<p>Use something like this before <code>for</code> cycle </p>\n\n<pre><code>student_ages_sorted = sorted(student_ages.items(), key=lambda x: x[1])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 10577980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1f376f10057392dfc4638d8f916fc2?s=128&d=identicon&r=PG&f=1", "display_name": "DrizzyThaCoder2Account", "link": "https://stackoverflow.com/users/10577980/drizzythacoder2account"}, "edited": false, "score": 0, "creation_date": 1541026028, "post_id": 53092912, "comment_id": 93082638, "body": "Thanks, that works perfectly. I was wondering what you would have to do to make it reverse like from greatest to least in the same program. I tried to use the reverse function but that just shows an attribute error."}, {"owner": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "reply_to_user": {"reputation": 43, "user_id": 10577980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1f376f10057392dfc4638d8f916fc2?s=128&d=identicon&r=PG&f=1", "display_name": "DrizzyThaCoder2Account", "link": "https://stackoverflow.com/users/10577980/drizzythacoder2account"}, "edited": false, "score": 0, "creation_date": 1541026464, "post_id": 53092912, "comment_id": 93082771, "body": "There&#39;s an optional parameter to the <code>sorted()</code> function called <code>reverse</code> which allows you to specify that it should be sorted reverse. Just change the sorted call to be <code>sorted(student_ages.items(), key=lambda kv: kv[1], reverse=True)</code>"}], "tags": [], "owner": {"reputation": 1472, "user_id": 7087143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFEhW1u4eWk/AAAAAAAAAAI/AAAAAAAAAKU/GXpyPSDtC2s/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/7087143/karl"}, "is_accepted": true, "score": 0, "last_activity_date": 1541026569, "last_edit_date": 1541026569, "creation_date": 1541025490, "answer_id": 53092912, "question_id": 53092732, "link": "https://stackoverflow.com/questions/53092732/how-to-sort-input-in-a-python-age-sorting-program/53092912#53092912", "title": "How to sort input in a python age sorting program", "body": "<p>You have a couple problems with your program. But the main design issue is that you are using a dictionary which is an unordered collection, and when you call <code>response.sort()</code> that is just trying to sort the individual item which doesn't do anything (you can't sort an integer).</p>\n\n<p>What you can do instead is convert the dictionary items to a list which is sorted and then print that list out. We can store the items as tuples so it contains both the name and age data in the list.</p>\n\n<pre><code>sorted_list = sorted(student_ages.items(), key=lambda kv: kv[1]) # Makes a list of tuples sorted by the values\n# Loop through sorted_list of tuples\nfor name, age in sorted_list:\n    print(\"{} is {} years old\".format(name, age))\n</code></pre>\n\n<hr>\n\n<p>The other small problem with your program is that you are not properly taking in inputs and casting them to integers. Your call to <code>int()</code> is just going to return a <code>0</code> for all the ages.</p>\n\n<p>To fix this you need to pass in the string as the parameter to the <code>int()</code> call so it converts the <code>string</code> to an <code>int</code>. </p>\n\n<pre><code>response = input(\"How old are you?\")\nresponse = int(response) # converts response to an int\n</code></pre>\n\n<p>You might want to put a try/except block around the conversion to an int to make sure that valid input was entered.</p>\n"}], "owner": {"reputation": 43, "user_id": 10577980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1f376f10057392dfc4638d8f916fc2?s=128&d=identicon&r=PG&f=1", "display_name": "DrizzyThaCoder2Account", "link": "https://stackoverflow.com/users/10577980/drizzythacoder2account"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 1, "accepted_answer_id": 53092912, "answer_count": 2, "score": 0, "last_activity_date": 1541044279, "creation_date": 1541024295, "last_edit_date": 1541044279, "question_id": 53092732, "link": "https://stackoverflow.com/questions/53092732/how-to-sort-input-in-a-python-age-sorting-program", "title": "How to sort input in a python age sorting program", "body": "<p>I just made a program where you can type in your name and your age and it is supposed to sort people for their age from least to greatest. This is my code so far:</p>\n\n<pre><code>student_ages = {}\n\npolling_for_age_active = True\n\nwhile polling_for_age_active:\n    name = input(\"\\nWhat is your name?\")\n    response = input(\"How old are you?\")\n    response = int()\n    student_ages[name] = response\n\n    repeat = input(\"Are there any other people to go? (yes\\no)\")\n    if repeat == 'no':\n        polling_for_age_active = False\n\nprint(\"\\n----Ages(from least to greatest)----\")\nfor name, response in student_ages.items():\n    response.sort()\n    print(name + \" is \" + response + \" years old.\")\n</code></pre>\n\n<p>When I run the code, the shell says that the <code>int</code> object cannot be sorted. Does anyone have any idea on how to fix this, or even improve it? Thanks.</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1541025126, "post_id": 53092723, "comment_id": 93082385, "body": "What is the reason to store lists of different lengths in a numpy array? Numpy is optimized for homogeneous arrays. What do you try to achieve by using numpy in this case?"}, {"owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "reply_to_user": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1541025761, "post_id": 53092723, "comment_id": 93082559, "body": "@Mr.T I know, I used numpy arrays for homogeneous answers for the upper that I&#39;ve used :p. I am trying to plot the most powerful frequency bins, and I&#39;m using just bare lists for that..."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1541026015, "post_id": 53092723, "comment_id": 93082631, "body": "@Bazingaa I think Meta is a better place than a random question to ask this."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1541026124, "post_id": 53092723, "comment_id": 93082678, "body": "@DomainFlag Mhm. Still don&#39;t understand what the advantage of a numpy array over a list of lists is, but ok."}], "answers": [{"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 3, "last_activity_date": 1541024940, "creation_date": 1541024940, "answer_id": 53092833, "question_id": 53092723, "link": "https://stackoverflow.com/questions/53092723/plot-a-1d-array-of-varying-column-size-arrays-in-matplotlib/53092833#53092833", "title": "Plot a 1D array of varying column size arrays in matplotlib", "body": "<p>You could create the data to be plotted manually:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\na = np.array([\n    [0, 1, 3],\n    [4, 2],\n    [1, 4, 7, 2],\n    [2],\n    [3, 4, 5, 6]\n\n])\n\ndata = np.array([[x, y] for x, ys in enumerate(a) for y in ys])\n\nplt.scatter(data[:, 0], data[:, 1], c='red')\nplt.xlabel(\"Interval\")\nplt.ylabel(\"Value\")\nplt.show()\n</code></pre>\n\n<p><strong>Output</strong>\n<a href=\"https://i.stack.imgur.com/UzMor.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UzMor.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 1, "last_activity_date": 1541025336, "last_edit_date": 1541025336, "creation_date": 1541025034, "answer_id": 53092841, "question_id": 53092723, "link": "https://stackoverflow.com/questions/53092723/plot-a-1d-array-of-varying-column-size-arrays-in-matplotlib/53092841#53092841", "title": "Plot a 1D array of varying column size arrays in matplotlib", "body": "<p>You were almost close. You can just use a <strong>single for loop</strong> to plot individual lists as following. <code>lst</code> will be one sublist at a time and \n<code>[i]*len(lst)</code> will generate the number of x-datapoints for that sublist. </p>\n\n<pre><code>for i, lst in enumerate(a):\n    plt.scatter([i]*len(lst), lst,  color='r')\nplt.xlabel(\"Interval\")\nplt.ylabel(\"Value\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JaamO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JaamO.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 53092841, "answer_count": 2, "score": -1, "last_activity_date": 1541071126, "creation_date": 1541024236, "last_edit_date": 1541071126, "question_id": 53092723, "link": "https://stackoverflow.com/questions/53092723/plot-a-1d-array-of-varying-column-size-arrays-in-matplotlib", "title": "Plot a 1D array of varying column size arrays in matplotlib", "body": "<p>Given that, I have arrays of x &amp; y, I am able to plot easy the points, like so:</p>\n\n<pre><code>a = np.arange(10).reshape(5, 2)\n\nplt.scatter(a.T[0], a.T[1])\nplt.xlabel(\"Interval\")\nplt.ylabel(\"Value\")\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VbcmI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VbcmI.png\" alt=\"enter image description here\"></a></p>\n\n<p>But currently, I have a list of lists with varying size, like so:</p>\n\n<pre><code>a = [\n    [0, 1, 3],\n    [4, 2],\n    [1, 4, 7, 2],\n    [2],\n    [3, 4, 5, 6]\n]\n\nplt.scatter(a, list(range(len(a))))\nplt.xlabel(\"Interval\")\nplt.ylabel(\"Value\")\nplt.show()\n</code></pre>\n\n<p>But, that gives an error: setting an array element with a sequence which surely will do when the dimensions aren't fixed and the sizes are not equal( (dimen) x != (dimen) y), but I am looking at getting something like that:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bB9m6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bB9m6.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I obtain that kind of plot?</p>\n"}, {"tags": ["python", "google-api", "google-workspace", "google-vault-api"], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 551120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2495abf40d325c13f968182dc74af4a4?s=128&d=identicon&r=PG", "display_name": "AmirModiri", "link": "https://stackoverflow.com/users/551120/amirmodiri"}, "edited": false, "score": 0, "creation_date": 1541596656, "post_id": 53153952, "comment_id": 93269256, "body": "I tried to dowload from google storage but access to this bucket are forbiden with the same service account that i created the vault export. do you have any idea why it happen ?"}], "tags": [], "owner": {"reputation": 162, "user_id": 5038224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6KTim.png?s=128&g=1", "display_name": "darkfolcer", "link": "https://stackoverflow.com/users/5038224/darkfolcer"}, "is_accepted": false, "score": 4, "last_activity_date": 1547196911, "last_edit_date": 1547196911, "creation_date": 1541418986, "answer_id": 53153952, "question_id": 53092697, "link": "https://stackoverflow.com/questions/53092697/is-there-any-way-to-download-exported-data-from-a-google-vault-export/53153952#53153952", "title": "Is there any way to download exported data from a Google Vault Export?", "body": "<p>Once all the exports are created you'll need to wait for them to be completed. You can use <a href=\"https://developers.google.com/vault/reference/rest/v1/matters.exports/list\" rel=\"nofollow noreferrer\">https://developers.google.com/vault/reference/rest/v1/matters.exports/list</a> to check the status of every export in a matter. In the response refer to the \u201cexports\u201d array and check the value of \u201cstatus\u201d for each, any that say \"COMPLETED\" can be downloaded.</p>\n\n<p>To download a completed export go to the \u201ccloudStorageSink\u201d object of each export and take the \"bucketName\" and \"objectName\" value of the first entry in the \"files\" Array. You\u2019ll need to use the Cloud Storage API and these two values to download the files. This page has code examples for all the popular languages and using the API <a href=\"https://cloud.google.com/storage/docs/downloading-objects#storage-download-object-cpp\" rel=\"nofollow noreferrer\">https://cloud.google.com/storage/docs/downloading-objects#storage-download-object-cpp</a>.</p>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 10680037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b31546d48363bb900febb1a3485f27?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Ben Yakir", "link": "https://stackoverflow.com/users/10680037/shahaf-ben-yakir"}, "is_accepted": false, "score": 5, "last_activity_date": 1542724276, "last_edit_date": 1542724276, "creation_date": 1542723931, "answer_id": 53395145, "question_id": 53092697, "link": "https://stackoverflow.com/questions/53092697/is-there-any-way-to-download-exported-data-from-a-google-vault-export/53395145#53395145", "title": "Is there any way to download exported data from a Google Vault Export?", "body": "<p>There are two approaches that can do the action you require:  </p>\n\n<p><strong>The first:</strong><br>\nusing OAuth 2.0 refresh and access keys however it requires the intervention of the user, acknowledging your app access. \nYou can find a nice playground supplied by Google and more info here: <a href=\"https://developers.google.com/oauthplayground/\" rel=\"noreferrer\">https://developers.google.com/oauthplayground/</a>.  </p>\n\n<ol>\n<li>You will first need to choose your desired API (in your case it is the: <code>https://www.googleapis.com/auth/devstorage.full_controll</code> under the <strong>Cloud Storage JSON API v1</strong> section. </li>\n<li>Then, you will need to log in with an <strong>admin</strong> account and click: <em>\"Exchange authorization code for tokens\"</em> (the fields <em>\"Refresh token\"</em> and <em>\"Access token\"</em> will be field automatically).</li>\n<li>Lastly, you will need to choose the right URL to perform your request. I suggest using the <em>\"List possible operations\"</em> to choose the right URL. You will need to choose  <em>\"Get Object - Retrieve the object\"</em> under <strong><em>Cloud Storage API v1</em></strong> (notice that there are several options with the name -<em>\"Get Object\"</em>, be sure to choose the one under <strong><em>Cloud Storage API v1</em></strong> and not the one under <strong><em>Cloud Storage JSON API v1</em></strong>). Now just enter your bucket and object name in the appropriate placeholders and click <em>Send the request</em>.</li>\n</ol>\n\n<p><strong>The second:</strong><br>\nProgrammatically download it using Google client libraries. This is the approach suggested by <a href=\"https://stackoverflow.com/users/5038224/darkfolcer\">@darkfolcer</a> however I believe that the documentation provided by Google is insufficient and thus does not really help. If a python example will help, you can find one in the answer to the following question - <a href=\"https://stackoverflow.com/questions/52434152/how-to-download-files-from-google-vault-export-immediately-after-creating-it-wit\">How to download files from Google Vault export immediately after creating it with Python API?</a></p>\n"}, {"tags": [], "owner": {"reputation": 2322, "user_id": 11869748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qh4YQ.jpg?s=128&g=1", "display_name": "ZektorH", "link": "https://stackoverflow.com/users/11869748/zektorh"}, "is_accepted": false, "score": 0, "last_activity_date": 1585303464, "creation_date": 1585303464, "answer_id": 60883775, "question_id": 53092697, "link": "https://stackoverflow.com/questions/53092697/is-there-any-way-to-download-exported-data-from-a-google-vault-export/60883775#60883775", "title": "Is there any way to download exported data from a Google Vault Export?", "body": "<p>The issue you are seeing is because the API works with the <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_privilege\" rel=\"nofollow noreferrer\">principle of least privilege</a>.</p>\n\n<p>The implications for you is that, since your objective is to download the files from the export, you would get the permissions to download only the files, not the whole bucket (even if it contains only those files).</p>\n\n<p>This is why when you request information from the storage bucket, you get the 403 error (permission error). However, you <strong>do have</strong> permission to download the files inside the bucket. In this way, what you should do is <a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects/get\" rel=\"nofollow noreferrer\">get each object directly</a>, doing requests like this (using the information on the question):</p>\n\n<p><code>GET https://storage.googleapis.com/storage/v1/b/408d9135-6155-4a43-9d3c-424f124b9474/o/a740999b-e11b-4af5-b8b1-6c6def35d677/exportly-41dd7886-fe02-432f-83c-a4b6fd4520a5/Test_Export-1.zip</code></p>\n\n<p>So, in short, instead of getting the full bucket, get each individual file generated by the export.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 175, "user_id": 676013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1c61eab652e22eee6700355c57d391b4?s=128&d=identicon&r=PG", "display_name": "NickCSE", "link": "https://stackoverflow.com/users/676013/nickcse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1585303464, "creation_date": 1541024100, "last_edit_date": 1585234378, "question_id": 53092697, "link": "https://stackoverflow.com/questions/53092697/is-there-any-way-to-download-exported-data-from-a-google-vault-export", "title": "Is there any way to download exported data from a Google Vault Export?", "body": "<p>From documentation on <a href=\"https://developers.google.com/vault/guides/exports\" rel=\"nofollow noreferrer\">https://developers.google.com/vault/guides/exports</a>, I've been able to create, list, and retrieve exports, but I haven't found any way to download the exported data associated with a specific export. Is there any way to download the exported files via the API, or is this only available through the vault UI?</p>\n\n<p>There is a <code>cloudStorageSink</code> key in the export metadata, but trying to use the values provided using the cloud storage API results in a generic permissions issue (403 Error). </p>\n\n<p>Example export metadata response: </p>\n\n<pre><code>{\n    \"status\": \"COMPLETED\",\n    \"cloudStorageSink\": {\n        \"files\": [\n            {\n                \"md5Hash\": \"da5e3979864d71d1e3ac776b618dcf48\",\n                \"bucketName\": \"408d9135-6155-4a43-9d3c-424f124b9474\",\n                \"objectName\": \"a740999b-e11b-4af5-b8b1-6c6def35d677/exportly-41dd7886-fe02-432f-83c-a4b6fd4520a5/Test_Export-1.zip\",\n                \"size\": \"37720\"\n            },\n            {\n                \"md5Hash\": \"d345a812e15cdae3b6277a0806668808\",\n                \"bucketName\": \"408d9135-6155-4a43-9d3c-424f124b9474\",\n                \"objectName\": \"a507999b-e11b-4af5-b8b1-6c6def35d677/exportly-41dd6886-fb02-4c2f-813c-a4b6fd4520a5/Test_Export-metadata.xml\",\n                \"size\": \"8943\"\n            },\n            {\n                \"md5Hash\": \"21e91e1c60e6c07490faaae30f8154fd\",\n                \"bucketName\": \"408d9135-6155-4a43-9d3c-424f124b9474\",\n                \"objectName\": \"a503959b-e11b-4af5-b8b1-6c6def35d677/exportly-41dd6786-fb02-42f-813c-a4b6fd4520a5/Test_Export-results-count.csv\",\n                \"size\": \"26\"\n            }\n        ]\n    },\n    \"stats\": {\n        \"sizeInBytes\": \"46689\",\n        \"exportedArtifactCount\": \"7\",\n        \"totalArtifactCount\": \"7\"\n    },\n    \"name\": \"Test Export\",\n    ...\n}\n</code></pre>\n"}, {"tags": ["python", "nltk"], "answers": [{"tags": [], "owner": {"reputation": 1373, "user_id": 5121457, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LL7q6xBDBlM/AAAAAAAAAAI/AAAAAAAAAB8/qRvPE3tHKk4/photo.jpg?sz=128", "display_name": "Gabriel M", "link": "https://stackoverflow.com/users/5121457/gabriel-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1541026545, "creation_date": 1541026545, "answer_id": 53093047, "question_id": 53092660, "link": "https://stackoverflow.com/questions/53092660/nltk-what-should-be-downloaded-to-using-sent-tokenize/53093047#53093047", "title": "NLTK: what should be downloaded to using sent_tokenize", "body": "<p>You can try</p>\n\n<pre><code>nltk.download(\"popular\")\n</code></pre>\n\n<p>it downloads the most basic tools of NLTK such as the tokenizer and the stopwords</p>\n"}], "owner": {"reputation": 2624, "user_id": 6840039, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bbe8da8fb805e0564d583715d6addb74?s=128&d=identicon&r=PG&f=1", "display_name": "Petr Petrov", "link": "https://stackoverflow.com/users/6840039/petr-petrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541026545, "creation_date": 1541023919, "last_edit_date": 1541025565, "question_id": 53092660, "link": "https://stackoverflow.com/questions/53092660/nltk-what-should-be-downloaded-to-using-sent-tokenize", "title": "NLTK: what should be downloaded to using sent_tokenize", "body": "<p>I try to use <code>sent_tokenize()</code> from nltk so I've downloaded next</p>\n\n<pre><code>import nltk\nnltk.download(\"stopwords\")\nnltk.download(\"punkt\")\n\nfrom nltk.tokenize import word_tokenize, sent_tokenize\nfrom nltk.corpus import stopwords\n\n# tokenize sentences\nsentences = [sent for sent in sent_tokenize(data, \"russian\")]\n</code></pre>\n\n<p>But it returns me</p>\n\n<pre><code>LookupError: \nResource punkt not found.\nPlease use the NLTK Downloader to obtain the resource:\n\n  import nltk\n  nltk.download('punkt')\n\n  Searched in:\n- '/Users/nltk_data'\n- '/usr/share/nltk_data'\n- '/usr/local/share/nltk_data'\n- '/usr/lib/nltk_data'\n- '/usr/local/lib/nltk_data'\n- '/Library/Frameworks/Python.framework/Versions/3.6/nltk_data'\n- '/Library/Frameworks/Python.framework/Versions/3.6/share/nltk_data'\n- '/Library/Frameworks/Python.framework/Versions/3.6/lib/nltk_data'\n</code></pre>\n\n<hr>\n\n<p>But I don't understand why, I've downloaded it.\nI try to use <code>nltk.download()</code> but I don't have a lot of RAM, so it works too slowly.\nWhat should I change there to fix it?</p>\n"}, {"tags": ["python", "matrix", "append"], "comments": [{"owner": {"reputation": 841, "user_id": 6067528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c8f36aaa3e05af864eb5e19187f1db9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Comber", "link": "https://stackoverflow.com/users/6067528/sam-comber"}, "edited": false, "score": 0, "creation_date": 1541024195, "post_id": 53092655, "comment_id": 93082090, "body": "Why can&#39;t you just use <code>A[0] = [1]</code>?"}, {"owner": {"reputation": 3, "user_id": 6674543, "user_type": "registered", "profile_image": "https://graph.facebook.com/954788101284181/picture?type=large", "display_name": "Wellington J&#250;nior", "link": "https://stackoverflow.com/users/6674543/wellington-j%c3%banior"}, "reply_to_user": {"reputation": 841, "user_id": 6067528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c8f36aaa3e05af864eb5e19187f1db9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Comber", "link": "https://stackoverflow.com/users/6067528/sam-comber"}, "edited": false, "score": 0, "creation_date": 1541090893, "post_id": 53092655, "comment_id": 93106716, "body": "Because I need to start with an empty matrix and append values in a loop one by one."}, {"owner": {"reputation": 3, "user_id": 6674543, "user_type": "registered", "profile_image": "https://graph.facebook.com/954788101284181/picture?type=large", "display_name": "Wellington J&#250;nior", "link": "https://stackoverflow.com/users/6674543/wellington-j%c3%banior"}, "reply_to_user": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1541091020, "post_id": 53092655, "comment_id": 93106772, "body": "@sacul, could you link the question which mine is a duplicated of? I really couldn&#39;t find any question similar, sorry."}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1541091099, "post_id": 53092655, "comment_id": 93106812, "body": "@WellingtonJ&#250;nior, Look next to the vote counts, it provides the <a href=\"https://stackoverflow.com/questions/240178/list-of-lists-changes-reflected-across-sublists-unexpectedly\">link</a>"}, {"owner": {"reputation": 3, "user_id": 6674543, "user_type": "registered", "profile_image": "https://graph.facebook.com/954788101284181/picture?type=large", "display_name": "Wellington J&#250;nior", "link": "https://stackoverflow.com/users/6674543/wellington-j%c3%banior"}, "reply_to_user": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1541093142, "post_id": 53092655, "comment_id": 93107922, "body": "Thank you @sacul. Sorry I couldn&#39;t find it. Should I delete this question?"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1541093242, "post_id": 53092655, "comment_id": 93107970, "body": "It&#39;s up to you :) There are a decent number of questions like this, so it&#39;s not a problem if you delete it"}, {"owner": {"reputation": 3, "user_id": 6674543, "user_type": "registered", "profile_image": "https://graph.facebook.com/954788101284181/picture?type=large", "display_name": "Wellington J&#250;nior", "link": "https://stackoverflow.com/users/6674543/wellington-j%c3%banior"}, "edited": false, "score": 0, "creation_date": 1541093623, "post_id": 53092655, "comment_id": 93108170, "body": "I&#39;ll keep it so other people that asks the same wasy can find the answer. Thanks a lot."}], "owner": {"reputation": 3, "user_id": 6674543, "user_type": "registered", "profile_image": "https://graph.facebook.com/954788101284181/picture?type=large", "display_name": "Wellington J&#250;nior", "link": "https://stackoverflow.com/users/6674543/wellington-j%c3%banior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11, "favorite_count": 0, "closed_date": 1541024064, "answer_count": 0, "score": 0, "last_activity_date": 1541023896, "creation_date": 1541023896, "question_id": 53092655, "link": "https://stackoverflow.com/questions/53092655/python-appending-individual-elements-to-matrix-individually", "closed_reason": "Duplicate", "title": "Python - Appending individual elements to matrix individually", "body": "<p>May the matrix be:</p>\n\n<pre><code>&gt;&gt;&gt; A=[[]]*3\n&gt;&gt;&gt; A\n[[],[],[]]\n</code></pre>\n\n<p>I want to append the value <code>1</code> to the first list of the matrix so that:</p>\n\n<pre><code>&gt;&gt;&gt;A[0].append(1)\n&gt;&gt;&gt;A\n[[1],[],[]]\n</code></pre>\n\n<p>But when I try it this way, the result is:</p>\n\n<pre><code>&gt;&gt;&gt;A[0].append(1)\n&gt;&gt;&gt;A\n[[1],[1],[1]]\n</code></pre>\n\n<p>How do I make it only append in the first list?</p>\n\n<p>I'm on Python 3.6.6</p>\n"}, {"tags": ["python", "conditional"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1541024348, "post_id": 53092636, "comment_id": 93082148, "body": "<code>if 1 in {a(), b()}:</code>"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 1, "creation_date": 1541025241, "post_id": 53092636, "comment_id": 93082418, "body": "Python also has <code>|</code> and <code>&amp;</code> which you can use with booleans in the way you want (similar to <code>or</code> and <code>and</code>) <code>True &amp; False == False</code>. They are called &quot;bitwise or&quot; and &quot;bitwise and&quot;. If you use them with non-boolean types, they will not give the same result as logical and / or. For example <code>1 and 2 == 2</code> vs <code>1 &amp; 2 == 0</code>. This is the same as many other languages. It&#39;s true that bitwise operators don&#39;t short circuit, but that&#39;s not the only difference between <code>|</code> and <code>||</code>."}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 3548298, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60bfa89cb98ef24ab1f44a10fdccf6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3548298", "link": "https://stackoverflow.com/users/3548298/user3548298"}, "edited": false, "score": 0, "creation_date": 1541024212, "post_id": 53092672, "comment_id": 93082095, "body": "I forgot this behaviour was called &quot;short circuit&quot;. Therefore, how is it called when it&#39;s &quot;not short circuit&quot; ? Simply non-short circuit ?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 186, "user_id": 3548298, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60bfa89cb98ef24ab1f44a10fdccf6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3548298", "link": "https://stackoverflow.com/users/3548298/user3548298"}, "edited": false, "score": 0, "creation_date": 1541024433, "post_id": 53092672, "comment_id": 93082172, "body": "@user3548298 it is still short-circuiting, but every operator is forced to be evaluated first. This is not behaviour you would ideally want in your program, because short circuiting is very useful in most situations."}, {"owner": {"reputation": 186, "user_id": 3548298, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60bfa89cb98ef24ab1f44a10fdccf6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3548298", "link": "https://stackoverflow.com/users/3548298/user3548298"}, "edited": false, "score": 0, "creation_date": 1541024530, "post_id": 53092672, "comment_id": 93082213, "body": "Can you develop what you mean about pure functions ? In my program I&#39;m working with surfaces from pygame and those two evaluated functions return true if they changed something in their respective surfaces. The code executed in that case is a refresh of an other surface containing the two previously mentioned surfaces. Do you see anything wrong in doing it that way ?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 186, "user_id": 3548298, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60bfa89cb98ef24ab1f44a10fdccf6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3548298", "link": "https://stackoverflow.com/users/3548298/user3548298"}, "edited": false, "score": 0, "creation_date": 1541024638, "post_id": 53092672, "comment_id": 93082241, "body": "@user3548298 pure functions return the same result for the same input under any condition and do not change any state externally when called. If your functions were indeed pure, you would not always need to call both of them to evaluate the result of  a() or b()."}, {"owner": {"reputation": 186, "user_id": 3548298, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60bfa89cb98ef24ab1f44a10fdccf6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3548298", "link": "https://stackoverflow.com/users/3548298/user3548298"}, "edited": false, "score": 0, "creation_date": 1541025043, "post_id": 53092672, "comment_id": 93082366, "body": "To give a little bit more details, those two functions are methods using objects&#39; buffers to update the surfaces. Does it mean it&#39;s a bad programming practice to use directly the self.buffer variable instead of putting it in the if statement as input as such : if (a(self.buffer)) ?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 186, "user_id": 3548298, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60bfa89cb98ef24ab1f44a10fdccf6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3548298", "link": "https://stackoverflow.com/users/3548298/user3548298"}, "edited": false, "score": 1, "creation_date": 1541025206, "post_id": 53092672, "comment_id": 93082408, "body": "@user3548298 I speak from a general perspective. Unfortunately, I&#39;m not really experienced with pygame enough to decide whether there are no better options than bending the rules of conventional practices. But wherever you can, seek to make your functions pure."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1541023975, "creation_date": 1541023975, "answer_id": 53092672, "question_id": 53092636, "link": "https://stackoverflow.com/questions/53092636/python-evaluate-every-conditions-of-a-conditional-statement/53092672#53092672", "title": "Python - Evaluate every conditions of a conditional statement", "body": "<p>If you still want the <code>or</code> logic without the short circuiting, first evaluate all the operands and then use <code>any</code>:</p>\n\n<pre><code>if any([a(), b()]):\n    ...\n</code></pre>\n\n<p>The list must first be created (meaning the functions will be called and their results returned) before the list is passed to <code>any</code> (which returns <code>True</code> if any value in the list is truthy).</p>\n\n<p>Please take note, however, that functions should be pure and not induce side effects so as to make hacky workarounds like this necessary.</p>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 1224114, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bd142f4f9840059f6f3cca1629e06523?s=128&d=identicon&r=PG", "display_name": "sashas", "link": "https://stackoverflow.com/users/1224114/sashas"}, "is_accepted": false, "score": 1, "last_activity_date": 1541024089, "creation_date": 1541024089, "answer_id": 53092693, "question_id": 53092636, "link": "https://stackoverflow.com/questions/53092636/python-evaluate-every-conditions-of-a-conditional-statement/53092693#53092693", "title": "Python - Evaluate every conditions of a conditional statement", "body": "<p>you can use any method that accepts list of functions i.e. </p>\n\n<pre><code>if any([a(), b()]):\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": false, "score": 2, "last_activity_date": 1541028253, "last_edit_date": 1541028253, "creation_date": 1541025548, "answer_id": 53092921, "question_id": 53092636, "link": "https://stackoverflow.com/questions/53092636/python-evaluate-every-conditions-of-a-conditional-statement/53092921#53092921", "title": "Python - Evaluate every conditions of a conditional statement", "body": "<p>If you need both functions to run, it would probably be cleanest to be explicit and write it out fully:</p>\n\n<pre><code>x = a()\ny = b()\n\nif x or y:\n  pass\n</code></pre>\n\n<p>This makes it clear that the calls should necessarily happen. Hiding that fact in the condition seems like a good way to forget about that requirement in the future, and do a refactor that ends up biting you. </p>\n"}], "owner": {"reputation": 186, "user_id": 3548298, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60bfa89cb98ef24ab1f44a10fdccf6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3548298", "link": "https://stackoverflow.com/users/3548298/user3548298"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53092672, "answer_count": 3, "score": -1, "last_activity_date": 1541051601, "creation_date": 1541023771, "last_edit_date": 1541051601, "question_id": 53092636, "link": "https://stackoverflow.com/questions/53092636/python-evaluate-every-conditions-of-a-conditional-statement", "title": "Python - Evaluate every conditions of a conditional statement", "body": "<p>In the following code, if <code>a()</code> returns 1, <code>b()</code> is not evaluated:</p>\n\n<pre><code>if (a() or b()):\n    # do stuff\n</code></pre>\n\n<p>How can I make sure all of the functions in the statement will be evaluated no matter their result?\nIn some languages they use <code>|</code> and <code>||</code> to differentiate the two possibilities. Is there anything equivalent in Python?\nSame question for an <code>and</code> statement.</p>\n"}, {"tags": ["python", "python-3.x", "loops", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 2, "last_activity_date": 1541023814, "creation_date": 1541023814, "answer_id": 53092641, "question_id": 53092613, "link": "https://stackoverflow.com/questions/53092613/python-loop-requests-get-only-returns-first-loop/53092641#53092641", "title": "python loop requests.get() only returns first loop", "body": "<p>You left out the <code>&amp;</code> after <code>'?p=' + str(i)</code>, so your requests all have <code>p</code> set to <code>${NUMBER}race=worldchampionship</code>, which ironman.com presumably can't make sense of and just ignores.  Insert a <code>&amp;</code> at the beginning of <code>'race=worldchampionship'</code>.</p>\n\n<p>To prevent this sort of mistake in the future, you can pass the URL's query parameters as a <code>dict</code> to the <code>params</code> keyword argument like so:</p>\n\n<pre><code>    params = {\n        \"p\": i,\n        \"race\": \"worldchampionship\",\n        \"rd\": \"20181013\", \n        \"agegroup\": \"Pro\",\n        \"sex\": \"M\",\n        \"y\": \"2018\",\n        \"ps\": \"20\",\n    }\n\n    res = requests.get(r'http://www.ironman.com/triathlon/events/americas/ironman/world-championship/results.aspx#axzz5VRWzxmt3', params=params)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10588305, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NSuYLMyvHXw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCCVQxxrLsmIhxn9f_LAaQvC-q6nA/mo/photo.jpg?sz=128", "display_name": "Andy Ia", "link": "https://stackoverflow.com/users/10588305/andy-ia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53092641, "answer_count": 1, "score": 1, "last_activity_date": 1541023814, "creation_date": 1541023640, "question_id": 53092613, "link": "https://stackoverflow.com/questions/53092613/python-loop-requests-get-only-returns-first-loop", "title": "python loop requests.get() only returns first loop", "body": "<p>Trying to scrape a table from multiple webpages and store in a list. The list prints out the results from the first webpage 3 times. </p>\n\n<pre><code>import pandas as pd\nimport requests\nfrom bs4 import BeautifulSoup\n\ndflist = []\nfor i in range(1,4):\n    s = requests.Session()\n    res = requests.get(r'http://www.ironman.com/triathlon/events/americas/ironman/world-championship/results.aspx?p=' + str(i) + 'race=worldchampionship&amp;rd=20181013&amp;agegroup=Pro&amp;sex=M&amp;y=2018&amp;ps=20#axzz5VRWzxmt3')\n    soup = BeautifulSoup(res.content,'lxml')\n    table = soup.find_all('table')\n    dfs = pd.read_html(str(table))\n    dflist.append(dfs)\n    s.close()\n\nprint(dflist)  \n</code></pre>\n"}, {"tags": ["python", "concurrency", "main", "concurrent.futures"], "answers": [{"tags": [], "owner": {"reputation": 229, "user_id": 3776726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d22e349e7d0b08c45aeb8f7531486a15?s=128&d=identicon&r=PG&f=1", "display_name": "gowthamnvv", "link": "https://stackoverflow.com/users/3776726/gowthamnvv"}, "is_accepted": false, "score": 1, "last_activity_date": 1542058443, "creation_date": 1542058443, "answer_id": 53270432, "question_id": 53092611, "link": "https://stackoverflow.com/questions/53092611/python-concurrency-with-imported-modules/53270432#53270432", "title": "Python concurrency with imported modules", "body": "<p>If you are using macOS, defining one of the below environment variables could work as a temporary workaround.</p>\n\n<pre><code>OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES  \n</code></pre>\n\n<p>Read more about the issue <a href=\"http://sealiesoftware.com/blog/archive/2017/6/5/Objective-C_and_fork_in_macOS_1013.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>NO_PROXY='*'\n</code></pre>\n\n<p>Read more about the issue <a href=\"https://bugs.python.org/issue30385\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The second option worked for me on macOS 10.14.1 with Python 3.6.0</p>\n"}], "owner": {"reputation": 165, "user_id": 724403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/50866dfec36a7359ad32f0ec74a97346?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/724403/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542058443, "creation_date": 1541023630, "last_edit_date": 1541072076, "question_id": 53092611, "link": "https://stackoverflow.com/questions/53092611/python-concurrency-with-imported-modules", "title": "Python concurrency with imported modules", "body": "<p><strong>Why does importing local modules cause Concurrent.futures.ProcessPoolExecutor to throw a BrokenProcessPool exception?</strong></p>\n\n<p>When I import a local module, I get a BrokenProcessPool exception when I run the file. I have tried commenting out everything in that module and I get the same result. I have also tried other files/modules with the same result. However, if I comment out the import statement, or place it inside the main() function, it works without terminating a process and raising the exception. I have tried the same thing with other local modules and I get the same result. Why is this happening and what can I do to avoid the exception?</p>\n\n<p>I am trying to use concurrent.futures with ProcessPoolExecutor. I based my code example on the top answer for this question: <a href=\"https://stackoverflow.com/questions/26187759/parallelize-apply-after-pandas-groupby\">Parallelize apply after pandas groupby</a></p>\n\n<p>Here is my version:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport time\nfrom concurrent.futures import ProcessPoolExecutor, as_completed\nimport analysis_helper # a local module\n\nprint(__name__)\nnrows = 15000\nnp.random.seed(1980)\ndf = pd.DataFrame({'a': np.random.permutation(np.arange(nrows))})\n\ndef f1(group):\n    time.sleep(0.0001)\n    return group\n\ndef main():\n    with ProcessPoolExecutor(12) as ppe:\n        futures = []\n        results = []\n\n        for name, group in df.groupby('a'):\n            p = ppe.submit(f1, group)\n            futures.append(p)\n\n        for future in as_completed(futures):\n            r = future.result()\n            results.append(r)\n\n        df_output = pd.concat(results)\n        print(df_output)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Results with analysis_helper removed:</p>\n\n<pre><code>runfile('C:/dev/.../test_parallelizer_pandas.py', wdir='C:/dev/...')\n__main__\n           a\n1255    1733\n3372   11015\n5318    4571\n7076   14510\n10545  10749\n3340     483\n11844   3736\n3681   14509\n2222    1041\n3640   11014\n4288    7852\n12257   1040\n2101   11034\n14938   3065\n8449    1842\n7231   10746\n7509    4353\n4898    3797\n2941     866\n7497   14520\n8302   11013\n13882   9924\n12007   1042\n1567   10747\n13135   7856\n7742     485\n13709  12571\n1946   11012\n5634    7848\n7044    4354\n     ...\n3441   14213\n179    14361\n6723   12134\n7528    5905\n9273   12420\n9916    3614\n134    10166\n11654   5854\n11848  12133\n14055   4278\n6100   14360\n726    14981\n13139  14982\n12552  14983\n5393   14984\n6927   14986\n8108   14985\n12665  14987\n8587   14988\n11437  14989\n4191   14990\n6877   14991\n4997   14994\n13527  14995\n9477   14993\n2930   14996\n5456   14992\n781    14997\n3287   14998\n13386  14999\n\n[15000 rows x 1 columns]\n</code></pre>\n\n<p>Results with analysis_helper:</p>\n\n<pre><code>runfile('C:/dev/.../test_parallelizer_pandas.py', wdir='C:/dev/...')\n__main__\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-7-7d6a88ec5a87&gt;\", line 1, in &lt;module&gt;\n    runfile('C:/dev/.../test_parallelizer_pandas.py', wdir='C:/dev/...')\n\n  File \"C:\\Users\\david\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 705, in runfile\n    execfile(filename, namespace)\n\n  File \"C:\\Users\\david\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"C:/dev/.../test_parallelizer_pandas.py\", line 42, in &lt;module&gt;\n    main()\n\n  File \"C:/dev/.../test_parallelizer_pandas.py\", line 35, in main\n    r = future.result()\n\n  File \"C:\\Users\\david\\Anaconda3\\lib\\concurrent\\futures\\_base.py\", line 425, in result\n    return self.__get_result()\n\n  File \"C:\\Users\\david\\Anaconda3\\lib\\concurrent\\futures\\_base.py\", line 384, in __get_result\n    raise self._exception\n\nBrokenProcessPool: A process in the process pool was terminated abruptly while the future was running or pending.\n</code></pre>\n\n<p>Note: this only happens with ProcessPoolExecutor, not ThreadPoolExecutor.</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "machine-learning", "pattern-recognition"], "comments": [{"owner": {"reputation": 2077, "user_id": 3009636, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/04e0f94443ae5d17f977cb09ccde315b?s=128&d=identicon&r=PG&f=1", "display_name": "quant", "link": "https://stackoverflow.com/users/3009636/quant"}, "edited": false, "score": 0, "creation_date": 1541024698, "post_id": 53092595, "comment_id": 93082263, "body": "Which machine learning library do you want to use? pybrain? scikit-learn? Another library? Do you want to develop the library on your own?"}, {"owner": {"reputation": 31, "user_id": 10470133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74340a7bf52c3a7cf6395a3d9db6f47b?s=128&d=identicon&r=PG&f=1", "display_name": "yasser", "link": "https://stackoverflow.com/users/10470133/yasser"}, "reply_to_user": {"reputation": 2077, "user_id": 3009636, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/04e0f94443ae5d17f977cb09ccde315b?s=128&d=identicon&r=PG&f=1", "display_name": "quant", "link": "https://stackoverflow.com/users/3009636/quant"}, "edited": false, "score": 0, "creation_date": 1541024852, "post_id": 53092595, "comment_id": 93082317, "body": "I am trying to design knn classifier without using library."}], "answers": [{"tags": [], "owner": {"reputation": 718, "user_id": 10528078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c42df61d1d464c084c4540fdcbfe56e5?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/10528078/leo"}, "is_accepted": true, "score": 1, "last_activity_date": 1541028105, "creation_date": 1541028105, "answer_id": 53093228, "question_id": 53092595, "link": "https://stackoverflow.com/questions/53092595/how-can-i-add-class-labels-in-python/53093228#53093228", "title": "How can I add class labels in python?", "body": "<p>considering +1 for class1 as label1 and -1 for class 2 as label2:</p>\n\n<pre><code>label1 = np.ones( (r1.shape[0],1) )\nlabel2 = np.ones( (r2.shape[0],1) ) * -1\ndata = np.concatenate((r1, r2))\nlabels = np.concatenate((label1, label2))\n</code></pre>\n\n<p>In case you need to shuffle the data before training and you want to keep track of which label is for which sample, first add each label to it's corresponding data:</p>\n\n<pre><code>r1 = np.append(label1, r1, axis=1)\nr2 = np.append(label2, r2, axis=1)\ndata = np.concatenate((r1,r2))\nnp.random.shuffle(data)\nlabels = data[:,0] #extracts labels in shape of (len(labels),)which is a rank 1 array \nlabels = np.reshape(labels,(len(labels),1)) #fix the shape to a 1D array    \nR = data[:,(1,2)] #extracting inputs\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10470133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74340a7bf52c3a7cf6395a3d9db6f47b?s=128&d=identicon&r=PG&f=1", "display_name": "yasser", "link": "https://stackoverflow.com/users/10470133/yasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1977, "favorite_count": 0, "accepted_answer_id": 53093228, "answer_count": 1, "score": 0, "last_activity_date": 1541051216, "creation_date": 1541023515, "last_edit_date": 1541051216, "question_id": 53092595, "link": "https://stackoverflow.com/questions/53092595/how-can-i-add-class-labels-in-python", "title": "How can I add class labels in python?", "body": "<p>I have gaussian data which is:</p>\n\n<pre><code>r1=np.random.multivariate_normal(mean1, cov1, 3000)\nr2=np.random.multivariate_normal(mean2, cov2, 3000)\n</code></pre>\n\n<p>Now I want to add class labels for these datas to train a classifier. \nFor r1, it is class1 and for r2, it is class2. How can I add the class labels?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1541023767, "post_id": 53092578, "comment_id": 93081982, "body": "Could you post your error traceback?"}, {"owner": {"reputation": 55, "user_id": 9090561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kzx4r.jpg?s=128&g=1", "display_name": "dougie jones", "link": "https://stackoverflow.com/users/9090561/dougie-jones"}, "reply_to_user": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1541024022, "post_id": 53092578, "comment_id": 93082038, "body": "Yup! I added it in an edit."}, {"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1541025059, "post_id": 53092578, "comment_id": 93082367, "body": "<code>h * df(t, N[i, j])</code> is a list, you can&#39;t add it to a scalar and assign it to another scalar"}, {"owner": {"reputation": 55, "user_id": 9090561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kzx4r.jpg?s=128&g=1", "display_name": "dougie jones", "link": "https://stackoverflow.com/users/9090561/dougie-jones"}, "reply_to_user": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1541025553, "post_id": 53092578, "comment_id": 93082515, "body": "Okay, that helps a little bit. Excuse my ignorance but I&#39;m unsure of how to move forward. Say i = 0, then I want to use the first element in df, i = 1 for the second, and so on. How would I do that since I can&#39;t index a function?"}, {"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1541026449, "post_id": 53092578, "comment_id": 93082768, "body": "well actually <code>df(t, N[i, j])</code> is not a function anymore, just use <code>h * df(t, N[i, j])[i]</code>"}, {"owner": {"reputation": 55, "user_id": 9090561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kzx4r.jpg?s=128&g=1", "display_name": "dougie jones", "link": "https://stackoverflow.com/users/9090561/dougie-jones"}, "reply_to_user": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1541026602, "post_id": 53092578, "comment_id": 93082805, "body": "Ah! I thought it would still be considered a function at that point. Thank you!"}, {"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 1, "creation_date": 1541027078, "post_id": 53092578, "comment_id": 93082934, "body": "btw if you multiply a <code>list</code> with an integer it will multiplicate the list other than multiplying the value inside, for <code>numpy array</code> you can do the latter. i.e. <code>2*[1] == [1,1]</code> and <code>2*np.array([1]) == np.array([2])</code>"}], "owner": {"reputation": 55, "user_id": 9090561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kzx4r.jpg?s=128&g=1", "display_name": "dougie jones", "link": "https://stackoverflow.com/users/9090561/dougie-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541023994, "creation_date": 1541023434, "last_edit_date": 1541023994, "question_id": 53092578, "link": "https://stackoverflow.com/questions/53092578/python-3-6-valueerror-setting-an-array-element-with-a-sequence", "title": "Python 3.6 ValueError: setting an array element with a sequence", "body": "<p>I have written the following code for a chemical reaction kinetics assignment. The problem actually involves rabbits being born and leaving a farm instead of reactions. I'm asked to develop an Explicit Euler method program to model the rabbit population.</p>\n\n<p>My program was running fine (i.e. I wasn't receiving any errors but wasn't getting the results I wanted) until just recently where I've been getting the ValueError (ValueError: setting an array element with a sequence.) message. I'm unsure of what I did to my code to prompt the error.</p>\n\n<p>Any help would be appreciated.</p>\n\n<pre><code>def explicit_euler(df, x0, h, n):\n\n    # df - ODE that you wish to solve numerically\n    # x0 - initials values for ODE\n    # h - step size\n    # n - number of steps\n\n    for i in range(0, len(x0)):\n\n        N = np.zeros((len(x0), n))\n        t = 0\n        N[i, 0] = x0[i]\n\n        for j in range(0, n - 1):\n\n            N[i, j + 1] = N[i, j] + h * df(t, N[i, j])\n            t += h\n\n    return N\n\ndef df(t, N):\n\n    return [(k2 - k5) * t * N, \n            (k3 - k4) * t * N, \n            (k1 - k2 - k3 - (k6 * N)) * t * N]\n\n\nN0 = [2., 10., 0.]       # initial number of rabbits [Male, Female, Baby]\n\n# \"Reaction rate\" coefficients\nk1 = 3.5          # [events/rabbits month]\nk2 = k3 = 0.15    # [events/rabbits month]\nk4 = 0.1          # [events/rabbits month]\nk5 = 0.5          # [events/rabbits month]\nk6 = 0.1          # [events/rabbits^2 month]\n\nh = 1   # time steps [month]\ntspan = 120   # length of time [month]\nn = int(tspan / h)   # number of time steps\n\nN = explicit_euler(df, N0, h, n)\nt = np.linspace(0, tspan, n)\n\nplot1, = plt.plot(t, N[0, :])\nplot2, = plt.plot(t, N[1, :])\nplot3, = plt.plot(t, N[2, :])\nplt.xlabel('Time [months]')\nplt.ylabel('Rabbits')\nplt.legend((plot1, plot2, plot3), ('Male', 'Female', 'Babies'))\nplt.show()\n\nprint(N)\n</code></pre>\n\n<p>EDIT: Forgot to include the error traceback.</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-4-d31ce8d859bf&gt; in &lt;module&gt;()\n     39 n = int(tspan / h)   # number of time steps\n     40 \n---&gt; 41 N = explicit_euler(df, N0, h, n)\n     42 t = np.linspace(0, tspan, n)\n     43 \n\n&lt;ipython-input-4-d31ce8d859bf&gt; in explicit_euler(df, x0, h, n)\n     14         for j in range(0, n - 1):\n     15 \n---&gt; 16             N[i, j + 1] = N[i, j] + h * df(t, N[i, j])\n     17             t += h\n     18 \n\nValueError: setting an array element with a sequence.\n</code></pre>\n"}, {"tags": ["python", "django", "performance", "orm", "django-rest-framework"], "comments": [{"owner": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 2, "creation_date": 1541026789, "post_id": 53092570, "comment_id": 93082858, "body": "Are you open to changing you models? If yes, one solution could be to get rid of <code>WorkingGroupMember</code> completely and add a <code>ManyToManyField</code> to <code>User</code> called <code>members</code> directly under <code>WorkingGroup</code>."}, {"owner": {"reputation": 4504, "user_id": 376491, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d93a638d2300ba0246c126194dcdc92d?s=128&d=identicon&r=PG", "display_name": "MarkD", "link": "https://stackoverflow.com/users/376491/markd"}, "reply_to_user": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 0, "creation_date": 1541032916, "post_id": 53092570, "comment_id": 93084229, "body": "Yes, that is definitely a possibility.  In reality, the relationship is more like a many-to-many-through where the WorkingGroupMember has additional fields that are used in other areas of the app/api, but for this particular endpoint we simply want the users in that group."}, {"owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "edited": false, "score": 1, "creation_date": 1541044997, "post_id": 53092570, "comment_id": 93086535, "body": "A <code>ManyToManyField</code> will just create a transparent &quot;through model&quot; that works exactly like your <code>WorkingGroupMember</code> model. Your <code>ManyToManyField</code> may well use <code>WorkingGroupMember</code> as its through model and you would find yourself in the same situation."}], "answers": [{"comments": [{"owner": {"reputation": 4504, "user_id": 376491, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d93a638d2300ba0246c126194dcdc92d?s=128&d=identicon&r=PG", "display_name": "MarkD", "link": "https://stackoverflow.com/users/376491/markd"}, "edited": false, "score": 0, "creation_date": 1541075915, "post_id": 53095087, "comment_id": 93098253, "body": "Brilliant!  Thanks for pointing this issue out- I&#39;ve been looking all over the DRF docs for why this wasn&#39;t working, and it turns out to be a django issue instead. Your fix worked perfect."}], "tags": [], "owner": {"reputation": 12706, "user_id": 3627387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7aebf92f21ecf6e2ce9bb25a113886?s=128&d=identicon&r=PG", "display_name": "Sardorbek Imomaliev", "link": "https://stackoverflow.com/users/3627387/sardorbek-imomaliev"}, "is_accepted": true, "score": 4, "last_activity_date": 1541045379, "creation_date": 1541045379, "answer_id": 53095087, "question_id": 53092570, "link": "https://stackoverflow.com/questions/53092570/django-rest-framework-retrieving-a-related-field-on-reverse-foreign-key-efficie/53095087#53095087", "title": "Django Rest Framework- retrieving a related field on reverse foreign key efficiently", "body": "<p>Problem here that you are doing <code>values_list</code> on top of <code>all</code> which nullifies your <code>prefetch_related</code>. There is currently no way to do prefetch with <code>values_list</code> see <a href=\"https://code.djangoproject.com/ticket/26565\" rel=\"nofollow noreferrer\">https://code.djangoproject.com/ticket/26565</a>. What you can do is to transition this into python code instead of SQL</p>\n\n<pre><code>class WorkingGroupSerializer(serializers.ModelSerializer):\n    members = serializers.SerializerMethodField()\n    class Meta:\n        model = WorkingGroup\n        fields = ('id', 'group_name', 'leader', 'members',)\n\n    def get_members(self, obj):\n        return [wgm.user_id for wgm in obj.workinggroupmember_set.all()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1071, "user_id": 5810105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5774bf2fbda7b6db94a124838421c69?s=128&d=identicon&r=PG", "display_name": "Alberto Chiusole", "link": "https://stackoverflow.com/users/5810105/alberto-chiusole"}, "is_accepted": false, "score": 0, "last_activity_date": 1550447079, "creation_date": 1550447079, "answer_id": 54738780, "question_id": 53092570, "link": "https://stackoverflow.com/questions/53092570/django-rest-framework-retrieving-a-related-field-on-reverse-foreign-key-efficie/54738780#54738780", "title": "Django Rest Framework- retrieving a related field on reverse foreign key efficiently", "body": "<p>In a recent project with DRF v3.9.1 and django 2.1, I needed to recursively expose all the children of an object, by having only a direct connection to the parent, which could have had multiple children.</p>\n\n<p>Before, if I was to request the \"tree\" of an object, I was getting:</p>\n\n<pre><code>{\n    \"uuid\": \"b85385c0e0a84785b6ca87ce50132659\",\n    \"name\": \"a\",\n    \"parent\": null\n}\n</code></pre>\n\n<p>By applying the serialization shown below I get:</p>\n\n<pre><code>{\n    \"uuid\": \"b85385c0e0a84785b6ca87ce50132659\",\n    \"name\": \"a\",\n    \"parent\": null\n    \"children\": [\n        {\n            \"uuid\": \"efd26a820b4e4f7c8e56c812a7791fcb\",\n            \"name\": \"aa\",\n            \"parent\": \"b85385c0e0a84785b6ca87ce50132659\"\n            \"children\": [\n                {\n                    \"uuid\": \"ca2441fc7abf49b6aa1f3ebbc2dae251\",\n                    \"name\": \"aaa\",\n                    \"parent\": \"efd26a820b4e4f7c8e56c812a7791fcb\"\n                    \"children\": [],\n                }\n            ],\n        },\n        {\n            \"uuid\": \"40e09c85775d4f1a8578bba9c812df0e\",\n            \"name\": \"ab\",\n            \"parent\": \"b85385c0e0a84785b6ca87ce50132659\"\n            \"children\": [],\n        }\n    ],\n}\n</code></pre>\n\n<p>Here is the <code>models.py</code> of the recursive object:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class CategoryDefinition(BaseModelClass):\n    name = models.CharField(max_length=100)\n    parent = models.ForeignKey('self', related_name='children',\n                               on_delete=models.CASCADE,\n                               null=True, blank=True)\n</code></pre>\n\n<p>To get all the reverse objects in the foreign key, apply a field to the serializer class:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class DeepCategorySerializer(serializers.ModelSerializer):\n    children = serializers.SerializerMethodField()\n\n    class Meta:\n        model = models.CategoryDefinition\n        fields = '__all__'\n\n    def get_children(self, obj):\n        return [DeepCategorySerializer().to_representation(cat) for cat in obj.children.all()]\n</code></pre>\n\n<p>Then apply this serializer to a DRF view function or generics class, such as:</p>\n\n<pre><code>re_path(r'categories/(?P&lt;pk&gt;[\\w\\d]{32})/',\n        generics.RetrieveUpdateDestroyAPIView.as_view(\n            queryset=models.CategoryDefinition.objects.all(),\n            serializer_class=serializers.DeepCategorySerializer),\n        name='category-update'),\n</code></pre>\n"}], "owner": {"reputation": 4504, "user_id": 376491, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d93a638d2300ba0246c126194dcdc92d?s=128&d=identicon&r=PG", "display_name": "MarkD", "link": "https://stackoverflow.com/users/376491/markd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 2, "accepted_answer_id": 53095087, "answer_count": 2, "score": 4, "last_activity_date": 1550447079, "creation_date": 1541023367, "question_id": 53092570, "link": "https://stackoverflow.com/questions/53092570/django-rest-framework-retrieving-a-related-field-on-reverse-foreign-key-efficie", "title": "Django Rest Framework- retrieving a related field on reverse foreign key efficiently", "body": "<p>I have the following models that represent a working group of users.  Each working group has a leader and members:</p>\n\n<pre><code>class WorkingGroup(models.Model):\n    group_name = models.CharField(max_length=255)\n    leader = models.ForeignKey(User, null=True, on_delete=models.SET_NULL)\n\nclass WorkingGroupMember(models.Model):\n    group = models.ForeignKey(WorkingGroup, on_delete=models.CASCADE)\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n</code></pre>\n\n<p>In DRF, I want to efficiently retrieve all groups (there are several hundred) as an array of the following json objects:</p>\n\n<pre><code>{\n    'id': &lt;the_group_id&gt;\n    'group_name': &lt;the_group_name&gt;\n    'leader': &lt;id_of_leader&gt;\n    'members': [&lt;id_of_member_1&gt;, &lt;id_of_member_2&gt;, ...]\n}\n</code></pre>\n\n<p>To do so, I have set up the following serializer:</p>\n\n<pre><code>class WorkingGroupSerializer(serializers.ModelSerializer):\n    members = serializers.SerializerMethodField()\n    class Meta:\n        model = WorkingGroup\n        fields = ('id', 'group_name', 'leader', 'members',)\n\n    def get_members(self, obj):\n        return obj.workinggroupmember_set.all().values_list('user_id', flat=True)\n</code></pre>\n\n<p>So that in my view, I can do something like:</p>\n\n<pre><code>groups = WorkingGroup.objects.all().prefetch_related('workinggroupmember_set')\ngroup_serializer = WorkingGroupSerializer(groups, many=True)\n</code></pre>\n\n<p>This works, and gives the desired result, however I am finding it does not scale well at all, as the prefetching <code>workinggroupmember_set</code> does not seem to be used inside of the <code>get_members</code> method (Silky is showing a single query to grab all <code>WorkingGroup</code> objects, and then a query for each <code>workinggroupmember_set</code> call in the <code>get_members</code> method).  Is there a way to set up the <code>members</code> field in the serializer to grab a flattened/single field version of <code>workinggroupmember_set</code> without using a <code>SerializerMethodField</code>?  Or some other way of doing this that lets me properly use prefetch?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1541023433, "post_id": 53092565, "comment_id": 93081884, "body": "The date is the index? Why are you multiplying non-matching indices?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8053020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af75a42f2776b01eb18aed9d679c151?s=128&d=identicon&r=PG&f=1", "display_name": "user270199", "link": "https://stackoverflow.com/users/8053020/user270199"}, "edited": false, "score": 1, "creation_date": 1541024186, "post_id": 53092586, "comment_id": 93082084, "body": "The index does indeed play no role here. Thanks for your prompt answer!"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1541023469, "creation_date": 1541023469, "answer_id": 53092586, "question_id": 53092565, "link": "https://stackoverflow.com/questions/53092565/update-a-dataframe-based-on-values-from-another-dataframe/53092586#53092586", "title": "Update a dataframe based on values from another dataframe", "body": "<p>Use <code>np.repeat</code> on <code>df2</code> and multiply. It looks like the index plays no part here.</p>\n\n<pre><code>df1 = df1.mul(np.repeat(df2.values, 2, axis=0))\n</code></pre>\n\n<p>Or, more generally,</p>\n\n<pre><code>df1 = df1.mul(np.repeat(df2.values, len(df1) // len(df2), axis=0))\nprint(df1)\n               A     B\ndate                  \n2017-10-5 -0.400  0.03\n2017-10-6 -1.000  0.05\n2017-11-5 -0.021  0.32\n2017-11-6 -0.033  0.52\n</code></pre>\n\n<p>Where <code>len(df1) // len(df2)</code> computes the ratio of their sizes.</p>\n"}, {"tags": [], "owner": {"reputation": 4161, "user_id": 449215, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/02b9a3cc087554f3426b4c83c1c68bff?s=128&d=identicon&r=PG", "display_name": "Dov Grobgeld", "link": "https://stackoverflow.com/users/449215/dov-grobgeld"}, "is_accepted": false, "score": 0, "last_activity_date": 1541024908, "creation_date": 1541024908, "answer_id": 53092827, "question_id": 53092565, "link": "https://stackoverflow.com/questions/53092565/update-a-dataframe-based-on-values-from-another-dataframe/53092827#53092827", "title": "Update a dataframe based on values from another dataframe", "body": "<p>In case the index does mean something, i.e. you have a value that changes on a certain date and you want to keep using it until it changes the next time. You can then use the <code>reindex</code> command with the argument <code>method='ffill'</code> to create a dataframe that is aligned to the original dataframe. Here's how it looks like:</p>\n\n<pre><code>import pandas as pd\nimport dateutil\n\ndf = pd.DataFrame([['2017-10-5',2,3],\n                  ['2017-10-6',5,5],\n                  ['2017-11-5',7,8],\n                  ['2017-11-6',11,13]],\n                  columns = ['date','A','B'])\ndf['date'] = df['date'].apply(dateutil.parser.parse)\ndf = df.set_index('date')\n\nwdf = pd.DataFrame([['2017-09-30',-0.2,0.01],\n                    ['2017-10-31',-0.03,0.04]],\n                     columns=['date','W1','W2'])\nwdf['date'] = wdf['date'].apply(dateutil.parser.parse)\nwdf = wdf.set_index('date')\nwdf_r = wdf.reindex(df.index,\n                    method='ffill')\n\nres = df.drop(['A','B'],axis=1).assign(W1_x_A = wdf_r.W1 * df.A,\n                                       W2_x_B = wdf_r.W2 * df.B)\nprint(res)\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>            W1_x_A  W2_x_B\ndate                      \n2017-10-05   -0.40    0.03\n2017-10-06   -1.00    0.05\n2017-11-05   -0.21    0.32\n2017-11-06   -0.33    0.52\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8053020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af75a42f2776b01eb18aed9d679c151?s=128&d=identicon&r=PG&f=1", "display_name": "user270199", "link": "https://stackoverflow.com/users/8053020/user270199"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53092586, "answer_count": 2, "score": 1, "last_activity_date": 1541024908, "creation_date": 1541023310, "last_edit_date": 1541023579, "question_id": 53092565, "link": "https://stackoverflow.com/questions/53092565/update-a-dataframe-based-on-values-from-another-dataframe", "title": "Update a dataframe based on values from another dataframe", "body": "<p>I have two data frames that look like this:</p>\n\n<pre><code>            A   B\ndate        \n2017-10-5   2   3\n2017-10-6   5   5\n2017-11-5   7   8\n2017-11-6   11  13\n\n\n             W1     W2\ndate        \n2017-09-30  -0.2    0.01\n2017-10-31  -0.003  0.04\n</code></pre>\n\n<p>I would like to create a new data frame that contains the following:</p>\n\n<pre><code>            W1 * A       W2 * B\ndate        \n2017-10-5   -0.2 * 2     0.01 * 3\n2017-10-6   -0.2 * 5     0.01 * 5\n2017-11-5   -0.003 * 7   0.04 * 8\n2017-11-6   -0.003 * 11  0.04 * 13\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "mocking", "celery"], "comments": [{"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1541625848, "post_id": 53092562, "comment_id": 93284684, "body": "Shouldn&#39;t it be <code>core.something.send_it</code> ?"}, {"owner": {"reputation": 401, "user_id": 4304552, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/17812458/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/4304552/nick"}, "reply_to_user": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1542234730, "post_id": 53092562, "comment_id": 93500265, "body": "No, I don&#39;t believe so. You patch where it&#39;s used, not were it comes from."}], "owner": {"reputation": 401, "user_id": 4304552, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/17812458/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/4304552/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1541023300, "creation_date": 1541023300, "question_id": 53092562, "link": "https://stackoverflow.com/questions/53092562/mocking-method-call-in-celery-shared-task", "title": "Mocking Method Call in Celery shared_task", "body": "<p>I have a Celery shared_task in a module <code>tasks</code> that looks like this:</p>\n\n<pre><code>@shared_task\ndef task():\n    from core.something import send_it\n    send_it()\n</code></pre>\n\n<p>and I am writing a test attempting to <code>patch</code> the <code>send_it</code> method. So far I have:</p>\n\n<pre><code>from ..tasks import task\n\n\nclass TestSend(TestCase):\n\n    @override_settings(CELERY_TASK_ALWAYS_EAGER=True)\n    @patch(\"core.tasks.send_it\")\n    def test_task(self, send_it_mock):\n        task()\n        send_it_mock.assert_called_once()\n</code></pre>\n\n<p>When I run this, I get the error: <code>AttributeError: &lt;module 'core.tasks' from 'app/core/tasks.py'&gt; does not have the attribute 'send_it'</code></p>\n\n<p>Out of desperation I've used <code>@patch(\"tasks.task.send_it\")</code> instead, as the import happens inside the shared_task, but I get a similar result. Does anyone know how I can effectively patch the <code>send_it</code> call? Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1541023318, "post_id": 53092553, "comment_id": 93081837, "body": "Hi @DonniBenotti could you add your code?"}, {"owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1541023715, "post_id": 53092553, "comment_id": 93081964, "body": "Just did sir @DanielMasejo"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 0, "creation_date": 1541023689, "post_id": 53092580, "comment_id": 93081957, "body": "I fixed that and now its telling me that my dispDetail isn&#39;t defined which it is"}, {"owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "reply_to_user": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 1, "creation_date": 1541023798, "post_id": 53092580, "comment_id": 93081989, "body": "You&#39;re calling it before it being defined.  Python is an interpreted language. Put that in mind when declaring functions after calling them.  Further reading: <a href=\"https://www.quora.com/How-does-the-Python-interpreter-handle-function-calls-in-lines-before-the-actual-function-definition-without-using-forward-declarations-like-in-C++\" rel=\"nofollow noreferrer\">quora.com/&hellip;</a>"}, {"owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 0, "creation_date": 1541025032, "post_id": 53092580, "comment_id": 93082362, "body": "Thats the strange thing though, as I have another set of the code that has that same setup, but it works."}, {"owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "reply_to_user": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 1, "creation_date": 1541025169, "post_id": 53092580, "comment_id": 93082396, "body": "The functions defined inside the function are also defined after a return. That code is unreachable. Put it outside."}, {"owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 0, "creation_date": 1541027364, "post_id": 53092580, "comment_id": 93083010, "body": "I see it now. It was an indentation error. those always get me"}, {"owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 0, "creation_date": 1541027534, "post_id": 53092580, "comment_id": 93083055, "body": "This pyhton class has been fun so far, but im not so quick on the uptake and some small things I miss really easily at times or I just dont get at all, so I appreciate the help"}], "tags": [], "owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "is_accepted": false, "score": 1, "last_activity_date": 1541023714, "last_edit_date": 1541023714, "creation_date": 1541023446, "answer_id": 53092580, "question_id": 53092553, "link": "https://stackoverflow.com/questions/53092553/assistance-with-issue/53092580#53092580", "title": "Assistance with issue", "body": "<p>It looks like you're comparing a String and an Integer</p>\n\n<p>do this:</p>\n\n<pre><code>if int(studNum) &gt; STUD_NUMBER:\n</code></pre>\n\n<p>This is called casting. You will be converting a string to an int by using this function: <code>int()</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/17661829/how-to-compare-string-and-integer-in-python\">How to compare string and integer in python?</a></p>\n"}], "owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541023714, "creation_date": 1541023262, "last_edit_date": 1541023537, "question_id": 53092553, "link": "https://stackoverflow.com/questions/53092553/assistance-with-issue", "title": "Assistance with issue", "body": "<p>While writing some code for a class, it gave this error and I don't know how to fix it as I personally do not see any issues with what it is addressing</p>\n\n<pre>\ntraceback (most recent call last):\n  File \"C:\\Users\\Daniel Benotti\\Desktop\\School\\Benotti_Daniel student Ed loop with functions.py\", line 50, in \n    main()\n  File \"C:\\Users\\Daniel Benotti\\Desktop\\School\\Benotti_Daniel student Ed loop with functions.py\", line 9, in main\n    TotCurr, TotCe = loop(TotCurr, TotCe, again)\n  File \"C:\\Users\\Daniel Benotti\\Desktop\\School\\Benotti_Daniel student Ed loop with functions.py\", line 21, in loop\n    TotCurr, TotCe, studType = calc(studNum, TotCurr, TotCe)\n  File \"C:\\Users\\Daniel Benotti\\Desktop\\School\\Benotti_Daniel student Ed loop with functions.py\", line 34, in calc\n    if studNum > STUD_NUMBER:\nTypeError: '>' not supported between instances of 'str' and 'int'`enter code here`\n</pre>\n\n<p>this is the code that follows</p>\n\n<pre><code>STUD_NUMBER = 2500\n\ndef main():\n    TotCurr, TotCe, again = init()\n    TotCurr, TotCe = loop(TotCurr, TotCe, again)\n    dispTot(TotCurr, TotCe)\n\ndef init():\n    TotCurr = 0\n    TotCe = 0\n    again = \"Y\"\n    return TotCurr, TotCe, again\n\ndef loop(TotCurr, TotCe, again):\n    while again.upper() == \"Y\":\n        firstName, lastName, studNum = getInput()\n        TotCurr, TotCe, studType = calc(studNum, TotCurr, TotCe)\n        dispDetail(studType)\n        again = input(\"Do you want to add another student record? (Y/N): \")\n        print()\n    return TotCurr, TotCe\n\ndef getInput():\n    firstName = input(\"please enter students first name: \")\n    lastName = input(\"please enter students last name: \")\n    studNum = input(\"please enter the student ID number: \")\n    return firstName, lastName, studNum\n\ndef calc(studNum, TotCurr, TotCe):\n    if studNum &gt; STUD_NUMBER:\n        studType = \"Curriculum\"\n        TotCurr += 1\n    else:\n        studType = \"Continuing Education\"\n        TotCe +=1\n    return TotCurr, TotCe, studType\n\n    def dispdetail(studType):\n        print(\"This student is currently in the\", studType, 'course')\n        print()\n\n    def dispTot(TotCurr, TotCe):\n        print(\"Total students in Cuuriculum course\", TotCurr)\n        print(\"Total students in Continuing education course\", TotCe)\n\nmain()\nenter code here\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "compare"], "answers": [{"comments": [{"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 31, "user_id": 10588297, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SM2wSCrga5o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCg_FiV_IdFZriC-oU89E37TpAoBQ/mo/photo.jpg?sz=128", "display_name": "Ruizhi Wu Tony", "link": "https://stackoverflow.com/users/10588297/ruizhi-wu-tony"}, "edited": false, "score": 0, "creation_date": 1541120400, "post_id": 53092657, "comment_id": 93117837, "body": "Glad to be of help. Can you mark this answer as accepted if you find it to be correct? (Click on the grey check mark next to the answer.)"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1541023908, "creation_date": 1541023908, "answer_id": 53092657, "question_id": 53092552, "link": "https://stackoverflow.com/questions/53092552/how-to-customize-my-own-compare-function-in-python-3/53092657#53092657", "title": "How to customize my own compare function in Python 3", "body": "<p>You can use a key function that returns a tuple of the items you want to sort by. Negate the numeric items for reverse order:</p>\n\n<pre><code>l = [[1, 'a'], [1, 'b'], [2, 'b'], [2, 'a'], [3, 'a']]\nprint(sorted(l, key=lambda t: (-t[0], t[1])))\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>[[3, 'a'], [2, 'a'], [2, 'b'], [1, 'a'], [1, 'b']]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10588297, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SM2wSCrga5o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCg_FiV_IdFZriC-oU89E37TpAoBQ/mo/photo.jpg?sz=128", "display_name": "Ruizhi Wu Tony", "link": "https://stackoverflow.com/users/10588297/ruizhi-wu-tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1541023913, "creation_date": 1541023260, "last_edit_date": 1541023913, "question_id": 53092552, "link": "https://stackoverflow.com/questions/53092552/how-to-customize-my-own-compare-function-in-python-3", "title": "How to customize my own compare function in Python 3", "body": "<p>is there a way to customize a compare function in Python 3? For example, there is a list: <code>[[1, a], [1, b], [2, b], [2, a], [3, a]]</code>. First, sort it based on the integer, greater to smaller, then if the integer is the same, sort it based on the letters, in a dictionary order. It's completely two different order, first one is reversed and the second one is not. So I cannot just use 'reverse = True' to handle it. </p>\n\n<p>I know there's cmp in Python 2 to help me define my own compare function. But how can I do it in Python 3?</p>\n\n<p>Any help will be appreciated. Thank you</p>\n"}, {"tags": ["python", "jinja2"], "answers": [{"tags": [], "owner": {"reputation": 11781, "user_id": 8384, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/08bc2edb5f1342c0c1e4805f4d4585bf?s=128&d=identicon&r=PG", "display_name": "McKay", "link": "https://stackoverflow.com/users/8384/mckay"}, "is_accepted": false, "score": 0, "last_activity_date": 1541543586, "creation_date": 1541543586, "answer_id": 53181093, "question_id": 53092533, "link": "https://stackoverflow.com/questions/53092533/how-can-i-skip-rendering-a-file-if-the-fields-arent-defined/53181093#53181093", "title": "How can I skip rendering a file if the fields aren&#39;t defined?", "body": "<p>I ended up creating a filter that looked something like this:</p>\n\n<pre><code>from jinja2 import Undefined\n\ndef skip_if_not_defined(value):\n    if type(value) is Undefined:\n        raise SkipTemplateException()\n</code></pre>\n\n<p>So when I used it</p>\n\n<pre><code>{{ blah|skip_if_not_defined }}\n</code></pre>\n\n<p>it would raise an exception which can be caught.</p>\n"}], "owner": {"reputation": 11781, "user_id": 8384, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/08bc2edb5f1342c0c1e4805f4d4585bf?s=128&d=identicon&r=PG", "display_name": "McKay", "link": "https://stackoverflow.com/users/8384/mckay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541543586, "creation_date": 1541023129, "last_edit_date": 1541044488, "question_id": 53092533, "link": "https://stackoverflow.com/questions/53092533/how-can-i-skip-rendering-a-file-if-the-fields-arent-defined", "title": "How can I skip rendering a file if the fields aren&#39;t defined?", "body": "<p>I have a bunch of templates (<em>t</em>) I'm rendering for a bunch of cases (<em>c</em>), so, in general, <em>t \u00d7 c</em> templates get generated.</p>\n\n<pre><code>for template in templates:\n    for case in cases:\n        rendered = template.render(case.data)\n        save(case.filename, rendered)\n</code></pre>\n\n<p>Now we have a new requirement, where some of the combinations don't matter, like 3 of them. I don't want files rendered in those rare cases. <em>(t \u00d7 c - 3)</em></p>\n\n<p>I could write some control flow code (nested inside the for loops), but then that code would have to be more tightly coupled to the template than I want it to be, so I'm trying to figure out a better way to do it.</p>\n\n<p>What I think I want is something in the jinja template to say \"sorry, this template failed\", and then the exception can be handled at the generation time. (also inside the for loops, but less decisioning there) I came up with this, and it's kind of working, but I don't like it:</p>\n\n<pre><code>{{ foo if foo is defined else 1 / 0 }}\n</code></pre>\n\n<p>This causes an exception, but it's not a helpful exception. Is there a cleaner way of generating an exception in jinja? </p>\n\n<p>Instead of an exception, is there a way to report that a template shouldn't be generated within jinja?</p>\n\n<p>(Should I just avoid this type of things and just put the logic in the generation code)</p>\n"}, {"tags": ["python", "r", "equivalent", "justify"], "comments": [{"owner": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 2, "creation_date": 1541023926, "post_id": 53092527, "comment_id": 93082018, "body": "Not every R person know Python, so explaining what this is doing might attract more answers. Is this for formatting numeric output on screen?"}], "answers": [{"tags": [], "owner": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "is_accepted": true, "score": 1, "last_activity_date": 1541025039, "last_edit_date": 1592644375, "creation_date": 1541024322, "answer_id": 53092735, "question_id": 53092527, "link": "https://stackoverflow.com/questions/53092527/r-whats-the-r-equivalent-to-numpys-dtype-itemsize-and-dtype-alignment-array/53092735#53092735", "title": "R: What&#39;s the R equivalent to numpy&#39;s .dtype.itemsize and .dtype.alignment array properties?", "body": "<p>The first line extracts the data type. R might use class(my_array). Using typeof or mode might also be possible but unless you have studied R for a while you may not get the information you desire. It appears that Python encodes several types of information in the datatype string. There isn't really an exact parallel in R but you might want to look at the value returned by str(). Unlike Python's <code>dt</code>, the value from <code>str</code> is not going to be accessible for further breaks=down by additional functions. From its help page:</p>\n<blockquote>\n<p>Value</p>\n<p>str does not return anything, for efficiency reasons. The obvious side effect is output to the terminal.</p>\n</blockquote>\n<p>The <code>attributes</code> function will sometimes yield additional information about an object, but in the case of an array there's nothing additional to the information from <code>dim</code>.</p>\n<pre><code>&gt; my_array &lt;- array(1:24, c(2,3,4))  # a 2 x 3 x 4 array of integers\n&gt; class(my_array)\n[1] &quot;array&quot;\n&gt; str(my_array)\n int [1:2, 1:3, 1:4] 1 2 3 4 5 6 7 8 9 10 ...\ndim(my_array)   # Not sure, but this might be the equivalent of &quot;alignment&quot;\n[1] 2 3 4\n attributes(my_array)\n$dim\n[1] 2 3 4\n&gt; length(my_array)\n[1] 24\n&gt; mode(my_array)\n[1] &quot;numeric&quot;\n</code></pre>\n"}], "owner": {"reputation": 758, "user_id": 86890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04e46ce9a6ef06dcbd9a214a7617ba8d?s=128&d=identicon&r=PG", "display_name": "Dave Babbitt", "link": "https://stackoverflow.com/users/86890/dave-babbitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 53092735, "answer_count": 1, "score": 1, "last_activity_date": 1541072187, "creation_date": 1541023084, "last_edit_date": 1541072187, "question_id": 53092527, "link": "https://stackoverflow.com/questions/53092527/r-whats-the-r-equivalent-to-numpys-dtype-itemsize-and-dtype-alignment-array", "title": "R: What&#39;s the R equivalent to numpy&#39;s .dtype.itemsize and .dtype.alignment array properties?", "body": "<p>I'm trying to convert something like this from python into R:</p>\n\n<pre><code>dt = my_array.dtype\nfw = int(dt.itemsize/dt.alignment)\nb = numpy.array([list(w.ljust(fw)) for w in my_array.T])\n</code></pre>\n\n<p>I've looked around but haven't found anything on this particular topic.</p>\n"}, {"tags": ["python", "flask", "crud", "flask-admin"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 8485588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rf8uJ.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/8485588/artem"}, "is_accepted": false, "score": 0, "last_activity_date": 1547449505, "creation_date": 1547449505, "answer_id": 54177001, "question_id": 53092383, "link": "https://stackoverflow.com/questions/53092383/embed-flask-admin-crud-view-into-site/54177001#54177001", "title": "Embed Flask-Admin CRUD view into site", "body": "<p>I have recently created <a href=\"https://github.com/artemShelest/flask-admin-subview\" rel=\"nofollow noreferrer\">Subview</a> module for Flask-Admin that could help with this. For now it lacks full CRUD support from the view, though. If it does help, you can create custom actions, which are supported.</p>\n"}], "owner": {"reputation": 424, "user_id": 5777010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zGyVw2Xiw4o/AAAAAAAAAAI/AAAAAAAAAC8/9j2d3aAQCxE/photo.jpg?sz=128", "display_name": "ChristopherTull", "link": "https://stackoverflow.com/users/5777010/christophertull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547449505, "creation_date": 1541022226, "question_id": 53092383, "link": "https://stackoverflow.com/questions/53092383/embed-flask-admin-crud-view-into-site", "title": "Embed Flask-Admin CRUD view into site", "body": "<p>I would like to build user-facing CRUD functionality for just a couple of models into my app.</p>\n\n<p>Flask-Admin is amazing and my ideal scenario would be to just copy the existing CRUD functionality of Flask-Admin into one of the pages in my app. </p>\n\n<p>For example if I could copy the table portion of the image below into my app and embed other content around it (like my site's global navbar, etc).</p>\n\n<p><a href=\"https://i.stack.imgur.com/PUV5x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PUV5x.png\" alt=\"enter image description here\"></a></p>\n\n<p>I understand that Flask-Admin has some options for <a href=\"https://flask-admin.readthedocs.io/en/latest/introduction/#overriding-the-built-in-templates\" rel=\"nofollow noreferrer\">over-riding the built-in templates</a>, but I am not sure how I could use this ability for my purpose. </p>\n\n<p>I don't simply want to make my admin panel look nicer, I want to pull the CRUD capabilities from the admin panel and build them into the main portion of my app and save myself the hassle of developing all of this CRUD capability myself.</p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541022238, "post_id": 53092340, "comment_id": 93081504, "body": "Why would you want to do this?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541022285, "post_id": 53092340, "comment_id": 93081519, "body": "<code>self = value</code> makes no sense. <code>self</code> is just local variable in the function, assigning it doesn&#39;t actually change the object."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541022565, "post_id": 53092340, "comment_id": 93081607, "body": "There&#39;s a difference between class attributes/methods and instance attributes/methods.  I&#39;m <i>guessing</i> that&#39;s what you intend."}, {"owner": {"reputation": 11, "user_id": 9449784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41488dd444c67d3342d7d4efd2b90e2?s=128&d=identicon&r=PG", "display_name": "user9449784", "link": "https://stackoverflow.com/users/9449784/user9449784"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541022975, "post_id": 53092340, "comment_id": 93081738, "body": "@Barmar I realize that <code>__init__</code> and <code>self = value</code> wouldn&#39;t work, I did however think that the syntax I&#39;m looking for would be somewhat similar, such as using a different method such as <code>__repr__</code> or <code>__call__</code> . Am I wrong?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1541023113, "post_id": 53092340, "comment_id": 93081779, "body": "<a href=\"https://rszalski.github.io/magicmethods/\" rel=\"nofollow noreferrer\">guide to Python magic methods</a>"}, {"owner": {"reputation": 11, "user_id": 9449784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41488dd444c67d3342d7d4efd2b90e2?s=128&d=identicon&r=PG", "display_name": "user9449784", "link": "https://stackoverflow.com/users/9449784/user9449784"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541023215, "post_id": 53092340, "comment_id": 93081810, "body": "@roganjosh you may be right, I&#39;m not sure. I thought I understood the principles behind class/instance attributes and methods, but I didn&#39;t see how it would relate to this task. Would you mind sharing a good link?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541023227, "post_id": 53092340, "comment_id": 93081812, "body": "I don&#39;t think there&#39;s any magic method that would do this for all contexts. If you want it to work for multiplication you define <code>__mul__</code>, but then you also need to define <code>__add__</code> and <code>__sub__</code>, etc."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541023284, "post_id": 53092340, "comment_id": 93081829, "body": "@roganjosh I don&#39;t think that&#39;s what he&#39;s intending. He doesn&#39;t want to have to refer to a method or attribute at all, he wants the object to behave like the underlying value."}, {"owner": {"reputation": 11, "user_id": 9449784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41488dd444c67d3342d7d4efd2b90e2?s=128&d=identicon&r=PG", "display_name": "user9449784", "link": "https://stackoverflow.com/users/9449784/user9449784"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541024647, "post_id": 53092340, "comment_id": 93082246, "body": "@Barmar you&#39;re right, in this question I had hoped to find a way to have an object output a default value when called without an attribute, simmilar to the way when I create a pd.DataFrame object, simply calling the object outputs a data frame, and I can modify that entire object without calling an attribute, only in my case it would be for much simpler uses. But if there is no simple solution then thank you!"}, {"owner": {"reputation": 11, "user_id": 9449784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41488dd444c67d3342d7d4efd2b90e2?s=128&d=identicon&r=PG", "display_name": "user9449784", "link": "https://stackoverflow.com/users/9449784/user9449784"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541024997, "post_id": 53092340, "comment_id": 93082350, "body": "@roganjosh your first question: &quot;why would I want to do this&quot;... I&#39;m actually working on a chemistry program/class, where I can give an object attributes of volume, mass etc.. but then also be able to output each attribute in different units. This question was a &#39;side-quest&#39;. I&#39;ll link you to that one once its up, if you care to offer advice. Thank you!!"}, {"owner": {"reputation": 3844, "user_id": 833881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856cdb57da6d0b4758d597d30602fcd8?s=128&d=identicon&r=PG", "display_name": "kungphu", "link": "https://stackoverflow.com/users/833881/kungphu"}, "edited": false, "score": 0, "creation_date": 1541044282, "post_id": 53092340, "comment_id": 93086433, "body": "<i>Attributes</i> of class instances can have default values, which is useful in cases where there are well-known and expected default values. What you&#39;re trying to do, by itself, seems like a questionable idea, and it sounds like understanding the problem you&#39;re trying to solve with this would let us suggest a better approach."}, {"owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541089656, "post_id": 53092340, "comment_id": 93106023, "body": "@Barmar Exactly my thoughts..."}], "answers": [{"tags": [], "owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "is_accepted": false, "score": 0, "last_activity_date": 1541089551, "creation_date": 1541089551, "answer_id": 53105375, "question_id": 53092340, "link": "https://stackoverflow.com/questions/53092340/class-default-output-value/53105375#53105375", "title": "class default output value", "body": "<p>You need to override the <code>__mul__</code>, <code>__add__</code>, etc. <a href=\"https://docs.python.org/3/reference/datamodel.html\" rel=\"nofollow noreferrer\">methods</a> so that the class responds as desired to those operations.</p>\n\n<p>Here is an example that will just work with the <code>__mul__</code> methods.</p>\n\n<pre><code>&gt;&gt;&gt; class my_class():\n...     def __init__(self, value):\n...             self.value = value\n...     def __mul__(self, n):\n...             return self.value * n\n... \n&gt;&gt;&gt; a = my_class(4)\n&gt;&gt;&gt; a * 3\n12\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9449784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41488dd444c67d3342d7d4efd2b90e2?s=128&d=identicon&r=PG", "display_name": "user9449784", "link": "https://stackoverflow.com/users/9449784/user9449784"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541089551, "creation_date": 1541022011, "question_id": 53092340, "link": "https://stackoverflow.com/questions/53092340/class-default-output-value", "title": "class default output value", "body": "<p>I would like to create a class that can output a value without having to specify an attribute. How can I do this?</p>\n\n<p><strong>analogous to</strong></p>\n\n<pre><code> &gt;&gt;&gt; class my_class:\n    def __init__(self, value):\n        self = value\n\n &gt;&gt;&gt; a = my_class(4)\n &gt;&gt;&gt; a * 3\n 12\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas"], "comments": [{"owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541023768, "post_id": 53092328, "comment_id": 93081983, "body": "please include your current code"}, {"owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541023857, "post_id": 53092328, "comment_id": 93082001, "body": "you may also want to consider openpyxl that is built to interact with excel specifically <a href=\"https://openpyxl.readthedocs.io/en/stable/index.html\" rel=\"nofollow noreferrer\">openpyxl.readthedocs.io/en/stable/index.html</a>"}, {"owner": {"reputation": 1, "user_id": 10587818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kvH5FKQr_b8/AAAAAAAAAAI/AAAAAAAAAAc/SDTCY6IeteE/photo.jpg?sz=128", "display_name": "Coleman", "link": "https://stackoverflow.com/users/10587818/coleman"}, "reply_to_user": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541024383, "post_id": 53092328, "comment_id": 93082161, "body": "@brddawg Included my code"}, {"owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541024677, "post_id": 53092328, "comment_id": 93082257, "body": "writing this directly into excel will likely be easier. working on an example"}, {"owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541026242, "post_id": 53092328, "comment_id": 93082714, "body": "if i&#39;m understanding this correctly you&#39;re combining the csv with an excel file?"}, {"owner": {"reputation": 1, "user_id": 10587818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kvH5FKQr_b8/AAAAAAAAAAI/AAAAAAAAAAc/SDTCY6IeteE/photo.jpg?sz=128", "display_name": "Coleman", "link": "https://stackoverflow.com/users/10587818/coleman"}, "reply_to_user": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541030279, "post_id": 53092328, "comment_id": 93083705, "body": "Right, I&#39;m essentially copying over the contents of .csv to a specific tab of a .xlsx file"}, {"owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "edited": false, "score": 0, "creation_date": 1541038726, "post_id": 53092328, "comment_id": 93085398, "body": "any feedback on the answer?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10587818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kvH5FKQr_b8/AAAAAAAAAAI/AAAAAAAAAAc/SDTCY6IeteE/photo.jpg?sz=128", "display_name": "Coleman", "link": "https://stackoverflow.com/users/10587818/coleman"}, "edited": false, "score": 1, "creation_date": 1541085263, "post_id": 53093239, "comment_id": 93103511, "body": "I&#39;m getting a error message that Style is undefined  &#39;NameError: name &#39;Style&#39; is not defined&#39;"}, {"owner": {"reputation": 1, "user_id": 10587818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kvH5FKQr_b8/AAAAAAAAAAI/AAAAAAAAAAc/SDTCY6IeteE/photo.jpg?sz=128", "display_name": "Coleman", "link": "https://stackoverflow.com/users/10587818/coleman"}, "edited": false, "score": 0, "creation_date": 1541092767, "post_id": 53093239, "comment_id": 93107726, "body": "Getting an AttributeError: &#39;Workbook&#39; object has no attribute &#39;save&#39;"}, {"owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "reply_to_user": {"reputation": 1, "user_id": 10587818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kvH5FKQr_b8/AAAAAAAAAAI/AAAAAAAAAAc/SDTCY6IeteE/photo.jpg?sz=128", "display_name": "Coleman", "link": "https://stackoverflow.com/users/10587818/coleman"}, "edited": false, "score": 0, "creation_date": 1541095515, "post_id": 53093239, "comment_id": 93109123, "body": "wb did not copy proper spacing - save should work now"}], "tags": [], "owner": {"reputation": 402, "user_id": 7853322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e75023ca1b18a72290d106f255d8510?s=128&d=identicon&r=PG&f=1", "display_name": "brddawg", "link": "https://stackoverflow.com/users/7853322/brddawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1541095485, "last_edit_date": 1541095485, "creation_date": 1541028220, "answer_id": 53093239, "question_id": 53092328, "link": "https://stackoverflow.com/questions/53092328/format-dates-in-excel-for-comparison/53093239#53093239", "title": "Format dates in Excel for comparison", "body": "<p>As great a tool as pandas is designed to be, in this case there may not be a reason to include.</p>\n\n<p>Here is a shorter structure for what you're trying to accomplish:</p>\n\n<pre><code>import csv\nimport datetime\nfrom openpyxl import load_workbook\n\ndef transfer_hours(report_name, ER_hours_analysis_wb):\n    wb = load_workbook(ER_hours_analysis_wb)\n    ws = wb['ER Work Log'] \n\n    csvfile = open(report_name, 'rt')\n    reader = csv.reader(csvfile,delimiter=',')\n\n    #iterators\n    rownum = 0\n    colnum = 0\n\n    for row in reader:       \n        for col in row:\n            dttm = datetime.datetime.strptime(col, \"%m/%d/%Y\")\n            ws.cell(column=colnum,row=rownum).value = dttm\n\n    wb.save('new_spreadsheet.xlsx')\n</code></pre>\n\n<p>What you'll be able to do from here is break out which columns should have what format based on the position in the csv. Here is an example:</p>\n\n<pre><code>    for row in reader:       \n        ws.cell(column=0,row=rownum,value=row[0])\n        dttm = datetime.datetime.strptime(row[1], \"%m/%d/%Y\")\n        ws.cell(column=1,row=rownum).value = dttm\n</code></pre>\n\n<p>For reference:</p>\n\n<p><a href=\"https://openpyxl.readthedocs.io/en/stable/usage.html\" rel=\"nofollow noreferrer\">https://openpyxl.readthedocs.io/en/stable/usage.html</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3277503/in-python-how-do-i-read-a-file-line-by-line-into-a-list\">In Python, how do I read a file line-by-line into a list?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/37193890/how-to-format-columns-with-headers-using-openpyxl\">How to format columns with headers using OpenPyXL</a></p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 5657071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b86880273799f87efafd0734118f2d9?s=128&d=identicon&r=PG&f=1", "display_name": "RasikhJ", "link": "https://stackoverflow.com/users/5657071/rasikhj"}, "is_accepted": false, "score": 0, "last_activity_date": 1541058444, "creation_date": 1541058444, "answer_id": 53097082, "question_id": 53092328, "link": "https://stackoverflow.com/questions/53092328/format-dates-in-excel-for-comparison/53097082#53097082", "title": "Format dates in Excel for comparison", "body": "<p>Use the xlsx module</p>\n\n<pre><code>import xlsx\nload_workbook  ( filen = (filePath,  read_only=False, data_only=False )\n</code></pre>\n\n<p>Setting data_only to False will return the formulas whereas data_only=True returns the non-formula values.</p>\n"}], "owner": {"reputation": 1, "user_id": 10587818, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kvH5FKQr_b8/AAAAAAAAAAI/AAAAAAAAAAc/SDTCY6IeteE/photo.jpg?sz=128", "display_name": "Coleman", "link": "https://stackoverflow.com/users/10587818/coleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1541095485, "creation_date": 1541021980, "last_edit_date": 1541057090, "question_id": 53092328, "link": "https://stackoverflow.com/questions/53092328/format-dates-in-excel-for-comparison", "title": "Format dates in Excel for comparison", "body": "<p>I'm in the midst of writing a iPython notebook that will pull the contents of a .csv file and paste them into a specified tab on an .xlsx file. The tab on the .xlsx is filled with a bunch of pre-programmed formulas so that I might run an analysis on the original content of the .csv file. </p>\n\n<p>I've ran into a snag, however, with the the date fields that I copy over from the .csv into the .xlsx file. </p>\n\n<p>The dates do not get properly processed by the Excel formulas unless I double-click the date cells or apply Excel's \"text to columns\" function on the column of dates and set a tab as the delimiter (which I should note, does not split the cell). </p>\n\n<p>I'm wondering if there's a way to either...</p>\n\n<ul>\n<li>write a helper function that logs the keystrokes of applying the \"text to columns\" function call</li>\n<li><p>write a helper function to double click and return down each row of the column of dates</p>\n\n<pre><code>from openpyxl import load_workbook\nimport pandas as pd\n\ndef transfer_hours(report_name, ER_hours_analysis_wb):\n\n    df = pd.read_csv(report_name, index_col=0)\n\n    book = load_workbook(ER_hours_analysis_wb)\n    sheet_name = \"ER Work Log\"\n\n    with pd.ExcelWriter(\"ER Hours Analysis 248112.xlsx\", \n        engine='openpyxl')  as writer:\n\n        writer.book = book\n        writer.sheets = dict((ws.title, ws) for ws in book.worksheets)\n\n        df.to_excel(writer, sheet_name=sheet_name, \n            startrow=1, startcol=0, engine='openpyxl')\n</code></pre></li>\n</ul>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1541022048, "post_id": 53092297, "comment_id": 93081438, "body": "Please show the full traceback"}, {"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1541022070, "post_id": 53092297, "comment_id": 93081446, "body": "Your function doesn&#39;t have a <code>return</code> statement."}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541022422, "post_id": 53092396, "comment_id": 93081565, "body": "That&#39;s a long shot if ever I saw one."}], "tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": false, "score": 2, "last_activity_date": 1541022303, "creation_date": 1541022303, "answer_id": 53092396, "question_id": 53092297, "link": "https://stackoverflow.com/questions/53092297/importing-csv-as-dictionary-none-type-error/53092396#53092396", "title": "Importing csv as dictionary - none type error", "body": "<ol>\n<li><p>Don't import things in definitions</p></li>\n<li><p>Use <code>with</code></p></li>\n<li><p>You need a <code>return</code> statement.</p></li>\n</ol>\n\n<p>With all that:</p>\n\n<pre><code>import csv\ndef load_airports_dict(filename):\n    result = {}\n    with open(filename, 'r') as handle:\n        reader = csv.reader(handle)\n        for row in reader:\n            result[row[0]] = row[1]\n    return result\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10549195, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9jCMo2ozZ64/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDRcYoaJ-XXHgDdBzORejaRmLXuOA/mo/photo.jpg?sz=128", "display_name": "Kaitlyn Hobbs", "link": "https://stackoverflow.com/users/10549195/kaitlyn-hobbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541022303, "creation_date": 1541021839, "question_id": 53092297, "link": "https://stackoverflow.com/questions/53092297/importing-csv-as-dictionary-none-type-error", "title": "Importing csv as dictionary - none type error", "body": "<p>How can I import a .csv file as a dictionary?</p>\n\n<p>I'm trying to import a .csv file as a dictionary. The .csv file has two columns: a key called \"AIRPORT CODE\" and an element called \"AIRPORT\". I first try to import it as a list because I figured its easier to convert from a list to a dictionary.</p>\n\n<pre><code>def load_airports_dict(filename):\n    import csv\n\n    reader = csv.reader(open(filename, 'r'))\n    data_list = []\n\n    for row in reader:\n        data_list.append(row)\n\n    d = { }\n\n    for row in data_list:\n        d[row[0]] = row[1]\n    print(d)\n</code></pre>\n\n<p>Unfortunately, when trying to call a function to slice the dictionary I get ''NoneType' object is not subscriptable' even though if I run the code outside of the function it gives me what I'm looking for. </p>\n"}, {"tags": ["python", "macos", "pip"], "comments": [{"owner": {"reputation": 91, "user_id": 5056066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c86cbf49b574d8a153a2b7f501db2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/5056066/nathan"}, "edited": false, "score": 0, "creation_date": 1542293978, "post_id": 53092281, "comment_id": 93524571, "body": "I ended up deleting all of the brew installed Python packages. This seemed to rectify the issue. Now everything is back to normal. Had to re-install all of the packages that I needed for Ansible and other items."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5056066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c86cbf49b574d8a153a2b7f501db2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/5056066/nathan"}, "edited": false, "score": 0, "creation_date": 1541030179, "post_id": 53092550, "comment_id": 93083677, "body": "which pip results in nothing. I did install using brew and doctor shows that everything is good &quot; ready to brew&quot;."}], "tags": [], "owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "is_accepted": false, "score": 0, "last_activity_date": 1541023230, "creation_date": 1541023230, "answer_id": 53092550, "question_id": 53092281, "link": "https://stackoverflow.com/questions/53092281/python-pip-on-mac-hosed/53092550#53092550", "title": "Python / PIP on Mac hosed", "body": "<ol>\n<li><p>RUN: <code>which pip</code></p></li>\n<li><p>Did you installed Python using <code>brew</code>. If you did, <code>brew doctor</code> to see if there's an unlinked file.</p></li>\n<li><p>Try to run your application using <code>python2</code> directly.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "edited": false, "score": 0, "creation_date": 1541091719, "post_id": 53093718, "comment_id": 93107167, "body": "If you use Anaconda you can easily install python2.7 and python3.6. You can then go to <a href=\"https://www.python.org/downloads/\" rel=\"nofollow noreferrer\">python.org/downloads</a> and download aversion you want. YHou can download any version you want from python.org.  Anaconda just make it simple to set up your virtual environments..."}], "tags": [], "owner": {"reputation": 91, "user_id": 5056066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c86cbf49b574d8a153a2b7f501db2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/5056066/nathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1541032500, "creation_date": 1541032500, "answer_id": 53093718, "question_id": 53092281, "link": "https://stackoverflow.com/questions/53092281/python-pip-on-mac-hosed/53093718#53093718", "title": "Python / PIP on Mac hosed", "body": "<p>Sometimes it seems that if you bang on something long enough, it just gives in. I uninstalled (again) the brew python installation. After that, I was able to install pip. It's all very strange. Something with brew is messing everything up.</p>\n\n<p>Do I really even NEED to use brew for python? I'm guessing only if I needed to use a version other than 2.7.10, correct?</p>\n"}], "owner": {"reputation": 91, "user_id": 5056066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c86cbf49b574d8a153a2b7f501db2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/5056066/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541032500, "creation_date": 1541021780, "question_id": 53092281, "link": "https://stackoverflow.com/questions/53092281/python-pip-on-mac-hosed", "title": "Python / PIP on Mac hosed", "body": "<p>I think the system install of Python is okay. I can open up the python shell from bash without trouble. But PIP is no longer. I am also trying to run Ansible but that just quit working.</p>\n\n<p>What I was doing was trying to fix issues with modules installing but not able to be imported. I uninstalled then re-installed and that was fixing most of my issues, then everything just came crashing down.</p>\n\n<p>Issue 1: PIP gone.\nPIP show 'command not found'. So maybe a symlink is gone? I try to re-install via <a href=\"https://pip.readthedocs.io/en/latest/installing/\" rel=\"nofollow noreferrer\">https://pip.readthedocs.io/en/latest/installing/</a> and get the following:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"get-pip.py\", line 28, in &lt;module&gt;\n    import tempfile\n  File \"/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tempfile.py\", line 32, in &lt;module&gt;\n    import io as _io\n  File \"/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/io.py\", line 51, in &lt;module&gt;\n    import _io\nImportError: dlopen(/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so, 2): Symbol not found: __PyCodecInfo_GetIncrementalDecoder\n  Referenced from: /usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so\n  Expected in: flat namespace\n in /usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so\n</code></pre>\n\n<p>When trying to use easy_install I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/bin/easy_install-2.7\", line 11, in &lt;module&gt;\n    load_entry_point('setuptools==18.5', 'console_scripts', 'easy_install')()\n  File \"/Users/farroar/Library/Python/2.7/lib/python/site-packages/pkg_resources/__init__.py\", line 484, in load_entry_point\n    return get_distribution(dist).load_entry_point(group, name)\n  File \"/Users/farroar/Library/Python/2.7/lib/python/site-packages/pkg_resources/__init__.py\", line 2725, in load_entry_point\n    return ep.load()\n  File \"/Users/farroar/Library/Python/2.7/lib/python/site-packages/pkg_resources/__init__.py\", line 2343, in load\n    return self.resolve()\n  File \"/Users/farroar/Library/Python/2.7/lib/python/site-packages/pkg_resources/__init__.py\", line 2349, in resolve\n    module = __import__(self.module_name, fromlist=['__name__'], level=0)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/setuptools/command/easy_install.py\", line 46, in &lt;module&gt;\n    from setuptools.archive_util import unpack_archive\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/setuptools/archive_util.py\", line 15, in &lt;module&gt;\n    from pkg_resources import ensure_directory, ContextualZipFile\nImportError: cannot import name ContextualZipFile\n</code></pre>\n\n<p>which -a python gives:</p>\n\n<pre><code>/usr/local/bin/python\n/usr/bin/python\n</code></pre>\n\n<p>I installed python with brew and reinstalled but receive an error during the process:</p>\n\n<pre><code>error: could not delete '/usr/local/lib/python2.7/site-packages/pip/_internal/configuration.py': Permission denied\nWarning: The post-install step did not complete successfully\nYou can try again using `brew postinstall python@2`\n</code></pre>\n\n<p>when I try to run ansible WITHOUT assuming root I get a weird error:</p>\n\n<pre><code>.....\n\", line 18, in &lt;module&gt;\n    from cryptography.x509.name import Name\n  File \"/usr/local/lib/python2.7/site-packages/cryptography/x509/name.py\", line 28, in &lt;module&gt;\n    _ASN1_TYPE_TO_ENUM = dict((i.value, i) for i in _ASN1Type)\nTypeError: 'type' object is not iterable\n</code></pre>\n\n<p>I'm hoping for some direction here. Everything was working fine until I encountered a module that wouldn't load. Chased that down into a hole.</p>\n"}, {"tags": ["python", "opencv", "ocr", "image-thresholding"], "comments": [{"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 3, "creation_date": 1541021788, "post_id": 53092251, "comment_id": 93081337, "body": "Its not a good idea to post your personal/someone ID online."}, {"owner": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021835, "post_id": 53092251, "comment_id": 93081360, "body": "Thank you, I am totally aware of that, it is an image I downloaded from the Internet"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1541040719, "post_id": 53092251, "comment_id": 93085762, "body": "The bottom part looks pretty clean, is that what you&#39;re trying to decode?"}, {"owner": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1541060015, "post_id": 53092251, "comment_id": 93090748, "body": "@MarkRansom, not only the bottom. Mainly the name, family name, date and place of birth"}], "answers": [{"comments": [{"owner": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "edited": false, "score": 0, "creation_date": 1541060443, "post_id": 53094823, "comment_id": 93090906, "body": "Unfortunately, this didn&#39;t give a better result too: the background is still noisy so that the writing is not clear yet."}, {"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "reply_to_user": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "edited": false, "score": 0, "creation_date": 1541061262, "post_id": 53094823, "comment_id": 93091250, "body": "you need to change the last two parameters of <code>adaptiveThreshold</code> method accordingly in order to get better results"}, {"owner": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "edited": false, "score": 0, "creation_date": 1541061517, "post_id": 53094823, "comment_id": 93091338, "body": "Thank you, I will try it."}, {"owner": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "edited": false, "score": 0, "creation_date": 1541145672, "post_id": 53094823, "comment_id": 93123849, "body": "In fact, I tried to adjust the parameters, but it didn&#39;t give a good result."}], "tags": [], "owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1541061825, "last_edit_date": 1541061825, "creation_date": 1541042633, "answer_id": 53094823, "question_id": 53092251, "link": "https://stackoverflow.com/questions/53092251/is-there-a-better-way-to-separate-the-writing-from-the-background/53094823#53094823", "title": "Is there a better way to separate the writing from the background?", "body": "<p>You can use <a href=\"https://docs.opencv.org/2.4/modules/imgproc/doc/miscellaneous_transformations.html?highlight=adaptiveThreshold\" rel=\"nofollow noreferrer\">adaptive thresholding</a>. From documentation :</p>\n\n<blockquote>\n  <p>In this, the algorithm calculate the threshold for a small regions of the image. So we get different thresholds for different regions of the same image and it gives us better results for images with varying illumination.</p>\n</blockquote>\n\n<pre><code>import numpy as np\nimport cv2\n\n\n\nimage = cv2.imread('b.jpg')\nimage = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\nimage = cv2.medianBlur(image ,5)\n\nth1 = cv2.adaptiveThreshold(image,255,cv2.ADAPTIVE_THRESH_MEAN_C,\\\n            cv2.THRESH_BINARY,11,2)\nth2 = cv2.adaptiveThreshold(image,255,cv2.ADAPTIVE_THRESH_GAUSSIAN_C,\\\n            cv2.THRESH_BINARY,11,2)\ncv2.imwrite('output1.jpg', th1 )\ncv2.imwrite('output2.jpg', th2 )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "is_accepted": false, "score": 3, "last_activity_date": 1541448338, "creation_date": 1541448338, "answer_id": 53161422, "question_id": 53092251, "link": "https://stackoverflow.com/questions/53092251/is-there-a-better-way-to-separate-the-writing-from-the-background/53161422#53161422", "title": "Is there a better way to separate the writing from the background?", "body": "<p>After digging deep in Stack<strong>Overflow</strong> questions, I found <a href=\"https://stackoverflow.com/a/50800425/8128190\">this answer</a> which is about removing watermark using opencv.\nI adapted the code to my needs and this is what I got:  </p>\n\n<pre><code>import numpy as np\nimport cv2\n\n\nimage = cv2.imread('a.png')\nimg = image.copy()\n\nalpha =2.75\nbeta = -160.0\n\ndenoised = alpha * img + beta\ndenoised = np.clip(denoised, 0, 255).astype(np.uint8)\n\n#denoised = cv2.fastNlMeansDenoising(denoised, None, 31, 7, 21)\n\nimg = cv2.cvtColor(denoised, cv2.COLOR_BGR2GRAY)\n\nh = img.shape[0]\nw = img.shape[1]\n\nfor y in range(0, h):\n    for x in range(0, w):\n        if img[y, x] &gt;= 220:\n            img[y, x] = 255\n        else:\n            img[y, x] = 0\n\ncv2.imwrite('outpu.jpg', img)\n</code></pre>\n\n<p>Here is the output image:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/C7vbe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C7vbe.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>The good thing about this code is that it gives good results not only with this image, but also with all the images that I tested.</strong>  </p>\n\n<p>I hope it helps anyone who had the same problem.</p>\n"}], "owner": {"reputation": 1866, "user_id": 8128190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894371b5ca172f31b51cfcb727091855?s=128&d=identicon&r=PG&f=1", "display_name": "singrium", "link": "https://stackoverflow.com/users/8128190/singrium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 53094823, "answer_count": 2, "score": 1, "last_activity_date": 1545382140, "creation_date": 1541021652, "last_edit_date": 1545382140, "question_id": 53092251, "link": "https://stackoverflow.com/questions/53092251/is-there-a-better-way-to-separate-the-writing-from-the-background", "title": "Is there a better way to separate the writing from the background?", "body": "<p>I am working on a project where I should apply and OCR on some documents.<br>\nThe first step is to threshold the image and let only the writing (whiten the background).</p>\n\n<p><strong>Example of an input image:</strong> (<em>For the GDPR and privacy reasons, this image is from the Internet</em>)</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lcdfg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lcdfg.jpg\" alt=\"enter image description here\"></a>\n<strong>Here is my code:</strong></p>\n\n<pre><code>import cv2\nimport numpy as np\n\n\nimage = cv2.imread('b.jpg')\nimage = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\nh = image.shape[0]\nw = image.shape[1]\nfor y in range(0, h):\n    for x in range(0, w):\n        if image[y, x] &gt;= 120:\n            image[y, x] = 255\n        else:\n            image[y, x] = 0\ncv2.imwrite('output.jpg', image)\n</code></pre>\n\n<p><strong>Here is the result that I got:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/xNhbo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xNhbo.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>When I applied <em>pytesseract</em> to the output image, the results were not satisfying (I know that an OCR is not perfect). Although I tried to adjust the threshold value (in this code it is equal to 120), the result was not as clear as I wanted.  </p>\n\n<p><strong>Is there a way to make a better threshold in order to only keep the writing in black and whiten the rest?</strong></p>\n"}, {"tags": ["python", "excel", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 1246, "user_id": 2796965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3bb1a1cb036a85f9b2ce76b02e1a40?s=128&d=identicon&r=PG&f=1", "display_name": "smj", "link": "https://stackoverflow.com/users/2796965/smj"}, "is_accepted": false, "score": 0, "last_activity_date": 1541030494, "creation_date": 1541030494, "answer_id": 53093506, "question_id": 53092243, "link": "https://stackoverflow.com/questions/53092243/excel-in-python-narrowing-rows-based-on-column-values/53093506#53093506", "title": "Excel in Python - Narrowing Rows Based on Column Values", "body": "<p>Welcome to SO! In the future, please provide sample input data, your desired output, and any code attempts you have made.</p>\n\n<p>Here is a way you can achieve your goal, if I understand correctly.</p>\n\n<pre><code>import pandas as pd\n\ndata = pd.DataFrame(\n    {\n        'material': ['wood', 'metal', 'metal', 'glass', 'glass', 'tyres'],\n        'uses': ['house', 'house', 'car', 'house', 'car', 'car']\n    }\n)\n</code></pre>\n\n<p>Our dataset:</p>\n\n<pre><code>  material   uses\n0     wood  house\n1    metal  house\n2    metal    car\n3    glass  house\n4    glass    car\n5    tyres    car\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>data.groupby('material').agg(', '.join)[(grouped['uses'].str.contains('house')) &amp; (grouped['uses'].str.contains('car'))]\n</code></pre>\n\n<p>First we group by <code>material</code>, and create a string with all the items that were made using that material. This creates a dataframe. Then we can apply two boolean conditions testing for the presence of <code>house</code> and <code>car</code> in the constructed string.</p>\n\n<p>Result:</p>\n\n<pre><code>material        uses  \nglass     house, car\nmetal     house, car\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10588145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ff5eda4c0be54fb6efcb5378468719?s=128&d=identicon&r=PG&f=1", "display_name": "tgile512", "link": "https://stackoverflow.com/users/10588145/tgile512"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541030494, "creation_date": 1541021584, "question_id": 53092243, "link": "https://stackoverflow.com/questions/53092243/excel-in-python-narrowing-rows-based-on-column-values", "title": "Excel in Python - Narrowing Rows Based on Column Values", "body": "<p>Very new to Python so bear with me.</p>\n\n<p>I am looking to filter down an Excel spreadsheet using Python and provided an example below to help explain. For context, I used Pandas to pull in the file.</p>\n\n<p>I have listed two columns: materials and what those materials are used to make. Essentially I want to boil down the spreadsheet to only see materials that are used to make both House and Car (i.e. not one or the other). </p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "json"], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 10219723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1940490456012903/picture?type=large", "display_name": "Derek Haynes", "link": "https://stackoverflow.com/users/10219723/derek-haynes"}, "is_accepted": false, "score": 0, "last_activity_date": 1541268810, "last_edit_date": 1541268810, "creation_date": 1541023391, "answer_id": 53092572, "question_id": 53092220, "link": "https://stackoverflow.com/questions/53092220/change-and-access-value-of-python2-7-dict-element/53092572#53092572", "title": "Change and Access value of Python2.7 Dict Element", "body": "<p>Got it. \nThe problem was that the first element had the length of 0</p>\n\n<p>So I could not go deeper with </p>\n\n<pre><code>print(annotations[intent][0])\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 10219723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1940490456012903/picture?type=large", "display_name": "Derek Haynes", "link": "https://stackoverflow.com/users/10219723/derek-haynes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541268810, "creation_date": 1541021413, "question_id": 53092220, "link": "https://stackoverflow.com/questions/53092220/change-and-access-value-of-python2-7-dict-element", "title": "Change and Access value of Python2.7 Dict Element", "body": "<p>I am trying to modify a Python dict value. I think it may be to nested.</p>\n\n<p>I tried:</p>\n\n<pre><code>for x in annotations:\n  print(dict[x])\n</code></pre>\n\n<p>Which returns</p>\n\n<pre><code>[{'truePos': 0}, {'falseNeg': 0}, {'falsePos': 0}, {'precision': 0}, 'recall', 'f1']\n</code></pre>\n\n<p>Now I cannot access and change the {\"truePos\": 0}.\n(I want to for example, increment the value by 1 each time</p>\n\n<p>What is the right way to do this in python2.7?\nThanks very much</p>\n\n<p>I added the full Dict in <a href=\"https://pastebin.com/FDT69dhE\" rel=\"nofollow noreferrer\">pastebin</a></p>\n"}, {"tags": ["python", "python-3.x", "numpy", "scipy"], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 10044750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f518556d11e5cc82c20758b972355ca3?s=128&d=identicon&r=PG&f=1", "display_name": "asdas", "link": "https://stackoverflow.com/users/10044750/asdas"}, "edited": false, "score": 0, "creation_date": 1541022173, "post_id": 53092252, "comment_id": 93081484, "body": "Thanks, but I&#39;m still getting different values from matlab, is there some mistake?"}, {"owner": {"reputation": 155, "user_id": 10044750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f518556d11e5cc82c20758b972355ca3?s=128&d=identicon&r=PG&f=1", "display_name": "asdas", "link": "https://stackoverflow.com/users/10044750/asdas"}, "edited": false, "score": 0, "creation_date": 1541022240, "post_id": 53092252, "comment_id": 93081507, "body": "&gt;&gt; I=imread(&#39;lenna.jpg&#39;); &gt;&gt; I2 = im2double(I); &gt;&gt; s=kurtosis(I2(:);   I&#39;m running like this in matlab"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 155, "user_id": 10044750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f518556d11e5cc82c20758b972355ca3?s=128&d=identicon&r=PG&f=1", "display_name": "asdas", "link": "https://stackoverflow.com/users/10044750/asdas"}, "edited": false, "score": 0, "creation_date": 1541022599, "post_id": 53092252, "comment_id": 93081619, "body": "See my edits, you&#39;re trying to get skewness not kurtosis"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 155, "user_id": 10044750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f518556d11e5cc82c20758b972355ca3?s=128&d=identicon&r=PG&f=1", "display_name": "asdas", "link": "https://stackoverflow.com/users/10044750/asdas"}, "edited": false, "score": 1, "creation_date": 1541023104, "post_id": 53092252, "comment_id": 93081776, "body": "See my second edits, it reproduces the same kurtosis as <code>MATLAB</code> :) Hope that helps!"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 6, "last_activity_date": 1541023504, "last_edit_date": 1541023504, "creation_date": 1541021654, "answer_id": 53092252, "question_id": 53092196, "link": "https://stackoverflow.com/questions/53092196/calculating-kurtosis-from-an-image/53092252#53092252", "title": "Calculating kurtosis from an image", "body": "<p>You are calling <code>kurtosis</code> on <code>axis=0</code> by default (<a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.kurtosis.html\" rel=\"nofollow noreferrer\">see docs</a>), but it seems like you're trying to run it on the whole array. So you can try <code>axis=None</code>:</p>\n\n<pre><code>kurtosis(gray_img, axis=None)\n</code></pre>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>im = np.random.randint(0,256,(5,5))\n\n&gt;&gt;&gt; im\narray([[104, 125,  26, 194,  47],\n       [198,  46, 105,  38, 241],\n       [211, 115,  62, 196, 169],\n       [ 92, 184, 212, 100, 117],\n       [212,  35, 208,  52,   3]])\n\n&gt;&gt;&gt; kurtosis(im)\narray([-1.78890733, -1.32154862, -1.66900354, -1.74522902, -1.30434102])\n\n&gt;&gt;&gt; kurtosis(im, axis=None)\n-1.3968689968948007\n</code></pre>\n\n<p><strong>[EDIT]</strong>: From your comments, you are trying to calculate skewness, not kurtosis. For this, use:</p>\n\n<pre><code>from scipy.stats import kurtosis,skew\nskew(gray_img, axis=None)\n</code></pre>\n\n<p>In matlab, on the array above, your code (taken directly from your comments) gives:</p>\n\n<pre><code>im =\n\n   104   125    26   194    47\n   198    46   105    38   241\n   211   115    62   196   169\n    92   184   212   100   117\n   212    35   208    52     3\n\n&gt;&gt; I2 = im2double(im); \n&gt;&gt; s=skewness(I2(:))\n\ns =\n\n    0.0118\n</code></pre>\n\n<p>In <code>scipy</code>, it gives:</p>\n\n<pre><code>&gt;&gt;&gt; skew(im,axis=None)\n0.011819746815198935\n</code></pre>\n\n<p><strong>[Edit #2]</strong>: It seems <code>MATLAB</code>'s default kurtosis definition is <code>Pearson's</code>, whereas <code>Scipy</code>'s is <code>Fisher's</code>. +1 to <code>scipy</code> for being more flexible than <code>MATLAB</code>! So you can use:</p>\n\n<pre><code>kurtosis(im, None, fisher=False)\n</code></pre>\n\n<p>To get the same results:</p>\n\n<pre><code># Scipy:\n&gt;&gt;&gt; kurtosis(im,None, fisher=False)\n1.6031310031051993\n# Matlab:\n&gt;&gt;  s=kurtosis(I2(:))\n\ns =\n\n    1.6031\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 10044750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f518556d11e5cc82c20758b972355ca3?s=128&d=identicon&r=PG&f=1", "display_name": "asdas", "link": "https://stackoverflow.com/users/10044750/asdas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 0, "accepted_answer_id": 53092252, "answer_count": 1, "score": 3, "last_activity_date": 1541023504, "creation_date": 1541021221, "question_id": 53092196, "link": "https://stackoverflow.com/questions/53092196/calculating-kurtosis-from-an-image", "title": "Calculating kurtosis from an image", "body": "<p>I have this code:</p>\n\n<pre><code>import cv2\nfrom scipy.stats import kurtosis, skew\n\ndef main():\n    img1 = 'lenna.jpg'\n    gray_img = cv2.imread(img1, cv2.IMREAD_GRAYSCALE)\n\n    print(f'Kurtosis: {kurtosis(gray_img)}')\n</code></pre>\n\n<p>I want to calculate the kurtosis for an given image, but when I run this code, it shows like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8lxuC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8lxuC.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is it right to return all those values? In my thoughts it supposedly return a single value, because when I run kurtosis in matlab, it returns <code>1.8561</code></p>\n"}, {"tags": ["python", "dictionary", "ms-word", "docx-mailmerge"], "answers": [{"tags": [], "owner": {"reputation": 1619, "user_id": 7228140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOKG6.png?s=128&g=1", "display_name": "Stephen Cowley", "link": "https://stackoverflow.com/users/7228140/stephen-cowley"}, "is_accepted": false, "score": 1, "last_activity_date": 1541021092, "last_edit_date": 1541021092, "creation_date": 1541020675, "answer_id": 53092082, "question_id": 53092062, "link": "https://stackoverflow.com/questions/53092062/how-do-i-get-a-python-dictionary-into-a-document-merge-as-kwargs-with-docx-mailm/53092082#53092082", "title": "How do I get a python dictionary into a document merge as kwargs with docx-mailmerge", "body": "<p>Not sure what the official name is, but I call it the \"explode\" operator.</p>\n\n<pre><code>document.merge(**mydict)\n</code></pre>\n\n<p>This unpacks the <code>dict</code> into the function's/method's keyword arguments.</p>\n\n<p>Example:</p>\n\n<pre><code>def foo_kwargs(a=1, b=2, c=3):\n    print(f'a={a} b={b} c={c}')\n\nmy_dict = {'a': 100, 'b': 200, 'c': 300}\nfoo_kwargs(**my_dict)\n# Prints a=100 b=200 c=300\n</code></pre>\n\n<hr>\n\n<p>Note that there is also the args explode:</p>\n\n<pre><code>mylist = [1,2,3,4]\n\ndef foo_args(a, b, c, d):\n    print(a, b, c ,d)\n\nfoo_args(*mylist)\n# Prints 1 2 3 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10717019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xMUNi.png?s=128&g=1", "display_name": "j_rothmans", "link": "https://stackoverflow.com/users/10717019/j-rothmans"}, "is_accepted": false, "score": 0, "last_activity_date": 1589441644, "creation_date": 1589441644, "answer_id": 61791784, "question_id": 53092062, "link": "https://stackoverflow.com/questions/53092062/how-do-i-get-a-python-dictionary-into-a-document-merge-as-kwargs-with-docx-mailm/61791784#61791784", "title": "How do I get a python dictionary into a document merge as kwargs with docx-mailmerge", "body": "<p>Use the <code>merge_pages</code> method when passing a dict to a Mailmerge object: <code>document.merge_pages([mydict])</code></p>\n\n<pre><code># keys = your mergefield names, values = what you want to insert into each mergefield\nmydict = {'name': 'Theo', 'age': '39', 'gender': 'male', 'eyecolor': 'brown'}\n\ntemplate = \"myworddoc.docx\"\nnewdoc = \"mergeddoc.docx\"\ndocument = MailMerge(template)\n\nprint([i for i in document.get_merge_fields()] # Verify your merge fields exist\ndocument.merge_pages([mydict])\ndocument.write(newdoc)\ndocument.close()\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 244970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40d3b7da056fcc44bf7792e4ed4bda3?s=128&d=identicon&r=PG", "display_name": "tvdsluijs", "link": "https://stackoverflow.com/users/244970/tvdsluijs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1589441644, "creation_date": 1541020533, "question_id": 53092062, "link": "https://stackoverflow.com/questions/53092062/how-do-i-get-a-python-dictionary-into-a-document-merge-as-kwargs-with-docx-mailm", "title": "How do I get a python dictionary into a document merge as kwargs with docx-mailmerge", "body": "<p>So I've got this dictionary</p>\n\n<pre><code>mydict = {'name': 'Theo', 'age': '39', 'gender': 'male', 'eyecolor': 'brown'}\n</code></pre>\n\n<p>and I use docx-mailmerge to merge this data into a word document.</p>\n\n<pre><code>template = \"myworddoc.docx\"\nnewdoc = \"mergeddoc.docx\"\ndocument = MailMerge(template)\ndocument.merge(mydict)\ndocument.write(newdoc)\n</code></pre>\n\n<p>But the document created is empty. I guess it only works with kwargs??</p>\n\n<p>Can I only use the merge with kwargs so</p>\n\n<pre><code>document.merge(name='Theo', age='39', gender='male', eyecolor='brown')\n</code></pre>\n\n<p>I really like to use a dictionary to merge the data.</p>\n\n<p>Do I transform the dict to kwarg (and how do I do this) or do I use the dict?</p>\n\n<p>Thank you for helping out!!</p>\n"}, {"tags": ["python", "json", "python-requests"], "comments": [{"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 1, "creation_date": 1541020799, "post_id": 53092056, "comment_id": 93080984, "body": "I think you&#39;re getting confused about where escapes happen\u2026  try doing <code>print(payload[&#39;content&#39;][0][&#39;text&#39;])</code> and you should see the new lines &quot;unescaped&quot;. the server you&#39;re posting to might also be handling them incorrectly"}, {"owner": {"reputation": 35, "user_id": 4054375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e2fad2663500e28d49a3250a41e7d9?s=128&d=identicon&r=PG&f=1", "display_name": "killaz", "link": "https://stackoverflow.com/users/4054375/killaz"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541021317, "post_id": 53092056, "comment_id": 93081169, "body": "Doing what you suggested returns the correct text. But the server reads it <code>\\\\n</code> instead of <code>\\n</code> after posting the data. But using the raw string doesn&#39;t cause this problem. A server issue?"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541021496, "post_id": 53092056, "comment_id": 93081245, "body": "at a guess the server isn&#39;t correctly parsing the JSON data (the <code>requests</code> package is pretty reliable in my experience).  if it&#39;s open source maybe ask with them?"}, {"owner": {"reputation": 1137, "user_id": 2154065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33efa86b1be8c3595c13acb2853d6d03?s=128&d=identicon&r=PG", "display_name": "user2154065", "link": "https://stackoverflow.com/users/2154065/user2154065"}, "edited": false, "score": 1, "creation_date": 1541022367, "post_id": 53092056, "comment_id": 93081539, "body": "Why do you think, the POST is sent with &quot;doubled backslashes&quot;? I tried your code and it works fine."}, {"owner": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1541047006, "post_id": 53092056, "comment_id": 93086858, "body": "as what it is , i ran server and got <code>{&quot;content&quot;: [{&quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;Hello.\\n\\nMy name is John.&quot;}], &quot;metadata&quot;: {}}</code>"}], "owner": {"reputation": 35, "user_id": 4054375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e2fad2663500e28d49a3250a41e7d9?s=128&d=identicon&r=PG&f=1", "display_name": "killaz", "link": "https://stackoverflow.com/users/4054375/killaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2400, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1586825722, "creation_date": 1541020500, "last_edit_date": 1586825722, "question_id": 53092056, "link": "https://stackoverflow.com/questions/53092056/how-to-insert-a-newline-in-json-data-for-a-post-request", "title": "How to insert a newline in JSON data for a POST request?", "body": "<p><strong>In the following code:</strong></p>\n\n<pre><code>import requests\n\n\nmsg = \"Hello.\\n\\nMy name is John.\"\n\npayload = {\n    \"content\": [\n        {\n            \"type\": \"text\",\n            \"text\": msg\n        }\n    ],\n    \"metadata\": {}\n}\n\nheaders = {\n    'content-type': \"application/json\"\n}\n\nprint(requests.request(\"POST\", url, headers=headers, json=payload).json())\n</code></pre>\n\n<p>The <code>msg</code> string has many <code>\\n</code> newlines but when the request is sent, it escapes the backslash. It posts <code>\\\\n</code> for every <code>\\n</code> in the string...</p>\n\n<p>Apparently raw text can post the newlines correctly without escaping the backslash.</p>\n\n<pre><code>payload = \"{\\\"content\\\":[{\\\"type\\\":\\\"text\\\",\\\"text\\\":\\\"\" + msg + \"\\\"}],\\\"metadata\\\":{}}\"\n</code></pre>\n\n<p>Is there a way to make newlines work without having to use raw text for the payload (it can be very confusing)?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 1, "creation_date": 1541020462, "post_id": 53092003, "comment_id": 93080846, "body": "<code>readlines</code> will return a list of lines, its not actually a string. You can&#39;t use <code>replace</code> with a list."}, {"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541020539, "post_id": 53092003, "comment_id": 93080872, "body": "@SufiyanGhori Using this code <code>test = t.readlines().rstrip()</code> i&#39;m getting exception value <b>&#39;list&#39; object has no attribute &#39;rstrip&#39;</b>"}, {"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "reply_to_user": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1541020601, "post_id": 53092003, "comment_id": 93080896, "body": "Yeah that&#39;s what i&#39;ve also begun realizing @MuhammadAhmad, but I really don&#39;t know what else to do. I&#39;ve been trying for 3+ hours now."}, {"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541020723, "post_id": 53092003, "comment_id": 93080946, "body": "@SufiyanGhori Yeah that prints it without these values, but I still can&#39;t pass it into my command as a variable since it&#39;s a NoneType"}, {"owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1541020765, "post_id": 53092003, "comment_id": 93080973, "body": "@LesnieSncheider The question is: will there only be one line in the file, or there can be more? If there&#39;ll only be one line, you don&#39;t really need <code>readlines</code> then."}, {"owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021117, "post_id": 53092003, "comment_id": 93081098, "body": "@SufiyanGhori It never is irrelevant of what OP is trying to do. I really don&#39;t think that OP is just trying to print each line. The question is: what does he really want to do with it. And if there&#39;ll not be more than 1 line in the file, he doesn&#39;t need any loop or <code>readlines</code> etc."}, {"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "reply_to_user": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1541021180, "post_id": 53092003, "comment_id": 93081124, "body": "@MuhammadAhmad, this is why i added both scenarios in my answer."}, {"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021274, "post_id": 53092003, "comment_id": 93081151, "body": "To be clear there is <b>only</b> this line in the file, nothing else. @SufiyanGhori"}, {"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021418, "post_id": 53092003, "comment_id": 93081212, "body": "@LesnieSncheider, I have added the answer on how to use <code>readline</code> to read thsi one line :) please read my answer"}], "answers": [{"tags": [], "owner": {"reputation": 9435, "user_id": 6858244, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wfU-doP3Fhc/AAAAAAAAAAI/AAAAAAAACbY/GNmdrBKqDSM/photo.jpg?sz=128", "display_name": "Prayson W. Daniel", "link": "https://stackoverflow.com/users/6858244/prayson-w-daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1541020490, "creation_date": 1541020490, "answer_id": 53092054, "question_id": 53092003, "link": "https://stackoverflow.com/questions/53092003/replace-words-in-list-that-later-will-be-used-in-variable/53092054#53092054", "title": "Replace words in list that later will be used in variable", "body": "<p>readline() returns a list. Try print(test[0].strip())</p>\n"}, {"comments": [{"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "edited": false, "score": 0, "creation_date": 1541021156, "post_id": 53092059, "comment_id": 93081115, "body": "Your code succesfully removes the characters but it doesn&#39;t work in my command still. I tried to do <code>subprocess.Popen([&#39;echo&#39;, removestrings], universal_newlines=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)                 for line in status.stdout:                     sys.stdout.write(line) </code> to see what its output was and i&#39;m getting an exception value saying <b>[WinError 2] The system cannot find the file specified</b>"}, {"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021313, "post_id": 53092059, "comment_id": 93081167, "body": "This answer is over complexed given the solution is pretty straight forward."}, {"owner": {"reputation": 1120, "user_id": 10559142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bFP50.jpg?s=128&g=1", "display_name": "Berthur", "link": "https://stackoverflow.com/users/10559142/berthur"}, "edited": false, "score": 0, "creation_date": 1541021368, "post_id": 53092059, "comment_id": 93081191, "body": "Well it sounds to me as if... the system can&#39;t find your file :| Any other information you might provide on the matter?"}, {"owner": {"reputation": 1120, "user_id": 10559142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bFP50.jpg?s=128&g=1", "display_name": "Berthur", "link": "https://stackoverflow.com/users/10559142/berthur"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021446, "post_id": 53092059, "comment_id": 93081223, "body": "@SufiyanGhori It&#39;s literally just his own code with three characters ([, 0 and ]) added."}, {"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021510, "post_id": 53092059, "comment_id": 93081248, "body": "agree, but you can tell OP that all the work he is doing can be simplified. OP probably didn&#39;t know <code>readlines()</code> returns a list object."}, {"owner": {"reputation": 1120, "user_id": 10559142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bFP50.jpg?s=128&g=1", "display_name": "Berthur", "link": "https://stackoverflow.com/users/10559142/berthur"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021826, "post_id": 53092059, "comment_id": 93081356, "body": "@SufiyanGhori Well yes, good point. I tend to prefer explaining the issue at hand first and foremost though, and not rewrite OP&#39;s entire code. That way it might be easier for them to understand what the problem was in the first place and not just think that their code is bad. Agreed, though, that it&#39;s also good to see some better approaches, and some of the other answers here do a better job at that."}, {"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "edited": false, "score": 0, "creation_date": 1541021909, "post_id": 53092059, "comment_id": 93081385, "body": "@Berthur as written in Sufiyan&#39;s answer below   The file is in the same directory as my terminal is in, and if I use print(line) just before i call my subprocess command there&#39;s no issue grabbing the string and outputting it. But once its assigned into my subprocess commmand, the system seems to screw up somehow."}, {"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1541021959, "post_id": 53092059, "comment_id": 93081403, "body": "@SufiyanGhori You&#39;re right that I didnt know that. Just a newbie trying to learn and I appreciate everyones answer and effort to help me :)"}], "tags": [], "owner": {"reputation": 1120, "user_id": 10559142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bFP50.jpg?s=128&g=1", "display_name": "Berthur", "link": "https://stackoverflow.com/users/10559142/berthur"}, "is_accepted": false, "score": 1, "last_activity_date": 1541022282, "last_edit_date": 1541022282, "creation_date": 1541020515, "answer_id": 53092059, "question_id": 53092003, "link": "https://stackoverflow.com/questions/53092003/replace-words-in-list-that-later-will-be-used-in-variable/53092059#53092059", "title": "Replace words in list that later will be used in variable", "body": "<p>Your <code>test</code> variable is a list, because <code>readlines()</code> returns a list of all lines read.</p>\n\n<p>Since you said the file only contains this one line, you probably wish to perform the replace on only the first line that you read:</p>\n\n<pre><code>removestrings = test[0].replace('[', '').replace('[', '').replace('\\\\', '').replace(\"'\", '').replace('n', '')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 10588054, "user_type": "registered", "profile_image": "https://graph.facebook.com/537791217/picture?type=large", "display_name": "millibyte", "link": "https://stackoverflow.com/users/10588054/millibyte"}, "is_accepted": false, "score": 1, "last_activity_date": 1541020523, "creation_date": 1541020523, "answer_id": 53092060, "question_id": 53092003, "link": "https://stackoverflow.com/questions/53092003/replace-words-in-list-that-later-will-be-used-in-variable/53092060#53092060", "title": "Replace words in list that later will be used in variable", "body": "<p>You can read the whole file and split lines using str.splitlines:</p>\n\n<pre><code>test = t.read().splitlines()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "reply_to_user": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "edited": false, "score": 0, "creation_date": 1541024426, "post_id": 53092084, "comment_id": 93082169, "body": "thats ok @LesnieSncheider"}], "tags": [], "owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "is_accepted": true, "score": 0, "last_activity_date": 1542773680, "last_edit_date": 1542773680, "creation_date": 1541020680, "answer_id": 53092084, "question_id": 53092003, "link": "https://stackoverflow.com/questions/53092003/replace-words-in-list-that-later-will-be-used-in-variable/53092084#53092084", "title": "Replace words in list that later will be used in variable", "body": "<p>You get the error because <code>readlines</code> returns a list object. Since you mentioned in the comment that there is just one line in the file, its better to use <code>readline()</code> instead,</p>\n\n<pre><code>line = \"\" # so you can use it as a variable outside `with` scope,\nwith open(\"logfilnavn\", 'r') as t:\n    line = t.readline()\n    print(line)\n\n# output,\neeb39d3e-dd4f-11e8-acf7-a6389e8e7978\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "is_accepted": false, "score": 0, "last_activity_date": 1541021654, "creation_date": 1541021654, "answer_id": 53092253, "question_id": 53092003, "link": "https://stackoverflow.com/questions/53092003/replace-words-in-list-that-later-will-be-used-in-variable/53092253#53092253", "title": "Replace words in list that later will be used in variable", "body": "<p><code>readlines</code> will return a list of lines, and you can't use <code>replace</code> with a list.</p>\n\n<p>If you really want to use <code>readlines</code>, you should know that it doesn't remove the newline character from the end, you'll have to do it yourself.</p>\n\n<pre><code>lines = [line.rstrip('\\n') for line in t.readlines()]\n</code></pre>\n\n<p>But still, after removing the newline character yourself from the end of each line, you'll have a list of lines. And from the question, it looks like, you only have one line, you can just access first line <code>lines[0]</code>.</p>\n\n<p>Or you can just leave out <code>readlines</code>, and just use <code>read</code>, it'll read all of the contents from the file. And then just do <code>rstrip</code>.</p>\n\n<pre><code>contents = t.read().rstrip('\\n')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 10587057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff297a4081a475da78e663c3475bf8e?s=128&d=identicon&r=PG&f=1", "display_name": "user6f6e65", "link": "https://stackoverflow.com/users/10587057/user6f6e65"}, "is_accepted": false, "score": 1, "last_activity_date": 1541022587, "creation_date": 1541022587, "answer_id": 53092441, "question_id": 53092003, "link": "https://stackoverflow.com/questions/53092003/replace-words-in-list-that-later-will-be-used-in-variable/53092441#53092441", "title": "Replace words in list that later will be used in variable", "body": "<h2>Where you went wrong...</h2>\n\n<p><code>file.readlines()</code> in python returns an array (collection or grouping of the same variable type) of the lines in the file -- arrays in python are called lists. you, here are treating the list as a string. you must first target the string inside it, then apply that string-only function.</p>\n\n<p>In this case however, this would not work as you are trying to change the way the python interpretter has displayed it for one to understand.</p>\n\n<h3>Further information...</h3>\n\n<p>In code it would not be a string - we just can't easily understand the stack, heap and memory addresses easily. The example below would work for <em>any</em> number of lines (but it will only print the first element) you will need to change that and</p>\n\n<h3><em>this</em> may be useful...</h3>\n\n<p>you could perhaps make the variables globally available (so that other parts of the program can read them </p>\n\n<h3>more useless stuff</h3>\n\n<p>before they go out of scope - the word used to mean the points at which the interpreter (what runs the program) believes the variable is useful - so that it can remove it from memory, or in much larger programs only worry about the locality of variables e.g. when using for loops i is used a lot without scope there would need to be a different name for each variable in the whole project. scopes however get specialised (meaning that if a scope contains the re-declaration of a variable this would fail as it is already seen as being one. an easy way to understand this might be to think of them being branches and the connections between the tips of branches. they don't touch along with their variables.</p>\n\n<h1>solution?</h1>\n\n<h2>e.g:</h2>\n\n<pre><code>with open(logfilenavn, 'r') as file:\n  lines = file.readlines() # creates a list\n  # an in-line for loop that goes through each item and takes off the last character: \\n - the newline character\n  #this will work with any number of lines\n  strippedLines = [line[:-1] for line in lines]\n  #or\n  strippedLines = [line.replace('\\n', '') for line in lines]\n  #you can now print the string stored within the list\n  print(strippedLines[0]) # this prints the first element in the list\n</code></pre>\n\n<p>I hope this helped!</p>\n"}], "owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 53092084, "answer_count": 6, "score": 1, "last_activity_date": 1542773680, "creation_date": 1541020199, "last_edit_date": 1541020324, "question_id": 53092003, "link": "https://stackoverflow.com/questions/53092003/replace-words-in-list-that-later-will-be-used-in-variable", "title": "Replace words in list that later will be used in variable", "body": "<p>I have a file which currently stores a string <code>eeb39d3e-dd4f-11e8-acf7-a6389e8e7978</code>\nwhich I am trying to pass into as a variable to my subprocess command.</p>\n\n<p>My current code looks like this</p>\n\n<pre><code>with open(logfilnavn, 'r') as t:\n                test = t.readlines()\n                print(test)  \n</code></pre>\n\n<p>But this prints <code>['eeb39d3e-dd4f-11e8-acf7-a6389e8e7978\\n']</code> and I don't want the part with <strong>['\\n']</strong> to be passed into my command, so i'm trying to remove them by using replace. </p>\n\n<pre><code> with open(logfilnavn, 'r') as t:\n            test = t.readlines()\n            removestrings = test.replace('[', '').replace('[', '').replace('\\\\', '').replace(\"'\", '').replace('n', '')\n            print(removestrings)    \n</code></pre>\n\n<p>I get an exception value saying this so how can I replace these with nothing and store them as a string for my subprocess command?</p>\n\n<blockquote>\n  <p>'list' object has no attribute 'replace'</p>\n</blockquote>\n\n<p>so how can I replace these with nothing and store them as a string for my subprocess command?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1541020609, "post_id": 53091986, "comment_id": 93080903, "body": "So that is your goal. What did you try? Please try to avoid the impression of &quot;Requirements. Give code.&quot;"}, {"owner": {"reputation": 1125, "user_id": 10553098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a00fb2d5007c1e5c1adb45aadfb37246?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10553098/john"}, "edited": false, "score": 0, "creation_date": 1541021007, "post_id": 53091986, "comment_id": 93081068, "body": "Please clarify what you&#39;re asking for.  Do you want to check the value of every 4th element?  You could easily loop through them with range(i,len(list),4) where i is in [0, 1, 2, 3]"}], "answers": [{"tags": [], "owner": {"reputation": 1120, "user_id": 10559142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bFP50.jpg?s=128&g=1", "display_name": "Berthur", "link": "https://stackoverflow.com/users/10559142/berthur"}, "is_accepted": false, "score": 1, "last_activity_date": 1541021053, "creation_date": 1541021053, "answer_id": 53092163, "question_id": 53091986, "link": "https://stackoverflow.com/questions/53091986/how-can-i-check-the-format-of-every-n-consecutive-elements-in-a-list/53092163#53092163", "title": "How can I check the format of every n consecutive elements in a list", "body": "<p>Since you're not posting any attempt, I'm not going to give you any full solution, but one hint that you might find useful:</p>\n\n<pre><code>for i in range(0,len(list),3):\n    print(list[i])\n</code></pre>\n\n<p>This code will iterate through every fourth element in your list. Perhaps from here you can think about how to do the check you want and how to perform the inputs you wanted. (Watch out though if you are increasing the length of the list while iterating through it, you may want to manipulate the iteration variable as well).</p>\n\n<p>Of course, there are countless other ways of approaching this task.</p>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "is_accepted": true, "score": 1, "last_activity_date": 1541021126, "creation_date": 1541021126, "answer_id": 53092174, "question_id": 53091986, "link": "https://stackoverflow.com/questions/53091986/how-can-i-check-the-format-of-every-n-consecutive-elements-in-a-list/53092174#53092174", "title": "How can I check the format of every n consecutive elements in a list", "body": "<p>it looks like you're trying to move items within a list.</p>\n\n<p>This answer should help you</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3173154/move-an-item-inside-a-list\">Move an item inside a list?</a></p>\n\n<p>So it seems like you'll have to use </p>\n\n<pre><code>insert() and pop()\n</code></pre>\n\n<p>to deliver what you need. </p>\n\n<p>For the algorithm itself, modulo will be useful since we know that:</p>\n\n<pre><code>if index % 4 == 0 AND contains \"start\"\n  if i + 1 AND i + 2 contains \"/\"\n</code></pre>\n\n<p>Cheers!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7496277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 53092174, "answer_count": 2, "score": 0, "last_activity_date": 1541021126, "creation_date": 1541020086, "question_id": 53091986, "link": "https://stackoverflow.com/questions/53091986/how-can-i-check-the-format-of-every-n-consecutive-elements-in-a-list", "title": "How can I check the format of every n consecutive elements in a list", "body": "<p>For example say I have a list of 20 elements and I want to check that every 4 consecutive elements follow a pattern. Consider the following:</p>\n\n<p><code>list = [\"start1\", \"1/2\". \"3/4\", \"end1\"]</code></p>\n\n<p>I want to make sure every 4th element starting from <code>list[0]</code> contains \"start\" and that every 4th element starting from <code>list[1]</code> and <code>list[2]</code> contain a \"/\". If not I'd like to input a placeholder <code>\" \"</code> for example:</p>\n\n<p>I would like list2:</p>\n\n<p><code>list2 = [\"start1\", \"1/2\", \"end1\"]</code> </p>\n\n<p>To become:</p>\n\n<p><code>list3 = [\"start1\", \"1/2\", \" \", \"end1\"]</code> </p>\n"}, {"tags": ["python", "python-3.x", "path", "pypdf2"], "comments": [{"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541021214, "post_id": 53091960, "comment_id": 93081133, "body": "either use forward slashes (they&#39;ve been supported in windows for a while) or double escape them (i.e. <code>&#39;C:\\\\Users\u2026&#39;</code>)  <a href=\"https://stackoverflow.com/questions/2953834/windows-path-in-python\" title=\"windows path in python\">stackoverflow.com/questions/2953834/windows-path-in-python</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10587997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187eb02d61607371155c52508606993f?s=128&d=identicon&r=PG&f=1", "display_name": "kasturi76", "link": "https://stackoverflow.com/users/10587997/kasturi76"}, "edited": false, "score": 0, "creation_date": 1541125881, "post_id": 53092192, "comment_id": 93118887, "body": "Yes, It worked, but also I need to add .pdf at the end of file name."}, {"owner": {"reputation": 1137, "user_id": 2154065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33efa86b1be8c3595c13acb2853d6d03?s=128&d=identicon&r=PG", "display_name": "user2154065", "link": "https://stackoverflow.com/users/2154065/user2154065"}, "reply_to_user": {"reputation": 25, "user_id": 10587997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187eb02d61607371155c52508606993f?s=128&d=identicon&r=PG&f=1", "display_name": "kasturi76", "link": "https://stackoverflow.com/users/10587997/kasturi76"}, "edited": false, "score": 0, "creation_date": 1541249555, "post_id": 53092192, "comment_id": 93156560, "body": "Of course the file paths must be correct. :-) I am glad I could help you out. I would be very happy, if you would accept my answer as the correct one."}], "tags": [], "owner": {"reputation": 1137, "user_id": 2154065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33efa86b1be8c3595c13acb2853d6d03?s=128&d=identicon&r=PG", "display_name": "user2154065", "link": "https://stackoverflow.com/users/2154065/user2154065"}, "is_accepted": true, "score": 1, "last_activity_date": 1541021607, "last_edit_date": 1541021607, "creation_date": 1541021207, "answer_id": 53092192, "question_id": 53091960, "link": "https://stackoverflow.com/questions/53091960/address-path-issues-while-opening-a-pdf-file-in-python/53092192#53092192", "title": "Address path issues while opening a pdf file in python", "body": "<p>The Problem with your string is not that it contains spaces. The problem is the <code>\\U</code> in it.</p>\n\n<p>The backslash is the escape character in the string, initiating \"special chars in a string, that cannot be entered directly, like linebreaks. E.g. is \\U the beginning of the declaration of an unicode character, like <code>\\U00001234</code>.</p>\n\n<p>To use a backslash in a string, use two backlashes, like so:</p>\n\n<pre><code>red_ball = open('C:\\\\Users\\\\laxmi prasad\\\\Desktop\\\\Neeraj Kasturi_mystery','rb')\n</code></pre>\n\n<p>Or you can use so called raw strings, by adding an <code>r</code> before the string literal, like so:</p>\n\n<pre><code>red_ball = open(r'C:\\Users\\laxmi prasad\\Desktop\\Neeraj Kasturi_mystery','rb')\n</code></pre>\n\n<p>You can use forward slashes instead of the backslashes, but then you cannot simply copy and paste paths on Windows Systems, e.g. between Explorer and Python code.</p>\n\n<p>This applies to many programming languages, not only python.</p>\n"}], "owner": {"reputation": 25, "user_id": 10587997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187eb02d61607371155c52508606993f?s=128&d=identicon&r=PG&f=1", "display_name": "kasturi76", "link": "https://stackoverflow.com/users/10587997/kasturi76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 53092192, "answer_count": 1, "score": 1, "last_activity_date": 1541021607, "creation_date": 1541019982, "question_id": 53091960, "link": "https://stackoverflow.com/questions/53091960/address-path-issues-while-opening-a-pdf-file-in-python", "title": "Address path issues while opening a pdf file in python", "body": "<p>I am trying to open a pdf file using <strong>python</strong> in <strong>jupyter</strong> notebook which is on desktop and the path is something like this: C:\\Users\\laxmi prasad\\Desktop\\ and it's showing error. </p>\n\n<pre><code>   import PyPDF2\n   red_ball = open('C:\\Users\\laxmi prasad\\Desktop\\Neeraj Kasturi_mystery','rb')\n</code></pre>\n\n<p>and the error it shows is</p>\n\n<pre><code>    File \"&lt;ipython-input-5-565b4f1ccaec&gt;\", line 1\n    red_ball = open('C:\\Users\\laxmiprasad\\Desktop\\Neeraj Kasturi_mystery','rb')\n                 ^\n    SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in \n    position 2-3: truncated \\UXXXXXXXX escape\n</code></pre>\n\n<p>I think it's the space between inside the path between two words, but that's the folder name. Can anyone help me understand this issue ?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1379, "user_id": 905924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySorr.jpg?s=128&g=1", "display_name": "opalczynski", "link": "https://stackoverflow.com/users/905924/opalczynski"}, "edited": false, "score": 2, "creation_date": 1541020441, "post_id": 53091958, "comment_id": 93080838, "body": "You can write your own manager, and add it in the Events model, you can read it here: <a href=\"https://docs.djangoproject.com/en/2.1/topics/db/managers/\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.1/topics/db/managers</a>  you can also write somewhere in your code: events_qs = Events.objects.filter(event_type=&quot;the_type&quot;)  and start each query: events_qs.etc(...).etc(...)"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1541020411, "creation_date": 1541020411, "answer_id": 53092043, "question_id": 53091958, "link": "https://stackoverflow.com/questions/53091958/modify-objects-to-always-return-a-subset-of-objects/53092043#53092043", "title": "modify `objects` to *always* return a subset of objects?", "body": "<p>Yes, we can make a manager like:</p>\n\n<pre><code>from django.db import models\n\nclass EventManager(models.Manager):\n\n    def get_queryset(self):\n        return super(EventManager, self).get_queryset().filter(event_type=\"the_type\")</code></pre>\n\n<p>and then add the manager to the <code>Event</code> class:</p>\n\n<pre><code>class Event(models.Model):\n\n    # ...\n\n    objects = EventManager()</code></pre>\n\n<p>Note however that some parts of Django will <em>not</em> use <code>.objects</code>, but <a href=\"https://docs.djangoproject.com/en/2.1/topics/db/managers/#django.db.models.Model._base_manager\" rel=\"nofollow noreferrer\"><code>._base_manager</code></a>, and thus still return the entire set. Furthermore my own experience with overriding the <code>.objects</code> manager is that it turns out to cause a lot of harm, for example if you want to set an attribute of <em>all</em> events, then writing <code>Event.objects.all().update(foo='bar')</code> will only update the events with <code>the_type</code> as type, whereas the code suggests otherwise.</p>\n\n<p>Personally I think it is better to construct a manager with a different name, that at least hints that something is filtered, for example:</p>\n\n<pre><code>class Event(models.Model):\n\n    # ...\n\n    all_events = models.Manager()\n    type_events = EventManager()</code></pre>\n\n<p>here <code>Event.objects</code> no longer exist, but you write <code>Event.all_events</code>, or <code>Event.type_events</code>, and thus the code clearly hints what subset you take.</p>\n"}], "owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53092043, "answer_count": 1, "score": 1, "last_activity_date": 1541020411, "creation_date": 1541019971, "last_edit_date": 1541020150, "question_id": 53091958, "link": "https://stackoverflow.com/questions/53091958/modify-objects-to-always-return-a-subset-of-objects", "title": "modify `objects` to *always* return a subset of objects?", "body": "<p>I have an <code>Events</code> table which contains various types of events. I care only about one of those types. As a result, <em>every query</em> I write begins with </p>\n\n<pre><code>Events.objects.filter(event_type=\"the_type\").\\\n       etc(...).etc(...)`. \n</code></pre>\n\n<p>Obviously this is repetitive and easy to forget. Is there a way to use a custom <code>Manager</code> so that the <code>objects</code> attribute <em>always</em> returns a specific subset of the rows, without explicitly asking for it? Or any other way to restrict the model to specific subset of the rows??</p>\n"}, {"tags": ["python", "html", "django", "url", "django-templates"], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 10493488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb3aa68836be4c215324dc3fd47262a?s=128&d=identicon&r=PG&f=1", "display_name": "lucasrf27", "link": "https://stackoverflow.com/users/10493488/lucasrf27"}, "edited": false, "score": 0, "creation_date": 1541020673, "post_id": 53092057, "comment_id": 93080927, "body": "what about dream = get_object_or_404(Dreams, pk=Dreams_id) and: return render(request, &#39;detail.html&#39;, {&#39;dream&#39;: dream})"}, {"owner": {"reputation": 1206, "user_id": 9504370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Carl Brubaker", "link": "https://stackoverflow.com/users/9504370/carl-brubaker"}, "reply_to_user": {"reputation": 150, "user_id": 10493488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb3aa68836be4c215324dc3fd47262a?s=128&d=identicon&r=PG&f=1", "display_name": "lucasrf27", "link": "https://stackoverflow.com/users/10493488/lucasrf27"}, "edited": false, "score": 0, "creation_date": 1541021254, "post_id": 53092057, "comment_id": 93081145, "body": "<code>Dream != dream</code>. Python is case sensitive. What&#39;s inside the quotes of the context it the name used in the template."}, {"owner": {"reputation": 150, "user_id": 10493488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb3aa68836be4c215324dc3fd47262a?s=128&d=identicon&r=PG&f=1", "display_name": "lucasrf27", "link": "https://stackoverflow.com/users/10493488/lucasrf27"}, "edited": false, "score": 0, "creation_date": 1541022558, "post_id": 53092057, "comment_id": 93081606, "body": "yeah it worked thank you so much, im getting a problem with no wich found but im gonna try to solve it . Again thank you so much, Carl;"}, {"owner": {"reputation": 1206, "user_id": 9504370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Carl Brubaker", "link": "https://stackoverflow.com/users/9504370/carl-brubaker"}, "reply_to_user": {"reputation": 150, "user_id": 10493488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb3aa68836be4c215324dc3fd47262a?s=128&d=identicon&r=PG&f=1", "display_name": "lucasrf27", "link": "https://stackoverflow.com/users/10493488/lucasrf27"}, "edited": false, "score": 0, "creation_date": 1541022639, "post_id": 53092057, "comment_id": 93081631, "body": "Same problem. You don&#39;t send &#39;wich&#39; in the context"}], "tags": [], "owner": {"reputation": 1206, "user_id": 9504370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Carl Brubaker", "link": "https://stackoverflow.com/users/9504370/carl-brubaker"}, "is_accepted": true, "score": 2, "last_activity_date": 1541020512, "creation_date": 1541020512, "answer_id": 53092057, "question_id": 53091937, "link": "https://stackoverflow.com/questions/53091937/noreversematch-after-include-favorite-button/53092057#53092057", "title": "NoReverseMatch after include Favorite button", "body": "<p>You never send <code>Dreams</code> to your <code>form</code> from your <code>view</code>, therefore <code>Dreams.id</code> doesn't exist. Try <code>dream.id</code> in your template.</p>\n"}], "owner": {"reputation": 150, "user_id": 10493488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb3aa68836be4c215324dc3fd47262a?s=128&d=identicon&r=PG&f=1", "display_name": "lucasrf27", "link": "https://stackoverflow.com/users/10493488/lucasrf27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 53092057, "answer_count": 1, "score": 0, "last_activity_date": 1541020512, "creation_date": 1541019848, "question_id": 53091937, "link": "https://stackoverflow.com/questions/53091937/noreversematch-after-include-favorite-button", "title": "NoReverseMatch after include Favorite button", "body": "<p>first of all thanks for attention.\ni'm pretty new at django framework, and following a tutorial. although i when i tried to include a input button for favorites on my detail.html i got this error:</p>\n\n<p>Error during template rendering\nIn template C:\\Users\\leo8\\Desktop\\Lucas\\c2view03\\webdeve\\templates\\detail.html, error at line 8</p>\n\n<p>Reverse for 'favorites' with arguments '('',)' not found. 1 pattern(s) tried: </p>\n\n<p>['webdeve/(?P[0-9]+)/favorites/$']</p>\n\n<pre><code>1   &lt;img src=\"{{ dream.imagem }}\"&gt;\n2   &lt;h2&gt;{{ dream.titulo }} {{ dream.objetivo }}&lt;/h2&gt;\n3   \n4   {% if error_message %}\n5       &lt;p&gt;&lt;strong&gt;{{ error_message }}&lt;/strong&gt;&lt;/p&gt;\n6   {% endif %}\n7   \n8   &lt;form action=\"{% url 'webdeve:favorites' Dreams.id %}\" method=\"post\"&gt;\n9       {% csrf_token %}\n10      {% for wich in dream.wich_set.all %}\n11          &lt;input type=\"radio\" id=\"wich{{ forloop.counter }}\" name=\"wich\" value=\"{{ titulo.id }}\"/&gt;\n12          &lt;label for=\"wich{{ forloop.counter }}\"&gt;\n13              {{ wich.make }}\n14              {% if wich.favorites %}\n15                  &lt;img src=\"https://cdn2.iconfinder.com/data/icons/aspneticons_v1.0_Nov2006/add_16x16.gif\" /&gt;\n16              {% endif %}\n17          &lt;/label&gt;&lt;br&gt;\n18      {% endfor %}\n</code></pre>\n\n<p>Those are my views:</p>\n\n<pre><code>from .models import Dreams, Wich\nfrom django.shortcuts import render, get_object_or_404\n\napp_name = 'webdeve'\n\n\ndef index(request):\n    all_dreams = Dreams.objects.all()\n    contexto = {'all_dreams': all_dreams}\n    return render(request, 'index.html', contexto)\n\n\ndef detail(request, Dreams_id):\n    #dream = Dreams.objects.get(pk=Dreams_id)\n    dream = get_object_or_404(Dreams, pk=Dreams_id)\n    return render(request, 'detail.html', {'dream': dream})\n\n\ndef favorites(request, Dreams_id):\n    dream = get_object_or_404(Dreams, pk=Dreams_id)\n    try:\n        selected_wich = dream.wich_set.get(pk=request.POST['make'])\n    except (KeyError, Wich.DoesNotExist):\n        return render(request, 'detail.html', {\n            'dream': dream,\n            'error_message': \"no wich selected\"\n        })\n    else:\n        selected_wich.favorites = True\n        selected_wich.save()\n        return render(request, 'detail.html', {'dream': dream})\n</code></pre>\n\n<p>and myapp.urls</p>\n\n<pre><code>from django.conf.urls import url\nfrom webdeve import views\n\napp_name = 'webdeve'\n\n# Dreams\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n\n# Dreams/detail\n\n    url(r'^(?P&lt;Dreams_id&gt;[0-9]+)/$', views.detail, name='detail'),\n\n# Dreams/detail/favoriteS\n\n    url(r'^(?P&lt;Dreams_id&gt;[0-9]+)/favorites/$', views.favorites, name='favorites'),\n]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "ansible", "uri"], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 1020234, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8809d69db6811839029a3c0e7e511137?s=128&d=identicon&r=PG", "display_name": "TravisThomas", "link": "https://stackoverflow.com/users/1020234/travisthomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1541019644, "creation_date": 1541019644, "answer_id": 53091902, "question_id": 53091901, "link": "https://stackoverflow.com/questions/53091901/how-do-i-avoid-ansible-dependency-on-specific-python-version/53091902#53091902", "title": "How do I avoid Ansible dependency on specific Python version?", "body": "<p>Which python is invoked is controlled in two places. The first is ansible.cfg:</p>\n\n<p><code>ansible_python_interpreter = /usr/bin/python</code></p>\n\n<p>That set the local python executable environment to /usr/bin/python. Additionally, I was able to set the python executable on the managed nodes through an inventory variable:</p>\n\n<p><code>[managers:vars]\nansible_python_interpreter=/usr/bin/python3\n</code></p>\n"}], "owner": {"reputation": 541, "user_id": 1020234, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8809d69db6811839029a3c0e7e511137?s=128&d=identicon&r=PG", "display_name": "TravisThomas", "link": "https://stackoverflow.com/users/1020234/travisthomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1737, "favorite_count": 0, "accepted_answer_id": 53091902, "answer_count": 1, "score": 0, "last_activity_date": 1541019644, "creation_date": 1541019644, "question_id": 53091901, "link": "https://stackoverflow.com/questions/53091901/how-do-i-avoid-ansible-dependency-on-specific-python-version", "title": "How do I avoid Ansible dependency on specific Python version?", "body": "<p>I'm porting some playbooks from Python 2 to Python 3. In this, a play was invoking the URI module and it was making a confusing invocation directly to /usr/bin/python: (with -vvv)</p>\n\n<pre><code>Using module file /usr/local/lib/python3.5/dist- \npackages/ansible/modules/net_tools/basics/uri.py\n&lt;10.216.247.143&gt; ESTABLISH LOCAL CONNECTION FOR USER: root\n&lt;10.216.247.143&gt; EXEC /bin/sh -c '/usr/bin/python &amp;&amp; sleep 0'\n</code></pre>\n\n<p>I'm trying to execute this playbook in an environment without python 2 installed, therefore this fails. How do I make the URI module use python3?</p>\n"}, {"tags": ["python", "curl", "http-post", "pycurl"], "answers": [{"tags": [], "owner": {"reputation": 6509, "user_id": 356011, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d17ff41be1044be6fb5ef186b83efb20?s=128&d=identicon&r=PG", "display_name": "marathon", "link": "https://stackoverflow.com/users/356011/marathon"}, "is_accepted": true, "score": 0, "last_activity_date": 1541023996, "creation_date": 1541023996, "answer_id": 53092675, "question_id": 53091878, "link": "https://stackoverflow.com/questions/53091878/from-curl-to-pycurl-how-to-make-a-mutli-part-post-works-with-curl-fails-wit/53092675#53092675", "title": "from curl to pycurl - how to make a mutli-part post - works with curl, fails with 422 with pycurl", "body": "<p>Figured it out.</p>\n\n<p>Instead of separate setopt calls for the form data, like this</p>\n\n<pre><code>c.setopt(c.HTTPPOST, [('package[package_file]', (c.FORM_FILE, '/tmp/myfile.bin'))])\nc.setopt(c.HTTPPOST, [('package[distro_version_id]',  '1')])\n</code></pre>\n\n<p>It needs to be together in a single structure, like this</p>\n\n<pre><code>data = [\n    ('package[distro_version_id]', '1'),\n    ('package[package_file]', (\n        c.FORM_FILE, '/tmp/myfile.bin,\n        c.FORM_CONTENTTYPE, 'application/octet-stream'\n    ))]\nc.setopt(c.HTTPPOST, data)\n</code></pre>\n"}], "owner": {"reputation": 6509, "user_id": 356011, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d17ff41be1044be6fb5ef186b83efb20?s=128&d=identicon&r=PG", "display_name": "marathon", "link": "https://stackoverflow.com/users/356011/marathon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 53092675, "answer_count": 1, "score": 0, "last_activity_date": 1541023996, "creation_date": 1541019542, "question_id": 53091878, "link": "https://stackoverflow.com/questions/53091878/from-curl-to-pycurl-how-to-make-a-mutli-part-post-works-with-curl-fails-wit", "title": "from curl to pycurl - how to make a mutli-part post - works with curl, fails with 422 with pycurl", "body": "<p>I have a cURL post that works fine:</p>\n\n<pre><code>curl -X POST http://some-server.com/working_endpoint-F \"package[distro_version_id]=1\" -F \"package[package_file]=@/tmp/myfile.bin\" \n</code></pre>\n\n<p>When I try to translate this into pycurl, the request fails with 422  Unprocessable Entity, with the server saying <code>package[package_file]</code> \"must be multipart form-data\"</p>\n\n<pre><code>import pycurl\nc = pycurl.Curl()\nc.setopt(pycurl.VERBOSE, 1)\nc.setopt(c.URL, 'http://some-server.com/working_endpoint')\nc.setopt(c.POST, 1)\nc.setopt(c.HTTPPOST, [('package[package_file]', (c.FORM_FILE, '/tmp/myfile.bin'))])\nc.setopt(c.HTTPPOST, [('package[distro_version_id]',  '1')])\nc.perform()\n</code></pre>\n\n<p>Indeed the headers look like only the one parameter is going into the multipart form</p>\n\n<p><code>\nContent-Length: 165\nContent-Type: multipart/form-data; boundary=------------------------dee07c93fad525aa\n</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "utf-8", "ftp", "decode", "ftplib"], "answers": [{"tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": true, "score": 1, "last_activity_date": 1541076872, "creation_date": 1541076872, "answer_id": 53101719, "question_id": 53091871, "link": "https://stackoverflow.com/questions/53091871/list-files-with-utf-8-characters-in-the-name-in-python-ftplib/53101719#53101719", "title": "List files with UTF-8 characters in the name in Python ftplib", "body": "<p>Assuming the filenames are in UTF-8 encoding, in Python 3, this should do:</p>\n\n<pre><code>ftp.encoding = \"UTF-8\"\nprint(ftp.nlst())\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10588115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa685377a962ffa6488c507e1eb1db6?s=128&d=identicon&r=PG&f=1", "display_name": "Franmuzzio", "link": "https://stackoverflow.com/users/10588115/franmuzzio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 1, "accepted_answer_id": 53101719, "answer_count": 1, "score": 1, "last_activity_date": 1541165094, "creation_date": 1541019509, "last_edit_date": 1541165094, "question_id": 53091871, "link": "https://stackoverflow.com/questions/53091871/list-files-with-utf-8-characters-in-the-name-in-python-ftplib", "title": "List files with UTF-8 characters in the name in Python ftplib", "body": "<p>I need to mirror files from an FTP server to a local machine, but some files/directories have special characters on it, e.g:</p>\n\n<pre><code>print(ftp.nlst())\n&gt;&gt;{'Mariana', 'Marina', 'Mart\u00c3\\xadn', 'Mat\u00c3\\xadas'}\n</code></pre>\n"}, {"tags": ["python", "itertools"], "answers": [{"tags": [], "owner": {"reputation": 918, "user_id": 2748838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33a097329bfeb159613ef6c6968ac3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rainy", "link": "https://stackoverflow.com/users/2748838/rainy"}, "is_accepted": false, "score": 0, "last_activity_date": 1541019491, "creation_date": 1541019491, "answer_id": 53091864, "question_id": 53091863, "link": "https://stackoverflow.com/questions/53091863/how-can-i-group-consecutive-time-periods-together-in-python/53091864#53091864", "title": "How can I group consecutive time periods together in python?", "body": "<p>The general idea is that we cannot directly compare item to the last item in <code>groupby()</code>, so first we need to set group index attribute on each item while looping over the list of items; then <code>groupby()</code> can use these attributes to create groups:</p>\n\n<pre><code>import itertools\nlast = None\nn = 1    \nfor period in periods:\n  if last and period.start != period.end:\n    n+=1\n  period.n = n\n  last = period\ngroups = itertools.groupby(periods, lambda p: p.n)\n# if total num of items isn't too big, for easier debugging or logging,\n# convert each subgroup iterator to a list:\ngroups = (list(g[1]) for g in groups)\n</code></pre>\n"}], "owner": {"reputation": 918, "user_id": 2748838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33a097329bfeb159613ef6c6968ac3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rainy", "link": "https://stackoverflow.com/users/2748838/rainy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541019491, "creation_date": 1541019491, "question_id": 53091863, "link": "https://stackoverflow.com/questions/53091863/how-can-i-group-consecutive-time-periods-together-in-python", "title": "How can I group consecutive time periods together in python?", "body": "<p>If I have sorted list of time periods like p1, p2, p3, each with start and end times; how can I group them together if they're consecutive, e.g. p2 starting when p1 ends, but p3 starting at some later time would result in the following grouping: [p1,p2], [p3], ...?</p>\n"}, {"tags": ["python", "python-3.x", "machine-learning", "scikit-learn", "random-forest"], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541019909, "post_id": 53091926, "comment_id": 93080660, "body": "Thank you for your answer. Yes, I also know that exists this possibility. However, isn&#39;t it a bit strange that the recall and precision almost do not alter with such different class_weights?"}, {"owner": {"reputation": 1373, "user_id": 5121457, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LL7q6xBDBlM/AAAAAAAAAAI/AAAAAAAAAB8/qRvPE3tHKk4/photo.jpg?sz=128", "display_name": "Gabriel M", "link": "https://stackoverflow.com/users/5121457/gabriel-m"}, "reply_to_user": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541019997, "post_id": 53091926, "comment_id": 93080692, "body": "maybe your test data is quite different from the training data. That could explain this kind of behaviour"}, {"owner": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541020091, "post_id": 53091926, "comment_id": 93080725, "body": "Both y_train and y_test have a mean around 0.24. I also tried other models like LightGBM and MLP using keras, and in both approaches changing the class_weight was sufficient."}, {"owner": {"reputation": 1373, "user_id": 5121457, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LL7q6xBDBlM/AAAAAAAAAAI/AAAAAAAAAB8/qRvPE3tHKk4/photo.jpg?sz=128", "display_name": "Gabriel M", "link": "https://stackoverflow.com/users/5121457/gabriel-m"}, "reply_to_user": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541020396, "post_id": 53091926, "comment_id": 93080816, "body": "Tree based methods are forced to use features as they are and they do not use linear or non linear combinations of them. So maybe good answer to your problem requires using combinations of features and the model doesn&#39;t. while MLP does"}, {"owner": {"reputation": 1373, "user_id": 5121457, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LL7q6xBDBlM/AAAAAAAAAAI/AAAAAAAAAB8/qRvPE3tHKk4/photo.jpg?sz=128", "display_name": "Gabriel M", "link": "https://stackoverflow.com/users/5121457/gabriel-m"}, "reply_to_user": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541020469, "post_id": 53091926, "comment_id": 93080848, "body": "If you want to test for this hypothesis, you can try to learn your classifier using PolinomialFeatures as input to your classifier and check if something changes"}, {"owner": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541020495, "post_id": 53091926, "comment_id": 93080855, "body": "Thank you for your answer. Really appreciate it. The strange thing though, is that the LightGBM model reacted perfectly when changing the scale_pos_weight parameter. As opposed to what is happening now with Random Forests"}, {"owner": {"reputation": 1373, "user_id": 5121457, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LL7q6xBDBlM/AAAAAAAAAAI/AAAAAAAAAB8/qRvPE3tHKk4/photo.jpg?sz=128", "display_name": "Gabriel M", "link": "https://stackoverflow.com/users/5121457/gabriel-m"}, "reply_to_user": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541021419, "post_id": 53091926, "comment_id": 93081213, "body": "There is a final possibility. That the model is overfitting and predicting classes with high confidence (probas either close to 1 or 0) even if it is wrong."}, {"owner": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "edited": false, "score": 0, "creation_date": 1541060995, "post_id": 53091926, "comment_id": 93091138, "body": "That was it! When I constrained the max_depth parameter to a low number, I then observed a huge change in the recall metric. Thank you!"}], "tags": [], "owner": {"reputation": 1373, "user_id": 5121457, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LL7q6xBDBlM/AAAAAAAAAAI/AAAAAAAAAB8/qRvPE3tHKk4/photo.jpg?sz=128", "display_name": "Gabriel M", "link": "https://stackoverflow.com/users/5121457/gabriel-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1541019955, "last_edit_date": 1541019955, "creation_date": 1541019792, "answer_id": 53091926, "question_id": 53091838, "link": "https://stackoverflow.com/questions/53091838/machine-learning-random-forests/53091926#53091926", "title": "Machine learning Random forests", "body": "<p>If you want to increase the recall of your model there is a much faster way of doing so. </p>\n\n<p>You can compute the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_recall_curve.html#sklearn.metrics.precision_recall_curve\" rel=\"nofollow noreferrer\">precision recall curve</a> using sklearn.</p>\n\n<p>This curve will give you the trade-off between precision and recall for your model.</p>\n\n<p>This means, if you want to increase your recall of your model, you could ask the random forest to retrieve you the probabilities for each class, add 0.1 to class 1 and subtract 0.1 to the probability of class 0. This will effectively increase your recall</p>\n\n<p>If you plot the precision recall curve you will be able to find the optimal threshold for equal precision and recall</p>\n\n<p>Here you have the example from sklearn</p>\n\n<pre><code>from sklearn import svm, datasets\nfrom sklearn.model_selection import train_test_split\nimport numpy as np\n\niris = datasets.load_iris()\nX = iris.data\ny = iris.target\n\n# Add noisy features\nrandom_state = np.random.RandomState(0)\nn_samples, n_features = X.shape\nX = np.c_[X, random_state.randn(n_samples, 200 * n_features)]\n\n# Limit to the two first classes, and split into training and test\nX_train, X_test, y_train, y_test = train_test_split(X[y &lt; 2], y[y &lt; 2],\n                                                    test_size=.5,\n                                                    random_state=random_state)\n\n# Create a simple classifier\nclassifier = svm.LinearSVC(random_state=random_state)\nclassifier.fit(X_train, y_train)\ny_score = classifier.decision_function(X_test)\n\nfrom sklearn.metrics import precision_recall_curve\nimport matplotlib.pyplot as plt\nfrom sklearn.utils.fixes import signature\n\nprecision, recall, _ = precision_recall_curve(y_test, y_score)\n\n# In matplotlib &lt; 1.5, plt.fill_between does not have a 'step' argument\nstep_kwargs = ({'step': 'post'}\n               if 'step' in signature(plt.fill_between).parameters\n               else {})\nplt.step(recall, precision, color='b', alpha=0.2,\n         where='post')\nplt.fill_between(recall, precision, alpha=0.2, color='b', **step_kwargs)\n\nplt.xlabel('Recall')\nplt.ylabel('Precision')\nplt.ylim([0.0, 1.05])\nplt.xlim([0.0, 1.0])\n</code></pre>\n\n<p>Which should give you something like <a href=\"http://scikit-learn.org/stable/_images/sphx_glr_plot_precision_recall_001.png\" rel=\"nofollow noreferrer\">this</a></p>\n"}, {"tags": [], "owner": {"reputation": 1298, "user_id": 4614404, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002009164083/picture?type=large", "display_name": "Victor Zuanazzi", "link": "https://stackoverflow.com/users/4614404/victor-zuanazzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1552474202, "creation_date": 1552474202, "answer_id": 55140092, "question_id": 53091838, "link": "https://stackoverflow.com/questions/53091838/machine-learning-random-forests/55140092#55140092", "title": "Machine learning Random forests", "body": "<p>As a complementary answer, you can also try to optimize your model towards one or more metrics. You can use <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.RandomizedSearchCV.html\" rel=\"nofollow noreferrer\">RandomizedSearchCV</a> to look for a good combination of hyperparameters for you. For instance, if you training a Random Forest classifier\":</p>\n\n<pre><code>#model\nMOD = RandomForestClassifier() \n#Implemente RandomSearchCV\nm_params = { \n            \"RF\": {\n                    \"n_estimators\" : np.linspace(2, 500, 500, dtype = \"int\"),  \n                    \"max_depth\": [5, 20, 30, None], \n                    \"min_samples_split\": np.linspace(2, 50, 50, dtype = \"int\"),  \n                    \"max_features\": [\"sqrt\", \"log2\",10, 20, None],\n                    \"oob_score\": [True],\n                    \"bootstrap\": [True]\n                    },\n            }\n    scoreFunction = {\"recall\": \"recall\", \"precision\": \"precision\"}\n    random_search = RandomizedSearchCV(MOD,\n                                       param_distributions = m_params[model], \n                                       n_iter = 20,\n                                       scoring = scoreFunction,               \n                                       refit = \"recall\",\n                                       return_train_score = True,\n                                       random_state = 42,\n                                       cv = 5,\n                                        verbose = 1 + int(log)) \n\n    #trains and optimizes the model\n    random_search.fit(x_train, y_train)\n\n    #recover the best model\n    MOD = random_search.best_estimator_\n</code></pre>\n\n<p>Note that the parameters scoring and refit will tell the RandomizedSerachCV which metrics you are most interested in maximizing. This method will also save you the time of hand tuning (and potentially overfitting your model on your test data). </p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 314, "user_id": 9805655, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250530484957885/picture?type=large", "display_name": "Miguel Lambelho", "link": "https://stackoverflow.com/users/9805655/miguel-lambelho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 1, "accepted_answer_id": 53091926, "answer_count": 2, "score": 1, "last_activity_date": 1552474202, "creation_date": 1541019370, "last_edit_date": 1541061040, "question_id": 53091838, "link": "https://stackoverflow.com/questions/53091838/machine-learning-random-forests", "title": "Machine learning Random forests", "body": "<p>I am trying to fit a random forest classifier on an imbalanced dataset using the scikit-learn Python library.</p>\n\n<p>My goal is to obtain more or less the same value for recall and precision, and to do so, I am using the class_weight parameter of the RandomForestClassifier function. </p>\n\n<p>When fitting the Random Forest with a class_weight = {0:1, 1:1}, (in other words, assuming the dataset is not imbalanced), I obtain:</p>\n\n<p>Accuracy: 0.79\nPrecision: 0.63\nRecall: 0.32\nAUC: 0.74</p>\n\n<p>When I change the class_weight to {0:1, 1:10}, I obtain:</p>\n\n<p>Accuracy: 0.79\nPrecision: 0.65\nRecall: 0.29\nAUC: 0.74</p>\n\n<p>So, the recall and precision values almost have not changed (even if I increase from 10 to 100, the changes are minimal).</p>\n\n<p>Since the X_train and X_test are both imbalanced in the same proportions (the dataset has more than 1 million rows), shouldn't I obtain very different recall and precision values when using the class_weight = {0:1, 1:10}?</p>\n"}, {"tags": ["python", "python-3.x", "class", "object", "save"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1541020002, "post_id": 53091827, "comment_id": 93080694, "body": "&quot;Using pickle to save the object (class instance) for use in any file did not work.&quot; What does &quot;did not work&quot; mean? What <i>exactly</i> did you try to do, and how, <i>exactly</i> did it not work? What does it mean to say you want to save an object &quot;for use in any file?&quot;"}, {"owner": {"reputation": 368, "user_id": 10401887, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJWv6dZQIks/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV-gxv3VgTXAScYhDRa3E3jeuzILA/mo/photo.jpg?sz=128", "display_name": "Bas Velden", "link": "https://stackoverflow.com/users/10401887/bas-velden"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1541020247, "post_id": 53091827, "comment_id": 93080772, "body": "@juanpa.arrivillaga When I loaded it, it would run the program from the start. In stead of just getting the instance with already assigned values"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1541020323, "post_id": 53091827, "comment_id": 93080800, "body": "That doesn&#39;t make any sense. Please provide more details about <i>exactly</i> what you are doing. What do you mean &quot;when I loaded it&quot;? What did you load, the pickle file? How? It ran <i>what program</i> from the start? What does that even mean? What program?"}, {"owner": {"reputation": 368, "user_id": 10401887, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJWv6dZQIks/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV-gxv3VgTXAScYhDRa3E3jeuzILA/mo/photo.jpg?sz=128", "display_name": "Bas Velden", "link": "https://stackoverflow.com/users/10401887/bas-velden"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1541021018, "post_id": 53091827, "comment_id": 93081072, "body": "@juanpa.arrivillaga I have edited the post with more details."}, {"owner": {"reputation": 2633, "user_id": 10325516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a871508c4a10eab1ae0f2c90583b9?s=128&d=identicon&r=PG&f=1", "display_name": "Poolka", "link": "https://stackoverflow.com/users/10325516/poolka"}, "edited": false, "score": 0, "creation_date": 1541056250, "post_id": 53091827, "comment_id": 93089385, "body": "It is very unclear what your problem really is. You have not provided the code. Looks like you use pickle in some erroneous way - probably you do not save the actual data. More detailed answer hardly possible without details from you."}], "owner": {"reputation": 368, "user_id": 10401887, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJWv6dZQIks/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV-gxv3VgTXAScYhDRa3E3jeuzILA/mo/photo.jpg?sz=128", "display_name": "Bas Velden", "link": "https://stackoverflow.com/users/10401887/bas-velden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541027565, "creation_date": 1541019327, "last_edit_date": 1541027565, "question_id": 53091827, "link": "https://stackoverflow.com/questions/53091827/save-object-with-attributes-for-use-in-any-file", "title": "Save object with attributes for use in any file", "body": "<p>I have a program performing a Monte Carlo Tree Search for chess. Using pickle to save the object (class instance) and loading it in some file would run the program (MCTS) the same as where I stored the object, from the start. In essence copying the program in stead of getting the object with values in the state it was before written to a .pkl file. </p>\n\n<p>what i did: </p>\n\n<p><code>with open('chess_agent.pkl', 'rb') as data:\n       agent = _pickle.load(data)</code></p>\n\n<p>It would just run the MCTS exactly the same as the file where I saved the object. I need to just get the instance with the values gotten in the file where I saved it.</p>\n\n<p>how i saved:</p>\n\n<p><code>with open('chess_agent.pkl', 'wb') as f:\n    _pickle.dump(Object, f)</code></p>\n\n<p>Since the object has so many values and objects connected with it and if the MCTS has been running for a while, it would be a shame to lose all progress if for any reason the program stops running.</p>\n"}, {"tags": ["python", "python-3.x", "opengl", "3d", "pyglet"], "answers": [{"comments": [{"owner": {"reputation": 312, "user_id": 4436022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-6D6mYmP-J-k/AAAAAAAAAAI/AAAAAAAAAYQ/Vr3TfwpQaTg/photo.jpg?sz=128", "display_name": "Yuriy Leonov", "link": "https://stackoverflow.com/users/4436022/yuriy-leonov"}, "edited": false, "score": 0, "creation_date": 1541021076, "post_id": 53091985, "comment_id": 93081084, "body": "But <code>GL_DEPTH_TEST</code> will break images with &quot;alpha&quot; layer :( Which value has effect for <code>z</code> axis same as &quot;GL_DEPTH_TEST&quot; and will keep &quot;apla&quot; transparency?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 312, "user_id": 4436022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-6D6mYmP-J-k/AAAAAAAAAAI/AAAAAAAAAYQ/Vr3TfwpQaTg/photo.jpg?sz=128", "display_name": "Yuriy Leonov", "link": "https://stackoverflow.com/users/4436022/yuriy-leonov"}, "edited": false, "score": 0, "creation_date": 1541021420, "post_id": 53091985, "comment_id": 93081216, "body": "@YuriyLeonov In this case you have to respect the drawing order. The red image has to be drawn after the blue one."}, {"owner": {"reputation": 312, "user_id": 4436022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-6D6mYmP-J-k/AAAAAAAAAAI/AAAAAAAAAYQ/Vr3TfwpQaTg/photo.jpg?sz=128", "display_name": "Yuriy Leonov", "link": "https://stackoverflow.com/users/4436022/yuriy-leonov"}, "edited": false, "score": 0, "creation_date": 1541022729, "post_id": 53091985, "comment_id": 93081651, "body": "I&#39;ve change <code>glBlendFunc</code> on <code>glAlphaFunc(GL_GREATER, 0)</code> + added <code>glEnable(GL_ALPHA_TEST)</code> right after <code>glEnable(GL_DEPTH_TEST)</code>. Only one issue left here: if any pixel in picture contains alpha more than 0 -&gt; it will be drawn as non-transparent pixel. Pixels with <code>0</code> apha in RGBA is transparent. And I can&#39;t find way to calculate transparency as it was earlier :)"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 312, "user_id": 4436022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-6D6mYmP-J-k/AAAAAAAAAAI/AAAAAAAAAYQ/Vr3TfwpQaTg/photo.jpg?sz=128", "display_name": "Yuriy Leonov", "link": "https://stackoverflow.com/users/4436022/yuriy-leonov"}, "edited": false, "score": 0, "creation_date": 1541022927, "post_id": 53091985, "comment_id": 93081722, "body": "@YuriyLeonov Yes of course, the alpha test is not blending. The only way to mix fragments based on the alpha channel is blending. The alpha test can only  discard fragments completely, if the alpha test fails."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1541022304, "last_edit_date": 1541022304, "creation_date": 1541020080, "answer_id": 53091985, "question_id": 53091780, "link": "https://stackoverflow.com/questions/53091780/pyglet-opengl-how-to-draw-rect-in-front-of-other-based-on-z-axis/53091985#53091985", "title": "Pyglet. OpenGL. How to draw rect in front of other based on &quot;z&quot; axis", "body": "<p>You have to enable the <a href=\"https://www.khronos.org/opengl/wiki/Depth_Test\" rel=\"nofollow noreferrer\">Depth Test</a></p>\n\n<pre><code>pyglet.graphics.glEnable(pyglet.graphics.GL_DEPTH_TEST)\n</code></pre>\n\n<p>Note, the default depth function is <code>GL_LESS</code>, this cause that a fragment is discarded, if a fragment has been drawn at the same place, and the new fragment has a depth which is greater or equal than the depth of the former fragment.</p>\n\n<p>If the depth test is not enabled, then the later geometry is always drawn on top of the former.</p>\n\n<hr>\n\n<p>If you want to blend the red image over the blue one, then the depth test has to be disabled and the red image has to be drawn after the blue image. For <a href=\"https://www.khronos.org/opengl/wiki/Blending\" rel=\"nofollow noreferrer\">Blending</a> the drawing order is crucial.The later object is blended to the former by the blending function (<a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendFunc.xhtml\" rel=\"nofollow noreferrer\"><code>glBlendFunc</code></a>) and blend equation (<a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendEquation.xhtml\" rel=\"nofollow noreferrer\"><code>glBlendEquation</code></a>).<br>\nChange the order of the images: </p>\n\n<pre><code> self.add_rect(\"red.png\", x=10, y=10, z=10) \n self.add_rect(\"blue.png\", x=0, y=0, z=0)\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 4436022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-6D6mYmP-J-k/AAAAAAAAAAI/AAAAAAAAAYQ/Vr3TfwpQaTg/photo.jpg?sz=128", "display_name": "Yuriy Leonov", "link": "https://stackoverflow.com/users/4436022/yuriy-leonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 53091985, "answer_count": 1, "score": 1, "last_activity_date": 1541022304, "creation_date": 1541019079, "last_edit_date": 1541019561, "question_id": 53091780, "link": "https://stackoverflow.com/questions/53091780/pyglet-opengl-how-to-draw-rect-in-front-of-other-based-on-z-axis", "title": "Pyglet. OpenGL. How to draw rect in front of other based on &quot;z&quot; axis", "body": "<h3>Envinronment:</h3>\n\n<p>Python: 3.6.6<br>\npyglet version: 1.3.2<br>\nOS(reproduced on both): Windows 10 host, Ubuntu 14.04 guest (Virtualbox without 3d acceleration)</p>\n\n<h3>Code:</h3>\n\n<p><a href=\"https://github.com/Yuriy-Leonov/Pyglet_z_axis_issue\" rel=\"nofollow noreferrer\">code in github</a></p>\n\n<pre><code>import pyglet\n\n\nclass Window(pyglet.window.Window):\n\n    def __init__(self, *args, **kwargs):\n        super(Window, self).__init__(*args, **kwargs)\n        self.batch = pyglet.graphics.Batch()\n        self.position = [0, 0, 300.0]\n        self.vertices_list = []\n\n        # BLUE rect\n        self.add_rect(\"blue.png\", x=0, y=0, z=0)\n        # RED rect\n        self.add_rect(\"red.png\", x=10, y=10, z=10)\n        # Expects RED will be in front of BLUE, but it isn't\n        # BLUE on top regardless of z value. I tried -10/10, etc.\n\n        pyglet.clock.schedule_interval(self.move_red_forward, 1 / 60)\n\n    def add_rect(self, file_name, x, y, z):\n        image = pyglet.image.load(file_name)\n        image_grid = pyglet.image.ImageGrid(image, 1, 1)\n        texture_grid = image_grid.get_texture_sequence()\n        texture_group = pyglet.graphics.TextureGroup(texture_grid)\n        x_ = (texture_group.texture.width + x)\n        y_ = (texture_group.texture.height + y)\n        tex_coords = ('t3f', texture_grid[0].texture.tex_coords)\n\n        vert_list = self.batch.add(\n            4, pyglet.gl.GL_QUADS,\n            texture_group,\n            ('v3f', (x, y, z,\n                     x_, y, z,\n                     x_, y_, z,\n                     x, y_, z)),\n            tex_coords)\n        self.vertices_list.append(vert_list)\n\n    def move_red_forward(self, dt):\n        # move z += 1 for all corners\n        red_vertices = self.vertices_list[1].vertices\n        red_vertices[2] += 1\n        red_vertices[5] += 1\n        red_vertices[8] += 1\n        red_vertices[11] += 1\n\n    def set_3d(self):\n        width, height = self.get_size()\n        pyglet.graphics.glEnable(pyglet.graphics.GL_BLEND)\n        pyglet.graphics.glBlendFunc(\n            pyglet.graphics.GL_SRC_ALPHA,\n            pyglet.graphics.GL_ONE_MINUS_SRC_ALPHA)\n        pyglet.graphics.glViewport(0, 0, width, height)\n        pyglet.graphics.glMatrixMode(pyglet.graphics.GL_PROJECTION)\n        pyglet.graphics.glLoadIdentity()\n        pyglet.graphics.gluPerspective(90, width / height, 0.1, 6000.0)\n        pyglet.graphics.glMatrixMode(pyglet.graphics.GL_MODELVIEW)\n        pyglet.graphics.glLoadIdentity()\n        x, y, z = self.position\n        pyglet.graphics.glTranslatef(x, y, -z)\n\n    def on_draw(self):\n        self.clear()\n        self.set_3d()\n        self.batch.draw()\n\n\nif __name__ == '__main__':\n    window = Window(width=1400, height=800, caption='Pyglet', resizable=True)\n    pyglet.app.run()\n</code></pre>\n\n<h3>Issue:</h3>\n\n<p><a href=\"https://i.stack.imgur.com/cNX8S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cNX8S.png\" alt=\"part of screenshot\"></a><br>\nThe blue rect is drawn in front of the red. I expect that the <code>z</code> axis is responsible for defining which object should be drawn in front.</p>\n\n<h3>Question:</h3>\n\n<p>How I can achieve that?<br>\nOr did I miss something in the understanding of such process?</p>\n"}, {"tags": ["python", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 1125, "user_id": 10553098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a00fb2d5007c1e5c1adb45aadfb37246?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10553098/john"}, "edited": false, "score": 0, "creation_date": 1541021837, "post_id": 53091760, "comment_id": 93081361, "body": "Did you try thresholding it and then using the background subtractor on the thresholded image?"}, {"owner": {"reputation": 1, "user_id": 9899797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d09e27fe211222216d518f965533de?s=128&d=identicon&r=PG&f=1", "display_name": "Jones J", "link": "https://stackoverflow.com/users/9899797/jones-j"}, "reply_to_user": {"reputation": 1125, "user_id": 10553098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a00fb2d5007c1e5c1adb45aadfb37246?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10553098/john"}, "edited": false, "score": 0, "creation_date": 1541029993, "post_id": 53091760, "comment_id": 93083634, "body": "Honestly I haven&#39;t but I am not very sure how it would make the result differently?"}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "edited": false, "score": 3, "creation_date": 1541039417, "post_id": 53091760, "comment_id": 93085531, "body": "Assuming minimal camera motion you could try computing the mean pixel value at each frame (or maybe mean of squared pixel values). Interpreting this as a time series, when the derivative is high enough then there&#39;s probably a light coming on."}, {"owner": {"reputation": 1125, "user_id": 10553098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a00fb2d5007c1e5c1adb45aadfb37246?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10553098/john"}, "edited": false, "score": 0, "creation_date": 1541084143, "post_id": 53091760, "comment_id": 93102853, "body": "It seems as though thresholding isn&#39;t working for you because some of the background is too bright and that the background subtractor didn&#39;t work because it was picking up motion besides what you want.  Doing the two in sequence would prevent the background subtractor from picking up spurious motion unless the thing that was moving was also really bright which may or may not be a corner case that you care about."}], "owner": {"reputation": 1, "user_id": 9899797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d09e27fe211222216d518f965533de?s=128&d=identicon&r=PG&f=1", "display_name": "Jones J", "link": "https://stackoverflow.com/users/9899797/jones-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541018945, "creation_date": 1541018945, "question_id": 53091760, "link": "https://stackoverflow.com/questions/53091760/how-can-i-detect-if-there-is-any-flashor-light-source-showing-in-a-video", "title": "How can I detect if there is any flash(or light source) showing in a video\uff1f", "body": "<p>Imagine If I have a flash light turned on in any frame of my camera, I want to detect it and capture it. I thought about using image segmentation by thresholding any pixel that is above 230 to 255. However, if there is any other very bright background in the frame (greater than 230), it will also go to 255. Then I have tried using background subtractor in OpenCV to get the front mask image but it still does not help much because any change in the frame other than the flash will also be set to 255. Is there any way I can capture the flash and disregard the other irreverent background.</p>\n"}, {"tags": ["python", "google-cloud-platform", "mqtt", "paho"], "comments": [{"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541023125, "post_id": 53091702, "comment_id": 93081786, "body": "is the <code>keepalive</code> just a network/TCP level thing?  maybe you need to things higher up in the stack to force the device to stay awake\u2026"}, {"owner": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541437189, "post_id": 53091702, "comment_id": 93208277, "body": "Sorry, but I did not understand. I&#39;m just trying to follow what I found <a href=\"https://cloud.google.com/iot/docs/how-tos/mqtt-bridge#device_authentication\" rel=\"nofollow noreferrer\">in the documentation</a>."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541438154, "post_id": 53091702, "comment_id": 93208750, "body": "I don&#39;t know MQTT or Paho; but <a href=\"https://stackoverflow.com/a/48613388/1358308\">stackoverflow.com/a/48613388/1358308</a> suggests you need to make a background thread running for this to work\u2026"}, {"owner": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541441024, "post_id": 53091702, "comment_id": 93210026, "body": "Thanks, but I&#39;m using the loop approach, as shown on this <a href=\"https://github.com/GoogleCloudPlatform/python-docs-samples/blob/master/iot/api-client/mqtt_example/cloudiot_mqtt_example.py#L242\" rel=\"nofollow noreferrer\">Google&#39;s example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "edited": false, "score": 0, "creation_date": 1541436851, "post_id": 53092457, "comment_id": 93208116, "body": "Thanks for the reply and sorry for the delay. When I run the system directly from the console, my program responds immediately. The problem is when I use Google Functions to fire the iot. On the first try it takes a long time to show CONFIG on the console, after that it is fast. Running the script in Google Functions takes about 200ms. And I&#39;ve already left 2GB of resources to run as fast as possible"}, {"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "reply_to_user": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "edited": false, "score": 0, "creation_date": 1541443034, "post_id": 53092457, "comment_id": 93210838, "body": "This sounds like normal first run spin up time"}, {"owner": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "edited": false, "score": 0, "creation_date": 1541446851, "post_id": 53092457, "comment_id": 93212548, "body": "This always happens after about 20 minutes without any command sent to the device, even with it connected and running. So I guess it goes into idle mode, even with the MQTT keepalive set up."}, {"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "reply_to_user": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "edited": false, "score": 0, "creation_date": 1541447278, "post_id": 53092457, "comment_id": 93212761, "body": "Then as I said earlier it&#39;s probably the function getting swapped out and having to be spun up again."}], "tags": [], "owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "is_accepted": false, "score": 1, "last_activity_date": 1541022641, "creation_date": 1541022641, "answer_id": 53092457, "question_id": 53091702, "link": "https://stackoverflow.com/questions/53091702/google-iot-devices-going-into-idle-mode-even-with-keepalive-running/53092457#53092457", "title": "Google IoT devices going into idle mode even with KeepAlive running", "body": "<p>This is unlikely to be a result of keepalive.</p>\n\n<p>You need to look at the whole system, e.g. is the application (or just the message handler) being swapped out?</p>\n\n<p>You need to do detailed profiling on the actual device</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "edited": false, "score": 0, "creation_date": 1543347979, "post_id": 53452174, "comment_id": 93883851, "body": "Is there no way to tell IoT that it is still active without sending a message, as in a PING command?"}, {"owner": {"reputation": 379, "user_id": 10415222, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tMbEoiDsruY/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWVYG_On9deMWawinsrNcUbyMbzFA/mo/photo.jpg?sz=128", "display_name": "John Mathew", "link": "https://stackoverflow.com/users/10415222/john-mathew"}, "reply_to_user": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "edited": false, "score": 1, "creation_date": 1543423120, "post_id": 53452174, "comment_id": 93917206, "body": "As mentioned in the answer, based on the idle time limit you need to send a message or heartbeat every 20 minutes or the connection will automatically be terminated."}], "tags": [], "owner": {"reputation": 379, "user_id": 10415222, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tMbEoiDsruY/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWVYG_On9deMWawinsrNcUbyMbzFA/mo/photo.jpg?sz=128", "display_name": "John Mathew", "link": "https://stackoverflow.com/users/10415222/john-mathew"}, "is_accepted": false, "score": 0, "last_activity_date": 1543002010, "creation_date": 1543002010, "answer_id": 53452174, "question_id": 53091702, "link": "https://stackoverflow.com/questions/53091702/google-iot-devices-going-into-idle-mode-even-with-keepalive-running/53452174#53452174", "title": "Google IoT devices going into idle mode even with KeepAlive running", "body": "<p>Cloud IoT Core has its own idle time limit of 20 minutes, other than the keep-alive interval as mentioned in this <a href=\"https://cloud.google.com/iot/docs/how-tos/mqtt-bridge#idle_time_limit\" rel=\"nofollow noreferrer\">link</a>. Based on this limit, a client connection will automatically be terminated if the client doesn't send any messages for 20 minutes, even if the keep-alive interval is longer. </p>\n\n<p>If a keep-alive value is not specified, the default idle timeout of 20 minutes still takes effect. Please see this <a href=\"https://cloud.google.com/iot/quotas#time_limits\" rel=\"nofollow noreferrer\">link</a> for more information on time limit quotas on Google IoT.</p>\n"}], "owner": {"reputation": 81, "user_id": 680273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d8bfe9fe683b7695481cffe99f4fb7?s=128&d=identicon&r=PG", "display_name": "bruno", "link": "https://stackoverflow.com/users/680273/bruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1543002010, "creation_date": 1541018695, "question_id": 53091702, "link": "https://stackoverflow.com/questions/53091702/google-iot-devices-going-into-idle-mode-even-with-keepalive-running", "title": "Google IoT devices going into idle mode even with KeepAlive running", "body": "<p>After 20 minutes the devices take around 15 seconds to respond (an unacceptable time to the project). After a command, the next ones respond in a maximum of 5 seconds (an acceptable time).\nI'm using a device with Paho MQTT and connecting myself as follows: <code>client.connect (mqtt_bridge_hostname, mqtt_bridge_port, keepalive = 60)</code>\nI researched and saw that Paho sends the <code>PINGREQ</code> package for the time set by <code>keepalive</code>, so I do not understand why the system goes into idleness.</p>\n"}, {"tags": ["python", "python-2.7", "robotframework", "katalon-studio", "katalon-recorder"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 6, "creation_date": 1541020263, "post_id": 53091696, "comment_id": 93080780, "body": "This is the first search result for &quot;katalon seleniumLibrary.robot&quot;: <a href=\"https://forum.katalon.com/discussion/4216/robot-framework-issue\" rel=\"nofollow noreferrer\">forum.katalon.com/discussion/4216/robot-framework-issue</a>"}, {"owner": {"reputation": 125, "user_id": 3599856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BkYpv.jpg?s=128&g=1", "display_name": "Joe Rivera", "link": "https://stackoverflow.com/users/3599856/joe-rivera"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1541028842, "post_id": 53091696, "comment_id": 93083391, "body": "I saw that, but I already have selenium2library installed. I don\u2019t see a file called seleniumLibrary.robot on my c drive anywhere. Do I need to put the files somewhere. I\u2019m lost. Any help is appreciated."}, {"owner": {"reputation": 6256, "user_id": 6152737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33da1278c7af36224a140b18695ade6d?s=128&d=identicon&r=PG&f=1", "display_name": "A. Kootstra", "link": "https://stackoverflow.com/users/6152737/a-kootstra"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1541055907, "post_id": 53091696, "comment_id": 93089240, "body": "I would really encourage you to <i>read</i> the answer given in the link by @bryan more thoroughly. It does not say you should find it on your hard drive."}, {"owner": {"reputation": 2545, "user_id": 511908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93984c307c9fa222e14d8415458026a8?s=128&d=identicon&r=PG", "display_name": "Gleb Varenov", "link": "https://stackoverflow.com/users/511908/gleb-varenov"}, "edited": false, "score": 0, "creation_date": 1542399948, "post_id": 53091696, "comment_id": 93568846, "body": "Why are you being aggro, Kootstra? If you know the answer to the problem, just tell us. I read the link by Bryan, it is not immediately clear what to do with that file (seleniumLibrary.robot), how to connect it, etc."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10704784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4006cbd7fdaa2fce8f26d4e666112131?s=128&d=identicon&r=PG&f=1", "display_name": "Pakkanen", "link": "https://stackoverflow.com/users/10704784/pakkanen"}, "is_accepted": false, "score": 0, "last_activity_date": 1547629075, "creation_date": 1547629075, "answer_id": 54213410, "question_id": 53091696, "link": "https://stackoverflow.com/questions/53091696/katalon-export-robot-framework-issue/54213410#54213410", "title": "Katalon Export - Robot Framework Issue", "body": "<p>The settings and variables sections are mostly placeholders. You should customize these to be compatible with the development environment you have created. </p>\n\n<p>In this case the resource file <strong>seleniumLibrary.robot</strong> needs to be created in the Resources folder of your project.</p>\n\n<p>EXAMPLE FOR COMPLETELY NEW PROJECT:</p>\n\n<ol>\n<li>Create a new folder for your project</li>\n<li>Create folder named \"Resources\" in the root of your project folder </li>\n<li>Create folder named \"Testsuites\" in the root of your project folder</li>\n<li>Create a testsuite file in the \"Testsuites\" folder (f.ex \"01_testsuite.robot\")</li>\n<li>Copypaste your imported code from katalon recorder to this testuite file</li>\n<li>Create \"seleniumLibrary.robot\" file in the resources folder.</li>\n<li>Copy paste <strong><a href=\"https://github.com/ngocbv/Robot-Framework-Formatter/blob/master/resources/seleniumLibrary.robot\" rel=\"nofollow noreferrer\">this</a></strong> code in the file. Note the <strong>Library</strong> line in the beginning of the file.</li>\n<li>Open the project folder in RIDE</li>\n<li>If your development environment has been setup correctly you should\nbe able to run your testsuite and/or testcase with RIDE.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6864496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qGng1.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6864496/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1552738261, "creation_date": 1552738261, "answer_id": 55196611, "question_id": 53091696, "link": "https://stackoverflow.com/questions/53091696/katalon-export-robot-framework-issue/55196611#55196611", "title": "Katalon Export - Robot Framework Issue", "body": "<p>Try to remove that resource line in the code and change it to Library Selenium2Library. I think the issue is that katalon studio is generating a code that uses seleniumlibrary.</p>\n"}], "owner": {"reputation": 125, "user_id": 3599856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BkYpv.jpg?s=128&g=1", "display_name": "Joe Rivera", "link": "https://stackoverflow.com/users/3599856/joe-rivera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 831, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552738261, "creation_date": 1541018668, "last_edit_date": 1543784022, "question_id": 53091696, "link": "https://stackoverflow.com/questions/53091696/katalon-export-robot-framework-issue", "title": "Katalon Export - Robot Framework Issue", "body": "<p>Hi I have exported the below test case from Katalon recorder to Robot Framework code.I am trying to run this in PyCharm or RIDE using Python 2.7. PyCharm and RIDE both seem to not like the <strong>Resource seleniumLibrary.robot</strong> code. </p>\n\n<p>How can I import this seleniumLibrary.robot file? Where is it? I have downloaded Robot Framework, SeleniumLibrary, Selenium2Library, WxPython, and RIDE and all are working now I am just trying to get this code to run. </p>\n\n<p>I followed the instructions below to get up and running</p>\n\n<p><a href=\"http://seleniummaster.com/sitecontent/index.php/selenium-robot-framework-menu/selenium-robot-framework-python-menu/191-selenium-robot-framework-installation-with-python\" rel=\"nofollow noreferrer\">http://seleniummaster.com/sitecontent/index.php/selenium-robot-framework-menu/selenium-robot-framework-python-menu/191-selenium-robot-framework-installation-with-python</a></p>\n\n<pre><code>*** Settings ***\nSuite Setup    Open Browser    https://www.katalon.com/    firefox\nSuite Teardown    Close Browser\nResource    seleniumLibrary.robot\n\n*** Variables ***\n${undefined}    https://www.katalon.com/\n\n*** Test Cases ***\nTest Case\n    open    https://abcxyz.com/catalog-portal/\n    click    xpath=//div[5]/div/div[2]/img\n    selectWindow    win_ser_1\n    selectFrame    index=0\n    click    xpath=//td[@onclick=\"if (warnUnfinishedPage()) return false; changePage('pc.quote.html.QuoteSummarySection','refresh');  return false;\"]\n    click    xpath=(.//*[normalize-space(text()) and normalize-space(.)='Email'])[1]/following::td[5]\n    type    name=t1st__TBOX    603449\n    click    xpath=(.//*[normalize-space(text()) and normalize-space(.)='All'])[2]/following::input[1]\n    click    link=Q603449\n    click    link=Email\n    addSelection    id=null    Doe, John (abc@abc.com)\n    click    xpath=(.//*[normalize-space(text()) and normalize-space(.)='Email this Quote'])[1]/following::input[2]\n    select    name=FORMAT    Text\n    click    link=Send\n    close    win_ser_1\n    selectWindow    win_ser_local\n    close    win_ser_local\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "flask", "repeat"], "comments": [{"owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 1, "creation_date": 1541019232, "post_id": 53091681, "comment_id": 93080400, "body": "Is it a typo or your if statements really don&#39;t have colons at the end?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1541019418, "post_id": 53091681, "comment_id": 93080486, "body": "Both your example URLs are the same. I assume one is supposed to have the <code>FordPinto</code> value? Just checking that you didn&#39;t actually make the same request twice, which would of course explain why you got the same result."}], "answers": [{"tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 4, "last_activity_date": 1541020369, "last_edit_date": 1541020369, "creation_date": 1541019671, "answer_id": 53091905, "question_id": 53091681, "link": "https://stackoverflow.com/questions/53091681/python-flask-same-response-returned-for-new-request/53091905#53091905", "title": "Python Flask: Same Response Returned for New Request", "body": "<p>Because <code>Price</code> is a module global variable, it is is only set once, when <code>PriceCheck.py</code> is first imported.  You should instead wrap the code in <code>PriceCheck.py</code> in a function so that it can be called repeatedly:</p>\n\n<p>New <code>PriceCheck.py</code>:</p>\n\n<pre><code>from Flask import request\n\ndef check_price():\n    PriceChecker= request.args.get('CarMakeModel')\n    if PriceChecker == 'ChevySilverado':\n        Price = '$25000'\n    if PriceChecker == 'FordPinto':\n        Price = '$5000'\n    # You also need to handle `PriceChecker` being other values!\n    return Price\n</code></pre>\n\n<p>New <code>Run.py</code>:</p>\n\n<pre><code>from flask import Flask\nfrom PriceCheck import check_price\n\napp = Flask(__name__)\n\n@app.route('/EndPoint1')\ndef Response():\n    return check_price()\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6590412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd04a2e925e66b42635b8943d785f60?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Watson", "link": "https://stackoverflow.com/users/6590412/richard-watson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 53091905, "answer_count": 1, "score": 0, "last_activity_date": 1541086085, "creation_date": 1541018613, "last_edit_date": 1541086085, "question_id": 53091681, "link": "https://stackoverflow.com/questions/53091681/python-flask-same-response-returned-for-new-request", "title": "Python Flask: Same Response Returned for New Request", "body": "<p>Python newbie here. I have a basic Flask API to price check a car's make and model. </p>\n\n<p><strong>Expected Behavior:</strong>\nThe purpose is to send a GET request to the server like this:</p>\n\n<p><a href=\"http://127.0.0.1:5000//EndPoint1?CarMakeModel=ChevySilverado\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000//EndPoint1?CarMakeModel=ChevySilverado</a></p>\n\n<p>And the response should return the price: $25000</p>\n\n<p>If I submit a second request like this:</p>\n\n<p><a href=\"http://127.0.0.1:5000//EndPoint1?CarMakeModel=FordPinto\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000//EndPoint1?CarMakeModel=FordPinto</a></p>\n\n<p>The response should return the price: $5000</p>\n\n<p><strong>Incorrect Observed Behavior:</strong>\nWhen I make a GET request for ChevySilverado (like the URL above), it returns $25000 correctly. But when I send a second URL for FordPinto, it returns $25000 again instead of $5000. <strong>It will always repeat $25000 as the output.</strong> </p>\n\n<p>How can I get this Python code to return $5000 when I submit 'FordPinto' on the second request URL?</p>\n\n<p>Here's the code I've tried:</p>\n\n<pre><code>#PriceCheck.py:\n\nfrom Flask import request\nPriceChecker=[]\nPrice=[]\nPriceChecker= request.args.get('CarMakeModel')\nif PriceChecker == 'ChevySilverado':\n    Price = '$25000'\nif PriceChecker == 'FordPinto':\n    Price = '$5000'\n\n#Run.py:\n\nfrom flask import Flask\napp = Flask(__name__)\n@app.route('/EndPoint1')\ndef Response():\n    from PriceCheck import PriceChecker\n    return str(PriceChecker)\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2306, "user_id": 3991649, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/nwb21.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3991649/tim"}, "edited": false, "score": 0, "creation_date": 1541018700, "post_id": 53091676, "comment_id": 93080183, "body": "What is the problem you&#39;re having? Are you getting an error? Is the output wrong? If so, what&#39;s wrong with it?"}, {"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1541019211, "post_id": 53091676, "comment_id": 93080390, "body": "<code>no_duplicates.to_excel(&#39;Table 3.xlsx&#39;, index=False)</code> is easier to use to save output dataframe to excel instead of <code>xlsxwriter</code>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1541019305, "post_id": 53091676, "comment_id": 93080432, "body": "There&#39;s nothing wrong with your dropping duplicate code.  Can you clarify what you&#39;re actual problem is?"}, {"owner": {"reputation": 147, "user_id": 7970547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc36b6bce18b65b9f6355fad3dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "user7970547", "link": "https://stackoverflow.com/users/7970547/user7970547"}, "edited": false, "score": 0, "creation_date": 1541021132, "post_id": 53091676, "comment_id": 93081107, "body": "When I tried it with large file sizes, it just did not work. I exceeded the maximum rows in the excel sheet. Any ideas on how to continue printing on Sheet 2 after Sheet 1 is maxed out?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1541021861, "post_id": 53091676, "comment_id": 93081366, "body": "@user7970547 pandas can not do anything about limitation of excel , maybe just try csv ."}, {"owner": {"reputation": 682, "user_id": 2592393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FHY9C.jpg?s=128&g=1", "display_name": "jtweeder", "link": "https://stackoverflow.com/users/2592393/jtweeder"}, "edited": false, "score": 0, "creation_date": 1541027238, "post_id": 53091676, "comment_id": 93082972, "body": "you could save it as a <code>.csv</code> instead since you are exceeding the spreadsheet row limit."}], "answers": [{"tags": [], "owner": {"reputation": 893, "user_id": 9428127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCQIE.jpg?s=128&g=1", "display_name": "Lakshmi Bhavani - Intel", "link": "https://stackoverflow.com/users/9428127/lakshmi-bhavani-intel"}, "is_accepted": false, "score": 0, "last_activity_date": 1541047928, "creation_date": 1541047928, "answer_id": 53095374, "question_id": 53091676, "link": "https://stackoverflow.com/questions/53091676/pandas-removing-duplicate-rows-in-a-data-frame/53095374#53095374", "title": "Pandas: Removing duplicate rows in a Data frame", "body": "<p>Try with the below code</p>\n\n<pre><code>import pandas as pd\nfrom pandas import ExcelWriter\ndf1=pd.DataFrame([[1,7,9],[2,4,11],[7,3,2]])\ndf2=pd.DataFrame([[1,4,7],[12,-4,-1],[2,4,11]])\ndf=pd.concat([df1,df2]).drop_duplicates().reset_index(drop=True)\nwr = ExcelWriter('./sample.xlsx')\ndf.to_excel(wr,'Sheet5',index=False)\nwr.save()\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7970547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc36b6bce18b65b9f6355fad3dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "user7970547", "link": "https://stackoverflow.com/users/7970547/user7970547"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541047928, "creation_date": 1541018586, "question_id": 53091676, "link": "https://stackoverflow.com/questions/53091676/pandas-removing-duplicate-rows-in-a-data-frame", "title": "Pandas: Removing duplicate rows in a Data frame", "body": "<p>I have 2 tables with 3 rows and 3 columns:</p>\n\n<pre><code>   Table 1                                 Table 2\n 1   7    9                              1    4   7\n 2   4   11                             12   -4  -1\n 7   3    2                              2    4   11\n</code></pre>\n\n<p>I want to merge these two tables into one data frame and remove duplicate rows:</p>\n\n<pre><code>Expected Output (Table 3):\n1    7   9\n7    3   2\n1    4   7\n12  -4  -1\n</code></pre>\n\n<p>I also want the output to be in excel. <strong>What is wrong with my code below?</strong>:</p>\n\n<pre><code> import pandas as pd\n import numpy as np\n\n df1 = pd.read_excel('Table 1.xlsx')\n df2 = pd.read_excel('Table 2.xlsx')\n\n frames = [df1,df2]\n result = pd.concat(frames)\n\n no_duplicates = result.drop_duplicates(False)\n\n import xlsxwriter\n workbook = xlsxwriter.Workbook('Table 3.xlsx', {'constant_memory': True})\n worksheet = workbook.add_worksheet()\n row = 0\n\nfor row, group in enumerate (no_duplicates):\n for col in range(3):\n    worksheet.write (row, col, group[col])\n\nworkbook.close()\n</code></pre>\n"}, {"tags": ["python", "sql", "mongodb", "aggregate", "pymongo"], "comments": [{"owner": {"reputation": 63390, "user_id": 2683814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16a4c2fb341c51388d5cdfcf0e956f6c?s=128&d=identicon&r=PG&f=1", "display_name": "s7vr", "link": "https://stackoverflow.com/users/2683814/s7vr"}, "edited": false, "score": 0, "creation_date": 1541019177, "post_id": 53091664, "comment_id": 93080371, "body": "Try without quotes like <code>{&quot;$in&quot;: [&#39;AA&#39;, &#39;CS&#39;, &#47;Nie&#47;i]}</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10354541"}, "reply_to_user": {"reputation": 63390, "user_id": 2683814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16a4c2fb341c51388d5cdfcf0e956f6c?s=128&d=identicon&r=PG&f=1", "display_name": "s7vr", "link": "https://stackoverflow.com/users/2683814/s7vr"}, "edited": false, "score": 0, "creation_date": 1541019408, "post_id": 53091664, "comment_id": 93080481, "body": "@Veeram I get a syntax error"}], "answers": [{"tags": [], "owner": {"reputation": 3799, "user_id": 1092133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4763af25f1f5ab27a6420c794344905c?s=128&d=identicon&r=PG&f=1", "display_name": "Bajal", "link": "https://stackoverflow.com/users/1092133/bajal"}, "is_accepted": true, "score": 0, "last_activity_date": 1541038582, "creation_date": 1541038582, "answer_id": 53094375, "question_id": 53091664, "link": "https://stackoverflow.com/questions/53091664/add-pattern-inside-in-and-aggregate/53094375#53094375", "title": "Add pattern inside $in, and aggregate", "body": "<p>You could use the <code>$or</code> operator along with <code>$regex</code> to separately lookup the items you need a regular expression search on. It cannot be combined into a single list of items.</p>\n\n<pre><code>db.collection.aggregate([{\n    \"$unwind\": \"$tags\"\n},\n{\n    '$match': {\n        $or: [\n          {'tags.tag.name': {\"$in\": ['AA','CS']}},\n          {'tags.tag.name': { $regex: 'Nie', $options: 'i'}}\n        ],\n      'auditRun': 12345\n    }\n},\n{\n    '$project': {\n        'tags.tag.name': 1,\n        '_id': 0\n    }\n},\n])\n</code></pre>\n\n<p>Also want to mention that if you only need the ones that <em>start with</em> Nie, then your regex should be <code>^Nie</code> </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10354541"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 53094375, "answer_count": 1, "score": 0, "last_activity_date": 1541038582, "creation_date": 1541018545, "question_id": 53091664, "link": "https://stackoverflow.com/questions/53091664/add-pattern-inside-in-and-aggregate", "title": "Add pattern inside $in, and aggregate", "body": "<p>I am adding a pattern inside an <code>$in</code> in an <code>aggregate</code> function. </p>\n\n<p>I know there values exist but my query is returning nothing for the pattern. </p>\n\n<p>Here is my query:</p>\n\n<pre><code>db.collection.aggregate([{\"$unwind\":\"$tags\"},\n{'$match': \n{\n'tags.tag.name': {\n    \"$in\": ['AA', 'CS', '/Nie/i']},\n'auditRun': 12345}},\n{'$project': {\n 'tags.tag.name':1,\n  '_id': 0}},])\n</code></pre>\n\n<p>I am getting results for <strong>AA</strong> and <strong>CS</strong> but I am not getting anything back for the <strong>Nie</strong>. </p>\n\n<p>I am expecting a few results for that as well because I have a bunch of names starting with <strong>Nie</strong>.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1541018621, "post_id": 53091655, "comment_id": 93080156, "body": "Where is the example plot?"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1541023099, "post_id": 53091655, "comment_id": 93081774, "body": "It&#39;s a clear duplicate. Where did you search?"}], "owner": {"reputation": 71, "user_id": 8671360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ccdd8669c21c9234d226eddf553a06e?s=128&d=identicon&r=PG&f=1", "display_name": "hlku2334", "link": "https://stackoverflow.com/users/8671360/hlku2334"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1541031649, "answer_count": 0, "score": 0, "last_activity_date": 1541019124, "creation_date": 1541018494, "last_edit_date": 1541019124, "question_id": 53091655, "link": "https://stackoverflow.com/questions/53091655/make-tick-lines-larger-python", "closed_reason": "Duplicate", "title": "Make Tick Lines Larger Python", "body": "<p>I have searched for this question but have not seen one like it. I am plotting on python using matplotlib. I would like to make the size of the line at the ticks larger so that I can actually see where there are tick marks on a logarithmic scale. Below is just an example plot. I know how to increase the size of the x tick labels for the numbers but not the actual lines of the ticks. Thank You!</p>\n\n<p>[<a href=\"https://i.stack.imgur.com/WSQhL.png][1]\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/WSQhL.png][1]</a></p>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 165, "user_id": 4767645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a549e6e27e104169faca055f2c7f1f?s=128&d=identicon&r=PG&f=1", "display_name": "Sylvain", "link": "https://stackoverflow.com/users/4767645/sylvain"}, "edited": false, "score": 0, "creation_date": 1580138905, "post_id": 53091623, "comment_id": 105990123, "body": "I found a good example <a href=\"https://scikit-learn.org/stable/auto_examples/cluster/plot_dict_face_patches.html#sphx-glr-auto-examples-cluster-plot-dict-face-patches-py\" rel=\"nofollow noreferrer\">on scikit-learn</a>, but still trying out."}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 5133524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aR2zU.jpg?s=128&g=1", "display_name": "giuliano-oliveira", "link": "https://stackoverflow.com/users/5133524/giuliano-oliveira"}, "is_accepted": false, "score": 1, "last_activity_date": 1602000646, "creation_date": 1602000646, "answer_id": 64229751, "question_id": 53091623, "link": "https://stackoverflow.com/questions/53091623/differences-between-minibatchkmeans-fit-and-minibatchkmeans-partial-fit/64229751#64229751", "title": "Differences between MiniBatchKMeans.fit and MiniBatchKMeans.partial_fit", "body": "<h2>TL;DR</h2>\n<p><code>partial_fit</code> is for online clustering were <code>fit</code> is for offline, however i think MiniBatchKMeans's <code>partial_fit</code> method is a little rough.</p>\n<h2>Long explanation</h2>\n<p>I diged old PR's from the repo, and found <a href=\"https://github.com/scikit-learn/scikit-learn/pull/132\" rel=\"nofollow noreferrer\">this one</a>, it seems to be the first commit of this implementation, it mentions that this algorithm can implement the <code>partial_fit</code> method as a online clustering method (following the online API discussion).</p>\n<p>So as well as the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.Birch.html?highlight=birch#sklearn.cluster.Birch\" rel=\"nofollow noreferrer\">BIRCH</a> implementation, this algorithm uses <code>fit</code> as one time offline clustering and <code>partial_fit</code> as online clustering.</p>\n<p>However, i did some tests comparing the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.metrics.adjusted_rand_score.html\" rel=\"nofollow noreferrer\">ARI</a> of the result labels by using the fit in the entire dataset versus using partial_fit and fit in chunks, and didn't seems to get anywhere, since the ARI result were very low (~0.5), and by changing the initialization apparently the fit chunked beat partial_fit, which doesn't make sense. you can find my notebook <a href=\"https://gist.github.com/giuliano-oliveira/513407f566529e5ee72c895c437e3658\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>So my guess is, based in <a href=\"https://github.com/scikit-learn/scikit-learn/pull/132#issuecomment-1193077\" rel=\"nofollow noreferrer\">this response</a> in the PR:</p>\n<blockquote>\n<p>I believe that this branch can and should be merged.</p>\n<p>The online fitting API (partial_fit) probably needs to mature, but I\nthink that it is a bit out of scope of this work. The core\ncontribution, that is a mini-batch K-means, is nice, and does seem to\nspeed up things.</p>\n</blockquote>\n<p>Is that the implementation hasn't changed much since that PR, and the partial_fit method is still a little rough, the two implementations from 2011 and now has changed (compared from the release tag), however both of them calls the function <code>_mini_batch_step</code> once in <code>partial_fit</code> (without verbose info) and calls multiple time in <code>fit</code> (with verbose info).</p>\n"}], "owner": {"reputation": 4312, "user_id": 3584765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/zyetx.png?s=128&g=1", "display_name": "Eypros", "link": "https://stackoverflow.com/users/3584765/eypros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1602000646, "creation_date": 1541018380, "question_id": 53091623, "link": "https://stackoverflow.com/questions/53091623/differences-between-minibatchkmeans-fit-and-minibatchkmeans-partial-fit", "title": "Differences between MiniBatchKMeans.fit and MiniBatchKMeans.partial_fit", "body": "<p>I am interested in <code>sklearn.cluster.MiniBatchKMeans</code> as a way to use huge datasets. Anyway I am a bit confused about the difference between <code>MiniBatchKMeans.partial_fit()</code> and <code>MiniBatchKMeans.fit()</code>.</p>\n\n<p>Documentation about <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.cluster.MiniBatchKMeans.html#sklearn.cluster.MiniBatchKMeans.fit\" rel=\"noreferrer\"><code>fit()</code></a> states that:<br>\n<em>Compute the centroids on X by chunking it into mini-batches.</em></p>\n\n<p>while documentation about <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.cluster.MiniBatchKMeans.html#sklearn.cluster.MiniBatchKMeans.partial_fit\" rel=\"noreferrer\"><code>partial_fit()</code></a> states that:<br>\n<em>Update k means estimate on a single mini-batch X.</em></p>\n\n<p>So, as I understand it <code>fit()</code> splits up the dataset to chunk of data with which it trains the k means (I guess the argument <code>batch_size</code> of <code>MiniBatchKMeans()</code> refers to this one) while <code>partial_fit()</code> uses all data passed to it to update the centres. The term \"update\" may seem a bit ambiguous indicating an initial training (using <code>fit()</code>) should have been performed or not, but judging from the example in the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.cluster.MiniBatchKMeans.html#sklearn.cluster.MiniBatchKMeans.fit\" rel=\"noreferrer\">documentation</a> this is not necessary (I can use <code>partial_fit()</code> at the beginning also).</p>\n\n<p>Is it true that <code>partial_fit()</code> will use all data passed to it regardless of size or is the data size bound to the <code>batch_size</code> passed as argument to the <code>MiniBatchKMeans</code> constructor? Also if <code>batch_size</code> is set to be greater than the actual data size is the result the same as the standard k-means algorithm (I guess efficient could vary in the latter case though due to different architectures).</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "edited": false, "score": 0, "creation_date": 1541018536, "post_id": 53091619, "comment_id": 93080125, "body": "I just tested this code and it works fine for me so the problem lies elsewhere."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6302747"}, "reply_to_user": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "edited": false, "score": 0, "creation_date": 1541019019, "post_id": 53091619, "comment_id": 93080304, "body": "The issue is that it the out file prints all headers instead of only the ones that changed. I&#39;m trying to print only the headers that changed. This might be bc it&#39;s evaluating lines therefore rows instead of columns (i&#39;m not sure though)"}, {"owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "edited": false, "score": 0, "creation_date": 1541019347, "post_id": 53091619, "comment_id": 93080448, "body": "Oh, yeah, this only outputs the rows that changed. You&#39;d have to add a lot more code to do columns."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6302747"}, "reply_to_user": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "edited": false, "score": 0, "creation_date": 1541019866, "post_id": 53091619, "comment_id": 93080644, "body": "yeah.. not sure how to go about that. Any tips?"}, {"owner": {"reputation": 2123, "user_id": 7904315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1e59815b9d4466a8c1527486380128?s=128&d=identicon&r=PG&f=1", "display_name": "vencaslac", "link": "https://stackoverflow.com/users/7904315/vencaslac"}, "edited": false, "score": 0, "creation_date": 1541023354, "post_id": 53091619, "comment_id": 93081847, "body": "this isn&#39;t super clear, are the tables the same length? same number of columns? are the tableheads identical? which differences are you looking for"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6302747"}, "edited": false, "score": 0, "creation_date": 1541032378, "post_id": 53091619, "comment_id": 93084133, "body": "Apologies for the lack of clarity. Solution offered below by @Ruslan Galimov works"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6302747"}, "edited": false, "score": 0, "creation_date": 1541020406, "post_id": 53092004, "comment_id": 93080821, "body": "tried it out, renders the following error:     first_file_map[headers_of_first_file[index]].append(cell) IndexError: list index out of range  could this possibly be because there are too many columns?"}, {"owner": {"reputation": 207, "user_id": 4392360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100002559420490/picture?type=large", "display_name": "Ruslan  Galimov", "link": "https://stackoverflow.com/users/4392360/ruslan-galimov"}, "edited": false, "score": 0, "creation_date": 1541020552, "post_id": 53092004, "comment_id": 93080875, "body": "Can you give an example of files? Actually, if you have different number of columns and values in row such error may happens"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6302747"}, "edited": false, "score": 0, "creation_date": 1541032346, "post_id": 53092004, "comment_id": 93084126, "body": "Your solution worked.. the files have 100k+ rows and some data fields were missing. I used pandas to normalize the data set then ran the comparison again and it worked fine!"}, {"owner": {"reputation": 207, "user_id": 4392360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100002559420490/picture?type=large", "display_name": "Ruslan  Galimov", "link": "https://stackoverflow.com/users/4392360/ruslan-galimov"}, "edited": false, "score": 0, "creation_date": 1541084079, "post_id": 53092004, "comment_id": 93102810, "body": "I was glad to help"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6302747"}, "edited": false, "score": 0, "creation_date": 1541190181, "post_id": 53092004, "comment_id": 93145478, "body": "Quick update to this.. how would I be able to handle if rows and columns are not identical?"}, {"owner": {"reputation": 207, "user_id": 4392360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100002559420490/picture?type=large", "display_name": "Ruslan  Galimov", "link": "https://stackoverflow.com/users/4392360/ruslan-galimov"}, "edited": false, "score": 0, "creation_date": 1542025780, "post_id": 53092004, "comment_id": 93408639, "body": "It is your de\u0441ision. You can just write them, just print all columns with header in  <code>different_headers</code>"}], "tags": [], "owner": {"reputation": 207, "user_id": 4392360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100002559420490/picture?type=large", "display_name": "Ruslan  Galimov", "link": "https://stackoverflow.com/users/4392360/ruslan-galimov"}, "is_accepted": true, "score": 1, "last_activity_date": 1541020503, "last_edit_date": 1541020503, "creation_date": 1541020203, "answer_id": 53092004, "question_id": 53091619, "link": "https://stackoverflow.com/questions/53091619/compare-two-csv-files-in-python-and-retain-headers-of-changes/53092004#53092004", "title": "Compare two csv files in python and retain headers of changes", "body": "<p>I think this code resolves your problem  </p>\n\n<pre><code>import sys\n\nwith open('file1.csv', 'r') as f1:\n    file1 = f1.readlines()\n\nwith open('file2.csv', 'r') as f2:\n    file2 = f2.readlines()\n\ndelimiter = '\\t'  # Column delimiter in you file\nheaders_of_first_file = file1[0].strip().split(delimiter)\nheaders_of_second_file = file2[0].strip().split(delimiter)\n\n# You can remove this assert if you want to work files with different columns then you have to add some more code in next blocks\ndifferent_headers = set(headers_of_first_file).symmetric_difference(headers_of_second_file)\nif different_headers:\n    print('Files have difference in headers: ', different_headers)\n    sys.exit(-1)\n\n# Build map {header: [all_values]}\nfirst_file_map = {header: [] for header in headers_of_first_file}\nfor row in file1[1:]:\n    for index, cell in enumerate(row.strip().split(delimiter)):\n        first_file_map[headers_of_first_file[index]].append(cell)\n\n# Check by built map. Dont forget that columns may change order\nresult = set()\nfor row in file2[1:]:\n    for index, cell in enumerate(row.strip().split(delimiter)):\n        if cell not in first_file_map[headers_of_second_file[index]]:\n            result.add(headers_of_second_file[index])\n\nwith open('results.csv', 'w') as out_file:\n    out_file.write('\\t'.join(result))\n</code></pre>\n\n<p><strong>UPD</strong> files example:</p>\n\n<pre><code>Column1 Column2 Column3 Column5 Column4\n1   2   3   5   4\n10  20  30  50  40\n\nColumn1 Column2 Column3 Column4 Column5\n11  2   3   4   5\n10  10  30  40  50\n</code></pre>\n\n<p>'\\t' is delimiter</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6302747"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 53092004, "answer_count": 1, "score": 0, "last_activity_date": 1541020503, "creation_date": 1541018369, "question_id": 53091619, "link": "https://stackoverflow.com/questions/53091619/compare-two-csv-files-in-python-and-retain-headers-of-changes", "title": "Compare two csv files in python and retain headers of changes", "body": "<p>I'm trying to compare two csv files in python and output the differences along with the headers of each column. So far, with what I'm doing, it outputs all columns instead of just the ones with differences </p>\n\n<pre><code>import csv\n\nwith open('firstfile.csv', 'r') as f1:\n    file1 = f1.readlines()\n\nwith open('secondfile.csv', 'r') as f2:\n    file2 = f2.readlines()\n\nwith open('results.csv', 'w') as outFile:\n    outFile.write(file1[0])\n    for line in file2:\n        if line not in file1:\n            outFile.write(line)\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "drop-down-menu", "python-requests"], "comments": [{"owner": {"reputation": 1619, "user_id": 7228140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOKG6.png?s=128&g=1", "display_name": "Stephen Cowley", "link": "https://stackoverflow.com/users/7228140/stephen-cowley"}, "edited": false, "score": 0, "creation_date": 1541019223, "post_id": 53091598, "comment_id": 93080394, "body": "Maybe I&#39;m just missing it, but I don&#39;t see any countries there..."}, {"owner": {"reputation": 7061, "user_id": 839338, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12639eb17fa99d25a271a54f031feb67?s=128&d=identicon&r=PG", "display_name": "Dan-Dev", "link": "https://stackoverflow.com/users/839338/dan-dev"}, "edited": false, "score": 0, "creation_date": 1541019491, "post_id": 53091598, "comment_id": 93080500, "body": "The countries are populated by JavaScript from <a href=\"https://www.nexmo.com/static/bundle.js\" rel=\"nofollow noreferrer\">nexmo.com/static/bundle.js</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7061, "user_id": 839338, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12639eb17fa99d25a271a54f031feb67?s=128&d=identicon&r=PG", "display_name": "Dan-Dev", "link": "https://stackoverflow.com/users/839338/dan-dev"}, "is_accepted": true, "score": 0, "last_activity_date": 1541027181, "last_edit_date": 1541027181, "creation_date": 1541020165, "answer_id": 53091999, "question_id": 53091598, "link": "https://stackoverflow.com/questions/53091598/web-scrape-get-drop-down-menu-data-python/53091999#53091999", "title": "Web scrape get drop-down menu data python", "body": "<p>This webpage uses JavaScript to render the HTML. You can render it with Selenium. First install Selenium.</p>\n\n<pre><code>sudo pip3 install selenium\n</code></pre>\n\n<p>Then get a driver <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">https://sites.google.com/a/chromium.org/chromedriver/downloads</a> (Depending upon your OS you may need to specify the location of your driver)</p>\n\n<pre><code>from selenium import webdriver\nfrom bs4 import BeautifulSoup\n\nbrowser = webdriver.Chrome()\nurl = ('https://www.nexmo.com/products/sms')\nbrowser.get(url)\nhtml_source = browser.page_source\nbrowser.quit()\nsoup = BeautifulSoup(html_source, 'html.parser')\nfor name_list in soup.find_all(class_ ='dropdown-row'):\n    print(name_list.text)\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Afghanistan\nAlbania\n...\nZambia\nZimbabwe\n</code></pre>\n\n<p><strong>UPDATED</strong></p>\n\n<p>Alternatively use PyQt5:</p>\n\n<p>On Ubuntu </p>\n\n<pre><code>sudo apt-get install python3-pyqt5\nsudo apt-get install python3-pyqt5.qtwebengine\n</code></pre>\n\n<p>Other OS:</p>\n\n<pre><code>pip3 install PyQt5\n</code></pre>\n\n<p>Then run:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport sys\nfrom PyQt5.QtWidgets import QApplication\nfrom PyQt5.QtCore import QUrl\nfrom PyQt5.QtWebEngineWidgets import QWebEngineView\n\n\nclass Render(QWebEngineView):\n    def __init__(self, url):\n        self.html = None\n        self.app = QApplication(sys.argv)\n        QWebEngineView.__init__(self)\n        self.loadFinished.connect(self._loadFinished)\n        self.load(QUrl(url))\n        self.app.exec_()\n\n    def _loadFinished(self, result):\n        self.page().toHtml(self.callable)\n\n    def callable(self, data):\n        self.html = data\n        self.app.quit()\n\nurl = 'https://www.nexmo.com/products/sms'\nhtml_source = Render(url).html\nsoup = BeautifulSoup(html_source, 'html.parser')\nfor name_list in soup.find_all(class_ ='dropdown-row'):\n    print(name_list.text)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10588028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0cff405ee4c7068d91b583d6eb2461?s=128&d=identicon&r=PG&f=1", "display_name": "Elcappoo", "link": "https://stackoverflow.com/users/10588028/elcappoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2413, "favorite_count": 1, "accepted_answer_id": 53091999, "answer_count": 1, "score": -3, "last_activity_date": 1541027181, "creation_date": 1541018273, "question_id": 53091598, "link": "https://stackoverflow.com/questions/53091598/web-scrape-get-drop-down-menu-data-python", "title": "Web scrape get drop-down menu data python", "body": "<p>I am trying to get a list of all countries in the webpage <a href=\"https://www.nexmo.com/products/sms\" rel=\"nofollow noreferrer\">https://www.nexmo.com/products/sms</a>. I see the list is displayed in the drop-down. After inspecting the page, I tried the following code but I must be doing something wrong. I would appreciate some help here.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n# collect and parse page\npage = requests.get('https://www.nexmo.com/products/sms')\nsoup = BeautifulSoup(page.text, 'html.parser')\n# pull all text from the div\nname_list = soup.find(class_ ='dropdown-content')\nprint(name_list)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 10552885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5aaa2e7db2c1c1e8f0cd7fcc908eaea?s=128&d=identicon&r=PG&f=1", "display_name": "Astudent", "link": "https://stackoverflow.com/users/10552885/astudent"}, "edited": false, "score": 0, "creation_date": 1541020896, "post_id": 53091876, "comment_id": 93081024, "body": "I read somewhere that dictionaries could not be sorted as themselves. However this clearly proves that to be false information. Many thanks, and have a great day!"}], "tags": [], "owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "is_accepted": true, "score": 1, "last_activity_date": 1541019527, "creation_date": 1541019527, "answer_id": 53091876, "question_id": 53091593, "link": "https://stackoverflow.com/questions/53091593/print-dictionary-values-linked-to-keys-which-are-in-a-list/53091876#53091876", "title": "Print dictionary values linked to keys which are in a list", "body": "<p>You don't need a list for ordering your dict, you can just use <code>sorted</code> to sort by <code>key</code>,</p>\n\n<pre><code>dictA = {'bee': '100', 'apple': '200', 'croissant': '450'}\n\nfor key in sorted(dictA):\n    print (\"{} costs {}\".format(key, dictA[key]))\n\n# output,\n\napple costs 200\nbee costs 100\ncroissant costs 450\n</code></pre>\n\n<p>or one liner,</p>\n\n<pre><code>print (sorted(\"{} costs {}\".format(key, dictA[key]) for key in dictA))\n\n#  output,\n['apple costs 200', 'bee costs 100', 'croissant costs 450']\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 10552885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5aaa2e7db2c1c1e8f0cd7fcc908eaea?s=128&d=identicon&r=PG&f=1", "display_name": "Astudent", "link": "https://stackoverflow.com/users/10552885/astudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 53091876, "answer_count": 1, "score": 2, "last_activity_date": 1541037240, "creation_date": 1541018261, "last_edit_date": 1541037240, "question_id": 53091593, "link": "https://stackoverflow.com/questions/53091593/print-dictionary-values-linked-to-keys-which-are-in-a-list", "title": "Print dictionary values linked to keys which are in a list", "body": "<p>So let's say I have a list of words:</p>\n\n<pre><code>listA = ['apple', 'bee', 'croissant']\n</code></pre>\n\n<p>and a dictionary:</p>\n\n<pre><code>dictA = {'bee': '100', 'apple': '200', 'croissant': '450'}\n</code></pre>\n\n<p>How do I get a print like this?</p>\n\n<pre><code>apple costs 200\nbee costs 100\ncroissant costs 450\n</code></pre>\n\n<p>The problem here is the alphabetical order, it is the reason I need to get the values from the dictionary using the list. I hope the question is understandable.</p>\n"}, {"tags": ["python", "docker", "dockerfile"], "comments": [{"owner": {"reputation": 4754, "user_id": 1209628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa17169df5962bb7d05e661c3b6ba4f1?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/1209628/mark"}, "edited": false, "score": 0, "creation_date": 1541019040, "post_id": 53091523, "comment_id": 93080316, "body": "Can you share some info about your subproject just to get closer to your issue?"}, {"owner": {"reputation": 75, "user_id": 6928348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae00f95f8db91187d6bfd3785ff2071?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/6928348/jason"}, "reply_to_user": {"reputation": 4754, "user_id": 1209628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa17169df5962bb7d05e661c3b6ba4f1?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/1209628/mark"}, "edited": false, "score": 0, "creation_date": 1541019549, "post_id": 53091523, "comment_id": 93080520, "body": "@Mark, I have added some details regarding the subproject"}], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 4519500, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/FRdEr.jpg?s=128&g=1", "display_name": "Sergiu", "link": "https://stackoverflow.com/users/4519500/sergiu"}, "is_accepted": false, "score": 1, "last_activity_date": 1541020784, "creation_date": 1541020784, "answer_id": 53092109, "question_id": 53091523, "link": "https://stackoverflow.com/questions/53091523/reduce-docker-image-size/53092109#53092109", "title": "Reduce Docker Image Size", "body": "<p>If you are using the lates Docker version, when you are building your image, as per <a href=\"https://docs.docker.com/engine/reference/commandline/build/#squash-an-images-layers---squash-experimental\" rel=\"nofollow noreferrer\">Docker documentation</a> you could use the <strong><em>experimental</em></strong> flag: <strong><em>--squash</em></strong> which is indented to reduce your image layers, therefore, make the image smaller.</p>\n\n<pre><code>docker build --squash -t test .\n</code></pre>\n\n<p><strong>NOTE:</strong> You would also have to enable experimental features on the machine on which you intend to build the image.</p>\n\n<p>You can also find some good tips here: <a href=\"https://hackernoon.com/tips-to-reduce-docker-image-sizes-876095da3b34\" rel=\"nofollow noreferrer\">https://hackernoon.com/tips-to-reduce-docker-image-sizes-876095da3b34</a></p>\n"}], "owner": {"reputation": 75, "user_id": 6928348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae00f95f8db91187d6bfd3785ff2071?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/6928348/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 979, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1541020784, "creation_date": 1541017977, "last_edit_date": 1541019399, "question_id": 53091523, "link": "https://stackoverflow.com/questions/53091523/reduce-docker-image-size", "title": "Reduce Docker Image Size", "body": "<p>I have a Dockerfile which involves me installing a large folder as a project (see dockerfile). Checking \"docker history\" see that copying the folder costs 900MB and installing costs 1.7GB. Is there any way to reduce this image size?</p>\n\n<p>Dockefile (some steps ignored for simplicity):</p>\n\n<pre><code>FROM python:3.5\n\nCOPY subproject /app/subproject\nWORKDIR /app/subproject\nRUN pip install -e .\n\nCMD ['python', 'script.py']\n</code></pre>\n\n<p><strong>Edit:</strong>\nThe subproject is a git repository in itself. It is required in order for my main project to run.</p>\n\n<p>The subproject's size on my local disk is around 500MB, with 95% of that due to some tar files inside. It install prerequisite packages numpy, pillow,scikit,dlib. </p>\n"}, {"tags": ["python", "split", "valueerror"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1541017821, "post_id": 53091417, "comment_id": 93079878, "body": "Probably the file isn&#39;t tab-delimited. Please show the traceback"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541018263, "post_id": 53091417, "comment_id": 93080029, "body": "why are you iterating over the file and calling <code>readline</code>.  just do one or the other\u2026"}, {"owner": {"reputation": 41, "user_id": 8851216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86eead25da3d886802abf24cd2726a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar", "link": "https://stackoverflow.com/users/8851216/aleksandar"}, "edited": false, "score": 0, "creation_date": 1541018876, "post_id": 53091417, "comment_id": 93080243, "body": "Traceback (most recent call last):       File &quot;gpa.py&quot;, line 44, in &lt;module&gt;         main()       File &quot;gpa.py&quot;, line 30, in main         best = makeStudent(infile.readline())       File &quot;gpa.py&quot;, line 22, in makeStudent         name, hours, qpoints = infoStr.split(&quot;\\t&quot;)     ValueError: not enough values to unpack (expected 3, got 1) There is traceback. And file is tab delimited, i tried with commas, and blank spaces as someone suggested instead of tab, but still didn&#39;t work"}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541017993, "post_id": 53091510, "comment_id": 93079940, "body": "But that might drop data? The OP seems to have two delimiters, apparently, and only tests 1"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541020368, "post_id": 53091510, "comment_id": 93080809, "body": "why not put a <code>print(repr(infoStr))</code> in there and re<code>raise</code> the exception to help figure out what is causing the exception\u2026"}, {"owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "edited": false, "score": 0, "creation_date": 1541093769, "post_id": 53091510, "comment_id": 93108256, "body": "Yes that seems like a good idea, I just wanted to show the approach to handling exceptions."}], "tags": [], "owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "is_accepted": false, "score": 0, "last_activity_date": 1541018015, "last_edit_date": 1541018015, "creation_date": 1541017912, "answer_id": 53091510, "question_id": 53091417, "link": "https://stackoverflow.com/questions/53091417/splitting-data-in-file-in-python/53091510#53091510", "title": "Splitting data in file in Python", "body": "<p>Sometimes the <code>infoStr</code> line may not contain the character you're splitting on (e.g. a blank line <code>''</code>). Wrap this in a try block and you should be fine.</p>\n\n<pre><code>try:\n    name, hours, qpoints = infoStr.split('\\t')\nexcept ValueError:\n    name, hours, qpoints = None, None, None\n</code></pre>\n\n<p>You'll then need to handle the <code>None</code> case before instantiating <code>Student</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541018136, "post_id": 53091549, "comment_id": 93079985, "body": "This does not answer the question"}, {"owner": {"reputation": 38, "user_id": 3447115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9000a9c69c76bfbc4713f94b4007d962?s=128&d=identicon&r=PG&f=1", "display_name": "Mattux", "link": "https://stackoverflow.com/users/3447115/mattux"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541018500, "post_id": 53091549, "comment_id": 93080121, "body": "roganjosh, sorry I&#39;m new, is not the question &quot;Why is that happening?&quot;"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541018641, "post_id": 53091549, "comment_id": 93080162, "body": "&quot;Ensure you don&#39;t have x&quot; never answers <i>why</i> something is happening in any situation. &quot;Why can I not see beyond the horizon?&quot; --&gt; &quot;Ensure you&#39;re not on a flat Earth&quot;"}, {"owner": {"reputation": 38, "user_id": 3447115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9000a9c69c76bfbc4713f94b4007d962?s=128&d=identicon&r=PG&f=1", "display_name": "Mattux", "link": "https://stackoverflow.com/users/3447115/mattux"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541019947, "post_id": 53091549, "comment_id": 93080674, "body": "I was going to comment this on the question, but the system does not allow me to put comments on the question due to &quot;low reputation&quot; so I put it this an answer. I&#39;m sorry."}, {"owner": {"reputation": 38, "user_id": 3447115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9000a9c69c76bfbc4713f94b4007d962?s=128&d=identicon&r=PG&f=1", "display_name": "Mattux", "link": "https://stackoverflow.com/users/3447115/mattux"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541020191, "post_id": 53091549, "comment_id": 93080756, "body": "@Aleksandar, I understand my answer is not appropriate as per roganjosh explained above. However, you should chech that your last line is not an empty line. Also, as one of the comments on your questions, it&#39;s not correct to do a <code>for line in file</code> block and then within this block do a <code>file.readline()</code> as you will be skipping lines."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541020214, "post_id": 53091549, "comment_id": 93080763, "body": "Don&#39;t apologise, there&#39;s no need :) I know your position; your best bet is to play a longer game and answer questions where you have a very good chance of being right. It&#39;s tough to get off the starting block. The python tag is very active so your advice is likely to be commented by others."}, {"owner": {"reputation": 41, "user_id": 8851216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86eead25da3d886802abf24cd2726a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar", "link": "https://stackoverflow.com/users/8851216/aleksandar"}, "edited": false, "score": 0, "creation_date": 1541020426, "post_id": 53091549, "comment_id": 93080831, "body": "Mattux, that actualy fixed it... The issue was skipping lines. Thanks a lot !"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1541021419, "post_id": 53091549, "comment_id": 93081214, "body": "Please edit your answer to explain why this is an issue. I cannot remove my downvote unless the answer is edited after I voted (the way SO voting works :( )"}], "tags": [], "owner": {"reputation": 38, "user_id": 3447115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9000a9c69c76bfbc4713f94b4007d962?s=128&d=identicon&r=PG&f=1", "display_name": "Mattux", "link": "https://stackoverflow.com/users/3447115/mattux"}, "is_accepted": true, "score": -3, "last_activity_date": 1541098043, "last_edit_date": 1541098043, "creation_date": 1541018080, "answer_id": 53091549, "question_id": 53091417, "link": "https://stackoverflow.com/questions/53091417/splitting-data-in-file-in-python/53091549#53091549", "title": "Splitting data in file in Python", "body": "<p>Notice that you are already iterating over the file lines with the block starting in <code>for line in infile</code>, so there's no need to do <code>infile.readline()</code> within.</p>\n\n<p>Also you could check your line format before sending it to your function (or checking the format in the fuction, whatever you prefer).</p>\n\n<pre><code>{truncated code}\n\n# This loop will put on each iteration the next line of the file in the \"line\" var.\nfor line in infile:\n\n    # You need two commas in your line to be able to split it in 3 values.\n    if line.count(\",\") != 2:\n        print(\"WARN: Invalid format in line: \"+line)\n        # Of course that you could implement some counter to identify\n        # the problematic line location within the file...\n        quit()\n\n    s = makeStudent(line)\n    if s.gpa() &gt; best.gpa():\n        best = s\n\n{truncated code}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1203, "user_id": 10508893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19088d413e74d87a8f6e0f288cbddb45?s=128&d=identicon&r=PG&f=1", "display_name": "LeKhan9", "link": "https://stackoverflow.com/users/10508893/lekhan9"}, "edited": false, "score": 0, "creation_date": 1541019833, "post_id": 53091616, "comment_id": 93080631, "body": "Python would only throw an error if the number of spaces is different than the ones we declared in that var"}, {"owner": {"reputation": 1203, "user_id": 10508893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19088d413e74d87a8f6e0f288cbddb45?s=128&d=identicon&r=PG&f=1", "display_name": "LeKhan9", "link": "https://stackoverflow.com/users/10508893/lekhan9"}, "edited": false, "score": 0, "creation_date": 1541020042, "post_id": 53091616, "comment_id": 93080708, "body": "Splitting by a comma works for me. Do you possibly have any empty lines in your file?"}], "tags": [], "owner": {"reputation": 1203, "user_id": 10508893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19088d413e74d87a8f6e0f288cbddb45?s=128&d=identicon&r=PG&f=1", "display_name": "LeKhan9", "link": "https://stackoverflow.com/users/10508893/lekhan9"}, "is_accepted": false, "score": -1, "last_activity_date": 1541018343, "creation_date": 1541018343, "answer_id": 53091616, "question_id": 53091417, "link": "https://stackoverflow.com/questions/53091417/splitting-data-in-file-in-python/53091616#53091616", "title": "Splitting data in file in Python", "body": "<p>I bet this is a classic tabs vs. spaces problem. Your file might actually be space separated due to IDE formatting or search and replace going haywire. </p>\n\n<p>Try this:</p>\n\n<pre><code>def makeStudent(infoStr):\n    FAKE_TAB = '    '\n    name, hours, qpoints = infoStr.split(FAKE_TAB)\n\n    return Student(name, hours, qpoints)\n</code></pre>\n\n<p>If that doesn't work, determine how many spaces are between each value in each line manually and then replace FAKE_TAB with that. Admittedly, its a slightly sketchy patch...</p>\n"}], "owner": {"reputation": 41, "user_id": 8851216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86eead25da3d886802abf24cd2726a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar", "link": "https://stackoverflow.com/users/8851216/aleksandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 53091549, "answer_count": 3, "score": 0, "last_activity_date": 1542613076, "creation_date": 1541017446, "last_edit_date": 1542613076, "question_id": 53091417, "link": "https://stackoverflow.com/questions/53091417/splitting-data-in-file-in-python", "title": "Splitting data in file in Python", "body": "<pre><code>class Student:\n\n    def __init__(self, name, hours, qpoints):\n        self.name = name\n        self.hours = float(hours)\n        self.qpoints = float(qpoints)\n\n    def getName(self):\n        return self.name\n\n    def getHours(self):\n        return self.hours\n\n    def getQPoints(self):\n        return self.qpoints\n\n    def gpa(self):\n        return self.qpoints/self.hours\n\ndef makeStudent(infoStr):\n\n    name, hours, qpoints = infoStr.split(\"\\t\")\n\n\n    return Student(name, hours, qpoints)\n\ndef main():\n    fileName = input(\"Enter file name: \")\n    infile = open(fileName, \"r\")\n\n    best = makeStudent(infile.readline())\n\n    for line in infile:\n        s = makeStudent(line)\n        if s.gpa() &gt; best.gpa():\n            best = s\n\n    infile.close()\n\n    print(\"The best student is:\", best.getName())\n    print(\"hours:\", best.getHours())\n    print(\"GPA:\", best.gpa())\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I want to read line from a text file, split it in by \"\\t\" or \",\" so I can assign it to variables, and I get \"ValueError: not enough values to unpack (expected 3, got 1) in makeStudent(infoStr) function. File I use is written correctly, I get same error if I edit file and code to \",\" instead of \"\\t\". Why is that happening? Edit: Issue was in skipping lines in text. Solved.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 879, "user_id": 449081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1dfd890598212092385eea64a5ea91?s=128&d=identicon&r=PG", "display_name": "Owen", "link": "https://stackoverflow.com/users/449081/owen"}, "is_accepted": false, "score": 2, "last_activity_date": 1541017647, "last_edit_date": 1541017647, "creation_date": 1541017527, "answer_id": 53091430, "question_id": 53091407, "link": "https://stackoverflow.com/questions/53091407/pandas-converting-d-mmm-yy-to-datetime-object/53091430#53091430", "title": "pandas - converting d-mmm-yy to datetime object", "body": "<p>Use <code>%b</code> for a three letter month. Please see the Python <code>strftime</code> reference: <a href=\"http://strftime.org/\" rel=\"nofollow noreferrer\">http://strftime.org/</a></p>\n\n<p>I think you want: <code>w</code> for the day, <code>b</code> for the month, and <code>yy</code> for the year.</p>\n\n<p>I'm assuming the days aren't zero padded, if the days are zero padded then use <code>d</code> instead of <code>w</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 2, "last_activity_date": 1541017608, "creation_date": 1541017608, "answer_id": 53091453, "question_id": 53091407, "link": "https://stackoverflow.com/questions/53091407/pandas-converting-d-mmm-yy-to-datetime-object/53091453#53091453", "title": "pandas - converting d-mmm-yy to datetime object", "body": "<p>Check out the directives for <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\">datetimes here</a>. The following should work, using 3 letter months and 2 digit years:</p>\n\n<pre><code>df['Fut Expiration Date'] = pd.to_datetime(df['Fut Expiration Date'], format='%d-%b-%y')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "edited": false, "score": 0, "creation_date": 1541021550, "post_id": 53091532, "comment_id": 93081266, "body": "What version of pandas is this for? (0.17 here) I tried to unambiguously parse this and it was an unconvertible string for me."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "edited": false, "score": 0, "creation_date": 1541021611, "post_id": 53091532, "comment_id": 93081284, "body": "@&#201;varisteGalois: Locally <code>pd.__version__== &#39;0.22.0&#39;</code>."}, {"owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "edited": false, "score": 0, "creation_date": 1541021636, "post_id": 53091532, "comment_id": 93081288, "body": "I see. Thank you for the insight! Very helpful."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 6, "last_activity_date": 1541018006, "creation_date": 1541018006, "answer_id": 53091532, "question_id": 53091407, "link": "https://stackoverflow.com/questions/53091407/pandas-converting-d-mmm-yy-to-datetime-object/53091532#53091532", "title": "pandas - converting d-mmm-yy to datetime object", "body": "<p>Actually you do not <em>need</em> to specify the format here. The format is <em>unambiguous</em>, if we convert it without specifying a format, we get:</p>\n\n<pre><code>&gt;&gt;&gt; df\n       Date\n0  1-Dec-99\n1  1-Jul-99\n2  1-Jun-99\n3  1-Nov-99\n4  1-Oct-99\n5  1-Sep-99\n6  2-Aug-99\n7  2-Dec-99\n&gt;&gt;&gt; pd.to_datetime(df['Date'])\n0   1999-12-01\n1   1999-07-01\n2   1999-06-01\n3   1999-11-01\n4   1999-10-01\n5   1999-09-01\n6   1999-08-02\n7   1999-12-02\nName: Date, dtype: datetime64[ns]\n</code></pre>\n\n<p>Alternatively, we can look up the format in the documentation of the <a href=\"https://docs.python.org/3.7/library/datetime.html#strftime-and-strptime-behavior\" rel=\"noreferrer\"><code>datetime</code> module [Python-doc]</a>. We here se that:</p>\n\n<blockquote>\n<pre><code>%d   Day of the month as a zero-padded       01, 02, \u2026, 31\n     decimal number.\n\n%b   Month as locale\u2019s abbreviated name.     Jan, Feb, \u2026, Dec (en_US);\n                                             Jan, Feb, \u2026, Dez (de_DE)\n\n%y   Year without century as a               00, 01, \u2026, 99\n     zero-padded decimal number.\n</code></pre>\n</blockquote>\n\n<p>So we can specify the format as:</p>\n\n<pre><code>&gt;&gt;&gt; pd.to_datetime(df['Date'], format='%d-%b-%y')\n0   1999-12-01\n1   1999-07-01\n2   1999-06-01\n3   1999-11-01\n4   1999-10-01\n5   1999-09-01\n6   1999-08-02\n7   1999-12-02\nName: Date, dtype: datetime64[ns]\n</code></pre>\n"}], "owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3325, "favorite_count": 0, "accepted_answer_id": 53091532, "answer_count": 3, "score": 4, "last_activity_date": 1541018006, "creation_date": 1541017405, "question_id": 53091407, "link": "https://stackoverflow.com/questions/53091407/pandas-converting-d-mmm-yy-to-datetime-object", "title": "pandas - converting d-mmm-yy to datetime object", "body": "<p>I have a CSV with some data that looks like such:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jCXv3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jCXv3.png\" alt=\"excel doc\"></a></p>\n\n<p>I have many of these files, and I want to read them into DataFrame:</p>\n\n<pre><code>df = pd.read_csv(filepath, engine='c')\ndf['closingDate'] = pd.to_datetime(df['closingDate'], format='%dd-%mmm-%yy')\ndf['Fut Expiration Date'] = pd.to_datetime(df['Fut Expiration Date'], format='%d-%m-%yy')\n</code></pre>\n\n<p>I've tried a multitude of formats, but none seem to work. Is there an alternative?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "edited": false, "score": 0, "creation_date": 1541018261, "post_id": 53091386, "comment_id": 93080028, "body": "If you know the start and end values and the spacing I suppose you could use numpy.linspace"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "reply_to_user": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "edited": false, "score": 0, "creation_date": 1541019043, "post_id": 53091386, "comment_id": 93080317, "body": "That&#39;s what I do right now, but I end up getting plots along a line."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1541025347, "post_id": 53091386, "comment_id": 93082450, "body": "how many points do you want to generate, and how evenly do you want them?  if you&#39;re not too tied to Python there&#39;s a <code>spsample</code> function in the <code>sp</code> R library\u2026"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1541185451, "post_id": 53092699, "comment_id": 93143615, "body": "I just did the same thing minutes later. Thank you though."}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1541435833, "post_id": 53092699, "comment_id": 93207561, "body": "Yes, it did. Thanks. Although, I need to adjust the resolution every time since Google Maps API has a limit on elevation data requests"}, {"owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "reply_to_user": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 1, "creation_date": 1541495431, "post_id": 53092699, "comment_id": 93227296, "body": "@Chinmay in that case, could you accept the answer?"}], "tags": [], "owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "is_accepted": true, "score": 1, "last_activity_date": 1541024106, "creation_date": 1541024106, "answer_id": 53092699, "question_id": 53091386, "link": "https://stackoverflow.com/questions/53091386/generating-evenly-spaced-points-on-grid-using-python/53092699#53092699", "title": "Generating evenly spaced points on grid using Python?", "body": "<p>Since I don't have access to the poly object best I can do is make a guess:</p>\n\n<pre><code>def random_points_within(poly, num_points):\n    min_x, min_y, max_x, max_y = poly.bounds\n    x = (np.linspace(min_x,max_x,num_points))\n    y=  (np.linspace(min_y,max_y,num_points))\n    xx,yy = np.meshgrid(x,y,sparse=True)\n    xx = xx.reshape((np.prod(xx.shape),))\n    yy = yy.reshape((np.prod(yy.shape),))\n    points = []\n\n    for x in xx:\n       for y in yy:\n           random_point = Point([x, y])\n           if (random_point.within(poly)):\n              points.append(list(random_point.coords))\n    print(min_x,max_x,max_y,min_y)\n    return points,xx,yy\n</code></pre>\n\n<p>The only change I made compared to your program is that it loops both over xx and yy so you'll cover an area rather than a line.</p>\n"}], "owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 0, "accepted_answer_id": 53092699, "answer_count": 1, "score": 0, "last_activity_date": 1541046230, "creation_date": 1541017316, "last_edit_date": 1541046230, "question_id": 53091386, "link": "https://stackoverflow.com/questions/53091386/generating-evenly-spaced-points-on-grid-using-python", "title": "Generating evenly spaced points on grid using Python?", "body": "<p>I am trying to plot out n evenly spaced points inside a polygon which is the site shown below on a google map. Right now, I've managed to do this using gmplot. </p>\n\n<p><a href=\"https://i.stack.imgur.com/zNQlv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zNQlv.png\" alt=\"Google Map\"></a></p>\n\n<p>My aim is to create a grid of points inside the polygon.</p>\n\n<p>My recent approach is using np.meshgrid and then selecting random points from the grid. Below is the code which I use to get the points. But,the result is not what I expected.</p>\n\n<pre><code>def random_points_within(poly, num_points):\n    min_x, min_y, max_x, max_y = poly.bounds\n    x = (np.linspace(min_x,max_x,1000))\n    y=  (np.linspace(min_y,max_y,1000))\n    xx,yy = np.meshgrid(x,y,sparse=True)\n    xx=xx[0]\n    points = []\n\n    while len(points) &lt; num_points:\n        random_point = Point([random.choice(xx), random.choice(yy)])\n        if (random_point.within(poly)):\n            points.append(list(random_point.coords))\n    print(min_x,max_x,max_y,min_y)\n    return points\n    #poly is a polygon created by the edges for the site\n</code></pre>\n\n<p>Update: </p>\n\n<p>Tried iterating through all the points on the meshgrid and ended up getting the below image.</p>\n\n<pre><code>def random_points_within(poly, num_points):\n    min_x, min_y, max_x, max_y = poly.bounds\n    x = (np.linspace(min_x,max_x,num_points))\n    y=  (np.linspace(min_y,max_y,num_points))\n    xx,yy = np.meshgrid(x,y,sparse=True)\n    xx = xx.reshape((np.prod(xx.shape),))\n    yy = yy.reshape((np.prod(yy.shape),))\n    points = []\n\n    for (x,y) in zip(xx,yy):\n       random_point = Point([x, y])\n       if (random_point.within(poly)):\n          points.append(list(random_point.coords))\n    print(min_x,max_x,max_y,min_y)\n    return points,xx,yy\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VILn7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VILn7.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there a way to get evenly spaced points ?</p>\n"}, {"tags": ["python", "regex", "pandas", "gps"], "answers": [{"tags": [], "owner": {"reputation": 1114, "user_id": 7716312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AeOUl.jpg?s=128&g=1", "display_name": "nimrodz", "link": "https://stackoverflow.com/users/7716312/nimrodz"}, "is_accepted": true, "score": 1, "last_activity_date": 1541081919, "last_edit_date": 1541081919, "creation_date": 1541052183, "answer_id": 53095958, "question_id": 53091359, "link": "https://stackoverflow.com/questions/53091359/pandas-regex-returns-values-in-brackets/53095958#53095958", "title": "Pandas regex returns values in brackets", "body": "<p>try add <code>.apply(', '.join)</code>\njoin is iterating over your list items and join them with the selected delimiter  <strong><em>', '</em></strong> (you could use ' ' as well). apply is used to pass the join function to your pandas column.\nyou can find additional info about pandas apply <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>dfp['latitude\\longitude'].str.findall(pattern).apply(', '.join)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9357156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kMWELXh0HVg/AAAAAAAAAAI/AAAAAAAAyqw/1vYGUAGyKso/photo.jpg?sz=128", "display_name": "fjm", "link": "https://stackoverflow.com/users/9357156/fjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 53095958, "answer_count": 1, "score": -5, "last_activity_date": 1541081919, "creation_date": 1541017202, "question_id": 53091359, "link": "https://stackoverflow.com/questions/53091359/pandas-regex-returns-values-in-brackets", "title": "Pandas regex returns values in brackets", "body": "<p>My data frame column is dtype: object. It contains GPS coordinates I want to extract and place in a longitude and latitude column. The regex results are wrapped in *open and *closing brackets. Why? How can I remove? Am I using the wrong pattern?</p>\n\n<p><a href=\"https://i.stack.imgur.com/idYSJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/idYSJ.png\" alt=\"Jupyter\"></a></p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 1, "last_activity_date": 1541017373, "creation_date": 1541017373, "answer_id": 53091394, "question_id": 53091343, "link": "https://stackoverflow.com/questions/53091343/pandas-groupby-sequential-values/53091394#53091394", "title": "Pandas groupby sequential values", "body": "<p>Not exactly a pandas solution, but you could use <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\">groupby</a> from itertools:</p>\n\n<pre><code>from operator import itemgetter\n\nimport pandas as pd\nfrom itertools import groupby\n\ndf = pd.DataFrame({\"name\": [\"A\", \"B\", \"B\", \"B\", \"A\", \"A\", \"B\"], \"value\":[3, 1, 2, 0, 5, 2, 3]})\n\nresult = [max(group, key=itemgetter(1)) for k, group in groupby(zip(df.name, df.value), key=itemgetter(0))]\n\nprint(result)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[('A', 3), ('B', 2), ('A', 5), ('B', 3)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 10, "last_activity_date": 1541017426, "creation_date": 1541017426, "answer_id": 53091412, "question_id": 53091343, "link": "https://stackoverflow.com/questions/53091343/pandas-groupby-sequential-values/53091412#53091412", "title": "Pandas groupby sequential values", "body": "<p>Using <code>pandas</code>, you can groupby when the name changes from row to row, using <code>(df.name!=df.name.shift()).cumsum()</code>, which essentially groups together consecutive names:</p>\n\n<pre><code>&gt;&gt;&gt; df.groupby((df.name!=df.name.shift()).cumsum()).max().reset_index(drop=True)\n  name  value\n0    A      3\n1    B      2\n2    A      5\n3    B      3\n</code></pre>\n"}], "owner": {"reputation": 1636, "user_id": 7274764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b43d0a67a43dda808410ec1155afa3?s=128&d=identicon&r=PG&f=1", "display_name": "Jurgy", "link": "https://stackoverflow.com/users/7274764/jurgy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2724, "favorite_count": 1, "accepted_answer_id": 53091412, "answer_count": 2, "score": 4, "last_activity_date": 1541017426, "creation_date": 1541017124, "question_id": 53091343, "link": "https://stackoverflow.com/questions/53091343/pandas-groupby-sequential-values", "title": "Pandas groupby sequential values", "body": "<p>I have no idea how to call this operation, so I couldn't really google anything, but here's what I'm trying to do:</p>\n\n<p>I have this dataframe:</p>\n\n<pre><code>df = pd.DataFrame({\"name\": [\"A\", \"B\", \"B\", \"B\", \"A\", \"A\", \"B\"], \"value\":[3, 1, 2, 0, 5, 2, 3]})\ndf\n  name  value\n0    A      3\n1    B      1\n2    B      2\n3    B      0\n4    A      5\n5    A      2\n6    B      3\n</code></pre>\n\n<p>And I want to group it on <code>df.name</code> and apply a <code>max</code> function on <code>df.values</code> but only if the names are in sequence. So my desired result is as follows:</p>\n\n<pre><code>df.groupby_sequence(\"name\")[\"value\"].agg(max)\n  name  value\n0    A      3\n1    B      2\n2    A      5\n3    B      3\n</code></pre>\n\n<p>Any clue how to do this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1541017494, "post_id": 53091260, "comment_id": 93079761, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/509211/understanding-pythons-slice-notation\">Understanding Python&#39;s slice notation</a>"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1541017521, "post_id": 53091260, "comment_id": 93079775, "body": "strings are immutable and iterable - you need to slice it and put the amount of spaces in it"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 2, "creation_date": 1541017899, "post_id": 53091260, "comment_id": 93079905, "body": "why should the output string start with a space? why are there 3 spaces inside but only 2 characters removed?"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1541018828, "post_id": 53091260, "comment_id": 93080226, "body": "strings are immutable meaning if you slice and append some characters you are actually creating a new string object. Also, your expected output is a little confusing. Edit your post with your attempt as well to show what you have tried and not worked for you"}], "answers": [{"comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1541017978, "post_id": 53091514, "comment_id": 93079936, "body": "thats different from the (probably ill specified) result in the OP."}, {"owner": {"reputation": 69, "user_id": 10588054, "user_type": "registered", "profile_image": "https://graph.facebook.com/537791217/picture?type=large", "display_name": "millibyte", "link": "https://stackoverflow.com/users/10588054/millibyte"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1541018154, "post_id": 53091514, "comment_id": 93079992, "body": "Yeah, I know, but I tried to capture the intent of OP and show an actual example for him to move forward with."}], "tags": [], "owner": {"reputation": 69, "user_id": 10588054, "user_type": "registered", "profile_image": "https://graph.facebook.com/537791217/picture?type=large", "display_name": "millibyte", "link": "https://stackoverflow.com/users/10588054/millibyte"}, "is_accepted": false, "score": 0, "last_activity_date": 1541018281, "last_edit_date": 1541018281, "creation_date": 1541017934, "answer_id": 53091514, "question_id": 53091260, "link": "https://stackoverflow.com/questions/53091260/replace-char-or-number-with-spaces-given-start-position-and-length/53091514#53091514", "title": "Replace char or number with spaces given start position and length", "body": "<p>If you start with</p>\n\n<pre><code>a=\"abcdefgh\"\nstart=3\nlength=2\n</code></pre>\n\n<p>Then you can slice your string by using indexes and add your chosen number of spaces in the middle this way:</p>\n\n<pre><code>b=a[:start-1] + \" \"*length + a[start-1+length:]\nprint(b)\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>ab  efgh\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/509211/understanding-pythons-slice-notation\">This answer on slicing</a> mentioned by Patrick above gives a pretty good overview.</p>\n"}], "owner": {"reputation": 1, "user_id": 5216776, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152925418702063/picture?type=large", "display_name": "Sandeep Shivnani", "link": "https://stackoverflow.com/users/5216776/sandeep-shivnani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1541018281, "creation_date": 1541016718, "last_edit_date": 1541017935, "question_id": 53091260, "link": "https://stackoverflow.com/questions/53091260/replace-char-or-number-with-spaces-given-start-position-and-length", "title": "Replace char or number with spaces given start position and length", "body": "<p>In a specific string I would be given start position and length.</p>\n\n<p>for eg input string <code>\"abcdefgh\"</code> . <code>start position : 3</code> and <code>length :2</code>. I want to replace characters with space</p>\n\n<p>so the output string should  <code>\" ab   efgh\"</code> .\nhow can i do that in python?</p>\n"}, {"tags": ["python", "image-processing"], "comments": [{"owner": {"reputation": 951, "user_id": 8190410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8fdEo.jpg?s=128&g=1", "display_name": "user8190410", "link": "https://stackoverflow.com/users/8190410/user8190410"}, "edited": false, "score": 0, "creation_date": 1541077133, "post_id": 53091233, "comment_id": 93098988, "body": "first convert your rgb image to grayscale using formula <code>gray = 0.21 * R + 0.72 * G + 0.07 * B</code>  then you have to do thresholding in order to convert your image into black &amp; white."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1541621455, "post_id": 53091233, "comment_id": 93282661, "body": "Please show an input image and the expected result."}], "owner": {"reputation": 11, "user_id": 10570307, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-En_VdivWyVA/AAAAAAAAAAI/AAAAAAAAADE/7eiApPZ1D08/photo.jpg?sz=128", "display_name": "Suzon Chowdhury", "link": "https://stackoverflow.com/users/10570307/suzon-chowdhury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541017006, "creation_date": 1541016617, "last_edit_date": 1541017006, "question_id": 53091233, "link": "https://stackoverflow.com/questions/53091233/python-image-processing-by-scikit-image-and-numpy", "title": "Python Image Processing by scikit image and Numpy", "body": "<p>I'm new to python. I wanna create a program that takes a coloured image, then converts the image from grb to xyz, I mean it converts the coloured values of grb channel to integers and then filter the integers by intensity of color and then regenerate a black and white image where the intense colours are black and rest is white. Is this how I converts the grb values? </p>\n\n<pre><code>from PIL import Image\nimport numpy as np\nim = Image.open(\"/home/suzon/Downloads/black.jpg\")\nprint(list(np.asarray(im)))\n</code></pre>\n"}, {"tags": ["python", "pandas", "lambda"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1541016922, "post_id": 53091226, "comment_id": 93079585, "body": "Try <code>df[&#39;test&#39;].astype(str).apply(lambda x: str(list(filter(str.isdigit, x[10:]))[0]))</code>"}, {"owner": {"reputation": 1619, "user_id": 7228140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOKG6.png?s=128&g=1", "display_name": "Stephen Cowley", "link": "https://stackoverflow.com/users/7228140/stephen-cowley"}, "edited": false, "score": 1, "creation_date": 1541016929, "post_id": 53091226, "comment_id": 93079587, "body": "Hard for us to fix your code without a testable example, but I would recommend (at least temporarily) converting your <code>apply</code> to a <code>for-loop</code>, that way you can check the input and <code>try</code> <code>except</code> on the errors so you can find the problem"}, {"owner": {"reputation": 2841, "user_id": 1641381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/crUHq.jpg?s=128&g=1", "display_name": "kevinsa5", "link": "https://stackoverflow.com/users/1641381/kevinsa5"}, "edited": false, "score": 0, "creation_date": 1541017936, "post_id": 53091226, "comment_id": 93079920, "body": "Perhaps you have a blank in your dataset, which would be represented as a nan (of type float)"}], "owner": {"reputation": 533, "user_id": 7396306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/033bc19f1f9658adc87f877fcfa29bf5?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeMurdoch", "link": "https://stackoverflow.com/users/7396306/drakemurdoch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541016598, "creation_date": 1541016598, "question_id": 53091226, "link": "https://stackoverflow.com/questions/53091226/pandas-apply-giving-float-error-when-operation-is-performed-on-string", "title": "Pandas apply giving float error when operation is performed on string", "body": "<p>I have a dataframe with a column <code>test</code> that contains test names, which I am using that to extract some information about what grade a test was written. Because I know that the string used for the test name always has the grade in it as the next digit after the date I have been extracting that data using this line of code:</p>\n\n<pre><code>df['Grade'] = df['test'].apply(lambda x: str(list(filter(str.isdigit, x[10:]))[0]))\n</code></pre>\n\n<p>This line, however, gives a <code>TypeError: 'float' object is not subscriptable</code>. Now, I should note that before I ran this, I did a check with <code>df.dtypes</code> and the column <code>test</code> was listed as <code>object</code>. That makes sense, as the string for the test names are something like <code>2015-2016_math_grade_7</code>, so there is no way it could be seen as a float by Pandas.</p>\n\n<p>I have checked, and test names are the only data in that column, so I have no idea why I am getting this type error. No matter what I change the code to, I get this error because I need to perform a string operation after <code>x[:10]</code>. (I have used <code>df['Grade'] = df['test'].apply(lambda x: str(re.sub(\"\\D\", \"\", str(x[:10]))))</code>)</p>\n\n<p>I should also note, that I have used this code before and it worked perfectly, but for some reason on this data set it seems to fail, if that helps.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1541016640, "post_id": 53091208, "comment_id": 93079469, "body": "What have you tried, and what exactly is the problem with it?"}], "answers": [{"tags": [], "owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "is_accepted": false, "score": 0, "last_activity_date": 1541016814, "creation_date": 1541016814, "answer_id": 53091278, "question_id": 53091208, "link": "https://stackoverflow.com/questions/53091208/how-to-convert-string-to-dict-and-if-same-key-appears-twice-then-make-its-value/53091278#53091278", "title": "How to convert string to dict and if same key appears twice then make its value as list", "body": "<p>Iterate over the potential key value pair generated by splitting on <code>=</code> and check if the key is already present and check if the value is instance of <code>list</code> and if it is list append the value to it else create the list with the existing string value and append the value to it. If key is not present just create a new key with a value.</p>\n\n<pre><code>s = 'o=foo t=bar t=baz f=zap'\n\ns_list=s.split()\nd={}\nfor i in s_list:\n    k,v=i.split('=')\n    if k in d:\n        if isinstance(d[k],list):\n           d[k].append(v)\n        else:\n           d[k]=[d[k]]\n           d[k].append(v)\n    else:\n        d[k]=v\nprint(d)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>{'f': 'zap', 'o': 'foo', 't': ['bar', 'baz']}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": true, "score": 1, "last_activity_date": 1541018270, "creation_date": 1541018270, "answer_id": 53091597, "question_id": 53091208, "link": "https://stackoverflow.com/questions/53091208/how-to-convert-string-to-dict-and-if-same-key-appears-twice-then-make-its-value/53091597#53091597", "title": "How to convert string to dict and if same key appears twice then make its value as list", "body": "<p>You can define a function and pass a generator:</p>\n\n<pre><code>s = 'o=foo t=bar t=baz f=zap'\nq = 'o=foo t=bar t=baz t=bop f=zap'\n\ndef dict_fromitems(items):\n\n    d = dict()\n    for (k, v) in items:\n        if k in d:\n            d[k] = (d[k] if type(d[k])==list else [d[k]]) + [v]\n        else:\n            d[k] = v\n    return d\n\ns_dict = dict_fromitems((i.split('=') for i in s.split()))\nq_dict = dict_fromitems((i.split('=') for i in q.split()))\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>{'o': 'foo', 't': ['bar', 'baz'], 'f': 'zap'}\n{'o': 'foo', 't': ['bar', 'baz', 'bop'], 'f': 'zap'}\n</code></pre>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 53091597, "answer_count": 2, "score": -5, "last_activity_date": 1541018270, "creation_date": 1541016539, "last_edit_date": 1541016794, "question_id": 53091208, "link": "https://stackoverflow.com/questions/53091208/how-to-convert-string-to-dict-and-if-same-key-appears-twice-then-make-its-value", "title": "How to convert string to dict and if same key appears twice then make its value as list", "body": "<pre><code>s = 'o=foo t=bar t=baz f=zap'\n</code></pre>\n\n<p>How to convert this string into dict, but if same key is repeated, make it as list?</p>\n\n<p>Expecting:</p>\n\n<pre><code>{'o': 'foo', 't': ['bar','baz'], 'f': 'zap'}\n</code></pre>\n\n<p>Tried:</p>\n\n<pre><code>&gt;&gt;&gt; dict(token.split('=') for token in shlex.split(s))\n{'o': 'foo', 't': 'baz', 'f': 'zap'}\n</code></pre>\n"}, {"tags": ["python", "pygame", "sprite", "collision-detection"], "comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1541099203, "post_id": 53091203, "comment_id": 93110878, "body": "Please read the <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete and Verifiable example page</a>. It can be very time intensive to analyze and debug so much unknown code."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10564480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c229dd4a36a0f1e0e70e3090087890a?s=128&d=identicon&r=PG&f=1", "display_name": "gsmith257", "link": "https://stackoverflow.com/users/10564480/gsmith257"}, "edited": false, "score": 0, "creation_date": 1541042988, "post_id": 53092052, "comment_id": 93086181, "body": "Ok so this fixed the original problem but now I am running into an additional problem. Whenever you collide with a monster you should kill it and it dissapears but it is killing the monster and the monster is staying so your player dies when you touch the monster. I have updated the code in the original question so that you can have a look at it and see if you can see what I am not."}, {"owner": {"reputation": 45, "user_id": 10564480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c229dd4a36a0f1e0e70e3090087890a?s=128&d=identicon&r=PG&f=1", "display_name": "gsmith257", "link": "https://stackoverflow.com/users/10564480/gsmith257"}, "edited": false, "score": 1, "creation_date": 1541083281, "post_id": 53092052, "comment_id": 93102382, "body": "ok I apologize. I have reverted it back to the previous version. I will start a new question. Thank you for your help."}], "tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": true, "score": 2, "last_activity_date": 1541020473, "creation_date": 1541020473, "answer_id": 53092052, "question_id": 53091203, "link": "https://stackoverflow.com/questions/53091203/pygame-spritecollide-detecting-collision-between-sprites-even-when-they-are-no/53092052#53092052", "title": "Pygame.spritecollide() detecting collision between sprites even when they are not touching", "body": "<p>After playing around a bit (pun!): you don't set the chest's sprite width and height, so it stays the size of your image \u2013 99x99 pixels. The call to <code>collide</code> works, but it checks against the much larger entire image.</p>\n\n<p>If you set it explicitly to 32x32, <code>collide</code> starts to work as expected:</p>\n\n<pre><code>    self.rect = self.image.get_rect()\n    self.rect.x = x  # 425\n    self.rect.y = y  # 327\n    self.rect.topleft = self.rect.x, self.rect.y\n    print (self.rect.width,self.rect.height)\n    self.rect.width = 32\n    self.rect.height = 32\n</code></pre>\n\n<p>-- here the <code>print</code> shows that its size is still <code>99x99</code>, the size of the image itself. (I didn't test but your player sprite may have the same problem, as you construct it the same way.)</p>\n\n<p>To get it to open when you are nearby, change its <code>rect.x</code>, <code>rect.y</code>, <code>rect.width</code>, and <code>rect.height</code> to a larger rectangle.</p>\n\n<blockquote>\n  <p>Also want the chest to add a sword and key to inventory[] when touching the player but only once.</p>\n</blockquote>\n\n<p>Umm, you must mean the other way around here. Your code <em>prints</em> \"you opened a chest\" nine times, but you only <em>add</em> a single sword and key once. From your description, I assume you want this instead:</p>\n\n<pre><code>print(\"You opened a chest\")\nfor x in range(9):\n    inventory.append(\"sword\")\n    inventory.append(\"key\")\n</code></pre>\n\n<p>or in a single line</p>\n\n<pre><code>inventory += ['sword','key']*9\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10564480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c229dd4a36a0f1e0e70e3090087890a?s=128&d=identicon&r=PG&f=1", "display_name": "gsmith257", "link": "https://stackoverflow.com/users/10564480/gsmith257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 53092052, "answer_count": 1, "score": 1, "last_activity_date": 1541083214, "creation_date": 1541016519, "last_edit_date": 1541083214, "question_id": 53091203, "link": "https://stackoverflow.com/questions/53091203/pygame-spritecollide-detecting-collision-between-sprites-even-when-they-are-no", "title": "Pygame.spritecollide() detecting collision between sprites even when they are not touching", "body": "<p>I have not found any questions similar to this on the internet. I want pygame to detect when the player is colliding with another sprite, such as the chest or one of the monsters, but it is detecting the player is colliding with them even when they are not touching, also note it is not 100% of the time, its only in certain areas they are colliding.</p>\n\n<p>My goal is to get the game to detect when the player touches a monster and then have one of the player's swords removed and the monster be killed or if the player has no sword the Player dies. Also want the chest to add a sword and key to <code>inventory[]</code> when touching the player but only once. I got that to work, but it open the chest when you get near it instead of when you touch it, same with monsters.</p>\n\n<p>Here is <a href=\"https://drive.google.com/drive/folders/1kTyHYXma2z2hTvhnBFLVCtqOuvDB0QsJ?usp=sharing\" rel=\"nofollow noreferrer\">the folder with all the images I am using</a>.</p>\n\n<p>And here is my code:</p>\n\n<pre><code># TODO NOTES\n# 1. create a title screen\n# 2. put all walls into game\n# 3. make it so you win when you beat all monsters\n\n\nimport pygame, sys, time\nimport random\nimport os\nfrom pygame.locals import *\npygame.init()\npygame.font.init()\n\ndisplay_width = 800\ndisplay_height = 600\ngameDisplay = pygame.display.set_mode((display_width, display_height))\n\npygame.display.set_caption('Welcome to G\\'s game')\nclock = pygame.time.Clock()\n\n#def text_objects(text, font):\n #   textSurface = font.render(text, True, (0, 0, 0))\n  #  return textSurface, textSurface.get_rect()\n\n#def message_display(text):\n #   largeText = pygame.font.Font('freesansbold.ttf', 25)\n  #  TextSurf, TextRect = text_objects(text, largeText)\n   # TextRect.center = ((display_width-600),(display_height-200))\n    #gameDisplay.blit(TextSurf, TextRect)\n\n#myfont = pygame.font.SysFont('ariel', 50)\n#textsurface = myfont.render('Welcome to \\n G\\'s game', False, (0, 0, 0))\n\n\n\n# TODO NOTES\n# 1. create a title screen\n# 2. put all walls into game\n# 3. make it so you win when you beat all monsters\n\n\nimport pygame, sys, time\nimport random\nimport os\nfrom pygame.locals import *\npygame.init()\npygame.font.init()\n\ndisplay_width = 800\ndisplay_height = 600\ngameDisplay = pygame.display.set_mode((display_width, display_height))\n\npygame.display.set_caption('Welcome to G\\'s game')\nclock = pygame.time.Clock()\n\n#def text_objects(text, font):\n #   textSurface = font.render(text, True, (0, 0, 0))\n  #  return textSurface, textSurface.get_rect()\n\n#def message_display(text):\n #   largeText = pygame.font.Font('freesansbold.ttf', 25)\n  #  TextSurf, TextRect = text_objects(text, largeText)\n   # TextRect.center = ((display_width-600),(display_height-200))\n    #gameDisplay.blit(TextSurf, TextRect)\n\n#myfont = pygame.font.SysFont('ariel', 50)\n#textsurface = myfont.render('Welcome to \\n G\\'s game', False, (0, 0, 0))\n\n\n\n    #Initial Values\nlen_sprt_x = 21\nlen_sprt_y = 32 #sprite size\nsprt_rect_x = 5\nsprt_rect_y = 160 #where to find first sprite on sheet\n\nSPRT_RECT_X=0\nSPRT_RECT_Y=0\n#This is where the sprite is found on the sheet\n\nLEN_SPRT_X=100\nLEN_SPRT_Y=100\n#This is the length of the sprite\n\nscreen = pygame.display.set_mode((20, 30)) #Create the screen\nsheet = pygame.image.load('/Users/***/Downloads/3KvKpwY.png') #Load the sheet\nsheet_chests = pygame.image.load(\"/Users/GrantSmith/***/154057568119963649.png\")\n\nmonsters = pygame.image.load(\"/Users/GrantSmith/***/Typhon_Monster-Sire_Sprite.png\")\ndraw_monsters = pygame.transform.scale(monsters, (55, 45))\n\nsheet.set_clip(pygame.Rect(sprt_rect_x, sprt_rect_y, len_sprt_x, len_sprt_y)) #Locate the sprite you want\nsheet_chests.set_clip(pygame.Rect(32, 8, 34, 33))\ndraw_me2 = sheet_chests.subsurface(sheet_chests.get_clip())\ndraw_me = sheet.subsurface(sheet.get_clip()) #Extract the sprite you want\ndirection = \"none\"\n\ndef text_objects(text, font):   #dont need this anymore\n    textSurface = font.render(text, True, (0, 0, 0))\n    return textSurface, textSurface.get_rect()\n\ndef game_intro():       #dont need this anymore\n    intro = True\n\n    while intro:\n        gameDisplay.fill(WHITE)\n        largeText = pygame.font.SysFont('ariel', 50)\n        TextSurf, TextRect = text_objects(\"Welcome to Grant\\'s game\", largeText)\n        TextRect.center = ((display_width / 2), (display_height / 2))\n        gameDisplay.blit(TextSurf, TextRect)\n        pygame.display.update()\n        time.sleep(5)\n        intro = False\n\nclass EasyChest(pygame.sprite.Sprite):\n    def __init__(self, x, y):\n        \"\"\" Constructor for the wall that the player can run into. \"\"\"\n        # Call the parent's constructor\n        super().__init__()\n        self.image = pygame.image.load(\"/Users/***/Downloads/154057568119963649.png\")\n        self.rect = self.image.get_rect()\n        self.rect.x = x  # 425\n        self.rect.y = y  # 327\n        self.rect.topleft = self.rect.x, self.rect.y\n\n\nclass Monster(pygame.sprite.Sprite):\n    def __init__(self, x, y):\n        super().__init__()\n        self.image = pygame.image.load(\"/Users/***/Downloads/Typhon_Monster-Sire_Sprite.png\")\n        self.rect = self.image.get_rect()\n        self.rect.x = x #175\n        self.rect.y = y #520\n        self.rect.topleft = self.rect.x, self.rect.y\n\n\nclass Monster2(pygame.sprite.Sprite):\n    def __init__(self, x, y):\n        super().__init__()\n        self.image = pygame.image.load(\"/Users/***/Downloads/Typhon_Monster-Sire_Sprite.png\")\n        self.rect = self.image.get_rect()\n        self.rect.x = x #330\n        self.rect.y = y #400\n        self.rect.topleft = self.rect.x, self.rect.y\n\n\nclass Monster3(pygame.sprite.Sprite):\n    def __init__(self, x, y):\n        super().__init__()\n        self.image = pygame.image.load(\"/Users/***/Downloads/Typhon_Monster-Sire_Sprite.png\")\n        self.rect = self.image.get_rect()\n        self.rect.x = x #285\n        self.rect.y = y #190\n        self.rect.topleft = self.rect.x, self.rect.y\n\n\ninventory = []\ninventory.append(\"sword\")\nclass Player(pygame.sprite.Sprite):\n    \"\"\"Spawn a player.\"\"\"\n\n    def __init__(self):\n        self.image = draw_me  # Assign the player image.\n        # Assign the topleft coords of the rect.\n        self.rect = self.image.get_rect(topleft=(450, 685))\n        # The direction should be an instance attribute not a global variable.\n        self.direction = None\n        self.rect.topleft = self.rect.x, self.rect.y\n\n    def keys(self, event):\n        \"\"\"Control player movement.\"\"\"\n        if event.type == pygame.KEYDOWN:\n            if event.key in (pygame.K_LEFT, pygame.K_a):\n                self.direction = \"left\"\n                self.rect.x += -steps\n            elif event.key in (pygame.K_RIGHT, pygame.K_d):\n                self.direction = \"right\"\n                self.rect.x += steps\n            elif event.key in (pygame.K_UP, pygame.K_w):\n                self.direction = \"up\"\n                self.rect.y += -steps\n            elif event.key in (pygame.K_DOWN, pygame.K_s):\n                self.direction = \"down\"\n                self.rect.y += steps\n            elif event.key == pygame.K_i:\n                print(inventory)\n            print(self.direction)\n        if event.type == pygame.KEYUP:\n            if event.key == pygame.K_LEFT or event.key == ord('a'):\n                print('left stop')\n            if event.key == pygame.K_RIGHT or event.key == ord('d'):\n                print('right stop')\n            if event.key == pygame.K_UP or event.key == ord('w'):\n                print('up stop')\n            if event.key == pygame.K_DOWN or event.key == ord('s'):\n                print('down stop')\n\nclass Wall(pygame.sprite.Sprite):\n\n    def __init__(self, x, y, width, height, color1):\n        \"\"\" Constructor for the wall that the player can run into. \"\"\"\n        # Call the parent's constructor\n        super().__init__()\n\n        # Make a blue wall, of the size specified in the parameters\n        self.image = pygame.Surface([width, height])\n        self.image.fill(color1)\n\n        # Make the top-left corner the passed-in location.\n        self.rect = self.image.get_rect()\n        self.rect.y = y\n        self.rect.x = x\n\n\nmapwidth = 20\nmapheight= 30\ntilesize = 25\n\n\n#define colors\nBLACK = (0, 0, 0)\nWHITE = (255, 255, 255)\nGREEN = (0, 255, 0)\nRED = (255, 0, 0)\nBLUE = (0, 0, 255)\nTROPICBLUE = (152,245,255)\nGREY = (142,142,142)\nWOOD = (156,102,31)\nPATH = (139,115,85)\nGINGER = (255,127,0)\nFACE = (238,213,183)\nFACESHADE = (205,183,158)\nRED1 = (165,42,42)\n\nHAIR = 0\nSKIN = 1\nNOSE = 2\nGRASS = 3\nWATER = 4\nDEEPWATER = 5\nMOUTH = 6\nDIRT = 7\nPATH = 8\n\ncolours = {\n    HAIR: GINGER,\n    SKIN:FACE,\n    NOSE: FACESHADE,\n    GRASS: GREEN,\n    WATER: TROPICBLUE,\n    DEEPWATER: BLUE,\n    MOUTH: RED1,\n    DIRT: WOOD,\n    PATH: PATH\n}\n\ntilemap = [\n    [DEEPWATER, WATER, DIRT, DIRT, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, WATER, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, DIRT],\n    [DEEPWATER, WATER, WATER, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, DIRT, DIRT, DIRT, DIRT, DIRT],\n    [DEEPWATER, DEEPWATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH],\n    [DEEPWATER, DEEPWATER, WATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, PATH, PATH, PATH, PATH, PATH, PATH, PATH, PATH],\n    [DEEPWATER, DEEPWATER, WATER, WATER, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT, DIRT],\n]\n\n#walls = []\n#for i in range(0, 35):\n#    boxes.append(Boxes())\n\n# LETS MAKE SOME WALLS!\n# \"IM GOING TO BUILD A WALL!\" -Pdaddy trump\n#21 walls to go\n\nwall_list = pygame.sprite.Group()\n\nwall1 = Wall(96, 0, 5, 100, BLUE)\nwall_list.add(wall1)\nwall2 = Wall(96, 100, 29, 5, BLUE)\nwall_list.add(wall2)\nwall3 = Wall(120, 100, 5, 350, BLUE)\nwall_list.add(wall3)\nwall4 = Wall(120, 450, 55, 5, BLUE)\nwall_list.add(wall4)\nwall4 = Wall(175, 450, 5, 50, BLUE)\nwall_list.add(wall4)\nwall5 = Wall(150, 495, 29, 5, BLUE)\nwall_list.add(wall5)\nwall6 = Wall(145, 495, 5, 85, BLUE)\nwall_list.add(wall6)\nwall7 = Wall(145, 575, 55, 5, BLUE)\nwall_list.add(wall7)\nwall8 = Wall(195, 575, 5, 75, BLUE)\nwall_list.add(wall8)\nwall9 = Wall(195, 650, 105, 5, BLUE)\nwall_list.add(wall9)\nwall10 = Wall(295, 650, 5, 75, BLUE)\nwall_list.add(wall10)\nwall11 = Wall(295, 725, 205, 5, BLUE)\nwall_list.add(wall11)\nwall12 = Wall(495, 675, 5, 50, BLACK)\nwall_list.add(wall12)\nwall13 = Wall(374, 675, 165, 5, BLUE)\nwall_list.add(wall13)\nwall14 = Wall(374, 450, 5, 228, BLUE)\nwall_list.add(wall14)\nwall13 = Wall(374, 450, 103, 5, BLUE)\nwall_list.add(wall13)\n\n\nsteps = 5\ndone = False\n\nmonster_list = pygame.sprite.Group()\nchest_list = pygame.sprite.Group()\n\nc1 = EasyChest(425, 327)\nc1Open = False\nchest_list.add(c1)\nm1 = Monster(175, 520)\nmonster_list.add(m1)\nm2 = Monster2(330, 400)\nmonster_list.add(m2)\nm3 = Monster3(285, 190)\nmonster_list.add(m3)\np1 = Player()\n\noffset_x = p1.rect[0] - p1.rect[0]\noffset_y = p1.rect[1] - p1.rect[1]\n\nm1Alive = True\nm2Alive = True\nm3Alive = True\n\nclock = pygame.time.Clock()  # A clock to limit the frame rate.\nmain = True\nmain1 = True\n\nwhile main:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            main = False\n        # Pass the previous event to the player in the event loop\n        # (once per event not per frame).\n        p1.keys(event)\n\n    if pygame.sprite.spritecollide(p1, wall_list, False):\n        print(\"sprites have collided!\")\n        # Move the player back one step if a collision occurred.\n        if p1.direction == \"left\":\n            p1.rect.x += steps\n        elif p1.direction == \"right\":\n            p1.rect.x -= steps\n        elif p1.direction == \"up\":\n            p1.rect.y += steps\n        elif p1.direction == \"down\":\n            p1.rect.y -= steps\n    if pygame.sprite.spritecollide(p1, chest_list, False):\n        if c1Open == False:\n            x = 1\n            while x &lt; 10:\n                print(\"You opened a chest\")\n                x=x+1\n            inventory.append(\"sword\")\n            inventory.append(\"key\")\n            c1Open = True\n\n    if pygame.sprite.collide_rect(p1, m1):\n        print(\"You are now fighting a monster!\")\n        if inventory.count(\"sword\") &gt; 0:\n            monster_list.remove(m1)\n            m1Alive = False\n            inventory.remove(\"sword\")\n        else:\n            print(\"you died\")\n            main = False\n    if pygame.sprite.collide_rect(p1, m2):\n        print(\"You are now fighting a monster!\")\n        if inventory.count(\"sword\") &gt; 0:\n            monster_list.remove(m2)\n            m2Alive = False\n            inventory.remove(\"sword\")\n        else:\n            print(\"you died\")\n            main = False\n    if pygame.sprite.collide_rect(p1, m3):\n        print(\"You are now fighting a monster!\")\n        if inventory.count(\"sword\") &gt; 0:\n            monster_list.remove(m3)\n            m3Alive = False\n            inventory.remove(\"sword\")\n        else:\n            print(\"you died\")\n            main = False\n\n\n    screen = pygame.display.set_mode((mapwidth * tilesize, mapheight * tilesize))\n    for row in range(mapheight):\n        for column in range(mapwidth):\n            backdrop1 = pygame.draw.rect(screen, colours[tilemap[row][column]],\n                                         (column * tilesize, row * tilesize, tilesize, tilesize))\n\n    backdrop = backdrop1\n    screen.blit(draw_me2, c1.rect)\n    if m1Alive == True:\n        screen.blit(draw_monsters, m1.rect)\n    if m2Alive == True:\n        screen.blit(draw_monsters, m2.rect)\n    if m3Alive == True:\n        screen.blit(draw_monsters, m3.rect)\n    wall_list.draw(screen)\n    # Blit the player image at the player rect.\n    screen.blit(p1.image, p1.rect)\n    # Test if the player rect moves correctly.\n    pygame.draw.rect(screen, (0, 0, 0), p1.rect, 1)\n    pygame.display.update()  # Call `display.update` only once per frame.\n    clock.tick(60)  # Limit the frame rate to 60 FPS.\n</code></pre>\n"}, {"tags": ["python", "class", "decorator"], "comments": [{"owner": {"reputation": 588, "user_id": 7232335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i1c85LPBShU/AAAAAAAAAAI/AAAAAAAAABI/qNWfzI_Tsr8/photo.jpg?sz=128", "display_name": "Nathaniel Jones", "link": "https://stackoverflow.com/users/7232335/nathaniel-jones"}, "edited": false, "score": 0, "creation_date": 1600469227, "post_id": 53091193, "comment_id": 113108515, "body": "Are the downvotes here because this is a poorly asked question, or because what I&#39;m trying to do is frowned upon? If the former: Ok, please leave a comment or suggest an edit. If the latter: This seems unnecessary. Good/bad practice can be addressed in answers and comments, which can be helpful to future readers."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1600469779, "post_id": 53091193, "comment_id": 113108635, "body": "what is <code>@Specifiable.specifiable</code>?? I didn&#39;t downvote, btw, just noticed this question was from a year ago..."}, {"owner": {"reputation": 588, "user_id": 7232335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i1c85LPBShU/AAAAAAAAAAI/AAAAAAAAABI/qNWfzI_Tsr8/photo.jpg?sz=128", "display_name": "Nathaniel Jones", "link": "https://stackoverflow.com/users/7232335/nathaniel-jones"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1600721175, "post_id": 53091193, "comment_id": 113171699, "body": "@juanpa.arrivillaga It&#39;s a parent class I had created to help me achieve the desired functionality for <code>BlankStruct</code>. (Though, as stated in the question, it wasn&#39;t working as desired.) It&#39;s defined in the third code block."}], "answers": [{"tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": false, "score": 2, "last_activity_date": 1541016990, "creation_date": 1541016990, "answer_id": 53091315, "question_id": 53091193, "link": "https://stackoverflow.com/questions/53091193/how-to-specify-python-class-attributes-with-constructor-keyword-arguments/53091315#53091315", "title": "How to specify Python class attributes with constructor keyword arguments", "body": "<p>Yes, you can do the following, however I do NOT recommend as this clearly goes against the <em>explicit is better than implicit</em> principle:</p>\n\n<pre><code>class BlankStruct:\n\n    def __init__(self, **attrs):\n        self.__dict__.update(**attrs)\n    def __getattr__(self, attr):\n        return self.__dict__.get(attr, None)\n\nf = BlankStruct(spam=0, eggs=1)\n</code></pre>\n\n<p>A more complete response is available <a href=\"https://stackoverflow.com/a/3884679/8146556\">here</a> and inspired this answer.</p>\n\n<p>I would recommend being <strong>explicit</strong> in terms of the properties you want your class to have. Otherwise, you are left with a class that has a high degree of variability, which likely detracts for it's usefulness.</p>\n"}, {"tags": [], "owner": {"reputation": 3515, "user_id": 3574628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5BJ2.jpg?s=128&g=1", "display_name": "luther", "link": "https://stackoverflow.com/users/3574628/luther"}, "is_accepted": false, "score": 0, "last_activity_date": 1541017337, "creation_date": 1541017337, "answer_id": 53091389, "question_id": 53091193, "link": "https://stackoverflow.com/questions/53091193/how-to-specify-python-class-attributes-with-constructor-keyword-arguments/53091389#53091389", "title": "How to specify Python class attributes with constructor keyword arguments", "body": "<p>I believe you can do this without decorators:</p>\n\n<pre><code>class Specifiable:\n\n  def __init__(self, **kwargs):\n    for key, value in kwargs.items():\n      setattr(self, key, value)\n\n\nclass BlankStruct(Specifiable):\n\n  def __init__(self, **kwargs):\n    super().__init__(**kwargs)\n    # Do other stuff.\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 7232335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i1c85LPBShU/AAAAAAAAAAI/AAAAAAAAABI/qNWfzI_Tsr8/photo.jpg?sz=128", "display_name": "Nathaniel Jones", "link": "https://stackoverflow.com/users/7232335/nathaniel-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1600469723, "creation_date": 1541016478, "last_edit_date": 1600469723, "question_id": 53091193, "link": "https://stackoverflow.com/questions/53091193/how-to-specify-python-class-attributes-with-constructor-keyword-arguments", "title": "How to specify Python class attributes with constructor keyword arguments", "body": "<p>I'm trying to come up with a way to allow specification of any number of class attributes upon instantiation, very similar to a dictionary. Ideal use case:</p>\n<pre><code>&gt;&gt;&gt; instance = BlankStruct(spam=0, eggs=1)\n&gt;&gt;&gt; instance.spam\n0\n&gt;&gt;&gt; instance.eggs\n1\n</code></pre>\n<p>where BlankStruct is defined as:</p>\n<pre><code>class BlankStruct(Specifiable):\n    @Specifiable.specifiable\n    def __init__(self, **kwargs):\n        pass\n</code></pre>\n<p>I was thinking of using a parent class decorator, but am lost in a mind-trip about whether to use instance methods, class methods or static methods (or possibly none of the above!). This is the best I've come up with so far, but the problem is that the attributes are applied to the class instead of the instance:</p>\n<pre><code>class Specifiable:\n    @classmethod\n    def specifiable(cls, constructor):\n        def constructor_wrapper(*args, **kwargs):\n            constructor(*args, **kwargs)\n            cls.set_attrs(**kwargs)\n        return constructor_wrapper\n\n    @classmethod\n    def set_attrs(cls, **kwargs):\n        for key in kwargs:\n            setattr(cls, key, kwargs[key])\n</code></pre>\n<p>How can I make such a parent class?</p>\n<hr />\n<p><strong>NOTE:</strong>\nYes, I know what I'm trying to do is bad practice. But sometimes you just have to do what your boss tells you.</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qradiobutton"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1541017002, "creation_date": 1541017002, "answer_id": 53091318, "question_id": 53091180, "link": "https://stackoverflow.com/questions/53091180/why-does-this-code-in-pyqt-allow-me-to-leave-all-radio-buttons-unchecked/53091318#53091318", "title": "Why does this code in PyQt allow me to leave all radio buttons unchecked?", "body": "<p>If you want this behavior you have to use a <code>QButtonGroup</code>:</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Win(QtWidgets.QDialog):\n    def __init__(self, parent=None):\n        super(Win, self).__init__(parent)\n        top_layout = QtWidgets.QHBoxLayout()\n\n        top_layout_1 = QtWidgets.QHBoxLayout()\n        self.thresh_btns = [QtWidgets.QRadioButton('L1'),\n                            QtWidgets.QRadioButton('L2'),\n                            QtWidgets.QRadioButton('L3')]\n        group_button = QtWidgets.QButtonGroup(self) # &lt;---\n        self.thresh_btns[0].setChecked(True)\n        for btn in self.thresh_btns:\n            top_layout_1.addWidget(btn)\n            group_button.addButton(btn)             # &lt;---\n\n        timestamp_groupbox = QtWidgets.QGroupBox('Timestamp')\n        top_layout_2 = QtWidgets.QVBoxLayout()\n        self.timestamp_current = QtWidgets.QRadioButton('Current')\n        self.timestamp_current.setChecked(True)\n        self.timestamp_target = QtWidgets.QRadioButton('Last')\n        top_layout_2.addWidget(self.timestamp_current)\n        top_layout_2.addWidget(self.timestamp_target)\n        timestamp_groupbox.setLayout(top_layout_2)\n\n        top_layout.addLayout(top_layout_1)\n        top_layout.addWidget(timestamp_groupbox)\n        self.setLayout(top_layout)\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    ex = Win()\n    ex.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53091318, "answer_count": 1, "score": 1, "last_activity_date": 1541017088, "creation_date": 1541016424, "last_edit_date": 1541017088, "question_id": 53091180, "link": "https://stackoverflow.com/questions/53091180/why-does-this-code-in-pyqt-allow-me-to-leave-all-radio-buttons-unchecked", "title": "Why does this code in PyQt allow me to leave all radio buttons unchecked?", "body": "<p>I wrote a mini code using PyQt and I got surprised when I noticed that it allows me to leave all buttons on the left unchecked. I don't want this behaviour: one of them should always be selected. The right side of the window works, though. I don't really know why. Here's the code:</p>\n\n<pre><code>from PyQt5 import QtWidgets, QtGui, QtCore\n\nclass Win(QtWidgets.QDialog):\n    def __init__(self, parent=None):\n        super(Win, self).__init__(parent)\n        top_layout = QtWidgets.QHBoxLayout()\n\n        top_layout_1 = QtWidgets.QHBoxLayout()\n        self.thresh_btns = [QtWidgets.QRadioButton('L1'),\n                            QtWidgets.QRadioButton('L2'),\n                            QtWidgets.QRadioButton('L3')]\n        self.thresh_btns[0].setChecked(True)\n        for btn in self.thresh_btns:\n            top_layout_1.addWidget(btn)\n\n        timestamp_groupbox = QtWidgets.QGroupBox('Timestamp')\n        top_layout_2 = QtWidgets.QVBoxLayout()\n        self.timestamp_current = QtWidgets.QRadioButton('Current')\n        self.timestamp_current.setChecked(True)\n        self.timestamp_target = QtWidgets.QRadioButton('Last')\n        top_layout_2.addWidget(self.timestamp_current)\n        top_layout_2.addWidget(self.timestamp_target)\n        timestamp_groupbox.setLayout(top_layout_2)\n\n        top_layout.addLayout(top_layout_1)\n        top_layout.addWidget(timestamp_groupbox)\n        self.setLayout(top_layout)\n\nif __name__ == '__main__':\n   app = QtWidgets.QApplication([])\n   ex = Win()\n   ex.show()\n   app.exec_()\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "keras", "activation-function"], "answers": [{"tags": [], "owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "is_accepted": true, "score": 1, "last_activity_date": 1541018258, "last_edit_date": 1541018258, "creation_date": 1541017818, "answer_id": 53091486, "question_id": 53091121, "link": "https://stackoverflow.com/questions/53091121/how-to-plot-keras-activation-functions-in-a-notebook/53091486#53091486", "title": "How to plot keras activation functions in a notebook", "body": "<p>That's because the <code>linear</code> activation returns the input without any modifications:</p>\n\n<pre><code>def linear(x):\n    \"\"\"Linear (i.e. identity) activation function.\n    \"\"\"\n    return x\n</code></pre>\n\n<p>Since you are passing a Pandas Series as input, the same Pandas Series will be returned and therefore you don't need to use <code>K.eval()</code>:</p>\n\n<pre><code>df[\"linear\"] = activations.linear(df[\"activation\"])\n</code></pre>\n\n<p>As for the <code>selu</code> activation, you need to reshape the input to <code>(n_samples, n_output)</code>:</p>\n\n<pre><code>df[\"selu\"] = K.eval(activations.selu(df[\"activation\"].values.reshape(-1,1)))\n</code></pre>\n\n<p>And as for the <code>hard_sigmoid</code> activation, its input should be explicitly a Tensor which you can create using <code>K.variable()</code>:</p>\n\n<pre><code>df[\"hard_sigmoid\"] = K.eval(activations.hard_sigmoid(K.variable(df[\"activation\"].values)))\n</code></pre>\n\n<p>Further, <code>exponential</code> activation works as you have written and there is no need for modifications.</p>\n"}], "owner": {"reputation": 5300, "user_id": 1298461, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/76f8604ac955a6ed812cf3d9cf803b6c?s=128&d=identicon&r=PG", "display_name": "KIC", "link": "https://stackoverflow.com/users/1298461/kic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 53091486, "answer_count": 1, "score": 0, "last_activity_date": 1541112366, "creation_date": 1541016092, "last_edit_date": 1541112366, "question_id": 53091121, "link": "https://stackoverflow.com/questions/53091121/how-to-plot-keras-activation-functions-in-a-notebook", "title": "How to plot keras activation functions in a notebook", "body": "<p>I wanted to plot all Keras activation functions but some of them are not working. i.e. <code>linear</code> throws an error: </p>\n\n<blockquote>\n  <p>AttributeError: 'Series' object has no attribute 'eval'</p>\n</blockquote>\n\n<p>which is weird. How can I plot the rest of my activation functions?</p>\n\n<pre><code>points = 100\nzeros = np.zeros((points,1))\n\ndf = pd.DataFrame({\"activation\": np.linspace(-1.2,1.2,points)})\ndf[\"softmax\"] = K.eval(activations.elu(df[\"activation\"]))\n#df[\"linear\"] = K.eval(activations.linear(df[\"activation\"]))\ndf[\"tanh\"] = K.eval(activations.tanh(df[\"activation\"]))\ndf[\"sigmoid\"] = K.eval(activations.sigmoid(df[\"activation\"]))\ndf[\"relu\"] = K.eval(activations.relu(df[\"activation\"]))\n#df[\"hard_sigmoid\"] = K.eval(activations.hard_sigmoid(df[\"activation\"]))\n#df[\"exponential\"] = K.eval(activations.exponential(df[\"activation\"]))\ndf[\"softsign\"] = K.eval(activations.softsign(df[\"activation\"]))\ndf[\"softplus\"] = K.eval(activations.softplus(df[\"activation\"]))\n#df[\"selu\"] = K.eval(activations.selu(df[\"activation\"]))\ndf[\"elu\"] = K.eval(activations.elu(df[\"activation\"]))\n\ndf.plot(x=\"activation\", figsize=(15,15))\n</code></pre>\n"}]