[{"tags": ["python", "xml", "csv", "xpath", "elementtree"], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "edited": false, "score": 0, "creation_date": 1438821604, "post_id": 31844901, "comment_id": 51611411, "body": "That is perfect! Thanks a ton!"}], "tags": [], "owner": {"reputation": 5214, "user_id": 439494, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7aa99d0eed60260a2937e56cf9560138?s=128&d=identicon&r=PG", "display_name": "Havok", "link": "https://stackoverflow.com/users/439494/havok"}, "is_accepted": true, "score": 11, "last_activity_date": 1438821000, "last_edit_date": 1438821000, "creation_date": 1438820684, "answer_id": 31844901, "question_id": 31844713, "link": "https://stackoverflow.com/questions/31844713/convert-xml-to-csv-file/31844901#31844901", "title": "Convert XML to CSV file", "body": "<p>Do not use the <code>findall</code> function, as it will look for att tags in the whole tree. Just iterate the tree in order from top to bottom and grab the relevant elements in them.</p>\n\n<pre><code>from xml.etree import ElementTree\ntree = ElementTree.parse('input.xml')\nroot = tree.getroot()\n\nfor att in root:\n    first = att.find('attval').text\n    for subatt in att.find('children'):\n        second = subatt.find('attval').text\n        print('{},{}'.format(first, second))\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>$ python process.py \nData,Studyval\nData,Site\nInfo,age\nInfo,gender\n</code></pre>\n"}], "owner": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58053, "favorite_count": 7, "accepted_answer_id": 31844901, "answer_count": 1, "score": 7, "last_activity_date": 1600273790, "creation_date": 1438819156, "last_edit_date": 1600273790, "question_id": 31844713, "link": "https://stackoverflow.com/questions/31844713/convert-xml-to-csv-file", "title": "Convert XML to CSV file", "body": "<p>I have an XML file like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;hierachy&gt;\n    &lt;att&gt;\n        &lt;Order&gt;1&lt;/Order&gt;\n        &lt;attval&gt;Data&lt;/attval&gt;\n        &lt;children&gt;\n            &lt;att&gt;\n                &lt;Order&gt;1&lt;/Order&gt;\n                &lt;attval&gt;Studyval&lt;/attval&gt;\n            &lt;/att&gt;\n            &lt;att&gt;\n                &lt;Order&gt;2&lt;/Order&gt;\n                &lt;attval&gt;Site&lt;/attval&gt;\n            &lt;/att&gt;\n        &lt;/children&gt;\n    &lt;/att&gt;\n    &lt;att&gt;\n        &lt;Order&gt;2&lt;/Order&gt;\n        &lt;attval&gt;Info&lt;/attval&gt;\n        &lt;children&gt;\n            &lt;att&gt;\n                &lt;Order&gt;1&lt;/Order&gt;\n                &lt;attval&gt;age&lt;/attval&gt;\n            &lt;/att&gt;\n            &lt;att&gt;\n                &lt;Order&gt;2&lt;/Order&gt;\n                &lt;attval&gt;gender&lt;/attval&gt;\n            &lt;/att&gt;\n        &lt;/children&gt;\n    &lt;/att&gt;\n&lt;/hierachy&gt;\n</code></pre>\n<p>I'm trying to convert it to a CSV file like this:</p>\n<pre><code>Data,Studyval\nDate,Site\nInfo,age\nInfo,gender\n</code></pre>\n<p>My problem is, both the parent and child names are the same - <code>'att'</code> and <code>'attval'</code>. How do I tell Python to distinguish between them both and give me the output?</p>\n<p>I tried this:</p>\n<pre><code>import xml.etree.cElementTree as ET\n\ntree = ET.parse('input.xml')\nrebase = tree.getroot()\n\nlist = []\n\nfor att in rebase.findall('att'):\n        name = att.find('attval').text\n        for each_att in att.findall('attval'):\n            try:\n                val = att.find('attval').text\n                print name, val\n            except AttributeError:\n                print name\n</code></pre>\n<p>and it printed the same things twice.</p>\n"}, {"tags": ["python", "linux", "user-interface", "raspberry-pi2"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5194995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pZnsW.jpg?s=128&g=1", "display_name": "O&#39;Mac", "link": "https://stackoverflow.com/users/5194995/omac"}, "edited": false, "score": 0, "creation_date": 1438984241, "post_id": 31845065, "comment_id": 51691847, "body": "Thanks a lot, Peter, This is what I was looking for !  I will also investigate Micah&#39;s suggestion above, but this solution could give me the professional looks with the tightness I searching for.  I appreciate your preamble on X server as well !"}, {"owner": {"reputation": 16397, "user_id": 66349, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9c13b93d65bbb06c10fc349fa36b67dc?s=128&d=identicon&r=PG", "display_name": "Peter Gibson", "link": "https://stackoverflow.com/users/66349/peter-gibson"}, "reply_to_user": {"reputation": 11, "user_id": 5194995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pZnsW.jpg?s=128&g=1", "display_name": "O&#39;Mac", "link": "https://stackoverflow.com/users/5194995/omac"}, "edited": false, "score": 0, "creation_date": 1438996887, "post_id": 31845065, "comment_id": 51694865, "body": "@O&#39;Mac No worries, good luck. If you feel this answered your question, could you mark it as the accepted answer (click the tick under the vote up/down arrows)."}], "tags": [], "owner": {"reputation": 16397, "user_id": 66349, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9c13b93d65bbb06c10fc349fa36b67dc?s=128&d=identicon&r=PG", "display_name": "Peter Gibson", "link": "https://stackoverflow.com/users/66349/peter-gibson"}, "is_accepted": false, "score": 2, "last_activity_date": 1438821937, "last_edit_date": 1492088182, "creation_date": 1438821937, "answer_id": 31845065, "question_id": 31844708, "link": "https://stackoverflow.com/questions/31844708/how-to-create-simple-gui-for-embedded-raspberry-pi/31845065#31845065", "title": "How to create simple GUI for &quot;embedded&quot; Raspberry Pi?", "body": "<p>Typically when you launch an X server, it runs a window manager or desktop environment for you (eg Gnome, Unity, KDE). This is the component that handles resizing of other programs and drawing window decorations. The individual apps usually just draw the contents of the window.</p>\n\n<p>You can start an X server without a window manager, by specifying which program you would like to run as an argument to <code>startx</code>. For example, from <a href=\"https://raspberrypi.stackexchange.com/questions/11866/how-can-i-start-x11-only-for-a-single-application\">https://raspberrypi.stackexchange.com/questions/11866/how-can-i-start-x11-only-for-a-single-application</a></p>\n\n<pre><code>startx chromium --kiosk --\n</code></pre>\n\n<p>This launches chromium in kiosk mode. You could substitute (for example) a tkinter program in it's place, although you may have to detect the screen size and resize and position your application appropriately.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5194995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pZnsW.jpg?s=128&g=1", "display_name": "O&#39;Mac", "link": "https://stackoverflow.com/users/5194995/omac"}, "edited": false, "score": 0, "creation_date": 1438984111, "post_id": 31847072, "comment_id": 51691792, "body": "Thanks Micah. This is an interesting solution. Dialog seems to be capable of a more modern look. I will investigate it further!"}], "tags": [], "owner": {"reputation": 7219, "user_id": 326516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61292ea4b013ef2834a28f9ff390c6fd?s=128&d=identicon&r=PG", "display_name": "Micah Elliott", "link": "https://stackoverflow.com/users/326516/micah-elliott"}, "is_accepted": false, "score": 2, "last_activity_date": 1438836598, "creation_date": 1438836598, "answer_id": 31847072, "question_id": 31844708, "link": "https://stackoverflow.com/questions/31844708/how-to-create-simple-gui-for-embedded-raspberry-pi/31847072#31847072", "title": "How to create simple GUI for &quot;embedded&quot; Raspberry Pi?", "body": "<p>There are a couple of \u201cTUI\u201d options available (T being for Text instead of Graphical) that don\u2019t need X. You\u2019ll get buttons and other widgets that may suffice for your needs. Look into <a href=\"http://linuxgazette.net/101/sunil.html\" rel=\"nofollow\">Dialog</a> and <a href=\"https://en.wikibooks.org/wiki/Bash_Shell_Scripting/Whiptail\" rel=\"nofollow\">Whiptail</a>. Here is a nice <a href=\"https://www.youtube.com/watch?v=HZLt2KT4aLA\" rel=\"nofollow\">Whiptail video demo</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 1999969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03446672d3841c514d1937b7964b609?s=128&d=identicon&r=PG", "display_name": "G&#225;bor Kiss-V&#225;mosi", "link": "https://stackoverflow.com/users/1999969/g%c3%a1bor-kiss-v%c3%a1mosi"}, "is_accepted": false, "score": 0, "last_activity_date": 1593833625, "creation_date": 1593833625, "answer_id": 62724984, "question_id": 31844708, "link": "https://stackoverflow.com/questions/31844708/how-to-create-simple-gui-for-embedded-raspberry-pi/62724984#62724984", "title": "How to create simple GUI for &quot;embedded&quot; Raspberry Pi?", "body": "<p>Take a look at <a href=\"https://lvgl.io\" rel=\"nofollow noreferrer\">LVGL</a>. It's open source, easy to port, and can use <code>/dev/fb</code> directly without any window manager.</p>\n"}], "owner": {"reputation": 11, "user_id": 5194995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pZnsW.jpg?s=128&g=1", "display_name": "O&#39;Mac", "link": "https://stackoverflow.com/users/5194995/omac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5510, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1593833625, "creation_date": 1438819118, "question_id": 31844708, "link": "https://stackoverflow.com/questions/31844708/how-to-create-simple-gui-for-embedded-raspberry-pi", "title": "How to create simple GUI for &quot;embedded&quot; Raspberry Pi?", "body": "<p>I hope this is not a too generic question for this forum.</p>\n\n<p>I would like to create a simple GUI with just three or four clickable selections without the typical GUI open/close/resize options.</p>\n\n<p>I am an inexperienced programmer and as a hobby I created a data logger for temperature, humidity, etc. It runs on well Raspberry Pi under Linux/Raspbian and a Python code. I can send data over the network and visualize it over a web-interface.</p>\n\n<p>However, I would like to create a local display at the data collection point that would work off-line. I would like the user to be able to select among three or four display visualizations.</p>\n\n<p>I investigated a bit using tkinter, but I would not like the user to be able to close windows nor resize them, etc (typical GUI operations). I am looking for a similar look and feel of a typical embedded software in car GPS devices. Any windows-type environment would clutter my 4\u201d screen.\nIt seems that we have either full-blown GUIs like tkinter or PyGTK or a local web display. Both of these solutions run on top of the Windows X, which seems to be an overkill and does not limit the user ability to interact with the system.</p>\n\n<p>I could not find any solution. For example this Instructable: <a href=\"http://www.instructables.com/id/Raspberry-Pi-Wall-Display-Without-X-Windows/\" rel=\"nofollow\">http://www.instructables.com/id/Raspberry-Pi-Wall-Display-Without-X-Windows/</a>  is really just a slide-show system.</p>\n\n<p>Can anyone recommend a solution for this?\nThanks! </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 2, "creation_date": 1438818633, "post_id": 31844574, "comment_id": 51610692, "body": "Nitpick: by convention, surround your <code>repr</code> result with <code>&lt;&gt;</code> if it isn&#39;t valid python syntax (but there is no requirement for non-<code>&lt;&gt;</code> <code>repr</code>s to be <code>eval</code>able)."}, {"owner": {"reputation": 265978, "user_id": 116, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/f6flX.jpg?s=128&g=1", "display_name": "Mark Harrison", "link": "https://stackoverflow.com/users/116/mark-harrison"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1438826534, "post_id": 31844574, "comment_id": 51612537, "body": "@o11c, thanks, I didn&#39;t realize that.  updated."}], "answers": [{"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438819344, "post_id": 31844605, "comment_id": 51610860, "body": "Probably more conventional to use <code>return &#39;my stuff, at 0x%08x&#39; % id(self)</code>."}, {"owner": {"reputation": 5986, "user_id": 659346, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3e133f6f906deaea5626b24d0c0ff69e?s=128&d=identicon&r=PG", "display_name": "GP89", "link": "https://stackoverflow.com/users/659346/gp89"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438853001, "post_id": 31844605, "comment_id": 51623597, "body": "@martineau I guess that depends if you&#39;re running 32 or 64bit python, but I don&#39;t think the default <code>__repr__</code> puts leading zeros in anyway"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438857643, "post_id": 31844605, "comment_id": 51626810, "body": "Actually the 32-bit version <i>does</i> pad with zeroes, I just got a <code>&lt;object object at 0x01C984A8&gt;</code> from it. Anyway, I meant the conventional way memory addresses are displayed. The interpreter&#39;s bitness can be determined from <code>sys.maxsize</code>, so the format string could be adjusted automatically."}, {"owner": {"reputation": 5986, "user_id": 659346, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3e133f6f906deaea5626b24d0c0ff69e?s=128&d=identicon&r=PG", "display_name": "GP89", "link": "https://stackoverflow.com/users/659346/gp89"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438860187, "post_id": 31844605, "comment_id": 51628343, "body": "@martineau odd, I&#39;m not sure as in my 32bit version I get <code>&lt;object object at 0x2404d8&gt;</code>, and @MarkHarrison and @WilCooley both appear to have 9 chars in theirs, so I&#39;ve no idea."}], "tags": [], "owner": {"reputation": 5986, "user_id": 659346, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3e133f6f906deaea5626b24d0c0ff69e?s=128&d=identicon&r=PG", "display_name": "GP89", "link": "https://stackoverflow.com/users/659346/gp89"}, "is_accepted": false, "score": 5, "last_activity_date": 1438835656, "last_edit_date": 1438835656, "creation_date": 1438818376, "answer_id": 31844605, "question_id": 31844574, "link": "https://stackoverflow.com/questions/31844574/python-how-can-i-get-an-objects-address-in-the-repr-method/31844605#31844605", "title": "Python: how can I get an object&#39;s address in the __repr__ method?", "body": "<pre><code>class Foo(object):\n    def __repr__(self):\n        return '&lt;my stuff, at 0x%x&gt;' % id(self)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 1, "creation_date": 1438827718, "post_id": 31844613, "comment_id": 51612810, "body": "More precisely, the <code>id()</code> of an object is &quot;an integer which is guaranteed to be unique and constant for this object during its lifetime&quot;. In the CPython reference implementation it happens to be the address, but it need not be."}], "tags": [], "owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "is_accepted": true, "score": 10, "last_activity_date": 1438818425, "creation_date": 1438818425, "answer_id": 31844613, "question_id": 31844574, "link": "https://stackoverflow.com/questions/31844574/python-how-can-i-get-an-objects-address-in-the-repr-method/31844613#31844613", "title": "Python: how can I get an object&#39;s address in the __repr__ method?", "body": "<p>The address is the ID of the object in hex:</p>\n\n<pre><code>&gt;&gt;&gt; o = object()\n&gt;&gt;&gt; repr(o)\n'&lt;object object at 0x1028ed080&gt;'\n&gt;&gt;&gt; id(o)\n4337881216\n&gt;&gt;&gt; hex(id(o))\n'0x1028ed080'\n</code></pre>\n"}], "owner": {"reputation": 265978, "user_id": 116, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/f6flX.jpg?s=128&g=1", "display_name": "Mark Harrison", "link": "https://stackoverflow.com/users/116/mark-harrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4546, "favorite_count": 1, "accepted_answer_id": 31844613, "answer_count": 2, "score": 5, "last_activity_date": 1438835656, "creation_date": 1438818173, "last_edit_date": 1438826501, "question_id": 31844574, "link": "https://stackoverflow.com/questions/31844574/python-how-can-i-get-an-objects-address-in-the-repr-method", "title": "Python: how can I get an object&#39;s address in the __repr__ method?", "body": "<p>How can I get an object's address for inclusion in the object representation, similar to how the default <code>__repr__</code> works?</p>\n\n<pre><code>&gt;&gt;&gt; a=object()\n&gt;&gt;&gt; a\n&lt;object object at 0x1002c8090&gt;\n\nclass Foo(object):\n    def __repr__(self):\n        return '&lt;my stuff, at '+obj_address+'&gt;' # how do I get object address?\n</code></pre>\n"}, {"tags": ["python", "django", "amazon-s3", "boto", "django-storage"], "comments": [{"owner": {"reputation": 1025, "user_id": 3146034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b74a0572aeea8834de5e8ceaa204530d?s=128&d=identicon&r=PG&f=1", "display_name": "mknecht", "link": "https://stackoverflow.com/users/3146034/mknecht"}, "edited": false, "score": 0, "creation_date": 1438832326, "post_id": 31844534, "comment_id": 51613923, "body": "Really seems rather weird that you get an exception mail, while the thread is stuck. How do you know it&#39;s still stuck in the <code>exists</code> function, after the mail gets sent? In case you don&#39;t know those, <a href=\"http://uwsgi-docs.readthedocs.org/en/latest/Tracebacker.html\" rel=\"nofollow noreferrer\">pytracebacker-sockets</a> may help with analyzing, <a href=\"http://uwsgi-docs.readthedocs.org/en/latest/Glossary.html#term-harakiri\" rel=\"nofollow noreferrer\">harakiri</a> with recovery."}, {"owner": {"reputation": 688, "user_id": 4555439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/480309134183db7bfce1c1bd6f95594b?s=128&d=identicon&r=PG&f=1", "display_name": "JustinHK", "link": "https://stackoverflow.com/users/4555439/justinhk"}, "reply_to_user": {"reputation": 1025, "user_id": 3146034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b74a0572aeea8834de5e8ceaa204530d?s=128&d=identicon&r=PG&f=1", "display_name": "mknecht", "link": "https://stackoverflow.com/users/3146034/mknecht"}, "edited": false, "score": 0, "creation_date": 1438864844, "post_id": 31844534, "comment_id": 51631395, "body": "I don&#39;t know for certain that&#39;s what&#39;s happening, it&#39;s entirely possible that the exception was sent by a different worker, and this one is just stuck on the exists.  The traceback was from pytracebacker-sockets, but I don&#39;t want to add harakiri until I have a good idea what&#39;s happening!"}, {"owner": {"reputation": 1025, "user_id": 3146034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b74a0572aeea8834de5e8ceaa204530d?s=128&d=identicon&r=PG&f=1", "display_name": "mknecht", "link": "https://stackoverflow.com/users/3146034/mknecht"}, "edited": false, "score": 0, "creation_date": 1438920175, "post_id": 31844534, "comment_id": 51657637, "body": "Well, <i>this</i> thread is stuck while already reading from the network. So, there should be a timeout. Besides making sure that S3 access is fast from exactly where the Django process is running, I&#39;d watch that particular worker using IPDB or with logging, let it timeout, and see what it does afterwards. Maybe the requests are just slow enough to fill up all your uWSGI workers? Also, it&#39;d be good to know if the exception mail is reproducibly connected to the waiting."}, {"owner": {"reputation": 688, "user_id": 4555439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/480309134183db7bfce1c1bd6f95594b?s=128&d=identicon&r=PG&f=1", "display_name": "JustinHK", "link": "https://stackoverflow.com/users/4555439/justinhk"}, "reply_to_user": {"reputation": 1025, "user_id": 3146034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b74a0572aeea8834de5e8ceaa204530d?s=128&d=identicon&r=PG&f=1", "display_name": "mknecht", "link": "https://stackoverflow.com/users/3146034/mknecht"}, "edited": false, "score": 0, "creation_date": 1439312110, "post_id": 31844534, "comment_id": 51804903, "body": "Thanks for the help, I&#39;ll keep investigating."}], "owner": {"reputation": 688, "user_id": 4555439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/480309134183db7bfce1c1bd6f95594b?s=128&d=identicon&r=PG&f=1", "display_name": "JustinHK", "link": "https://stackoverflow.com/users/4555439/justinhk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438817906, "creation_date": 1438817906, "question_id": 31844534, "link": "https://stackoverflow.com/questions/31844534/django-exception-causing-hung-process-with-uwsgi-s3-key-check", "title": "Django exception causing hung process with uwsgi &amp; S3 key check", "body": "<p>We are running a django app using uwsgi that hangs when it checks for a file on S3 that isn't there.  We receive an exception email, suggesting it has been thrown, but the process remains stuck on the key.exists function.  We're baffled as to why it's not exiting, and these calls are causing our system to, eventually, completely choke up.  Any help is appreciated!</p>\n\n<pre><code>thread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/storages/backends/s3boto.py lineno = 414 function = exists line = return k.exists()\nthread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/boto/s3/key.py lineno = 539 function = exists line = return bool(self.bucket.lookup(self.name, headers=headers))\nthread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/boto/s3/bucket.py lineno = 142 function = lookup line = return self.get_key(key_name, headers=headers)\nthread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/boto/s3/bucket.py lineno = 192 function = get_key line = key, resp = self._get_key_internal(key_name, headers, query_args_l)\nthread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/boto/s3/bucket.py lineno = 199 function = _get_key_internal line = query_args=query_args)\nthread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/boto/s3/connection.py lineno = 664 function = make_request line = retry_handler=retry_handler\nthread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/boto/connection.py lineno = 1070 function = make_request line = retry_handler=retry_handler)\nthread_id = uWSGIWorker10Core0 filename = /usr/local/lib/python2.7/dist-packages/boto/connection.py lineno = 943 function = _mexe line = response = connection.getresponse()\nthread_id = uWSGIWorker10Core0 filename = /usr/lib/python2.7/httplib.py lineno = 1045 function = getresponse line = response.begin()\nthread_id = uWSGIWorker10Core0 filename = /usr/lib/python2.7/httplib.py lineno = 409 function = begin line = version, status, reason = self._read_status()\nthread_id = uWSGIWorker10Core0 filename = /usr/lib/python2.7/httplib.py lineno = 365 function = _read_status line = line = self.fp.readline(_MAXLINE + 1)\nthread_id = uWSGIWorker10Core0 filename = /usr/lib/python2.7/socket.py lineno = 476 function = readline line = data = self._sock.recv(self._rbufsize)\nthread_id = uWSGIWorker10Core0 filename = /usr/lib/python2.7/ssl.py lineno = 305 function = recv line = return self.read(buflen)\nthread_id = uWSGIWorker10Core0 filename = /usr/lib/python2.7/ssl.py lineno = 224 function = read line = return self._sslobj.read(len)\n</code></pre>\n\n<ul>\n<li>python: 2.7.5+</li>\n<li>Django: 1.6.10 (I know... we're upgrading during our next release cycle)</li>\n<li>uwsgi: 2.0.11.1</li>\n<li>boto: 2.36.0</li>\n<li>django-storages: 1.1.8</li>\n</ul>\n"}, {"tags": ["python", "gimp"], "answers": [{"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": true, "score": 2, "last_activity_date": 1438863595, "last_edit_date": 1438863595, "creation_date": 1438863120, "answer_id": 31855432, "question_id": 31844530, "link": "https://stackoverflow.com/questions/31844530/gimp-get-python-dump/31855432#31855432", "title": "GIMP get Python dump", "body": "<p>No, that is not possible. There are no proper recording of actions performed in  GIMP code other than the undo system, and there are no hooks to introsect it via the plug-ins API, which Python uses.</p>\n\n<p>This is a long time missing feature, that would need to be proper spec'ed, and written into code, and would require changes in several of places in the application - GIMP is a voluntary driven, developer starved project, so this probably won't be coming soon. </p>\n\n<p>Finding non-interactivelly which PDB call performs a function however is relatively easy - I hope you've found the \"browse\" button on the interactive file console, which allows one to search through the PDB, and can paste a template call to each function on the console itself by using the <code>apply</code> button.</p>\n\n<p>For the reference on a \"macro-recorder\": <a href=\"https://bugzilla.gnome.org/show_bug.cgi?id=51937\" rel=\"nofollow\">https://bugzilla.gnome.org/show_bug.cgi?id=51937</a></p>\n"}], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 31855432, "answer_count": 1, "score": 3, "last_activity_date": 1438863595, "creation_date": 1438817881, "question_id": 31844530, "link": "https://stackoverflow.com/questions/31844530/gimp-get-python-dump", "title": "GIMP get Python dump", "body": "<p>GIMP can interface with Python so that you can script operations.</p>\n\n<p>But is there a way to perform a number of operations with the GUI toolboxes and see what the Python code necessary to do those operations would have been? That is, to record the scripting equivalent of your recent GIMP operations. <a href=\"http://www.paraview.org/python/\" rel=\"nofollow\">Paraview has a feature like this</a>.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1438818024, "post_id": 31844516, "comment_id": 51610554, "body": "To clarify, should all the 0.00 values become 25.32?"}, {"owner": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 0, "creation_date": 1438818026, "post_id": 31844516, "comment_id": 51610556, "body": "If you are looking for a Python answer, there&#39;s no need to tag it with R"}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "reply_to_user": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1438818666, "post_id": 31844516, "comment_id": 51610706, "body": "@andrew No.. I am looking for the previous value.. No all the 0s should become 25.32"}], "answers": [{"comments": [{"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1438818721, "post_id": 31844601, "comment_id": 51610721, "body": "I am not looking to replace all the zeros with 25.32.. I am looking to replace it with the previous value. Here since the previous value is 25.32, I uses that example."}, {"owner": {"reputation": 141, "user_id": 4880228, "user_type": "registered", "profile_image": "https://graph.facebook.com/2577204910819/picture?type=large", "display_name": "Tommy Kahn", "link": "https://stackoverflow.com/users/4880228/tommy-kahn"}, "reply_to_user": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1438992526, "post_id": 31844601, "comment_id": 51694149, "body": "@haimen ahh, got it. I&#39;ve corrected my answer and it should work now."}], "tags": [], "owner": {"reputation": 141, "user_id": 4880228, "user_type": "registered", "profile_image": "https://graph.facebook.com/2577204910819/picture?type=large", "display_name": "Tommy Kahn", "link": "https://stackoverflow.com/users/4880228/tommy-kahn"}, "is_accepted": false, "score": 0, "last_activity_date": 1438992466, "last_edit_date": 1438992466, "creation_date": 1438818361, "answer_id": 31844601, "question_id": 31844516, "link": "https://stackoverflow.com/questions/31844516/substitute-previous-row-value-if-value-equal-to-0-in-python/31844601#31844601", "title": "Substitute previous row value if value equal to 0 in Python", "body": "<p>This should work, provided you are willing to use numpy:</p>\n\n<p>First, identify the indices which meet your condition using the <code>where</code> function. (Assuming that you already have your data in an array, called <code>x</code> in this case)</p>\n\n<p><code>indices = np.where(x == 0.0)[0]</code></p>\n\n<p>The use of <code>[0]</code> in the previous line is necessary because calling <code>where</code> without the optional replacement values returns a tuple with one element: an array of the indices where the condition is met (see the <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow\">documentation</a> for more info).</p>\n\n<p>To replace the the zeroes with the previous non-zero:</p>\n\n<pre><code>for index in indices:\n    c[index] = c[index - 1]\n</code></pre>\n\n<p>This will automatically leave leading zeroes in place, and only correct the gaps after there have been non-zero values.</p>\n"}, {"comments": [{"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1438820335, "post_id": 31844677, "comment_id": 51611122, "body": "Thanks Andrew, If I want to substitute all the values other than the first value with the previous value, how do I do that?"}, {"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "reply_to_user": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1438820995, "post_id": 31844677, "comment_id": 51611269, "body": "I just made a small edit, <code>a = range(1,10)</code>.  Using my original list example, <code>a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 0, 0, 0]</code>, can you show me what the final list should look like?"}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1438822572, "post_id": 31844677, "comment_id": 51611623, "body": "Suppose a=[0,0,1,2,5,6,0,0,8,9,0,11,0,13], Output should be a=[0,0,1,2,5,6,6,6,8,9,9,11,11,13]   This is what I am looking at...."}], "tags": [], "owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1438823792, "last_edit_date": 1438823792, "creation_date": 1438818908, "answer_id": 31844677, "question_id": 31844516, "link": "https://stackoverflow.com/questions/31844516/substitute-previous-row-value-if-value-equal-to-0-in-python/31844677#31844677", "title": "Substitute previous row value if value equal to 0 in Python", "body": "<p>Version 1: you only want to substitute the first row with a 0.00 value:</p>\n\n<pre><code>a = range(1, 10)\na = a + [0,0,0,0,0]\n# a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 0, 0, 0]\nout = [a[0]] + [x if x !=0 else y for x,y in zip(a[1:], a[:-1])]\n# out = [1, 2, 3, 4, 5, 6, 7, 8, 9, 9, 0, 0, 0, 0]\n</code></pre>\n\n<p>So now we have a list with two 9 values. The first zero has been replaced. </p>\n\n<p>NOTE: I am assuming you cannot replace a 0 value in the first row.  </p>\n\n<p>Version 2: you want to substitute all 0.0 values, even if the previous row was substituted.</p>\n\n<pre><code>a = range(1, 10)\na = a + [0,0,0,0,0]\n# a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 0, 0, 0]\nout = [a[0]]\nfor x in a[1:]:\n    if x != 0:\n        out.append(x)\n    else:\n        out.append(out[-1])\n# out =  [1, 2, 3, 4, 5, 6, 7, 8, 9, 9, 9, 9, 9, 9, 9]\n</code></pre>\n\n<p>Now all the 0 values have taken the last non-zero value.</p>\n\n<p>Version 3: based on the op's feedback:</p>\n\n<pre><code>import itertools\na = [0,0,1,2,5,4,0,0,8,9,0,5,0,6]\n# accept all leading zeros\nout = [x for x in itertools.takewhile(lambda x: x == 0, a[1:])]\nfor x in a[len(out):]:\n    if x != 0:\n        out.append(x)\n    else:\n        out.append(out[-1]))\n</code></pre>\n\n<p>Really though, the <strong>best solution</strong> in my opnion, especially if you are familiar with R, is to use the <a href=\"http://pandas.pydata.org/pandas-docs/version/0.15.2/missing_data.html\" rel=\"nofollow\">Python Pandas package</a>. See the \"Fill gaps forward or backward\" section. The solution is much more elegant than trying to do it all with native packages.</p>\n"}, {"tags": [], "owner": {"reputation": 1928, "user_id": 768194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fdc37176391129cff07a05a01f2db0?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/768194/colin"}, "is_accepted": false, "score": 1, "last_activity_date": 1438825027, "creation_date": 1438825027, "answer_id": 31845445, "question_id": 31844516, "link": "https://stackoverflow.com/questions/31844516/substitute-previous-row-value-if-value-equal-to-0-in-python/31845445#31845445", "title": "Substitute previous row value if value equal to 0 in Python", "body": "<p>It sounds like you're looking for the method ffill.</p>\n\n<p>Assuming you don't have NaN (or also want to fill in NaN in the same way as 0):</p>\n\n<pre><code>df = df.replace(0, np.NaN).ffill()\n</code></pre>\n\n<p>If you do have NaN and want keep NaN as is:</p>\n\n<pre><code>df.loc[~df.x.isnull(), 'x'] = df.loc[~df.x.isnull(), 'x'].replace(0, np.NaN).ffill()\n</code></pre>\n"}], "owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1438992466, "creation_date": 1438817786, "last_edit_date": 1438817996, "question_id": 31844516, "link": "https://stackoverflow.com/questions/31844516/substitute-previous-row-value-if-value-equal-to-0-in-python", "title": "Substitute previous row value if value equal to 0 in Python", "body": "<p>I want to check if the value of a column in a dataframe is equal to 0 and if it is 0, I want to substitute the previous row's value of that column.</p>\n\n<p>Suppose my data is as follows,</p>\n\n<pre><code>               X\n683           24.48\n684           24.48\n685           24.48\n686           24.48\n687           24.48\n688           24.48\n689           25.02\n690           25.02\n691           25.02\n692           25.02\n693           25.02\n694           25.02\n695           25.02\n696           25.02\n697           25.32\n698           25.32\n699           25.32\n700            0.00\n701            0.00\n702            0.00\n703            0.00\n704            0.00\n705            0.00\n706            0.00\n707            0.00\n708            0.00\n709            0.00\n710            0.00\n711            0.00\n712            0.00\n713            0.00\n714            0.00\n715            0.00\n716            0.00\n717            0.00\n718            0.00\n719            0.00\n720            0.00\n721            0.00\n722            0.00\n723            0.00\n724            0.00\n725            0.00\n726            0.00\n727            0.00\n728            0.00\n729            0.00\n730            0.00\n731            0.00\n732            0.00\n733            0.00\n734            0.00\n735            0.00\n736            0.00\n737            0.00\n738            0.00\n739            0.00\n740            0.00\n741            0.00\n742            0.00\n743            0.00\n744            0.00\n745            0.00\n746            0.00\n747            0.00\n748            0.00\n749            0.00\n750            0.00\n751            0.00\n752            0.00\n753            0.00\n754            0.00\n755            0.00\n756            0.00\n757            0.00\n758            0.00\n759            0.00\n760            0.00\n761            0.00\n762            0.00\n763            0.00\n764            0.00\n765            0.00\n766            0.00\n767            0.00\n768            0.00\n769            0.00\n770            0.00\n771            0.00\n772            0.00\n773            0.00\n774            0.00\n775            0.00\n776            0.00\n777            0.00\n778            0.00\n779            0.00\n780            0.00\n781            0.00\n782            0.00\n783            0.00\n784            0.00\n785            0.00\n786            0.00\n787            0.00\n788            0.00\n789            0.00\n790            0.00\n791            0.00\n792            0.00\n793            0.00\n794            0.00\n795            0.00\n796            0.00\n797            0.00\n798            0.00\n799            0.00\n800            0.00\n801            0.00\n802            0.00\n803            0.00\n804            0.00\n805            0.00\n806            0.00\n807            0.00\n808            0.00\n809            0.00\n810            0.00\n811            0.00\n812            0.00\n813            0.00\n814            0.00\n815            0.00\n816            0.00\n817            0.00\n818            0.00\n819            0.00\n820            0.00\n821            0.00\n822            0.00\n823            0.00\n824            0.00\n825            0.00\n826            0.00\n827            0.00\n828            0.00\n829            0.00\n830            0.00\n831            0.00\n832            0.00\n833            0.00\n834            0.00\n835            0.00\n836            0.00\n837            0.00\n838            0.00\n839            0.00\n840            0.00\n841            0.00\n842            0.00\n843            0.00\n844            0.00\n845            0.00\n846            0.00\n847            0.00\n848            0.00\n849            0.00\n850            0.00\n851            0.00\n852            0.00\n853            0.00\n854            0.00\n855            0.00\n856            0.00\n857            0.00\n858            0.00\n859            0.00\n860            0.00\n861            0.00\n862            0.00\n863            0.00\n864            0.00\n865            0.00\n866            0.00\n867            0.00\n868            0.00\n869            0.00\n870            0.00\n871            0.00\n872            0.00\n873            0.00\n874            0.00\n875            0.00\n876            0.00\n877            0.00\n878            0.00\n879            0.00\n880            0.00\n881            0.00\n882            0.00\n883            0.00\n884            0.00\n885            0.00\n886            0.00\n887            0.00\n888            0.00\n889            0.00\n890            0.00\n891            0.00\n892            0.00\n893            0.00\n894            0.00\n895            0.00\n896            0.00\n897            0.00\n898            0.00\n899            0.00\n900            0.00\n901            0.00\n902            0.00\n903            0.00\n904            0.00\n905            0.00\n906            0.00\n907            0.00\n908            0.00\n909            0.00\n910            0.00\n911            0.00\n912            0.00\n913            0.00\n914            0.00\n915            0.00\n916            0.00\n917            0.00\n918            0.00\n919            0.00\n920            0.00\n921            0.00\n922            0.00\n923            0.00\n924            0.00\n925            0.00\n926            0.00\n927            0.00\n928            0.00\n929            0.00\n930            0.00\n931            0.00\n932            0.00\n933            0.00\n934            0.00\n935            0.00\n936            0.00\n937            0.00\n938            0.00\n939            0.00\n940            0.00\n941            0.00\n942            0.00\n943            0.00\n944            0.00\n945            0.00\n946            0.00\n947            0.00\n948            0.00\n949            0.00\n950            0.00\n951            0.00\n952            0.00\n953            0.00\n954            0.00\n955            0.00\n956            0.00\n957            0.00\n958            0.00\n959            0.00\n960            0.00\n961            0.00\n962            0.00\n963            0.00\n964            0.00\n965            0.00\n966            0.00\n967            0.00\n968            0.00\n969            0.00\n970            0.00\n971            0.00\n972            0.00\n973            0.00\n974            0.00\n975            0.00\n976            0.00\n977            0.00\n978            0.00\n979            0.00\n980            0.00\n981            0.00\n982            0.00\n983            0.00\n984            0.00\n985            0.00\n986            0.00\n987            0.00\n988            0.00\n989            0.00\n990            0.00\n991            0.00\n992            0.00\n993            0.00\n994            0.00\n995            0.00\n996            0.00\n997            0.00\n998            0.00\n999            0.00\n1000           0.00\n1001           0.00\n1002           0.00\n1003           0.00\n1004           0.00\n1005           0.00\n1006           0.00\n1007           0.00\n1008           0.00\n1009           0.00\n1010           0.00\n1011           0.00\n1012           0.00\n1013           0.00\n1014           0.00\n1015           0.00\n1016           0.00\n1017           0.00\n1018           0.00\n1019           0.00\n1020           0.00\n1021           0.00\n1022           0.00\n1023           0.00\n1024           0.00\n1025           0.00\n1026           0.00\n1027           0.00\n1028           0.00\n1029           0.00\n1030           0.00\n1031           0.00\n1032           0.00\n1033           0.00\n1034           0.00\n1035           0.00\n1036           0.00\n1037           0.00\n1038           0.00\n1039           0.00\n1040           0.00\n1041           0.00\n1042           0.00\n1043           0.00\n1044           0.00\n1045           0.00\n1046           0.00\n1047           0.00\n1048           0.00\n1049           0.00\n1050           0.00\n1051           0.00\n1052           0.00\n1053           0.00\n1054           0.00\n1055           0.00\n1056           0.00\n1057           0.00\n1058           0.00\n1059           0.00\n1060           0.00\n1061           0.00\n1062           0.00\n1063           0.00\n1064           0.00\n1065           0.00\n1066           0.00\n1067           0.00\n1068           0.00\n1069           0.00\n1070           0.00\n1071           0.00\n1072           0.00\n1073           0.00\n1074           0.00\n1075           0.00\n1076           0.00\n1077           0.00\n1078           0.00\n1079           0.00\n1080           0.00\n1081           0.00\n1082           0.00\n1083           0.00\n1084           0.00\n1085           0.00\n1086           0.00\n1087           0.00\n1088           0.00\n1089           0.00\n1090           0.00\n1091           0.00\n1092           0.00\n1093           0.00\n1094           0.00\n1095           0.00\n1096           0.00\n1097           0.00\n1098           0.00\n1099           0.00\n1100           0.00\n1101           0.00\n1102           0.00\n1103           0.00\n1104           0.00\n1105           0.00\n1106           0.00\n1107           0.00\n1108           0.00\n1109           0.00\n1110           0.00\n1111           0.00\n1112           0.00\n1113           0.00\n1114           0.00\n1115           0.00\n1116           0.00\n1117           0.00\n1118           0.00\n1119           0.00\n1120           0.00\n1121           0.00\n1122           0.00\n1123           0.00\n1124           0.00\n1125           0.00\n1126           0.00\n1127           0.00\n1128           0.00\n1129           0.00\n1130           0.00\n1131           0.00\n1132           0.00\n1133           0.00\n1134           0.00\n1135           0.00\n1136           0.00\n1137           0.00\n1138           0.00\n1139           0.00\n1140           0.00\n1141           0.00\n1142           0.00\n1143           0.00\n1144           0.00\n1145           0.00\n1146           0.00\n1147           0.00\n1148           0.00\n1149           0.00\n1150           0.00\n1151           0.00\n1152           0.00\n1153           0.00\n1154           0.00\n1155           0.00\n1156           0.00\n1157           0.00\n1158           0.00\n1159           0.00\n1160           0.00\n1161           0.00\n1162           0.00\n1163           0.00\n1164           0.00\n1165           0.00\n1166           0.00\n1167           0.00\n1168           0.00\n1169           0.00\n1170           0.00\n1171           0.00\n1172           0.00\n1173           0.00\n1174           0.00\n1175           0.00\n1176           0.00\n1177           0.00\n1178           0.00\n1179           0.00\n1180           0.00\n1181           0.00\n1182           0.00\n1183           0.00\n1184           0.00\n1185           0.00\n1186           0.00\n1187           0.00\n1188           0.00\n1189           0.00\n1190           0.00\n1191           0.00\n1192           0.00\n1193           0.00\n1194           0.00\n1195           0.00\n1196           0.00\n1197           0.00\n1198          26.16\n1199          26.16\n1200          26.16\n1201          26.34\n</code></pre>\n\n<p>Here in the 0s, I want the 25.32 value. The point is, initially my data starts at 0.</p>\n\n<p>How can we do this in Python? I am able to do this in R. The following is the command I used, </p>\n\n<pre><code>library(zoo)\nis.na(DF$a) &lt;- DF$a == 0\nDF$a        &lt;- na.locf(DF$a,na.rm=FALSE)\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "recursion", "rethinkdb", "rethinkdb-python"], "answers": [{"tags": [], "owner": {"reputation": 10513, "user_id": 50348, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/tCDKk.jpg?s=128&g=1", "display_name": "Nick Woodhams", "link": "https://stackoverflow.com/users/50348/nick-woodhams"}, "is_accepted": false, "score": 0, "last_activity_date": 1439171218, "creation_date": 1439171218, "answer_id": 31910598, "question_id": 31844501, "link": "https://stackoverflow.com/questions/31844501/rethinkdb-python-recursive-document-filter/31910598#31910598", "title": "RethinkDB Python Recursive Document Filter", "body": "<p>This was a tough one but the solution ended up being two-fold. </p>\n\n<p>A slight modification to the schema when saving, then using RethinkDB's <code>contains</code> method.</p>\n\n<p>Here is the modified query that works well.</p>\n\n<pre><code>open_tasks = rdbt \\\n    .order_by(index=r.desc('labels_completed')) \\\n    .filter(r.row['locked'] == False) \\\n    .filter(lambda task:\n            r.not_(task['labeler_ids'].contains(current_user.id))) \\\n    .limit(qty) \\\n    .run(conn)\n</code></pre>\n"}], "owner": {"reputation": 10513, "user_id": 50348, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/tCDKk.jpg?s=128&g=1", "display_name": "Nick Woodhams", "link": "https://stackoverflow.com/users/50348/nick-woodhams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1439171218, "creation_date": 1438817598, "question_id": 31844501, "link": "https://stackoverflow.com/questions/31844501/rethinkdb-python-recursive-document-filter", "title": "RethinkDB Python Recursive Document Filter", "body": "<p>Trying to do a recursive filter query on RethinkDB with they Python wrapper. Having a lot of trouble getting it work. </p>\n\n<p>Tried a lot of variations of the query, to no avail. Essentially, I'm trying to find the rows which do not have a document nested under <code>label</code> with a particular user_id. </p>\n\n<p><em>In plain english: if the current user already labeled this example, don\u2019t return it to them again.</em></p>\n\n<p>My non-working query:</p>\n\n<pre><code>open_tasks = rdbt \\\n    .order_by(index=r.desc('labels_completed')) \\\n    .filter(r.row['locked'] == False) \\\n    .filter(lambda task:\n            task['labels']['user_id'] != current_user.id) \\\n    .limit(qty) \\\n    .run(conn)\n</code></pre>\n\n<h3>My dataset</h3>\n\n<pre><code>[\n    {\n        \"id\": \"e54893b4-b1d0-49c5-b6aa-9aa9e7d2b73b\",\n        \"image\": \"https://dl.dropboxusercontent.com/u/5822/crowdlabeler/ABLXOTODWJKTXECYZTST.jpg\",\n        \"labels\": [\n            {\n                \"account_qty_labeled\": 54,\n                \"account_signup_date\": \"Tue Aug 04 2015 10:12:25 GMT-04:00\",\n                \"compensation\": 0.01,\n                \"dataset_id\": 144,\n                \"label\": {\n                    \"$$hashKey\": \"object:45\",\n                    \"answer\": \"Yes\",\n                    \"selected\": true\n                },\n                \"label_duration_sec\": 3,\n                \"labeled_at\": \"Wed Aug 05 2015 16:26:04 GMT-05:00\",\n                \"sess_duration_sec\": 3,\n                \"sess_qty_labeled\": 0,\n                \"user_id\": 1\n            }\n        ],\n        \"labels_completed\": 0,\n        \"locked\": false,\n        \"text\": \"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cupiditate adipisci vero minus laudantium reprehenderit exercitationem eius, suscipit facilis laboriosam consequuntur, eligendi quis mollitia excepturi deserunt dicta, dolorem quaerat pariatur provident sint explicabo. Magnam possimus dolorum beatae quidem excepturi quibusdam dolore reprehenderit accusantium quae ad libero, voluptatum laborum, incidunt, voluptate reiciendis.\"\n    },\n    {\n        \"id\": \"9f08869e-79fd-49c0-a184-c43d2a1c95cf\",\n        \"image\": \"https://dl.dropboxusercontent.com/u/5822/crowdlabeler/ACSGHDYECQWQXDHIOBYC.jpg\",\n        \"labels\": [],\n        \"labels_completed\": 0,\n        \"locked\": false,\n        \"text\": \"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cupiditate adipisci vero minus laudantium reprehenderit exercitationem eius, suscipit facilis laboriosam consequuntur, eligendi quis mollitia excepturi deserunt dicta, dolorem quaerat pariatur provident sint explicabo. Magnam possimus dolorum beatae quidem excepturi quibusdam dolore reprehenderit accusantium quae ad libero, voluptatum laborum, incidunt, voluptate reiciendis.\"\n    },\n    {\n        \"id\": \"9fba0a39-4cfd-4a97-b48f-e8bf2b0d46c5\",\n        \"image\": \"https://dl.dropboxusercontent.com/u/5822/crowdlabeler/ADMNIUYKUHAIOHMAFXBK.jpg\",\n        \"labels\": [],\n        \"labels_completed\": 0,\n        \"locked\": false,\n        \"text\": \"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cupiditate adipisci vero minus laudantium reprehenderit exercitationem eius, suscipit facilis laboriosam consequuntur, eligendi quis mollitia excepturi deserunt dicta, dolorem quaerat pariatur provident sint explicabo. Magnam possimus dolorum beatae quidem excepturi quibusdam dolore reprehenderit accusantium quae ad libero, voluptatum laborum, incidunt, voluptate reiciendis.\"\n    }\n]\n</code></pre>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["javascript", "jquery", "python", "treeview", "fancytree"], "answers": [{"comments": [{"owner": {"reputation": 3709, "user_id": 1454510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbfb9a1993333960f683cf038eaf6e4f?s=128&d=identicon&r=PG", "display_name": "return 0", "link": "https://stackoverflow.com/users/1454510/return-0"}, "edited": false, "score": 0, "creation_date": 1439161639, "post_id": 31846073, "comment_id": 51733182, "body": "What does  def recursive_dict():     return collections.defaultdict(recursive_dict) do?"}], "tags": [], "owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "is_accepted": true, "score": 2, "last_activity_date": 1439162262, "last_edit_date": 1439162262, "creation_date": 1438829753, "answer_id": 31846073, "question_id": 31844499, "link": "https://stackoverflow.com/questions/31844499/how-to-convert-a-file-path-into-treeview/31846073#31846073", "title": "How to convert a file path into treeview?", "body": "<p>From Python, you can generate the JSON you want as follows (note that the indent and sort aren't necessary if you're just shipping the JSON across the line, but they make the output readable for debugging):</p>\n\n<pre><code>import collections\nimport json\n\nmyfiles = '''\n    a/b/c/d/e/file1\n    a/b/c/d/e/file2\n    a/f/g/h/i/file3\n    a/f/g/h/i/file4\n'''\n\n# Convert to a list\nmyfiles = myfiles.split()\n\n\ndef recursive_dict():\n    \"\"\"\n    This function returns a defaultdict() object\n    that will always return new defaultdict() objects\n    as the values for any non-existent dict keys.\n    Those new defaultdict() objects will likewise\n    return new defaultdict() objects as the values\n    for non-existent keys, ad infinitum.\n    \"\"\"\n    return collections.defaultdict(recursive_dict)\n\n\ndef insert_file(mydict, fname):\n    for part in fname.split('/'):\n        mydict = mydict[part]\n\n    # If you want to record that this was a terminal,\n    # you can do something like this, too:\n    # mydict[None] = True\n\ntopdict = recursive_dict()\nfor fname in myfiles:\n    insert_file(topdict, fname)\n\nprint(json.dumps(topdict, sort_keys=True,\n                indent=4, separators=(',', ': ')))\n</code></pre>\n\n<p>This code generates the following output:</p>\n\n<pre><code>{\n    \"a\": {\n        \"b\": {\n            \"c\": {\n                \"d\": {\n                    \"e\": {\n                        \"file1\": {},\n                        \"file2\": {}\n                    }\n                }\n            }\n        },\n        \"f\": {\n            \"g\": {\n                \"h\": {\n                    \"i\": {\n                        \"file3\": {},\n                        \"file4\": {}\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3709, "user_id": 1454510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbfb9a1993333960f683cf038eaf6e4f?s=128&d=identicon&r=PG", "display_name": "return 0", "link": "https://stackoverflow.com/users/1454510/return-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 31846073, "answer_count": 1, "score": 0, "last_activity_date": 1439162590, "creation_date": 1438817579, "last_edit_date": 1439162590, "question_id": 31844499, "link": "https://stackoverflow.com/questions/31844499/how-to-convert-a-file-path-into-treeview", "title": "How to convert a file path into treeview?", "body": "<p>Right now I have a few files in python that have following file path format:</p>\n\n<pre><code>a/b/c/d/e/file1\na/b/c/d/e/file2\na/f/g/h/i/file3\na/f/g/h/i/file4\n</code></pre>\n\n<p>Now, when I fetch these paths in Python, I want to turn this into a JSON format that a third party jquery plugin (e.g. fancytree, jqxTree) can read in order to convert it into a treeview. Maybe there are other easier ways to do it, please suggest. Thanks!</p>\n"}, {"tags": ["python", "cdf"], "comments": [{"owner": {"reputation": 1318, "user_id": 3325465, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/981116e7665b2e6a7d91c92cb9bdc5d1?s=128&d=identicon&r=PG&f=1", "display_name": "bcdan", "link": "https://stackoverflow.com/users/3325465/bcdan"}, "edited": false, "score": 0, "creation_date": 1438824282, "post_id": 31844447, "comment_id": 51612017, "body": "There&#39;s probably some obscure Scipy route, but I have no idea what it would be."}, {"owner": {"reputation": 6505, "user_id": 3059097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b82e3e2f10c9983fb609e74224d078?s=128&d=identicon&r=PG", "display_name": "casey", "link": "https://stackoverflow.com/users/3059097/casey"}, "edited": false, "score": 0, "creation_date": 1438836498, "post_id": 31844447, "comment_id": 51614984, "body": "The PDF is the derivative of the CDF curve. Use any tool that calculates derivatives or write a one line solution yourself."}, {"owner": {"reputation": 5372, "user_id": 1700890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ae3069bce34ea67aa6ed85035fac697?s=128&d=identicon&r=PG", "display_name": "user1700890", "link": "https://stackoverflow.com/users/1700890/user1700890"}, "edited": false, "score": 0, "creation_date": 1438862723, "post_id": 31844447, "comment_id": 51629888, "body": "My understanding PDF is mixed martial derivative of CDF. If we have 5 variables, the numerical error in differentiation is going to be overwhelming. am I missing something? The only solution I see is through computing differences in appropriate areas. It is easy to visualize in 2 and 3 dimensions, but in higher dimensions it is a bit difficult to generalize."}], "owner": {"reputation": 5372, "user_id": 1700890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ae3069bce34ea67aa6ed85035fac697?s=128&d=identicon&r=PG", "display_name": "user1700890", "link": "https://stackoverflow.com/users/1700890/user1700890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1135, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1438817226, "creation_date": 1438817226, "question_id": 31844447, "link": "https://stackoverflow.com/questions/31844447/pdf-from-cdf-in-python", "title": "PDF from CDF in Python", "body": "<p>Does anybody know if there is a tool to compute PDF from CDF in Python on arbitrary grid and for CDF of arbitrary number of variables.</p>\n\n<p>PDF - probability distribution function\nCDF - cumulative distribution function</p>\n"}, {"tags": ["python", "celery", "celerybeat"], "answers": [{"comments": [{"owner": {"reputation": 7073, "user_id": 872328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5c1a9d104a5a415d3cf8d33be3abdd0e?s=128&d=identicon&r=PG", "display_name": "PaulMest", "link": "https://stackoverflow.com/users/872328/paulmest"}, "edited": false, "score": 0, "creation_date": 1438867491, "post_id": 31848633, "comment_id": 51633441, "body": "This looks promising. I&#39;ll accept this as an answer once I try it out with my code. Thanks!"}, {"owner": {"reputation": 7073, "user_id": 872328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5c1a9d104a5a415d3cf8d33be3abdd0e?s=128&d=identicon&r=PG", "display_name": "PaulMest", "link": "https://stackoverflow.com/users/872328/paulmest"}, "edited": false, "score": 0, "creation_date": 1440086927, "post_id": 31848633, "comment_id": 52138478, "body": "It looks like this still sends the task late and then sets an expiration for 5 minutes after the late task. I&#39;d like not to send the task at all if it is &gt; 5 minutes after the expected start time. <code>[2015-08-20 09:04:03,883: INFO&#47;MainProcess] Scheduler: Sending due task task-1 (tasks.run_task1)  [2015-08-20 09:04:05,967: INFO&#47;MainProcess] Received task: tasks.run_task1[5dbaf0f8-3386-4789-94b6-d3b3eb5fc736] expires:[2015-08-20 09:09:03.884989-07:00]</code>"}], "tags": [], "owner": {"reputation": 929, "user_id": 2157037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac115577a413c2928622016de6f428?s=128&d=identicon&r=PG", "display_name": "noamk", "link": "https://stackoverflow.com/users/2157037/noamk"}, "is_accepted": false, "score": 3, "last_activity_date": 1438843679, "creation_date": 1438843679, "answer_id": 31848633, "question_id": 31844395, "link": "https://stackoverflow.com/questions/31844395/how-to-prevent-celery-periodic-tasks-from-executing-late/31848633#31848633", "title": "How to prevent Celery Periodic Tasks from executing late?", "body": "<p>Use the <a href=\"http://celery.readthedocs.org/en/latest/userguide/calling.html#expiration\" rel=\"nofollow\">expires</a> option:</p>\n\n<pre><code>CELERYBEAT_SCHEDULE = {\n    'task-1': {\n        'task': 'tasks.run_task1',\n        'schedule': crontab(hour=5, minute=30, day_of_week='mon-fri'),\n        'options': {\n                    'expires': 5*60,\n                    },\n    },\n    'task-2': {\n        'task': 'tasks.run_task2',\n        'schedule': crontab(hour=12, minute=0, day_of_week='sun-fri'),\n        'options': {\n                    'expires': 5*60,\n                    },\n    },\n}\n</code></pre>\n"}], "owner": {"reputation": 7073, "user_id": 872328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5c1a9d104a5a415d3cf8d33be3abdd0e?s=128&d=identicon&r=PG", "display_name": "PaulMest", "link": "https://stackoverflow.com/users/872328/paulmest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1578, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1439648460, "creation_date": 1438816886, "last_edit_date": 1439648460, "question_id": 31844395, "link": "https://stackoverflow.com/questions/31844395/how-to-prevent-celery-periodic-tasks-from-executing-late", "title": "How to prevent Celery Periodic Tasks from executing late?", "body": "<p>I have some tasks in Celery that are scheduled with Celery Beat/Crontab like this:</p>\n\n<pre><code>CELERYBEAT_SCHEDULE = {\n    'task-1': {\n        'task': 'tasks.run_task1',\n        'schedule': crontab(hour=5, minute=30, day_of_week='mon-fri'),\n    },\n    'task-2': {\n        'task': 'tasks.run_task2',\n        'schedule': crontab(hour=12, minute=0, day_of_week='sun-fri'),\n    },\n}\n</code></pre>\n\n<p>Sometimes I have the Celery process turned off and when I turn it back on at 4:00pm, it will run the tasks from earlier in the day. How can I make it so that these tasks will only run within ~5 minutes of when they are actually scheduled and NOT start to run later in the day?</p>\n"}, {"tags": ["python", "installation", "pip", "easy-install"], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 1469538, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cdd7eef629c46b7190795ded85881292?s=128&d=identicon&r=PG", "display_name": "Luc", "link": "https://stackoverflow.com/users/1469538/luc"}, "is_accepted": false, "score": 0, "last_activity_date": 1438816978, "creation_date": 1438816978, "answer_id": 31844410, "question_id": 31844372, "link": "https://stackoverflow.com/questions/31844372/pip-installation-via-easy-install-not-working-on-osx/31844410#31844410", "title": "pip installation via easy_install not working on osx", "body": "<p>Turns out I needed to add:</p>\n\n<pre><code>/usr/local/Cellar/python/2.7.10_2/Frameworks/Python.framework/Versions/2.7/bin\n</code></pre>\n\n<p>to my path.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 3450920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2c7e9ed09b888e7d61fa24b8f3f1875?s=128&d=identicon&r=PG&f=1", "display_name": "ProgrammingNewbie", "link": "https://stackoverflow.com/users/3450920/programmingnewbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1438818048, "creation_date": 1438818048, "answer_id": 31844559, "question_id": 31844372, "link": "https://stackoverflow.com/questions/31844372/pip-installation-via-easy-install-not-working-on-osx/31844559#31844559", "title": "pip installation via easy_install not working on osx", "body": "<p>add /usr/local/Cellar/python/2.7.10_2/Frameworks/Python.framework/Versions/2.7/bin</p>\n"}], "owner": {"reputation": 67, "user_id": 1469538, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cdd7eef629c46b7190795ded85881292?s=128&d=identicon&r=PG", "display_name": "Luc", "link": "https://stackoverflow.com/users/1469538/luc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438818048, "creation_date": 1438816730, "question_id": 31844372, "link": "https://stackoverflow.com/questions/31844372/pip-installation-via-easy-install-not-working-on-osx", "title": "pip installation via easy_install not working on osx", "body": "<p>So I tried installing pip..</p>\n\n<p>Check here for my terminal session:\n<a href=\"http://showterm.io/02378a6eae5b922121cbc\" rel=\"nofollow\">http://showterm.io/02378a6eae5b922121cbc</a></p>\n\n<p>Anybody have any ideas?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1438817031, "post_id": 31844367, "comment_id": 51610276, "body": "What do you mean by a &quot;tolerance&quot;?"}, {"owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "edited": false, "score": 0, "creation_date": 1438817188, "post_id": 31844367, "comment_id": 51610313, "body": "In other words, for <code>2*3.5</code> you&#39;d accept 7 +/- 0.5, for <code>4*3.5</code> you&#39;d accept 14 +/- 0.5, etc? (Picking out the corresponding items in <code>myList</code> and <code>myResult</code> is a little hard on the eyes.)"}, {"owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1438817189, "post_id": 31844367, "comment_id": 51610314, "body": "As shown in the example. An element is considered as an even multiple, if it only deviates from the &quot;real&quot; even multiple +/- a predefined tolerance."}], "answers": [{"comments": [{"owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1438817481, "post_id": 31844388, "comment_id": 51610407, "body": "Initially I also thought about sth. like that but it does return the wrong result. It returns [1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0] instead of [0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0]"}, {"owner": {"reputation": 1626, "user_id": 2543727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkFul.jpg?s=128&g=1", "display_name": "cr1msonB1ade", "link": "https://stackoverflow.com/users/2543727/cr1msonb1ade"}, "reply_to_user": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1438817675, "post_id": 31844388, "comment_id": 51610459, "body": "Is 0 an even multiple of 3.5? I could add an extra condition to exclude 0 explicitly, but it seems to fit the general definition. How would you like negative numbers handled generally as well?"}, {"owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1438817798, "post_id": 31844388, "comment_id": 51610496, "body": "Nope... Unfortunately still not the same result as in my example. No, I would say 0 is not an even multiple of the number. Your code so far only allows a positive tolerance but no negative... Negative numbers are not relevant in my canse."}, {"owner": {"reputation": 1626, "user_id": 2543727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkFul.jpg?s=128&g=1", "display_name": "cr1msonB1ade", "link": "https://stackoverflow.com/users/2543727/cr1msonb1ade"}, "reply_to_user": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1438818197, "post_id": 31844388, "comment_id": 51610592, "body": "Yup I just updated to do one search for within tolerance below and a second to search for within tolerance below. I think it works now. modulus the 0 issue."}, {"owner": {"reputation": 1626, "user_id": 2543727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkFul.jpg?s=128&g=1", "display_name": "cr1msonB1ade", "link": "https://stackoverflow.com/users/2543727/cr1msonb1ade"}, "reply_to_user": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1438818675, "post_id": 31844388, "comment_id": 51610707, "body": "Awesome. Just added a small edit to be slightly more pythonic and include the &quot;0 and negative numbers aren&#39;t even multiples&quot; condition."}], "tags": [], "owner": {"reputation": 1626, "user_id": 2543727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkFul.jpg?s=128&g=1", "display_name": "cr1msonB1ade", "link": "https://stackoverflow.com/users/2543727/cr1msonb1ade"}, "is_accepted": true, "score": 4, "last_activity_date": 1438818611, "last_edit_date": 1438818611, "creation_date": 1438816851, "answer_id": 31844388, "question_id": 31844367, "link": "https://stackoverflow.com/questions/31844367/find-even-multiples-of-a-number-in-a-list-using-python/31844388#31844388", "title": "Find even multiples of a number in a list using Python", "body": "<p>How about</p>\n\n<pre><code>from numpy import mod, floor\nwithinTolAbove=[int(mod(number, myNumber) &lt;= myTolerance and\n                mod(floor(number / myNumber), 2) == 0) for number in myList]\nwithinTolBelow=[int(mod(number + myTolerance, myNumber) &lt;= myTolerance and\n                mod(floor((number + myTolerance) / myNumber), 2) == 0) for number in myList]\nmyResult=[max(i1, i2) * int(number &gt; myTolerance) for i1, i2, number in zip(withinTolAbove, withinTolBelow, myList)]\n</code></pre>\n\n<p>The first part determines if the division is within the tolerance of an integer and the second part figures out if this integer is divisible by 2.</p>\n"}, {"tags": [], "owner": {"reputation": 1928, "user_id": 768194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fdc37176391129cff07a05a01f2db0?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/768194/colin"}, "is_accepted": false, "score": 0, "last_activity_date": 1438825867, "creation_date": 1438825867, "answer_id": 31845564, "question_id": 31844367, "link": "https://stackoverflow.com/questions/31844367/find-even-multiples-of-a-number-in-a-list-using-python/31845564#31845564", "title": "Find even multiples of a number in a list using Python", "body": "<p>How about</p>\n\n<pre><code>print print([int(abs(x - round(x / myNumber) * myNumber) &lt;= myTolerance and round(x / myNumber) &gt; 1.5) for x in myList])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0]\n</code></pre>\n"}], "owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 31844388, "answer_count": 2, "score": 0, "last_activity_date": 1438825867, "creation_date": 1438816702, "question_id": 31844367, "link": "https://stackoverflow.com/questions/31844367/find-even-multiples-of-a-number-in-a-list-using-python", "title": "Find even multiples of a number in a list using Python", "body": "<p>I am searching for the most pythonic way to check, whether one or more elements in a list are even multiples of a predefined number with a predefined tolerance. An example is given below:</p>\n\n<pre><code>myNumber=3.5\nmyList=[0,0.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5]\nmyTolerance=0.5\n\nmyResult=[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0]\n</code></pre>\n\n<p>Any suggestions are very appreciated.</p>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 6509, "user_id": 2208850, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/mqtCW.jpg?s=128&g=1", "display_name": "Totem", "link": "https://stackoverflow.com/users/2208850/totem"}, "edited": false, "score": 0, "creation_date": 1438817966, "post_id": 31844342, "comment_id": 51610547, "body": "Does &#39;127.0.0.1&#39; work?"}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1438818846, "post_id": 31844342, "comment_id": 51610745, "body": "could you also post the relevant parts of the program that is raising this exception."}, {"owner": {"reputation": 529, "user_id": 2473053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02d6081944a9652782d7796536514ab6?s=128&d=identicon&r=PG", "display_name": "Ivan Peng", "link": "https://stackoverflow.com/users/2473053/ivan-peng"}, "reply_to_user": {"reputation": 6509, "user_id": 2208850, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/mqtCW.jpg?s=128&g=1", "display_name": "Totem", "link": "https://stackoverflow.com/users/2208850/totem"}, "edited": false, "score": 0, "creation_date": 1438827897, "post_id": 31844342, "comment_id": 51612863, "body": "@Totem This is the internal pycharm script for starting the pydev console, so I can&#39;t change the internal code. I looked at their source code in main, and I&#39;ve posted that in the main code box."}, {"owner": {"reputation": 529, "user_id": 2473053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02d6081944a9652782d7796536514ab6?s=128&d=identicon&r=PG", "display_name": "Ivan Peng", "link": "https://stackoverflow.com/users/2473053/ivan-peng"}, "reply_to_user": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1438828071, "post_id": 31844342, "comment_id": 51612901, "body": "@HaleemurAli This is all that is relevant to the program. It&#39;s a simple click in the PyCharm toolbar, which throws this. I have written no code myself which makes this happen."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5284322, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153553314763057/picture?type=large", "display_name": "Ma Xin", "link": "https://stackoverflow.com/users/5284322/ma-xin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459496388, "last_edit_date": 1592644375, "creation_date": 1459495537, "answer_id": 36350383, "question_id": 31844342, "link": "https://stackoverflow.com/questions/31844342/pycharm-python-console-socket-gaierror/36350383#36350383", "title": "Pycharm python console socket.gaierror", "body": "<p>I'm new in python, stuck on the same problem for half a day. Finally solved this problem by setting the host to 127.0.0.1.\nIf you have the same issue you can do this by:</p>\n<blockquote>\n<ol>\n<li><p>open pydevconsole.py in pycharm, navigate to the main script part and find this line:\n<code>pydevconsole.StartServer(pydev_localhost.get_localhost(), int(port), int(client_port))</code></p>\n</li>\n<li><p>ctrl + click the function <code>get_localhost()</code> to navigate to its source:</p>\n</li>\n</ol>\n<p><code>_cache = None def get_localhost():'''</code></p>\n<p>Should return 127.0.0.1 in ipv4 and ::1 in ipv6</p>\n</blockquote>\n<pre><code>localhost is not used because on windows vista/windows 7, there can be issues where the resolving doesn't work\nproperly and takes a lot of time (had this issue on the pyunit server).\n\nUsing the IP directly solves the problem.\n'''\n#TODO: Needs better investigation!\n\nglobal _cache\nif _cache is None:\n    try:\n        for addr_info in socket.getaddrinfo(&quot;localhost&quot;, 80, 0, 0, socket.SOL_TCP):\n            config = addr_info[4]\n            if config[0] == '127.0.0.1':\n                _cache = '127.0.0.1'\n                return _cache\n    except:\n        #Ok, some versions of Python don't have getaddrinfo or SOL_TCP... Just consider it 127.0.0.1 in this case.\n        _cache = '127.0.0.1'\n    else:\n        _cache = 'localhost'\n\nreturn _cache\n</code></pre>\n<p>I believe the problem is caused by the returning &quot;localhost&quot; of this function, make it &quot;127.0.0.1&quot; solved the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 743, "user_id": 4028977, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qu3hd.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4028977/rob"}, "is_accepted": false, "score": 1, "last_activity_date": 1469119642, "creation_date": 1469119642, "answer_id": 38509986, "question_id": 31844342, "link": "https://stackoverflow.com/questions/31844342/pycharm-python-console-socket-gaierror/38509986#38509986", "title": "Pycharm python console socket.gaierror", "body": "<p>I had this issue on OS X El Capitan, running Pycharm 2016.2.</p>\n\n<p>In any editor open: <code>/Applications/PyCharm.app/Contents/helpers/pydev/pydevconsole.py</code></p>\n\n<p>If you're navigating via Finder, right-click the Pycharm.app file and choose \"Show Package Contents\" to get access to the path.</p>\n\n<p>Find the line:</p>\n\n<pre><code>pydevconsole.start_server(pydev_localhost.get_localhost(), int(port), int(client_port))\n</code></pre>\n\n<p>Change it to:</p>\n\n<pre><code>pydevconsole.start_server('127.0.0.1', int(port), int(client_port))\n</code></pre>\n\n<p>Restart Pycharm and choose Tools->Python Console...</p>\n\n<p>You should then see:</p>\n\n<pre><code>Users/.../env/bin/python /Applications/PyCharm.app/Contents/helpers/pydev/pydevconsole.py 56582 56583\nPyDev console: starting.\n\n\nimport sys; print('Python %s on %s' % (sys.version, sys.platform))\nsys.path.extend(['/Users/...'])\n\nPython 3.5.0 (default, Dec  1 2015, 12:50:23) \n[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.1.76)] on darwin\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1248, "user_id": 2339348, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2c76c385b0d4f1fbd5d07980c4e3898e?s=128&d=identicon&r=PG", "display_name": "cs_stackX", "link": "https://stackoverflow.com/users/2339348/cs-stackx"}, "is_accepted": true, "score": 7, "last_activity_date": 1482842143, "creation_date": 1482842143, "answer_id": 41345334, "question_id": 31844342, "link": "https://stackoverflow.com/questions/31844342/pycharm-python-console-socket-gaierror/41345334#41345334", "title": "Pycharm python console socket.gaierror", "body": "<p>The answers given so far do not get at the underlying cause, which is likely to be that your OS X <code>/etc/hosts</code> file does not contain an entry for: 127.0.0.1 localhost</p>\n\n<p>Update the hosts file with the line:\n<code>\n127.0.0.1 localhost\n</code>\n(you will need to use sudo), then restart pyCharm. Unless you know what you are doing, editing your IDE source code is not a good idea.</p>\n"}], "owner": {"reputation": 529, "user_id": 2473053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02d6081944a9652782d7796536514ab6?s=128&d=identicon&r=PG", "display_name": "Ivan Peng", "link": "https://stackoverflow.com/users/2473053/ivan-peng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1724, "favorite_count": 0, "accepted_answer_id": 41345334, "answer_count": 3, "score": 2, "last_activity_date": 1482842143, "creation_date": 1438816519, "last_edit_date": 1438827979, "question_id": 31844342, "link": "https://stackoverflow.com/questions/31844342/pycharm-python-console-socket-gaierror", "title": "Pycharm python console socket.gaierror", "body": "<p>I'm running Pycharm 4.5.3 on OS X Yosemite (10.10.3). I created a simple python program, and tried opening the python console, and got this stack trace error:</p>\n\n<pre><code>/usr/bin/python -u /Applications/PyCharm.app/Contents/helpers/pydev/pydevconsole.py 59286 59287\nError starting server with host: localhost, port: 59286, client_port: 59287\nUnhandled exception in thread started by &lt;function start_server at 0x100d9bd70&gt;\nTraceback (most recent call last):\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/pydevconsole.py\", line 283, in start_server\n    server = XMLRPCServer((host, port), logRequests=False, allow_none=True)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SimpleXMLRPCServer.py\", line 593, in __init__\n    SocketServer.TCPServer.__init__(self, addr, requestHandler, bind_and_activate)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py\", line 419, in __init__\n    self.server_bind()\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py\", line 430, in server_bind\n    self.socket.bind(self.server_address)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py\", line 224, in meth\n    return getattr(self._sock,name)(*args)\nsocket.gaierror: [Errno 8] nodename nor servname provided, or not known\nCouldn't connect to console process.\n</code></pre>\n\n<p>A similar question was raised here on stack overflow, but the root of the error was the string localhost passed in with white spaces, which is not the case here (host has been assigned to 'localhost'). Does anyone have any idea? This isn't really a big deal, seeing as I can use python command line in terminal, but I'm curious if this is a bug within Pycharm.</p>\n\n<p>Edit: here's the source code to the Pycharm script.</p>\n\n<pre><code>if __name__ == '__main__':\n    import pydevconsole\n    sys.stdin = pydevconsole.BaseStdIn()\n    port, client_port = sys.argv[1:3]\n    import pydev_localhost\n\n    if int(port) == 0 and int(client_port) == 0:\n        (h, p) = pydev_localhost.get_socket_name()\n\n        client_port = p\n\n    pydevconsole.StartServer(pydev_localhost.get_localhost(), int(port), int(client_port))\n</code></pre>\n"}, {"tags": ["python", "multithreading", "numpy"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1438817841, "post_id": 31844282, "comment_id": 51610510, "body": "Before trying to add horsepower by means of multithreading, I would start with better algorithms... Currently your brute force approach is <code>O(N*M)</code>, while, after preparing a KD tree of the target points, you could make it <code>O(N*log(M))</code>."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1438821163, "post_id": 31844282, "comment_id": 51611308, "body": "Why are you committed to using only numpy?"}, {"owner": {"reputation": 4009, "user_id": 1429402, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/paAFK.jpg?s=128&g=1", "display_name": "Fnord", "link": "https://stackoverflow.com/users/1429402/fnord"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1438836316, "post_id": 31844282, "comment_id": 51614930, "body": "@ali_m i have to use a custom build of python called mayapy, Autodesk&#39;s implementation of python inside their 3D software (Maya). It&#39;s compiled against VC2010 64bit, so pre-built binaries such as <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">Christoph Gohlke&#39;s</a> and others aren&#39;t compatible. I was able to build numpy from scratch but failed to build scipy, numexpr, etc."}, {"owner": {"reputation": 4009, "user_id": 1429402, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/paAFK.jpg?s=128&g=1", "display_name": "Fnord", "link": "https://stackoverflow.com/users/1429402/fnord"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1438840453, "post_id": 31844282, "comment_id": 51616355, "body": "@MatteoItalia I did look for pure python KD tree implementations, notably i found <a href=\"https://github.com/storpipfugl/pykdtree\" rel=\"nofollow noreferrer\">this one</a> and <a href=\"https://code.google.com/p/python-kdtree/\" rel=\"nofollow noreferrer\">this one</a>. Both were vastly slower (like 10x) than my unthreaded numpy test. So i&#39;m afraid that without access to scipy (as stated above) KD trees are a dead end."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1438892049, "post_id": 31844282, "comment_id": 51649060, "body": "Just for reference, on my puny dual core laptop <code>cKDTree</code> takes about 17ms to both construct the tree <i>and</i> query it using your example data, compared with 1.53s for <code>threaded</code> and 1.39s for <code>unthreaded</code>. I am absolutely convinced that k-D trees are worth pursuing. I&#39;m very surprised that you saw such slow query times for <code>pykdtree</code>, which seems to be implemented in C/Cython."}, {"owner": {"reputation": 4009, "user_id": 1429402, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/paAFK.jpg?s=128&g=1", "display_name": "Fnord", "link": "https://stackoverflow.com/users/1429402/fnord"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1438897136, "post_id": 31844282, "comment_id": 51651692, "body": "@ali_m i know cKDTree would be a huge speed boost but it&#39;s part of scipy which is unavailable to me. I took a look at pykdtree, it looks like it also needs to be built from scratch due to numpy dependencies. I tried to build both scipy and pykdtree and failed on both instances. Because i&#39;m forced to use a non-standard distribution of python, i can&#39;t rely on normal package distributions, or pre-built binaries. Numpy was fairly easy to build, but scipy and others haven&#39;t played nice so far. But thanks for your suggestion!"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1438897553, "post_id": 31844282, "comment_id": 51651886, "body": "I see - in your previous comment you said you had tried <code>pykdtree</code> and found that it was too slow. Yes, you would need to compile the C extension for <code>pykdtree</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4009, "user_id": 1429402, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/paAFK.jpg?s=128&g=1", "display_name": "Fnord", "link": "https://stackoverflow.com/users/1429402/fnord"}, "edited": false, "score": 0, "creation_date": 1438898487, "post_id": 31862136, "comment_id": 51652283, "body": "Yeah it&#39;s very annoying. Because it seems there&#39;s no way to imrpove performance by staying purely in numpy, I may end up pickeling the data out and have an external &quot;standard&quot; python instance running (with scipy and all its arsenal)  to crunch it down and spit out the result. Not what i want but at this time i need to move on."}], "tags": [], "owner": {"reputation": 2539, "user_id": 3637404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ff3SL.png?s=128&g=1", "display_name": "Felipe Lema", "link": "https://stackoverflow.com/users/3637404/felipe-lema"}, "is_accepted": false, "score": 2, "last_activity_date": 1438882101, "creation_date": 1438882101, "answer_id": 31862136, "question_id": 31844282, "link": "https://stackoverflow.com/questions/31844282/optimizing-a-multithreaded-numpy-array-function/31862136#31862136", "title": "Optimizing a multithreaded numpy array function", "body": "<p>Ok, I've been reading Maya documentation on python and I came to these conclusions/guesses:</p>\n\n<ul>\n<li>They're probably using CPython inside (several references to <strong>that</strong> documentation and not any other).</li>\n<li>They're not fond of threads (lots of non-thread safe methods)</li>\n</ul>\n\n<p>Since the above, I'd say it's better to avoid threads. Because of the <a href=\"https://wiki.python.org/moin/GlobalInterpreterLock\" rel=\"nofollow\">GIL problem</a>, this is a common problem and there are several ways to do the earlier.</p>\n\n<ul>\n<li>Try to build a tool <a href=\"https://wiki.python.org/moin/IntegratingPythonWithOtherLanguages#C.2FC.2B-.2B-\" rel=\"nofollow\">C/C++ extension</a>. Once that is done, use threads in C/C++. <strong>Personally</strong>, I'd only try SIP to work, and then move on.</li>\n<li>Use <a href=\"https://docs.python.org/3/library/multiprocessing.html\" rel=\"nofollow\"><code>multiprocessing</code></a>. Even if your custom python distribution doesn't include it, you can get to a working version since it's all pure python code. <code>multiprocessing</code> is not affected by the GIL since it spawns separate processes.</li>\n<li>The above should've worked out for you. If not, try another <a href=\"https://wiki.python.org/moin/ParallelProcessing\" rel=\"nofollow\">parallel tool</a> (after some serious praying).</li>\n</ul>\n\n<p>On a side note, if you're using outside modules, be most mindful of trying to match maya's version. This may have been the reason because you couldn't build <code>scipy</code>. Of course, <code>scipy</code> has a huge codebase and the windows platform is not the most resilient to build stuff.</p>\n"}], "owner": {"reputation": 4009, "user_id": 1429402, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/paAFK.jpg?s=128&g=1", "display_name": "Fnord", "link": "https://stackoverflow.com/users/1429402/fnord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1719, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1438882101, "creation_date": 1438816184, "last_edit_date": 1495540677, "question_id": 31844282, "link": "https://stackoverflow.com/questions/31844282/optimizing-a-multithreaded-numpy-array-function", "title": "Optimizing a multithreaded numpy array function", "body": "<p>Given 2 large arrays of 3D points (I'll call the first \"source\", and the second \"destination\"), I needed a function that would return indices from \"destination\" which matched elements of \"source\" as its closest, with this limitation: <strong>I can only use numpy</strong>... So no scipy, pandas, numexpr, cython...</p>\n\n<p>To do this i wrote a function <a href=\"https://stackoverflow.com/questions/2486093/millions-of-3d-points-how-to-find-the-10-of-them-closest-to-a-given-point\">based on the \"brute force\" answer to this question</a>. I iterate over elements of source, find the closest element from destination and return its index. Due to performance concerns, and again because i can only use numpy, I tried multithreading to speed it up. Here are both threaded and unthreaded functions and how they compare in speed on an 8 core machine.</p>\n\n<pre><code>import timeit\nimport numpy as np\nfrom numpy.core.umath_tests import inner1d\nfrom multiprocessing.pool import ThreadPool\n\ndef threaded(sources, destinations):\n    # Define worker function\n    def worker(point):\n        dlt = (destinations-point) # delta between destinations and given point\n        d = inner1d(dlt,dlt) # get distances\n        return np.argmin(d) # return closest index\n\n    # Multithread!\n    p = ThreadPool()\n    return p.map(worker, sources)\n\n\ndef unthreaded(sources, destinations):\n    results = []\n    #for p in sources:\n    for i in range(len(sources)):\n        dlt = (destinations-sources[i]) # difference between destinations and given point\n        d = inner1d(dlt,dlt) # get distances\n        results.append(np.argmin(d)) # append closest index\n\n    return results\n\n\n# Setup the data\nn_destinations = 10000 # 10k random destinations\nn_sources = 10000      # 10k random sources\ndestinations= np.random.rand(n_destinations,3) * 100\nsources = np.random.rand(n_sources,3) * 100\n\n#Compare!\nprint 'threaded:   %s'%timeit.Timer(lambda: threaded(sources,destinations)).repeat(1,1)[0]\nprint 'unthreaded: %s'%timeit.Timer(lambda: unthreaded(sources,destinations)).repeat(1,1)[0]\n</code></pre>\n\n<p>Retults:</p>\n\n<pre><code>threaded:   0.894030461056\nunthreaded: 1.97295164054\n</code></pre>\n\n<p>Multithreading seems beneficial but I was hoping for more than 2X increase given the real life dataset i deal with are much larger.</p>\n\n<p>All recommendations to improve performance (within the limitations described above) will be greatly appreciated! </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1438816131, "post_id": 31844268, "comment_id": 51610018, "body": "Where did <code>1</code> and <code>2</code> come from?"}, {"owner": {"reputation": 1257, "user_id": 4122764, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/df2663f20f101d53001e19cbb8a74803?s=128&d=identicon&r=PG&f=1", "display_name": "Goutam", "link": "https://stackoverflow.com/users/4122764/goutam"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438816184, "post_id": 31844268, "comment_id": 51610038, "body": "@TigerhawkT3 Its like a counter from &#39;1 to n&#39; for the number of values present in the set."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438816265, "post_id": 31844268, "comment_id": 51610067, "body": "I agree with @Tiger. The problem is, you&#39;re adding previously non-existant information in your example. The simple answer to this is to iterate over the set, and insert each element into the dictionary."}], "answers": [{"comments": [{"owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "edited": false, "score": 0, "creation_date": 1438816754, "post_id": 31844314, "comment_id": 51610201, "body": "and if the value isn&#39;t actually important: <code>{ item:1 for item in input_set }</code>"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "edited": false, "score": 0, "creation_date": 1438816810, "post_id": 31844314, "comment_id": 51610216, "body": "@WilCooley - that wouldn&#39;t be much of a counter from 1 to n, though."}, {"owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "edited": false, "score": 0, "creation_date": 1438818131, "post_id": 31844314, "comment_id": 51610578, "body": "no, it won&#39;t; it&#39;s not clear to me (even after your attempt at clarification) if the counter is actually important or if that was an extraneous detail."}, {"owner": {"reputation": 906, "user_id": 3549503, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZS7G5.jpg?s=128&g=1", "display_name": "mrnfrancesco", "link": "https://stackoverflow.com/users/3549503/mrnfrancesco"}, "edited": false, "score": 0, "creation_date": 1501235131, "post_id": 31844314, "comment_id": 77700836, "body": "to start counting from 1 the easiest way is using <code>enumerate(input_set, start=1)</code>"}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 4, "last_activity_date": 1438816387, "creation_date": 1438816387, "answer_id": 31844314, "question_id": 31844268, "link": "https://stackoverflow.com/questions/31844268/how-to-convert-a-set-in-python-into-a-dictionary/31844314#31844314", "title": "how to convert a set in python into a dictionary", "body": "<p>Use <code>enumerate()</code> to generate a value starting from 0 and counting upward for each item in the dictionary, and then assign it in a comprehension:</p>\n\n<pre><code>input_set = {'1438789225', '1438789230'}\noutput_dict = {item:val for val,item in enumerate(input_set)}\n</code></pre>\n\n<p>Or a traditional loop:</p>\n\n<pre><code>output_dict = {}\nfor val,item in enumerate(input_set):\n    output_dict[item] = val\n</code></pre>\n\n<p>If you want it to start from 1 instead of 0, use <code>item:val+1</code> for the first snippet and <code>output_dict[item] = val+1</code> for the second snippet.</p>\n\n<p>That said, this dictionary would be pretty much the same as a <code>list</code>:</p>\n\n<pre><code>output = list(input_set)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438816638, "post_id": 31844338, "comment_id": 51610178, "body": "1. I wouldn&#39;t recommend masking the built-in function <code>set()</code>. 2. <code>zip()</code> with a <code>range()</code> is basically <code>enumerate()</code>. 3. it&#39;s <code>len(set)</code>, not <code>set.size()</code>."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438816735, "post_id": 31844338, "comment_id": 51610195, "body": "I didn&#39;t even know <code>set</code> was an already existing name, thanks. And thanks. I forgot about python&#39;s way of managing lengths."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438817272, "post_id": 31844338, "comment_id": 51610346, "body": "Oh, and <code>range()</code> starts from 0 by default, so you can just do <code>range(len(oldSet))</code>."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438817520, "post_id": 31844338, "comment_id": 51610420, "body": "@TigerhawkT3 -_- Thanks. I shouldn&#39;t try to answer questions for languages that I haven&#39;t used in years."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438819818, "post_id": 31844338, "comment_id": 51610990, "body": "The solution is to use Python more. :)"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438820886, "post_id": 31844338, "comment_id": 51611239, "body": "@TigerhawkT3 Unfortunately, all the programming courses past the introductory level use Java or C++, so I&#39;m stuck with those if I want to remain fluent for my courses :/. Python definitely reminds me of a simpler time though."}], "tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": false, "score": 0, "last_activity_date": 1438818669, "last_edit_date": 1438818669, "creation_date": 1438816494, "answer_id": 31844338, "question_id": 31844268, "link": "https://stackoverflow.com/questions/31844268/how-to-convert-a-set-in-python-into-a-dictionary/31844338#31844338", "title": "how to convert a set in python into a dictionary", "body": "<p>My Python is pretty rusty, but this should do it:</p>\n\n<pre><code>def indexedDict(oldSet):\n    dic = {}\n    for elem,n in zip(oldSet, range(len(oldSet)):\n        dic[elem] = n\n\n    return dic\n</code></pre>\n\n<p>If I wrote anything illegal, tell me and I'll fix it. I don't have an interpreter handy.</p>\n\n<p>Basically, I'm just zipping the list with a range object (basically a continuous list of numbers, but more efficient), then using the resulting tuples.\nId got with Tiger's answer, this is basically a more naive version of his. </p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 5195906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7413d3867fdcb31c65c7457b0d9aa6e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia Primavera", "link": "https://stackoverflow.com/users/5195906/mattia-primavera"}, "is_accepted": false, "score": 0, "last_activity_date": 1438816651, "creation_date": 1438816651, "answer_id": 31844361, "question_id": 31844268, "link": "https://stackoverflow.com/questions/31844268/how-to-convert-a-set-in-python-into-a-dictionary/31844361#31844361", "title": "how to convert a set in python into a dictionary", "body": "<p>an easy way of doing this is by iterating on the set, and populating the result dictionary element by element, using a counter as dictionary key:</p>\n\n<pre><code>def setToIndexedDict(s):\n    counter = 1\n    result = dict()\n\n    for element in s:\n        result[element] = counter #adding new element to dictionary\n        counter += 1 #incrementing dictionary key\n\n    return result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 885, "user_id": 2568279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aj50J.jpg?s=128&g=1", "display_name": "Agust&#237;n Lado", "link": "https://stackoverflow.com/users/2568279/agust%c3%adn-lado"}, "is_accepted": false, "score": 2, "last_activity_date": 1438817060, "last_edit_date": 1438817060, "creation_date": 1438816652, "answer_id": 31844362, "question_id": 31844268, "link": "https://stackoverflow.com/questions/31844268/how-to-convert-a-set-in-python-into-a-dictionary/31844362#31844362", "title": "how to convert a set in python into a dictionary", "body": "<p>My one-liner:</p>\n\n<pre><code>output = dict(zip(input_set, range(1, len(s) + 1)))\n</code></pre>\n\n<p><a href=\"https://docs.python.org/2/library/functions.html#zip\" rel=\"nofollow\"><code>zip</code></a> mixes two lists (or sets) element by element (<code>l1[0] + l2[0] + l1[1] + l2[1] + ...</code>).</p>\n\n<p>We're feeding it two things:</p>\n\n<ul>\n<li>the input_set</li>\n<li>a list from 1 to the length of the set + 1 (since you specified you wanted to count from 1 onwards, not from 0)</li>\n</ul>\n\n<p>The output is a list of tuples like <code>[('1438789225', 1), ('1438789230', 2)]</code> which can be turned into a dict simply by feeding it to the dict constructor... <code>dict</code>.</p>\n\n<p>But like TigerhawkT3 said, I can hardly find a use for such a dictionary. But if you have your motives there you have another way of doing it. If you take away anything from this post let it be the existence of <a href=\"https://docs.python.org/2/library/functions.html#zip\" rel=\"nofollow\"><code>zip</code></a>.</p>\n"}], "owner": {"reputation": 1257, "user_id": 4122764, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/df2663f20f101d53001e19cbb8a74803?s=128&d=identicon&r=PG&f=1", "display_name": "Goutam", "link": "https://stackoverflow.com/users/4122764/goutam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2058, "favorite_count": 1, "accepted_answer_id": 31844314, "answer_count": 4, "score": 1, "last_activity_date": 1438818669, "creation_date": 1438816102, "question_id": 31844268, "link": "https://stackoverflow.com/questions/31844268/how-to-convert-a-set-in-python-into-a-dictionary", "title": "how to convert a set in python into a dictionary", "body": "<p>I am new to python and trying to convert a Set into a Dictionary. I am struggling to find a way to make this possible. Any inputs are highly appreciated. Thanks.</p>\n\n<pre><code>Input : {'1438789225', '1438789230'}\n\nOutput : {'1438789225':1, '1438789230':2}\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1626, "user_id": 2543727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkFul.jpg?s=128&g=1", "display_name": "cr1msonB1ade", "link": "https://stackoverflow.com/users/2543727/cr1msonb1ade"}, "edited": false, "score": 0, "creation_date": 1438816049, "post_id": 31844230, "comment_id": 51609995, "body": "Realized that the <code>commit=False</code> option is only available for a <code>ModelForm</code> and not a model. Are there other options for validating a model before saving aside from <code>full_clean</code> now that I realize that <code>commit=False</code> is not an option?"}, {"owner": {"reputation": 8071, "user_id": 1255748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dfea3267368342bafad65ca0bd3db246?s=128&d=identicon&r=PG", "display_name": "Thane Brimhall", "link": "https://stackoverflow.com/users/1255748/thane-brimhall"}, "edited": false, "score": 0, "creation_date": 1438816241, "post_id": 31844230, "comment_id": 51610061, "body": "You could always just override the model&#39;s save and error out before invoking the super..."}], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 2, "last_activity_date": 1438816454, "creation_date": 1438816454, "answer_id": 31844326, "question_id": 31844230, "link": "https://stackoverflow.com/questions/31844230/django-savecommit-false-versus-full-clean/31844326#31844326", "title": "django save(commit=False) versus full_clean", "body": "<p>Calling <code>full_clean()</code> is the correct way to validate a model instance.</p>\n\n<pre><code>from django.core.exceptions import ValidationError\n\ntry:\n    obj.full_clean()\nexcept ValidationError:\n    # handle invalid object\n</code></pre>\n\n<p>When dealing with a model form, calling <code>is_valid()</code> will perform the model validation, so you don't have to call <code>full_clean()</code> manually.</p>\n\n<p>Calling <code>save()</code> with <code>commit=False</code> doesn't perform model validation. Instead, it gives you the opportunity to change the object before you save it to the database. A common example is to set the user attribute to the user that is currently logged on.</p>\n"}], "owner": {"reputation": 1626, "user_id": 2543727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkFul.jpg?s=128&g=1", "display_name": "cr1msonB1ade", "link": "https://stackoverflow.com/users/2543727/cr1msonb1ade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 31844326, "answer_count": 1, "score": 1, "last_activity_date": 1438816454, "creation_date": 1438815771, "question_id": 31844230, "link": "https://stackoverflow.com/questions/31844230/django-savecommit-false-versus-full-clean", "title": "django save(commit=False) versus full_clean", "body": "<p>I am working on a django project and creating many model instances from batch upload form. I am creating many unsaved model instances in order to test them for errors as I don't want to enter any instances until the user has submitted a full set of valid records to avoid unintentional duplications within the database. My question is whether there is a good reason to use either <code>save(commit=False)</code> or <code>full_clean</code> on the unsaved model instances. I am currently using <code>full_clean</code>, but not sure what the differences/benefits are of one versus the other.</p>\n"}, {"tags": ["python", "numpy", "polynomial-math"], "comments": [{"owner": {"reputation": 4289, "user_id": 908293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a30b8d0b807c736c457e506cd7f7f699?s=128&d=identicon&r=PG", "display_name": "saulspatz", "link": "https://stackoverflow.com/users/908293/saulspatz"}, "edited": false, "score": 4, "creation_date": 1438818065, "post_id": 31844190, "comment_id": 51610562, "body": "Do you mean &quot;solving&quot; the polynomial or evaluating it at a particular argument?  &quot;Solving&quot; a polynomial generally means finding the roots.  I can&#39;t imagine that you&#39;ll outperform numpy, using python, but look up &quot;Horner&#39;s Method&quot; in Wikipedia, if as it seems, you want to evaluate the polynomial."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1438851632, "post_id": 31844190, "comment_id": 51622674, "body": "When you say &#171; [...] tooks more than five seconds [...] &#187;, how did you checked it?"}, {"owner": {"reputation": 63, "user_id": 4385373, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/146cb90afc18e16cc35ca44d647746e6?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Correia", "link": "https://stackoverflow.com/users/4385373/daniel-correia"}, "edited": false, "score": 0, "creation_date": 1438938475, "post_id": 31844190, "comment_id": 51665662, "body": "I solved my problem with this: def horner(coeffs, x): \treturn reduce(lambda acc, c: acc * x + c, reversed(coeffs), 0) \t def poli(value):\t \tx = horner( (0.000682896, -0.404399274, 0.379269091, -0.052211292, 0.003961843, -0.0001527, 0.000002324), value)\t\t \treturn x"}, {"owner": {"reputation": 828, "user_id": 5143911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1aed414dcc50f5caf1e83d7469db50?s=128&d=identicon&r=PG&f=1", "display_name": "yevgeniy", "link": "https://stackoverflow.com/users/5143911/yevgeniy"}, "edited": false, "score": 0, "creation_date": 1438940998, "post_id": 31844190, "comment_id": 51667262, "body": "Would you post this as an answer then? I still don&#39;t see how this makes a speed-up compared to your &quot;basic&quot; evaluator. On my machine <code>horner</code> runs slower."}], "answers": [{"tags": [], "owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "is_accepted": false, "score": 3, "last_activity_date": 1438946607, "last_edit_date": 1438946607, "creation_date": 1438946302, "answer_id": 31876461, "question_id": 31844190, "link": "https://stackoverflow.com/questions/31844190/solve-polynomial-equation-of-6th-order-with-python-efficiently/31876461#31876461", "title": "Solve Polynomial equation of 6th order with Python efficiently", "body": "<p>First, what you want is to <em>evaluate</em> a polynomial for a given <code>x</code>, not to <em>solve</em> it. Second, I still don't see how do you get your speed up..</p>\n\n<p>Find here a couple of timmings:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; x = 19.61\n&gt;&gt;&gt; pr = [0.000002324, -0.0001527, 0.003961843, -0.052211292, 0.379269091, -0.404399274, 0.000682896]\n&gt;&gt;&gt; p = pr[::-1] # reverse the order\n</code></pre>\n\n<ul>\n<li><p>Hardcoded solution:</p>\n\n<pre><code>&gt;&gt;&gt; %timeit p[0] + x * p[1] + p[2] * x**2 + p[3] * x**3 + p[4] * x**4 + p[5] * x**5 + p[6] * x**6\n809 ns\n</code></pre></li>\n<li><p>Loopy solution:</p>\n\n<pre><code>&gt;&gt;&gt; %%timeit\n    val = 0\n    for i in range(len(p)):\n        val += p[i] * x**i\n1.24 \u00b5s\n</code></pre></li>\n<li><p>Functional programming solution:</p>\n\n<pre><code>&gt;&gt;&gt; %timeit reduce(lambda acc, i: acc + p[i] * x**i, range(len(p)))\n1.61 \u00b5s\n</code></pre></li>\n<li><p>Using numpy's <code>polyval</code>:</p>\n\n<pre><code>&gt;&gt;&gt; %timeit np.polyval(pr, x)\n6.12 \u00b5s\n</code></pre></li>\n<li><p>Using numpy's <code>poly1d</code></p>\n\n<pre><code>&gt;&gt;&gt; %%timeit\n    c = np.poly1d(pr)\n    c(x)\n9.46 \u00b5s\n</code></pre></li>\n</ul>\n\n<p>So, clearly numpy is slower, as for a such a small array it adds some overhead in the Python &lt;-> C communication, but still, it is of the order of <code>6-9 \u00b5s</code>, I'm using a desktop computer, but I would be pretty impressed if a Raspberry Pi would really take 5 seconds to do that operation. Are you sure you did the timings properly?</p>\n\n<p>Any way, either the hardcoded or the loopy solution seem faster than the functional programming one (the equivalent to the one that you defined as <code>horner</code> in your comment).</p>\n"}], "owner": {"reputation": 63, "user_id": 4385373, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/146cb90afc18e16cc35ca44d647746e6?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Correia", "link": "https://stackoverflow.com/users/4385373/daniel-correia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438946607, "creation_date": 1438815531, "question_id": 31844190, "link": "https://stackoverflow.com/questions/31844190/solve-polynomial-equation-of-6th-order-with-python-efficiently", "title": "Solve Polynomial equation of 6th order with Python efficiently", "body": "<p>I want to Solve Polynomial equation of 6th order with Python.\nI've tried the \"basic\" version:</p>\n\n<pre><code>avgIrms = 19.61\nc_val = (0.000002324*avgIrms**6) - (0.0001527*avgIrms**5) + (0.003961843*avgIrms**4) - (0.052211292*avgIrms**3) + (0.379269091*avgIrms**2) -(0.404399274*avgIrms) + 0.000682896\nprint(c_val)\n</code></pre>\n\n<p>After that I've used the numpy with the following code:</p>\n\n<pre><code>import numpy as np\navgIrms = 19.61\nppar = [0.000002324, -0.0001527, 0.003961843, -0.052211292, 0.379269091, -0.404399274, 0.000682896]\np = np.poly1d(ppar)\nprint(p(avgIrms))   \n</code></pre>\n\n<p>In the both ways the raspberry tooks more than five seconds to process... It's to much! Any help to solve polynomial equations efficiently? (less than one second...)</p>\n\n<p>Thanks in advance,\nDaniel</p>\n"}, {"tags": ["python", "tkinter", "sticky"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1438818629, "post_id": 31844173, "comment_id": 51610690, "body": "grid(row=0) = at the top  See &quot;Handling Resize and the following examples at  <a href=\"http://www.tkdocs.com/tutorial/grid.html\" rel=\"nofollow noreferrer\">tkdocs.com/tutorial/grid.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 3103237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9IdLD.png?s=128&g=1", "display_name": "mRotten", "link": "https://stackoverflow.com/users/3103237/mrotten"}, "edited": false, "score": 0, "creation_date": 1438821523, "post_id": 31844263, "comment_id": 51611391, "body": "Thanks Bryan. I suppose this should be flagged as a duplicate question, since it seems to have the same answer as a <a href=\"http://stackoverflow.com/questions/15530392/python-tkinter-grid-geometry-sticky-setting-not-effective\">previous one</a> that you answered. Still having a bit of an issue though - I added <code>frame[&#39;b&#39;].grid_rowconfigure(0, weight=1)</code>, and that moves b2 to the bottom of frame b. But adding <code>frame[&#39;b2&#39;].grid_columnconfigure(0, weight=1)</code> still doesn&#39;t allow frame b2 to expand to the right side of frame b."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 407, "user_id": 3103237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9IdLD.png?s=128&g=1", "display_name": "mRotten", "link": "https://stackoverflow.com/users/3103237/mrotten"}, "edited": false, "score": 0, "creation_date": 1438859984, "post_id": 31844263, "comment_id": 51628215, "body": "@mRotten: I&#39;ve updated my answer with some examples and additional advice."}, {"owner": {"reputation": 407, "user_id": 3103237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9IdLD.png?s=128&g=1", "display_name": "mRotten", "link": "https://stackoverflow.com/users/3103237/mrotten"}, "edited": false, "score": 0, "creation_date": 1438885882, "post_id": 31844263, "comment_id": 51645696, "body": "Question is updated with working code, illustration of the horizontal justification issue that was solved in the working code. Thanks to Bryan for pointing me in the right direction. As he also mentioned, <code>pack()</code> might be more appropriate for this application, but I think it&#39;s worth showing that even when a container has only one column, not giving that column weight can result in unexpected behavior from <code>grid()</code>."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 3, "last_activity_date": 1438859965, "last_edit_date": 1438859965, "creation_date": 1438816068, "answer_id": 31844263, "question_id": 31844173, "link": "https://stackoverflow.com/questions/31844173/tkinter-sticky-not-working-for-some-frames/31844263#31844263", "title": "tkinter sticky not working for some frames", "body": "<p>You must give some rows and columns a weight, so tkinter knows how to allocate extra space. </p>\n\n<p>As a rule of thumb when using <code>grid</code>, every container using grid should give at least one row and one column weight. </p>\n\n<p>What I would do is start over. Be methodical. Get the main three areas working first before tackling other problems. What is making this problem hard to solve is that nothing is behaving right, so you're trying to adjust many things at once. Focus on one area at a time, get it working just right, and then move on.</p>\n\n<p>Given your diagram, <code>pack</code> seems like a much simpler solution than using grid for the children of the root window Using grid inside of frames inside of other frames using grid can be confusing. </p>\n\n<p>It looks like frame C is a status bar of some sort that stretches across the bottom, so pack it first. Above that you have two areas - frame a is to the left and looks to be a fixed width, and frame c is to the right and takes up all of the extra space. Using pack, it would look like this:</p>\n\n<pre><code>frame['c'].pack(side=\"bottom\", fill=\"x\")\nframe['a'].pack(side=\"left\", fill=\"y\")\nframe['b'].pack(side=\"right\", fill=\"both\", expand=True)\n</code></pre>\n\n<p>Of course, you can get the exact same appearance with grid, but it will take a couple more lines of code since you have to give column 1 and row 1 a weight.</p>\n\n<p>That should get the three main areas working just fine. Now all you have to worry about is the contents of frame B. </p>\n\n<p>Your diagram shows that you want b2a and b2b at the bottom of frame b, with more widgets above it. Is that correct? If that's the case, you need to leave at least one extra row above it to fill the extra space. </p>\n\n<p>The blank row with a positive weight will force all of the widgets to be moved toward the bottom of the area. They will take up only as much space as they need vertically, with the empty row with the non-zero weight taking up all the extra.</p>\n\n<p>You then only have to worry about horizontal placement. It's unclear exactly what you expect, but the solution again revolves around giving columns weight. If you want both b2a and b2b to expand equally, give both columns an equal weight. If you want b2a to do all of the expanding, give only column zero a weight.</p>\n"}], "owner": {"reputation": 407, "user_id": 3103237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9IdLD.png?s=128&g=1", "display_name": "mRotten", "link": "https://stackoverflow.com/users/3103237/mrotten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7952, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1453043385, "creation_date": 1438815421, "last_edit_date": 1453043385, "question_id": 31844173, "link": "https://stackoverflow.com/questions/31844173/tkinter-sticky-not-working-for-some-frames", "title": "tkinter sticky not working for some frames", "body": "<p>I'm using tkinter to write a card game, and I'm having trouble with he grid layout manager 'sticky' configuration. I would like help fixing my code to make the frames display in the desired location. In my code and illustration below, there is a frame (b2) that contains two other (one green, b2a; and one red; b2b) frames. I would like to display frame b2 at the bottom of the parent frame (frame b). I've tried various combinations of N+S+E+W as arguments for 'sticky', for both frame b2 and the child frames b2a and b2b. However, I've been unable to make frame b2 (and more importantly b2a and b2b) appear in the desired location (the bottom image below with the correct placement was made in Illustrator).</p>\n\n<p>In particular, it seems that sticky arguments in lines 27, 36 and 37 have no effect on the placement of frame b2, b2a and b2b inside of frame b.</p>\n\n<pre><code>from tkinter import *\nfrom PIL import Image, ImageTk\n\ndef main(root):\n    cons = Frame(root)\n    cons.grid()\n\n    frameDict = setup_frames(cons)\n    populate_frames(frameDict)\n\ndef setup_frames(cons):\n    frame = {}\n    # Parental Frames\n    frame['a'] = Frame(cons, borderwidth=2, relief='groove')\n    frame['b'] = Frame(cons, borderwidth=2, relief='groove')\n    frame['c'] = Frame(cons, borderwidth=2, relief='groove')\n\n    frame['a'].grid(row=0, column=0, sticky=N+S+E+W)\n    frame['b'].grid(row=0, column=1, sticky=N+S+E+W)\n    frame['c'].grid(row=1, column=0, columnspan=2)\n\n    # Progeny 0 Frames:\n    frame['b1'] = Frame(frame['b'], borderwidth=2, relief='groove')\n    frame['b2'] = Frame(frame['b'], borderwidth=2, relief='groove')\n\n    frame['b1'].grid(row=0, column=0, sticky=N+S+E+W)\n    frame['b2'].grid(row=1, column=0, sticky=N+S+E+W)\n\n    # Progeny 1 Frames:\n\n    frame['b2a'] = Frame(frame['b2'], borderwidth=2, relief='groove',\n                         background='green')\n    frame['b2b'] = Frame(frame['b2'], borderwidth=2, relief='groove',\n                         background='red')\n\n    frame['b2a'].grid(row=0, column=0, sticky=S)\n    frame['b2b'].grid(row=0, column=1, sticky=SW)\n\n    return frame\n\ndef populate_frames(fr):\n\n    # Populating 'a' frame\n    aLab = Label(fr['a'], image=img[0])\n    aLab.grid()\n\n    # Populating b2a &amp; b2b frames\n    bLab = Label(fr['b2a'], image=img[1])\n    bLab.grid(row=0, column=0)\n\n    bLab = Label(fr['b2b'], image=img[2])\n    bLab.grid(row=0, column=1)\n\n    # Populating c1 frame\n    cLab = Label(fr['c'], image=img[3])\n    cLab.grid()\n\nif __name__ == '__main__':\n    root = Tk()\n    img = []\n    w = [40,  160, 80, 480]\n    h = [180, 60,  60, 60]\n    for i in range(4):\n        a = Image.new('RGBA', (w[i], h[i]))\n        b = ImageTk.PhotoImage(a)\n        img.append(b)\n    main(root)\n</code></pre>\n\n<p>The images below illustrate where the offending frames (green and red) are displaying (top) and where I would like them displayed (bottom).</p>\n\n<p>Could someone please help me display frame b2 (and ultimately b2a and b2b) in the correct position (Edit: at the bottom of frame b, and spanning from the right side of frame a to the right side of frame c)?</p>\n\n<p><a href=\"https://i.stack.imgur.com/x6ZXF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x6ZXF.png\" alt=\"illustration of incorrect and correct frame placement\"></a></p>\n\n<p>Update:\nI've solved both problems (vertical placement and horizontal justification of frame b2) using grid weights, as Bryan suggested. The solution to the vertical placement problem is straightforward, but I would not have predicted the solution to the horizontal justification issue.</p>\n\n<p>I solved the vertical placement problem by giving weight=1 to row 0 in frame b (resulting in the upper panel of the figure below).</p>\n\n<p>I solved the horizontal justification problem (wherein frames b1 and b2 were not stretching to fill frame b) by assigning weight=1 to column 0 in frame b. The frame outlines in the figure below show that frame b is already stretched from the right side of frame a to the right side of frame c. It's strange to me that giving weight to the only column in a frame would be required to allow child frames to fill horizontally. In any case, I've pasted my working code below. Lines 40 and 41 solved the issue I was having.</p>\n\n<pre><code>from tkinter import *\nfrom PIL import Image, ImageTk\n\ndef main(root):\n    cons = Frame(root)\n    cons.grid()\n\n    frameDict = setup_frames(cons)\n    populate_frames(frameDict)\n\ndef setup_frames(cons):\n    frame = {}\n    # Parental Frames\n    frame['a'] = Frame(cons, borderwidth=2, relief='groove')\n    frame['b'] = Frame(cons, borderwidth=2, relief='groove')\n    frame['c'] = Frame(cons, borderwidth=2, relief='groove')\n\n    frame['a'].grid(row=0, column=0, sticky=N+S+E+W)\n    frame['b'].grid(row=0, column=1, sticky=N+S+E+W)\n    frame['c'].grid(row=1, column=0, columnspan=2)\n\n    # Progeny 0 Frames:\n    frame['b1'] = Frame(frame['b'], borderwidth=2, relief='groove')\n    frame['b2'] = Frame(frame['b'], borderwidth=2, relief='groove')\n\n    frame['b1'].grid(row=0, column=0, sticky=N+S+E+W)\n    frame['b2'].grid(row=1, column=0, sticky=N+S+E+W)\n\n    # Progeny 1 Frames:\n\n    frame['b2a'] = Frame(frame['b2'], borderwidth=2, relief='groove',\n                         background='green')\n    frame['b2b'] = Frame(frame['b2'], borderwidth=2, relief='groove',\n                         background='red')\n\n    frame['b2a'].grid(row=0, column=0, sticky=S)\n    frame['b2b'].grid(row=0, column=1, sticky=SW)\n\n    # Weighting\n    frame['b'].grid_rowconfigure(0, weight=1)\n    frame['b'].grid_columnconfigure(0, weight=1)\n\n    return frame\n\ndef populate_frames(fr):\n\n    # Populating 'a' frame\n    aLab = Label(fr['a'], image=img[0])\n    aLab.grid()\n\n    # Populating b2a &amp; b2b frames\n    bLab = Label(fr['b2a'], image=img[1])\n    bLab.grid(row=0, column=0)\n\n    bLab = Label(fr['b2b'], image=img[2])\n    bLab.grid(row=0, column=1)\n\n    # Populating c1 frame\n    cLab = Label(fr['c'], image=img[3])\n    cLab.grid()\n\nif __name__ == '__main__':\n    root = Tk()\n    img = []\n    w = [40,  160, 80, 480]\n    h = [180, 60,  60, 60]\n    for i in range(4):\n        a = Image.new('RGBA', (w[i], h[i]))\n        b = ImageTk.PhotoImage(a)\n        img.append(b)\n    main(root)\n</code></pre>\n\n<p>Consistent with Bryan's advice, it does seem to be a good rule of thumb to assign a weight to at least one column and one row in every container.</p>\n\n<p>Here's before and after I fixed the horizontal justification problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TzCoH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TzCoH.png\" alt=\"before and after horizontal justification\"></a></p>\n\n<p>Using Python 3.4, Yosemite</p>\n"}, {"tags": ["python", "coding-style", "pep8"], "comments": [{"owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "edited": false, "score": 2, "creation_date": 1438815237, "post_id": 31844138, "comment_id": 51609764, "body": "No.  Don&#39;t do this.  This can have very very bad implications. Instead use a useful param name.  i.e. <code>users_dict</code>"}, {"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 0, "creation_date": 1438815318, "post_id": 31844138, "comment_id": 51609782, "body": "Why don&#39;t you try it to see what happens?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "edited": false, "score": 0, "creation_date": 1438815436, "post_id": 31844138, "comment_id": 51609816, "body": "It&#39;s against Python style to mask built-in functions (<code>dict</code> is a type and function, not a language keyword) anywhere in your program. As @KronoS says, you should be using more descriptive names anyway."}, {"owner": {"reputation": 148, "user_id": 4659744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172911626f209e4c916245414a844aa4?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4659744/anton"}, "reply_to_user": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 0, "creation_date": 1438816620, "post_id": 31844138, "comment_id": 51610176, "body": "@Will I&#39;m running it now so I believe it works, but based on the response there must be cases where it doesn&#39;t."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438817216, "post_id": 31844138, "comment_id": 51610321, "body": "The cases where it doesn&#39;t work are the cases where you try to refer to the built-in function <code>dict()</code> within <code>findStartTime()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 831, "user_id": 1045673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f39ba0d46b1b830bc15de539ab21542b?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Freitas", "link": "https://stackoverflow.com/users/1045673/andr%c3%a9-freitas"}, "is_accepted": true, "score": 1, "last_activity_date": 1438817273, "creation_date": 1438817273, "answer_id": 31844456, "question_id": 31844138, "link": "https://stackoverflow.com/questions/31844138/passing-keywords-as-parameters/31844456#31844456", "title": "Passing keywords as parameters", "body": "<p>What if for some reason in the future you want to call dict() inside the function to create a dictionary? Anyway, give meaningful names to variables instead of naming them by their type. </p>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 4659744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172911626f209e4c916245414a844aa4?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4659744/anton"}, "edited": false, "score": 0, "creation_date": 1438819663, "post_id": 31844764, "comment_id": 51610946, "body": "This answer is potentially better as you provide an example, but it doesn&#39;t need the response to my comment (people will not understand what context you are coming from)."}], "tags": [], "owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "is_accepted": false, "score": 0, "last_activity_date": 1438822671, "last_edit_date": 1438822671, "creation_date": 1438819474, "answer_id": 31844764, "question_id": 31844138, "link": "https://stackoverflow.com/questions/31844138/passing-keywords-as-parameters/31844764#31844764", "title": "Passing keywords as parameters", "body": "<p>The issue come down to scope.  If you call something <code>dict</code>, you wont be able to access <code>dict</code> methods.</p>\n\n<p>For example, if you called a variable <code>math</code> then you would be unable to access <code>math.method()</code>:</p>\n\n<pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; math = \"MATH\"\n&gt;&gt;&gt; rounded_number = math.floor(3.14)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'str' object has no attribute 'floor'\n&gt;&gt;&gt; import math\n&gt;&gt;&gt; rounded_number = math.floor(3.14)\n&gt;&gt;&gt; rounded_number\n3.0\n</code></pre>\n\n<p>So I import math, but then override the module with a string.  Hence the <code>AttributeError</code></p>\n\n<p>Then I reimport <code>math</code> and boom, <code>math.floor()</code> is a valid method again.  So basically, if you call a <code>dict</code> \"dict\" it will prevent using the <code>dict()</code> constructor and other methods.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 148, "user_id": 4659744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172911626f209e4c916245414a844aa4?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4659744/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 31844456, "answer_count": 2, "score": 0, "last_activity_date": 1438822671, "creation_date": 1438815154, "last_edit_date": 1438816726, "question_id": 31844138, "link": "https://stackoverflow.com/questions/31844138/passing-keywords-as-parameters", "title": "Passing keywords as parameters", "body": "<p>Is it against Python \"style\" to put keywords as function parameters?\ne.g.</p>\n\n<pre><code>def findStartTime(dict):\n  for key, value in dict.iteritems():\n    #do something based on values in dictionary\n  return something\n</code></pre>\n\n<p>...and besides style, <br>\nare there any potential problems that will show up?</p>\n"}, {"tags": ["python", "git", "pycharm", "git-commit"], "comments": [{"owner": {"reputation": 856, "user_id": 4671077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/knxnh.jpg?s=128&g=1", "display_name": "Anoop Toffy", "link": "https://stackoverflow.com/users/4671077/anoop-toffy"}, "edited": false, "score": 0, "creation_date": 1438826543, "post_id": 31844126, "comment_id": 51612539, "body": "check also <a href=\"http://stackoverflow.com/questions/179123/edit-an-incorrect-commit-message-in-git\" title=\"edit an incorrect commit message in git\">stackoverflow.com/questions/179123/&hellip;</a>"}, {"owner": {"reputation": 4058, "user_id": 1887118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a850635ea6017cb2b33c5b3b620119cd?s=128&d=identicon&r=PG", "display_name": "nalyd88", "link": "https://stackoverflow.com/users/1887118/nalyd88"}, "edited": false, "score": 0, "creation_date": 1438831774, "post_id": 31844126, "comment_id": 51613802, "body": "Why not just do it in the terminal?"}, {"owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "edited": false, "score": 0, "creation_date": 1438833778, "post_id": 31844126, "comment_id": 51614298, "body": "Thanks; I do know how to do <code>git commit --amend</code> and I know there are other tools I could use; I&#39;m trying to learn how to use the git features of PyCharm. (Possibly I should not have the <i>git*</i> tags on the question.)"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1438860622, "post_id": 31844126, "comment_id": 51628643, "body": "<a href=\"http://stackoverflow.com/a/14089715/147024\">This answer</a> is applicable to PyCharm and still valid."}, {"owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1438891551, "post_id": 31844126, "comment_id": 51648779, "body": "@yole Technically, it probably is a duplicate, but not obviously so -- you&#39;d have to know that IDEA and PyCharm are based on the same code and plugins and assume that nothing has changed in 2 1/2 years. The JetBrains tickets that support referred me to are rather more conclusive."}], "answers": [{"tags": [], "owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "is_accepted": false, "score": 1, "last_activity_date": 1438891684, "last_edit_date": 1438891684, "creation_date": 1438891149, "answer_id": 31864704, "question_id": 31844126, "link": "https://stackoverflow.com/questions/31844126/how-to-amend-only-a-git-commit-message-in-pycharm-4-5-3/31864704#31864704", "title": "How to amend *only* a git commit message in PyCharm 4.5.3?", "body": "<p>I submitted a support request with JetBrains (not expecting much since I'm using the free community version) and was directed to the following enhancement request tickets:</p>\n\n<ul>\n<li><a href=\"https://youtrack.jetbrains.com/issue/IDEA-81428\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-81428</a></li>\n<li><a href=\"https://youtrack.jetbrains.com/issue/IDEA-57979\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-57979</a></li>\n</ul>\n\n<p>So, on the authority of JetBrains's support, this is not possible currently; future inquisitors may refer to the above tickets for status.</p>\n"}], "owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "closed_date": 1438892226, "answer_count": 1, "score": 1, "last_activity_date": 1438891684, "creation_date": 1438815117, "last_edit_date": 1495542329, "question_id": 31844126, "link": "https://stackoverflow.com/questions/31844126/how-to-amend-only-a-git-commit-message-in-pycharm-4-5-3", "closed_reason": "Duplicate", "title": "How to amend *only* a git commit message in PyCharm 4.5.3?", "body": "<p>In <code>git</code> there is a command <code>git commit --amend</code> to edit one's last commit message (among other things). I was looking for this type of functionality in PyCharm and can't seem to find it.</p>\n\n<p>When file changes are being added to an amended commit, the <em>Commit Changes</em> dialog shows a <em>Amend commit</em> checkbox, but I find no obvious way to amend <strong>only</strong> the commit message. (I can trick the checkbox into showing up by selecting a file, checking the <em>Amend commit</em> box, and then unselecting the file, but the <em>Commit</em> button is greyed out.)</p>\n\n<p>Google turns up \"<a href=\"https://stackoverflow.com/questions/24999131/how-to-edit-a-commit-message-in-pycharm\">How to edit a commit message in PyCharm?</a>\" but it was not answered satisfactorily (or perhaps it's not applicable to the current version?). The <a href=\"http://www.jetbrains.com/pycharm/webhelp/committing-changes-to-a-local-git-repository.html\" rel=\"nofollow noreferrer\">help page</a> linked to in the previous question does not provide the answer, nor have I been able to find it in the rest of the docs. (Per <a href=\"https://meta.stackexchange.com/questions/1471/\">meta.stack*</a> <a href=\"https://meta.stackexchange.com/questions/7046/\">suggestion</a> I attempted to update the existing, unanswered question, but my edits were <a href=\"https://stackoverflow.com/review/suggested-edits/9059365\">rejected</a>.)</p>\n\n<p>Further review turns up \"<a href=\"https://stackoverflow.com/questions/14075919/\">Using IntelliJ to amend git commit message</a>\", a couple years old and without an accepted answer, and since PyCharm is based on IDEA, possibly applicable.</p>\n\n<p>Is this even possible in PyCharm 4.5.3?</p>\n"}, {"tags": ["python", "celery"], "answers": [{"tags": [], "owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "is_accepted": false, "score": 0, "last_activity_date": 1438819328, "creation_date": 1438819328, "answer_id": 31844739, "question_id": 31844095, "link": "https://stackoverflow.com/questions/31844095/is-it-possible-to-start-and-stop-celery-workers-as-a-daemon-only-while-a-script/31844739#31844739", "title": "Is it possible to start and stop Celery workers as a daemon only while a script is running?", "body": "<p>Okay, I got it working with result.result instead of result.get().</p>\n"}], "owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438819328, "creation_date": 1438814950, "question_id": 31844095, "link": "https://stackoverflow.com/questions/31844095/is-it-possible-to-start-and-stop-celery-workers-as-a-daemon-only-while-a-script", "title": "Is it possible to start and stop Celery workers as a daemon only while a script is running?", "body": "<p>I'm experimenting using Celery for desktop application use instead of running it on a server. I would like to start the workers as daemon when the application starts and stop them when they are done. </p>\n\n<p>I figured out how to stop them when I close out the application:</p>\n\n<pre><code>app.control.broadcast(\"shutdown\")\n</code></pre>\n\n<p>But the only way I got it to run the app on it's own thread is this way:</p>\n\n<pre><code>argv = ['celeryTest', '--loglevel=info']\nt = Thread(target=app.worker_main, args=(argv,))\nt.start()\n</code></pre>\n\n<p>This seems like it works but I keep getting the following message. </p>\n\n<blockquote>\n  <p>RuntimeWarning: Never call result.get() within a task! In Celery 3.2 this will result in an exception being\n  raised instead of just being a warning.\" </p>\n</blockquote>\n\n<p>What am I doing wrong or what can I do more right?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1438816240, "last_edit_date": 1438816240, "creation_date": 1438815847, "answer_id": 31844242, "question_id": 31844094, "link": "https://stackoverflow.com/questions/31844094/digitize-numpy-array/31844242#31844242", "title": "Digitize numpy array", "body": "<p>You can pass a <code>weights=</code> parameter to <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html\" rel=\"nofollow\"><code>np.histogram</code></a> to compute the summed values within each time bin, then normalize by the bin count:</p>\n\n<pre><code># 0.5 second time bins to average within\ntmin = time_vec.min()\ntmax = time_vec.max()\nbins = np.arange(tmin - (tmin % 0.5), tmax - (tmax % 0.5) + 0.5,  0.5)\n\n# summed values within each bin\nbin_sums, edges = np.histogram(time_vec,bins=bins, weights=values_vec)\n\n# number of values within each bin\nbin_counts, edges = np.histogram(time_vec,bins=bins)\n\n# average value within each bin\nbin_means = bin_sums / bin_counts\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61029, "user_id": 625914, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f1932d8bf4e9dbf779a48b41bbf21592?s=128&d=identicon&r=PG", "display_name": "behzad.nouri", "link": "https://stackoverflow.com/users/625914/behzad-nouri"}, "is_accepted": true, "score": 3, "last_activity_date": 1438816020, "creation_date": 1438816020, "answer_id": 31844259, "question_id": 31844094, "link": "https://stackoverflow.com/questions/31844094/digitize-numpy-array/31844259#31844259", "title": "Digitize numpy array", "body": "<p>You may use <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.reduceat.html#numpy.ufunc.reduceat\" rel=\"nofollow\"><code>np.ufunc.reduceat</code></a>. You just need to populate where the breaking points are, i.e. when <code>floor(t / .5)</code> changes:</p>\n\n<p>say for:</p>\n\n<pre><code>&gt;&gt;&gt; t\narray([ 0.    ,  0.025 ,  0.2125,  0.2375,  0.2625,  0.3375,  0.475 ,  0.6875,  0.7   ,  0.7375,  0.8   ,  0.9   ,\n        0.925 ,  1.05  ,  1.1375,  1.15  ,  1.1625,  1.1875,  1.1875,  1.225 ])\n&gt;&gt;&gt; b\narray([ 0.8144,  0.3734,  1.4734,  0.6307, -0.611 , -0.8762,  1.6064,  0.3863, -0.0103, -1.6889, -0.4328, -0.7373,\n        1.7856,  0.8938, -1.1574, -0.4029, -0.4352, -0.4412, -1.7819, -0.3298])\n</code></pre>\n\n<p>the break points are:</p>\n\n<pre><code>&gt;&gt;&gt; i = np.r_[0, 1 + np.nonzero(np.diff(np.floor(t / .5)))[0]]\n&gt;&gt;&gt; i\narray([ 0,  7, 13])\n</code></pre>\n\n<p>and the sum over each interval is:</p>\n\n<pre><code>&gt;&gt;&gt; np.add.reduceat(b, i)\narray([ 3.411 , -0.6975, -3.6545])\n</code></pre>\n\n<p>and the mean would be sum over length of interval:</p>\n\n<pre><code>&gt;&gt;&gt; np.add.reduceat(b, i) / np.diff(np.r_[i, len(b)])\narray([ 0.4873, -0.1162, -0.5221])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1438841749, "creation_date": 1438841749, "answer_id": 31848091, "question_id": 31844094, "link": "https://stackoverflow.com/questions/31844094/digitize-numpy-array/31848091#31848091", "title": "Digitize numpy array", "body": "<p>You can use <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html\" rel=\"nofollow\"><code>np.bincount</code></a> that is supposedly pretty efficient for such binning operations. Here's an implementation based on it to solve our case -</p>\n\n<pre><code># Find indices where 0.5 intervals shifts onto next ones\nA = time_vec*2\nidx = np.searchsorted(A,np.arange(1,int(np.ceil(A.max()))),'right')\n\n# Setup ID array such that all 0.5 intervals are ID-ed same\nout = np.zeros((A.size),dtype=int)\nout[idx[idx &lt; A.size]] = 1\nID = out.cumsum()\n\n# Finally use bincount to sum and count elements of same IDs\n# and thus get mean values per ID\nmean_vec = np.bincount(ID,values_vec)/np.bincount(ID)\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [189]: time_vec\nOut[189]: \narray([ 0.2 ,  0.23,  0.3 ,  0.4 ,  0.5 ,  0.7 ,  0.8 ,  0.92,  0.95,\n        1.  ,  1.11,  1.5 ,  2.  ,  2.3 ,  2.5 ,  4.5 ])\n\nIn [190]: values_vec\nOut[190]: array([36, 11, 93, 32, 72, 75, 26, 28, 77, 31, 60, 77, 76, 32,  6, 85])\n\nIn [191]: ID\nOut[191]: array([0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 3, 4, 4, 5], dtype=int32)\n\nIn [192]: mean_vec\nOut[192]: array([ 48.8,  47.4,  68.5,  76. ,  19. ,  85. ])\n</code></pre>\n"}], "owner": {"reputation": 27355, "user_id": 902885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fc74acf73e1261de1f71cc5987258771?s=128&d=identicon&r=PG", "display_name": "frazman", "link": "https://stackoverflow.com/users/902885/frazman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 31844259, "answer_count": 3, "score": 3, "last_activity_date": 1438841749, "creation_date": 1438814939, "question_id": 31844094, "link": "https://stackoverflow.com/questions/31844094/digitize-numpy-array", "title": "Digitize numpy array", "body": "<p>I have two vectors:</p>\n\n<pre><code>  time_vec = np.array([0.2,0.23,0.3,0.4,0.5,...., 28....])\n  values_vec = np.array([500,200,220,250,200,...., 218....])\n  time_vec.shape == values_vec.shape \n</code></pre>\n\n<p>Now, I want to take the bin the values for every 0.5 second interval and take the mean of the values. So for example</p>\n\n<pre><code>  value_vec = np.array(mean_of(500,200,220,250,200), mean_of(next values in next 0.5 second interval))\n</code></pre>\n\n<p>Is there any numpy method I am missing which bin and take mean of the bins?</p>\n"}, {"tags": ["python", "dictionary", "nested"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5091030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jsds6.jpg?s=128&g=1", "display_name": "Eric Salina", "link": "https://stackoverflow.com/users/5091030/eric-salina"}, "is_accepted": false, "score": 0, "last_activity_date": 1438818170, "creation_date": 1438818170, "answer_id": 31844572, "question_id": 31844050, "link": "https://stackoverflow.com/questions/31844050/python-summing-values-nested-inside-different-dictionaries-in-a-nested-dictiona/31844572#31844572", "title": "Python: Summing values nested inside different dictionaries in a nested dictionary", "body": "<p>While this may not be the most pythonic, the following code should work and is more readable than your original version. Note the <code>iteritems()</code> method, which allows access to both the keys and values of the dict, while <code>itervalues()</code>, as the name suggests, only iterates the values of the dict.</p>\n\n<pre><code>final = {}\nfor key, sizes in high_low_teams_in_profile.iteritems():\n    total = 0\n    for value in sizes.itervalues():\n        s = sum(value.itervalues())\n        total += s\n\n    final[key] = total\n\nprint final\n</code></pre>\n\n<p>In addition, you could use the following. While it is a shorter number of lines, it is slightly more difficult to read.</p>\n\n<pre><code>final = {}\nfor key, sizes in high_low_teams_in_profile.iteritems():\n    total = sum([sum(value.itervalues()) for value in sizes.itervalues()])\n    final[key] = total\n\nprint final\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 2952523, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/BjQIc.jpg?s=128&g=1", "display_name": "doubleOK", "link": "https://stackoverflow.com/users/2952523/doubleok"}, "edited": false, "score": 0, "creation_date": 1438822967, "post_id": 31844756, "comment_id": 51611720, "body": "Oh nice! I like this one =) neat and concise!"}], "tags": [], "owner": {"reputation": 800, "user_id": 627003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULmyb.jpg?s=128&g=1", "display_name": "Wil Cooley", "link": "https://stackoverflow.com/users/627003/wil-cooley"}, "is_accepted": true, "score": 2, "last_activity_date": 1438820351, "last_edit_date": 1495541772, "creation_date": 1438819438, "answer_id": 31844756, "question_id": 31844050, "link": "https://stackoverflow.com/questions/31844050/python-summing-values-nested-inside-different-dictionaries-in-a-nested-dictiona/31844756#31844756", "title": "Python: Summing values nested inside different dictionaries in a nested dictionary", "body": "<p>I'm not sure if I'd say it's the most Pythonic, but it's the most <a href=\"https://stackoverflow.com/tags/functional-programming/info\"><em>functional</em></a>:</p>\n\n<pre><code>p = high_low_teams_in_profile\n{ prof:sum(p[prof][team][hl]\n           for team in p[prof]\n           for hl in p[prof][team])\n  for prof in p}\n</code></pre>\n\n<p>The arguments of <code>sum</code> is a <a href=\"https://docs.python.org/3/tutorial/classes.html#generator-expressions\" rel=\"nofollow noreferrer\">generator expression</a> and the outer <code>{ prof:sum(...) for prof in p}</code> is a <a href=\"https://docs.python.org/3/tutorial/datastructures.html#dictionaries\" rel=\"nofollow noreferrer\">dictionary comprehension</a>.</p>\n"}], "owner": {"reputation": 303, "user_id": 2952523, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/BjQIc.jpg?s=128&g=1", "display_name": "doubleOK", "link": "https://stackoverflow.com/users/2952523/doubleok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 31844756, "answer_count": 2, "score": 0, "last_activity_date": 1438820351, "creation_date": 1438814656, "last_edit_date": 1438818152, "question_id": 31844050, "link": "https://stackoverflow.com/questions/31844050/python-summing-values-nested-inside-different-dictionaries-in-a-nested-dictiona", "title": "Python: Summing values nested inside different dictionaries in a nested dictionary", "body": "<p>I have a nested dictionary called \"high_low_teams_in_profile\" which looks like this:</p>\n\n<pre><code>{   \n    m_profile1:\n        {\n            team_size1:\n                {   \n                    low: 1,\n\n                    high: 1\n\n                },\n            team_size2:\n                {   \n                    low: 1,\n\n                    high: 1\n\n                }\n        },\n    m_profile2:\n        {\n            team_size1:\n                {   \n                    low: 1,\n\n                    high: 1\n\n                },\n            team_size2:\n                {   \n                    low: 1,\n\n                    high: 1\n\n                }\n\n        }   \n}\n</code></pre>\n\n<p>And I want to get {m_profile1: 4, m_profile2: 4}</p>\n\n<p>What is the most eloquent way to do it in python?\nRight now I have the following:</p>\n\n<pre><code>new_num_teams_in_profile = {}\nfor profile in high_low_teams_in_profile:\n    new_num_teams_in_profile[profile]= dict((team_size, sum(high_low_teams_in_profile[profile][team_size].values())) for team_size in high_low_teams_in_profile[profile])\n\nnew_num_teams_in_profile= dict((profile, sum(new_num_teams_in_profile[profile].values())) for profile in new_num_teams_in_profile)\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "tokenize", "feature-extraction", "keyword-argument"], "answers": [{"tags": [], "owner": {"reputation": 5894, "user_id": 1319871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ed3eb8fb25b9139f488153a7dc9490?s=128&d=identicon&r=PG", "display_name": "yangjie", "link": "https://stackoverflow.com/users/1319871/yangjie"}, "is_accepted": true, "score": 8, "last_activity_date": 1438823625, "last_edit_date": 1438823625, "creation_date": 1438821726, "answer_id": 31845036, "question_id": 31843996, "link": "https://stackoverflow.com/questions/31843996/python-how-to-pass-tokenizer-with-keyword-arguments-to-scikits-countvectorizer/31845036#31845036", "title": "PYTHON: How to pass tokenizer with keyword arguments to scikit&#39;s CountVectorizer?", "body": "<p>The <code>tokenizer</code> should be a callable or None.</p>\n\n<p>(Is <code>tokenizer=tokenize(**args)</code> a typo? Your function name above is <code>tokenizer</code>.)</p>\n\n<p>You can try this:</p>\n\n<pre><code>count_vect = CountVectorizer(tokenizer=lambda text: tokenizer(text, **args), stop_words='english', strip_accents='ascii', min_df=0, max_df=1., vocabulary=None)\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 4602327, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0491fb8dd2516dacdd4cd2f90b1b0341?s=128&d=identicon&r=PG&f=1", "display_name": "JRun", "link": "https://stackoverflow.com/users/4602327/jrun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6143, "favorite_count": 3, "accepted_answer_id": 31845036, "answer_count": 1, "score": 5, "last_activity_date": 1473444720, "creation_date": 1438814362, "last_edit_date": 1438872045, "question_id": 31843996, "link": "https://stackoverflow.com/questions/31843996/python-how-to-pass-tokenizer-with-keyword-arguments-to-scikits-countvectorizer", "title": "PYTHON: How to pass tokenizer with keyword arguments to scikit&#39;s CountVectorizer?", "body": "<p>I have a custom tokenizer function with some keyword arguments:</p>\n\n<pre><code>def tokenizer(text, stem=True, lemmatize=False, char_lower_limit=2, char_upper_limit=30):\n    do things...\n    return tokens\n</code></pre>\n\n<p>Now, how can I can pass this tokenizer with all its arguments to CountVectorizer? Nothing I tried works; this did not work either:</p>\n\n<pre><code>from sklearn.feature_extraction.text import CountVectorizer\nargs = {\"stem\": False, \"lemmatize\": True}\ncount_vect = CountVectorizer(tokenizer=tokenizer(**args), stop_words='english', strip_accents='ascii', min_df=0, max_df=1., vocabulary=None)\n</code></pre>\n\n<p>Any help is much appreciated. Thanks in advance.</p>\n"}, {"tags": ["python", "django", "apache", "wsgi", "templatetags"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 2267627, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b2179057d9c327fd1901a23f3ebb27e0?s=128&d=identicon&r=PG", "display_name": "rockyl", "link": "https://stackoverflow.com/users/2267627/rockyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1438839691, "creation_date": 1438839691, "answer_id": 31847634, "question_id": 31843974, "link": "https://stackoverflow.com/questions/31843974/django-custom-template-tag-not-found-in-wsgi-application/31847634#31847634", "title": "Django: Custom Template Tag not found in WSGI Application", "body": "<p>Solved it.</p>\n\n<p>This was an permission issue, my ftp isn't set up correctly and creates the files and folders with incorrect permissions. I chmodded the project to 755 for directories and 644 for files and it works now. </p>\n"}], "owner": {"reputation": 133, "user_id": 2267627, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b2179057d9c327fd1901a23f3ebb27e0?s=128&d=identicon&r=PG", "display_name": "rockyl", "link": "https://stackoverflow.com/users/2267627/rockyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438839691, "creation_date": 1438814235, "question_id": 31843974, "link": "https://stackoverflow.com/questions/31843974/django-custom-template-tag-not-found-in-wsgi-application", "title": "Django: Custom Template Tag not found in WSGI Application", "body": "<p>I've been using custom templatetags for the first time with Django. After some trouble I got it to work with <code>runserver</code>. But now when I try to access the page through Apache (with mod_wsgi) I get the error: </p>\n\n<pre><code>TemplateSyntaxError at /\n'webpage_helpers' is not a valid tag library: Template library webpage_helpers not found,\ntried django.templatetags.webpage_helpers,django.contrib.admin.templatetags.webpage_helpers,django.contrib.staticfiles.templatetags.webpage_helpers,webpage.templatetags.webpage_helpers\n</code></pre>\n\n<p>My file structure is the following:</p>\n\n<pre><code>project/\n    project/\n        wsgi.py\n        settings.py \n    webpage/\n        __init__.py\n        views.py\n        models.py\n        templatetags/\n            __init__.py\n            webpage_helpers.py\n    static/\n    templates/\n        base/\n            base.html\n        webpage/\n            index.html\n</code></pre>\n\n<p>The error starts at <code>webpage/index.html</code></p>\n\n<pre><code>{% extends 'base/base.html' %}\n{% load webpage_helpers %}\n</code></pre>\n\n<p>My <code>wsgi.py</code> is still default, it only contains a line towards the <code>settings.py</code>.</p>\n\n<p>The error shows it's clearly looking at the right spot (<code>webpage.templatetags.webpage_helpers</code>) as last item.</p>\n\n<p>I've tried restarting apache through:\n<code>sudo service apache2 restart</code></p>\n\n<p>Keep in mind it's working perfectly with <code>runserver</code>.</p>\n\n<p>Does anyone know what I'm doing wrong?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2589, "user_id": 3776938, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1b19e04e44001cc1ddba3afc2212365?s=128&d=identicon&r=PG&f=1", "display_name": "AJG519", "link": "https://stackoverflow.com/users/3776938/ajg519"}, "edited": false, "score": 0, "creation_date": 1438816350, "post_id": 31844260, "comment_id": 51610093, "body": "Thank you, this is exactly what I was looking for."}], "tags": [], "owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "is_accepted": true, "score": 30, "last_activity_date": 1438816022, "creation_date": 1438816022, "answer_id": 31844260, "question_id": 31843911, "link": "https://stackoverflow.com/questions/31843911/sorting-pandas-dataframe-by-order-of-another-index/31844260#31844260", "title": "Sorting Pandas Dataframe by order of another index", "body": "<p><code>reindex</code> would work - be aware that it will create missing values for index values that are df, not in df2.</p>\n\n<pre><code>In [18]: df2.reindex(df.index)\nOut[18]: \n                 D\nArizona     Orange\nNew Mexico   Green\nColorado      Blue\n</code></pre>\n"}], "owner": {"reputation": 2589, "user_id": 3776938, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1b19e04e44001cc1ddba3afc2212365?s=128&d=identicon&r=PG&f=1", "display_name": "AJG519", "link": "https://stackoverflow.com/users/3776938/ajg519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13912, "favorite_count": 0, "accepted_answer_id": 31844260, "answer_count": 1, "score": 20, "last_activity_date": 1438816022, "creation_date": 1438813921, "last_edit_date": 1438814985, "question_id": 31843911, "link": "https://stackoverflow.com/questions/31843911/sorting-pandas-dataframe-by-order-of-another-index", "title": "Sorting Pandas Dataframe by order of another index", "body": "<p>Say I have two dataframes, df1 and df2 that share the same index. df1 is sorted in the order that I want df2 to be sorted.</p>\n\n<pre><code>df=pd.DataFrame(index=['Arizona','New Mexico', 'Colorado'],columns=['A','B','C'], data=[[1,2,3],[4,5,6],[7,8,9]])\nprint df\n\n            A  B  C\nArizona     1  2  3\nNew Mexico  4  5  6\nColorado    7  8  9\n\n\ndf2=pd.DataFrame(index=['Arizona','Colorado', 'New Mexico'], columns=['D'], data=['Orange','Blue','Green'])\nprint df2\n                 D\nArizona     Orange\nColorado      Blue\nNew Mexico   Green\n</code></pre>\n\n<p>What is the best / most efficient way of sorting the second dataframe by the index of the first?</p>\n\n<p>One option is just joining them, sorting, and then dropping the columns:</p>\n\n<pre><code>df.join(df2)[['D']]\n\n                 D\nArizona     Orange\nNew Mexico   Green\nColorado      Blue\n</code></pre>\n\n<p>Is there a more elegant way of doing this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "prime-factoring", "exponent"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1438813627, "post_id": 31843844, "comment_id": 51609206, "body": "Just curious: prime numbers are always integers, so why are you returning floats?"}, {"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 0, "creation_date": 1438813703, "post_id": 31843844, "comment_id": 51609227, "body": "Please fix your indentation."}, {"owner": {"reputation": 23, "user_id": 5195850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153208594912762/picture?type=large", "display_name": "George Lewis", "link": "https://stackoverflow.com/users/5195850/george-lewis"}, "edited": false, "score": 0, "creation_date": 1438814029, "post_id": 31843844, "comment_id": 51609351, "body": "I think it returns floats because of the (probably unnecessarily convoluted) way that my function finds the prime factors, it divides through to see if the answer is an integer but if I didn&#39;t use float division then the answer was always an integer. It doesn&#39;t seem to make that much difference though so I just left it. I think indentation should be fixed now too"}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1438814676, "post_id": 31843844, "comment_id": 51609566, "body": "same problem: <a href=\"http://stackoverflow.com/questions/28911925/exponential-form-of-prime-factorization-in-python\" title=\"exponential form of prime factorization in python\">stackoverflow.com/questions/28911925/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 5195906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7413d3867fdcb31c65c7457b0d9aa6e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia Primavera", "link": "https://stackoverflow.com/users/5195906/mattia-primavera"}, "is_accepted": false, "score": 0, "last_activity_date": 1438816271, "creation_date": 1438816271, "answer_id": 31844297, "question_id": 31843844, "link": "https://stackoverflow.com/questions/31843844/how-to-calculate-the-exponents-of-prime-factors-for-a-given-number/31844297#31844297", "title": "How to calculate the exponents of prime factors for a given number?", "body": "<p>Since you were wondering if it was the right way for solving the problem, I would suggest you to write a similar function for calculating prime factors, simply adding each one of them to the list:</p>\n\n<pre><code>def prime_factors_list(n):\n    result = list()\n    diviser = 2\n\n    if n &lt;= 0:\n        return [] #empty list\n\n\n\n    if n == 1:\n        return [1]\n\n    \"\"\"We increment diviser when it does not divide n anymore\"\"\"\n    while n != 1:\n        if n % diviser == 0: # if 'diviser' divides n\n            n = n / diviser\n            result.append(diviser) # diviser works, we add it to the list\n        else:\n            diviser += 1 #diviser does not work, we try with a bigger one\n\n    return result\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5195850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153208594912762/picture?type=large", "display_name": "George Lewis", "link": "https://stackoverflow.com/users/5195850/george-lewis"}, "edited": false, "score": 0, "creation_date": 1438874061, "post_id": 31844320, "comment_id": 51638520, "body": "Thanks a lot! That makes much more sense than what I was trying to do, I&#39;ve used this code and now it works perfectly. That&#39;s really useful to know about floats too, that explains why I had kept getting errors whilst trying it out!"}], "tags": [], "owner": {"reputation": 348, "user_id": 4120265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6c41l.jpg?s=128&g=1", "display_name": "Rohcana", "link": "https://stackoverflow.com/users/4120265/rohcana"}, "is_accepted": true, "score": 1, "last_activity_date": 1438816420, "creation_date": 1438816420, "answer_id": 31844320, "question_id": 31843844, "link": "https://stackoverflow.com/questions/31843844/how-to-calculate-the-exponents-of-prime-factors-for-a-given-number/31844320#31844320", "title": "How to calculate the exponents of prime factors for a given number?", "body": "<p>You should use the modulo operator %. Say you have a number 270. So, you divide 270 by 3 until it is \"stripped\" off 3's, ie. has no factors of 3 left.</p>\n\n<ul>\n<li>270/3=90</li>\n<li>90/3=30</li>\n<li>30/3=10</li>\n<li>10 is not divisible by 3. </li>\n</ul>\n\n<p>So, 270=10 * 3<sup>3 </sup></p>\n\n<p><strong>Using you prime factors function:</strong></p>\n\n<pre><code>def p_fctr_exp(n):\n    primes = prime_factors(n)\n    exp=[]\n\n    for p in primes:\n        e=0\n            while (n%p==0):\n            n=n//p       # since p still divides n,\n            e+=1         # we divide n by p and increase the exponent\n        exp.append(e)\n    return exp\n</code></pre>\n\n<p><strong>Notes</strong></p>\n\n<ol>\n<li><p><strong>DO NOT</strong> use floats for number theory problems. First, modulo operator doesn't work on them. Second, You never know when you are victim of inaccurate precision. Example: <code>0.1+0.1+0.1+0.1+0.1+0.1+0.1+0.1+0.1+0.1==1.0</code> evaluates to <code>False.</code>  If you need to check divisibility use %.</p></li>\n<li><p>You are right on the reason your code fails. For 18, <code>prime_factors(18)=[2,3].</code> since 2<sup>4</sup> &lt; 18 &lt; 2<sup>5</sup>. Your function reports that the power of 2 in 18 is 4 which is wrong.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5195850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153208594912762/picture?type=large", "display_name": "George Lewis", "link": "https://stackoverflow.com/users/5195850/george-lewis"}, "edited": false, "score": 0, "creation_date": 1438874276, "post_id": 31844610, "comment_id": 51638688, "body": "Thanks, that link was really useful too, I have been trying to learn how to use NumPy for my course too so it is good to see how that can come into it."}], "tags": [], "owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "is_accepted": false, "score": 1, "last_activity_date": 1438818419, "creation_date": 1438818419, "answer_id": 31844610, "question_id": 31843844, "link": "https://stackoverflow.com/questions/31843844/how-to-calculate-the-exponents-of-prime-factors-for-a-given-number/31844610#31844610", "title": "How to calculate the exponents of prime factors for a given number?", "body": "<p>This will get the job done.  </p>\n\n<p>There may be <a href=\"http://rebrained.com/?p=458\" rel=\"nofollow\">faster ways to do this</a> that tradeoff memory usage for cpu. Here I've attempted to keep the primes list small if it suffices for the factorization.</p>\n\n<pre><code>import math\n\nclass PrimeList():\n    init_primes = [2,3,5,7,11,13,15,17,19,23]\n    def __init__(self, n):\n        self.primes = PrimeList.init_primes\n        self.extend(n)\n\n    def extend(self,n):\n        n = int(n)\n        nextnum = self.primes[-1]\n        while(self.primes[-1]&lt;n):\n            nextnum += 2\n            if self.check(nextnum):\n                self.primes.append(nextnum)\n\n    def check(self,n):\n        n = int(n)\n        limit = int(math.sqrt(n))\n        return all((n%p for p in self.primes if p&lt;=limit))\n\n    def is_prime(self, n):\n        n = int(n)\n        self.extend(int(math.sqrt(n)))\n        return self.check(n)\n\n    def factors(self, n):\n        n = int(n)\n        x = n\n        fact = dict()\n        for p in self.primes:\n            if p&gt;x:\n                break\n            while x%p==0:\n                x = x/p\n                fact[p]=fact.get(p,0)+1\n        if x&gt;1:\n            e = x if x!=n else int(math.sqrt(n))\n            self.extend(e)\n            return self.factors(n)\n        return sorted(fact.items())\n\n\n\nmyprimes = PrimeList(25)\nprint \"cached primes:\"+str(myprimes.primes)\nprint \"100 == \"+str(myprimes.factors(100))\nprint \"32768 == \"+str(myprimes.factors(32768))\nprint \"23! == \"+str(myprimes.factors(math.factorial(23)))\nprint \"cached primes: \"+str(myprimes.primes)\nprint \"10001 == \"+str(myprimes.factors(10001))\nprint \"cached primes:\"+str(myprimes.primes)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>cached primes:[2, 3, 5, 7, 11, 13, 15, 17, 19, 23, 29]\n100 == [(2, 2), (5, 2)]\n32768 == [(2, 15)]\n23! == [(2, 19), (3, 9), (5, 4), (7, 3), (11, 2), (13, 1), (17, 1), (19, 1), (23, 1)]\ncached primes: [2, 3, 5, 7, 11, 13, 15, 17, 19, 23, 29]\n10001 == [(73, 1), (137, 1)]\ncached primes:[2, 3, 5, 7, 11, 13, 15, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137]\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5195850, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153208594912762/picture?type=large", "display_name": "George Lewis", "link": "https://stackoverflow.com/users/5195850/george-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3665, "favorite_count": 1, "accepted_answer_id": 31844320, "answer_count": 3, "score": 2, "last_activity_date": 1438818419, "creation_date": 1438813528, "last_edit_date": 1438813869, "question_id": 31843844, "link": "https://stackoverflow.com/questions/31843844/how-to-calculate-the-exponents-of-prime-factors-for-a-given-number", "title": "How to calculate the exponents of prime factors for a given number?", "body": "<p>I just completed the 3rd project Euler question which asks you to find the largest prime factor of a given number. I made a function which returns a list of all the prime factors for a number.</p>\n\n<p>For example, if you input 100 it would return [2.0, 5.0]</p>\n\n<p>I want to try and now make a program which returns a list with the prime factors appearing the same number of times as their exponent.</p>\n\n<p>So for example, inputting 100 would instead return [2.0, 2.0, 5.0, 5.0] (because 100 is 2^2 * 5*2).</p>\n\n<p>I have written a function which does this correctly if a list containing the prime factors and a list containing the exponents are put in. The problem is that the function I have used to get the list of exponents is wrong.</p>\n\n<p>The code I have written fails for certain numbers (18, 36, 50, 54...).</p>\n\n<p>I am fairly new to programming so if anybody could help me out I would really appreciate it.</p>\n\n<pre><code>def p_fctr_exp(n):\n    \"\"\"Prime factorises n and gives the exponents of each factor\"\"\"\n    l1 = prime_factors(n) #Initialisation of variables and lists ('prime_factors() ) is just the function I made which gives a list of the prime factors\n    p = 1\n    exp=[]\n    result=[]\n    for x in l1:    #This multiplies the prime factors together just once\n        x = float(x)\n        p = (p * x)\n    for x in range(0,len(l1)):  \n        \"\"\"Loop which cycles through factors from smallest first and multiplies \n    the total by the factor until the point where one more would make it bigger\n    than the target number. The number of cycles required is stored in the \n    list 'exp'\"\"\" \n        a=1\n        while p&lt;n:\n            p = p*float(l1[x])\n            a+=1\n        if p == n:\n            exp.append(a)\n        elif x &lt; len(l1)-1:\n            exp.append(a-1)\n    return exp\n</code></pre>\n\n<p>I think the problem occurs in the while loop since it works by multiplying the product p by the lowest prime factor until that becomes too big and then moving up to the next prime factor. The problem is if say the correct exponent should be 2, but increasing it to 3 doesn't make the product bigger than the target number.</p>\n\n<p>I have a feeling this is probably just completely the wrong way of solving the problem but I'm stuck on what to change.</p>\n"}, {"tags": ["python", "nltk"], "answers": [{"comments": [{"owner": {"reputation": 57635, "user_id": 92153, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ea496ad1627458ccfad06c94842b7624?s=128&d=identicon&r=PG", "display_name": "Houman", "link": "https://stackoverflow.com/users/92153/houman"}, "edited": false, "score": 0, "creation_date": 1438848580, "post_id": 31845208, "comment_id": 51620702, "body": "Thank you so much for the great answer.  So Corpus is not just a sample file, it is actually needed to process the tagging? Looking at the nltk folder, even after deleting all zip files, the <code>corpus</code> folder alone is 1.4 gb. Is that all needed? Or could I just keep <code>brown</code> for best results? How about <code>models</code> folder? Is that needed too? 120mb"}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 57635, "user_id": 92153, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ea496ad1627458ccfad06c94842b7624?s=128&d=identicon&r=PG", "display_name": "Houman", "link": "https://stackoverflow.com/users/92153/houman"}, "edited": false, "score": 0, "creation_date": 1438849028, "post_id": 31845208, "comment_id": 51620977, "body": "Depends on the task, if you only need the brown corpus, you could do <code>import nltk; nltk.download(&#39;brown&#39;)</code>. The other files in the <code>nltk_data</code> folder are used for other functions. But most probability, you&#39;ll need <code>punkt</code> for the <code>nltk.sent_tokenize</code> and also <code>maxent_treebank_pos_tagger</code> for <code>nltk.pos_tag</code> and possibly someday you&#39;ll need <code>universal_tagset</code> and <code>snowball_data</code>."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 57635, "user_id": 92153, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ea496ad1627458ccfad06c94842b7624?s=128&d=identicon&r=PG", "display_name": "Houman", "link": "https://stackoverflow.com/users/92153/houman"}, "edited": false, "score": 0, "creation_date": 1438849096, "post_id": 31845208, "comment_id": 51621025, "body": "But if you like the idea of &quot;batteries included&quot;, then just download all the models. As for corpus, it&#39;s also very useful if you&#39;re interested in using them as training data. I usually do <code>nltk.download(&#39;all&#39;)</code> so that I can get everything =)"}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 57635, "user_id": 92153, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ea496ad1627458ccfad06c94842b7624?s=128&d=identicon&r=PG", "display_name": "Houman", "link": "https://stackoverflow.com/users/92153/houman"}, "edited": false, "score": 0, "creation_date": 1438849164, "post_id": 31845208, "comment_id": 51621081, "body": "Corpora (plural for corpus) in NLTK are already pre-process and zipped. NLTK provide the API to read them easily."}, {"owner": {"reputation": 57635, "user_id": 92153, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ea496ad1627458ccfad06c94842b7624?s=128&d=identicon&r=PG", "display_name": "Houman", "link": "https://stackoverflow.com/users/92153/houman"}, "edited": false, "score": 0, "creation_date": 1438851880, "post_id": 31845208, "comment_id": 51622831, "body": "Amazing, thanks for the info.  As I&#39;m using the code on GoogleAppEngine, Hence there are some limitations and I need to prepare all Libs and data upfront I wish to upload.  So when you say they are zipped and NLTK can read them, how about performance?"}], "tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": true, "score": 1, "last_activity_date": 1438823548, "last_edit_date": 1495541176, "creation_date": 1438823139, "answer_id": 31845208, "question_id": 31843830, "link": "https://stackoverflow.com/questions/31843830/how-to-tag-an-article-with-nltk/31845208#31845208", "title": "How to tag an article with NLTK?", "body": "<p><strong>In short</strong>:</p>\n\n<p>To tag a text, use <code>nltk.pos_tag</code> but do note its quirks (<a href=\"https://stackoverflow.com/questions/30821188/python-nltk-pos-tag-not-returning-the-correct-part-of-speech-tag\">Python NLTK pos_tag not returning the correct part-of-speech tag</a>):</p>\n\n<pre><code>&gt;&gt;&gt; from nltk import sent_tokenize, word_tokenize, pos_tag\n&gt;&gt;&gt; text = \"This is a foo bar piece of text. And there are many sentences in this text.\"\n&gt;&gt;&gt; tagged_text = [pos_tag(word_tokenize(sent)) for sent in sent_tokenize(text)]\n&gt;&gt;&gt; tagged_text\n[[('This', 'DT'), ('is', 'VBZ'), ('a', 'DT'), ('foo', 'NN'), ('bar', 'NN'), ('piece', 'NN'), ('of', 'IN'), ('text', 'NN'), ('.', '.')], [('And', 'CC'), ('there', 'EX'), ('are', 'VBP'), ('many', 'JJ'), ('sentences', 'NNS'), ('in', 'IN'), ('this', 'DT'), ('text', 'NN'), ('.', '.')]]\n</code></pre>\n\n<hr>\n\n<p><strong>In long</strong>:</p>\n\n<p>A list of NLTK datasets can be found by:</p>\n\n<pre><code>&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; nltk.download()\n</code></pre>\n\n<p>And <code>nltk.corpus.brown</code> corpus is one of the most commonly used corpus for Natural Language Processing or text processing (see <a href=\"https://stackoverflow.com/questions/31526644/what-is-the-difference-between-corpus-and-lexicon-in-nltk-python/31526744#31526744\">What is the difference between corpus and lexicon in NLTK (python)</a> for jargons).</p>\n\n<p>In the case of brown corpus, it is a fully tagged and tokenized corpus so all NLTK provided was a reader. To access the various annotations, see <strong>section 1.3</strong> at <a href=\"http://www.nltk.org/howto/corpus.html\" rel=\"nofollow noreferrer\">http://www.nltk.org/howto/corpus.html</a>, here's a few examples:</p>\n\n<pre><code>&gt;&gt;&gt; from nltk.corpus import brown\n&gt;&gt;&gt; brown.words()[:50]\n[u'The', u'Fulton', u'County', u'Grand', u'Jury', u'said', u'Friday', u'an', u'investigation', u'of', u\"Atlanta's\", u'recent', u'primary', u'election', u'produced', u'``', u'no', u'evidence', u\"''\", u'that', u'any', u'irregularities', u'took', u'place', u'.', u'The', u'jury', u'further', u'said', u'in', u'term-end', u'presentments', u'that', u'the', u'City', u'Executive', u'Committee', u',', u'which', u'had', u'over-all', u'charge', u'of', u'the', u'election', u',', u'``', u'deserves', u'the', u'praise']\n&gt;&gt;&gt; brown.tagged_words()[:50]\n[(u'The', u'AT'), (u'Fulton', u'NP-TL'), (u'County', u'NN-TL'), (u'Grand', u'JJ-TL'), (u'Jury', u'NN-TL'), (u'said', u'VBD'), (u'Friday', u'NR'), (u'an', u'AT'), (u'investigation', u'NN'), (u'of', u'IN'), (u\"Atlanta's\", u'NP$'), (u'recent', u'JJ'), (u'primary', u'NN'), (u'election', u'NN'), (u'produced', u'VBD'), (u'``', u'``'), (u'no', u'AT'), (u'evidence', u'NN'), (u\"''\", u\"''\"), (u'that', u'CS'), (u'any', u'DTI'), (u'irregularities', u'NNS'), (u'took', u'VBD'), (u'place', u'NN'), (u'.', u'.'), (u'The', u'AT'), (u'jury', u'NN'), (u'further', u'RBR'), (u'said', u'VBD'), (u'in', u'IN'), (u'term-end', u'NN'), (u'presentments', u'NNS'), (u'that', u'CS'), (u'the', u'AT'), (u'City', u'NN-TL'), (u'Executive', u'JJ-TL'), (u'Committee', u'NN-TL'), (u',', u','), (u'which', u'WDT'), (u'had', u'HVD'), (u'over-all', u'JJ'), (u'charge', u'NN'), (u'of', u'IN'), (u'the', u'AT'), (u'election', u'NN'), (u',', u','), (u'``', u'``'), (u'deserves', u'VBZ'), (u'the', u'AT'), (u'praise', u'NN')]\n&gt;&gt;&gt; brown.sents()\n[[u'The', u'Fulton', u'County', u'Grand', u'Jury', u'said', u'Friday', u'an', u'investigation', u'of', u\"Atlanta's\", u'recent', u'primary', u'election', u'produced', u'``', u'no', u'evidence', u\"''\", u'that', u'any', u'irregularities', u'took', u'place', u'.'], [u'The', u'jury', u'further', u'said', u'in', u'term-end', u'presentments', u'that', u'the', u'City', u'Executive', u'Committee', u',', u'which', u'had', u'over-all', u'charge', u'of', u'the', u'election', u',', u'``', u'deserves', u'the', u'praise', u'and', u'thanks', u'of', u'the', u'City', u'of', u'Atlanta', u\"''\", u'for', u'the', u'manner', u'in', u'which', u'the', u'election', u'was', u'conducted', u'.'], ...]\n&gt;&gt;&gt; brown.sents()[:3]\n[[u'The', u'Fulton', u'County', u'Grand', u'Jury', u'said', u'Friday', u'an', u'investigation', u'of', u\"Atlanta's\", u'recent', u'primary', u'election', u'produced', u'``', u'no', u'evidence', u\"''\", u'that', u'any', u'irregularities', u'took', u'place', u'.'], [u'The', u'jury', u'further', u'said', u'in', u'term-end', u'presentments', u'that', u'the', u'City', u'Executive', u'Committee', u',', u'which', u'had', u'over-all', u'charge', u'of', u'the', u'election', u',', u'``', u'deserves', u'the', u'praise', u'and', u'thanks', u'of', u'the', u'City', u'of', u'Atlanta', u\"''\", u'for', u'the', u'manner', u'in', u'which', u'the', u'election', u'was', u'conducted', u'.'], [u'The', u'September-October', u'term', u'jury', u'had', u'been', u'charged', u'by', u'Fulton', u'Superior', u'Court', u'Judge', u'Durwood', u'Pye', u'to', u'investigate', u'reports', u'of', u'possible', u'``', u'irregularities', u\"''\", u'in', u'the', u'hard-fought', u'primary', u'which', u'was', u'won', u'by', u'Mayor-nominate', u'Ivan', u'Allen', u'Jr.', u'.']]\n&gt;&gt;&gt; brown.tagged_sents()[:3]\n[[(u'The', u'AT'), (u'Fulton', u'NP-TL'), (u'County', u'NN-TL'), (u'Grand', u'JJ-TL'), (u'Jury', u'NN-TL'), (u'said', u'VBD'), (u'Friday', u'NR'), (u'an', u'AT'), (u'investigation', u'NN'), (u'of', u'IN'), (u\"Atlanta's\", u'NP$'), (u'recent', u'JJ'), (u'primary', u'NN'), (u'election', u'NN'), (u'produced', u'VBD'), (u'``', u'``'), (u'no', u'AT'), (u'evidence', u'NN'), (u\"''\", u\"''\"), (u'that', u'CS'), (u'any', u'DTI'), (u'irregularities', u'NNS'), (u'took', u'VBD'), (u'place', u'NN'), (u'.', u'.')], [(u'The', u'AT'), (u'jury', u'NN'), (u'further', u'RBR'), (u'said', u'VBD'), (u'in', u'IN'), (u'term-end', u'NN'), (u'presentments', u'NNS'), (u'that', u'CS'), (u'the', u'AT'), (u'City', u'NN-TL'), (u'Executive', u'JJ-TL'), (u'Committee', u'NN-TL'), (u',', u','), (u'which', u'WDT'), (u'had', u'HVD'), (u'over-all', u'JJ'), (u'charge', u'NN'), (u'of', u'IN'), (u'the', u'AT'), (u'election', u'NN'), (u',', u','), (u'``', u'``'), (u'deserves', u'VBZ'), (u'the', u'AT'), (u'praise', u'NN'), (u'and', u'CC'), (u'thanks', u'NNS'), (u'of', u'IN'), (u'the', u'AT'), (u'City', u'NN-TL'), (u'of', u'IN-TL'), (u'Atlanta', u'NP-TL'), (u\"''\", u\"''\"), (u'for', u'IN'), (u'the', u'AT'), (u'manner', u'NN'), (u'in', u'IN'), (u'which', u'WDT'), (u'the', u'AT'), (u'election', u'NN'), (u'was', u'BEDZ'), (u'conducted', u'VBN'), (u'.', u'.')], [(u'The', u'AT'), (u'September-October', u'NP'), (u'term', u'NN'), (u'jury', u'NN'), (u'had', u'HVD'), (u'been', u'BEN'), (u'charged', u'VBN'), (u'by', u'IN'), (u'Fulton', u'NP-TL'), (u'Superior', u'JJ-TL'), (u'Court', u'NN-TL'), (u'Judge', u'NN-TL'), (u'Durwood', u'NP'), (u'Pye', u'NP'), (u'to', u'TO'), (u'investigate', u'VB'), (u'reports', u'NNS'), (u'of', u'IN'), (u'possible', u'JJ'), (u'``', u'``'), (u'irregularities', u'NNS'), (u\"''\", u\"''\"), (u'in', u'IN'), (u'the', u'AT'), (u'hard-fought', u'JJ'), (u'primary', u'NN'), (u'which', u'WDT'), (u'was', u'BEDZ'), (u'won', u'VBN'), (u'by', u'IN'), (u'Mayor-nominate', u'NN-TL'), (u'Ivan', u'NP'), (u'Allen', u'NP'), (u'Jr.', u'NP'), (u'.', u'.')]]\n</code></pre>\n\n<p>The structure for:</p>\n\n<ul>\n<li><code>nltk.corpus.brown.words()</code> is a list of string, where each item in the list is a word</li>\n<li><code>nltk.corpus.brown.tagged_words()</code> is a list of tuples with the first element as the word and the 2nd element in the tuple as the tag</li>\n<li><code>nltk.corpus.sents()</code> is a list of a list of string, where the other list comprises the whole corpus and the inner list is one sentence</li>\n<li><code>nltk.corpus.tagged_sents()</code> is a list of list of tuples, where it's the same as <code>nltk.corpus.sents()</code> but the inner list is a tuple of word and tag. </li>\n</ul>\n"}], "owner": {"reputation": 57635, "user_id": 92153, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ea496ad1627458ccfad06c94842b7624?s=128&d=identicon&r=PG", "display_name": "Houman", "link": "https://stackoverflow.com/users/92153/houman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 31845208, "answer_count": 1, "score": 1, "last_activity_date": 1438823548, "creation_date": 1438813453, "last_edit_date": 1438813917, "question_id": 31843830, "link": "https://stackoverflow.com/questions/31843830/how-to-tag-an-article-with-nltk", "title": "How to tag an article with NLTK?", "body": "<p>I'm trying to understand how to tag an article via the NLTK. According to <a href=\"http://www.nltk.org/book/ch05.html\" rel=\"nofollow\">bullet point 2.7</a> explains how \nto find the most frequent nouns. </p>\n\n<pre><code>def findtags(tag_prefix, tagged_text):\n    cfd = nltk.ConditionalFreqDist((tag, word) for (word, tag) in tagged_text\n                                  if tag.startswith(tag_prefix))\n    return dict((tag, cfd[tag].most_common(5)) for tag in cfd.conditions())\n\n\n&gt;&gt;&gt; tagdict = findtags('NN', nltk.corpus.brown.tagged_words(categories='news'))\n&gt;&gt;&gt; for tag in sorted(tagdict):\n...     print(tag, tagdict[tag])\n</code></pre>\n\n<p>But this is really confusing as I don't see how a piece of text is being injected in to find the tags for it.  Rather it is using a predefined structure of data (nltk.corpus.brown.tagged_words). Not sure how to proceed here.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 11, "user_id": 5195809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0fdbb30aef93663ae88ee156d3d69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Peng", "link": "https://stackoverflow.com/users/5195809/joshua-peng"}, "edited": false, "score": 0, "creation_date": 1438815620, "post_id": 31843800, "comment_id": 51609862, "body": "Thanks Will, however I need to look at the second column and count the number of email addresses in the &quot;toaddress&quot; column."}, {"owner": {"reputation": 6473, "user_id": 907927, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LuqIB.jpg?s=128&g=1", "display_name": "kasper Taeymans", "link": "https://stackoverflow.com/users/907927/kasper-taeymans"}, "edited": false, "score": 0, "creation_date": 1438851738, "post_id": 31843800, "comment_id": 51622733, "body": "hi, I completed my answer."}], "answers": [{"tags": [], "owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "is_accepted": false, "score": 0, "last_activity_date": 1438813658, "creation_date": 1438813658, "answer_id": 31843873, "question_id": 31843800, "link": "https://stackoverflow.com/questions/31843800/creating-lists-from-csv-files-with-rows-with-different-amounts-of-entries/31843873#31843873", "title": "Creating lists from csv files with rows with different amounts of entries", "body": "<pre><code>for row in c:   \n    for item in row[1]:\n        fromaddress.append(row[0]);\n</code></pre>\n\n<p><code>for item in row[1]</code> is going to only look at the second element in each row.  If you want to loop over each row, then assign column elements to variables, you want this:</p>\n\n<pre><code>for row in c:   \n    fromaddress.append(row[0]);\n    toaddress.append(row[1]);\n    # etc...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16, "user_id": 5195906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7413d3867fdcb31c65c7457b0d9aa6e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia Primavera", "link": "https://stackoverflow.com/users/5195906/mattia-primavera"}, "edited": false, "score": 0, "creation_date": 1438817897, "post_id": 31844517, "comment_id": 51610528, "body": "I said &quot;should&quot; but i tested it, it does works, you just need to change &quot;file.txt&quot; parameter with the filepath of the file you need to work on"}], "tags": [], "owner": {"reputation": 16, "user_id": 5195906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7413d3867fdcb31c65c7457b0d9aa6e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia Primavera", "link": "https://stackoverflow.com/users/5195906/mattia-primavera"}, "is_accepted": false, "score": 0, "last_activity_date": 1438817789, "creation_date": 1438817789, "answer_id": 31844517, "question_id": 31843800, "link": "https://stackoverflow.com/questions/31843800/creating-lists-from-csv-files-with-rows-with-different-amounts-of-entries/31844517#31844517", "title": "Creating lists from csv files with rows with different amounts of entries", "body": "<p>This should solve your problem:</p>\n\n<pre><code>f = open(\"file.txt\", \"r\")\noutput = open(\"output.txt\", \"w\")\n\nfor line in f.readlines()[1:]: # splitting file into lines, excluding the first one\n    fields = line.split(\", \") # splitting line into separate fields\n\n    for mail in fields[1:len(fields)-1]: # iterating on recepients (excluding first and last element from \"fields\" list)\n        output.write(fields[0] + \" \" + mail + \"\\n\")\n\nf.close()\noutput.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6473, "user_id": 907927, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LuqIB.jpg?s=128&g=1", "display_name": "kasper Taeymans", "link": "https://stackoverflow.com/users/907927/kasper-taeymans"}, "is_accepted": false, "score": 0, "last_activity_date": 1438852534, "last_edit_date": 1438852534, "creation_date": 1438818391, "answer_id": 31844608, "question_id": 31843800, "link": "https://stackoverflow.com/questions/31843800/creating-lists-from-csv-files-with-rows-with-different-amounts-of-entries/31844608#31844608", "title": "Creating lists from csv files with rows with different amounts of entries", "body": "<p>When the first email address is always the sender address and the last item in a row is always an useless value (date), you could do the following. </p>\n\n<p>test.txt input file</p>\n\n<pre><code>sender1@email.com, recipient1@email.com, recipient2@email.com, 8-1-2015\nsender2@email.com, recipient1@email.com, 8-2-2015\nsender3@email.com, recipient1@email.com, recipient2@email.com, recipient3@email.com, recipient4@email.com, 8-3-2015\nsender1@email.com, recipient1@email.com, recipient2@email.com, recipient3@email.com, 8-4-2015\n</code></pre>\n\n<p>python code</p>\n\n<pre><code>import csv\n\nstorage = [] #here we store our sender-receiver pairs\n\nwith open('test.txt','rb') as f: #open the input text file\n    for row in csv.reader(f, delimiter=','): #loop through every line of the input file\n        storage.extend([(row[0].replace('@','_'),x.replace('@','_')) for x in row[1:-1]]) #add a sender-receiver pair to the storage list\n\n#here we loop through the storage list and write line by line to  the `new.text` file.\nfor pair in storage:\n    with open(\"new.txt\", \"a\") as f:\n        f.write(pair[0] + pair[1] + ' \\n\\n') #double new line!\n</code></pre>\n\n<p>output in new.txt</p>\n\n<pre><code>sender1_email.com recipient1_email.com \n\nsender1_email.com recipient2_email.com \n\nsender2_email.com recipient1_email.com \n\nsender3_email.com recipient1_email.com \n\nsender3_email.com recipient2_email.com \n\nsender3_email.com recipient3_email.com \n\nsender3_email.com recipient4_email.com \n\nsender1_email.com recipient1_email.com \n\nsender1_email.com recipient2_email.com \n\nsender1_email.com recipient3_email.com \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5195809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0fdbb30aef93663ae88ee156d3d69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Peng", "link": "https://stackoverflow.com/users/5195809/joshua-peng"}, "edited": false, "score": 0, "creation_date": 1438831224, "post_id": 31844974, "comment_id": 51613693, "body": "Thanks martineau, I tried your code but unfortunately I&#39;m not getting the output I need."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 11, "user_id": 5195809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0fdbb30aef93663ae88ee156d3d69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Peng", "link": "https://stackoverflow.com/users/5195809/joshua-peng"}, "edited": false, "score": 0, "creation_date": 1438839932, "post_id": 31844974, "comment_id": 51616113, "body": "My code produces exactly the output you said you wanted, not what you claim you&#39;re getting, when run with your input file. I suggest you try it again."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1438821271, "creation_date": 1438821271, "answer_id": 31844974, "question_id": 31843800, "link": "https://stackoverflow.com/questions/31843800/creating-lists-from-csv-files-with-rows-with-different-amounts-of-entries/31844974#31844974", "title": "Creating lists from csv files with rows with different amounts of entries", "body": "<p>You don't need to create separate lists to do what you want, plus you can use the <code>csv</code> module for both reading the input csv file <em>and</em> writing the txt output file:</p>\n\n<pre><code>import csv\n\nwith open('mail.csv','rb') as inf, open('mail.txt', 'wb') as outf:\n    reader = csv.reader(inf)\n    next(reader)  # skip header row\n    writer = csv.writer(outf)\n    for row in reader:\n        row = row[:-1]  # remove trailing date\n        sender = row[0].replace('@', '_')\n        writer.writerows(([sender, recipient.replace('@', '_')]\n                            for recipient in row[1:]))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5195809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0fdbb30aef93663ae88ee156d3d69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Peng", "link": "https://stackoverflow.com/users/5195809/joshua-peng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1440489288, "creation_date": 1438813281, "last_edit_date": 1438831855, "question_id": 31843800, "link": "https://stackoverflow.com/questions/31843800/creating-lists-from-csv-files-with-rows-with-different-amounts-of-entries", "title": "Creating lists from csv files with rows with different amounts of entries", "body": "<p>I have data in a csv file which looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>fromaddress, toaddress, timestamp\nsender1@email.com, recipient1@email.com, recipient2@email.com, 8-1-2015\nsender2@email.com, recipient1@email.com, 8-2-2015\nsender3@email.com, recipient1@email.com, recipient2@email.com, recipient3@email.com, recipient4@email.com, 8-3-2015\nsender1@email.com, recipient1@email.com, recipient2@email.com, recipient3@email.com, 8-4-2015\n</code></pre>\n\n<p>Using Python, I would like to produce a txt file that looks like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sender1_email.com, recipient1_email.com\nsender1_email.com, recipient2_email.com\nsender2_email.com, recipient1_email.com\nsender3_email.com, recipient1_email.com\nsender3_email.com, recipient2_email.com\nsender3_email.com, recipient3_email.com\nsender3_email.com, recipient4_email.com\nsender1_email.com, recipient1_email.com\nsender1_email.com, recipient2_email.com\nsender1_email.com, recipient3_email.com\n</code></pre>\n\n<p>Ultimately, I imagine this whole process will take several steps. After reading in the csv file, I will need to create separate lists for fromaddress and toaddress (I am ignoring the timestamp column altogether). There is only 1 email address per row in the fromaddress column, however there are any number of email addresses per row in the toaddress column. I need to duplicate the fromaddress email address for each toaddress email address listed for each row. Once this done I need to replace all of the @ symbols with underscore (_) symbols. Finally, when I write the txt file, I need to add an extra space between each row so that it is \"double-spaced\"</p>\n\n<p>I have not gotten very far as I'm a Python newbie and I'm stuck on the first step. The following code is duplicating the fromaddress for each individual character in the toaddress column instead of each individual email address. I also need help with the toaddress list as well. Can anyone help?</p>\n\n<pre><code>import csv\nfromaddress = []\ntoaddress = []\n\nwith open(\"filename.csv\", 'r') as f:\n    c = csv.reader(f, delimiter = \",\")\n    for row in c:\n        for item in row[1]:\n            fromaddress.append(row[0]);\n\nprint(fromaddress)\n</code></pre>\n\n<p>Everyone, thanks for all of your help! I tried all your code but unfortunately I'm not getting the output I need. Instead of getting this (what I want):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>sender1_email.com, recipient1_email.com\r\nsender1_email.com, recipient2_email.com\r\nsender1_email.com, recipient3_email.com\r\nsender2_email.com, recipient1_email.com\r\nsender3_email.com, recipient1_email.com\r\nsender3_email.com, recipient2_email.com</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm getting this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>sender1_email.com,\"recipient1_email.com, recipient2_email.com, recipient3_email.com\"\r\nsender2_email.com,\"recipient1_email.com\"\r\nsender3_email.com,\"recipient1_email.com, recipient2_email.com\"</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>There is only 1 element in each \"fromaddress\" row, but there are multiple elements in each \"toaddress\" row.  Basically, I have to pair each recipient address with the correct sender address. I think I'm not getting the right output because of the ( \" ) double quotation marks in the csv file to surround all of the sender addresses in each row. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 1557300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/364909a4764a19fee4a7b694d3eb9e08?s=128&d=identicon&r=PG", "display_name": "Eugene Redekop", "link": "https://stackoverflow.com/users/1557300/eugene-redekop"}, "edited": false, "score": 0, "creation_date": 1438875041, "post_id": 31844894, "comment_id": 51639267, "body": "Thanks! I suppose the latter solution will work, since I want to keep the top level. But it seems inelegant because the top level label have to be mentioned explicitly as an argument to set_levels."}, {"owner": {"reputation": 81, "user_id": 1557300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/364909a4764a19fee4a7b694d3eb9e08?s=128&d=identicon&r=PG", "display_name": "Eugene Redekop", "link": "https://stackoverflow.com/users/1557300/eugene-redekop"}, "edited": false, "score": 0, "creation_date": 1438897876, "post_id": 31844894, "comment_id": 51652037, "body": "So, this latter solution works if I subset based on the second level. What about subsetting on the first level?"}, {"owner": {"reputation": 81, "user_id": 1557300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/364909a4764a19fee4a7b694d3eb9e08?s=128&d=identicon&r=PG", "display_name": "Eugene Redekop", "link": "https://stackoverflow.com/users/1557300/eugene-redekop"}, "edited": false, "score": 0, "creation_date": 1438899108, "post_id": 31844894, "comment_id": 51652471, "body": "I ended up creating the new index explicitly and then assigning it to the subset. There must be more natural solution to this problem!"}], "tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": false, "score": 2, "last_activity_date": 1438821180, "last_edit_date": 1438821180, "creation_date": 1438820615, "answer_id": 31844894, "question_id": 31843705, "link": "https://stackoverflow.com/questions/31843705/subset-slice-of-pandas-dataframe-has-the-same-index-as-the-original-dataframe/31844894#31844894", "title": "subset (slice) of pandas.DataFrame has the same index as the original DataFrame", "body": "<p>If you don't care about the top level of your index in your subset, you can set </p>\n\n<pre><code>p.index = p.index.droplevel()\np.index\nInt64Index([1, 2, 3], dtype='int64')\n</code></pre>\n\n<p>Alternatively if you want to keep the multi-index and just reset the levels you can call <code>set_levels</code>:</p>\n\n<pre><code>p.index = p.index.set_levels(p.index.droplevel(),1)\np.index\nMultiIndex(levels=[['A'], [1, 2, 3]],\n       labels=[[0, 0, 0], [0, 1, 2]])\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 1557300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/364909a4764a19fee4a7b694d3eb9e08?s=128&d=identicon&r=PG", "display_name": "Eugene Redekop", "link": "https://stackoverflow.com/users/1557300/eugene-redekop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1438821180, "creation_date": 1438812598, "question_id": 31843705, "link": "https://stackoverflow.com/questions/31843705/subset-slice-of-pandas-dataframe-has-the-same-index-as-the-original-dataframe", "title": "subset (slice) of pandas.DataFrame has the same index as the original DataFrame", "body": "<p>Suppose, I have a DataFrame with MultiIndex like this:</p>\n\n<pre><code>In [1]:d=pnd.DataFrame(range(5),index=pnd.MultiIndex.from_tuples([('A',1),('A',2),('A',3),('A',4),('A',5)]))\n\nIn [2]: d\nOut[2]: \n     0\nA 1  0\n  2  1\n  3  2\n  4  3\n  5  4\n</code></pre>\n\n<p>I can create another DataFrame by subsetting:  </p>\n\n<pre><code>In [3]: p=d.loc[('A',slice(1,3)),:].copy()\n\nIn [4]: p\nOut[4]: \n     0\nA 1  0\n  2  1\n  3  2\n</code></pre>\n\n<p>but the index object of this new DataFrame is the same as from the original DataFrame (contains all original items in the 'levels').</p>\n\n<pre><code>In [5]: p.index\nOut[5]: \nMultiIndex(levels=[[u'A'], [1, 2, 3, 4, 5]],\n           labels=[[0, 0, 0], [0, 1, 2]])\n</code></pre>\n\n<p>How do I copy-out a subset which does not 'remember' the index object of the original DataFrame? </p>\n\n<p>The reason I need to this is because some of my functions access the index object to get metadata, and the fact that the index carries over form the original DataFrame confuses these functions. </p>\n"}, {"tags": ["python", "join", "argument-passing", "apache-spark-sql", "pyspark"], "comments": [{"owner": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 2, "creation_date": 1438812641, "post_id": 31843669, "comment_id": 51608826, "body": "Can you try <code>x.join(y, getattr(x, &#39;column1&#39;) == getattr(y, &#39;column2&#39;))</code>?"}, {"owner": {"reputation": 1643, "user_id": 3597974, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/33cebecba4301daa1b4c8bd0b4d7e749?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/3597974/michal"}, "reply_to_user": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 1, "creation_date": 1438812902, "post_id": 31843669, "comment_id": 51608926, "body": "@hgwells When I do this, I get the actual column: <code>type(getattr(x, &#39;column1&#39;)) &lt;class &#39;pyspark.sql.column.Column&#39;&gt;</code>"}, {"owner": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 1, "creation_date": 1438812980, "post_id": 31843669, "comment_id": 51608958, "body": "whats the type of <code>x.column1</code> if you do it as in your example? My guess is that, that is also of type <code>&lt;class &#39;pyspark.sql.column.Column&#39;&gt;</code>"}, {"owner": {"reputation": 1643, "user_id": 3597974, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/33cebecba4301daa1b4c8bd0b4d7e749?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/3597974/michal"}, "reply_to_user": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 1, "creation_date": 1438813067, "post_id": 31843669, "comment_id": 51608998, "body": "@hgwells its also a column type :\\ sorry for doubting"}, {"owner": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 1, "creation_date": 1438823513, "post_id": 31843669, "comment_id": 51611836, "body": "Did you get that to work?"}], "answers": [{"tags": [], "owner": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "is_accepted": true, "score": 0, "last_activity_date": 1438881671, "creation_date": 1438881671, "answer_id": 31862007, "question_id": 31843669, "link": "https://stackoverflow.com/questions/31843669/how-to-pass-an-argument-to-a-function-that-doesnt-take-string-pyspark/31862007#31862007", "title": "How to pass an argument to a function that doesn&#39;t take string (Pyspark)", "body": "<p>Re posting my comment as an answer for future reference. You can get any attribute of a class or module using the <code>gettatr</code> function.</p>\n\n<pre><code>x.join(y, getattr(x, 'column1') == getattr(y, 'column2'))\n</code></pre>\n"}], "owner": {"reputation": 1643, "user_id": 3597974, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/33cebecba4301daa1b4c8bd0b4d7e749?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/3597974/michal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1240, "favorite_count": 0, "accepted_answer_id": 31862007, "answer_count": 1, "score": 1, "last_activity_date": 1438881671, "creation_date": 1438812445, "last_edit_date": 1495540677, "question_id": 31843669, "link": "https://stackoverflow.com/questions/31843669/how-to-pass-an-argument-to-a-function-that-doesnt-take-string-pyspark", "title": "How to pass an argument to a function that doesn&#39;t take string (Pyspark)", "body": "<p>I have the join function in Spark SQL. This function needs a join condition and if the columns that we are joining on do not have the same name, they need to be passed as a join expression.</p>\n\n<p>Example:</p>\n\n<pre><code>x.join(y, x.column1 == y.column2)\n</code></pre>\n\n<p>This means that we are joining dataframes <code>x</code> and <code>y</code> on <code>column1</code> in <code>x</code> and <code>column2</code> in <code>y</code></p>\n\n<p>I would like to write a function that takes the column name for both dataframes as an argument and joins on those columns. The problem is that the join expression cannot be a string. I have looked at questions like this <a href=\"https://stackoverflow.com/questions/8028708/dynamically-set-local-variable-in-python\">one</a> where a map is used to map a variable name however this does not fit my needs. I need to remove the quotation marks that make the column name a string and pass them to the <code>join</code> function.</p>\n\n<p>I have checked and there is no other way to do this in Pyspark if the columns that we are joining on do not have the same name (besides generating a copy of one of the dataframes with new columns names. This is because dataframes are immutable and column names cannot be changed)</p>\n\n<p>Is there any other way to pass the column names into the join expression?</p>\n"}, {"tags": ["python", "r", "cumulative-sum"], "comments": [{"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 0, "creation_date": 1438812389, "post_id": 31843639, "comment_id": 51608736, "body": "Are you using any particular Python libraries (e.g. NumPy)?"}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "reply_to_user": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 0, "creation_date": 1438812449, "post_id": 31843639, "comment_id": 51608755, "body": "I am using NumPy in my program. But not sure how to do this function in NumPy"}], "answers": [{"comments": [{"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1440176547, "post_id": 31843751, "comment_id": 52180898, "body": "This code doesn&#39;t work well when the first value is around 200. It works well when it starts with 0. Is there a way we can change the code?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1440177228, "post_id": 31843751, "comment_id": 52181267, "body": "If <code>x[0] = 200</code>, the code above, <code>(np.ediff1d(x, to_begin=[0])&lt;0).cumsum()*64 + x</code> returns <code>array([ 200.,  121.,  121.,  121.,..., 156.])</code>. I believe that is the same result returned by the <code>R</code> code you posted. What do you mean by &quot;doesn&#39;t work well&quot;?"}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1440177750, "post_id": 31843751, "comment_id": 52181576, "body": "for example, (239 , 47,47, ....48...50)  My output should be 239, 286,...,289,290..."}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1440177851, "post_id": 31843751, "comment_id": 52181626, "body": "If my data starts with 0, your code is correct. But when it starts with 200 something, I want it to continue from 200 and carry on with the sum, and again when it value reaches to 0, my count should still carry on"}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1440180596, "post_id": 31843751, "comment_id": 52182939, "body": "Suppose, the values are (82,82,25,25,26,26)  the difference is (0,0,-57,0,0,1,1) and then when we change to cumsum it becomes 0,0,1,1,1,1 and then it become (0,0,64,64,64) and then it gets added to the current value.  When the values are (239,47,47,48,48),  difference is 0,-192,0,0,1,1  then too values become 0,1,1,1, and then become 0,64,64  I want it to become ( 0,3,3,3,3,3) and then become 0, 192,192.. then get added to the current value and after that when the normal values come, it should manage by 0,1,1... can you give me an idea how to do that?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "edited": false, "score": 0, "creation_date": 1440181229, "post_id": 31843751, "comment_id": 52183283, "body": "haimen, this is not the same problem as what you first posted. I&#39;m still confused what the complete set of rules are that govern this new computation. <b>Please start a new question</b> which spells out everything completely and unambiguously. If you can implement it in R that would be very helpful."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 0, "last_activity_date": 1440176936, "last_edit_date": 1440176936, "creation_date": 1438812951, "answer_id": 31843751, "question_id": 31843639, "link": "https://stackoverflow.com/questions/31843639/cumulative-sum-after-64-in-pythonconditional-cumulative-sum/31843751#31843751", "title": "Cumulative sum after 64 in Python(Conditional Cumulative sum)", "body": "<p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.ediff1d.html\" rel=\"nofollow\"><code>np.ediff1d(x, to_begin=[0]) &lt; 0</code></a> in NumPy is equivalent to <code>c(0,diff(sub$x)&lt;0)</code> in R.\nIt takes the difference between consecutive elements and pads the result with a zero on the left. The rest is pretty much a 1-to-1 correspondence:</p>\n\n<pre><code>In [125]: x\nOut[125]: \narray([ 57.,  57.,  57.,  57.,  57.,  57.,  58.,  58.,  58.,  58.,  61.,\n        61.,  62.,  62.,   1.,   1.,  11.,  16.,  16.,  16.,  16.,  16.,\n        16.,  22.,  22.,  22.,  27.,  28.])\n\nIn [126]: (np.ediff1d(x, to_begin=[0])&lt;0).cumsum()*64 + x\nOut[126]: \narray([ 57.,  57.,  57.,  57.,  57.,  57.,  58.,  58.,  58.,  58.,  61.,\n        61.,  62.,  62.,  65.,  65.,  75.,  80.,  80.,  80.,  80.,  80.,\n        80.,  86.,  86.,  86.,  91.,  92.])\n</code></pre>\n"}], "owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 31843751, "answer_count": 1, "score": 1, "last_activity_date": 1440179324, "creation_date": 1438812331, "last_edit_date": 1440179324, "question_id": 31843639, "link": "https://stackoverflow.com/questions/31843639/cumulative-sum-after-64-in-pythonconditional-cumulative-sum", "title": "Cumulative sum after 64 in Python(Conditional Cumulative sum)", "body": "<p>I am new to python. I am not sure how to do the following function in python. I am able to do this in R. But not able to do it in python. Can anybody help me in this?</p>\n\n<p>I want to get the cumulative sum of the counter value once it reaches 64,</p>\n\n<p>The following is my data,</p>\n\n<pre><code>x = [57, 57, 57, 57, 57, 57, 58, 58, 58, 58, 61, 61, 62, 62, 1, 1, 11, 16, \n     16, 16, 16, 16, 16, 22, 22, 22, 27, 28]\n</code></pre>\n\n<p>I want the cumulative sum after the count reaches 64. I am not sure how to do that in python.</p>\n\n<p>The following is the output I require,</p>\n\n<pre><code>x = [57, 57, 57, 57, 57, 57, 58, 58, 58, 58, 61, 61, 62, 62, 65, 65, 75, 80, \n     80, 80, 80, 80, 80, 86, 86, 86, 91, 92]\n</code></pre>\n\n<p>This is basically a counter, so there would be many number of resets. The\nfollowing is the R code which I used,</p>\n\n<pre><code>x1&lt;-cumsum(c(0,diff(sub$x)&lt;0))\n  sub$x&lt;-sub$x+64*x1\n</code></pre>\n\n<p>Can anybody help me with doing this in Python?</p>\n"}, {"tags": ["python", "flask", "webserver"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438812386, "post_id": 31843616, "comment_id": 51608735, "body": "The code will re-write the file, but perhaps the browser is not reloading the page?"}, {"owner": {"reputation": 17, "user_id": 5145786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb1a29d0c75536677a6d14a2b54238d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinakar Guthy", "link": "https://stackoverflow.com/users/5145786/dinakar-guthy"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438812499, "post_id": 31843616, "comment_id": 51608773, "body": "Unfortunately this is not the case. If I manually open up the file the file remains unaltered"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438812688, "post_id": 31843616, "comment_id": 51608849, "body": "The code, as posted, still rewrites the file. Something else is going on. Have you tried adding <code>app.logger</code> logging calls to trace what is happening? You could also use the <code>pdb</code> module to step through the code and see what is going on."}, {"owner": {"reputation": 17, "user_id": 5145786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb1a29d0c75536677a6d14a2b54238d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinakar Guthy", "link": "https://stackoverflow.com/users/5145786/dinakar-guthy"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438814301, "post_id": 31843616, "comment_id": 51609444, "body": "You are right. my actual code has a for loop afterwards within the function that I have not included due to its length. I will look into those things that you have mentioned. Thank you"}, {"owner": {"reputation": 560, "user_id": 6486666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2See.jpg?s=128&g=1", "display_name": "Sam Bernstein", "link": "https://stackoverflow.com/users/6486666/sam-bernstein"}, "edited": false, "score": 0, "creation_date": 1489707921, "post_id": 31843616, "comment_id": 72801818, "body": "This happened to me too. Only difference is that I can edit the file to make it work, but who is going to change the file every time there is a new request? (automation????)"}], "owner": {"reputation": 17, "user_id": 5145786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb1a29d0c75536677a6d14a2b54238d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinakar Guthy", "link": "https://stackoverflow.com/users/5145786/dinakar-guthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "closed_date": 1536122330, "answer_count": 0, "score": 0, "last_activity_date": 1438812457, "creation_date": 1438812224, "last_edit_date": 1438812457, "question_id": 31843616, "link": "https://stackoverflow.com/questions/31843616/unable-to-open-html-file-with-flask-more-than-once-per-iteration", "closed_reason": "Duplicate", "title": "Unable to open html file with flask more than once per iteration", "body": "<p>I have a flask app that presents a webpage that allows for the user to run functions by clicking buttons: </p>\n\n<pre><code>from flask import Flask, render_template, redirect, request, url_for\nfrom xml_identifiersearch import searchXML, printHTML\n\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/', methods=['POST'])\ndef gateway():\n    if request.form['submit'] == 'Identifier Search':\n            return redirect(url_for('identifier_home'))\n\n@app.route('/id/')\ndef identifier_home():\n    return render_template('id_home.html')\n\n@app.route('/id/', methods=['POST'])\ndef identifier_search():\n    printHTML(request.form['input'])\n    return redirect(url_for('index'))\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000,debug=True)\n</code></pre>\n\n<p>However, the function that is being run named \"printHTML\" involves opening a file and then writing html code to it.</p>\n\n<p>As you can see from the flask code, after the function is run the app returns to the index page. However, for some reason, after being redirected back to the index page, the function stops working properly.</p>\n\n<p>It will still open up a copy of the file being written to in another tab, but it will not actually open the file and write over it a second time. Here is a snippet of the code for the function:</p>\n\n<pre><code>def printHTML(search):    \n    f = open(\"output.html\", \"w\")           #output to a single html file\n\n    print &gt;&gt;f, '&lt;html&gt;&lt;head&gt;&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"my_style.css\"&gt;&lt;/head&gt;&lt;body&gt;&lt;table border=\"1\"&gt;'\n\n\n    print &gt;&gt;f, \"&lt;tr&gt;\"                     #print the table headers\n    print &gt;&gt;f, \"&lt;th&gt;File Name&lt;/th&gt;\"\n    print &gt;&gt;f, \"&lt;th&gt;Creation Time&lt;/th&gt;\"\n    print &gt;&gt;f, \"&lt;th&gt;Correlation ID&lt;/th&gt;\"\n    print &gt;&gt;f, \"&lt;th&gt;Reporter Location&lt;/th&gt;\"\n    print &gt;&gt;f, \"&lt;th&gt;Event Name&lt;/th&gt;\"\n    print &gt;&gt;f, \"&lt;th colspan='100'&gt;Description &lt;/th&gt;\"\n    print &gt;&gt;f, \"&lt;/tr&gt;\"\n\n    f.close()\n\n    new=2\n    url=\"file:///Users/dinakarguthy/Documents/main2/output.html\"\n    webbrowser.open(url,new=new)\n</code></pre>\n\n<p>So my problem is this:</p>\n\n<p>All the parts of the function that are within the f = open(...) and the f.close() aren't working more than once. They only work the first time and afterwards they don't work at all unless I restart my flask server. The output.html file isn't being truncated either, which should happen when the</p>\n\n<pre><code>f = open(\"output.html\", \"w\")\n</code></pre>\n\n<p>line runs. This means that line isn't running at all for some reason. However, the rest of the function, i.e the part that opens up a new tab with the output.html file, STILL FUNCTIONS. </p>\n\n<p>This means my flask app is properly calling the function, but for some reason it isn't able to open the file after the first time I do so after the webserver has started.</p>\n\n<p><strong>SUMMARY:</strong></p>\n\n<p>I have a flask app that runs a python function. The flask app seems to be running fine, and it calls the function properly. However, after the first time, the function's open() line doesn't seem to execute properly. Everything else in the function works. The only solution is to restart the instance of the flask app and reboot the webserver.</p>\n\n<p><strong>disclaimer:</strong>\nThis is my first time asking a question on stack exchange. If my formatting or etiquette or information supplied is insufficient or inappropriate please let me know and I will try to fix it.</p>\n"}, {"tags": ["python", "regex", "string-split"], "comments": [{"owner": {"reputation": 29116, "user_id": 382471, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/804ee314e1022f48ddd7d9cebe329afc?s=128&d=identicon&r=PG", "display_name": "robert", "link": "https://stackoverflow.com/users/382471/robert"}, "edited": false, "score": 0, "creation_date": 1438813031, "post_id": 31843604, "comment_id": 51608979, "body": "<code>\\s</code> is not an escape sequence for a space."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438813101, "post_id": 31843604, "comment_id": 51609016, "body": "@Krin123, you should add the python tag to your question, I cannot edit as I have hit the review limit for the day"}, {"owner": {"reputation": 7126, "user_id": 482256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0d56f15bfba9c5083050a48fabb1b0?s=128&d=identicon&r=PG", "display_name": "Kevin Nelson", "link": "https://stackoverflow.com/users/482256/kevin-nelson"}, "edited": false, "score": 0, "creation_date": 1438813180, "post_id": 31843604, "comment_id": 51609046, "body": "Your question says &quot;were tabs in python&quot;, maybe meaning that&#39;s what created the string, but not necessarily the programming language you are using to handle the string now.  If you want your answer in python, please add the python tag to your question."}, {"owner": {"reputation": 7126, "user_id": 482256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0d56f15bfba9c5083050a48fabb1b0?s=128&d=identicon&r=PG", "display_name": "Kevin Nelson", "link": "https://stackoverflow.com/users/482256/kevin-nelson"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1438813245, "post_id": 31843604, "comment_id": 51609072, "body": "@PadraicCunningham, that&#39;s two of us that think he&#39;s intending output with python, so I&#39;ll go ahead and change it."}], "answers": [{"tags": [], "owner": {"reputation": 466, "user_id": 3042939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecacf924d1ecf259953e2a8f07afec25?s=128&d=identicon&r=PG&f=1", "display_name": "jbg", "link": "https://stackoverflow.com/users/3042939/jbg"}, "is_accepted": false, "score": 0, "last_activity_date": 1438812491, "creation_date": 1438812491, "answer_id": 31843678, "question_id": 31843604, "link": "https://stackoverflow.com/questions/31843604/how-to-split-a-string-that-is-separated-by-blank-spaces-that-were-tabs-in-python/31843678#31843678", "title": "How to split a string that is separated by blank spaces that were tabs in python", "body": "<p>unless I am missing something couldn't you just find <code>\\s+</code> \nthen replace with <code>\\t</code></p>\n"}, {"tags": [], "owner": {"reputation": 7126, "user_id": 482256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0d56f15bfba9c5083050a48fabb1b0?s=128&d=identicon&r=PG", "display_name": "Kevin Nelson", "link": "https://stackoverflow.com/users/482256/kevin-nelson"}, "is_accepted": false, "score": 0, "last_activity_date": 1438813448, "last_edit_date": 1438813448, "creation_date": 1438812769, "answer_id": 31843726, "question_id": 31843604, "link": "https://stackoverflow.com/questions/31843604/how-to-split-a-string-that-is-separated-by-blank-spaces-that-were-tabs-in-python/31843726#31843726", "title": "How to split a string that is separated by blank spaces that were tabs in python", "body": "<p>You do have the problem that there are spaces in what it looks like you're intending to be a single string and not be separated (e.g. \"Bravo Charlie\").  If you don't want to split on every group of spaces, you need to ensure that there is more than one space in your regex.  However, then if that tab-ish area ever becomes a single-space, you may not split/replace when you need to...</p>\n\n<pre><code>split on /\\s{2,}/\n\nor replace: /\\s{2,}/ with \"\\t\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1438812961, "creation_date": 1438812961, "answer_id": 31843753, "question_id": 31843604, "link": "https://stackoverflow.com/questions/31843604/how-to-split-a-string-that-is-separated-by-blank-spaces-that-were-tabs-in-python/31843753#31843753", "title": "How to split a string that is separated by blank spaces that were tabs in python", "body": "<p>If you want to tab delimit each word you can split and join:</p>\n\n<pre><code>l = [\"Alpha     Bravo Charlie    Delta\",\n  \"Echo      Foxtrot Golf     Hotel\",\n  \"Inida     Juliet Kilo      Lima\"]\n\nl[:] = [\"\\t\".join(s.split()) for s in l]\n\nprint(l)\n['Alpha\\tBravo\\tCharlie\\tDelta', 'Echo\\tFoxtrot\\tGolf\\tHotel', 'Inida\\tJuliet\\tKilo\\tLima']\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 4119051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec500a484329dffe68839729bfe43772?s=128&d=identicon&r=PG&f=1", "display_name": "Krin123", "link": "https://stackoverflow.com/users/4119051/krin123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1438813448, "creation_date": 1438812182, "last_edit_date": 1438813328, "question_id": 31843604, "link": "https://stackoverflow.com/questions/31843604/how-to-split-a-string-that-is-separated-by-blank-spaces-that-were-tabs-in-python", "title": "How to split a string that is separated by blank spaces that were tabs in python", "body": "<p>I have a list of strings:</p>\n\n<pre><code> [\"Alpha     Bravo Charlie    Delta\",\n  \"Echo      Foxtrot Golf     Hotel\",\n  \"Inida     Juliet Kilo      Lima\"]\n</code></pre>\n\n<p>They look like they were separated by tabs, but if you evaluate the strings, they're separated by multiple <code>\\s</code> and not <code>\\t</code>.\nWhat can I do so that I can still separate them by tabs?</p>\n"}, {"tags": ["python", "regex", "django", "python-2.7"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1438812024, "post_id": 31843550, "comment_id": 51608602, "body": "Try adding <code>r</code> to <code>&quot;^\\s*&quot;</code>: <code>r&quot;^\\s*&quot;</code>."}, {"owner": {"reputation": 329, "user_id": 3693391, "user_type": "registered", "profile_image": "https://graph.facebook.com/643983675/picture?type=large", "display_name": "Sami Awwad", "link": "https://stackoverflow.com/users/3693391/sami-awwad"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1438813216, "post_id": 31843550, "comment_id": 51609065, "body": "@stribizhev May I ask what the r does?"}, {"owner": {"reputation": 9288, "user_id": 671943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4HS79.jpg?s=128&g=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/671943/rooster"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1438813771, "post_id": 31843550, "comment_id": 51609255, "body": "@stribizhev sorry took a quick walk to blow off steam.  so then the appropriate equivalent would be:  <code>regexString = r&quot;^\\s*&quot;+item.feature_key+&quot;:&quot;</code> ?  must not be as thats not working"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1438813857, "post_id": 31843550, "comment_id": 51609283, "body": "I found the culprit: <code>match</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9288, "user_id": 671943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4HS79.jpg?s=128&g=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/671943/rooster"}, "edited": false, "score": 0, "creation_date": 1438814180, "post_id": 31843924, "comment_id": 51609395, "body": "wow, it seems kind of pointless for that to be the way match works, considering it accepts the <code>M</code> flag.  Anyway, thanks so much, this solved my problem! ++"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1438813976, "creation_date": 1438813976, "answer_id": 31843924, "question_id": 31843550, "link": "https://stackoverflow.com/questions/31843550/python-regular-expression-not-matching-file-contents-with-re-match-and-re-multil/31843924#31843924", "title": "python regular expression not matching file contents with re.match and re.MULTILINE flag", "body": "<p>According to documentation, <a href=\"https://docs.python.org/2/library/re.html#re.match\" rel=\"nofollow\"><code>re.match</code></a> never allows searching at the beginning of a <em>line</em>:</p>\n\n<blockquote>\n  <p>Note that even in <code>MULTILINE</code> mode, <code>re.match()</code> will only match at the beginning of the string and not at the beginning of each line.</p>\n</blockquote>\n\n<p>You need to use a <code>re.search</code>:</p>\n\n<pre><code>regexString = r\"^\\s*\"+item.feature_key+\":\"\npq = re.compile(regexString, re.M)\nif pq.search(data):\n</code></pre>\n\n<p>A small note on the raw string (<code>r\"^\\s+\"</code>): in this case, it is equivalent to <code>\"\\s+\"</code> because there is no <code>\\s</code> escape sequence (like <code>\\r</code> or <code>\\n</code>), thus, Python treats it as a raw string literal. Still, it is safer to always declare regex patterns with raw string literals in Python (and with corresponding notations in other languages, too).</p>\n"}], "owner": {"reputation": 9288, "user_id": 671943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4HS79.jpg?s=128&g=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/671943/rooster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1302, "favorite_count": 0, "accepted_answer_id": 31843924, "answer_count": 1, "score": 1, "last_activity_date": 1610481576, "creation_date": 1438811904, "last_edit_date": 1610481576, "question_id": 31843550, "link": "https://stackoverflow.com/questions/31843550/python-regular-expression-not-matching-file-contents-with-re-match-and-re-multil", "title": "python regular expression not matching file contents with re.match and re.MULTILINE flag", "body": "<p>I'm reading in a file and storing its contents as a multiline string.  Then I loop through some values I get from a django query to run regexes based on the query results values.  My regex seems like it should be working, and works if I copy the values returned by the query, but for some reason isn't matching when all the parts are working together that ends like this</p>\n\n<p>My code is:</p>\n\n<pre><code>with open(\"/path_to_my_file\") as myfile:\n    data=myfile.read()\n\n#read saved settings then write/overwrite them into the config\nitems = MyModel.objects.filter(some_id=\"s100009\")\nfor item in items:\n    regexString = \"^\\s*\"+item.feature_key+\":\"\n\n    print regexString #to verify its what I want it to be, ie debug\n    pq = re.compile(regexString, re.M)\n\n    if pq.match(data):\n        #do stuff\n</code></pre>\n\n<p>So basically my problem is that the regex isn't matching.  When I copy the file contents into a big old string, and copy the value(s) printed by the <code>print regexString</code> line, it does match, so I'm thinking theres some esoteric python/django thing going on (or maybe not so esoteric as python isnt my first language).  </p>\n\n<p>And for examples sake, the output of <code>print regexString</code> is :</p>\n\n<p><code>^\\s*productDetailOn:</code></p>\n\n<p>File contents:</p>\n\n<pre><code>    productDetailOn:true,\n    allOff:false,\n    trendingWidgetOn:true,\n    trendingWallOn:true,\n    searchResultOn:false,\n    bannersOn:true,\n    homeWidgetOn:true,\n}\n</code></pre>\n\n<p>Running Python 2.7.  Also, dumped the types of both item.feature and data, and both were unicode.  Not sure if that matters?  Anyway, I'm starting to hit my head off the desk after working this for a couple hours, so any help is appreciated.  Cheers!</p>\n"}, {"tags": ["python", "sql", "python-3.x"], "comments": [{"owner": {"reputation": 5854, "user_id": 1970751, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1a425c7654aa63519f4f45710e2f54c?s=128&d=identicon&r=PG", "display_name": "Cilyan", "link": "https://stackoverflow.com/users/1970751/cilyan"}, "edited": false, "score": 0, "creation_date": 1438812751, "post_id": 31843532, "comment_id": 51608873, "body": "I don&#39;t understand a thing in your question. What is the relation between your text file and the SQLite DB? <i>&quot;I need to return the names of the cities which have the same average low temperature.&quot;</i> -&gt; The same as what?"}, {"owner": {"reputation": 63, "user_id": 5181721, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e70f236459aa16d87823bd53cc0623b9?s=128&d=identicon&r=PG&f=1", "display_name": "newbie94", "link": "https://stackoverflow.com/users/5181721/newbie94"}, "reply_to_user": {"reputation": 5854, "user_id": 1970751, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1a425c7654aa63519f4f45710e2f54c?s=128&d=identicon&r=PG", "display_name": "Cilyan", "link": "https://stackoverflow.com/users/1970751/cilyan"}, "edited": false, "score": 0, "creation_date": 1438813248, "post_id": 31843532, "comment_id": 51609074, "body": "I created a table in SQLite db from the info in temperature.txt. I need to return the names of the cities that have the same average low temperature. For example St. Johns: 0.8, Charlottetown: 0.8, Halifax: 1.4. I would need to return St. Johns and Charlottetown - because they have the same average low temperature."}], "answers": [{"tags": [], "owner": {"reputation": 11537, "user_id": 1821329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/gjmMA.jpg?s=128&g=1", "display_name": "FutbolFan", "link": "https://stackoverflow.com/users/1821329/futbolfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1438812885, "last_edit_date": 1438812885, "creation_date": 1438812537, "answer_id": 31843691, "question_id": 31843532, "link": "https://stackoverflow.com/questions/31843532/how-to-match-values-in-a-column/31843691#31843691", "title": "How to match values in a column?", "body": "<p>In SQL, this can be easily done using a self join on the table to get matching AvgLow for different cities like this:</p>\n\n<pre><code>Select \nt.Cities, \nt.AvgLow         \nfrom Table1 t\nINNER JOIN Table1 t1 ON t.AvgLow = t1.AvgLow \n                    and t.Cities &lt;&gt; t1.Cities\nORDER BY t.AvgLow;\n</code></pre>\n\n<p><a href=\"http://www.sqlfiddle.com/#!7/d283a/1/0\" rel=\"nofollow\"><strong>SQLite Demo</strong></a></p>\n"}], "owner": {"reputation": 63, "user_id": 5181721, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e70f236459aa16d87823bd53cc0623b9?s=128&d=identicon&r=PG&f=1", "display_name": "newbie94", "link": "https://stackoverflow.com/users/5181721/newbie94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438813892, "creation_date": 1438811797, "last_edit_date": 1438813892, "question_id": 31843532, "link": "https://stackoverflow.com/questions/31843532/how-to-match-values-in-a-column", "title": "How to match values in a column?", "body": "<p>I have a file <code>temperature.txt</code> with columns: </p>\n\n<pre><code>city \navghigh \navglow \ncoldmonth \ncoldavghigh\ncoldavglow\nwarmmonth \nwarmavghigh\nwarmavglow \n</code></pre>\n\n<p>I need to return the names of the cities which have the same average low temperature.\nI also have this function:</p>\n\n<pre><code>def run_query(db, q, args=None):\n    conn = sqlite3.connect(db)\n    cur = conn.cursor()\n    if args is None:\n        cur.execute(q)\n    else:\n        cur.execute(q, args)\n    results = cur.fetchall()\n    cur.close()\n    conn.commit()\n    conn.close()\n    return results\n</code></pre>\n\n<p>all I got thus far (If it's correct is)</p>\n\n<pre><code>return run_query(noname.db, ('Select Cities, AvgLow from Table')\n</code></pre>\n"}, {"tags": ["python", "nlp", "nltk", "arabic", "word-sense-disambiguation"], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 5669507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd25b5f32822efd8f19b4e6807bb702a?s=128&d=identicon&r=PG&f=1", "display_name": "Pradi KL", "link": "https://stackoverflow.com/users/5669507/pradi-kl"}, "edited": false, "score": 0, "creation_date": 1499226377, "post_id": 31843581, "comment_id": 76809417, "body": "Hello Alvas, i need to know from you if above translation api is still working or else anything else you can recommend"}], "tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": true, "score": 2, "last_activity_date": 1438812798, "last_edit_date": 1438812798, "creation_date": 1438812070, "answer_id": 31843581, "question_id": 31843524, "link": "https://stackoverflow.com/questions/31843524/word-sense-disambiguation-for-arabic-text-with-nltk/31843581#31843581", "title": "Word Sense Disambiguation for Arabic text with NLTK", "body": "<p>It's a little tricky but maybe this will work:</p>\n\n<ol>\n<li>Translate the sentence and the ambiguous word</li>\n<li>Use lesk on the English version of the sentence</li>\n</ol>\n\n<p>Try:</p>\n\n<pre><code>alvas@ubi:~$ wget -O translate.sh http://pastebin.com/raw.php?i=aHgFzmMU\n--2015-08-05 23:32:46--  http://pastebin.com/raw.php?i=aHgFzmMU\nResolving pastebin.com (pastebin.com)... 190.93.241.15, 190.93.240.15, 141.101.112.16, ...\nConnecting to pastebin.com (pastebin.com)|190.93.241.15|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: unspecified [text/plain]\nSaving to: \u2018translate.sh\u2019\n\n    [ &lt;=&gt;                                                                                                                            ] 212         --.-K/s   in 0s      \n\n2015-08-05 23:32:47 (9.99 MB/s) - \u2018translate.sh\u2019 saved [212]\n\nalvas@ubi:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; from nltk.corpus import wordnet as wn\n&gt;&gt;&gt; text = '\u0644\u062f\u064a\u0647 \u064a\u0648\u062f\u0639 \u0627\u0644\u0645\u0627\u0644 \u0641\u064a \u0627\u0644\u0628\u0646\u0643'\n&gt;&gt;&gt; cmd = 'echo \"{}\" | bash translate.sh'.format(text)\n&gt;&gt;&gt; translation = os.popen(cmd).read()\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   193    0    40  100   153     21     83  0:00:01  0:00:01 --:--:--    83\n&gt;&gt;&gt; translation\n'He has deposited the money in the bank. '\n&gt;&gt;&gt; ambiguous = u'\u0623\u064e\u0648\u0652\u062f\u064e\u0639\u064e'\n&gt;&gt;&gt; wn.synsets(ambiguous, lang='arb')\n[Synset('entrust.v.02'), Synset('deposit.v.02'), Synset('commit.v.03'), Synset('entrust.v.01'), Synset('consign.v.02')]\n&gt;&gt;&gt; nltk.wsd.lesk(translation_stems, '', synsets=wn.synsets(ambiguous,lang='arb'))\nSynset('entrust.v.02')\n</code></pre>\n\n<p>But as you can see, there are many limitations:</p>\n\n<ul>\n<li>Access to an MT system is not always easy  (The above bash script using IBM API that will not last forever, it came from <a href=\"https://github.com/Rich-Edwards/fsharpwatson/blob/master/Command%20Line%20CURL%20Scripts\" rel=\"nofollow\">https://github.com/Rich-Edwards/fsharpwatson/blob/master/Command%20Line%20CURL%20Scripts</a>)</li>\n<li>Machine Translation will never be 100% accurate</li>\n<li>Looking for the correct lemma in the Open Multilingual WordNet is not as easy as shown in the example, there's inflection and other morphemic variants to a stem.</li>\n<li>WordNet is never complete, especially when it's the not English.</li>\n<li>WSD is not 100% as human expected (Even between humans we vary our \"senses\", in the example above, some might say the WSD is right, some say it's better to use <code>Synset('deposit.v.02')</code>)</li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 2041154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac95cb1d75b81c0805d921adf73e50f?s=128&d=identicon&r=PG", "display_name": "aTifa Sofa", "link": "https://stackoverflow.com/users/2041154/atifa-sofa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "accepted_answer_id": 31843581, "answer_count": 1, "score": 2, "last_activity_date": 1438812798, "creation_date": 1438811768, "question_id": 31843524, "link": "https://stackoverflow.com/questions/31843524/word-sense-disambiguation-for-arabic-text-with-nltk", "title": "Word Sense Disambiguation for Arabic text with NLTK", "body": "<p>NLTK allows me to disambiguate text with <code>nltk.wsd.lesk</code>, e.g. </p>\n\n<pre><code>&gt;&gt;&gt; from nltk.corpus import wordnet as wn\n&gt;&gt;&gt; from nltk.wsd import lesk\n&gt;&gt;&gt; sent = \"I went to the bank to deposit money\"\n&gt;&gt;&gt; ambiguous = \"deposit\"\n&gt;&gt;&gt; lesk(sent, ambiguous, pos='v')\nSynset('deposit.v.02')\n</code></pre>\n\n<p><a href=\"https://github.com/alvations/pywsd\" rel=\"nofollow\"><code>PyWSD</code></a> does the same but it's only for English text.</p>\n\n<hr>\n\n<p>NLTK supports arabic wordnet from the <a href=\"http://compling.hss.ntu.edu.sg/omw/\" rel=\"nofollow\">Open Multilingual WordNet</a>, e.g.</p>\n\n<pre><code>&gt;&gt;&gt; wn.synsets('deposit', pos='v')[1].lemma_names(lang='arb')\n[u'\\u0623\\u064e\\u0648\\u0652\\u062f\\u064e\\u0639\\u064e']\n&gt;&gt;&gt; print wn.synsets('deposit', pos='v')[1].lemma_names(lang='arb')[0]\n\u0623\u064e\u0648\u0652\u062f\u064e\u0639\u064e\n</code></pre>\n\n<p>Also, the synsets are indexed for Arabic:</p>\n\n<pre><code>&gt;&gt;&gt; wn.synsets(u'\u0623\u064e\u0648\u0652\u062f\u064e\u0639\u064e', lang='arb')\n[Synset('entrust.v.02'), Synset('deposit.v.02'), Synset('commit.v.03'), Synset('entrust.v.01'), Synset('consign.v.02')]\n</code></pre>\n\n<p>But how could i disambiguate Arabic texts and extract concepts from a query using nltk? </p>\n\n<p>I was wondering if it is possible to use Lesk algorithm to deal with Arabic texts through nltk?</p>\n"}, {"tags": ["python", "mocking", "monkeypatching"], "answers": [{"tags": [], "owner": {"reputation": 479, "user_id": 1231120, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c3f654a895c6d2e58177db34f45e1987?s=128&d=identicon&r=PG", "display_name": "DazedAndConfused", "link": "https://stackoverflow.com/users/1231120/dazedandconfused"}, "is_accepted": true, "score": 0, "last_activity_date": 1438891131, "creation_date": 1438891131, "answer_id": 31864698, "question_id": 31843514, "link": "https://stackoverflow.com/questions/31843514/trouble-patching-a-function-of-a-function/31864698#31864698", "title": "Trouble patching a function of a function", "body": "<p>I figured it out! The key was to create a MockUser class, like so:</p>\n\n<pre><code>user = #creating a user\n\nclass MockFilter(object):\n  def all(self):\n    return [user]\n\n\nclass MockQuery(object):\n\n  def filter(self, match):\n    return MockFilter()\n\n\nclass MockUser(object):\n  query = MockQuery()\n  id = '2'\n</code></pre>\n\n<p>Then I patched it in like so:</p>\n\n<pre><code>from mock import patch\n\n@patch('import_location.User', MockUser)\ndef test_difficult_method(): \n  from file_to_test import difficult_method\n  assert difficult_method() returns ...\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 1231120, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c3f654a895c6d2e58177db34f45e1987?s=128&d=identicon&r=PG", "display_name": "DazedAndConfused", "link": "https://stackoverflow.com/users/1231120/dazedandconfused"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 1, "accepted_answer_id": 31864698, "answer_count": 1, "score": 2, "last_activity_date": 1438891131, "creation_date": 1438811740, "last_edit_date": 1438812406, "question_id": 31843514, "link": "https://stackoverflow.com/questions/31843514/trouble-patching-a-function-of-a-function", "title": "Trouble patching a function of a function", "body": "<p>I'm pretty new to patching and I've run into a something I don't know how to patch. Basically, in the file I want to test, there is the method <code>difficult_method()</code>. It looks a little like this:</p>\n\n<pre><code>from import_location import User\n\ndef difficult_method():\n  ids = list_of_ids\n  for id in list_of_ids:\n    try:\n      user = User.query.filter(User.id == user_id).all()[0]\n    except:\n      continue\n    #do lots of stuff\n</code></pre>\n\n<p>The code I want to mock is <code>User.query.filter(User.id == user_id).all()</code> and as far as I am concerned it can return a static list. How would I replace that line in code that looks something like this:</p>\n\n<pre><code>from mock import patch\n\n@patch(#what would go here?)\ndef test_difficult_method(): \n  from file_to_test import difficult_method\n  assert difficult_method() returns ...\n</code></pre>\n"}, {"tags": ["python", "json", "facebook", "pagination"], "comments": [{"owner": {"reputation": 43277, "user_id": 21062, "user_type": "registered", "profile_image": "https://graph.facebook.com/533875325/picture?type=large", "display_name": "Igy", "link": "https://stackoverflow.com/users/21062/igy"}, "edited": false, "score": 0, "creation_date": 1439247733, "post_id": 31843433, "comment_id": 51772932, "body": "What&#39;s the problem with using the pagination links to get the second and subsequent links? It&#39;s not clear from your description (more info on paging here: <a href=\"https://developers.facebook.com/docs/graph-api/using-graph-api/v2.4#paging\" rel=\"nofollow noreferrer\">developers.facebook.com/docs/graph-api/using-graph-api/&hellip;</a> )"}, {"owner": {"reputation": 936, "user_id": 5080273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b26b400d54f2a52add7900c381fb1778?s=128&d=identicon&r=PG&f=1", "display_name": "semiflex", "link": "https://stackoverflow.com/users/5080273/semiflex"}, "reply_to_user": {"reputation": 43277, "user_id": 21062, "user_type": "registered", "profile_image": "https://graph.facebook.com/533875325/picture?type=large", "display_name": "Igy", "link": "https://stackoverflow.com/users/21062/igy"}, "edited": false, "score": 0, "creation_date": 1439648132, "post_id": 31843433, "comment_id": 51952811, "body": "It seem that I can only pull the first 25 posts per comment. I can&#39;t figure out how to pull it all."}, {"owner": {"reputation": 43277, "user_id": 21062, "user_type": "registered", "profile_image": "https://graph.facebook.com/533875325/picture?type=large", "display_name": "Igy", "link": "https://stackoverflow.com/users/21062/igy"}, "edited": false, "score": 1, "creation_date": 1439771721, "post_id": 31843433, "comment_id": 51983029, "body": "Comments per post? have you tried using the cursors (before/after) to load the second page of comments?"}], "owner": {"reputation": 936, "user_id": 5080273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b26b400d54f2a52add7900c381fb1778?s=128&d=identicon&r=PG&f=1", "display_name": "semiflex", "link": "https://stackoverflow.com/users/5080273/semiflex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456246657, "creation_date": 1438811354, "question_id": 31843433, "link": "https://stackoverflow.com/questions/31843433/trying-to-pull-posts-and-comments-from-facebook-for-project-but-cant-get-every", "title": "Trying to pull posts and comments from Facebook for project, but can&#39;t get everything (python, json)", "body": "<p>I'm trying to pull posts and comments from Facebook for a project, but can't seem to pull everything. It seems that I get two links with previous and next</p>\n\n<p>Here's my code:</p>\n\n<pre><code>import facebook\nimport requests\n\ndef some_action(post):\n    #print posts['data']\n    print(post['created_time'])\n\naccess_token = INSERT ACCESS TOKEN HERE\nuser = 'walkers'\n\n\ngraph = facebook.GraphAPI(access_token)\nprofile = graph.get_object(user)\nposts = graph.get_connections(profile['id'], 'posts')\n\nx = 0\nwhile x &lt; 900000:\n    #while True:\n    try:\n        posts = requests.get(posts['paging']['next']).json()\n        print (posts)\n\n    except KeyError:\n        break\n    x = x+1\n</code></pre>\n\n<p>My results are something like this:</p>\n\n<pre><code>{u'paging': {u'next': u' https://graph.facebook.com/v2.0/53198517648/posts?limit=25&amp;__paging_token=enc_AdDr64IO8892JzsoPWiKkMDcF4lTDosOcP0H0ZB1mIpIW5EYRrCylZAji6ZBSCVBAVUYiS80oNtWtAL9GazXxRf0yva&amp;access_token=INSERT ACCESS TOKEN HERE, u'previous': u' https://graph.facebook.com/v2.0/53198517648/posts?limit=25&amp;__paging_token=enc_AdCqTjKBhfOsNBoKe3CJbnM2gU2RvLEYLgAQt1pHEcERVeK4qiw1dQAFHjt2sSInSZAIioZCqotwLMx8azzfZClIuCN&amp;since=1430997206&amp;access_token=INSERT ACCESS TOKEN HERE'}, u'data': [{u'picture': u'https://scontent.xx.fbcdn.net/hphotos-xfp1/v/t1.0-9/p130x130/11200605_10153202855322649_2472649283560371030_n.jpg?oh=50a0b3998e7bae8bb10c3a5f0854af46&amp;oe=56556974', u'story': u'Walkers added 8 new photos to the album: 20 Years of Gary.', u'likes': {u'paging': {u'cursors': {u'after': u'MzgxNzk1MDQ4NjQ3MTI3', u'before': u'MTAxNTI0OTY1MDIwNDIyODI='}}, u'data': [{u'id': u'10152496502042282', u'name': u'Aaron Hanson'}, {u'id': u'10203040513950876', u'name': u'Gary GazRico Hinchliffe'}, {u'id': u'10152934096109345', u'name': u'Stuart Collister'}, {u'id': u'10152297022606059', u'name': u'Helen Preston'}, {u'id': u'326285380900188', u'name': u'Rhys Edwards'}, {u'id': u'10204744346589601', u'name': u'Aaron Benfield'}, {u'id': u'10200910780691953', u'name': u'Mike S Q Wilkins'}, {u'id': u'10204902354187051', u'name': u'Paul Owen Davies'}, {u'id': u'10152784755311784', u'name': u'Dafydd Ifan'}, {u'id': u'1517704468487365', u'name': u'Stephen Collier'}, {u'id': u'10202198826115234', u'name': u'John McKellar'}, {u'id': u'10151949129487143', u'name': u'Lucy Morrison'}, {u'id': u'1474199509524133', u'name': u'Christine Leek'}, {u'id': u'381795048647127', u'name': u'Sandra Taylor'}]}, u'from': {u'category': u'Product/Service', u'name': \n</code></pre>\n\n<p>These are the two links with the missing information:</p>\n\n<pre><code>u'https://graph.facebook.com/v2.0/53198517648/posts?limit=25&amp;__paging_token=enc_AdDr64IO8892JzsoPWiKkMDcF4lTDosOcP0H0ZB1mIpIW5EYRrCylZAji6ZBSCVBAVUYiS80oNtWtAL9GazXxRf0yva&amp;access_token=INSERT ACCESS TOKEN HERE', \n\nu'previous': u'https://graph.facebook.com/v2.0/53198517648/posts?limit=25&amp;__paging_token=enc_AdCqTjKBhfOsNBoKe3CJbnM2gU2RvLEYLgAQt1pHEcERVeK4qiw1dQAFHjt2sSInSZAIioZCqotwLMx8azzfZClIuCN&amp;since=1430997206&amp;access_token=INSERT ACCESS TOKEN HERE'\n</code></pre>\n\n<p>Obviously where I've put \"INSERT ACCESS TOKEN HERE\" I've removed the access token. Is there any way of getting all the data?</p>\n"}, {"tags": ["python", "csv", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1438812349, "last_edit_date": 1438812349, "creation_date": 1438811731, "answer_id": 31843511, "question_id": 31843416, "link": "https://stackoverflow.com/questions/31843416/python-3-nested-dictionary-with-multiple-keys-from-csv/31843511#31843511", "title": "Python 3: nested dictionary with multiple keys from csv", "body": "<p>a <a href=\"https://docs.python.org/2/library/collections.html#collections.defaultdict\" rel=\"nofollow\">collections.defaultdict</a> using the first element from each row as the outer dict keys, then using the second for inner dict keys and adding the rest of the values from the row to a list as the value for the inner dict key:</p>\n\n<pre><code>import csv\nfrom collections import defaultdict\nwith open(\"in.txt\" ) as f:\n    next(f) # skip header\n    d = defaultdict(lambda: defaultdict(list))\n    r = csv.reader(f)\n    for row in r:\n        d[row[0]][row[1]].extend(row[2:])\n\nfrom pprint import pprint as pp\n\npp(dict(d))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'123': {'Smith,John': ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']},\n '456': {'Miller,Ray': ['rrr', 'sss', 'ttt', 'qqq', 'www', 'ppp'],\n         'Williams,Tim': ['xx', 'yy', 'zz', 'vv', 'ww', 'uu']}}\n</code></pre>\n\n<p>Since you are using python3 we can unpack in the loop using <code>*</code> to make  the code a bit nicer:</p>\n\n<pre><code>with open(\"in.txt\") as f:\n    next(f)  # skip header\n    d = defaultdict(lambda: defaultdict(list))\n    r = csv.reader(f)\n    for k1, k2, *vals in r:\n        d[k1][k2].extend(vals))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70403, "user_id": 29809, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/943a45958eb537b816a95920fb0be24c?s=128&d=identicon&r=PG", "display_name": "R Samuel Klatchko", "link": "https://stackoverflow.com/users/29809/r-samuel-klatchko"}, "is_accepted": false, "score": 0, "last_activity_date": 1438811754, "creation_date": 1438811754, "answer_id": 31843518, "question_id": 31843416, "link": "https://stackoverflow.com/questions/31843416/python-3-nested-dictionary-with-multiple-keys-from-csv/31843518#31843518", "title": "Python 3: nested dictionary with multiple keys from csv", "body": "<p>Yes, because in that example, this line the UID everytime:</p>\n\n<pre><code>new_data_dict[row[\"UID\"]] = item\n</code></pre>\n\n<p>instead, you can use setdefault to default the entry to a list and append:</p>\n\n<pre><code>new_data_dict.setdefault(row[\"UID\"], []).append(item)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1438811775, "creation_date": 1438811775, "answer_id": 31843526, "question_id": 31843416, "link": "https://stackoverflow.com/questions/31843416/python-3-nested-dictionary-with-multiple-keys-from-csv/31843526#31843526", "title": "Python 3: nested dictionary with multiple keys from csv", "body": "<p><code>dict.setdefault</code> is a good way to fetch data structures, creating them as required.</p>\n\n<pre><code>import csv\nimport pprint\n\ndata = '''123,\"Smith,John\",a,b,c\n123,\"Smith,John\",d,e,f\n123,\"Smith,John\",g,h,i\n456,\"Williams,Tim\",xx,yy,zz\n456,\"Williams,Tim\",vv,ww,uu\n456,\"Miller,Ray\",rrr,sss,ttt\n456,\"Miller,Ray\",qqq,www,ppp\n'''\ndata = data.splitlines()\ndata = csv.reader(data)\n\nresult = {}\nfor datum in data:\n    outer = result.setdefault(datum[0], {})\n    inner = outer.setdefault(datum[1], [])\n    inner.extend(datum[2:])\n\npprint.pprint(result)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4930566, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ee809a7d098be240f83077eda11ab96d?s=128&d=identicon&r=PG&f=1", "display_name": "public_displYname", "link": "https://stackoverflow.com/users/4930566/public-displyname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 31843511, "answer_count": 3, "score": 2, "last_activity_date": 1438812349, "creation_date": 1438811268, "last_edit_date": 1495541640, "question_id": 31843416, "link": "https://stackoverflow.com/questions/31843416/python-3-nested-dictionary-with-multiple-keys-from-csv", "title": "Python 3: nested dictionary with multiple keys from csv", "body": "<p>The data look like this:</p>\n\n<pre><code>id,outer,inner1,inner2,inner3\n123,\"Smith,John\",a,b,c\n123,\"Smith,John\",d,e,f\n123,\"Smith,John\",g,h,i\n456,\"Williams,Tim\",xx,yy,zz\n456,\"Williams,Tim\",vv,ww,uu\n456,\"Miller,Ray\",rrr,sss,ttt\n456,\"Miller,Ray\",qqq,www,ppp\n</code></pre>\n\n<p>I would like the resulting dictionary to be</p>\n\n<pre><code>{'123': {'Smith,John': 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'},\n '456': {'Williams,Tim': 'xx', 'yy', 'zz', 'vv', 'ww', 'zz'},\n        {'Miller,Ray': 'rrr', 'sss', 'ttt', 'qqq', 'www', 'ppp'}}\n</code></pre>\n\n<p>I tried adapting the accepted answer from <a href=\"https://stackoverflow.com/questions/25485681/python-creating-a-nested-dictionary-from-csv-file\">Python Creating A Nested Dictionary From CSV File</a>,  but this method overwrites the dictionary at every row, so only the final row from each id ends up in the dictionary. </p>\n"}, {"tags": ["python", "string", "tkinter", "set", "optionmenu"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5195775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd47e444debe33c0883457eb442100c?s=128&d=identicon&r=PG&f=1", "display_name": "David Worman", "link": "https://stackoverflow.com/users/5195775/david-worman"}, "edited": false, "score": 0, "creation_date": 1438874668, "post_id": 31843435, "comment_id": 51638976, "body": "Thanks so much!  I originally had it as a StringVar but it would not work.  I got on today to try it and it worked perfectly!"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 7, "last_activity_date": 1438812531, "last_edit_date": 1438812531, "creation_date": 1438811355, "answer_id": 31843435, "question_id": 31843317, "link": "https://stackoverflow.com/questions/31843317/tkinter-attributeerror-str-object-has-no-attribute-set/31843435#31843435", "title": "Tkinter - AttributeError: &#39;str&#39; object has no attribute &#39;set&#39;", "body": "<p>Use a <code>StringVar</code> not a <code>str</code></p>\n\n<pre><code>  def createWidgets(self, master=None):\n        var = tk.StringVar()\n</code></pre>\n\n<p>A python <code>str</code> has no <code>set</code> method or attribute, a StringVar is specific to tkinter and what you are meant to be using.</p>\n"}], "owner": {"reputation": 19, "user_id": 5195775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd47e444debe33c0883457eb442100c?s=128&d=identicon&r=PG&f=1", "display_name": "David Worman", "link": "https://stackoverflow.com/users/5195775/david-worman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12289, "favorite_count": 0, "accepted_answer_id": 31843435, "answer_count": 1, "score": 0, "last_activity_date": 1438812719, "creation_date": 1438810822, "last_edit_date": 1438812719, "question_id": 31843317, "link": "https://stackoverflow.com/questions/31843317/tkinter-attributeerror-str-object-has-no-attribute-set", "title": "Tkinter - AttributeError: &#39;str&#39; object has no attribute &#39;set&#39;", "body": "<p>This is the code I have created and am trying to run:</p>\n\n<pre><code>import tkinter as tk\n\n\ndef ok(val):\n    print(\"Value is: \", val)\n\ndef say_hi(self):\n    print(\"hi there, everyone!\")\n\nclass Application(tk.Frame):\n\n    def __init__(self, master=None):\n        tk.Frame.__init__(self, master)\n        master.title(\"Hi There\")\n        master.geometry(\"400x400\")\n        self.createWidgets(master)\n\n    def createWidgets(self, master=None):\n        var = str()\n\n        self.select = tk.OptionMenu(master, var, \"one\", \"two\",\"three\", command=ok).grid(column=1, row=1)\n\n        self.QUIT = tk.Button(master, text=\"QUIT\", fg=\"red\", command=root.destroy).grid(column=2, row=1)\n        print (\"HI\")\n\nroot = tk.Tk()\napp = Application(master=root)\napp.mainloop()\n</code></pre>\n\n<p>But I am receiving the following error:</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"C:\\Python34\\lib\\tkinter\\__init__.py\", line 1533, in __call__\n    return self.func(*args)\n  File \"C:\\Python34\\lib\\tkinter\\__init__.py\", line 3308, in __call__\n    self.__var.set(self.__value)\nAttributeError: 'str' object has no attribute 'set'\n</code></pre>\n\n<p>I tried messing with some of the variables and using different methods to get the menu to work, but nothing seemed to get rid of the error.  </p>\n\n<p>Any idea on how to fix the error?</p>\n"}, {"tags": ["python", "string", "match"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1438810910, "post_id": 31843312, "comment_id": 51608165, "body": "calculate the <a href=\"https://en.wikipedia.org/wiki/Hamming_distance\" rel=\"nofollow noreferrer\">hamming distance</a>. perfect matches have a hamming distance of <code>0</code>."}, {"owner": {"reputation": 3703, "user_id": 399573, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1e8e67c6abb4a9c0d8bbb52e0d28416e?s=128&d=identicon&r=PG", "display_name": "gt6989b", "link": "https://stackoverflow.com/users/399573/gt6989b"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1438810989, "post_id": 31843312, "comment_id": 51608199, "body": "@MarcB hamming distance not the best metric here, he needs ability to remove arbitrary pieces of the string to match songB to songC."}, {"owner": {"reputation": 3703, "user_id": 399573, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1e8e67c6abb4a9c0d8bbb52e0d28416e?s=128&d=identicon&r=PG", "display_name": "gt6989b", "link": "https://stackoverflow.com/users/399573/gt6989b"}, "edited": false, "score": 0, "creation_date": 1438811059, "post_id": 31843312, "comment_id": 51608233, "body": "Note that in your example, <code>songC in songB</code> is <code>False</code>"}, {"owner": {"reputation": 964, "user_id": 5157440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fIUsD.jpg?s=128&g=1", "display_name": "Archit Garg", "link": "https://stackoverflow.com/users/5157440/archit-garg"}, "edited": false, "score": 0, "creation_date": 1438811069, "post_id": 31843312, "comment_id": 51608236, "body": "Levenshtein distance is probably what you&#39;re looking for.,,,"}, {"owner": {"reputation": 1985, "user_id": 2080712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/NyaqQ.jpg?s=128&g=1", "display_name": "Bernardo Meurer", "link": "https://stackoverflow.com/users/2080712/bernardo-meurer"}, "reply_to_user": {"reputation": 3703, "user_id": 399573, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1e8e67c6abb4a9c0d8bbb52e0d28416e?s=128&d=identicon&r=PG", "display_name": "gt6989b", "link": "https://stackoverflow.com/users/399573/gt6989b"}, "edited": false, "score": 0, "creation_date": 1438811101, "post_id": 31843312, "comment_id": 51608248, "body": "Actually @gt6989b I believe you might have misunderstood a little, I just need to know &#39;how much&#39; one is a match of the other."}, {"owner": {"reputation": 1985, "user_id": 2080712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/NyaqQ.jpg?s=128&g=1", "display_name": "Bernardo Meurer", "link": "https://stackoverflow.com/users/2080712/bernardo-meurer"}, "reply_to_user": {"reputation": 3703, "user_id": 399573, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1e8e67c6abb4a9c0d8bbb52e0d28416e?s=128&d=identicon&r=PG", "display_name": "gt6989b", "link": "https://stackoverflow.com/users/399573/gt6989b"}, "edited": false, "score": 0, "creation_date": 1438811191, "post_id": 31843312, "comment_id": 51608297, "body": "@gt6989b, my bad I forgot the .flac, the code is removing them beforehand."}, {"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 1, "creation_date": 1438811205, "post_id": 31843312, "comment_id": 51608304, "body": "just found this: <a href=\"http://chairnerd.seatgeek.com/fuzzywuzzy-fuzzy-string-matching-in-python/\" rel=\"nofollow noreferrer\">chairnerd.seatgeek.com/&hellip;</a> ."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438811236, "post_id": 31843312, "comment_id": 51608325, "body": "<a href=\"http://stackoverflow.com/questions/31642940/finding-if-two-strings-are-almost-similar\" title=\"finding if two strings are almost similar\">stackoverflow.com/questions/31642940/&hellip;</a>"}, {"owner": {"reputation": 1985, "user_id": 2080712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/NyaqQ.jpg?s=128&g=1", "display_name": "Bernardo Meurer", "link": "https://stackoverflow.com/users/2080712/bernardo-meurer"}, "edited": false, "score": 0, "creation_date": 1438814313, "post_id": 31843312, "comment_id": 51609445, "body": "Ended up using <a href=\"https://pypi.python.org/pypi/fuzzywuzzy/0.6.0\" rel=\"nofollow noreferrer\">fuzzywuzzy</a>. Thanks for all the help guys!"}], "answers": [{"tags": [], "owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "is_accepted": true, "score": 6, "last_activity_date": 1438811081, "creation_date": 1438811081, "answer_id": 31843380, "question_id": 31843312, "link": "https://stackoverflow.com/questions/31843312/determining-how-much-two-strings-match/31843380#31843380", "title": "Determining how much two strings match", "body": "<p>You can use the <a href=\"https://pypi.python.org/pypi/python-Levenshtein/\">python-Levenshtein</a> lib to compute the levenshtein distance between the two strings:</p>\n\n<pre><code>import Levenshtein\nLevenshtein.distance(songC, songA) # 0\nLevenshtein.distance(songC, songB) # 11\n</code></pre>\n"}], "owner": {"reputation": 1985, "user_id": 2080712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/NyaqQ.jpg?s=128&g=1", "display_name": "Bernardo Meurer", "link": "https://stackoverflow.com/users/2080712/bernardo-meurer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 31843380, "answer_count": 1, "score": 1, "last_activity_date": 1438811081, "creation_date": 1438810798, "question_id": 31843312, "link": "https://stackoverflow.com/questions/31843312/determining-how-much-two-strings-match", "title": "Determining how much two strings match", "body": "<p>Let's say we have 3 strings</p>\n\n<pre><code>songA = \"(Used to Be A) Cha-Cha.flac\"\nsongB = \"(Used to Be A) Cha-Cha [Alt Take].flac\"\n</code></pre>\n\n<p>And we want to match a third string</p>\n\n<pre><code>songC = \"(Used to Be A) Cha-Cha.flac\"\n</code></pre>\n\n<p>Now, although both songA and SongB match songC it is clear that songA is a 'better' match since it doesn't have the [Alt Take] part, thus making a perfect match. If I use the <code>songA in songB</code> method both will be matched, so how can I account for how good a match is?</p>\n"}, {"tags": ["python", "python-2.7", "pyqt", "pyqt4"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4256367, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/72394b24af390c3db61c0a2468dd454e?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/4256367/bill"}, "edited": false, "score": 0, "creation_date": 1438852395, "post_id": 31843809, "comment_id": 51623193, "body": "please fill the way I pass the <code>host_mac</code> in my <code>Client</code> class --&gt; <code>self.w = Client(self.host_mac)</code> just to clarify to others how the problem is setled! Thank you for your answer!"}], "tags": [], "owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "is_accepted": true, "score": 2, "last_activity_date": 1438813338, "creation_date": 1438813338, "answer_id": 31843809, "question_id": 31843262, "link": "https://stackoverflow.com/questions/31843262/pass-a-variable-from-one-class-to-another-in-pyqt/31843809#31843809", "title": "Pass a variable from one Class to another in PyQt", "body": "<p><code>Main_window_ex.host_mac</code> refers to a <em>class</em> variable (as <code>Main_window_ex</code> is only a class), but you are wanting to access the <em>instance</em> variable. In other words, <code>host_mac</code> is not defined until the class is instantiated. </p>\n\n<p>There are a few ways around this. Assuming <code>Main_window_ex</code> is responsible for creating <code>Client</code>, then one simple way is to pass the variable to <code>Client</code>:</p>\n\n<pre><code>class Client(QDialog):\n    def __init__(self, host_mac, parent=None):\n        self.host_mac = host_mac\n        ...\n</code></pre>\n\n<p>And use it like:</p>\n\n<pre><code>    def set_client(self):\n        self.client = self.le.text()\n        print 'provided client mac is ' + self.client + 'and host_mac is ' + self.host_mac\n</code></pre>\n\n<p>As a side note you may want to use the new style connection syntax:</p>\n\n<pre><code># old style\n# self.connect(self.pb, SIGNAL(\"clicked()\"),self.set_client)\n\n# new style\nself.pb.clicked.connect(self.set_client)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4256367, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/72394b24af390c3db61c0a2468dd454e?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/4256367/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5843, "favorite_count": 2, "accepted_answer_id": 31843809, "answer_count": 1, "score": 1, "last_activity_date": 1438813338, "creation_date": 1438810540, "last_edit_date": 1438810921, "question_id": 31843262, "link": "https://stackoverflow.com/questions/31843262/pass-a-variable-from-one-class-to-another-in-pyqt", "title": "Pass a variable from one Class to another in PyQt", "body": "<p>I want to pass a string variable from <code>Main_Window</code> class to another <code>QDialog</code> class in PyQt. I can't understand what I do wrong. I want to pass <code>host_mac</code> variable from Main Class to QDialog Class. Here the main part of my code.</p>\n\n<p>Here is the QDialog class:</p>\n\n<pre><code>class Client(QDialog):\n    def __init__(self, parent=None):\n        super(Client, self).__init__(parent)\n        self.pb = QPushButton()\n        self.pb.setObjectName(\"connect\")\n        self.pb.setText(\"Connect\") \n\n        layout = QFormLayout()\n        layout.addWidget(self.pb)\n\n        self.setLayout(layout)\n        self.connect(self.pb, SIGNAL(\"clicked()\"),self.set_client)\n        self.setWindowTitle(\"Learning\")\n\n    def set_client(self):\n        self.client = self.le.text()\n        print 'provided client mac is ' + self.client + 'and host_mac is ' + Main_window_ex.host_mac\n</code></pre>\n\n<p>And here the Main_Window Class:</p>\n\n<pre><code>class Main_window_ex(QMainWindow, Ui_Main_window):   \n    def __init__(self, parent = None):\n    \"\"\"\n    Default Constructor. It can receive a top window as parent. \n    \"\"\"\n    QMainWindow.__init__(self, parent)\n    self.setupUi(self)\n\n\n    self.host_mac = 'blah blah'\n\n#more code beneeth\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>AttributeError: type object 'Main_window_ex' has no attribute 'host_mac'\n</code></pre>\n"}, {"tags": ["python", "google-search-api"], "comments": [{"owner": {"reputation": 1470, "user_id": 2075745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f9a084d236381e1882c4e28edb5151f?s=128&d=identicon&r=PG", "display_name": "user25064", "link": "https://stackoverflow.com/users/2075745/user25064"}, "edited": false, "score": 0, "creation_date": 1438810788, "post_id": 31843215, "comment_id": 51608116, "body": "perhaps <a href=\"https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlencode\" rel=\"nofollow noreferrer\">urlencode</a>"}, {"owner": {"reputation": 785, "user_id": 5094673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a28c86db4ac5ddbbb6f0b3bce4e79b?s=128&d=identicon&r=PG&f=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/5094673/casey"}, "edited": false, "score": 0, "creation_date": 1438810944, "post_id": 31843215, "comment_id": 51608179, "body": "Have you checked the URL to see exactly what it looks like when it executes?"}], "answers": [{"tags": [], "owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "is_accepted": true, "score": 1, "last_activity_date": 1438816913, "creation_date": 1438816913, "answer_id": 31844402, "question_id": 31843215, "link": "https://stackoverflow.com/questions/31843215/cant-get-googles-search-api-to-work-with-python/31844402#31844402", "title": "Can&#39;t get Google&#39;s Search API to work with Python", "body": "<p>I don't know if this is the source of your problem or not, but you could be making much better use of the <code>requests</code> library.  For starters, you can put your API key and CX value into a session object, where they can be used in subsequent requests:</p>\n\n<pre><code>&gt;&gt;&gt; import requests\n&gt;&gt;&gt; s = requests.Session()\n&gt;&gt;&gt; s.params['key'] = 'MY_KEY'\n&gt;&gt;&gt; s.params['cx'] = 'MY_CX'\n</code></pre>\n\n<p>And you can pass additional search parameters by passing a dict in the <code>params</code> keyword, rather than building the URL yourself:</p>\n\n<pre><code>&gt;&gt;&gt; result = s.get('https://www.googleapis.com/customsearch/v1', \n... params={'q': 'my search string'})\n</code></pre>\n\n<p>This all works for me:</p>\n\n<pre><code>&gt;&gt;&gt; result\n&lt;Response [200]&gt;\n&gt;&gt;&gt; print result.text\n{\n \"kind\": \"customsearch#search\",\n \"url\": {\n  \"type\": \"application/json\",\n  \"template\": \"https://www.googleapis.com/customsearch/v1?q={searchTerms}&amp;num={count?}&amp;start={startIndex?}&amp;lr={language?}&amp;safe\n[...]\n</code></pre>\n\n<p>Also, it's worth checking that you have <a href=\"https://developers.google.com/custom-search/json-api/v1/introduction#identify_your_application_to_google_with_api_key\" rel=\"nofollow\">enabled the search API</a> for your API key.</p>\n\n<p>You can see exactly what the <code>requests</code> library is doing by enabling debug logging through the Python <code>logging</code> module:</p>\n\n<pre><code>&gt;&gt;&gt; import logging\n&gt;&gt;&gt; logging.basicConfig(level='DEBUG')\n&gt;&gt;&gt; result = s.get('https://www.googleapis.com/customsearch/v1', params={'q': 'openstack'})\nDEBUG:requests.packages.urllib3.connectionpool:\"GET /customsearch/v1?q=openstack&amp;cx=0123456789123456789%3Aabcdefghijk&amp;key=THIS_IS_MY_KEY HTTP/1.1\" 200 13416\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 4646499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c7c1cfcb24b468b479399272b038c8e?s=128&d=identicon&r=PG&f=1", "display_name": "ZeZe", "link": "https://stackoverflow.com/users/4646499/zeze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 1, "accepted_answer_id": 31844402, "answer_count": 1, "score": 3, "last_activity_date": 1438816913, "creation_date": 1438810345, "question_id": 31843215, "link": "https://stackoverflow.com/questions/31843215/cant-get-googles-search-api-to-work-with-python", "title": "Can&#39;t get Google&#39;s Search API to work with Python", "body": "<p>I'm using google's own search API but I keep getting a 403 error. The key is taken from console.developers.google.com under APIs &amp; auth -> Credentials and I used a Browser key with any referrers. The ID is taken from under the custom search engines basic information.</p>\n\n<pre><code>import requests\n\nsearch = \"https://www.googleapis.com/customsearch/v1\"\nkey = \"?key=MY_KEY\"\nid_ = \"&amp;cx=MY_ID\"\nquery = \"&amp;q=test\"\n\nget = search + key + id_ + query\n\nr = requests.get(get)\n\nprint(r)\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "arrays", "python-import"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438810900, "post_id": 31843187, "comment_id": 51608160, "body": "Your rationale make no sense. How does the rest of your code know that a module named <code>sys</code> was imported (so it knows to use <code>sys.version</code>)?"}, {"owner": {"reputation": 3083, "user_id": 3043557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/yYLOD.jpg?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/3043557/riley"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438811050, "post_id": 31843187, "comment_id": 51608229, "body": "I don&#39;t know that&#39;s why I asked the question. Its now resolved so don&#39;t worry about my rationale."}], "answers": [{"tags": [], "owner": {"reputation": 1470, "user_id": 2075745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f9a084d236381e1882c4e28edb5151f?s=128&d=identicon&r=PG", "display_name": "user25064", "link": "https://stackoverflow.com/users/2075745/user25064"}, "is_accepted": true, "score": 4, "last_activity_date": 1438810418, "creation_date": 1438810418, "answer_id": 31843230, "question_id": 31843187, "link": "https://stackoverflow.com/questions/31843187/how-do-i-import-modules-from-an-array-in-python/31843230#31843230", "title": "How do I import modules from an array in python?", "body": "<p>How about </p>\n\n<pre><code>for m in modules:\n    globals()[m] = __import__(m)\n</code></pre>\n"}], "owner": {"reputation": 3083, "user_id": 3043557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/yYLOD.jpg?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/3043557/riley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1022, "favorite_count": 1, "accepted_answer_id": 31843230, "answer_count": 1, "score": 1, "last_activity_date": 1438810418, "creation_date": 1438810229, "question_id": 31843187, "link": "https://stackoverflow.com/questions/31843187/how-do-i-import-modules-from-an-array-in-python", "title": "How do I import modules from an array in python?", "body": "<p>Im trying to import a set of modules that are defined by an array. The reason I would like to store them in an array is because I would like to change this list dynamically.</p>\n\n<pre><code>moduleNames = ['sys', 'os']\nimport moduleNames\n</code></pre>\n\n<p>However this doesnt work.</p>\n\n<p>I have searched around and found this:</p>\n\n<pre><code>moduleNames = ['sys', 'os']\nmodules = map(__inport__, moduleNames)\n</code></pre>\n\n<p>This imports the modules however I would like to be able to access it by doing <code>sys.version</code> for example. Rather than by using <code>modules[0].version</code></p>\n\n<p>Is this currently possible I can't seem to find anywhere that shows you how to do it.</p>\n"}, {"tags": ["python", "igraph"], "comments": [{"owner": {"reputation": 31, "user_id": 5195700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb25b8df838b250c17a577d2b71b1803?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Arjad", "link": "https://stackoverflow.com/users/5195700/alex-arjad"}, "edited": false, "score": 0, "creation_date": 1438810059, "post_id": 31843101, "comment_id": 51607793, "body": "I realized I should make my question more explicit: does anyone know why this crashes?  Is there some other way to use a Python object for a vertex name instead of a string?"}, {"owner": {"reputation": 1391, "user_id": 2450629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EP5Ah.jpg?s=128&g=1", "display_name": "Haochen Wu", "link": "https://stackoverflow.com/users/2450629/haochen-wu"}, "edited": false, "score": 1, "creation_date": 1438810064, "post_id": 31843101, "comment_id": 51607794, "body": "So, what&#39;s your question? Clearly igraph doesn&#39;t support using object as vertex&#39;s name."}, {"owner": {"reputation": 31, "user_id": 5195700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb25b8df838b250c17a577d2b71b1803?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Arjad", "link": "https://stackoverflow.com/users/5195700/alex-arjad"}, "reply_to_user": {"reputation": 1391, "user_id": 2450629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EP5Ah.jpg?s=128&g=1", "display_name": "Haochen Wu", "link": "https://stackoverflow.com/users/2450629/haochen-wu"}, "edited": false, "score": 0, "creation_date": 1438810274, "post_id": 31843101, "comment_id": 51607892, "body": "If igraph doesn&#39;t support using objects as vertex names, why would it allow the vertices to be constructed in the first place?"}, {"owner": {"reputation": 1391, "user_id": 2450629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EP5Ah.jpg?s=128&g=1", "display_name": "Haochen Wu", "link": "https://stackoverflow.com/users/2450629/haochen-wu"}, "edited": false, "score": 0, "creation_date": 1438810519, "post_id": 31843101, "comment_id": 51607985, "body": "It&#39;s kind of a bug. &quot;name&quot; is just another property of nodes that happened to be used in some other functions. Like other properties it can be anything but meanwhile some other functions may rely on some specific data type."}, {"owner": {"reputation": 1391, "user_id": 2450629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EP5Ah.jpg?s=128&g=1", "display_name": "Haochen Wu", "link": "https://stackoverflow.com/users/2450629/haochen-wu"}, "edited": false, "score": 0, "creation_date": 1438810620, "post_id": 31843101, "comment_id": 51608029, "body": "In your case you can just use the string as nodes&#39; names and store the objects in another property like g.vs[0][&#39;data&#39;]."}, {"owner": {"reputation": 31, "user_id": 5195700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb25b8df838b250c17a577d2b71b1803?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Arjad", "link": "https://stackoverflow.com/users/5195700/alex-arjad"}, "reply_to_user": {"reputation": 1391, "user_id": 2450629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EP5Ah.jpg?s=128&g=1", "display_name": "Haochen Wu", "link": "https://stackoverflow.com/users/2450629/haochen-wu"}, "edited": false, "score": 0, "creation_date": 1438811445, "post_id": 31843101, "comment_id": 51608400, "body": "I can, but it will complicate my program.  I&#39;ll submit a bug report to the igraph people, thanks for your help."}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438830633, "post_id": 31843101, "comment_id": 51613558, "body": "Can you use a subclassed str for your object?"}], "owner": {"reputation": 31, "user_id": 5195700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb25b8df838b250c17a577d2b71b1803?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Arjad", "link": "https://stackoverflow.com/users/5195700/alex-arjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 578, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438809871, "creation_date": 1438809871, "question_id": 31843101, "link": "https://stackoverflow.com/questions/31843101/python-igraph-crashes-when-adding-an-edge-between-two-vertices-that-have-objects", "title": "python-igraph crashes when adding an edge between two vertices that have objects for names", "body": "<p>I'm running igraph 0.7.1 in Python 3.4 under Windows 7, and the following code crashes:</p>\n\n<pre><code>import igraph\n\nclass Person:\n    def __init__(self, name):\n        self.name = name\n\nalice = Person('Alice')\nbob = Person('Bob')\ng = igraph.Graph()\ng.add_vertex(alice)\ng.add_vertex(bob)\nprint(g.vs[0]['name'] == alice)\nprint(g.vs[1]['name'] == bob)\ng.add_edge(alice, bob)\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>True\nTrue\n  File \"C:\\Python34\\lib\\site-packages\\igraph\\__init__.py\", line 237, in add_edge\n    return self.add_edges([(source, target)])\n  File \"C:\\Python34\\lib\\site-packages\\igraph\\__init__.py\", line 255, in add_edges\n    return GraphBase.add_edges(self, es)\nTypeError: only numbers, vertex names or igraph.Vertex objects can be converted to vertex IDs\n</code></pre>\n\n<p>It seems that this code should work, because alice and bob are vertex names in this case, and are in fact stored in the vertex's 'name' attribute.  Interestingly, the following does not crash:</p>\n\n<pre><code>g = igraph.Graph()\ng.add_vertex('Alice')\ng.add_vertex('Bob')\ng.add_edge('Alice', 'Bob')\n</code></pre>\n"}, {"tags": ["python", "protocol-buffers"], "comments": [{"owner": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "edited": false, "score": 0, "creation_date": 1438810184, "post_id": 31843088, "comment_id": 51607856, "body": "cls isn&#39;t defined in MergeFrom or being called via self.cls is cls global ?"}, {"owner": {"reputation": 133, "user_id": 4786480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4c4295adfecc29e31bef8c3f371576?s=128&d=identicon&r=PG&f=1", "display_name": "wpc062", "link": "https://stackoverflow.com/users/4786480/wpc062"}, "reply_to_user": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "edited": false, "score": 0, "creation_date": 1438823010, "post_id": 31843088, "comment_id": 51611732, "body": "@Obj3ctiv3_C_88, what do you mean by \u201dbeing called via self.cls is cls global\u201c?"}, {"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "reply_to_user": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "edited": false, "score": 0, "creation_date": 1527894552, "post_id": 31843088, "comment_id": 88314779, "body": "@Obj3ctiv3_C_88 - if you find the source code (<code>...&#47;site-packages&#47;google&#47;protobuf&#47;internal&#47;python_message.p&zwnj;&#8203;y</code>), it shows that <code>MergeFrom</code> is a function, defined within a function (<code>def _AddMergeFromMethod(cls)</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 9808350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tony Kuo", "link": "https://stackoverflow.com/users/9808350/tony-kuo"}, "is_accepted": true, "score": 6, "last_activity_date": 1527028701, "creation_date": 1527028701, "answer_id": 50477383, "question_id": 31843088, "link": "https://stackoverflow.com/questions/31843088/isinstance-doesnt-work-when-use-reflection-of-python-protobuf-v2-6-1/50477383#50477383", "title": "isinstance doesn&#39;t work when use reflection of python protobuf v2.6.1", "body": "<p>This may be able to help someone. \nI had the same error </p>\n\n<p><code>TypeError: Parameter to MergeFrom() must be instance of same class: expected Hello_msg got Hello_msg.\n</code> </p>\n\n<p>when I imported the same class twice at two different paths, it results in two different classes imported at different paths (Even though they might have the same class name, Python sees them as two completely different class (check the ID of the class, you should find them to be different)). </p>\n\n<p>To solve this issue, you need to make sure the same class (Hello_msg) is imported only once. </p>\n"}], "owner": {"reputation": 133, "user_id": 4786480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4c4295adfecc29e31bef8c3f371576?s=128&d=identicon&r=PG&f=1", "display_name": "wpc062", "link": "https://stackoverflow.com/users/4786480/wpc062"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4518, "favorite_count": 0, "accepted_answer_id": 50477383, "answer_count": 1, "score": 6, "last_activity_date": 1527028701, "creation_date": 1438809811, "last_edit_date": 1438829647, "question_id": 31843088, "link": "https://stackoverflow.com/questions/31843088/isinstance-doesnt-work-when-use-reflection-of-python-protobuf-v2-6-1", "title": "isinstance doesn&#39;t work when use reflection of python protobuf v2.6.1", "body": "<p>I am using dynamic reflection functionality of python protobuf v2.6.1, and have a function like below:</p>\n\n<pre><code># initilization code\n\n        des_db_ = descriptor_database.DescriptorDatabase()\n        des_pool_ = descriptor_pool.DescriptorPool(des_db_)\n\n\n        fdp = descriptor_pb2.FileDescriptorProto.FromString(\n            a_pb_module.DESCRIPTOR.serialized_pb)\n        des_db_.Add(fdp)\n\n\ndef unpack_PB_msg(type_name, pb_msg_str)\n        factory = message_factory.MessageFactory(des_pool_)\n        msg_class = factory.GetPrototype(des_pool_.FindMessageTypeByName(type_name))\n\n        pb_msg = msg_class()\n        pb_msg.ParseFromString(pb_msg_str)\n\n       return pb_msg\n</code></pre>\n\n<p>But following client code will fail</p>\n\n<pre><code>hello = Hello_msg()\nhello_str = hello.SerializeToString()\nhello2 = unpack_PB_msg(Hello_msg.DESCRIPTOR.full_name, hello_str)\n\nhello3 = Hello_msg()\nhello3.CopyFrom(hello2)# failed here!!!\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre><code>hello3.CopyFrom(hello2)\n  File \"C:\\Localdata\\Python27\\lib\\site-packages\\google\\protobuf\\message.py\", line 119, in CopyFrom\n    self.MergeFrom(other_msg)\n  File \"C:\\Localdata\\Python27\\lib\\site-packages\\google\\protobuf\\internal\\python_message.py\", line 971, in MergeFrom\n    \"expected %s got %s.\" % (cls.__name__, type(msg).__name__))\nTypeError: Parameter to MergeFrom() must be instance of same class: expected Hello_msg got Hello_msg.\n</code></pre>\n\n<p>It seems CopyFrom fails because isinstance fails.</p>\n\n<pre><code>  def MergeFrom(self, msg):\n    if not isinstance(msg, cls):\n      raise TypeError(\n          \"Parameter to MergeFrom() must be instance of same class: \"\n          \"expected %s got %s.\" % (cls.__name__, type(msg).__name__))\n</code></pre>\n\n<p>When print data type of hello2 and hello3, it seems they are different.</p>\n\n<pre><code>hello2 : &lt;class 'Hello_msg'&gt;\nhello3 : &lt;class 'a_pb_module.Hello_msg'&gt;\n</code></pre>\n\n<p>Is this a protobuf bug? or I made something wrong?</p>\n"}, {"tags": ["python", "pandas", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 3422, "user_id": 2620170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd6abee86ef49dd0b6ef5785090eb7e5?s=128&d=identicon&r=PG", "display_name": "colcarroll", "link": "https://stackoverflow.com/users/2620170/colcarroll"}, "edited": false, "score": 0, "creation_date": 1438817302, "post_id": 31843195, "comment_id": 51610354, "body": "That&#39;s perfect -- you might add that it works in a pipeline, as a single step.  Specifically, if <code>pipe = Pipeline((&#39;encoder&#39;, LabelBinarizer()),])</code>, then <code>print(pipe.fit_transform(X))</code> works as you describe."}], "tags": [], "owner": {"reputation": 3021, "user_id": 3498864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xaN7Q.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3498864/ryan"}, "is_accepted": true, "score": 3, "last_activity_date": 1438810251, "creation_date": 1438810251, "answer_id": 31843195, "question_id": 31843008, "link": "https://stackoverflow.com/questions/31843008/transforming-text-data-in-sklearn-pipeline/31843195#31843195", "title": "Transforming text data in sklearn pipeline", "body": "<p>Use <code>LabelBinarizer</code>:</p>\n\n<pre><code>import numpy as np                                  \nfrom sklearn import preprocessing                                                                                                                            \nX = np.array(['cat', 'dog', 'cow', 'cat', 'cow', 'dog'])                                                                                                                      \nbinar = preprocessing.LabelBinarizer()                                                                                                                                        \nX_bin = binar.fit_transform(X)                                                                                                                                                \nprint X_bin \n</code></pre>\n\n<p>the output is: </p>\n\n<pre><code>[[1 0 0]\n [0 0 1]\n [0 1 0]\n [1 0 0]\n [0 1 0]\n [0 0 1]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9004, "user_id": 4077912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc64252865700f1bf9ff46eb76b399d?s=128&d=identicon&r=PG&f=1", "display_name": "Primer", "link": "https://stackoverflow.com/users/4077912/primer"}, "is_accepted": false, "score": 1, "last_activity_date": 1438812504, "creation_date": 1438812504, "answer_id": 31843684, "question_id": 31843008, "link": "https://stackoverflow.com/questions/31843008/transforming-text-data-in-sklearn-pipeline/31843684#31843684", "title": "Transforming text data in sklearn pipeline", "body": "<p>pandas has a method <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html#pandas.get_dummies\" rel=\"nofollow\"><code>get_dummies</code></a> for this:</p>\n\n<pre><code>pd.get_dummies(X)\n</code></pre>\n\n<p>Will produce DataFrame:</p>\n\n<pre><code>   cat  cow  dog\n0    1    0    0\n1    0    0    1\n2    0    1    0\n3    1    0    0\n4    0    1    0\n5    0    0    1\n</code></pre>\n\n<p>Or if you must have an array of ints:</p>\n\n<pre><code>pd.get_dummies(X).values.astype(int)\n</code></pre>\n\n<p>Will yield:</p>\n\n<pre><code>[[1 0 0]\n [0 0 1]\n [0 1 0]\n [1 0 0]\n [0 1 0]\n [0 0 1]]\n</code></pre>\n"}], "owner": {"reputation": 3422, "user_id": 2620170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd6abee86ef49dd0b6ef5785090eb7e5?s=128&d=identicon&r=PG", "display_name": "colcarroll", "link": "https://stackoverflow.com/users/2620170/colcarroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 1, "accepted_answer_id": 31843195, "answer_count": 2, "score": 1, "last_activity_date": 1438812504, "creation_date": 1438809455, "question_id": 31843008, "link": "https://stackoverflow.com/questions/31843008/transforming-text-data-in-sklearn-pipeline", "title": "Transforming text data in sklearn pipeline", "body": "<p>Given an array of text data, </p>\n\n<pre><code>X = np.array(['cat', 'dog', 'cow', 'cat', 'cow', 'dog'])\n</code></pre>\n\n<p>I would like to use an sklearn pipeline to produce output like </p>\n\n<pre><code>np.array([[1, 0, 0], [0, 1, 0], [0, 0, 1], [1, 0, 0], [0, 0, 1], [0, 1, 0]])\n</code></pre>\n\n<p>My initial attempt</p>\n\n<pre><code>pipe = Pipeline([\n    ('encoder', LabelEncoder()),\n    ('hot', OneHotEncoder(sparse=False))])\nprint(pipe.fit_transform(X))\n</code></pre>\n\n<p>raises <code>TypeError: fit_transform() takes exactly 2 arguments (3 given)\n</code>, as per <a href=\"https://github.com/scikit-learn/scikit-learn/issues/3956\" rel=\"nofollow\">this issue</a>.  I have tried editing the signature on LabelEncoder, so that <code>SaneLabelEncoder().fit_transform(X)</code> gives <code>[0 2 1 0 1 2]</code>, but then</p>\n\n<pre><code>pipe = Pipeline([\n    ('encoder', SaneLabelEncoder()),\n    ('hot', OneHotEncoder(sparse=False))])\nprint(pipe.fit_transform(X))\n</code></pre>\n\n<p>gives <code>[[ 1.  1.  1.  1.  1.  1.]]</code>.  Any suggestions on getting to the desired output?</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 3, "creation_date": 1438809493, "post_id": 31842985, "comment_id": 51607516, "body": "The JSON you posted is valid, but not necessarily exactly what is in your file. What encoding was used for the file?"}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1438809611, "post_id": 31842985, "comment_id": 51607566, "body": "It works fine for me..."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1438810250, "post_id": 31842985, "comment_id": 51607884, "body": "What version of Python are you using? You may need to use <code>codecs.open()</code> and specify the proper <code>encoding</code> keyword argument."}, {"owner": {"reputation": 185, "user_id": 5195636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55ebfae10c91237639c3f81ab957a7f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hammond", "link": "https://stackoverflow.com/users/5195636/j-hammond"}, "edited": false, "score": 0, "creation_date": 1438824893, "post_id": 31842985, "comment_id": 51612127, "body": "I&#39;m using version 2.7.5. of python.  I just pasted the JSON into notepad, so I assume it is in unicode."}, {"owner": {"reputation": 185, "user_id": 5195636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55ebfae10c91237639c3f81ab957a7f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hammond", "link": "https://stackoverflow.com/users/5195636/j-hammond"}, "edited": false, "score": 0, "creation_date": 1438835562, "post_id": 31842985, "comment_id": 51614774, "body": "So, I saved my JSON as utf-8 in another plain text editor (not Notepad) and it worked!   Though i don&#39;t really understand why.  Thanks for the comments above though, they helped me get there."}], "owner": {"reputation": 185, "user_id": 5195636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55ebfae10c91237639c3f81ab957a7f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hammond", "link": "https://stackoverflow.com/users/5195636/j-hammond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438809383, "creation_date": 1438809383, "question_id": 31842985, "link": "https://stackoverflow.com/questions/31842985/trouble-loading-external-json-file-in-python", "title": "trouble loading external JSON file in python", "body": "<p>I'm a beginner to python,  I have an external JSON file looks like this</p>\n\n<pre><code>[\n{\n    \"Name1\": \"Schule an der Admiralstra\u00dfe\",\n    \"Strasse\": \"Winterstr. 20\",\n    \"PLZ\": 28215,\n    \"Ort\": \"Bremen\",\n    \"Schulnummer\": \"002\"\n},\n{\n    \"Name1\": \"Schule am Alten Postweg\",\n    \"Strasse\": \"Alter Postweg 302\",\n    \"PLZ\": 28207,\n    \"Ort\": \"Bremen\",\n    \"Schulnummer\": \"003\"\n},\n{\n    \"Name1\": \"Schule Am M\u00f6nchshof\",\n    \"Strasse\": \"Hindenburgstr. 33 A\",\n    \"PLZ\": 28717,\n    \"Ort\": \"Bremen\",\n    \"Schulnummer\": \"005\"\n},\n{\n    \"Name1\": \"Schule An der Gete\",\n    \"Strasse\": \"An der Gete 103\",\n    \"PLZ\": 28211,\n    \"Ort\": \"Bremen\",\n    \"Schulnummer\": \"006\"\n},\n{\n    \"Name1\": \"Schule an der Alfred-Faust-Stra\u00dfe\",\n    \"Strasse\": \"Alfred-Faust-Str. 34\",\n    \"PLZ\": 28277,\n    \"Ort\": \"Bremen\",\n    \"Schulnummer\": \"007\"\n}\n]\n</code></pre>\n\n<p>I'm trying to load it with this code</p>\n\n<pre><code>import json\njsonfile = 'pathtomyfile'\nwith open(jsonfile) as data_file:    \n    data = json.load(data_file)\n</code></pre>\n\n<p>but I get the error:  <em>ValueError: No JSON object could be decoded</em>\n  I guess my JSON isn't valid somehow or i'm not handling the German characters correctly.  I just can't figure it out.   </p>\n"}, {"tags": ["python", "selenium", "xpath", "selenium-webdriver", "webdriver"], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 4, "last_activity_date": 1438809453, "creation_date": 1438809453, "answer_id": 31843007, "question_id": 31842954, "link": "https://stackoverflow.com/questions/31842954/cant-click-on-an-element-using-webdriver-in-python/31843007#31843007", "title": "Can&#39;t click on an element using webdriver in python", "body": "<p>Find it <em>by link text</em>:</p>\n\n<pre><code>driver.find_element_by_link_text(\"SYSTEM\")\n</code></pre>\n\n<p>You may need to <a href=\"http://selenium-python.readthedocs.org/en/latest/waits.html#waits\" rel=\"nofollow\"><em>wait for the element to be clickable</em></a> also:</p>\n\n<pre><code>from selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.wait import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\nwait = WebDriverWait(driver, 10)\nsystem = wait.until(EC.element_to_be_clickable((By.LINK_TEXT, \"SYSTEM\")))\nsystem.click()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1887, "user_id": 3999025, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f179f4542183c3253e22896da1a813be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu Zhang", "link": "https://stackoverflow.com/users/3999025/yu-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1438811181, "creation_date": 1438811181, "answer_id": 31843398, "question_id": 31842954, "link": "https://stackoverflow.com/questions/31842954/cant-click-on-an-element-using-webdriver-in-python/31843398#31843398", "title": "Can&#39;t click on an element using webdriver in python", "body": "<p>There are multiple ways that you can located an element using selenium and python. In your case, you could potentially use <strong>find_element_by_css_selector</strong> or <strong>find_element_by_xpath</strong>, your HTML code indentation is a bit hard to read, so I am assuming <strong>body</strong> encloses everthing and <strong>ul</strong> all <strong>li</strong> below it.\nI am using Chrome as my example, if you are using Firefox, it is natively supported by Selenium, which means you do not need to provide a Firefox path as I did for Chrome below. </p>\n\n<pre><code>chrome = webdriver.Chrome('PathToChromeDriver.exe')\nelement = chrome.find_element_by_xpath(\"//body//ul//li[@id='system']\")\n</code></pre>\n\n<p>Or alternatively, you can find your element by asking for the 7th li element under ui, this time, I am using Firefox in my example.</p>\n\n<pre><code>firefox = webdriver.Firefox()\nelement = firefox.find_element_by_xpath(\"//body//ul//li[7]\")\n</code></pre>\n\n<p>My personal favorite way to locate an element is via css selector:</p>\n\n<pre><code>firefox = webdriver.Firefox()\nelement = firefox.find_element_by_css_selector(\"li[id='system']\")\n</code></pre>\n\n<p>In case you have two elements that share the same IDs, e.g. id = 'system', you can use css selector to fine select your element, for example:</p>\n\n<pre><code>firefox = webdriver.Firefox()\nelement = firefox.find_element_by_css_selector(\"li[id='system'][style='right: 0px']\")\n</code></pre>\n\n<p>Basically, you can append as many attributes as you need to uniquely locate an element:</p>\n\n<pre><code>firefox = webdriver.Firefox()\nelement = firefox.find_element_by_css_selector(\"li[id='system'][style='right: 0px'][attribute3 = 'value'][attribute4 = 'value']\")\n</code></pre>\n\n<p>Below are two links you may find helpful:\n<a href=\"http://www.w3schools.com/xsl/xpath_syntax.asp\" rel=\"nofollow\">http://www.w3schools.com/xsl/xpath_syntax.asp</a>\n<a href=\"http://www.w3schools.com/cssref/css_selectors.asp\" rel=\"nofollow\">http://www.w3schools.com/cssref/css_selectors.asp</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6096815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e31f3bb601bf9645ce384615d5920d82?s=128&d=identicon&r=PG&f=1", "display_name": "aleja20.06", "link": "https://stackoverflow.com/users/6096815/aleja20-06"}, "is_accepted": false, "score": 0, "last_activity_date": 1459087693, "last_edit_date": 1459087693, "creation_date": 1459054036, "answer_id": 36243941, "question_id": 31842954, "link": "https://stackoverflow.com/questions/31842954/cant-click-on-an-element-using-webdriver-in-python/36243941#36243941", "title": "Can&#39;t click on an element using webdriver in python", "body": "<p>Please try:</p>\n\n<pre><code>driver = webdriver.Firefox();\n\ndriver.findElement(By.id(\"SYSTEM\")).click();\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 3685422, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100001710102289/picture?type=large", "display_name": "LearningNinja", "link": "https://stackoverflow.com/users/3685422/learningninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4270, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1489957479, "creation_date": 1438809297, "last_edit_date": 1489957479, "question_id": 31842954, "link": "https://stackoverflow.com/questions/31842954/cant-click-on-an-element-using-webdriver-in-python", "title": "Can&#39;t click on an element using webdriver in python", "body": "<p>I need help with click on an element using selenium webdriver in python.</p>\n\n<p>Here is the html code for reference:\nI am trying to click on an element named \"SYSTEM\"</p>\n\n<pre><code>&lt;body&gt;\n&lt;div id=\"toparea\"&gt;\n&lt;div id=\"logo\" style=\"top: 10px; z-index: 3\"&gt;\n&lt;div id=\"welcome\"&gt;\n&lt;div id=\"topmenu1\"&gt;\n&lt;ul&gt;\n&lt;li id=\"home\" class=\"selected\" style=\"right: 636px\"&gt;\n&lt;li id=\"incidents\" style=\"right: 530px\"&gt;\n&lt;li id=\"case\" style=\"right: 424px\"&gt;\n&lt;li id=\"capture\" style=\"right: 318px\"&gt;\n&lt;li id=\"policies\" style=\"right: 212px\"&gt;\n&lt;li id=\"classify\" style=\"right: 106px\"&gt;\n&lt;li id=\"system\" style=\"right: 0px\"&gt;\n&lt;a onclick=\"location.href='/imanager/ReShowMenuBar.do?selectedtab=system'\" title=\"SYSTEM\" target=\"mainFrame\" href=\"/devicemgr/ReSystemAdministration.do\"&gt;SYSTEM&lt;/a&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p></p>\n\n<p>I tried using:</p>\n\n<pre><code>driver.find_element_by_xpath(\"//*[@id='system']/a\")\n</code></pre>\n\n<p>tried finding the element using link_text, id but all in vain.</p>\n\n<p>I am also not sure if my xpath is correct, I am trying to learn.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "edited": false, "score": 0, "creation_date": 1438809417, "post_id": 31842896, "comment_id": 51607481, "body": "What error was it raising?"}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "reply_to_user": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "edited": false, "score": 0, "creation_date": 1438809526, "post_id": 31842896, "comment_id": 51607532, "body": "SyntaxError: Can&#39;t assign to function call. On the line <code>with f as open(...)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1438809844, "post_id": 31843062, "comment_id": 51607682, "body": "Awesome exactly what I needed, as for the instance.metadata_file part, what exactly is this?  Nevermind you seem to have removed in your edit"}, {"owner": {"reputation": 885, "user_id": 2568279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aj50J.jpg?s=128&g=1", "display_name": "Agust&#237;n Lado", "link": "https://stackoverflow.com/users/2568279/agust%c3%adn-lado"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1438809900, "post_id": 31843062, "comment_id": 51607711, "body": "My son was (is) hilariously distracting me and I accidentally posted reference code from work :P"}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1438809962, "post_id": 31843062, "comment_id": 51607743, "body": "Haha :)  So rather than instance.file.name I basically just use filename instead which I get via the os.path.basename method you described"}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1438810093, "post_id": 31843062, "comment_id": 51607814, "body": "Seems to be working now.  Unless you see anything else wrong, I think I am good.  There are no other steps I need to take to have this signal fire correct?"}, {"owner": {"reputation": 885, "user_id": 2568279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aj50J.jpg?s=128&g=1", "display_name": "Agust&#237;n Lado", "link": "https://stackoverflow.com/users/2568279/agust%c3%adn-lado"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1438810110, "post_id": 31843062, "comment_id": 51607821, "body": "Yeah, that seems to be the case. I was lazy and didn&#39;t check the documentation, but now I did and it states that <a href=\"https://docs.djangoproject.com/en/dev/ref/files/file/#django.core.files.File.name\" rel=\"nofollow noreferrer\"><code>File.name</code></a> returns the path from MEDIA_ROOT, not just the filename."}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1438810180, "post_id": 31843062, "comment_id": 51607852, "body": "Yes I see that now, I supposed I could just trim it from the last / onward, but your method seems better :)"}, {"owner": {"reputation": 885, "user_id": 2568279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aj50J.jpg?s=128&g=1", "display_name": "Agust&#237;n Lado", "link": "https://stackoverflow.com/users/2568279/agust%c3%adn-lado"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1438810307, "post_id": 31843062, "comment_id": 51607904, "body": "I imagine that&#39;s what basename does :P That should be enough. In fact, if you got the exception in the first case it means the signal triggered. Good luck!"}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1438810339, "post_id": 31843062, "comment_id": 51607914, "body": "Great :) Thanks for the follow up. Was a silly mistake I made, had been  using C# for too long Python was neglected.  But ended up answering a bunch more questions for me so thanks a ton!"}], "tags": [], "owner": {"reputation": 885, "user_id": 2568279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aj50J.jpg?s=128&g=1", "display_name": "Agust&#237;n Lado", "link": "https://stackoverflow.com/users/2568279/agust%c3%adn-lado"}, "is_accepted": true, "score": 2, "last_activity_date": 1438809681, "creation_date": 1438809681, "answer_id": 31843062, "question_id": 31842896, "link": "https://stackoverflow.com/questions/31842896/django-delete-and-move-uploaded-files-when-model-deleted/31843062#31843062", "title": "Django Delete and Move Uploaded Files when Model Deleted", "body": "<p>What error were you getting exactly? \"SyntaxError: can't assign to function call\"? Because the with syntax is wrong. You're trying to assign <code>f</code> to <code>open()</code>, when it's the other way around:</p>\n\n<pre><code>with open(settings.MEDIA_ROOT + '/uploads/Recycle/' + instance.file.name, 'w+') as f:\n# ...rest of the code\n</code></pre>\n\n<p>Try that change, and next time please post the Traceback to make debugging easier for us.</p>\n\n<p>As for the signal type: post_delete is fine. The instance you're getting is no longer on the DB but contains the info you need (the file).</p>\n\n<p>As for the question regarding <code>instance.file.name</code>, today I expected <code>.name</code> to return only the filename but it didn't. The way I got the filename was using <code>os.path.basename</code>. But in your case it's unnecessary</p>\n\n<pre><code>import os\n\nfilename = os.path.basename(instance.file.path)\n</code></pre>\n"}], "owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "accepted_answer_id": 31843062, "answer_count": 1, "score": 0, "last_activity_date": 1438809681, "creation_date": 1438809077, "last_edit_date": 1438809559, "question_id": 31842896, "link": "https://stackoverflow.com/questions/31842896/django-delete-and-move-uploaded-files-when-model-deleted", "title": "Django Delete and Move Uploaded Files when Model Deleted", "body": "<p>I have this code for when my model is deleted so that the files are deleted too.  I also want it to move the files to a folder only the admin can see right before they are deleted.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>@receiver(post_delete, sender=ClientUpload)\ndef clientupload_postdelete(sender, instance, **kwargs):\n    if instance.file:\n        #with f as open(settings.MEDIA_ROOT + '/uploads/Recycle/' + instance.file.name, 'w+'):\n        #   f.write(instance.file)\n        #   f.close()\n        #   logger = logging.getLogger(__name__)\n        #   logger.info(\"File %s moved to %s\" % (instance.file.name, settings.MEDIA_ROOT + '/uploads/Recycle'))\n        # Pass false so FileField doesn't save the model.\n        instance.file.delete(False)\n    else:\n        logger = logging.getLogger(__name__)\n        logger.warning(\"Failed to find file %s for deletion.\" % instance.file.name)\n</code></pre>\n\n<p>The commented out parts are commented out because they were raising this error:<br>\nSyntaxError: Can't assign to function call. On the line <code>with f as open(...)</code>.  I'm not sure why, but that is supposed to be the part where it saves the file into another directory before deleting it.  What am I doing wrong here?  How can I write the file to another directory before I delete it?  </p>\n\n<p>Also is postdelete correct here or should I use predelete?</p>\n\n<p>Finally, is instance.file.name the correct way to get the file's name in this situation?  Or will just instance.file do the job?  This is the first signal I've done so I am unsure and even with the documentation I'm having trouble getting it to work.</p>\n\n<p>A small example would work wonders, thanks in advance</p>\n"}, {"tags": ["python", "matplotlib", "boxplot", "axis-labels"], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 8345628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfmvn.jpg?s=128&g=1", "display_name": "Lith", "link": "https://stackoverflow.com/users/8345628/lith"}, "edited": false, "score": 0, "creation_date": 1585127512, "post_id": 31843106, "comment_id": 107651551, "body": "Note that, as of version 3.2.1 of Matplotlib, you can specify xlabels directly through <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.boxplot.html#matplotlib-pyplot-boxplot\" rel=\"nofollow noreferrer\">boxplot</a> argument <code>labels</code>, which must be a list of length compatible with the dimensions of your dataset."}], "tags": [], "owner": {"reputation": 888, "user_id": 5175071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/383b3ea578405046feea7e132714f0e9?s=128&d=identicon&r=PG", "display_name": "The Brofessor", "link": "https://stackoverflow.com/users/5175071/the-brofessor"}, "is_accepted": true, "score": 12, "last_activity_date": 1438810584, "last_edit_date": 1438810584, "creation_date": 1438809885, "answer_id": 31843106, "question_id": 31842892, "link": "https://stackoverflow.com/questions/31842892/how-to-add-labels-to-a-boxplot-figure-pylab/31843106#31843106", "title": "How to add labels to a boxplot figure (pylab)", "body": "<p>Try this:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom pylab import *\n\n# fake up some data\nspread= rand(50) * 100\ncenter = ones(25) * 50\nflier_high = rand(10) * 100 + 100\nflier_low = rand(10) * -100\ndata =concatenate((spread, center, flier_high, flier_low), 0)\n\n# figure related code\nfig = plt.figure()\nfig.suptitle('bold figure suptitle', fontsize=14, fontweight='bold')\n\nax = fig.add_subplot(111)\nax.boxplot(data)\n\nax.set_title('axes title')\nax.set_xlabel('xlabel')\nax.set_ylabel('ylabel')\n\nplt.show()\n</code></pre>\n\n<p>EDIT: Picture</p>\n\n<p><a href=\"https://i.stack.imgur.com/gfuZA.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gfuZA.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 4442, "user_id": 1678467, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5f1e2e084cb0946c2c159ceaee9f43a0?s=128&d=identicon&r=PG", "display_name": "tnknepp", "link": "https://stackoverflow.com/users/1678467/tnknepp"}, "is_accepted": false, "score": 3, "last_activity_date": 1438810011, "creation_date": 1438810011, "answer_id": 31843135, "question_id": 31842892, "link": "https://stackoverflow.com/questions/31842892/how-to-add-labels-to-a-boxplot-figure-pylab/31843135#31843135", "title": "How to add labels to a boxplot figure (pylab)", "body": "<p>I would recommend explicitly defining your figure window and plot.  </p>\n\n<pre><code>from pylab import *\nimport numpy as np\n\nfig = figure(figsize=(4,4))  # define the figure window\nax  = fig.add_subplot(111)   # define the axis\n\nax.boxplot(raw_data,1)       # make your boxplot\n\n# add axis texts\nax.set_xlabel('X-label', fontsize=8)\nax.set_ylabel('Y-label', fontsize=8)\nax.set_title('I AM BOXPLOT', fontsize=10)\n\n# format axes\nax.set_xlim([0,100])\nax.set_xticks( np.arange(0,101,10), minor=False)\nax.set_xticks( np.arange(0,100,5),  minor=True)\n\n# if you wish to explicitly set tick labels\nax.set_xticklabels( np.arange(0,101,10), fontsize=8)\n\n# if you wish to explicitly set actual tick parameters\nax.tick_params(axis='both',which='major',direction='in',length=4,width=2,labelsize=8)\nax.tick_params(axis='both',which='minor',direction='in',length=2,width=1.5)  \n\n# and so on...you can do the same for the y-axis.  \n# You have quite a lot of control over the axes this way.\n</code></pre>\n\n<p>another tip, when saving set bbox_inches to 'tight' so you don't cut off your labels</p>\n\n<pre><code>savefig('fig_title.jpg', bbox_inches='tight', dpi=500)\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 5066848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/feba9fe2fff14bbd3b74c33821d31352?s=128&d=identicon&r=PG&f=1", "display_name": "mkpappu", "link": "https://stackoverflow.com/users/5066848/mkpappu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39458, "favorite_count": 0, "accepted_answer_id": 31843106, "answer_count": 2, "score": 5, "last_activity_date": 1438810584, "creation_date": 1438809059, "question_id": 31842892, "link": "https://stackoverflow.com/questions/31842892/how-to-add-labels-to-a-boxplot-figure-pylab", "title": "How to add labels to a boxplot figure (pylab)", "body": "<p>This is a pretty basic question I'm sure but I cannot seem to find the right code.\nThere is my code for the boxplot I am creating. I would like to label the axes and have a title.</p>\n\n<pre><code>from pylab import *\nimport numpy\nraw_data = list(numpy.genfromtxt(filename, delimiter=','))\nprint raw_data\nfigure()\nboxplot(raw_data,1)\nsavefig('testfigure.pdf')\n</code></pre>\n\n<p>I have tried <code>pylab.xlabel('x')</code> and <code>plt.xlable('x')</code> but those do not work...? Do they not work for boxplots or have I just got it wrong about those lines working?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 4442, "user_id": 1678467, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5f1e2e084cb0946c2c159ceaee9f43a0?s=128&d=identicon&r=PG", "display_name": "tnknepp", "link": "https://stackoverflow.com/users/1678467/tnknepp"}, "edited": false, "score": 0, "creation_date": 1438809438, "post_id": 31842968, "comment_id": 51607487, "body": "beat me to it...admittedly better than my with to_dict though"}, {"owner": {"reputation": 449, "user_id": 3590113, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/100008167867163/picture?type=large", "display_name": "user3590113", "link": "https://stackoverflow.com/users/3590113/user3590113"}, "edited": false, "score": 0, "creation_date": 1438825859, "post_id": 31842968, "comment_id": 51612359, "body": "The goal is to do with without explicitly defining column names. The data sample i posted was just a piece of a much larger set. There are something like 45 columns. With this in mind is there another solution? or will your solution still work?"}, {"owner": {"reputation": 661, "user_id": 5171073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DINumKQGaXk/AAAAAAAAAAI/AAAAAAAAAjI/FKfUWOj6H9Q/photo.jpg?sz=128", "display_name": "Cody Braun", "link": "https://stackoverflow.com/users/5171073/cody-braun"}, "edited": false, "score": 0, "creation_date": 1438836170, "post_id": 31842968, "comment_id": 51614901, "body": "Yeah, I think so- to_dict uses the column names as dictionary keys by default so that should be exactly what it sounds like you need"}], "tags": [], "owner": {"reputation": 661, "user_id": 5171073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DINumKQGaXk/AAAAAAAAAAI/AAAAAAAAAjI/FKfUWOj6H9Q/photo.jpg?sz=128", "display_name": "Cody Braun", "link": "https://stackoverflow.com/users/5171073/cody-braun"}, "is_accepted": false, "score": 2, "last_activity_date": 1438809337, "creation_date": 1438809337, "answer_id": 31842968, "question_id": 31842867, "link": "https://stackoverflow.com/questions/31842867/iterating-through-a-pandas-dataframe/31842968#31842968", "title": "Iterating through a Pandas Dataframe", "body": "<p>You probably don't really want to iterate, as pandas gives you much more efficient ways of doing most things. The first step will be to grab all the rows above the threshold. You could do that like so:</p>\n\n<pre><code>df = df[df[\"APPLE/MACINTOSH\"] &gt; 0.01]\n</code></pre>\n\n<p>Then you need to convert that to a dictionary using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_dict.html\" rel=\"nofollow\">to_dict</a> </p>\n"}, {"comments": [{"owner": {"reputation": 449, "user_id": 3590113, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/100008167867163/picture?type=large", "display_name": "user3590113", "link": "https://stackoverflow.com/users/3590113/user3590113"}, "edited": false, "score": 0, "creation_date": 1438857966, "post_id": 31849130, "comment_id": 51626990, "body": "This looks great. Exactly what i wanted"}], "tags": [], "owner": {"reputation": 1548, "user_id": 3631440, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uC6XS.jpg?s=128&g=1", "display_name": "chris-sc", "link": "https://stackoverflow.com/users/3631440/chris-sc"}, "is_accepted": true, "score": 1, "last_activity_date": 1438845290, "creation_date": 1438845290, "answer_id": 31849130, "question_id": 31842867, "link": "https://stackoverflow.com/questions/31842867/iterating-through-a-pandas-dataframe/31849130#31849130", "title": "Iterating through a Pandas Dataframe", "body": "<p>The following example will give you the desired output and show some of the things you can do to manipulate the dataframe as well, without looping over each item.</p>\n\n<pre><code>import pandas as pd\npdf = pd.DataFrame.from_dict({'APP': [0.013, 0.42, -0.23, 0.06],\n                              'BOOKS': [-1.3, 0.04, 0.54, 0.01],\n                              'CN': [0.012, -0.03, 0.003, 0.5]})\nabs_pdf = pdf.abs()\nvalue = 0.01\nsel = abs_pdf[abs_pdf &gt; value]\n\nresults = list()\nby_col = sel.T\nfor col in by_col:\n    results.append(by_col[col].dropna().to_dict())\nprint(results)\n</code></pre>\n\n<p>This will yield:</p>\n\n<pre><code>[{'APP': 0.012999999999999999, 'BOOKS': 1.3, 'CN': 0.012},\n {'APP': 0.41999999999999998,\n  'BOOKS': 0.040000000000000001,\n  'CN': 0.029999999999999999},\n {'APP': 0.23000000000000001, 'BOOKS': 0.54000000000000004},\n {'APP': 0.059999999999999998, 'CN': 0.5}]\n</code></pre>\n\n<p>You should be able to change the code if you want different outputs.</p>\n"}], "owner": {"reputation": 449, "user_id": 3590113, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/100008167867163/picture?type=large", "display_name": "user3590113", "link": "https://stackoverflow.com/users/3590113/user3590113"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 31849130, "answer_count": 2, "score": 0, "last_activity_date": 1438857709, "creation_date": 1438808950, "last_edit_date": 1438857709, "question_id": 31842867, "link": "https://stackoverflow.com/questions/31842867/iterating-through-a-pandas-dataframe", "title": "Iterating through a Pandas Dataframe", "body": "<p>I am trying to figure out how to iterate through each value in this pandas DataFrame to see if it's absolute value is higher than some defined threshold ex:.01 >abs(value). </p>\n\n<pre><code>  APP ENABLED DEVICES  APPLE/MACINTOSH      CN  APPLECARE  BARGAIN BOOKS\n0             0.017685                 0.000123   0.009362       0.039916\n1             0.014884                 0.009920   0.004747      -0.000653\n2            -0.044820                -0.054319   0.001925      -0.179533\n3            -0.014449                 0.193068  -0.006028      -0.026057\n4             0.047403                -0.046199  -0.047391       0.060473\n</code></pre>\n\n<p>I need the final output to look something like this</p>\n\n<pre><code>[{APP ENABLED DEVICES:0.017685,BARGAIN BOOKS:0.039916},\n {APP ENABLED DEVICES:0.014884},\n ...]\n</code></pre>\n\n<p>So it would look like a list of dictionaries, <strong>with each row as a separate subsection</strong>. Only key value pairs, with a value higher than the defined threshold should be included in the list.  Is this something that is possible? If so can somebody please walk me through how this could be done?\nSorry, python is still relatively new for me...\nThank you</p>\n\n<p>P.S this is just a small part of the dataset. The total number of columns in the full dataframe is much larger so explicitly naming individual columns is unworkable.</p>\n"}, {"tags": ["python", "regex", "bash", "perl", "for-loop"], "comments": [{"owner": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "reply_to_user": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1438809308, "post_id": 31842841, "comment_id": 51607425, "body": "I&#39;m sorry but don&#39;t have all of my tryouts with me. Most of them are left at office. For example here is one I tried with php"}, {"owner": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "reply_to_user": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1438809668, "post_id": 31842841, "comment_id": 51607599, "body": "$re = &quot;/^Table.*$(\\\\n\\\\s.*(failed\\\\s1\\\\.$){0,1})*/m&quot;;   preg_match_all($re,$st,$out);  print_r($out);  ?&gt;"}, {"owner": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "reply_to_user": {"reputation": 68627, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1438844583, "post_id": 31842841, "comment_id": 51618432, "body": "@Cyrus ok mate, done. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "edited": false, "score": 0, "creation_date": 1438846153, "post_id": 31843805, "comment_id": 51619325, "body": "Thanks for the answer. I tried executing first part of your code by saving it is a perl file but having syntax error when I try it.    <code>.&#47;test.pl &lt; logfile </code>   <code>.&#47;test.pl: line 1: syntax error near unexpected token </code>(&#39; `"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "edited": false, "score": 0, "creation_date": 1438868265, "post_id": 31843805, "comment_id": 51634060, "body": "Looks like you try to execute your Perl script using your shell. (That message doesn&#39;t come from Perl.) Do you have a proper shebang line?"}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1438868510, "last_edit_date": 1438868510, "creation_date": 1438813305, "answer_id": 31843805, "question_id": 31842841, "link": "https://stackoverflow.com/questions/31842841/script-regex-for-log-file-editing/31843805#31843805", "title": "Script/regex for log file editing", "body": "<p>Break the file into groups of lines, then it becomes trivial to extract the data you want from the group. The following shows how to break the file into the groups you want.</p>\n\n<p>When you have the whole file in one variable:</p>\n\n<pre><code>while ($file =~ /\\G ( \\S[^\\n]*\\n (?:(?:[^\\n\\S][^\\n]*)?\\n)* )/xg) {\n   process($1);\n}\n</code></pre>\n\n<p>When reading a line at a time:</p>\n\n<pre><code>my $buf;\nwhile (&lt;&gt;) {\n   if (/^\\S/) {\n      process($buf) if length($buf);\n      $buf = '';\n   }\n\n   $buf .= $_;\n}\n\nprocess($buf) if length($buf);\n</code></pre>\n\n<p><code>process</code> is quite trivial.</p>\n\n<pre><code>sub process {\n   for ($_[0]) {\n      print\n         if /^Table /\n         &amp;&amp; /, failed (\\d+)\\.$/m\n         &amp;&amp; $1 &gt; 0;\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "edited": false, "score": 0, "creation_date": 1439196134, "post_id": 31856414, "comment_id": 51743251, "body": "Thank you very much for your time and help! One last question. How can I edit this code in order to point a file to search from and forward my output to a different file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user447688"}, "reply_to_user": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "edited": false, "score": 0, "creation_date": 1439202153, "post_id": 31856414, "comment_id": 51746791, "body": "@OkanAkca: edited for file I/O"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user447688"}, "is_accepted": true, "score": 1, "last_activity_date": 1439202116, "last_edit_date": 1439202116, "creation_date": 1438865767, "answer_id": 31856414, "question_id": 31842841, "link": "https://stackoverflow.com/questions/31842841/script-regex-for-log-file-editing/31856414#31856414", "title": "Script/regex for log file editing", "body": "<p>Python-- this isn't the most efficient, but hopefully the algorithm is clear, and it works:</p>\n\n<pre><code>text = '''\nTable TRKGRP1: New table control.\n      TRKGRP1: 1000 tuples checked. Tuple checking still in progress...\n      Completed tuple checking.\n      SUMMARY: Tbl TRKGRP1: tuples checked 1297, passed 1297, failed 0.\nTable TOLLTRKS: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl TOLLTRKS: tuples checked 3, passed 3, failed 1.\nTable BRANDOPT: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl BRANDOPT: tuples checked 0, passed 0, failed 0.\nTable C7UPTMR: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl C7UPTMR: tuples checked 4, passed 4, failed 3.\nTable TOPSCOIN: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl TOPSCOIN: tuples checked 0, passed 0, failed 2.\n'''\nlines = text.split('\\n')\n</code></pre>\n\n<p>or, from a file</p>\n\n<pre><code>with open('input.txt') as f:\n    lines = f.readlines()\nf.close()\n</code></pre>\n\n<p>then</p>\n\n<pre><code>f = open(\"output.txt\", 'w')\nbuf = []\nshow = False\nfor line in lines:\n    if line.startswith('Table'):\n        if show:\n            f.writelines(buf)\n        buf = []\n        show = True\n    buf.append(line)\n    if line.find('failed 0') &gt;= 0:\n        show = False\nif show:\n    f.writelines(buf)\nf.close()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5195640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S09N9H7u90Y/AAAAAAAAAAI/AAAAAAAAAKI/N2UBsf16fAE/photo.jpg?sz=128", "display_name": "Okan Akca", "link": "https://stackoverflow.com/users/5195640/okan-akca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1438870580, "accepted_answer_id": 31856414, "answer_count": 2, "score": 0, "last_activity_date": 1439202116, "creation_date": 1438808833, "last_edit_date": 1438862322, "question_id": 31842841, "link": "https://stackoverflow.com/questions/31842841/script-regex-for-log-file-editing", "closed_reason": "Not suitable for this site", "title": "Script/regex for log file editing", "body": "<p>I've been trying to write a code for handling the various log files I'm dealing with everyday. I tried writing with bash, perl and python but so far no so good..</p>\n\n<p>Here is a sample of the log:</p>\n\n<pre><code>Table TRKGRP1: New table control.\n      TRKGRP1: 1000 tuples checked. Tuple checking still in progress...\n      Completed tuple checking.\n      SUMMARY: Tbl TRKGRP1: tuples checked 1297, passed 1297, failed 0.\nTable TOLLTRKS: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl TOLLTRKS: tuples checked 3, passed 3, failed 1.\nTable BRANDOPT: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl BRANDOPT: tuples checked 0, passed 0, failed 0.\nTable C7UPTMR: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl C7UPTMR: tuples checked 4, passed 4, failed 3.\nTable TOPSCOIN: New table control.\n      Completed tuple checking.\n      SUMMARY: Tbl TOPSCOIN: tuples checked 0, passed 0, failed 2.\n</code></pre>\n\n<p>What I need is the part of the text from \"Table\" to \"failed 1/2/3\" I only need to capture the parts that end with failed 1, failed 2 and failed 3. failed 0 is not needed. Keep in mind that these logs sometimes come longer or shorter, not always 3 lines.</p>\n\n<p>Here is the expected output:</p>\n\n<pre>\nTable TOLLTRKS: New table control.\nCompleted tuple checking.\nSUMMARY: Tbl TOLLTRKS: tuples checked 3, passed 3, failed 1.  \nTable C7UPTMR: New table control.\nCompleted tuple checking.\nSUMMARY: Tbl C7UPTMR: tuples checked 4, passed 4, failed 3.  \nTable TOPSCOIN: New table control.\nCompleted tuple checking.\nSUMMARY: Tbl TOPSCOIN: tuples checked 0, passed 0, failed 2.\n</pre>\n\n<p>I would really appreciate it if you guys could give me a hand.</p>\n"}, {"tags": ["python", "for-loop", "while-loop", "pyyaml"], "comments": [{"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 3, "creation_date": 1438809149, "post_id": 31842824, "comment_id": 51607349, "body": "have you tried <code>for x in dohicky:</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3562, "user_id": 2272450, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/qFuaM.jpg?s=128&g=1", "display_name": "Atomiklan", "link": "https://stackoverflow.com/users/2272450/atomiklan"}, "edited": false, "score": 0, "creation_date": 1438813180, "post_id": 31843650, "comment_id": 51609047, "body": "Perfect, excellent thank you! Now I just need to read up on getting it into objects."}], "tags": [], "owner": {"reputation": 847, "user_id": 2492792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FOjjT.jpg?s=128&g=1", "display_name": "Alexander Fedotov", "link": "https://stackoverflow.com/users/2492792/alexander-fedotov"}, "is_accepted": true, "score": 4, "last_activity_date": 1438812363, "last_edit_date": 1495541641, "creation_date": 1438812363, "answer_id": 31843650, "question_id": 31842824, "link": "https://stackoverflow.com/questions/31842824/conditional-python-for-loop-based-on-yaml-data/31843650#31843650", "title": "Conditional Python for loop based on YAML data", "body": "<p>You can use the following code to iterate through each numbered \"id\" under \"dohicky\":</p>\n\n<pre><code>for dohicky_id in dohicky['dohicky']:\n    stuff = dohicky['dohicky'][dohicky_id]['Stuff']\n</code></pre>\n\n<p>In this case, the stuff is a list of Data dicts. If you can't, for whatever reasons, to work with the dictionary, and you want to convert the Data dicts into objects, you can do this by looking the following question: <a href=\"https://stackoverflow.com/questions/1305532/convert-python-dict-to-object\">Convert Python dict to object?</a></p>\n"}], "owner": {"reputation": 3562, "user_id": 2272450, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/qFuaM.jpg?s=128&g=1", "display_name": "Atomiklan", "link": "https://stackoverflow.com/users/2272450/atomiklan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8749, "favorite_count": 0, "accepted_answer_id": 31843650, "answer_count": 1, "score": 2, "last_activity_date": 1438812363, "creation_date": 1438808750, "last_edit_date": 1438810471, "question_id": 31842824, "link": "https://stackoverflow.com/questions/31842824/conditional-python-for-loop-based-on-yaml-data", "title": "Conditional Python for loop based on YAML data", "body": "<p>I am new to Python so please bear with me. I am trying to figure out how to loop through a set of values in a YAML file. The file is parsed using PyYAML and then would need to be fed into the loop. Here is some YAML for example:</p>\n\n<p>dohicky.yml</p>\n\n<pre><code>---\n#Example file\ndohicky:\n  \"1\":\n    Stuff:\n      - Data\n      - Data\n    Morestuff:\n      - Data\n      - Data\n  \"2\":\n    Stuff:\n      - Data\n      - Data\n    Morestuff:\n      - Data\n      - Data\n  \"n\":\n    - Etc\n</code></pre>\n\n<p>First, I am pulling the contents of the YAML out.</p>\n\n<pre><code>import yaml\nf = open('dohicky.yml')\ndohicky = yaml.safe_load(f)\nf.close()\n</code></pre>\n\n<p>Now I just need either a for loop or a while loop to iterate through each numbered \"id\" under \"dohicky\".</p>\n\n<pre><code>for x in xrange(1, 2):\n</code></pre>\n\n<p>So obviously this would work, but is staticly defined for only 2 elements. Not sure how for example:</p>\n\n<pre><code>\"do while\" id = dohicky[\"dohicky\"][\"x\"] is true. #Not code, just concept!\n</code></pre>\n\n<p>The other problem I am immediately running into is how to then create an object inside this loop. For example:</p>\n\n<pre><code>id(x) = dohicky(Pass other info from YAML to class) #Not code, just concept!\n</code></pre>\n\n<p>Unfortunately I am not familiar enough with Python yet (withPyYAML) to understand the syntax. Any help is MUCH appreciated!</p>\n\n<p><strong>* UPDATE *</strong>\nThis is kinda sudo code, but you should understand what I am trying to do at least.</p>\n\n<pre><code>import yaml\nf = open('dohicky.yml')\ndohicky = yaml.safe_load(f)\nf.close()\n\nfor x in dohicky[\"dohicky\"][\"x\"]\n        test = dohicky[\"dohicky\"][\"1\"][\"Stuff\"]\n        print test\n</code></pre>\n\n<p>In this test, I am just printing the output of \"Stuff\", but in reality, I need to create an object using that data.</p>\n"}, {"tags": ["python", "excel", "pandas", "xlwt"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4186445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5dd4a279744d35ebac8d95099d0944d0?s=128&d=identicon&r=PG&f=1", "display_name": "icomefromchaos", "link": "https://stackoverflow.com/users/4186445/icomefromchaos"}, "edited": false, "score": 0, "creation_date": 1438809338, "post_id": 31842901, "comment_id": 51607441, "body": "I get these excel documents everyday via email, and i&#39;m looking for a way to automate this process. I haven&#39;t picked a database yet. But i&#39;m leaning towards MongoDB."}, {"owner": {"reputation": 79, "user_id": 3485403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d992b235f7170cf74f5a921b7eae907?s=128&d=identicon&r=PG&f=1", "display_name": "Peadar", "link": "https://stackoverflow.com/users/3485403/peadar"}, "reply_to_user": {"reputation": 39, "user_id": 4186445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5dd4a279744d35ebac8d95099d0944d0?s=128&d=identicon&r=PG&f=1", "display_name": "icomefromchaos", "link": "https://stackoverflow.com/users/4186445/icomefromchaos"}, "edited": false, "score": 0, "creation_date": 1438809545, "post_id": 31842901, "comment_id": 51607541, "body": "Depending on how you want to represent the data in the database, and what it&#39;s eventually going to be used for, you could simply make a new collection in each database for each excel file."}, {"owner": {"reputation": 39, "user_id": 4186445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5dd4a279744d35ebac8d95099d0944d0?s=128&d=identicon&r=PG&f=1", "display_name": "icomefromchaos", "link": "https://stackoverflow.com/users/4186445/icomefromchaos"}, "edited": false, "score": 0, "creation_date": 1438809754, "post_id": 31842901, "comment_id": 51607638, "body": "The data that is contained in the excel documents is fault codes from heavy and medium duty trucks. I&#39;m definitely wanting it to be a relational data base."}, {"owner": {"reputation": 79, "user_id": 3485403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d992b235f7170cf74f5a921b7eae907?s=128&d=identicon&r=PG&f=1", "display_name": "Peadar", "link": "https://stackoverflow.com/users/3485403/peadar"}, "reply_to_user": {"reputation": 39, "user_id": 4186445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5dd4a279744d35ebac8d95099d0944d0?s=128&d=identicon&r=PG&f=1", "display_name": "icomefromchaos", "link": "https://stackoverflow.com/users/4186445/icomefromchaos"}, "edited": false, "score": 0, "creation_date": 1438810055, "post_id": 31842901, "comment_id": 51607789, "body": "In that case MongoDB is probably not going to be a good choice- by design it&#39;s a document-orientated rather than a relational data store."}, {"owner": {"reputation": 39, "user_id": 4186445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5dd4a279744d35ebac8d95099d0944d0?s=128&d=identicon&r=PG&f=1", "display_name": "icomefromchaos", "link": "https://stackoverflow.com/users/4186445/icomefromchaos"}, "edited": false, "score": 0, "creation_date": 1438810492, "post_id": 31842901, "comment_id": 51607976, "body": "Any recommendations to a db that would allow me to dump a few thousand excel documents and then create join queries to the VIN column?"}, {"owner": {"reputation": 79, "user_id": 3485403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d992b235f7170cf74f5a921b7eae907?s=128&d=identicon&r=PG&f=1", "display_name": "Peadar", "link": "https://stackoverflow.com/users/3485403/peadar"}, "reply_to_user": {"reputation": 39, "user_id": 4186445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5dd4a279744d35ebac8d95099d0944d0?s=128&d=identicon&r=PG&f=1", "display_name": "icomefromchaos", "link": "https://stackoverflow.com/users/4186445/icomefromchaos"}, "edited": false, "score": 0, "creation_date": 1438894056, "post_id": 31842901, "comment_id": 51650171, "body": "MySQL or PostgreSQL would probably be a good starting point, but you will need to set up a suitable table structure."}], "tags": [], "owner": {"reputation": 79, "user_id": 3485403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d992b235f7170cf74f5a921b7eae907?s=128&d=identicon&r=PG&f=1", "display_name": "Peadar", "link": "https://stackoverflow.com/users/3485403/peadar"}, "is_accepted": false, "score": 0, "last_activity_date": 1438809102, "creation_date": 1438809102, "answer_id": 31842901, "question_id": 31842810, "link": "https://stackoverflow.com/questions/31842810/python-merge-excel-documents-with-dynamic-columns/31842901#31842901", "title": "Python merge excel documents with dynamic columns", "body": "<p>If a large proportion of them are similar, and this is a one-off operation it may be worth your while coding the solution for the majority and handling the other documents (or groups of them if they are similar) separately. If using Python to do this you could simply build a dynamic query where the columns that are present in a given excel sheet are built into the INSERT statements. Of course, this assumes that your database table allows for NULLs or that a default value is present on the columns that aren't in a given document.</p>\n"}], "owner": {"reputation": 39, "user_id": 4186445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5dd4a279744d35ebac8d95099d0944d0?s=128&d=identicon&r=PG&f=1", "display_name": "icomefromchaos", "link": "https://stackoverflow.com/users/4186445/icomefromchaos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438809705, "creation_date": 1438808699, "question_id": 31842810, "link": "https://stackoverflow.com/questions/31842810/python-merge-excel-documents-with-dynamic-columns", "title": "Python merge excel documents with dynamic columns", "body": "<p>I have several thousand excel documents. All of these documents are 95% the same in terms of column headings. However, since they are not 100% identical, I cannot simply merge them together and upload it into a database without messing up the data. </p>\n\n<p>Would anyone happen to have a library or an example that they've ran into that would help? </p>\n"}, {"tags": ["python", "pyserial", "beagleboneblack", "uart", "baud-rate"], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 2573827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93b901bba5510020f24a4fea2140d5e?s=128&d=identicon&r=PG", "display_name": "Prashant Chikhalkar", "link": "https://stackoverflow.com/users/2573827/prashant-chikhalkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1439113429, "creation_date": 1439113429, "answer_id": 31902876, "question_id": 31842785, "link": "https://stackoverflow.com/questions/31842785/maximum-beaglebone-black-uart-baud/31902876#31902876", "title": "Maximum Beaglebone Black UART baud?", "body": "<p>The BBB reference manual does not contain any information on Baud Rate for UART but for serial communication I usually prefer using value of <strong>BAUDRATE = 115200</strong>, which works in most of the cases without any issues. </p>\n"}, {"tags": [], "owner": {"reputation": 957, "user_id": 4737610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3f9188a1bec6ed7475e1b9dde7f45d?s=128&d=identicon&r=PG&f=1", "display_name": "S.I.J", "link": "https://stackoverflow.com/users/4737610/s-i-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1439967906, "creation_date": 1439967906, "answer_id": 32088636, "question_id": 31842785, "link": "https://stackoverflow.com/questions/31842785/maximum-beaglebone-black-uart-baud/32088636#32088636", "title": "Maximum Beaglebone Black UART baud?", "body": "<p>You can check it manually by connecting your UART port of BBB with minicom. For this to work, just short the Tx and Rx of the UART. Then just open minicom using </p>\n\n<pre><code>$ minicom -s\n</code></pre>\n\n<p>and set the baud different rates and see if it works.\n(Press any key and if you see the character then you know that baud rate is working)</p>\n"}, {"tags": [], "owner": {"reputation": 241, "user_id": 5527382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f9e9e844ae401903171e1dc334c6a6?s=128&d=identicon&r=PG", "display_name": "Alex Hiam", "link": "https://stackoverflow.com/users/5527382/alex-hiam"}, "is_accepted": true, "score": 6, "last_activity_date": 1446748168, "creation_date": 1446748168, "answer_id": 33552144, "question_id": 31842785, "link": "https://stackoverflow.com/questions/31842785/maximum-beaglebone-black-uart-baud/33552144#33552144", "title": "Maximum Beaglebone Black UART baud?", "body": "<p>The AM335x technical reference manual (TI document spruh73) gives the baud rate limits for the UART sub-system in the UART section (section 19.1.1, page 4208 in version spruh73l):</p>\n\n<blockquote>\n  <ul>\n  <li>Baud rate from 300 bps up to 3.6864 Mbps</li>\n  </ul>\n</blockquote>\n\n<p>The UART modules each have a 48MHz clock to generate their timing. They can be configured in one of two modes: UART 16x and UART 13x, in which that clock is divided by 16 and 13, respectively. There is then a configured 16-bit divisor to generate the actual baud rate from that clock. So for 300 bps it would be UART 16x and a divisor of 10000, or <code>48MHz / 16 / 1000 = 300 bps</code>. </p>\n\n<p>When you tell the <code>omap-serial</code> kernel driver (that's the driver used for UARTs on the BeagleBone), it calculates the mode and divisor that best approximates the rate you want. The actual rate you'll get is limited by the way it's generated - for example if you asked for an arbitrary baud of 2998 bps, I suppose you'd actually get 2997.003 bps, because <code>48MHz / 16 / 1001 = 2997.003</code> is closer to 2998 than <code>48 MHz / 16 / 1000 = 3000</code>.</p>\n\n<p>So the UART modules can certainly generate all the standard baud rates, as well as a large range of arbitrary ones (you'd have to actually do the math to see how close it can get). On Linux based systems, PySerial is just sending along the baud you tell it to the kernel driver through an ioctl call, so it won't limit you either.</p>\n\n<p><strong>Note</strong>: I just tested sending data on from the BeagleBone Black at 200 bps and it worked fine, but it doesn't generate 110 bps (the next lower standard baud rate below 300 bps), so the listed limits are really the lowest and highest <em>standard</em> rates it can generate. </p>\n"}], "owner": {"reputation": 65, "user_id": 5099113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26149c43ca62e2ea2768abc51c68d05?s=128&d=identicon&r=PG&f=1", "display_name": "InvictusRex28", "link": "https://stackoverflow.com/users/5099113/invictusrex28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4540, "favorite_count": 1, "accepted_answer_id": 33552144, "answer_count": 3, "score": 5, "last_activity_date": 1446748168, "creation_date": 1438808621, "last_edit_date": 1438881685, "question_id": 31842785, "link": "https://stackoverflow.com/questions/31842785/maximum-beaglebone-black-uart-baud", "title": "Maximum Beaglebone Black UART baud?", "body": "<p>I have been looking around for UART baud rates supported by the Beaglebone Black (BB). I can't find it in the BB system reference manual or the datasheet for the sitara processor itself. I am using pyserial and the Adafruit BBIO library to communicate over UART.</p>\n\n<p>Does this support any value within reason or is it more standard (9600, 115200, etc.)?</p>\n\n<p>Thanks for any help.</p>\n\n<p>-UPDATE-\nIt is related to the baud rates supported by PySerial. This gives a list of potential baud rates, but not specific ones that will or will not work with specific hardware.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1913, "user_id": 3509554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2ed608a1c5a6b018efc70e255ed888d0?s=128&d=identicon&r=PG&f=1", "display_name": "cdvv7788", "link": "https://stackoverflow.com/users/3509554/cdvv7788"}, "edited": false, "score": 0, "creation_date": 1438808663, "post_id": 31842737, "comment_id": 51607114, "body": "Check that {{word.file_position}} is actually rendering something. By default it won&#39;t if the variable can&#39;t be found"}, {"owner": {"reputation": 9, "user_id": 5108605, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Wtv1BZXzYA/AAAAAAAAAAI/AAAAAAAAADM/ittFbY5gQOs/photo.jpg?sz=128", "display_name": "Vickie Li", "link": "https://stackoverflow.com/users/5108605/vickie-li"}, "reply_to_user": {"reputation": 1913, "user_id": 3509554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2ed608a1c5a6b018efc70e255ed888d0?s=128&d=identicon&r=PG&f=1", "display_name": "cdvv7788", "link": "https://stackoverflow.com/users/3509554/cdvv7788"}, "edited": false, "score": 0, "creation_date": 1438809269, "post_id": 31842737, "comment_id": 51607404, "body": "It is passing in the file_position correctly. When clicking on the link, I was able to successfully go to /correction/A07686+dwdID19, with the form displaying correctly and all the prefills filled in. But when I try to submit the form, the form does not save and the page redirects to /correction/."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5108605, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Wtv1BZXzYA/AAAAAAAAAAI/AAAAAAAAADM/ittFbY5gQOs/photo.jpg?sz=128", "display_name": "Vickie Li", "link": "https://stackoverflow.com/users/5108605/vickie-li"}, "edited": false, "score": 0, "creation_date": 1438961786, "post_id": 31843028, "comment_id": 51680639, "body": "Thanks so much, that helped a lot!"}], "tags": [], "owner": {"reputation": 296, "user_id": 2129907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd2065b63030836156046268e59fcdae?s=128&d=identicon&r=PG&f=1", "display_name": "jorgesuarezch", "link": "https://stackoverflow.com/users/2129907/jorgesuarezch"}, "is_accepted": true, "score": 0, "last_activity_date": 1438809546, "creation_date": 1438809546, "answer_id": 31843028, "question_id": 31842737, "link": "https://stackoverflow.com/questions/31842737/passing-parameters-to-django-view-through-url/31843028#31843028", "title": "Passing parameters to Django view through url", "body": "<p><code>&lt;a href=\"../correction/{{word.file_position}}\"&gt;Submit correction&lt;/a&gt;</code> doesn't submit a form because it's a link and when you press a link, this sends a request with a GET method to the server so never enter to <code>if request.method == 'POST':</code> .</p>\n\n<p>Please try something like </p>\n\n<pre><code>&lt;form action=\"/correction/{{word.file_position}}\" method=\"POST\"&gt;\n{# your inputs fields#}\n&lt;button type=\"submit\"&gt;Submit correction&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I hope to be useful. Regards</p>\n"}], "owner": {"reputation": 9, "user_id": 5108605, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Wtv1BZXzYA/AAAAAAAAAAI/AAAAAAAAADM/ittFbY5gQOs/photo.jpg?sz=128", "display_name": "Vickie Li", "link": "https://stackoverflow.com/users/5108605/vickie-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 31843028, "answer_count": 1, "score": 0, "last_activity_date": 1438809546, "creation_date": 1438808452, "question_id": 31842737, "link": "https://stackoverflow.com/questions/31842737/passing-parameters-to-django-view-through-url", "title": "Passing parameters to Django view through url", "body": "<p>I am trying to create a formset that captures a parameter from the url to prefill one of the fields. The form is displaying correctly and at the correct address, but after clicking \"submit\" the page redirects to \"/correction/\" instead of the intended /correction/A07686+dwdID19, and the form does not save. What might be the issue?</p>\n\n<p>In models.py:</p>\n\n<pre><code>class correction(models.Model):\n    corrected_word = models.ForeignKey(item)\n    correction_author = models.ForeignKey(User)\n    correction_made = models.IntegerField(u'correction_made', choices=CORRECTION_CHOICES)\n    correction_word = models.CharField(u'correction_word', max_length=200, blank=True, null=True)\n    time = models.DateTimeField(auto_now_add=True)\n    approved = models.IntegerField(u'approved', choices=APPROVAL_CHOICES, blank=True, null=True)\n\n    def __unicode__(self):\n        return str(self.time)\n</code></pre>\n\n<p>In views.py:</p>\n\n<pre><code>def submit_corr(request, bdword):\nif hasattr(request, 'user') and request.user.is_authenticated():\n    word = item.objects.filter(file_position=bdword)[0]\n    CorrFormSet = inlineformset_factory(item, correction, fields=['correction_made', 'correction_word','correction_author'], can_delete=False, extra=1)\n    form = CorrFormSet(request.POST, request.FILES, instance=word, initial=[{'correction_author': request.user,}])\n\n\n    if request.method == 'POST':\n        if form.is_valid():\n            for entry in form:\n                entry.save()\n\n    else:\n        form = CorrFormSet(instance=word, initial=[{'correction_author': request.user,}])\n\n    return render(request, \"correctionform.html\", {\"form\": form,\"word\": word})\n</code></pre>\n\n<p>In urls:</p>\n\n<pre><code>    url(r'^correction/(?P&lt;bdword&gt;.*)$', 'english.views.submit_corr'),\n</code></pre>\n\n<p>In the template:</p>\n\n<pre><code>&lt;a href=\"../correction/{{word.file_position}}\"&gt;Submit correction&lt;/a&gt;&lt;/th&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 33158, "user_id": 267781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68a8fe57dcd1a8717c20703c7f1bf91d?s=128&d=identicon&r=PG", "display_name": "MattH", "link": "https://stackoverflow.com/users/267781/matth"}, "edited": false, "score": 0, "creation_date": 1438808671, "post_id": 31842728, "comment_id": 51607121, "body": "Please provide example input and output documents."}, {"owner": {"reputation": 853, "user_id": 2216471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5hLAS.jpg?s=128&g=1", "display_name": "abaldwin99", "link": "https://stackoverflow.com/users/2216471/abaldwin99"}, "edited": false, "score": 0, "creation_date": 1438809046, "post_id": 31842728, "comment_id": 51607307, "body": "can you print <code>field.text</code> to see if the value is truly None?  It could be an empty string or a string with spaces / new line characters.  They would evaluate to false when compared against None."}], "answers": [{"tags": [], "owner": {"reputation": 33158, "user_id": 267781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68a8fe57dcd1a8717c20703c7f1bf91d?s=128&d=identicon&r=PG", "display_name": "MattH", "link": "https://stackoverflow.com/users/267781/matth"}, "is_accepted": false, "score": 1, "last_activity_date": 1438809377, "creation_date": 1438809377, "answer_id": 31842980, "question_id": 31842728, "link": "https://stackoverflow.com/questions/31842728/removing-empty-xml-nodes/31842980#31842980", "title": "Removing empty xml nodes", "body": "<p><a href=\"/questions/tagged/xpath\" class=\"post-tag\" title=\"show questions tagged &#39;xpath&#39;\" rel=\"tag\">xpath</a> is your friend here.</p>\n\n<pre><code>from lxml import etree\n\ndoc = etree.XML(\"\"\"&lt;root&gt;&lt;a&gt;1&lt;/a&gt;&lt;b&gt;&lt;c&gt;&lt;/c&gt;&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/root&gt;\"\"\")\n\ndef remove_empty_elements(doc):\n  for element in doc.xpath('//*[not(node())]'):\n    element.getparent().remove(element)\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>&gt;&gt;&gt; print etree.tostring(doc,pretty_print=True)\n&lt;root&gt;\n  &lt;a&gt;1&lt;/a&gt;\n  &lt;b&gt;\n    &lt;c/&gt;\n  &lt;/b&gt;\n  &lt;d/&gt;\n&lt;/root&gt;\n\n&gt;&gt;&gt; remove_empty_elements(doc)\n&gt;&gt;&gt; print etree.tostring(doc,pretty_print=True)\n&lt;root&gt;\n  &lt;a&gt;1&lt;/a&gt;\n  &lt;b/&gt;\n&lt;/root&gt;\n\n&gt;&gt;&gt; remove_empty_elements(doc)\n&gt;&gt;&gt; print etree.tostring(doc,pretty_print=True)\n&lt;root&gt;\n  &lt;a&gt;1&lt;/a&gt;\n&lt;/root&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5195698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc8af513f3017485f44e6d379192573?s=128&d=identicon&r=PG&f=1", "display_name": "trad", "link": "https://stackoverflow.com/users/5195698/trad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438809548, "creation_date": 1438808428, "last_edit_date": 1438809548, "question_id": 31842728, "link": "https://stackoverflow.com/questions/31842728/removing-empty-xml-nodes", "title": "Removing empty xml nodes", "body": "<p>I have an xml file that I'm trying to remove empty nodes from with python. When I've tested it to check if a the value is, say, 'shark', it works. But when i check for it being none, it doesn't remove the empty node.</p>\n\n<pre><code>for records in recordList:\n        for fieldGroup in records:\n            for field in fieldGroup:\n                if field.text is None:\n                    fieldGroup.remove(field)\n</code></pre>\n"}, {"tags": ["python", "string", "python-3.x", "trim"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1438808437, "post_id": 31842707, "comment_id": 51607001, "body": "What solutions did you have then? Why is <code>s.strip()</code> not good enough, because it removes the spaces from the first &#39;sentence&#39;?"}, {"owner": {"reputation": 888, "user_id": 5175071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/383b3ea578405046feea7e132714f0e9?s=128&d=identicon&r=PG", "display_name": "The Brofessor", "link": "https://stackoverflow.com/users/5175071/the-brofessor"}, "edited": false, "score": 0, "creation_date": 1438808841, "post_id": 31842707, "comment_id": 51607193, "body": "What is the output you want?"}, {"owner": {"reputation": 1274, "user_id": 1069389, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7bf697b38fc6b9dbcf2a03400ef642ee?s=128&d=identicon&r=PG", "display_name": "ilstam", "link": "https://stackoverflow.com/users/1069389/ilstam"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438808897, "post_id": 31842707, "comment_id": 51607230, "body": "@Martijn Pieters Exactly"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 888, "user_id": 5175071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/383b3ea578405046feea7e132714f0e9?s=128&d=identicon&r=PG", "display_name": "The Brofessor", "link": "https://stackoverflow.com/users/5175071/the-brofessor"}, "edited": false, "score": 0, "creation_date": 1438808927, "post_id": 31842707, "comment_id": 51607241, "body": "@TheBrofessor: the second codeblock illustrates what the OP wants."}], "answers": [{"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1438808560, "post_id": 31842758, "comment_id": 51607054, "body": "This assumes that the lines are otherwise not containing any other whitespace apart from <code>\\n</code>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user447688"}, "is_accepted": false, "score": 1, "last_activity_date": 1438808561, "last_edit_date": 1438808561, "creation_date": 1438808527, "answer_id": 31842758, "question_id": 31842707, "link": "https://stackoverflow.com/questions/31842707/python-remove-empty-lines-from-end-and-beginning-of-string/31842758#31842758", "title": "python - remove empty lines from end and beginning of string", "body": "<pre><code>s = \"\"\"\n\n\n\n\n  some indentation here\n\nlorem ipsum\n\n\n\"\"\" \n\nx = s.strip(\"\\n\")\nprint(x)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>      some indentation here\n\nlorem ipsum\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 4, "last_activity_date": 1438808858, "last_edit_date": 1438808858, "creation_date": 1438808530, "answer_id": 31842760, "question_id": 31842707, "link": "https://stackoverflow.com/questions/31842707/python-remove-empty-lines-from-end-and-beginning-of-string/31842760#31842760", "title": "python - remove empty lines from end and beginning of string", "body": "<p>You'll have to use a custom solution. Split the lines by newlines, and remove empty lines from the start and end:</p>\n\n<pre><code>def strip_empty_lines(s):\n    lines = s.splitlines()\n    while lines and not lines[0].strip():\n        lines.pop(0)\n    while lines and not lines[-1].strip():\n        lines.pop()\n    return '\\n'.join(lines)\n</code></pre>\n\n<p>This handles the case where the 'empty' lines still contain spaces or tabs, apart from the <code>\\n</code> line separators:</p>\n\n<pre><code>&gt;&gt;&gt; strip_empty_lines('''\\\n... \n... \n... \n... \n...         some indentation here\n... \n... lorem ipsum\n... \n... \n... ''')\n'        some indentation here\\n\\nlorem ipsum'\n&gt;&gt;&gt; strip_empty_lines('''\\\n... \\t  \\t\n...     \\n\n...         some indentation here\n... \n... lorem ipsum\n... \n... ''')\n'        some indentation here\\n\\nlorem ipsum'\n</code></pre>\n\n<p>If there is no other whitespace than newlines, then a simple <code>s.strip('\\n')</code> will do:</p>\n\n<pre><code>&gt;&gt;&gt; '''\\\n... \n... \n... \n...         some indentation here\n... \n... lorum ipsum\n... \n... '''.strip('\\n')\n'        some indentation here\\n\\nlorum ipsum'\n</code></pre>\n"}], "owner": {"reputation": 1274, "user_id": 1069389, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7bf697b38fc6b9dbcf2a03400ef642ee?s=128&d=identicon&r=PG", "display_name": "ilstam", "link": "https://stackoverflow.com/users/1069389/ilstam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2458, "favorite_count": 0, "accepted_answer_id": 31842760, "answer_count": 2, "score": 0, "last_activity_date": 1438808858, "creation_date": 1438808327, "last_edit_date": 1438808763, "question_id": 31842707, "link": "https://stackoverflow.com/questions/31842707/python-remove-empty-lines-from-end-and-beginning-of-string", "title": "python - remove empty lines from end and beginning of string", "body": "<p>I want to remove all empty lines from the beginning and the end of a string.</p>\n\n<p>So the following:</p>\n\n<pre><code>s = \"\"\"\n\n\n        some identation here\n\nlorem ipsum\n\n\"\"\"\n</code></pre>\n\n<p>Would become:</p>\n\n<pre><code>s = \"\"\"        some identation here\n\nlorem ipsum\"\"\"\n</code></pre>\n\n<p>I don't like my solutions. I want something as simple and short as possible. </p>\n\n<p>Is there something built-in in python3? What are your suggestions? </p>\n"}, {"tags": ["python", "django", "forms"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1438809685, "post_id": 31842651, "comment_id": 51607611, "body": "You should show the actual error and traceback."}, {"owner": {"reputation": 15, "user_id": 4848233, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-kLjVIDIjQ68/AAAAAAAAAAI/AAAAAAAACSk/ibwFXxDG9Eg/photo.jpg?sz=128", "display_name": "Carlos Andres Rengifo Escobar", "link": "https://stackoverflow.com/users/4848233/carlos-andres-rengifo-escobar"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1438872941, "post_id": 31842651, "comment_id": 51637625, "body": "Hi Daniel, both have been added, thank you."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 4848233, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-kLjVIDIjQ68/AAAAAAAAAAI/AAAAAAAACSk/ibwFXxDG9Eg/photo.jpg?sz=128", "display_name": "Carlos Andres Rengifo Escobar", "link": "https://stackoverflow.com/users/4848233/carlos-andres-rengifo-escobar"}, "is_accepted": true, "score": 0, "last_activity_date": 1438873897, "creation_date": 1438873897, "answer_id": 31859448, "question_id": 31842651, "link": "https://stackoverflow.com/questions/31842651/django-value-error-when-adding-form-field/31859448#31859448", "title": "Django value error when adding form field", "body": "<p>Think I found the problem, I was passing *args and **kwargs to the constructor, but when I changed from this:</p>\n\n<pre><code>def __init__(self, *args, **kwargs):\nDRIVER_CHOICES = [[driver, driver] for driver in self.extract_drivers(args[0])]\nROUTE_CHOICES = [[route, route] for route in args[1]]\nsuper(DispatchForm, self).__init__(*args, **kwargs)\nself.fields['driver'].choices = DRIVER_CHOICES\nself.fields['route'].choices = ROUTE_CHOICES\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>def __init__(self, drivers, routes, *args, **kwargs):\nDRIVER_CHOICES = [[driver, driver] for driver in self.extract_drivers(drivers)]\nROUTE_CHOICES = [[route, route] for route in routes]\nsuper(DispatchForm, self).__init__(*args, **kwargs)\nself.fields['driver'].choices = DRIVER_CHOICES\nself.fields['route'].choices = ROUTE_CHOICES\n</code></pre>\n\n<p>It worked as expected.</p>\n"}], "owner": {"reputation": 15, "user_id": 4848233, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-kLjVIDIjQ68/AAAAAAAAAAI/AAAAAAAACSk/ibwFXxDG9Eg/photo.jpg?sz=128", "display_name": "Carlos Andres Rengifo Escobar", "link": "https://stackoverflow.com/users/4848233/carlos-andres-rengifo-escobar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 31859448, "answer_count": 1, "score": 0, "last_activity_date": 1438873897, "creation_date": 1438808117, "last_edit_date": 1495541677, "question_id": 31842651, "link": "https://stackoverflow.com/questions/31842651/django-value-error-when-adding-form-field", "title": "Django value error when adding form field", "body": "<p>I'm creating some form fields dynamically, as suggested in this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5744327/passing-data-into-django-forms\">Passing data into django forms</a></p>\n\n<p>form:</p>\n\n<pre><code>class DispatchForm(forms.Form):\ndriver = forms.MultipleChoiceField(choices=[])\nroute = forms.MultipleChoiceField(choices=[])\nstates = forms.CharField()\n\ndef __init__(self, *args, **kwargs):\n    DRIVER_CHOICES = [[driver, driver] for driver in self.extract_drivers(args[0])]\n    ROUTE_CHOICES = [[route, route] for route in args[1]]\n    super(DispatchForm, self).__init__(*args, **kwargs)\n    self.fields['driver'].choices = DRIVER_CHOICES\n    self.fields['route'].choices = ROUTE_CHOICES\n</code></pre>\n\n<p>Template:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n                            &lt;label class=\"col-lg-12\" for=\"route\"&gt;Ruta&lt;/label&gt;\n                            &lt;select class=\"form-control\" id=\"route\"&gt;\n                                {% for value, input in form.route.field.choices %}\n                                    &lt;option value=\"{{ value }}\"&gt;{{ input }}&lt;/option&gt;\n                                {% endfor %}\n                            &lt;/select&gt;\n                            &lt;label class=\"col-lg-12\" for=\"state\"&gt;Estado&lt;/label&gt;\n                         &lt;label class=\"col-lg-12\" for=\"driver\"&gt;Conductor&lt;/label&gt;\n                            &lt;select class=\"form-control\" id=\"driver\"&gt;\n                                {% for value, input in form.driver.field.choices %}\n                                    &lt;option value=\"{{ value }}\"&gt;{{ input }}&lt;/option&gt;\n                                {% endfor %}\n                            &lt;/select&gt;\n                        {{ form.states }}\n                        &lt;/div&gt;\n</code></pre>\n\n<p>view</p>\n\n<pre><code>def dashboard(request):\ntemplate_name = 'dashboard.html'\ndrivers = Driver.objects.using('routes').all()\nroutes = RouteManager().extract_routes()\nform = DispatchForm(drivers, routes)\nreturn render(request, template_name, {\n    'form': form,\n})\n</code></pre>\n\n<p>But whatever new field I try to add to the form gets me a \"too many values to unpack (expected 2)\"</p>\n\n<p>in this case, it tells me the error is at {{ form.states }}. I suspect it has to do with the forms init method that I modified, but everything I tried throws me the same error.</p>\n\n<p>Thanks!</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/dashboard/\n\nDjango Version: 1.8.3\nPython Version: 3.4.0\nInstalled Applications:\n('django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'web_server',\n 'widget_tweaks',\n 'datetimewidget')\nInstalled Middleware:\n('django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.auth.middleware.RemoteUserBackend',\n 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n 'django.middleware.security.SecurityMiddleware')\n\n\nTemplate error:\nIn template /home/carlos/smart/SMWEB-CANOPUS/web_server/templates/dashboard.html, error at line 111\n   too many values to unpack (expected 2)\n\n   101 :                                         &lt;option value=\"{{ value }}\"&gt;{{ input }}&lt;/option&gt;\n\n\n\n   102 :                                     {% endfor %}\n\n\n\n   103 :                                 &lt;/select&gt;\n\n\n\n   104 :                                 &lt;label class=\"col-lg-12\" for=\"state\"&gt;Estado&lt;/label&gt;\n\n\n\n   105 :                              &lt;label class=\"col-lg-12\" for=\"driver\"&gt;Conductor&lt;/label&gt;\n\n\n\n   106 :                                 &lt;select class=\"form-control\" id=\"driver\"&gt;\n\n\n\n   107 :                                     {% for value, input in form.driver.field.choices %}\n\n\n\n   108 :                                         &lt;option value=\"{{ value }}\"&gt;{{ input }}&lt;/option&gt;\n\n\n\n   109 :                                     {% endfor %}\n\n\n\n   110 :                                 &lt;/select&gt;\n\n\n\n   111 :                              {{ form.states }} \n\n\n\n   112 :                             &lt;/div&gt;\n\n\n\n   113 :                     &lt;/div&gt;\n\n\n\n   114 :            &lt;/div&gt;\n\n\n\n   115 :             &lt;/div&gt;\n\n\n\n   116 :        &lt;/section&gt;&lt;! --/wrapper --&gt;\n\n\n\n   117 :       &lt;/section&gt;&lt;!-- /MAIN CONTENT --&gt;\n\n\n\n   118 : \n\n\n\n   119 :       &lt;!--main content end--&gt;\n\n\n\n   120 :       &lt;!--footer start--&gt;\n\n\n\n   121 :       &lt;footer class=\"site-footer\"&gt;\n\n\nTraceback:\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/core/handlers/base.py\" in get_response\n  132.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)\nFile \"/home/carlos/smart/SMWEB-CANOPUS/web_server/views.py\" in dashboard\n  42.         'form': form,\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/shortcuts.py\" in render\n  67.             template_name, context, request=request, using=using)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/template/loader.py\" in render_to_string\n  99.         return template.render(context, request)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/template/backends/django.py\" in render\n  74.         return self.template.render(context)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/template/base.py\" in render\n  209.                     return self._render(context)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/template/base.py\" in _render\n  201.         return self.nodelist.render(context)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/template/base.py\" in render\n  903.                 bit = self.render_node(node, context)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/template/debug.py\" in render_node\n  79.             return node.render(context)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/template/debug.py\" in render\n  92.             output = force_text(output)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/utils/encoding.py\" in force_text\n  90.                     s = six.text_type(s)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/utils/html.py\" in &lt;lambda&gt;\n  399.         klass.__str__ = lambda self: mark_safe(klass_str(self))\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/forms/forms.py\" in __str__\n  537.         return self.as_widget()\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/forms/forms.py\" in as_widget\n  593.         return force_text(widget.render(name, self.value(), attrs=attrs))\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/forms/forms.py\" in value\n  638.                 self.data, self.form.initial.get(self.name, self.field.initial)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/forms/forms.py\" in data\n  616.         return self.field.widget.value_from_datadict(self.form.data, self.form.files, self.html_name)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/forms/widgets.py\" in value_from_datadict\n  223.         return data.get(name, None)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/db/models/query.py\" in get\n  325.         clone = self.filter(*args, **kwargs)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/db/models/query.py\" in filter\n  679.         return self._filter_or_exclude(False, *args, **kwargs)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/db/models/query.py\" in _filter_or_exclude\n  697.             clone.query.add_q(Q(*args, **kwargs))\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/db/models/sql/query.py\" in add_q\n  1309.         clause, require_inner = self._add_q(where_part, self.used_aliases)\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/db/models/sql/query.py\" in _add_q\n  1337.                     allow_joins=allow_joins, split_subq=split_subq,\nFile \"/home/carlos/SMARtenv/lib/python3.4/site-packages/django/db/models/sql/query.py\" in build_filter\n  1146.         arg, value = filter_expr\n\nException Type: ValueError at /dashboard/\nException Value: too many values to unpack (expected 2)\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>Error during template rendering\n\nIn template /home/carlos/smart/SMWEB-CANOPUS/web_server/templates/dashboard.html, error at line 111\ntoo many values to unpack (expected 2)\n101                                         &lt;option value=\"{{ value }}\"&gt;{{ input }}&lt;/option&gt;\n102                                     {% endfor %}\n103                                 &lt;/select&gt;\n104                                 &lt;label class=\"col-lg-12\" for=\"state\"&gt;Estado&lt;/label&gt;\n105                              &lt;label class=\"col-lg-12\" for=\"driver\"&gt;Conductor&lt;/label&gt;\n106                                 &lt;select class=\"form-control\" id=\"driver\"&gt;\n107                                     {% for value, input in form.driver.field.choices %}\n108                                         &lt;option value=\"{{ value }}\"&gt;{{ input }}&lt;/option&gt;\n109                                     {% endfor %}\n110                                 &lt;/select&gt;\n111 \n\n      {{ form.states }}\n\n\n\n112                             &lt;/div&gt;\n113                     &lt;/div&gt;\n114             &lt;/div&gt;\n115             &lt;/div&gt;\n116         &lt;/section&gt;&lt;! --/wrapper --&gt;\n117       &lt;/section&gt;&lt;!-- /MAIN CONTENT --&gt;\n118 \n119       &lt;!--main content end--&gt;\n120       &lt;!--footer start--&gt;\n121       &lt;footer class=\"site-footer\"&gt;\n</code></pre>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 8105, "user_id": 639627, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f008c7cbc02087efe4c5758ce528d883?s=128&d=identicon&r=PG", "display_name": "James MV", "link": "https://stackoverflow.com/users/639627/james-mv"}, "edited": false, "score": 0, "creation_date": 1438808740, "post_id": 31842682, "comment_id": 51607143, "body": "Ah yes, second one worked for me. Really quite clever this selenium! Thanks alex."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1438808198, "creation_date": 1438808198, "answer_id": 31842682, "question_id": 31842646, "link": "https://stackoverflow.com/questions/31842646/how-to-execute-javascript-after-filling-in-a-form-using-selenium/31842682#31842682", "title": "How to execute javascript after filling in a form using selenium?", "body": "<p>Submit the form with <code>submit()</code>:</p>\n\n<pre><code>ele.submit()\n</code></pre>\n\n<p>It would find the element's parent form and submit it.</p>\n\n<p>Or, if that's not gonna work in your case, find the <code>Sign In</code> button and click it:</p>\n\n<pre><code>driver.find_element_by_link_text(\"Sign In\").click()\n</code></pre>\n"}], "owner": {"reputation": 8105, "user_id": 639627, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f008c7cbc02087efe4c5758ce528d883?s=128&d=identicon&r=PG", "display_name": "James MV", "link": "https://stackoverflow.com/users/639627/james-mv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "accepted_answer_id": 31842682, "answer_count": 1, "score": 1, "last_activity_date": 1438808234, "creation_date": 1438808111, "last_edit_date": 1438808234, "question_id": 31842646, "link": "https://stackoverflow.com/questions/31842646/how-to-execute-javascript-after-filling-in-a-form-using-selenium", "title": "How to execute javascript after filling in a form using selenium?", "body": "<p>Just getting started with selenium, this is the HTML of the page:</p>\n\n<pre><code>&lt;div id=\"signInForm\"&gt;\n    &lt;form action=\"/cgi-bin/VmLoginCgi\" method=\"POST\" name=\"signIn1\" id=\"signIn\"&gt;\n        &lt;h2 id=\"loginTitle\"&gt;Sign in to view and change your settings&lt;/h2&gt;\n        &lt;div class=\"field formField noHint username clearfix\"&gt;\n            &lt;label for=\"username\"&gt;&lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div style=\"position:relative;\" class=\"field formField noHint password clearfix\"&gt;&lt;label for=\"password\"&gt;Settings Password&lt;/label&gt;&lt;input type=\"password\" autocomplete=\"off\" value=\"\" maxlength=\"15\" class=\"name required onefiftyPX inactive\" name=\"jgwhnZLOXn\" id=\"password\" onkeypress=\"handleKeyPress(event)\"&gt;&lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;a href=\"javascript:SignIn()\" class=\"newCta ctaLarge ctaPrimaryLarge floatLeft\"&gt;Sign In&lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n    &lt;p&gt;\n        &lt;span style=\"font-weight:bold;\"&gt;Don't know your password?&lt;/span&gt;&lt;br&gt;You'll find your default password on the bottom of your Super Hub.\n    &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I'm filling in the text box by doing:</p>\n\n<pre><code>ele = browser.find_element_by_id(\"password\")\nele.send_keys(\"supersecretpassword\")\n</code></pre>\n\n<p>But can't submit the actual form by executing the javascript. I've tried:</p>\n\n<pre><code> browser.execute_script(\"SignIn()\")\n</code></pre>\n\n<p>But get a big long error, any pointers?</p>\n"}, {"tags": ["python", "text-based", "adventure"], "comments": [{"owner": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "edited": false, "score": 1, "creation_date": 1438808178, "post_id": 31842607, "comment_id": 51606861, "body": "Why are you using only functions and no classes? I say this in the nicest way but you should probably spend more time learning python before you try and bite off a project like listed above."}, {"owner": {"reputation": 105, "user_id": 3650751, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1609676667/picture?type=large", "display_name": "Ranger Skip", "link": "https://stackoverflow.com/users/3650751/ranger-skip"}, "reply_to_user": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "edited": false, "score": 0, "creation_date": 1438808281, "post_id": 31842607, "comment_id": 51606918, "body": "No offense taken. I&#39;m following Learn Python The Hard Way, and this is how they have the book laid out. Haven&#39;t learned about classes yet (Although I know about them from my C++ experience)"}, {"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 0, "creation_date": 1438808348, "post_id": 31842607, "comment_id": 51606960, "body": "I&#39;m just going to say that this seems like a entirely odd thing to do. You should probably use a class (or, uh, an <a href=\"https://docs.python.org/3/library/enum.html\" rel=\"nofollow noreferrer\">Enum</a>) to hold this data."}, {"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 0, "creation_date": 1438808440, "post_id": 31842607, "comment_id": 51607003, "body": "btw, <code>FirstRoom.WolfLever</code> is an attribute on the function <code>FirstRoom</code>. It&#39;s not a variable in <code>FirstRoom</code>&#39;s closure."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 2, "creation_date": 1438808607, "post_id": 31842607, "comment_id": 51607079, "body": "This question is probably too broad to answer because you have several fundamental misconceptions about how a program this large should be laid out. That&#39;s OK because you&#39;re just a beginner, but in the space of a single StackOverflow question and answer it&#39;s going to be difficult to disentangle it. Basically, though, you&#39;re having trouble because you&#39;re trying to make functions into classes, and that&#39;s just not what they are."}, {"owner": {"reputation": 630, "user_id": 2100093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbf8e70beafd4e010b1080f210ca2d14?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/2100093/anthony"}, "edited": false, "score": 1, "creation_date": 1438808628, "post_id": 31842607, "comment_id": 51607093, "body": "As @Obj3ctiv_C_88 said it would be advantageous to learn classes, but in this case have you tried the <code>globals</code> statement?"}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 3650751, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1609676667/picture?type=large", "display_name": "Ranger Skip", "link": "https://stackoverflow.com/users/3650751/ranger-skip"}, "is_accepted": false, "score": 1, "last_activity_date": 1438811124, "last_edit_date": 1495539833, "creation_date": 1438811124, "answer_id": 31843384, "question_id": 31842607, "link": "https://stackoverflow.com/questions/31842607/changing-variables-in-one-function-from-another-function/31843384#31843384", "title": "changing variables in one function from another function", "body": "<p>Credit to @Anthony and the following link: <a href=\"https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them\">Using global variables in a function other than the one that created them</a></p>\n\n<p>Globals definitely were the answer (With the exception of using classes). Here's what my WolfRoom() and SnakeRoom() functions look like now:</p>\n\n<pre><code>def WolfRoom():\n    global WolfLever\n\n    choice = raw_input(\"&gt; \")\n\n    elif \"wolf\" in choice:\n        WolfLever = True\n        print \"As you pull the lever... You hear something click down the hall behind you.\"\n        WolfRoom()\n</code></pre>\n\n<p>For FirstRoom() I added</p>\n\n<pre><code>global Lever\n</code></pre>\n\n<p>to the beginning of the function and right before Start() I have </p>\n\n<pre><code>WolfLever = False\nSnakeLever = False\n</code></pre>\n\n<p>this way I have no errors or warnings (Was getting syntax warnings for assigning a value to my levers before declaring them as global) and everything works perfectly.</p>\n"}], "owner": {"reputation": 105, "user_id": 3650751, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1609676667/picture?type=large", "display_name": "Ranger Skip", "link": "https://stackoverflow.com/users/3650751/ranger-skip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1438811124, "creation_date": 1438807988, "last_edit_date": 1438808197, "question_id": 31842607, "link": "https://stackoverflow.com/questions/31842607/changing-variables-in-one-function-from-another-function", "title": "changing variables in one function from another function", "body": "<p>I'm working on a text based adventure game in python. Nothing super fancy. I want to have a lever in 2 different rooms unlock a gate in a third room. Both levers need to be pulled in order for the gate to be unlocked.</p>\n\n<p>here are the two rooms with the levers.</p>\n\n<pre><code>def SnakeRoom():\n\n    choice = raw_input(\"&gt; \")\n\n    elif \"snake\" in choice:\n        FirstRoom.SnakeLever = True\n        print \"As you pull the lever... You hear something click down the hall behind you.\"\n        SnakeRoom()\n    elif \"back\" in choice:\n        FirstRoom()\n    else:\n        dead(\"Arrows shoot out from the walls. You don't make it.\")\n\ndef WolfRoom():\n\n    choice = raw_input(\"&gt; \")\n\n    elif \"wolf\" in choice:\n        FirstRoom.WolfLever = True\n        print \"As you pull the lever... You hear something click down the hall behind you.\"\n        WolfRoom()\n    elif \"back\" in choice:\n        FirstRoom()\n    else:\n        dead(\"Arrows shoot out from the walls. You don't make it.\")\n</code></pre>\n\n<p>Here is the room with the gate.</p>\n\n<pre><code>def FirstRoom():\n    Lever = WolfLever and SnakeLever\n    choice = raw_input(\"&gt; \")\n\n    if \"straight\" in choice and Lever != True:\n        print \"You see a large gate in front of you. The gate is locked, there doesn't seem to be any way to open it.\"\n        FirstRoom()\n    elif \"straight\" in choice and Lever == True:\n        SecondRoom()\n    elif \"left\" in choice:\n        WolfRoom()\n    elif \"right\" in choice:\n        SnakeRoom()\n    elif \"lever\" in choice:\n        print \"WolfLever: %s\" % WolfLever\n        print \"SnakeLever: %s\" % SnakeLever\n        print \"Lever: %s\" % Lever\n        FirstRoom()\n</code></pre>\n\n<p>I shortened the code so you don't have to read through all the unnecessary stuff. </p>\n\n<p>My biggest problem is I'm not super familiar with the Python language yet, so I'm not sure how to word everything to find the answers I'm looking for.</p>\n\n<p>edit: Instead of FirstRoom.WolfLever I also tried just using WolfLever, in the body of my code, above Start() I have:</p>\n\n<pre><code>WolfLever\nSnakeLever\nLever = WolfLever and SnakeLever\n</code></pre>\n\n<p>But my functions weren't updating these values. So I tried the FirstRoom. approach.</p>\n"}, {"tags": ["python", "arrays", "list"], "comments": [{"owner": {"reputation": 709, "user_id": 2168258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7RyIF.jpg?s=128&g=1", "display_name": "deddu", "link": "https://stackoverflow.com/users/2168258/deddu"}, "edited": false, "score": 0, "creation_date": 1438809211, "post_id": 31842602, "comment_id": 51607376, "body": "snps doesn&#39;t need to be declared like this.: <code>snps = [[]]</code>, you should be fine with <code>snps = []</code>. That said, it seems fine to me. To access your elements, you should be able to use  <code>snps[row][col]</code>. Then, if you want something more advanced, or you&#39;ll have to deal often with similar tasks you should look at <a href=\"http://docs.scipy.org/doc/numpy/user/index.html\" rel=\"nofollow noreferrer\">numpy</a>. And since you are there, look also into <a href=\"http://pandas.pydata.org/index.html\" rel=\"nofollow noreferrer\">pandas</a>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438810371, "post_id": 31842602, "comment_id": 51607926, "body": "Is your file actually tab delimited?"}, {"owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438810471, "post_id": 31842602, "comment_id": 51607972, "body": "yes it is tab delimited as well."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438810589, "post_id": 31842602, "comment_id": 51608017, "body": "Then pandas is definitely what you should be looking at, what are you doing with the <code>Cultivar Name </code> line?"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438809426, "post_id": 31842820, "comment_id": 51607484, "body": "thanks! well that Culitvar line needs to be omitted actually i dont need that data at all. and the objective is to do a column wise analysis, in other words to check if for each column in the 2d array if T is the dominat char, or if A is the dominat char. That&#39;s why I thought a 2 d array would be better than a dictionary. Would you still recommend pandas in this case? Thanks again!"}, {"owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "reply_to_user": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438810205, "post_id": 31842820, "comment_id": 51607867, "body": "What do you mean by <code>dominate char</code>?"}, {"owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438810421, "post_id": 31842820, "comment_id": 51607950, "body": "so in the first column of your output: really the data is 479 lines of T&#39;s,A&#39;s, G, and I need to count each letter and determine which has the highest count for each column of data. char i was just thinking in java or c++ it looks like a &quot;char&quot; variable b/c of the single quotations."}, {"owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "reply_to_user": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438814219, "post_id": 31842820, "comment_id": 51609414, "body": "@DannyFreese then pandas is probably your best option honestly."}], "tags": [], "owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "is_accepted": false, "score": 0, "last_activity_date": 1438809153, "last_edit_date": 1438809153, "creation_date": 1438808733, "answer_id": 31842820, "question_id": 31842602, "link": "https://stackoverflow.com/questions/31842602/python-for-loop-through-a-lists-of-lists-in-or-change-data-to-2-dimensional-arr/31842820#31842820", "title": "python: for loop through a lists of lists in or change data to 2 dimensional array", "body": "<blockquote>\n  <p>From my code, do I have my data into a list of lists?</p>\n</blockquote>\n\n<p>Yes you do.  However, you don't need to do <code>snps = [[]]</code>.  <code>snps = []</code> is sufficient.  </p>\n\n<blockquote>\n  <p>How can I iterate through the list of lists with index position to analyze the Data?</p>\n</blockquote>\n\n<pre><code>for i, item in enumerate(snps):\n    print(i, item)\n\nOutput:    \n0 ['T', 'A', 'A', 'T']\n1 ['T', 'A', 'A', 'T']\n2 ['T', 'A', 'A', 'T']\n...\n</code></pre>\n\n<hr>\n\n<p>If the first item in the <code>Cultiver Name</code> column is unique, you might consider using a dictionary (<code>{}</code>) instead:</p>\n\n<pre><code>snps = {}\n\n...\n\nfor line in lines:\n    row_vals = line.strip().split('\\t')\n    snps[row_vals[0]] = row_vals[1:]\n</code></pre>\n\n<p>Accessing the items in the Dictionary are now done like so:</p>\n\n<pre><code>print(snps['PI065549'])\n\nOuput:\n['T', 'A', 'A', 'T']\n</code></pre>\n\n<p>If you're planning on doing any type of analysis, you might consider using <code>pandas</code>.  Here's a <a href=\"http://pandas.pydata.org/pandas-docs/stable/10min.html\" rel=\"nofollow\">quick intro</a> which also talks about <a href=\"http://pandas.pydata.org/pandas-docs/stable/io.html#io-read-csv-table\" rel=\"nofollow\">importing text files</a></p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438810091, "post_id": 31842988, "comment_id": 51607812, "body": "Hi, thanks for the help. I&#39;m wondering my analysis it&#39;s really pending on doing a column wise analysis, isn&#39;t your suggestion in a dictionary?"}], "tags": [], "owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "is_accepted": false, "score": 0, "last_activity_date": 1438810277, "last_edit_date": 1438810277, "creation_date": 1438809388, "answer_id": 31842988, "question_id": 31842602, "link": "https://stackoverflow.com/questions/31842602/python-for-loop-through-a-lists-of-lists-in-or-change-data-to-2-dimensional-arr/31842988#31842988", "title": "python: for loop through a lists of lists in or change data to 2 dimensional array", "body": "<p>you were almost there (this is python3.4, hope that's ok)</p>\n\n<pre><code>from pathlib import Path\n\nDATA_PATH = Path(__file__).parent / '../data/chromosome.txt'\n\nsnpNames = [] #to hold snp names(column titles) \nchrm = [] #to hold chr, needed later for random sampling \nnumLines = 0; # to determine how many lines in the files, needed to\n              # determine size of 2 d array \n\nsnps_dict = {} ## store the snp data in a list of lists...\nsnps = []\n\nwith DATA_PATH.open('r') as file:\n     #read in the first line these contain the names and store into an array \n    firstLine = file.readline().strip()\n    for i in firstLine.split(): \n        snpNames.append(i)\n\n    #second line contains the chr data, read that into the chr array\n    secondLine = file.readline().strip()\n    for i in secondLine.split():\n        chrm.append(i)\n\n     ## read in the remaining lines and fill in the 2 d array    \n    for line in file.readlines():\n        if line.startswith('Position'):\n            continue\n        elif line.startswith('Cultivar Name'):\n            continue\n        splt = line.split()     \n        snps[splt[0]] = splt[1:]\n        snps.append(splt)\n\nprint(snpNames)\nprint(chrm)\nprint(snps_dict)\nprint(snps)\n</code></pre>\n\n<p>which yields:</p>\n\n<pre><code>['SNP', 'Name', 'ss715583617', 'ss715592335', 'ss715591044', \n 'ss7155(98181']\n['Chromosome', 'Gm02', 'Gm05', 'Gm05', 'Gm07']\n{'PI065549': ['T', 'A', 'A', 'T'], 'PI101404A': ['T', 'A', 'A', 'T'], \n 'PI081762': ['T', 'A', 'A', 'T'], 'PI101404B': ['T', 'A', 'A', 'T']}\n[['PI065549', 'T', 'A', 'A', 'T'], ['PI081762', 'T', 'A', 'A', 'T'], \n ['PI101404A', 'T', 'A', 'A', 'T'], ['PI101404B', 'T', 'A', 'A', 'T']]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438811296, "post_id": 31843237, "comment_id": 51608349, "body": "wow, yeah i&#39;ll try that, thanks, i&#39;m such a newbie to python&#39;"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438811451, "post_id": 31843237, "comment_id": 51608406, "body": "For what you are doing, it is pretty much tailor-made. You will need to pip install it to use it but it makes a lot of jobs very simple."}, {"owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438863915, "post_id": 31843237, "comment_id": 51630679, "body": "I was wondering if there is a way to for loop through each column to determine which is the most abundant letter for each column. I&#39;m a bit confused on how to use a forloop with pandas."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438863991, "post_id": 31843237, "comment_id": 51630738, "body": "you want the count of the letters for each row or column?"}, {"owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "edited": false, "score": 0, "creation_date": 1438864112, "post_id": 31843237, "comment_id": 51630840, "body": "each column. I need to count them for each column then eventually replace those results with an integer value, but analyze all the columns separately."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1438810792, "last_edit_date": 1438810792, "creation_date": 1438810455, "answer_id": 31843237, "question_id": 31842602, "link": "https://stackoverflow.com/questions/31842602/python-for-loop-through-a-lists-of-lists-in-or-change-data-to-2-dimensional-arr/31843237#31843237", "title": "python: for loop through a lists of lists in or change data to 2 dimensional array", "body": "<p>If you have a tab delimited file you can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow\">pandas</a> to create a dataframe:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv(\"/home/dfreese/Desktop/testSNPtext\"),delimiter=\"\\t\",header=None,names=[\"a\",\"b\",\"c\",\"d\",\"e\"]))\n</code></pre>\n\n<p>Which should give you a dataframe something like:</p>\n\n<pre><code>                   a            b            c            d             e\n0       SNP Name  ss715583617  ss715592335  ss715591044  ss7155(98181\n1     Chromosome         Gm02         Gm05         Gm05          Gm07\n2       Position      5581696      6943050     34695858      43520803\n3  Cultivar Name          NaN          NaN          NaN           NaN\n4       PI065549            A            A            T           NaN\n5       PI081762            A            A            T           NaN\n6      PI101404A            A            A            T           NaN\n7      PI101404B            A            A            T           NaN\n</code></pre>\n\n<p>To get the last four rows together:</p>\n\n<pre><code> print(df.iloc[4:8])\n           a  b  c  d    e\n4   PI065549  A  A  T  NaN\n5   PI081762  A  A  T  NaN\n6  PI101404A  A  A  T  NaN\n7  PI101404B  A  A  T  NaN\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 4731088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ebbd27150d425b3695f9a31f02cc2271?s=128&d=identicon&r=PG&f=1", "display_name": "DJF", "link": "https://stackoverflow.com/users/4731088/djf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1438810792, "creation_date": 1438807966, "last_edit_date": 1438810518, "question_id": 31842602, "link": "https://stackoverflow.com/questions/31842602/python-for-loop-through-a-lists-of-lists-in-or-change-data-to-2-dimensional-arr", "title": "python: for loop through a lists of lists in or change data to 2 dimensional array", "body": "<p>I'm struggling a bit with python. I have a tab delimited text file that looks like: </p>\n\n<pre><code>SNP Name    ss715583617 ss715592335 ss715591044 ss7155(98181\nChromosome  Gm02    Gm05    Gm05    Gm07\nPosition    5581696 6943050 34695858    43520803\nCultivar Name               \nPI065549    T   A   A   T\nPI081762    T   A   A   T\nPI101404A   T   A   A   T\nPI101404B   T   A   A   T\n</code></pre>\n\n<p>I need to read the line: SNP Name into one array, Chromosome into one array, omit position, omit Cultivar Name. then place the data that starts with PI065549 T A A T into a 2 D array some how. What I have with python is the data in a list of lists. My questions are : </p>\n\n<ol>\n<li>From my code, do I have my data into a list of lists?</li>\n<li>How can I iterate through the list of lists with index position to analyze the Data? For my analysis its important do be able to do column wise analysis on it. </li>\n</ol>\n\n<p>My main objective is to analyze the data by a column wise analysis to convert the chars to integers depending some conditions. </p>\n\n<p>My code so far is: </p>\n\n<pre><code>snpNames = [] #to hold snp names(column titles) \nchrm = [] #to hold chr, needed later for random sampling \nnumLines = 0; # to determine how many lines in the files, needed to     determine size of 2 d array \n\nsnps = [[]] ## store the snp data in a list of lists...\n\nwith open(\"/home/dfreese/Desktop/testSNPtext\") as file: \n\n    #read in the first line these contain the names and store into an array \n    firstLine = file.readline().strip()\n    for i in firstLine.split(\"\\t\"): \n        snpNames.append(i)\n\n    #second line contains the chr data, read that into the chr array\n    secondLine = file.readline().strip()\n    for i in secondLine.split(\"\\t\"):\n        chrm.append(i)\n\n\n     ## read in the remaining lines and fill in the 2 d array    \n    for line in lines: \n        snps.append(line.strip().split(\"\\t\"))\n\nfile.close()\n\n\n#check that the data is ok \nfor i in snps: \n    print (i)\n</code></pre>\n\n<p>Any help would be appreciated. I'm used to coding in C++ and Java but for this data analysis Python was requested and I'm a bit stuck. Any suggestions or improvements would be greatly appreciated. </p>\n"}, {"tags": ["python", "list", "list-comprehension"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438807587, "post_id": 31842479, "comment_id": 51606532, "body": "You mean <code>pluralize(data), data</code>; your plural forms come first.."}, {"owner": {"reputation": 5587, "user_id": 1167227, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/305d155cd524f2b5a6fb5715a34f19c9?s=128&d=identicon&r=PG", "display_name": "wolfgang", "link": "https://stackoverflow.com/users/1167227/wolfgang"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438807767, "post_id": 31842479, "comment_id": 51606621, "body": "@MartijnPieters Yes, edited, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 6, "last_activity_date": 1438807610, "creation_date": 1438807610, "answer_id": 31842505, "question_id": 31842479, "link": "https://stackoverflow.com/questions/31842479/python-list-comprehension-how-to-insert-2-elements-at-a-time/31842505#31842505", "title": "Python - List comprehension how to insert 2 elements at a time?", "body": "<p>You could add another loop:</p>\n\n<pre><code>[word for data in input_list for word in (pluralize(data), data)]\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; plural_forms = {'wolf': 'wolves', 'dog': 'dogs', 'cat': 'cats', 'cow': 'cows', 'pig': 'pigs'}\n&gt;&gt;&gt; pluralize = plural_forms.get\n&gt;&gt;&gt; input_list = [\"wolf\",\"dog\",\"cat\",\"cow\",\"pig\"]\n&gt;&gt;&gt; [word for data in input_list for word in (pluralize(data), data)]\n['wolves', 'wolf', 'dogs', 'dog', 'cats', 'cat', 'cows', 'cow', 'pigs', 'pig']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5587, "user_id": 1167227, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/305d155cd524f2b5a6fb5715a34f19c9?s=128&d=identicon&r=PG", "display_name": "wolfgang", "link": "https://stackoverflow.com/users/1167227/wolfgang"}, "edited": false, "score": 0, "creation_date": 1438809790, "post_id": 31842770, "comment_id": 51607656, "body": "This works, but how does <code>sum()</code> flatten the list of lists?"}, {"owner": {"reputation": 6813, "user_id": 40745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bd8922fc2abf42b857927ec447b64f8?s=128&d=identicon&r=PG", "display_name": "tangentstorm", "link": "https://stackoverflow.com/users/40745/tangentstorm"}, "reply_to_user": {"reputation": 5587, "user_id": 1167227, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/305d155cd524f2b5a6fb5715a34f19c9?s=128&d=identicon&r=PG", "display_name": "wolfgang", "link": "https://stackoverflow.com/users/1167227/wolfgang"}, "edited": false, "score": 3, "creation_date": 1438809880, "post_id": 31842770, "comment_id": 51607705, "body": "It works because <code>+</code> is a concatenation operator for lists in python. <code>[1] + [2] == [1, 2]</code>"}], "tags": [], "owner": {"reputation": 6813, "user_id": 40745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bd8922fc2abf42b857927ec447b64f8?s=128&d=identicon&r=PG", "display_name": "tangentstorm", "link": "https://stackoverflow.com/users/40745/tangentstorm"}, "is_accepted": false, "score": 6, "last_activity_date": 1438808553, "creation_date": 1438808553, "answer_id": 31842770, "question_id": 31842479, "link": "https://stackoverflow.com/questions/31842479/python-list-comprehension-how-to-insert-2-elements-at-a-time/31842770#31842770", "title": "Python - List comprehension how to insert 2 elements at a time?", "body": "<pre><code>sum([[x, plural(x)] for x in data], [])\n</code></pre>\n\n<p>likewise:</p>\n\n<pre><code>&gt;&gt;&gt; sum([[x, x.upper()] for x in \"hello\"], [])\n['h', 'H', 'e', 'E', 'l', 'L', 'l', 'L', 'o', 'O']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 477, "user_id": 4999377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afd6b2034def64ace27430fcbbda348?s=128&d=identicon&r=PG&f=1", "display_name": "True if u_believe else False", "link": "https://stackoverflow.com/users/4999377/true-if-u-believe-else-false"}, "is_accepted": false, "score": 0, "last_activity_date": 1438857731, "creation_date": 1438857731, "answer_id": 31853667, "question_id": 31842479, "link": "https://stackoverflow.com/questions/31842479/python-list-comprehension-how-to-insert-2-elements-at-a-time/31853667#31853667", "title": "Python - List comprehension how to insert 2 elements at a time?", "body": "<p>I hope this Helps,</p>\n\n<pre><code>output_list = [item for sublist in [[pluralize(data),data] for data in input_list]for item in sublist]\n</code></pre>\n\n<p>Best,</p>\n"}], "owner": {"reputation": 5587, "user_id": 1167227, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/305d155cd524f2b5a6fb5715a34f19c9?s=128&d=identicon&r=PG", "display_name": "wolfgang", "link": "https://stackoverflow.com/users/1167227/wolfgang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1581, "favorite_count": 2, "accepted_answer_id": 31842505, "answer_count": 3, "score": 2, "last_activity_date": 1447137321, "creation_date": 1438807507, "last_edit_date": 1447137321, "question_id": 31842479, "link": "https://stackoverflow.com/questions/31842479/python-list-comprehension-how-to-insert-2-elements-at-a-time", "title": "Python - List comprehension how to insert 2 elements at a time?", "body": "<p>I have a <code>pluralize</code> function in python which prints the plural form of a word</p>\n\n<pre><code>pluralize(\"wolf\") = wolves\n</code></pre>\n\n<p>for example, in my input_list</p>\n\n<pre><code>input_list = [\"wolf\",\"dog\",\"cat\",\"cow\",\"pig\"]\n</code></pre>\n\n<p>I can do this simple list comprehension to get the plural forms populated</p>\n\n<pre><code>output_list = [pluralize(data) for data in input_list]\n</code></pre>\n\n<p>giving <code>[\"wolves\",\"dogs\",\"cats.....]</code></p>\n\n<p>However I need</p>\n\n<pre><code>[\"wolves\",\"wolf\",\"dogs\",\"dog\",\"cats\",\"cat\",\"cows\",\"cow\"....]\n</code></pre>\n\n<p>How can I get this list generated by comprehension?</p>\n\n<p>I mean something like </p>\n\n<pre><code>output_list = [pluralize(data),data for data in input_list]\n</code></pre>\n\n<p>(obviously doesn't work)</p>\n"}, {"tags": ["python", "django", "django-templates"], "answers": [{"tags": [], "owner": {"reputation": 2591, "user_id": 4848774, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/DKYSZ.png?s=128&g=1", "display_name": "jape", "link": "https://stackoverflow.com/users/4848774/jape"}, "is_accepted": false, "score": 0, "last_activity_date": 1438807820, "creation_date": 1438807820, "answer_id": 31842556, "question_id": 31842433, "link": "https://stackoverflow.com/questions/31842433/trouble-creating-a-foreignkey-relationship-for-my-userprofile-immediately-upon-u/31842556#31842556", "title": "Trouble creating a ForeignKey relationship for my UserProfile immediately upon User registration", "body": "<p>I would begin by changing your relationship to a <code>OneToOneField</code>.</p>\n\n<pre><code>class UserProfile(models.Model):\n    age = models.CharField(max_length=100)\n    interests = models.TextField(default=\"\")\n    user = models.OneToOneField(User)\n</code></pre>\n\n<p>Next, I would make a <code>post_save</code> signal to generate the new profile.</p>\n\n<pre><code>django.db.models.signals import post_save\n\ndef new_user_receiver(sender, instance, created, *args, **kwargs):\n    if created:         \n        new_profile, is_created = UserProfile.objects.get_or_create(user=instance)\n\npost_save.connect(new_user_receiver, sender=User)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 885, "user_id": 2568279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aj50J.jpg?s=128&g=1", "display_name": "Agust&#237;n Lado", "link": "https://stackoverflow.com/users/2568279/agust%c3%adn-lado"}, "is_accepted": true, "score": 1, "last_activity_date": 1438808011, "creation_date": 1438808011, "answer_id": 31842611, "question_id": 31842433, "link": "https://stackoverflow.com/questions/31842433/trouble-creating-a-foreignkey-relationship-for-my-userprofile-immediately-upon-u/31842611#31842611", "title": "Trouble creating a ForeignKey relationship for my UserProfile immediately upon User registration", "body": "<p>The recommended approach to creating a UserProfile when creating a User is to use the <a href=\"https://docs.djangoproject.com/en/1.8/ref/signals/#post-save\" rel=\"nofollow\">post_save</a> signal (<a href=\"https://docs.djangoproject.com/en/1.8/topics/signals/\" rel=\"nofollow\">here</a> is the docs page explaining what they are).</p>\n\n<p>What basically happens is that when a User model is created (saved for the first time) we create a UserProfile object linked to the User. Like so:</p>\n\n<pre><code>from django.contrib.auth.models import User\nfrom django.db import models\nfrom django.dispatch import receiver\n\n@receiver(models.signals.post_save, sender=User)\ndef create_user_profile(sender, instance=None, created=False, **kwargs):\n    if created:\n        UserProfile.objects.get_or_create(user=instance)\n</code></pre>\n\n<p>NOTE: if you use a ForeignKey instead of a <a href=\"https://docs.djangoproject.com/en/1.8/topics/db/examples/one_to_one/\" rel=\"nofollow\">OneToOneField</a> you're going to end up in a situation where an User has several UserProfiles (and thus you can't do <code>user.user_profile</code>).</p>\n\n<p>The signal will be triggered when you do <code>user.save()</code>, so from there onwards you can just do (assuming you change the field to a OneToOneField):</p>\n\n<pre><code>user.user_profile.interests = interests\nuser.user_profile.age = age\nuser.user_profile.save()\n</code></pre>\n\n<p>to accomplish what you want to do.</p>\n"}], "owner": {"reputation": 1273, "user_id": 4872015, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7d2313582b1be58ee5a44783dc612ab?s=128&d=identicon&r=PG&f=1", "display_name": "alpalalpal", "link": "https://stackoverflow.com/users/4872015/alpalalpal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 31842611, "answer_count": 2, "score": 0, "last_activity_date": 1438808011, "creation_date": 1438807287, "question_id": 31842433, "link": "https://stackoverflow.com/questions/31842433/trouble-creating-a-foreignkey-relationship-for-my-userprofile-immediately-upon-u", "title": "Trouble creating a ForeignKey relationship for my UserProfile immediately upon User registration", "body": "<p>I am trying to have a user registration form submit into two models (User and UserProfile) and immediately create the relationship where the UseProfile belongs to the User. I think the problem is about passing the request.user.id to the UserProfile model so that it knows who it belongs to.</p>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\nclass UserProfile(models.Model):\n    age = models.CharField(max_length=100)\n    interests = models.TextField(default=\"\")\n    user = models.ForeignKey(User)\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.contrib.auth.models import User\nfrom .models import UserProfile\nfrom django.contrib.auth import authenticate, login\n\ndef user_creation_view(request):\n    if request.method == \"POST\":\n        username = request.POST.get('username', None)\n        password = request.POST.get('password', None)\n        user = User.objects.create_user(username=username, password=password)\n        user.save()\n        user = authenticate(username=username, password=password)\n        login(request, user)\n        interests = request.POST.get('interests', None)\n        age = request.POST.get('age', None)        \n        pk = request.user.id\n        user_profile = UserProfile.objects.create(age=age, interests=interests, user=pk)\n    return render(request, \"profiles/user_creation_template.html\")\n</code></pre>\n\n<p>user_creation_template.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;  \n&lt;form method=\"post\" action=\"{% url \"user_creation\" %}\"&gt;\n    {% csrf_token %}\n    &lt;input type=\"text\" name=\"username\" placeholder=\"Username\"&gt;\n    &lt;input type=\"password\" name=\"password\" placeholder=\"Password\"&gt;\n    &lt;input type=\"text\" placeholder=\"Interests\" name=\"interests\"&gt;\n    &lt;input type=\"text\" placeholder=\"age\" name=\"age\"&gt;\n    &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "string", "list", "python-3.x", "spyder"], "comments": [{"owner": {"reputation": 3591, "user_id": 4107956, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LjlBF.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4107956/will"}, "edited": false, "score": 0, "creation_date": 1438807402, "post_id": 31842432, "comment_id": 51606401, "body": "Please post your code, and the output."}, {"owner": {"reputation": 136, "user_id": 5094773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba1180d1e755e1fb803650bdf0c51de?s=128&d=identicon&r=PG&f=1", "display_name": "AJ Uppal", "link": "https://stackoverflow.com/users/5094773/aj-uppal"}, "edited": false, "score": 0, "creation_date": 1438807442, "post_id": 31842432, "comment_id": 51606437, "body": "Is this in a file? Or is it a multi-line string (<code>&quot;&quot;&quot;</code>)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438807560, "post_id": 31842432, "comment_id": 51606513, "body": "is it a list or a string?"}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 1, "creation_date": 1438807566, "post_id": 31842432, "comment_id": 51606519, "body": "This question is currently impossible to answer because it entirely depends on how the &quot;this is what I have&quot; part is stored in the first place, and you have totally left that out."}, {"owner": {"reputation": 73, "user_id": 5141032, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/05f88c425bf87280c623c52bedc5265a?s=128&d=identicon&r=PG&f=1", "display_name": "qlzlahs", "link": "https://stackoverflow.com/users/5141032/qlzlahs"}, "edited": false, "score": 0, "creation_date": 1438809608, "post_id": 31842432, "comment_id": 51607564, "body": "it is written onto a created output file called &#39;output.txt&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438809143, "post_id": 31842565, "comment_id": 51607345, "body": "What if it&#39;s in a text file? That&#39;s what I meant with my last comment and why the question is too broad: you shouldn&#39;t have to have a 4- or 5-part answer covering all your guesses at what OP meant."}, {"owner": {"reputation": 136, "user_id": 5094773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba1180d1e755e1fb803650bdf0c51de?s=128&d=identicon&r=PG&f=1", "display_name": "AJ Uppal", "link": "https://stackoverflow.com/users/5094773/aj-uppal"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438809777, "post_id": 31842565, "comment_id": 51607649, "body": "@Two-BitAlchemist fair enough"}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438810047, "post_id": 31842565, "comment_id": 51607783, "body": "It&#39;s in a file, which I already suspected. I think this is homework, hence the &quot;5&quot; at the beginning to show you the length of the list (so you don&#39;t have to calculate it, even though that&#39;s very easy). I have nominated the question for reopening, but in the meantime I think if you add part 3: &quot;if it&#39;s in a file&quot; to your answer it&#39;s worth accepting."}], "tags": [], "owner": {"reputation": 136, "user_id": 5094773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba1180d1e755e1fb803650bdf0c51de?s=128&d=identicon&r=PG&f=1", "display_name": "AJ Uppal", "link": "https://stackoverflow.com/users/5094773/aj-uppal"}, "is_accepted": false, "score": 1, "last_activity_date": 1438808246, "last_edit_date": 1438808246, "creation_date": 1438807835, "answer_id": 31842565, "question_id": 31842432, "link": "https://stackoverflow.com/questions/31842432/changing-a-string-and-list-of-list-into-a-string/31842565#31842565", "title": "changing a string and list of list into a string", "body": "<p>If it is in a multi-line string (<code>\"\"\"</code>):</p>\n\n<pre><code>&gt;&gt;&gt; data = \"\"\"5 [[ 1  2  23  12  6]                                                                                                           ...  [ 3  4 5  6 7]\n...  [1 1 1  2 1]\n...  [ 25 26  27 28 29]\n...  [ 1  1 0 1 3]]\"\"\"\n&gt;&gt;&gt; print ' '.join([item for item in ''.join(data.split('\\n')).replace('[[', '\\n').replace('[', '').replace(']', '\\n').split(' ') if len(item)]).replace('\\n ', '\\n').replace('\\n\\n', '')\n5 \n1 2 23 12 6\n3 4 5 6 7\n1 1 1 2 1\n25 26 27 28 29\n1 1 0 1 3\n&gt;&gt;&gt; \n</code></pre>\n\n<p>This parses the data using some <code>join</code>s, <code>replace</code>s, and <code>split</code>s.</p>\n\n<hr>\n\n<p>If it is in a list:</p>\n\n<pre><code>&gt;&gt;&gt; data = [[1, 2, 23, 12, 6], [3, 4, 5, 6, 7], [1, 1, 1, 2, 1], [25, 26, 27, 28, 29], [1, 1, 0, 1, 3]]\n&gt;&gt;&gt; def foo(data):\n...     print len(data)\n...     for i in data:\n...             print ' '.join([str(item) for item in i])\n... \n&gt;&gt;&gt; foo(data)\n5\n1 2 23 12 6\n3 4 5 6 7\n1 1 1 2 1\n25 26 27 28 29\n1 1 0 1 3\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5141032, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/05f88c425bf87280c623c52bedc5265a?s=128&d=identicon&r=PG&f=1", "display_name": "qlzlahs", "link": "https://stackoverflow.com/users/5141032/qlzlahs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "closed_date": 1438809915, "answer_count": 1, "score": 0, "last_activity_date": 1438809562, "creation_date": 1438807286, "last_edit_date": 1438809562, "question_id": 31842432, "link": "https://stackoverflow.com/questions/31842432/changing-a-string-and-list-of-list-into-a-string", "closed_reason": "Not suitable for this site", "title": "changing a string and list of list into a string", "body": "<p>This is what I have printed in an output file called 'output.txt':  </p>\n\n<pre><code>5 [[ 1  2  23  12  6]\n [ 3  4 5  6 7]\n [1 1 1  2 1]\n [ 25 26  27 28 29]\n [ 1  1 0 1 3]]\n</code></pre>\n\n<p>This is the string that I want to have:  </p>\n\n<pre><code>5\n1 2 23 12 6\n3 4 5 6 7\n1 1 1 2 1\n25 26 27 28 29\n1 1 0 1 3\n</code></pre>\n\n<p>(5 is the number of columns and rows).<br>\nI've tried doing split('[]') and \" \".join(), but they both don't work. What code do I need to change this?  </p>\n\n<p>** The numbers inside the list are random numbers that I just made up</p>\n"}, {"tags": ["python", "string", "csv", "boolean"], "comments": [{"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 2, "creation_date": 1438807517, "post_id": 31842424, "comment_id": 51606478, "body": "You could check this quickly yourself. Print out <code>repr(value)</code>; do you get <code>&#39;0&#39;</code> or <code>0</code>? The former is a string, and it will be treated as <code>True</code>."}, {"owner": {"reputation": 381, "user_id": 4739392, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ffa78ed3f498cec281dbe569e34dcb14?s=128&d=identicon&r=PG&f=1", "display_name": "codycrossley", "link": "https://stackoverflow.com/users/4739392/codycrossley"}, "reply_to_user": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1438807660, "post_id": 31842424, "comment_id": 51606565, "body": "@RobKennedy, that did the trick and answers my question. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 4739392, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ffa78ed3f498cec281dbe569e34dcb14?s=128&d=identicon&r=PG&f=1", "display_name": "codycrossley", "link": "https://stackoverflow.com/users/4739392/codycrossley"}, "edited": false, "score": 0, "creation_date": 1438807720, "post_id": 31842481, "comment_id": 51606599, "body": "Yes, I just checked using RobKennedy&#39;s answer, which helped. I tested your method, and that worked just fine. Thank you!"}], "tags": [], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "is_accepted": false, "score": 1, "last_activity_date": 1438807510, "creation_date": 1438807510, "answer_id": 31842481, "question_id": 31842424, "link": "https://stackoverflow.com/questions/31842424/boolean-value-of-fields-in-csv-file-in-python/31842481#31842481", "title": "Boolean value of fields in .csv file in Python", "body": "<p>I believe it is reading the value as the string <code>\"0\"</code>, which is a truthy value. Try using <code>int(field)</code> instead of the field itself.</p>\n"}], "owner": {"reputation": 381, "user_id": 4739392, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ffa78ed3f498cec281dbe569e34dcb14?s=128&d=identicon&r=PG&f=1", "display_name": "codycrossley", "link": "https://stackoverflow.com/users/4739392/codycrossley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438807510, "creation_date": 1438807266, "question_id": 31842424, "link": "https://stackoverflow.com/questions/31842424/boolean-value-of-fields-in-csv-file-in-python", "title": "Boolean value of fields in .csv file in Python", "body": "<p>I have a CSV file that I'm reading. One of the fields contains only 1s and 0s. I was under the assumption that Python will return a Boolean value of False for 0, but when my program reads a field whose value is 0, it returns True.</p>\n\n<p>Is this because entries read in a .csv file are strings?</p>\n"}, {"tags": ["python", "machine-learning"], "comments": [{"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1438807474, "post_id": 31842367, "comment_id": 51606457, "body": "The entire error msg, please"}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1438809356, "post_id": 31842367, "comment_id": 51607453, "body": "@GeorgeSolymosi <code>Error:3.624 &#47;&#47;anaconda&#47;bin&#47;ipython:19: RuntimeWarning: overflow encountered in exp</code>The code does produce some result, but the result is just far from being correct."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 1, "creation_date": 1438810070, "post_id": 31842367, "comment_id": 51607803, "body": "I see one error, when back propagating you need to multiply on derivative of argument, not result. I mean that &#39;nonlin(l2,deriv=True)&#39; and &#39;nonlin(l1,deriv=True)&#39; - not correct, it must be &#39;nonlin(np.dot(l1, syn1),deriv=True)&#39; and &#39;nonlin(np.dot(l0, syn0),deriv=True)&#39; respectively. Also, give link on this file mnist.pkl.gz, i somehow can&#39;t see it."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1438810676, "post_id": 31842367, "comment_id": 51608064, "body": "@Olologin very sorry for the confusion, the package is the same according to <a href=\"http://deeplearning.net/tutorial/gettingstarted.html\" rel=\"nofollow noreferrer\">this site</a>. Since it&#39;s just download and unzipping the data, I just followed the exact code."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1438811384, "post_id": 31842367, "comment_id": 51608377, "body": "@Olologin would you clarify it a bit more? I&#39;m assuming you&#39;re talking about <code>l2_delta = l2_error*nonlin(l2,deriv=True)</code> and should be <code>l2_delta=l2_error*nonlin(np.dot(l1, syn1),deriv=True)</code> instead? I tried it and it still produces the same error."}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 1, "creation_date": 1438812510, "post_id": 31842367, "comment_id": 51608777, "body": "@Olologin I don&#39;t think that&#39;s it, because <code>l2</code> and <code>l1</code> already store the needed dot products."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 1, "creation_date": 1438812947, "post_id": 31842367, "comment_id": 51608944, "body": "@IVlad, it is wrong, you can derivate this from loss function, use chain rule."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 1, "creation_date": 1438813369, "post_id": 31842367, "comment_id": 51609121, "body": "@JChao, In fact this NN unsuitable for this task. You need to classify digits to 10 classes, how can you do this just with 1 binary output? You need 10 of them, also on every layer of NN you need additional bias neuron, etc. This code needs serious reworking for digit recognition."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1438813886, "post_id": 31842367, "comment_id": 51609295, "body": "@Olologin I&#39;m just trying things out here since I&#39;ve never really delve into NN before. Where would you recommend to start tweaking the code? Or do you think there&#39;s just no simple way using NN to solve this problem? I thought the predicted values will be ranged from 0 to 9, so I can simply do quantization later to get the result. Not a good idea?"}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1438814250, "post_id": 31842367, "comment_id": 51609426, "body": "@Olologin I don&#39;t see how it&#39;s wrong. <code>l1</code> already has the nonlinearity of the dot product applied at line <code>29</code>. That part is correct."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1438814406, "post_id": 31842367, "comment_id": 51609480, "body": "@JChao, This task is easy in fact, it solvable by NN, but with correctly desighned NN. I&#39;d recommend to start from courses about ml, i like this one <a href=\"https://www.coursera.org/learn/machine-learning\" rel=\"nofollow noreferrer\">coursera.org/learn/machine-learning</a>, it offers some implementations of ml algos, including good and fast NN (4-th homework is about learning NN on exactly this dataset of handwritten digits), also after this course you will understand why for example you need 10 outputs instead of 1."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1438815095, "post_id": 31842367, "comment_id": 51609716, "body": "@IVlad For last layer: <a href=\"http://www.wolframalpha.com/input/?i=d%2Fdw+%28t-s%28w%2Ax%29%29%5E2\" rel=\"nofollow noreferrer\">wolframalpha</a>  You see that s&#39;(wx) in derivative? It&#39;s not s&#39;(s(wx)) as computed in code. Why you think that it&#39;s ok?"}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1438815380, "post_id": 31842367, "comment_id": 51609801, "body": "@Olologin look at how the derivative is implemented in <code>nonlin</code>. As <code>x(1-x)</code>. This assumes that <code>x</code> is already passed with sigmoid applied to it, which it is. I&#39;m not sure what you&#39;re saying is wrong in this case."}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 1, "creation_date": 1438815475, "post_id": 31842367, "comment_id": 51609829, "body": "@Olologin the code doesn&#39;t compute <code>s&#39;(s(wx))</code>. It computes <code>g(s(wx))</code>, where <code>g(x) = x(1-x)</code>, which is correct."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 1, "creation_date": 1438815544, "post_id": 31842367, "comment_id": 51609845, "body": "@IVlad, Oh sorry, i didn&#39;t see his nonlin implementation for derivative, now i see that all ok with it, my fault."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1438902078, "post_id": 31842367, "comment_id": 51653458, "body": "@Olologin Thanks! I&#39;ll take a look. I actually had quite some training in ML, though you might wonder why I&#39;d done such a poor job on this piece of code. NN has been a part where I suffer (another being Bayesian Inference). Part of the reason why I want to make this code work to learn something"}], "answers": [{"comments": [{"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 0, "creation_date": 1438994601, "post_id": 31843939, "comment_id": 51694522, "body": "first, thanks for this detailed explanation of what can be improved and implemented. Here&#39;s what I have modified. 1) I changed the tags to a 3000 x 10 matrix that has 1s to indicate what number each sample represents. 2) I initialized my <code>syn0</code> and <code>syn1</code> to have smaller weight, such that <code>syn0 = (2*np.random.random((784,len(train_sample))) - 1)&#47;8</code>, which is basically the same as what you provided. 3) I added learning rate and weight decay to the algorithm, having the values of 0.01 and 0.01, respectively (I&#39;ll modify the number later based on performance). However problem remains."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 0, "creation_date": 1438995033, "post_id": 31843939, "comment_id": 51694598, "body": "note that it&#39;s the overflow problem I&#39;m talking about. However the result is not desired either. Judging from the result, the mean prediction error is 0.1, which is far from what I expected (somewhere around 10^-6, a number we used often in our class projects/assignments). Is the overflow causing the problem? The training samples are already normalized, so I&#39;m not sure what else I can do to fix it."}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 1, "creation_date": 1439014402, "post_id": 31843939, "comment_id": 51697691, "body": "@JChao can you post the new code pleas? How many hidden units are you using? Are you taking the neuron that returns the highest probability from the output layer? I&#39;m not sure what you mean be mean prediction error. Aren&#39;t you using accuracy as a performance measure?"}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 0, "creation_date": 1439157981, "post_id": 31843939, "comment_id": 51732463, "body": "sorry for the confusion. I made a mistake there. I mistakenly set a threshold that&#39;s meant for stopping the loop when the change between two iterations are too small and applied it to the error rate of the NN. Please disregard my comment and read the edited version of the post. Hope this will give you a better idea. The overflow problem still remains."}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 1, "creation_date": 1439158738, "post_id": 31843939, "comment_id": 51732621, "body": "@JChao can you post what <code>train_tag_bool</code> is in your code?"}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 1, "creation_date": 1439197922, "post_id": 31843939, "comment_id": 51744269, "body": "@JChao I posted something that works pretty well for me. Give it a try. Let me know what results you get and if it works for you or you manage to improve it."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 0, "creation_date": 1439256728, "post_id": 31843939, "comment_id": 51775194, "body": "Thanks for the modified code. I have some questions about your implementation though. What&#39;s the reason for directly taking the values from <code>train_set</code> to be <code>train_x</code> and <code>train_y</code> a bad practice? Also, you have <code>train_x = train_x</code>, what&#39;s the reason behind this? Can you also explain momentum? I&#39;m trying to make sure I understand this thoroughly. Again thanks for helping!"}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 1, "creation_date": 1439276470, "post_id": 31843939, "comment_id": 51781349, "body": "@JChao the <code>train_x = train_x</code> part doesn&#39;t do anything, you can remove it :). I was playing around with using less instances and then I forgot to delete it. <code>train_set</code> is a pair, I just split it into <code>train_x, train_y</code> (the components of the pair) with that syntax. It&#39;s the same as what you were doing, just more concise and in line with standard notation (<code>x</code> = features, <code>y</code> = labels / targets). For momentum, I used Nesterov Momentum, which you can read about in detail here: <a href=\"http://cs231n.github.io/neural-networks-3/#sgd\" rel=\"nofollow noreferrer\">cs231n.github.io/neural-networks-3/#sgd</a> basically, it implements acceleration for the learning rate."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 0, "creation_date": 1439327081, "post_id": 31843939, "comment_id": 51813154, "body": "really thank you for putting the work into it. I picked up a lot of good tips from this thread. It&#39;s people like you who made this community great! Thanks again!"}, {"owner": {"reputation": 890, "user_id": 5128720, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9dc484778c21fa8632f85403f9763782?s=128&d=identicon&r=PG&f=1", "display_name": "pierre", "link": "https://stackoverflow.com/users/5128720/pierre"}, "edited": false, "score": 0, "creation_date": 1471131556, "post_id": 31843939, "comment_id": 65231790, "body": "return 1-x*x is equal to 1-x**2 just a typo missing the () (1-x)*x?"}], "tags": [], "owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "is_accepted": true, "score": 5, "last_activity_date": 1439209240, "last_edit_date": 1492087453, "creation_date": 1438814038, "answer_id": 31843939, "question_id": 31842367, "link": "https://stackoverflow.com/questions/31842367/neuro-network-on-mnist-result-is-not-expected/31843939#31843939", "title": "Neuro Network on MNIST--Result is not expected", "body": "<p>I can't currently run the code, but there are a few things that stand out. I'm surprised it works well even on the toy problems used on the blog.</p>\n\n<p>Before we start, you'll need more output neurons: 10 to be exact.</p>\n\n<pre><code>syn1 = 2*np.random.random((len(train_sample), 10)) - 1\n</code></pre>\n\n<p>And your labels (<code>y</code>) better by a length <code>10</code> array with a <code>1</code> at the position of the correct digit and <code>0</code> elsewhere.</p>\n\n<p>First of all, one thing I always attempt by default is to use <code>float64</code> wherever possible... which almost never changes anything, so I'm not sure if you should get into this habit or not. Probably not.</p>\n\n<p>Second, that code has no learning rate that you can set. This means that the learning rate is implicitly <code>1</code>, which is huge for your problem, where people use <code>0.01</code> or even much less. To add a learning rate <code>alpha</code>, do:</p>\n\n<pre><code>syn1 += alpha * l1.T.dot(l2_delta)\nsyn0 += alpha * l0.T.dot(l1_delta)\n</code></pre>\n\n<p>And set it to at most <code>0.01</code>. You'll have to fiddle with it for best results.</p>\n\n<p>Third, it's usually better to initialize the net with small weights. <code>[0, 1)</code> might be too big. Try:</p>\n\n<pre><code>syn0 = (np.random.random((784,len(train_sample))) - 0.5) / 4\nsyn1 = (np.random.random((len(train_sample),1)) - 0.5) / 4\n</code></pre>\n\n<p>There are more involved initialization schemes that you can search for if you're interested, but I've gotten decent results with the above.</p>\n\n<p>Fourth, regularization. The easiest to implement is probably <a href=\"https://stats.stackexchange.com/questions/29130/difference-between-neural-net-weight-decay-and-learning-rate\">weight decay</a>. Implementing weight decay <code>lambda</code> can be done like this:</p>\n\n<pre><code>syn1 += alpha * l1.T.dot(l2_delta) - alpha * lambda * syn1\nsyn0 += alpha * l0.T.dot(l1_delta) - alpha * lambda * syn0\n</code></pre>\n\n<p>Common values are also <code>&lt; 0.1</code> or even <code>&lt; 0.01</code>. </p>\n\n<p><a href=\"http://iamtrask.github.io/2015/07/28/dropout/\" rel=\"nofollow noreferrer\">Dropout</a> can also help, but it's a bit harder to implement and understand if you're just starting out, in my opinion. It's also more useful for deeper nets AFAIK. So maybe leave this for last.</p>\n\n<p>Fifth, maybe also use momentum (<a href=\"https://stats.stackexchange.com/questions/29130/difference-between-neural-net-weight-decay-and-learning-rate\">explained in the weight decay link</a>), which should decrease the learning time for your network. Also tune the number of iterations: you don't want too many, but not too few either.</p>\n\n<p>Sixth, look into <a href=\"https://en.wikipedia.org/wiki/Softmax_function\" rel=\"nofollow noreferrer\">softmax</a> for the output layer.</p>\n\n<p>Seventh, look into <a href=\"https://en.wikipedia.org/wiki/Hyperbolic_function\" rel=\"nofollow noreferrer\">tanh</a> instead of your current <code>nonlin</code> sigmoid function.</p>\n\n<p>If you apply these incrementally, you should start getting some meaningful results. I think regularization and smaller initial weights should help with the overflow errors.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I have changed the code like this. After only 100 training epochs, accuracy is <code>84.79%</code>. Not too bad with barely tweaking anything.</p>\n\n<p>I have added bias neurons, momentum, weight decay, used fewer hidden units (was way too slow with what you had), changed to <code>tanh</code> function and a few others.</p>\n\n<p>You should be able to tweak it some more from here. I use Python 3.4, so I had to change a few things to get it to run, but it's nothing major.</p>\n\n<pre><code>import pickle, gzip\nimport numpy as np\n\n#from deeplearning.net\n# Load the dataset\nf = gzip.open('mnist.pkl.gz', 'rb')\ntrain_set, valid_set, test_set = pickle.load(f, encoding='latin1')\nf.close()\n\n\n\n\n\n#sigmoid function\ndef nonlin(x, deriv=False):\n    if (deriv ==True):\n        return 1-x*x\n    return np.tanh(x)\n\n#seed random numbers to make calculation\n#deterministic (just a good practice)\n\nnp.random.seed(1)\n\ndef make_proper_pairs_from_set(data_set):\n    data_set_x, data_set_y = data_set\n\n    data_set_y = np.eye(10)[:, data_set_y].T\n\n    return data_set_x, data_set_y\n\n\ntrain_x, train_y = make_proper_pairs_from_set(train_set)\ntrain_x = train_x\ntrain_y = train_y\n\ntest_x, test_y = make_proper_pairs_from_set(test_set)\n\nprint(len(train_y))\n\n#train_set's dimension for the pixels are 50000(samples) x 784 (28x28 for each sample)\n#therefore the coefficients should be 784x50000 to make the hidden layer 50k x 50k\n\n# changed to 200 hidden neurons, should be plenty\nsyn0 = (2*np.random.random((785,200)) - 1) / 10\nsyn1 = (2*np.random.random((201,10)) - 1) / 10\n\nvelocities0 = np.zeros(syn0.shape)\nvelocities1 = np.zeros(syn1.shape)\n\nalpha = 0.01\nbeta = 0.0001\nmomentum = 0.99\n\nm = len(train_x) # number of training samples\n\n# moved the forward propagation to a function and added bias neurons\ndef forward_prop(set_x, m):\n\n    l0 = np.c_[np.ones((m, 1)), set_x]\n\n    l1 = nonlin(np.dot(l0, syn0))\n    l1 = np.c_[np.ones((m, 1)), l1]\n\n    l2 = nonlin(np.dot(l1, syn1))\n\n\n    return l0, l1, l2, l2.argmax(axis=1)\n\nnum_epochs = 100\nfor i in range(num_epochs):\n    # forward propagation\n\n    l0, l1, l2, _ = forward_prop(train_x, m)\n\n    # calculate error\n    l2_error = l2 - train_y\n\n\n    print(\"Error \" + str(i) + \": \" + str(np.mean(np.abs(l2_error))))\n    # apply sigmoid to the error \n    l2_delta = l2_error * nonlin(l2,deriv=True)\n\n    l1_error = l2_delta.dot(syn1.T)\n    l1_delta = l1_error * nonlin(l1,deriv=True)\n    l1_delta = l1_delta[:, 1:]\n\n    # update weights\n    # divide gradients by the number of samples\n    grad0 = l0.T.dot(l1_delta) / m\n    grad1 = l1.T.dot(l2_delta) / m\n\n    v0 = velocities0\n    v1 = velocities1\n\n    velocities0 = velocities0 * momentum - alpha * grad0\n    velocities1 = velocities1 * momentum - alpha * grad1\n\n\n    # divide regularization by number of samples\n    # because L2 regularization reduces to this\n    syn1 += -v1 * momentum + (1 + momentum) * velocities1 - alpha * beta * syn1 / m\n    syn0 += -v0 * momentum + (1 + momentum) * velocities0 - alpha * beta * syn0 / m\n\n\n\n# find accuracy on test set\n\npredictions = []\ncorrects = []\nfor i in range(len(test_x)): # you can eliminate this loop too with a bit of work, but this part is very fast anyway\n    _, _, _, rez = forward_prop([test_x[i, :]], 1)\n\n    predictions.append(rez[0])\n    corrects.append(test_y[i].argmax())\n\npredictions = np.array(predictions)\ncorrects = np.array(corrects)\n\nprint(np.sum(predictions == corrects) / len(test_x))\n</code></pre>\n\n<p><strong>Update 2:</strong></p>\n\n<p>If you increase the learning rate to <code>0.05</code> and the epochs to <code>1000</code>, you get <code>95.43%</code> accuracy.</p>\n\n<p>Seeding the random number generator with the current time, adding more hidden neurons (or hidden layers) and more parameter tweaks can get this simple model to about <code>98%</code> accuracy AFAIK. The problem is that it's slow to train.</p>\n\n<p>Also, this methodology isn't really sound. I optimized the parameters to increase the accuracy on the test set, so I might be overfitting the test set. You should use cross validation or the validation set.</p>\n\n<p>Anyway, as you can see, there are no overflow errors. If you want to discuss things in more detail, feel free to drop me an e-mail (address in profile).</p>\n"}], "owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 1, "accepted_answer_id": 31843939, "answer_count": 1, "score": 2, "last_activity_date": 1439209240, "creation_date": 1438807092, "last_edit_date": 1439160214, "question_id": 31842367, "link": "https://stackoverflow.com/questions/31842367/neuro-network-on-mnist-result-is-not-expected", "title": "Neuro Network on MNIST--Result is not expected", "body": "<p>After @IVlad gave me really useful feedback, I tried modifying my code, and the modified part would look like:</p>\n\n<pre><code>syn0 = (2*np.random.random((784,len(train_sample))) - 1)/8\nsyn1 = (2*np.random.random((len(train_sample),10)) - 1)/8\n\n\nfor i in xrange(10000):\n    #forward propagation\n    l0=train_sample\n    l1=nonlin(np.dot(l0, syn0))\n    l2=nonlin(np.dot(l1, syn1))\n\n    #calculate error\n    l2_error=train_tag_bool-l2\n\n    if (i% 1000) == 0:\n        print \"Error:\" + str(np.mean(np.abs(l2_error)))\n    #apply sigmoid to the error \n    l2_delta = l2_error*nonlin(l2,deriv=True)\n\n    l1_error = l2_delta.dot(syn1.T)\n    l1_delta = l1_error * nonlin(l1,deriv=True)\n    #update weights\n\n    syn1 += alpha* (l1.T.dot(l2_delta) - beta*syn1)\n    syn0 += alpha* (l0.T.dot(l1_delta) - beta*syn0)\n</code></pre>\n\n<p>Note that the tags (true label) now are in a matrix of &lt;3000 x 10>, each row is a sample and the ten columns describes which digit each sample represents. (the train_tag_bool, now to think about it it's not really in boolean format so naming is kinda bad, but for the sake of the discussion I'll keep it this way for now.) </p>\n\n<p>In this project, I'm using one hidden layer between input and output layers only, hoping it will be sufficient enough to complete the job. I have applied learning rate and weight decay, as well as making the initial weights a bit smaller.</p>\n\n<p>I used the code from the website when calculating the error rate, which is</p>\n\n<pre><code>np.mean(np.abs(l2_error))\n</code></pre>\n\n<p>and the result came out to be 0.1. I'm not sure what to take from here.</p>\n\n<p>Also, I went into the l2 layer (supposedly output layer that gives the prediction), and the values are all extremely small (&lt;10^-9 for the largest value for each sample, and the smallest can reach 10^-85). This is after only 5 iterations, though, but I doubt things will be any different had I run it for 1k loops or more. If I return the max of each row, it's always the 9th element (represents digit '9'), which is totally wrong.</p>\n\n<p>I'm stuck again on this problem. Overflow problem is and has been the biggest challenge of my whole ML experience (back then MATLAB, not Numpy), and I've yet to find a way to deal with it.....</p>\n\n<hr>\n\n<p>train_tag_bool code:</p>\n\n<pre><code>train_tag_bool=np.array([[0]*10]*len(train_tag)).astype('float64')\nfor i in range(len(train_tag)):\n    if train_tag[i]==0:\n        train_tag_bool[i][0]=1\n    elif train_tag[i]==1:\n        train_tag_bool[i][1]=1\n    elif train_tag[i]==2:\n        train_tag_bool[i][2]=1\n    elif train_tag[i]==3:\n        train_tag_bool[i][3]=1\n    elif train_tag[i]==4:\n        train_tag_bool[i][4]=1\n    elif train_tag[i]==5:\n        train_tag_bool[i][5]=1\n    elif train_tag[i]==6:\n        train_tag_bool[i][6]=1\n    elif train_tag[i]==7:\n        train_tag_bool[i][7]=1\n    elif train_tag[i]==8:\n        train_tag_bool[i][8]=1\n    elif train_tag[i]==9:\n        train_tag_bool[i][9]=1\n</code></pre>\n\n<p>Brute force, I know, but that's the least of my concern right now. The result is a 3000 x 10 matrix with 1's corresponding to what the digit is for each sample. the first element represents digit 0, the last represents 9</p>\n\n<h2>ex. [0 0 0 0 0 0 1 0 0 0] represents 6, [1 0 0 0 0 0 0 0 0 0] represents 0.</h2>\n\n<p>The original code:</p>\n\n<pre><code>import cPickle, gzip\nimport numpy as np\n\n#from deeplearning.net\n# Load the dataset\nf = gzip.open('mnist.pkl.gz', 'rb')\ntrain_set, valid_set, test_set = cPickle.load(f)\nf.close()\n\n\n\n\n\n#sigmoid function\ndef nonlin(x, deriv=False):\n    if (deriv ==True):\n        return x*(1-x)\n    return 1/(1+np.exp(-x))\n\n#seed random numbers to make calculation\n#deterministic (just a good practice)\n\nnp.random.seed(1)\n\n\n\n\n#need to decrease the sample size or else computer dies\ntrain_sample=train_set[0][0:3000]\ntrain_tag=train_set[1][0:3000]\ntrain_tag=train_tag.reshape(len(train_tag), 1)\n\n#train_set's dimension for the pixels are 50000(samples) x 784 (28x28 for each sample)\n#therefore the coefficients should be 784x50000 to make the hidden layer 50k x 50k\n\nsyn0 = 2*np.random.random((784,len(train_sample))) - 1\nsyn1 = 2*np.random.random((len(train_sample),1)) - 1\n\n\nfor i in xrange(10000):\n    #forward propagation\n    l0=train_sample\n    l1=nonlin(np.dot(l0, syn0))\n    l2=nonlin(np.dot(l1, syn1))\n\n    #calculate error\n    l2_error=train_tag-l2\n\n    if (i% 1000) == 0:\n        print \"Error:\" + str(np.mean(np.abs(l2_error)))\n    #apply sigmoid to the error \n    l2_delta = l2_error*nonlin(l2,deriv=True)\n\n    l1_error = l2_delta.dot(syn1.T)\n    l1_delta = l1_error * nonlin(l1,deriv=True)\n    #update weights\n\n    syn1 += l1.T.dot(l2_delta)\n    syn0 += l0.T.dot(l1_delta)\n</code></pre>\n\n<p>Reference:</p>\n\n<p><a href=\"http://iamtrask.github.io/2015/07/12/basic-python-network/\" rel=\"nofollow\">http://iamtrask.github.io/2015/07/12/basic-python-network/</a></p>\n\n<p><a href=\"http://yann.lecun.com/exdb/mnist/\" rel=\"nofollow\">http://yann.lecun.com/exdb/mnist/</a></p>\n"}, {"tags": ["python", "duplicates", "duplicate-removal", "duplication"], "comments": [{"owner": {"reputation": 661, "user_id": 5171073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DINumKQGaXk/AAAAAAAAAAI/AAAAAAAAAjI/FKfUWOj6H9Q/photo.jpg?sz=128", "display_name": "Cody Braun", "link": "https://stackoverflow.com/users/5171073/cody-braun"}, "edited": false, "score": 0, "creation_date": 1438807244, "post_id": 31842306, "comment_id": 51606299, "body": "Just to be clear, you want to delete rows only if they match the previous row on any column, not if they match <i>any</i> row on a given value?"}, {"owner": {"reputation": 105, "user_id": 5032188, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-YK67J4wWRN4/AAAAAAAAAAI/AAAAAAAAAb4/PetrWObweNA/photo.jpg?sz=128", "display_name": "ijaz ahamed", "link": "https://stackoverflow.com/users/5032188/ijaz-ahamed"}, "reply_to_user": {"reputation": 661, "user_id": 5171073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DINumKQGaXk/AAAAAAAAAAI/AAAAAAAAAjI/FKfUWOj6H9Q/photo.jpg?sz=128", "display_name": "Cody Braun", "link": "https://stackoverflow.com/users/5171073/cody-braun"}, "edited": false, "score": 0, "creation_date": 1438807305, "post_id": 31842306, "comment_id": 51606346, "body": "@CodyBraun only on a particular column, here based on the x.count column"}, {"owner": {"reputation": 1039, "user_id": 5020152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb59ef74a06d62ddf2602d22f74cd02?s=128&d=identicon&r=PG&f=1", "display_name": "FirebladeDan", "link": "https://stackoverflow.com/users/5020152/firebladedan"}, "edited": false, "score": 1, "creation_date": 1438807362, "post_id": 31842306, "comment_id": 51606377, "body": "<a href=\"http://stackoverflow.com/questions/19718531/selecting-unique-observations-in-a-pandas-data-frame\" title=\"selecting unique observations in a pandas data frame\">stackoverflow.com/questions/19718531/&hellip;</a> duplicated is what you&#39;re looking for. I&#39;m sure another gent on here will have your answer spun up here shortly"}, {"owner": {"reputation": 105, "user_id": 5032188, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-YK67J4wWRN4/AAAAAAAAAAI/AAAAAAAAAb4/PetrWObweNA/photo.jpg?sz=128", "display_name": "ijaz ahamed", "link": "https://stackoverflow.com/users/5032188/ijaz-ahamed"}, "reply_to_user": {"reputation": 1039, "user_id": 5020152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb59ef74a06d62ddf2602d22f74cd02?s=128&d=identicon&r=PG&f=1", "display_name": "FirebladeDan", "link": "https://stackoverflow.com/users/5020152/firebladedan"}, "edited": false, "score": 0, "creation_date": 1438807643, "post_id": 31842306, "comment_id": 51606558, "body": "@FirebladeDan We can use drop_duplicates here, But I dont want to use that here, because my column have counter values which reoccur later. So I want to do it based on the previous value only."}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1438808263, "last_edit_date": 1438808263, "creation_date": 1438807849, "answer_id": 31842567, "question_id": 31842306, "link": "https://stackoverflow.com/questions/31842306/delete-the-entire-row-if-the-a-value-in-value-is-equal-to-previous-row-in-python/31842567#31842567", "title": "Delete the entire row if the a value in value is equal to previous row in Python", "body": "<p>If you don't want to just drop dupes:</p>\n\n<pre><code>import pandas as pd\n\ndf = df.groupby((df[\"x.count\"] != df[\"x.count\"].shift()).cumsum().values).first()\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>df = df.loc[df[\"x.count\"].shift() != df[\"x.count\"]]\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5032188, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-YK67J4wWRN4/AAAAAAAAAAI/AAAAAAAAAb4/PetrWObweNA/photo.jpg?sz=128", "display_name": "ijaz ahamed", "link": "https://stackoverflow.com/users/5032188/ijaz-ahamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1962, "favorite_count": 0, "accepted_answer_id": 31842567, "answer_count": 1, "score": 0, "last_activity_date": 1438808263, "creation_date": 1438806865, "last_edit_date": 1438807585, "question_id": 31842306, "link": "https://stackoverflow.com/questions/31842306/delete-the-entire-row-if-the-a-value-in-value-is-equal-to-previous-row-in-python", "title": "Delete the entire row if the a value in value is equal to previous row in Python", "body": "<p>I am new to python programming and I need a help to delete the entire row based on the value of a single column in a dataframe. I want to delete the row, if a value in a single column is equal to the previous row value.</p>\n\n<p>The following is my data,</p>\n\n<pre><code>  x.id x.timestamp x.count\n71    1  1435114605      61\n72    1  1435114606      61\n73    1  1435114659      61\n74    1  1435114719      62\n75    1  1435114726      62\n76    1  1435114780      62\n77    1  1435155998      62\n78    1  1435156059      62\n79    1  1435156076      62\n80    1  1435156119      62\n</code></pre>\n\n<p>Here I want to delete the rows based on the x.x.count value.</p>\n\n<p>My Output should be,</p>\n\n<pre><code>  x.id x.timestamp x.count\n71    1  1435114605      61\n74    1  1435114719      62\n</code></pre>\n\n<p>I can't use drop_duplicates function because the values would be reoccuring later in the column. I want to check the previous value and delete it.</p>\n\n<p>Can anybody help me in doing this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "list", "file", "random"], "comments": [{"owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1438806834, "post_id": 31842257, "comment_id": 51606056, "body": "What is your modification for <code>read2[0]</code>  , <code>read1[0]</code> , etc?"}, {"owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1438807047, "post_id": 31842257, "comment_id": 51606171, "body": "Also, in your <code>txt</code> files are all the columns separated by a specific amount of whitespaces ( or is it arbitrary amount of whitespaces) ?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438807070, "post_id": 31842257, "comment_id": 51606188, "body": "<code>names1.read().split()</code> will read the <i>entire file</i>, and then split on <i>all</i> whitespace including linefeeds, spaces, and tabs. You&#39;d end up with something like <code>[&#39;SMITH&#39;, &#39;1.006&#39;, &#39;2,501,922&#39;, &#39;1&#39;, JOHNSON 0.81 ]</code>."}, {"owner": {"reputation": 11, "user_id": 3542484, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/660273dc56d58b4723f7d4f795a0a613?s=128&d=identicon&r=PG&f=1", "display_name": "user3542484", "link": "https://stackoverflow.com/users/3542484/user3542484"}, "reply_to_user": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1438807256, "post_id": 31842257, "comment_id": 51606310, "body": "@AnandSKumar I changed the part in the while loop."}, {"owner": {"reputation": 11, "user_id": 3542484, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/660273dc56d58b4723f7d4f795a0a613?s=128&d=identicon&r=PG&f=1", "display_name": "user3542484", "link": "https://stackoverflow.com/users/3542484/user3542484"}, "reply_to_user": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1438807388, "post_id": 31842257, "comment_id": 51606394, "body": "@AnandSKumar Mostly separated by tabs. The part after the decimal part is separated by a tab and a space."}, {"owner": {"reputation": 11, "user_id": 3542484, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/660273dc56d58b4723f7d4f795a0a613?s=128&d=identicon&r=PG&f=1", "display_name": "user3542484", "link": "https://stackoverflow.com/users/3542484/user3542484"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438807417, "post_id": 31842257, "comment_id": 51606408, "body": "@TigerhawkT3 Anyway to fix it?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438811388, "post_id": 31842257, "comment_id": 51608380, "body": "Yes, there is a way to fix it - you&#39;ll have to develop and use an algorithm that goes over each line in the file and processes it individually, building up a suitable data structure. <code>for line in names1:</code> is a popular start to this task."}], "answers": [{"tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 0, "last_activity_date": 1438809258, "last_edit_date": 1438809258, "creation_date": 1438808808, "answer_id": 31842834, "question_id": 31842257, "link": "https://stackoverflow.com/questions/31842257/printing-random-names-on-a-file/31842834#31842834", "title": "Printing random names on a file", "body": "<p>Define a function <code>get_names(filename)</code> that extracts all names from a file e.g.: </p>\n\n<pre><code>def get_names(filename):\n    with open(filename) as file:\n        return [line.split(None, 1)[0] for line in file if line.strip()]\n</code></pre>\n\n<p>Test it <em>separately</em> and then use it in your script e.g.:</p>\n\n<pre><code>#!/usr/bin/env python\nimport itertools\nimport random\n\ndef generate_random_names(surnames, male_names, female_names,\n                          choose=random.choice):\n    while True:\n        # make male/female names equally likely\n        forename = choose(choose([male_names, female_names]))\n        yield forename, choose(surnames)\n\nname_lists = map(get_names, ['surnames.txt', 'malenames.txt', 'femalenames.txt'])\nfullnames = generate_random_names(*name_lists)    \nprint(list(itertools.islice(fullnames, 50)))\n</code></pre>\n\n<p>This code may generate duplicate full names. To choose <code>k</code> <em>unique</em> random elements from a population use <code>random.sample()</code> instead.</p>\n"}], "owner": {"reputation": 11, "user_id": 3542484, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/660273dc56d58b4723f7d4f795a0a613?s=128&d=identicon&r=PG&f=1", "display_name": "user3542484", "link": "https://stackoverflow.com/users/3542484/user3542484"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438809258, "creation_date": 1438806667, "question_id": 31842257, "link": "https://stackoverflow.com/questions/31842257/printing-random-names-on-a-file", "title": "Printing random names on a file", "body": "<p>I was wondering how to print random names from a file. Basically there are 3 files which are surnames,male names and female names. The files have more than just the names. They have numbers as well. Here's an example of what the file looks like:</p>\n\n<pre><code>    SMITH   1.006    2,501,922  1\n    JOHNSON 0.81     2,014,470  2\n    WILLIAMS    0.699    1,738,413  3\n    JONES   0.621    1,544,427  4\n    BROWN   0.621    1,544,427  5\n    DAVIS   0.48     1,193,760  6\n    MILLER  0.424    1,054,488  7\n    WILSON  0.339    843,093    8\n    MOORE   0.312    775,944    9\n</code></pre>\n\n<p>I want the output to print out a last name and first name(no numbers) Here is my code so far. It works but it prints out the numbers. </p>\n\n<p>import random</p>\n\n<pre><code>def random_names(surname,male_names,female_names,integer):\nnames1 = open('surnames.txt', 'r')\nnames2 = open('malenames.txt', 'r')\nnames3 = open('femalenames.txt', 'r')\nread1=names1.read().split()\nread2=names2.read().split()\nread3=names3.read().split()\n\ngender_options = ('male', 'female')\ncount = 0\n\nwhile count&lt;integer:\n    gender_pick=random.choice(gender_options)\n\n    if gender_pick == 'male':\n        first_name=random.choice(read2)\n    elif gender_pick == 'female':\n        first_name=random.choice(read3)\n\n    last_name=random.choice(read1)\n    print (first_name,last_name)\n    count = count+1\n\n\nrandom_names('surnames.txt', 'malenames.txt', 'femalenames.txt',10)\n</code></pre>\n\n<p>Even when I modify it to read2[0] read1[0] read3[0], it just prints out the letters.</p>\n\n<pre><code>J M\nS H\nE T\nR I\nA I\nM H\nJ S\nA I\nM I\nY S\n</code></pre>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1438806945, "post_id": 31842237, "comment_id": 51606109, "body": "Welcome to the world of dynamic typing! Why should the function care if <code>c</code> is a <code>Customer</code> object? Anything with that attribute should suffice, right?"}], "answers": [{"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1438806995, "post_id": 31842289, "comment_id": 51606147, "body": "No, do not put in a <code>try...except</code>. If an object is passed in without such an attribute, that&#39;d be a <i>bug</i>. It is important that the code fails with a proper traceback in that case."}, {"owner": {"reputation": 8873, "user_id": 2913864, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8fd76251e7baccce47654c94e399b915?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2913864/alan"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438812381, "post_id": 31842289, "comment_id": 51608732, "body": "@MartijnPieters You can always <code>raise</code> if that&#39;s what &quot;you want to do&quot;.  (See the answer.)  Whether you should or not depends on the goals in your program.  Simply failing is not always an option."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438812538, "post_id": 31842289, "comment_id": 51608787, "body": "Catching the exception should only be used where not doing so is not an option. In the vast majority of cases, catching it inside this function is not a good idea."}], "tags": [], "owner": {"reputation": 8873, "user_id": 2913864, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8fd76251e7baccce47654c94e399b915?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2913864/alan"}, "is_accepted": false, "score": -1, "last_activity_date": 1438806801, "creation_date": 1438806801, "answer_id": 31842289, "question_id": 31842237, "link": "https://stackoverflow.com/questions/31842237/define-method-in-python-with-an-object-as-input/31842289#31842289", "title": "Define method in python with an object as input", "body": "<p>If an object without a <code>first_name</code> attribute is passed, this will fail.  So put that function body in a <code>try ... except</code> and decide what you want to do when it fails.</p>\n"}, {"comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438812028, "post_id": 31842379, "comment_id": 51608604, "body": "Don&#39;t sprinkle your code with <code>isintance()</code> checks.  If you <i>have to</i> use types; you could <a href=\"https://docs.python.org/3.5/whatsnew/3.5.html#pep-484-type-hints\" rel=\"nofollow noreferrer\">use type hints</a>: <code>welcome_message(c: Customer)</code>, <a href=\"https://www.jetbrains.com/pycharm/help/type-hinting-in-pycharm.html\" rel=\"nofollow noreferrer\">docstrings</a>, and/or a <a href=\"http://stackoverflow.com/q/15299878/4279\">decorator</a> (for Python 2 compatibility and/or run-time check)."}, {"owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438813981, "post_id": 31842379, "comment_id": 51609335, "body": "@J.F.Sebastian Python 3.5 hasn&#39;t been officially released yet.  Still in beta.  Docstrings is more specific to what I meant by <code>documenting your software clearly</code>.  Also I&#39;m not recommending the OP use this unless entirely necessary."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438814443, "post_id": 31842379, "comment_id": 51609492, "body": "you don&#39;t need Python 3.5 to use type hints (lookup <code>mypy-lang</code>). You don&#39;t need Python 3.5 to put type info into docstrings in the format that your IDE understands. You don&#39;t need Python 3.5 to use a type checking decorator."}, {"owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438814867, "post_id": 31842379, "comment_id": 51609635, "body": "According to <a href=\"https://www.python.org/dev/peps/pep-0484/\" rel=\"nofollow noreferrer\">PEP-484</a> type hints was accepted and instituted in Python 3.5.  I didn&#39;t take the time to check to see if it works with my Python 3.2 install.  The rest of my comments weren&#39;t Python 3.5 releated."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438816028, "post_id": 31842379, "comment_id": 51609987, "body": "PEP-484 mentions mypy explicitly that claims to work on Python 3.2+. Obviously, there could be other tools that understand function annotations for various purposes in addition to static/dynamic type checking e.g., attribute suggestions on typing dot in IDE."}, {"owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438816310, "post_id": 31842379, "comment_id": 51610080, "body": "@J.F.Sebastian I just checked and it does work on Python 3.4.  However, I couldn&#39;t find any documentation supporting type hints anywhere other than in Python 3.5."}], "tags": [], "owner": {"reputation": 7433, "user_id": 447015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ULwaG.jpg?s=128&g=1", "display_name": "James Mertz", "link": "https://stackoverflow.com/users/447015/james-mertz"}, "is_accepted": true, "score": 0, "last_activity_date": 1438807372, "last_edit_date": 1438807372, "creation_date": 1438807110, "answer_id": 31842379, "question_id": 31842237, "link": "https://stackoverflow.com/questions/31842237/define-method-in-python-with-an-object-as-input/31842379#31842379", "title": "Define method in python with an object as input", "body": "<p>The python way of thinking is that the programmer or those that use your software will be intelligent enough to use it properly so long as you've written and documented your software clearly.  More that likely when passing in the object, <code>c.first_name</code> will barf if it's not the right type.  One way to protect things is the following:</p>\n\n<pre><code>def welcome_message(c):\n    if isinstance(c, Customer):\n        msg.send(\"Hi %s\", c.first_name)\n    else:\n        raise TypeError(\"Class must be of type `Customer`\")\n</code></pre>\n\n<p>However, I would recommend not doing this, unless it's absolutely necessary.  </p>\n"}], "owner": {"reputation": 2896, "user_id": 3361028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b53a63319b061edb80dc910c10cfbfd1?s=128&d=identicon&r=PG&f=1", "display_name": "hY8vVpf3tyR57Xib", "link": "https://stackoverflow.com/users/3361028/hy8vvpf3tyr57xib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 31842379, "answer_count": 2, "score": 0, "last_activity_date": 1438807372, "creation_date": 1438806584, "question_id": 31842237, "link": "https://stackoverflow.com/questions/31842237/define-method-in-python-with-an-object-as-input", "title": "Define method in python with an object as input", "body": "<p>I just started with coding in python, at the moment I am trying to define a function that needs an object as input. Before this I just developed in Java.</p>\n\n<pre><code>def welcome_message(c):\n    msg.send(\"Hi %s\", c.first_name)\n</code></pre>\n\n<p>So this function works, I was wondering if I still should insert a constraint that c has to be on object of the type Customer? It just doesn't really feel safe for a java experienced developer...</p>\n"}, {"tags": ["python", "elasticsearch", "scrapy"], "comments": [{"owner": {"reputation": 2524, "user_id": 273125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pdRYz.jpg?s=128&g=1", "display_name": "Frank Martin", "link": "https://stackoverflow.com/users/273125/frank-martin"}, "edited": false, "score": 0, "creation_date": 1438807435, "post_id": 31842213, "comment_id": 51606426, "body": "Probably you get the link by extracting from an xpath. Add a [0] at the end of the statement to get the first item in the list (like response.xpath(...).extract()[0] ."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4702862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196c4dd2ec6675c4334a8a9a96b01af7?s=128&d=identicon&r=PG&f=1", "display_name": "chesneybrown", "link": "https://stackoverflow.com/users/4702862/chesneybrown"}, "edited": false, "score": 0, "creation_date": 1438854061, "post_id": 31847791, "comment_id": 51624363, "body": "Thanks very much! In your last sentence are you referring to a situation where I extract but one of the results has a missing link for example? How is it best to prepare for this?"}, {"owner": {"reputation": 3513, "user_id": 3941341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29f6e3654801cf7f54dddba96595399?s=128&d=identicon&r=PG", "display_name": "GHajba", "link": "https://stackoverflow.com/users/3941341/ghajba"}, "reply_to_user": {"reputation": 55, "user_id": 4702862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196c4dd2ec6675c4334a8a9a96b01af7?s=128&d=identicon&r=PG&f=1", "display_name": "chesneybrown", "link": "https://stackoverflow.com/users/4702862/chesneybrown"}, "edited": false, "score": 0, "creation_date": 1438856000, "post_id": 31847791, "comment_id": 51625739, "body": "As mentioned in the updated answer: you can prepare for this with splitting the extraction into two parts: XPath and list-elements."}, {"owner": {"reputation": 55, "user_id": 4702862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196c4dd2ec6675c4334a8a9a96b01af7?s=128&d=identicon&r=PG&f=1", "display_name": "chesneybrown", "link": "https://stackoverflow.com/users/4702862/chesneybrown"}, "edited": false, "score": 0, "creation_date": 1438856635, "post_id": 31847791, "comment_id": 51626166, "body": "Thanks alot for your help and advice!"}], "tags": [], "owner": {"reputation": 3513, "user_id": 3941341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29f6e3654801cf7f54dddba96595399?s=128&d=identicon&r=PG", "display_name": "GHajba", "link": "https://stackoverflow.com/users/3941341/ghajba"}, "is_accepted": true, "score": 2, "last_activity_date": 1438855955, "last_edit_date": 1438855955, "creation_date": 1438840433, "answer_id": 31847791, "question_id": 31842213, "link": "https://stackoverflow.com/questions/31842213/typeerror-when-putting-scraped-data-from-scrapy-into-elasticsearch/31847791#31847791", "title": "TypeError when putting scraped data from scrapy into elasticsearch", "body": "<p>As you can see in the error message: <code>Error processing {'link': [u'http://www.meetup.com/Search-Meetup-Karlsruhe/events/221907250/'], 'title': [u'Alles rund um Elasticsearch']}</code> your item's <code>link</code> and <code>title</code> fields are lists (the square brackets around the values indicate this).</p>\n\n<p>This is because of your extraction in Scrapy. You did not post it with your question but you should use <code>response.xpath().extract()[0]</code> to get the first result of the list. Naturally in this case you should prepare to encounter empty result sets to avoid index-errors.</p>\n\n<p><strong>Update</strong></p>\n\n<p>For the situation where you do not extract anything you could prepare with the following:</p>\n\n<pre><code>linkSelection = response.xpath().extract()\nitem['link'] = linkSelection[0] if linkSelection else \"\"\n</code></pre>\n\n<p>Or something alike depending on your data and fields. Perhaps <code>None</code> could be valid too if the list is empty.</p>\n\n<p>The basic idea is to split up XPath extraction and list-item selection. And you should select an item from the list if it contains the required elements.</p>\n"}], "owner": {"reputation": 55, "user_id": 4702862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196c4dd2ec6675c4334a8a9a96b01af7?s=128&d=identicon&r=PG&f=1", "display_name": "chesneybrown", "link": "https://stackoverflow.com/users/4702862/chesneybrown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 1, "accepted_answer_id": 31847791, "answer_count": 1, "score": 3, "last_activity_date": 1438943394, "creation_date": 1438806490, "question_id": 31842213, "link": "https://stackoverflow.com/questions/31842213/typeerror-when-putting-scraped-data-from-scrapy-into-elasticsearch", "title": "TypeError when putting scraped data from scrapy into elasticsearch", "body": "<p>I've been following this tutorial (<a href=\"http://blog.florian-hopf.de/2014/07/scrapy-and-elasticsearch.html\" rel=\"nofollow\">http://blog.florian-hopf.de/2014/07/scrapy-and-elasticsearch.html</a>) and using this scrapy elasticsearch pipeline (<a href=\"https://github.com/knockrentals/scrapy-elasticsearch\" rel=\"nofollow\">https://github.com/knockrentals/scrapy-elasticsearch</a>) and am able to extract data from scrapy to a JSON file and have an elasticsearch server up and running on localhost.</p>\n\n<p>However, when I attempt to send scraped data into elasticsearch using the pipeline, I get the following error:</p>\n\n<pre><code>2015-08-05 21:21:53 [scrapy] ERROR: Error processing {'link': [u'http://www.meetup.com/Search-Meetup-Karlsruhe/events/221907250/'],\n 'title': [u'Alles rund um Elasticsearch']}\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/defer.py\", line 588, in _runCallbacks\n    current.result = callback(current.result, *args, **kw)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scrapyelasticsearch/scrapyelasticsearch.py\", line 70, in process_item\n    self.index_item(item)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scrapyelasticsearch/scrapyelasticsearch.py\", line 52, in index_item\n    local_id = hashlib.sha1(item[uniq_key]).hexdigest()\nTypeError: must be string or buffer, not list\n</code></pre>\n\n<p>my items.py scrapy file looks like this:</p>\n\n<pre><code>from scrapy.item import Item, Field\n\nclass MeetupItem(Item):\n    title = Field()\n    link = Field()\n    description = Field()\n</code></pre>\n\n<p>and (i think only the relevant part of) my settings.py file looks like this:</p>\n\n<pre><code>from scrapy import log\n\nITEM_PIPELINES = [\n    'scrapyelasticsearch.scrapyelasticsearch.ElasticSearchPipeline',\n]\n\nELASTICSEARCH_SERVER = 'localhost' # If not 'localhost' prepend 'http://'\nELASTICSEARCH_PORT = 9200 # If port 80 leave blank\nELASTICSEARCH_USERNAME = ''\nELASTICSEARCH_PASSWORD = ''\nELASTICSEARCH_INDEX = 'meetups'\nELASTICSEARCH_TYPE = 'meetup'\nELASTICSEARCH_UNIQ_KEY = 'link'\nELASTICSEARCH_LOG_LEVEL= log.DEBUG\n</code></pre>\n\n<p>any help would be greatly appreciated!</p>\n"}, {"tags": ["python", "sockets", "bluetooth", "raspberry-pi", "bluez"], "owner": {"reputation": 21, "user_id": 5195403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-m14ewBFxthE/AAAAAAAAAAI/AAAAAAAABA4/OgrFgUkks-s/photo.jpg?sz=128", "display_name": "elgrangrifon", "link": "https://stackoverflow.com/users/5195403/elgrangrifon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1289, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1438806399, "creation_date": 1438806399, "question_id": 31842192, "link": "https://stackoverflow.com/questions/31842192/raspberry-pi-pybluez-service-uuid-not-found-sdptoolandroid-app", "title": "Raspberry PI: PyBluez service (UUID) not found (sdptool+Android app)", "body": "<p>I tried to write a simple Bluetooth Server socket on the raspberry pi, according to the example of pybluez: <a href=\"https://github.com/karulis/pybluez/blob/master/examples/simple/rfcomm-server.py\" rel=\"nofollow\">https://github.com/karulis/pybluez/blob/master/examples/simple/rfcomm-server.py</a></p>\n\n<p>I tried to connect from within an Android app.</p>\n\n<p>When I run my Android app, I can't connect to the Server socket. When I Display the UUIDs seen by Android I get the following list, not containing my actual Service on the PI:</p>\n\n<pre><code>08-05 22:11:33.806  13510-13510/ch.erni.btlintilla D/DevName\ufe55 RichPi\n08-05 22:11:33.806  13510-13510/ch.erni.btlintilla D/UUID\ufe55 0000112d-0000-1000-8000-00805f9b34fb\n08-05 22:11:33.806  13510-13510/ch.erni.btlintilla D/UUID\ufe55 0000110e-0000-1000-8000-00805f9b34fb\n08-05 22:11:33.806  13510-13510/ch.erni.btlintilla D/UUID\ufe55 00001112-0000-1000-8000-00805f9b34fb\n08-05 22:11:33.806  13510-13510/ch.erni.btlintilla D/UUID\ufe55 0000111f-0000-1000-8000-00805f9b34fb\n08-05 22:11:33.806  13510-13510/ch.erni.btlintilla D/UUID\ufe55 00000000-0000-1000-8000-00805f9b34fb\n08-05 22:11:33.806  13510-13510/ch.erni.btlintilla D/UUID\ufe55 00000000-0000-1000-8000-00805f9b34fb\n</code></pre>\n\n<p>I then ran <code>sdptool browse</code> on the PI and didn't discover any devices.</p>\n\n<p>I have already tried different Solutions mentioned in similar threads (DisablePlugins = pnat, Pairing Prior to starting the Service). Any help appreciated.</p>\n\n<p>Below the sample code used to create the Server socket on the py.</p>\n\n<pre><code># file: rfcomm-server.py\n# auth: Albert Huang &lt;albert@csail.mit.edu&gt;\n# desc: simple demonstration of a server application that uses RFCOMM sockets\n#\n# $Id: rfcomm-server.py 518 2007-08-10 07:20:07Z albert $\n\nfrom bluetooth import *\n\nserver_sock=BluetoothSocket( RFCOMM )\nserver_sock.bind((\"\",PORT_ANY))\nserver_sock.listen(1)\n\nport = server_sock.getsockname()[1]\n\nuuid = \"94f39d29-7d6d-437d-973b-fba39e49d4ee\"\n\nadvertise_service( server_sock, \"SampleServer\",\n                   service_id = uuid,\n                   service_classes = [ uuid, SERIAL_PORT_CLASS ],\n                   profiles = [ SERIAL_PORT_PROFILE ], \n#                   protocols = [ OBEX_UUID ] \n                    )\n\nprint(\"Waiting for connection on RFCOMM channel %d\" % port)\n\nclient_sock, client_info = server_sock.accept()\nprint(\"Accepted connection from \", client_info)\n\ntry:\n    while True:\n        data = client_sock.recv(1024)\n        if len(data) == 0: break\n        print(\"received [%s]\" % data)\nexcept IOError:\n    pass\n\nprint(\"disconnected\")\n\nclient_sock.close()\nserver_sock.close()\nprint(\"all done\")\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 22, "last_activity_date": 1487952272, "last_edit_date": 1487952272, "creation_date": 1438807145, "answer_id": 31842388, "question_id": 31842159, "link": "https://stackoverflow.com/questions/31842159/get-a-list-of-values-of-one-column-from-the-results-of-a-query/31842388#31842388", "title": "Get a list of values of one column from the results of a query", "body": "<p>No, there's not really a way around the fact that SQLAlchemy queries return a list of dicts.  If you want a specific set of fields, you can query for just those fields, but if you want a list of <em>one</em> field, you'll have to extract it from the result.  The following example gets a list of the unique emails for ever user with the given name.</p>\n\n<pre><code>emails = [r.email for r in db.session.query(my_table.c.email).filter_by(name=name).distinct()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4996908, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tbRLipYiZ2A/AAAAAAAAAAI/AAAAAAAABM4/_G5HmybEavE/photo.jpg?sz=128", "display_name": "Isaque Profeta", "link": "https://stackoverflow.com/users/4996908/isaque-profeta"}, "is_accepted": false, "score": -1, "last_activity_date": 1545157375, "creation_date": 1545157375, "answer_id": 53838980, "question_id": 31842159, "link": "https://stackoverflow.com/questions/31842159/get-a-list-of-values-of-one-column-from-the-results-of-a-query/53838980#53838980", "title": "Get a list of values of one column from the results of a query", "body": "<p>Just to keep a record, I like a wrapper with this function in my common use lib:</p>\n\n<p><code>def flat_list(l):\n    return [\"%s\" % v for v in l]</code></p>\n\n<p>Then:</p>\n\n<p><code>flat_list(db.session.query(Model.column_attribute).all())</code></p>\n"}, {"tags": [], "owner": {"reputation": 12120, "user_id": 72668, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/9b1a2.jpg?s=128&g=1", "display_name": "Martlark", "link": "https://stackoverflow.com/users/72668/martlark"}, "is_accepted": false, "score": 5, "last_activity_date": 1579732825, "last_edit_date": 1579732825, "creation_date": 1579732088, "answer_id": 59869157, "question_id": 31842159, "link": "https://stackoverflow.com/questions/31842159/get-a-list-of-values-of-one-column-from-the-results-of-a-query/59869157#59869157", "title": "Get a list of values of one column from the results of a query", "body": "<p>There is a way to return specific columns from a <code>filter_by</code> query using the <code>values</code> method.  As follows:</p>\n\n<pre><code> emails = [r[0] for r in db.session.query(my_table).filter_by(name=name).values('email')]\n</code></pre>\n\n<p>or:</p>\n\n<pre><code> emails = [r[0] for r in User.query.filter_by(name=name).values('email')]\n</code></pre>\n\n<p><code>values()</code> takes any number of field names as parameters and returns a generator that has tuples with each value from each field name.  Using a list comprehension to take the first item of that tuple <code>emails</code> will then be a list of plain string email addresses.</p>\n"}], "owner": {"reputation": 5299, "user_id": 2961662, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/OEFyx.jpg?s=128&g=1", "display_name": "Pav Sidhu", "link": "https://stackoverflow.com/users/2961662/pav-sidhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16404, "favorite_count": 3, "accepted_answer_id": 31842388, "answer_count": 3, "score": 15, "last_activity_date": 1579732825, "creation_date": 1438806260, "last_edit_date": 1438807391, "question_id": 31842159, "link": "https://stackoverflow.com/questions/31842159/get-a-list-of-values-of-one-column-from-the-results-of-a-query", "title": "Get a list of values of one column from the results of a query", "body": "<p>I have a <code>User</code> model where users can have the same name.  I want to get the email addresses of all the users with a given name.  However, I have to do <code>result[0].email</code> on the result of the query to get just the email for a row.  I could do this with a for loop, but is there a way to just get the list of one field without having to do this every time?</p>\n\n<pre><code>my_result = db.session.query(my_table).filter_by(name=name)\nemails = []\nfor r in my_result:\n    emails.append(r.email)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"tags": [], "owner": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "is_accepted": false, "score": 0, "last_activity_date": 1438806360, "creation_date": 1438806360, "answer_id": 31842185, "question_id": 31842149, "link": "https://stackoverflow.com/questions/31842149/django-1-8-operationalerror-no-such-column/31842185#31842185", "title": "Django 1.8 OperationalError: no such column:", "body": "<p>You have to re sync the database using python manage.py makemigrations</p>\n"}, {"comments": [{"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 1, "creation_date": 1438807088, "post_id": 31842194, "comment_id": 51606202, "body": "What django print in console when you ran makemihration and migrate commands"}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438807258, "post_id": 31842194, "comment_id": 51606311, "body": "The exact error is too long to post here but the important part at the end is &quot;django.db.utils.OperationalError: no such column: companies_company.founder&quot;"}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438807380, "post_id": 31842194, "comment_id": 51606388, "body": "When you add new column you should set default value  to your field in model or set values for all existing rows in migrate command"}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438807448, "post_id": 31842194, "comment_id": 51606443, "body": "What do you mean? How can I do that?"}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438807736, "post_id": 31842194, "comment_id": 51606609, "body": "founder = models.CharField(max_length=200, blank=True, default=&#39;something&#39;) or when you run manage.py migrate app_name django will show you message that you must set default values for existing raws and it run python console where you can do this"}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438807903, "post_id": 31842194, "comment_id": 51606700, "body": "Maybe you should turn that into a answer to the question also maybe you can explain a but more."}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438808286, "post_id": 31842194, "comment_id": 51606921, "body": "I don&#39;t know what to set default to."}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438808964, "post_id": 31842194, "comment_id": 51607266, "body": "What should &#39;something&#39; be?"}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438808978, "post_id": 31842194, "comment_id": 51607274, "body": "You make something wrong, makemigrations can&#39;t throw this exception. Are you sure that you migrate correct app?"}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438809034, "post_id": 31842194, "comment_id": 51607298, "body": "I am certain it is this app. it is  my only app."}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438809202, "post_id": 31842194, "comment_id": 51607373, "body": "&#39;Something&#39; it default value which saved in your db. And if you already have data in your db(this data without your new column) it add new column and set this default value(&#39;something&#39;) to all existing data"}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438809263, "post_id": 31842194, "comment_id": 51607399, "body": "How can I find this default value?"}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438809332, "post_id": 31842194, "comment_id": 51607437, "body": "It bad solution but it&#39;s must work. Just drop your db and run manage.py syncdb again."}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438809364, "post_id": 31842194, "comment_id": 51607460, "body": "How do I drop my db? Btw thank you for helping thus far"}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438809474, "post_id": 31842194, "comment_id": 51607499, "body": "You set default value when create field to your model. Your new field is charfield it seems that default value must be any string you want"}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1438809501, "post_id": 31842194, "comment_id": 51607520, "body": "What db you are using?"}, {"owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 2, "creation_date": 1438809847, "post_id": 31842194, "comment_id": 51607684, "body": "Simply delete file with you database. If you don&#39;t change settings.py it should be named as mydatabase.sqlite and placed in project root directory. And again run syncdb."}, {"owner": {"reputation": 1139, "user_id": 4954434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/820014a12e2c692ff8cd170a33a60141?s=128&d=identicon&r=PG", "display_name": "Jithin Pavithran", "link": "https://stackoverflow.com/users/4954434/jithin-pavithran"}, "edited": false, "score": 0, "creation_date": 1466749194, "post_id": 31842194, "comment_id": 63456938, "body": "I too got the same error, and <code>makemigrations</code> , ` migrate` didn&#39;t work. I read the docs and I understand that, it should actually work. What can be the possible reason?"}], "tags": [], "owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1438808719, "last_edit_date": 1438808719, "creation_date": 1438806401, "answer_id": 31842194, "question_id": 31842149, "link": "https://stackoverflow.com/questions/31842149/django-1-8-operationalerror-no-such-column/31842194#31842194", "title": "Django 1.8 OperationalError: no such column:", "body": "<p>Run in your console this commands:</p>\n\n<pre><code>manage.py makemigrations app_name\nmanage.py migrate app_name\n</code></pre>\n\n<p>Every time when you change model in your app you should migrate changes to your db using makemigration and migrate commands. When you adding a new column to your db table you must add value of this column to all existing rows. You can do it by seting default value in your new field in your model. \nOr set values when run migrate command  ( django automatically propose this)\nYou can read about this in <a href=\"https://docs.djangoproject.com/en/1.8/topics/migrations/#data-migrations\" rel=\"nofollow\">docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7945881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/573e47b9f09821f48dd9d3f4cf811203?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen", "link": "https://stackoverflow.com/users/7945881/naveen"}, "is_accepted": false, "score": 2, "last_activity_date": 1510134356, "last_edit_date": 1510134356, "creation_date": 1510133999, "answer_id": 47176214, "question_id": 31842149, "link": "https://stackoverflow.com/questions/31842149/django-1-8-operationalerror-no-such-column/47176214#47176214", "title": "Django 1.8 OperationalError: no such column:", "body": "<p>This type of problem occurs when there are some operations on the model field in some other files such as <code>forms.py</code> or <code>views.py</code> other than <code>models.py</code> when you run <code>makemigrations</code>. If you read the traceback carefully you can figure it out from which file the problem is originating.</p>\n\n<p>For example, if the traceback tells you some complaints in <code>forms.py</code> which may happen to use some of the model fields, just comment out the code that is working on the model fields and rerun <code>makemigrations</code> again. Hopefully it resolves the issue.</p>\n\n<p>If it does, you can then remove the comments that you added before.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11257650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w9nqI.jpg?s=128&g=1", "display_name": "Raccoondude", "link": "https://stackoverflow.com/users/11257650/raccoondude"}, "is_accepted": false, "score": 0, "last_activity_date": 1557420949, "creation_date": 1557420949, "answer_id": 56064210, "question_id": 31842149, "link": "https://stackoverflow.com/questions/31842149/django-1-8-operationalerror-no-such-column/56064210#56064210", "title": "Django 1.8 OperationalError: no such column:", "body": "<p>I found that clearing all data with <code>python3 manage.py sqlflush</code> and then <code>python3 manage.py flush</code></p>\n\n<p>Then makemigrations, sqlmigrate, and then migrate</p>\n\n<p>It will delete all data in the SQL database including users and objects</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13459715, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c0ef194925ee06243aaf9632f6679f2a?s=128&d=identicon&r=PG", "display_name": "bubuwanted02", "link": "https://stackoverflow.com/users/13459715/bubuwanted02"}, "is_accepted": false, "score": 0, "last_activity_date": 1588525925, "last_edit_date": 1588525925, "creation_date": 1588502566, "answer_id": 61573122, "question_id": 31842149, "link": "https://stackoverflow.com/questions/31842149/django-1-8-operationalerror-no-such-column/61573122#61573122", "title": "Django 1.8 OperationalError: no such column:", "body": "<p>Maybe not optimal, but it worked for me doing that (and the default thing did not work): </p>\n\n<ol>\n<li>delete all files apart from the <strong>init</strong>.py in migrations folder</li>\n<li>delete the db.sqlite file</li>\n<li>doing: <code>python manage.py runserver</code> (without this one previous to migrate, migrations, that did not work, I think it's linked to the views / templates calling tags, so has to run first)</li>\n</ol>\n\n<pre><code>python manage.py migrate\npython manage.py makemigrations\npython manage.py migrate\npython manage.py runserver\npython manage.py createsuperuser \n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8893, "favorite_count": 1, "accepted_answer_id": 31842194, "answer_count": 5, "score": 4, "last_activity_date": 1588525925, "creation_date": 1438806224, "question_id": 31842149, "link": "https://stackoverflow.com/questions/31842149/django-1-8-operationalerror-no-such-column", "title": "Django 1.8 OperationalError: no such column:", "body": "<p>I'm using django 1.8 and I'm having problems adding to my models.py. Currently it's:</p>\n\n<pre><code>from django.db import models\n\n\n# Create your models here.\nclass Company(models.Model):\n    role = models.CharField(max_length=32, blank=True)\n    name = models.CharField(max_length=70, blank=True)\n</code></pre>\n\n<p>and it works perfectly fine but whenever I try to add to this and then run the server I get </p>\n\n<blockquote>\n  <p>OperationalError: no such column [added element]</p>\n</blockquote>\n\n<p>For example I added <code>founder = models.CharField(max_length=200, blank=True)</code> and I ran the program and I got </p>\n\n<blockquote>\n  <p>django.db.utils.OperationalError: no such column: companies_company.founder</p>\n</blockquote>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "edited": false, "score": 2, "creation_date": 1438806109, "post_id": 31842049, "comment_id": 51605659, "body": "Show full exception and corresponding line please."}, {"owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "reply_to_user": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "edited": false, "score": 0, "creation_date": 1438806916, "post_id": 31842049, "comment_id": 51606091, "body": "@ReutSharabani hope the edit helps."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438807781, "post_id": 31842049, "comment_id": 51606631, "body": "<b>Exception Location: ...\\model_report\\report.py in __init__, line 259.</b> Where&#39;s that code? Not in your question."}, {"owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 0, "creation_date": 1438808007, "post_id": 31842049, "comment_id": 51606768, "body": "I know, but that is not my code, it comes from the package I installed and linked to the question. That why I didnt add that part hoping that someone else had encountered the same issue and knows the reason."}, {"owner": {"reputation": 1161, "user_id": 4192556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t_Z4T6u8ZBU/AAAAAAAAAAI/AAAAAAAAAEw/Co3x-TTTjpA/photo.jpg?sz=128", "display_name": "Rajesh Kaushik", "link": "https://stackoverflow.com/users/4192556/rajesh-kaushik"}, "edited": false, "score": 0, "creation_date": 1438848956, "post_id": 31842049, "comment_id": 51620929, "body": "Print your model and view code."}, {"owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "reply_to_user": {"reputation": 1161, "user_id": 4192556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t_Z4T6u8ZBU/AAAAAAAAAAI/AAAAAAAAAEw/Co3x-TTTjpA/photo.jpg?sz=128", "display_name": "Rajesh Kaushik", "link": "https://stackoverflow.com/users/4192556/rajesh-kaushik"}, "edited": false, "score": 0, "creation_date": 1438884539, "post_id": 31842049, "comment_id": 51644894, "body": "@RajeshKaushik no this is not how this module works, or all the other reporting tools for Django as far as I have seen. You create a <code>reports.py</code> file and that is used for creating the report. You dont write anything else."}, {"owner": {"reputation": 2569, "user_id": 4045121, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6d6d2a9a084c35337c5acc395307dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "dearn44", "link": "https://stackoverflow.com/users/4045121/dearn44"}, "edited": false, "score": 1, "creation_date": 1438955271, "post_id": 31842049, "comment_id": 51676348, "body": "I tried to experiment with django too for some time. I had no idea that there existed such reporting tools but if this works it could be quite interesting."}], "owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438806821, "creation_date": 1438805830, "last_edit_date": 1438806821, "question_id": 31842049, "link": "https://stackoverflow.com/questions/31842049/error-when-trying-to-split-datetime-field", "title": "Error when trying to split Datetime Field", "body": "<p>I am trying to use <a href=\"https://github.com/juanpex/django-model-report\" rel=\"nofollow noreferrer\">this</a> reporting tool and I noticed that in their example they are using something like this </p>\n\n<pre><code>'date__year',\n'date__month',\n'date__day',\n</code></pre>\n\n<p>for a <strong>datetime</strong> field named <em>date</em>.</p>\n\n<p>I liked the idea and I prefer it from using another field for my own model that will hold the year and another one for the month etc.</p>\n\n<p>The thing is that this does not work for me as I get </p>\n\n<pre><code>'NoneType' object has no attribute 'to' \n</code></pre>\n\n<p>Has something changed in the latest versions of django, and can I do something to fix this and avoid using multiple fields?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This is the full error</p>\n\n<pre><code>Internal Server Error: /timers-by-user-report/\nTraceback (most recent call last):\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\base.py\", line 132, in get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"C:\\Python27\\lib\\site-packages\\model_report\\views.py\", line 34, in report\n    report = report_class(request=request)\n  File \"C:\\Python27\\lib\\site-packages\\model_report\\report.py\", line 259, in __init__\n    base_model = pre_field.rel.to\nAttributeError: 'NoneType' object has no attribute 'to'\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HgD7q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HgD7q.png\" alt=\"enter image description here\"></a></p>\n\n<p>As I said it happens only if I try something similar to the example where I try to access __year from a datetime object</p>\n\n<pre><code>fields = [\n        'timer_user__user_name',\n        'timer_enterTime',\n        'timer_enterTime__month',\n    ]\n</code></pre>\n"}, {"tags": ["python", "exception", "sys"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1438806009, "post_id": 31842043, "comment_id": 51605608, "body": "If used at your entry point, this may help:  <a href=\"http://stackoverflow.com/questions/4990718/python-about-catching-any-exception\" title=\"python about catching any exception\">stackoverflow.com/questions/4990718/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10317, "user_id": 595305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de73cca7e15d1d8feb243f3c125dc3ca?s=128&d=identicon&r=PG", "display_name": "mike rodent", "link": "https://stackoverflow.com/users/595305/mike-rodent"}, "edited": false, "score": 0, "creation_date": 1438806729, "post_id": 31842070, "comment_id": 51606001, "body": "yes, but of course such a mechanism could be used in place of the sys.excepthook mechanism (if it ends with &quot;exit()&quot;).  Let me rephrase my question: why bother having an elegant way of catching uncaughts at all?"}, {"owner": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "reply_to_user": {"reputation": 10317, "user_id": 595305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de73cca7e15d1d8feb243f3c125dc3ca?s=128&d=identicon&r=PG", "display_name": "mike rodent", "link": "https://stackoverflow.com/users/595305/mike-rodent"}, "edited": false, "score": 0, "creation_date": 1438807562, "post_id": 31842070, "comment_id": 51606516, "body": "@mikerodent You can override sys.excepthook but you normally shouldn&#39;t be messing with uncaught exceptions. Uncaught means that everything you&#39;ve prepared for has failed and your program is no longer stable. This is because god only knows what happened to cause the exception and a catch all means &quot;do this&quot; without knowing the problem. Just a quick for example, a memory leak. You may have not anticipated for it and by using except you&#39;ve prevented the default behavior (exit program) which could affect the end user."}, {"owner": {"reputation": 10317, "user_id": 595305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de73cca7e15d1d8feb243f3c125dc3ca?s=128&d=identicon&r=PG", "display_name": "mike rodent", "link": "https://stackoverflow.com/users/595305/mike-rodent"}, "edited": false, "score": 0, "creation_date": 1438807669, "post_id": 31842070, "comment_id": 51606568, "body": "thanks!  See my added comment... I concur, essentially!"}], "tags": [], "owner": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "is_accepted": true, "score": 0, "last_activity_date": 1438806239, "last_edit_date": 1438806239, "creation_date": 1438805887, "answer_id": 31842070, "question_id": 31842043, "link": "https://stackoverflow.com/questions/31842043/python-catch-uncaught-exception-but-not-exit-immediately/31842070#31842070", "title": "Python: catch uncaught Exception but not exit immediately", "body": "<p>Below except: acts as a catch all for any uncaught exception but this can have unexpected consequences. A better approach would be to write unit tests and proactively prepare for possible exceptions like a kid throwing unicode in a form.</p>\n\n<pre><code>try:\n  # do something\n\nexcept Exception_Type:\n  # do something else\n\nexcept:\n  # woops didn't count on that\n</code></pre>\n"}], "owner": {"reputation": 10317, "user_id": 595305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de73cca7e15d1d8feb243f3c125dc3ca?s=128&d=identicon&r=PG", "display_name": "mike rodent", "link": "https://stackoverflow.com/users/595305/mike-rodent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 1, "accepted_answer_id": 31842070, "answer_count": 1, "score": 1, "last_activity_date": 1438807484, "creation_date": 1438805797, "last_edit_date": 1438807484, "question_id": 31842043, "link": "https://stackoverflow.com/questions/31842043/python-catch-uncaught-exception-but-not-exit-immediately", "title": "Python: catch uncaught Exception but not exit immediately", "body": "<p>from the standard library for sys module</p>\n\n<blockquote>\n  <p>sys.excepthook(type, value, traceback)</p>\n  \n  <p>This function prints out a given traceback and exception to sys.stderr.</p>\n  \n  <p>When an exception is raised and uncaught, the interpreter calls sys.excepthook with three arguments, the exception class, exception\n  instance, and a traceback object. In an interactive session this\n  happens just before control is returned to the prompt; in a Python\n  program <strong>this happens just before the program exits</strong>. The handling of\n  such top-level exceptions can be customized by assigning another\n  three-argument function to sys.excepthook.</p>\n</blockquote>\n\n<p>Is there any way of catching uncaught exceptions <strong>without</strong> necessarily immediately exiting thereafter (depending on a decision-making process)?</p>\n\n<p><strong><em>later</em></strong><br>\nI suppose the answer is no.  I suppose the BDFL, in his wisdom, offers this as a last-ditch opportunity to salvage a few crumbs from a collapsing, not-good program before it crumbles into oblivion leaving only a few logs behind.</p>\n"}, {"tags": ["python", "tkinter", "tkinter-canvas"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438805763, "post_id": 31842013, "comment_id": 51605477, "body": "Can you post the real code? You didn&#39;t assign <code>root</code> anywhere here."}, {"owner": {"reputation": 195, "user_id": 4671049, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f4749771d55c9328acb31047be7952eb?s=128&d=identicon&r=PG&f=1", "display_name": "SHB11", "link": "https://stackoverflow.com/users/4671049/shb11"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438805959, "post_id": 31842013, "comment_id": 51605581, "body": "My bad, missed one line when copy/pasting. Fixed!"}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1438807284, "post_id": 31842013, "comment_id": 51606326, "body": "Problem seems to be with the scrollbar. Without it, it&#39;s working fine. Seems like mixing <code>pack</code> and <code>grid</code> layout is a problem here..."}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1438807872, "creation_date": 1438807872, "answer_id": 31842574, "question_id": 31842013, "link": "https://stackoverflow.com/questions/31842013/tkinter-gui-stops-functioning-when-adding-frame-widget/31842574#31842574", "title": "Tkinter gui stops functioning when adding frame widget", "body": "<p>The problem is that you are mixing <code>pack</code> and <code>grid</code> in the same container. You can only use one or the other for all widgets that share a common parent. <code>groupMenu</code>, <code>yscrollbar</code>, and <code>canvas</code> are all children of <code>frame</code>. <code>yscrollbar</code> uses <code>grid</code> but the others use <code>pack</code>.</p>\n"}], "owner": {"reputation": 195, "user_id": 4671049, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f4749771d55c9328acb31047be7952eb?s=128&d=identicon&r=PG&f=1", "display_name": "SHB11", "link": "https://stackoverflow.com/users/4671049/shb11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 31842574, "answer_count": 1, "score": 0, "last_activity_date": 1438807872, "creation_date": 1438805668, "last_edit_date": 1438806269, "question_id": 31842013, "link": "https://stackoverflow.com/questions/31842013/tkinter-gui-stops-functioning-when-adding-frame-widget", "title": "Tkinter gui stops functioning when adding frame widget", "body": "<p>Here is some code I'm using for a project, it's very bare and not functional at this point. I'm having trouble with the frame widget. Right now when I run the code nothing happens, but if I delete the lines about the frame and scrollbar, and change the listbox/canvas widget parents to \"root\" instead of \"frame\", the code works. I've looked at plenty of examples online and I don't understand why no gui window appears when I try to put everything in a frame rather than the root window...? Thanks!</p>\n\n<p>Using python 2.7.</p>\n\n<pre><code>import pymongo\nimport glob, os\nimport Tkinter\nfrom Tkinter import *\nfrom PIL import Image, ImageTk\n\nroot = Tkinter.Tk()\nroot.title(\"keyBuilder\")\nframe = Frame(root, width = 630, height = 400)\n\ngroupMenu = Listbox(frame)\ngroupMenu.config(width = 30)\ngroupMenu.insert(END, \"Group 1\")\ngroupMenu.insert(END, \"Group 2\")\ngroupMenu.insert(END, \"Group 3\")\n\nyscrollbar = Scrollbar(frame)\nyscrollbar.grid(row=0, column=1, sticky=N+S)\n\ngallery = Canvas(frame, width = 600, height = 400, yscrollcommand = yscrollbar.set)\n\npath = r'/Users/Sam/Desktop/keynoteProject/slideIcons'\nCOLUMNS = 6\nimage_count = 0\n\nfor infile in glob.glob(os.path.join(path, '*.jpeg')):\n    image_count += 1\n    r, c = divmod(image_count-1, COLUMNS)\n    im = Image.open(infile)\n    resized = im.resize((100, 100), Image.ANTIALIAS)\n    tkimage = ImageTk.PhotoImage(resized)\n    myvar = Label(gallery, image=tkimage)\n    myvar.image = tkimage\n    myvar.grid(row=r, column=c)\n\ngroupMenu.pack(side = LEFT, fill = Y)\ngallery.pack(side = RIGHT)\nframe.pack()\n\nroot.mainloop()\n</code></pre>\n\n<p>If it's helpful, this code works:</p>\n\n<pre><code>import pymongo\nimport glob, os\nimport Tkinter\nfrom Tkinter import *\nfrom PIL import Image, ImageTk\n\nroot = Tkinter.Tk()\nroot.title(\"keyBuilder\")\n\ngroupMenu = Listbox(root)\ngroupMenu.config(width = 30)\ngroupMenu.insert(END, \"Group 1\")\ngroupMenu.insert(END, \"Group 2\")\ngroupMenu.insert(END, \"Group 3\")\n\ngallery = Canvas(root, width = 600, height = 400)\n\npath = r'/Users/Sam/Desktop/keynoteProject/slideIcons'\nCOLUMNS = 6\nimage_count = 0\n\nfor infile in glob.glob(os.path.join(path, '*.jpeg')):\n    image_count += 1\n    r, c = divmod(image_count-1, COLUMNS)\n    im = Image.open(infile)\n    resized = im.resize((100, 100), Image.ANTIALIAS)\n    tkimage = ImageTk.PhotoImage(resized)\n    myvar = Label(gallery, image=tkimage)\n    myvar.image = tkimage\n    myvar.grid(row=r, column=c)\n\ngroupMenu.pack(side = LEFT, fill = Y)\ngallery.pack(side = RIGHT)\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "shell", "python-3.x", "subprocess", "popen"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1438805708, "post_id": 31841994, "comment_id": 51605447, "body": "Are there any spaces in cmd? Specifically in the file name?"}, {"owner": {"reputation": 2573, "user_id": 2444240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rnddC.jpg?s=128&g=1", "display_name": "Skylion", "link": "https://stackoverflow.com/users/2444240/skylion"}, "reply_to_user": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1438805956, "post_id": 31841994, "comment_id": 51605578, "body": "When there is I do proper quotations around the file name first. The issue here lies with type not with the arguments of type as providing and non-existent file just has it spit things out to stderr, not crash Python like it is doing."}], "answers": [{"comments": [{"owner": {"reputation": 2573, "user_id": 2444240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rnddC.jpg?s=128&g=1", "display_name": "Skylion", "link": "https://stackoverflow.com/users/2444240/skylion"}, "edited": false, "score": 0, "creation_date": 1438830707, "post_id": 31845528, "comment_id": 51613582, "body": "Wow, this one of the most thorough, concise answers I have ever gotten on StackOverflow. Thank you very much!"}, {"owner": {"reputation": 2573, "user_id": 2444240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rnddC.jpg?s=128&g=1", "display_name": "Skylion", "link": "https://stackoverflow.com/users/2444240/skylion"}, "edited": false, "score": 0, "creation_date": 1440613812, "post_id": 31845528, "comment_id": 52350547, "body": "Out of curiosity, do you know why specifying it as cp437 or cp866 is so much slower than calling type on commandline? Do I need to maybe break it up into an stdout stream? Any ideas how I can optimize for it large files? Otherwise, this is answer is absolutely superb."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 2573, "user_id": 2444240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rnddC.jpg?s=128&g=1", "display_name": "Skylion", "link": "https://stackoverflow.com/users/2444240/skylion"}, "edited": false, "score": 0, "creation_date": 1440632772, "post_id": 31845528, "comment_id": 52359097, "body": "@Skylion:  I don&#39;t know but a profiler might: <code>py -m profiler your_script.py</code> (look what functions take the most time). Compared to the printing to Windows console everything else should be fast. Create two <a href=\"http://stackoverflow.com/help/mcve\">minimal code examples</a>: one calls <code>type</code>,  another emulates it in Python. Make sure they produce the same result. Describe what you expect to happen and what happens instead (how long it takes, how fast would you like it to be). Post it as a separate question."}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 1, "last_activity_date": 1440631623, "last_edit_date": 1495542581, "creation_date": 1438825644, "answer_id": 31845528, "question_id": 31841994, "link": "https://stackoverflow.com/questions/31841994/how-to-call-type-safely-on-a-random-file-in-python/31845528#31845528", "title": "How to call type safely on a random file in Python?", "body": "<p><code>type</code> is an internal command and therefore you need to run <code>cmd.exe</code> e.g., implicitly via <code>shell=True</code>.</p>\n\n<p>If you pass the command as a list on Windows then <code>subprocess.list2cmdline()</code> is called to convert the list into a string to pass to <code>CreateProcess()</code> Windows API. Its syntax is different from <code>cmd.exe</code> syntax. For details, <a href=\"https://stackoverflow.com/a/27867015/4279\">read the links in this answer</a>.</p>\n\n<p>Pass the shell command as a string and add <code>shell=True</code>:</p>\n\n<pre><code>from subprocess import check_call\n\ncheck_call(r'type \"C:\\path\\with spaces &amp; special symbols.txt\"', shell=True)\n</code></pre>\n\n<p>Note: <code>r''</code> prefix is used to avoid escaping the backslahes in a literal string.</p>\n\n<p>If the command works <em>as is</em> from the command line then it should work from Python too.</p>\n\n<p>If the filename is given in a variable then you could escape it for the shell <code>cmd</code> using <code>^</code>:</p>\n\n<pre><code>escaped_filename = filename_with_possible_shell_meta_chars.replace(\"\", \"^\")[:-1]\ncheck_call('type ' + escaped_filename, shell=True)\n</code></pre>\n\n<p>Note: no explicit quotes.</p>\n\n<p>Obviously, you could emulate the <code>type</code> command in pure Python:</p>\n\n<blockquote>\n  <p>TYPE  copies  to the console device (or elsewhere \n  if redirected). No check is made that the file is readable text.</p>\n</blockquote>\n\n<p>If all you need is to read a file; use <code>open()</code> function:</p>\n\n<pre><code>with open(r'C:\\path\\with spaces &amp; special symbols.txt', \n          encoding=character_encoding) as file:\n    text = file.read()\n</code></pre>\n\n<p>If you won't specify the explicit encoding then <code>open()</code> uses ANSI code page such as <code>'cp1252'</code> (<code>locale.getpreferredencoding(False)</code>) to decode  file's content into Unicode text.</p>\n\n<p>Note: you have to take into account 4 character encodings here:</p>\n\n<ol>\n<li>the character encoding of the text file itself. It can be anything e.g., <code>utf-8</code></li>\n<li>ANSI code page used by GUI applications such as <code>notepad.exe</code> e.g., <code>cp1252</code> or <code>cp1251</code></li>\n<li>OEM code page used by cmd.exe e.g., <code>cp437</code> or <code>cp866</code>. They can be used for the output of the <code>type</code> command when it is redirected</li>\n<li><code>utf-16</code> used by Unicode API such as <code>WriteConsoleW()</code> e.g., when <code>cmd /U</code> switch is used. Note: Windows console displays UCS-2 i.e., only BMP Unicode characters are supported but the copy-paste works even for astral characters such as <a href=\"https://codepoints.net/U+1F60A\" rel=\"nofollow noreferrer\">&#128522; (U+1F60A)</a>.</li>\n</ol>\n\n<p>See <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2005/03/08/389527.aspx\" rel=\"nofollow noreferrer\">Keep your eye on the code page</a>.</p>\n\n<p>To print Unicode to Windows console, see <a href=\"https://stackoverflow.com/a/30551552/4279\">What's the deal with Python 3.4, Unicode, different languages and Windows?</a></p>\n"}], "owner": {"reputation": 2573, "user_id": 2444240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rnddC.jpg?s=128&g=1", "display_name": "Skylion", "link": "https://stackoverflow.com/users/2444240/skylion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 31845528, "answer_count": 1, "score": 0, "last_activity_date": 1440631623, "creation_date": 1438805606, "last_edit_date": 1438806681, "question_id": 31841994, "link": "https://stackoverflow.com/questions/31841994/how-to-call-type-safely-on-a-random-file-in-python", "title": "How to call type safely on a random file in Python?", "body": "<p>So I am attempting to call the Windows command type on some arbitrary file. Unfortunately, whenever I convert my cmd into from a shell command into a non-shell one it fails. As such, I cannot use the recommended method for ensuring that my python script cannot be exploited. Here is an example.</p>\n\n<pre><code>import subprocess\ncmd = \"type\" + '\"' + \"some_file_with_no_spaces_or_other_things_wrong\" + '\"'\np = subprocess.pOpen(cmd, shell = True)\n</code></pre>\n\n<p>but when I try:</p>\n\n<pre><code>#Assume cmd split is done properly. Even when I manually put in the \n#array with properly escaped quotes it does not work\nsubprocess.pOpen(cmd.split(), shell = False)\n</code></pre>\n\n<p>It fails, and I don't know how to solve this issue. I would like to be able to call this command securely by having the shell by false, but whenever I do so I get the following error.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Skylion\\git\\LVDOWin\\Bin\\Osiris.py\", line 72, in openFileDialog\n    stderr = STDOUT, shell = False, bufsize = 0, universal_newlines=True)\n  File \"C:\\Python34\\lib\\subprocess.py\", line 859, in __init__\n    restore_signals, start_new_session)\n  File \"C:\\Python34\\lib\\subprocess.py\", line 1112, in _execute_child\n    startupinfo)\nFileNotFoundError: [WinError 2] The system cannot find the file specified\n</code></pre>\n\n<p>Note that even running:\n<code>\nsubprocess.Popen(['type'])\n</code>\nWill throw the error. My issue is how do I sanitize the filename so I can either run the filename with shell=True, or get shell=False properly working.</p>\n\n<p>Any help on how to properly open a file in this way would be greatly appreciated.</p>\n"}, {"tags": ["python", "apache-kafka", "kafka-consumer-api", "kafka-python"], "answers": [{"tags": [], "owner": {"reputation": 2167, "user_id": 10504469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MomS5.jpg?s=128&g=1", "display_name": "Jin Lee", "link": "https://stackoverflow.com/users/10504469/jin-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1566549774, "creation_date": 1566549774, "answer_id": 57622660, "question_id": 31841960, "link": "https://stackoverflow.com/questions/31841960/how-to-use-kafka-consumer-simpleconsumer-seek/57622660#57622660", "title": "How to use kafka.consumer.SimpleConsumer,seek()", "body": "<p>In the Kafka Definitive Guide, there is a sample code of <code>seek()</code> written in Java (not in Python, but I hope you might get the general idea).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SaveOffsetsOnRebalance implements ConsumerRebalanceListener {\n\n         public void onPartitionsRevoked (Collection &lt;TopicPartition&gt; partitions) {\n                  commitDBTransaction();\n         }\n\n         public void onPartitionsAssigned(Collection &lt;TopicPartiton&gt; partitions) {\n              for(TopicPartition partition : partitions)\n                  consumer.seek(partition, getOffsetFromDB(partition));\n         }\n\n     }\n}   // these brackets are exactly the same as the book. I didn't change anything. You might want to though.    \n\n   consumer.subscribe (topics, new SaveOffsetOnRebalance(consumer));\n   consumer.poll(0);\n\n   for ( TopicPartition partition : consumer.assignment())\n       consumer.seek(partition, getOffsetFromDB(partition));\n\n   while (true) {\n         ConsumerRecords &lt;String, String&gt; records = consumer.poll(100);\n         for (ConsumerRecord &lt;String, String&gt; record : records)\n         { \n               processRecord(record);\n               storeRecordInDB(record);\n               storeOffsetInDB(record.topic(), record.partition(), record.offset());\n         }\n         commitDBTransaction();\n   }\n</code></pre>\n"}], "owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1251, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1566549774, "creation_date": 1438805496, "question_id": 31841960, "link": "https://stackoverflow.com/questions/31841960/how-to-use-kafka-consumer-simpleconsumer-seek", "title": "How to use kafka.consumer.SimpleConsumer,seek()", "body": "<p>The API doc is here:<a href=\"http://kafka-python.readthedocs.org/en/latest/apidoc/kafka.consumer.html\" rel=\"nofollow\">http://kafka-python.readthedocs.org/en/latest/apidoc/kafka.consumer.html</a></p>\n\n<p>But when I run the following code, the exception is <strong>%d format: a number is required, not NoneType</strong></p>\n\n<pre><code>    client = KafkaClient(\"localhost:9092\")\n    consumer = SimpleConsumer(client, \"test-group\", \"test\")\n    consumer.seek(0, whence=None)# (0,2) and (0,0)\n    run = True\n    while( run ):\n        message = consumer.get_message(block=False, timeout=4000)\n\n    except Exception as e:\n        print \"Exception while trying to read msg:\", str(e)\n</code></pre>\n\n<p>When I used the following piece of code, the exception is <strong>seek() got an unexpected keyword argument 'partition'</strong></p>\n\n<pre><code>consumer.seek(0, whence=None, partition=None)# (0,2) and (0,0)\n</code></pre>\n\n<p>Any idea? Thanks.</p>\n"}, {"tags": ["python", "r", "matplotlib", "heatmap", "dendrogram"], "comments": [{"owner": {"reputation": 895, "user_id": 3933705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaca13457e73e1e7f4ea0035314fd1ae?s=128&d=identicon&r=PG&f=1", "display_name": "nv_wu", "link": "https://stackoverflow.com/users/3933705/nv-wu"}, "edited": false, "score": 1, "creation_date": 1438805525, "post_id": 31841833, "comment_id": 51605365, "body": "Steve Tjoa has a good post on this: <a href=\"http://stackoverflow.com/questions/2455761/reordering-matrix-elements-to-reflect-column-and-row-clustering-in-naiive-python/3017704#3017704\" title=\"reordering matrix elements to reflect column and row clustering in naiive python\">stackoverflow.com/questions/2455761/&hellip;</a>"}, {"owner": {"reputation": 744, "user_id": 1789758, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/65b356a75186f20847ade7ccc418ba61?s=128&d=identicon&r=PG", "display_name": "Xiangyu", "link": "https://stackoverflow.com/users/1789758/xiangyu"}, "edited": false, "score": 0, "creation_date": 1438890737, "post_id": 31841833, "comment_id": 51648347, "body": "Thank you, this is exactly what I want."}], "owner": {"reputation": 744, "user_id": 1789758, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/65b356a75186f20847ade7ccc418ba61?s=128&d=identicon&r=PG", "display_name": "Xiangyu", "link": "https://stackoverflow.com/users/1789758/xiangyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1051, "favorite_count": 0, "closed_date": 1438890759, "answer_count": 0, "score": 2, "last_activity_date": 1438804987, "creation_date": 1438804987, "question_id": 31841833, "link": "https://stackoverflow.com/questions/31841833/aligning-dendrogram-with-heat-map-using-matplotlib", "closed_reason": "Duplicate", "title": "Aligning dendrogram with heat map using matplotlib", "body": "<p>I would like to generate a figure that combines a dendrogram and heatmap. The package in R does this very well but I cannot find a way to do so in python. Here is an example from <a href=\"http://digitheadslabnotebook.blogspot.com/2011/06/drawing-heatmaps-in-r.html\" rel=\"nofollow noreferrer\">a blog</a>:<a href=\"https://i.stack.imgur.com/vTFRc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vTFRc.png\" alt=\"enter image description here\"></a></p>\n\n<p>Right now I have a python script that looks like this:</p>\n\n<pre><code>%matplotlib inline\nfrom sklearn.metrics.pairwise import pairwise_distances\nfrom scipy.spatial.distance import squareform\nfrom scipy.cluster.hierarchy import linkage\nfrom scipy.cluster.hierarchy import dendrogram\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nX = np.random.rand(4, 8)\n\nZ = linkage(squareform(np.around(pairwise_distances(X), 4)))\n\nfig = plt.figure()\nax1 = fig.add_subplot(211)\nax2 = fig.add_subplot(212)\ndendrogram(Z, ax=ax1)\nax2.pcolor(X, cmap=plt.cm.Reds)\n</code></pre>\n\n<p>And it the figure generated from this is shown as follows:\n<a href=\"https://i.stack.imgur.com/tnYKV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tnYKV.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would like to align the y axis of the heat map with the x axis of the dendrogram. Any suggestions?</p>\n"}, {"tags": ["python", "arrays", "numpy", "multidimensional-array", "scipy"], "comments": [{"owner": {"reputation": 19758, "user_id": 1534017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aa667d0e455aa30f3410756d719de795?s=128&d=identicon&r=PG", "display_name": "Cleb", "link": "https://stackoverflow.com/users/1534017/cleb"}, "edited": false, "score": 1, "creation_date": 1438810585, "post_id": 31841820, "comment_id": 51608013, "body": "Could you give a small example for A, B and the expected output?"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1438820380, "post_id": 31841820, "comment_id": 51611133, "body": "The answer is probably yes, but you&#39;ll need to tell us what the actual function is"}, {"owner": {"reputation": 401, "user_id": 3525251, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9fa6e111e94100fd875dc45b1994add1?s=128&d=identicon&r=PG", "display_name": "fact", "link": "https://stackoverflow.com/users/3525251/fact"}, "edited": false, "score": 0, "creation_date": 1438852220, "post_id": 31841820, "comment_id": 51623062, "body": "Thanks - I now added an example."}, {"owner": {"reputation": 828, "user_id": 5143911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1aed414dcc50f5caf1e83d7469db50?s=128&d=identicon&r=PG&f=1", "display_name": "yevgeniy", "link": "https://stackoverflow.com/users/5143911/yevgeniy"}, "edited": false, "score": 0, "creation_date": 1438864058, "post_id": 31841820, "comment_id": 51630795, "body": "Create a <code>meshgrid</code> over your axis a2 from A and B. Alternatively, one can call a function over a grid as <code>numpy.fromfunction</code>."}], "owner": {"reputation": 401, "user_id": 3525251, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9fa6e111e94100fd875dc45b1994add1?s=128&d=identicon&r=PG", "display_name": "fact", "link": "https://stackoverflow.com/users/3525251/fact"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1438852192, "creation_date": 1438804971, "last_edit_date": 1438852192, "question_id": 31841820, "link": "https://stackoverflow.com/questions/31841820/fast-evaluation-of-function-along-all-index-combinations-of-two-numpy-arrays", "title": "Fast evaluation of function along all index combinations of two numpy arrays", "body": "<p>Let <code>A,B</code> be <code>((a1,a2,a3))</code> numpy arrays and <code>f</code> a function taking two <code>((a3))</code> arrays as arguments and returning a float. I want to create a new <code>((a1,a2,a2))</code> numpy array as follows</p>\n\n<pre><code>C[i,j,k]=f(A[i,j,:],B[i,k,:])\n</code></pre>\n\n<p>In other words, I want to apply <code>f</code> to all combinations of indices over the second axis <code>a2</code>. Is there a faster way than just looping over all combinations (e.g. vectorizing f or something along these lines)? Ideally it should generalize to the same situation with more axes (that is, <code>A,B</code> are <code>((a1,...,an))</code> numpy arrays and we return a numpy array with <code>n</code> axes that is of shape <code>((a1,...,a_(n-2),a_(n-1),a_(n-1))</code>).</p>\n\n<p>Edit: A typical example of the function <code>f</code> would be <code>numpy.exp(const*np.inner(a-b,a-b))</code> where <code>a,b</code>  are <code>(a3))</code> numpy arrays.</p>\n"}, {"tags": ["python", "json", "cgi"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438805070, "post_id": 31841814, "comment_id": 51605123, "body": "The dots are not produced by the Python code you posted. Have you tried printing something <i>entirely different</i> and see if those dots are still there?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438805175, "post_id": 31841814, "comment_id": 51605183, "body": "And if this is a CGI, are you checking the output in a browser or in a different tool?"}, {"owner": {"reputation": 1097, "user_id": 1825632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/u7zr5.png?s=128&g=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/1825632/adib"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438805284, "post_id": 31841814, "comment_id": 51605234, "body": "@MartijnPieters I&#39;m viewing this from the browser. From the Build, it prints out fine. However, now that I&#39;m investigating more, I think this may be the case: heartbeat = lambda: sys.stdout.write(&#39;.&#39;) - though, I thought this will only present itself in the logs versus the browser"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1438805333, "post_id": 31841814, "comment_id": 51605259, "body": "No, <code>print</code> writes to <code>sys.stdout</code> too. Use <code>sys.stderr</code> instead if you want to direct information to the logs."}, {"owner": {"reputation": 1097, "user_id": 1825632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/u7zr5.png?s=128&g=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/1825632/adib"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438805652, "post_id": 31841814, "comment_id": 51605419, "body": "@MartijnPieters That was actually it. It was the stdout that printed out the dots. Replaced with stderr, works fine."}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 1, "last_activity_date": 1438805754, "creation_date": 1438805754, "answer_id": 31842036, "question_id": 31841814, "link": "https://stackoverflow.com/questions/31841814/json-dump-in-python-cgi-starts-with-trailing-dots/31842036#31842036", "title": "JSON Dump in Python CGI starts with trailing dots", "body": "<p>Something <em>else</em> is producing those <code>.</code> characters; the <code>json.dumps()</code> function never adds those.</p>\n\n<p>Make sure nothing else is writing to <code>sys.stdout</code>; everything you send to <code>sys.stdout</code> is sent to the browser (<code>print</code> writes to <code>sys.stdout</code> by default).</p>\n\n<p>From your comments I understand you wanted to write additional information to the server logs; do not use <code>sys.stdout</code> for that; write to <code>sys.stderr</code> instead.</p>\n"}], "owner": {"reputation": 1097, "user_id": 1825632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/u7zr5.png?s=128&g=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/1825632/adib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 31842036, "answer_count": 1, "score": 0, "last_activity_date": 1438805754, "creation_date": 1438804966, "question_id": 31841814, "link": "https://stackoverflow.com/questions/31841814/json-dump-in-python-cgi-starts-with-trailing-dots", "title": "JSON Dump in Python CGI starts with trailing dots", "body": "<p>The data returned from run_report returns a python dictionary, where it is then parsed into JSON String and printed so it can be accessed by JSON. The run_report function also creates a .json file in which I can access later:</p>\n\n<pre><code>print \"Content-type: application/json\\n\"\njson_data = run_report(sites_list, tierOne, dateFrom, dateTo, filename, file_extension)\nprint json.dumps(json_data, indent=4, sort_keys=True)\n</code></pre>\n\n<p>However, when it prints, I receive this output:</p>\n\n<pre><code>..{\n\"data\": {\n    \"FR\": 1424068\n}, \n\"tierone\": {\n    \"countries\": [\n        \"US\", \n        \"BR\", \n        ...\n    ], \n    \"ratio\": 100.0, \n    \"total\": 1424068, \n    \"total_countries\": 1\n}, \n\"total\": 1424068, \n\"total_countries\": 1\n}\n</code></pre>\n\n<p>What I don't understand is how those trailing dots even show up. The dots, however, do not show up if I were to open one of the .json files I created with the run_report function and print the read data file.</p>\n\n<pre><code>def open_file(file_extension, json_file):\n    with open(file_extension + json_file) as data_file:\n        data = json.load(data_file)\n    return json.dumps(data)\n\njson_data = open_file(file_extension, filename)\n    print json_data\n</code></pre>\n"}, {"tags": ["python", "flask", "jinja2"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 3, "last_activity_date": 1438805488, "creation_date": 1438805488, "answer_id": 31841957, "question_id": 31841786, "link": "https://stackoverflow.com/questions/31841786/flash-only-uncategorized-messages-in-flask-app/31841957#31841957", "title": "Flash only uncategorized messages in Flask app", "body": "<p><a href=\"https://github.com/mitsuhiko/flask/blob/0.10.1/flask/helpers.py#L342\" rel=\"nofollow\">All messages have the default category <code>'message'</code>.</a>  Get those messages, then get your other messages.</p>\n\n<pre><code>{% with messages = get_flashed_messages(category_filter=['message']) %}\n</code></pre>\n"}], "owner": {"reputation": 1326, "user_id": 1005909, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d90997d0eb87121af6b24407d90d9a55?s=128&d=identicon&r=PG", "display_name": "user1005909", "link": "https://stackoverflow.com/users/1005909/user1005909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 31841957, "answer_count": 1, "score": 2, "last_activity_date": 1438805869, "creation_date": 1438804863, "last_edit_date": 1438805869, "question_id": 31841786, "link": "https://stackoverflow.com/questions/31841786/flash-only-uncategorized-messages-in-flask-app", "title": "Flash only uncategorized messages in Flask app", "body": "<p>I want to display <a href=\"http://flask.pocoo.org/docs/0.10/patterns/flashing/\" rel=\"nofollow\">flashed messages</a> with the 'error' category in one section, and uncategorized messages in another section.  If I just ask for messages <code>with_categories=False</code>, I get messages with the 'error' category as well.  Preferably, I don't want to have to add a category to all my messages.  How do I get all uncategorized messages?</p>\n\n<pre><code>flash('You did something wrong', 'error')\nflash('Hello')\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>{% with messages = get_flashed_messages(with_categories=false) %}\n    {% for message in messages %}\n        {{message}}\n    {% endfor %}\n{% endwith %}\n{% with messages = get_flashed_messages(category_filter=['error']) %}\n    {% for message in messages %}\n        {{message}}\n    {% endfor %}\n{% endwith %}\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>You did something wrong\nHello\nYou did something wrong\n</code></pre>\n\n<p>I expect</p>\n\n<pre><code>Hello\nYou did something wrong\n</code></pre>\n"}, {"tags": ["python", "user-interface", "tkinter"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1438805046, "post_id": 31841762, "comment_id": 51605113, "body": "You use a textvariable= so it would be nameField.get()"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 4581921, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1385008401813441/picture?type=large", "display_name": "Christopher Jakob", "link": "https://stackoverflow.com/users/4581921/christopher-jakob"}, "edited": false, "score": 0, "creation_date": 1438805246, "post_id": 31841796, "comment_id": 51605215, "body": "yep thats the answer thank you. Its an obvious error  that I should of seen just I had been trying so many different things i got tunnel vision, thank you"}, {"owner": {"reputation": 135, "user_id": 4581921, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1385008401813441/picture?type=large", "display_name": "Christopher Jakob", "link": "https://stackoverflow.com/users/4581921/christopher-jakob"}, "edited": false, "score": 0, "creation_date": 1438807136, "post_id": 31841796, "comment_id": 51606235, "body": "of course man I was just waiting for the timer to expire so I could"}], "tags": [], "owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1438805322, "last_edit_date": 1438805322, "creation_date": 1438804910, "answer_id": 31841796, "question_id": 31841762, "link": "https://stackoverflow.com/questions/31841762/trying-to-print-contents-of-text-box-after-user-clicks-search-button-yet-nothing/31841796#31841796", "title": "trying to print contents of text box after user clicks search button yet nothing printing tkinter", "body": "<p>The issue seems to be in the line -</p>\n\n<pre><code>searchButton = Button(root, text = \"Search\", command = save())\n</code></pre>\n\n<p>You should set the function directly as the value for <code>command</code> argument, not call it and set its return value as argument (which is <code>None</code> , since the function does not return anything) . Example -</p>\n\n<pre><code>searchButton = Button(root, text = \"Search\", command = save)\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 4581921, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1385008401813441/picture?type=large", "display_name": "Christopher Jakob", "link": "https://stackoverflow.com/users/4581921/christopher-jakob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "closed_date": 1439220158, "accepted_answer_id": 31841796, "answer_count": 1, "score": 1, "last_activity_date": 1438805322, "creation_date": 1438804767, "question_id": 31841762, "link": "https://stackoverflow.com/questions/31841762/trying-to-print-contents-of-text-box-after-user-clicks-search-button-yet-nothing", "closed_reason": "Duplicate", "title": "trying to print contents of text box after user clicks search button yet nothing printing tkinter", "body": "<p>User inputs text into a text box clicks search and then the text is printed. Right now being printed in the shell is fine as  I am still developing this. However, with everything I have read in the docs, what I am doing should work. So I am assuming its something small that  I dont see. Please let me know what I am doing wrong.</p>\n\n<pre><code>def save():\n   key = entryName.get()\n   print(key)\n\nnameField = StringVar()\nentryName = Entry(root,textvariable= nameField)\nentryName.grid(row=3,column=2)\n\nsearchButton = Button(root, text = \"Search\", command = save())\nsearchButton.grid(row = 19,column = 2)\n</code></pre>\n"}, {"tags": ["python", "csv", "paraview"], "comments": [{"owner": {"reputation": 7386, "user_id": 2894770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xfbIb.png?s=128&g=1", "display_name": "CaringDev", "link": "https://stackoverflow.com/users/2894770/caringdev"}, "edited": false, "score": 0, "creation_date": 1438807234, "post_id": 31841751, "comment_id": 51606290, "body": "As you have more reputation than the usual suspect, I guess you know that this question should be improved to at least show what you&#39;ve done so far and where you got stuck (i.e. why you didn&#39;t RTFM)."}, {"owner": {"reputation": 1206, "user_id": 817961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3IIHj.jpg?s=128&g=1", "display_name": "GregNash", "link": "https://stackoverflow.com/users/817961/gregnash"}, "reply_to_user": {"reputation": 7386, "user_id": 2894770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xfbIb.png?s=128&g=1", "display_name": "CaringDev", "link": "https://stackoverflow.com/users/2894770/caringdev"}, "edited": false, "score": 0, "creation_date": 1438807803, "post_id": 31841751, "comment_id": 51606643, "body": "I did read the manual, but the manual doesn&#39;t have an example. I just figured it out by doing some guessing and checking, which is what I expected would happen. If someone who knows more than me will provide an answer, then that&#39;s great. If not, then I&#39;ll answer it myself and hopefully save someone else from doing the guessing and checking that I just went through."}, {"owner": {"reputation": 1117, "user_id": 783646, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fbaaac202f7f7c159aaa08189d7d0bc?s=128&d=identicon&r=PG", "display_name": "Bruce_Warrior", "link": "https://stackoverflow.com/users/783646/bruce-warrior"}, "edited": false, "score": 1, "creation_date": 1441034759, "post_id": 31841751, "comment_id": 52504440, "body": "The manual is not clear with this respect. Is clear to import with GUI but in python script is not clear enough. For that reason I upvote and provide my way to achieve that"}], "answers": [{"comments": [{"owner": {"reputation": 1206, "user_id": 817961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3IIHj.jpg?s=128&g=1", "display_name": "GregNash", "link": "https://stackoverflow.com/users/817961/gregnash"}, "edited": false, "score": 0, "creation_date": 1438809313, "post_id": 31842727, "comment_id": 51607427, "body": "That sounds like a great way to learn and I&#39;m sure I&#39;ll do that in the future. However, the code that&#39;s generated seems to be a little different than what&#39;s actually run because the guiName doesn&#39;t get set when I run that Macro."}, {"owner": {"reputation": 1206, "user_id": 817961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3IIHj.jpg?s=128&g=1", "display_name": "GregNash", "link": "https://stackoverflow.com/users/817961/gregnash"}, "edited": false, "score": 0, "creation_date": 1438809410, "post_id": 31842727, "comment_id": 51607476, "body": "Record your work in the desktop application by clicking the menu item &quot;Tools &gt; Start Trace&quot;. After you do some stuff that gets recorded, you can save it as a python (.py file) and then load it as a macro."}], "tags": [], "owner": {"reputation": 7386, "user_id": 2894770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xfbIb.png?s=128&g=1", "display_name": "CaringDev", "link": "https://stackoverflow.com/users/2894770/caringdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1438808427, "creation_date": 1438808427, "answer_id": 31842727, "question_id": 31841751, "link": "https://stackoverflow.com/questions/31841751/how-do-i-use-paraviews-csvreader-in-a-python-script/31842727#31842727", "title": "How do I use ParaView&#39;s CSVReader in a Python Script?", "body": "<p>Unfortunately, I don't know Paraview at all. But I found \"...  simply record your work in the desktop application in the form of a python script ...\" at their site. If you import a CSV like that, it might give you a hint.</p>\n"}, {"tags": [], "owner": {"reputation": 1206, "user_id": 817961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3IIHj.jpg?s=128&g=1", "display_name": "GregNash", "link": "https://stackoverflow.com/users/817961/gregnash"}, "is_accepted": true, "score": 2, "last_activity_date": 1438808689, "creation_date": 1438808689, "answer_id": 31842808, "question_id": 31841751, "link": "https://stackoverflow.com/questions/31841751/how-do-i-use-paraviews-csvreader-in-a-python-script/31842808#31842808", "title": "How do I use ParaView&#39;s CSVReader in a Python Script?", "body": "<p>If you have a .csv file that looks like this:</p>\n\n<pre><code>x,y,z,attribute\n0,0,0,0\n1,0,0,1\n0,1,0,2\n1,1,0,3\n0,0,1,4\n1,0,1,5\n0,1,1,6\n1,1,1,7\n</code></pre>\n\n<p>then you can import it with a command that looks like this:</p>\n\n<pre><code>myReader = CSVReader(FileName='C:\\foo.csv', guiName='foo.csv')\n</code></pre>\n\n<p>Also, if you don't add that <code>guiName</code> parameter, you can change the name later using the <code>RenameSource</code> command like this:</p>\n\n<pre><code>RenameSource(proxy = myReader, newName = 'MySuperNewName'\n</code></pre>\n\n<p>Credit for the renaming part of this answer to <a href=\"http://www.paraview.org/pipermail/paraview/2012-June/025184.html\" rel=\"nofollow\">Sebastien Jourdain</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1117, "user_id": 783646, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fbaaac202f7f7c159aaa08189d7d0bc?s=128&d=identicon&r=PG", "display_name": "Bruce_Warrior", "link": "https://stackoverflow.com/users/783646/bruce-warrior"}, "is_accepted": false, "score": 1, "last_activity_date": 1441035068, "creation_date": 1441035068, "answer_id": 32314832, "question_id": 31841751, "link": "https://stackoverflow.com/questions/31841751/how-do-i-use-paraviews-csvreader-in-a-python-script/32314832#32314832", "title": "How do I use ParaView&#39;s CSVReader in a Python Script?", "body": "<p>Improving the @GregNash's answer. If you want to include only a single file (called <code>foo.csv</code>):</p>\n\n<blockquote>\n  <p>outcsv = CSVReader(FileName= 'foo.csv')</p>\n</blockquote>\n\n<p>Or if you want to include all files with certain pattern use <code>glob</code>. For example if files start with string <code>foo</code> (aka foo.csv.0, foo.csv.1, foo.csv.2): </p>\n\n<blockquote>\n  <p>myreader = CSVReader(FileName=glob.glob('foo*'))</p>\n</blockquote>\n\n<p>To use glob is neccesary <code>import glob</code> in the preamble. In general in Filename you could work with strings generated with python which could contain more complex pattern files and file's path.</p>\n"}], "owner": {"reputation": 1206, "user_id": 817961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3IIHj.jpg?s=128&g=1", "display_name": "GregNash", "link": "https://stackoverflow.com/users/817961/gregnash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 1, "accepted_answer_id": 31842808, "answer_count": 3, "score": 0, "last_activity_date": 1441035068, "creation_date": 1438804726, "question_id": 31841751, "link": "https://stackoverflow.com/questions/31841751/how-do-i-use-paraviews-csvreader-in-a-python-script", "title": "How do I use ParaView&#39;s CSVReader in a Python Script?", "body": "<p>How do I use ParaView's CSVReader in a Python Script? An example would be appreciated.</p>\n"}, {"tags": ["python", "django", "django-comments"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3487775, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e7e96b2e806a28aebb9da7da4025f20a?s=128&d=identicon&r=PG&f=1", "display_name": "user3487775", "link": "https://stackoverflow.com/users/3487775/user3487775"}, "edited": false, "score": 0, "creation_date": 1439022364, "post_id": 31842392, "comment_id": 51699323, "body": "That&#39;s not working. Comment is django framework that automatically bind to object. I just need to figure out how modifcation works in it. Need help please. Thanks for your time though. I really appreciate."}], "tags": [], "owner": {"reputation": 1298, "user_id": 4182111, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a93db336da0a6377c46b44b6044534e6?s=128&d=identicon&r=PG&f=1", "display_name": "Obj3ctiv3_C_88", "link": "https://stackoverflow.com/users/4182111/obj3ctiv3-c-88"}, "is_accepted": false, "score": 0, "last_activity_date": 1438807154, "creation_date": 1438807154, "answer_id": 31842392, "question_id": 31841742, "link": "https://stackoverflow.com/questions/31841742/django-comment-framework-delete-not-working/31842392#31842392", "title": "Django Comment Framework, Delete not working", "body": "<p>I'm not in front of my work laptop but this should work:</p>\n\n<pre><code>comment = get_object_or_404(YourCommentModel.id, id=comment_id) #assuming the pk for Comment is id\n</code></pre>\n\n<p>Also, make sure you are calling comment and assigning it to your model like </p>\n\n<pre><code>YourCommentModel = models.ForeignKey(Comment)\n</code></pre>\n\n<p>I may be wrong but you never assigned django_comment to a model (or didn't include the model in the problem) which is a necessity otherwise the table isn't added to your DB</p>\n"}], "owner": {"reputation": 147, "user_id": 3487775, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e7e96b2e806a28aebb9da7da4025f20a?s=128&d=identicon&r=PG&f=1", "display_name": "user3487775", "link": "https://stackoverflow.com/users/3487775/user3487775"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438807154, "creation_date": 1438804690, "question_id": 31841742, "link": "https://stackoverflow.com/questions/31841742/django-comment-framework-delete-not-working", "title": "Django Comment Framework, Delete not working", "body": "<p>I am new to Django. I am currently trying to implement comments section for each post in my application. I am having error when trying to delete specific comment and getting error int() argument must be a string or a number, not 'SimpleLazyObject'. Here is my code.</p>\n\n<p>comment.html : </p>\n\n<pre><code>&lt;h3&gt; Comments &lt;/h3&gt;\n{% get_comment_count for post as comment_count %}\n&lt;p&gt;This post has {{ comment_count }} comments.&lt;/p&gt;\n\n{% get_comment_list for post as comment_list %}\n\n{% for comment in comment_list %}\n    &lt;div style=\"border: 1px solid green;\"&gt;\n    &lt;a name=\"c{{ comment.id }}\"&gt;&lt;/a&gt;\n\n    &lt;a href=\"{% get_comment_permalink comment %}\"&gt;\n        permalink for comment #{{ forloop.counter }}\n    &lt;/a&gt;\n\n    &lt;hr&gt;\n    &lt;h4&gt; Just for testing purpose (Ignore) &lt;/h4&gt;\n    &lt;p&gt; content_object : {{comment.content_object.id}}&lt;/p&gt;\n    &lt;p&gt; content_type  : {{comment.content_type}}&lt;/p&gt;\n    &lt;p&gt; object_pk(Foreign Key) : {{comment.object_pk}} &lt;/p&gt;\n    &lt;p&gt; user(Foreign Key) : {{comment.user}}&lt;/p&gt;\n    &lt;p&gt; Comment ID : {{comment.id}}&lt;/p&gt;\n    &lt;hr&gt;\n    &lt;p&gt;Posted by: {{ comment.user_name }} on {{ comment.submit_date }}&lt;/p&gt;\n    &lt;p&gt; {{comment.comment}}&lt;/p&gt;\n\n    &lt;!-- NOT  SURE HOW WILL IT WORK --&gt;\n    &lt;a href = '{% url 'delete_own_comment' comment.id %}'&gt; Delete Comment &lt;/a&gt;\n  &lt;/div&gt;\n{% endfor %}\n</code></pre>\n\n<p>Views.py</p>\n\n<pre><code>import django_comments\nfrom django_comments.models import Comment\nfrom django_comments.views.moderation import perform_delete\n\ndef delete_own_comment(request, comment_id):\n    comment = get_object_or_404(Comment, id=comment_id)\n    # if comment.user.id != request.user.id:\n    #   raise Http404\n    perform_delete(request, comment)    \n</code></pre>\n\n<p>However, I have noticed that if I give any wrong comment_id in argument for get_object_or_404, it gets me to 404 page, but when correct comment_id is passed, it gives me error </p>\n\n<pre><code>Request Method:     GET\nRequest URL:    http://localhost:8080/posts/comments/delete/2/\nDjango Version:     1.8.2\nException Type:     TypeError\nException Value:    \n\nint() argument must be a string or a number, not 'SimpleLazyObject'\n\nException Location:     /usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.py in get_prep_value, line 985\nPython Executable:  /usr/bin/python\nPython Version:     2.7.6\n</code></pre>\n\n<p>2) Furthermore in html, permanent link for comment link is not working. Its giving me 404 error too:</p>\n\n<pre><code>post objects don't have a get_absolute_url() method\n</code></pre>\n\n<p>However, I do have get_absolute_url() in my post model: </p>\n\n<pre><code>def get_absolute_url(self):\n        return reverse('post-detail', kwargs={'pk': self.id})\n</code></pre>\n\n<p>url.py </p>\n\n<pre><code> # ex: /posts/3/\n    url(r'^(?P&lt;post_id&gt;[0-9]+)/$', views.detail, name='post-detail'),\n</code></pre>\n"}, {"tags": ["python", "linux", "awk"], "comments": [{"owner": {"reputation": 2397, "user_id": 699159, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1af4fce4b64ececdfc88b33881bbc9?s=128&d=identicon&r=PG", "display_name": "Tris - archived", "link": "https://stackoverflow.com/users/699159/tris-archived"}, "edited": false, "score": 1, "creation_date": 1438804646, "post_id": 31841676, "comment_id": 51604892, "body": "is <code>python -c &quot;print(expression)&quot;</code> the sort of thing you want?"}, {"owner": {"reputation": 5805, "user_id": 258741, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0Je1N.jpg?s=128&g=1", "display_name": "Zeus", "link": "https://stackoverflow.com/users/258741/zeus"}, "reply_to_user": {"reputation": 2397, "user_id": 699159, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1af4fce4b64ececdfc88b33881bbc9?s=128&d=identicon&r=PG", "display_name": "Tris - archived", "link": "https://stackoverflow.com/users/699159/tris-archived"}, "edited": false, "score": 0, "creation_date": 1438804752, "post_id": 31841676, "comment_id": 51604948, "body": "@FoxWilson I&#39;m trying to understand how to do basic search and word processing on log files using python. See my update, that is how the awk will search and print the matching line from the file."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438804841, "post_id": 31841676, "comment_id": 51604993, "body": "I&#39;m voting to close this question as off-topic because SO is not a code translation service or a tutorial service."}, {"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 1, "creation_date": 1438805448, "post_id": 31841676, "comment_id": 51605320, "body": "....I&#39;m trying to come up with good way to do what you want, but <code>somefile.log&gt; python3 -c &quot;import re; import sys; [print(i) for i in sys.stdin if re.search(&#39;Classic.java&#39;, i)]&quot;</code> requires piping, and looks real silly :P. Just use awk, python&#39;s not really meant for stuff like this."}, {"owner": {"reputation": 5805, "user_id": 258741, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0Je1N.jpg?s=128&g=1", "display_name": "Zeus", "link": "https://stackoverflow.com/users/258741/zeus"}, "reply_to_user": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 0, "creation_date": 1438805885, "post_id": 31841676, "comment_id": 51605535, "body": "@NightShadeQueen thank you much for the reply, that is what i&#39;ve expected, i&#39;ve written a python something like that, was looking for ways to use python in these type of stuff as i hear it is versatile, and it was lengthy compared to awk or sed."}, {"owner": {"reputation": 9405, "user_id": 507544, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/75330946da121a9e1d905dd3f54042f6?s=128&d=identicon&r=PG", "display_name": "nealmcb", "link": "https://stackoverflow.com/users/507544/nealmcb"}, "edited": false, "score": 1, "creation_date": 1444071491, "post_id": 31841676, "comment_id": 53736630, "body": "Think of the command line as a specialized IDE, and the question as a request to find a convenient, unix-like way to use python via that IDE.  The pyline / pyp answer is exactly that - letting programmers easily use their knowledge of python to filter or mapreduce stuff via the command line."}], "answers": [{"comments": [{"owner": {"reputation": 9405, "user_id": 507544, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/75330946da121a9e1d905dd3f54042f6?s=128&d=identicon&r=PG", "display_name": "nealmcb", "link": "https://stackoverflow.com/users/507544/nealmcb"}, "edited": false, "score": 0, "creation_date": 1444071739, "post_id": 31845976, "comment_id": 53736757, "body": "You made the question a helpful, worthy question via this epic answer (truly, given the ability to watch Star Wars via python on the console)!"}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 5, "last_activity_date": 1444105601, "last_edit_date": 1495535309, "creation_date": 1438828940, "answer_id": 31845976, "question_id": 31841676, "link": "https://stackoverflow.com/questions/31841676/how-to-use-python-in-the-linux-command/31845976#31845976", "title": "How to use Python in the Linux command", "body": "<p>Python is not very suitable for shell one-liners. You could play with <a href=\"https://code.google.com/p/pyp/\" rel=\"nofollow noreferrer\">The Pyed Piper</a>:</p>\n\n<pre><code>$ ls | pyp \"p[0] | pp.sort() | p + ' first letter, sorted!'\"\n  # it gives sorted list of first letters of every line\n</code></pre>\n\n<p>It uses standard Python string and list methods as well as custom functions. There is also <a href=\"https://github.com/westurner/pyline\" rel=\"nofollow noreferrer\">pyline</a>:</p>\n\n<pre><code>$ ls | pyline -m os 'line and os.path.abspath(line.strip())'\n$ ls | pyline -r '\\(.*\\)' 'rgx and (rgx.group(0), rgx.group(1)) or line'\n$ ls | pyline -p 'p and p.abspath() or (\"# \".format(line))'\n</code></pre>\n\n<p>Another alternative is to use <a href=\"http://ipython.org/\" rel=\"nofollow noreferrer\"><code>ipython</code> as a shell</a> or a browser-based <a href=\"http://ipython.org/notebook.html\" rel=\"nofollow noreferrer\">notebook</a> (recommended). Or if you want more BASHwards-looking syntax and tab completion for subprocess commands; try <a href=\"http://xonsh.org/index.html\" rel=\"nofollow noreferrer\"><code>xonsh</code> as your shell</a>:</p>\n\n<pre><code>xonsh$ [i*i for i in range(10)]\n[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\nxonsh$ date -u\nTue Oct  6 04:25:27 UTC 2015\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/32768716/4279\"><code>subprocess</code> and its alternatives (<code>plumbum</code>, <code>pexpect</code>, <code>sarge</code>, <code>sh</code> (module), <code>fabric</code>)</a> allow you to create arbitrary complex commands by exploiting the best of python and bash.</p>\n\n<p>There are also several <a href=\"http://pythonwise.blogspot.ru/2015/01/python-m.html\" rel=\"nofollow noreferrer\">nice <code>python -m</code> one-liners</a> e.g.:</p>\n\n<pre><code>$ python3 -m http.server # serve current directory over http\n$ python -m zipfile # work with zipfiles\n$ python -m calendar # show calendar\n$ python -m telnetlib towel.blinkenlights.nl # Star Wars\n</code></pre>\n"}], "owner": {"reputation": 5805, "user_id": 258741, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0Je1N.jpg?s=128&g=1", "display_name": "Zeus", "link": "https://stackoverflow.com/users/258741/zeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 31845976, "answer_count": 1, "score": -1, "last_activity_date": 1444105601, "creation_date": 1438804494, "question_id": 31841676, "link": "https://stackoverflow.com/questions/31841676/how-to-use-python-in-the-linux-command", "title": "How to use Python in the Linux command", "body": "<p>I'm used to writing a lot of AWK commands, but, always wanted to use Python to do the same stuff that i do with Awk <strong>without writing a .py file</strong>. I have basics in the Python, but not in the command line.</p>\n\n<p>For example I have the following  AWK command. What is the equivalent for python?</p>\n\n<pre><code>awk '/Classic.java/ {print $0}' somefile.log;\n</code></pre>\n"}, {"tags": ["python", "sql-server", "django", "apache", "pymssql"], "comments": [{"owner": {"reputation": 2666, "user_id": 157768, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ckoi1.jpg?s=128&g=1", "display_name": "aldux", "link": "https://stackoverflow.com/users/157768/aldux"}, "edited": false, "score": 0, "creation_date": 1438806240, "post_id": 31841663, "comment_id": 51605722, "body": "The application access to the database usually is via another port, and does not goes through Apache. Does the SQL Server address is configured correctly in the production environment?"}, {"owner": {"reputation": 109, "user_id": 3079064, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91c36f639b51face6758c50976fffb60?s=128&d=identicon&r=PG&f=1", "display_name": "user3079064", "link": "https://stackoverflow.com/users/3079064/user3079064"}, "reply_to_user": {"reputation": 2666, "user_id": 157768, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ckoi1.jpg?s=128&g=1", "display_name": "aldux", "link": "https://stackoverflow.com/users/157768/aldux"}, "edited": false, "score": 0, "creation_date": 1438806691, "post_id": 31841663, "comment_id": 51605975, "body": "Thank you for your response, aldux. I am using freetds to access SQL Server over port 1433. This setting is the same for my development and production environment, but I will double-check as soon as I have the chance here."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 3079064, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91c36f639b51face6758c50976fffb60?s=128&d=identicon&r=PG&f=1", "display_name": "user3079064", "link": "https://stackoverflow.com/users/3079064/user3079064"}, "edited": false, "score": 0, "creation_date": 1438873662, "post_id": 31855852, "comment_id": 51638225, "body": "Brilliant! Thank you, Graham! That solved it. And those links are very helpful as well."}], "tags": [], "owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "is_accepted": true, "score": 4, "last_activity_date": 1438864304, "creation_date": 1438864304, "answer_id": 31855852, "question_id": 31841663, "link": "https://stackoverflow.com/questions/31841663/django-app-hangs-when-attempting-to-connect-to-database-via-apache/31855852#31855852", "title": "Django app hangs when attempting to connect to database via Apache", "body": "<p>Instead of:</p>\n\n<pre><code># WSGIDaemonProcess application\nWSGIPythonPath /home/production_code/python3env/lib/python3.4/site-packages:/home/production_code/school\n# WSGIProcessGroup application\n</code></pre>\n\n<p>use:</p>\n\n<pre><code>WSGIDaemonProcess application python-path=/home/production_code/python3env/lib/python3.4/site-packages:/home/production_code/school\nWSGIProcessGroup application\nWSGIApplicationGroup %{GLOBAL}\n</code></pre>\n\n<p>A key part of this is the <code>WSGIApplicationGroup</code> directive, with it being set to <code>%{GLOBAL}</code>.</p>\n\n<p>This is to get around faulty third party extension modules for Python that don't work in sub interpreters and which can fail with a dead lock or crash.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API\" rel=\"nofollow\">https://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API</a></li>\n</ul>\n\n<p>It is also recommend you go back to using daemon mode. It is generally not a good idea to use embedded mode.</p>\n\n<ul>\n<li><a href=\"http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html\" rel=\"nofollow\">http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html</a></li>\n</ul>\n"}], "owner": {"reputation": 109, "user_id": 3079064, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91c36f639b51face6758c50976fffb60?s=128&d=identicon&r=PG&f=1", "display_name": "user3079064", "link": "https://stackoverflow.com/users/3079064/user3079064"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 1, "accepted_answer_id": 31855852, "answer_count": 1, "score": 0, "last_activity_date": 1438864304, "creation_date": 1438804450, "last_edit_date": 1438804866, "question_id": 31841663, "link": "https://stackoverflow.com/questions/31841663/django-app-hangs-when-attempting-to-connect-to-database-via-apache", "title": "Django app hangs when attempting to connect to database via Apache", "body": "<p>I am having difficulty troubleshooting this issue. I have a Django app running on an Ubuntu 14.04 server (with Apache 2.4 and mod_wsgi for Python 3.4). It connects to SQL Server via pymssql.</p>\n\n<p>In development, the app works fine. I query the database, and the database returns the expected results.</p>\n\n<p>In production (under the Apache user), however, the script hangs at the exact point that a database query is made. My browser (Chrome or Firefox) shows a spinning wheel that continues to spin as long as the browser window is open.</p>\n\n<p>I have the following in my <code>apache2.conf</code> file:</p>\n\n<pre><code>ServerName localhost\n# WSGIDaemonProcess application\nWSGIPythonPath /home/production_code/python3env/lib/python3.4/site-packages:/home/production_code/school\n# WSGIProcessGroup application\nWSGIScriptAlias / /home/production_code/school/school/wsgi.py\n# Python virtualenv home\nWSGIPythonHome /home/production_code/python3env\n# Include the virtual host configurations:\nIncludeOptional sites-enabled/*.conf\n</code></pre>\n\n<p>And the following in my <code>sites-enabled/000-default.conf</code> file:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;    \n        ServerAdmin *****@school.edu\n        ServerName  localhost\n        DocumentRoot /var/www/html\n\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n        Alias /static/ /home/production_code/school/static/\n\n        &lt;Directory /home/production_code/school/&gt;\n            Require all granted\n        &lt;/Directory&gt;\n        &lt;Directory /home/production_code/school/&gt;\n            &lt;Files wsgi.py&gt;\n                Require all granted\n            &lt;/Files&gt;\n        &lt;/Directory&gt;\n        &lt;Directory /home/production_code/school/static&gt;\n            Require all granted\n        &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Does anyone have any idea what might be causing this or how I might troubleshoot this? The Apache error logs and access logs are not particularly helpful in this situation, since a response to the request is never rendered. Similarly, Django debugging is also not useful here.</p>\n"}, {"tags": ["python", "easygui"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1438804561, "post_id": 31841643, "comment_id": 51604854, "body": "After ten seconds of searching, I even located a video about how to install EasyGUI. What&#39;s your problem?"}, {"owner": {"reputation": 927, "user_id": 4950204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/246295ada7d994b6b6a585163107f770?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsknator", "link": "https://stackoverflow.com/users/4950204/kaminsknator"}, "edited": false, "score": 0, "creation_date": 1438804573, "post_id": 31841643, "comment_id": 51604861, "body": "how about some specifics. Operating system, python version."}, {"owner": {"reputation": 17, "user_id": 5161780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/baqvE.jpg?s=128&g=1", "display_name": "sir_smiggles", "link": "https://stackoverflow.com/users/5161780/sir-smiggles"}, "edited": false, "score": 0, "creation_date": 1438804822, "post_id": 31841643, "comment_id": 51604984, "body": "I have reasearched and still havent found a solution. I have followed videos but it still is not working"}, {"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 0, "creation_date": 1438805185, "post_id": 31841643, "comment_id": 51605193, "body": "A small amount of research (ie &quot;I typed <code>pip search easygui</code> into my terminal&quot;) suggests that you can install it with pip. I&#39;d recommend that."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5161780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/baqvE.jpg?s=128&g=1", "display_name": "sir_smiggles", "link": "https://stackoverflow.com/users/5161780/sir-smiggles"}, "edited": false, "score": 0, "creation_date": 1438805170, "post_id": 31841713, "comment_id": 51605176, "body": "Thanks, this helped. I installed a fresh copy of Python 2.7 and then it created a directory for Python. Moved the module into there and it worked!"}], "tags": [], "owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "is_accepted": true, "score": 0, "last_activity_date": 1438804587, "creation_date": 1438804587, "answer_id": 31841713, "question_id": 31841643, "link": "https://stackoverflow.com/questions/31841643/cant-import-python-modules/31841713#31841713", "title": "Can&#39;t import python modules", "body": "<p>You haven't install them, you just have to put it a directory, where Python find them, e.g. in a folder is already in your <code>PYTHONPATH</code>.</p>\n\n<p>Perhaps the best if you put <code>PythonXX/Lib/site-packages</code> directory.</p>\n"}, {"tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 1, "last_activity_date": 1438830414, "creation_date": 1438830414, "answer_id": 31846154, "question_id": 31841643, "link": "https://stackoverflow.com/questions/31841643/cant-import-python-modules/31846154#31846154", "title": "Can&#39;t import python modules", "body": "<p>Don't put manually python file into <code>PythonXX/Lib/site-packages</code> directory, use <code>pip install &lt;package-name&gt;</code> instead e.g.:</p>\n\n<pre><code>$ pip install easygui\n</code></pre>\n\n<p>The advantage is that you can upgrade it later:</p>\n\n<pre><code>$ pip install -U easygui\n</code></pre>\n\n<p>Or uninstall:</p>\n\n<pre><code>$ pip uninstall -U easygui\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/installing/\" rel=\"nofollow\">pip is the preferred installer program.</a></p>\n"}], "owner": {"reputation": 17, "user_id": 5161780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/baqvE.jpg?s=128&g=1", "display_name": "sir_smiggles", "link": "https://stackoverflow.com/users/5161780/sir-smiggles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 31841713, "answer_count": 2, "score": -2, "last_activity_date": 1438830414, "creation_date": 1438804388, "last_edit_date": 1438809286, "question_id": 31841643, "link": "https://stackoverflow.com/questions/31841643/cant-import-python-modules", "title": "Can&#39;t import python modules", "body": "<p>I am trying to install EasyGUI. There is no <code>setup.py</code> so I can't install the module like you can with a proper module that has a <code>setup.py</code> file\nAny help would be appreciated. Thanks</p>\n"}, {"tags": ["python", "macos", "review-board"], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 3813675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48a04bbe3a75a9686f689ef8c6378a1?s=128&d=identicon&r=PG", "display_name": "danehammer", "link": "https://stackoverflow.com/users/3813675/danehammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1447363501, "creation_date": 1447363501, "answer_id": 33681669, "question_id": 31841546, "link": "https://stackoverflow.com/questions/31841546/python-version-mismatch-error-while-configuring-the-rbtools-on-mac-osx/33681669#33681669", "title": "Python version mismatch error while configuring the RBTools on mac osx", "body": "<p>I think this is a bug in the RBTools assembly. I filed <a href=\"https://hellosplat.com/s/beanbag/tickets/4020/\" rel=\"nofollow\">this ticket</a> for it. See more details on how I troubleshot there, but specifically, go look at <code>/usr/local/bin/rbt</code> and change the shebang from <code>python2.6</code> to <code>python</code> and you should be good.</p>\n"}], "owner": {"reputation": 187, "user_id": 418388, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/wff0C.jpg?s=128&g=1", "display_name": "Srinivas HN", "link": "https://stackoverflow.com/users/418388/srinivas-hn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 851, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447363501, "creation_date": 1438804068, "question_id": 31841546, "link": "https://stackoverflow.com/questions/31841546/python-version-mismatch-error-while-configuring-the-rbtools-on-mac-osx", "title": "Python version mismatch error while configuring the RBTools on mac osx", "body": "<p>I was trying to configure the RBTools on mac os but i am facing an issue with setting up the repo. \nThis is the error am getting.</p>\n\n<pre><code>ImportError: Python minor version mismatch: The Mercurial extension modules were compiled with Python 2.7.5, but Mercurial is currently using Python with sys.hexversion=33949936: Python 2.6.8 (unknown, Mar  9 2014, 22:16:00) \\n', '[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)]\\n', ' at: /usr/bin/python\\n'\n</code></pre>\n\n<p>I have installed RBTools v0.7.4 with python version 2.6.8 and i have python version 2.7.5 as well.</p>\n\n<p>This is the complete traceback   <a href=\"http://pastie.org/10332044\" rel=\"nofollow\">http://pastie.org/10332044</a></p>\n\n<p>Am getting this error when i try to run the rbt setup-repo.</p>\n\n<p>Any help on this would be of great help am struck with this from past one week.</p>\n"}, {"tags": ["python", "rdf", "rdflib", "json-ld"], "comments": [{"owner": {"reputation": 2625, "user_id": 60982, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1de356f512a7d672c68690c8ca09ad?s=128&d=identicon&r=PG", "display_name": "letmaik", "link": "https://stackoverflow.com/users/60982/letmaik"}, "edited": false, "score": 0, "creation_date": 1445029531, "post_id": 31841543, "comment_id": 54166307, "body": "Your code works for me without adding the SPARQLWrapper import."}, {"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1460681850, "post_id": 31841543, "comment_id": 60867976, "body": "How does one specify the subject of the triples? The code in your question specifies p-o and has blank for s I think."}], "answers": [{"tags": [], "owner": {"reputation": 233, "user_id": 2549826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1375145186/picture?type=large", "display_name": "Brainlock", "link": "https://stackoverflow.com/users/2549826/brainlock"}, "is_accepted": true, "score": 3, "last_activity_date": 1438805519, "creation_date": 1438805519, "answer_id": 31841964, "question_id": 31841543, "link": "https://stackoverflow.com/questions/31841543/rdflib-parser-does-not-recognize-json-ld-format/31841964#31841964", "title": "RDFLib parser does not recognize json-ld format", "body": "<p>I got it working by adding:</p>\n\n<pre><code>from SPARQLWrapper import SPARQLWrapper\n</code></pre>\n\n<p>I was looking into the jsonLayer module from RDFLib at <a href=\"http://rdflib.readthedocs.org/en/latest/apidocs/rdflib.plugins.sparql.results.html#module-rdflib.plugins.sparql.results.jsonlayer\" rel=\"nofollow\">http://rdflib.readthedocs.org/en/latest/apidocs/rdflib.plugins.sparql.results.html#module-rdflib.plugins.sparql.results.jsonlayer</a> and noticed the mentioning of SPARQLWrapper which I used in my previous environment where I got the example working and there it was.</p>\n"}, {"comments": [{"owner": {"reputation": 318, "user_id": 1530467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/j0Xwn.jpg?s=128&g=1", "display_name": "touchStone", "link": "https://stackoverflow.com/users/1530467/touchstone"}, "edited": false, "score": 0, "creation_date": 1609945615, "post_id": 52264489, "comment_id": 115979590, "body": "f.close() above is not necessary based on the way you have opened the file."}], "tags": [], "owner": {"reputation": 1, "user_id": 6305760, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208709765239056/picture?type=large", "display_name": "Sounchio Serge", "link": "https://stackoverflow.com/users/6305760/sounchio-serge"}, "is_accepted": false, "score": 0, "last_activity_date": 1536608738, "creation_date": 1536608738, "answer_id": 52264489, "question_id": 31841543, "link": "https://stackoverflow.com/questions/31841543/rdflib-parser-does-not-recognize-json-ld-format/52264489#52264489", "title": "RDFLib parser does not recognize json-ld format", "body": "<p>this a simple syntax you can use</p>\n\n<pre><code>import rdflib\nimport json\nfrom collections import Counter\nfrom rdflib import Graph, plugin\nfrom rdflib.serializer import Serializer\n\ng = rdflib.Graph()\ng.parse(\"http://purl.obolibrary.org/obo/go.owl\")\nj = g.serialize(format='json-ld', indent=4)\nwith open('ontology.json', 'a+') as f:\n    f.write(str(j))\nf.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1280, "user_id": 5433896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UVdxi.jpg?s=128&g=1", "display_name": "Sander Vanden Hautte", "link": "https://stackoverflow.com/users/5433896/sander-vanden-hautte"}, "is_accepted": false, "score": 0, "last_activity_date": 1602061862, "creation_date": 1602061862, "answer_id": 64240869, "question_id": 31841543, "link": "https://stackoverflow.com/questions/31841543/rdflib-parser-does-not-recognize-json-ld-format/64240869#64240869", "title": "RDFLib parser does not recognize json-ld format", "body": "<p>I encountered this PluginException as well, in a Jupyter notebook, after running the following two cells:</p>\n<p><code>! pip install rdflib-json</code></p>\n<pre><code>from rdflib import Graph, plugin\nfrom rdflib.serializer import Serializer\n\ng = Graph()\ng.parse(data=&quot;&quot;&quot;\n&lt;some turtle triples&gt;\n&quot;&quot;&quot;, format=&quot;turtle&quot;)\ng.serialize(format=&quot;json-ld&quot;) \n</code></pre>\n<p>Turns out it started working by just <strong>restarting the notebook</strong> and rerunning the code above (so reimporting after restarting the notebook).</p>\n"}], "owner": {"reputation": 233, "user_id": 2549826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1375145186/picture?type=large", "display_name": "Brainlock", "link": "https://stackoverflow.com/users/2549826/brainlock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2663, "favorite_count": 0, "accepted_answer_id": 31841964, "answer_count": 3, "score": 3, "last_activity_date": 1609945595, "creation_date": 1438804055, "question_id": 31841543, "link": "https://stackoverflow.com/questions/31841543/rdflib-parser-does-not-recognize-json-ld-format", "title": "RDFLib parser does not recognize json-ld format", "body": "<p>My code in Python 3.4:</p>\n\n<pre><code>from rdflib import Graph, plugin\nimport json, rdflib_jsonld\nfrom rdflib.plugin import register, Serializer\nregister('json-ld', Serializer, 'rdflib_jsonld.serializer', 'JsonLDSerializer')\n\ncontext = {\n\"@context\": {\n            \"foaf\" : \"http://xmlns.com/foaf/0.1/\",\n            \"vcard\": \"http://www.w3.org/2006/vcard/ns#country-name\",\n            \"job\": \"http://example.org/job\",\n\n            \"name\":             {\"@id\": \"foaf:name\"},\n            \"country\":          {\"@id\": \"vcard:country-name\"},\n            \"profession\":       {\"@id\": \"job:occupation\"},\n        }\n}\n\nx = [{\"name\": \"bert\", \"country\": \"antartica\", \"profession\": \"bear\"}]\ng = Graph()\ng.parse(data=json.dumps(x), format='json-ld', context=context)\ng.close()\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>\"No plugin registered for (%s, %s)\" % (name, kind))\nrdflib.plugin.PluginException: No plugin registered for (json-ld, &lt;class'rdflib.parser.Parser'&gt;)\n</code></pre>\n\n<p>According to the <a href=\"http://rdflib.readthedocs.org/en/latest/plugin_parsers.html\" rel=\"nofollow\">RDFLib documentation</a>, a list of supported plugins does not include the json-ld format. However, I had it working before with format set to json-ld and there are plenty of examples using the json-ld format, e.g: <a href=\"https://github.com/RDFLib/rdflib-jsonld/issues/19\" rel=\"nofollow\">https://github.com/RDFLib/rdflib-jsonld/issues/19</a></p>\n\n<p>I included the import of rdflib_jsonld although it worked before on another environment (Python 2.7) with only the rdflib (I know, doesn't make any sense).</p>\n\n<p>The register part of json-ld on line 4 isn't helping either.</p>\n\n<p>Anyone having an idea?</p>\n"}, {"tags": ["java", "python", "macos", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 1624, "user_id": 296549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/134cf24554b2115f4ed28d2ff43b378f?s=128&d=identicon&r=PG", "display_name": "Bacon", "link": "https://stackoverflow.com/users/296549/bacon"}, "edited": false, "score": 0, "creation_date": 1438828530, "post_id": 31841509, "comment_id": 51613019, "body": "What version of spark do you use?"}, {"owner": {"reputation": 1624, "user_id": 296549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/134cf24554b2115f4ed28d2ff43b378f?s=128&d=identicon&r=PG", "display_name": "Bacon", "link": "https://stackoverflow.com/users/296549/bacon"}, "edited": false, "score": 0, "creation_date": 1438828660, "post_id": 31841509, "comment_id": 51613049, "body": "That might be helpful <a href=\"http://stackoverflow.com/a/30851037/296549\">stackoverflow.com/a/30851037/296549</a>"}, {"owner": {"reputation": 2005, "user_id": 3689314, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de01a0264b9b4e2b932cd084fa53a9f7?s=128&d=identicon&r=PG&f=1", "display_name": "mt88", "link": "https://stackoverflow.com/users/3689314/mt88"}, "reply_to_user": {"reputation": 1624, "user_id": 296549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/134cf24554b2115f4ed28d2ff43b378f?s=128&d=identicon&r=PG", "display_name": "Bacon", "link": "https://stackoverflow.com/users/296549/bacon"}, "edited": false, "score": 1, "creation_date": 1438900785, "post_id": 31841509, "comment_id": 51653015, "body": "I resolved the above problem by downloading a different tarbll of spark."}, {"owner": {"reputation": 764, "user_id": 1613333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LBxQ9.jpg?s=128&g=1", "display_name": "Vinod Kumar Chauhan", "link": "https://stackoverflow.com/users/1613333/vinod-kumar-chauhan"}, "edited": false, "score": 0, "creation_date": 1441179920, "post_id": 31841509, "comment_id": 52568351, "body": "See my comments at- <a href=\"http://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/32347328#32347328\" title=\"pyspark exception java gateway process exited before sending the driver its po\">stackoverflow.com/questions/31841509/&hellip;</a>"}, {"owner": {"reputation": 5505, "user_id": 856804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0069fbcc96447eabeb9578fb73a7571?s=128&d=identicon&r=PG", "display_name": "zyxue", "link": "https://stackoverflow.com/users/856804/zyxue"}, "edited": false, "score": 0, "creation_date": 1454270442, "post_id": 31841509, "comment_id": 57957849, "body": "In addition to @mt88&#39;s comment, spark-1.6.0-bin-without-hadoop.tgz produces the above exception, but spark-1.6.0-bin-hadoop2.6.tgz doesn&#39;t for me on Ubuntu 15.04"}, {"owner": {"reputation": 1873, "user_id": 5675130, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1f744b4a85fd476f7e3d0f3a4561cb67?s=128&d=identicon&r=PG&f=1", "display_name": "lfk", "link": "https://stackoverflow.com/users/5675130/lfk"}, "reply_to_user": {"reputation": 5505, "user_id": 856804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0069fbcc96447eabeb9578fb73a7571?s=128&d=identicon&r=PG", "display_name": "zyxue", "link": "https://stackoverflow.com/users/856804/zyxue"}, "edited": false, "score": 0, "creation_date": 1519778731, "post_id": 31841509, "comment_id": 85045705, "body": "@zyxue I&#39;m also using Spark 2.2.1 without Hadoop. Do you think that&#39;s the cause?"}, {"owner": {"reputation": 5505, "user_id": 856804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0069fbcc96447eabeb9578fb73a7571?s=128&d=identicon&r=PG", "display_name": "zyxue", "link": "https://stackoverflow.com/users/856804/zyxue"}, "reply_to_user": {"reputation": 1873, "user_id": 5675130, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1f744b4a85fd476f7e3d0f3a4561cb67?s=128&d=identicon&r=PG&f=1", "display_name": "lfk", "link": "https://stackoverflow.com/users/5675130/lfk"}, "edited": false, "score": 0, "creation_date": 1519784258, "post_id": 31841509, "comment_id": 85047215, "body": "@lfk, not sure of your question, you could just try and see"}, {"owner": {"reputation": 1873, "user_id": 5675130, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1f744b4a85fd476f7e3d0f3a4561cb67?s=128&d=identicon&r=PG&f=1", "display_name": "lfk", "link": "https://stackoverflow.com/users/5675130/lfk"}, "reply_to_user": {"reputation": 5505, "user_id": 856804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0069fbcc96447eabeb9578fb73a7571?s=128&d=identicon&r=PG", "display_name": "zyxue", "link": "https://stackoverflow.com/users/856804/zyxue"}, "edited": false, "score": 0, "creation_date": 1519794141, "post_id": 31841509, "comment_id": 85049603, "body": "@zyxue I&#39;ll have to build Spark in that case as the pre built version comes with 2.7 and I need 3"}, {"owner": {"reputation": 5505, "user_id": 856804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0069fbcc96447eabeb9578fb73a7571?s=128&d=identicon&r=PG", "display_name": "zyxue", "link": "https://stackoverflow.com/users/856804/zyxue"}, "reply_to_user": {"reputation": 1873, "user_id": 5675130, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1f744b4a85fd476f7e3d0f3a4561cb67?s=128&d=identicon&r=PG&f=1", "display_name": "lfk", "link": "https://stackoverflow.com/users/5675130/lfk"}, "edited": false, "score": 0, "creation_date": 1519795278, "post_id": 31841509, "comment_id": 85049926, "body": "@lfk, <code>Spark runs on Java 8+, Python 2.7+&#47;3.4+ and R 3.1+. For the Scala API, Spark 2.2.1 uses Scala 2.11. You will need to use a compatible Scala version (2.11.x).</code>, <a href=\"https://spark.apache.org/docs/latest/\" rel=\"nofollow noreferrer\">spark.apache.org/docs/latest</a>, so python 3 shouldn&#39;t be a problem. If you&#39;re working on a single node, then building it yourself is ok, but still I would recommend you to install it with some sort of a package manager, e.g. anaconda. The latest version pyspark, <a href=\"https://pypi.python.org/pypi/pyspark/2.1.1\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/pyspark/2.1.1</a>, it supports python3."}, {"owner": {"reputation": 1873, "user_id": 5675130, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1f744b4a85fd476f7e3d0f3a4561cb67?s=128&d=identicon&r=PG&f=1", "display_name": "lfk", "link": "https://stackoverflow.com/users/5675130/lfk"}, "reply_to_user": {"reputation": 5505, "user_id": 856804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0069fbcc96447eabeb9578fb73a7571?s=128&d=identicon&r=PG", "display_name": "zyxue", "link": "https://stackoverflow.com/users/856804/zyxue"}, "edited": false, "score": 0, "creation_date": 1519821320, "post_id": 31841509, "comment_id": 85063623, "body": "@zyxue I&#39;m sorry I meant Hadoop 3. That&#39;s why I&#39;m using the Hadoop-free binaries. pip pyspark is prebuilt with Hadoop 2.7."}, {"owner": {"reputation": 5505, "user_id": 856804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0069fbcc96447eabeb9578fb73a7571?s=128&d=identicon&r=PG", "display_name": "zyxue", "link": "https://stackoverflow.com/users/856804/zyxue"}, "reply_to_user": {"reputation": 1873, "user_id": 5675130, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1f744b4a85fd476f7e3d0f3a4561cb67?s=128&d=identicon&r=PG&f=1", "display_name": "lfk", "link": "https://stackoverflow.com/users/5675130/lfk"}, "edited": false, "score": 0, "creation_date": 1519825355, "post_id": 31841509, "comment_id": 85066361, "body": "@lfk, I am not familiar with Hadoop versions, to me, it&#39;s better to stick to what&#39;s being supported."}, {"owner": {"reputation": 590, "user_id": 4839262, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/l0bfF.jpg?s=128&g=1", "display_name": "mikesneider", "link": "https://stackoverflow.com/users/4839262/mikesneider"}, "edited": false, "score": 0, "creation_date": 1591199343, "post_id": 31841509, "comment_id": 109966820, "body": "@mt88 have solved your problem? I have still the problem, I have Hadoop 2.7 and Spark 3.0.0"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4573043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7cbd5de3feb602b028769cefe3cfae?s=128&d=identicon&r=PG", "display_name": "quax", "link": "https://stackoverflow.com/users/4573043/quax"}, "edited": false, "score": 1, "creation_date": 1448595338, "post_id": 32547759, "comment_id": 55658526, "body": "Since I can&#39;t comment on user1613333 answer I do it here, I also found that using Anaconda makes things go much smoother."}, {"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 1, "creation_date": 1527091362, "post_id": 32547759, "comment_id": 87998640, "body": "You can also set environment variables using <code>import os; os.environ[&#39;PYSPARK_SUBMIT_ARGS&#39;] = &quot;--master ...&quot;</code>"}, {"owner": {"reputation": 590, "user_id": 4839262, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/l0bfF.jpg?s=128&g=1", "display_name": "mikesneider", "link": "https://stackoverflow.com/users/4839262/mikesneider"}, "edited": false, "score": 0, "creation_date": 1591364225, "post_id": 32547759, "comment_id": 110035803, "body": "@quax I used &#39;os.environ[&#39;PYSPARK_SUBMIT_ARGS&#39;]= &quot;--master spark://localhost:8888&quot; &#39; but I do not know if I am doing wrong, still no works"}, {"owner": {"reputation": 507, "user_id": 4682228, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ma0bQYVH5nY/AAAAAAAAAAI/AAAAAAAAAHQ/esfQLawFwz0/photo.jpg?sz=128", "display_name": "Denis G. Labrecque", "link": "https://stackoverflow.com/users/4682228/denis-g-labrecque"}, "reply_to_user": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 0, "creation_date": 1617937988, "post_id": 32547759, "comment_id": 118455956, "body": "What bash file where and why? WTH is <code>&#47;sbin&#47;</code> (I&#39;m on Windows)? @BallpointBen appreciate the addition, but same error as before."}, {"owner": {"reputation": 111, "user_id": 4573043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7cbd5de3feb602b028769cefe3cfae?s=128&d=identicon&r=PG", "display_name": "quax", "link": "https://stackoverflow.com/users/4573043/quax"}, "reply_to_user": {"reputation": 507, "user_id": 4682228, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ma0bQYVH5nY/AAAAAAAAAAI/AAAAAAAAAHQ/esfQLawFwz0/photo.jpg?sz=128", "display_name": "Denis G. Labrecque", "link": "https://stackoverflow.com/users/4682228/denis-g-labrecque"}, "edited": false, "score": 0, "creation_date": 1618034952, "post_id": 32547759, "comment_id": 118485164, "body": "@Denis I&#39;d try setting a Windows environment variable for PYSPARK_SUBMIT_ARGS.  Can&#39;t help with the log location though on Windows. (Rarely touch Windows these days)."}], "tags": [], "owner": {"reputation": 111, "user_id": 4573043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7cbd5de3feb602b028769cefe3cfae?s=128&d=identicon&r=PG", "display_name": "quax", "link": "https://stackoverflow.com/users/4573043/quax"}, "is_accepted": false, "score": 6, "last_activity_date": 1442132736, "creation_date": 1442132736, "answer_id": 32547759, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/32547759#32547759", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>Had the same issue with my iphython notebook (IPython 3.2.1) on Linux (ubuntu).</p>\n\n<p>What was missing in my case was setting the master URL in the $PYSPARK_SUBMIT_ARGS environment like this (assuming you use bash): </p>\n\n<pre><code>export PYSPARK_SUBMIT_ARGS=\"--master spark://&lt;host&gt;:&lt;port&gt;\"\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>export PYSPARK_SUBMIT_ARGS=\"--master spark://192.168.2.40:7077\"\n</code></pre>\n\n<p>You can put this into your .bashrc file. You get the correct URL in the log for the spark master (the location for this log is reported when you start the master with /sbin/start_master.sh).</p>\n"}, {"comments": [{"owner": {"reputation": 1873, "user_id": 5675130, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1f744b4a85fd476f7e3d0f3a4561cb67?s=128&d=identicon&r=PG&f=1", "display_name": "lfk", "link": "https://stackoverflow.com/users/5675130/lfk"}, "edited": false, "score": 2, "creation_date": 1519778222, "post_id": 35080073, "comment_id": 85045576, "body": "Where do I find that log file?"}], "tags": [], "owner": {"reputation": 2527, "user_id": 636398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/470adb3e2ae20a9b5964604f028eb0b8?s=128&d=identicon&r=PG", "display_name": "Ida", "link": "https://stackoverflow.com/users/636398/ida"}, "is_accepted": false, "score": 1, "last_activity_date": 1454056567, "creation_date": 1454056567, "answer_id": 35080073, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/35080073#35080073", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I got the same <code>Java gateway process exited......port number</code> exception even though I set <code>PYSPARK_SUBMIT_ARGS</code> properly. I'm running Spark 1.6 and trying to get pyspark to work with IPython4/Jupyter (OS: ubuntu as VM guest).</p>\n\n<p>While I got this exception, I noticed an hs_err_*.log was generated and it started with:</p>\n\n<p><code>There is insufficient memory for the Java Runtime Environment to continue. Native memory allocation (malloc) failed to allocate 715849728 bytes for committing reserved memory.</code></p>\n\n<p>So I increased the memory allocated for my ubuntu via VirtualBox Setting and restarted the guest ubuntu. Then this <code>Java gateway</code> exception goes away and everything worked out fine.</p>\n"}, {"comments": [{"owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "edited": false, "score": 1, "creation_date": 1576077603, "post_id": 36367669, "comment_id": 104782790, "body": "Where can one read up more about this pyspark-shell argument? I can&#39;t find it mentioned anywhere."}], "tags": [], "owner": {"reputation": 749, "user_id": 3962288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e7378c5a9b1a8cd7ae38f49b6cffef83?s=128&d=identicon&r=PG&f=1", "display_name": "Anup Ash", "link": "https://stackoverflow.com/users/3962288/anup-ash"}, "is_accepted": false, "score": 25, "last_activity_date": 1494750498, "last_edit_date": 1494750498, "creation_date": 1459555410, "answer_id": 36367669, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/36367669#36367669", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>this should help you</p>\n\n<p>One solution is adding pyspark-shell to the shell environment variable PYSPARK_SUBMIT_ARGS:</p>\n\n<pre><code>export PYSPARK_SUBMIT_ARGS=\"--master local[2] pyspark-shell\"\n</code></pre>\n\n<p>There is a change in python/pyspark/java_gateway.py , which requires PYSPARK_SUBMIT_ARGS includes pyspark-shell if a PYSPARK_SUBMIT_ARGS variable is set by a user.</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 794071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03453df813d295d1192c3a2b6b612092?s=128&d=identicon&r=PG", "display_name": "Pim Schaaf", "link": "https://stackoverflow.com/users/794071/pim-schaaf"}, "is_accepted": false, "score": 2, "last_activity_date": 1461104409, "creation_date": 1461104409, "answer_id": 36730511, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/36730511#36730511", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I got the same <code>Exception: Java gateway process exited before sending the driver its port number</code> in Cloudera VM when trying to start IPython with CSV support with a syntax error:</p>\n\n<p><code>PYSPARK_DRIVER_PYTHON=ipython pyspark --packages com.databricks:spark-csv_2.10.1.4.0</code></p>\n\n<p>will throw the error, while:</p>\n\n<p><code>PYSPARK_DRIVER_PYTHON=ipython pyspark --packages com.databricks:spark-csv_2.10:1.4.0</code></p>\n\n<p>will not.</p>\n\n<p>The difference is in that last <strong>colon</strong> in the last (working) example, seperating the <strong>Scala version number</strong> from the <strong>package version number</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6530589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a37f7ed8abec60cf8ec41922aaa0b7?s=128&d=identicon&r=PG", "display_name": "Josh Terrell", "link": "https://stackoverflow.com/users/6530589/josh-terrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1467236156, "creation_date": 1467236156, "answer_id": 38110442, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/38110442#38110442", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I got this error because I was running low on disk space.</p>\n"}, {"comments": [{"owner": {"reputation": 9507, "user_id": 179014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/233a1f82dede8ddec66a4e23794c6a3a?s=128&d=identicon&r=PG", "display_name": "asmaier", "link": "https://stackoverflow.com/users/179014/asmaier"}, "edited": false, "score": 0, "creation_date": 1504886050, "post_id": 39301277, "comment_id": 79203243, "body": "For a fully automatic installation of Oracle Java8 on Ubuntu see <a href=\"https://newfivefour.com/docker-java8-auto-install.html\" rel=\"nofollow noreferrer\">newfivefour.com/docker-java8-auto-install.html</a> ."}, {"owner": {"reputation": 145, "user_id": 5213098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F4JVU.jpg?s=128&g=1", "display_name": "F. R", "link": "https://stackoverflow.com/users/5213098/f-r"}, "edited": false, "score": 0, "creation_date": 1532426861, "post_id": 39301277, "comment_id": 89959735, "body": "this worked for me, after trying the EXPORT statements to no avail"}, {"owner": {"reputation": 1569, "user_id": 5196274, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PMRuyR54Zh0/AAAAAAAAAAI/AAAAAAAAAAw/WCi22GHOpvE/photo.jpg?sz=128", "display_name": "QA Collective", "link": "https://stackoverflow.com/users/5196274/qa-collective"}, "edited": false, "score": 3, "creation_date": 1551929781, "post_id": 39301277, "comment_id": 96823519, "body": "I&#39;m confused.  How can you not have java installed with an error like that?  The first part of it is a java stack trace!  I think you simply had the problem that JAVA_HOME wasn&#39;t set correctly/at all."}], "tags": [], "owner": {"reputation": 1098, "user_id": 2191173, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ptIHF.jpg?s=128&g=1", "display_name": "Old Panda", "link": "https://stackoverflow.com/users/2191173/old-panda"}, "is_accepted": false, "score": 28, "last_activity_date": 1484170967, "last_edit_date": 1484170967, "creation_date": 1472853970, "answer_id": 39301277, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/39301277#39301277", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>One possible reason is JAVA_HOME is not set because java is not installed.</p>\n\n<p>I encountered the same issue. It says </p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsupportedClassVersionError: org/apache/spark/launcher/Main : Unsupported major.minor version 51.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:643)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)\n    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:323)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:296)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:268)\n    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:406)\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"/opt/spark/python/pyspark/conf.py\", line 104, in __init__\n    SparkContext._ensure_initialized()\n  File \"/opt/spark/python/pyspark/context.py\", line 243, in _ensure_initialized\n    SparkContext._gateway = gateway or launch_gateway()\n  File \"/opt/spark/python/pyspark/java_gateway.py\", line 94, in launch_gateway\n    raise Exception(\"Java gateway process exited before sending the driver its port number\")\nException: Java gateway process exited before sending the driver its port number\n</code></pre>\n\n<p>at <code>sc = pyspark.SparkConf()</code>. I solved it by running</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java8-installer\n</code></pre>\n\n<p>which is from <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04\" rel=\"noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04</a></p>\n"}, {"comments": [{"owner": {"reputation": 6484, "user_id": 104659, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc44a4cc19994eb91975817284bee937?s=128&d=identicon&r=PG", "display_name": "Gerald Senarclens de Grancy", "link": "https://stackoverflow.com/users/104659/gerald-senarclens-de-grancy"}, "edited": false, "score": 0, "creation_date": 1505908890, "post_id": 45070215, "comment_id": 79603674, "body": "Thx - this solved my problem on KDE Neon (based on Ubuntu 16.04)."}], "tags": [], "owner": {"reputation": 2399, "user_id": 845743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a96879a8f2d4740baa7e256339dbb?s=128&d=identicon&r=PG", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/845743/pankaj-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1499910803, "creation_date": 1499910803, "answer_id": 45070215, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/45070215#45070215", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>In my case this error came for the script which was running fine before. So I figured out that this might be due to my JAVA update. Before I was using java 1.8 but I had accidentally updated to java 1.9. When I switched back to java 1.8 the error disappeared and everything is running fine. \nFor those, who get this error for the same reason but do not know how to switch back to older java version on ubuntu: \nrun</p>\n\n<pre><code>sudo update-alternatives --config java \n</code></pre>\n\n<p>and make the selection for java version</p>\n"}, {"tags": [], "owner": {"reputation": 7362, "user_id": 1017917, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/4YcbI.jpg?s=128&g=1", "display_name": "Soumyaansh", "link": "https://stackoverflow.com/users/1017917/soumyaansh"}, "is_accepted": false, "score": 1, "last_activity_date": 1514572020, "creation_date": 1514572020, "answer_id": 48026811, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/48026811#48026811", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>Had same issue, after installing java using below lines solved the issue !</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java8-installer\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 590, "user_id": 4839262, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/l0bfF.jpg?s=128&g=1", "display_name": "mikesneider", "link": "https://stackoverflow.com/users/4839262/mikesneider"}, "edited": false, "score": 0, "creation_date": 1591367581, "post_id": 49505137, "comment_id": 110037756, "body": "but if you type java -version showed another version instead 8?"}], "tags": [], "owner": {"reputation": 515, "user_id": 5597062, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/10207815156082701/picture?type=large", "display_name": "aghd", "link": "https://stackoverflow.com/users/5597062/aghd"}, "is_accepted": false, "score": 0, "last_activity_date": 1522129321, "creation_date": 1522129321, "answer_id": 49505137, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/49505137#49505137", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>Worked hours on this. My problem was with Java 10 installation. I uninstalled it and installed Java 8, and now Pyspark works.</p>\n"}, {"tags": [], "owner": {"reputation": 1747, "user_id": 3926352, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ad6ad03419f7821b67217d98e0abbd4c?s=128&d=identicon&r=PG&f=1", "display_name": "Kiem Nguyen", "link": "https://stackoverflow.com/users/3926352/kiem-nguyen"}, "is_accepted": false, "score": 4, "last_activity_date": 1522733480, "creation_date": 1522733480, "answer_id": 49622868, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/49622868#49622868", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>After spending hours and hours trying many different solutions, I can confirm that Java 10 SDK causes this error. On Mac, please navigate to /Library/Java/JavaVirtualMachines then run this command to uninstall Java JDK 10 completely:</p>\n\n<pre><code>sudo rm -rf jdk-10.jdk/\n</code></pre>\n\n<p>After that, please download JDK 8 then the problem will be solved.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9665881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194b094cab0798ec6b38705fe33f6ce0?s=128&d=identicon&r=PG", "display_name": "Sujan Mukherjee", "link": "https://stackoverflow.com/users/9665881/sujan-mukherjee"}, "is_accepted": false, "score": 1, "last_activity_date": 1524075247, "last_edit_date": 1524075247, "creation_date": 1524074257, "answer_id": 49906130, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/49906130#49906130", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I figured out the problem in Windows system. The installation directory for Java must not have blanks in the path such as in <code>C:\\Program Files</code>. I re-installed Java in <code>C\\Java</code>. I set <code>JAVA_HOME</code> to <code>C:\\Java</code> and the problem went away.</p>\n"}, {"comments": [{"owner": {"reputation": 876, "user_id": 3463297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/961b90e70779ccc84b7cfbc33ae5dd57?s=128&d=identicon&r=PG&f=1", "display_name": "rishi jain", "link": "https://stackoverflow.com/users/3463297/rishi-jain"}, "edited": false, "score": 0, "creation_date": 1571213855, "post_id": 51032134, "comment_id": 103161286, "body": "how to install openjdk-8-jdk-headless on Windows?"}], "tags": [], "owner": {"reputation": 20969, "user_id": 2314737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/RF6KX.jpg?s=128&g=1", "display_name": "user2314737", "link": "https://stackoverflow.com/users/2314737/user2314737"}, "is_accepted": false, "score": 7, "last_activity_date": 1581976737, "last_edit_date": 1581976737, "creation_date": 1529962724, "answer_id": 51032134, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/51032134#51032134", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>Had this error message running pyspark on Ubuntu, got rid of it by installing the <code>openjdk-8-jdk</code> package</p>\n\n<pre><code>from pyspark import SparkConf, SparkContext\nsc = SparkContext(conf=SparkConf().setAppName(\"MyApp\").setMaster(\"local\"))\n^^^ error\n</code></pre>\n\n<p>Install Open JDK 8:</p>\n\n<pre><code>apt-get install openjdk-8-jdk-headless -qq    \n</code></pre>\n\n<h3>On MacOS</h3>\n\n<p>Same on Mac OS, I typed in a terminal:</p>\n\n<pre><code>$ java -version\nNo Java runtime present, requesting install. \n</code></pre>\n\n<p>I was prompted to install Java from the <a href=\"https://www.oracle.com/java/technologies/javase-jdk13-downloads.html\" rel=\"nofollow noreferrer\">Oracle's download site</a>, chose the MacOS installer, clicked on <code>jdk-13.0.2_osx-x64_bin.dmg</code> and after that checked that Java was installed</p>\n\n<pre><code>$ java -version\njava version \"13.0.2\" 2020-01-14\n</code></pre>\n\n<p>EDIT To install JDK 8 you need to go to <a href=\"https://www.oracle.com/java/technologies/javase-jdk8-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase-jdk8-downloads.html</a> (login required) </p>\n\n<p>After that I was able to start a Spark context with pyspark. </p>\n\n<h3>Checking if it works</h3>\n\n<p>In Python:</p>\n\n<pre><code>from pyspark import SparkContext \nsc = SparkContext.getOrCreate() \n\n# check that it really works by running a job\n# example from http://spark.apache.org/docs/latest/rdd-programming-guide.html#parallelized-collections\ndata = range(10000) \ndistData = sc.parallelize(data)\ndistData.filter(lambda x: not x&amp;1).take(10)\n# Out: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\n</code></pre>\n\n<p>Note that you might need to set the environment variables <code>PYSPARK_PYTHON</code> and <code>PYSPARK_DRIVER_PYTHON</code> and they have to be the same Python version as the Python (or IPython) you're using to run pyspark (the driver).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9880049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49c0f67ee00edf3f893fcdaa739970?s=128&d=identicon&r=PG&f=1", "display_name": "J.Bo", "link": "https://stackoverflow.com/users/9880049/j-bo"}, "is_accepted": false, "score": 0, "last_activity_date": 1534578526, "last_edit_date": 1534578526, "creation_date": 1534576855, "answer_id": 51906286, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/51906286#51906286", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I have the same error.</p>\n\n<p>My trouble shooting procedures are:</p>\n\n<ol>\n<li>Check out Spark source code.</li>\n<li>Follow the error message. In my case: <code>pyspark/java_gateway.py</code>, line 93, in <code>launch_gateway</code>.</li>\n<li>Check the code logic to find the root cause then you will resolve it.</li>\n</ol>\n\n<p>In my case the issue is PySpark has no permission to create some temporary directory, so I just run my IDE with sudo</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 9661973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9899404b4d2df378035e382fe029add3?s=128&d=identicon&r=PG&f=1", "display_name": "Joon", "link": "https://stackoverflow.com/users/9661973/joon"}, "is_accepted": false, "score": 1, "last_activity_date": 1540611633, "creation_date": 1540611633, "answer_id": 53018517, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/53018517#53018517", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I have the same error in running pyspark in pycharm.\nI solved the problem by adding JAVA_HOME in pycharm's environment variables.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8654755, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74HpzEPkJvY/AAAAAAAAAAI/AAAAAAAAB64/hFE09EBiCnk/photo.jpg?sz=128", "display_name": "Yuuura87", "link": "https://stackoverflow.com/users/8654755/yuuura87"}, "is_accepted": false, "score": 0, "last_activity_date": 1540981468, "creation_date": 1540981468, "answer_id": 53081155, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/53081155#53081155", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>For me, the answer was to add two 'Content Roots' in 'File' -> 'Project Structure' -> 'Modules' (in IntelliJ):</p>\n\n<ol>\n<li>YourPath\\spark-2.2.1-bin-hadoop2.7\\python</li>\n<li>YourPath\\spark-2.2.1-bin-hadoop2.7\\python\\lib\\py4j-0.10.4-src.zip</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 6692757, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1761b168db288a0aa80f79b1bd530412?s=128&d=identicon&r=PG&f=1", "display_name": "noiivice", "link": "https://stackoverflow.com/users/6692757/noiivice"}, "is_accepted": false, "score": 0, "last_activity_date": 1543799018, "creation_date": 1543799018, "answer_id": 53586191, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/53586191#53586191", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>This is an old thread but I'm adding my solution for those who use mac.</p>\n\n<p>The issue was with the <code>JAVA_HOME</code>.  You have to include this in your <code>.bash_profile</code>.</p>\n\n<p>Check your <code>java -version</code>. If you downloaded the latest Java but it doesn't show up as the latest version, then you know that the path is wrong.  Normally, the default path is <code>export JAVA_HOME= /usr/bin/java</code>.  </p>\n\n<p>So try changing the path to:\n<code>/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java</code></p>\n\n<p>Alternatively you could also download the latest JDK.\n<a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/index.html</a> and this will automatically replace <code>usr/bin/java</code> to the latest version.  You can confirm this by doing <code>java -version</code> again.</p>\n\n<p>Then that should work.</p>\n"}, {"tags": [], "owner": {"reputation": 884, "user_id": 4237591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y2s6Q.jpg?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/4237591/steven"}, "is_accepted": false, "score": 0, "last_activity_date": 1549505457, "creation_date": 1549505457, "answer_id": 54565325, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/54565325#54565325", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>Make sure that both your Java directory (as found in your path) AND your Python interpreter reside in directories with no spaces in them. These were the cause of my problem.</p>\n"}, {"tags": [], "owner": {"reputation": 1470, "user_id": 511809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f1d2b20ea1892dd184367d3850a920?s=128&d=identicon&r=PG", "display_name": "natbusa", "link": "https://stackoverflow.com/users/511809/natbusa"}, "is_accepted": false, "score": 2, "last_activity_date": 1553683725, "creation_date": 1553683725, "answer_id": 55375380, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/55375380#55375380", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>If you are trying to run spark without hadoop binaries, you might encounter the above mentioned error. One solution is to :</p>\n\n<p>1) download hadoop separatedly.<br>\n2) add hadoop to your PATH<br>\n3) add hadoop classpath to your SPARK install</p>\n\n<p>The first two steps are trivial, the last step can be best done by adding the following in the $SPARK_HOME/conf/spark-env.sh in each spark node (master and workers)</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>### in conf/spark-env.sh ###\n\nexport SPARK_DIST_CLASSPATH=$(hadoop classpath)\n</code></pre>\n\n<p>for more info also check: <a href=\"https://spark.apache.org/docs/latest/hadoop-provided.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/hadoop-provided.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 5846131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9676ff07afce17fb451f2688b138c58b?s=128&d=identicon&r=PG&f=1", "display_name": "shihs", "link": "https://stackoverflow.com/users/5846131/shihs"}, "is_accepted": false, "score": 4, "last_activity_date": 1555175336, "creation_date": 1555175336, "answer_id": 55667945, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/55667945#55667945", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I use Mac OS. I fixed the problem!</p>\n\n<p>Below is how I fixed it.</p>\n\n<p>JDK8 seems works fine. (<a href=\"https://github.com/jupyter/jupyter/issues/248\" rel=\"nofollow noreferrer\">https://github.com/jupyter/jupyter/issues/248</a>)</p>\n\n<p>So I checked my JDK <strong>/Library/Java/JavaVirtualMachines</strong>, I only have <strong>jdk-11.jdk</strong> in this path. </p>\n\n<p>I <a href=\"https://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac\">downloaded JDK8</a> (I followed the link).\nWhich is:</p>\n\n<pre><code>brew tap caskroom/versions\nbrew cask install java8\n</code></pre>\n\n<p>After this, I added</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home\nexport JAVA_HOME=\"$(/usr/libexec/java_home -v 1.8)\"\n</code></pre>\n\n<p>to <strong>~/.bash_profile</strong> file.  (you sholud check your jdk1.8 file name)</p>\n\n<p>It works now!\nHope this help :)</p>\n"}, {"tags": [], "owner": {"reputation": 693, "user_id": 3406616, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/19f303f690799e93db48b93df452b470?s=128&d=identicon&r=PG&f=1", "display_name": "hayj", "link": "https://stackoverflow.com/users/3406616/hayj"}, "is_accepted": false, "score": 0, "last_activity_date": 1555322380, "creation_date": 1555322380, "answer_id": 55686710, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/55686710#55686710", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>In my case it was because I wrote <code>SPARK_DRIVER_MEMORY=10</code> instead of <code>SPARK_DRIVER_MEMORY=10g</code> in <code>spark-env.sh</code></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8343786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e86e78fef28e28e5e9c3f50c0f69a77?s=128&d=identicon&r=PG&f=1", "display_name": "A known", "link": "https://stackoverflow.com/users/8343786/a-known"}, "is_accepted": false, "score": 1, "last_activity_date": 1555928573, "last_edit_date": 1555928573, "creation_date": 1555926314, "answer_id": 55792410, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/55792410#55792410", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I had the same exception and I tried everything by setting and resetting all environment variables. But the issue in the end drilled down to space in appname property of spark session,that is, \"SparkSession.builder.appName(\"StreamingDemo\").getOrCreate()\". Immediately after removing space from string given to appname property it got resolved.I was using pyspark 2.7 with eclipse on windows 10 environment. It worked for me.\nEnclosed are required screenshots.<a href=\"https://i.stack.imgur.com/ztNog.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ztNog.png\" alt=\"Error_with space\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FJkqD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FJkqD.png\" alt=\"No Error_without space\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 669, "user_id": 10006823, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FjAfIr0sODM/AAAAAAAAAAI/AAAAAAAAN-Y/_pFuRQ1cNxI/photo.jpg?sz=128", "display_name": "Ran Feldesh", "link": "https://stackoverflow.com/users/10006823/ran-feldesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1559932671, "last_edit_date": 1559932671, "creation_date": 1559931659, "answer_id": 56499492, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/56499492#56499492", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>For Linux (Ubuntu 18.04) with a JAVA_HOME issue, a key is to point it to the <strong>master</strong> folder:</p>\n\n<ol>\n<li>Set Java 8 as default by: <strong><code>sudo update-alternatives --config java</code></strong>. If Jave 8 is not installed, install by: <strong><code>sudo apt install openjdk-8-jdk</code></strong>.</li>\n<li>Set <code>JAVA_HOME</code> environment variable as the <strong>master</strong> java 8 folder. The location is given by the first command above removing <code>jre/bin/java</code>. Namely: <strong><code>export JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"</code></strong>. If done on the command line, this will be relevant only for the current session (<a href=\"https://www.tutorialspoint.com/unix_commands/export.htm\" rel=\"nofollow noreferrer\">ref: export command on Linux</a>). To verify: <strong><code>echo $JAVA_HOME</code></strong>.</li>\n<li>In order to have this permanently set, add the bolded line above to a file that runs before you start your IDE/Jupyter/python interpreter. This could be by adding the bolded line above to <strong><code>.bashrc</code></strong>. This file loads when a bash is started interactively <a href=\"https://unix.stackexchange.com/questions/129143/what-is-the-purpose-of-bashrc-and-how-does-it-work\">ref: .bashrc</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 2450426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838180695b7f079fc595eb5dd01311db?s=128&d=identicon&r=PG", "display_name": "ZhangXu", "link": "https://stackoverflow.com/users/2450426/zhangxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1560245888, "creation_date": 1560245888, "answer_id": 56540748, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/56540748#56540748", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>There are so many reasons for this error. My reason is : the version of pyspark is incompatible with spark. \npyspark version :2.4.0, but spark version is 2.2.0.\nit always cause python always fail when starting spark process. then spark cannot tell its ports to python. so error will be \"Pyspark: Exception: Java gateway process exited before sending the driver its port number\n\".</p>\n\n<p>I suggest you dive into source code to find out the real reasons when this error happens</p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 5371368, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1EB3Gaz-s0E/AAAAAAAAAAI/AAAAAAAAAJ0/0QnWvLyCg9Q/photo.jpg?sz=128", "display_name": "abhishek kumar", "link": "https://stackoverflow.com/users/5371368/abhishek-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1563103214, "creation_date": 1563103214, "answer_id": 57026932, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/57026932#57026932", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I go this error fixed by using the below code. I had setup the SPARK_HOME though. You may follow this simple steps from <a href=\"https://eproblems.wordpress.com/2019/07/14/how-to-start-with-pyspark-on-windows-10/\" rel=\"nofollow noreferrer\">eproblems website</a></p>\n\n<pre><code>spark_home = os.environ.get('SPARK_HOME', None)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 9891948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-l0k0HxmHU/AAAAAAAAAAI/AAAAAAABUH8/EOMiO0XjKzk/photo.jpg?sz=128", "display_name": "Marcelo Tournier", "link": "https://stackoverflow.com/users/9891948/marcelo-tournier"}, "is_accepted": false, "score": 2, "last_activity_date": 1573796077, "creation_date": 1573796077, "answer_id": 58870903, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/58870903#58870903", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>Spark is very picky with the Java version you use. It is highly recommended that you use Java 1.8 (The open source AdoptOpenJDK 8 works well too).\nAfter install it, set <code>JAVA_HOME</code> to your bash variables, if you use Mac/Linux:</p>\n\n<p><code>export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)</code></p>\n\n<p><code>export PATH=$JAVA_HOME/bin:$PATH</code></p>\n"}, {"tags": [], "owner": {"reputation": 675, "user_id": 4153895, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ydo4BAzPBWE/AAAAAAAAAAI/AAAAAAAAHyM/ajbMvcgLeoU/photo.jpg?sz=128", "display_name": "Tarun Reddy", "link": "https://stackoverflow.com/users/4153895/tarun-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1584352250, "creation_date": 1584352250, "answer_id": 60703686, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/60703686#60703686", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>The error occured since JAVA is not installed on machine.\nSpark is developed in scala which usually runs on JAVA.</p>\n\n<p>Try to install JAVA and execute the pyspark statements.\nIt will works </p>\n"}, {"tags": [], "owner": {"reputation": 721, "user_id": 3598981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XzNAU.jpg?s=128&g=1", "display_name": "Arjjun", "link": "https://stackoverflow.com/users/3598981/arjjun"}, "is_accepted": false, "score": 1, "last_activity_date": 1585355353, "last_edit_date": 1585355353, "creation_date": 1585342828, "answer_id": 60894056, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/60894056#60894056", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>This usually happens if you do not have java installed in your machine.</p>\n\n<p>Go to command prompt and check the version of your java: \ntype : <code>java -version</code></p>\n\n<p>you should get output sth like this</p>\n\n<p><code>java version \"1.8.0_241\"\nJava(TM) SE Runtime Environment (build 1.8.0_241-b07)\nJava HotSpot(TM) 64-Bit Server VM (build 25.241-b07, mixed mode)</code></p>\n\n<p>If not, go to orcale and download jdk. \nCheck this video on how to download java and add it to the buildpath.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=f7rT0h1Q5Wo\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=f7rT0h1Q5Wo</a></p>\n"}, {"tags": [], "owner": {"reputation": 403, "user_id": 2421204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b9c41f137d76be9a0f0cddcf7353a87?s=128&d=identicon&r=PG", "display_name": "Artyom Rebrov", "link": "https://stackoverflow.com/users/2421204/artyom-rebrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1592374605, "creation_date": 1592374605, "answer_id": 62422559, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/62422559#62422559", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>Had the same issue when was trying to run the pyspark job triggered from the Airflow with remote spark.driver.host. The cause of the issue in my case was: </p>\n\n<blockquote>\n  <p>Exception: Java gateway process exited before sending the driver its\n  port number</p>\n</blockquote>\n\n<p>...</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.Exception: When running with master 'yarn' either HADOOP_CONF_DIR or YARN_CONF_DIR must be set in the environment.</p>\n</blockquote>\n\n<p>Fixed by adding exports:</p>\n\n<pre><code>export HADOOP_CONF_DIR=/etc/hadoop/conf\n</code></pre>\n\n<p>And the same environment variable added in the pyspark script:</p>\n\n<pre><code>import os\nos.environ[\"HADOOP_CONF_DIR\"] = '/etc/hadoop/conf'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 3155305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947af86a89d1851934b27cc3ed89f0b0?s=128&d=identicon&r=PG&f=1", "display_name": "muzamil", "link": "https://stackoverflow.com/users/3155305/muzamil"}, "is_accepted": false, "score": 0, "last_activity_date": 1602091130, "creation_date": 1602091130, "answer_id": 64249141, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/64249141#64249141", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I was getting this error when i was using jdk-1.8 32-bit\nswitching to 64-bit works for me.</p>\n<p>I was getting this error because 32-bit java could not allocate more than 3G heap memory required by the spark driver (16G):</p>\n<pre><code>builder = SparkSession.builder \\\n        .appName(&quot;Spark NLP&quot;) \\\n        .master(&quot;local[*]&quot;) \\\n        .config(&quot;spark.driver.memory&quot;, &quot;16G&quot;) \\\n        .config(&quot;spark.serializer&quot;, &quot;org.apache.spark.serializer.KryoSerializer&quot;) \\\n        .config(&quot;spark.kryoserializer.buffer.max&quot;, &quot;1000M&quot;) \\\n        .config(&quot;spark.driver.maxResultSize&quot;, &quot;0&quot;)\n</code></pre>\n<p>I tested making this up to 2G and it worked in 32-bit as well.</p>\n"}, {"tags": [], "owner": {"reputation": 2639, "user_id": 751689, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1f73274a9133f2efa538a3bc71712fff?s=128&d=identicon&r=PG", "display_name": "kitokid", "link": "https://stackoverflow.com/users/751689/kitokid"}, "is_accepted": false, "score": 1, "last_activity_date": 1610266218, "creation_date": 1610266218, "answer_id": 65651256, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/65651256#65651256", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I will repost <a href=\"https://github.com/jupyter/notebook/issues/743\" rel=\"nofollow noreferrer\">how I solved it</a> here just for future references.</p>\n<p><strong>How I solved my similar problem</strong></p>\n<p><em>Prerequisite:</em></p>\n<ol>\n<li>anaconda already installed</li>\n<li>Spark already installed (<a href=\"https://spark.apache.org/downloads.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/downloads.html</a>)</li>\n<li>pyspark already installed (<a href=\"https://anaconda.org/conda-forge/pyspark\" rel=\"nofollow noreferrer\">https://anaconda.org/conda-forge/pyspark</a>)</li>\n</ol>\n<p><em>Steps I did</em> (NOTE: set the folder path accordingly to your system)</p>\n<blockquote>\n<ol>\n<li>set the following environment variables.</li>\n<li>SPARK_HOME to 'C:\\spark\\spark-3.0.1-bin-hadoop2.7'</li>\n<li>set HADOOP_HOME  to 'C:\\spark\\spark-3.0.1-bin-hadoop2.7'</li>\n<li>set PYSPARK_DRIVER_PYTHON to 'jupyter'</li>\n<li>set PYSPARK_DRIVER_PYTHON_OPTS to 'notebook'</li>\n<li>add 'C:\\spark\\spark-3.0.1-bin-hadoop2.7\\bin;' to PATH system variable.</li>\n<li>Change the java installed folder directly under C: (Previously java was installed under Program files, so I re-installed directly\nunder C:)</li>\n<li>so my JAVA_HOME will become like this 'C:\\java\\jdk1.8.0_271'</li>\n</ol>\n</blockquote>\n<p>now. it works !</p>\n"}, {"tags": [], "owner": {"reputation": 3061, "user_id": 1408615, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb3291f2827a007e95c14722911f0f0b?s=128&d=identicon&r=PG", "display_name": "kennyut", "link": "https://stackoverflow.com/users/1408615/kennyut"}, "is_accepted": false, "score": 0, "last_activity_date": 1615989473, "creation_date": 1615989473, "answer_id": 66674609, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/66674609#66674609", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I had the same issue once when I brought up Spark using Docker container. It turned out I set wrong permission for the <strong>/tmp</strong> folder.\nIf spark has no write permission on <strong>/tmp</strong>, it will cause this issue too.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 11344054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p9_mEGZ3DYU/AAAAAAAAAAI/AAAAAAAAFIw/5yhtf70AkvE/photo.jpg?sz=128", "display_name": "Nisan Chhetri", "link": "https://stackoverflow.com/users/11344054/nisan-chhetri"}, "is_accepted": false, "score": 0, "last_activity_date": 1617367051, "creation_date": 1617367051, "answer_id": 66919454, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/66919454#66919454", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>You can simply run the following code in the terminal. Then, I hope this will resolve your error.</p>\n<pre><code>sudo apt-get install default-jdk\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 5137479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfab5455986d07f848ba9a608c8d154?s=128&d=identicon&r=PG&f=1", "display_name": "answerzilla", "link": "https://stackoverflow.com/users/5137479/answerzilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1618034122, "last_edit_date": 1618034122, "creation_date": 1618009585, "answer_id": 67029299, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po/67029299#67029299", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I had the same error with PySpark, and setting JAVA_HOME to Java 11 worked for me (it was originally set to 16). I'm using MacOS and PyCharm.\nYou can check your current Java version by doing <code>echo $JAVA_HOME</code>.</p>\n<p>Below is what worked for me. On my Mac I used the following homebrew command, but you can use a different method to install the desired Java version, depending on your OS.</p>\n<pre><code># Install Java 11 (I believe 8 works too)\n$ brew install openjdk@11\n\n# Set JAVA_HOME by assigning the path where your Java is\n$ export JAVA_HOME=/usr/local/opt/openjdk@11\n</code></pre>\n<p>Note: If you installed using homebrew and need to find the location of the path, you can do <code>$ brew --prefix openjdk@11</code> and it should return a path like this: <code>/usr/local/opt/openjdk@11</code></p>\n<p>At this point, I could run my PySpark program from the terminal - however, my IDE (PyCharm) still had the same error until I globally changed the JAVA_HOME variable.</p>\n<p>To update the variable, first check whether you're using the zsh or bash shell by running <code>echo $SHELL</code> on the command line. For zsh, you'll edit the <code>~/.zshenv</code> file and for bash you'll edit the <code>~/.bash_profile</code>.</p>\n<pre><code># open the file\n$ vim ~/.zshenv\nOR\n$ vim ~/.bash_profile\n\n# once inside the file, set the variable with your Java path, then save and close the file\nexport JAVA_HOME=/usr/local/opt/openjdk@11\n\n# test if it was set successfully\n$ echo $JAVA_HOME\n/usr/local/opt/openjdk@11\n</code></pre>\n<p>After this step, I could run PySpark through my PyCharm IDE as well.</p>\n"}], "owner": {"reputation": 2005, "user_id": 3689314, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de01a0264b9b4e2b932cd084fa53a9f7?s=128&d=identicon&r=PG&f=1", "display_name": "mt88", "link": "https://stackoverflow.com/users/3689314/mt88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125798, "favorite_count": 14, "protected_date": 1574192043, "answer_count": 33, "score": 65, "last_activity_date": 1618034122, "creation_date": 1438803941, "last_edit_date": 1495541430, "question_id": 31841509, "link": "https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-po", "title": "Pyspark: Exception: Java gateway process exited before sending the driver its port number", "body": "<p>I'm trying to run pyspark on my macbook air. When i try starting it up I get the error:</p>\n\n<pre><code>Exception: Java gateway process exited before sending the driver its port number\n</code></pre>\n\n<p>when sc = SparkContext() is being called upon startup. I have tried running the following commands:</p>\n\n<pre><code>./bin/pyspark\n./bin/spark-shell\nexport PYSPARK_SUBMIT_ARGS=\"--master local[2] pyspark-shell\"\n</code></pre>\n\n<p>with no avail. I have also looked here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31825911/spark-python-java-gateway-process-exited-before-sending-the-driver-its-port\">Spark + Python - Java gateway process exited before sending the driver its port number?</a> </p>\n\n<p>but the question has never been answered. Please help! Thanks.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2819, "user_id": 1451311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ee722dcd3d2b6473cb2d26584288fa62?s=128&d=identicon&r=PG&f=1", "display_name": "mgilbert", "link": "https://stackoverflow.com/users/1451311/mgilbert"}, "edited": false, "score": 0, "creation_date": 1438864590, "post_id": 31841818, "comment_id": 51631208, "body": "Thanks, although my application is not that performance intensive my solution was definitely on the slow enough to get me annoyed side so this speed up is much appreciated. Good to know about what&#39;s going on under the hood as well."}, {"owner": {"reputation": 938, "user_id": 913893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b2c9583c4c21e1c1cd5c887cf04c18?s=128&d=identicon&r=PG", "display_name": "John Tyree", "link": "https://stackoverflow.com/users/913893/john-tyree"}, "edited": false, "score": 0, "creation_date": 1454474538, "post_id": 31841818, "comment_id": 58055400, "body": "I&#39;m a little confused here. If we&#39;re just trying to count the number of business days, doesn&#39;t <code>pd.date_range(start, end, freq=&#39;B&#39;).size</code> give it to us immediately? No need to use numpy at all."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 938, "user_id": 913893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b2c9583c4c21e1c1cd5c887cf04c18?s=128&d=identicon&r=PG", "display_name": "John Tyree", "link": "https://stackoverflow.com/users/913893/john-tyree"}, "edited": false, "score": 1, "creation_date": 1454492902, "post_id": 31841818, "comment_id": 58064405, "body": "@JohnTyree: The problem is to find the number of business days between a DatetimeIndex and a Timestamp. <code>pd.date_range(start, end, freq=&#39;B&#39;).size</code> finds the number of business days between two dates. You would need to call that in a loop for every day in the DatetimeIndex. If you time <code>[pd.date_range(drg[i], timestamp, freq=&#39;B&#39;).size - 1 for i in range(len(drg))]</code> you&#39;ll find it is extremely slow."}, {"owner": {"reputation": 938, "user_id": 913893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b2c9583c4c21e1c1cd5c887cf04c18?s=128&d=identicon&r=PG", "display_name": "John Tyree", "link": "https://stackoverflow.com/users/913893/john-tyree"}, "edited": false, "score": 0, "creation_date": 1454533406, "post_id": 31841818, "comment_id": 58092476, "body": "Oh I see. I missed the vectorization part. Fair enough."}, {"owner": {"reputation": 510, "user_id": 1924855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3820decf71d521cdce2b266d4c477573?s=128&d=identicon&r=PG", "display_name": "Raveen Beemsingh", "link": "https://stackoverflow.com/users/1924855/raveen-beemsingh"}, "edited": false, "score": 0, "creation_date": 1569526623, "post_id": 31841818, "comment_id": 102635868, "body": "i used the date in string format for this and worked just as fast <code>[                 np.busday_count(                     str(row.approvedAt).split()[0], str(row.refundedAt).split()[0]                 )                 for row in df.itertuples()             ]</code>  I was trying to find the mean business days between two events"}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 11, "last_activity_date": 1438809198, "last_edit_date": 1438809198, "creation_date": 1438804969, "answer_id": 31841818, "question_id": 31841487, "link": "https://stackoverflow.com/questions/31841487/pandas-number-of-business-days-between-a-datetimeindex-and-a-timestamp/31841818#31841818", "title": "Pandas number of business days between a DatetimeIndex and a Timestamp", "body": "<p><code>TimedeltaIndex</code>es represent fixed spans of time. They can be added to Pandas Timestamps to increment them by fixed amounts. Their behavior is never dependent on whether or not the Timestamp is a business day.\nThe TimedeltaIndex itself is never business-day aware.</p>\n\n<p>Since the ultimate goal is to count the number of days between a DatetimeIndex and a Timestamp, I would look in another direction than conversion to TimedeltaIndex.</p>\n\n<hr>\n\n<p>Unfortunately, date calculations are rather complicated, and a number of data structures have sprung up to deal with them -- Python <code>datetime.dates</code>, <code>datetime.datetime</code>s, Pandas <code>Timestamps</code>, NumPy <code>datetime64</code>s. </p>\n\n<p>They each have their strengths, but no one of them is good for all purposes.  To\ntake advantage of their strengths, it is sometime necessary to convert between\nthese types.</p>\n\n<p>To use <code>np.busday_count</code> you need to convert the DatetimeIndex and Timestamp to\nsome type <code>np.busday_count</code> understands. What you call kludginess is the code\nrequired to convert types. There is no way around that assuming we want to use <code>np.busday_count</code> -- and I know of no better tool for this job than <code>np.busday_count</code>.</p>\n\n<p>So, although I don't think there is a more succinct way to count business days\nthan than the method you propose, there is a far more performant way:\nConvert to <code>datetime64[D]</code>'s instead of Python <code>datetime.date</code> objects:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndrg = pd.date_range('2000-07-31', '2015-08-05', freq='B')\ntimestamp = pd.Timestamp('2015-08-05', 'B')\n\ndef using_astype(drg, timestamp):\n    A = drg.values.astype('&lt;M8[D]')\n    B = timestamp.asm8.astype('&lt;M8[D]')\n    return np.busday_count(A, B)\n\ndef using_datetimes(drg, timestamp):\n    A = [d.date() for d in drg]\n    B = pd.Timestamp('2015-08-05', 'B').date()\n    return np.busday_count(A, B)\n</code></pre>\n\n<hr>\n\n<p>This is over 100x faster for the example above (where <code>len(drg)</code> is close to 4000):</p>\n\n<pre><code>In [88]: %timeit using_astype(drg, timestamp)\n10000 loops, best of 3: 95.4 \u00b5s per loop\n\nIn [89]: %timeit using_datetimes(drg, timestamp)\n100 loops, best of 3: 10.3 ms per loop\n</code></pre>\n\n<p><code>np.busday_count</code> converts its input to <code>datetime64[D]</code>s anyway, so avoiding this extra conversion to and from <code>datetime.date</code>s is far more efficient.</p>\n"}], "owner": {"reputation": 2819, "user_id": 1451311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ee722dcd3d2b6473cb2d26584288fa62?s=128&d=identicon&r=PG&f=1", "display_name": "mgilbert", "link": "https://stackoverflow.com/users/1451311/mgilbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5595, "favorite_count": 1, "accepted_answer_id": 31841818, "answer_count": 1, "score": 9, "last_activity_date": 1454492994, "creation_date": 1438803841, "last_edit_date": 1495542771, "question_id": 31841487, "link": "https://stackoverflow.com/questions/31841487/pandas-number-of-business-days-between-a-datetimeindex-and-a-timestamp", "title": "Pandas number of business days between a DatetimeIndex and a Timestamp", "body": "<p>This is quite similar to the question <a href=\"https://stackoverflow.com/questions/17703436/counting-the-business-days-between-two-series?lq=1\">here</a> but I'm wondering if there is a clean way in pandas to make a business day aware TimedeltaIndex? Ultimately I am trying to get the number of business days (no holiday calendar) between a DatetimeIndex and a Timestamp. As per the referenced question, something like this works</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndrg = pd.date_range('2015-07-31', '2015-08-05', freq='B')\nA = [d.date() for d in drg]\nB = pd.Timestamp('2015-08-05', 'B').date()\nnp.busday_count(A, B)\n</code></pre>\n\n<p>which gives</p>\n\n<pre><code>array([3, 2, 1, 0], dtype=int64)\n</code></pre>\n\n<p>but this seems a bit kludgy. If I try something like</p>\n\n<pre><code>drg - pd.Timestamp('2015-08-05', 'B')\n</code></pre>\n\n<p>I get a TimedeltaIndex but the business day frequency is dropped</p>\n\n<pre><code>TimedeltaIndex(['-5 days', '-2 days', '-1 days', '0 days'], dtype='timedelta64[ns]', freq=None)\n</code></pre>\n\n<p>Just wondering if there is a more elegant way to go about this.</p>\n"}, {"tags": ["python", "chinese-locale"], "answers": [{"comments": [{"owner": {"reputation": 2975, "user_id": 5151880, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/0a59af0c7872edb9840526ef44e76e1e?s=128&d=identicon&r=PG&f=1", "display_name": "vandernath", "link": "https://stackoverflow.com/users/5151880/vandernath"}, "edited": false, "score": 0, "creation_date": 1438837983, "post_id": 31846461, "comment_id": 51615455, "body": "Thank you. When I print search_term however I get a weird string of characters like this: %E3%B6%80%E3%B5%8B%E4%9F%BF Why? Problem with encoding?"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 2975, "user_id": 5151880, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/0a59af0c7872edb9840526ef44e76e1e?s=128&d=identicon&r=PG&f=1", "display_name": "vandernath", "link": "https://stackoverflow.com/users/5151880/vandernath"}, "edited": false, "score": 0, "creation_date": 1438838123, "post_id": 31846461, "comment_id": 51615512, "body": "@vandernath: no, it is expected for an urlencoded value. You want to print <code>random_word</code> instead (Unicode string)."}, {"owner": {"reputation": 2975, "user_id": 5151880, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/0a59af0c7872edb9840526ef44e76e1e?s=128&d=identicon&r=PG&f=1", "display_name": "vandernath", "link": "https://stackoverflow.com/users/5151880/vandernath"}, "edited": false, "score": 0, "creation_date": 1438838239, "post_id": 31846461, "comment_id": 51615547, "body": "Got it. Then it&#39;s the line search_term that I don&#39;t understand, why is it necessary to encode random_word before searching? I&#39;d just like to understand your code as I&#39;m a beginner. :-)"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 2975, "user_id": 5151880, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/0a59af0c7872edb9840526ef44e76e1e?s=128&d=identicon&r=PG&f=1", "display_name": "vandernath", "link": "https://stackoverflow.com/users/5151880/vandernath"}, "edited": false, "score": 0, "creation_date": 1438839010, "post_id": 31846461, "comment_id": 51615771, "body": "@vandernath: url can&#39;t contain non-ASCII characters. They have to be percent-encoded. Some browsers decode the url in the address bar automatically (to display it to a human)  but they always send <a href=\"https://tools.ietf.org/html/rfc3986#section-2.1\" rel=\"nofollow noreferrer\">percent-encoded urls</a> to an http server. Run a network sniffer such as <code>tcpdump</code>, <code>wireshark</code> to see raw urls (or just copy an url with Unicode and paste it into a text  editor."}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 0, "last_activity_date": 1438832677, "last_edit_date": 1495540282, "creation_date": 1438832677, "answer_id": 31846461, "question_id": 31841467, "link": "https://stackoverflow.com/questions/31841467/generate-random-strings-of-chinese-characters-in-python/31846461#31846461", "title": "Generate random strings of Chinese characters in Python", "body": "<p>What is Chinese character is complicated,  see <a href=\"https://stackoverflow.com/q/1366068/4279\">What&#39;s the complete range for Chinese characters in Unicode?</a></p>\n\n<p>You could choose Unicode ranges that are suitable for your case:</p>\n\n<pre><code>#!/usr/bin/env python2\nimport random\nimport urllib\n\ncommon, rare = range(0x4e00, 0xa000), range(0x3400, 0x4e00)\nchars = map(unichr, rare + common)\nrandom_word = u''.join([random.choice(chars) for _ in range(3)]) # 3 letters\nsearch_term = urllib.quote(random_word.encode('utf-8'), safe='')\npath, headers = urllib.urlretrieve(\"https://itunes.apple.com/search?\"\n    \"country=cn&amp;entity=software&amp;limit=5&amp;term=\" + search_term,\n    u\"download%s.json\" % random_word)\n</code></pre>\n\n<p>Your probably want <code>data = json.load(urllib2.urlopen(url))</code> instead of saving the response to a file.</p>\n"}], "owner": {"reputation": 2975, "user_id": 5151880, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/0a59af0c7872edb9840526ef44e76e1e?s=128&d=identicon&r=PG&f=1", "display_name": "vandernath", "link": "https://stackoverflow.com/users/5151880/vandernath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1394, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438832677, "creation_date": 1438803802, "last_edit_date": 1495539832, "question_id": 31841467, "link": "https://stackoverflow.com/questions/31841467/generate-random-strings-of-chinese-characters-in-python", "title": "Generate random strings of Chinese characters in Python", "body": "<p>I wrote a small piece of code that searches for a random string of three letters in the App Store:</p>\n\n<pre><code>searchTerm = (''.join(random.choice(string.ascii_lowercase) for i in range(3)))\n    urllib.urlretrieve(\"https://itunes.apple.com/search?country=us&amp;entity=software&amp;limit=5&amp;term=\" + str(searchTerm), \"download.txt\")\n</code></pre>\n\n<p>Now I wonder how I could do the same, but with Chinese characters, as I'd like to explore the Chinese App Store as well.</p>\n\n<p>I had a look at this question <a href=\"https://stackoverflow.com/questions/14803834/making-a-list-of-traditional-chinese-characters-from-a-string\">making a list of traditional Chinese characters from a string</a> but it didn't help.</p>\n"}, {"tags": ["python", "windows", "powershell", "batch-file", "utf-8"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438803930, "post_id": 31841443, "comment_id": 51604474, "body": "That isn&#39;t a problem with CMD or Powershell. The error comes from your Python code. You need to properly encode/decode your Unicode characters."}, {"owner": {"reputation": 271, "user_id": 4441003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa061c8cfd2ea300af17d3d6d679ef58?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Kennedy", "link": "https://stackoverflow.com/users/4441003/jonathan-kennedy"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438804014, "post_id": 31841443, "comment_id": 51604529, "body": "Ok, is there any reason this is able to be figured out in ipython, but not in CMD?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1438804712, "post_id": 31841443, "comment_id": 51604930, "body": "Reduce your problem and post the code here. I have a feeling you didn&#39;t configure the IO encoding correctly for what you&#39;re trying to output."}, {"owner": {"reputation": 5826, "user_id": 3093031, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DoZeH.jpg?s=128&g=1", "display_name": "Knuckle-Dragger", "link": "https://stackoverflow.com/users/3093031/knuckle-dragger"}, "edited": false, "score": 0, "creation_date": 1438804803, "post_id": 31841443, "comment_id": 51604973, "body": "convert the text file to ascii.   It will throw wing_dings for all your unicode characters it cannot display.  Replace those unicode characters in your .py script with the ascii equivalent and ensure it has a proper BOM (byte order mark) signifying it&#39;s UTF-8 and you&#39;ll likely have a better go once you get to powershell.  Otherwise, drop the whole utf-8 format and go for plain text.  See the note about Microsoft in this article -  <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Byte_order_mark</a>"}, {"owner": {"reputation": 11251, "user_id": 236871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/048901e9a9591d658f2f690b71e7530c?s=128&d=identicon&r=PG", "display_name": "KurzedMetal", "link": "https://stackoverflow.com/users/236871/kurzedmetal"}, "edited": false, "score": 2, "creation_date": 1438805432, "post_id": 31841443, "comment_id": 51605317, "body": "The problem is the console, not the file. You wouldn&#39;t get this error in linux console with proper utf8 support. Windows console is f&#39;ed up, you can change to codepage 65001 (and use a proper) to set it in utf-8 but the last time I tried I still got a plethora of issues. If you search around in StackOverflow there&#39;s a lot of post about the subject, with different solutions, but nothing elegant. I&#39;ll try to link you something useful soon. I&#39;m not exactly sure how are you using IPython (notebook or console?), maybe you can expand on how you execute in CMD or IPython?"}, {"owner": {"reputation": 11251, "user_id": 236871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/048901e9a9591d658f2f690b71e7530c?s=128&d=identicon&r=PG", "display_name": "KurzedMetal", "link": "https://stackoverflow.com/users/236871/kurzedmetal"}, "edited": false, "score": 1, "creation_date": 1438806361, "post_id": 31841443, "comment_id": 51605794, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5419/python-unicode-and-the-windows-console\">Python, Unicode, and the Windows console</a>"}, {"owner": {"reputation": 11251, "user_id": 236871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/048901e9a9591d658f2f690b71e7530c?s=128&d=identicon&r=PG", "display_name": "KurzedMetal", "link": "https://stackoverflow.com/users/236871/kurzedmetal"}, "edited": false, "score": 1, "creation_date": 1438806510, "post_id": 31841443, "comment_id": 51605864, "body": "I&#39;ll recommend you looking at <a href=\"http://stackoverflow.com/a/4637795/236871\">this stackoverflow Q&amp;A</a>. Since this subject is a bit complicated and there&#39;s enough information about it in this site I&#39;d recommended to close this question as duplicate to avoid spreading good info even more. Read the Q&amp;A I provided previously, there&#39;s a lot of information, batch scripts, python code and recommendations to workaround this problem. Good luck, hope it helps"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1438819948, "post_id": 31841443, "comment_id": 51611029, "body": "Did you type this out from memory, or is it really a <code>UnicodeDecodeError</code> that says it can&#39;t <i>encode</i> a character? (It helps if you can provide a small script that reproduces the problem. Also include a complete traceback, and please use copy and paste instead of manually copying text.) The default encoding in Python 2 is ASCII. It&#39;s never the encoding of the Windows console, so I highly doubt the issue is related to printing to the console -- at least not directly. Also, let&#39;s stay on the basic problem without trying to figure out what IPython does."}], "owner": {"reputation": 271, "user_id": 4441003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa061c8cfd2ea300af17d3d6d679ef58?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Kennedy", "link": "https://stackoverflow.com/users/4441003/jonathan-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 901, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438803721, "creation_date": 1438803721, "question_id": 31841443, "link": "https://stackoverflow.com/questions/31841443/utf-8-errors-in-powershell-and-cmd", "title": "UTF-8 errors in PowerShell and CMD", "body": "<p>I'm trying to execute a script on a schedule it's coded in utf-8 at the beginning of the file:</p>\n\n<pre><code>#-*- coding: utf-8 -*- .\n</code></pre>\n\n<p>I've set Task Scheduler in windows to run a batch file that calls the py file for execution.</p>\n\n<pre><code>python C:/Users/admin_4190248/Desktop/Howard/redshift_howard.py\n</code></pre>\n\n<p>However, when the script runs in either CMD or PowerShell, it throws a \"can't encode error\" like this:</p>\n\n<pre><code>UnicodeDecodeError:  'ascii' codec can't encode character u'\\u2013'...\n</code></pre>\n\n<p>Which I don't understand, since the file executes fine in an ipython console. </p>\n\n<p>My question is therefore, is there another (more ipython like) tool that I can use to execute my script on a schedule?  Or, can you help to solve this UTF-8 issue within CMD?</p>\n"}, {"tags": ["python", "django", "celery", "django-celery"], "answers": [{"tags": [], "owner": {"reputation": 929, "user_id": 3495098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xh2ry.jpg?s=128&g=1", "display_name": "S\u01a1n L&#226;m", "link": "https://stackoverflow.com/users/3495098/s%c6%a1n-l%c3%a2m"}, "is_accepted": false, "score": 0, "last_activity_date": 1459828375, "creation_date": 1459828375, "answer_id": 36416830, "question_id": 31841353, "link": "https://stackoverflow.com/questions/31841353/celery-django-get-result-of-periodic-task-execution/36416830#36416830", "title": "Celery/Django: Get result of periodic task execution", "body": "<p>You can run service to monitor task have been performed by using command line</p>\n\n<pre><code>    python manage.py celerycam --frequency=10.0\n</code></pre>\n\n<p>More detail at:\n<a href=\"http://www.lexev.org/en/2014/django-celery-setup/\" rel=\"nofollow\">http://www.lexev.org/en/2014/django-celery-setup/</a></p>\n"}], "owner": {"reputation": 659, "user_id": 3089583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff85ac823857d9a9fe5c109e98f4e08?s=128&d=identicon&r=PG", "display_name": "jeudyx", "link": "https://stackoverflow.com/users/3089583/jeudyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1218, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1459828375, "creation_date": 1438803350, "question_id": 31841353, "link": "https://stackoverflow.com/questions/31841353/celery-django-get-result-of-periodic-task-execution", "title": "Celery/Django: Get result of periodic task execution", "body": "<p>I have a Django 1.7 project using Celery (latest). I have a REST API that receives some parameters, and creates, programmatically, a PeriodicTask. For testing, I'm using a period of seconds:</p>\n\n<pre><code>periodic_task, _= PeriodicTask.objects.get_or_create(name=task_label, task=task_name, interval=interval_schedule)\n</code></pre>\n\n<p>I store a reference to this tasks somewhere. I start celery beat:</p>\n\n<pre><code>python manage.py celery beat\n</code></pre>\n\n<p>and a worker:</p>\n\n<pre><code>python manage.py celery worker --loglevel=info\n</code></pre>\n\n<p>and my task runs as I can see in the worker's output.</p>\n\n<p>I've set the result backend:</p>\n\n<pre><code>CELERY_RESULT_BACKEND = 'djcelery.backends.database:DatabaseBackend'\n</code></pre>\n\n<p>and with that, I can check the task results using the <strong>TaskMeta</strong> model. The objects there contains the task_id (the same that I would get if I call the task with .delay() or .apply_async() ), the status, the result, everything, beautiful.</p>\n\n<p>However, I can't find a connection between the <strong>PeriodicTask</strong> object and <strong>TaskMeta</strong>.</p>\n\n<p>PeriodicTask has a <strong>task</strong> property, but its just the task name/path. The id is just a consecutive number, not the task_id from <strong>TaskMeta</strong>, and I really need to be able to find the task that was executed as a <strong>PeriodicTask</strong> with <strong>TaskMeta</strong> so I can offer some monitoring over the status. <strong>TaskMeta</strong> doesn't have any other value that allows me to identify which task ran (since I will have several ones), so at least I could give a status of the last execution.</p>\n\n<p>I've checked all over Celery docs and in here, but no solution so far.</p>\n\n<p>Any help is highly appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "performance", "dictionary", "lookup", "startswith"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438803317, "post_id": 31841303, "comment_id": 51604137, "body": "I don&#39;t think so - keys are hashed, which means that keys of <code>key1</code> and <code>key12</code> may have totally different representations in the lookup table."}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438803814, "post_id": 31841303, "comment_id": 51604408, "body": "@PadraicCunningham Unless it&#39;s <code>Python3</code> then <code>keys</code> actually returns an iterator if I&#39;m not wrong.. just like <code>Python2</code>&#39;s <code>ikeys</code>"}, {"owner": {"reputation": 6473, "user_id": 907927, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LuqIB.jpg?s=128&g=1", "display_name": "kasper Taeymans", "link": "https://stackoverflow.com/users/907927/kasper-taeymans"}, "edited": false, "score": 0, "creation_date": 1438803973, "post_id": 31841303, "comment_id": 51604499, "body": "If you want efficiency then go for a database engine (Mysql for example) these are designed to retrieve data as efficiently as possible."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438834523, "post_id": 31841303, "comment_id": 51614500, "body": "let us know what approach is faster in your case -- you can <a href=\"http://stackoverflow.com/help/self-answer\">post your own answer with the comparison</a>"}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1438804281, "post_id": 31841363, "comment_id": 51604703, "body": "In the dict approach, I would stick with deferring the value access until the key is confirmed to be valid (i.e., <code>[d[s] for s in d if s.startswith(...)]</code>)."}, {"owner": {"reputation": 27303, "user_id": 1003123, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef598363853c3081cc13585afbe81d0f?s=128&d=identicon&r=PG", "display_name": "enrico.bacis", "link": "https://stackoverflow.com/users/1003123/enrico-bacis"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1438804495, "post_id": 31841363, "comment_id": 51604821, "body": "@chepner: yes, I think it could be more efficient, especially if, as expected, there are not many matches."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1439075887, "post_id": 31841363, "comment_id": 51714000, "body": "Your comparison does not include the trie construction time or how much memory does it require. Could add the comparison with <a href=\"http://stackoverflow.com/a/31846621/4279\"><code>SuffixTree.SubstringDict(b&#39;0123456789&#39;)</code></a>? Here&#39;s <a href=\"http://stackoverflow.com/a/5479374/4279\">comparison for a similar problem</a>"}], "tags": [], "owner": {"reputation": 27303, "user_id": 1003123, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef598363853c3081cc13585afbe81d0f?s=128&d=identicon&r=PG", "display_name": "enrico.bacis", "link": "https://stackoverflow.com/users/1003123/enrico-bacis"}, "is_accepted": true, "score": 9, "last_activity_date": 1438851684, "last_edit_date": 1438851684, "creation_date": 1438803390, "answer_id": 31841363, "question_id": 31841303, "link": "https://stackoverflow.com/questions/31841303/more-efficient-way-to-look-up-dictionary-values-whose-keys-start-with-same-prefi/31841363#31841363", "title": "More efficient way to look up dictionary values whose keys start with same prefix", "body": "<p>You can avoid producing the intermediate list generated by <code>dict.keys()</code> (in python 2.x):</p>\n\n<pre><code>result = [d[key] for key in d if key.startswith(query)]\n</code></pre>\n\n<p>But you most likely want to use a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\"><em>trie</em></a> instead of a dictionary, so you can find all the values associated with a key with a common prefix (a trie is similar to a tree based on prefixes).</p>\n\n<p><a href=\"http://kmike.ru/python-data-structures/#tries\" rel=\"nofollow noreferrer\">Here</a> you can find some different implementation of tries.</p>\n\n<blockquote>\n  <p><a href=\"https://i.stack.imgur.com/ugX7w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ugX7w.png\" alt=\"A trie for keys &quot;A&quot;, &quot;to&quot;, &quot;tea&quot;, &quot;ted&quot;, &quot;ten&quot;, &quot;i&quot;, &quot;in&quot;, and &quot;inn&quot;.\"></a></p>\n  \n  <p>A trie for keys \"A\", \"to\", \"tea\", \"ted\", \"ten\", \"i\", \"in\", and \"inn\". (source <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">wikipedia</a>)</p>\n</blockquote>\n\n<hr>\n\n<p>Let's compare the timings for the different solutions:</p>\n\n<pre><code># create a dictionary with 30k entries\nd = {str(x):str(x) for x in xrange(1, 30001)}\nquery = '108'\n\n# dict with keys()\n%timeit [d[s] for s in d.keys() if s.startswith(query)]\n\n    100 loops, best of 3: 8.87 ms per loop\n</code></pre>\n\n<hr>\n\n<pre><code># dict without keys()\n%timeit [d[s] for s in d if s.startswith(query)]\n\n    100 loops, best of 3: 7.83 ms per loop\n\n# 11.72% improvement\n</code></pre>\n\n<hr>\n\n<pre><code># PyTrie (https://pypi.python.org/pypi/PyTrie/0.2)\nimport pytrie\npt = pytrie.Trie(d)\n\n%timeit [pt[s] for s in pt.iterkeys(query)]\n\n    1000 loops, best of 3: 320 \u00b5s per loop\n\n# 96.36% improvement\n</code></pre>\n\n<hr>\n\n<pre><code># datrie (https://pypi.python.org/pypi/datrie/0.7)\nimport datrie\ndt = datrie.Trie('0123456789')\nfor key, val in d.iteritems():\n    dt[unicode(key)] = val\n\n%timeit [dt[s] for s in dt.keys(unicode(query))]\n\n    10000 loops, best of 3: 162 \u00b5s per loop\n\n# 98.17% improvement\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1438809516, "last_edit_date": 1438809516, "creation_date": 1438805520, "answer_id": 31841966, "question_id": 31841303, "link": "https://stackoverflow.com/questions/31841303/more-efficient-way-to-look-up-dictionary-values-whose-keys-start-with-same-prefi/31841966#31841966", "title": "More efficient way to look up dictionary values whose keys start with same prefix", "body": "<p>The <code>sortedContainers</code> lib has a <a href=\"http://www.grantjenks.com/docs/sortedcontainers/sorteddict.html\" rel=\"nofollow\">SortedDict</a> implementation, once you have sorted dict you can bisect_left to find where to start, bisect_right to find the last position then use <a href=\"http://www.grantjenks.com/docs/sortedcontainers/sorteddict.html#sortedcontainers.SortedDict.d.irange\" rel=\"nofollow\">irange</a> to get the keys in the range:</p>\n\n<pre><code>from sortedcontainers import SortedDict\nfrom operator import itemgetter\nfrom itertools import takewhile\n\n\nd = { \"key1\":\"valA\", \"key123\":\"valB\", \"key1XY\":\"valC\",\n  \"key2\":\"valD\", \"key2-22\":\"valE\",\"key3\":\"foo\" }\n\nkey = \"key2\"\nd = SortedDict(sorted(d.items(), key=itemgetter(0)))\nstart = d.bisect_left(key)\nprint([d[key] for key in takewhile(lambda x: x.startswith(\"key2\"), d.irange(d.iloc[start]]))\n['valD', 'valE']\n</code></pre>\n\n<p>Once you maintain a sorteddict using the sorteddict is a lot more efficint:</p>\n\n<pre><code>In [68]: l = [\"key{}\".format(randint(1,1000000)) for _ in range(100000)] \nIn [69]: l.sort()    \nIn [70]: d = SortedDict(zip(l,range(100000)))\n\nIn [71]: timeit [d[s] for s in d.keys() if s.startswith(\"key2\")]\n10 loops, best of 3: 124 ms per loop\n\nIn [72]: timeit [d[s] for s in d if s.startswith(\"key2\")]\n10 loops, best of 3: 24.6 ms per loop\n\nIn [73]: %%timeit\nkey = \"key2\"\nstart = d.bisect_left(key)\nl2 =[d[k] for k in takewhile(lambda x: x.startswith(\"key2\"),d.irange(d.iloc[start]))]\n   ....: \n\n100 loops, best of 3: 5.57 ms per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1523877689, "post_id": 31846621, "comment_id": 86726510, "body": "The author of this particular suffix tree has declared his project dead, with the comment &quot;there are plenty of other suffix tree implementations in Python&quot;.  Trouble is, the ones I&#39;ve tried so far don&#39;t expose a convenient dict-like object."}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 0, "last_activity_date": 1438833689, "creation_date": 1438833689, "answer_id": 31846621, "question_id": 31841303, "link": "https://stackoverflow.com/questions/31841303/more-efficient-way-to-look-up-dictionary-values-whose-keys-start-with-same-prefi/31846621#31846621", "title": "More efficient way to look up dictionary values whose keys start with same prefix", "body": "<p>You could use a <a href=\"https://github.com/JDonner/SuffixTree\" rel=\"nofollow\">suffix tree</a>:</p>\n\n<pre><code>#!/usr/bin/env python2\nfrom SuffixTree import SubstringDict # $ pip install https://github.com/JDonner/SuffixTree/archive/master.zip\n\nd = { \"key1\":\"valA\", \"key123\":\"valB\", \"key1XY\":\"valC\",\n      \"key2\":\"valD\", \"key2-22\":\"valE\" }\n\na = '\\n' # anchor\nprefixes = SubstringDict()\nfor key, value in d.items(): # populated the tree *once*\n    prefixes[a + key] = value # assume there is no '\\n' in key\n\nfor query in [\"key1\", \"key2\"]: # perform queries\n    print query, prefixes[a + query]\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>key1 ['valC', 'valA', 'valB']\nkey2 ['valE', 'valD']\n</code></pre>\n"}], "owner": {"reputation": 4929, "user_id": 1054435, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DYDWj.png?s=128&g=1", "display_name": "I Z", "link": "https://stackoverflow.com/users/1054435/i-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1622, "favorite_count": 1, "accepted_answer_id": 31841363, "answer_count": 3, "score": 6, "last_activity_date": 1438851834, "creation_date": 1438803184, "last_edit_date": 1438851834, "question_id": 31841303, "link": "https://stackoverflow.com/questions/31841303/more-efficient-way-to-look-up-dictionary-values-whose-keys-start-with-same-prefi", "title": "More efficient way to look up dictionary values whose keys start with same prefix", "body": "<p>I have a dictionary whose keys come in sets that share the same prefix, like this:</p>\n\n<pre><code>d = { \"key1\":\"valA\", \"key123\":\"valB\", \"key1XY\":\"valC\",\n      \"key2\":\"valD\", \"key2-22\":\"valE\" }\n</code></pre>\n\n<p>Given a query string, I need to look up all the values associated with keys that start with that prefix, e.g. for <code>query=\"key1\"</code> I need to get <code>[\"valA\", \"valB\", \"valC\"]</code></p>\n\n<p>My implementation below works but is too slow for a large number of queries since the dictionary <code>d</code> has about 30,000 keys and most of the keys are more than 20 characters long:</p>\n\n<pre><code>result = [d[s] for s in d.keys() if s.startswith(query)]\n</code></pre>\n\n<p>Is there a faster/more efficient way to implement this?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 1848, "user_id": 761625, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7e806625ebb515ac5cd5fdd280e47a8?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/761625/joel"}, "edited": false, "score": 0, "creation_date": 1438804175, "post_id": 31841289, "comment_id": 51604624, "body": "It looks like fig.set_figsize(30, 1, forward=True) works, but the forward=True keyword argument is necessary. If forward=False, or if left off, it doesn&#39;t work. It&#39;s a workaround I suppose: I can do fig.set_figsize(fig.get_width(), value) to set only one. But this is a workaround, I&#39;d like to know why it doesn&#39;t work. Maybe I should file as a bug?"}, {"owner": {"reputation": 2927, "user_id": 1103901, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09dec0737b1899b0ed3226671220af58?s=128&d=identicon&r=PG", "display_name": "N1B4", "link": "https://stackoverflow.com/users/1103901/n1b4"}, "edited": false, "score": 0, "creation_date": 1438804358, "post_id": 31841289, "comment_id": 51604752, "body": "Does <code>fig = plt.figure(figsize=(30,1))</code> work?"}, {"owner": {"reputation": 1848, "user_id": 761625, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7e806625ebb515ac5cd5fdd280e47a8?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/761625/joel"}, "reply_to_user": {"reputation": 2927, "user_id": 1103901, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09dec0737b1899b0ed3226671220af58?s=128&d=identicon&r=PG", "display_name": "N1B4", "link": "https://stackoverflow.com/users/1103901/n1b4"}, "edited": false, "score": 0, "creation_date": 1438804447, "post_id": 31841289, "comment_id": 51604792, "body": "@N1B4 Yes, but I want to change the figure size after creation at the time of adding a colorbar. Basically, I want to programmatically expand the window when I create a colorbar so my figure still fits nicely inside the window, and I don&#39;t know at figure creation whether I will add a colorbar or not."}, {"owner": {"reputation": 2927, "user_id": 1103901, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09dec0737b1899b0ed3226671220af58?s=128&d=identicon&r=PG", "display_name": "N1B4", "link": "https://stackoverflow.com/users/1103901/n1b4"}, "edited": false, "score": 0, "creation_date": 1438804756, "post_id": 31841289, "comment_id": 51604950, "body": "You could set the figure size at the end with <code>fig.set_size_inches(30,1)</code> and replace 30 or 1 with something new if a colorbar is included. Or more dynamically, first determine the figure size (e.g. <code>size = fig.get_size_inches()</code>) and adjust that as needed."}, {"owner": {"reputation": 1848, "user_id": 761625, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7e806625ebb515ac5cd5fdd280e47a8?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/761625/joel"}, "reply_to_user": {"reputation": 2927, "user_id": 1103901, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09dec0737b1899b0ed3226671220af58?s=128&d=identicon&r=PG", "display_name": "N1B4", "link": "https://stackoverflow.com/users/1103901/n1b4"}, "edited": false, "score": 0, "creation_date": 1438804812, "post_id": 31841289, "comment_id": 51604977, "body": "Whoops... I meant fig.set_size_inches... not set_figsize."}], "answers": [{"tags": [], "owner": {"reputation": 7442, "user_id": 3745896, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ptFQe.jpg?s=128&g=1", "display_name": "River", "link": "https://stackoverflow.com/users/3745896/river"}, "is_accepted": false, "score": 6, "last_activity_date": 1520623141, "last_edit_date": 1520623141, "creation_date": 1438804198, "answer_id": 31841582, "question_id": 31841289, "link": "https://stackoverflow.com/questions/31841289/resizing-matplotlib-figure-with-set-figwidth-height-doesnt-work/31841582#31841582", "title": "Resizing matplotlib figure with set_fig(width/height) doesn&#39;t work", "body": "<p>The optional parameter <code>forward</code> propagates changes to the canvas in a GUI window that <em>already exists</em>.</p>\n\n<p><a href=\"https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html?highlight=set%20size%20inches#matplotlib.figure.Figure.set_size_inches\" rel=\"nofollow noreferrer\">Documentation here:</a></p>\n\n<blockquote>\n  <p>optional kwarg <code>forward=True</code> will cause the canvas size to be automatically updated; e.g., you can resize the figure window from the shell</p>\n</blockquote>\n\n<p>Using <code>Figure(figsize=(w,h))</code> also works.</p>\n\n<h1>For Matplotlib 2.2.0 and newer</h1>\n\n<p><code>forward=True</code> is the default for all three of <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html?highlight=set%20size%20inches#matplotlib.figure.Figure.set_figheight\" rel=\"nofollow noreferrer\"><code>set_figheight</code></a>, <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html?highlight=set%20size%20inches#matplotlib.figure.Figure.set_figwidth\" rel=\"nofollow noreferrer\"><code>set_figwidth</code></a>, and <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html?highlight=set%20size%20inches#matplotlib.figure.Figure.set_size_inches\" rel=\"nofollow noreferrer\"><code>set_size_inches</code></a> (<code>set_size_inches</code> changes both height and width simultaneously).</p>\n\n<h1>For Matplotlib 1.5.0</h1>\n\n<p><code>forward=True</code> must be specified explicitly as it is <code>False</code> by default. (In Matplotlib 2.0.0, the default is changed to <code>True</code> <em>only</em> for <code>set_size_inches</code>).</p>\n\n<h1>For Matplotlib 1.4.3 and older</h1>\n\n<p><code>forward</code> is only supported by <code>set_size_inches</code>.</p>\n\n<p><a href=\"https://matplotlib.org/1.4.3/api/figure_api.html#matplotlib.figure.Figure.set_figheight\" rel=\"nofollow noreferrer\"><code>set_figheight</code></a> and <a href=\"https://matplotlib.org/1.4.3/api/figure_api.html#matplotlib.figure.Figure.set_figwidth\" rel=\"nofollow noreferrer\"><code>set_figwidth</code></a> do not support this argument, so it is a bit difficult to only change a single dimension of a pre-created GUI.</p>\n"}, {"comments": [{"owner": {"reputation": 2277, "user_id": 3686866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/om881.jpg?s=128&g=1", "display_name": "Mohammad Heydari", "link": "https://stackoverflow.com/users/3686866/mohammad-heydari"}, "edited": false, "score": 1, "creation_date": 1546243257, "post_id": 31841967, "comment_id": 94807154, "body": "it doesn&#39;t changed for me at all"}, {"owner": {"reputation": 531, "user_id": 2112715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed5156e71b78a41f0273aea0aa1769e?s=128&d=identicon&r=PG", "display_name": "Prabah", "link": "https://stackoverflow.com/users/2112715/prabah"}, "edited": false, "score": 0, "creation_date": 1597060676, "post_id": 31841967, "comment_id": 112001595, "body": "This is what I was looking for, It worked. I adjusted height to meet my requirements as well. <code>fig.set_size_inches(5, 15, forward=True)</code>"}], "tags": [], "owner": {"reputation": 1848, "user_id": 761625, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7e806625ebb515ac5cd5fdd280e47a8?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/761625/joel"}, "is_accepted": true, "score": 4, "last_activity_date": 1438813717, "last_edit_date": 1438813717, "creation_date": 1438805523, "answer_id": 31841967, "question_id": 31841289, "link": "https://stackoverflow.com/questions/31841289/resizing-matplotlib-figure-with-set-figwidth-height-doesnt-work/31841967#31841967", "title": "Resizing matplotlib figure with set_fig(width/height) doesn&#39;t work", "body": "<p>I'm not certain why those <a href=\"http://matplotlib.org/api/figure_api.html?highlight=figure#matplotlib.figure.Figure.set_figheight\" rel=\"nofollow\">documented functions</a> don't work, but <a href=\"https://github.com/matplotlib/matplotlib/pull/4677\" rel=\"nofollow\">they have been fixed</a> for the next matplotlib release (>v1.4.3). As a workaround until the next release, replacing <code>set_figwidth</code> and <code>set_figheight</code> solves this problem.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig = plt.figure()\n# Instead of set_figwidth(30)\nfig.set_size_inches(30, fig.get_figheight(), forward=True)\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 1848, "user_id": 761625, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7e806625ebb515ac5cd5fdd280e47a8?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/761625/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10844, "favorite_count": 0, "accepted_answer_id": 31841967, "answer_count": 2, "score": 6, "last_activity_date": 1520623141, "creation_date": 1438803131, "question_id": 31841289, "link": "https://stackoverflow.com/questions/31841289/resizing-matplotlib-figure-with-set-figwidth-height-doesnt-work", "title": "Resizing matplotlib figure with set_fig(width/height) doesn&#39;t work", "body": "<p>For some reason this code creates a figure that is only the standard size: it doesn't change the height or width (I chose widths and heights that are ludicrous to clearly illustrate the problem):</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig = plt.figure()\nfig.set_figwidth(30)\nfig.set_figheight(1)\n\nprint('Width: {}'.format(fig.get_figwidth()))\n\nplt.show()\n</code></pre>\n\n<p>I'm running on OSX 10.10.4, Python 3.4.3, Matplotlib 1.4.3. (Installed via Macports.) Any ideas? What am I missing?</p>\n"}]